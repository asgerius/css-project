[{"tags": ["ios", "objective-c", "swift", "frameworks"], "answers": [{"tags": [], "owner": {"reputation": 436, "user_id": 9051293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a88ae8d26aa1f2c5f33c305c0f4a8c48?s=128&d=identicon&r=PG&f=1", "display_name": "DevesH", "link": "https://stackoverflow.com/users/9051293/devesh"}, "is_accepted": true, "score": 1, "last_activity_date": 1568828686, "creation_date": 1568828686, "answer_id": 57998236, "question_id": 57994155, "link": "https://stackoverflow.com/questions/57994155/unable-to-access-to-swift-4-2-class-included-in-a-framework-into-objective-c-pro/57998236#57998236", "title": "Unable to access to Swift 4.2 class included in a framework into Objective C Project", "body": "<p>By default Swift generates code that is only available to other Swift code, but if you need to interact with the Objective-C runtime \u2013 all of UIKit, for example \u2013 you need to tell Swift what to do.</p>\n\n<p>That\u2019s where the @objc attribute comes in: when you apply it to a class or method it instructs Swift to make those things available to Objective-C as well as Swift code. So, any time you want to call a method from a UIBarButtonItem or a Timer, you\u2019ll need to mark that method using @objc so it\u2019s exposed \u2013 both of those, and many others, are Objective-C code.</p>\n\n<pre><code>class MyController: UIViewController {\n    @objc func authenticateUser() {\n\n    }\n</code></pre>\n\n<p>To make this class accessible from Objective-C, we need to add the @objc keyword just before the class declaration. This tells the compiler to do some magic behind the scenes (namely, create an invisible header file)</p>\n\n<pre><code>@objc class SwiftViewController: UIViewController {\n// ... \n}\n</code></pre>\n\n<p>Reference - <a href=\"https://www.hackingwithswift.com/example-code/language/what-is-the-objc-attribute\" rel=\"nofollow noreferrer\">https://www.hackingwithswift.com/example-code/language/what-is-the-objc-attribute</a></p>\n"}], "owner": {"reputation": 1473, "user_id": 2261004, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7215b6b0f14040d026ea40c4896bbbbe?s=128&d=identicon&r=PG", "display_name": "Bellots", "link": "https://stackoverflow.com/users/2261004/bellots"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 57998236, "answer_count": 1, "score": -2, "last_activity_date": 1568828686, "creation_date": 1568814066, "question_id": 57994155, "link": "https://stackoverflow.com/questions/57994155/unable-to-access-to-swift-4-2-class-included-in-a-framework-into-objective-c-pro", "title": "Unable to access to Swift 4.2 class included in a framework into Objective C Project", "body": "<p>I've got a framework built in both Objective C and Swift. I've upgraded it from Swift 3 to Swift 4.2, and now, after exporting it through Aggregate target and importing the generated framework inside my Objective C demo app, it doesn't show me any Swift class.</p>\n\n<p>I've already checked if <code>-swift.h</code> is correctly builded, and I can see inside it all Swift classes. However, even if I import the <code>umbrella</code> header inside my demo app, I can't see them.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ios", "objective-c", "xcode", "frameworks"], "comments": [{"owner": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 1, "creation_date": 1568820897, "post_id": 57993332, "comment_id": 102399154, "body": "Use different files for umbrella headers?"}, {"owner": {"reputation": 177, "user_id": 2670899, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/925a854e467d2d49470566e67688c84f?s=128&d=identicon&r=PG", "display_name": "Kyrill", "link": "https://stackoverflow.com/users/2670899/kyrill"}, "reply_to_user": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 0, "creation_date": 1568883614, "post_id": 57993332, "comment_id": 102419259, "body": "Thanks! It works! I posted an answer to indicate what I was doing wrong."}], "answers": [{"tags": [], "owner": {"reputation": 177, "user_id": 2670899, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/925a854e467d2d49470566e67688c84f?s=128&d=identicon&r=PG", "display_name": "Kyrill", "link": "https://stackoverflow.com/users/2670899/kyrill"}, "is_accepted": false, "score": 0, "last_activity_date": 1568883885, "last_edit_date": 1568883885, "creation_date": 1568883556, "answer_id": 58007351, "question_id": 57993332, "link": "https://stackoverflow.com/questions/57993332/conditional-compilation-of-objective-c-framework/58007351#58007351", "title": "Conditional compilation of Objective-C framework", "body": "<p>I solved the problem by using a different umbrella header file for each target, as suggested by Cy-4AH.</p>\n\n<p>I tried it previously and it didn\u2019t work. But now it does! Thank you!</p>\n\n<p>The name of the umbrella header needs to match the product name (as indicated in <a href=\"https://stackoverflow.com/a/57481319/2670899\">this answer from another question</a>), and the import statements need to be updated with that product name, like so:</p>\n\n<p>Product name: MyFrameworkWithExtraFunctionalities</p>\n\n<p>Umbrella header: MyFrameworkWithExtraFunctionalities.h</p>\n\n<pre><code>#import &lt;MyFrameworkWithExtraFunctionalities/FrameworkPublicHeader1.h&gt;\n#import &lt;MyFrameworkWithExtraFunctionalities/FrameworkPublicHeader2.h&gt;\n\n#import &lt;MyFrameworkWithExtraFunctionalities/FrameworkExtraFunctionalityPublicHeader1.h&gt;\n#import &lt;MyFrameworkWithExtraFunctionalities/FrameworkExtraFunctionalityPublicHeader2.h&gt;\n</code></pre>\n\n<p>When I tried previously to make a new umbrella header, I wasn\u2019t giving it the same name as the product name, and the framework was still compiling well, but it wasn\u2019t usable by my iOS projects.</p>\n"}], "owner": {"reputation": 177, "user_id": 2670899, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/925a854e467d2d49470566e67688c84f?s=128&d=identicon&r=PG", "display_name": "Kyrill", "link": "https://stackoverflow.com/users/2670899/kyrill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568883885, "creation_date": 1568811323, "question_id": 57993332, "link": "https://stackoverflow.com/questions/57993332/conditional-compilation-of-objective-c-framework", "title": "Conditional compilation of Objective-C framework", "body": "<p>I\u2019m developing an Objective-C framework and I need to be able to build 2 different versions of that framework:</p>\n\n<ul>\n<li>The basic framework,</li>\n<li>The basic framework + some extra functionalities (some of which are written in Swift).</li>\n</ul>\n\n<p>In the header of my framework, I expose my public headers like this:</p>\n\n<pre><code>#import &lt;MyFramework/FrameworkPublicHeader1.h&gt;\n#import &lt;MyFramework/FrameworkPublicHeader2.h&gt;\n\n#import &lt;MyFramework/FrameworkExtraFunctionalityPublicHeader1.h&gt;\n#import &lt;MyFramework/FrameworkExtraFunctionalityPublicHeader2.h&gt;\n</code></pre>\n\n<p>So far, I created a second target for my framework with extra functionalities.</p>\n\n<p>So I have my \"basic framework\" target with all the classes it needs referenced in the Build Phases tab of the target.\nAnd I have my \"framework with extra functionalities\" target, with a few more classes referenced in the Build Phases tab of the target.</p>\n\n<p>When I want to build the \"basic framework\", I select my \"basic framework\" target, and I edit the header of the framework to import only what's needed:</p>\n\n<pre><code>#import &lt;MyFramework/FrameworkPublicHeader1.h&gt;\n#import &lt;MyFramework/FrameworkPublicHeader2.h&gt;\n\n//#import &lt;MyFramework/FrameworkExtraFunctionalityPublicHeader1.h&gt;\n//#import &lt;MyFramework/FrameworkExtraFunctionalityPublicHeader2.h&gt;\n</code></pre>\n\n<p>When I want to build the \"framework with extra functionalities\", I select my \"framework with extra functionalities\" target, and I edit my framework header to import the headers I need:</p>\n\n<pre><code>#import &lt;MyFramework/FrameworkPublicHeader1.h&gt;\n#import &lt;MyFramework/FrameworkPublicHeader2.h&gt;\n\n#import &lt;MyFramework/FrameworkExtraFunctionalityPublicHeader1.h&gt;\n#import &lt;MyFramework/FrameworkExtraFunctionalityPublicHeader2.h&gt;\n</code></pre>\n\n<p>It works, I can build both versions of the framework and use them in my iOS projects.</p>\n\n<p>But I would like it to be simpler than having to edit my framework header every time I switch targets.</p>\n\n<p>I tried to define a preprocessor macro \"EXTRAFUNCTIONALITIES=1\" in my target's build settings, in Apple Clang - Preprocessing and in Custom Compiler Flags, so that I could just have my framework header like this:</p>\n\n<pre><code>#import &lt;MyFramework/FrameworkPublicHeader1.h&gt;\n#import &lt;MyFramework/FrameworkPublicHeader2.h&gt;\n\n#if EXTRAFUNCTIONALITIES\n#import &lt;MyFramework/FrameworkExtraFunctionalityPublicHeader1.h&gt;\n#import &lt;MyFramework/FrameworkExtraFunctionalityPublicHeader2.h&gt;\n#endif\n</code></pre>\n\n<p>But even though it compiles, the framework cannot be used on my iOS projects anymore when I do that (I have \"Unresolved identifier\" errors when trying to compile the app that uses my framework).</p>\n\n<p>What am I doing wrong? Is there an alternative solution to have my framework header expose different public headers depending on the target selected?</p>\n"}, {"tags": ["objective-c", "firebase", "firebase-realtime-database", "firebase-authentication", "firebase-security"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6399296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86895b60358469ce254bc95bf7393486?s=128&d=identicon&r=PG&f=1", "display_name": "ncvo", "link": "https://stackoverflow.com/users/6399296/ncvo"}, "edited": false, "score": 0, "creation_date": 1568802998, "post_id": 57988656, "comment_id": 102388686, "body": "Thank you, Frank. I&#39;m trying the rule you proposed, but have an error message: Invalid == expression: right operand must be an ordering or string literal when comparing against an ordering."}, {"owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "reply_to_user": {"reputation": 11, "user_id": 6399296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86895b60358469ce254bc95bf7393486?s=128&d=identicon&r=PG&f=1", "display_name": "ncvo", "link": "https://stackoverflow.com/users/6399296/ncvo"}, "edited": false, "score": 0, "creation_date": 1568815194, "post_id": 57988656, "comment_id": 102395682, "body": "Yeah, I was afraid of something like that. You might want to try <code>(&#39;document&#47;users&#47;&#39;+auth.uid)</code>, but at this point I&#39;m guessing. Given me note on the performance, I&#39;d recommend looking at an inverted index."}, {"owner": {"reputation": 11, "user_id": 6399296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86895b60358469ce254bc95bf7393486?s=128&d=identicon&r=PG&f=1", "display_name": "ncvo", "link": "https://stackoverflow.com/users/6399296/ncvo"}, "edited": false, "score": 0, "creation_date": 1568833925, "post_id": 57988656, "comment_id": 102404679, "body": "It gives the same result. Inverted index shall be simpler, but I&#39;m afraid it is less robust."}, {"owner": {"reputation": 11, "user_id": 6399296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86895b60358469ce254bc95bf7393486?s=128&d=identicon&r=PG&f=1", "display_name": "ncvo", "link": "https://stackoverflow.com/users/6399296/ncvo"}, "edited": false, "score": 0, "creation_date": 1568834683, "post_id": 57988656, "comment_id": 102404971, "body": "And inverted index is probably less safe. If any user can write into the list of accessible notes of this user, then a third party could modify access of this user to notes shared to him."}, {"owner": {"reputation": 11, "user_id": 6399296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86895b60358469ce254bc95bf7393486?s=128&d=identicon&r=PG&f=1", "display_name": "ncvo", "link": "https://stackoverflow.com/users/6399296/ncvo"}, "edited": false, "score": 0, "creation_date": 1568837298, "post_id": 57988656, "comment_id": 102405963, "body": "Frank, do you think it&#39;s easier to implement for Firestore? It&#39;d be an investment, but there still is some flexibility before the app is released"}, {"owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "reply_to_user": {"reputation": 11, "user_id": 6399296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86895b60358469ce254bc95bf7393486?s=128&d=identicon&r=PG&f=1", "display_name": "ncvo", "link": "https://stackoverflow.com/users/6399296/ncvo"}, "edited": false, "score": 0, "creation_date": 1568845756, "post_id": 57988656, "comment_id": 102408597, "body": "On Cloud Firestore you&#39;d use an array to store the <code>users</code> and then use <code>array-contains</code> to query for only users that have access."}], "tags": [], "owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "is_accepted": false, "score": 1, "last_activity_date": 1568796821, "last_edit_date": 1568796821, "creation_date": 1568796440, "answer_id": 57988656, "question_id": 57988439, "link": "https://stackoverflow.com/questions/57988439/security-rules-and-query-for-a-document-sharing-app/57988656#57988656", "title": "Security rules and query for a document sharing app", "body": "<p>Firebase security rules don't filter the data on your behalf. They merely enforce that all data access is authorized.</p>\n\n<p>This it the code for your query</p>\n\n<pre><code>self.reference = [[[FIRDatabase database] reference] child:@\"notes\"];\n\nNSString *query = [NSString stringWithFormat:@\"document/users/%@\", email.MD5String];\n\nself.query = [[self.reference queryOrderedByChild:query] queryEqualToValue:@(YES)];\n</code></pre>\n\n<p>In order to run this code, the user must have some form of read permission at <code>notes</code>. Since nobody has read permission on that node, the rules engine rejects the read.</p>\n\n<p>This is known as <a href=\"https://firebase.google.com/docs/database/security/securing-data#rules_are_not_filters\" rel=\"nofollow noreferrer\">rules are not filters</a> in the documentation, and in many other <a href=\"https://stackoverflow.com/search?q=%5Bfirebase%5D+rules+are+not+filters\">questions about the topic</a>.</p>\n\n<hr>\n\n<p>Note that you can nowadays use security rules to allow reads with certain queries, through <a href=\"https://firebase.google.com/docs/database/security/securing-data#query-based_rules\" rel=\"nofollow noreferrer\">query-based rules</a>. When using this, you build the relevant query in your code, and then use security rules to only allow data access with that specific query.</p>\n\n<p>In your case this would be a <code>.read</code> rule on <code>/notes</code> that matches the query you're building. It'd be something like this for your use-case</p>\n\n<pre><code>{\n  \"rules\": {\n    \"notes\" : {\n      \".read\": \"\n        query.orderByChild == 'document/users/'+auth.uid &amp;&amp;\n        query.equalTo == true\n      \"\n    }\n  }\n}\n</code></pre>\n\n<p>Note though that I'm not sure whether this condition actually matches your query. </p>\n\n<p>Even if it does, the lack of an index would make the security point moot (as without an index all filtering is done on the client). For more on this, see my answer here: <a href=\"https://stackoverflow.com/questions/40656589/firebase-query-if-child-of-child-contains-a-value\">Firebase query if child of child contains a value</a>. Such an inverted index would also allow you to implement security in your fan-out (write) logic, instead of in the read operation, ensuring much better read scalability.</p>\n"}], "owner": {"reputation": 11, "user_id": 6399296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86895b60358469ce254bc95bf7393486?s=128&d=identicon&r=PG&f=1", "display_name": "ncvo", "link": "https://stackoverflow.com/users/6399296/ncvo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568796821, "creation_date": 1568795762, "question_id": 57988439, "link": "https://stackoverflow.com/questions/57988439/security-rules-and-query-for-a-document-sharing-app", "title": "Security rules and query for a document sharing app", "body": "<p>I make a notes-style app with collaborative features and want to set-up safe security rules. \nThe problem is: my security rules do not work with my database query. \nThe Firebase security rules simulator shows correct results when I test access to notes for authenticated users.\nBut in the app I get the message \"Listener at /notes failed: permission_denied\".</p>\n\n<p>I've found some nice examples of security rules here\n<a href=\"https://stackoverflow.com/questions/37002270/firebase-security-rules-for-a-collaborative-app\">Firebase: Security rules for a collaborative app</a>\nand here\n<a href=\"https://gist.github.com/katowulf/4741111\" rel=\"nofollow noreferrer\">https://gist.github.com/katowulf/4741111</a>\nbut these are not that different from what I have.\nI suspect the problem could either be in the query or in the lack of indexing rules (\".indexOn\"). </p>\n\n<p>My query is:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>- (void)setupQuery {    \n\n    NSString *email = [FirebaseAuthorization shared].currentUserEmail;\n\n    self.reference = [[[FIRDatabase database] reference] child:@\"notes\"];\n\n    NSString *query = [NSString stringWithFormat:@\"document/users/%@\", email.MD5String];\n\n    self.query = [[self.reference queryOrderedByChild:query] queryEqualToValue:@(YES)];\n\n}\n</code></pre>\n\n<p>My security rules are:</p>\n\n<pre><code>{\n  \"rules\": {\n    \"notes\" : {\n\n      \"$note_id\" : {\n        \".read\": \"data.child('document/users/'+root.child('users/'+auth.uid+'/email_md5').val()).val() === true\",\n        \".write\": \"(data.child('document/users/'+root.child('users/'+auth.uid+'/email_md5').val()).val() === true) || (root.child('users/'+auth.uid+'/email').val() === root.child('users/'+newData.child('document/author').val()+'/email').val())\",\n\n        \".indexOn\": \"document/users\"\n        }      \n    },\n    \"users\" : {\n      \"$user_id\" : {\n        \".read\": \"auth.uid === $user_id\",\n        \".write\": \" ( auth.uid == newData.val() ) || ( auth.uid == $user_id )\"\n      }    \n    }\n    }\n  }\n</code></pre>\n\n<p>And my database structure is:</p>\n\n<pre><code>{\n\"notes\" : {\n  \"NOTE_ID_1\" : {\n    \"document\" : {\n      \"author\" : \"user_id_1\",\n      \"users\" : {\n        \"email_1_md5@email-com\" : true,\n        \"email_2_md5@email-com\" : true\n        }\n      }\n    }\n  \"NOTE_ID_2\" : {\n    \"document\" : {\n      \"author\" : \"user_id_2\",\n      \"users\" : {\n        \"email_3_md5@email-com\" : true,\n        \"email_4_md5@email-com\" : true,\n        }\n      }\n    }\n}\n\"users\" : {\n  \"iser_id_1\" : {\n    \"email\" : \"email_1@email.com\",\n    \"email_md5\" : \"email_2_md5@email-com\"\n    }\n  }\n}\n</code></pre>\n\n<p>I expect the query to work with tight security rules (each user has access to his notes only), but now it only works with loose security rules (each user has access to all notes).</p>\n"}, {"tags": ["objective-c", "cocoa", "macos-mojave", "core-foundation", "macos-catalina"], "comments": [{"owner": {"reputation": 50374, "user_id": 568283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/120ceee2dc40d539b9983265a2e0a2f8?s=128&d=identicon&r=PG", "display_name": "CRD", "link": "https://stackoverflow.com/users/568283/crd"}, "edited": false, "score": 2, "creation_date": 1568799513, "post_id": 57988045, "comment_id": 102386740, "body": "Have you run your app under the debugger? That should tell you exactly which line of <code>SetFrontMostWindow</code> is calling <code>insertObject:atIndex:</code> passing it <code>nil</code>, and from there you can work backwards to the source of the <code>nil</code> and determine what Catalina is doing differently to Mojave."}, {"owner": {"reputation": 2912, "user_id": 5484406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddfa0fdba8230acb59932d99fbf75bd1?s=128&d=identicon&r=PG", "display_name": "James Bucanek", "link": "https://stackoverflow.com/users/5484406/james-bucanek"}, "edited": false, "score": 0, "creation_date": 1568911087, "post_id": 57988045, "comment_id": 102434815, "body": "Note that this exception can also be thrown if the index is out of range."}], "owner": {"reputation": 33, "user_id": 9647694, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Emad mohd", "link": "https://stackoverflow.com/users/9647694/emad-mohd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 465, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1568794437, "creation_date": 1568794437, "question_id": 57988045, "link": "https://stackoverflow.com/questions/57988045/macos-app-works-fine-in-mojave-but-crashes-in-catalina-beta-version", "title": "macOS app works fine in Mojave but crashes in Catalina Beta version", "body": "<p>I was trying to test app that works fine on Mojave but keeps crashing on Catalina. I am providing the crash details below for any help.What could be the reason for it to not work on Catalina?\nI was trying to test app that works fine on Mojave but keeps crashing on Catalina. I am providing the crash details below for any help.What could be the reason for it to not work on Catalina?</p>\n\n<pre><code>Process:               SSWatcher [9887]\nPath:                  /Library/Application Support/safe/MacOS/SSWatcher\nIdentifier:            com.safe.sswatcher\nVersion:               1.0\nCode Type:             X86-64 (Native)\nParent Process:        ??? [1]\nResponsible:           SSWatcher [9887]\nUser ID:               501\n\nDate/Time:             2019-09-18 16:02:08.870 +0800\nOS Version:            Mac OS X 10.15 (19A558d)\nReport Version:        12\nAnonymous UUID:        75520E05-90C3-B100-E7E3-3AE1B6910181\n\nSleep/Wake UUID:       551DFEAF-E97E-42BB-9610-A525913A821B\n\nTime Awake Since Boot: 6900 seconds\nTime Since Wake:       4600 seconds\n\nSystem Integrity Protection: enabled\n\nCrashed Thread:        0  Dispatch queue: com.apple.main-thread\n\nException Type:        EXC_CRASH (SIGABRT)\nException Codes:       0x0000000000000000, 0x0000000000000000\nException Note:        EXC_CORPSE_NOTIFY\n\nApplication Specific Information:\n*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil'\nterminating with uncaught exception of type NSException\nabort() called\n\nApplication Specific Backtrace 1:\n0   CoreFoundation                      0x00007fff396d8033 __exceptionPreprocess + 250\n1   libobjc.A.dylib                     0x00007fff6f6e6bd4 objc_exception_throw + 48\n2   CoreFoundation                      0x00007fff3979adda _CFThrowFormattedException + 202\n3   CoreFoundation                      0x00007fff39798dc0 -[__NSArrayM insertObject:atIndex:].cold.2 + 0\n4   CoreFoundation                      0x00007fff39618811 -[__NSArrayM insertObject:atIndex:] + 1255\n5   SSWatcher                           0x000000010d1a5314 -[DNCurrentWindow SetFrontMostWindow] + 1540\n6   SSWatcher                           0x000000010d1a3e15 _Z29InstallSSWatcherEventHandlersv + 85\n7   SSWatcher                           0x000000010d1a9111 -[DNMainController awakeFromNib] + 545\n8   CoreFoundation                      0x00007fff3968d735 -[NSSet makeObjectsPerformSelector:] + 231\n9   AppKit                              0x00007fff36855e8c -[NSIBObjectData nibInstantiateWithOwner:options:topLevelObjects:] + 1485\n10  AppKit                              0x00007fff36853eaf loadNib + 401\n11  AppKit                              0x00007fff3685345e +[NSBundle(NSNibLoading) _loadNibFile:nameTable:options:withZone:ownerBundle:] + 693\n12  AppKit                              0x00007fff368530b4 -[NSBundle(NSNibLoading) loadNibNamed:owner:topLevelObjects:] + 201\n13  AppKit                              0x00007fff36852e8d +[NSBundle(NSNibLoading) loadNibNamed:owner:] + 446\n14  AppKit                              0x00007fff368490b6 NSApplicationMain + 505\n15  SSWatcher                           0x000000010d1a37e2 main + 34\n16  libdyld.dylib                       0x00007fff70a452a5 start + 1\n17  ???                                 0x0000000000000001 0x0 + 1\n\nThread 0 Crashed:: Dispatch queue: com.apple.main-thread\n0   libsystem_kernel.dylib          0x00007fff70b942aa __pthread_kill + 10\n1   libsystem_pthread.dylib         0x00007fff70c51707 pthread_kill + 384\n2   libsystem_c.dylib               0x00007fff70b1ca08 abort + 120\n3   libc++abi.dylib                 0x00007fff6dbe8bc8 abort_message + 231\n4   libc++abi.dylib                 0x00007fff6dbe8d7c demangling_terminate_handler() + 262\n5   libobjc.A.dylib                 0x00007fff6f6e8aaa _objc_terminate() + 96\n6   libc++abi.dylib                 0x00007fff6dbf5da7 std::__terminate(void (*)()) + 8\n7   libc++abi.dylib                 0x00007fff6dbf5b55 __cxxabiv1::failed_throw(__cxxabiv1::__cxa_exception*) + 27\n8   libc++abi.dylib                 0x00007fff6dbe734f __cxa_throw + 113\n9   libobjc.A.dylib                 0x00007fff6f6e6d02 objc_exception_throw + 350\n10  com.apple.CoreFoundation        0x00007fff3979adda _CFThrowFormattedException + 202\n11  com.apple.CoreFoundation        0x00007fff39798dc0 -[__NSArrayM insertObject:atIndex:].cold.1 + 35\n12  com.apple.CoreFoundation        0x00007fff39618811 -[__NSArrayM insertObject:atIndex:] + 1255\n13  com.esafe.sswatcher             0x000000010d1a5314 -[DNCurrentWindow SetFrontMostWindow] + 1540\n14  com.esafe.sswatcher             0x000000010d1a3e15 InstallSSWatcherEventHandlers() + 85\n15  com.esafe.sswatcher             0x000000010d1a9111 -[DNMainController awakeFromNib] + 545\n16  com.apple.CoreFoundation        0x00007fff3968d735 -[NSSet makeObjectsPerformSelector:] + 231\n17  com.apple.AppKit                0x00007fff36855e8c -[NSIBObjectData nibInstantiateWithOwner:options:topLevelObjects:] + 1485\n18  com.apple.AppKit                0x00007fff36853eaf loadNib + 401\n19  com.apple.AppKit                0x00007fff3685345e +[NSBundle(NSNibLoading) _loadNibFile:nameTable:options:withZone:ownerBundle:] + 693\n20  com.apple.AppKit                0x00007fff368530b4 -[NSBundle(NSNibLoading) loadNibNamed:owner:topLevelObjects:] + 201\n21  com.apple.AppKit                0x00007fff36852e8d +[NSBundle(NSNibLoading) loadNibNamed:owner:] + 446\n22  com.apple.AppKit                0x00007fff368490b6 NSApplicationMain + 505\n23  com.esafe.sswatcher             0x000000010d1a37e2 main + 34\n24  libdyld.dylib                   0x00007fff70a452a5 start + 1\n\nThread 1:\n0   libsystem_pthread.dylib         0x00007fff70c4e5b4 start_wqthread + 0\n\nThread 2:\n0   libsystem_pthread.dylib         0x00007fff70c4e5b4 start_wqthread + 0\n\nThread 3:\n0   libsystem_pthread.dylib         0x00007fff70c4e5b4 start_wqthread + 0\n\nThread 4:\n0   libsystem_pthread.dylib         0x00007fff70c4e5b4 start_wqthread + 0\n\nThread 0 crashed with X86 Thread State (64-bit):\n  rax: 0x0000000000000000  rbx: 0x0000000118023d40  rcx: 0x00007ffee2a5b8f8  rdx: 0x0000000000000000\n  rdi: 0x0000000000000307  rsi: 0x0000000000000006  rbp: 0x00007ffee2a5b920  rsp: 0x00007ffee2a5b8f8\n   r8: 0x00007ffee2a5b7c0   r9: 0x00007ffee2a5b990  r10: 0x0000000000000000  r11: 0x0000000000000246\n  r12: 0x0000000000000307  r13: 0x0000003000000008  r14: 0x0000000000000006  r15: 0x0000000000000016\n  rip: 0x00007fff70b942aa  rfl: 0x0000000000000246  cr2: 0x00007fff9d6a7628\n\nLogical CPU:     0\nError Code:      0x02000148\nTrap Number:     133\n\n\n</code></pre>\n\n<p>Hope the details are enough</p>\n"}, {"tags": ["ios", "objective-c", "singleton"], "comments": [{"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1568795190, "post_id": 57987993, "comment_id": 102384192, "body": "Show the declaration of <code>labelSize</code>. I am struggling to see why you need a singleton at all here."}, {"owner": {"reputation": 3388, "user_id": 2229783, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eXE2L.jpg?s=128&g=1", "display_name": "Roman Podymov", "link": "https://stackoverflow.com/users/2229783/roman-podymov"}, "edited": false, "score": 1, "creation_date": 1568795213, "post_id": 57987993, "comment_id": 102384203, "body": "Can you add more code? It is hard to understand how do you use <code>labelSize</code>."}, {"owner": {"reputation": 3388, "user_id": 2229783, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eXE2L.jpg?s=128&g=1", "display_name": "Roman Podymov", "link": "https://stackoverflow.com/users/2229783/roman-podymov"}, "edited": false, "score": 0, "creation_date": 1568965008, "post_id": 57987993, "comment_id": 102450257, "body": "If you call <code>createWithName:andLogo:</code> with different values you cannot put it in <code>init</code> in your singleton."}], "answers": [{"tags": [], "owner": {"reputation": 3388, "user_id": 2229783, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eXE2L.jpg?s=128&g=1", "display_name": "Roman Podymov", "link": "https://stackoverflow.com/users/2229783/roman-podymov"}, "is_accepted": false, "score": 0, "last_activity_date": 1568964785, "last_edit_date": 1568964785, "creation_date": 1568925144, "answer_id": 58018582, "question_id": 57987993, "link": "https://stackoverflow.com/questions/57987993/block-modifier-creates-unreadable-memory/58018582#58018582", "title": "__block modifier creates unreadable memory", "body": "<p>It is expected that <code>createWithName:andLogo:</code> is calling more than once in your app. I guess you call it with different arguments, that's why it should not be inside <code>dispatch_once(&amp;onceToken, ^{ });</code>. But you can optimise <code>XXUserWelcomeBanner</code>'s <code>init</code>:</p>\n\n<pre><code>- (instancetype)init {\n    self = [super init];\n    if (self) {\n        logoView = [[UIImageView alloc] init];\n        [self addSubview:logoView];\n        textLabel = [[UILabel alloc] init];\n        [self addSubview:textLabel];\n    }\n    return self;\n}\n</code></pre>\n\n<p>In <code>createWithName:andLogo:</code> you will have the following:</p>\n\n<pre><code>if (logo != nil) {\n    logoView.image = logo;\n} else {\n    NSString *imagePath = [XXUtility pathForResourceNamed:@\"Logo\" withExtension:@\"png\"];\n    UIImage *imageToAdd = [[UIImage alloc] initWithContentsOfFile:imagePath];\n    logoView.image = imageToAdd;\n}\n\nNSString * labelString = [NSString stringWithFormat:NSLocalizedStringWithDefaultValue(@\"welcom banner\", @\"userInterface\", [XXUtility bundleForStrings], @\"Dear %@, welcome into game\", @\"user welcome banner text\"), name];\nCGSize labelSize = [labelString sizeWithAttributes:@{NSFontAttributeName : textLabel.font}];\ntextLabel.text = labelString;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10350768, "user_type": "registered", "profile_image": "https://graph.facebook.com/2686176691408817/picture?type=large", "display_name": "\u795d\u671b\u8212", "link": "https://stackoverflow.com/users/10350768/%e7%a5%9d%e6%9c%9b%e8%88%92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568964785, "creation_date": 1568794227, "last_edit_date": 1568858638, "question_id": 57987993, "link": "https://stackoverflow.com/questions/57987993/block-modifier-creates-unreadable-memory", "title": "__block modifier creates unreadable memory", "body": "<p>Now Im developing a banner showing feature in iOS\nIt's a singleton which shows banner on the upper part of screen when user logs in.</p>\n\n<p>It's basically a shared view with a class method showWithName...</p>\n\n<pre><code>@interface XXUserWelcomeBanner ()\n{\n    UIImageView *logoView;\n    UILabel *textLabel;\n    CGFloat _width;\n}\n@end\n</code></pre>\n\n<p>When user calls,  it creates a UIImageView and a UILabel to add on self. And animates itself onto the screen.</p>\n\n<pre><code>+ (XXUserWelcomeBanner *)shared {\n    static dispatch_once_t onceToken;\n    static XXUserWelcomeBanner *userWelcomBanner;\n    dispatch_once(&amp;onceToken, ^{\n        userWelcomBanner = [[XXUserWelcomeBanner alloc] init];\n    });\n    return userWelcomBanner;\n}\n\n+ (void)showWithUserName:(NSString *)userID andLogo:(UIImage * _Nullable)logo {\n    dispatch_async(dispatch_get_main_queue(), ^{\n        [[self shared] createWithName:userID andLogo:logo];\n    });\n}\n\n</code></pre>\n\n<p>So there's this other bug I just found that causes this method to be called twice and <strong>on the second time it shows only the UIImageView</strong>. </p>\n\n<p>And I don't understand why that's happening. \nBecause the UIImageView and UILabel won't be created twice.</p>\n\n<p>Here's more code.</p>\n\n<pre><code>#pragma mark - private\n- (void)createWithName:(NSString *)name andLogo:(UIImage * _Nullable)logo {\n    self.opaque = NO;\n    self.alpha = 0.9;\n    self.backgroundColor = COLOR(0xfcfcfc);\n\n    //    if (@available(iOS 13.0, *)) {\n    //        self.backgroundColor = UIColor.secondarySystemBackgroundColor;\n    //    }\n    CGSize labelSize = CGSizeZero;\n\n\n    if (logoView == nil) {\n        if (logo != nil) {\n            logoView = [[UIImageView alloc] initWithImage:logo];\n\n            [self addSubview:logoView];\n        } else {\n            NSString *imagePath = [XXUtility pathForResourceNamed:@\"Logo\" withExtension:@\"png\"];\n            UIImage *imageToAdd = [[UIImage alloc] initWithContentsOfFile:imagePath];\n            logoView = [[UIImageView alloc] initWithImage:imageToAdd];\n            [self addSubview:logoView];\n        }\n    }\n\n    if (textLabel == nil) {\n        textLabel = [[UILabel alloc] init];\n        NSString * labelString = [NSString stringWithFormat:NSLocalizedStringWithDefaultValue(@\"welcom banner\", @\"userInterface\", [XXUtility bundleForStrings], @\"Dear %@, welcome into game\", @\"user welcome banner text\"), name];\n        labelSize = [labelString sizeWithAttributes:@{NSFontAttributeName : textLabel.font}];\n        textLabel.text = labelString;\n        [self addSubview:textLabel];\n    }\n    NSLog(@\"XXUserWelcomeBanner Label size is %f x %f\", labelSize.height, labelSize.width);\n    [self bannerSizeWithLabelSize:labelSize];\n    CGFloat bannerHeight = self.frame.size.height;\n    CGFloat bannerWidth = self.frame.size.width;\n\n    CGFloat logoHeight = bannerHeight * 0.45;\n    CGFloat logoWidth = logoHeight;\n    CGFloat logoXPos = (bannerWidth - logoWidth - labelSize.width) / 2;\n    CGFloat logoYPos = (bannerHeight - logoHeight) / 2;\n    CGFloat labelHeight = labelSize.height;\n    CGFloat labelWidth = labelSize.width;\n    CGFloat labelXPos = logoXPos + logoWidth + 5;\n    CGFloat labelYPos = (bannerHeight - labelHeight) / 2;\n\n    logoView.frame = CGRectMake(logoXPos, logoYPos, logoWidth, logoHeight);\n    textLabel.frame = CGRectMake(labelXPos, labelYPos, labelWidth, labelHeight);\n\n    [self bannerShow];\n}\n\n- (void)bannerSizeWithLabelSize:(CGSize)lSize {\n    _width = 40 + lSize.width + 5;\n    CGFloat height = 40;\n    CGFloat xPosition = ScreenWidth * 1/2 - _width * 1/2;\n    CGFloat yPosition = - height;\n\n    self.frame = CGRectMake(xPosition, yPosition, _width, height);\n}\n\n- (void)bannerShow {\n    UIViewController *vc;\n    if ([TOP_VIEWCONTROLLER respondsToSelector:@selector(topViewController)]) {\n        vc = [TOP_VIEWCONTROLLER topViewController];\n    } else {\n        vc = TOP_VIEWCONTROLLER;\n    }\n\n    [vc.view addSubview:self];\n\n    [UIView animateWithDuration:0.6 delay:0.2 options:UIViewAnimationOptionCurveEaseOut animations:^{\n\n        CGFloat height = 40;\n        CGFloat xPos = ScreenWidth * 1/2 - self-&gt;_width * 1/2;\n        CGFloat yPos = height * 1/3 + KiPhoneXSafeAreaDValue;\n\n        self.frame = CGRectMake(xPos, yPos, self-&gt;_width, height);\n    } completion:^(BOOL finished) {\n        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1.5 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{\n            [UIView animateWithDuration:0.6 delay:0.2 options:UIViewAnimationOptionCurveEaseIn animations:^{\n\n                CGFloat height = 40;\n                CGFloat xPosition = ScreenWidth * 1/2 - self-&gt;_width * 1/2;\n                CGFloat yPosition = - height;\n\n                self.frame = CGRectMake(xPosition, yPosition, self-&gt;_width, height);\n            } completion:^(BOOL finished) {\n                [self bannerDestroy];\n                self.alpha = 0;\n            }];\n        });\n    }];\n}\n\n\n- (void)bannerDestroy {\n    [logoView removeFromSuperview];\n    [textLabel removeFromSuperview];\n    logoView = nil;\n    textLabel = nil;\n    [self removeFromSuperview];\n}\n\n- (void)dealloc\n{\n    //\n    NSLog(@\"uiview dealloc\");\n}\n\n/*\n // Only override drawRect: if you perform custom drawing.\n // An empty implementation adversely affects performance during animation.\n - (void)drawRect:(CGRect)rect {\n // Drawing code\n }\n */\n\n@end\n\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ios", "objective-c", "phasset"], "comments": [{"owner": {"reputation": 314, "user_id": 3160979, "user_type": "registered", "profile_image": "https://graph.facebook.com/1026478034091317/picture?type=large", "display_name": "Deryck Lucian", "link": "https://stackoverflow.com/users/3160979/deryck-lucian"}, "edited": false, "score": 0, "creation_date": 1568828006, "post_id": 57987337, "comment_id": 102402264, "body": "Why are you checking if modified? Are you modifying the image after you back it up? Why don&#39;t you have a date when the last backup has been made, and if any item has been created after that date, you back it up?"}, {"owner": {"reputation": 13, "user_id": 6266131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8c488249022aa860e0c24810ef877e9?s=128&d=identicon&r=PG&f=1", "display_name": "Marius", "link": "https://stackoverflow.com/users/6266131/marius"}, "reply_to_user": {"reputation": 314, "user_id": 3160979, "user_type": "registered", "profile_image": "https://graph.facebook.com/1026478034091317/picture?type=large", "display_name": "Deryck Lucian", "link": "https://stackoverflow.com/users/3160979/deryck-lucian"}, "edited": false, "score": 0, "creation_date": 1568957391, "post_id": 57987337, "comment_id": 102447277, "body": "@DeryckLucian that&#39;s exactly why i&#39;m checking for modification date - i take some photos, back them up and later i retouch them and back them up again. So creation date is not a solution to this situation."}, {"owner": {"reputation": 591, "user_id": 1707344, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100004804560306/picture?type=large", "display_name": "Mohd Haider", "link": "https://stackoverflow.com/users/1707344/mohd-haider"}, "edited": false, "score": 0, "creation_date": 1599767127, "post_id": 57987337, "comment_id": 112884123, "body": "@Marius, do you get any solution for this? I am also facing same problem. Modification date get changed every time I fetch PHAsset."}], "answers": [{"tags": [], "owner": {"reputation": 591, "user_id": 1707344, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100004804560306/picture?type=large", "display_name": "Mohd Haider", "link": "https://stackoverflow.com/users/1707344/mohd-haider"}, "is_accepted": false, "score": 0, "last_activity_date": 1599767923, "creation_date": 1599767923, "answer_id": 63836858, "question_id": 57987337, "link": "https://stackoverflow.com/questions/57987337/getting-phasset-modification-date/63836858#63836858", "title": "Getting PHAsset modification date", "body": "<p>Maybe it can solve the problem.</p>\n<pre><code>let adjustmentResources = PHAssetResource.assetResources(for: asset).filter { $0.type == .adjustmentData }\n            \nprint(&quot;adjustmentResources = \\(adjustmentResources)&quot;)\n\nif adjustmentResources.count &gt; 0 {\n\n\n}\n</code></pre>\n<p>if adjustmentResources.count is greater then 0. Then it is modified otherwise not.</p>\n"}], "owner": {"reputation": 13, "user_id": 6266131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8c488249022aa860e0c24810ef877e9?s=128&d=identicon&r=PG&f=1", "display_name": "Marius", "link": "https://stackoverflow.com/users/6266131/marius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1599767923, "creation_date": 1568791905, "question_id": 57987337, "link": "https://stackoverflow.com/questions/57987337/getting-phasset-modification-date", "title": "Getting PHAsset modification date", "body": "<p>I'm writing a camera roll backup tool and i'm using asset modification times as a check for if the file should be backed up or not. Here's how i'm fetching things:</p>\n\n<pre><code>PHFetchResult *result = [PHAsset fetchAssetsWithMediaType:PHAssetMediaTypeImage options:nil];\n\nfor (PHAsset *asset in result)\n{\n    // get modification date with [asset modificationDate] timeIntervalSince1970]\n}\n</code></pre>\n\n<p>It works kinda OK, but here's the <strong>problem</strong>: if an already backed up image is opened in photos app just to view it - modification date changes. There is no editing involved or anything like that - just a mere fact of viewing an image sets the date to something else. Why is it doing this and is there a way around it?</p>\n"}, {"tags": ["ios", "objective-c", "flutter", "native"], "answers": [{"tags": [], "owner": {"reputation": 343, "user_id": 4767727, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q--9yRbZKcw/AAAAAAAAAAI/AAAAAAAAY9Q/wiujMd7Dn94/photo.jpg?sz=128", "display_name": "kimusan", "link": "https://stackoverflow.com/users/4767727/kimusan"}, "is_accepted": false, "score": 0, "last_activity_date": 1569242901, "creation_date": 1569242901, "answer_id": 58062819, "question_id": 57986994, "link": "https://stackoverflow.com/questions/57986994/loading-native-c-library-from-objective-c-in-flutter-plugin/58062819#58062819", "title": "Loading native C library from Objective-C in Flutter plugin", "body": "<p>Seems like I can use dlopen() on the library and then dlsym() every single function to get their symbol into the app at runtime. Seems pretty dump but I guess it could work (when I at some point have convinced the buildsystem to include the lib into the actual package it builds. </p>\n"}], "owner": {"reputation": 343, "user_id": 4767727, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-q--9yRbZKcw/AAAAAAAAAAI/AAAAAAAAY9Q/wiujMd7Dn94/photo.jpg?sz=128", "display_name": "kimusan", "link": "https://stackoverflow.com/users/4767727/kimusan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1569242901, "creation_date": 1568790670, "last_edit_date": 1568794332, "question_id": 57986994, "link": "https://stackoverflow.com/questions/57986994/loading-native-c-library-from-objective-c-in-flutter-plugin", "title": "Loading native C library from Objective-C in Flutter plugin", "body": "<p>I have a native C library <code>(.so)</code> build in versions for android and iOS. I want them to be used in a flutter app I am building. \nFor android I use System.loadLibrary() in Java to load the file (wrapped in <code>JNI</code>) and it is included via the <code>Gradle</code> build <code>system/CMake</code>. \nBut how do I get the same for iOS in objective C ?</p>\n"}, {"tags": ["ios", "objective-c", "firebase", "react-native", "react-native-firebase"], "comments": [{"owner": {"reputation": 727, "user_id": 10197060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DyRgX.jpg?s=128&g=1", "display_name": "DevAS", "link": "https://stackoverflow.com/users/10197060/devas"}, "edited": false, "score": 0, "creation_date": 1572906459, "post_id": 57986052, "comment_id": 103699755, "body": "Hey @Sport are you solve it?"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 2159200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f5c9d82c2ccb6fa6070476324d027ed?s=128&d=identicon&r=PG", "display_name": "user2159200", "link": "https://stackoverflow.com/users/2159200/user2159200"}, "is_accepted": false, "score": 0, "last_activity_date": 1575843671, "creation_date": 1575843671, "answer_id": 59240430, "question_id": 57986052, "link": "https://stackoverflow.com/questions/57986052/signinwithphonenumber-is-not-working-in-react-native/59240430#59240430", "title": "signInWithPhoneNumber() is not working in react-native", "body": "<p>It looks like the method where you are calling await is not async</p>\n"}], "owner": {"reputation": 6882, "user_id": 2677179, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/AiAN8.png?s=128&g=1", "display_name": "Sport", "link": "https://stackoverflow.com/users/2677179/sport"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 593, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575843671, "creation_date": 1568786889, "last_edit_date": 1568787756, "question_id": 57986052, "link": "https://stackoverflow.com/questions/57986052/signinwithphonenumber-is-not-working-in-react-native", "title": "signInWithPhoneNumber() is not working in react-native", "body": "<p>hi I am geeting this error in </p>\n\n<pre><code>firebase.auth().signInWithPhoneNumber(phoneNumber)\n</code></pre>\n\n<blockquote>\n  <p>Error Domain=FIRAuthErrorDomain Code=17057 \"User interaction is still ongoing, another view cannot be presented.\" UserInfo={NSLocalizedDescription=User interaction is still ongoing, another view cannot be presented., FIRAuthErrorUserInfoNameKey=ERROR_WEB_CONTEXT_ALREADY_PRESENTED}</p>\n</blockquote>\n\n<p>in RNFirebaseAuth.m.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Wfc9p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wfc9p.png\" alt=\"enter image description here\"></a></p>\n\n<p>here is error </p>\n\n<p><a href=\"https://i.stack.imgur.com/hhFot.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hhFot.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>const confirmResult = await firebase.auth().signInWithPhoneNumber(phoneNumber);\n      if (confirmResult) {\n        this.setState({\n          confirmResult,\n          message: 'Code has been sent!',\n          step: 2,\n        }, this.goToEnterOtpScreen());\n      }\n</code></pre>\n\n<p>Illegal callback invocation from native module. This callback type only permits a single invocation from native code.</p>\n\n<pre><code>\"react-native-firebase\": \"^5.5.4\",\n\n\n\n pod 'Firebase/Core', '~&gt; 6.3.0'\n\n  pod 'Firebase/Auth', '~&gt; 6.3.0'\n  pod 'Firebase/Database', '~&gt; 6.3.0'\n  pod 'Firebase/Functions', '~&gt; 6.3.0'\n  pod 'Firebase/DynamicLinks', '~&gt; 6.3.0'\n  pod 'Firebase/Firestore', '~&gt; 6.3.0'\n  pod 'Firebase/Messaging', '~&gt; 6.3.0'\n  pod 'Firebase/RemoteConfig', '~&gt; 6.3.0'\n  pod 'Firebase/Storage', '~&gt; 6.3.0'\n  pod 'Firebase/Performance', '~&gt; 6.3.0'\n</code></pre>\n"}, {"tags": ["ios", "objective-c", "firebase", "firebase-authentication"], "owner": {"reputation": 6882, "user_id": 2677179, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/AiAN8.png?s=128&g=1", "display_name": "Sport", "link": "https://stackoverflow.com/users/2677179/sport"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "closed_date": 1568787866, "answer_count": 0, "score": 1, "last_activity_date": 1573918423, "creation_date": 1568785495, "last_edit_date": 1573918423, "question_id": 57985815, "link": "https://stackoverflow.com/questions/57985815/firphoneauthprovider-providerwithauth-not-working-ios", "closed_reason": "Duplicate", "title": "FIRPhoneAuthProvider providerWithAuth not working ios", "body": "<p>I am using Firebase in ios project , there I used \nfirebase  authentication with phone number . <code>FIRPhoneAuthProvider providerWithAuth</code> I am using </p>\n\n<p>but getting error </p>\n\n<blockquote>\n  <p><strong>FIRAuthErrorUserInfoNameKey=ERROR_WEB_CONTEXT_ALREADY_PRESENTED, error</strong></p>\n</blockquote>\n\n<pre><code>[[FIRPhoneAuthProvider providerWithAuth:[FIRAuth authWithApp:firApp]] verifyPhoneNumber:phoneNumber UIDelegate:nil completion:^(\n      NSString *_Nullable verificationID,\n      NSError *_Nullable error)\n {\n    if (error) {\n     // getting error here \n    } else {\n      NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];\n      [defaults setObject:verificationID forKey:@\"authVerificationID\"];\n\n    }\n  }];\n</code></pre>\n\n<p>error is </p>\n\n<pre><code>Error Domain=FIRAuthErrorDomain Code=17057 \"User interaction is still ongoing, another view cannot be presented.\" UserInfo={NSLocalizedDescription=User interaction is still ongoing, another view cannot be presented., FIRAuthErrorUserInfoNameKey=ERROR_WEB_CONTEXT_ALREADY_PRESENTED}\n\n\n\n\n pod 'Firebase/Auth', '~&gt; 6.3.0'\n</code></pre>\n\n<p>other question on react native , its this on native ios .</p>\n"}, {"tags": ["objective-c", "pid"], "answers": [{"comments": [{"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1568902853, "post_id": 57982615, "comment_id": 102430438, "body": "please see my edit to the OP. I am trying to do some sanity check prior to opening the bundle."}, {"owner": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "reply_to_user": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1568907066, "post_id": 57982615, "comment_id": 102432916, "body": "That seems like a completely separate question. So, open a new one."}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1568909160, "post_id": 57982615, "comment_id": 102433932, "body": "OK. Will open a new one. Thx."}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1568910056, "post_id": 57982615, "comment_id": 102434307, "body": "New question has been created. Thx."}], "tags": [], "owner": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "is_accepted": false, "score": 0, "last_activity_date": 1568784557, "last_edit_date": 1568784557, "creation_date": 1568757802, "answer_id": 57982615, "question_id": 57980610, "link": "https://stackoverflow.com/questions/57980610/get-nsrunnunigapplication-from-lsopenfromurlspec/57982615#57982615", "title": "Get NSRunnunigApplication from LSOpenFromURLSpec", "body": "<p>Do you mean you want the PID of the application process that was launched, after you launch it?</p>\n\n<p>If you can switch to either <code>-[NSWorkspace openApplicationAtURL:configuration:completionHandler:]</code> or <code>-[NSWorkspace openURL:configuration:completionHandler:]</code>, they directly provide a reference to the <code>NSRunningApplication</code> to your completion handler.</p>\n\n<p>Those methods were introduced with the 10.15 SDK. If you need to target earlier versions of macOS, you can use either <code>-[NSWorkspace launchApplicationAtURL:options:configuration:error:]</code> or <code>-[NSWorkspace openURL:options:configuration:error:]</code>. They directly return a reference to the <code>NSRunningApplication</code>.</p>\n"}], "owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568902791, "creation_date": 1568747277, "last_edit_date": 1568902791, "question_id": 57980610, "link": "https://stackoverflow.com/questions/57980610/get-nsrunnunigapplication-from-lsopenfromurlspec", "title": "Get NSRunnunigApplication from LSOpenFromURLSpec", "body": "<p>ALL,</p>\n\n<p>In order to get the pid of the process I need to have an object of type NSRunningApplication.</p>\n\n<p>I'm launching my application bundle with LSOpenFromURLSpec call.</p>\n\n<p>Is there a way to get an object of NSRunningApplication if the launch is successful?</p>\n\n<p>TIA!!</p>\n\n<p>[EDIT]</p>\n\n<p>So in order to see if I have a bundle I should be writing something like this:</p>\n\n<pre><code>NSURL *url = [NSURL fileURLWithPath:myPath isDirectory:YES];\nNSBundle *bundle = [NSBundle bundleWithURL:url];\nif( bundle == nil )\n{\n    printf( \"Not a bundle!!\";\n    return -1;\n}\n// open the bundle\n</code></pre>\n\n<p>Is this correct? Or there is a better way?</p>\n\n<p>[/EDIT]</p>\n"}, {"tags": ["ios", "objective-c", "swift", "plist"], "comments": [{"owner": {"reputation": 17713, "user_id": 1801544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CcSB.jpg?s=128&g=1", "display_name": "Larme", "link": "https://stackoverflow.com/users/1801544/larme"}, "edited": false, "score": 0, "creation_date": 1568735077, "post_id": 57977696, "comment_id": 102365169, "body": "Which line exactly is causing the error?"}, {"owner": {"reputation": 3, "user_id": 4381375, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000436400204/picture?type=large", "display_name": "Markus", "link": "https://stackoverflow.com/users/4381375/markus"}, "reply_to_user": {"reputation": 17713, "user_id": 1801544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CcSB.jpg?s=128&g=1", "display_name": "Larme", "link": "https://stackoverflow.com/users/1801544/larme"}, "edited": false, "score": 0, "creation_date": 1568735836, "post_id": 57977696, "comment_id": 102365549, "body": "I updated the Post"}], "answers": [{"tags": [], "owner": {"reputation": 229649, "user_id": 5044042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vjUNl.jpg?s=128&g=1", "display_name": "vadian", "link": "https://stackoverflow.com/users/5044042/vadian"}, "is_accepted": true, "score": 0, "last_activity_date": 1568736959, "last_edit_date": 1568736959, "creation_date": 1568735943, "answer_id": 57978019, "question_id": 57977696, "link": "https://stackoverflow.com/questions/57977696/error-cannot-subscript-a-value-of-type-dictionarynsobject-anyobject-with-an/57978019#57978019", "title": "Error Cannot subscript a value of type &#39;Dictionary&lt;NSObject, AnyObject&gt;&#39; with an index of type &#39;String&#39;", "body": "<p>Please don't try to translate Objective-C code literally to Swift. There are many, many bad practices from the Swift perspective.</p>\n\n<p>Basically don't use <code>NS...</code> classes in Swift if there is a native counterpart.</p>\n\n<p>The error occurs because the result of a bridge cast from <code>NSDictionary</code> to <code>Dictionary</code> (without specifying the Swift types) is <code>Dictionary&lt;NSObject, AnyObject&gt;</code> which is not compatible with value type <code>String</code></p>\n\n<p>This is a real Swift version:</p>\n\n<pre><code>let eins = \"Test\"\nlet zwei = \"Text\"\nlet drei = \"Test\"\nlet vier = \"Text\"\nlet myStrings = [eins, zwei, drei, vier]\nlet switchState = myStrings.joined(separator: \" | | \")\nlet fileManager = FileManager.default\ndo {\n    let applicationSupportDirectory = try fileManager.url(for: .applicationSupportDirectory, in: .userDomainMask, appropriateFor: nil, create: true)\n    let storeURL = applicationSupportDirectory.appendingPathComponent(\"store.plist\")\n\n    let data = try Data(contentsOf: storeURL)\n    print(\"Das bekommt viewdid: \\(switchState)\")\n    if let savedDictionary = try PropertyListSerialization.propertyList(from: data, format: nil) as? [String:Any],\n        let savedState = savedDictionary[switchState] as? Bool {\n        bluetoothSwitch.isOn = savedState\n    } else {\n        bluetoothSwitch.isOn = false\n        print(\"nein\")\n    }\n} catch { print(error) }\n</code></pre>\n\n<p>The <code>fileExists(atPath</code> check is redundant so I left it out.</p>\n"}], "owner": {"reputation": 3, "user_id": 4381375, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000436400204/picture?type=large", "display_name": "Markus", "link": "https://stackoverflow.com/users/4381375/markus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 57978019, "answer_count": 1, "score": 0, "last_activity_date": 1568736996, "creation_date": 1568734698, "last_edit_date": 1568736996, "question_id": 57977696, "link": "https://stackoverflow.com/questions/57977696/error-cannot-subscript-a-value-of-type-dictionarynsobject-anyobject-with-an", "title": "Error Cannot subscript a value of type &#39;Dictionary&lt;NSObject, AnyObject&gt;&#39; with an index of type &#39;String&#39;", "body": "<p>Can someone help me? I am just reprogramming my small project from Objective-C to Swift and get the following error:</p>\n\n<blockquote>\n  <p>Cannot subscript a value of type 'Dictionary' with an index of type 'String'</p>\n</blockquote>\n\n<p><code>eins</code>, <code>zwei</code>, <code>drei</code>,and  <code>vier</code> are strings that get their data from another view controller.</p>\n\n<p>Objective-C Code:</p>\n\n<pre><code>@property (strong, nonatomic) IBOutlet UISwitch *bluetoothSwitch;\n\n- (void)viewDidLoad\n{\n    [super viewDidLoad];\n\n    NSString *SwitchState;\n    NSArray *myStrings = [[NSArray alloc] initWithObjects:eins,zwei,drei, vier, nil];\n    SwitchState = [myStrings componentsJoinedByString:mad:\" | | \"];\n    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSApplicationSupportDirectory, NSUserDomainMask, YES);\n    NSString *documentsDirectory = [paths objectAtIndex:0];\n    NSString *path = [documentsDirectory stringByAppendingPathComponent:mad:\"store.plist\"];\n\n    NSFileManager *fileManager = [NSFileManager defaultManager];\n\n    if (![fileManager fileExistsAtPath: path]) {\n        path = [documentsDirectory stringByAppendingPathComponent: [NSString stringWithFormat:mad:\"store.plist\"] ];\n    }\n\n    NSMutableDictionary *savedValue = [[NSMutableDictionary alloc] initWithContentsOfFile: path];\n    if ([[savedValue objectForKey:SwitchState] boolValue]) {\n        self.bluetoothSwitch.on = [[savedValue objectForKey:SwitchState] boolValue];\n    } else {\n    }\n}\n</code></pre>\n\n<p>My Swift Code:</p>\n\n<pre><code>var eins = \"Test\"\nvar zwei = \"Text\"\nvar drei = \"Test\"\nvar vier = \"Text\"\nvar SwitchState = \"\"\nlet myStrings = [eins, zwei, drei, vier]\nSwitchState = myStrings.joined(separator: \" | | \")\nlet paths = NSSearchPathForDirectoriesInDomains(.applicationSupportDirectory, .userDomainMask, true)\nlet documentsDirectory = paths[0]\nvar path = URL(fileURLWithPath: documentsDirectory).appendingPathComponent(\"store.plist\").absoluteString\n\nlet fileManager = FileManager.default\n\nif !fileManager.fileExists(atPath: path) {\n    path = URL(fileURLWithPath: documentsDirectory).appendingPathComponent(\"store.plist\").absoluteString\n}\n\nvar savedValue = NSDictionary(contentsOfFile: path) as Dictionary?\nprint(\"Das bekommt viewdid: \\(SwitchState)\")\nif (savedValue?[SwitchState] as? NSNumber)?.boolValue ?? false {\n    bluetoothSwitch.isOn = (savedValue?[SwitchState] as? NSNumber)?.boolValue ?? false\n} else {\n    print(\"nein\")\n}\n</code></pre>\n\n<p>This two Lines \"produce\" the Errors</p>\n\n<pre><code>if (savedValue?[SwitchState] as? NSNumber)?.boolValue ?? false {\n    bluetoothSwitch.isOn = (savedValue?[SwitchState] as? NSNumber)?.boolValue ?? false\n</code></pre>\n"}, {"tags": ["ios", "objective-c", "nsdate"], "comments": [{"owner": {"reputation": 3228, "user_id": 3173478, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/9O6gr.jpg?s=128&g=1", "display_name": "Gagan_iOS", "link": "https://stackoverflow.com/users/3173478/gagan-ios"}, "edited": false, "score": 0, "creation_date": 1568733504, "post_id": 57977201, "comment_id": 102364337, "body": "just tested, it is working as expected. Can u please paste input date which u r passing in above function,"}, {"owner": {"reputation": 4369, "user_id": 999770, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fd03785e3d628d867220cfe3e130f41e?s=128&d=identicon&r=PG", "display_name": "Ignacio Oron&#225;", "link": "https://stackoverflow.com/users/999770/ignacio-oron%c3%a1"}, "reply_to_user": {"reputation": 3228, "user_id": 3173478, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/9O6gr.jpg?s=128&g=1", "display_name": "Gagan_iOS", "link": "https://stackoverflow.com/users/3173478/gagan-ios"}, "edited": false, "score": 0, "creation_date": 1568733602, "post_id": 57977201, "comment_id": 102364385, "body": "Gagan_iOS it&#39;s the example I used in the exaplanation: &#39;2001-10-03T00:00:00.000Z&#39;"}, {"owner": {"reputation": 3228, "user_id": 3173478, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/9O6gr.jpg?s=128&g=1", "display_name": "Gagan_iOS", "link": "https://stackoverflow.com/users/3173478/gagan-ios"}, "edited": false, "score": 0, "creation_date": 1568733824, "post_id": 57977201, "comment_id": 102364505, "body": "working as expected. Tested on Xcode 10.3 and works fine. plz Just recheck ur code."}, {"owner": {"reputation": 4369, "user_id": 999770, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fd03785e3d628d867220cfe3e130f41e?s=128&d=identicon&r=PG", "display_name": "Ignacio Oron&#225;", "link": "https://stackoverflow.com/users/999770/ignacio-oron%c3%a1"}, "reply_to_user": {"reputation": 3228, "user_id": 3173478, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/9O6gr.jpg?s=128&g=1", "display_name": "Gagan_iOS", "link": "https://stackoverflow.com/users/3173478/gagan-ios"}, "edited": false, "score": 0, "creation_date": 1568735350, "post_id": 57977201, "comment_id": 102365304, "body": "@Gagan_iOS I&#39;ve added the actual, still failing, not sure what is going on.."}, {"owner": {"reputation": 249319, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "edited": false, "score": 1, "creation_date": 1568735670, "post_id": 57977201, "comment_id": 102365482, "body": "I agree that this looks like a duplicate of the linked question from Cy-4AH. Can you check? If so, we can close this and point over there. (Your not setting a timezone on the formatter.)"}, {"owner": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 1, "creation_date": 1568737304, "post_id": 57977201, "comment_id": 102366199, "body": "It was still 2nd October in 2001 in your&#39;s location when it was Midnight 3rd October in Greenwich. <code>NSDateFormatter</code> works correctly."}, {"owner": {"reputation": 4369, "user_id": 999770, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fd03785e3d628d867220cfe3e130f41e?s=128&d=identicon&r=PG", "display_name": "Ignacio Oron&#225;", "link": "https://stackoverflow.com/users/999770/ignacio-oron%c3%a1"}, "reply_to_user": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 0, "creation_date": 1568757669, "post_id": 57977201, "comment_id": 102374239, "body": "you are right @Cy-4AH  Write the answer if you want and I&#39;ll mark it as correct. The original string was first minute of that day UTC, and I am running this from NYC which is -4 GMT, hence.. one day less."}], "owner": {"reputation": 4369, "user_id": 999770, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fd03785e3d628d867220cfe3e130f41e?s=128&d=identicon&r=PG", "display_name": "Ignacio Oron&#225;", "link": "https://stackoverflow.com/users/999770/ignacio-oron%c3%a1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "closed_date": 1568737080, "answer_count": 0, "score": 0, "last_activity_date": 1568735318, "creation_date": 1568732845, "last_edit_date": 1568735318, "question_id": 57977201, "link": "https://stackoverflow.com/questions/57977201/ios-date-conversion-from-string-bug", "closed_reason": "Duplicate", "title": "iOS Date conversion from string bug", "body": "<p>I have the following code:</p>\n\n<pre><code>-(NSString*) convertDateToString:(NSString*)dateString\n{    \n    NSDateFormatter *inputFormatter = [[NSDateFormatter alloc] init];\n    [inputFormatter setDateFormat:@\"yyyy-MM-dd'T'HH:mm:ss.SSSZ\"];\n    NSLocale *posix = [[NSLocale alloc] initWithLocaleIdentifier:@\"en_US_POSIX\"];\n    [inputFormatter setLocale:posix];\n    NSDate *date = [inputFormatter dateFromString:dateString];\n\n    NSDateFormatter *outFormatter = [[NSDateFormatter alloc] init];\n    [outFormatter setDateFormat:@\"MM/dd\"];\n    NSString *rv = [outFormatter stringFromDate:date];\n    return rv;\n}\n</code></pre>\n\n<p>Which I use to change the format of a Date String, so I basically input:</p>\n\n<p><strong>Input:</strong> 2001-10-03T00:00:00.000Z</p>\n\n<p><strong>Output:</strong> 10/02 (WRONG!) should be: <em>10/3</em></p>\n\n<p>So, the problem is that instead of getting 10/3 (which would be the correct result) I am getting 1 less (10/2). I am looking at the snippet but can't figure out where the error is.</p>\n\n<p>This is the actual exact case:</p>\n\n<p><a href=\"https://i.stack.imgur.com/EKsQx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EKsQx.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ios", "objective-c"], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 6720843, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/cECUa.jpg?s=128&g=1", "display_name": "Md. Monir-Uz-Zaman", "link": "https://stackoverflow.com/users/6720843/md-monir-uz-zaman"}, "edited": false, "score": 0, "creation_date": 1568791386, "post_id": 57975626, "comment_id": 102382224, "body": "I am greatful for your response. It works but I am facing another problem now. I am trying to update self.speedRate like &quot;self.speedRate[position] = rate;&quot; . But getting an error like &quot; Sending &#39;float&#39; to parameter of incompatible type &#39;id _Nonnull&#39; &quot; . Can you help me about this?"}, {"owner": {"reputation": 14702, "user_id": 1918561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uRU2O.jpg?s=128&g=1", "display_name": "Gereon", "link": "https://stackoverflow.com/users/1918561/gereon"}, "reply_to_user": {"reputation": 169, "user_id": 6720843, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/cECUa.jpg?s=128&g=1", "display_name": "Md. Monir-Uz-Zaman", "link": "https://stackoverflow.com/users/6720843/md-monir-uz-zaman"}, "edited": false, "score": 0, "creation_date": 1568818304, "post_id": 57975626, "comment_id": 102397659, "body": "Please ask this as a separate question"}, {"owner": {"reputation": 9275, "user_id": 1077601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8156916199f65a68c31dac5b8ad4151c?s=128&d=identicon&r=PG", "display_name": "Darren", "link": "https://stackoverflow.com/users/1077601/darren"}, "edited": false, "score": 0, "creation_date": 1568838246, "post_id": 57975626, "comment_id": 102406325, "body": "If rate is a float, it is not an object. An NSArray can only contain objects. Try <code>@(rate)</code> which will make it an NSNumber object."}], "tags": [], "owner": {"reputation": 14702, "user_id": 1918561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uRU2O.jpg?s=128&g=1", "display_name": "Gereon", "link": "https://stackoverflow.com/users/1918561/gereon"}, "is_accepted": true, "score": 1, "last_activity_date": 1568727833, "creation_date": 1568727833, "answer_id": 57975626, "question_id": 57975470, "link": "https://stackoverflow.com/questions/57975470/how-to-create-a-variable-sized-float-type-array-in-objective-c/57975626#57975626", "title": "How to create a variable sized float type array in objective c?", "body": "<p>Your code never actually allocates the array. Add </p>\n\n<pre><code>self.speedRate = [[NSMutableArray alloc] init];\n</code></pre>\n\n<p>before the loop.</p>\n"}], "owner": {"reputation": 169, "user_id": 6720843, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/cECUa.jpg?s=128&g=1", "display_name": "Md. Monir-Uz-Zaman", "link": "https://stackoverflow.com/users/6720843/md-monir-uz-zaman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 57975626, "answer_count": 1, "score": 0, "last_activity_date": 1568727833, "creation_date": 1568727354, "question_id": 57975470, "link": "https://stackoverflow.com/questions/57975470/how-to-create-a-variable-sized-float-type-array-in-objective-c", "title": "How to create a variable sized float type array in objective c?", "body": "<p>I need a float type array; don't know the size of array initially. When I will get the value of size, I want to add some float values in it by a for loop. This array need to be global because I want to update it from another view controller class. How can I do this?</p>\n\n<p>For this I declared a NSMutableArray type object and add float value by a for loop.</p>\n\n<pre><code>@property (nonatomic, strong) NSMutableArray   *speedRate;\n\nfor (NSInteger i = 0; i &lt; self.assetArray.count; i++){\n   [self.speedRate addObject:[NSNumber numberWithFloat:1.0f]];\n    }\n\nNSLog(@\"speedRate.count =%lu\",(unsigned long)self.speedRate.count);\nNSLog(@\"value =%f\",[[self.speedRate objectAtIndex:1]floatValue]);\n</code></pre>\n\n<p>But I got speedRate.count =0 and value =0.000 . I want speedRate.count will be same as self.assetArray.count and value =1.0 . How can I achieve this?</p>\n"}, {"tags": ["objective-c", "plugins", "nativescript"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 7121208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/axNbt.png?s=128&g=1", "display_name": "Reece Reynolds", "link": "https://stackoverflow.com/users/7121208/reece-reynolds"}, "is_accepted": true, "score": 0, "last_activity_date": 1568900635, "creation_date": 1568900635, "answer_id": 58012462, "question_id": 57975447, "link": "https://stackoverflow.com/questions/57975447/problems-creating-a-nativescript-plugin-that-uses-objective-c-code/58012462#58012462", "title": "Problems creating a NativeScript plugin that uses Objective-C code", "body": "<p>SOLVED: Files are added to the TNSNativeSource folder (Check in Xcode) and are available to use like any JS object. </p>\n"}], "owner": {"reputation": 21, "user_id": 7121208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/axNbt.png?s=128&g=1", "display_name": "Reece Reynolds", "link": "https://stackoverflow.com/users/7121208/reece-reynolds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 58012462, "answer_count": 1, "score": 2, "last_activity_date": 1568900635, "creation_date": 1568727280, "last_edit_date": 1568732022, "question_id": 57975447, "link": "https://stackoverflow.com/questions/57975447/problems-creating-a-nativescript-plugin-that-uses-objective-c-code", "title": "Problems creating a NativeScript plugin that uses Objective-C code", "body": "<p>I have followed the NativeScript documentation on adding Objective-C code to a NS project although I am struggling to call the Objective-C code in my iOS project. I am only trying to implement <code>appPlugin.h</code> and <code>appPlugin.m</code> files into my project.</p>\n\n<p>My folder structure for the Objective-C files are as follows:</p>\n\n<ul>\n<li>Project/app/App_Resources/iOS/src/...</li>\n</ul>\n\n<p>I have also tried creating a NativeScript plugin that gets added to the dependencies in the projects <code>package.json</code>.</p>\n\n<p>Are there any additional files that need to be added to make the Objective-C code compatible with the NS project. The documentation simply says run \"If you run 'tns prepare ios' you will see that the files are now part of the project.\"</p>\n\n<p>Link to the documentation I have been following:</p>\n\n<ul>\n<li><p><a href=\"https://www.nativescript.org/blog/adding-objective-c-code-to-a-nativescript-app\" rel=\"nofollow noreferrer\">https://www.nativescript.org/blog/adding-objective-c-code-to-a-nativescript-app</a></p></li>\n<li><p><a href=\"https://docs.nativescript.org/plugins/building-plugins\" rel=\"nofollow noreferrer\">https://docs.nativescript.org/plugins/building-plugins</a></p></li>\n</ul>\n"}, {"tags": ["objective-c", "macos", "md5", "macos-catalina"], "comments": [{"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1568723816, "post_id": 57973362, "comment_id": 102358436, "body": "They probably changed the implementation between 10.14 and 10.15.  Does the data from 10.14 unarchive correctly on 10.15 (and vice versa)?"}, {"owner": {"reputation": 103, "user_id": 258801, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/93a6ecb47129eb40564d12dda13cae9b?s=128&d=identicon&r=PG", "display_name": "avalore", "link": "https://stackoverflow.com/users/258801/avalore"}, "reply_to_user": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1568724547, "post_id": 57973362, "comment_id": 102358823, "body": "You&#39;re right, the <code>archivedDataWithRootObject</code> method is returning differently"}, {"owner": {"reputation": 103, "user_id": 258801, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/93a6ecb47129eb40564d12dda13cae9b?s=128&d=identicon&r=PG", "display_name": "avalore", "link": "https://stackoverflow.com/users/258801/avalore"}, "reply_to_user": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1568724657, "post_id": 57973362, "comment_id": 102358889, "body": "Not sure what I can do about that @trojanfoe ?"}, {"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 1, "creation_date": 1568724690, "post_id": 57973362, "comment_id": 102358908, "body": "So I assume as long as it actually works there is nothing wrong, apart from it&#39;s messing-up your hashing.  You need to hash the <i>base data</i>, not the archived data, and then you have control over changes etc."}, {"owner": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 0, "creation_date": 1568725480, "post_id": 57973362, "comment_id": 102359369, "body": "It&#39;s not recomended to use MD5. Use SHA256 instead."}], "owner": {"reputation": 103, "user_id": 258801, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/93a6ecb47129eb40564d12dda13cae9b?s=128&d=identicon&r=PG", "display_name": "avalore", "link": "https://stackoverflow.com/users/258801/avalore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 325, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1568722925, "creation_date": 1568719976, "last_edit_date": 1568722925, "question_id": 57973362, "link": "https://stackoverflow.com/questions/57973362/md5-of-nsdata-in-macos-catalina-10-15-returns-different-result-to-macos-10-14", "title": "MD5 of NSData in macOS Catalina 10.15 returns different result to macOS 10.14", "body": "<p>Running the MD5 implementation below returns a different result in macOS 10.15 than it does on 10.14</p>\n\n<p>The NSData object should be the same (unsure the best way to check this - allocating to NSString is (null) in both scenarios. I have checked the length and both are the same)</p>\n\n<pre><code>    unsigned char result[CC_MD5_DIGEST_LENGTH];\n    CC_MD5( self.bytes, (int)self.length, result );\n    return [NSString stringWithFormat:\n        @\"%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x\",\n        result[0], result[1], result[2], result[3],\n        result[4], result[5], result[6], result[7],\n        result[8], result[9], result[10], result[11],\n        result[12], result[13], result[14], result[15]\n        ]; \n</code></pre>\n\n<p>Any ideas?</p>\n\n<p>EDIT:\nThe NSData object is created with the below (obfuscated) code:</p>\n\n<pre><code>NSData *firstData = [self.firstString dataUsingEncoding:NSUTF8StringEncoding];\n\nNSMutableData *archivedData = [[NSKeyedArchiver archivedDataWithRootObject:secondString requiringSecureCoding:NO error:nil] mutableCopy];\n\n[archivedData appendData:firstData];\n\nreturn [archivedData MD5];\n</code></pre>\n\n<p>Edit:\nIt actually looks like it's the NSData object that's different. The same string is passed into the code above, hard coded in a test app.\nThere is still a difference between 10.14 and 10.15</p>\n\n<p>Hex Output:</p>\n\n<pre><code>10.15\n62706C69 73743030 D4010203 04050607 0A582476 65727369 6F6E5924 61726368 69766572 5424746F 7058246F 626A6563 74731200 0186A05F 100F4E53 4B657965 64417263 68697665 72D10809 54726F6F 748001A2 0B0C5524 6E756C6C 5F102C34 32373539 3930432D 42423235 36363143 2D434146 42424136 412D3031 46303242 42302D38 45364444 46303508 111A2429 3237494C 5153565C 00000000 00000101 00000000 0000000D 00000000 00000000 00000000 0000008B 47642437 2A752877 2B587852 684A7537 73342D39 39234625 305B413F 437A7434 4A722871 32245672 30406D58 50337251 71374644 372B522A 2D28462F 683E5F4B\n\n10.14\n62706C69 73743030 D4010203 04050609 0A582476 65727369 6F6E5824 6F626A65 63747359 24617263 68697665 72542474 6F701200 0186A0A2 07085524 6E756C6C 5F102C34 32373539 3930432D 42423235 36363143 2D434146 42424136 412D3031 46303242 42302D38 45364444 4630355F 100F4E53 4B657965 64417263 68697665 72D10B0C 54726F6F 74800108 111A232D 32373A40 6F818489 00000000 00000101 00000000 0000000D 00000000 00000000 00000000 0000008B 47642437 2A752877 2B587852 684A7537 73342D39 39234625 305B413F 437A7434 4A722871 32245672 30406D58 50337251 71374644 372B522A 2D28462F 683E5F4B\n</code></pre>\n"}, {"tags": ["objective-c", "xcode", "dictionary", "key", "firebase-analytics"], "comments": [{"owner": {"reputation": 1157, "user_id": 11835930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0571003a7470e2807c76fdd6504de4f6?s=128&d=identicon&r=PG&f=1", "display_name": "aalmigthy", "link": "https://stackoverflow.com/users/11835930/aalmigthy"}, "edited": false, "score": 1, "creation_date": 1568726333, "post_id": 57973222, "comment_id": 102359898, "body": "That is not the complete function. You are missing at least a <code>}</code> to close the <code>if</code> statement. Also I don&#39;t see any assignment of <code>newCurrentPerson</code>."}, {"owner": {"reputation": 6583, "user_id": 2015023, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b436c40d6ac76cd76ce05aadb9fbebcf?s=128&d=identicon&r=PG", "display_name": "Mobile Ben", "link": "https://stackoverflow.com/users/2015023/mobile-ben"}, "edited": false, "score": 0, "creation_date": 1568731634, "post_id": 57973222, "comment_id": 102363248, "body": "You should also specify just want <code>thisPerson</code> and <code>newCurrentPerson</code> are. Are they parts of your class?"}], "answers": [{"tags": [], "owner": {"reputation": 311, "user_id": 4322841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J25yW.jpg?s=128&g=1", "display_name": "Artem", "link": "https://stackoverflow.com/users/4322841/artem"}, "is_accepted": true, "score": 0, "last_activity_date": 1568736944, "creation_date": 1568736944, "answer_id": 57978239, "question_id": 57973222, "link": "https://stackoverflow.com/questions/57973222/is-key-0-the-same-as-null-and-how-do-i-prevent-it-from-crashing/57978239#57978239", "title": "Is key 0 the same as null and how do I prevent it from crashing?", "body": "<ol>\n<li><blockquote>\n  <p>In debug-mode the values of one of the variables is 0 key/value pairs.\n  Does this mean that it is completely without value and therefore is\n  nil?</p>\n</blockquote></li>\n</ol>\n\n<p>No. It means, that variable contains dictionary object that completely without value and therefore it is NOT <code>nil</code>. It is empty <code>NSMutableDictionary *</code> (or may be <code>NSDictionary *</code> if there some error out of this function).</p>\n\n<ol start=\"2\">\n<li><blockquote>\n  <p>If so, how do I check whether it's nil to prevent it from crashing?</p>\n</blockquote></li>\n</ol>\n\n<p>To check if variable is nil in Objective C you should simply do:</p>\n\n<pre><code>if (newPerson == nil) {\n    // do something with nil case\n}\n</code></pre>\n\n<p>But it is probably not that you need.</p>\n\n<ol start=\"3\">\n<li>More about <code>nil</code>:</li>\n</ol>\n\n<pre><code>    //It Crashes Here In The NSLog... sometimes\n    NSLog(@\"currentPerson: %@\",newCurrentPerson);\n</code></pre>\n\n<p>If you have implicit assumption that <code>NSLog(@\"currentPerson: %@\",nil);</code> cause crash - then it is wrong. <code>NSLog</code> handles <code>nil</code> perfectly fine in such case.</p>\n\n<ol start=\"4\">\n<li>So I believe that problem somewhere out of code you posted in question.</li>\n</ol>\n"}], "owner": {"reputation": 145, "user_id": 12079118, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-l59aysx1smk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdC-Jsy01aFYM3qQxmK1nNkBvqiZQ/photo.jpg?sz=128", "display_name": "Whipper Snapper", "link": "https://stackoverflow.com/users/12079118/whipper-snapper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 57978239, "answer_count": 1, "score": -1, "last_activity_date": 1568736944, "creation_date": 1568719456, "question_id": 57973222, "link": "https://stackoverflow.com/questions/57973222/is-key-0-the-same-as-null-and-how-do-i-prevent-it-from-crashing", "title": "Is key 0 the same as null and how do I prevent it from crashing?", "body": "<p>I have two <code>variables</code> of type <code>NSMutableDictionary</code> in a function. The function works fine but <code>firebase-analytics</code> show that it does crash on occasions. </p>\n\n<p>In <code>debug-mode</code> the values of one of the variables is <code>0 key/value pairs</code>. Does this mean that it is completely without value and therefore is <code>nil</code>? If so, how do I check whether it's nil to prevent it from crashing?</p>\n\n<p>Here's the function:</p>\n\n<pre><code>-(void)setPerson:(NSMutableDictionary*)newPerson{\n    if (thisPerson != newPerson) {\n\n    thisPerson = newPerson;\n\n    //It Crashes Here In The NSLog... sometimes\n    NSLog(@\"currentPerson: %@\",newCurrentPerson);\n}\n</code></pre>\n\n<p>So, <code>thisPerson</code> is expressivly nil at first, and <code>newPerson</code> is <code>0 key/value pair</code>. Then <code>thisPerson</code> is assigned the <code>key 0/value pair</code> value as well. And sometimes it crashes in the <code>NSLog</code>. Very confusing. </p>\n"}, {"tags": ["ios", "objective-c", "pdf"], "comments": [{"owner": {"reputation": 124, "user_id": 4894652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bab93ad72e4bf1c309b35f71d5c8933?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak Rajput", "link": "https://stackoverflow.com/users/4894652/deepak-rajput"}, "edited": false, "score": 0, "creation_date": 1568716568, "post_id": 57971909, "comment_id": 102354767, "body": "Try to scale the size to that of original image&#39;s content size. <code>CGRect rect = CGRectMake(0, 0, image.size.width, image.size.height);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1312, "user_id": 377760, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/d14c3fad2289150b4c0fae3916dab5a3?s=128&d=identicon&r=PG", "display_name": "RomanS", "link": "https://stackoverflow.com/users/377760/romans"}, "edited": false, "score": 0, "creation_date": 1568730570, "post_id": 57974304, "comment_id": 102362649, "body": "How it will be in ObjC?"}], "tags": [], "owner": {"reputation": 26, "user_id": 12079468, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC7xs38YBcVgpVlGh8oAQuaENNOx_sbjUwbBDs_=k-s128", "display_name": "Shaker Samy", "link": "https://stackoverflow.com/users/12079468/shaker-samy"}, "is_accepted": true, "score": 1, "last_activity_date": 1568729364, "last_edit_date": 1568729364, "creation_date": 1568723563, "answer_id": 57974304, "question_id": 57971909, "link": "https://stackoverflow.com/questions/57971909/ios-generate-pdf-from-image/57974304#57974304", "title": "iOS generate pdf from image", "body": "<p>The simple way would be something like this:</p>\n\n<pre><code>func createPDF(image: UIImage) -&gt; NSData? {\n\n    let pdfData = NSMutableData()\n    let pdfConsumer = CGDataConsumer(data: pdfData as CFMutableData)!\n\n    var mediaBox = CGRect.init(x: 0, y: 0, width: image.size.width, height: image.size.height)\n\n    let pdfContext = CGContext(consumer: pdfConsumer, mediaBox: &amp;mediaBox, nil)!\n\n    pdfContext.beginPage(mediaBox: &amp;mediaBox)\n    pdfContext.draw(image.cgImage!, in: mediaBox)\n    pdfContext.endPage()\n\n    return pdfData\n}\n</code></pre>\n"}], "owner": {"reputation": 1312, "user_id": 377760, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/d14c3fad2289150b4c0fae3916dab5a3?s=128&d=identicon&r=PG", "display_name": "RomanS", "link": "https://stackoverflow.com/users/377760/romans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 57974304, "answer_count": 1, "score": 0, "last_activity_date": 1568729364, "creation_date": 1568714570, "question_id": 57971909, "link": "https://stackoverflow.com/questions/57971909/ios-generate-pdf-from-image", "title": "iOS generate pdf from image", "body": "<p>I am trying to generate PDF from disk images, my code looks like:</p>\n\n<pre><code>    CGSize paperSizeA4 = CGSizeMake(595.2, 841.8);\n    NSMutableData *pdfData = [NSMutableData data];\n    UIGraphicsBeginPDFContextToData(pdfData, CGRectMake(0, 0, paperSizeA4.width, paperSizeA4.height), nil);\n    for (NSURL *filePathURL in filesPathURL)\n    {\n      NSData *imgData = [[NSData alloc] initWithContentsOfURL:filePathURL];\n      UIImage *image = [[UIImage alloc] initWithData:imgData];\n      UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, paperSizeA4.width, paperSizeA4.height), nil);\n      CGRect rect = CGRectMake(0, 0, paperSizeA4.width, paperSizeA4.height);\n      [image drawInRect:rect];\n    }\n    UIGraphicsEndPDFContext();\n</code></pre>\n\n<p>It is working ok, but resolution of image in pdf too low. I am searching the way to generate pdf with best resolution images.</p>\n"}, {"tags": ["objective-c", "xcode", "view", "swift3", "badge"], "comments": [{"owner": {"reputation": 8653, "user_id": 2299040, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Zjrmw.jpg?s=128&g=1", "display_name": "Sahil Manchanda", "link": "https://stackoverflow.com/users/2299040/sahil-manchanda"}, "edited": false, "score": 0, "creation_date": 1568712115, "post_id": 57971144, "comment_id": 102352452, "body": "How did you setup the interface using interface builder or using code. show us the relevant part regarding constraints, so that we can help"}, {"owner": {"reputation": 534, "user_id": 6659932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23d279d511c5de50e192f7e8d9a79739?s=128&d=identicon&r=PG&f=1", "display_name": "manishkumar", "link": "https://stackoverflow.com/users/6659932/manishkumar"}, "reply_to_user": {"reputation": 8653, "user_id": 2299040, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Zjrmw.jpg?s=128&g=1", "display_name": "Sahil Manchanda", "link": "https://stackoverflow.com/users/2299040/sahil-manchanda"}, "edited": false, "score": 0, "creation_date": 1568712159, "post_id": 57971144, "comment_id": 102352479, "body": "used coding @sa"}, {"owner": {"reputation": 8653, "user_id": 2299040, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Zjrmw.jpg?s=128&g=1", "display_name": "Sahil Manchanda", "link": "https://stackoverflow.com/users/2299040/sahil-manchanda"}, "edited": false, "score": 2, "creation_date": 1568712185, "post_id": 57971144, "comment_id": 102352489, "body": "Then show us the code where you&#39;ve setup the constraints"}, {"owner": {"reputation": 534, "user_id": 6659932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23d279d511c5de50e192f7e8d9a79739?s=128&d=identicon&r=PG&f=1", "display_name": "manishkumar", "link": "https://stackoverflow.com/users/6659932/manishkumar"}, "reply_to_user": {"reputation": 8653, "user_id": 2299040, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Zjrmw.jpg?s=128&g=1", "display_name": "Sahil Manchanda", "link": "https://stackoverflow.com/users/2299040/sahil-manchanda"}, "edited": false, "score": 0, "creation_date": 1568712225, "post_id": 57971144, "comment_id": 102352507, "body": "do you think that its a constraint issue@SahilManchanda"}, {"owner": {"reputation": 8653, "user_id": 2299040, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Zjrmw.jpg?s=128&g=1", "display_name": "Sahil Manchanda", "link": "https://stackoverflow.com/users/2299040/sahil-manchanda"}, "edited": false, "score": 0, "creation_date": 1568712291, "post_id": 57971144, "comment_id": 102352547, "body": "if you&#39;ve used constraints then yes, if you are manually calculating positions and sizes then problem lies there"}, {"owner": {"reputation": 17713, "user_id": 1801544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CcSB.jpg?s=128&g=1", "display_name": "Larme", "link": "https://stackoverflow.com/users/1801544/larme"}, "edited": false, "score": 1, "creation_date": 1568712358, "post_id": 57971144, "comment_id": 102352585, "body": "Position issue? Or should it be visible above and outside the tile (in the black part)? If yes, it&#39;s a mask/clip to bound issue?"}, {"owner": {"reputation": 534, "user_id": 6659932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23d279d511c5de50e192f7e8d9a79739?s=128&d=identicon&r=PG&f=1", "display_name": "manishkumar", "link": "https://stackoverflow.com/users/6659932/manishkumar"}, "edited": false, "score": 0, "creation_date": 1568712400, "post_id": 57971144, "comment_id": 102352614, "body": "no i have not used constaints there yet.still half of the badge part is visible and half is not.@SahilManchanda"}, {"owner": {"reputation": 534, "user_id": 6659932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23d279d511c5de50e192f7e8d9a79739?s=128&d=identicon&r=PG&f=1", "display_name": "manishkumar", "link": "https://stackoverflow.com/users/6659932/manishkumar"}, "edited": false, "score": 0, "creation_date": 1568712711, "post_id": 57971144, "comment_id": 102352771, "body": "is there any way to remove the problem of this kind.@Larme"}, {"owner": {"reputation": 17713, "user_id": 1801544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CcSB.jpg?s=128&g=1", "display_name": "Larme", "link": "https://stackoverflow.com/users/1801544/larme"}, "edited": false, "score": 1, "creation_date": 1568712750, "post_id": 57971144, "comment_id": 102352791, "body": "Could you show what&#39;s your current goal?"}, {"owner": {"reputation": 534, "user_id": 6659932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23d279d511c5de50e192f7e8d9a79739?s=128&d=identicon&r=PG&f=1", "display_name": "manishkumar", "link": "https://stackoverflow.com/users/6659932/manishkumar"}, "edited": false, "score": 0, "creation_date": 1568712881, "post_id": 57971144, "comment_id": 102352871, "body": "my goal is to show the badge at the corner totally circular on which number can be seen@Larme"}, {"owner": {"reputation": 17713, "user_id": 1801544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CcSB.jpg?s=128&g=1", "display_name": "Larme", "link": "https://stackoverflow.com/users/1801544/larme"}, "edited": false, "score": 0, "creation_date": 1568713430, "post_id": 57971144, "comment_id": 102353186, "body": "<a href=\"https://stackoverflow.com/questions/20449256/how-does-clipstobounds-work\" title=\"how does clipstobounds work\">stackoverflow.com/questions/20449256/&hellip;</a> ?"}, {"owner": {"reputation": 534, "user_id": 6659932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23d279d511c5de50e192f7e8d9a79739?s=128&d=identicon&r=PG&f=1", "display_name": "manishkumar", "link": "https://stackoverflow.com/users/6659932/manishkumar"}, "reply_to_user": {"reputation": 17713, "user_id": 1801544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CcSB.jpg?s=128&g=1", "display_name": "Larme", "link": "https://stackoverflow.com/users/1801544/larme"}, "edited": false, "score": 0, "creation_date": 1568782029, "post_id": 57971144, "comment_id": 102378824, "body": "thanks a lot ,mask issue was there @Larme"}], "answers": [{"tags": [], "owner": {"reputation": 124, "user_id": 6655110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e28d63def9031f6a4e02bb675737a39?s=128&d=identicon&r=PG&f=1", "display_name": "infinity_loop", "link": "https://stackoverflow.com/users/6655110/infinity-loop"}, "is_accepted": true, "score": 1, "last_activity_date": 1569473966, "creation_date": 1569473966, "answer_id": 58109823, "question_id": 57971144, "link": "https://stackoverflow.com/questions/57971144/why-the-badge-implemented-on-the-icons-are-not-visible-clearly-i-want-to-show-th/58109823#58109823", "title": "Why the badge implemented on the icons are not visible clearly.I want to show the badges clearly on the icons and badge-count on the icons", "body": "<p>It's a mask/clip to bound issue.check your auto layout constraints of that view. </p>\n"}], "owner": {"reputation": 534, "user_id": 6659932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23d279d511c5de50e192f7e8d9a79739?s=128&d=identicon&r=PG&f=1", "display_name": "manishkumar", "link": "https://stackoverflow.com/users/6659932/manishkumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 1, "accepted_answer_id": 58109823, "answer_count": 1, "score": 0, "last_activity_date": 1583326006, "creation_date": 1568711916, "last_edit_date": 1592644375, "question_id": 57971144, "link": "https://stackoverflow.com/questions/57971144/why-the-badge-implemented-on-the-icons-are-not-visible-clearly-i-want-to-show-th", "title": "Why the badge implemented on the icons are not visible clearly.I want to show the badges clearly on the icons and badge-count on the icons", "body": "<p>The implemented badge is not shown clearly in the interface.why the badge is not clearly visible.\ntried zPsoition methods  also.</p>\n<p>The below image is shown to describe the issue.</p>\n<p><a href=\"https://i.stack.imgur.com/pIGPJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pIGPJ.png\" alt=\"enter image description here\" /></a></p>\n"}, {"tags": ["objective-c", "xcode", "xcode11"], "comments": [{"owner": {"reputation": 370154, "user_id": 1271826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/duhm9.jpg?s=128&g=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/1271826/rob"}, "edited": false, "score": 0, "creation_date": 1568680500, "post_id": 57964543, "comment_id": 102342580, "body": "What version of Xcode? 11A420a?"}, {"owner": {"reputation": 14702, "user_id": 1918561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uRU2O.jpg?s=128&g=1", "display_name": "Gereon", "link": "https://stackoverflow.com/users/1918561/gereon"}, "edited": false, "score": 0, "creation_date": 1568697390, "post_id": 57964543, "comment_id": 102345756, "body": "Those .db files are sqlite databases. Can you access them without I/O errors, using the sqlite3 command?"}, {"owner": {"reputation": 612, "user_id": 1728959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7ab204ba08ba791a7017d779c5f0e78?s=128&d=identicon&r=PG", "display_name": "AxM", "link": "https://stackoverflow.com/users/1728959/axm"}, "edited": false, "score": 0, "creation_date": 1568713061, "post_id": 57964543, "comment_id": 102352983, "body": "Happens also for me with the latest Xcode11 GM2 seed (11A420a).  I have added some echo-commands in my &quot;run script&quot; build phase to see the root cause of this. The interesting point is, that the script runs trough successfully, but the build still fails because of the mentioned <code>...Intermediates.noindex&#47;XCBuildData&#47;build.db&quot;: disk I&#47;O error</code>  No clue, how to fix this."}, {"owner": {"reputation": 5090, "user_id": 342794, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/09af0c974d4f789d693658ce299be3cc?s=128&d=identicon&r=PG&f=1", "display_name": "lal", "link": "https://stackoverflow.com/users/342794/lal"}, "edited": false, "score": 0, "creation_date": 1568740245, "post_id": 57964543, "comment_id": 102367450, "body": "It was using GM Seed 1 (11A419c). Now, updating to Xcode 11 GM Seed 2 (11A420a), released on Sept 16, 2019."}, {"owner": {"reputation": 920, "user_id": 4743190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/302c88d61dc04307cd530e6898682691?s=128&d=identicon&r=PG&f=1", "display_name": "Mantoska", "link": "https://stackoverflow.com/users/4743190/mantoska"}, "edited": false, "score": 0, "creation_date": 1615375356, "post_id": 57964543, "comment_id": 117669613, "body": "Restarting Xcode solved it."}], "answers": [{"comments": [{"owner": {"reputation": 3683, "user_id": 615809, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cec4888789a911d584efbc99a3eff04f?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/615809/max"}, "edited": false, "score": 0, "creation_date": 1603474580, "post_id": 58001418, "comment_id": 114058979, "body": "using -UseModernBuildSystem=NO is no more a solution with xcode 12 as legacy build system is deprecated in xcode 12."}], "tags": [], "owner": {"reputation": 5090, "user_id": 342794, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/09af0c974d4f789d693658ce299be3cc?s=128&d=identicon&r=PG&f=1", "display_name": "lal", "link": "https://stackoverflow.com/users/342794/lal"}, "is_accepted": false, "score": 2, "last_activity_date": 1568848337, "last_edit_date": 1592644375, "creation_date": 1568845164, "answer_id": 58001418, "question_id": 57964543, "link": "https://stackoverflow.com/questions/57964543/xcode-11-gm-error-accessing-build-database-disk-i-o-error/58001418#58001418", "title": "Xcode 11 GM - error: accessing build database - disk I/O error", "body": "<h1>Use <code>Command Line Tools</code> for Xcode 11</h1>\n<p>Ensuring that correct version of <code>Command Line Tools</code> (xcodebuild) is used works with complete clean &amp; building universal framework fresh. And the project is using <code>New Build System (Default)</code>. It also worked with Xcode 11 GM - Build 11A419c (seed 1).</p>\n<p>Use following command to ensure proper link:</p>\n<pre><code>xcodebuild -version\nXcode 11.0\nBuild version 11A419c\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/7oxti.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7oxti.png\" alt=\"Correct version of Command Line Tools\" /></a></p>\n<p>Earlier it was using the old <code>Xcode10.2</code> <code>xcodebuild</code>.</p>\n<h1>Alternative workaround(s)</h1>\n<p>Not a good fix as it usages <code>Legacy Build System</code> instead of modern system with Xcode 11.</p>\n<ol>\n<li><p>One option is to use <code>Legacy Build System</code> with <code>Shared Project Settings</code> when for universal framework projects.</p>\n<p><a href=\"https://i.stack.imgur.com/igbm7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/igbm7.png\" alt=\"Shared Project Settings\" /></a></p>\n</li>\n<li><p>Tried using undocumented <code>xcodebuild</code> parameter <code>-UseModernBuildSystem=NO</code>, it didn't work. [working on command line fix, will update]</p>\n</li>\n</ol>\n<p>Relevant release note: for GM-2 seed: Released September 16, 2019 Build 11A420a</p>\n<blockquote>\n<p>An XCFramework makes it possible to bundle a binary framework or\nlibrary for multiple platforms \u2014including iOS devices, iOS simulators,\nand Mac Catalyst \u2014 into a single distributable .xcframework bundle\nthat your developers can use within their own applications. An\n.xcframework bundle can be added to an Xcode target\u2019s Link Libraries\nphase and Xcode uses the right platform\u2019s version of the included\nframework or library at build time. Creation of frameworks is\nsupported from the command line using xcodebuild -create-xcframework.\nFrameworks or libraries bundled in an XCFramework should be built with\nthe Build Libraries for Distribution build setting set to YES.\n(49948269)</p>\n</blockquote>\n"}], "owner": {"reputation": 5090, "user_id": 342794, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/09af0c974d4f789d693658ce299be3cc?s=128&d=identicon&r=PG&f=1", "display_name": "lal", "link": "https://stackoverflow.com/users/342794/lal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5634, "favorite_count": 1, "answer_count": 1, "score": 8, "last_activity_date": 1568848337, "creation_date": 1568668747, "last_edit_date": 1568845444, "question_id": 57964543, "link": "https://stackoverflow.com/questions/57964543/xcode-11-gm-error-accessing-build-database-disk-i-o-error", "title": "Xcode 11 GM - error: accessing build database - disk I/O error", "body": "<p>Encountering following error when only building a \"Universal Binary Framework\" for release distribution. Same project and settings works when building \"Non-Universal\" scheme in debug or release mode. </p>\n\n<p>Project uses Objective-C &amp; Xcode 11 GM (11A419c). Now, updating to Xcode 11 GM Seed 2 (11A420a).</p>\n\n<blockquote>\n  <p>error: accessing build database \"/Users/john.doe/Library/Developer/Xcode/DerivedData/FrameworkSDK-esxhqchxkdevuiapyebthsdscpje/Build/Intermediates.noindex/XCBuildData/build.db\": disk I/O error</p>\n</blockquote>\n\n<p>Using following <code>build command</code> from a script: </p>\n\n<pre><code>xcodebuild -workspace ${PROJECT_NAME}.xcworkspace -scheme ${PROJECT_NAME} -sdk iphonesimulator -configuration ${CONFIGURATION} only_active_arch=no defines_module=yes clean build CONFIGURATION_BUILD_DIR=${BUILD_DIR}/${CONFIGURATION}-iphonesimulator 2&gt;&amp;1\n</code></pre>\n\n<p>Tried a few steps: Complete clean, pod update and steps mentioned on <a href=\"https://stackoverflow.com/questions/51153525/xcode-10-unable-to-attach-db-error/51167649\">Related error for Xcode 10</a> &amp; <a href=\"https://github.com/mattgallagher/CwlSignal/issues/24#issuecomment-396931001\" rel=\"noreferrer\">linked post</a> - Doesn't solve this issue</p>\n\n<p>No Answer on this question:<br>\n<a href=\"https://stackoverflow.com/questions/57000053/why-error-accessing-build-database-disk-i-o-error\">why error &quot;accessing build database disk I/O error&quot;?</a></p>\n"}, {"tags": ["ios", "objective-c", "authentication", "afnetworking"], "comments": [{"owner": {"reputation": 1076, "user_id": 7229378, "user_type": "registered", "profile_image": "https://graph.facebook.com/561259464075050/picture?type=large", "display_name": "Abu Ul Hassan", "link": "https://stackoverflow.com/users/7229378/abu-ul-hassan"}, "edited": false, "score": 0, "creation_date": 1568706087, "post_id": 57964450, "comment_id": 102349177, "body": "on server side you should check if streaming is happening dont expire it, how you can even think to expire a token when streaming is happening from a trusted request?"}, {"owner": {"reputation": 1, "user_id": 1666330, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ucfMU.jpg?s=128&g=1", "display_name": "Mina Mohareb", "link": "https://stackoverflow.com/users/1666330/mina-mohareb"}, "reply_to_user": {"reputation": 1076, "user_id": 7229378, "user_type": "registered", "profile_image": "https://graph.facebook.com/561259464075050/picture?type=large", "display_name": "Abu Ul Hassan", "link": "https://stackoverflow.com/users/7229378/abu-ul-hassan"}, "edited": false, "score": 0, "creation_date": 1568757829, "post_id": 57964450, "comment_id": 102374289, "body": "by the time the request hits the server the token has already expired. all the time the status of the request is &quot;sending request&quot; by the time the request is &quot;sent&quot; and &quot;waiting for response&quot; the token has already expired"}, {"owner": {"reputation": 1076, "user_id": 7229378, "user_type": "registered", "profile_image": "https://graph.facebook.com/561259464075050/picture?type=large", "display_name": "Abu Ul Hassan", "link": "https://stackoverflow.com/users/7229378/abu-ul-hassan"}, "edited": false, "score": 0, "creation_date": 1568784854, "post_id": 57964450, "comment_id": 102379592, "body": "in that case you should interect with server after every hour if streaming is happening to keep session alive.  and after upload done stop 1 hour interection service too :)"}, {"owner": {"reputation": 1, "user_id": 1666330, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ucfMU.jpg?s=128&g=1", "display_name": "Mina Mohareb", "link": "https://stackoverflow.com/users/1666330/mina-mohareb"}, "reply_to_user": {"reputation": 1076, "user_id": 7229378, "user_type": "registered", "profile_image": "https://graph.facebook.com/561259464075050/picture?type=large", "display_name": "Abu Ul Hassan", "link": "https://stackoverflow.com/users/7229378/abu-ul-hassan"}, "edited": false, "score": 0, "creation_date": 1568914357, "post_id": 57964450, "comment_id": 102436193, "body": "Yeah, that makes sense, but I was trying to find a fix without having to do backend changes, as that is a bigger project. What I was looking for is someway I can do the authentication first (like send only the headers that has the auth token) and then start streaming the request body, just as the download request works, but it seems it&#39;s not possible."}, {"owner": {"reputation": 1076, "user_id": 7229378, "user_type": "registered", "profile_image": "https://graph.facebook.com/561259464075050/picture?type=large", "display_name": "Abu Ul Hassan", "link": "https://stackoverflow.com/users/7229378/abu-ul-hassan"}, "edited": false, "score": 0, "creation_date": 1568960378, "post_id": 57964450, "comment_id": 102448218, "body": "you have to work as i said you cannot make sure everyone have a internet connection with good speed so if a person is having speed in 70 to 80 kb&#39;s or less you are in trouble in all of low speed cases ... you have to do a mock request to keep session alive its the only thing you can do without doing backend changes."}], "owner": {"reputation": 1, "user_id": 1666330, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ucfMU.jpg?s=128&g=1", "display_name": "Mina Mohareb", "link": "https://stackoverflow.com/users/1666330/mina-mohareb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568668140, "creation_date": 1568668140, "question_id": 57964450, "link": "https://stackoverflow.com/questions/57964450/upload-request-authentication-expires-by-the-time-the-request-is-sent", "title": "Upload request authentication expires by the time the request is sent", "body": "<p>We are doing upload requests using AFNetworking, but the problem is we have a short life token (2 hrs) that is needed for the upload request.\nWhen a huge file gets uploaded 1GB or more, by the time the request hits the server the token has expired and the request fails.\nIs there is anyway in AFNetworking that we can open the connection with the server (authenticate) and then start streaming the file, just as what happens with the download task when we are receiving a file?</p>\n\n<p>I have tried using all different types of appendPartWith\nappendPartWithFileURL\nappendPartWithInputStream\nappendPartWithFileData</p>\n\n<p>they all have the same behavior from network stand point</p>\n\n<pre><code>    {\n\n    ....\n\nNSString *sessionKey = token;\nNSString *sha256 = [NSInputStream inputStreamWithURL:fileURL].sha256;\nNSString *mimeType = @\"application/octet-stream\"\nunsigned long long filesize = fileSize;\nNSTimeInterval timeout = MAX(filesize * 1. / 500000., 30.);\n\n    ....\n    request = [self.manager.requestSerializer\n        multipartFormRequestWithMethod:@\"POST\"\n                             URLString:URLString\n                            parameters:parameters\n             constructingBodyWithBlock:^(id&lt;AFMultipartFormData&gt; _Nonnull formData) {\n               [formData appendPartWithFileURL:fileURL\n                                          name:@\"fileData\"\n                                      fileName:[fileName urlEncode]\n                                      mimeType:mimeType\n                                         error:nil];\n               [formData appendPartWithFormData:[sessionKey dataUsingEncoding:NSUTF8StringEncoding]\n                                           name:@\"sessionKey\"];\n             }\n                                 error:nil];\n\n    }\n    request.timeoutInterval = timeout;\n}\nreturn request;\n\n}\n\n\n    - (NSURLSessionUploadTask *)uploadTaskWithRequest:(NSURLRequest *)request\n                                     fromFile:(NSURL *)fileURL\n                                     progress:(void (^)(NSProgress *uploadProgress)) uploadProgressBlock\n                            completionHandler:(void (^)(NSURLResponse *response, id responseObject, NSError *error))completionHandler\n</code></pre>\n"}, {"tags": ["objective-c", "floor"], "answers": [{"comments": [{"owner": {"reputation": 297030, "user_id": 1226963, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/yjY1E.png?s=128&g=1", "display_name": "rmaddy", "link": "https://stackoverflow.com/users/1226963/rmaddy"}, "edited": false, "score": 0, "creation_date": 1568649501, "post_id": 57960370, "comment_id": 102332766, "body": "A <code>float</code> is only good for about 7 or 8 significant digits. So yes, rounding to a <code>float</code> would be a problem when there are 10 digits before the decimal."}], "tags": [], "owner": {"reputation": 43714, "user_id": 6257435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17fcf85ee49b22ea9e5fd5f5e5a49ec3?s=128&d=identicon&r=PG&f=1", "display_name": "DonMag", "link": "https://stackoverflow.com/users/6257435/donmag"}, "is_accepted": true, "score": 2, "last_activity_date": 1568648808, "creation_date": 1568648808, "answer_id": 57960370, "question_id": 57959754, "link": "https://stackoverflow.com/questions/57959754/nsdate-dropping-decimal-with-floorf-produces-strange-output/57960370#57960370", "title": "NSDate dropping decimal with floorf produces strange output", "body": "<p><code>NSTimeInterval</code> is a <code>double</code>, so you probably want to be using <code>floor()</code>:</p>\n\n<pre><code>int j = 0;\nwhile(++j &lt; 6){\n    NSDate *now = [NSDate date];\n    NSTimeInterval nowEpochSeconds = [now timeIntervalSince1970];\n    NSLog(@\"%f\",nowEpochSeconds);\n    NSLog(@\"%f\",floor(nowEpochSeconds));\n    NSLog(@\"\\n\");\n    [NSThread sleepForTimeInterval:1.0f];\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1568648630.428520\n1568648630.000000\n\n1568648631.429841\n1568648631.000000\n\n1568648632.431206\n1568648632.000000\n\n1568648633.432594\n1568648633.000000\n\n1568648634.433988\n1568648634.000000\n</code></pre>\n"}], "owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 57960370, "answer_count": 1, "score": 0, "last_activity_date": 1568649283, "creation_date": 1568646652, "question_id": 57959754, "link": "https://stackoverflow.com/questions/57959754/nsdate-dropping-decimal-with-floorf-produces-strange-output", "title": "NSDate dropping decimal with floorf produces strange output", "body": "<p>I have a simple snippet which runs a loop every 1 second and displays seconds since epoch using NSDate.</p>\n\n<pre><code>        while(1){\n            NSDate *now = [NSDate date];\n            NSTimeInterval nowEpochSeconds = [now timeIntervalSince1970];\n            NSLog(@\"%f\",nowEpochSeconds);\n            [NSThread sleepForTimeInterval:1.0f];\n        }\n</code></pre>\n\n<p>nowEpochSeconds produces a floating point value in seconds with several decimal places as such</p>\n\n<pre><code>1568646562.613972\n1568646563.618479\n1568646564.621624\n1568646565.626183\n1568646566.626722\n1568646567.628425\n1568646568.633329\n</code></pre>\n\n<p>It's very close to one second intervals. Then I try dropping the decimal place using floorf</p>\n\n<pre><code>NSLog(@\"%f\",floorf(nowEpochSeconds));\n</code></pre>\n\n<p>But the seconds just remain the same. It's not the correct number of seconds either they just stagnate at one value</p>\n\n<pre><code>1568646528.000000\n1568646528.000000\n1568646528.000000\n1568646528.000000\n1568646528.000000\n1568646528.000000\n</code></pre>\n\n<p>I don't know why floorf is giving me strange results</p>\n"}, {"tags": ["ios", "objective-c", "uiimage", "ios-app-extension"], "comments": [{"owner": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 0, "creation_date": 1568638849, "post_id": 57957342, "comment_id": 102326624, "body": "<code>-[UIColor setFill]</code> + <code>UIRectFill</code>"}, {"owner": {"reputation": 3078, "user_id": 2481247, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/309c17907a3970f475f292e3912b2b7a?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/2481247/george"}, "reply_to_user": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 0, "creation_date": 1568710568, "post_id": 57957342, "comment_id": 102351597, "body": "@Cy-4AH can you please elaborate your answer."}, {"owner": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 0, "creation_date": 1568718882, "post_id": 57957342, "comment_id": 102355975, "body": "What is unclear? Set filling with black color and fill rect that you need."}], "answers": [{"comments": [{"owner": {"reputation": 3078, "user_id": 2481247, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/309c17907a3970f475f292e3912b2b7a?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/2481247/george"}, "edited": false, "score": 1, "creation_date": 1568699775, "post_id": 57960856, "comment_id": 102346482, "body": "In your answer you are still using UIGraphicsBeginImageContextWithOptions, this is where the app crashed. It is still crashing for images with large dimensions."}, {"owner": {"reputation": 54921, "user_id": 294949, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3326427b9c2edc60ad293fdf51c5ba4c?s=128&d=identicon&r=PG&f=1", "display_name": "danh", "link": "https://stackoverflow.com/users/294949/danh"}, "reply_to_user": {"reputation": 3078, "user_id": 2481247, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/309c17907a3970f475f292e3912b2b7a?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/2481247/george"}, "edited": false, "score": 0, "creation_date": 1568700677, "post_id": 57960856, "comment_id": 102346856, "body": "Please post the crash. What size do mean by \u201clarge\u201d?  You may need to down sample before doing anything with an overly large image."}, {"owner": {"reputation": 3078, "user_id": 2481247, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/309c17907a3970f475f292e3912b2b7a?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/2481247/george"}, "edited": false, "score": 0, "creation_date": 1568703776, "post_id": 57960856, "comment_id": 102348077, "body": "The extension simply crashes and I am not getting any log. The issue happens when I try to crop Live Photos. But crash is not happening for all Live Photos, just random Live Photos. I suspect it has to do with the size of the images."}, {"owner": {"reputation": 54921, "user_id": 294949, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3326427b9c2edc60ad293fdf51c5ba4c?s=128&d=identicon&r=PG&f=1", "display_name": "danh", "link": "https://stackoverflow.com/users/294949/danh"}, "reply_to_user": {"reputation": 3078, "user_id": 2481247, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/309c17907a3970f475f292e3912b2b7a?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/2481247/george"}, "edited": false, "score": 0, "creation_date": 1568724115, "post_id": 57960856, "comment_id": 102358610, "body": "How about down scaling?"}, {"owner": {"reputation": 3078, "user_id": 2481247, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/309c17907a3970f475f292e3912b2b7a?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/2481247/george"}, "edited": false, "score": 0, "creation_date": 1568725332, "post_id": 57960856, "comment_id": 102359268, "body": "can you suggest a way for down scaling"}, {"owner": {"reputation": 54921, "user_id": 294949, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3326427b9c2edc60ad293fdf51c5ba4c?s=128&d=identicon&r=PG&f=1", "display_name": "danh", "link": "https://stackoverflow.com/users/294949/danh"}, "reply_to_user": {"reputation": 3078, "user_id": 2481247, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/309c17907a3970f475f292e3912b2b7a?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/2481247/george"}, "edited": false, "score": 0, "creation_date": 1568725750, "post_id": 57960856, "comment_id": 102359509, "body": "@George - see edit, though I&#39;m a little skeptical about the idea of image size (or a leak) being the issue.  Live images sounds more suspicious.  (Can you log image dimensions and post those?)"}, {"owner": {"reputation": 3078, "user_id": 2481247, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/309c17907a3970f475f292e3912b2b7a?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/2481247/george"}, "edited": false, "score": 0, "creation_date": 1568726214, "post_id": 57960856, "comment_id": 102359809, "body": "image dimensions are width-3024 and height-4032. I tried the scaling down option and it worked fine."}, {"owner": {"reputation": 54921, "user_id": 294949, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3326427b9c2edc60ad293fdf51c5ba4c?s=128&d=identicon&r=PG&f=1", "display_name": "danh", "link": "https://stackoverflow.com/users/294949/danh"}, "reply_to_user": {"reputation": 3078, "user_id": 2481247, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/309c17907a3970f475f292e3912b2b7a?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/2481247/george"}, "edited": false, "score": 0, "creation_date": 1568726439, "post_id": 57960856, "comment_id": 102359972, "body": "Well, that is pretty big, but not crushingly so. The next testing idea would be to call this (if you can) in a loop with &gt; 10 images forced to 300x400.  Crashing then would be more evidence of a leak.  Meantime, if its just memory pressure due to the one image (not a leak) lmk if you need help doing a smarter computation on size"}, {"owner": {"reputation": 3078, "user_id": 2481247, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/309c17907a3970f475f292e3912b2b7a?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/2481247/george"}, "edited": false, "score": 0, "creation_date": 1568728029, "post_id": 57960856, "comment_id": 102361053, "body": "I tried looping and scaling down same image and storing them in an array. It is working fine without crash. I am sure the crash is due to a single image with high dimension. Can you please suggest a way?"}, {"owner": {"reputation": 54921, "user_id": 294949, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3326427b9c2edc60ad293fdf51c5ba4c?s=128&d=identicon&r=PG&f=1", "display_name": "danh", "link": "https://stackoverflow.com/users/294949/danh"}, "reply_to_user": {"reputation": 3078, "user_id": 2481247, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/309c17907a3970f475f292e3912b2b7a?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/2481247/george"}, "edited": false, "score": 0, "creation_date": 1568728997, "post_id": 57960856, "comment_id": 102361646, "body": "See edit for advice on scaling.  It may be that the app is already under memory pressure at the point where  the big image is processed.  In the vc that&#39;s active, it may be worthwhile to implement didReceiveMemoryWarning.  For starters, just log there to see if it fires."}, {"owner": {"reputation": 3078, "user_id": 2481247, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/309c17907a3970f475f292e3912b2b7a?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/2481247/george"}, "edited": false, "score": 0, "creation_date": 1568729783, "post_id": 57960856, "comment_id": 102362165, "body": "yes the didReceiveMemoryWarning is fired. How to check the reason for this memory pressure?"}, {"owner": {"reputation": 54921, "user_id": 294949, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3326427b9c2edc60ad293fdf51c5ba4c?s=128&d=identicon&r=PG&f=1", "display_name": "danh", "link": "https://stackoverflow.com/users/294949/danh"}, "reply_to_user": {"reputation": 3078, "user_id": 2481247, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/309c17907a3970f475f292e3912b2b7a?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/2481247/george"}, "edited": false, "score": 0, "creation_date": 1568730462, "post_id": 57960856, "comment_id": 102362589, "body": "That&#39;s a big topic.  Maybe start here <a href=\"https://developer.apple.com/library/archive/documentation/Performance/Conceptual/ManagingMemory/Articles/FindingPatterns.html\" rel=\"nofollow noreferrer\">developer.apple.com/library/archive/documentation/Performanc&zwnj;&#8203;e/&hellip;</a>.  It might also be worthwhile to get fixed in your mind the difference between a leak and memory pressure.  The former is inadvertent retention, most often cause by a retain cycle, leaving allocations around that the app can&#39;t reach.  The latter is an app working &quot;correctly&quot; but making demands on memory that the system can&#39;t handle."}], "tags": [], "owner": {"reputation": 54921, "user_id": 294949, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3326427b9c2edc60ad293fdf51c5ba4c?s=128&d=identicon&r=PG&f=1", "display_name": "danh", "link": "https://stackoverflow.com/users/294949/danh"}, "is_accepted": false, "score": 1, "last_activity_date": 1568728839, "last_edit_date": 1568728839, "creation_date": 1568650724, "answer_id": 57960856, "question_id": 57957342, "link": "https://stackoverflow.com/questions/57957342/how-to-add-black-color-area-to-uiimage-ios/57960856#57960856", "title": "How to add black color area to UIImage ios", "body": "<p>UIImageView is very good at aspect fitting, filling, scaling, etc. operations. You can let one do the computational and bitblit work for you, then render the result with an image context.  Untested, but like this...</p>\n\n<pre><code>// answer a new UIImage that has 2:1 aspect and fits a given input image\n// for now, scale it clumsily and extra small to prove or rule out memory issue\n+ (UIImage *)aspectFit:(UIImage *)image {\n    CGRect frame = CGRectMake(0, 0, 200, 100);\n    UIImageView *imageView = [[UIImageView alloc] initWithFrame:frame];\n    imageView.backgroundColor = [UIColor blackColor];\n    imageView.contentMode = UIViewContentModeScaleAspectFit;\n    imageView.image = image;\n\n    UIGraphicsBeginImageContextWithOptions(imageView.bounds.size, YES, 0.0);\n    [imageView.layer renderInContext:UIGraphicsGetCurrentContext()];\n    UIImage *result = UIGraphicsGetImageFromCurrentImageContext();\n    UIGraphicsEndImageContext();\n    return result;\n}\n</code></pre>\n\n<p>The scaling calculation can be made more sophisticated by setting a max value in either dimension and scaling to that.  Choosing the value to limit to is a matter of the app needs (often, the current display size is helpful).  The calculation is straight-forward...</p>\n\n<pre><code>// calculate a frame smaller than the starting image to scale to\nCGFloat maxHeight = 600; // or an fn() of display, up to the app needs\nCGSize size = image.size;\nCGFloat scale = MAX(size.height, maxHeight) / size.height;\nCGRect frame = CGRectMake(0, 0, size.width*scale, size.height*scale);\n</code></pre>\n"}], "owner": {"reputation": 3078, "user_id": 2481247, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/309c17907a3970f475f292e3912b2b7a?s=128&d=identicon&r=PG", "display_name": "George", "link": "https://stackoverflow.com/users/2481247/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568728839, "creation_date": 1568638432, "question_id": 57957342, "link": "https://stackoverflow.com/questions/57957342/how-to-add-black-color-area-to-uiimage-ios", "title": "How to add black color area to UIImage ios", "body": "<p>I am working with image. I have a cropping functionality which only allows cropping in 2:1 ratio (width:height ratio). So if the image is in other ratio the user can zoom out and fit the image inside the cropping window but I want to add black area to the side of the image so that the resultant image is always in 2:1 ratio.</p>\n\n<p>Please see the screenshot</p>\n\n<p><a href=\"https://i.stack.imgur.com/lJzEb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lJzEb.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is the code I am using:</p>\n\n<pre><code>#Check the ratio\n#Get the resultant size ie. resultant width and height\n\n//crashes here\nUIGraphicsBeginImageContextWithOptions(CGSizeMake(newImageWidth, newImageHeight), YES, 0.0);\nCGContextRef context = UIGraphicsGetCurrentContext();\nUIGraphicsPushContext(context);\nCGPoint origin = CGPointMake((newImageWidth - image.size.width) / 2.0f, (newImageHeight - image.size.height) / 2.0f);\n[image drawAtPoint:origin];\nUIGraphicsPopContext();\n</code></pre>\n\n<p>This code is working fine in iOS app but when I use this code in app extension it crashes because of memory leak. It crashes in UIGraphicsBeginImageContextWithOptions.</p>\n\n<p>Is there any other way to add black area to the image without memory leak?</p>\n\n<p>Hope you understand the problem.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ios", "objective-c", "swift", "xcode"], "comments": [{"owner": {"reputation": 22954, "user_id": 1979882, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/N9wiX.jpg?s=128&g=1", "display_name": "Vyacheslav", "link": "https://stackoverflow.com/users/1979882/vyacheslav"}, "edited": false, "score": 1, "creation_date": 1568632617, "post_id": 57955570, "comment_id": 102323306, "body": "post more code, please"}, {"owner": {"reputation": 95, "user_id": 6493779, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ckgxKO1IKEI/AAAAAAAAAAI/AAAAAAAAAD4/USprrCOGGg0/photo.jpg?sz=128", "display_name": "mentoxska", "link": "https://stackoverflow.com/users/6493779/mentoxska"}, "reply_to_user": {"reputation": 22954, "user_id": 1979882, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/N9wiX.jpg?s=128&g=1", "display_name": "Vyacheslav", "link": "https://stackoverflow.com/users/1979882/vyacheslav"}, "edited": false, "score": 0, "creation_date": 1568633007, "post_id": 57955570, "comment_id": 102323522, "body": "@Vyacheslav added more code"}, {"owner": {"reputation": 521, "user_id": 4499186, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YajUH.jpg?s=128&g=1", "display_name": "muca", "link": "https://stackoverflow.com/users/4499186/muca"}, "edited": false, "score": 0, "creation_date": 1617367520, "post_id": 57955570, "comment_id": 118290016, "body": "Hi, i am using the same library and gettig the same error without finding a solution... did you get to run your code?"}, {"owner": {"reputation": 95, "user_id": 6493779, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ckgxKO1IKEI/AAAAAAAAAAI/AAAAAAAAAD4/USprrCOGGg0/photo.jpg?sz=128", "display_name": "mentoxska", "link": "https://stackoverflow.com/users/6493779/mentoxska"}, "reply_to_user": {"reputation": 521, "user_id": 4499186, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YajUH.jpg?s=128&g=1", "display_name": "muca", "link": "https://stackoverflow.com/users/4499186/muca"}, "edited": false, "score": 0, "creation_date": 1617367702, "post_id": 57955570, "comment_id": 118290097, "body": "@muca No I believe I couldn\u2019t find a solution (have no objc skills whatsoever anyway)"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 6493779, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ckgxKO1IKEI/AAAAAAAAAAI/AAAAAAAAAD4/USprrCOGGg0/photo.jpg?sz=128", "display_name": "mentoxska", "link": "https://stackoverflow.com/users/6493779/mentoxska"}, "edited": false, "score": 0, "creation_date": 1568635420, "post_id": 57956427, "comment_id": 102324772, "body": "define as empty existed preprocessor variable ? I don&#39;t quite get it ....code you provided is the same as what I tried and I already mentioned it in my post (not working / got more errors).. Can you please give me exact solution ?"}], "tags": [], "owner": {"reputation": 22954, "user_id": 1979882, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/N9wiX.jpg?s=128&g=1", "display_name": "Vyacheslav", "link": "https://stackoverflow.com/users/1979882/vyacheslav"}, "is_accepted": false, "score": 1, "last_activity_date": 1568635246, "last_edit_date": 1592644375, "creation_date": 1568635246, "answer_id": 57956427, "question_id": 57955570, "link": "https://stackoverflow.com/questions/57955570/error-expected-identifier-or-after-usage-of-old-objective-c-library-in-swi/57956427#57956427", "title": "Error : Expected identifier or &#39;(&#39; after usage of old Objective C library in Swift project through bridging header", "body": "<p>In this case:</p>\n<h1>define CLIENT_NET_API extern &quot;C&quot;</h1>\n<p>Says, let <code>CLIENT_NET_API</code> be <code>extern &quot;C&quot;</code></p>\n<p>So, in your case you just define as <code>empty existed preprocessor variable</code></p>\n<pre><code>#ifdef __cplusplus\nextern &quot;C&quot; {\n#endif\n\n#define CLIENT_NET_API \n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 6493779, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ckgxKO1IKEI/AAAAAAAAAAI/AAAAAAAAAD4/USprrCOGGg0/photo.jpg?sz=128", "display_name": "mentoxska", "link": "https://stackoverflow.com/users/6493779/mentoxska"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568707137, "creation_date": 1568632212, "last_edit_date": 1568707137, "question_id": 57955570, "link": "https://stackoverflow.com/questions/57955570/error-expected-identifier-or-after-usage-of-old-objective-c-library-in-swi", "title": "Error : Expected identifier or &#39;(&#39; after usage of old Objective C library in Swift project through bridging header", "body": "<p>I have quite low experience with Objective C as I started learning iOS development using Swift and I need to use a older ObjC library.</p>\n\n<p>My netsdk.h library (file has over 50k lines)</p>\n\n<pre><code>#ifndef DHNETSDK_H\n#define DHNETSDK_H\n\n#if (defined(WIN32) || defined(_WIN32) || defined(_WIN64))\n\n   ... \n#else    //non-windows\n\n    #define CLIENT_NET_API extern \"C\"\n    #define CALL_METHOD \n    #define CALLBACK\n    ...\n</code></pre>\n\n<p>Basically after reading some problems related to this one I think there is problem with <code>extern \"C\"</code> on the next line </p>\n\n<pre><code>...\n#define CLIENT_NET_API extern \"C\"\n...\n</code></pre>\n\n<p>Due to this  I am getting errors on many lines that use CLIENT_NET_API like </p>\n\n<pre><code>expected identifier or '('\nExpanded from macro 'CLIENT_NET_API'\n</code></pre>\n\n<p>My first try was to wrap <code>#define CLIENT_NET_API extern \"C\"</code>\ninto </p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n#define CLIENT_NET_API \n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>but then I am getting error <code>\"C does not support default arguments\"</code> on all lines using CLIENT_NET_API\nfor example these</p>\n\n<pre><code>CLIENT_NET_API BOOL CALL_METHOD CLIENT_StartBackUpCase(LLONG lLoginID, const NET_IN_START_CASE_BACK_UP* pstInParam, NET_OUT_START_CASE_BACK_UP *pstOutParam, int nWaitTime = NET_INTERFACE_DEFAULT_TIMEOUT);\n\nCLIENT_NET_API BOOL CALL_METHOD CLIENT_StopBackUpCase(LLONG lLoginID, const NET_IN_STOP_CASE_BACK_UP* pstInParam, NET_OUT_STOP_CASE_BACK_UP *pstOutParam, int nWaitTime = NET_INTERFACE_DEFAULT_TIMEOUT);\n</code></pre>\n\n<p>I think it should be wrapped in some other way but I couldn't find a example with <code>#define</code> and <code>extern</code> keywords on the same line </p>\n"}, {"tags": ["ios", "objective-c", "uidatepicker"], "comments": [{"owner": {"reputation": 3388, "user_id": 2229783, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eXE2L.jpg?s=128&g=1", "display_name": "Roman Podymov", "link": "https://stackoverflow.com/users/2229783/roman-podymov"}, "edited": false, "score": 0, "creation_date": 1568623670, "post_id": 57952547, "comment_id": 102318714, "body": "What iOS version do you use?"}, {"owner": {"reputation": 6962, "user_id": 5020932, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/3DCVM.jpg?s=128&g=1", "display_name": "Mahendra", "link": "https://stackoverflow.com/users/5020932/mahendra"}, "reply_to_user": {"reputation": 3388, "user_id": 2229783, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eXE2L.jpg?s=128&g=1", "display_name": "Roman Podymov", "link": "https://stackoverflow.com/users/2229783/roman-podymov"}, "edited": false, "score": 0, "creation_date": 1568624605, "post_id": 57952547, "comment_id": 102319157, "body": "Xcode 10.3, iOS version 12.4! (using simulator)"}, {"owner": {"reputation": 77129, "user_id": 2783370, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/7VHeO.jpg?s=128&g=1", "display_name": "Anbu.Karthik", "link": "https://stackoverflow.com/users/2783370/anbu-karthik"}, "edited": false, "score": 0, "creation_date": 1568625401, "post_id": 57952547, "comment_id": 102319580, "body": "show the code of <code>UIControlEventValueChanged</code>"}, {"owner": {"reputation": 13606, "user_id": 4601900, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bcdc767c3c8d2d70339eb709ce6a30a1?s=128&d=identicon&r=PG&f=1", "display_name": "Prashant Tukadiya", "link": "https://stackoverflow.com/users/4601900/prashant-tukadiya"}, "edited": false, "score": 0, "creation_date": 1568628333, "post_id": 57952547, "comment_id": 102321116, "body": "What is your ` toDate` ?? Please show us value of maxdate and minDate"}, {"owner": {"reputation": 3388, "user_id": 2229783, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eXE2L.jpg?s=128&g=1", "display_name": "Roman Podymov", "link": "https://stackoverflow.com/users/2229783/roman-podymov"}, "edited": false, "score": 0, "creation_date": 1568644918, "post_id": 57952547, "comment_id": 102330268, "body": "Can you reproduce it on any iOS 12.4 simulator?"}, {"owner": {"reputation": 6962, "user_id": 5020932, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/3DCVM.jpg?s=128&g=1", "display_name": "Mahendra", "link": "https://stackoverflow.com/users/5020932/mahendra"}, "reply_to_user": {"reputation": 3388, "user_id": 2229783, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eXE2L.jpg?s=128&g=1", "display_name": "Roman Podymov", "link": "https://stackoverflow.com/users/2229783/roman-podymov"}, "edited": false, "score": 0, "creation_date": 1568781593, "post_id": 57952547, "comment_id": 102378741, "body": "@RomanPodymov, it is happening in real device too. I&#39;ve tested it on iPhone 6+ and 6s+."}, {"owner": {"reputation": 6962, "user_id": 5020932, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/3DCVM.jpg?s=128&g=1", "display_name": "Mahendra", "link": "https://stackoverflow.com/users/5020932/mahendra"}, "reply_to_user": {"reputation": 77129, "user_id": 2783370, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/7VHeO.jpg?s=128&g=1", "display_name": "Anbu.Karthik", "link": "https://stackoverflow.com/users/2783370/anbu-karthik"}, "edited": false, "score": 0, "creation_date": 1568782549, "post_id": 57952547, "comment_id": 102378940, "body": "@Anbu.Karthik I have updated the question"}, {"owner": {"reputation": 6962, "user_id": 5020932, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/3DCVM.jpg?s=128&g=1", "display_name": "Mahendra", "link": "https://stackoverflow.com/users/5020932/mahendra"}, "reply_to_user": {"reputation": 13606, "user_id": 4601900, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bcdc767c3c8d2d70339eb709ce6a30a1?s=128&d=identicon&r=PG&f=1", "display_name": "Prashant Tukadiya", "link": "https://stackoverflow.com/users/4601900/prashant-tukadiya"}, "edited": false, "score": 0, "creation_date": 1568782570, "post_id": 57952547, "comment_id": 102378949, "body": "@PrashantTukadiya I&#39;ve updated the question"}, {"owner": {"reputation": 77129, "user_id": 2783370, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/7VHeO.jpg?s=128&g=1", "display_name": "Anbu.Karthik", "link": "https://stackoverflow.com/users/2783370/anbu-karthik"}, "edited": false, "score": 0, "creation_date": 1568783038, "post_id": 57952547, "comment_id": 102379084, "body": "@Mahendra - where you created this I mean where u called this method <code>datePickerValueChanged</code>"}, {"owner": {"reputation": 1361, "user_id": 2515456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/rOmMR.jpg?s=128&g=1", "display_name": "Karthick Ramesh", "link": "https://stackoverflow.com/users/2515456/karthick-ramesh"}, "edited": false, "score": 0, "creation_date": 1569975146, "post_id": 57952547, "comment_id": 102766495, "body": "Can you share project codebase if possible?"}], "answers": [{"comments": [{"owner": {"reputation": 6962, "user_id": 5020932, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/3DCVM.jpg?s=128&g=1", "display_name": "Mahendra", "link": "https://stackoverflow.com/users/5020932/mahendra"}, "edited": false, "score": 0, "creation_date": 1569994471, "post_id": 58195369, "comment_id": 102769841, "body": "its not about setting date from date picker. When I scroll year in date picker view it sometimes jumps to random year as you see in above image. This issue the issue. Why is it scrolling to at random location?"}, {"owner": {"reputation": 382, "user_id": 6439127, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Rx80AkG5x70/AAAAAAAAAAI/AAAAAAAADgk/xAvBnffL8JQ/photo.jpg?sz=128", "display_name": "antonio yaphiar", "link": "https://stackoverflow.com/users/6439127/antonio-yaphiar"}, "reply_to_user": {"reputation": 6962, "user_id": 5020932, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/3DCVM.jpg?s=128&g=1", "display_name": "Mahendra", "link": "https://stackoverflow.com/users/5020932/mahendra"}, "edited": false, "score": 0, "creation_date": 1570001777, "post_id": 58195369, "comment_id": 102772480, "body": "Have you tried the code? Handling when the label changed is better than nothing. I have checked your pods. @Mahendra  Check your collectionview pod feature pod &#39;RACollectionViewReorderableTripletLayout&#39; --&gt; Reorder cells by long pressing and dragging it !  Try to remove or disable that pod when testing on this feature"}, {"owner": {"reputation": 6962, "user_id": 5020932, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/3DCVM.jpg?s=128&g=1", "display_name": "Mahendra", "link": "https://stackoverflow.com/users/5020932/mahendra"}, "edited": false, "score": 0, "creation_date": 1570082958, "post_id": 58195369, "comment_id": 102803050, "body": "Yes, I tried your code but it does not solve the asked question and let me know you that removing <code>RACollectionViewReorderableTripletLayout</code> has no effect on date picker view."}], "tags": [], "owner": {"reputation": 382, "user_id": 6439127, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Rx80AkG5x70/AAAAAAAAAAI/AAAAAAAADgk/xAvBnffL8JQ/photo.jpg?sz=128", "display_name": "antonio yaphiar", "link": "https://stackoverflow.com/users/6439127/antonio-yaphiar"}, "is_accepted": false, "score": -1, "last_activity_date": 1569991794, "creation_date": 1569991794, "answer_id": 58195369, "question_id": 57952547, "link": "https://stackoverflow.com/questions/57952547/uidatepicker-while-selecting-date-it-jumps-to-any-random-date/58195369#58195369", "title": "UIDatePicker: While selecting date, it jumps to any random date", "body": "<p>You can check whenever your picker want to change the label value by comparing it with the min and max date, here the code *please swap the Ascending and descending if my code do wrong</p>\n\n<pre><code>- (IBAction)datePickerValueChanged:(id)sender {   \n    NSDateFormatter *dateFormat=[[NSDateFormatter alloc]init];   [dateFormat setDateFormat:@\"yyyy-MM-dd\"];\n    NSDate * maxDate = [gregorian dateByAddingComponents: comps toDate: currentDate options: NSCalendarMatchStrictly];\n[comps setYear: -50];\n    NSDate * minDate = [gregorian dateByAddingComponents: comps toDate: currentDate options: NSCalendarMatchStrictly];\n    NSDate * curDate = self.dtPicker.date;\n    if(([curDate compare:minDate] == NSOrderedAscending)&amp;&amp; ([curDate compare:maxDate] == NSOrderedDescending)){\n      self.txtBirthday.text = [NSString stringWithFormat:@\"%@\",[dateFormat stringFromDate:self.dtPicker.date]];\n    }\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 565, "user_id": 4148962, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-aUUDlUxNm3w/AAAAAAAAAAI/AAAAAAAAADs/c-F_Jr4eHLg/photo.jpg?sz=128", "display_name": "mahbaleshwar hegde", "link": "https://stackoverflow.com/users/4148962/mahbaleshwar-hegde"}, "reply_to_user": {"reputation": 6962, "user_id": 5020932, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/3DCVM.jpg?s=128&g=1", "display_name": "Mahendra", "link": "https://stackoverflow.com/users/5020932/mahendra"}, "edited": false, "score": 1, "creation_date": 1570027886, "post_id": 58197014, "comment_id": 102786132, "body": "@Mahendra why downvoted. You have not given proper information. There is a problem in your code. This is a working code. Please remove downvote"}, {"owner": {"reputation": 382, "user_id": 6439127, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Rx80AkG5x70/AAAAAAAAAAI/AAAAAAAADgk/xAvBnffL8JQ/photo.jpg?sz=128", "display_name": "antonio yaphiar", "link": "https://stackoverflow.com/users/6439127/antonio-yaphiar"}, "edited": false, "score": 0, "creation_date": 1570069254, "post_id": 58197014, "comment_id": 102800279, "body": "just downvote this post, leave his alone @mahbaleshwarhegde"}, {"owner": {"reputation": 6962, "user_id": 5020932, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/3DCVM.jpg?s=128&g=1", "display_name": "Mahendra", "link": "https://stackoverflow.com/users/5020932/mahendra"}, "edited": false, "score": 0, "creation_date": 1570082443, "post_id": 58197014, "comment_id": 102802878, "body": "I&#39;m able to get the proper date from date picker. The issue is jump of the date picker...can you provide any other solution. You code is just for the configure and get date from the date picker which I already did and working fine."}, {"owner": {"reputation": 6962, "user_id": 5020932, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/3DCVM.jpg?s=128&g=1", "display_name": "Mahendra", "link": "https://stackoverflow.com/users/5020932/mahendra"}, "edited": false, "score": 0, "creation_date": 1570082520, "post_id": 58197014, "comment_id": 102802915, "body": "Even my answer is downvoted without any reason...do you have any explanation?"}], "tags": [], "owner": {"reputation": 565, "user_id": 4148962, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-aUUDlUxNm3w/AAAAAAAAAAI/AAAAAAAAADs/c-F_Jr4eHLg/photo.jpg?sz=128", "display_name": "mahbaleshwar hegde", "link": "https://stackoverflow.com/users/4148962/mahbaleshwar-hegde"}, "is_accepted": false, "score": -2, "last_activity_date": 1570001513, "creation_date": 1570001513, "answer_id": 58197014, "question_id": 57952547, "link": "https://stackoverflow.com/questions/57952547/uidatepicker-while-selecting-date-it-jumps-to-any-random-date/58197014#58197014", "title": "UIDatePicker: While selecting date, it jumps to any random date", "body": "<pre><code>class ViewController: UIViewController {\n\n    @IBOutlet weak var datePicker: UIDatePicker!\n    @IBOutlet weak var label: UILabel!\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n        // Do any additional setup after loading the view.\n        self.configureDatePicker()\n\n\n    }\n\n\n    private func configureDatePicker() {\n\n        let calendar = Calendar(identifier: .gregorian)\n        // 17 years less\n        let minimumDate = calendar.date(byAdding: .year, value: -17, to: Date())\n        // 50 years max. 17 + 33 = 50\n        let maximumDate = calendar.date(byAdding: .year, value: -50, to: Date())\n        self.datePicker.minimumDate = minimumDate\n        self.datePicker.maximumDate = maximumDate\n    }\n\n\n    @IBAction func onDatePickerChanged(sender: UIDatePicker) {\n\n        let dateFormtter = DateFormatter()\n        dateFormtter.dateStyle = .medium\n        self.label.text = dateFormtter.string(from: sender.date)\n    }\n}\n</code></pre>\n\n<p>This code works fine without any issue. I think you have some issue in your code. UIDatePicker is resetting in some places.</p>\n"}, {"comments": [{"owner": {"reputation": 565, "user_id": 4148962, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh5.googleusercontent.com/-aUUDlUxNm3w/AAAAAAAAAAI/AAAAAAAAADs/c-F_Jr4eHLg/photo.jpg?sz=128", "display_name": "mahbaleshwar hegde", "link": "https://stackoverflow.com/users/4148962/mahbaleshwar-hegde"}, "edited": false, "score": 0, "creation_date": 1570027841, "post_id": 58197927, "comment_id": 102786117, "body": "Answering your own question and not adding proper information in the question and downvoting to working answers are not acceptable by community. -1"}], "tags": [], "owner": {"reputation": 6962, "user_id": 5020932, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/3DCVM.jpg?s=128&g=1", "display_name": "Mahendra", "link": "https://stackoverflow.com/users/5020932/mahendra"}, "is_accepted": true, "score": 1, "last_activity_date": 1570014526, "last_edit_date": 1570014526, "creation_date": 1570005033, "answer_id": 58197927, "question_id": 57952547, "link": "https://stackoverflow.com/questions/57952547/uidatepicker-while-selecting-date-it-jumps-to-any-random-date/58197927#58197927", "title": "UIDatePicker: While selecting date, it jumps to any random date", "body": "<p>The strange thing is that for the When I just put(drag &amp; drop) <code>UIDatePicker</code> View on a screen just to test its scrolling issue. When I scroll date time picker view then also it was scrolling at random location.</p>\n\n<p>I feel that it is the issue with third party library.</p>\n\n<p>After many hours of debugging and trail-run, I finally found the third party library which was the source of this issue. </p>\n\n<p>Actually is was the category name is <code>UITableView+SPXRevealAdditions</code>.</p>\n\n<p>When I removed it <code>UIDatePicker</code> is working fine and when I re-added the issue is started occurring.</p>\n\n<p>It is really very strange but It worked for me.:D</p>\n\n<p><strong>Update:</strong></p>\n\n<p>I wanted the that 3rd party too. So what I did id added a dummy pan gesture in <code>viewDidLoadMethod:</code>.</p>\n\n<pre><code>UIPanGestureRecognizer *p = [[UIPanGestureRecognizer alloc] initWithTarget:nil action:@selector(doNothing)];\n[self.dtPicker addGestureRecognizer:p];\n</code></pre>\n\n<p>and the dummy method.</p>\n\n<pre><code>- (void)doNothing {\n    printf(\"do nothing\");\n}\n</code></pre>\n\n<p>This solved my problem and Now the <code>UIDatePicker</code> is working fine and also third party library too...cheers...:D.</p>\n"}], "owner": {"reputation": 6962, "user_id": 5020932, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/3DCVM.jpg?s=128&g=1", "display_name": "Mahendra", "link": "https://stackoverflow.com/users/5020932/mahendra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 581, "favorite_count": 0, "accepted_answer_id": 58197927, "answer_count": 3, "score": 1, "last_activity_date": 1570014526, "creation_date": 1568620519, "last_edit_date": 1592644375, "question_id": 57952547, "link": "https://stackoverflow.com/questions/57952547/uidatepicker-while-selecting-date-it-jumps-to-any-random-date", "title": "UIDatePicker: While selecting date, it jumps to any random date", "body": "<p>I have been trying to fix this issue since so long but did not find any way to sort this out.</p>\n<p>When I'm trying to select a year sometimes the year component of the date picker jumps to a random year. (The same thing happens with date and month selection)</p>\n<p>The data picker is contained in a <code>UIView</code> and I have created an <code>IBOutlet</code> for it.</p>\n<pre><code>- (void)setupforBirthdates {\n\n[self.dtPicker setDatePickerMode: UIDatePickerModeDate];\n\n\nNSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier: NSCalendarIdentifierGregorian];\nNSDate *currentDate = [NSDate date];\nNSDateComponents * comps = [[NSDateComponents alloc] init];\n[comps setYear: -17];\nNSDate * maxDate = [gregorian dateByAddingComponents: comps toDate: currentDate options: NSCalendarMatchStrictly];\n[comps setYear: -50];\nNSDate * minDate = [gregorian dateByAddingComponents: comps toDate: currentDate options: NSCalendarMatchStrictly];\n\n[self.dtPicker setMinimumDate:minDate];\n[self.dtPicker setMaximumDate:maxDate];\n[self.dtPicker setDate:maxDate];\n\n}\n</code></pre>\n<p><strong>ISSUE</strong> See the below image...</p>\n<p><a href=\"https://i.stack.imgur.com/CX00d.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CX00d.gif\" alt=\"enter image description here\" /></a></p>\n<p>I thought that it may be due to some 3rd party libraries this is happening. I have the following pod in my project</p>\n<pre><code>pod 'AFNetworking'\npod 'GoogleMaps'\npod 'GooglePlaces' \npod 'Fabric'\npod 'Crashlytics'\npod 'RACollectionViewReorderableTripletLayout'\npod 'FBSDKLoginKit'\npod 'Socket.IO-Client-Swift', '~&gt; 13.3.0'\n</code></pre>\n<p>How can I solve this issue?</p>\n<p>Any help/suggestions?</p>\n<p><strong>UPDATE</strong></p>\n<p>I what to restrict user to select birth year from 17 to 50 year only so the <code>minDate</code> will be 17 years back from current year\n<code>maxDate</code> will be 50 years back from the current year</p>\n<p><strong>The issue is also coming if I don't set <code>minDate</code> and <code>maxDate</code></strong></p>\n<p><strong>Tested the following case too</strong></p>\n<blockquote>\n<ul>\n<li><p>I just drag and drop new date picker on screen. I did not set any min/max date, nor connect an IBOutlet and I run app and when I scroll to any date the same issue is coming</p>\n</li>\n<li><p>You will be surprised that I have created a custom date picker using <code>UIPickerView</code> and the issue is still there.</p>\n</li>\n<li><p>When I have created a new demo project and copy pasted the code in demo project then this issue is not coming. I've tested it many times on demo project the issue is not coming.</p>\n</li>\n</ul>\n</blockquote>\n<p>The following func. is called when I change the date in date picker.</p>\n<pre><code>- (IBAction)datePickerValueChanged:(id)sender {\n  NSDateFormatter *dateFormat=[[NSDateFormatter alloc]init];\n  [dateFormat setDateFormat:@&quot;yyyy-MM-dd&quot;];\n\n  self.txtBirthday.text = [NSString stringWithFormat:@&quot;%@&quot;,[dateFormat  stringFromDate:self.dtPicker.date]];\n\n}\n</code></pre>\n"}, {"tags": ["objective-c"], "comments": [{"owner": {"reputation": 297030, "user_id": 1226963, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/yjY1E.png?s=128&g=1", "display_name": "rmaddy", "link": "https://stackoverflow.com/users/1226963/rmaddy"}, "edited": false, "score": 1, "creation_date": 1568610752, "post_id": 57950659, "comment_id": 102313711, "body": "Yes, <code>removeObjectForKey:</code> releases the removed object. It would be a terrible implementation if it didn&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 297030, "user_id": 1226963, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/yjY1E.png?s=128&g=1", "display_name": "rmaddy", "link": "https://stackoverflow.com/users/1226963/rmaddy"}, "edited": false, "score": 0, "creation_date": 1568650023, "post_id": 57951622, "comment_id": 102332999, "body": "<i>&quot;ARC keeps track of number of objects that is pointing to some other object and it will remove it as soon as the count reaches 0.&quot;</i> - that is misleading. That has nothing to do with ARC. ARC means that calls to <code>retain</code> and <code>release</code> are automatically added to the code. That&#39;s all ARC does. An object is deallocated once its retain count reaches 0 whether you use ARC or not."}], "tags": [], "owner": {"reputation": 45631, "user_id": 5623035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kVGWt.jpg?s=128&g=1", "display_name": "Mojtaba Hosseini", "link": "https://stackoverflow.com/users/5623035/mojtaba-hosseini"}, "is_accepted": true, "score": 1, "last_activity_date": 1568616384, "creation_date": 1568616384, "answer_id": 57951622, "question_id": 57950659, "link": "https://stackoverflow.com/questions/57950659/is-a-value-inside-an-nsdictionary-released-when-removed/57951622#57951622", "title": "Is a value inside an NSDictionary released when removed?", "body": "<p>If your project uses <em>ARC</em> and that dictionary is the only thing that is referencing to those values, <strong>yes</strong>. it will be remove permanently.</p>\n\n<p><strong>ARC</strong> keeps track of number of objects that is pointing to some other object and it will remove it as soon as the count reaches 0.</p>\n\n<p>so adding to dictionary -> reference count += 1</p>\n\n<p>removing from dictionary -> reference count -= 1</p>\n\n<p>Somewhe</p>\n"}], "owner": {"reputation": 880, "user_id": 8165144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VRANT.jpg?s=128&g=1", "display_name": "Rewieer", "link": "https://stackoverflow.com/users/8165144/rewieer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 57951622, "answer_count": 1, "score": 0, "last_activity_date": 1569948258, "creation_date": 1568610370, "last_edit_date": 1569948258, "question_id": 57950659, "link": "https://stackoverflow.com/questions/57950659/is-a-value-inside-an-nsdictionary-released-when-removed", "title": "Is a value inside an NSDictionary released when removed?", "body": "<p>I have something along the line of this :</p>\n\n<pre><code>@implementation ImageLoader\nNSMutableDictionary *_tasks;\n\n- (void) loadImageWithURL:(NSURL *)url callback:(SMLoaderCallback)callback {\n    NSMutableArray *taskList = [_tasks objectForKey:urlString];\n    if (taskList == nil) {\n        taskList = [[NSMutableArray alloc] initWithCapacity:5];\n        [taskList addObject:callback];\n        [_tasks setObject:taskList forKey:urlString];\n\n        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^{\n            dispatch_async(dispatch_get_main_queue(), ^{\n                UIImage *image = [[UIImage alloc] initWithData:data];\n                for (SMLoaderCallback cb in taskList) {\n                    cb(image, nil);\n                }\n                [_tasks removeObjectForKey:url.absoluteString];\n            });\n        });\n    } else {\n        [taskList addObject:callback];\n    }\n}\n@end\n</code></pre>\n\n<p>In here, I'm trying to queue up image downloads to gain performance (as an exercise only). So I'm keeping a NSDictionary that maps an URL with an array of callbacks to be called whenever the data is downloaded.</p>\n\n<p>Once the image is downloaded, I no longer need this array, so I remove it from the dictionary.</p>\n\n<p>I would like to know if, in this code (with ARC enabled), my array along with the callbacks are correctly released when I call <code>[_tasks removeObjectForKey:url.absoluteString]</code>.</p>\n"}, {"tags": ["objective-c", "file-upload"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5624875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e799794ff751397dc5b0cae29c1c916?s=128&d=identicon&r=PG&f=1", "display_name": "Jmik", "link": "https://stackoverflow.com/users/5624875/jmik"}, "edited": false, "score": 0, "creation_date": 1568611941, "post_id": 57948224, "comment_id": 102313997, "body": "Thanks, for the suggestion, but the above doesn&#39;t solve the issue :) If the headers are formatted wrongly, I should get a http response error code. But nothing is returned and the function still doesn&#39;t execute, at all. Thanks,"}, {"owner": {"reputation": 10158, "user_id": 2432053, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/0jpKi.jpg?s=128&g=1", "display_name": "arturdev", "link": "https://stackoverflow.com/users/2432053/arturdev"}, "reply_to_user": {"reputation": 23, "user_id": 5624875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e799794ff751397dc5b0cae29c1c916?s=128&d=identicon&r=PG&f=1", "display_name": "Jmik", "link": "https://stackoverflow.com/users/5624875/jmik"}, "edited": false, "score": 0, "creation_date": 1568615682, "post_id": 57948224, "comment_id": 102315207, "body": "Are you sure your function is being executed at all?"}, {"owner": {"reputation": 23, "user_id": 5624875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e799794ff751397dc5b0cae29c1c916?s=128&d=identicon&r=PG&f=1", "display_name": "Jmik", "link": "https://stackoverflow.com/users/5624875/jmik"}, "edited": false, "score": 0, "creation_date": 1568637356, "post_id": 57948224, "comment_id": 102325832, "body": "yes, function is executed 2019-09-16 14:32:27.545591+0200 file_upload[88334:1207028] I ran just fine! Program ended with exit code: 0, but its like dataTask is never called?"}, {"owner": {"reputation": 10158, "user_id": 2432053, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/0jpKi.jpg?s=128&g=1", "display_name": "arturdev", "link": "https://stackoverflow.com/users/2432053/arturdev"}, "reply_to_user": {"reputation": 23, "user_id": 5624875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e799794ff751397dc5b0cae29c1c916?s=128&d=identicon&r=PG&f=1", "display_name": "Jmik", "link": "https://stackoverflow.com/users/5624875/jmik"}, "edited": false, "score": 0, "creation_date": 1568641202, "post_id": 57948224, "comment_id": 102328042, "body": "I think we need a sample app in order to understand the root cause of the issue"}, {"owner": {"reputation": 23, "user_id": 5624875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e799794ff751397dc5b0cae29c1c916?s=128&d=identicon&r=PG&f=1", "display_name": "Jmik", "link": "https://stackoverflow.com/users/5624875/jmik"}, "edited": false, "score": 0, "creation_date": 1568644204, "post_id": 57948224, "comment_id": 102329843, "body": "Ok here you go, link to test app. [<a href=\"https://gist.github.com/jemik/bd2c4b845edab4de79e737ba53dfaa5a#file-file_upload-m]\" rel=\"nofollow noreferrer\">gist.github.com/jemik/&hellip;</a> Unfortnunally I cant provide the full flask app, but here is a snippet for the upload function <code>@app.route(&quot;&#47;fileuploader&quot;,methods = [&#39;POST&#39;, &#39;GET&#39;]) def fileuploader():     if request.method == &#39;POST&#39;:         file_path = os.path.join(os.path.dirname(os.path.realpath(__file__)),SAM&zwnj;&#8203;PLE_PATH)         file = request.files[&#39;file&#39;]         if file:             filename = secure_filename(file.filename)             file.save( os.path.join(file_path, filename ))</code>"}, {"owner": {"reputation": 10158, "user_id": 2432053, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/0jpKi.jpg?s=128&g=1", "display_name": "arturdev", "link": "https://stackoverflow.com/users/2432053/arturdev"}, "reply_to_user": {"reputation": 23, "user_id": 5624875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e799794ff751397dc5b0cae29c1c916?s=128&d=identicon&r=PG&f=1", "display_name": "Jmik", "link": "https://stackoverflow.com/users/5624875/jmik"}, "edited": false, "score": 0, "creation_date": 1568668717, "post_id": 57948224, "comment_id": 102340046, "body": "If you&#39;re really trying to call the uploadFile method from the main function, you will not succeed, because the app will be terminated right after starting. In order to test your method it&#39;d better to create a Single View Application and test your method in the AppDelegate or in a ViewController class..."}, {"owner": {"reputation": 23, "user_id": 5624875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e799794ff751397dc5b0cae29c1c916?s=128&d=identicon&r=PG&f=1", "display_name": "Jmik", "link": "https://stackoverflow.com/users/5624875/jmik"}, "edited": false, "score": 0, "creation_date": 1568728657, "post_id": 57948224, "comment_id": 102361444, "body": "Im not :) this is just the single function, as an example.  I can&#39;t share the entire source of the project. Long story short. The app is monitoring a dir for changes, and when a new file is added, or an existing is modified, the file is uploaded to a analysis service, and the response is then added as a JSON object, and finally posted to an Elastic backend. So, the app really never terminates."}], "tags": [], "owner": {"reputation": 10158, "user_id": 2432053, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/0jpKi.jpg?s=128&g=1", "display_name": "arturdev", "link": "https://stackoverflow.com/users/2432053/arturdev"}, "is_accepted": false, "score": 0, "last_activity_date": 1568583112, "last_edit_date": 1568583112, "creation_date": 1568582093, "answer_id": 57948224, "question_id": 57947923, "link": "https://stackoverflow.com/questions/57947923/file-upload-to-web-service-in-objective-c-not-working/57948224#57948224", "title": "FIle upload to web service, in Objective C not working", "body": "<p>Seems you've forgotten to set the content type header:</p>\n\n<pre><code>NSString *contentType = [NSString stringWithFormat:@\"multipart/form-data; boundary=%@\",boundary];\n[request addValue:contentType forHTTPHeaderField: @\"Content-Type\"];\n</code></pre>\n\n<p>Also, move this:     </p>\n\n<pre><code>[body appendData:[@\"\\r\\n\" dataUsingEncoding:NSUTF8StringEncoding]];\n</code></pre>\n\n<p>to the end of <code>for</code> block rather than outside of it, because you need this line-end for every part.</p>\n\n<p>And the last note: all <code>Content-Disposition:</code> should end with two <code>\\r\\n</code>, so add one after <code>filename=\\\"%@\\\"\\r\\n</code> -> <code>filename=\\\"%@\\\"\\r\\n\\r\\n</code> </p>\n"}], "owner": {"reputation": 23, "user_id": 5624875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e799794ff751397dc5b0cae29c1c916?s=128&d=identicon&r=PG&f=1", "display_name": "Jmik", "link": "https://stackoverflow.com/users/5624875/jmik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568818277, "creation_date": 1568578959, "last_edit_date": 1568818277, "question_id": 57947923, "link": "https://stackoverflow.com/questions/57947923/file-upload-to-web-service-in-objective-c-not-working", "title": "FIle upload to web service, in Objective C not working", "body": "<p>I need some extra set of eyes.\nthe below code is not firing at all:</p>\n\n<pre><code>NSString *apiUrl = @\"&lt;WEB SERVICE URL&gt;\";\nNSString *theFileName = [file_path lastPathComponent];\n\nNSArray *parameters = @[ @{ @\"name\": @\"file\", @\"fileName\": theFileName, @\"file_path\" : file_path } ];\nNSString *boundary = @\"---------------------------14737809831466499882746641449\";\nNSData *imageData = [NSData dataWithContentsOfFile:file_path];\nNSError *error;\nNSMutableData *body = [NSMutableData data];\nfor (NSDictionary *param in parameters) {\n     [body appendData:[[NSString stringWithFormat:@\"--%@\\r\\n\", boundary] dataUsingEncoding:NSUTF8StringEncoding]];\n    if (param[@\"fileName\"]) {\n        [body appendData:[[NSString stringWithFormat:@\"Content-Disposition:form-data; name=\\\"%@\\\"; filename=\\\"%@\\\"\\r\\n\",param[@\"name\"] , param[@\"fileName\"]] dataUsingEncoding:NSUTF8StringEncoding]];\n         [body appendData:[@\"Content-Type: application/octet-stream\\r\\n\\r\\n\" dataUsingEncoding:NSUTF8StringEncoding]];\n        [body appendData:imageData];\n        if (error) {\n            NSLog(@\"%@\", error);\n        }\n    } else {\n        [body appendData:[[NSString stringWithFormat:@\"Content-Disposition:form-data; name=\\\"%@\\\"\\r\\n\\r\\n\",param[@\"name\"]] dataUsingEncoding:NSUTF8StringEncoding]];\n        [body appendData:[[NSString stringWithFormat:@\"%@\", param[@\"value\"]] dataUsingEncoding:NSUTF8StringEncoding]];\n    }\n}\n[body appendData:[@\"\\r\\n\" dataUsingEncoding:NSUTF8StringEncoding]];\n[body appendData:[[NSString stringWithFormat:@\"--%@--\\r\\n\", boundary] dataUsingEncoding:NSUTF8StringEncoding]];\nNSData *postData = body;\n\nNSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:apiUrl]\n                                                       cachePolicy:NSURLRequestUseProtocolCachePolicy\n                                                   timeoutInterval:60.0];\n[request setHTTPMethod:@\"POST\"];\n[request setHTTPBody:postData];\n\nNSURLSession *session = [NSURLSession sharedSession];\nNSURLSessionDataTask *dataTask = [session dataTaskWithRequest:request\n                                            completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {\n                                                if (error) {\n                                                    NSLog(@\"%@\", error);\n                                                } else {\n                                                    NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *) response;\n                                                    NSLog(@\"%@\", httpResponse);\n                                                }\n                                            }];\n[dataTask resume];\n</code></pre>\n\n<p>Ive been looking at this all day, and can't seem to find, what I'm missing.</p>\n\n<p>Basically I'm trying to rewrite my old file upload, that uses sendSynchronousRequest, witch works, but is deprecated.</p>\n\n<p>Old working code.</p>\n\n<pre><code>    NSString * urlString = @\"&lt;WEB SERVICE URL&gt;\";\n        NSString *theFileName = [path lastPathComponent];\n        NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];\n        [request setURL:[NSURL URLWithString:urlString]];\n\n        [request setHTTPMethod:@\"POST\"];\n        NSMutableData *body = [NSMutableData data];\n        NSString *boundary = @\"---------------------------14737809831466499882746641449\";\n        NSString *contentType = [NSString stringWithFormat:@\"multipart/form-data; boundary=%@\",boundary];\n        [request addValue:contentType forHTTPHeaderField: @\"Content-Type\"];\n\n        NSData *imageData = [NSData dataWithContentsOfFile:path];\n\n        [body appendData:[[NSString stringWithFormat:@\"--%@\\r\\n\", boundary] dataUsingEncoding:NSUTF8StringEncoding]];\n        [body appendData:[[NSString stringWithFormat:@\"Content-Disposition: form-data; name=\\\"file\\\"; filename=\\\"%@\\\"\\r\\n\", theFileName] dataUsingEncoding:NSUTF8StringEncoding]];\n        [body appendData:[@\"Content-Type: application/octet-stream\\r\\n\\r\\n\" dataUsingEncoding:NSUTF8StringEncoding]];\n        [body appendData:imageData];\n        [body appendData:[@\"\\r\\n\" dataUsingEncoding:NSUTF8StringEncoding]];\n\n\n        // close form\n        [body appendData:[[NSString stringWithFormat:@\"--%@--\\r\\n\", boundary] dataUsingEncoding:NSUTF8StringEncoding]];\n\n\n        // setting the body of the post to the reqeust\n        [request setHTTPBody:body];\n\n\n        NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];\n        NSDictionary *dict=[NSJSONSerialization JSONObjectWithData:returnData options:NSJSONReadingMutableLeaves error:nil];\n\n\n        //NSLog(@\"File posted\");\n        return dict;\n    }else{\n       // NSLog(@\"upload failed\");\n    }\n</code></pre>\n\n<p>Been searching SO for pointers, but haven't managed to come up with a working solution.</p>\n"}, {"tags": ["objective-c"], "answers": [{"tags": [], "owner": {"reputation": 586, "user_id": 10021979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d301f62fba6aaa0ca338f3b17163ecbb?s=128&d=identicon&r=PG&f=1", "display_name": "Anjula S.", "link": "https://stackoverflow.com/users/10021979/anjula-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1568790917, "last_edit_date": 1568790917, "creation_date": 1568790497, "answer_id": 57986940, "question_id": 57945430, "link": "https://stackoverflow.com/questions/57945430/how-to-avoid-user-string-inputs-in-objective-c/57986940#57986940", "title": "How to Avoid User String Inputs in Objective-C", "body": "<p>Im not sure if you still require an answer . Im also fairly new so anyone feel free to add . Im not sure if this is meets your exact requirements but it does what you want it to . Instead of tryign to check for each and every data type what i suggest is check if the entered value is an integer or not . If it is do something else return the error message .Take a look at the below code .</p>\n\n<pre><code> int main(int argc, const char * argv[]) {\n\n char str[50] = {0};                  // init all to 0\n NSLog(@\"1. Apple 2. Orange 3. Mango 4. Banana\");\n NSLog(@\"Choose fruit:\");    // print buffer\n scanf(\"%s\",str);\n\n// you can create an NS foundation NSString object from the str buffer\nNSString *valueEntered = [NSString stringWithUTF8String:str];\n\nif([valueEntered integerValue]){\n\n    printf(\"do somethinng here\\n\");\n}\nelse{\n    printf(\"Not an integer\\n\");\n}\n\n}\n</code></pre>\n\n<p>First take the user's input as a NSString , so we can transfer it to a Integer value later onwards. The reason i have initialised it as a character is because Scanf wont allow to pass a String from what i read . So get the user's input as a character set change it to a String and check if it includes a Integer or not . IntegerValue returns the integer that the string holds if there is one , else it returns 0 .</p>\n\n<p>Another method you can try is using ScanInt method in NSScanner. Issue with that is it will check if it includes a integer and return true . So something like \"abc32\" will also be true in that manner so probably wont be usefull for you .</p>\n\n<p>Please let me know if this is what you expect as i also learnt a few things trying to solve this :)</p>\n"}, {"tags": [], "owner": {"reputation": 1972, "user_id": 4177009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c85e085e7e8690bb0ebcd33d054c69?s=128&d=identicon&r=PG", "display_name": "Ture P&#229;lsson", "link": "https://stackoverflow.com/users/4177009/ture-p%c3%a5lsson"}, "is_accepted": false, "score": 0, "last_activity_date": 1568791844, "creation_date": 1568791844, "answer_id": 57987313, "question_id": 57945430, "link": "https://stackoverflow.com/questions/57945430/how-to-avoid-user-string-inputs-in-objective-c/57987313#57987313", "title": "How to Avoid User String Inputs in Objective-C", "body": "<p>Check the return value of scanf.</p>\n\n<p>Having said that, using scanf for interactive input is often a recipe for confusion, so it might be a better idea to read input into a string with something like fgets and then analyze the string (possibly, but not necessarily, with sscanf).</p>\n"}], "owner": {"reputation": 11, "user_id": 11505720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PaqVd.jpg?s=128&g=1", "display_name": "pdr.ix", "link": "https://stackoverflow.com/users/11505720/pdr-ix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1568791844, "creation_date": 1568560373, "question_id": 57945430, "link": "https://stackoverflow.com/questions/57945430/how-to-avoid-user-string-inputs-in-objective-c", "title": "How to Avoid User String Inputs in Objective-C", "body": "<p>My program asks for an integer input and I want to make sure (error trap) that the program would print \"invalid\" if the user inputs a string or any other character.</p>\n\n<p>I'm new to Objective-C, hope you'll understand.</p>\n\n<pre><code>    NSLog(@\"1. Apple 2. Orange 3. Mango 4. Banana\");\n    NSLog(@\"Choose fruit:\");\n    scanf(\"%d\", &amp;fruit);\n    **if(fruit&gt;4 || fruit&lt;1){\n        //If the user inputs any number other than the choices.\n        NSLog(@\"Invalid.\");\n    }\n    else if(...){\n        //if the user inputs a string or character\n    }**\n</code></pre>\n\n<p>I expecting the program would print \"Invalid\" if it would input a character or string or anything besides the choices.</p>\n"}, {"tags": ["ios", "objective-c", "flutter"], "comments": [{"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1568458259, "post_id": 57934684, "comment_id": 102285732, "body": "what you mean by <code>&quot;not in context of Platform Channels&quot;</code>?"}, {"owner": {"reputation": 11, "user_id": 12064042, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBcKy22eSeFpAuxn7psbxFi7JsDi3v3ovFwZntKKA=k-s128", "display_name": "Vadim Mostovoy", "link": "https://stackoverflow.com/users/12064042/vadim-mostovoy"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1568458511, "post_id": 57934684, "comment_id": 102285788, "body": "@pskink Flutter message codecs usually used in platform channels to encode/decode data to binary and back. I think it&#39;s convenient tool if you need to store some data in binary format and restore it to original form. So I want to use it for that purpose. Not together with platform channels."}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1568458824, "post_id": 57934684, "comment_id": 102285846, "body": "sorry how can you exchange the data between native ios and dart without <a href=\"https://flutter.dev/docs/development/platform-integration/platform-channels\" rel=\"nofollow noreferrer\">this</a>?"}, {"owner": {"reputation": 11, "user_id": 12064042, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBcKy22eSeFpAuxn7psbxFi7JsDi3v3ovFwZntKKA=k-s128", "display_name": "Vadim Mostovoy", "link": "https://stackoverflow.com/users/12064042/vadim-mostovoy"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1568459093, "post_id": 57934684, "comment_id": 102285903, "body": "@pskink I need to exchange this data through socket via my server. I have such requirement for my project."}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1568460460, "post_id": 57934684, "comment_id": 102286162, "body": "seems that you need a custom <a href=\"https://github.com/flutter/flutter/blob/master/packages/flutter/lib/src/services/binary_messenger.dart\" rel=\"nofollow noreferrer\">BinaryMessenger</a> - the default one is <a href=\"https://github.com/flutter/flutter/blob/master/packages/flutter/lib/src/services/binding.dart#L144\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 11, "user_id": 12064042, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBcKy22eSeFpAuxn7psbxFi7JsDi3v3ovFwZntKKA=k-s128", "display_name": "Vadim Mostovoy", "link": "https://stackoverflow.com/users/12064042/vadim-mostovoy"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1568460983, "post_id": 57934684, "comment_id": 102286297, "body": "@pskink I don&#39;t think so. How can I write NSDictionary to it and get NSData from it?"}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1568461143, "post_id": 57934684, "comment_id": 102286344, "body": "for those you have to write you custom <a href=\"https://api.flutter.dev/flutter/services/MessageCodec-class.html\" rel=\"nofollow noreferrer\">MessageCodec</a> (i have no experience with <code>BinaryCodec</code> so i cannot say if it is useful in that case: <i>&quot;On Android, messages will be represented using java.nio.ByteBuffer. On iOS, messages will be represented using NSData.&quot;</i>)"}, {"owner": {"reputation": 11, "user_id": 12064042, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBcKy22eSeFpAuxn7psbxFi7JsDi3v3ovFwZntKKA=k-s128", "display_name": "Vadim Mostovoy", "link": "https://stackoverflow.com/users/12064042/vadim-mostovoy"}, "reply_to_user": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1568462067, "post_id": 57934684, "comment_id": 102286526, "body": "@pskink Why I don&#39;t need to write custom stuff in Flutter itself and in Android?  I can just use StandardMessageCodec and it&#39;s doing its job excellent. This codec also exists in iOS and can do what I need, but how to use it? This is my question. Looks like Flutter has only header files in iOS and I can&#39;t see what&#39;s inside. I looked in the headers, but it&#39;s unclear to me how to use it. Interface is quite different from Android and Dart."}, {"owner": {"reputation": 20970, "user_id": 2252830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f66d50bf99dc20b5aac2f165c31676?s=128&d=identicon&r=PG", "display_name": "pskink", "link": "https://stackoverflow.com/users/2252830/pskink"}, "edited": false, "score": 0, "creation_date": 1568462349, "post_id": 57934684, "comment_id": 102286576, "body": "ok sorry <code>NSDictionary</code> is supported by <code>StandardMessageCodec</code> (i was not aware it is a simple Map) - so you dont need any custom <code>MessageCodec</code> for message encoding/decoding, but still you need a <code>BinaryMessenger</code> for data flowing over your socket"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 12064042, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBcKy22eSeFpAuxn7psbxFi7JsDi3v3ovFwZntKKA=k-s128", "display_name": "Vadim Mostovoy", "link": "https://stackoverflow.com/users/12064042/vadim-mostovoy"}, "is_accepted": true, "score": 0, "last_activity_date": 1568662975, "creation_date": 1568662975, "answer_id": 57963448, "question_id": 57934684, "link": "https://stackoverflow.com/questions/57934684/how-to-use-flutterstandardmessagecodec-in-ios-to-write-read-binary-data/57963448#57963448", "title": "How to use FlutterStandardMessageCodec in iOS to write/read binary data?", "body": "<p>Answering my own question. It's easy!</p>\n\n<pre class=\"lang-objective-c prettyprint-override\"><code>        // create and fill dictionary with data\n        NSMutableDictionary *dict = [NSMutableDictionary dictionary];\n        dict[@\"string\"] = @\"string value\";\n        dict[@\"null\"] = [NSNull null];\n        dict[@\"int\"] = @(1);\n        // create codec\n        FlutterStandardMessageCodec *codec = [FlutterStandardMessageCodec codecWithReaderWriter:[[FlutterStandardReaderWriter alloc] init]];\n        // encode to binary\n        NSData *binary = [codec encode:dict];\n        // decode from binary\n        dict = [codec decode:binary];\n        // print\n        NSLog(@\"Decoded value: %@\", dict);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Decoded value: {\n    int = 1;\n    null = \"&lt;null&gt;\";\n    string = \"string value\";\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12064042, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBcKy22eSeFpAuxn7psbxFi7JsDi3v3ovFwZntKKA=k-s128", "display_name": "Vadim Mostovoy", "link": "https://stackoverflow.com/users/12064042/vadim-mostovoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 57963448, "answer_count": 1, "score": 0, "last_activity_date": 1568662975, "creation_date": 1568457417, "question_id": 57934684, "link": "https://stackoverflow.com/questions/57934684/how-to-use-flutterstandardmessagecodec-in-ios-to-write-read-binary-data", "title": "How to use FlutterStandardMessageCodec in iOS to write/read binary data?", "body": "<p>I can read/write binary data using this codec on Android and Flutter side using these classes:</p>\n\n<p>On Flutter side: <a href=\"https://api.flutter.dev/flutter/services/StandardMessageCodec-class.html\" rel=\"nofollow noreferrer\">https://api.flutter.dev/flutter/services/StandardMessageCodec-class.html</a></p>\n\n<p>On Android side: <a href=\"https://github.com/flutter/engine/blob/master/shell/platform/android/io/flutter/plugin/common/StandardMessageCodec.java\" rel=\"nofollow noreferrer\">https://github.com/flutter/engine/blob/master/shell/platform/android/io/flutter/plugin/common/StandardMessageCodec.java</a></p>\n\n<p>But I can't find how to use it on iOS side as standalone class, not in context of Platform Channels.\nWhat I need is just write some data and get binary representation (e.g. NSDictionary -> NSData) and vise versa.</p>\n"}, {"tags": ["objective-c", "objective-c-runtime"], "answers": [{"comments": [{"owner": {"reputation": 160387, "user_id": 25646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bb7953f53aa7715c72054c3d54e7b48?s=128&d=identicon&r=PG", "display_name": "bbum", "link": "https://stackoverflow.com/users/25646/bbum"}, "edited": false, "score": 1, "creation_date": 1568479259, "post_id": 57935401, "comment_id": 102290671, "body": "In PyObjC, I played with this mechanism to allow Python classes to be dynamically realized in the ObjC runtime when first referenced.   It worked, but there proved to be much easier ways of doing this.    Ultimately, lazy initialization in this fashion just wasn&#39;t that valuable, which is why it was deprecated."}], "tags": [], "owner": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "is_accepted": true, "score": 3, "last_activity_date": 1568463400, "creation_date": 1568463400, "answer_id": 57935401, "question_id": 57934479, "link": "https://stackoverflow.com/questions/57934479/whats-a-class-handler-callback-in-objective-c-runtime/57935401#57935401", "title": "What&#39;s a class handler callback in Objective-C runtime?", "body": "<p>It appears to be an obsolete feature of the runtime.  In /usr/include/objc/runtime.h, you can find the following declaration in a section labeled <code>/* Obsolete functions */</code>:</p>\n\n<pre><code>OBJC_EXPORT void objc_setClassHandler(int (*)(const char *)) OBJC2_UNAVAILABLE;\n</code></pre>\n\n<p>So, apparently, one could, before Objective-C 2.0, register a function pointer to act as the class handler. I guess the parameter is the class name. It would have the opportunity to load or dynamically create the named class.</p>\n"}], "owner": {"reputation": 1411, "user_id": 10900045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e346705758a9d79e2b4f6c6c07cc64ad?s=128&d=identicon&r=PG&f=1", "display_name": "johndoe", "link": "https://stackoverflow.com/users/10900045/johndoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 57935401, "answer_count": 1, "score": 3, "last_activity_date": 1568479412, "creation_date": 1568455875, "last_edit_date": 1568479412, "question_id": 57934479, "link": "https://stackoverflow.com/questions/57934479/whats-a-class-handler-callback-in-objective-c-runtime", "title": "What&#39;s a class handler callback in Objective-C runtime?", "body": "<p>What's a class handler callback in Objective-C runtime? As per the documentation,</p>\n\n<blockquote>\n  <p><a href=\"https://developer.apple.com/documentation/objectivec/1418952-objc_getclass?language=objc\" rel=\"nofollow noreferrer\">objc_getClass</a> is different from objc_lookUpClass in that if the class is not registered, objc_getClass calls the class handler callback and then checks a second time to see whether the class is registered. objc_lookUpClass does not call the class handler callback.</p>\n</blockquote>\n"}, {"tags": ["ios", "objective-c", "ios13"], "answers": [{"tags": [], "owner": {"reputation": 1772, "user_id": 9046550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea568a8fae3a61492df7b3784c4a3f1b?s=128&d=identicon&r=PG&f=1", "display_name": "Shreeram Bhat", "link": "https://stackoverflow.com/users/9046550/shreeram-bhat"}, "is_accepted": false, "score": 0, "last_activity_date": 1568460956, "creation_date": 1568460956, "answer_id": 57935115, "question_id": 57933686, "link": "https://stackoverflow.com/questions/57933686/view-controller-based-rotation-stop-working-when-run-the-project-on-ios-13using/57935115#57935115", "title": "View controller based rotation stop working when run the project on ios 13using xcode11", "body": "<p>Both methods</p>\n\n<pre><code>- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation \n                                duration:(NSTimeInterval)duration;\n- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation;\n</code></pre>\n\n<p>are depricated as of iOS8. You need to use their replacement method,</p>\n\n<pre><code>- (void)viewWillTransitionToSize:(CGSize)size \n       withTransitionCoordinator:(id&lt;UIViewControllerTransitionCoordinator&gt;)coordinator;\n</code></pre>\n\n<p>But this method won't be called for UPSideDown rotation. So You need to take care of that.</p>\n"}], "owner": {"reputation": 57, "user_id": 1621517, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/29ffd6247c3d900e76c0612448511298?s=128&d=identicon&r=PG", "display_name": "adnan", "link": "https://stackoverflow.com/users/1621517/adnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568472703, "creation_date": 1568448934, "last_edit_date": 1568472703, "question_id": 57933686, "link": "https://stackoverflow.com/questions/57933686/view-controller-based-rotation-stop-working-when-run-the-project-on-ios-13using", "title": "View controller based rotation stop working when run the project on ios 13using xcode11", "body": "<p>I Just installed the xcode 11 gm seed and i run my project on it and i realize that non of the rotation method called which were calling perfectly in xcode 10 and before. I don't know is it the bug with xcode or i missing something. Here are device rotation methods i am using</p>\n\n<pre><code>- (BOOL) shouldAutorotate\n{\n\n    if([videoOptions[@\"doc_type\"] integerValue] == 3){\n                return NO;\n    }\n    return YES;\n}\n\n- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation\n{\n       if([videoOptions[@\"doc_type\"] integerValue] == 3){\n            return UIInterfaceOrientationPortrait;\n        }\n    return UIInterfaceOrientationPortrait|UIInterfaceOrientationLandscapeLeft|UIInterfaceOrientationLandscapeRight;\n    //    return UIInterfaceOrientationPortrait;\n}\n\n- (UIInterfaceOrientationMask)supportedInterfaceOrientations\n{\n    if([videoOptions[@\"doc_type\"] integerValue] == 3){\n        return UIInterfaceOrientationMaskPortrait;\n    }\n    return UIInterfaceOrientationMaskAllButUpsideDown;\n    //    return UIInterfaceOrientationMaskPortrait;\n}\n\n// Notifies when rotation begins, reaches halfway point and ends.\n- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration\n{\n    //    NSLog(@\"%ld, duration: %f\", (long)toInterfaceOrientation, duration);\n    //    [self.movieSlider hidePopover];\n}\n\n- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation\n{\n\n    [self viewRotationCompleted];\n} \n</code></pre>\n"}, {"tags": ["ios", "objective-c", "opengl-es", "google-fabric"], "answers": [{"comments": [{"owner": {"reputation": 371, "user_id": 3928213, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JVxGk.jpg?s=128&g=1", "display_name": "Yvan", "link": "https://stackoverflow.com/users/3928213/yvan"}, "edited": false, "score": 0, "creation_date": 1568625439, "post_id": 57941002, "comment_id": 102319601, "body": "Ya, I didn&#39;t use openGL."}], "tags": [], "owner": {"reputation": 854, "user_id": 10136624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb6a5c688b27f2d7e7754dc72f1e69ad?s=128&d=identicon&r=PG&f=1", "display_name": "jbiser361", "link": "https://stackoverflow.com/users/10136624/jbiser361"}, "is_accepted": false, "score": 2, "last_activity_date": 1568519428, "creation_date": 1568519428, "answer_id": 57941002, "question_id": 57933476, "link": "https://stackoverflow.com/questions/57933476/how-to-avoid-crash-opengl-rendering-while-app-in-background-state/57941002#57941002", "title": "How to avoid crash &quot;OpenGL rendering while app in background state&quot;", "body": "<p>to my knowledge apple doesn't support openGL with iOS 13 or 10.15, try converting it to metal </p>\n\n<p>\"Important: OpenGL was deprecated in macOS 10.14. To create high-performance code on GPUs, use the Metal framework instead. See Metal.\"</p>\n\n<p><a href=\"https://developer.apple.com/library/archive/documentation/GraphicsImaging/Conceptual/OpenGL-MacProgGuide/opengl_intro/opengl_intro.html\" rel=\"nofollow noreferrer\">https://developer.apple.com/library/archive/documentation/GraphicsImaging/Conceptual/OpenGL-MacProgGuide/opengl_intro/opengl_intro.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 371, "user_id": 3928213, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JVxGk.jpg?s=128&g=1", "display_name": "Yvan", "link": "https://stackoverflow.com/users/3928213/yvan"}, "edited": false, "score": 0, "creation_date": 1568625400, "post_id": 57941638, "comment_id": 102319578, "body": "I never used GLKViewController in my app. I just used a third library &quot;Lottie&quot;."}, {"owner": {"reputation": 5727, "user_id": 1123662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sYfD9.png?s=128&g=1", "display_name": "Cynichniy Bandera", "link": "https://stackoverflow.com/users/1123662/cynichniy-bandera"}, "reply_to_user": {"reputation": 371, "user_id": 3928213, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JVxGk.jpg?s=128&g=1", "display_name": "Yvan", "link": "https://stackoverflow.com/users/3928213/yvan"}, "edited": false, "score": 0, "creation_date": 1568656826, "post_id": 57941638, "comment_id": 102335703, "body": "Then as a minimum, you can intercept applicationWillResignActive() and issue glFinish() in it. If not working - check with your &quot;Lottie&quot; for its rendering cycle. It should have some kind of pause() and resume() as the most of apis have."}], "tags": [], "owner": {"reputation": 5727, "user_id": 1123662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sYfD9.png?s=128&g=1", "display_name": "Cynichniy Bandera", "link": "https://stackoverflow.com/users/1123662/cynichniy-bandera"}, "is_accepted": false, "score": 0, "last_activity_date": 1568552676, "last_edit_date": 1568552676, "creation_date": 1568528390, "answer_id": 57941638, "question_id": 57933476, "link": "https://stackoverflow.com/questions/57933476/how-to-avoid-crash-opengl-rendering-while-app-in-background-state/57941638#57941638", "title": "How to avoid crash &quot;OpenGL rendering while app in background state&quot;", "body": "<p>GLKViewController is working perfectly in ios 13. As for your question, I did it in the following way.</p>\n\n<p>In your app delegate.</p>\n\n<pre><code>- (void)applicationWillResignActive:(UIApplication *)application\n{\n        [[NSNotificationCenter defaultCenter] postNotificationName:@\".applicationWillResignActive\" object:nil];\n}\n\n- (void)applicationDidBecomeActive:(UIApplication *)application\n{\n        [[NSNotificationCenter defaultCenter] postNotificationName:@\".applicationDidBecomeActive\" object:nil];\n}\n</code></pre>\n\n<p>Then in your rendering view controller.</p>\n\n<pre><code>- (void)viewWillAppear:(BOOL)animated\n{\n        [super viewWillAppear:animated];\n        [[NSNotificationCenter defaultCenter] addObserver:self\n                                                 selector:@selector(applicationWillResignActive:)\n                                                     name:@\".applicationWillResignActive\"\n                                                   object:nil];\n        [[NSNotificationCenter defaultCenter] addObserver:self\n                                                 selector:@selector(applicationDidBecomeActive:)\n                                                     name:@\".applicationDidBecomeActive\"\n                                                   object:nil];\n         self.preferredFramesPerSecond = 30;\n         self.pauseOnWillResignActive = NO;\n         self.resumeOnDidBecomeActive = NO;\n}\n</code></pre>\n\n<p>GLKit has its own mechanism for handling going to the background (that pauseOnWillResignActive property) but it did not work well for me. I suspect because it only stops rendering timer but does not flush the gl operations queue with glFinish() or glFlush(). So I handled it myself.</p>\n\n<pre><code>- (void) viewDidDisappear:(BOOL)animated\n{\n        [super viewDidDisappear:animated];\n        [[NSNotificationCenter defaultCenter] removeObserver:self name:@\".applicationDidBecomeActive\" object:nil];\n        [[NSNotificationCenter defaultCenter] removeObserver:self name:@\".applicationWillResignActive\" object:nil];\n}\n\n- (void)applicationWillResignActive:(NSNotification *)note\n{\n        [self suspend];\n}\n\n- (void)applicationDidBecomeActive:(NSNotification *)note\n{\n        [self resume];\n}\n</code></pre>\n\n<p>And now your suspend and resume methods may look like this.</p>\n\n<pre><code>-(void) suspend\n{\n        self.suspended = YES;\n        glFinish();\n}\n\n-(void) resume\n{\n        if (self.suspended) {\n                self.suspended = NO;\n                [(GLKView *)self.view display];\n        }\n}\n</code></pre>\n\n<p>PS. Though it works fine, this is quite an old API (GLKit). I really recommend you to figure out how to use metal.</p>\n"}], "owner": {"reputation": 371, "user_id": 3928213, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JVxGk.jpg?s=128&g=1", "display_name": "Yvan", "link": "https://stackoverflow.com/users/3928213/yvan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 783, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1568620073, "creation_date": 1568446937, "last_edit_date": 1568620073, "question_id": 57933476, "link": "https://stackoverflow.com/questions/57933476/how-to-avoid-crash-opengl-rendering-while-app-in-background-state", "title": "How to avoid crash &quot;OpenGL rendering while app in background state&quot;", "body": "<p>I got many crash reports recently on fabric. It says Based on the stack trace displayed here, it looks like new calls triggering OpenGL rendering took place while the app was transitioning to, or from, a background state. If you set up OpenGL drawing in your app delegate's methods, make sure that you only did so in applicationDidBecomeActive:, never in application:willFinishLaunchingWithOptions: or application:didFinishLaunchingWithOptions:. </p>\n\n<pre><code>0   libGPUSupportMercury.dylib  gpus_ReturnNotPermittedKillClient\n1   AGXGLDriver (Missing)\n2   libGPUSupportMercury.dylib  gpusSubmitDataBuffers\n3   AGXGLDriver (Missing)\n4   WebCore WebCore::GraphicsContext3D::reshape(int, int) + 580\n5   WebCore WebCore::WebGLRenderingContextBase::initializeNewContext() + 936\n6   WebCore WebCore::WebGLRenderingContextBase::WebGLRenderingContextBase(WebCore::CanvasBase&amp;, WTF::Ref&lt;WebCore::GraphicsContext3D, WTF::DumbPtrTraits&lt;WebCore::GraphicsContext3D&gt; &gt;&amp;&amp;, WebCore::GraphicsContext3DAttributes) + 660\n7   WebCore WebCore::WebGLRenderingContext::create(WebCore::CanvasBase&amp;, WTF::Ref&lt;WebCore::GraphicsContext3D, WTF::DumbPtrTraits&lt;WebCore::GraphicsContext3D&gt; &gt;&amp;&amp;, WebCore::GraphicsContext3DAttributes) + 84\n8   WebCore WebCore::WebGLRenderingContextBase::create(WebCore::CanvasBase&amp;, WebCore::GraphicsContext3DAttributes&amp;, WTF::String const&amp;) + 1416\n9   WebCore WebCore::HTMLCanvasElement::getContext(JSC::ExecState&amp;, WTF::String const&amp;, WTF::Vector&lt;JSC::Strong&lt;JSC::Unknown&gt;, 0ul, WTF::CrashOnOverflow, 16ul&gt;&amp;&amp;) + 904\n10  WebCore  WebCore::jsHTMLCanvasElementPrototypeFunctionGetContext(JSC::ExecState*) + 424\n11  JavaScriptCore  llint_entry + 89612\n12  JavaScriptCore  llint_entry + 82980\n13  JavaScriptCore  llint_entry + 82980\n14  JavaScriptCore  llint_entry + 82980\n15  JavaScriptCore  llint_entry + 82980\n16  JavaScriptCore  llint_entry + 82980\n17  JavaScriptCore  vmEntryToJavaScript + 268\n18  JavaScriptCore  JSC::Interpreter::executeCall(JSC::ExecState*, JSC::JSObject*, JSC::CallType, JSC::CallData const&amp;, JSC::JSValue, JSC::ArgList const&amp;) + 424\n19  JavaScriptCore  JSC::profiledCall(JSC::ExecState*, JSC::ProfilingReason, JSC::JSValue, JSC::CallType, JSC::CallData const&amp;, JSC::JSValue, JSC::ArgList const&amp;, WTF::NakedPtr&lt;JSC::Exception&gt;&amp;) + 200\n20  WebCore  WebCore::JSExecState::profiledCall(JSC::ExecState*, JSC::ProfilingReason, JSC::JSValue, JSC::CallType, JSC::CallData const&amp;, JSC::JSValue, JSC::ArgList const&amp;, WTF::NakedPtr&lt;JSC::Exception&gt;&amp;) + 140\n21  WebCore  WebCore::ScheduledAction::executeFunctionInContext(JSC::JSGlobalObject*, JSC::JSValue, WebCore::ScriptExecutionContext&amp;) + 424\n22  WebCore  WebCore::ScheduledAction::execute(WebCore::Document&amp;) + 144\n23  WebCore  WebCore::DOMTimer::fired() + 816\n24  WebCore  WebCore::ThreadTimers::sharedTimerFiredInternal() + 216\n25  WebCore  WebCore::timerFired(__CFRunLoopTimer*, void*) + 28\n26  CoreFoundation  __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 28\n27  CoreFoundation  __CFRunLoopDoTimer + 864\n28  CoreFoundation  __CFRunLoopDoTimers + 248\n29  CoreFoundation  __CFRunLoopRun + 1844\n30  CoreFoundation  CFRunLoopRunSpecific + 436\n31  WebCore RunWebThread(void*) + 600\n32  libsystem_pthread.dylib _pthread_body + 128\n33  libsystem_pthread.dylib _pthread_start + 44\n34  libsystem_pthread.dylib thread_start + 4\n</code></pre>\n\n<p>How to find where the code crashes?</p>\n"}, {"tags": ["ios", "objective-c"], "answers": [{"tags": [], "owner": {"reputation": 14702, "user_id": 1918561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uRU2O.jpg?s=128&g=1", "display_name": "Gereon", "link": "https://stackoverflow.com/users/1918561/gereon"}, "is_accepted": false, "score": 0, "last_activity_date": 1568405801, "creation_date": 1568405801, "answer_id": 57929871, "question_id": 57929633, "link": "https://stackoverflow.com/questions/57929633/obj-c-using-data-outside-of-afnetworking-block/57929871#57929871", "title": "Obj-C - Using data outside of AFNetworking Block", "body": "<p>\"somewhere else\" must be inside the <code>success</code> blocks (or called from there), because that's the only place where <code>self.neighbourData</code> has a value.</p>\n"}, {"tags": [], "owner": {"reputation": 29472, "user_id": 4253437, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/bcBpJ.jpg?s=128&g=1", "display_name": "CodeBender", "link": "https://stackoverflow.com/users/4253437/codebender"}, "is_accepted": false, "score": 0, "last_activity_date": 1568414674, "creation_date": 1568414674, "answer_id": 57931097, "question_id": 57929633, "link": "https://stackoverflow.com/questions/57929633/obj-c-using-data-outside-of-afnetworking-block/57931097#57931097", "title": "Obj-C - Using data outside of AFNetworking Block", "body": "<p>Going to start off with the original code to serve as a reference here:</p>\n\n<pre><code>-(void)viewDidLoad {\n\n     NSMutableDictionary *viewParams5 = [NSMutableDictionary new];\n        [viewParams5 setValue:@\"u000\" forKey:@\"view_name\"];\n        [DIOSView viewGet:viewParams5 success:^(AFHTTPRequestOperation *operation, id responseObject) {\n\n\n            self.neighbourData = [responseObject mutableCopy];\n\n\n            [self.tableView reloadData];\n\n\n        } failure:^(AFHTTPRequestOperation *operation, NSError *error) {\n            NSLog(@\"Failure: %@\", [error localizedDescription]);\n        }];\n\n}\n</code></pre>\n\n<p>Per your question, you would like access to the output of the <code>success</code> block outside of the function (for example, a follow up call after the block call here </p>\n\n<pre><code>-(void)viewDidLoad {\n     NSMutableDictionary *viewParams5 = [NSMutableDictionary new];\n        [viewParams5 setValue:@\"u000\" forKey:@\"view_name\"];\n</code></pre>\n\n<p>This approach has a few problems though.</p>\n\n<p>First, your desired data is the result of an asynchronous call. A simple example:</p>\n\n<ol>\n<li><code>NSMutableDictionary *viewParams5 = [NSMutableDictionary new];</code> is called</li>\n<li>Now you call your block. This is an async call, so it goes off and does its thing while <strong>not</strong> blocking anything after it</li>\n<li>Some other work is now performed. Since the result of step 2 is free to run at its own pace, step 3 can go and do its own thing without the need to wait</li>\n</ol>\n\n<p>The issue here is that step 3 could not even get access to the data you want because at this point, there likely is no data to get. There are a variety of tolerable to outright bad things you could do to make things wait, but I'm not even going to cover those.</p>\n\n<blockquote>\n  <p>This is all to say that you cannot reliably expect the data you want\n  to even exist until some unknown point in time.</p>\n</blockquote>\n\n<p>The next issue is scope. Your result does not exist until the <code>success</code> block completes, at which point you currently use this line:\n<code>self.neighbourData = [responseObject mutableCopy];</code></p>\n\n<p>Currently, you are calling that line <strong>immediately</strong> after the data becomes available. Afterwards, you reload the tableView, but then no further work is done inside of this code block:</p>\n\n<pre><code>[DIOSView viewGet:viewParams5 success:^(AFHTTPRequestOperation *operation, id responseObject) {\n    // THE DATA EXISTS...\n    self.neighbourData = [responseObject mutableCopy];\n    [self.tableView reloadData];\n    // ... AND NOW THE DATA IS GONE!\n} \n</code></pre>\n\n<p>Because of how scoping works here, the data only exists for the brief window between the comments I wrote. </p>\n\n<p>All of this is to say that what you are currently doing is the best you can do given what you desire to do. </p>\n"}], "owner": {"reputation": 1321, "user_id": 3030060, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/vjjqk.png?s=128&g=1", "display_name": "Brittany", "link": "https://stackoverflow.com/users/3030060/brittany"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1568414674, "creation_date": 1568404430, "question_id": 57929633, "link": "https://stackoverflow.com/questions/57929633/obj-c-using-data-outside-of-afnetworking-block", "title": "Obj-C - Using data outside of AFNetworking Block", "body": "<p>I'm using the below code to grab data, and self.neighbourData populates. That said, if I want to use the data returned inside this block anywhere else in my ViewController, self.neighbourData is returned NULL (unless of course, I'm using it to populate a tableView and I'm able to refresh the tableView once the data is done loading). What's the best way to get my data out of self.neighbourData somewhere else in my ViewDidLoad? I'm stumped. I simply want to display data inside a string elsewhere in my viewDidLoad - e.g.:</p>\n\n<blockquote>\n  <p>NSString *test = self.neighbourData[@\"name\"];</p>\n</blockquote>\n\n<p><strong>See code below:</strong></p>\n\n<p><strong>ViewController.h</strong></p>\n\n<pre><code>@property (strong, nonatomic) NSMutableArray *neighbourData;\n</code></pre>\n\n<p><strong>ViewController.m</strong></p>\n\n<pre><code>-(void)viewDidLoad {\n\n     NSMutableDictionary *viewParams5 = [NSMutableDictionary new];\n        [viewParams5 setValue:@\"u000\" forKey:@\"view_name\"];\n        [DIOSView viewGet:viewParams5 success:^(AFHTTPRequestOperation *operation, id responseObject) {\n\n\n            self.neighbourData = [responseObject mutableCopy];\n\n\n            [self.tableView reloadData];\n\n\n        } failure:^(AFHTTPRequestOperation *operation, NSError *error) {\n            NSLog(@\"Failure: %@\", [error localizedDescription]);\n        }];\n\n}\n</code></pre>\n"}, {"tags": ["ios", "objective-c", "avplayer", "mpnowplayinginfocenter", "mpremotecommandcenter"], "owner": {"reputation": 12931, "user_id": 436976, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/ca5523dd495f8c0a6a6b20db65db2ef4?s=128&d=identicon&r=PG", "display_name": "stevendesu", "link": "https://stackoverflow.com/users/436976/stevendesu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 263, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1568389788, "creation_date": 1568389788, "question_id": 57926764, "link": "https://stackoverflow.com/questions/57926764/cant-update-ios-remote-command-center-for-avplayer", "title": "Can&#39;t update iOS Remote Command Center for AVPlayer?", "body": "<p>I have a simple video player (just an AVPlayer, playing an M3U8 video file) and I previously got it playing background audio just fine using the following:</p>\n\n<pre><code>    NSError *audioError;\n    [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:&amp;audioError];\n    if (audioError == nil)\n    {\n        [[AVAudioSession sharedInstance] setActive:YES error:nil];\n    }\n</code></pre>\n\n<p>Now I would like to customize which buttons are displayed on the lock screen, information about the video being played, and the behavior of those buttons when pressed. I tried the following, but no luck:</p>\n\n<pre><code>    MPRemoteCommandCenter *commandCenter = [MPRemoteCommandCenter sharedCommandCenter];\n\n    [commandCenter.pauseCommand setEnabled:NO];\n    [commandCenter.playCommand setEnabled:NO];\n    [commandCenter.stopCommand setEnabled:NO];\n\n    [commandCenter.togglePlayPauseCommand setEnabled:YES];\n    [commandCenter.togglePlayPauseCommand addTarget:self action:@selector(togglePlayPause)];\n\n    // These were previously \"NO\", but I set them to \"YES\" and re-compiled\n    // to see if I was having ANY effect on the buttons\n    [commandCenter.nextTrackCommand setEnabled:YES];\n    [commandCenter.previousTrackCommand setEnabled:YES];\n    [commandCenter.changeRepeatModeCommand setEnabled:YES];\n    [commandCenter.changeShuffleModeCommand setEnabled:YES];\n\n    [commandCenter.changePlaybackRateCommand setEnabled:YES];\n    [commandCenter.changePlaybackRateCommand addTarget:self action:@selector(changePlaybackRate)];\n\n    [commandCenter.seekBackwardCommand setEnabled:NO];\n    [commandCenter.seekForwardCommand setEnabled:NO];\n\n    // These next two were previously \"YES\", but I set them to \"NO\" and\n    // re-compiled for the same reason as above\n    [commandCenter.skipBackwardCommand setEnabled:NO];\n    [commandCenter.skipBackwardCommand addTarget:self action:@selector(skipBackward)];\n\n    [commandCenter.skipForwardCommand setEnabled:NO];\n    [commandCenter.skipForwardCommand addTarget:self action:@selector(skipForward)];\n\n    if (@available(iOS 9.1, *))\n    {\n        [commandCenter.changePlaybackPositionCommand setEnabled:YES];\n        [commandCenter.changePlaybackPositionCommand addTarget:self action:@selector(changePlaybackPosition)];\n    }\n\n    // Previously \"NO\", but I just wanted to see if ANY buttons\n    // would show up\n    [commandCenter.ratingCommand setEnabled:YES];\n    [commandCenter.likeCommand setEnabled:YES];\n    [commandCenter.dislikeCommand setEnabled:YES];\n    [commandCenter.bookmarkCommand setEnabled:YES];\n    [commandCenter.enableLanguageOptionCommand setEnabled:YES];\n    [commandCenter.disableLanguageOptionCommand setEnabled:YES];\n\n    [MPNowPlayingInfoCenter defaultCenter].nowPlayingInfo = [NSMutableDictionary dictionaryWithObjectsAndKeys:\n                                                             @\"Test\", MPMediaItemPropertyTitle,\n                                                             @\"Artist\", MPMediaItemPropertyArtist,\n                                                             [NSNumber numberWithDouble:1.0], MPNowPlayingInfoPropertyPlaybackRate,\n                                                             nil];\n</code></pre>\n\n<p>Despite this, my lock screen still looks like so:</p>\n\n<p><a href=\"https://i.stack.imgur.com/v3p7T.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/v3p7T.png\" alt=\"enter image description here\"></a></p>\n\n<p>It seems like <a href=\"https://developer.apple.com/documentation/mediaplayer/mpremotecommandcenter\" rel=\"nofollow noreferrer\"><code>MPRemoteCommandCenter</code></a> and <a href=\"https://developer.apple.com/documentation/mediaplayer/mpnowplayinginfocenter\" rel=\"nofollow noreferrer\"><code>MPNowPlayingInfoCenter</code></a> may not work as described</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["objective-c", "c++11", "lambda", "objective-c-blocks", "objective-c++"], "answers": [{"tags": [], "owner": {"reputation": 109950, "user_id": 86989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd262de5d82a235eeb64f71e4058198?s=128&d=identicon&r=PG", "display_name": "newacct", "link": "https://stackoverflow.com/users/86989/newacct"}, "is_accepted": true, "score": 2, "last_activity_date": 1580000895, "creation_date": 1580000895, "answer_id": 59914782, "question_id": 57925717, "link": "https://stackoverflow.com/questions/57925717/how-can-i-properly-capture-an-obj-c-block-within-a-c-lambda-call/59914782#59914782", "title": "How can I properly capture an Obj-C block within a c++ lambda call?", "body": "<p>Yes, it will work correctly. A C++ lambda is equivalent to creating an unnamed struct type with the captured variables as fields. ARC ensures that when fields of a C++ struct have Objective-C object pointer type (or block pointer type), it will follow ARC semantics, i.e. the struct's constructor will initialize the field to <code>nil</code>; when someone assigns to the field, it releases the previous value and retains (or copies, if it's a block) the new value; and the struct's destructor will release the field.</p>\n"}], "owner": {"reputation": 1325, "user_id": 864663, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/808ac96cb009ba241fe54a53246ad540?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/864663/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 59914782, "answer_count": 1, "score": 1, "last_activity_date": 1580000895, "creation_date": 1568385574, "last_edit_date": 1580000515, "question_id": 57925717, "link": "https://stackoverflow.com/questions/57925717/how-can-i-properly-capture-an-obj-c-block-within-a-c-lambda-call", "title": "How can I properly capture an Obj-C block within a c++ lambda call?", "body": "<p>We recently ported our Obj-c application to be cross platform with c++. We are in the process of integrating it back into iOS and have to capture a block and NSObject into a lambda, and it makes me very nervous as I do not know if it will retain the memory correctly. Here is some test code</p>\n\n<pre><code>NSString* important_string = @\"Test String\";\nvoid (^important_os_callback)(parameterTypes parameter);\n\nmy_cpp_function_with_lamdba([important_string, important_os_callback]()\n{\n    // Are the block and string still retained later?\n    important_os_callback(important_string);\n});\n</code></pre>\n"}, {"tags": ["objective-c", "xcode", "github", "xcode-project"], "answers": [{"tags": [], "owner": {"reputation": 9275, "user_id": 1077601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8156916199f65a68c31dac5b8ad4151c?s=128&d=identicon&r=PG", "display_name": "Darren", "link": "https://stackoverflow.com/users/1077601/darren"}, "is_accepted": false, "score": 0, "last_activity_date": 1568839097, "creation_date": 1568839097, "answer_id": 58000430, "question_id": 57922072, "link": "https://stackoverflow.com/questions/57922072/how-to-import-an-xcode-project-from-github-into-my-xcode-project/58000430#58000430", "title": "How to import an Xcode project from GitHub into my Xcode project?", "body": "<p>The project is an example project so you don\u2019t want to include it all. If you have your own project and want to use DFURTSPPlayer then drag the <code>FFMpegiOS</code> and <code>FFMpegDecoder</code> folders into your project. Then look at the <code>DFUViewController</code> files to see how to use it.</p>\n\n<p>Bare in mind there has been no code changes for 4 years on that project so it may not work still. </p>\n"}], "owner": {"reputation": 41, "user_id": 12040363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3a6dbafac32db6a9a3e43c0767b145f?s=128&d=identicon&r=PG&f=1", "display_name": "dUser", "link": "https://stackoverflow.com/users/12040363/duser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568845609, "creation_date": 1568371163, "last_edit_date": 1568845609, "question_id": 57922072, "link": "https://stackoverflow.com/questions/57922072/how-to-import-an-xcode-project-from-github-into-my-xcode-project", "title": "How to import an Xcode project from GitHub into my Xcode project?", "body": "<p>I downloaded the <a href=\"https://github.com/durfu/DFURTSPPlayer\" rel=\"nofollow noreferrer\">DFURTSPPlayer Xcode project from GitHub</a> but I could not import it into my Xcode project in any way.</p>\n\n<p>I tried to simply drag the xcodeproj file into my project but I couldn't use it. It's like they are 2 separates projects that can't communicate with each other. </p>\n\n<p>How can I do this?</p>\n\n<p><img src=\"https://i.stack.imgur.com/OY6TR.png\" alt=\"Xcode files\"></p>\n"}, {"tags": ["ios", "objective-c", "multithreading", "nsthread", "nsrunloop"], "comments": [{"owner": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 1, "creation_date": 1568371702, "post_id": 57921951, "comment_id": 102262010, "body": "Bad decision. Use <code>GCD</code>. It was designed to &quot;kill&quot; <code>NSThread</code>. It&#39;s have all that you need. You are now just reinventing GCD. You can use direct <code>GCD</code> or Objective-C&#39;s wrapper of it <code>NSOperationQueue</code>"}, {"owner": {"reputation": 940, "user_id": 2439750, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/e9af54206662a497b6c47080d4b924b7?s=128&d=identicon&r=PG", "display_name": "Eugene Alexeev", "link": "https://stackoverflow.com/users/2439750/eugene-alexeev"}, "reply_to_user": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 0, "creation_date": 1568371881, "post_id": 57921951, "comment_id": 102262114, "body": "Hello! Here&#39;s what Apple says about <code>NSThread</code> in the article <code>Migrating Away from Threads</code>   - <code>It is important to remember that queues are not a panacea for replacing threads. The asynchronous programming model offered by queues is appropriate in situations where latency is not an issue. Even though queues offer ways to configure the execution priority of tasks in the queue, higher execution priorities do not guarantee the execution of tasks at specific times. Therefore, threads are still a more appropriate choice in cases where you need minimal latency, such as in audio and video playback.</code>"}, {"owner": {"reputation": 940, "user_id": 2439750, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/e9af54206662a497b6c47080d4b924b7?s=128&d=identicon&r=PG", "display_name": "Eugene Alexeev", "link": "https://stackoverflow.com/users/2439750/eugene-alexeev"}, "reply_to_user": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 0, "creation_date": 1568371956, "post_id": 57921951, "comment_id": 102262155, "body": "So I want to point out that I decided to try <code>NSThread</code> because I had certain problems with <code>GCD</code> in that particular case - like latency decrease over a time and uneven performance on different devices. I need more control on how my task is performed and learn how to do it properly"}, {"owner": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 0, "creation_date": 1568372645, "post_id": 57921951, "comment_id": 102262503, "body": "I think Apple mean here that you perform plain sequent work here in thread: take data from input, process it, put it in output. Not such scheduling mechanism when you create run loops and performs selectors. Performing selectors also takes more time than direct function call, you should think about it if latency such matter."}, {"owner": {"reputation": 940, "user_id": 2439750, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/e9af54206662a497b6c47080d4b924b7?s=128&d=identicon&r=PG", "display_name": "Eugene Alexeev", "link": "https://stackoverflow.com/users/2439750/eugene-alexeev"}, "reply_to_user": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 0, "creation_date": 1568373060, "post_id": 57921951, "comment_id": 102262704, "body": "Take data from input, process it and put in to output - that is literally what I&#39;m doing. And scheduling mechanism is meant here only to keep thread and its run loop alive and asleep once I need to use it again."}, {"owner": {"reputation": 14257, "user_id": 526828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8y7Ru.png?s=128&g=1", "display_name": "Matic Oblak", "link": "https://stackoverflow.com/users/526828/matic-oblak"}, "reply_to_user": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 1, "creation_date": 1568375712, "post_id": 57921951, "comment_id": 102263996, "body": "I will have to go with @Cy-4AH on this one. Either use GCD to do all your work on single queue or use <code>NSThread</code> without run loop for each of your process. It seems you have more than one. In both cases you WILL produce latency when the work you need to do in this thread(s) will be too much to handle. Either amount of opened threads will increase or the previous task will not yet be finished and the new one will be scheduled thus producing latency. The later is basically what GCD should do."}], "answers": [{"comments": [{"owner": {"reputation": 940, "user_id": 2439750, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/e9af54206662a497b6c47080d4b924b7?s=128&d=identicon&r=PG", "display_name": "Eugene Alexeev", "link": "https://stackoverflow.com/users/2439750/eugene-alexeev"}, "edited": false, "score": 0, "creation_date": 1568386518, "post_id": 57925690, "comment_id": 102269419, "body": "Thank you for clarification! My main concern with <code>GCD</code> is that it&#39;s internal mechanic can adjust <code>QoS</code> automatically and I don&#39;t really know how to influence that except putting all work at lower <code>QoS</code> from the beginning. What approach can I use to make <code>GCD</code> happy about my <code>QoS</code> choice and thread workload?"}, {"owner": {"reputation": 249319, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "reply_to_user": {"reputation": 940, "user_id": 2439750, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/e9af54206662a497b6c47080d4b924b7?s=128&d=identicon&r=PG", "display_name": "Eugene Alexeev", "link": "https://stackoverflow.com/users/2439750/eugene-alexeev"}, "edited": false, "score": 1, "creation_date": 1568386983, "post_id": 57925690, "comment_id": 102269678, "body": "You should choose the QoS that matches your intent. If this is real-time processing that influences the UI then you should mark these work items <code>.userInteractive</code>. That happens to be the highest QoS, but QoS is more than just priority. You shouldn&#39;t be trying to tweak some number to cause things to process in an order (if you need an order, use a queue). You should mark them according to their intent."}, {"owner": {"reputation": 249319, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "reply_to_user": {"reputation": 940, "user_id": 2439750, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/e9af54206662a497b6c47080d4b924b7?s=128&d=identicon&r=PG", "display_name": "Eugene Alexeev", "link": "https://stackoverflow.com/users/2439750/eugene-alexeev"}, "edited": false, "score": 1, "creation_date": 1568387035, "post_id": 57925690, "comment_id": 102269703, "body": "If you have a question about real-time processing with GCD, I recommend opening a new question about that, detailing the specific problem you&#39;re seeing. If this is really real-time work, then it&#39;s worth discussing how you deal with dropped frames, as well. (If you don&#39;t have a mechanism to drop work to make your deadlines, then they&#39;re not really deadlines, and it&#39;s not really &quot;real-time.&quot;)"}, {"owner": {"reputation": 940, "user_id": 2439750, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/e9af54206662a497b6c47080d4b924b7?s=128&d=identicon&r=PG", "display_name": "Eugene Alexeev", "link": "https://stackoverflow.com/users/2439750/eugene-alexeev"}, "edited": false, "score": 0, "creation_date": 1568389417, "post_id": 57925690, "comment_id": 102270933, "body": "If I&#39;m not wrong, <code>AVCaptureVideoDataOutput</code> does the frame-dropping for me. If I don&#39;t keep up with my work I see <code>captureOutput(_ output: AVCaptureOutput, didDrop sampleBuffer: CMSampleBuffer, from connection: AVCaptureConnection) </code> getting called and hence I don&#39;t process &quot;late frames&quot;. Or you&#39;re referring to something else?"}, {"owner": {"reputation": 249319, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "reply_to_user": {"reputation": 940, "user_id": 2439750, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/e9af54206662a497b6c47080d4b924b7?s=128&d=identicon&r=PG", "display_name": "Eugene Alexeev", "link": "https://stackoverflow.com/users/2439750/eugene-alexeev"}, "edited": false, "score": 1, "creation_date": 1568389888, "post_id": 57925690, "comment_id": 102271154, "body": "Depending on your situation, that may be sufficient. If you&#39;ve sent a bunch of things to multiple threads, though, you may need to abandon processing that&#39;s run past its deadline, or you may never catch up once dropping begins. The capture connection needs to know that you&#39;re behind, and it won&#39;t automatically know that if you&#39;ve spun things off to other threads."}, {"owner": {"reputation": 249319, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "reply_to_user": {"reputation": 940, "user_id": 2439750, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/e9af54206662a497b6c47080d4b924b7?s=128&d=identicon&r=PG", "display_name": "Eugene Alexeev", "link": "https://stackoverflow.com/users/2439750/eugene-alexeev"}, "edited": false, "score": 0, "creation_date": 1568390023, "post_id": 57925690, "comment_id": 102271215, "body": "As a rule, it&#39;s often much easier and more reliable to keep your processing on the sampleBufferCallbackQueue, and focus on making it more performant. Often it&#39;s better to make things parallel on the GPU or vector processor rather than spawning extra CPU threads. But it depends on your specific situation."}, {"owner": {"reputation": 940, "user_id": 2439750, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/e9af54206662a497b6c47080d4b924b7?s=128&d=identicon&r=PG", "display_name": "Eugene Alexeev", "link": "https://stackoverflow.com/users/2439750/eugene-alexeev"}, "edited": false, "score": 0, "creation_date": 1568390328, "post_id": 57925690, "comment_id": 102271342, "body": "Oh, I understood what you meant. I really don&#39;t consider the fact that processing wasn&#39;t finished on time. Thank you for that tip! Could you advice me some good info sources where I can find explanations of techniques for detecting processing which is past it&#39;s deadline?"}, {"owner": {"reputation": 249319, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "reply_to_user": {"reputation": 940, "user_id": 2439750, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/e9af54206662a497b6c47080d4b924b7?s=128&d=identicon&r=PG", "display_name": "Eugene Alexeev", "link": "https://stackoverflow.com/users/2439750/eugene-alexeev"}, "edited": false, "score": 0, "creation_date": 1568397707, "post_id": 57925690, "comment_id": 102274296, "body": "I&#39;m not aware of really good sources on how to write real-time code. I&#39;ve been doing it since 1993, and there are just a lot things you learn. I&#39;m certain there are better paths than mine."}], "tags": [], "owner": {"reputation": 249319, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "is_accepted": false, "score": 2, "last_activity_date": 1568385792, "last_edit_date": 1568385792, "creation_date": 1568385451, "answer_id": 57925690, "question_id": 57921951, "link": "https://stackoverflow.com/questions/57921951/correct-usage-of-secondary-nsthread-with-nsrunloop/57925690#57925690", "title": "Correct usage of secondary NSThread with NSRunLoop", "body": "<blockquote>\n  <p>since it's a performance-sensitive code where latency is the key I decided to go with NSThread instead of GCD.</p>\n</blockquote>\n\n<p>You should generally not do that unless you have a solid understanding of GCD and know exactly what you're giving up. Used correctly, GCD is highly optimized, and integrated very closely with the OS. It's particularly surprising to be using NSThread by hand, but then doing your work in ObjC with <code>performSelector</code> and run loops. Calling <code>performSelector</code> this way is introducing the same kind of unknown latency as a GCD <em>serial</em> queue. If the thread is already busy, then you'll queue the selector, exactly like queuing a block (but you'll add the overhead of <code>objc_msgSend</code>). A GCD concurrent queue would perform better. In order to match GCD, you would need to implement a proper thread pool (or at least add cancelation). Done well, this can be better than GCD for specific use cases, but it has to be done very well, and that's complicated.</p>\n\n<p>As the <a href=\"https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html#//apple_ref/doc/uid/10000057i-CH15-SW19\" rel=\"nofollow noreferrer\">Threading Programming Guide</a> notes:</p>\n\n<blockquote>\n  <p>Note: Although good for occasional communication between threads, you should not use the performSelector:onThread:withObject:waitUntilDone: method for time critical or frequent communication between threads.</p>\n</blockquote>\n\n<p>If you want low-latency communication between threads, you'll typically want to use semaphores such as <code>NSConditionLock</code> rather than a runloop.</p>\n\n<p>That said, let's get to the actual questions.</p>\n\n<p>The <code>performSelector:onThread:...</code> interface is generally used for one-shot operations. The more common way to implement a long-running, dedicated thread is to subclass <code>NSThread</code> and override <code>main</code>. Something like this (this is thrown together and untested, based on code from the Threading Programming Guide; I've done all my high-performance work in GCD for years now, so I probably have goofed something here).</p>\n\n<pre><code>#import \"WorkerThread.h\"\n\n#define NO_DATA 1\n#define HAS_DATA 2\n\n@implementation WorkerThread\nstatic NSConditionLock *_condLock;\nstatic NSMutableArray *_queue;\n\n+ (void)initialize\n{\n    if (self == [WorkerThread class]) {\n        _condLock = [[NSConditionLock alloc] initWithCondition:NO_DATA];\n        _queue = [NSMutableArray new];\n    }\n}\n\n- (void)main\n{\n    // Until cancelled, wait for data, and then process it.\n    while (!self.cancelled)\n    {\n        [_condLock lockWhenCondition:HAS_DATA];\n        id data = [_queue firstObject];\n        [_queue removeObjectAtIndex:0];\n        [_condLock unlockWithCondition:(_queue.count == 0 ? NO_DATA : HAS_DATA)];\n\n        // Process data\n    }\n}\n\n// Submit work to the queue\n+ (void)submitWork:(id)data {\n    [_condLock lock];\n    [_queue addObject:data];\n    [_condLock unlockWithCondition:HAS_DATA];\n}\n\n@end\n</code></pre>\n\n<p>You'd spawn up some threads like:</p>\n\n<pre><code>workers = @[[WorkerThread new], [WorkerThread new]];\nfor (worker in workers) {\n    [worker start];\n}\n\n[WorkerThread submitWork: data];\n</code></pre>\n\n<p>And you'd shut down threads like:</p>\n\n<pre><code>for (worker in workers) {\n    [worker cancel];\n}\n</code></pre>\n"}], "owner": {"reputation": 940, "user_id": 2439750, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/e9af54206662a497b6c47080d4b924b7?s=128&d=identicon&r=PG", "display_name": "Eugene Alexeev", "link": "https://stackoverflow.com/users/2439750/eugene-alexeev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568385792, "creation_date": 1568370686, "last_edit_date": 1568371628, "question_id": 57921951, "link": "https://stackoverflow.com/questions/57921951/correct-usage-of-secondary-nsthread-with-nsrunloop", "title": "Correct usage of secondary NSThread with NSRunLoop", "body": "<p>I have a performance-sensitive code, working with frames of video-playback in real time. I have some work here which can be parallelised and since it's a performance-sensitive code where latency is the key I decided to go with <code>NSThread</code> instead of <code>GCD</code>.</p>\n\n<p>What I need: I need to have <code>NSThread</code> which will be scheduled with some work at a certain period of time. After the thread is done with its work, it goes to sleep till new work arrives.</p>\n\n<p>Unfortunately, there're not so much info about correct techniques of <code>NSThread</code> usage in the internet, so I assembled my routine based on information bits I managed to find.</p>\n\n<p>You can find the whole workflow above:</p>\n\n<p>1) Init my <code>NSThread</code>. This code is launched only once as it's supposed to.</p>\n\n<pre><code>_myThread = [[NSThread alloc] initWithTarget:self selector:@selector(_backgroundMethod) object:nil];\n _myThread.threadPriority = 0.8;    //max priority is 1.0. Let's try at 0.8 and see how it performs\n[_myThread start];\n</code></pre>\n\n<p>2) <code>_backgroundMethod</code> code:</p>\n\n<pre><code>- (void)_backgroundMethod\n{\n    NSLog(@\"Starting the thread...\");\n    [NSTimer scheduledTimerWithTimeInterval:FLT_MAX target:self selector:@selector(doNothing:) userInfo:nil repeats:YES];\n\n    BOOL done = false;\n    NSRunLoop *runLoop = [NSRunLoop currentRunLoop];\n    do {\n        [runLoop runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];\n    } while (!done);\n}\n\n- (void)doNothing:(NSTimer *)sender { }\n</code></pre>\n\n<p>3) When thread has something to work with I make the next call:</p>\n\n<pre><code>[self performSelector:@selector(_doSomeCalculation) onThread:_myThread withObject:nil waitUntilDone:NO];\n</code></pre>\n\n<p>Which calls next method:</p>\n\n<pre><code>- (void) _doSomeCalculation\n{\n    //do some work here\n}\n</code></pre>\n\n<p>So my question would be:</p>\n\n<p>1) When I init <code>NSThread</code>, I pass a selector. What's the purpose of that selector? As far as I understand, the only purpose of this selector is controlling thread's RunLoop and I should not do any calculations here. So I'm engaging <code>NSRunLoop</code> with an infinite timer just to keep it alive without constant running a <code>while</code> loop. Is that right approach?</p>\n\n<p>2) If I can do a calculation in the selector I'm passing at <code>NSThread</code> init phase - how can I signal NSRunLoop to do one loop those without using <code>performSelector</code>? I think I should not pass the exact same method with <code>performSelector</code> because it would be a mess, right? </p>\n\n<p>I've read a lot of info Apple provided but all of this is almost theoretical and those code samples which provided confused me even more..</p>\n\n<p>Any clarification would be very appreciated. Thanks in advance!</p>\n\n<p><em>EDIT:</em></p>\n\n<p>Also a question - how I can calculate a desired <code>stackSize</code> for my thread? Is there any technique to do that?</p>\n"}, {"tags": ["ios", "objective-c", "image"], "comments": [{"owner": {"reputation": 818, "user_id": 1036754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ar2bm.jpg?s=128&g=1", "display_name": "migs647", "link": "https://stackoverflow.com/users/1036754/migs647"}, "edited": false, "score": 0, "creation_date": 1601865406, "post_id": 57917800, "comment_id": 113528885, "body": "Stumbled on this... isn&#39;t it because you&#39;re checking for depthDat instead of depthData in your if (!depthDat) { line?"}], "answers": [{"comments": [{"owner": {"reputation": 176, "user_id": 5596126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8033a6d7d691a80b3e1105f93da55d2?s=128&d=identicon&r=PG&f=1", "display_name": "Will Loew-Blosser", "link": "https://stackoverflow.com/users/5596126/will-loew-blosser"}, "edited": false, "score": 0, "creation_date": 1619202463, "post_id": 63687400, "comment_id": 118843397, "body": "As of iOS 14.4.2 the above PhotoBrowse example depth code is no longer reading auxImage for depth.. something changed somewhere ! I plan to circle back on this issue soon"}], "tags": [], "owner": {"reputation": 176, "user_id": 5596126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8033a6d7d691a80b3e1105f93da55d2?s=128&d=identicon&r=PG&f=1", "display_name": "Will Loew-Blosser", "link": "https://stackoverflow.com/users/5596126/will-loew-blosser"}, "is_accepted": false, "score": 0, "last_activity_date": 1602536830, "last_edit_date": 1602536830, "creation_date": 1598962271, "answer_id": 63687400, "question_id": 57917800, "link": "https://stackoverflow.com/questions/57917800/get-disparity-or-depth-data-from-phimagemanager/63687400#63687400", "title": "Get Disparity or Depth Data from PHImageManager", "body": "<p>The 2017 WWDC session <a href=\"https://developer.apple.com/videos/play/wwdc2017/508\" rel=\"nofollow noreferrer\">'Editing with Depth'</a> has some guidance, but does not have a full code example.\nYou can use the Apple sample app '<a href=\"https://developer.apple.com/documentation/photokit/browsing_and_modifying_photo_albums\" rel=\"nofollow noreferrer\">PhotoBrowse</a>' to test the methods to access the depth data.</p>\n<p>See my modified PhotoBrowse that loads depth and disparity images. It uses the Accelerate framework vDSP vector functions to normalize disparity to  0..1 rang\n<a href=\"https://github.com/racewalkWill/PhotoBrowseModified\" rel=\"nofollow noreferrer\">https://github.com/racewalkWill/PhotoBrowseModified</a></p>\n<pre><code>    @IBAction func showDepthBtn(_ sender: UIBarButtonItem) {\n        // show the depth data from portrait mode from\n        // iPhone 7 Plus and later camera\n       requestDepthMap(selectedAsset: asset)\n    }\n\n    func requestDepthMap(selectedAsset: PHAsset)  {\n       // may not have depthData in many cases\n       // PH completionHandler may be invoked multiple times\n       var auxImage: CIImage?\n       let options = PHContentEditingInputRequestOptions()\n\n       selectedAsset.requestContentEditingInput(with: options, completionHandler: { input, info in\n           guard let input = input\n               else { NSLog (&quot;contentEditingInput not loaded&quot;)\n                    return\n               }\n            auxImage = CIImage(contentsOf: input.fullSizeImageURL!, options: [CIImageOption.auxiliaryDepth: true])\n\n            if auxImage != nil {\n                let uiImage = UIImage(ciImage: auxImage! )\n                self.imageView.image = uiImage\n            }\n\n       } )\n   }\n</code></pre>\n<p>The key point is the PHAsset requestContentEditingInput completion handler is used to get the auxiliaryDepth (or disparity) ciImage.</p>\n<p>The session demo discussed the scaling and normalization but did not publish any sample code or app. See my modified PhotoBrowse app for normalizing the CVPixelBuffer depth data.</p>\n<p>Also be sure to use the iPhone portrait mode to take a picture with depth. Almost all the images in my personal photo library do not have depth data.</p>\n<p>It's been a while since your question, so you may have worked this out already.</p>\n"}], "owner": {"reputation": 4018, "user_id": 1155948, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2bee0b6f83531af2fc85516f25616913?s=128&d=identicon&r=PG", "display_name": "Andrew Romanov", "link": "https://stackoverflow.com/users/1155948/andrew-romanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1602536830, "creation_date": 1568352922, "last_edit_date": 1568387237, "question_id": 57917800, "link": "https://stackoverflow.com/questions/57917800/get-disparity-or-depth-data-from-phimagemanager", "title": "Get Disparity or Depth Data from PHImageManager", "body": "<p>I try to get disparity or depth map from PHAsset. I've found example where the map is got from a image loaded with PHImageMager and implemented it: </p>\n\n<pre><code>- (AVDepthData*)getDepthDataFromSource:(CGImageSourceRef)source \n{\n    NSDictionary* depthData = CFBridgingRelease(CGImageSourceCopyAuxiliaryDataInfoAtIndex(source, 0, kCGImageAuxiliaryDataTypeDepth));\n    if (!depthData){\n        depthData = CFBridgingRelease(CGImageSourceCopyAuxiliaryDataInfoAtIndex(source, 0, kCGImageAuxiliaryDataTypeDisparity));\n    }\n    if (!depthDat)\n        return nil; //code returns here \n\n    NSError* creationError = nil;\n    AVDepthData* data = [AVDepthData depthDataFromDictionaryRepresentation:depthData\n                                                                    error:&amp;creationError];\n    return data;\n}\n\n//from a image\n[[PHImageManager defaultManager]  requestImageForAsset:asset\n                            targetSize:size\n                            contentMode:contentMode\n                            options:requestOptions\n                            resultHandler:^(UIImage * _Nullable result, NSDictionary * _Nullable info) {\n                            CGImageRef im = image.CGImage;\n                            CGImageSourceRef source = CGImageSourceCreateWithDataProvider(CGImageGetDataProvider(im), (CFDictionaryRef)@{});\n                            AVDepthData* data = [self getDepthDataFromSource:source];//data is nil\n                            if (source != nil)\n                            {\n                                CFRelease(source);\n                            }\n                    }];\n\n//from a data\n    PHImageRequestOptions* imageDataRequestOptions = [[PHImageRequestOptions alloc] init];\n    imageDataRequestOptions.networkAccessAllowed = YES;\n    imageDataRequestOptions.deliveryMode = PHImageRequestOptionsDeliveryModeHighQualityFormat;\n    PHImageRequestID requestId = [[PHImageManager defaultManager] requestImageDataForAsset:asset\n                                                                                options:imageDataRequestOptions\n                                                                            resultHandler:^(NSData * _Nullable imageData, NSString * _Nullable dataUTI, UIImageOrientation orientation, NSDictionary * _Nullable info) {\n                                                                                CGImageSourceRef source = CGImageSourceCreateWithData((CFDataRef)imageData, (CFDictionaryRef)@{});\n                                                                                AVDepthData* data = [self getDepthDataFromSource:source];//data is nil\n                                                                                if (source != nil)\n                                                                                {\n                                                                                    CFRelease(source);\n                                                                                }\n                                                                            }\n                                    ];\n\n//from full resolution image\n__block FADisparityDataReader* selfStong = self;\nPHContentEditingInputRequestOptions* options = [[PHContentEditingInputRequestOptions alloc] init];\noptions.networkAccessAllowed = YES;\n[asset requestContentEditingInputWithOptions:options\n                                                        completionHandler:^(PHContentEditingInput * _Nullable contentEditingInput, NSDictionary * _Nonnull info) {\n    NSURL* fullSizePath = [contentEditingInput fullSizeImageURL];\n    CGImageSourceRef source = CGImageSourceCreateWithURL((CFURLRef)fullSizePath, (CFDictionaryRef)@{});\n    @onExit{\n        CFRelease(source);\n    };\n    AVDepthData* data = [self readDepthDataFromSource:source]; //data is not nil\n    complition(data);\n}]; \n</code></pre>\n\n<p>I get depth data only in <code>requestContentEditingInputWithOptions</code> block, but it is too long and I believe that I can get a deep map from PHImageManager images.\nHow I can get the data from PHImageManager? </p>\n"}, {"tags": ["objective-c", "swift", "uistoryboardsegue", "xcode-storyboard", "bridging-header"], "answers": [{"comments": [{"owner": {"reputation": 435, "user_id": 3265430, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/t61yp.jpg?s=128&g=1", "display_name": "Mohd Sadham", "link": "https://stackoverflow.com/users/3265430/mohd-sadham"}, "edited": false, "score": 0, "creation_date": 1568358767, "post_id": 57917037, "comment_id": 102255780, "body": "Everything is connected properly. No issues in outlet connection, class and Module name, Storyboard ID name."}, {"owner": {"reputation": 435, "user_id": 3265430, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/t61yp.jpg?s=128&g=1", "display_name": "Mohd Sadham", "link": "https://stackoverflow.com/users/3265430/mohd-sadham"}, "edited": false, "score": 0, "creation_date": 1568358790, "post_id": 57917037, "comment_id": 102255796, "body": "Did you try to push from Swift VC to ObjC Vc before?"}, {"owner": {"reputation": 382, "user_id": 6439127, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Rx80AkG5x70/AAAAAAAAAAI/AAAAAAAADgk/xAvBnffL8JQ/photo.jpg?sz=128", "display_name": "antonio yaphiar", "link": "https://stackoverflow.com/users/6439127/antonio-yaphiar"}, "reply_to_user": {"reputation": 435, "user_id": 3265430, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/t61yp.jpg?s=128&g=1", "display_name": "Mohd Sadham", "link": "https://stackoverflow.com/users/3265430/mohd-sadham"}, "edited": false, "score": 0, "creation_date": 1568360711, "post_id": 57917037, "comment_id": 102256619, "body": "I use combined swiftVC and objcVC for years, based on your error it is the problem in the yyylabel, try check the yyylabel in you code and your layout. there is no problem pushing swiftvc and objcvc.  As long it not using swiftUI *need fully swift code currently"}, {"owner": {"reputation": 382, "user_id": 6439127, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Rx80AkG5x70/AAAAAAAAAAI/AAAAAAAADgk/xAvBnffL8JQ/photo.jpg?sz=128", "display_name": "antonio yaphiar", "link": "https://stackoverflow.com/users/6439127/antonio-yaphiar"}, "reply_to_user": {"reputation": 435, "user_id": 3265430, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/t61yp.jpg?s=128&g=1", "display_name": "Mohd Sadham", "link": "https://stackoverflow.com/users/3265430/mohd-sadham"}, "edited": false, "score": 0, "creation_date": 1568360801, "post_id": 57917037, "comment_id": 102256653, "body": "maybe you forget adding storyboardID for that class in the storyboard mohd"}, {"owner": {"reputation": 17713, "user_id": 1801544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CcSB.jpg?s=128&g=1", "display_name": "Larme", "link": "https://stackoverflow.com/users/1801544/larme"}, "edited": false, "score": 0, "creation_date": 1568361900, "post_id": 57917037, "comment_id": 102257115, "body": "I remove the html tag interpretation of the error. The VC is considered as a UIViewController by default (missing module ?), not related to linked (for now) Outlet issue."}, {"owner": {"reputation": 382, "user_id": 6439127, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Rx80AkG5x70/AAAAAAAAAAI/AAAAAAAADgk/xAvBnffL8JQ/photo.jpg?sz=128", "display_name": "antonio yaphiar", "link": "https://stackoverflow.com/users/6439127/antonio-yaphiar"}, "edited": false, "score": 0, "creation_date": 1568362516, "post_id": 57917037, "comment_id": 102257384, "body": "Have you creating bridging module for swift to objc? otherwise the objc class won&#39;t detected in the swift porhect"}, {"owner": {"reputation": 435, "user_id": 3265430, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/t61yp.jpg?s=128&g=1", "display_name": "Mohd Sadham", "link": "https://stackoverflow.com/users/3265430/mohd-sadham"}, "edited": false, "score": 0, "creation_date": 1568364546, "post_id": 57917037, "comment_id": 102258351, "body": "Whatever you spot the points are everything is configured correctly and completely."}, {"owner": {"reputation": 435, "user_id": 3265430, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/t61yp.jpg?s=128&g=1", "display_name": "Mohd Sadham", "link": "https://stackoverflow.com/users/3265430/mohd-sadham"}, "edited": false, "score": 0, "creation_date": 1568364604, "post_id": 57917037, "comment_id": 102258377, "body": "Actually, yyyLabel is first outlet declared in that class. If its any other outlet declared at first also causing same issue."}, {"owner": {"reputation": 382, "user_id": 6439127, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Rx80AkG5x70/AAAAAAAAAAI/AAAAAAAADgk/xAvBnffL8JQ/photo.jpg?sz=128", "display_name": "antonio yaphiar", "link": "https://stackoverflow.com/users/6439127/antonio-yaphiar"}, "edited": false, "score": 0, "creation_date": 1568364734, "post_id": 57917037, "comment_id": 102258435, "body": "Is the story return nil? Have you tried put the vc in the nib?"}], "tags": [], "owner": {"reputation": 382, "user_id": 6439127, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Rx80AkG5x70/AAAAAAAAAAI/AAAAAAAADgk/xAvBnffL8JQ/photo.jpg?sz=128", "display_name": "antonio yaphiar", "link": "https://stackoverflow.com/users/6439127/antonio-yaphiar"}, "is_accepted": false, "score": 0, "last_activity_date": 1568346348, "creation_date": 1568346348, "answer_id": 57917037, "question_id": 57916872, "link": "https://stackoverflow.com/questions/57916872/push-perform-segue-from-swift-vc-to-objective-c-vc-not-working/57917037#57917037", "title": "Push / Perform segue from Swift VC to Objective-C VC not working", "body": "<p>I see your problem is basically on the interface builder. </p>\n\n<p>If the error is \"*** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[ setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key yyyLabel.\" then it's the source \"yyyLabel\" on you code deleted on the xib/storyboard but you access it on your class.</p>\n\n<p>Check again your class in xib/storyboard, check the outlets don't have any warning.</p>\n"}], "owner": {"reputation": 435, "user_id": 3265430, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/t61yp.jpg?s=128&g=1", "display_name": "Mohd Sadham", "link": "https://stackoverflow.com/users/3265430/mohd-sadham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568361845, "creation_date": 1568344582, "last_edit_date": 1568361845, "question_id": 57916872, "link": "https://stackoverflow.com/questions/57916872/push-perform-segue-from-swift-vc-to-objective-c-vc-not-working", "title": "Push / Perform segue from Swift VC to Objective-C VC not working", "body": "<p>My project was developed in Swift. We want to add one feature which was already implemented in Objective-C. When I try to push from my Swift VC to that Objective-C VC then, I received below warning and push not successful.</p>\n\n<p>I confirmed that bridging header and other build settings has been configured perfectly.</p>\n\n<blockquote>\n  <p>I have 2 ObjC VC files. One VC is completely designed in code so there is no problem to push to that VC. But, in other is designed in segue that i can't push/show from my Swift VC.</p>\n</blockquote>\n\n<p><strong>Using Navigation Push:</strong></p>\n\n<p><code>let story = UIStoryboard(name: \"Main\", bundle: nil)\n let vc = story.instantiateViewController(withIdentifier: \"XXXViewController\") as? XXXViewController // vc always returns nil\nif let vc = vc {\n            navigationController?.pushViewController(vc, animated: true) // can't compile because of vc is nil\n        }</code></p>\n\n<p><strong>Warning:</strong></p>\n\n<blockquote>\n  <p>Unknown class _TtC12ProjectName36XXXViewController in Interface Builder file.</p>\n</blockquote>\n\n<p><strong>Using Segue:</strong></p>\n\n<p><code>self.performSegue(withIdentifier: \"HomeToXXXVc\", sender: self)</code></p>\n\n<p><strong>Error:</strong></p>\n\n<blockquote>\n  <p>Unknown class _TtC12ProjectName36XXXViewController in Interface Builder file.</p>\n  \n  <p>*** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[&lt; UIViewController 0x10132ef60 > setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key yyyLabel. </p>\n</blockquote>\n\n<p><em>// yyyLabel - One of outlet of Objective-C Vc.</em></p>\n"}, {"tags": ["objective-c", "uitableview", "cell", "ios13", "ios-darkmode"], "answers": [{"comments": [{"owner": {"reputation": 521, "user_id": 183804, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/25a82b546e850473c4b3526c21178554?s=128&d=identicon&r=PG", "display_name": "user183804", "link": "https://stackoverflow.com/users/183804/user183804"}, "edited": false, "score": 0, "creation_date": 1568423180, "post_id": 57916187, "comment_id": 102280599, "body": "I substituted the code that you provided, but unfortunately it reproduced the same Dark Mode behavior that I am trying to solve.  That is, the unoccupied portions of the tableview remain white, but only under the first tab.  The unoccupied tableview space is appropriately black in the second and third tabs of the app when in Dark Mode, using the same code as the tableview in the first tab."}, {"owner": {"reputation": 297030, "user_id": 1226963, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/yjY1E.png?s=128&g=1", "display_name": "rmaddy", "link": "https://stackoverflow.com/users/1226963/rmaddy"}, "reply_to_user": {"reputation": 521, "user_id": 183804, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/25a82b546e850473c4b3526c21178554?s=128&d=identicon&r=PG", "display_name": "user183804", "link": "https://stackoverflow.com/users/183804/user183804"}, "edited": false, "score": 1, "creation_date": 1568425264, "post_id": 57916187, "comment_id": 102280777, "body": "You need to set the table view&#39;s background, not just the cells."}, {"owner": {"reputation": 521, "user_id": 183804, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/25a82b546e850473c4b3526c21178554?s=128&d=identicon&r=PG", "display_name": "user183804", "link": "https://stackoverflow.com/users/183804/user183804"}, "edited": false, "score": 1, "creation_date": 1568468193, "post_id": 57916187, "comment_id": 102288006, "body": "Thanks for the help!  The unoccupied portions of the tableview now are colored appropriately white or black, depending upon Dark Mode status, with this added code: self.tableView.backgroundColor = [UIColor systemBackgroundColor];"}], "tags": [], "owner": {"reputation": 297030, "user_id": 1226963, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/yjY1E.png?s=128&g=1", "display_name": "rmaddy", "link": "https://stackoverflow.com/users/1226963/rmaddy"}, "is_accepted": true, "score": 12, "last_activity_date": 1568337170, "creation_date": 1568337170, "answer_id": 57916187, "question_id": 57916118, "link": "https://stackoverflow.com/questions/57916118/custom-cell-in-uitableview-not-working-properly-in-ios-13-dark-mode/57916187#57916187", "title": "Custom cell in UITableView not working properly in iOS 13 Dark Mode", "body": "<p>You need to be using the proper colors, the ones that automatically adapt between light and dark mode.</p>\n\n<p>Avoid colors like <code>whiteColor</code> and <code>blackColor</code>. Use <code>labelColor</code> and <code>systemBackgroundColor</code>. Use those colors for the cells and the table view. Then you don't need to have any code that checks the current traits or interface style.</p>\n\n<p>Code such as:</p>\n\n<pre><code>if (self.traitCollection.userInterfaceStyle == UIUserInterfaceStyleDark) { //Dark mode\n    cell.calculationLabel.textColor = [UIColor whiteColor];\n    cell.calculationLabel.backgroundColor = [UIColor blackColor];\n    cell.statusLabel.backgroundColor = [UIColor blackColor];\n    cell.favoriteStatus.backgroundColor = [UIColor blackColor];\n    cell.backgroundColor = [UIColor blackColor];\n} else { //Light mode\n    cell.calculationLabel.textColor = [UIColor blackColor];\n    cell.calculationLabel.backgroundColor = [UIColor whiteColor];\n    cell.statusLabel.backgroundColor = [UIColor whiteColor];\n    cell.favoriteStatus.backgroundColor = [UIColor whiteColor];\n    cell.backgroundColor = [UIColor whiteColor];\n}\n</code></pre>\n\n<p>becomes:</p>\n\n<pre><code>cell.calculationLabel.textColor = UIColor.labelColor;\ncell.calculationLabel.backgroundColor = UIColor.systemBackgroundColor;\ncell.statusLabel.backgroundColor = UIColor.systemBackgroundColor;\ncell.favoriteStatus.backgroundColor = UIColor.systemBackgroundColor;\ncell.backgroundColor = UIColor.systemBackgroundColor;\n</code></pre>\n"}], "owner": {"reputation": 521, "user_id": 183804, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/25a82b546e850473c4b3526c21178554?s=128&d=identicon&r=PG", "display_name": "user183804", "link": "https://stackoverflow.com/users/183804/user183804"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5344, "favorite_count": 0, "accepted_answer_id": 57916187, "answer_count": 1, "score": 5, "last_activity_date": 1568337170, "creation_date": 1568336427, "last_edit_date": 1568336962, "question_id": 57916118, "link": "https://stackoverflow.com/questions/57916118/custom-cell-in-uitableview-not-working-properly-in-ios-13-dark-mode", "title": "Custom cell in UITableView not working properly in iOS 13 Dark Mode", "body": "<p>I have used, since 2011, Objective-C code for my medical application, which basically has 5 tabs with associated UITableViews, 3 of which use custom cells. Initially with using Dark Mode I found that the custom cells did not change to Dark Mode automatically. Instead, I needed to implement the code below to test for Dark Mode and make cell text and background changes accordingly.</p>\n\n<p>The problem is that the Dark Mode changes do not occur for empty cells in the first tab, above or below the filled cells; they remain blank white.  However, similar, empty cells in the UITableViews associated with the second 2 tabs DO behave as expected in Dark Mode.</p>\n\n<p>The sample images below show the cells displayed by the first and third tabs. I'm wondering at this point if there is a bug in the OS, or whether I just am not implementing the proper change, to explain why Dark Mode does not work properly in the first tab only.</p>\n\n<pre><code>- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { \n    static NSString *CustomCellIdentifier = @\"CustomCellIdentifier \"; \n\n    CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier: CustomCellIdentifier]; \n    if (cell == nil) {\n        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@\"CustomCell\" owner:self options:nil];\n        for (id oneObject in nib)\n            if ([oneObject isKindOfClass:[CustomCell class]])\n                cell = (CustomCell *)oneObject;\n    } \n\n    NSDictionary *dictionary = [self.tableDataSource objectAtIndex:indexPath.row];\n\n    cell.calculationLabel.text = [dictionary objectForKey:@\"Title\"];\n    [cell.calculationLabel setLineBreakMode:NSLineBreakByWordWrapping];\n    cell.calculationLabel.numberOfLines = 0;\n\n    //Make color changes in cells relevant to Dark mode, if present.\n    if (self.traitCollection.userInterfaceStyle == UIUserInterfaceStyleDark) { //Dark mode\n        cell.calculationLabel.textColor = [UIColor whiteColor];\n        cell.calculationLabel.backgroundColor = [UIColor blackColor];\n        cell.statusLabel.backgroundColor = [UIColor blackColor];\n        cell.favoriteStatus.backgroundColor = [UIColor blackColor];\n        cell.backgroundColor = [UIColor blackColor];\n    } else { //Light mode\n        cell.calculationLabel.textColor = [UIColor blackColor];\n        cell.calculationLabel.backgroundColor = [UIColor whiteColor];\n        cell.statusLabel.backgroundColor = [UIColor whiteColor];\n        cell.favoriteStatus.backgroundColor = [UIColor whiteColor];\n        cell.backgroundColor = [UIColor whiteColor];\n    }\n\n    cell.statusLabel.textColor = [UIColor systemGreenColor];\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/JaS3K.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/JaS3K.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/74IzL.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/74IzL.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["objective-c", "unit-testing"], "comments": [{"owner": {"reputation": 1772, "user_id": 9046550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea568a8fae3a61492df7b3784c4a3f1b?s=128&d=identicon&r=PG&f=1", "display_name": "Shreeram Bhat", "link": "https://stackoverflow.com/users/9046550/shreeram-bhat"}, "edited": false, "score": 0, "creation_date": 1568346814, "post_id": 57915412, "comment_id": 102252436, "body": "You can&#39;t create an instance of Obj-C SubClass without calling super class initialiser."}, {"owner": {"reputation": 1772, "user_id": 9046550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea568a8fae3a61492df7b3784c4a3f1b?s=128&d=identicon&r=PG&f=1", "display_name": "Shreeram Bhat", "link": "https://stackoverflow.com/users/9046550/shreeram-bhat"}, "edited": false, "score": 0, "creation_date": 1568346895, "post_id": 57915412, "comment_id": 102252451, "body": "Rather than trying to call init you can assume some default values for it&#39;s designated  initialiser and call it inside SubClass init method."}, {"owner": {"reputation": 1833, "user_id": 1269987, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/109257bc96f7c7102148e6e02a361405?s=128&d=identicon&r=PG", "display_name": "dylanjha", "link": "https://stackoverflow.com/users/1269987/dylanjha"}, "reply_to_user": {"reputation": 1772, "user_id": 9046550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea568a8fae3a61492df7b3784c4a3f1b?s=128&d=identicon&r=PG&f=1", "display_name": "Shreeram Bhat", "link": "https://stackoverflow.com/users/9046550/shreeram-bhat"}, "edited": false, "score": 0, "creation_date": 1568396256, "post_id": 57915412, "comment_id": 102273751, "body": "@ShreeramBhat thanks for your suggestion! If possible do you mind showing me with an example? Right now, when I call <code>[super init]</code> the compiler complains and says <code>&#39;init&#39; is unavailable</code>, when I look more into this I can see the init method is protected with <code>NS_UNAVAILABLE</code>"}, {"owner": {"reputation": 1772, "user_id": 9046550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea568a8fae3a61492df7b3784c4a3f1b?s=128&d=identicon&r=PG&f=1", "display_name": "Shreeram Bhat", "link": "https://stackoverflow.com/users/9046550/shreeram-bhat"}, "edited": false, "score": 0, "creation_date": 1568396531, "post_id": 57915412, "comment_id": 102273862, "body": "If you look at the class interface you can see init methods with NS_DESIGNATED_INITIALIZER  macro. Use that init methods for your purpose."}, {"owner": {"reputation": 1772, "user_id": 9046550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea568a8fae3a61492df7b3784c4a3f1b?s=128&d=identicon&r=PG&f=1", "display_name": "Shreeram Bhat", "link": "https://stackoverflow.com/users/9046550/shreeram-bhat"}, "edited": false, "score": 0, "creation_date": 1568396639, "post_id": 57915412, "comment_id": 102273909, "body": "For more info <a href=\"https://stackoverflow.com/questions/26185239/ios-designated-initializers-using-ns-designated-initializer\" title=\"ios designated initializers using ns designated initializer\">stackoverflow.com/questions/26185239/&hellip;</a>"}, {"owner": {"reputation": 1833, "user_id": 1269987, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/109257bc96f7c7102148e6e02a361405?s=128&d=identicon&r=PG", "display_name": "dylanjha", "link": "https://stackoverflow.com/users/1269987/dylanjha"}, "reply_to_user": {"reputation": 1772, "user_id": 9046550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea568a8fae3a61492df7b3784c4a3f1b?s=128&d=identicon&r=PG&f=1", "display_name": "Shreeram Bhat", "link": "https://stackoverflow.com/users/9046550/shreeram-bhat"}, "edited": false, "score": 0, "creation_date": 1568397210, "post_id": 57915412, "comment_id": 102274113, "body": "Oh, that makes more sense! But the interface is here, I don&#39;t see the NS_DESIGNATED_INITIALIZER macro: <a href=\"https://github.com/kaltura/player-sdk-demo-ios/blob/master/ovp/IMADemo/GoogleInteractiveMediaAds.framework/Versions/A/Headers/IMAAdEvent.h\" rel=\"nofollow noreferrer\">github.com/kaltura/player-sdk-demo-ios/blob/master/ovp/IMADe&zwnj;&#8203;mo/&hellip;</a>"}, {"owner": {"reputation": 1772, "user_id": 9046550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea568a8fae3a61492df7b3784c4a3f1b?s=128&d=identicon&r=PG&f=1", "display_name": "Shreeram Bhat", "link": "https://stackoverflow.com/users/9046550/shreeram-bhat"}, "edited": false, "score": 0, "creation_date": 1568398531, "post_id": 57915412, "comment_id": 102274576, "body": "Ok. That class is not allowing outsiders to initialise. Only some special class inside the library is the only one that can initialise it. You can also notice that all the properties are readOnly. So the purpose of that class is just give  info. to users."}, {"owner": {"reputation": 1833, "user_id": 1269987, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/109257bc96f7c7102148e6e02a361405?s=128&d=identicon&r=PG", "display_name": "dylanjha", "link": "https://stackoverflow.com/users/1269987/dylanjha"}, "reply_to_user": {"reputation": 1772, "user_id": 9046550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea568a8fae3a61492df7b3784c4a3f1b?s=128&d=identicon&r=PG&f=1", "display_name": "Shreeram Bhat", "link": "https://stackoverflow.com/users/9046550/shreeram-bhat"}, "edited": false, "score": 0, "creation_date": 1568401364, "post_id": 57915412, "comment_id": 102275651, "body": "Right, so that makes it difficult to create for my unit tests :/ thank you :)"}], "answers": [{"tags": [], "owner": {"reputation": 1833, "user_id": 1269987, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/109257bc96f7c7102148e6e02a361405?s=128&d=identicon&r=PG", "display_name": "dylanjha", "link": "https://stackoverflow.com/users/1269987/dylanjha"}, "is_accepted": false, "score": 0, "last_activity_date": 1568401855, "last_edit_date": 1568401855, "creation_date": 1568334392, "answer_id": 57915937, "question_id": 57915412, "link": "https://stackoverflow.com/questions/57915412/how-to-initialize-a-subclass-when-the-init-method-of-the-superclass-is-ns-unavai/57915937#57915937", "title": "How to initialize a subclass when the init method of the superclass is NS_UNAVAILABLE", "body": "<p>If I use a method that's not called <code>init</code> then this seems to work. It still seems really weird to not call <code>[super init]</code> in this function, but it's working and returning a new instance of the <code>MockImaAdEvent</code> class</p>\n\n<pre><code>@interface MockImaAdEvent : IMAAdEvent {\n    enum IMAAdEventType type;\n}\n    @property (nonatomic) enum IMAAdEventType type;\n@end\n\n@implementation MockImaAdEvent\n\n@synthesize type;\n\n- (id)initWithType:(NSInteger)_type {\n    type = _type;\n    return self;\n}\n@end\n\n// in my test I can initialize like this:\nMockImaAdEvent *adEvent = [[MockImaAdEvent alloc] initWithType:kIMAAdEvent_LOADED];\n</code></pre>\n"}], "owner": {"reputation": 1833, "user_id": 1269987, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/109257bc96f7c7102148e6e02a361405?s=128&d=identicon&r=PG", "display_name": "dylanjha", "link": "https://stackoverflow.com/users/1269987/dylanjha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568401855, "creation_date": 1568329012, "question_id": 57915412, "link": "https://stackoverflow.com/questions/57915412/how-to-initialize-a-subclass-when-the-init-method-of-the-superclass-is-ns-unavai", "title": "How to initialize a subclass when the init method of the superclass is NS_UNAVAILABLE", "body": "<p>I'm attempting to write a test for an objective-c class. The class I'm trying to test is <code>MyClass</code> and it looks like this:</p>\n\n<pre><code>@interface MyClass : NSObject\n- (void)dispatchEvent:(IMAAdEvent *)event;\n@end\n</code></pre>\n\n<p>In order to test this <code>dispatchEvent</code> method, I need to pass in an instance of <code>IMAAdEvent</code>. The <code>IMAAdEvent</code> class comes from Google's library <code>GoogleAds-IMA-iOS-SDK</code>.</p>\n\n<p>Unfortunately, I can't call <code>init</code> on this class because the init method is marked as <code>NS_UNAVAILABLE</code>. In XCode I get an error that reflects this:</p>\n\n<blockquote>\n  <p>'init' in unavailable</p>\n</blockquote>\n\n<p>Ideally, I would like to make my own mock subclass of <code>IMAAdEvent</code> like this. Is there some way I can initialize my subclass without calling the unavailable init method on the superclass?:</p>\n\n<pre><code>@interface MockImaAdEvent : IMAAdEvent\n@end\n\n@implementation MockImaAdEvent\n- (id)init {\n  // is there something I can do here so that I return an instances\n  // of the subclass without calling [super init]?\n}\n@end\n</code></pre>\n"}, {"tags": ["objective-c", "swift", "objective-c++"], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 8953759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b281508cff69e05da3b01aa98f1f319?s=128&d=identicon&r=PG&f=1", "display_name": "Mehmet Baykar", "link": "https://stackoverflow.com/users/8953759/mehmet-baykar"}, "is_accepted": false, "score": 0, "last_activity_date": 1568325119, "creation_date": 1568325119, "answer_id": 57914941, "question_id": 57914899, "link": "https://stackoverflow.com/questions/57914899/module-swift-h-file-not-found-in-mm-file-in-building-unity-swift-framework/57914941#57914941", "title": "module-Swift.h file not found in mm file in building Unity-Swift framework", "body": "<p>Here is some info might help;\nClean project folder,\nCheck the location address of the bridging header file in the build settings\nBe sure framework is integrated to project.\nAlso check if the bridging header has all the class that has to communicate each other.</p>\n"}], "owner": {"reputation": 1, "user_id": 11991901, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfx3vhRnV0k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcG76OlxKuQ9H44Wm3CX--Syfp_fA/photo.jpg?sz=128", "display_name": "fullstack develop", "link": "https://stackoverflow.com/users/11991901/fullstack-develop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1568325119, "creation_date": 1568324802, "question_id": 57914899, "link": "https://stackoverflow.com/questions/57914899/module-swift-h-file-not-found-in-mm-file-in-building-unity-swift-framework", "title": "module-Swift.h file not found in mm file in building Unity-Swift framework", "body": "<p>I followed this URL.\n<a href=\"https://medium.com/@kevinhuyskens/implementing-swift-in-unity-53e0b668f895\" rel=\"nofollow noreferrer\">https://medium.com/@kevinhuyskens/implementing-swift-in-unity-53e0b668f895</a></p>\n\n<p>But I have issues.<a href=\"https://i.stack.imgur.com/H4xm4.png\" rel=\"nofollow noreferrer\">I have attached issue image</a></p>\n"}, {"tags": ["objective-c"], "answers": [{"comments": [{"owner": {"reputation": 1080, "user_id": 2246630, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/e0d5b139482c76f9727c369846aebe67?s=128&d=identicon&r=PG", "display_name": "bhartsb", "link": "https://stackoverflow.com/users/2246630/bhartsb"}, "edited": false, "score": 0, "creation_date": 1568326469, "post_id": 57915011, "comment_id": 102248897, "body": "Yes that is what I thought.  So you are saying it is wrong, correct?  Xcode won&#39;t warn because it is returned from a dictionary and doesn&#39;t know what type it is, agree?"}, {"owner": {"reputation": 160387, "user_id": 25646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bb7953f53aa7715c72054c3d54e7b48?s=128&d=identicon&r=PG", "display_name": "bbum", "link": "https://stackoverflow.com/users/25646/bbum"}, "reply_to_user": {"reputation": 1080, "user_id": 2246630, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/e0d5b139482c76f9727c369846aebe67?s=128&d=identicon&r=PG", "display_name": "bhartsb", "link": "https://stackoverflow.com/users/2246630/bhartsb"}, "edited": false, "score": 0, "creation_date": 1568393745, "post_id": 57915011, "comment_id": 102272803, "body": "Right.   You can use the generics syntax to make the dictionary typing more explicitly.   <code>NSDictionary&lt;NSString *, CIImage *&gt;*</code> IIRC."}], "tags": [], "owner": {"reputation": 160387, "user_id": 25646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bb7953f53aa7715c72054c3d54e7b48?s=128&d=identicon&r=PG", "display_name": "bbum", "link": "https://stackoverflow.com/users/25646/bbum"}, "is_accepted": false, "score": 2, "last_activity_date": 1568325620, "creation_date": 1568325620, "answer_id": 57915011, "question_id": 57914756, "link": "https://stackoverflow.com/questions/57914756/instantiating-object-from-class-type-in-objective-c/57915011#57915011", "title": "Instantiating object from class type in Objective-C", "body": "<p><code>CIImage *image = inputs[@\"Image\"];</code> defines <code>image</code> to be a pointer to an <em>instance</em> of <code>CIImage</code>, but you've assigned a pointer to the <code>CIImage</code> class to that variable.</p>\n"}, {"comments": [{"owner": {"reputation": 1080, "user_id": 2246630, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/e0d5b139482c76f9727c369846aebe67?s=128&d=identicon&r=PG", "display_name": "bhartsb", "link": "https://stackoverflow.com/users/2246630/bhartsb"}, "edited": false, "score": 0, "creation_date": 1568438305, "post_id": 57915448, "comment_id": 102282111, "body": "Thanks for pointing that out!  I added the overloaded versions of this method into my OP.  I&#39;d be interested in your opinion of the code.  To me it seems almost purposefully convoluted."}, {"owner": {"reputation": 12147, "user_id": 4244136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ee698ef15036e2393a30962db90cfa3?s=128&d=identicon&r=PG&f=1", "display_name": "Willeke", "link": "https://stackoverflow.com/users/4244136/willeke"}, "reply_to_user": {"reputation": 1080, "user_id": 2246630, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/e0d5b139482c76f9727c369846aebe67?s=128&d=identicon&r=PG", "display_name": "bhartsb", "link": "https://stackoverflow.com/users/2246630/bhartsb"}, "edited": false, "score": 0, "creation_date": 1568541815, "post_id": 57915448, "comment_id": 102300412, "body": "I think it&#39;s a coding style: blocks instead of classes and methods."}], "tags": [], "owner": {"reputation": 12147, "user_id": 4244136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ee698ef15036e2393a30962db90cfa3?s=128&d=identicon&r=PG&f=1", "display_name": "Willeke", "link": "https://stackoverflow.com/users/4244136/willeke"}, "is_accepted": true, "score": 3, "last_activity_date": 1568329326, "creation_date": 1568329326, "answer_id": 57915448, "question_id": 57914756, "link": "https://stackoverflow.com/questions/57914756/instantiating-object-from-class-type-in-objective-c/57915448#57915448", "title": "Instantiating object from class type in Objective-C", "body": "<p>The <code>inputs:@{ @\"Image\" : CIImage.class }</code> argument of the method and the <code>NSDictionary *inputs</code> argument of the block are not the same <code>inputs</code> dictionary.</p>\n\n<pre><code>[KZNNodeType registerType:name\n    inputs:@{ @\"Image\" : CIImage.class }    // argument of [[KZNNodeType registerType:inputs:outputs:processingBlock:]\n    outputs:@{ @\"Output\" : CIImage.class }\n    processingBlock:^(id node, NSDictionary *inputs, NSMutableDictionary *outputs) {\n        //processing Block definition\n        CIImage *image = inputs[@\"Image\"];  // inputs argument of the block, inputs[@\"Image\"] returns a CIImage*\n        if (!image) {\n            return;\n        }\n        CIFilter *filter = [CIFilter filterWithName:filterName keysAndValues:kCIInputImageKey, image, nil];\n        CIImage *outputImage = [filter outputImage];\n        outputs[@\"Output\"] = outputImage;\n    }\n];\n</code></pre>\n"}], "owner": {"reputation": 1080, "user_id": 2246630, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/e0d5b139482c76f9727c369846aebe67?s=128&d=identicon&r=PG", "display_name": "bhartsb", "link": "https://stackoverflow.com/users/2246630/bhartsb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 57915448, "answer_count": 2, "score": 0, "last_activity_date": 1568438115, "creation_date": 1568323826, "last_edit_date": 1568438115, "question_id": 57914756, "link": "https://stackoverflow.com/questions/57914756/instantiating-object-from-class-type-in-objective-c", "title": "Instantiating object from class type in Objective-C", "body": "<p>I'm trying to understand someone else's code and it isn't making sense to me to me how it seems like the code is instantiating an object from the class type:</p>\n\n<pre><code>[KZNNodeType registerType:name inputs:@{ @\"Image\" : CIImage.class } outputs:@{ @\"Output\" : CIImage.class } processingBlock:^(id node, NSDictionary *inputs, NSMutableDictionary *outputs)\n    {\n        //processing Block definition\n        CIImage *image = inputs[@\"Image\"];\n          if (!image) {\n            return;\n          }\n\n        CIFilter *filter = [CIFilter filterWithName:filterName\n                                   keysAndValues:kCIInputImageKey, image, nil];\n        CIImage *outputImage = [filter outputImage];\n        outputs[@\"Output\"] = outputImage;\n    }\n     ];\n</code></pre>\n\n<p>In the above the \"inputs\" parameter passed is a dictionary with one item \"Image\" : CIImage.class</p>\n\n<p>then it looks like an object is being instantiated with the line:</p>\n\n<pre><code>CIImage *image = inputs[@\"Image\"];\n</code></pre>\n\n<p>If I try this:</p>\n\n<pre><code>CIImage * image = CIImage.class\n</code></pre>\n\n<p>I get a warning \"Incompatible pointer types initializing 'CIImage *' with an expression of type 'Class'\"</p>\n\n<p>Can anyone shed light?</p>\n\n<p>Per the answer I decided to show the overloaded versions of registerType.  I nearly went cross-eyed trying to make sense of them.  It seems like the author was purposefully trying to make it hard to follow (I added what comments and indentation there is)  Is it just my opinion or is this code needlessly convoluted???:</p>\n\n<pre><code>+ (KZNNodeType *)registerType:(NSString *)typeName inputs:(NSDictionary *)inputs outputs:(NSDictionary *)outputs processingBlock:(void (^)(id, NSDictionary *, NSMutableDictionary *))processingBlock\n{\n  //call more specialized registerType adding Class parameter\n    return [self registerType:typeName withClass:KZNNode.class inputs:inputs outputs:outputs processingBlock:processingBlock];\n}\n\n+ (KZNNodeType *)registerType:(NSString *)typeName withClass:(Class)nodeClass inputs:(NSDictionary *)inputs outputs:(NSDictionary *)outputs processingBlock:(void (^)(id node, NSDictionary *inputs, NSMutableDictionary *outputs))processingBlock\n{\n  //call even more specialized registerType with a closure/block that assigns to the type the captured variables\n    return [self registerType:typeName withBuilder:^(KZNNodeType *type)\n    {\n        type.baseNodeClass = nodeClass;\n        [inputs enumerateKeysAndObjectsUsingBlock:(void (^)(id, id, BOOL *))^(NSString *name, Class dataType, BOOL *stop) {\n          // If the block sets *stop to YES, the enumeration stops.\n            [type addSocket:KZNNodeSocketTypeInput name:name type:dataType];\n        }];\n\n        [outputs enumerateKeysAndObjectsUsingBlock:(void (^)(id, id, BOOL *))^(NSString *name, Class dataType, BOOL *stop) {\n          [type addSocket:KZNNodeSocketTypeOutput name:name type:dataType];\n    }];\n\n    type.processingBlock = processingBlock;\n  }];\n}\n</code></pre>\n\n<p>Then the processing block gets called in this method:</p>\n\n<pre><code>- (NSDictionary *)evaluateWithTick:(NSUInteger)tick withForwardPropagation:(BOOL)forwardPropagation\n{\n  if (tick != self.evaluationTick) {\n    self.evaluationTick = tick;\n    NSMutableDictionary *evaluation = [NSMutableDictionary new];\n    [self.inputSockets enumerateObjectsUsingBlock:^(KZNSocket *socket, NSUInteger idx, BOOL *stop) {\n      NSDictionary *result = [socket.sourceSocket.parent evaluateWithTick:tick withForwardPropagation:NO];\n      id socketValue = result[socket.sourceSocket.name];\n      if (socketValue) {\n        evaluation[socket.name] = socketValue;\n      }\n    }];\n\n    NSMutableDictionary *evaluationOutput = [NSMutableDictionary new];\n    void (^processingBlock)(id, NSDictionary *, NSMutableDictionary *) = [(id)self.type performSelector:@selector(processingBlock)];\n    processingBlock(self, evaluation, evaluationOutput);\n    self.evaluationResults = evaluationOutput;\n\n    if (forwardPropagation) {\n      [self.outputSockets enumerateObjectsUsingBlock:^(KZNSocket *socket, NSUInteger idx, BOOL *stop) {\n        [socket.connections enumerateObjectsUsingBlock:^(KZNSocket *connectedSocket, BOOL *stop) {\n          [connectedSocket.parent evaluateWithTick:tick withForwardPropagation:forwardPropagation];\n        }];\n      }];\n    }\n  }\n</code></pre>\n"}, {"tags": ["objective-c", "xcode", "skstorereviewcontroller"], "comments": [{"owner": {"reputation": 306, "user_id": 3362195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e5700eb84f38e2029808cbf8f2dcca0?s=128&d=identicon&r=PG&f=1", "display_name": "ODB", "link": "https://stackoverflow.com/users/3362195/odb"}, "edited": false, "score": 0, "creation_date": 1570474209, "post_id": 57913451, "comment_id": 102917498, "body": "It appears this is being caused by us using a wildcard AppId and an &quot;iOS Distribution&quot; profile instead of the newer Apple &quot;Distribution&quot; profile (&quot;For use in Xcode 11 or later&quot;)."}], "owner": {"reputation": 306, "user_id": 3362195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e5700eb84f38e2029808cbf8f2dcca0?s=128&d=identicon&r=PG&f=1", "display_name": "ODB", "link": "https://stackoverflow.com/users/3362195/odb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 363, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1568316903, "creation_date": 1568316903, "question_id": 57913451, "link": "https://stackoverflow.com/questions/57913451/skstorereviewcontroller-with-xcode-11", "title": "SKStore\u200bReview\u200bController With Xcode 11", "body": "<p>We have the StoreKit framework in our iOS (Obj-C) project so that our app will link because we use SKStore\u200bReview\u200bController.</p>\n\n<p>Xcode 11 apparently thinks that since we have the StoreKit framework in our project, we must have In-App Purchase capability; we do not nor do we want it.</p>\n\n<p>We get errors when building on the command-line:</p>\n\n<p>With StoreKit framework in our project:</p>\n\n<pre><code>\"Code Signing Error: Provisioning profile \"xxxx xxxx Ad Hoc Dist Profile\" doesn't support the In-App Purchase capability.\"\n</code></pre>\n\n<p>Without StoreKit framework:</p>\n\n<pre><code>\"Undefined symbols for architecture arm64:\n  \"_OBJC_CLASS_$_SKStoreReviewController\", referenced from: ...\"\n</code></pre>\n\n<p>Building in Xcode IDE <strong>with</strong> the StoreKit framework in the project, the app builds and links, but fails to run on a device (presumably because of the code signing error).</p>\n\n<p>It seems odd that I haven't heard much about this happening to other devs.\nAre we doing something wrong?  Xcode 10 and previous builds fine. </p>\n"}, {"tags": ["ios", "objective-c", "avplayer"], "comments": [{"owner": {"reputation": 12931, "user_id": 436976, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/ca5523dd495f8c0a6a6b20db65db2ef4?s=128&d=identicon&r=PG", "display_name": "stevendesu", "link": "https://stackoverflow.com/users/436976/stevendesu"}, "reply_to_user": {"reputation": 249319, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "edited": false, "score": 0, "creation_date": 1568318525, "post_id": 57913135, "comment_id": 102246509, "body": "@RobNapier I believed they were the same because the seek-forward and seek-back icons looked basically identical as far as my eyes could discern. Even looking at the &quot;1&quot; in 10, they both have a single hook at the top of the one with no base at the bottom, and the hook is approximately 30 degrees below the horizontal and about 1/4th the height of the number. Both Netflix and ESPN have a circle starting at about 45 degrees above the horizontal and continuing counter-clockwise until they are above the &quot;10&quot;, then have a double-arrowhead with sharp corners. You can&#39;t deny the similarity."}, {"owner": {"reputation": 12931, "user_id": 436976, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/ca5523dd495f8c0a6a6b20db65db2ef4?s=128&d=identicon&r=PG", "display_name": "stevendesu", "link": "https://stackoverflow.com/users/436976/stevendesu"}, "reply_to_user": {"reputation": 249319, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "edited": false, "score": 0, "creation_date": 1568318609, "post_id": 57913135, "comment_id": 102246548, "body": "@RobNapier Looking more closely at Hulu and Amazon Prime, I can see the differences in those. Their 1&#39;s are slightly different and the arrow heads are slightly different. I just missed that at a glance. Netflix and ESPN, though -- those are identical. Also, whether or not the icon sets are the same is irrelevant to the general question. Is there some library or framework being used to create these common layouts?"}, {"owner": {"reputation": 249319, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "edited": false, "score": 0, "creation_date": 1568320600, "post_id": 57913135, "comment_id": 102247253, "body": "No; the point of them images is that they all built these from scratch. They&#39;re similar because there are certain common themes that everyone copies, but they&#39;re all unique. (&quot;Scratch&quot; perhaps being excessive. You can build all these on top of AVPlayer just using custom controls. I don&#39;t know how each of these was built.)"}, {"owner": {"reputation": 249319, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "edited": false, "score": 0, "creation_date": 1568320800, "post_id": 57913135, "comment_id": 102247320, "body": "Netflix and ESPN are also not close to identical. Look at the corners on the play triangle. (There are lots of other differences of course, but start there.) We may mean different things by &quot;close.&quot; If you can look at it without a tool like xScope and see differences, IMO it&#39;s not close."}, {"owner": {"reputation": 12931, "user_id": 436976, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/ca5523dd495f8c0a6a6b20db65db2ef4?s=128&d=identicon&r=PG", "display_name": "stevendesu", "link": "https://stackoverflow.com/users/436976/stevendesu"}, "reply_to_user": {"reputation": 249319, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "edited": false, "score": 0, "creation_date": 1568321252, "post_id": 57913135, "comment_id": 102247460, "body": "As I commented, and as I clarified in the question, I was looking at the SEEK buttons which, as far as I can tell, are identical. That said, it&#39;s STILL irrelevant to the question. I find it unbelievable that every single video app built a UI from scratch and they all <b>just happen</b> to look identical. It feels like there may be some framework, library, Cocoapod, or design standard they are all using. Even if they WERE all built from scratch, the question remains how I make my player look like that. How do I make custom elements for an AVPlayerViewController?"}, {"owner": {"reputation": 249319, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "edited": false, "score": 0, "creation_date": 1568323505, "post_id": 57913135, "comment_id": 102248168, "body": "Do you mean the +10 and -10 buttons? They&#39;re not identical either; they have different fonts and different weights. I&#39;ve built these UIs. They&#39;re custom. That&#39;s why they all look different (sometimes very different, sometimes slightly, but none of the ones you&#39;ve shown here are identical). Generally you use custom overlays (see <code>contentOverlayView</code> and <code>customOverlayViewController</code>). They&#39;re mostly just buttons and custom artwork. They&#39;re all built from scratch, and they happen to often look very similar, but not identical."}, {"owner": {"reputation": 6583, "user_id": 2015023, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b436c40d6ac76cd76ce05aadb9fbebcf?s=128&d=identicon&r=PG", "display_name": "Mobile Ben", "link": "https://stackoverflow.com/users/2015023/mobile-ben"}, "edited": false, "score": 0, "creation_date": 1568345800, "post_id": 57913135, "comment_id": 102252279, "body": "Having worked at one of these streaming companies ... custom icons. One thing to also think about. Designs tend to converge on the latest trends. Which is why you see what looks like &quot;identical&quot; designs. For these types of companies, the overhead for doing custom icons and updating the code is trivial."}], "owner": {"reputation": 12931, "user_id": 436976, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/ca5523dd495f8c0a6a6b20db65db2ef4?s=128&d=identicon&r=PG", "display_name": "stevendesu", "link": "https://stackoverflow.com/users/436976/stevendesu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 241, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1568318841, "creation_date": 1568315398, "last_edit_date": 1568318841, "question_id": 57913135, "link": "https://stackoverflow.com/questions/57913135/dumb-question-how-do-i-make-avplayer-look-like-everyone-elses", "title": "Dumb Question: How do I make AVPlayer look like everyone else&#39;s?", "body": "<h2>My Current Setup (Subject to Change)</h2>\n\n<p>I have a simple iOS app right now that plays an M3U8 using AVPlayer. In order to place custom UI elements on top of the player (text alerts, mostly) I jimmy-rigged what is probably a <strong>terrible</strong> architecture, and I'm open to the idea of scrapping the whole thing and starting over.</p>\n\n<ul>\n<li>First I created a new UIView which I called \"MyPlayer\". This UIView has a XIB file with nothing in it</li>\n<li>Next I created a new NSObject (now UIView) which I called \"PlayerDisplay\". This class also has a XIB file associated with it, which contains an ImageView and a Label</li>\n<li>In <code>MyPlayer.m</code>'s init method, I instantiate a <code>PlayerDisplay</code> using an <code>initWithMyPlayer</code> method</li>\n<li>In <code>PlayerDisplay.m</code>'s initWithMyPlayer method, I created an <code>AVPlayerViewController</code> instance</li>\n<li>I called <code>[myPlayer addSubview:controller.view]</code> and <code>controller.view.frame = myPlayer.bounds</code> to get the player to display within my view</li>\n<li>I called <code>[[NSBundle bundleForClass:[self class]] loadNibNamed:@\"PlayerDisplay\" owner:self options:nil]</code> to load the XIB with the ImageView and Label</li>\n<li>I called <code>[myPlayer addSubview:self.contentView]</code> and <code>self.contentView.frame = myPlayer.bounds</code> to get the player to display my ImageView and Label over top of the player</li>\n</ul>\n\n<p>It felt hack-y at the time, and it feels hack-y now. But it allows me to insert a single <code>MyPlayer</code> view into an app and have it load all of my custom control and display logic. And it works (at least as far back as iOS 8, which is the oldest I've tested, and as far forward as iOS 12.4, which is the newest I've tested)</p>\n\n<p>However I recently wanted to look into creating custom controls and looked to some industry leaders for inspiration (Netflix, YouTube, etc) - and I noticed that <strong><em>every other video player on the market looks the same</em></strong>, but none of them look like mine.</p>\n\n<h2>Netflix</h2>\n\n<p><a href=\"https://i.stack.imgur.com/aUOeh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aUOeh.png\" alt=\"A sample of Netflix&#39;s iOS player\"></a></p>\n\n<h2>ESPN</h2>\n\n<p><a href=\"https://i.stack.imgur.com/CBlDA.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CBlDA.jpg\" alt=\"A sample of ESPN&#39;s iOS player\"></a></p>\n\n<h2>Hulu</h2>\n\n<p><a href=\"https://i.stack.imgur.com/MgGZs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MgGZs.png\" alt=\"A sample of Hulu&#39;s iOS player\"></a></p>\n\n<h2>Amazon Prime</h2>\n\n<p><a href=\"https://i.stack.imgur.com/iaqQU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iaqQU.png\" alt=\"A sample of Amazon Prime&#39;s iOS player\"></a></p>\n\n<h2>YouTube</h2>\n\n<p><a href=\"https://i.stack.imgur.com/UiZx8.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UiZx8.jpg\" alt=\"A sample of YouTube&#39;s iOS player\"></a></p>\n\n<h2>Twitch</h2>\n\n<p><a href=\"https://i.stack.imgur.com/3TiFx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3TiFx.png\" alt=\"enter image description here\"></a></p>\n\n<p>Every one of these players has:</p>\n\n<ul>\n<li>White icons with transparent backgrounds placed directly on top of the video (no control bar background)</li>\n<li>A play/pause button in the dead center of the video</li>\n<li>Seek back/forward buttons on either side of the play button</li>\n<li>A seek bar at the bottom of the video</li>\n<li>A single icon in the top-left</li>\n<li>A horizontal list of icons in the top-right</li>\n</ul>\n\n<p>Not only that, but Netflix and ESPN use the exact same <s>icon set</s> seek icons (although upon further inspection, the play buttons and cast buttons differ slightly)</p>\n\n<p><s>Similarly, Hulu and Amazon Prime use the exact same icon set</s> It was pointed out that Hulu and Amazon Prime differ sufficiently to be different icon sets. I still stand by Netflix and ESPN having identical seek buttons, though. I've rearranged the pictures to make this more obvious</p>\n\n<p>It's too unbelievable to me that every single company disabled the default controls, built their own user interface from scratch, and they all <strong><em>just so happened</em></strong> to look identical. I feel like either AVPlayer has an option to enable this layout, Apple provides a framework for building UIs from icon sets which lays things out in this manner, or there may be a third-party library that is considered the \"de facto\" standard for video streaming, much like ExoPlayer is the leading name on Android</p>\n\n<p>Compare and contrast all of the above players with <strong><em>my</em></strong> player, which is using Apple's default UI for an <code>AVPlayerViewController</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ukbvc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ukbvc.png\" alt=\"MyPlayer\"></a></p>\n\n<ul>\n<li>The control bar has a background color and rounded corners</li>\n<li>The play button is within the control bar</li>\n<li>There are no seek forward / back buttons</li>\n<li>There's only a volume control in the top right instead of a list of icons</li>\n</ul>\n\n<h2>How do I make my player look like theirs?</h2>\n\n<p>Is there just a flag in AVPlayer to say \"use the other UI\"? Is there a third-party library I should be using? What am I doing differently from all of the big names?</p>\n\n<p>Note: I did discover <a href=\"https://developer.apple.com/documentation/avkit/avplayerviewcontrolsstyle\" rel=\"nofollow noreferrer\">AVPlayerViewControlsStyle</a>, which I should theoretically be able to utilize with <code>avPlayerView.controlsStyle = ...</code>, however as you can tell from my setup above - I don't actually have an instance of <code>AVPlayerView</code>. Just my own custom view and the <code>AVPlayerViewController</code>. I tried typing <code>controller.view.controlsStyle</code> into Xcode to see if it would auto-complete, but it did not - making me think I don't have an <code>AVPlayerView</code> <em>at all</em></p>\n\n<p>Second Note: I also saw <code>AVPlayerLayer</code> when looking through the official Apple docs. What is that used for? Should I be utilizing it?</p>\n"}, {"tags": ["objective-c", "uiscrollview"], "comments": [{"owner": {"reputation": 43714, "user_id": 6257435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17fcf85ee49b22ea9e5fd5f5e5a49ec3?s=128&d=identicon&r=PG&f=1", "display_name": "DonMag", "link": "https://stackoverflow.com/users/6257435/donmag"}, "edited": false, "score": 0, "creation_date": 1568301832, "post_id": 57909592, "comment_id": 102239616, "body": "This is at least the 3rd time you&#39;ve posted this question. You need to be a bit clearer about what you want to do, and what you&#39;ve already tried. For example, it&#39;s not clear what you want as a result... If the user scrolls (short) scroll view A, should B scroll <i>faster</i>? Should B scroll only as far as A can scroll? What about if the user scrolls B to its bottom, and then tries to scroll A? So, try to describe it better -- include images if helpful."}, {"owner": {"reputation": 4945, "user_id": 1833434, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/1da6620d08d9017917972f8bce78039c?s=128&d=identicon&r=PG", "display_name": "MichiZH", "link": "https://stackoverflow.com/users/1833434/michizh"}, "reply_to_user": {"reputation": 43714, "user_id": 6257435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17fcf85ee49b22ea9e5fd5f5e5a49ec3?s=128&d=identicon&r=PG&f=1", "display_name": "DonMag", "link": "https://stackoverflow.com/users/6257435/donmag"}, "edited": false, "score": 0, "creation_date": 1568316460, "post_id": 57909592, "comment_id": 102245770, "body": "Sorry yeah these are my tries to get it more clear. I cannot show much more unfortunately. At the moment I&#39;ve just locked scrollview A so you cannot touch it, but you touch B and A scrolls with it. But my goal is also to touch scrollview A, but that any touch and movement in A triggers the scrollviewDidScroll of B and not A"}, {"owner": {"reputation": 43714, "user_id": 6257435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17fcf85ee49b22ea9e5fd5f5e5a49ec3?s=128&d=identicon&r=PG&f=1", "display_name": "DonMag", "link": "https://stackoverflow.com/users/6257435/donmag"}, "edited": false, "score": 0, "creation_date": 1568318850, "post_id": 57909592, "comment_id": 102246626, "body": "Still not clear... the content of <code>scrollViewA</code> is not going to be scrolling?"}, {"owner": {"reputation": 4945, "user_id": 1833434, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/1da6620d08d9017917972f8bce78039c?s=128&d=identicon&r=PG", "display_name": "MichiZH", "link": "https://stackoverflow.com/users/1833434/michizh"}, "reply_to_user": {"reputation": 43714, "user_id": 6257435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17fcf85ee49b22ea9e5fd5f5e5a49ec3?s=128&d=identicon&r=PG&f=1", "display_name": "DonMag", "link": "https://stackoverflow.com/users/6257435/donmag"}, "edited": false, "score": 0, "creation_date": 1568645642, "post_id": 57909592, "comment_id": 102330699, "body": "Only if you scroll scrollViewB. You shouldn&#39;t be able to move yourself scrollviewA"}], "owner": {"reputation": 4945, "user_id": 1833434, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/1da6620d08d9017917972f8bce78039c?s=128&d=identicon&r=PG", "display_name": "MichiZH", "link": "https://stackoverflow.com/users/1833434/michizh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568300538, "creation_date": 1568300538, "question_id": 57909592, "link": "https://stackoverflow.com/questions/57909592/uiscrollview-can-i-redirect-finger-scrolling-movement-from-one-scroll-view-to-a", "title": "UIScrollView: Can I redirect finger scrolling movement from one Scroll view to another?", "body": "<p>Sounds a bit complicated. But I have two Scrollviews next to each other. A on the left, B on the right. If I move B, A follows B in a specific manner. Since A is shorter it won't work very nicely vice versa, that's why I don't want to program anything similar that B follows A.</p>\n\n<p>But is it possible that any movement I do with my fingers in scroll view A get passed to Scroll View B, so that actually B scrolls? (And A follows it again of course).</p>\n"}, {"tags": ["ios", "objective-c", "uiscrollview", "floating-action-button", "uiwindow"], "comments": [{"owner": {"reputation": 2171, "user_id": 2553730, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/zhW1V.jpg?s=128&g=1", "display_name": "guru", "link": "https://stackoverflow.com/users/2553730/guru"}, "edited": false, "score": 0, "creation_date": 1568299279, "post_id": 57908965, "comment_id": 102238126, "body": "I am not sure but could you try bringSubViewToFront method"}, {"owner": {"reputation": 43714, "user_id": 6257435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17fcf85ee49b22ea9e5fd5f5e5a49ec3?s=128&d=identicon&r=PG&f=1", "display_name": "DonMag", "link": "https://stackoverflow.com/users/6257435/donmag"}, "edited": false, "score": 2, "creation_date": 1568299885, "post_id": 57908965, "comment_id": 102238510, "body": "<b><i>Don&#39;t</i></b> add the button to <code>.keyWindow</code>. Add it as a &quot;sibling&quot; view to the view containing your scroll view (<i>not</i> as a subview of the scroll view)."}, {"owner": {"reputation": 396, "user_id": 4776634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2c1e7fb6363b26df108290401138c88?s=128&d=identicon&r=PG&f=1", "display_name": "niku", "link": "https://stackoverflow.com/users/4776634/niku"}, "edited": false, "score": 0, "creation_date": 1568310775, "post_id": 57908965, "comment_id": 102243570, "body": "You can add the button on the supermost view of the view controller, but in the end of hierarchy so that it will always be on the top of scrollView."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 11002769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b355a5d442f258d1b686a8ec7b90a8c?s=128&d=identicon&r=PG&f=1", "display_name": "Wallace", "link": "https://stackoverflow.com/users/11002769/wallace"}, "edited": false, "score": 0, "creation_date": 1568322161, "post_id": 57913696, "comment_id": 102247744, "body": "Thanks for the reply! It worked! I can see the button now. But unfortunately the constraints are messing up the button (turning a circle into a diamond and shrinking its size and restricting its position). Just to clarify, as long as my scroll view and it&#39;s &quot;infinite&quot; layer of subviews constrain to its superview (the main view). And I also add the button subview to the main view. No constraints I give things in my scroll view should affect my button correct?"}, {"owner": {"reputation": 43714, "user_id": 6257435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17fcf85ee49b22ea9e5fd5f5e5a49ec3?s=128&d=identicon&r=PG&f=1", "display_name": "DonMag", "link": "https://stackoverflow.com/users/6257435/donmag"}, "reply_to_user": {"reputation": 65, "user_id": 11002769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b355a5d442f258d1b686a8ec7b90a8c?s=128&d=identicon&r=PG&f=1", "display_name": "Wallace", "link": "https://stackoverflow.com/users/11002769/wallace"}, "edited": false, "score": 0, "creation_date": 1568322501, "post_id": 57913696, "comment_id": 102247851, "body": "Correct - if the button does not have any constraints related to subviews of the scroll view, nothing with those subviews will affect the button. Your button turning into a diamond instead of a circle sounds like you are setting the width / height constraints and the corner radius incorrectly."}], "tags": [], "owner": {"reputation": 43714, "user_id": 6257435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17fcf85ee49b22ea9e5fd5f5e5a49ec3?s=128&d=identicon&r=PG&f=1", "display_name": "DonMag", "link": "https://stackoverflow.com/users/6257435/donmag"}, "is_accepted": false, "score": 0, "last_activity_date": 1568318149, "creation_date": 1568318149, "answer_id": 57913696, "question_id": 57908965, "link": "https://stackoverflow.com/questions/57908965/how-do-you-add-a-subview-to-uiwindow-and-prevent-it-from-disappearing-when-trans/57913696#57913696", "title": "How do you add a subview to UIWindow and prevent it from disappearing when transitioning using UINavigationController?", "body": "<p>Here is a very simple example.</p>\n\n<ul>\n<li>add a scroll view to the main view</li>\n<li>add content to the scroll view</li>\n<li>add a button to the <strong>main view</strong> -- <em>not</em> to the scroll view</li>\n<li>constrain the button at the top-right of the scroll view</li>\n<li>add a touch up action for the button to present another view controller</li>\n</ul>\n\n<p>Because we are adding the button as a sibling of the scroll view (not as a subview), it will \"float\" in front of the scroll view, and the scroll view's contents will scroll behind it.</p>\n\n<p>When we present - and then dismiss - another VC, the \"floating button\" won't be going anywhere, so it will still be visible when we return to the main VC.</p>\n\n<p>Initial view:</p>\n\n<p><a href=\"https://i.stack.imgur.com/P81pF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P81pF.png\" alt=\"enter image description here\"></a></p>\n\n<p>Scroll view content scrolling \"behind\" the button:</p>\n\n<p><a href=\"https://i.stack.imgur.com/iT0EN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iT0EN.png\" alt=\"enter image description here\"></a></p>\n\n<p>Code to see it in action:</p>\n\n<p><strong>ViewController.h</strong></p>\n\n<pre><code>//\n//  ViewController.h\n//  OCSept2019\n//\n//  Created by Don Mag on 9/12/19.\n//\n\n#import &lt;UIKit/UIKit.h&gt;\n\n@interface ViewController : UIViewController\n@end\n</code></pre>\n\n<p><strong>ViewController.c</strong></p>\n\n<pre><code>//\n//  ViewController.m\n//  OCSept2019\n//\n//  Created by Don Mag on 9/12/19.\n//\n\n#import \"ViewController.h\"\n#import \"AnotherViewController.h\"\n\n@interface ViewController ()\n\n@end\n\n@implementation ViewController\n\n- (void)viewDidLoad {\n    [super viewDidLoad];\n\n    // instantiate a scroll view\n    UIScrollView *scrollView = [UIScrollView new];\n    scrollView.translatesAutoresizingMaskIntoConstraints = NO;\n    scrollView.backgroundColor = [UIColor cyanColor];\n\n    // instantiate a stack view\n    UIStackView *stackView = [UIStackView new];\n    stackView.translatesAutoresizingMaskIntoConstraints = NO;\n\n    stackView.axis = UILayoutConstraintAxisVertical;\n    stackView.alignment = UIStackViewAlignmentFill;\n    stackView.distribution = UIStackViewDistributionFill;\n    stackView.spacing = 40.0;\n\n    // add 20 labels as arrangeed subview of the stack view\n    for (int i = 0; i &lt; 20; i++) {\n        UILabel *v = [UILabel new];\n        v.backgroundColor = [UIColor yellowColor];\n        v.text = [NSString stringWithFormat:@\"This is label %ld\", (long)i + 1];\n        v.textAlignment = NSTextAlignmentCenter;\n        [stackView addArrangedSubview:v];\n    }\n\n    // add the stack view as a subview of the scroll view\n    [scrollView addSubview:stackView];\n\n    // add the scroll view as a subview of self.view\n    [self.view addSubview:scrollView];\n\n    [NSLayoutConstraint activateConstraints:\n     @[\n\n       // constrain the scroll view to all 4 sides of self.view (safe area), with 20-pts \"padding\"\n       [scrollView.topAnchor constraintEqualToAnchor:self.view.safeAreaLayoutGuide.topAnchor constant: 20.0],\n       [scrollView.bottomAnchor constraintEqualToAnchor:self.view.safeAreaLayoutGuide.bottomAnchor constant: -20.0],\n       [scrollView.leadingAnchor constraintEqualToAnchor:self.view.safeAreaLayoutGuide.leadingAnchor constant: 20.0],\n       [scrollView.trailingAnchor constraintEqualToAnchor:self.view.safeAreaLayoutGuide.trailingAnchor constant: -20.0],\n\n       // constrain the stack view to all 4 sides of the scroll view, with\n       //   8-pts left and right \"padding\"\n       //   40-pts top and bottom \"padding\"\n       [stackView.topAnchor constraintEqualToAnchor:scrollView.topAnchor constant: 40.0],\n       [stackView.bottomAnchor constraintEqualToAnchor:scrollView.bottomAnchor constant: -40.0],\n       [stackView.leadingAnchor constraintEqualToAnchor:scrollView.leadingAnchor constant: 8.0],\n       [stackView.trailingAnchor constraintEqualToAnchor:scrollView.trailingAnchor constant: -8.0],\n\n       // constrain stack view width equal to scroll view width - 16 (to account for 8-pt padding on each side)\n       [stackView.widthAnchor constraintEqualToAnchor:scrollView.widthAnchor constant:-16.0],\n\n       ]\n     ];\n\n    // instantiate a button with Red background\n    UIButton *b = [UIButton new];\n    b.translatesAutoresizingMaskIntoConstraints = NO;\n    [b setTitle:@\"Tap to Present Another VC\" forState:UIControlStateNormal];\n    b.backgroundColor = [UIColor redColor];\n    [b setTitleColor:[UIColor lightGrayColor] forState:UIControlStateHighlighted];\n\n    // add the button as a subview of self.view\n    // this will place it *in front of* the scroll view\n    [self.view addSubview:b];\n\n    // constrain it at upper-right corner of the scroll view\n    [NSLayoutConstraint activateConstraints:\n     @[\n       [b.topAnchor constraintEqualToAnchor:scrollView.topAnchor constant:8.0],\n       [b.trailingAnchor constraintEqualToAnchor:scrollView.trailingAnchor constant:-8.0],\n       ]\n     ];\n\n    // add a touch up inside action\n    [b addTarget:self action:@selector(btnTap) forControlEvents:UIControlEventTouchUpInside];\n}\n\n- (void) btnTap {\n    // instantiate another view controller\n    AnotherViewController *vc = [AnotherViewController new];\n    // present it\n    [self presentViewController:vc animated:YES completion:nil];\n}\n\n@end\n</code></pre>\n\n<p><strong>AnotherViewController.h</strong></p>\n\n<pre><code>//\n//  AnotherViewController.h\n//  OCSept2019\n//\n//  Created by Don Mag on 9/12/19.\n//\n\n#import &lt;UIKit/UIKit.h&gt;\n\n@interface AnotherViewController : UIViewController\n@end\n</code></pre>\n\n<p><strong>AnotherViewController.m</strong></p>\n\n<pre><code>//\n//  AnotherViewController.m\n//  OCSept2019\n//\n//  Created by Don Mag on 9/12/19.\n//\n\n#import \"AnotherViewController.h\"\n\n@interface AnotherViewController ()\n\n@end\n\n@implementation AnotherViewController\n\n- (void)viewDidLoad {\n    [super viewDidLoad];\n\n    // green background\n    self.view.backgroundColor = [UIColor greenColor];\n\n    // instantiate a button with Blue background\n    UIButton *b = [UIButton new];\n    b.translatesAutoresizingMaskIntoConstraints = NO;\n    [b setTitle:@\"Tap to Dismiss\" forState:UIControlStateNormal];\n    b.backgroundColor = [UIColor blueColor];\n    [b setTitleColor:[UIColor lightGrayColor] forState:UIControlStateHighlighted];\n\n    // add it as a subview of self.view\n    [self.view addSubview:b];\n\n    // constrain it centered X and Y\n    [NSLayoutConstraint activateConstraints:\n     @[\n       [b.centerXAnchor constraintEqualToAnchor:self.view.centerXAnchor],\n       [b.centerYAnchor constraintEqualToAnchor:self.view.centerYAnchor],\n       ]\n     ];\n\n    // add a touch up inside action\n    [b addTarget:self action:@selector(btnTap) forControlEvents:UIControlEventTouchUpInside];\n}\n\n- (void) btnTap {\n    // dismiss this view controller\n    [self dismissViewControllerAnimated:YES completion:nil];\n}\n\n@end\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 11002769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b355a5d442f258d1b686a8ec7b90a8c?s=128&d=identicon&r=PG&f=1", "display_name": "Wallace", "link": "https://stackoverflow.com/users/11002769/wallace"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568318149, "creation_date": 1568298621, "question_id": 57908965, "link": "https://stackoverflow.com/questions/57908965/how-do-you-add-a-subview-to-uiwindow-and-prevent-it-from-disappearing-when-trans", "title": "How do you add a subview to UIWindow and prevent it from disappearing when transitioning using UINavigationController?", "body": "<p>I am trying to add a \"Floating Button\" on top of a scrollview with a lot of subviews. When the button is clicked, UINavigation controller prompts a new viewController to appear. When I dismiss the controller, to go back to the original viewController, I want the button to still be there!</p>\n\n<p>To not deal with constraints conflicts, my solution was to add the UIButton to the UIWindow. </p>\n\n<pre><code>[UIApplication.sharedApplication.keyWindow addSubview:_myButton];\n</code></pre>\n\n<p>Everything works well. But the problem is when I dismiss the new controller to come back to the controller containing the button:</p>\n\n<pre><code>[self dismissViewControllerAnimated:YES completion:nil];\n</code></pre>\n\n<p>The button is not immediately \"there\". Only once the animation finishes (the viewController goes fully down), does the button \"re-appear\". If I got rid of animation by setting:</p>\n\n<pre><code>[self dismissViewControllerAnimated:NO completion:nil];\n</code></pre>\n\n<p>Everything works well! The button is IMMEDIATELY there. But I really want to keep this animation. </p>\n\n<p>I was wondering if there was a way to have the button STAY on a viewController, or at the very least appear before the animation fully completes to make it seem like an actual floating button on the screen.</p>\n\n<p>If this is not possible, is there another approach to building floating buttons natively on iOS, without installing any additional pods?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ios", "objective-c", "ionic-framework", "camera", "exif"], "answers": [{"comments": [{"owner": {"reputation": 1191, "user_id": 5151355, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/jDTz3.jpg?s=128&g=1", "display_name": "Alex Ryltsov", "link": "https://stackoverflow.com/users/5151355/alex-ryltsov"}, "edited": false, "score": 0, "creation_date": 1572756037, "post_id": 57919624, "comment_id": 103655640, "body": "Alexandru, your fix seems to be working fine. Do you have an idea why CGImageDestinationCreateWithData clears the data?"}], "tags": [], "owner": {"reputation": 121, "user_id": 8654482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4d91416985470489be1d0e26de4f2cc?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandru D", "link": "https://stackoverflow.com/users/8654482/alexandru-d"}, "is_accepted": false, "score": 3, "last_activity_date": 1568361982, "creation_date": 1568361982, "answer_id": 57919624, "question_id": 57907635, "link": "https://stackoverflow.com/questions/57907635/ios-13-photo-content-is-cleared-during-save/57919624#57919624", "title": "iOS 13 photo content is cleared during save", "body": "<p>I fixed the issue.\nHere is the fix: <a href=\"https://github.com/vlinde/cordova-plugin-camera-with-exif/commit/99465b4c078bac48f26eb28a90737396e7dfca92\" rel=\"nofollow noreferrer\">https://github.com/vlinde/cordova-plugin-camera-with-exif/commit/99465b4c078bac48f26eb28a90737396e7dfca92</a></p>\n"}], "owner": {"reputation": 121, "user_id": 8654482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4d91416985470489be1d0e26de4f2cc?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandru D", "link": "https://stackoverflow.com/users/8654482/alexandru-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1568361982, "creation_date": 1568294261, "question_id": 57907635, "link": "https://stackoverflow.com/questions/57907635/ios-13-photo-content-is-cleared-during-save", "title": "iOS 13 photo content is cleared during save", "body": "<p>When I take a photo with exif info and I want to save it on the phone, the image is not saved because the content is cleared in the process.</p>\n\n<pre><code>CGImageSourceRef sourceImage = CGImageSourceCreateWithData((__bridge_retained CFDataRef)self.data, NULL);\nCFStringRef sourceType = CGImageSourceGetType(sourceImage);\n\nCGImageDestinationRef destinationImage = CGImageDestinationCreateWithData((__bridge CFMutableDataRef)self.data, sourceType, 1, NULL);\nCGImageDestinationAddImageFromSource(destinationImage, sourceImage, 0, (__bridge CFDictionaryRef)self.metadata);\n\nok = CGImageDestinationFinalize(destinationImage);\n\nNSString *extension = self.pickerController.pictureOptions.encodingType == EncodingTypePNG ? @\"png\":@\"jpg\";\nNSString *filePath = [self tempFilePath:extension];\n\n// save file\nif (![self.data writeToFile:filePath options:NSAtomicWrite error:&amp;err]) {\n    \u2026\n} else {\n    \u2026\n}\n</code></pre>\n\n<p>The <code>self.data</code> is cleared after the function <code>CGImageDestinationCreateWithData</code> is called.\nThe <code>ok</code> var will be everytime <code>NO</code>.</p>\n\n<p>On iOS 12 the code is working as expected, the issue appears only on iOS13.</p>\n\n<p>For testing I used xCode 11 GM Seed and iOS 13 GM Seed.</p>\n\n<p>Here is the complete code: <a href=\"https://github.com/remoorejr/cordova-plugin-camera-with-exif/blob/master/src/ios/CDVCamera.m#L840\" rel=\"nofollow noreferrer\">https://github.com/remoorejr/cordova-plugin-camera-with-exif/blob/master/src/ios/CDVCamera.m#L840</a></p>\n"}, {"tags": ["objective-c", "uialertcontroller"], "comments": [{"owner": {"reputation": 8296, "user_id": 1646335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4SLH9.jpg?s=128&g=1", "display_name": "Andreas Oetjen", "link": "https://stackoverflow.com/users/1646335/andreas-oetjen"}, "edited": false, "score": 0, "creation_date": 1568291932, "post_id": 57906785, "comment_id": 102233698, "body": "Are you talking about the UIAlertController or the UIAlertAction? What exactly &quot;takes quite a while&quot;? Please provide more context (didSelectRowAtIndexPath, I assume)"}, {"owner": {"reputation": 4945, "user_id": 1833434, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/1da6620d08d9017917972f8bce78039c?s=128&d=identicon&r=PG", "display_name": "MichiZH", "link": "https://stackoverflow.com/users/1833434/michizh"}, "reply_to_user": {"reputation": 8296, "user_id": 1646335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4SLH9.jpg?s=128&g=1", "display_name": "Andreas Oetjen", "link": "https://stackoverflow.com/users/1646335/andreas-oetjen"}, "edited": false, "score": 0, "creation_date": 1568293627, "post_id": 57906785, "comment_id": 102234678, "body": "Exactly, did select row takes a while, or at least until the AlertController is presented. But I assume because it has to be generated every time from scratch"}, {"owner": {"reputation": 8296, "user_id": 1646335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4SLH9.jpg?s=128&g=1", "display_name": "Andreas Oetjen", "link": "https://stackoverflow.com/users/1646335/andreas-oetjen"}, "edited": false, "score": 0, "creation_date": 1568294626, "post_id": 57906785, "comment_id": 102235267, "body": "If the display of the &quot;cell selection&quot; matters, you could simply put all the UIAlertController stuff into an async call to the main thread. This allows the cell to display it&#39;s state, and then pops up the alert controller. You might want to provide more code; you only provide the code for the <code>UIAlertAction</code> creation, which should almost happen in an instant."}], "answers": [{"comments": [{"owner": {"reputation": 4945, "user_id": 1833434, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/1da6620d08d9017917972f8bce78039c?s=128&d=identicon&r=PG", "display_name": "MichiZH", "link": "https://stackoverflow.com/users/1833434/michizh"}, "edited": false, "score": 0, "creation_date": 1568293688, "post_id": 57907229, "comment_id": 102234720, "body": "But how can I pass certain specific objects for these buttons? So you have also to generate every button completely new"}, {"owner": {"reputation": 8296, "user_id": 1646335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4SLH9.jpg?s=128&g=1", "display_name": "Andreas Oetjen", "link": "https://stackoverflow.com/users/1646335/andreas-oetjen"}, "edited": false, "score": 0, "creation_date": 1568294478, "post_id": 57907229, "comment_id": 102235187, "body": "This still creates a new UIAlertController every time the func is called."}, {"owner": {"reputation": 736, "user_id": 3405821, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MpuvN.jpg?s=128&g=1", "display_name": "Awais Mobeen", "link": "https://stackoverflow.com/users/3405821/awais-mobeen"}, "edited": false, "score": 0, "creation_date": 1568294501, "post_id": 57907229, "comment_id": 102235195, "body": "have you used the model for Plan data?"}, {"owner": {"reputation": 736, "user_id": 3405821, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MpuvN.jpg?s=128&g=1", "display_name": "Awais Mobeen", "link": "https://stackoverflow.com/users/3405821/awais-mobeen"}, "edited": false, "score": 0, "creation_date": 1568294696, "post_id": 57907229, "comment_id": 102235306, "body": "pass that object to function of alertView it should work"}], "tags": [], "owner": {"reputation": 736, "user_id": 3405821, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MpuvN.jpg?s=128&g=1", "display_name": "Awais Mobeen", "link": "https://stackoverflow.com/users/3405821/awais-mobeen"}, "is_accepted": false, "score": 0, "last_activity_date": 1568292931, "creation_date": 1568292931, "answer_id": 57907229, "question_id": 57906785, "link": "https://stackoverflow.com/questions/57906785/objective-c-optimize-uialertcontroller-for-multiple-uses-from-every-table-cell/57907229#57907229", "title": "Objective C: Optimize UIAlertController for multiple uses from every table cell", "body": "<p>use class function and just call for desired object as I am doing using swift</p>\n\n<pre><code>    class func showAlertWithTwoButtons(caller:UIViewController,title: String, message: String,firstButtonTitle:String = MSG_CANCEL ,firstButtonStyle: UIAlertActionStyle = UIAlertActionStyle.cancel , firstButtonHandler: ((UIAlertAction) -&gt; Void)? = nil , secondButtonTitle: String,secondButtonStyle: UIAlertActionStyle = UIAlertActionStyle.cancel , secondButtonHandler: ((UIAlertAction) -&gt; Void)? = nil ) -&gt; Void {\n\n\n    let alert = UIAlertController(title:title, message:message, preferredStyle: .alert)\n\n\n    alert.addAction(UIAlertAction(title: firstButtonTitle, style: firstButtonStyle, handler:firstButtonHandler))\n    alert.addAction(UIAlertAction(title: secondButtonTitle, style: secondButtonStyle, handler:secondButtonHandler))\n\n    caller.present(alert, animated: true, completion: {\n        print(\"completion block\")\n    })\n}\n</code></pre>\n\n<p>use this idea for objective c</p>\n"}], "owner": {"reputation": 4945, "user_id": 1833434, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/1da6620d08d9017917972f8bce78039c?s=128&d=identicon&r=PG", "display_name": "MichiZH", "link": "https://stackoverflow.com/users/1833434/michizh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568292931, "creation_date": 1568291450, "question_id": 57906785, "link": "https://stackoverflow.com/questions/57906785/objective-c-optimize-uialertcontroller-for-multiple-uses-from-every-table-cell", "title": "Objective C: Optimize UIAlertController for multiple uses from every table cell", "body": "<p>I have a big table and every click should open a UIAlertController. However if I create it every time from scratch, it takes quite a while. But some buttons need an object from the currently clicked cell, so I cannot always use the same UIAlertController. Is there still some way to improve that the AlertController can be reused but only the objects are updated? At the moment I have stuff like this (where planData is the mentioned object).</p>\n\n<pre><code>UIAlertAction *editEvent = [UIAlertAction actionWithTitle:NSLocalizedString(@\"EDIT_EVENT_ACTION_SH\", nil) style:UIAlertActionStyleDefault handler:^(UIAlertAction * action) {\n    [alertController dismissViewControllerAnimated:YES completion:nil];\n    [self.tableView deselectRowAtIndexPath:indexPath animated:NO];\n\n    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@\"Main\" bundle:nil];\n    FMEditEventViewController *editEventVC = (FMEditEventViewController *)[storyboard instantiateViewControllerWithIdentifier:@\"EditEventsViewController\"];\n    editEventVC.selectedEventPlanData = planData;\n    [self presentViewController:editEventVC animated:YES completion:nil];\n}];\n</code></pre>\n"}, {"tags": ["objective-c", "uisegmentedcontrol", "ios13"], "comments": [{"owner": {"reputation": 918, "user_id": 3818946, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0fc61d637f0b25ffe8562e43aee03cab?s=128&d=identicon&r=PG&f=1", "display_name": "deltacrux", "link": "https://stackoverflow.com/users/3818946/deltacrux"}, "edited": false, "score": 0, "creation_date": 1569568950, "post_id": 57904625, "comment_id": 102646569, "body": "I&#39;m having the same problem. Did you submit a bug report to Apple? I&#39;d rather not have to implement your workaround since I don&#39;t subclass UISegmentedControl."}, {"owner": {"reputation": 11038, "user_id": 347339, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2fc2d95ead171970045d6bcddab5ed85?s=128&d=identicon&r=PG", "display_name": "Stunner", "link": "https://stackoverflow.com/users/347339/stunner"}, "reply_to_user": {"reputation": 918, "user_id": 3818946, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0fc61d637f0b25ffe8562e43aee03cab?s=128&d=identicon&r=PG&f=1", "display_name": "deltacrux", "link": "https://stackoverflow.com/users/3818946/deltacrux"}, "edited": false, "score": 1, "creation_date": 1569661031, "post_id": 57904625, "comment_id": 102674832, "body": "I did but it&#39;s helpful for others to report it as well as it gives them an idea of how big/urgent the problem is. There is no getting around that if you want segmented control to behave this way for iOS 13.0 (and maybe 13.1) you&#39;ll need this workaround as when they patch it, it will be released in a new version of iOS. You can use <a href=\"https://github.com/Stunner/STAControls/tree/master/STAControls/STAControls/SegmentedControl\" rel=\"nofollow noreferrer\">my subclass of <code>UISegmentedControl</code></a> instead of rolling your own. See <a href=\"https://stackoverflow.com/a/57915487/347339\">my answer</a> for how its implemented."}, {"owner": {"reputation": 918, "user_id": 3818946, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0fc61d637f0b25ffe8562e43aee03cab?s=128&d=identicon&r=PG&f=1", "display_name": "deltacrux", "link": "https://stackoverflow.com/users/3818946/deltacrux"}, "edited": false, "score": 0, "creation_date": 1569737113, "post_id": 57904625, "comment_id": 102688744, "body": "Thanks! I&#39;ve just reported it as well. Hopefully they&#39;ll fix it soon..."}], "answers": [{"tags": [], "owner": {"reputation": 4052, "user_id": 1085556, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/nUdKs.png?s=128&g=1", "display_name": "Bart van Kuik", "link": "https://stackoverflow.com/users/1085556/bart-van-kuik"}, "is_accepted": false, "score": 1, "last_activity_date": 1568288616, "last_edit_date": 1568288616, "creation_date": 1568287709, "answer_id": 57905732, "question_id": 57904625, "link": "https://stackoverflow.com/questions/57904625/specifying-uisegmentedcontrolnosegment-to-uisegmentedcontrols-selectedsegmentin/57905732#57905732", "title": "Specifying UISegmentedControlNoSegment to UISegmentedControl&#39;s selectedSegmentIndex has no Effect on iOS 13", "body": "<p>Remove the segment, then create it again. Here's a version in Swift, which only works if you've got text segments (not images). It assumes you've got an Storyboard with a segmented control and a button.</p>\n\n<pre><code>class ViewController: UIViewController {\n    @IBOutlet weak var segmentedControl: UISegmentedControl!\n\n    @IBAction func clearSegmentedControl(_ sender: Any) {\n        guard segmentedControl.selectedSegmentIndex &gt;= 0 else {\n            return\n        }\n\n        let index = self.segmentedControl.selectedSegmentIndex\n        let title = self.segmentedControl.titleForSegment(at: index) ?? \"\"\n\n        self.segmentedControl.removeSegment(at: self.segmentedControl.selectedSegmentIndex, animated: false)\n        self.segmentedControl.insertSegment(withTitle: title, at: index, animated: false)\n        self.segmentedControl.selectedSegmentIndex = UISegmentedControl.noSegment\n    }\n}\n</code></pre>\n\n<p>In the Simulator, I couldn't see any flickering. After removing such a selected segment, selectedSegmentIndex becomes -2. This is a bit weird so that's why I added the last line of code, which sets it to the <code>noSegment</code> constant.</p>\n"}, {"tags": [], "owner": {"reputation": 11038, "user_id": 347339, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2fc2d95ead171970045d6bcddab5ed85?s=128&d=identicon&r=PG", "display_name": "Stunner", "link": "https://stackoverflow.com/users/347339/stunner"}, "is_accepted": true, "score": 1, "last_activity_date": 1568329787, "creation_date": 1568329787, "answer_id": 57915487, "question_id": 57904625, "link": "https://stackoverflow.com/questions/57904625/specifying-uisegmentedcontrolnosegment-to-uisegmentedcontrols-selectedsegmentin/57915487#57915487", "title": "Specifying UISegmentedControlNoSegment to UISegmentedControl&#39;s selectedSegmentIndex has no Effect on iOS 13", "body": "<p>Resolved and added a work around in <a href=\"https://github.com/Stunner/STAControls/blob/master/STAControls/STAControls/SegmentedControl/STASegmentedControl.m\" rel=\"nofollow noreferrer\"><code>STASegmentedControl</code></a>. I did the following:</p>\n\n<pre><code>- (void)setSelectedSegmentIndex:(NSInteger)selectedSegmentIndex {\n    if (@available(iOS 13.0, *)) {\n        if (selectedSegmentIndex == UISegmentedControlNoSegment &amp;&amp; self.selectedSegmentIndex &gt;= 0\n            &amp;&amp; !self.handlingNoSegment)\n        {\n            self.handlingNoSegment = YES;\n            NSUInteger index = self.selectedSegmentIndex;\n            NSString *title = [self titleForSegmentAtIndex:self.selectedSegmentIndex];\n            [self removeSegmentAtIndex:self.selectedSegmentIndex animated:NO];\n            [self insertSegmentWithTitle:title atIndex:index animated:NO];\n        }\n        self.handlingNoSegment = NO;\n    }\n    [super setSelectedSegmentIndex:selectedSegmentIndex];\n}\n</code></pre>\n\n<p>Consult <a href=\"https://github.com/Stunner/STAControls/commit/32d331f3b007e14321a07682d7149acc9f8661c6\" rel=\"nofollow noreferrer\">this link</a> for the entire commit.</p>\n"}, {"comments": [{"owner": {"reputation": 415, "user_id": 4613431, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-nSAu6sihJpg/AAAAAAAAAAI/AAAAAAAAADM/wBWaKx-FhSc/photo.jpg?sz=128", "display_name": "Mitchell D", "link": "https://stackoverflow.com/users/4613431/mitchell-d"}, "edited": false, "score": 0, "creation_date": 1570240273, "post_id": 58202246, "comment_id": 102861507, "body": "This should be the accepted answer. I simply had added coinSelection.setNeedsLayout() and my exiting implementation worked"}], "tags": [], "owner": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "is_accepted": false, "score": 12, "last_activity_date": 1570021861, "creation_date": 1570021861, "answer_id": 58202246, "question_id": 57904625, "link": "https://stackoverflow.com/questions/57904625/specifying-uisegmentedcontrolnosegment-to-uisegmentedcontrols-selectedsegmentin/58202246#58202246", "title": "Specifying UISegmentedControlNoSegment to UISegmentedControl&#39;s selectedSegmentIndex has no Effect on iOS 13", "body": "<p>The solutions given in the other answers are overblown. There is a much simpler workaround: just call <code>setNeedsLayout</code> on the segmented control.</p>\n\n<pre><code>self.seg.selectedSegmentIndex = UISegmentedControl.noSegment\nself.seg.setNeedsLayout()\n</code></pre>\n"}], "owner": {"reputation": 11038, "user_id": 347339, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2fc2d95ead171970045d6bcddab5ed85?s=128&d=identicon&r=PG", "display_name": "Stunner", "link": "https://stackoverflow.com/users/347339/stunner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 833, "favorite_count": 0, "accepted_answer_id": 57915487, "answer_count": 3, "score": 7, "last_activity_date": 1570021861, "creation_date": 1568283569, "question_id": 57904625, "link": "https://stackoverflow.com/questions/57904625/specifying-uisegmentedcontrolnosegment-to-uisegmentedcontrols-selectedsegmentin", "title": "Specifying UISegmentedControlNoSegment to UISegmentedControl&#39;s selectedSegmentIndex has no Effect on iOS 13", "body": "<p>I am the maintainer of <a href=\"https://github.com/Stunner/STAControls\" rel=\"noreferrer\">STAControls</a> which subclasses various <code>UIControl</code>s, one of which is <code>UISegmentedControl</code>. Within that project's sample app, I have the following code (can be downloaded from the aforementioned link):</p>\n\n<pre><code>- (void)textFieldDidEndEditing:(UITextField *)textField {\n    NSInteger integer = [textField.text integerValue];\n    if (integer &lt; 0 || integer &gt;= self.segmentedControl.numberOfSegments) { this doesn't work\n        self.segmentedControl.selectedSegmentIndex = UISegmentedControlNoSegment;\n    } else { // this works\n        self.segmentedControl.selectedSegmentIndex = integer;\n    }\n}\n</code></pre>\n\n<p>In iOS 13 the <code>UISegmentedControlNoSegment</code> assignment is not respected:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ttC2s.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ttC2s.gif\" alt=\"enter image description here\"></a></p>\n\n<p>While in iOS 12 and prior versions of iOS this performs just fine:</p>\n\n<p><a href=\"https://i.stack.imgur.com/9kfaD.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/9kfaD.gif\" alt=\"enter image description here\"></a></p>\n\n<p>Any idea(s) on how to work around this?</p>\n"}, {"tags": ["objective-c", "speech-recognition", "volume", "speech"], "answers": [{"tags": [], "owner": {"reputation": 2335, "user_id": 1882524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b4LyP.jpg?s=128&g=1", "display_name": "Vinny Coyne", "link": "https://stackoverflow.com/users/1882524/vinny-coyne"}, "is_accepted": false, "score": 0, "last_activity_date": 1568283342, "creation_date": 1568283342, "answer_id": 57904559, "question_id": 57904340, "link": "https://stackoverflow.com/questions/57904340/increasing-the-volume-of-recording-in-real-time-of-after-saving-it/57904559#57904559", "title": "Increasing the volume of recording in Real Time of after saving it?", "body": "<p>You can use <code>AVAudioEngine</code> (<a href=\"https://developer.apple.com/documentation/avfoundation/avaudioengine\" rel=\"nofollow noreferrer\">link</a>) to tap into the raw audio data. Alternatively, still using <code>AVAudioEngine</code>, you could add an <code>AVAudioUnitEQ</code> (<a href=\"https://developer.apple.com/documentation/avfoundation/avaudiouniteq\" rel=\"nofollow noreferrer\">link</a>) node to your audio graph and use that boost the gain.</p>\n\n<p>Using either method, you can then write out to a file using <code>AVAudioFile</code> (<a href=\"https://developer.apple.com/documentation/avfoundation/avaudiofile\" rel=\"nofollow noreferrer\">link</a>).</p>\n"}], "owner": {"reputation": 430, "user_id": 2215024, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/782d69a6b15d6126172415b1d1d28c88?s=128&d=identicon&r=PG", "display_name": "sandepp", "link": "https://stackoverflow.com/users/2215024/sandepp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568283342, "creation_date": 1568282659, "question_id": 57904340, "link": "https://stackoverflow.com/questions/57904340/increasing-the-volume-of-recording-in-real-time-of-after-saving-it", "title": "Increasing the volume of recording in Real Time of after saving it?", "body": "<p>I used python to make a prototype, to increase the volume of audio signal in real time. It worked by using <code>new_data = audioop.mul(data, 4, 4)</code> where 'data' is chunks from Pyaudio in streaming.</p>\n\n<p>Now, I have to apply similar in ObjectiveC, and even after searching I am unable to find it. How can it be done in Objective C? Do we have such control over data flow in Objective C and If we can't, Is there anyway that a recorded sample's volume can be increased?</p>\n\n<pre><code>import pyaudio\nimport wave\nimport audioop\nimport sys\n\n\nFORMAT = pyaudio.paInt16\nCHANNELS = 1\nRATE = 44100\nCHUNK = 1024\nRECORD_SECONDS = 7\nWAVE_OUTPUT_FILENAME1 = sys.argv[1]\nWAVE_OUTPUT_FILENAME2 = sys.argv[2]\ndevice_index = 2\n\nprint(\"----------------------record device list---------------------\")\naudio = pyaudio.PyAudio()\nprint(audio)\ninfo = audio.get_host_api_info_by_index(0)\nnumdevices = info.get('deviceCount')\nfor i in range(0, numdevices):\n        if (audio.get_device_info_by_host_api_device_index(0, i).get('maxInputChannels')) &gt; 0:\n            print (\"Input Device id \", i, \" - \", audio.get_device_info_by_host_api_device_index(0, i).get('name'))\n\nprint(\"-------------------------------------------------------------\")\n\nindex = int((input()))\nprint(type(index))\nprint(\"recording via index \"+str(index))\n\nstream = audio.open(format=FORMAT, channels=CHANNELS,\n                rate=RATE, input=True,input_device_index = index,\n                frames_per_buffer=CHUNK)\nprint (\"recording started\")\nRecordframes = []\nRecordframes2= []\nprint(int(RATE / CHUNK * RECORD_SECONDS))\nfor i in range(0, int(RATE / CHUNK * RECORD_SECONDS)):\n    data = stream.read(CHUNK)\n    new_data = audioop.mul(data, 4, 4)\n    print(\"hshsh\")\n    Recordframes.append(data)\n    Recordframes2.append(new_data)\n# data = stream.read(CHUNK)\n# print(\"hshsh\")\n# Recordframes.append(data)\n# print (\"recording stopped\")\n\n\nstream.stop_stream()\nstream.close()\naudio.terminate()\n\nwaveFile = wave.open(WAVE_OUTPUT_FILENAME1, 'wb')\nwaveFile.setnchannels(CHANNELS)\nwaveFile.setsampwidth(audio.get_sample_size(FORMAT))\nwaveFile.setframerate(RATE)\nwaveFile.writeframes(b''.join(Recordframes))\nwaveFile2 = wave.open(WAVE_OUTPUT_FILENAME2, 'wb')\nwaveFile2.setnchannels(CHANNELS)\nwaveFile2.setsampwidth(audio.get_sample_size(FORMAT))\nwaveFile2.setframerate(RATE)\nwaveFile2.writeframes(b''.join(Recordframes2))\nwaveFile.close()\nwaveFile2.close()\n</code></pre>\n"}, {"tags": ["ios", "objective-c", "uicollectionview"], "answers": [{"comments": [{"owner": {"reputation": 4177, "user_id": 627667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b3478cdad2c1535e3d18cb4dd45e05b?s=128&d=identicon&r=PG", "display_name": "smartsanja", "link": "https://stackoverflow.com/users/627667/smartsanja"}, "edited": false, "score": 0, "creation_date": 1568282835, "post_id": 57903881, "comment_id": 102228689, "body": "I have set the tag in indexPath.row and in ItemCell done below. I can see the tag is asigned properly. But keyboard not moving. not sure why it&#39;s not working. -(void)prevButtonPressed{      int nextTag = (int)self.txtTitle.tag + 1;     NSLog(@&quot;nextTag %d&quot;, nextTag);          [[self viewWithTag:nextTag]  becomeFirstResponder]; }"}], "tags": [], "owner": {"reputation": 736, "user_id": 3405821, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MpuvN.jpg?s=128&g=1", "display_name": "Awais Mobeen", "link": "https://stackoverflow.com/users/3405821/awais-mobeen"}, "is_accepted": false, "score": 0, "last_activity_date": 1568281116, "creation_date": 1568281116, "answer_id": 57903881, "question_id": 57903392, "link": "https://stackoverflow.com/questions/57903392/handle-keyboard-return-action-for-uitextfiled-inside-uicollectionview-cell/57903881#57903881", "title": "Handle keyboard return action for UITextFiled inside UICollectionView Cell", "body": "<p>I think you can use \"Tag\" to identify which textfield is selected. assign 'indexPath.row' to each text field. this is the only way to detect when you created it dynamically</p>\n"}, {"tags": [], "owner": {"reputation": 4177, "user_id": 627667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b3478cdad2c1535e3d18cb4dd45e05b?s=128&d=identicon&r=PG", "display_name": "smartsanja", "link": "https://stackoverflow.com/users/627667/smartsanja"}, "is_accepted": false, "score": 0, "last_activity_date": 1568360038, "creation_date": 1568360038, "answer_id": 57919191, "question_id": 57903392, "link": "https://stackoverflow.com/questions/57903392/handle-keyboard-return-action-for-uitextfiled-inside-uicollectionview-cell/57919191#57919191", "title": "Handle keyboard return action for UITextFiled inside UICollectionView Cell", "body": "<p>I managed to do this by assigning tag to TextFiled when it's creating in the <code>cellForItemAtIndexPath</code>. I have define the uniq tag based on <code>indexPath.section</code> and <code>indexPath.row</code>. I have assign <code>_nextTag</code> and <code>_prevTag</code> properties for the immediate next and previous <code>TextFiled</code> instances. Then in the CollectionView cell class, we can make the next or previous TextFiled <code>becomeFirstResponder</code> in the button action.</p>\n\n<pre><code>- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath\n{\n    ItemCell *iCell = [cv dequeueReusableCellWithReuseIdentifier:@\"ItemCell\" forIndexPath:indexPath];\n    iCell.userInteractionEnabled = TRUE;\n\n    // set uniuqe tag for each textfield\n    //((section+1)(row)) eg: 11,12\n    NSString *strTag = [NSString stringWithFormat:@\"%ld%ld\", indexPath.section+1,(long)indexPath.row];\n    int tag = strTag.integerValue;\n    iCell.txtTitle.tag = tag;\n\n    int nextTag = tag + 1;\n    int prevTag = tag -1;\n}\n</code></pre>\n\n<p>CollectionViewCell class </p>\n\n<pre><code>-(void)nextButtonPressed{\n    //int nextTag = (int)self.txtTitle.tag + 1;\n    NSLog(@\"nextTag %d\", _nextTag);\n\n    [[self.superview viewWithTag:_nextTag]  becomeFirstResponder];\n}\n</code></pre>\n"}], "owner": {"reputation": 4177, "user_id": 627667, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b3478cdad2c1535e3d18cb4dd45e05b?s=128&d=identicon&r=PG", "display_name": "smartsanja", "link": "https://stackoverflow.com/users/627667/smartsanja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1568360038, "creation_date": 1568279443, "last_edit_date": 1568280085, "question_id": 57903392, "link": "https://stackoverflow.com/questions/57903392/handle-keyboard-return-action-for-uitextfiled-inside-uicollectionview-cell", "title": "Handle keyboard return action for UITextFiled inside UICollectionView Cell", "body": "<p>I have a <code>UIcollectionView</code> with sections. <code>CollectionView</code> Cell consist of a <code>UITextFiled</code>. I have create a keyboard <code>inputAccessoryView</code> with two arrow buttons as below. </p>\n\n<p>Now my requirement is when user press the arrow buttons, next textfield should become first responder. I am struggling how to get currently selected textfield instance and the next one because the textfield is generate dynamically inside <code>CollectionView</code> Cell. Please share some ideas how to achieve this.</p>\n\n<p><a href=\"https://i.stack.imgur.com/jjc38.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jjc38.png\" alt=\"enter image description here\"></a></p>\n\n<p>CollectionView Cell class</p>\n\n<pre><code>@implementation ItemCell\n\n@synthesize txtTitle;\n\n- (id)initWithFrame:(CGRect)frame\n{\n    self = [super initWithFrame:frame];\n    if (self) {\n        // Initialization code\n        txtTitle = [[UITextField alloc] initWithFrame:CGRectMake(5.0, 5.0, 60.0, 30.0)];\n        [txtTitle setKeyboardType:UIKeyboardTypeDecimalPad];\n\n        UIToolbar* keyboardToolbar = [[UIToolbar alloc] init];\n        [keyboardToolbar sizeToFit];\n\n        UIBarButtonItem *prevBarButton = [[UIBarButtonItem alloc]\n                                          initWithTitle:@\"&lt;\" style:UIBarButtonItemStylePlain target:self action:@selector(prevButtonPressed)];\n\n        UIBarButtonItem *nextBarButton = [[UIBarButtonItem alloc]\n                                          initWithTitle:@\"&gt;\" style:UIBarButtonItemStylePlain target:self action:@selector(nextButtonPressed)];\n\n        UIBarButtonItem *flexBarButton = [[UIBarButtonItem alloc]\n                                          initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace\n                                          target:nil action:nil];\n\n        UIBarButtonItem *doneBarButton = [[UIBarButtonItem alloc]\n                                          initWithBarButtonSystemItem:UIBarButtonSystemItemDone\n                                          target:self action:@selector(doneButtonPressed)];\n        keyboardToolbar.items = @[prevBarButton, nextBarButton, flexBarButton, doneBarButton];\n        self.txtTitle.inputAccessoryView = keyboardToolbar;\n\n\n        [self.contentView addSubview:txtTitle];\n    }\n    return self;\n}\n\n-(void)prevButtonPressed{\n}\n\n-(void)nextButtonPressed{\n}\n\n-(void)doneButtonPressed\n{\n    [self.txtTitle resignFirstResponder];\n}\n</code></pre>\n\n<p>ViewController</p>\n\n<pre><code>- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath\n{\n\n    ItemCell *iCell = [cv dequeueReusableCellWithReuseIdentifier:@\"ItemCell\" forIndexPath:indexPath];\n    iCell.userInteractionEnabled = TRUE;\n\n    iCell.txtTitle.text = [[myArr objectForKey@\"section\"]objectAtIndex:indexPath.row];\n\n}\n</code></pre>\n"}, {"tags": ["ios", "objective-c", "xcode", "memory", "stack-overflow"], "comments": [{"owner": {"reputation": 148, "user_id": 1058719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h0nxq.png?s=128&g=1", "display_name": "Sungwook Kim", "link": "https://stackoverflow.com/users/1058719/sungwook-kim"}, "edited": false, "score": 0, "creation_date": 1599123422, "post_id": 57899259, "comment_id": 112677933, "body": "It happens that I may have a similar bug to this.  In most cases esp. when you can not figure out the culprit of the bug in the code, it is more likely that it is from &quot;Data race&quot; or multi-threading issues.  Please try the test with the awesome tool &quot;Thread Sanitizer&quot; which the only Xcode in the world can give you.  I fixed this type of bugs with the great tool Apple provides with Xcode!   Only God (Jesus) may help you when you can not do it on your own."}], "owner": {"reputation": 1102, "user_id": 1304461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bajts.jpg?s=128&g=1", "display_name": "shuiyouren", "link": "https://stackoverflow.com/users/1304461/shuiyouren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1568259401, "creation_date": 1568258451, "last_edit_date": 1568259401, "question_id": 57899259, "link": "https://stackoverflow.com/questions/57899259/xcode-error-memory-read-failed-for-0x0-no-stack", "title": "Xcode error: memory read failed for 0x0, no stack", "body": "<p>Xcode debug my app, I find some thread no stack, only 0x00000000 (but not crash).  (In fact, there are similar crashes on the line in app store.)</p>\n\n<p>Stack info:\nerror: memory read failed for 0x0\nI think stack overflow, so I try use tool \"Address Sanitizer\", but not found too.</p>\n\n<p>Why is this happening, xcode no stack?</p>\n\n<p><a href=\"https://i.stack.imgur.com/N0wGW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N0wGW.png\" alt=\"enter image description here\"></a></p>\n"}]