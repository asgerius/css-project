[{"tags": ["ios", "objective-c", "metal", "metalkit"], "comments": [{"owner": {"reputation": 28284, "user_id": 155187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cE563.jpg?s=128&g=1", "display_name": "warrenm", "link": "https://stackoverflow.com/users/155187/warrenm"}, "edited": false, "score": 0, "creation_date": 1574292177, "post_id": 58964035, "comment_id": 104184945, "body": "There is no API in Metal for clearing the contents of any attachment in the middle of a render pass. To clear an attachment at the beginning of a pass, set its load action to <code>.clear</code>. To preserve the contents of an attachment, set its load action to <code>.load</code>."}, {"owner": {"reputation": 9675, "user_id": 1114043, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/EwPfY.jpg?s=128&g=1", "display_name": "zeus", "link": "https://stackoverflow.com/users/1114043/zeus"}, "reply_to_user": {"reputation": 28284, "user_id": 155187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cE563.jpg?s=128&g=1", "display_name": "warrenm", "link": "https://stackoverflow.com/users/155187/warrenm"}, "edited": false, "score": 0, "creation_date": 1574334783, "post_id": 58964035, "comment_id": 104200603, "body": "@warrenm : it&#39;s seam doing load on the depth attachment do not work :( I do call  endEncoding of the RenderCommandEncoder then I set loadAction to MTLLoadActionLoad and finally i create a new renderCommandEncoder but it&#39;s do not help"}, {"owner": {"reputation": 28284, "user_id": 155187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cE563.jpg?s=128&g=1", "display_name": "warrenm", "link": "https://stackoverflow.com/users/155187/warrenm"}, "edited": false, "score": 0, "creation_date": 1574356810, "post_id": 58964035, "comment_id": 104213762, "body": "Did you set the store action of the depth attachment of the preceding pass to <code>.store</code> (instead of <code>.dontCare</code>)?"}, {"owner": {"reputation": 9675, "user_id": 1114043, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/EwPfY.jpg?s=128&g=1", "display_name": "zeus", "link": "https://stackoverflow.com/users/1114043/zeus"}, "reply_to_user": {"reputation": 28284, "user_id": 155187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cE563.jpg?s=128&g=1", "display_name": "warrenm", "link": "https://stackoverflow.com/users/155187/warrenm"}, "edited": false, "score": 0, "creation_date": 1574360297, "post_id": 58964035, "comment_id": 104215401, "body": "@warrenm : i think i Found the problem, in fact i didn&#39;t create any texture for the DepthAttachment nor for the StencilAttachment! the framework create those texture (but when I don&#39;t know but I can see them). sean when i endencoding the framework also release those texture and create new one ... it&#39;s seam possible for you ?"}, {"owner": {"reputation": 28284, "user_id": 155187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cE563.jpg?s=128&g=1", "display_name": "warrenm", "link": "https://stackoverflow.com/users/155187/warrenm"}, "edited": false, "score": 1, "creation_date": 1574360722, "post_id": 58964035, "comment_id": 104215600, "body": "If you&#39;re using <code>MTKView</code>, the depth and stencil attachments are not automatically released and/or recreated at the end of the pass. However, if you&#39;re manually creating <code>MTLRenderPassDescriptor</code> objects (as opposed to using a view&#39;s <code>currentRenderPassDescriptor</code>), you&#39;re responsible for setting the same textures on those respective attachments at the beginning of each pass."}, {"owner": {"reputation": 9675, "user_id": 1114043, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/EwPfY.jpg?s=128&g=1", "display_name": "zeus", "link": "https://stackoverflow.com/users/1114043/zeus"}, "reply_to_user": {"reputation": 28284, "user_id": 155187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cE563.jpg?s=128&g=1", "display_name": "warrenm", "link": "https://stackoverflow.com/users/155187/warrenm"}, "edited": false, "score": 0, "creation_date": 1574361521, "post_id": 58964035, "comment_id": 104216011, "body": "@warrenm thanks yes I just discover this ! I asked few question regarding the texture we need to use for the depth and stencil attachement here: <a href=\"https://stackoverflow.com/questions/58981644/how-to-create-the-texture-for-the-depthattachment-and-stencilattachement\" title=\"how to create the texture for the depthattachment and stencilattachement\">stackoverflow.com/questions/58981644/&hellip;</a> ... If you can take a look :)"}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 1829170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tvtJ.png?s=128&g=1", "display_name": "emllnd", "link": "https://stackoverflow.com/users/1829170/emllnd"}, "edited": false, "score": 0, "creation_date": 1610819583, "post_id": 62335626, "comment_id": 116254548, "body": "Thank you! Specifically this part: <code>struct DepthClearFragmentOut { float depth [[depth(any)]]; };</code> helped me with some depth buffer modification code (was hard to dig what the <code>depth_attributes</code> should be based on just Apple&#39;s docs, turns out at least <code>any</code> works)"}], "tags": [], "owner": {"reputation": 46, "user_id": 13731065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e251a5934c4b907606fdbb31d990fc57?s=128&d=identicon&r=PG&f=1", "display_name": "Monroe Williams", "link": "https://stackoverflow.com/users/13731065/monroe-williams"}, "is_accepted": true, "score": 3, "last_activity_date": 1591921504, "creation_date": 1591921504, "answer_id": 62335626, "question_id": 58964035, "link": "https://stackoverflow.com/questions/58964035/in-metal-how-to-clear-the-depth-buffer-or-the-stencil-buffer/62335626#62335626", "title": "In metal how to clear the depth buffer or the stencil buffer?", "body": "<p>While it's true that Metal doesn't provide a mechanism to clear the depth or stencil buffers in the middle of a rendering pass, it's possible to create a near-trivial pipeline state that allows you to do so as selectively as you like.</p>\n\n<p>In the course of porting some OpenGL code to Metal, I found myself with a need to clear a section of the depth buffer that corresponds to the bounds of the currently set viewport. Here was my solution:</p>\n\n<p>In my setup code, I create a specialized MTLRenderPipelineState and MTLDepthStencilState that are used only for the purpose of clearing the depth buffer, and stash them in my MTKView subclass with my other long-lived resources:</p>\n\n<pre><code>@property (nonatomic, retain) id&lt;MTLRenderPipelineState&gt; pipelineDepthClear;\n@property (nonatomic, retain) id&lt;MTLDepthStencilState&gt; depthStencilClear;\n\n[...]\n\n// Special depth stencil state for clearing the depth buffer\nMTLDepthStencilDescriptor *depthStencilDescriptor = [[MTLDepthStencilDescriptor alloc] init];\n\n// Don't actually perform a depth test, just always write the buffer\ndepthStencilDescriptor.depthCompareFunction = MTLCompareFunctionAlways;\ndepthStencilDescriptor.depthWriteEnabled = YES;\ndepthStencilDescriptor.label = @\"depthStencilClear\";\ndepthStencilClear = [self.device newDepthStencilStateWithDescriptor:depthStencilDescriptor];\n\n// Special pipeline state just for clearing the depth buffer.\nMTLRenderPipelineDescriptor *renderPipelineDescriptor = [[MTLRenderPipelineDescriptor alloc] init];\n\n// Omit the color attachment, since we don't want to write the color buffer for this case.\n\nrenderPipelineDescriptor.depthAttachmentPixelFormat = self.depthStencilPixelFormat;\nrenderPipelineDescriptor.rasterSampleCount = self.sampleCount;\n\nrenderPipelineDescriptor.vertexFunction = [self.library newFunctionWithName:@\"vertex_depth_clear\"];\nrenderPipelineDescriptor.vertexFunction.label = @\"vertexDepthClear\";\n\nrenderPipelineDescriptor.fragmentFunction = [self.library newFunctionWithName:@\"fragment_depth_clear\"];\nrenderPipelineDescriptor.fragmentFunction.label = @\"fragmentDepthClear\";\n\nMTLVertexDescriptor *vertexDescriptor = [[MTLVertexDescriptor alloc] init];\nvertexDescriptor.attributes[0].format = MTLVertexFormatFloat2;\nvertexDescriptor.attributes[0].offset = 0;\nvertexDescriptor.attributes[0].bufferIndex = 0;\nvertexDescriptor.layouts[0].stepRate = 1;\nvertexDescriptor.layouts[0].stepFunction = MTLVertexStepFunctionPerVertex;\nvertexDescriptor.layouts[0].stride = 8;\n\nrenderPipelineDescriptor.vertexDescriptor = vertexDescriptor;\n\nNSError* error = NULL;\nrenderPipelineDescriptor.label = @\"pipelineDepthClear\";\nself.pipelineDepthClear = [self.device newRenderPipelineStateWithDescriptor:renderPipelineDescriptor error:&amp;error];\n\n</code></pre>\n\n<p>and set up the matching vertex and fragment functions in my .metal file:</p>\n\n<pre><code>struct DepthClearVertexIn\n{\n    float2 position [[ attribute(0) ]];\n};\n\nstruct DepthClearVertexOut\n{\n    float4 position [[ position ]];\n};\n\nstruct DepthClearFragmentOut\n{\n    float depth [[depth(any)]];\n};\n\nvertex DepthClearVertexOut \nvertex_depth_clear(     DepthClearVertexIn in [[ stage_in ]])\n{\n    DepthClearVertexOut out;\n    // Just pass the position through. We're clearing in NDC space.\n    out.position = float4(in.position, 0.5, 1.0);\n    return out;\n}\n\nfragment DepthClearFragmentOut fragment_depth_clear()\n{\n    DepthClearFragmentOut out;\n    out.depth = 1.0;\n    return out;\n}\n</code></pre>\n\n<p>Finally, the body of my clearDepthBuffer() method looks like this:</p>\n\n<pre><code>// Set up the pipeline and depth/stencil state to write a clear value to only the depth buffer.\n[view.commandEncoder setDepthStencilState:view.depthStencilClear];\n[view.commandEncoder setRenderPipelineState:view.pipelineDepthClear];\n\n// Normalized Device Coordinates of a tristrip we'll draw to clear the buffer\n// (the vertex shader set in pipelineDepthClear ignores all transforms and just passes these through)\nfloat clearCoords[8] = {\n    -1, -1,\n    1, -1,\n    -1, 1,\n    1, 1\n};\n\n[view.commandEncoder setVertexBytes:clearCoords length:sizeof(float) * 8 atIndex:0];\n[view.commandEncoder drawPrimitives:MTLPrimitiveTypeTriangleStrip vertexStart:0 vertexCount:4];\n\n// Be sure to reset the setDepthStencilState and setRenderPipelineState for further drawing\n</code></pre>\n\n<p>Since the vertex shader doesn't transform the coordinates at all, I specify the input geometry in NDC space, so a rectangle from (-1, -1) to (1, 1) covers the entire viewport. The same technique could be used to clear any portion of your depth buffer if you set up the geometry and/or transforms appropiately.</p>\n\n<p>A similar technique should work for clearing stencil buffers, but I'll leave that as an exercise to the reader. ;)</p>\n"}], "owner": {"reputation": 9675, "user_id": 1114043, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/EwPfY.jpg?s=128&g=1", "display_name": "zeus", "link": "https://stackoverflow.com/users/1114043/zeus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 807, "favorite_count": 0, "accepted_answer_id": 62335626, "answer_count": 1, "score": 1, "last_activity_date": 1591921504, "creation_date": 1574287167, "last_edit_date": 1574287902, "question_id": 58964035, "link": "https://stackoverflow.com/questions/58964035/in-metal-how-to-clear-the-depth-buffer-or-the-stencil-buffer", "title": "In metal how to clear the depth buffer or the stencil buffer?", "body": "<p>In metal, when I already have a RenderCommandEncoder and when I already did some job with it, how can I clear the <strong>depth buffer</strong> or the <strong>stencil buffer</strong> (but not both I need to keep one)? For example, in OpenGl we have <code>glClearDepthf</code> / <code>GL_DEPTH_BUFFER_BIT</code> and <code>glClearStencil</code> / <code>GL_STENCIL_BUFFER_BIT</code> but I didn't find any equivalent in metal.</p>\n"}, {"tags": ["objective-c", "swift", "uitableview", "memory", "uiimage"], "comments": [{"owner": {"reputation": 10833, "user_id": 1305067, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/HI2TR.png?s=128&g=1", "display_name": "paulvs", "link": "https://stackoverflow.com/users/1305067/paulvs"}, "edited": false, "score": 0, "creation_date": 1574273761, "post_id": 58960740, "comment_id": 104177010, "body": "That <code>[UIImage initWithContentsOfFile:]</code> is somehow faster than <code>UIImage(named:)</code> is a false premise. If there is a memory problem, you&#39;ll have to provide more details."}, {"owner": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "edited": false, "score": 1, "creation_date": 1574282403, "post_id": 58960740, "comment_id": 104181111, "body": "Are you actually running out of memory? If so, the first technique to look at is to resize the jpeg image to the size of the <code>foodImage</code> image view. It is a huge waste of memory to make your image view display a big image at a small size."}], "answers": [{"tags": [], "owner": {"reputation": 118981, "user_id": 12299030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hx4Fa.jpg?s=128&g=1", "display_name": "Asperi", "link": "https://stackoverflow.com/users/12299030/asperi"}, "is_accepted": false, "score": 0, "last_activity_date": 1574358299, "creation_date": 1574358299, "answer_id": 58980846, "question_id": 58960740, "link": "https://stackoverflow.com/questions/58960740/growing-memory-footprint-from-use-of-uiimages/58980846#58980846", "title": "Growing memory footprint from use of UIImages", "body": "<p><code>UIImage(named:)</code> caches once loaded image and keeps it in run-time until app quits or 'out of memory' notification from system, on which cache somehow cleaned up automatically. </p>\n\n<p>Thus it is better to use this constructor only for small images, which are either always visible in UI or used often. </p>\n\n<p>For other cases (probably your table view case is here) it is better to use <code>UIImage(contentsOfFile:)</code> constructor with implemented some in-app cache logic to keep it for some workflow only but clean when go out it (other mode, scenario, etc. including force cleaning for 'out of memory' notifications)</p>\n"}], "owner": {"reputation": 329, "user_id": 7114664, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/55eff97dcdd373032e17d30bb7026ce1?s=128&d=identicon&r=PG&f=1", "display_name": "kitchen800", "link": "https://stackoverflow.com/users/7114664/kitchen800"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1574358299, "creation_date": 1574273103, "question_id": 58960740, "link": "https://stackoverflow.com/questions/58960740/growing-memory-footprint-from-use-of-uiimages", "title": "Growing memory footprint from use of UIImages", "body": "<p>My app utilises tableviews that all have associated UIImages. \nI show my UIImages in the app using: </p>\n\n<pre><code>cell.foodImage.image = UIImage(named: foodImageArray[indexPath.row] + \".jpg\")\n</code></pre>\n\n<p>I know in objective c something such as </p>\n\n<pre><code>UIImage initWithContentsOfFile\n</code></pre>\n\n<p>Could be used in order to keep the memory footprint low.\nIs there something like this I can use in swift?</p>\n"}, {"tags": ["objective-c", "enums"], "comments": [{"owner": {"reputation": 20658, "user_id": 344733, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/5edfaa616df6d3cef8581b317f6b0aa0?s=128&d=identicon&r=PG", "display_name": "Andrew Madsen", "link": "https://stackoverflow.com/users/344733/andrew-madsen"}, "edited": false, "score": 0, "creation_date": 1574271874, "post_id": 58958953, "comment_id": 104176032, "body": "This blog post explains one approach. I wouldn&#39;t call it elegant. <a href=\"https://blog.twitch.tv/en/2018/05/14/artisanal-objective-c-sum-types-8ea1ab9da342/\" rel=\"nofollow noreferrer\">blog.twitch.tv/en/2018/05/14/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 20658, "user_id": 344733, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/5edfaa616df6d3cef8581b317f6b0aa0?s=128&d=identicon&r=PG", "display_name": "Andrew Madsen", "link": "https://stackoverflow.com/users/344733/andrew-madsen"}, "is_accepted": true, "score": 1, "last_activity_date": 1574273556, "creation_date": 1574273556, "answer_id": 58960865, "question_id": 58958953, "link": "https://stackoverflow.com/questions/58958953/expressing-enum-with-associated-values-in-objective-c/58960865#58960865", "title": "Expressing enum with associated values in Objective C", "body": "<p>While it is possible with a lot of work to accomplish something very similar to Swift's enums with associated types in Objective-C (see the blog post I linked in a comment above), it requires a bunch of hard-to-comprehend code.</p>\n\n<p>I'd recommend taking a more natural Objective-C style approach. You'll lose out on some of the type safety Swift provides, but ObjC is naturally a less type-safe language.</p>\n\n<p>For example:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>// Create an options enum. Bridges into Swift as an OptionSet\ntypedef NS_OPTIONS(NSInteger, CoffeeOptions) {\n    CoffeeOptionsBlack = 0,\n    CoffeeOptionsWithSugar = 1 &lt;&lt; 0,\n    CoffeeOptionsWithCream = 1 &lt;&lt; 1\n};\n\n// Create a (non-extensible) string-typed \"enum\". Bridges into Swift as an enum-style struct with string \"raw values\"\ntypedef NSString *CoffeeQuantityKey NS_TYPED_EXTENSIBLE_ENUM;\nstatic CoffeeQuantityKey const CoffeeQuantityKeySpoonsOfSugar = @\"SpoonsOfSugar\";\nstatic CoffeeQuantityKey const CoffeeQuantityKeyTeaspoonsOfCream = @\"TeaspoonsOfCream\";\n\n@interface CoffeeMachine : NSObject\n- (void)makeCoffeeWithOptions:(CoffeeOptions)options quantities:(NSDictionary&lt;CoffeeQuantityKey, NSNumber *&gt; *)quantities;\n@end\n\n@implementation CoffeeMachine\n\n- (void)makeCoffeeWithOptions:(CoffeeOptions)options quantities:(NSDictionary&lt;CoffeeQuantityKey, NSNumber *&gt; *)quantities\n{\n    // Make coffee\n    if (options &amp; CoffeeOptionsWithSugar) {\n        NSNumber *sugarAmount = quantities[CoffeeQuantityKeySpoonsOfSugar] ?: @1; // Default to 1 spoon\n        NSLog(@\"Adding %@ spoons of sugar\", sugarAmount);\n    }\n\n    if (options &amp; CoffeeOptionsWithCream) {\n        NSNumber *creamAmount = quantities[CoffeeQuantityKeyTeaspoonsOfCream] ?: @1; // Default to 1 teaspoon\n        NSLog(@\"Adding %@ teaspoons of cream\", creamAmount);\n    }\n}\n\n@end\n</code></pre>\n\n<p>This also has the advantage of bridging relatively nicely into Swift:</p>\n\n<pre class=\"lang-swift prettyprint-override\"><code>let cm = CoffeeMachine()\ncm.makeCoffee(options: [.withSugar, .withCream], quantities: [.spoonsOfSugar : 3])\n</code></pre>\n"}], "owner": {"reputation": 8483, "user_id": 5318223, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/be47da4995eb4e8dff0ab4637e5773d6?s=128&d=identicon&r=PG&f=1", "display_name": "Kiril S.", "link": "https://stackoverflow.com/users/5318223/kiril-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "accepted_answer_id": 58960865, "answer_count": 1, "score": 0, "last_activity_date": 1574273556, "creation_date": 1574266866, "last_edit_date": 1574270714, "question_id": 58958953, "link": "https://stackoverflow.com/questions/58958953/expressing-enum-with-associated-values-in-objective-c", "title": "Expressing enum with associated values in Objective C", "body": "<p>In Swift there are enums with associated values:</p>\n\n<pre><code>enum Coffee {\n    case Black\n    case BlackWithSugar(spoons: Int)\n    // ....\n}\n</code></pre>\n\n<p>Clearly the goal here is to:</p>\n\n<ul>\n<li>Have one case that expresses <code>BlackWithSugar</code> (not 100 cases, like <code>BlackWith1Sugar</code>, <code>BlackWith2Sugar</code>) and so on</li>\n<li>But preserve additional info (number of spoons) inside the same structure</li>\n</ul>\n\n<p>What's the closest / most elegant way to express the same in Objective C?</p>\n\n<p>Note: I saw <a href=\"https://stackoverflow.com/questions/40129941/swift-enum-associated-values-in-objective-c\">this</a> question, but 2 answers do not say <strong>how to express the same intent in Objective C</strong>. I'm ok with using something other than enum, and using Swift is not an option.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["objective-c", "swift", "unity3d"], "answers": [{"tags": [], "owner": {"reputation": 302, "user_id": 3784036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XdR1Y.jpg?s=128&g=1", "display_name": "Bruno Miguens", "link": "https://stackoverflow.com/users/3784036/bruno-miguens"}, "is_accepted": false, "score": 1, "last_activity_date": 1574273715, "creation_date": 1574273715, "answer_id": 58960898, "question_id": 58957232, "link": "https://stackoverflow.com/questions/58957232/exposing-a-swift-variable-in-objective-c/58960898#58960898", "title": "Exposing a Swift variable in Objective-C", "body": "<p>Normally to make Swift available in Objective-C you just need to import your swift module <code>#import \"ProductModuleName-Swift.h\"</code>, as you're doing.</p>\n\n<p>If you need the swift code in the Objective-C header use <code>@class MySwiftClass;</code> or <code>@protocol MySwiftClass;</code>.</p>\n\n<p>You can force some class or property to be accessible in Objective-C by adding the attribute <code>@objc</code>.</p>\n\n<blockquote>\n  <p>Remember that <code>private</code> or <code>fileprivate</code> access level attributes will not be accessible unless you add the previous attribute.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 249319, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "is_accepted": false, "score": 1, "last_activity_date": 1575553307, "creation_date": 1575553307, "answer_id": 59196511, "question_id": 58957232, "link": "https://stackoverflow.com/questions/58957232/exposing-a-swift-variable-in-objective-c/59196511#59196511", "title": "Exposing a Swift variable in Objective-C", "body": "<p>To expose things to ObjC, you need to mark them <code>@objc</code>. In this case you should add this before <code>class</code> and before the <code>static let</code>.</p>\n\n<p>In previous versions of Swift, inheritance from <code>NSObject</code> automatically implied <code>@objc</code>, but that was removed, and it now needs to be explicit.</p>\n"}], "owner": {"reputation": 238, "user_id": 5651514, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4tHYclNFxas/AAAAAAAAAAI/AAAAAAAAABw/ej_wzEAL0j8/photo.jpg?sz=128", "display_name": "Aman pradhan", "link": "https://stackoverflow.com/users/5651514/aman-pradhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575553307, "creation_date": 1574261701, "last_edit_date": 1575553028, "question_id": 58957232, "link": "https://stackoverflow.com/questions/58957232/exposing-a-swift-variable-in-objective-c", "title": "Exposing a Swift variable in Objective-C", "body": "<p>I am using a Swift class which uses a variable sharedInstance. When I am trying to use this variable in my Objective-C file, I am getting the error:</p>\n\n<blockquote>\n  <p>No known class method for selector 'sharedInstance'</p>\n</blockquote>\n\n<p>My Swift class:</p>\n\n<pre><code>class SpeakToMeForUnity : NSObject, SFSpeechRecognizerDelegate {\n\nfileprivate var speechRecognizer : SFSpeechRecognizer?\nfileprivate var recognitionRequest : SFSpeechAudioBufferRecognitionRequest?\nfileprivate var recognitionTask : SFSpeechRecognitionTask?\nfileprivate var audioEngine : AVAudioEngine?\n\nstatic let sharedInstance = SpeakToMeForUnity()\n\noverride fileprivate init() {\n    super.init()\n\n    self.speechRecognizer = SFSpeechRecognizer(locale: Locale(identifier: \"ja-JP\"))!\n    self.audioEngine = AVAudioEngine()\n\n    self.speechRecognizer?.delegate = self\n                            }\n// Some other functions\n}\n</code></pre>\n\n<p>Below is my Objective-C file:</p>\n\n<pre><code>#import &lt;Speech/Speech.h&gt;\n#import \"SpeakToMeForUnity-Swift.h\"\n\nextern \"C\"\n{\n    void _prepareRecording()\n    {\n        SpeakToMeForUnity *instance = [SpeakToMeForUnity sharedInstance];\n        [instance prepareRecording];\n    }\n\n    void _recordButtonTapped()\n    {\n        SpeakToMeForUnity *instance = [SpeakToMeForUnity sharedInstance];\n        [instance recordButtonTapped];\n    }\n}\n</code></pre>\n\n<p>I am using Swift 4 and Xcode 10.3.</p>\n"}, {"tags": ["ios", "objective-c", "xcode", "frameworks", "bitcode"], "answers": [{"tags": [], "owner": {"reputation": 1626, "user_id": 5305817, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/TyH63.jpg?s=128&g=1", "display_name": "Jaime Alc&#225;ntara Arnela", "link": "https://stackoverflow.com/users/5305817/jaime-alc%c3%a1ntara-arnela"}, "is_accepted": true, "score": 0, "last_activity_date": 1575015513, "creation_date": 1575015513, "answer_id": 59101094, "question_id": 58953167, "link": "https://stackoverflow.com/questions/58953167/bitcode-not-being-included-in-my-framework/59101094#59101094", "title": "Bitcode not being included in my Framework", "body": "<p>Okey finally I found the solution. In my case I had some library imported in my project which didn't have bitcode added.</p>\n\n<p>You have to check that every library you use has bitcode and, if not, update to a version that has it (or download the code and compile it yourself with bitcode enabled as I've done).</p>\n\n<p>You can check if a lib has bitcode enabled with the link in my question, but I'll paste it <a href=\"https://stackoverflow.com/questions/32755775/how-to-check-a-static-library-is-built-contain-bitcode/33105733#33105733\">here</a> again.</p>\n\n<p>Hope this help somebody.</p>\n"}], "owner": {"reputation": 1626, "user_id": 5305817, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/TyH63.jpg?s=128&g=1", "display_name": "Jaime Alc&#225;ntara Arnela", "link": "https://stackoverflow.com/users/5305817/jaime-alc%c3%a1ntara-arnela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 59101094, "answer_count": 1, "score": 1, "last_activity_date": 1575015513, "creation_date": 1574248921, "question_id": 58953167, "link": "https://stackoverflow.com/questions/58953167/bitcode-not-being-included-in-my-framework", "title": "Bitcode not being included in my Framework", "body": "<p>I'm trying to build a Framework with bitcode included. To do so I've used <a href=\"https://medium.com/@heitorburger/static-libraries-frameworks-and-bitcode-6d8f784478a9\" rel=\"nofollow noreferrer\">this post</a> (the section about universal libraries). </p>\n\n<p>After that I've tried to check that the bitcode is actually included in the result following\n <a href=\"https://stackoverflow.com/questions/32755775/how-to-check-a-static-library-is-built-contain-bitcode\">this answer</a> but it seems more difficult to do it with a framework. So, I've done it with my .a (which I also generate), and the result is that the library does include the bitcode.</p>\n\n<p>The problem comes when I try to use it in an app with \"Enable Bitcode\" set to \"Yes\", it gives me the error:</p>\n\n<blockquote>\n  <p>bitcode bundle could not be generated because 'path/to/my/lib' was\n  built without full bitcode. All object files and libraries for bitcode\n  must be generated...</p>\n</blockquote>\n\n<p>What could I be missing? Should I change something in the app, or could it be necessary to make an additional configuration in the Framework project?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["objective-c", "audio", "avaudioplayer", "core"], "comments": [{"owner": {"reputation": 4299, "user_id": 5329717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOuLF.png?s=128&g=1", "display_name": "Kamil.S", "link": "https://stackoverflow.com/users/5329717/kamil-s"}, "edited": false, "score": 0, "creation_date": 1574604306, "post_id": 58951431, "comment_id": 104282961, "body": "Gain/volume is set in the underlying <code>AudioQueue</code> of the <code>AVAudioPlayer</code>, hence you will need to detect appropriate moment when your buffer will start to play and set the volume on the player itself."}], "owner": {"reputation": 1481, "user_id": 1013279, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5ec30e83248738b56ca424bc92dee575?s=128&d=identicon&r=PG", "display_name": "Fischer", "link": "https://stackoverflow.com/users/1013279/fischer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1574243772, "creation_date": 1574243772, "question_id": 58951431, "link": "https://stackoverflow.com/questions/58951431/scheduling-buffer-in-avaudioplayernode-with-different-gains", "title": "Scheduling buffer in AVAudioPlayerNode with different gains", "body": "<p>Need to schedule buffers with AVAudioPlayerNode changing the gain each time.</p>\n\n<pre><code>player.scheduleBuffer(buffer!, at: AVAudioTime(sampleTime: sampleTime, atRate: 44100) , options: .interrupts, completionHandler:{} )\n</code></pre>\n\n<p>No gain / volume option in enum AVAudioPlayerNodeBufferOptions.\n<a href=\"https://developer.apple.com/documentation/avfoundation/avaudioplayernodebufferoptions?language=objc\" rel=\"nofollow noreferrer\">https://developer.apple.com/documentation/avfoundation/avaudioplayernodebufferoptions?language=objc</a></p>\n\n<p>Any idea ?</p>\n"}, {"tags": ["objective-c", "swift"], "comments": [{"owner": {"reputation": 14257, "user_id": 526828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8y7Ru.png?s=128&g=1", "display_name": "Matic Oblak", "link": "https://stackoverflow.com/users/526828/matic-oblak"}, "edited": false, "score": 2, "creation_date": 1574242947, "post_id": 58950929, "comment_id": 104158594, "body": "Do you have some links where you read this and maybe let us know which parts made you believe there is a relation between the two? What do you even consider as relation?"}], "answers": [{"tags": [], "owner": {"reputation": 3533, "user_id": 3923929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uiLVo.jpg?s=128&g=1", "display_name": "Durdu", "link": "https://stackoverflow.com/users/3923929/durdu"}, "is_accepted": false, "score": 1, "last_activity_date": 1574244807, "last_edit_date": 1574244807, "creation_date": 1574242464, "answer_id": 58951009, "question_id": 58950929, "link": "https://stackoverflow.com/questions/58950929/is-there-any-relation-between-class-cluster-and-generics/58951009#58951009", "title": "Is there any relation between class cluster and generics?", "body": "<p>I believe this is not the case because\n<strong>class clusters</strong> is a <em>design pattern</em> while <strong>generics</strong> is a <em>language feature</em>.</p>\n\n<hr>\n\n<p>Some more info at hand:</p>\n\n<blockquote>\n  <p><strong><a href=\"https://developer.apple.com/library/archive/documentation/General/Conceptual/DevPedia-CocoaCore/ClassCluster.html\" rel=\"nofollow noreferrer\">Class cluster</a></strong></p>\n  \n  <p>A class cluster is an architecture that groups a number of private,\n  concrete subclasses under a public, abstract superclass.</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p><strong><a href=\"https://docs.swift.org/swift-book/LanguageGuide/Generics.html\" rel=\"nofollow noreferrer\">Generics</a></strong></p>\n  \n  <p>... </p>\n  \n  <p>Generics are one of the most powerful features of Swift, and much\n  of the  Swift standard library is built with generic code.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 9286, "user_id": 425756, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Jsf1p.jpg?s=128&g=1", "display_name": "Justin Meiners", "link": "https://stackoverflow.com/users/425756/justin-meiners"}, "is_accepted": true, "score": 1, "last_activity_date": 1574270587, "last_edit_date": 1574270587, "creation_date": 1574270276, "answer_id": 58959993, "question_id": 58950929, "link": "https://stackoverflow.com/questions/58950929/is-there-any-relation-between-class-cluster-and-generics/58959993#58959993", "title": "Is there any relation between class cluster and generics?", "body": "<p>They aren't very similar. <a href=\"https://developer.apple.com/library/archive/documentation/General/Conceptual/CocoaEncyclopedia/ClassClusters/ClassClusters.html\" rel=\"nofollow noreferrer\">Class cluster</a> is a pattern for <strong>providing multiple implementations</strong> of the same abstract data structure, without exposing this detail to the library user.\nFor example there are many different ways to implement <code>NSDictionary</code>. Should it use a hash table? Linked list chaining? A tree? Just a linear searched array? There are several subclasses of <code>NSDictionary</code> that implement a few of these options. When you create an <code>NSDictionary</code>, it uses the parameters given to pick one of these subclasses to create. It is returned to you as an <code>NSDictionary</code> so you can use it without worrying about the underlying implementation.</p>\n\n<p>Generics on the other hand provide a way to <strong>reuse the same implementation</strong> for several types. The basic example being <code>Array&lt;int&gt;</code>. The same array implementation can be given different types instead of int and they will work similarly.\nUnlike class clusters, this actually doesn't change the underlying behavior of the class, other than substituting in a type.</p>\n"}], "owner": {"reputation": 7423, "user_id": 128647, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/932bfa80e7d5821fd6ff47733095bdc9?s=128&d=identicon&r=PG", "display_name": "Matrix", "link": "https://stackoverflow.com/users/128647/matrix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 58959993, "answer_count": 2, "score": 0, "last_activity_date": 1574270587, "creation_date": 1574242218, "last_edit_date": 1574269728, "question_id": 58950929, "link": "https://stackoverflow.com/questions/58950929/is-there-any-relation-between-class-cluster-and-generics", "title": "Is there any relation between class cluster and generics?", "body": "<p>Is there any relation between class cluster and generics ? </p>\n\n<p>So i was reading about class cluster pattern and it sounds like there is some similarity between class cluster pattern and generics.</p>\n"}, {"tags": ["ios", "objective-c", "assembly"], "comments": [{"owner": {"reputation": 18926, "user_id": 6190582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xha3E.png?s=128&g=1", "display_name": "Reinier Melian", "link": "https://stackoverflow.com/users/6190582/reinier-melian"}, "edited": false, "score": 0, "creation_date": 1574241132, "post_id": 58948999, "comment_id": 104157510, "body": "Can you explain what is the real purpose of this code?"}, {"owner": {"reputation": 18926, "user_id": 6190582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xha3E.png?s=128&g=1", "display_name": "Reinier Melian", "link": "https://stackoverflow.com/users/6190582/reinier-melian"}, "edited": false, "score": 0, "creation_date": 1574241511, "post_id": 58948999, "comment_id": 104157729, "body": "how do you know that is that code the origin of the crash?, for me there is not crash at all"}, {"owner": {"reputation": 45, "user_id": 4712292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e3b2e750a21d5cd30bcd72168f5d2df?s=128&d=identicon&r=PG&f=1", "display_name": "kuperxu", "link": "https://stackoverflow.com/users/4712292/kuperxu"}, "reply_to_user": {"reputation": 18926, "user_id": 6190582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xha3E.png?s=128&g=1", "display_name": "Reinier Melian", "link": "https://stackoverflow.com/users/6190582/reinier-melian"}, "edited": false, "score": 0, "creation_date": 1574318557, "post_id": 58948999, "comment_id": 104191660, "body": "The crash occurred in the project file.I just extracted the part of crashed code."}, {"owner": {"reputation": 45, "user_id": 4712292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e3b2e750a21d5cd30bcd72168f5d2df?s=128&d=identicon&r=PG&f=1", "display_name": "kuperxu", "link": "https://stackoverflow.com/users/4712292/kuperxu"}, "reply_to_user": {"reputation": 18926, "user_id": 6190582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xha3E.png?s=128&g=1", "display_name": "Reinier Melian", "link": "https://stackoverflow.com/users/6190582/reinier-melian"}, "edited": false, "score": 0, "creation_date": 1574318656, "post_id": 58948999, "comment_id": 104191689, "body": "Have you set Build Configuration Release"}, {"owner": {"reputation": 18926, "user_id": 6190582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xha3E.png?s=128&g=1", "display_name": "Reinier Melian", "link": "https://stackoverflow.com/users/6190582/reinier-melian"}, "edited": false, "score": 0, "creation_date": 1574321557, "post_id": 58948999, "comment_id": 104192936, "body": "can you provide the resimbolicated crash log?"}, {"owner": {"reputation": 4299, "user_id": 5329717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOuLF.png?s=128&g=1", "display_name": "Kamil.S", "link": "https://stackoverflow.com/users/5329717/kamil-s"}, "edited": false, "score": 0, "creation_date": 1574871132, "post_id": 58948999, "comment_id": 104386163, "body": "How do you know it&#39;s the very same object instance being <code>objc_release</code>d marked by you in red?"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 4712292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e3b2e750a21d5cd30bcd72168f5d2df?s=128&d=identicon&r=PG&f=1", "display_name": "kuperxu", "link": "https://stackoverflow.com/users/4712292/kuperxu"}, "edited": false, "score": 0, "creation_date": 1574318811, "post_id": 58949598, "comment_id": 104191744, "body": "I don&#39;t think so. The crash was because it was released twice."}], "tags": [], "owner": {"reputation": 9, "user_id": 8134672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c4fa782090e67eb14ef52fca15055be?s=128&d=identicon&r=PG&f=1", "display_name": "Hjay", "link": "https://stackoverflow.com/users/8134672/hjay"}, "is_accepted": false, "score": 0, "last_activity_date": 1574237823, "creation_date": 1574237823, "answer_id": 58949598, "question_id": 58948999, "link": "https://stackoverflow.com/questions/58948999/oc-crashreturn-nsmutablestring-as-nsstring-to-use/58949598#58949598", "title": "OC Crash:return NSMutableString as NSString to use", "body": "<p>when you set str = str.length > 0 ? str : @\"2\",the str is be __NSCFString not muti, so you reset str make crash </p>\n"}], "owner": {"reputation": 45, "user_id": 4712292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e3b2e750a21d5cd30bcd72168f5d2df?s=128&d=identicon&r=PG&f=1", "display_name": "kuperxu", "link": "https://stackoverflow.com/users/4712292/kuperxu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574237823, "creation_date": 1574235349, "question_id": 58948999, "link": "https://stackoverflow.com/questions/58948999/oc-crashreturn-nsmutablestring-as-nsstring-to-use", "title": "OC Crash:return NSMutableString as NSString to use", "body": "<p>build in release mode and run,then crash.</p>\n\n<pre><code>- (NSString *)testMutableStringReturnStringCrash{\n    NSString *str = nil;\n\n    if(str.length &lt;= 0){\n        str = mutableStringAsNSString();\n    }else{\n        str = @\"1\";\n    }\n\n    str = str.length &gt; 0 ? str : @\"2\";\n    str = str.length &gt; 0 ? str : @\"3\";\n\n    NSString *content = [NSString stringWithFormat:@\"%@\", str];\n    return content;\n}\n\n\nNSString *mutableStringAsNSString(){\n    return [NSMutableString stringWithString:@\"0\"];\n}\n</code></pre>\n\n<p>I have found that is a question about the code's assembly language. \uff08Released twice\uff09\nBut I don't understand why.\n<a href=\"https://i.stack.imgur.com/zljXT.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zljXT.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["objective-c"], "comments": [{"owner": {"reputation": 23, "user_id": 12401822, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0RajtA9JY50/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcAajq6glq9JzspkdPbUCWzT1y03A/photo.jpg?sz=128", "display_name": "Karthick TM", "link": "https://stackoverflow.com/users/12401822/karthick-tm"}, "edited": false, "score": 0, "creation_date": 1574229740, "post_id": 58947646, "comment_id": 104152643, "body": "i have tried but i have got the start date and end date for current month"}, {"owner": {"reputation": 6737, "user_id": 219957, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/518466927f7aec46ff32cacb6bfac0c9?s=128&d=identicon&r=PG", "display_name": "Ladislav", "link": "https://stackoverflow.com/users/219957/ladislav"}, "edited": false, "score": 0, "creation_date": 1574244264, "post_id": 58947646, "comment_id": 104159374, "body": "So for example for November first week 2019 it should return startDate 1/11/2019 and endDate 4/11/2019 or should it be sunday 3/11/2019?"}, {"owner": {"reputation": 23, "user_id": 12401822, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0RajtA9JY50/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcAajq6glq9JzspkdPbUCWzT1y03A/photo.jpg?sz=128", "display_name": "Karthick TM", "link": "https://stackoverflow.com/users/12401822/karthick-tm"}, "reply_to_user": {"reputation": 6737, "user_id": 219957, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/518466927f7aec46ff32cacb6bfac0c9?s=128&d=identicon&r=PG", "display_name": "Ladislav", "link": "https://stackoverflow.com/users/219957/ladislav"}, "edited": false, "score": 0, "creation_date": 1574244749, "post_id": 58947646, "comment_id": 104159674, "body": "No it should be 1/11/2019 and endDate 4/11/2019."}, {"owner": {"reputation": 6737, "user_id": 219957, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/518466927f7aec46ff32cacb6bfac0c9?s=128&d=identicon&r=PG", "display_name": "Ladislav", "link": "https://stackoverflow.com/users/219957/ladislav"}, "edited": false, "score": 0, "creation_date": 1574244793, "post_id": 58947646, "comment_id": 104159709, "body": "And for last week or October and November should be what..."}, {"owner": {"reputation": 23, "user_id": 12401822, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0RajtA9JY50/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcAajq6glq9JzspkdPbUCWzT1y03A/photo.jpg?sz=128", "display_name": "Karthick TM", "link": "https://stackoverflow.com/users/12401822/karthick-tm"}, "reply_to_user": {"reputation": 6737, "user_id": 219957, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/518466927f7aec46ff32cacb6bfac0c9?s=128&d=identicon&r=PG", "display_name": "Ladislav", "link": "https://stackoverflow.com/users/219957/ladislav"}, "edited": false, "score": 0, "creation_date": 1574244981, "post_id": 58947646, "comment_id": 104159834, "body": "for the last week it should return the dates which belong to the month alone, For example take September 2019 last week has only two days so if the user inout last week it should return the two dates only which is 29/9/2019, 30/9/2019"}, {"owner": {"reputation": 6737, "user_id": 219957, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/518466927f7aec46ff32cacb6bfac0c9?s=128&d=identicon&r=PG", "display_name": "Ladislav", "link": "https://stackoverflow.com/users/219957/ladislav"}, "edited": false, "score": 0, "creation_date": 1574248299, "post_id": 58947646, "comment_id": 104161834, "body": "Check the anwer, hope it does what you wanted..."}], "answers": [{"tags": [], "owner": {"reputation": 6737, "user_id": 219957, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/518466927f7aec46ff32cacb6bfac0c9?s=128&d=identicon&r=PG", "display_name": "Ladislav", "link": "https://stackoverflow.com/users/219957/ladislav"}, "is_accepted": true, "score": 0, "last_activity_date": 1574247783, "creation_date": 1574247783, "answer_id": 58952811, "question_id": 58947646, "link": "https://stackoverflow.com/questions/58947646/get-start-and-end-date-of-a-week-month-week-number-and-year-is-given-as-user/58952811#58952811", "title": "Get start and end date of a week. Month, week number, and year is given as user input", "body": "<p>I came up with this that fulfills your criteria I think</p>\n\n<pre><code>NSInteger year = 2019;\nNSInteger month = 11;\nNSInteger week = 1;\n\nNSCalendar *cal = [[NSCalendar alloc] initWithCalendarIdentifier:NSCalendarIdentifierGregorian];\n\ncal.firstWeekday = 2;\n\nNSDateComponents *comps = [NSDateComponents new];\ncomps.calendar = cal;\ncomps.year = year;\ncomps.month = month;\ncomps.weekday = cal.firstWeekday;\ncomps.weekdayOrdinal = week - 1;\n\nNSDateComponents *startOfTheMonthComps = [NSDateComponents new];\nstartOfTheMonthComps.year = year;\nstartOfTheMonthComps.month = month;\nNSDateComponents *endOfTheMonthComps = [NSDateComponents new];\nendOfTheMonthComps.year = year;\nendOfTheMonthComps.month = month + 1;\n\nNSDate *startOfTheMonth = [cal dateFromComponents:startOfTheMonthComps];\nNSDate *endOfTheMonth = [[cal dateFromComponents:endOfTheMonthComps] dateByAddingTimeInterval:-1];\n\nNSDate *date = [comps date];\nNSDate *startOfTheWeek;\nNSDate *endOfWeek;\nNSTimeInterval interval;\n[cal rangeOfUnit:NSCalendarUnitWeekOfYear\n       startDate:&amp;startOfTheWeek\n        interval:&amp;interval\n         forDate:date];\n\nendOfWeek = [startOfTheWeek dateByAddingTimeInterval:interval];\n\nstartOfTheWeek = [startOfTheWeek dateByAddingTimeInterval:-1];\n\n\nif ([startOfTheWeek compare:startOfTheMonth] == NSOrderedAscending) {\n    startOfTheWeek = startOfTheMonth;\n}\n\nif ([endOfTheMonth compare:endOfWeek] == NSOrderedAscending) {\n    endOfWeek = endOfTheMonth;\n}\nNSLog(@\"start %@\", startOfTheWeek);\nNSLog(@\"end %@\", endOfWeek);\n</code></pre>\n\n<p>So for 1st week of November you get <code>Fri Nov  1</code> and <code>Mon Nov  4</code> and for last week of September - week 6 <code>Sun Sep 29</code> and <code>Mon Sep 30</code></p>\n"}], "owner": {"reputation": 23, "user_id": 12401822, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0RajtA9JY50/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcAajq6glq9JzspkdPbUCWzT1y03A/photo.jpg?sz=128", "display_name": "Karthick TM", "link": "https://stackoverflow.com/users/12401822/karthick-tm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 1, "accepted_answer_id": 58952811, "answer_count": 1, "score": 1, "last_activity_date": 1574247783, "creation_date": 1574229430, "last_edit_date": 1574233675, "question_id": 58947646, "link": "https://stackoverflow.com/questions/58947646/get-start-and-end-date-of-a-week-month-week-number-and-year-is-given-as-user", "title": "Get start and end date of a week. Month, week number, and year is given as user input", "body": "<p>My code should bring the date of a particular week, when the user provide the month, week number, and year. For example: If my user input is month (String) --> \"October\", week (Int) -- > 1, year (int) --> 2019, the above input should give the response like startDate --> 01/10/2019, endDate --> 07/10/2019.</p>\n\n<p>If the user give the last week of any month it should bring the remaining days in the month. Week calculated from Sunday. </p>\n\n<p>My attempted code giving start date and end date for current month / current </p>\n\n<pre><code>NSCalendar *cal = [[NSCalendar alloc] initWithCalendarIdentifier:NSCalendarIdentifierGregorian];\n\ncal.firstWeekday = 1;// set first week day to Monday\n// 1: Sunday, 2: Monday, ..., 7:Saturday\n\nNSDate *now = [NSDate date];\nNSDate *startOfTheWeek;\nNSDate *endOfWeek;\nNSTimeInterval interval;\n[cal rangeOfUnit:NSCalendarUnitWeekOfYear\n       startDate:&amp;startOfTheWeek\n        interval:&amp;interval\n         forDate:now];\n//startOfTheWeek holds the beginning of the week\n\nendOfWeek = [startOfTheWeek dateByAddingTimeInterval:interval - 1];\n// endOfWeek now holds the last second of the last week day\n\n[cal rangeOfUnit:NSCalendarUnitDay\n       startDate:&amp;endOfWeek\n        interval:NULL\n         forDate:endOfWeek];\n// endOfWeek now holds the beginning of the last week day\n\nNSDateFormatter *formatter = [[NSDateFormatter alloc] init];\nformatter.dateStyle = NSDateFormatterShortStyle;\nformatter.timeStyle = NSDateFormatterShortStyle;\n\nNSLog(@\"start: %@\", [formatter stringFromDate:startOfTheWeek]);\nNSLog(@\"end:   %@\", [formatter stringFromDate:endOfWeek]);\n</code></pre>\n"}, {"tags": ["ios", "objective-c", "swift", "foundation", "xcode11.1"], "comments": [{"owner": {"reputation": 719, "user_id": 3146021, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5de1b244ab440a3227f3a04f10f42e8a?s=128&d=identicon&r=PG", "display_name": "Trai Nguyen", "link": "https://stackoverflow.com/users/3146021/trai-nguyen"}, "edited": false, "score": 0, "creation_date": 1574221659, "post_id": 58945977, "comment_id": 104150583, "body": "plz give more information about iOS version device and some import line in your AppDelegate file, seem your project using Objective-C language?"}, {"owner": {"reputation": 1981, "user_id": 2226399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gi21m.jpg?s=128&g=1", "display_name": "Harshal Wani", "link": "https://stackoverflow.com/users/2226399/harshal-wani"}, "reply_to_user": {"reputation": 719, "user_id": 3146021, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5de1b244ab440a3227f3a04f10f42e8a?s=128&d=identicon&r=PG", "display_name": "Trai Nguyen", "link": "https://stackoverflow.com/users/3146021/trai-nguyen"}, "edited": false, "score": 0, "creation_date": 1574222029, "post_id": 58945977, "comment_id": 104150668, "body": "@TraiNguyen please see updated question"}, {"owner": {"reputation": 810, "user_id": 10284355, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MvG5cbj1anc/AAAAAAAAAAI/AAAAAAAAEVQ/SvZeGMQHSgU/photo.jpg?sz=128", "display_name": "Krunal Nagvadia", "link": "https://stackoverflow.com/users/10284355/krunal-nagvadia"}, "edited": false, "score": 0, "creation_date": 1574222053, "post_id": 58945977, "comment_id": 104150673, "body": "My suggestion is to update your Xcode with <code>11.2.1</code> version"}, {"owner": {"reputation": 1981, "user_id": 2226399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gi21m.jpg?s=128&g=1", "display_name": "Harshal Wani", "link": "https://stackoverflow.com/users/2226399/harshal-wani"}, "reply_to_user": {"reputation": 810, "user_id": 10284355, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MvG5cbj1anc/AAAAAAAAAAI/AAAAAAAAEVQ/SvZeGMQHSgU/photo.jpg?sz=128", "display_name": "Krunal Nagvadia", "link": "https://stackoverflow.com/users/10284355/krunal-nagvadia"}, "edited": false, "score": 0, "creation_date": 1574222121, "post_id": 58945977, "comment_id": 104150688, "body": "@KrunalNagvadia can&#39;t custom Swift framework build on same version"}, {"owner": {"reputation": 719, "user_id": 3146021, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5de1b244ab440a3227f3a04f10f42e8a?s=128&d=identicon&r=PG", "display_name": "Trai Nguyen", "link": "https://stackoverflow.com/users/3146021/trai-nguyen"}, "edited": false, "score": 0, "creation_date": 1574222205, "post_id": 58945977, "comment_id": 104150710, "body": "@HarshalWani try <code>#import &lt;Foundation&#47;Foundation.h&gt;</code>"}, {"owner": {"reputation": 1981, "user_id": 2226399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gi21m.jpg?s=128&g=1", "display_name": "Harshal Wani", "link": "https://stackoverflow.com/users/2226399/harshal-wani"}, "reply_to_user": {"reputation": 719, "user_id": 3146021, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5de1b244ab440a3227f3a04f10f42e8a?s=128&d=identicon&r=PG", "display_name": "Trai Nguyen", "link": "https://stackoverflow.com/users/3146021/trai-nguyen"}, "edited": false, "score": 0, "creation_date": 1574222435, "post_id": 58945977, "comment_id": 104150761, "body": "@TraiNguyen already present in AppDelegate.m, even moved to .h same issue"}, {"owner": {"reputation": 719, "user_id": 3146021, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5de1b244ab440a3227f3a04f10f42e8a?s=128&d=identicon&r=PG", "display_name": "Trai Nguyen", "link": "https://stackoverflow.com/users/3146021/trai-nguyen"}, "edited": false, "score": 0, "creation_date": 1574223094, "post_id": 58945977, "comment_id": 104150919, "body": "@HarshalWani try <a href=\"https://stackoverflow.com/a/54999190/3146021\">here</a>"}, {"owner": {"reputation": 1981, "user_id": 2226399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gi21m.jpg?s=128&g=1", "display_name": "Harshal Wani", "link": "https://stackoverflow.com/users/2226399/harshal-wani"}, "edited": false, "score": 0, "creation_date": 1574226076, "post_id": 58945977, "comment_id": 104151585, "body": "Trai, in proj not using pch file"}, {"owner": {"reputation": 719, "user_id": 3146021, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5de1b244ab440a3227f3a04f10f42e8a?s=128&d=identicon&r=PG", "display_name": "Trai Nguyen", "link": "https://stackoverflow.com/users/3146021/trai-nguyen"}, "edited": false, "score": 0, "creation_date": 1574506478, "post_id": 58945977, "comment_id": 104262587, "body": "@HarshalWani are you checking Foundation framework be added into your project? Try remove and add all your using framework again."}], "owner": {"reputation": 1981, "user_id": 2226399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gi21m.jpg?s=128&g=1", "display_name": "Harshal Wani", "link": "https://stackoverflow.com/users/2226399/harshal-wani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1211, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574222194, "creation_date": 1574218879, "last_edit_date": 1574222194, "question_id": 58945977, "link": "https://stackoverflow.com/questions/58945977/xcode-11-1-could-not-build-module-foundation-for-device-only", "title": "Xcode 11.1 could not build module &#39;foundation&#39; for Device only", "body": "<p>Project build and run successfully on the simulator but failed on a real device.</p>\n\n<p><strong>Config:</strong> \nmacOS: 10.15 beta, iOS 13.1, Xcode 11.1</p>\n\n<p>AppDelegate imports:</p>\n\n<pre><code>#import &lt;UIKit/UIKit.h&gt;\n#import &lt;AVFoundation/AVFoundation.h&gt;\n#import &lt;Photos/Photos.h&gt;\n#import &lt;CoreLocation/CoreLocation.h&gt;\n#import &lt;UserNotifications/UserNotifications.h&gt;\n</code></pre>\n\n<p>The project contains both Objective-C and Swift Framework and files.</p>\n\n<p>Even after Restarting Mac/Xcode, clean build folder, Derived Data and use 'Legacy Build System'</p>\n\n<p>It was working until yesterday night :(</p>\n\n<p>Getting error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/gcxtk.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gcxtk.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/dCIxS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dCIxS.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["objective-c", "swift", "thread-safety", "weak-references"], "answers": [{"comments": [{"owner": {"reputation": 1713, "user_id": 673951, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/GLQz6.png?s=128&g=1", "display_name": "John Bushnell", "link": "https://stackoverflow.com/users/673951/john-bushnell"}, "edited": false, "score": 0, "creation_date": 1574193961, "post_id": 58941635, "comment_id": 104142440, "body": "What about Objective-C&#39;s @property (weak, atomic)?"}, {"owner": {"reputation": 249319, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "edited": false, "score": 3, "creation_date": 1574195926, "post_id": 58941635, "comment_id": 104143309, "body": "<code>weak</code> is a pretty big exception to this general rule (which is correct). Clang promises weak reads and assignments are atomic."}], "tags": [], "owner": {"reputation": 137, "user_id": 4040373, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bb41VBHBCm0/AAAAAAAAAAI/AAAAAAAABs4/wc9mnj_N8A0/photo.jpg?sz=128", "display_name": "spentag", "link": "https://stackoverflow.com/users/4040373/spentag"}, "is_accepted": false, "score": -1, "last_activity_date": 1574192120, "creation_date": 1574192120, "answer_id": 58941635, "question_id": 58941537, "link": "https://stackoverflow.com/questions/58941537/in-objective-c-and-swift-are-weak-properties-thread-safe/58941635#58941635", "title": "In Objective-C (and Swift) are weak properties thread safe?", "body": "<p>Almost nothing in Swift is intrinsically thread safe \u2014 not references, not weak references, not arrays, not strings, nor any other mutable value.</p>\n\n<p>If you want write/read or write/write access to anything from two threads, you must use locks to ensure safety.</p>\n\n<p><a href=\"https://medium.com/@mohit.bhalla/thread-safety-in-ios-swift-7b75df1d2ba6\" rel=\"nofollow noreferrer\">https://medium.com/@mohit.bhalla/thread-safety-in-ios-swift-7b75df1d2ba6</a></p>\n\n<p>This link should help!</p>\n"}, {"comments": [{"owner": {"reputation": 160387, "user_id": 25646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bb7953f53aa7715c72054c3d54e7b48?s=128&d=identicon&r=PG", "display_name": "bbum", "link": "https://stackoverflow.com/users/25646/bbum"}, "edited": false, "score": 3, "creation_date": 1574196883, "post_id": 58942381, "comment_id": 104143711, "body": "As always, note that <i>thread safety</i> refers to whether or not the behavior is defined in the multithreaded case.   It does not guarantee <i>data integrity</i> in the multi threaded case."}], "tags": [], "owner": {"reputation": 249319, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "is_accepted": true, "score": 5, "last_activity_date": 1574196786, "last_edit_date": 1574196786, "creation_date": 1574195594, "answer_id": 58942381, "question_id": 58941537, "link": "https://stackoverflow.com/questions/58941537/in-objective-c-and-swift-are-weak-properties-thread-safe/58942381#58942381", "title": "In Objective-C (and Swift) are weak properties thread safe?", "body": "<p><code>weak</code> is part of ARC, and is promised to be atomic by Clang in the way you're describing. See particularly section <a href=\"https://clang.llvm.org/docs/AutomaticReferenceCounting.html#semantics\" rel=\"noreferrer\">4.2 Semantics</a> in the Automatic Reference Counting documentation for Clang.</p>\n\n<p>Of specific interest for this are these sections (emphasis added):</p>\n\n<h3>Reading</h3>\n\n<blockquote>\n  <p>For __weak objects, the current pointee is retained and then released at the end of the current full-expression. <strong>This must execute atomically with respect to assignments and to the final release of the pointee.</strong></p>\n</blockquote>\n\n<h3>Assignment</h3>\n\n<blockquote>\n  <p>For __weak objects, the lvalue is updated to point to the new pointee, unless the new pointee is an object currently undergoing deallocation, in which case the lvalue is updated to a null pointer. <strong>This must execute atomically with respect to other assignments to the object, to reads from the object, and to the final release of the new pointee.</strong></p>\n</blockquote>\n\n<p>Note that many other operations are not atomic, in particular strong assignments (for example, assigning a strong property on two different threads). But the retain counting itself is thread safe, which is really the piece you're worried about here. You are free to retain and release objects on any thread, and the retain count at the end will be correct, including \"implicit\" releases due to <code>weak</code> assignment. It's all the direct result of the following:</p>\n\n<ul>\n<li><a href=\"https://clang.llvm.org/docs/AutomaticReferenceCounting.html#id68\" rel=\"noreferrer\"><code>objc_retain</code></a> is defined to be \"exactly as if the object had been sent the <code>retain</code> message.\"</li>\n<li>\"Object allocation and retain count functions\" are <a href=\"https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Multithreading/ThreadSafetySummary/ThreadSafetySummary.html\" rel=\"noreferrer\">explicitly thread-safe</a>.</li>\n</ul>\n\n<p>The upshot of all of this is that, unlike most parts of Cocoa, reference counting is almost always going to be safely handled across threads.</p>\n"}], "owner": {"reputation": 1713, "user_id": 673951, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/GLQz6.png?s=128&g=1", "display_name": "John Bushnell", "link": "https://stackoverflow.com/users/673951/john-bushnell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "accepted_answer_id": 58942381, "answer_count": 2, "score": 3, "last_activity_date": 1574200414, "creation_date": 1574191686, "last_edit_date": 1574200414, "question_id": 58941537, "link": "https://stackoverflow.com/questions/58941537/in-objective-c-and-swift-are-weak-properties-thread-safe", "title": "In Objective-C (and Swift) are weak properties thread safe?", "body": "<p>When they are being nil'd out because the last strong reference is gone, can you have a problem if that occurs on another thread?  And if so, does using atomic correct for that?  Since I believe Swift doesn't have atomics, what is required for a thread-safe weak property there?</p>\n"}, {"tags": ["objective-c"], "comments": [{"owner": {"reputation": 229649, "user_id": 5044042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vjUNl.jpg?s=128&g=1", "display_name": "vadian", "link": "https://stackoverflow.com/users/5044042/vadian"}, "edited": false, "score": 0, "creation_date": 1574186122, "post_id": 58940078, "comment_id": 104138720, "body": "<code>NSLog</code> also <code>error.localizedDescription</code>.  The class <code>Person</code> must adopt <code>NSCoding</code>"}, {"owner": {"reputation": 17713, "user_id": 1801544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CcSB.jpg?s=128&g=1", "display_name": "Larme", "link": "https://stackoverflow.com/users/1801544/larme"}, "edited": false, "score": 0, "creation_date": 1574186264, "post_id": 58940078, "comment_id": 104138796, "body": "Print <code>error</code> instead of <code>[error code]</code> only? =&gt; <code>NSLog(@&quot;Error: %@&quot;, error);</code>"}, {"owner": {"reputation": 17713, "user_id": 1801544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CcSB.jpg?s=128&g=1", "display_name": "Larme", "link": "https://stackoverflow.com/users/1801544/larme"}, "edited": false, "score": 0, "creation_date": 1574186337, "post_id": 58940078, "comment_id": 104138830, "body": "<a href=\"https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Archiving/Articles/codingobjects.html#//apple_ref/doc/uid/20000948-BCIHBJDE\" rel=\"nofollow noreferrer\">developer.apple.com/library/archive/documentation/Cocoa/&hellip;</a> ?"}, {"owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1574186551, "post_id": 58940078, "comment_id": 104138922, "body": "Made changes to the code to to implement initWithCoder and encodeWithCoder and I showed the full error."}], "answers": [{"comments": [{"owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1574188281, "post_id": 58940484, "comment_id": 104139820, "body": "By Synthasize proeprties do you mean like <code>@property type name weak&#47;strong</code>?"}, {"owner": {"reputation": 229649, "user_id": 5044042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vjUNl.jpg?s=128&g=1", "display_name": "vadian", "link": "https://stackoverflow.com/users/5044042/vadian"}, "reply_to_user": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1574188355, "post_id": 58940484, "comment_id": 104139866, "body": "Yes, I do. You get getter and setter for free."}, {"owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1574188476, "post_id": 58940484, "comment_id": 104139919, "body": "Oh okay cool! I&#39;ll look into that! I&quot;ll test out your code when I get a chance and reply after. Thank you."}, {"owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1574265140, "post_id": 58940484, "comment_id": 104172188, "body": "I do have another question. How would I write multiple objects of the same class to the file then read them back essentially object by object. So instead of writing an NSArray, I have three objects, I write each object individually. Then read object back individually? Is this possible?"}, {"owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1574300948, "post_id": 58940484, "comment_id": 104187023, "body": "Okay. I posted the question here: <a href=\"https://stackoverflow.com/questions/58966048/nskeyedarchiver-writing-and-reading-individual-objects\" title=\"nskeyedarchiver writing and reading individual objects\">stackoverflow.com/questions/58966048/&hellip;</a>"}], "tags": [], "owner": {"reputation": 229649, "user_id": 5044042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vjUNl.jpg?s=128&g=1", "display_name": "vadian", "link": "https://stackoverflow.com/users/5044042/vadian"}, "is_accepted": true, "score": 1, "last_activity_date": 1574187548, "creation_date": 1574187548, "answer_id": 58940484, "question_id": 58940078, "link": "https://stackoverflow.com/questions/58940078/nspropertylistserialization-datawithpropertylist-returns-error-3851/58940484#58940484", "title": "NSPropertyListSerialization dataWithPropertyList returns error 3851", "body": "<p>You cannot serialize a custom class with <code>NSPropertyListSerialization</code>, you have to use <code>NSKeyedArchiver</code></p>\n\n<p>Replace the line</p>\n\n<pre><code>NSData* data = [NSPropertyListSerialization dataWithPropertyList:writing format:NSPropertyListBinaryFormat_v1_0 options:0 error:&amp;error];\n</code></pre>\n\n<p>with </p>\n\n<pre><code>NSData* data = [NSKeyedArchiver archivedDataWithRootObject:writing requiringSecureCoding:YES error:&amp;error];\n</code></pre>\n\n<p>Side note: Consider to use synthesized properties in your class. Your syntax looks pretty old-fashioned (pre-ARC)</p>\n"}], "owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 58940484, "answer_count": 1, "score": 0, "last_activity_date": 1574267595, "creation_date": 1574185904, "last_edit_date": 1574267595, "question_id": 58940078, "link": "https://stackoverflow.com/questions/58940078/nspropertylistserialization-datawithpropertylist-returns-error-3851", "title": "NSPropertyListSerialization dataWithPropertyList returns error 3851", "body": "<p>I'm trying to write binary data to file with NSPropertyListSerialization using format NSPropertyListBinaryFormat_v1_0 but the NSData just returns nil and error returns 3851.</p>\n\n<pre><code>#import &lt;Foundation/Foundation.h&gt;\n@interface Person : NSObject&lt;NSCoding, NSSecureCoding&gt;{\n    NSString* nsname;\n}\n\n-(id)initWithname:(NSString*)nameofperson;\n-(NSString*)getname;\n@end\n\n@implementation Person\n\n-(id)initWithname:(NSString*)nameofperson{\n        self = [super init];\n    if(self){\n        self-&gt;nsname = [[NSString alloc] initWithString:nameofperson];\n    }\n    return self;\n}\n- (NSString *)getname{\n    return nsname;\n}\n+(BOOL)supportsSecureCoding{\n    return YES;\n}\n- (void)encodeWithCoder:(nonnull NSCoder *)coder {\n    [coder encodeObject:nsname forKey:@\"nsname\"];\n}\n\n- (nullable instancetype)initWithCoder:(nonnull NSCoder *)coder {\n    self = [super init];\n    if(self){\n        self-&gt;nsname = [coder decodeObjectForKey:@\"nsname\"];\n    }\n    return self;\n}\n\n@end\n\nint main(int argc, const char * argv[]) {\n    @autoreleasepool {\n        Person* a = [[Person alloc] initWithname:@\"Nina\"];\n        Person* b = [[Person alloc] initWithname:@\"macbook\"];\n        NSArray&lt;Person*&gt;* writing = [[NSArray alloc] initWithObjects:a,b, nil];\n        NSFileHandle* handle = [NSFileHandle fileHandleForWritingAtPath:@\"temp.txt\"];\n        NSError* error = nil;\n        NSData* data = [NSPropertyListSerialization dataWithPropertyList:writing format:NSPropertyListBinaryFormat_v1_0 options:0 error:&amp;error];\n        if(data == nil){\n            NSLog(@\"error %ld\",(long)[error code]);\n        }\n        [handle writeData:data];\n        [handle closeFile];\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Error: write2[25205:2894550] Error: Error Domain=NSCocoaErrorDomain Code=3851 \"Property list invalid for format: 200 (property lists cannot contain objects of type 'CFType')\" UserInfo={NSDebugDescription=Property list invalid for format: 200 (property lists cannot contain objects of type 'CFType')}</p>\n\n<p>EDIT:\nI did get the code working with NSMutableArray but what if I want to write individual objects to file then read them back individually as well?\nFor instance:</p>\n\n<pre><code>Person* a,b,c;\nNSData* data = archivedDatWithRootObject:a;\n[handle writeData:data];\ndata = archivedDatWithRootObject:b;\n[handle writeData:data];\ndata = archivedDatWithRootObject:c;\n[handle writeData:data];\n</code></pre>\n\n<p>Then I can read them back Person by Person?\nIf I write them individually do I still read them back as an array?</p>\n"}, {"tags": ["ios", "objective-c", "apple-push-notifications", "silent-notification"], "comments": [{"owner": {"reputation": 94591, "user_id": 3418066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/De72L.jpg?s=128&g=1", "display_name": "Paulw11", "link": "https://stackoverflow.com/users/3418066/paulw11"}, "edited": false, "score": 2, "creation_date": 1574192021, "post_id": 58939847, "comment_id": 104141557, "body": "In the past you could use PushKit but now you can only do so to indicate an incoming call for a voip app.  If you receive a PushKit notification and do not subsequently indicate an incoming call to iOS your app will be terminated. There is no solution for your problem. If the user terminated the app you will not receive remote notifications until the user re-launches the app. Consider adding a default notification payload to be shown if your app isn&#39;t running."}, {"owner": {"reputation": 107, "user_id": 10942821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e979f8e2c5489cd774ff00d99ba16b22?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/10942821/rafael"}, "reply_to_user": {"reputation": 94591, "user_id": 3418066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/De72L.jpg?s=128&g=1", "display_name": "Paulw11", "link": "https://stackoverflow.com/users/3418066/paulw11"}, "edited": false, "score": 0, "creation_date": 1574195244, "post_id": 58939847, "comment_id": 104142981, "body": "I really appretiate it @Paulw11, I just was like looking a confirmation since I been researching a lot. I just have a doubt. When sending default push notification, with apns predefined keys, a notification as an alert can be displayed even if the app is not running, this behavior is because the notification is processed for IOS tray, and what I am doing with silent notification is processed inside the app, that is why the app must be running. am I right about this ?"}, {"owner": {"reputation": 94591, "user_id": 3418066, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/De72L.jpg?s=128&g=1", "display_name": "Paulw11", "link": "https://stackoverflow.com/users/3418066/paulw11"}, "edited": false, "score": 1, "creation_date": 1574195438, "post_id": 58939847, "comment_id": 104143077, "body": "Yes, that could be an issue; I am not sure if iOS will suppress the alert part of the message if your app is running. You might need to test that"}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 10942821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e979f8e2c5489cd774ff00d99ba16b22?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/10942821/rafael"}, "edited": false, "score": 0, "creation_date": 1574213889, "post_id": 58945054, "comment_id": 104149037, "body": "Is it possible to get the whole payload of the request I mean, I use other key-value than predefined apns, so can I get the whole payload in order to add some behavior to the notification."}, {"owner": {"reputation": 107, "user_id": 10942821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e979f8e2c5489cd774ff00d99ba16b22?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/10942821/rafael"}, "edited": false, "score": 0, "creation_date": 1574215998, "post_id": 58945054, "comment_id": 104149462, "body": "I read about Notification Service App Extension and the problem is that if the app is completely closed I will not be able to modify the request. but what I don&#180;t know is if the app is completely closed the request will be set in the notification center ?"}, {"owner": {"reputation": 1238, "user_id": 3965463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d13fd197cf73bda07f16e51aec7a0f?s=128&d=identicon&r=PG&f=1", "display_name": "pepsy", "link": "https://stackoverflow.com/users/3965463/pepsy"}, "reply_to_user": {"reputation": 107, "user_id": 10942821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e979f8e2c5489cd774ff00d99ba16b22?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/10942821/rafael"}, "edited": false, "score": 0, "creation_date": 1574240257, "post_id": 58945054, "comment_id": 104156987, "body": "I\u2019m not sure about it, but I guess you should be able to access the whole payload. What do you mean by completely closed? I\u2019ve still never used this extension, but I\u2019ll have to in the next few weeks. If I find new answers when implementing it, I\u2019ll come here to share them."}], "tags": [], "owner": {"reputation": 1238, "user_id": 3965463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d13fd197cf73bda07f16e51aec7a0f?s=128&d=identicon&r=PG&f=1", "display_name": "pepsy", "link": "https://stackoverflow.com/users/3965463/pepsy"}, "is_accepted": false, "score": 1, "last_activity_date": 1574211181, "creation_date": 1574211181, "answer_id": 58945054, "question_id": 58939847, "link": "https://stackoverflow.com/questions/58939847/how-to-wake-up-a-not-running-app-when-receiving-remote-notifications/58945054#58945054", "title": "How to wake up a not running app when receiving remote notifications", "body": "<p>Silent push notifications are unreliable: they might get delayed, delivered in groups or even not delivered at all.</p>\n\n<p>If you need to modify the content of the notification before presenting a banner for the user, you should use a <a href=\"https://developer.apple.com/documentation/usernotifications/unnotificationserviceextension\" rel=\"nofollow noreferrer\">Notification Service App Extension</a>. You can also share some information between your app and this extension - using app groups or the keychain - if it needs something from your app to process the notification data.</p>\n"}], "owner": {"reputation": 107, "user_id": 10942821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e979f8e2c5489cd774ff00d99ba16b22?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael", "link": "https://stackoverflow.com/users/10942821/rafael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1029, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574502865, "creation_date": 1574184998, "last_edit_date": 1574502865, "question_id": 58939847, "link": "https://stackoverflow.com/questions/58939847/how-to-wake-up-a-not-running-app-when-receiving-remote-notifications", "title": "How to wake up a not running app when receiving remote notifications", "body": "<p>Right now I have a framework that receives a silent notification, get the data from it (custom data) and translate it into a local notification to show the alert to the user (this is donde in didReceiveRemoteNotification:fetchCompletionHandler method). I have implemented this framework on an app and everything seems to be working correctly, silent notifications are being process when the app is in background and foreground. However, when the app is killed by the user or it is not running, I cannot receive notifications because of this:</p>\n\n<blockquote>\n  <p>Use this method to process incoming remote notifications for your app.\n  Unlike the application:didReceiveRemoteNotification: method, which is\n  called only when your app is running in the foreground, the system\n  calls this method when your app is running in the foreground or\n  background. In addition, if you enabled the remote notifications\n  background mode, the system launches your app (or wakes it from the\n  suspended state) and puts it in the background state when a remote\n  notification arrives. However, the system does not automatically\n  launch your app if the user has force-quit it. In that situation, the\n  user must relaunch your app or restart the device before the system\n  attempts to launch your app automatically again.</p>\n</blockquote>\n\n<p>The reason I use this method for showing notifications is because the payload I sent to APNS has custom data with key-values that indicate how the notification must behave.</p>\n\n<p>I've been doing some research and I found that Pushkit for VoIP can do the job. However, many post suggest that this can cause app rejection. </p>\n\n<p>So my question is, how can I achieve receiving remote notifications even if my app was killed and considering that data in the payload has custom information to build the notification? </p>\n"}, {"tags": ["c#", "objective-c", "cocoapods", "objective-sharpie"], "answers": [{"comments": [{"owner": {"reputation": 12931, "user_id": 436976, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/ca5523dd495f8c0a6a6b20db65db2ef4?s=128&d=identicon&r=PG", "display_name": "stevendesu", "link": "https://stackoverflow.com/users/436976/stevendesu"}, "edited": false, "score": 0, "creation_date": 1575649808, "post_id": 59216932, "comment_id": 104649768, "body": "This isn&#39;t really a good &quot;answer&quot; to this question, it&#39;s just the best I&#39;ve got. If someone can answer the <b><i>actual</i></b> question, I&#39;ll gladly accept their solution"}], "tags": [], "owner": {"reputation": 12931, "user_id": 436976, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/ca5523dd495f8c0a6a6b20db65db2ef4?s=128&d=identicon&r=PG", "display_name": "stevendesu", "link": "https://stackoverflow.com/users/436976/stevendesu"}, "is_accepted": false, "score": 0, "last_activity_date": 1575649784, "creation_date": 1575649784, "answer_id": 59216932, "question_id": 58939344, "link": "https://stackoverflow.com/questions/58939344/making-cocoapods-dependency-headers-public/59216932#59216932", "title": "Making CocoaPods dependency headers public", "body": "<h2>Regarding <code>&lt;X/X.h&gt;</code> vs <code>&lt;X.h&gt;</code></h2>\n\n<p>Clang has a built-in concept of \"frameworks\" (you can specify the framework search directory using the <code>-F</code> flag). When you use the <code>&lt;X/*&gt;</code> import syntax, Clang will search for a framework named <code>X</code>. CocoaPods references imported dependencies by using this <code>-F</code> flag, so you <strong>must</strong> use this to appropriately import third-party frameworks</p>\n\n<p>Meanwhile the simpler <code>&lt;X.h&gt;</code> import syntax is standard syntax in most C compilers to say \"check the header search path for X\". Xcode automatically adds everything in your project to this search path, so it tends to work -- but it's not good practice and can lead to things like CocoaPods breaking</p>\n\n<h2>Fixing my issue</h2>\n\n<p>I never found an automated way to make third-party framework headers public. You can of course use a \"Run Script\" phase in your build phases to copy the headers from their framework to your own, but this is ugly. What I ended up doing was writing a small Python script to generate my Xamarin bindings which injected all of the JSONModel bindings before my own</p>\n"}], "owner": {"reputation": 12931, "user_id": 436976, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/ca5523dd495f8c0a6a6b20db65db2ef4?s=128&d=identicon&r=PG", "display_name": "stevendesu", "link": "https://stackoverflow.com/users/436976/stevendesu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575649784, "creation_date": 1574183011, "last_edit_date": 1574695960, "question_id": 58939344, "link": "https://stackoverflow.com/questions/58939344/making-cocoapods-dependency-headers-public", "title": "Making CocoaPods dependency headers public", "body": "<h2>Answer to <em>my</em> problem:</h2>\n\n<p>Because I didn't find an answer to the <strong><em>original</em></strong> problem (namely, exposing the headers of dependencies loaded via CocoaPods) I don't feel like I should post an answer to my own question. However I did find a solution to my specific issue that worked around exposing the headers.</p>\n\n<p>In my problem, I was trying to use Objective Sharpie to create Xamarin bindings for my framework. My framework exposed a class which extended JSONModel, and therefore the JSONModel header files were required in order to build those bindings.</p>\n\n<p>Reading through the Objective Sharpie documentation, I discovered that Clang has a \"framework directory\" command line argument which tells it which directory to look in for frameworks referenced by the project.</p>\n\n<p>I simply put <code>JSONModel.framework</code> and <code>myframework.framework</code> in the same directory, then when I ran Objective Sharpie I ran it like so:</p>\n\n<pre><code>sharpie bind -sdk ios myframework.framework/Headers/myframework.h -c -F .\n</code></pre>\n\n<p>This created the bindings successfully.</p>\n\n<p>I did run into one small frustration. I could use Objective Sharpie's <code>-scope</code> command line parameter and it would output an approximately ~1800 line file with only bindings for my own classes. However this file did <strong><em>NOT</em></strong> include definitions for JSONModel, and was not functional in my Xamarin project. If I left off the <code>-scope</code> parameter, it created bindings for <strong><em>everything</em></strong>, including all of Foundation. This created an approximately ~84000 line file.</p>\n\n<p>To work around this I manually copied the JSONModel bindings from the 84000 line file to the 1800 line file, and that worked perfectly.</p>\n\n<h2>The Problem:</h2>\n\n<p>I have a framework I've written in Objective-C. This framework has 3 dependencies (namely <code>CocoaLumberjack</code>, <code>Google-IMA-iOS-SDK</code>, and <code>JSONModel</code>)</p>\n\n<p>Within my framework, I have a public class defined like so:</p>\n\n<p><strong>Broadcast.h</strong></p>\n\n<pre><code>#import &lt;JSONModel/JSONModel.h&gt;\n\n@interface Broadcast : JSONModel\n\n@property (nonatomic) NSString *title;\n@proeprty (nonatomic) NSString *url;\n\n@end\n</code></pre>\n\n<p>When I build my framework it works just fine. When I import my framework into an Objective-C project (and include the JSONModel framework, as it's a dependency) it works just fine. When I use CocoaPods to install my framework, it works just fine.</p>\n\n<p>The problem came when I tried to create C# bindings (for Xamarin) for my framework using <a href=\"https://docs.microsoft.com/en-us/xamarin/cross-platform/macios/binding/objective-sharpie/\" rel=\"nofollow noreferrer\">Objective Sharpie</a></p>\n\n<p>When I ran:</p>\n\n<pre><code>sharpie bind -sdk ios myframework.framework/Headers/myframework.h\n</code></pre>\n\n<p>I got the error: <code>Cannot find JSONModel.h</code></p>\n\n<p>Specifically it's looking for JSONModel.h <strong><em>within</em></strong> my framework. This wasn't an issue with CocoaLumberjack or the Google IMA SDK because they were strictly implementation details, and none of my public headers referenced them. However when it comes to JSONModel, its interface is actually part of my public API.</p>\n\n<p>Is there a way to put a copy of JSONModel.h (and all other JSONModel headers) in my output <code>Headers</code> directory? Or, otherwise, some way to tell Objective Sharpie to look in multiple frameworks for the bindings?</p>\n\n<h2>Update</h2>\n\n<p>A quick update, as I've been continuing to mess with this over the past hour. I was able to get Objective Sharpie to <strong><em>at least run</em></strong> by telling Clang where it could find <code>JSONModel.h</code> and making a tweak to my code:</p>\n\n<p><strong>Broadcast.h</strong></p>\n\n<pre><code>#import &lt;JSONModel.h&gt; // &lt;-----\n\n@interface Broadcast : JSONModel\n\n@property (nonatomic) NSString *title;\n@proeprty (nonatomic) NSString *url;\n\n@end\n</code></pre>\n\n<p>Then when running Objective Sharpie:</p>\n\n<pre><code>sharpie bind -sdk ios -scope myframework.framework/Headers myframework.framework/Headers/myframework.h -c -IJSONModel.framework/Headers\n</code></pre>\n\n<p>This worked a bit better, but ran into one issue and left me with one question:</p>\n\n<ul>\n<li>In the bindings file that was generated, it said <code>typeof(JSONModel)</code> in several places, which was not defined and threw an error. I can get around this by removing the <code>-scope</code> parameter, but this creates a bindings file that's 84000 lines long versus 1800 lines long, and includes bindings for things like AFNetworking, AVPlayer, etc.</li>\n<li>The reason I imported <code>&lt;JSONModel/JSONModel.h&gt;</code> before is both because this is how I've always seen CocoaPods dependencies imported, and because it was recommended by auto-complete. So why did importing <code>&lt;JSONModel.h&gt;</code> work just as well? Will this break something in the future?</li>\n</ul>\n\n<p>To correct the scope issue without generating an 84000 line bindings file I also tried using scopes like <code>.</code> or <code>\"$(pwd)\"</code> but nothing worked. It either created an 1800 line file with no definition for JSONModel, or an 84000 line file with definitions for <strong><em>everything</em></strong></p>\n\n<h2>Update 2</h2>\n\n<p>While I still don't fully appreciate the difference between <code>&lt;JSONModel/JSONModel.h&gt;</code> and <code>&lt;JSONModel.h&gt;</code>, I did learn something:</p>\n\n<ul>\n<li>Either one will allow me to build a <code>.framework</code> file from my framework project directly</li>\n<li>Only <code>&lt;JSONModel/JSONModel.h&gt;</code> will work when I try to import my framework via CocoaPods inside of an app</li>\n<li>Only <code>&lt;JSONModel.h&gt;</code> will work when I try to create C# bindings using Objective Sharpie</li>\n</ul>\n\n<p>So that nixes that solution</p>\n"}, {"tags": ["ios", "objective-c", "multithreading", "core-data"], "comments": [{"owner": {"reputation": 14257, "user_id": 526828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8y7Ru.png?s=128&g=1", "display_name": "Matic Oblak", "link": "https://stackoverflow.com/users/526828/matic-oblak"}, "edited": false, "score": 0, "creation_date": 1574171497, "post_id": 58935254, "comment_id": 104129993, "body": "Yes, it is normal to have 2 contexts (or more). In my opinion you should have 1 context that is in background which is used to read and write. The other context is on main thread and is only used to read. When background context saves data it should use delegates to notify listeners that changes have been made so that the main context reloads data (or your screens reload data). Also use <code>NSFetchResultController</code> when dealing with lists of data instead of just reading them all."}, {"owner": {"reputation": 179, "user_id": 8851116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b9b0ca6a838231aae7ccaa6645a1326?s=128&d=identicon&r=PG&f=1", "display_name": "P. Tsin", "link": "https://stackoverflow.com/users/8851116/p-tsin"}, "reply_to_user": {"reputation": 14257, "user_id": 526828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8y7Ru.png?s=128&g=1", "display_name": "Matic Oblak", "link": "https://stackoverflow.com/users/526828/matic-oblak"}, "edited": false, "score": 0, "creation_date": 1574174511, "post_id": 58935254, "comment_id": 104131794, "body": "@MaticOblak Thanks for your suggestion. May I ask why the background context should be used to both read and write while main thread context should be used to just read? In my opinion both read and write from database should be time consuming operations. Does Core Data have some optimization on read so that fetching a few data in main thread is acceptable?"}, {"owner": {"reputation": 14257, "user_id": 526828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8y7Ru.png?s=128&g=1", "display_name": "Matic Oblak", "link": "https://stackoverflow.com/users/526828/matic-oblak"}, "edited": false, "score": 0, "creation_date": 1574175320, "post_id": 58935254, "comment_id": 104132316, "body": "Well the background one needs read so it can modify the objects it read. You do need read on main thread because some items may be lazily retrieved from database like referenced objects. It is possible to put read to background context as well but you then need to copy data to access them safely. To be honest it is exactly what I usually do. But fetch result controllers should be enough for you on the main thread to display data as you only display what you see, not all the objects at the same time. And your delete operation can fully be done on background context."}, {"owner": {"reputation": 179, "user_id": 8851116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b9b0ca6a838231aae7ccaa6645a1326?s=128&d=identicon&r=PG&f=1", "display_name": "P. Tsin", "link": "https://stackoverflow.com/users/8851116/p-tsin"}, "reply_to_user": {"reputation": 14257, "user_id": 526828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8y7Ru.png?s=128&g=1", "display_name": "Matic Oblak", "link": "https://stackoverflow.com/users/526828/matic-oblak"}, "edited": false, "score": 0, "creation_date": 1574243993, "post_id": 58935254, "comment_id": 104159204, "body": "@MaticOblak I see. Also, in above code if one context(e.g. self.mainMoc) executes refreshAllObjects, other contexts also should run refreshAllObjects to synchronize the data if all contexts have fetched some data from the same entity in memory. Is this correct?"}, {"owner": {"reputation": 14257, "user_id": 526828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8y7Ru.png?s=128&g=1", "display_name": "Matic Oblak", "link": "https://stackoverflow.com/users/526828/matic-oblak"}, "edited": false, "score": 0, "creation_date": 1574244188, "post_id": 58935254, "comment_id": 104159333, "body": "Yes, this is correct. A context is an in-memory reflection of your database. When one context modifies something in database then the other context should reload data. If multiple contexts update database &quot;at the same time&quot; a conflict may occur which you should resolve. But if only one context is designated for writing you should not need to handle conflicts."}], "owner": {"reputation": 179, "user_id": 8851116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b9b0ca6a838231aae7ccaa6645a1326?s=128&d=identicon&r=PG&f=1", "display_name": "P. Tsin", "link": "https://stackoverflow.com/users/8851116/p-tsin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574170691, "creation_date": 1574170225, "last_edit_date": 1574170691, "question_id": 58935254, "link": "https://stackoverflow.com/questions/58935254/calling-refreshallobjects-in-core-data-freezes-ui", "title": "Calling refreshAllObjects in Core Data freezes UI", "body": "<p>I have two NSManagedObjectContexts in my project, one for main queue and the other for private queue. When my app starts, the main queue context fetches data from entity A and displays them in a table view. At the same time, it tries to delete invalid data in entity B, and this part of data doesn't need to be displayed at startup. However, when there are a few thousand records for entity A, calling method refreshAllObjects takes quite a long time. I'm not quite familiar with multithreading in Core Data, and I think there should be some ways to solve this. </p>\n\n<p>Here's my code snippet.</p>\n\n<pre><code>// initialization\nNSPersistentStoreCoordinator *psc = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:mom];\nself.privateMoc = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];\nself.privateMoc.persistentStoreCoordinator = psc;\nself.mainMoc = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];\nself.mainMoc.parentContext = self.privateMoc;\n\n// delete invalid data\n[self.mainMoc performBlock:^{\n    NSFetchRequest&lt;CustomClass *&gt; *fetchRequest = [[NSFetchRequest alloc] init];\n    fetchRequest.entity = [NSEntityDescription entityForName:MyEntity inManagedObjectContext:self.mainMoc];\n    fetchRequest.predicate = [NSPredicate predicateWithFormat:@\"isInvalid == 1\"];\n    NSError *error;\n    NSBatchDeleteRequest *deleteRequest = [[NSBatchDeleteRequest alloc] initWithFetchRequest:fetchRequest];\n    [self.mainMoc executeRequest:deleteRequest error:&amp;error];\n    [self.mainMoc refreshAllObjects];   // this method takes a few seconds\n}];\n</code></pre>\n\n<p>My guess is that since the delete operation is not UI related, maybe I can push this operation to private context so it becomes something like this:</p>\n\n<pre><code>[self.mainMoc performBlock:^{\n    [self.privateMoc performBlock:^{\n        // copy code above and change all mainMoc to privateMoc\n        ......\n    }];\n}];\n</code></pre>\n\n<p>At this time, the main thread is not blocked, but I'm not sure if this is the correct way. </p>\n"}, {"tags": ["objective-c", "animated-gif", "cgimagesource"], "answers": [{"tags": [], "owner": {"reputation": 1312, "user_id": 3001150, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f547c2a970cd36d5300589c7ff2c4a5f?s=128&d=identicon&r=PG&f=1", "display_name": "Raildex", "link": "https://stackoverflow.com/users/3001150/raildex"}, "is_accepted": true, "score": 0, "last_activity_date": 1574266305, "creation_date": 1574266305, "answer_id": 58958783, "question_id": 58932038, "link": "https://stackoverflow.com/questions/58932038/kcgimagepropertygifloopcount-returns-wrong-value/58958783#58958783", "title": "kCGImagePropertyGIFLoopCount returns wrong value", "body": "<p>I found the answer.\nThe property is <strong>absent</strong> when it doesnt loop (i.e. playback count = 1).<br>\nIt was my mistake since the <code>gifProperty</code> dictionary returns objects and not primitive types. The returned object was a NSNumber, which was casted to int with a default value of <code>0</code>. I didn't check for <code>nil</code></p>\n"}], "owner": {"reputation": 1312, "user_id": 3001150, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f547c2a970cd36d5300589c7ff2c4a5f?s=128&d=identicon&r=PG&f=1", "display_name": "Raildex", "link": "https://stackoverflow.com/users/3001150/raildex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 58958783, "answer_count": 1, "score": 0, "last_activity_date": 1574266305, "creation_date": 1574159855, "question_id": 58932038, "link": "https://stackoverflow.com/questions/58932038/kcgimagepropertygifloopcount-returns-wrong-value", "title": "kCGImagePropertyGIFLoopCount returns wrong value", "body": "<p>I have three GIF files which are loaded as NSData.\nWhen I use the key <code>kCGImagePropertyGIFLoopCount</code> to retrieve the LoopCount, it returns a wrong value.<br>\nFor the GIF which should loop infinitely, it returns 0 (correct).<br>\nFor the GIF with Loop count 1, it returns 0 (incorrect).<br>\nFor the GIF with Loop count 2, it returns 1 (incorrect).  </p>\n\n<pre><code>-(void)prepareGif:(NSData*)data {\nCGImageSourceRef source = CGImageSourceCreateWithData((__bridge CFDataRef) data, NULL);\nCFDictionaryRef properties = CGImageSourceCopyProperties(source, nil);\nNSDictionary* imageProperties = (__bridge NSDictionary*) properties;\nNSDictionary* gifProperty = imageProperties[(NSDictionary*) kCGImagePropertyGIFDictionary];\nint loopCount = [gifProperty[(NSString*) kCGImagePropertyGIFLoopCount] intValue]; // returns 0 for LoopCount 1 and LoopCount 0 and returns 1 for LoopCount 2\n</code></pre>\n\n<p>Here are the three GIFs:<br>\n<a href=\"https://i.stack.imgur.com/N6z5N.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N6z5N.gif\" alt=\"loopTwice\"></a>\n<a href=\"https://i.stack.imgur.com/4whDe.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4whDe.gif\" alt=\"loopOnce\"></a>\n<a href=\"https://i.stack.imgur.com/KZ0y2.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KZ0y2.gif\" alt=\"infiniteLoop\"></a><br>\nSomeone know what I am doing wrong here or is it a bug?</p>\n"}, {"tags": ["objective-c", "macos", "package", "installation", "macos-installer"], "comments": [{"owner": {"reputation": 83, "user_id": 6639709, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gHaFqZJKZr0/AAAAAAAAAAI/AAAAAAAAAHc/5-xBOzpa7_4/photo.jpg?sz=128", "display_name": "Zeeshan Suleman", "link": "https://stackoverflow.com/users/6639709/zeeshan-suleman"}, "edited": false, "score": 0, "creation_date": 1605953090, "post_id": 58931020, "comment_id": 114814707, "body": "can you guide how to store these values in a file from a plugin and execute the script by using these values as an input. I have post install script in my installer which will use user email as an input value."}, {"owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "reply_to_user": {"reputation": 83, "user_id": 6639709, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gHaFqZJKZr0/AAAAAAAAAAI/AAAAAAAAAHc/5-xBOzpa7_4/photo.jpg?sz=128", "display_name": "Zeeshan Suleman", "link": "https://stackoverflow.com/users/6639709/zeeshan-suleman"}, "edited": false, "score": 0, "creation_date": 1605985256, "post_id": 58931020, "comment_id": 114823438, "body": "Hi, you can use <code>writeToFile</code> ( <code>NSString</code> method) from each of your input values like <code>self.firstNameTextField.stringValue </code> and that read the file from postinstall script using bash command like <code>cat yourFilePath</code> - just don&#39;t forget to remove the file in the end."}, {"owner": {"reputation": 83, "user_id": 6639709, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gHaFqZJKZr0/AAAAAAAAAAI/AAAAAAAAAHc/5-xBOzpa7_4/photo.jpg?sz=128", "display_name": "Zeeshan Suleman", "link": "https://stackoverflow.com/users/6639709/zeeshan-suleman"}, "edited": false, "score": 0, "creation_date": 1606117729, "post_id": 58931020, "comment_id": 114852493, "body": "what will be the path for this file? I mean if i create it from my installer plugin and write some data into it. where this file will be stored on my mac machine?"}], "owner": {"reputation": 3214, "user_id": 4333809, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/eb246fedefccc8b02a3efb989143d3b9?s=128&d=identicon&r=PG&f=1", "display_name": "Zohar81", "link": "https://stackoverflow.com/users/4333809/zohar81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1574589341, "creation_date": 1574156938, "last_edit_date": 1574589341, "question_id": 58931020, "link": "https://stackoverflow.com/questions/58931020/creating-an-embedded-installer-plugin-for-macos-application-how-to-pass-parame", "title": "Creating an Embedded installer plugin for macOS application - how to pass parameters when run from command line", "body": "<p>I've created an installer using <code>Packages</code> with an additional plugin that has 2 text fields whose values are being printed upon moving forward to the next step on the installation wizard. </p>\n\n<p>Here's the code : </p>\n\n<p>MyInstallerPage.h</p>\n\n<pre><code>#import &lt;InstallerPlugins/InstallerPlugins.h&gt;\n\n@interface MyInstallerPane : InstallerPane &lt;NSTextFieldDelegate&gt;\n\n@end\n</code></pre>\n\n<p>MyInstallerPane.m</p>\n\n<pre><code>#import \"MyInstallerPane.h\"\n\n@interface MyInstallerPane() {\n\n}\n\n@property (weak) IBOutlet NSTextField *firstNameTextField;\n@property (weak) IBOutlet NSTextField *lastNameTextField;\n\n@end\n\n@implementation MyInstallerPane\n\n- (NSString *)title\n{\n    return [[NSBundle bundleForClass:[self class]] localizedStringForKey:@\"PaneTitle\" value:nil table:nil];\n}\n\n- (void)didEnterPane:(InstallerSectionDirection)dir {\n    self.firstNameTextField.delegate = self;\n    self.lastNameTextField.delegate = self;\n}\n\n- (void)controlTextDidEndEditing:(NSNotification *)obj {\n    NSLog(@\"First name: %@\", self.firstNameTextField.stringValue);\n    NSLog(@\"Last name : %@\",\n          self.lastNameTextField.stringValue);\n}\n\n@end\n</code></pre>\n\n<p>I wonder how do I set those text fields when running my the installer from command line using command <code>/usr/sbin/installer -pkg ./MyPackage.pkg -target /</code></p>\n\n<p>In the UI mode, when run my package using the command <code>open myPackage.pkg</code>, and I get the plugin window whereas I simply need to enter those values in the appropriate text fields.</p>\n\n<p><a href=\"https://i.stack.imgur.com/TPqKz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TPqKz.png\" alt=\"enter image description here\"></a></p>\n\n<p>One workaround for this problem is to use an additional script that perform the following steps instead of running the installer directly from command line.   </p>\n\n<ol>\n<li><p>gets those values (first+last name) as input parameters and write them to special file. </p></li>\n<li><p>run the installer command <code>installer -pkg...</code>.</p></li>\n<li><p>From within the installer. The plugin will check if textBoxes are empty (which is correct in the case of non-ui installation. In this case, it will lookup those values in the special file. </p></li>\n</ol>\n"}, {"tags": ["ios", "objective-c", "uicollectionview"], "comments": [{"owner": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 0, "creation_date": 1574157741, "post_id": 58930615, "comment_id": 104122066, "body": "Just calculate new offset and set it."}, {"owner": {"reputation": 572, "user_id": 1836960, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/sYjvd.jpg?s=128&g=1", "display_name": "Hash88", "link": "https://stackoverflow.com/users/1836960/hash88"}, "reply_to_user": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 1, "creation_date": 1574158541, "post_id": 58930615, "comment_id": 104122515, "body": "I tried that. It causes it flicker back to the start and then to the newly set offset."}, {"owner": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 0, "creation_date": 1574158847, "post_id": 58930615, "comment_id": 104122711, "body": "Do it with <code>animation = NO</code> and in <code>[UIVIew performWithoutAnimation:]</code> block"}, {"owner": {"reputation": 572, "user_id": 1836960, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/sYjvd.jpg?s=128&g=1", "display_name": "Hash88", "link": "https://stackoverflow.com/users/1836960/hash88"}, "reply_to_user": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 0, "creation_date": 1574159573, "post_id": 58930615, "comment_id": 104123150, "body": "If flickers less, but it&#39;s still there. Breaking at <code>reloadSections</code> I can see it set&#39;s the content offset changes to 0,0. But in my sanity check app it does not. Any idea why that is?"}, {"owner": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 0, "creation_date": 1574162333, "post_id": 58930615, "comment_id": 104124756, "body": "Try just <code>reloadData</code> instead of <code>reloadSections</code>"}, {"owner": {"reputation": 572, "user_id": 1836960, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/sYjvd.jpg?s=128&g=1", "display_name": "Hash88", "link": "https://stackoverflow.com/users/1836960/hash88"}, "reply_to_user": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 0, "creation_date": 1574167807, "post_id": 58930615, "comment_id": 104127872, "body": "<code>reloadData</code> reloads the whole collection and resets the content offset."}, {"owner": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 0, "creation_date": 1574169107, "post_id": 58930615, "comment_id": 104128609, "body": "It doesn&#39;t reset content offset."}], "answers": [{"comments": [{"owner": {"reputation": 572, "user_id": 1836960, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/sYjvd.jpg?s=128&g=1", "display_name": "Hash88", "link": "https://stackoverflow.com/users/1836960/hash88"}, "edited": false, "score": 0, "creation_date": 1574237878, "post_id": 58936558, "comment_id": 104155793, "body": "This totally solves the issue - thank you for the thorough answer! I think I&#39;m gonna tweak it so that if section 1 is visible, it will animate, so that as cells get added it doesn&#39;t appear sudden. But if section 1 is entirely offscreen, then I&#39;ll turn off the animation and won&#39;t tweak the content offset."}, {"owner": {"reputation": 20556, "user_id": 17294, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/JJ9m5.jpg?s=128&g=1", "display_name": "Robert Atkins", "link": "https://stackoverflow.com/users/17294/robert-atkins"}, "edited": false, "score": 0, "creation_date": 1614348984, "post_id": 58936558, "comment_id": 117365839, "body": "I have a similar problem but I&#39;m using <code>UICollectionViewDiffableDataSource</code>. Whenever I call <code>.apply(snapshot:)</code> on my dataSource, the collectionView scrolls to the top. The interesting thing in my case is I might add cells before or after the currently visible cell, but I still want the viewport to stay put."}], "tags": [], "owner": {"reputation": 721, "user_id": 1604527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/31rkY.jpg?s=128&g=1", "display_name": "bevoy", "link": "https://stackoverflow.com/users/1604527/bevoy"}, "is_accepted": true, "score": 4, "last_activity_date": 1574175089, "last_edit_date": 1574175089, "creation_date": 1574174535, "answer_id": 58936558, "question_id": 58930615, "link": "https://stackoverflow.com/questions/58930615/reload-section-of-uicollectionview-and-preserve-scroll-position/58936558#58936558", "title": "Reload section of UICollectionView and preserve scroll position", "body": "<p>If you are OK with doing it without any animation I would do as follows:</p>\n\n<ul>\n<li>start with disabling animations </li>\n</ul>\n\n<pre class=\"lang-swift prettyprint-override\"><code>UIView.setAnimationsEnabled(false)\n</code></pre>\n\n<ul>\n<li>before inserting a new item (cell), store the value of visible rect for the selected cell</li>\n</ul>\n\n<pre class=\"lang-swift prettyprint-override\"><code>let selectedCell = collectionView.cellForItem(at: indexPath)\nlet visibleRect = collectionView.convert(collectionView.bounds, to: selectedCell)\n</code></pre>\n\n<ul>\n<li>perform the insertion and when it's finished, check what is the new visible rect for the selected cell, compare it to the old value and add their difference to collectionView's contentOffset.</li>\n</ul>\n\n<pre class=\"lang-swift prettyprint-override\"><code>selectedObjects.insert(allObjects[indexPath.item], at: 0)\ncollectionView.performBatchUpdates({\n\n   // INSERTING NEW ITEM\n   let indexPathForNewItem = IndexPath(item: 0, section: 1)\n   collectionView.insertItems(at: [indexPathForNewItem])\n}) { (finished) in\n\n   // GETTING NEW VISIBLE RECT FOR SELECTED CELL\n   let updatedVisibleRect = collectionView.convert(collectionView.bounds, to: selectedCell)\n\n   // UPDATING COLLECTION VIEW CONTENT OFFSET\n   var contentOffset = collectionView.contentOffset\n   contentOffset.x = contentOffset.x + (visibleRect.origin.x - updatedVisibleRect.origin.x)\n   collectionView.contentOffset = contentOffset\n}\n</code></pre>\n\n<ul>\n<li>Finish by enabling animations back</li>\n</ul>\n\n<pre class=\"lang-swift prettyprint-override\"><code>UIView.setAnimationsEnabled(true)\n</code></pre>\n\n<hr>\n\n<p>I tried it on a simple collection view adjusted to the behaviour you described. \nHere's the whole implementation (collecionView is in the storyboard, so if you want to give my solution a test, don't forget to connect the outlet.)</p>\n\n<pre class=\"lang-swift prettyprint-override\"><code>import UIKit\n\nclass ViewController: UIViewController {\n\n    @IBOutlet weak var collectionView: UICollectionView!\n    let reuseIdentifier = \"cell.reuseIdentifier\"\n\n    var allObjects: [UIColor] = [.red, .yellow, .orange, .purple, .blue]\n    var selectedObjects: [UIColor] = []\n\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n        self.collectionView.delegate = self\n        self.collectionView.dataSource = self\n        self.collectionView.register(UICollectionViewCell.self, forCellWithReuseIdentifier: self.reuseIdentifier)\n    }\n}\n\nextension ViewController: UICollectionViewDataSource, UICollectionViewDelegateFlowLayout {\n\n    func numberOfSections(in collectionView: UICollectionView) -&gt; Int {\n        return 3\n    }\n\n    func collectionView(_ collectionView: UICollectionView, numberOfItemsInSection section: Int) -&gt; Int {\n        switch section {\n        case 0: return 1\n        case 1: return selectedObjects.count\n        case 2: return allObjects.count\n        default: return 0\n        }\n    }\n\n    func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -&gt; UICollectionViewCell {\n        let cell = collectionView.dequeueReusableCell(withReuseIdentifier: self.reuseIdentifier, for: indexPath)\n\n        switch indexPath.section {\n        case 0: cell.contentView.backgroundColor = .black\n        case 1: cell.contentView.backgroundColor = selectedObjects[indexPath.item]\n        case 2: cell.contentView.backgroundColor = allObjects[indexPath.item]\n        default: break\n        }\n\n        return cell\n    }\n\n    func collectionView(_ collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, sizeForItemAt indexPath: IndexPath) -&gt; CGSize {\n        return CGSize(width: 150, height: collectionView.frame.size.height)\n    }\n}\n\nextension ViewController: UICollectionViewDelegate {\n    func collectionView(_ collectionView: UICollectionView, didSelectItemAt indexPath: IndexPath) {\n        collectionView.deselectItem(at: indexPath, animated: false)\n\n        switch indexPath.section {\n        case 0:\n            self.selectedObjects.removeAll()\n            collectionView.reloadData()\n        case 2:\n            if selectedObjects.contains(allObjects[indexPath.item]) {\n                break\n            } else {\n                // SOLUTION //\n                UIView.setAnimationsEnabled(false)\n                let selectedCell = collectionView.cellForItem(at: indexPath)\n                let visibleRect = collectionView.convert(collectionView.bounds, to: selectedCell)\n\n                selectedObjects.insert(allObjects[indexPath.item], at: 0)\n                collectionView.performBatchUpdates({\n                    let indexPathForNewItem = IndexPath(item: 0, section: 1)\n                    collectionView.insertItems(at: [indexPathForNewItem])\n                }) { (finished) in\n                    let updatedVisibleRect = collectionView.convert(collectionView.bounds, to: selectedCell)\n\n                    var contentOffset = collectionView.contentOffset\n                    contentOffset.x = contentOffset.x + (visibleRect.origin.x - updatedVisibleRect.origin.x)\n                    collectionView.contentOffset = contentOffset\n                }\n                UIView.setAnimationsEnabled(true)\n                // END OF SOLUTION //\n            }\n\n        default:\n            break\n        }\n    }\n\n    func collectionView(_ collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, insetForSectionAt section: Int) -&gt; UIEdgeInsets {\n        return UIEdgeInsets(top: 0, left: 10, bottom: 0, right: 0)\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT</strong></p>\n\n<p>I just also tried replacing</p>\n\n<pre class=\"lang-swift prettyprint-override\"><code>let indexPathForNewItem = IndexPath(item: 0, section: 1)\ncollectionView.insertItems(at: [indexPathForNewItem])\n</code></pre>\n\n<p>with </p>\n\n<pre class=\"lang-swift prettyprint-override\"><code>collectionView.reloadSections(IndexSet(integer: 1))\n</code></pre>\n\n<p>and it also works just fine, without any flickering, so it's up to you which is more convenient for you.</p>\n"}, {"tags": [], "owner": {"reputation": 1326, "user_id": 4195841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wp5vm.jpg?s=128&g=1", "display_name": "\u0392\u03b1\u03c3\u03af\u03bb\u03b7\u03c2 \u0394.", "link": "https://stackoverflow.com/users/4195841/%ce%92%ce%b1%cf%83%ce%af%ce%bb%ce%b7%cf%82-%ce%94"}, "is_accepted": false, "score": 1, "last_activity_date": 1574176088, "creation_date": 1574176088, "answer_id": 58937100, "question_id": 58930615, "link": "https://stackoverflow.com/questions/58930615/reload-section-of-uicollectionview-and-preserve-scroll-position/58937100#58937100", "title": "Reload section of UICollectionView and preserve scroll position", "body": "<p>If you know the index Path that you want to scroll to you only need to call the function </p>\n\n<pre><code>collectionView.scrollToItem(at: IndexPath(row: indexPath.row, section: indexPath.section), at: UICollectionViewScrollPosition.centeredVertically, animated: false)\n</code></pre>\n"}], "owner": {"reputation": 572, "user_id": 1836960, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/sYjvd.jpg?s=128&g=1", "display_name": "Hash88", "link": "https://stackoverflow.com/users/1836960/hash88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5049, "favorite_count": 1, "accepted_answer_id": 58936558, "answer_count": 2, "score": 3, "last_activity_date": 1605117976, "creation_date": 1574155639, "last_edit_date": 1574184738, "question_id": 58930615, "link": "https://stackoverflow.com/questions/58930615/reload-section-of-uicollectionview-and-preserve-scroll-position", "title": "Reload section of UICollectionView and preserve scroll position", "body": "<p>I have a horizontal <code>UICollectionView</code> with several sections, each containing several cells as follows:</p>\n\n<p>Section 0: one cell to cancel selection.<br>\nSection 1: recently selected items.<br>\nSection 2 and beyond: each section has several items that can be selected.</p>\n\n<p>When a cell from section 2 or later is selected, a copy of that item is inserted to the start section 1 in the data source, and I want to reload section 1 to reflect the updated recent items. But, I want to preserve the scroll position. I've tried:</p>\n\n<p><code>[collectionView reloadSections:setWithIndex1]</code> and<br>\n<code>[collectionView reloadItemsAtIndexPaths:arrayWithAllSection1IndexPaths]</code><br>\nI've tried using <code>[collectionView performBatchUpdates:]</code>, but everything I've tried makes the scroll offset reset to the beginning of the collection view. I've tried a sanity check by starting a fresh app with a basic collection view and reloading a section using <code>reloadSections</code>, and it has the desired behavior of <strong>not</strong> resetting the scroll offset. But doing the same in my existing codebase does, undesirably, reset the offset.</p>\n\n<p>I've poured over my <code>collectionView</code>-related code looking for <code>reloadData</code>'s, <code>setContentOffsets</code>'s, and similar things, but for the life of me I can't find what's causing it. Is there anything I'm missing that could be resetting the scroll position after an update?</p>\n"}, {"tags": ["ios", "objective-c", "uitextfield", "paste", "uiresponder"], "answers": [{"comments": [{"owner": {"reputation": 473, "user_id": 3469596, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a8745c4580194f358a4d6db09be80f36?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Solovyov", "link": "https://stackoverflow.com/users/3469596/andrey-solovyov"}, "edited": false, "score": 1, "creation_date": 1574160447, "post_id": 58930741, "comment_id": 104123702, "body": "Thank you for your suggestion, but your example covers only custom menu items, whereas my question regards system actions, like Paste, Copy, Cut, Select, Select All etc."}], "tags": [], "owner": {"reputation": 21, "user_id": 3454675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aCaOu.jpg?s=128&g=1", "display_name": "Syed Meesum Ali", "link": "https://stackoverflow.com/users/3454675/syed-meesum-ali"}, "is_accepted": false, "score": 1, "last_activity_date": 1574156021, "creation_date": 1574156021, "answer_id": 58930741, "question_id": 58930421, "link": "https://stackoverflow.com/questions/58930421/no-paste-action-in-canperformactionwithsender/58930741#58930741", "title": "No paste: action in canPerformAction:withSender:", "body": "<p>So in swift I will do like this:</p>\n\n<pre><code>UIMenuController.shared.menuItems?.removeAll(where: {$0.title == \"paste\"})\n</code></pre>\n\n<p>In objective-c you can try something like this:</p>\n\n<pre><code> UIMenuController * controller = [UIMenuController sharedMenuController];\n     NSArray * items = [controller menuItems]; // These are all custom items you added\n     NSMutableArray * finalItemsYouWant = [NSMutableArray array];\n     // Here you can check what items you don't want and then remove it\n     [controller setMenuItems:finalItemsYouWant];\n</code></pre>\n\n<p>So try finding out all the menu items and forcefully remove the one you want </p>\n"}, {"tags": [], "owner": {"reputation": 473, "user_id": 3469596, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a8745c4580194f358a4d6db09be80f36?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Solovyov", "link": "https://stackoverflow.com/users/3469596/andrey-solovyov"}, "is_accepted": true, "score": 1, "last_activity_date": 1574326645, "last_edit_date": 1574326645, "creation_date": 1574163411, "answer_id": 58933203, "question_id": 58930421, "link": "https://stackoverflow.com/questions/58930421/no-paste-action-in-canperformactionwithsender/58933203#58933203", "title": "No paste: action in canPerformAction:withSender:", "body": "<p>Creating category on <code>UITextField</code> instead of <code>UIResponder</code> did the trick.\nSubclassing <code>UITextField</code> and implementing <code>canPerformAction:withSender:</code> works either.</p>\n\n<p>It turned out that category on UIResponder does not affect <code>canPerformAction:withSender:</code> on <code>UITextField</code>, even though <code>UITextField</code> IS-A <code>UIResponder</code>. I do not know whether it is a bug in iOS or some oddity in it's internal behavior.</p>\n\n<p>My fault was to rely too much on swizzling. I do not recommend you this \"universal\" approach like making a category with a list of \"prohibited\" action selectors to work with any responder.</p>\n"}], "owner": {"reputation": 473, "user_id": 3469596, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a8745c4580194f358a4d6db09be80f36?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Solovyov", "link": "https://stackoverflow.com/users/3469596/andrey-solovyov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 58933203, "answer_count": 2, "score": 1, "last_activity_date": 1574326645, "creation_date": 1574155063, "last_edit_date": 1574174904, "question_id": 58930421, "link": "https://stackoverflow.com/questions/58930421/no-paste-action-in-canperformactionwithsender", "title": "No paste: action in canPerformAction:withSender:", "body": "<p>I am trying to forcibly hide the Paste bubble on my <code>UITextField</code>.\nMy implementation is to specify a list of prohibited selectors from <code>UIResponderStandardEditActions</code>, store it in an AssociatedValue in a <code>UIResponder</code> category and quit category's <code>canPerformAction:withSender:</code> prematurely if action is found in the list. This is quite tempting approach, because it lets to control any Responder in the project.</p>\n\n<p>Problem is no <code>paste:</code> action reaches any <code>canPerformAction:withSender:</code> method for the whole responder chain when I tap inside my <code>UITextField</code>. I wrote a category on <code>UIResponder</code> and swizzled <code>canPerformAction:withSender:</code> there, so I can be sure:</p>\n\n<pre><code>- (BOOL)my_canPerformAction:(SEL)action withSender:(id)sender {\n    NSString *string = NSStringFromSelector(action);\n    BOOL prohibited = [self.prohibitedActions containsObject:string];\n\n    if (prohibited) {\n        return NO;\n    }\n\n    BOOL canPerform = [self my_canPerformAction:action withSender:sender];\n    return canPerform;\n}\n</code></pre>\n\n<p>The whole catch for my hierarchy is:</p>\n\n<pre><code> cut:\n copy:\n select:\n selectAll:\n delete:\n _promptForReplace:\n _transliterateChinese:\n _insertDrawing:\n _showTextStyleOptions:\n _lookup:\n _define:\n _define:\n _addShortcut:\n _accessibilitySpeak:\n _accessibilitySpeakLanguageSelection:\n _accessibilityPauseSpeaking:\n _share:\n makeTextWritingDirectionLeftToRight:\n</code></pre>\n\n<p>Prohibiting <code>_promptForReplace:</code> does not help. Also, my TextField does not implement <code>canPerformAction:withSender:</code>.</p>\n\n<p>So, what should I do to track down and hide that nasty paste?</p>\n"}, {"tags": ["ios", "objective-c", "opencv", "avcapturesession", "core-image"], "answers": [{"tags": [], "owner": {"reputation": 381, "user_id": 3029644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f72f6cbb2069b9339cf953b5384234fd?s=128&d=identicon&r=PG&f=1", "display_name": "Cosworth66", "link": "https://stackoverflow.com/users/3029644/cosworth66"}, "is_accepted": false, "score": 0, "last_activity_date": 1575395405, "creation_date": 1575395405, "answer_id": 59162753, "question_id": 58926799, "link": "https://stackoverflow.com/questions/58926799/adding-brightness-gamma-control-to-objective-c-custom-video-camera-application-w/59162753#59162753", "title": "Adding Brightness/Gamma Control to objective-c Custom Video Camera Application with OpenCV Image Recognition", "body": "<p>I found a few ways to achieve this and thought I'd post them here to help anyone else that needs it.</p>\n\n<p>Option 1.</p>\n\n<p>Modify the pixels of the OpenCV Mat to make them lighter or darker with this code using a slider.</p>\n\n<pre><code>float gammaValue = 1.5;\n\n//EXPOSURE CONTROL USING OPENCV\n- (void) gammaCorrection: (cv::Mat &amp;)mat;\n{\n    float fGamma = gammaValue;\n    mat.convertTo(mat, -1, fGamma, 1 ); //Control the brightness by fGamma\n    NSLog(@\"Gamma Value is: %f\", fGamma);\n\n}\n\n\n- (IBAction)changeExposureTargetBias:(id)sender {\n    UISlider *control = sender;\n    NSLog(@\"Target Bias %f\", control.value );\n    gammaValue = control.value;\n}\n</code></pre>\n\n<p>Option 2.</p>\n\n<p>Control the exposure of the AVCaptureDevice with a slider.  Exposure bias range for my device was -8.0 to +8.0</p>\n\n<pre><code>float exposureBIAS = 0.0;\n\n- (void)setExposure:(float)exposureBIAS\n{\n    AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];\n    if([device isExposureModeSupported:AVCaptureExposureModeCustom])\n    {\n        NSError *error = nil;\n        if ( [device lockForConfiguration:&amp;error] ) {\n            [device setExposureTargetBias:exposureBIAS completionHandler:nil];\n            [device unlockForConfiguration];\n        }\n        else {\n            NSLog( @\"Could not lock device for configuration: %@\", error );\n        }\n    }\n}\n\n\n- (IBAction)changeExposureTargetBias:(id)sender {\n\n    UISlider *control = sender;    \n    [self setExposure: control.value];\n\n}\n</code></pre>\n"}], "owner": {"reputation": 381, "user_id": 3029644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f72f6cbb2069b9339cf953b5384234fd?s=128&d=identicon&r=PG&f=1", "display_name": "Cosworth66", "link": "https://stackoverflow.com/users/3029644/cosworth66"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575395405, "creation_date": 1574138694, "question_id": 58926799, "link": "https://stackoverflow.com/questions/58926799/adding-brightness-gamma-control-to-objective-c-custom-video-camera-application-w", "title": "Adding Brightness/Gamma Control to objective-c Custom Video Camera Application with OpenCV Image Recognition", "body": "<p>I have a custom iOS iPhone Camera app in objective-c that displays the video camera stream in a preview layer and captures a frame when a specific object is in the Field of View.  The image recognition is implemented with OpenCV.  </p>\n\n<p>The app is working fine, but I would like to give the user the ability to control the brightness/gamma of the video stream and have the modified image captured from the brightness controlled stream.  </p>\n\n<p>I know how to create the slider control but I cant find how to control the brightness/gamma of the video image from the camera and display it in the preview layer.  The camera is set up with the following AVCapture Session.</p>\n\n<pre><code>[AVCaptureDevice requestAccessForMediaType:AVMediaTypeVideo completionHandler:^(BOOL granted) \n    {\n    if(granted){ // Access has been granted ..do something\n         NSLog(@\"Camera Status Access Granted By User\");\n               //Setup Video Camera and START\n         self.videoCamera = [[VideoCamera alloc] initWithParentView:self-&gt;_img];\n         self.videoCamera.defaultAVCaptureDevicePosition = AVCaptureDevicePositionBack;\n         self.videoCamera.defaultAVCaptureSessionPreset = AVCaptureSessionPreset640x480;\n         self.videoCamera.defaultAVCaptureVideoOrientation = \n              AVCaptureVideoOrientationPortrait;\n         self.videoCamera.defaultFPS = 60;\n         self.videoCamera.rotateVideo = NO;\n         self.videoCamera.grayscaleMode = NO;\n         self.videoCamera.delegate = self;\n         [self.videoCamera start];\n    }\n</code></pre>\n\n<p>How do I control the brightness/gamma of the live video stream and display it in the preview layer so as I can then capture the modified image.</p>\n\n<p>Here is the setup of the Preview Layer.</p>\n\n<pre><code>- (void)layoutPreviewLayer {\nif (self.parentView != nil) {\n\n    // Center the video preview.\n    self.customPreviewLayer.position = CGPointMake(0.5 * self.parentView.frame.size.width, \n    0.5 * self.parentView.frame.size.height);\n\n    // Find the video's aspect ratio.\n    CGFloat videoAspectRatio = self.imageWidth / (CGFloat)self.imageHeight;\n\n    // Scale the video preview while maintaining its aspect ratio.\n    CGFloat boundsW;\n    CGFloat boundsH;\n    if (self.imageHeight &gt; self.imageWidth) {\n        if (self.letterboxPreview) {\n            boundsH = self.parentView.frame.size.height;\n            boundsW = boundsH * videoAspectRatio;\n        } else {\n            boundsW = self.parentView.frame.size.width;\n            boundsH = boundsW / videoAspectRatio;\n        }\n    } else {\n        if (self.letterboxPreview) {\n            boundsW = self.parentView.frame.size.width;\n            boundsH = boundsW / videoAspectRatio;\n        } else {\n            boundsH = self.parentView.frame.size.height;\n            boundsW = boundsH * videoAspectRatio;\n        }\n    }\n    self.customPreviewLayer.bounds = CGRectMake(0.0, 0.0, boundsW, boundsH);\n  }\n}\n</code></pre>\n\n<p>Any code, help and guidance would be greatly appreciated to get this set up.</p>\n"}, {"tags": ["objective-c", "swift", "cocoa", "cocoa-bindings", "nstablecolumn"], "comments": [{"owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 2, "creation_date": 1574111288, "post_id": 58922741, "comment_id": 104107256, "body": "&quot;My problem is that I would like to set the binding between other properties that do not expose a continuous setting by themselves, specifically two NSTableColumn instances.&quot; What do you mean by this, exactly? The &quot;continuous&quot; option for a slider makes it so that it updates bindings whenever its moved, rather than only updating when it&#39;s &quot;let go&quot;. <code>NSTableColumn</code> wouldn&#39;t have any counterpart to that"}, {"owner": {"reputation": 1200, "user_id": 942165, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/IIKr3.jpg?s=128&g=1", "display_name": "Alfonso Tesauro", "link": "https://stackoverflow.com/users/942165/alfonso-tesauro"}, "reply_to_user": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 0, "creation_date": 1574117144, "post_id": 58922741, "comment_id": 104109604, "body": "I am trying to keep two NSOutlineView objects in perfect sync. So I am interested in the &quot;width&quot; keypath of two NSTableColumn objects. I am currently solving the problem by using KVO and updates are delivered continuously. By using programmatic bindings I was hoping to achieve a cleaner implementation. Thanks a lot for your answer."}, {"owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 0, "creation_date": 1574123556, "post_id": 58922741, "comment_id": 104111289, "body": "Ah, that&#39;s some key information, I think you should edit it into your question. IDK if those fields supporting binding. If they don&#39;t, I&#39;d just recommend to us RxSwift/RxCocoa, which present a single unified stream interface over KVO, NSBinding, NSNotificationCenter, delegates, and closure callbacks"}, {"owner": {"reputation": 2912, "user_id": 5484406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddfa0fdba8230acb59932d99fbf75bd1?s=128&d=identicon&r=PG", "display_name": "James Bucanek", "link": "https://stackoverflow.com/users/5484406/james-bucanek"}, "edited": false, "score": 1, "creation_date": 1574125988, "post_id": 58922741, "comment_id": 104111797, "body": "Without digging into this problem, I suspect it would be far easier to create a <code>float</code> property on your controller, then bind both of the slider&#39;s to this property (no programming required). Any change in one slider will update the property, which will change the other slider. Remember to set the &quot;continuous&quot; attribute of the value binding."}, {"owner": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "edited": false, "score": 0, "creation_date": 1574134720, "post_id": 58922741, "comment_id": 104113526, "body": "\u201ccurrently solving the problem by using KVO and updates are delivered continuously. By using programmatic bindings I was hoping to achieve a cleaner implementation.\u201d Sort of a distinction without a difference. Cocoa bindings <i>are</i> KVO."}, {"owner": {"reputation": 20658, "user_id": 344733, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/5edfaa616df6d3cef8581b317f6b0aa0?s=128&d=identicon&r=PG", "display_name": "Andrew Madsen", "link": "https://stackoverflow.com/users/344733/andrew-madsen"}, "reply_to_user": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "edited": false, "score": 0, "creation_date": 1574205464, "post_id": 58922741, "comment_id": 104147048, "body": "@matt: Bindings certainly makes heavy use of KVO (and indeed KVO/KVC was introduced to support Bindings), but Bindings builds significant additional functionality on top of KVO. And while it&#39;s an implementation detail, there are significant parts of bindings functionality that could be implemented in terms of (public/standard) KVO, but are in fact not. To OP&#39;s point, using bindings vs. &quot;programmatic KVO&quot; can mean writing significantly less code, which is surely what he&#39;s trying to achieve, and which is basically the whole point of bindings."}], "answers": [{"tags": [], "owner": {"reputation": 20658, "user_id": 344733, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/5edfaa616df6d3cef8581b317f6b0aa0?s=128&d=identicon&r=PG", "display_name": "Andrew Madsen", "link": "https://stackoverflow.com/users/344733/andrew-madsen"}, "is_accepted": true, "score": 1, "last_activity_date": 1574205940, "creation_date": 1574205940, "answer_id": 58944389, "question_id": 58922741, "link": "https://stackoverflow.com/questions/58922741/is-it-possible-to-programmatically-bind-two-key-paths-setting-continuous-updates/58944389#58944389", "title": "Is it possible to programmatically bind two key paths setting continuous updates in Cocoa?", "body": "<p>The short answer to your question is no, this is not possible. You should just use your own KVO code as you've already discovered.</p>\n\n<p>Longer answer follows:</p>\n\n<p>Fundamentally, the issue is two fold: <code>NSTableColumn</code> does not have a <a href=\"https://developer.apple.com/documentation/appkit/nscontrol/1428952-iscontinuous#\" rel=\"nofollow noreferrer\"><code>continuous</code></a> property. There are classes that do (e.g. <code>NSControl</code> and <code>NSCell</code>), but <code>NSTableColumn</code> doesn't inherit from these. Technically, this property is meant to determine whether a control sends its <em>action method to its target</em> continuously, rather than specifically being about bindings, though it does also affect binding behavior.</p>\n\n<p>The <a href=\"https://developer.apple.com/documentation/appkit/nsbindingoption/1458082-continuouslyupdatesvalue#\" rel=\"nofollow noreferrer\"><code>.continuouslyUpdatesValue</code></a> binding option means something slightly different. It is used to determine whether bound value is updated continuously during user interaction or only when the UI element resigns its responder status (ie. user interaction stops). This is mostly useful for text field/view bindings.</p>\n\n<p>Unfortunately, <code>NSTableColumn</code> can't <em>really</em> be a responder, at least in the traditional sense. And this option has no effect on bindings from an <code>NSTableColumn</code>'s <code>width</code>.</p>\n\n<p>Confusingly, this option <em>also</em> has no effect on bindings from <code>NSSlider</code>. Instead, if <code>NSSlider</code>'s <code>continuous</code> property is <code>false</code>, it will always only update the binding on mouse \u0010up, <em>even if</em> the <code>.continuouslyUpdatesValue</code> option is set on the binding. Conversely, if <code>NSSlider</code>'s <code>continuous</code> property is <code>true</code>, it will always update the binding's value continuously, <em>even if</em> the <code>.continuouslyUpdatesValue</code> option is set to false on the binding.</p>\n\n<p>Some digging with the debugger explains this behavior. <code>NSSlider</code> always updates its bindings value as a side effect of sending its action to its target (regardless of the <code>.continuouslyUpdatesValue</code> option). This explains why its <code>continuous</code> property solely determines its behavior.</p>\n\n<p>On the other hand, while <code>NSTableColumn</code> updates its <code>width</code> <strong>property</strong> and thus emits KVO notifications continuously as its width is changed, it only updates its <code>width</code> <strong>binding</strong> as a side effect of posting the <a href=\"https://developer.apple.com/documentation/appkit/nstableview/1526315-columndidresizenotification\" rel=\"nofollow noreferrer\"><code>columnDidResizeNotification</code></a> that it posts on width changes. This notification is only ever posted at the end of a resize, not during a resize. Thus, <code>NSTableColumn</code> only ever updates its binding at the end of a resize.</p>\n"}], "owner": {"reputation": 1200, "user_id": 942165, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/IIKr3.jpg?s=128&g=1", "display_name": "Alfonso Tesauro", "link": "https://stackoverflow.com/users/942165/alfonso-tesauro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 58944389, "answer_count": 1, "score": 1, "last_activity_date": 1574205940, "creation_date": 1574110428, "last_edit_date": 1574113193, "question_id": 58922741, "link": "https://stackoverflow.com/questions/58922741/is-it-possible-to-programmatically-bind-two-key-paths-setting-continuous-updates", "title": "Is it possible to programmatically bind two key paths setting continuous updates in Cocoa?", "body": "<p>In a macOS Cocoa Application if I have two NSSlider objects, I can set the following binding programmatically:</p>\n\n<pre><code>@IBOutlet weak var firstSlider: NSSlider!\n@IBOutlet weak var secondSlider: NSSlider!\n\nfunc applicationDidFinishLaunching(_ aNotification: Notification) {\n    // Insert code here to initialize your application\n\n    self.firstSlider.bind(NSBindingName.init(rawValue: \"value\"), to: self.secondSlider, withKeyPath: \"value\", options: [NSBindingOption.continuouslyUpdatesValue : true])\n}\n</code></pre>\n\n<p>This works, but not continuously updating, unless I set the Continuous checkbox in the inspector in interface builder for the sliders. My problem is that I would like to set the binding between other properties that do not expose a continuous setting by themselves, specifically two NSTableColumn instances. Is it possible to bind continuously by setting an option in the binding code?</p>\n"}, {"tags": ["ios", "objective-c", "iosdeployment"], "answers": [{"comments": [{"owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1574107712, "post_id": 58922084, "comment_id": 104105599, "body": "Do you know a good way to display the unfiltered results after the search is canceled? Because I don&#39;t want to call [table reload] everywhere.."}, {"owner": {"reputation": 8385, "user_id": 988260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wfCdO.jpg?s=128&g=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/988260/tyler"}, "reply_to_user": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1574107843, "post_id": 58922084, "comment_id": 104105676, "body": "Nope, you pretty much have to call <code>reloadData</code> to repopulate the table view whenever the data you want to display drastically changes like that."}], "tags": [], "owner": {"reputation": 8385, "user_id": 988260, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wfCdO.jpg?s=128&g=1", "display_name": "Tyler", "link": "https://stackoverflow.com/users/988260/tyler"}, "is_accepted": true, "score": 1, "last_activity_date": 1574107391, "creation_date": 1574107391, "answer_id": 58922084, "question_id": 58922001, "link": "https://stackoverflow.com/questions/58922001/uitableview-updating-results-from-uisearchbar/58922084#58922084", "title": "UITableView updating results from UISearchBar", "body": "<p>You're returning the unfiltered item count from <code>numberOfRowsInSection</code> when you should be returning the filtered item count if <code>_searching</code> is true.</p>\n\n<pre><code>- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section\n{\n    if (_searching) {\n        return _filtered.count;\n    }\n\n    return _items.count;\n}\n</code></pre>\n"}], "owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 58922084, "answer_count": 1, "score": 2, "last_activity_date": 1574108587, "creation_date": 1574107037, "last_edit_date": 1574108587, "question_id": 58922001, "link": "https://stackoverflow.com/questions/58922001/uitableview-updating-results-from-uisearchbar", "title": "UITableView updating results from UISearchBar", "body": "<p>I have a ViewController with a UISearchBar and UITablevView. The tableview just displays a list of items in the array, but I would like for it to display the filtered list of items with <code>filteredArrayUsingPredicate</code>. I'm able to get the filtered array using the predicate <code>NSPredicate *predicate = [NSPredicate predicateWithFormat:@\"SELF CONTAINS[cd] %@ OR SELF LIKE[cd] %@\", searchText,searchText];</code> and when I print the count of the filtered array, the number of items is correct. But then when I try to display it in the table a crash occurs with this error: \n<code>*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndexedSubscript:]: index 3 beyond bounds [0 .. 2]'</code></p>\n\n<p>Here's the code for the search bar and populating the table:</p>\n\n<pre><code>@interface ViewController (){\n    NSMutableArray&lt;NSString*&gt; *_items;\n    NSMutableArray&lt;NSString*&gt; *_filtered;\n    bool _searching;\n}\n\n\n@end\n\n@implementation ViewController\n- (void)viewDidLoad {\n    [super viewDidLoad];\n    // Do any additional setup after loading the view.\n    self-&gt;_items = @[@\"iphone\",@\"ipad\",@\"ipod\",@\"imac\"];\n    self-&gt;_filtered = [[NSMutableArray alloc] initWithArray:self-&gt;_items];\n    self-&gt;_table.dataSource = self;\n    [self-&gt;_table setDelegate:self];\n    [self-&gt;_search setDelegate:self];\n    self-&gt;_searching = false;\n\n}\n- (void)searchBar:(UISearchBar *)searchBar\n    textDidChange:(NSString *)searchText{\n    self-&gt;_searching = true;\n    NSPredicate *predicate = [NSPredicate predicateWithFormat:@\"SELF CONTAINS[cd] %@ OR SELF LIKE[cd] %@\", searchText,searchText];\n    self-&gt;_filtered = [self-&gt;_items filteredArrayUsingPredicate:predicate];\n    NSLog(@\"%lu\",(unsigned long)[self-&gt;_filtered count]);\n\n    [self-&gt;_table reloadData];\n}\n- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView\n{\n   return 1;\n}\n\n- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section\n{\n    return self-&gt;_items.count;\n}\n\n- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath\n{\n    UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier:@\"Cell\" forIndexPath:indexPath];\n    if(self-&gt;_searching)\n        cell.textLabel.text = self-&gt;_filtered[indexPath.row];\n    else\n        cell.textLabel.text = self-&gt;_items[indexPath.row];\n    return cell;\n}\n@end\n\n</code></pre>\n\n<p>The line that seems to be causing the crash is this\n<code>[self-&gt;_table reloadData];</code> in <code>- (void)searchBar:(UISearchBar *)searchBar\n    textDidChange:(NSString *)searchText</code> \nIn that method I set searching to true and in my <code>cellForRowAtIndexPath</code> I check if searching is true then display filtered results otherwise display items. But I don't understand why a crash occurs if I reload data and tell it to display the filtered results.</p>\n"}, {"tags": ["objective-c", "swift", "tvos"], "comments": [{"owner": {"reputation": 2158, "user_id": 4577897, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xRnGnuRgngs/AAAAAAAAAAI/AAAAAAAAAgQ/mSB8ASuTqDo/photo.jpg?sz=128", "display_name": "ZGski", "link": "https://stackoverflow.com/users/4577897/zgski"}, "edited": false, "score": 0, "creation_date": 1574107088, "post_id": 58921827, "comment_id": 104105315, "body": "What have you tried so far? What does your code look like?"}], "answers": [{"comments": [{"owner": {"reputation": 622, "user_id": 802766, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/pd4BN.jpg?s=128&g=1", "display_name": "V V", "link": "https://stackoverflow.com/users/802766/v-v"}, "edited": false, "score": 0, "creation_date": 1574263269, "post_id": 58952176, "comment_id": 104170959, "body": "Yeah, I tried but UI doesn&#39;t look good. I have proposed a new design to the client so hopefully, I don&#39;t have to implement this"}, {"owner": {"reputation": 2724, "user_id": 8069241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bff5e2f5af1e312141fee1ee52967aea?s=128&d=identicon&r=PG&f=1", "display_name": "maxwell", "link": "https://stackoverflow.com/users/8069241/maxwell"}, "reply_to_user": {"reputation": 622, "user_id": 802766, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/pd4BN.jpg?s=128&g=1", "display_name": "V V", "link": "https://stackoverflow.com/users/802766/v-v"}, "edited": false, "score": 0, "creation_date": 1574263477, "post_id": 58952176, "comment_id": 104171121, "body": "Sometimes it\u2019s not so easy :) Good luck!"}], "tags": [], "owner": {"reputation": 2724, "user_id": 8069241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bff5e2f5af1e312141fee1ee52967aea?s=128&d=identicon&r=PG&f=1", "display_name": "maxwell", "link": "https://stackoverflow.com/users/8069241/maxwell"}, "is_accepted": false, "score": 0, "last_activity_date": 1574245878, "creation_date": 1574245878, "answer_id": 58952176, "question_id": 58921827, "link": "https://stackoverflow.com/questions/58921827/tvos-change-the-width-of-uicollectionviewcell-when-focused/58952176#58952176", "title": "tvOS - Change the width of UICollectionViewCell when focused", "body": "<p>There is one solution that doesn\u2019t look perfect, but can solve your problem:</p>\n\n<pre><code>class SomeCollectionViewCell: UICollectionViewCell {\n\n    ...\n\n    private let normalCellWidth:  CGFloat = 150\n    private let focusedCellWidth: CGFloat = 250\n\n    override func didUpdateFocus(in context: UIFocusUpdateContext, with coordinator: UIFocusAnimationCoordinator) {\n        super.didUpdateFocus(in: context, with: coordinator)\n\n        let scaleXValue: CGFloat = focusedCellWidth/normalCellWidth\n        let scaleFactor = self.isFocused ? CGAffineTransform(scaleX: scaleXValue, y: 1.0): CGAffineTransform(scaleX: 1.0, y: 1.0)\n        self.transform = scaleFactor\n    }\n\n    ...\n\n}\n</code></pre>\n"}], "owner": {"reputation": 622, "user_id": 802766, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/pd4BN.jpg?s=128&g=1", "display_name": "V V", "link": "https://stackoverflow.com/users/802766/v-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1574245878, "creation_date": 1574106253, "question_id": 58921827, "link": "https://stackoverflow.com/questions/58921827/tvos-change-the-width-of-uicollectionviewcell-when-focused", "title": "tvOS - Change the width of UICollectionViewCell when focused", "body": "<p>I have a requirement in tvOS to change the width of  UICollectionViewCell when focused (width = 250) and when it unfocused, then reduce the width to normal (width = 150)</p>\n"}, {"tags": ["objective-c", "cocoa", "compatibility", "metal", "mtkview"], "comments": [{"owner": {"reputation": 5560, "user_id": 8870196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N07y8.jpg?s=128&g=1", "display_name": "0xBFE1A8", "link": "https://stackoverflow.com/users/8870196/0xbfe1a8"}, "edited": false, "score": 0, "creation_date": 1574189173, "post_id": 58921760, "comment_id": 104140265, "body": "As far as I know <b>MTKView</b> should work on any type of devices that support <b>Metal</b> framework."}, {"owner": {"reputation": 25, "user_id": 10982464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e02936a3b3cc62b442dd8aaf70916d0f?s=128&d=identicon&r=PG&f=1", "display_name": "CookCookie", "link": "https://stackoverflow.com/users/10982464/cookcookie"}, "reply_to_user": {"reputation": 5560, "user_id": 8870196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N07y8.jpg?s=128&g=1", "display_name": "0xBFE1A8", "link": "https://stackoverflow.com/users/8870196/0xbfe1a8"}, "edited": false, "score": 0, "creation_date": 1574212559, "post_id": 58921760, "comment_id": 104148733, "body": "@0xBFE1A8 Thanks for your comment! I wish all devices could support Metal. I have to implement a traditional drawing method for devices that don&#39;t support Metal. My concern is that I can&#39;t just inherit <code>MTKView</code>, it would cause trouble when running on those devices that don&#39;t support Metal."}], "owner": {"reputation": 25, "user_id": 10982464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e02936a3b3cc62b442dd8aaf70916d0f?s=128&d=identicon&r=PG&f=1", "display_name": "CookCookie", "link": "https://stackoverflow.com/users/10982464/cookcookie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1574105934, "creation_date": 1574105934, "question_id": 58921760, "link": "https://stackoverflow.com/questions/58921760/how-to-inherit-mtkview-and-fallback-on-nsview-uiview-for-older-os-devices-that-d", "title": "How to inherit MTKView and fallback on NSView/UIView for older OS devices that don&#39;t support MTKView?", "body": "<p>I am new to Objective-C, and this compatibility issue of <code>MTKView</code> really confuses me. </p>\n\n<p>I have a view class, and it's used to be like this,</p>\n\n<pre><code>@interface MyView : NSView\n@end\n\n@implementation MyView\n\n// A lot of implementations\n\n@end\n</code></pre>\n\n<p>I am now trying to use Metal to refresh the content in <code>MyView</code>. To use <code>MTKView</code>, which is defined on macOS as</p>\n\n<pre><code>@interface MTKView : NSView\n</code></pre>\n\n<p>I changed my code to</p>\n\n<pre><code>@interface MyView : MTKView\n@end\n</code></pre>\n\n<p>I compiled my code with the latest SDK so it won't have any issue at compile time.</p>\n\n<p>My questions are,</p>\n\n<ol>\n<li><p>Since <code>MTKView</code> is only supported on macOS 10.11+, what would happen if I run this code on devices with OS version lower than 10.11? I think it will probably not work since these devices don't know anything about <code>MTKView</code> at runtime. But could Apple had magically considered this issue and let it work on old devices just as NSView at the time my code is compiled?</p></li>\n<li><p>If it won't work on older OS version devices, what can I do to achieve this without any compatibility issue? What is the common method to solve this kind of compatibility issue? It should work like this but I think runtime inheritance is not a thing.</p></li>\n</ol>\n\n<pre><code>// Just to show how it should work\nif (Is_10_11_Or_Above())\n    @interface MyView : MTKView\nelse\n    @interface MTKView : NSView\n</code></pre>\n"}, {"tags": ["objective-c", "generics"], "answers": [{"comments": [{"owner": {"reputation": 12931, "user_id": 436976, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/ca5523dd495f8c0a6a6b20db65db2ef4?s=128&d=identicon&r=PG", "display_name": "stevendesu", "link": "https://stackoverflow.com/users/436976/stevendesu"}, "edited": false, "score": 0, "creation_date": 1574109454, "post_id": 58920783, "comment_id": 104106449, "body": "Passing in the <code>ofType</code> is exactly what I needed to solve this problem. Thanks for the great answer!"}], "tags": [], "owner": {"reputation": 249319, "user_id": 97337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed9a0d8cd44b62539b141f6c10405db1?s=128&d=identicon&r=PG", "display_name": "Rob Napier", "link": "https://stackoverflow.com/users/97337/rob-napier"}, "is_accepted": true, "score": 2, "last_activity_date": 1574102059, "last_edit_date": 1574102059, "creation_date": 1574101707, "answer_id": 58920783, "question_id": 58919869, "link": "https://stackoverflow.com/questions/58919869/objective-c-generic-response-types/58920783#58920783", "title": "Objective-C Generic Response Types?", "body": "<p>There's no need for generics here. Generics in Objective-C are \"lightweight.\" They don't really <em>do</em> anything. They're mostly there to help bridge to Swift. (In theory they could provide better warnings about type mismatches in ObjC, but they rarely if ever do.)</p>\n\n<p>Objective-C is duck typed. If something responds to a message, then it can accept that message. It doesn't matter what the \"real\" type of the object is. You can add a bunch of public methods like <code>getUsers:...</code> in order to get good warnings if the caller does something wrong, but <code>getAnything</code> can just accept <code>Request</code>. It doesn't need to be generic to do that (I'm assuming that <code>UserRequest</code> is a subclass of <code>Request</code> and <code>UserResponse</code> is a subclass of <code>Response</code>).</p>\n\n<p>The only tricky thing is that you need to pass the class so you can <code>init</code> it. That's no problem:</p>\n\n<pre><code>+ (void)getAnythingWithRequest:(Request *)request\n                       fromURL:(NSString *)url\n                        ofType:(Class)responseType\n                       success:(void (^)(Response *response))onResponse\n                       failure:(void (^)(APIError *error))onError\n</code></pre>\n\n<p>With that, assuming that <code>type</code> has a <code>initWithString:</code>, you can just call it:</p>\n\n<pre><code>Response *response = [[responseType alloc] initWithString:@\"...\"];\n</code></pre>\n\n<p>Objective-C is a highly dynamic language. As long as you make sure everything responds to what you expect it to respond to, then it'll all work. There's no reason to add generics unless you intend to bridge this to Swift.</p>\n\n<p>To make things a little nicer, <code>getUsers:...</code> etc can require that their success handler be of a more constrained type, and you can then just bridge across to that new type and add the URL string as you like:</p>\n\n<pre><code>+ (void)getUserWithRequest:(UserRequest *)request\n                    ofType:(Class)responseType\n                   success:(void (^)(UserResponse *response))onResponse\n                   failure:(void (^)(APIError *error))onError {\n\n    [self getAnythingWithRequest:request\n                         fromURL:@\"/api/users\"\n                          ofType:[UserResponse self]\n                         success:^(Response *response){onResponse((UserResponse*)response);}\n                         failure:onError];\n\n}\n</code></pre>\n"}], "owner": {"reputation": 12931, "user_id": 436976, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/ca5523dd495f8c0a6a6b20db65db2ef4?s=128&d=identicon&r=PG", "display_name": "stevendesu", "link": "https://stackoverflow.com/users/436976/stevendesu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 58920783, "answer_count": 1, "score": 1, "last_activity_date": 1574102059, "creation_date": 1574097494, "question_id": 58919869, "link": "https://stackoverflow.com/questions/58919869/objective-c-generic-response-types", "title": "Objective-C Generic Response Types?", "body": "<p>I have a wrapper for an API written in Objective-C that looks <strong><em>roughly</em></strong> like so:</p>\n\n<pre><code>@interface MyAPI : NSObject\n\n- (void)getUsers :(UserRequest*)request :(void (^)(UserResponse *response))onResponse :(void (^)(APIError *error))onError;\n- (void)getPosts :(PostRequest*)request :(void (^)(PostResponse *response))onResponse :(void (^)(APIError *error))onError;\n- (void)getOtherStuff :(OtherStuffRequest*)request :(void (^)(OtherStuffResponse *response))onResponse :(void (^)(APIError *error))onError;\n\n@end\n\n\n@implementation MyAPI\n\n- (void)getUsers :(UserRequest*)request :(void (^)(UserResponse *response))onResponse :(void (^)(APIError *error))onError\n{\n&gt;&gt;&gt; NSString *url = \"/api/users\";\n\n    HTTPClient *client = [[HTTPClient alloc] init];\n    HTTPRequest *httpRequest = [[HTTPRequest alloc] initWithURL:url];\n    httpRequest.queryParams = request.toDictionary;\n\n    [httpClient send:httpRequest success:^(HTTPResponse *httpResponse) {\n        NSError *error;\n&gt;&gt;&gt;     UserResponse *response = [[UserResponse alloc] initWithString:httpResposne.body error:&amp;error];\n        if (error == nil) {\n            onResponse(response);\n        } else {\n            APIError *errorResponse = [[APIError alloc] initWithError:error];\n            onError(errorResponse);\n        }\n    }, error:^(NSError *error) {\n        APIError *errorResponse = [[APIError alloc] initWithError:error];\n        onError(errorResponse);\n    }];\n}\n\n- (void)getPosts :(PostRequest*)request :(void (^)(PostResponse *response))onResponse :(void (^)(APIError *error))onError\n{\n&gt;&gt;&gt; NSString *url = \"/api/posts\";\n\n    HTTPClient *client = [[HTTPClient alloc] init];\n    HTTPRequest *httpRequest = [[HTTPRequest alloc] initWithURL:url];\n    httpRequest.queryParams = request.toDictionary;\n\n    [httpClient send:httpRequest success:^(HTTPResponse *httpResponse) {\n        NSError *error;\n&gt;&gt;&gt;     PostResponse *response = [[PostResponse alloc] initWithString:httpResposne.body error:&amp;error];\n        if (error == nil) {\n            onResponse(response);\n        } else {\n            APIError *errorResponse = [[APIError alloc] initWithError:error];\n            onError(errorResponse);\n        }\n    }, error:^(NSError *error) {\n        APIError *errorResponse = [[APIError alloc] initWithError:error];\n        onError(errorResponse);\n    }];\n}\n\n- (void)getOtherStuff :(OtherStuffRequest*)request :(void (^)(OtherStuffResponse *response))onResponse :(void (^)(APIError *error))onError\n{\n&gt;&gt;&gt; NSString *url = \"/api/otherStuff\";\n\n    HTTPClient *client = [[HTTPClient alloc] init];\n    HTTPRequest *httpRequest = [[HTTPRequest alloc] initWithURL:url];\n    httpRequest.queryParams = request.toDictionary;\n\n    [httpClient send:httpRequest success:^(HTTPResponse *httpResponse) {\n        NSError *error;\n&gt;&gt;&gt;     OtherStuffResponse *response = [[OtherStuffResponse alloc] initWithString:httpResposne.body error:&amp;error];\n        if (error == nil) {\n            onResponse(response);\n        } else {\n            APIError *errorResponse = [[APIError alloc] initWithError:error];\n            onError(errorResponse);\n        }\n    }, error:^(NSError *error) {\n        APIError *errorResponse = [[APIError alloc] initWithError:error];\n        onError(errorResponse);\n    }];\n}\n\n@end\n</code></pre>\n\n<p>I've marked with <code>&gt;&gt;&gt;</code> the only two lines that change from one method call to another - just the URL and the response type.</p>\n\n<p>Ideally to avoid duplicate code I would like to do something like this:</p>\n\n<pre><code>@interface InternalImplementation&lt;RequestType, ResponseType&gt; : NSObject\n\n+ (ResponseType)getAnything :(RequestType)request fromURL:(NSString*)url;\n\n@end\n\n@implementation InternalImplementation\n\n+ (void)getAnything :(RequestType)request fromURL:(NSString*)url :(void (^)(ResponseType *response))onResponse :(void (^)(APIError *error))onError\n{\n    HTTPClient *client = [[HTTPClient alloc] init];\n    HTTPRequest *httpRequest = [[HTTPRequest alloc] initWithURL:url];\n    httpRequest.queryParams = request.toDictionary;\n\n    [httpClient send:httpRequest success:^(HTTPResponse *httpResponse) {\n        NSError *error;\n        ResponseType *response = [[ResponseType alloc] initWithString:httpResposne.body error:&amp;error];\n        if (error == nil) {\n            onResponse(response);\n        } else {\n            APIError *errorResponse = [[APIError alloc] initWithError:error];\n            onError(errorResponse);\n        }\n    }, error:^(NSError *error) {\n        APIError *errorResponse = [[APIError alloc] initWithError:error];\n        onError(errorResponse);\n    }];\n}\n\n@end\n</code></pre>\n\n<p>This way I could re-write my API with almost no code duplication:</p>\n\n<pre><code>@implementation MyAPI\n\n- (void)getUsers :(UserRequest*)request :(void (^)(UserResponse *response))onResponse :(void (^)(APIError *error))onError\n{\n    [InternalImplementation&lt;UserRequest, UserResponse&gt; getAnything:request fromURL:\"/api/users\" onResponse:onResponse onError:onError]; \n}\n\n- (void)getPosts :(PostRequest*)request :(void (^)(PostResponse *response))onResponse :(void (^)(APIError *error))onError\n{\n    [InternalImplementation&lt;PostRequest, PostResponse&gt; getAnything:request fromURL:\"/api/users\" onResponse:onResponse onError:onError]; \n}\n\n- (void)getOtherStuff :(OtherStuffRequest*)request :(void (^)(OtherStuffResponse *response))onResponse :(void (^)(APIError *error))onError\n{\n    [InternalImplementation&lt;OtherStuffRequest, OtherStuffResponse&gt; getAnything:request fromURL:\"/api/users\" onResponse:onResponse onError:onError]; \n}\n\n@end\n</code></pre>\n\n<p>Unfortunately I can't quite figure out how to get this working. Can it even be done?</p>\n"}, {"tags": ["ios", "objective-c", "swift", "mvvm", "viewmodel"], "answers": [{"tags": [], "owner": {"reputation": 39554, "user_id": 4667835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1046586602022805/picture?type=large", "display_name": "D&#225;vid P&#225;sztor", "link": "https://stackoverflow.com/users/4667835/d%c3%a1vid-p%c3%a1sztor"}, "is_accepted": true, "score": 3, "last_activity_date": 1574091223, "creation_date": 1574091223, "answer_id": 58918038, "question_id": 58917773, "link": "https://stackoverflow.com/questions/58917773/swift-viewmodel-properties-cant-access-in-objc/58918038#58918038", "title": "Swift ViewModel properties can&#39;t access in ObjC", "body": "<p>If you want to be able to access properties of a class inside the implementation file of an Objective-C class, you need to import the header of the class. Simply forward declaring the class by doing <code>@class YourClass</code> only makes the type itself visible, but it doesn't expose its properties/methods.</p>\n\n<p>Since Swift files don't have headers, you need to import the Swift header of your module.</p>\n\n<p>So in your <code>ListViewController.m</code> do</p>\n\n<p><code>#import &lt;YourModule/YourModule-Swift.h&gt;</code></p>\n"}, {"tags": [], "owner": {"reputation": 933, "user_id": 11735828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a0932812e7a3dcac32fe5c516ffee30?s=128&d=identicon&r=PG&f=1", "display_name": "clawesome", "link": "https://stackoverflow.com/users/11735828/clawesome"}, "is_accepted": false, "score": 0, "last_activity_date": 1574092302, "creation_date": 1574092302, "answer_id": 58918387, "question_id": 58917773, "link": "https://stackoverflow.com/questions/58917773/swift-viewmodel-properties-cant-access-in-objc/58918387#58918387", "title": "Swift ViewModel properties can&#39;t access in ObjC", "body": "<p>In your Objective-C implementation you need to import the Xcode-generated header file for Swift.  Add this to your imports replacing <code>ProductModuleName</code> with your target's name: </p>\n\n<p><code>#import \"ProductModuleName-Swift.h\"</code></p>\n"}], "owner": {"reputation": 1981, "user_id": 2226399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gi21m.jpg?s=128&g=1", "display_name": "Harshal Wani", "link": "https://stackoverflow.com/users/2226399/harshal-wani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 58918038, "answer_count": 2, "score": 2, "last_activity_date": 1574092302, "creation_date": 1574090456, "question_id": 58917773, "link": "https://stackoverflow.com/questions/58917773/swift-viewmodel-properties-cant-access-in-objc", "title": "Swift ViewModel properties can&#39;t access in ObjC", "body": "<p>In Swift project contains, </p>\n\n<p><strong>CartViewModel.swift</strong></p>\n\n<pre><code>@objc public class CartViewModel: NSObject {\n\n    let apiService: APIService\n\n    var alertMessage: String? {\n        didSet {\n            self.showAlertClosure?()\n        }\n    }\n    var isShow: Bool = false {\n        didSet {\n            self.updateStatus?()\n        }\n    }\n    @objc public var dataCount: Int {\n        return models.count\n    }\n}\n</code></pre>\n\n<p><strong>ListViewController.h</strong></p>\n\n<pre><code>NS_ASSUME_NONNULL_BEGIN\n\n@class CartViewModel;\n\n@interface ListViewController : UIViewController\n@property (nonatomic, strong) CartViewModel *viewModel;\n\n@end\n\nNS_ASSUME_NONNULL_END\n</code></pre>\n\n<p><strong>ListViewController.m</strong></p>\n\n<pre><code>NSLog(@\"%@\", self.viewModel.dataCount); \n</code></pre>\n\n<p>// Accessing any property gives this error</p>\n\n<blockquote>\n  <p>Property 'dataCount' cannot be found in forward class object 'CartViewModel'</p>\n</blockquote>\n"}, {"tags": ["ios", "objective-c"], "owner": {"reputation": 72, "user_id": 11642098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59a04c3cbe7334bd62b3504bcac20868?s=128&d=identicon&r=PG&f=1", "display_name": "phani", "link": "https://stackoverflow.com/users/11642098/phani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1574086042, "creation_date": 1574086042, "question_id": 58916402, "link": "https://stackoverflow.com/questions/58916402/how-to-read-intelligent-mail-barcode-using-default-camera", "title": "How to Read Intelligent mail barcode using default camera?", "body": "<p>I know how to read QR codes using default camera. But I want to read <strong>IMB</strong> Postal (4 State). I searched, but didn't find answer. Sample IMB is</p>\n\n<p><a href=\"https://i.stack.imgur.com/wyYir.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wyYir.png\" alt=\"enter image description here\"></a></p>\n\n<p>Thanks in advance,</p>\n"}, {"tags": ["ios", "objective-c", "properties", "nsarray"], "comments": [{"owner": {"reputation": 17713, "user_id": 1801544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CcSB.jpg?s=128&g=1", "display_name": "Larme", "link": "https://stackoverflow.com/users/1801544/larme"}, "edited": false, "score": 3, "creation_date": 1574083510, "post_id": 58915543, "comment_id": 104092769, "body": "You can&#39;t put primitive (BOOL, int, CGPoint, etc) into a <code>NSArray</code>, only objects. A way to do so is to encapulsate them into <code>NSNumber</code> or <code>NSValue</code> for the most common ones."}, {"owner": {"reputation": 2419, "user_id": 7512091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UaZVQ.png?s=128&g=1", "display_name": "emrcftci", "link": "https://stackoverflow.com/users/7512091/emrcftci"}, "edited": false, "score": 1, "creation_date": 1574083796, "post_id": 58915543, "comment_id": 104092977, "body": "Simply you can intiialize like this -&gt; <code>type arrayName [ arraySize ];</code> -&gt; <code>BOOL arrayName [5];</code>   <code>BOOL arrayName[3] = { YES, NO, YES };</code>"}, {"owner": {"reputation": 85489, "user_id": 5820010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f54085103551ecfc99506b50cab764f2?s=128&d=identicon&r=PG&f=1", "display_name": "Sh_Khan", "link": "https://stackoverflow.com/users/5820010/sh-khan"}, "edited": false, "score": 1, "creation_date": 1574083854, "post_id": 58915543, "comment_id": 104093017, "body": "this is an old c way"}], "answers": [{"comments": [{"owner": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 1, "creation_date": 1574093245, "post_id": 58915597, "comment_id": 104098614, "body": "You should use modern syntax: <code>@(boolValue)</code>"}], "tags": [], "owner": {"reputation": 1389, "user_id": 1797194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bc6594552ca390580c21accd5274f77?s=128&d=identicon&r=PG", "display_name": "Maciej Gad", "link": "https://stackoverflow.com/users/1797194/maciej-gad"}, "is_accepted": true, "score": 1, "last_activity_date": 1574083389, "creation_date": 1574083389, "answer_id": 58915597, "question_id": 58915543, "link": "https://stackoverflow.com/questions/58915543/bool-array-in-objective-c/58915597#58915597", "title": "BOOL array in Objective-C", "body": "<p>You should use <code>NSNumber</code> and init them with: <code>- (NSNumber *)initWithBool:(BOOL)value;</code>. So the property should look like this:</p>\n\n<pre><code>@property (nonatomic) NSArray&lt;NSNumber *&gt; *checked; \n</code></pre>\n"}], "owner": {"reputation": 837, "user_id": 9451152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/642b86fd8d11e8bed786ff2ac35ea40f?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio", "link": "https://stackoverflow.com/users/9451152/sergio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 2, "accepted_answer_id": 58915597, "answer_count": 1, "score": 0, "last_activity_date": 1574083685, "creation_date": 1574083248, "last_edit_date": 1574083685, "question_id": 58915543, "link": "https://stackoverflow.com/questions/58915543/bool-array-in-objective-c", "title": "BOOL array in Objective-C", "body": "<p>How can I declare an array of BOOL as a property in an Objective-C class? This is not correct:</p>\n\n<pre><code>@property (nonatomic) NSArray&lt;BOOL&gt; *checked;\n</code></pre>\n"}, {"tags": ["objective-c", "cocoa", "nsnotificationcenter"], "comments": [{"owner": {"reputation": 5636, "user_id": 1824524, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3b203d394644764db23df78deb743913?s=128&d=identicon&r=PG&f=1", "display_name": "El Tomato", "link": "https://stackoverflow.com/users/1824524/el-tomato"}, "edited": false, "score": 0, "creation_date": 1574088645, "post_id": 58914669, "comment_id": 104095889, "body": "See AppleScript&#39;s Dictionary."}, {"owner": {"reputation": 411, "user_id": 1629471, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/5e526570a0864d19db3005baf8708a2c?s=128&d=identicon&r=PG", "display_name": "sam", "link": "https://stackoverflow.com/users/1629471/sam"}, "reply_to_user": {"reputation": 5636, "user_id": 1824524, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3b203d394644764db23df78deb743913?s=128&d=identicon&r=PG&f=1", "display_name": "El Tomato", "link": "https://stackoverflow.com/users/1824524/el-tomato"}, "edited": false, "score": 0, "creation_date": 1574089274, "post_id": 58914669, "comment_id": 104096244, "body": "can you please provide the sample code?"}], "answers": [{"tags": [], "owner": {"reputation": 586, "user_id": 10021979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d301f62fba6aaa0ca338f3b17163ecbb?s=128&d=identicon&r=PG&f=1", "display_name": "Anjula S.", "link": "https://stackoverflow.com/users/10021979/anjula-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1574158197, "creation_date": 1574158197, "answer_id": 58931445, "question_id": 58914669, "link": "https://stackoverflow.com/questions/58914669/how-to-find-login-event-in-macos/58931445#58931445", "title": "How To find Login event in MacOS", "body": "<p>I did spend some time to look into it , like you said i was unable to find anything that suggest that it \"powered on\" . However there were some behaviours such as <code>NSWorkspaceDidWakeNotification</code> and <code>NSWorkspaceScreensDidWakeNotification</code> to identify screen waking up and screen power . Take alook at the documentation of Apple below Make your way down to the \"notifications\" section</p>\n\n<p><a href=\"https://developer.apple.com/documentation/appkit/nsworkspace?language=objc\" rel=\"nofollow noreferrer\">https://developer.apple.com/documentation/appkit/nsworkspace?language=objc</a></p>\n"}], "owner": {"reputation": 411, "user_id": 1629471, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/5e526570a0864d19db3005baf8708a2c?s=128&d=identicon&r=PG", "display_name": "sam", "link": "https://stackoverflow.com/users/1629471/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574158197, "creation_date": 1574080462, "question_id": 58914669, "link": "https://stackoverflow.com/questions/58914669/how-to-find-login-event-in-macos", "title": "How To find Login event in MacOS", "body": "<p>I am trying to get notifications during user login and logout events programmatically. As of now I could figure out the logout events by using <code>NSWorkspaceWillPowerOffNotification</code> but not able to figure out the way to receive the login events. </p>\n\n<p>Please let me know the way to get the Login event programmatically.</p>\n"}, {"tags": ["objective-c", "xcode", "tvos"], "answers": [{"tags": [], "owner": {"reputation": 2724, "user_id": 8069241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bff5e2f5af1e312141fee1ee52967aea?s=128&d=identicon&r=PG&f=1", "display_name": "maxwell", "link": "https://stackoverflow.com/users/8069241/maxwell"}, "is_accepted": false, "score": 0, "last_activity_date": 1574246885, "creation_date": 1574246885, "answer_id": 58952517, "question_id": 58914121, "link": "https://stackoverflow.com/questions/58914121/xcode-tvos-how-to-detect-when-the-menu-button-on-tv-remote-is-pressed/58952517#58952517", "title": "Xcode tvOS - How to detect when the Menu button on TV Remote is pressed?", "body": "<p>Check line 25. Maybe you need to change UIPressTypeMenu.</p>\n\n<p>The work Swift version: </p>\n\n<pre><code>override func viewDidLoad() {\n    super.viewDidLoad()\n\n    setupRemoteContoller()\n}\n\nfunc setupRemoteContoller() {\n    let menuPressRecognizer = UITapGestureRecognizer()\n    menuPressRecognizer.addTarget(self, action: #selector(menuButtonAction))\n    menuPressRecognizer.allowedPressTypes = [NSNumber(value: UIPress.PressType.playPause.rawValue)]\n    self.view.addGestureRecognizer(menuPressRecognizer)\n}\n\n@objc func menuButtonAction() {\n    print(\"The menu button is pressed\")\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 12040363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3a6dbafac32db6a9a3e43c0767b145f?s=128&d=identicon&r=PG&f=1", "display_name": "dUser", "link": "https://stackoverflow.com/users/12040363/duser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 293, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574246885, "creation_date": 1574078454, "question_id": 58914121, "link": "https://stackoverflow.com/questions/58914121/xcode-tvos-how-to-detect-when-the-menu-button-on-tv-remote-is-pressed", "title": "Xcode tvOS - How to detect when the Menu button on TV Remote is pressed?", "body": "<p>I'm developing a tvOS app and I'm trying to programmatically detect when the Menu button on the Apple TV Remote is pressed with a tap gesture but the handleTap: won't get called. I show you the code. Is this the right way? Best regards.</p>\n\n<p><a href=\"https://i.stack.imgur.com/IrKJ9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IrKJ9.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ios", "objective-c", "xcode", "firebase-analytics"], "owner": {"reputation": 75, "user_id": 7014234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-uYIhxeW0t0M/AAAAAAAAAAI/AAAAAAAAAQc/F_ZwNupbDYk/photo.jpg?sz=128", "display_name": "ofer gertz", "link": "https://stackoverflow.com/users/7014234/ofer-gertz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1574067646, "creation_date": 1574067341, "last_edit_date": 1574067646, "question_id": 58910910, "link": "https://stackoverflow.com/questions/58910910/firebase-analytics-debug-in-ios", "title": "Firebase analytics debug in iOS", "body": "<p>I want to pass my QA a build with debug mode to see action live in Firebase debugView screen.\nIt worked when added the \"-FIRAnalyticsDebugEnabled\" into the scheme and ran the app directly from Xcode, but now I want to check the events directly from my development device so that's how the QA is checking it.</p>\n\n<p>I put this line code in didFinishLaunchingWithOptions:</p>\n\n<blockquote>\n  <p>NSMutableArray *newArguments = [NSMutableArray arrayWithArray:[[NSProcessInfo processInfo] arguments]];\n  [newArguments addObject:@\"-FIRAnalyticsDebugEnabled\"];\n  [[NSProcessInfo processInfo] setValue:[newArguments copy] forKey:@\"arguments\"];</p>\n</blockquote>\n\n<p>After this lines, I have the following:</p>\n\n<blockquote>\n<pre><code>// [START configure_firebase]\n[FIRApp configure];\n// [END configure_firebase]\n</code></pre>\n</blockquote>\n\n<pre><code>// [START set_messaging_delegate]\n[FIRMessaging messaging].delegate = self;\n// [END set_messaging_delegate]\n</code></pre>\n\n<p>And it still don't work for me.</p>\n\n<p>What m I missing here?</p>\n\n<p>FYI, i launched the app instance throw xcode, i didn't have build yet. i want to check it b4 make a build.</p>\n"}, {"tags": ["ios", "objective-c"], "answers": [{"comments": [{"owner": {"reputation": 463, "user_id": 1908794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/7f014de0cf118895c1b2c84d2c7d55c7?s=128&d=identicon&r=PG", "display_name": "xeravim", "link": "https://stackoverflow.com/users/1908794/xeravim"}, "edited": false, "score": 0, "creation_date": 1574127706, "post_id": 58917954, "comment_id": 104112163, "body": "Hi, in VC A i am not re-initializing. Well it will be initialized if I open X from VC A for the first time. I am trying to avoid saving values if possible as the purpose is clear, to reuse the viewController."}], "tags": [], "owner": {"reputation": 933, "user_id": 11735828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a0932812e7a3dcac32fe5c516ffee30?s=128&d=identicon&r=PG&f=1", "display_name": "clawesome", "link": "https://stackoverflow.com/users/11735828/clawesome"}, "is_accepted": false, "score": 0, "last_activity_date": 1574091010, "creation_date": 1574091010, "answer_id": 58917954, "question_id": 58909199, "link": "https://stackoverflow.com/questions/58909199/reaccess-the-same-uiviewcontroller-across-the-app/58917954#58917954", "title": "Reaccess the same UIViewController across the app", "body": "<p>Your singleton approach should work.  In VC A, are you somehow re-initializing VC X whereas in VC B you're getting a reference and using the existing VC X?</p>\n\n<p>If you don't want to use a singleton, you could instead have VC X know how to rebuild itself by having the controller save any needed values on the controller's <code>viewDidDisappear()</code> and/or <code>deinit</code></p>\n"}, {"tags": [], "owner": {"reputation": 463, "user_id": 1908794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/7f014de0cf118895c1b2c84d2c7d55c7?s=128&d=identicon&r=PG", "display_name": "xeravim", "link": "https://stackoverflow.com/users/1908794/xeravim"}, "is_accepted": true, "score": 0, "last_activity_date": 1574143475, "creation_date": 1574143475, "answer_id": 58927609, "question_id": 58909199, "link": "https://stackoverflow.com/questions/58909199/reaccess-the-same-uiviewcontroller-across-the-app/58927609#58927609", "title": "Reaccess the same UIViewController across the app", "body": "<p>Finally found the solution, It seems my approach already working and correct, but I missed something when try to show the VC X after being pushed from VC B. because on VC A I used PageViewController, then on its root viewWillAppear, I need to re-set the viewController being displayed.</p>\n\n<pre><code>[self.pageController setViewControllers:@[self.viewControllers[self.lastIndex]] direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:nil];\n</code></pre>\n\n<p>and thats it, all work as intended. :)</p>\n"}], "owner": {"reputation": 463, "user_id": 1908794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/7f014de0cf118895c1b2c84d2c7d55c7?s=128&d=identicon&r=PG", "display_name": "xeravim", "link": "https://stackoverflow.com/users/1908794/xeravim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 58927609, "answer_count": 2, "score": 0, "last_activity_date": 1574143475, "creation_date": 1574059426, "last_edit_date": 1574127432, "question_id": 58909199, "link": "https://stackoverflow.com/questions/58909199/reaccess-the-same-uiviewcontroller-across-the-app", "title": "Reaccess the same UIViewController across the app", "body": "<p>Let says that I have an UITabBarController based app, and for example it got 2 tabs, VC A and B. I have VC X that will be used accross the app, no matter it will be pushed or modally presented. VC A is a pageViewController that will show VC X and VC C, VC B is a UITableView and one of the cell if pressed will go to VC X (pushed). VC X state needs to be preserved as if I open it on VC A then select something, it will show the same state when I open it via VC B. What I have done so far is to make VC X as a Singleton and it will be used everywhere. </p>\n\n<pre><code>static XViewController *sharedInstance;\n\n+ (XViewController *)sharedInstance\n{\n    static dispatch_once_t once;\n       dispatch_once(&amp;once, ^{\n         sharedInstance= [[XViewController alloc]init];\n     });\n    return sharedInstance;\n}\n</code></pre>\n\n<p>Calling VCX :</p>\n\n<pre><code>XViewController *viewController = [XViewController sharedInstance];\n</code></pre>\n\n<p>The problem is when I open VC X from VC A, then open VC X from VC B, go back and open VC X from VC A, the view will be blank and when I choose VC C and choose VC X it will show again.</p>\n\n<p>So the question is what approach should I take to fix this problem or to achieve what i want? Thanks!</p>\n"}, {"tags": ["ios", "objective-c"], "answers": [{"tags": [], "owner": {"reputation": 119, "user_id": 6679901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0fbfe3284925d8f1396151293bbce2d?s=128&d=identicon&r=PG&f=1", "display_name": "Bhawin Ranpura", "link": "https://stackoverflow.com/users/6679901/bhawin-ranpura"}, "is_accepted": false, "score": 0, "last_activity_date": 1574062443, "creation_date": 1574062443, "answer_id": 58909840, "question_id": 58908523, "link": "https://stackoverflow.com/questions/58908523/duplicate-row-in-table-view/58909840#58909840", "title": "duplicate row in table view", "body": "<p><strong>This is the hierarchy of viewcontroller in my storyboard.</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/m4uq6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/m4uq6.png\" alt=\"enter image description here\"></a><br>\n<strong>This is my structure of viewcontroller swift file.</strong></p>\n\n<pre><code>class LocationVC: UIViewController, UITableViewDelegate, UITableViewDataSource {\n\n@IBOutlet weak var tblLocation: UITableView!\n\nvar selectedCells:[IndexPath] = []\nvar selectedCell: IndexPath?\n\noverride func viewDidLoad() {\n    super.viewDidLoad()\n}\n\nfunc selectCell(indexPath: IndexPath) {\n    selectedCell = indexPath\n    self.tblLocation.reloadData()\n}\n\nfunc tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int {\n    return 10\n}\n\nfunc tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell {\n    let cell : LocationCell = tableView.dequeueReusableCell(withIdentifier: \"LocationCell\") as! LocationCell\n    cell.lblCell.text = String(indexPath.row)\n    if selectedCells.count &gt; 0 {\n        if indexPath.row == selectedCell!.row - 1 {\n            cell.lblCell.text = String(selectedCell!.row)\n        }\n    }\n    return cell\n}\n\nfunc tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {\n    selectedCells.append(indexPath)\n    self.selectCell(indexPath: indexPath)\n}\n</code></pre>\n\n<p>}</p>\n\n<p><strong>This is my structure of tableviewCell file.</strong></p>\n\n<pre><code>class LocationCell : UITableViewCell {\n   @IBOutlet weak var lblCell: UILabel!\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 933, "user_id": 11735828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a0932812e7a3dcac32fe5c516ffee30?s=128&d=identicon&r=PG&f=1", "display_name": "clawesome", "link": "https://stackoverflow.com/users/11735828/clawesome"}, "is_accepted": false, "score": 0, "last_activity_date": 1574091823, "creation_date": 1574091823, "answer_id": 58918242, "question_id": 58908523, "link": "https://stackoverflow.com/questions/58908523/duplicate-row-in-table-view/58918242#58918242", "title": "duplicate row in table view", "body": "<p>Your <code>func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int)</code> is returning a fixed value.  You should be adding to the data that feeds the table rather than manually adding cells to the table yourself.  The table should manage the cells itself, you shouldn't have to add any cells yourself.</p>\n"}], "owner": {"reputation": 103, "user_id": 8125273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPrxj.jpg?s=128&g=1", "display_name": "kurupareshan", "link": "https://stackoverflow.com/users/8125273/kurupareshan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1574091823, "creation_date": 1574055275, "last_edit_date": 1574055644, "question_id": 58908523, "link": "https://stackoverflow.com/questions/58908523/duplicate-row-in-table-view", "title": "duplicate row in table view", "body": "<p>I want to create duplicate table view cell above the last tap cell which consist the data of last tap cell. But this is happening only bottom to top view.if i change the order it is return wrong value. This is my code.</p>\n\n<pre><code>- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {\n\n     UITableViewCell *lastTapCell;\n     lastTapCell = [_tableView cellForRowAtIndexPath:indexPath];\n    _txtDetailStr = lastTapCell.textLabel.text;\n    _lastTapCellIndexPath = [NSIndexPath indexPathForRow:indexPath.row  inSection:indexPath.section];\n\n}\n\n- (void)createDuplicateText:(UILongPressGestureRecognizer *)press {\n\n    if (press.state == UIGestureRecognizerStateBegan) {\n\n        [_stringArray addObject:_txtDetailStr];\n        [_tableView insertRowsAtIndexPaths:@[_lastTapCellIndexPath] withRowAnimation:UITableViewRowAnimationRight];\n\n    }\n\n}\n</code></pre>\n"}, {"tags": ["ios", "objective-c", "uitableview"], "comments": [{"owner": {"reputation": 17713, "user_id": 1801544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CcSB.jpg?s=128&g=1", "display_name": "Larme", "link": "https://stackoverflow.com/users/1801544/larme"}, "edited": false, "score": 0, "creation_date": 1574065289, "post_id": 58908028, "comment_id": 104083053, "body": "Don&#39;t rely on the UI. Instead, save whenever possible the notes into your model, and read it from there."}], "answers": [{"tags": [], "owner": {"reputation": 5727, "user_id": 1123662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sYfD9.png?s=128&g=1", "display_name": "Cynichniy Bandera", "link": "https://stackoverflow.com/users/1123662/cynichniy-bandera"}, "is_accepted": false, "score": 1, "last_activity_date": 1574185049, "last_edit_date": 1574185049, "creation_date": 1574147269, "answer_id": 58928394, "question_id": 58908028, "link": "https://stackoverflow.com/questions/58908028/objective-c-getting-value-of-property-on-non-visible-custom-uitableviewcell/58928394#58928394", "title": "Objective-C: Getting Value of Property on Non-Visible Custom UITableViewCell", "body": "<p>That is because invisible cells do not exist. Cells get reused when you scroll the table view. Only those of them, visible on the screen can actually be accessed.</p>\n\n<p>All the objects that potentially displayable in the table view are normally stored in some kind of list. What you need is to access the object from the list using the index you have from @path instead of trying to access its \"rendered copy\" from the table view itself.</p>\n"}], "owner": {"reputation": 1068, "user_id": 5258268, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/d42edde79ed534bc9e8f1ddbf6a1ac32?s=128&d=identicon&r=PG&f=1", "display_name": "Adam G", "link": "https://stackoverflow.com/users/5258268/adam-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574185049, "creation_date": 1574051758, "last_edit_date": 1574146824, "question_id": 58908028, "link": "https://stackoverflow.com/questions/58908028/objective-c-getting-value-of-property-on-non-visible-custom-uitableviewcell", "title": "Objective-C: Getting Value of Property on Non-Visible Custom UITableViewCell", "body": "<p>I've been using the code below to access the value of a textfield in my custom UITableViewCell. Problem is, this only works for cells that are visible at the time the method is called.</p>\n\n<pre><code>NSIndexPath *path = [NSIndexPath indexPathForRow:0 inSection:3];\nAppointmentNotesTableViewCell *cell = [self.tableView cellForRowAtIndexPath:path];\nNSString *str = cell.notesView.text;\n</code></pre>\n\n<p>Does anyone have a better way to access this information, regardless of the cell being visible or not?</p>\n"}, {"tags": ["objective-c", "swift"], "answers": [{"comments": [{"owner": {"reputation": 85489, "user_id": 5820010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f54085103551ecfc99506b50cab764f2?s=128&d=identicon&r=PG&f=1", "display_name": "Sh_Khan", "link": "https://stackoverflow.com/users/5820010/sh-khan"}, "edited": false, "score": 0, "creation_date": 1574028455, "post_id": 58905666, "comment_id": 104074102, "body": "pretty sure you know it&#39;s a duplicate"}], "tags": [], "owner": {"reputation": 39554, "user_id": 4667835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1046586602022805/picture?type=large", "display_name": "D&#225;vid P&#225;sztor", "link": "https://stackoverflow.com/users/4667835/d%c3%a1vid-p%c3%a1sztor"}, "is_accepted": true, "score": 1, "last_activity_date": 1574028409, "creation_date": 1574028409, "answer_id": 58905666, "question_id": 58905637, "link": "https://stackoverflow.com/questions/58905637/getting-class-name-in-swift-equivalent-to-objective-c-self-class/58905666#58905666", "title": "Getting class name in SWIFT equivalent to Objective C [self class]?", "body": "<p>You can use <code>print(\"Class = \\(type(of: self))\"</code> in Swift.</p>\n"}], "owner": {"reputation": 1866, "user_id": 3175421, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/TkSvY.png?s=128&g=1", "display_name": "Ing. Ron", "link": "https://stackoverflow.com/users/3175421/ing-ron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "closed_date": 1574028432, "accepted_answer_id": 58905666, "answer_count": 1, "score": -3, "last_activity_date": 1574028409, "creation_date": 1574028166, "question_id": 58905637, "link": "https://stackoverflow.com/questions/58905637/getting-class-name-in-swift-equivalent-to-objective-c-self-class", "closed_reason": "Duplicate", "title": "Getting class name in SWIFT equivalent to Objective C [self class]?", "body": "<p>I am using the following syntax to debug my Objective C code, getting the class name. What is the equivalent in SWIFT?</p>\n\n<pre><code>NSlog (@\"Classe = %@\",[self class]);\n</code></pre>\n"}, {"tags": ["ios", "objective-c"], "comments": [{"owner": {"reputation": 719, "user_id": 3146021, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5de1b244ab440a3227f3a04f10f42e8a?s=128&d=identicon&r=PG", "display_name": "Trai Nguyen", "link": "https://stackoverflow.com/users/3146021/trai-nguyen"}, "edited": false, "score": 1, "creation_date": 1573991471, "post_id": 58899725, "comment_id": 104063953, "body": "I already search the name <code>JWNavigationController</code> but don&#39;t have any result. Give me the lib you&#39;re using"}, {"owner": {"reputation": 1703, "user_id": 5321001, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8ec150e6a9d20554d73d455a000f4a5c?s=128&d=identicon&r=PG&f=1", "display_name": "Jigar", "link": "https://stackoverflow.com/users/5321001/jigar"}, "reply_to_user": {"reputation": 719, "user_id": 3146021, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5de1b244ab440a3227f3a04f10f42e8a?s=128&d=identicon&r=PG", "display_name": "Trai Nguyen", "link": "https://stackoverflow.com/users/3146021/trai-nguyen"}, "edited": false, "score": 0, "creation_date": 1573993077, "post_id": 58899725, "comment_id": 104064306, "body": "JWSlideMenuViewController library pls check"}, {"owner": {"reputation": 719, "user_id": 3146021, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5de1b244ab440a3227f3a04f10f42e8a?s=128&d=identicon&r=PG", "display_name": "Trai Nguyen", "link": "https://stackoverflow.com/users/3146021/trai-nguyen"}, "edited": false, "score": 1, "creation_date": 1573995318, "post_id": 58899725, "comment_id": 104064892, "body": "I&#39;ve just clone this code and run demo, it still work in iPhoneX, Xr, Xs Max. Give me more about your situation, example: which type of rootVC? Is that present any viewcontroller before crash? Which ViewController, NavigationController passed through before go to Menu Page, ..."}, {"owner": {"reputation": 10646, "user_id": 3231194, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/UwiSe.jpg?s=128&g=1", "display_name": "Glenn Posadas", "link": "https://stackoverflow.com/users/3231194/glenn-posadas"}, "edited": false, "score": 0, "creation_date": 1574008303, "post_id": 58899725, "comment_id": 104068348, "body": "If no one helps you out in the coming hours, perhaps you want to consider sharing a sample project that reproduces this issue."}], "owner": {"reputation": 1703, "user_id": 5321001, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8ec150e6a9d20554d73d455a000f4a5c?s=128&d=identicon&r=PG&f=1", "display_name": "Jigar", "link": "https://stackoverflow.com/users/5321001/jigar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573987781, "creation_date": 1573987781, "question_id": 58899725, "link": "https://stackoverflow.com/questions/58899725/jwnavigationcontroller-topviewcontroller-unrecognized-selector-sent-to-instan", "title": "[JWNavigationController topViewController]: unrecognized selector sent to instance 0x7faf61425ef0&#39;", "body": "<p>In my old project i has used JWNavigationController for slider menu.in iPHONE6,iPHONE7 device working proper but when i am run app in iphonex, Xr ,Xs Max than app is crashed.i have set exception breakpoint but can not find crash line please help me.</p>\n\n<p>Here is my crash log</p>\n\n<pre><code>*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[JWNavigationController topViewController]: unrecognized selector sent to instance 0x7faf61425ef0'\n*** First throw call stack:\n(\n    0   CoreFoundation                      0x0000000112fa66fb __exceptionPreprocess + 331\n    1   libobjc.A.dylib                     0x000000011254aac5 objc_exception_throw + 48\n    2   CoreFoundation                      0x0000000112fc4ab4 -[NSObject(NSObject) doesNotRecognizeSelector:] + 132\n    3   UIKitCore                           0x00000001205fdc3d -[UIResponder doesNotRecognizeSelector:] + 287\n    4   CoreFoundation                      0x0000000112fab443 ___forwarding___ + 1443\n    5   CoreFoundation                      0x0000000112fad238 _CF_forwarding_prep_0 + 120\n    6   UIKitCore                           0x0000000120a741a1 -[UIView _setSafeAreaInsets:updateSubviewsDuringNextLayoutPass:] + 261\n    7   UIKitCore                           0x0000000120a742d9 -[UIView setSafeAreaInsets:] + 75\n    8   UIKitCore                           0x000000011ffc3592 -[UIViewController _updateViewSafeAreaInsetsAndEagerlyUpdateContentScrollView:] + 124\n    9   UIKitCore                           0x000000011ffc3df2 -[UIViewController _setContentOverlayInsets:andLeftMargin:rightMargin:] + 940\n    10  UIKitCore                           0x000000011ffc5f64 __121-[UIViewController __updateContentOverlayInsetsWithOurRect:inBoundsOfAncestorViewController:viaImmediateChildOfAncestor:]_block_invoke + 497\n    11  UIKitCore                           0x000000011ffc5d2d -[UIViewController __updateContentOverlayInsetsWithOurRect:inBoundsOfAncestorViewController:viaImmediateChildOfAncestor:] + 3915\n    12  UIKitCore                           0x000000011ffc4a35 -[UIViewController _updateContentOverlayInsetsFromParentIfNecessary] + 587\n    13  UIKitCore                           0x000000011ffc4229 -[UIViewController _updateContentOverlayInsetsForSelfAndChildren] + 229\n    14  UIKitCore                           0x000000011ffd1dc9 -[UIViewController _updateLayoutForStatusBarAndInterfaceOrientation] + 954\n    15  UIKitCore                           0x000000011ffd2081 -[UIViewController _updateLayoutForStatusBarAndInterfaceOrientation] + 1650\n    16  UIKitCore                           0x000000011ffd7a8d -[UIViewController viewDidMoveToWindow:shouldAppearOrDisappear:] + 1184\n    17  UIKitCore                           0x0000000120a96962 -[UIView(Internal) _didMoveFromWindow:toWindow:] + 1414\n    18  UIKitCore                           0x0000000120a894ee __45-[UIView(Hierarchy) _postMovedFromSuperview:]_block_invoke + 151\n    19  UIKitCore                           0x0000000120a893cd -[UIView(Hierarchy) _postMovedFromSuperview:] + 795\n    20  UIKitCore                           0x0000000120a9963d -[UIView(Internal) _addSubview:positioned:relativeTo:] + 1948\n    21  UIKitCore                           0x0000000120a5c749 -[UITransitionView transition:fromView:toView:removeFromView:] + 1540\n    22  UIKitCore                           0x000000011fff83f2 -[UIViewControllerBuiltinTransitionViewAnimator animateTransition:] + 2080\n    23  UIKitCore                           0x000000011feef985 __56-[UIPresentationController runTransitionForCurrentState]_block_invoke + 3088\n    24  UIKitCore                           0x00000001205dccc9 _runAfterCACommitDeferredBlocks + 318\n    25  UIKitCore                           0x00000001205cc199 _cleanUpAfterCAFlushAndRunDeferredBlocks + 358\n    26  UIKitCore                           0x00000001205f932b _afterCACommitHandler + 124\n    27  CoreFoundation                      0x0000000112f0d0f7 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 23\n    28  CoreFoundation                      0x0000000112f075be __CFRunLoopDoObservers + 430\n    29  CoreFoundation                      0x0000000112f07c31 __CFRunLoopRun + 1505\n    30  CoreFoundation                      0x0000000112f07302 CFRunLoopRunSpecific + 626\n    31  GraphicsServices                    0x0000000116fbb2fe GSEventRunModal + 65\n    32  UIKitCore                           0x00000001205d1ba2 UIApplicationMain + 140\n    33  Audi                                0x000000010f8c9b40 main + 112\n    34  libdyld.dylib                       0x00000001148d4541 start + 1\n    35  ???                                 0x0000000000000001 0x0 + 1\n)\nlibc++abi.dylib: terminating with uncaught exception of type NSException\n</code></pre>\n"}, {"tags": ["ios", "objective-c", "avcapturesession", "avassetwriter"], "comments": [{"owner": {"reputation": 847, "user_id": 25779, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/baa4147b95dc3ba61d032a080d8502aa?s=128&d=identicon&r=PG", "display_name": "Richard Viney", "link": "https://stackoverflow.com/users/25779/richard-viney"}, "edited": false, "score": 0, "creation_date": 1596651584, "post_id": 58895544, "comment_id": 111882905, "body": "I&#39;ve been stumped by a very similar issue where little cracks and pops appear in the audio stream. Do you have a link to the bug report you sent? Did Apple ever respond?"}, {"owner": {"reputation": 359, "user_id": 4062108, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YYWr0o2LxXE/AAAAAAAAAAI/AAAAAAAAADQ/OUqoL90vExU/photo.jpg?sz=128", "display_name": "John Lanzivision", "link": "https://stackoverflow.com/users/4062108/john-lanzivision"}, "reply_to_user": {"reputation": 847, "user_id": 25779, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/baa4147b95dc3ba61d032a080d8502aa?s=128&d=identicon&r=PG", "display_name": "Richard Viney", "link": "https://stackoverflow.com/users/25779/richard-viney"}, "edited": false, "score": 0, "creation_date": 1597164732, "post_id": 58895544, "comment_id": 112042588, "body": "it was very frustrating. They first responded and said yes they repro, they will check it. THEN they responded and said &#39;no reproducible closing ticket!&#39;  What you COULD do is try using core audio, get the audio buffers through an AVAudioSession, then convert to CMSampleBuffer...  But we have since moved on since newer phones don&#39;t have the issue."}], "owner": {"reputation": 359, "user_id": 4062108, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YYWr0o2LxXE/AAAAAAAAAAI/AAAAAAAAADQ/OUqoL90vExU/photo.jpg?sz=128", "display_name": "John Lanzivision", "link": "https://stackoverflow.com/users/4062108/john-lanzivision"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 3, "answer_count": 0, "score": 3, "last_activity_date": 1576704803, "creation_date": 1573941191, "last_edit_date": 1576704803, "question_id": 58895544, "link": "https://stackoverflow.com/questions/58895544/avassetwriter-has-an-audio-crackle-only-on-ios-13-devices", "title": "AVAssetWriter has an audio &#39;crackle&#39; only on iOS 13 devices", "body": "<p>I use AVCaptureSession to write to a mov file using AVAssetWriter. The same code on a pre-iOS 13 devices does not have the crackle. On all iOS 13 devices, regardless of iPhone/iPad model, have the audio crackle.</p>\n\n<p>I've submitted this to Apple as a bug, but I'm worried I'm missing something simple. Is there anyone else experiencing this? Any ideas of settings I could change?</p>\n\n<p>Things I've tried</p>\n\n<ol>\n<li>Changed mov -> mpeg </li>\n<li>Tried multiple audio codecs (particularly AppleLossless and AAC)</li>\n<li>Pushed to main queue instead of a designated captureQueue</li>\n<li>Tried AVCaptureMovieFileOutput, crackle not present. Issue is specific to AVAssetWriter</li>\n<li>AVCaptureSession always gives audio in 44100, so I resampled it in AVAssetWriter to 48000. Crackle still present.</li>\n</ol>\n\n<p>ANY ideas would be helpful!</p>\n\n<p>Setup</p>\n\n<pre><code> self.session = [[AVCaptureSession alloc] init];\n[self.session setSessionPreset:AVCaptureSessionPresetiFrame1280x720];\n\nNSError *error;\nAVCaptureDevice *inputVideoDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];\nAVCaptureDeviceInput *deviceVideoInput = [AVCaptureDeviceInput deviceInputWithDevice:inputVideoDevice error:&amp;error];\nif ([self.session canAddInput:deviceVideoInput]) {\n    [self.session addInput:deviceVideoInput];\n}\n\nAVCaptureDevice* mic = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeAudio];\nAVCaptureDeviceInput* micinput = [AVCaptureDeviceInput deviceInputWithDevice:mic error:nil];\nif ([self.session canAddInput:micinput]) {\n    [self.session addInput:micinput];\n}\n\nAVCaptureVideoDataOutput *output = [[AVCaptureVideoDataOutput alloc] init];\noutput.videoSettings = @{ (NSString *)kCVPixelBufferPixelFormatTypeKey:@(kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange) };\n[output setSampleBufferDelegate:self queue:_captureQueue];\n[self.session addOutput:output];\n\nAVCaptureAudioDataOutput* audioout = [[AVCaptureAudioDataOutput alloc] init];\n[audioout setSampleBufferDelegate:self queue:_captureQueue];\n[self.session addOutput:audioout];\n\n[self setCameraPosition:NO];\n\n[self.session startRunning];\n\nself.preview = [AVCaptureVideoPreviewLayer layerWithSession:_session];\nself.preview.videoGravity = AVLayerVideoGravityResizeAspect;\n</code></pre>\n\n<p>AVAssetWriter init</p>\n\n<pre><code> _path = path;\n    [[NSFileManager defaultManager] removeItemAtPath:_path error:nil];\n    NSURL *url = [NSURL fileURLWithPath:self.path];\n    _writer = [AVAssetWriter assetWriterWithURL:url fileType:AVFileTypeQuickTimeMovie error:nil];\n    NSDictionary* settings = [NSDictionary dictionaryWithObjectsAndKeys:\n                              AVVideoCodecH264, AVVideoCodecKey,\n                              [NSNumber numberWithFloat: frameSize.width], AVVideoWidthKey,\n                              [NSNumber numberWithFloat: frameSize.height], AVVideoHeightKey,\n                              nil];\n    _videoInput = [AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeVideo outputSettings:settings];\n    _videoInput.expectsMediaDataInRealTime = YES;\n    [_writer addInput:_videoInput];\n\n    AudioChannelLayout acl;\n    bzero( &amp;acl, sizeof(acl));\n    acl.mChannelLayoutTag = kAudioChannelLayoutTag_Mono;\n    settings = [NSDictionary dictionaryWithObjectsAndKeys:\n                [ NSNumber numberWithInt: kAudioFormatMPEG4AAC], AVFormatIDKey,\n                [ NSNumber numberWithInt:(int)channels], AVNumberOfChannelsKey,\n                [ NSNumber numberWithFloat:sampleRate], AVSampleRateKey,\n                [ NSNumber numberWithInt: 64000 ], AVEncoderBitRateKey,\n                nil];\n\n    _audioInput = [AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeAudio outputSettings:settings];\n    _audioInput.expectsMediaDataInRealTime = YES;\n    [_writer addInput:_audioInput];\n\n    [_writer startWriting];\n</code></pre>\n\n<p>UPDATE::\niPhone 11+ devices do NOT have the crackle, seems like something they changed under the hood with the codecs that causes an issue with 'older' devices.\nI have submitted a bug with Apple and used a Tech Support. Tech support has verified iPhone 11's are fine while anything older has the issue. \nThere has been zero response to the bug ticket.</p>\n\n<p>If you can stay away from AVAssetWriter for the foreseeable future.</p>\n"}, {"tags": ["ios", "objective-c", "icloud"], "comments": [{"owner": {"reputation": 297030, "user_id": 1226963, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/yjY1E.png?s=128&g=1", "display_name": "rmaddy", "link": "https://stackoverflow.com/users/1226963/rmaddy"}, "edited": false, "score": 0, "creation_date": 1573928539, "post_id": 58893784, "comment_id": 104052629, "body": "Are you listening for the <code>NSUbiquityIdentityDidChangeNotification</code> notification to determine whether you should check again?"}, {"owner": {"reputation": 11, "user_id": 5762007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68037c38543cb9eee697e330b31295e1?s=128&d=identicon&r=PG&f=1", "display_name": "Harshit", "link": "https://stackoverflow.com/users/5762007/harshit"}, "reply_to_user": {"reputation": 297030, "user_id": 1226963, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/yjY1E.png?s=128&g=1", "display_name": "rmaddy", "link": "https://stackoverflow.com/users/1226963/rmaddy"}, "edited": false, "score": 0, "creation_date": 1573928936, "post_id": 58893784, "comment_id": 104052738, "body": "No, could you tell how should I listen to that? And how do I check again?  The code written above is executed on a button click. So once I have signed out, on clicking the button the code executes again but still returns a value"}], "owner": {"reputation": 11, "user_id": 5762007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68037c38543cb9eee697e330b31295e1?s=128&d=identicon&r=PG&f=1", "display_name": "Harshit", "link": "https://stackoverflow.com/users/5762007/harshit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1573932478, "creation_date": 1573928153, "last_edit_date": 1573932478, "question_id": 58893784, "link": "https://stackoverflow.com/questions/58893784/ubiquityidentitytoken-returns-value-when-signed-in-into-icloud-but-still-returns", "title": "ubiquityIdentityToken returns value when signed in into iCloud but still returns value after signing out of iCloud", "body": "<p>I am trying to check if a user is signed in into iCloud or not on Xode simulator.</p>\n\n<pre><code>id token = [[NSFileManager defaultManager] ubiquityIdentityToken];\nif (token) {\n    _iCloudValue.text = @\"Signed In\";\n} else {\n    _iCloudValue.text = @\"Not Signed In\";\n}\n</code></pre>\n\n<p>When I open simulator and signed in into iCloud and then test it returns a value. Similarly when I open simulator and signed out of iCloud it returns null.</p>\n\n<p>However, once I check the signed in scenario, then if I sign out of iCloud and check again, it still returns a value. How do I refresh that token value and check the current status?</p>\n\n<p>The code written above is executed on a button click. So once I have signed out, on clicking the button the code executes again but still returns a value.</p>\n"}, {"tags": ["ios", "objective-c", "ios13", "uifont"], "answers": [{"tags": [], "owner": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "is_accepted": true, "score": 2, "last_activity_date": 1573934294, "last_edit_date": 1573934294, "creation_date": 1573933124, "answer_id": 58894498, "question_id": 58893147, "link": "https://stackoverflow.com/questions/58893147/make-font-bold-in-ios-13/58894498#58894498", "title": "Make font bold in iOS 13", "body": "<p>The problem is</p>\n\n<pre><code>fontDescriptorWithName:font.fontName\n</code></pre>\n\n<p>In iOS 13 it is forbidden to try to refer to a system font by name. </p>\n\n<p>To go from a font to a font descriptor, just ask for the font\u2019s <code>fontDescriptor</code>. </p>\n\n<p><a href=\"https://developer.apple.com/documentation/uikit/uifont/1619037-fontdescriptor\" rel=\"nofollow noreferrer\">https://developer.apple.com/documentation/uikit/uifont/1619037-fontdescriptor</a></p>\n\n<p>Thus the standard pattern is (Swift but I\u2019m sure you can translate)</p>\n\n<pre><code>let f = UIFont(...\nlet desc = f.fontDescriptor \nlet desc2 = desc.withSymbolicTraits(.traitBold) \nlet f2 = UIFont(descriptor: desc2!, size: 0)\n</code></pre>\n"}], "owner": {"reputation": 12940, "user_id": 284714, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a45c3f3d52ee26a5237541d95fbe468b?s=128&d=identicon&r=PG", "display_name": "Berry Blue", "link": "https://stackoverflow.com/users/284714/berry-blue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 58894498, "answer_count": 1, "score": 0, "last_activity_date": 1573934294, "creation_date": 1573923934, "question_id": 58893147, "link": "https://stackoverflow.com/questions/58893147/make-font-bold-in-ios-13", "title": "Make font bold in iOS 13", "body": "<p>I'm using the following code to make a font bold in an attributed string. This used to work fine but in iOS 13 it's giving me a bold Times font instead of the system font. I'm aware I can use <code>-boldSystemFontOfSize:</code> but I'm doing it this way to that I can make any font bold. I only see the problem with attributes strings.</p>\n\n<pre><code>UIFont *font = [UIFont systemFontOfSize:18];\nUIFontDescriptor *fontDescriptor = [UIFontDescriptor fontDescriptorWithName:font.fontName size:font.pointSize];     \nUIFontDescriptor *styleDescriptor = [fontDescriptor fontDescriptorWithSymbolicTraits:[fontDescriptor symbolicTraits] | UIFontDescriptorTraitBold];\nUIFont *boldFont = [UIFont fontWithDescriptor:styleDescriptor size:font.pointSize];\n</code></pre>\n"}, {"tags": ["objective-c", "swift", "url", "nsstring"], "comments": [{"owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 0, "creation_date": 1573918989, "post_id": 58891990, "comment_id": 104050052, "body": "Swift got more disciplined about cleaning up the responsibilities of the various standard library types. It&#39;s not sensible for an <code>NSString</code> to be responsible for loading itself from a URL. Imagine what would happen if <code>String</code> was responsible for being able to load itself from anywhere a string might be loadable from. Databases, file systems, YAML/JSON/CSV/XML, etc. It would bloat massively. Instead, in Swift, you would use <code>URLSession</code>. That also solves a second problem: this ObjC code is synchronous, and makes the whole program wait on a network call. That&#39;s never a good use experience."}, {"owner": {"reputation": 1014, "user_id": 4903240, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh3.googleusercontent.com/-rv-HspwP7-8/AAAAAAAAAAI/AAAAAAAAAVs/JDLaGkcPrtM/photo.jpg?sz=128", "display_name": "neda Derakhshesh", "link": "https://stackoverflow.com/users/4903240/neda-derakhshesh"}, "reply_to_user": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 0, "creation_date": 1573919439, "post_id": 58891990, "comment_id": 104050193, "body": "@Alexander Thank you very much , seems very helpful information. can you answer the question ? and if possible please tell me what is your suggestion to do it? thank you"}, {"owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 1, "creation_date": 1573919495, "post_id": 58891990, "comment_id": 104050215, "body": "See <a href=\"https://developer.apple.com/documentation/foundation/url_loading_system/downloading_files_from_websites?language=objc\" rel=\"nofollow noreferrer\">developer.apple.com/documentation/foundation/url_loading_sys&zwnj;&#8203;tem/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 14221, "user_id": 5012441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1w495.jpg?s=128&g=1", "display_name": "Josh Homann", "link": "https://stackoverflow.com/users/5012441/josh-homann"}, "is_accepted": false, "score": 1, "last_activity_date": 1573917491, "creation_date": 1573917491, "answer_id": 58892155, "question_id": 58891990, "link": "https://stackoverflow.com/questions/58891990/queryurl-with-swift-does-not-work-while-it-works-with-objective-c/58892155#58892155", "title": "queryURL with swift does not work while it works with objective C", "body": "<p>You left out the encoding in swift (the parameter is optional in swift but required in objc): <code>let contents = try String(contentsOf: url, encoding: .ascii)</code></p>\n"}], "owner": {"reputation": 1014, "user_id": 4903240, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh3.googleusercontent.com/-rv-HspwP7-8/AAAAAAAAAAI/AAAAAAAAAVs/JDLaGkcPrtM/photo.jpg?sz=128", "display_name": "neda Derakhshesh", "link": "https://stackoverflow.com/users/4903240/neda-derakhshesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573917491, "creation_date": 1573916348, "question_id": 58891990, "link": "https://stackoverflow.com/questions/58891990/queryurl-with-swift-does-not-work-while-it-works-with-objective-c", "title": "queryURL with swift does not work while it works with objective C", "body": "<p>I need to work with some queryURL with swift. I am new to swift while I did this job with objective C once . and it worked correctly with objective C .\nhere is the codes for my objective C project which it works correctly . </p>\n\n<pre><code>NSString* queryURL;\n\nqueryURL = [NSString stringWithFormat:@\"https://google.com];\n\n\nNSCharacterSet *set = [NSCharacterSet URLQueryAllowedCharacterSet];\n\nNSString *result = [queryURL stringByAddingPercentEncodingWithAllowedCharacters:set];\n\nNSURL *googleURL = [NSURL URLWithString:result];\n\nNSError *error;\n\nNSString *googlePage = [NSString stringWithContentsOfURL:googleURL\n\n                                                encoding:NSASCIIStringEncoding\n\n                                                   error:&amp;error];\n\n\n   NSLog(@\"Back%@\", googlePage);\n</code></pre>\n\n<p>and as I said , it works fine. now I change this to below codes of swift </p>\n\n<pre><code>   if let url = URL(string: \"https://google.com\") {\n\n    do {\n\n        let contents = try String(contentsOf: url)\n\n        print(contents)\n\n    } catch {\n\n        // contents could not be loaded\n\n    }\n\n} else {\n\n    // the URL was bad!\n\n}\n</code></pre>\n\n<p>but it confronts an Error <code>contents could not be loaded</code> I really appreciate if some one could help me some how. </p>\n"}, {"tags": ["objective-c", "uibutton", "title", "uicolor"], "answers": [{"tags": [], "owner": {"reputation": 297030, "user_id": 1226963, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/yjY1E.png?s=128&g=1", "display_name": "rmaddy", "link": "https://stackoverflow.com/users/1226963/rmaddy"}, "is_accepted": true, "score": 0, "last_activity_date": 1573923328, "creation_date": 1573923328, "answer_id": 58893058, "question_id": 58890736, "link": "https://stackoverflow.com/questions/58890736/change-uibutton-color-with-defined-color/58893058#58893058", "title": "Change UIButton Color With Defined Color", "body": "<p>The problem is the semicolon at the end of the <code>#define</code>. Get rid of the semicolon there. Then of course you need to add a semicolon to your regular method call.</p>\n\n<pre><code>#define GHOSTWHITE_COLOR  ([UIColor colorWithRed:248/255.0 green:248/255.0 blue:255/255.0 alpha:1])\n\n[loginBtn setTitleColor:GHOSTWHITE_COLOR forState:UIControlStateNormal];\n</code></pre>\n\n<hr>\n\n<p>A better solution is to create a category on UIColor and add a class property for your custom color. Then you can use your custom color just like any other.h</p>\n\n<p>UIColor+Custom.h:</p>\n\n<pre><code>@interface UIColor (Custom)\n\n@property (nonatomic, readonly, class) UIColor *ghostWhiteColor;\n\n@end\n</code></pre>\n\n<p>UIColor+Custom.m:</p>\n\n<pre><code>@implementation UIColor (Custom)\n\n+ (UIColor *)ghostWhiteColor {\n    return [UIColor colorWithRed:248/255.0 green:248/255.0 blue:255/255.0 alpha:1];\n}\n\n@end\n</code></pre>\n\n<p>Now you can use this like any other color:</p>\n\n<pre><code>[loginBtn setTitleColor:UIColor.ghostWhiteColor forState:UIControlStateNormal];\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 7646394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92b92e9b3e78d9ecf48ccd186cfac011?s=128&d=identicon&r=PG&f=1", "display_name": "OykuNehir", "link": "https://stackoverflow.com/users/7646394/oykunehir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 58893058, "answer_count": 1, "score": 0, "last_activity_date": 1573923328, "creation_date": 1573907413, "last_edit_date": 1573922893, "question_id": 58890736, "link": "https://stackoverflow.com/questions/58890736/change-uibutton-color-with-defined-color", "title": "Change UIButton Color With Defined Color", "body": "<p>I want to change my title color with an already defined color. Here's my code. </p>\n\n<pre><code>#define GHOSTWHITE_COLOR    ([UIColor colorWithRed:248/255.0 green:248/255.0 blue:255/255.0 alpha:1]);\n\n[loginBtn setTitleColor:GHOSTWHITE_COLOR forState:UIControlStateNormal]\n</code></pre>\n\n<p>But I'm having this error:</p>\n\n<blockquote>\n  <p>Expression result unused** or  **Expected ']'</p>\n</blockquote>\n"}, {"tags": ["objective-c", "macos", "dispatch", "nstask"], "comments": [{"owner": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 0, "creation_date": 1573893427, "post_id": 58886707, "comment_id": 104043963, "body": "It&#39;s not background, it&#39;s another process. Do you really need read large file in another process? It&#39;s only make sense if you are running some server."}], "answers": [{"comments": [{"owner": {"reputation": 588, "user_id": 1432710, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2f79b791ddd4d7d6ad5c90244bc31ee3?s=128&d=identicon&r=PG", "display_name": "Joe Habadas", "link": "https://stackoverflow.com/users/1432710/joe-habadas"}, "edited": false, "score": 0, "creation_date": 1573902263, "post_id": 58888975, "comment_id": 104045878, "body": "Hi, I tried your suggestion but it seems like once I call my <code>NSTaskClass</code> it never returns. I&#39;m not exactly sure why. If you need any more information let me know, because I would like to get this working, thanks."}, {"owner": {"reputation": 113, "user_id": 12345813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CF9vQ.jpg?s=128&g=1", "display_name": "htq287", "link": "https://stackoverflow.com/users/12345813/htq287"}, "reply_to_user": {"reputation": 588, "user_id": 1432710, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2f79b791ddd4d7d6ad5c90244bc31ee3?s=128&d=identicon&r=PG", "display_name": "Joe Habadas", "link": "https://stackoverflow.com/users/1432710/joe-habadas"}, "edited": false, "score": 0, "creation_date": 1573911893, "post_id": 58888975, "comment_id": 104048148, "body": "@JoeHabadas So, any background jobs in the object of <code>NSTaskClass</code>? If possible, could you please give me more detail about your code"}], "tags": [], "owner": {"reputation": 113, "user_id": 12345813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CF9vQ.jpg?s=128&g=1", "display_name": "htq287", "link": "https://stackoverflow.com/users/12345813/htq287"}, "is_accepted": false, "score": 0, "last_activity_date": 1573893781, "creation_date": 1573893781, "answer_id": 58888975, "question_id": 58886707, "link": "https://stackoverflow.com/questions/58886707/objective-c-best-way-to-handle-nstask-that-isnt-finished/58888975#58888975", "title": "Objective-C, best way to handle NSTask that isn&#39;t finished", "body": "<p><strong>Just give you an idea, hope to solve your problem.</strong></p>\n\n<ul>\n<li>Use a <code>dispatch_sempahore</code> to handle the operations in your <code>NSTaskClass</code></li>\n<li>Create a handler for <code>doTask</code> method, use <code>- (void)doTask:(NSString *)filePath handler:(void(^)(NSString *result))handler</code> instead of <code>- (NSString *)doTask:(NSString *)filePath</code></li>\n</ul>\n\n<p>Then, your code should look something like this:</p>\n\n<pre><code>    dispatch_queue_t backgroundQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);\n    dispatch_async(backgroundQueue, ^{\n\n        // reading large files\n        dispatch_semaphore_t sema = dispatch_semaphore_create(0);\n\n        ...\n        NSTaskClass *operation = [[NSTaskClass alloc] init];\n        [operation doTask:filePath handler:^(NSString * _Nonnull result) {\n            // Get your result here\n            result = [NSString stringWithString:result];\n\n            ...\n\n            dispatch_semaphore_signal(sema);\n\n\n        }];\n\n        dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);\n\n        NSLog(@\"result: %@\" result); // Here should be fine (not NULL)\n        ...\n        // continue large file operations\n    });\n</code></pre>\n"}], "owner": {"reputation": 588, "user_id": 1432710, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2f79b791ddd4d7d6ad5c90244bc31ee3?s=128&d=identicon&r=PG", "display_name": "Joe Habadas", "link": "https://stackoverflow.com/users/1432710/joe-habadas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1573893781, "creation_date": 1573867766, "question_id": 58886707, "link": "https://stackoverflow.com/questions/58886707/objective-c-best-way-to-handle-nstask-that-isnt-finished", "title": "Objective-C, best way to handle NSTask that isn&#39;t finished", "body": "<p>I have an asynchronous <code>dispatch queue</code> which reads data from large files in the background. During the course of that it does a few other things including some <code>NSTask</code> operations. The problem I'm facing is that I populate some variables with the result of those operations and the background queue has already moved on by the time those variables are ready (not NULL). </p>\n\n<p>My code looks similar to the following:</p>\n\n<pre><code>dispatch_queue_t backgroundQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);\n    dispatch_async(backgroundQueue, ^{\n\n    // reading large files\n    ...\n    NSTaskClass *operation = [[NSTaskClass alloc] init];\n    NSString *result = [operation doTask:filePath];\n\n    NSLog(@\"result: %@\" result); // returns NULL since task isn't done yet.\n    ...\n    // continue large file operations\n});\n</code></pre>\n\n<p>Would would be the best way to handle this? I looked into creating a <code>callback</code> but I couldn't figure it out, and I'm not sure if that's even the right approach. Any advice on best practices is appreciated, thanks.</p>\n"}, {"tags": ["objective-c", "macos", "nspasteboard"], "comments": [{"owner": {"reputation": 12147, "user_id": 4244136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ee698ef15036e2393a30962db90cfa3?s=128&d=identicon&r=PG&f=1", "display_name": "Willeke", "link": "https://stackoverflow.com/users/4244136/willeke"}, "edited": false, "score": 0, "creation_date": 1573874537, "post_id": 58886232, "comment_id": 104041317, "body": "Post your code please."}], "answers": [{"tags": [], "owner": {"reputation": 100, "user_id": 6366456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25c0cd74a95f76202b34d762b4907e8d?s=128&d=identicon&r=PG&f=1", "display_name": "Byteboon", "link": "https://stackoverflow.com/users/6366456/byteboon"}, "is_accepted": true, "score": 0, "last_activity_date": 1574958591, "creation_date": 1574958591, "answer_id": 59093094, "question_id": 58886232, "link": "https://stackoverflow.com/questions/58886232/how-to-use-nspasteboard-with-kpasteboardtypefileurlpromise-for-copy-paste/59093094#59093094", "title": "How to use NSPasteboard with kPasteboardTypeFileURLPromise for copy/paste?", "body": "<p>It appears that the key piece here is that Finder requires that the file actually be present on disk for the paste action to be enabled for a file URL. This one detail rules out the possibility of promises working for copy/paste -- at least with Finder.</p>\n\n<p>The correct solution therefore requires a virtualized file system (like FUSE) so that the promises can be made and fulfilled at the filesystem level. Thus a collection of temporary zero-length files can be written to disk, and actual file URLs be added to the pasteboard. This fulfills the requirements that Finder has to enable paste. Then when a paste action is made, the file data is read from the virtualized file system which can in turn retrieve the actual data from the remote system.  Finder is none the wiser.  The copy will even have a built in progress bar!</p>\n\n<p>It appears that Microsoft's Mac RDP client mostly works this way, although I was only ever able to get it to copy zero length files so this may be harder to get right than it sounds. </p>\n"}], "owner": {"reputation": 100, "user_id": 6366456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25c0cd74a95f76202b34d762b4907e8d?s=128&d=identicon&r=PG&f=1", "display_name": "Byteboon", "link": "https://stackoverflow.com/users/6366456/byteboon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 695, "favorite_count": 1, "accepted_answer_id": 59093094, "answer_count": 1, "score": 4, "last_activity_date": 1575050503, "creation_date": 1573862771, "last_edit_date": 1575050503, "question_id": 58886232, "link": "https://stackoverflow.com/questions/58886232/how-to-use-nspasteboard-with-kpasteboardtypefileurlpromise-for-copy-paste", "title": "How to use NSPasteboard with kPasteboardTypeFileURLPromise for copy/paste?", "body": "<p>My application would like to add a promise to the pasteboard for a file that is stored remotely, and may never be pasted&mdash;similar to pasting a file copied from a session controlling a VM or other remote system.  Ideally, a user can paste in a Finder folder (or the desktop) and the promise would trigger and away we go. I am willing to deal with the issues of fulfilling the promise once triggered, but I have been unable to get the promise to trigger.  </p>\n\n<p>All of the promise code I have found deals with drag and drop, which is not functionality what I need (though it is possible that something from DnD needs to be in place for promises to work?)</p>\n\n<p>I have tried using <code>NSFilePromiseProvider</code> with a delegate, and adding that to the pasteboard.  I can see the entries on the pasteboard using a clipboard viewer, but when I paste in Finder nothing happens and no delegate methods are called. I can trigger the delegate methods by having the clipboard viewer access the entries, so I know that much is hooked up.</p>\n\n<pre><code>@interface ClipboardMacPromise : NSFilePromiseProvider&lt;NSFilePromiseProviderDelegate&gt;\n{\n    NSString* m_file;\n}\n@end\n@implementation ClipboardMacPromise\n- (id)initWithFileType:(NSString*)type andFile:(NSString*)file\n{\n    m_file = file;\n    return [super initWithFileType:type delegate:self];\n}\n- (NSString *)filePromiseProvider:(NSFilePromiseProvider*)filePromiseProvider fileNameForType:(NSString *)fileType\n{\n    return m_file;\n}\n- (void)filePromiseProvider:(NSFilePromiseProvider*)filePromiseProvider writePromiseToURL:(NSURL *)url completionHandler:(void (^)(NSError * _Nullable errorOrNil))completionHandler\n{\n    // Finder can't paste, so we never get here...\n}\n@end\n\nNSPasteboard* pboard = [NSPasteboard generalPasteboard];\n[pboard clearContents];\nNSMutableArray* items = [[NSMutableArray alloc] init];\nClipboardMacPromise* promise = [[ClipboardMacPromise alloc] initWithFileType:(NSString*)kUTTypeFileURL andFile:@\"dummy.txt\"];\n[items addObject:promise];\n[pboard writeObjects:items];\n</code></pre>\n\n<p>I have also tried <code>NSPasteboardItem</code> with <code>NSPasteboardItemDataProvider</code> where I setup a promise for content on <code>kUTITypeFileURL</code>.  It provided very similar entries on the pasteboard, but still no action when I paste in finder. Clipboard viewer will again trigger the provider fine when accessing the individual pasteboard entries. (<code>NSPasteboard</code>'s <code>declareTypes:owner:</code> has the same behavior)</p>\n\n<pre><code>@interface ClipboardMacPromise : NSPasteboardItem&lt;NSPasteboardItemDataProvider&gt;\n{\n    NSString* m_file;\n}\n@end\n@implementation ClipboardMacPromise\n- (id)initWithFile:(NSString*)file\n{\n    m_file = file;\n    id _self = [super init];\n    if (_self) {\n        [_self setDataProvider:_self forTypes:@[(NSString*)kPasteboardTypeFileURLPromise]];\n        [_self setString:(NSString*)kUTTypeFileURL forType:(NSString*)kPasteboardTypeFilePromiseContent];\n    }\n    return _self;\n}\n- (void)pasteboard:(NSPasteboard *)pasteboard item:(NSPasteboardItem *)item provideDataForType:(NSPasteboardType)type\n{\n    // we don't get here when we paste in Finder because\n    // Finder doesn't think there's anything to paste\n    // but using a clipboard viewer, we can force the promise to\n    // resolve and we do get here\n}\n@end\n\nNSPasteboard* pboard = [NSPasteboard generalPasteboard];\n[pboard clearContents];\nNSMutableArray* items = [[NSMutableArray alloc] init];\nClipboardMacPromise* promise = [[ClipboardMacPromise alloc] initWithFile:@\"file:///tmp/dummy.txt\"];\n[items addObject:promise];\n[pboard writeObjects:items];\n</code></pre>\n\n<p>And for completeness, here is my Carbon attempt since Pasteboard.h seems to detail how this should work in a copy/paste scenario... but it still does not provide Finder what it is looking for.  The generated clipboard entries look very similar between the three implementations.</p>\n\n<pre><code>OSStatus PasteboardPromiseKeeperProc(PasteboardRef pasteboard, PasteboardItemID item, CFStringRef flavorType, void * _Nullable context)\n{\n    // 6) The sender's promise callback for kPasteboardTypeFileURLPromise is called.\n    string s = \"dummy.txt\";\n    CFDataRef inData = CFDataCreate(kCFAllocatorDefault, (UInt8*)s.c_str(), s.size());\n    PasteboardPutItemFlavor(pasteboard, item, flavorType, inData, 0);\n    return noErr;\n}\n\nPasteboardRef p = NULL;\nPasteboardCreate(kPasteboardClipboard, &amp;p);\nPasteboardClear(p);\nPasteboardSetPromiseKeeper(p, &amp;PasteboardPromiseKeeperProc, this);\n\n// 1) The sender promises kPasteboardTypeFileURLPromise for a file yet to be created.\nPasteboardPutItemFlavor(p, (PasteboardItemID)1, kPasteboardTypeFileURLPromise, kPasteboardPromisedData, 0);\n// 2) The sender adds kPasteboardTypeFilePromiseContent containing the UTI describing the file's content.\nPasteboardPutItemFlavor(p, (PasteboardItemID)2, kPasteboardTypeFilePromiseContent,CFStringCreateExternalRepresentation(NULL, kUTTypeFileURL, kCFStringEncodingUTF8, 0), 0);\n</code></pre>\n\n<p>It really seems that there is a certain UTI that Finder is looking for on the pasteboard, and I don't have it.  If I put a <code>kUTTypeFileURL</code> directly on the clipboard, it appears that finder actually checks for the existence of the file (ie. triggers Catalina's Desktop access prompt) before offering it to paste.</p>\n\n<p>Does anyone know if or how file promises can be provided to Finder through Copy/Paste instead of Drag-and-Drop?</p>\n"}, {"tags": ["objective-c", "cocoa", "nstableview", "nsscrollview"], "comments": [{"owner": {"reputation": 1200, "user_id": 942165, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/IIKr3.jpg?s=128&g=1", "display_name": "Alfonso Tesauro", "link": "https://stackoverflow.com/users/942165/alfonso-tesauro"}, "edited": false, "score": 0, "creation_date": 1573838583, "post_id": 58881399, "comment_id": 104030953, "body": "Thanks for the edit rmaddy"}], "answers": [{"tags": [], "owner": {"reputation": 1200, "user_id": 942165, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/IIKr3.jpg?s=128&g=1", "display_name": "Alfonso Tesauro", "link": "https://stackoverflow.com/users/942165/alfonso-tesauro"}, "is_accepted": false, "score": 0, "last_activity_date": 1573839336, "creation_date": 1573839336, "answer_id": 58882084, "question_id": 58881399, "link": "https://stackoverflow.com/questions/58881399/i-have-two-nsscrollviews-configured-to-scroll-in-sync-my-problem-is-that-the-en/58882084#58882084", "title": "I have two NSScrollViews configured to scroll in sync. My problem is that the enclosed table headers do not scroll horizontally. Any clue?", "body": "<p>I have found a solution that works and it is good for me for the moment until I implement code that keeps the column widths in sync too. The solution I have found is the following:</p>\n\n<p>In the Apple provided NSScrollView subclass, declare two IBOutlets referencing the left NSTableHeaderView and the right one. This is a bit tricky in Interface Builder since you have to create first the outlets in your interface like this:</p>\n\n<pre><code>@property (assign) IBOutlet NSTableHeaderView *leftOutLineHeaderView;\n@property (assign) IBOutlet NSTableHeaderView *rightOutLineHeaderView;\n</code></pre>\n\n<p>Then you open the interface file in a new window and connect the outlets starting from the circle in your interface file. Note that the opposite will not work, if you try to create the outlets automatically from IB that will not work.</p>\n\n<p>Then, I also need a flag to tell if it is the left or the right table, given that the two outlets will both be populated for both NSScrollViews. This is the flag in my interface file:</p>\n\n<pre><code>@property (assign) Boolean isLeftTable;\n</code></pre>\n\n<p>I set the flag immediately after setting the NSScrollViews in sync as Apple Suggests:</p>\n\n<pre><code>// This is Apple taken code:\n\nself.leftScrollView.setSynchronized(self.rightScrollView)\nself.rightScrollView.setSynchronized(self.leftScrollView)\n\n// Here I set the flag to the two NSScrollViews:\n\nself.leftScrollView.isLeftTable = true\nself.rightScrollView.isLeftTable = false\n</code></pre>\n\n<p>The preparation is finished. Now, in the synchronizedViewContentBoundsDidChange method of the example, after:</p>\n\n<pre><code>[[self contentView] scrollToPoint:newOffset];\n</code></pre>\n\n<p>I have inserted this:</p>\n\n<pre><code>if (!self.isLeftTable) {\n\n        NSRect currentRightHeaderRect = self.rightOutLineHeaderView.frame;\n\n        currentRightHeaderRect.origin.x = -changedBoundsOrigin.x;\n\n        self.rightOutLineHeaderView.frame = currentRightHeaderRect;\n\n    } else {\n\n        NSRect currentLeftHeaderRect = self.leftOutLineHeaderView.frame;\n\n        currentLeftHeaderRect.origin.x = -changedBoundsOrigin.x;\n\n\n        self.leftOutLineHeaderView.frame = currentLeftHeaderRect;\n\n }\n</code></pre>\n\n<p>It works for the moment, although it needs some testing and probably refinements. Thanks a lot.</p>\n"}], "owner": {"reputation": 1200, "user_id": 942165, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/IIKr3.jpg?s=128&g=1", "display_name": "Alfonso Tesauro", "link": "https://stackoverflow.com/users/942165/alfonso-tesauro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573839336, "creation_date": 1573836496, "last_edit_date": 1573836741, "question_id": 58881399, "link": "https://stackoverflow.com/questions/58881399/i-have-two-nsscrollviews-configured-to-scroll-in-sync-my-problem-is-that-the-en", "title": "I have two NSScrollViews configured to scroll in sync. My problem is that the enclosed table headers do not scroll horizontally. Any clue?", "body": "<p>I am developing a Cocoa Application for macOS. I need two NSOutlineView to be in scroll sync. I have followed the well known <a href=\"https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/NSScrollViewGuide/Articles/SynchroScroll.html\" rel=\"nofollow noreferrer\">Apple example</a> and it works very well. I wanted to add horizontal scrolling to the code, so I added this line of code to the NSScrollView subclass:</p>\n\n<pre><code>newOffset.x = changedBoundsOrigin.x;\n</code></pre>\n\n<p>after:</p>\n\n<pre><code>newOffset.y = changedBoundsOrigin.y;\n</code></pre>\n\n<p>It works very well, assuming that, for the moment, I assume NSOutlineView width with all columns to be equal between the two NSOutlineViews. The problem is that when scrolling horizontally, the NSOutlineView headers of the other NSOutlineView do not sync, so they do not follow. Any ideas?</p>\n"}, {"tags": ["ios", "objective-c"], "comments": [{"owner": {"reputation": 4214, "user_id": 2648673, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AvV1Y.jpg?s=128&g=1", "display_name": "Marek H", "link": "https://stackoverflow.com/users/2648673/marek-h"}, "edited": false, "score": 0, "creation_date": 1573830857, "post_id": 58879010, "comment_id": 104026729, "body": "It crashes cause your tableView dataSource isn&#39;t in sync with insertion"}, {"owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "reply_to_user": {"reputation": 4214, "user_id": 2648673, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AvV1Y.jpg?s=128&g=1", "display_name": "Marek H", "link": "https://stackoverflow.com/users/2648673/marek-h"}, "edited": false, "score": 0, "creation_date": 1573831826, "post_id": 58879010, "comment_id": 104027297, "body": "@MarekH I&#39;m not sure I understand."}, {"owner": {"reputation": 4214, "user_id": 2648673, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AvV1Y.jpg?s=128&g=1", "display_name": "Marek H", "link": "https://stackoverflow.com/users/2648673/marek-h"}, "edited": false, "score": 0, "creation_date": 1573833041, "post_id": 58879010, "comment_id": 104028034, "body": "It&#39;s documented. Read <a href=\"https://developer.apple.com/documentation/uikit/views_and_controls/table_views/filling_a_table_with_data?language=objc\" rel=\"nofollow noreferrer\">developer.apple.com/documentation/uikit/views_and_controls/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1573830974, "post_id": 58879624, "comment_id": 104026799, "body": "So it seems to read and write fine but it doesn&#39;t populate the UITableView* _readview.. I don&#39;t know how calling reloadData will just insert data into the tableview.."}, {"owner": {"reputation": 229649, "user_id": 5044042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vjUNl.jpg?s=128&g=1", "display_name": "vadian", "link": "https://stackoverflow.com/users/5044042/vadian"}, "reply_to_user": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1573831959, "post_id": 58879624, "comment_id": 104027386, "body": "You have to adjust the table view datasource methods (<code>numberOfRowsInSection</code> and <code>cellForRowAtIndexPath</code>) and you have to connect the data source of the table view to the view controller (control drag form the table view to the controller and select <code>dataSource</code>). Yes, <code>reloadData</code> inserts the rows."}, {"owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1573832205, "post_id": 58879624, "comment_id": 104027531, "body": "Edited my question with implementing numberOfRowsInSection and cellForRowAtIndexPath I&#39;m not sure what you mean by connect the data of the table view to the view controller though.. Do you mean connecting it as a property?"}, {"owner": {"reputation": 229649, "user_id": 5044042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vjUNl.jpg?s=128&g=1", "display_name": "vadian", "link": "https://stackoverflow.com/users/5044042/vadian"}, "reply_to_user": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1573832641, "post_id": 58879624, "comment_id": 104027784, "body": "You have to change the interface to <code>@interface ViewController : UIViewController &lt;NSTableViewDataSource&gt;</code> and you can also set the delegate in code, in <code>viewDidLoad</code> add <code>self.readview.dataSource = self</code>"}, {"owner": {"reputation": 229649, "user_id": 5044042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vjUNl.jpg?s=128&g=1", "display_name": "vadian", "link": "https://stackoverflow.com/users/5044042/vadian"}, "reply_to_user": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1573833005, "post_id": 58879624, "comment_id": 104028009, "body": "I edited the question to insert the initial code. Without this code the question makes no sense for other readers."}, {"owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1573833560, "post_id": 58879624, "comment_id": 104028366, "body": "I made the adjustments you have said. But now it&#39;s crashing in my implementation of cellForRowAtIndexPath I&#39;m not sure to to implement that method."}, {"owner": {"reputation": 229649, "user_id": 5044042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vjUNl.jpg?s=128&g=1", "display_name": "vadian", "link": "https://stackoverflow.com/users/5044042/vadian"}, "reply_to_user": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1573833649, "post_id": 58879624, "comment_id": 104028422, "body": "Make sure that the <code>identifier</code> of the cell (<code>Cell</code>) is set properly in Interface Builder."}, {"owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1573833677, "post_id": 58879624, "comment_id": 104028445, "body": "So do I have to create an individual Cell on top of the UITableView? Because I don&#39;t see an identifier property on the Table itself"}, {"owner": {"reputation": 229649, "user_id": 5044042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vjUNl.jpg?s=128&g=1", "display_name": "vadian", "link": "https://stackoverflow.com/users/5044042/vadian"}, "reply_to_user": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1573833740, "post_id": 58879624, "comment_id": 104028485, "body": "Oops, I didn&#39;t see that. Drag a cell into the table view of the canvas and set the identifier."}, {"owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1574086089, "post_id": 58879624, "comment_id": 104094353, "body": "Can you revise your answer though? Because my question was about insering into a UITableView but your answer is about reading and writing data, it covers nothing about implementing UITableViewDataSource delegages"}, {"owner": {"reputation": 229649, "user_id": 5044042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vjUNl.jpg?s=128&g=1", "display_name": "vadian", "link": "https://stackoverflow.com/users/5044042/vadian"}, "reply_to_user": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "edited": false, "score": 0, "creation_date": 1574087428, "post_id": 58879624, "comment_id": 104095159, "body": "The datasource methods in your code are basically correct. As I said you have to set the identifier of the cell to <code>Cell</code> in Interface Builder. And it\u2019s bad practice to use the outlet as table view reference. Use always the given <code>tableView</code> parameter."}], "tags": [], "owner": {"reputation": 229649, "user_id": 5044042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vjUNl.jpg?s=128&g=1", "display_name": "vadian", "link": "https://stackoverflow.com/users/5044042/vadian"}, "is_accepted": true, "score": 1, "last_activity_date": 1573830695, "last_edit_date": 1573830695, "creation_date": 1573829978, "answer_id": 58879624, "question_id": 58879010, "link": "https://stackoverflow.com/questions/58879010/inserting-into-uitableview/58879624#58879624", "title": "Inserting into UITableView", "body": "<p>Sorry, but almost any line of the both methods is unusable.</p>\n\n<p>First of all you need an <code>NSMutableArray</code> for the data source.</p>\n\n<pre><code>@property (strong) NSMutableArray&lt;NSString *&gt; *items;\n</code></pre>\n\n<p>Then in <code>viewDidLoad</code> populate the array with your demo data</p>\n\n<pre><code>self.items = [NSMutableArray arrayWithArray: @[@\"hello world\"]];\n</code></pre>\n\n<p>Let's start with the save method. Serialize <code>items</code> as property list and save it to disk. In iOS you have to use the <code>NSFileManager</code> API to get the (current) documents folder.</p>\n\n<pre><code>- (IBAction)writeToFile:(id)sender {\n    NSURL *docURL = [[[NSFileManager defaultManager] URLForDirectory:NSDocumentDirectory\n                                                            inDomain:NSUserDomainMask\n                                                   appropriateForURL:nil\n                                                              create:NO\n                                                               error:nil] URLByAppendingPathComponent:@\"TestFile.plist\"];\n    NSError *error;\n    NSData *propertyListData = [NSPropertyListSerialization dataWithPropertyList:items\n                                                                          format:NSPropertyListXMLFormat_v1_0\n                                                                         options:0\n                                                                           error:&amp;error];\n    if (error) {\n        NSLog(@\"%@\", error);\n    } else {\n        [propertyListData writeToURL:docURL atomically:YES];\n    }\n}\n</code></pre>\n\n<p>The read method does the same in reverse order: Read the data, deserialize it to <code>NSMutableArray</code> and assign the result to the data source array. Then reload the table view.</p>\n\n<pre><code>- (IBAction)readFromFile:(id)sender {\n\n    NSURL *docURL = [[[NSFileManager defaultManager] URLForDirectory:NSDocumentDirectory\n                                                            inDomain:NSUserDomainMask\n                                                   appropriateForURL:nil\n                                                              create:NO\n                                                               error:nil] URLByAppendingPathComponent:@\"TestFile.plist\"];\n    NSData* propertyListData = [[NSData alloc] initWithContentsOfURL: docURL];\n    NSError *error;\n    self.items = (NSMutableArray *)[NSPropertyListSerialization propertyListWithData: propertyListData\n                                                                             options:NSPropertyListMutableContainersAndLeaves\n                                                                              format:NULL\n                                                                               error:nil];\n    if (error) {\n        NSLog(@\"%@\", error);\n    } else {\n        [_readview reloadData];\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2323, "user_id": 8350647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zJNHD.png?s=128&g=1", "display_name": "Nina", "link": "https://stackoverflow.com/users/8350647/nina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 58879624, "answer_count": 1, "score": 0, "last_activity_date": 1573833514, "creation_date": 1573827972, "last_edit_date": 1573833514, "question_id": 58879010, "link": "https://stackoverflow.com/questions/58879010/inserting-into-uitableview", "title": "Inserting into UITableView", "body": "<p>I\"m trying to populate a UITableView with contents of a file. Or at least that's my ultimate goal but for testing I just wanted to insert strings to test it out. I have a read and write button connected to my ViewController.h as both @propery and IBAction to implement the press and I have a UITableView property </p>\n\n<p>This is my implementation for the read and write button.</p>\n\n<pre><code>- (IBAction)readtofile:(id)sender {\n\n    [_readview beginUpdates];\n    NSString *docPath = [NSHomeDirectory() stringByAppendingPathComponent:@\"Documents/TestFile.txt\"];\n    NSString* data = [[NSString alloc] initWithContentsOfFile:docPath encoding:NSUTF8StringEncoding error:NULL];\n\n    NSArray* arr = [NSArray arrayWithObjects:data,data,data, nil];\n    [_readview insertRowsAtIndexPaths:arr withRowAnimation:UITableViewRowAnimationTop];\n    [_readview endUpdates];\n\n}\n\n- (IBAction)writetofile:(id)sender {\n    NSString *docPath = [NSHomeDirectory() stringByAppendingPathComponent:@\"Documents/TestFile.txt\"];\n\n    NSString* data = @\"hello world\";\n    [data writeToFile:docPath\n    atomically:YES\n      encoding:NSUTF8StringEncoding\n         error:NULL];\n}\n</code></pre>\n\n<p>EDIT: Here's the updated code with Vadian's answer. But the UITableView still isn't being populated \n<code>ViewController.h</code></p>\n\n<pre><code>#import &lt;UIKit/UIKit.h&gt;\n\n@interface ViewController : UIViewController &lt;UITableViewDataSource&gt;\n@property (weak, nonatomic) IBOutlet UITableView *readview;\n@property (strong) NSMutableArray&lt;NSString *&gt; *items;\n- (IBAction)readFromFile:(id)sender;\n- (IBAction)writeToFile:(id)sender;\n\n\n@end\n</code></pre>\n\n<p><code>ViewController.m</code></p>\n\n<pre><code>#import \"ViewController.h\"\n\n@interface ViewController (){\n}\n@end\n\n@implementation ViewController\n\n- (void)viewDidLoad {\n    [super viewDidLoad];\n    // Do any additional setup after loading the view.\n    self.items = @[@\"hello world\",@\"good bye world\"];\n    _readview.dataSource = self;\n}\n\n- (IBAction)readFromFile:(id)sender {\n    NSURL *docURL = [[[NSFileManager defaultManager] URLForDirectory:NSDocumentDirectory\n                                                             inDomain:NSUserDomainMask\n                                                    appropriateForURL:nil\n                                                               create:NO\n                                                                error:nil] URLByAppendingPathComponent:@\"TestFile.plist\"];\n     NSData* propertyListData = [[NSData alloc] initWithContentsOfURL: docURL];\n     NSError *error;\n     self.items = (NSMutableArray *)[NSPropertyListSerialization propertyListWithData: propertyListData\n                                                                              options:NSPropertyListMutableContainersAndLeaves\n                                                                               format:NULL\n                                                                                error:nil];\n     if (error) {\n         NSLog(@\"%@\", error);\n     } else {\n         [_readview reloadData];\n     }\n}\n\n- (IBAction)writeToFile:(id)sender {\n    NSURL *docURL = [[[NSFileManager defaultManager] URLForDirectory:NSDocumentDirectory\n                                                             inDomain:NSUserDomainMask\n                                                    appropriateForURL:nil\n                                                               create:NO\n                                                                error:nil] URLByAppendingPathComponent:@\"TestFile.plist\"];\n     NSError *error;\n     NSData *propertyListData = [NSPropertyListSerialization dataWithPropertyList:self.items\n                                                                           format:NSPropertyListXMLFormat_v1_0\n                                                                          options:0\n                                                                            error:&amp;error];\n     if (error) {\n         NSLog(@\"%@\", error);\n     } else {\n         [propertyListData writeToURL:docURL atomically:YES];\n     }\n}\n\n- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView\n{\n   return 1;\n}\n\n- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section\n{\n    return self.items.count;\n}\n\n\n- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath\n{\n    UITableViewCell* cell = [_readview dequeueReusableCellWithIdentifier:@\"Cell\" forIndexPath:indexPath];\n    cell.textLabel.text = self.items[indexPath.row\n                                  ];\n    return cell;\n}\n@end\n</code></pre>\n\n<p>It's crashing inside the cellForRowAtIndexPath method. <code>List[2558:545971] *** Assertion failure in -[UITableView _dequeueReusableCellWithIdentifier:forIndexPath:usingPresentationValues:],</code> So I'm not sure how to implement that method properly.\nThis is my UI layout. \n<a href=\"https://i.stack.imgur.com/sHp1p.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sHp1p.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ios", "objective-c"], "comments": [{"owner": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 1, "creation_date": 1573822917, "post_id": 58876489, "comment_id": 104022582, "body": "It&#39;s because <code>self.window.rootViewController</code> is navigation controller."}, {"owner": {"reputation": 141, "user_id": 3150731, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/da6f3e764b7af27529c9be9685122ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jerrin", "link": "https://stackoverflow.com/users/3150731/jerrin"}, "edited": false, "score": 0, "creation_date": 1573885154, "post_id": 58876489, "comment_id": 104042494, "body": "show more of your code, as to what is set as root in your window etc. i&#39;m guessing your referenced viewController is not what your expecting so there is a class mismatch."}], "owner": {"reputation": 3, "user_id": 12378314, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA86IzmESUomwzMtbYgDJKIz_9MnnLZr0KgBEz_2w=k-s128", "display_name": "shiny john", "link": "https://stackoverflow.com/users/12378314/shiny-john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573830210, "creation_date": 1573818684, "last_edit_date": 1573830210, "question_id": 58876489, "link": "https://stackoverflow.com/questions/58876489/uinavigationcontroller-selectedviewcontroller-unrecognized-selector-sent-to", "title": "-[UINavigationController selectedViewController]: unrecognized selector sent to instance 0x105ca6000", "body": "<pre><code>- (BOOL)tabBarIsVisible {\n   UIViewController *vc =  ((MSTabBarController*)self.window.rootViewController).selectedViewController;\n   return self.tabBarC.tabBar.frame.origin.y &lt; CGRectGetMaxY(vc.view.frame);\n}\n</code></pre>\n\n<p>I am adding this in app delegate and checking when app enters background.</p>\n"}, {"tags": ["ios", "objective-c", "xcode", "cashapelayer", "caanimation"], "comments": [{"owner": {"reputation": 11593, "user_id": 8090893, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/76d11d82f4b09abd8412c30342b4e71e?s=128&d=identicon&r=PG&f=1", "display_name": "iOS", "link": "https://stackoverflow.com/users/8090893/ios"}, "edited": false, "score": 0, "creation_date": 1573817963, "post_id": 58876196, "comment_id": 104020020, "body": "@ Alladinian, yes you are right but, it&#39;s not stopped at <b>0.56</b>, after 10sec&#39;s it&#39;s creating complete circle."}], "answers": [{"comments": [{"owner": {"reputation": 11593, "user_id": 8090893, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/76d11d82f4b09abd8412c30342b4e71e?s=128&d=identicon&r=PG&f=1", "display_name": "iOS", "link": "https://stackoverflow.com/users/8090893/ios"}, "edited": false, "score": 0, "creation_date": 1573818038, "post_id": 58876291, "comment_id": 104020056, "body": "already i tried but after 10sec its creating complete circle. Only animation will be stopped at <b>0.56</b>."}, {"owner": {"reputation": 11593, "user_id": 8090893, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/76d11d82f4b09abd8412c30342b4e71e?s=128&d=identicon&r=PG&f=1", "display_name": "iOS", "link": "https://stackoverflow.com/users/8090893/ios"}, "edited": false, "score": 0, "creation_date": 1573818070, "post_id": 58876291, "comment_id": 104020080, "body": "I want only that <b>0.56</b> circle"}, {"owner": {"reputation": 32121, "user_id": 199017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e40c498202a2925614073712bfe7e9fb?s=128&d=identicon&r=PG", "display_name": "Alladinian", "link": "https://stackoverflow.com/users/199017/alladinian"}, "reply_to_user": {"reputation": 11593, "user_id": 8090893, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/76d11d82f4b09abd8412c30342b4e71e?s=128&d=identicon&r=PG&f=1", "display_name": "iOS", "link": "https://stackoverflow.com/users/8090893/ios"}, "edited": false, "score": 0, "creation_date": 1573818128, "post_id": 58876291, "comment_id": 104020105, "body": "Please see the linked answer for this"}, {"owner": {"reputation": 11593, "user_id": 8090893, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/76d11d82f4b09abd8412c30342b4e71e?s=128&d=identicon&r=PG&f=1", "display_name": "iOS", "link": "https://stackoverflow.com/users/8090893/ios"}, "edited": false, "score": 0, "creation_date": 1573819212, "post_id": 58876291, "comment_id": 104020639, "body": "I added this single line to my above code <code>animation.fillMode = kCAFillModeForwards;</code> . It&#39;s working. Thank you."}], "tags": [], "owner": {"reputation": 32121, "user_id": 199017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e40c498202a2925614073712bfe7e9fb?s=128&d=identicon&r=PG", "display_name": "Alladinian", "link": "https://stackoverflow.com/users/199017/alladinian"}, "is_accepted": true, "score": 3, "last_activity_date": 1573818467, "last_edit_date": 1573818467, "creation_date": 1573817940, "answer_id": 58876291, "question_id": 58876196, "link": "https://stackoverflow.com/questions/58876196/create-coloured-circle-based-on-value360-or-percentage100/58876291#58876291", "title": "Create coloured circle based on value(360) or percentage(100%)", "body": "<p>That means that your <code>toValue</code> should match your percentage. </p>\n\n<p>In your case, <code>animation.toValue = @(0.56);</code> would end the stroke at 56% of the circle (<code>0...1</code> range). </p>\n\n<p><a href=\"https://stackoverflow.com/questions/11515647/objective-c-cabasicanimation-applying-changes-after-animation\">See this answer</a> for information about keeping the final animated value after completion.</p>\n\n<p>TLDR: You have to also update the model layer.</p>\n\n<pre><code>circle.strokeStart = 0;\ncircle.strokeEnd   = 0.56; // Your target value\n...\n// Your animation\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 787, "user_id": 7851805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1406efff90090b78f210c54cc9706536?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/7851805/nick"}, "is_accepted": false, "score": 0, "last_activity_date": 1573818828, "creation_date": 1573818828, "answer_id": 58876519, "question_id": 58876196, "link": "https://stackoverflow.com/questions/58876196/create-coloured-circle-based-on-value360-or-percentage100/58876519#58876519", "title": "Create coloured circle based on value(360) or percentage(100%)", "body": "<p>Check out <a href=\"https://github.com/stablekernel/STKSpinnerView\" rel=\"nofollow noreferrer\">this</a> <strong>circular progress bar</strong> and set colour as you want to set at particular position.</p>\n"}], "owner": {"reputation": 11593, "user_id": 8090893, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/76d11d82f4b09abd8412c30342b4e71e?s=128&d=identicon&r=PG&f=1", "display_name": "iOS", "link": "https://stackoverflow.com/users/8090893/ios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 58876291, "answer_count": 2, "score": 0, "last_activity_date": 1573818828, "creation_date": 1573817546, "question_id": 58876196, "link": "https://stackoverflow.com/questions/58876196/create-coloured-circle-based-on-value360-or-percentage100", "title": "Create coloured circle based on value(360) or percentage(100%)", "body": "<p>This code creating a complete circle but I want to create a circle based on value either 360 or percentage 100%. IF percentage is 56% I want 56% circle. Like this based on percentage/value, I want circle.</p>\n\n<pre><code>CAShapeLayer *circle = [CAShapeLayer layer];\ncircle.path = [UIBezierPath bezierPathWithArcCenter:CGPointMake(29, 29) radius:27 startAngle:-M_PI_2 endAngle:2 * M_PI - M_PI_2 clockwise:YES].CGPath;\ncircle.fillColor = [UIColor clearColor].CGColor;\ncircle.strokeColor = [UIColor greenColor].CGColor;\ncircle.lineWidth = 4;\n\nCABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@\"strokeEnd\"];\nanimation.duration = 10;\nanimation.removedOnCompletion = NO;\nanimation.fromValue = @(0);\nanimation.toValue = @(1);\nanimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];\n[circle addAnimation:animation forKey:@\"drawCircleAnimation\"];\n\n[_colouredCircle.layer.sublayers makeObjectsPerformSelector:@selector(removeFromSuperlayer)];\n[_colouredCircle.layer addSublayer:circle];\n</code></pre>\n"}, {"tags": ["ios", "objective-c", "swift", "xcode"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11426590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0361d023d864405c0a1c4c0cd547d6c9?s=128&d=identicon&r=PG&f=1", "display_name": "\u041f\u0451\u0442\u0440 \u0418\u0432\u0430\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/11426590/%d0%9f%d1%91%d1%82%d1%80-%d0%98%d0%b2%d0%b0%d0%bd%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1573813269, "post_id": 58873883, "comment_id": 104017498, "body": "Thanks a lot, disabled this option and everything compiled. Not quite understood just how the published application can be affected by the lack of bitcode.  What does it mean: ...to take advantage of hardware, software or compiler changes... In Apple commentary. :)"}, {"owner": {"reputation": 1, "user_id": 11426590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0361d023d864405c0a1c4c0cd547d6c9?s=128&d=identicon&r=PG&f=1", "display_name": "\u041f\u0451\u0442\u0440 \u0418\u0432\u0430\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/11426590/%d0%9f%d1%91%d1%82%d1%80-%d0%98%d0%b2%d0%b0%d0%bd%d0%be%d0%b2"}, "edited": false, "score": 1, "creation_date": 1573815328, "post_id": 58873883, "comment_id": 104018669, "body": "Found a useful discussion on bitcode: <a href=\"https://stackoverflow.com/questions/30722606/what-does-enable-bitcode-do-in-xcode-7\" title=\"what does enable bitcode do in xcode 7\">stackoverflow.com/questions/30722606/&hellip;</a>"}], "tags": [], "owner": {"reputation": 719, "user_id": 3146021, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5de1b244ab440a3227f3a04f10f42e8a?s=128&d=identicon&r=PG", "display_name": "Trai Nguyen", "link": "https://stackoverflow.com/users/3146021/trai-nguyen"}, "is_accepted": true, "score": 0, "last_activity_date": 1573809967, "creation_date": 1573809967, "answer_id": 58873883, "question_id": 58873642, "link": "https://stackoverflow.com/questions/58873642/when-publishing-a-project-swift-4-2-in-the-appstore-an-error-occurs-when-link/58873883#58873883", "title": "When publishing a project (swift 4.2) in the AppStore, an error occurs when linking the libPrinterSDK library.a", "body": "<p>Im not sure your project has turn Enable Bitcode off yet, if not, try to set No like this image below and Archive project again.\nIf it doesn't work, you can refer <a href=\"https://stackoverflow.com/questions/31233395/ios-library-to-bitcode\">here</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/1FjGz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1FjGz.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1, "user_id": 11426590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0361d023d864405c0a1c4c0cd547d6c9?s=128&d=identicon&r=PG&f=1", "display_name": "\u041f\u0451\u0442\u0440 \u0418\u0432\u0430\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/11426590/%d0%9f%d1%91%d1%82%d1%80-%d0%98%d0%b2%d0%b0%d0%bd%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 58873883, "answer_count": 1, "score": 0, "last_activity_date": 1573820163, "creation_date": 1573809095, "last_edit_date": 1573820163, "question_id": 58873642, "link": "https://stackoverflow.com/questions/58873642/when-publishing-a-project-swift-4-2-in-the-appstore-an-error-occurs-when-link", "title": "When publishing a project (swift 4.2) in the AppStore, an error occurs when linking the libPrinterSDK library.a", "body": "<p>All kind time of day. The project on Swift uses the SDK for blueTouth printer Mini Thermal Printer POS-5805DD. The libPrinterSDK library (included with the printer) has been added to the root of the project.a and the PrinterSDK header file.h, header-file is connected via bridge, when you run the project on a real device-everything works correctly, no errors occur. But when you try to build a project to upload to the AppStore, at the very end when linovke libprintersdk library.a an error appears:</p>\n\n<blockquote>\n  <p>ld: bitcode bundle could not be generated because\n  '/Users/ivan/Documents/MyProject/PrinterSDK/libPrinterSDK.a\n  (GCDAsyncSocket.o)' was built without full bitcode. All object files\n  and libraries for bitcode must be generated from Xcode Archive or\n  Install build file\n  '/Users/ivan/Documents/MyProject/PrinterSDK/libPrinterSDK.a' for\n  architecture armv7\n  clang: error: linker command failed with exit code 1 (use -v to see invocation)</p>\n</blockquote>\n\n<p>If there is any experience of building a project with libPrinterSDK files.a and PrinterSDK.h, I would really appreciate any help. Thanks.</p>\n"}, {"tags": ["ios", "objective-c", "crash", "google-fabric"], "answers": [{"comments": [{"owner": {"reputation": 29080, "user_id": 1084174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/BsASP.png?s=128&g=1", "display_name": "Sazzad Hissain Khan", "link": "https://stackoverflow.com/users/1084174/sazzad-hissain-khan"}, "edited": false, "score": 0, "creation_date": 1574815974, "post_id": 59059632, "comment_id": 104362272, "body": "My question was about the reason of device not supported exception."}], "tags": [], "owner": {"reputation": 122, "user_id": 7216254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab63f9611b79d7b23b35542f3fe7e96?s=128&d=identicon&r=PG&f=1", "display_name": "Jing Li", "link": "https://stackoverflow.com/users/7216254/jing-li"}, "is_accepted": false, "score": -1, "last_activity_date": 1574803909, "creation_date": 1574803909, "answer_id": 59059632, "question_id": 58872849, "link": "https://stackoverflow.com/questions/58872849/how-to-solve-google-fabrics-crash-fatal-exception-devicenotsupported/59059632#59059632", "title": "How to solve Google Fabrics crash - Fatal Exception: DeviceNotSupported?", "body": "<p>When a Objective-C or C++ exception goes uncaught, Crashlytics records some information about it before the app is allowed to terminate. When this happens, the CLSProcessRecordAllThreads function must be run on the thread that threw the exception. This means that in the case of an exception, the \u201ccrashing\u201d thread will always look like it is running Crashlytics code. This is normal, and is just an artifact of how Crashlytics capture and present the stack traces at the time of exception.</p>\n\n<p>Reference from Fabric doc <a href=\"http://%20When%20a%20Objective-C%20or%20C++%20exception%20goes%20uncaught,%20Crashlytics%20records%20some%20information%20about%20it%20before%20the%20app%20is%20allowed%20to%20terminate.%20When%20this%20happens,%20the%20CLSProcessRecordAllThreads%20function%20must%20be%20run%20on%20the%20thread%20that%20threw%20the%20exception.%20This%20means%20that%20in%20the%20case%20of%20an%20exception,%20the%20%E2%80%9Ccrashing%E2%80%9D%20thread%20will%20always%20look%20like%20it%20is%20running%20Crashlytics%20code.%20This%20is%20normal,%20and%20is%20just%20an%20artifact%20of%20how%20we%20capture%20and%20present%20the%20stack%20traces%20at%20the%20time%20of%20exception.\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 29080, "user_id": 1084174, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/BsASP.png?s=128&g=1", "display_name": "Sazzad Hissain Khan", "link": "https://stackoverflow.com/users/1084174/sazzad-hissain-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577874488, "creation_date": 1573805810, "last_edit_date": 1577874488, "question_id": 58872849, "link": "https://stackoverflow.com/questions/58872849/how-to-solve-google-fabrics-crash-fatal-exception-devicenotsupported", "title": "How to solve Google Fabrics crash - Fatal Exception: DeviceNotSupported?", "body": "<p>I keep getting crashes on <code>Fabric</code> for my iOS App.</p>\n\n<blockquote>\n  <p>Fatal Exception: DeviceNotSupportedException: Device Not Supported</p>\n</blockquote>\n\n<p>At the signature of the function,</p>\n\n<pre><code>+(NSString*) IPHONE_OS_VERSION // Fabric pointed lines\n{\n    // code\n}\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/9wQct.png\" width=\"400\"></p>\n\n<p>I never heard of <code>DeviceNotSupportedException</code>. What is the crash for? how to fix it?</p>\n"}, {"tags": ["ios", "objective-c", "iphone", "xcode"], "comments": [{"owner": {"reputation": 25316, "user_id": 6163022, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ygrqd.jpg?s=128&g=1", "display_name": "Ketan Parmar", "link": "https://stackoverflow.com/users/6163022/ketan-parmar"}, "edited": false, "score": 0, "creation_date": 1573799233, "post_id": 58871429, "comment_id": 104011082, "body": "do you want to remove padding from right side of the cart icon?"}, {"owner": {"reputation": 21, "user_id": 5751026, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CrLgEoyi_AY/AAAAAAAAAAI/AAAAAAAAC5Q/sGOu0iIRoOQ/photo.jpg?sz=128", "display_name": "Sajjad Zafar", "link": "https://stackoverflow.com/users/5751026/sajjad-zafar"}, "reply_to_user": {"reputation": 25316, "user_id": 6163022, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ygrqd.jpg?s=128&g=1", "display_name": "Ketan Parmar", "link": "https://stackoverflow.com/users/6163022/ketan-parmar"}, "edited": false, "score": 0, "creation_date": 1574933563, "post_id": 58871429, "comment_id": 104406895, "body": "yes, right side of cart icon and left side of logo"}, {"owner": {"reputation": 25316, "user_id": 6163022, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ygrqd.jpg?s=128&g=1", "display_name": "Ketan Parmar", "link": "https://stackoverflow.com/users/6163022/ketan-parmar"}, "edited": false, "score": 0, "creation_date": 1574950139, "post_id": 58871429, "comment_id": 104415945, "body": "and these are bar button items? If yes then check by setting the background color of that button. You can create your custom bar button using any <code>UIView</code> sub-class like UIButton! And you can set content alignment in the button. In short, create a bar button using the normal button(having content left aligned or right)!"}], "owner": {"reputation": 21, "user_id": 5751026, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CrLgEoyi_AY/AAAAAAAAAAI/AAAAAAAAC5Q/sGOu0iIRoOQ/photo.jpg?sz=128", "display_name": "Sajjad Zafar", "link": "https://stackoverflow.com/users/5751026/sajjad-zafar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 345, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573799121, "creation_date": 1573799121, "question_id": 58871429, "link": "https://stackoverflow.com/questions/58871429/navigation-bar-layout-margins-in-ios-13-with-xcode-11-2-1", "title": "Navigation bar layout margins in ios 13 with xcode 11.2.1", "body": "<p>How can I reduce the margins of left and right of navigation bar in ios 13.<a href=\"https://i.stack.imgur.com/S9G2W.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/S9G2W.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>when we set layout margins to subviews of navigation bar it crashed the app. But below mentioned code is working fine in ios 12 with xcode 10.3.</p>\n\n<p><strong><em>subclass of navigation bar</em></strong></p>\n\n<pre><code>for (UIView *view in self.subviews) {\n    view.layoutMargins = UIEdgeInsetsMake(0, 8, 0, 8);\n}\n</code></pre>\n"}, {"tags": ["ios", "objective-c", "iphone-sdk-3.0", "printers", "epson"], "answers": [{"comments": [{"owner": {"reputation": 3364, "user_id": 7508700, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ms4Mr.png?s=128&g=1", "display_name": "David Buck", "link": "https://stackoverflow.com/users/7508700/david-buck"}, "edited": false, "score": 0, "creation_date": 1575013857, "post_id": 59100661, "comment_id": 104433782, "body": "If you have a different but related question, then <a href=\"https://stackoverflow.com/questions/ask\">ask it</a> (reference this one if it will help provide context). If you&#39;re interested in this specific question, you can <a href=\"https://stackoverflow.com/help/privileges/vote-up\">upvote it</a>, leave a <a href=\"https://stackoverflow.com/help/privileges/comment\">comment</a>, or start a <a href=\"https://stackoverflow.com/help/privileges/set-bounties\">bounty</a> once you have enough <a href=\"https://stackoverflow.com/help/whats-reputation\">reputation</a>"}], "tags": [], "owner": {"reputation": 1, "user_id": 12455404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f5676fa07e9aa1cc256ef0b02dd5cd?s=128&d=identicon&r=PG&f=1", "display_name": "k.bour", "link": "https://stackoverflow.com/users/12455404/k-bour"}, "is_accepted": false, "score": 0, "last_activity_date": 1575013354, "creation_date": 1575013354, "answer_id": 59100661, "question_id": 58871008, "link": "https://stackoverflow.com/questions/58871008/how-i-can-set-the-auto-print-symenteneously-3-4-prints-on-epson-tm-m30-printer/59100661#59100661", "title": "How i can set the auto print symenteneously 3-4 prints on epson tm-m30 printer", "body": "<p>I fix this issue by a queue that regulates the execution of operations using the NSOperationQueue with maxConcurrentOperationCount = 1.</p>\n\n<p>but this solution make a delay between printing operations. so now, I search solution to print (multiple) without any delay. \nAny suggestions ? Regards.</p>\n"}], "owner": {"reputation": 729, "user_id": 3683148, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001140374268/picture?type=large", "display_name": "Kaushik Movaliya", "link": "https://stackoverflow.com/users/3683148/kaushik-movaliya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575013354, "creation_date": 1573796750, "last_edit_date": 1573801812, "question_id": 58871008, "link": "https://stackoverflow.com/questions/58871008/how-i-can-set-the-auto-print-symenteneously-3-4-prints-on-epson-tm-m30-printer", "title": "How i can set the auto print symenteneously 3-4 prints on epson tm-m30 printer", "body": "<p>How I can set the auto print symenteneously 3-4 prints on Epson TM-m30 printer.\nHere is my code please check and provide the solution.\nif I remove the time delay this code will break and if I set the time delay then it's working...!!</p>\n\n<p>It's continuously connect &amp; disconnect the printer.\nthis is the common process for the do connection and print the receipt.</p>\n\n<p>1) initializing </p>\n\n<p>2) connecting</p>\n\n<p>3) printing</p>\n\n<p>4) disconnecting &amp; clear buffer</p>\n\n<p>I have noticed that one printer can't connect with multiple Ipads or multiple devices, And our requirement is that we have to connect with multiple devices.</p>\n\n<p>So, is there any way to set a queue to manage multiple requests?</p>\n\n<pre><code>NSArray *arr=[[NSArray alloc]initWithObjects:@\"1\",@\"2\", nil];\n                    [arr enumerateObjectsUsingBlock:^(id  _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop)\n                    {\n                        if (idx==0)\n                        {\n                            [self runPrintReceiptSequence];\n                        }\n                        else\n                        {\n                            [self performSelector:@selector(runPrintReceiptSequence) withObject:nil afterDelay:1.5];\n                        }\n                    }];\n\n        - (BOOL)runPrintReceiptSequence\n        {\n            _textWarnings.text = @\"\";\n\n            if (![self initializeObject]) {\n                return NO;\n            }\n\n            if (![self createReceiptData]) {\n                [self finalizeObject];\n                return NO;\n            }\n\n            if (![self printData]) {\n                [self finalizeObject];\n                return NO;\n            }\n\n            return YES;\n        }\n\n    - (void) onPtrReceive:(Epos2Printer *)printerObj code:(int)code status:(Epos2PrinterStatusInfo *)status printJobId:(NSString *)printJobId\n    {\n        [ShowMsg showResult:code errMsg:[self makeErrorMessage:status]];\n\n        [self dispPrinterWarnings:status];\n        [self updateButtonState:YES];\n\n        [self performSelectorInBackground:@selector(disconnectPrinter) withObject:nil];\n    }\n</code></pre>\n"}, {"tags": ["ios", "objective-c", "uitableview", "nsarray", "nsdictionary"], "comments": [{"owner": {"reputation": 17713, "user_id": 1801544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CcSB.jpg?s=128&g=1", "display_name": "Larme", "link": "https://stackoverflow.com/users/1801544/larme"}, "edited": false, "score": 1, "creation_date": 1573808734, "post_id": 58870066, "comment_id": 104014863, "body": "Use a custom class to represent that, a class with a property weekNumber, a property total, an array of purchases (which would have a property price, an property id, another one place and a NSDate one)."}, {"owner": {"reputation": 57, "user_id": 11400924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edef9bc79800f8570e5ae4d207283266?s=128&d=identicon&r=PG&f=1", "display_name": "Excalibur", "link": "https://stackoverflow.com/users/11400924/excalibur"}, "reply_to_user": {"reputation": 17713, "user_id": 1801544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CcSB.jpg?s=128&g=1", "display_name": "Larme", "link": "https://stackoverflow.com/users/1801544/larme"}, "edited": false, "score": 0, "creation_date": 1573835325, "post_id": 58870066, "comment_id": 104029376, "body": "@Larme I didn&#39;t even think of that and I&#39;ll give it a shot. Thanks!"}, {"owner": {"reputation": 57, "user_id": 11400924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edef9bc79800f8570e5ae4d207283266?s=128&d=identicon&r=PG&f=1", "display_name": "Excalibur", "link": "https://stackoverflow.com/users/11400924/excalibur"}, "reply_to_user": {"reputation": 17713, "user_id": 1801544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CcSB.jpg?s=128&g=1", "display_name": "Larme", "link": "https://stackoverflow.com/users/1801544/larme"}, "edited": false, "score": 0, "creation_date": 1573930880, "post_id": 58870066, "comment_id": 104053252, "body": "@Larme How would you go about creating this custom class and implementing it? I am still trying to learn Obj-C but I have previous experience in other languages. Are there any examples you can provide on how to accomplish this?"}], "owner": {"reputation": 57, "user_id": 11400924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edef9bc79800f8570e5ae4d207283266?s=128&d=identicon&r=PG&f=1", "display_name": "Excalibur", "link": "https://stackoverflow.com/users/11400924/excalibur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573792499, "creation_date": 1573789763, "last_edit_date": 1573792499, "question_id": 58870066, "link": "https://stackoverflow.com/questions/58870066/reset-value-by-uitableview-sections", "title": "Reset value by UITableView sections", "body": "<p>I am building a personal budget app that tracks my purchases. I have an <code>NSDictionary</code> of <code>NSArray</code> that looks like this:</p>\n\n<pre><code>{\n    46 =    (\n                {\n            DATE = \"11/14/2019\";\n            ID = 21;\n            PLACE = Kroger;\n            PRICE = \"23.32\";\n        },\n                {\n            DATE = \"11/14/2019\";\n            ID = 22;\n            PLACE = Walmart;\n            PRICE = \"12.54\";\n        }\n    );\n    47 =     (\n                {\n            DATE = \"11/18/2019\";\n            ID = 23;\n            PLACE = Cinco;\n            PRICE = \"65.32\";\n        }\n    );\n}\n</code></pre>\n\n<p>The keys in the <code>NSDictionary</code> are determined by <code>strftime</code> using <code>%W</code>. Basically I have a set limit I can spend per week (i.e. 190) and I want in each <code>titleForHeaderInSection:</code> to have a total value that is determined by each field's <code>PRICE</code> in each key.\n<br><br>\nI currently have the following on the app:\n<br><br>\n<a href=\"https://i.stack.imgur.com/PAGGv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PAGGv.png\" alt=\"App\"></a></p>\n\n<p>The following calculate the <code>NSDictionary</code> listed above along with the total value:\n<br>\nNote: arrFoodInfo is a <code>NSDictionary</code> of <em>just</em> the entries without the week numbers</p>\n\n<pre><code>for (NSDictionary *dict in self.arrFoodInfo) {\n        NSString *date = [dict objectForKey:@\"DATE\"];\n        [totalPrices addObject:[dict objectForKey:@\"PRICE\"]];\n\n        for (NSString *price in totalPrices) {\n            if ([totalPrices containsObject:price]) {\n                _sumPrices += [price floatValue]; // Calculates total value\n                [totalPrices removeObject:price];\n            }\n        }\n\n        NSDateFormatter *SDF = [[NSDateFormatter alloc]\n                                 init];\n        [SDF setDateStyle:NSDateFormatterMediumStyle];\n        [SDF setDateFormat:@\"MM/dd/yyyy\"];\n        NSDate *convertedDate = [SDF dateFromString:date];\n\n        NSDateComponents *dateComponents = [calendar components:NSCalendarUnitYear | NSCalendarUnitWeekOfYear fromDate:convertedDate];\n\n        NSInteger week = dateComponents.weekOfYear;\n        NSInteger index = week;\n        NSNumber *key = @(index);\n\n        NSMutableArray *weekArray = weeksDictionary[key];\n        if (!weekArray) {\n            weekArray = [NSMutableArray array];\n            weeksDictionary[key] = weekArray;\n        }\n        [weekArray addObject:dict];\n    }\n</code></pre>\n\n<p>At the moment, I am getting the total of each <code>PRICE</code> but the total value should be different per section. What is the best option to determine this?</p>\n"}, {"tags": ["ios", "objective-c", "xcode", "dependency-management", "xcode11"], "answers": [{"comments": [{"owner": {"reputation": 3773, "user_id": 2650641, "user_type": "registered", "profile_image": "https://graph.facebook.com/1672202735/picture?type=large", "display_name": "Ayan Sengupta", "link": "https://stackoverflow.com/users/2650641/ayan-sengupta"}, "edited": false, "score": 0, "creation_date": 1573852395, "post_id": 58870531, "comment_id": 104036688, "body": "we can link one dynamic framework to another and so on, till both (all) the frameworks are embedded in the main app. <code>dyld</code> shouldn&#39;t complain about linking/loading frameworks from the very app sandbox. I have to settle down to a solution comparable to you. I have kept the frameworks dynamic but has linked the main app Z against the framework Y and the core framework X underneath Y, removing the direct dependency of Z on X and have embedded them. This setup simply works, however I don&#39;t know how I could handle the situation if I need to add another framework F dependent on X to the same app!"}], "tags": [], "owner": {"reputation": 113, "user_id": 12345813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CF9vQ.jpg?s=128&g=1", "display_name": "htq287", "link": "https://stackoverflow.com/users/12345813/htq287"}, "is_accepted": false, "score": 2, "last_activity_date": 1573793707, "creation_date": 1573793707, "answer_id": 58870531, "question_id": 58868448, "link": "https://stackoverflow.com/questions/58868448/how-to-manage-transitive-dependency-for-local-xcode-projects/58870531#58870531", "title": "How to manage transitive dependency for local Xcode projects", "body": "<p>It seem that in Objective-C, We can't link a dynamic framework to another dynamic framework, or to a command line tool. It's always raise an exception, when running in production</p>\n\n<pre><code>Dyld Error Message:\n  Library not loaded: @rpath/XFrameworks.framework/Versions/A/XFrameworks\n</code></pre>\n\n<p>For your situation, <strong>What I think might solve your problem</strong></p>\n\n<ul>\n<li>X <em>(Core features)</em> can be built in static library</li>\n<li>Y can be built in type of dynamic framework \n\n<ul>\n<li>will link with X library</li>\n<li>or link with others <em>(I mean some another code base)</em></li>\n</ul></li>\n<li>Z <em>(your application)</em> will link with Y framework </li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 3773, "user_id": 2650641, "user_type": "registered", "profile_image": "https://graph.facebook.com/1672202735/picture?type=large", "display_name": "Ayan Sengupta", "link": "https://stackoverflow.com/users/2650641/ayan-sengupta"}, "is_accepted": true, "score": 1, "last_activity_date": 1579648852, "creation_date": 1579648852, "answer_id": 59850599, "question_id": 58868448, "link": "https://stackoverflow.com/questions/58868448/how-to-manage-transitive-dependency-for-local-xcode-projects/59850599#59850599", "title": "How to manage transitive dependency for local Xcode projects", "body": "<p>Actually there is a way through which I could finally solve the issue of transitive dependency in Xcode. I have to use Workspace (.xcworkspace) rather than a Xcode project (.xcodeproj). </p>\n\n<p>To get it done use the following steps:</p>\n\n<ol>\n<li>Close all related and open Xcode projects.</li>\n<li>Create a new Workspace in the root directory from File > New >\nWorkspace. Open the workspace by double clicking onto it and\ndrag/drop the required projects to the workspace.</li>\n<li>Add the independent framework (X in my question) output to both of\nthe dependent project targets (Y and Z) by adding it under the\nFramework and Libraries section. Embed the dynamic library only to\nthe top level application (Z) and do not embed it to the\nintermediate dependent target library (Y).</li>\n<li>Add the intermediate framework (Y) to the root level app under\nFramework and Libraries section and embed it to the root app bundle.</li>\n</ol>\n\n<p>This setup works like a charm for me without ever creating duplicate build rules and it spontaneously picked up the dependency as well.</p>\n\n<p>Obviously, you can not do this if your independent framework is a static library and in that case it will be linked to both the dependent targets causing duplicate symbols issue during linking.</p>\n"}], "owner": {"reputation": 3773, "user_id": 2650641, "user_type": "registered", "profile_image": "https://graph.facebook.com/1672202735/picture?type=large", "display_name": "Ayan Sengupta", "link": "https://stackoverflow.com/users/2650641/ayan-sengupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 1, "accepted_answer_id": 59850599, "answer_count": 2, "score": 0, "last_activity_date": 1579648852, "creation_date": 1573776618, "question_id": 58868448, "link": "https://stackoverflow.com/questions/58868448/how-to-manage-transitive-dependency-for-local-xcode-projects", "title": "How to manage transitive dependency for local Xcode projects", "body": "<p>I have two Objective C dynamic frameworks X and Y and another Objective C app Z.\nAll these frameworks and apps have been created by me locally. Framework X is the very base framework used by framework Y and the app Z. So the dependency graph is something like the following:</p>\n\n<ol>\n<li><p>Y ---> X</p></li>\n<li><p>Z ---> X</p></li>\n<li><p>Z ---> Y (---> X)</p></li>\n</ol>\n\n<p>I want all my targets to be debuggable and to pick the platform tools based on run destination (device/simulator). So I have added dependencies as sub-projects to the main projects and have linked them with the dependent projects to generate implicit dependencies by Xcode. </p>\n\n<p>The set up 1 and 2 works great independently. But I am struggling with the set up 3 which is creating duplicate build rules for the target X due to transitive dependency on it (target Y and Z both depends on it) and subsequently failing the build process.</p>\n\n<p>Anyone has any idea on how to deal with this situation? Thanks in advance!</p>\n"}, {"tags": ["android", "ios", "objective-c", "flutter"], "answers": [{"comments": [{"owner": {"reputation": 886, "user_id": 8738574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f2749b0f68000de2ab26739e2b0e23?s=128&d=identicon&r=PG&f=1", "display_name": "medyas", "link": "https://stackoverflow.com/users/8738574/medyas"}, "edited": false, "score": 0, "creation_date": 1573813768, "post_id": 58869349, "comment_id": 104017791, "body": "Thank you, will try it and see"}], "tags": [], "owner": {"reputation": 5696, "user_id": 3908065, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002559418634/picture?type=large", "display_name": "Igor Kharakhordin", "link": "https://stackoverflow.com/users/3908065/igor-kharakhordin"}, "is_accepted": true, "score": 2, "last_activity_date": 1573784298, "last_edit_date": 1573784298, "creation_date": 1573783623, "answer_id": 58869349, "question_id": 58866332, "link": "https://stackoverflow.com/questions/58866332/flutter-pass-uint8list-to-ios-objective-c/58869349#58869349", "title": "Flutter pass Uint8List to iOS Objective-c", "body": "<p>You should take first argument as a typed data, probably:</p>\n\n<pre><code>NSArray *args = call.arguments;\nFlutterStandardTypedData *list = args[0];\n</code></pre>\n\n<p>kotlin:</p>\n\n<pre><code>val args: List&lt;Any&gt; = call.arguments as List&lt;Any&gt;\nval list = args[0] as ByteArray\n</code></pre>\n\n<p>and you invoke it like this:</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>Uint8List uint8List;\n_channel.invokeMethod(\"your_function_name\", [uint8List]);\n</code></pre>\n"}], "owner": {"reputation": 886, "user_id": 8738574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f2749b0f68000de2ab26739e2b0e23?s=128&d=identicon&r=PG&f=1", "display_name": "medyas", "link": "https://stackoverflow.com/users/8738574/medyas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 0, "accepted_answer_id": 58869349, "answer_count": 1, "score": 0, "last_activity_date": 1573784298, "creation_date": 1573764775, "question_id": 58866332, "link": "https://stackoverflow.com/questions/58866332/flutter-pass-uint8list-to-ios-objective-c", "title": "Flutter pass Uint8List to iOS Objective-c", "body": "<p>I am trying to pass an image as Uint8List  to native code Android/iOS from Flutter, but getting an error in iOS side. I am modifying a plugin and i never developed in iOS before.\nHere is the Flutter code to capture an image from widget and send the Uint8List to native code.</p>\n\n<pre><code>  Future&lt;void&gt; _capturePng() async {\n    RenderRepaintBoundary boundary =\n    globalKey.currentContext.findRenderObject();\n    ui.Image image = await boundary.toImage(pixelRatio: 1.50);\n    ByteData byteData = await image.toByteData(format: ui.ImageByteFormat.png);\n    Uint8List pngBytes = byteData.buffer.asUint8List();\n\n    printer.printImage(pngBytes);\n  }\n</code></pre>\n\n<p>In Android, i am using Kotlin:</p>\n\n<pre><code>private fun printImage(call: MethodCall, result: Result) {\n    val image = call.arguments as ByteArray\n    val res = mPrinterPlugin.printImage(image)\n    result.success(res)\n}\n</code></pre>\n\n<p>In iOS, the plugin is written in Objective-C. i added this check for my image </p>\n\n<pre><code>else if([@\"imagePrint\" isEqualToString:call.method]){\n\n     NSData *imgBytes = call.arguments;\n\n     UIImage *label = [UIImage imageWithData:imgBytes];\n\n }\n</code></pre>\n\n<p>I saw that <code>Uint8List</code> is <code>FlutterStandardTypedData typedDataWithBytes</code> in iOS, but when i set the imgBytes type to it i get an error.</p>\n"}, {"tags": ["ios", "objective-c"], "comments": [{"owner": {"reputation": 17713, "user_id": 1801544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CcSB.jpg?s=128&g=1", "display_name": "Larme", "link": "https://stackoverflow.com/users/1801544/larme"}, "edited": false, "score": 0, "creation_date": 1573751207, "post_id": 58861947, "comment_id": 103995309, "body": "And what&#39;s the value of <code>unArchiveError</code>?"}, {"owner": {"reputation": 848, "user_id": 2207137, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/xaTP3.jpg?s=128&g=1", "display_name": "TomV", "link": "https://stackoverflow.com/users/2207137/tomv"}, "reply_to_user": {"reputation": 17713, "user_id": 1801544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CcSB.jpg?s=128&g=1", "display_name": "Larme", "link": "https://stackoverflow.com/users/1801544/larme"}, "edited": false, "score": 0, "creation_date": 1573755299, "post_id": 58861947, "comment_id": 103997386, "body": "&#39;(null)&#39; is the rather unhelpful value of unArchiveError."}, {"owner": {"reputation": 24609, "user_id": 1974224, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/rQQMq.png?s=128&g=1", "display_name": "Cristik", "link": "https://stackoverflow.com/users/1974224/cristik"}, "edited": false, "score": 1, "creation_date": 1573755606, "post_id": 58861947, "comment_id": 103997525, "body": "That&#39;s an unusual usage of <code>NSKeyedUnarchiver</code>. Archivers should be used to store/load data, not UI elements. Try instead storing the details that you want to configure the button with."}], "answers": [{"tags": [], "owner": {"reputation": 848, "user_id": 2207137, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/xaTP3.jpg?s=128&g=1", "display_name": "TomV", "link": "https://stackoverflow.com/users/2207137/tomv"}, "is_accepted": true, "score": 0, "last_activity_date": 1573771627, "last_edit_date": 1573771627, "creation_date": 1573756625, "answer_id": 58863670, "question_id": 58861947, "link": "https://stackoverflow.com/questions/58861947/how-to-copy-a-button-in-ios-using-nskeyedarchiver/58863670#58863670", "title": "How to copy a button in iOS using NSKeyedArchiver", "body": "<p>Got it working now:</p>\n\n<pre><code>UIButton *newButton = [[UIButton alloc]init];\nnewButton.frame = btn.frame;\n[originalBtnsArray addObject:newButton];\n</code></pre>\n"}], "owner": {"reputation": 848, "user_id": 2207137, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/xaTP3.jpg?s=128&g=1", "display_name": "TomV", "link": "https://stackoverflow.com/users/2207137/tomv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 58863670, "answer_count": 1, "score": 0, "last_activity_date": 1573771627, "creation_date": 1573750326, "question_id": 58861947, "link": "https://stackoverflow.com/questions/58861947/how-to-copy-a-button-in-ios-using-nskeyedarchiver", "title": "How to copy a button in iOS using NSKeyedArchiver", "body": "<p>To copy a button, this has been working fine:</p>\n\n<pre><code>   NSData *archivedData = [NSKeyedArchiver archivedDataWithRootObject: btn];\n   UIButton *newButton = [NSKeyedUnarchiver unarchiveObjectWithData: archivedData];\n</code></pre>\n\n<p>However since iOS12, this has been deprecated. But using the suggested method, causes the newButton to be nil. What am I doing wrong or indeed is there an alternative way to copy a UIButton. Full code:</p>\n\n<pre><code>// Init originalBtnsArray and\noriginalBtnsArray = [[NSMutableArray alloc]init];\n\n// Populate originalBtnsArray\nfor (UIButton *btn in btnsReferencesArray){\n    // Below works but is now deprecated as of iOS 12\n    //NSData *archivedData = [NSKeyedArchiver archivedDataWithRootObject: btn];\n    //UIButton *newButton = [NSKeyedUnarchiver unarchiveObjectWithData: archivedData];\n\n    NSError* error = nil;\n    NSData *archivedData = [NSKeyedArchiver archivedDataWithRootObject:btn requiringSecureCoding:NO error:&amp;error];\n\n    NSError* unArchiveError = nil;\n    UIButton *newButton = [NSKeyedUnarchiver unarchivedObjectOfClass:[UIButton class] fromData:archivedData error:&amp;unArchiveError];\n\n    // newButton is nil, which is suboptimal\n    [originalBtnsArray addObject:newButton];\n}\n</code></pre>\n"}, {"tags": ["ios", "objective-c", "autolayout"], "comments": [{"owner": {"reputation": 43714, "user_id": 6257435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17fcf85ee49b22ea9e5fd5f5e5a49ec3?s=128&d=identicon&r=PG&f=1", "display_name": "DonMag", "link": "https://stackoverflow.com/users/6257435/donmag"}, "edited": false, "score": 0, "creation_date": 1573749846, "post_id": 58860574, "comment_id": 103994468, "body": "This should be all you need: <code>[button setContentHuggingPriority:UILayoutPriorityRequired forAxis:UILayoutConstraintAxisHorizontal];</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1677, "user_id": 1644934, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a1f5a756128531dc47f04597c6e4768?s=128&d=identicon&r=PG", "display_name": "Vincent Sit", "link": "https://stackoverflow.com/users/1644934/vincent-sit"}, "reply_to_user": {"reputation": 85489, "user_id": 5820010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f54085103551ecfc99506b50cab764f2?s=128&d=identicon&r=PG&f=1", "display_name": "Sh_Khan", "link": "https://stackoverflow.com/users/5820010/sh-khan"}, "edited": false, "score": 0, "creation_date": 1573748859, "post_id": 58861069, "comment_id": 103993807, "body": "Sorry maybe I didn&#39;t understand the question, I think he wants to keep the position of the button fixed, then the label on the left adapts to the width and height, and there is a spacing between the button and label."}], "tags": [], "owner": {"reputation": 1677, "user_id": 1644934, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a1f5a756128531dc47f04597c6e4768?s=128&d=identicon&r=PG", "display_name": "Vincent Sit", "link": "https://stackoverflow.com/users/1644934/vincent-sit"}, "is_accepted": true, "score": 1, "last_activity_date": 1573747520, "creation_date": 1573747520, "answer_id": 58861069, "question_id": 58860574, "link": "https://stackoverflow.com/questions/58860574/nslayoutconstraints-to-limit-label-width/58861069#58861069", "title": "NSLayoutConstraints to limit label width", "body": "<p>Just change </p>\n\n<pre><code>[label.trailingAnchor constraintEqualToAnchor:button.leadingAnchor constant:0].active = YES;\n</code></pre>\n\n<p>into</p>\n\n<pre><code>[label.trailingAnchor constraintLessThanOrEqualToAnchor:button.leadingAnchor constant:0].active = YES;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/r1uWp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r1uWp.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>import UIKit\n\nfinal class ViewController: UIViewController {\n\n  lazy var tableView: UITableView = {\n    let val = UITableView(frame: self.view.bounds, style: .plain)\n    val.dataSource = self\n    val.delegate = self\n    val.estimatedRowHeight = 44\n    val.register(MyCell.self, forCellReuseIdentifier: \"MyCell\")\n    return val\n  }()\n\n  let data: [String] = [\n    \"LayoutDemo\",\n    \"LayoutDemo LayoutDemo LayoutDemo LayoutDemo LayoutDemo LayoutDemo LayoutDemo LayoutDemo LayoutDemo LayoutDemo LayoutDemo LayoutDemo\",\n    \"LayoutDemoLayoutDemoLayoutDemoLayoutDemo\"\n  ]\n\n  override func viewDidLoad() {\n    super.viewDidLoad()\n\n    view.addSubview(tableView)\n  }\n\n}\n\nextension ViewController: UITableViewDataSource {\n  func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int {\n    data.count\n  }\n\n  func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell {\n    guard let cell = tableView.dequeueReusableCell(withIdentifier: \"MyCell\", for: indexPath) as? MyCell else { fatalError() }\n    cell.dataText = data[indexPath.row]\n    return cell\n  }\n\n}\n\nextension ViewController: UITableViewDelegate {\n\n  func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -&gt; CGFloat {\n    return UITableView.automaticDimension\n  }\n\n}\n\nclass MyCell: UITableViewCell {\n\n  var dataText: String? {\n    didSet {\n      label.text = dataText\n    }\n  }\n\n  lazy var label: UILabel = {\n    let val = UILabel(frame: .zero)\n    val.translatesAutoresizingMaskIntoConstraints = false\n    val.numberOfLines = 0\n    val.backgroundColor = .gray\n    return val\n  }()\n\n  lazy var button: UIButton = {\n    let val = UIButton(type: .custom)\n    val.translatesAutoresizingMaskIntoConstraints = false\n    val.backgroundColor = .red\n    return val\n  }()\n\n  override init(style: UITableViewCell.CellStyle, reuseIdentifier: String?) {\n    super.init(style: style, reuseIdentifier: reuseIdentifier)\n\n    contentView.addSubview(label)\n    contentView.addSubview(button)\n\n    NSLayoutConstraint.activate([\n      button.centerYAnchor.constraint(equalTo: contentView.centerYAnchor),\n      button.trailingAnchor.constraint(equalTo: contentView.trailingAnchor, constant: -5),\n      button.heightAnchor.constraint(equalToConstant: 20),\n      button.widthAnchor.constraint(equalToConstant: 20),\n\n      label.topAnchor.constraint(equalTo: contentView.topAnchor, constant: 5),\n      label.bottomAnchor.constraint(equalTo: contentView.bottomAnchor, constant: -5),\n      label.leadingAnchor.constraint(equalTo: contentView.leadingAnchor, constant: 10),\n      label.trailingAnchor.constraint(lessThanOrEqualTo: button.leadingAnchor, constant: -10)\n    ])\n\n  }\n\n  required init?(coder: NSCoder) {\n    fatalError(\"init(coder:) has not been implemented\")\n  }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 19053, "user_id": 172131, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/dc11866a354eb5f97a116f4e2633ed8e?s=128&d=identicon&r=PG", "display_name": "RunLoop", "link": "https://stackoverflow.com/users/172131/runloop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 58861069, "answer_count": 1, "score": -1, "last_activity_date": 1573747520, "creation_date": 1573745941, "last_edit_date": 1573746925, "question_id": 58860574, "link": "https://stackoverflow.com/questions/58860574/nslayoutconstraints-to-limit-label-width", "title": "NSLayoutConstraints to limit label width", "body": "<p>I am struggling to set the necessary constraints to limit the width of a label to the leading anchor of a button in a tableview cell.</p>\n\n<p><strong>Desired Result</strong></p>\n\n<p>Label to the left, button to the right. Label wraps before button if needed.</p>\n\n<p><a href=\"https://i.stack.imgur.com/BkCe7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BkCe7.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Current Result</strong></p>\n\n<p>The label is pulling the red button to the left.</p>\n\n<p><a href=\"https://i.stack.imgur.com/FdaF6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FdaF6.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>[button.centerYAnchor constraintEqualToAnchor:cell.contentView.centerYAnchor constant:0].active = YES;\n[button.trailingAnchor constraintEqualToAnchor:cell.contentView.trailingAnchor constant:-5].active = YES;\n\n[label.leadingAnchor constraintEqualToAnchor:cell.contentView.leadingAnchor constant:10].active = YES;\n[label.trailingAnchor constraintEqualToAnchor:button.leadingAnchor constant:0].active = YES;\n</code></pre>\n\n<p>I have tried various things like adding another label constraint to the right of the cell but that squeezed the button (I tried to fix by setting its compression resistance priority but that had no effect)</p>\n\n<p>What constraints do I need to achieve the desired result please? </p>\n"}, {"tags": ["objective-c", "swift", "dictionary", "casting", "nsdictionary"], "answers": [{"comments": [{"owner": {"reputation": 475, "user_id": 4088557, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/097d7f8d879ed56304a61ed678bb2f0e?s=128&d=identicon&r=PG&f=1", "display_name": "CSjunkie", "link": "https://stackoverflow.com/users/4088557/csjunkie"}, "edited": false, "score": 0, "creation_date": 1573746717, "post_id": 58860224, "comment_id": 103992472, "body": "Thanks for this! At first I was confused but I see that the logic I was using was only getting triggered in very specific scenarios so it looked to be working."}], "tags": [], "owner": {"reputation": 229649, "user_id": 5044042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vjUNl.jpg?s=128&g=1", "display_name": "vadian", "link": "https://stackoverflow.com/users/5044042/vadian"}, "is_accepted": true, "score": 3, "last_activity_date": 1573746581, "last_edit_date": 1573746581, "creation_date": 1573744955, "answer_id": 58860224, "question_id": 58859822, "link": "https://stackoverflow.com/questions/58859822/what-is-the-difference-between-these-two-options-for-converting-swift-dictionary/58860224#58860224", "title": "What is the difference between these two options for converting Swift Dictionary to NSMutableDictionary?", "body": "<blockquote>\n  <p>This works in most cases</p>\n</blockquote>\n\n<p>No, this works not at all. </p>\n\n<p>Unlike <strong>immutable</strong> <code>NSDictionary</code> Swift <code>Dictionary</code> and <code>NSMutableDictionary</code> are not related.</p>\n\n<p>You can bridge cast (<code>as</code> without <code>?</code>) <code>[String:String]</code> to <code>NSDictionary</code> but you cannot bridge cast nor conditionally downcast (<code>as?</code>) it to <code>NSMutableDictionary</code>.</p>\n\n<p>The second syntax works because a new instance of <code>NSMutableDictionary</code> is created. The Swift dictionary parameter is implicitly bridged to <code>NSDictionary</code></p>\n\n<hr>\n\n<p>The same behavior is also true for Swift <code>Array</code> and Foundation <code>NSMutableArray</code></p>\n"}], "owner": {"reputation": 475, "user_id": 4088557, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/097d7f8d879ed56304a61ed678bb2f0e?s=128&d=identicon&r=PG&f=1", "display_name": "CSjunkie", "link": "https://stackoverflow.com/users/4088557/csjunkie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 58860224, "answer_count": 1, "score": 0, "last_activity_date": 1573831868, "creation_date": 1573743741, "last_edit_date": 1573831868, "question_id": 58859822, "link": "https://stackoverflow.com/questions/58859822/what-is-the-difference-between-these-two-options-for-converting-swift-dictionary", "title": "What is the difference between these two options for converting Swift Dictionary to NSMutableDictionary?", "body": "<p>In my project I have a dictionary of type <code>[String: AnyObject]</code> and am converting it to <code>NSMutableDictionary</code> to be compatible with some Objective C code in the project.</p>\n\n<p>I started using the below conversion option (which I've seen as an accepted answer in many stack overflow posts):</p>\n\n<pre><code>dictionary as? NSMutableDictionary\n</code></pre>\n\n<p>This works in most cases, but in some instances the result was nil which indicates the dictionary could not be converted to NSMutableDictionary. However, with the exact same values in the dictionary the below conversion successfully results in an NSMutableDictionary:</p>\n\n<pre><code>NSMutableDictionary(dictionary: dictionary)\n</code></pre>\n\n<p>Why would the first option result in nil when the second one is able to convert without any issues?</p>\n\n<p>You can see here <a href=\"https://stackoverflow.com/questions/29502878/how-do-i-convert-swift-dictionary-to-nsdictionary\">How do I convert swift Dictionary to NSDictionary</a> that the first option is the accepted answer, but it does not seem to work in all cases. The second option is also mentioned but does not have as many people agreeing that it is the correct answer.</p>\n"}, {"tags": ["ios", "objective-c", "xcode"], "comments": [{"owner": {"reputation": 1677, "user_id": 1644934, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a1f5a756128531dc47f04597c6e4768?s=128&d=identicon&r=PG", "display_name": "Vincent Sit", "link": "https://stackoverflow.com/users/1644934/vincent-sit"}, "edited": false, "score": 0, "creation_date": 1573740905, "post_id": 58858368, "comment_id": 103988740, "body": "Has this framework been added to your project? You can view the framework of your project links via &lt;Your Target&gt; --&gt; General --&gt; Frameworks, Libraries, and Embedded Content."}, {"owner": {"reputation": 1, "user_id": 12359976, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mEE8rpLZ61w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reWgaaiHH1KrDyVSdgctlIVPgi0bw/photo.jpg?sz=128", "display_name": "ne apple", "link": "https://stackoverflow.com/users/12359976/ne-apple"}, "reply_to_user": {"reputation": 1677, "user_id": 1644934, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a1f5a756128531dc47f04597c6e4768?s=128&d=identicon&r=PG", "display_name": "Vincent Sit", "link": "https://stackoverflow.com/users/1644934/vincent-sit"}, "edited": false, "score": 0, "creation_date": 1573745775, "post_id": 58858368, "comment_id": 103991848, "body": "@VincentSit how i get General in xcode"}, {"owner": {"reputation": 1677, "user_id": 1644934, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a1f5a756128531dc47f04597c6e4768?s=128&d=identicon&r=PG", "display_name": "Vincent Sit", "link": "https://stackoverflow.com/users/1644934/vincent-sit"}, "edited": false, "score": 0, "creation_date": 1573746012, "post_id": 58858368, "comment_id": 103991995, "body": "<a href=\"https://imgur.com/a/4aM03qY\" rel=\"nofollow noreferrer\">imgur.com/a/4aM03qY</a>"}, {"owner": {"reputation": 1, "user_id": 12359976, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mEE8rpLZ61w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reWgaaiHH1KrDyVSdgctlIVPgi0bw/photo.jpg?sz=128", "display_name": "ne apple", "link": "https://stackoverflow.com/users/12359976/ne-apple"}, "reply_to_user": {"reputation": 1677, "user_id": 1644934, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a1f5a756128531dc47f04597c6e4768?s=128&d=identicon&r=PG", "display_name": "Vincent Sit", "link": "https://stackoverflow.com/users/1644934/vincent-sit"}, "edited": false, "score": 0, "creation_date": 1573746429, "post_id": 58858368, "comment_id": 103992267, "body": "@VincentSit thanks sir"}, {"owner": {"reputation": 1677, "user_id": 1644934, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a1f5a756128531dc47f04597c6e4768?s=128&d=identicon&r=PG", "display_name": "Vincent Sit", "link": "https://stackoverflow.com/users/1644934/vincent-sit"}, "edited": false, "score": 0, "creation_date": 1573747607, "post_id": 58858368, "comment_id": 103993032, "body": "You are welcome."}, {"owner": {"reputation": 4312, "user_id": 1342232, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BNnph.jpg?s=128&g=1", "display_name": "Craig Conover", "link": "https://stackoverflow.com/users/1342232/craig-conover"}, "edited": false, "score": 0, "creation_date": 1573934199, "post_id": 58858368, "comment_id": 104054102, "body": "Remove the PubNub Pod, add it back in and close and reopen the project. This seemed to work for another developer. Let me know if that works."}, {"owner": {"reputation": 1, "user_id": 12359976, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mEE8rpLZ61w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reWgaaiHH1KrDyVSdgctlIVPgi0bw/photo.jpg?sz=128", "display_name": "ne apple", "link": "https://stackoverflow.com/users/12359976/ne-apple"}, "reply_to_user": {"reputation": 4312, "user_id": 1342232, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BNnph.jpg?s=128&g=1", "display_name": "Craig Conover", "link": "https://stackoverflow.com/users/1342232/craig-conover"}, "edited": false, "score": 0, "creation_date": 1574310085, "post_id": 58858368, "comment_id": 104189153, "body": "@CraigConover i got one more problem with design of storybord"}, {"owner": {"reputation": 4312, "user_id": 1342232, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BNnph.jpg?s=128&g=1", "display_name": "Craig Conover", "link": "https://stackoverflow.com/users/1342232/craig-conover"}, "edited": false, "score": 0, "creation_date": 1574615118, "post_id": 58858368, "comment_id": 104285915, "body": "Storyboard should have nothing to do with PubNub so I can&#39;t help you there. I suggest posting a new question on Stack Overflow but unless it involves a PubNub API, don&#39;t tag it as <code>pubnub</code>."}], "owner": {"reputation": 1, "user_id": 12359976, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mEE8rpLZ61w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reWgaaiHH1KrDyVSdgctlIVPgi0bw/photo.jpg?sz=128", "display_name": "ne apple", "link": "https://stackoverflow.com/users/12359976/ne-apple"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573746100, "creation_date": 1573739497, "last_edit_date": 1573746100, "question_id": 58858368, "link": "https://stackoverflow.com/questions/58858368/i-have-a-ios-project-in-objective-c-i-got-some-errors-like-pubnub-pubnub-h-file", "title": "I have a ios project in objective-c i got some errors like PubNub/PubNub.h&#39; file not found and more files", "body": "<p>I have a ios project in objective-c i got some errors like PubNub/PubNub.h' file not found and more files</p>\n\n<pre><code>#import &lt;UIKit/UIKit.h&gt;\n#import &lt;CoreData/CoreData.h&gt;\n#import \"LoadingViewClass.h\"\n#import &lt;PubNub/PubNub.h&gt;\n#import \"BaseTabController.h\"\n#import \"Constants.h\"\n#import \"Reachability.h\"\n</code></pre>\n\n<p>i have this all file but i got this error and i am new in ios development \nthanks for help</p>\n"}, {"tags": ["objective-c", "xamarin", "binding", "xamarin.ios", "objective-sharpie"], "answers": [{"tags": [], "owner": {"reputation": 3634, "user_id": 11104068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gueSe.jpg?s=128&g=1", "display_name": "Saamer", "link": "https://stackoverflow.com/users/11104068/saamer"}, "is_accepted": false, "score": 0, "last_activity_date": 1573747155, "creation_date": 1573747155, "answer_id": 58860952, "question_id": 58852754, "link": "https://stackoverflow.com/questions/58852754/how-to-set-scope-properly-in-sharpie/58860952#58860952", "title": "How to set scope properly in Sharpie?", "body": "<p>If you watch <a href=\"https://youtu.be/NyqxScrnJKw?t=3751\" rel=\"nofollow noreferrer\">this video</a> starting at 1:02:31, presented by the Lead of the Xamarin Components team, Jonathan Dick, you will notice that in the generated files, you can delete the unwanted objects that you don't need. You can just keep the stuff that is relevant for your purposes.</p>\n"}], "owner": {"reputation": 477, "user_id": 906414, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/8243af6ef281508a191e9a733f5a4b8d?s=128&d=identicon&r=PG", "display_name": "Randi", "link": "https://stackoverflow.com/users/906414/randi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1573749902, "creation_date": 1573721624, "last_edit_date": 1573749902, "question_id": 58852754, "link": "https://stackoverflow.com/questions/58852754/how-to-set-scope-properly-in-sharpie", "title": "How to set scope properly in Sharpie?", "body": "<p>I want to bind some objective-c code using <code>sharpie</code>. I have some .h and .m files inside /Users//Documents/binding/InfColorPicker/InfColorPicker. My sharpie command looks like this\n<code>sharpie bind -output=InfColorPicker -namespace=InfColorPicker -sdk-iphoneos12.2 -scope Users/&lt;username&gt;/Documents/binding/InfColorPicker/InfColorPicker/*.h</code>. But the <code>ApiDefinition.cs</code>and <code>Struct.cs</code> are very huge. I think it has binded all the included framework (coregraphic, foundation etc..). How do I properly set the scope to my .h files.\nPlease help me.\nThanks</p>\n"}, {"tags": ["objective-c", "multithreading", "macos", "grand-central-dispatch"], "comments": [{"owner": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 1, "creation_date": 1573721619, "post_id": 58851505, "comment_id": 103977702, "body": "Put xcode at pause when main thread is blocked and look in stack what is blocking it."}, {"owner": {"reputation": 588, "user_id": 1432710, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2f79b791ddd4d7d6ad5c90244bc31ee3?s=128&d=identicon&r=PG", "display_name": "Joe Habadas", "link": "https://stackoverflow.com/users/1432710/joe-habadas"}, "reply_to_user": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 0, "creation_date": 1573764459, "post_id": 58851505, "comment_id": 104001886, "body": "@Cy-4AH: Well that&#39;s the thing, the <code>dataWithContentsOfFile</code> is what is blocking it for some reason."}, {"owner": {"reputation": 50374, "user_id": 568283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/120ceee2dc40d539b9983265a2e0a2f8?s=128&d=identicon&r=PG", "display_name": "CRD", "link": "https://stackoverflow.com/users/568283/crd"}, "reply_to_user": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 0, "creation_date": 1573771995, "post_id": 58851505, "comment_id": 104004742, "body": "Are you saying that if you follow @Cy-4AH&#39;s suggestion you can see the call to <code>dataWithContentsOfFile</code> on the main thread even though you apparently have dispatched it on another one? Or are you seeing something else which tells you this call is responsible for the main thread being blocked?"}, {"owner": {"reputation": 588, "user_id": 1432710, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2f79b791ddd4d7d6ad5c90244bc31ee3?s=128&d=identicon&r=PG", "display_name": "Joe Habadas", "link": "https://stackoverflow.com/users/1432710/joe-habadas"}, "reply_to_user": {"reputation": 50374, "user_id": 568283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/120ceee2dc40d539b9983265a2e0a2f8?s=128&d=identicon&r=PG", "display_name": "CRD", "link": "https://stackoverflow.com/users/568283/crd"}, "edited": false, "score": 0, "creation_date": 1573808102, "post_id": 58851505, "comment_id": 104014545, "body": "@CRD: When the &quot;spinning&quot; starts and the gui is frozen for several seconds the only thing Instruments Time Profiler shows is <code>_dispatch_workloop_worker_thread</code>, then right before the file is read it shows <code>_dispatch_call_block_and_release</code> followed by the function (which reads the file) which has <code>_block_invoke</code> shown next to it in the call tree. So to answer your question, I don&#39;t see that it is actually doing something to the main thread, although would a background thread spin-lock like that if it wasn&#39;t?"}, {"owner": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 1, "creation_date": 1573814160, "post_id": 58851505, "comment_id": 104018037, "body": "Could you just print stack trace of main thread when it&#39;s blocked?"}, {"owner": {"reputation": 588, "user_id": 1432710, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2f79b791ddd4d7d6ad5c90244bc31ee3?s=128&d=identicon&r=PG", "display_name": "Joe Habadas", "link": "https://stackoverflow.com/users/1432710/joe-habadas"}, "reply_to_user": {"reputation": 4021, "user_id": 1934750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85bf95394e0516e81917bb01a51c6cf4?s=128&d=identicon&r=PG", "display_name": "Cy-4AH", "link": "https://stackoverflow.com/users/1934750/cy-4ah"}, "edited": false, "score": 0, "creation_date": 1573866787, "post_id": 58851505, "comment_id": 104040255, "body": "@Cy-4AH: I actually found the issue, and resolved it. It was a problem with an <code>NSTask</code> that was causing it; there&#39;s another issue though now in relation to that which I&#39;ll post a different question about. Thanks guys."}, {"owner": {"reputation": 588, "user_id": 1432710, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2f79b791ddd4d7d6ad5c90244bc31ee3?s=128&d=identicon&r=PG", "display_name": "Joe Habadas", "link": "https://stackoverflow.com/users/1432710/joe-habadas"}, "reply_to_user": {"reputation": 50374, "user_id": 568283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/120ceee2dc40d539b9983265a2e0a2f8?s=128&d=identicon&r=PG", "display_name": "CRD", "link": "https://stackoverflow.com/users/568283/crd"}, "edited": false, "score": 0, "creation_date": 1573866809, "post_id": 58851505, "comment_id": 104040259, "body": "@CRD: See comment directly above, thanks for your help."}], "owner": {"reputation": 588, "user_id": 1432710, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2f79b791ddd4d7d6ad5c90244bc31ee3?s=128&d=identicon&r=PG", "display_name": "Joe Habadas", "link": "https://stackoverflow.com/users/1432710/joe-habadas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573716628, "creation_date": 1573716628, "question_id": 58851505, "link": "https://stackoverflow.com/questions/58851505/objective-c-dispatch-queue-t-blocking-main-thread", "title": "Objective-C, dispatch_queue_t blocking main thread", "body": "<p>I've been having quite a bit of difficulty with a <code>dispatch_queue_t</code> operation that loads a very large file into memory blocking the main thread (spinning or spinlock) for whatever reason (probably because it's huge). I've tried everything imaginable to remedy the problem (such as the advice given <a href=\"https://stackoverflow.com/q/6497743/1432710\">here</a>, <a href=\"https://stackoverflow.com/q/23599251\">here</a>, and <a href=\"https://stackoverflow.com/q/13927198\">here</a> + a dozen others) but no luck. </p>\n\n<p>I've tried various methods to read the file such as <code>NSInputStream</code> (with buffers), <code>dataWithContentsOfFile</code> (NSDataReadingMapped), etc. and regardless once I do something such as the following the main thread beach balls for 4-5 seconds and then the operation continues normally in the background. </p>\n\n<pre><code>dispatch_queue_t myQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);\n        dispatch_async(myQueue, ^{\n\n        NSData *myData = [NSData dataWithContentsOfFile:pathToFile options:NSDataReadingMapped error:nil];\n\n});\n</code></pre>\n\n<p>I'm wondering how to avoid the big hit at the beginning of the operation so the main thread is not affected. I'm so confused as to why the main thread would be affected regardless since I am supposedly doing the entire operation in a background queue. thanks.</p>\n"}, {"tags": ["ios", "objective-c", "in-app-purchase"], "comments": [{"owner": {"reputation": 1588, "user_id": 5452709, "user_type": "registered", "accept_rate": 10, "profile_image": "https://i.stack.imgur.com/VHCSg.jpg?s=128&g=1", "display_name": "Lalit kumar", "link": "https://stackoverflow.com/users/5452709/lalit-kumar"}, "edited": false, "score": 0, "creation_date": 1573718251, "post_id": 58851419, "comment_id": 103976143, "body": "After payment success than validate your purchase receipt and check status date etc. For Sandbox user duration you can check  <a href=\"https://help.apple.com/app-store-connect/#/dev7e89e149d\" rel=\"nofollow noreferrer\">help.apple.com/app-store-connect/#/dev7e89e149d</a>"}, {"owner": {"reputation": 397, "user_id": 5129599, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-saoZQ8AmRsE/AAAAAAAAAAI/AAAAAAAAAC4/Dn_2mdScaHY/photo.jpg?sz=128", "display_name": "Er.Gopal Vasani", "link": "https://stackoverflow.com/users/5129599/er-gopal-vasani"}, "edited": false, "score": 0, "creation_date": 1573718311, "post_id": 58851419, "comment_id": 103976157, "body": "The status code 21007 stands for =&gt; This receipt is from the test environment, but it was sent to the production environment for verification. Send it to the test environment instead."}, {"owner": {"reputation": 397, "user_id": 5129599, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-saoZQ8AmRsE/AAAAAAAAAAI/AAAAAAAAAC4/Dn_2mdScaHY/photo.jpg?sz=128", "display_name": "Er.Gopal Vasani", "link": "https://stackoverflow.com/users/5129599/er-gopal-vasani"}, "edited": false, "score": 0, "creation_date": 1573718350, "post_id": 58851419, "comment_id": 103976175, "body": "Probably your URL for requesting the receipt validation was wrong."}], "answers": [{"comments": [{"owner": {"reputation": 397, "user_id": 5129599, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-saoZQ8AmRsE/AAAAAAAAAAI/AAAAAAAAAC4/Dn_2mdScaHY/photo.jpg?sz=128", "display_name": "Er.Gopal Vasani", "link": "https://stackoverflow.com/users/5129599/er-gopal-vasani"}, "reply_to_user": {"reputation": 365, "user_id": 4702487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f01ddc089bf3b2bdb248557118aef42b?s=128&d=identicon&r=PG&f=1", "display_name": "Graycodder", "link": "https://stackoverflow.com/users/4702487/graycodder"}, "edited": false, "score": 1, "creation_date": 1574138217, "post_id": 58851946, "comment_id": 104114292, "body": "Your welcome @Graycodder, Happy to know that its work for you. Please accept the answer and upvote it. So other developers who are facing this problem can have idea about this."}], "tags": [], "owner": {"reputation": 397, "user_id": 5129599, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-saoZQ8AmRsE/AAAAAAAAAAI/AAAAAAAAAC4/Dn_2mdScaHY/photo.jpg?sz=128", "display_name": "Er.Gopal Vasani", "link": "https://stackoverflow.com/users/5129599/er-gopal-vasani"}, "is_accepted": false, "score": 2, "last_activity_date": 1573721324, "last_edit_date": 1573721324, "creation_date": 1573718479, "answer_id": 58851946, "question_id": 58851419, "link": "https://stackoverflow.com/questions/58851419/inapp-purchase-pending-in-purchase-history/58851946#58851946", "title": "inApp purchase PENDING in Purchase history", "body": "<p>Please use below <strong>URL</strong> to verify receipt validation.</p>\n\n<p>The error code you are getting <strong>21007</strong> stands for <strong>==></strong> This receipt is from the test environment, but it was sent to the production environment for verification. Send it to the test environment instead</p>\n\n<pre><code>guard let appStoreReceiptURL = Bundle.main.appStoreReceiptURL, let appStoreReceiptData = try? Data(contentsOf: appStoreReceiptURL), let verifyReceipt = URL(string: \"https://\\((appStoreReceiptURL.lastPathComponent == \"sandboxReceipt\" ? \"sandbox\" : \"buy\")).itunes.apple.com/verifyReceipt\") else {\n\n\n            return\n        }\n</code></pre>\n"}], "owner": {"reputation": 365, "user_id": 4702487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f01ddc089bf3b2bdb248557118aef42b?s=128&d=identicon&r=PG&f=1", "display_name": "Graycodder", "link": "https://stackoverflow.com/users/4702487/graycodder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1289, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1573721324, "creation_date": 1573716211, "question_id": 58851419, "link": "https://stackoverflow.com/questions/58851419/inapp-purchase-pending-in-purchase-history", "title": "inApp purchase PENDING in Purchase history", "body": "<p>In my application when a user pay with in-app purchase transaction is getting completed but when the user checks the purchase history it shows \"Pending\" status. when I validate the purchase receipt with apple am gtting status 21007 with sandbox user. Can anybody help me how to check the \"pending\" status scenario with apple? In receipt validation. </p>\n"}, {"tags": ["ios", "objective-c", "xcode", "in-app-purchase"], "comments": [{"owner": {"reputation": 5636, "user_id": 1824524, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3b203d394644764db23df78deb743913?s=128&d=identicon&r=PG&f=1", "display_name": "El Tomato", "link": "https://stackoverflow.com/users/1824524/el-tomato"}, "edited": false, "score": 0, "creation_date": 1573705386, "post_id": 58848724, "comment_id": 103971810, "body": "Use <code>SKProductsRequest</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11333566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fcbea91c8bd4196ef566ac36ac59b62?s=128&d=identicon&r=PG&f=1", "display_name": "kironoaki", "link": "https://stackoverflow.com/users/11333566/kironoaki"}, "edited": false, "score": 0, "creation_date": 1573703699, "post_id": 58848851, "comment_id": 103971452, "body": "But users can change the apple store account to try again Or application uninstallation"}, {"owner": {"reputation": 444, "user_id": 3447064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c10070612301ed9676be94f4a60f8c29?s=128&d=identicon&r=PG&f=1", "display_name": "Mitesh", "link": "https://stackoverflow.com/users/3447064/mitesh"}, "reply_to_user": {"reputation": 1, "user_id": 11333566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fcbea91c8bd4196ef566ac36ac59b62?s=128&d=identicon&r=PG&f=1", "display_name": "kironoaki", "link": "https://stackoverflow.com/users/11333566/kironoaki"}, "edited": false, "score": 0, "creation_date": 1573703930, "post_id": 58848851, "comment_id": 103971500, "body": "In that case you have to wait till not get the purchase data. You can get purchase using receipt verification or restoreCompletedTransactions."}, {"owner": {"reputation": 1, "user_id": 11333566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fcbea91c8bd4196ef566ac36ac59b62?s=128&d=identicon&r=PG&f=1", "display_name": "kironoaki", "link": "https://stackoverflow.com/users/11333566/kironoaki"}, "edited": false, "score": 0, "creation_date": 1573704506, "post_id": 58848851, "comment_id": 103971601, "body": "I&#39;m sorry I didn&#39;t describe it clearly enough. 1. Users can change the apple store account to reuse the free trial, 2. When the app is uninstalled, I can&#39;t judge it correctly. I want a more reliable way of judging in these situations."}, {"owner": {"reputation": 444, "user_id": 3447064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c10070612301ed9676be94f4a60f8c29?s=128&d=identicon&r=PG&f=1", "display_name": "Mitesh", "link": "https://stackoverflow.com/users/3447064/mitesh"}, "reply_to_user": {"reputation": 1, "user_id": 11333566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fcbea91c8bd4196ef566ac36ac59b62?s=128&d=identicon&r=PG&f=1", "display_name": "kironoaki", "link": "https://stackoverflow.com/users/11333566/kironoaki"}, "edited": false, "score": 0, "creation_date": 1573705007, "post_id": 58848851, "comment_id": 103971720, "body": "If you want to give free trial only one time, then you have to keep any flag and store in keychain. If you get that flag, then you give product without free trial. If not get that flag from keychain, you can give free trial product."}, {"owner": {"reputation": 1, "user_id": 11333566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fcbea91c8bd4196ef566ac36ac59b62?s=128&d=identicon&r=PG&f=1", "display_name": "kironoaki", "link": "https://stackoverflow.com/users/11333566/kironoaki"}, "edited": false, "score": 0, "creation_date": 1573705759, "post_id": 58848851, "comment_id": 103971896, "body": "This is really a good plan! But what if the user has more than one device? For example, if the user&#39;s Apple Store account is subscribed on device A for trial, how can I judge that this account has been subscribed  for trial,On device B"}], "tags": [], "owner": {"reputation": 444, "user_id": 3447064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c10070612301ed9676be94f4a60f8c29?s=128&d=identicon&r=PG&f=1", "display_name": "Mitesh", "link": "https://stackoverflow.com/users/3447064/mitesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1573701417, "creation_date": 1573701417, "answer_id": 58848851, "question_id": 58848724, "link": "https://stackoverflow.com/questions/58848724/is-there-any-way-to-obtain-all-in-app-purchase-information-of-users-in-the-curre/58848851#58848851", "title": "Is there any way to obtain all in-app purchase information of users in the current application", "body": "<p>If you want to show the status of button on app open, you can keep the parse receipt data and original receipt data in local after purchase product. </p>\n\n<p>Every time when user open application, you can check status from parsed receipt data and in background do receipt verification to get the latest receipt data and update local receipt data and parsed receipt data.</p>\n"}], "owner": {"reputation": 1, "user_id": 11333566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fcbea91c8bd4196ef566ac36ac59b62?s=128&d=identicon&r=PG&f=1", "display_name": "kironoaki", "link": "https://stackoverflow.com/users/11333566/kironoaki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573701417, "creation_date": 1573700283, "question_id": 58848724, "link": "https://stackoverflow.com/questions/58848724/is-there-any-way-to-obtain-all-in-app-purchase-information-of-users-in-the-curre", "title": "Is there any way to obtain all in-app purchase information of users in the current application", "body": "<p>I need to judge whether the current user can try the subscription for free. The button needs to be changed</p>\n\n<p>If I get the receiver that the user has purchased, I can know whether the user has tried it</p>\n\n<p>I've tried to use restore purchases to get all orders\n<code>[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]</code></p>\n\n<p>In the callback, I also succeeded in getting\nHowever, there is a problem. </p>\n\n<p>It will take 4-5 minutes to display the payment pop-up window of the app store if the purchase is called immediately\n<code>[[SKPaymentQueue defaultQueue] addPayment:payment]</code></p>\n"}, {"tags": ["ios", "objective-c", "uitableview"], "answers": [{"tags": [], "owner": {"reputation": 57, "user_id": 11400924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edef9bc79800f8570e5ae4d207283266?s=128&d=identicon&r=PG&f=1", "display_name": "Excalibur", "link": "https://stackoverflow.com/users/11400924/excalibur"}, "is_accepted": true, "score": 0, "last_activity_date": 1573697928, "creation_date": 1573697928, "answer_id": 58848428, "question_id": 58848390, "link": "https://stackoverflow.com/questions/58848390/previous-uitableviewcell-repeating-after-header-change/58848428#58848428", "title": "Previous UITableViewCell repeating after header change", "body": "<p>Was able to solve by adding the following into <code>cellForRowAtIndexPath</code>:</p>\n\n<pre><code>NSNumber *sectionTitle = [_resultsTitles objectAtIndex:indexPath.section];\nNSArray *sectionResults = [_results objectForKey:sectionTitle];\nNSString *cellData = [sectionResults objectAtIndex:indexPath.row];\n</code></pre>\n\n<p>Now looks like:</p>\n\n<pre><code>-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {\n    // Dequeue the cell.\n    static NSString *identifier = @\"idCellRecord\";\n    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:identifier];\n\n    if (cell == nil) {\n        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];\n    }\n\n    NSNumber *sectionTitle = [_resultsTitles objectAtIndex:indexPath.section];\n    NSArray *sectionResults = [_results objectForKey:sectionTitle];\n    NSString *cellData = [sectionResults objectAtIndex:indexPath.row];\n\n    // Set the loaded data to the appropriate cell labels.\n    cell.textLabel.text = [cellData valueForKey:YourValHere];\n\n    return cell;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 11400924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edef9bc79800f8570e5ae4d207283266?s=128&d=identicon&r=PG&f=1", "display_name": "Excalibur", "link": "https://stackoverflow.com/users/11400924/excalibur"}, "edited": false, "score": 0, "creation_date": 1573740569, "post_id": 58855159, "comment_id": 103988544, "body": "I was able to solve this. Please check my response above. Thank you!"}], "tags": [], "owner": {"reputation": 719, "user_id": 3146021, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5de1b244ab440a3227f3a04f10f42e8a?s=128&d=identicon&r=PG", "display_name": "Trai Nguyen", "link": "https://stackoverflow.com/users/3146021/trai-nguyen"}, "is_accepted": false, "score": 0, "last_activity_date": 1573729040, "creation_date": 1573729040, "answer_id": 58855159, "question_id": 58848390, "link": "https://stackoverflow.com/questions/58848390/previous-uitableviewcell-repeating-after-header-change/58855159#58855159", "title": "Previous UITableViewCell repeating after header change", "body": "<p>Where <strong>self.arrFoodInfo</strong> come from? </p>\n\n<p>I guess self.arrFoodInfo have this data:</p>\n\n<pre><code>(\n        {\n          DATE = \"11/13/2019\";\n          ID = 10;\n          PLACE = Test;\n          PRICE = \"43.23\";\n        },\n        {\n          DATE = \"11/15/2019\";\n          ID = 11;\n          PLACE = OneMore;\n          PRICE = \"32.12\";\n        }\n        {\n          DATE = \"11/18/2019\";\n          ID = 12;\n          PLACE = Kroger;\n          PRICE = \"54.32\";\n        }\n   );\n</code></pre>\n\n<p>The <strong>indexPath.row</strong> in each section is different, when move to next section, <strong>indexPath.row</strong> will restart to <strong>zero</strong>.</p>\n\n<p>You should update the way binding data or restructure self.arrFoodInfo list, example like this in JSON: </p>\n\n<pre><code>[\n  [\n    {\n      \"DATE\": \"11/13/2019\",\n      \"ID\": 10,\n      \"PLACE\": \"Test\",\n      \"PRICE\": \"43.23\"\n    },\n    {\n      \"DATE\": \"11/15/2019\",\n      \"ID\": 11,\n      \"PLACE\": \"OneMore\",\n      \"PRICE\": \"32.12\"\n    }\n  ],\n  [\n    {\n      \"DATE\": \"11/18/2019\",\n      \"ID\": 12,\n      \"PLACE\": \"Kroger\",\n      \"PRICE\": \"54.32\"\n    }\n  ]\n]\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 11400924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edef9bc79800f8570e5ae4d207283266?s=128&d=identicon&r=PG&f=1", "display_name": "Excalibur", "link": "https://stackoverflow.com/users/11400924/excalibur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 58848428, "answer_count": 2, "score": 0, "last_activity_date": 1573729040, "creation_date": 1573697592, "question_id": 58848390, "link": "https://stackoverflow.com/questions/58848390/previous-uitableviewcell-repeating-after-header-change", "title": "Previous UITableViewCell repeating after header change", "body": "<p>I'm creating my own personal budget app that is taking data such as store, money spent, date, etc. onto a table. I'm sorting the entries by <code>strftime %W</code>. My dictionary of the data sorted by <code>%W</code> is:</p>\n\n<pre><code>_results =\n\n{ \n  46 =  (\n            {\n              DATE = \"11/13/2019\";\n              ID = 10;\n              PLACE = Test;\n              PRICE = \"43.23\";\n            },\n            {\n              DATE = \"11/15/2019\";\n              ID = 11;\n              PLACE = OneMore;\n              PRICE = \"32.12\";\n            }\n       );\n  47 =  (\n            {\n              DATE = \"11/18/2019\";\n              ID = 12;\n              PLACE = Kroger;\n              PRICE = \"54.32\";\n            }\n        );\n}\n</code></pre>\n\n<p>My UITableView setup is:</p>\n\n<pre><code>- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {\n    return [_resultsTitles count];\n}\n</code></pre>\n\n<pre><code>- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {\n    return [[_resultsTitles objectAtIndex:section] stringValue];\n}\n</code></pre>\n\n<pre><code>- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {\n//     return self.arrFoodInfo.count;\n    NSNumber *sectionTitle = [_resultsTitles objectAtIndex:section];\n    NSArray *sectionAnimals = [_results objectForKey:sectionTitle];\n    return [sectionAnimals count];\n}\n</code></pre>\n\n<pre><code>-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {\n    return 60.0;\n}\n</code></pre>\n\n<pre><code>-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {\n    // Dequeue the cell.\n    static NSString *identifier = @\"idCellRecord\";\n    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:identifier];\n\n    if (cell == nil) {\n        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];\n    }\n\n    // Set the loaded data to the appropriate cell labels.\n    cell.textLabel.text = [NSString stringWithFormat:@\"%@ | $%@\", [[self.arrFoodInfo objectAtIndex:indexPath.row] valueForKey:@\"PLACE\"], [[self.arrFoodInfo objectAtIndex:indexPath.row] valueForKey:@\"PRICE\"]];\n\n    cell.detailTextLabel.text = [NSString stringWithFormat:@\"Date: %@\", [[self.arrFoodInfo objectAtIndex:indexPath.row] valueForKey:@\"DATE\"]];\n\n    return cell;\n}\n</code></pre>\n\n<p><br>\nWhen running my app, the table headers are correct but when an entry is \"added\" in the next section, the first entry is duplicated.\n<a href=\"https://i.stack.imgur.com/HY9RX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HY9RX.png\" alt=\"Picture of repeated entry\"></a></p>\n\n<p>Is there anyway to get the correct entries showing grouped by the week number?</p>\n"}]