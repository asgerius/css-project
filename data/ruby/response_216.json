[{"tags": ["ruby-on-rails", "ruby", "activemodel"], "answers": [{"comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1551311013, "post_id": 54916224, "comment_id": 96598628, "body": "As an additional suggestion, a <code>Quiz</code> <code>has_many :users, through: :scores</code>."}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 1, "creation_date": 1551359330, "post_id": 54916224, "comment_id": 96617487, "body": "Thanks guys!  After looking at your suggestion, re-reading the docs, this now makes total sense!"}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 6, "last_activity_date": 1551311141, "last_edit_date": 1551311141, "creation_date": 1551310917, "answer_id": 54916224, "question_id": 54916084, "link": "https://stackoverflow.com/questions/54916084/which-rails-active-model-association/54916224#54916224", "title": "Which Rails active model association?", "body": "<p>At a quick glance, it seems like it would be something like: </p>\n\n<pre><code>class Lesson &lt; ApplicationRecord\n  has_one :quiz\nend\n\nclass Quiz &lt; ApplicationRecord\n  belongs_to :lesson\n  has_many :scores\n  has_many :users, through: :scores\nend\n\nclass Score &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :quiz\nend\n\nclass User &lt; ApplicationRecord\n  has_many :scores\n  has_many :quizzes, through: :scores\nend\n</code></pre>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 54916224, "answer_count": 1, "score": 0, "last_activity_date": 1551311141, "creation_date": 1551309981, "question_id": 54916084, "link": "https://stackoverflow.com/questions/54916084/which-rails-active-model-association", "title": "Which Rails active model association?", "body": "<p>Trying to wrap my head around some ActiveModel association strategies.</p>\n\n<p>Here's what I'm trying to accomplish:</p>\n\n<ol>\n<li>A <code>Quiz</code> belongs to a <code>Lesson</code></li>\n<li>A <code>User</code> can take a quiz (they don't own it)</li>\n<li>The quiz score is saved and belongs to a user</li>\n</ol>\n\n<p>So, I believe I'll need a <code>through</code> type table, such as <code>user_quiz_scores</code> that would provide me tracking information with the following columns:</p>\n\n<ul>\n<li>quiz_id</li>\n<li>user_id</li>\n<li>user_quiz_score</li>\n</ul>\n\n<p>Assuming this thought process is correct so far, the Models would look something like:</p>\n\n<pre><code>class Lesson &lt; ApplicationRecord\n  has_one :quiz\nend\n\nclass Quiz &lt; ApplicationRecord\n  belongs_to :lesson\nend\n\nclass Score &lt; ApplicationRecord\n  has_many ??????\nend\n\nclass User &lt; ApplicationRecord\n  has_many :scores\nend\n</code></pre>\n\n<p>The Score model/table is really what I'm having trouble wrapping my head around.  Maybe I've overcomplicated this?  Any help/advice is greatly appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "chef-infra", "redmine"], "answers": [{"tags": [], "owner": {"reputation": 6316, "user_id": 1184717, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7f8710cd5754a79df5dc5cd3d5308da2?s=128&d=identicon&r=PG", "display_name": "Mr.", "link": "https://stackoverflow.com/users/1184717/mr"}, "is_accepted": false, "score": 0, "last_activity_date": 1551363802, "creation_date": 1551363802, "answer_id": 54927841, "question_id": 54915942, "link": "https://stackoverflow.com/questions/54915942/how-to-install-redmine-with-chef/54927841#54927841", "title": "How to install redmine with Chef", "body": "<p>before you try to install a package, you should make sure that your package manager has updated its repository.</p>\n\n<blockquote>\n  <p>It seems to be Chef related because the same apt command works when execute it by myself.</p>\n</blockquote>\n\n<p>did you execute <code>apt update</code> before running the <code>apt install</code> command?<br/>\nif so, you have to make sure that your cookbook does that too and you can do that by using <a href=\"https://docs.chef.io/resource_apt_update.html\" rel=\"nofollow noreferrer\"><code>apt_update</code></a> resource</p>\n"}], "owner": {"reputation": 10176, "user_id": 272839, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c41e721b2e1a3243004aab5fabf8032a?s=128&d=identicon&r=PG", "display_name": "Charles", "link": "https://stackoverflow.com/users/272839/charles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551363802, "creation_date": 1551308909, "question_id": 54915942, "link": "https://stackoverflow.com/questions/54915942/how-to-install-redmine-with-chef", "title": "How to install redmine with Chef", "body": "<p>I try to install Redmine via APT and Chef but it does not work.</p>\n\n<p>I always get the error</p>\n\n<pre><code>Could not find gem 'rails (~&gt; 4.2.7)' in any of the gem sources listed in your\nGemfile.\n</code></pre>\n\n<p>It seems to be Chef related because the same apt command works when execute it by myself.</p>\n\n<p>Here is the output of Chef:</p>\n\n<pre><code>[2019-02-27T17:47:35-05:00] WARN: *****************************************\n[2019-02-27T17:47:35-05:00] WARN: Did not find config file: /root/.chef/chef.rb, using command line options.\n[2019-02-27T17:47:35-05:00] WARN: *****************************************\n[2019-02-27T17:47:35-05:00] WARN: No cookbooks directory found at or above current directory.  Assuming /root.\n[2019-02-27T17:47:35-05:00] FATAL: Cannot load configuration from nodes/redmine.json\nroot@debian:~# cd chef-repo/\nroot@debian:~/chef-repo# chef-client -z -j nodes/redmine.json -c .chef/chef.rb\nStarting Chef Client, version 14.10.9\nresolving cookbooks for run list: [\"my-redmine\"]\nSynchronizing Cookbooks:\n  - my-redmine (1.0.0)\nInstalling Cookbook Gems:\nCompiling Cookbooks...\nConverging 1 resources\nRecipe: my-redmine::default\n  * apt_package[redmine] action install\n\n    ================================================================================\n    Error executing action `install` on resource 'apt_package[redmine]'\n    ================================================================================\n\n    Mixlib::ShellOut::ShellCommandFailed\n    ------------------------------------\n    Expected process to exit with [0], but received '100'\n    ---- Begin output of [\"apt-get\", \"-q\", \"-y\", \"--allow-downgrades\", \"-o\", \"Dpkg::Options::=--force-confdef\", \"-o\", \"Dpkg::Options::=--force-confold\", \"install\", \"redmine=3.3.1-4+deb9u2\"] ----\n    STDOUT: Reading package lists...\n    Building dependency tree...\n    Reading state information...\n    The following additional packages will be installed:\n      dbconfig-common dbconfig-sqlite3 fontconfig-config fonts-dejavu-core\n      fonts-droid-fallback fonts-lato fonts-noto-mono ghostscript gsfonts\n      imagemagick-6-common javascript-common libavahi-client3 libavahi-common-data\n      libavahi-common3 libcups2 libcupsfilters1 libcupsimage2 libcurl3\n      libfftw3-double3 libfontconfig1 libgomp1 libgs9 libgs9-common libijs-0.35\n      libjbig0 libjbig2dec0 libjpeg62-turbo libjs-coffeescript libjs-jquery\n      libjs-source-map libjs-uglify liblcms2-2 liblqr-1-0 libltdl7\n      libmagickcore-6.q16-3 libmagickwand-6.q16-3 libopenjp2-7 libpaper-utils\n      libpaper1 libruby2.3 libtiff5 libuv1 libxslt1.1 libyaml-0-2 nodejs passenger\n      poppler-data rake redmine-sqlite ruby ruby-actionmailer ruby-actionpack\n      ruby-actionpack-action-caching ruby-actionpack-xml-parser ruby-actionview\n      ruby-activejob ruby-activemodel ruby-activerecord ruby-activesupport\n      ruby-addressable ruby-arel ruby-atomic ruby-binding-of-caller\n      ruby-blankslate ruby-builder ruby-bundler ruby-byebug ruby-coderay\n      ruby-coffee-rails ruby-coffee-script ruby-coffee-script-source\n      ruby-columnize ruby-concurrent ruby-css-parser ruby-debug-inspector\n      ruby-did-you-mean ruby-erubis ruby-execjs ruby-ffi ruby-globalid ruby-hike\n      ruby-hmac ruby-htmlentities ruby-i18n ruby-jbuilder ruby-jquery-rails\n      ruby-json ruby-listen ruby-loofah ruby-mail ruby-mime-types ruby-mimemagic\n      ruby-minitest ruby-molinillo ruby-multi-json ruby-net-http-persistent\n      ruby-net-ldap ruby-net-telnet ruby-nokogiri ruby-oj ruby-openid\n      ruby-pkg-config ruby-polyglot ruby-power-assert ruby-protected-attributes\n      ruby-rack ruby-rack-openid ruby-rack-test ruby-rails\n      ruby-rails-deprecated-sanitizer ruby-rails-dom-testing\n      ruby-rails-html-sanitizer ruby-rails-observers ruby-railties ruby-rb-inotify\n      ruby-rbpdf ruby-rbpdf-font ruby-redcarpet ruby-request-store ruby-rmagick\n      ruby-roadie ruby-roadie-rails ruby-sass ruby-sass-rails ruby-sdoc\n      ruby-spring ruby-sprockets ruby-sprockets-rails ruby-sqlite3 ruby-test-unit\n      ruby-thor ruby-thread-safe ruby-tilt ruby-treetop ruby-turbolinks\n      ruby-tzinfo ruby-uglifier ruby-web-console ruby2.3 rubygems-integration\n      sqlite3 unzip zip\n    Suggested packages:\n      fonts-noto ghostscript-x apache2 | lighttpd | httpd cups-common libfftw3-bin\n      libfftw3-dev coffeescript liblcms2-utils libmagickcore-6.q16-3-extra\n      passenger-doc rails poppler-utils fonts-japanese-mincho\n      | fonts-ipafont-mincho fonts-japanese-gothic | fonts-ipafont-gothic\n      fonts-arphic-ukai fonts-arphic-uming fonts-nanum bzr cvs darcs mercurial\n      ruby-fcgi subversion ri ruby-dev ruby-builder-doc doc-base treetop bundler\n      sqlite3-doc\n    The following NEW packages will be installed:\n      dbconfig-common dbconfig-sqlite3 fontconfig-config fonts-dejavu-core\n      fonts-droid-fallback fonts-lato fonts-noto-mono ghostscript gsfonts\n      imagemagick-6-common javascript-common libavahi-client3 libavahi-common-data\n      libavahi-common3 libcups2 libcupsfilters1 libcupsimage2 libcurl3\n      libfftw3-double3 libfontconfig1 libgomp1 libgs9 libgs9-common libijs-0.35\n      libjbig0 libjbig2dec0 libjpeg62-turbo libjs-coffeescript libjs-jquery\n      libjs-source-map libjs-uglify liblcms2-2 liblqr-1-0 libltdl7\n      libmagickcore-6.q16-3 libmagickwand-6.q16-3 libopenjp2-7 libpaper-utils\n      libpaper1 libruby2.3 libtiff5 libuv1 libxslt1.1 libyaml-0-2 nodejs passenger\n      poppler-data rake redmine redmine-sqlite ruby ruby-actionmailer\n      ruby-actionpack ruby-actionpack-action-caching ruby-actionpack-xml-parser\n      ruby-actionview ruby-activejob ruby-activemodel ruby-activerecord\n      ruby-activesupport ruby-addressable ruby-arel ruby-atomic\n      ruby-binding-of-caller ruby-blankslate ruby-builder ruby-bundler ruby-byebug\n      ruby-coderay ruby-coffee-rails ruby-coffee-script ruby-coffee-script-source\n      ruby-columnize ruby-concurrent ruby-css-parser ruby-debug-inspector\n      ruby-did-you-mean ruby-erubis ruby-execjs ruby-ffi ruby-globalid ruby-hike\n      ruby-hmac ruby-htmlentities ruby-i18n ruby-jbuilder ruby-jquery-rails\n      ruby-json ruby-listen ruby-loofah ruby-mail ruby-mime-types ruby-mimemagic\n      ruby-minitest ruby-molinillo ruby-multi-json ruby-net-http-persistent\n      ruby-net-ldap ruby-net-telnet ruby-nokogiri ruby-oj ruby-openid\n      ruby-pkg-config ruby-polyglot ruby-power-assert ruby-protected-attributes\n      ruby-rack ruby-rack-openid ruby-rack-test ruby-rails\n      ruby-rails-deprecated-sanitizer ruby-rails-dom-testing\n      ruby-rails-html-sanitizer ruby-rails-observers ruby-railties ruby-rb-inotify\n      ruby-rbpdf ruby-rbpdf-font ruby-redcarpet ruby-request-store ruby-rmagick\n      ruby-roadie ruby-roadie-rails ruby-sass ruby-sass-rails ruby-sdoc\n      ruby-spring ruby-sprockets ruby-sprockets-rails ruby-sqlite3 ruby-test-unit\n      ruby-thor ruby-thread-safe ruby-tilt ruby-treetop ruby-turbolinks\n      ruby-tzinfo ruby-uglifier ruby-web-console ruby2.3 rubygems-integration\n      sqlite3 unzip zip\n    0 upgraded, 144 newly installed, 0 to remove and 0 not upgraded.\n    Need to get 48.9 MB of archives.\n    After this operation, 170 MB of additional disk space will be used.\n    Get:1 http://security.debian.org/debian-security stretch/updates/main amd64 libruby2.3 amd64 2.3.3-1+deb9u4 [3110 kB]\n    Get:2 http://ftp.us.debian.org/debian stretch/main amd64 fonts-droid-fallback all 1:6.0.1r16-1.1 [1807 kB]\n    Get:3 http://security.debian.org/debian-security stretch/updates/main amd64 ruby2.3 amd64 2.3.3-1+deb9u4 [188 kB]\n    Get:4 http://ftp.us.debian.org/debian stretch/main amd64 fonts-lato all 2.0-1 [2684 kB]\n    Get:5 http://ftp.us.debian.org/debian stretch/main amd64 liblqr-1-0 amd64 0.4.2-2+b2 [24.8 kB]\n    Get:6 http://ftp.us.debian.org/debian stretch/main amd64 libgomp1 amd64 6.3.0-18+deb9u1 [73.3 kB]\n    Get:7 http://ftp.us.debian.org/debian stretch/main amd64 libfftw3-double3 amd64 3.3.5-3 [731 kB]\n    ...\n    ...\n    ...\n    Get:144 http://ftp.us.debian.org/debian stretch/main amd64 zip amd64 3.0-11+b1 [234 kB]\n    Preconfiguring packages ...\n    Fetched 48.9 MB in 32s (1505 kB/s)\n    Selecting previously unselected package fonts-droid-fallback.\n(Reading database ... 41787 files and directories currently installed.)\n    Preparing to unpack .../000-fonts-droid-fallback_1%3a6.0.1r16-1.1_all.deb ...\n    Unpacking fonts-droid-fallback (1:6.0.1r16-1.1) ...\n    Selecting previously unselected package fonts-lato.\n    Preparing to unpack .../001-fonts-lato_2.0-1_all.deb ...\n    Unpacking fonts-lato (2.0-1) ...\n    Selecting previously unselected package liblqr-1-0:amd64.\n    Preparing to unpack .../002-liblqr-1-0_0.4.2-2+b2_amd64.deb ...\n    Unpacking liblqr-1-0:amd64 (0.4.2-2+b2) ...\n    Selecting previously unselected package libgomp1:amd64.\n    Preparing to unpack .../003-libgomp1_6.3.0-18+deb9u1_amd64.deb ...\n    Unpacking libgomp1:amd64 (6.3.0-18+deb9u1) ...\n    Selecting previously unselected package libfftw3-double3:amd64.\n    Preparing to unpack .../004-libfftw3-double3_3.3.5-3_amd64.deb ...\n    Unpacking libfftw3-double3:amd64 (3.3.5-3) ...\n    Selecting previously unselected package fonts-dejavu-core.\n    Preparing to unpack .../005-fonts-dejavu-core_2.37-1_all.deb ...\n    Unpacking fonts-dejavu-core (2.37-1) ...\n    Selecting previously unselected package fontconfig-config.\n    Preparing to unpack .../006-fontconfig-config_2.11.0-6.7_all.deb ...\n    Unpacking fontconfig-config (2.11.0-6.7) ...\n    Selecting previously unselected package libfontconfig1:amd64.\n    Preparing to unpack .../007-libfontconfig1_2.11.0-6.7+b1_amd64.deb ...\n    Unpacking libfontconfig1:amd64 (2.11.0-6.7+b1) ...\n    Selecting previously unselected package libjbig0:amd64.\n    Preparing to unpack .../008-libjbig0_2.1-3.1+b2_amd64.deb ...\n    Unpacking libjbig0:amd64 (2.1-3.1+b2) ...\n    Selecting previously unselected package libjpeg62-turbo:amd64.\n    Preparing to unpack .../009-libjpeg62-turbo_1%3a1.5.1-2_amd64.deb ...\n    Unpacking libjpeg62-turbo:amd64 (1:1.5.1-2) ...\n    Selecting previously unselected package liblcms2-2:amd64.\n    Preparing to unpack .../010-liblcms2-2_2.8-4+deb9u1_amd64.deb ...\n    Unpacking liblcms2-2:amd64 (2.8-4+deb9u1) ...\n    Selecting previously unselected package libltdl7:amd64.\n    Preparing to unpack .../011-libltdl7_2.4.6-2_amd64.deb ...\n    Unpacking libltdl7:amd64 (2.4.6-2) ...\n    Selecting previously unselected package libopenjp2-7:amd64.\n    Preparing to unpack .../012-libopenjp2-7_2.1.2-1.1+deb9u2_amd64.deb ...\n    Unpacking libopenjp2-7:amd64 (2.1.2-1.1+deb9u2) ...\n    Selecting previously unselected package libtiff5:amd64.\n    Preparing to unpack .../013-libtiff5_4.0.8-2+deb9u4_amd64.deb ...\n    Unpacking libtiff5:amd64 (4.0.8-2+deb9u4) ...\n    Selecting previously unselected package imagemagick-6-common.\n    Preparing to unpack .../014-imagemagick-6-common_8%3a6.9.7.4+dfsg-11+deb9u6_all.deb ...\n    Unpacking imagemagick-6-common (8:6.9.7.4+dfsg-11+deb9u6) ...\n    Selecting previously unselected package libmagickcore-6.q16-3:amd64.\n    Preparing to unpack .../015-libmagickcore-6.q16-3_8%3a6.9.7.4+dfsg-11+deb9u6_amd64.deb ...\n    Unpacking libmagickcore-6.q16-3:amd64 (8:6.9.7.4+dfsg-11+deb9u6) ...\n    Selecting previously unselected package libmagickwand-6.q16-3:amd64.\n    Preparing to unpack .../016-libmagickwand-6.q16-3_8%3a6.9.7.4+dfsg-11+deb9u6_amd64.deb ...\n    Unpacking libmagickwand-6.q16-3:amd64 (8:6.9.7.4+dfsg-11+deb9u6) ...\n    Selecting previously unselected package poppler-data.\n    Preparing to unpack .../017-poppler-data_0.4.7-8_all.deb ...\n    Unpacking poppler-data (0.4.7-8) ...\n    Selecting previously unselected package dbconfig-common.\n    Preparing to unpack .../018-dbconfig-common_2.0.8_all.deb ...\n    Unpacking dbconfig-common (2.0.8) ...\n    Selecting previously unselected package sqlite3.\n    Preparing to unpack .../019-sqlite3_3.16.2-5+deb9u1_amd64.deb ...\n    Unpacking sqlite3 (3.16.2-5+deb9u1) ...\n    Selecting previously unselected package dbconfig-sqlite3.\n    Preparing to unpack .../020-dbconfig-sqlite3_2.0.8_all.deb ...\n    Unpacking dbconfig-sqlite3 (2.0.8) ...\n    ...\n    ...        \n    ...\n    Setting up ruby-builder (3.2.2-4) ...\n    Setting up ruby-activemodel (2:4.2.7.1-1) ...\n    Setting up ruby-jbuilder (2.3.1-1) ...\n    Setting up ruby-sprockets (3.7.0-1+deb9u1) ...\n    Setting up ruby-bundler (1.13.6-2) ...\n    Setting up ruby-rails-html-sanitizer (1.0.3-2) ...\n    Setting up ruby-activerecord (2:4.2.7.1-1) ...\n    Setting up ruby-rails-dom-testing (1.0.6-1) ...\n    Setting up ruby-activejob (2:4.2.7.1-1) ...\n    Setting up ruby-rack-openid (1.4.2-1) ...\n    Setting up ruby-protected-attributes (1.1.3-2) ...\n    Setting up ruby-rails-observers (0.1.2-1) ...\n    Setting up ruby-actionview (2:4.2.7.1-1) ...\n    Setting up ruby-actionpack (2:4.2.7.1-1) ...\n    Setting up ruby-actionpack-xml-parser (1.0.2-2) ...\n    Setting up ruby-actionmailer (2:4.2.7.1-1) ...\n    Setting up ruby-railties (2:4.2.7.1-1) ...\n    Setting up ruby-sprockets-rails (2.3.2-1) ...\n    Setting up ruby-roadie-rails (1.1.0-1) ...\n    Setting up ruby-actionpack-action-caching (1.1.1-4) ...\n    Setting up ruby-jquery-rails (4.2.1-2) ...\n    Setting up ruby-coffee-rails (4.1.0-2) ...\n    Setting up ruby-rails (2:4.2.7.1-1) ...\n    Setting up redmine (3.3.1-4+deb9u2) ...\n    Could not find gem 'rails (~&gt; 4.2.7)' in any of the gem sources listed in your\n    Gemfile.\n    dpkg: error processing package redmine (--configure):\n     subprocess installed post-installation script returned error exit status 1\n    Setting up ruby-sass-rails (5.0.6-1) ...\n    Setting up ruby-web-console (2.2.1-2) ...\n    Setting up ruby-turbolinks (2.5.3-3) ...\n    Processing triggers for libc-bin (2.24-11+deb9u4) ...\n    Errors were encountered while processing:\n     redmine\nExtracting templates from packages: 100%ckages: 20%\n    E: Sub-process /usr/bin/dpkg returned an error code (1)\n    ---- End output of [\"apt-get\", \"-q\", \"-y\", \"--allow-downgrades\", \"-o\", \"Dpkg::Options::=--force-confdef\", \"-o\", \"Dpkg::Options::=--force-confold\", \"install\", \"redmine=3.3.1-4+deb9u2\"] ----\n    Ran [\"apt-get\", \"-q\", \"-y\", \"--allow-downgrades\", \"-o\", \"Dpkg::Options::=--force-confdef\", \"-o\", \"Dpkg::Options::=--force-confold\", \"install\", \"redmine=3.3.1-4+deb9u2\"] returned 100\n\n    Resource Declaration:\n    ---------------------\n    # In /root/chef-repo/.chef/local-mode-cache/cache/cookbooks/my-redmine/recipes/default.rb\n\n     20: package 'redmine' do\n     21:   action :install\n     22: end\n\n    Compiled Resource:\n    ------------------\n    # Declared in /root/chef-repo/.chef/local-mode-cache/cache/cookbooks/my-redmine/recipes/default.rb:20:in `from_file'\n\n    apt_package(\"redmine\") do\n      package_name \"redmine\" \n      action [:install]\n      default_guard_interpreter :default\n      declared_type :package\n      cookbook_name \"my-redmine\" \n      recipe_name \"default\" \n    end\n\n    System Info:\n    ------------\n    chef_version=14.10.9\n    platform=debian\n    platform_version=9.8\n    ruby=ruby 2.5.3p105 (2018-10-18 revision 65156) [x86_64-linux]\n    program_name=/usr/bin/chef-client\n    executable=/opt/chef/bin/chef-client\n\nRunning handlers:\n[2019-02-27T17:48:38-05:00] ERROR: Running exception handlers\nRunning handlers complete\n[2019-02-27T17:48:38-05:00] ERROR: Exception handlers complete\nChef Client failed. 0 resources updated in 59 seconds\n[2019-02-27T17:48:38-05:00] FATAL: Stacktrace dumped to /root/chef-repo/.chef/local-mode-cache/cache/chef-stacktrace.out\n[2019-02-27T17:48:38-05:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report\n[2019-02-27T17:48:38-05:00] FATAL: Mixlib::ShellOut::ShellCommandFailed: apt_package[redmine] (my-redmine::default line 20) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '100'\n---- Begin output of [\"apt-get\", \"-q\", \"-y\", \"--allow-downgrades\", \"-o\", \"Dpkg::Options::=--force-confdef\", \"-o\", \"Dpkg::Options::=--force-confold\", \"install\", \"redmine=3.3.1-4+deb9u2\"] ----\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 6, "creation_date": 1551308255, "post_id": 54915714, "comment_id": 96597873, "body": "<code>(1..4).each { |n| puts n.to_s * n }</code>"}, {"owner": {"reputation": 11, "user_id": 11127719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e884afc3623ba4777d11ed12e90ef8?s=128&d=identicon&r=PG&f=1", "display_name": "T8rsalad", "link": "https://stackoverflow.com/users/11127719/t8rsalad"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1551308830, "post_id": 54915714, "comment_id": 96598037, "body": "This is where i&#39;m at so far   i = 1 while (i &lt; 7)   puts i   i = i + 1 end                   The problem is, is that i have to have one 1 two 2&#39;s three 3&#39;s and so on but i&#39;m really new to this and not sure how to implement it. My homework states that i need to use 2 while loops and an if statement. Im not asking for the answer rather then a walkthrough of how to solve it."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 5, "creation_date": 1551309530, "post_id": 54915714, "comment_id": 96598241, "body": "<code>puts &quot;1 22 333 4444&quot;</code>. &#175;\\_(\u30c4)_/&#175;"}, {"owner": {"reputation": 11, "user_id": 11127719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e884afc3623ba4777d11ed12e90ef8?s=128&d=identicon&r=PG&f=1", "display_name": "T8rsalad", "link": "https://stackoverflow.com/users/11127719/t8rsalad"}, "edited": false, "score": 0, "creation_date": 1551309869, "post_id": 54915714, "comment_id": 96598330, "body": "i wish i could do that but my professor likes to assign us stuff that he never taught and expect us to some how get exactly what he wants. i can get it do count from 1 to 6 but now i some how need to get the number to go 1 22 333 4444 etc. im lost :("}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1551312181, "post_id": 54915714, "comment_id": 96598909, "body": "Use <code>i.to_s * i</code> in your <code>while</code> loop. I don&#39;t see why you need 2 <code>while</code> loops or an <code>if</code> expression."}, {"owner": {"reputation": 11, "user_id": 11127719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e884afc3623ba4777d11ed12e90ef8?s=128&d=identicon&r=PG&f=1", "display_name": "T8rsalad", "link": "https://stackoverflow.com/users/11127719/t8rsalad"}, "edited": false, "score": 0, "creation_date": 1551312495, "post_id": 54915714, "comment_id": 96598978, "body": "thats giving me a infinite loop of 1&#39;s. i&#39;m sorry if im not getting this. Im sure if I dont use a nested while loop and a if statement and still get the same result he will still give me credit. As long as i dont just use puts &quot;1 22 333 4444&quot;"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1551313289, "post_id": 54915714, "comment_id": 96599185, "body": "You can make an open-ended loop and <code>break</code> if it&#39;s looped enough times. That would give you two loops."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551331184, "post_id": 54915714, "comment_id": 96603199, "body": "@CarySwoveland haha, for no dynamic input passed, constant response output can be simply <code>puts &quot;1 22 333 4444&quot;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "is_accepted": true, "score": 0, "last_activity_date": 1551317564, "creation_date": 1551317564, "answer_id": 54917052, "question_id": 54915714, "link": "https://stackoverflow.com/questions/54915714/how-to-produce-multiples-of-numbers-in-ruby/54917052#54917052", "title": "How to produce multiples of numbers in ruby", "body": "<p>I tried:</p>\n\n<blockquote>\n  <p>puts (1..4).map{|i| i.to_s * i}.join(\" \")</p>\n</blockquote>\n\n<p>It yielded</p>\n\n<blockquote>\n  <p>1 22 333 4444</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 531, "user_id": 4327377, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0rdf8UzSkJ8/AAAAAAAAAAI/AAAAAAAAARg/5s_a9PQ0XRE/photo.jpg?sz=128", "display_name": "sghosh968", "link": "https://stackoverflow.com/users/4327377/sghosh968"}, "is_accepted": false, "score": 0, "last_activity_date": 1551332322, "creation_date": 1551332322, "answer_id": 54919056, "question_id": 54915714, "link": "https://stackoverflow.com/questions/54915714/how-to-produce-multiples-of-numbers-in-ruby/54919056#54919056", "title": "How to produce multiples of numbers in ruby", "body": "<p>This works fine for me.</p>\n\n<pre><code>(1..4).each{ |i| i.times{ print i }; puts \"\" }\n</code></pre>\n\n<p><strong>Explaination</strong></p>\n\n<ul>\n<li>uses a <a href=\"https://ruby-doc.org/core-2.2.0/Range.html\" rel=\"nofollow noreferrer\">range</a> and iterates through each item and prints the</li>\n<li>current item required no. of time i.e. current item</li>\n<li>at the end adds a new line so the next prints start on a new line</li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 11127719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82e884afc3623ba4777d11ed12e90ef8?s=128&d=identicon&r=PG&f=1", "display_name": "T8rsalad", "link": "https://stackoverflow.com/users/11127719/t8rsalad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "accepted_answer_id": 54917052, "answer_count": 2, "score": 0, "last_activity_date": 1551332322, "creation_date": 1551307538, "last_edit_date": 1551330825, "question_id": 54915714, "link": "https://stackoverflow.com/questions/54915714/how-to-produce-multiples-of-numbers-in-ruby", "title": "How to produce multiples of numbers in ruby", "body": "<p>I'm trying to get ruby to output </p>\n\n<pre><code>1 \n22 \n333\n4444\n</code></pre>\n\n<p>I have to use a nested <code>while</code> loop and an <code>if</code> statement. I'm not sure where to go from there.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "input-filtering"], "comments": [{"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 0, "creation_date": 1551305123, "post_id": 54914984, "comment_id": 96596758, "body": "Can you add your relations and schema? Book has the singular relation <code>author</code>. How are you storing multiple authors for a book?"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11127546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6231b3ba2e43ac852729b6eb404436e4?s=128&d=identicon&r=PG&f=1", "display_name": "Jadoo", "link": "https://stackoverflow.com/users/11127546/jadoo"}, "edited": false, "score": 0, "creation_date": 1551305233, "post_id": 54915101, "comment_id": 96596803, "body": "<code>SQLite3::SQLException: no such column: books.author: SELECT &quot;books&quot;.* FROM &quot;books&quot; WHERE &quot;books&quot;.&quot;title&quot; = ? AND &quot;books&quot;.&quot;year&quot; = ? AND &quot;books&quot;.&quot;author&quot; IN (&#39;harry&#39;, &#39;doyle&#39;, &#39;owen&#39;, &#39;hall&#39;, &#39;shelby&#39;, &#39;whyte&#39;, &#39;alex&#39;, &#39;parrish&#39;) ORDER BY &quot;books&quot;.&quot;published_at&quot; DESC</code>"}, {"owner": {"reputation": 2290, "user_id": 4190933, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-437mIFzYMIA/AAAAAAAAAAI/AAAAAAAABXU/pU1re7BSt2w/photo.jpg?sz=128", "display_name": "Jared Menard", "link": "https://stackoverflow.com/users/4190933/jared-menard"}, "reply_to_user": {"reputation": 21, "user_id": 11127546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6231b3ba2e43ac852729b6eb404436e4?s=128&d=identicon&r=PG&f=1", "display_name": "Jadoo", "link": "https://stackoverflow.com/users/11127546/jadoo"}, "edited": false, "score": 0, "creation_date": 1551364050, "post_id": 54915101, "comment_id": 96620372, "body": "Could you provide a copy of your structure.sql file? It sounds like you don&#39;t have a column named &quot;author&quot;."}], "tags": [], "owner": {"reputation": 2290, "user_id": 4190933, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-437mIFzYMIA/AAAAAAAAAAI/AAAAAAAABXU/pU1re7BSt2w/photo.jpg?sz=128", "display_name": "Jared Menard", "link": "https://stackoverflow.com/users/4190933/jared-menard"}, "is_accepted": false, "score": 0, "last_activity_date": 1551304500, "creation_date": 1551304500, "answer_id": 54915101, "question_id": 54914984, "link": "https://stackoverflow.com/questions/54914984/how-to-filter-a-models-field-by-multiple-values-ord/54915101#54915101", "title": "How to filter a models field by multiple values (OR&#39;d)", "body": "<pre><code>authors = [\"harry\", \"doyle\", \"alex\", \"parrish\"]  \nBook.where(author: authors)\n</code></pre>\n\n<p>or </p>\n\n<pre><code>authors = [\"harry\", \"doyle\", \"alex\", \"parrish\"]  \nauths = Author.where(name: authors)\nBook.where(author: auths)\n</code></pre>\n\n<p>This assumes that an Author has many Books. \nYou can learn more about model associations here: <a href=\"https://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/association_basics.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 11127546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6231b3ba2e43ac852729b6eb404436e4?s=128&d=identicon&r=PG&f=1", "display_name": "Jadoo", "link": "https://stackoverflow.com/users/11127546/jadoo"}, "edited": false, "score": 0, "creation_date": 1551307554, "post_id": 54915677, "comment_id": 96597645, "body": "Hey i know we can use this <code>Author.find_by(name: auth).try(:id)</code> to convert the string  author into the actual author"}, {"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "reply_to_user": {"reputation": 21, "user_id": 11127546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6231b3ba2e43ac852729b6eb404436e4?s=128&d=identicon&r=PG&f=1", "display_name": "Jadoo", "link": "https://stackoverflow.com/users/11127546/jadoo"}, "edited": false, "score": 0, "creation_date": 1551308025, "post_id": 54915677, "comment_id": 96597794, "body": "<code>Author.where(name: author_names)</code> this would take the array much like the <code>find_by</code> uses a single name. Using <code>where</code> will prevent the records from loading though and leave them in an <code>ActiveRecord::Relation</code> which is needed for the merge operation. If the names listed are exactly those in the database you can use <code>Book.joins(:authors).merge(Author.where(name: author_names))</code>"}], "tags": [], "owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "is_accepted": false, "score": 0, "last_activity_date": 1551307343, "creation_date": 1551307343, "answer_id": 54915677, "question_id": 54914984, "link": "https://stackoverflow.com/questions/54914984/how-to-filter-a-models-field-by-multiple-values-ord/54915677#54915677", "title": "How to filter a models field by multiple values (OR&#39;d)", "body": "<p>First you need to get your <code>Author</code> records.  How this is done depends on your schema and data, but it will be something akin to:</p>\n\n<pre><code>author_names = [\"harry\", \"doyle\", \"alex\", \"parrish\"]\n</code></pre>\n\n<p>Then one of the following:</p>\n\n<pre><code>authors = Author.where(name: author_names)\nauthors = Author.where(\"name ILIKE ANY ( array[?] )\", author_names.map { |name| \"%#{name}%\" })\n</code></pre>\n\n<p>Something that gets us an <code>ActiveRecord::Relation</code> of the authors we need.  Once we have the authors we can merge that with our books to get all the books we want:</p>\n\n<pre><code>books = Book.joins(:authors).merge(authors)\n</code></pre>\n\n<p>Note that the join is on the plural author<strong>s</strong>.  Rails will know to join through the join table (should be <code>authors_books</code> by default) to the <code>authors</code> table.</p>\n"}, {"tags": [], "owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "is_accepted": false, "score": 0, "last_activity_date": 1551337021, "creation_date": 1551337021, "answer_id": 54920053, "question_id": 54914984, "link": "https://stackoverflow.com/questions/54914984/how-to-filter-a-models-field-by-multiple-values-ord/54920053#54920053", "title": "How to filter a models field by multiple values (OR&#39;d)", "body": "<p>You get an array of author names, right?</p>\n\n<pre><code>scope :by_author, lambda { |names|\n  # if you have a chance to get blank values you need to reject them\n  names.reject!(&amp;:blank?) if names.is_a? Array\n\n  joins(:authors).where(authors: { name: names }).distinct if names.present?\n}\n</code></pre>\n\n<p>It should work properly with array or string argument</p>\n\n<pre><code>Book.by_author([\"harry\", \"doyle\"])\nBook.by_author(\"harry\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 74, "user_id": 7790064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oO2Rk.jpg?s=128&g=1", "display_name": "Shaik", "link": "https://stackoverflow.com/users/7790064/shaik"}, "is_accepted": false, "score": 0, "last_activity_date": 1551337470, "creation_date": 1551337470, "answer_id": 54920136, "question_id": 54914984, "link": "https://stackoverflow.com/questions/54914984/how-to-filter-a-models-field-by-multiple-values-ord/54920136#54920136", "title": "How to filter a models field by multiple values (OR&#39;d)", "body": "<p>Try Below code:</p>\n\n<pre><code>authors = [\"harry\", \"doyle\", \"alex\", \"parrish\"]    \nBook.joins(:authors).where(:authors =&gt; {:name =&gt; authors})\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11127546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6231b3ba2e43ac852729b6eb404436e4?s=128&d=identicon&r=PG&f=1", "display_name": "Jadoo", "link": "https://stackoverflow.com/users/11127546/jadoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1551337470, "creation_date": 1551303902, "last_edit_date": 1551305436, "question_id": 54914984, "link": "https://stackoverflow.com/questions/54914984/how-to-filter-a-models-field-by-multiple-values-ord", "title": "How to filter a models field by multiple values (OR&#39;d)", "body": "<p>I have a model say <code>Book</code> which has the following scope function:</p>\n\n<pre><code>scope :author, lambda { |author|\n    return where(nil) unless author.present?\n    joins(:author).where('author.id' =&gt; author)\n  }\n</code></pre>\n\n<p>This can filter the Books with only ONE author value. What I want to do is that I am passed a array from a JavaScript file which is a list of authors for example: <code>[\"harry\", \"doyle\", \"alex\", \"parrish\"]</code> and I want to be able to find all the books who has ANY of these authors (so an OR query here).  Note each book can have multiple authors.</p>\n\n<p>I have tried the following function but it simply gives me all the books rather than filtering correctly as I stated above.</p>\n\n<pre><code>scope :authors_multiple, lambda { |authors|\n  @results = Book\n  authors.each do |auth|\n    @results = @results.author(auth)\n  end\n  return @results\n}\n</code></pre>\n\n<p>model Author (extract):</p>\n\n<pre><code>class Author &lt; ApplicationRecord\n  has_and_belongs_to_many :books, uniq: true\n  ....\n</code></pre>\n\n<p>model Book (extract):</p>\n\n<pre><code>class Book &lt; ApplicationRecord\n  has_and_belongs_to_many :authors, uniq: true\n  ....\n</code></pre>\n\n<p>Can you please help me understand what I am doing wrong or what may be the right way to do it. Thanks in advance.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1551301064, "post_id": 54914345, "comment_id": 96595003, "body": "please, please put the code as text in the question, not a screenshot."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1551301255, "post_id": 54914345, "comment_id": 96595081, "body": "And to be clear, are you wanting that &quot;to&quot;, &quot;two&quot;, and &quot;too&quot; all be replaced by &quot;2&quot;?"}, {"owner": {"reputation": 67, "user_id": 11127396, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FMSsbyWTmLk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcVZbUWrz5PMNjt9bA8BxRpUrEOfA/mo/photo.jpg?sz=128", "display_name": "Zubair Maqsood", "link": "https://stackoverflow.com/users/11127396/zubair-maqsood"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1551301353, "post_id": 54914345, "comment_id": 96595127, "body": "yes and sorry about the image"}], "answers": [{"tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 0, "last_activity_date": 1551312676, "creation_date": 1551312676, "answer_id": 54916472, "question_id": 54914345, "link": "https://stackoverflow.com/questions/54914345/replace-words-in-a-string-with-the-words-defined-as-values-in-a-hash/54916472#54916472", "title": "Replace words in a string with the words defined as values in a hash", "body": "<p>Naive words enumeration</p>\n\n<pre><code>DICTIONARY = {\n  \"Hello\" =&gt; \"hi\",\n  \"to, two, too\" =&gt; \"2\",\n  \"for, four\" =&gt; \"4\",\n  \"be\" =&gt; \"b\",\n  \"you\" =&gt; \"u\",\n  \"at\" =&gt; \"@\",\n  \"and\" =&gt; \"&amp;\"\n}.freeze\n\ndef word_substituter(tweet)\n  dict = {}\n  DICTIONARY.keys.map { |k| k.split(', ') }.flatten.each do |w|\n    DICTIONARY.each { |k, v| dict.merge!(w =&gt; v) if k.include?(w) }\n  end\n\n  tweet.split(' ').map do |s|\n    dict.each { |k, v| s.sub!(/#{k}/, v) if s =~ /\\A#{k}[[:punct:]]*\\z/ }\n    s\n  end.join(' ')\nend\n\nword_substituter(\"Hey guys, I'm Robe too. Can anyone teach me how to be cool? I really want to be the best at everything, you know what I mean? Tweeting is super fun you guys!!!!\")\n\n# =&gt; \"Hey guys, I'm Robe 2. Can anyone teach me how 2 b cool? I really want 2 b the best @ everything, u know what I mean? Tweeting is super fun u guys!!!!\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1551696888, "post_id": 54930365, "comment_id": 96721404, "body": "Did this help at all @ZubairMaqsood?"}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": false, "score": 0, "last_activity_date": 1551373384, "last_edit_date": 1551373384, "creation_date": 1551371875, "answer_id": 54930365, "question_id": 54914345, "link": "https://stackoverflow.com/questions/54914345/replace-words-in-a-string-with-the-words-defined-as-values-in-a-hash/54930365#54930365", "title": "Replace words in a string with the words defined as values in a hash", "body": "<p>I feel like this provides a fairly simple solution to this:</p>\n\n<pre><code>DICTIONARY = {\n  \"Hello\" =&gt; \"hi\",\n  \"to, two, too\" =&gt; \"2\",\n  \"for, four\" =&gt; \"4\",\n  \"be\" =&gt; \"b\",\n  \"you\" =&gt; \"u\",\n  \"at\" =&gt; \"@\",\n  \"and\" =&gt; \"&amp;\"\n}.freeze\n\ndef word_substituter(tweet)\n  tweet.dup.tap do |t|\n    DICTIONARY.each { |key, replacement| t.gsub!(/\\b(#{key.split(', ').join('|')})\\b/, replacement) }\n  end\nend\n\nword_substituter(\"Hey guys, can anyone teach me how to be cool? I really want to be the best at everything, you know what I mean? Tweeting is super fun you guys!!!!\")\n\n# =&gt; \"Hey guys, can anyone teach me how 2 b cool? I really want 2 b the best @ everything, u know what I mean? Tweeting is super fun u guys!!!!\"\n</code></pre>\n\n<p>Breaking it down into steps:</p>\n\n<ul>\n<li>the method takes a tweet and creates a copy</li>\n<li>it passes this to <a href=\"https://apidock.com/ruby/Object/tap\" rel=\"nofollow noreferrer\"><code>tap</code></a> so it's returned from the method call</li>\n<li>it iterates through the <code>DICTIONARY</code></li>\n<li>transforms the <code>key</code> into a regex matcher (e.g. <code>/\\b(to|two|too)\\b/</code>)</li>\n<li>passes this to <a href=\"https://apidock.com/ruby/String/gsub%21\" rel=\"nofollow noreferrer\"><code>gsub!</code></a> and replaces any matches with the <code>replacement</code></li>\n</ul>\n\n<p>If you want this to replace occurrence within words (e.g. <code>what =&gt; wh@</code>), you can remove the checks for word boundaries (<code>\\b</code>) in the regex.</p>\n\n<p>One gotcha is that if any of your dictionary's keys contain regex matchers, this would need a little rework: if you had <code>\"goodbye.\" =&gt; 'later xxx'</code>, the dot would match any character and include it in what's replaced. <a href=\"http://ruby-doc.org/core-2.6.1/Regexp.html#method-c-escape\" rel=\"nofollow noreferrer\"><code>Regexp.escape</code></a> is your friend here.</p>\n\n<p>Hope this helps - let me know how you get on.</p>\n"}], "owner": {"reputation": 67, "user_id": 11127396, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FMSsbyWTmLk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcVZbUWrz5PMNjt9bA8BxRpUrEOfA/mo/photo.jpg?sz=128", "display_name": "Zubair Maqsood", "link": "https://stackoverflow.com/users/11127396/zubair-maqsood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1551373384, "creation_date": 1551300998, "last_edit_date": 1551331136, "question_id": 54914345, "link": "https://stackoverflow.com/questions/54914345/replace-words-in-a-string-with-the-words-defined-as-values-in-a-hash", "title": "Replace words in a string with the words defined as values in a hash", "body": "<p>The aim is to replace specific words in a string by the values defined in the dictionary.</p>\n\n<pre><code>dictionary =\n    {\"Hello\" =&gt; \"hi\",\n    \"to, two, too\" =&gt; \"2\",\n    \"for, four\" =&gt; \"4\",\n    \"be\" =&gt; \"b\",\n    \"you\" =&gt; \"u\",\n    \"at\" =&gt; \"@\",\n    \"and\" =&gt; \"&amp;\"\n}\n\ndef word_substituter(tweet)\n    tweet_array = tweet.split(',') ##converting the string to array\n    tweet_array.each do |word|\n        if word === dictionary.keys ##if the words of array are equal to the keys of the dictionary\n         word == dictionary.values ##then now the words are now the the values of the dictionary\n         puts word\n        end\n      end \n    word.join(\", \")\nend\n\nword_substituter(\"Hey guys, can anyone teach me how to be cool? I really want to be the best at everything, you know what I mean? Tweeting is super fun you guys!!!!\")\n</code></pre>\n\n<p>I would appreciate the help. Could you explain it?</p>\n"}, {"tags": ["ruby", "process", "fork"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1551301801, "post_id": 54914122, "comment_id": 96595334, "body": "Isn&#39;t there a separate ruby process there? Your &quot;ruby fork&quot; output shows 2 irb processes."}, {"owner": {"reputation": 21271, "user_id": 168143, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/75fb60cc633a994debfe8b3a19eb91cb?s=128&d=identicon&r=PG", "display_name": "John Bachir", "link": "https://stackoverflow.com/users/168143/john-bachir"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1551304564, "post_id": 54914122, "comment_id": 96596554, "body": "@maxpleaner yes \u2014 that&#39;s expected. i&#39;m also expecting to see some sort of ruby process in the shell case. I just updated the question to explain this better. Thanks for asking!"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1551339198, "post_id": 54914122, "comment_id": 96606280, "body": "I am not sure why you would expect to see a ruby process if you shell out. You should expect to see a shell process. After all, you are running a shell command, not a ruby command."}, {"owner": {"reputation": 21271, "user_id": 168143, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/75fb60cc633a994debfe8b3a19eb91cb?s=128&d=identicon&r=PG", "display_name": "John Bachir", "link": "https://stackoverflow.com/users/168143/john-bachir"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1551410346, "post_id": 54914122, "comment_id": 96638787, "body": "@J&#246;rgWMittag google [ruby backtick fork] and you will see some discussion of the fact that ruby forks whatever process is running before shelling out. I don&#39;t know the history of this but digging around in the ruby source does show some language about forking when creating a pipe. I&#39;ve never seen a great explanation of it though! See the Readme here <a href=\"https://github.com/rtomayko/posix-spawn\" rel=\"nofollow noreferrer\">github.com/rtomayko/posix-spawn</a>"}, {"owner": {"reputation": 21271, "user_id": 168143, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/75fb60cc633a994debfe8b3a19eb91cb?s=128&d=identicon&r=PG", "display_name": "John Bachir", "link": "https://stackoverflow.com/users/168143/john-bachir"}, "edited": false, "score": 0, "creation_date": 1551410540, "post_id": 54914122, "comment_id": 96638822, "body": "Some good discussion of the whole issue here: <a href=\"https://blog.sundaycoding.com/blog/2014/02/05/fighting-paperclip-errno-enomem-error/\" rel=\"nofollow noreferrer\">blog.sundaycoding.com/blog/2014/02/05/&hellip;</a>"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1551434682, "post_id": 54914122, "comment_id": 96647379, "body": "I would assume that even <i>if</i> YARV uses the ancient and obsolete method of <code>fork</code> + <code>exec</code>, the time window in between the <code>fork</code> and the <code>exec</code> would be much too small to observe the original process, especially with such crude tools as <code>ps</code>. If YARV uses a more modern method such as <code>posix_spawn</code>, there won&#39;t even be a time window with the original process."}], "owner": {"reputation": 21271, "user_id": 168143, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/75fb60cc633a994debfe8b3a19eb91cb?s=128&d=identicon&r=PG", "display_name": "John Bachir", "link": "https://stackoverflow.com/users/168143/john-bachir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1551304548, "creation_date": 1551300026, "last_edit_date": 1551304548, "question_id": 54914122, "link": "https://stackoverflow.com/questions/54914122/why-do-i-not-see-a-new-ruby-process-when-i-shell-out", "title": "Why do I not see a new ruby process when I shell out?", "body": "<p>My understanding is that when you shell out in ruby, the entire ruby process forks first. However, I can't find a way to observe this at the OS level. All I see is the standalone OS process. My methodology is below. In the sleep case I'm expecting to see some sort of ruby child process, but I only see the OS-level sleep process running. As comparison, I also do an explicit fork to see what shows up in the output of ps. The behavior here is what I expect.</p>\n\n<p>Is there something wrong with my methodology (maybe ps isn't showing child processes in some cases?), or am I wrong about ruby forking?</p>\n\n<h2>Terminal 1 (pts/0)</h2>\n\n<p>running irb</p>\n\n<p>I try this:</p>\n\n<pre><code>`sleep 10`\n</code></pre>\n\n<p>And this:</p>\n\n<pre><code>Process.wait2(Process.fork {sleep 10})\n</code></pre>\n\n<h2>Terminal 2 (pts/2)</h2>\n\n<pre><code>watch \"ps -A -O rss |grep 'pts/0'| grep -v 'pts/1'\"\n</code></pre>\n\n<h1>Results</h1>\n\n<h2>Before</h2>\n\n<pre><code>3795 10704 S pts/0    00:00:00 irb\n</code></pre>\n\n<h2>After</h2>\n\n<h3>shell sleep</h3>\n\n<pre><code>3795 10704 S pts/0    00:00:00 irb\n4397   680 S pts/0    00:00:00 sleep 5\n</code></pre>\n\n<h3>ruby fork</h3>\n\n<pre><code>3795 10704 S pts/0    00:00:00 irb\n4449  5680 S pts/0    00:00:00 irb\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 0, "creation_date": 1551300034, "post_id": 54914062, "comment_id": 96594573, "body": "How looks your <code>Projects</code> controller?"}, {"owner": {"reputation": 21, "user_id": 6783247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f703762154db16f68b3347f34c1fac33?s=128&d=identicon&r=PG", "display_name": "Ozgur SARIOGLAN", "link": "https://stackoverflow.com/users/6783247/ozgur-sarioglan"}, "reply_to_user": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 0, "creation_date": 1551301996, "post_id": 54914062, "comment_id": 96595428, "body": "resimag.com/p1/c7e6e3b5f41.png resimag.com/p1/c541f8849df.png"}, {"owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 0, "creation_date": 1551304560, "post_id": 54914062, "comment_id": 96596549, "body": "Do you have tour associations in place?"}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 0, "creation_date": 1551305013, "post_id": 54914062, "comment_id": 96596711, "body": "It looks that some <code>Project</code> doesn&#39;t have <code>User</code>. To prevent of this situation I recommend use <code>validates :user_id, presence: true</code> in <code>Project</code> model."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1551331861, "post_id": 54914062, "comment_id": 96603390, "body": "There is no <code>user_id</code> column in your <code>projects</code> table but a <code>manager_id</code>. But at the same time, there is no <code>managers</code> table, but only a <code>users</code> table. You clearly do not follow Rails naming conventions and therefore must add more options to your association configuration (because of <code>manager_id</code> point to a foreign key on a <code>users</code> table). But even than you have to make a decision should this association be named <code>manager</code> (like in the model and the db) or <code>user</code> (link in your view). Please clarify!"}, {"owner": {"reputation": 21, "user_id": 6783247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f703762154db16f68b3347f34c1fac33?s=128&d=identicon&r=PG", "display_name": "Ozgur SARIOGLAN", "link": "https://stackoverflow.com/users/6783247/ozgur-sarioglan"}, "edited": false, "score": 0, "creation_date": 1551332823, "post_id": 54914062, "comment_id": 96603691, "body": "users want to have a single table,  managers have no tables, yes I want to point a foreign key users table id column = projects table manager_id column"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6783247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f703762154db16f68b3347f34c1fac33?s=128&d=identicon&r=PG", "display_name": "Ozgur SARIOGLAN", "link": "https://stackoverflow.com/users/6783247/ozgur-sarioglan"}, "edited": false, "score": 0, "creation_date": 1551333010, "post_id": 54915657, "comment_id": 96603758, "body": "users want to have a single table, managers have no tables users table id column = projects table manager_id column"}], "tags": [], "owner": {"reputation": 11, "user_id": 6404280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6192b2097eaba859636baa44d3eae6a3?s=128&d=identicon&r=PG&f=1", "display_name": "Arisah Ijeoma", "link": "https://stackoverflow.com/users/6404280/arisah-ijeoma"}, "is_accepted": false, "score": 0, "last_activity_date": 1551307192, "creation_date": 1551307192, "answer_id": 54915657, "question_id": 54914062, "link": "https://stackoverflow.com/questions/54914062/rails-undefined-method-email-for-nilnilclass/54915657#54915657", "title": "Rails undefined method `email&#39; for nil:NilClass", "body": "<p>It seems the data is not well drafted in the schema. Is <code>User</code> the same thing as <code>Manager</code>? If it is not, you should have a <code>user_id</code> reference in the <code>Projects</code> table else, you'll have to add proper associations tying <code>manager_id</code> to <code>Users</code> then you can have <code>project.manager.email</code></p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 6783247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f703762154db16f68b3347f34c1fac33?s=128&d=identicon&r=PG", "display_name": "Ozgur SARIOGLAN", "link": "https://stackoverflow.com/users/6783247/ozgur-sarioglan"}, "edited": false, "score": 0, "creation_date": 1551348174, "post_id": 54922446, "comment_id": 96610782, "body": "My problem is solved, thank you. I don&#39;t know how it should be used."}], "tags": [], "owner": {"reputation": 807, "user_id": 1688322, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/cZ6Ai.jpg?s=128&g=1", "display_name": "Robin van Dijk", "link": "https://stackoverflow.com/users/1688322/robin-van-dijk"}, "is_accepted": true, "score": 0, "last_activity_date": 1551346620, "creation_date": 1551346620, "answer_id": 54922446, "question_id": 54914062, "link": "https://stackoverflow.com/questions/54914062/rails-undefined-method-email-for-nilnilclass/54922446#54922446", "title": "Rails undefined method `email&#39; for nil:NilClass", "body": "<p>Your <code>Project</code> has a <code>manager_id</code>, but no table called <code>managers</code>, instead it's <code>users</code>. So in your relationship between projects and users, it needs to use the correct key.</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :projects, foreign_key: :manager_id\nend\n\nclass Project &lt; ApplicationRecord\n  belongs_to :user, foreign_key: :manager_id\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 712, "user_id": 929251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69ef9fdd5a6cd663670253f5a73527a4?s=128&d=identicon&r=PG", "display_name": "Igor Kasyanchuk", "link": "https://stackoverflow.com/users/929251/igor-kasyanchuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1551347610, "creation_date": 1551347610, "answer_id": 54922784, "question_id": 54914062, "link": "https://stackoverflow.com/questions/54914062/rails-undefined-method-email-for-nilnilclass/54922784#54922784", "title": "Rails undefined method `email&#39; for nil:NilClass", "body": "<p>If user is optional for Project just call <code>project.user&amp;.email</code></p>\n"}], "owner": {"reputation": 21, "user_id": 6783247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f703762154db16f68b3347f34c1fac33?s=128&d=identicon&r=PG", "display_name": "Ozgur SARIOGLAN", "link": "https://stackoverflow.com/users/6783247/ozgur-sarioglan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 54922446, "answer_count": 3, "score": 0, "last_activity_date": 1551347610, "creation_date": 1551299736, "last_edit_date": 1592644375, "question_id": 54914062, "link": "https://stackoverflow.com/questions/54914062/rails-undefined-method-email-for-nilnilclass", "title": "Rails undefined method `email&#39; for nil:NilClass", "body": "<p>I get the following error in Rails application. Can you help me?</p>\n<p>I get an error when I connect two tables.\nThe user wants to use a table. I'm trying to manage the manager ID and user ID fields from a single table.</p>\n<blockquote>\n<p>ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-darwin17]</p>\n<p>Rails 5.2.2</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/u29Mh.png\" rel=\"nofollow noreferrer\">Database Design</a></p>\n<p><a href=\"https://i.stack.imgur.com/xJdVZ.png\" rel=\"nofollow noreferrer\">Error Message</a></p>\n<p>Database design and tables\n<strong>schema.rb:</strong></p>\n<pre><code>ActiveRecord::Schema.define(version: 2019_02_24_160401) do\n\n  create_table &quot;projects&quot;, options: &quot;ENGINE=InnoDB DEFAULT CHARSET=utf8&quot;, force: :cascade do |t|\n    t.string &quot;name&quot;\n    t.text &quot;description&quot;\n    t.string &quot;company&quot;\n    t.bigint &quot;manager_id&quot;\n    t.datetime &quot;created_at&quot;, null: false\n    t.datetime &quot;updated_at&quot;, null: false\n    t.index [&quot;manager_id&quot;], name: &quot;index_projects_on_manager_id&quot;\n  end\n\n  create_table &quot;users&quot;, options: &quot;ENGINE=InnoDB DEFAULT CHARSET=utf8&quot;, force: :cascade do |t|\n    t.string &quot;email&quot;, default: &quot;&quot;, null: false\n    t.string &quot;username&quot;, default: &quot;&quot;, null: false\n    t.string &quot;fullname&quot;, default: &quot;&quot;\n    t.bigint &quot;manager&quot;\n    t.string &quot;company&quot;, default: &quot;&quot;\n    t.string &quot;department&quot;, default: &quot;&quot;\n    t.boolean &quot;isadmin&quot;, default: false\n    t.string &quot;encrypted_password&quot;, default: &quot;&quot;, null: false\n    t.string &quot;reset_password_token&quot;\n    t.datetime &quot;reset_password_sent_at&quot;\n    t.datetime &quot;remember_created_at&quot;\n    t.datetime &quot;created_at&quot;, null: false\n    t.datetime &quot;updated_at&quot;, null: false\n    t.index [&quot;email&quot;], name: &quot;index_users_on_email&quot;, unique: true\n    t.index [&quot;reset_password_token&quot;], name: &quot;index_users_on_reset_password_token&quot;, unique: true\n  end\n\n  add_foreign_key &quot;projects&quot;, &quot;users&quot;, column: &quot;manager_id&quot;\nend\n</code></pre>\n<p><strong>projects_controller.rb</strong></p>\n<pre><code>class ProjectsController &lt; ApplicationController\n  before_action :set_project, only: [:show, :edit, :update, :destroy]\n  before_action :find_users, only: [:index, :show, :new, :edit]\n  # GET /projects\n  # GET /projects.json\n  def index\n    @projects = Project.all\n  end\n\n  # GET /projects/1\n  # GET /projects/1.json\n  def show\n  end\n\n  # GET /projects/new\n  def new\n    @project = Project.new\n  end\n\n  # GET /projects/1/edit\n  def edit\n  end\n\n  # POST /projects\n  # POST /projects.json\n  def create\n    @project = Project.new(project_params)\n\n    respond_to do |format|\n      if @project.save\n        format.html { redirect_to @project, notice: 'Project was successfully created.' }\n        format.json { render :show, status: :created, location: @project }\n      else\n        format.html { render :new }\n        format.json { render json: @project.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /projects/1\n  # PATCH/PUT /projects/1.json\n  def update\n    respond_to do |format|\n      if @project.update(project_params)\n        format.html { redirect_to @project, notice: 'Project was successfully updated.' }\n        format.json { render :show, status: :ok, location: @project }\n      else\n        format.html { render :edit }\n        format.json { render json: @project.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /projects/1\n  # DELETE /projects/1.json\n  def destroy\n    @project.destroy\n    respond_to do |format|\n      format.html { redirect_to projects_url, notice: 'Project was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_project\n      @project = Project.find(params[:id])\n\n    end\n\n    def find_users\n      @users = User.all.order('created_at desc')\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def project_params\n      params.require(:project).permit(:name, :description, :user_id)\n    end\nend\n</code></pre>\n<p>Model files in model folder\n<strong>project.rb and user.rb</strong></p>\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable, :trackable and :omniauthable\n  has_many :projects\nend\n\nclass Project &lt; ApplicationRecord\n  belongs_to :user\nend\n</code></pre>\n<p>calling my code email column\n<strong>index.html.erb</strong></p>\n<pre><code>&lt;p id=&quot;notice&quot;&gt;&lt;%= notice %&gt;&lt;/p&gt;\n\n&lt;h1&gt;Projects&lt;/h1&gt;\n\n&lt;table&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt;Name&lt;/th&gt;\n      &lt;th&gt;Description&lt;/th&gt;\n      &lt;th&gt;Company&lt;/th&gt;\n      &lt;th&gt;Manager&lt;/th&gt;\n      &lt;th colspan=&quot;3&quot;&gt;&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n\n  &lt;tbody&gt;\n    &lt;% @projects.each do |project| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= project.name %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= project.description %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= project.company %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= project.user.email %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Show', project %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Edit', edit_project_path(project) %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Destroy', project, method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;% end %&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n\n&lt;br&gt;\n\n&lt;%= link_to 'New Project', new_project_path %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 1493, "user_id": 2236470, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/J8hqM.jpg?s=128&g=1", "display_name": "Paul Byrne", "link": "https://stackoverflow.com/users/2236470/paul-byrne"}, "is_accepted": false, "score": 0, "last_activity_date": 1551299310, "creation_date": 1551299310, "answer_id": 54913962, "question_id": 54913752, "link": "https://stackoverflow.com/questions/54913752/how-i-can-change-the-model-attribute-name-on-ruby-on-rails/54913962#54913962", "title": "How I can change the model attribute name on ruby on rails", "body": "<p>Create a migration and use the <code>remove_column</code> method to alter your database.</p>\n\n<p><a href=\"https://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/SchemaStatements.html#method-i-remove_column\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/SchemaStatements.html#method-i-remove_column</a></p>\n"}, {"tags": [], "owner": {"reputation": 366, "user_id": 10694425, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4dn2cZet4GI/AAAAAAAAAAI/AAAAAAAAAv0/M_hR3_l_AO0/photo.jpg?sz=128", "display_name": "Hasan Tezcan", "link": "https://stackoverflow.com/users/10694425/hasan-tezcan"}, "is_accepted": true, "score": 2, "last_activity_date": 1551301909, "last_edit_date": 1551301909, "creation_date": 1551301525, "answer_id": 54914476, "question_id": 54913752, "link": "https://stackoverflow.com/questions/54913752/how-i-can-change-the-model-attribute-name-on-ruby-on-rails/54914476#54914476", "title": "How I can change the model attribute name on ruby on rails", "body": "<pre><code>rails g migration remove_complated_at_from_items complated_at:datetime\n</code></pre>\n\n<blockquote>\n  <p>this line generate those codes</p>\n</blockquote>\n\n<pre><code>class RemoveComplatedAtFromItems &lt; ActiveRecord::Migration[5.2]\n  def change\n    remove_column :items, :complated_at, :datetime\n  end\nend\n</code></pre>\n\n<blockquote>\n  <p>my current schema.rb file</p>\n</blockquote>\n\n<pre><code>ActiveRecord::Schema.define(version: 2019_02_27_204841) do\n  create_table \"items\", force: :cascade do |t|\n    t.string \"title\"\n    t.text \"description\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.integer \"user_id\"\n    t.datetime \"completed_at\"\n    t.datetime \"complated_at\"\n  end\n</code></pre>\n\n<blockquote>\n  <p>now lets run rails db:migrate</p>\n</blockquote>\n\n<p><code>$ rails db:migrate</code></p>\n\n<pre><code>== 20190227204841 RemoveComplatedAtFromItems: migrating =======================\n-- remove_column(:items, :complated_at, :datetime)\n   -&gt; 0.0038s\n== 20190227204841 RemoveComplatedAtFromItems: migrated (0.0039s) ==============\n</code></pre>\n\n<blockquote>\n  <p>Seems every things is okay! lets check it schema.rb!</p>\n</blockquote>\n\n<pre><code>ActiveRecord::Schema.define(version: 2019_02_27_204841) do\n  create_table \"items\", force: :cascade do |t|\n    t.string \"title\"\n    t.text \"description\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.integer \"user_id\"\n    t.datetime \"completed_at\"\n  end\n</code></pre>\n\n<blockquote>\n  <p>All is good right now. Last to left lets check the one object! </p>\n</blockquote>\n\n<pre><code> rails c\nirb(main):001:0&gt; item = Item.last\n  Item Load (0.3ms)  SELECT  \"items\".* FROM \"items\" ORDER BY \"items\".\"id\" DESC LIMIT ?  [[\"LIMIT\", 1]]\n=&gt; #&lt;Item id: 6, title: \"Make a cake for your darling\", description: \"She loves furit \", created_at: \"2019-02-27 18:04:15\", updated_at: \"2019-02-27 18:04:15\", user_id: 2, completed_at: nil&gt;\n</code></pre>\n\n<blockquote>\n  <p>DONE! </p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 2673, "user_id": 960184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8202c5cedc13b7c8449fbb230fc5982?s=128&d=identicon&r=PG", "display_name": "Richard Logwood", "link": "https://stackoverflow.com/users/960184/richard-logwood"}, "edited": false, "score": 0, "creation_date": 1619273283, "post_id": 54922870, "comment_id": 118857759, "body": "thanks! :) For those trying this: I ran <code>rails g migration RenameColumnsComplatedAt</code> then changed the migration to be: <code>class RenameColumnsComplatedAt &lt; ActiveRecord::Migration[6.1]   def change     rename_column :tasks, :complated_at, :completed_at   end end</code>"}], "tags": [], "owner": {"reputation": 712, "user_id": 929251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69ef9fdd5a6cd663670253f5a73527a4?s=128&d=identicon&r=PG", "display_name": "Igor Kasyanchuk", "link": "https://stackoverflow.com/users/929251/igor-kasyanchuk"}, "is_accepted": false, "score": 1, "last_activity_date": 1551347866, "creation_date": 1551347866, "answer_id": 54922870, "question_id": 54913752, "link": "https://stackoverflow.com/questions/54913752/how-i-can-change-the-model-attribute-name-on-ruby-on-rails/54922870#54922870", "title": "How I can change the model attribute name on ruby on rails", "body": "<p>Don't delete column. Just rename it.</p>\n\n<p>Create a new migration and put the code:</p>\n\n<p><code>rename_column :items, :complated_at, :completed_at</code></p>\n"}], "owner": {"reputation": 366, "user_id": 10694425, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4dn2cZet4GI/AAAAAAAAAAI/AAAAAAAAAv0/M_hR3_l_AO0/photo.jpg?sz=128", "display_name": "Hasan Tezcan", "link": "https://stackoverflow.com/users/10694425/hasan-tezcan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 622, "favorite_count": 1, "accepted_answer_id": 54914476, "answer_count": 3, "score": 1, "last_activity_date": 1551347866, "creation_date": 1551298449, "question_id": 54913752, "link": "https://stackoverflow.com/questions/54913752/how-i-can-change-the-model-attribute-name-on-ruby-on-rails", "title": "How I can change the model attribute name on ruby on rails", "body": "<blockquote>\n  <p>I want to change false variable name to new one, so I created the true and new one but the old and false one stil stay! </p>\n</blockquote>\n\n<ul>\n<li><blockquote>\n  <p>How can remove the false one </p>\n</blockquote>\n\n<p><code>irb(main):001:0&gt; item = Item.last\nItem Load (0.3ms)  SELECT  \"items\".* FROM \"items\" ORDER BY \"items\".\"id\" DESC LIMIT ?  [[\"LIMIT\", 1]]\n=&gt; #&lt;Item id: 6, title: \"Make a cake for your darling\", description: \"She loves furit \", created_at: \"2019-02-27 18:04:15\", updated_at: \"2019-02-27 18:04:15\", user_id: 2, complated_at: nil, completed_at: nil&gt;\nirb(main):002:0&gt;\n</code></p></li>\n</ul>\n\n<blockquote>\n  <p>I made a typo mistake it must be \"completed\"</p>\n</blockquote>\n\n<p>What can I do?</p>\n"}, {"tags": ["ruby", "rubygems", "google-api-client"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 10955402, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PBcSb-bgM3k/AAAAAAAAAAI/AAAAAAAAAA0/GiGKl52ITZ8/photo.jpg?sz=128", "display_name": "anarkomeditador", "link": "https://stackoverflow.com/users/10955402/anarkomeditador"}, "is_accepted": false, "score": 0, "last_activity_date": 1551297099, "creation_date": 1551297099, "answer_id": 54913440, "question_id": 54912265, "link": "https://stackoverflow.com/questions/54912265/how-to-decode-googleapisadmindirectoryv1userphoto-photo-data/54913440#54913440", "title": "How to decode Google::Apis::AdminDirectoryV1::UserPhoto.photo_data", "body": "<p>as stated in <a href=\"https://developers.google.com/resources/api-libraries/documentation/admin/directory_v1/csharp/latest/classGoogle_1_1Apis_1_1Admin_1_1Directory_1_1directory__v1_1_1Data_1_1UserPhoto.html\" rel=\"nofollow noreferrer\">the documentation</a> that field is base64 encoded.</p>\n\n<p>use base64 as in the example:</p>\n\n<pre><code>require \"base64\"\n\nenc   = Base64.encode64('Send reinforcements')\n                    # -&gt; \"U2VuZCByZWluZm9yY2VtZW50cw==\\n\"\nplain = Base64.decode64(enc)\n                    # -&gt; \"Send reinforcements\"\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 3675905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NC966.jpg?s=128&g=1", "display_name": "batty", "link": "https://stackoverflow.com/users/3675905/batty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551297099, "creation_date": 1551292289, "question_id": 54912265, "link": "https://stackoverflow.com/questions/54912265/how-to-decode-googleapisadmindirectoryv1userphoto-photo-data", "title": "How to decode Google::Apis::AdminDirectoryV1::UserPhoto.photo_data", "body": "<p>For google-api-client gem version 0.19.4 I try to fetch all users and their photos using Google::Apis::AdminDirectoryV1.</p>\n\n<p>When i fetch user photo (Google::Apis::AdminDirectoryV1::UserPhoto) using photo_data field i get a hex string. I unable to covert it to an image?</p>\n\n<p>How do i convert the data into image. Couldn't find a solution anywhere.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1086, "user_id": 5201594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVDD.jpg?s=128&g=1", "display_name": "rahul mishra", "link": "https://stackoverflow.com/users/5201594/rahul-mishra"}, "edited": false, "score": 1, "creation_date": 1551297938, "post_id": 54912156, "comment_id": 96593617, "body": "post same input and output so that the question would be more clear"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1551331192, "post_id": 54912156, "comment_id": 96603202, "body": "What is the empty regex doing?"}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "edited": false, "score": 1, "creation_date": 1551293660, "post_id": 54912500, "comment_id": 96591679, "body": "Wow that was much more efficient than I was thinking, I will have to look up your references.  Thanks so much!"}, {"owner": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "edited": false, "score": 0, "creation_date": 1551297628, "post_id": 54912500, "comment_id": 96593471, "body": "It seemed to fail one of my tests, the order came out incorrectly as &quot;cd&quot; should be second in the array.  As in the order should be [&quot;cdef&quot;, &quot;cd&quot;, &quot;d&quot;, &quot;ef&quot;, &quot;f&quot;] . Top priority in the ordering given to the order they appear in the string first, then by noun, then verb"}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "reply_to_user": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "edited": false, "score": 0, "creation_date": 1551298989, "post_id": 54912500, "comment_id": 96594109, "body": "@Sachin, yes, that&#39;s the difference. I&#39;ve edited my answer for this condition."}, {"owner": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "edited": false, "score": 0, "creation_date": 1551382887, "post_id": 54912500, "comment_id": 96630582, "body": "I attempted this by making the string = &quot;jklfgh&quot;, and the desired output would&#39;ve been: [&quot;jk&quot;, &quot;jkl&quot;, &quot;fgh&quot;, &quot;f&quot;] but received: [&quot;fgh&quot;, &quot;jk&quot;, &quot;f&quot;, &quot;jkl&quot;]"}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "reply_to_user": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "edited": false, "score": 0, "creation_date": 1551383299, "post_id": 54912500, "comment_id": 96630785, "body": "Noun first, then verb as you describe."}, {"owner": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "edited": false, "score": 0, "creation_date": 1551384153, "post_id": 54912500, "comment_id": 96631204, "body": "Sorry I may not being clear, order of appearance in string is top priority, then noun, then verb.  Is there a way to sort the new array by an index of the string characters?"}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "reply_to_user": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "edited": false, "score": 0, "creation_date": 1551388215, "post_id": 54912500, "comment_id": 96633042, "body": "It occurs to me to apply <code>sort</code> and <code>match</code>"}, {"owner": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "edited": false, "score": 1, "creation_date": 1551389287, "post_id": 54912500, "comment_id": 96633474, "body": "That last hint helped!  I figured it out.  It works with:  ary.sort_by&amp;string.method(:index) .  Since you solved most of this I did not feel comfortable updating as if I answer it."}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": true, "score": 2, "last_activity_date": 1551319785, "last_edit_date": 1551319785, "creation_date": 1551293231, "answer_id": 54912500, "question_id": 54912156, "link": "https://stackoverflow.com/questions/54912156/string-includes-substrings-from-arrays/54912500#54912500", "title": "String includes substrings from arrays", "body": "<pre><code>def string_to_array(string)\n  noun = [\"d\", \"fgh\", \"i\", \"jk\", \"bcd\", \"cdef\"]\n  verb = [\"cd\", \"ef\", \"f\", \"jkl\", \"abc\"]\n\n  ary = (noun+verb).select { |s| string.include? s }\n  ary.unshift(ary.delete(string)).compact\nend\n\nstring = \"cdef\"\n\nstring_to_array(string) #=&gt; [\"cdef\", \"d\", \"cd\", \"ef\", \"f\"]\n</code></pre>\n\n<p>I used <a href=\"https://ruby-doc.org/core-2.6.1/Array.html#method-i-select\" rel=\"nofollow noreferrer\"><code>Array#select</code></a>, <a href=\"https://ruby-doc.org/core-2.6.1/Array.html#method-i-2B\" rel=\"nofollow noreferrer\"><code>Array#+</code></a>, <a href=\"https://ruby-doc.org/core-2.6.1/Array.html#method-i-delete\" rel=\"nofollow noreferrer\"><code>Array#delete</code></a>, <a href=\"https://ruby-doc.org/core-2.6.1/Array.html#method-i-unshift\" rel=\"nofollow noreferrer\"><code>Array#unshift</code></a>, <a href=\"https://ruby-doc.org/core-2.6.1/Array.html#method-i-compact\" rel=\"nofollow noreferrer\"><code>Array#compact</code></a> and <a href=\"https://ruby-doc.org/core-2.6.1/String.html#method-i-include-3F\" rel=\"nofollow noreferrer\"><code>String#include?</code></a>.</p>\n\n<p>If you want to remove duplicate from output array, use <a href=\"https://ruby-doc.org/core-2.6.1/Array.html#method-i-uniq\" rel=\"nofollow noreferrer\"><code>Array#uniq</code></a></p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1551309196, "creation_date": 1551309196, "answer_id": 54915984, "question_id": 54912156, "link": "https://stackoverflow.com/questions/54912156/string-includes-substrings-from-arrays/54915984#54915984", "title": "String includes substrings from arrays", "body": "<p>You could use <a href=\"http://ruby-doc.org/core-2.5.1/String.html#method-i-scan\" rel=\"nofollow noreferrer\">String#scan</a> (see the last sentence of the doc especially) together with a regular expression. My objective is to demonstrate this approach, not to suggest that it should be the preferred approach.</p>\n\n<pre><code>nouns = [\"cdef\", \"d\", \"fgh\", \"i\", \"jk\", \"bcd\"]\nverbs = [\"cd\", \"ef\", \"f\", \"jkl\", \"abc\"]\n\nR = Regexp.new (nouns+verbs).map { |s| \"(?=(#{s}))?\" }.join\n  #=&gt; /(?=(cdef))?(?=(d))?(?=(fgh))?(?=(i))?(?=(jk))?(?=(bcd))?(?=(cd))?(?=(ef))?(?=(f))?(?=(jkl))?(?=(abc))?/ \n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>def string_to_array(str, nouns, strings)\n  str.scan(R).flatten.compact\nend\n\nstr = \"cdef\"\n\nstring_to_array(str, nouns, verbs)\n  #=&gt; [\"cdef\", \"cd\", \"d\", \"ef\", \"f\"]\n</code></pre>\n\n<p>Note:</p>\n\n<pre><code>str.scan(R)\n  #=&gt; [[\"cdef\", nil, nil, nil, nil, nil, \"cd\", nil, nil, nil, nil],\n  #    [nil, \"d\", nil, nil, nil, nil, nil, nil, nil, nil, nil],\n  #    [nil, nil, nil, nil, nil, nil, nil, \"ef\", nil, nil, nil],\n  #    [nil, nil, nil, nil, nil, nil, nil, nil, \"f\", nil, nil],\n  #    [nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil]] \n</code></pre>\n\n<p><code>(?=(cdef))?</code> (<code>(?=(cdef)?)</code> also works) is a positive lookahead enclosed in a capture group. It requires that a particular location in the string is immediately followed by the content of the lookahead, but is not part of the match itself. The question mark makes the lookahead optional.  </p>\n"}], "owner": {"reputation": 177, "user_id": 10095385, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AQNUq2AuhX0/AAAAAAAAAAI/AAAAAAAACeM/W_ToTsU2GKw/photo.jpg?sz=128", "display_name": "Sachin", "link": "https://stackoverflow.com/users/10095385/sachin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 54912500, "answer_count": 2, "score": -1, "last_activity_date": 1551644779, "creation_date": 1551291875, "last_edit_date": 1551644779, "question_id": 54912156, "link": "https://stackoverflow.com/questions/54912156/string-includes-substrings-from-arrays", "title": "String includes substrings from arrays", "body": "<p>I have the following:</p>\n\n<pre><code>input string = \"1234\"\noutput new_array should = [12, 3, 4, 34]\n</code></pre>\n"}, {"tags": ["ruby", "debugging", "rack", "bugsnag"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1551291698, "creation_date": 1551291698, "answer_id": 54912104, "question_id": 54911488, "link": "https://stackoverflow.com/questions/54911488/how-to-dump-bugsnag-report-in-ruby/54912104#54912104", "title": "How to dump Bugsnag report in Ruby", "body": "<p>Looking at the <a href=\"https://github.com/bugsnag/bugsnag-ruby/blob/master/lib/bugsnag/report.rb\" rel=\"nofollow noreferrer\">source code</a> of that gem it looks like there is the <a href=\"https://github.com/bugsnag/bugsnag-ruby/blob/master/lib/bugsnag/report.rb#L90\" rel=\"nofollow noreferrer\"><code>Report#as_json</code></a> that returns what you are looking for. </p>\n\n<pre><code>Bugsnag.before_notify_callbacks &lt;&lt; lambda { |report|\n  puts report.as_json\n}\n</code></pre>\n"}], "owner": {"reputation": 1374, "user_id": 3398271, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c998619fa2ed255eec79fed92f3c2edd?s=128&d=identicon&r=PG&f=1", "display_name": "Attilio", "link": "https://stackoverflow.com/users/3398271/attilio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551291698, "creation_date": 1551289423, "question_id": 54911488, "link": "https://stackoverflow.com/questions/54911488/how-to-dump-bugsnag-report-in-ruby", "title": "How to dump Bugsnag report in Ruby", "body": "<p>I would like to dump the complete report sent to Bugsnag in Ruby.</p>\n\n<p>I tried this:</p>\n\n<pre><code>Bugsnag.before_notify_callbacks &lt;&lt; lambda {|report|\n     puts report\n}\n</code></pre>\n\n<p>But the only result I get is the following:</p>\n\n<pre><code>#&lt;Bugsnag::Report:0x000055d8ab22f310&gt;\n</code></pre>\n\n<p>I also tried <code>puts report.to_json</code> with (<code>require 'json'</code> of course), same result.</p>\n\n<p>I would like to get a json-like dump of the report that is being sent, something like:</p>\n\n<pre><code>stacktrace: \"...\"\napp: {\n        releaseStage: \"...\"\n        ...\n     }\nrequest: {\n     ....\n}\nmy-custom-tag: {\n    ...\n}\n</code></pre>\n\n<p>The exact format does not matter, the only important thing is that I'm able to see all the fields. How can I do this?</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 1073, "user_id": 1697631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lt26U.jpg?s=128&g=1", "display_name": "jmccure", "link": "https://stackoverflow.com/users/1697631/jmccure"}, "edited": false, "score": 0, "creation_date": 1551351393, "post_id": 54911252, "comment_id": 96612829, "body": "I would try to avoid having dependencies which are different with the same version number.  Is this a use case for <code>~&gt;</code> in the Gemfile? for example <code>~&gt; 2.1</code> will get all versions <code>&gt;= 2.1</code> and <code>&lt; 3.0</code>. You can continue to develop the gem as version 2.x.x and your app will consume the latest version, but then it is important that gems that don&#39;t pass the QA process don&#39;t get promoted to your source of released gems."}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "reply_to_user": {"reputation": 1073, "user_id": 1697631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lt26U.jpg?s=128&g=1", "display_name": "jmccure", "link": "https://stackoverflow.com/users/1697631/jmccure"}, "edited": false, "score": 0, "creation_date": 1551352496, "post_id": 54911252, "comment_id": 96613481, "body": "No it&#39;s more about having a gem stored somewhere that&#39;s sharable to other team members and the build server on bundle install that doesn&#39;t have a new version yet as it&#39;s not a final release. The pessimistic operator is when you want to restrict the version but within a reasonable set of rules e.g. allow patches."}, {"owner": {"reputation": 1073, "user_id": 1697631, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lt26U.jpg?s=128&g=1", "display_name": "jmccure", "link": "https://stackoverflow.com/users/1697631/jmccure"}, "edited": false, "score": 0, "creation_date": 1551355258, "post_id": 54911252, "comment_id": 96615093, "body": "Ideally the gem can be tested in isolation before packaging it and deploying it as an artifact. As you said, maybe you need a dev repository as a staging environment and the gems versions that make it through the next QA process get promoted to the release repository."}], "owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1551289279, "creation_date": 1551288570, "last_edit_date": 1551289279, "question_id": 54911252, "link": "https://stackoverflow.com/questions/54911252/sharing-in-development-ruby-gems", "title": "Sharing in development Ruby Gems", "body": "<p>We use Rails for the majority of our web projects and in a lot of cases we share code we have as dependancies such as our API as Gems. We also have some projects which are similar in nature enough that we've built Engines and then have host applications that use these.</p>\n\n<p>These are all hosted on our own servers and we share the Gems with the projects using Gem In A Box (this is because we can't upload the Gems to anywhere else due to security restrictions). During development we comment out the lines to reference either a specific version on our server or our local version if we are developing within the Gem itself.</p>\n\n<p>So for example:</p>\n\n<pre><code># version on the server\ngem 'our_gem', '1.1.0', source: 'https://gems.domain.net'\n# local version\ngem 'our_gem', path: '../our_gem'\n</code></pre>\n\n<p>What happens is that when we do a build on our CI server we then have a script that reads through the Gemfile and finds any gems that have our server as the source and then vendorize them and reference them as the vendored path.</p>\n\n<p>For example:</p>\n\n<pre><code># this\ngem 'our_gem', '1.1.0', source: 'https://gems.domain.net'\n# becomes this\ngem 'our_gem', path: 'vendor/gems/our_gem-1.1.0'\n</code></pre>\n\n<p>However the problem we have encountered is that when we are in development and we may have several features or bugs we want to push to our QA team to start testing it means we have to bump the version each time so we can reference it in our Gemfile's as a dependancy. We can't reference the branch due to the Git repository not accessible to our build setup and some other restrictions.</p>\n\n<p>How do teams usually handle in-development dependancies that don't have a version yet? We've thought about having a development version of Gem In A Box and then not passing a version to it in our Gemfile...</p>\n\n<pre><code># shared dev version of gem on our dev gem server\ngem 'our_gem', source: 'https://dev.gems.domain.net'\n</code></pre>\n\n<p>But the problem here is that we still need to up the version every time in order to push to the Gem Server. Is there a standard way to push a package to a Package Manager whereby the version is always the same (or better yet is version-less but hosted by the manager)?</p>\n\n<p>We also have the same issue with NPM (we run a local version of Vedaccio).</p>\n"}, {"tags": ["ruby", "selenium", "capybara", "e2e-testing"], "answers": [{"comments": [{"owner": {"reputation": 879, "user_id": 2462805, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c126d1a3f40e40d1fe0630a30addaf46?s=128&d=identicon&r=PG", "display_name": "user2462805", "link": "https://stackoverflow.com/users/2462805/user2462805"}, "edited": false, "score": 0, "creation_date": 1551360214, "post_id": 54912386, "comment_id": 96618008, "body": "It seems to be working in a non headless chrome however not working in headless: <code>Capybara::WindowError:         Capybara::WindowError: block passed to #window_opened_by opened 0 windows instead of 1</code> any idea ? @thomas-walpole"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 879, "user_id": 2462805, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c126d1a3f40e40d1fe0630a30addaf46?s=128&d=identicon&r=PG", "display_name": "user2462805", "link": "https://stackoverflow.com/users/2462805/user2462805"}, "edited": false, "score": 0, "creation_date": 1551378030, "post_id": 54912386, "comment_id": 96628279, "body": "@user2462805 Whoops -- forgot that Chrome disables the print in headless mode (partly because of how it hangs execution).  You&#39;ll either have to test this functionality with the browser visible or you could try registering a driver with the <code>--enable-print-browser</code> command line switch (displays all pages as if they were being printed) and use that driver for checking what you want to check."}, {"owner": {"reputation": 879, "user_id": 2462805, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c126d1a3f40e40d1fe0630a30addaf46?s=128&d=identicon&r=PG", "display_name": "user2462805", "link": "https://stackoverflow.com/users/2462805/user2462805"}, "edited": false, "score": 0, "creation_date": 1551688159, "post_id": 54912386, "comment_id": 96716724, "body": "I&#39;m stuck with a headless Chrome. Could you tell me a bit more about registering a driver? How should I proceed? Thanks again for your help"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 879, "user_id": 2462805, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c126d1a3f40e40d1fe0630a30addaf46?s=128&d=identicon&r=PG", "display_name": "user2462805", "link": "https://stackoverflow.com/users/2462805/user2462805"}, "edited": false, "score": 0, "creation_date": 1551731324, "post_id": 54912386, "comment_id": 96739568, "body": "@user2462805 To register your own driver see <a href=\"https://github.com/teamcapybara/capybara#configuring-and-adding-drivers\" rel=\"nofollow noreferrer\">github.com/teamcapybara/capybara#configuring-and-adding-driv&zwnj;&#8203;ers</a> and look at what Capybara does for the drivers it registers by default - <a href=\"https://github.com/teamcapybara/capybara/blob/master/lib/capybara.rb#L539\" rel=\"nofollow noreferrer\">github.com/teamcapybara/capybara/blob/master/lib/&hellip;</a>"}, {"owner": {"reputation": 286, "user_id": 2555263, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/eH7bC.jpg?s=128&g=1", "display_name": "seanriordan08", "link": "https://stackoverflow.com/users/2555263/seanriordan08"}, "edited": false, "score": 0, "creation_date": 1576519854, "post_id": 54912386, "comment_id": 104918127, "body": "@ThomasWalpole, this answer helped me greatly - Although I&#39;m able to manipulate the print_window, on a mac, there is a system dialog window that pops up after selecting save that confirms where to save the document regardless of defaults. Any idea how to avoid the system dialog window? Have you run into this before? Screenshot here: <a href=\"https://ibb.co/j8Qsjnv\" rel=\"nofollow noreferrer\">ibb.co/j8Qsjnv</a>"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 2, "last_activity_date": 1551378058, "last_edit_date": 1551378058, "creation_date": 1551292713, "answer_id": 54912386, "question_id": 54910990, "link": "https://stackoverflow.com/questions/54910990/access-browser-print-popup-for-testing-purposes/54912386#54912386", "title": "Access browser print popup for testing purposes", "body": "<p>Note: This answer only applies to using the Selenium driver with non-deadless chrome, and once you're inside the shadowDOM you can only use CSS selectors which means you can't use any of the Capybara methods that involve Capybaras built-in selectors ('fill_in', 'select', etc). This may also break with any release of Chrome or chromedriver.</p>\n\n<p>Because of the way chromedriver/chrome works, it isn't returning from whatever action you did to open the print window until the print window is closed.  It is technically possible to work around this by triggering the print window asynchronously. But then you run into the issue that most of the print window is inside shadow DOM elements which the WebDriver spec doesn't currently provide an API for. You can however work around that using <code>evaluate_script</code>. </p>\n\n<p>Therefore to open and then close a print window would be something like this</p>\n\n<pre><code>print_window = page.window_opened_by do\n  page.execute_script('window.setTimeout(function(){ window.print();}, 50)')\nend\n\npage.within_window(print_window) do\n   print_app = page.find('print-preview-app')\n   print_app_shadow = print_app.evaluate_script('this.shadowRoot')\n   print_header = print_app_shadow.find('print-preview-header')\n   print_header_shadow = print_header.evaluate_script('this.shadowRoot')\n   print_header_shadow.find('.cancel-button').click\nend\n</code></pre>\n\n<p>Obviously all those calls could be chained together, the intermediate elements are only spelled out to make it clearer what is being done.</p>\n"}], "owner": {"reputation": 879, "user_id": 2462805, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c126d1a3f40e40d1fe0630a30addaf46?s=128&d=identicon&r=PG", "display_name": "user2462805", "link": "https://stackoverflow.com/users/2462805/user2462805"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1551378058, "creation_date": 1551287584, "last_edit_date": 1551292173, "question_id": 54910990, "link": "https://stackoverflow.com/questions/54910990/access-browser-print-popup-for-testing-purposes", "title": "Access browser print popup for testing purposes", "body": "<p>I'm using capybara to write end to end test.</p>\n\n<p>I have a print feature inside my app and would like to access its DOM in order to assert different things on my printed document.</p>\n\n<p>How could I access the popup DOM using Capybara?</p>\n\n<p>+How could I programmatically close the print popup when I'm done asserting? It seems that Capybara is stuck after executing the print method.</p>\n\n<p><a href=\"https://i.stack.imgur.com/NkHVD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NkHVD.png\" alt=\"popup dom\"></a></p>\n\n<p>ps: I'm using an headless Chrome.</p>\n"}, {"tags": ["ruby", "jekyll", "github-pages"], "comments": [{"owner": {"reputation": 2501, "user_id": 1859956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rgRBJ.jpg?s=128&g=1", "display_name": "emi", "link": "https://stackoverflow.com/users/1859956/emi"}, "edited": false, "score": 0, "creation_date": 1551286224, "post_id": 54910470, "comment_id": 96587996, "body": "Can you show your <code>Gemfile</code> and <code>_config.yml</code>? Also what&#39;s the folder structure you  pushed to GitHub like?"}], "answers": [{"tags": [], "owner": {"reputation": 171, "user_id": 5110804, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/70435a8ef55eab9b056e5727624be8e7?s=128&d=identicon&r=PG&f=1", "display_name": "heyzude", "link": "https://stackoverflow.com/users/5110804/heyzude"}, "is_accepted": false, "score": 0, "last_activity_date": 1551320426, "creation_date": 1551320426, "answer_id": 54917414, "question_id": 54910470, "link": "https://stackoverflow.com/questions/54910470/jekyll-site-that-worked-well-on-local-doenst-show-up-on-github-pages/54917414#54917414", "title": "Jekyll site that worked well on Local doens&#39;t show up on Github Pages", "body": "<p>I guess I know why.</p>\n\n<p><a href=\"https://help.github.com/en/articles/adding-a-jekyll-theme-to-your-github-pages-site#adding-a-jekyll-theme-in-your-sites-_configyml-file\" rel=\"nofollow noreferrer\">https://help.github.com/en/articles/adding-a-jekyll-theme-to-your-github-pages-site#adding-a-jekyll-theme-in-your-sites-_configyml-file</a><br>\nlooking at #4, there are github-pages-supported themes and other themes that are not supported. for those not supported, you have to write <code>remote-theme: ...</code> to _config.yml, not <code>theme: ...</code> </p>\n\n<blockquote>\n  <p>Well, is this because In local, I installed things by \"bundle install\" or \"bundle update\", but the github doesn't install things for me automatically?</p>\n</blockquote>\n\n<p>I think what I guessed is right.</p>\n"}], "owner": {"reputation": 171, "user_id": 5110804, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/70435a8ef55eab9b056e5727624be8e7?s=128&d=identicon&r=PG&f=1", "display_name": "heyzude", "link": "https://stackoverflow.com/users/5110804/heyzude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 273, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551320426, "creation_date": 1551285957, "question_id": 54910470, "link": "https://stackoverflow.com/questions/54910470/jekyll-site-that-worked-well-on-local-doenst-show-up-on-github-pages", "title": "Jekyll site that worked well on Local doens&#39;t show up on Github Pages", "body": "<p>I did the follings:</p>\n\n<ol>\n<li>made my username.github.io repo</li>\n<li>cloned that repo to my local folder</li>\n<li>In local folder, I did \"jekyll new ...\" to generate jekyll things</li>\n<li>I modified \"Gemfile\" and \"_config.yml\" to use a theme named \"minimal-mistakes\"\n(added a line <code>gem \"minimal-mistakes-jekyll\"</code> to my Gemfile and \"bundle install\", then\nmodified \"_config.yml\" to contain <code>theme: minimal-mistakes-jekyll</code>, then \"bundle update\")</li>\n<li>typed \"bundle exec jekyll serve\" on terminal, go to localhost:4000, then my simple jekyll site showed up</li>\n</ol>\n\n<hr>\n\n<p>Then I pushed the local's change to remote server, and hoped my jekyll site show up when I enter my \"username.github.io\", but when I enter, the page is blank. nothing.</p>\n\n<p>Well, is this because In local, I installed things by \"bundle install\" or \"bundle update\", but the github doesn't install things for me automatically?</p>\n\n<p>How can make my username.githhub.io to show a theme-installed page?</p>\n\n<p>+1 question:\nI did \"jekyll new ...\", in order to generate Gemfile and other jekyll related files, but this seems unnecessary. Just making a directory and make Gemfile and _config.yml file inside the dir by myself would work?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1847, "user_id": 1049170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e6058ebb749df75fcd91c920e49e4cc7?s=128&d=identicon&r=PG", "display_name": "psantos", "link": "https://stackoverflow.com/users/1049170/psantos"}, "edited": false, "score": 1, "creation_date": 1551283539, "post_id": 54909638, "comment_id": 96586243, "body": "are you getting a specific error?"}, {"owner": {"reputation": 11, "user_id": 11124196, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yb7PTQFCt6E/AAAAAAAAAAI/AAAAAAAAFvQ/9i7CDm_XGfU/photo.jpg?sz=128", "display_name": "Alessandro Lopresti", "link": "https://stackoverflow.com/users/11124196/alessandro-lopresti"}, "reply_to_user": {"reputation": 1847, "user_id": 1049170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e6058ebb749df75fcd91c920e49e4cc7?s=128&d=identicon&r=PG", "display_name": "psantos", "link": "https://stackoverflow.com/users/1049170/psantos"}, "edited": false, "score": 0, "creation_date": 1551283805, "post_id": 54909638, "comment_id": 96586442, "body": "No, it simply tells me &quot;there is no file to open&quot; but I am sure there is because with the first method I see that the file exist. The log show me this: START TEST: 27/02/2019 17:09 test_wsdl exist_request_xml file exists true exist_response_xml file exists true open_request_xml exist_request_xml file exists true there is no file to open END TEST: 27/02/2019 17:09"}, {"owner": {"reputation": 1847, "user_id": 1049170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e6058ebb749df75fcd91c920e49e4cc7?s=128&d=identicon&r=PG", "display_name": "psantos", "link": "https://stackoverflow.com/users/1049170/psantos"}, "edited": false, "score": 0, "creation_date": 1551283959, "post_id": 54909638, "comment_id": 96586540, "body": "Why are you prefixing the method with <code>Utility</code>. Is it a class or module name ?"}, {"owner": {"reputation": 11, "user_id": 11124196, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yb7PTQFCt6E/AAAAAAAAAAI/AAAAAAAAFvQ/9i7CDm_XGfU/photo.jpg?sz=128", "display_name": "Alessandro Lopresti", "link": "https://stackoverflow.com/users/11124196/alessandro-lopresti"}, "reply_to_user": {"reputation": 1847, "user_id": 1049170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e6058ebb749df75fcd91c920e49e4cc7?s=128&d=identicon&r=PG", "display_name": "psantos", "link": "https://stackoverflow.com/users/1049170/psantos"}, "edited": false, "score": 0, "creation_date": 1551284161, "post_id": 54909638, "comment_id": 96586663, "body": "It is a module I have to use"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1551294755, "post_id": 54909638, "comment_id": 96592193, "body": "Just prefix with <code>self.</code> instead of <code>Utility.</code> to make it a module method."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1551294813, "post_id": 54909638, "comment_id": 96592228, "body": "I&#39;d also suggest using either the auto-closing <code>File.open(...) do |f| ... end</code> block style or using <code>File.readlines(...)</code> if you don&#39;t care about the memory impact of loading the whole file."}], "answers": [{"comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 11, "user_id": 11124196, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yb7PTQFCt6E/AAAAAAAAAAI/AAAAAAAAFvQ/9i7CDm_XGfU/photo.jpg?sz=128", "display_name": "Alessandro Lopresti", "link": "https://stackoverflow.com/users/11124196/alessandro-lopresti"}, "edited": false, "score": 1, "creation_date": 1551374334, "post_id": 54909847, "comment_id": 96626441, "body": "@AlessandroLopresti glad to help! Could you click the checkmark next to my answer if this solved your problem?"}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": false, "score": 6, "last_activity_date": 1551284633, "last_edit_date": 1551284633, "creation_date": 1551284139, "answer_id": 54909847, "question_id": 54909638, "link": "https://stackoverflow.com/questions/54909638/open-file-with-ruby/54909847#54909847", "title": "Open file with Ruby", "body": "<p>Your <code>Utility.exist_request_xml</code> method returns <code>nil</code>, which is falsey in an <code>if</code> statement, so it falls through to the else where you don't open the file.</p>\n\n<p>It returns <code>nil</code> because by default the last evaluated expression is the return value and your last expression is an if. Similarly the return value of an if is the last thing <em>it</em> evaluates, which is a <code>puts</code> (in either branch). <code>puts</code> returns <code>nil</code>.</p>\n\n<p>Return the value of the existence check instead:</p>\n\n<pre><code>def Utility.exist_request_xml filexml\n  File.exist? \"#{PATH_WEBSERVICES_REQUEST}/#{filexml}\"\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11124196, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yb7PTQFCt6E/AAAAAAAAAAI/AAAAAAAAFvQ/9i7CDm_XGfU/photo.jpg?sz=128", "display_name": "Alessandro Lopresti", "link": "https://stackoverflow.com/users/11124196/alessandro-lopresti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1551694076, "creation_date": 1551283386, "last_edit_date": 1551694076, "question_id": 54909638, "link": "https://stackoverflow.com/questions/54909638/open-file-with-ruby", "title": "Open file with Ruby", "body": "<p>I need to see if a file exists, and then if it exists, I want to open the file, and see what it contains.</p>\n\n<p>I have these methods:</p>\n\n<pre><code>def Utility.exist_request_xml(filexml)\n  puts(\"exist_request_xml\")\n  if(File.exist?(\"#{PATH_WEBSERVICES_REQUEST}/#{filexml}\"))\n    puts 'file exists'\n    puts(File.exist?(\"#{PATH_WEBSERVICES_REQUEST}/#{filexml}\"))\n  else\n    puts 'file not exist'\n  end\nend\n\n\ndef Utility.open_request_xml(filexml)\n  puts(\"open_request_xml\")\n  if(Utility.exist_request_xml(filexml))\n\n    f=File.open(\"#{PATH_WEBSERVICES_REQUEST}/#{filexml}\",\"r\") \n    f.each_line do |line| \n      puts line \n    end\n  else\n    puts 'there is no file to open'\n  end\nend\n</code></pre>\n\n<p>The first method works. I cannot open the file in the second method. The problem is that, even if the file exists, because I recall the first method in the second, it doesn't open the file.</p>\n\n<p>Can you help me?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activestorage"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1551284606, "post_id": 54909442, "comment_id": 96586948, "body": "Are you sure that <code>ActiveRecord::RecordNotFound</code> is actually raised by that specific line? I doubt so because you are not loading any record in that line. Please share the full error message and the stack trace from your log file. Btw. memoization in an instance of an active record object (like you did in your example) will not survive a page reload."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1551293483, "post_id": 54909442, "comment_id": 96591608, "body": "@spickermann <code>ActiveStorage::Blob.find_signed</code> is a very thin wrapper around the usual ActiveRecord <code>find</code> method so <code>find_signed</code> can raise <code>ActiveRecord::RecordNotFound</code>. The stack trace would be helpful though."}, {"owner": {"reputation": 21, "user_id": 6442632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca88b37c26bf9b206433998d3e9e75b9?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Turner", "link": "https://stackoverflow.com/users/6442632/austin-turner"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1551303625, "post_id": 54909442, "comment_id": 96596133, "body": "@mu-is-too-short updated with stack trace"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1551312539, "post_id": 54909442, "comment_id": 96598995, "body": "Are you sure that the <code>blob</code> method in your question is the <code>blob</code> method that you&#39;re calling in <code>ContactUsFormManager</code>? Looks like a silly question but..."}, {"owner": {"reputation": 21, "user_id": 6442632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca88b37c26bf9b206433998d3e9e75b9?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Turner", "link": "https://stackoverflow.com/users/6442632/austin-turner"}, "edited": false, "score": 0, "creation_date": 1551389838, "post_id": 54909442, "comment_id": 96633694, "body": "Yes, that is the exact line that breaks"}], "owner": {"reputation": 21, "user_id": 6442632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca88b37c26bf9b206433998d3e9e75b9?s=128&d=identicon&r=PG&f=1", "display_name": "Austin Turner", "link": "https://stackoverflow.com/users/6442632/austin-turner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551303574, "creation_date": 1551282870, "last_edit_date": 1551303574, "question_id": 54909442, "link": "https://stackoverflow.com/questions/54909442/standarderror-not-being-caught-with-activestorageblob-find-signed", "title": "StandardError not being caught with ActiveStorage::Blob.find_signed", "body": "<p>I'm running ActiveStorage direct upload on a form and when the form gets submitted it uploads to S3. I have a check in a service object that checks to see if the file is too large even after getting past some javascript that checks the size. If it is, the file is deleted off S3 and I remove the ActiveStorage::Blob from my database (for technical constraints). When I run the following code:</p>\n\n<pre><code>def blob\n    @blob ||= ActiveStorage::Blob.find_signed(signed_id) unless signed_id.blank?\nrescue StandardError =&gt; error\n    # Handle error\nend\n</code></pre>\n\n<p>if a user refreshes the page and the form is resubmitted with the <code>signed_int</code> ActiveRecord::RecordNotFound is still raised to the controller and fails on the memoization line. </p>\n\n<p>What could cause a rescue on StandardError to not be caught?</p>\n\n<p>Edit: Here's the stack trace</p>\n\n<pre><code>ActiveRecord::RecordNotFound - Couldn't find ActiveStorage::Blob with 'id'=80:\napp/services/contact_us_form_manager.rb:76:in `blob'\napp/services/contact_us_form_manager.rb:66:in `check_file_size'\napp/services/contact_us_form_manager.rb:37:in `create'\napp/controllers/admin/contacts_controller.rb:18:in `create'\napp/controllers/application_controller.rb:280:in `set_true_user'\napp/controllers/application_controller.rb:262:in `set_current_user'\napp/controllers/application_controller.rb:255:in `set_current_client'\napp/controllers/application_controller.rb:113:in `assign_time_zone'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1847, "user_id": 1049170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e6058ebb749df75fcd91c920e49e4cc7?s=128&d=identicon&r=PG", "display_name": "psantos", "link": "https://stackoverflow.com/users/1049170/psantos"}, "edited": false, "score": 2, "creation_date": 1551282479, "post_id": 54909262, "comment_id": 96585498, "body": "stop rails, then stop spring (bin/spring stop) and lastly start your rails app again"}, {"owner": {"reputation": 318, "user_id": 1877501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46aabbe257541e8efd34e98f0e20c08c?s=128&d=identicon&r=PG", "display_name": "Londerson Ara&#250;jo", "link": "https://stackoverflow.com/users/1877501/londerson-ara%c3%bajo"}, "reply_to_user": {"reputation": 1847, "user_id": 1049170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e6058ebb749df75fcd91c920e49e4cc7?s=128&d=identicon&r=PG", "display_name": "psantos", "link": "https://stackoverflow.com/users/1049170/psantos"}, "edited": false, "score": 0, "creation_date": 1551282638, "post_id": 54909262, "comment_id": 96585609, "body": "Thanks, I make this and nothings happen. I got the same error. I remove Spring too, but, the same error again."}, {"owner": {"reputation": 1847, "user_id": 1049170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e6058ebb749df75fcd91c920e49e4cc7?s=128&d=identicon&r=PG", "display_name": "psantos", "link": "https://stackoverflow.com/users/1049170/psantos"}, "edited": false, "score": 0, "creation_date": 1551283258, "post_id": 54909262, "comment_id": 96586039, "body": "can you show how you call and include <code>MarketShare::Foo</code> module from the controller ?"}, {"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 1, "creation_date": 1551340710, "post_id": 54909262, "comment_id": 96606898, "body": "Can you try <code>::MarketShare::Foo</code> with the leading scope resolution operator? It looks like you might have a module name resolution conflict.  It will be good to know if you can access it from the global scope."}], "answers": [{"comments": [{"owner": {"reputation": 318, "user_id": 1877501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46aabbe257541e8efd34e98f0e20c08c?s=128&d=identicon&r=PG", "display_name": "Londerson Ara&#250;jo", "link": "https://stackoverflow.com/users/1877501/londerson-ara%c3%bajo"}, "edited": false, "score": 0, "creation_date": 1551282865, "post_id": 54909369, "comment_id": 96585769, "body": "Thanks, but I make this and nothings happen. I got the same error. I remove Spring too, but I got the same error again."}, {"owner": {"reputation": 1847, "user_id": 1049170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e6058ebb749df75fcd91c920e49e4cc7?s=128&d=identicon&r=PG", "display_name": "psantos", "link": "https://stackoverflow.com/users/1049170/psantos"}, "reply_to_user": {"reputation": 318, "user_id": 1877501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46aabbe257541e8efd34e98f0e20c08c?s=128&d=identicon&r=PG", "display_name": "Londerson Ara&#250;jo", "link": "https://stackoverflow.com/users/1877501/londerson-ara%c3%bajo"}, "edited": false, "score": 0, "creation_date": 1551283301, "post_id": 54909369, "comment_id": 96586074, "body": "@LondersonAra&#250;jo can you show how you call MarketShare::Foo module from the controller ?"}, {"owner": {"reputation": 318, "user_id": 1877501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46aabbe257541e8efd34e98f0e20c08c?s=128&d=identicon&r=PG", "display_name": "Londerson Ara&#250;jo", "link": "https://stackoverflow.com/users/1877501/londerson-ara%c3%bajo"}, "edited": false, "score": 0, "creation_date": 1551285018, "post_id": 54909369, "comment_id": 96587197, "body": "Foo is a class, and MarketShare is a namespace so, i call: <code>MarketShare::Foo.new(params).commit</code>"}], "tags": [], "owner": {"reputation": 1847, "user_id": 1049170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e6058ebb749df75fcd91c920e49e4cc7?s=128&d=identicon&r=PG", "display_name": "psantos", "link": "https://stackoverflow.com/users/1049170/psantos"}, "is_accepted": false, "score": 0, "last_activity_date": 1551282656, "creation_date": 1551282656, "answer_id": 54909369, "question_id": 54909262, "link": "https://stackoverflow.com/questions/54909262/cant-load-module-in-controller-nameerror-uninitialized-constant/54909369#54909369", "title": "Cant load module in controller - NameError: uninitialized constant", "body": "<p>You don't need this configuration: </p>\n\n<blockquote>\n  <p>config.autoload_paths.push(Rails.root.join('app/services/market_share'))</p>\n</blockquote>\n\n<p>Try following:</p>\n\n<blockquote>\n  <p>1- STOP Rails: CRTL + z</p>\n  \n  <p>2- STOP Spring: bin/spring stop</p>\n  \n  <p>3- START Rails: bin/rails s</p>\n</blockquote>\n\n<p>Reload your app</p>\n"}], "owner": {"reputation": 318, "user_id": 1877501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46aabbe257541e8efd34e98f0e20c08c?s=128&d=identicon&r=PG", "display_name": "Londerson Ara&#250;jo", "link": "https://stackoverflow.com/users/1877501/londerson-ara%c3%bajo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551282827, "creation_date": 1551282319, "last_edit_date": 1551282827, "question_id": 54909262, "link": "https://stackoverflow.com/questions/54909262/cant-load-module-in-controller-nameerror-uninitialized-constant", "title": "Cant load module in controller - NameError: uninitialized constant", "body": "<p>How can I load my services module if I have this directory and file structure:</p>\n\n<p><code>MarketShare::Foo</code> in\n<code>app/services/market_share/foo.rb</code></p>\n\n<p>So I can access this module with rails console (eg: <code>MarketShare::Foo</code>), but in my controller <code>Report::MarketSharesController</code> in <code>app/controllers/report/market_shares_controller.rb</code> I get this error:</p>\n\n<pre><code>NameError: uninitialized constant Report::MarketSharesController::Foo\n</code></pre>\n\n<p>when I call with <code>MarketShare::Foo</code>.</p>\n\n<p>I have insert this path in autoloads too:</p>\n\n<pre><code>config.autoload_paths.push(Rails.root.join('app/services/market_share')) \n</code></pre>\n\n<p>but I got the same error again.</p>\n\n<p>EDITED: Guys, i try stop <code>rails server</code> and stop <code>spring</code> too, but the error persist.</p>\n"}, {"tags": ["javascript", "ruby", "embedded-ruby"], "comments": [{"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551282645, "post_id": 54908608, "comment_id": 96585613, "body": "Would you share the entire file with it&#39;s name?"}, {"owner": {"reputation": 2290, "user_id": 4190933, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-437mIFzYMIA/AAAAAAAAAAI/AAAAAAAABXU/pU1re7BSt2w/photo.jpg?sz=128", "display_name": "Jared Menard", "link": "https://stackoverflow.com/users/4190933/jared-menard"}, "edited": false, "score": 0, "creation_date": 1551285709, "post_id": 54908608, "comment_id": 96587658, "body": "what is your desired result? (From the perspective of the javascript)"}], "answers": [{"tags": [], "owner": {"reputation": 2486, "user_id": 3149988, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e372b773ea8ee0931b8173763e0b758d?s=128&d=identicon&r=PG&f=1", "display_name": "echan00", "link": "https://stackoverflow.com/users/3149988/echan00"}, "is_accepted": true, "score": 0, "last_activity_date": 1551635751, "creation_date": 1551635751, "answer_id": 54971925, "question_id": 54908608, "link": "https://stackoverflow.com/questions/54908608/embed-ruby-into-javascript-string/54971925#54971925", "title": "Embed ruby into javascript string", "body": "<p>I ended up creating an instance variable in the server:</p>\n\n<pre><code>@some_name = \"tfx-#{@doc.doc[:b].metadata['filename']}\"\n</code></pre>\n\n<p>And in my javascript file I used the variable:</p>\n\n<pre><code>url = \"&lt;%= @document.doc[:a].url(response_content_disposition: ContentDisposition.attachment(@some_name)) %&gt;\";\n</code></pre>\n"}], "owner": {"reputation": 2486, "user_id": 3149988, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/e372b773ea8ee0931b8173763e0b758d?s=128&d=identicon&r=PG&f=1", "display_name": "echan00", "link": "https://stackoverflow.com/users/3149988/echan00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 54971925, "answer_count": 1, "score": 0, "last_activity_date": 1551635751, "creation_date": 1551280317, "last_edit_date": 1551281654, "question_id": 54908608, "link": "https://stackoverflow.com/questions/54908608/embed-ruby-into-javascript-string", "title": "Embed ruby into javascript string", "body": "<p>I want to embed <code>tfx-&lt;%= @doc.doc[:b].metadata['filename']} %&gt;</code> into a javascript string called 'url'</p>\n\n<pre><code>url = \"&lt;%= @document.doc[:a].url(response_content_disposition: ContentDisposition.attachment( [INSERT HERE] )) %&gt;\";\n</code></pre>\n\n<p>I want something like this:</p>\n\n<pre><code>  url = \"&lt;%= @document.doc[:a].url(response_content_disposition: ContentDisposition.attachment( tfx-#{ @doc.doc[:b].metadata['filename']} )) %&gt;\";\n</code></pre>\n"}, {"tags": ["ruby", "macos", "rubygems", "rvm"], "comments": [{"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551282826, "post_id": 54908206, "comment_id": 96585727, "body": "For example, which command did you try?"}, {"owner": {"reputation": 32630, "user_id": 1011527, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/950d56c466691980bba71859798bfe65?s=128&d=identicon&r=PG", "display_name": "Jay Blanchard", "link": "https://stackoverflow.com/users/1011527/jay-blanchard"}, "reply_to_user": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551283420, "post_id": 54908206, "comment_id": 96586153, "body": "I tried <code>locksmith getpair -j my-app</code> @zeitnot. From that I got &quot;command not found&quot;."}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551283557, "post_id": 54908206, "comment_id": 96586257, "body": "Would you try <code>bundle exec locksmith getpair -j my-app</code>?"}, {"owner": {"reputation": 32630, "user_id": 1011527, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/950d56c466691980bba71859798bfe65?s=128&d=identicon&r=PG", "display_name": "Jay Blanchard", "link": "https://stackoverflow.com/users/1011527/jay-blanchard"}, "reply_to_user": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551283666, "post_id": 54908206, "comment_id": 96586330, "body": "@zeitnot that returns <code>Could not locate Gemfile or .bundle&#47; directory</code>"}, {"owner": {"reputation": 2290, "user_id": 4190933, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-437mIFzYMIA/AAAAAAAAAAI/AAAAAAAABXU/pU1re7BSt2w/photo.jpg?sz=128", "display_name": "Jared Menard", "link": "https://stackoverflow.com/users/4190933/jared-menard"}, "edited": false, "score": 0, "creation_date": 1551285353, "post_id": 54908206, "comment_id": 96587437, "body": "Are you able to use rbenv instead?"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1551287742, "post_id": 54908206, "comment_id": 96588851, "body": "Try <code>find ~ -name locksmith -perm +u+x 2&gt;&#47;dev&#47;null</code> that will tell you if a locksmith executable was installed anywhere in your home directory. Failing that, try <code>find &#47;</code> instead to see if it&#39;s anywhere on your computer. My guess is you are somehow installing the gems to the wrong place"}, {"owner": {"reputation": 32630, "user_id": 1011527, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/950d56c466691980bba71859798bfe65?s=128&d=identicon&r=PG", "display_name": "Jay Blanchard", "link": "https://stackoverflow.com/users/1011527/jay-blanchard"}, "reply_to_user": {"reputation": 2290, "user_id": 4190933, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-437mIFzYMIA/AAAAAAAAAAI/AAAAAAAABXU/pU1re7BSt2w/photo.jpg?sz=128", "display_name": "Jared Menard", "link": "https://stackoverflow.com/users/4190933/jared-menard"}, "edited": false, "score": 1, "creation_date": 1551306531, "post_id": 54908206, "comment_id": 96597286, "body": "I could @JaredMenard, but exactly how many Ruby managers should I employ? :)"}, {"owner": {"reputation": 32630, "user_id": 1011527, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/950d56c466691980bba71859798bfe65?s=128&d=identicon&r=PG", "display_name": "Jay Blanchard", "link": "https://stackoverflow.com/users/1011527/jay-blanchard"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1551306600, "post_id": 54908206, "comment_id": 96597306, "body": "@Max Gems are being installed in the <i>cache/</i> folder, instead of <i>bin/</i>."}, {"owner": {"reputation": 32630, "user_id": 1011527, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/950d56c466691980bba71859798bfe65?s=128&d=identicon&r=PG", "display_name": "Jay Blanchard", "link": "https://stackoverflow.com/users/1011527/jay-blanchard"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1551306980, "post_id": 54908206, "comment_id": 96597437, "body": "The <code>find</code> does not return anything @Max"}, {"owner": {"reputation": 2290, "user_id": 4190933, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-437mIFzYMIA/AAAAAAAAAAI/AAAAAAAABXU/pU1re7BSt2w/photo.jpg?sz=128", "display_name": "Jared Menard", "link": "https://stackoverflow.com/users/4190933/jared-menard"}, "edited": false, "score": 0, "creation_date": 1551363950, "post_id": 54908206, "comment_id": 96620303, "body": "@JayBlanchard, good point. I hope you find a solution to your issue. Cheers."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1551371658, "post_id": 54908206, "comment_id": 96625040, "body": "@JayBlanchard if find isn&#39;t returning anything, your gem executables aren&#39;t being installed <i>at all</i>. Is there some rubygems config to not install gem executables? It&#39;s very strange that it thinks they&#39;re installed but they don&#39;t exist anywhere on your hard drive."}, {"owner": {"reputation": 32630, "user_id": 1011527, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/950d56c466691980bba71859798bfe65?s=128&d=identicon&r=PG", "display_name": "Jay Blanchard", "link": "https://stackoverflow.com/users/1011527/jay-blanchard"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1551372615, "post_id": 54908206, "comment_id": 96625559, "body": "Agreed @Max - it is very strange. We were able to come up with a hacky work-around, but I don&#39;t want to post that as an answer, because it is a one-off."}], "owner": {"reputation": 32630, "user_id": 1011527, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/950d56c466691980bba71859798bfe65?s=128&d=identicon&r=PG", "display_name": "Jay Blanchard", "link": "https://stackoverflow.com/users/1011527/jay-blanchard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551307042, "creation_date": 1551279220, "last_edit_date": 1551307042, "question_id": 54908206, "link": "https://stackoverflow.com/questions/54908206/rvm-not-installing-gems-to-bin-on-macbook", "title": "RVM not installing gems to /bin on Macbook", "body": "<p>I have a relatively new installation of <code>rvm</code> to use to manage Ruby and now I am trying to install gems and use them. I can perform <code>gem list</code> and see the installed gems:</p>\n\n<pre><code>jblanchard$ gem list\n\n*** LOCAL GEMS ***\n\nbigdecimal (default: 1.4.1)\nbundler (default: 1.17.2)\ncmath (default: 1.0.0)\ncsv (default: 3.0.4)\ndate (default: 2.0.0)\ndbm (default: 1.0.0)\ne2mmap (default: 0.1.0)\netc (default: 1.0.1)\nfcntl (default: 1.0.0)\nfiddle (default: 1.0.0)\nfileutils (default: 1.1.0)\nforwardable (default: 1.2.0)\ngem-wrappers (1.4.0)\nio-console (default: 0.4.7)\nipaddr (default: 1.2.2)\nirb (default: 1.0.0)\njson (default: 2.1.0)\nlocksmith (0.1.1)\n...\n</code></pre>\n\n<p>When I perform <code>gem env</code> I see the executable directory:</p>\n\n<pre><code>jblanchard$ gem env\nRubyGems Environment:\n  - RUBYGEMS VERSION: 3.0.1\n  - RUBY VERSION: 2.6.1 (2019-01-30 patchlevel 33) [x86_64-darwin17]\n  - INSTALLATION DIRECTORY: /Users/jblanchard/.rvm/gems/ruby-2.6.1\n  - USER INSTALLATION DIRECTORY: /Users/jblanchard/.gem/ruby/2.6.0\n  - RUBY EXECUTABLE: /Users/jblanchard/.rvm/rubies/ruby-2.6.1/bin/ruby\n  - GIT EXECUTABLE: /usr/bin/git\n  - EXECUTABLE DIRECTORY: /Users/jblanchard/.rvm/gems/ruby-2.6.1/bin\n  - SPEC CACHE DIRECTORY: /Users/jblanchard/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /Users/jblanchard/.rvm/rubies/ruby-2.6.1/etc\n</code></pre>\n\n<p>However, none of the gems are in the <em>bin/</em> and I get a \"command not found\" when trying to use them. I have found the gems in the <em>cache/</em> directory, but adding that directory to the path doesn't help.</p>\n\n<pre><code>cache jblanchard$ ls -la\ntotal 64\ndrwxr-xr-x   5 jblanchard  staff    160 Feb 26 08:02 .\ndrwxr-xr-x  11 jblanchard  staff    352 Feb 25 12:40 ..\n-rw-r--r--   1 jblanchard  staff  13312 Feb 25 12:40 gem-wrappers-1.4.0.gem\n-rw-r--r--   1 jblanchard  staff   8192 Feb 26 08:02 locksmith-0.1.1.gem\n-rw-r--r--   1 jblanchard  staff   7680 Feb 26 08:02 tuwaga-0.0.3.gem\n</code></pre>\n\n<p>I have tried all of the suggestions in <a href=\"https://stackoverflow.com/q/9485083/1011527\">Gem Command not found</a>, <a href=\"https://stackoverflow.com/questions/2392293/ruby-gems-returns-command-not-found\">Ruby Gems returns &quot;command not found&quot;</a> and a couple of other answers here on Stack, to no avail.</p>\n\n<p>Here is my <em>.bashrc</em> file where paths are defined.</p>\n\n<pre><code># Add gems executable path..\nexport PATH=\"$PATH:$HOME/.rvm/gems/ruby-2.6.1/bin\"\n\n# Add RVM to PATH for scripting. Make sure this is the last PATH variable change.\nexport PATH=\"$PATH:$HOME/.rvm/bin\"\n</code></pre>\n\n<p>Have I done something wrong? Shouldn't rvm put the gems in the <em>bin/</em>? Is there something I can do to make sure gems are installed there?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "postgresql", "csv"], "comments": [{"owner": {"reputation": 1499, "user_id": 526514, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/511274e57d0d546ed59b3d023bf5513a?s=128&d=identicon&r=PG", "display_name": "Ivan Yurov", "link": "https://stackoverflow.com/users/526514/ivan-yurov"}, "edited": false, "score": 0, "creation_date": 1551278135, "post_id": 54907686, "comment_id": 96582716, "body": "It would definitely help if you provided schema and examples of relations that needs to be taken into account. But generally batching is a good way to go."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 2725729, "user_type": "registered", "profile_image": "https://graph.facebook.com/1427101351/picture?type=large", "display_name": "Oduah Tobi", "link": "https://stackoverflow.com/users/2725729/oduah-tobi"}, "edited": false, "score": 0, "creation_date": 1551292632, "post_id": 54907845, "comment_id": 96591215, "body": "Thanks for suggesting! We had some constraints initially that basically took importing into a temporary table out of the question, but we&#39;ve worked around that now"}], "tags": [], "owner": {"reputation": 1919, "user_id": 384689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a66498e80512ef50822cceb2a2f5cba3?s=128&d=identicon&r=PG", "display_name": "claasz", "link": "https://stackoverflow.com/users/384689/claasz"}, "is_accepted": true, "score": 1, "last_activity_date": 1551278089, "creation_date": 1551278089, "answer_id": 54907845, "question_id": 54907686, "link": "https://stackoverflow.com/questions/54907686/parsing-large-csvs-while-searching-database/54907845#54907845", "title": "Parsing large CSVs while searching Database", "body": "<ol>\n<li>Load the complete CSV file into a temporary table in your database (using a DB tool, see e.g. <a href=\"https://stackoverflow.com/q/2987433/384689\">How to import CSV file data into a PostgreSQL table?</a>)</li>\n<li>Perform matching and operations in-database, i.e. in SQL</li>\n<li>If necessary, truncate the temporary table afterwards</li>\n</ol>\n\n<p>This would move most of the load into the DB server, avoiding all the ActiveRecord overhead (network traffic, result parsing, model instantiation etc.)</p>\n"}], "owner": {"reputation": 45, "user_id": 2725729, "user_type": "registered", "profile_image": "https://graph.facebook.com/1427101351/picture?type=large", "display_name": "Oduah Tobi", "link": "https://stackoverflow.com/users/2725729/oduah-tobi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 54907845, "answer_count": 1, "score": 0, "last_activity_date": 1551278089, "creation_date": 1551277604, "question_id": 54907686, "link": "https://stackoverflow.com/questions/54907686/parsing-large-csvs-while-searching-database", "title": "Parsing large CSVs while searching Database", "body": "<p>Currently have a tricky problem and need ideas for most efficient way to go about solving.</p>\n\n<p>We periodically iterate through large CSV files (~50000 to 2m rows), and for each row, we need to check a database table for matching columns.</p>\n\n<p>So for example, each CSV row could have details about an Event - artist, venue, date/time etc, and for each row, we check our database (PG) for any rows that match the artist, venue and date/time the most, and then perform operations if any match is found.</p>\n\n<p>Currently, the entire process is highly CPU, memory and time intensive pulling row by row, so we perform the matching in batches, but still seeking ideas for an efficient way to perform the comparison both memory-wise, and time-wise</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 2, "creation_date": 1551273202, "post_id": 54906192, "comment_id": 96579649, "body": "Please try a solution yourself first and let us know what you try"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1551273713, "post_id": 54906192, "comment_id": 96579960, "body": "This looks easy but complex when you put lots of data in hash."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551274725, "post_id": 54906192, "comment_id": 96580569, "body": "What about values with different keys? Should they also be merged or remain separately? i.e. can the result array contain more than 1 element? if so, please give a example."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1551274810, "post_id": 54906777, "comment_id": 96580623, "body": "or <code>arr.inject { |a, b| a.merge(b) { ... } }</code>"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1551274861, "post_id": 54906777, "comment_id": 96580662, "body": "@Stefan I just thought it but now thinking why I followed so long way in my answer :|"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1551275019, "post_id": 54906777, "comment_id": 96580753, "body": "@Stefan <code>merge!</code> should have better performance^W memory comsumption [in theory]. But yes, of course."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 7, "last_activity_date": 1551274659, "creation_date": 1551274659, "answer_id": 54906777, "question_id": 54906192, "link": "https://stackoverflow.com/questions/54906192/how-to-sum-values-inside-array-of-hash-with-same-keys/54906777#54906777", "title": "How to sum values inside array of hash with same keys", "body": "<p>Reduce by <a href=\"https://ruby-doc.org/core-2.6.1/Hash.html#method-i-merge-21\" rel=\"noreferrer\"><code>Hash#merge!</code></a> with a block:</p>\n\n<pre><code>arr = [{\"69120090\"=&gt; [1, 2, 3] }, {\"69120090\"=&gt; [4, 5, 6] }]\narr.each_with_object({}) do |h, acc|\n  acc.merge!(h) { |_, v1, v2| v1.zip(v2).map(&amp;:sum) }\nend\n#\u21d2 {\"69120090\"=&gt;[5, 7, 9]}\n</code></pre>\n\n<p>The above accepts any number of hashes with any number of keys each.</p>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1551297624, "creation_date": 1551297624, "answer_id": 54913582, "question_id": 54906192, "link": "https://stackoverflow.com/questions/54906192/how-to-sum-values-inside-array-of-hash-with-same-keys/54913582#54913582", "title": "How to sum values inside array of hash with same keys", "body": "<p>Just to have another option, given the array:</p>\n\n<pre><code>arr = [{ a: [1, 2, 3], b:[8,9,0] }, { a: [4, 5, 6], c: [1,2,3] }, { b: [0,1,2], c: [1,2,3] } ]\n</code></pre>\n\n<p>You could write:</p>\n\n<pre><code>tmp = Hash.new{ |k,v| k[v] = [] }\narr.each { |h| h.each { |k,v| tmp[k] &lt;&lt; v } }\ntmp.transform_values { |k| k.transpose.map(&amp;:sum) }\n</code></pre>\n\n<p>Which returns</p>\n\n<pre><code>tmp #=&gt; {:a=&gt;[5, 7, 9], :b=&gt;[8, 10, 2], :c=&gt;[2, 4, 6]}\n</code></pre>\n\n<p><hr>\nAs one liner:</p>\n\n<pre><code>(arr.each_with_object(Hash.new{ |k,v| k[v] = [] }) { |h, tmp| h.each { |k,v| tmp[k] &lt;&lt; v } }).transform_values { |k| k.transpose.map(&amp;:sum) }\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 6256344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57b7944e60e478d7bbf89fc0539129e2?s=128&d=identicon&r=PG&f=1", "display_name": "Nitin Rakesh", "link": "https://stackoverflow.com/users/6256344/nitin-rakesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1551331786, "creation_date": 1551272695, "last_edit_date": 1551331786, "question_id": 54906192, "link": "https://stackoverflow.com/questions/54906192/how-to-sum-values-inside-array-of-hash-with-same-keys", "title": "How to sum values inside array of hash with same keys", "body": "<p>I want to sum the values of same keys like</p>\n\n<pre><code>arr = [{\"69120090\" =&gt; [1, 2, 3]}, {\"69120090\" =&gt; [4, 5, 6]}]\n</code></pre>\n\n<p>I need to result in:</p>\n\n<pre><code>result = [{\"69120090\" =&gt; [5, 7, 9]}]\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 10380639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6e06ab7e5b62ca89dbd40e58c03734?s=128&d=identicon&r=PG&f=1", "display_name": "crispycat", "link": "https://stackoverflow.com/users/10380639/crispycat"}, "edited": false, "score": 0, "creation_date": 1551271208, "post_id": 54905681, "comment_id": 96578424, "body": "Ok thanks! I still get the following wrong message though &quot;no implicit conversion of Integer into String&quot;. I don&#39;t understand where I&#39;m supposed to do this conversion? Isn&#39;t my first conversion in the beginning enough? :) thanks!"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 79, "user_id": 10380639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6e06ab7e5b62ca89dbd40e58c03734?s=128&d=identicon&r=PG&f=1", "display_name": "crispycat", "link": "https://stackoverflow.com/users/10380639/crispycat"}, "edited": false, "score": 0, "creation_date": 1551271305, "post_id": 54905681, "comment_id": 96578493, "body": "Ah, indeed. Updated the answer."}, {"owner": {"reputation": 79, "user_id": 10380639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6e06ab7e5b62ca89dbd40e58c03734?s=128&d=identicon&r=PG&f=1", "display_name": "crispycat", "link": "https://stackoverflow.com/users/10380639/crispycat"}, "edited": false, "score": 0, "creation_date": 1551271349, "post_id": 54905681, "comment_id": 96578515, "body": "Oh! Ok. Thank you!"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1551271290, "last_edit_date": 1551271290, "creation_date": 1551271014, "answer_id": 54905681, "question_id": 54905591, "link": "https://stackoverflow.com/questions/54905591/how-do-i-add-one-more-year-to-the-given-input/54905681#54905681", "title": "How do I add one more year to the given input?", "body": "<p>You don\u2019t need to call <code>each</code> since it\u2019s designed to iterate <em>arrays</em> and you have an integer. Also, you don\u2019t need to reassign the value back to <code>int</code> local variable, just return it from the method:</p>\n\n<pre><code>def age_next_year(int)\n  int + 1\nend\n</code></pre>\n\n<p>Another issue is you are trying to <code>+</code> what <code>age_next_year</code> method returns (integer) to the string. The explicit conversion is required there:</p>\n\n<pre><code>puts \"Next year I\u2019ll be \" + age_next_year(age).to_s\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10396064, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-a254yLVH1gU/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUSqa15Ig5I_cETHsr0vfE3v_UArg/mo/photo.jpg?sz=128", "display_name": "Aznarbh", "link": "https://stackoverflow.com/users/10396064/aznarbh"}, "is_accepted": false, "score": 0, "last_activity_date": 1551434952, "creation_date": 1551434952, "answer_id": 54942341, "question_id": 54905591, "link": "https://stackoverflow.com/questions/54905591/how-do-i-add-one-more-year-to-the-given-input/54942341#54942341", "title": "How do I add one more year to the given input?", "body": "<p>I'm just asking, but why don't you do something like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>print \"Age: \"\nage = gets.chomp.to_i + 1\nprintf \"Next year I'll be %d\\n\", age\n# OR\nputs \"Next year I'll be \" + age.to_s\n</code></pre>\n\n<p>It works fine for me, and it's smaller and quicker than what you did.</p>\n"}], "owner": {"reputation": 79, "user_id": 10380639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6e06ab7e5b62ca89dbd40e58c03734?s=128&d=identicon&r=PG&f=1", "display_name": "crispycat", "link": "https://stackoverflow.com/users/10380639/crispycat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1551434952, "creation_date": 1551270743, "last_edit_date": 1551331924, "question_id": 54905591, "link": "https://stackoverflow.com/questions/54905591/how-do-i-add-one-more-year-to-the-given-input", "title": "How do I add one more year to the given input?", "body": "<p>I want to get an output so that it adds one more year to an age input.</p>\n\n<p>This is my code:   </p>\n\n<pre><code>print \"Age: \"\nage = gets.chomp.to_i\n\ndef age_next_year(int)\n  age.each do |int|\n  int += 1\nend\n\nputs \"Next year I\u2019ll be \" + age_next_year(age)\n</code></pre>\n\n<p>I can't seem to get the correct output.</p>\n"}, {"tags": ["ruby", "highline"], "comments": [{"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551271216, "post_id": 54904952, "comment_id": 96578428, "body": "What does <code>@cli.ask</code> do? Is it waiting for user input?"}, {"owner": {"reputation": 2852, "user_id": 5222028, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/62345e20906dbccbf7e18f11ab4bd047?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/5222028/stephen"}, "reply_to_user": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551271708, "post_id": 54904952, "comment_id": 96578743, "body": "@zeitnot it prints the question and waits for user input"}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551271852, "post_id": 54904952, "comment_id": 96578823, "body": "So you want to test the input right?"}], "answers": [{"tags": [], "owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "is_accepted": false, "score": 0, "last_activity_date": 1551274156, "creation_date": 1551274156, "answer_id": 54906633, "question_id": 54904952, "link": "https://stackoverflow.com/questions/54904952/how-to-test-io-with-rspec-for-highline-gem/54906633#54906633", "title": "How to test IO with rspec for HighLine gem?", "body": "<p>As far as I understand you want to test <code>exit_or_continue</code> method depending on user input. In this method, there are two main important things. One of them is the user input that <code>@cli.ask</code> does and other one is <code>exit</code> method that quits the program if the user input is <code>quit</code>. </p>\n\n<p>To test these flow we need to stub both <code>Kernel.exit</code> and <code>HighLine#ask</code> method. \nFirstly, we override the <code>Kernel.exit</code> method inside the instance of <code>Asker</code> class. The <code>Kernel</code> module is included in the <code>Object</code> class and every class extend <code>Object</code> class implicitly in ruby. So our <code>Asker</code> class has the methods of <code>Kernel</code> by default.</p>\n\n<p>Why we stub the <code>exit</code> method inside the instance of <code>Asker</code> class is this would lead to unexpected problems if we stub it globally(In Kernel). What is more, unless we stub this method rspec quits and the rest of tests are not run. </p>\n\n<p>Secondly, we need to stub <code>HighLine#ask</code> method which waits for input from the client. <code>HighLine#ask</code> is method and this uses <code>Kernel.gets</code> under the hood. By stubbing this method, basically we say '<em>please return this value and do not wait for user input.</em>'. In other words, with <code>@cli.stub(ask: 'quit')</code> this will return <code>quit</code> or whatever you want without prompt something. </p>\n\n<p>So I think the following test will accomplish your need. If you encounter any problem please do not hesitate to drop a comment. </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>RSpec.describe Asker do\n\n  describe '#exit_or_continue' do\n    before do\n      @asker = Asker.new\n      @cli = @asker.instance_variable_get('@cli')\n      @asker.stub(exit: true) # We override Kernel.exit method inside asker instance\n    end\n\n    context 'when user input is quit' do\n      it 'returns true' do\n        @cli.stub(ask: 'quit') # We stub HighLine#ask method to return quit on behalf of the user.\n        expect(@sker.exit_or_continue).to be(true)\n      end\n    end\n    context 'when user is input is NOT quit' do\n      it 'returns nil' do\n        @cli.stub(ask: 'invalid response') # We stub HighLine#ask method to return invalid response on behalf of the user.\n        expect(@sker.exit_or_continue).to be_nil\n      end\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2852, "user_id": 5222028, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/62345e20906dbccbf7e18f11ab4bd047?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/5222028/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1551274156, "creation_date": 1551268596, "question_id": 54904952, "link": "https://stackoverflow.com/questions/54904952/how-to-test-io-with-rspec-for-highline-gem", "title": "How to test IO with rspec for HighLine gem?", "body": "<p>I have a class:</p>\n\n<pre><code>class Asker\n\n  def initialize\n    @cli = HighLine.new\n  end \n\n  def exit_or_continue\n    answer = @cli.ask \"Type 'quit' to exit at any time, Press 'Enter' to continue\"\n    exit(0) if answer == 'quit'\n  end\nend\n</code></pre>\n\n<p>How could I test the <code>exit_or_continue</code> method?</p>\n"}, {"tags": ["ruby", "aws-lambda", "multipartform-data", "character-replacement"], "comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1551298217, "post_id": 54904504, "comment_id": 96593741, "body": "My guess is the problem is not in writing the file but in the encoding of <code>file_str</code>. Whatever is doing the string encoding is forcing it to be valid UTF-8. You need to look earlier in the process"}, {"owner": {"reputation": 109, "user_id": 3542561, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dd3d231335a83ad9337747f4009a5159?s=128&d=identicon&r=PG&f=1", "display_name": "Avinash142857", "link": "https://stackoverflow.com/users/3542561/avinash142857"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1551323204, "post_id": 54904504, "comment_id": 96601348, "body": "You are correct. I tried the same with rails and I got the error even before reaching the action in the controller. Error: &quot;Encoding::UndefinedConversionError: &quot;\\x89&quot; from ASCII-8BIT to UTF-8&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 3542561, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dd3d231335a83ad9337747f4009a5159?s=128&d=identicon&r=PG&f=1", "display_name": "Avinash142857", "link": "https://stackoverflow.com/users/3542561/avinash142857"}, "edited": false, "score": 0, "creation_date": 1551274052, "post_id": 54904943, "comment_id": 96580148, "body": "Tried this but it&#39;s still giving the same corrupt file."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 109, "user_id": 3542561, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dd3d231335a83ad9337747f4009a5159?s=128&d=identicon&r=PG&f=1", "display_name": "Avinash142857", "link": "https://stackoverflow.com/users/3542561/avinash142857"}, "edited": false, "score": 0, "creation_date": 1551274113, "post_id": 54904943, "comment_id": 96580184, "body": "<code>file_str</code> must also have <code>&quot;BINARY&quot;</code> encoding."}, {"owner": {"reputation": 109, "user_id": 3542561, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dd3d231335a83ad9337747f4009a5159?s=128&d=identicon&r=PG&f=1", "display_name": "Avinash142857", "link": "https://stackoverflow.com/users/3542561/avinash142857"}, "edited": false, "score": 0, "creation_date": 1551323197, "post_id": 54904943, "comment_id": 96601347, "body": "But how can I get BINARY encoded file_str in the first place?. The string I am receiving is already corrupt as Ruby couldn&#39;t understand some of the characters(So it replaces them with the replacement character )."}, {"owner": {"reputation": 109, "user_id": 3542561, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dd3d231335a83ad9337747f4009a5159?s=128&d=identicon&r=PG&f=1", "display_name": "Avinash142857", "link": "https://stackoverflow.com/users/3542561/avinash142857"}, "edited": false, "score": 0, "creation_date": 1551948546, "post_id": 54904943, "comment_id": 96830058, "body": "Should I encode the string before saving it to file?"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1551268566, "creation_date": 1551268566, "answer_id": 54904943, "question_id": 54904504, "link": "https://stackoverflow.com/questions/54904504/aws-lambda-replacing-certain-characters-from-attachments-of-multipart-form-data/54904943#54904943", "title": "AWS Lambda replacing certain characters from attachments of multipart-form data with replacement character(U+FFFD)", "body": "<p>You need the binary mode on to work with (to write) binary files.</p>\n\n<pre><code>#                      \u21d3 THIS\nFile.open(file_path, 'wb') do |f|\n  f &lt;&lt; file_str\nend\n</code></pre>\n\n<p>You try to store the content in UTF-8 and <code>\\x89</code> is not valid UTF-8.</p>\n"}], "owner": {"reputation": 109, "user_id": 3542561, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dd3d231335a83ad9337747f4009a5159?s=128&d=identicon&r=PG&f=1", "display_name": "Avinash142857", "link": "https://stackoverflow.com/users/3542561/avinash142857"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1551269877, "creation_date": 1551267112, "last_edit_date": 1551269877, "question_id": 54904504, "link": "https://stackoverflow.com/questions/54904504/aws-lambda-replacing-certain-characters-from-attachments-of-multipart-form-data", "title": "AWS Lambda replacing certain characters from attachments of multipart-form data with replacement character(U+FFFD)", "body": "<p>I am using AWS lambda function to receive a multipart request with attachments and upload them to S3. </p>\n\n<p>But Lambda function replaces few characters with the replacement character and so the attachment getting corrupt. </p>\n\n<p>I checked on a PNG file.\nsample content: <code>\\x89PNG\\r\\n\\u001A\\n\\u0000\\u0000\\u0000</code></p>\n\n<p>All the characters are received as they are but <code>\\x89</code> or in general <code>\\x**</code> getting replaced by the replacement character(U+FFFD).</p>\n\n<p>I am extracting the attachment <code>file_str</code> as a string and writing into a file and then uploading it to s3.</p>\n\n<pre><code>File.open(file_path, 'w') do |f|\n  f &lt;&lt; file_str\nend\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "paperclip"], "answers": [{"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1551334199, "post_id": 54907322, "comment_id": 96604222, "body": "I tried for <code>URI.parse</code> but got some issues <code>open-uri</code> is pretty handy."}], "tags": [], "owner": {"reputation": 304, "user_id": 1826279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25fdaa1b4c751f1ac3024c222fc99c3b?s=128&d=identicon&r=PG", "display_name": "Mihhail Sidorin", "link": "https://stackoverflow.com/users/1826279/mihhail-sidorin"}, "is_accepted": true, "score": 0, "last_activity_date": 1551276523, "creation_date": 1551276523, "answer_id": 54907322, "question_id": 54904010, "link": "https://stackoverflow.com/questions/54904010/how-can-i-upload-paperclip-image-on-remote-server-accessed-by-pem-file-rails-c/54907322#54907322", "title": "How can I upload paperclip image on remote server (accessed by pem file) rails console?", "body": "<p>I suggest you to check another answer <a href=\"https://stackoverflow.com/questions/4049709/save-image-from-url-by-paperclip\">\"Save image from URL by paperclip\n\"</a> which does what you want to achieve. Check <a href=\"https://stackoverflow.com/a/4050758/1826279\">code snippet</a>: <code>self.profile_pic = open(url)</code> will upload the picture to your model. Your picture real URL is <a href=\"https://i.imgur.com/9a6UzVx.png\" rel=\"nofollow noreferrer\">https://i.imgur.com/9a6UzVx.png</a></p>\n"}], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 54907322, "answer_count": 1, "score": 0, "last_activity_date": 1551276523, "creation_date": 1551265462, "question_id": 54904010, "link": "https://stackoverflow.com/questions/54904010/how-can-i-upload-paperclip-image-on-remote-server-accessed-by-pem-file-rails-c", "title": "How can I upload paperclip image on remote server (accessed by pem file) rails console?", "body": "<p>I am having production server and database is from <code>aws</code>. I visit remote machine using pem file &amp; start <code>rails console</code>.</p>\n\n<p>I have particular invitee (from <code>Invitee</code> model) &amp; have following column to store image using <code>paperclip</code></p>\n\n<p><strong>invitee.rb</strong></p>\n\n<pre><code>  has_attached_file :profile_pic, {:styles =&gt; {:large =&gt; \"640x640&gt;\",\n                                         :small =&gt; \"200x200&gt;\", \n                                         :thumb =&gt; \"60x60&gt;\"},\n                                   :convert_options =&gt; {:large =&gt; \"-strip -quality 90\", \n                                         :small =&gt; \"-strip -quality 80\", \n                                         :thumb =&gt; \"-strip -quality 80\"}\n                                         }.merge(INVITEE_IMAGE_PATH)\n</code></pre>\n\n<p>I want to upload image at <a href=\"https://imgur.com/9a6UzVx\" rel=\"nofollow noreferrer\">https://imgur.com/9a6UzVx</a> by using <code>rails console production</code>. How can I do this?</p>\n\n<p>Input I can have is, image url and object of invitee for which <code>profile_pic</code> columns to be updated.</p>\n\n<p>I have image in my local machine but I cannot upload it from local to remote so using <a href=\"https://imglur.com\" rel=\"nofollow noreferrer\">https://imglur.com</a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1880, "user_id": 3574603, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/71a7b92124991652bf4dd64a9c50a9ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3574603", "link": "https://stackoverflow.com/users/3574603/user3574603"}, "edited": false, "score": 0, "creation_date": 1551265809, "post_id": 54903960, "comment_id": 96575298, "body": "Are you sure you want your function to return the value of <code>puts</code>? <code>puts num1+num2</code> might not be returning what you think it should. Does <code>puts num1+num2</code> and <code>num1+num2</code> return the same thing? You can check in IRB."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1551266543, "post_id": 54903960, "comment_id": 96575725, "body": "I&#39;d suggest to pass parameters to your methods, then return just the result."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1551266797, "post_id": 54903960, "comment_id": 96575888, "body": "If you want to call methods dynamically: <a href=\"https://stackoverflow.com/questions/5349624/how-to-call-methods-dynamically-based-on-their-name/26284769\" title=\"how to call methods dynamically based on their name\">stackoverflow.com/questions/5349624/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 0, "creation_date": 1551267987, "post_id": 54904477, "comment_id": 96576578, "body": "I think <code>#to_i</code> is not good for calculator. <code>#to_f</code> is better"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 0, "creation_date": 1551268139, "post_id": 54904477, "comment_id": 96576666, "body": "@mechnicov try <code>0.1 * 0.2</code> in IRB \u2013 the result is probably not what you expect from a calculator ;-)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1551268456, "post_id": 54904477, "comment_id": 96576846, "body": "@Stefan <code>.to_f.round(8)</code> would be what I probably expect from a calculator :)"}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 1, "creation_date": 1551269544, "post_id": 54904477, "comment_id": 96577455, "body": "I meant, if you want to know how much will be 2.5 multiplied by 2.5, then instead of 6.25 your variant will write <code>2 * 2 = 4</code>. It is not a calculator ;-) So <code>#to_f</code> is better I think"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 0, "creation_date": 1551274283, "post_id": 54904477, "comment_id": 96580292, "body": "@mechnicov <i>&quot;It is not a calculator&quot;</i> \u2013 that&#39;s right, this is just some example code. Writing an actual calculator is beyond the scope of this answer. (and I don&#39;t think an actual calculator should be floating-point-based)"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 0, "last_activity_date": 1551273826, "last_edit_date": 1551273826, "creation_date": 1551267013, "answer_id": 54904477, "question_id": 54903960, "link": "https://stackoverflow.com/questions/54903960/basic-arithmetic-operations-with-user-input/54904477#54904477", "title": "Basic arithmetic operations with user input", "body": "<p>You can't use local variables defined outside a method within that method. Instead, you have to <em>pass</em> it as an argument:</p>\n\n<pre><code>def mul(num1, num2)\n  puts num1 * num2\nend\n</code></pre>\n\n<p>You also don't have to use the same variable names, use whatever makes sense in the context of the method:</p>\n\n<pre><code>def mul(a, b)\n  puts a * b\nend\n\nmul(2, 3)\n# prints 6\n</code></pre>\n\n<p>Methods usually become more versatile if they do <em>one</em> thing. The above implementation multiplies <code>a</code> and <code>b</code> and then prints the result via <code>puts</code>. Let's move the printing outside the method:</p>\n\n<pre><code>def mul(a, b)\n  a * b\nend\n\nputs mul(2, 3)\n# prints 6\n</code></pre>\n\n<p>We can now perform actual calculations:</p>\n\n<pre><code>x = mul(2, 3) #=&gt; 6\ny = mul(2, 5) #=&gt; 10\nputs mul(x, y)\n# prints 60\n</code></pre>\n\n<p>This wouldn't have been possible with the variant which incorporated <code>puts</code>.</p>\n\n<hr>\n\n<p>With user input and output: (using whole numbers for demonstration purposes)</p>\n\n<pre><code>print \"first factor: \"\nnum1 = gets.to_i\n\nprint \"second factor: \"\nnum2 = gets.to_i\n\nputs \"#{num1} * #{num2} = #{mul(num1, num2)}\"\n</code></pre>\n\n<p>Note that <code>#{...}</code> is needed to interpolate other values.</p>\n\n<p>Example session:</p>\n\n<pre><code>first factor: 2\nsecond factor: 3\n2 * 3 = 6\n</code></pre>\n\n<hr>\n\n<p>To have different output based on a given operator, you need a conditional, e.g. a <code>case</code> statement:</p>\n\n<pre><code>op = gets.chomp\n\ncase op\nwhen 'mul'\n  puts mul(num1, num2)\nwhen 'add'\n  puts add(num1, num2)\n# ...\nend\n</code></pre>\n\n<hr>\n\n<p>Hope this will get you started.</p>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1551267958, "creation_date": 1551267958, "answer_id": 54904766, "question_id": 54903960, "link": "https://stackoverflow.com/questions/54903960/basic-arithmetic-operations-with-user-input/54904766#54904766", "title": "Basic arithmetic operations with user input", "body": "<p>Once you defined the methods with parameters, for example:</p>\n\n<pre><code>def sub(x, y)\n  x - y\nend\n\ndef add(x, y)\n  x + y\nend\n</code></pre>\n\n<p>Once you gat the variables set by user input (I'm assigning by hard coding just to show):</p>\n\n<pre><code>op = \"add\".to_sym # or user input\nnum1 = 10 # or user input\nnum2 = 20 # or user input\n</code></pre>\n\n<p>You can use the <a href=\"https://ruby-doc.org/core-2.6.1/doc/syntax/control_expressions_rdoc.html#label-case+Expression\" rel=\"nofollow noreferrer\">case expression</a> to select the result to show.\nFor example:</p>\n\n<pre><code>res = case op\n  when :add\n    add(num1, num2)\n  when :sub\n    sub(num1, num2)\nend\n</code></pre>\n\n<p>So you can show the result as:</p>\n\n<pre><code>puts res\n</code></pre>\n\n<p>As mentioned, you can also call the method on the user input using <code>send</code>: </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/5349624/how-to-call-methods-dynamically-based-on-their-name/26284769\">How to call methods dynamically based on their name?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/18047234/ruby-difference-between-send-and-instance-eval\">Ruby difference between send and instance_eval?</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1551271523, "post_id": 54905111, "comment_id": 96578627, "body": "Why not store operations as procs to begin with? In, say, a hash, keyed by op name?"}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1551274519, "post_id": 54905111, "comment_id": 96580429, "body": "I tried to follow OP logic. But in any case I late read your comment - @ray has done something similar as you suggest."}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 0, "last_activity_date": 1551271076, "last_edit_date": 1551271076, "creation_date": 1551269114, "answer_id": 54905111, "question_id": 54903960, "link": "https://stackoverflow.com/questions/54903960/basic-arithmetic-operations-with-user-input/54905111#54905111", "title": "Basic arithmetic operations with user input", "body": "<p>Using <a href=\"https://www.rubyguides.com/2018/11/ruby-heredoc/\" rel=\"nofollow noreferrer\">heredoc</a> and <a href=\"https://ruby-doc.org/core-2.6.1/Proc.html\" rel=\"nofollow noreferrer\">proc</a></p>\n\n<pre><code>def mul(num1, num2)\n  num1 * num2\nend\n\ndef div(num1, num2)\n  num1 / num2\nend\n\ndef sub(num1, num2)\n  num1 - num2\nend\n\ndef add(num1, num2)\n  num1 + num2\nend\n\nputs 'First number'\nnum1 = gets.to_f\n\nputs 'Second number'\nnum2 = gets.to_f\n\nputs &lt;&lt;-OPERATORS\nMultiplication = mul\nAddition = add\nSubtract = sub\nDivision = div\nOPERATORS\n\nop = method(gets.chomp).to_proc\n\nputs \"This is your answer: #{op.call(num1, num2)}\"\n</code></pre>\n\n<p>How it works on the example of <code>String#downcase</code>:</p>\n\n<pre><code>downator = :downcase.to_proc\ndownator.call('WORD') #=&gt; \"word\"\n\n# It is equal to\n'WORD'.downcase #=&gt; \"word\"\n</code></pre>\n\n<p>It is because <code>downator</code> stores block <code>proc { |arg| arg.downcase }</code></p>\n\n<p>In practice, this property is often used for operations with arrays, for example:</p>\n\n<pre><code>['WORD', 'STRING'].map(&amp;:downcase) #=&gt; [\"word\", \"string\"]\n\n# It is equal to\n['WORD', 'STRING'].map { |arg| arg.downcase } #=&gt; [\"word\", \"string\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 1, "last_activity_date": 1551271844, "creation_date": 1551271844, "answer_id": 54905940, "question_id": 54903960, "link": "https://stackoverflow.com/questions/54903960/basic-arithmetic-operations-with-user-input/54905940#54905940", "title": "Basic arithmetic operations with user input", "body": "<p><strong>Best Way</strong> to do so, is</p>\n\n<pre><code>def perform_operation(op, a, b)\n  op = { 'add' =&gt; '+', 'sub' =&gt; '-', 'mul' =&gt; '*', 'div' =&gt; '/' }[op]\n  a.send(op, b)\nend\n\nnum1=gets.chomp.to_f\nop=gets.chomp\nnum2=gets.chomp.to_f\n\nputs \"This is your answer\", perform_operation(op, num1, num2)\n</code></pre>\n\n<p>If your <code>op</code> is +, -, * or / passed by input you can directly do it without method like below,</p>\n\n<pre><code>puts \"This is your answer\", num1.send(op, num2)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11124589"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 371, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1551332181, "creation_date": 1551265324, "last_edit_date": 1551332181, "question_id": 54903960, "link": "https://stackoverflow.com/questions/54903960/basic-arithmetic-operations-with-user-input", "title": "Basic arithmetic operations with user input", "body": "<p>I want to make a four-functioning calculator. I tried to make methods that would store operations.</p>\n\n<pre><code>def mul\n  puts num1*num2\nend\n\ndef div\n  puts num1/num2\nend\n\ndef sub\n  puts num1-num2\nend\n\ndef add\n  puts num1+num2\nend\n\nnum1=gets.chomp.to_f\nop=gets.chomp\nnum2=gets.chomp.to_f\n\nputs \"Multiplication=mul\\n Addition=add\\n Subtract=sub\\n Division=div\"\nputs (\"This is your answer\"+num1+op+num2)\n</code></pre>\n\n<p>But I couldn't make the calculator.</p>\n\n<p>I tried running the code, but it won't work. Can someone help?</p>\n"}, {"tags": ["ruby", "net-http"], "answers": [{"tags": [], "owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "is_accepted": true, "score": 1, "last_activity_date": 1551261677, "creation_date": 1551261677, "answer_id": 54902745, "question_id": 54902422, "link": "https://stackoverflow.com/questions/54902422/automatically-get-the-default-port-for-request/54902745#54902745", "title": "Automatically get the default port for request", "body": "<p>You would use ruby's dynamic dispatching. </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>port = Net::HTTP.send(\"#{protocol}_default_port\")\nendpoint = Net::HTTP.new(host, port)\nendpoint.use_ssl = protocol == 'https'\n\nrequest = Net::HTTP::Get.new(\"/item/#{item}\")\nrequest['Authorization'] = \"Bearer #{key}\"\nresponse = endpoint.request(request)\n</code></pre>\n\n<p><strong>OR</strong> in more elegant way: </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>path = URI('https://example.com')\n\nNet::HTTP.start(path.host, path.port, use_ssl: path.scheme == 'https') do |http|\n  request = Net::HTTP::Get.new path\n  request['Authorization'] = \"Bearer #{key}\"\n  response = http.request(request)\nend\n</code></pre>\n"}], "owner": {"reputation": 862, "user_id": 5269447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d355fcfdfb38bfec218c4239da62f2?s=128&d=identicon&r=PG&f=1", "display_name": "0x777C", "link": "https://stackoverflow.com/users/5269447/0x777c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 54902745, "answer_count": 1, "score": 0, "last_activity_date": 1551261677, "creation_date": 1551260789, "question_id": 54902422, "link": "https://stackoverflow.com/questions/54902422/automatically-get-the-default-port-for-request", "title": "Automatically get the default port for request", "body": "<p>I currently have the following code:</p>\n\n<pre><code>    if protocol == 'http'\n      port = Net::HTTP.http_default_port()\n      endpoint = Net::HTTP.new(host, port)\n    else\n      port = Net::HTTP.https_default_port()\n      endpoint = Net::HTTP.new(host, port)\n      endpoint.use_ssl = true\n    end\n    request = Net::HTTP::Get.new(\"/item/#{item}\")\n    request['Authorization'] = \"Bearer #{key}\"\n    response = endpoint.request(request)\n</code></pre>\n\n<p>Is there a way to simplify this so that I do not have to decide the default port to use for myself?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows", "sqlite"], "comments": [{"owner": {"reputation": 610, "user_id": 4057576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/e5qu0.jpg?s=128&g=1", "display_name": "Charles Skariah", "link": "https://stackoverflow.com/users/4057576/charles-skariah"}, "edited": false, "score": 1, "creation_date": 1551260054, "post_id": 54901929, "comment_id": 96571559, "body": "Can you be precise, this information seems to be overkilling the question!!"}, {"owner": {"reputation": 820, "user_id": 2640181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7599b700aee8e1a534030709ae43616?s=128&d=identicon&r=PG", "display_name": "barmic", "link": "https://stackoverflow.com/users/2640181/barmic"}, "edited": false, "score": 0, "creation_date": 1551261051, "post_id": 54901929, "comment_id": 96572234, "body": "Which version of Rails are you using?"}, {"owner": {"reputation": 27, "user_id": 9232115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213557746e39a9f9240bd7d9bc624e42?s=128&d=identicon&r=PG&f=1", "display_name": "bottles", "link": "https://stackoverflow.com/users/9232115/bottles"}, "edited": false, "score": 0, "creation_date": 1551261421, "post_id": 54901929, "comment_id": 96572453, "body": "rails 5.2.2, ruby 2.6.1p33 (2019-01-30 revision 66950) [x64-mingw32]"}, {"owner": {"reputation": 27, "user_id": 9232115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213557746e39a9f9240bd7d9bc624e42?s=128&d=identicon&r=PG&f=1", "display_name": "bottles", "link": "https://stackoverflow.com/users/9232115/bottles"}, "reply_to_user": {"reputation": 610, "user_id": 4057576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/e5qu0.jpg?s=128&g=1", "display_name": "Charles Skariah", "link": "https://stackoverflow.com/users/4057576/charles-skariah"}, "edited": false, "score": 0, "creation_date": 1551261526, "post_id": 54901929, "comment_id": 96572514, "body": "ok @CharlesSkariah,      Could not create Makefile due to some reason, probably lack of necessary libraries and/or headers.  Check the mkmf.log file for more details.  You may need configuration options. (makefile for sqlite3)"}, {"owner": {"reputation": 610, "user_id": 4057576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/e5qu0.jpg?s=128&g=1", "display_name": "Charles Skariah", "link": "https://stackoverflow.com/users/4057576/charles-skariah"}, "edited": false, "score": 0, "creation_date": 1551262359, "post_id": 54901929, "comment_id": 96573069, "body": "@bottles Can you specify a lower version of sqlite3 in the gemfile instead of 1.4.0.Anything around the 1.3 version will be enough."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 9232115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213557746e39a9f9240bd7d9bc624e42?s=128&d=identicon&r=PG&f=1", "display_name": "bottles", "link": "https://stackoverflow.com/users/9232115/bottles"}, "edited": false, "score": 0, "creation_date": 1551263556, "post_id": 54903002, "comment_id": 96573851, "body": "wow thanks, It worked great but now when i run Rails server, its giving me  &quot;You must use Bundler 2 or greater with this lockfile.&quot;..   though im using Bundler version 2.0.1(i have tried bundler update too)"}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 0, "creation_date": 1551265022, "post_id": 54903002, "comment_id": 96574837, "body": "Remove your lockfile and retry"}, {"owner": {"reputation": 27, "user_id": 9232115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213557746e39a9f9240bd7d9bc624e42?s=128&d=identicon&r=PG&f=1", "display_name": "bottles", "link": "https://stackoverflow.com/users/9232115/bottles"}, "edited": false, "score": 0, "creation_date": 1551275364, "post_id": 54903002, "comment_id": 96580966, "body": "did and getting this:   check_for_activated_spec!&#39;: You have already activated bundler 2.0.1, but your Gemfile requires bundler 1.17.2. Prepending <code>bundle exec</code> to your command may solve this. (Gem::LoadError)"}], "tags": [], "owner": {"reputation": 820, "user_id": 2640181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7599b700aee8e1a534030709ae43616?s=128&d=identicon&r=PG", "display_name": "barmic", "link": "https://stackoverflow.com/users/2640181/barmic"}, "is_accepted": true, "score": 0, "last_activity_date": 1551262395, "creation_date": 1551262395, "answer_id": 54903002, "question_id": 54901929, "link": "https://stackoverflow.com/questions/54901929/sqlite3-cannot-be-bundle-in-windows-rails-app/54903002#54903002", "title": "sqlite3 cannot be bundle in windows rails app", "body": "<p>This is the known issue for Rails 5.2.2 (<a href=\"https://github.com/rails/rails/issues/35153\" rel=\"nofollow noreferrer\">issue #35153</a>). </p>\n\n<p>To sort out this change version of <code>sqlite</code>:</p>\n\n<pre><code>gem 'sqlite3', '~&gt; 1.3.6'\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 9232115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213557746e39a9f9240bd7d9bc624e42?s=128&d=identicon&r=PG&f=1", "display_name": "bottles", "link": "https://stackoverflow.com/users/9232115/bottles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 54903002, "answer_count": 1, "score": -2, "last_activity_date": 1551262395, "creation_date": 1551259317, "question_id": 54901929, "link": "https://stackoverflow.com/questions/54901929/sqlite3-cannot-be-bundle-in-windows-rails-app", "title": "sqlite3 cannot be bundle in windows rails app", "body": "<p>current directory:\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/sqlite3-1.4.0/ext/sqlite3\nC:/Ruby26-x64/bin/ruby.exe -I C:/Ruby26-x64/lib/ruby/2.6.0 -r\n./siteconf20190227-5688-2rzd4d.rb extconf.rb\nchecking for sqlite3.h... no\nsqlite3.h is missing. Install SQLite3 from <a href=\"http://www.sqlite.org/\" rel=\"nofollow noreferrer\">http://www.sqlite.org/</a> first.\n<strong>* extconf.rb failed *</strong>\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.</p>\n\n<p>Provided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=C:/Ruby26-x64/bin/$(RUBY_BASE_NAME)\n        --with-sqlcipher\n        --without-sqlcipher\n        --with-sqlite3-config\n        --without-sqlite3-config\n        --with-pkg-config\n        --without-pkg-config\n        --with-sqlcipher\n        --without-sqlcipher\n        --with-sqlite3-dir\n        --without-sqlite3-dir\n        --with-sqlite3-include\n        --without-sqlite3-include=${sqlite3-dir}/include\n        --with-sqlite3-lib\n        --without-sqlite3-lib=${sqlite3-dir}/lib</p>\n\n<p>To see why this extension failed to compile, please check the mkmf.log which can\nbe found here:</p>\n\n<p>C:/Ruby26-x64/lib/ruby/gems/2.6.0/extensions/x64-mingw32/2.6.0/sqlite3-1.4.0/mkmf.log</p>\n\n<p>extconf failed, exit code 1</p>\n\n<p>Gem files will remain installed in\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/sqlite3-1.4.0 for inspection.\nResults logged to\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/extensions/x64-mingw32/2.6.0/sqlite3-1.4.0/gem_make.out</p>\n\n<p>An error occurred while installing sqlite3 (1.4.0), and Bundler cannot continue.\nMake sure that <code>gem install sqlite3 -v '1.4.0' --source 'https://rubygems.org/'</code>\nsucceeds before bundling.</p>\n\n<p>In Gemfile:\n  sqlite3</p>\n\n<p>C:\\Users\\User\\blog>gem install sqlite3 -v '1.4.0' --source '<a href=\"https://rubygems.org\" rel=\"nofollow noreferrer\">https://rubygems.org</a>\nTemporarily enhancing PATH for MSYS/MINGW...\nInstalling required msys2 packages: mingw-w64-x86_64-sqlite3\nBuilding native extensions. This could take a while...\nERROR:  Error installing sqlite3:\n        ERROR: Failed to build gem native extension.</p>\n\n<pre><code>current directory: C:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/sqlite3-1.4.0/ext/sqlite3\n</code></pre>\n\n<p>C:/Ruby26-x64/bin/ruby.exe -I C:/Ruby26-x64/lib/ruby/2.6.0 -r ./siteconf20190227-8976-1h69dwp.rb extconf.rb\nchecking for sqlite3.h... yes\nchecking for pthread_create() in -lpthread... yes\nchecking for -ldl... no\nchecking for dlopen()... no\nmissing function dlopen\n<strong>* extconf.rb failed *</strong>\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.</p>\n\n<p>Provided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=C:/Ruby26-x64/bin/$(RUBY_BASE_NAME)\n        --with-sqlcipher\n        --without-sqlcipher\n        --with-sqlite3-config\n        --without-sqlite3-config\n        --with-pkg-config\n        --without-pkg-config\n        --with-sqlcipher\n        --without-sqlcipher\n        --with-sqlite3-dir\n        --without-sqlite3-dir\n        --with-sqlite3-include\n        --without-sqlite3-include=${sqlite3-dir}/include\n        --with-sqlite3-lib\n        --without-sqlite3-lib=${sqlite3-dir}/lib\n        --with-pthreadlib\n        --without-pthreadlib\n        --with-dllib\n        --without-dllib</p>\n\n<p>To see why this extension failed to compile, please check the mkmf.log which can be found here:</p>\n\n<p>C:/Ruby26-x64/lib/ruby/gems/2.6.0/extensions/x64-mingw32/2.6.0/sqlite3-1.4.0/mkmf.log</p>\n\n<p>extconf failed, exit code 1</p>\n\n<p>Gem files will remain installed in C:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/sqlite3-1.4.0 for inspection.\nResults logged to C:/Ruby26-x64/lib/ruby/gems/2.6.0/extensions/x64-mingw32/2.6.0/sqlite3-1.4.0/gem_make.out</p>\n\n<p>C:\\Users\\User\\blog>gem unlink sqlite\nERROR:  While executing gem ... (Gem::CommandLineError)\n    Unknown command unlink</p>\n\n<p>C:\\Users\\User\\blog>gem install sqlite3 --universal\nERROR:  While executing gem ... (OptionParser::InvalidOption)\n    invalid option: --universal</p>\n\n<p>C:\\Users\\User\\blog>gem install sqlite3 -- --with-sqlite3-dir=/usr/local/Cellar/sqlite/3.8.8.1\nTemporarily enhancing PATH for MSYS/MINGW...\nInstalling required msys2 packages: mingw-w64-x86_64-sqlite3\nwarning: mingw-w64-x86_64-sqlite3-3.26.0-1 is up to date -- skipping\nBuilding native extensions with: '--with-sqlite3-dir=/usr/local/Cellar/sqlite/3.8.8.1'\nThis could take a while...\nERROR:  Error installing sqlite3:\n        ERROR: Failed to build gem native extension.</p>\n\n<pre><code>current directory: C:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/sqlite3-1.4.0/ext/sqlite3\n</code></pre>\n\n<p>C:/Ruby26-x64/bin/ruby.exe -I C:/Ruby26-x64/lib/ruby/2.6.0 -r ./siteconf20190227-13444-5xb02v.rb extconf.rb --with-sqlite3-dir\\=/usr/local/Cellar/sqlite/3.8.8.1\nchecking for sqlite3.h... yes\nchecking for pthread_create() in -lpthread... yes\nchecking for -ldl... no\nchecking for dlopen()... no\nmissing function dlopen\n<strong>* extconf.rb failed *</strong>\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.</p>\n\n<p>Provided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=C:/Ruby26-x64/bin/$(RUBY_BASE_NAME)\n        --with-sqlcipher\n        --without-sqlcipher\n        --with-sqlite3-config\n        --without-sqlite3-config\n        --with-pkg-config\n        --without-pkg-config\n        --with-sqlcipher\n        --without-sqlcipher\n        --with-sqlite3-dir\n        --with-sqlite3-include\n        --without-sqlite3-include=${sqlite3-dir}/include\n        --with-sqlite3-lib\n        --without-sqlite3-lib=${sqlite3-dir}/lib\n        --with-pthreadlib\n        --without-pthreadlib\n        --with-dllib\n        --without-dllib</p>\n\n<p>To see why this extension failed to compile, please check the mkmf.log which can be found here:</p>\n\n<p>C:/Ruby26-x64/lib/ruby/gems/2.6.0/extensions/x64-mingw32/2.6.0/sqlite3-1.4.0/mkmf.log</p>\n\n<p>extconf failed, exit code 1</p>\n\n<p>Gem files will remain installed in C:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/sqlite3-1.4.0 for inspection.\nResults logged to C:/Ruby26-x64/lib/ruby/gems/2.6.0/extensions/x64-mingw32/2.6.0/sqlite3-1.4.0/gem_make.out</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 4755, "user_id": 400277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea12da4fb5d06d2e5da1c53b272f5ccd?s=128&d=identicon&r=PG", "display_name": "Nowhere man", "link": "https://stackoverflow.com/users/400277/nowhere-man"}, "edited": false, "score": 3, "creation_date": 1551258998, "post_id": 54901797, "comment_id": 96570941, "body": "You&#39;re falling into a false dichotomy. Of course the code will be theoretically readable. But you can easily make it so hard to actually read in such a way that it can be modified and reused that noone will do it. Security is never an absolute, but a question of equilibrium between the cost of implementing and breaking a protection."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 4755, "user_id": 400277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea12da4fb5d06d2e5da1c53b272f5ccd?s=128&d=identicon&r=PG", "display_name": "Nowhere man", "link": "https://stackoverflow.com/users/400277/nowhere-man"}, "edited": false, "score": 0, "creation_date": 1551259221, "post_id": 54901797, "comment_id": 96571070, "body": "I added a paragraph that explains that there is no standardized bytecode format for  Ruby, so the question is moot anyway."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": -2, "last_activity_date": 1551259065, "last_edit_date": 1551259065, "creation_date": 1551258865, "answer_id": 54901797, "question_id": 54901658, "link": "https://stackoverflow.com/questions/54901658/possible-to-compile-encode-ruby-to-binary-to-hide-code/54901797#54901797", "title": "Possible to compile/encode Ruby to binary to hide code?", "body": "<p>It is impossible to encode code in such a way that a machine can execute it, but a human cannot read it. In order for your customers to run the code, the CPU must understand the code. CPUs are much, much stupider than humans, so if a CPU can understand the code, then a human can, too.</p>\n\n<p>The only way to protect your code, is to not give it away. Host the app on your own premises and rent access to it out as a service.</p>\n\n<p>Note that reading your code is illegal, so what makes you think that somebody who has no problem with going to prison go get access to your secrets is going to get stopped by some encoding that can be reverse-engineered anyway? (Note that even if they have the un-encoded source code, they still need to reverse-engineer it anyway, since without access to your source repository and design documents, they have no idea <em>why</em> the code is written the way it is.)</p>\n\n<p>Also, for someone who has no problem breaking the law, bribing one of your employees who <em>knows</em> how the code works is going to be much easier than reverse-engineering the code.</p>\n\n<p>There is no general bytecode-format for Ruby. There are several different Ruby implementations, some of them have a bytecode format, some don't. E.g. Opal is a compiler that outputs ECMAScript, no bytecode involved. XRuby was a compiler for the JVM, but it is abandoned. Ruby.NET was a compiler for .NET, but it is abandoned. JRuby is an implementation for the JVM that also includes a compiler. Both YARV, MRuby, and Rubinius have different, incompatible bytecode formats; some of those implementations allow loading bytecode from disk, some don't.</p>\n"}, {"tags": [], "owner": {"reputation": 4755, "user_id": 400277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea12da4fb5d06d2e5da1c53b272f5ccd?s=128&d=identicon&r=PG", "display_name": "Nowhere man", "link": "https://stackoverflow.com/users/400277/nowhere-man"}, "is_accepted": true, "score": 3, "last_activity_date": 1551258880, "creation_date": 1551258880, "answer_id": 54901801, "question_id": 54901658, "link": "https://stackoverflow.com/questions/54901658/possible-to-compile-encode-ruby-to-binary-to-hide-code/54901801#54901801", "title": "Possible to compile/encode Ruby to binary to hide code?", "body": "<p>There are a few Ruby code obfuscators, that you couple with a packer, to produce something that is at least reasonably hard to reverse-engineer.</p>\n\n<p>If protecting your code is a business need, you might want to try <a href=\"https://www.rubyencoder.com/\" rel=\"nofollow noreferrer\">RubyEncoder</a>, a commercial product designed to do exactly what you want. (disclaimer: I didn't)</p>\n\n<p>Note that if secrets in your code are that important to you, you might want to make it a service (e.g. a Web service) that your customer accesses instead of code you deploy on their systems. But that's an option that may not be viable (or desirable) for you for a zillion different reasons\u2026</p>\n"}], "owner": {"reputation": 22388, "user_id": 256439, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/c4b17df9c9b2f33a96eb84f92054f708?s=128&d=identicon&r=PG", "display_name": "Sandra Schlichting", "link": "https://stackoverflow.com/users/256439/sandra-schlichting"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "accepted_answer_id": 54901801, "answer_count": 2, "score": 2, "last_activity_date": 1551259065, "creation_date": 1551258336, "question_id": 54901658, "link": "https://stackoverflow.com/questions/54901658/possible-to-compile-encode-ruby-to-binary-to-hide-code", "title": "Possible to compile/encode Ruby to binary to hide code?", "body": "<p>My Ruby on Rails app of course contains all business logic and algorithms, and if I install this on a customers server, then they can read my source code, which I want to keep as secret as possible to protect my business.</p>\n\n<p>PHP have several tools which can take the php project and encode it into bytecode, which is exactly what I would like to be able to do for Ruby on Rails.</p>\n\n<p>There are several Ruby on Rails packers, which just bundles it all into an executable, but the plain Ruby source code is still in there.</p>\n\n<p><strong>Question</strong></p>\n\n<p>How to protect your Ruby on Rails source/product when it is installed on a customers server?</p>\n"}, {"tags": ["ruby", "linux", "compiler-errors", "centos", "redhat"], "comments": [{"owner": {"reputation": 6679, "user_id": 10622916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21bd4eeaa5ba60dc021c5ccfbf4a963d?s=128&d=identicon&r=PG&f=1", "display_name": "Bodo", "link": "https://stackoverflow.com/users/10622916/bodo"}, "edited": false, "score": 0, "creation_date": 1551258085, "post_id": 54900563, "comment_id": 96570407, "body": "The error messages mention <code>&#47;tmp&#47;ruby-build.20190227084942.17275</code>, <code>&#47;tmp&#47;ruby-build.20190227084942.17275.log</code> and <code>&#47;tmp&#47;ruby-build.20190227084942.17275&#47;ruby-2.6.1</code>. Does any of these exist? You might find <code>config.log</code> there. Do you need to build <code>ruby</code>? Isn&#39;t there a ready-made package for your redhat 7 system?"}], "answers": [{"tags": [], "owner": {"reputation": 495, "user_id": 4157382, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-p4R0mflSARc/AAAAAAAAAAI/AAAAAAAAAB4/FCzNkmnlyaQ/photo.jpg?sz=128", "display_name": "Mike Guerette", "link": "https://stackoverflow.com/users/4157382/mike-guerette"}, "is_accepted": false, "score": 0, "last_activity_date": 1551618224, "last_edit_date": 1551618224, "creation_date": 1551295260, "answer_id": 54912982, "question_id": 54900563, "link": "https://stackoverflow.com/questions/54900563/redhat-c-compiler-does-not-compile/54912982#54912982", "title": "RedHat C compiler does not compile?", "body": "<p>I'm guessing you've downloaded Ruby and are trying to install it over an existing version - if so, this can break things.  If Ruby 2.5 will suffice, I suggest using the version available in RHEL as a Software Collection.  Installation info is <a href=\"https://developers.redhat.com/products/softwarecollections/hello-world/#fndtn-ruby\" rel=\"nofollow noreferrer\">here</a>. </p>\n\n<p>Software Collections alongside the original Ruby version (used by the OS) so that nothing breaks.</p>\n"}], "owner": {"reputation": 91, "user_id": 10460821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6696e8f073466c65c05c4ba57e6519a?s=128&d=identicon&r=PG&f=1", "display_name": "M. Antony", "link": "https://stackoverflow.com/users/10460821/m-antony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1551618224, "creation_date": 1551254056, "question_id": 54900563, "link": "https://stackoverflow.com/questions/54900563/redhat-c-compiler-does-not-compile", "title": "RedHat C compiler does not compile?", "body": "<p>i am sitting since yesterday at the problem ruby to install on my redhat 7 system. I already have gcc cc and g++ installed. Also several restarts have not helped I always get the following errors :</p>\n\n<pre><code>[root@ld01 bin]# rbenv install 2.6.1\nDownloading ruby-2.6.1.tar.bz2...\n-&gt; https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.1.tar.bz2\nInstalling ruby-2.6.1...\n\nBUILD FAILED (Red Hat Enterprise Linux Server 7.6 using ruby-build 20190130-4-g0e33b11)\n\nInspect or clean up the working tree at /tmp/ruby-build.20190227084942.17275\nResults logged to /tmp/ruby-build.20190227084942.17275.log\n\nLast 10 log lines:\n/tmp/ruby-build.20190227084942.17275 /usr/bin\n/tmp/ruby-build.20190227084942.17275/ruby-2.6.1 /tmp/ruby-build.20190227084942.17275 /usr/bin\nchecking for ruby... false\nchecking build system type... x86_64-pc-linux-gnu\nchecking host system type... x86_64-pc-linux-gnu\nchecking target system type... x86_64-pc-linux-gnu\nchecking whether the C compiler works... no\nconfigure: error: in `/tmp/ruby-build.20190227084942.17275/ruby-2.6.1':\nconfigure: error: C compiler cannot create executables\nSee `config.log' for more details\n</code></pre>\n\n<p>I think you'll need the config.log but where exactly can I find the log file ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activesupport"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1551240504, "post_id": 54897865, "comment_id": 96564155, "body": "&quot;So if that were true it would mean any instance variables would be shared among all of the instances in memory.&quot; This is not correct. Give it a try and see."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1551245641, "post_id": 54897865, "comment_id": 96565377, "body": "Also please note that you have typo in your example, the last line should read <code>u2.password = &#39;123456&#39;</code>(not <code>u.password = &#39;123456&#39;</code>.)"}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1551245532, "creation_date": 1551245532, "answer_id": 54898639, "question_id": 54897865, "link": "https://stackoverflow.com/questions/54897865/instance-variables-in-activesupportconcern/54898639#54898639", "title": "Instance variables in ActiveSupport::Concern", "body": "<p><a href=\"https://ruby-doc.org/core/Module.html#method-i-include\" rel=\"nofollow noreferrer\"><code>Module#include</code></a> is under the hood calling <a href=\"https://ruby-doc.org/core/Module.html#method-i-append_features\" rel=\"nofollow noreferrer\"><code>Module#append_features</code></a>. That means, <em>nothing</em> is shared and this might be easily checked (<code>ActiveSupport::Concern</code> has nothing to do with the code you are to check.)</p>\n\n<pre><code>module SetPassword\n  attr_reader :password\n  def password=(new_password)\n    @password = new_password\n    puts &lt;&lt;~EOS\n    Setting password to: #{@password} (id: #{@password.__id__}).\n    Object: #{self.class.name} (#{self.__id__}).\n    Method: #{__callee__} on #{self.method(__callee__).__id__}.\n    EOS\n  end \nend\n\nclass User\n  include SetPassword\nend\n\nu1 = User.new; u1.password = 'abcdef'\nu2 = User.new; u2.password = '123456'\n</code></pre>\n\n<p>The code above demonstrates that everything (the password itself, the instance variable and even the method on it\u2019s own) is different:</p>\n\n<pre><code>\u25b6 u1 = User.new; u1.password = 'abcdef'\n#\u21d2 Setting password to: abcdef (id: 46968741459360).\n#  Object: User (46968741459420).\n#  Method: password= on 46968741459040.\n\n\u25b6 u2 = User.new; u2.password = '123456'\n#\u21d2 Setting password to: 123456 (id: 46968734231740).\n#  Object: User (46968734232020).\n#  Method: password= on 46968734230640.\n</code></pre>\n"}], "owner": {"reputation": 257, "user_id": 1108921, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/2728adb7f634473e0b0d263d5168df87?s=128&d=identicon&r=PG", "display_name": "jdfolino", "link": "https://stackoverflow.com/users/1108921/jdfolino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 728, "favorite_count": 0, "accepted_answer_id": 54898639, "answer_count": 1, "score": 0, "last_activity_date": 1551299246, "creation_date": 1551240169, "last_edit_date": 1551299246, "question_id": 54897865, "link": "https://stackoverflow.com/questions/54897865/instance-variables-in-activesupportconcern", "title": "Instance variables in ActiveSupport::Concern", "body": "<p>I have read that modules (in this case ActiveSupport::Concern) in ruby are shared amongst all instances of the class initialised. So if that were true it would mean any instance variables would be shared among all of the instances in memory.</p>\n\n<pre><code>module SetPassword\n  extend ActiveSupport::Concern\n  attr_reader :password\n  def password=(new_password)\n    @password = new_password\n    self.crypted_password = password_digest(new_password, salt)\n  end\nend\n\nclass User\n  include SetPassword\nend\n\nu = User.new; u.password = 'abcdef'\nu2 = User.new; u2.password = '123456'\n</code></pre>\n\n<p>Is the code above safe to use? Or would the second user override the first user?</p>\n"}, {"tags": ["ruby", "multithreading", "fork", "race-condition"], "comments": [{"owner": {"reputation": 20658, "user_id": 584713, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d43dc36474bd0a252ed907d46511ded7?s=128&d=identicon&r=PG", "display_name": "Robin", "link": "https://stackoverflow.com/users/584713/robin"}, "edited": false, "score": 0, "creation_date": 1551244078, "post_id": 54897846, "comment_id": 96564941, "body": "Nvm, I solved my issue. I&#39;ll post a gist soon."}, {"owner": {"reputation": 20658, "user_id": 584713, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d43dc36474bd0a252ed907d46511ded7?s=128&d=identicon&r=PG", "display_name": "Robin", "link": "https://stackoverflow.com/users/584713/robin"}, "edited": false, "score": 0, "creation_date": 1551244452, "post_id": 54897846, "comment_id": 96565054, "body": "<a href=\"https://gist.github.com/niuage/c0637b8dd10549a12b6a223dbd5f158a\" rel=\"nofollow noreferrer\">gist.github.com/niuage/c0637b8dd10549a12b6a223dbd5f158a</a>"}], "answers": [{"tags": [], "owner": {"reputation": 20658, "user_id": 584713, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d43dc36474bd0a252ed907d46511ded7?s=128&d=identicon&r=PG", "display_name": "Robin", "link": "https://stackoverflow.com/users/584713/robin"}, "is_accepted": true, "score": 0, "last_activity_date": 1551274230, "creation_date": 1551274230, "answer_id": 54906656, "question_id": 54897846, "link": "https://stackoverflow.com/questions/54897846/how-to-write-to-and-read-from-the-same-named-pipe-in-a-single-ruby-script/54906656#54906656", "title": "How to write to and read from the same named pipe in a single ruby script?", "body": "<p>The issue wasn't caused by a race condition, but too many zombie processes, since I wasn't calling Process.wait</p>\n\n<blockquote>\n  <p>The parent process should use Process.wait to collect the termination statuses of its children or use Process.detach to register disinterest in their status; otherwise, the operating system may accumulate zombie processes.</p>\n</blockquote>\n\n<p>That's why I was getting <code>zsh: fork failed: resource temporarily unavailable</code> when trying to read from the pipe from another script probably.</p>\n\n<p>Here's something that works:</p>\n\n<pre><code>(1..100) do\n  if fork\n    # Parent\n    image = read_image(pipe)\n    # do stuff with image\n\n    Process.wait # I think that's what was missing previously\n  else\n    # Child\n    Open3.popen3(command(time, score_crop_options, pipe)) do |stdin, stdout, stderr, wait_thr|\n      # stuff\n    end\n    exit!(0)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 20658, "user_id": 584713, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d43dc36474bd0a252ed907d46511ded7?s=128&d=identicon&r=PG", "display_name": "Robin", "link": "https://stackoverflow.com/users/584713/robin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 54906656, "answer_count": 1, "score": 0, "last_activity_date": 1551274230, "creation_date": 1551240046, "last_edit_date": 1551244507, "question_id": 54897846, "link": "https://stackoverflow.com/questions/54897846/how-to-write-to-and-read-from-the-same-named-pipe-in-a-single-ruby-script", "title": "How to write to and read from the same named pipe in a single ruby script?", "body": "<p>edit: I think I fixed the issue: <a href=\"https://gist.github.com/niuage/c0637b8dd10549a12b6a223dbd5f158a\" rel=\"nofollow noreferrer\">https://gist.github.com/niuage/c0637b8dd10549a12b6a223dbd5f158a</a></p>\n\n<p>I might have been missing the Process.wait, hence creating a lot of zombie processes.</p>\n\n<hr>\n\n<p>I have a piece of code that's working most of the time, but \"locks\" itself after a while, probably because of a race condition.</p>\n\n<h3>My code</h3>\n\n<pre class=\"lang-rb prettyprint-override\"><code>pipe = \"goals.png\"\n\n(1..100).each do |time|\n  fork do\n    # This runs ffmpeg, and gets it to write 1 frame of a video to the pipe 'goals.png'\n    print \"before ffmpeg\"\n    `#{ffmpeg(time, score_crop_options, pipe)}`\n    exit\n  end\n\n  # Reads from 'pipe'\n  print \"before read\"\n  blob = File.read(pipe)\n  image = Rocket::Image.from_blob(blob)\n  # do stuff with image\nend\n</code></pre>\n\n<h3>Things to note:</h3>\n\n<ul>\n<li><p><code>#{ffmpeg(time, pipe)}</code> writes to pipe, and is blocking until something reads from pipe</p></li>\n<li><p>File.read(pipe) is blocking until something writes to pipe</p></li>\n</ul>\n\n<h3>My issue</h3>\n\n<p>edit: when the script is locked, and I try to read the pipe from another script, I get <code>zsh: fork failed: resource temporarily unavailable</code>. That's probably a good clue...</p>\n\n<p>Most of the time, <code>File.read(pipe)</code> gets executed before the code in fork, so it works great, but after a little while the script just stops: it prints <code>\"before ffmpeg\"</code> and never gets to <code>\"before read\"</code>...</p>\n\n<hr>\n\n<p>First, should I use threads instead of fork? And can I control the order the 2 statements (read and write) get run, to avoid a race condition? Or maybe it's not even about the race condition and I'm missing something?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 2, "creation_date": 1551248614, "post_id": 54897502, "comment_id": 96566366, "body": "I would argue that you should not test how a method is working (using <code>partition</code> and <code>even?</code>) but that it returns the expected result (<code>[[2,4], [1,3,5]]</code> in this example). Because the way to solve a problem might be refactored and change over time, but the method should even after a refactoring return the correct result. Furthermore, in your example, you never test that it actually returns the correct result. Just calling methods in the order that developer thought would return a correct result, doesn&#39;t guarantee that the result is actually correct."}, {"owner": {"reputation": 713, "user_id": 975352, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/79470d4708b9927990eb78650fb906ca?s=128&d=identicon&r=PG&f=1", "display_name": "Akira  Noguchi", "link": "https://stackoverflow.com/users/975352/akira-noguchi"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1551251469, "post_id": 54897502, "comment_id": 96567491, "body": "@spickermann your opinion is correct. I have added test in my question, but  main purpose is to detect method calling with block. This is just my curiosity."}], "answers": [{"comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1551255695, "post_id": 54900860, "comment_id": 96569222, "body": "This doesn&#39;t work, procs aren&#39;t equal even if they do the same thing"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1551256384, "post_id": 54900860, "comment_id": 96569518, "body": "i&#39;m going to edit this to show how it would be feasible."}], "tags": [], "owner": {"reputation": 2902, "user_id": 1202324, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e62f40c62dda03af2f033c651f36311?s=128&d=identicon&r=PG", "display_name": "Denny Mueller", "link": "https://stackoverflow.com/users/1202324/denny-mueller"}, "is_accepted": true, "score": 0, "last_activity_date": 1551292794, "last_edit_date": 1551292794, "creation_date": 1551255345, "answer_id": 54900860, "question_id": 54897502, "link": "https://stackoverflow.com/questions/54897502/how-to-detect-method-calling-with-block-using-rspec/54900860#54900860", "title": "How to detect method calling with block using RSpec", "body": "<p>With the block form of <code>receive</code> you can get a handle on the proc that is passed. However, there is no way to really dig into the contents of the block. The only option is to make the proc publically accessible (a form of dependency injection):</p>\n\n<pre><code>class Deck\n  ProcCallingEven = Proc.new(&amp;:even?)\n  def initialize(cards)\n    @cards = cards\n  end\n  def split_even_numbers\n    @cards.partition(&amp;ProcCallingEven)\n  end\nend\n\ndescribe Deck do\n  describe '#split_even_numbers' do\n    let(:cards) { [5, 4, 3, 2, 1] }\n    let(:deck) { Deck.new(cards) }\n    it do\n      expect(cards).to receive(:partition) do |&amp;block|\n        expect(block).to be Deck::ProcCallingEven\n      end\n      deck.split_even_numbers\n    end\n  end\nend\n</code></pre>\n\n<p>Although as already mentioned in comments To test something like this just makes sure that the code never changes. But code always changes just the result is supposed to be the same.</p>\n"}], "owner": {"reputation": 713, "user_id": 975352, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/79470d4708b9927990eb78650fb906ca?s=128&d=identicon&r=PG&f=1", "display_name": "Akira  Noguchi", "link": "https://stackoverflow.com/users/975352/akira-noguchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 54900860, "answer_count": 1, "score": 0, "last_activity_date": 1551292794, "creation_date": 1551237598, "last_edit_date": 1551251149, "question_id": 54897502, "link": "https://stackoverflow.com/questions/54897502/how-to-detect-method-calling-with-block-using-rspec", "title": "How to detect method calling with block using RSpec", "body": "<p>I want to detect method calling with block using RSpec.</p>\n\n<p><code>Deck#split_even_number</code> is split numbers into even or odd. I want to detect <code>Enumerable#partition</code> is called with block.</p>\n\n<p>I try using <code>Proc.new { ... }</code>, but this expectation is always failed.<br>\nI thins each <code>Proc</code> instance have different object id.</p>\n\n<p>How to solve this..?</p>\n\n<pre><code>class Deck\n  def split_even_numbers\n    @cards.partition { |card| card.even? }\n  end\nend\n\ndescribe Deck do\n  describe '#split_even_numbers' do\n    let(:deck) { Deck.new(cards) }\n    let(:cards) { [5, 4, 3, 2, 1] }\n\n\n    # this test is more desirable than to detect method calling\n    it do\n      even, odd = deck.split_even_numbers\n\n      aggregate_failures do\n        expect(even).to match_array([2, 4])\n        expect(odd).to match_array([1, 3, 5])\n      end\n    end\n\n    it do\n      expect(cards).to receive(:partition).with(no_args) do |&amp;block|\n        expect(block).to eq(Proc.new{ |card| card.even? })\n      end\n      deck.split_even_numbers\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "variables", "memory-management", "code-readability"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5453748, "user_type": "registered", "profile_image": "https://graph.facebook.com/1074533095914657/picture?type=large", "display_name": "pepo", "link": "https://stackoverflow.com/users/5453748/pepo"}, "edited": false, "score": 0, "creation_date": 1551321161, "post_id": 54898763, "comment_id": 96600906, "body": "so in small scope even variable got mix up practically has little to no impact to memory  so from my understanding ``` def create   @user = User.find(params[:id])   @user.transaction do     @address = user.address.create!(params[:address_params])   end   render json: @user, @address end ```"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1551246118, "creation_date": 1551246118, "answer_id": 54898763, "question_id": 54897325, "link": "https://stackoverflow.com/questions/54897325/how-to-manage-which-variable-instance-variable-to-use-for-api-rails/54898763#54898763", "title": "How to manage which variable/instance variable to use for API Rails", "body": "<p>The rule of thumb is one does not create instance variables and uses local variables <em>unless</em> the variable is to be reused from within another method (which is nowadays is arguably considered to be not the best practice.)</p>\n\n<p>Anyway, if your code is going to reuse the variable, it is the instance variable, because local variables will be garbage collected <em>after the method returns</em> and <em>are not reachable from outside of the scope in general</em>.</p>\n\n<p>That said the following code works:</p>\n\n<pre><code>class Foo\n  def initialize\n    @bar = 42\n  end\n  def calc\n    @bar / 2\n  end\nend\nFoo.new.calc\n</code></pre>\n\n<p>while the following one raises:</p>\n\n<pre><code>class Foo\n  def initialize\n    bar = 42\n  end\n  def calc\n    bar / 2\n  end\nend\nFoo.new.calc\n</code></pre>\n\n<p>It has a very little if none impact on memory consumption, though. Instance variables are never the bottleneck (unless it\u2019s gigabytes of course) and garbage collection is not promised to happen immediately after the scope was left for local variables as well.</p>\n"}], "owner": {"reputation": 35, "user_id": 5453748, "user_type": "registered", "profile_image": "https://graph.facebook.com/1074533095914657/picture?type=large", "display_name": "pepo", "link": "https://stackoverflow.com/users/5453748/pepo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551246118, "creation_date": 1551236284, "question_id": 54897325, "link": "https://stackoverflow.com/questions/54897325/how-to-manage-which-variable-instance-variable-to-use-for-api-rails", "title": "How to manage which variable/instance variable to use for API Rails", "body": "<p>I have 2 way of code but I don't know which one is better for memory.</p>\n\n<pre><code>def create\n  user = User.find(params[:id])\n  address = nil\n  user.transaction do\n    address = user.address.create!(params[:address_params])\n  end\n  render json: user, address\nend\n</code></pre>\n\n<p>or</p>\n\n<pre><code>def create\n  @user = User.find(params[:id])\n  @user.transaction do\n    @address = user.address.create!(params[:address_params])\n  end\n  render json: @user, @address\nend\n</code></pre>\n\n<p>in this case I would choose second one.\nBut my colleague concern that the first one is memory optimal choice in case of callback like after_action @instance_variable wont return the memory until after_action finished</p>\n\n<p>so I want to which one is better and how. Thank you\nps. sorry for my bad english if my wording/code is not clear I will fix it</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 5001, "user_id": 902217, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/w2DJ9.gif?s=128&g=1", "display_name": "CAMOBAP", "link": "https://stackoverflow.com/users/902217/camobap"}, "edited": false, "score": 0, "creation_date": 1608663669, "post_id": 54897269, "comment_id": 115650023, "body": "Sounds like a known issue <a href=\"https://github.com/rake-compiler/rake-compiler/issues/156\" rel=\"nofollow noreferrer\">github.com/rake-compiler/rake-compiler/issues/156</a>"}], "owner": {"reputation": 1438, "user_id": 218226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/acc5f791765003d2a1cf6b1b9fdea156?s=128&d=identicon&r=PG", "display_name": "prewett", "link": "https://stackoverflow.com/users/218226/prewett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1551235817, "creation_date": 1551235817, "question_id": 54897269, "link": "https://stackoverflow.com/questions/54897269/rake-native-fails-with-undefined-method-split-for-nilnilclass", "title": "&#39;rake native&#39; fails with &quot;undefined method split for nil:NilClass&quot;", "body": "<p>I'm creating a Ruby C extension for which I would like to create prepackaged binary packages, as the compilation requires a fair amount of dependencies.  I'm new to Ruby, but it seems like <code>gem</code> doesn't want to create platform-specific packages, so the common way is to use the rake-compiler gem, and do <code>rake native</code>.  I can get it to compile the extension, but then it fails with the error</p>\n\n<pre><code>NoMethodError: undefined method `split' for nil:NilClass\n</code></pre>\n\n<p>Running with --trace shows that the error is in rake-compiler-1.0.7/lib/rake/extensiontask.rb:515:</p>\n\n<pre><code>def ruby_api_version(ruby_version)\n  ruby_version.split(\".\")[0, 2].join(\".\")\nend\n</code></pre>\n\n<p>This is because ruby_version is nil.  It is called from rake-compiler-1.0.7/lib/rake/extensiontask.rb:262 in define_native_tasks():</p>\n\n<pre><code>ruby_versions = @ruby_versions_per_platform[platf] || []\nsorted_ruby_versions = ruby_versions.sort_by do |ruby_version|\n    ruby_version.split(\".\").collect(&amp;:to_i)\nend\nspec.required_ruby_version = [\n    \"&gt;= #{ruby_api_version(sorted_ruby_versions.first)}\",\n    \"&lt; #{ruby_api_version(sorted_ruby_versions.last).succ}.dev\"\n]\n</code></pre>\n\n<p><code>@ruby_versions_per_platform</code> is set to <code>{}</code> in the constructor, but no line of code ever sets it.  Thus, <code>sorted_ruby_versions</code> is empty, and <code>.first</code> and <code>.last</code> are nil, which results in the argument to <code>ruby_api_version</code> being nil.</p>\n\n<p>Looking at git blame in the project shows that the these lines are 2 years old, and a result of the changeset <a href=\"https://github.com/rake-compiler/rake-compiler/commit/0dc23504cb03ed2fb3c506e1bb58af48d3851d1e\" rel=\"nofollow noreferrer\">https://github.com/rake-compiler/rake-compiler/commit/0dc23504cb03ed2fb3c506e1bb58af48d3851d1e</a>.  However, <code>ruby_versions_per_platform</code> is never assigned to outside the constructor, which means <code>ruby_api_version</code> will always get called with nil and will always fail.  So how can this have worked for two years?</p>\n\n<p>And more importantly, what do I have to do to get <code>rake native</code> to actually work?</p>\n\n<p>I am using macOS 10.12.6, Ruby 2.3.7p456 installed with MacPorts (selected with <code>port select --set ruby ruby26</code>), rake-compiler 1.0.7, and rake-12.3.2.</p>\n\n<p>Rakefile:</p>\n\n<pre><code>require \"rake/extensiontask\"\n\ngemspec = Gem::Specification::load(\"mygem.gemspec\")\n\nGem::PackageTask.new(gemspec) do |pkg|\nend\n\nRake::ExtensionTask.new(\"mygem\", gemspec) do |ext|\nend\n</code></pre>\n\n<p>mygem.gemspec</p>\n\n<pre><code>Gem::Specification.new do |s|\n  s.name = \"mygem\"\n  s.version = \"1.0.0rc1\"\n  s.authors = [ \"John Doe\" ]\n  s.summary = \"Awesome library\"\n  s.description = \"Awesome library because, reasons\"\n  s.licenses = [ 'MIT' ]\n  s.email = \"johndoe@null.com\"\n  s.homepage = \"http://www.null.com\"\n  s.extensions = %w[ext/mygem/extconf.rb]\n  s.files = FileList['lib/**/*.rb', 'ext/**/*.{rb,c,h}']\n  s.platform = Gem::Platform::RUBY\n  s.required_ruby_version = '&gt;= 1.8'\nend\n</code></pre>\n\n<p>My project layout is</p>\n\n<pre><code>Rakefile\nmygem.gemspec\next/\n    mygem/\n        extconf.rb\n        mygem.c      (generated with SWIG 3.0)\nlib/\n    mygem.rb\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551242514, "post_id": 54896948, "comment_id": 96564596, "body": "I have no idea what you mean by &quot;throw it into my array&quot; or &quot;have the hash around my array&quot;. That there are no answers two hours after the question was posted suggests others share my lack of understanding. You need to be precise. Showing the Ruby object you want returned for your example would help. Also, does the file contain the string <code>&quot;1,Foo,20 2,Smith,40 3,John,55&quot;</code> and nothing more?"}, {"owner": {"reputation": 37, "user_id": 11059895, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-s6hJpgYfShc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNkckjuhULnA3-mJ9RgU5JWaq7eNA/mo/photo.jpg?sz=128", "display_name": "J Teruo", "link": "https://stackoverflow.com/users/11059895/j-teruo"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551243697, "post_id": 54896948, "comment_id": 96564856, "body": "I see my post wasn&#39;t properly portrayed in someways 1,Foo,20,Smith,40,John,55 is the full string within that file. What I mean by throwing this into a hash / array. I am looking for an output like so{1  =&gt;[Foo,20], 2 =&gt;[Smith,40] 3 =&gt; [John,55]}. Thanks for your response I hope this clarification is helpful."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1551244523, "post_id": 54896948, "comment_id": 96565066, "body": "&quot;I am at a loss.&quot; is not a precise enough error description for us to help you. <i>What</i> doesn&#39;t work? <i>How</i> doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551460750, "post_id": 54896948, "comment_id": 96661672, "body": "You say you want the return value to be <code>{1=&gt;[Foo,20], 2=&gt;[Smith,40] 3=&gt;[John,55]}</code>. <code>Foo</code> is not a Ruby object. I assume you mean <code>&quot;Foo&quot;</code> (etc.). Where you write <code>1 =&gt;[Foo,20]</code>, <code>1</code> is an integer, not a string. That&#39;s fine, but since you omitted quotes around <code>Foo</code> we can&#39;t be sure you don&#39;t mean it to be  <code>&quot;1&quot;</code>. What is the significance <code>&#39;1&quot;</code> at the beginning of the string? If it were <code>&quot;5,Foo,20,Smith,40,John,55&quot;</code> those of us giving answers would have assumed the return value should be <code>{5=&gt;[&quot;Foo&quot;,20], 6 =&gt;[&quot;Smith&quot;,40] 7 =&gt; [&quot;John&quot;,55]}</code>, but you say nothing about that."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 0, "last_activity_date": 1551457860, "last_edit_date": 1551457860, "creation_date": 1551249266, "answer_id": 54899405, "question_id": 54896948, "link": "https://stackoverflow.com/questions/54896948/looking-to-convert-information-from-a-file-into-a-hash-ruby/54899405#54899405", "title": "Looking to convert information from a file into a hash Ruby", "body": "<pre><code>FName = 'test'\nstr = \"1,Foo,20,Smith, 40,John,55\"\nFile.write(FName, str)\n  #=&gt; 26 \n\nbase, *arr = File.read(FName).\n                  split(/\\s*,\\s*/)\nenum = (base.to_i).step\narr.each_slice(2).\n    with_object({}) {|pair,h| h[enum.next]=pair}\n  #=&gt; {1=&gt;[\"Foo\", \"20\"], 2=&gt;[\"Smith\", \"40\"],\n  #    3=&gt;[\"John\", \"55\"]} \n</code></pre>\n\n<p>The steps are as follows.</p>\n\n<pre><code>s = File.read(FName)\n  #=&gt; \"1,Foo,20,Smith, 40,John,55\" \nbase, *arr = s.split(/\\s*,\\s*/)\n  #=&gt; [\"1\", \"Foo\", \"20\", \"Smith\", \"40\", \"John\", \"55\"] \nbase \n  #=&gt; \"1\" \narr\n  #=&gt; [\"Foo\", \"20\", \"Smith\", \"40\", \"John\", \"55\"] \na = base.to_i\n  #=&gt; 1\n</code></pre>\n\n<p>I assume the keys are to be sequential integers beginning with <code>a #=&gt; 1</code>.</p>\n\n<pre><code>enum = a.step\n  #=&gt; (1.step)\nenum.next\n  #=&gt; 1      \nenum.next\n  #=&gt; 2\nenum.next\n  #=&gt; 3\n</code></pre>\n\n<p>Continuing,</p>\n\n<pre><code>enum = a.step\nb = arr.each_slice(2)\n  #=&gt; #&lt;Enumerator: [\"Foo\", \"20\", \"Smith\", \"40\", \"John\", \"55\"]:each_slice(2)&gt; \n</code></pre>\n\n<p>Note I needed to redefine <code>enum</code> (or execute <code>enum.rewind</code>) to reinitialize it. We can see the elements that will be generated by this enumerator by converting it to an array.</p>\n\n<pre><code>b.to_a\n  #=&gt; [[\"Foo\", \"20\"], [\"Smith\", \"40\"], [\"John\", \"55\"]] \n</code></pre>\n\n<p>Continuing,</p>\n\n<pre><code>c = b.with_object({})\n  #=&gt; #&lt;Enumerator: #&lt;Enumerator: [\"Foo\", \"20\", \"Smith\", \"40\", \"John\", \"55\"]\n  #     :each_slice(2)&gt;:with_object({})&gt;\nc.to_a\n  #=&gt; [[[\"Foo\", \"20\"], {}], [[\"Smith\", \"40\"], {}], [[\"John\", \"55\"], {}]]\n</code></pre>\n\n<p>The now-empty hashes will be constructed as calculations progress.</p>\n\n<pre><code>c.each {|pair,h| h[enum.next]=pair}\n  #=&gt; {1=&gt;[\"Foo\", \"20\"], 2=&gt;[\"Smith\", \"40\"], 3=&gt;[\"John\", \"55\"]}\n</code></pre>\n\n<p>To see how the last step is performed, <code>each</code> initially directs the enumerator <code>c</code> to generate the first value, which it passes to the block. The block variables are assigned to that value, and the block calculation is performed.</p>\n\n<pre><code>enum = a.step\nb = arr.each_slice(2)\nc = b.with_object({})\n\npair, h = c.next\n  #=&gt; [[\"Foo\", \"20\"], {}] \npair\n  #=&gt; [\"Foo\", \"20\"] \nh #=&gt; {} \nh[enum.next]=pair\n  #=&gt; [\"Foo\", \"20\"] \n</code></pre>\n\n<p>Now,</p>\n\n<pre><code>h#=&gt; {1=&gt;[\"Foo\", \"20\"]} \n</code></pre>\n\n<p>The calculations are similar for the remaining two elements generated by the enumerator <code>c</code>.</p>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.5.1/IO.html#method-c-write\" rel=\"nofollow noreferrer\">IO::write</a>, <a href=\"http://ruby-doc.org/core-2.5.1/IO.html#method-c-read\" rel=\"nofollow noreferrer\">IO::read</a>, <a href=\"http://ruby-doc.org/core-2.5.1/Numeric.html#method-i-step\" rel=\"nofollow noreferrer\">Numeric#step</a>, <a href=\"http://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-each_slice\" rel=\"nofollow noreferrer\">Enumerable#each_slice</a>, <a href=\"http://ruby-doc.org/core-2.5.1/Enumerator.html#method-i-with_object\" rel=\"nofollow noreferrer\">Enumerator#with_object</a>, <a href=\"http://ruby-doc.org/core-2.5.1/Enumerator.html#method-i-next\" rel=\"nofollow noreferrer\">Enumerator#next</a> and <a href=\"http://ruby-doc.org/core-2.5.1/Enumerator.html#method-i-rewind\" rel=\"nofollow noreferrer\">Enumerator#rewind</a>. <code>write</code> and <code>read</code> respond to <code>File</code> because <code>File</code> is a subclass of <code>IO</code> (<code>File.superclass #=&gt; IO</code>). <code>split</code>'s argument, the regular expression, <code>/\\s*,\\s*/</code>, causes the string to be split on commas together with any spaces that surround the commas. Converting <code>[[\"Foo\", \"20\"], {}]</code> to <code>pair</code> and <code>h</code> is a product of <a href=\"https://docs.ruby-lang.org/en/2.6.0/syntax/assignment_rdoc.html#label-Array+Decomposition\" rel=\"nofollow noreferrer\">Array Decompostion</a>.</p>\n"}], "owner": {"reputation": 37, "user_id": 11059895, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-s6hJpgYfShc/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNkckjuhULnA3-mJ9RgU5JWaq7eNA/mo/photo.jpg?sz=128", "display_name": "J Teruo", "link": "https://stackoverflow.com/users/11059895/j-teruo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 54899405, "answer_count": 1, "score": 1, "last_activity_date": 1551457860, "creation_date": 1551233110, "last_edit_date": 1551243486, "question_id": 54896948, "link": "https://stackoverflow.com/questions/54896948/looking-to-convert-information-from-a-file-into-a-hash-ruby", "title": "Looking to convert information from a file into a hash Ruby", "body": "<p>Hello I have been doing some research for sometime on this particular project I have been working on and I am at a loss. What I am looking to do is use information from a file and convert that to a hash using some of those components for my key. Within the file I have:1,Foo,20,Smith,40,John,55</p>\n\n<p>An example of what I am looking for  I am looking for an output like so        <code>{1 =&gt;[Foo,20], 2 =&gt;[Smith,40] 3 =&gt; [John,55]}</code> </p>\n\n<p>Here is what I got. </p>\n\n<pre><code>h = {}\n\npeople_file = File.open(\"people.txt\")  # I am only looking to read here.\nuntil people_file.eof?\n  i = products_file.gets.chomp.split(\",\")\nend\npeople_file.close\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1551231816, "post_id": 54896612, "comment_id": 96562302, "body": "Can you submit some array examples?"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1551232373, "post_id": 54896612, "comment_id": 96562428, "body": "Going by your title perhaps this is what you want <code>[ arr1, arr2, arr3 ].map { |ar| ar.max_by(&amp;:length) }</code>"}, {"owner": {"reputation": 31, "user_id": 2950963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a84e7dcefb3ea59af16eb074d176e696?s=128&d=identicon&r=PG&f=1", "display_name": "Ann Left", "link": "https://stackoverflow.com/users/2950963/ann-left"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1551233602, "post_id": 54896612, "comment_id": 96562731, "body": "added examples to the above."}, {"owner": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "edited": false, "score": 0, "creation_date": 1551233865, "post_id": 54896612, "comment_id": 96562793, "body": "Avoid using <code>while</code>/<code>for</code> in Ruby for iteration. Instead, prefer <a href=\"https://ruby-doc.org/core/Array.html#method-i-each\" rel=\"nofollow noreferrer\"><code>each</code></a> or one of the higher-order functions in <a href=\"https://ruby-doc.org/core/Enumerable.html\" rel=\"nofollow noreferrer\"><code>Enumerable</code></a>."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1551234045, "post_id": 54896612, "comment_id": 96562836, "body": "What would be the correct values?"}, {"owner": {"reputation": 31, "user_id": 2950963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a84e7dcefb3ea59af16eb074d176e696?s=128&d=identicon&r=PG&f=1", "display_name": "Ann Left", "link": "https://stackoverflow.com/users/2950963/ann-left"}, "edited": false, "score": 0, "creation_date": 1551234220, "post_id": 54896612, "comment_id": 96562870, "body": "This doesn&#39;t return the longest element from each array. I am trying to return the length of the longest element from arr1,  length of the longest element from arr2 and the length of the longest element from arr3"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1551234393, "post_id": 54896612, "comment_id": 96562913, "body": "If <code>arr = [animals, people, friends]</code>. Does this work for you <code>arr.map { |subarr| subarr.map {|arr| arr.max_by(&amp;:size) }.max_by(&amp;:size) }</code>?"}, {"owner": {"reputation": 31, "user_id": 2950963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a84e7dcefb3ea59af16eb074d176e696?s=128&d=identicon&r=PG&f=1", "display_name": "Ann Left", "link": "https://stackoverflow.com/users/2950963/ann-left"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1551234821, "post_id": 54896612, "comment_id": 96562996, "body": "@SagarPandya This returns the array content itself. I am trying to return the number of chars in the longest array."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 2950963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a84e7dcefb3ea59af16eb074d176e696?s=128&d=identicon&r=PG&f=1", "display_name": "Ann Left", "link": "https://stackoverflow.com/users/2950963/ann-left"}, "edited": false, "score": 0, "creation_date": 1551233026, "post_id": 54896852, "comment_id": 96562570, "body": "I am trying to get just the longest element from arr1, the longest element from arr2 and the longest elements from arr3."}, {"owner": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "reply_to_user": {"reputation": 31, "user_id": 2950963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a84e7dcefb3ea59af16eb074d176e696?s=128&d=identicon&r=PG&f=1", "display_name": "Ann Left", "link": "https://stackoverflow.com/users/2950963/ann-left"}, "edited": false, "score": 0, "creation_date": 1551233938, "post_id": 54896852, "comment_id": 96562815, "body": "@AnnLeft That contradicts your question: \u201cprint the <i>amount of characters</i> of the longest element from each array\u201d."}, {"owner": {"reputation": 31, "user_id": 2950963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a84e7dcefb3ea59af16eb074d176e696?s=128&d=identicon&r=PG&f=1", "display_name": "Ann Left", "link": "https://stackoverflow.com/users/2950963/ann-left"}, "edited": false, "score": 0, "creation_date": 1551234010, "post_id": 54896852, "comment_id": 96562829, "body": "This doesn&#39;t work with mixes arrays of different data types."}, {"owner": {"reputation": 31, "user_id": 2950963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a84e7dcefb3ea59af16eb074d176e696?s=128&d=identicon&r=PG&f=1", "display_name": "Ann Left", "link": "https://stackoverflow.com/users/2950963/ann-left"}, "reply_to_user": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "edited": false, "score": 1, "creation_date": 1551234334, "post_id": 54896852, "comment_id": 96562894, "body": "my apologies @AndrewMarshall - I am trying to return the length of the longest element from each array."}], "tags": [], "owner": {"reputation": 277, "user_id": 7810250, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06e145094d817da5e621d9fc578e7443?s=128&d=identicon&r=PG&f=1", "display_name": "Leonardo Ferreira", "link": "https://stackoverflow.com/users/7810250/leonardo-ferreira"}, "is_accepted": false, "score": 0, "last_activity_date": 1551232426, "creation_date": 1551232426, "answer_id": 54896852, "question_id": 54896612, "link": "https://stackoverflow.com/questions/54896612/returning-the-largest-element-from-arrays-in-an-array/54896852#54896852", "title": "Returning the largest element from arrays in an array", "body": "<p>For this problem use Ruby Iterators.</p>\n\n<p>Using the following example:</p>\n\n<pre><code>arrays = [[['foo','foo','foo','foo','foo','fooOOO'],\n           ['foo','foo','foo','foo','foo','fooIIIIIII']],\n          [['baa','baa','baa','baa','baa','baaUUU'], \n           ['baa','baa','baa','baa','baa','baaAAAAAAAA']]]\n</code></pre>\n\n<p>Do the iteration like this:</p>\n\n<pre><code>arrays.each do |array|\n  array.each do |item|\n    puts item.max_by(&amp;:length).length\n  end\nend\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>6\n10\n6\n11\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1551236149, "creation_date": 1551236149, "answer_id": 54897309, "question_id": 54896612, "link": "https://stackoverflow.com/questions/54896612/returning-the-largest-element-from-arrays-in-an-array/54897309#54897309", "title": "Returning the largest element from arrays in an array", "body": "<p>It looks like you want the following, but I can't sure be sure of what is being asked.</p>\n\n<pre><code>def longest(arr)\n  arr.map { |a| a.flatten.map(&amp;:to_s).max_by(&amp;:size) }\nend\n\nlongest animals\n  #=&gt; [\"Chihuahua\", \"Chihuahua\"] \nlongest people\n  #=&gt; [\"123 Homewood Home Drive\", \"123 Sweetwood Drive\"]\nlongest friends\n  #=&gt; [\"first_name\", \"9210 Cheery Avenue\",\n  #    \"9210 Simpson Avenue\"] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 0, "last_activity_date": 1551237587, "last_edit_date": 1551237587, "creation_date": 1551236565, "answer_id": 54897364, "question_id": 54896612, "link": "https://stackoverflow.com/questions/54896612/returning-the-largest-element-from-arrays-in-an-array/54897364#54897364", "title": "Returning the largest element from arrays in an array", "body": "<p>It looks like you want the following, but I can't sure be sure of what is being asked.</p>\n\n<pre><code>def longest(arr)\n  arr.map { |a| a.flatten.max_by { |e| e.to_s.size } }\nend\n\nlongest arr1\n  #=&gt; [12121113222331144450, \"fooollllll\"] \nlongest animals\n  #=&gt; [\"Chihuahua\", \"Chihuahua\"] \nlongest people\n  #=&gt; [\"123 Homewood Home Drive\", \"123 Sweetwood Drive\"] \nlongest friends\n  #=&gt; [\"first_name\", \"9210 Cheery Avenue\",\n  #    \"9210 Simpson Avenue\"]\n</code></pre>\n\n<p>or perhaps</p>\n\n<pre><code>def longest(arr)\n  arr.map { |a| a.flatten.map { |e| e.to_s.size }.max }\nend\n\nlongest arr1\n  #=&gt; [20, 10] \nlongest animals\n  #=&gt; [9, 9] \nlongest people\n  #=&gt; [23, 19] \nlongest friends\n  #=&gt; [10, 18, 19] \n</code></pre>\n\n<p>or maybe even</p>\n\n<pre><code>def longest(arr)\n  arr.each_with_object([]) { |a,ar|\n    a.flatten.max_by { |e| e.to_s.size }.\n      yield_self { |e| ar &lt;&lt; [e, e.to_s.size] } }\nend\n\nlongest arr1 \n  #=&gt; [[12121113222331144450, 20],\n  #    [\"fooollllll\", 10]]      \nlongest animals\n  #=&gt; [[\"Chihuahua\", 9],\n  #    [\"Chihuahua\", 9]] \nlongest people\n  #=&gt; [[\"123 Homewood Home Drive\", 23],\n  #    [\"123 Sweetwood Drive\", 19]] \nlongest friends\n  #=&gt; [[\"first_name\", 10],\n  #    [\"9210 Cheery Avenue\", 18],\n  #    [\"9210 Simpson Avenue\", 19]] \n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 2950963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a84e7dcefb3ea59af16eb074d176e696?s=128&d=identicon&r=PG&f=1", "display_name": "Ann Left", "link": "https://stackoverflow.com/users/2950963/ann-left"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 54897364, "answer_count": 3, "score": -1, "last_activity_date": 1551332839, "creation_date": 1551230464, "last_edit_date": 1551332839, "question_id": 54896612, "link": "https://stackoverflow.com/questions/54896612/returning-the-largest-element-from-arrays-in-an-array", "title": "Returning the largest element from arrays in an array", "body": "<p>I have three arrays that are combined into another array. The arrays are of different lengths, sizes, and data types. For example:</p>\n\n<pre><code>arr1 = [\n  [\"foooooo\", \"barrrrrr\", 12121113222331144450],\n  [\"fooollllll\", \"barrrrrr\", 5555555555]\n]\n\nanimals = [\n  ['Hector', 'Chihuahua', 7],\n  ['Max', 'Chihuahua', 9]\n]\n\npeople = [\n  %w(Jesse\\ James 123\\ Homewood\\ Home\\ Drive San\\ Francisco\\ CA 510-555-1234 510-123-4567),\n  %w(Thomas\\ Masters 123\\ Sweetwood\\ Drive San\\ Francisco\\ CA 510-656-6589 510-123-1236)\n]\n\nfriends = [\n  %w(first_name last_name telephone address city state zip_code birthdate salary),\n  [\n    'Jessica',\n    'Simpson',\n    '485-123-456',\n    '9210 Cheery Avenue',\n    'Tyler',\n    'TX',\n    '12345',\n    '7/6/81',\n    '500'\n  ],\n  [\n    'Alexis',\n    'Tyler',\n    '123-123-789',\n    '9210 Simpson Avenue',\n    'Chandler',\n    'AZ',\n    '62345',\n    '8/2/72',\n    '1200'\n  ]\n]\n</code></pre>\n\n<ul>\n<li><code>arr1</code> has six arrays with three elements in each array.</li>\n<li><code>arr2</code> has five arrays with six elements in each array.</li>\n<li><code>arr3</code> has nine arrays with five elements in each array.</li>\n<li><code>arr4</code> has <code>arr1</code>, <code>arr2</code>, <code>arr3</code>.</li>\n</ul>\n\n<p>I am trying to iterate through these three arrays and return the characters of the single longest element from each array of arrays. I want to return <code>arr1</code> has [sic] twenty chars.</p>\n\n<pre><code>i = 0 \nwhile i &lt; arr4_arrays.length\n  len = arr4_arrays[i].max_by(&amp;:length)\n  len_m = len.map(&amp;:to_s).max_by(&amp;:length).length.to_i\n  i+=1\n  puts len_m\n  puts \"\\n\" \nend\n</code></pre>\n\n<p>My code does not go into the subarrays. It returns the largest number from each of the first arrays. Could someone help with this?</p>\n"}, {"tags": ["ruby", "include", "metaprogramming"], "comments": [{"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1551227116, "post_id": 54896195, "comment_id": 96561407, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5944278/overriding-method-by-another-defined-in-module\">Overriding method by another defined in module</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6828, "user_id": 200394, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7320ef727f46a2b14e52b6dc88e2cc78?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/200394/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1551227040, "creation_date": 1551227040, "answer_id": 54896227, "question_id": 54896195, "link": "https://stackoverflow.com/questions/54896195/calling-ruby-include-on-a-class-with-an-already-defined-method/54896227#54896227", "title": "calling ruby include on a class with an already defined method", "body": "<p>Ugh... The solution is to use prepend and not include.</p>\n\n<pre><code>MyClass.prepend(Test1)\n</code></pre>\n"}], "owner": {"reputation": 6828, "user_id": 200394, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7320ef727f46a2b14e52b6dc88e2cc78?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/200394/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1551316602, "creation_date": 1551226782, "last_edit_date": 1551316602, "question_id": 54896195, "link": "https://stackoverflow.com/questions/54896195/calling-ruby-include-on-a-class-with-an-already-defined-method", "title": "calling ruby include on a class with an already defined method", "body": "<p>I want to overwrite the call method below, by calling an include on the class after it has been defined.   Important part is to allow \"other\" code to abstractly decide which module to include, rather than \"opening\" the class and using \"include\"</p>\n\n<p>Example:</p>\n\n<pre><code>module Test1\n  def call\n    puts \"Test1\"\n  end\nend\n\nclass MyClass\n  def call\n    puts \"MyClass\"\n  end\nend\n\n\nMyClass.include(Test1)\n\nx = MyClass.new\nx.call\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>MyClass\n</code></pre>\n\n<p>Desired output:</p>\n\n<pre><code>Test1\n</code></pre>\n\n<p>Tested with Ruby 2.4.3p205</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1551332983, "post_id": 54895574, "comment_id": 96603751, "body": "Please use English punctuation when writing in English."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1551224678, "post_id": 54895739, "comment_id": 96560804, "body": "Congrats on figuring this out!"}], "tags": [], "owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "is_accepted": false, "score": 1, "last_activity_date": 1551223376, "creation_date": 1551223376, "answer_id": 54895739, "question_id": 54895574, "link": "https://stackoverflow.com/questions/54895574/what-does-cannot-load-such-file-ruby-debug-indicate-when-running-require/54895739#54895739", "title": "What does &quot;cannot load such file -- ruby-debug&quot; indicate when running require?", "body": "<p>I think I just found my own answer.</p>\n\n<p>A .rb file inside the library had a...</p>\n\n<pre><code>use 'ruby-debug'\n</code></pre>\n\n<p>I changed that to..</p>\n\n<pre><code>use 'pry-bugbye'\n</code></pre>\n\n<p>and it worked.</p>\n\n<p>IOW, the error message was all about the use of \"ruby-debug\".  And the solution was indeed to replace that with \"pry-bugbye\"</p>\n\n<p>Hope this posting helps someone else in the future !</p>\n"}], "owner": {"reputation": 847, "user_id": 7514026, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baca10c436cbd0cbdd232619d163cf19?s=128&d=identicon&r=PG&f=1", "display_name": "daveg", "link": "https://stackoverflow.com/users/7514026/daveg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551223376, "creation_date": 1551222218, "question_id": 54895574, "link": "https://stackoverflow.com/questions/54895574/what-does-cannot-load-such-file-ruby-debug-indicate-when-running-require", "title": "What does &quot;cannot load such file -- ruby-debug&quot; indicate when running require?", "body": "<p>Hi:  I've been asked to debug some ruby code, a language I know next to nothing about, so please bear with me.  FWIW, the port is from v 2.1.1 to 2.3.1</p>\n\n<p>This is the ruby script...</p>\n\n<pre><code>#!/usr/bin/env ruby\n\n$VERBOSE = nil\n\nbegin\n  $:.unshift File.expand_path(File.join(File.dirname(File.realpath(__FILE__)), '..', 'lib'))\n  require 'idl'\nrescue LoadError =&gt; e\n  puts \"Failed to load idl library. #{e}\"\n  exit(-1)\nend\n\nGC.disable # Disable GC since IDL is so transient. The GC takes an inordinate amount of time\nIDL::App.instance.run\n</code></pre>\n\n<p>This is the error message...</p>\n\n<pre><code>Failed to load idl library. cannot load such file -- ruby-debug\n</code></pre>\n\n<p>The ruby script is in a dir which <strong><em>does</em></strong> have a sibling dir that has the idl library...</p>\n\n<pre><code>-&gt; ll idl ../lib\n-rwxrwxr-x 1 joe thegrp  348 Feb 26 17:29 idl\n\n../lib:\ntotal 12\ndrwxrwsr-x 3 joe thegrp 4096 Feb 21 11:44 idl\n-r--r--r-- 1 joe thegrp 4327 Feb 21 11:44 idl.rb\n</code></pre>\n\n<p>All of this appears to have worked in 2.1.1</p>\n\n<p>I don't think this is a matter where it can't find the library.  I stuck some debug statements in the ruby script which just print out the value of... File.expand_path(File.join(File.dirname(File.realpath(<strong>FILE</strong>)), '..', 'lib')) and it's right on. And remember, this exact same code and dir structure worked in 2.1.1 .  </p>\n\n<p>Could it be that the \"cannot load such file\" is really trying to say \"I can't load this library because it was created in 2.1.1 and this is 2.3.1\" ??</p>\n\n<p>What's up with the \"-- ruby-debug\" ?  </p>\n\n<p>I found some notes (internal) that \"ruby-debug\" could be an issue.  The subject was...</p>\n\n<pre><code>errors related to deprecated debuggers like pry-debugger, debugger, ruby-debug\n</code></pre>\n\n<p>The solution was...</p>\n\n<pre><code>Use pry-byebug debugger\n</code></pre>\n\n<p>I'm not sure why a debugger is being invoked here or if it's the reason for the error.  And I'm not sure how to \"Use pry-byebug debugger\".  Is there a way I can  stick this in the ruby script, something like \"use pry-byebug\" ?</p>\n\n<p>Any help deciphering what's happening and any proposed solutions would be appreciated !</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 366, "user_id": 10694425, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4dn2cZet4GI/AAAAAAAAAAI/AAAAAAAAAv0/M_hR3_l_AO0/photo.jpg?sz=128", "display_name": "Hasan Tezcan", "link": "https://stackoverflow.com/users/10694425/hasan-tezcan"}, "edited": false, "score": 0, "creation_date": 1551219547, "post_id": 54894942, "comment_id": 96559123, "body": "I am using manjaro and I try to find  this package our repo using tihs code  <b>pacman -Ss libreadline7</b>  but its not make any return.   What  can I do now?"}, {"owner": {"reputation": 8517, "user_id": 2336650, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/lpq4b.jpg?s=128&g=1", "display_name": "Mostafa Hussein", "link": "https://stackoverflow.com/users/2336650/mostafa-hussein"}, "reply_to_user": {"reputation": 366, "user_id": 10694425, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4dn2cZet4GI/AAAAAAAAAAI/AAAAAAAAAv0/M_hR3_l_AO0/photo.jpg?sz=128", "display_name": "Hasan Tezcan", "link": "https://stackoverflow.com/users/10694425/hasan-tezcan"}, "edited": false, "score": 0, "creation_date": 1551220097, "post_id": 54894942, "comment_id": 96559309, "body": "in manjaro you can find it with the name <b>readline</b> <a href=\"https://www.archlinux.org/packages/core/x86_64/readline/\" rel=\"nofollow noreferrer\">archlinux.org/packages/core/x86_64/readline</a> , try to install it if not installed already then create a symlink with the name <b>libreadline.so.7</b> as the current readline version is 8"}, {"owner": {"reputation": 8517, "user_id": 2336650, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/lpq4b.jpg?s=128&g=1", "display_name": "Mostafa Hussein", "link": "https://stackoverflow.com/users/2336650/mostafa-hussein"}, "reply_to_user": {"reputation": 366, "user_id": 10694425, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4dn2cZet4GI/AAAAAAAAAAI/AAAAAAAAAv0/M_hR3_l_AO0/photo.jpg?sz=128", "display_name": "Hasan Tezcan", "link": "https://stackoverflow.com/users/10694425/hasan-tezcan"}, "edited": false, "score": 0, "creation_date": 1551220970, "post_id": 54894942, "comment_id": 96559607, "body": "@HasanTezcan also check this <a href=\"https://github.com/rails/rails/issues/26658#issuecomment-251644858\" rel=\"nofollow noreferrer\">github.com/rails/rails/issues/26658#issuecomment-251644858</a>"}, {"owner": {"reputation": 8517, "user_id": 2336650, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/lpq4b.jpg?s=128&g=1", "display_name": "Mostafa Hussein", "link": "https://stackoverflow.com/users/2336650/mostafa-hussein"}, "reply_to_user": {"reputation": 366, "user_id": 10694425, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4dn2cZet4GI/AAAAAAAAAAI/AAAAAAAAAv0/M_hR3_l_AO0/photo.jpg?sz=128", "display_name": "Hasan Tezcan", "link": "https://stackoverflow.com/users/10694425/hasan-tezcan"}, "edited": false, "score": 0, "creation_date": 1551221029, "post_id": 54894942, "comment_id": 96559626, "body": "If this file <b>/home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/2.5.0/x86_6&zwnj;&#8203;4-linux/readline.so</b> is not exist then after installing the package try to create it using symlink or try to reinstall ruby"}, {"owner": {"reputation": 366, "user_id": 10694425, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4dn2cZet4GI/AAAAAAAAAAI/AAAAAAAAAv0/M_hR3_l_AO0/photo.jpg?sz=128", "display_name": "Hasan Tezcan", "link": "https://stackoverflow.com/users/10694425/hasan-tezcan"}, "edited": false, "score": 0, "creation_date": 1551287893, "post_id": 54894942, "comment_id": 96588920, "body": "I reinstalled my environment and its working now. Thanks everyone for helping"}], "tags": [], "owner": {"reputation": 8517, "user_id": 2336650, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/lpq4b.jpg?s=128&g=1", "display_name": "Mostafa Hussein", "link": "https://stackoverflow.com/users/2336650/mostafa-hussein"}, "is_accepted": true, "score": 0, "last_activity_date": 1551218876, "creation_date": 1551218876, "answer_id": 54894942, "question_id": 54894835, "link": "https://stackoverflow.com/questions/54894835/cant-open-rails-console-on-ruby-on-rails/54894942#54894942", "title": "Can&#39;t Open rails console on Ruby on Rails", "body": "<p>It seems like you have a missing system dependency according to the following error</p>\n\n<pre><code>libreadline.so.7: cannot open shared object file: No such file or directory\n</code></pre>\n\n<p>Which you need to install. If you are on Ubuntu you can install the following package: <code>libreadline7</code></p>\n"}], "owner": {"reputation": 366, "user_id": 10694425, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4dn2cZet4GI/AAAAAAAAAAI/AAAAAAAAAv0/M_hR3_l_AO0/photo.jpg?sz=128", "display_name": "Hasan Tezcan", "link": "https://stackoverflow.com/users/10694425/hasan-tezcan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 0, "accepted_answer_id": 54894942, "answer_count": 1, "score": 1, "last_activity_date": 1551218876, "creation_date": 1551218421, "last_edit_date": 1551218784, "question_id": 54894835, "link": "https://stackoverflow.com/questions/54894835/cant-open-rails-console-on-ruby-on-rails", "title": "Can&#39;t Open rails console on Ruby on Rails", "body": "<blockquote>\n  <p>I can start the server with <strong>rails s</strong> but I can't access the console.\n  When I try to open console those lines I see.</p>\n</blockquote>\n\n<p><code>$ rails c</code></p>\n\n<pre><code>Running via Spring preloader in process 17025\n\nTraceback (most recent call last):\n    50: from -e:1:in `&lt;main&gt;'\n    49: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n    48: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\n    47: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:285:in `load'\n    46: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:257:in `load_dependency'\n    45: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:285:in `block in load'\n    44: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:50:in `load'\n    43: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:50:in `load'\n    42: from /home/hasantezcan/Documents/programing/ruby/checklist_project/Checklist/bin/rails:9:in `&lt;main&gt;'\n    41: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:291:in `require'\n    40: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:257:in `load_dependency'\n    39: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:291:in `block in require'\n    38: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in `require'\n    37: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in `require_with_bootsnap_lfi'\n    36: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/loaded_features_index.rb:83:in `register'\n    35: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `block in require_with_bootsnap_lfi'\n    34: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require'\n    33: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-5.2.2/lib/rails/commands.rb:18:in `&lt;main&gt;'\n    32: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-5.2.2/lib/rails/command.rb:44:in `invoke'\n    31: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-5.2.2/lib/rails/command.rb:70:in `find_by_namespace'\n    30: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-5.2.2/lib/rails/command/behavior.rb:79:in `lookup'\n    29: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-5.2.2/lib/rails/command/behavior.rb:79:in `each'\n    28: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-5.2.2/lib/rails/command/behavior.rb:80:in `block in lookup'\n    27: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-5.2.2/lib/rails/command/behavior.rb:80:in `each'\n    26: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-5.2.2/lib/rails/command/behavior.rb:84:in `block (2 levels) in lookup'\n    25: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:291:in `require'\n    24: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:257:in `load_dependency'\n    23: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:291:in `block in require'\n    22: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in `require'\n    21: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in `require_with_bootsnap_lfi'\n    20: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/loaded_features_index.rb:83:in `register'\n    19: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `block in require_with_bootsnap_lfi'\n    18: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require'\n    17: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/railties-5.2.2/lib/rails/commands/console/console_command.rb:4:in `&lt;main&gt;'\n    16: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:291:in `require'\n    15: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:257:in `load_dependency'\n    14: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:291:in `block in require'\n    13: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in `require'\n    12: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in `require_with_bootsnap_lfi'\n    11: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/loaded_features_index.rb:83:in `register'\n    10: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `block in require_with_bootsnap_lfi'\n     9: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require'\n     8: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/2.5.0/irb/completion.rb:10:in `&lt;main&gt;'\n     7: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:291:in `require'\n     6: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:257:in `load_dependency'\n     5: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:291:in `block in require'\n     4: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in `require'\n     3: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in `require_with_bootsnap_lfi'\n     2: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/loaded_features_index.rb:83:in `register'\n     1: from /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `block in require_with_bootsnap_lfi'\n/home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require': libreadline.so.7: cannot open shared object file: No such file or directory - /home/hasantezcan/.rbenv/versions/2.5.1/lib/ruby/2.5.0/x86_64-linux/readline.so (LoadError)\n</code></pre>\n\n<p><a href=\"https://i.hizliresim.com/DYm5Gl.png\" rel=\"nofollow noreferrer\">my enviroment version</a></p>\n\n<blockquote>\n  <p>How can I fix that</p>\n</blockquote>\n"}, {"tags": ["ruby", "selenium", "google-chrome", "browsermob-proxy", "browsermob"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1551220007, "post_id": 54894218, "comment_id": 96559283, "body": "Try <a href=\"https://github.com/SeleniumHQ/selenium/wiki/Ruby-Bindings#remote\" rel=\"nofollow noreferrer\">github.com/SeleniumHQ/selenium/wiki/Ruby-Bindings#remote</a>"}, {"owner": {"reputation": 706, "user_id": 6492146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10157001409455137/picture?type=large", "display_name": "Verty00", "link": "https://stackoverflow.com/users/6492146/verty00"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1551223349, "post_id": 54894218, "comment_id": 96560376, "body": "@orde Sorry thats if you want to use selenium to control a chrom instance on a remote computer at a specific ip. I just want to initialize chrome to connect to the web via a proxy."}], "owner": {"reputation": 706, "user_id": 6492146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10157001409455137/picture?type=large", "display_name": "Verty00", "link": "https://stackoverflow.com/users/6492146/verty00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 364, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551215738, "creation_date": 1551215738, "question_id": 54894218, "link": "https://stackoverflow.com/questions/54894218/using-proxies-with-selenium-webdriver-and-chrome", "title": "Using proxies with Selenium WebDriver and chrome", "body": "<p>Im writing a selenium-webdriver script in ruby and im trying to figure out how to make the browser window that selenium opens use a proxy with user pass authentication. </p>\n\n<p>i.e. (234.43.234:2345:user:pass)</p>\n\n<p>so far my code is thus.... </p>\n\n<pre><code>    def scrape_n_vote\n      driver = Selenium::WebDriver.for(:chrome)\n      loop do\n        driver.get \"https://poll.fm/poll_id\"\n        driver.find_element(id: 'answer_id').click\n        sleep 1\n        driver.find_element(class: 'btn-large').click\n        sleep rand(1..3)\n      end\n    end\n</code></pre>\n\n<p>Does anyone know how to make the browser programatically accept a proxy via this ruby script for chrome to make the connection with?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1551215368, "post_id": 54892705, "comment_id": 96557382, "body": "In addition to what others have said, I suggest you use the method <a href=\"https://ruby-doc.org/core-2.5.0/Integer.html#method-i-even-3F\" rel=\"nofollow noreferrer\">Integer#even?</a>, (<code>if num.even? ...</code>) rather than <a href=\"https://ruby-doc.org/core-2.5.0/Integer.html#method-i-25\" rel=\"nofollow noreferrer\">Integer#%</a>."}], "answers": [{"comments": [{"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 1, "creation_date": 1551213885, "post_id": 54892789, "comment_id": 96556730, "body": "You don&#39;t need <code>#chomp</code>, just <code>#to_i</code>"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 1, "creation_date": 1551963969, "post_id": 54892789, "comment_id": 96839608, "body": "It is true that if you want to guard against invalid values you might want to use <code>Integer(variable)</code> instead, but there is still no reason to <code>#chomp</code>. <code>Integer(&quot;4\\n&quot;) #=&gt; 4</code> works perfectly fine."}], "tags": [], "owner": {"reputation": 14139, "user_id": 1108, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/48OpQ.jpg?s=128&g=1", "display_name": "jerhinesmith", "link": "https://stackoverflow.com/users/1108/jerhinesmith"}, "is_accepted": false, "score": -1, "last_activity_date": 1551997927, "last_edit_date": 1551997927, "creation_date": 1551209489, "answer_id": 54892789, "question_id": 54892705, "link": "https://stackoverflow.com/questions/54892705/how-do-you-get-the-output-in-ruby-to-sort-in-even-and-odd-numbers/54892789#54892789", "title": "How do you get the output in Ruby to sort in even and odd numbers?", "body": "<p>I see two issues with what you've posted - first <code>gets.chomp</code> is going to return a <code>string</code> and you really want an <code>integer</code>, so you'd want to do <code>gets.to_i</code> (or <code>Integer(gets)</code> if you want to guard against non-numeric inputs). The second is that <code>print</code> doesn't include a line break, so that could be the source of your \"no output\" issue - maybe try switching to <code>puts</code> instead?</p>\n"}, {"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 7, "last_activity_date": 1552351750, "last_edit_date": 1552351750, "creation_date": 1551211284, "answer_id": 54893196, "question_id": 54892705, "link": "https://stackoverflow.com/questions/54892705/how-do-you-get-the-output-in-ruby-to-sort-in-even-and-odd-numbers/54893196#54893196", "title": "How do you get the output in Ruby to sort in even and odd numbers?", "body": "<p>You defined the method <code>odd_or_even</code> but never actually call it.</p>\n\n<p>You have two options:</p>\n\n<ol>\n<li><p>Take the more script-like approach and work with the input without the use of methods:</p>\n\n<pre><code>print 'Print any number: '\ninput = gets.to_i\n#              ^ convert the input (which is always a string) to an integer\nif input % 2 == 0\n  puts 'even'\n  # ^ is the same as `print` but adds a newline character at the end\n  #   (unless the string ends with a newline character)\nelse\n  puts 'odd'\nend\n</code></pre></li>\n<li><p>If you want to use a method you'll have to define it and call it as well:</p>\n\n<pre><code>def odd_or_even(num)\n  if num % 2 == 0\n    puts 'even'\n  else\n    puts 'odd'\n  end\nend\n\nprint 'Print any number: '\ninput = gets.to_i\nodd_or_even(input)\n# ^ method is called here\n</code></pre></li>\n</ol>\n\n<p>Ruby also has a lot of build-in helpers. You can achieve the same result with the following two lines:</p>\n\n<pre><code>print 'Print any number: '\nputs gets.to_i.odd? ? 'odd' : 'even'\n</code></pre>\n\n<p><strong>references:</strong></p>\n\n<ul>\n<li><a href=\"https://ruby-doc.org/core-2.6.1/Kernel.html#method-i-gets\" rel=\"nofollow noreferrer\"><code>#gets</code></a> get user input</li>\n<li><a href=\"https://ruby-doc.org/core-2.6.1/String.html#method-i-to_i\" rel=\"nofollow noreferrer\"><code>String#to_i</code></a> convert input to an integer</li>\n<li><a href=\"https://ruby-doc.org/core-2.6.1/Integer.html#method-i-odd-3F\" rel=\"nofollow noreferrer\"><code>Integer#odd?</code></a> check if the integer is odd</li>\n<li><a href=\"https://ruby-doc.org/core-2.6.1/doc/syntax/control_expressions_rdoc.html#label-Ternary+if\" rel=\"nofollow noreferrer\">Ternary if</a>: use inline of if <code>expression ? true : false</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 1, "last_activity_date": 1551216688, "last_edit_date": 1551216688, "creation_date": 1551215205, "answer_id": 54894095, "question_id": 54892705, "link": "https://stackoverflow.com/questions/54892705/how-do-you-get-the-output-in-ruby-to-sort-in-even-and-odd-numbers/54894095#54894095", "title": "How do you get the output in Ruby to sort in even and odd numbers?", "body": "<p>I think you have to check your input data.</p>\n\n<p>Otherwise it may be a situation:</p>\n\n<pre><code>'abc'.to_i.even? #=&gt; true\n</code></pre>\n\n<p>It's because non-digital <code>String#to_i</code> returns <code>0</code>.</p>\n\n<p>As you see it's not good.</p>\n\n<pre><code>def odd_or_even(number)\n  number.odd? ? 'odd' : 'even'\nend\n\nputs 'Print any number:'\ninput = gets.chomp\n\nif input =~ /\\D/\n puts 'It is not a number'\nelse\n  puts \"It's #{odd_or_even(input.to_i)}\"\nend\n</code></pre>\n\n<p>Firstly we validate data using regex. If it's not a number we will not check is it odd or even.</p>\n\n<p><strong>Note:</strong></p>\n\n<p>Very often we use <code>=~</code> <a href=\"https://ruby-doc.org/core-2.6.1/String.html#method-i-3D~\" rel=\"nofollow noreferrer\">operator</a> to match <code>String</code> and <code>Regexp</code>.</p>\n\n<p><code>/\\D/</code> means any non-digit character.</p>\n"}, {"comments": [{"owner": {"reputation": 861, "user_id": 8076979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4865c83dfb20417723c484d5a064cb6d?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Wilfert", "link": "https://stackoverflow.com/users/8076979/tobias-wilfert"}, "edited": false, "score": 2, "creation_date": 1552507007, "post_id": 55149884, "comment_id": 97040802, "body": "Please add some context to your answer"}], "tags": [], "owner": {"reputation": 1, "user_id": 11199323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/529842479e37aa1a2070ff66205695f8?s=128&d=identicon&r=PG", "display_name": "Lisa Mae", "link": "https://stackoverflow.com/users/11199323/lisa-mae"}, "is_accepted": false, "score": 0, "last_activity_date": 1552505423, "creation_date": 1552505423, "answer_id": 55149884, "question_id": 54892705, "link": "https://stackoverflow.com/questions/54892705/how-do-you-get-the-output-in-ruby-to-sort-in-even-and-odd-numbers/55149884#55149884", "title": "How do you get the output in Ruby to sort in even and odd numbers?", "body": "<pre><code>i = 20\nloop do \n  i -= 1\n  next if i % 2 == 1\n  print \"#{i}\"\n  break if i &lt;= 0\nend\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 10380639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6e06ab7e5b62ca89dbd40e58c03734?s=128&d=identicon&r=PG&f=1", "display_name": "crispycat", "link": "https://stackoverflow.com/users/10380639/crispycat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 884, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1552505423, "creation_date": 1551209118, "last_edit_date": 1551333099, "question_id": 54892705, "link": "https://stackoverflow.com/questions/54892705/how-do-you-get-the-output-in-ruby-to-sort-in-even-and-odd-numbers", "title": "How do you get the output in Ruby to sort in even and odd numbers?", "body": "<p>I got this assignment in Codecademy. I want to print the even numbers.</p>\n\n<pre><code>print \"Print any number:\"\ninpt = gets.chomp\n\ndef odd_or_even(num)\n  if num % 2 == 0\n    print \"even\"\n  else\n    print \"odd\"\n  end\nend\n</code></pre>\n\n<p>I do not get any output. Is the problem in the method, or how I've written the equation? I've tried changing both.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1551209208, "post_id": 54892589, "comment_id": 96554598, "body": "What does your console tell you? What does your code look like?"}, {"owner": {"reputation": 628, "user_id": 5954643, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9tq2jIW1zsk/AAAAAAAAAAI/AAAAAAAABcY/id8Ndc5tWuY/photo.jpg?sz=128", "display_name": "Rajkumar Ulaganadhan", "link": "https://stackoverflow.com/users/5954643/rajkumar-ulaganadhan"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1551210324, "post_id": 54892589, "comment_id": 96555095, "body": "In project model I am joining 3 tables. After running the queries it is taking too much time to display the data in my views"}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551210646, "post_id": 54892589, "comment_id": 96555225, "body": "Would you share us the code of <code>active_leads</code> ?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1551210685, "post_id": 54892589, "comment_id": 96555243, "body": "Is the problem with the query? Or with the rendering? In your title, you say &quot;it is taking too much time to get the records.&quot; This implies a query problem. In your comment you say, &quot;After running the queries it is taking to much time to display the data in my views.&quot; This implies a rendering problem. So, which is it?"}, {"owner": {"reputation": 628, "user_id": 5954643, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9tq2jIW1zsk/AAAAAAAAAAI/AAAAAAAABcY/id8Ndc5tWuY/photo.jpg?sz=128", "display_name": "Rajkumar Ulaganadhan", "link": "https://stackoverflow.com/users/5954643/rajkumar-ulaganadhan"}, "edited": false, "score": 0, "creation_date": 1551210946, "post_id": 54892589, "comment_id": 96555354, "body": "It is query problem only because of queries rendering is slow."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1551211039, "post_id": 54892589, "comment_id": 96555387, "body": "If you say so. Good luck with all of that."}, {"owner": {"reputation": 628, "user_id": 5954643, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9tq2jIW1zsk/AAAAAAAAAAI/AAAAAAAABcY/id8Ndc5tWuY/photo.jpg?sz=128", "display_name": "Rajkumar Ulaganadhan", "link": "https://stackoverflow.com/users/5954643/rajkumar-ulaganadhan"}, "edited": false, "score": 0, "creation_date": 1551211350, "post_id": 54892589, "comment_id": 96555508, "body": "In active_leads class methods I am adding joins(:leads). where(&quot;leads. active=?&quot;,filter_params)"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 2, "creation_date": 1551212318, "post_id": 54892589, "comment_id": 96555951, "body": "Please post the code of the scope in play, your view, your database structure including indexes and the log for one request to the application."}], "answers": [{"tags": [], "owner": {"reputation": 96, "user_id": 3815144, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000906350931/picture?type=large", "display_name": "Elayan Hamamrah", "link": "https://stackoverflow.com/users/3815144/elayan-hamamrah"}, "is_accepted": true, "score": 0, "last_activity_date": 1551218571, "creation_date": 1551218571, "answer_id": 54894873, "question_id": 54892589, "link": "https://stackoverflow.com/questions/54892589/combining-multiple-tables-in-rails-it-is-taking-too-much-time-to-get-the-records/54894873#54894873", "title": "Combining multiple tables in rails it is taking too much time to get the records? How to increase performance in rails?", "body": "<p>I would recommend you to make it as Scopes and cache it through Redis</p>\n"}], "owner": {"reputation": 628, "user_id": 5954643, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9tq2jIW1zsk/AAAAAAAAAAI/AAAAAAAABcY/id8Ndc5tWuY/photo.jpg?sz=128", "display_name": "Rajkumar Ulaganadhan", "link": "https://stackoverflow.com/users/5954643/rajkumar-ulaganadhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 54894873, "answer_count": 1, "score": 0, "last_activity_date": 1551218571, "creation_date": 1551208659, "last_edit_date": 1551210429, "question_id": 54892589, "link": "https://stackoverflow.com/questions/54892589/combining-multiple-tables-in-rails-it-is-taking-too-much-time-to-get-the-records", "title": "Combining multiple tables in rails it is taking too much time to get the records? How to increase performance in rails?", "body": "<p>In my model i am applying multiple methods and finally getting data as projects.</p>\n\n<pre><code>Project.active_leads(filter_params).city_id(filter_params).date_range(filter_params)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551210540, "post_id": 54892125, "comment_id": 96555184, "body": "The problem with your code is your code block is running in <code>ApplicationController</code> class context"}, {"owner": {"reputation": 23174, "user_id": 404, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0a99e26b3a51cd326e188a6a60de1eb6?s=128&d=identicon&r=PG", "display_name": "Chris Farmer", "link": "https://stackoverflow.com/users/404/chris-farmer"}, "reply_to_user": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551210723, "post_id": 54892125, "comment_id": 96555258, "body": "Hmm.  I don&#39;t understand.  I think I want it to be running in the <code>ApplicationController</code> context but <code>self</code> is an <code>OracleEnhancedAdapter</code> here inside the callback block."}], "answers": [{"comments": [{"owner": {"reputation": 23174, "user_id": 404, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0a99e26b3a51cd326e188a6a60de1eb6?s=128&d=identicon&r=PG", "display_name": "Chris Farmer", "link": "https://stackoverflow.com/users/404/chris-farmer"}, "edited": false, "score": 0, "creation_date": 1551213214, "post_id": 54893597, "comment_id": 96556406, "body": "Thanks. This makes sense. I had tried this in a before_action, and it seemed to work fine. But then I thought I should use the checkout callback to make sure that all connections in use from the pool had this sys_context applied. Is it really sufficient to just call execute like that, since this query will get executed against only one of the connections in the pool?"}, {"owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "reply_to_user": {"reputation": 23174, "user_id": 404, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0a99e26b3a51cd326e188a6a60de1eb6?s=128&d=identicon&r=PG", "display_name": "Chris Farmer", "link": "https://stackoverflow.com/users/404/chris-farmer"}, "edited": false, "score": 1, "creation_date": 1551213252, "post_id": 54893597, "comment_id": 96556423, "body": "Rails sticks with the one connection for the duration of the request, so yes."}, {"owner": {"reputation": 23174, "user_id": 404, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0a99e26b3a51cd326e188a6a60de1eb6?s=128&d=identicon&r=PG", "display_name": "Chris Farmer", "link": "https://stackoverflow.com/users/404/chris-farmer"}, "edited": false, "score": 1, "creation_date": 1551213301, "post_id": 54893597, "comment_id": 96556446, "body": "Excellent.  Thanks for the clarification!"}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 1, "creation_date": 1551216958, "post_id": 54893597, "comment_id": 96558057, "body": "I&#39;d just like to add that while &quot;normally&quot;-speaking, there is a unique thread (which means unique connection) per request in Rails, because Chris specifically asked &quot;make sure that all connections in use from the pool had this sys_context applied&quot;, then I am compelled to add a bit that it&#39;s only true insofar as in the execution flow of the request, it did not open up/ fork a new Thread. See my <a href=\"https://repl.it/@jrpolidario1/WheatStrikingBrowsers?language=rails&amp;folderId=\" rel=\"nofollow noreferrer\">repl code</a>, and see application_controller.rb, and then &quot;fork it&quot;, then click &quot;run&quot;, then refresh the page."}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 0, "creation_date": 1551217298, "post_id": 54893597, "comment_id": 96558223, "body": "^ You&#39;ll notice that the main thread is always the same <code>Connection</code> object, while inside the forked thread, it&#39;s a different <code>Connection</code> object. From what I observed and understood, each time you/Rails-internal accesses ActiveRecord/DB code, Rails first checks if the &quot;current executing&quot; thread already has a connection checked-out, and if not yet, then it checkouts a connection from the pool(or creates if all current available connections are in use if not yet max).This is why the &quot;forked thread&quot; has a different Connection object because there was no Connection check-outed yet for that Thread"}], "tags": [], "owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "is_accepted": true, "score": 1, "last_activity_date": 1551213013, "creation_date": 1551213013, "answer_id": 54893597, "question_id": 54892125, "link": "https://stackoverflow.com/questions/54892125/how-can-i-use-devise-methods-in-my-connectionadapter-callback/54893597#54893597", "title": "How can I use Devise methods in my ConnectionAdapter callback?", "body": "<p>You can't use the <code>checkout</code> callback, at the point that it's executed, it has no connection to the controller context.  The fact that you've defined it here in your <code>ApplicationController</code> is irrelevant to the context it's actually executed in.</p>\n\n<p>You will need to set the connection option in the <code>before_action</code> so you're running in the controller context.  Something like:</p>\n\n<pre><code>before_action :set_user_context\n\ndef set_user_context\n  if current_user\n    ApplicationRecord.connection.execute \"DBMS_SESSION.SET_CONTEXT('whatever', 'goes', 'here', '#{current_user.username}')\"\n  end\nend\n</code></pre>\n\n<p>...or something like that.  Note that you might want to add a <code>checkin</code> callback to clear the value when the connection is finished with.</p>\n\n<p>Btw, I answered a nearly identical question a few days ago: <a href=\"https://stackoverflow.com/a/54837596/152786\">https://stackoverflow.com/a/54837596/152786</a>  Different commands though, but might help.</p>\n"}], "owner": {"reputation": 23174, "user_id": 404, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/0a99e26b3a51cd326e188a6a60de1eb6?s=128&d=identicon&r=PG", "display_name": "Chris Farmer", "link": "https://stackoverflow.com/users/404/chris-farmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 54893597, "answer_count": 1, "score": 4, "last_activity_date": 1551213013, "creation_date": 1551206599, "question_id": 54892125, "link": "https://stackoverflow.com/questions/54892125/how-can-i-use-devise-methods-in-my-connectionadapter-callback", "title": "How can I use Devise methods in my ConnectionAdapter callback?", "body": "<p>I have a rails 5.1 app that's using Devise to handle authentication with my <code>User</code> model. This app has an Oracle database backend that requires setting a system context variable with the logged-in user prior to executing any queries, so I was hoping to do that in the <code>:checkout</code> callback for the ConnectionAdapter.</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  before_action :log_user\n\n  ActiveRecord::ConnectionAdapters::OracleEnhancedAdapter.set_callback :checkout, :after do\n\n    # Would like to get the logged-in user's username here so I can apply \n    # it to the oracle sys_context.\n\n    # The below throws \"undefined method 'user_signed_in?'\"\n    username = current_user.username if user_signed_in?\n\n  end\n\n  def log_user\n    # When in this method, user_signed_in? and current_user work fine.\n    puts \"User is #{current_user.username}\" if user_signed_in?\n  end\nend\n</code></pre>\n\n<p>The <code>user_signed_in?</code> method isn't found when run in the <code>:checkout</code> callback block, though it's generally available in the controller.  Why?</p>\n\n<p>Also, <code>current_user</code> within the block seems to evaluate to the <code>current_user</code> method defined within the ConnectionAdapter rather than the one defined by Devise. How can I get access to Devise's <code>current_user</code>?</p>\n\n<p>How can I use these Devise-provided methods from within this callback?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "google-cloud-platform"], "answers": [{"tags": [], "owner": {"reputation": 1760, "user_id": 191275, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/35dbc40f6770bd42064a6b9621536fe6?s=128&d=identicon&r=PG", "display_name": "Kunal Deo", "link": "https://stackoverflow.com/users/191275/kunal-deo"}, "is_accepted": false, "score": 0, "last_activity_date": 1613030274, "creation_date": 1613030274, "answer_id": 66150782, "question_id": 54890333, "link": "https://stackoverflow.com/questions/54890333/google-cloud-talent-solution-exception-googlecloudpermissiondeniederror/66150782#66150782", "title": "Google Cloud Talent Solution Exception: Google::Cloud::PermissionDeniedError", "body": "<p>You will need to explicitly connect the service account to the Talent Solution api and then use that service account key for the auth. See <a href=\"https://cloud.google.com/talent-solution/job-search/docs/before-you-begin\" rel=\"nofollow noreferrer\">here</a> for details.</p>\n<p><a href=\"https://i.stack.imgur.com/16h8O.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/16h8O.png\" alt=\"Service account connection\" /></a></p>\n"}], "owner": {"reputation": 11, "user_id": 11120574, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7wfKI7UP0dk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdsv4pmWL-OfUd9Uwv5-CVerw7LxQ/mo/photo.jpg?sz=128", "display_name": "Frank Tee", "link": "https://stackoverflow.com/users/11120574/frank-tee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1613030274, "creation_date": 1551199567, "question_id": 54890333, "link": "https://stackoverflow.com/questions/54890333/google-cloud-talent-solution-exception-googlecloudpermissiondeniederror", "title": "Google Cloud Talent Solution Exception: Google::Cloud::PermissionDeniedError", "body": "<p>Using Google Cloud Talent Solution (aka Google Cloud Job Discovery), I am getting the following stack trace even though all Google API credentials are in place and enabled. Error message seems to be generic (\"Permission denied\")and not sure what could be wrong. Any insight is much appreciated.</p>\n\n<p>====================================================================</p>\n\n<p>Error message\nGoogle::Cloud::PermissionDeniedError: 7:User not authorized to perform this action.</p>\n\n<p>Sample stack trace (hide Rails)\n\u2026cloud-pubsub-0.31.0/lib/google/cloud/pubsub/\nservice.rb: 459:in <code>rescue in execute'\n\u2026cloud-pubsub-0.31.0/lib/google/cloud/pubsub/\nservice.rb: 455:in</code>execute'\n\u2026cloud-pubsub-0.31.0/lib/google/cloud/pubsub/\nservice.rb: 150:in <code>publish'\n\u2026e-cloud-pubsub-0.31.0/lib/google/cloud/pubsub/\ntopic.rb: 573:in</code>publish_batch_messages'\n\u2026e-cloud-pubsub-0.31.0/lib/google/cloud/pubsub/\ntopic.rb: 314:in <code>publish'\n\u2026emetry_job_google/lib/google_jobs/\ngoogle_jobs_event.rb:  22:in</code>publish_event'\n\u2026metry_careersites/app/mixins/\njob_search_event_mixin.rb:  88:in <code>record_google_search_impressions'\n\u2026metry_careersites/app/mixins/\njob_search_event_mixin.rb:  17:in</code>event_job_search_impressions'\n\u2026ersites/app/controllers/public_site/\njobs_controller.rb:  59:in <code>block (2 levels) in search'\n\u2026k-5.2.1.1/lib/action_controller/metal/\nmime_responds.rb: 203:in</code>respond_to'\n\u2026ersites/app/controllers/public_site/\njobs_controller.rb:  53:in <code>search'\n\u20261/lib/action_controller/metal/\nbasic_implicit_render.rb:   6:in</code>send_action'\n\u2026ems/actionpack-5.2.1.1/lib/abstract_controller/\nbase.rb: 194:in <code>process_action'\n\u2026npack-5.2.1.1/lib/action_controller/metal/\nrendering.rb:  30:in</code>process_action'\n\u2026ctionpack-5.2.1.1/lib/abstract_controller/\ncallbacks.rb:  42:in <code>block in process_action'\n\u2026/activesupport-5.2.1.1/lib/active_support/\ncallbacks.rb: 109:in</code>block in run_callbacks'\n\u2026try_careersites/app/controllers/\neventing_controller.rb:  23:in <code>block in append_tracking_info_to_rails_log'\n\u2026vesupport-5.2.1.1/lib/active_support/\ntagged_logging.rb:  71:in</code>block in tagged'\n\u2026vesupport-5.2.1.1/lib/active_support/\ntagged_logging.rb:  28:in <code>tagged'\n\u2026vesupport-5.2.1.1/lib/active_support/\ntagged_logging.rb:  71:in</code>tagged'\n\u2026try_careersites/app/controllers/\neventing_controller.rb:  22:in <code>append_tracking_info_to_rails_log'\n\u2026/activesupport-5.2.1.1/lib/active_support/\ncallbacks.rb: 118:in</code>block in run_callbacks'\n\u2026/activesupport-5.2.1.1/lib/active_support/\ncallbacks.rb: 136:in <code>run_callbacks'\n\u2026ctionpack-5.2.1.1/lib/abstract_controller/\ncallbacks.rb:  41:in</code>process_action'\n\u2026tionpack-5.2.1.1/lib/action_controller/metal/\nrescue.rb:  22:in <code>process_action'\n&lt;truncated 60 additional frames&gt;\n\u20262.5.0/gems/rack-timeout-0.5.1/lib/rack/timeout/\ncore.rb: 123:in</code>block in call'\n\u2026rack-timeout-0.5.1/lib/rack/timeout/support/\ntimeout.rb:  19:in <code>timeout'\n\u20262.5.0/gems/rack-timeout-0.5.1/lib/rack/timeout/\ncore.rb: 122:in</code>call'\n\u2026k-5.2.1.1/lib/action_dispatch/middleware/\nrequest_id.rb:  27:in <code>call'\n\u2026ruby/2.5.0/gems/rack-2.0.6/lib/rack/\nmethod_override.rb:  22:in</code>call'\n\u2026/vendor/ruby/2.5.0/gems/rack-2.0.6/lib/rack/\nruntime.rb:  22:in <code>call'\n\u2026ctive_support/cache/strategy/\nlocal_cache_middleware.rb:  29:in</code>call'\n\u2026ack-5.2.1.1/lib/action_dispatch/middleware/\nexecutor.rb:  14:in <code>call'\n\u2026npack-5.2.1.1/lib/action_dispatch/middleware/\nstatic.rb: 127:in</code>call'\n\u2026vendor/ruby/2.5.0/gems/rack-2.0.6/lib/rack/\nsendfile.rb: 111:in <code>call'\n\u2026r/ruby/2.5.0/gems/railties-5.2.1.1/lib/rails/\nengine.rb: 524:in</code>call'\n\u2026/ruby/2.5.0/gems/puma-3.12.0/lib/puma/\nconfiguration.rb: 225:in <code>call'\n\u2026/vendor/ruby/2.5.0/gems/puma-3.12.0/lib/puma/\nserver.rb: 658:in</code>handle_request'\n\u2026/vendor/ruby/2.5.0/gems/puma-3.12.0/lib/puma/\nserver.rb: 472:in <code>process_client'\n\u2026/vendor/ruby/2.5.0/gems/puma-3.12.0/lib/puma/\nserver.rb: 332:in</code>block in run'\n\u2026or/ruby/2.5.0/gems/puma-3.12.0/lib/puma/\nthread_pool.rb: 133:in `block in spawn_thread</p>\n"}, {"tags": ["ruby", "constants", "private", "encapsulation"], "comments": [{"owner": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "edited": false, "score": 0, "creation_date": 1551196720, "post_id": 54889436, "comment_id": 96548050, "body": "Why a private constant? Ask the developer. Why a method that returns this constant? So that you can override it."}, {"owner": {"reputation": 23, "user_id": 11120291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffdf7df731c9ef20809da155c5e87157?s=128&d=identicon&r=PG&f=1", "display_name": "DumbQuestions", "link": "https://stackoverflow.com/users/11120291/dumbquestions"}, "reply_to_user": {"reputation": 2072, "user_id": 853065, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aa14452cb8fbbc5b22c10c567ce710d8?s=128&d=identicon&r=PG", "display_name": "yoones", "link": "https://stackoverflow.com/users/853065/yoones"}, "edited": false, "score": 0, "creation_date": 1551197202, "post_id": 54889436, "comment_id": 96548328, "body": "I can understand a public encapsulation... but a private encapsulation doesn&#39;t make sense to me. Especially if it&#39;s just returning the constant"}], "answers": [{"comments": [{"owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "edited": false, "score": 1, "creation_date": 1551198463, "post_id": 54889855, "comment_id": 96549044, "body": "It is also worth noting that the private constant concept also extends to classes and modules, not just data. Keeping these encapsulated as private protects the implementation from external prying and frees the design to be able to evolve without breaking client code."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1551197893, "creation_date": 1551197893, "answer_id": 54889855, "question_id": 54889436, "link": "https://stackoverflow.com/questions/54889436/why-would-you-private-encapsulate-a-private-constant/54889855#54889855", "title": "Why would you private encapsulate a private constant?", "body": "<p>The reason for <code>private_constant</code> is to prevent other code from accessing the constant directly.</p>\n\n<p><code>some_constant</code> might return the constant today, but it's not obligated to do that. If programming-by-contract then it's obligated to return a hash in that form, the origin of which is irrelevant.</p>\n\n<p>For example, you have that code today, but what about tomorrow it evolves to:</p>\n\n<pre><code>class Foo &lt; Bar\n  SM_CONSTANT = {\n    a: { name: 'A', priority: 2 },\n    b: { name: 'B', priority: -1 }\n  }.freeze\n  private_constant :SM_CONSTANT\n\nprivate\n  def some_constant\n    SM_CONSTANT.map { |k,o| [ k.to_s, o[:name] ] }.to_h\n  end\nend\n</code></pre>\n\n<p>Where the internals have completely changed but to outside code nothing has, the same calls produce the same results. This is why encapsulation is important. It gives you the freedom to iterate and rework code within a particular context without concerning yourself about breaking other things.</p>\n\n<p>If code accessed <code>SM_CONSTANT</code> directly it'd have to be re-written to accept this new structure.</p>\n"}], "owner": {"reputation": 23, "user_id": 11120291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffdf7df731c9ef20809da155c5e87157?s=128&d=identicon&r=PG&f=1", "display_name": "DumbQuestions", "link": "https://stackoverflow.com/users/11120291/dumbquestions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 1, "accepted_answer_id": 54889855, "answer_count": 1, "score": 2, "last_activity_date": 1551333393, "creation_date": 1551196500, "last_edit_date": 1551333393, "question_id": 54889436, "link": "https://stackoverflow.com/questions/54889436/why-would-you-private-encapsulate-a-private-constant", "title": "Why would you private encapsulate a private constant?", "body": "<p>I ran into this code:</p>\n\n<pre><code>class Foo &lt; Bar\n  SM_CONSTANT = { 'a' =&gt; 'A', 'b' =&gt; 'B' }.freeze\n  private_constant :SM_CONSTANT\n\n  private\n\n  def some_constant\n    SM_CONSTANT\n  end\n</code></pre>\n\n<p>I cannot figure out the purpose of <strong>encapsulating a private constant</strong> in a <strong>private method</strong>. Why would I do this?</p>\n"}, {"tags": ["ruby", "ocra"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 7815935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b1c0097c04ceebafaaccb7f755451dd?s=128&d=identicon&r=PG&f=1", "display_name": "seshaddri", "link": "https://stackoverflow.com/users/7815935/seshaddri"}, "edited": false, "score": 0, "creation_date": 1551199331, "post_id": 54889824, "comment_id": 96549542, "body": "Its local library part of common module. I have enclosed code snippet for your reference in the initial post."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 5, "user_id": 7815935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b1c0097c04ceebafaaccb7f755451dd?s=128&d=identicon&r=PG&f=1", "display_name": "seshaddri", "link": "https://stackoverflow.com/users/7815935/seshaddri"}, "edited": false, "score": 0, "creation_date": 1551201044, "post_id": 54889824, "comment_id": 96550494, "body": "I&#39;ve updated the answer answer. I guess you aren&#39;t using bundler. And your project directory isn&#39;t added to <code>$LOAD_PATH</code>."}, {"owner": {"reputation": 5, "user_id": 7815935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b1c0097c04ceebafaaccb7f755451dd?s=128&d=identicon&r=PG&f=1", "display_name": "seshaddri", "link": "https://stackoverflow.com/users/7815935/seshaddri"}, "edited": false, "score": 0, "creation_date": 1551215447, "post_id": 54889824, "comment_id": 96557421, "body": "Thanks it worked, what command should be used if the file in not same folder."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 5, "user_id": 7815935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b1c0097c04ceebafaaccb7f755451dd?s=128&d=identicon&r=PG&f=1", "display_name": "seshaddri", "link": "https://stackoverflow.com/users/7815935/seshaddri"}, "edited": false, "score": 0, "creation_date": 1551217023, "post_id": 54889824, "comment_id": 96558083, "body": "Just provide the relative path. Examples could be: <code>require_relative &#39;some_folder&#47;another_folder&#47;common_element&#39;</code> or <code>require_relative &#39;..&#47;another_project&#47;common_element&#39;</code> (<code>..</code> goes up one directory). If the file path is not relative but absolute<code>require &#39;c:&#47;full&#47;path&#47;to&#47;file&#39;</code> should work."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 5, "user_id": 7815935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b1c0097c04ceebafaaccb7f755451dd?s=128&d=identicon&r=PG&f=1", "display_name": "seshaddri", "link": "https://stackoverflow.com/users/7815935/seshaddri"}, "edited": false, "score": 0, "creation_date": 1551217236, "post_id": 54889824, "comment_id": 96558198, "body": "Alternatively you could consider packaging the common elements as an gem. After installation you can simply <code>require &#39;common_element&#39;</code> since gems should be added to the <code>$LOAD_PATH</code>."}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": true, "score": 0, "last_activity_date": 1551217370, "last_edit_date": 1551217370, "creation_date": 1551197789, "answer_id": 54889824, "question_id": 54889373, "link": "https://stackoverflow.com/questions/54889373/ocra-uninitialized-constant-commonelement-nameerror/54889824#54889824", "title": "ocra uninitialized constant CommonElement (NameError)", "body": "<p>The error you're getting says it all:</p>\n\n<blockquote>\n  <p>uninitialized constant CommonElement (NameError)</p>\n</blockquote>\n\n<p>This means that <code>CommonElement</code> is not defined yet. Try requiring it before defining the inheritance:</p>\n\n<pre><code>require 'selenium-webdriver'\nrequire 'page-object'\n\nrequire_relative 'common_element'\n# ^ new assuming CommonElement is present in ./common_element.rb\n\nclass SubjectSearchPage &lt; CommonElement\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 7815935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b1c0097c04ceebafaaccb7f755451dd?s=128&d=identicon&r=PG&f=1", "display_name": "seshaddri", "link": "https://stackoverflow.com/users/7815935/seshaddri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 54889824, "answer_count": 1, "score": 0, "last_activity_date": 1551217370, "creation_date": 1551196302, "last_edit_date": 1551197501, "question_id": 54889373, "link": "https://stackoverflow.com/questions/54889373/ocra-uninitialized-constant-commonelement-nameerror", "title": "ocra uninitialized constant CommonElement (NameError)", "body": "<pre><code>require 'selenium-webdriver'\nrequire 'page-object'\n\nclass SubjectSearchPage  &lt; CommonElement\n  include PageObject\n\n  text_field(:ssnField, :id =&gt; \"SSN\")\n  button(:searchBtn, :css =&gt; 'button[data-test-id=\"20180820140732083632904\"]')\n  h2(:resultsHeaderTitle, :css =&gt; 'div[data-test-id=\"201808231334560745670_header\"] h2.header-title')\n  elements(:resultRows, :css =&gt; '#bodyTbl_right &gt; tbody &gt; tr')\n  span(:result, :css =&gt; 'span[data-test-id=\"2016072109335505834280\"]')\n\nend\n</code></pre>\n\n<p></p>\n\n<pre><code>require 'selenium-webdriver'\nrequire 'page-object'\n\nclass CommonElement\n  include PageObject\n\n  h2(:headerTitle, :css =&gt; 'h2')\n  element(:caseAppLabel, :css =&gt; '.content-item.content-label.item-2.remove-top-spacing.remove-bottom-spacing.flex.flex-row.application_name_dataLabelWrite.flex-grow.dataLabelWrite.application_name_dataLabelWrite')\n  link(:casesLeftMenu, :css =&gt; '.menu-item-anchor.menu-item-expand')\n  link(:page_title, :css =&gt; '.Application_name')\n  link(:footer_nav, :css =&gt; '.Footer_nav')\n  link(:orgPageTitle, :css =&gt; '.content-item.content-label.item-2.flex.flex-row.heading_1_dataLabelWrite.dataLabelWrite.heading_1_dataLabelWrite')\n\n  link(:searchField, :css =&gt; '#pySearchText')\n  #Left Nav\n\n  link(:manageSubjectsLink, :css =&gt; \"li[title='Manage Subjects'] a\")\n  link(:manageOrgLink, :css =&gt; \"li[title='Manage Org'] a\") #dev version\n  # link(:settingsLink, :css =&gt; \"li[title='Settings'] a\")\n  link(:configMgmtLink, :css =&gt; \"li[title='Config Management'] a\")\n  link(:systemSettingsLink, :css =&gt; \"li[title='System Settings'] a\")\n\n  #Modal\n\n  span(:modalTitle, :id =&gt;\"modaldialog_hd_title\")\nend\n</code></pre>\n\n<p>I have displayed both classes when try to convert using OCRA its throwing error. Any help ?</p>\n\n<blockquote>\n<pre><code>c:/Users/seshaddri/git/pega-functional-tests/selenium-ruby/pages/subject_mgmt/subject_search_page.rb:4:in `&lt;top (required)&gt;': uninitialized constant CommonElement (NameError)\n        from C:/Bitnami/rubystack-2.3.8-1/ruby/lib/ruby/gems/2.3.0/gems/ocra-1.3.10/bin/ocra:1211:in `load'\n        from C:/Bitnami/rubystack-2.3.8-1/ruby/lib/ruby/gems/2.3.0/gems/ocra-1.3.10/bin/ocra:1211:in `&lt;top (required)&gt;'\n        from C:/Bitnami/rubystack-2.3.8-1/ruby/bin/ocra:23:in `load'\n        from C:/Bitnami/rubystack-2.3.8-1/ruby/bin/ocra:23:in `&lt;main&gt;'\n</code></pre>\n</blockquote>\n"}, {"tags": ["ruby", "paw-app"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1551198115, "post_id": 54889021, "comment_id": 96548846, "body": "What&#39;s so hard about <code>JSON.dump</code> and <code>JSON.load</code>? Ruby hash notation is not something Paw accepts, but JSON is. If you&#39;re really bent out of shape by this, why not <a href=\"https://paw.cloud/extensions/\" rel=\"nofollow noreferrer\">write an extension</a>?"}, {"owner": {"reputation": 3586, "user_id": 34386, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b785be6eaba5a08149efee4c54376d78?s=128&d=identicon&r=PG", "display_name": "jxpx777", "link": "https://stackoverflow.com/users/34386/jxpx777"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1551211392, "post_id": 54889021, "comment_id": 96555529, "body": "I didn&#39;t say it was hard; I said it shouldn&#39;t be necessary. I don&#39;t want my test suite, for instance, having to repeatedly <code>JSON.load</code>. And I definitely don&#39;t want <code>JSON.load</code> in my production code and converting between the two is a pain in its current form.  I&#39;ll look at possibly creating a code generator extension, but that still doesn&#39;t help with bringing Hashes from Ruby into Paw for testing."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1551211570, "post_id": 54889021, "comment_id": 96555602, "body": "Why not dump out the results from Paw in to plain old <code>.json</code> files and put that in your application if necessary? Store data as data, code as code. Storing data as code makes for the sort of mess you&#39;re getting into where you need to convert it and so on."}], "owner": {"reputation": 3586, "user_id": 34386, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b785be6eaba5a08149efee4c54376d78?s=128&d=identicon&r=PG", "display_name": "jxpx777", "link": "https://stackoverflow.com/users/34386/jxpx777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551195201, "creation_date": 1551195201, "question_id": 54889021, "link": "https://stackoverflow.com/questions/54889021/paw-possible-to-copy-paste-data-from-hash-dictionary-source-in-target-language", "title": "Paw: Possible to copy/paste data from Hash/Dictionary source in target language?", "body": "<p>I'm using Paw to integrate with an API and it's a great tool, but the codebase I'm working in has lots of data in Ruby <code>Hash</code>es already that I would like to bring into Paw for testing. Moreover, I would like to be able to copy the data out of a Paw response for use in Ruby code rather than having to copy JSON and either store it as a String and parse it in my code or manually convert it to a native dictionary data structure. Is this possible?</p>\n"}, {"tags": ["ruby", "rubygems", "homebrew"], "answers": [{"comments": [{"owner": {"reputation": 1237, "user_id": 1372145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c310f13c6b6b023eda57f1d18015f2?s=128&d=identicon&r=PG", "display_name": "BigHeadCreations", "link": "https://stackoverflow.com/users/1372145/bigheadcreations"}, "edited": false, "score": 32, "creation_date": 1556118236, "post_id": 54913258, "comment_id": 98330946, "body": "@Mave for me happened after I ran <code>brew cleanup</code>"}, {"owner": {"reputation": 1965, "user_id": 4398985, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/e6HOs.gif?s=128&g=1", "display_name": "JumpMan", "link": "https://stackoverflow.com/users/4398985/jumpman"}, "reply_to_user": {"reputation": 1424, "user_id": 985881, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/f3b74e47eeecd6a7cf907ebe2076a48c?s=128&d=identicon&r=PG", "display_name": "crisscross", "link": "https://stackoverflow.com/users/985881/crisscross"}, "edited": false, "score": 1, "creation_date": 1556580262, "post_id": 54913258, "comment_id": 98478801, "body": "@crisscross please add your command as an answer, it is only thing which worked for me, thank you :)"}, {"owner": {"reputation": 4478, "user_id": 645491, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/833761cd202c03e01ac63c55021a4eec?s=128&d=identicon&r=PG", "display_name": "TrinitronX", "link": "https://stackoverflow.com/users/645491/trinitronx"}, "reply_to_user": {"reputation": 1237, "user_id": 1372145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c310f13c6b6b023eda57f1d18015f2?s=128&d=identicon&r=PG", "display_name": "BigHeadCreations", "link": "https://stackoverflow.com/users/1372145/bigheadcreations"}, "edited": false, "score": 0, "creation_date": 1564255721, "post_id": 54913258, "comment_id": 100973227, "body": "@BigHeadCreations , @Mave: I was able to confirm that this happened directly after a <code>brew cleanup</code>.  Just prior to this, <code>brew update</code> said gave updated commit: <code>6db1c7383</code>.  <code>brew update-reset</code> fixed the issue."}, {"owner": {"reputation": 9353, "user_id": 1936697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aAPjx.jpg?s=128&g=1", "display_name": "Adiyat Mubarak", "link": "https://stackoverflow.com/users/1936697/adiyat-mubarak"}, "edited": false, "score": 1, "creation_date": 1564930779, "post_id": 54913258, "comment_id": 101182916, "body": "Thanks!! I solved my issue using <code>brew update-reset</code>"}, {"owner": {"reputation": 1066, "user_id": 726819, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/56f7ca7886e51e4a581c5bdd0759f407?s=128&d=identicon&r=PG", "display_name": "Wen", "link": "https://stackoverflow.com/users/726819/wen"}, "edited": false, "score": 1, "creation_date": 1572578556, "post_id": 54913258, "comment_id": 103611914, "body": "Works for macOS 10.15"}, {"owner": {"reputation": 2574, "user_id": 328555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc1cd665ed418c8fe1a9a7f4d1b459ae?s=128&d=identicon&r=PG", "display_name": "martineno", "link": "https://stackoverflow.com/users/328555/martineno"}, "edited": false, "score": 0, "creation_date": 1577398228, "post_id": 54913258, "comment_id": 105161852, "body": "I encountered this after running <code>brew cleanup</code> after upgrade to macOS 10.15.2. The answer above fixed it."}, {"owner": {"reputation": 461, "user_id": 1239295, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IQpHX.jpg?s=128&g=1", "display_name": "Bruce Sun", "link": "https://stackoverflow.com/users/1239295/bruce-sun"}, "edited": false, "score": 0, "creation_date": 1580368733, "post_id": 54913258, "comment_id": 106076263, "body": "What does <code>brew style</code> do?"}, {"owner": {"reputation": 10183, "user_id": 1292061, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/afD1k.jpg?s=128&g=1", "display_name": "ravron", "link": "https://stackoverflow.com/users/1292061/ravron"}, "reply_to_user": {"reputation": 461, "user_id": 1239295, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IQpHX.jpg?s=128&g=1", "display_name": "Bruce Sun", "link": "https://stackoverflow.com/users/1239295/bruce-sun"}, "edited": false, "score": 0, "creation_date": 1580691855, "post_id": 54913258, "comment_id": 106168835, "body": "@BruceSun well the <a href=\"https://docs.brew.sh/Manpage\" rel=\"nofollow noreferrer\">manpage</a> says <code>style</code> is used to &quot;check formulae or files for conformance to Homebrew style guidelines.&quot; Not sure why it helps in this situation though."}], "tags": [], "owner": {"reputation": 2356, "user_id": 618088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sVeA2.jpg?s=128&g=1", "display_name": "Corn&#233; Verbruggen", "link": "https://stackoverflow.com/users/618088/corn%c3%a9-verbruggen"}, "is_accepted": true, "score": 227, "last_activity_date": 1556673823, "last_edit_date": 1556673823, "creation_date": 1551296335, "answer_id": 54913258, "question_id": 54888582, "link": "https://stackoverflow.com/questions/54888582/ruby-cannot-load-such-file-active-support-core-ext-object-blank/54913258#54913258", "title": "Ruby cannot load such file - active_support/core_ext/object/blank", "body": "<p>Running <code>brew style</code> fixed this issue for me.</p>\n\n<hr>\n\n<p><strong>Update</strong>  </p>\n\n<p>As mentioned in the comments, for some people the solution is:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>brew update-reset\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1424, "user_id": 985881, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/f3b74e47eeecd6a7cf907ebe2076a48c?s=128&d=identicon&r=PG", "display_name": "crisscross", "link": "https://stackoverflow.com/users/985881/crisscross"}, "is_accepted": false, "score": 44, "last_activity_date": 1556697485, "last_edit_date": 1556697485, "creation_date": 1556656119, "answer_id": 55928245, "question_id": 54888582, "link": "https://stackoverflow.com/questions/54888582/ruby-cannot-load-such-file-active-support-core-ext-object-blank/55928245#55928245", "title": "Ruby cannot load such file - active_support/core_ext/object/blank", "body": "<p>Had the same problem. I had to run <code>brew update-reset</code> to fix it.</p>\n"}, {"tags": [], "owner": {"reputation": 461, "user_id": 1239295, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IQpHX.jpg?s=128&g=1", "display_name": "Bruce Sun", "link": "https://stackoverflow.com/users/1239295/bruce-sun"}, "is_accepted": false, "score": 0, "last_activity_date": 1580872781, "creation_date": 1580872781, "answer_id": 60068563, "question_id": 54888582, "link": "https://stackoverflow.com/questions/54888582/ruby-cannot-load-such-file-active-support-core-ext-object-blank/60068563#60068563", "title": "Ruby cannot load such file - active_support/core_ext/object/blank", "body": "<p>In my case, I have to force homebrew/linuxbrew to use its own portable-ruby to fix it.</p>\n\n<p>I am running ArchLinux with ruby 2.7.0 installed, after I switch to homebrew's portable-ruby by <code>export HOMEBREW_FORCE_VENDOR_RUBY=1</code> as described in the <a href=\"https://github.com/Homebrew/brew/blob/master/docs/Manpage.md\" rel=\"nofollow noreferrer\">manpage</a> and issue <code>brew update</code>, homebrew automatically downloads portable-ruby 2.6.3, and everything's back to normal.</p>\n\n<p>I think the root cause might be homebrew's incompatible with a higher version of ruby.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 14884055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaa56be70af03ca1a6053af17b83f507?s=128&d=identicon&r=PG&f=1", "display_name": "Binny B", "link": "https://stackoverflow.com/users/14884055/binny-b"}, "is_accepted": false, "score": 1, "last_activity_date": 1608820082, "creation_date": 1608820082, "answer_id": 65439620, "question_id": 54888582, "link": "https://stackoverflow.com/questions/54888582/ruby-cannot-load-such-file-active-support-core-ext-object-blank/65439620#65439620", "title": "Ruby cannot load such file - active_support/core_ext/object/blank", "body": "<p>I face the 'sunspot_rails-2.1.0' issue while upgrade the ruby version ruby 2.2 to ruby 2.5 for rails 4.2 and here I would like to share with you which has worked for me.</p>\n<p>&quot;LoadError: no such file to load -- <strong>active_support/core_ext/object/to_json</strong>&quot;</p>\n<p><strong>Refrence</strong>: <a href=\"https://github.com/sunspot/sunspot/pull/555/files\" rel=\"nofollow noreferrer\">https://github.com/sunspot/sunspot/pull/555/files</a></p>\n"}], "owner": {"reputation": 2007, "user_id": 2209904, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/oMlqY.jpg?s=128&g=1", "display_name": "JudyJiang", "link": "https://stackoverflow.com/users/2209904/judyjiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18952, "favorite_count": 19, "accepted_answer_id": 54913258, "answer_count": 4, "score": 94, "last_activity_date": 1608820082, "creation_date": 1551193837, "last_edit_date": 1551207479, "question_id": 54888582, "link": "https://stackoverflow.com/questions/54888582/ruby-cannot-load-such-file-active-support-core-ext-object-blank", "title": "Ruby cannot load such file - active_support/core_ext/object/blank", "body": "<p>I was trying to run <code>brew doctor</code> but system popped up error of</p>\n\n<blockquote>\n  <p>/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in\n  `require': cannot load such file --\n  active_support/core_ext/object/blank (LoadError)</p>\n</blockquote>\n\n<p>Searched online and another post suggested to just \"gem install activesupport\" but then I ran into error of:</p>\n\n<pre><code>ERROR:  Error installing activesupport:\n    i18n requires Ruby version &gt;= 2.3.0.\n</code></pre>\n\n<p>I also tried to rvm install ruby-2.3.0 but the same error popped again</p>\n\n<pre><code>[2019-02-26 10:07:41] requirements_osx_brew_libs_install\nrequirements_osx_brew_libs_install ()  { \n    brew install \"$@\" --force || { \n        \\typeset ret=$?;\n        requirements_osx_brew_libs_error \"installation\";\n        return $ret\n    } } current path: /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib\nPATH=/Users/{user_name}/.aw/pex_resources/scripts/binaries:/usr/local/sbin:/Users/fengjiao/.rbenv/shims:/Users/{user_name}/.nvm/v0.10.32/bin:/Users/fengjiao/bin:/usr/local/sbin:/usr/local/bin:/Users/{user_name}/.rbenv/shims:/Users/{user_name}/.nvm/v0.10.32/bin:/Users/{user_name}/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/munki:/opt/X11/bin:/Users/fengjiao/gocode/bin:/Users/{user_name}/.rvm/bin\ncommand(10): requirements_osx_brew_libs_install autoconf automake\nlibtool pkg-config coreutils libyaml readline libksba openssl@1.1\n++ brew install autoconf automake libtool pkg-config coreutils libyaml readline libksba openssl@1.1 --force\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in\n`require': cannot load such file --\nactive_support/core_ext/object/blank (LoadError)    from\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in\n`require'   from /usr/local/Homebrew/Library/Homebrew/global.rb:10:in\n`&lt;top (required)&gt;'  from\n/usr/local/Homebrew/Library/Homebrew/brew.rb:21:in `require_relative'\n    from /usr/local/Homebrew/Library/Homebrew/brew.rb:21:in `&lt;main&gt;'\n++ typeset ret=1\n++ requirements_osx_brew_libs_error installation\n++ rvm_warn 'There were package installation errors, make sure to read the log.\n\nTry `brew tap --repair` and make sure `brew doctor` looks reasonable.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 10980049, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217949112697803/picture?type=large", "display_name": "Caroline Maz&#233;", "link": "https://stackoverflow.com/users/10980049/caroline-maz%c3%a9"}, "edited": false, "score": 0, "creation_date": 1551196539, "post_id": 54889263, "comment_id": 96547941, "body": "Thank you in this file rb:7 I have <code>Bundler.require(*Rails.groups)</code>, i still don&#39;t know the issue..."}, {"owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "reply_to_user": {"reputation": 93, "user_id": 10980049, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217949112697803/picture?type=large", "display_name": "Caroline Maz&#233;", "link": "https://stackoverflow.com/users/10980049/caroline-maz%c3%a9"}, "edited": false, "score": 0, "creation_date": 1551196869, "post_id": 54889263, "comment_id": 96548141, "body": "Do you have <code>gem &#39;sassc-rails&#39;</code> in your gemfile? Can you put it before <code>gem &#39;rails&#39;</code> then do <code>bundle install</code> and try to run the app server again?"}, {"owner": {"reputation": 93, "user_id": 10980049, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217949112697803/picture?type=large", "display_name": "Caroline Maz&#233;", "link": "https://stackoverflow.com/users/10980049/caroline-maz%c3%a9"}, "edited": false, "score": 0, "creation_date": 1551197026, "post_id": 54889263, "comment_id": 96548227, "body": "I tried to do it: put gem &#39;sassc-rails&#39; before gem &#39;rails&#39; and do bundle install but i still have the same issue..."}, {"owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "reply_to_user": {"reputation": 93, "user_id": 10980049, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217949112697803/picture?type=large", "display_name": "Caroline Maz&#233;", "link": "https://stackoverflow.com/users/10980049/caroline-maz%c3%a9"}, "edited": false, "score": 0, "creation_date": 1551197523, "post_id": 54889263, "comment_id": 96548515, "body": "Thanks! Can you update your question and add your gemfile to it?"}, {"owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "reply_to_user": {"reputation": 93, "user_id": 10980049, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217949112697803/picture?type=large", "display_name": "Caroline Maz&#233;", "link": "https://stackoverflow.com/users/10980049/caroline-maz%c3%a9"}, "edited": false, "score": 0, "creation_date": 1551197675, "post_id": 54889263, "comment_id": 96548601, "body": "Also if you have <code>gem &#39;sassc-rails&#39;</code> in <code>group :assets</code> try to remove it out of there and try to <code>bundle install</code> and run the server again"}, {"owner": {"reputation": 93, "user_id": 10980049, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217949112697803/picture?type=large", "display_name": "Caroline Maz&#233;", "link": "https://stackoverflow.com/users/10980049/caroline-maz%c3%a9"}, "edited": false, "score": 0, "creation_date": 1551197799, "post_id": 54889263, "comment_id": 96548681, "body": "I put my gemfile but i don&#39;t have group:assets"}, {"owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "reply_to_user": {"reputation": 93, "user_id": 10980049, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217949112697803/picture?type=large", "display_name": "Caroline Maz&#233;", "link": "https://stackoverflow.com/users/10980049/caroline-maz%c3%a9"}, "edited": false, "score": 0, "creation_date": 1551197890, "post_id": 54889263, "comment_id": 96548734, "body": "Thanks for that! Can you put <code>gem &#39;sassc-rails&#39;</code> on the top of gemfile just for it to be before <code>gem &#39;rails&#39;, &#39;5.2.1&#39;</code> ? then try to <code>bundle install</code> and see if the server gives the same error or not?"}, {"owner": {"reputation": 93, "user_id": 10980049, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217949112697803/picture?type=large", "display_name": "Caroline Maz&#233;", "link": "https://stackoverflow.com/users/10980049/caroline-maz%c3%a9"}, "edited": false, "score": 0, "creation_date": 1551198259, "post_id": 54889263, "comment_id": 96548918, "body": "still the same issue when i put gem &#39;sassc-rails&#39; before &#39;rails&#39;, &#39;5.2.1&#39; then bundle install and &#39;rails s&#39;"}, {"owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "reply_to_user": {"reputation": 93, "user_id": 10980049, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217949112697803/picture?type=large", "display_name": "Caroline Maz&#233;", "link": "https://stackoverflow.com/users/10980049/caroline-maz%c3%a9"}, "edited": false, "score": 0, "creation_date": 1551198642, "post_id": 54889263, "comment_id": 96549146, "body": "Sorry but can you update your question once again posting your <code>application.rb</code> and <code>bin&#47;rails</code> ?"}, {"owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "reply_to_user": {"reputation": 93, "user_id": 10980049, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217949112697803/picture?type=large", "display_name": "Caroline Maz&#233;", "link": "https://stackoverflow.com/users/10980049/caroline-maz%c3%a9"}, "edited": false, "score": 0, "creation_date": 1551198924, "post_id": 54889263, "comment_id": 96549307, "body": "Also can you try to go to your project directory, then go to <code>tmp&#47;cache</code> and if you found <code>bootsnap-load-path-cache</code> and <code>bootsnap-compile-cache</code> can you remove them?"}, {"owner": {"reputation": 93, "user_id": 10980049, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217949112697803/picture?type=large", "display_name": "Caroline Maz&#233;", "link": "https://stackoverflow.com/users/10980049/caroline-maz%c3%a9"}, "edited": false, "score": 0, "creation_date": 1551199426, "post_id": 54889263, "comment_id": 96549601, "body": "nothing happen when i remove the files... still the same issue when i try rails s"}, {"owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "reply_to_user": {"reputation": 93, "user_id": 10980049, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217949112697803/picture?type=large", "display_name": "Caroline Maz&#233;", "link": "https://stackoverflow.com/users/10980049/caroline-maz%c3%a9"}, "edited": false, "score": 0, "creation_date": 1551201801, "post_id": 54889263, "comment_id": 96550905, "body": "Thanks Caroline! Can you not only delete the files but the whole directory which they were? Also can you try to do <code>bundle update bootsnap</code> ?"}, {"owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "reply_to_user": {"reputation": 93, "user_id": 10980049, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217949112697803/picture?type=large", "display_name": "Caroline Maz&#233;", "link": "https://stackoverflow.com/users/10980049/caroline-maz%c3%a9"}, "edited": false, "score": 0, "creation_date": 1551201916, "post_id": 54889263, "comment_id": 96550972, "body": "Also can you share your <code>boot.rb</code> file?"}, {"owner": {"reputation": 93, "user_id": 10980049, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217949112697803/picture?type=large", "display_name": "Caroline Maz&#233;", "link": "https://stackoverflow.com/users/10980049/caroline-maz%c3%a9"}, "edited": false, "score": 0, "creation_date": 1551262811, "post_id": 54889263, "comment_id": 96573353, "body": "I tried bundle update bootsnap but it still not working... and I had my file boot.rb... thank you for your help !!"}, {"owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "reply_to_user": {"reputation": 93, "user_id": 10980049, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217949112697803/picture?type=large", "display_name": "Caroline Maz&#233;", "link": "https://stackoverflow.com/users/10980049/caroline-maz%c3%a9"}, "edited": false, "score": 0, "creation_date": 1551359845, "post_id": 54889263, "comment_id": 96617787, "body": "Can you remove this line <code>bootsnap&#47;setup</code> in <code>boot.rb</code> and try again?"}, {"owner": {"reputation": 93, "user_id": 10980049, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217949112697803/picture?type=large", "display_name": "Caroline Maz&#233;", "link": "https://stackoverflow.com/users/10980049/caroline-maz%c3%a9"}, "edited": false, "score": 0, "creation_date": 1551360940, "post_id": 54889263, "comment_id": 96618419, "body": "I already did it but I still have the same issue... thank you amrdruid for your help"}], "tags": [], "owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "is_accepted": false, "score": 0, "last_activity_date": 1551197716, "last_edit_date": 1551197716, "creation_date": 1551195962, "answer_id": 54889263, "question_id": 54888332, "link": "https://stackoverflow.com/questions/54888332/lib-bootsnap-load-path-cache-core-ext-kernel-require-rb21in-require-cannot/54889263#54889263", "title": "lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require&#39;: cannot load such file -- sass (LoadError)", "body": "<p>In this line in the logs:</p>\n\n<p><code>from /Users/carolinemaze/code/Caro1990/good_meal/config/application.rb:7:</code></p>\n\n<p>It seems your code is requiring a file that doesn't exist anymore. You can find exactly what's happening in <code>config/application.rb:7</code></p>\n\n<p>Also, try to remove <code>gem 'sassc-rails'</code> from <code>group :assets</code> </p>\n"}, {"tags": [], "owner": {"reputation": 93, "user_id": 10980049, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217949112697803/picture?type=large", "display_name": "Caroline Maz&#233;", "link": "https://stackoverflow.com/users/10980049/caroline-maz%c3%a9"}, "is_accepted": true, "score": 1, "last_activity_date": 1551437590, "creation_date": 1551437590, "answer_id": 54943140, "question_id": 54888332, "link": "https://stackoverflow.com/questions/54888332/lib-bootsnap-load-path-cache-core-ext-kernel-require-rb21in-require-cannot/54943140#54943140", "title": "lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require&#39;: cannot load such file -- sass (LoadError)", "body": "<p>Finally, I found the solution of my problem: I update my ruby version and I had in the Gemefile: gem 'sass-rails', require: false. And now It's work. Thank you everyone for your help.</p>\n\n<pre><code>ruby '2.5.3'\n\ngem 'bootsnap', require: false\ngem 'jbuilder', '~&gt; 2.0'\ngem 'pg', '~&gt; 0.21'\ngem 'puma'\ngem 'sassc-rails'\ngem 'sass-rails', require: false\ngem 'bootstrap-sass', '~&gt; 3.3'\ngem 'font-awesome-sass', '~&gt; 5.0.9'\ngem 'rails', '5.2.1'\ngem 'redis'\n\ngem 'autoprefixer-rails'\ngem 'simple_form'\ngem 'uglifier'\ngem 'webpacker'\ngem 'devise'\ngem 'money-rails'\ngem \"pundit\"\ngem 'postmark-rails'\ngem 'gibbon'\n# gem 'figaro'\n\ngroup :development do\n  gem 'web-console', '&gt;= 3.3.0'\nend\n\ngroup :development, :test do\n    gem 'letter_opener'\n  gem 'pry-byebug'\n  gem 'pry-rails'\n  gem 'listen', '~&gt; 3.0.5'\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\n  gem 'dotenv-rails', :require =&gt; 'dotenv/rails-now'\n  gem 'dotenv'\nend\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 10980049, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217949112697803/picture?type=large", "display_name": "Caroline Maz&#233;", "link": "https://stackoverflow.com/users/10980049/caroline-maz%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1476, "favorite_count": 0, "accepted_answer_id": 54943140, "answer_count": 2, "score": 1, "last_activity_date": 1551437590, "creation_date": 1551193077, "last_edit_date": 1551262718, "question_id": 54888332, "link": "https://stackoverflow.com/questions/54888332/lib-bootsnap-load-path-cache-core-ext-kernel-require-rb21in-require-cannot", "title": "lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require&#39;: cannot load such file -- sass (LoadError)", "body": "<p>I have an issue and rails s and rails c is not working anymore, i already tried many things, i hope you will help me. In my terminal i have this message:</p>\n\n<pre><code>/Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require': cannot load such file -- sass (LoadError)\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `block in require_with_bootsnap_lfi'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/loaded_features_index.rb:80:in `register'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in `require_with_bootsnap_lfi'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:36:in `rescue in require'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:25:in `require'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/activesupport-5.2.1/lib/active_support/dependencies.rb:287:in `block in require'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/activesupport-5.2.1/lib/active_support/dependencies.rb:253:in `load_dependency'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/activesupport-5.2.1/lib/active_support/dependencies.rb:287:in `require'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/font-awesome-sass-5.0.13/lib/font-awesome-sass.rb:48:in `configure_sass'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/font-awesome-sass-5.0.13/lib/font-awesome-sass.rb:13:in `load!'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/font-awesome-sass-5.0.13/lib/font-awesome-sass.rb:78:in `&lt;main&gt;'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `block in require_with_bootsnap_lfi'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/loaded_features_index.rb:83:in `register'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in `require_with_bootsnap_lfi'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in `require'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bundler-1.17.1/lib/bundler/runtime.rb:81:in `block (2 levels) in require'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bundler-1.17.1/lib/bundler/runtime.rb:76:in `each'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bundler-1.17.1/lib/bundler/runtime.rb:76:in `block in require'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bundler-1.17.1/lib/bundler/runtime.rb:65:in `each'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bundler-1.17.1/lib/bundler/runtime.rb:65:in `require'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bundler-1.17.1/lib/bundler.rb:114:in `require'\n  from /Users/carolinemaze/code/Caro1990/good_meal/config/application.rb:7:in `&lt;main&gt;'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `block in require_with_bootsnap_lfi'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/loaded_features_index.rb:83:in `register'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in `require_with_bootsnap_lfi'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in `require'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/activesupport-5.2.1/lib/active_support/dependencies.rb:287:in `block in require'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/activesupport-5.2.1/lib/active_support/dependencies.rb:253:in `load_dependency'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/activesupport-5.2.1/lib/active_support/dependencies.rb:287:in `require'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/railties-5.2.1/lib/rails/commands/server/server_command.rb:145:in `block in perform'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/railties-5.2.1/lib/rails/commands/server/server_command.rb:142:in `tap'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/railties-5.2.1/lib/rails/commands/server/server_command.rb:142:in `perform'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/thor-0.20.3/lib/thor/command.rb:27:in `run'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/thor-0.20.3/lib/thor/invocation.rb:126:in `invoke_command'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/thor-0.20.3/lib/thor.rb:387:in `dispatch'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/railties-5.2.1/lib/rails/command/base.rb:65:in `perform'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/railties-5.2.1/lib/rails/command.rb:46:in `invoke'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/railties-5.2.1/lib/rails/commands.rb:18:in `&lt;main&gt;'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `block in require_with_bootsnap_lfi'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/loaded_features_index.rb:83:in `register'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in `require_with_bootsnap_lfi'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/bootsnap-1.4.1/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in `require'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/activesupport-5.2.1/lib/active_support/dependencies.rb:287:in `block in require'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/activesupport-5.2.1/lib/active_support/dependencies.rb:253:in `load_dependency'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/activesupport-5.2.1/lib/active_support/dependencies.rb:287:in `require'\n  from /Users/carolinemaze/code/Caro1990/good_meal/bin/rails:9:in `&lt;top (required)&gt;'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/spring-2.0.2/lib/spring/client/rails.rb:28:in `load'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/spring-2.0.2/lib/spring/client/rails.rb:28:in `call'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/spring-2.0.2/lib/spring/client/command.rb:7:in `call'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/spring-2.0.2/lib/spring/client.rb:30:in `run'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/spring-2.0.2/bin/spring:49:in `&lt;top (required)&gt;'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/spring-2.0.2/lib/spring/binstub.rb:31:in `load'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/gems/2.4.0/gems/spring-2.0.2/lib/spring/binstub.rb:31:in `&lt;top (required)&gt;'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:70:in `require'\n  from /Users/carolinemaze/.rbenv/versions/2.4.5/lib/ruby/site_ruby/2.4.0/rubygems/core_ext/kernel_require.rb:70:in `require'\n  from /Users/carolinemaze/code/Caro1990/good_meal/bin/spring:15:in `&lt;top (required)&gt;'\n  from ./bin/rails:3:in `load'\n  from ./bin/rails:3:in `&lt;main&gt;'````\n</code></pre>\n\n<p>I already tried: </p>\n\n<ul>\n<li>gem install bundler</li>\n<li>rails app:update:bin</li>\n<li>bundle update rails</li>\n<li>gem sources -r <a href=\"http://gems.rubyforge.org/\" rel=\"nofollow noreferrer\">http://gems.rubyforge.org/</a></li>\n<li>gem sources -r <a href=\"http://gems.github.com\" rel=\"nofollow noreferrer\">http://gems.github.com</a></li>\n<li>gem sources -l ... </li>\n</ul>\n\n<p>thank you for your help !!</p>\n\n<p>Update: my gemfile:</p>\n\n<pre><code>ruby '2.4.5'\n\ngem 'bootsnap', require: false\ngem 'jbuilder', '~&gt; 2.0'\ngem 'pg', '~&gt; 0.21'\ngem 'puma'\ngem 'rails', '5.2.1'\ngem 'redis'\n\ngem 'autoprefixer-rails'\ngem 'bootstrap-sass', '~&gt; 3.3'\ngem 'font-awesome-sass', '~&gt; 5.0.9'\ngem 'sassc-rails'\ngem 'simple_form'\ngem 'uglifier'\ngem 'webpacker'\ngem 'devise'\ngem 'money-rails'\ngem \"pundit\"\ngem 'postmark-rails'\ngem 'gibbon'\ngem 'figaro'\n\ngroup :development do\n  gem 'web-console', '&gt;= 3.3.0'\nend\n\ngroup :development, :test do\n    gem 'letter_opener'\n  gem 'pry-byebug'\n  gem 'pry-rails'\n  gem 'listen', '~&gt; 3.0.5'\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\n  gem 'dotenv-rails'\nend\n</code></pre>\n\n<p>gemfile.lock:</p>\n\n<pre><code>  remote: https://rubygems.org/\n  specs:\n    actioncable (5.2.1)\n      actionpack (= 5.2.1)\n      nio4r (~&gt; 2.0)\n      websocket-driver (&gt;= 0.6.1)\n    actionmailer (5.2.1)\n      actionpack (= 5.2.1)\n      actionview (= 5.2.1)\n      activejob (= 5.2.1)\n      mail (~&gt; 2.5, &gt;= 2.5.4)\n      rails-dom-testing (~&gt; 2.0)\n    actionpack (5.2.1)\n      actionview (= 5.2.1)\n      activesupport (= 5.2.1)\n      rack (~&gt; 2.0)\n      rack-test (&gt;= 0.6.3)\n      rails-dom-testing (~&gt; 2.0)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.2)\n    actionview (5.2.1)\n      activesupport (= 5.2.1)\n      builder (~&gt; 3.1)\n      erubi (~&gt; 1.4)\n      rails-dom-testing (~&gt; 2.0)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.3)\n    activejob (5.2.1)\n      activesupport (= 5.2.1)\n      globalid (&gt;= 0.3.6)\n    activemodel (5.2.1)\n      activesupport (= 5.2.1)\n    activerecord (5.2.1)\n      activemodel (= 5.2.1)\n      activesupport (= 5.2.1)\n      arel (&gt;= 9.0)\n    activestorage (5.2.1)\n      actionpack (= 5.2.1)\n      activerecord (= 5.2.1)\n      marcel (~&gt; 0.3.1)\n    activesupport (5.2.1)\n      concurrent-ruby (~&gt; 1.0, &gt;= 1.0.2)\n      i18n (&gt;= 0.7, &lt; 2)\n      minitest (~&gt; 5.1)\n      tzinfo (~&gt; 1.1)\n    addressable (2.6.0)\n      public_suffix (&gt;= 2.0.2, &lt; 4.0)\n    arel (9.0.0)\n    autoprefixer-rails (9.4.9)\n      execjs\n    bcrypt (3.1.12)\n    bindex (0.5.0)\n    bootsnap (1.4.1)\n      msgpack (~&gt; 1.0)\n    bootstrap-sass (3.4.1)\n      autoprefixer-rails (&gt;= 5.2.1)\n      sassc (&gt;= 2.0.0)\n    builder (3.2.3)\n    byebug (11.0.0)\n    coderay (1.1.2)\n    concurrent-ruby (1.1.4)\n    crass (1.0.4)\n    devise (4.6.1)\n      bcrypt (~&gt; 3.0)\n      orm_adapter (~&gt; 0.1)\n      railties (&gt;= 4.1.0, &lt; 6.0)\n      responders\n      warden (~&gt; 1.2.3)\n    dotenv (2.7.1)\n    dotenv-rails (2.7.1)\n      dotenv (= 2.7.1)\n      railties (&gt;= 3.2, &lt; 6.1)\n    erubi (1.8.0)\n    execjs (2.7.0)\n    faraday (0.15.4)\n      multipart-post (&gt;= 1.2, &lt; 3)\n    ffi (1.10.0)\n    figaro (1.1.1)\n      thor (~&gt; 0.14)\n    font-awesome-sass (5.0.13)\n      sassc (&gt;= 1.11)\n    gibbon (3.2.0)\n      faraday (&gt;= 0.9.1)\n      multi_json (&gt;= 1.11.0)\n    globalid (0.4.2)\n      activesupport (&gt;= 4.2.0)\n    i18n (1.5.3)\n      concurrent-ruby (~&gt; 1.0)\n    jbuilder (2.8.0)\n      activesupport (&gt;= 4.2.0)\n      multi_json (&gt;= 1.2)\n    json (2.2.0)\n    launchy (2.4.3)\n      addressable (~&gt; 2.3)\n    letter_opener (1.7.0)\n      launchy (~&gt; 2.2)\n    listen (3.0.8)\n      rb-fsevent (~&gt; 0.9, &gt;= 0.9.4)\n      rb-inotify (~&gt; 0.9, &gt;= 0.9.7)\n    loofah (2.2.3)\n      crass (~&gt; 1.0.2)\n      nokogiri (&gt;= 1.5.9)\n    mail (2.7.1)\n      mini_mime (&gt;= 0.1.1)\n    marcel (0.3.3)\n      mimemagic (~&gt; 0.3.2)\n    method_source (0.9.2)\n    mimemagic (0.3.3)\n    mini_mime (1.0.1)\n    mini_portile2 (2.4.0)\n    minitest (5.11.3)\n    monetize (1.9.1)\n      money (~&gt; 6.12)\n    money (6.13.2)\n      i18n (&gt;= 0.6.4, &lt;= 2)\n    money-rails (1.13.1)\n      activesupport (&gt;= 3.0)\n      monetize (~&gt; 1.9.0)\n      money (~&gt; 6.13.0)\n      railties (&gt;= 3.0)\n    msgpack (1.2.6)\n    multi_json (1.13.1)\n    multipart-post (2.0.0)\n    nio4r (2.3.1)\n    nokogiri (1.10.1)\n      mini_portile2 (~&gt; 2.4.0)\n    orm_adapter (0.5.0)\n    pg (0.21.0)\n    postmark (1.15.0)\n      json\n    postmark-rails (0.19.0)\n      actionmailer (&gt;= 3.0.0)\n      postmark (~&gt; 1.15.0)\n    pry (0.12.2)\n      coderay (~&gt; 1.1.0)\n      method_source (~&gt; 0.9.0)\n    pry-byebug (3.7.0)\n      byebug (~&gt; 11.0)\n      pry (~&gt; 0.10)\n    pry-rails (0.3.9)\n      pry (&gt;= 0.10.4)\n    public_suffix (3.0.3)\n    puma (3.12.0)\n    pundit (2.0.1)\n      activesupport (&gt;= 3.0.0)\n    rack (2.0.6)\n    rack-proxy (0.6.5)\n      rack\n    rack-test (1.1.0)\n      rack (&gt;= 1.0, &lt; 3)\n    rails (5.2.1)\n      actioncable (= 5.2.1)\n      actionmailer (= 5.2.1)\n      actionpack (= 5.2.1)\n      actionview (= 5.2.1)\n      activejob (= 5.2.1)\n      activemodel (= 5.2.1)\n      activerecord (= 5.2.1)\n      activestorage (= 5.2.1)\n      activesupport (= 5.2.1)\n      bundler (&gt;= 1.3.0)\n      railties (= 5.2.1)\n      sprockets-rails (&gt;= 2.0.0)\n    rails-dom-testing (2.0.3)\n      activesupport (&gt;= 4.2.0)\n      nokogiri (&gt;= 1.6)\n    rails-html-sanitizer (1.0.4)\n      loofah (~&gt; 2.2, &gt;= 2.2.2)\n    railties (5.2.1)\n      actionpack (= 5.2.1)\n      activesupport (= 5.2.1)\n      method_source\n      rake (&gt;= 0.8.7)\n      thor (&gt;= 0.19.0, &lt; 2.0)\n    rake (12.3.2)\n    rb-fsevent (0.10.3)\n    rb-inotify (0.10.0)\n      ffi (~&gt; 1.0)\n    redis (4.1.0)\n    responders (2.4.1)\n      actionpack (&gt;= 4.2.0, &lt; 6.0)\n      railties (&gt;= 4.2.0, &lt; 6.0)\n    sassc (2.0.1)\n      ffi (~&gt; 1.9)\n      rake\n    sassc-rails (2.1.0)\n      railties (&gt;= 4.0.0)\n      sassc (&gt;= 2.0)\n      sprockets (&gt; 3.0)\n      sprockets-rails\n      tilt\n    simple_form (4.1.0)\n      actionpack (&gt;= 5.0)\n      activemodel (&gt;= 5.0)\n    spring (2.0.2)\n      activesupport (&gt;= 4.2)\n    spring-watcher-listen (2.0.1)\n      listen (&gt;= 2.7, &lt; 4.0)\n      spring (&gt;= 1.2, &lt; 3.0)\n    sprockets (3.7.2)\n      concurrent-ruby (~&gt; 1.0)\n      rack (&gt; 1, &lt; 3)\n    sprockets-rails (3.2.1)\n      actionpack (&gt;= 4.0)\n      activesupport (&gt;= 4.0)\n      sprockets (&gt;= 3.0.0)\n    thor (0.20.3)\n    thread_safe (0.3.6)\n    tilt (2.0.9)\n    tzinfo (1.2.5)\n      thread_safe (~&gt; 0.1)\n    uglifier (4.1.20)\n      execjs (&gt;= 0.3.0, &lt; 3)\n    warden (1.2.8)\n      rack (&gt;= 2.0.6)\n    web-console (3.7.0)\n      actionview (&gt;= 5.0)\n      activemodel (&gt;= 5.0)\n      bindex (&gt;= 0.4.0)\n      railties (&gt;= 5.0)\n    webpacker (3.5.5)\n      activesupport (&gt;= 4.2)\n      rack-proxy (&gt;= 0.6.1)\n      railties (&gt;= 4.2)\n    websocket-driver (0.7.0)\n      websocket-extensions (&gt;= 0.1.0)\n    websocket-extensions (0.1.3)\n\nPLATFORMS\n  ruby\n\nDEPENDENCIES\n  autoprefixer-rails\n  bootsnap\n  bootstrap-sass (~&gt; 3.3)\n  devise\n  dotenv-rails\n  figaro\n  font-awesome-sass (~&gt; 5.0.9)\n  gibbon\n  jbuilder (~&gt; 2.0)\n  letter_opener\n  listen (~&gt; 3.0.5)\n  money-rails\n  pg (~&gt; 0.21)\n  postmark-rails\n  pry-byebug\n  pry-rails\n  puma\n  pundit\n  rails (= 5.2.1)\n  redis\n  sassc-rails\n  simple_form\n  spring\n  spring-watcher-listen (~&gt; 2.0.0)\n  uglifier\n  web-console (&gt;= 3.3.0)\n  webpacker\n\nRUBY VERSION\n   ruby 2.4.5p335\n\nBUNDLED WITH\n   1.17.1\n</code></pre>\n\n<p>application.rb:</p>\n\n<pre><code>require_relative 'boot'\n\nrequire 'rails/all'\n\n# Require the gems listed in Gemfile, including any gems\n# you've limited to :test, :development, or :production.\nBundler.require(*Rails.groups)\n\nmodule GoodMeal\n  class Application &lt; Rails::Application\n    config.generators do |generate|\n          generate.assets false\n          generate.helper false\n          generate.test_framework  :test_unit, fixture: false\n        end\n    # Initialize configuration defaults for originally generated Rails version.\n    config.load_defaults 5.2\n\n    # Settings in config/environments/* take precedence over those specified here.\n    # Application configuration can go into files in config/initializers\n    # -- all .rb files in that directory are automatically loaded after loading\n    # the framework and any gems in your application.\n  end\n\n\n\n# POUR ACTIVER .ENV\nDotenv::Railtie.load\n\nHOSTNAME = ENV['HOSTNAME']\n\n\nend\n\n</code></pre>\n\n<p>bin/rails:</p>\n\n<pre><code>\n#!/usr/bin/env ruby\nbegin\n  load File.expand_path('../spring', __FILE__)\nrescue LoadError =&gt; e\n  raise unless e.message.include?('spring')\nend\nAPP_PATH = File.expand_path('../config/application', __dir__)\nrequire_relative '../config/boot'\nrequire 'rails/commands'\n\n\n</code></pre>\n\n<p>boot.rb:</p>\n\n<pre><code>\nENV['BUNDLE_GEMFILE'] ||= File.expand_path('../Gemfile', __dir__)\n\nrequire 'bundler/setup' # Set up gems listed in the Gemfile.\nrequire 'bootsnap/setup' # Speed up boot time by caching expensive operations.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551186812, "post_id": 54886049, "comment_id": 96541661, "body": "Where did you defined your <code>samples</code> css?"}, {"owner": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551186862, "post_id": 54886049, "comment_id": 96541687, "body": "in my topics.scss file"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551187004, "post_id": 54886049, "comment_id": 96541754, "body": "Is it under <code>assets&#47;stylesheets</code>? Did you add it to <code>application.css</code> file?"}, {"owner": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551245784, "post_id": 54886049, "comment_id": 96565429, "body": "it&#39;s under assets/stylesheets....no i did&#39;nt add it to application.css file"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551249507, "post_id": 54886049, "comment_id": 96566710, "body": "Could you please add <code>application.css</code> code to the question?"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551249734, "post_id": 54886049, "comment_id": 96566809, "body": "What do you use for deployment? Heroku?"}, {"owner": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551250873, "post_id": 54886049, "comment_id": 96567257, "body": "i added the application.css code in question..    i use bitbucket for deployment"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551251782, "post_id": 54886049, "comment_id": 96567600, "body": "Try to move <code>require_tree .</code> to the last line from the first one."}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551251858, "post_id": 54886049, "comment_id": 96567628, "body": "btw, you&#39;re duplicating bootstrap and font-awesome. It shouldn&#39;t be the cause of your issue, but in any case you don&#39;t need these css twice. Remove min versions"}, {"owner": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551252019, "post_id": 54886049, "comment_id": 96567692, "body": "it works.. Thankyou so much.. can you tell me what was the problem?"}, {"owner": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551252315, "post_id": 54886049, "comment_id": 96567807, "body": "moving require_tree from top to last works for me"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551252608, "post_id": 54886049, "comment_id": 96567927, "body": "Happy to help you! I posted the answer, accept it please, to not leave the question unanswered"}], "answers": [{"tags": [], "owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "is_accepted": true, "score": 0, "last_activity_date": 1551252561, "creation_date": 1551252561, "answer_id": 54900174, "question_id": 54886049, "link": "https://stackoverflow.com/questions/54886049/rails-not-picking-style-in-production/54900174#54900174", "title": "rails not picking style in production", "body": "<p>I'll convert my comments to the answer, if you don't mind.</p>\n\n<p>Order of requiring in manifest file really matters, your css rules are applied one by one, and the latest one has precedence over the first one. That's why sometimes you have to remove <code>require tree .</code> at all and require all files manually in needed order. </p>\n\n<p>Looks like your  <code>samples</code> is overwritten somewhere. Or maybe duplicating of font-awesome and bootstrap leads to the issue. Remove duplicates and move <code>require tree</code> to the last line:</p>\n\n<pre><code>*= require_self\n*= require bootstrap\n*= require font-awesome\n*= require jquery-ui/accordion\n*= require_tree .\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10889678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/612ae16dc92d0689c0b2f60f9a7d0769?s=128&d=identicon&r=PG&f=1", "display_name": "Shahroz Ashraf", "link": "https://stackoverflow.com/users/10889678/shahroz-ashraf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 54900174, "answer_count": 1, "score": -1, "last_activity_date": 1551252561, "creation_date": 1551185702, "last_edit_date": 1551250805, "question_id": 54886049, "link": "https://stackoverflow.com/questions/54886049/rails-not-picking-style-in-production", "title": "rails not picking style in production", "body": "<pre><code>&lt;div class=\"field hash-tag col-md-12\"&gt;\n  &lt;%= form.label :hash_tags, '#Hashtags' %&gt; \n    &lt;span class=\"samples\"&gt;(e.g #smile #food #life)\n    &lt;/span&gt;\n  &lt;%= form.text_area :hash_tags, class: 'form-control' %&gt;\n&lt;/div&gt;\n\n\n.samples{\n color: #4cae4c;\n}\n\n\n *= require_tree .\n *= require_self\n *= require bootstrap.min.css\n *= require font-awesome.min.css\n *= require bootstrap\n *= require font-awesome\n *= require jquery-ui/accordion\n</code></pre>\n\n<p>In the view file I have given a 'samples' class to span and in stylesheet file I am applying color to that span. It's working in localhost but not working in production.when i inspect with ctrl+shift+i it shows all styles except that samples class style.</p>\n"}, {"tags": ["ruby", "bash", "shell", "rvm", "iterm2"], "comments": [{"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1551185749, "post_id": 54885895, "comment_id": 96540997, "body": "What do you get when you <code>echo $SHELL</code> and <code>which rvm</code> from the command line? Is there any chance you&#39;re running zsh right now? If so, your bash profile scripts won&#39;t get evaluated and you&#39;ll need to add the lines from <code>.bash_profile</code> into your <code>.zshrc</code> file. Also, your iterm setup looks fine (that&#39;s how mine is configured)"}, {"owner": {"reputation": 32630, "user_id": 1011527, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/950d56c466691980bba71859798bfe65?s=128&d=identicon&r=PG", "display_name": "Jay Blanchard", "link": "https://stackoverflow.com/users/1011527/jay-blanchard"}, "reply_to_user": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1551186060, "post_id": 54885895, "comment_id": 96541196, "body": "I get <code>&#47;bin&#47;bash</code> @JayDorsey"}, {"owner": {"reputation": 32630, "user_id": 1011527, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/950d56c466691980bba71859798bfe65?s=128&d=identicon&r=PG", "display_name": "Jay Blanchard", "link": "https://stackoverflow.com/users/1011527/jay-blanchard"}, "reply_to_user": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1551186562, "post_id": 54885895, "comment_id": 96541495, "body": "<code>which rvm</code> yields <code>&#47;Users&#47;jblanchard&#47;.rvm&#47;bin&#47;rvm</code> @JayDorsey"}], "answers": [{"tags": [], "owner": {"reputation": 32630, "user_id": 1011527, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/950d56c466691980bba71859798bfe65?s=128&d=identicon&r=PG", "display_name": "Jay Blanchard", "link": "https://stackoverflow.com/users/1011527/jay-blanchard"}, "is_accepted": true, "score": 1, "last_activity_date": 1551189569, "creation_date": 1551189569, "answer_id": 54887204, "question_id": 54885895, "link": "https://stackoverflow.com/questions/54885895/iterm2-setup-as-login-shell-rvm-still-gives-error/54887204#54887204", "title": "iTerm2 Setup as Login Shell, RVM Still Gives Error", "body": "<p>I was able to successfully make the change to Ruby-2.6.1. First, I uncommented the <code>export</code> line in .bash_profile:</p>\n\n<pre><code># rvm\nexport PATH=\"/Users/jblanchard/.rvm/bin:$PATH\" #UNCOMMENTED\n[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; . \"$HOME/.rvm/scripts/rvm\"\n</code></pre>\n\n<p>After stopping and starting iTerm2 I issued the command to use Ruby-2.6.1 and received a warning, but then:</p>\n\n<pre><code>picklemac:~ jblanchard$ rvm use default ruby-2.6.1\nWarning! PATH is not properly set up, /Users/jblanchard/.rvm/gems/ruby-2.6.1/bin is not at first place.\n         Usually this is caused by shell initialization files. Search for PATH=... entries.\n         You can also re-add RVM to your profile by running: rvm get stable --auto-dotfiles\n         To fix it temporarily in this shell session run: rvm use ruby-2.6.1\n         To ignore this error add rvm_silence_path_mismatch_check_flag=1 to your ~/.rvmrc file.\nUsing /Users/jblanchard/.rvm/gems/ruby-2.6.1\n</code></pre>\n\n<p>The change to Ruby-2.6.1 was made. It appears I do need to run <code>rvm get stable --auto-dotfiles</code> to fix the warning, which I would prefer to silencing it. Now, when running <code>ruby -v</code> the return is:</p>\n\n<blockquote>\n  <p>ruby 2.6.1p33 (2019-01-30 revision 66950) [x86_64-darwin17]</p>\n</blockquote>\n"}], "owner": {"reputation": 32630, "user_id": 1011527, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/950d56c466691980bba71859798bfe65?s=128&d=identicon&r=PG", "display_name": "Jay Blanchard", "link": "https://stackoverflow.com/users/1011527/jay-blanchard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "accepted_answer_id": 54887204, "answer_count": 1, "score": 1, "last_activity_date": 1551189569, "creation_date": 1551185099, "last_edit_date": 1551187581, "question_id": 54885895, "link": "https://stackoverflow.com/questions/54885895/iterm2-setup-as-login-shell-rvm-still-gives-error", "title": "iTerm2 Setup as Login Shell, RVM Still Gives Error", "body": "<p>I have been trying to install Ruby-2.6.1 on my Macbook Pro for a couple of days now, and I have followed many posts and blog posts to try to get the setup correct, but I am not successful. I always get the following when trying to set the default Ruby with RVM:</p>\n\n<pre><code>picklemac:~ jblanchard$ rvm use default ruby-2.6.1\n</code></pre>\n\n<blockquote>\n  <p>RVM is not a function, selecting rubies with 'rvm use ...' will not work.</p>\n  \n  <p>You need to change your terminal emulator preferences to allow login shell.\n  Sometimes it is required to use <code>/bin/bash --login</code> as the command.\n  Please visit <a href=\"https://rvm.io/integration/gnome-terminal/\" rel=\"nofollow noreferrer\">https://rvm.io/integration/gnome-terminal/</a> for an example.</p>\n</blockquote>\n\n<p>I have followed the link, but with no success. I have iTerm2 setup as a login shell:</p>\n\n<p><a href=\"https://i.stack.imgur.com/SveeZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SveeZ.png\" alt=\"iterm2 login shell selected\"></a></p>\n\n<p>In .bashrc I have the following:</p>\n\n<pre><code># Add RVM to PATH for scripting. Make sure this is the last PATH variable change.\nexport PATH=\"$PATH:$HOME/.rvm/bin\"\n[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; . \"$HOME/.rvm/scripts/rvm\"\n</code></pre>\n\n<p>And in .bash_profile I have the following:</p>\n\n<pre><code># rvm\n# export PATH=\"/Users/jblanchard/.rvm/bin:$PATH\"\n[[ -s \"$HOME/.rvm/scripts/rvm\" ]] &amp;&amp; . \"$HOME/.rvm/scripts/rvm\"\n</code></pre>\n\n<p>As I said, I have read and tried a number of things to get iTerm2 and my Mac setup properly, including <a href=\"https://stackoverflow.com/q/1276703/1011527\">How to make zsh run as a login shell on Mac OS X (in iTerm)?</a>. Also, because I am trying to upgrade from Ruby 2.3 I have read a number of posts on just how to do that - again with no success.</p>\n\n<p>What am I doing wrong?</p>\n\n<h2>Additional Info</h2>\n\n<p>I am able to successfully list the installations using <code>rvm list</code>:</p>\n\n<pre><code>picklemac:~ jblanchard$ rvm list\n   ruby-2.6.0 [ x86_64 ]\n=* ruby-2.6.1 [ x86_64 ]\n\n# =&gt; - current\n# =* - current &amp;&amp; default\n#  * - default\n</code></pre>\n\n<p>This is interesting, because RVM indicates Ruby-2.6.1 is the default, but when I use <code>ruby -v</code> the return is:</p>\n\n<blockquote>\n  <p>ruby 2.3.7p456 (2018-03-28 revision 63024) [universal.x86_64-darwin17]</p>\n</blockquote>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1551188676, "post_id": 54885090, "comment_id": 96542765, "body": "What happens if you replace it with <code>ruby &#39;&gt;= 2.5.0&#39;, &#39;&lt; 2.6&#39;</code>? Which would be identical like you said."}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1551189640, "post_id": 54885090, "comment_id": 96543389, "body": "@JohanWentholt It doesn&#39;t like that. I don&#39;t believe that&#39;s valid code: <code>[!] There was an error parsing </code>Gemfile<code>: no implicit conversion of Symbol into Integer. Bundler cannot continue.</code>"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1551189988, "post_id": 54885090, "comment_id": 96543622, "body": "I have no problems with the above code. You just call the method <code>ruby</code> with 2 arguments instead of one. My output is: <code>Your Ruby version is 2.4.1, but your Gemfile specified &gt;= 2.5.0, &lt; 2.6</code> (which is correct since my Ruby version doesn&#39;t match)"}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1551190387, "post_id": 54885090, "comment_id": 96543865, "body": "@JohanWentholt Not sure then.. but this is what is happening with that code: <code>&#47;usr&#47;lib&#47;ruby&#47;vendor_ruby&#47;bundler&#47;ruby_dsl.rb:4:in &#39;[]&#39;:  (Bundler::Dsl::DSLError) [!] There was an error parsing &#39;Gemfile&#39;: no implicit conversion of Symbol into Integer. Bundler cannot continue.   #  from &#47;srv&#47;portal&#47;releases&#47;2019-02-21-15-55-45&#47;Gemfile:1  #  -------------------------------------------  &gt;  ruby(&#39;&gt;= 2.5.0&#39;, &#39;&lt; 2.6&#39;)  #  source &#39;https:&#47;&#47;rubygems.org&#39;  #  -------------------------------------------</code>"}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1551190645, "post_id": 54885090, "comment_id": 96544047, "body": "This is using <code>ruby 2.5.3p105 (2018-10-18 revision 65156) [x86_64-linux-gnu]</code> and <code>bundler 1.17.3</code>."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1551194191, "post_id": 54885090, "comment_id": 96546438, "body": "Is this issue also present in a newly initialized bundler directory? (<code>mkdir foo; cd foo; bundler init; echo &quot;ruby &#39;~&gt; 2.5.0&#39;&quot; &gt;&gt; Gemfile; bundle install</code>)"}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1551194352, "post_id": 54885090, "comment_id": 96546545, "body": "So we updated the packages on the ubuntu box and it fixed the issue... weird!!!"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1551194791, "post_id": 54885090, "comment_id": 96546865, "body": "Strange. At least the problem is solved. Consider posting an answer to your own question."}], "answers": [{"tags": [], "owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "is_accepted": false, "score": 3, "last_activity_date": 1551195456, "creation_date": 1551195456, "answer_id": 54889097, "question_id": 54885090, "link": "https://stackoverflow.com/questions/54885090/pessimistic-ruby-operator-for-ruby-version-in-gemfile-causes-error/54889097#54889097", "title": "Pessimistic Ruby operator for Ruby version in Gemfile causes error", "body": "<p>We're not entirely sure what the issue was or what the actual fix was for this...</p>\n\n<p>But basically after trying the following: <code>ruby '&gt;= 2.5.0', '&lt; 2.6'</code> as suggested in the comments of the original question we encountered this error:</p>\n\n<pre><code>/usr/lib/ruby/vendor_ruby/bundler/ruby_dsl.rb:4:in '[]': (Bundler::Dsl::DSLError)\n[!] There was an error parsing 'Gemfile': no implicit conversion of Symbol into Integer. Bundler cannot continue.\n# from /srv/portal/releases/2019-02-21-15-55-45/Gemfile:1 \n# ------------------------------------------- \n&gt; ruby('&gt;= 2.5.0', '&lt; 2.6') \n# source 'https://rubygems.org' \n# -------------------------------------------\n</code></pre>\n\n<p>Which made us think there was something wrong with the actual Ruby installed... as when trying this locally it was fine and we also tried it on a different server and it was also working with no issues.</p>\n\n<p>So we uninstalled Ruby, removed all the Gems and then did a full package update on the Ubuntu dist we had running and then re-installed bundler and all the gems again and it worked... so it seems that it was something around one of the packages that was causing Ruby to behave weirdly and not understand how to use the ruby method in the Gemfile correctly causing the aforementioned issues.</p>\n\n<p>Hopefully if anyone else encounters similar problems this will help...</p>\n"}, {"tags": [], "owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "is_accepted": false, "score": 0, "last_activity_date": 1551198958, "creation_date": 1551198958, "answer_id": 54890149, "question_id": 54885090, "link": "https://stackoverflow.com/questions/54885090/pessimistic-ruby-operator-for-ruby-version-in-gemfile-causes-error/54890149#54890149", "title": "Pessimistic Ruby operator for Ruby version in Gemfile causes error", "body": "<p>From the bundler guides on specifying gems:</p>\n\n<blockquote>\n  <p>gem \"rails\", \"~> 4.0.0\" # which is same as gem \"rails\", \">= 4.0.0\", \"&lt; 4.1.0\"</p>\n</blockquote>\n\n<p>Perhaps the explicit form will provide better results?</p>\n\n<p>The guide in question specifies that it was written for bundler 1.12</p>\n"}], "owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1551198958, "creation_date": 1551182412, "question_id": 54885090, "link": "https://stackoverflow.com/questions/54885090/pessimistic-ruby-operator-for-ruby-version-in-gemfile-causes-error", "title": "Pessimistic Ruby operator for Ruby version in Gemfile causes error", "body": "<p>In our Gemfile we have the following: <code>ruby '~&gt; 2.5.0'</code></p>\n\n<p>So that we enforce that at least <code>2.5.0</code> is installed but below <code>2.6.0</code></p>\n\n<p>And we have installed Ruby <code>2.5.3p105</code> on our server to run this application... so we are within the version required by our Gemfile.</p>\n\n<p>However when we start Puma we are seeing the error: <code>Your Ruby version is 2.5.3, but your Gemfile specified ~&gt; 2.5.0</code></p>\n\n<p>How is this possible? The pessimistic operator should of done:</p>\n\n<p><code>&gt;= 2.5.0 &amp;&amp; &lt; 2.6.0</code></p>\n\n<p>If we comment that line out of our Gemfile then it works...?</p>\n\n<p>We're using Bundler 1.17.3.</p>\n"}, {"tags": ["c#", "ruby"], "comments": [{"owner": {"reputation": 69330, "user_id": 1612975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nVzDH.png?s=128&g=1", "display_name": "TheGeneral", "link": "https://stackoverflow.com/users/1612975/thegeneral"}, "edited": false, "score": 0, "creation_date": 1551162991, "post_id": 54879450, "comment_id": 96528584, "body": "The problem is you have written your ruby code, but haven&#39;t explained your problem sufficiently in natural language. what does it do, what are the input parameters, what do you mean by odd numbers, do you mean odd as in the 0 based index?"}, {"owner": {"reputation": 94146, "user_id": 477420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb05243292dee6726c128660d31583b?s=128&d=identicon&r=PG", "display_name": "Alexei Levenkov", "link": "https://stackoverflow.com/users/477420/alexei-levenkov"}, "edited": false, "score": 0, "creation_date": 1551163090, "post_id": 54879450, "comment_id": 96528614, "body": "Calling code that converts number to string &quot;optimized&quot; is somewhat strange. Is your requirement &quot;code must be a single statement&quot;? (check if what you are trying to do fits <a href=\"https://codegolf.stackexchange.com\">Code Golf</a> better)"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 69330, "user_id": 1612975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nVzDH.png?s=128&g=1", "display_name": "TheGeneral", "link": "https://stackoverflow.com/users/1612975/thegeneral"}, "edited": false, "score": 0, "creation_date": 1551163166, "post_id": 54879450, "comment_id": 96528644, "body": "@MichaelRandall I tried best to clear idea, not odd numbers, it says odd places (odd power index could sound btter I guess). Input is clearly just 2 numbers."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 94146, "user_id": 477420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb05243292dee6726c128660d31583b?s=128&d=identicon&r=PG", "display_name": "Alexei Levenkov", "link": "https://stackoverflow.com/users/477420/alexei-levenkov"}, "edited": false, "score": 0, "creation_date": 1551163323, "post_id": 54879450, "comment_id": 96528707, "body": "@AlexeiLevenkov I found difficult to swap odd places digits for two numbers without converting them in string array. It is little optimised, I do not clain best solution, I am just interested in C# proficient code. Still improvement in above ruby code to do same will be appreciated, as it will give me better approach."}, {"owner": {"reputation": 69330, "user_id": 1612975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nVzDH.png?s=128&g=1", "display_name": "TheGeneral", "link": "https://stackoverflow.com/users/1612975/thegeneral"}, "edited": false, "score": 1, "creation_date": 1551163507, "post_id": 54879450, "comment_id": 96528774, "body": "Just use a for loop and a char arrays; use modulo and do some arrhythmic. If you want it one line, then make it a method. Which part are you having trouble with"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 69330, "user_id": 1612975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nVzDH.png?s=128&g=1", "display_name": "TheGeneral", "link": "https://stackoverflow.com/users/1612975/thegeneral"}, "edited": false, "score": 0, "creation_date": 1551163692, "post_id": 54879450, "comment_id": 96528849, "body": "@MichaelRandall I think I should post my C# code first even if it is not perfect and then check for better solution from others, Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 58, "user_id": 5595208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z0yNr.jpg?s=128&g=1", "display_name": "Akshay Naik", "link": "https://stackoverflow.com/users/5595208/akshay-naik"}, "edited": false, "score": 0, "creation_date": 1551167196, "post_id": 54880037, "comment_id": 96530353, "body": "@ray Mark as the answer if this is what you were looking for :)"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1551167510, "post_id": 54880037, "comment_id": 96530495, "body": "a and b are numbers and not arrays so <code>Select</code> will not work on number. Please update answer properly."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1551167894, "post_id": 54880037, "comment_id": 96530682, "body": "Consider a and b are numbers and proceed!"}], "tags": [], "owner": {"reputation": 58, "user_id": 5595208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z0yNr.jpg?s=128&g=1", "display_name": "Akshay Naik", "link": "https://stackoverflow.com/users/5595208/akshay-naik"}, "is_accepted": false, "score": 1, "last_activity_date": 1551169102, "last_edit_date": 1551169102, "creation_date": 1551164672, "answer_id": 54880037, "question_id": 54879450, "link": "https://stackoverflow.com/questions/54879450/optimised-code-like-did-in-ruby-for-swapping-digits-at-odd-places-for-2-number/54880037#54880037", "title": "Optimised code (like did in ruby) for swapping digits at odd places for 2 numbers in C#", "body": "<p>Considering  the inputs a and b will be strings.\nThe below code should get you the desired result.</p>\n\n<p><code>var result = string.Join(\"\", b.ToString().Select((x, i) =&gt; (i % 2) == 0 || a.ToString().Length &lt;= i ? x.ToString() : a.ToString().Substring(i, 1)));</code></p>\n\n<p>this code will take into consideration the difference in length.</p>\n\n<p><strong>Edit</strong>:You can also implement using LINQ avoiding loops and considering a and b as numbers as shown below.</p>\n\n<pre><code>int[] ai = a.ToString().Select(x =&gt; int.Parse(x.ToString())).ToArray();\nint[] bi = b.ToString().Select(x =&gt; int.Parse(x.ToString())).ToArray();\n\nvar number1 = string.Join(\"\", bi.Select((x, i) =&gt; (i % 2) == 0 || ai.Count() &lt;= i ? x.ToString() : ai[i].ToString()));\nvar number2 = string.Join(\"\", ai.Select((x, i) =&gt; (i % 2) == 0 || bi.Count() &lt;= i ? x.ToString() : bi[i].ToString()));\n\nConsole.WriteLine(\"Array 1:\" + Convert.ToInt32(number1));\nConsole.WriteLine(\"Array 2:\" + Convert.ToInt32(number2));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1551167151, "post_id": 54880577, "comment_id": 96530339, "body": "I appreciate for your response and going with explanation but what I have is two numbers in input, not an array. And output is also 2 numbers after operation performed."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1551167609, "post_id": 54880577, "comment_id": 96530552, "body": "You missed that inputs are also numbers"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1551167835, "post_id": 54880577, "comment_id": 96530655, "body": "Why do you need 2 loops here because swapping must be placed for numbers on same index. Also you do not need two local variables <code>q</code> &amp; <code>w</code> to hold values, 1 was enough."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1551168482, "post_id": 54880577, "comment_id": 96530979, "body": "I did little same already till now. +1 for time and right answer"}, {"owner": {"reputation": 8811, "user_id": 5514820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3c516ef70b515acb022707ab5389eae?s=128&d=identicon&r=PG&f=1", "display_name": "er-sho", "link": "https://stackoverflow.com/users/5514820/er-sho"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1551168543, "post_id": 54880577, "comment_id": 96531005, "body": "glad to hear, :)"}], "tags": [], "owner": {"reputation": 8811, "user_id": 5514820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3c516ef70b515acb022707ab5389eae?s=128&d=identicon&r=PG&f=1", "display_name": "er-sho", "link": "https://stackoverflow.com/users/5514820/er-sho"}, "is_accepted": true, "score": 1, "last_activity_date": 1551175363, "last_edit_date": 1551175363, "creation_date": 1551167034, "answer_id": 54880577, "question_id": 54879450, "link": "https://stackoverflow.com/questions/54879450/optimised-code-like-did-in-ruby-for-swapping-digits-at-odd-places-for-2-number/54880577#54880577", "title": "Optimised code (like did in ruby) for swapping digits at odd places for 2 numbers in C#", "body": "<p>There are plenty of ways in <code>c#</code> to get your desired output but I give you a solution that you can understand easily,</p>\n\n<p>First of all we declare your integer array in <code>c#</code> like</p>\n\n<pre><code>int input1 = 35321;\nint input2 = 123456;\n\nint[] a = input1.ToString().Select(t =&gt; int.Parse(t.ToString())).ToArray();\nint[] b = input2.ToString().Select(t =&gt; int.Parse(t.ToString())).ToArray();\n</code></pre>\n\n<p>Then we use traditional for loop to swap number between two array with odd index</p>\n\n<pre><code>for (int i = 0; i &lt; a.Length; i++)    //&lt;= Loop through on first array\n{\n     if (i % 2 != 0)                  //&lt;= Check for odd index\n     {\n          int q = a[i];               //&lt;= Take element from first array with current index\n          a[i] = b[i];                //&lt;= Swap element from second array to first array on current index\n          b[i] = q;                   //&lt;= Swap element from first array to second array on current index\n     }\n}\n</code></pre>\n\n<p>Then we simply print your desired output by,</p>\n\n<pre><code>int number1 = Convert.ToInt32(string.Join(\"\", a));\nint number2 = Convert.ToInt32(string.Join(\"\", b));\n\nConsole.WriteLine(\"Output for first array: \\t\" + number1);\nConsole.WriteLine(\"Output for second array: \\t\" + number2);\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/aTL1z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aTL1z.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://dotnetfiddle.net/0ipkpc\" rel=\"nofollow noreferrer\"><h1> Demo </h1></a></p>\n"}], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 54880577, "answer_count": 2, "score": 4, "last_activity_date": 1551175363, "creation_date": 1551161745, "question_id": 54879450, "link": "https://stackoverflow.com/questions/54879450/optimised-code-like-did-in-ruby-for-swapping-digits-at-odd-places-for-2-number", "title": "Optimised code (like did in ruby) for swapping digits at odd places for 2 numbers in C#", "body": "<p>I am ruby developer and for certain case I need to swap digits at odd places  in 2 numbers in <code>C#</code>. </p>\n\n<p>I have coded in ruby in basic way like below,</p>\n\n<pre><code>a = 35321\nb = 123456\na1, b1 = a.to_s.chars, b.to_s.chars # ['3', '5', '3'. '2', '1'], ['1', '2', '3', '4', '5', '6'] \n\nn = [a1.length, b1.length].min - 1 # =&gt; 4\n</code></pre>\n\n<p>swapped in below manner,</p>\n\n<pre><code>n.times do |i|\n  if i.odd?\n    temp = a1[i]\n    a1[i] = b1[i]\n    b1[i] = a1[i]\n  end\nend  \n</code></pre>\n\n<p>Or optimised code is below using <code>step</code> method in ruby,</p>\n\n<pre><code>1.step(n,2) { |i| a1[i], b1[i] = b1[i], a1[i] }\n</code></pre>\n\n<p>And at the end I get numbers as per expectation as,</p>\n\n<pre><code>&gt; a = a1.join.to_i\n# =&gt; 32341 \n&gt; b = b1.join.to_i\n# =&gt; 153256\n</code></pre>\n\n<p>My problem is I could not figure out how can I do same in <code>C#</code> Appreciated if anyone provide either suggestion.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "server", "actioncable"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1551174849, "post_id": 54878892, "comment_id": 96534568, "body": "Seems like it&#39;s not supported with ActionCable - see <a href=\"https://github.com/rails/rails/issues/24931\" rel=\"nofollow noreferrer\">github.com/rails/rails/issues/24931</a> However I think it is possible with other websocket libraries such as <a href=\"https://github.com/igrigorik/em-websocket\" rel=\"nofollow noreferrer\">em-websocket</a> (there are others if you google &quot;websocket ruby&quot;). You basically just need a library that can subscribe to messages from a given websocket URL, and you write the forwarding code yourself."}, {"owner": {"reputation": 83, "user_id": 7062892, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-t2kP4nfM2ok/AAAAAAAAAAI/AAAAAAAAAsI/nu8pirSwNjg/photo.jpg?sz=128", "display_name": "Fauzi Rachman", "link": "https://stackoverflow.com/users/7062892/fauzi-rachman"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1551261959, "post_id": 54878892, "comment_id": 96572794, "body": "ok, i get it, thanks @maxpleaner"}], "owner": {"reputation": 83, "user_id": 7062892, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-t2kP4nfM2ok/AAAAAAAAAAI/AAAAAAAAAsI/nu8pirSwNjg/photo.jpg?sz=128", "display_name": "Fauzi Rachman", "link": "https://stackoverflow.com/users/7062892/fauzi-rachman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551158563, "creation_date": 1551158563, "question_id": 54878892, "link": "https://stackoverflow.com/questions/54878892/listen-to-another-rails-actioncable-server", "title": "Listen to another rails actioncable server", "body": "<p>In my case, I have one actioncable only server which is already running. \nI want to build another server that listen to my actioncable server, then my mobile application will listening to this new actioncable server.</p>\n\n<p>Can I do that?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551161434, "post_id": 54878796, "comment_id": 96528044, "body": "Proof: <code>ClassA.instance_method(:initialize).parameters  #=&gt; [[:req, :a], [:req, :b]]</code>. See <a href=\"http://ruby-doc.org/core-2.5.1/Method.html#method-i-parameters\" rel=\"nofollow noreferrer\">Method#parameters</a>."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1551161521, "post_id": 54878796, "comment_id": 96528080, "body": "@CarySwoveland: ...in the original code. With my code, you get <code>[[:opt, :a], [:opt, :b]]</code> (two parameters, both optional)."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 7, "last_activity_date": 1551157927, "creation_date": 1551157927, "answer_id": 54878796, "question_id": 54878313, "link": "https://stackoverflow.com/questions/54878313/can-we-call-normal-constructor-and-paramatrised-constructor-at-a-time-in-ruby/54878796#54878796", "title": "Can we call normal constructor and paramatrised constructor at a time in Ruby?", "body": "<p>No, Ruby does not have method overloading. Unlike e.g. Java or Crystal, you only get one method of the same name per class. Your second <code>def</code> is overwriting the first. It's like writing <code>foo = 7; foo = 19</code> - the value <code>7</code> is not accessible any more from <code>foo</code>.</p>\n\n<p>If you want to distinguish different argument lists, you need to do it yourself. Fortunately, unlike Java, Ruby has optional parameters (i.e. parameters with default values):</p>\n\n<pre><code>class ClassA\n  def initialize(a=nil, b=nil)\n    if a &amp;&amp; b\n      c = a - b\n      puts c\n    else\n      puts \"This is my constructor\" \n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": false, "score": 1, "last_activity_date": 1551164114, "creation_date": 1551164114, "answer_id": 54879924, "question_id": 54878313, "link": "https://stackoverflow.com/questions/54878313/can-we-call-normal-constructor-and-paramatrised-constructor-at-a-time-in-ruby/54879924#54879924", "title": "Can we call normal constructor and paramatrised constructor at a time in Ruby?", "body": "<p>In addition to the <em>overloading</em> solution, which Amadan suggested, you can also provide factory methods to complement your constructor, for example:</p>\n\n<pre><code>class Foo\n\n  def initialize(_a = nil, _b = nil, _c = _nil)\n    @a, @b, @c = _a, _b, _c\n  end\n\n  # factories\n  def self.make_fancy_foo(x,y,z)\n    new(bar(x),y+1,baz(z-y))\n  end\n  def self.make_special_foo(x)\n    new(x,x,x)\n  end\n\nend\n</code></pre>\n\n<p>This is how you can use them:</p>\n\n<pre><code>foo1 = Foo.new\nfoo2 = Foo.new(88)\nfoo3 = Foo.new(3,6,9)\nfoo4 = Foo.make_fancy_foo(7,-1,5)\nfoo5 = Foo.make_special_foo(6)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11096575, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_Wq-BMPh1z4/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPCcFGvHDDEEG0SgOVXW57VPrl3tg/mo/photo.jpg?sz=128", "display_name": "Eduardo Sabino", "link": "https://stackoverflow.com/users/11096575/eduardo-sabino"}, "is_accepted": false, "score": 0, "last_activity_date": 1551199334, "creation_date": 1551199334, "answer_id": 54890248, "question_id": 54878313, "link": "https://stackoverflow.com/questions/54878313/can-we-call-normal-constructor-and-paramatrised-constructor-at-a-time-in-ruby/54890248#54890248", "title": "Can we call normal constructor and paramatrised constructor at a time in Ruby?", "body": "<p>You're overwriting the first constructor, you can only have one method per name in ruby, to achieve the behavior you want you can do something like:</p>\n\n<pre><code>class ClassA\n  def initialize(a=nil, b=nil)\n    a &amp;&amp; b ? puts(a+b) : puts \"This is my constructor\" \n  end\nend\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>class ClassA\n  def initialize(*args)\n    arg.any? ? deal_with_params : puts \"This is my constructor\" \n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8994710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/450ecf462807e8458d4508350cfed944?s=128&d=identicon&r=PG&f=1", "display_name": "Varun Kumar", "link": "https://stackoverflow.com/users/8994710/varun-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1551452138, "creation_date": 1551154068, "last_edit_date": 1551452138, "question_id": 54878313, "link": "https://stackoverflow.com/questions/54878313/can-we-call-normal-constructor-and-paramatrised-constructor-at-a-time-in-ruby", "title": "Can we call normal constructor and paramatrised constructor at a time in Ruby?", "body": "<p>I tried like this. The file name of <code>ClassA</code> is instanceAndClassMethods</p>\n\n<pre><code>class ClassA\n\n    def initialize #constructor \n        puts \"This is my constructor\" \n    end\n\n    def initialize(a,b)\n        c=a-b\n        puts c\n    end\nend\n</code></pre>\n\n<p>From other class I called above class as both are in same folder like:</p>\n\n<p><code>require './instanceAndClassMethods' #filename</code> should not contain spaces</p>\n\n<p><code>obj = ClassA.new #constructor</code> are automatically called when object is created</p>\n\n<pre><code>obj=ClassA.new(33,33)\n</code></pre>\n\n<p>When I run from command prompt, I'm getting:</p>\n\n<pre><code>Traceback (most recent call last):\n        2: from callMeth.rb:4:in `&lt;main&gt;'\n        1: from callMeth.rb:4:in `new'\nC:/Users/vkuma102/Desktop/Ruby Learning/instanceAndClassMethods.rb:7:in `initial\nize': wrong number of arguments (given 0, expected 2) (ArgumentError)\n</code></pre>\n\n<p>If this is the case then it is difficult right whereas we can call both normal constructor and constructor with parameters in Java</p>\n"}, {"tags": ["ruby", "pagination", "internationalization", "jekyll"], "answers": [{"tags": [], "owner": {"reputation": 2248, "user_id": 1657502, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExbVx.png?s=128&g=1", "display_name": "Ant&#244;nio Medeiros", "link": "https://stackoverflow.com/users/1657502/ant%c3%b4nio-medeiros"}, "is_accepted": false, "score": 0, "last_activity_date": 1555536449, "creation_date": 1555536449, "answer_id": 55736215, "question_id": 54877830, "link": "https://stackoverflow.com/questions/54877830/trying-to-use-jekyll-paginate-v2-and-jekyll-multiple-language-plugin-together/55736215#55736215", "title": "Trying to use jekyll-paginate-v2 and jekyll-multiple-language-plugin together", "body": "<p>I've built a multilingual Jekyll website based on this how to:</p>\n\n<p><a href=\"https://www.sylvaindurand.org/making-jekyll-multilingual/\" rel=\"nofollow noreferrer\">Making Jekyll  multilingual \u2013 Sylvain Durand</a></p>\n\n<p>Here it is:</p>\n\n<ul>\n<li>Website: <a href=\"https://kamarada.github.io/\" rel=\"nofollow noreferrer\">https://kamarada.github.io/</a></li>\n<li>Source: <a href=\"https://github.com/kamarada/kamarada-website\" rel=\"nofollow noreferrer\">https://github.com/kamarada/kamarada-website</a> (Jekyll) and <a href=\"https://github.com/kamarada/kamarada.github.io\" rel=\"nofollow noreferrer\">https://github.com/kamarada/kamarada.github.io</a> (compiled HTML)</li>\n</ul>\n\n<p>To paginate it, I used the <a href=\"https://github.com/sverrirs/jekyll-paginate-v2\" rel=\"nofollow noreferrer\">jekyll-paginate-v2</a> plugin and filtered pages using locales.</p>\n\n<p>Instructions on how to setup that plugin can be found here:</p>\n\n<p><a href=\"https://github.com/sverrirs/jekyll-paginate-v2/blob/master/README-GENERATOR.md\" rel=\"nofollow noreferrer\">https://github.com/sverrirs/jekyll-paginate-v2/blob/master/README-GENERATOR.md</a></p>\n\n<p>In this specific commit, you can see how I setup pagination:</p>\n\n<p><a href=\"https://github.com/kamarada/kamarada-website/commit/40fd718996e6c6756b915ffcac0b1be32df28e5d\" rel=\"nofollow noreferrer\">https://github.com/kamarada/kamarada-website/commit/40fd718996e6c6756b915ffcac0b1be32df28e5d</a></p>\n\n<p>In the future, I'm going to replace Sylvain Durand's <code>lang</code> with jekyll-paginate-v2's <code>locale</code>, so I don't use two front matter variables with the same purpose.</p>\n\n<p>Please note that my website is not compatible with GitHub Pages, that's why I have separate repos for Jekyll source and compiled (and served) HTML.</p>\n\n<p>The jekyll-paginate-v2 plugin is not supported by GitHub Pages: <a href=\"https://pages.github.com/versions/\" rel=\"nofollow noreferrer\">https://pages.github.com/versions/</a></p>\n"}], "owner": {"reputation": 1896, "user_id": 3286975, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N9TO9.png?s=128&g=1", "display_name": "z3nth10n", "link": "https://stackoverflow.com/users/3286975/z3nth10n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 479, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1555536449, "creation_date": 1551150232, "last_edit_date": 1551151712, "question_id": 54877830, "link": "https://stackoverflow.com/questions/54877830/trying-to-use-jekyll-paginate-v2-and-jekyll-multiple-language-plugin-together", "title": "Trying to use jekyll-paginate-v2 and jekyll-multiple-language-plugin together", "body": "<p>Well, I'm actually trying to create a multilingual website with Jekyll. Recently, I discovered this jekyll plugin called <a href=\"https://github.com/Anthony-Gaudino/jekyll-multiple-languages-plugin\" rel=\"nofollow noreferrer\">jekyll-multiple-languages-plugin</a> and well, my pagination went weird... So I preferred to update it to this maintained version called <a href=\"https://github.com/sverrirs/jekyll-paginate-v2\" rel=\"nofollow noreferrer\">jekyll-paginate-v2</a>.</p>\n\n<p>Already somebody has the same question as me, how could I make the paginator multilingual, so him/her created this issue on Github:</p>\n\n<blockquote>\n  <p>Hey,</p>\n  \n  <p>couldn't find something in the old issues, so my question is: Is it somehow possible to set something like this in the config of jekyll?</p>\n  \n  <p><code>permalink : \"/:lang/page/:num/\"</code> - <strong>:lang</strong> is the variable I need to create different versions of the same files.</p>\n  \n  <p>And I guess to obtain the posts I would need something like this:</p>\n  \n  <p><code>{% for post in paginator.lang.posts %}</code>\n  instead of\n  <code>{% for post in paginator.posts %}</code></p>\n  \n  <p>Would be great!!! I hope my problem is understandable.. or maybe you guys have a different approach?</p>\n  \n  <p>cheers,\n  bg</p>\n</blockquote>\n\n<p>From: <a href=\"https://github.com/sverrirs/jekyll-paginate-v2/issues/17#issue-213207745\" rel=\"nofollow noreferrer\">https://github.com/sverrirs/jekyll-paginate-v2/issues/17#issue-213207745</a></p>\n\n<p>And kindly, @sverrirs replied to him/her with <a href=\"https://github.com/sverrirs/jekyll-paginate-v2/issues/17#issuecomment-291592869\" rel=\"nofollow noreferrer\">this nice answer</a>. Which I'm carefully following. But I think that I found a wall...</p>\n\n<p>Simply, I think that both plugins are incompatible:</p>\n\n<blockquote>\n  <p>Well, I will need to reopen this. Because actually, I'm using your plugin with the <a href=\"https://github.com/Anthony-Gaudino/jekyll-multiple-languages-plugin\" rel=\"nofollow noreferrer\">\"Jekyll Multiple Languages Plugin\"</a>... And I'm having some troubles trying to follow what @sverrirs said on <a href=\"https://github.com/sverrirs/jekyll-paginate-v2/issues/17#issuecomment-291592869\" rel=\"nofollow noreferrer\">this comment</a>...</p>\n  \n  <p>I have the following structure for posts:</p>\n  \n  <p><img src=\"https://camo.githubusercontent.com/6a4fef939da8f6b5df2eb5813f8027df4774f313/68747470733a2f2f692e6779617a6f2e636f6d2f65666462373331613439666234383135313265356631346364383433376537322e706e67\" alt=\"...\"></p>\n  \n  <p>And I already created two index.html in the root (one for the \"en\" lang and another for \"es\")... And then I created another two layouts...</p>\n  \n  <p>But when I debug the paginator (at myurl.com/en/, for example), the following appears:</p>\n  \n  <p><code>{\"per_page\"=&gt;5, \"posts\"=&gt;[], \"total_posts\"=&gt;0, \"total_pages\"=&gt;1, \"page\"=&gt;1, \"page_path\"=&gt;\"/index.html\", \"previous_page\"=&gt;nil, \"previous_page_path\"=&gt;nil, \"next_page\"=&gt;nil, \"next_page_path\"=&gt;nil, \"first_page\"=&gt;1, \"first_page_path\"=&gt;\"/index.html\", \"last_page\"=&gt;1, \"last_page_path\"=&gt;\"/en/1/index.html\", \"page_trail\"=&gt;nil}</code></p>\n  \n  <p>Is like this plugin isn't compatible with the language one? Because, as you can see, there are some posts at my _i18n folder, but is like the locale isn't able to read them (because the <code>posts</code> property is empty)...</p>\n  \n  <p>What could I do?</p>\n</blockquote>\n\n<p>From: <a href=\"https://github.com/sverrirs/jekyll-paginate-v2/issues/17#issuecomment-467270740\" rel=\"nofollow noreferrer\">https://github.com/sverrirs/jekyll-paginate-v2/issues/17#issuecomment-467270740</a></p>\n\n<p>I said everything on that quote. But, navigating through the code of the plugin I can't found any reference (assigning) the posts variable... Or at least, see from where it's assigned...</p>\n\n<p><a href=\"https://github.com/sverrirs/jekyll-paginate-v2/blob/c657c5f8e02580a5e13f336d5c34fd4c81e212f7/lib/jekyll-paginate-v2/generator/paginationModel.rb\" rel=\"nofollow noreferrer\">https://github.com/sverrirs/jekyll-paginate-v2/blob/c657c5f8e02580a5e13f336d5c34fd4c81e212f7/lib/jekyll-paginate-v2/generator/paginationModel.rb</a></p>\n\n<p><a href=\"https://github.com/sverrirs/jekyll-paginate-v2/blob/7a15647777b12795515ffacbf3b9c09bc9b7f452/lib/jekyll-paginate-v2/generator/paginationIndexer.rb\" rel=\"nofollow noreferrer\">https://github.com/sverrirs/jekyll-paginate-v2/blob/7a15647777b12795515ffacbf3b9c09bc9b7f452/lib/jekyll-paginate-v2/generator/paginationIndexer.rb</a></p>\n\n<p>The only things remarkable are <code>all_posts = self.get_docs_in_collections(template_config['collection'])</code> and <code>def self.index_posts_by(all_posts, index_key)</code></p>\n\n<p>But I can barely understand what is happening here, because I'm very newbie with Jekyll and Ruby...</p>\n"}, {"tags": ["ruby", "ssh", "chef-infra", "knife"], "comments": [{"owner": {"reputation": 1080, "user_id": 5196039, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f5d10a65b4aa0e6281492ba26da873ee?s=128&d=identicon&r=PG&f=1", "display_name": "swagrov", "link": "https://stackoverflow.com/users/5196039/swagrov"}, "edited": false, "score": 0, "creation_date": 1551137442, "post_id": 54875982, "comment_id": 96522603, "body": "This works, but I want to avoid it: <code>bundle exec knife ssh my-node-name.com &#39;PATH=&quot;&#47;usr&#47;local&#47;rvm&#47;gems&#47;ruby-2.3.5&#47;bin:&#47;usr&#47;local&#47;rvm&#47;gem&zwnj;&#8203;s&#47;ruby-2.3.5@global&#47;&zwnj;&#8203;bin:&#47;usr&#47;local&#47;rvm&#47;r&zwnj;&#8203;ubies&#47;ruby-2.3.5&#47;bin&zwnj;&#8203;:&#47;usr&#47;local&#47;sbin:&#47;us&zwnj;&#8203;r&#47;local&#47;bin:&#47;usr&#47;sbi&zwnj;&#8203;n:&#47;usr&#47;bin:&#47;sbin:&#47;bi&zwnj;&#8203;n:&#47;usr&#47;games:&#47;usr&#47;lo&zwnj;&#8203;cal&#47;games:&#47;usr&#47;local&zwnj;&#8203;&#47;rvm&#47;bin&quot; sudo chef-client&#39;</code>"}, {"owner": {"reputation": 6316, "user_id": 1184717, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7f8710cd5754a79df5dc5cd3d5308da2?s=128&d=identicon&r=PG", "display_name": "Mr.", "link": "https://stackoverflow.com/users/1184717/mr"}, "edited": false, "score": 0, "creation_date": 1551271878, "post_id": 54875982, "comment_id": 96578831, "body": "using <code>bundle exec</code> is the right way to do it."}, {"owner": {"reputation": 1080, "user_id": 5196039, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f5d10a65b4aa0e6281492ba26da873ee?s=128&d=identicon&r=PG&f=1", "display_name": "swagrov", "link": "https://stackoverflow.com/users/5196039/swagrov"}, "reply_to_user": {"reputation": 6316, "user_id": 1184717, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7f8710cd5754a79df5dc5cd3d5308da2?s=128&d=identicon&r=PG", "display_name": "Mr.", "link": "https://stackoverflow.com/users/1184717/mr"}, "edited": false, "score": 0, "creation_date": 1551288434, "post_id": 54875982, "comment_id": 96589199, "body": "It&#39;s not the <code>bundle exec</code> part that makes it work. It&#39;s using the PATH env var. I ended up editing my recipe to use that path when it detects it&#39;s on the one chef_environment where this happens, but that seems just as hacky as passing PATH into the chef-client command."}, {"owner": {"reputation": 6316, "user_id": 1184717, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7f8710cd5754a79df5dc5cd3d5308da2?s=128&d=identicon&r=PG", "display_name": "Mr.", "link": "https://stackoverflow.com/users/1184717/mr"}, "edited": false, "score": 1, "creation_date": 1551339090, "post_id": 54875982, "comment_id": 96606239, "body": "regular login to the your system and ssh login to your system has different environment variables. if you aligned it, then you are good :)"}], "owner": {"reputation": 1080, "user_id": 5196039, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f5d10a65b4aa0e6281492ba26da873ee?s=128&d=identicon&r=PG&f=1", "display_name": "swagrov", "link": "https://stackoverflow.com/users/5196039/swagrov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551137183, "creation_date": 1551135454, "last_edit_date": 1551137183, "question_id": 54875982, "link": "https://stackoverflow.com/questions/54875982/when-using-knife-ssh-commands-it-uses-a-different-ruby-version-on-the-client-th", "title": "When using knife ssh commands, it uses a different ruby version on the client than if I ssh into it manually", "body": "<p>I am running into this error if I try to use <code>knife ssh</code>:</p>\n\n<p><code>knife ssh my-node-name.com 'sudo chef-client'</code>\n...\n<code>STDERR: ERROR:  Error installing newrelic_resque_agent: redis requires Ruby version &gt;= 2.2.2.</code></p>\n\n<p>But if I ssh into the machine as myuser, then <code>sudo chef-client</code> works. I found out that this is because the ruby binaries are different:</p>\n\n<p><code>knife ssh my-node-name.com 'whoami &amp;&amp; sudo which ruby &amp;&amp; ruby --version &amp;&amp; echo $PATH'</code></p>\n\n<pre><code>myuser\n/usr/bin/ruby\nruby 1.9.3p484 (2013-11-22 revision 43786) [x86_64-linux]\n/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games\n</code></pre>\n\n<p>Now if I ssh into my-node-name.com as myuser and run <code>whoami &amp;&amp; sudo which ruby &amp;&amp; ruby --version &amp;&amp; echo $PATH</code></p>\n\n<pre><code>myuser\n/usr/local/rvm/rubies/ruby-2.3.5/bin/ruby\nruby 2.3.5p376 (2017-09-14 revision 59905) [x86_64-linux]\n/usr/local/rvm/gems/ruby-2.3.5/bin:/usr/local/rvm/gems/ruby-2.3.5@global/bin:/usr/local/rvm/rubies/ruby-2.3.5/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/local/rvm/bin\n</code></pre>\n\n<p>I'm using <code>chef-client --version</code> => <code>Chef: 12.12.15</code></p>\n\n<p>How can I make <code>knife ssh</code> work?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "arrays", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1551165636, "post_id": 54875577, "comment_id": 96529677, "body": "You might want to consider the <a href=\"https://github.com/kickstarter/rack-attack\" rel=\"nofollow noreferrer\"><code>rack-attack</code></a> gem instead of implementing this feature by yourself."}], "answers": [{"comments": [{"owner": {"reputation": 968, "user_id": 2898592, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/73e5b3a840f9b874ea5ecb89a281e6f7?s=128&d=identicon&r=PG&f=1", "display_name": "A.J", "link": "https://stackoverflow.com/users/2898592/a-j"}, "edited": false, "score": 1, "creation_date": 1551133867, "post_id": 54875618, "comment_id": 96521445, "body": "<code>AuthenticationAttempt.where(ip: ip_address).pluck(:successful).last(5).any?</code> makes everything cleaner and easier. Thank you!"}, {"owner": {"reputation": 968, "user_id": 2898592, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/73e5b3a840f9b874ea5ecb89a281e6f7?s=128&d=identicon&r=PG&f=1", "display_name": "A.J", "link": "https://stackoverflow.com/users/2898592/a-j"}, "edited": false, "score": 0, "creation_date": 1551197521, "post_id": 54875618, "comment_id": 96548514, "body": "Is there a way to add a condition where it would return true in case <code>ip</code> does not exist or just doesn&#39;t have 5 tries yet? I am asking because I am trying to figure out how to deal with new customers but failing to come up with an addition to the method."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 968, "user_id": 2898592, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/73e5b3a840f9b874ea5ecb89a281e6f7?s=128&d=identicon&r=PG&f=1", "display_name": "A.J", "link": "https://stackoverflow.com/users/2898592/a-j"}, "edited": false, "score": 1, "creation_date": 1551197677, "post_id": 54875618, "comment_id": 96548602, "body": "That&#39;s a little more complicated but I&#39;ve added an example there."}, {"owner": {"reputation": 968, "user_id": 2898592, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/73e5b3a840f9b874ea5ecb89a281e6f7?s=128&d=identicon&r=PG&f=1", "display_name": "A.J", "link": "https://stackoverflow.com/users/2898592/a-j"}, "edited": false, "score": 0, "creation_date": 1551199045, "post_id": 54875618, "comment_id": 96549392, "body": "I am also allowing users to log in if they have under 5 attempts so I added size to it <code>!attempts.any? or attempts.size &lt; 5 or attempts.pluck(:successful).last(5).any?</code>. I guess the <code>any?</code> is not relevant anymore because I am checking size?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 968, "user_id": 2898592, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/73e5b3a840f9b874ea5ecb89a281e6f7?s=128&d=identicon&r=PG&f=1", "display_name": "A.J", "link": "https://stackoverflow.com/users/2898592/a-j"}, "edited": false, "score": 1, "creation_date": 1551200713, "post_id": 54875618, "comment_id": 96550335, "body": "Sure. You could go with either none or less than 5, as zero is less than five."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 3, "last_activity_date": 1551197650, "last_edit_date": 1551197650, "creation_date": 1551133396, "answer_id": 54875618, "question_id": 54875577, "link": "https://stackoverflow.com/questions/54875577/check-if-array-contains-true-in-rails/54875618#54875618", "title": "Check if Array contains true in Rails", "body": "<p>If you mean <code>true</code>, then you mean:</p>\n\n<pre><code>last_5_attempts.include?(true)\n</code></pre>\n\n<p>Because:</p>\n\n<pre><code>true == \"true\"\n# =&gt; false\n</code></pre>\n\n<p>Yet that's not quite enough, as you're asking if an array of <code>[id, successful]</code> values has any entry that is <em>literally</em> just <code>true</code>, (<code>[1,true] != true</code>) so you want:</p>\n\n<pre><code>last_5_attempts.any? |id, successful|\n  successful\nend\n</code></pre>\n\n<p>You could also omit <code>id</code> from your column fetch since you don't use it and instead:</p>\n\n<pre><code>AuthenticationAttempt.where(ip: ip_address).pluck(:successful).last(5).any?\n</code></pre>\n\n<p>Where <code>pluck</code> with a single argument returns a \"flat\" array instead of an array of arrays.</p>\n\n<p>To check for at least one successful login in the last 5 or no login history:</p>\n\n<pre><code>attempts = AuthenticationAttempt.where(ip: ip_address)\n!attempts.any? or attempts.pluck(:successful).last(5).any?\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 968, "user_id": 2898592, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/73e5b3a840f9b874ea5ecb89a281e6f7?s=128&d=identicon&r=PG&f=1", "display_name": "A.J", "link": "https://stackoverflow.com/users/2898592/a-j"}, "edited": false, "score": 0, "creation_date": 1551197359, "post_id": 54878413, "comment_id": 96548421, "body": "I am not sure I can run <code>exists?</code> on an Array? It gives an error <code>undefined method &#39;exists?&#39; for []:Array</code>."}, {"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "reply_to_user": {"reputation": 968, "user_id": 2898592, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/73e5b3a840f9b874ea5ecb89a281e6f7?s=128&d=identicon&r=PG&f=1", "display_name": "A.J", "link": "https://stackoverflow.com/users/2898592/a-j"}, "edited": false, "score": 1, "creation_date": 1551207817, "post_id": 54878413, "comment_id": 96553946, "body": "@A.J Try <code>order(id: :desc).limit(5)</code> instead of <code>last(5)</code>. I thought <code>#last</code> returned an Association, but it looks like I am wrong and it is returning an  Array. Let me know if that works and I will update my answer."}, {"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "reply_to_user": {"reputation": 968, "user_id": 2898592, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/73e5b3a840f9b874ea5ecb89a281e6f7?s=128&d=identicon&r=PG&f=1", "display_name": "A.J", "link": "https://stackoverflow.com/users/2898592/a-j"}, "edited": false, "score": 0, "creation_date": 1551231935, "post_id": 54878413, "comment_id": 96562335, "body": "@A.J I updated the query.  <code>exists?</code> will overwrite any limits, so you need to structure the query to create a subquery of the correct records and then do the existence check on them."}], "tags": [], "owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "is_accepted": false, "score": 1, "last_activity_date": 1551230762, "last_edit_date": 1551230762, "creation_date": 1551154949, "answer_id": 54878413, "question_id": 54875577, "link": "https://stackoverflow.com/questions/54875577/check-if-array-contains-true-in-rails/54878413#54878413", "title": "Check if Array contains true in Rails", "body": "<pre><code>AuthenticationAttempt.where(ip: ip_address)<del>.last(5)</del>.exists?(successful: true)</code></pre>\n\n<pre><code><del>AuthenticationAttempt.where(ip: ip_address).order(id: :desc).limit(5).exists?(successful: true)</del></code></pre>\n\n<p>You can use <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-exists-3F\" rel=\"nofollow noreferrer\">ActiveRecord::FinderMethods#exists?</a> to check for a successful attempt without retrieving any data or instantiating any records.</p>\n\n<p><strong>Update</strong>: We need to use <code>.order(id: :desc).limit(5)</code> in place of <code>.last(5)</code> to ensure we have an <a href=\"https://github.com/rails/rails/blob/94b5cd3a20edadd6f6b8cf0bdf1a4d4919df86cb/activerecord/lib/active_record/relation.rb\" rel=\"nofollow noreferrer\">ActiveRecord::Relation</a> instance to call <code>exists?</code> on.</p>\n\n<p><strong>Update 2</strong>: <code>exists?</code> replaces any <code>limit</code> given with <code>limit(1)</code></p>\n\n<pre><code>AuthenticationAttempt.limit(5).exists?\n=&gt; SELECT 1 AS one FROM \"authentication_attempts\" LIMIT $1  [[\"LIMIT\", 1]]\n</code></pre>\n\n<p>Therefore we need to wrap the subquery in an outer existence query:</p>\n\n<pre><code>AuthenticationAttempt.exists?(AuthenticationAttempt.limit(5))\n=&gt; SELECT  1 AS one FROM \"authentication_attmepts\" WHERE \"authentication_attmepts\".\"id\" IN (SELECT  \"authentication_attmepts\".\"id\" FROM \"authentication_attmepts\" LIMIT $1) LIMIT $2  [[\"LIMIT\", 5], [\"LIMIT\", 1]]\n</code></pre>\n\n<p>This is a slightly more complex query, but still has the performance benefits of not loading anything from the database.  The inner subquery gives us our last 5 attempts, and the outer query checks for the existence of a successful attempt:</p>\n\n<pre><code> AuthenticationAttempt\n   .where(successful: true)\n   .exists?(AuthenticationAttempt.where(ip: ip_address).order(id: :desc).limit(5))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1668, "user_id": 1576822, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FY9gu.jpg?s=128&g=1", "display_name": "Sergio Belevskij", "link": "https://stackoverflow.com/users/1576822/sergio-belevskij"}, "is_accepted": false, "score": 1, "last_activity_date": 1551160102, "last_edit_date": 1551160102, "creation_date": 1551156071, "answer_id": 54878543, "question_id": 54875577, "link": "https://stackoverflow.com/questions/54875577/check-if-array-contains-true-in-rails/54878543#54878543", "title": "Check if Array contains true in Rails", "body": "<p>try</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>last_5_attempts.map(&amp;:to_s).include?(\"true\")\n</code></pre>\n\n<p>instead of</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>last_5_attempts.include?(\"true\")\n</code></pre>\n"}], "owner": {"reputation": 968, "user_id": 2898592, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/73e5b3a840f9b874ea5ecb89a281e6f7?s=128&d=identicon&r=PG&f=1", "display_name": "A.J", "link": "https://stackoverflow.com/users/2898592/a-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1289, "favorite_count": 1, "accepted_answer_id": 54875618, "answer_count": 3, "score": 0, "last_activity_date": 1551230762, "creation_date": 1551133131, "question_id": 54875577, "link": "https://stackoverflow.com/questions/54875577/check-if-array-contains-true-in-rails", "title": "Check if Array contains true in Rails", "body": "<p>I am trying to limit failed login attempts per <code>ip</code>.</p>\n\n<p>I have the following:</p>\n\n<pre><code>  def validate(email, context)\n    attempt = insert_into_attempts(email, context)\n    return nil unless allow_login_by_ip(context.ip_address)\n    flag_successful_attempt(attempt, context.ip_address)\n    load_data\n  end\n\n  def allow_login_by_ip(ip_address)\n    limit = LoginLimits.new(ip_address).limit\n    last_5_attempts = AuthenticationAttempt.select(\"id\",\"successful\").where(ip: ip_address).last(5)\n    last_5_attempts.include?(\"true\")\n  end \n\n  def insert_into_attempts(email, context)\n    attempt = AuthenticationAttempt.new(\n      :email =&gt; email,\n      :ip =&gt; context.ip_address)\n    attempt.save\n  end \n\n  def flag_successful_attempt(attempt, ip_address)\n    AuthenticationAttempt.where(ip: ip_address).last.update(successful: '1')\n  end\n</code></pre>\n\n<p>The issue I am having is that it always returns <code>fasle</code>. I must be searching the <code>array</code> incorrectly but I am not sure why. <code>last_5_attempts</code> is:</p>\n\n<pre><code>#&lt;AuthenticationAttempt id: 1, successful: false&gt;, \n#&lt;AuthenticationAttempt id: 2, successful: false&gt;, \n#&lt;AuthenticationAttempt id: 3, successful: true&gt;,\n#&lt;AuthenticationAttempt id: 4, successful: false&gt;, \n#&lt;AuthenticationAttempt id: 5, successful: false&gt;]\n</code></pre>\n"}, {"tags": ["ruby", "rspec", "user-input"], "answers": [{"tags": [], "owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "is_accepted": true, "score": 1, "last_activity_date": 1551132845, "creation_date": 1551132845, "answer_id": 54875515, "question_id": 54875132, "link": "https://stackoverflow.com/questions/54875132/rspec-asking-for-user-input/54875515#54875515", "title": "RSpec asking for user input", "body": "<p>Your suggestions should work actually. But there is another option.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>orig_stdin = $stdin \n$stdin = StringIO.new('exit') \nassert(EchoApp.new.greeting,'Goodbye!')\n# Or \nexpect(EchoApp.new.greeting).to eql('Goodbye!')\n$stdin = orig_stdin\n</code></pre>\n\n<p>Let me know if this does not work.</p>\n"}], "owner": {"reputation": 29, "user_id": 10459005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc429934f7beb585fe1108f691bc6a12?s=128&d=identicon&r=PG&f=1", "display_name": "Emanuele", "link": "https://stackoverflow.com/users/10459005/emanuele"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 54875515, "answer_count": 1, "score": 0, "last_activity_date": 1551132845, "creation_date": 1551131071, "question_id": 54875132, "link": "https://stackoverflow.com/questions/54875132/rspec-asking-for-user-input", "title": "RSpec asking for user input", "body": "<p>I have two questions. Given the ruby code below, what kind of tests would your write in RSpec and how would you avoid when running tests to keep get asked for the user input? I have tried many ways such as: </p>\n\n<ol>\n<li>allow($stdout)</li>\n<li>allow(Kernel) </li>\n<li>stub(:gets) </li>\n<li>STDOUT.should_receive(:puts).with(\"exit\")</li>\n<li>allow($stdin).to receive(:gets).and_return('no_gets')     </li>\n<li>allow_any_instance_of(Kernel).to receive(:gets).and_return('exit')</li>\n</ol>\n\n<p>But non of the above worked. In test kept asking me for the user input.</p>\n\n<pre><code> class EchoApp\n   def greeting\n     while(true)\n      puts \"Say something:\"\n      user = gets.chomp\n      break if user == 'exit'\n    end\n   return \"Goodbye!\"\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rails-activerecord"], "comments": [{"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551171593, "post_id": 54875099, "comment_id": 96532549, "body": "Why do you need to delete without saving?"}, {"owner": {"reputation": 458, "user_id": 2510393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0113f4745f939db43857d6e85c55102f?s=128&d=identicon&r=PG", "display_name": "Jon F.", "link": "https://stackoverflow.com/users/2510393/jon-f"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551224583, "post_id": 54875099, "comment_id": 96560774, "body": "I run into some issues with my validations without it. The situation is along the lines of: There&#39;s a model A that belongs to model B and has many of model C. And B has one A and has many C also.  There&#39;s a validation rule in A that checks to make sure that it&#39;s C and the C associated with the B that&#39;s associated with the A are kept in sync. So I have to remove an element of C from both A and B before saving either of them or it throws an error. Hopefully, that simplification didn&#39;t also remove the issue haha. Obviously, the models are a little weird so maybe that&#39;s a larger problem."}, {"owner": {"reputation": 458, "user_id": 2510393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0113f4745f939db43857d6e85c55102f?s=128&d=identicon&r=PG", "display_name": "Jon F.", "link": "https://stackoverflow.com/users/2510393/jon-f"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551224823, "post_id": 54875099, "comment_id": 96560850, "body": "Although I ended up being able to change a few things around so I could use accepts_nested_attributes_for, so I&#39;m no longer stuck. But I think it&#39;s still an interesting question... I think."}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551244227, "post_id": 54875099, "comment_id": 96564982, "body": "&quot;And B has one A and has many C also.&quot; I hope <code>B has_many :C, through: :A</code>? In this case you don&#39;t need to validate or sync anything"}, {"owner": {"reputation": 458, "user_id": 2510393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0113f4745f939db43857d6e85c55102f?s=128&d=identicon&r=PG", "display_name": "Jon F.", "link": "https://stackoverflow.com/users/2510393/jon-f"}, "reply_to_user": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551320205, "post_id": 54875099, "comment_id": 96600675, "body": "That&#39;s a good point. I forgot to mention that it&#39;s okay for the associations to be nil so A could have no B associated with it, but still have C&#39;s and the same is true for B having no A. But if they&#39;re associated together the C&#39;s need to be sync&#39;ed."}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1551323542, "post_id": 54875099, "comment_id": 96601435, "body": "Yes, looks like it is a larger problem than just <code>remove associated before deletion</code>. Which model is main here? I mean, what is direction of syncing? If, for example, A has <code>relation1</code> of Cs, B has <code>relation2</code> of Cs, and A becomes associated  with B - which relation of Cs should they have? Looks like you need not a validation here, but some logic of updating A/B after save of B/A."}], "owner": {"reputation": 458, "user_id": 2510393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0113f4745f939db43857d6e85c55102f?s=128&d=identicon&r=PG", "display_name": "Jon F.", "link": "https://stackoverflow.com/users/2510393/jon-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551130910, "creation_date": 1551130910, "question_id": 54875099, "link": "https://stackoverflow.com/questions/54875099/removing-associations-when-calling-collection-build-activerecord", "title": "Removing associations when calling collection.build - Activerecord", "body": "<p>Is it possible to remove records from a <code>has_many</code> association without saving the model similar to how <a href=\"https://apidock.com/rails/ActiveRecord/Associations/CollectionProxy/build\" rel=\"nofollow noreferrer\">collection.build</a> can add associations without saving.\nThere doesn't seem to be a key you can add to a hash to designate a record for removal when using <code>collection.build</code> like <code>:_delete</code> for <code>accepts_nested_attributes_for</code>. And there doesn't seem to be another method that can be used.</p>\n\n<p>I found this solution:\n<a href=\"https://stackoverflow.com/questions/22927284/how-to-delete-some-associations-from-an-activerecord-object-without-saving\">How to delete some associations from an ActiveRecord object without saving</a>\nbut it doesn't seem to work (or at least not anymore) as collection proxies do not have a <code>reject!</code> method.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1217, "user_id": 10430642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p5jzL.jpg?s=128&g=1", "display_name": "Dimitrius Lachi", "link": "https://stackoverflow.com/users/10430642/dimitrius-lachi"}, "edited": false, "score": 0, "creation_date": 1551129693, "post_id": 54874676, "comment_id": 96519783, "body": "can you post what are printed in <code>puts sta</code>?"}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1551143640, "post_id": 54874676, "comment_id": 96524080, "body": "I&#39;m not sure I understand the problem...when I run your code and enter <code>Park Street</code> when it asks for my station, it tells me I go from <code>Park Street -&gt; Kendall -&gt; Central</code> and through 3 stations, which seems correct to me....I&#39;m not sure why you&#39;re expecting to pass &quot;South Station&quot; when you start at &quot;Park Street&quot;, and your problem statement is unclear to me. Maybe you could try clarifying why you want to pass &quot;South Station&quot; and the problem statement some, might get people to help out some"}, {"owner": {"reputation": 83, "user_id": 11024655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/li52S.jpg?s=128&g=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/11024655/mohammad"}, "edited": false, "score": 0, "creation_date": 1551161943, "post_id": 54874676, "comment_id": 96528216, "body": "in short, I want the user to choose the sart station or point and the end station or point from gets"}, {"owner": {"reputation": 83, "user_id": 11024655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/li52S.jpg?s=128&g=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/11024655/mohammad"}, "edited": false, "score": 0, "creation_date": 1551177180, "post_id": 54874676, "comment_id": 96535968, "body": "thank you for your time it was my fault  I enter =&gt; &quot;Park Street&quot;  instead of enter =&gt;  Park Street"}], "answers": [{"tags": [], "owner": {"reputation": 2287, "user_id": 2842709, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/30f658c76a63bcb3f40cc305020e6109?s=128&d=identicon&r=PG", "display_name": "MicFin", "link": "https://stackoverflow.com/users/2842709/micfin"}, "is_accepted": true, "score": 0, "last_activity_date": 1551162438, "last_edit_date": 1551162438, "creation_date": 1551162009, "answer_id": 54879502, "question_id": 54874676, "link": "https://stackoverflow.com/questions/54874676/how-to-select-element-from-array-by-it-value-that-taken-from-input-user-gets/54879502#54879502", "title": "how to select element from array by it value that taken from input user (gets)", "body": "<pre><code># DEFINE SUBWAY\nsubway =\n {\n     \"Red_line\":[\"South Station\",\"Park Street\",\"Kendall\",\"Central\",\"Harvard\",\"Porter\",\"Davis\",\"Alewife\"]\n}\n\n# GET START STATION FROM USER\nputs\"put ur start Station \"\nsta = gets.chomp.to_s \nputs sta\n\n# GET START STATION INDEX\nstart_station = subway[:Red_line].index(sta)\n\n# GET END STATION INDEX\nend_statio = subway[:Red_line].index(\"Central\")\n\n# BUG: \n# THIS ONLY WORKS IF END STATION IS AFTER START\n# SO ANY STATION AFTER CENTRAL IS A BUG\ntotal_point_in_redLine = subway[:Red_line][start_station..end_statio] \ntotal_number_in_redLine = subway[:Red_line][start_station..end_statio].length \n\nputs \"you will pass these Stations\"\nputs total_point_in_redLine\nputs \"total number of Stations is \"\nputs total_number_in_redLine\n</code></pre>\n\n<p>The bug is due to the range <code>[start_station..end_statio]</code> being used to access the values in the <code>subway[:Red_line]</code> array needs to go from low to high so the first value in the range can not be higher than the last.  When the <code>start_station</code> is 5 and the <code>end_station</code> is 3 then the range is <code>subway[:Red_line][5..3]</code> and you need it to be reversed <code>subway[:Red_line][3..5]</code>.</p>\n\n<p>To fix this bug you could use a condition </p>\n\n<pre><code>if start_station &lt;= end_statio\n  total_point_in_redLine = subway[:Red_line][start_station..end_statio] \n  total_number_in_redLine = subway[:Red_line][start_station..end_statio].length \nelse \n  total_point_in_redLine = subway[:Red_line][end_statio..start_station] \n  total_number_in_redLine = subway[:Red_line][end_statio..start_station].length \nend\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 11024655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/li52S.jpg?s=128&g=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/11024655/mohammad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 54879502, "answer_count": 1, "score": 0, "last_activity_date": 1551162438, "creation_date": 1551128877, "last_edit_date": 1551161784, "question_id": 54874676, "link": "https://stackoverflow.com/questions/54874676/how-to-select-element-from-array-by-it-value-that-taken-from-input-user-gets", "title": "how to select element from array by it value that taken from input user (gets)", "body": "<p><code>enter code here</code>Good evening everyone\nI want to make the user write the start_station from Red_line </p>\n\n<h2>for example in this Scenario</h2>\n\n<p>\"put ur start Station \"\n\"Park Street\"\nyou will pass these Stations\nSouth Station\n,Park Street,\nKendall,\nCentral.\ntotal number of Stations is :\n4.</p>\n\n<h2>the problem is</h2>\n\n<p>when i'm trying to make user input the value it doesn't work (like what you can see in <em>start_station</em> and <strong>str</strong> input but when I make it Without choosing to work just fine Like What you can't see In <em>start_station</em></p>\n\n<p>I hope it's clear enough, thank you for your time</p>\n\n<pre><code>subway =\n {\n     \"Red_line\":[\"South Station\",\"Park Street\",\"Kendall\",\"Central\",\"Harvard\",\"Porter\",\"Davis\",\"Alewife\"]\n}\n\nputs\"put ur start Station \"\n sta = gets.chomp.to_s #&lt;&lt;==== this my attempted to use sta to make it like input  user\nputs sta\n\nstart_station = subway[:Red_line].index(sta) # &lt;&lt;=== you can see that I put sta as index of subway array\nputs start_station\n\nend_station = subway[:Red_line].index(\"Central\")\n\ntotal_point_in_redLine = subway[:Red_line][start_station..end_statio] #name of points\ntotal_number_in_redLine = subway[:Red_line][start_station..end_statio].length #number of station\n\nputs \"you will pass these Stations\"\nputs total_point_in_redLine\nputs \"total number of Stations is \"\nputs total_number_in_redLine\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "reactjs", "validation"], "answers": [{"tags": [], "owner": {"reputation": 1532, "user_id": 4686454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MM3Ef.jpg?s=128&g=1", "display_name": "jakemingolla", "link": "https://stackoverflow.com/users/4686454/jakemingolla"}, "is_accepted": false, "score": 1, "last_activity_date": 1551126724, "creation_date": 1551126724, "answer_id": 54874204, "question_id": 54874181, "link": "https://stackoverflow.com/questions/54874181/how-to-handle-params-validation-both-in-js-and-rails/54874204#54874204", "title": "How to handle params validation both in JS and Rails?", "body": "<p>Have you thought of using <a href=\"https://json-schema.org/\" rel=\"nofollow noreferrer\"><code>json-schema</code></a>? There are plenty of plugins to <a href=\"https://ajv.js.org/\" rel=\"nofollow noreferrer\">validate it server side</a>, <a href=\"https://github.com/YousefED/typescript-json-schema\" rel=\"nofollow noreferrer\">typescript integration</a>, and probably lots more I don't know about!</p>\n"}], "owner": {"reputation": 4476, "user_id": 735779, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/19ffcd943c2ed18b79482f29f13014f6?s=128&d=identicon&r=PG", "display_name": "Hartator", "link": "https://stackoverflow.com/users/735779/hartator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551200681, "creation_date": 1551126595, "last_edit_date": 1551200681, "question_id": 54874181, "link": "https://stackoverflow.com/questions/54874181/how-to-handle-params-validation-both-in-js-and-rails", "title": "How to handle params validation both in JS and Rails?", "body": "<p>I am wondering what will be the better way to handle params validation both in the frontend (JS/React) and in our backend (Rails/Mongoid). I was thinking doing validation directly in the Rails controllers as almost everything is optional, it's for an API, and there are numerous parameters. Mongoid also populates each <code>field</code> entry with a <code>null</code> value even if the field is not needed.</p>\n\n<p>I was thinking have a config file like this:</p>\n\n<pre><code>search_engine_a:\n  q:\n    required: true\n    explanation: Query to be searched\n    error: Query is required\n  num:\n    explanation: Number of results\n    type: Integer\n    interval: 0_100\n    error: Needs to be an integer between 0 and 100\n  start\n    explanation: Results offset\n    type: Integer\n    error: Needs to be an integer between 0 and 100\n  ...\nsearch_engine_b:\n  wd:\n    required: true\n    explanation: Query to be searched\n    ...\n  ...\n...\n</code></pre>\n\n<p>Then have some code in Ruby on Rails to parse this to use against our API requests and provide the error message if needed. Same thing in JS for the frontend. Parse the same configuration file and use it provide errors and explanations in our API playground interface.</p>\n\n<p>Does this make sense or am I reinventing the wheel?</p>\n\n<p>[EDIT] To give a more precise idea, it's for this API: <a href=\"https://serpapi.com/search-api\" rel=\"nofollow noreferrer\">https://serpapi.com/search-api</a></p>\n"}, {"tags": ["ruby", "jruby"], "owner": {"reputation": 327, "user_id": 4305311, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/149ddf406ab6db564b1aca6f09a77c58?s=128&d=identicon&r=PG", "display_name": "Calvin", "link": "https://stackoverflow.com/users/4305311/calvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1551124777, "creation_date": 1551124777, "question_id": 54873772, "link": "https://stackoverflow.com/questions/54873772/writing-simple-plugin-in-archivesspace", "title": "writing simple plugin in ArchivesSpace", "body": "<p>I am writing a healthcheck plugin for our instance of archivesspace in the form of archivespace plugin. It is a Jruby application and the instruction for the plugins are similar to Ruby on Rails. Seems simple enough on rails application but when I followed the plugin documentations but it is still not working, can someone point me in the right direction, I basically just need to have archivespace Url :/plugins/healthcheck/ to hit the archivespace interface url, if it responds 200 response then have the page indicate success message in html. Below are code snips, any help is appreciated thanks!</p>\n\n<pre><code>-plugins\n    -healthcheck\n        -backend\n            -healthcheck. rb\n       -frontend\n             -controller\n                - healthcheck_controller.rb\n</code></pre>\n\n<p>healthcheck.rb</p>\n\n<pre><code>class ArchivesSpaceService &lt; Sinatra::Base\n\n  Endpoint.get('/healthcheck')\n  .returns([200, \"{'reply', 'status:ok'}\"]) \\\n\nend\n</code></pre>\n\n<p>healthcheck_controller.rb</p>\n\n<pre><code>require 'net/http'\nrequire 'socket'\nclass ApplicationController &lt; ActionController::Base\n  def healthcheck\n\n    hostname = \"status of server \" + Socket.gethostname\n    uri = 'http://example.com/index.html'\n    status_message = \"System OK\"\n    datetime = Time.now\n  begin\n    res = Net::HTTP.get_response(URI(uri))\n    status_code = res.code.to_i\n    if status_code &gt; 399\n       status_code = 424\n       status_message = \"One or more services are currently impacted\"\n       img = \"/img/fail.png\"\n    else\n       img = \"/img/pass.png\"\n    end\n\n    render text: \"&lt;h&gt;#{hostname} #{status_code} &lt;/h&gt;ArchivesSpace Ok?:&lt;br&gt;&lt;img src='#{img}'&gt; #{uri}&lt;br&gt;&lt;br&gt;status:ok&lt;br&gt;\" , status: status_code\n\n  end\nend\nend\n</code></pre>\n"}, {"tags": ["regex", "ruby", "parsing"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1551126241, "post_id": 54873578, "comment_id": 96518179, "body": "I&#39;d suggest <code>&#47;\\([^()]*\\b\\d{4}\\b[^()]*\\)&#47;</code> to avoid matching <code>(00000000008)</code>"}, {"owner": {"reputation": 91443, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1551127711, "post_id": 54873578, "comment_id": 96518886, "body": "@WiktorStribi\u017cew That is indeed a good suggestion."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551130165, "post_id": 54873578, "comment_id": 96520001, "body": "Your expected result contradicts your statement of the problem. Presumably, you want to remove the parentheses as well as the string they contain, and also a space if two spaces would be left after removing <code>&quot;(...)&quot;</code>."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1551137081, "post_id": 54873578, "comment_id": 96522485, "body": "Well, <code>s.split(&#47;\\s*\\([^()]*\\b\\d{4}\\b[^()]*\\)&#47;).join(&quot;&quot;)</code> or <code>s.gsub(&#47;\\s*\\([^()]*\\b\\d{4}\\b[^()]*\\)&#47;, &#39;&#39;).strip</code> will do the job."}], "answers": [{"tags": [], "owner": {"reputation": 91443, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "is_accepted": false, "score": 1, "last_activity_date": 1551124874, "last_edit_date": 1551124874, "creation_date": 1551124261, "answer_id": 54873669, "question_id": 54873578, "link": "https://stackoverflow.com/questions/54873578/regex-to-remove-text-in-brackets-if-year-present/54873669#54873669", "title": "Regex to remove text in brackets if year present", "body": "<p>If the 4 digits can be at any position and there are no further opening and closing parenthesis, one option to get that match could be to:</p>\n\n<p>Match the opening parenthesis, then match 0+ times not an opening or closing parenthesis. Then match 4 digits and again 0+ times not an opening or closing parenthesis.</p>\n\n<pre><code>\\([^()]*\\d{4}[^()]*\\)\n</code></pre>\n\n<p>See a <a href=\"https://rubular.com/r/vBo0WrqZ78803V\" rel=\"nofollow noreferrer\">regex demo</a></p>\n"}], "owner": {"reputation": 57, "user_id": 2027714, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IJF2f.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/2027714/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1551124874, "creation_date": 1551123904, "question_id": 54873578, "link": "https://stackoverflow.com/questions/54873578/regex-to-remove-text-in-brackets-if-year-present", "title": "Regex to remove text in brackets if year present", "body": "<p>Remove all text within brackets if a year YYYY is present at any position within brackets.</p>\n\n<p>Here is what I tried already:</p>\n\n<pre><code>a = []\nwhile line = DATA.gets       \n  a = a.push(line.split(/\\(.+\\d{4}.+\\)/))\nend                        \n\na.each {|x|\np x}\n__END__\nStart text (Name, 2019) and more text (reg bracket - keep) and more text (2018 references - remove).\n</code></pre>\n\n<p>I am expecting this text returned: \"Start text and more text (reg bracket - keep) and more text.\"</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "selenium", "ocra"], "comments": [{"owner": {"reputation": 1863, "user_id": 2730283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jqcif.jpg?s=128&g=1", "display_name": "Stefan Crain", "link": "https://stackoverflow.com/users/2730283/stefan-crain"}, "edited": false, "score": 3, "creation_date": 1551128126, "post_id": 54873178, "comment_id": 96519072, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/22952022/ruby-selenium-cannot-load-such-file-selenium-webdriver-loaderror\">Ruby selenium cannot load such file -- selenium-webdriver (LoadError)</a>"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1551156390, "post_id": 54873178, "comment_id": 96526611, "body": "Ocra will not convert your code your binaries instead it will pack your project into exe, any one can see your source code. It will unpack your code you run."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 7815935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b1c0097c04ceebafaaccb7f755451dd?s=128&d=identicon&r=PG&f=1", "display_name": "seshaddri", "link": "https://stackoverflow.com/users/7815935/seshaddri"}, "edited": false, "score": 0, "creation_date": 1551194974, "post_id": 54874863, "comment_id": 96546973, "body": "Thanks now i am getting different error what to do ?================<code>&lt;top (required)&gt;&#39;: uninitialized constant CommonElement (NameError)         from C:&#47;Bitnami&#47;rubystack-2.3.8-1&#47;ruby&#47;lib&#47;ruby&#47;gems&#47;2.3.0&#47;gems&#47;o&zwnj;&#8203;cra-1.3.10&#47;bin&#47;ocra:&zwnj;&#8203;1211:in </code>load&#39;         from C:/Bitnami/rubystack-2.3.8-1/ruby/lib/ruby/gems/2.3.0/gems/o&zwnj;&#8203;cra-1.3.10/bin/ocra:&zwnj;&#8203;1211:in <code>&lt;top (required)&gt;&#39;         from C:&#47;Bitnami&#47;rubystack-2.3.8-1&#47;ruby&#47;bin&#47;ocra:23:in </code>load&#39;         from C:/Bitnami/rubystack-2.3.8-1/ruby/bin/ocra:23:in `&lt;main&gt;&#39;=================="}, {"owner": {"reputation": 904, "user_id": 3974617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f0860c4aef216eb95f5b4b329ef65a?s=128&d=identicon&r=PG", "display_name": "Simon L. Brazell", "link": "https://stackoverflow.com/users/3974617/simon-l-brazell"}, "reply_to_user": {"reputation": 5, "user_id": 7815935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b1c0097c04ceebafaaccb7f755451dd?s=128&d=identicon&r=PG&f=1", "display_name": "seshaddri", "link": "https://stackoverflow.com/users/7815935/seshaddri"}, "edited": false, "score": 0, "creation_date": 1551240869, "post_id": 54874863, "comment_id": 96564229, "body": "Did you install the other dependencies also? Like <code>page-object</code>?"}], "tags": [], "owner": {"reputation": 904, "user_id": 3974617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f0860c4aef216eb95f5b4b329ef65a?s=128&d=identicon&r=PG", "display_name": "Simon L. Brazell", "link": "https://stackoverflow.com/users/3974617/simon-l-brazell"}, "is_accepted": true, "score": 0, "last_activity_date": 1551129703, "creation_date": 1551129703, "answer_id": 54874863, "question_id": 54873178, "link": "https://stackoverflow.com/questions/54873178/ocra-ruby-conversion-to-exe-how-to-overcome-required-lib/54874863#54874863", "title": "ocra ruby conversion to exe how to overcome required lib", "body": "<p>You just need to install the dependencies in your development environment and ocra will package them into the exe for you.</p>\n\n<p>E.g. gem install selenium-webdriver</p>\n\n<p>And then run the build again. Do this for all your projects dependencies.</p>\n"}], "owner": {"reputation": 5, "user_id": 7815935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b1c0097c04ceebafaaccb7f755451dd?s=128&d=identicon&r=PG&f=1", "display_name": "seshaddri", "link": "https://stackoverflow.com/users/7815935/seshaddri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "accepted_answer_id": 54874863, "answer_count": 1, "score": 0, "last_activity_date": 1551131634, "creation_date": 1551122040, "last_edit_date": 1551131634, "question_id": 54873178, "link": "https://stackoverflow.com/questions/54873178/ocra-ruby-conversion-to-exe-how-to-overcome-required-lib", "title": "ocra ruby conversion to exe how to overcome required lib", "body": "<p>I am new to Ruby, and trying to find a solution to convert existing ruby scripts  to exe executables. I choose OCRA to convert ruby script to executbales. I am unable to convert this files to executable. The ocra conversition throwing error , that unable to load required libraries. \nThanks in advance.</p>\n\n<pre><code>===========================================\n\nrequire 'selenium-webdriver'\nrequire 'page-object'\n\nclass SubjectSearchPage &lt; CommonElement\n  include PageObject\n\n  text_field(:ssnField, :id =&gt; \"SSN\")\n  button(:searchBtn, :css =&gt; 'button[data-test-id=\"20180820140732083632904\"]')\n  h2(:resultsHeaderTitle, :css =&gt; 'div[data-test-id=\"201808231334560745670_header\"] h2.header-title')\n  elements(:resultRows, :css =&gt; '#bodyTbl_right &gt; tbody &gt; tr')\n  span(:result, :css =&gt; 'span[data-test-id=\"2016072109335505834280\"]')\n\nend\n\n=======================================================\n\nc:\\Users\\seshaddri\\git\\pega-functional-tests\\selenium-ruby\\pages\\subject_mgmt&gt;ocra subject_search_page.rb --add-all-core\n=== Loading script to check dependencies\nC:/Bitnami/rubystack-2.3.8-1/ruby/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- selenium-webdriver (LoadError)\n        from C:/Bitnami/rubystack-2.3.8-1/ruby/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from c:/Users/seshaddri/git/pega-functional-tests/selenium-ruby/pages/subject_mgmt/subject_search_page.rb:2:in `&lt;top (required)&gt;'\n        from C:/Bitnami/rubystack-2.3.8-1/ruby/lib/ruby/gems/2.3.0/gems/ocra-1.3.10/bin/ocra:1211:in `load'\n        from C:/Bitnami/rubystack-2.3.8-1/ruby/lib/ruby/gems/2.3.0/gems/ocra-1.3.10/bin/ocra:1211:in `&lt;top (required)&gt;'\n        from C:/Bitnami/rubystack-2.3.8-1/ruby/bin/ocra:23:in `load'\n        from C:/Bitnami/rubystack-2.3.8-1/ruby/bin/ocra:23:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin", "kaminari"], "answers": [{"tags": [], "owner": {"reputation": 1641, "user_id": 790737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4b5cec3d638d5eeefd2b32800907397?s=128&d=identicon&r=PG", "display_name": "Sjors Branderhorst", "link": "https://stackoverflow.com/users/790737/sjors-branderhorst"}, "is_accepted": false, "score": 0, "last_activity_date": 1551624874, "creation_date": 1551624874, "answer_id": 54970116, "question_id": 54872578, "link": "https://stackoverflow.com/questions/54872578/how-do-i-define-multiple-paginators-for-the-same-page-on-active-admin/54970116#54970116", "title": "How do i define multiple paginators for the same page on active admin?", "body": "<p>It is possible to set the name of the page param. This question is closely related to this answer: <a href=\"https://stackoverflow.com/a/6721703/790737\">https://stackoverflow.com/a/6721703/790737</a> . ActiveAdmin wraps Kaminari, but will pass the param_name parameter to the pagination links. So I think you should be able to write:</p>\n\n<pre><code>paginated_collection(my_collection.page(params[\"custom_page_param\"]).per(5), :param_name =&gt; 'custom_page_param') do\n  table_for collection do |t|\n     ...\n  end\nend\n</code></pre>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 1237, "user_id": 2928593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30a2d9efe76943eafcc55e840804c5f0?s=128&d=identicon&r=PG", "display_name": "Lopes", "link": "https://stackoverflow.com/users/2928593/lopes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551624874, "creation_date": 1551119423, "question_id": 54872578, "link": "https://stackoverflow.com/questions/54872578/how-do-i-define-multiple-paginators-for-the-same-page-on-active-admin", "title": "How do i define multiple paginators for the same page on active admin?", "body": "<p>I am trying to create a simple dashboard on active admin.</p>\n\n<p>The idea here is to have multiple panels that serve as a quick view of different models. The problem is that when I move between pages it affects all paginators.</p>\n\n<p>I am doing this</p>\n\n<pre><code>paginated_collection(my_collection.page(params[:page_2]).per(5)) do\n   table_for collection do |t|\n       ...\n   end\nend\n</code></pre>\n\n<p>Is it possible to have multiple paginators on active admin for the same page?</p>\n"}, {"tags": ["arrays", "ruby", "hash", "average"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551131441, "post_id": 54872520, "comment_id": 96520516, "body": "In future, consider waiting longer before selecting an answer. A quick selection may discourage other answers and some consider it disrespectful to those still working on their answers. Also, you might find that by waiting awhile (&gt;= 2 hours perhaps) a better answer will appear.  The point is there&#39;s no rush. I know you&#39;re new to SO."}, {"owner": {"reputation": 61, "user_id": 10791492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d77a40f469727998d2e5355176bee159?s=128&d=identicon&r=PG&f=1", "display_name": "RossyBergg", "link": "https://stackoverflow.com/users/10791492/rossybergg"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551134869, "post_id": 54872520, "comment_id": 96521810, "body": "Thanks for the feedback I&#39;ll take that on board. Yes new to stack overflow also so I&#39;ll make sure to keep this in mind when asking any other questions. Thanks again. Everyone have been very helpful"}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1551120626, "last_edit_date": 1551120626, "creation_date": 1551119562, "answer_id": 54872610, "question_id": 54872520, "link": "https://stackoverflow.com/questions/54872520/average-values-in-an-array-of-hashes-with-duplicate-keys/54872610#54872610", "title": "Average values in an array of hashes with duplicate keys", "body": "<p>I would do something like this:</p>\n\n<pre><code>array = [{\"1\" =&gt; 1, \"2\" =&gt; 2, \"3\" =&gt;3},{\"1\" =&gt; 1, \"2\" =&gt; 2, \"3\" =&gt;3},{\"1\" =&gt; 1, \"2\" =&gt; 2, \"3\" =&gt;3}]\narray.map { |hash| hash['1'] }.inject { |sum, el| sum + el }.to_f / array.size\n#=&gt; 1.0\n</code></pre>\n\n<p><code>array.map { |hash| hash['1'] }</code> extracts the values for all elements with the key <code>'1'</code> (<code>[1,1,1]</code>) in this example. And <code>.inject{ |sum, el| sum + el }.to_f / array.size</code> calculates the average.</p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 10791492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d77a40f469727998d2e5355176bee159?s=128&d=identicon&r=PG&f=1", "display_name": "RossyBergg", "link": "https://stackoverflow.com/users/10791492/rossybergg"}, "edited": false, "score": 0, "creation_date": 1551125448, "post_id": 54872740, "comment_id": 96517848, "body": "fantastic thank you, worked like a treat!. On reflection my array was a little different, each key &amp; value was in a different hash as they were added individually by a .push in a loop which meant your solution was mapping &#39;nil&#39; (my fault). Tho i got past this by adding .compact before your .then to remove the nils.   Thanks again!"}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 2, "last_activity_date": 1551132486, "last_edit_date": 1551132486, "creation_date": 1551120082, "answer_id": 54872740, "question_id": 54872520, "link": "https://stackoverflow.com/questions/54872520/average-values-in-an-array-of-hashes-with-duplicate-keys/54872740#54872740", "title": "Average values in an array of hashes with duplicate keys", "body": "<p>Considering the Ruby version, yield_self (alias then) might work:</p>\n\n<pre><code>[{ \"1\" =&gt; 10, \"2\" =&gt; 2, \"3\" =&gt;3 },\n { \"1\" =&gt; 43, \"2\" =&gt; 2, \"3\" =&gt;3 },\n { \"1\" =&gt; 4, \"2\" =&gt; 2, \"3\" =&gt;3 }].map { |hash| hash.fetch('1', 0) }.then { |arr| arr.sum.fdiv(arr.size) }\n# 19.0\n</code></pre>\n\n<p>Where <code>(10 + 43 + 4) / 3 = 19.0</code>, not your example, but not just 1 + 1 + 1.</p>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1551124696, "last_edit_date": 1551124696, "creation_date": 1551124205, "answer_id": 54873659, "question_id": 54872520, "link": "https://stackoverflow.com/questions/54872520/average-values-in-an-array-of-hashes-with-duplicate-keys/54873659#54873659", "title": "Average values in an array of hashes with duplicate keys", "body": "<p>Given the array (I changed the values for easy of debug):</p>\n\n<pre><code>array = [{\"1\" =&gt; 0, \"2\" =&gt; 2, \"3\" =&gt;3}, {\"1\" =&gt; 1, \"2\" =&gt; 4, \"3\" =&gt;6}, {\"1\" =&gt; 2, \"2\" =&gt; 6, \"3\" =&gt;9}]\n</code></pre>\n\n<p>This code map each key to the average of values:</p>\n\n<pre><code>array.each_with_object(Hash.new{ |k,v| k[v] = [ ]}) { |h, hh| h.each { |k,v| hh[k] &lt;&lt; v } }.transform_values { |k| k.sum.to_f/k.size }\n\n#=&gt;  {\"1\"=&gt;1.0, \"2\"=&gt;4.0, \"3\"=&gt;6.0}\n</code></pre>\n\n<p><hr>\nMethods used:</p>\n\n<ul>\n<li><a href=\"https://ruby-doc.org/core-2.6.1/Enumerable.html#method-i-each_with_object\" rel=\"nofollow noreferrer\">Enumerable#each_with_object</a></li>\n<li><a href=\"https://ruby-doc.org/core-2.6.1/Hash.html#method-i-default\" rel=\"nofollow noreferrer\">Hash#default</a></li>\n<li><a href=\"https://ruby-doc.org/core-2.6.1/Enumerator.html#method-i-each\" rel=\"nofollow noreferrer\">Enumerator#each</a></li>\n<li><a href=\"https://ruby-doc.org/core-2.6.1/Hash.html#method-i-transform_values\" rel=\"nofollow noreferrer\">Hash#transform_values</a></li>\n<li><a href=\"https://ruby-doc.org/core-2.6.1/Array.html#method-i-sum\" rel=\"nofollow noreferrer\">Array#sum</a></li>\n<li><a href=\"https://ruby-doc.org/core-2.6.1/Array.html#method-i-size\" rel=\"nofollow noreferrer\">Array#size</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1551131527, "post_id": 54875021, "comment_id": 96520543, "body": "Best answer, imo. Note this assumes the array is not empty."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1551132302, "post_id": 54875021, "comment_id": 96520823, "body": "Nice use of sum, consider there will be a TypeError if there&#39;s a hash within the array without the &#39;1&#39; key (I fell for the same case)."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1551141232, "post_id": 54875021, "comment_id": 96523596, "body": "@SebastianPalma you could do <code>{|h| h[&#39;1&#39;].to_i }</code> to guard against nils."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1551142672, "post_id": 54875021, "comment_id": 96523906, "body": "That&#39;s pretty nice @steenslag"}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 4, "last_activity_date": 1551131106, "last_edit_date": 1551131106, "creation_date": 1551130498, "answer_id": 54875021, "question_id": 54872520, "link": "https://stackoverflow.com/questions/54872520/average-values-in-an-array-of-hashes-with-duplicate-keys/54875021#54875021", "title": "Average values in an array of hashes with duplicate keys", "body": "<p>Array has a <code>sum</code> method nowadays, which takes a block. It basically sums whatever the block returns:</p>\n\n<pre><code>array = [{\"1\" =&gt; 0, \"2\" =&gt; 2, \"3\" =&gt;3}, {\"1\" =&gt; 1, \"2\" =&gt; 4, \"3\" =&gt;6}, {\"1\" =&gt; 2, \"2\" =&gt; 6, \"3\" =&gt;9}]\narray.sum{|h| h['1']}.fdiv(array.size)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1668, "user_id": 1576822, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FY9gu.jpg?s=128&g=1", "display_name": "Sergio Belevskij", "link": "https://stackoverflow.com/users/1576822/sergio-belevskij"}, "is_accepted": false, "score": 0, "last_activity_date": 1551156581, "creation_date": 1551156581, "answer_id": 54878613, "question_id": 54872520, "link": "https://stackoverflow.com/questions/54872520/average-values-in-an-array-of-hashes-with-duplicate-keys/54878613#54878613", "title": "Average values in an array of hashes with duplicate keys", "body": "<pre class=\"lang-rb prettyprint-override\"><code>array_data = [\n  {\"1\" =&gt; 1, \"2\" =&gt; 2, \"3\" =&gt;3}, \n  {\"1\" =&gt; 1, \"2\" =&gt; 2, \"3\" =&gt;3}, \n  {\"1\" =&gt; 1, \"2\" =&gt; 2, \"3\" =&gt;3}\n]\n\nclass Hash\n  def get_first\n    self['1']\n  end\nend\n\nclass Array\n  def avg\n    sum / size\n  end\nend\n\navg = array_data.map(&amp;:get_first).avg\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 10791492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d77a40f469727998d2e5355176bee159?s=128&d=identicon&r=PG&f=1", "display_name": "RossyBergg", "link": "https://stackoverflow.com/users/10791492/rossybergg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 54872740, "answer_count": 5, "score": 3, "last_activity_date": 1551165071, "creation_date": 1551119199, "last_edit_date": 1551165071, "question_id": 54872520, "link": "https://stackoverflow.com/questions/54872520/average-values-in-an-array-of-hashes-with-duplicate-keys", "title": "Average values in an array of hashes with duplicate keys", "body": "<p>I have an array of hashes set up as below:</p>\n\n<pre><code>array = [\n  {\"1\" =&gt; 1, \"2\" =&gt; 2, \"3\" =&gt;3},\n  {\"1\" =&gt; 1, \"2\" =&gt; 2, \"3\" =&gt;3}, \n  {\"1\" =&gt; 1, \"2\" =&gt; 2, \"3\" =&gt;3}\n]\n</code></pre>\n\n<p>I'm trying to find a way to average the values of all the hashes with key <code>\"1\"</code>, for example.</p>\n\n<p>Can someone help?</p>\n"}, {"tags": ["arrays", "ruby", "hash", "gsub"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1551116556, "post_id": 54871017, "comment_id": 96513968, "body": "To set off code from text indent the code four spaces or select the code and click on the icon <code>{}</code>. If the code is within a sentence set it off by enclosing it in backticks (<code>`</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 10909804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38600b582c607064db7c5940b6431f21?s=128&d=identicon&r=PG&f=1", "display_name": "Wilsonmarcos", "link": "https://stackoverflow.com/users/10909804/wilsonmarcos"}, "edited": false, "score": 0, "creation_date": 1551120272, "post_id": 54872206, "comment_id": 96515631, "body": "This was very helpful, thanks.. Still, like you ask, I do not want to change every instance of the Chinese name, only the one that appears in the line I specified above. I will try to solve it by creating an object matching into input. Thanks a lot for your reply!"}], "tags": [], "owner": {"reputation": 1298, "user_id": 6305204, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jGfSZ.png?s=128&g=1", "display_name": "con--", "link": "https://stackoverflow.com/users/6305204/con"}, "is_accepted": false, "score": 1, "last_activity_date": 1551118481, "last_edit_date": 1551118481, "creation_date": 1551117931, "answer_id": 54872206, "question_id": 54871017, "link": "https://stackoverflow.com/questions/54871017/elegant-simple-ruby-way-to-gsub-sub-values-in-an-array-hash-with-values-in-an/54872206#54872206", "title": "Elegant, simple Ruby way to gsub!/sub! values in an array/hash with values in another one when in input?", "body": "<p>You're on the right track, just not taking advantage of the hash.\nInstead of an array of hashes, just use a hash, with chinese company name as key, english name as value.</p>\n\n<pre><code>companies = {'\u5982\u8208': 'Roo Hsing Co., Ltd (TSEC:4414)', '\u65b0\u6f64': 'Shin Ruenn development Co., LTD. (GTSM:6186)' }\n\ninput = \"\u5982\u8208 blah blah blah\"\n\ncompanies.each do |k,v|\n  input.gsub!(\"#{k}\", \"#{v}\")\nend\n\nputs(input)\n# Roo Hsing Co., Ltd (TSEC:4414) blah blah blah\n</code></pre>\n\n<p>Note this assumes you want to translate every instance of every chinese company name in place. If the company names overlap, you'd need a slightly different approach.</p>\n"}], "owner": {"reputation": 27, "user_id": 10909804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38600b582c607064db7c5940b6431f21?s=128&d=identicon&r=PG&f=1", "display_name": "Wilsonmarcos", "link": "https://stackoverflow.com/users/10909804/wilsonmarcos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551118481, "creation_date": 1551113413, "last_edit_date": 1551117147, "question_id": 54871017, "link": "https://stackoverflow.com/questions/54871017/elegant-simple-ruby-way-to-gsub-sub-values-in-an-array-hash-with-values-in-an", "title": "Elegant, simple Ruby way to gsub!/sub! values in an array/hash with values in another one when in input?", "body": "<p>I am converting inputs that have, ideally always, the following line inside:</p>\n\n<p>\u672c\u8cc7\u6599\u7531(\u4e0a\u5e02\u516c\u53f8) \u201cName of a company in Chinese characters\u201c\u516c\u53f8\u63d0\u4f9b</p>\n\n<p>Until now I have the following:</p>\n\n<pre><code>input = gets\n\ninput.gsub!(/(\u672c\u8cc7\u6599\u7531\\(\u4e0a\u5e02\u516c\u53f8\\))(.{1,10})(\u516c\u53f8\u63d0\u4f9b)/)  {\"\nThe following information has been provided by: #{$2}\\n\"}\n\nCompany_making_the_Announcement = /(The following information has been provided by: )(.+)/.match(input)\n\nif Company_making_the_Announcement[2].match \"\u5982\u8208\"\ninput.gsub! Company_making_the_Announcement[2], \"Roo Hsing Co., Ltd (TSEC:4414)\"\n\nelsif Company_making_the_Announcement[2].match \"\u65b0\u6f64\"\ninput.gsub! Company_making_the_Announcement[2], \"Shin Ruenn development Co., LTD. (GTSM:6186)\"\n\nelsif Company_making_the_Announcement[2].match \"\u9060\u6771\u5546\u9280\"\ninput.gsub! Company_making_the_Announcement[2], \"Far Eastern International Bank Ltd. (TSEC:2845)\"\n\nend\n</code></pre>\n\n<p>The above code works just fine but it is sort of clumsy, especially since the list of companies is in the thousands and the code will grow enormously as I add a new company.\nI was thus thinking of a more efficient, elegant way to do this. \nI thought that working with arrays/hashes might do the trick, but I am not having luck since the below code keeps returning errors, no matter how I modify it:</p>\n\n<pre><code>companieslist = [{chin: '\u5982\u8208', eng: 'Roo Hsing Co., Ltd (TSEC:4414)' }, {chin: '\u65b0\u6f64', eng: 'Shin Ruenn development Co., LTD. (GTSM:6186)' }]\n\nCompany_making_the_Announcement = /(The following information has been provided by: )(companieslist[:chin])/.match(input) \n\nIf Company_making_the_Announcement[2].match (companieslist[:chin])\nInput.gsub! Company_making_the_Announcement[2], (companieslist[:eng])\n\nend\n</code></pre>\n\n<p>So, in short, what would be an efficient way to match values in an array (Chinese names) to values in another one (English names) and replace the first value with the second when they appear in an input?</p>\n\n<p>Thanks a lot</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1551112467, "post_id": 54870730, "comment_id": 96511863, "body": "Note: Ruby doesn&#39;t really have any &quot;plain-old Ruby objects&quot; as Java might. In Ruby we just call those classes."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1551112524, "post_id": 54870730, "comment_id": 96511893, "body": "If you&#39;re using a current version of Rails you&#39;ll have access to <a href=\"https://guides.rubyonrails.org/action_cable_overview.html\" rel=\"nofollow noreferrer\">ActionCable</a> which can make real-time refreshing a lot less messy."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1551112562, "post_id": 54870730, "comment_id": 96511918, "body": "Did you generate the <code>process</code> model? If not, <code>rails g model process</code> to fill in the gap."}, {"owner": {"reputation": 607, "user_id": 2130145, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fe1fb914161cc2f0edd40eee905b65a8?s=128&d=identicon&r=PG", "display_name": "John Wooten", "link": "https://stackoverflow.com/users/2130145/john-wooten"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1551112723, "post_id": 54870730, "comment_id": 96511979, "body": "I&#39;ll look into ActionCable.  I tried the rails g model process and it printed out: Running via Spring preloader in process 46121 but nothing seemed to change.  Same error undefined method &#39;all&#39; for Process:Module."}, {"owner": {"reputation": 813, "user_id": 1961154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af6b9daa60a6856519080acddfd5f254?s=128&d=identicon&r=PG", "display_name": "intale", "link": "https://stackoverflow.com/users/1961154/intale"}, "edited": false, "score": 1, "creation_date": 1551114305, "post_id": 54870730, "comment_id": 96512914, "body": "@JohnWooten you should avoid naming your custom classes/modules with names of ruby&#39;s core classes/modules. E.g. there is already <a href=\"http://ruby-doc.org/core-2.6.1/Process.html\" rel=\"nofollow noreferrer\">Process</a> module in ruby&#39;s core. Otherwise this could lead to unexpected behaviour."}], "answers": [{"comments": [{"owner": {"reputation": 607, "user_id": 2130145, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fe1fb914161cc2f0edd40eee905b65a8?s=128&d=identicon&r=PG", "display_name": "John Wooten", "link": "https://stackoverflow.com/users/2130145/john-wooten"}, "edited": false, "score": 0, "creation_date": 1551150923, "post_id": 54873155, "comment_id": 96525523, "body": "That\u2019s the impression I\u2019m getting, RoR is overkill as it\u2019s directed towards database use. I think I\u2019ll resort to my old JavaScript approach as I know I can use web services from there."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 607, "user_id": 2130145, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fe1fb914161cc2f0edd40eee905b65a8?s=128&d=identicon&r=PG", "display_name": "John Wooten", "link": "https://stackoverflow.com/users/2130145/john-wooten"}, "edited": false, "score": 0, "creation_date": 1551173877, "post_id": 54873155, "comment_id": 96533943, "body": "Rails is out of the box, and MVC architecture, so unless you understand and need this pattern, you might wanna consider  alternatives.  See updated answer."}, {"owner": {"reputation": 607, "user_id": 2130145, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fe1fb914161cc2f0edd40eee905b65a8?s=128&d=identicon&r=PG", "display_name": "John Wooten", "link": "https://stackoverflow.com/users/2130145/john-wooten"}, "edited": false, "score": 0, "creation_date": 1551194726, "post_id": 54873155, "comment_id": 96546822, "body": "Thanks again.  I usually try to use an MVC architecture as I like the separation.  I was trying to use RoR as it &#39;formalized&#39; that, provided templates, authentication, and created very nice database based web sites.  Could you expand on your &#39;heres where your off the path of MVC&#39; please.  Do you mean I should do the rails generate, then in the monitor_process controller make the changes you suggest?  What do they do?"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 607, "user_id": 2130145, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fe1fb914161cc2f0edd40eee905b65a8?s=128&d=identicon&r=PG", "display_name": "John Wooten", "link": "https://stackoverflow.com/users/2130145/john-wooten"}, "edited": false, "score": 0, "creation_date": 1551205224, "post_id": 54873155, "comment_id": 96552677, "body": "I suggest spending time at <a href=\"https://guides.rubyonrails.org/\" rel=\"nofollow noreferrer\">guides.rubyonrails.org</a> which do a better job of explaining then I am. The <code>before_action</code> will get called on restful routes <code>only: [:show, :edit, :update, :destroy]</code> in this case.  If no params are passed in the <code>show</code> action for example, you will get the error."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 1, "last_activity_date": 1551174110, "last_edit_date": 1551174110, "creation_date": 1551121896, "answer_id": 54873155, "question_id": 54870730, "link": "https://stackoverflow.com/questions/54870730/where-is-ror-defining-objects-it-creates-when-you-run-rails-generate-scaffold-wi/54873155#54873155", "title": "Where is RoR defining objects it creates when you run rails generate scaffold without a database?", "body": "<p>Rails scaffold makes a lot of assumptions expecting a convention for your controller action to correspond to a database model/table.  As others have mentioned, you should avoid using <code>Process</code> as it is a core ruby module, instead I'd suggest <code>MonitorProcess</code>.</p>\n\n<p>If you want to use a database model to store things about process, then you'll need a model ( <code>rails g model monitor_process</code>)  and also for your controller use </p>\n\n<pre><code>rails generate scaffold monitor_processes\n</code></pre>\n\n<p>This however will build the standard MVC setup with , a migration to create the database table, a model class <code>MonitorProcess</code>,  a controller with RESTful routes ( index, show, new, create, update and destroy ), and views for index, show, new, edit, and a form partial used for new and edit, plus files setup for writing your tests.</p>\n\n<p>If you don't need to access the database model, you can remove these from your controller, or comment them out.  But here's were you're off the path of MVC.</p>\n\n<pre><code>before_action :set_monitor_process, only: [:show, :edit, :update, :destroy]\n\ndef set_process\n  @mocel_process = ModelProcess.find(params[:id])\nend\n</code></pre>\n\n<p>From here you can consider using action cable and use your custom js on that page however you want.  But do you even need rails for this app??  It sounds like it might be more overhead than you need.  Scaffold is a tool which makes rapid prototyping of basic data driven app pretty fast and easy.  But it comes with a lot of conventions you probably don't need for your use case.</p>\n\n<p>However, without knowing exactly what web services you want to create/monitor, and how,  It's hard to say whether you should or should not use Rails.  It's certainly able to be built to do many things outside of what Scaffold sets up for you.  That's just here for quick basic setup and avoiding a lot of boilerplate.   There's lots of frameworks to do things like background jobs etc.  But the question is, do you need MVC?  If not then you surely have other options.  If you need a backend only with decoupled front-end, you might have a look at <a href=\"https://edgeguides.rubyonrails.org/api\" rel=\"nofollow noreferrer\">Using Rails for API-only Applications</a>\nIf you like working with Ruby, <a href=\"http://sinatrarb.com\" rel=\"nofollow noreferrer\">Sinatra</a> might be another choice to <a href=\"https://github.com/sinatra/sinatra\" rel=\"nofollow noreferrer\">look into</a>.</p>\n"}], "owner": {"reputation": 607, "user_id": 2130145, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/fe1fb914161cc2f0edd40eee905b65a8?s=128&d=identicon&r=PG", "display_name": "John Wooten", "link": "https://stackoverflow.com/users/2130145/john-wooten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 54873155, "answer_count": 1, "score": 0, "last_activity_date": 1551174110, "creation_date": 1551112308, "question_id": 54870730, "link": "https://stackoverflow.com/questions/54870730/where-is-ror-defining-objects-it-creates-when-you-run-rails-generate-scaffold-wi", "title": "Where is RoR defining objects it creates when you run rails generate scaffold without a database?", "body": "<p>I am attempting to build a Ruby On Rails application that will allow the monitoring and controller of several Web Services.  I currently have those services operating and am able to see the 'status' of each service in a console application that lists the service and its status, viz.</p>\n\n<pre><code>Service1 Running\nService2 Paused\nService3 Waiting on Files\n</code></pre>\n\n<p>I want the RoR application to collect those responses into a collection of PORO objects called Process and the collection Processes, I think.  Then I would expect the default route to open the view 'process_list.html.erb' where a jQuery page would be used on load to create a DataTable 'process_table' that would be filled from that collection of Processes.  My problem is that, while I like the structure of RoR applications, I do not understand the flow of control in a RoR application.  If I were writing this in jQuery and javascript pages, I would know that my index.jsp page would include the jQuery DataTable javascript link which would be executed on loading the page.  That would reference another javascript function that would call the Web Service, collect the responses, convert that into a JSON array and return it to the DataTable, where it would be rendered as a table.  I could have a timer to periodically refresh the page, etc.  While it would work, and I have built such before, it seems like it would be much less 'organized' than a proper RoR application.</p>\n\n<p>Here are the steps I've taken so far to where I am stuck:</p>\n\n<p>1)    rails new maestro -O </p>\n\n<p>2)    cd maestro</p>\n\n<p>3)    rails generate scaffold processes show</p>\n\n<p>4)    In routes.rb I added:</p>\n\n<pre><code>  resources :processes, :only =&gt; [:show]\n  root 'processes#show'\n</code></pre>\n\n<p>This is supposed to take me to the apps/views/processes/show.html.erb page where I thought I could somehow provide a javascript page that would be executed on load to create the PORO objects and return them to DataTables as an array which could be handled via a foreach loop extracting the process.name, process.status into the table.  However, I get an error that in the app/controllers/process_controller.rb there is a section:</p>\n\n<pre><code>def set_process\n  @process = Process.find(params[:id])\nend\n</code></pre>\n\n<p>and 'find' is not defined for Process.  Now, I can't find a class 'Process' anywhere, and have no idea what this is or why it is being called.  There is a reference in an index method to @process = Process.all.  Again, where do I define these?</p>\n\n<p>Are the steps I showed above the correct way to start building such an application and if so what do I do to create or edit the Process class and add those methods?  Where do I put the javascript for this page?  A few pointers to where to look, what to read so that I can understand the flow of a RoR application would be appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1551112590, "last_edit_date": 1551112590, "creation_date": 1551112181, "answer_id": 54870675, "question_id": 54870641, "link": "https://stackoverflow.com/questions/54870641/how-does-rails-know-which-partial-name-to-render-when-rendering-a-collection/54870675#54870675", "title": "How does Rails know which partial name to render when rendering a collection?", "body": "<p>The relationship is <code>has_many :comments</code> which implies a model of type <code>Comment</code> which in turn implies a template partial name of <code>_comment</code>. The template name and the \"underscored\" version of the model name are what matter in this particular context.</p>\n\n<p>Ruby on Rails infers a lot of things from your definitions and can do a lot of work for you automatically if you follow the conventions.</p>\n"}], "owner": {"reputation": 51, "user_id": 10192738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EBCq0.jpg?s=128&g=1", "display_name": "Kaido", "link": "https://stackoverflow.com/users/10192738/kaido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 54870675, "answer_count": 1, "score": 0, "last_activity_date": 1551112590, "creation_date": 1551112034, "last_edit_date": 1551112203, "question_id": 54870641, "link": "https://stackoverflow.com/questions/54870641/how-does-rails-know-which-partial-name-to-render-when-rendering-a-collection", "title": "How does Rails know which partial name to render when rendering a collection?", "body": "<p>I was reading the starting guide of Rails and i got stucked in the section 7.1. I don't understand how the _comment partial they create in the guide can be rendered in the show view only by writing </p>\n\n<pre><code>  &lt;h2&gt;Comments&lt;/h2&gt;\n  &lt;%= render @article.comments %&gt;\n</code></pre>\n\n<p>I copy paste the rest of the guide with the code to make you understand the context:</p>\n\n<p>\"First, we will make a comment partial to extract showing all the comments for the article. Create the file app/views/comments/_comment.html.erb and put the following into it:\"</p>\n\n<pre><code>\n&lt;p&gt;\n  &lt;strong&gt;Commenter:&lt;/strong&gt;\n  &lt;%= comment.commenter %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Comment:&lt;/strong&gt;\n  &lt;%= comment.body %&gt;\n&lt;/p&gt;\n</code></pre>\n\n<p>\"Then you can change app/views/articles/show.html.erb to look like the following:\"</p>\n\n<pre><code>\n&lt;p&gt;\n  &lt;strong&gt;Title:&lt;/strong&gt;\n  &lt;%= @article.title %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Text:&lt;/strong&gt;\n  &lt;%= @article.text %&gt;\n&lt;/p&gt;\n\n&lt;h2&gt;Comments&lt;/h2&gt;\n&lt;%= render @article.comments %&gt;\n\n&lt;h2&gt;Add a comment:&lt;/h2&gt;\n&lt;%= form_with(model: [ @article, @article.comments.build ], local: true) do |form| %&gt;\n  &lt;p&gt;\n    &lt;%= form.label :commenter %&gt;&lt;br&gt;\n    &lt;%= form.text_field :commenter %&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;%= form.label :body %&gt;&lt;br&gt;\n    &lt;%= form.text_area :body %&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;%= form.submit %&gt;\n  &lt;/p&gt;\n&lt;% end %&gt;\n\n&lt;%= link_to 'Edit', edit_article_path(@article) %&gt; |\n&lt;%= link_to 'Back', articles_path %&gt;\n\n</code></pre>\n\n<p>\"This will now render the partial in app/views/comments/_comment.html.erb once for each comment that is in the @article.comments collection. As the render method iterates over the @article.comments collection, it assigns each comment to a local variable named the same as the partial, in this case comment which is then available in the partial for us to show.\"</p>\n\n<p>My question is, how ruby know that we want to render that specific partial to format each comments? The parlial name is _comment, but they don't even mention it in the article show. Thank you.</p>\n"}, {"tags": ["ruby", "difference"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1551110354, "post_id": 54870114, "comment_id": 96510702, "body": "If you want to do calculations on the times, why convert them back to strings before trying it?"}, {"owner": {"reputation": 7, "user_id": 10979084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b9f9a03749777705cc138386a9bec04?s=128&d=identicon&r=PG&f=1", "display_name": "V alves", "link": "https://stackoverflow.com/users/10979084/v-alves"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1551110650, "post_id": 54870114, "comment_id": 96510869, "body": "They got converted to string when use <code>.strftime(&#39;%H:%M&#39;)</code> to get the <code>hour</code> &amp; <code>min</code> plus, + <code>my_time</code> is already a <code>string</code> when I get it. Thanks for your edit btw @jonrsharpe"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1551110719, "post_id": 54870114, "comment_id": 96510912, "body": "Yes, I know that - my question is <i>why do you do that</i>? If you actually want times, for doing calculations, why create strings?"}, {"owner": {"reputation": 7, "user_id": 10979084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b9f9a03749777705cc138386a9bec04?s=128&d=identicon&r=PG&f=1", "display_name": "V alves", "link": "https://stackoverflow.com/users/10979084/v-alves"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1551110900, "post_id": 54870114, "comment_id": 96511000, "body": "@jonrsharpe <code>my_time</code> is already a string when I <i>get</i> it and I thought I need to do <code>.strftime(&#39;%H:%M&#39;)</code> in order to get hours and min from them. Otherwise I have less clues about exactly how to do it. Btw for <code>my_time</code> I also have it in unix timestamp for doing something like: <code>Time.at(1550229840)</code>  if that could help, but when I do <code>Time.at(1550229840) - Time.utc</code>, I get <code>TypeError: expected numeric</code>"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1551110964, "post_id": 54870114, "comment_id": 96511026, "body": "I understand why you&#39;re <i>parsing</i> it, from the string to a datetime, with <code>DateTime.parse(my_time)</code>. My point is: if you want to do calculations with it, <i>don&#39;t format it back to a string</i>."}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551110988, "post_id": 54870114, "comment_id": 96511040, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/34548355/ruby-calculate-time-difference-between-2-times\">Ruby: Calculate time difference between 2 times</a>"}, {"owner": {"reputation": 7, "user_id": 10979084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b9f9a03749777705cc138386a9bec04?s=128&d=identicon&r=PG&f=1", "display_name": "V alves", "link": "https://stackoverflow.com/users/10979084/v-alves"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1551116600, "post_id": 54870114, "comment_id": 96513985, "body": "@jonrsharpe I just tried the answer the in <i>duplicated marked</i> answer, and it doesn&#39;t work. <code>a = Time.parse(&#39;2015-12-31 22:00:00 +0100&#39;) b = Time.parse(&#39;2015-11-31 02:00:00 +0100&#39;) time_difference(a, b) &#47; 3600</code> would output <code>-676.0</code> and not <code>4</code>"}, {"owner": {"reputation": 7, "user_id": 10979084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b9f9a03749777705cc138386a9bec04?s=128&d=identicon&r=PG&f=1", "display_name": "V alves", "link": "https://stackoverflow.com/users/10979084/v-alves"}, "reply_to_user": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551116707, "post_id": 54870114, "comment_id": 96514037, "body": "@zeitnot I just tried the answer and it doesn&#39;t only hours and min that I mentioned and it take the whole date. for instance: <code>a = Time.parse(&#39;2015-12-31 22:00:00 +0100&#39;) b = Time.parse(&#39;2015-11-31 02:00:00 +0100&#39;) time_difference(a, b) &#47; 3600</code> would output <code>-676.0</code> and not <code>4</code>"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 10979084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b9f9a03749777705cc138386a9bec04?s=128&d=identicon&r=PG&f=1", "display_name": "V alves", "link": "https://stackoverflow.com/users/10979084/v-alves"}, "edited": false, "score": 0, "creation_date": 1551117929, "post_id": 54872164, "comment_id": 96514565, "body": "I copied the exact same <i>helper</i> and still getting wrong data as mentioned in the question"}, {"owner": {"reputation": 88, "user_id": 5439673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec5c6c4ba0667a04c0601db068f7691?s=128&d=identicon&r=PG&f=1", "display_name": "Eldar", "link": "https://stackoverflow.com/users/5439673/eldar"}, "reply_to_user": {"reputation": 7, "user_id": 10979084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b9f9a03749777705cc138386a9bec04?s=128&d=identicon&r=PG&f=1", "display_name": "V alves", "link": "https://stackoverflow.com/users/10979084/v-alves"}, "edited": false, "score": 0, "creation_date": 1551118607, "post_id": 54872164, "comment_id": 96514885, "body": "2015-12-31, 2015-11-31 - it seems to be because you use different months in your example."}], "tags": [], "owner": {"reputation": 88, "user_id": 5439673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ec5c6c4ba0667a04c0601db068f7691?s=128&d=identicon&r=PG&f=1", "display_name": "Eldar", "link": "https://stackoverflow.com/users/5439673/eldar"}, "is_accepted": false, "score": 0, "last_activity_date": 1551117745, "creation_date": 1551117745, "answer_id": 54872164, "question_id": 54870114, "link": "https://stackoverflow.com/questions/54870114/get-difference-between-2-hours/54872164#54872164", "title": "Get difference between 2 hours", "body": "<p>As mentioned in <a href=\"https://stackoverflow.com/questions/34548355/ruby-calculate-time-difference-between-2-times\">this answer</a> - you should add 24 hours if the difference is negative</p>\n\n<pre><code>def time_difference(time_a, time_b)\n  difference = time_b - time_a\n\n  if difference &gt; 0\n    difference\n  else\n    24 * 3600 + difference \n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": true, "score": 0, "last_activity_date": 1551120464, "creation_date": 1551120464, "answer_id": 54872829, "question_id": 54870114, "link": "https://stackoverflow.com/questions/54870114/get-difference-between-2-hours/54872829#54872829", "title": "Get difference between 2 hours", "body": "<p>I'm not sure I'm getting completely the point, but maybe this could work for you:</p>\n\n<p>Given the times, without converting to string.</p>\n\n<pre><code>my_time = '2019-02-24 16:52'\na = Time.parse(my_time)\nb = Time.utc(Time.now.year, Time.now.month, Time.now.day, Time.now.hour, Time.now.min)\n</code></pre>\n\n<p>With Ruby 2.6.1 (<a href=\"https://ruby-doc.org/core-2.6.1/Object.html#method-i-then\" rel=\"nofollow noreferrer\"><strong>Object#then</strong></a>):</p>\n\n<pre><code>[ ( Time.parse(a.to_s.split[1]) - Time.parse(b.to_s.split[1]) ) / 3600 ].then { |delta| delta[0] &lt; 0 ? 24 + delta[0] : delta[0] }\n</code></pre>\n\n<p>With Ruby 2.5 use <a href=\"https://ruby-doc.org/core-2.6.1/Object.html#method-i-yield_self\" rel=\"nofollow noreferrer\"><strong>Object#yield_self</strong></a>. </p>\n"}, {"tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1551121769, "last_edit_date": 1592644375, "creation_date": 1551121769, "answer_id": 54873136, "question_id": 54870114, "link": "https://stackoverflow.com/questions/54870114/get-difference-between-2-hours/54873136#54873136", "title": "Get difference between 2 hours", "body": "<blockquote>\n<p>In my application I need to get hour &amp; min from <em>something</em> and find its time difference to current UTC time.</p>\n</blockquote>\n<p><em>This does not make sense</em>.</p>\n<p>In a computer, time is not &quot;hour &amp; min&quot;. Time is a number of seconds since midnight January 1, 1970. Any other view of time to a computer is just window-dressing on top of that. My computer knows that it has been 1,551,120,948 seconds since midnight, January 1, 1970. Since it also understands the Gregorian calendar and time zones, it can display that to me as &quot;2019-02-25 13:55:48 -0500&quot;, but it's still just storing a total number of seconds.</p>\n<p>So when you say you want to compare &quot;current UTC time&quot; (which is a total number of seconds since 1970-01-01 00:00:00 +0000) to an &quot;hour &amp; min&quot;, I have no idea what you want.</p>\n<p>If you consider your example:</p>\n<blockquote>\n<p>For instance:</p>\n<pre><code>a = Time.parse('2015-12-31 02:00:00 +0100')\nb = Time.parse('2015-11-31 22:00:00 +0100')\nc = time_difference(a, b) / 3600\n</code></pre>\n<p>would become -676.0 and not 4</p>\n</blockquote>\n<p>Why would the difference be 4 hours? The simplest way I can think to avoid these being different dates is to construct a new time on the same date:</p>\n<pre><code>b_norm = Time.new(a.year, a.month, a.day, b.hour, b.min, b.sec)\nc = time_difference(a, b_norm) / 3600\n</code></pre>\n<p>But that gives a time difference of 20 (2AM to 10PM). The only way for it to be a difference of 4 hours is if you interpret b as being <em>from the previous day</em>. How do you know to do that?</p>\n<p>Your question is simply incomplete as written because an hour and minute need to exist on a particular day to make any sense for doing a calculation.</p>\n"}], "owner": {"reputation": 7, "user_id": 10979084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b9f9a03749777705cc138386a9bec04?s=128&d=identicon&r=PG&f=1", "display_name": "V alves", "link": "https://stackoverflow.com/users/10979084/v-alves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 54872829, "answer_count": 3, "score": 0, "last_activity_date": 1551121769, "creation_date": 1551110261, "last_edit_date": 1551116842, "question_id": 54870114, "link": "https://stackoverflow.com/questions/54870114/get-difference-between-2-hours", "title": "Get difference between 2 hours", "body": "<p>In my application I need to get <code>hour</code> &amp; <code>min</code> from <em>something</em> and find its time difference to current UTC time.</p>\n\n<p>Basically, I'm trying to get the time difference between 2 different <em>times/hours(&amp;min)</em>.</p>\n\n<pre><code>my_time = '2019-02-24 16:52' # This I get from my application\na = DateTime.parse(my_time).strftime('%H:%M')\n=&gt; '16:52'\n\nb = Time.utc(Time.now.year, Time.now.month, Time.now.day, Time.now.hour, Time.now.min).strftime('%H:%M')\n=&gt; '15:52'\n</code></pre>\n\n<p>Optimal way would to just do, but gives error since they are <em>of course</em> <code>string</code>:</p>\n\n<pre><code>time_difference = a - b  # out would be +1\n</code></pre>\n\n<p>I have also tried the answer in the <em>duplicated question</em>, but it takes the date in considration.</p>\n\n<p>For instance:</p>\n\n<pre><code>a = Time.parse('2015-12-31 02:00:00 +0100')\nb = Time.parse('2015-11-31 22:00:00 +0100')\nc = time_difference(a, b) / 3600\n</code></pre>\n\n<p>would become <code>-676.0</code> and not <code>4</code></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551104034, "post_id": 54867684, "comment_id": 96506580, "body": "If <code>@options[:shallow].to_bool</code> is a truty value then <code>UserStubPresenter.new @object.recipient</code> is returned."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11113981"}, "reply_to_user": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551104155, "post_id": 54867684, "comment_id": 96506657, "body": "what if <code>@options[:shallow].to_bool</code> returns false?"}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551104220, "post_id": 54867684, "comment_id": 96506705, "body": "How can I know why <code>@options[:shallow].to_bool</code> returns false?"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1551104674, "post_id": 54867684, "comment_id": 96507022, "body": "Maybe you can add more code context?"}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551106269, "post_id": 54867684, "comment_id": 96508040, "body": "if <code>@options[:shallow].to_bool</code> is <code>false</code> or <code>nil</code> then the next instruction is executed. If it is reached end of method/function then it returns <code>nil</code> implicitly."}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1551106774, "creation_date": 1551106774, "answer_id": 54868982, "question_id": 54867684, "link": "https://stackoverflow.com/questions/54867684/ruby-returning-statement/54868982#54868982", "title": "Ruby returning statement", "body": "<p>There are two important pieces to understand. First, Ruby reads this line like this:</p>\n\n<pre><code>return(UserStubPresenter.new(@object.recipient)) if @options[:shallow].to_bool\n</code></pre>\n\n<p>And it evaluates the <code>if</code> condition first. That means \u2013 as zeitnot already wrote \u2013 if <code>@options[:shallow].to_bool</code> is truthy then <code>UserStubPresenter.new(@object.recipient)</code> is evaluated and returned.</p>\n\n<p>Seconds, if you don\u2019t return explicitly, then Ruby will return the return value of the last evaluated statement. Your example is a shorter version of</p>\n\n<pre><code>if @options[:shallow].to_bool\n  return UserStubPresenter.new @object.recipient\nelse\nend\n</code></pre>\n\n<p>The last expression is the empty else path, therefore, your that <em>line</em> would return <code>nil</code> \u2013 no explicit <code>return nil</code> needed. </p>\n\n<p>And assuming that that line is the last line of a method then you do not need the <code>return</code> at all.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11113981"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551174603, "creation_date": 1551102507, "last_edit_date": 1551174603, "question_id": 54867684, "link": "https://stackoverflow.com/questions/54867684/ruby-returning-statement", "title": "Ruby returning statement", "body": "<p>I am trying to return a <code>UserStubPresenter</code> (a nested JSON presenter) corresponding to the user who received the email, assuming they are still present in the system. If they are no longer present, it should just be <code>nil</code>.</p>\n\n<p>And this is what I have so far for ruby. Please explain this syntax and help me with the return statement in details.</p>\n\n<pre><code>return UserStubPresenter.new @object.recipient if @options[:shallow].to_bool\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 9326999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11bfc4b0f12f6a76a7cd56c7fc4cb7a7?s=128&d=identicon&r=PG&f=1", "display_name": "synopsa", "link": "https://stackoverflow.com/users/9326999/synopsa"}, "edited": false, "score": 0, "creation_date": 1551096084, "post_id": 54865491, "comment_id": 96501839, "body": "thanks for replying. Do you have any tip to resolve this kind of problem from above?"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "reply_to_user": {"reputation": 75, "user_id": 9326999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11bfc4b0f12f6a76a7cd56c7fc4cb7a7?s=128&d=identicon&r=PG&f=1", "display_name": "synopsa", "link": "https://stackoverflow.com/users/9326999/synopsa"}, "edited": false, "score": 0, "creation_date": 1551096707, "post_id": 54865491, "comment_id": 96502224, "body": "dont use nested forms, use links, modals etc."}], "tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": false, "score": 1, "last_activity_date": 1551095235, "creation_date": 1551095235, "answer_id": 54865491, "question_id": 54865350, "link": "https://stackoverflow.com/questions/54865350/can-i-nest-form-tag-inside-form/54865491#54865491", "title": "Can I nest form tag inside form?", "body": "<blockquote>\n  <p>Can I nest form tag inside form?</p>\n</blockquote>\n\n<p>You cannot nest form tags. </p>\n\n<p>It is wrong. It won't work because it is wrong. Most browsers will only see one form.</p>\n\n<p><a href=\"https://www.w3.org/TR/html5/forms.html#the-form-element\" rel=\"nofollow noreferrer\">https://www.w3.org/TR/html5/forms.html#the-form-element</a></p>\n\n<blockquote>\n  <p>Content model:\n  Flow content, but with <strong>no form element descendants</strong>.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 9326999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11bfc4b0f12f6a76a7cd56c7fc4cb7a7?s=128&d=identicon&r=PG&f=1", "display_name": "synopsa", "link": "https://stackoverflow.com/users/9326999/synopsa"}, "edited": false, "score": 0, "creation_date": 1551172694, "post_id": 54867913, "comment_id": 96533164, "body": "Actually, I want to leave button_tag for update path exactly where it is(outside from form_for @order). I tried with  &lt;%= link_to  Spree.t(:update), update_cart_path, class: &#39;button btn-update&#39;, id: &#39;update-button&#39;, method: :put %&gt; and I get No route matches [PUT] &quot;/cart&quot;"}, {"owner": {"reputation": 860, "user_id": 1412141, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e5898502b5a6abf191712c8aaec73780?s=128&d=identicon&r=PG", "display_name": "Smek", "link": "https://stackoverflow.com/users/1412141/smek"}, "reply_to_user": {"reputation": 75, "user_id": 9326999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11bfc4b0f12f6a76a7cd56c7fc4cb7a7?s=128&d=identicon&r=PG&f=1", "display_name": "synopsa", "link": "https://stackoverflow.com/users/9326999/synopsa"}, "edited": false, "score": 0, "creation_date": 1551210372, "post_id": 54867913, "comment_id": 96555117, "body": "In that case you could simply move the &#39;form_tag empty_cart_path&#39; block out of the &#39;form_for @order&#39; block it is now nested inside which is not possible. Strange the form_tag empty_cart_path, method: :put also has method put are you missing that route in your routes file?"}, {"owner": {"reputation": 860, "user_id": 1412141, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e5898502b5a6abf191712c8aaec73780?s=128&d=identicon&r=PG", "display_name": "Smek", "link": "https://stackoverflow.com/users/1412141/smek"}, "reply_to_user": {"reputation": 75, "user_id": 9326999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11bfc4b0f12f6a76a7cd56c7fc4cb7a7?s=128&d=identicon&r=PG&f=1", "display_name": "synopsa", "link": "https://stackoverflow.com/users/9326999/synopsa"}, "edited": false, "score": 0, "creation_date": 1551210941, "post_id": 54867913, "comment_id": 96555349, "body": "Ah this routing issue I think the method should be :post instead of :put but you need to set a parameter named _method to put. Let me edit my Answer."}], "tags": [], "owner": {"reputation": 860, "user_id": 1412141, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/e5898502b5a6abf191712c8aaec73780?s=128&d=identicon&r=PG", "display_name": "Smek", "link": "https://stackoverflow.com/users/1412141/smek"}, "is_accepted": false, "score": 1, "last_activity_date": 1551211073, "last_edit_date": 1551211073, "creation_date": 1551103251, "answer_id": 54867913, "question_id": 54865350, "link": "https://stackoverflow.com/questions/54865350/can-i-nest-form-tag-inside-form/54867913#54867913", "title": "Can I nest form tag inside form?", "body": "<p>If I'm correct you like to have that empty_cart button aligned with your update button. In Rails you can create a link that does an update or post or whatever you like. You can do something like:</p>\n\n<pre><code>&lt;%= link_to Spree.t(:empty_cart(_method: 'put')), empty_cart_path, class: 'button btn-empty', method: :post %&gt;\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 9326999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11bfc4b0f12f6a76a7cd56c7fc4cb7a7?s=128&d=identicon&r=PG&f=1", "display_name": "synopsa", "link": "https://stackoverflow.com/users/9326999/synopsa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1551211073, "creation_date": 1551094693, "last_edit_date": 1551096059, "question_id": 54865350, "link": "https://stackoverflow.com/questions/54865350/can-i-nest-form-tag-inside-form", "title": "Can I nest form tag inside form?", "body": "<p>I have a situation where I have to nest form tag inside form because of HTML flow but it can't be done. Are there any alternatives for this?</p>\n\n<pre><code>                &lt;tr class=\"first last\"&gt;\n                  &lt;td class=\"a-right last\" colspan=\"50\"&gt;&lt;button onclick=\"setLocation('#')\" class=\"button btn-continue\" title=\"Continue Shopping\" type=\"button\"&gt;&lt;span&gt;Continue Shopping&lt;/span&gt;&lt;/button&gt;\n                    &lt;%= button_tag class: 'button btn-update', id: 'update-button' do %&gt;\n                      &lt;%= Spree.t(:update) %&gt;\n                    &lt;% end %&gt;\n                    &lt;%= form_tag empty_cart_path, method: :put do %&gt;\n                      &lt;%= submit_tag Spree.t(:empty_cart), class: 'button btn-empty' %&gt;\n                    &lt;% end %&gt;\n                  &lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;/tfoot&gt;\n\n          &lt;%= form_for @order, url: update_cart_path, html: { id: 'update-cart' } do |order_form| %&gt;\n\n            &lt;%= render partial: 'form', locals: { order_form: order_form } %&gt;\n          &lt;% end %&gt;\n        &lt;% end %&gt;\n</code></pre>\n\n<p>button_tag should be inside form_for form, but if I set it like this:</p>\n\n<pre><code>                &lt;td class=\"a-right last\" colspan=\"50\"&gt;&lt;button onclick=\"setLocation('#')\" class=\"button btn-continue\" title=\"Continue Shopping\" type=\"button\"&gt;&lt;span&gt;Continue Shopping&lt;/span&gt;&lt;/button&gt;\n                    &lt;%= form_for @order, url: update_cart_path, html: { id: 'update-cart' } do |order_form| %&gt;\n                    &lt;%= button_tag class: 'button btn-update', id: 'update-button' do %&gt;\n                      &lt;%= Spree.t(:update) %&gt;\n                    &lt;% end %&gt;\n                    &lt;%= form_tag empty_cart_path, method: :put do %&gt;\n                      &lt;%= submit_tag Spree.t(:empty_cart), class: 'button btn-empty' %&gt;\n                    &lt;% end %&gt;\n                  &lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;/tfoot&gt;\n\n\n            &lt;%= render partial: 'form', locals: { order_form: order_form } %&gt;\n          &lt;% end %&gt;\n        &lt;% end %&gt;\n</code></pre>\n\n<p>it's not working</p>\n"}, {"tags": ["arrays", "ruby", "algorithm"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1551094697, "post_id": 54865298, "comment_id": 96501114, "body": "Show your solution please, and an examples of edge cases."}], "answers": [{"comments": [{"owner": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "edited": false, "score": 0, "creation_date": 1551096294, "post_id": 54865440, "comment_id": 96501970, "body": "Great solution ! Very elegant and works 100% for all cases so far :) Thanks man"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 2, "last_activity_date": 1551095064, "creation_date": 1551095064, "answer_id": 54865440, "question_id": 54865298, "link": "https://stackoverflow.com/questions/54865298/ruby-array-computation-with-grouping-connected-and-not-connected-items/54865440#54865440", "title": "Ruby array computation with grouping connected and not connected items", "body": "<p>This works for your case where ranges are sorted by <code>first</code>:</p>\n\n<pre><code>new_ranges = ranges.each_with_object([]) do |range, new_ranges|\n  if new_ranges.empty? || new_ranges.last[:last] &lt; range[:first]\n    new_ranges &lt;&lt; range\n  elsif new_ranges.last[:last] &lt; range[:last]\n    new_ranges.last[:last] = range[:last]\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551133814, "post_id": 54865782, "comment_id": 96521421, "body": "Nice answer, but you should add the <code>.map ...</code> clause from <code>slice_when</code> to the <code>chunk_while</code> solution."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 1, "last_activity_date": 1551118257, "last_edit_date": 1551118257, "creation_date": 1551096122, "answer_id": 54865782, "question_id": 54865298, "link": "https://stackoverflow.com/questions/54865298/ruby-array-computation-with-grouping-connected-and-not-connected-items/54865782#54865782", "title": "Ruby array computation with grouping connected and not connected items", "body": "<p>It'a a job for <a href=\"https://ruby-doc.org/core-2.6.1/Enumerable.html#method-i-slice_when\" rel=\"nofollow noreferrer\"><strong>Enumerable#slice_when</strong></a>, array must be sorted.</p>\n\n<pre><code>array.slice_when { |a, b| a[:last] != b[:first] }.map{ |e| {first: e.first[:first], last: e.last[:last]} }\n#=&gt; [{:first=&gt;9, :last=&gt;10.3}, {:first=&gt;12.3, :last=&gt;13}, {:first=&gt;14, :last=&gt;18.3}]\n</code></pre>\n\n<p><hr>\n<a href=\"https://ruby-doc.org/core-2.6.1/Enumerable.html#method-i-chunk_while\" rel=\"nofollow noreferrer\"><strong>Enumerable#chunk_while</strong></a> does the same:</p>\n\n<pre><code>array.chunk_while { |a, b| a[:last] == b[:first] }\n</code></pre>\n"}], "owner": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 54865440, "answer_count": 2, "score": 0, "last_activity_date": 1551118257, "creation_date": 1551094459, "last_edit_date": 1551109111, "question_id": 54865298, "link": "https://stackoverflow.com/questions/54865298/ruby-array-computation-with-grouping-connected-and-not-connected-items", "title": "Ruby array computation with grouping connected and not connected items", "body": "<p>I'm doing some date times computation where I have to calculate new hours group based on array of ordered date time hashes. For example, if this is initial array (I've simplified values but it's comparable):</p>\n\n<pre><code>[\n  {first: 9,     last: 9.30},\n  {first: 9.30,  last: 10},\n  {first: 10,    last: 10.30},\n  {first: 12.30, last: 13},\n  {first: 14,    last: 14.30},\n  {first: 14.30, last: 16.30},\n  {first: 16.30, last: 18.30},\n]\n</code></pre>\n\n<p>result should be</p>\n\n<pre><code>[\n  {first: 9,     last: 10.30},\n  {first: 12.30, last: 13},\n  {first: 14,    last: 18.30}\n]\n</code></pre>\n\n<p>It should also work with other cases when first/last one is not connected or when there are multiple groups.</p>\n\n<p>My solution is with <code>each_cons(2)</code> where I'm checking groups per 2, but it doesn't work for some edge cases.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1551065067, "post_id": 54858999, "comment_id": 96489226, "body": "Perhaps you want to see his/her second question in the accepted answer&#39;s comment."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1551065356, "post_id": 54858999, "comment_id": 96489283, "body": "@Sebastian, the example (which I modified slightly) should address that."}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 1, "creation_date": 1551079339, "post_id": 54858999, "comment_id": 96493084, "body": "<code>\\p{Space}</code> would also get rid of other unicode whitespace :)"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1551092996, "post_id": 54858999, "comment_id": 96500178, "body": "Alternatively if you like the <a href=\"https://stackoverflow.com/questions/944446/what-is-point-free-style-in-functional-programming\">point-free/tacit</a> approach: <code>array1.reject(&amp;&#47;\\s&#47;.method(:match?))</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1551115585, "post_id": 54858999, "comment_id": 96513568, "body": "@Johan, I&#39;m not particularly fond of that construct (which seems to be increasingly popular), but maybe that just reflects my lack of familiarity."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1551119929, "post_id": 54858999, "comment_id": 96515455, "body": "The concept is pretty simple. You remove the variable assignment in between and instead tell <code>reject</code> to forward the block arguments to the method <code>match?</code> on <code>&#47;\\s&#47;</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551127631, "post_id": 54858999, "comment_id": 96518852, "body": "@Yes, I understand, just not sure it&#39;s worth it to avoid having a block."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 4, "last_activity_date": 1551078425, "last_edit_date": 1551078425, "creation_date": 1551064361, "answer_id": 54858999, "question_id": 54858330, "link": "https://stackoverflow.com/questions/54858330/removing-whitespace-tabs-and-new-lines-from-array/54858999#54858999", "title": "Removing whitespace, tabs and new lines from array", "body": "<pre><code>array1 = [\"E\", \" \", \":\", \"L\", \"\u00c9\", \"\\t\", \"T\",\n          \"-\", \"H\", \"\\n\", \"\\\"\"]\n\narray1.reject { |s| s.match? /\\s/ }\n  #=&gt; [\"E\", \":\", \"L\", \"\u00c9\", \"T\", \"-\", \"H\", \"\\\"\"]\n</code></pre>\n\n<p><code>\\s</code> in a regular expression matches all whitespace characters, namely, spaces, tabs (<code>\"\\t\"</code>) newlines (<code>\"\\n\"</code>), carriage returns (<code>\"\\r\"</code>) and formfeeds (<code>\"\\f\"</code>).</p>\n\n<p>The latter two have their origins from the days when teletype machines were used, the carriage return being the movement of the printhead from the end to the beginning of the line and the formfeeds advancing the paper being printed one line.<sup>1</sup></p>\n\n<p><sup><sub>1 Microsoft Windows still recognizes carriage returns and formfeeds, thereby maintaining support for teletype machines. \u00af\\_(\u30c4)_/\u00af</sub></sup></p>\n"}, {"tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 0, "last_activity_date": 1551087689, "creation_date": 1551087689, "answer_id": 54863259, "question_id": 54858330, "link": "https://stackoverflow.com/questions/54858330/removing-whitespace-tabs-and-new-lines-from-array/54863259#54863259", "title": "Removing whitespace, tabs and new lines from array", "body": "<p>In addition, just other possible variants:</p>\n\n<pre><code>array1 = [\" \", \"A\", \"\\n\", \"\\t\", \"B\", \"\\r\"]\narray1.delete_if { |s| s.match? /\\s/ }\n#=&gt; [\"A\", \"B\"]\n</code></pre>\n\n<pre><code>array1 = [\" \", \"A\", \"\\n\", \"\\t\", \"B\", \"\\r\"]\narray1.keep_if { |s| !s.match? /\\s/ }\n#=&gt; [\"A\", \"B\"]\n</code></pre>\n\n<pre><code>array1 = [\" \", \"A\", \"\\n\", \"\\t\", \"B\", \"\\r\"]\narray1.select! { |s| !s.match? /\\s/ }\n#=&gt; [\"A\", \"B\"]\n</code></pre>\n\n<p>Using <code>match?</code> rather than <code>match</code> is more preferable not only because we don\u2019t use <code>MatchData</code>.</p>\n\n<p>The point is that the benchmark shows that <code>match?</code> is almost 2 times faster.</p>\n\n<p>This can be significant when working with large amounts of data.</p>\n"}, {"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1551093135, "post_id": 54863524, "comment_id": 96500265, "body": "This is the most suitable answer imo."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1551111573, "post_id": 54863524, "comment_id": 96511360, "body": "@Johan, I&#39;ll second that, in part because of the he reference to <code>grep_v</code>, which I&#39;ve not seen used before.  Ann, please consider moving the greenie to this answer."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551115342, "post_id": 54863524, "comment_id": 96513456, "body": "Readers: repeat 100 times, &quot;To select with a regex, think grep. To reject, grep_v.&quot;"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1551179904, "post_id": 54863524, "comment_id": 96537555, "body": "^ The better mnemonic would be: Can I match elements using the case equality (<code>===</code>)? If the answer is <i>yes</i> use <code>grep</code>. Another example without regex could be: <code>[1, &#39;A&#39;, :b].grep(Integer) #=&gt; [1]</code> or <code>(1..100).grep(95..150) #=&gt; [95, 96, 97, 98, 99, 100]</code>"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 2, "last_activity_date": 1551096001, "last_edit_date": 1551096001, "creation_date": 1551088519, "answer_id": 54863524, "question_id": 54858330, "link": "https://stackoverflow.com/questions/54858330/removing-whitespace-tabs-and-new-lines-from-array/54863524#54863524", "title": "Removing whitespace, tabs and new lines from array", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.6.1/Enumerable.html#method-i-grep\" rel=\"nofollow noreferrer\"><code>grep</code></a> to select elements matching a pattern. That pattern can be a simple <a href=\"http://ruby-doc.org/core/Regexp.html\" rel=\"nofollow noreferrer\">regexp</a> like <code>/\\s/</code> which matches whitespace characters:</p>\n\n<pre><code>array1.grep(/\\s/)\n#=&gt; [\" \", \" \", \" \", \" \", \" \", \" \", \" \", \" \", \"\\n\"]\n</code></pre>\n\n<p>The result is an array with all elements containing at least one whitespace character.</p>\n\n<p>There's also <code>\\S</code> (uppercase) which matches non-whitespace characters:</p>\n\n<pre><code>array1.grep(/\\S/)\n#=&gt; [\"E\", \"A\", \"C\", \"H\", \"L\", \"I\", \"N\", \"E\", \"E\", \"N\", \"D\", \"S\", \"W\",\n#    \"I\", \"T\", \"H\", \"A\", \"A\", \"C\", \"C\", \"I\", \"D\", \"E\", \"N\", \"T\", \"A\",\n#    \"L\", \"L\", \"Y\", \"A\", \"D\", \"\\\"\", \"A\", \"A\", \"C\", \"C\", \"I\", \"\\\"\"]\n</code></pre>\n\n<p>And we have <a href=\"http://ruby-doc.org/core-2.6.1/Enumerable.html#method-i-grep_v\" rel=\"nofollow noreferrer\"><code>grep_v</code></a> which is the inverted version of <code>grep</code>. This would be useful if you wanted to specify space, tab and newline explicitly:</p>\n\n<pre><code>array1.grep_v(/[ \\t\\n]/)\n#=&gt; [\"E\", \"A\", \"C\", \"H\", \"L\", \"I\", \"N\", \"E\", \"E\", \"N\", \"D\", \"S\", \"W\",\n#    \"I\", \"T\", \"H\", \"A\", \"A\", \"C\", \"C\", \"I\", \"D\", \"E\", \"N\", \"T\", \"A\",\n#    \"L\", \"L\", \"Y\", \"A\", \"D\", \"\\\"\", \"A\", \"A\", \"C\", \"C\", \"I\", \"\\\"\"]\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 2950963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a84e7dcefb3ea59af16eb074d176e696?s=128&d=identicon&r=PG&f=1", "display_name": "Ann Left", "link": "https://stackoverflow.com/users/2950963/ann-left"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 54858999, "answer_count": 3, "score": 1, "last_activity_date": 1551111310, "creation_date": 1551057955, "last_edit_date": 1551074277, "question_id": 54858330, "link": "https://stackoverflow.com/questions/54858330/removing-whitespace-tabs-and-new-lines-from-array", "title": "Removing whitespace, tabs and new lines from array", "body": "<p>How do I go about removing the tabs, new lines, and whitespaces from this array?</p>\n\n<pre><code>array1 = [\"E\", \"A\", \"C\", \"H\", \" \", \"L\", \"I\", \"N\", \"E\", \" \", \"E\", \"N\", \"D\", \"S\", \" \", \"W\", \"I\", \"T\", \"H\", \" \", \"A\", \" \", \"A\", \"C\", \"C\", \"I\", \"D\", \"E\", \"N\", \"T\", \"A\", \"L\", \"L\", \"Y\", \" \", \" \", \"A\", \"D\", \"\\\"\", \"A\", \" \", \"A\", \"C\", \"C\", \"I\", \"\\n\", \"\\\"\"]\n</code></pre>\n\n<p>I have tried the following, and none of these seem to work properly. </p>\n\n<pre><code>array1.map!(&amp;:strip)\n\narray1.reject!(&amp;:empty?)\n\narray1.reject(&amp;:empty?)\n\narray1 - [\"\"]\n\narray1.delete_if {|x| x == \" \" } \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap"], "comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1551117009, "post_id": 54858269, "comment_id": 96514188, "body": "Update, if I remove //= require jquery3 and only keep //= require jquery, both the toggle, and the modal work!. although, vice versa, (no //= require jquery, and yes to //= require jquery3), it won&#39;t work. Although, I still have my issue with the accordion not opening without a reload"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1551119643, "post_id": 54858269, "comment_id": 96515323, "body": "In your browser, open web console and type this, make sure you have bootstrap 4:  <code>$.fn.tooltip.Constructor.VERSION</code>  also check <code>jQuery.fn.jquery</code> make sure version &gt;= 3"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1551130731, "post_id": 54858269, "comment_id": 96520244, "body": "its is 4.3.1 and 3.3.1"}], "answers": [{"comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1551063012, "post_id": 54858706, "comment_id": 96488842, "body": "I guess I should had mentioned i had bootstrap installed correctly.. but i changed the order of the application file to yours and no difference in the functioning of everything"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1551073179, "post_id": 54858706, "comment_id": 96490935, "body": "I really want to figure this our without needing to hack this with pure javascript and simply use the bootstrap but i tried without the html files in either combination possible, same issues."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1551116996, "post_id": 54858706, "comment_id": 96514175, "body": "Update, if I remove <code>&#47;&#47;= require jquery3</code> and only keep <code>&#47;&#47;= require jquery</code>, both the toggle, and the modal work!.  although, vice versa, (no //= require jquery, and yes to //= require jquery3), it won&#39;t work.   Although, I still have my issue with the accordion not opening without a reload"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1551118413, "post_id": 54858706, "comment_id": 96514786, "body": "did you change the order as I described?  trubolinks and tree should be last, order matters here."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1551130632, "post_id": 54858706, "comment_id": 96520196, "body": "I did try that but same issue.  My gemfile is this: <code>gem &#39;bootstrap&#39;, &#39;~&gt; 4.3.1&#39;  gem &#39;jquery-rails&#39;  gem &#39;sprockets-rails&#39;, :require =&gt; &#39;sprockets&#47;railtie&#39;   gem &#39;sprockets&#39;  </code>"}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1551120543, "last_edit_date": 1551120543, "creation_date": 1551061758, "answer_id": 54858706, "question_id": 54858269, "link": "https://stackoverflow.com/questions/54858269/bootstrap-javascript-needing-to-reload-or-not-functioning/54858706#54858706", "title": "Bootstrap javascript needing to reload, or not functioning", "body": "<p>Add the bootstrap gem to your Gemfile and remove the html tag from the layout</p>\n\n<p>Gemifle</p>\n\n<pre><code>gem 'bootstrap', '~&gt; 4.3.1'\n</code></pre>\n\n<p>You should not have 2 versions of jQuery.</p>\n\n<p>Then run <code>bundle install</code></p>\n\n<p>Then change this to:</p>\n\n<pre><code>/= require rails-ujs\n//= require activestorage\n//= require jquery3\n//= require jquery_ujs \n//= require popper\n//= require bootstrap\n//= require Chart.bundle\n//= require chartkick\n//= require turbolinks\n//= require_tree .\n</code></pre>\n\n<p>Also in hour applications.scss you should have</p>\n\n<pre><code>@import \"bootstrap\";\n</code></pre>\n\n<p>Also in layout try instead:</p>\n\n<pre><code>&lt;%= javascript_include_tag 'application', 'data-turbolinks-track': true %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1551116634, "post_id": 54860797, "comment_id": 96514000, "body": "Still doesn&#39;t help.  Without having the html bootstrap line tag, it won&#39;t work (the modal), but the toggle will only work when its gone.  I am not sure what the issue is here."}], "tags": [], "owner": {"reputation": 81, "user_id": 10742876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44a8ab5ba1ce22e4961276fb0b5702e4?s=128&d=identicon&r=PG&f=1", "display_name": "theabhisheksoni", "link": "https://stackoverflow.com/users/10742876/theabhisheksoni"}, "is_accepted": false, "score": 0, "last_activity_date": 1551077096, "creation_date": 1551077096, "answer_id": 54860797, "question_id": 54858269, "link": "https://stackoverflow.com/questions/54858269/bootstrap-javascript-needing-to-reload-or-not-functioning/54860797#54860797", "title": "Bootstrap javascript needing to reload, or not functioning", "body": "<p>You can try this in your script. It is explained <a href=\"https://guides.rubyonrails.org/working_with_javascript_in_rails.html#turbolinks\" rel=\"nofollow noreferrer\">here</a></p>\n\n<pre><code>$( document ).on('turbolinks:load', function() {\n  $(\"#myBtnSignIn\").click(function(){\n    $(\"#SignInModal\").modal();\n  });\n});\n</code></pre>\n"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1551120543, "creation_date": 1551057398, "question_id": 54858269, "link": "https://stackoverflow.com/questions/54858269/bootstrap-javascript-needing-to-reload-or-not-functioning", "title": "Bootstrap javascript needing to reload, or not functioning", "body": "<p><strong>Issue 1:</strong> My navbar toggle menu will not close, but will open, unless I remove either of the following from my layout:</p>\n\n<pre><code>&lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;\n</code></pre>\n\n<p>Now, when i remove this the toggle works and will open and close.  Although, my sign-in modal will not function without it.</p>\n\n<p><strong>or:</strong></p>\n\n<pre><code>&lt;script src=\"https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js\" integrity=\"sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k\" crossorigin=\"anonymous\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p><strong>Issue 2:</strong></p>\n\n<p>I have accordions that will not work on first load - but will then work once the page has been reloaded.</p>\n\n<p><strong>My navbar in summary:</strong></p>\n\n<pre><code>&lt;nav class=\"navbar navbar-expand-lg navbar-light bg-light\"&gt;\n &lt;div class=\"container-fluid\"&gt;\n   &lt;div class=\"navbar-header\"&gt;\n     &lt;a class=\"navbar-brand\" href=\"/\"&gt;Navbar&lt;/a&gt;\n       &lt;button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapsibleNavbar\"&gt;\n         &lt;span class=\"navbar-toggler-icon\"&gt;&lt;/span&gt;\n       &lt;/button&gt;\n   &lt;/div&gt;\n   &lt;div class=\"collapse navbar-collapse\" id=\"collapsibleNavbar\"&gt;\n\n   &lt;ul class=\"nav navbar-nav navbar-right\"&gt;\n     #more nav items code here\n     &lt;li class=\"nav-item-2 nav-display-2\"&gt;\n       &lt;button type=\"button\" class=\"btn ripple-effect btn-info btn-lg\" id=\"myBtnSignIn2\"&gt;Sign Up/Login&lt;/button&gt;\n       &lt;div class=\"modal fade\" id=\"SignInModal2\" role=\"dialog\"&gt;\n         &lt;div class=\"modal-dialog modal-dialog-centered\" role=\"document\"&gt;\n           &lt;div class=\"modal-content\"&gt;\n             &lt;div class=\"modal-header\"&gt;\n               &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\"&gt;&amp;times;&lt;/button&gt;\n             &lt;/div&gt;\n             &lt;div class=\"modal-body\"&gt;\n               &lt;%= render \"devise/shared/links\" %&gt;\n              &lt;/div&gt;\n             &lt;div class=\"modal-footer\"&gt;\n               &lt;button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\"&gt;Close&lt;/button&gt;\n             &lt;/div&gt;\n           &lt;/div&gt;\n         &lt;/div&gt;\n       &lt;/div&gt;\n      &lt;/li&gt;\n    &lt;/div&gt;\n\n  &lt;/div&gt;\n&lt;/nav&gt;\n\n\n&lt;script&gt;\n$(document).ready(function(){\n    $(\"#myBtnSignIn\").click(function(){\n        $(\"#SignInModal\").modal();\n    });\n});\n\n&lt;/script&gt;\n</code></pre>\n\n<p><strong>accordion code:</strong></p>\n\n<pre><code>&lt;a class=\"collapsed card-link text-center\" id=\"edit-accordion\" data-toggle=\"collapse\" href=\"#collapseFIRST\"&gt;\n\n      &lt;/a&gt;\n      &lt;div id=\"collapseFIRST\" class=\"collapse\" data-parent=\"#accordion\"&gt;\n          &lt;div class=\"card-body\"&gt;\n\n          &lt;/div&gt;\n      &lt;/div&gt;\n</code></pre>\n\n<p><strong>application.js:</strong></p>\n\n<pre><code>//= require rails-ujs\n//= require activestorage\n//= require turbolinks\n//= require_tree .\n//= require jquery3\n//= require popper\n//= require bootstrap-sprockets\n\n//= require jquery\n\n//= require Chart.bundle\n//= require chartkick\n</code></pre>\n\n<p>Is there any you see standing out in my code wrong?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 191, "user_id": 5804032, "user_type": "registered", "profile_image": "https://graph.facebook.com/1086758154668612/picture?type=large", "display_name": "Junsuk Park", "link": "https://stackoverflow.com/users/5804032/junsuk-park"}, "edited": false, "score": 0, "creation_date": 1551060127, "post_id": 54858207, "comment_id": 96488354, "body": "<code>Processing by PostsController#create as HTML</code>  Why was the request sent as not AJAX but the normal?"}, {"owner": {"reputation": 349, "user_id": 10113461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d10ba7f075a993b14e5d70e166a912a?s=128&d=identicon&r=PG&f=1", "display_name": "Cole Phiper", "link": "https://stackoverflow.com/users/10113461/cole-phiper"}, "reply_to_user": {"reputation": 191, "user_id": 5804032, "user_type": "registered", "profile_image": "https://graph.facebook.com/1086758154668612/picture?type=large", "display_name": "Junsuk Park", "link": "https://stackoverflow.com/users/5804032/junsuk-park"}, "edited": false, "score": 0, "creation_date": 1551060183, "post_id": 54858207, "comment_id": 96488362, "body": "Why is it not using JS when remote: true is active??"}, {"owner": {"reputation": 349, "user_id": 10113461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d10ba7f075a993b14e5d70e166a912a?s=128&d=identicon&r=PG&f=1", "display_name": "Cole Phiper", "link": "https://stackoverflow.com/users/10113461/cole-phiper"}, "reply_to_user": {"reputation": 191, "user_id": 5804032, "user_type": "registered", "profile_image": "https://graph.facebook.com/1086758154668612/picture?type=large", "display_name": "Junsuk Park", "link": "https://stackoverflow.com/users/5804032/junsuk-park"}, "edited": false, "score": 0, "creation_date": 1551060256, "post_id": 54858207, "comment_id": 96488375, "body": "I\u2019m actually working within ngrok. I will try again without it"}, {"owner": {"reputation": 349, "user_id": 10113461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d10ba7f075a993b14e5d70e166a912a?s=128&d=identicon&r=PG&f=1", "display_name": "Cole Phiper", "link": "https://stackoverflow.com/users/10113461/cole-phiper"}, "reply_to_user": {"reputation": 191, "user_id": 5804032, "user_type": "registered", "profile_image": "https://graph.facebook.com/1086758154668612/picture?type=large", "display_name": "Junsuk Park", "link": "https://stackoverflow.com/users/5804032/junsuk-park"}, "edited": false, "score": 0, "creation_date": 1551062677, "post_id": 54858207, "comment_id": 96488787, "body": "No matter what I do, it attempts to create as HTML, and then it shows \u201cCan\u2019t verify CSRF token authenticity\u201d completed 401"}, {"owner": {"reputation": 349, "user_id": 10113461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d10ba7f075a993b14e5d70e166a912a?s=128&d=identicon&r=PG&f=1", "display_name": "Cole Phiper", "link": "https://stackoverflow.com/users/10113461/cole-phiper"}, "reply_to_user": {"reputation": 191, "user_id": 5804032, "user_type": "registered", "profile_image": "https://graph.facebook.com/1086758154668612/picture?type=large", "display_name": "Junsuk Park", "link": "https://stackoverflow.com/users/5804032/junsuk-park"}, "edited": false, "score": 0, "creation_date": 1551064009, "post_id": 54858207, "comment_id": 96489056, "body": "I switched back to rails-ujs and it started working again. Odd. jquery_ujs is broken on Rails 5.2"}, {"owner": {"reputation": 191, "user_id": 5804032, "user_type": "registered", "profile_image": "https://graph.facebook.com/1086758154668612/picture?type=large", "display_name": "Junsuk Park", "link": "https://stackoverflow.com/users/5804032/junsuk-park"}, "edited": false, "score": 0, "creation_date": 1551072620, "post_id": 54858207, "comment_id": 96490759, "body": "<code>jquery_ujs</code> hasn&#39;t been updated in a long time. I think <code>jquery_ujs</code> makes the app broken :("}, {"owner": {"reputation": 349, "user_id": 10113461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d10ba7f075a993b14e5d70e166a912a?s=128&d=identicon&r=PG&f=1", "display_name": "Cole Phiper", "link": "https://stackoverflow.com/users/10113461/cole-phiper"}, "reply_to_user": {"reputation": 191, "user_id": 5804032, "user_type": "registered", "profile_image": "https://graph.facebook.com/1086758154668612/picture?type=large", "display_name": "Junsuk Park", "link": "https://stackoverflow.com/users/5804032/junsuk-park"}, "edited": false, "score": 1, "creation_date": 1551072748, "post_id": 54858207, "comment_id": 96490802, "body": "I agree. But, your answer is correct on the basis of including the CSRF token manually"}], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 10113461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d10ba7f075a993b14e5d70e166a912a?s=128&d=identicon&r=PG&f=1", "display_name": "Cole Phiper", "link": "https://stackoverflow.com/users/10113461/cole-phiper"}, "edited": false, "score": 1, "creation_date": 1551066205, "post_id": 54859202, "comment_id": 96489436, "body": "It works with rails-ujs, not jquery_ujs. Could be outdated"}], "tags": [], "owner": {"reputation": 1564, "user_id": 755421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71312ffca1775d45c43afabf53358838?s=128&d=identicon&r=PG", "display_name": "bitsapien", "link": "https://stackoverflow.com/users/755421/bitsapien"}, "is_accepted": false, "score": 2, "last_activity_date": 1551066132, "creation_date": 1551066132, "answer_id": 54859202, "question_id": 54858207, "link": "https://stackoverflow.com/questions/54858207/ajax-cant-verify-csrf-token-authenticity-when-posting-gifs-with-carrierwave/54859202#54859202", "title": "AJAX Can&#39;t verify CSRF token authenticity when posting gifs with Carrierwave", "body": "<p>You may try doing this. See if this works.</p>\n\n<pre><code>&lt;%= simple_form_for(@post, multipart: true, remote: true, authenticity_token: true) do |f| %&gt;\n</code></pre>\n"}], "owner": {"reputation": 349, "user_id": 10113461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d10ba7f075a993b14e5d70e166a912a?s=128&d=identicon&r=PG&f=1", "display_name": "Cole Phiper", "link": "https://stackoverflow.com/users/10113461/cole-phiper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551066132, "creation_date": 1551056728, "question_id": 54858207, "link": "https://stackoverflow.com/questions/54858207/ajax-cant-verify-csrf-token-authenticity-when-posting-gifs-with-carrierwave", "title": "AJAX Can&#39;t verify CSRF token authenticity when posting gifs with Carrierwave", "body": "<p>When I attempt to upload normal jpeg images and pngs, I receive no error from AJAX/Rails. But, when I try to upload a gif (which is whitelisted). It redirects the user back to the home page. Its claiming that no <strong>csrf_token</strong> is being created when the form is posting. How can I add a csrf_token to the form when using <strong>create.js.erb</strong>?</p>\n\n<p><strong>Server Development Log</strong></p>\n\n<pre><code>Started POST \"/posts\" for 127.0.0.1 at 2019-02-24 19:39:51 -0500\nProcessing by PostsController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u00e2\u0153\u201c\", \"post\"=&gt;{\"body_text\"=&gt;\"Testing the gif again!\", \"photo_cache\"=&gt;\"\"}, \"commit\"=&gt;\"Post\"}\n  User Load (1.0ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"id\", 51], [\"LIMIT\", 1]]\nCan't verify CSRF token authenticity.\n   (1.0ms)  BEGIN\n   (0.0ms)  COMMIT\nCompleted 401 Unauthorized in 110ms (ActiveRecord: 2.0ms)\n\n\nStarted GET \"/login\" for 127.0.0.1 at 2019-02-24 19:39:53 -0500\nProcessing by Devise::SessionsController#new as HTML\n  User Load (1.0ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"id\", 51], [\"LIMIT\", 1]]\nRedirected to https://127.0.0.1/\nFilter chain halted as :require_no_authentication rendered or redirected\nCompleted 302 Found in 5ms (ActiveRecord: 1.0ms)\n\n\nStarted GET \"/\" for 127.0.0.1 at 2019-02-24 19:39:55 -0500\nProcessing by HomeController#index as HTML\n</code></pre>\n\n<p><strong>posts_form.html.erb</strong></p>\n\n<pre><code>&lt;%= simple_form_for(@post, multipart: true, remote: true) do |f| %&gt;\n\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col\"&gt;\n      &lt;div class=\"post-textarea\"&gt;\n          &lt;%= f.input :body_text, as: :text, class: 'form-control post-placeholder', label: false, placeholder: 'Add a post to share with others', style: \"overflow: hidden; resize: none;\" %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-5\"&gt;\n      &lt;%= f.button :submit, 'Post', class: 'form-control submit-button bttn-gradient bttn-md bttn-royal', :data =&gt; {:disable_with =&gt; 'Wait...a min'} %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-5\"&gt;\n       &lt;label class=\"bttn-minimal bttn-md bttn-royal\"&gt;\n        Add Photo\n        &lt;span style=\"display:none;\"&gt;\n            &lt;%= f.input :photo, as: :file, label: false, input_html: {accept: 'image/*'} %&gt;\n            &lt;/span&gt;\n      &lt;/label&gt;\n      &lt;% if f.object.photo? %&gt;\n        &lt;%= image_tag f.object.photo.url(:feed_preview), class: 'img-responsive img-thumbnail' %&gt;\n      &lt;% end %&gt;\n      &lt;%= f.hidden_field :photo_cache %&gt;\n      &lt;div class=\"post-preview-container\"&gt;\n        &lt;img id=\"img_prev\" width=\"100\" height=\"100\" src=\"#\" alt=\"preview\" class=\"img-thumbnail d-none\"/&gt; &lt;br/&gt;\n        &lt;a href=\"#\" id=\"cancel_img_btn\" class=\"d-none\" onclick=\"return !(document.getElementById('photo').innerHTML=document.getElementById('photo').innerHTML);\"&gt;Cancel\n      Upload&lt;/a&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>create.js.erb</strong></p>\n\n<pre><code>$(\"#container_posts\").prepend(\"&lt;%= j render partial: \"posts/#{@post.post_type}\", locals: {post: @post } %&gt;\");\n$(\"#post_&lt;%= @post.id %&gt;\").hide().fadeIn(1000);\n$(\"#no-posts\").hide().fadeOut();\n$(\"#body_text\").val(\"\");\n$(\"#img_prev\").hide().fadeOut();\n$(\"#cancel_img_btn\").hide().fadeOut();\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 1, "user_id": 11110994, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tufucaaNxHQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPxU34lJ9GFez66tqA00xBizXfOFg/mo/photo.jpg?sz=128", "display_name": "Timothy Patrick Dommett", "link": "https://stackoverflow.com/users/11110994/timothy-patrick-dommett"}, "edited": false, "score": 0, "creation_date": 1551052187, "post_id": 54857722, "comment_id": 96486865, "body": "The following errors when loading the page: 2019-02-24T23:47:53.992508+00:00 heroku[router]: at=error code=H10 desc=&quot;App crashed&quot; method=GET path=&quot;/&quot; host=existentialeconomics.herokuapp.com request_id=09b61985-1abe-4768-815b-7bdfc6365e56 fwd=&quot;196.61.107.103&quot; dyno= connect= service= status=503 bytes= protocol=https 2019-02-24T23:47:55.296178+00:00 heroku[router]: at=error code=H10 desc=&quot;App crashed&quot; method=GET path=&quot;/favicon.ico&quot; host=existentialeconomics.herokuapp.com request_id=27d73df4-aea6-4de7-b835-58fdff3ae1a0 fwd=&quot;196.61.107.103&quot; dyno= connect= service= status=503 bytes= protocol=https"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11110994, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tufucaaNxHQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPxU34lJ9GFez66tqA00xBizXfOFg/mo/photo.jpg?sz=128", "display_name": "Timothy Patrick Dommett", "link": "https://stackoverflow.com/users/11110994/timothy-patrick-dommett"}, "is_accepted": false, "score": 0, "last_activity_date": 1551053114, "creation_date": 1551053114, "answer_id": 54857843, "question_id": 54857722, "link": "https://stackoverflow.com/questions/54857722/successful-build-but-process-exited-with-status-1-deploying-rails-app-on-heroku/54857843#54857843", "title": "Successful build but process exited with status 1, deploying rails app on heroku", "body": "<p>I found the error. The authentication method I was causing the crash. After fixing this the website ran perfectly.</p>\n"}], "owner": {"reputation": 1, "user_id": 11110994, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tufucaaNxHQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPxU34lJ9GFez66tqA00xBizXfOFg/mo/photo.jpg?sz=128", "display_name": "Timothy Patrick Dommett", "link": "https://stackoverflow.com/users/11110994/timothy-patrick-dommett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551079388, "creation_date": 1551052049, "last_edit_date": 1551079388, "question_id": 54857722, "link": "https://stackoverflow.com/questions/54857722/successful-build-but-process-exited-with-status-1-deploying-rails-app-on-heroku", "title": "Successful build but process exited with status 1, deploying rails app on heroku", "body": "<p>I have been getting the following errors after the build has been successful. Any ideas on how to fix this error?</p>\n\n<blockquote>\n  <p>2019-02-24T23:51:17.000000+00:00 app[api]: Build started by user timdom11@gmail.com \n  <br> 2019-02-24T23:51:41.818679+00:00 app[api]: Release v16 created by user timdom11@gmail.com\n  <br> 2019-02-24T23:51:41.818679+00:00 app[api]: Deploy 2096254f by user timdom11@gmail.com \n  <br> 2019-02-24T23:51:42.540367+00:00 heroku[web.1]: State changed from crashed to starting\n  <br> 2019-02-24T23:51:44.000000+00:00 app[api]: Build succeeded\n  <br> 2019-02-24T23:51:48.259082+00:00 heroku[web.1]: Starting process with\n   command <code>bin/rails server -p 23822 -e production</code>\n  <br> 2019-02-24T23:51:53.313462+00:00 heroku[web.1]: State changed from\n   starting to crashed \n  <br>2019-02-24T23:51:53.221432+00:00 app[web.1]: /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/core_ext/active_support.rb:76:in\n   <code>block in load_missing_constant</code>: uninitialized constant Knock\n   (NameError) \n  <br> 2019-02-24T23:51:53.221452+00:00 app[web.1]: from\n   /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/core_ext/active_support.rb:8:in\n   <code>without_bootsnap_cache</code> \n  <br> 2019-02-24T23:51:53.221697+00:00 app[web.1]: from\n   /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/core_ext/active_support.rb:76:in\n   <code>rescue in load_missing_constant</code> \n  <br> 2019-02-24T23:51:53.221700+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/core_ext/active_support.rb:58:in\n   <code>load_missing_constant</code> \n  <br> 2019-02-24T23:51:53.221702+00:00 app[web.1]:   from /app/app/controllers/user_token_controller.rb:1:in <code>&lt;main&gt;</code>\n  <br> 2019-02-24T23:51:53.221704+00:00 app[web.1]: from\n   /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in\n   <code>require</code> \n  <br> 2019-02-24T23:51:53.221706+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in\n   <code>block in require_with_bootsnap_lfi</code>\n  <br>2019-02-24T23:51:53.221842+00:00 app[web.1]: from /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/loaded_features_index.rb:83:in <code>register</code> \n  <br>2019-02-24T23:51:53.221844+00:00 app[web.1]: from\n   /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in <code>require_with_bootsnap_lfi</code> \n  <br> 2019-02-24T23:51:53.221846+00:00 app[web.1]: from\n   /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in\n  <code>require</code>\n  <br>2019-02-24T23:51:53.221848+00:00 app[web.1]: from\n   /app/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies/interlock.rb:14:in\n  <code>block in loading</code>\n  <br>2019-02-24T23:51:53.221850+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.2/lib/active_support/concurrency/share_lock.rb:151:in\n  <code>exclusive</code> \n  <br>2019-02-24T23:51:53.221858+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies/interlock.rb:13:in\n  <code>loading</code>\n  <br>2019-02-24T23:51:53.221860+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/core_ext/active_support.rb:48:in\n  <code>block in require_or_load</code>\n  <br>2019-02-24T23:51:53.221862+00:00\n  app[web.1]:   from\n  /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/core_ext/active_support.rb:16:in\n  <code>allow_bootsnap_retry</code>\n  <br>2019-02-24T23:51:53.221863+00:00 app[web.1]:\n    from\n  /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/core_ext/active_support.rb:47:in\n  <code>require_or_load</code>\n  <br>2019-02-24T23:51:53.221865+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/core_ext/active_support.rb:82:in\n  <code>depend_on</code>\n  <br>2019-02-24T23:51:53.221866+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.2/lib/rails/engine.rb:478:in\n  <code>block (2 levels) in eager_load!</code> \n  <br>2019-02-24T23:51:53.221868+00:00\n  app[web.1]:   from\n  /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.2/lib/rails/engine.rb:477:in\n  <code>each</code>\n  <br>2019-02-24T23:51:53.221870+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.2/lib/rails/engine.rb:477:in\n  <code>block in eager_load!</code>\n  <br>2019-02-24T23:51:53.221923+00:00 app[web.1]:\n    from\n  /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.2/lib/rails/engine.rb:475:in\n  <code>each</code>\n  <br>2019-02-24T23:51:53.221926+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.2/lib/rails/engine.rb:475:in\n  <code>eager_load!</code> \n  <br>2019-02-24T23:51:53.221927+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.2/lib/rails/engine.rb:356:in\n  <code>eager_load!</code>\n  <br>2019-02-24T23:51:53.221929+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.2/lib/rails/application/finisher.rb:69:in\n  <code>each</code> \n  <br>2019-02-24T23:51:53.221930+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.2/lib/rails/application/finisher.rb:69:in\n  <code>block in &lt;module:Finisher&gt;</code> \n  <br>2019-02-24T23:51:53.221932+00:00\n  app[web.1]:   from\n  /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.2/lib/rails/initializable.rb:32:in\n  <code>instance_exec</code>\n  <br>2019-02-24T23:51:53.221933+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.2/lib/rails/initializable.rb:32:in\n  <code>run</code> \n  <br>2019-02-24T23:51:53.221935+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.2/lib/rails/initializable.rb:61:in\n  <code>block in run_initializers</code>\n  <br>2019-02-24T23:51:53.221936+00:00\n  app[web.1]:   from\n  /app/vendor/ruby-2.5.1/lib/ruby/2.5.0/tsort.rb:228:in <code>block in\n  tsort_each</code>\n  <br>2019-02-24T23:51:53.221938+00:00 app[web.1]:    from\n  /app/vendor/ruby-2.5.1/lib/ruby/2.5.0/tsort.rb:350:in <code>block (2\n  levels) in each_strongly_connected_component</code>\n  <br>2019-02-24T23:51:53.221939+00:00 app[web.1]:    from\n  /app/vendor/ruby-2.5.1/lib/ruby/2.5.0/tsort.rb:431:in\n  <code>each_strongly_connected_component_from</code>\n  <br> 2019-02-24T23:51:53.221941+00:00 app[web.1]:   from\n  /app/vendor/ruby-2.5.1/lib/ruby/2.5.0/tsort.rb:349:in <code>block in\n  each_strongly_connected_component</code>\n  <br>2019-02-24T23:51:53.221943+00:00\n  app[web.1]:   from\n  /app/vendor/ruby-2.5.1/lib/ruby/2.5.0/tsort.rb:347:in <code>each</code>\n  <br> 2019-02-24T23:51:53.221944+00:00 app[web.1]:   from\n  /app/vendor/ruby-2.5.1/lib/ruby/2.5.0/tsort.rb:347:in <code>call</code>\n  <br> 2019-02-24T23:51:53.221950+00:00 app[web.1]:   from\n  /app/vendor/ruby-2.5.1/lib/ruby/2.5.0/tsort.rb:347:in\n  <code>each_strongly_connected_component</code>\n  <br>2019-02-24T23:51:53.221952+00:00\n  app[web.1]:   from\n  /app/vendor/ruby-2.5.1/lib/ruby/2.5.0/tsort.rb:226:in <code>tsort_each</code>\n  <br> 2019-02-24T23:51:53.221954+00:00 app[web.1]:   from\n  /app/vendor/ruby-2.5.1/lib/ruby/2.5.0/tsort.rb:205:in <code>tsort_each</code>\n  <br> 2019-02-24T23:51:53.221955+00:00 app[web.1]:   from\n  /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.2/lib/rails/initializable.rb:60:in\n  <code>run_initializers</code>\n  <br>2019-02-24T23:51:53.221957+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.2/lib/rails/application.rb:361:in\n  <code>initialize!</code>\n  <br>2019-02-24T23:51:53.221959+00:00 app[web.1]:    from\n  /app/config/environment.rb:5:in <code>&lt;main&gt;</code>\n  <br>2019-02-24T23:51:53.221960+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in\n  <code>require</code>\n  <br>2019-02-24T23:51:53.221963+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in\n  <code>block in require_with_bootsnap_lfi</code> \n  <br>2019-02-24T23:51:53.221965+00:00\n  app[web.1]:   from\n  /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/loaded_features_index.rb:83:in\n  <code>register</code> \n  <br>2019-02-24T23:51:53.221966+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in\n  <code>require_with_bootsnap_lfi</code>\n  <br>2019-02-24T23:51:53.221974+00:00\n  app[web.1]:   from\n  /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in\n  <code>require</code>\n  <br>2019-02-24T23:51:53.221975+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:44:in\n  <code>require_relative</code>\n  <br>2019-02-24T23:51:53.221977+00:00 app[web.1]:    from\n  config.ru:3:in <code>block in &lt;main&gt;</code>\n  <br>2019-02-24T23:51:53.221979+00:00\n  app[web.1]:   from\n  /app/vendor/bundle/ruby/2.5.0/gems/rack-2.0.6/lib/rack/builder.rb:55:in\n  <code>instance_eval</code>\n  <br>2019-02-24T23:51:53.221981+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/rack-2.0.6/lib/rack/builder.rb:55:in\n  <code>initialize</code>\n  <br>2019-02-24T23:51:53.221983+00:00 app[web.1]:    from\n  config.ru:in <code>new</code>\n  <br>2019-02-24T23:51:53.221984+00:00 app[web.1]:    from\n  config.ru:in <code>&lt;main&gt;</code> \n  <br>2019-02-24T23:51:53.221986+00:00 app[web.1]:\n    from\n  /app/vendor/bundle/ruby/2.5.0/gems/rack-2.0.6/lib/rack/builder.rb:49:in\n  <code>eval</code>\n  <br>2019-02-24T23:51:53.221988+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/rack-2.0.6/lib/rack/builder.rb:49:in\n  <code>new_from_string</code>\n  <br>2019-02-24T23:51:53.221989+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/rack-2.0.6/lib/rack/builder.rb:40:in\n  <code>parse_file</code>\n  <br>2019-02-24T23:51:53.221991+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/rack-2.0.6/lib/rack/server.rb:319:in\n  <code>build_app_and_options_from_config</code>\n  <br>2019-02-24T23:51:53.221993+00:00\n  app[web.1]:   from\n  /app/vendor/bundle/ruby/2.5.0/gems/rack-2.0.6/lib/rack/server.rb:219:in\n  <code>app</code> \n  <br>2019-02-24T23:51:53.221994+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.2/lib/rails/commands/server/server_command.rb:27:in\n  <code>app</code>\n  <br>2019-02-24T23:51:53.221996+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/rack-2.0.6/lib/rack/server.rb:354:in\n  <code>wrapped_app</code>\n  <br>2019-02-24T23:51:53.221997+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/rack-2.0.6/lib/rack/server.rb:283:in\n  <code>start</code>\n  <br>2019-02-24T23:51:53.221999+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.2/lib/rails/commands/server/server_command.rb:53:in\n  <code>start</code>\n  <br>2019-02-24T23:51:53.222001+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.2/lib/rails/commands/server/server_command.rb:147:in\n  <code>block in perform</code>\n  <br>2019-02-24T23:51:53.222002+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.2/lib/rails/commands/server/server_command.rb:142:in\n  <code>tap</code>\n  <br>2019-02-24T23:51:53.222004+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.2/lib/rails/commands/server/server_command.rb:142:in\n  <code>perform</code>\n  <br>2019-02-24T23:51:53.222005+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/thor-0.20.3/lib/thor/command.rb:27:in\n  <code>run</code> \n  <br>2019-02-24T23:51:53.222007+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/thor-0.20.3/lib/thor/invocation.rb:126:in\n  <code>invoke_command</code>\n  <br>2019-02-24T23:51:53.222009+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/thor-0.20.3/lib/thor.rb:387:in\n  <code>dispatch</code> \n  <br>2019-02-24T23:51:53.222010+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.2/lib/rails/command/base.rb:65:in\n  <code>perform</code>\n  <br>2019-02-24T23:51:53.222012+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.2/lib/rails/command.rb:46:in\n  <code>invoke</code> \n  <br>2019-02-24T23:51:53.222014+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/railties-5.2.2/lib/rails/commands.rb:18:in\n  <code>&lt;main&gt;</code>\n  <br>2019-02-24T23:51:53.222015+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in\n  <code>require</code>\n  <br>2019-02-24T23:51:53.222017+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in\n  <code>block in require_with_bootsnap_lfi</code> \n  <br>2019-02-24T23:51:53.222018+00:00\n  app[web.1]:   from\n  /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/loaded_features_index.rb:83:in\n  <code>register</code>\n  <br>2019-02-24T23:51:53.222020+00:00 app[web.1]:    from\n  /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in\n  <code>require_with_bootsnap_lfi</code>\n  <br>2019-02-24T23:51:53.222022+00:00\n   app[web.1]:    from\n   /app/vendor/bundle/ruby/2.5.0/gems/bootsnap-1.4.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in <code>require</code> \n  <br>2019-02-24T23:51:53.222023+00:00 app[web.1]:    from bin/rails:9:in <code>&lt;main&gt;</code>\n  <br>2019-02-24T23:51:53.223670+00:00 app[web.1]: => Booting Puma \n  <br>2019-02-24T23:51:53.223672+00:00 app[web.1]: => Rails 5.2.2 application starting in production<br>\n  <br>2019-02-24T23:51:53.223673+00:00 app[web.1]: => Run <code>rails server -h</code>\n  for more startup options \n  <br>2019-02-24T23:51:53.223675+00:00 app[web.1]: Exiting 2019-02-24T23:51:53.294763+00:00 heroku[web.1]: Process exited with status 1</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1551048858, "post_id": 54857221, "comment_id": 96486241, "body": "You misread the question as I did. The OP wants the student&#39;s name."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 1, "creation_date": 1551094451, "post_id": 54857221, "comment_id": 96500976, "body": "The answer returns the grade hash from which you can simply extract the student though."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 4, "last_activity_date": 1551047664, "creation_date": 1551047664, "answer_id": 54857221, "question_id": 54857208, "link": "https://stackoverflow.com/questions/54857208/ruby-hash-searching-for-two-criterias/54857221#54857221", "title": "ruby hash searching for two criterias", "body": "<ol>\n<li>filter for people with age 20</li>\n<li><p>find the maximum score</p>\n\n<pre><code>grades.select { |person| person[:age] == 20 }.max_by { |person| person[:score] }\n</code></pre></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1551048230, "post_id": 54857272, "comment_id": 96486111, "body": "Not the downvoter, sorry. Would max work in a case like <code>grades.max { |person| person[:age] == 20 ? 1 : 0 }</code>?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1551048644, "post_id": 54857272, "comment_id": 96486201, "body": "@Sabastian, you are right, <code>max</code> is sufficient, but <code>1 : 0</code> won&#39;t work because we only the the 20-year old student with the highest score."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1551054424, "last_edit_date": 1551054424, "creation_date": 1551048020, "answer_id": 54857272, "question_id": 54857208, "link": "https://stackoverflow.com/questions/54857208/ruby-hash-searching-for-two-criterias/54857272#54857272", "title": "ruby hash searching for two criterias", "body": "<p>My objective is to make a single pass through the hashes.</p>\n\n<p>Initially I posted the following, but it was incorrect because it returns the name of a student who is not 20 if there are no students of age 20.</p>\n\n<pre><code>grades.max { |h| h[:age] == 20 ? h[:score] :\n  -Float::INFINITY }[:student]\n</code></pre>\n\n<p>Here is my revised answer:</p>\n\n<pre><code>def best20(grades)\n  student = nil\n  highest = -Float::INFINITY\n  grades.each do |h|\n    if h[:age] == 20 &amp;&amp; h[:score] &gt; highest\n      highest = h[:score]\n      student = h[:student]\n    end\n  end\n  student\nend\n\nbest20 grades\n  #=&gt; \"patrick\"\n\nbest20 [{:student=&gt;\"James\", :age=&gt;19, :score=&gt;85}]\n  #=&gt; nil\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 0, "last_activity_date": 1551057147, "creation_date": 1551057147, "answer_id": 54858250, "question_id": 54857208, "link": "https://stackoverflow.com/questions/54857208/ruby-hash-searching-for-two-criterias/54858250#54858250", "title": "ruby hash searching for two criterias", "body": "<p>Just as idea.</p>\n\n<p>Suppose we have several 20-year-old students with the same maximum score.</p>\n\n<p>In this case variants of Cary and Ursus return only first person.</p>\n\n<p>Therefore, such a thought occurred to me:</p>\n\n<pre><code>grades = [\n  {:student=&gt;\"James\", :age=&gt;19, :score=&gt;85},\n  {:student=&gt;\"Kate\", :age=&gt;19, :score=&gt;92},\n  {:student=&gt;\"Sara\", :age=&gt;20, :score=&gt;74},\n  {:student=&gt;\"Riley\", :age=&gt;20, :score=&gt;85},\n  {:student=&gt;\"Patrick\", :age=&gt;20, :score=&gt;96},\n  {:student=&gt;\"Vladimir\", :age=&gt;20, :score=&gt;96},\n  {:student=&gt;\"Luke\", :age=&gt;21, :score=&gt;88},\n  {:student=&gt;\"Susie\", :age=&gt;21, :score=&gt;90}\n]\n\ndef best20(grades)\n  students20 = grades.select { |r| r[:age] == 20 }\n  return nil if students20.empty?\n  max_score20 = students20.max_by { |r| r[:score] }[:score]\n  students20.select { |r| r[:score] == max_score20 }.map { |r| r[:student] }\nend\n\nbest20 grades\n# =&gt; [\"Patrick\", \"Vladimir\"]\n\nbest20 [{:student=&gt;\"James\", :age=&gt;19, :score=&gt;85}]\n# =&gt; nil\n</code></pre>\n\n<p>Do not judge strictly, this is just an idea.</p>\n"}], "owner": {"reputation": 19, "user_id": 11110836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55f1455b1d0fffff8d6b455062a93899?s=128&d=identicon&r=PG&f=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/11110836/danny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1551057147, "creation_date": 1551047552, "last_edit_date": 1551047674, "question_id": 54857208, "link": "https://stackoverflow.com/questions/54857208/ruby-hash-searching-for-two-criterias", "title": "ruby hash searching for two criterias", "body": "<pre><code>grades = [\n  {:student=&gt;\"James\", :age=&gt;19, :score=&gt;85},\n  {:student=&gt;\"Kate\", :age=&gt;19, :score=&gt;92},\n  {:student=&gt;\"Sara\", :age=&gt;20, :score=&gt;74},\n  {:student=&gt;\"Riley\", :age=&gt;20, :score=&gt;85},\n  {:student=&gt;\"patrick\", :age=&gt;20, :score=&gt;96},\n  {:student=&gt;\"luke\", :age=&gt;21, :score=&gt;88},\n  {:student=&gt;\"susie\", :age=&gt;21, :score=&gt;90}\n]\n</code></pre>\n\n<p>I am trying to get the student with the highest score that is the age 20 but only can sort the highest by all the students. Does any one know how to limit the max_by to only students that are 20 from the above hash ?</p>\n"}, {"tags": ["ruby", "docker", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 148, "user_id": 3032799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e933bfec3c5de2c3f935a783800a0f86?s=128&d=identicon&r=PG", "display_name": "Struki84", "link": "https://stackoverflow.com/users/3032799/struki84"}, "edited": false, "score": 0, "creation_date": 1551534900, "post_id": 54856520, "comment_id": 96679867, "body": "Yep, in first attempt i didn&#39;t use docker-compose, once I set it up, and synced the volumes, everything works. tnx ;)"}], "tags": [], "owner": {"reputation": 36, "user_id": 9204178, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215327832376926/picture?type=large", "display_name": "crescentrose", "link": "https://stackoverflow.com/users/9204178/crescentrose"}, "is_accepted": true, "score": 2, "last_activity_date": 1551042161, "creation_date": 1551042161, "answer_id": 54856520, "question_id": 54856422, "link": "https://stackoverflow.com/questions/54856422/sinatrareloader-not-reloading-files-in-docker-container/54856520#54856520", "title": "Sinatra::Reloader not reloading files in Docker container", "body": "<p>Your issue is with Docker: once an image is built, you can not (easily) alter its contents anymore except by rebuilding it. So, when you change the contents of <code>controller/hello.rb</code> on your host system, the change does not propagate inside of the image. You can <a href=\"https://docs.docker.com/storage/bind-mounts/\" rel=\"nofollow noreferrer\">use Docker volumes to mount your host directory inside of the container</a>, so that any changes you make in the host system will propagate inside of the container (just don't forget to rebuild it before deploying!). You could <a href=\"https://docs.docker.com/compose/compose-file/#volumes\" rel=\"nofollow noreferrer\">also declare that in a docker-compose.yml</a> file for easier maintenance!</p>\n"}], "owner": {"reputation": 148, "user_id": 3032799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e933bfec3c5de2c3f935a783800a0f86?s=128&d=identicon&r=PG", "display_name": "Struki84", "link": "https://stackoverflow.com/users/3032799/struki84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 1, "accepted_answer_id": 54856520, "answer_count": 1, "score": 0, "last_activity_date": 1551042161, "creation_date": 1551041525, "question_id": 54856422, "link": "https://stackoverflow.com/questions/54856422/sinatrareloader-not-reloading-files-in-docker-container", "title": "Sinatra::Reloader not reloading files in Docker container", "body": "<p>I'm trying to setup a simple sinatra app in a Docker container. I've setup modular Sinatra app on rack with <code>config.ru</code>:</p>\n\n<pre><code>require 'rubygems'\nrequire 'sinatra'\nrequire \"sinatra/reloader\"\n\nDir[File.dirname(__FILE__) + '/controllers/*.rb'].each {|file| require file}\n\n#map controllers\nmap('/') {run WebController}\n</code></pre>\n\n<p>Single controller <code>/controllers/hello.rb</code>: </p>\n\n<pre><code>class WebController &lt; Sinatra::Base\n\n  register Sinatra::Reloader\n\n  get '/' do\n    \"Hello World\"\n  end\n\n  get '/test' do\n    \"Hello World I'm a docker app\"\n  end\nend\n</code></pre>\n\n<p>And here's the <code>Dockerfile</code>: </p>\n\n<pre><code>FROM ruby:2.4.0\nMAINTAINER Bugs Bunny &lt;bbunny@rubyplus.com&gt;\n\nRUN apt-get update &amp;&amp; \\ apt-get install -y net-tools\n\n# Install gems\nENV APP_HOME /app\nENV HOME /root\nRUN mkdir $APP_HOME\nWORKDIR $APP_HOME\nCOPY Gemfile* $APP_HOME/\nRUN bundle install\n\n# Upload source\nCOPY . $APP_HOME\n\n# Start server\nENV PORT 3000\nEXPOSE 3000\nCMD [\"bundle\", \"exec\", \"rackup\", \"-o\", \"0.0.0.0\", \"-p\", \"3000\"]\n</code></pre>\n\n<p>The <code>Gemfile</code>:</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'rack'\ngem 'rack-test'\ngem 'sinatra'\ngem 'sinatra-contrib'\n</code></pre>\n\n<p>When runing <code>docker run -p 3000:3000 sinatra</code> the WEBrick output:</p>\n\n<pre><code>[2019-02-24 20:43:08] INFO  WEBrick 1.3.1\n[2019-02-24 20:43:08] INFO  ruby 2.4.0 (2016-12-24) [x86_64-linux]\n[2019-02-24 20:43:08] INFO  WEBrick::HTTPServer#start: pid=1 port=3000\n</code></pre>\n\n<p>The problem is, when run in docker container <code>Sinatra::Reloader</code> doesn't refresh modified controller file anymore. </p>\n\n<p>I've tried running the same command <code>bundle exec rackup -o 0.0.0.0 -p 3000</code> on the host machine and reloading happens as expected. If I edit the <code>/controllers/hello.rb</code> after refreshing the page on <code>localhost:3000</code> changes are shown immediately. </p>\n\n<p>When I run the same app in Docker the reloading stops working. </p>\n\n<p>Any help appreciated, tnx.  </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551041098, "post_id": 54856256, "comment_id": 96484228, "body": "Would you share the output of <code>@order.order_status</code> ?"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551041209, "post_id": 54856256, "comment_id": 96484257, "body": "<code>enum order_status: { created: 1, charged: 2, canceled: 3 }</code>"}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551041271, "post_id": 54856256, "comment_id": 96484275, "body": "Is it rails enum right?"}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551041864, "post_id": 54856256, "comment_id": 96484453, "body": "Do you use db enum or rails enum?"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551042512, "post_id": 54856256, "comment_id": 96484634, "body": "It is rails enum"}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551044103, "post_id": 54856256, "comment_id": 96485095, "body": "I shared a solution. Would you test it?"}], "answers": [{"comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1551044549, "post_id": 54856792, "comment_id": 96485220, "body": "I use this for my @user model but never thought to try it elsewhere lmao.  thank you"}], "tags": [], "owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "is_accepted": true, "score": 1, "last_activity_date": 1551044721, "last_edit_date": 1551044721, "creation_date": 1551044080, "answer_id": 54856792, "question_id": 54856256, "link": "https://stackoverflow.com/questions/54856256/checking-record-before-update/54856792#54856792", "title": "Checking record before update", "body": "<p><code>@order.order_status</code> is corresponding to string when it comes to rails enums. \nIn your case, say <code>@order.order_status</code> is <code>charged</code>. When you execute <code>@order.order_status[2]</code> it actually produces <code>a</code> which is the third item of <code>charged</code> string. In this case the comparison always returns true.\nSo try the following code:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>    def prevent_order_update\n      @order = Order.find(params[:id])\n      if ( @order.charged? || @order.canceled? ) \n        redirect_to @order, notice: \"Your request status for Order:#{@order.id} has already been updated.\"\n      end\n    end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 1437362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/icbsF.jpg?s=128&g=1", "display_name": "Dhanabal", "link": "https://stackoverflow.com/users/1437362/dhanabal"}, "is_accepted": false, "score": 0, "last_activity_date": 1551070030, "creation_date": 1551070030, "answer_id": 54859629, "question_id": 54856256, "link": "https://stackoverflow.com/questions/54856256/checking-record-before-update/54859629#54859629", "title": "Checking record before update", "body": "<p>You can use aasm gem, so that you no need any before_action. You can solve it in model level using aasm transitions</p>\n\n<p><a href=\"https://github.com/aasm/aasm\" rel=\"nofollow noreferrer\">https://github.com/aasm/aasm</a></p>\n"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 54856792, "answer_count": 2, "score": -1, "last_activity_date": 1551070030, "creation_date": 1551040325, "last_edit_date": 1592644375, "question_id": 54856256, "link": "https://stackoverflow.com/questions/54856256/checking-record-before-update", "title": "Checking record before update", "body": "<p><strong>Goal:</strong> To check if a record has already been updated and either allow or not allow the record to be updated if it already has been.</p>\n<p>This is in case a buyer is on a page that doesn't have updated information and attempts to cancel an order once it's already been completed.</p>\n<p>I have the following code, which works but also doesn't work correctly:</p>\n<pre><code>private\n\n    def prevent_order_update\n      @order = Order.find(params[:id])\n      if ( @order.order_status[2] || @order.order_status[3] ) \n        redirect_to @order, notice: &quot;Your request status for Order:#{@order.id} has already been updated.&quot;\n      end\n    end\n</code></pre>\n<p><strong>with:</strong></p>\n<pre><code>  before_action :prevent_order_update, :only =&gt; [:update]\n</code></pre>\n<p>This works, but also &quot;works&quot; if the <code>:order_status</code> is <code>1</code>, which is shouldn't.</p>\n<p>I only want a block in the update IF the order status is anything but <code>1</code>.</p>\n<p>The order status is from a model enum of 1,2,3.</p>\n<p><strong>I have also tried using:</strong></p>\n<p><code>if ( @order.order_status[2] || @order.order_status[3] ) &amp;&amp; @order.order_status_previously_changed?</code></p>\n<p>which completely blocks the <code>prevent_order_update</code> from working all together.</p>\n<p><strong>And:</strong></p>\n<p><code>( @order.order_status[2] || @order.order_status[3] ) != @order.order_status[1]</code></p>\n<p>Which then blocks my update method all together and still gives me the <code>prevent_order_update</code> method notice when the order status is <code>1</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "activerecord", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 1366, "user_id": 1915916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab243027eafbd8c5a15633945c45d35?s=128&d=identicon&r=PG", "display_name": "TheAshwaniK", "link": "https://stackoverflow.com/users/1915916/theashwanik"}, "edited": false, "score": 0, "creation_date": 1551115259, "post_id": 54856797, "comment_id": 96513412, "body": "Thank you very much,I tried your suggestion. there is still some problem. So I am adding as update to my question as there is restriction in comments space."}], "tags": [], "owner": {"reputation": 600, "user_id": 5994561, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh5.googleusercontent.com/-VGTzdts3mMw/AAAAAAAAAAI/AAAAAAAAADY/6Qwn_AVjnQI/photo.jpg?sz=128", "display_name": "sammms", "link": "https://stackoverflow.com/users/5994561/sammms"}, "is_accepted": false, "score": 0, "last_activity_date": 1551044117, "creation_date": 1551044117, "answer_id": 54856797, "question_id": 54856159, "link": "https://stackoverflow.com/questions/54856159/change-class-based-on-active-record-db-query-with-link-to-in-loop-in-rails/54856797#54856797", "title": "Change Class based on active record db query with link_to in loop in rails?", "body": "<p>Since you are inside of an ERB block <code>&lt;%=... %&gt;</code> you can write vanilla ruby and it will be evaluated.  That means you can used interpolation inside the string you pass to <code>class</code>, e.g. \n<code>class=\"#{'btn-danger' if metric.ko?}\"</code> \nwhere <code>ko?</code> is a method defined in <code>Metric</code> that will return the boolean used to evaluate your condition.  eg...</p>\n\n<pre><code>class Metric\n  def ko?\n    metric_value == 'KO'\n  end\nend\n</code></pre>\n\n<p>For the second part, you could use the same logic.  Create a CSS class that makes your box look the way you want it to look, then conditionally add it using string interpolation in the ERB class definition.  Then just define a method on the Class (I think it sounds like you would want the application class in this case so you can evaluate it's associated metrics) and use that to return a boolean.</p>\n"}], "owner": {"reputation": 1366, "user_id": 1915916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab243027eafbd8c5a15633945c45d35?s=128&d=identicon&r=PG", "display_name": "TheAshwaniK", "link": "https://stackoverflow.com/users/1915916/theashwanik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1551891983, "creation_date": 1551039745, "last_edit_date": 1551891983, "question_id": 54856159, "link": "https://stackoverflow.com/questions/54856159/change-class-based-on-active-record-db-query-with-link-to-in-loop-in-rails", "title": "Change Class based on active record db query with link_to in loop in rails?", "body": "<p>Requesting expert help.</p>\n\n<p>I have an applications table which has_many metrics.   </p>\n\n<p>At some point of time, metrics will have following kind of records.</p>\n\n<p>{capture_time:\"08:00:10.1234\",metric_name:\"log\",metric_value:\"OK\",application_id:1}\n{capture_time:\"09:00:10.1234\",metric_name:\"process\",metric_value:\"KO\",application_id:1}\n{capture_time:\"10:00:10.1234\",metric_name:\"process\",metric_value:\"OK\",application_id:1}</p>\n\n<p>{capture_time:\"08:00:10.1234\",metric_name:\"log\",metric_value:\"OK\",application_id:2}\n{capture_time:\"09:00:10.1234\",metric_name:\"process\",metric_value:\"OK\",application_id:2}\n{capture_time:\"10:00:10.1234\",metric_name:\"process\",metric_value:\"KO\",application_id:2}</p>\n\n<p>I have a bigger loop for applications and for each application , I create buttons for each metric for that application</p>\n\n<pre><code>&lt;% applic.metric.uniq{|p|p.metric_name}.each do |m| %&gt;\n&lt;%= link_to m.metric_name, metrics_path(m.application_id,metric_name: m.metric_name) , :class=&gt;\"btn btn-success\",:role=&gt;\"button\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/eibSV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eibSV.png\" alt=\"enter image description here\"></a></p>\n\n<p>On clicking any button it shows me records only for that metrics. For e.g. if I click on process, i see all records of that metric, which is 2 records in my case.</p>\n\n<p><a href=\"https://i.stack.imgur.com/lbIpP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lbIpP.png\" alt=\"enter image description here\"></a></p>\n\n<p>So till here its fine. What I am looking help for is two folds:</p>\n\n<ol>\n<li>How to determine latest metrics(based in capture time) for that application that is KO and then use that to change the class in link_to inside the loop. Something like this:   </li>\n</ol>\n\n<blockquote>\n<pre><code>&lt;% applic.metric.uniq{|p|p.metric_name}.each do |m| %&gt;\n&lt;%= link_to m.metric_name, metrics_path(m.application_id,metric_name: m.metric_name),:class=&gt;\"btn btn-success\",:role=&gt;\"button\" %&gt;    \n&lt;% end %&gt;\n</code></pre>\n</blockquote>\n\n<p><strong><em>Class => btn-danger if latest record for this metric was KO else btn-success</em></strong>   </p>\n\n<p><a href=\"https://i.stack.imgur.com/KZCLx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KZCLx.png\" alt=\"enter image description here\"></a></p>\n\n<ol start=\"2\">\n<li>Then I would want to use the combined statuses of the Metrices and change the Class for the whole Application1 box.\nFor e.g if any one of Process, Log, Errorcounts is failed , which means any of the latest matrices of any of 3 category is KO, then the whole Application1 box should have a class as \"btn-danger\"</li>\n</ol>\n\n<p>like this:<br>\n<a href=\"https://i.stack.imgur.com/WUmcl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WUmcl.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>UPDATE 1 : Many Thanks to @sammms</strong></p>\n\n<p>I tried the suggestion and created following, but it still does not solve my problem.     </p>\n\n<pre><code>class Metric &lt; ApplicationRecord\n  belongs_to :application\n\n  def isFailed(metric_value=nil)\n    metric_value == 'KO'\n  end\nend\n\n&lt;% applic.metric.uniq{|p|p.metric_name}.each do |metric| %&gt;\n    &lt;%= link_to metric.metric_name, application_dashboard_metrics_path(appid:metric.application_id,metric_name: metric.metric_name), \n    {:class=&gt;\"btn #{metric.isFailed(metric.metric_value)? 'btn-danger':'btn-success' }\",:role=&gt;\"button\"} %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>the string interpolation works, as in it changes the class based on metric value.  But the problem is in uniq bit here.</p>\n\n<pre><code>applic.metric.uniq{|p|p.metric_name}.each\n</code></pre>\n\n<p>since I am looping through only the unique metric_name, it could be the one with metric_value as OK. And hence when it loops, it actually does not find any KO for that metric.</p>\n\n<p>If I don't use uniq in the loop, then I see one button for each record. something like below, </p>\n\n<p><a href=\"https://i.stack.imgur.com/NzryC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NzryC.png\" alt=\"enter image description here\"></a>     </p>\n\n<p>This is not what I wanted.<br>\nI wanted to have a button only once, per metric_name, then change the class based on the collective status of all the records for that metric.</p>\n\n<p>So, when I have 100 record for process metric, I don't want 100 buttons, I want only one process button, but the class should be based on if the latest metric_value is KO.   </p>\n\n<p><strong>UPDATE 2:</strong></p>\n\n<p>I solved the problem with this:</p>\n\n<pre><code>def isFailed(metric_name=nil)\n    p metric_name\n    #metric_value == 'KO'\n    Metric.where(metric_name:metric_name).order(\"capture_time DESC\").first.metric_value == \"KO\"\nend\n</code></pre>\n\n<p>Now I need to figure out the part 2.</p>\n"}, {"tags": ["ruby", "sqlite"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1551037885, "post_id": 54855384, "comment_id": 96483253, "body": "You not doing any quoting on your <code>info</code> at all; you&#39;re doing <code>input = gets.chomp.to_i</code> in the first case so it works okay because you always end up with a number but in the second case you&#39;re saying <code>info = gets.chomp.to_s</code> so you have a string. Look into prepared statements and placeholders."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1551037961, "post_id": 54855384, "comment_id": 96483278, "body": "As far as formatting goes, there&#39;s a <code>{}</code> button in the toolbar so you can select a block of text and hit that button. You could also read the <a href=\"https://stackoverflow.com/editing-help\">Markdown Help</a> documentation that the editor&#39;s toolbar links too."}, {"owner": {"reputation": 155, "user_id": 10611267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3caf805e19826b6593450921fe23ccf?s=128&d=identicon&r=PG&f=1", "display_name": "foo", "link": "https://stackoverflow.com/users/10611267/foo"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1551039008, "post_id": 54855384, "comment_id": 96483594, "body": "@muistooshort in this instance input is a variable #{var} should be sufficient?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1551039648, "post_id": 54855384, "comment_id": 96483799, "body": "No, raw string interpolation works only by accident. Always use placeholders or (if absolutely necessary) the driver&#39;s quoting methods."}, {"owner": {"reputation": 155, "user_id": 10611267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3caf805e19826b6593450921fe23ccf?s=128&d=identicon&r=PG&f=1", "display_name": "foo", "link": "https://stackoverflow.com/users/10611267/foo"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1551040625, "post_id": 54855384, "comment_id": 96484092, "body": "@muistooshort ok my concern with placeholders is 1) extra lines of repetition in code (eg var1 = var)   and 2) leads lengthy code (eg: db.execute &quot;update TABLEX SET moo= :something where moo = :something_else&quot;, something something_else.   <i>Any instance when string interpolation</i> would work with INTENT?"}], "answers": [{"tags": [], "owner": {"reputation": 155, "user_id": 10611267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3caf805e19826b6593450921fe23ccf?s=128&d=identicon&r=PG&f=1", "display_name": "foo", "link": "https://stackoverflow.com/users/10611267/foo"}, "is_accepted": false, "score": 0, "last_activity_date": 1551040926, "creation_date": 1551040926, "answer_id": 54856331, "question_id": 54855384, "link": "https://stackoverflow.com/questions/54855384/sqlite3-execute2-snagging-in-a-ruby-file/54856331#54856331", "title": "sqlite3 .execute2 snagging in a ruby file", "body": "<p>String interpolation fails in this instance.  Placeholders can be utilized.</p>\n\n<pre><code>print_out = db.execute2 \"select * from BAR WHERE Value = :info\", info\nprint_out.each do |p|\n    puts \"%s %s %s\" % [p[1],p[2],p[3]]\nend\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 10611267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3caf805e19826b6593450921fe23ccf?s=128&d=identicon&r=PG&f=1", "display_name": "foo", "link": "https://stackoverflow.com/users/10611267/foo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551040926, "creation_date": 1551034700, "last_edit_date": 1551040279, "question_id": 54855384, "link": "https://stackoverflow.com/questions/54855384/sqlite3-execute2-snagging-in-a-ruby-file", "title": "sqlite3 .execute2 snagging in a ruby file", "body": "<p>I have the following sqlite code as a standalone file.  It works.\nthe schema is basic.  <code>foo.db</code> table <code>bar</code>  <code>Id</code>, <code>Text</code>, <code>Value</code>, <code>Etc</code> are my columns</p>\n\n<pre><code>#!/usr/bin/env ruby\nrequire 'sqlite3'\nputs \"enter a number\"\ninput = gets.chomp.to_i\nbegin\n    db = SQLite3::Database.open('foo.db')\n    find_data = db.execute2 \"select * from bar where Value = #{input}\"\n    find_data.each do |f|\n        puts \"[%-8s] %-8s | %-8s\" % [f[1], f[2], f[3]]\n    end\nrescue SQLite::Exception =&gt; e\n    puts e\nensure\n    db.close if db\nend \n</code></pre>\n\n<p><code>execute2</code> locates the line and <code>find_data.each</code> prints out.</p>\n\n<p>However when I take the above snippet and place into a method in a larger program, I get `no such column: [input]\"</p>\n\n<p>In my method. <strong>I have condensed the code</strong>:</p>\n\n<pre><code>...\ndef find_info(info)\n    begin\n        db = SQLite3::Database.open('foo.db')\n        puts db.get_first_value \"select SQLite_VERSION()\"\n        return \"create a directory first\" unless File.exist?('foo.db')\n        #line below does not work at print_out below\n        print_out = db.execute2 \"SELECT * FROM Bar WHERE Value=#{info}\"\n        #but making the following changes works:\n        #info_in = info; print_out = db.execute2 \"select * from BAR WHERE Value = :info_in\", info_in\n        return \"no match\" unless print_out != nil\n        print_out.each do |line|\n            puts \"[%-8s] %-8s | %-8s\" % [line[1], line[2], line[3]]\n        end\n    rescue SQLite3::Exception =&gt; e\n        puts e\n    ensure\n        db.close if db\n    end\nend\n...\n\nprint 'enter text to search for'\ninfo = gets.chomp.to_s\nX.NewInstance.new; X.find_info(info)\n</code></pre>\n\n<p><em>My question:</em> Why am I obligated to use a placeholder in <code>print_out</code>?  I believe I should be able just throw in a variable as <code>print_out = db.execute2 \"select * from Bar WHERE Value=#{info}\"</code></p>\n\n<p>please help.  I am dumbfounded.</p>\n\n<p>(Also: there must be a way on SO to indent blocks of code most efficiently than hitting 4 spaces for each line of code...I spend more time formatting the code than I do typing the question...pls advise?)</p>\n"}, {"tags": ["ruby", "typeerror"], "comments": [{"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551035653, "post_id": 54855328, "comment_id": 96482586, "body": "Would you share the entire error?"}, {"owner": {"reputation": 3, "user_id": 10991741, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7OXWzX5yMwY/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMjsLtj3eEbgqvHZj2jgI-kakkiBQ/mo/photo.jpg?sz=128", "display_name": "P_A_ Rivers", "link": "https://stackoverflow.com/users/10991741/p-a-rivers"}, "reply_to_user": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551035863, "post_id": 54855328, "comment_id": 96482646, "body": "You will need 3 belayers. party_time.rb:27:in <code>[]&#39;: no implicit conversion of Symbol into Integer (TypeError) \tfrom party_time.rb:27:in </code>block in num_belayers&#39; \tfrom party_time.rb:26:in <code>each&#39; \tfrom party_time.rb:26:in </code>num_belayers&#39; \tfrom party_time.rb:40:in `&lt;main&gt;&#39;"}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551036400, "post_id": 54855328, "comment_id": 96482788, "body": "I shared the fix, please check it."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10991741, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7OXWzX5yMwY/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMjsLtj3eEbgqvHZj2jgI-kakkiBQ/mo/photo.jpg?sz=128", "display_name": "P_A_ Rivers", "link": "https://stackoverflow.com/users/10991741/p-a-rivers"}, "edited": false, "score": 1, "creation_date": 1551037048, "post_id": 54855644, "comment_id": 96482984, "body": "That did the trick. So the primary error was due to party_two not actually being a hash. Thanks for the help. I am new to coding and am trying to get use to the syntax of ruby. I appreciate you taking the time to help me out of this bind."}], "tags": [], "owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "is_accepted": true, "score": 0, "last_activity_date": 1551036351, "creation_date": 1551036351, "answer_id": 54855644, "question_id": 54855328, "link": "https://stackoverflow.com/questions/54855328/i-receive-a-typeerror-when-i-try-to-access-a-nested-array-of-hashes/54855644#54855644", "title": "I receive a (TypeError) when I try to access a nested array of hashes", "body": "<p><code>party_two</code> key is not referenced to a <code>Hash</code> so this is why you get exception. Try the following code.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def num_belayers\n  kid_count = 0\n  baby_count= 0\n  kids_hash.each_value do |parties|\n    next unless parties.is_a?(Hash)\n    parties[:attendance].each do |kid|\n      if kid[:age] &gt;= 5 \n          kid_count += 1\n        else\n          baby_count +=1\n        end\n      end\n\n    #if the kids are 5 y/o, we put 5 to a group\n    belays_kids = kid_count / 5.00\n\n    #if they are younger, there are 3 to a group\n    belays_babies = baby_count / 3.00\n    belays = belays_kids.ceil + belays_babies.ceil\n\n    puts \"You will need #{belays} belayers.\"\n  end\n  nil \nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 10991741, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7OXWzX5yMwY/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMjsLtj3eEbgqvHZj2jgI-kakkiBQ/mo/photo.jpg?sz=128", "display_name": "P_A_ Rivers", "link": "https://stackoverflow.com/users/10991741/p-a-rivers"}, "edited": false, "score": 0, "creation_date": 1551037898, "post_id": 54855749, "comment_id": 96483257, "body": "Thats a big help. Thanks"}], "tags": [], "owner": {"reputation": 36, "user_id": 7768631, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_i7O9OLMwVs/AAAAAAAAAAI/AAAAAAAAANo/X4eHzVffSBw/photo.jpg?sz=128", "display_name": "Varun Sharma", "link": "https://stackoverflow.com/users/7768631/varun-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1551037102, "creation_date": 1551037102, "answer_id": 54855749, "question_id": 54855328, "link": "https://stackoverflow.com/questions/54855328/i-receive-a-typeerror-when-i-try-to-access-a-nested-array-of-hashes/54855749#54855749", "title": "I receive a (TypeError) when I try to access a nested array of hashes", "body": "<p>This code throws error when \"parties\" is not a hash. You are assuming it to be a hash and wrote the code for the same. Thus it ends up throwing exception when something which is not excepted arrives just like in your test inputs party_one is a hash while party_two is a string. I suggest check if \"parties\" is a hash and proceed else skip the code for that party.</p>\n"}], "owner": {"reputation": 3, "user_id": 10991741, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7OXWzX5yMwY/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMjsLtj3eEbgqvHZj2jgI-kakkiBQ/mo/photo.jpg?sz=128", "display_name": "P_A_ Rivers", "link": "https://stackoverflow.com/users/10991741/p-a-rivers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 54855644, "answer_count": 2, "score": -2, "last_activity_date": 1551037102, "creation_date": 1551034311, "last_edit_date": 1551035639, "question_id": 54855328, "link": "https://stackoverflow.com/questions/54855328/i-receive-a-typeerror-when-i-try-to-access-a-nested-array-of-hashes", "title": "I receive a (TypeError) when I try to access a nested array of hashes", "body": "<p>Let's say I work for a rock climbing gym and I am trying to make the attendance process easier. Here I am trying to access the <code>age</code> values within hashes that are in an array nested in a hash. Though I receive the proper output number of \"belayers\", I also get a TypeError for the line <code>parties[:attendance].each do |kid|</code>. I understand that this is wrong but I'm unsure how to fix it. Any advice would be useful. </p>\n\n<pre><code>def kids_hash\n  kids_hash = {\n    :party_one =&gt;{\n      :facilitator =&gt; 'Erica',\n      :attendance =&gt; [\n      {name: 'Harry', age: 6, wavers: 'yes', harness: \"red\", shoe_size: 3},\n      {name: 'Frankie', age: 9, wavers: 'yes', harness: \"blue\", shoe_size: 7},\n      {name: 'Gale', age: 4, wavers: 'yes', harness: \"red\", shoe_size: 3},\n      {name: 'Rony', age: 4, wavers: 'no', harness: \"red\", shoe_size: 2},\n      {name: 'Julia', age: 10, wavers: 'yes', harness: \"blue\", shoe_size: 9},\n      {name: 'Sarah', age: 3, wavers: 'no', harness: \"red\", shoe_size: 13},\n      {name: 'James', age: 3, wavers: 'yes', harness: \"red\", shoe_size: 2},\n      {name: 'Kevin', age: 5, wavers: 'yes', harness: \"red\", shoe_size: 3},\n      {name: 'Jessie', age: 11, wavers: 'yes', harness: \"blue\", shoe_size: 10}\n      ]\n    },\n    :party_two =&gt; \"not booked yet\"\n  }\nend\n\ndef num_belayers\n  kid_count = 0\n  baby_count= 0\n  kids_hash.values.each do |parties|\n    parties[:attendance].each do |kid|\n      if kid[:age] &gt;= 5 \n          kid_count += 1\n        else\n          baby_count +=1\n        end\n      end\n\n    #if the kids are 5 y/o, we put 5 to a group\n    belays_kids = kid_count / 5.00\n\n    #if they are younger, there are 3 to a group\n    belays_babies = baby_count / 3.00\n    belays = belays_kids.ceil + belays_babies.ceil\n\n    puts \"You will need #{belays} belayers.\"\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rails-activerecord"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1551033611, "post_id": 54855123, "comment_id": 96481907, "body": "I don&#39;t understand what the issue is, can you show some console output maybe to make it clear what you&#39;re seeing?"}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551036694, "post_id": 54855123, "comment_id": 96482878, "body": "How many services there are on the database? The solution depends on the size of data."}, {"owner": {"reputation": 531, "user_id": 6724722, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh5.googleusercontent.com/-44hAeiAfcF8/AAAAAAAAAAI/AAAAAAAAAJk/0LWDwLuDIB4/photo.jpg?sz=128", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/6724722/dmitry"}, "edited": false, "score": 0, "creation_date": 1551041121, "post_id": 54855123, "comment_id": 96484236, "body": "In fact size of data doesn&#39;t matter, I want to have unique solution to get all data at once. Please refer to edited topic."}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551041713, "post_id": 54855123, "comment_id": 96484399, "body": "@Dmitry Is not <code>service</code> instance of  <code>Service</code> class? But you treat it as hash like <code>service[manager_name] = value</code>. I am a bit confused."}], "answers": [{"tags": [], "owner": {"reputation": 1146, "user_id": 262162, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f146e787560a7c4bbb8aa36d16ac5da?s=128&d=identicon&r=PG", "display_name": "GeekOnCoffee", "link": "https://stackoverflow.com/users/262162/geekoncoffee"}, "is_accepted": false, "score": 0, "last_activity_date": 1551039026, "creation_date": 1551039026, "answer_id": 54856042, "question_id": 54855123, "link": "https://stackoverflow.com/questions/54855123/activerecord-nested-associations/54856042#54856042", "title": "ActiveRecord nested associations", "body": "<p>You can define an additional has_many through relationship which should give you what you want. </p>\n\n<p><strong>has_many :managers, through: :payments</strong></p>\n\n<pre><code>class Service &lt; ApplicationRecord\n  validates :name, presence: true\n\n  has_and_belongs_to_many :tickets\n  has_many :payments\n\n  has_many :managers, through: :payments\nend\n\nclass Payment &lt; ApplicationRecord\n  belongs_to :manager\n  belongs_to :service\n  validates :value, :manager_id, :service_id, presence: true\nend\n\nclass Manager &lt; ApplicationRecord\n  validates :name, presence: true\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "is_accepted": false, "score": 0, "last_activity_date": 1551043667, "creation_date": 1551043667, "answer_id": 54856734, "question_id": 54855123, "link": "https://stackoverflow.com/questions/54855123/activerecord-nested-associations/54856734#54856734", "title": "ActiveRecord nested associations", "body": "<p>I did not understand your need %100 but I come up and idea like following. Please review it. </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>payments = Payment.joins(:service).select(:service_id, :manager_id, :value).\n    group_by(&amp;:service_id)\n\nmanagers = Manager.where('id IN(SELECT manager_id FROM payments)').\n    select(:name,:id)\n    group_by(&amp;:id).transform_values{ |value| value.first }\n\n\nresult = []\nResultClass = Struct.new(:service, :manager, :payment_value)\nService.all.each do |service|\n  payment = payments[service.id]\n  manager = managers[payment.manager_id]\n  result &lt;&lt; ResultClass.new(service, manager, payment.value)\nend\n</code></pre>\n\n<p>With this code, we are actually trying to accomplish rails <code>includes</code> mechanism under the hood. What we did actually here?</p>\n\n<ul>\n<li>We get the payments and converted them to hash that the id is hash key</li>\n<li>Then we get the managers those have payments and we converted also these records  with manager id as hash key</li>\n<li>We created <code>ResultClass</code> with <code>Struct</code> to store the references of objects like <code>service</code> and <code>manager</code></li>\n<li>We start the iteration. Because of the fact that we have <code>payments</code> and <code>members</code> as hash, there is fast look up and there is no time complexity. In overall, this iteration's time complexity is O(n)</li>\n</ul>\n\n<p>If you have any questions please feel free to drop a comment. </p>\n"}, {"comments": [{"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551084041, "post_id": 54860758, "comment_id": 96495193, "body": "Did you test my approach? What is the output of my approach? Would you mind me if you share it?"}, {"owner": {"reputation": 531, "user_id": 6724722, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh5.googleusercontent.com/-44hAeiAfcF8/AAAAAAAAAAI/AAAAAAAAAJk/0LWDwLuDIB4/photo.jpg?sz=128", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/6724722/dmitry"}, "reply_to_user": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551084535, "post_id": 54860758, "comment_id": 96495427, "body": "@zeitnot sorry I didn&#39;t test you code, it seems too complicated to me (maybe because I&#39;m activerecord noob)) anyway why we need 3 queries if we can get data using single and simple query?"}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551085403, "post_id": 54860758, "comment_id": 96495857, "body": "Well actually, I did not really understand your needs. So I thought that you had some problems with rails&#39;s <code>includes</code> and I did a workaround for that. You would want compare my solution and your solution in terms of speed. I am not sure which is the best because you have the data."}], "tags": [], "owner": {"reputation": 531, "user_id": 6724722, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh5.googleusercontent.com/-44hAeiAfcF8/AAAAAAAAAAI/AAAAAAAAAJk/0LWDwLuDIB4/photo.jpg?sz=128", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/6724722/dmitry"}, "is_accepted": false, "score": 0, "last_activity_date": 1551076882, "creation_date": 1551076882, "answer_id": 54860758, "question_id": 54855123, "link": "https://stackoverflow.com/questions/54855123/activerecord-nested-associations/54860758#54860758", "title": "ActiveRecord nested associations", "body": "<p>After lots of tries I've finally find some misspells I made and archieved behaviour I want using such code</p>\n\n<pre><code>services = Service.eager_load(payments: :manager)\n\n  services.reduce([]) do |acc, service|\n    service_rec = {\n      id: service[:id],\n      name: service[:name],\n      surgery: service[:surgery]\n    }\n\n    service.payments.each do |payment|\n      manager_name = payment.manager[:name]\n      value = payment[:value]\n\n      service_rec[manager_name] = value\n    end\n\n    acc.push(service_rec)\n  end\n</code></pre>\n\n<p>and SQL query it produces</p>\n\n<pre><code>SQL (0.2ms)  SELECT \"services\".\"id\" AS t0_r0, \"services\".\"code\" AS t0_r1, \"services\".\"name\" AS t0_r2, \"services\".\"surgery\" AS t0_r3, \"services\".\"enabled\" AS t0_r4, \"services\".\"created_at\" AS t0_r5, \"services\".\"updated_at\" AS t0_r6, \"payments\".\"id\" AS t1_r0, \"payments\".\"service_id\" AS t1_r1, \"payments\".\"manager_id\" AS t1_r2, \"payments\".\"value\" AS t1_r3, \"payments\".\"created_at\" AS t1_r4, \"payments\".\"updated_at\" AS t1_r5, \"managers\".\"id\" AS t2_r0, \"managers\".\"name\" AS t2_r1, \"managers\".\"enabled\" AS t2_r2, \"managers\".\"created_at\" AS t2_r3, \"managers\".\"updated_at\" AS t2_r4 FROM \"services\" LEFT OUTER JOIN \"payments\" ON \"payments\".\"service_id\" = \"services\".\"id\" LEFT OUTER JOIN \"managers\" ON \"managers\".\"id\" = \"payments\".\"manager_id\"\n</code></pre>\n\n<p>It is interesting that using <code>includes</code> instead of <code>eager_load</code> produces three queries instead </p>\n\n<pre><code>Service Load (0.1ms)  SELECT \"services\".* FROM \"services\"\n  \u21b3 app/services/payments_service.rb:6\n  Payment Load (0.1ms)  SELECT \"payments\".* FROM \"payments\" WHERE \"payments\".\"service_id\" IN (?, ?, ?, ?, ?, ?, ?, ?)  [[\"service_id\", 1], [\"service_id\", 2], [\"service_id\", 3], [\"service_id\", 4], [\"service_id\", 5], [\"service_id\", 6], [\"service_id\", 7], [\"service_id\", 8]]\n  \u21b3 app/services/payments_service.rb:6\n  Manager Load (0.1ms)  SELECT \"managers\".* FROM \"managers\" WHERE \"managers\".\"id\" IN (?, ?, ?, ?)  [[\"id\", 1], [\"id\", 2], [\"id\", 3], [\"id\", 4]]\n</code></pre>\n\n<p>Also we can use <code>Service.includes(payments: :manager).references(:payments, :managers)</code> and got the same query as <code>eager_load</code> but it's longer to type))</p>\n\n<p>Thanks everyone for participation! Does anyone have another opinion about <code>eager_load</code> or code optimisation proposals? </p>\n"}], "owner": {"reputation": 531, "user_id": 6724722, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh5.googleusercontent.com/-44hAeiAfcF8/AAAAAAAAAAI/AAAAAAAAAJk/0LWDwLuDIB4/photo.jpg?sz=128", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/6724722/dmitry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1551077195, "creation_date": 1551033076, "last_edit_date": 1551077195, "question_id": 54855123, "link": "https://stackoverflow.com/questions/54855123/activerecord-nested-associations", "title": "ActiveRecord nested associations", "body": "<p>I have some models like <code>Service</code>, <code>Payment</code> and <code>Manager</code></p>\n\n<pre><code>class Service &lt; ApplicationRecord\n  validates :name, presence: true\n\n  has_and_belongs_to_many :tickets\n  has_many :payments\nend\n\nclass Payment &lt; ApplicationRecord\n  belongs_to :manager\n  belongs_to :service\n  validates :value, :manager_id, :service_id, presence: true\nend\n\nclass Manager &lt; ApplicationRecord\n  validates :name, presence: true\nend\n</code></pre>\n\n<p><code>Service</code> can have multiple <code>Payment</code>s and each <code>Payment</code> has single <code>Manager</code>.</p>\n\n<p>I want to get the whole data using all nested associations as a hash that I could reformat (or map) and sent to the client. I am stuck with query:</p>\n\n<pre><code>Service.includes(payments: :manager).references(:payments, :managers)\n</code></pre>\n\n<p>as it is using lazy load, and I need to do something like:</p>\n\n<pre><code>services.first.payments.first.manager\n</code></pre>\n\n<p>to get data, and it is non-optimal.</p>\n\n<p>Is it possible to get all data with all nested associations?</p>\n\n<p>I did calculations like this:</p>\n\n<pre><code>services = Service.includes(payments: :manager)\n                   .references(:payments, :managers)\n\n  result = []\n\n  services.each do |service|\n    service.payments.each do |payment|\n      manager_name = payment[:manager][:name]\n      value = payment[:value]\n\n      service[manager_name] = value\n    end\n\n    result.push(service)\n  end\n</code></pre>\n\n<p>and got an error <code>NoMethodError (undefined method '[]' for nil:NilClass):</code>\non <code>manager_name = payment[:manager][:name]</code> line.</p>\n"}, {"tags": ["regex", "ruby"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1551033116, "post_id": 54855094, "comment_id": 96481769, "body": "<code>$</code> is the token for end of line.  <a href=\"http://rubular.com\" rel=\"nofollow noreferrer\">rubular.com</a> is (beyond) handy for validating regexes..."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1551034374, "post_id": 54855094, "comment_id": 96482169, "body": "<code>[.]+</code> matches 1 or more dots. <code>.+</code> matches 1+ chars other than a newline. Use <code>.+</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551034619, "post_id": 54855094, "comment_id": 96482246, "body": "Why do you want to capture each newline? If <code>str</code> is your string, could you not write <code>str.split(&quot;\\n&quot;).map { |s| s.split(&#47;: +&#47;) }   #=&gt; [[&quot;Broker and broker&#180;s fees&quot;, &quot;\u4e0d\u9069\u5408&quot;], [&quot;Specific purpose or use for the present acquisition or disposal&quot;, &quot;\u56e0\u61c9&quot;], [&quot;Other issues to be disclosed&quot;, &quot;\u7121&quot;]]</code>? I suspect I may not fully understand the question."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1551038269, "post_id": 54855094, "comment_id": 96483360, "body": "@Wiktor, I am perplexed by your criteria for closing a question on the grounds that it is a duplicate of an earlier question. The earlier questions you cite relate to the error the OP made here in trying to solve the current problem, but the questions themselves are unrelated. I&#39;ve seen many clearly unique questions where the OP&#39;s code contained a common error that was no doubt the subject of an earlier question, but that&#39;s no reason to conclude that the question itself is a duplicate."}], "answers": [{"tags": [], "owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "is_accepted": true, "score": 0, "last_activity_date": 1551033350, "creation_date": 1551033350, "answer_id": 54855157, "question_id": 54855094, "link": "https://stackoverflow.com/questions/54855094/how-to-create-a-regexp-that-ends-in-a-line-break/54855157#54855157", "title": "How to create a regexp that ends in a line break?", "body": "<p>As your line contains a colon which also acts as a separator for english and Chinese text, you can use this regex to capture English in group1 and Chinese in group2 to capture the text respectively. Try using this regex,</p>\n\n<pre><code>(.+):\\s+(.+)\n</code></pre>\n\n<p><strong><a href=\"https://regex101.com/r/eXCrV1/1\" rel=\"nofollow noreferrer\">Demo</a></strong></p>\n\n<p>Let me know if you face any issues.</p>\n"}], "owner": {"reputation": 27, "user_id": 10909804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38600b582c607064db7c5940b6431f21?s=128&d=identicon&r=PG&f=1", "display_name": "Wilsonmarcos", "link": "https://stackoverflow.com/users/10909804/wilsonmarcos"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1551036185, "accepted_answer_id": 54855157, "answer_count": 1, "score": -1, "last_activity_date": 1551033668, "creation_date": 1551032912, "last_edit_date": 1551033668, "question_id": 54855094, "link": "https://stackoverflow.com/questions/54855094/how-to-create-a-regexp-that-ends-in-a-line-break", "closed_reason": "Duplicate", "title": "How to create a regexp that ends in a line break?", "body": "<p>I have (looong) inputs that are lists of sentences/bullets like the following:</p>\n\n<pre><code>Broker and broker\u00b4s fees: \u4e0d\u9069\u5408\n\nSpecific purpose or use for the present acquisition or disposal: \u56e0\u61c9\u5167\u90e8\u7ba1\u7406\u9700\u8981\uff0c\u8abf\u6574\u6295\u8cc7\u67b6\u69cb\n\nOther issues to be disclosed: \u7121\n</code></pre>\n\n<p>In order to \"translate\" the Chinese text, I want to create objects, in a regexp fashion, so I can later transform the second captured group according to what it says. </p>\n\n<p>I thought something like the following would work:</p>\n\n<pre><code>Specific_purpose = /(Specific purpose or use for the present acquisition or disposal: )([.]+)(\\n)/\nOther_issues = /(Other issues to be disclosed: )([.]+)(\\n)/\n</code></pre>\n\n<p>i.e. this regexps should be composed of captured group 1 (the title in English), captured group 2 (the section in Chinese) and the captured group 3, i.e. the new line that indicates where the object ends.</p>\n\n<p>Still, the code does not work and I cannot even get Ruby to find the needed objects in the input. If, for example, I add:</p>\n\n<pre><code>if input.include? Specific_purpose.to_s\n    puts \"Yes, I found such bullet \"\nelse\n    puts \"No, there is no such bullet\"\nend\n</code></pre>\n\n<p>I keep getting \"No, there is no such bullet\", no matter how I rewrite the regexp.</p>\n\n<p>Am I doing something wrong here? How do I create a regexp that will match everything until the line break?</p>\n"}, {"tags": ["ruby", "rubygems", "bundle", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 4249076, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WjrLU-c-2Mw/AAAAAAAAAAI/AAAAAAAAAyQ/p703OLsjyCo/photo.jpg?sz=128", "display_name": "banu reddy", "link": "https://stackoverflow.com/users/4249076/banu-reddy"}, "edited": false, "score": 0, "creation_date": 1551040199, "post_id": 54856120, "comment_id": 96483967, "body": "I tried and it run the command. But it gave me a different error after a while. I updated my post."}, {"owner": {"reputation": 102, "user_id": 8075327, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1900ae2249cf89e22fd586a18508ea6c?s=128&d=identicon&r=PG&f=1", "display_name": "Pushpam Kumar", "link": "https://stackoverflow.com/users/8075327/pushpam-kumar"}, "reply_to_user": {"reputation": 65, "user_id": 4249076, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WjrLU-c-2Mw/AAAAAAAAAAI/AAAAAAAAAyQ/p703OLsjyCo/photo.jpg?sz=128", "display_name": "banu reddy", "link": "https://stackoverflow.com/users/4249076/banu-reddy"}, "edited": false, "score": 0, "creation_date": 1551040471, "post_id": 54856120, "comment_id": 96484045, "body": "Can you check this answer <a href=\"https://stackoverflow.com/questions/18094564/unable-to-install-rails-extconf-rb-failed\" title=\"unable to install rails extconf rb failed\">stackoverflow.com/questions/18094564/&hellip;</a>"}, {"owner": {"reputation": 65, "user_id": 4249076, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WjrLU-c-2Mw/AAAAAAAAAAI/AAAAAAAAAyQ/p703OLsjyCo/photo.jpg?sz=128", "display_name": "banu reddy", "link": "https://stackoverflow.com/users/4249076/banu-reddy"}, "edited": false, "score": 0, "creation_date": 1551042706, "post_id": 54856120, "comment_id": 96484678, "body": "I did. However, the question was installing in macOS. I am trying on Kali linux and I keep getting the error."}, {"owner": {"reputation": 102, "user_id": 8075327, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1900ae2249cf89e22fd586a18508ea6c?s=128&d=identicon&r=PG&f=1", "display_name": "Pushpam Kumar", "link": "https://stackoverflow.com/users/8075327/pushpam-kumar"}, "reply_to_user": {"reputation": 65, "user_id": 4249076, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WjrLU-c-2Mw/AAAAAAAAAAI/AAAAAAAAAyQ/p703OLsjyCo/photo.jpg?sz=128", "display_name": "banu reddy", "link": "https://stackoverflow.com/users/4249076/banu-reddy"}, "edited": false, "score": 0, "creation_date": 1551091798, "post_id": 54856120, "comment_id": 96499480, "body": "Did you install all the dependencies before executing <code>.&#47;bin&#47;setup</code>?"}, {"owner": {"reputation": 65, "user_id": 4249076, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WjrLU-c-2Mw/AAAAAAAAAAI/AAAAAAAAAyQ/p703OLsjyCo/photo.jpg?sz=128", "display_name": "banu reddy", "link": "https://stackoverflow.com/users/4249076/banu-reddy"}, "edited": false, "score": 0, "creation_date": 1551100487, "post_id": 54856120, "comment_id": 96504332, "body": "i followed the instructions: first,  <code>apt-get install libsqlite3-dev</code>  <code>apt-get install libmariadbclient-dev-compat</code> <code>apt-get install mariadb-client-10.1 </code> <code>apt-get install mariadb-server-10.1</code> Which failed with above mentioned error. Then I tried the troubleshooting by <code>bundle install --path &#47;usr&#47;lib&#47;dradis-ce&#47;</code> also gives the error."}, {"owner": {"reputation": 102, "user_id": 8075327, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1900ae2249cf89e22fd586a18508ea6c?s=128&d=identicon&r=PG&f=1", "display_name": "Pushpam Kumar", "link": "https://stackoverflow.com/users/8075327/pushpam-kumar"}, "reply_to_user": {"reputation": 65, "user_id": 4249076, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WjrLU-c-2Mw/AAAAAAAAAAI/AAAAAAAAAyQ/p703OLsjyCo/photo.jpg?sz=128", "display_name": "banu reddy", "link": "https://stackoverflow.com/users/4249076/banu-reddy"}, "edited": false, "score": 0, "creation_date": 1551109174, "post_id": 54856120, "comment_id": 96509945, "body": "On which dependency you got the error? How many dependencies were you able to install?"}, {"owner": {"reputation": 65, "user_id": 4249076, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WjrLU-c-2Mw/AAAAAAAAAAI/AAAAAAAAAyQ/p703OLsjyCo/photo.jpg?sz=128", "display_name": "banu reddy", "link": "https://stackoverflow.com/users/4249076/banu-reddy"}, "edited": false, "score": 1, "creation_date": 1551137162, "post_id": 54856120, "comment_id": 96522509, "body": "I am gonna post a new question with the error. @Pushpam Kumar"}, {"owner": {"reputation": 65, "user_id": 4249076, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WjrLU-c-2Mw/AAAAAAAAAAI/AAAAAAAAAyQ/p703OLsjyCo/photo.jpg?sz=128", "display_name": "banu reddy", "link": "https://stackoverflow.com/users/4249076/banu-reddy"}, "edited": false, "score": 1, "creation_date": 1551137213, "post_id": 54856120, "comment_id": 96522525, "body": "I accepted your answer as it solved my initial problem."}, {"owner": {"reputation": 102, "user_id": 8075327, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1900ae2249cf89e22fd586a18508ea6c?s=128&d=identicon&r=PG&f=1", "display_name": "Pushpam Kumar", "link": "https://stackoverflow.com/users/8075327/pushpam-kumar"}, "reply_to_user": {"reputation": 65, "user_id": 4249076, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WjrLU-c-2Mw/AAAAAAAAAAI/AAAAAAAAAyQ/p703OLsjyCo/photo.jpg?sz=128", "display_name": "banu reddy", "link": "https://stackoverflow.com/users/4249076/banu-reddy"}, "edited": false, "score": 0, "creation_date": 1551199818, "post_id": 54856120, "comment_id": 96549814, "body": "hey, the problem is you don&#39;t have <code>nokogiri</code> gem. Install this gem, then it should work fine. Installation guide: <a href=\"https://nokogiri.org/tutorials/installing_nokogiri.html\" rel=\"nofollow noreferrer\">nokogiri.org/tutorials/installing_nokogiri.html</a>"}], "tags": [], "owner": {"reputation": 102, "user_id": 8075327, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1900ae2249cf89e22fd586a18508ea6c?s=128&d=identicon&r=PG&f=1", "display_name": "Pushpam Kumar", "link": "https://stackoverflow.com/users/8075327/pushpam-kumar"}, "is_accepted": true, "score": 1, "last_activity_date": 1551200025, "last_edit_date": 1592644375, "creation_date": 1551039560, "answer_id": 54856120, "question_id": 54855003, "link": "https://stackoverflow.com/questions/54855003/bundle-is-throwing-an-error-while-installing-dradis-community-edition/54856120#54856120", "title": "bundle is throwing an error while installing dradis community edition", "body": "<p>As you can see the error is throwing while executing <code>bundle install</code>. So I would suggest you to update you gem by executing <code>gem update --system</code></p>\n<h2>Edit:</h2>\n<p>The second error is throwing because <code>nokogiri</code> gem is not installed.<br />\nTo install execute <code>gem install nokogiri</code></p>\n"}], "owner": {"reputation": 65, "user_id": 4249076, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WjrLU-c-2Mw/AAAAAAAAAAI/AAAAAAAAAyQ/p703OLsjyCo/photo.jpg?sz=128", "display_name": "banu reddy", "link": "https://stackoverflow.com/users/4249076/banu-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "accepted_answer_id": 54856120, "answer_count": 1, "score": -1, "last_activity_date": 1551200025, "creation_date": 1551032333, "last_edit_date": 1551040134, "question_id": 54855003, "link": "https://stackoverflow.com/questions/54855003/bundle-is-throwing-an-error-while-installing-dradis-community-edition", "title": "bundle is throwing an error while installing dradis community edition", "body": "<p>I am trying to install dradis community edition for Kali linux through this website:</p>\n\n<p><a href=\"https://dradisframework.com/ce/documentation/install_kali.html\" rel=\"nofollow noreferrer\">https://dradisframework.com/ce/documentation/install_kali.html</a></p>\n\n<p>and </p>\n\n<p><a href=\"https://dradisframework.com/ce/documentation/install_git.html\" rel=\"nofollow noreferrer\">https://dradisframework.com/ce/documentation/install_git.html</a></p>\n\n<p>when I run the command:</p>\n\n<pre><code>./bin/setup\n</code></pre>\n\n<p>I am getting the following error:</p>\n\n<pre><code>== Enabling default add-ons ==\n== Installing dependencies ==\nTraceback (most recent call last):\n    1: from /usr/local/bin/bundle:23:in `&lt;main&gt;'\n/usr/local/bin/bundle:23:in `load': cannot load such file -- /usr/share/rubygems-integration/all/gems/bundler-1.17.3/exe/bundle (LoadError)\nTraceback (most recent call last):\n    1: from /usr/local/bin/bundle:23:in `&lt;main&gt;'\n/usr/local/bin/bundle:23:in `load': cannot load such file -- /usr/share/rubygems-integration/all/gems/bundler-1.17.3/exe/bundle (LoadError)\n\n== Command [\"bundle install\"] failed ==\n</code></pre>\n\n<p>This is happening on all bundle commands like</p>\n\n<pre><code>bundle -v\n\nbundle install\n</code></pre>\n\n<p>What could be causing this? I am new to this.</p>\n\n<p>Update 1:</p>\n\n<p>I tried <code>gem update --system</code> and tried the <code>./bin/setup</code> again. It gives me the following error:</p>\n\n<pre><code>Fetching nokogumbo 2.0.1\nInstalling nokogumbo 2.0.1 with native extensions\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    current directory: /root/dradis-ce/gems/nokogumbo-2.0.1/ext/nokogumbo\n/usr/bin/ruby2.5 -I /usr/local/lib/site_ruby/2.5.0 -r ./siteconf20190224-6660-1caz3w7.rb extconf.rb\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/usr/bin/$(RUBY_BASE_NAME)2.5\n/usr/local/lib/site_ruby/2.5.0/rubygems/dependency.rb:313:in `to_specs': Could not find 'nokogiri' (= 1.8.4) - did find: [nokogiri-1.8.5]\n(Gem::MissingSpecVersionError)\nChecked in 'GEM_PATH=/root/dradis-ce', execute `gem env` for more information\n    from /usr/local/lib/site_ruby/2.5.0/rubygems/dependency.rb:323:in `to_spec'\n    from /usr/local/lib/site_ruby/2.5.0/rubygems/specification.rb:1033:in `find_by_name'\n    from extconf.rb:9:in `&lt;main&gt;'\n\nextconf failed, exit code 1\n\nGem files will remain installed in /root/dradis-ce/gems/nokogumbo-2.0.1 for inspection.\nResults logged to /root/dradis-ce/extensions/x86_64-linux/2.5.0/nokogumbo-2.0.1/gem_make.out\n\nAn error occurred while installing nokogumbo (2.0.1), and Bundler cannot continue.\nMake sure that `gem install nokogumbo -v '2.0.1' --source 'https://rubygems.org/'` succeeds before bundling.\n\nIn Gemfile:\n  sanitize was resolved to 5.0.0, which depends on\n    nokogumbo\n\n== Command [\"bundle install\"] failed ==\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "stripe-payments", "payola"], "comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1551038685, "post_id": 54853620, "comment_id": 96483492, "body": "<code>stripe.createToken</code> works for me"}, {"owner": {"reputation": 349, "user_id": 10113461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d10ba7f075a993b14e5d70e166a912a?s=128&d=identicon&r=PG&f=1", "display_name": "Cole Phiper", "link": "https://stackoverflow.com/users/10113461/cole-phiper"}, "reply_to_user": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1551039890, "post_id": 54853620, "comment_id": 96483874, "body": "I got it working. I had to add the <b>&lt;%= yield(:head) %&gt;</b> to my application.html.erb, so that it can read the stripe js throughout the application. I must have taken it out by mistake while tinkering with stuff. -sigh-"}], "owner": {"reputation": 349, "user_id": 10113461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d10ba7f075a993b14e5d70e166a912a?s=128&d=identicon&r=PG&f=1", "display_name": "Cole Phiper", "link": "https://stackoverflow.com/users/10113461/cole-phiper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551039998, "creation_date": 1551023362, "last_edit_date": 1551039998, "question_id": 54853620, "link": "https://stackoverflow.com/questions/54853620/why-are-stripetokens-no-longer-being-generated-for-my-registration-form", "title": "Why are stripeTokens no longer being generated for my registration form?", "body": "<p>I migrated most of Payola to Rails 5.2, and I was able to create subscriptions for users without issue up until this point. I'm puzzled at why my form is unable to generate stripeTokens and store them with the form. I receive the error <strong>stripeToken required for new customer with paid subscription</strong>. How can I fix my registration form to properly capture the stripeToken before committing the active job? I'm using the 2017 API.</p>\n\n<p><strong>UPDATE</strong>: referencing subscription_form_onestep.js. Stripe no longer allows you to use <strong>Stripe.card.createToken</strong>. I'm currently trying to see if using <strong>Stripe.createToken</strong> will work without issue. </p>\n\n<p><strong>UPDATE 2</strong>: the form is still not passing the stripeToken when the submission process begins.</p>\n\n<p><strong>UPDATE 3</strong>: It works after changing Stripe.card.createToken to <strong>Stripe.createToken</strong> and adding <strong>&lt;%= yield(:head) %></strong> to application.html.</p>\n\n<p><strong>registration/new.html.erb</strong></p>\n\n<pre><code>{\"guid\":\"74l524\",\"status\":\"pending\",\"error\":null}\n</code></pre>\n\n<p><strong>Server Log Error</strong></p>\n\n<pre><code> [ActiveJob] [Payola::Worker::ActiveJob] [2597f80c-eb4c-4d51-a009-07e35668b07c]   Plan Load (5.0ms)  SELECT  \"plans\".* FROM \"plans\" WHERE \"plans\".\"id\" = $1 LIMIT $2  [[\"id\", 4], [\"LIMIT\", 1]]\n [ActiveJob] [Payola::Worker::ActiveJob] [2597f80c-eb4c-4d51-a009-07e35668b07c]   Payola::Subscription Exists (1.0ms)  SELECT  1 AS one FROM \"payola_subscriptions\" WHERE \"payola_subscriptions\".\"guid\" = $1 AND \"payola_subscriptions\".\"id\" != $2 LIMIT $3  [[\"guid\", \"gjfsnd\"], [\"id\", 49], \n [\"LIMIT\", 1]]\n [ActiveJob] [Payola::Worker::ActiveJob] [2597f80c-eb4c-4d51-a009-07e35668b07c]   Payola::Subscription Update (1.0ms)  UPDATE \"payola_subscriptions\" SET \"error\" = $1, \"updated_at\" = $2 WHERE \"payola_subscriptions\".\"id\" = $3  [[\"error\", \"stripeToken required for new customer with paid subscription\"], [\"updated_at\", \"2019-02-24 15:10:20.714048\"], \n  [\"id\", 49]]\n [ActiveJob] [Payola::Worker::ActiveJob] [2597f80c-eb4c-4d51-a009-07e35668b07c]   PaperTrail::Version Create (1.0ms)  INSERT INTO \"versions\" (\"item_type\", \"item_id\", \"event\", \"object\", \"created_at\") \n</code></pre>\n\n<p><strong>subscription_form_onestep.js</strong></p>\n\n<pre><code>var PayolaOnestepSubscriptionForm = {\ninitialize: function () {\n    $(document).off('submit.payola-onestep-subscription-form').on(\n        'submit.payola-onestep-subscription-form', '.payola-onestep-subscription-form',\n        function () {\n            return PayolaOnestepSubscriptionForm.handleSubmit($(this));\n        }\n    );\n},\n\nhandleSubmit: function (form) {\n    if (!PayolaOnestepSubscriptionForm.validateForm(form)) {\n        return false;\n    }\n    $(form).find(\"input[type=submit]\").prop(\"disabled\", true);\n    $('.payola-spinner').css('visibility', 'visible');\n    Stripe.card.createToken(form, function (status, response) {\n\n        PayolaOnestepSubscriptionForm.stripeResponseHandler(form, status, response);\n    });\n    return false;\n},\n\nvalidateForm: function (form) {\n    var cardNumber = $(\"input[data-stripe='number']\").val();\n    if (!Stripe.card.validateCardNumber(cardNumber)) {\n        PayolaOnestepSubscriptionForm.showError(form, 'The card number is not a valid credit card number.');\n\n        return false;\n    }\n    if ($(\"[data-stripe='exp']\").length) {\n        var valid = !Stripe.card.validateExpiry($(\"[data-stripe='exp']\").val());\n    } else {\n        var expMonth = $(\"[data-stripe='exp_month']\").val();\n        var expYear = $(\"[data-stripe='exp_year']\").val();\n        var valid = !Stripe.card.validateExpiry(expMonth, expYear);\n    }\n    if (valid) {\n        PayolaOnestepSubscriptionForm.showError(form, \"Your card's expiration month/year is invalid.\");\n        return false\n    }\n\n    var cvc = $(\"input[data-stripe='cvc']\").val();\n    if (!Stripe.card.validateCVC(cvc)) {\n        PayolaOnestepSubscriptionForm.showError(form, \"Your card's security code is invalid.\");\n        return false;\n    }\n\n    return true;\n},\n\nstripeResponseHandler: function (form, status, response) {\n    if (response.error) {\n        PayolaOnestepSubscriptionForm.showError(form, response.error.message);\n    } else {\n        var email = form.find(\"[data-payola='email']\").val();\n        var coupon = form.find(\"[data-payola='coupon']\").val();\n        var quantity = form.find(\"[data-payola='quantity']\").val();\n\n        var base_path = form.data('payola-base-path');\n        var plan_type = form.data('payola-plan-type');\n        var plan_id = form.data('payola-plan-id');\n\n        var action = $(form).attr('action');\n\n        form.append($('&lt;input type=\"hidden\" name=\"plan_type\"&gt;').val(plan_type));\n        form.append($('&lt;input type=\"hidden\" name=\"plan_id\"&gt;').val(plan_id));\n        console.log(response.id + \"stripeToken Value DEBUG\");\n        form.append($('&lt;input type=\"hidden\" name=\"stripeToken\"&gt;').val(response.id));\n        form.append($('&lt;input type=\"hidden\" name=\"stripeEmail\"&gt;').val(email));\n        form.append($('&lt;input type=\"hidden\" name=\"coupon\"&gt;').val(coupon));\n        form.append($('&lt;input type=\"hidden\" name=\"quantity\"&gt;').val(quantity));\n        form.append(PayolaOnestepSubscriptionForm.authenticityTokenInput());\n        $.ajax({\n            type: \"POST\",\n            url: action,\n            data: form.serialize(),\n            success: function (data) {\n                PayolaOnestepSubscriptionForm.poll(form, 60, data.guid, base_path);\n            },\n            error: function (data) {\n                PayolaOnestepSubscriptionForm.showError(form, jQuery.parseJSON(data.responseText).error);\n            }\n        });\n\n    }\n},\n\npoll: function (form, num_retries_left, guid, base_path) {\n    if (num_retries_left === 0) {\n        PayolaOnestepSubscriptionForm.showError(form, \"This seems to be taking too long. Please contact support and give them transaction ID: \" + guid);\n    }\n    var handler = function (data) {\n        if (data.status === \"active\") {\n            window.location = base_path + '/confirm_subscription/' + guid;\n        } else {\n            setTimeout(function () {\n                PayolaOnestepSubscriptionForm.poll(form, num_retries_left - 1, guid, base_path);\n            }, 500);\n        }\n    };\n    var errorHandler = function (jqXHR) {\n        PayolaOnestepSubscriptionForm.showError(form, jQuery.parseJSON(jqXHR.responseText).error);\n    };\n\n    if (typeof guid != 'undefined') {\n        $.ajax({\n            type: 'GET',\n            dataType: 'json',\n            url: base_path + '/subscription_status/' + guid,\n            success: handler,\n            error: errorHandler\n        });\n    }\n},\n\nshowError: function (form, message) {\n\n    $('.payola-spinner').css(\"visibility\", \"hidden\");\n    $(form).find(\"input[type=submit]\").prop('disabled', false).trigger('error', message);\n\n    var error_selector = form.data('payola-error-selector');\n    if (error_selector) {\n        $(error_selector).text(message);\n        $(error_selector).show();\n    } else {\n        form.find('.payola-payment-error').text(message);\n        form.find('.payola-payment-error').show();\n    }\n},\n\nauthenticityTokenInput: function () {\n    return $('&lt;input type=\"hidden\" name=\"authenticity_token\"&gt;&lt;/input&gt;').val($('meta[name=\"csrf-token\"]').attr(\"content\"));\n }\n};\n\nPayolaOnestepSubscriptionForm.initialize();\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>  scope module: 'payola' do\n    post 'payola/buy/:product_class/:permalink' =&gt; 'transactions#create', as: :buy\n    get 'payola/confirm/:guid' =&gt; 'transactions#show', as: :confirm\n    get 'payola/status/:guid' =&gt; 'transactions#status', as: :status\n    post 'payola/subscribe/:plan_class/:plan_id' =&gt; 'subscriptions#create', as: :subscribe\n    get 'payola/confirm_subscription/:guid' =&gt; 'subscriptions#show', as: :confirm_subscription\n    get 'payola/subscription_status/:guid' =&gt; 'subscriptions#status', as: :subscription_status\n    delete 'payola/cancel_subscription/:guid' =&gt; 'subscriptions#destroy', as: :cancel_subscription\n    post 'payola/change_plan/:guid' =&gt; 'subscriptions#change_plan', as: :change_subscription_plan\n    post 'payola/change_quantity/:guid' =&gt; 'subscriptions#change_quantity', as: :change_subscription_quantity\n    post 'payola/update_card/:guid' =&gt; 'subscriptions#update_card', as: :update_card\n    post 'payola/update_customer/:id' =&gt; 'customers#update', as: :update_customer\n    post 'payola/create_card/:customer_id' =&gt; 'cards#create', as: :create_card\n    delete 'payola/destroy_card/:id/:customer_id' =&gt; 'cards#destroy', as: :destroy_card\n    mount StripeEvent::Engine =&gt; '/events'\n  end\n</code></pre>\n\n<p><strong>new.html.erb</strong></p>\n\n<pre><code>&lt;% content_for :head do %&gt;\n  &lt;%= render 'payola/transactions/stripe_header' %&gt;\n&lt;% end %&gt;\n\n&lt;div class=\"container\"&gt;\n  &lt;div class=\"form-padding-top\"&gt;\n    &lt;%= form_for(resource, :as =&gt; resource_name, :url =&gt; registration_path(resource_name), :html =&gt; {\n    :class =&gt; 'payola-onestep-subscription-form',\n    'data-payola-base-path' =&gt; payola_path,\n    'data-payola-plan-type' =&gt; resource.plan.plan_class,\n    'data-payola-plan-id' =&gt; resource.plan.id}) do |f| %&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;div class=\"col-md-8\"&gt;\n      &lt;%= devise_error_messages! %&gt;\n      &lt;span id=\"error_explanation\" class=\"payola-payment-error\"&gt;&lt;/span&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;fieldset class=\"form-group\"&gt;\n    &lt;legend&gt;&lt;strong&gt;Sign up&lt;/legend&gt;\n  &lt;/fieldset&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;div class=\"col-md-4\"&gt;\n      &lt;label&gt;Select a plan for your company&lt;/label&gt;\n      &lt;%= f.collection_select(:plan_id, Plan.user_plan, :id, :name, {}, {:class =&gt; 'form-control'}) %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;label for=\"fg-1\" class=\"col-md-5 col-form-label\"&gt;Email&lt;/label&gt;\n    &lt;div class=\"col-md-5\"&gt;\n      &lt;%= f.email_field :email, label: false, required: true, autofocus: true, placeholder: 'What is your email address?', class: 'form-control' %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;label class=\"col-md-5 col-form-label\"&gt;Username&lt;/label&gt;\n    &lt;div class=\"col-md-5\"&gt;\n      &lt;span class=\"username-icon-styles\"&gt;\n        &lt;span id=\"valid-username\" class=\"fa fa-check-circle\"&gt;&lt;/span&gt;\n        &lt;span id=\"invalid-username\" class=\"fa fa-times-circle\"&gt;&lt;/span&gt;\n      &lt;/span&gt;\n      &lt;%= f.text_field :username, label: false, required: true, placeholder: 'Create a username for your account', class: 'form-control' %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n      &lt;p class=\"status\" style=\"display: block;\"&gt;\n          &lt;span class=\"status_icon\"&gt;&lt;/span&gt;\n          &lt;span class=\"status_message\"&gt;&lt;/span&gt;\n        &lt;/p&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;div class=\"col-md-2\"&gt;\n      &lt;label&gt;CVC&lt;/label&gt;\n      &lt;%= text_field :card_code, nil, name: nil, class: 'form-control', data: {stripe: 'cvc'}, placeholder: '000', maxlength: 3 %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;br/&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;div class=\"col-md-2\"&gt;\n      &lt;label&gt;Card Expiration&lt;/label&gt;\n      &lt;%= select_month nil, {use_two_digit_numbers: true}, {name: nil, data: {stripe: 'exp_month'}, class: 'form-control'} %&gt;\n      &lt;%= select_year nil, {start_year: Date.today.year, end_year: Date.today.year + 10}, {name: nil, data: {stripe: 'exp_year'}, class: 'form-control'} %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;div class=\"col-md-5\"&gt;\n      &lt;label&gt;Password&lt;/label&gt;\n      &lt;%= f.password_field :password, required: true, hint: (\"#{@minimum_password_length} characters minimum, include special characters @!%$&amp; and capital letters\" if @minimum_password_length), class: 'form-control', label: false %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;div class=\"col-md-5\"&gt;\n      &lt;label for=\"password-confirm\"&gt;Password Confirm&lt;/label&gt;\n      &lt;%= f.password_field :password_confirmation, required: true, label: false, class: 'form-control' %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;%= f.submit \"Sign up\", :class =&gt; 'bttn-material-flat bttn-md bttn-primary button', data: {disable_with: false} %&gt;\n  &lt;div class=\"text-center\"&gt;\n    &lt;div class=\"payola-spinner\"&gt;Loading&amp;#8230;&lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>\n</p>\n\n<p><strong>registrations_controller.rb</strong></p>\n\n<pre><code>class Users::RegistrationsController &lt; Devise::RegistrationsController\n  include Payola::StatusBehavior\n  before_action :cancel_subscription, only: [:destroy]\n\n  def new\n    build_resource({})\n    unless params[:plan].nil?\n      @plan = Plan.find_by!(stripe_id: params[:plan])\n      resource.plan = @plan\n    end\n    yield resource if block_given?\n    respond_with resource\n  end\n\n  def create\n    build_resource(sign_up_params)\n    plan = Plan.find_by!(id: params[:user][:plan_id].to_i)\n    resource.role = User.roles[plan.stripe_id]\n    resource.save\n    yield resource if block_given?\n    if resource.persisted?\n      if resource.active_for_authentication?\n    set_flash_message :notice, :signed_up if is_flashing_format?\n    sign_up(resource_name, resource)\n    subscribe\n  else\n    set_flash_message :notice, :\"signed_up_but_#{resource.inactive_message}\" if is_flashing_format?\n    expire_data_after_sign_in!\n    subscribe\n  end\nelse\n  clean_up_passwords resource\n  resource.errors.full_messages.each {|i| flash[i] = i}\n  end\nend\n\n  def user_change_plan\n    plan = Plan.find_by!(id: params[:user][:plan_id].to_i)\n    unless plan == current_user.plan\n      role = User.roles[plan.stripe_id]\n      if current_user.update_attributes!(plan: plan, role: role)\n    subscription = Payola::Subscription.find_by!(owner_id: current_user.id)\n    Payola::ChangeSubscriptionPlan.call(subscription, plan)\n    redirect_to edit_user_registration_path, notice: 'Plan changed.'\n  else\n    flash[:alert] = 'Unable to change plan.'\n    build_resource\n    render :edit\n   end\n  end\n end\n\n  def user_change_credit_card\n    @subscription = Payola::Subscription.find_by!(owner_id: current_user.id)\n    if @subscription.save\n      Payola::UpdateCard.call(@subscription, params[:stripeToken])\n      redirect_to edit_user_registration_path, notice: 'Your Credit Card Was Successfully Updated.'\n    else\n      build_resource\n      redirect_to edit_user_registration_path, notice: \"There was an error, please check for mistakes with your card information\"\n    end\n  end\n\n  def cancel_user_subscription\n    @subscription = Payola::Subscription.find_by!(owner_id: current_user.id, state: 'active')\n    if @subscription.save\n      Payola::CancelSubscription.call(@subscription) if !@subscription.nil?\n      current_user.plan_id = nil\n      current_user.deactivated = true\n      current_user.save\n      redirect_to edit_user_registration_path, notice: \"Your Plan was Successfully Cancelled.\"\n    else\n      build_resource\n      redirect_to edit_user_registration_path, notice: \"Something went wrong, please try again.\"\n    end\n  end\n\n  private\n\n  def after_update_path_for(resource)\n    authenticated_user_root_path\n  end\n\n  def after_sign_up_path_for(resource)\n    u_dashboard_index_path\n  end\n\n  def subscribe\n    params[:plan] = current_user.plan\n    params[:stripeEmail] = current_user.email\n    params[:trial_start] = DateTime.now\n    params[:trial_end] = DateTime.now + 6.days\n    subscription = Payola::CreateSubscription.call(params, current_user)\n    current_user.save\n    render_payola_status(subscription)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 295, "user_id": 3343781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sqNo1.jpg?s=128&g=1", "display_name": "ashusvirus", "link": "https://stackoverflow.com/users/3343781/ashusvirus"}, "edited": false, "score": 0, "creation_date": 1551019252, "post_id": 54852923, "comment_id": 96477694, "body": "post your user model."}, {"owner": {"reputation": 779, "user_id": 833555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99cf1bcf274d03c06d2f218f73cff0d?s=128&d=identicon&r=PG", "display_name": "Gregory Ostermayr", "link": "https://stackoverflow.com/users/833555/gregory-ostermayr"}, "edited": false, "score": 0, "creation_date": 1551019371, "post_id": 54852923, "comment_id": 96477721, "body": "You have <code>courses</code> being accessed via <code>current_user</code>. The only references you&#39;ve created come from <code>college</code>."}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551021184, "post_id": 54852923, "comment_id": 96478200, "body": "When you create <code>Course</code> object it must have at least <code>id</code>. Did you mean <code>college_id</code> ?"}, {"owner": {"reputation": 7, "user_id": 10960356, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ovNhOFkomDY/AAAAAAAAAAI/AAAAAAAAAKw/2UUXSCymABQ/photo.jpg?sz=128", "display_name": "Kavin", "link": "https://stackoverflow.com/users/10960356/kavin"}, "reply_to_user": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551021504, "post_id": 54852923, "comment_id": 96478282, "body": "@zeitnot No, it had a college_id but not an id"}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551021602, "post_id": 54852923, "comment_id": 96478310, "body": "Ok. It seems that <code>current_user</code> is <code>nil</code>. So use <code>College.find(id: session[:user_id])</code> to ensure that if there is a user id."}], "answers": [{"comments": [{"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551020858, "post_id": 54853023, "comment_id": 96478108, "body": "<code>current_user</code> is actually <code>College</code> class."}], "tags": [], "owner": {"reputation": 295, "user_id": 3343781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sqNo1.jpg?s=128&g=1", "display_name": "ashusvirus", "link": "https://stackoverflow.com/users/3343781/ashusvirus"}, "is_accepted": false, "score": 2, "last_activity_date": 1551019501, "creation_date": 1551019501, "answer_id": 54853023, "question_id": 54852923, "link": "https://stackoverflow.com/questions/54852923/undefined-method-courses-for-nilnilclass/54853023#54853023", "title": "Undefined method `courses&#39; for nil:NilClass", "body": "<p>When you are trying to access\n<code>current_user.courses</code>, it looks for courses association in <code>user</code>model.</p>\n\n<p>Your course model has no <code>user</code> association.</p>\n\n<p><strong>Course Model</strong></p>\n\n<pre><code>class Course &lt; ApplicationRecord\n  belongs_to :college\n  belongs_to :user\nend\n</code></pre>\n\n<p><strong>User model</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\n    //fields\n\n    has_many: courses\n\nend\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 10960356, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ovNhOFkomDY/AAAAAAAAAAI/AAAAAAAAAKw/2UUXSCymABQ/photo.jpg?sz=128", "display_name": "Kavin", "link": "https://stackoverflow.com/users/10960356/kavin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1551019862, "creation_date": 1551018802, "last_edit_date": 1551019862, "question_id": 54852923, "link": "https://stackoverflow.com/questions/54852923/undefined-method-courses-for-nilnilclass", "title": "Undefined method `courses&#39; for nil:NilClass", "body": "<p>When I visit the courses/new page on my heroku app, it raises an error saying that the method courses is not defined. Also, when I create a course on the console, it has no id or created_at.</p>\n\n<p>Courses Controller:</p>\n\n<pre><code>class CoursesController &lt; ApplicationController\n  def home\n    @course = current_user.courses.find(params[:id])\n  end\n\n  def new\n    @course = current_user.courses.build\n  end\n\n  def create\n    @course = current_user.courses.build(course_params)\n    if @course.save\n      flash[:success] = \"Course Created\"\n      redirect_to coursehome_path\n    else\n      render 'new'\n    end\n  end\n\n  private\n\n    def course_params\n     params.require(:course).permit(:name)\n    end\nend\n</code></pre>\n\n<p>College Model:</p>\n\n<pre><code>class College &lt; ApplicationRecord\n  has_many :courses, dependent: :destroy\n  has_secure_password\n  def College.digest(string)\n    cost = ActiveModel::SecurePassword.min_cost ? \n    BCrypt::Engine::MIN_COST : BCrypt::Engine.cost\n    BCrypt::Password.create(string, cost: cost)\n  end\nend\n</code></pre>\n\n<p>Course model:</p>\n\n<pre><code>class Course &lt; ApplicationRecord\n  belongs_to :college\nend\n</code></pre>\n\n<p>Migration:</p>\n\n<pre><code>class CreateCourses &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :courses do |t|\n      t.string :name\n      t.references :college, foreign_key: true\n\n      t.timestamps\n    end\n    add_index :courses, [:college_id, :created_at]\n  end\nend\n</code></pre>\n\n<p>Edit:</p>\n\n<p>Actually, I created a controller called collegesessions and added the current_user method in its helper:</p>\n\n<pre><code>module CollegesessionsHelper\n  def log_in(college)\n    session[:user_id] = college.id\n  end\n\n  def current_user\n    if session[:user_id]\n      @current_user ||= College.find_by(id: session[:user_id])\n    end\n  end\n\n  def logged_in?\n    !current_user.nil?\n  end\n\n def log_out\n    session.delete(:user_id)\n    @current_user = nil\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 1, "creation_date": 1551009703, "post_id": 54851615, "comment_id": 96475244, "body": "Can you post the full stack of the error?  It should give you some indication of which line is generating the error."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1551016286, "post_id": 54851615, "comment_id": 96476863, "body": "In Rails 4 you can pass params as positional arguments to the request methods for example (<code>post url, { foo: &quot;bar&quot; }, { notice: &#39;Hello world&#39; }, { user_id: 1 }</code>). This is depreciated in Rails 5 which requires keyword arguments  <code>post url, params: { foo: &quot;bar&quot; }, flash: { notice: &#39;Hello world&#39; }, session: { user_id: 1 }</code>. <a href=\"https://blog.bigbinary.com/2016/04/19/changes-to-test-controllers-in-rails-5.html\" rel=\"nofollow noreferrer\">blog.bigbinary.com/2016/04/19/&hellip;</a>"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 1, "creation_date": 1551070574, "post_id": 54851615, "comment_id": 96490232, "body": "Could you add corresponding controller code?"}], "owner": {"reputation": 63, "user_id": 9694191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5416dd158f67ab451ea345ebc3637e40?s=128&d=identicon&r=PG&f=1", "display_name": "waynard", "link": "https://stackoverflow.com/users/9694191/waynard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551037131, "creation_date": 1551009200, "question_id": 54851615, "link": "https://stackoverflow.com/questions/54851615/ruby-on-rails-rspec-request-spec-cannot-pass-params", "title": "Ruby on Rails RSpec Request Spec: Cannot pass params", "body": "<p>Having a bit of difficulty getting my auth spec passing for an api I'm building in Rails.</p>\n\n<p>My spec looks like this:</p>\n\n<pre><code>RSpec.describe 'POST /login', type: :request do\n  let(:user) { create(:user) }\n  let(:url) { '/login' }\n  let(:params) do\n    {\n      user: {\n        username: user.username,\n        email: user.email,\n        password: user.password\n      }\n    }\n  end\n\n  context 'when params are correct' do\n    before do\n      post url, params: params\n    end\n\n    it 'returns 200' do\n      expect(response).to have_http_status(200)\n    end\n...\n</code></pre>\n\n<p>However when I try to run this, it gives me the following error: <code>TypeError: no implicit conversion of nil into String</code></p>\n\n<p>When I use pry to go in and debug it, the <code>params</code> variable resolves to the correct hash: <code>{:user=&gt;{:username=&gt;\"MyString\", :email=&gt;\"mystring\", :password=&gt;\"fooBar\"}}</code> and the url is correct as well: <code>\"/login\"</code></p>\n\n<p>It also fails to work when using the hash itself instead of the variable like so: <code>post url, params: {:user=&gt;{:username=&gt;\"MyString\", :email=&gt;\"mystring\", :password=&gt;\"fooBar\"}}</code></p>\n\n<p>However what's weird is that I can pass something like <code>{:user=&gt;'hello'}</code> and it will run, albeit also returning a 401 error. What am I doing wrong here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "facebook", "facebook-graph-api", "omniauth-facebook"], "answers": [{"tags": [], "owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "is_accepted": true, "score": 1, "last_activity_date": 1552893056, "last_edit_date": 1552893056, "creation_date": 1551012219, "answer_id": 54851989, "question_id": 54851586, "link": "https://stackoverflow.com/questions/54851586/allow-users-of-my-web-app-to-post-to-their-personal-facebook-page/54851989#54851989", "title": "Allow users of my web app to post to their personal facebook page", "body": "<p>According to Facebook documentation <a href=\"https://developers.facebook.com/docs/graph-api/reference/v3.2/user/feed\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://developers.facebook.com/docs/graph-api/using-graph-api/#publishing\" rel=\"nofollow noreferrer\">here</a>, publishing a post to user's wall on behalf of the subject user is not allowed. Instead of this, they encourage the sharing ability. </p>\n\n<p>I hope this is helpful. </p>\n"}], "owner": {"reputation": 754, "user_id": 2145312, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/39065de84d20dbbb9ee1c3b484957595?s=128&d=identicon&r=PG", "display_name": "user2145312", "link": "https://stackoverflow.com/users/2145312/user2145312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 54851989, "answer_count": 1, "score": -4, "last_activity_date": 1552893056, "creation_date": 1551009010, "question_id": 54851586, "link": "https://stackoverflow.com/questions/54851586/allow-users-of-my-web-app-to-post-to-their-personal-facebook-page", "title": "Allow users of my web app to post to their personal facebook page", "body": "<p>I have read a lot about allowing users to log into my rails app via facebook omniauth, though I would like users, having loggeed in, to be able to post a to their own personal wall by simply clicking a button in my app. Is this possible? I'm not very new to rails but have never integrated facebook functionality and am very new to working with omniauth. I'm not looking for someone to spell out the specifics...just point me in the right direction! Thanks</p>\n"}, {"tags": ["ruby", "download", "rubygems"], "comments": [{"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 1, "creation_date": 1551009189, "post_id": 54851559, "comment_id": 96475138, "body": "And what&#39;s your question?"}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551012317, "post_id": 54851559, "comment_id": 96475864, "body": "What do you want to do?"}, {"owner": {"reputation": 3, "user_id": 10947615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3475d4f4c99ffaeaf5e2a411fae2c801?s=128&d=identicon&r=PG&f=1", "display_name": "1131", "link": "https://stackoverflow.com/users/10947615/1131"}, "edited": false, "score": 0, "creation_date": 1551090492, "post_id": 54851559, "comment_id": 96498709, "body": "Oh forgot to add part. Well i want to download images"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10947615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3475d4f4c99ffaeaf5e2a411fae2c801?s=128&d=identicon&r=PG&f=1", "display_name": "1131", "link": "https://stackoverflow.com/users/10947615/1131"}, "edited": false, "score": 0, "creation_date": 1551684803, "post_id": 54866355, "comment_id": 96715344, "body": "Thanks that works. but now the images are just saying this file format is not supported"}], "tags": [], "owner": {"reputation": 74, "user_id": 7790064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oO2Rk.jpg?s=128&g=1", "display_name": "Shaik", "link": "https://stackoverflow.com/users/7790064/shaik"}, "is_accepted": true, "score": 0, "last_activity_date": 1551098137, "creation_date": 1551098137, "answer_id": 54866355, "question_id": 54851559, "link": "https://stackoverflow.com/questions/54851559/trying-to-download-images-using-gem-image-dowloader/54866355#54866355", "title": "Trying to download images using gem image_dowloader", "body": "<p>ImageDownloader::Process.new method second argument should be your local machine target path:</p>\n\n<p>Your code Before:</p>\n\n<pre><code>require 'rubygems'\nrequire 'image_downloader'\n\ndownloader = ImageDownloader::Process.new('www.test.com','img_dir/')\ndownloader.parse(:any_looks_like_image =&gt; true)\ndownloader.download()\n</code></pre>\n\n<p>After:</p>\n\n<pre><code>require 'rubygems'\nrequire 'image_downloader'\nrequire 'open-uri'\n\ndownloader = ImageDownloader::Process.new('&lt;page url&gt;','&lt;your local directory complete path(target to place all images)&gt;')\ndownloader.parse(:any_looks_like_image =&gt; true)\ndownloader.download()\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10947615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3475d4f4c99ffaeaf5e2a411fae2c801?s=128&d=identicon&r=PG&f=1", "display_name": "1131", "link": "https://stackoverflow.com/users/10947615/1131"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 54866355, "answer_count": 1, "score": -1, "last_activity_date": 1551098137, "creation_date": 1551008862, "question_id": 54851559, "link": "https://stackoverflow.com/questions/54851559/trying-to-download-images-using-gem-image-dowloader", "title": "Trying to download images using gem image_dowloader", "body": "<p>This is what i have so far.\nIts using the gem image_downloader</p>\n\n<pre><code>require 'rubygems'\nrequire 'image_downloader'\n\ndownloader = ImageDownloader::Process.new('www.test.com','img_dir/')\ndownloader.parse(:any_looks_like_image =&gt; true)\ndownloader.download()\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "mariadb"], "comments": [{"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551012484, "post_id": 54851363, "comment_id": 96475905, "body": "If MariaDB is installed on Windows there should not be any problem?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1551017795, "post_id": 54851363, "comment_id": 96477234, "body": "I would ask myself if you are going to be deploying your app to windows in production. In most cases the answer is no. So it makes a a lot more sense to develop on some sort of virtual machine running linux which will also save you a lot of pain as windows support is not considered a priority in the Ruby world and all the learning resources are written for *nix."}, {"owner": {"reputation": 779, "user_id": 833555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99cf1bcf274d03c06d2f218f73cff0d?s=128&d=identicon&r=PG", "display_name": "Gregory Ostermayr", "link": "https://stackoverflow.com/users/833555/gregory-ostermayr"}, "edited": false, "score": 0, "creation_date": 1551018573, "post_id": 54851363, "comment_id": 96477465, "body": "assuming you&#39;ve managed to install and use rails with mysql - you should be able to update your <code>database.yml</code> file to the new MariaDB instance. <a href=\"https://edgeguides.rubyonrails.org/configuring.html#configuring-a-mysql-or-mariadb-database\" rel=\"nofollow noreferrer\">edgeguides.rubyonrails.org/&hellip;</a>"}], "owner": {"reputation": 1, "user_id": 11109006, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8E9QpEgZ1-8/AAAAAAAAAAI/AAAAAAAAEqE/QiSXUjTkUgA/photo.jpg?sz=128", "display_name": "Luea", "link": "https://stackoverflow.com/users/11109006/luea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 180, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551007302, "creation_date": 1551007302, "question_id": 54851363, "link": "https://stackoverflow.com/questions/54851363/how-do-i-use-mariadb-together-with-rails-on-windows-10", "title": "How do I use MariaDB together with Rails on Windows 10?", "body": "<p>I want to make a Rails app on Windows and decided to use MariaDB after finding out that Rails supports it since a few years ago. But all the tutorials are about using them together on Linux. Is it possible to do the same thing on Windows? I already have MySQL installed and started an app using it but I wnat to change it to MariaDB. What should I do?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "whenever"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1550995447, "post_id": 54849866, "comment_id": 96472053, "body": "What is <code>ShortMessage</code>? Any validations on the model? How does your log file look like?"}, {"owner": {"reputation": 1692, "user_id": 9288619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6IK38.jpg?s=128&g=1", "display_name": "code_aks", "link": "https://stackoverflow.com/users/9288619/code-aks"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1550995713, "post_id": 54849866, "comment_id": 96472107, "body": "No it is only table name i.e. short_messages."}, {"owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1550997454, "post_id": 54849866, "comment_id": 96472460, "body": "Check if it&#39;s running by <code>crontab -l</code>"}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "edited": false, "score": 0, "creation_date": 1551000168, "post_id": 54849866, "comment_id": 96473048, "body": "Please attach <code>crontab -l</code> and <code>which ruby</code> output"}, {"owner": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551008350, "post_id": 54849866, "comment_id": 96474954, "body": "What is runner name for <code>Message</code> class? Is it <code>message.rb</code> ?"}, {"owner": {"reputation": 1692, "user_id": 9288619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6IK38.jpg?s=128&g=1", "display_name": "code_aks", "link": "https://stackoverflow.com/users/9288619/code-aks"}, "reply_to_user": {"reputation": 1208, "user_id": 3406915, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/478116e7ad1fe58e2710db4192819b32?s=128&d=identicon&r=PG&f=1", "display_name": "zeitnot", "link": "https://stackoverflow.com/users/3406915/zeitnot"}, "edited": false, "score": 0, "creation_date": 1551027595, "post_id": 54849866, "comment_id": 96480069, "body": "@zeitnot, Yes it is message.rb file"}, {"owner": {"reputation": 1692, "user_id": 9288619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6IK38.jpg?s=128&g=1", "display_name": "code_aks", "link": "https://stackoverflow.com/users/9288619/code-aks"}, "reply_to_user": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1551027804, "post_id": 54849866, "comment_id": 96480117, "body": "@dan-klasson, this is what I get when I run &quot;tail -f /var/log/syslog | grep CRON&quot; cammand :-     Feb 24 22:31:01 Sonu-pc CRON[23393]: (sonu) CMD (/bin/bash -l -c &#39;cd      /home/sonu/Desktop/voice_rules &amp;&amp; bundle exec bin/rails runner -e      development &#39;\\&#39;&#39;Message.create_message&#39;\\&#39;&#39;&#39;)"}, {"owner": {"reputation": 1692, "user_id": 9288619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6IK38.jpg?s=128&g=1", "display_name": "code_aks", "link": "https://stackoverflow.com/users/9288619/code-aks"}, "edited": false, "score": 0, "creation_date": 1551027853, "post_id": 54849866, "comment_id": 96480126, "body": "And also when I run this cammand from terminal then it executed perfectly(means short_message is created in DB) :- /bin/bash -l -c &#39;cd /home/sonu/Desktop/voice_rules &amp;&amp; bundle exec bin/rails runner -e development &#39;\\&#39;&#39;Message.create_message&#39;\\&#39;&#39;&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": false, "score": 1, "last_activity_date": 1551037683, "creation_date": 1551037683, "answer_id": 54855843, "question_id": 54849866, "link": "https://stackoverflow.com/questions/54849866/cron-job-not-working-in-whenever-gem-in-development/54855843#54855843", "title": "Cron job not working in Whenever gem in development", "body": "<p>Cron does not initialise full session, if you're using ruby version manager like rvm - it may not get loaded, for using in cron you need ruby wrappers or load rvm, for more details look into <a href=\"https://rvm.io/deployment/cron\" rel=\"nofollow noreferrer\">rvm documentation about cron</a>, command for cron will look like</p>\n\n<pre><code>cd (working-dir) &amp;&amp; /usr/local/rvm/wrappers/default/bundle bin/rails runner -e development '\\''Message.create_message'\\'''\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11861867"}, "is_accepted": false, "score": 0, "last_activity_date": 1565247473, "creation_date": 1565247473, "answer_id": 57406847, "question_id": 54849866, "link": "https://stackoverflow.com/questions/54849866/cron-job-not-working-in-whenever-gem-in-development/57406847#57406847", "title": "Cron job not working in Whenever gem in development", "body": "<p>Clear existing cron jobs.</p>\n\n<pre><code>crontab -r\n</code></pre>\n\n<p>Update cronjob with the environment.</p>\n\n<pre><code>whenever --update-crontab --set environment='development'\n</code></pre>\n"}], "owner": {"reputation": 1692, "user_id": 9288619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6IK38.jpg?s=128&g=1", "display_name": "code_aks", "link": "https://stackoverflow.com/users/9288619/code-aks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1565247473, "creation_date": 1550994628, "question_id": 54849866, "link": "https://stackoverflow.com/questions/54849866/cron-job-not-working-in-whenever-gem-in-development", "title": "Cron job not working in Whenever gem in development", "body": "<p>I have written this method in my model :-    </p>\n\n<pre><code>class Message &lt; ActiveRecord::Base\n  def self.create_message\n    ShortMessage.create(message: \"cron job\")\n    puts \"created\"\n  end\nend\n</code></pre>\n\n<p>And then I updated schedule.rb file :-</p>\n\n<pre><code>every 1.minute do\n  runner \"Message.create_message\", :environment =&gt; \"development\"\nend\n</code></pre>\n\n<p>And finally executed all this cammands :-</p>\n\n<pre><code>whenever --update-crontab\ntail -f /var/log/syslog | grep CRON\n</code></pre>\n\n<p>But nothing is created in my database, when checked from console <strong>ShortMessage.last</strong></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 3352, "user_id": 5152338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QbPE.png?s=128&g=1", "display_name": "jdno", "link": "https://stackoverflow.com/users/5152338/jdno"}, "edited": false, "score": 0, "creation_date": 1550994328, "post_id": 54849779, "comment_id": 96471818, "body": "Just a wild guess, but might this be caused by the inaccuracies of floats? In any case, what is your question? So far, you\u2019ve only described the issue, but not asked an actual question."}, {"owner": {"reputation": 10326, "user_id": 74980, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/e1Yx5.jpg?s=128&g=1", "display_name": "GeekJock", "link": "https://stackoverflow.com/users/74980/geekjock"}, "reply_to_user": {"reputation": 3352, "user_id": 5152338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QbPE.png?s=128&g=1", "display_name": "jdno", "link": "https://stackoverflow.com/users/5152338/jdno"}, "edited": false, "score": 0, "creation_date": 1550994454, "post_id": 54849779, "comment_id": 96471856, "body": "@jdno I just updated my question. It is a Ruby issue, not an ActiveRecord issue."}, {"owner": {"reputation": 11148, "user_id": 342859, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6484adc258d87ac6b62dbd93898df65d?s=128&d=identicon&r=PG", "display_name": "Yossi", "link": "https://stackoverflow.com/users/342859/yossi"}, "edited": false, "score": 0, "creation_date": 1550994544, "post_id": 54849779, "comment_id": 96471871, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/588004/is-floating-point-math-broken\">Is floating point math broken?</a>"}, {"owner": {"reputation": 10326, "user_id": 74980, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/e1Yx5.jpg?s=128&g=1", "display_name": "GeekJock", "link": "https://stackoverflow.com/users/74980/geekjock"}, "reply_to_user": {"reputation": 11148, "user_id": 342859, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6484adc258d87ac6b62dbd93898df65d?s=128&d=identicon&r=PG", "display_name": "Yossi", "link": "https://stackoverflow.com/users/342859/yossi"}, "edited": false, "score": 0, "creation_date": 1550994647, "post_id": 54849779, "comment_id": 96471896, "body": "@Yossi I think you&#39;re right. Looking at that now"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550995148, "post_id": 54849779, "comment_id": 96471996, "body": "Note: <code>ts = 1.003; t  = Time.at(ts); t.strftime &#39;%6N&#39;  #=&gt; &quot;002999&quot;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 11148, "user_id": 342859, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6484adc258d87ac6b62dbd93898df65d?s=128&d=identicon&r=PG", "display_name": "Yossi", "link": "https://stackoverflow.com/users/342859/yossi"}, "is_accepted": true, "score": 4, "last_activity_date": 1550995211, "last_edit_date": 1550995211, "creation_date": 1550994909, "answer_id": 54849896, "question_id": 54849779, "link": "https://stackoverflow.com/questions/54849779/ruby-subtracting-one-microsecond-when-converting-to-string/54849896#54849896", "title": "Ruby subtracting one microsecond when converting to string", "body": "<p>You are observing floating point math inaccuracy. If you need higher precision, you should use <a href=\"http://ruby-doc.org/stdlib-2.5.0/libdoc/bigdecimal/rdoc/BigDecimal.html\" rel=\"nofollow noreferrer\"><code>BigDecimal</code></a>.</p>\n\n<pre><code>require 'bigdecimal'\n\nts = BigDecimal('1550989255.000300')\nt  = Time.at(ts)\nt.strftime '%6N'\n\n=&gt; \"000300\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10326, "user_id": 74980, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/e1Yx5.jpg?s=128&g=1", "display_name": "GeekJock", "link": "https://stackoverflow.com/users/74980/geekjock"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1550995420, "post_id": 54849903, "comment_id": 96472051, "body": "I am removing it \u2013 I think him and I typed it at the same time, I hadn&#39;t seen his when I typed mine."}, {"owner": {"reputation": 11148, "user_id": 342859, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6484adc258d87ac6b62dbd93898df65d?s=128&d=identicon&r=PG", "display_name": "Yossi", "link": "https://stackoverflow.com/users/342859/yossi"}, "edited": false, "score": 0, "creation_date": 1550995607, "post_id": 54849903, "comment_id": 96472086, "body": "We did type it simultaniously"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551036001, "post_id": 54849903, "comment_id": 96482684, "body": "I prefer this to using <code>BigDecimal</code> for three reasons: it employs the appropriate version of <code>Time::at</code> directly (no trickery), avoids the need to load the <code>BigDecimal</code> libary and the use of a <code>BigDecimal</code> object as the argument of <code>Time::at</code> is undocumented."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551036533, "post_id": 54849903, "comment_id": 96482824, "body": "To reduce repetition and avoid the creation of  the variable <code>arr</code> you may wish to write <code>Time.at(*ts.split(&#39;.&#39;).map(&amp;:to_i)) #=&gt; 2019-02-24 06:20:55 +0000</code>."}], "tags": [], "owner": {"reputation": 10326, "user_id": 74980, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/e1Yx5.jpg?s=128&g=1", "display_name": "GeekJock", "link": "https://stackoverflow.com/users/74980/geekjock"}, "is_accepted": false, "score": 1, "last_activity_date": 1550995429, "last_edit_date": 1550995429, "creation_date": 1550994998, "answer_id": 54849903, "question_id": 54849779, "link": "https://stackoverflow.com/questions/54849779/ruby-subtracting-one-microsecond-when-converting-to-string/54849903#54849903", "title": "Ruby subtracting one microsecond when converting to string", "body": "<p>This works:</p>\n\n<pre><code>ts = \"1550989255.000300\"\narr = ts.split('.')\nt = Time.at(arr[0].to_i, arr[1].to_i)\nt.strftime '%6N'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 2, "last_activity_date": 1551044859, "creation_date": 1551044859, "answer_id": 54856885, "question_id": 54849779, "link": "https://stackoverflow.com/questions/54849779/ruby-subtracting-one-microsecond-when-converting-to-string/54856885#54856885", "title": "Ruby subtracting one microsecond when converting to string", "body": "<p>Rationals are more exact than Floats, and they are used more and more in Ruby.</p>\n\n<pre><code>ts = '1550989255.000300'\nt  = Time.at(ts.to_r)  # to_r: a rational\np t.strftime '%6N'     # =&gt; \"000300\"\n</code></pre>\n"}], "owner": {"reputation": 10326, "user_id": 74980, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/e1Yx5.jpg?s=128&g=1", "display_name": "GeekJock", "link": "https://stackoverflow.com/users/74980/geekjock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 54849896, "answer_count": 3, "score": 1, "last_activity_date": 1551075996, "creation_date": 1550993814, "last_edit_date": 1551075996, "question_id": 54849779, "link": "https://stackoverflow.com/questions/54849779/ruby-subtracting-one-microsecond-when-converting-to-string", "title": "Ruby subtracting one microsecond when converting to string", "body": "<p>I have a string timestamp:</p>\n\n<pre><code>ts = '1550989255.000300'\n</code></pre>\n\n<p>How can I parse <code>ts</code> in a <code>Time</code> or <code>Datetime</code> object as <code>t</code>, and have <code>t.strftime('%6N')</code> print correctly?</p>\n\n<p>I did:</p>\n\n<pre><code>t = Time.at(ts.to_f)\nt.strftime '%6N' #=&gt; \"000299\"\n</code></pre>\n\n<p>Ruby chops off one microsecond when converting a timestamp to a string.</p>\n"}, {"tags": ["ruby", "jekyll"], "owner": {"reputation": 5314, "user_id": 2316763, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83530038e81b3a7574ede59a6a3db454?s=128&d=identicon&r=PG", "display_name": "BHOLT", "link": "https://stackoverflow.com/users/2316763/bholt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1550979113, "creation_date": 1550979113, "question_id": 54848461, "link": "https://stackoverflow.com/questions/54848461/how-to-change-jekyll-filename-format", "title": "How to change Jekyll filename format", "body": "<p>I'm using a collection called <code>now</code> that takes a date format and lists it newest to oldest. I've determined naming my files <code>_now/YYYY-MM-DD-title.md</code> (just like posts) will automatically assign dates to the collection, but I'm <em>required</em> to add a title to it. This means my files look like:</p>\n\n<pre><code>_now/\n  2019-02-28-now.md\n  2019-01-15-now.md\n  2019-01-01-now.md\n  ...\n</code></pre>\n\n<p>I'd prefer if I didn't need to append <code>-now</code> to each file.</p>\n\n<p><strong>Does anyone know how to configure the filename format of a collection?</strong> I'm hoping for something in the configuration options, maybe like:</p>\n\n<pre><code>collections:\n  now:\n    filename: date\n</code></pre>\n\n<p>I'm essentially looking for the opposite of this: <a href=\"https://stackoverflow.com/questions/27099427/jekyll-filename-without-date\">Jekyll Filename Without Date</a></p>\n"}, {"tags": ["ruby", "homebrew", "bundler"], "comments": [{"owner": {"reputation": 355, "user_id": 3504825, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/VLPPK.png?s=128&g=1", "display_name": "Chris Johnson", "link": "https://stackoverflow.com/users/3504825/chris-johnson"}, "edited": false, "score": 0, "creation_date": 1551572554, "post_id": 54848319, "comment_id": 96689474, "body": "Having same issue - few &#39;answers&#39; I&#39;ve found haven&#39;t made sense to me."}, {"owner": {"reputation": 240, "user_id": 4441060, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/62b8305f98b167841fc13065a900c4a5?s=128&d=identicon&r=PG", "display_name": "candh", "link": "https://stackoverflow.com/users/4441060/candh"}, "edited": false, "score": 0, "creation_date": 1551631286, "post_id": 54848319, "comment_id": 96701540, "body": "found a fix yet?"}], "answers": [{"comments": [{"owner": {"reputation": 53647, "user_id": 117471, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/959ccd33301cb3c15953c1a632a36763?s=128&d=identicon&r=PG", "display_name": "Bruno Bronosky", "link": "https://stackoverflow.com/users/117471/bruno-bronosky"}, "edited": false, "score": 0, "creation_date": 1551714010, "post_id": 54978161, "comment_id": 96730958, "body": "I did a fresh Mojave install and the first thing I did was install Brew using the <a href=\"http://brew.sh\" rel=\"nofollow noreferrer\">brew.sh</a> oneliner. I encountered this error even though <code>brew update</code> said &quot;Already up-to-date.&quot; This resolved that."}, {"owner": {"reputation": 2099, "user_id": 1231636, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/bdf8aad6380597105da6f993cbc31911?s=128&d=identicon&r=PG", "display_name": "masterforker", "link": "https://stackoverflow.com/users/1231636/masterforker"}, "edited": false, "score": 0, "creation_date": 1577457449, "post_id": 54978161, "comment_id": 105176717, "body": "If you&#39;re getting a &#39;LoadError&#39; while trying to run commands in Homebrew, this answer fixes that problem too."}], "tags": [], "owner": {"reputation": 153, "user_id": 1528696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb18735adb327b85c1aeddcec5dce3e2?s=128&d=identicon&r=PG", "display_name": "yurinnick", "link": "https://stackoverflow.com/users/1528696/yurinnick"}, "is_accepted": false, "score": 12, "last_activity_date": 1551683189, "creation_date": 1551683189, "answer_id": 54978161, "question_id": 54848319, "link": "https://stackoverflow.com/questions/54848319/homebrew-broken-cannot-load-such-file-vendor-bundle-bundler-setup-loaderr/54978161#54978161", "title": "Homebrew broken - &quot;cannot load such file -- vendor/bundle/bundler/setup (LoadError)&quot;", "body": "<p><code>brew update-reset &amp;&amp; brew update</code> worked for me.</p>\n"}], "owner": {"reputation": 495, "user_id": 5739015, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/52c20bc168f7e539510470b6e1d12fd6?s=128&d=identicon&r=PG&f=1", "display_name": "thevises", "link": "https://stackoverflow.com/users/5739015/thevises"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1144, "favorite_count": 1, "answer_count": 1, "score": 10, "last_activity_date": 1551683189, "creation_date": 1550977454, "question_id": 54848319, "link": "https://stackoverflow.com/questions/54848319/homebrew-broken-cannot-load-such-file-vendor-bundle-bundler-setup-loaderr", "title": "Homebrew broken - &quot;cannot load such file -- vendor/bundle/bundler/setup (LoadError)&quot;", "body": "<p>Every time I try to run a <code>brew</code> command, it gives the following error:</p>\n\n<pre><code>/usr/local/Homebrew/Library/Homebrew/vendor/portable-ruby/2.3.7/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- vendor/bundle/bundler/setup (LoadError)\nfrom /usr/local/Homebrew/Library/Homebrew/vendor/portable-ruby/2.3.7/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\nfrom /usr/local/Homebrew/Library/Homebrew/load_path.rb:7:in `&lt;top (required)&gt;'\nfrom /usr/local/Homebrew/Library/Homebrew/global.rb:8:in `require_relative'\nfrom /usr/local/Homebrew/Library/Homebrew/global.rb:8:in `&lt;top (required)&gt;'\nfrom /usr/local/Homebrew/Library/Homebrew/brew.rb:17:in `require_relative'\nfrom /usr/local/Homebrew/Library/Homebrew/brew.rb:17:in `&lt;main&gt;'\n</code></pre>\n\n<p>I'm not sure if this is an issue with my Ruby/Bundler, since bundler works completely fine in other cases. What might the problem be?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 3, "creation_date": 1550965482, "post_id": 54847312, "comment_id": 96467275, "body": "<code>[*97..122, *49..57].sample</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1550967064, "post_id": 54847515, "comment_id": 96467529, "body": "...or <code>((&#39;97&#39;..&#39;122&#39;).to_a + (&#39;49&#39;..&#39;57&#39;).to_a).sample</code>. This has the disadvantage of creating two temporary arrays that are discarded."}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1550967285, "post_id": 54847515, "comment_id": 96467564, "body": "Yes, but @Michael wanted <code>#chr</code> method, so he need <code>Integer</code>"}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 0, "last_activity_date": 1550967695, "last_edit_date": 1550967695, "creation_date": 1550966993, "answer_id": 54847515, "question_id": 54847312, "link": "https://stackoverflow.com/questions/54847312/ruby-how-to-select-one-random-character-from-two-ranges/54847515#54847515", "title": "Ruby - how to select one random character from two ranges", "body": "<p>You can transform range to array:</p>\n\n<pre><code>((97..122).to_a + (49..57).to_a).sample.chr\n</code></pre>\n\n<p>or</p>\n\n<pre><code>(Array(97..122) + Array(49..57)).sample.chr\n</code></pre>\n\n<p>or</p>\n\n<pre><code>([*97..122] + [*49..57]).sample.chr\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "is_accepted": false, "score": 0, "last_activity_date": 1550967639, "creation_date": 1550967639, "answer_id": 54847572, "question_id": 54847312, "link": "https://stackoverflow.com/questions/54847312/ruby-how-to-select-one-random-character-from-two-ranges/54847572#54847572", "title": "Ruby - how to select one random character from two ranges", "body": "<p>You can do it with conditional sampling:</p>\n\n<pre><code>rand &lt;= 26r / 35 ? rand(97..122).chr : rand(49..57).chr\n</code></pre>\n\n<p>which avoids an array at the cost of drawing an additional random value. 26 is the length of the first range, 35 is the combined lengths of both ranges, so 26 out of 35 times you're drawing values from the first range, the rest of the time from the second.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1551041713, "last_edit_date": 1551041713, "creation_date": 1550968235, "answer_id": 54847621, "question_id": 54847312, "link": "https://stackoverflow.com/questions/54847312/ruby-how-to-select-one-random-character-from-two-ranges/54847621#54847621", "title": "Ruby - how to select one random character from two ranges", "body": "<p>Two ways to avoid the creation of array.</p>\n\n<p><strong>#1</strong></p>\n\n<pre><code>rand(35).yield_self {|rn| rn + (rn &lt; 10 ? 49 : 87)}.chr\n</code></pre>\n\n<p>Note:</p>\n\n<pre><code>35 = 57-48 + 122-96\n</code></pre>\n\n<p>and</p>\n\n<pre><code>10 = 58-48\n</code></pre>\n\n<p><strong>#2 \u00af\\_(\u30c4)_/\u00af</strong></p>\n\n<pre><code>\"0123456789abcdefghijklmnopqrstuvwxyz\"[rand 36]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 4, "last_activity_date": 1550978166, "creation_date": 1550978166, "answer_id": 54848385, "question_id": 54847312, "link": "https://stackoverflow.com/questions/54847312/ruby-how-to-select-one-random-character-from-two-ranges/54848385#54848385", "title": "Ruby - how to select one random character from two ranges", "body": "<p>Numbers 0-9 and all letters, that is how numbers are represented in base 36:</p>\n\n<pre><code>rand(36).to_s(36)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551040577, "post_id": 54849114, "comment_id": 96484079, "body": "If you agree #1 is incorrect consider keeping only #2. To be accurate: <code>[*[rand(97..122)]*26, *[rand(49..57)]*10].sample.chr</code>."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551043166, "post_id": 54849114, "comment_id": 96484815, "body": "@CarySwoveland, removed the incorrect. But I supposed to avoid the creation of an array of 35. <code>(49..57)</code> should contain 9 elements. Do you know if there is a different way to weight the random between two numbers? Maybe in the random class itself?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1551044408, "post_id": 54849114, "comment_id": 96485175, "body": "Ah, yes, <code>9</code>. No, I don&#39;t know about that."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1551042814, "last_edit_date": 1551042814, "creation_date": 1550987073, "answer_id": 54849114, "question_id": 54847312, "link": "https://stackoverflow.com/questions/54847312/ruby-how-to-select-one-random-character-from-two-ranges/54849114#54849114", "title": "Ruby - how to select one random character from two ranges", "body": "<p>Maybe sampling from an array containing two random numbers generated from the ranges?\nFor weighting the probability, since 26/9\u22483:</p>\n\n<pre><code>([rand(97..122)]*3 &lt;&lt; rand(49..57)).sample.chr\n</code></pre>\n"}], "owner": {"reputation": 84135, "user_id": 631619, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b6f3159af5195eddff62a2dd4f9ad969?s=128&d=identicon&r=PG", "display_name": "Michael Durrant", "link": "https://stackoverflow.com/users/631619/michael-durrant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1551042814, "creation_date": 1550964844, "last_edit_date": 1550965364, "question_id": 54847312, "link": "https://stackoverflow.com/questions/54847312/ruby-how-to-select-one-random-character-from-two-ranges", "title": "Ruby - how to select one random character from two ranges", "body": "<p>I have two ranges - 97..122 and 49..57\n(they are the letters and the numbers).\nI can do, for example rand(97..122).chr to get a random letter.</p>\n\n<p>If I want a digit to be either or numbers how can I do that?<br>\nSomething like <code>rand([97..122, 49..57]).chr</code><br>\nBut I am not sure how to add the ranges together - rand takes a range, but  doesn't take that.</p>\n"}, {"tags": ["ruby", "selenium-webdriver", "selenium-chromedriver"], "comments": [{"owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "edited": false, "score": 0, "creation_date": 1550996573, "post_id": 54844981, "comment_id": 96472296, "body": "I might try resetting tcp/ip stack or something &#39;cos I notice I Ican&#39;t ping 127.0.0.1..  nc was binding to 0.0.0.0 I hadn&#39;t tested binding to 127.0.0.1 .. will look into this"}], "answers": [{"tags": [], "owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "is_accepted": false, "score": 0, "last_activity_date": 1551067506, "creation_date": 1551067506, "answer_id": 54859361, "question_id": 54844981, "link": "https://stackoverflow.com/questions/54844981/trying-to-run-selenium-in-ruby-127-0-0-1-port-9514-errnoeaddrnotavail/54859361#54859361", "title": "trying to run selenium in ruby &quot;127.0.0.1&quot; port 9514 (Errno::EADDRNOTAVAIL)", "body": "<p>I mentioned in comment</p>\n\n<blockquote>\n  <p>I might try resetting tcp/ip stack or something 'cos I notice I Ican't\n  ping 127.0.0.1.. nc was binding to 0.0.0.0 I hadn't tested binding to\n  127.0.0.1 .. will look into this</p>\n</blockquote>\n\n<p>Certainly not being able to ping 127.0.0.1 was a great lead.. I tried resetting the tcp/ip stack as mentioned here <a href=\"https://superuser.com/questions/29720/general-failure-when-pinging-to-127-0-0-1\">https://superuser.com/questions/29720/general-failure-when-pinging-to-127-0-0-1</a></p>\n\n<p>Running the command <code>netsh int ip reset</code> then restarting, I found I could then ping 127.0.0.1  and that I no longer got that error.</p>\n"}], "owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551067506, "creation_date": 1550948031, "last_edit_date": 1550973194, "question_id": 54844981, "link": "https://stackoverflow.com/questions/54844981/trying-to-run-selenium-in-ruby-127-0-0-1-port-9514-errnoeaddrnotavail", "title": "trying to run selenium in ruby &quot;127.0.0.1&quot; port 9514 (Errno::EADDRNOTAVAIL)", "body": "<p>This is my file</p>\n\n<blockquote>\n  <p>require 'selenium-webdriver'</p>\n  \n  <p>driver = Selenium::WebDriver.for:chrome</p>\n</blockquote>\n\n<p>I have the chrome selenium driver file in my path <code>c:\\windows\\system32\\chromedriver.exe</code>  I got the file from <code>https://chromedriver.storage.googleapis.com/index.html?path=73.0.3683.20/</code></p>\n\n<p>This kind of thing has worked for me before.</p>\n\n<pre><code>C:\\blah&gt;ruby aaa.rb\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/service.rb:78:in `stop': undefined method `poll_for_exit' for nil:NilClass (NoMethodError)\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/service.rb:67:in `block in start'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/platform.rb:141:in `block in exit_hook'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/socket_lock.rb:61:in `initialize': The requested address is not valid in its context. - bind(2\n) for \"127.0.0.1\" port 9514 (Errno::EADDRNOTAVAIL)\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/socket_lock.rb:61:in `new'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/socket_lock.rb:61:in `can_lock?'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/socket_lock.rb:50:in `lock'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/socket_lock.rb:36:in `locked'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/service.rb:69:in `start'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/chrome/driver.rb:44:in `initialize'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/driver.rb:44:in `new'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/driver.rb:44:in `for'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver.rb:86:in `for'\n        from aaa.rb:4:in `&lt;main&gt;'\n\nC:\\blah&gt;\n</code></pre>\n\n<p>I thought maybe the file is for some reason suddenly requiring to be written to, and that being located in <code>c:\\windows\\system32</code> was limiting it,  so I moved it to c:\\abc and added that to the path, but still same error.</p>\n\n<p>The error mentions port 9514.  I have nothing listening on port 9514</p>\n\n<blockquote>\n  <p>C:\\Users\\user>netstat -aon | grep 9514</p>\n  \n  <p>C:\\Users\\user></p>\n</blockquote>\n\n<p>I'm also able to start a server on port 9514 and make something listen on it (tested with <code>nc -l 9514</code>  and <code>netstat -aon | grep 9514</code>) so there's no problem for a server to listen on port 9514.</p>\n\n<p>doing ruby -d aaa.rb</p>\n\n<pre><code>C:\\rubytest\\garybrown&gt;ruby -d aaa.rb\nException `LoadError' at C:/Ruby24-x64/lib/ruby/2.4.0/rubygems.rb:1355 - cannot load such file -- rubygems/defaults/ruby\naaa.rb:4: warning: assigned but unused variable - driver\nException `LoadError' at C:/Ruby24-x64/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55 - cannot load such file -- selenium-webdriver\nException `LoadError' at C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/ffi-1.9.25-x64-mingw32/lib/ffi/library.rb:259 - LoadError\nException `LoadError' at C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/ffi-1.9.25-x64-mingw32/lib/ffi/library.rb:259 - LoadError\nUsing Ext extension for JSON.\nException `Errno::EADDRNOTAVAIL' at C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/socket_lock.rb:61 - The requested address is not valid in\nits context. - bind(2) for \"127.0.0.1\" port 9514\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/service.rb:136: warning: instance variable @process not initialized\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/service.rb:78: warning: instance variable @process not initialized\nException `NoMethodError' at C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/service.rb:78 - undefined method `poll_for_exit' for nil:NilClass\n\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/service.rb:136: warning: instance variable @process not initialized\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/service.rb:78:in `stop': undefined method `poll_for_exit' for nil:NilClass (NoMethodError)\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/service.rb:67:in `block in start'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/platform.rb:141:in `block in exit_hook'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/socket_lock.rb:61:in `initialize': The requested address is not valid in its context. - bind(2\n) for \"127.0.0.1\" port 9514 (Errno::EADDRNOTAVAIL)\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/socket_lock.rb:61:in `new'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/socket_lock.rb:61:in `can_lock?'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/common/socket_lock.rb:50:in `lock'\n</code></pre>\n\n<p>I tried <code>gem install selenium-webdriver</code> but still same issue</p>\n\n<p>I have Chrome version 72 and according to <a href=\"http://chromedriver.chromium.org/downloads\" rel=\"nofollow noreferrer\">http://chromedriver.chromium.org/downloads</a>  the compatible version is  ChromeDriver 2.46 or ChromeDriver 72.0.3626.69 but both give the same error.</p>\n\n<p>I tried making a Gemfile with</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'selenium-webdriver'\n</code></pre>\n\n<p>and doing <code>bundle install</code></p>\n\n<p>but still <code>ruby aaa.rb</code> gives the same error</p>\n"}]