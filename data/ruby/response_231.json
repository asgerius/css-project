[{"tags": ["ruby-on-rails", "ruby", "rubygems", "rails-engines"], "comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1560369628, "post_id": 56569473, "comment_id": 99718245, "body": "Did you do <code>bundle install</code> and then restart the <code>rails s</code>?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1560370708, "post_id": 56569473, "comment_id": 99718682, "body": "Also, did you <code>require</code> the engine in your <code>sample_app</code>?"}, {"owner": {"reputation": 3, "user_id": 11034751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YryAu.jpg?s=128&g=1", "display_name": "M. Schneider", "link": "https://stackoverflow.com/users/11034751/m-schneider"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1560431391, "post_id": 56569473, "comment_id": 99740277, "body": "@jvillian what syntax do I use to require the engine, and in what file?"}], "answers": [{"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1560436528, "creation_date": 1560436528, "answer_id": 56582896, "question_id": 56569473, "link": "https://stackoverflow.com/questions/56569473/when-mounting-rails-engine-modules-name-is-not-recognized/56582896#56582896", "title": "When mounting Rails Engine, module&#39;s name is not recognized", "body": "<p>Try requiring the gem by putting:</p>\n\n<pre><code>require 'github_webhooks'\n</code></pre>\n\n<p>in <code>config/application.rb</code>. Or, </p>\n\n<pre><code>gem 'github_webhooks', git: 'https://github.com/path_to/my_repo', require: 'github_webhooks'\n</code></pre>\n\n<p>in your <code>Gemfile</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 11034751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YryAu.jpg?s=128&g=1", "display_name": "M. Schneider", "link": "https://stackoverflow.com/users/11034751/m-schneider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560436528, "creation_date": 1560369044, "question_id": 56569473, "link": "https://stackoverflow.com/questions/56569473/when-mounting-rails-engine-modules-name-is-not-recognized", "title": "When mounting Rails Engine, module&#39;s name is not recognized", "body": "<p>I have a Rails Engine github_webhooks with Module GithubWebhooks.</p>\n\n<p>In the Engine, I have:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>module GithubWebhooks\n  class EventController &lt; ApplicationController\n    require 'octokit'\n    client = Octokit::Client.new(GithubWebhooks.access_token)\n\n    def destroy\n       ...code here...\n    end\n\n  end\nend\n\n# pullrequest_controller.rb\n</code></pre>\n\n<p>and in lib/github_webhooks.rb,</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require \"github_webhooks/engine\"\n\nmodule GithubWebhooks\n  mattr_accessor :access_token \n  mattr_accessor :base_url\nend\n\n# github_webhooks.rb\n</code></pre>\n\n<p>There's supposed to be an initializer file under <code>/config</code> in the Rails app, that allows the user to put in their OAuth access token (<code>:access_token</code>) and a base URL to <code>POST</code> to (<code>:base_url</code>).</p>\n\n<p>When I try to mount the Rails Engine to my app (<code>sample_app</code>), I do the following, which I understand to be standard procedure: </p>\n\n<p>I place this line in my gemfile:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>gem 'github_webhooks', git: 'https://github.com/path_to/my_repo'\n\n# Gemfile\n</code></pre>\n\n<p>and then in the routes, I write:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>mount GithubWebhooks::Engine, at: \"/github_webhooks\"\n\n# routes.rb\n</code></pre>\n\n<p>I already figured out how to use environment variables by placing the token in a <code>.yml</code> file and then use gitignore to safely allow users to commit their changes to their own app, without including their token in the commit. I was able to verify that by using ENV[], I could get the token as needed. So that's not the actual problem. <strong>Which brings me to the real problem.</strong></p>\n\n<p>Rails doesn't seem to recognize the name of my engine, because the line in the routes file seems to be causing the issue. It gives the error</p>\n\n<blockquote>\n  <p>/home/mschneider25/.rvm/gems/ruby-2.6.1/gems/bootsnap-1.4.4/lib/bootsnap/load_path_cache/core_ext/active_support.rb:79:in `block in load_missing_constant': uninitialized constant GithubWebhooks (NameError)</p>\n</blockquote>\n\n<p>I'm not really sure why it says GithubWebhooks is uninitialized; that's the name of the module in the Engine. <strong>What am I missing, that would make Rails recognize my engine and the modules that are inside it?</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1560369511, "post_id": 56569470, "comment_id": 99718190, "body": "What exactly are these numbers? Why are they comma separated? and how there is a &quot;0.48&quot; in the second array?"}], "answers": [{"tags": [], "owner": {"reputation": 8462, "user_id": 405865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29f04f339715955060858e0e65e1311?s=128&d=identicon&r=PG", "display_name": "fphilipe", "link": "https://stackoverflow.com/users/405865/fphilipe"}, "is_accepted": true, "score": 7, "last_activity_date": 1560369583, "creation_date": 1560369583, "answer_id": 56569573, "question_id": 56569470, "link": "https://stackoverflow.com/questions/56569470/sort-non-integers-in-an-array/56569573#56569573", "title": "Sort non-integers in an array", "body": "<p>I assume you want to sort by the floating point value. To do this, first replace the comma by a period and cast to float:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>numbers.sort_by { |s| s.tr(',', '.').to_f }\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 7214707, "user_type": "registered", "profile_image": "https://graph.facebook.com/1171364922900555/picture?type=large", "display_name": "Stanislav Bourakov", "link": "https://stackoverflow.com/users/7214707/stanislav-bourakov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 1, "accepted_answer_id": 56569573, "answer_count": 1, "score": 0, "last_activity_date": 1560370302, "creation_date": 1560369030, "last_edit_date": 1560369312, "question_id": 56569470, "link": "https://stackoverflow.com/questions/56569470/sort-non-integers-in-an-array", "title": "Sort non-integers in an array", "body": "<p>So, this is an array:</p>\n\n<pre><code>[\"2,0\", \"2,5\", \"3,2\", \"1,4\", \"1,8\", \"1,1\", \"2,7\", \"3,7\", \"0,8\", \"0,9\",\n \"30,0\", \"0,5\", \"2,6\", \"3,0\", \"5,3\", \"9,0\", \"0,7\", \"12,8\", \"16,2\", \"19,2\", \"23,0\", \n \"4,4\", \"6,4\", \"7,0\", \"7,7\", \"0,4\", \"1,2\", \"1,6\", \"11,1\", \"13,6\", \"16,9\", \"20,5\", \n \"32,0\", \"5,4\", \"8,5\", \"0,36\", \"0,48\", \"0,55\", \"0,56\", \"0,66\", \"0,75\", \"0,76\", \n \"0,95\", \"1,15\", \"1,65\", \"1,7\", \"2,1\", \"24,5\", \"3,5\", \"4,1\", \"4,8\", \"5,8\", \"2,2\", \n \"46,0\", \"7,5\", \"0,6\", \"10,6\", \"11,4\", \"3,3\", \"3,8\", \"4,7\", \"40,6\", \"5,1\", \"5,5\", \n \"5,9\", \"6,0\", \"6,7\", \"8,1\", \"9,2\", \"9,4\"]\n</code></pre>\n\n<p>I need to sort it ascending, like:</p>\n\n<pre><code>[\"0,36\", \"0.48\", \"0,5\"...\"1.7\"...\"40.6\"] \n</code></pre>\n\n<p>I tried to use <code>.sort_by(&amp;:to_i)</code> and got: </p>\n\n<pre><code>[\"0,8\", \"0,9\", \"0,5\", \"0,7\", \"0,4\", \"0,36\", \"0,48\", \"0,55\", \"0,56\", \"0,66\", \"0,75\", \n \"0,76\", \"0,95\", \"0,6\", \"1,4\", \"1,8\", \"1,1\", \"1,2\", \"1,6\", \"1,15\", \"1,65\", \"1,7\", \n \"2,0\", \"2,5\", \"2,7\", \"2,6\", \"2,1\", \"2,2\", \"3,2\", \"3,7\", \"3,0\", \"3,5\", \"3,3\", \"3,8\", \n \"4,4\", \"4,1\", \"4,8\", \"4,7\", \"5,3\", \"5,4\", \"5,8\", \"5,1\", \"5,5\", \"5,9\", \"6,4\", \"6,0\", \n \"6,7\", \"7,0\", \"7,7\", \"7,5\", \"8,5\", \"8,1\", \"9,0\", \"9,2\", \"9,4\", \"10,6\", \"11,1\", \n \"11,4\", \"12,8\", \"13,6\", \"16,2\", \"16,9\", \"19,2\", \"20,5\", \"23,0\", \"24,5\", \"30,0\", \n \"32,0\", \"40,6\", \"46,0\"]\n</code></pre>\n\n<p>Looks better but still, some numbers showed-up randomly.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "reply_to_user": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "edited": false, "score": 0, "creation_date": 1560369574, "post_id": 56569434, "comment_id": 99718215, "body": "Because that talks about a User class, and I want to get all the instance method of the object, just like the above example..."}, {"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1560369999, "post_id": 56569434, "comment_id": 99718384, "body": "<code>SomeClass = Class.new { def foo; end; }</code> then <code>SomeClass.new.methods - Object.new.methods # =&gt; [:foo]</code>"}, {"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "reply_to_user": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1560370490, "post_id": 56569434, "comment_id": 99718596, "body": "@Surya, thanks for the valuable comment, but it actually creates a class. I don&#39;t want that. I want to list all the methods defined in top self object! You can simply list methods of a class with: <code>SomeClass = Class.new { def foo() end }.tap { |c| p c.instance_methods(false) }</code>, you get <code>[:foo]    # =&gt; SomeClass</code>"}], "answers": [{"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 1, "last_activity_date": 1560371058, "last_edit_date": 1560371058, "creation_date": 1560370823, "answer_id": 56569810, "question_id": 56569434, "link": "https://stackoverflow.com/questions/56569434/how-to-list-all-the-methods-defined-in-top-self-object-in-ruby/56569810#56569810", "title": "How to list all the methods defined in top self Object in Ruby?", "body": "<p>You're getting <code>false</code> because methods defined in the top level context are private by default.</p>\n\n<pre><code>def foo; end\n\np self.private_methods.include?(:foo)\n# =&gt; true\n</code></pre>\n\n<p>I'm not sure if this is documented anywhere.</p>\n\n<p>In order to get all methods, including private ones, you'll need to do e.g.:</p>\n\n<pre><code>all_methods = self.methods | self.private_methods\n</code></pre>\n\n<p>Try it on repl.it: <a href=\"https://repl.it/@jrunning/DutifulPolishedCell\" rel=\"nofollow noreferrer\">https://repl.it/@jrunning/DutifulPolishedCell</a></p>\n"}, {"comments": [{"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 0, "creation_date": 1560371681, "post_id": 56569833, "comment_id": 99719073, "body": "Thank you very much, it works if you delete [:using, :define_method, :private, :public, :include, :DelegateClass] from the array!  <code>private_methods(false) - [:using, :define_method, :private, :public, :include, :DelegateClass]</code> ... But may the RUBY_VERSION matter? I think I shouldn&#39;t hard code it like this!!"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 1, "creation_date": 1560372263, "post_id": 56569833, "comment_id": 99719262, "body": "@S.Goswami: Or <code>private_methods(false).select{|m| method(m).owner == Object}</code>. See edit."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 3, "last_activity_date": 1560372220, "last_edit_date": 1560372220, "creation_date": 1560370921, "answer_id": 56569833, "question_id": 56569434, "link": "https://stackoverflow.com/questions/56569434/how-to-list-all-the-methods-defined-in-top-self-object-in-ruby/56569833#56569833", "title": "How to list all the methods defined in top self Object in Ruby?", "body": "<p>The closest I could find is to call <a href=\"https://ruby-doc.org/core-2.5.2/Object.html#method-i-private_methods\" rel=\"nofollow noreferrer\"><code>private_methods</code></a> on  the <code>main</code> object, with <code>false</code> as argument</p>\n\n<blockquote>\n  <p>Returns the list of private methods accessible to obj. If the all\n  parameter is set to false, only those methods in the receiver will be\n  listed.</p>\n</blockquote>\n\n<pre><code>def foo\n  \"foo\"\nend\n\ndef bar\n  \"bar\"\nend\n\ndef baz\n  \"baz\"\nend\n\np private_methods(false)\n# [:include, :using, :public, :private, :define_method, :DelegateClass, :foo, :bar, :baz]\n</code></pre>\n\n<p>If you omit the argument, you also get all the private methods defined in <a href=\"https://ruby-doc.org/core-2.6.3/Kernel.html\" rel=\"nofollow noreferrer\"><code>Kernel</code></a> or <a href=\"https://ruby-doc.org/core-2.6.3/Kernel.html\" rel=\"nofollow noreferrer\"><code>BasicObject</code></a>.</p>\n\n<p>In order to refine the list further, you could select the methods defined for <code>Object</code>:</p>\n\n<pre><code>p private_methods(false).select{|m| method(m).owner == Object}\n#=&gt; [:DelegateClass, :foo, :bar, :baz]\n</code></pre>\n\n<p>Only <a href=\"https://ruby-doc.org/stdlib-2.5.3/libdoc/delegate/rdoc/Delegator.html\" rel=\"nofollow noreferrer\"><code>:DelegateClass</code></a> is left, because it is defined in the top-level scope, just like <code>:foo</code>, <code>:bar</code> and <code>:baz</code>.</p>\n"}], "owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 56569833, "answer_count": 2, "score": 2, "last_activity_date": 1560920766, "creation_date": 1560368885, "last_edit_date": 1560920766, "question_id": 56569434, "link": "https://stackoverflow.com/questions/56569434/how-to-list-all-the-methods-defined-in-top-self-object-in-ruby", "title": "How to list all the methods defined in top self Object in Ruby?", "body": "<p>In Ruby we have simple ways to get all the local variables, global variables with <code>local_variables</code> and <code>global_variables</code> method.</p>\n\n<p>We can list the constants with Object.constants</p>\n\n<p>But is there a builtin way to list all the Object methods?</p>\n\n<p>Something like this:</p>\n\n<pre><code>def foo() end\ndef bar() end\ndef baz() end\n\n# As `Array.new.methods' or `Array.instance_methods` returns all the methods of an Array object...\n\n# Code to return all the methods defined above    # =&gt; [:foo, :bar, :baz]\n</code></pre>\n\n<p>In IRB, I can write:</p>\n\n<pre><code>def foo() end\np [self.methods.include?(:foo), self.respond_to?(:foo)]\n</code></pre>\n\n<p>And the output is <code>[true, true]</code> in IRB, but in a file, the output to standard output is <code>[false, false]</code></p>\n\n<p>Similarly if I run the following code:</p>\n\n<pre><code>def foo() end\nputs Object.new.methods.include?(:foo)\n</code></pre>\n\n<p>In IRB, I get <code>true</code>, and if it's saved in a file, I get <code>false</code></p>\n\n<p>Here's a <a href=\"https://stackoverflow.com/questions/8595184/how-to-list-all-methods-for-an-object-in-ruby\">link</a> which didn't help much:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/8595184/how-to-list-all-methods-for-an-object-in-ruby\">How to list all methods for an object in Ruby?</a></p>\n\n<p>Just because it talks about getting methods of a class or a module. But I want to list the methods defined in the top self object.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "stripe-payments"], "comments": [{"owner": {"reputation": 33, "user_id": 11568049, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oowjLJkTjkg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfYx2HePes-XevfOVVoUmKlidFBIg/mo/photo.jpg?sz=128", "display_name": "Railsdeveloperbeginner2002", "link": "https://stackoverflow.com/users/11568049/railsdeveloperbeginner2002"}, "edited": false, "score": 0, "creation_date": 1560368264, "post_id": 56569213, "comment_id": 99717626, "body": "Right now the user can connect to stripe but rails returns an error saying it couldn&#39;t find a task without an id."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 11568049, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oowjLJkTjkg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfYx2HePes-XevfOVVoUmKlidFBIg/mo/photo.jpg?sz=128", "display_name": "Railsdeveloperbeginner2002", "link": "https://stackoverflow.com/users/11568049/railsdeveloperbeginner2002"}, "edited": false, "score": 0, "creation_date": 1560372465, "post_id": 56570042, "comment_id": 99719347, "body": "I added metadata[task_id] = :task_id in the stripe button link but rails still says that it cannot find a task without an id"}, {"owner": {"reputation": 53, "user_id": 7359370, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DYjOLVaVkSw/AAAAAAAAAAI/AAAAAAAAEZ4/TdxIxqll0h4/photo.jpg?sz=128", "display_name": "Armand Fardeau", "link": "https://stackoverflow.com/users/7359370/armand-fardeau"}, "reply_to_user": {"reputation": 33, "user_id": 11568049, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oowjLJkTjkg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfYx2HePes-XevfOVVoUmKlidFBIg/mo/photo.jpg?sz=128", "display_name": "Railsdeveloperbeginner2002", "link": "https://stackoverflow.com/users/11568049/railsdeveloperbeginner2002"}, "edited": false, "score": 0, "creation_date": 1560374157, "post_id": 56570042, "comment_id": 99719909, "body": "Have you parsed the stripe response to find this id?"}], "tags": [], "owner": {"reputation": 53, "user_id": 7359370, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DYjOLVaVkSw/AAAAAAAAAAI/AAAAAAAAEZ4/TdxIxqll0h4/photo.jpg?sz=128", "display_name": "Armand Fardeau", "link": "https://stackoverflow.com/users/7359370/armand-fardeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1560371930, "creation_date": 1560371930, "answer_id": 56570042, "question_id": 56569213, "link": "https://stackoverflow.com/questions/56569213/how-to-pass-id-to-stripe-redirect-uri/56570042#56570042", "title": "How to pass id to stripe redirect uri", "body": "<p>If I understand right, you want to send a task_id as a parameter to stripe and get it back from the response. Have you tried <a href=\"https://stripe.com/docs/api/metadata\" rel=\"nofollow noreferrer\">Metadata</a> in your request? you could parse the response to find them.</p>\n"}, {"tags": [], "owner": {"reputation": 4320, "user_id": 5108826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dulBj.png?s=128&g=1", "display_name": "duck", "link": "https://stackoverflow.com/users/5108826/duck"}, "is_accepted": false, "score": 1, "last_activity_date": 1560377804, "creation_date": 1560377804, "answer_id": 56571061, "question_id": 56569213, "link": "https://stackoverflow.com/questions/56569213/how-to-pass-id-to-stripe-redirect-uri/56571061#56571061", "title": "How to pass id to stripe redirect uri", "body": "<p>Pass a <code>state</code> parameter as part of your <code>/oauth/authorize</code> link.</p>\n\n<p>From Stripe's <a href=\"https://stripe.com/docs/connect/oauth-reference#get-authorize\" rel=\"nofollow noreferrer\">reference</a>:</p>\n\n<blockquote>\n  <p>An arbitrary string value we will pass back to you, useful for CSRF protection.</p>\n</blockquote>\n\n<p>This will then be included in the query string when Stripe redirects to your <code>redirect_uri</code>, and you can use it to further redirect or process in your application.</p>\n"}], "owner": {"reputation": 33, "user_id": 11568049, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oowjLJkTjkg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfYx2HePes-XevfOVVoUmKlidFBIg/mo/photo.jpg?sz=128", "display_name": "Railsdeveloperbeginner2002", "link": "https://stackoverflow.com/users/11568049/railsdeveloperbeginner2002"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1560377804, "creation_date": 1560367943, "last_edit_date": 1560368259, "question_id": 56569213, "link": "https://stackoverflow.com/questions/56569213/how-to-pass-id-to-stripe-redirect-uri", "title": "How to pass id to stripe redirect uri", "body": "<p>I want to the redirect uri to return to the submission path for a specific task but I don't know how to send an id to the stripe redirect uri.</p>\n\n<p>I have currently set the redirect uri to <a href=\"http://localhost:3000/stripe/connect\" rel=\"nofollow noreferrer\">http://localhost:3000/stripe/connect</a>. But I want to be able to send through task id to the stripe connect action so that I can redirect to the specific task submission path</p>\n\n<p>Submissions/new.html.erb:</p>\n\n<pre><code>&lt;% if current_user.stripe_user_id %&gt;\n  &lt;h2&gt;Submit&lt;/h2&gt;\n  &lt;%= form_for [:task, @submission] do |f| %&gt;\n    &lt;%= f.text_area :description, placeholder: \"File description\"    %&gt;\n    &lt;%= f.file_field :files, multiple: true %&gt;\n    &lt;%= f.submit \"Submit\", class: \"btn button\" %&gt;\n  &lt;% end %&gt;\n&lt;% else %&gt;\n  &lt;h6&gt; To Accept Payments for Tasks:&lt;/h6&gt;\n  &lt;%= link_to image_tag(\"light-on-dark.png\"), stripe_button_link,   :data =&gt; {:task_id =&gt; @task.id} %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Users Helper:</p>\n\n<pre><code>def stripe_button_link\n  stripe_url = \"https://connect.stripe.com/oauth/authorize\"\n  redirect_uri = stripe_connect_url\n  client_id = ENV[\"STRIPE_CLIENT_ID\"]\n\n  \"#{stripe_url}?response_type=code&amp;redirect_uri=#   {redirect_uri}&amp;client_id=#{client_id}&amp;scope=read_write\"\nend\n</code></pre>\n\n<p>Stripe Controller:</p>\n\n<pre><code>def connect\n  response = HTTParty.post(\"https://connect.stripe.com/oauth/token\",\n    query: {\n      client_secret: ENV[\"STRIPE_SECRET_KEY\"],\n      code: params[:code],\n      grant_type: \"authorization_code\"\n    }\n  )\n  @task = Task.find(params[:task_id])\n  if response.parsed_response.key?(\"error\")\n    redirect_to new_task_submission_path(@task),\n      notice: response.parsed_response[\"error_description\"]\n  else\n    stripe_user_id = response.parsed_response[\"stripe_user_id\"]\n    current_user.update_attribute(:stripe_user_id, stripe_user_id)\n\n    redirect_to new_task_submission_path(@task),\n      notice: 'User successfully connected with Stripe!'\n  end\nend\n</code></pre>\n\n<p>Config Routes:</p>\n\n<pre><code>get \"stripe/connect\", to: \"stripe#connect\", as: :stripe_connect\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1560366674, "post_id": 56568426, "comment_id": 99716916, "body": "Your specific error is likely caused by <code>@order</code> being nil. Not sure if this is the cause, but you should use <code>map</code> instead of <code>each</code> when building the lists of ids to pass to <code>find</code>. You should learn to use a debugger tool like byebug or pry and step through the code"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1560368506, "post_id": 56568426, "comment_id": 99717743, "body": "Testing in console and found that <code>shop_product_line_items = line_items.where.not(shop_product_id: [nil, &quot;&quot;])</code> is coming up blank.  Is that how I should be finding out if the shop_product_id record is present?  Obviously not because it doesnt seem to be working but how else can i"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1560368870, "post_id": 56568426, "comment_id": 99717881, "body": "Looks like using <code>.where(shop_product_id: present? )</code> works so far.. is that reliable? When i was doing this i read NOT to use something like that on SO --- not sure sure how good that information was"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1560369271, "post_id": 56568426, "comment_id": 99718072, "body": "No, that is not proper syntax. You could use <code>where.not(shop_product_id: nil)</code> though"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1560369642, "post_id": 56568426, "comment_id": 99718250, "body": "okay thanks.  going to re make this quesetion with updates"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1560372659, "post_id": 56568426, "comment_id": 99719412, "body": "o welp nvm.  thanks for the hlp  --- using map and nil works and the orders are creating based on the amount of line items in the loop... appreciate it.  you help me a lot.  GOAT"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560364450, "creation_date": 1560364450, "question_id": 56568426, "link": "https://stackoverflow.com/questions/56568426/saving-multiple-records-on-one-create-form-dependign-on-associated-items", "title": "Saving multiple records on one create form dependign on associated items", "body": "<p>Goal: To create multiple Orders based on how many of a certain associated records are present.</p>\n\n<p>Here's the form: (not important but receiving errors</p>\n\n<pre><code>&lt;%= form_for(@order) do |form| %&gt;\n    &lt;%= form.hidden_field :cart_id, value: @cart.id %&gt;\n    &lt;%= form.hidden_field :store_order_id, value: \"1\" %&gt;\n    &lt;%= form.text_field :shipping_name %&gt;\n    &lt;%= form.text_field :shipping_address1 %&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= form.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Error:</p>\n\n<blockquote>\n  <p>ActionView::Template::Error (First argument in form cannot contain nil\n  or be empty):</p>\n</blockquote>\n\n<p>Models:</p>\n\n<p>ShopProduct</p>\n\n<pre><code>has_one :order\nhas_many :line_items\n</code></pre>\n\n<p>Order</p>\n\n<pre><code>belongs_to :product, optional: true\nbelongs_to :shop_product, optional: true\nbelongs_to :cart\n</code></pre>\n\n<p>LineItem</p>\n\n<pre><code>belongs_to :shop_product, optional: true\nbelongs_to :product, optional: true\nbelongs_to :cart\n</code></pre>\n\n<p>Cart</p>\n\n<pre><code>has_many :line_items, dependent: :destroy\nhas_one :order\n</code></pre>\n\n<p>OrdersController:</p>\n\n<pre><code>  def create\n    cart = Cart.find(params[\"order\"][\"cart_id\"])\n    line_items = LineItem.where(cart_id: cart)\n    shop_product_line_items = line_items.where.not(shop_product: [nil, \"\"])\n    product_line_items = line_items.where.not(product: [nil, \"\"])\n    shop_products = ShopProduct.find(shop_product_line_items.each { |li| li.shop_product })\n    products = Product.find(product_line_items.each { |li| li.product })\n\n    if shop_products.present?\n      shop_products.each { |sp|\n      @order = Order.new\n      @order.shop_product_id = sp.id\n      @order.product_id = sp.product_id\n      @order.cart_id = cart\n      @order.save!\n    }\n    end\n\n    if products.present?\n      products.each { |p|\n      @order = Order.new\n      @order.product_id = p.id\n      @order.cart_id = cart\n      @order.save!\n    }\n    end\n\n    @orders = Order.where(cart_id: cart)\n\n    respond_to do |format|\n      if @orders.count == line_items.count\n        session[:cart_id] = nil\n        format.html { redirect_to @order, notice: 'Order was successfully created.' }\n        format.json { render :show, status: :created, location: @order }\n      else\n        format.html { render :new }\n        format.json { render json: @order.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n</code></pre>\n\n<p>How it works is there is a cart which then is attached to many <code>line_items</code> which can be <code>shop_product</code> or <code>product</code>.  I then want to save a separate order based on each <code>@cart.line_items</code>.</p>\n\n<p>How can I create multiple Order's based on how many line_items are present in the cart?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 3705, "user_id": 8551976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oxgdN.jpg?s=128&g=1", "display_name": "asimhashmi", "link": "https://stackoverflow.com/users/8551976/asimhashmi"}, "is_accepted": true, "score": 2, "last_activity_date": 1560362322, "creation_date": 1560362322, "answer_id": 56567946, "question_id": 56567698, "link": "https://stackoverflow.com/questions/56567698/rails-redirect-to-cant-find-route-if-its-wrapped-with-constraint/56567946#56567946", "title": "Rails - redirect_to can&#39;t find route if it&#39;s wrapped with constraint", "body": "<p>The reason why your code is not working because <code>action</code> params takes the name of action on the same controller if you don't specify the controller name.</p>\n\n<p>Change your code from </p>\n\n<pre><code>def some_page\n   redirect_to action: :client_index, \nend\n</code></pre>\n\n<p>To </p>\n\n<pre><code>def some_page\n   redirect_to controller: 'client', action: :index \nend\n</code></pre>\n\n<p>More info on <code>redirect_to</code> <a href=\"https://apidock.com/rails/ActionController/Base/redirect_to\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 1315, "user_id": 7412183, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a73ddfb4eba2ce63e534ab68317210dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7412183/dennis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 56567946, "answer_count": 1, "score": 0, "last_activity_date": 1560367968, "creation_date": 1560361296, "last_edit_date": 1560367968, "question_id": 56567698, "link": "https://stackoverflow.com/questions/56567698/rails-redirect-to-cant-find-route-if-its-wrapped-with-constraint", "title": "Rails - redirect_to can&#39;t find route if it&#39;s wrapped with constraint", "body": "<p>I have route like this wrapped by constraint.</p>\n\n<pre><code>constraints DomainConstraint.new('admin.example.com') do\n  get '/admin/:page', to: 'admin#browse', as: :admin_index\nend\n\nconstraints DomainConstraint.new('client.example.com') do\n  get '/:page', to: 'client#index', as: :client_index\nend\n</code></pre>\n\n<p>Now, When I want to redirect request from <code>admin.example.com</code> controller to <code>client</code> controller via:</p>\n\n<pre><code>def some_page\n  redirect_to action: :client_index, \nend\n</code></pre>\n\n<p>It says:</p>\n\n<pre><code>No route matches\n</code></pre>\n\n<p>I believe this happens because I wrapped routes with constraint. How can i redirect admin to client using <code>constraints</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "solr", "sunspot"], "comments": [{"owner": {"reputation": 37387, "user_id": 137650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418a42c29b040f2e0a51eea5330e2b7f?s=128&d=identicon&r=PG", "display_name": "MatsLindh", "link": "https://stackoverflow.com/users/137650/matslindh"}, "edited": false, "score": 0, "creation_date": 1560362199, "post_id": 56567696, "comment_id": 99715007, "body": "Do you have any complete examples of what you&#39;re indexing and what you&#39;d expect to get hits for in the field? Are you only indexing the term <code>MIP2l</code> in the field?"}, {"owner": {"reputation": 1, "user_id": 11638295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e73fe73f6fee9ce114903e9b1514824?s=128&d=identicon&r=PG&f=1", "display_name": "AMoon01", "link": "https://stackoverflow.com/users/11638295/amoon01"}, "reply_to_user": {"reputation": 37387, "user_id": 137650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418a42c29b040f2e0a51eea5330e2b7f?s=128&d=identicon&r=PG", "display_name": "MatsLindh", "link": "https://stackoverflow.com/users/137650/matslindh"}, "edited": false, "score": 0, "creation_date": 1560363319, "post_id": 56567696, "comment_id": 99715512, "body": "The only thing that&#39;s indexed is gene name, where <code>MIP2</code> and <code>MIP2l</code> are both indexed and distinct. There are roughly 800,000 gene names in the database, some examples include <code>interferon-gamma</code>, <code>IL-4</code>, and <code>Eotaxin</code>. Each of these also has a distinct ligand and receptor, for example <code>interferon-gammal</code>, <code>IL-4l</code>, and <code>Eotaxinl</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11638295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e73fe73f6fee9ce114903e9b1514824?s=128&d=identicon&r=PG&f=1", "display_name": "AMoon01", "link": "https://stackoverflow.com/users/11638295/amoon01"}, "is_accepted": false, "score": 0, "last_activity_date": 1560363484, "creation_date": 1560363484, "answer_id": 56568184, "question_id": 56567696, "link": "https://stackoverflow.com/questions/56567696/how-to-do-synonym-matching-on-regular-expressions-in-solr-5-3-1/56568184#56568184", "title": "How to do synonym matching on regular expressions in solr 5.3.1?", "body": "<p>I believe I fixed it, but it's a lame workaround where I just added</p>\n\n<pre><code>    @str.downcase!\n    @str.gsub!(\" ligand\", \"l\")\n    @str.gsub!(\" receptor\",\"r\")\n    params[:search][:search_str] = @str\n</code></pre>\n\n<p>before the previously mentioned code section. @str is a parsed version of params[:search][:search_str]</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 11638295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e73fe73f6fee9ce114903e9b1514824?s=128&d=identicon&r=PG&f=1", "display_name": "AMoon01", "link": "https://stackoverflow.com/users/11638295/amoon01"}, "edited": false, "score": 0, "creation_date": 1560369085, "post_id": 56568928, "comment_id": 99717978, "body": "I have to use that because there&#39;s other ways to search that we didn&#39;t redo so in order to get the format that they use I need to use a find_by_sql query."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 1, "user_id": 11638295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e73fe73f6fee9ce114903e9b1514824?s=128&d=identicon&r=PG&f=1", "display_name": "AMoon01", "link": "https://stackoverflow.com/users/11638295/amoon01"}, "edited": false, "score": 0, "creation_date": 1560369760, "post_id": 56568928, "comment_id": 99718294, "body": "Understood, and thanks. Your question got me curious. Would you mind saying a little more about what exactly that <code>find_by_sql</code> query is doing and what the results are? I&#39;d understand if you don&#39;t have the time, but, again, I got curious."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1560367365, "last_edit_date": 1560367365, "creation_date": 1560366751, "answer_id": 56568928, "question_id": 56567696, "link": "https://stackoverflow.com/questions/56567696/how-to-do-synonym-matching-on-regular-expressions-in-solr-5-3-1/56568928#56568928", "title": "How to do synonym matching on regular expressions in solr 5.3.1?", "body": "<p>I realize this isn't really your question. But, it seems like here:</p>\n\n<pre><code>gene_ids = []\nfor gene_name in search.results\n  gene_ids &lt;&lt; gene_name.gene_id unless gene_name.nil? or gene_ids.include? gene_name.gene_id\nend\n</code></pre>\n\n<p>You could be using <code>map</code>, <code>compact</code>, and <code>uniq</code>, like:</p>\n\n<pre><code>gene_ids = search.results.map do |result|\n  result.gene_id unless result.gene_name.nil?\nend.compact.uniq\n</code></pre>\n\n<p>Also, I never use <code>find_by_sql</code> and I don't really understand what you're doing there. But, I wonder if you could use a standard ActiveRecord query there?</p>\n"}], "owner": {"reputation": 1, "user_id": 11638295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e73fe73f6fee9ce114903e9b1514824?s=128&d=identicon&r=PG&f=1", "display_name": "AMoon01", "link": "https://stackoverflow.com/users/11638295/amoon01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1560367365, "creation_date": 1560361284, "last_edit_date": 1560363762, "question_id": 56567696, "link": "https://stackoverflow.com/questions/56567696/how-to-do-synonym-matching-on-regular-expressions-in-solr-5-3-1", "title": "How to do synonym matching on regular expressions in solr 5.3.1?", "body": "<p>I'm writing a sunspot application for a large gene database. Ligands and receptors for genes are named with the normal gene name, followed by an 'l' or an 'r', respectively, so for example a ligand for the gene 'MIP2' would be called 'MIP2l'. However, I want to account for instances in which the scientists will search for them using the syntax \"MIP2 ligand\". How can I combine the two tokens \"MIP2\" and \"ligand\" into one, and then concat them?</p>\n\n<p>I tried using the Synonym Graph Filter Factory, but my solr is in 5.3.1, so it won't load. A quick update is not feasible. I also tried the technique illustrated in this article (<a href=\"https://lucidworks.com/2014/07/12/solution-for-multi-term-synonyms-in-lucenesolr-using-the-auto-phrasing-tokenfilter/\" rel=\"nofollow noreferrer\">https://lucidworks.com/2014/07/12/solution-for-multi-term-synonyms-in-lucenesolr-using-the-auto-phrasing-tokenfilter/</a>), but the database is too large for a simple synonyms.txt doc. I want to use regular expressions for this, but I can't without combining the two tokens into one first.</p>\n\n<p>This is my current search function, the sql lookup and weird hashing is because it's replacing an old search function, and the sql lookup is how I get the properly formatted data for the view.</p>\n\n<pre><code>search =  GeneName.search do\n            fulltext params[:search][:search_str]\n            order_by(:use_name, :asc)\n            order_by(:score, :desc)\n          end\ngene_ids = []\nfor gene_name in search.results\n  gene_ids &lt;&lt; gene_name.gene_id unless gene_name.nil? or gene_ids.include? gene_name.gene_id\nend\ngene_ids_to_s = gene_ids.to_s.gsub(\"[\",\"(\").gsub(\"]\",\")\")\n#raise gene_ids_to_s.inspect\n@genes = Gene.find_by_sql(\"select distinct g.id gene_id from genes g, gene_names gn where g.id = gn.gene_id and g.id in #{gene_ids_to_s} order by use_name desc\") unless gene_ids_to_s == \"()\"   \n</code></pre>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11638095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nB2v5.png?s=128&g=1", "display_name": "Gus Vicuna", "link": "https://stackoverflow.com/users/11638095/gus-vicuna"}, "edited": false, "score": 0, "creation_date": 1560375278, "post_id": 56568675, "comment_id": 99720234, "body": "I forgot about those, i don&#39;t need them anymore so i deleted those 2 lines entirely and it keeps showing me that error.  Im gonna update comment.rb in the question."}], "tags": [], "owner": {"reputation": 31, "user_id": 10593647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f22c79fe94509a33354042e0718b11a?s=128&d=identicon&r=PG&f=1", "display_name": "Heshie Bee", "link": "https://stackoverflow.com/users/10593647/heshie-bee"}, "is_accepted": false, "score": 0, "last_activity_date": 1560365630, "creation_date": 1560365630, "answer_id": 56568675, "question_id": 56567303, "link": "https://stackoverflow.com/questions/56567303/destroying-user-in-rails-gives-error-with-dependant-models/56568675#56568675", "title": "Destroying user in rails gives error with dependant models", "body": "<p>Your <code>upvote_comments</code> and <code>downvote_comments</code> are still dependent on the <code>comment</code> therefore you cannot delete the comment if anything references to it.</p>\n\n<p>You need to add <code>dependent: :destroy</code> to <code>upvote_comments</code> and <code>downvote_comments</code> in your comments model.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11638095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nB2v5.png?s=128&g=1", "display_name": "Gus Vicuna", "link": "https://stackoverflow.com/users/11638095/gus-vicuna"}, "is_accepted": true, "score": 0, "last_activity_date": 1560585386, "creation_date": 1560585386, "answer_id": 56608508, "question_id": 56567303, "link": "https://stackoverflow.com/questions/56567303/destroying-user-in-rails-gives-error-with-dependant-models/56608508#56608508", "title": "Destroying user in rails gives error with dependant models", "body": "<p>I\u2019ve found the solution. I was missing the foreign cascade in the migrations. I only wrote dependent destroy on the user.rb but forgot about the migrations.</p>\n"}], "owner": {"reputation": 11, "user_id": 11638095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nB2v5.png?s=128&g=1", "display_name": "Gus Vicuna", "link": "https://stackoverflow.com/users/11638095/gus-vicuna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 56608508, "answer_count": 2, "score": 1, "last_activity_date": 1560585386, "creation_date": 1560359476, "last_edit_date": 1560375359, "question_id": 56567303, "link": "https://stackoverflow.com/questions/56567303/destroying-user-in-rails-gives-error-with-dependant-models", "title": "Destroying user in rails gives error with dependant models", "body": "<p>I'm trying to delete a user in my rails application by calling @user.destroy in the userscontroller but it shows me an error with the dependent models.</p>\n\n<p>I'm using devise and I don't know if there is another method for destroying a user in there. I've tried changing to delete_all but didn't work then removing \"dependant: :destroy\" on the user model in every \"has_many\" line and adding manually in the controller the code for deleting those objects that depend on that user but it shows me the same error.</p>\n\n<p>user.rb</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  extend Devise::Models\n\n  require 'uri'\n\n  has_one_attached :profile_pic\n\n  has_many :comments, dependent: :destroy\n  has_many :posts, dependent: :destroy\n  has_many :blockeds, class_name: 'block', foreign_key: 'blocked_id', dependent: :destroy\n  has_many :owner_blocks, class_name: 'block', foreign_key: 'owner_id', dependent: :destroy\n  has_many :followers, class_name: 'follow_user', foreign_key: 'followed_id', dependent: :destroy\n  has_many :following, class_name: 'follow_user', foreign_key: 'follower_id', dependent: :destroy\n  has_many :taggeds, class_name: 'tag', foreign_key: 'tagged_id', dependent: :destroy\n  has_many :taggers, class_name: 'tag', foreign_key: 'tagger_id', dependent: :destroy\n  has_many :achievements, through: :achievement_users, dependent: :destroy\n  has_many :downvote_comments, dependent: :destroy\n  has_many :upvote_comments, dependent: :destroy\n  has_many :upvote_posts, dependent: :destroy\n  has_many :downvote_posts, dependent: :destroy\n  has_many :follow_posts, dependent: :destroy\n  has_many :mark_innapropiateds, dependent: :destroy\n</code></pre>\n\n<p>comment.rb</p>\n\n<pre><code>class Comment &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :post\n</code></pre>\n\n<p>users_controller.rb</p>\n\n<pre><code>def destroy\n    @user.destroy\n    respond_to do |format|\n      format.html { redirect_to users_url, notice: 'User was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n</code></pre>\n\n<p>Migration for comment</p>\n\n<pre><code>class CreateComments &lt; ActiveRecord::Migration[5.2]\n  def change\n    create_table :comments do |t|\n      t.references :user, foreign_key: true\n      t.references :post, foreign_key: true\n      t.string :content\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>index.html.erb (Where I call the destroy method for the user)</p>\n\n<pre><code>        &lt;% @users.each do |user| %&gt;\n          &lt;tr&gt;\n            &lt;td&gt;&lt;%= user.nickname %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= user.email %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= user.role %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= user.last_sign_in_at %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= link_to 'Show', user, class: \"btn btn-primary\" %&gt;&lt;/td&gt;\n            &lt;td&gt;\n              &lt;% if user.role=='user' %&gt;\n                        &lt;%= form_with(model: user, local: true, action: 'make_admin') do |form| %&gt;\n                          &lt;%= form.hidden_field :role, value: 'admin' %&gt;\n                          &lt;%= form.submit \"Make Admin\", class: 'btn btn-primary' %&gt;\n                        &lt;% end %&gt;\n              &lt;% end %&gt;\n            &lt;/td&gt;\n            &lt;td&gt;&lt;%= link_to 'Destroy', user, method: :delete, data: { confirm: 'Are you sure?' }, class: \"btn btn-primary\"%&gt;&lt;/td&gt;\n          &lt;/tr&gt;\n        &lt;% end %&gt;\n</code></pre>\n\n<p>I expected the user to be deleted with all their dependent objects (in this case their comments). It is only showing me an error with the comments but my guess is that it would show me the same error for the other models. This is the error:</p>\n\n<pre><code>SQLite3::ConstraintException: FOREIGN KEY constraint failed: DELETE FROM \"comments\" WHERE \"comments\".\"id\" = ?\n</code></pre>\n\n<h1>DELETE /users/1.json</h1>\n\n<pre><code>  def destroy\n    @user.destroy (&lt;-- here is remarked)\n    respond_to do |format|\n      format.html { redirect_to users_url, notice: 'User was successfully destroyed.' }\n      format.json { head :no_content }\n</code></pre>\n\n<p>Parameters:</p>\n\n<p>{\"_method\"=>\"delete\", \"authenticity_token\"=>\"tLUFwuWcM27OKSgrJLoxHTznr82DIFCPFF+InWYnNRpGRyqI5ZIrbUIIP0oaWCB8mVR5mIBI1SPS5E1cynOEmw==\", \"id\"=>\"1\"}</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 2639, "user_id": 3092183, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/496bb477dfd000e3a732225cf065202a?s=128&d=identicon&r=PG", "display_name": "Richard-Degenne", "link": "https://stackoverflow.com/users/3092183/richard-degenne"}, "edited": false, "score": 0, "creation_date": 1560359468, "post_id": 56567095, "comment_id": 99713813, "body": "What version of <code>gcc</code> do you have?"}, {"owner": {"reputation": 870, "user_id": 7798841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c86b01db40fd2c2cb8745161bfa8a55d?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Omerovic", "link": "https://stackoverflow.com/users/7798841/denis-omerovic"}, "reply_to_user": {"reputation": 2639, "user_id": 3092183, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/496bb477dfd000e3a732225cf065202a?s=128&d=identicon&r=PG", "display_name": "Richard-Degenne", "link": "https://stackoverflow.com/users/3092183/richard-degenne"}, "edited": false, "score": 0, "creation_date": 1560359543, "post_id": 56567095, "comment_id": 99713844, "body": "gcc version 5.5.0 (Homebrew gcc 5.5.0_4)"}, {"owner": {"reputation": 870, "user_id": 7798841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c86b01db40fd2c2cb8745161bfa8a55d?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Omerovic", "link": "https://stackoverflow.com/users/7798841/denis-omerovic"}, "reply_to_user": {"reputation": 2639, "user_id": 3092183, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/496bb477dfd000e3a732225cf065202a?s=128&d=identicon&r=PG", "display_name": "Richard-Degenne", "link": "https://stackoverflow.com/users/3092183/richard-degenne"}, "edited": false, "score": 14, "creation_date": 1560361649, "post_id": 56567095, "comment_id": 99714754, "body": "I found a error. i had a 2 gcc versions installed on my system and I just run brew unlink gcc and that solved the problem."}, {"owner": {"reputation": 2639, "user_id": 3092183, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/496bb477dfd000e3a732225cf065202a?s=128&d=identicon&r=PG", "display_name": "Richard-Degenne", "link": "https://stackoverflow.com/users/3092183/richard-degenne"}, "edited": false, "score": 0, "creation_date": 1560412589, "post_id": 56567095, "comment_id": 99729675, "body": "You might want to self-answer your question for future readers. :)"}, {"owner": {"reputation": 2998, "user_id": 1936229, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/378f75e313dc86ed4d0466e045539f6e?s=128&d=identicon&r=PG&f=1", "display_name": "Baig", "link": "https://stackoverflow.com/users/1936229/baig"}, "edited": false, "score": 0, "creation_date": 1575882923, "post_id": 56567095, "comment_id": 104701503, "body": "I am facing this issue as well and i did not have any gcc installed via brew but i am still facing this issue, any tips?"}, {"owner": {"reputation": 115, "user_id": 7312935, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1114873258610300/picture?type=large", "display_name": "Aashish Kumar", "link": "https://stackoverflow.com/users/7312935/aashish-kumar"}, "edited": false, "score": 1, "creation_date": 1588268465, "post_id": 56567095, "comment_id": 108840798, "body": "@DenisOmerovic Having the same issue in ubuntu 16.04. Any idea on how to solve it?"}], "answers": [{"comments": [{"owner": {"reputation": 364, "user_id": 2551008, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c95576ebecf22c3554e1011bb761edbd?s=128&d=identicon&r=PG", "display_name": "skepticscript", "link": "https://stackoverflow.com/users/2551008/skepticscript"}, "edited": false, "score": 0, "creation_date": 1610137698, "post_id": 61953486, "comment_id": 116047171, "body": "This worked on Ubuntu 18.04 as well."}, {"owner": {"reputation": 1174, "user_id": 1025412, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c30cd376469fb9220fab6166993492fc?s=128&d=identicon&r=PG", "display_name": "Madis N&#245;mme", "link": "https://stackoverflow.com/users/1025412/madis-n%c3%b5mme"}, "edited": false, "score": 0, "creation_date": 1614154144, "post_id": 61953486, "comment_id": 117295548, "body": "And ubuntu 20.04!"}], "tags": [], "owner": {"reputation": 673, "user_id": 792724, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/5f46ed536c544f2f9e9fbf4363a29cd0?s=128&d=identicon&r=PG", "display_name": "mArtinko5MB", "link": "https://stackoverflow.com/users/792724/martinko5mb"}, "is_accepted": false, "score": 24, "last_activity_date": 1590145187, "creation_date": 1590145187, "answer_id": 61953486, "question_id": 56567095, "link": "https://stackoverflow.com/questions/56567095/gcc-compilation-error-when-installing-nokogiri/61953486#61953486", "title": "GCC compilation error when installing Nokogiri", "body": "<p>For those who do not read comments</p>\n\n<p>Debian 10 users, if you find </p>\n\n<pre><code> gcc: error: unrecognized command line option '-Wduplicated-cond'\n</code></pre>\n\n<p>in mkmf.log</p>\n\n<pre><code>brew unlink gcc\n</code></pre>\n\n<p>is what you are looking for. I spend an hour looking for an answer and yes, i once missed the answer here, but luckily i have returned and spotted it.</p>\n"}, {"tags": [], "owner": {"reputation": 410, "user_id": 3714163, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8aba5b3335513a9788c2435b2a34c027?s=128&d=identicon&r=PG&f=1", "display_name": "Ninad Nehete", "link": "https://stackoverflow.com/users/3714163/ninad-nehete"}, "is_accepted": false, "score": 1, "last_activity_date": 1599140710, "creation_date": 1599140710, "answer_id": 63724979, "question_id": 56567095, "link": "https://stackoverflow.com/questions/56567095/gcc-compilation-error-when-installing-nokogiri/63724979#63724979", "title": "GCC compilation error when installing Nokogiri", "body": "<p>I had faced a similar issue. My default compiler did not recognise certain command line options just like you are facing.</p>\n<p>My gcc version was 10. I could solve it by adding an older gcc version (5.5) and set it as default for the  gem installation purpose. I followed the step given in this <a href=\"https://askubuntu.com/questions/26498/how-to-choose-the-default-gcc-and-g-version/26518#26518\">thread</a> to do so.</p>\n"}], "owner": {"reputation": 870, "user_id": 7798841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c86b01db40fd2c2cb8745161bfa8a55d?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Omerovic", "link": "https://stackoverflow.com/users/7798841/denis-omerovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1404, "favorite_count": 1, "answer_count": 2, "score": 10, "last_activity_date": 1599140710, "creation_date": 1560358668, "last_edit_date": 1560359436, "question_id": 56567095, "link": "https://stackoverflow.com/questions/56567095/gcc-compilation-error-when-installing-nokogiri", "title": "GCC compilation error when installing Nokogiri", "body": "<p>I'm trying to run <code>bundle install</code> but I'm getting the Error while trying to Install Nokogiri 1.10.3</p>\n\n<p>Here is the error message from <code>mkmf.log</code>.</p>\n\n<pre><code>gcc -o conftest -I/home/chille/.rvm/rubies/ruby-2.5.1/include/ruby-2.5.0/x86_64-linux -I/home/chille/.rvm/rubies/ruby-2.5.1/include/ruby-2$\ngcc: error: unrecognized command line option '-Wmisleading-indentation'\ngcc: error: unrecognized command line option '-Wimplicit-fallthrough=0'\ngcc: error: unrecognized command line option '-Wduplicated-cond'\ngcc: error: unrecognized command line option '-Wrestrict'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 407, "user_id": 8815101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7389332cddf90585a7946e00d7ee7a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Veda", "link": "https://stackoverflow.com/users/8815101/veda"}, "edited": false, "score": 0, "creation_date": 1560363695, "post_id": 56566828, "comment_id": 99715685, "body": "I am getting &quot;undefined local variable or method `request&#39; for #&lt;Class:0x000000001216fac8&gt;&quot; error if I define the helper method in account.rb"}], "tags": [], "owner": {"reputation": 2639, "user_id": 3092183, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/496bb477dfd000e3a732225cf065202a?s=128&d=identicon&r=PG", "display_name": "Richard-Degenne", "link": "https://stackoverflow.com/users/3092183/richard-degenne"}, "is_accepted": false, "score": 2, "last_activity_date": 1560357437, "creation_date": 1560357437, "answer_id": 56566828, "question_id": 56566665, "link": "https://stackoverflow.com/questions/56566665/how-to-make-value-attribute-in-the-select-option-tag-to-have-urls-in-rails/56566828#56566828", "title": "How to make value attribute in the select option tag to have url&#39;s in rails", "body": "<p>According to <a href=\"https://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/options_from_collection_for_select\" rel=\"nofollow noreferrer\">the documentation</a>, the <code>value_method</code> parameter is exactly that, a method. You can't use an arbitrary block of code and expect it to work.</p>\n\n<p>You should implement your <code>build_path_for_airline</code> as an helper method in your model class, and use that method in the <code>options_from_collection_for_select</code> call.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># app/models/account.rb\n\nclass Account\n  # ...\n  def airline_path\n    # Build the airline path for the current account\n  end\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code># app/views/...\n\n&lt;%= select_tag :account, options_from_collection_for_select(Account.all, :airline_path, :name) %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2639, "user_id": 3092183, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/496bb477dfd000e3a732225cf065202a?s=128&d=identicon&r=PG", "display_name": "Richard-Degenne", "link": "https://stackoverflow.com/users/3092183/richard-degenne"}, "edited": false, "score": 0, "creation_date": 1560412679, "post_id": 56567292, "comment_id": 99729735, "body": "Interesting. I couldn&#39;t find it in the docs, though. Did you find that somewhere else?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 2639, "user_id": 3092183, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/496bb477dfd000e3a732225cf065202a?s=128&d=identicon&r=PG", "display_name": "Richard-Degenne", "link": "https://stackoverflow.com/users/3092183/richard-degenne"}, "edited": false, "score": 1, "creation_date": 1560441020, "post_id": 56567292, "comment_id": 99746607, "body": "@Richard-Degenne It&#39;s not documented, of course. Yay Rails. \ud83d\ude05For what it&#39;s worth, though, several other methods in the FormOptionsHelper module also take a <code>value_method</code> option and it <i>is</i> documented for them, e.g. <a href=\"https://api.rubyonrails.org/v5.2.3/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select\" rel=\"nofollow noreferrer\"><code>collection_select</code></a>: &quot;The <code>:value_method</code> and <code>:text_method</code> parameters \u2026 can also be any object that responds to <code>call</code>, such as a <code>proc</code>, that will be called for each member of the <code>collection</code> to retrieve the value/text.&quot;"}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 1, "last_activity_date": 1560359430, "creation_date": 1560359430, "answer_id": 56567292, "question_id": 56566665, "link": "https://stackoverflow.com/questions/56566665/how-to-make-value-attribute-in-the-select-option-tag-to-have-urls-in-rails/56567292#56567292", "title": "How to make value attribute in the select option tag to have url&#39;s in rails", "body": "<p>Richard-Degenne's answer is correct, but there's an alternative to putting the method in your model. <code>options_from_collection_for_select</code> can also take a lambda for its <code>value_method</code> argument:</p>\n\n<pre><code>&lt;%= select_tag :account, options_from_collection_for_select(\n      Account.all,\n      -&gt;(account){ build_path_for_airline(account.id) },\n      \"name\")\n%&gt;\n</code></pre>\n"}], "owner": {"reputation": 407, "user_id": 8815101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7389332cddf90585a7946e00d7ee7a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Veda", "link": "https://stackoverflow.com/users/8815101/veda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1560412710, "creation_date": 1560356771, "last_edit_date": 1560412710, "question_id": 56566665, "link": "https://stackoverflow.com/questions/56566665/how-to-make-value-attribute-in-the-select-option-tag-to-have-urls-in-rails", "title": "How to make value attribute in the select option tag to have url&#39;s in rails", "body": "<p>I want value attribute in the select option menu to contain url's and on click should take to the particular path.I am using helper method to build the path</p>\n\n<p>Code:</p>\n\n<pre><code>&lt;%= select_tag :account, options_from_collection_for_select(Account.all,build_path_for_airline(id),\"name\") %&gt;\n</code></pre>\n\n<p>helper:</p>\n\n<pre><code>def build_path_for_airline(id)\n      new_path = Rails.application.routes.recognize_path(request.path)\n      new_path[:airline_id] = id\n      new_path\n    end\n</code></pre>\n\n<p>Unfortunately its not working as expected, Can anyone let me know what I am missing here?</p>\n"}, {"tags": ["ruby", "linux", "selenium-webdriver", "rubygems"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 1, "creation_date": 1560358872, "post_id": 56566599, "comment_id": 99713524, "body": "Stacktrace is pointomh to <code>No such file or directory -- &#47;usr&#47;share&#47;rubygems-integration&#47;all&#47;gems&#47;rake-12.3.1&#47;exe&#47;rak&zwnj;&#8203;e (LoadError)</code>.  Try <code>sudo install rake</code> first?  Just a shot in the dark..."}, {"owner": {"reputation": 1176, "user_id": 951321, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9eb886c753c17c33ba7fd8061af43e3f?s=128&d=identicon&r=PG", "display_name": "markhorrocks", "link": "https://stackoverflow.com/users/951321/markhorrocks"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1560360092, "post_id": 56566599, "comment_id": 99714077, "body": "rake is already the newest version (12.3.1-3)"}, {"owner": {"reputation": 2000, "user_id": 952740, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d758ce8171d8e74b9c5f5a2e701f1b9b?s=128&d=identicon&r=PG", "display_name": "Nick M", "link": "https://stackoverflow.com/users/952740/nick-m"}, "edited": false, "score": 0, "creation_date": 1560455013, "post_id": 56566599, "comment_id": 99753014, "body": "Side note: did you see this: <a href=\"https://github.com/titusfortner/webdrivers\" rel=\"nofollow noreferrer\">github.com/titusfortner/webdrivers</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1176, "user_id": 951321, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9eb886c753c17c33ba7fd8061af43e3f?s=128&d=identicon&r=PG", "display_name": "markhorrocks", "link": "https://stackoverflow.com/users/951321/markhorrocks"}, "is_accepted": true, "score": 0, "last_activity_date": 1560526830, "creation_date": 1560526830, "answer_id": 56601422, "question_id": 56566599, "link": "https://stackoverflow.com/questions/56566599/unable-to-install-ruby-gem-selenium-webdriver-on-ubuntu-19-04/56601422#56601422", "title": "Unable to install Ruby gem selenium-webdriver on Ubuntu 19.04", "body": "<p>I had to do this</p>\n\n<pre><code>sudo gem pristine rake\n</code></pre>\n\n<blockquote>\n  <p>Restoring gems to pristine condition... Cached gem for rake-12.3.1 not\n  found, attempting to fetch... Fetching rake-12.3.1.gem Restored\n  rake-12.3.1</p>\n</blockquote>\n"}], "owner": {"reputation": 1176, "user_id": 951321, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9eb886c753c17c33ba7fd8061af43e3f?s=128&d=identicon&r=PG", "display_name": "markhorrocks", "link": "https://stackoverflow.com/users/951321/markhorrocks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 546, "favorite_count": 0, "accepted_answer_id": 56601422, "answer_count": 1, "score": 0, "last_activity_date": 1560526830, "creation_date": 1560356561, "question_id": 56566599, "link": "https://stackoverflow.com/questions/56566599/unable-to-install-ruby-gem-selenium-webdriver-on-ubuntu-19-04", "title": "Unable to install Ruby gem selenium-webdriver on Ubuntu 19.04", "body": "<p>I'm trying to install the gem selenium-webdriver on Ubuntu 19.04 but I keep getting this error:</p>\n\n<pre><code>sudo gem install selenium-webdriver  \n</code></pre>\n\n<blockquote>\n  <p>Building native extensions. This\n  could take a while... ERROR:  Error installing selenium-webdriver:\n    ERROR: Failed to build gem native extension.</p>\n\n<pre><code>current directory: /var/lib/gems/2.5.0/gems/childprocess-1.0.1/ext /usr/bin/ruby2.5 mkrf_conf.rb\n</code></pre>\n  \n  <p>current directory: /var/lib/gems/2.5.0/gems/childprocess-1.0.1/ext\n  /usr/bin/ruby2.5 -rrubygems\n  /usr/share/rubygems-integration/all/gems/rake-12.3.1/exe/rake\n  RUBYARCHDIR\\=/var/lib/gems/2.5.0/extensions/x86_64-linux/2.5.0/childprocess-1.0.1\n  RUBYLIBDIR\\=/var/lib/gems/2.5.0/extensions/x86_64-linux/2.5.0/childprocess-1.0.1\n  /usr/bin/ruby2.5: No such file or directory --\n  /usr/share/rubygems-integration/all/gems/rake-12.3.1/exe/rake\n  (LoadError)</p>\n  \n  <p>rake failed, exit code 1</p>\n  \n  <p>Gem files will remain installed in\n  /var/lib/gems/2.5.0/gems/childprocess-1.0.1 for inspection. Results\n  logged to\n  /var/lib/gems/2.5.0/extensions/x86_64-linux/2.5.0/childprocess-1.0.1/gem_make.out</p>\n</blockquote>\n\n<p>I have tried </p>\n\n<pre><code>sudo gem update --system\nsudo apt install ruby-dev\nsudo apt install build-essential\nsudo apt install gcc\nsudo apt install make\n\n\nruby -v ruby 2.5.5p157 (2019-03-15 revision 67260) [x86_64-linux-gnu]\ngem -v 3.0.3\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1560432143, "post_id": 56580592, "comment_id": 99740786, "body": "Are you sure this actually works? If you are looking for something a bit more &quot;native&quot; take a look at <a href=\"https://www.rubydoc.info/github/rails/arel\" rel=\"nofollow noreferrer\"><code>arel</code></a>, rails underlying query assembler."}, {"owner": {"reputation": 8220, "user_id": 2771889, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c568088e59a0fe4e38016d2707f48fb4?s=128&d=identicon&r=PG&f=1", "display_name": "thisismydesign", "link": "https://stackoverflow.com/users/2771889/thisismydesign"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1560434035, "post_id": 56580592, "comment_id": 99742051, "body": "Yes, this runs on production and performs well."}], "tags": [], "owner": {"reputation": 8220, "user_id": 2771889, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c568088e59a0fe4e38016d2707f48fb4?s=128&d=identicon&r=PG&f=1", "display_name": "thisismydesign", "link": "https://stackoverflow.com/users/2771889/thisismydesign"}, "is_accepted": false, "score": 0, "last_activity_date": 1613596424, "last_edit_date": 1613596424, "creation_date": 1560429166, "answer_id": 56580592, "question_id": 56565472, "link": "https://stackoverflow.com/questions/56565472/rails-how-to-eager-load-limited-records-of-ordered-association-without-n1-quer/56580592#56580592", "title": "Rails: how to eager load limited records of ordered association without N+1 queries", "body": "<p>Edit 2021:</p>\n<p>Since Rails 6.1, <a href=\"https://github.com/rails/rails/pull/37400\" rel=\"nofollow noreferrer\">strict loading</a> might also help with this.</p>\n<p>Original answer:</p>\n<p>In my question, I'm looking for a native way using Rails. However, here's a solution using SQL and virtual attributes:</p>\n<pre><code>class Activity &lt; ApplicationRecord\n  has_one :first_like, class_name: &quot;Like&quot;, primary_key: :first_like_id, foreign_key: :id\n\n  scope :with_first_like, lambda {\n    select(\n      &quot;activities.*,\n      (\n        SELECT like_id as first_like_id\n        FROM likes\n        WHERE activity_id = activities.id\n        ORDER BY created_at ASC\n        LIMIT 1\n      )&quot;\n    )\n  }\nend\n\nActivity.with_first_like.includes(:first_like)\n</code></pre>\n"}], "owner": {"reputation": 8220, "user_id": 2771889, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c568088e59a0fe4e38016d2707f48fb4?s=128&d=identicon&r=PG&f=1", "display_name": "thisismydesign", "link": "https://stackoverflow.com/users/2771889/thisismydesign"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 217, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1613596424, "creation_date": 1560352491, "last_edit_date": 1562842550, "question_id": 56565472, "link": "https://stackoverflow.com/questions/56565472/rails-how-to-eager-load-limited-records-of-ordered-association-without-n1-quer", "title": "Rails: how to eager load limited records of ordered association without N+1 queries", "body": "<p>I know there're many questions about some of these topics, but I didn't find one covering all aspects.</p>\n\n<p>Consider <code>User</code>, <code>Activity</code> and <code>Like</code> models. When I query an activity I would like to eager load the first Like for each activity in the collection <strong>without making N+1 queries and without loading more than necessary</strong> records. My code looks something like this:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :likes, as: :liker\nend\n\nclass Activity &lt; ActiveRecord::Base\n  has_many :likes\n  has_one :first_like, -&gt; { order(created_at: :asc) }, class_name: \"Like\"\nend\n\nclass Like &lt; ActiveRecord::Base\n  belongs_to :activity\n  belongs_to :liker, polymorphic: true\nend\n</code></pre>\n\n<p>I made a comprehensive gist to test different loading strategies and methods: <a href=\"https://gist.github.com/thisismydesign/b08ba0ee3c1862ef87effe0e25386267\" rel=\"nofollow noreferrer\">https://gist.github.com/thisismydesign/b08ba0ee3c1862ef87effe0e25386267</a></p>\n\n<p>Strategies: N+1 queries, left outer join, single extra query</p>\n\n<p>Methods: <code>eager_load</code>, <code>includes</code>, <code>includes &amp; references</code>, <code>includes &amp; preload</code> (these will result in either left outer join or single extra query)</p>\n\n<p>Here're the problems I discovered:</p>\n\n<ul>\n<li>Left outer join doesn't respect <code>order(created_at: :asc)</code> in the association scope nor <code>default_scope { order(created_at: :asc) }</code> (see: <a href=\"https://github.com/rails/rails/issues/6769\" rel=\"nofollow noreferrer\">rails issue</a>). It does respect explicit ordering i.e. <code>.order(\"likes.created_at asc\")</code>.</li>\n<li>Left outer join should nevertheless be avoided because it \"could result in many rows that contain redundant data and it performs poorly at scale\" (see: <a href=\"https://apidock.com/rails/ActiveRecord/Associations/Preloader\" rel=\"nofollow noreferrer\">apidoc</a> <a href=\"https://www.rubydoc.info/docs/rails/ActiveRecord/Associations/Preloader\" rel=\"nofollow noreferrer\">rubydoc</a>, <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html\" rel=\"nofollow noreferrer\">rails api</a>). This is a real issue with lots of data even with indexed searches on both sides.</li>\n<li>Single extra query will create a query without limit, potentially fetching huge amounts of data (see: <a href=\"https://github.com/rails/rails/issues/10621\" rel=\"nofollow noreferrer\">rails issue</a>)</li>\n<li>Adding an explicit <code>limit(1)</code> to the association in hope of constraining the single extra query will break things</li>\n</ul>\n\n<p>The preferred method would be a single extra query that only queries the required records. All in all, I couldn't find a native solution with Rails. Is there any?</p>\n"}, {"tags": ["ruby", "selenium-webdriver"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11636934, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KmAzW2SzDxQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3redwPSWQw8LOh42wDnZNDDdQrF88w/mo/photo.jpg?sz=128", "display_name": "Isitreallyreal", "link": "https://stackoverflow.com/users/11636934/isitreallyreal"}, "is_accepted": false, "score": 0, "last_activity_date": 1560370463, "creation_date": 1560370463, "answer_id": 56569735, "question_id": 56563969, "link": "https://stackoverflow.com/questions/56563969/getting-text-options-from-drop-down-menu-into-an-array-to-iterate-through-in-ord/56569735#56569735", "title": "Getting text options from drop down menu into an array to iterate through in order to navigate to a different page", "body": "<p>Solution:</p>\n\n<pre><code>drop_list = []\n\n        all_options. each do |e|\n           drop_list &lt;&lt; e.text\n        end\n        #puts drop_list\n        drop_list.is_a? Array\n\n\n\n            drop_list.each do |option|\n\n                next if option == \"\"\n                @driver.find_element(id: 'txt_source').find_element(xpath: \"//option[@value='\" + option + \"']\").click\n                @driver.find_element(xpath: '//*[@id=\"search_button\"]/button[2]').click\n                @driver.find_element(xpath: '//*[@id=\"search_button\"]/div/a[3]').click\n                @driver.find_element(xpath: '//*[@id=\"main_action\"]').click\n                @driver.switch_to.default_content\n                wait = Selenium::WebDriver::Wait.new(:timeout =&gt; 60)\n                wait.until{@driver.find_element(:id, 'action_frame')}\n                @driver.switch_to.frame('action_frame')\n                @driver.switch_to.frame('app_display')\n                sleep(10)\n                puts \"Found the frames\"\n                @driver.find_element(xpath: '/html/body/table/tbody/tr[2]/td/table/tbody/tr[2]/td/input').click\n                sleep(10)\n                puts \"Here the fuck I am\"\n                @driver.switch_to.default_content\n                @driver.find_element(:xpath, \"//a[contains(text(),'Search')]\").click\n                sleep(10)\n                puts \"Clicking for search\"\n                wait = Selenium::WebDriver::Wait.new(:timeout =&gt; 10)\n                wait.until{@driver.find_element(:xpath, '//*[@id=\"action_frame\"]')}\n                @driver.switch_to.frame(2)\n                sleep(10)\n\n            end\n</code></pre>\n\n<p>Helps if you know the syntax.</p>\n"}], "owner": {"reputation": 1, "user_id": 11636934, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KmAzW2SzDxQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3redwPSWQw8LOh42wDnZNDDdQrF88w/mo/photo.jpg?sz=128", "display_name": "Isitreallyreal", "link": "https://stackoverflow.com/users/11636934/isitreallyreal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560370463, "creation_date": 1560347847, "last_edit_date": 1560359184, "question_id": 56563969, "link": "https://stackoverflow.com/questions/56563969/getting-text-options-from-drop-down-menu-into-an-array-to-iterate-through-in-ord", "title": "Getting text options from drop down menu into an array to iterate through in order to navigate to a different page", "body": "<p>I would like to collect all of the options text within a drop down menu so I would be able to iterate through that array. For each option text, I would like to click on that option, then navigate to a different page, and be able to return to the original page to continue down the array. </p>\n\n<p>Essentially it would be like </p>\n\n<pre><code>for i in drop_down_menu\n    collect option text\n    append option text to an array\n    for i in array\n         choose i\n         click button that navigates to different page\n         go back to previous page\n         i+1\n</code></pre>\n\n<p>I've been trying to figure out how I could get just the text of the options but nothing is working. I imagine that the text ought to be strings within a list. </p>\n\n<p>I have tried to see if I do have an array with is_instance?, type_of?, is_a? (I read somewhere that the latter 2 are the same but I thought it wouldn't hurt to try!) and that failed...When I view the elements inside they aren't strings either.</p>\n\n<p>This is my code thus far:</p>\n\n<pre><code>   sel = @driver.find_element(:id, 'txt_source') #This is the drop down menu's id\n        all_options = sel.find_elements(:tag_name ,'option') #These are the options\n\n        all_options.each do |option| #iterating through each option with i as option\n            puts \"Value is: \" + option.attribute(\"text\") #Just me checking what I have in the list\n            next if option.text == \"\" #The first option is a blank so I skip it\n            option.click #click the option\n            @driver.find_element(xpath: '//*[@id=\"search_button\"]/button[2]').click # Button \n            @driver.find_element(xpath: '//*[@id=\"search_button\"]/div/a[3]').click # Another button\n            @driver.find_element(xpath: '//*[@id=\"main_action\"]').click # This is the button that navigates to a diff page\n            @driver.switch_to.default_content # Switching iframe\n            wait = Selenium::WebDriver::Wait.new(:timeout =&gt; 60) # Waiting \n            wait.until {@driver.find_element(:id, 'action_frame')} # Finding iframe\n            @driver.switch_to.frame('action_frame') # Outer iframe\n            @driver.switch_to.frame('app_display') # iframe I need\n            sleep(10) # Sleep to help me see what's going on\n            puts \"Found the frames\" # Note\n            @driver.find_element(xpath: '/html/body/table/tbody/tr[2]/td/table/tbody/tr[2]/td/input').click # Button for download\n            sleep(10) # Viewing\n            @driver.switch_to.default_content #Swtich back frames\n            @driver.find_element(xpath: '//li[@id=\"app_sub3\"]/a').click # Button that returns me to previous page. It's a tab.\n            puts \"Clicking for search\" # Note\n            sleep(10) # View\n        end\n</code></pre>\n\n<p>It works until I return to the previous page. Since the page is refreshing, I get the dreaded StaleElement Error. </p>\n\n<p>I expected it to cycle through each option within all_options, navigate to a different page to do some stuff, return back to the original page, and go to the next option to do the same thing.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "factory-bot"], "answers": [{"comments": [{"owner": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "edited": false, "score": 0, "creation_date": 1560348446, "post_id": 56564117, "comment_id": 99707805, "body": "It is saved. Seems that some default ordering is activated or so. I&#39;m checking it right now."}, {"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "reply_to_user": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "edited": false, "score": 1, "creation_date": 1560348786, "post_id": 56564117, "comment_id": 99708033, "body": "Another thing you might try is <code>YourModel.unscope.order(created_at: :desc)</code>. There may be a scope that you can&#39;t see that is affecting the order"}, {"owner": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "edited": false, "score": 0, "creation_date": 1560348999, "post_id": 56564117, "comment_id": 99708175, "body": "Yes exactly, I just did it and that&#39;s it."}], "tags": [], "owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "is_accepted": true, "score": 3, "last_activity_date": 1560349399, "last_edit_date": 1560349399, "creation_date": 1560348257, "answer_id": 56564117, "question_id": 56563841, "link": "https://stackoverflow.com/questions/56563841/rspec-factorygirl-testing-order-by-created-at/56564117#56564117", "title": "Rspec/FactoryGirl testing order by created_at", "body": "<p>It's possible that the timestamp you're providing isn't being saved, and that Rails is using its own internal timestamps as the objects are created. You might try:</p>\n\n<pre><code>5.times do |t|\n  thing = create(:model)\n  thing.update_column(:created_at, Time.current.advance(days: -1*(t+1))\nend\n</code></pre>\n\n<p>This will bypass any validation on the model and you should be saving the correct timestamps, and you should then be able to order them as expected.</p>\n\n<p>You can test by saving results of the query in the variable <code>results</code> and then something like:</p>\n\n<pre><code>expect(results[0].created_at &lt; results[1].created_at).to be true\n</code></pre>\n\n<p>Another thing you might try is <code>YourModel.unscope.where(...).order(created_at: :desc)</code>. There may be a scope that you can't see that is affecting the order.</p>\n"}], "owner": {"reputation": 1099, "user_id": 1967868, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/38a7404c188b85337c9613bc2cc7cd93?s=128&d=identicon&r=PG", "display_name": "zauzaj", "link": "https://stackoverflow.com/users/1967868/zauzaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 1, "accepted_answer_id": 56564117, "answer_count": 1, "score": 2, "last_activity_date": 1560349399, "creation_date": 1560347488, "last_edit_date": 1560347896, "question_id": 56563841, "link": "https://stackoverflow.com/questions/56563841/rspec-factorygirl-testing-order-by-created-at", "title": "Rspec/FactoryGirl testing order by created_at", "body": "<p>I'm trying to test ordering collection by <code>created_at</code>. As it's timestamp with precision to the second, when I create 10 records they have the same <code>created_at</code> value which leads me to inconsistent response. So what I'm doing here is I set <code>created_at</code> field manually like </p>\n\n<pre><code>5.times do |t|\n  create(:model, created_at: Time.current.advance(days: -1*(t+1))\nend\n</code></pre>\n\n<p>and it set <code>created_at</code> just fine but when I do </p>\n\n<p><code>Model.all.order(created_at: :desc)</code> it just ignores it and put in <code>ASC</code> order. </p>\n\n<p>Is there any way to test this order as well? </p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 576, "user_id": 2361564, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/tPogy.png?s=128&g=1", "display_name": "Mark Davies", "link": "https://stackoverflow.com/users/2361564/mark-davies"}, "is_accepted": false, "score": 0, "last_activity_date": 1560353616, "creation_date": 1560353616, "answer_id": 56565809, "question_id": 56563489, "link": "https://stackoverflow.com/questions/56563489/ruby-get-net-http-request-does-not-work-with-authorization-and-accept-when-passe/56565809#56565809", "title": "Ruby GET NET HTTP request does not work with AUTHORIZATION and ACCEPT when passed in a header", "body": "<p>Found the problem.  I was using the credentials from the production environment to get the token then trying to query the test environment API.  In my defence they look very similar (only 3 characters different).  I think I had a case of the code blindness.  </p>\n\n<p>The code I posted does work when I put the correct URL for the environments.  </p>\n\n<p>I also found that I could use this:</p>\n\n<pre><code>uri = URI.parse(\"https://myapi/some_text\")\nhttp = Net::HTTP.new(uri.host, uri.port)\nhttp.use_ssl = true\nrequest = Net::HTTP::Get.new(uri.request_uri)\nrequest[\"Authorization\"] = \"Bearer #{bearer_token}\"\nrequest[\"Accept\"] = \"application/vnd.bluebadge-api.v1+json\"\nresponse = http.request(request)\n</code></pre>\n\n<p>Or using HTTParty like this:</p>\n\n<pre><code>response = HTTParty.get('https://myapi/some_text', {\n  headers: {\"Authorization\" =&gt; \"Bearer #{bearer_token}\", \"Accept\" =&gt; \"application/vnd.bluebadge-api.v1+json\" }\n})\n</code></pre>\n\n<p>I would prefer the format of my orginal code or the HTTparty code because it is easy to see from the code that you're passing headers.  Hopefully this will help others to double check their authorization credentials...</p>\n"}], "owner": {"reputation": 576, "user_id": 2361564, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/tPogy.png?s=128&g=1", "display_name": "Mark Davies", "link": "https://stackoverflow.com/users/2361564/mark-davies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 481, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1560353616, "creation_date": 1560346331, "question_id": 56563489, "link": "https://stackoverflow.com/questions/56563489/ruby-get-net-http-request-does-not-work-with-authorization-and-accept-when-passe", "title": "Ruby GET NET HTTP request does not work with AUTHORIZATION and ACCEPT when passed in a header", "body": "<p>I've been using the code below to call a third party API .  This code works fine (i've changed the url and the credentials but the structure of the code is the same) :  </p>\n\n<pre><code>require 'base64'\nrequire 'httparty'\nrequire 'json'\n\n######################################################################\n# Get the token first\n######################################################################\nconsumer_key    = \"my_key\"\nconsumer_secret = \"my_secret\"\n\ncredentials = Base64.encode64(\"#{consumer_key}:#{consumer_secret}\").gsub(\"\\n\", '')\nurl = \"https://mysite/token\"\nbody = \"grant_type=client_credentials\"\n\nheaders = {\n  \"Authorization\" =&gt; \"Basic #{credentials}\",\n  \"Content-Type\" =&gt; \"application/x-www-form-urlencoded;charset=UTF-8\"\n}\n\nr = HTTParty.post(url, body: body, headers: headers)\nbearer_token = JSON.parse(r.body)['access_token']\n\n######################################################################\n# Use the token in a call as authorisation header\n######################################################################\napi_url = \"https://apisite/the_value_i_am_looking_for_in_the_api\"\n\nurl = URI.parse(api_url)\nreq = Net::HTTP.new(url.host, url.port)\nreq.use_ssl = true\n\n# If we are just passing a key that doesn't need to be in the token format\nheaders = {\n  'Authorization' =&gt; \"Bearer #{bearer_token}\"\n}\n\n# Get the response back (he data is in the response body: resp.body )\nresp = req.get(url, headers)\n</code></pre>\n\n<p>My issue is that the API providers have changed their API so you now need to pass an \"accept\" into the call via the header.  I used POSTMAN to make the call, added the accept to the header and was able to get it working without issue.  So far so good.  </p>\n\n<p>I then changed my ruby code to extend the headers section to include the accept, using the code below:  </p>\n\n<pre><code>headers = {\n  'Authorization' =&gt; \"Bearer #{bearer_token}\",\n  'Accept' =&gt; 'application/vnd.bluebadge-api.v1+json'\n}\n</code></pre>\n\n<p>I've not added an accept to a header before so I may have gotten the syntax wrong.  </p>\n\n<p>However, this returns an unauthorised 401 response code:</p>\n\n<pre><code>#&lt;Net::HTTPUnauthorized 401 Unauthorized readbody=true&gt;\n</code></pre>\n\n<p>I thought I might have the credentials wrong so remove the accept, try again and this changes to a 406 response code:  </p>\n\n<pre><code>#&lt;Net::HTTPNotAcceptable 406 Not Acceptable readbody=true&gt;\n</code></pre>\n\n<p>If I examine the response I get the message I would expect that the accept header is not the supported version.  So I know the credentials are correct (and the fact they match the postman credentials which works):  </p>\n\n<pre><code>\"{\\\"apiVersion\\\": \\\"1\\\",\\\"context\\\": null,\\\"id\\\": null,\\\"method\\\": null,\\\"error\\\": {\\\"code\\\": null,\\\"message\\\": null,\\\"reason\\\": \\\"Accept header version is not a currently supported version.\\\",\\\"errors\\\": null}}\\n\"\n</code></pre>\n\n<p>So I know all my credentials are correct because I've copied them into the postman request which works with no errors.  The value for the accept header is correct because I copied that from a working postman request too.  </p>\n\n<p>I am at a loss for why this wouldn't work.  </p>\n\n<p>I've looked through the NET HTTP library and cant find anything to help me there.  I've seen a couple of posts elsewhere which I've tried and they haven't worked either.  </p>\n\n<p>I appreciate any help in trying to solve this.  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch", "elasticsearch-rails"], "comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1561629072, "post_id": 56560511, "comment_id": 100130981, "body": "Did you followed the elasticsearch migration guide?"}], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 7673374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c0ba6fecc5812530cda488eb7a8c6cc?s=128&d=identicon&r=PG", "display_name": "ihtishaam ahmed", "link": "https://stackoverflow.com/users/7673374/ihtishaam-ahmed"}, "edited": false, "score": 0, "creation_date": 1560338189, "post_id": 56560852, "comment_id": 99701256, "body": "Sorry I put the wrong elasticsearch version in the question - have update to 6.8."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 379, "user_id": 7673374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c0ba6fecc5812530cda488eb7a8c6cc?s=128&d=identicon&r=PG", "display_name": "ihtishaam ahmed", "link": "https://stackoverflow.com/users/7673374/ihtishaam-ahmed"}, "edited": false, "score": 0, "creation_date": 1560341846, "post_id": 56560852, "comment_id": 99703499, "body": "@ihtishaamahmed Your question says 6.8 in the title, 6.8 at the top of the body, and 6.0 at the bottom of the body."}, {"owner": {"reputation": 379, "user_id": 7673374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c0ba6fecc5812530cda488eb7a8c6cc?s=128&d=identicon&r=PG", "display_name": "ihtishaam ahmed", "link": "https://stackoverflow.com/users/7673374/ihtishaam-ahmed"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1560345087, "post_id": 56560852, "comment_id": 99705578, "body": "@TomLord Yes 6.0 is the <code>elasticsearch-rails</code> gem version and elasticsearch is at 6.8."}], "tags": [], "owner": {"reputation": 22, "user_id": 7161828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/524d12b7353c1ff1f0ee9c352a004885?s=128&d=identicon&r=PG&f=1", "display_name": "miche", "link": "https://stackoverflow.com/users/7161828/miche"}, "is_accepted": false, "score": 0, "last_activity_date": 1560338032, "creation_date": 1560338032, "answer_id": 56560852, "question_id": 56560511, "link": "https://stackoverflow.com/questions/56560511/setting-keyword-field-in-elasticsearch/56560852#56560852", "title": "Setting keyword field in elasticsearch", "body": "<p>Please check your elasticsearch version, as the <code>elasticsearch-rails</code> gem versions follow the elasticsearch version number and when you update <code>elasticsearch-rails</code> it may not work well with earlier elastic-search version.</p>\n\n<p><a href=\"https://github.com/elastic/elasticsearch-rails#compatibility\" rel=\"nofollow noreferrer\">check here</a></p>\n"}, {"tags": [], "owner": {"reputation": 379, "user_id": 7673374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c0ba6fecc5812530cda488eb7a8c6cc?s=128&d=identicon&r=PG", "display_name": "ihtishaam ahmed", "link": "https://stackoverflow.com/users/7673374/ihtishaam-ahmed"}, "is_accepted": true, "score": 0, "last_activity_date": 1561629784, "creation_date": 1561629784, "answer_id": 56788653, "question_id": 56560511, "link": "https://stackoverflow.com/questions/56560511/setting-keyword-field-in-elasticsearch/56788653#56788653", "title": "Setting keyword field in elasticsearch", "body": "<p>So the activity model looked like:</p>\n\n<pre><code>class Activity &lt; ApplicationRecord\n  include SearchCommon\n</code></pre>\n\n<p>this is what search_common.rb looked like:</p>\n\n<pre><code>module SearchCommon\n  extend ActiveSupport::Concern\n\n  included do\n    include Elasticsearch::Model\n\n    after_commit on: [:create, :update] do\n      __elasticsearch__.index_document\n    end\n\n    after_commit on: [:destroy] do\n      __elasticsearch__.delete_document\n    end\n\n    index_name [Rails.env, model_name.collection].join('_')\n  end\nend\n</code></pre>\n\n<p>So I just added:</p>\n\n<pre><code>module SearchCommon\n  extend ActiveSupport::Concern\n\n  included do\n    include Elasticsearch::Model\n\n    after_commit on: [:create, :update] do\n      __elasticsearch__.index_document\n    end\n\n    after_commit on: [:destroy] do\n      __elasticsearch__.delete_document\n    end\n\n    mapping do # ADDITION \n     indexes :activity_type, type: 'keyword' # ADDITION\n    end # ADDITION \n\n    index_name [Rails.env, model_name.collection].join('_')\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 7673374, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c0ba6fecc5812530cda488eb7a8c6cc?s=128&d=identicon&r=PG", "display_name": "ihtishaam ahmed", "link": "https://stackoverflow.com/users/7673374/ihtishaam-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "accepted_answer_id": 56788653, "answer_count": 2, "score": 0, "last_activity_date": 1563191664, "creation_date": 1560336987, "last_edit_date": 1563191664, "question_id": 56560511, "link": "https://stackoverflow.com/questions/56560511/setting-keyword-field-in-elasticsearch", "title": "Setting keyword field in elasticsearch", "body": "<p>I upgraded Rails from 4 to 5.2 and have also updated elasticsearch from 2.4 to 6.8.</p>\n\n<p>The following is the error I'm getting.</p>\n\n<pre><code>[400] {\"error\":{\"root_cause\":[{\"type\":\"illegal_argument_exception\",\"reason\":\"Fielddata is disabled on text fields by default. Set fielddata=true on [activity_type] in order to load fielddata in memory by uninverting the inverted index. Note that this can however use significant memory. Alternatively use a keyword field instead.\"}]\n</code></pre>\n\n<p>This is what the request* looks like:</p>\n\n<pre><code>activity_types=&gt;{:terms=&gt;{:field=&gt;\"activity_type\"}}\n</code></pre>\n\n<p>Take a look at the activity_search.rb:</p>\n\n<pre><code>class ActivitySearch &lt; Search::Model\n  include DateSearch\n  apply_date_filters\n  apply_date_aggregations\n\n  filters :activity_types, type: :terms, field: :activity_type, aggregate: false\n\n  aggregates :activity_types, :subject_ids, :levels\n\n  ....\n</code></pre>\n\n<p>Take a look at the model.rb:</p>\n\n<pre><code>module Search\n  class Model\n    def add_aggregation(name, opts={})\n      self._aggregations = _aggregations.deep_merge({name.to_sym =&gt; opts})\n      return if method_defined? \"aggregate_#{name}\" \n      define_method \"aggregate_#{name}\" do |config={}|\n      type = config.delete(:type){ :terms }\n      field = config.delete(:field){ name.to_s.singularize }\n      Search::Aggregation.new(type, field, opts)\n    end\n\n    def response\n      @response ||= Search::Response.new(search.response)\n    end\n\n    def request\n      @request ||= build_request\n    end\n\n    def search\n      @search ||= run_search\n    end\n\n    private\n\n    def run_search\n      search_class.search(request.params)\n    end\n\n    def search_class\n      self.class.name.demodulize.gsub('Search', '').safe_constantize\n    end\n\n    def build_request\n      request = Search::Request.new\n      request.query(*queries)\n      request.filter(*filters)\n      request.aggregate(aggregations)\n      request.sort(*sorts)\n      request\n    end\n  end\n</code></pre>\n\n<p>The activity_search_facade.rb:</p>\n\n<pre><code>class Companies::ActivitySearchFacade &lt; SimpleDelegator\n  delegate :aggregations, to: :response\nend\n</code></pre>\n\n<p>Can someone help solve this error?</p>\n\n<p>Please note the <code>elasticsearch-rails</code> gem version is 6.0.0.</p>\n\n<p>Let me know if you need any more code.</p>\n\n<p>*\nHow do I change this request so that it runs correctly with version 6?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Could it be something around this based on the error I'm getting?</p>\n\n<p><code>curl -X GET 'localhost:9200/development_activities'</code></p>\n\n<pre><code>  \"activity_type\":{\"type\":\"text\" }\n</code></pre>\n\n<p>How do I change this to <code>type: \"keyword\"</code>? ^</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pundit"], "answers": [{"comments": [{"owner": {"reputation": 2184, "user_id": 8352929, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a74f883702be71738a2e3d6f59e466ed?s=128&d=identicon&r=PG&f=1", "display_name": "adesurirey", "link": "https://stackoverflow.com/users/8352929/adesurirey"}, "edited": false, "score": 0, "creation_date": 1560335906, "post_id": 56560097, "comment_id": 99700003, "body": "I like it ! I&#39;ll wait a bit to see if there is other options before acception your answer. Thank you !"}, {"owner": {"reputation": 2184, "user_id": 8352929, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a74f883702be71738a2e3d6f59e466ed?s=128&d=identicon&r=PG&f=1", "display_name": "adesurirey", "link": "https://stackoverflow.com/users/8352929/adesurirey"}, "edited": false, "score": 0, "creation_date": 1560346475, "post_id": 56560097, "comment_id": 99706489, "body": "Well there&#39;s an issue now when I use <code>ItemPolicy#show?</code> for anything else than <code>authorize</code> as it raises an error. It means I can&#39;t use view helpers for example : <code>policy(@item).show?</code> still needs to return a boolean."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 2184, "user_id": 8352929, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a74f883702be71738a2e3d6f59e466ed?s=128&d=identicon&r=PG&f=1", "display_name": "adesurirey", "link": "https://stackoverflow.com/users/8352929/adesurirey"}, "edited": false, "score": 0, "creation_date": 1560347946, "post_id": 56560097, "comment_id": 99707452, "body": "@adesurirey I get your point. After looking into the pundit source code I am thinking about a workaround. What version of Ruby on Rails do you use?"}, {"owner": {"reputation": 2184, "user_id": 8352929, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a74f883702be71738a2e3d6f59e466ed?s=128&d=identicon&r=PG&f=1", "display_name": "adesurirey", "link": "https://stackoverflow.com/users/8352929/adesurirey"}, "edited": false, "score": 0, "creation_date": 1560348149, "post_id": 56560097, "comment_id": 99707603, "body": "I use rails 5.2.2.1"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 2184, "user_id": 8352929, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a74f883702be71738a2e3d6f59e466ed?s=128&d=identicon&r=PG&f=1", "display_name": "adesurirey", "link": "https://stackoverflow.com/users/8352929/adesurirey"}, "edited": false, "score": 0, "creation_date": 1560351894, "post_id": 56560097, "comment_id": 99709915, "body": "@adesurirey I updated my answer to address your comment."}, {"owner": {"reputation": 2184, "user_id": 8352929, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a74f883702be71738a2e3d6f59e466ed?s=128&d=identicon&r=PG&f=1", "display_name": "adesurirey", "link": "https://stackoverflow.com/users/8352929/adesurirey"}, "edited": false, "score": 0, "creation_date": 1560355852, "post_id": 56560097, "comment_id": 99712146, "body": "Thanks @spickermann ! Didn&#39;t know about <code>CurrentAttributes</code>. Makes me think we could do the same with a readable instance variable <code>@specific_response_error_code</code>. Would you say it&#39;s better to use <code>CurrentAttributes</code>?"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 3, "last_activity_date": 1560351858, "last_edit_date": 1560351858, "creation_date": 1560335657, "answer_id": 56560097, "question_id": 56559946, "link": "https://stackoverflow.com/questions/56559946/pundit-how-to-handle-multiple-error-codes-for-one-unauthorized-action/56560097#56560097", "title": "Pundit: how to handle multiple error codes for one unauthorized action?", "body": "<p>Unfortunately <code>Pundit</code> cannot handle different error types out of the box. And it is built to always expect the policy's methods to return <code>true</code> or false <code>false</code>. Therefore raising another custom error and rescueing from that in the controller will not work, because it would break view methods too.</p>\n\n<p>I suggest a workaround to introduce different errors types. Something like this might work:</p>\n\n<pre><code># in the policy\nclass ItemPolicy &lt; ApplicationPolicy\n  def show?\n    return true if record.public?\n    return false unless record.band.members.include?(user)\n\n    if user.premium?\n      true\n    else\n      Current.specific_response_error_code = :payment_required\n      false\n    end\n  end\nend\n\n# in the controller\nclass Api::V1::BaseController &lt; ActionController::API\n  include Pundit\n\n  rescue_from Pundit::NotAuthorizedError, with: :user_not_authorized\n\n  def user_not_authorized(_exception)\n    case Current.specific_response_error_code\n    when :payment_required\n      render json: { error: { message: \"Premium required\" } }, status: :payment_required\n    else\n      render json: { error: { message: \"Access denied\" } }, status: :forbidden\n    end\n  end\nend\n</code></pre>\n\n<p>I would not consider using the global <code>CurrentAttributes</code> a good practice but they are part of Rails and in this case using this global data store avoid overriding pundit internals. </p>\n\n<p>You might want to read the API docs about <a href=\"https://api.rubyonrails.org/classes/ActiveSupport/CurrentAttributes.html\" rel=\"nofollow noreferrer\"><code>CurrentAttributes</code></a>.</p>\n"}], "owner": {"reputation": 2184, "user_id": 8352929, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a74f883702be71738a2e3d6f59e466ed?s=128&d=identicon&r=PG&f=1", "display_name": "adesurirey", "link": "https://stackoverflow.com/users/8352929/adesurirey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 699, "favorite_count": 0, "accepted_answer_id": 56560097, "answer_count": 1, "score": 0, "last_activity_date": 1618352736, "creation_date": 1560335172, "last_edit_date": 1618352736, "question_id": 56559946, "link": "https://stackoverflow.com/questions/56559946/pundit-how-to-handle-multiple-error-codes-for-one-unauthorized-action", "title": "Pundit: how to handle multiple error codes for one unauthorized action?", "body": "<p>I use pundit to handle my API policies, I have an item show that can be forbidden to user in some cases, and in other cases just restricted. By restricted I mean it's forbidden now, but if he pays he could access it then. So I need my API to respond with a specific code (<code>402 Payment Required</code>) so the client can invite the user to pay in order to unlock the show.</p>\n\n<p>This is my current code, it only respond with <code>403</code> when pundit returns false. </p>\n\n<p>Where would it be best to implement a condition to return <code>403</code> OR <code>402</code> in order to be DRY and clean? </p>\n\n<pre><code>class Api::V1::ItemController &lt; Api::V1::BaseController\n  def show\n    @item = Item.find(params[:id])\n    authorize @item\n  end\nend\n\nclass ItemPolicy &lt; ApplicationPolicy\n  def show?\n    return true if record.public?\n\n    # 403 will be generated, that's ok.\n    return false if !record.band.members.include?(user)\n\n    # If that condition is false I want to generate a 402 error at the end, not a 403.\n    user.premium?\n  end\nend\n\nclass Api::V1::BaseController &lt; ActionController::API\n  include Pundit\n\n  rescue_from Pundit::NotAuthorizedError, with: :user_not_authorized\n\n  def user_not_authorized(_exception)\n    # Here I've got the exception with :policy, :record and :query, \n    # also I can access :current_user so I could go for a condition, \n    # but that would include duplicated code from  ItemPolicy#show?.\n    render json: { error: { message: \"Access denied\" } }, status: :forbidden\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "go", "openssl", "base64", "hmac"], "answers": [{"tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 8, "last_activity_date": 1604639587, "last_edit_date": 1604639587, "creation_date": 1560333557, "answer_id": 56559414, "question_id": 56559148, "link": "https://stackoverflow.com/questions/56559148/ruby-vs-go-sha256-hmac-base64-encoded-string-mismatches/56559414#56559414", "title": "Ruby vs. Go / sha256 hmac base64 encoded string mismatches", "body": "<p>The Go code uses the URL safe variant of base64 encoding where your Ruby code uses the normal version. The URL safe version uses <code>-</code> and <code>_</code> instead of <code>+</code> and <code>/</code> so that it is safe for use in URLs. The Ruby version also includes padding (the <code>=</code> at the end).</p>\n<p>You can use the <a href=\"https://ruby-doc.org/stdlib-2.6.3/libdoc/base64/rdoc/Base64.html#method-i-urlsafe_encode64\" rel=\"nofollow noreferrer\">URL safe version in Ruby</a>, and you can also specify no padding to get the same result as Go:</p>\n<pre class=\"lang-ruby prettyprint-override\"><code>Base64.urlsafe_encode64(hmac, false)\n</code></pre>\n"}], "owner": {"reputation": 4429, "user_id": 102133, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/561a3a55352fe6a5343e541a6894b541?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/102133/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 591, "favorite_count": 0, "accepted_answer_id": 56559414, "answer_count": 1, "score": 4, "last_activity_date": 1604639587, "creation_date": 1560332677, "last_edit_date": 1560333066, "question_id": 56559148, "link": "https://stackoverflow.com/questions/56559148/ruby-vs-go-sha256-hmac-base64-encoded-string-mismatches", "title": "Ruby vs. Go / sha256 hmac base64 encoded string mismatches", "body": "<p>playing around with imaginary, I'm attempting to create a ruby client.</p>\n\n<p>For security reasons, I'd need to sign the url</p>\n\n<p>Here is the go provided sample :</p>\n\n<pre><code>package main\n\nimport (\n    \"crypto/hmac\"\n    \"crypto/sha256\"\n    \"encoding/base64\"\n    \"fmt\"\n)\n\nfunc main() {\n  signKey := \"ea79b7fd-287b-4ffe-b941-bf983181783f\"\n  urlPath := \"/resize\"\n  url := \"https%3A%2F%2Fxyz\"\n  urlQuery := \"nocrop=true&amp;type=jpeg&amp;url=\" + url + \"&amp;width=500\"\n\n  h := hmac.New(sha256.New, []byte(signKey))\n  h.Write([]byte(urlPath))\n  h.Write([]byte(urlQuery))\n  buf := h.Sum(nil)\n    fmt.Println(base64.RawURLEncoding.EncodeToString(buf)\n}\n</code></pre>\n\n<p>Converted to ruby, this gives us :</p>\n\n<pre><code>require 'openssl'\nrequire 'base64'\n\nsignKey = \"ea79b7fd-287b-4ffe-b941-bf983181783f\"\nurlPath = \"/resize\"\nurl = \"https%3A%2F%2Fxyz\"\nurlQuery = \"nocrop=true&amp;type=jpeg&amp;url=\" + url + \"&amp;width=500\"\n\ndigest = OpenSSL::Digest.new('sha256')\nhmac = OpenSSL::HMAC.digest(digest, signKey, \"#{urlPath}#{urlQuery}\")\npp Base64.strict_encode64(hmac)\n</code></pre>\n\n<p>We're almost there , but there a slight issue, don't know if it is due to openssl or base64, but for example when I get this with go :</p>\n\n<p><code>wClkWcUvI9ILs7noAr_HtnKpRCeeWBXE1Ne2C99sAco</code></p>\n\n<p>I get the following with the ruby version :</p>\n\n<p><code>wClkWcUvI9ILs7noAr/HtnKpRCeeWBXE1Ne2C99sAco=</code></p>\n\n<p>With ruby, whatever's done, it ends up with a <code>=</code></p>\n\n<p>While go uses underscore, ruby use backslashes (this last one statement might be the result of pure unawareness about specific ruby parts, but let's just detail the issue)</p>\n\n<p>What should be done to get the same output with both versions ? Why do we get a close but not exact result between those languages ?</p>\n\n<p>Thanks a lot for the reply</p>\n"}, {"tags": ["ruby", "prawn"], "comments": [{"owner": {"reputation": 1377, "user_id": 3011280, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/mkyAT.jpg?s=128&g=1", "display_name": "Oshan Wisumperuma", "link": "https://stackoverflow.com/users/3011280/oshan-wisumperuma"}, "edited": false, "score": 0, "creation_date": 1560488488, "post_id": 56557570, "comment_id": 99760368, "body": "what are you really trying to solve? whats the real business requirement?"}, {"owner": {"reputation": 1377, "user_id": 3011280, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/mkyAT.jpg?s=128&g=1", "display_name": "Oshan Wisumperuma", "link": "https://stackoverflow.com/users/3011280/oshan-wisumperuma"}, "edited": false, "score": 0, "creation_date": 1560488553, "post_id": 56557570, "comment_id": 99760383, "body": "you can parse pdf files and extract content, text/images/tables/urls..."}], "answers": [{"tags": [], "owner": {"reputation": 8462, "user_id": 405865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29f04f339715955060858e0e65e1311?s=128&d=identicon&r=PG", "display_name": "fphilipe", "link": "https://stackoverflow.com/users/405865/fphilipe"}, "is_accepted": false, "score": 0, "last_activity_date": 1560347668, "creation_date": 1560347668, "answer_id": 56563908, "question_id": 56557570, "link": "https://stackoverflow.com/questions/56557570/ruby-gem-that-could-generate-prawn-code-from-given-pdf/56563908#56563908", "title": "ruby gem that could generate prawn code from given pdf", "body": "<p>No, there isn't. That's simply too hard of a task.</p>\n"}], "owner": {"reputation": 2036, "user_id": 477403, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/860ef9f1f54410fcfb2eff1b5f111e44?s=128&d=identicon&r=PG", "display_name": "Amol Pujari", "link": "https://stackoverflow.com/users/477403/amol-pujari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 241, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560347668, "creation_date": 1560327328, "question_id": 56557570, "link": "https://stackoverflow.com/questions/56557570/ruby-gem-that-could-generate-prawn-code-from-given-pdf", "title": "ruby gem that could generate prawn code from given pdf", "body": "<p>is there any gem that generates ruby code from a given pdf?</p>\n\n<p>what I am looking for is exactly opposite of prawn, I do not wish to write ruby code to generate pdf using prawn, instead was just curious to know if there is any anti-prawn like gem that would generate prawn ruby code for me given a sample pdf :) </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1560353130, "post_id": 56557291, "comment_id": 99710639, "body": "You&#39;ve had the good fortune of receiving two excellent answers."}, {"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1560353404, "post_id": 56557291, "comment_id": 99710801, "body": "Yup! I&#39;m just lucky enough ;)"}], "answers": [{"comments": [{"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 0, "creation_date": 1560327156, "post_id": 56557422, "comment_id": 99695220, "body": "I know the env ruby is reliable and I should use it. But I am on Arch Linux which has the latest stable version of Ruby. BTW, here&#39;s a screenshot:  <a href=\"https://imgur.com/aGO2v8x\" rel=\"nofollow noreferrer\">imgur.com/aGO2v8x</a>"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 0, "creation_date": 1560328031, "post_id": 56557422, "comment_id": 99695644, "body": "@S.Goswami your question lacks a bit information that what you&#39;re facing is actually caused by explicit private method call attempt. Anyway, I edited my answer, I guess it now answers your question."}, {"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 0, "creation_date": 1560328432, "post_id": 56557422, "comment_id": 99695864, "body": "It looks a bit weird... When you call the <code>Kernel.pp</code> it raises NoMethodError because it&#39;s a private method. When you call <code>pp</code> directly from main Object, it prints something to STDOUT, but then when you call <code>Kernel.pp</code> it works fine, it looks like the private method <code>pp</code> of module Kernel acts like a public method!"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 1, "creation_date": 1560328511, "post_id": 56557422, "comment_id": 99695906, "body": "@S.Goswami read my and Holger&#39;s answers carefully. It&#39;s all there. Long story short, first <code>pp</code> call actually redefines <code>pp</code> method and from now on it&#39;s public instead of private."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 4, "last_activity_date": 1560327973, "last_edit_date": 1560327973, "creation_date": 1560326847, "answer_id": 56557422, "question_id": 56557291, "link": "https://stackoverflow.com/questions/56557291/kernel-pp-raises-nomethoderror-in-ruby/56557422#56557422", "title": "Kernel.pp raises NoMethodError in Ruby", "body": "<p>It's because of <code>pp</code> method is by default a private method of <code>Kernel</code> module. Here's its <a href=\"https://ruby-doc.org/core-2.6.3/Kernel.html#method-i-pp\" rel=\"nofollow noreferrer\">source</a>:</p>\n\n<pre><code>def pp(*objs)\n  require 'pp'\n  pp(*objs)\nend\n</code></pre>\n\n<p>So as we see, it has side effect of loading <code>pp</code> file. And it seems this file redefines <code>pp</code> method, since we don't get stack too deep error from infinite recursion. This is indeed the case. In <a href=\"https://github.com/ruby/ruby/blob/trunk/lib/pp.rb\" rel=\"nofollow noreferrer\"><code>pp</code> file source</a> we have something like this:</p>\n\n<pre><code>module Kernel\n  # Returns a pretty printed object as a string.\n  #\n  # In order to use this method you must first require the PP module:\n  #\n  #   require 'pp'\n  #\n  # See the PP module for more information.\n  def pretty_inspect\n    PP.pp(self, ''.dup)\n  end\n\n  # prints arguments in pretty form.\n  #\n  # pp returns argument(s).\n  def pp(*objs)\n    objs.each {|obj|\n      PP.pp(obj)\n    }\n    objs.size &lt;= 1 ? objs.first : objs\n  end\n  module_function :pp\nend\n</code></pre>\n\n<p>So as we see, it redefines <code>pp</code> method as public Kernel instance method. That's why explicit call of <code>pp</code> before <code>pp</code> was called properly raises an error. And that's why after you call <code>pp</code> properly, the error disappears. </p>\n"}, {"tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": false, "score": 5, "last_activity_date": 1560328095, "creation_date": 1560328095, "answer_id": 56557750, "question_id": 56557291, "link": "https://stackoverflow.com/questions/56557291/kernel-pp-raises-nomethoderror-in-ruby/56557750#56557750", "title": "Kernel.pp raises NoMethodError in Ruby", "body": "<p>The actual <code>pp</code> method is implemented in a module shipped with Ruby which is also called <code>pp</code>. With older Rubies, in order to use the method, you had to always run</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'pp'\npp \"foo\"\n</code></pre>\n\n<p>Newer Rubies ship with a convenience method in <a href=\"https://ruby-doc.org/core-2.6.1/Kernel.html#method-i-pp\" rel=\"noreferrer\"><code>Kernel#pp</code></a> which automatically requires the <code>pp</code> module and runs the method. After the first invocation of this method (and thus with the <code>require</code> of the module), the former method is replaced with the actually intended <code>pp</code> method.</p>\n\n<p>Thus, if you first run the instance method <code>pp</code> (which is available as a private method on all Objects in Ruby which include the <code>Kernel</code> module, i.e. about all Objects), the <code>pp</code> module is loaded and the other methods (including the <code>Kernel.pp</code> class method becomes available.</p>\n"}], "owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 56557422, "answer_count": 2, "score": 2, "last_activity_date": 1560328095, "creation_date": 1560326391, "last_edit_date": 1560327226, "question_id": 56557291, "link": "https://stackoverflow.com/questions/56557291/kernel-pp-raises-nomethoderror-in-ruby", "title": "Kernel.pp raises NoMethodError in Ruby", "body": "<p>I am using Ruby 2.6.3</p>\n\n<p>Ruby ri documents pp as:</p>\n\n<blockquote>\n  <p>prints arguments in pretty form.</p>\n</blockquote>\n\n<p>Anyways, in a file, when I write and run the following code:</p>\n\n<pre><code>#!/usr/bin/ruby -w\n\nKernel.pp 'hi'\npp 'hi'\n</code></pre>\n\n<p>I get NoMethodError.</p>\n\n<p>But how does the following code work?</p>\n\n<pre><code>#!/usr/bin/ruby -w\n\npp 'hi'\nKernel.pp 'hi'\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>\"hi\"\n\"hi\"\n</code></pre>\n\n<p>Here's a <a href=\"https://imgur.com/aGO2v8x\" rel=\"nofollow noreferrer\">screenshot</a></p>\n"}, {"tags": ["ruby", "puppet", "puppet-enterprise"], "comments": [{"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 1, "creation_date": 1560337817, "post_id": 56556871, "comment_id": 99701056, "body": "What is the current contents of this fact?"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1560340578, "post_id": 56556871, "comment_id": 99702666, "body": "Provided that you&#39;re using relatively modern Puppet and Facter, so that structured facts are available to you at all, I would expect that fact to have an array value.  But I&#39;m not sure what exactly you mean by &quot;in <code>init.pp</code> of manifest.&quot;  Facts are available as top-scope variables or (in recent Puppet) from the top-scope <code>$facts</code> hash."}, {"owner": {"reputation": 25, "user_id": 9857237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08b5fc200d0fe0e3e75a66fea590b89?s=128&d=identicon&r=PG&f=1", "display_name": "ksa", "link": "https://stackoverflow.com/users/9857237/ksa"}, "edited": false, "score": 0, "creation_date": 1560342717, "post_id": 56556871, "comment_id": 99704020, "body": "If i hardcode the path am getting the list in manifest .pp file but i need to pass test_dir as arguments to this .rb file"}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1560347801, "post_id": 56556871, "comment_id": 99707364, "body": "Facts do not take arguments, and they are computed before and outside the context of catalog building.  A fact always reports on the same detail(s) of the target machine&#39;s configuration."}, {"owner": {"reputation": 25, "user_id": 9857237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08b5fc200d0fe0e3e75a66fea590b89?s=128&d=identicon&r=PG&f=1", "display_name": "ksa", "link": "https://stackoverflow.com/users/9857237/ksa"}, "edited": false, "score": 0, "creation_date": 1560417018, "post_id": 56556871, "comment_id": 99732054, "body": "John,  my scenario is 1.in Manifest am passing a directory path as input  2.By using the input path i need to list the files in a directory (given path) 3.I need that list to stored in a array variable so that i can use for further process"}], "owner": {"reputation": 25, "user_id": 9857237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08b5fc200d0fe0e3e75a66fea590b89?s=128&d=identicon&r=PG&f=1", "display_name": "ksa", "link": "https://stackoverflow.com/users/9857237/ksa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 471, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1565722306, "creation_date": 1560324872, "last_edit_date": 1565722306, "question_id": 56556871, "link": "https://stackoverflow.com/questions/56556871/how-to-list-all-files-in-a-directory-in-puppet-using-custom-facts", "title": "How to list all files in a directory in puppet using custom facts", "body": "<p>I need to get an array of data where the data which will be the list of file names in  a directory. I need to get the file name list in puppet manifest as an input .</p>\n\n<p>I need clear steps for reading the file names in a directory. I checked but those where all not working.</p>\n\n<pre><code>Facter.add('listdirectory') do\n  confine :kernel =&gt; \"Linux\"\n  setcode do   \n    Facter::Core::Execution.execute('/bin/ls ${test_dir} | /bin/tr  \"\\n\" \" \" | sed \"s/ *$//\"').each_line do |line|\n      lines=line\n    end\n    lines\n  end\nend\n</code></pre>\n\n<p>I expect to get a return value in an array in <code>init.pp</code> of manifest. Any help will be useful!!</p>\n"}, {"tags": ["ruby", "binaryfiles", "binary-data", "pack", "unpack"], "comments": [{"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1560320175, "post_id": 56554977, "comment_id": 99692017, "body": "The <code>P7</code> is the issue, try changing just to lowercase <code>p</code> (no 7). There is some differences when packing/unpacking. When reading the file, you use the <code>P7</code> because it is not null-terminates, but when packing it again, it is. I just used the example without error by packing with <code>P7fffP7fff</code> and unpacking with <code>pfffpfff</code>."}, {"owner": {"reputation": 954, "user_id": 3259651, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xrrkE.jpg?s=128&g=1", "display_name": "Rojj", "link": "https://stackoverflow.com/users/3259651/rojj"}, "reply_to_user": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1560320288, "post_id": 56554977, "comment_id": 99692054, "body": "I get the same error"}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1560320759, "post_id": 56554977, "comment_id": 99692245, "body": "Your example uses an array where each item is already separated, so you will be using lower <code>p</code>. When reading the file, it is going to be a string of bytes without a being separated into array items, so you must specify the fixed length with the uppercase variant <code>P7</code>."}, {"owner": {"reputation": 954, "user_id": 3259651, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xrrkE.jpg?s=128&g=1", "display_name": "Rojj", "link": "https://stackoverflow.com/users/3259651/rojj"}, "reply_to_user": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1560322561, "post_id": 56554977, "comment_id": 99692941, "body": "OK. I will try tonight when I go back home and get access to the file."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1560329258, "post_id": 56554977, "comment_id": 99696297, "body": "@ForeverZer0: Both <code>p</code> and <code>P</code> are the issue."}], "answers": [{"comments": [{"owner": {"reputation": 954, "user_id": 3259651, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xrrkE.jpg?s=128&g=1", "display_name": "Rojj", "link": "https://stackoverflow.com/users/3259651/rojj"}, "edited": false, "score": 0, "creation_date": 1560319005, "post_id": 56555237, "comment_id": 99691631, "body": "Beautiful, but I have a problem. I read the string from the file with <code>File.binread&#39;. This gives me a </code>String` and <code>String</code> does not have the method <code>each_slice</code>. I tried to convert it to <code>bytes</code> or <code>chars</code>, but this gives me arrays and unpack does not work on arrays. Does <code>each_slice</code> work on string for Ruby 2.0.0?"}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "reply_to_user": {"reputation": 954, "user_id": 3259651, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xrrkE.jpg?s=128&g=1", "display_name": "Rojj", "link": "https://stackoverflow.com/users/3259651/rojj"}, "edited": false, "score": 0, "creation_date": 1560319477, "post_id": 56555237, "comment_id": 99691805, "body": "My apologies, I corrected answer to use <code>String#scan</code> instead of <code>each_slice</code>. You could alternatively use <code>str.chars.each_slice</code>, but <code>scan</code> is a cleaner approach IMO."}, {"owner": {"reputation": 954, "user_id": 3259651, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xrrkE.jpg?s=128&g=1", "display_name": "Rojj", "link": "https://stackoverflow.com/users/3259651/rojj"}, "edited": false, "score": 1, "creation_date": 1560320071, "post_id": 56555237, "comment_id": 99691977, "body": "I get <code>no associated pointer</code>. I have added an example so we look at exactly the same thing."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1560323413, "post_id": 56555237, "comment_id": 99693296, "body": "<code>p</code> / <code>P</code> are not the correct directive here. Use <code>a</code> as in <code>a6x</code> (x to ignore tab character) as <code>P7</code> means seven pointers to Ruby strings."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1560324277, "post_id": 56555237, "comment_id": 99693723, "body": "A lowercase <code>p</code> means that, but for uppercase <code>P</code>, it indicates the size of the struct. Demonstrated easily with <code>[&#39;stack&#39;, &#39;overflow&#39;].pack(&#39;pp&#39;).unpack(&#39;P5P8&#39;)</code>. It does not try to unpack 13 pointers."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1560327935, "post_id": 56555237, "comment_id": 99695601, "body": "The problem is that <code>pack(&#39;pfff&#39;)</code> does not create a 19-byte binary string."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1560330983, "post_id": 56555237, "comment_id": 99697275, "body": "There would be an added null byte, but OP question is regarding reading from a file, the entire lowercase <code>p</code> is just some explanation stuff with his example. &#39;a&#39; would be better option if he is writing it back to avoid any inclusion of a null-terminator."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1560332338, "post_id": 56555237, "comment_id": 99698073, "body": "@ForeverZer0: All I&#39;m saying is that <code>str.scan(&#47;.{19}&#47;).map { |item| item.unpack(&#39;P7fff&#39;) }</code> is wrong and won&#39;t work with OP&#39;s data. I&#39;d be happy to revert the downvote if you change the pattern. Is there any particular reason why you downvoted my answer?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1560332523, "post_id": 56555237, "comment_id": 99698179, "body": "Finally, it might not be a good idea to read the large file in memory and create a large array with <code>scan</code> if it&#39;s possible to process the data sequentially."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1560335079, "post_id": 56555237, "comment_id": 99699550, "body": "I agree, slurping the entire file is bad practice, can edit later, mobile ATM. I truly didn&#39;t downvote you. I only ever downvote anybody if it is objectively incorrect, never just for style and/or efficiency etc."}], "tags": [], "owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "is_accepted": false, "score": 0, "last_activity_date": 1560321437, "last_edit_date": 1560321437, "creation_date": 1560317534, "answer_id": 56555237, "question_id": 56554977, "link": "https://stackoverflow.com/questions/56554977/ruby-unpack-array-with-mixed-types/56555237#56555237", "title": "Ruby - Unpack array with mixed types", "body": "<p>When dealing with mixed formats that repeat, and are of a known fixed size, it is often easier to split the string first, </p>\n\n<p>Quick example would be:</p>\n\n<pre><code>binary.scan(/.{LENGTH_OF_DATA}/).map { |item| item.unpack(FORMAT) }\n</code></pre>\n\n<p>Considering your above example, take the length of the string including the tab character (in bytes), plus the size of a 3 floats. If your strings are literally <code>'ABCDEF\\t'</code>, you would use a size of 19 (7 for the string, 12 for the 3 floats).</p>\n\n<p>Your final product would look like this:</p>\n\n<pre><code>str.scan(/.{19}/).map { |item| item.unpack('P7fff') }\n</code></pre>\n\n<p>Per example:</p>\n\n<pre><code>irb(main):001:0&gt; ary = [\"ABCDEF\\t\", 3.4, 5.6, 9.1, \"FEDCBA\\t\", 2.5, 8.9, 3.1]\n=&gt; [\"ABCDEF\\t\", 3.4, 5.6, 9.1, \"FEDCBA\\t\", 2.5, 8.9, 3.1]\n\nirb(main):002:0&gt; s = ary.pack('pfffpfff')\n=&gt; \"\\xE8Pd\\xE4eU\\x00\\x00\\x9A\\x99Y@33\\xB3@\\x9A\\x99\\x11A\\x98Pd\\xE4eU\\x00\\x00\\x00\\x00 @ff\\x0EAffF@\"\n\nirb(main):003:0&gt; s.unpack('pfffpfff')\n=&gt; [\"ABCDEF\\t\", 3.4000000953674316, 5.599999904632568, 9.100000381469727, \"FEDCBA\\t\", 2.5, 8.899999618530273, 3.0999999046325684]\n\n</code></pre>\n\n<p>The minor differences in precision is unavoidable, but do not worry about it, as it comes from the difference of a 32-bit float and 64-bit double (what Ruby used internally), and the precision difference will be less than is significant for a 32-bit float.</p>\n"}, {"comments": [{"owner": {"reputation": 954, "user_id": 3259651, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xrrkE.jpg?s=128&g=1", "display_name": "Rojj", "link": "https://stackoverflow.com/users/3259651/rojj"}, "edited": false, "score": 0, "creation_date": 1560358833, "post_id": 56557842, "comment_id": 99713503, "body": "<code>A7fff</code> did the trick. Even without writing to file I can unpack it with <code>s.scan(&#47;.{19}&#47;).map{ |item| item.unpack(&#39;A7fff&#39;) }</code>"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 954, "user_id": 3259651, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xrrkE.jpg?s=128&g=1", "display_name": "Rojj", "link": "https://stackoverflow.com/users/3259651/rojj"}, "edited": false, "score": 1, "creation_date": 1560359594, "post_id": 56557842, "comment_id": 99713867, "body": "@Rojj: Sure, you don&#39;t have to write anything if you already have your data. It was just to have a common binary data to debug and test. <code>scan</code> also works, but it needs to have the whole file in memory, which might not be suitable if you work with large files."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 954, "user_id": 3259651, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xrrkE.jpg?s=128&g=1", "display_name": "Rojj", "link": "https://stackoverflow.com/users/3259651/rojj"}, "edited": false, "score": 1, "creation_date": 1560359921, "post_id": 56557842, "comment_id": 99713999, "body": "@Rojj: If you don&#39;t care about the last character of the string, you could also use <code>&#39;A6xfff&#39;</code>, as in <code>[&quot;ABCDEF\\t&quot;, 3.4, 5.6, 9.1].pack(&#39;A7fff&#39;).unpack(&#39;A6xfff&#39;)</code>"}, {"owner": {"reputation": 954, "user_id": 3259651, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xrrkE.jpg?s=128&g=1", "display_name": "Rojj", "link": "https://stackoverflow.com/users/3259651/rojj"}, "edited": false, "score": 0, "creation_date": 1560359990, "post_id": 56557842, "comment_id": 99714029, "body": "Oh that&#39;s great! Thanks"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 2, "last_activity_date": 1560360079, "last_edit_date": 1560360079, "creation_date": 1560328383, "answer_id": 56557842, "question_id": 56554977, "link": "https://stackoverflow.com/questions/56554977/ruby-unpack-array-with-mixed-types/56557842#56557842", "title": "Ruby - Unpack array with mixed types", "body": "<p>You could read the file in small chunks of 19 bytes and use <code>'A7fff'</code> to pack and unpack. Do not use pointers to structure (<code>'p'</code> and <code>'P'</code>), as they need more than 19 bytes to encode your information.\nYou could also use <code>'A6xfff'</code> to ignore the 7th byte and get a string with 6 chars.</p>\n\n<p>Here's an example, which is similar to the documentation of <a href=\"https://ruby-doc.org/core-2.5.0/IO.html#method-i-read\" rel=\"nofollow noreferrer\"><code>IO.read</code></a>:</p>\n\n<pre><code>data = [[\"ABCDEF\\t\", 3.4, 5.6, 9.1], \n        [\"FEDCBA\\t\", 2.5, 8.9, 3.1]]\nbinary_file = 'data.bin'\nchunk_size = 19\npattern = 'A7fff'\n\nFile.open(binary_file, 'wb') do |o|\n  data.each do |row|\n    o.write row.pack(pattern)\n  end\nend\n\nraise \"Something went wrong. Please check data, pattern and chunk_size.\" unless File.size(binary_file) == data.length * chunk_size\n\nFile.open(binary_file, 'rb') do |f|\n  while record = f.read(chunk_size)\n    puts '%s %g %g %g' % record.unpack(pattern)\n  end\nend\n# =&gt;\n#    ABCDEF   3.4 5.6 9.1\n#    FEDCBA   2.5 8.9 3.1\n</code></pre>\n\n<p>You could use a multiple of <code>19</code> to speed up the process if your file is large.</p>\n"}], "owner": {"reputation": 954, "user_id": 3259651, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xrrkE.jpg?s=128&g=1", "display_name": "Rojj", "link": "https://stackoverflow.com/users/3259651/rojj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 0, "accepted_answer_id": 56557842, "answer_count": 2, "score": 2, "last_activity_date": 1560360079, "creation_date": 1560315942, "last_edit_date": 1560320049, "question_id": 56554977, "link": "https://stackoverflow.com/questions/56554977/ruby-unpack-array-with-mixed-types", "title": "Ruby - Unpack array with mixed types", "body": "<p>I am trying to use <code>unpack</code> to decode a binary file. The binary file has the following structure:</p>\n\n<pre><code>ABCDEF\\tFFFABCDEF\\tFFFF....\n</code></pre>\n\n<p>where</p>\n\n<pre><code>ABCDEF -&gt; String of fixed length\n\\t -&gt; tab character\nFFF -&gt; 3 Floats\n.... -&gt; repeat thousands of times\n</code></pre>\n\n<p>I know how to do it when types are all the same or with only numbers and fixed length arrays, but I am struggling in this situation. For example, if I had a list of floats I would do</p>\n\n<pre><code>s.unpack('F*')\n</code></pre>\n\n<p>Or if I had integers and floats like</p>\n\n<pre><code>[1, 3.4, 5.2, 4, 2.3, 7.8]\n</code></pre>\n\n<p>I would do</p>\n\n<pre><code>s.unpack('CF2CF2')\n</code></pre>\n\n<p>But in this case I am a bit lost. I was hoping to use a format string such `(CF2)*' with brackets, but it does not work.</p>\n\n<p><strong>I need to use Ruby 2.0.0-p247 if that matters</strong></p>\n\n<p><strong>Example</strong></p>\n\n<pre><code>ary = [\"ABCDEF\\t\", 3.4, 5.6, 9.1, \"FEDCBA\\t\", 2.5, 8.9, 3.1]\ns = ary.pack('P7fffP7fff')\n</code></pre>\n\n<p>then</p>\n\n<pre><code>s.scan(/.{19}/)\n[\"\\xA8lf\\xF9\\xD4\\x7F\\x00\\x00\\x9A\\x99Y@33\\xB3@\\x9A\\x99\\x11\", \"A\\x80lf\\xF9\\xD4\\x7F\\x00\\x00\\x00\\x00 @ff\\x0EAff\"]\n</code></pre>\n\n<p>Finally</p>\n\n<pre><code>s.scan(/.{19}/).map{ |item| item.unpack('P7fff') }\nError: #&lt;ArgumentError: no associated pointer&gt;\n&lt;main&gt;:in `unpack'\n&lt;main&gt;:in `block in &lt;main&gt;'\n&lt;main&gt;:in `map'\n&lt;main&gt;:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 2, "last_activity_date": 1560318151, "creation_date": 1560318151, "answer_id": 56555331, "question_id": 56554919, "link": "https://stackoverflow.com/questions/56554919/check-if-parent-record-has-any-child-records-with-start-date-in-the-future-then/56555331#56555331", "title": "check if parent record has any child records with start_date in the future then stop update rails", "body": "<p>I think it would be reasonable to use a custom validation method which you can read about in the <a href=\"https://guides.rubyonrails.org/active_record_validations.html#custom-methods\" rel=\"nofollow noreferrer\">guide</a>. It might look something like this:</p>\n\n<pre><code>class Item &lt; ApplicationRecord\n  has_many :reservations\n  before_save :check_for_reservations\n\n  validate :okay_to_archive\n\n  def okay_to_archive\n    if !item.active &amp;&amp; reservations.where(\"start_date &gt;= ?\", Date.today).any? \n      errors.add(:active, \"can't be set to false when there are future reservations\")\n    end\n  end\n\nend\n</code></pre>\n\n<p><code>!item.active</code> checks to see if the <code>active</code> attribute is not <code>true</code> (either <code>nil</code> or <code>false</code>). And <code>reservations.where(\"start_date &gt;= ?\", Date.today).any?</code> checks to see if there are any associated <code>reservations</code> that have a <code>start_date</code> that comes after today. So, together: </p>\n\n<pre><code>if !item.active &amp;&amp; reservations.where(\"start_date &gt;= ?\", Date.today).any? \n  ...\nend\n</code></pre>\n\n<p>they check to see if the <code>item</code> is inactive with future reservations. If so, then an error is written to the <code>errors</code>: </p>\n\n<pre><code>errors.add(:active, \"can't be set to false when there are future reservations\")\n</code></pre>\n\n<p>and when you try to do <code>@item.save</code>, you'll get a validation error.</p>\n\n<pre><code>def archive\n  @item = Item.find(params[:id])\n  @item.active = false\n\n  if @item.save\n    flash[:notice] = \"Item been archived...\"\n  else\n    flash[:alert] = \"Something went wrong...\"\n  end\n  redirect_back(fallback_location: request.referer)\nend\n</code></pre>\n\n<p>Code is not tested, but should be close.</p>\n"}], "owner": {"reputation": 620, "user_id": 7974603, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4a562a0f406264652b195171ad0059?s=128&d=identicon&r=PG", "display_name": "Amer Bearat", "link": "https://stackoverflow.com/users/7974603/amer-bearat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 56555331, "answer_count": 1, "score": 1, "last_activity_date": 1560318151, "creation_date": 1560315504, "last_edit_date": 1560316072, "question_id": 56554919, "link": "https://stackoverflow.com/questions/56554919/check-if-parent-record-has-any-child-records-with-start-date-in-the-future-then", "title": "check if parent record has any child records with start_date in the future then stop update rails", "body": "<p>I have table called items and i have a method that called archive in the items_controller.rb, if the method gets called it sets the active field on the item to false.  the issue is i have another table called reservations and a field on it called start_date so i want before it update the  active field on item to false, i want to check if their is any reservations with start_date field in the future. if there is then do not update the active field on item and give a user an error message.   </p>\n\n<p>here is item.rb</p>\n\n<pre><code>class Item &lt; ApplicationRecord\n has_many :reservations\n before_save :check_for_reservations\n def check_for_reservations\n   if reservations.count &gt; 0\n     reservations.each do |reservation|\n       if reservation.start_date &gt; Date.today\n       return false\n      end\n     end\n   end\n end\nend\n</code></pre>\n\n<p>here is items.controller.rb  </p>\n\n<pre><code> def archive\n @item = Item.find(params[:id])\n @item.active = false\n\n if @item.save\n    flash[:notice] = \"Item been archived...\"\n else\n    flash[:alert] = \"Something went wrong...\"\n end\n   redirect_back(fallback_location: request.referer)\n end\n</code></pre>\n\n<p>is not working its updating the item record the active equal = false</p>\n"}, {"tags": ["ruby", "nokogiri"], "comments": [{"owner": {"reputation": 3002, "user_id": 976498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CSZVp.jpg?s=128&g=1", "display_name": "LHH", "link": "https://stackoverflow.com/users/976498/lhh"}, "edited": false, "score": 2, "creation_date": 1560317454, "post_id": 56554842, "comment_id": 99691149, "body": "i guess li.css(&quot;a&quot;)[0] is nil of any value and that&#39;s why it is giving error."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1560644827, "post_id": 56554842, "comment_id": 99804647, "body": "Welcome to SO! Don&#39;t create <code>Player</code> unless <code>url.nil?</code> is false. It&#39;s better to only store good values than to store anything and later have to clean up the mess to avoid further problems. I&#39;d use <code>select</code> or <code>reject</code> checking for <code>nil</code> instead of <code>each</code> so then only populated <code>url</code> values are looped over."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1560644973, "post_id": 56554842, "comment_id": 99804661, "body": "Note that when asking about a problem with your code, we expect to see enough information and code so we can duplicate/test the problem. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the links at the bottom of that page, along with &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">mcve</a>&quot;. Following those guides will help us help you. Failing to do so wastes our time as we load the page, look at the HTML to compare your accessor to what&#39;s actually there, write test code for a solution, etc. That&#39;ll turn off a lot of potential helpers who&#39;ll instead work on another problem."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10467415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6040cdd8cb1a81f6549d12a04dfdd05?s=128&d=identicon&r=PG&f=1", "display_name": "R. Rojas", "link": "https://stackoverflow.com/users/10467415/r-rojas"}, "edited": false, "score": 0, "creation_date": 1560316475, "post_id": 56555014, "comment_id": 99690883, "body": "just tried giving that a tried and received this error: undefined method `compact!&#39; for #&lt;Nokogiri::XML::NodeSet:0x00007fa77310c0f8&gt; (NoMethodError). i get the same thing with .compact as well"}, {"owner": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "reply_to_user": {"reputation": 23, "user_id": 10467415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6040cdd8cb1a81f6549d12a04dfdd05?s=128&d=identicon&r=PG&f=1", "display_name": "R. Rojas", "link": "https://stackoverflow.com/users/10467415/r-rojas"}, "edited": false, "score": 0, "creation_date": 1560316758, "post_id": 56555014, "comment_id": 99690956, "body": "Please provide output of <code>name_lis</code>"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1560316936, "post_id": 56555014, "comment_id": 99691006, "body": "If <code>name_lis</code> is a <code>Nokogiri::XML::NodeSet</code> instance, try <code>to_a</code> to convert to an array before passing to <code>compact</code>."}, {"owner": {"reputation": 23, "user_id": 10467415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6040cdd8cb1a81f6549d12a04dfdd05?s=128&d=identicon&r=PG&f=1", "display_name": "R. Rojas", "link": "https://stackoverflow.com/users/10467415/r-rojas"}, "edited": false, "score": 0, "creation_date": 1560317442, "post_id": 56555014, "comment_id": 99691139, "body": "@Rhunal: [#&lt;Nokogiri::XML::Element:0x3fff510ed3b0 name=&quot;li&quot; children=[#&lt;Nokogiri::XML::Element:0x3fff510ed144 name=&quot;strong&quot; children=[#&lt;Nokogiri::XML::Element:0x3fff510ece88 name=&quot;a&quot; attributes=[#&lt;Nokogiri::XML::Attr:0x3fff510ecdfc name=&quot;href&quot; value=&quot;<a href=\"http://www.nba.comhistory/legends/profiles/kareem-abdul-jabbar&quot;&gt;]\" rel=\"nofollow noreferrer\">nba.comhistory/legends/profiles/kareem-abdul-jabbar&quot;&gt;&zwnj;&#8203;]</a> children=[#&lt;Nokogiri::XML::Text:0x3fff510ec6cc &quot;Kareem Abdul-Jabbar&quot;&gt;]&gt;]&gt;]&gt;,Nokogiri::XML::Element:0x3fff504899fc name=&quot;strong&quot; children=[#&lt;Nokogiri::XML::Text:0x3fff50489790 &quot;Shaquille O&#39;Neal&quot;&gt;]&gt;]&gt;&gt;]"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1560644589, "post_id": 56555014, "comment_id": 99804617, "body": "I&#39;d counter than using <code>compact</code> is a knee-jerk reaction to having inserted bad values which wasted CPU and memory, though those might be small in a single iteration of the code, they add up when code has to run for days."}], "tags": [], "owner": {"reputation": 367, "user_id": 7852372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ukz2Q.jpg?s=128&g=1", "display_name": "rhunal", "link": "https://stackoverflow.com/users/7852372/rhunal"}, "is_accepted": false, "score": 0, "last_activity_date": 1560644497, "last_edit_date": 1560644497, "creation_date": 1560316187, "answer_id": 56555014, "question_id": 56554842, "link": "https://stackoverflow.com/questions/56554842/how-to-avoid-iterating-over-nil-value/56555014#56555014", "title": "How to avoid iterating over Nil value", "body": "<p>You should use the <code>compact</code> method on Array.</p>\n\n<p>It is a useful method if you need to remove nil values from an array.</p>\n\n<p>For example:</p>\n\n<pre><code>[1, nil, 2, nil].compact =&gt; [1, 2]\n</code></pre>\n\n<p>In your case:</p>\n\n<pre><code>name_lis.compact.each do |li|\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1560325615, "post_id": 56556246, "comment_id": 99694428, "body": "Or: <code>li.at(&quot;a&quot;)[:href] rescue nil</code>"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1560333189, "post_id": 56556246, "comment_id": 99698557, "body": "This would hide other bugs, for instance if <code>li</code> is nil or any other exception which might occur."}], "tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": false, "score": 0, "last_activity_date": 1560322458, "creation_date": 1560322458, "answer_id": 56556246, "question_id": 56554842, "link": "https://stackoverflow.com/questions/56554842/how-to-avoid-iterating-over-nil-value/56556246#56556246", "title": "How to avoid iterating over Nil value", "body": "<p>If you run at least Ruby 2.3, do a</p>\n\n<pre><code>url = li.css(\"a\")[0]&amp;.attr(\"href\")\n</code></pre>\n\n<p>This sets url to nil, if the part to the left of <code>&amp;.</code> is nil, and applies <code>attr</code> otherwise.</p>\n"}], "owner": {"reputation": 23, "user_id": 10467415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6040cdd8cb1a81f6549d12a04dfdd05?s=128&d=identicon&r=PG&f=1", "display_name": "R. Rojas", "link": "https://stackoverflow.com/users/10467415/r-rojas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1560644497, "creation_date": 1560314920, "last_edit_date": 1560644404, "question_id": 56554842, "link": "https://stackoverflow.com/questions/56554842/how-to-avoid-iterating-over-nil-value", "title": "How to avoid iterating over Nil value", "body": "<p>I'm trying to scrape a website's content to instantiate objects out of the data, and I'm running into a problem with a dead link on the page I'm scraping. I want to figure out how I can simply not iterate over that link and avoid scraping it altogether.</p>\n\n<p>I tried using this, but it didn't work:</p>\n\n<pre><code>name = li.css(\"strong a\").text.strip unless li.nil?\nurl = li.css(\"a\")[0].attr(\"href\") unless li.nil?\nPlayer.new(name,url)\n\nclass HomepageScraper\n  BASE_URL = \"https://www.nba.com/history/nba-at-50/top-50-players\"\n\n  def self.scrape_players\n    page = open(BASE_URL)\n    parsed_HTML = Nokogiri::HTML(page)\n    name_lis = parsed_HTML.css(\"div.field-item li\")\n    name_lis.each do |li|\n      name = li.css(\"strong a\").text.strip\n      url = li.css(\"a\")[0].attr(\"href\") \n      Player.new(name,url)\n    end\n  end\nend\n</code></pre>\n\n<p>I expected example output to be:</p>\n\n<pre><code>@name = \"Shaquille o neal\", @url = \"www.nba...\"\n</code></pre>\n\n<p>But received:</p>\n\n<pre><code>@name = \"Shaquille o neal\", @url = nil\n</code></pre>\n\n<p>The error message is:</p>\n\n<pre><code>undefined method `attr' for nil:NilClass (NoMethodError)\n</code></pre>\n"}, {"tags": ["ruby", "tk", "nix"], "comments": [{"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1560313015, "post_id": 56554361, "comment_id": 99690153, "body": "I can&#39;t speak for NixOS specifically, but I believe Ruby/tk is no longer maintained (for a few years now). The GUI situation with Ruby is appalling, without much positive outlook. There is some decent bindings for Qt4 which are probably the most widely used when GUI is needed, but even they are getting outdated, being built on top of a older technology. Sadly, trying to implement a modern GUI with Ruby is a form of self-masochism."}, {"owner": {"reputation": 12230, "user_id": 1479269, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c8d6345c6e01f0f4ce8acf0792d7769c?s=128&d=identicon&r=PG", "display_name": "dmvianna", "link": "https://stackoverflow.com/users/1479269/dmvianna"}, "reply_to_user": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1560314034, "post_id": 56554361, "comment_id": 99690357, "body": "@ForeverZer0 I&#39;m using ruby-2.3 as per the course instructions"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1560323517, "post_id": 56554361, "comment_id": 99693344, "body": "You could try to open an issue at <a href=\"https://github.com/ruby/tk\" rel=\"nofollow noreferrer\">github.com/ruby/tk</a> , but considering that the last commit is more than 1 year old, I fear too that it is not maintained anymore. My impression is that ActiveState is still supporting it, and since they claim to support Linux too, this might be an option. Of course it means that you would also have to install the ActiveState port of Ruby and Tcl. You might want to ask first at <a href=\"http://code.activestate.com/lists/ruby-talk/\" rel=\"nofollow noreferrer\">code.activestate.com/lists/ruby-talk</a> whether this is a feasible approach."}], "answers": [{"tags": [], "owner": {"reputation": 12230, "user_id": 1479269, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c8d6345c6e01f0f4ce8acf0792d7769c?s=128&d=identicon&r=PG", "display_name": "dmvianna", "link": "https://stackoverflow.com/users/1479269/dmvianna"}, "is_accepted": false, "score": 1, "last_activity_date": 1560340609, "creation_date": 1560340609, "answer_id": 56561701, "question_id": 56554361, "link": "https://stackoverflow.com/questions/56554361/ruby-with-tk-support/56561701#56561701", "title": "ruby with tk support", "body": "<p>I decided to just build a derivation and install it. This works!</p>\n\n<pre><code>{ pkgs ? import &lt;nixpkgs&gt; {} }:\n\nwith pkgs;\n\nlet\n  myRuby = ruby_2_3.overrideAttrs (old: {\n    configureFlags = [\n      \"--with-tcl-dir=${tcl}\"\n      \"--with-tk-dir=${tk}\"\n      \"--enable-tcl-thread\"\n      \"--enable-pthread\"\n    ];\n    buildInputs = [\n      ruby_2_3\n      zlib\n      gdbm\n      libffi\n      openssl\n      readline\n    ];\n    propagatedBuildInputs = [\n      tk\n      tcl\n    ];\n\n  });\n\nin\n  myRuby\n</code></pre>\n"}], "owner": {"reputation": 12230, "user_id": 1479269, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c8d6345c6e01f0f4ce8acf0792d7769c?s=128&d=identicon&r=PG", "display_name": "dmvianna", "link": "https://stackoverflow.com/users/1479269/dmvianna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1560340609, "creation_date": 1560310779, "last_edit_date": 1560338792, "question_id": 56554361, "link": "https://stackoverflow.com/questions/56554361/ruby-with-tk-support", "title": "ruby with tk support", "body": "<p>I am following a <a href=\"https://www.coursera.org/learn/programming-languages-part-c\" rel=\"nofollow noreferrer\">programming languages course</a> that requires <code>ruby</code> with <code>tk</code> support. My laptop runs <code>nixos</code>. Simply adding tk and ruby to my system packages doesn't cut it. Creating a nix-shell with both doesn't either. How would I construct a derivation where ruby is compiled with tk support?</p>\n\n<p><code>shell.nix</code></p>\n\n<pre><code>{ pkgs ? import &lt;nixpkgs&gt; {} }:\n\nwith pkgs;\n\nlet\n  myRuby = ruby_2_3.overrideAttrs (old: {\n    configureFlags = [\n      \"--with-tcl-dir=${tcl}\"\n      \"--with-tk-dir=${tk}\"\n      \"--enable-tcl-thread\"\n      \"--enable-pthread\"\n    ];\n    buildInputs = [\n      ruby_2_3\n      zlib\n      gdbm\n      libffi\n      openssl\n      readline\n    ];\n    propagatedBuildInputs = [\n      tk\n      tcl\n    ];\n\n  });\n\nin\n  mkShell {\n    buildInputs = [ myRuby tk tcl ];\n  }\n</code></pre>\n\n<p><code>test.rb</code></p>\n\n<pre><code>#!/usr/bin/env ruby\n require 'tk'\n root = TkRoot.new do\n   title \"Ruby/Tk Test\"\n end\n Tk.mainloop\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "rubygems", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8082355"}, "edited": false, "score": 0, "creation_date": 1560309920, "post_id": 56554245, "comment_id": 99689567, "body": "This will work even when the form gets successfully submitted or not ...so I think o have to add some conditions ..and I don&#39;t know about that"}, {"owner": {"reputation": 1175, "user_id": 2861567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRa02.jpg?s=128&g=1", "display_name": "quyetdc", "link": "https://stackoverflow.com/users/2861567/quyetdc"}, "edited": false, "score": 0, "creation_date": 1560309989, "post_id": 56554245, "comment_id": 99689582, "body": "how about setting <code>@error</code> in action. Edit my answer"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8082355"}, "edited": false, "score": 0, "creation_date": 1560310036, "post_id": 56554245, "comment_id": 99689597, "body": "Setting...? What&#39;s that? Please let me know"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8082355"}, "edited": false, "score": 0, "creation_date": 1560310136, "post_id": 56554245, "comment_id": 99689619, "body": "Can you please provide me a sample code I am a really beginner"}, {"owner": {"reputation": 1175, "user_id": 2861567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRa02.jpg?s=128&g=1", "display_name": "quyetdc", "link": "https://stackoverflow.com/users/2861567/quyetdc"}, "edited": false, "score": 0, "creation_date": 1560310652, "post_id": 56554245, "comment_id": 99689748, "body": "Np, I hope u can make it works also, and, don&#39;t forget to mark my answer as solution :)"}], "tags": [], "owner": {"reputation": 1175, "user_id": 2861567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRa02.jpg?s=128&g=1", "display_name": "quyetdc", "link": "https://stackoverflow.com/users/2861567/quyetdc"}, "is_accepted": true, "score": 0, "last_activity_date": 1560310407, "last_edit_date": 1560310407, "creation_date": 1560309574, "answer_id": 56554245, "question_id": 56554183, "link": "https://stackoverflow.com/questions/56554183/how-can-i-hide-my-bootstrap-modal-form-after-successfully-submitting-of-form-dat/56554245#56554245", "title": "How can I hide my bootstrap modal form after successfully submitting of form data in rails", "body": "<p>I guest that you're using ajax to submit the form in your Bootstrap modal.</p>\n\n<p>After that, controller action will render the <code>js</code> response (for example: <code>create.js.erb</code>)</p>\n\n<p>Edit: In order to set conditional statements</p>\n\n<p>In controller action</p>\n\n<pre><code>@object = YourModel.new(params[:object])\nunless @object.save\n  @errors = @object.errors.full_messages\nend\n</code></pre>\n\n<p>In <code>create.js.erb</code></p>\n\n<pre><code>&lt;% if @errors %&gt;\n  /* DO form invalid actions, like show error messages */\n&lt;% else %&gt;\n  $('#yourModalID').modal('hide');\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11635070, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TAuEFPm5fsY/AAAAAAAAAAI/AAAAAAAAAEA/F01AQXuTvl8/photo.jpg?sz=128", "display_name": "V\u0103n Tr\u1ecdng Tr\u1ea7n", "link": "https://stackoverflow.com/users/11635070/v%c4%83n-tr%e1%bb%8dng-tr%e1%ba%a7n"}, "is_accepted": false, "score": 0, "last_activity_date": 1560326486, "creation_date": 1560326486, "answer_id": 56557320, "question_id": 56554183, "link": "https://stackoverflow.com/questions/56554183/how-can-i-hide-my-bootstrap-modal-form-after-successfully-submitting-of-form-dat/56557320#56557320", "title": "How can I hide my bootstrap modal form after successfully submitting of form data in rails", "body": "<p>In controller action</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def create\n  @object = YourModel.create(params)\nend\n</code></pre>\n\n<p>create file <code>create.js.erb</code></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;% if @object.valid? %&gt;\n  $('#yourModalID').modal('hide');\n  /* DO actions, like append object to list */\n&lt;% else %&gt;\n  /* DO form invalid actions, like show error messages */\n&lt;% end %&gt;\n\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8082355"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 56554245, "answer_count": 2, "score": 0, "last_activity_date": 1560326486, "creation_date": 1560309123, "question_id": 56554183, "link": "https://stackoverflow.com/questions/56554183/how-can-i-hide-my-bootstrap-modal-form-after-successfully-submitting-of-form-dat", "title": "How can I hide my bootstrap modal form after successfully submitting of form data in rails", "body": "<p>I have applied server side validations on my rails form .. using ajax and bootstrap now I want to hide my modal after successfully submitting my form .</p>\n"}, {"tags": ["ruby", "oauth"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1560309776, "post_id": 56554181, "comment_id": 99689534, "body": "Magento docs ask for parameter encoding, where <code>+</code> should be okay for a space. Have you tried it and gotten an error (in which case, please edit the error into your question), or are you just assuming <code>+</code> won&#39;t work? (Also, use <code>CGI::escape</code>, as <code>URI::escape</code> has been deprecated.)"}, {"owner": {"reputation": 121, "user_id": 5332839, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-W124KKtHHPQ/AAAAAAAAAAI/AAAAAAAAABk/eKg3XVGBfww/photo.jpg?sz=128", "display_name": "Uysim Ty", "link": "https://stackoverflow.com/users/5332839/uysim-ty"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1560903729, "post_id": 56554181, "comment_id": 99886749, "body": "I try already + won&#39;t work. Anyway on my question I am sure I mention I used CGI.escape"}], "owner": {"reputation": 121, "user_id": 5332839, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-W124KKtHHPQ/AAAAAAAAAAI/AAAAAAAAABk/eKg3XVGBfww/photo.jpg?sz=128", "display_name": "Uysim Ty", "link": "https://stackoverflow.com/users/5332839/uysim-ty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1560309118, "creation_date": 1560309118, "question_id": 56554181, "link": "https://stackoverflow.com/questions/56554181/cgi-escape-space-problem-need-for-generate-oauth-signature-for-magento", "title": "CGI.escape space problem. Need for generate oauth signature for Magento", "body": "<p>I try to generate oauth signature for authorization api with Magento. I found the problem because <code>CGI.escape</code> generate <code>+</code> for space instead of <code>%20</code> for params. Anyone know how to correct it. </p>\n\n<p>I try to use <code>URI.escape</code> too but it only convert space to %20 other thing was not be converted</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>CGI.escape(\"2019-06-11 00:00:00\")\n</code></pre>\n\n<p>got <code>2019-06-11+00%3A00%3A00</code>\nexpect <code>2019-06-11%2000%3A00%3A00</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 10593647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f22c79fe94509a33354042e0718b11a?s=128&d=identicon&r=PG&f=1", "display_name": "Heshie Bee", "link": "https://stackoverflow.com/users/10593647/heshie-bee"}, "is_accepted": false, "score": 0, "last_activity_date": 1560371177, "creation_date": 1560371177, "answer_id": 56569893, "question_id": 56553508, "link": "https://stackoverflow.com/questions/56553508/needed-to-fill-in-the-questions-for-uri-path-controller-and-the-action-method/56569893#56569893", "title": "Needed to fill in the questions for URI path, controller, and the action/method after I place in routes commands, but I wasn&#39;t sure want to look for", "body": "<p>The question above reviews rails conventions and file structure.\nYou can learn more about it here: <a href=\"https://guides.rubyonrails.org/v2.3/routing.html\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/v2.3/routing.html</a></p>\n\n<p><strong>The answers to above the questions would be the following:</strong></p>\n\n<ul>\n<li>The URI path to your new view in the above line is <code>/articles/index</code></li>\n<li>The controller is <code>articles_controller</code></li>\n<li>The action or method in the above controller is <code>#index</code></li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 11634063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc769610455a8ec4d3275e980b94547c?s=128&d=identicon&r=PG&f=1", "display_name": "paola ", "link": "https://stackoverflow.com/users/11634063/paola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1560371177, "creation_date": 1560302785, "last_edit_date": 1560312722, "question_id": 56553508, "link": "https://stackoverflow.com/questions/56553508/needed-to-fill-in-the-questions-for-uri-path-controller-and-the-action-method", "title": "Needed to fill in the questions for URI path, controller, and the action/method after I place in routes commands, but I wasn&#39;t sure want to look for", "body": "<p>The pertinent line in the output from the rails routes command for dealing with listing all articles is as follows:</p>\n\n<p>articles GET    /articles(.:format)          articles#index</p>\n\n<p>The URI path to your new view in the above line is _____________. </p>\n\n<p>The controller is  ___________.</p>\n\n<p>The action or method in the above controller is _____________</p>\n\n<p>*********OUTPUT FROM BASH COMMAND************************</p>\n\n<p><code>ec2-user:~/environment/ruby_labs/blog (master) $ rails routes\n                   Prefix Verb   URI Pattern                                                                              Controller#Action\n            welcome_index GET    /welcome/index(.:format)                                                                 welcome#index\n             new_articles GET    /articles/new(.:format)                                                                  articles#new\n            edit_articles GET    /articles/edit(.:format)                                                                 articles#edit\n                 articles GET    /articles(.:format)                                                                      articles#show\n                          PATCH  /articles(.:format)                                                                      articles#update\n                          PUT    /articles(.:format)                                                                      articles#update\n                          DELETE /articles(.:format)                                                                      articles#destroy\n                          POST   /articles(.:format)                                                                      articles#create\n                     root GET    /                                                                                        welcome#index\n                  article GET    /articles/:id(.:format)                                                                  articles#show\n                          GET    /articles(.:format)                                                                      articles#index\n       rails_service_blob GET    /rails/active_storage/blobs/:signed_id/*filename(.:format)                               active_storage/blobs#show\nrails_blob_representation GET    /rails/active_storage/representations/:signed_blob_id/:variation_key/*filename(.:format) active_storage/representations#show\n       rails_disk_service GET    /rails/active_storage/disk/:encoded_key/*filename(.:format)                              active_storage/disk#show\nupdate_rails_disk_service PUT    /rails/active_storage/disk/:encoded_token(.:format)                                      active_storage/disk#update\n     rails_direct_uploads POST   /rails/active_storage/direct_uploads(.:format)                                           active_storage/direct_uploads#create</code></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 27392, "user_id": 332960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8dd0d08a7fd76c11ef5125b36dcae7b?s=128&d=identicon&r=PG", "display_name": "Chris Schmich", "link": "https://stackoverflow.com/users/332960/chris-schmich"}, "edited": false, "score": 0, "creation_date": 1560302829, "post_id": 56553447, "comment_id": 99688326, "body": "Perhaps not quite what you want, but you can try the built-in pretty-printer: <code>require &#39;pp&#39;</code> ... <code>pp some_blog_post_object</code>"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1560303169, "post_id": 56553447, "comment_id": 99688379, "body": "If <code>pp</code> doesn&#39;t work for you, then there may be a gem. Try Google searching on &quot;ruby gem pretty print objects&quot;. I just tried that and saw a few promising links."}, {"owner": {"reputation": 314, "user_id": 9440171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d45BA.jpg?s=128&g=1", "display_name": "ashwood", "link": "https://stackoverflow.com/users/9440171/ashwood"}, "edited": false, "score": 2, "creation_date": 1560304364, "post_id": 56553447, "comment_id": 99688561, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/703049/ruby-how-to-make-irb-print-structure-for-arrays-and-hashes\">Ruby: How to make IRB print structure for Arrays and Hashes</a>"}, {"owner": {"reputation": 165, "user_id": 9008393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/30tkF.jpg?s=128&g=1", "display_name": "solidstatejake", "link": "https://stackoverflow.com/users/9008393/solidstatejake"}, "edited": false, "score": 0, "creation_date": 1560305632, "post_id": 56553447, "comment_id": 99688774, "body": "I didn&#39;t know it was called &quot;pretty printing&quot;. Great."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 9008393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/30tkF.jpg?s=128&g=1", "display_name": "solidstatejake", "link": "https://stackoverflow.com/users/9008393/solidstatejake"}, "edited": false, "score": 0, "creation_date": 1560305661, "post_id": 56553614, "comment_id": 99688781, "body": "awesome_print seems to be exactly what I&#39;m looking for."}], "tags": [], "owner": {"reputation": 112, "user_id": 1058092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e2069c00c57d942f4c239bdcdd7353?s=128&d=identicon&r=PG", "display_name": "ksevelyar", "link": "https://stackoverflow.com/users/1058092/ksevelyar"}, "is_accepted": true, "score": 2, "last_activity_date": 1560303892, "creation_date": 1560303892, "answer_id": 56553614, "question_id": 56553447, "link": "https://stackoverflow.com/questions/56553447/is-there-a-ruby-method-to-print-an-object-to-the-console-in-a-way-that-is-easy-t/56553614#56553614", "title": "Is there a Ruby method to print an object to the console in a way that is easy to read?", "body": "<p><a href=\"https://github.com/awesome-print/awesome_print\" rel=\"nofollow noreferrer\">https://github.com/awesome-print/awesome_print</a> can be a good fit. I recommend to combine it with <code>pry</code>.</p>\n"}], "owner": {"reputation": 165, "user_id": 9008393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/30tkF.jpg?s=128&g=1", "display_name": "solidstatejake", "link": "https://stackoverflow.com/users/9008393/solidstatejake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1560327768, "accepted_answer_id": 56553614, "answer_count": 1, "score": 0, "last_activity_date": 1560303892, "creation_date": 1560302126, "question_id": 56553447, "link": "https://stackoverflow.com/questions/56553447/is-there-a-ruby-method-to-print-an-object-to-the-console-in-a-way-that-is-easy-t", "closed_reason": "Not suitable for this site", "title": "Is there a Ruby method to print an object to the console in a way that is easy to read?", "body": "<p>I understand that one can use something like <code>object.inspect</code> to view an object's state in the console (or to whichever output one is using), but does there exist a built-in method or a gem which provides a method to print out the object's state in an easy-to-read fashion?</p>\n\n<p>Example:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&gt; some_blog_post_object.beautiful_inspect\n=&gt; \"title:    'Some Amazing Title'\n    subtitle: 'Hopefully I'm not down-voted for n00b-ness'\n    image:    'some_image.jpg'\n           .\n           .\n           .\n   \"\n</code></pre>\n\n<p>Or something along these lines.</p>\n"}, {"tags": ["ruby", "bundler"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1560302865, "post_id": 56552876, "comment_id": 99688330, "body": "The bundler generally knows what it&#39;s doing when it comes to identifying dependencies. Are you saying that you&#39;re almost certain that you know better than the bundler? You can force a version, such as <code>gem &#39;twitter&#39;, &#39;5.0&#39;</code> but then if this causes a dependency conflict the <code>bundler</code> will have no choice but to end with an error. If your desire was to stick to a certain set of known, successfully interdependent versions, then those would get locked in by using the same <code>Gemfile.lock</code> file."}, {"owner": {"reputation": 7078, "user_id": 470062, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d33f775e247c3d197bda319a33232403?s=128&d=identicon&r=PG", "display_name": "tofarr", "link": "https://stackoverflow.com/users/470062/tofarr"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1560308409, "post_id": 56552876, "comment_id": 99689269, "body": "@lurker - What I&#39;m saying is that twitter 5.0 insists on using faraday 0.9.0 . linkedin-v2 insists on using faraday 0.11.0 . If I fork twitter 5.0 on github, and change the Gemfile so that it specifies faraday 0.11.0 , and then point my project&#39;s Gemfile at this forked version, all my specs pass, and functionally my project seems to work. I was wondering if there is a way to get this behavior without having to create forks of the projects on which mine depends - which feels like an ugly hack to me."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 2, "creation_date": 1560312253, "post_id": 56552876, "comment_id": 99690019, "body": "I would argue that the non-ugly hack would be to create a fork, fix the dependency and that create a PR against the original gem. Doing so would probably help others too."}], "owner": {"reputation": 7078, "user_id": 470062, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d33f775e247c3d197bda319a33232403?s=128&d=identicon&r=PG", "display_name": "tofarr", "link": "https://stackoverflow.com/users/470062/tofarr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 304, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560296442, "creation_date": 1560296018, "last_edit_date": 1560296442, "question_id": 56552876, "link": "https://stackoverflow.com/questions/56552876/is-there-a-way-to-force-bundler-to-accept-a-particular-version-of-a-gem", "title": "Is there a way to force bundler to accept a particular version of a gem?", "body": "<p>I have a rails project where certain third party dependencies insist on a certain version of another third party library (using ~> ) When I try to do a bundle install, I get the following:</p>\n\n<pre><code>Bundler could not find compatible versions for gem \"faraday\":\n  In snapshot (Gemfile.lock):\n    faraday (= 0.9.2)\n\n  In Gemfile:\n    linkedin-v2 (&gt;= 0.1.7) was resolved to 0.1.7, which depends on\n      faraday (~&gt; 0.11)\n\n    twitter (~&gt; 5.0) was resolved to 5.17.0, which depends on\n      faraday (~&gt; 0.9.0)\n\nRunning `bundle update` will rebuild your snapshot from scratch, using only\nthe gems in your Gemfile, which may resolve the conflict.\n</code></pre>\n\n<p>Applicable segments from the Gemfile:</p>\n\n<pre><code>...\ngem 'linkedin-v2', '&gt;= 0.1.7'\n...\ngem 'twitter', '~&gt; 5.0'\n...\n</code></pre>\n\n<p>In this case, I am almost certain that there is no incompatibility in the third party library, and after testing I could use faraday 0.11 without issue. Is there a directive I can use in the Gemfile way to tell bundler just to accept a certain version of a gem, perhaps while printing out a warning?</p>\n\n<p>I can fork the third party project on github (In this case the 'twitter' project) and then change the version number of faraday in its Gemfile, and then reference this forked project in my Gemfile - but this seems like a really ugly and overly complex hack. (i.e: It introduces the issue of keeping the forked project up to date.)</p>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1560298697, "post_id": 56552609, "comment_id": 99687681, "body": "After removing <code>:row_sep =&gt; &quot;\\r\\n&quot;,</code> your code works fine for me: <code>find_row_in_csv(&#39;data.csv&#39;, &#39;Age&#39;, &#39;22&#39;)  #=&gt; #&lt;CSV::Row &quot;Name&quot;:&quot;Sarah&quot; &quot;Age&quot;:&quot;22&quot; &quot;Gender&quot;:&quot;a&quot;&gt;</code>. Ruby should be able to figure out what the row separator is on your system."}, {"owner": {"reputation": 11, "user_id": 11626152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/057eae934b3317d2af80f87ec0458acc?s=128&d=identicon&r=PG&f=1", "display_name": "SauvignonC", "link": "https://stackoverflow.com/users/11626152/sauvignonc"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1560299227, "post_id": 56552609, "comment_id": 99687766, "body": "@CarySwoveland thanks for the help!, however, I&#39;m still getting the same error: <code>main.rb:15:in `block in find_row_in_csv&#39;: undefined method `include?&#39; for nil:NilClass (NoMethodError)</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1560309866, "post_id": 56552609, "comment_id": 99689554, "body": "As I expect you know, the error message is telling you that <code>row[column_name] #=&gt; nil</code>. Try inserting the following line above the line containing <code>row[column_name]</code>: <code>puts &quot;row=#{row}, column_name=#{column_name}&quot;</code> and report back what is displayed."}, {"owner": {"reputation": 11, "user_id": 11626152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/057eae934b3317d2af80f87ec0458acc?s=128&d=identicon&r=PG&f=1", "display_name": "SauvignonC", "link": "https://stackoverflow.com/users/11626152/sauvignonc"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1560352399, "post_id": 56552609, "comment_id": 99710198, "body": "@CarySwoveland As it turns out, you were right all along, there was no problem with my code. The problem was my compiler. I uninstalled it and installed it again and the code ran perfectly. Thank you very much."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1560352538, "post_id": 56552609, "comment_id": 99710284, "body": "I&#39;m glad to hear to solved the problem."}], "owner": {"reputation": 11, "user_id": 11626152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/057eae934b3317d2af80f87ec0458acc?s=128&d=identicon&r=PG&f=1", "display_name": "SauvignonC", "link": "https://stackoverflow.com/users/11626152/sauvignonc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1560376932, "creation_date": 1560293592, "last_edit_date": 1560376932, "question_id": 56552609, "link": "https://stackoverflow.com/questions/56552609/csv-parse-search-a-value-in-a-certain-column-and-print-out-the-whole-row-that-c", "title": "CSV Parse: search a value in a certain column and print out the whole row that contains it", "body": "<p>So, I already made a similar question a few days back that got me very close to figuring it out. I wanted a system that'd take the user input and search it through an specific column and, when found, would print the entire row the column was in. I already defined the method that'll search through the .csv, however, it's still not working as intended. The exact error is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>undefined method `include?' for nil:NilClass (NoMethodError)\n</code></pre>\n\n<p>I've viewed and reviewed the .csv, tried out solutions that I found for the same problem, but none seem to work.</p>\n\n<p>My <code>data.csv</code> looks like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Name;Age;Gender\nEdward;21;Male\nMichael;21;a\nSarah;22;a\n</code></pre>\n\n<p>As you can see, I use \"<code>a</code>\" so that I don't use a blank space.</p>\n\n<p>Also, I used <code>:col_sep =&gt; \";\"</code> in the code to avoid further errors (it's too big to change every semicolon into a comma manually).</p>\n\n<p>I really don't know what else to do at this point, I understand the problem, but I can't find the solution.</p>\n\n<p>This is what my code looks like:</p>\n\n<pre><code>require 'csv'\n\ndef find_row_in_csv(file_path, column_name, search_value)\n  CSV.foreach(file_path, headers: true, :row_sep =&gt; \"\\r\\n\", :col_sep =&gt; \";\").find do |row|\n    row[column_name].include?(search_value)\n  end\nend\n\nsearch_value = gets.chomp.to_s\n\nmatching_row = find_row_in_csv('data.csv', \"Name\", search_value)\np matching_row\n</code></pre>\n\n<p>I used that <code>:row_sep =&gt; \"\\r\\n\"</code> because I was getting a malformed CSV error, but now that I fixed that, it appears as though I haven't defined the <code>include?</code> method for NilClass (NoMethodError), which I don't understand since there's no blank values in the .csv.</p>\n\n<p>I thought it'd work as is, since I pretty much copied it from the best response I got, but I've been stuck with this for a few days now.</p>\n"}, {"tags": ["ruby", "httparty"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1560355996, "post_id": 56552062, "comment_id": 99712220, "body": "As an aside, <code>Hash[&#39;message&#39; =&gt; &#39;There was...&#39;]</code> isn&#39;t the right way to create a Hash. The <a href=\"https://ruby-doc.org/core-2.6.3/Hash.html#method-c-5B-5D\" rel=\"nofollow noreferrer\"><code>Hash[]</code> method</a> returns a new Hash with the keys and values of the object given as its argument. The argument you&#39;re giving is already a Hash (with key <code>&#39;message&#39;</code> and value <code>&#39;There was...&#39;</code>), and what you&#39;re getting back is a copy of it. You should just use a Hash literal instead: <code>{ &#39;message&#39; =&gt; &#39;There was...&#39; }</code>."}], "answers": [{"tags": [], "owner": {"reputation": 117, "user_id": 4091646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a7280005cf9ff33e12ef922fb75a7e?s=128&d=identicon&r=PG", "display_name": "Wender Freese", "link": "https://stackoverflow.com/users/4091646/wender-freese"}, "is_accepted": false, "score": 1, "last_activity_date": 1560292503, "creation_date": 1560292503, "answer_id": 56552473, "question_id": 56552062, "link": "https://stackoverflow.com/questions/56552062/how-can-i-evaluate-if-a-rescue-case-was-reached/56552473#56552473", "title": "How can I evaluate if a rescue case was reached?", "body": "<p>You can deal with that using different approaches, look at those two examples:</p>\n\n<pre><code># You can catch the error just to handle it and bypass to the caller\n# In this case, the caller will need to rescue your custom error\n# Example 1\ndef my_method\n  begin\n    ...\n  rescue\n    raise MyCustomError\n  end\nend\n\nbegin\n  my_method\nrescue MyCustomError =&gt; err\n  ...\nend\n\n# You can provide the error through a block\n# Example 2\ndef my_method\n  begin\n    yield MyApi.call\n  rescue\n    yield :fail, { message: 'error' }\n  end\nend\n\nmy_method do |result, error|\n  ...\nend\n</code></pre>\n\n<p>Consider not to handle generic errors in rescue but actually catch specific ones and deal with them, if you put only <code>rescue</code> you are assuming that whatever error will be handled in a single way in your code.</p>\n"}, {"tags": [], "owner": {"reputation": 1175, "user_id": 2861567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRa02.jpg?s=128&g=1", "display_name": "quyetdc", "link": "https://stackoverflow.com/users/2861567/quyetdc"}, "is_accepted": false, "score": 0, "last_activity_date": 1560293247, "creation_date": 1560293247, "answer_id": 56552561, "question_id": 56552062, "link": "https://stackoverflow.com/questions/56552062/how-can-i-evaluate-if-a-rescue-case-was-reached/56552561#56552561", "title": "How can I evaluate if a rescue case was reached?", "body": "<p>Following the <code>HttParty</code> gem <a href=\"https://github.com/jnunemaker/httparty\" rel=\"nofollow noreferrer\">here</a>, You can do </p>\n\n<pre><code># Use the class methods to get down to business quickly\nresponse = HTTParty.get('http://api.stackexchange.com/2.2/questions?site=stackoverflow')\n\nputs response.body, response.code, response.message, response.headers.inspect\n</code></pre>\n\n<p>So, in your call api function, it depends on what the API returns</p>\n\n<pre><code>response = call_to_api #api call is ran in file one\n\nif response.code == 200 or response.message == \"OK\"\n  success\nelse\n  error\nend\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 10725180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ILCL.jpg?s=128&g=1", "display_name": "Jack Collins", "link": "https://stackoverflow.com/users/10725180/jack-collins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1560355729, "creation_date": 1560289412, "last_edit_date": 1560355729, "question_id": 56552062, "link": "https://stackoverflow.com/questions/56552062/how-can-i-evaluate-if-a-rescue-case-was-reached", "title": "How can I evaluate if a rescue case was reached?", "body": "<p>I am running an exception handler, and then in another file want to evaluate whether or not the exception handler was ran successfully, or if the rescue case ran. </p>\n\n<p>I'm pretty new to Ruby, and I'm not sure how to evaluate what actually happened in my exception handler, and how to store the results (or if that's even possible). Here's how the code looks.</p>\n\n<p><strong><em>File one - which runs an API call</em></strong></p>\n\n<pre><code>begin\n  HTTParty.get(BASE_URL + url)\nrescue\n  Hash['message' =&gt; 'There was an error connecting with the API, contact support if error persists.']\nend\n</code></pre>\n\n<p><strong><em>File two - which analyzes whether or not the API call was succesful</em></strong></p>\n\n<pre><code>response = call_to_api #api call is ran in file one\n\nif response == #I'm not sure what to put here, but it needs to check if the exception handler didn't trip the rescue\n  success\nelse\n  error\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rubygems", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 1306, "user_id": 8008340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15JhO.jpg?s=128&g=1", "display_name": "Konstantin Strukov", "link": "https://stackoverflow.com/users/8008340/konstantin-strukov"}, "edited": false, "score": 1, "creation_date": 1560289214, "post_id": 56551717, "comment_id": 99685639, "body": "This thing is explained in the very beginning of the rails routing guide: <a href=\"https://guides.rubyonrails.org/routing.html#generating-paths-and-urls-from-code\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 7344993, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/73fe9042c9119cfff92689575600c8bf?s=128&d=identicon&r=PG&f=1", "display_name": "Sayed Hasan", "link": "https://stackoverflow.com/users/7344993/sayed-hasan"}, "reply_to_user": {"reputation": 1306, "user_id": 8008340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15JhO.jpg?s=128&g=1", "display_name": "Konstantin Strukov", "link": "https://stackoverflow.com/users/8008340/konstantin-strukov"}, "edited": false, "score": 0, "creation_date": 1560298376, "post_id": 56551717, "comment_id": 99687630, "body": "@KonstantinStrukov done it but now i am having this issue &quot;Couldn&#39;t find Major without an ID&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7344993, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/73fe9042c9119cfff92689575600c8bf?s=128&d=identicon&r=PG&f=1", "display_name": "Sayed Hasan", "link": "https://stackoverflow.com/users/7344993/sayed-hasan"}, "is_accepted": false, "score": 0, "last_activity_date": 1560299969, "creation_date": 1560299969, "answer_id": 56553262, "question_id": 56551717, "link": "https://stackoverflow.com/questions/56551717/get-the-id-from-url-and-use-it-to-get-a-specific-data-from-a-table/56553262#56553262", "title": "get the id from url and use it to get a specific data from a table", "body": "<p>The problem is solved by adding the route as @KonstantinStrukov said \nedited the show</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>  &lt;% @major.courses.each do |m| %&gt;\n    &lt;tr&gt;\n      &lt;td&gt;&lt;%= m.name %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= m.description %&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>Rotes file</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Rails.application.routes.draw do\n  get 'home/index'\n  get 'home/contactUs'\n  resources :courses\n  resources :majors\n  resources :sciences\n  get '/majors/:id', to: 'majors#show', as: 'Major'\n  root 'home#index'\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\nend\n</code></pre>\n\n<p>Controller</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>  def show\n    @majors = Major.where(params[:id])\n    @courses = Course.all\n  end\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7344993, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/73fe9042c9119cfff92689575600c8bf?s=128&d=identicon&r=PG&f=1", "display_name": "Sayed Hasan", "link": "https://stackoverflow.com/users/7344993/sayed-hasan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1560299969, "creation_date": 1560287428, "last_edit_date": 1560298608, "question_id": 56551717, "link": "https://stackoverflow.com/questions/56551717/get-the-id-from-url-and-use-it-to-get-a-specific-data-from-a-table", "title": "get the id from url and use it to get a specific data from a table", "body": "<p>I am doing a project for my studies. How can I get the id from the URL and pass it to the controller to get specific data from the table</p>\n\n<p>This some of codes I have tried \nI am now getting this error Couldn't find Major without an ID</p>\n\n<p>Controller:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class MajorsController &lt; ApplicationController\n  before_action :set_major, only: [:show, :edit, :update, :destroy]\n\n  # GET /majors\n  # GET /majors.json\n  def index\n    @majors = Major.all\n  end\n\n  # GET /majors/1\n  # GET /majors/1.json\n  def show\n    @majors = Major.find(params[:major_id])\n    @courses = Course.all\n  end\n</code></pre>\n\n<p>These are my routes</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Rails.application.routes.draw do\n  get 'home/index'\n  get 'home/contactUs'\n  resources :courses\n  resources :majors\n  resources :sciences\n  get '/majors/:id', to: 'majors#show', as: 'Major'\n  root 'home#index'\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\nend\n</code></pre>\n\n<p>Show</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Name:&lt;/strong&gt;\n  &lt;%= @major.name %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Description:&lt;/strong&gt;\n  &lt;%= @major.description %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Science:&lt;/strong&gt;\n  &lt;%= @major.science.name %&gt;\n&lt;/p&gt;\n&lt;p&gt;\n  &lt;strong&gt;Number of courses:&lt;/strong&gt;\n  &lt;%= @major.courses.count %&gt;\n&lt;/p&gt;\n\n&lt;table class=\"table table-hover\"&gt;\n  &lt;thead&gt;\n  &lt;tr&gt;\n    &lt;th&gt;Name&lt;/th&gt;\n    &lt;th&gt;Description&lt;/th&gt;\n  &lt;/tr&gt;\n  &lt;/thead&gt;\n\n  &lt;tbody&gt;\n\n  &lt;% @major.course.each do |m| %&gt;\n    &lt;tr&gt;\n      &lt;td&gt;&lt;%= m.name %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= m.description %&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n&lt;%= link_to 'Edit', edit_major_path(@major) %&gt; |\n&lt;%= link_to 'Back', majors_path %&gt;\n\n\n</code></pre>\n\n<p>i expect the output is the only two courses i have but it output them all</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1560287859, "post_id": 56551620, "comment_id": 99685207, "body": "I don\u2019t think the title is quite what you mean, as users can enter nothing other than strings. Perhaps you want users to be required to enter the string representation of a number, in which case you should indicate whether it should be an integer, a non-negative integer, a float or something else. btw, <code>gets.chomp.to_f</code> can be written <code>gets.to_f</code>, for the same reason that <code>1.23cats.to_f #=&gt; 1.23</code>."}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1560348045, "post_id": 56552069, "comment_id": 99707530, "body": "As <a href=\"https://stackoverflow.com/questions/56551620/how-can-i-make-sure-users-enter-a-number-not-a-string#comment99685207_56551620\">@CarySwoveland pointed out</a> <code>&quot;1.23cats&quot;.to_f #=&gt; 1.23</code> so just checking if it evaluates to more than 1 is insufficient."}], "tags": [], "owner": {"reputation": 689, "user_id": 6052788, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6NvdPYJVGFI/AAAAAAAAAAI/AAAAAAAAAA0/Cfs5I7J9EG0/photo.jpg?sz=128", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/6052788/jeremy"}, "is_accepted": false, "score": 1, "last_activity_date": 1560289471, "creation_date": 1560289471, "answer_id": 56552069, "question_id": 56551620, "link": "https://stackoverflow.com/questions/56551620/how-can-i-make-sure-users-enter-a-number-not-a-string/56552069#56552069", "title": "How can I make sure Users Enter a Number not a String?", "body": "<p>Strings result in 0.0 when you run them through .to_f, so adding an or statement that requires the number to be more than 1 should make sure that no strings are entered. </p>\n\n<pre><code>def pruefeZeitbudget(eingabeZeitaufwand)\n    @validierungsWert = eingabeZeitaufwand.to_f\n    loop do\n      if @validierungsWert &gt; 24 or @validierungsWert &lt; 1 \n        puts 'Wert \u00fcberschreitet das Tagesmaximum von 24 Stunden. Erneute Eingabe!'\n        @validierungsWert = gets.chomp.to_f\n      else\n        puts 'Eingabe okay.'\n        break\n      end\n    end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1560346991, "post_id": 56552484, "comment_id": 99706842, "body": "Ummmm... <code>gets.chomp.to_f</code> is still present on Line 7. Also I am not sure if the OP considers <code>&quot;1.2e1&quot;</code> as &quot;entering a character&quot; but the <code>Float</code> method will accept e notation"}, {"owner": {"reputation": 1175, "user_id": 2861567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRa02.jpg?s=128&g=1", "display_name": "quyetdc", "link": "https://stackoverflow.com/users/2861567/quyetdc"}, "edited": false, "score": 0, "creation_date": 1560375276, "post_id": 56552484, "comment_id": 99720232, "body": "I updated the code. So the <code>@validierungsWert</code> variable should be get from user input? it&#39;s great that <code>Float()</code> can do a lot of things like that. Haha. Hope that my answer&#39;s useful"}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 1, "creation_date": 1560540203, "post_id": 56552484, "comment_id": 99784299, "body": "you can drop the begin;end the rescue will work regardless"}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1560595486, "post_id": 56552484, "comment_id": 99794218, "body": "you use rescue and ensure just like in a begin;end block found this <a href=\"http://seejohncode.com/2012/04/17/short-tip-rescuing-a-method-in-ruby/\" rel=\"nofollow noreferrer\">seejohncode.com/2012/04/17/short-tip-rescuing-a-method-in-ru&zwnj;&#8203;by</a> also, most consider it bad to catch a general error, but that would go too far for an simple example as yours (most wouldn&#39;t even use a rescue here)"}], "tags": [], "owner": {"reputation": 1175, "user_id": 2861567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRa02.jpg?s=128&g=1", "display_name": "quyetdc", "link": "https://stackoverflow.com/users/2861567/quyetdc"}, "is_accepted": true, "score": 1, "last_activity_date": 1560375191, "last_edit_date": 1560375191, "creation_date": 1560292624, "answer_id": 56552484, "question_id": 56551620, "link": "https://stackoverflow.com/questions/56551620/how-can-i-make-sure-users-enter-a-number-not-a-string/56552484#56552484", "title": "How can I make sure Users Enter a Number not a String?", "body": "<p>You can use <code>Float(eingabeZeitaufwand)</code> . It will raise error if the input is invalid Float type. Otherwise, it returns float value.</p>\n\n<p>The complete code should like</p>\n\n<pre><code>def pruefeZeitbudget\n  begin \n    @validierungsWert = Float(gets.chomp)\n    loop do\n      if @validierungsWert &gt; 24\n        puts 'Wert \u00fcberschreitet das Tagesmaximum von 24 Stunden. Erneute Eingabe!'\n      else\n        puts 'Eingabe okay.'\n        break\n      end\n    end\n  rescue\n    puts \"Invalid input\"\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 3259939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w4auo.jpg?s=128&g=1", "display_name": "Sunny", "link": "https://stackoverflow.com/users/3259939/sunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 56552484, "answer_count": 2, "score": 1, "last_activity_date": 1560539815, "creation_date": 1560286909, "last_edit_date": 1560287204, "question_id": 56551620, "link": "https://stackoverflow.com/questions/56551620/how-can-i-make-sure-users-enter-a-number-not-a-string", "title": "How can I make sure Users Enter a Number not a String?", "body": "<p>I expect the user to enter a Number. In case users enter a char I want to throw a error.</p>\n\n<p>I tried to parse the values.</p>\n\n<pre><code>def pruefeZeitbudget(eingabeZeitaufwand)\n    @validierungsWert = eingabeZeitaufwand.to_f\n    loop do\n      if @validierungsWert &gt; 24\n        puts 'Wert \u00fcberschreitet das Tagesmaximum von 24 Stunden. Erneute Eingabe!'\n        @validierungsWert = gets.chomp.to_f\n      else\n        puts 'Eingabe okay.'\n        break\n      end\n    end\n</code></pre>\n"}, {"tags": ["ruby", "xml", "csv", "nokogiri", "export-to-csv"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1560283588, "post_id": 56550587, "comment_id": 99683696, "body": "can you post a small sample of your yaml file as an example?"}, {"owner": {"reputation": 39, "user_id": 10913156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/592e5c789ab25dc0ee63ea1e2a0c4e17?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Journey_4_Fun", "link": "https://stackoverflow.com/users/10913156/code-journey-4-fun"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1560284527, "post_id": 56550587, "comment_id": 99684045, "body": "sorry, i dont know how to produce that. Any quick guidance on how to code into it? or do you want the sample of the xml data instead?"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1560288386, "post_id": 56550587, "comment_id": 99685367, "body": "oh yes I meant xml"}, {"owner": {"reputation": 39, "user_id": 10913156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/592e5c789ab25dc0ee63ea1e2a0c4e17?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Journey_4_Fun", "link": "https://stackoverflow.com/users/10913156/code-journey-4-fun"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1560295003, "post_id": 56550587, "comment_id": 99687081, "body": "please see above xml sample"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1560710147, "post_id": 56550587, "comment_id": 99816092, "body": "It&#39;s not necessary, or even desirable, to warn us you&#39;re not experienced writing code. Instead, do your homework described in &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and its linked pages, along with &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">mcve</a>&quot;. Take your time to work through the steps, then provide us the needed information and we&#39;ll do our best to help you."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 10913156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/592e5c789ab25dc0ee63ea1e2a0c4e17?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Journey_4_Fun", "link": "https://stackoverflow.com/users/10913156/code-journey-4-fun"}, "edited": false, "score": 1, "creation_date": 1560351564, "post_id": 56560443, "comment_id": 99709706, "body": "Thank you sir! The logic works! I just apply some of your code into mine to make it work for different type of XML."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1560711513, "post_id": 56560443, "comment_id": 99816441, "body": "Be careful removing namespaces like that. They&#39;re used for a reason, to separate and differentiate similarly named tags. Removing them can result in collisions in tags, or mangle data, which can really mess up the desired results. Instead, learn to use namespaces. They&#39;re a pain, but they&#39;re a necessary pain in complex XML. Also, be careful using <code>gsub</code> to change extensions. Matches in the filename will cause problems. Instead limit the search to the last three characters."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 1, "last_activity_date": 1560710563, "last_edit_date": 1560710563, "creation_date": 1560336750, "answer_id": 56560443, "question_id": 56550587, "link": "https://stackoverflow.com/questions/56550587/how-to-read-multiple-xml-files-then-output-to-multiple-csv-files-with-the-same-x/56560443#56560443", "title": "How to read multiple XML files then output to multiple CSV files with the same XML filenames", "body": "<p>You should use Ruby's <a href=\"https://ruby-doc.org/stdlib-2.6.3/libdoc/csv/rdoc/index.html\" rel=\"nofollow noreferrer\">CSV</a> class.  Also, you don't need to do any string matching or regex stuff. Use Nokogiri to target elements. If you know the node names in the XML will be consistent it should be pretty simple.  I'm not exactly sure if this is the output you want, but this should get you in the right direction:</p>\n\n<pre><code>require 'nokogiri'\nrequire 'csv'\n\ndef xml_to_csv(filename)\n  xml_str = File.read(filename)\n  xml_str.gsub!('record:','') # remove the record: namespace\n  doc = Nokogiri::XML xml_str\n  csv_filename = filename.gsub('.xml', '.csv')\n\n  CSV.open(csv_filename, 'wb' ) do |row|\n    row &lt;&lt; ['name', 'street_address', 'postal_code', 'age']\n    row &lt;&lt; [\n      doc.xpath('//name').text,\n      doc.xpath('//Street_Address').text,\n      doc.xpath('//Postal_Code').text,\n      doc.xpath('//Age').text,\n    ]\n  end\nend\n\n# iterate over all xml files\nDir.glob('*.xml').each { |filename| xml_to_csv(filename) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 2, "last_activity_date": 1560713297, "last_edit_date": 1560713297, "creation_date": 1560712922, "answer_id": 56621935, "question_id": 56550587, "link": "https://stackoverflow.com/questions/56550587/how-to-read-multiple-xml-files-then-output-to-multiple-csv-files-with-the-same-x/56621935#56621935", "title": "How to read multiple XML files then output to multiple CSV files with the same XML filenames", "body": "<p>Here's a quick peer-review of your code, something like you'd get in a corporate environment...</p>\n\n<p>Instead of writing:</p>\n\n<pre><code>input_folder = \"H:/input\"\n\ninput_folder[input_folder.length-1,1] == '/' # =&gt; false\n</code></pre>\n\n<p>Consider doing it using the <code>-1</code> offset from the end of the string to access the character:</p>\n\n<pre><code>input_folder[-1] # =&gt; \"t\"\n</code></pre>\n\n<p>That simplifies your logic making it more readable because it's lacking unnecessary visual noise:</p>\n\n<pre><code>input_folder[-1] == '/' # =&gt; false\n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/String.html#method-i-5B-5D\" rel=\"nofollow noreferrer\"><code>[]</code></a> and <a href=\"https://ruby-doc.org/core-2.6.3/String.html#method-i-5B-5D-3D\" rel=\"nofollow noreferrer\"><code>[]=</code></a> in the String documentation.</p>\n\n<hr>\n\n<p>This looks like a bug to me:</p>\n\n<pre><code>files   = Dir[input_folder + '/*.xml'].sort_by{ |f| File.mtime(f)}\nfile    = File.read(input_folder + '/' + files)\n</code></pre>\n\n<p><code>files</code> is an array of filenames. <code>input_folder + '/' + files</code> is appending an array to a string:</p>\n\n<pre><code>foo = ['1', '2'] # =&gt; [\"1\", \"2\"]\n'/parent/' + foo # =&gt; \n# ~&gt; -:9:in `+': no implicit conversion of Array into String (TypeError)\n# ~&gt;  from -:9:in `&lt;main&gt;'\n</code></pre>\n\n<p>How you want to deal with that is left as an exercise for the programmer.</p>\n\n<hr>\n\n<pre><code>doc.traverse do |node|\n</code></pre>\n\n<p>is icky because it sidesteps the power of Nokogiri being able to search for a particular tag using accessors. Very rarely do we need to iterate over a document tag by tag, usually only when we're peeking at its structure and layout. <code>traverse</code> is slower so use it as a very last resort.</p>\n\n<hr>\n\n<p><code>length</code> is nice but isn't needed when checking whether a string has content:</p>\n\n<pre><code>value = 'foo'\nvalue.length &gt; 0 # =&gt; true\nvalue &gt; '' # =&gt; true\n\nvalue = ''\nvalue.length &gt; 0 # =&gt; false\nvalue &gt; '' # =&gt; false\n</code></pre>\n\n<p>Programmers coming from Java like to use the accessors but I like being lazy, probably because of my C and Perl backgrounds.</p>\n\n<hr>\n\n<p>Be careful with <code>sub</code> and <code>gsub</code> as they don't do what you're thinking they do. Both expect a regular expression, but will take a string which they do a <a href=\"https://ruby-doc.org/core-2.6.3/Regexp.html#method-c-escape\" rel=\"nofollow noreferrer\"><code>escape</code></a> on before beginning their scan.</p>\n\n<p>You're passing in a regular expression, which is OK in this case, but it could cause unexpected problems if you don't remember all the rules for pattern matching and that <code>gsub</code> scans until the end of the string:</p>\n\n<pre><code>foo = 'wd:barwd:' # =&gt; \"wd:barwd:\"\nkey = foo.gsub(/wd:/,'') # =&gt; \"bar\"\n</code></pre>\n\n<p>In general I recommend people think a couple times before using regular expressions. I've seen some gaping holes opened up in logic written by fairly advanced programmers because they didn't know what the engine was going to do. They're wonderfully powerful, but need to be used surgically, not as a universal solution.</p>\n\n<p>The same thing happens with a string, because <code>gsub</code> doesn't know when to quit:</p>\n\n<pre><code>key = foo.gsub('wd:','') # =&gt; \"bar\"\n</code></pre>\n\n<p>So, if you're looking to change just the first instance use <code>sub</code>:</p>\n\n<pre><code>key = foo.sub('wd:','') # =&gt; \"barwd:\"\n</code></pre>\n\n<p>I'd do it a little differently though. </p>\n\n<pre><code>foo = 'wd:bar'\n</code></pre>\n\n<p>I can check to see what the first three characters are:</p>\n\n<pre><code>foo[0,3] # =&gt; \"wd:\"\n</code></pre>\n\n<p>Or I can replace them with something else using string indexing:</p>\n\n<pre><code>foo[0,3] = '' \nfoo # =&gt; \"bar\"\n</code></pre>\n\n<p>There's more but I think that's enough for now.</p>\n"}], "owner": {"reputation": 39, "user_id": 10913156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/592e5c789ab25dc0ee63ea1e2a0c4e17?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Journey_4_Fun", "link": "https://stackoverflow.com/users/10913156/code-journey-4-fun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 0, "accepted_answer_id": 56560443, "answer_count": 2, "score": 1, "last_activity_date": 1560713297, "creation_date": 1560281467, "last_edit_date": 1560710015, "question_id": 56550587, "link": "https://stackoverflow.com/questions/56550587/how-to-read-multiple-xml-files-then-output-to-multiple-csv-files-with-the-same-x", "title": "How to read multiple XML files then output to multiple CSV files with the same XML filenames", "body": "<p>I am trying to parse multiple XML files then output them into CSV files to list out the proper rows and columns. </p>\n\n<p>I was able to do so by processing one file at a time by defining the filename, and specifically output them into a defined output file name:</p>\n\n<pre><code>File.open('H:/output/xmloutput.csv','w')\n</code></pre>\n\n<p>I would like to write into multiple files and make their name the same as the XML filenames without hard coding it. I tried doing it multiple ways but have had no luck so far.</p>\n\n<p>Sample XML:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;record:root&gt;\n&lt;record:Dataload_Request&gt;\n    &lt;record:name&gt;Bob Chuck&lt;/record:name&gt;\n    &lt;record:Address_Data&gt;\n        &lt;record:Street_Address&gt;123 Main St&lt;/record:Street_Address&gt;\n        &lt;record:Postal_Code&gt;12345&lt;/record:Postal_Code&gt;\n    &lt;/record:Address_Data&gt;\n    &lt;record:Age&gt;45&lt;/record:Age&gt;\n&lt;/record:Dataload_Request&gt;\n&lt;/record:root&gt;\n</code></pre>\n\n<p>Here is what I've tried:</p>\n\n<pre><code>require 'nokogiri'\nrequire 'set'\n\nfiles = ''\ninput_folder = \"H:/input\"\noutput_folder = \"H:/output\"\n\nif input_folder[input_folder.length-1,1] == '/'\n   input_folder = input_folder[0,input_folder.length-1]\nend\n\nif output_folder[output_folder.length-1,1] != '/'\n   output_folder = output_folder + '/'\nend\n\n\nfiles   = Dir[input_folder + '/*.xml'].sort_by{ |f| File.mtime(f)}\nfile    = File.read(input_folder + '/' + files)\ndoc     = Nokogiri::XML(file)\nrecord  = {} # hashes\nkeys    = Set.new\nrecords = [] # array\ncsv     = \"\"\n\ndoc.traverse do |node| \n  value = node.text.gsub(/\\n +/, '')\n    if node.name != \"text\" # skip these nodes: if class isnt text then skip\n      if value.length &gt; 0 # skip empty nodes\n        key = node.name.gsub(/wd:/,'').to_sym\n        if key == :Dataload_Request &amp;&amp; !record.empty?\n          records &lt;&lt; record\n          record = {}\n        elsif key[/^root$|^document$/]\n          # neglect these keys\n        else\n          key = node.name.gsub(/wd:/,'').to_sym\n          # in case our value is html instead of text\n          record[key] = Nokogiri::HTML.parse(value).text\n          # add to our key set only if not already in the set\n          keys &lt;&lt; key\n        end\n      end\n    end\n  end\n\n# build our csv\nFile.open('H:/output/.*csv', 'w') do |file|\n  file.puts %Q{\"#{keys.to_a.join('\",\"')}\"}\n  records.each do |record|\n    keys.each do |key|\n      file.write %Q{\"#{record[key]}\",}\n    end\n    file.write \"\\n\"\n  end\n  print ''\n  print 'output files ready!'\n  print ''\nend\n</code></pre>\n\n<p>I have been getting <code>'read memory': no implicit conversion of Array into String (TypeError)</code> and other errors.</p>\n"}, {"tags": ["ruby", "postgresql", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1560282141, "post_id": 56550475, "comment_id": 99683133, "body": "You might want to consider <a href=\"https://github.com/rails/activeresource\" rel=\"nofollow noreferrer\"><code>activeresource</code></a> because you already use Rails."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1560285750, "post_id": 56550475, "comment_id": 99684513, "body": "Possible duplicate: <a href=\"https://stackoverflow.com/questions/16115890/how-do-i-work-with-a-legacy-database-in-rails\" title=\"how do i work with a legacy database in rails\">stackoverflow.com/questions/16115890/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 20715, "user_id": 1045142, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uz1X3.jpg?s=128&g=1", "display_name": "Simon Martinelli", "link": "https://stackoverflow.com/users/1045142/simon-martinelli"}, "is_accepted": false, "score": 0, "last_activity_date": 1560323540, "creation_date": 1560323540, "answer_id": 56556537, "question_id": 56550475, "link": "https://stackoverflow.com/questions/56550475/can-you-create-a-ruby-api-application-on-top-of-existing-schema/56556537#56556537", "title": "Can you create a ruby api application on top of existing schema?", "body": "<p>The only thing that you have to do is to add ActiveRecords with the name of your tables.</p>\n\n<p><a href=\"https://guides.rubyonrails.org/active_record_basics.html\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/active_record_basics.html</a></p>\n\n<p>And yes there is way to reverse engineer it.</p>\n\n<p>There is pretty good article about that: <a href=\"https://codeburst.io/how-to-build-a-rails-app-on-top-of-an-existing-database-baa3fe6384a0\" rel=\"nofollow noreferrer\">https://codeburst.io/how-to-build-a-rails-app-on-top-of-an-existing-database-baa3fe6384a0</a></p>\n"}], "owner": {"reputation": 2391, "user_id": 503510, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c298307ae9b0824aa6c517fda9beacaa?s=128&d=identicon&r=PG&f=1", "display_name": "Tintin", "link": "https://stackoverflow.com/users/503510/tintin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560323540, "creation_date": 1560280908, "last_edit_date": 1560282472, "question_id": 56550475, "link": "https://stackoverflow.com/questions/56550475/can-you-create-a-ruby-api-application-on-top-of-existing-schema", "title": "Can you create a ruby api application on top of existing schema?", "body": "<p>I am fairly new to Ruby on Rails.  I am using it to create a web API application and was wondering if instead of creating a schema based on my Model, can I do the reverse?  E.g. is it possible to create model that would fit with an already existing schema?  Something like that would be fairly easy in Java World using JPA but I am not so sure about Rails using DSL for databases.</p>\n\n<p>Do I have to manually change the migration files in this case? If yes, is there an easy/recommended way to do this?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "heroku", "dns"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1560278140, "post_id": 56549584, "comment_id": 99681457, "body": "How do you handle DNS records? What is your nameserver? How does your configuration look like? When did you change the configuration the last imte?"}, {"owner": {"reputation": 189, "user_id": 11604669, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nUn6Vjvj8mc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reG6n_9NfbomnKqJwn0m_cvFSDoeQ/mo/photo.jpg?sz=128", "display_name": "Gerold Astor", "link": "https://stackoverflow.com/users/11604669/gerold-astor"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1560278293, "post_id": 56549584, "comment_id": 99681527, "body": "@spickermann they are on Wix. I changed everything about 30 min ago. My TTL is 30 minutes though"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1560280851, "post_id": 56549584, "comment_id": 99682642, "body": "Was it 30 minutes too before you changed it? Did you check if the DNS entries were properly propagated \u2013 for example with a tool like <a href=\"https://www.whatsmydns.net/\" rel=\"nofollow noreferrer\">whatsmydns.net</a> ?"}], "owner": {"reputation": 189, "user_id": 11604669, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nUn6Vjvj8mc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reG6n_9NfbomnKqJwn0m_cvFSDoeQ/mo/photo.jpg?sz=128", "display_name": "Gerold Astor", "link": "https://stackoverflow.com/users/11604669/gerold-astor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560276949, "creation_date": 1560276949, "question_id": 56549584, "link": "https://stackoverflow.com/questions/56549584/website-seems-to-half-connect-but-only-sometimes", "title": "Website seems to half connect but only sometimes", "body": "<p>My problem is that this website does not seem too connect to my custom domain always. When I run host www.domainname.com I get one of two things</p>\n\n<pre><code>www.domainname.net is an alias for whispering-orangutan-d7h7k6icnz7lnatv0qdsptdd.herokudns.com.\nwhispering-orangutan.herokudns.com has address 34.231.75.48\nwhispering-orangutan.herokudns.com has address 52.2.175.150\nwhispering-orangutan.herokudns.com has address 54.165.51.142\nwhispering-orangutan.herokudns.com has address 52.203.53.176\nwhispering-orangutan.herokudns.com has address 54.164.181.42\nwhispering-orangutan.herokudns.com has address 34.196.237.103\nwhispering-orangutan.herokudns.com has address 3.209.102.29\nwhispering-orangutan.herokudns.com has address 54.173.32.212\n</code></pre>\n\n<p>but then other times I get</p>\n\n<pre><code>www.domainname.net has address 23.217.***.***\nwww.domainname.net has address 23.202.***.***\nwww.domainname.net is an alias for www235.wixdns.net.\nwww235.wixdns.net is an alias for balancer.wixdns.net.\n</code></pre>\n"}, {"tags": ["ruby", "selenium-webdriver", "rspec"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1560276159, "post_id": 56548994, "comment_id": 99680582, "body": "Please describe what the expected behavior is, what the actual behavior is, and include any error messages or stacktraces illustrating the issue."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11579306, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8qWW7uZkiCY/AAAAAAAAAAI/AAAAAAAAArQ/HqF9hXNydL4/photo.jpg?sz=128", "display_name": "Arun Kumar G Kumaraswamy", "link": "https://stackoverflow.com/users/11579306/arun-kumar-g-kumaraswamy"}, "edited": false, "score": 0, "creation_date": 1560353007, "post_id": 56549847, "comment_id": 99710556, "body": "I have tried but it is not working. Can you please suggest any other work around for this? Or else is there any configuration issues?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 11, "user_id": 11579306, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8qWW7uZkiCY/AAAAAAAAAAI/AAAAAAAAArQ/HqF9hXNydL4/photo.jpg?sz=128", "display_name": "Arun Kumar G Kumaraswamy", "link": "https://stackoverflow.com/users/11579306/arun-kumar-g-kumaraswamy"}, "edited": false, "score": 0, "creation_date": 1560356829, "post_id": 56549847, "comment_id": 99712631, "body": "@ArunKumarGKumaraswamy when you say &quot;its not working&quot; ... what specifically is happening?"}, {"owner": {"reputation": 11, "user_id": 11579306, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8qWW7uZkiCY/AAAAAAAAAAI/AAAAAAAAArQ/HqF9hXNydL4/photo.jpg?sz=128", "display_name": "Arun Kumar G Kumaraswamy", "link": "https://stackoverflow.com/users/11579306/arun-kumar-g-kumaraswamy"}, "edited": false, "score": 0, "creation_date": 1560770216, "post_id": 56549847, "comment_id": 99832206, "body": "the code within before(:each) block is not getting executed"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 11, "user_id": 11579306, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8qWW7uZkiCY/AAAAAAAAAAI/AAAAAAAAArQ/HqF9hXNydL4/photo.jpg?sz=128", "display_name": "Arun Kumar G Kumaraswamy", "link": "https://stackoverflow.com/users/11579306/arun-kumar-g-kumaraswamy"}, "edited": false, "score": 0, "creation_date": 1560786932, "post_id": 56549847, "comment_id": 99841308, "body": "@ArunKumarGKumaraswamy see the edit to my answer for minimal steps to reproduce. I tested it and it does work, we would need more info about your configuration to figure out why it was not working for you."}, {"owner": {"reputation": 11, "user_id": 11579306, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8qWW7uZkiCY/AAAAAAAAAAI/AAAAAAAAArQ/HqF9hXNydL4/photo.jpg?sz=128", "display_name": "Arun Kumar G Kumaraswamy", "link": "https://stackoverflow.com/users/11579306/arun-kumar-g-kumaraswamy"}, "edited": false, "score": 0, "creation_date": 1560824493, "post_id": 56549847, "comment_id": 99852646, "body": "Thanks for your update. I done with that. But now while executibng i am getting an error &quot;No SDK specified&quot;. But i have congifured RVM2.6.3 in the project settings. Please help on this."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 11, "user_id": 11579306, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8qWW7uZkiCY/AAAAAAAAAAI/AAAAAAAAArQ/HqF9hXNydL4/photo.jpg?sz=128", "display_name": "Arun Kumar G Kumaraswamy", "link": "https://stackoverflow.com/users/11579306/arun-kumar-g-kumaraswamy"}, "edited": false, "score": 0, "creation_date": 1560828359, "post_id": 56549847, "comment_id": 99853371, "body": "@ArunKumarGKumaraswamy I&#39;m figuring you&#39;re using RubyMine or some other IDE - I have no experience with this. I just run my Ruby code from the terminal."}, {"owner": {"reputation": 11, "user_id": 11579306, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8qWW7uZkiCY/AAAAAAAAAAI/AAAAAAAAArQ/HqF9hXNydL4/photo.jpg?sz=128", "display_name": "Arun Kumar G Kumaraswamy", "link": "https://stackoverflow.com/users/11579306/arun-kumar-g-kumaraswamy"}, "edited": false, "score": 0, "creation_date": 1560838881, "post_id": 56549847, "comment_id": 99855950, "body": "Ya I am using Intellij. Thanks for your response. I am also trying from my side. If you get any idea regarding this please share here."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 2, "last_activity_date": 1560786869, "last_edit_date": 1560786869, "creation_date": 1560278117, "answer_id": 56549847, "question_id": 56548994, "link": "https://stackoverflow.com/questions/56548994/rspec-hooksbefore-and-after-is-not-working/56549847#56549847", "title": "rspec hooks(before and after) is not working", "body": "<p>The <code>before</code> is not running because you have no <em>examples</em> - these are built with the <code>it</code> command:</p>\n\n<pre><code>describe \"sample\" do\n  before(:each) do\n    puts \"Inside before\"\n    @driver = Selenium::WebDriver.for :chrome\n    @driver.navigate.to \"http://google.com\"\n    sleep 5\n  end\n\n  it 'does a thing' do\n    puts \"Inside code\"\n    @driver = Selenium::WebDriver.for :chrome\n    @driver.navigate.to \"http://google.com\"\n    sleep 5\n  end\nend\n</code></pre>\n\n<p><em>Edit</em></p>\n\n<p>To prove that this works, I took these steps:</p>\n\n<ol>\n<li>Make new folder</li>\n<li>cd in folder and run <code>rspec --init</code></li>\n<li><p>Make new file <code>spec/sample_spec.rb</code> with content:</p>\n\n<pre><code>describe \"sample\" do\n  before(:each) do\n    puts \"Inside before\"\n  end\n\n  it 'does a thing' do\n    puts \"Inside code\"\n  end\nend\n</code></pre></li>\n<li>Run it with <code>rspec</code></li>\n</ol>\n\n<p>I am using rspec version 3.8, though it should work with other versions as well</p>\n"}], "owner": {"reputation": 11, "user_id": 11579306, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8qWW7uZkiCY/AAAAAAAAAAI/AAAAAAAAArQ/HqF9hXNydL4/photo.jpg?sz=128", "display_name": "Arun Kumar G Kumaraswamy", "link": "https://stackoverflow.com/users/11579306/arun-kumar-g-kumaraswamy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "closed_date": 1560770528, "answer_count": 1, "score": 1, "last_activity_date": 1560786869, "creation_date": 1560274408, "last_edit_date": 1560276115, "question_id": 56548994, "link": "https://stackoverflow.com/questions/56548994/rspec-hooksbefore-and-after-is-not-working", "closed_reason": "Not suitable for this site", "title": "rspec hooks(before and after) is not working", "body": "<p>Before hook is not working in the below code and i m using rvm 2.6.3</p>\n\n<pre><code>require 'rubygems'\nrequire 'selenium-webdriver'\nrequire 'rspec'\n\ndescribe \"sample\" do\n\n  puts \"Inside code\"\n  @driver = Selenium::WebDriver.for :chrome\n  @driver.navigate.to \"http://google.com\"\n  sleep 5\n\n\n before(:each) do\n   puts \"Inside before\"\n   @driver = Selenium::WebDriver.for :chrome\n   @driver.navigate.to \"http://google.com\"\n   sleep 5\n\n end\nend\n</code></pre>\n"}, {"tags": ["javascript", "ruby", "vue.js", "jekyll"], "comments": [{"owner": {"reputation": 21818, "user_id": 8583563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U42av.png?s=128&g=1", "display_name": "skirtle", "link": "https://stackoverflow.com/users/8583563/skirtle"}, "edited": false, "score": 1, "creation_date": 1560272865, "post_id": 56548549, "comment_id": 99679072, "body": "What happens if you use kebab-case instead?"}, {"owner": {"reputation": 445, "user_id": 1810801, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d82065f99d071c5d91294814991e6b2b?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/1810801/thomas"}, "reply_to_user": {"reputation": 21818, "user_id": 8583563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U42av.png?s=128&g=1", "display_name": "skirtle", "link": "https://stackoverflow.com/users/8583563/skirtle"}, "edited": false, "score": 0, "creation_date": 1560273922, "post_id": 56548549, "comment_id": 99679530, "body": "that works! I just noticed that Vue hints at this in console with: &#39;Prop &quot;navigationprevlabel&quot; is passed to component &lt;Anonymous&gt;, but the declared prop name is &quot;navigationPrevLabel&quot;. Note that HTML attributes are case-insensitive and camelCased props need to use their kebab-case equivalents when using in-DOM templates. You should probably use &quot;navigation-prev-label&quot; instead of &quot;navigationPrevLabel&quot;.&#39;"}, {"owner": {"reputation": 445, "user_id": 1810801, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d82065f99d071c5d91294814991e6b2b?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/1810801/thomas"}, "reply_to_user": {"reputation": 21818, "user_id": 8583563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U42av.png?s=128&g=1", "display_name": "skirtle", "link": "https://stackoverflow.com/users/8583563/skirtle"}, "edited": false, "score": 0, "creation_date": 1560274032, "post_id": 56548549, "comment_id": 99679589, "body": "Is kebob casing connecting with camelcased properties a functionality of Vue or something else?"}], "answers": [{"tags": [], "owner": {"reputation": 21818, "user_id": 8583563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U42av.png?s=128&g=1", "display_name": "skirtle", "link": "https://stackoverflow.com/users/8583563/skirtle"}, "is_accepted": true, "score": 3, "last_activity_date": 1560276796, "creation_date": 1560276796, "answer_id": 56549536, "question_id": 56548549, "link": "https://stackoverflow.com/questions/56548549/how-to-prevent-downcase-or-lowercase-conversion-of-attribute-names-for-a-vue-com/56549536#56549536", "title": "How to Prevent downcase or lowercase conversion of attribute names for a Vue component with Jeykll", "body": "<p>Vue allows the attributes used for passing props to use either camelCase or kebab-case. So if Jekyll is causing problems with <code>:perPage</code> you can just use <code>:per-page</code> instead.</p>\n\n<p><a href=\"https://vuejs.org/v2/guide/components-props.html#Prop-Casing-camelCase-vs-kebab-case\" rel=\"nofollow noreferrer\">https://vuejs.org/v2/guide/components-props.html#Prop-Casing-camelCase-vs-kebab-case</a></p>\n\n<p><a href=\"https://vuejs.org/v2/style-guide/#Prop-name-casing-strongly-recommended\" rel=\"nofollow noreferrer\">https://vuejs.org/v2/style-guide/#Prop-name-casing-strongly-recommended</a></p>\n\n<p>Vue will normalize these prop names when creating the component instances, so they'll always be accessible using camelCase on the instance. So it'll be <code>this.perPage</code> no matter how you pass it.</p>\n\n<p>I'm not 100% sure but I think the conversion is done in <code>normalizeProps</code>:</p>\n\n<p><a href=\"https://github.com/vuejs/vue/blob/3819af5c9dedde4d1ea81f9caa127e611c8752e3/src/core/util/options.js#L294\" rel=\"nofollow noreferrer\">https://github.com/vuejs/vue/blob/3819af5c9dedde4d1ea81f9caa127e611c8752e3/src/core/util/options.js#L294</a></p>\n"}], "owner": {"reputation": 445, "user_id": 1810801, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d82065f99d071c5d91294814991e6b2b?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/1810801/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 778, "favorite_count": 0, "accepted_answer_id": 56549536, "answer_count": 1, "score": 1, "last_activity_date": 1560276796, "creation_date": 1560272393, "question_id": 56548549, "link": "https://stackoverflow.com/questions/56548549/how-to-prevent-downcase-or-lowercase-conversion-of-attribute-names-for-a-vue-com", "title": "How to Prevent downcase or lowercase conversion of attribute names for a Vue component with Jeykll", "body": "<p>I'm using a Vue component, vue-carousel, in a Jekyll project. Everything is working except the control via attributes because the component is expecting camel case but Jekyll converts attributes to lowercase. So my code:</p>\n\n<pre><code>&lt;carousel\n  :perPage=\"1\"\n  :navigationEnabled=\"true\"\n  :navigationNextLabel=\"'\u276f'\"\n  :navigationPrevLabel=\"'\u276e'\"\n  :paginationEnabled=\"false\"\n  class=\"gr__carousel\"&gt;\n\n  {% for slide in include.content.slides %}\n    {% include slide.html %}\n  {% endfor %}\n&lt;/carousel&gt;\n</code></pre>\n\n<p>gets generated with attributes:</p>\n\n<pre><code>&lt;div \n  class=\"VueCarousel gr__carousel\" \n  perpage=\"1\" \n  navigationenabled=\"true\" \n  navigationnextlabel=\"\u276f\" \n  navigationprevlabel=\"\u276e\"&gt;\n...\n&lt;/div&gt;\n</code></pre>\n\n<p>one solution from <a href=\"https://stackoverflow.com/questions/19074064/why-jekyll-convert-my-capital-words-into-lowercase-in-categories\">Why Jekyll convert my Capital words into lowercase in Categories</a></p>\n\n<p>was to edit the Jekyll gem but I would like to avoid this if possible. Is there any other work around for this situation?</p>\n"}, {"tags": ["ruby", "postgis", "squeel", "rgeo"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1560268664, "post_id": 56547489, "comment_id": 99677013, "body": "<code>find_by_sql</code> perhaps."}, {"owner": {"reputation": 769, "user_id": 3017719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ae824aa126b4c6cb945a3c03dd197f39?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/3017719/patrick"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1560269510, "post_id": 56547489, "comment_id": 99677450, "body": "@maxpleaner Using <code>find_by_sql</code> returns the Trip objects only, not the result produced by the function <code>st_intersection</code>."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1560273912, "post_id": 56547489, "comment_id": 99679523, "body": "Try <code>Trip.find_by_sql([&quot;SELECT id, ST_ASEWKT(ST_INTERSECTION(geometry, ?)) AS st_asewk FROM trips WHERE status=&#39;active&#39;&quot;])[0].st_asewk</code> The result is there, it&#39;s easier to access if you give it an alias"}], "answers": [{"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 2, "last_activity_date": 1560271919, "last_edit_date": 1560271919, "creation_date": 1560271600, "answer_id": 56548346, "question_id": 56547489, "link": "https://stackoverflow.com/questions/56547489/calling-postgis-functions-within-ruby/56548346#56548346", "title": "Calling PostGIS functions within Ruby", "body": "<p>There are two problems to solve here.</p>\n\n<p>The first is using an SQL function within a <code>.select</code> clause. Ordinarily this is pretty easy\u2014you just use <code>AS</code> to give the result a name. Here's an example from the <a href=\"https://guides.rubyonrails.org/v5.2.0/active_record_querying.html#group\" rel=\"nofollow noreferrer\">ActiveRecord Rails Guide</a>:</p>\n\n<pre><code>Order.select(\"date(created_at) as ordered_date, sum(price) as total_price\").group(\"date(created_at)\")\n</code></pre>\n\n<p>The resulting Order objects would have <code>ordered_date</code> and <code>total_price</code> attributes.</p>\n\n<p>This brings us to the second problem, which is that Rails doesn't give us an easy way to parameterize a <code>select</code> (i.e. use a <code>?</code> placeholder), so (as far as I can tell) you'll need to do it yourself with <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Sanitization/ClassMethods.html#method-i-sanitize_sql_array\" rel=\"nofollow noreferrer\"><code>sanitize_sql_array</code></a>:</p>\n\n<pre><code>sql_for_select_intersection = sanitize_sql_array([\n  \"ST_ASEWKT(ST_INTERSECTION(geometry, ?)) AS intersection\",\n  geometry,\n])\n</code></pre>\n\n<p>This will return a sanitized SQL fragment like <code>ST_ASEWKT(ST_INTERSECTION(geometry, '...'))</code>, which you can then use to specify a field in <code>select</code>:</p>\n\n<pre><code>Trip.where(status: \"active\").select(:id, sql_for_select_intersection))\n</code></pre>\n\n<p>The resulting query will return Trip objects with <code>id</code> and <code>intersection</code> attributes.</p>\n"}], "owner": {"reputation": 769, "user_id": 3017719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ae824aa126b4c6cb945a3c03dd197f39?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/3017719/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 56548346, "answer_count": 1, "score": 0, "last_activity_date": 1560271919, "creation_date": 1560268281, "question_id": 56547489, "link": "https://stackoverflow.com/questions/56547489/calling-postgis-functions-within-ruby", "title": "Calling PostGIS functions within Ruby", "body": "<p>I need to execute the PostGIS function <code>st_intersection</code> within an SQL SELECT clause in Ruby. At the moment I am doing it as raw SQL query:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>sql_query = \"SELECT id, ST_ASEWKT(ST_INTERSECTION(geometry, ?)) FROM trips WHERE status='active';\"\nintersections = Trip.execute_sql(sql_query, self[:geometry].to_s)\n</code></pre>\n\n<p>This way has the disadvantage that I receive the result as text and I need to parse the objects out of the strings. Much nicer would be the use of the ActiveRecord interface to make queries. However, I could not find any solution yet to run PostGIS functions (e.g. <code>st_intersection</code>) within ActiveRecord.</p>\n\n<p>An earlier version of the activerecord-postgis-adapter's <a href=\"https://github.com/rgeo/activerecord-postgis-adapter/pull/147/commits/ebddf39b67ad11c63fa2c8554729b322b66a7f6b#diff-04c6e90faac2675aa89e2176d2eec7d8\" rel=\"nofollow noreferrer\">README</a> showed a nice example using the gem <code>squeel</code>: </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>my_polygon = get_my_polygon    # Obtain the polygon as an RGeo geometry\nMySpatialTable.where{st_intersects(lonlat, my_polygon)}.first\n</code></pre>\n\n<p>As this is not part of the current README anymore, I am wondering whether this is not recommended or if there are any better alternatives.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1560266243, "post_id": 56546840, "comment_id": 99675486, "body": "<code>rvm use 2.3.8 --default</code> should do it."}, {"owner": {"reputation": 308, "user_id": 2218094, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PnUld.jpg?s=128&g=1", "display_name": "SgtPepper", "link": "https://stackoverflow.com/users/2218094/sgtpepper"}, "edited": false, "score": 0, "creation_date": 1560266334, "post_id": 56546840, "comment_id": 99675546, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/37914702/how-to-fix-your-ruby-version-is-2-3-0-but-your-gemfile-specified-2-2-5-while\">How to fix &quot;Your Ruby version is 2.3.0, but your Gemfile specified 2.2.5&quot; while server starting</a>"}, {"owner": {"reputation": 769, "user_id": 9739007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18Kgd.png?s=128&g=1", "display_name": "McFloofenbork", "link": "https://stackoverflow.com/users/9739007/mcfloofenbork"}, "reply_to_user": {"reputation": 308, "user_id": 2218094, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PnUld.jpg?s=128&g=1", "display_name": "SgtPepper", "link": "https://stackoverflow.com/users/2218094/sgtpepper"}, "edited": false, "score": 0, "creation_date": 1560267293, "post_id": 56546840, "comment_id": 99676171, "body": "@SgtPepper Not a duplicate because that&#39;s exactly what I do, but it does not change my Ruby version permanently. I&#39;ve seen that post"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1560268676, "post_id": 56546840, "comment_id": 99677021, "body": "In that case, you likely have installed your Ruby 2.51. some other way rather than with rvm. It might be installed from system packages or some other ruby manager like chruby or rbenv. Still, RVM-installed rubies should normally take precedence before system rubies. Check that your RVM config <a href=\"https://rvm.io/rvm/install#3-reload-shell-configuration-amp-test\" rel=\"nofollow noreferrer\">is correctly installed</a> and makle sure it is properly loaded when running your script (which might not be the case for services rather than an interactive shell)"}, {"owner": {"reputation": 769, "user_id": 9739007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18Kgd.png?s=128&g=1", "display_name": "McFloofenbork", "link": "https://stackoverflow.com/users/9739007/mcfloofenbork"}, "edited": false, "score": 0, "creation_date": 1560275433, "post_id": 56546840, "comment_id": 99680264, "body": "You may be right, I did try using <code>rbenv</code>. Must have installed some extra versions of Ruby. Darn!"}], "owner": {"reputation": 769, "user_id": 9739007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18Kgd.png?s=128&g=1", "display_name": "McFloofenbork", "link": "https://stackoverflow.com/users/9739007/mcfloofenbork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 253, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560273902, "creation_date": 1560266090, "last_edit_date": 1560273902, "question_id": 56546840, "link": "https://stackoverflow.com/questions/56546840/your-ruby-version-is-2-5-1-but-your-gemfile-specified-2-3-8", "title": "Your Ruby version is 2.5.1, but your Gemfile specified 2.3.8", "body": "<p>Yes, my Gemfile does specify 2.3.8, and I want to use 2.3.8. I keep getting this annoying error message whenever I start up my VirtualBox machine. I want to get rid of it permanently. </p>\n\n<p>My question is not a duplicate of <a href=\"https://stackoverflow.com/questions/37914702/how-to-fix-your-ruby-version-is-2-3-0-but-your-gemfile-specified-2-2-5-while\">this question</a> because I do what that answer says, but it still reverts to the incorrect version. I want to find a fix that permanently sets my Ruby version to the one I want. Otherwise I am opening up a new terminal session and having to <code>install</code> and then <code>use</code> the correct version.</p>\n\n<p>What is confusing is when I <code>rvm uninstall 2.5.1</code>, it says <code>ruby-2.5.1 - #already gone</code>. When I run <code>ruby -v</code>, I get: <code>ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-linux-gnu]</code>. This is contradicting. I've uninstalled but my Ruby version is still 2.5.1?</p>\n\n<p>I've also ran <code>gem install bundler</code>. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "ruby-on-rails-5", "rails-activerecord"], "comments": [{"owner": {"reputation": 179, "user_id": 2367851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BZ7NP.gif?s=128&g=1", "display_name": "sai Gorantla", "link": "https://stackoverflow.com/users/2367851/sai-gorantla"}, "edited": false, "score": 0, "creation_date": 1560264026, "post_id": 56546182, "comment_id": 99674061, "body": "FYI- if you wonder why in world I have person as foreign key in address and phone table, this is due to some validation constraint I have to meet."}, {"owner": {"reputation": 117, "user_id": 4091646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a7280005cf9ff33e12ef922fb75a7e?s=128&d=identicon&r=PG", "display_name": "Wender Freese", "link": "https://stackoverflow.com/users/4091646/wender-freese"}, "edited": false, "score": 0, "creation_date": 1560265151, "post_id": 56546182, "comment_id": 99674816, "body": "You actually can, you just need to let attribute_id optional and alternate between them, but look, your design looks a little bit weird, I&#39;d suggest you to relate your tables only with person_id and through a person, you can get their emails, phones and whatever other info you need."}, {"owner": {"reputation": 179, "user_id": 2367851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BZ7NP.gif?s=128&g=1", "display_name": "sai Gorantla", "link": "https://stackoverflow.com/users/2367851/sai-gorantla"}, "reply_to_user": {"reputation": 117, "user_id": 4091646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a7280005cf9ff33e12ef922fb75a7e?s=128&d=identicon&r=PG", "display_name": "Wender Freese", "link": "https://stackoverflow.com/users/4091646/wender-freese"}, "edited": false, "score": 0, "creation_date": 1560265683, "post_id": 56546182, "comment_id": 99675137, "body": "@WenderFreese Thank you for response, not really sure what you mean by making attribute_id optional? which id are you referring to? person_id? being optional in phone and address table?"}, {"owner": {"reputation": 179, "user_id": 2367851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BZ7NP.gif?s=128&g=1", "display_name": "sai Gorantla", "link": "https://stackoverflow.com/users/2367851/sai-gorantla"}, "reply_to_user": {"reputation": 117, "user_id": 4091646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a7280005cf9ff33e12ef922fb75a7e?s=128&d=identicon&r=PG", "display_name": "Wender Freese", "link": "https://stackoverflow.com/users/4091646/wender-freese"}, "edited": false, "score": 0, "creation_date": 1560266234, "post_id": 56546182, "comment_id": 99675481, "body": "@WenderFreese My schema is little odd due to constraints that we have to create in order to avoid duplicates"}, {"owner": {"reputation": 117, "user_id": 4091646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a7280005cf9ff33e12ef922fb75a7e?s=128&d=identicon&r=PG", "display_name": "Wender Freese", "link": "https://stackoverflow.com/users/4091646/wender-freese"}, "edited": false, "score": 0, "creation_date": 1560267803, "post_id": 56546182, "comment_id": 99676503, "body": "It seemed to me at a glance that you would have or person_id or email_id in <code>address</code> table, for example, if it would the case you&#39;d need to make them optional to because sometimes one of them would be <code>nil</code>."}, {"owner": {"reputation": 117, "user_id": 4091646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a7280005cf9ff33e12ef922fb75a7e?s=128&d=identicon&r=PG", "display_name": "Wender Freese", "link": "https://stackoverflow.com/users/4091646/wender-freese"}, "edited": false, "score": 0, "creation_date": 1560268000, "post_id": 56546182, "comment_id": 99676620, "body": "I don&#39;t have too much context to suggest an approach but It seems you need to manage <code>accepts_nested_attributes_for</code> in the other models if you are creating them in different moments or receive the parameters, create a transaction and instantiate/create each model separately before creating its relation."}], "owner": {"reputation": 179, "user_id": 2367851, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BZ7NP.gif?s=128&g=1", "display_name": "sai Gorantla", "link": "https://stackoverflow.com/users/2367851/sai-gorantla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560264428, "creation_date": 1560263862, "last_edit_date": 1560264428, "question_id": 56546182, "link": "https://stackoverflow.com/questions/56546182/can-we-have-multiple-foreign-key-in-active-record-schema", "title": "Can we have multiple foreign key in active record schema?", "body": "<p>I have an schema that has person table, email table, phone table and address table.</p>\n\n<p>Person model</p>\n\n<pre><code>class Person&lt; ApplicationRecord\n  has_many :emails, dependent: :destroy\n  accepts_nested_attributes_for :emails\n  default_scope { order(created_at: :desc) }\nend\n</code></pre>\n\n<p>Email Model</p>\n\n<pre><code>class Email&lt; ApplicationRecord\n  belongs_to :Person\n  has_one :phone, dependent: :destroy\n  has_many :address, dependent: :destroy\n  accepts_nested_attributes_for :phone\n  accepts_nested_attributes_for :address\nend\n</code></pre>\n\n<p>Phone Model</p>\n\n<pre><code>class Phone&lt; ApplicationRecord\n  belongs_to :Email\nend\n</code></pre>\n\n<p>Address Model</p>\n\n<pre><code>class Address &lt; ApplicationRecord\n      belongs_to :Email\n   end\n</code></pre>\n\n<p>My schema looks like this</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 2019_06_03_231058) do\n\n  create_table \"emails\", id: :string, limit: 36, options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\", force: :cascade do |t|\n    t.boolean \"deleted\", default: false, null: false\n    t.datetime \"created_at\", precision: 3, null: false\n    t.datetime \"updated_at\", precision: 3, null: false\n    t.string \"Person_id\", limit: 36\n    t.index [\"Person_id\", \"created_at\"], name: \"index_email_on_Person_id_and_created_at\"\n  end\n\n  create_table \"phones\", id: :string, limit: 36, options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\", force: :cascade do |t|\n    t.string \"phone_id\", limit: 36, null: false\n    t.boolean \"deleted\", default: false, null: false\n    t.datetime \"created_at\", precision: 3, null: false\n    t.datetime \"updated_at\", precision: 3, null: false\n    t.string \"email_id\", limit: 36\n    t.string \"person_id\", limit: 36\n    t.index [\"email_id\", \"created_at\"], name: \"index_phone_on_email_id_and_created_at\"\n    t.index [\"person_id\"], name: \"fk_rails_7119a1d90f\"\n  end\n\n  create_table \"persons\", id: :string, limit: 36, options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\", force: :cascade do |t|\n    t.boolean \"deleted\", default: false, null: false\n    t.datetime \"created_at\", precision: 3, null: false\n    t.datetime \"updated_at\", precision: 3, null: false\n    t.index [\"created_at\"], name: \"index_persons_on_created_at\"\n  end\n\n  create_table \"address\", id: :string, limit: 36, options: \"ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\", force: :cascade do |t|\n    t.string \"address_id\", limit: 36, null: false\n    t.boolean \"deleted\", default: false, null: false\n    t.datetime \"created_at\", precision: 3, null: false\n    t.datetime \"updated_at\", precision: 3, null: false\n    t.string \"email_id\", limit: 36\n    t.string \"person_id\", limit: 36\n    t.index [\"email_id\", \"created_at\"], name: \"index_address_on_email_id_and_created_at\"\n    t.index [\"person_id\"], name: \"fk_rails_485c78b376\"\n  end\n\n  add_foreign_key \"emails\", \"persons\"\n  add_foreign_key \"phones\", \"emails\"\n  add_foreign_key \"phones\", \"persons\"\n  add_foreign_key \"address\", \"emails\"\n  add_foreign_key \"address\", \"persons\"\nend\n</code></pre>\n\n<p>So if you notice in my schema at very end I have 2 foreign keys for phones and address.</p>\n\n<p>when I insert data email_id is placed in person table but not person_id.\nI see same issue in address table as well where email_id is placed but not person_id</p>\n\n<p>I am new to rails Active record concept when through online documentation couldn't really solve this issue any help is much appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "simple-form"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1560265234, "post_id": 56544662, "comment_id": 99674885, "body": "What does the data look like that you want to render options for?"}], "answers": [{"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 2, "last_activity_date": 1560272169, "last_edit_date": 1560272169, "creation_date": 1560269688, "answer_id": 56547895, "question_id": 56544662, "link": "https://stackoverflow.com/questions/56544662/rails-generate-select-with-both-options-and-option-groups/56547895#56547895", "title": "Rails generate select with both options and option groups", "body": "<p>This is hard to answer precisely without knowing what the data looks like, but I'm going to guess that you have something like this:</p>\n\n<pre><code>@grouped_options = [\n  [\"Some nil value label\"],\n  [\"Option one\", \"1\"],\n  [\"Option Group 1\",\n    [\n      [\"Option one in group 1\", \"1:1\"],\n      [\"Option two in group 1\", \"1:2\"],\n    ]\n  ],\n  [\"Option Group 2\",\n    [\n      [\"Option one in group 2\", \"2:1\"],\n      [\"Option two in group 2\", \"2:2\"],\n    ]\n  ],\n]\n</code></pre>\n\n<p>With that, you have a couple options. In plain ERB, you can do it like this:</p>\n\n<pre class=\"lang-erb prettyprint-override\"><code>&lt;%= select \"thing\", \"some_attr\" do %&gt;\n  &lt;% @grouped_options.each do |label, value_or_options| %&gt;\n    &lt;% if Array === value_or_options %&gt;\n      &lt;%= tag.optgroup options_for_select(value_or_options), label: label %&gt;\n    &lt;% else %&gt;\n      &lt;%= tag.option label, value: value_or_options %&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Personally, though, I would write a helper. The <a href=\"https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-chunk\" rel=\"nofollow noreferrer\"><code>Enumerable#chunk</code></a> method splits an array into runs of values that return the same thing for the given block, making it easy to separate the grouped from the non-grouped items so we can use <code>grouped_options_for_select</code> and <code>options_for_select</code>, respectively:</p>\n\n<pre><code>def ungrouped_and_grouped_options_for_select(choices, selected_key = nil)\n  capture do\n    choices\n      .chunk {|_, choice_or_group| Array === choice_or_group }\n      .each do |is_group, choices_or_grouped_choices|\n        if is_group\n          concat grouped_options_for_select(choices_or_grouped_choices, selected_key)\n        else\n          concat options_for_select(choices_or_grouped_choices, selected_key)\n        end\n      end\n  end\nend\n</code></pre>\n\n<p>You could then use it this:</p>\n\n<pre class=\"lang-erb prettyprint-override\"><code>&lt;%= select \"thing\", \"some_attr\" do %&gt;\n  &lt;%= ungrouped_and_grouped_options_for_select(@grouped_options) %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>You can see both of these approaches in action on repl.it: <a href=\"https://repl.it/@jrunning/UnacceptablePlaintiveServer\" rel=\"nofollow noreferrer\">https://repl.it/@jrunning/UnacceptablePlaintiveServer</a> (see <code>views/tests/index.html.erb</code>, <code>controllers/tests_controller.rb</code>, and <code>helpers/application_helper.rb</code>).</p>\n"}], "owner": {"reputation": 857, "user_id": 1445968, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9fbdbd08e711a0a8a57685cacf70e1?s=128&d=identicon&r=PG", "display_name": "Nas", "link": "https://stackoverflow.com/users/1445968/nas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560272169, "creation_date": 1560259060, "question_id": 56544662, "link": "https://stackoverflow.com/questions/56544662/rails-generate-select-with-both-options-and-option-groups", "title": "Rails generate select with both options and option groups", "body": "<p>Is it possible to generate select like:</p>\n\n<pre><code>&lt;select&gt;\n  &lt;option value&gt;Some nill value label&lt;/option&gt;\n  &lt;option value=\"1\"&gt;Option one&lt;/option&gt;\n  &lt;optgroup label=\"Option Group 1\" class=\"css-class-for-option-group-1\"&gt;\n    &lt;option value=\"1:1\"&gt;Option one in group 1&lt;/option&gt;\n    &lt;option value=\"1:2\"&gt;Option two in group 1&lt;/option&gt;\n  &lt;/optgroup&gt;\n  &lt;optgroup label=\"Option Group 2\" class=\"css-class-for-option-group-2\"&gt;\n    &lt;option value=\"2:1\"&gt;Option one in group 2&lt;/option&gt;\n    &lt;option value=\"2:2\"&gt;Option two in group 2&lt;/option&gt;\n  &lt;/optgroup&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>I tried to use the <code>grouped_options_for_select</code>, but I failed to find I way to pass both option and groups to it. Is there any way to achieve this? I am open to suggestions using SimpleForm as well.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1560253388, "post_id": 56542789, "comment_id": 99667423, "body": "FWIW, I can&#39;t make sense of the title. You might want to rewrite it."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1560255049, "post_id": 56542789, "comment_id": 99668400, "body": "An object is, <b>BY DEFINITION</b>, an instance of a class. I don&#39;t really understand what your <code>new_article</code> method is trying to do, it&#39;s currently - rather than creating some <code>Article</code> instance - appending to an <code>Array</code> and returning a <code>Hash</code>. (So it&#39;s still an object, but it&#39;s an instance of <code>Hash</code>.) I&#39;d suggest back-tracking a little and thinking about what that method is actually supposed to achieve."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1560255186, "post_id": 56542789, "comment_id": 99668464, "body": "I suspect the key thing you&#39;re missing is the definition of an <code>Article</code> class, to coincide with the <code>Blog</code> class."}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1560254409, "post_id": 56542904, "comment_id": 99668005, "body": "<code>OpenStruct</code> is what mimicking JS object access."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1560254862, "post_id": 56542904, "comment_id": 99668291, "body": "@AlekseiMatiushkin It is, it is. But it should be only a step stone here, at best. Eventually one needs an actual model class."}, {"owner": {"reputation": 1, "user_id": 10123095, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wG81MyFxeP4/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ruz4p1UMiAkO8LX4PwmgWsHMFt2g/mo/photo.jpg?sz=128", "display_name": "moses gathuku", "link": "https://stackoverflow.com/users/10123095/moses-gathuku"}, "edited": false, "score": 0, "creation_date": 1560261774, "post_id": 56542904, "comment_id": 99672587, "body": "@SergioTulentsev Leave this i used it for testing, Help me understand how i can achieve <code>test_new_article</code>  tests in my test class."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 1, "user_id": 10123095, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wG81MyFxeP4/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ruz4p1UMiAkO8LX4PwmgWsHMFt2g/mo/photo.jpg?sz=128", "display_name": "moses gathuku", "link": "https://stackoverflow.com/users/10123095/moses-gathuku"}, "edited": false, "score": 0, "creation_date": 1560262808, "post_id": 56542904, "comment_id": 99673253, "body": "@mosesgathuku: don&#39;t know how to do that without writing that method for you, but in one sentence: &quot;Look at the error and understand it, write just enough code to fix the error, re-run test&quot;"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 1, "user_id": 10123095, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wG81MyFxeP4/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ruz4p1UMiAkO8LX4PwmgWsHMFt2g/mo/photo.jpg?sz=128", "display_name": "moses gathuku", "link": "https://stackoverflow.com/users/10123095/moses-gathuku"}, "edited": false, "score": 0, "creation_date": 1560262905, "post_id": 56542904, "comment_id": 99673327, "body": "@mosesgathuku: this error, for example. &quot;undefined method &#39;id&#39; for a Hash&quot;. The simplest code that&#39;d make it go away would be <code>OpenStruct.new(id: nil)</code> at the end of <code>new_article</code> method. Now you&#39;ll get another error. Deal with it accordingly."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 0, "last_activity_date": 1560253337, "creation_date": 1560253337, "answer_id": 56542904, "question_id": 56542789, "link": "https://stackoverflow.com/questions/56542789/how-to-call-functions-in-ruby-0n-objected-which-are-not-instance-of-class/56542904#56542904", "title": "How to call functions in Ruby 0n objected which are not instance of Class", "body": "<p>In ruby you do not access keys/values in a hash by using dot notation (unlike, say, javascript). Either change your access to <code>article['id']</code> or return a proper Article object from that method.</p>\n"}], "owner": {"reputation": 1, "user_id": 10123095, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wG81MyFxeP4/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ruz4p1UMiAkO8LX4PwmgWsHMFt2g/mo/photo.jpg?sz=128", "display_name": "moses gathuku", "link": "https://stackoverflow.com/users/10123095/moses-gathuku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1560253337, "creation_date": 1560252873, "question_id": 56542789, "link": "https://stackoverflow.com/questions/56542789/how-to-call-functions-in-ruby-0n-objected-which-are-not-instance-of-class", "title": "How to call functions in Ruby 0n objected which are not instance of Class", "body": "<p>Am a Ruby begginer, am building a simple ruby Blog  application guided by minitests, initially all the tests are written so am only making sure my code runs all the tests.</p>\n\n<p>From the error am getting am not able to call methods which are not intances of class.</p>\n\n<p>Here are tests</p>\n\n<pre><code># build a blog console application and make the tests pass\n# Have one file for the app (app.rb), \n# one file fo the runner (main.rb) \n# and this test file (test_blog.rb).\n# when you run \n\n# ruby ./main.rb\n\n# it should run the test and pass\n\n\nclass TestBlogApp &lt; Minitest::Test\n  def setup\n    @blog = Blog.new(name: 'The best Blog')\n  end\n\n  def test_new_blog\n\n    refute_nil @blog.id, 'id is initialized automatically'\n    assert_equal @blog.name, 'The best Blog'\n    assert_equal @blog.articles, [] \n    @blog.name = 'New Name'\n    assert_equal @blog.name, 'New Name', 'Can edit field'\n    assert_raises NoMethodError, 'id cannot be assigned' do\n      @blog.id = 'new_id'\n    end \n    assert_raises ArgumentError, 'nil not allowed' do\n      Blog.new\n    end  \n  end\n\n  def test_new_article\n    title = 'Arcticle 1'\n    body = 'Article 1 body'\n    article_1 = @blog.new_article(title: title, body: body)\n    refute_nil article_1.id, 'id is initialized automatically'\n    assert_equal article_1.title, title\n    assert_equal article_1.body, body\n    assert_equal article_1.comments, []\n    article_1.title = 'New Title'\n    assert_equal article_1.title, 'New Title', 'Can edit field'\n    article_1.body = 'New Body'\n    assert_equal article_1.body, 'New Body', 'Can edit field'\n    assert_raises NoMethodError, 'id cannot be assigned' do\n      article_1.id = 'new_id'\n    end\n    assert_raises ArgumentError, 'nil not allowed' do\n      Article.new\n    end \n  end\n\n  def test_articles_array\n    2.times do\n      @blog.new_article(title:'Article', body: 'Article body')\n    end\n    assert_equal @blog.articles.size, 2\n  end\n\n  def test_new_comments\n    article = @blog.new_article(title:'Article', body: 'Article body')\n    comment_body = 'This is great'\n    comment = article.new_comment(body: comment_body)\n    refute_nil comment.id, 'id is initialized automatically'\n    assert_equal comment.body, comment_body\n    comment.body = 'New Body'\n    assert_equal comment.body, 'New Body', 'Can edit field'\n    assert_raises NoMethodError, 'id cannot be assigned' do\n      comment.id = 'new_id'\n    end\n    assert_raises ArgumentError, 'nil not allowed' do\n      Comment.new\n    end \n  end\n\n  def test_comments_array\n    article = @blog.new_article(title:'Article', body: 'Article body')\n    2.times do\n      article.new_comment(body: 'This is great')\n    end\n    assert_equal article.comments.size, 2\n  end\nend\n</code></pre>\n\n<p>Below is my code </p>\n\n<pre><code>require 'minitest/autorun'\nrequire 'minitest/spec'\nrequire 'minitest/pride'\nrequire_relative 'test_blog'\n\nclass Blog\nattr_accessor:name,:articles\nattr_reader:id \n\ndef initialize(name:)\n@name=name\n@id=rand(1..100)\n@articles=[]\nend \n\ndef new_article(title:, body:)\narticles &lt;&lt; title \n\n{\n  'id'=&gt;rand(1..100).to_s,\n  'title'=&gt;title,\n  'body'=&gt;body,\n}\n\nend\n\n\nend\n\n#blog=Blog.new(name:'the best blog')\n#p blog.name\n\n\n#article_1=blog.new_article(title:'ruby arguments',body:'balalalalalala')\n#p article_1.id\n\n</code></pre>\n\n<p>And finnaly the errors am getting</p>\n\n<pre><code>ruby 2.5.0p0 (2017-12-25 revision 61468) [x86_64-linux]\n\nRun options: --seed 32368\n\n# Running:\n\n*E*EE\n\nFabulous run in 0.003594s, 1391.2285 runs/s, 1947.7199 assertions/s.\n\n  1) Error:\nTestBlogApp#test_new_article:\nNoMethodError: undefined method `id' for {\"id\"=&gt;\"88\", \"title\"=&gt;\"Arcticle 1\", \"body\"=&gt;\"Article 1 body\"}:Hash\n    /home/runner/test_blog.rb:36:in `test_new_article'\n\n  2) Error:\nTestBlogApp#test_comments_array:\nNoMethodError: undefined method `new_comment' for {\"id\"=&gt;\"47\", \"title\"=&gt;\"Article\", \"body\"=&gt;\"Article body\"}:Hash\n    /home/runner/test_blog.rb:78:in `block in test_comments_array'\n    /home/runner/test_blog.rb:77:in `times'\n    /home/runner/test_blog.rb:77:in `test_comments_array'\n\n  3) Error:\nTestBlogApp#test_new_comments:\nNoMethodError: undefined method `new_comment' for {\"id\"=&gt;\"45\", \"title\"=&gt;\"Article\", \"body\"=&gt;\"Article body\"}:Hash\n    /home/runner/test_blog.rb:62:in `test_new_comments'\n\n5 runs, 7 assertions, 0 failures, 3 errors, 0 skips\nexit status 1\n</code></pre>\n"}, {"tags": ["ruby", "graphql"], "answers": [{"tags": [], "owner": {"reputation": 74, "user_id": 11400863, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9512e45aea9fa5b1125e56f48ff8638a?s=128&d=identicon&r=PG&f=1", "display_name": "TolichP", "link": "https://stackoverflow.com/users/11400863/tolichp"}, "is_accepted": false, "score": 0, "last_activity_date": 1560251774, "creation_date": 1560251774, "answer_id": 56542503, "question_id": 56540787, "link": "https://stackoverflow.com/questions/56540787/fetch-key-not-found-data-keyerror-graphql-client-error/56542503#56542503", "title": "`fetch&#39;: key not found: &quot;data&quot; (KeyError) : graphql-client error", "body": "<p>This error appears due to response you receive via fetching <a href=\"https://github.com/graphql\" rel=\"nofollow noreferrer\">https://github.com/graphql</a>.</p>\n\n<p>You can use <code>binding.pry</code> (<a href=\"https://github.com/deivid-rodriguez/pry-byebug\" rel=\"nofollow noreferrer\">this gem</a>), for example, to see what happening, when you try to run <code>load_schema</code> method.\nIt tries to fetch <code>data</code> from response here: <a href=\"https://i.imgur.com/9T9WRUu.png\" rel=\"nofollow noreferrer\">http://i.imgur.com/9T9WRUu.png</a></p>\n\n<p>But there is no <code>data</code> attribute, because you get <code>{\"errors\"=&gt;[{\"message\"=&gt;\"422 Unprocessable Entity\"}]}</code></p>\n\n<p>Try to fetch <a href=\"http://graphql-swapi.parseapp.com/\" rel=\"nofollow noreferrer\">http://graphql-swapi.parseapp.com/</a>, for example, worked for me.</p>\n"}], "owner": {"reputation": 11, "user_id": 7121658, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3huHenPePfU/AAAAAAAAAAI/AAAAAAAAACI/tFwPLMMV_Ls/photo.jpg?sz=128", "display_name": "Nithin raj", "link": "https://stackoverflow.com/users/7121658/nithin-raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 947, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560251774, "creation_date": 1560246013, "last_edit_date": 1560249872, "question_id": 56540787, "link": "https://stackoverflow.com/questions/56540787/fetch-key-not-found-data-keyerror-graphql-client-error", "title": "`fetch&#39;: key not found: &quot;data&quot; (KeyError) : graphql-client error", "body": "<p>I was trying to use the graphql query within ruby to fetch github repositories. Before writing the query, I was working on getting the graphql-client working. I'm facing issues with graphql client. </p>\n\n<p>I was following this link for graphql client: \n        <a href=\"https://github.com/github/graphql-client\" rel=\"nofollow noreferrer\">https://github.com/github/graphql-client</a></p>\n\n<pre><code>require 'graphql'\nrequire 'graphql/client'\nrequire 'graphql/client/http'\n\nmodule MyGraphQL\n  HTTP = GraphQL::Client::HTTP.new('https://github.com/graphql') do\n    def client_context\n      { access_token: 'xxxxxxxxxxxxxxxxxx' }\n    end\n\n    def headers(_context)\n      client_context\n    end\n  end\n\n  Schema = GraphQL::Client.load_schema(HTTP)\n\n  Client = GraphQL::Client.new(schema: Schema, execute: HTTP)\nend\n\n</code></pre>\n\n<p>I'm getting the following errors in a terminal:</p>\n\n<pre><code>    'fetch': key not found: \"data\" (KeyError)\n    'load'\n    'load_schema'\n    'load_schema'\n</code></pre>\n"}, {"tags": ["ruby", "mongodb"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1560246028, "post_id": 56540710, "comment_id": 99663223, "body": "This <code>$lt</code> here is not the same <code>$lt</code> as in <code>find</code>. Different syntax: <a href=\"https://docs.mongodb.com/manual/reference/operator/aggregation/lt/#exp._S_lt\" rel=\"nofollow noreferrer\">docs.mongodb.com/manual/reference/operator/aggregation/lt/&hellip;</a>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1560246054, "post_id": 56540710, "comment_id": 99663235, "body": "And also should be <code>$events</code>."}, {"owner": {"reputation": 93455, "user_id": 187141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG", "display_name": "yegor256", "link": "https://stackoverflow.com/users/187141/yegor256"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1560246133, "post_id": 56540710, "comment_id": 99663281, "body": "@SergioTulentsev can you please post an answer with the right syntax?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1560246183, "post_id": 56540710, "comment_id": 99663311, "body": "If you fix the syntax in the question. No such thing as <code>=&gt;</code> in JSON :)"}, {"owner": {"reputation": 93455, "user_id": 187141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG", "display_name": "yegor256", "link": "https://stackoverflow.com/users/187141/yegor256"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1560246214, "post_id": 56540710, "comment_id": 99663332, "body": "@SergioTulentsev it&#39;s Ruby, not JavaScript"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1560246566, "post_id": 56540710, "comment_id": 99663516, "body": "I see. JS/mongoshell snippet would have been more usable, though (in that playground thingie, for example). Ruby is irrelevant here anyway."}], "answers": [{"comments": [{"owner": {"reputation": 17247, "user_id": 1675976, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/SNvIc.jpg?s=128&g=1", "display_name": "CodyBugstein", "link": "https://stackoverflow.com/users/1675976/codybugstein"}, "edited": false, "score": 0, "creation_date": 1607235526, "post_id": 56540886, "comment_id": 115205755, "body": "I get <code>MongoError: Unrecognized expression &#39;$expr&#39;</code>"}, {"owner": {"reputation": 36192, "user_id": 7510657, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/jsd77.jpg?s=128&g=1", "display_name": "Ashh", "link": "https://stackoverflow.com/users/7510657/ashh"}, "reply_to_user": {"reputation": 17247, "user_id": 1675976, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/SNvIc.jpg?s=128&g=1", "display_name": "CodyBugstein", "link": "https://stackoverflow.com/users/1675976/codybugstein"}, "edited": false, "score": 0, "creation_date": 1607238809, "post_id": 56540886, "comment_id": 115206217, "body": "@CodyBugstein kindly update your mongodb version"}, {"owner": {"reputation": 17247, "user_id": 1675976, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/SNvIc.jpg?s=128&g=1", "display_name": "CodyBugstein", "link": "https://stackoverflow.com/users/1675976/codybugstein"}, "edited": false, "score": 0, "creation_date": 1607276490, "post_id": 56540886, "comment_id": 115215628, "body": "I have <code>4.2.11</code>"}], "tags": [], "owner": {"reputation": 36192, "user_id": 7510657, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/jsd77.jpg?s=128&g=1", "display_name": "Ashh", "link": "https://stackoverflow.com/users/7510657/ashh"}, "is_accepted": true, "score": 2, "last_activity_date": 1560246609, "last_edit_date": 1560246609, "creation_date": 1560246280, "answer_id": 56540886, "question_id": 56540710, "link": "https://stackoverflow.com/questions/56540710/fieldpath-field-names-may-not-contain-when-trying-to-use-aggregate/56540886#56540886", "title": "FieldPath field names may not contain &#39;.&#39; when trying to use AGGREGATE", "body": "<p>You can use below query</p>\n\n<p>If you are using <a href=\"https://docs.mongodb.com/manual/reference/operator/query/expr/\" rel=\"nofollow noreferrer\"><strong><code>$expr</code></strong></a> then you can easily use aggregation operator inside it. So Instead of using <code>.dot</code> notation to find the element, you can use  <a href=\"https://docs.mongodb.com/manual/reference/operator/aggregation/arrayElemAt/\" rel=\"nofollow noreferrer\"><strong><code>$arrayElemAt</code></strong></a> operator which provides you the facility to choose the element you want.</p>\n\n<pre><code>db.table.aggregate([\n  { '$match': {\n    '$expr': {\n      '$and': [\n        { '$eq': [{ '$size': '$events' }, 4] },\n        { '$lt': [{ '$arrayElemAt': ['$events.updated', 0] }, '2019-05-05'] }\n      ]\n    }\n  }}\n])\n</code></pre>\n\n<p>Or the way you were trying to do</p>\n\n<pre><code>db.collection.aggregate([\n  { \"$match\": {\n    \"events.0.updated\": { \"$lt\": \"2019-05-05\" },\n    \"$expr\": { \"$eq\": [{ \"$size\": \"$events\" }, 4] }\n  }}\n])\n</code></pre>\n\n<p>You can check the <a href=\"https://docs.mongodb.com/manual/reference/operator/query/expr/\" rel=\"nofollow noreferrer\"><strong><code>$expr</code></strong></a> behaviour <a href=\"https://docs.mongodb.com/manual/meta/aggregation-quick-reference/#aggregation-expressions\" rel=\"nofollow noreferrer\"><strong>here</strong></a></p>\n"}], "owner": {"reputation": 93455, "user_id": 187141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG", "display_name": "yegor256", "link": "https://stackoverflow.com/users/187141/yegor256"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2547, "favorite_count": 0, "accepted_answer_id": 56540886, "answer_count": 1, "score": 2, "last_activity_date": 1560246609, "creation_date": 1560245748, "question_id": 56540710, "link": "https://stackoverflow.com/questions/56540710/fieldpath-field-names-may-not-contain-when-trying-to-use-aggregate", "title": "FieldPath field names may not contain &#39;.&#39; when trying to use AGGREGATE", "body": "<p>What's wrong with my query?</p>\n\n<pre><code>db.table.aggregate([\n  {\n    '$match' =&gt; {\n      '$expr' =&gt; {\n        '$and' =&gt; [\n          { '$eq' =&gt; [{ '$size' =&gt; '$events' }, 4] },\n          { 'events.0.updated' =&gt; { '$lt' =&gt; '2019-05-05' } }\n        ]\n      }\n    }\n  }\n])\n</code></pre>\n\n<p>I'm getting:</p>\n\n<pre><code>Mongo::Error::OperationFailure: FieldPath field names may not contain '.'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "rails-activerecord", "rails-engines"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1560253974, "post_id": 56539106, "comment_id": 99667747, "body": "I&#39;m confused by your question. A schema defines the full structure of a database. A rails engine is &quot;attached&quot; to a database; it does not define the full database itself - so it wouldn&#39;t make sense for an engine to have a <code>schema.rb</code> file."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1560254021, "post_id": 56539106, "comment_id": 99667771, "body": "For example, look at <code>devise</code> -- it has a test suite with a dummy rails application, which contains a &quot;minimal&quot; database: <a href=\"https://github.com/plataformatec/devise/blob/master/test/rails_app/db/schema.rb\" rel=\"nofollow noreferrer\">github.com/plataformatec/devise/blob/master/test/rails_app/d&zwnj;&#8203;b/&hellip;</a> -- however, the library itself does not contain a <code>db&#47;schema.rb</code> file."}], "owner": {"reputation": 1796, "user_id": 2809686, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/df4c97dd08b33a8a0684cd226bfe89ce?s=128&d=identicon&r=PG&f=1", "display_name": "Kingsley Simon", "link": "https://stackoverflow.com/users/2809686/kingsley-simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560240224, "creation_date": 1560240224, "question_id": 56539106, "link": "https://stackoverflow.com/questions/56539106/manintain-a-schema-rb-in-a-rails-engine-and-run-migrations-that-update-in-the-en", "title": "manintain a schema.rb in a rails engine and run migrations that update in the engine&#39;s schema.rb", "body": "<p>I have a rails engine that currently has a migration file </p>\n\n<p>my_engine/db/migrate/20190611032851_add_columns_to_products.rb</p>\n\n<pre><code>class AddColumnsToInsuranceProducts &lt; ActiveRecord::Migration[5.0]\n  def change\n    add_column :insurance_products, :description_ms, :string\n  end\nend\n</code></pre>\n\n<p>I know that to keep my engine's migrations separate from my main application and to get it to run when i run rake db:migrate from my application, tutorials say i should do this</p>\n\n<pre><code>   initializer :append_migrations do |app|\n      unless app.root.to_s.match root.to_s\n        config.paths[\"db/migrate\"].expanded.each do |expanded_path|\n          app.config.paths[\"db/migrate\"] &lt;&lt; expanded_path\n        end\n      end\n    end\n</code></pre>\n\n<p>At the moment, i have two databases and i want to be able to create a schema.rb file in my engine as my_engine/db/schema.rb and be able to run <code>rake db:migrate</code> and it updates only my rails_engine's table an schema.rb. </p>\n\n<p>What would be the easiest and seamless way to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes"], "answers": [{"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1560237915, "creation_date": 1560237915, "answer_id": 56538542, "question_id": 56538046, "link": "https://stackoverflow.com/questions/56538046/create-custom-link-to-button-and-getting-wrong-routing-error-ruby/56538542#56538542", "title": "create custom link_to button, and getting wrong routing error ruby", "body": "<p>First of all, I would change your <code>routes.rb</code> to something more like:</p>\n\n<pre><code>resources :items, except: [:edit] do\n  member do\n    get  :listing\n    get  :pricing\n    get  :description\n    get  :photo_upload\n    get  :location\n    get  :preload\n    get  :preview\n    post :archive\n  end\n  resources :photos, only: [:create, :destroy]\n  resources :reservations, only: [:create]\n  resources :calendars\nend\n</code></pre>\n\n<p>This will give you (amongst other things): </p>\n\n<pre><code>       listing_item GET    /items/:id/listing(.:format)                       items#listing\n       pricing_item GET    /items/:id/pricing(.:format)                       items#pricing\n   description_item GET    /items/:id/description(.:format)                   items#description\n  photo_upload_item GET    /items/:id/photo_upload(.:format)                  items#photo_upload\n      location_item GET    /items/:id/location(.:format)                      items#location\n       preload_item GET    /items/:id/preload(.:format)                       items#preload\n       preview_item GET    /items/:id/preview(.:format)                       items#preview\n       archive_item POST   /items/:id/archive(.:format)                       items#archive\n        item_photos POST   /items/:item_id/photos(.:format)                   photos#create\n         item_photo DELETE /items/:item_id/photos/:id(.:format)               photos#destroy\n  item_reservations POST   /items/:item_id/reservations(.:format)             reservations#create\n     item_calendars GET    /items/:item_id/calendars(.:format)                calendars#index\n                    POST   /items/:item_id/calendars(.:format)                calendars#create\n  new_item_calendar GET    /items/:item_id/calendars/new(.:format)            calendars#new\n edit_item_calendar GET    /items/:item_id/calendars/:id/edit(.:format)       calendars#edit\n      item_calendar GET    /items/:item_id/calendars/:id(.:format)            calendars#show\n                    PATCH  /items/:item_id/calendars/:id(.:format)            calendars#update\n                    PUT    /items/:item_id/calendars/:id(.:format)            calendars#update\n                    DELETE /items/:item_id/calendars/:id(.:format)            calendars#destroy\n              items GET    /items(.:format)                                   items#index\n                    POST   /items(.:format)                                   items#create\n           new_item GET    /items/new(.:format)                               items#new\n               item GET    /items/:id(.:format)                               items#show\n                    PATCH  /items/:id(.:format)                               items#update\n                    PUT    /items/:id(.:format)                               items#update\n                    DELETE /items/:id(.:format)                               items#destroy\n</code></pre>\n\n<p>Then change:</p>\n\n<pre><code>&lt;%= link_to \"Archive\", listing_item_path(item), method: :archive, class: 'btn-delete' , :data =&gt; {:confirm =&gt; 'Are you sure?'}%&gt;\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>&lt;%= link_to \"Archive\", archive_item_path(item), method: :post, class: 'btn-delete' , :data =&gt; {:confirm =&gt; 'Are you sure?'}%&gt;\n</code></pre>\n\n<p>You'll notice in the <a href=\"https://apidock.com/rails/v5.2.3/ActionView/Helpers/UrlHelper/link_to\" rel=\"nofollow noreferrer\">docs</a> (under \"Options\") that the <code>method</code> is a symbol of an HTTP verb and can be <code>:post</code>, <code>:delete</code>, <code>:patch</code>, or <code>:put</code>. But NOT <code>:archive</code>. That's not an HTTP verb.</p>\n"}], "owner": {"reputation": 620, "user_id": 7974603, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5f4a562a0f406264652b195171ad0059?s=128&d=identicon&r=PG", "display_name": "Amer Bearat", "link": "https://stackoverflow.com/users/7974603/amer-bearat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 56538542, "answer_count": 1, "score": 0, "last_activity_date": 1560237915, "creation_date": 1560235805, "question_id": 56538046, "link": "https://stackoverflow.com/questions/56538046/create-custom-link-to-button-and-getting-wrong-routing-error-ruby", "title": "create custom link_to button, and getting wrong routing error ruby", "body": "<p>I have 2 link_to button, one is to update item record the other one is to archive the item record by updating the active field to false,update button work perfect but im getting error with  Archive link_to button.Im getting this error with </p>\n\n<pre><code>No route matches [POST] \"/items/10/listing\"\n</code></pre>\n\n<p>here is items_controller.rb method </p>\n\n<pre><code>  def archive\n    @item = Item.find(params[:id])\n    @item.active = false\n\n    if @item.update\n       flash[:notice] = \"Item been archived...\"\n    else\n    flash[:alert] = \"Something went wrong...\"\n    end\n   redirect_back(fallback_location: request.referer)\n  end\n</code></pre>\n\n<p>here the routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n resources :items, except: [:edit] do\n   member do\n   get 'listing'\n   get 'pricing'\n   get 'description'\n   get 'photo_upload'\n   get 'location'\n   get 'preload'\n   get 'preview'\n   end\n  resources :photos, only: [:create, :destroy]\n  resources :reservations, only: [:create]\n  resources :calendars\n  end\nend\n</code></pre>\n\n<p>here is the rake routes\n<a href=\"https://i.stack.imgur.com/uX3q5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uX3q5.png\" alt=\"enter image description here\"></a></p>\n\n<p>here is index.html.rb</p>\n\n<pre><code>&lt;div class=\"panel-body\"&gt;\n &lt;% @items.each do |item| %&gt;\n   &lt;div class=\"row\" style=\"border: 1px solid #dddbda;padding:0.8rem;display: contents;\"&gt;\n   &lt;div class=\"col-md-2\"&gt;\n    &lt;%= image_tag item.cover_photo(:thumb) %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-7\"&gt;\n    &lt;h4&gt;&lt;%= item.item_name %&gt;&lt;/h4&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-3 right\"&gt;\n    &lt;div&gt;\n    &lt;%= link_to \"Update\", listing_item_path(item), class: \"btn btn-form\" %&gt;\n    &lt;/div&gt;\n    &lt;div style=\"padding-top: 1rem;\"&gt;\n   &lt;%= link_to \"Archive\", listing_item_path(item), method: :archive, class: 'btn-delete' , :data =&gt; {:confirm =&gt; 'Are you sure?'}%&gt;\n   &lt;/div&gt;\n   &lt;/div&gt;\n   &lt;/div&gt;\n   &lt;hr/&gt;\n &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1560235939, "post_id": 56537941, "comment_id": 99658068, "body": "are you sure start_date is in the schema and not a virtual attribute or method? Does <code>Job.new.attributes.key?(&quot;start_date&quot;)</code> return true?"}, {"owner": {"reputation": 15, "user_id": 1236182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/979b44f08ee29995deb5e44b2b7ad12f?s=128&d=identicon&r=PG", "display_name": "Adel K", "link": "https://stackoverflow.com/users/1236182/adel-k"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1560236047, "post_id": 56537941, "comment_id": 99658126, "body": "Job.new.attributes.key?(&quot;start_date&quot;) returned true"}, {"owner": {"reputation": 1175, "user_id": 2861567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRa02.jpg?s=128&g=1", "display_name": "quyetdc", "link": "https://stackoverflow.com/users/2861567/quyetdc"}, "edited": false, "score": 1, "creation_date": 1560236774, "post_id": 56537941, "comment_id": 99658522, "body": "Do you have custom <code>as_json</code> method or do you write custom data using <code>serializer</code>? it&#39;s weird :)"}, {"owner": {"reputation": 15, "user_id": 1236182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/979b44f08ee29995deb5e44b2b7ad12f?s=128&d=identicon&r=PG", "display_name": "Adel K", "link": "https://stackoverflow.com/users/1236182/adel-k"}, "reply_to_user": {"reputation": 1175, "user_id": 2861567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRa02.jpg?s=128&g=1", "display_name": "quyetdc", "link": "https://stackoverflow.com/users/2861567/quyetdc"}, "edited": false, "score": 0, "creation_date": 1560237695, "post_id": 56537941, "comment_id": 99658944, "body": "Thanks @quyetdc indeed <code>start_date</code> is missing from <code>JobSerializer</code>"}, {"owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "edited": false, "score": 0, "creation_date": 1560237888, "post_id": 56537941, "comment_id": 99659044, "body": "Try <code>puts @jobs.as_json</code> to see if it&#39;s an issue with JSON formatting versus <code>render</code>. Or even without the json <code>puts @jobs.first.attributes</code>"}, {"owner": {"reputation": 318, "user_id": 3664194, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001800281383/picture?type=large", "display_name": "Michael Kosyk", "link": "https://stackoverflow.com/users/3664194/michael-kosyk"}, "edited": false, "score": 0, "creation_date": 1560243365, "post_id": 56537941, "comment_id": 99661705, "body": "@AK paste the code of the model, so we can have more data about your problem"}, {"owner": {"reputation": 15, "user_id": 1236182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/979b44f08ee29995deb5e44b2b7ad12f?s=128&d=identicon&r=PG", "display_name": "Adel K", "link": "https://stackoverflow.com/users/1236182/adel-k"}, "edited": false, "score": 0, "creation_date": 1560247167, "post_id": 56537941, "comment_id": 99663848, "body": "Thanks all it was <code>JobSerializer</code> issue, <code>start_date</code> was missing so I add it and it worked as expected."}, {"owner": {"reputation": 15, "user_id": 1236182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/979b44f08ee29995deb5e44b2b7ad12f?s=128&d=identicon&r=PG", "display_name": "Adel K", "link": "https://stackoverflow.com/users/1236182/adel-k"}, "reply_to_user": {"reputation": 1175, "user_id": 2861567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRa02.jpg?s=128&g=1", "display_name": "quyetdc", "link": "https://stackoverflow.com/users/2861567/quyetdc"}, "edited": false, "score": 0, "creation_date": 1560247549, "post_id": 56537941, "comment_id": 99664063, "body": "@quyetdc please post your comment as an answer so I can mark question solved."}, {"owner": {"reputation": 1175, "user_id": 2861567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRa02.jpg?s=128&g=1", "display_name": "quyetdc", "link": "https://stackoverflow.com/users/2861567/quyetdc"}, "edited": false, "score": 0, "creation_date": 1560247665, "post_id": 56537941, "comment_id": 99664155, "body": "Thanks @AK. I posted"}], "answers": [{"tags": [], "owner": {"reputation": 1175, "user_id": 2861567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRa02.jpg?s=128&g=1", "display_name": "quyetdc", "link": "https://stackoverflow.com/users/2861567/quyetdc"}, "is_accepted": true, "score": 0, "last_activity_date": 1560247625, "creation_date": 1560247625, "answer_id": 56541328, "question_id": 56537941, "link": "https://stackoverflow.com/questions/56537941/active-record-is-not-returning-specific-columns-when-using-model-find/56541328#56541328", "title": "Active record is not returning specific columns when using model.find", "body": "<p>That's because you have <code>serializer</code> or custom <code>as_json</code> method for your model and you lack the field</p>\n"}], "owner": {"reputation": 15, "user_id": 1236182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/979b44f08ee29995deb5e44b2b7ad12f?s=128&d=identicon&r=PG", "display_name": "Adel K", "link": "https://stackoverflow.com/users/1236182/adel-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 56541328, "answer_count": 1, "score": 0, "last_activity_date": 1560247625, "creation_date": 1560235351, "question_id": 56537941, "link": "https://stackoverflow.com/questions/56537941/active-record-is-not-returning-specific-columns-when-using-model-find", "title": "Active record is not returning specific columns when using model.find", "body": "<p>I'm using active record for Job model that I've a table for it in postgres database.</p>\n\n<p>When calling Job.all it should return all rows in jobs table with all its columns.</p>\n\n<p>There is around 60 columns for jobs table, I'm getting back a json array with most of the columns except a column named start_date.</p>\n\n<p>Is there a config I'm missing or this specific name can't be returned?</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Api::V1::JobsController &lt; ApplicationController\n\n  def index\n    @jobs = Job.all\n    render json: @jobs\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "database"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 10539763, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GoSNVRh_ons/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDiY34zIC8CohdHVX3Xsmdct9FmmA/mo/photo.jpg?sz=128", "display_name": "Jaydev Shiroya", "link": "https://stackoverflow.com/users/10539763/jaydev-shiroya"}, "edited": false, "score": 0, "creation_date": 1560231043, "post_id": 56536921, "comment_id": 99656182, "body": "so you&#39;re suggesting that i&#39;ll look for previous match name for particular user and game, and based on that generate new match_name?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 47, "user_id": 10539763, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GoSNVRh_ons/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDiY34zIC8CohdHVX3Xsmdct9FmmA/mo/photo.jpg?sz=128", "display_name": "Jaydev Shiroya", "link": "https://stackoverflow.com/users/10539763/jaydev-shiroya"}, "edited": false, "score": 0, "creation_date": 1560232508, "post_id": 56536921, "comment_id": 99656629, "body": "I <i>suggest</i> to store <code>match_type</code> and <code>match_number</code> and construct <code>match_name</code> on the fly because in such a case you don\u2019t need to parse the previous <code>match_name</code> and even can fulfill it from DB <code>TRIGGER</code>. But in any case, the lookup is needed, yes."}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 1, "creation_date": 1560232890, "post_id": 56536921, "comment_id": 99656766, "body": "@AlekseiMatiushkin I don&#39;t think he needs to parse the previous name, as the name is just constructed of the number of games of same type and user + 1.  Still, storing the number instead of the name is better IMHO (see my answer)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1560230180, "creation_date": 1560230180, "answer_id": 56536921, "question_id": 56536827, "link": "https://stackoverflow.com/questions/56536827/rails-create-unique-auto-incremental-id-based-on-sibling-records/56536921#56536921", "title": "Rails: create unique auto-incremental id based on sibling records", "body": "<p>You should retrieve the last <code>match_name</code> for these <code>user</code> <em>and</em> <code>game</code>, split it, increase the counter and join back with a space. Unfortunately, SQL does not provide <code>SPLIT</code> function, so somewhat like below would be a good start:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT match_name\nFROM match_name\nWHERE user_id = 3\n  AND game_id = 2\nORDER BY id DESC\nLIMIT 1\n</code></pre>\n\n<p>I would actually better create a <code>match_number</code> column of type <code>INT</code> to keep the number by type <em>and</em> produce a name by concatenation the type with this number.</p>\n"}, {"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 5, "last_activity_date": 1560233156, "last_edit_date": 1560233156, "creation_date": 1560232518, "answer_id": 56537318, "question_id": 56536827, "link": "https://stackoverflow.com/questions/56536827/rails-create-unique-auto-incremental-id-based-on-sibling-records/56537318#56537318", "title": "Rails: create unique auto-incremental id based on sibling records", "body": "<p>I see two ways you can solve this:</p>\n\n<ul>\n<li>DB: trigger</li>\n<li>Rails: callback</li>\n</ul>\n\n<p><strong>Trigger (assuming Postgres):</strong></p>\n\n<pre><code>  DROP TRIGGER IF EXISTS trigger_add_match_name ON customers;\n  DROP FUNCTION IF EXISTS function_add_match_name();\n  CREATE FUNCTION function_add_match_name()\n  RETURNS trigger AS $$\n  BEGIN\n    NEW.match_name := (\n      SELECT\n      CONCAT(game_matches.match_type, ' ', COALESCE(count(*), 0))\n      FROM game_matches\n      WHERE game_matches.user_id = NEW.user_id AND game_matches.match_type = NEW.match_type\n    );\n    RETURN NEW;\n  END\n  $$ LANGUAGE 'plpgsql';\n\n  CREATE TRIGGER trigger_add_match_name\n  BEFORE INSERT ON game_matches\n  FOR EACH ROW\n  EXECUTE PROCEDURE function_add_match_name(); \n</code></pre>\n\n<p>Please note that this is not tested.</p>\n\n<p><strong>Rails</strong></p>\n\n<pre><code>class GameMatch\n  before_create :assign_match_name\n\n  private\n\n  def assign_match_name\n   number = GameMatch.where(user_id: user_id, match_type: match_type).count ||\u00a00\n   name = \"#{match_type} #{number + 1}\"\n   self.match_name = name\n  end\nend\n</code></pre>\n\n<p>Again, untested.</p>\n\n<p>I'd prefer the trigger solution since callbacks can be skipped or ommited altogether when inserting via pure SQL.</p>\n\n<p>Also I'd add \"match_number\" column instead of the full name and then construct the name within the Model or a Decorator or a view Helper (more flexible, I18n) but the logic behind stays the same.</p>\n"}], "owner": {"reputation": 47, "user_id": 10539763, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GoSNVRh_ons/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDiY34zIC8CohdHVX3Xsmdct9FmmA/mo/photo.jpg?sz=128", "display_name": "Jaydev Shiroya", "link": "https://stackoverflow.com/users/10539763/jaydev-shiroya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 56537318, "answer_count": 2, "score": 1, "last_activity_date": 1560233156, "creation_date": 1560229623, "question_id": 56536827, "link": "https://stackoverflow.com/questions/56536827/rails-create-unique-auto-incremental-id-based-on-sibling-records", "title": "Rails: create unique auto-incremental id based on sibling records", "body": "<p>I have three models in my rails project, namely <strong>User, Game, Match</strong></p>\n\n<p>user can create many matches on each game\nso table structure for matches is like</p>\n\n<pre><code>            table name: game_matches\n\n+----+---------+---------+-------------+------------+\n| id | user_id | game_id | match_type  | match_name |\n+----+---------+---------+-------------+------------+\n|  1 |       1 |       1 | practice    |            |\n|  2 |       3 |       2 | challenge   |            |\n|  3 |       1 |       1 | practice    |            |\n|  4 |       3 |       2 | challenge   |            |\n|  5 |       1 |       1 | challenge   |            |\n|  6 |       3 |       2 | practice    |            |\n+----+---------+---------+-------------+------------+\n</code></pre>\n\n<p>i want to generate match_name based on user_id, game_id and match_type values</p>\n\n<pre><code>for example match_name should be create like below\n\n\n+----+---------+---------+-------------+-------------+\n| id | user_id | game_id | match_type  | match_name  |\n+----+---------+---------+-------------+-------------+\n|  1 |       1 |       1 | practice    | Practice 1  |\n|  2 |       3 |       2 | challenge   | Challenge 1 |\n|  3 |       1 |       1 | practice    | Practice 2  |\n|  4 |       3 |       2 | challenge   | Challenge 2 |\n|  5 |       1 |       1 | challenge   | Challenge 1 |\n|  6 |       3 |       2 | practice    | Practice 1  |\n+----+---------+---------+-------------+-------------+\n</code></pre>\n\n<p>How can i achieve this auto incremental value in my rails model during new record creation.\nAny help suggestions appreciated. </p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1560236680, "post_id": 56536465, "comment_id": 99658469, "body": "Why does <code>gates.each</code> have three block variables in the outer loop but only two in the inner loop?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1560244871, "post_id": 56536465, "comment_id": 99662573, "body": "Can you provide a little more context? What is the code supposed to achieve?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1560270674, "post_id": 56536465, "comment_id": 99678046, "body": "Wesley, you don&#39;t like answering questions?"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 10665476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c4f7dbb56d9dcd2f72ff0a82ab21956?s=128&d=identicon&r=PG&f=1", "display_name": "Wesley Lance", "link": "https://stackoverflow.com/users/10665476/wesley-lance"}, "edited": false, "score": 0, "creation_date": 1560230147, "post_id": 56536648, "comment_id": 99655961, "body": "Wouldn&#39;t that still execute code that is after the inner loop?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 63, "user_id": 10665476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c4f7dbb56d9dcd2f72ff0a82ab21956?s=128&d=identicon&r=PG&f=1", "display_name": "Wesley Lance", "link": "https://stackoverflow.com/users/10665476/wesley-lance"}, "edited": false, "score": 0, "creation_date": 1560230406, "post_id": 56536648, "comment_id": 99656016, "body": "I mentioned one might pass the argument to <code>break</code> and from your question, it was not clear what you actually wanted to achieve. I have updated the answer."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1560230349, "last_edit_date": 1560230349, "creation_date": 1560228548, "answer_id": 56536648, "question_id": 56536465, "link": "https://stackoverflow.com/questions/56536465/next-ing-from-child-each-loop-in-ruby/56536648#56536648", "title": "Next-ing from child each loop in Ruby", "body": "<p><strong>TL;DR</strong> use <a href=\"https://ruby-doc.org/core/doc/syntax/control_expressions_rdoc.html#label-break+Statement\" rel=\"nofollow noreferrer\"><code>break</code></a>.</p>\n\n<p>Here is the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MCVE</a>:</p>\n\n<pre><code>[1,2].each do |o|\n  puts \"Outer: #{o}\"\n  [1,2,3].each do |i|\n    break if i.even?\n    puts \"Inner: #{i}\"\n  end\nend\n\n#\u21d2 Outer: 1\n#  Inner: 1\n#  Outer: 2\n#  Inner: 1\n</code></pre>\n\n<hr>\n\n<p>FWIW, one might pass an argument to break to be returned from the block. This might be needed to emulate the <code>next</code> after <code>break</code>:</p>\n\n<pre><code>[1,2].each do |o|\n  puts \"Outer: #{o}\"\n\n  inner =\n    [1,2,3].each do |i|\n      break :next if i.even?\n      puts \"Inner: #{i}\"\n    end\n  next if inner == :next\n  ...\nend\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 10665476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c4f7dbb56d9dcd2f72ff0a82ab21956?s=128&d=identicon&r=PG&f=1", "display_name": "Wesley Lance", "link": "https://stackoverflow.com/users/10665476/wesley-lance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560230349, "creation_date": 1560227110, "question_id": 56536465, "link": "https://stackoverflow.com/questions/56536465/next-ing-from-child-each-loop-in-ruby", "title": "Next-ing from child each loop in Ruby", "body": "<p>I have this bit of code:</p>\n\n<pre><code>gates.each do |key, value, temp|\n  unless value.class == Output\n    temp = value.in1\n    gates.each do |k, v|\n      if v.out == temp\n        value.base_distance += 1\n        #do a thing\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>What I want to happen is when the <code>#do a thing</code> comment inside the conditional is reached it should break out of the inner .each loop and move on to the next instance of the outer .each loop, essentially executing a <code>next</code>. How would I do that from inside the conditional?</p>\n"}, {"tags": ["ruby", "irb"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1560239145, "post_id": 56536357, "comment_id": 99659590, "body": "This error is caused by installing Ruby via Homebrew. I recommend using <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\">rbenv</a> instead \u2013 it&#39;s a Ruby version manager which allows you to install multiple Ruby versions. Never had any issues with it."}], "answers": [{"comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1560230644, "post_id": 56536941, "comment_id": 99656069, "body": "irb is not a gem it&#39;s build-in ruby repl."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1560230748, "post_id": 56536941, "comment_id": 99656098, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 Wasn&#39;t sure on mac. It does not come included on Arch, have to install it additionally. Irregardless the path issue should solve the issue, so not sure why the downvote. <a href=\"https://github.com/ruby/irb\" rel=\"nofollow noreferrer\">github.com/ruby/irb</a>"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1560230936, "post_id": 56536941, "comment_id": 99656152, "body": "oh, since ruby 2.6.0 installation no more ships <code>irb</code>."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1560231098, "post_id": 56536941, "comment_id": 99656196, "body": "Yeah, was surprised at first time I tried to run it with clean install. Thought perhaps it was just my distro, but apparently it is a new thing not to include."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1560239255, "post_id": 56536941, "comment_id": 99659653, "body": "IRB is a <i>default gem</i> in Ruby 2.6. If you have to install it manually, something is wrong."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1560247648, "post_id": 56536941, "comment_id": 99664136, "body": "I can&#39;t speak for all distro, but It most definitely is <b>not</b> a <i>default</i> gem on Arch Linux. Just confirmed it with new Ruby install."}, {"owner": {"reputation": 17, "user_id": 11628839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/niTYt.jpg?s=128&g=1", "display_name": "minovermax", "link": "https://stackoverflow.com/users/11628839/minovermax"}, "edited": false, "score": 0, "creation_date": 1560266426, "post_id": 56536941, "comment_id": 99675606, "body": "Thank you so much ForeverZer0, it worked!! Now I can finally start my tutorial now :)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1560331997, "post_id": 56536941, "comment_id": 99697867, "body": "@ForeverZer0 FYI the removal of IRB from Arch&#39;s Ruby 2.6 package seems to be a bug, see <a href=\"https://bugs.archlinux.org/task/62709?project=5&amp;order=dateopened&amp;sort=desc\" rel=\"nofollow noreferrer\">FS#62709</a>"}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1560334691, "post_id": 56536941, "comment_id": 99699360, "body": "@Stefan Ah, I see thanks for the info. Was curious why it would get removed, so double-checked to make I wasn&#39;t mistaken, and it was indeed excluded. That would explain it."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1560335629, "post_id": 56536941, "comment_id": 99699866, "body": "What a coincidence that both, Homebrew and Arch screwed up IRB."}], "tags": [], "owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "is_accepted": true, "score": 1, "last_activity_date": 1560231326, "last_edit_date": 1560231326, "creation_date": 1560230314, "answer_id": 56536941, "question_id": 56536357, "link": "https://stackoverflow.com/questions/56536357/why-doesnt-my-terminal-shows-me-irbmain0010-when-i-enter-irb/56536941#56536941", "title": "Why doesn&#39;t my terminal shows me irb(main):001:0&gt; when I enter irb?", "body": "<p>Since ruby 2.6.0 installation no more ships irb. \nYou should install it with <code>rubygems</code>.</p>\n\n<p><code>gem list | grep irb</code> should output something like <code>irb 1.0.0</code>. If not, run <code>gem install irb</code>.</p>\n\n<p>Its also possible that the <code>bin</code> directory for gems is not in your path, is typically add somethling like this to my <code>~/.bashrc</code>, <code>~/.profile</code>, etc.</p>\n\n<pre><code>export PATH=\"$PATH:$(ruby -e 'puts Gem.user_dir')\"\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 11628839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/niTYt.jpg?s=128&g=1", "display_name": "minovermax", "link": "https://stackoverflow.com/users/11628839/minovermax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "accepted_answer_id": 56536941, "answer_count": 1, "score": 0, "last_activity_date": 1560253826, "creation_date": 1560226270, "last_edit_date": 1560253826, "question_id": 56536357, "link": "https://stackoverflow.com/questions/56536357/why-doesnt-my-terminal-shows-me-irbmain0010-when-i-enter-irb", "title": "Why doesn&#39;t my terminal shows me irb(main):001:0&gt; when I enter irb?", "body": "<p>I'm a complete newbie in this field and I am currently \"trying\" to study Python and Ruby. </p>\n\n<p>I did everything what the tutorial said, but my terminal just won't show me the <code>irb(main):001:0&gt;</code> thing to proceed. I'm not sure if it is because the tutorial is like 4 years old, but the same 4 year old Python tutorial's method is working just fine, but Ruby is just making me feel dumb in like 5 minutes after I started.. I would really appreciate some help.</p>\n\n<pre><code>iseongmin-ui-MacBook-Pro:~ sm.lee$ irb\nTraceback (most recent call last):  \n    2: from /usr/local/opt/ruby/bin/irb:23:in '&lt;main&gt;'  \n    1: from /usr/local/Cellar/ruby/2.6.3/lib/ruby/2.6.0  /rubygems.rb:302:in 'activate_bin_path'  \n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0/usr/local/Cellar/ruby/2.6.3/lib/ruby/2.6.0/rubygems.rb:283:in 'find_spec_for_exe':  \ncan't find gem irb (&gt;= 0.a) with executable irb (Gem::GemNotFoundException)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 37744, "user_id": 578411, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qj33e.png?s=128&g=1", "display_name": "rene", "link": "https://stackoverflow.com/users/578411/rene"}, "edited": false, "score": 0, "creation_date": 1560236410, "post_id": 56537854, "comment_id": 99658314, "body": "please elaborate a bit. What does all these functions do and why does this work. Just dropping a line of code is not an awesome answer. Please educate future visitors."}], "tags": [], "owner": {"reputation": 77, "user_id": 10966941, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HMgbK5sXujY/AAAAAAAAAAI/AAAAAAAAA90/Yl5CkKqnhrs/photo.jpg?sz=128", "display_name": "Zaid Annas", "link": "https://stackoverflow.com/users/10966941/zaid-annas"}, "is_accepted": false, "score": 1, "last_activity_date": 1560240410, "last_edit_date": 1560240410, "creation_date": 1560235027, "answer_id": 56537854, "question_id": 56536237, "link": "https://stackoverflow.com/questions/56536237/rails-passing-a-specific-column-to-query-by-count-of-an-associated-model/56537854#56537854", "title": "Rails - Passing a specific column to query by count of an associated model", "body": "<pre><code>Recipe.joins(\"LEFT JOIN likes ON recipes.id = likes. recipe_id\").group(\"recipes.id\").order(\"COUNT(likes.id) ASC\")\n</code></pre>\n\n<p>ActiveRecord parsing expects the returned resultset to have the columns that the original model has(Or a subset of columns).</p>\n\n<p>When selecting a subset of the original columns, ActiveRecord nullifies all the other columns while parsing it in an ActiveRecord object/relation</p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 10197892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3yPxc.jpg?s=128&g=1", "display_name": "Tommy5230", "link": "https://stackoverflow.com/users/10197892/tommy5230"}, "edited": false, "score": 0, "creation_date": 1560268160, "post_id": 56538587, "comment_id": 99676709, "body": "Why should one avoid direct ordering by count?"}], "tags": [], "owner": {"reputation": 1175, "user_id": 2861567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRa02.jpg?s=128&g=1", "display_name": "quyetdc", "link": "https://stackoverflow.com/users/2861567/quyetdc"}, "is_accepted": true, "score": 0, "last_activity_date": 1560238086, "creation_date": 1560238086, "answer_id": 56538587, "question_id": 56536237, "link": "https://stackoverflow.com/questions/56536237/rails-passing-a-specific-column-to-query-by-count-of-an-associated-model/56538587#56538587", "title": "Rails - Passing a specific column to query by count of an associated model", "body": "<p>Your query is correct. Please note that it use <code>Recipe</code> model class, which does not contains your custom field in its Class. If your query is </p>\n\n<pre><code>Recipe.select(\"COUNT(likes.id)\").joins(:likes).group(\"recipes.name\").order(\"COUNT(likes.id) DESC\")\n\n</code></pre>\n\n<p>It will show you </p>\n\n<pre><code>ActiveRecord::Relation [Recipe id: nil, Recipe id: nil, Recipe id: nil]\n</code></pre>\n\n<p>However, You still can access your custom fields, the returned data hold it for you to use. You just need to give it a name to call it. Also, You can use that custom field to order, please don't direct order <code>COUNT</code></p>\n\n<pre><code>recipes = Recipe.select(\"COUNT(likes.id) as total_likes\").joins(:likes).group(\"recipes.name\").order(\"total_likes DESC\")\nrecipe.first.total_likes # TOTAL LIKE of first recipe\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 14098262, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14Givrd7s2DZK52Y3Bopb9BeoTHvJq0xV3yxBiDQi=k-s128", "display_name": "Tamal Chakroborty", "link": "https://stackoverflow.com/users/14098262/tamal-chakroborty"}, "is_accepted": false, "score": 1, "last_activity_date": 1611563128, "creation_date": 1611563128, "answer_id": 65881199, "question_id": 56536237, "link": "https://stackoverflow.com/questions/56536237/rails-passing-a-specific-column-to-query-by-count-of-an-associated-model/65881199#65881199", "title": "Rails - Passing a specific column to query by count of an associated model", "body": "<p>This may help you if you want to it in active record query:</p>\n<pre><code>Recipe.left_joins(:likes).group(:id).order(&quot;COUNT(likes.id) DESC&quot;)\n</code></pre>\n<p><strong><strong>Warning for the <em>JOIN</em>:</strong></strong></p>\n<pre><code>Recipe.joins(:likes).group(:id).order(&quot;COUNT(likes.id) DESC&quot;)\n</code></pre>\n<p>This query will only return the recipes which have likes. If there are any recipes that don't have any likes, doing <em><strong>JOINS</strong></em> won't get you those.</p>\n"}], "owner": {"reputation": 47, "user_id": 10197892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3yPxc.jpg?s=128&g=1", "display_name": "Tommy5230", "link": "https://stackoverflow.com/users/10197892/tommy5230"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 457, "favorite_count": 0, "accepted_answer_id": 56538587, "answer_count": 3, "score": 0, "last_activity_date": 1611563128, "creation_date": 1560225265, "question_id": 56536237, "link": "https://stackoverflow.com/questions/56536237/rails-passing-a-specific-column-to-query-by-count-of-an-associated-model", "title": "Rails - Passing a specific column to query by count of an associated model", "body": "<p>I have a rails app with \"recipes\" model. Recipe can be liked (\"like\" model) by a user. What I'd like to achieve (eventually) is to sort the list of the recipes on the recipes-index page by the number of likes.</p>\n\n<p>I've seen numerous threads but the two that guided me the most were:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/19798105/rails-3-activerecord-order-and-group-by-association-count\">Rails 3 ActiveRecord: order and group by association count</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/16996618/rails-order-by-results-count-of-has-many-association\">Rails order by results count of has_many association</a></p>\n\n<p>I've got so far that I have an SQL-query that produces list of the recipes with the count of their likes:</p>\n\n<pre><code>SELECT recipes.name, COUNT(likes.id)\nFROM recipes\nLEFT JOIN likes on recipes.id = likes.recipe_id\nGROUP BY recipes.name\nORDER BY COUNT(likes.id) DESC;\n</code></pre>\n\n<p>However, when \"translating\" it to something ActiveRecord can understand, I'm running into troubles.</p>\n\n<p>I've concluded that using Recipe.joins(:likes) or Recipe.left_joins(:likes) passes all columns specified in \"recipes\", which leads to the following error:</p>\n\n<p>\"Column \"recipes.id\" must appear in the GROUP BY clause or be used in an aggregate function...\".</p>\n\n<p>Now, as I need to pass recipes.name and COUNT(likes.id) only, I used select:</p>\n\n<pre><code>Recipe.select(\"recipes.name, COUNT(likes.id)\").joins(:likes).group(\"recipes.name\").order(\"COUNT(likes.id) DESC\")\n</code></pre>\n\n<p>And that's where I'm stranded as it produces this:</p>\n\n<p>ActiveRecord::Relation [Recipe id: nil, name: \"Scrambled eggz\", Recipe id: nil, name: \"Soup\", Recipe id: nil, name: \"Nutella pancakes\"]</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5.2"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1560224860, "post_id": 56536169, "comment_id": 99654836, "body": "Why would you do this? <code>MyModule::MyClass::MyObject.new()</code> is the right way to create a new instance of <code>MyObject</code>, not <code>MyModule::MyClass.myobject.new()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": false, "score": 2, "last_activity_date": 1560224777, "creation_date": 1560224777, "answer_id": 56536182, "question_id": 56536169, "link": "https://stackoverflow.com/questions/56536169/create-a-method-that-can-initialize-a-new-object-from-another-class/56536182#56536182", "title": "Create a method that can initialize a new object from another class", "body": "<p>You need to define a method <code>myobject</code> on <code>MyClass</code> which returns <code>MyObject</code>...</p>\n\n<pre><code>module MyModule\n  class MyClass\n     class MyObject\n     end\n\n     def self.myobject; return MyObject; end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": false, "score": 0, "last_activity_date": 1560234977, "creation_date": 1560234977, "answer_id": 56537844, "question_id": 56536169, "link": "https://stackoverflow.com/questions/56536169/create-a-method-that-can-initialize-a-new-object-from-another-class/56537844#56537844", "title": "Create a method that can initialize a new object from another class", "body": "<p>If I understand you correctly, you have a variable of some class and want to create a new object of the same class. Assuming that your classes all have an empty constructor, you could do a</p>\n\n<pre><code>myobject.class.new()\n</code></pre>\n\n<p>If you want to also have the new object the same internal state as the other one, write a method</p>\n\n<pre><code> class MyMethod\n     def clone\n       ...\n     end\n end\n</code></pre>\n\n<p>which performs this task.</p>\n"}, {"comments": [{"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1560337677, "post_id": 56556429, "comment_id": 99700976, "body": "Rails does this all the time, what do you think active record does?"}, {"owner": {"reputation": 920, "user_id": 1673227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tbgZ.jpg?s=128&g=1", "display_name": "M.Elkady", "link": "https://stackoverflow.com/users/1673227/m-elkady"}, "reply_to_user": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1560338510, "post_id": 56556429, "comment_id": 99701445, "body": "could you give a code example from rails to what do you mean?"}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1560338570, "post_id": 56556429, "comment_id": 99701487, "body": "Any belongs to or has many relationship does this, in a similar way."}, {"owner": {"reputation": 920, "user_id": 1673227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tbgZ.jpg?s=128&g=1", "display_name": "M.Elkady", "link": "https://stackoverflow.com/users/1673227/m-elkady"}, "reply_to_user": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1560339060, "post_id": 56556429, "comment_id": 99701768, "body": "you can check the source code of belongs_to  <a href=\"https://github.com/rails/rails/blob/fb3ecbf130e141688782bafb7da979bf0ecedf1a/activerecord/lib/active_record/associations.rb#L1657\" rel=\"nofollow noreferrer\">github.com/rails/rails/blob/&hellip;</a>  simply you can think about it as a class method in ActiveRecord::Base  and because of inheritance, you can use the method inside the class body to define an association"}], "tags": [], "owner": {"reputation": 920, "user_id": 1673227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tbgZ.jpg?s=128&g=1", "display_name": "M.Elkady", "link": "https://stackoverflow.com/users/1673227/m-elkady"}, "is_accepted": false, "score": 0, "last_activity_date": 1560323138, "creation_date": 1560323138, "answer_id": 56556429, "question_id": 56536169, "link": "https://stackoverflow.com/questions/56536169/create-a-method-that-can-initialize-a-new-object-from-another-class/56556429#56556429", "title": "Create a method that can initialize a new object from another class", "body": "<p>The Answers here are right, but don't do this it's not standard and will be confusing for anyone who reads your code.</p>\n\n<pre><code>MyModule::MyClass.my_object_instance\nclass MyClass\n  def self.my_object_instance\n    MyObject.new \n  end\nend \n</code></pre>\n\n<p>this could be better to create a factory method that returns a new instance of the class if want a shorter way to create an instance of the class.      </p>\n"}], "owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1560323138, "creation_date": 1560224645, "question_id": 56536169, "link": "https://stackoverflow.com/questions/56536169/create-a-method-that-can-initialize-a-new-object-from-another-class", "title": "Create a method that can initialize a new object from another class", "body": "<p>What is the correct structure to be able to call a class from another class?</p>\n\n<p>I can call <code>MyObject.new</code> by using <code>MyModule::MyClass::MyObject.new()</code>\nHowever, I would prefer to call it using:</p>\n\n<p><code>MyModule::MyClass.myobject.new()</code></p>\n\n<p>How do I structure my code to by able to do this? </p>\n\n<pre><code>module MyModule\n  class MyClass\n     class MyObject\n        def initialize(value)\n          @value = value\n        end\n\n        def method1\n          \"This is a #{value}\"\n        end\n     end\n  end\nend\n</code></pre>\n"}, {"tags": ["mysql", "ruby", "graph", "hierarchical-data", "adjacency-list"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1560224403, "post_id": 56536031, "comment_id": 99654756, "body": "So, you just want to append to each row the ID of the previous row? Can you show your attempt?"}, {"owner": {"reputation": 184, "user_id": 5193609, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/F1JAf.png?s=128&g=1", "display_name": "Norman Edance", "link": "https://stackoverflow.com/users/5193609/norman-edance"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1560224850, "post_id": 56536031, "comment_id": 99654834, "body": "@maxpleaner Problem is the path does not consist of identifiers, only serial numbers."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1560226998, "post_id": 56536031, "comment_id": 99655252, "body": "Should <code>&#39;322&#39;</code> be <code>&#39;2&#39;</code>?"}, {"owner": {"reputation": 184, "user_id": 5193609, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/F1JAf.png?s=128&g=1", "display_name": "Norman Edance", "link": "https://stackoverflow.com/users/5193609/norman-edance"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1560227251, "post_id": 56536031, "comment_id": 99655319, "body": "@CarySwoveland No, they&#39;re not in Sales (000.000.114 at path) it&#39;s another dept."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1560228212, "post_id": 56536031, "comment_id": 99655520, "body": "Please explain what <code>&#39;322&#39;</code> means in terms of the underlying graph."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1560228828, "post_id": 56536031, "comment_id": 99655651, "body": "How can there be <code>&#39;12,Accounting managers,000.000.114.000&#39;</code> without a <code>&#39;xx,yyyy,000.000.114&#39;</code>?"}, {"owner": {"reputation": 184, "user_id": 5193609, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/F1JAf.png?s=128&g=1", "display_name": "Norman Edance", "link": "https://stackoverflow.com/users/5193609/norman-edance"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1560233424, "post_id": 56536031, "comment_id": 99656969, "body": "@CarySwoveland It&#39;s just a sample 13 lines. It&#39;s somewhere bellow (13+)"}], "answers": [{"comments": [{"owner": {"reputation": 184, "user_id": 5193609, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/F1JAf.png?s=128&g=1", "display_name": "Norman Edance", "link": "https://stackoverflow.com/users/5193609/norman-edance"}, "edited": false, "score": 0, "creation_date": 1560225550, "post_id": 56536228, "comment_id": 99654987, "body": "8,9, 10, 11 have same parent_id as 7. I guess my bad, my data not clear enough."}, {"owner": {"reputation": 184, "user_id": 5193609, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/F1JAf.png?s=128&g=1", "display_name": "Norman Edance", "link": "https://stackoverflow.com/users/5193609/norman-edance"}, "edited": false, "score": 0, "creation_date": 1560226378, "post_id": 56536228, "comment_id": 99655137, "body": "I&#39;ve updated question. Adj. list - just regular hierarchy with id, and parent_id."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1560235335, "last_edit_date": 1560235335, "creation_date": 1560225119, "answer_id": 56536228, "question_id": 56536031, "link": "https://stackoverflow.com/questions/56536031/how-to-convert-path-data-to-adjacency-list/56536228#56536228", "title": "How to convert path data to adjacency list", "body": "<p>The string appears to describe a directed tree, except the accounting managers, </p>\n\n<pre><code>'12,Accounting managers,000.000.114.000'\n</code></pre>\n\n<p>seem to have no boss. I've therefore added</p>\n\n<pre><code>'14,Accounting big cheese,000.000.114'\n</code></pre>\n\n<p>Here's the data.</p>\n\n<pre><code>data =&lt;&lt;-_\nID, NAME, PATH\n---------\n1,Valve,000\n2,Steam,000.000\n3,Sales,000.000.000\n4,Developers,000.000.112\n7,Designers,000.000.112.000\n8,Game Designers,000.000.112.000.000\n9,UI Designers,000.000.112.000.002\n10,Web Designers,000.000.112.000.001\n11,3D Designers,000.000.112.000.003\n14,Accounting big cheese,000.000.114\n12,Accounting managers,000.000.114.000\n13,Accounting topmanagers,000.000.114.000.000\n_\n</code></pre>\n\n<p>We can use <code>split(\"\\n\")</code> to convert this string to an array of lines, and then determine the parentage of each node as follows.</p>\n\n<pre><code>r1, r2, *rest = data.split(\"\\n\")\nstr = [\n  r1,\n  r2,\n  rest.map do |s|\n    parent_match = s[/(?:\\d{3}\\.)*\\d{3}(?=\\.\\d{3})/]\n    parent = arr.find { |ss| parent_match == ss[/(?:\\d{3}\\.)*\\d{3}/] }\n    parent.nil? ? \"#{s}, nil\" : \"#{s}, #{ parent[/\\d+/] }\" \n    end\n].join(\"\\n\")\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>puts str \nID, NAME, PATH\n---------\n1,Valve,000, nil\n2,Steam,000.000, 1\n3,Sales,000.000.000, 2\n4,Developers,000.000.112, 2\n7,Designers,000.000.112.000, 4\n8,Game Designers,000.000.112.000.000, 7\n9,UI Designers,000.000.112.000.002, 7\n10,Web Designers,000.000.112.000.001, 7\n11,3D Designers,000.000.112.000.003, 7\n14,Accounting big cheese,000.000.114, 2\n12,Accounting managers,000.000.114.000, 14\n13,Accounting topmanagers,000.000.114.000.000, 12\n</code></pre>\n\n<p>In <code>map</code>'s block suppose</p>\n\n<pre><code>s = '8,Game Designers,000.000.112.000.000'\n</code></pre>\n\n<p>then</p>\n\n<pre><code>parent_match = s[/(?:\\d{3}\\.)*\\d{3}(?=\\.\\d{3})/]\n  #=&gt; \"000.000.112.000\" \n</code></pre>\n\n<p><code>parent_match</code> is a string of all the triples of digits separated by periods in <code>s</code>, other than the last period followed by the last triple of digits. The regular expression reads, \"match zero or more groups of 3 digits followed by a period, followed by 3 digits, provided this match is immediately followed by a period and 3 digits (<code>(?=\\.\\d{3})</code>) being a <em>positive lookahead</em>). </p>\n\n<p>We then loop through <code>rest</code> looking for an element that ends with <code>parent_match</code>:</p>\n\n<pre><code>parent = rest.find { |ss| parent_match == ss[/(?:\\d{3}\\.)*\\d{3}/] }\n  #=&gt; \"7,Designers,000.000.112.000\"\n</code></pre>\n\n<p>The regex <code>/(?:\\d{3}\\.)*\\d{3}/</code> reads, \"match zero or more groups of 3 digits followed by a period, followed by 3 digits\".</p>\n\n<p>In the next line:</p>\n\n<pre><code>parent.nil?\n  #=&gt; false\n</code></pre>\n\n<p>so the block returns</p>\n\n<pre><code>\"#{s}, #{ parent[/\\d+/] }\" \n  #=&gt; \"8,Game Designers,000.000.112.000.000, 7\"\n</code></pre>\n\n<p><code>parent[/\\d+/]</code> merely extracts the digit character(s) at the beginning of <code>parent</code>.</p>\n\n<p>Had I not added the line</p>\n\n<pre><code>14,Accounting big cheese,000.000.114\n</code></pre>\n\n<p>the following line (<code>'12,Accounting ...'</code>) would have ended, <code>', nil'</code>.</p>\n"}], "owner": {"reputation": 184, "user_id": 5193609, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/F1JAf.png?s=128&g=1", "display_name": "Norman Edance", "link": "https://stackoverflow.com/users/5193609/norman-edance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560235335, "creation_date": 1560223258, "last_edit_date": 1560227511, "question_id": 56536031, "link": "https://stackoverflow.com/questions/56536031/how-to-convert-path-data-to-adjacency-list", "title": "How to convert path data to adjacency list", "body": "<p>I'm setting up a rails \"import from csv\" task, and I came across departments data (in db) in the form of path. I want it to be adjacency list.</p>\n\n<p>Smth I have:</p>\n\n<pre><code>ID, NAME, PATH\n---------\n1,Valve,000\n2,Steam,000.000\n3,Sales,000.000.000\n4,Developers,000.000.112\n7,Designers,000.000.112.000\n8,Game Designers,000.000.112.000.000\n9,UI Designers,000.000.112.000.002\n10,Web Designers,000.000.112.000.001\n11,3D Designers,000.000.112.000.003\n12,Accounting managers,000.000.114.000\n13,Accounting topmanagers,000.000.114.000.000\n</code></pre>\n\n<p>Smth I want:</p>\n\n<pre><code>ID, NAME, PATH, PARENT_ID\n---------\n1,Valve,000, nil\n2,Steam,000.000, 1\n3,Sales,000.000.000, 2\n4,Developers,000.000.112, 2\n7,Designers,000.000.112.000, 4\n8,Game Designers,000.000.112.000.000, 7\n9,UI Designers,000.000.112.000.002, 7\n10,Web Designers,000.000.112.000.001, 7\n11,3D Designers,000.000.112.000.003, 7\n12,Accounting managers,000.000.114.000, 322\n13,Accounting topmanagers,000.000.114.000.000, 12\n</code></pre>\n"}, {"tags": ["ruby", "encoding", "base64", "byte"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1560226984, "post_id": 56535308, "comment_id": 99655250, "body": "I removed <a href=\"https://stackoverflow.com/questions/tagged/ruby-on-rails\">ruby-on-rails</a> tag because this question has nothing to do with Rails."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1560242002, "post_id": 56535308, "comment_id": 99660925, "body": "<code>b&#39;eJzLSM3JyQcABiwCFQ==&#39;</code> looks like a <a href=\"https://docs.python.org/3/reference/lexical_analysis.html#string-and-bytes-literals\" rel=\"nofollow noreferrer\">Python byte literal</a>. Where does this data come from?"}], "answers": [{"comments": [{"owner": {"reputation": 843, "user_id": 728226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7840ff7b45650a9687e8b599461c4269?s=128&d=identicon&r=PG", "display_name": "Jau L", "link": "https://stackoverflow.com/users/728226/jau-l"}, "edited": false, "score": 0, "creation_date": 1560231105, "post_id": 56536437, "comment_id": 99656200, "body": "thanks, the problem is that the data is stored in the database with leading b =&gt; <code>b&#39;eJzLSM3JyQcABiwCFQ==&#39;</code> so i guess i will just remove the b when I read the data."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 843, "user_id": 728226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7840ff7b45650a9687e8b599461c4269?s=128&d=identicon&r=PG", "display_name": "Jau L", "link": "https://stackoverflow.com/users/728226/jau-l"}, "edited": false, "score": 1, "creation_date": 1560232405, "post_id": 56536437, "comment_id": 99656591, "body": "Excuse me? <code>b&#39;eJzLSM3JyQcABiwCFQ==&#39;</code> is not a valid Ruby. Is it <code>&quot;b&#39;eJzLSM3JyQcABiwCFQ==&#39;&quot;</code>? If yes, remove <code>b</code> <i>and</i> inner quotes."}, {"owner": {"reputation": 843, "user_id": 728226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7840ff7b45650a9687e8b599461c4269?s=128&d=identicon&r=PG", "display_name": "Jau L", "link": "https://stackoverflow.com/users/728226/jau-l"}, "edited": false, "score": 0, "creation_date": 1560232589, "post_id": 56536437, "comment_id": 99656659, "body": "make sense, thanks @Aleksei Matiushkin. one quick question, I&#39;m trying append the data into an existing key, <code>object.websites.map do |v|  v.attributes.merge(decompressed_data) end</code> however, im getting the following error <code>no implicit conversion of Array into Hash</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 843, "user_id": 728226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7840ff7b45650a9687e8b599461c4269?s=128&d=identicon&r=PG", "display_name": "Jau L", "link": "https://stackoverflow.com/users/728226/jau-l"}, "edited": false, "score": 0, "creation_date": 1560232667, "post_id": 56536437, "comment_id": 99656696, "body": "Are you kidding? I have no idea what all these variables contain and where the error is raised from. Post another question."}, {"owner": {"reputation": 843, "user_id": 728226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7840ff7b45650a9687e8b599461c4269?s=128&d=identicon&r=PG", "display_name": "Jau L", "link": "https://stackoverflow.com/users/728226/jau-l"}, "edited": false, "score": 0, "creation_date": 1560232752, "post_id": 56536437, "comment_id": 99656722, "body": "Oh sorry about that man, I guess the question, if you have a datatype as array, how can you append it to a Hash. I can also post a new question, thanks."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 843, "user_id": 728226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7840ff7b45650a9687e8b599461c4269?s=128&d=identicon&r=PG", "display_name": "Jau L", "link": "https://stackoverflow.com/users/728226/jau-l"}, "edited": false, "score": 2, "creation_date": 1560232850, "post_id": 56536437, "comment_id": 99656748, "body": "Ah, <code>attributes</code> is a hash and <code>decompressed_data</code> is an array? Just add it to the hash under some key, like <code>v.attributes[&#39;decompressed_data&#39;] = decompressed_data</code> or like."}, {"owner": {"reputation": 843, "user_id": 728226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7840ff7b45650a9687e8b599461c4269?s=128&d=identicon&r=PG", "display_name": "Jau L", "link": "https://stackoverflow.com/users/728226/jau-l"}, "edited": false, "score": 0, "creation_date": 1560232941, "post_id": 56536437, "comment_id": 99656788, "body": "yep that works, thanks a lot @Aleksei Matiushkin, appreciate your help!"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1560226919, "creation_date": 1560226919, "answer_id": 56536437, "question_id": 56535308, "link": "https://stackoverflow.com/questions/56535308/convert-byte-to-string-in-rails/56536437#56536437", "title": "convert byte to string in rails", "body": "<p>You are overcomplicating things. I have no idea what the leading <code>b</code> in data literal is supposed to mean, but this would work:</p>\n\n<pre><code>require 'base64'\nZlib::Inflate.inflate Base64.decode64('eJzLSM3JyQcABiwCFQ==')\n#\u21d2 \"hello\"\n</code></pre>\n"}], "owner": {"reputation": 843, "user_id": 728226, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7840ff7b45650a9687e8b599461c4269?s=128&d=identicon&r=PG", "display_name": "Jau L", "link": "https://stackoverflow.com/users/728226/jau-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560226954, "creation_date": 1560216386, "last_edit_date": 1560226954, "question_id": 56535308, "link": "https://stackoverflow.com/questions/56535308/convert-byte-to-string-in-rails", "title": "convert byte to string in rails", "body": "<p>how to convert byte data to a string so I perform base64 decode on it and then zlib decompress it.</p>\n\n<p>example: <code>data = b'eJzLSM3JyQcABiwCFQ=='</code> </p>\n\n<pre><code>Zlib::Inflate.inflate(Base64.decode64(bin_to_hex(data)))\n\ndef bin_to_hex(s)\ns.unpack('C*').first\nend\n</code></pre>\n\n<p>I'm getting <code>\"\\xE2\" from ASCII-8BIT to UTF-8</code> also getting <code>undefined method</code>unpack'`</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 5, "creation_date": 1560204612, "post_id": 56533818, "comment_id": 99651348, "body": "Not sure I understand your question. Everything you&#39;ve shown looks correct... When you say <code>user.friends</code>, you get a CollectionProxy of Users, because friends are users. When you say <code>user.friendships</code>, you get a CollectionProxy of friendships, which are <i>records of relationships between users, not users themselves</i>. A friend is a User, a friendship is not a User."}, {"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1560225279, "post_id": 56533818, "comment_id": 99654929, "body": "What Glyoko has said makes sense. also, please paste your <code>Friend.rb</code> model."}, {"owner": {"reputation": 81, "user_id": 9561042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbde692344e4067815489f888f06e1f?s=128&d=identicon&r=PG", "display_name": "SwiftHub", "link": "https://stackoverflow.com/users/9561042/swifthub"}, "edited": false, "score": 0, "creation_date": 1560282253, "post_id": 56533818, "comment_id": 99683178, "body": "Hi Glyoko, that commend was super helpful! If you want to make it into an answer I can accept your answer"}], "answers": [{"tags": [], "owner": {"reputation": 627, "user_id": 10895713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GTs8n.jpg?s=128&g=1", "display_name": "Max Vinicius", "link": "https://stackoverflow.com/users/10895713/max-vinicius"}, "is_accepted": false, "score": 3, "last_activity_date": 1560218608, "last_edit_date": 1560218608, "creation_date": 1560204494, "answer_id": 56534120, "question_id": 56533818, "link": "https://stackoverflow.com/questions/56533818/how-does-has-many-through-work-with-only-two-models/56534120#56534120", "title": "how does has_many :through work with only two models?", "body": "<p>In designing a data model, you will sometimes find a model that should have a relation to itself. For example, you may want to store all employees in a single database model, but be able to trace relationships such as between manager and subordinates. This situation can be modeled with self-joining associations:</p>\n\n<pre><code> class Employee &lt; ApplicationRecord\n  has_many :subordinates, class_name: \"Employee\",\n                          foreign_key: \"manager_id\"\n\n  belongs_to :manager, class_name: \"Employee\"\nend\n</code></pre>\n\n<p>With this setup, you can retrieve @employee.subordinates and @employee.manager.</p>\n\n<p>Source: <a href=\"https://guides.rubyonrails.org/association_basics.html#self-joins\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/association_basics.html#self-joins</a></p>\n"}, {"tags": [], "owner": {"reputation": 1175, "user_id": 2861567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRa02.jpg?s=128&g=1", "display_name": "quyetdc", "link": "https://stackoverflow.com/users/2861567/quyetdc"}, "is_accepted": false, "score": 1, "last_activity_date": 1560236265, "creation_date": 1560236265, "answer_id": 56538159, "question_id": 56533818, "link": "https://stackoverflow.com/questions/56533818/how-does-has-many-through-work-with-only-two-models/56538159#56538159", "title": "how does has_many :through work with only two models?", "body": "<pre><code>users table\n-----------\n-id\n-...\n</code></pre>\n\n<pre><code>friendships table\n-----------------\n- id\n- user_id\n- friend_id\n</code></pre>\n\n<p>When you call <code>@user.friendships</code>, the target is to find <code>friendships</code> of <code>@user</code>. it returns objects from <code>friendships</code> table, the middle table, which hold the <code>relationships</code> between <code>users</code> and <code>users' friends</code></p>\n\n<p>When you call <code>@user.friends</code>, the target is to find <code>friends</code> of the <code>@user</code>. It is to join <code>users</code> table and <code>friendships</code> table, where <code>friendships.user_id = @user.id</code>, then, it gets all <code>friend_id</code> of from those <code>friendships</code> records, and find <code>users</code> who has <code>id</code> included in that <code>friend_ids</code> array.</p>\n"}], "owner": {"reputation": 81, "user_id": 9561042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fbde692344e4067815489f888f06e1f?s=128&d=identicon&r=PG", "display_name": "SwiftHub", "link": "https://stackoverflow.com/users/9561042/swifthub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1560236265, "creation_date": 1560202442, "question_id": 56533818, "link": "https://stackoverflow.com/questions/56533818/how-does-has-many-through-work-with-only-two-models", "title": "how does has_many :through work with only two models?", "body": "<p>Just trying to work out how <code>has_many :through</code> works when there are only two models. I know there are a whole bunch of answers, but none seem to give an example with only using two models, all other examples are using three+ example models.</p>\n\n<p>The question I would like answered is why is it that whilst in the rails console I get two completely separate results with the commands <code>a.friendships</code> vs <code>a.friends</code>, e.g. why does <code>a.friends</code> know to return the users object back to me? but <code>a.friendships</code> does not.</p>\n\n<pre><code>#User.rb\nclass User &lt; ApplicationRecord         \n  has_many :friendships\n  has_many :friends, through: :friendships\nend\n</code></pre>\n\n<pre><code>#Friendship.rb\nclass Friendship &lt; ApplicationRecord\n    belongs_to :user\n    belongs_to :friend, class_name: \"User\"\n\nend\n</code></pre>\n\n<pre><code>irb(main):020:0&gt; a = User.first\nirb(main):016:0&gt; a.friendships\n  Friendship Load (0.1ms)  SELECT  \"friendships\".* FROM \"friendships\" WHERE \"friendships\".\"user_id\" = ? LIMIT ?  [[\"user_id\", 1], [\"LIMIT\", 11]]\n=&gt; #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;Friendship id: 1, user_id: 1, friend_id: 2, created_at: \"2019-06-10 20:27:16\", updated_at: \"2019-06-10 20:31:41\"&gt;]&gt;\n</code></pre>\n\n<pre><code>irb(main):020:0&gt; a = User.first\nirb(main):019:0&gt; a.friends\n  User Load (0.1ms)  SELECT  \"users\".* FROM \"users\" INNER JOIN \"friendships\" ON \"users\".\"id\" = \"friendships\".\"friend_id\" WHERE \"friendships\".\"user_id\" = ? LIMIT ?  [[\"user_id\", 1], [\"LIMIT\", 11]]\n=&gt; #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;User id: 2, email: \"myemail@gmail.com\", created_at: \"2019-06-10 20:28:25\", updated_at: \"2019-06-10 20:28:25\"&gt;]&gt;\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2902, "user_id": 1202324, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e62f40c62dda03af2f033c651f36311?s=128&d=identicon&r=PG", "display_name": "Denny Mueller", "link": "https://stackoverflow.com/users/1202324/denny-mueller"}, "edited": false, "score": 3, "creation_date": 1560199941, "post_id": 56533335, "comment_id": 99649951, "body": "<code>if lockers[i] = &quot;Open&quot;</code> this is always <code>true</code>. Since variable assignment always is a true value. What you are using is <code>assingment</code> with <code>=</code> but from the context I guess you want to use <code>==</code> which is the <code>equal to</code> operator."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "reply_to_user": {"reputation": 2902, "user_id": 1202324, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e62f40c62dda03af2f033c651f36311?s=128&d=identicon&r=PG", "display_name": "Denny Mueller", "link": "https://stackoverflow.com/users/1202324/denny-mueller"}, "edited": false, "score": 0, "creation_date": 1560200616, "post_id": 56533335, "comment_id": 99650175, "body": "@DennyMueller variable assignment is not always a true value. <code>lockers[i]= false</code> results in false."}, {"owner": {"reputation": 1, "user_id": 3757477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/235aae9535cd5b8ab318f3686bfbf247?s=128&d=identicon&r=PG&f=1", "display_name": "user3757477", "link": "https://stackoverflow.com/users/3757477/user3757477"}, "edited": false, "score": 0, "creation_date": 1560200637, "post_id": 56533335, "comment_id": 99650182, "body": "Oh jeez, you are right. I knew it was something simple. Thank you."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1560214035, "post_id": 56533335, "comment_id": 99653053, "body": "This problem would be a lot simpler if you used <code>true</code> and <code>false</code> so you can use <code>lockers[i] = !lockers[i]</code> with simple logical negation."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1560214095, "post_id": 56533335, "comment_id": 99653064, "body": "Note: Although <code>;</code> is valid syntax in Ruby, it&#39;s exclusively used as a separator for single-line statements that would have to be multi-line otherwise. It is not used as a statement terminator. None of these <code>;</code> in your code are necessary."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1560352254, "post_id": 56533335, "comment_id": 99710131, "body": "If you found any of the answers helpful, please consider <a href=\"https://stackoverflow.com/help/someone-answers\">selecting</a> the one you found most helpful. (Yes, I know there is but one answer. :-))"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1560214007, "post_id": 56533799, "comment_id": 99653045, "body": "I was going to suggest <code>map!</code> but I did not see the <code>with_index</code> thing coming. Interesting angle."}, {"owner": {"reputation": 1, "user_id": 3757477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/235aae9535cd5b8ab318f3686bfbf247?s=128&d=identicon&r=PG&f=1", "display_name": "user3757477", "link": "https://stackoverflow.com/users/3757477/user3757477"}, "edited": false, "score": 0, "creation_date": 1560351772, "post_id": 56533799, "comment_id": 99709838, "body": "This is all really helpful, thank you everyone. Clearly I&#39;ve got a ways to go."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1560204274, "last_edit_date": 1560204274, "creation_date": 1560202323, "answer_id": 56533799, "question_id": 56533335, "link": "https://stackoverflow.com/questions/56533335/need-some-help-iterating-through-an-array-and-making-conditional-changes/56533799#56533799", "title": "Need some help iterating through an array and making conditional changes", "body": "<p>This is one way you could do that.</p>\n\n<pre><code>def flip(lockers, n)\n  h = { \"closed\"=&gt;\"open\", \"open\"=&gt;\"closed\" }\n  (0..lockers.size-1).step(n).each { |i| lockers[i] = h[lockers[i]] }\n  lockers\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>lockers = 6.times.map { [\"open\", \"closed\"].sample }\n  #=&gt; [\"open\", \"closed\", \"open\", \"closed\", \"closed\", \"open\"]\n\nflip(lockers, 2)\n  #=&gt; [\"closed\", \"closed\", \"closed\", \"closed\", \"open\", \"open\"]\nlockers\n  #=&gt; [\"closed\", \"closed\", \"closed\", \"closed\", \"open\", \"open\"] \n\nlockers = [\"open\", \"closed\", \"open\", \"closed\", \"closed\", \"open\"] \nflip(lockers, 3) \n  #=&gt; [\"closed\", \"closed\", \"open\", \"open\", \"closed\", \"open\"]\n\nlockers = [\"open\", \"closed\", \"open\", \"closed\", \"closed\", \"open\"] \nflip(lockers, 4) \n  #=&gt; [\"closed\", \"closed\", \"open\", \"closed\", \"open\", \"open\"] \n</code></pre>\n\n<p>The following is another way.</p>\n\n<pre><code>def flip(lockers, n)\n  h = { \"closed\"=&gt;\"open\", \"open\"=&gt;\"closed\" }\n  lockers.map!.with_index { |s,i| (i % n).zero? ? h[s] : s }\nend\n</code></pre>\n\n<p>I've assumed that, by \"every other item\", the first to be flipped is the first element of the array. (Note that the last element of the array has index <code>lockers.size-1</code>, not <code>lockers.size</code>.)</p>\n\n<p>I understand that you wish to modify the existing array, so that's what I've done. To return a new array and leave the original array unchanged (generally the preferred practice), simply replace <code>map!</code> with <code>map</code>.</p>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.5.1/Array.html#method-i-map-21\" rel=\"nofollow noreferrer\">Array#map!</a> and \n<a href=\"http://ruby-doc.org/core-2.5.1/Array.html#method-i-map\" rel=\"nofollow noreferrer\">Array#map</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 3757477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/235aae9535cd5b8ab318f3686bfbf247?s=128&d=identicon&r=PG&f=1", "display_name": "user3757477", "link": "https://stackoverflow.com/users/3757477/user3757477"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1560214121, "creation_date": 1560199728, "last_edit_date": 1560214121, "question_id": 56533335, "link": "https://stackoverflow.com/questions/56533335/need-some-help-iterating-through-an-array-and-making-conditional-changes", "title": "Need some help iterating through an array and making conditional changes", "body": "<p>I would like to generate an array, then walk through it multiple times, making changes to items in the array based on their state. I am having trouble getting the condition statements to work properly</p>\n\n<pre><code>lockers = Array.new(900, \"Closed\");\n\n#walk through and change every other item to \"closed\" if it is \"open\", and \n\"open\" if it is \"closed\n(1...lockers.size).step(2).each { |i| \nif lockers[i] = \"Open\"\nlockers[i] = \"Closed\";\n\nelsif (lockers[i] = \"Closed\")\nlockers[i] = \"Open\";\nend\n\nlockers.join };\n\n\n#walk through and change every 3rd item to \"closed\" if it is \"open\", and \n\"open\" if it is \"closed\n(0...lockers.size).step(3).each { |i| \nif (lockers[i] = \"Open\")\nlockers[i] = \"Closed\";\n\nelsif (lockers[i] = \"Closed\")\nlockers[i] = \"Open\";\nend\n\nlockers.join; };\n\n#walk through and change every 4th item to \"closed\" if it is \"open\", and \"open\" if it is \"closed\n(0...lockers.size).step(4).each { |i| \nif (lockers[i] = \"Open\")\nlockers[i] = \"Closed\";\n\nelsif (lockers[i] = \"Closed\")\nlockers[i] = \"Open\";\nend\n\nlockers.join; };\n</code></pre>\n\n<p>Doing the above results in the array being made properly with everything set to \"Closed\". After the first walk through, it fails to change any of the items to \"Open\".</p>\n\n<p>If I change the conditional to \"lockers[i] = \"Open\"\", then obviously that works. But then the later conditionals also fail to pick up every item that it should be.</p>\n"}, {"tags": ["json", "ruby", "scripting"], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 10676253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/893a28550295fdcbccbf7e6397f51a12?s=128&d=identicon&r=PG&f=1", "display_name": "Lakshmi Swetha G", "link": "https://stackoverflow.com/users/10676253/lakshmi-swetha-g"}, "is_accepted": true, "score": 1, "last_activity_date": 1560201232, "creation_date": 1560201232, "answer_id": 56533626, "question_id": 56533320, "link": "https://stackoverflow.com/questions/56533320/parse-json-file-in-ruby-script-and-store-specific-value/56533626#56533626", "title": "Parse JSON file in ruby script and store specific value", "body": "<p>Due to the structure of the conf.json where it has a composition of {} with a [], accessing every key by its name is difficult. So use\n<code>mykey = data['terraform'][0]['backend'][0]['s3'][0]['key']</code></p>\n\n<p>Here, terraform is a single object in {} which can be accessed by its name. It contains an array object [] which have to be accessed by index [0], since there is only one element. The same follows for the inner elements also. '{ } ' used for key-value pair Object  and '[]' is used for Arrays with values in json.</p>\n\n<p>and enclose the whole \"terraform\" in {} in conf.json. </p>\n"}, {"comments": [{"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1560218019, "post_id": 56533703, "comment_id": 99653697, "body": "I did not know that you could <code>dig</code> by index, so even though this didn&#39;t explain that the data structure was being accessed incorrectly, this is a valuable answer. Thank you for sharing this"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1560218325, "post_id": 56533703, "comment_id": 99653748, "body": "Yes, that&#39;s in the docs <code>g = { foo: [10, 11, 12] }; g.dig(:foo, 1) #=&gt; 11</code>. And yes, I didn&#39;t point that out, thanks!"}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 1, "last_activity_date": 1560201706, "creation_date": 1560201706, "answer_id": 56533703, "question_id": 56533320, "link": "https://stackoverflow.com/questions/56533320/parse-json-file-in-ruby-script-and-store-specific-value/56533703#56533703", "title": "Parse JSON file in ruby script and store specific value", "body": "<p><a href=\"https://ruby-doc.org/core-2.6.1/Hash.html#method-i-dig\" rel=\"nofollow noreferrer\">Hash#dig</a> works for accessing arrays based in their index:</p>\n\n<pre><code>p hash.dig(:terraform, 0, :backend, 0, :s3, 0, :key)\n# \"Apple/Employee/Background/terraform.tfstate\"\n</code></pre>\n\n<p>The plus is it returns nil if some intermediate step is nil:</p>\n\n<pre><code>p foo.dig(:terraform, 0, :backend, 0, :s3, 1, :key) # nil\np foo.dig(:terraform, 0, :backend, 0, :orale, 0, :key) # nil\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 11614662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b662715c73aaa0c74fb03418ad0637?s=128&d=identicon&r=PG&f=1", "display_name": "Betsy Stones", "link": "https://stackoverflow.com/users/11614662/betsy-stones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 56533626, "answer_count": 2, "score": 0, "last_activity_date": 1560201706, "creation_date": 1560199665, "question_id": 56533320, "link": "https://stackoverflow.com/questions/56533320/parse-json-file-in-ruby-script-and-store-specific-value", "title": "Parse JSON file in ruby script and store specific value", "body": "<p>Parse the JSON file in Ruby script and obtain value for \"key\"</p>\n\n<p>My JSON file looks like</p>\n\n<pre><code>\"terraform\": [\n    {\n  \"backend\": [\n    {\n      \"s3\": [\n        {\n          \"bucket\": \"terraform-dev\",\n          \"dynamodb\": \"terraform_files\",\n          \"encrypt\": \"true\",\n          \"key\": \"Apple/Employee/Background/terraform.tfstate\"\n        }\n      ]\n     }\n  ],\n  \"required_version\": \"~&gt; 0.11.8\"\n}\n] \n</code></pre>\n\n<p>I tried writing this script in Ruby</p>\n\n<pre><code>#!/usr/bin/env ruby\nrequire \"json\"\nfile = File.open \"/Users/Test/conf.json\"\ndata = JSON.load file\nmykey= data['terraform'].first['backend']['s3']['key']\nprint mykey\nfile.close\n</code></pre>\n\n<p>Expected result: Apple/Employee/Background/terraform.tfstate</p>\n\n<p>Error Message: no implicit conversion of String into Integer (TypeError)</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3597, "user_id": 2112512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9689bb4f705b8bede56deddf66c87ef?s=128&d=identicon&r=PG", "display_name": "Jake Worth", "link": "https://stackoverflow.com/users/2112512/jake-worth"}, "edited": false, "score": 0, "creation_date": 1560199370, "post_id": 56533246, "comment_id": 99649724, "body": "What URL are you visiting to trigger that error from the server?"}, {"owner": {"reputation": 769, "user_id": 9739007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18Kgd.png?s=128&g=1", "display_name": "McFloofenbork", "link": "https://stackoverflow.com/users/9739007/mcfloofenbork"}, "reply_to_user": {"reputation": 3597, "user_id": 2112512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9689bb4f705b8bede56deddf66c87ef?s=128&d=identicon&r=PG", "display_name": "Jake Worth", "link": "https://stackoverflow.com/users/2112512/jake-worth"}, "edited": false, "score": 0, "creation_date": 1560199412, "post_id": 56533246, "comment_id": 99649746, "body": "Just edited: <code>0.0.0.0:3000&#47;videos&#47;</code>. I tried adding <code>videos&#47;pizza&#47;</code> and it gave me a FUNKY error (will edit)."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1560199597, "post_id": 56533246, "comment_id": 99649824, "body": "Why do you have the double curly braces here: <code>&quot;videos&#47;#{{params[:page]}}&quot;</code>?"}, {"owner": {"reputation": 769, "user_id": 9739007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18Kgd.png?s=128&g=1", "display_name": "McFloofenbork", "link": "https://stackoverflow.com/users/9739007/mcfloofenbork"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1560199659, "post_id": 56533246, "comment_id": 99649852, "body": "@jvillian Thanks for catching that. Just got rid of it, will update."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1560199717, "post_id": 56533246, "comment_id": 99649874, "body": "After editing, is your error still the same for <code>0.0.0.0:3000&#47;videos&#47;pizza</code>?"}, {"owner": {"reputation": 769, "user_id": 9739007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18Kgd.png?s=128&g=1", "display_name": "McFloofenbork", "link": "https://stackoverflow.com/users/9739007/mcfloofenbork"}, "edited": false, "score": 0, "creation_date": 1560199858, "post_id": 56533246, "comment_id": 99649922, "body": "Yeah it is, &quot;Template is missing&quot; it says"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1560199924, "post_id": 56533246, "comment_id": 99649944, "body": "That&#39;s not the same error. Please add the new error and the <code>show</code> template to your question."}, {"owner": {"reputation": 769, "user_id": 9739007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18Kgd.png?s=128&g=1", "display_name": "McFloofenbork", "link": "https://stackoverflow.com/users/9739007/mcfloofenbork"}, "edited": false, "score": 0, "creation_date": 1560199983, "post_id": 56533246, "comment_id": 99649968, "body": "I don&#39;t understand, what do you mean &quot;add&quot; the show template?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 769, "user_id": 9739007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18Kgd.png?s=128&g=1", "display_name": "McFloofenbork", "link": "https://stackoverflow.com/users/9739007/mcfloofenbork"}, "edited": false, "score": 0, "creation_date": 1560200011, "post_id": 56533246, "comment_id": 99649975, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/194719/discussion-between-jvillian-and-mcfloofenbork\">continue this discussion in chat</a>."}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1560213664, "post_id": 56533246, "comment_id": 99652987, "body": "Just so you know, this method can potentially create insecurities (<a href=\"https://brakemanscanner.org/docs/warning_types/dynamic_render_paths/\" rel=\"nofollow noreferrer\">brakemanscanner.org/docs/warning_types/dynamic_render_paths</a>&zwnj;&#8203;)."}], "answers": [{"comments": [{"owner": {"reputation": 769, "user_id": 9739007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18Kgd.png?s=128&g=1", "display_name": "McFloofenbork", "link": "https://stackoverflow.com/users/9739007/mcfloofenbork"}, "edited": false, "score": 0, "creation_date": 1560199833, "post_id": 56533295, "comment_id": 99649907, "body": "I thought the <code>videos&#47;:videos</code> in routes makes it so that any thing that starts with <code>videos</code> calls the show action. Why would it go to the index page."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1560199869, "post_id": 56533295, "comment_id": 99649928, "body": "I&#39;d suggest <code>resources :videos, only: [:show]</code> if the OP only wants the <code>show</code> action."}], "tags": [], "owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "is_accepted": false, "score": 2, "last_activity_date": 1560199534, "creation_date": 1560199534, "answer_id": 56533295, "question_id": 56533246, "link": "https://stackoverflow.com/questions/56533246/unable-to-render-anything-but-default-rails-page/56533295#56533295", "title": "Unable to render anything but default Rails page", "body": "<p>You need to define the routes to <code>/videos</code>, You can either add a <code>resources :videos</code> if you need all the restful routes or just \n<code>get 'videos', to: 'videos#index'</code>.</p>\n\n<p>You have only defined the route for a <code>show</code> action but you are trying to get the <code>index</code> page for videos, you can look into details of routing <a href=\"https://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1560204090, "creation_date": 1560204090, "answer_id": 56534062, "question_id": 56533246, "link": "https://stackoverflow.com/questions/56533246/unable-to-render-anything-but-default-rails-page/56534062#56534062", "title": "Unable to render anything but default Rails page", "body": "<p>Start by doing:</p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :videos\nend\n</code></pre>\n\n<p>Which will give you:</p>\n\n<pre><code>     videos GET    /videos(.:format)             videos#index\n            POST   /videos(.:format)             videos#create\n  new_video GET    /videos/new(.:format)         videos#new\n edit_video GET    /videos/:id/edit(.:format)    videos#edit\n      video GET    /videos/:id(.:format)         videos#show\n            PATCH  /videos/:id(.:format)         videos#update\n            PUT    /videos/:id(.:format)         videos#update\n            DELETE /videos/:id(.:format)         videos#destroy\n</code></pre>\n\n<p>Then, rename <code>app/views/videos/videos.html.erb</code> to <code>app/views/videos/show.html.erb</code>.</p>\n\n<p>And modify your <code>show</code> action on your <code>VideosController</code> to: </p>\n\n<pre><code>class VideosController &lt; ApplicationController\n  def show\n\n  end\nend\n</code></pre>\n\n<p>And now <code>0.0.0.0:3000/videos/pizza</code> will render the <code>show.html.erb</code> template and you'll have a <code>params[:id]</code> with a value of <code>pizza</code>.</p>\n"}], "owner": {"reputation": 769, "user_id": 9739007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/18Kgd.png?s=128&g=1", "display_name": "McFloofenbork", "link": "https://stackoverflow.com/users/9739007/mcfloofenbork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 56534062, "answer_count": 2, "score": 0, "last_activity_date": 1560204090, "creation_date": 1560199251, "last_edit_date": 1560200128, "question_id": 56533246, "link": "https://stackoverflow.com/questions/56533246/unable-to-render-anything-but-default-rails-page", "title": "Unable to render anything but default Rails page", "body": "<p>I am following a tutorial (<a href=\"https://blog.teamtreehouse.com/static-pages-ruby-rails\" rel=\"nofollow noreferrer\">https://blog.teamtreehouse.com/static-pages-ruby-rails</a>) to render a page using Rails routes. The problem is I get an error instead of the page that should render. I don't know what I'm doing wrong since there are literally only a few steps. </p>\n\n<p>The only difference my code has from the tutorial is trivial. I'm using <code>Videos</code> rather than <code>Pages.</code> </p>\n\n<p>In <code>config/routes.rb</code>:</p>\n\n<pre><code>Rails.application.routes.draw do\n    # This means that all paths following the pattern:\n    # /videos/about, /videos/home, /videos/features\n    # will route here!\n    get \"/videos/:video\" =&gt; \"videos#show\"\nend\n</code></pre>\n\n<p>In <code>app/controllers/videos_controller.rb\"</code>:</p>\n\n<pre><code>class VideosController &lt; ApplicationController\n    def show\n        render template: \"videos/#{params[:page]}\"\n    end\nend\n</code></pre>\n\n<p>Finally, I have a static page filled with gibberish stored in <code>app/views/videos/videos.html.erb</code>. </p>\n\n<p>However, when I run my server and go to <code>0.0.0.0:3000/videos/</code> I get the following error: </p>\n\n<pre><code>No route matches [GET] \"/videos\"\nRails.root: /home/mightu/Desktop/portal_rails\n</code></pre>\n\n<p>When I try <code>0.0.0.0:3000/videos/pizza</code>, I get:</p>\n\n<pre><code>Missing template /videos with {:locale=&gt;[:en], :formats=&gt;[:html], :variants=&gt;[], :handlers=&gt;[:raw, :erb, :html, :builder, :ruby, :coffee, :jbuilder]}. Searched in: * \"/home/mightu/Desktop/portal_rails/app/views\" \n</code></pre>\n\n<p>It tells me the problem is this line:</p>\n\n<pre><code>render template: \"videos/#{params[:page]}\"\n</code></pre>\n\n<p>Please help thx</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5.2"], "answers": [{"tags": [], "owner": {"reputation": 920, "user_id": 1673227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tbgZ.jpg?s=128&g=1", "display_name": "M.Elkady", "link": "https://stackoverflow.com/users/1673227/m-elkady"}, "is_accepted": false, "score": 1, "last_activity_date": 1560205965, "last_edit_date": 1560205965, "creation_date": 1560205078, "answer_id": 56534192, "question_id": 56533214, "link": "https://stackoverflow.com/questions/56533214/how-to-assign-values-to-methods-that-are-included-in-class-via-a-module/56534192#56534192", "title": "How to assign values to methods that are included in class via a module?", "body": "<pre><code>module MyModule\n  def set_my_value(val)\n    define_method :my_value do\n      val\n    end\n  end\n\n  def method1\n    my_value\n  end\n\n  def method2\n    \"#{method1} is another method\"\n  end\nend\n\nclass MyClass\n  include MyModule\n  extend MyModule\n  @my_value = 'Method1'\n  set_my_value 'Method1'\nend\n</code></pre>\n\n<p>you can make it like this, rails uses this way heavily, and when you include a module to a class it will be a parent in the inheritance hierarchy of this class so you can't access it's instance variable directly as you did (in class body) to access it you need to do from an inside method    </p>\n\n<pre><code>module MyModule\n  def method1\n    @my_value\n  end\n\n  def method2\n    \"#{method1} is another method\"\n  end\nend\n\nclass MyClass\n  include MyModule\n  def initialize\n    @my_value = 'Method1'\n  end\nend\n\nputs MyClass.new().method2  \n</code></pre>\n\n<p>what you defined in your code was a class instance variable and it's not the instance variable you were trying to modify </p>\n"}], "owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1560205965, "creation_date": 1560199106, "question_id": 56533214, "link": "https://stackoverflow.com/questions/56533214/how-to-assign-values-to-methods-that-are-included-in-class-via-a-module", "title": "How to assign values to methods that are included in class via a module?", "body": "<pre><code>module MyModule\n   def method1\n     @my_value\n   end\n\n   def method2\n     \"#{method1} is another method\"\n   end\nend\n\nclass MyClass\n    include MyModule\n    @my_value = 'Method1' \nend\n\nputs MyClass.new().method2\n&gt;&gt;   is another method\n</code></pre>\n\n<p>How can I get the value assigned to my methods that I included into my class? As you can see @my_value is nil.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5.2"], "comments": [{"owner": {"reputation": 117, "user_id": 4091646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a7280005cf9ff33e12ef922fb75a7e?s=128&d=identicon&r=PG", "display_name": "Wender Freese", "link": "https://stackoverflow.com/users/4091646/wender-freese"}, "edited": false, "score": 1, "creation_date": 1560196306, "post_id": 56532662, "comment_id": 99648694, "body": "<a href=\"https://stackoverflow.com/questions/6468268/get-list-of-a-class-instance-methods\" title=\"get list of a class instance methods\">stackoverflow.com/questions/6468268/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 3, "last_activity_date": 1560196553, "creation_date": 1560196553, "answer_id": 56532774, "question_id": 56532662, "link": "https://stackoverflow.com/questions/56532662/method-to-find-just-my-custom-methods-i-wrote-not-any-inherited-methods-ruby/56532774#56532774", "title": "Method to find just my custom methods I wrote, not any inherited methods (Ruby)", "body": "<p>You can use <code>Foo.instance_methods(false)</code> to get the instance methods, and <code>Foo.methods(false)</code> to get the class methods. </p>\n\n<p>The <code>false</code> argument is saying <em>dont show inherited methods</em>.</p>\n"}], "owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 56532774, "answer_count": 1, "score": 1, "last_activity_date": 1560196556, "creation_date": 1560195938, "question_id": 56532662, "link": "https://stackoverflow.com/questions/56532662/method-to-find-just-my-custom-methods-i-wrote-not-any-inherited-methods-ruby", "title": "Method to find just my custom methods I wrote, not any inherited methods (Ruby)", "body": "<pre><code>class Foo\n\n   def initialize()\n   end\n\n   def cow\n   end\n\n   def dog\n   end\n\n   def any_other\n   end\nend\n</code></pre>\n\n<p>What method can I use to find just my custom defined methods, cow, dog, and any_other,  and not any of the base methods?</p>\n\n<pre><code>Foo.custom_methods\n&gt;&gt;\n:cow\n:dog\n:any_other\n</code></pre>\n"}, {"tags": ["ruby", "ubuntu"], "answers": [{"tags": [], "owner": {"reputation": 38, "user_id": 224380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7511811296eee4ffd6051a829442c6e8?s=128&d=identicon&r=PG", "display_name": "Chris Steinbach", "link": "https://stackoverflow.com/users/224380/chris-steinbach"}, "is_accepted": false, "score": 1, "last_activity_date": 1560198016, "last_edit_date": 1560198016, "creation_date": 1560195708, "answer_id": 56532625, "question_id": 56532624, "link": "https://stackoverflow.com/questions/56532624/generating-docs-for-ruby-2-5/56532625#56532625", "title": "Generating docs for ruby 2.5", "body": "<p>As is so often the case, documenting in full what I had already tried showed a way forward, and the error message of attempt number four made me wonder whether and rdoc2.5 was available in the path, which is was.</p>\n\n<p>The following worked for me:</p>\n\n<pre><code>$ rdoc2.5 --all --ri\nParsing sources...\n100% [831/831]  vsnprintf.c                                                                           \n\nGenerating RI format into /home/christians/.rdoc...\n\n  Files:        831\n\n  Classes:     1324 ( 565 undocumented)\n  Modules:      284 ( 121 undocumented)\n  Constants:   1313 ( 526 undocumented)\n  Attributes:  1066 ( 251 undocumented)\n  Methods:    10078 (2161 undocumented)\n\n  Total:      14065 (3624 undocumented)\n   74.23% documented\n\n  Elapsed: 26.8s\n</code></pre>\n\n<p>Although I'm only able to see the documentation using the ri2.5 command. The regular ri command returns a different error that suggests I may have broken something with one of these experimental solutions:</p>\n\n<pre><code>$ ri String\nTraceback (most recent call last):\n    1: from /usr/local/bin/ri:23:in `&lt;main&gt;'\n/usr/local/bin/ri:23:in `load': cannot load such file -- /usr/lib/ruby/gems/2.5.0/gems/rdoc-6.0.1/exe/ri (LoadError)\n</code></pre>\n\n<p>This makes me wonder whether my ruby installation is as clean as it ought to be. The dpkg command reports the following ruby packages as installed:</p>\n\n<pre><code>$ dpkg -l | grep ruby\nii  libruby2.5:amd64                           2.5.1-1ubuntu1.2                             amd64        Libraries necessary to run Ruby 2.5\nii  rake                                       12.3.1-1                                     all          ruby make-like utility\nii  ruby                                       1:2.5.1                                      amd64        Interpreter of object-oriented scripting language Ruby (default version)\nii  ruby-did-you-mean                          1.2.0-2                                      all          smart error messages for Ruby &gt; 2.3\nii  ruby-minitest                              5.10.3-1                                     all          Ruby test tools supporting TDD, BDD, mocking, and benchmarking\nii  ruby-net-telnet                            0.1.1-2                                      all          telnet client library\nii  ruby-power-assert                          0.3.0-1                                      all          library showing values of variables and method calls in an expression\nii  ruby-test-unit                             3.2.5-1                                      all          unit testing framework for Ruby\nii  ruby2.5                                    2.5.1-1ubuntu1.2                             amd64        Interpreter of object-oriented scripting language Ruby\nii  rubygems-integration                       1.11                                         all          integration of Debian Ruby packages with Rubygems\n</code></pre>\n\n<p>Perhaps it would be best to reinstall everything ruby related from scratch?</p>\n\n<hr>\n\n<p><strong>Update:</strong> I removed everything ruby related, and manually removed a couple of commands lingering in /usr/local/bin (ri and rdoc).  I reinstalled using apt install ruby and everything seems fine.  The docs are generated and available after installation.</p>\n"}], "owner": {"reputation": 38, "user_id": 224380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7511811296eee4ffd6051a829442c6e8?s=128&d=identicon&r=PG", "display_name": "Chris Steinbach", "link": "https://stackoverflow.com/users/224380/chris-steinbach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1560213594, "creation_date": 1560195708, "last_edit_date": 1560213594, "question_id": 56532624, "link": "https://stackoverflow.com/questions/56532624/generating-docs-for-ruby-2-5", "title": "Generating docs for ruby 2.5", "body": "<p>Having installed ruby 2.5 on Ubuntu 18.04 I tried using the <code>ri</code> command with the following result:</p>\n\n<pre><code>$ ri String\nNothing known about String\n</code></pre>\n\n<p>In answer to <a href=\"https://stackoverflow.com/q/3178900\">similar questions</a>, the advice is offered to:</p>\n\n<p><strong>1. Generate the documentation using the rvm command</strong></p>\n\n<pre><code>$ rvm docs generate\n</code></pre>\n\n<p>I didn't install using <code>rvm</code>, so I imagine this option is closed to me.</p>\n\n<p><strong>2. Generate documentation for installed gems</strong></p>\n\n<pre><code>$ gem rdoc --all --ri --no-rdoc\n</code></pre>\n\n<p>This gave the following error messages:</p>\n\n<pre><code>ERROR:  Unable to document did_you_mean-1.2.0, /usr/share/rubygems-integration/all/gems/did_you_mean-1.2.0 is missing, skipping\nERROR:  Unable to document minitest-5.10.3, /usr/share/rubygems-integration/all/gems/minitest-5.10.3 is missing, skipping\nERROR:  Unable to document net-telnet-0.1.1, /usr/share/rubygems-integration/all/gems/net-telnet-0.1.1 is missing, skipping\nERROR:  Unable to document power_assert-0.2.7, /usr/share/rubygems-integration/all/gems/power_assert-0.2.7 is missing, skipping\nERROR:  Unable to document rake-12.3.1, /usr/share/rubygems-integration/all/gems/rake-12.3.1 is missing, skipping\nParsing documentation for rdoc-4.3.0\nParsing documentation for rdoc-data-4.1.0\nERROR:  Unable to document test-unit-3.2.5, /usr/share/rubygems-integration/all/gems/test-unit-3.2.5 is missing, skipping\n</code></pre>\n\n<p><strong>3. Use rdoc-data --install</strong></p>\n\n<pre><code>$ gem install rdoc-data\n$ rdoc-data --install\n</code></pre>\n\n<p>This returned the error message:</p>\n\n<pre><code>NOTE: Gem.datadir is deprecated; use spec.datadir instead. It will be removed on or after 2016-10-01.\nGem.datadir called from /var/lib/gems/2.5.0/gems/rdoc-data-4.1.0/lib/rdoc/data.rb:50.\nYour ruby version 2.5 is not supported, only 1.8, 1.9, 2.0, 2.1, 2.2, 2.3\n</code></pre>\n\n<p>Perhaps this installed an obsolete version of the <code>rdoc-data</code> gem? If so, is there some way to fix that?</p>\n\n<p><strong>4. Generate docs from source</strong></p>\n\n<pre><code>$ tar xvfz ~/Downloads/ruby-2_5_4.tar.gz\n$ cd ruby-2_5_4\n$ rdoc --all --ri\n</code></pre>\n\n<p>This gives the error:</p>\n\n<pre><code>Traceback (most recent call last):\n    1: from /usr/local/bin/rdoc:23:in `&lt;main&gt;'\n/usr/local/bin/rdoc:23:in `load': cannot load such file -- /usr/lib/ruby/gems/2.5.0/gems/rdoc-6.0.1/exe/rdoc (LoadError)\n</code></pre>\n\n<p>And indeed, the exe directory contains the file <code>rdoc2.5</code> and not plain <code>rdoc</code>.</p>\n\n<p>So. Where to go from here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 117, "user_id": 4091646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a7280005cf9ff33e12ef922fb75a7e?s=128&d=identicon&r=PG", "display_name": "Wender Freese", "link": "https://stackoverflow.com/users/4091646/wender-freese"}, "edited": false, "score": 4, "creation_date": 1560192613, "post_id": 56531787, "comment_id": 99647189, "body": "Have you already given a try to <code>nathanvda&#47;cocoon</code> gem?"}, {"owner": {"reputation": 143, "user_id": 9283623, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2212b8ac682e3d0ac8724f66342e4316?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/9283623/joe"}, "reply_to_user": {"reputation": 117, "user_id": 4091646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4a7280005cf9ff33e12ef922fb75a7e?s=128&d=identicon&r=PG", "display_name": "Wender Freese", "link": "https://stackoverflow.com/users/4091646/wender-freese"}, "edited": false, "score": 0, "creation_date": 1560248147, "post_id": 56531787, "comment_id": 99664404, "body": "Thanks a lot. This did it for me. Thanks"}], "owner": {"reputation": 143, "user_id": 9283623, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2212b8ac682e3d0ac8724f66342e4316?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/9283623/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560191691, "creation_date": 1560191691, "question_id": 56531787, "link": "https://stackoverflow.com/questions/56531787/add-dynamic-fields-in-a-form-with-a-plus-symbol-in-ruby-on-rails", "title": "Add Dynamic fields in a form with a plus symbol in Ruby on rails", "body": "<p>I would like to add fields dynamically in a form using html/css/javascript/jquery and would like it to be stored properly in Rails. </p>\n\n<p><a href=\"https://i.stack.imgur.com/w1Etn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/w1Etn.png\" alt=\"enter image description here\"></a></p>\n\n<p>How would I go about it in?</p>\n\n<p>I have tried to check these links: <a href=\"https://stackoverflow.com/questions/13277204/rails-form-add-fields-dynamically\">rails form add fields dynamically</a></p>\n\n<p>but they only show the front-end side.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6015527, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156602662695300/picture?type=large", "display_name": "Andrew Merritt", "link": "https://stackoverflow.com/users/6015527/andrew-merritt"}, "edited": false, "score": 0, "creation_date": 1560280816, "post_id": 56531724, "comment_id": 99682624, "body": "I actually found that in ruby 1.8 and prior, this returns the Ascii number. <code>ruby :001 &gt; ?1 =&gt; 49 </code>  Good to know about the string concatenation, that&#39;s the first I&#39;ve heard of that."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 31, "user_id": 6015527, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156602662695300/picture?type=large", "display_name": "Andrew Merritt", "link": "https://stackoverflow.com/users/6015527/andrew-merritt"}, "edited": false, "score": 0, "creation_date": 1560281073, "post_id": 56531724, "comment_id": 99682734, "body": "@AndrewMerritt I sincerely hope you are not using 1.8 or really anything less than 2.3 (EOL 2019-03-31) but yes technically speaking &lt; 1.9 returned the ASCII number"}, {"owner": {"reputation": 31, "user_id": 6015527, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156602662695300/picture?type=large", "display_name": "Andrew Merritt", "link": "https://stackoverflow.com/users/6015527/andrew-merritt"}, "edited": false, "score": 0, "creation_date": 1560281194, "post_id": 56531724, "comment_id": 99682784, "body": "Haha, no I&#39;m using 2.5.x in my projects. Just found it to be an interesting tidbit. Apparently I missed the previous question my search, which also shows that same answer."}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 4, "last_activity_date": 1560192022, "last_edit_date": 1560192022, "creation_date": 1560191374, "answer_id": 56531724, "question_id": 56531662, "link": "https://stackoverflow.com/questions/56531662/what-does-the-ruby-method-do/56531724#56531724", "title": "What does the ruby ? method do?", "body": "<p><code>?</code> is not a method in this case but rather a parsable syntax. <code>?</code> is a character literal in this context</p>\n\n<p><a href=\"https://ruby-doc.org/core-2.6.3/doc/syntax/literals_rdoc.html\" rel=\"nofollow noreferrer\">Docs</a> Excerpt:</p>\n\n<blockquote>\n  <p>There is also a character literal notation to represent single character strings, which syntax is a question mark (?) followed by a single character or escape sequence that corresponds to a single codepoint in the script encoding:</p>\n</blockquote>\n\n<pre><code>?a       #=&gt; \"a\"\n?abc     #=&gt; SyntaxError\n?\\n      #=&gt; \"\\n\"\n?\\s      #=&gt; \" \"\n?\\\\      #=&gt; \"\\\\\"\n?\\u{41}  #=&gt; \"A\"\n?\\C-a    #=&gt; \"\\x01\"\n?\\M-a    #=&gt; \"\\xE1\"\n?\\M-\\C-a #=&gt; \"\\x81\"\n?\\C-\\M-a #=&gt; \"\\x81\", same as above\n?\u3042      #=&gt; \"\u3042\"\n</code></pre>\n\n<p>You have also found another fun little mechanism of the parser which is 2 Strings can be concatenated together by simply placing them side by side (with or without white space). e.g. </p>\n\n<pre><code>\"1\" \"234\" \n#=&gt; \"1234\"\n\"1\"\"234\"\n#=&gt; \"1234\"\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6015527, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156602662695300/picture?type=large", "display_name": "Andrew Merritt", "link": "https://stackoverflow.com/users/6015527/andrew-merritt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1560191924, "answer_count": 1, "score": 0, "last_activity_date": 1560192022, "creation_date": 1560191077, "question_id": 56531662, "link": "https://stackoverflow.com/questions/56531662/what-does-the-ruby-method-do", "closed_reason": "Duplicate", "title": "What does the ruby ? method do?", "body": "<p>I ran across a code snippet today that used the <code>?</code> operator to quote the next character. I have no idea where the documentation is for this method and really no idea what it's actually doing.</p>\n\n<p>I've looked at the ruby docs, but haven't found it.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>?1\n</code></pre>\n\n<p><code>=&gt; \"1\"</code></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>?1\"23abc\"\n</code></pre>\n\n<p><code>=&gt; \"123abc\"</code></p>\n"}, {"tags": ["ruby", "pdf", "word-wrap", "prawn"], "answers": [{"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": true, "score": 1, "last_activity_date": 1560193460, "creation_date": 1560193460, "answer_id": 56532134, "question_id": 56531555, "link": "https://stackoverflow.com/questions/56531555/left-right-split-in-prawn-pdf/56532134#56532134", "title": "Left-right split in Prawn PDF", "body": "<p>This is freely taken from Prawn manual (Last Update: 2019-06-09 - Prawn Version: 2.2.2) page 43:</p>\n\n<pre><code>require \"prawn\"\n\nPrawn::Document.generate(\"prince.pdf\") do\n\n  column_box([0, cursor], columns: 2, width: bounds.width) do\n    text 'The Prince',          align: :center, size: 18\n    text 'Niccolo Machiavelli', align: :center, size: 14\n    move_down 12\n    text \"All the States and Governments by which men are or ever have been ruled,\n      have been and are either Republics or Princedoms. Princedoms are either\n      hereditary, in which the sovereignty is derived through an ancient line\n      of ancestors, or they are new. New Princedoms are either wholly new, as\n      that of Milan to Francesco Sforza; or they are like limbs joined on to\n      the hereditary possessions of the Prince who acquires them, as the\n      Kingdom of Naples to the dominions of the King of Spain. The States thus\n      acquired have either been used to live under a Prince or have been free;\n      and he who acquires them does so either by his own arms or by the arms of\n      others, and either by good fortune or by merit.\" * 10\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 453, "user_id": 1267218, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gGORg.jpg?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/1267218/luke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 56532134, "answer_count": 1, "score": 0, "last_activity_date": 1560193460, "creation_date": 1560190624, "question_id": 56531555, "link": "https://stackoverflow.com/questions/56531555/left-right-split-in-prawn-pdf", "title": "Left-right split in Prawn PDF", "body": "<p>Some PDFs have text where some of the content is on the left side, and other parts are on the right side. Is it possible to get Prawn to do this automatically, where the text automatically wraps to the right half of the page after the left half is filled up?</p>\n\n<p>An example image is provided:</p>\n\n<p><a href=\"https://i.stack.imgur.com/L3yE6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/L3yE6.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4373, "user_id": 1810460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5daef67cac318d3e35f84bc3f315bcfc?s=128&d=identicon&r=PG", "display_name": "Hamms", "link": "https://stackoverflow.com/users/1810460/hamms"}, "edited": false, "score": 0, "creation_date": 1560188432, "post_id": 56530904, "comment_id": 99645463, "body": "The recommended way to include variables is with string interpolation: <code>&quot;this is number: #{num}&quot;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 8, "last_activity_date": 1560226503, "last_edit_date": 1560226503, "creation_date": 1560188458, "answer_id": 56531075, "question_id": 56530904, "link": "https://stackoverflow.com/questions/56530904/ruby-code-error-no-implicit-conversion-of-integer-into-string/56531075#56531075", "title": "ruby code error: &#39;+&#39;no implicit conversion of Integer into String", "body": "<p>Don\u2019t put spaces between method names and opening parentheses in the first place.</p>\n\n<p>The cause of the error one cannot add numbers to strings, ruby prevents implicit coercion. One might use string interpolation:</p>\n\n<pre><code>puts \"this is number: #{num}\"\n</code></pre>\n\n<p>or convert the number to string explicitly:</p>\n\n<pre><code>puts(\"this is number: \" + num.to_s)\n</code></pre>\n\n<hr>\n\n<p><em>Sidenote:</em> semicolon at the end of the line is redundant and should be avoided.</p>\n"}], "owner": {"reputation": 11, "user_id": 10832807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4567dde140c95b6672e6fbb6d158e091?s=128&d=identicon&r=PG&f=1", "display_name": "DktPhl2018", "link": "https://stackoverflow.com/users/10832807/dktphl2018"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5188, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1560226503, "creation_date": 1560187553, "last_edit_date": 1560188339, "question_id": 56530904, "link": "https://stackoverflow.com/questions/56530904/ruby-code-error-no-implicit-conversion-of-integer-into-string", "title": "ruby code error: &#39;+&#39;no implicit conversion of Integer into String", "body": "<p>Getting runtime code error: In '+': no implicit conversion of Integer into String TypeError</p>\n\n<pre><code>num = 5;\nputs (\"this is number: \" + num);\n</code></pre>\n\n<p>Actual Result: </p>\n\n<blockquote>\n  <p>runtime code error: In '+': no implicit conversion of <code>Integer</code> into <code>String</code> <code>TypeError</code></p>\n</blockquote>\n\n<p>Expected Result - I should see printed statement -</p>\n\n<blockquote>\n  <p>this is number: 5</p>\n</blockquote>\n"}, {"tags": ["ruby", "unit-testing"], "answers": [{"tags": [], "owner": {"reputation": 157, "user_id": 725823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a03752edeee1c5d6310ab73d4361644d?s=128&d=identicon&r=PG", "display_name": "Justin Bishop", "link": "https://stackoverflow.com/users/725823/justin-bishop"}, "is_accepted": false, "score": 2, "last_activity_date": 1560187430, "creation_date": 1560187430, "answer_id": 56530879, "question_id": 56530850, "link": "https://stackoverflow.com/questions/56530850/how-to-run-the-simplest-unit-test/56530879#56530879", "title": "How to run the simplest unit test", "body": "<p>ohh the name of the method has to start with \"test_\"</p>\n"}], "owner": {"reputation": 157, "user_id": 725823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a03752edeee1c5d6310ab73d4361644d?s=128&d=identicon&r=PG", "display_name": "Justin Bishop", "link": "https://stackoverflow.com/users/725823/justin-bishop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1560187430, "creation_date": 1560187327, "question_id": 56530850, "link": "https://stackoverflow.com/questions/56530850/how-to-run-the-simplest-unit-test", "title": "How to run the simplest unit test", "body": "<p>I just want to run a unit test, but I must be missing something from the documentation.   From what I read, just running this file with \"ruby\" should execute my test, however nothing happens.  What must I be missing?!</p>\n\n<pre><code>\nclass PracticeTest &lt; Test::Unit::TestCase\n  def simple_test\n    puts \"in here\"\n    assert_equal(1, 2)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 2, "creation_date": 1560186051, "post_id": 56530436, "comment_id": 99644495, "body": "Is <code>params[:target]</code> a number or a string?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1560187823, "post_id": 56530436, "comment_id": 99645225, "body": "<code>before_action</code> is not a hook that is added to <code>Object</code> so it has no bearing in <code>Class</code> as a class instance method (honestly if this is your actual code this would raise a <code>NoMethodError</code>) please post something a bit more valid/reproducible."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1560188631, "post_id": 56530436, "comment_id": 99645540, "body": "@engineersmnky even more, <code>before_action</code> is not something that exists in <a href=\"https://stackoverflow.com/questions/tagged/ruby\">ruby</a> by any mean."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1560188936, "post_id": 56530436, "comment_id": 99645654, "body": "I wonder if this question is actually about Ruby on Rails?"}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1560191035, "post_id": 56531181, "comment_id": 99646536, "body": "This make the lack of <code>params[:target]</code> valid as well since <code>nil.to_i #=&gt; 0</code>"}, {"owner": {"reputation": 31012, "user_id": 25398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3690dee254e9aa9d98ff964a70e89f23?s=128&d=identicon&r=PG", "display_name": "Cody Caughlan", "link": "https://stackoverflow.com/users/25398/cody-caughlan"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1560203139, "post_id": 56531181, "comment_id": 99650931, "body": "Good point @engineersmnky I updated my answer for a presence check"}, {"owner": {"reputation": 35, "user_id": 10585692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08cd13e1eb53fd55f3c741b3ac125af?s=128&d=identicon&r=PG&f=1", "display_name": "1mpe7us", "link": "https://stackoverflow.com/users/10585692/1mpe7us"}, "edited": false, "score": 0, "creation_date": 1560242056, "post_id": 56531181, "comment_id": 99660962, "body": "Thank you, this worked! I didn&#39;t think to check for the parameter to be present and it was breaking everything"}, {"owner": {"reputation": 31012, "user_id": 25398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3690dee254e9aa9d98ff964a70e89f23?s=128&d=identicon&r=PG", "display_name": "Cody Caughlan", "link": "https://stackoverflow.com/users/25398/cody-caughlan"}, "reply_to_user": {"reputation": 35, "user_id": 10585692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08cd13e1eb53fd55f3c741b3ac125af?s=128&d=identicon&r=PG&f=1", "display_name": "1mpe7us", "link": "https://stackoverflow.com/users/10585692/1mpe7us"}, "edited": false, "score": 0, "creation_date": 1560280332, "post_id": 56531181, "comment_id": 99682461, "body": "Great @1mpe7us - good to hear. Please accept my answer if you are good to go."}], "tags": [], "owner": {"reputation": 31012, "user_id": 25398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3690dee254e9aa9d98ff964a70e89f23?s=128&d=identicon&r=PG", "display_name": "Cody Caughlan", "link": "https://stackoverflow.com/users/25398/cody-caughlan"}, "is_accepted": true, "score": 1, "last_activity_date": 1560203119, "last_edit_date": 1560203119, "creation_date": 1560188942, "answer_id": 56531181, "question_id": 56530436, "link": "https://stackoverflow.com/questions/56530436/how-do-i-check-that-the-value-of-a-param-is-a-number-in-a-certain-range/56531181#56531181", "title": "How do I check that the value of a param is a number in a certain range", "body": "<p><code>params[:target]</code> is a string, cast to integer prior to the comparison,</p>\n\n<pre><code>def must_have_valid_target\n  params[:target].present? &amp;&amp; params[:target].to_i.between?(0,10)\nend\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 10585692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08cd13e1eb53fd55f3c741b3ac125af?s=128&d=identicon&r=PG&f=1", "display_name": "1mpe7us", "link": "https://stackoverflow.com/users/10585692/1mpe7us"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 56531181, "answer_count": 1, "score": 0, "last_activity_date": 1560203119, "creation_date": 1560185456, "last_edit_date": 1560186000, "question_id": 56530436, "link": "https://stackoverflow.com/questions/56530436/how-do-i-check-that-the-value-of-a-param-is-a-number-in-a-certain-range", "title": "How do I check that the value of a param is a number in a certain range", "body": "<p>I am trying to write a test suite for a method that sends a POST request with a parameter 'target' that has to be between 0 and 10</p>\n\n<p>My Ruby class:</p>\n\n<pre><code>class ClassName\n  before_action :must_have_valid_target\n\n  def create\n     target = params[:target]\n     . . .\n  end \n\n  def must_have_valid_target\n    return if params.key?(:target)\n    error_response(422, 'error message')\n  end\nend \n</code></pre>\n\n<p>My Rspec</p>\n\n<pre><code>it 'cannot create request with negative target' do\n  post(:create, {target: -1})\n  assert_response(422) # actual result is: Expected 422, Actual 200\nend \n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>def must_have_valid_target\n  valid = params[:target].between?(0,10)\nend\n</code></pre>\n\n<p>but this does not work. How do I check that the symbol has a value between the range so I can give the correct response afterwards?  </p>\n\n<p>This is not homework, I am trying to add additional tests to the codebase at my workplace but I am still very new to RSpec and Ruby. </p>\n"}, {"tags": ["ruby", "ruby-on-rails-5.2"], "comments": [{"owner": {"reputation": 2639, "user_id": 3092183, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/496bb477dfd000e3a732225cf065202a?s=128&d=identicon&r=PG", "display_name": "Richard-Degenne", "link": "https://stackoverflow.com/users/3092183/richard-degenne"}, "edited": false, "score": 1, "creation_date": 1560183960, "post_id": 56530070, "comment_id": 99643572, "body": "You can&#39;t extend an object. Can your describe your actual problem instead, so that we can provide you with a proper solution?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1560184383, "post_id": 56530070, "comment_id": 99643721, "body": "This sounds like it&#39;s related to your <a href=\"https://stackoverflow.com/questions/56529925/add-methods-from-initiated-instance-variable-to-module-rails-ruby\">previous question</a>, which you posted just 11 minutes prior. Is this truly a distinct question or just a clarification/reduction of the previous question (in which case you should edit your previous question instead of posting a new one)."}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1560184419, "post_id": 56530070, "comment_id": 99643744, "body": "I rewrote it and will delete the other. I think this is more clear."}, {"owner": {"reputation": 392, "user_id": 7044855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8853c5bb96a922687efac6e58c25bf0?s=128&d=identicon&r=PG", "display_name": "prieber", "link": "https://stackoverflow.com/users/7044855/prieber"}, "edited": false, "score": 0, "creation_date": 1560184479, "post_id": 56530070, "comment_id": 99643767, "body": "<code>extend</code> is a special keyword, but I think you&#39;re looking for setting what class inheritance: <code>class MyClass &lt; MyParent</code>."}, {"owner": {"reputation": 2639, "user_id": 3092183, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/496bb477dfd000e3a732225cf065202a?s=128&d=identicon&r=PG", "display_name": "Richard-Degenne", "link": "https://stackoverflow.com/users/3092183/richard-degenne"}, "reply_to_user": {"reputation": 392, "user_id": 7044855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8853c5bb96a922687efac6e58c25bf0?s=128&d=identicon&r=PG", "display_name": "prieber", "link": "https://stackoverflow.com/users/7044855/prieber"}, "edited": false, "score": 0, "creation_date": 1560185044, "post_id": 56530070, "comment_id": 99644054, "body": "@prieber: I&#39;m know sure whether inheritance is the right call here. Apperently, OP is trying to make <i>instance methods</i> from an object available as <i>class methods</i> in another class."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1560185896, "post_id": 56530070, "comment_id": 99644426, "body": "Possible duplicate: <a href=\"https://stackoverflow.com/questions/4997990/delegating-class-methods-to-an-object-in-ruby\" title=\"delegating class methods to an object in ruby\">stackoverflow.com/questions/4997990/&hellip;</a>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1560187889, "post_id": 56530070, "comment_id": 99645264, "body": "If I understand your question correctly--and I&#39;m not confident that I do--could you read the YAML file to create a module <code>MyModule</code> containing instance methods <code>cows</code> and <code>dogs</code> (instead of adding those instance methods to <code>Myobject</code>)? Then you could simply execute <code>Myobject.include MyModule</code> and <code>Foo.extend MyModule</code>."}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1560188188, "post_id": 56530070, "comment_id": 99645373, "body": "@CarySwoveland yes, that is correct, but it creates an instance of the classs depending on the file  and scoping parameters. So I need to extend the instances methods"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1560188598, "post_id": 56530070, "comment_id": 99645531, "body": "I don&#39;t follow. Nothing I said causes an instance of either <code>Myobject</code> or <code>Foo</code> to be created."}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1560188695, "post_id": 56530070, "comment_id": 99645562, "body": "My example shows an instance. Your solution does not solve problem. But I appreciate the attempt."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1560190005, "post_id": 56530070, "comment_id": 99646110, "body": "By <code>extend Bob</code> do you mean you want all the methods of <code>Bob</code>, which are the instance methods of <code>Bob.class #=&gt; Myobject</code>, to become class methods of <code>Foo</code> (in which case the same result obtains with any instance of <code>Myobject</code>)?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 392, "user_id": 7044855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8853c5bb96a922687efac6e58c25bf0?s=128&d=identicon&r=PG", "display_name": "prieber", "link": "https://stackoverflow.com/users/7044855/prieber"}, "edited": false, "score": 0, "creation_date": 1560191006, "post_id": 56530070, "comment_id": 99646524, "body": "@prieber: &quot;<code>extend</code> is a special keyword&quot;. No, it isn&#39;t. In fact, it is neither a keyword, nor is it in any way special. It is just a method like any other method. In fact, you can trivially implement it yourself: <code>class Object; def extend(*modules) modules.each do |mod| mod.extend_object(self) end end end</code>."}, {"owner": {"reputation": 392, "user_id": 7044855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8853c5bb96a922687efac6e58c25bf0?s=128&d=identicon&r=PG", "display_name": "prieber", "link": "https://stackoverflow.com/users/7044855/prieber"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1560191191, "post_id": 56530070, "comment_id": 99646600, "body": "@J&#246;rgWMittag You&#39;re very smart, I understand."}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1560192879, "post_id": 56530070, "comment_id": 99647300, "body": "@CarySwoveland, yes, the instance methods of Bob need to become class methods, of Foo. However, to make clear, an initated instance method of class. Each instance is different."}], "answers": [{"comments": [{"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1560184740, "post_id": 56530258, "comment_id": 99643897, "body": "The problem is that I can&#39;t delegate every method I need within my_object, it&#39;s too large, and dynamic, based on how my_object is initialized. Take a look at <a href=\"https://stackoverflow.com/questions/56529925/add-methods-from-initiated-instance-variable-to-module-rails-ruby\" title=\"add methods from initiated instance variable to module rails ruby\">stackoverflow.com/questions/56529925/&hellip;</a>, I will be deleting soon, but it will give another example."}, {"owner": {"reputation": 2639, "user_id": 3092183, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/496bb477dfd000e3a732225cf065202a?s=128&d=identicon&r=PG", "display_name": "Richard-Degenne", "link": "https://stackoverflow.com/users/3092183/richard-degenne"}, "reply_to_user": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1560184882, "post_id": 56530258, "comment_id": 99643975, "body": "I&#39;ll reiterate the comment I made on your question. Without your actual context, it&#39;s hard to give a relevant answer. If you update your question with additional information, I&#39;ll update my answer accordingly. :)"}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 1, "creation_date": 1560185060, "post_id": 56530258, "comment_id": 99644061, "body": "See additional context, above"}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1560185490, "post_id": 56530258, "comment_id": 99644239, "body": "You&#39;re method might work, If I dynamically loop through the methods of my_object. I will try it."}, {"owner": {"reputation": 2639, "user_id": 3092183, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/496bb477dfd000e3a732225cf065202a?s=128&d=identicon&r=PG", "display_name": "Richard-Degenne", "link": "https://stackoverflow.com/users/3092183/richard-degenne"}, "reply_to_user": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1560185975, "post_id": 56530258, "comment_id": 99644465, "body": "I would advise against doing this. Unnecessary meta-programmation will make your code brittle, hard to read, hard to test, and hard to maintain."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1560187253, "post_id": 56530258, "comment_id": 99644995, "body": "<i>&quot;You can&#39;t extend a object&quot;</i> Not sure what this is supposed to mean. I have to assume you are stating that you cannot extend an object with an instance of a <code>Class</code>. You can only extend an object with a <code>Module</code>"}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1560198003, "post_id": 56530258, "comment_id": 99649323, "body": "@Richard-Degenne, your answer was great, I got what I needed working."}, {"owner": {"reputation": 2639, "user_id": 3092183, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/496bb477dfd000e3a732225cf065202a?s=128&d=identicon&r=PG", "display_name": "Richard-Degenne", "link": "https://stackoverflow.com/users/3092183/richard-degenne"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1560238431, "post_id": 56530258, "comment_id": 99659288, "body": "@engineersmnky: Maybe I should rephrase that. The idea is that you can&#39;t write <code>extend x</code> where <code>x</code> is an object. I&#39;ve always used &quot;extend&quot; as a transitive verb with a direct object, as in <i>&quot;This class extends this module&quot;</i>."}], "tags": [], "owner": {"reputation": 2639, "user_id": 3092183, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/496bb477dfd000e3a732225cf065202a?s=128&d=identicon&r=PG", "display_name": "Richard-Degenne", "link": "https://stackoverflow.com/users/3092183/richard-degenne"}, "is_accepted": true, "score": 2, "last_activity_date": 1560186444, "last_edit_date": 1560186444, "creation_date": 1560184552, "answer_id": 56530258, "question_id": 56530070, "link": "https://stackoverflow.com/questions/56530070/extend-an-initiated-instance-to-a-class-ruby/56530258#56530258", "title": "extend an initiated instance to a Class ruby", "body": "<p>You can't extend a object*. Without your actual use-case, it's hard to provide a definitive answer, so here are a few alternatives.</p>\n\n<p>* Unless that object is a module, but let's not get technical here.</p>\n\n<h1>Using <code>Forwardable</code></h1>\n\n<p>The <a href=\"https://ruby-doc.org/stdlib-2.6.2/libdoc/forwardable/rdoc/Forwardable.html\" rel=\"nofollow noreferrer\"><code>Forwardable</code></a> module can help you define delegators. However, it won't play very nicely with dynamic objects.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Foo\n  class &lt;&lt; self\n    extend Forwardable\n\n    def_delegators :my_object, :cows, :dogs\n\n    def my_object\n      @my_object ||= MyObject.new(5, 10)\n    end\n  end\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Foo.cows # =&gt; 5\nFoo.dog  # =&gt; 10\n</code></pre>\n\n<h1>Using a \"dynamic\" delegator</h1>\n\n<p>If your <code>MyObject</code> class has dynamic methods, you can make a dynamic delegator that will call any public method of your <code>MyObject</code> instance.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Foo\n  class &lt;&lt; self\n    def setting(method)\n      my_object.public_send(method)\n    end\n\n    private\n\n    def my_object\n      @my_object ||= MyObject.new(5, 10)\n    end\n  end\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Foo.setting('cows') # =&gt; 5\nFoo.setting('dogs') # =&gt; 10\n</code></pre>\n\n<h1>Avoiding meta-programmation altogether</h1>\n\n<p>I would argue that this is a bad usage of meta-programmation to begin with. If you want to navigate a YAML/JSON structure, you should do it without meta-programmtion.</p>\n\n<p>For instance, given a YAML like this:</p>\n\n<pre><code>---\ncows: 5\ndogs: 10\n</code></pre>\n\n<p>You could write the following.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Foo\n  class &lt;&lt; self\n    def setting(key)\n      settings[key]\n    end\n\n    private\n\n    def settings\n      @settings ||= YAML.load_file('settings.yaml')\n    end\n  end\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Foo.setting('cows') # =&gt; 5\nFoo.setting('dogs') # =&gt; 10\n</code></pre>\n"}], "owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 56530258, "answer_count": 1, "score": 1, "last_activity_date": 1560186444, "creation_date": 1560183790, "last_edit_date": 1560185019, "question_id": 56530070, "link": "https://stackoverflow.com/questions/56530070/extend-an-initiated-instance-to-a-class-ruby", "title": "extend an initiated instance to a Class ruby", "body": "<pre><code>class Myobject\n  def initialize(numberofcows,numberofdogs)\n    @numberofcows = numberofcows\n    @numberofdogs = numberofdogs\n  end\n  def cows\n    @numberofcows\n  end\n  def dogs\n     @numberofdogs\n  end\nend\n</code></pre>\n\n<h3>Define constant:</h3>\n\n<pre><code>Boo = Myobject.new(5,10)\n</code></pre>\n\n<h3>Extend class:</h3>\n\n<pre><code>class Foo\n   extend Boo\nend\n</code></pre>\n\n<p>How do I extend all the methods from an initiated object into another class?</p>\n\n<pre><code>Foo.cows =&gt; 5\nFoo.dog  =&gt; 10\n</code></pre>\n\n<p>Myobject is a class that reads from a YAML file and creates methods from it.  They are application settings.  I need to add those dynamically assigned methods to another class.</p>\n"}, {"tags": ["ruby", "homebrew"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1560186369, "post_id": 56529779, "comment_id": 99644639, "body": "&quot;It seems it&#39;s expecting that I have a class name with name of my filename.&quot; Yes, that&#39;s what it seems. Did changing the class name and/or filename to match fix the problem?"}, {"owner": {"reputation": 1174, "user_id": 2985707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d732a9619c76eaba9f6a4c10d4c3b0?s=128&d=identicon&r=PG", "display_name": "Erico", "link": "https://stackoverflow.com/users/2985707/erico"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1560190843, "post_id": 56529779, "comment_id": 99646466, "body": "It didn&#39;t fix the problem, it caused a different error. When I name the class after the filename it seems homebrew calls as module or something with the wrong parameters."}], "answers": [{"tags": [], "owner": {"reputation": 1329, "user_id": 111960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d5c92476e067787fc7e06f5970dda22?s=128&d=identicon&r=PG", "display_name": "jonchang", "link": "https://stackoverflow.com/users/111960/jonchang"}, "is_accepted": true, "score": 2, "last_activity_date": 1561051989, "creation_date": 1561051989, "answer_id": 56691211, "question_id": 56529779, "link": "https://stackoverflow.com/questions/56529779/homebrew-custom-download-strategy-not-working/56691211#56691211", "title": "Homebrew - Custom download strategy not working", "body": "<p>You you need to move your <code>custom_download_strategy.rb</code> into a subfolder of your tap repository, e.g, in <code>homebrew-test/lib/custom_download_strategy.rb</code> and change the <code>require_relative</code> invocation accordingly.</p>\n\n<p>By default, all <code>.rb</code> files in the root of the repository and the <code>Formula</code> and <code>HomebrewFormula</code> subfolders are assumed to be valid Homebrew formulae. <a href=\"https://docs.brew.sh/How-to-Create-and-Maintain-a-Tap#creating-a-tap\" rel=\"nofollow noreferrer\">See the documentation</a> for details.</p>\n"}, {"comments": [{"owner": {"reputation": 1054, "user_id": 7307976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M02WZ.png?s=128&g=1", "display_name": "Daniel Bayley", "link": "https://stackoverflow.com/users/7307976/daniel-bayley"}, "edited": false, "score": 0, "creation_date": 1605206094, "post_id": 63682359, "comment_id": 114586849, "body": "<code>require_relative</code> does work. But if you want to be more explicit and use <code>require</code>, without hard-coding paths, then you can do <code>require &quot;#{@cask.tap.path}&#47;lib&#47;custom_download_strategy&quot;</code> within the Cask."}, {"owner": {"reputation": 101, "user_id": 7488424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee15b9bdd5ace2b0c1c0e4837e23b1b?s=128&d=identicon&r=PG", "display_name": "\u6c99\u6f20\u4e4b\u5b50", "link": "https://stackoverflow.com/users/7488424/%e6%b2%99%e6%bc%a0%e4%b9%8b%e5%ad%90"}, "reply_to_user": {"reputation": 1054, "user_id": 7307976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M02WZ.png?s=128&g=1", "display_name": "Daniel Bayley", "link": "https://stackoverflow.com/users/7307976/daniel-bayley"}, "edited": false, "score": 0, "creation_date": 1606832185, "post_id": 63682359, "comment_id": 115077014, "body": "@DanielBayley Put <code>require &quot;#{@cask.tap.path}&#47;lib&#47;custom_download_strategy&quot; </code>after <code>cask xxx do</code>, <code>brew install</code> is ok but <code>brew uninstall</code> error <code>Error: Cask &#39;xxxxx&#39; is unreadable: undefined method &#39;path&#39; for nil:NilClass</code>"}, {"owner": {"reputation": 1054, "user_id": 7307976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M02WZ.png?s=128&g=1", "display_name": "Daniel Bayley", "link": "https://stackoverflow.com/users/7307976/daniel-bayley"}, "edited": false, "score": 0, "creation_date": 1606859592, "post_id": 63682359, "comment_id": 115089704, "body": "Ah yeah, I have since ran into this\u2026 It&#39;s because a snapshot of the Cask get saved into <code>&#47;usr&#47;local&#47;Caskroom&#47;&lt;cask&gt;&#47;.metadata&#47;&lt;version&gt;&#47;*&#47;Casks&#47;&lt;cask&zwnj;&#8203;&gt;.rb</code>, which is the file that gets read for the <code>uninstall</code>, and for some reason doesn&#39;t have access to <code>@cask.tap.path</code>. Another option is to do <code>require &quot;#{Tap.fetch(&quot;&lt;user&gt;&#47;&lt;tap&gt;&quot;).path}&#47;lib&#47;custom_download_strat&zwnj;&#8203;egy&quot;</code>."}, {"owner": {"reputation": 101, "user_id": 7488424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee15b9bdd5ace2b0c1c0e4837e23b1b?s=128&d=identicon&r=PG", "display_name": "\u6c99\u6f20\u4e4b\u5b50", "link": "https://stackoverflow.com/users/7488424/%e6%b2%99%e6%bc%a0%e4%b9%8b%e5%ad%90"}, "reply_to_user": {"reputation": 1054, "user_id": 7307976, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M02WZ.png?s=128&g=1", "display_name": "Daniel Bayley", "link": "https://stackoverflow.com/users/7307976/daniel-bayley"}, "edited": false, "score": 0, "creation_date": 1606876243, "post_id": 63682359, "comment_id": 115093723, "body": "My current approach is to introduce environment variables as references to avoid the problem of having to batch modify &lt;user&gt; and &lt;tap&gt; after they are renamed.  Use <code>require ENV[&quot;HOMEBREW_CUSTOM_DOWNLOAD_STRATEGY&quot;]</code> in <code>*.rd</code>, and then run <code>echo &quot;export HOMEBREW_CUSTOM_DOWNLOAD_STRATEGY=$(brew --repository)&#47;Library&#47;Taps&#47;&lt;User&gt;&#47;&lt;Tap&gt;&#47;lib&#47;custom_download_&zwnj;&#8203;strategy.rb&quot; &gt;&gt;~&#47;. zshrc</code> in the terminal.  Set global environment variables."}], "tags": [], "owner": {"reputation": 101, "user_id": 7488424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee15b9bdd5ace2b0c1c0e4837e23b1b?s=128&d=identicon&r=PG", "display_name": "\u6c99\u6f20\u4e4b\u5b50", "link": "https://stackoverflow.com/users/7488424/%e6%b2%99%e6%bc%a0%e4%b9%8b%e5%ad%90"}, "is_accepted": false, "score": 0, "last_activity_date": 1598941020, "creation_date": 1598941020, "answer_id": 63682359, "question_id": 56529779, "link": "https://stackoverflow.com/questions/56529779/homebrew-custom-download-strategy-not-working/63682359#63682359", "title": "Homebrew - Custom download strategy not working", "body": "<p>In addition, it is not recommended to use relative positions in Formula and Cask, such as <code>require_relative&quot; ../custom_download_strategy&quot;</code></p>\n<p>When <code>uninstall</code>,<code>reinstall</code>, etc., the problem of &quot;custom_download_strategy&quot; cannot be found.<br />\nFor example : <a href=\"https://github.com/Homebrew/homebrew-cask/issues/65655\" rel=\"nofollow noreferrer\">https://github.com/Homebrew/homebrew-cask/issues/65655</a></p>\n<p>Therefore, it is recommended to use a similar absolute path:</p>\n<pre><code>require_relative HOMEBREW_LIBRARY/&quot;Tap/&lt;User&gt;/&lt;Repository&gt;/lib/custom_download_strategy.rb&quot;\n</code></pre>\n"}], "owner": {"reputation": 1174, "user_id": 2985707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86d732a9619c76eaba9f6a4c10d4c3b0?s=128&d=identicon&r=PG", "display_name": "Erico", "link": "https://stackoverflow.com/users/2985707/erico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 806, "favorite_count": 1, "accepted_answer_id": 56691211, "answer_count": 2, "score": 1, "last_activity_date": 1598941020, "creation_date": 1560182464, "question_id": 56529779, "link": "https://stackoverflow.com/questions/56529779/homebrew-custom-download-strategy-not-working", "title": "Homebrew - Custom download strategy not working", "body": "<p>I'm trying to create a custom download strategy in homebrew but tap doesn't work.</p>\n\n<p>The error below is shown after I tried to execute brew tap ericofusco/test</p>\n\n<p>I followed instructions from: <a href=\"http://lessthanhero.io/post/homebrew-with-private-repo-releases/\" rel=\"nofollow noreferrer\">http://lessthanhero.io/post/homebrew-with-private-repo-releases/</a>.</p>\n\n<p>It seems it's expecting that I have a class name with name of my filename.</p>\n\n<pre><code>Error: Invalid formula: /usr/local/Homebrew/Library/Taps/ericofusco/homebrew-test/custom_download_strategy.rb\nNo available formula with the name \"custom_download_strategy\"\nIn formula file: /usr/local/Homebrew/Library/Taps/ericofusco/homebrew-test/custom_download_strategy.rb\nExpected to find class CustomDownloadStrategy, but only found: CustomGitHubPrivateRepositoryDownloadStrategy, CustomGitHubPrivateRepositoryReleaseDownloadStrategy (not derived from Formula!).\nError: Cannot tap ericofusco/test: invalid syntax in tap!\n</code></pre>\n\n<p>formula.rb</p>\n\n<pre><code>require_relative \"../custom_download_strategy\"\n\nclass Test &lt; Formula\n  desc \"\"\n  homepage \"https://github.com/ericofusco/test\"\n  url \"https://github.com/ericofusco/test/releases/download/v1.0.0/test_1.0.0_darwin_amd64.tar.gz\", :using =&gt; CustomGitHubPrivateRepositoryReleaseDownloadStrategy\n  version \"1.0.0\"\n  sha256 \"2436b4c63020b343f0b667c2f6797681c71d2598fa600691b7fd9593fd9ca7ee\"\n\n  def install\n    bin.install \"test\"\n  end\nend\n</code></pre>\n\n<p>custom_download_strategy.rb</p>\n\n<pre><code>require \"download_strategy\"\n\n# GitHubPrivateRepositoryDownloadStrategy downloads contents from GitHub\n# Private Repository. To use it, add\n# `:using =&gt; :github_private_repo` to the URL section of\n# your formula. This download strategy uses GitHub access tokens (in the\n# environment variables `HOMEBREW_GITHUB_API_TOKEN`) to sign the request.  This\n# strategy is suitable for corporate use just like S3DownloadStrategy, because\n# it lets you use a private GitHub repository for internal distribution.  It\n# works with public one, but in that case simply use CurlDownloadStrategy.\nclass CustomGitHubPrivateRepositoryDownloadStrategy &lt; CurlDownloadStrategy\n  require \"utils/formatter\"\n  require \"utils/github\"\n\n  def initialize(url, name, version, **meta)\n    super\n    parse_url_pattern\n    set_github_token\n  end\n\n  def parse_url_pattern\n    unless match = url.match(%r{https://github.com/([^/]+)/([^/]+)/(\\S+)})\n      raise CurlDownloadStrategyError, \"Invalid url pattern for GitHub Repository.\"\n    end\n\n    _, @owner, @repo, @filepath = *match\n  end\n\n  def download_url\n    \"https://github.com/#{@owner}/#{@repo}/#{@filepath}\"\n  end\n\n  private\n\n  def _fetch(url:, resolved_url:)\n    curl_download download_url, \"--header\", \"Authorization: token #{@github_token}\", to: temporary_path\n  end\n\n  def set_github_token\n    @github_token = ENV[\"HOMEBREW_GITHUB_API_TOKEN\"]\n    unless @github_token\n      raise CurlDownloadStrategyError, \"Environmental variable HOMEBREW_GITHUB_API_TOKEN is required.\"\n    end\n\n    validate_github_repository_access!\n  end\n\n  def validate_github_repository_access!\n    # Test access to the repository\n    GitHub.repository(@owner, @repo)\n  rescue GitHub::HTTPNotFoundError\n    # We only handle HTTPNotFoundError here,\n    # becase AuthenticationFailedError is handled within util/github.\n    message = &lt;&lt;~EOS\n      HOMEBREW_GITHUB_API_TOKEN can not access the repository: #{@owner}/#{@repo}\n      This token may not have permission to access the repository or the url of formula may be incorrect.\n    EOS\n    raise CurlDownloadStrategyError, message\n  end\nend\n\n# GitHubPrivateRepositoryReleaseDownloadStrategy downloads tarballs from GitHub\n# Release assets. To use it, add `:using =&gt; :github_private_release` to the URL section\n# of your formula. This download strategy uses GitHub access tokens (in the\n# environment variables HOMEBREW_GITHUB_API_TOKEN) to sign the request.\nclass CustomGitHubPrivateRepositoryReleaseDownloadStrategy &lt; CustomGitHubPrivateRepositoryDownloadStrategy\n  require 'net/http'\n\n  def initialize(url, name, version, **meta)\n    super\n  end\n\n  def parse_url_pattern\n    url_pattern = %r{https://github.com/([^/]+)/([^/]+)/releases/download/([^/]+)/(\\S+)}\n    unless @url =~ url_pattern\n      raise CurlDownloadStrategyError, \"Invalid url pattern for GitHub Release.\"\n    end\n\n    _, @owner, @repo, @tag, @filename = *@url.match(url_pattern)\n  end\n\n  def download_url\n    #\"https://#{@github_token}@api.github.com/repos/#{@owner}/#{@repo}/releases/assets/#{asset_id}\"\n    #blah = curl_output \"--header\", \"Accept: application/octet-stream\", \"--header\", \"Authorization: token #{@github_token}\", \"-I\"\n    uri = URI(\"https://api.github.com/repos/#{@owner}/#{@repo}/releases/assets/#{asset_id}\")\n    req = Net::HTTP::Get.new(uri)\n    req['Accept'] = 'application/octet-stream'\n    req['Authorization'] = \"token #{@github_token}\"\n\n    res = Net::HTTP.start(uri.hostname, uri.port, :use_ssl =&gt; uri.scheme == 'https') do |http|\n      http.request(req)\n    end\n\n    res['location']\n  end\n\n  private\n\n  def _fetch(url:, resolved_url:)\n    # HTTP request header `Accept: application/octet-stream` is required.\n    # Without this, the GitHub API will respond with metadata, not binary.\n    curl_download download_url, \"--header\", \"Accept: application/octet-stream\", to: temporary_path\n  end\n\n  def asset_id\n    @asset_id ||= resolve_asset_id\n  end\n\n  def resolve_asset_id\n    release_metadata = fetch_release_metadata\n    assets = release_metadata[\"assets\"].select { |a| a[\"name\"] == @filename }\n    raise CurlDownloadStrategyError, \"Asset file not found.\" if assets.empty?\n\n    assets.first[\"id\"]\n  end\n\n  def fetch_release_metadata\n    release_url = \"https://api.github.com/repos/#{@owner}/#{@repo}/releases/tags/#{@tag}\"\n    GitHub.open_api(release_url)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "date", "timezone", "timezone-offset"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 4, "creation_date": 1560181245, "post_id": 56529392, "comment_id": 99642287, "body": "Timezones change historically. Not uncommon during war periods for instance. <a href=\"https://en.wikipedia.org/wiki/Time_in_India#Recorded_history\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Time_in_India#Recorded_history</a>"}, {"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1560181305, "post_id": 56529392, "comment_id": 99642319, "body": "I actually didn&#39;t know that. BTW, are the values hard coded into Ruby?"}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 4, "creation_date": 1560181446, "post_id": 56529392, "comment_id": 99642392, "body": "<a href=\"https://en.wikipedia.org/wiki/Tz_database\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Tz_database</a>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1560183057, "post_id": 56529392, "comment_id": 99643169, "body": "@Mat, that makes for very interesting reading. One <a href=\"https://en.wikipedia.org/wiki/Tz_database#cite_note-34\" rel=\"nofollow noreferrer\">footnote</a> (at the Tz_database link) caught my eye, concerning a threatened copyright lawsuit."}, {"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 0, "creation_date": 1560188796, "post_id": 56529392, "comment_id": 99645590, "body": "Anyways, it&#39;s not Ruby, the date command in my system prints the same output!! <code>date -d 1943&#47;11&#47;24 +%z</code> prints +0630..."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1599808235, "post_id": 56529392, "comment_id": 112894010, "body": "<a href=\"https://stackoverflow.com/q/6841333/995714\">Why is subtracting these two times (in 1927) giving a strange result?</a>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1599808343, "post_id": 56529392, "comment_id": 112894056, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/6841333/why-is-subtracting-these-two-times-in-1927-giving-a-strange-result\">Why is subtracting these two times (in 1927) giving a strange result?</a>"}, {"owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "edited": false, "score": 0, "creation_date": 1599847409, "post_id": 56529392, "comment_id": 112912117, "body": "I have no idea about Java. Java is not Ruby."}], "answers": [{"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 1, "last_activity_date": 1560191128, "creation_date": 1560191128, "answer_id": 56531681, "question_id": 56529392, "link": "https://stackoverflow.com/questions/56529392/why-ruby-is-returning-different-timezones-for-different-years/56531681#56531681", "title": "Why Ruby is returning different timezones for different years?", "body": "<blockquote>\n  <p>Why does the zone differ in the same system?</p>\n</blockquote>\n\n<p>Because time zones change over time.</p>\n"}], "owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 56531681, "answer_count": 1, "score": 0, "last_activity_date": 1599808313, "creation_date": 1560180814, "last_edit_date": 1599808313, "question_id": 56529392, "link": "https://stackoverflow.com/questions/56529392/why-ruby-is-returning-different-timezones-for-different-years", "title": "Why Ruby is returning different timezones for different years?", "body": "<p>My timezone is IST, +0530.\nIt shows the correct zone if I pass arguments with recent years:</p>\n\n<pre><code>Time.new('2000', '02', '29')    # =&gt; 2000-02-29 00:00:00 +0530\n</code></pre>\n\n<p>But the zone changes for years like these:</p>\n\n<pre><code>Time.new('1000', '01', '29')    # =&gt; 1000-01-29 00:00:00 +0553\nTime.new('1943')                # =&gt; 1943-01-01 00:00:00 +0630\nTime.new('1871')                # =&gt; 1871-01-01 00:00:00 +0521\n</code></pre>\n\n<p>To find out the previous dates, I created a loop:</p>\n\n<pre><code>puts 2_200.times.map { |i| Time.new(i.to_s) }\n</code></pre>\n\n<p>As I can see for the years in the future, the zone is +0530, but for past centuries, the zone is sometime differs!</p>\n\n<p>Why does the zone differ in the same system?</p>\n"}, {"tags": ["ruby", "csv"], "answers": [{"comments": [{"owner": {"reputation": 2639, "user_id": 3092183, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/496bb477dfd000e3a732225cf065202a?s=128&d=identicon&r=PG", "display_name": "Richard-Degenne", "link": "https://stackoverflow.com/users/3092183/richard-degenne"}, "edited": false, "score": 0, "creation_date": 1560182453, "post_id": 56529343, "comment_id": 99642892, "body": "Can you elaborate on your answer a little bit?"}], "tags": [], "owner": {"reputation": 1813, "user_id": 1047730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c2435beed6cd3c5be09b77e213e4184?s=128&d=identicon&r=PG", "display_name": "codenamev", "link": "https://stackoverflow.com/users/1047730/codenamev"}, "is_accepted": false, "score": 0, "last_activity_date": 1560180675, "creation_date": 1560180675, "answer_id": 56529343, "question_id": 56528628, "link": "https://stackoverflow.com/questions/56528628/read-a-cvs-json-file-and-navigate-through-it-by-inputting-a-value-from-a-column/56529343#56529343", "title": "Read a CVS/JSON file and navigate through it by inputting a value from a column", "body": "<pre><code>matching_rows = []\ninput = STDIN.gets.chomp\nCSV.foreach('file.csv') do |row|\n  matching_rows &lt;&lt; row if row[1].to_s.include?(input)\nend\n\npp matching_rows\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 11626152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/057eae934b3317d2af80f87ec0458acc?s=128&d=identicon&r=PG&f=1", "display_name": "SauvignonC", "link": "https://stackoverflow.com/users/11626152/sauvignonc"}, "edited": false, "score": 0, "creation_date": 1560184176, "post_id": 56529574, "comment_id": 99643646, "body": "Thanks for keeping it simple, it\u2019s very clear now! P.S: the spaces before the values are not in the file, I just messed up while writing the example."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 1, "last_activity_date": 1560185806, "last_edit_date": 1560185806, "creation_date": 1560181622, "answer_id": 56529574, "question_id": 56528628, "link": "https://stackoverflow.com/questions/56528628/read-a-cvs-json-file-and-navigate-through-it-by-inputting-a-value-from-a-column/56529574#56529574", "title": "Read a CVS/JSON file and navigate through it by inputting a value from a column", "body": "<p>If you don't supply a block (<code>do |row| ... end</code>), <code>CSV.foreach</code> will return an Enumerator. That's useful because you can all any Enumerable method on it like <code>select</code>, <code>sort</code>, or... <code>find</code>:</p>\n\n<pre><code>#                                                    \u2193\u2193\u2193\u2193\nmatching_row = CSV.foreach(file_path, headers: true).find do |row|\n  row[\"Column B\"].include?(\"Pie\")\nend\n# =&gt; #&lt;CSV::Row \"Column A\":\"Pizza\" \"Column B\":\"Pie\"&gt;\n\np matching_row[\"Column A\"] # =&gt; Pizza\n</code></pre>\n\n<p>This would be easy to turn into a method that takes (for example), column name and value arguments:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def find_row_in_csv(file_path, column_name, search_value)\n  CSV.foreach(file_path, headers: true).find do |row|\n    row[column_name].include?(search_value)\n  end\nend\n\nmatching_row = find_row_in_csv(\"data.csv\", \"Column B\", \"Pie\")\n# =&gt; #&lt;CSV::Row \"Column A\":\"Pizza\" \"Column B\":\"Pie\"&gt;\n</code></pre>\n\n<p>You can see this in action on repl.it: <a href=\"https://repl.it/@jrunning/ImmaculateGummyVoxels\" rel=\"nofollow noreferrer\">https://repl.it/@jrunning/ImmaculateGummyVoxels</a></p>\n"}], "owner": {"reputation": 11, "user_id": 11626152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/057eae934b3317d2af80f87ec0458acc?s=128&d=identicon&r=PG&f=1", "display_name": "SauvignonC", "link": "https://stackoverflow.com/users/11626152/sauvignonc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1560185806, "creation_date": 1560177984, "last_edit_date": 1560184274, "question_id": 56528628, "link": "https://stackoverflow.com/questions/56528628/read-a-cvs-json-file-and-navigate-through-it-by-inputting-a-value-from-a-column", "title": "Read a CVS/JSON file and navigate through it by inputting a value from a column", "body": "<p>I want to be able to print out just one row of the file by inputting a value of a specific column. I'm very new with Ruby, I'm just starting with the basics, and the guides I've found about the CSV class are not clear enough for me. Basically, I'm able to print out the whole CSV, but not just one row of it.</p>\n\n<p>For example:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Column A,Column B\nPizza,Pie\nPapa,John\n</code></pre>\n\n<p>Say I have this CSV, I want to create a code that'll search the user input (gets.chomp?) through one specific column (B, for instance). So, if I write \"Pie\", it should print Pizza, Pie. Or better yet, let me access the items in that specific array (that of the row) and store them as variables that I can print out in whatever order I want.</p>\n\n<p>IN my lack of expertise, I've only been able to print the entire array (all rows, all columns), but surely one of you must know how to do what I'm trying, or at least make it clearer than the info I can find online.</p>\n\n<p>This is the very basic code I managed to find online, but I'm not able to move past it yet.</p>\n\n<pre><code>CSV.foreach('file.csv') do |row|\n  puts row.inspect\nend\n</code></pre>\n"}, {"tags": ["html", "mysql", "ruby-on-rails", "ruby", "ruby-on-rails-3"], "answers": [{"tags": [], "owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "is_accepted": true, "score": 0, "last_activity_date": 1561260149, "creation_date": 1561260149, "answer_id": 56720757, "question_id": 56526472, "link": "https://stackoverflow.com/questions/56526472/how-to-prevent-the-carriage-return-character-that-appends-in-a-html-form-textare/56720757#56720757", "title": "How to prevent the carriage return character that appends in a html form textarea?", "body": "<p>it looks that this might be a really simple thing to fix with <a href=\"https://apidock.com/ruby/String/gsub\" rel=\"nofollow noreferrer\"><code>gsub</code></a> </p>\n\n<p><code>text = text.gsub(\"\\r\", '')</code></p>\n\n<p>Something that you should know is when you are doing \\n or \\r you want to use double quotes (\") and not single quotes (')</p>\n"}], "owner": {"reputation": 13, "user_id": 5580832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3daf543c9f645195096ea7d863f005aa?s=128&d=identicon&r=PG&f=1", "display_name": "Anumit Kaur", "link": "https://stackoverflow.com/users/5580832/anumit-kaur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 56720757, "answer_count": 1, "score": 0, "last_activity_date": 1561260284, "creation_date": 1560169795, "last_edit_date": 1561260284, "question_id": 56526472, "link": "https://stackoverflow.com/questions/56526472/how-to-prevent-the-carriage-return-character-that-appends-in-a-html-form-textare", "title": "How to prevent the carriage return character that appends in a html form textarea?", "body": "<p>I just encountered a bug in my rails3 application while setting up WhatsApp messaging service via a third party API. </p>\n\n<p>I have my message template set at the 3rd party portal. Now when my client is hitting the API with the message content, I encounter the response: \"error | 318 | Message does not match WhatsApp HSM template.\"</p>\n\n<p>After thorough debugging, I realized the message content (which is an input from admin on my application) appends a \"\\r\" character before every \"\\n\" character when the content is submitted via HTML form. </p>\n\n<p>However, the content at the 3rd party has only \"\\n\" character leading to the mismatch.</p>\n\n<p>I need help with how I can avoid \"\\r\" append.</p>\n\n<p>I read the cause could be a copy-paste from different encoding sources, like MS Word. I tried to test this theory with (Ubuntu) LibreOffice Writer and Text Editor, and it was of no use.</p>\n\n<p>However if I update the content with rails console, I get the desired result (no \"\\r\" append)</p>\n\n<p>This is how my data looks in 2 scenarios: </p>\n\n<p>Through input in an html form: (<strong>actual</strong>)\nSome text \\r\\n\\r\\nFor more details, check out this.</p>\n\n<p>Through rails console: (<strong>desired</strong>)\nSome text \\n\\nFor more details, check out this.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 10613370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nK3bNaBO0Mc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBlIb4wRkfFrw5942VeyJJwF8KMLA/mo/photo.jpg?sz=128", "display_name": "ganeshh123", "link": "https://stackoverflow.com/users/10613370/ganeshh123"}, "edited": false, "score": 0, "creation_date": 1560169986, "post_id": 56526349, "comment_id": 99636582, "body": "Hi, thanks for your reply. The error occurs with the comment.user.avatar.attached? line much further down. You can see the pictures more clearly by right click, and then open image in a new tab/view image ..."}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1560169373, "creation_date": 1560169373, "answer_id": 56526349, "question_id": 56525932, "link": "https://stackoverflow.com/questions/56525932/cant-access-user-in-comment-object/56526349#56526349", "title": "Can&#39;t access user in comment object", "body": "<p>It looks like your post doesn't have a user associated with it. It's hard to see as your error message is so far zoomed out, but line 3 of your code:</p>\n\n<pre><code>&lt;% if @post.user.avatar.attached? %&gt;\n</code></pre>\n\n<p>Is where the error is occuring. It's not occuring because the user does not have an avatar, but because you're trying to find the avatar of nilclass.</p>\n\n<p>Your two options are to fix the @post in question so it's associated with a user (you can dot his from console), or to change the line to:</p>\n\n<pre><code>&lt;% if @post.user&amp;.avatar.attached? %&gt;\n</code></pre>\n\n<p>This will stop execution if the post's user is nil, and simply return false rather than blowing up. If however your post is supposed to have a user attached, then I'd suggest fixing this rather than changing your logic to account for posts without users.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 10613370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nK3bNaBO0Mc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBlIb4wRkfFrw5942VeyJJwF8KMLA/mo/photo.jpg?sz=128", "display_name": "ganeshh123", "link": "https://stackoverflow.com/users/10613370/ganeshh123"}, "edited": false, "score": 0, "creation_date": 1560176403, "post_id": 56527396, "comment_id": 99639780, "body": "Thanks for your reply! I am not sure what you mean by class variable @post. Could you explain this further?"}, {"owner": {"reputation": 318, "user_id": 3664194, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001800281383/picture?type=large", "display_name": "Michael Kosyk", "link": "https://stackoverflow.com/users/3664194/michael-kosyk"}, "reply_to_user": {"reputation": 15, "user_id": 10613370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nK3bNaBO0Mc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBlIb4wRkfFrw5942VeyJJwF8KMLA/mo/photo.jpg?sz=128", "display_name": "ganeshh123", "link": "https://stackoverflow.com/users/10613370/ganeshh123"}, "edited": false, "score": 0, "creation_date": 1560176618, "post_id": 56527396, "comment_id": 99639894, "body": "@Ganesh - I made a mistake with that one! I meant &quot;instance&quot; variable. An attribute of an object. As you can see, you are asking in that view about something that does not exist in your Controller. There is no declaration of <code>@post</code>."}, {"owner": {"reputation": 15, "user_id": 10613370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nK3bNaBO0Mc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBlIb4wRkfFrw5942VeyJJwF8KMLA/mo/photo.jpg?sz=128", "display_name": "ganeshh123", "link": "https://stackoverflow.com/users/10613370/ganeshh123"}, "edited": false, "score": 0, "creation_date": 1560177154, "post_id": 56527396, "comment_id": 99640162, "body": "@Micheal - The <code>@post</code> does not seem to throw an issue, as this is rendering the &quot;show&quot; view for the posts. The <code>@post</code> seems to reference the current post correctly. However, the comments in <code>@post</code>.comments do not seem to be able to access their &quot;belongs-to&quot; user."}, {"owner": {"reputation": 318, "user_id": 3664194, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001800281383/picture?type=large", "display_name": "Michael Kosyk", "link": "https://stackoverflow.com/users/3664194/michael-kosyk"}, "reply_to_user": {"reputation": 15, "user_id": 10613370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nK3bNaBO0Mc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBlIb4wRkfFrw5942VeyJJwF8KMLA/mo/photo.jpg?sz=128", "display_name": "ganeshh123", "link": "https://stackoverflow.com/users/10613370/ganeshh123"}, "edited": false, "score": 0, "creation_date": 1560177785, "post_id": 56527396, "comment_id": 99640483, "body": "@Ganesh - It won&#39;t throw an error because when you ask for <code>@post</code>, you will get a <code>nil</code>, not an error. You are not setting it anywhere. Try to change <code>@post</code> reference to <code>@commentable</code>."}, {"owner": {"reputation": 318, "user_id": 3664194, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001800281383/picture?type=large", "display_name": "Michael Kosyk", "link": "https://stackoverflow.com/users/3664194/michael-kosyk"}, "reply_to_user": {"reputation": 15, "user_id": 10613370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nK3bNaBO0Mc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBlIb4wRkfFrw5942VeyJJwF8KMLA/mo/photo.jpg?sz=128", "display_name": "ganeshh123", "link": "https://stackoverflow.com/users/10613370/ganeshh123"}, "edited": false, "score": 0, "creation_date": 1560177857, "post_id": 56527396, "comment_id": 99640515, "body": "@Ganesh could you attach your <code>config&#47;routes.rb</code> file?"}, {"owner": {"reputation": 15, "user_id": 10613370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nK3bNaBO0Mc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBlIb4wRkfFrw5942VeyJJwF8KMLA/mo/photo.jpg?sz=128", "display_name": "ganeshh123", "link": "https://stackoverflow.com/users/10613370/ganeshh123"}, "edited": false, "score": 0, "creation_date": 1560178019, "post_id": 56527396, "comment_id": 99640597, "body": "@Micheal - Sure! <code>Rails.application.routes.draw do   devise_for :users   #  :controllers =&gt; {registrations: &#39;registrations&#39;}   resources :posts do     member do       put &quot;like&quot; =&gt; &quot;posts#upvote&quot;       put &quot;unlike&quot; =&gt; &quot;posts#downvote&quot;     end     resources :comments   end      root &quot;posts#index&quot;   # For details on the DSL available within this file, see http:&#47;&#47;guides.rubyonrails.org&#47;routing.html end </code> It&#39;s also on the main post"}, {"owner": {"reputation": 318, "user_id": 3664194, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001800281383/picture?type=large", "display_name": "Michael Kosyk", "link": "https://stackoverflow.com/users/3664194/michael-kosyk"}, "reply_to_user": {"reputation": 15, "user_id": 10613370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nK3bNaBO0Mc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBlIb4wRkfFrw5942VeyJJwF8KMLA/mo/photo.jpg?sz=128", "display_name": "ganeshh123", "link": "https://stackoverflow.com/users/10613370/ganeshh123"}, "edited": false, "score": 0, "creation_date": 1560178187, "post_id": 56527396, "comment_id": 99640674, "body": "@Ganesh - thank you! I checked and everything seems fine with your routes. Could you please try to what I mentioned in my previous comment?"}, {"owner": {"reputation": 15, "user_id": 10613370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nK3bNaBO0Mc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBlIb4wRkfFrw5942VeyJJwF8KMLA/mo/photo.jpg?sz=128", "display_name": "ganeshh123", "link": "https://stackoverflow.com/users/10613370/ganeshh123"}, "edited": false, "score": 0, "creation_date": 1560178349, "post_id": 56527396, "comment_id": 99640758, "body": "@Micheal -Where would you like me to update the post reference to commentable?"}, {"owner": {"reputation": 15, "user_id": 10613370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nK3bNaBO0Mc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBlIb4wRkfFrw5942VeyJJwF8KMLA/mo/photo.jpg?sz=128", "display_name": "ganeshh123", "link": "https://stackoverflow.com/users/10613370/ganeshh123"}, "edited": false, "score": 0, "creation_date": 1560178466, "post_id": 56527396, "comment_id": 99640810, "body": "@Micheal - For all occurences, or just where I am rendering the comments?"}, {"owner": {"reputation": 318, "user_id": 3664194, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001800281383/picture?type=large", "display_name": "Michael Kosyk", "link": "https://stackoverflow.com/users/3664194/michael-kosyk"}, "reply_to_user": {"reputation": 15, "user_id": 10613370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nK3bNaBO0Mc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBlIb4wRkfFrw5942VeyJJwF8KMLA/mo/photo.jpg?sz=128", "display_name": "ganeshh123", "link": "https://stackoverflow.com/users/10613370/ganeshh123"}, "edited": false, "score": 0, "creation_date": 1560178567, "post_id": 56527396, "comment_id": 99640862, "body": "@Ganesh - all occurrences"}, {"owner": {"reputation": 15, "user_id": 10613370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nK3bNaBO0Mc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBlIb4wRkfFrw5942VeyJJwF8KMLA/mo/photo.jpg?sz=128", "display_name": "ganeshh123", "link": "https://stackoverflow.com/users/10613370/ganeshh123"}, "edited": false, "score": 0, "creation_date": 1560178819, "post_id": 56527396, "comment_id": 99641004, "body": "@Micheal - Here is the result: <a href=\"https://i.ibb.co/6WpvmxJ/se1.jpg\" rel=\"nofollow noreferrer\">i.ibb.co/6WpvmxJ/se1.jpg</a> . It still cannot get the class"}], "tags": [], "owner": {"reputation": 318, "user_id": 3664194, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001800281383/picture?type=large", "display_name": "Michael Kosyk", "link": "https://stackoverflow.com/users/3664194/michael-kosyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1560176505, "last_edit_date": 1560176505, "creation_date": 1560173314, "answer_id": 56527396, "question_id": 56525932, "link": "https://stackoverflow.com/questions/56525932/cant-access-user-in-comment-object/56527396#56527396", "title": "Can&#39;t access user in comment object", "body": "<p>Firstly: There is no instance variable like <code>@post</code>, so I would start with that :)</p>\n\n<p>Secondly: I would suggest wrapping everything into objects implementing a Presenter design pattern. I would separate the presentation layer from business/persistence layer.</p>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 10613370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nK3bNaBO0Mc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBlIb4wRkfFrw5942VeyJJwF8KMLA/mo/photo.jpg?sz=128", "display_name": "ganeshh123", "link": "https://stackoverflow.com/users/10613370/ganeshh123"}, "is_accepted": true, "score": 0, "last_activity_date": 1560202845, "creation_date": 1560202845, "answer_id": 56533878, "question_id": 56525932, "link": "https://stackoverflow.com/questions/56525932/cant-access-user-in-comment-object/56533878#56533878", "title": "Can&#39;t access user in comment object", "body": "<p>It was actually a simple fix! I just had to wrap the comments view inside <code>&lt;% if !comment.user.nil? %&gt;</code> For some reason, the first comment does not seem to have a user associated with it.</p>\n"}], "owner": {"reputation": 15, "user_id": 10613370, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nK3bNaBO0Mc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBlIb4wRkfFrw5942VeyJJwF8KMLA/mo/photo.jpg?sz=128", "display_name": "ganeshh123", "link": "https://stackoverflow.com/users/10613370/ganeshh123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 56533878, "answer_count": 3, "score": 0, "last_activity_date": 1560202845, "creation_date": 1560167800, "last_edit_date": 1560178091, "question_id": 56525932, "link": "https://stackoverflow.com/questions/56525932/cant-access-user-in-comment-object", "title": "Can&#39;t access user in comment object", "body": "<p>I have the following models, Post, Comment, and User. The Comment object belongs to user, and the user has many comments. However, when trying to render a view to show the comments, the user can't be accessed and shows undefined method `avatar' for nil:NilClass. The avatar attached is a method associated with the User class.</p>\n\n<p>This is the comments controller</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class CommentsController &lt; ApplicationController\n\n    before_action :authenticate_user!, except: [:index, :show]\n    before_action :set_commentable \n\n    def create\n        @comment = @commentable.comments.new comment_params\n        @comment.user = current_user\n        @comment.save\n        redirect_to @commentable, notice: \"Comment Posted!\"\n    end\n\n    def index\n        @comments = @commentable.comments.all\n        @comment = @commentable.comments.new comment_params\n    end\n\n\n\n    private\n\n        def comment_params\n            params.require(:comment).permit(:body)\n        end\n\n        def set_commentable\n            @commentable = Post.find(params[:post_id])\n        end\n\nend\n\n</code></pre>\n\n<p>Here is the Comment model:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Comment &lt; ApplicationRecord\n    belongs_to :user\n    belongs_to :commentable, polymorphic: true\nend\n</code></pre>\n\n<p>Here is the User model:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class User &lt; ApplicationRecord\n\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable, :trackable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :validatable\n\n  acts_as_voter\n\n  has_many :posts\n  has_many :comments\n  has_one_attached :avatar\n\n\n  validates :username, uniqueness: true\n  validates :email, uniqueness: true\n\nend\n</code></pre>\n\n<p>Here is the view I am trying to render. I want the comments to be displayed at the bottom of the show view for a post:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n\n&lt;div class=\"w3-container w3-card w3-white w3-round m7\" style=\"margin:auto; display:table; min-width: 500px; max-width: 800px;\"&gt;&lt;br&gt;\n        &lt;% if @post.user.avatar.attached? %&gt;\n            &lt;%= image_tag @post.user.avatar, class: \"w3-circle avatar w3-left w3-margin-right\", :style =&gt; \"display: inline;\" %&gt;\n        &lt;% else %&gt;\n        &lt;img src=\"https://www.w3schools.com/w3images/avatar2.png\" alt=\"Avatar\" class=\"w3-left w3-circle w3-margin-right\" style=\"width:60px\"&gt;\n        &lt;% end %&gt;\n        &lt;%= link_to @post do %&gt;\n        &lt;span class=\"w3-right w3-opacity\"&gt;&lt;%= time_ago_in_words(@post.created_at) %&gt; ago&lt;/span&gt;\n        &lt;% end %&gt;\n\n        &lt;h4&gt;&lt;%= @post.user.name %&gt;&lt;/h4&gt; &lt;h5&gt;@&lt;%= @post.user.username%&gt;&lt;/h5&gt;\n        &lt;hr class=\"w3-clear\"&gt;\n        &lt;p&gt;&lt;%= @post.content %&gt;&lt;/p&gt;\n        &lt;% if user_signed_in? %&gt;\n        &lt;hr class=\"w3-clear\"&gt;\n        &lt;%= link_to like_post_path(@post), method: :put,  class: \"w3-button w3-theme-d2 w3-margin-bottom\" do%&gt;\n            &lt;i class=\"fa fa-thumbs-up\"&gt;&lt;/i&gt;\n            &lt;span class=\"w3-badgeM\"&gt;&lt;%= @post.get_upvotes.size %&gt;&lt;/span&gt;\n        &lt;% end %&gt;    \n        &lt;button type=\"button\" class=\"w3-button w3-theme-d2 w3-margin-bottom\"&gt;&lt;i class=\"fa fa-comment\"&gt;&lt;/i&gt;&lt;/button&gt;\n\n        &lt;% if current_user.id == @post.user_id %&gt;\n            &lt;%= link_to edit_post_path(@post), class: \"w3-button w3-theme-d1 w3-margin-bottom\" do %&gt;\n                &lt;i class=\"fas fa-pencil-alt\"&gt;&lt;/i&gt;\n            &lt;% end %&gt;\n            &lt;%= link_to @post, method: :delete, data: {confirm: \"Are you sure you want to delete this post?\"}, class: \"w3-button w3-theme-d1 w3-margin-bottom\" do %&gt;\n                &lt;i class=\"fas fa-trash-alt\"&gt;&lt;/i&gt;\n            &lt;% end %&gt;\n        &lt;% end %&gt;\n        &lt;% else %&gt;\n        &lt;br &gt;\n        &lt;% end %&gt;\n\n        &lt;%= simple_form_for([@post, @post.comments.build]) do |f| %&gt;\n        &lt;div class=\"field\"&gt;\n            &lt;div class=\"control\"&gt;\n            &lt;%= f.input :body, input_html: { class: 'textarea' }, wrapper: false, label_html: { class: 'label' }  %&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;%= f.button :submit, 'Leave a reply', class: \"button is-primary\" %&gt;\n        &lt;% end %&gt;\n        &lt;% @post.comments.each do |comment|%&gt;\n        &lt;div class=\"w3-container w3-card w3-round w3-margin\" style=\"background-color: #f3f3f3; padding: 0px 5px 5px;\" &gt;&lt;br&gt;\n            &lt;% if comment.user.avatar.attached? %&gt;\n                &lt;%= image_tag comment.user.avatar, class: \"w3-circle avatar w3-left w3-margin-right\", :style =&gt; \"display: inline;\" %&gt;\n            &lt;% else %&gt;\n                &lt;img src=\"https://www.w3schools.com/w3images/avatar2.png\" alt=\"Avatar\" class=\"w3-left w3-circle w3-margin-right\" style=\"width:60px\"&gt;\n            &lt;% end %&gt;\n            &lt;% if user_signed_in? %&gt;\n\n            &lt;% end %&gt;\n            &lt;span class=\"w3-right w3-opacity\"&gt;&lt;%= time_ago_in_words(comment.created_at) %&gt; ago&lt;/span&gt;\n            &lt;h6&gt;&lt;%= comment.user.name %&gt;&lt;/h6&gt; &lt;p&gt;&lt;strong&gt;@&lt;%= comment.user.username%&gt;&lt;/strong&gt;&lt;/p&gt;\n            &lt;p style=\"max-height: 75px; overflow:auto;\"&gt;&lt;%= comment.body %&gt;&lt;/p&gt;\n\n        &lt;/div&gt;\n        &lt;% end %&gt;\n\n    &lt;/div&gt;\n</code></pre>\n\n<p>The routes.rb file:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Rails.application.routes.draw do\n  devise_for :users\n  #  :controllers =&gt; {registrations: 'registrations'}\n  resources :posts do\n    member do\n      put \"like\" =&gt; \"posts#upvote\"\n      put \"unlike\" =&gt; \"posts#downvote\"\n    end\n    resources :comments\n  end   \n  root \"posts#index\"\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\nend\n</code></pre>\n\n<p>However, when I try to render this, I get the following error:</p>\n\n<p><img src=\"https://i.ibb.co/HV3qkr7/error.jpg\" alt=\"https://i.ibb.co/HV3qkr7/error.jpg\"></p>\n\n<p>If I look in the database, the comment record exists with the correct ids:</p>\n\n<p><img src=\"https://i.ibb.co/FXvPpSF/db.jpg\" alt=\"https://i.ibb.co/FXvPpSF/db.jpg\"></p>\n\n<p>When I try to run the avatar attached method in the console after selecting the post, it seems to return true and not throw any errors:</p>\n\n<p><img src=\"https://i.ibb.co/X3k3mBq/console.jpg\" alt=\"https://i.ibb.co/X3k3mBq/console.jpg\"></p>\n\n<p>Could someone help me out, and point out where I went wrong?\nThanks :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database"], "comments": [{"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1560218617, "post_id": 56525635, "comment_id": 99653784, "body": "Are you using the windows subsystem for linux? or rails installer for your ruby/rails installation?"}, {"owner": {"reputation": 13, "user_id": 8874052, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-e9eqhd6rrzM/AAAAAAAAAAI/AAAAAAAAAeE/BTxwuNCYNTQ/photo.jpg?sz=128", "display_name": "Rei", "link": "https://stackoverflow.com/users/8874052/rei"}, "reply_to_user": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1560224808, "post_id": 56525635, "comment_id": 99654824, "body": "@JayDorsey I&#39;m just using windows. For rails, i used rails installer (ruby 2.2)."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8874052, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-e9eqhd6rrzM/AAAAAAAAAAI/AAAAAAAAAeE/BTxwuNCYNTQ/photo.jpg?sz=128", "display_name": "Rei", "link": "https://stackoverflow.com/users/8874052/rei"}, "edited": false, "score": 0, "creation_date": 1560215877, "post_id": 56527542, "comment_id": 99653348, "body": "Hi Michael, i am using windows OS."}, {"owner": {"reputation": 318, "user_id": 3664194, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001800281383/picture?type=large", "display_name": "Michael Kosyk", "link": "https://stackoverflow.com/users/3664194/michael-kosyk"}, "reply_to_user": {"reputation": 13, "user_id": 8874052, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-e9eqhd6rrzM/AAAAAAAAAAI/AAAAAAAAAeE/BTxwuNCYNTQ/photo.jpg?sz=128", "display_name": "Rei", "link": "https://stackoverflow.com/users/8874052/rei"}, "edited": false, "score": 0, "creation_date": 1560243236, "post_id": 56527542, "comment_id": 99661630, "body": "@Rei hey, i edited it for Windows. Try to look there :) Good luck!"}], "tags": [], "owner": {"reputation": 318, "user_id": 3664194, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001800281383/picture?type=large", "display_name": "Michael Kosyk", "link": "https://stackoverflow.com/users/3664194/michael-kosyk"}, "is_accepted": false, "score": 1, "last_activity_date": 1560243213, "last_edit_date": 1560243213, "creation_date": 1560173861, "answer_id": 56527542, "question_id": 56525635, "link": "https://stackoverflow.com/questions/56525635/error-when-running-rails-s-require-cannot-load-such-file-rescue-in-top-requi/56527542#56527542", "title": "Error when running rails s &quot;require cannot load such file, rescue in &lt;top (required)&gt; &amp; block in require&quot;", "body": "<p><code>pg</code> gem requires few packages to be installed with it.</p>\n\n<p>You didn't specify your system so here are few examples:</p>\n\n<p><strong>Debian/Ubuntu</strong>\n<code>sudo apt-get install libpq-dev</code></p>\n\n<p><strong>Mac</strong>\nIt comes with postgresql <code>brew install postgresql</code></p>\n\n<p><strong>Windows</strong>\nI will point to a different SO thread: <a href=\"https://stackoverflow.com/questions/4335750/cant-install-pg-gem-on-windows\">Can&#39;t install pg gem on Windows</a></p>\n"}], "owner": {"reputation": 13, "user_id": 8874052, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-e9eqhd6rrzM/AAAAAAAAAAI/AAAAAAAAAeE/BTxwuNCYNTQ/photo.jpg?sz=128", "display_name": "Rei", "link": "https://stackoverflow.com/users/8874052/rei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 951, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560243213, "creation_date": 1560166666, "last_edit_date": 1560216337, "question_id": 56525635, "link": "https://stackoverflow.com/questions/56525635/error-when-running-rails-s-require-cannot-load-such-file-rescue-in-top-requi", "title": "Error when running rails s &quot;require cannot load such file, rescue in &lt;top (required)&gt; &amp; block in require&quot;", "body": "<p>I am using ruby 2.5.5p157, Rails 4.2.6, git bash 2.22.0, Bundler version 1.13.6 and windows 10 OS.\nI am currently taking over a project done by another person to add some minor features in but discovered that the project is done in ruby which i have no background in. I have the whole completed project file and i need to setup a separate database server to add in a new feature to test it out but the project was done a few years back and i can't contact the person because i do not know who was the one to do it.\nSo here i am trying to just set up the database of the file after installing git bash, ruby and rails but run into this error after i have \"bundle install\" and run \"rails s\" in git bash.</p>\n\n<p>I have tried uninstalling PG gem and installing again,update bundle &amp; install bundle but these does not work. I have also tried updating PG but does not work either.</p>\n\n<pre><code>$ rails s\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/pg-0.18.4-x64-mingw32/lib/pg.rb:14:in `require': cannot load such file -- 2.5/pg_ext (LoadError)\n        from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/pg-0.18.4-x64-mingw32/lib/pg.rb:14:in `rescue in &lt;top (required)&gt;'\n        from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/pg-0.18.4-x64-mingw32/lib/pg.rb:3:in `&lt;top (required)&gt;'\n        from C:/Ruby25-x64/lib/ruby/site_ruby/2.5.0/bundler/runtime.rb:81:in `require'\n        from C:/Ruby25-x64/lib/ruby/site_ruby/2.5.0/bundler/runtime.rb:81:in `block (2 levels) in require'\n        from C:/Ruby25-x64/lib/ruby/site_ruby/2.5.0/bundler/runtime.rb:76:in `each'\n        from C:/Ruby25-x64/lib/ruby/site_ruby/2.5.0/bundler/runtime.rb:76:in `block in require'\n        from C:/Ruby25-x64/lib/ruby/site_ruby/2.5.0/bundler/runtime.rb:65:in `each'\n        from C:/Ruby25-x64/lib/ruby/site_ruby/2.5.0/bundler/runtime.rb:65:in `require'\n        from C:/Ruby25-x64/lib/ruby/site_ruby/2.5.0/bundler.rb:114:in `require'\n        from C:/sites/nyp-backend/config/application.rb:7:in `&lt;top (required)&gt;'\n        from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:78:in `require'\n        from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:78:in `block in server'\n        from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:75:in `tap'\n        from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:75:in `server'\n        from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n        from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-4.2.6/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n        from bin/rails:4:in `require'\n        from bin/rails:4:in `&lt;main&gt;'\n\n\n</code></pre>\n\n<p>Here's my jem list in case you need to know:</p>\n\n<pre><code>$ gem list\naasm (4.10.1, 4.10.0)\nactioncable (5.2.3)\nactionmailer (5.2.3, 4.2.6)\nactionpack (5.2.3, 4.2.6)\nactionview (5.2.3, 4.2.6)\nactivejob (5.2.3, 4.2.6)\nactivemodel (5.2.3, 4.2.6)\nactiverecord (5.2.3, 4.2.6)\nactivestorage (5.2.3)\nactivesupport (5.2.3, 4.2.6)\nacts_as_commentable (4.0.2)\nacts_as_list (0.7.4)\nadministrate (0.2.2)\nakami (1.3.1)\narel (9.0.0, 6.0.4, 6.0.3)\nautoprefixer-rails (6.7.7.2)\naws-sdk (1.67.0)\naws-sdk-v1 (1.67.0)\naxiom-types (0.1.1)\nbcrypt (3.1.13, 3.1.11 x64-mingw32)\nbetter_errors (2.5.1)\nbigdecimal (default: 1.3.4)\nbinding_of_caller (0.8.0)\nbootstrap-datepicker-rails (1.6.0.1)\nbootstrap-sass (3.3.7)\nbootstrap3-datetimepicker-rails (4.17.47)\nbuilder (3.2.3, 3.2.2)\nbundle (0.0.1)\nbundler (2.0.1, default: 1.17.3, 1.13.6)\nbyebug (11.0.1, 8.2.2)\ncancancan (1.17.0, 1.13.1)\ncapistrano (3.4.1)\ncapistrano-bundler (1.5.0)\ncapistrano-faster-assets (1.1.0)\ncapistrano-passenger (0.2.0)\ncapistrano-rails (1.1.8)\ncapistrano-rvm (0.1.2)\nchronic (0.10.2)\nchunky_png (1.3.11, 1.3.5)\nclimate_control (0.2.0)\ncmath (default: 1.0.0)\ncocaine (0.5.8)\ncocoon (1.2.9)\ncoderay (1.1.2, 1.1.1)\ncoercible (1.0.0)\ncoffee-rails (4.1.1)\ncoffee-script (2.4.1)\ncoffee-script-source (1.12.2, 1.10.0)\ncompass (1.0.3)\ncompass-core (1.0.3)\ncompass-import-once (1.0.5)\ncompass-rails (3.0.2)\nconcurrent-ruby (1.1.5, 1.0.1)\ncrass (1.0.4)\ncsv (default: 1.0.0)\ndaemons (1.2.6, 1.2.3)\ndatabase_cleaner (1.5.3, 1.5.1)\ndate (default: 1.0.0)\ndatetime_picker_rails (0.0.7)\ndbm (default: 1.0.0)\ndebug_inspector (0.0.3, 0.0.2)\ndelayed_job (4.1.5)\ndelayed_job_active_record (4.1.3)\ndescendants_tracker (0.0.4)\ndevise (3.5.10)\ndid_you_mean (1.2.0)\ndiff-lcs (1.3, 1.2.5)\ndotenv (2.1.2, 2.1.1)\ndotenv-rails (2.1.2)\nequalizer (0.0.11)\nerubi (1.8.0)\nerubis (2.7.0)\netc (default: 1.0.0)\nexception_notification (4.1.1)\nexecjs (2.7.0, 2.6.0)\nfactory_girl (4.5.0)\nfactory_girl_rails (4.5.0)\nfaker (1.6.6, 1.6.3)\nfcntl (default: 1.0.0)\nffi (1.11.1 x64-mingw32, 1.9.10 x64-mingw32)\nfiddle (default: 1.0.0)\nfileutils (default: 1.0.2)\nformatador (0.2.5)\ngdbm (default: 2.0.0)\nglobalid (0.4.2)\ngrape (0.15.0)\ngrape-entity (0.4.8)\ngrape-swagger (0.10.5)\ngrape-swagger-rails (0.2.2)\nguard (2.15.0)\nguard-compat (1.2.1)\nguard-rspec (4.6.5)\ngyoku (1.3.1)\nhashie (3.6.0, 3.4.3)\nhashie-forbidden_attributes (0.1.1)\nhttpi (2.4.4)\ni18n (1.6.0, 0.9.5, 0.7.0)\nice_nine (0.11.2)\nio-console (default: 0.4.6)\nipaddr (default: 1.2.0)\njbuilder (2.9.1)\njquery-rails (4.3.3)\njson (default: 2.1.0, 1.8.6)\nkaminari (0.16.3)\nlisten (3.1.5)\nloofah (2.2.3)\nlumberjack (1.0.13, 1.0.10)\nmail (2.7.1)\nmarcel (0.3.3)\nmethod_source (0.9.2, 0.8.2)\nmime-types (3.2.2)\nmime-types-data (3.2019.0331, 3.2016.0221)\nmimemagic (0.3.3, 0.3.0)\nmini_mime (1.0.1)\nmini_portile2 (2.4.0, 2.0.0)\nminitest (5.11.3, 5.10.3, 5.8.4)\nmomentjs-rails (2.20.1)\nmulti_json (1.13.1, 1.11.2)\nmulti_xml (0.6.0, 0.5.5)\nneat (1.9.1)\nnenv (0.3.0)\nnet-scp (2.0.0)\nnet-ssh (5.2.0, 3.1.1)\nnet-telnet (0.1.1)\nnio4r (2.3.1)\nnokogiri (1.10.3 x64-mingw32)\nnori (2.6.0)\nnormalize-rails (3.0.3)\nnotiffany (0.1.1)\nopenssl (default: 2.1.2)\norm_adapter (0.5.0)\npaperclip (4.3.7)\npassenger (5.0.30)\npg (1.1.4 x64-mingw32, 0.18.4 x64-mingw32)\npower_assert (1.1.1)\npry (0.12.2)\npsych (default: 3.0.2)\nrack (2.0.7, 1.6.11, 1.6.4)\nrack-accept (0.4.5)\nrack-mount (0.8.3)\nrack-test (1.1.0, 0.6.3)\nrails (5.2.3, 4.2.6)\nrails-deprecated_sanitizer (1.0.3)\nrails-dom-testing (2.0.3, 1.0.9)\nrails-html-sanitizer (1.0.4)\nrailties (5.2.3, 4.2.6)\nrake (12.3.2, 12.3.0, 11.1.2)\nrb-fsevent (0.10.3, 0.9.7)\nrb-inotify (0.10.0)\nrdoc (default: 6.0.1, 4.3.0)\nresponders (2.4.1)\nrqrcode (0.10.1)\nrspec (3.4.0)\nrspec-core (3.4.4)\nrspec-expectations (3.4.0)\nrspec-mocks (3.4.1)\nrspec-rails (3.4.2)\nrspec-support (3.4.1)\nruby_dep (1.5.0)\nrubygems-update (3.0.3)\nsass (3.4.25, 3.4.21)\nsass-rails (5.0.7)\nsavon (2.11.2)\nscanf (default: 1.0.0)\nsdbm (default: 1.0.0)\nsdoc (0.4.2)\nselect2-rails (4.0.1.1)\nselectize-rails (0.12.6, 0.12.1)\nshellany (0.0.1)\nsimple_form (3.2.1)\nslim (3.0.9)\nslop (3.6.0)\nsocialization (1.2.3)\nsocksify (1.7.1)\nspring (2.0.2, 1.6.4)\nspring-commands-rspec (1.0.4)\nsprockets (3.7.2)\nsprockets-rails (3.2.1)\nsshkit (1.18.2)\nstringio (default: 0.0.1)\nstrscan (default: 1.0.0)\ntemple (0.8.1, 0.7.6)\ntest-unit (3.2.7)\nthor (0.20.3, 0.19.1)\nthread_safe (0.3.6, 0.3.5)\ntilt (2.0.9, 2.0.2)\ntimecop (0.8.1, 0.8.0)\nturbolinks (5.2.0)\nturbolinks-source (5.2.0)\ntzinfo (1.2.5)\nuglifier (4.1.20)\nvirtus (1.0.5)\nwarden (1.2.7)\nwasabi (3.5.0)\nweb-console (2.3.0)\nwebrick (default: 1.4.2)\nwebsocket-driver (0.7.0)\nwebsocket-extensions (0.1.3)\nwhenever (0.11.0)\nxmlrpc (0.3.0)\nzlib (default: 1.0.0)\n</code></pre>\n\n<p>in case you need to know what is installed in the bundle and their version:</p>\n\n<pre><code>$ bundle install\nUsing rake 12.3.2\nUsing aasm 4.10.1\nUsing concurrent-ruby 1.1.5\nUsing i18n 0.9.5\nUsing json 1.8.6\nUsing minitest 5.11.3\nUsing thread_safe 0.3.6\nUsing tzinfo 1.2.5\nUsing activesupport 4.2.6\nUsing builder 3.2.3\nUsing erubis 2.7.0\nUsing mini_portile2 2.4.0\nUsing nokogiri 1.10.3 (x64-mingw32)\nUsing rails-deprecated_sanitizer 1.0.3\nUsing rails-dom-testing 1.0.9\nUsing crass 1.0.4\nUsing loofah 2.2.3\nUsing rails-html-sanitizer 1.0.4\nUsing actionview 4.2.6\nUsing rack 1.6.11\nUsing rack-test 0.6.3\nUsing actionpack 4.2.6\nUsing globalid 0.4.2\nUsing activejob 4.2.6\nUsing mini_mime 1.0.1\nUsing mail 2.7.1\nUsing actionmailer 4.2.6\nUsing activemodel 4.2.6\nUsing arel 6.0.4\nUsing activerecord 4.2.6\nUsing acts_as_commentable 4.0.2\nUsing acts_as_list 0.7.4\nUsing execjs 2.7.0\nUsing autoprefixer-rails 6.7.7.2\nUsing thor 0.20.3\nUsing railties 4.2.6\nUsing momentjs-rails 2.20.1\nUsing datetime_picker_rails 0.0.7\nUsing jquery-rails 4.3.3\nUsing kaminari 0.16.3\nUsing sass 3.4.25\nUsing neat 1.9.1\nUsing normalize-rails 3.0.3\nUsing bundler 1.17.3\nUsing sprockets 3.7.2\nUsing sprockets-rails 3.2.1\nUsing rails 4.2.6\nUsing tilt 2.0.9\nUsing sass-rails 5.0.7\nUsing selectize-rails 0.12.6\nUsing administrate 0.2.2\nUsing gyoku 1.3.1\nUsing akami 1.3.1\nUsing aws-sdk-v1 1.67.0\nUsing aws-sdk 1.67.0\nUsing descendants_tracker 0.0.4\nUsing ice_nine 0.11.2\nUsing axiom-types 0.1.1\nUsing bcrypt 3.1.13\nUsing coderay 1.1.2\nUsing erubi 1.8.0\nUsing better_errors 2.5.1\nUsing debug_inspector 0.0.3\nUsing binding_of_caller 0.8.0\nUsing bootstrap-datepicker-rails 1.6.0.1\nUsing bootstrap-sass 3.3.7\nUsing bootstrap3-datetimepicker-rails 4.17.47\nUsing byebug 11.0.1\nUsing cancancan 1.17.0\nUsing net-ssh 5.2.0\nUsing net-scp 2.0.0\nUsing sshkit 1.18.2\nUsing capistrano 3.4.1\nUsing capistrano-bundler 1.5.0\nUsing capistrano-faster-assets 1.1.0\nUsing capistrano-passenger 0.2.0\nUsing capistrano-rails 1.1.8\nUsing capistrano-rvm 0.1.2\nUsing chronic 0.10.2\nUsing chunky_png 1.3.11\nUsing climate_control 0.2.0\nUsing cocaine 0.5.8\nUsing cocoon 1.2.9\nUsing coercible 1.0.0\nUsing coffee-script-source 1.12.2\nUsing coffee-script 2.4.1\nUsing coffee-rails 4.1.1\nUsing multi_json 1.13.1\nUsing compass-core 1.0.3\nUsing compass-import-once 1.0.5\nUsing rb-fsevent 0.10.3\nUsing ffi 1.11.1 (x64-mingw32)\nUsing rb-inotify 0.10.0\nUsing compass 1.0.3\nUsing compass-rails 3.0.2\nUsing daemons 1.2.6\nUsing database_cleaner 1.5.3\nUsing delayed_job 4.1.5\nUsing delayed_job_active_record 4.1.3\nUsing orm_adapter 0.5.0\nUsing responders 2.4.1\nUsing warden 1.2.7\nUsing devise 3.5.10\nUsing diff-lcs 1.3\nUsing dotenv 2.1.2\nUsing dotenv-rails 2.1.2\nUsing equalizer 0.0.11\nUsing exception_notification 4.1.1\nUsing factory_girl 4.5.0\nUsing factory_girl_rails 4.5.0\nUsing faker 1.6.6\nUsing formatador 0.2.5\nUsing hashie 3.6.0\nUsing multi_xml 0.6.0\nUsing rack-accept 0.4.5\nUsing rack-mount 0.8.3\nUsing virtus 1.0.5\nUsing grape 0.15.0\nUsing grape-entity 0.4.8\nUsing grape-swagger 0.10.5\nUsing grape-swagger-rails 0.2.2\nUsing ruby_dep 1.5.0\nUsing listen 3.1.5\nUsing lumberjack 1.0.13\nUsing nenv 0.3.0\nUsing shellany 0.0.1\nUsing notiffany 0.1.1\nUsing method_source 0.9.2\nUsing pry 0.12.2\nUsing guard 2.15.0\nUsing guard-compat 1.2.1\nUsing rspec-support 3.4.1\nUsing rspec-core 3.4.4\nUsing rspec-expectations 3.4.0\nUsing rspec-mocks 3.4.1\nUsing rspec 3.4.0\nUsing guard-rspec 4.6.5\nUsing hashie-forbidden_attributes 0.1.1\nUsing socksify 1.7.1\nUsing httpi 2.4.4\nUsing jbuilder 2.9.1\nUsing mime-types-data 3.2019.0331\nUsing mime-types 3.2.2\nUsing mimemagic 0.3.0\nUsing nori 2.6.0\nUsing paperclip 4.3.7\nUsing passenger 5.0.30\nUsing pg 0.18.4 (x64-mingw32)\nUsing rdoc 4.3.0\nUsing rqrcode 0.10.1\nUsing rspec-rails 3.4.2\nUsing wasabi 3.5.0\nUsing savon 2.11.2\nUsing sdoc 0.4.2\nUsing select2-rails 4.0.1.1\nUsing simple_form 3.2.1\nUsing temple 0.8.1\nUsing slim 3.0.9\nUsing socialization 1.2.3\nUsing spring 2.0.2\nUsing spring-commands-rspec 1.0.4\nUsing timecop 0.8.1\nUsing turbolinks-source 5.2.0\nUsing turbolinks 5.2.0\nUsing uglifier 4.1.20\nUsing web-console 2.3.0\nUsing whenever 0.11.0\nBundle complete! 57 Gemfile dependencies, 167 gems now installed.\nUse `bundle info [gemname]` to see where a bundled gem is installed.\n\n</code></pre>\n\n<p>It would be great if anyone can help guide me with the setting up of a server database for ruby. Thanks!</p>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1560164349, "post_id": 56524941, "comment_id": 99633979, "body": "The documentation for Ruby 2.6.3 still includes the <a href=\"https://ruby-doc.org/core-2.6.3/doc/globals_rdoc.html\" rel=\"nofollow noreferrer\"><code>$.</code> predefined global variable</a> which stores <i>the current input line number of the last file that was read.</i> That means the probably the implementation of <code>CSV</code> change."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1560165184, "post_id": 56524941, "comment_id": 99634373, "body": "What would be wrong with <code>CSV.new($stdin, CSV_OPTIONS).each_with_index do |row, line|</code>? Why there is a need in a global variable in the first place?"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1560165326, "post_id": 56524941, "comment_id": 99634435, "body": "Good idea! I was not aware that each_with_index would also work here. Wouldn&#39;t in this case be the whole file read into memory first and then processed as array?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1560166334, "post_id": 56524941, "comment_id": 99634880, "body": "There is no difference between <code>each</code> and <code>each_with_index</code> behaviour."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1560166494, "post_id": 56524941, "comment_id": 99634952, "body": "I&#39;m just surprised, because <a href=\"https://ruby-doc.org/stdlib-2.6.3/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow noreferrer\">the docs for csv</a> don&#39;t even mention <code>each_with_index</code>. So I guess the method is inherited from <code>Enumerable</code>, and that&#39;s why I was not sure weather this might not cause the whole file to be read into memory at once."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1560166990, "post_id": 56524941, "comment_id": 99635136, "body": "Use <code>each.with_index</code> then. I am not aware of what CSV provides in particular, but <code>each</code> returns an <code>Enumerator</code> instance when no block is given."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1560186863, "post_id": 56524941, "comment_id": 99644831, "body": "<code>each_with_index</code> will not cause the whole file to be read into memory at once."}], "answers": [{"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 1, "last_activity_date": 1560187685, "creation_date": 1560187685, "answer_id": 56530934, "question_id": 56524941, "link": "https://stackoverflow.com/questions/56524941/is-special-variable-gone-from-ruby/56530934#56530934", "title": "Is special variable $. gone from Ruby?", "body": "<p>I'm not sure why <code>$.</code> isn't working for you, but it's also not the best solution here. When it works, <code>$.</code> gives you the number of lines read from input, but since quoted fields in a CSV file can span multiple lines the number you get from <code>$.</code> won't always be the number of <em>rows</em> that have been read.</p>\n\n<p>As mentioned above, <code>each_with_index</code> is a good alternative:</p>\n\n<pre><code>CSV.new($stdin, CSV_OPTIONS).each_with_index do |row, i|\n  puts \"::::row #{i} row=#{row}\"\nend\n</code></pre>\n\n<p>Another alternative is <a href=\"https://ruby-doc.org/stdlib-2.6.3/libdoc/csv/rdoc/CSV.html#method-i-lineno\" rel=\"nofollow noreferrer\"><code>CSV#lineno</code></a>:</p>\n\n<blockquote>\n  <h3>lineno()</h3>\n  \n  <p>The line number of the last row read from this file. Fields with nested line-end characters will not affect this count.</p>\n</blockquote>\n\n<p>You would use it like this:</p>\n\n<pre><code>csv = CSV.new($stdin, CSV_OPTIONS)\ncsv.each do |row|\n  puts \"::::row #{csv.lineno} row=#{row}\"\nend\n</code></pre>\n\n<p>Note that <code>each_with_index</code> will start counting at 0, whereas <code>lineno</code> starts at 1.</p>\n\n<p>You can see both approaches in action on repl.it: <a href=\"https://repl.it/@jrunning/LoudBlushingCharactercode\" rel=\"nofollow noreferrer\">https://repl.it/@jrunning/LoudBlushingCharactercode</a></p>\n"}], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 56530934, "answer_count": 1, "score": 0, "last_activity_date": 1560187685, "creation_date": 1560163708, "last_edit_date": 1560187136, "question_id": 56524941, "link": "https://stackoverflow.com/questions/56524941/is-special-variable-gone-from-ruby", "title": "Is special variable $. gone from Ruby?", "body": "<p>When processing a file, I used to use the special variable <code>$.</code> to get the last line number being read. For instance, the following program</p>\n\n<pre><code>require 'csv'\n\nIFS=';'\nCSV_OPTIONS = { col_sep: IFS, external_encoding: Encoding::ISO_8859_1, internal_encoding: Encoding::UTF_8 }\n\nCSV.new($stdin, CSV_OPTIONS).each do |row|\n  puts \"::::line #{$.} row=#{row}\"\nend\n</code></pre>\n\n<p>is supposed to dump a CSV file (where the fields are delimited by semicolon instead of comma, as is the case in our project) and prepend each output line by the line number.</p>\n\n<p>After updating Ruby to</p>\n\n<pre><code>_ruby 2.6.3p62 (2019-04-16 revision 67580) [x86_64-cygwin]_\n</code></pre>\n\n<p>the lines are still dumped, but the line number is always displayed as zero. </p>\n\n<p>What strikes me, is that this <a href=\"https://ruby.fandom.com/wiki/Special_variable\" rel=\"nofollow noreferrer\">Ruby Wiki</a> on special Ruby variables, while still having <code>$.</code> in its list, doesn't have a description for this variable anymore. So I wonder: Is this variable gone, or was it never supposed to work with the <em>csv</em> class and just worked for me by accident in the earlier versions?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3"], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 11539591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f70196f5d8b372232969cea4f7ae28?s=128&d=identicon&r=PG&f=1", "display_name": "developing", "link": "https://stackoverflow.com/users/11539591/developing"}, "edited": false, "score": 0, "creation_date": 1560161584, "post_id": 56524263, "comment_id": 99632712, "body": "hi!! thank you! I&#39;ve updated the question, what do you think I can update my param? thanks!"}, {"owner": {"reputation": 105, "user_id": 11539591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f70196f5d8b372232969cea4f7ae28?s=128&d=identicon&r=PG&f=1", "display_name": "developing", "link": "https://stackoverflow.com/users/11539591/developing"}, "edited": false, "score": 0, "creation_date": 1560161653, "post_id": 56524263, "comment_id": 99632764, "body": "Because i think i alreay have it as shipping_option_id, haven&#39;t I?"}, {"owner": {"reputation": 432, "user_id": 5529252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c9b93c1cab573e87ee3080d1baa70ee?s=128&d=identicon&r=PG&f=1", "display_name": "Bodh1004", "link": "https://stackoverflow.com/users/5529252/bodh1004"}, "reply_to_user": {"reputation": 105, "user_id": 11539591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f70196f5d8b372232969cea4f7ae28?s=128&d=identicon&r=PG&f=1", "display_name": "developing", "link": "https://stackoverflow.com/users/11539591/developing"}, "edited": false, "score": 0, "creation_date": 1560161671, "post_id": 56524263, "comment_id": 99632779, "body": "add params of  product_shop_shipping_options model ."}, {"owner": {"reputation": 432, "user_id": 5529252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c9b93c1cab573e87ee3080d1baa70ee?s=128&d=identicon&r=PG&f=1", "display_name": "Bodh1004", "link": "https://stackoverflow.com/users/5529252/bodh1004"}, "reply_to_user": {"reputation": 105, "user_id": 11539591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f70196f5d8b372232969cea4f7ae28?s=128&d=identicon&r=PG&f=1", "display_name": "developing", "link": "https://stackoverflow.com/users/11539591/developing"}, "edited": false, "score": 0, "creation_date": 1560162131, "post_id": 56524263, "comment_id": 99633012, "body": "@developing I have updated the answer . please check and vote if it works for you ."}, {"owner": {"reputation": 105, "user_id": 11539591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f70196f5d8b372232969cea4f7ae28?s=128&d=identicon&r=PG&f=1", "display_name": "developing", "link": "https://stackoverflow.com/users/11539591/developing"}, "edited": false, "score": 0, "creation_date": 1560162309, "post_id": 56524263, "comment_id": 99633103, "body": "hi !!thanks! I was wondering - what does this line of code means? product_shop_shipping_options _attributes"}, {"owner": {"reputation": 105, "user_id": 11539591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f70196f5d8b372232969cea4f7ae28?s=128&d=identicon&r=PG&f=1", "display_name": "developing", "link": "https://stackoverflow.com/users/11539591/developing"}, "edited": false, "score": 0, "creation_date": 1560162357, "post_id": 56524263, "comment_id": 99633121, "body": "and there&#39;s a gap in between product_shop_shipping_options and _attributes,  why?"}, {"owner": {"reputation": 432, "user_id": 5529252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c9b93c1cab573e87ee3080d1baa70ee?s=128&d=identicon&r=PG&f=1", "display_name": "Bodh1004", "link": "https://stackoverflow.com/users/5529252/bodh1004"}, "reply_to_user": {"reputation": 105, "user_id": 11539591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f70196f5d8b372232969cea4f7ae28?s=128&d=identicon&r=PG&f=1", "display_name": "developing", "link": "https://stackoverflow.com/users/11539591/developing"}, "edited": false, "score": 0, "creation_date": 1560162506, "post_id": 56524263, "comment_id": 99633193, "body": "@developing it was typo . It means you are adding attributes of associated model"}, {"owner": {"reputation": 432, "user_id": 5529252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c9b93c1cab573e87ee3080d1baa70ee?s=128&d=identicon&r=PG&f=1", "display_name": "Bodh1004", "link": "https://stackoverflow.com/users/5529252/bodh1004"}, "reply_to_user": {"reputation": 105, "user_id": 11539591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f70196f5d8b372232969cea4f7ae28?s=128&d=identicon&r=PG&f=1", "display_name": "developing", "link": "https://stackoverflow.com/users/11539591/developing"}, "edited": false, "score": 0, "creation_date": 1560167445, "post_id": 56524263, "comment_id": 99635339, "body": "@developing what do you exactly want to implement ?"}], "tags": [], "owner": {"reputation": 432, "user_id": 5529252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c9b93c1cab573e87ee3080d1baa70ee?s=128&d=identicon&r=PG&f=1", "display_name": "Bodh1004", "link": "https://stackoverflow.com/users/5529252/bodh1004"}, "is_accepted": false, "score": 3, "last_activity_date": 1560162391, "last_edit_date": 1560162391, "creation_date": 1560161141, "answer_id": 56524263, "question_id": 56523999, "link": "https://stackoverflow.com/questions/56523999/how-do-i-update-controller-param-to-accept-nested-attributes-with-rails/56524263#56524263", "title": "How do I update controller param to accept nested attributes with rails?", "body": "<pre><code>class Product &lt; ActiveRecord::Base\n  has_many :variants\n  accepts_nested_attributes_for :image\nend\n</code></pre>\n\n<p>Add accepts_nested_attributes_for followed by name of associated model . In my case its image . </p>\n\n<p>In controller you have to add below code :</p>\n\n<pre><code>def product_params\n  params.require(:product).permit(\n   :name, :price,\n   image_attributes: [ :id, :url, :alt, :caption ]\n )\nend\n</code></pre>\n\n<p>In your case it will become </p>\n\n<pre><code>def product_params \n    params.require(:product).permit( :sku, :name, \n    product_shop_shipping_options_attributes [ :shipping_option_id, \n   :product_region_id] )\nend\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 11539591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f70196f5d8b372232969cea4f7ae28?s=128&d=identicon&r=PG&f=1", "display_name": "developing", "link": "https://stackoverflow.com/users/11539591/developing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560162391, "creation_date": 1560160058, "last_edit_date": 1560161525, "question_id": 56523999, "link": "https://stackoverflow.com/questions/56523999/how-do-i-update-controller-param-to-accept-nested-attributes-with-rails", "title": "How do I update controller param to accept nested attributes with rails?", "body": "<p>I am working on a rails app, I was wondering how to update controller params to accept nested attributes with rails, this is the existing controller;</p>\n\n<pre><code>class Product &lt; ApplicationRecord\n\n  accepts_nested_attributes_for :product_shop_shipping_options, reject_if: proc { |attributes| attributes['shipping_option_id'].blank? }\n\n</code></pre>\n\n<pre><code> def product_params\n    params.require(:product).permit(\n      :sku, :name, :shipping_option_id, :product_region_id\n    )\n  end\n</code></pre>\n\n<p>I was wondering if I need to add a different attribute, do I do it with create or update method in controller?</p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver", "rubygems", "selenium-firefoxdriver"], "answers": [{"tags": [], "owner": {"reputation": 2906, "user_id": 4472220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd20282840e7a39d6edb51ea1c902e8d?s=128&d=identicon&r=PG", "display_name": "Peter Grainger", "link": "https://stackoverflow.com/users/4472220/peter-grainger"}, "is_accepted": false, "score": 0, "last_activity_date": 1560163753, "creation_date": 1560163753, "answer_id": 56524954, "question_id": 56523308, "link": "https://stackoverflow.com/questions/56523308/selenium-webdriver-firefox-binary-rb134in-path-cant-modify-frozen-string/56524954#56524954", "title": "selenium/webdriver/firefox/binary.rb:134:in `path&#39;: can&#39;t modify frozen String (FrozenError)", "body": "<p>You'll get that error if Firefox isn't installed, or isn't accessible on your path.</p>\n\n<p>Reinstall if you already have it.</p>\n"}, {"tags": [], "owner": {"reputation": 2367, "user_id": 85076, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/6slRi.jpg?s=128&g=1", "display_name": "Pierre-Adrien", "link": "https://stackoverflow.com/users/85076/pierre-adrien"}, "is_accepted": false, "score": 0, "last_activity_date": 1567348548, "creation_date": 1567348548, "answer_id": 57746880, "question_id": 56523308, "link": "https://stackoverflow.com/questions/56523308/selenium-webdriver-firefox-binary-rb134in-path-cant-modify-frozen-string/57746880#57746880", "title": "selenium/webdriver/firefox/binary.rb:134:in `path&#39;: can&#39;t modify frozen String (FrozenError)", "body": "<p>Also, as of <code>selenium-webdriver 3.142.3</code>, you can check the current Firefox binary path using this:</p>\n\n<pre><code>Selenium::WebDriver::Firefox::Binary.path\n</code></pre>\n\n<p>This would throw this same <code>FrozenError</code> if no binary is found, and return the binary path if a Firefox binary has been found somewhere. </p>\n\n<p>Also worth mentioning that <a href=\"https://github.com/SeleniumHQ/selenium/issues/7365\" rel=\"nofollow noreferrer\">an issue has been opened</a> in the <code>selenium-webdriver</code> repo to make the error message more explanatory, if you're interested.</p>\n"}], "owner": {"reputation": 475, "user_id": 8096299, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1571303072894045/picture?type=large", "display_name": "Kaushik Vijayakumar", "link": "https://stackoverflow.com/users/8096299/kaushik-vijayakumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 618, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1567348548, "creation_date": 1560157073, "question_id": 56523308, "link": "https://stackoverflow.com/questions/56523308/selenium-webdriver-firefox-binary-rb134in-path-cant-modify-frozen-string", "title": "selenium/webdriver/firefox/binary.rb:134:in `path&#39;: can&#39;t modify frozen String (FrozenError)", "body": "<p>I tried to run a simple google look up code in selenium and ran it on EC2 instance(Amazon Linux). I am getting an error launching Firefox and cannot understand what the error means. </p>\n\n<p>Ruby version - ruby 2.6.3p62 (2019-04-16 revision 67580) [x86_64-linux]\nselenium-webdriver version - 3.142.3</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'selenium-webdriver'\n\noptions = Selenium::WebDriver::Firefox::Options.new(args: ['-headless'])\ndriver = Selenium::WebDriver.for(:firefox, options: options)\n\ndriver.get \"http://google.com\"\n\nputs \"Page title is #{driver.title}\"\n\ndriver.quit\n</code></pre>\n\n<p>When running <code>ruby test.rb</code></p>\n\n<pre><code>Traceback (most recent call last):\n    8: from test.rb:4:in `&lt;main&gt;'\n    7: from /usr/local/rvm/gems/ruby-2.6.3/gems/selenium-webdriver-3.142.3/lib/selenium/webdriver.rb:88:in `for'\n    6: from /usr/local/rvm/gems/ruby-2.6.3/gems/selenium-webdriver-3.142.3/lib/selenium/webdriver/common/driver.rb:54:in `for'\n    5: from /usr/local/rvm/gems/ruby-2.6.3/gems/selenium-webdriver-3.142.3/lib/selenium/webdriver/firefox/driver.rb:33:in `new'\n    4: from /usr/local/rvm/gems/ruby-2.6.3/gems/selenium-webdriver-3.142.3/lib/selenium/webdriver/firefox/driver.rb:33:in `new'\n    3: from /usr/local/rvm/gems/ruby-2.6.3/gems/selenium-webdriver-3.142.3/lib/selenium/webdriver/firefox/marionette/driver.rb:38:in `initialize'\n    2: from /usr/local/rvm/gems/ruby-2.6.3/gems/selenium-webdriver-3.142.3/lib/selenium/webdriver/common/driver.rb:299:in `service_url'\n    1: from /usr/local/rvm/gems/ruby-2.6.3/gems/selenium-webdriver-3.142.3/lib/selenium/webdriver/common/service.rb:45:in `firefox'\n/usr/local/rvm/gems/ruby-2.6.3/gems/selenium-webdriver-3.142.3/lib/selenium/webdriver/firefox/binary.rb:134:in `path': can't modify frozen String (FrozenError)\n</code></pre>\n\n<p>Need some help here.</p>\n"}, {"tags": ["ruby", "selenium-chromedriver", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 2510, "user_id": 2995613, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3eb082f2910fcc8ebc7bb2f5ce5bc9ce?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2995613/daniel"}, "is_accepted": false, "score": 8, "last_activity_date": 1560152988, "creation_date": 1560152988, "answer_id": 56522500, "question_id": 56522499, "link": "https://stackoverflow.com/questions/56522499/cromedriver-driver-manage-logs-getbrowser-fails-on-chromedriver-75-0-3770-8/56522500#56522500", "title": "Cromedriver `driver.manage.logs.get(:browser)` fails on chromedriver 75.0.3770.8", "body": "<p>Chrome 75 defaults to W3C mode, which doesn't specify a way to get log access.</p>\n\n<p>The short term fix for this issue is to disable <code>w3c</code> via <code>chromeOptions</code>.</p>\n\n<pre><code>Capybara.register_driver :headless_chrome do |app|\n  capabilities = Selenium::WebDriver::Remote::Capabilities.chrome(\n    chromeOptions: { args: %w[headless window-size=1280,800], w3c: false },\n  )\n\n  Capybara::Selenium::Driver.new app,\n                                 browser: :chrome,\n                                 desired_capabilities: capabilities\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 1, "creation_date": 1560217565, "post_id": 56527224, "comment_id": 99653614, "body": "Have you actually tried this? The method <code>log</code> doesn&#39;t exist on the W3C bridge so just changing the name of the pref isn&#39;t really going to fix the OPs issue."}, {"owner": {"reputation": 9132, "user_id": 2333458, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Hy1EL.jpg?s=128&g=1", "display_name": "Alexey Subach", "link": "https://stackoverflow.com/users/2333458/alexey-subach"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1560274580, "post_id": 56527224, "comment_id": 99679841, "body": "Yes, this fixed my issue (in Java)"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1560275745, "post_id": 56527224, "comment_id": 99680411, "body": "Oh - you&#39;re using Java -- Each of the selenium language bindings is different. Your suggestion will make no difference on the ruby bindings this question is about."}], "tags": [], "owner": {"reputation": 9132, "user_id": 2333458, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Hy1EL.jpg?s=128&g=1", "display_name": "Alexey Subach", "link": "https://stackoverflow.com/users/2333458/alexey-subach"}, "is_accepted": false, "score": 4, "last_activity_date": 1560172678, "creation_date": 1560172678, "answer_id": 56527224, "question_id": 56522499, "link": "https://stackoverflow.com/questions/56522499/cromedriver-driver-manage-logs-getbrowser-fails-on-chromedriver-75-0-3770-8/56527224#56527224", "title": "Cromedriver `driver.manage.logs.get(:browser)` fails on chromedriver 75.0.3770.8", "body": "<p>As specified in the <a href=\"http://chromedriver.chromium.org/downloads\" rel=\"nofollow noreferrer\">release notes</a> for Chrome Driver 75, capability <code>loggingPrefs</code> has been renamed to <code>goog:loggingPrefs</code>, as required by W3C standard. Thus, the code setting the capabilities should be adjusted and there will be no necessity of falling back to non-w3c mode at least due to the log capturing reason.</p>\n"}, {"comments": [{"owner": {"reputation": 2215, "user_id": 1996540, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/609b69cbb09257883a4e32d7d5aff098?s=128&d=identicon&r=PG", "display_name": "ZedTuX", "link": "https://stackoverflow.com/users/1996540/zedtux"}, "edited": false, "score": 0, "creation_date": 1614808685, "post_id": 56590592, "comment_id": 117501676, "body": "Thank you, that work for me!"}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": false, "score": 2, "last_activity_date": 1560478526, "creation_date": 1560478526, "answer_id": 56590592, "question_id": 56522499, "link": "https://stackoverflow.com/questions/56522499/cromedriver-driver-manage-logs-getbrowser-fails-on-chromedriver-75-0-3770-8/56590592#56590592", "title": "Cromedriver `driver.manage.logs.get(:browser)` fails on chromedriver 75.0.3770.8", "body": "<p>As a short term fix, it seems you can monkey-patch the functionality back in (tested using Selenium-WebDriver v3.142.3):</p>\n\n<p>You will need to add/patch the method to the Chrome::Bridge:</p>\n\n<pre><code>require 'selenium-webdriver'\n\nmodule Selenium\n  module WebDriver\n    module Chrome\n      module Bridge\n        COMMANDS = remove_const(:COMMANDS).dup\n        COMMANDS[:get_log] = [:post, 'session/:session_id/log']\n        COMMANDS.freeze\n\n        def log(type)\n          data = execute :get_log, {}, {type: type.to_s}\n\n          Array(data).map do |l|\n            begin\n              LogEntry.new l.fetch('level', 'UNKNOWN'), l.fetch('timestamp'), l.fetch('message')\n            rescue KeyError\n              next\n            end\n          end\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>In your capabilities, you will need to switch to using \"goog:loggingPrefs\" instead of just \"loggingPrefs\":</p>\n\n<pre><code>caps = Selenium::WebDriver::Remote::Capabilities.chrome('goog:loggingPrefs' =&gt; {browser: 'ALL'})\ndriver = Selenium::WebDriver.for(:chrome, desired_capabilities: caps)\n\ndriver.execute_script('console.log(\"test\");')\n\nputs driver.manage.logs.get(:browser)\n#=&gt; INFO 2019-06-13 21:48:03 -0400: console-api 362:34 \"test\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 386, "user_id": 3497272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd5458a9ff6c2971a952a73c8089992?s=128&d=identicon&r=PG", "display_name": "codener", "link": "https://stackoverflow.com/users/3497272/codener"}, "edited": false, "score": 0, "creation_date": 1560839238, "post_id": 56603838, "comment_id": 99856092, "body": "Thanks for the hint! Unfortunately, Capybara 3.16+ does not work with Ruby 2.3."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 386, "user_id": 3497272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd5458a9ff6c2971a952a73c8089992?s=128&d=identicon&r=PG", "display_name": "codener", "link": "https://stackoverflow.com/users/3497272/codener"}, "edited": false, "score": 3, "creation_date": 1560843764, "post_id": 56603838, "comment_id": 99858359, "body": "@codener yeah Ruby 2.3 went end of life - time to upgrade"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 24609, "user_id": 1974224, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/rQQMq.png?s=128&g=1", "display_name": "Cristik", "link": "https://stackoverflow.com/users/1974224/cristik"}, "edited": false, "score": 0, "creation_date": 1617205590, "post_id": 56603838, "comment_id": 118240994, "body": "@Cristik I disagree with that - everyone is able to upgrade but some people determine the time/money aren&#39;t worth it to them.  If you&#39;re still running production code with Ruby 2.3 you&#39;ve made the determination that your legal liability around security issues is outweighed by the costs to upgrade and that&#39;s your right, but if you&#39;ve made that decision why would you still be wanting to run tests with modern test tool versions - it&#39;s not like you&#39;re going to actually spend the time/money to fix anything they find."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 6, "last_activity_date": 1560538885, "creation_date": 1560538885, "answer_id": 56603838, "question_id": 56522499, "link": "https://stackoverflow.com/questions/56522499/cromedriver-driver-manage-logs-getbrowser-fails-on-chromedriver-75-0-3770-8/56603838#56603838", "title": "Cromedriver `driver.manage.logs.get(:browser)` fails on chromedriver 75.0.3770.8", "body": "<p>Capybara 3.24 now works around this issue when used with chromedriver >= 75.0.3770.90 </p>\n"}, {"tags": [], "owner": {"reputation": 4471, "user_id": 1627358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2Eifd.jpg?s=128&g=1", "display_name": "Hussam Kurd", "link": "https://stackoverflow.com/users/1627358/hussam-kurd"}, "is_accepted": false, "score": 1, "last_activity_date": 1566040923, "creation_date": 1566040923, "answer_id": 57535824, "question_id": 56522499, "link": "https://stackoverflow.com/questions/56522499/cromedriver-driver-manage-logs-getbrowser-fails-on-chromedriver-75-0-3770-8/57535824#57535824", "title": "Cromedriver `driver.manage.logs.get(:browser)` fails on chromedriver 75.0.3770.8", "body": "<p>This works for me: </p>\n\n<pre><code>Capybara.register_driver :chrome do |app|\n\n  Capybara::Selenium::Driver.new(app, :browser =&gt; :chrome,   desired_capabilities: {\n      \"chromeOptions\" =&gt; {\n        w3c: false\n      },\n      'goog:loggingPrefs' =&gt; {browser: 'ALL'}\n    })  \nend\n</code></pre>\n\n<p>and in the log place</p>\n\n<pre><code>puts \"\"\nputs \"*** Browser logs:\"\nputs \"\"\n\nputs page.driver.browser.manage.logs.get(\"browser\").map { |log_entry|\n  \"[#{Time.at(log_entry.timestamp.to_i)}] [#{log_entry.level}] #{log_entry.message}\"\n}.join(\"\\n\")\n</code></pre>\n"}], "owner": {"reputation": 2510, "user_id": 2995613, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3eb082f2910fcc8ebc7bb2f5ce5bc9ce?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2995613/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2019, "favorite_count": 0, "accepted_answer_id": 56603838, "answer_count": 5, "score": 13, "last_activity_date": 1566040923, "creation_date": 1560152988, "question_id": 56522499, "link": "https://stackoverflow.com/questions/56522499/cromedriver-driver-manage-logs-getbrowser-fails-on-chromedriver-75-0-3770-8", "title": "Cromedriver `driver.manage.logs.get(:browser)` fails on chromedriver 75.0.3770.8", "body": "<p>While accessing driver.manage.logs.get(:browser) on chromedriver 75.0.3770.8 - it cause error</p>\n\n<p>undefined method `log' for # (NoMethodError)</p>\n\n<p>Works fine on 74.0.3729.6</p>\n\n<p>from: <a href=\"https://github.com/SeleniumHQ/selenium/issues/7270\" rel=\"noreferrer\">https://github.com/SeleniumHQ/selenium/issues/7270</a></p>\n"}, {"tags": ["ruby", "amazon-s3", "aws-sdk"], "answers": [{"tags": [], "owner": {"reputation": 4397, "user_id": 1436657, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/8f20L.jpg?s=128&g=1", "display_name": "sameers", "link": "https://stackoverflow.com/users/1436657/sameers"}, "is_accepted": false, "score": 0, "last_activity_date": 1560156437, "creation_date": 1560156437, "answer_id": 56523161, "question_id": 56521131, "link": "https://stackoverflow.com/questions/56521131/aws-ruby-sdk-permissions-for-download-files/56523161#56523161", "title": "AWS Ruby SDK permissions for download_files", "body": "<p>Nm. I realized what had happened - a get on a non-existent key returns a 403, rather than a 404, when the account only has GetObject privileges.</p>\n\n<p>I had assumed that regardless of the account's access privileges, it would always receive a 404 but I see that that would be a security hole relative to the policy limitation.</p>\n"}], "owner": {"reputation": 4397, "user_id": 1436657, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/8f20L.jpg?s=128&g=1", "display_name": "sameers", "link": "https://stackoverflow.com/users/1436657/sameers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560156437, "creation_date": 1560146046, "question_id": 56521131, "link": "https://stackoverflow.com/questions/56521131/aws-ruby-sdk-permissions-for-download-files", "title": "AWS Ruby SDK permissions for download_files", "body": "<p>I am using the Ruby AWS SDK v3. I can use the method <code>.content_length</code> on an instance of <a href=\"https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/S3/Object.html\" rel=\"nofollow noreferrer\"><code>Object</code></a>, but cannot use <code>download_file</code></p>\n\n<p>The IAM user whose Access Key I am using has the following policy:</p>\n\n<pre><code>{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"my_SID\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:GetObject\"\n            ],\n            \"Resource\": \"arn:aws:s3:::mybucket/*\"\n        }\n    ]\n}\n</code></pre>\n\n<p>Do I need to add an additional permission for the download to succeed? It succeeded when I had full S3 access, but I want to restrict it further.</p>\n\n<p>I also tried setting up the symmetric policy on the bucket itself, to grant this IAM user as the principal the <code>s3:GetObject</code> permission.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1560144208, "post_id": 56520737, "comment_id": 99626316, "body": "Yes, I now have strong params in place.. Thank you so much.  If only i asked this question 12 hours ago lol.  Another quick Q if you can... How is ShopProduct being found in the <code>set_shop_product</code> method where it looks for the ID when I&#39;m never passing the id?  I wonder because I changed the updated method to <code>@shop_product = ShopProduct.find(params[:id])</code> and it somehow finds the correct ID?"}, {"owner": {"reputation": 2019, "user_id": 9595653, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jNAfm9c6bRo/AAAAAAAAAAI/AAAAAAAAABA/2JGGWk6fJl8/photo.jpg?sz=128", "display_name": "Clara", "link": "https://stackoverflow.com/users/9595653/clara"}, "reply_to_user": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1560145141, "post_id": 56520737, "comment_id": 99626510, "body": "Yes, it can find it, because you&#39;re passing it via the url: <code>Started PATCH &quot;&#47;shop_products&#47;12</code> The params hash also comes from the url and if you have a closer look at it, you can see the last key value pair is a <code>&quot;id =&gt; 12</code> which stands for the shop_product_id in the url :)"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1560163021, "post_id": 56520737, "comment_id": 99633408, "body": "Ends up being because i define it in the front end... which i am removing... I have the form on a separate view from a separate controller... I was all mixed up from the millions of attempts.  Also was first time using ruby 4 (from ruby 5).. 5 uses objects..."}], "tags": [], "owner": {"reputation": 2019, "user_id": 9595653, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jNAfm9c6bRo/AAAAAAAAAAI/AAAAAAAAABA/2JGGWk6fJl8/photo.jpg?sz=128", "display_name": "Clara", "link": "https://stackoverflow.com/users/9595653/clara"}, "is_accepted": true, "score": 1, "last_activity_date": 1560142893, "creation_date": 1560142893, "answer_id": 56520737, "question_id": 56520663, "link": "https://stackoverflow.com/questions/56520663/update-isnt-taking-all-parameters-from-form-submit/56520737#56520737", "title": "Update isn&#39;t taking all parameters from form submit", "body": "<p>Your product_id is in the params hash, but you have to access it like so:\n<code>params[\"shop_product\"][\"product_id\"]</code> because it is nested under shop_product. The form_for is nesting all the form inputs in the params hash under the key <code>\"shop_product\"</code>.</p>\n\n<p>On a side note I would recommend you to work with strong params instead of passing the values from the params directly into your update method :)</p>\n"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 56520737, "answer_count": 1, "score": 0, "last_activity_date": 1560142893, "creation_date": 1560142255, "question_id": 56520663, "link": "https://stackoverflow.com/questions/56520663/update-isnt-taking-all-parameters-from-form-submit", "title": "Update isn&#39;t taking all parameters from form submit", "body": "<p>When i submit my form, I have the following:</p>\n\n<pre><code>Started PATCH \"/shop_products/12\" \n---\nINFO -- : [f51ce4b8-f181-4da5-919a-01c99c703762] Processing by ShopProductsController#update as HTML\n---\nINFO -- : [f51ce4b8-f181-4da5-919a-01c99c703762]   Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"xkByz5wY7x9ZBEcGPawvrrlsDsDSThX3mEBl09qZU7x+OEHSRvryGV1tS520hGAL3bihE1C/c1xnIoDhzocRTw==\", \"shop_product\"=&gt;{\"product_id\"=&gt;\"1\", \"store_product_id\"=&gt;\"1965852983345\", \"store_variant_id\"=&gt;\"15345629364273\", \"shop_id\"=&gt;\"1\", \"sync\"=&gt;\"true\"}, \"commit\"=&gt;\"Sync\", \"id\"=&gt;\"12\"}\n---\nDEBUG -- : [f51ce4b8-f181-4da5-919a-01c99c703762]   [1m[36mShopProduct Load (1.9ms)[0m  [1m[34mSELECT  \"shop_products\".* FROM \"shop_products\" WHERE \"shop_products\".\"id\" = $1 LIMIT $2[0m  [[\"id\", 12], [\"LIMIT\", 1]]\n---\nDEBUG -- : [f51ce4b8-f181-4da5-919a-01c99c703762]   [1m[36mShopProduct Load (3.3ms)[0m  [1m[34mSELECT  \"shop_products\".* FROM \"shop_products\" WHERE \"shop_products\".\"store_variant_id\" = $1 LIMIT $2[0m  [[\"store_variant_id\", IS NULL LIMIT $1], [\"LIMIT\", 1]]\n---\nCompleted 404 Not Found in 21ms (ActiveRecord: 8.3ms)\n---\nActiveRecord::RecordNotFound (Couldn't find Product without an ID):\n</code></pre>\n\n<p>Method:</p>\n\n<pre><code>def update\n    @shop_product = ShopProduct.find_by(store_variant_id: params[:store_variant_id])\n    @product = Product.find(params[:product_id])\n    respond_to do |format|\n      if @shop_product.update_attributes!(product_id: params[:product_id], sync: params[:sync])\n        format.html { redirect_to @shop_product, notice: 'Shop product was successfully updated.' }\n        format.json { render :show, status: :ok, location: @shop_product }\n      else\n        format.html { render :edit }\n        format.json { render json: @shop_product.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n</code></pre>\n\n<p>The form is coming from a separate controller so it's not coming directly from <code>edit/:id</code>.  The record is identified on the front-end from a loop/</p>\n\n<pre><code>&lt;% @in_store_variants.each do |variant| %&gt;\n    &lt;% if @shop_products.find_by(store_variant_id: variant.id)  %&gt;\n      &lt;% shop_product = @shop_products.find_by(store_variant_id: variant.id)  %&gt;\n    &lt;% end %&gt;\n&lt;%= form_for shop_product do |f| %&gt;\n   &lt;%= f.collection_select :product_id, @products, :id, :sku %&gt;\n   &lt;%= f.hidden_field :store_product_id, value: variant.product_id %&gt;\n   &lt;%= f.hidden_field :store_variant_id, value: variant.id %&gt;\n   &lt;%= f.hidden_field :shop_id, value: @shop.id %&gt;\n   &lt;%= f.hidden_field :sync, value: true %&gt;\n   &lt;%= f.submit \"Sync\" %&gt;\n&lt;% end %&gt;\n.....\n&lt;% end %&gt;\n</code></pre>\n\n<p>Question:</p>\n\n<p>Why is the <code>product_id</code> not being passed to the update method in the controler controller when it's clearly being passed on from the form?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "bcrypt"], "comments": [{"owner": {"reputation": 520, "user_id": 6507755, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/IUwxM.png?s=128&g=1", "display_name": "2017kamb", "link": "https://stackoverflow.com/users/6507755/2017kamb"}, "edited": false, "score": 0, "creation_date": 1560138359, "post_id": 56520124, "comment_id": 99625338, "body": "Did you try this one solutions, <a href=\"https://stackoverflow.com/questions/35098432/unable-to-load-application-incompatible-library-version?noredirect=1&amp;lq=1\" title=\"unable to load application incompatible library version\">stackoverflow.com/questions/35098432/&hellip;</a>"}, {"owner": {"reputation": 848, "user_id": 11249670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f29532e75e13b5f3b631012229f22829?s=128&d=identicon&r=PG&f=1", "display_name": "reesaspieces", "link": "https://stackoverflow.com/users/11249670/reesaspieces"}, "reply_to_user": {"reputation": 520, "user_id": 6507755, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/IUwxM.png?s=128&g=1", "display_name": "2017kamb", "link": "https://stackoverflow.com/users/6507755/2017kamb"}, "edited": false, "score": 0, "creation_date": 1560138421, "post_id": 56520124, "comment_id": 99625349, "body": "Yes, that&#39;s exactly the question I linked &gt; Uninstalling and installing bcrypt in my system (according to this <a href=\"https://stackoverflow.com/a/35099301/11249670\">suggestion</a>)"}, {"owner": {"reputation": 520, "user_id": 6507755, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/IUwxM.png?s=128&g=1", "display_name": "2017kamb", "link": "https://stackoverflow.com/users/6507755/2017kamb"}, "edited": false, "score": 0, "creation_date": 1560138521, "post_id": 56520124, "comment_id": 99625370, "body": "Not install bcrypt manually after uninstalling just do, bundle install"}, {"owner": {"reputation": 848, "user_id": 11249670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f29532e75e13b5f3b631012229f22829?s=128&d=identicon&r=PG&f=1", "display_name": "reesaspieces", "link": "https://stackoverflow.com/users/11249670/reesaspieces"}, "reply_to_user": {"reputation": 520, "user_id": 6507755, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/IUwxM.png?s=128&g=1", "display_name": "2017kamb", "link": "https://stackoverflow.com/users/6507755/2017kamb"}, "edited": false, "score": 0, "creation_date": 1560138666, "post_id": 56520124, "comment_id": 99625386, "body": "Do you mean 1. <code>gem uninstall bcrypt</code>, then 2. <code>bundle install</code>? Tried that as well, same results."}], "answers": [{"tags": [], "owner": {"reputation": 848, "user_id": 11249670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f29532e75e13b5f3b631012229f22829?s=128&d=identicon&r=PG&f=1", "display_name": "reesaspieces", "link": "https://stackoverflow.com/users/11249670/reesaspieces"}, "is_accepted": true, "score": 2, "last_activity_date": 1591068192, "last_edit_date": 1591068192, "creation_date": 1560150901, "answer_id": 56522059, "question_id": 56520124, "link": "https://stackoverflow.com/questions/56520124/rails-load-error-incompatible-library-version-for-bcrypt/56522059#56522059", "title": "Rails Load Error - incompatible library version for bcrypt", "body": "<p><strong>[RESOLVED]</strong></p>\n\n<p><strong>[Solution 1]</strong> I needed to uninstall/reinstall the gem in the <code>vendor/bundle</code> folder, instead of doing <code>gem uninstall</code> and <code>gem install</code>.</p>\n\n<p>Here were the steps involved:</p>\n\n<ol>\n<li><p>Check where your gem is saved using <code>otool -L</code> (mine was saved here: <code>[project root]/vendor/bundle/ruby/2.6.0/gems/bcrypt-3.1.12/lib/bcrypt_ext.bundle</code>)</p></li>\n<li><p>Remove everything in the <code>bcrypt-3.1.12</code> folder with <code>rm -rf</code>.</p></li>\n<li><p><code>bundle install --force --path vendor/bundle</code> to reinstall the <code>bcrypt-3.1.12</code> gem.</p></li>\n</ol>\n\n<p><strong>[Solution 2]</strong> What I ultimately ended up doing was to update <code>bcrypt</code>'s version with <code>bundle update bcrypt</code>. Guessing this update installed the gem cleanly in <code>vendor/bundle</code>, because all my <code>rails</code> commands started working again.</p>\n\n<pre><code>bundle update bcrypt\nUsing bcrypt 3.1.13 (was 3.1.12)\n</code></pre>\n\n<p>Hope these tips help anyone who runs into this in the future!</p>\n"}], "owner": {"reputation": 848, "user_id": 11249670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f29532e75e13b5f3b631012229f22829?s=128&d=identicon&r=PG&f=1", "display_name": "reesaspieces", "link": "https://stackoverflow.com/users/11249670/reesaspieces"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 806, "favorite_count": 0, "accepted_answer_id": 56522059, "answer_count": 1, "score": 0, "last_activity_date": 1591068192, "creation_date": 1560136950, "last_edit_date": 1560137400, "question_id": 56520124, "link": "https://stackoverflow.com/questions/56520124/rails-load-error-incompatible-library-version-for-bcrypt", "title": "Rails Load Error - incompatible library version for bcrypt", "body": "<p>My <code>rails s</code> and <code>rails c</code> has suddenly started refusing to boot up with the error below. I don't recall updating or deleting any gems. Any help in fixing the situation is greatly appreciated.</p>\n\n<p><code>incompatible library version - /Users/[me]/projects/[app]/vendor/bundle/ruby/2.6.0/gems/bcrypt-3.1.12/lib/bcrypt_ext.bundle (LoadError)</code></p>\n\n<p><code>bcrypt</code> is not an explicitly required gem in our project, but it's included in <code>Gemfile.lock</code> because it's a dependency: <code>bcrypt (3.1.12)</code></p>\n\n<p>So far I've tried these, but I get the same error:</p>\n\n<ol>\n<li>Uninstalling and installing <code>bcrypt</code> in my system (according to this <a href=\"https://stackoverflow.com/a/35099301/11249670\">suggestion</a>)</li>\n</ol>\n\n<pre><code>gem uninstall bcrypt -v 3.1.12\n\nYou have requested to uninstall the gem:\n        bcrypt-3.1.12\n\nsorcery-0.14.0 depends on bcrypt (~&gt; 3.1)\nIf you remove this gem, these dependencies will not be met.\nContinue with Uninstall? [yN]  y\nSuccessfully uninstalled bcrypt-3.1.12\n</code></pre>\n\n<pre><code>gem install bcrypt -v 3.1.12\nSuccessfully installed bcrypt-3.1.12\n</code></pre>\n\n<ol start=\"2\">\n<li><code>gem pristine --all</code></li>\n</ol>\n\n<p>Here are the results of what I get if I check the gem versions:</p>\n\n<ol>\n<li><code>gem info bcrypt</code></li>\n</ol>\n\n<pre><code>*** LOCAL GEMS ***\nbcrypt (3.1.12)\n    Author: Coda Hale\n    Homepage: https://github.com/codahale/bcrypt-ruby\n    License: MIT\n    Installed at: /Users/[me]/.rvm/gems/ruby-2.6.2\n\n    OpenBSD's bcrypt() password hashing algorithm.\n</code></pre>\n\n<ol start=\"2\">\n<li><code>bundle info bcrypt</code></li>\n</ol>\n\n<pre><code>* bcrypt (3.1.12)\n        Summary: OpenBSD's bcrypt() password hashing algorithm.\n        Homepage: https://github.com/codahale/bcrypt-ruby\n        Path: /Users/[me]/projects/[app]/vendor/bundle/ruby/2.6.0/gems/bcrypt-3.1.12\n</code></pre>\n"}, {"tags": ["ruby", "libgosu"], "answers": [{"tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": true, "score": 1, "last_activity_date": 1560134793, "creation_date": 1560134793, "answer_id": 56519939, "question_id": 56519855, "link": "https://stackoverflow.com/questions/56519855/what-does-include-means-in-gosu/56519939#56519939", "title": "What does include means in gosu", "body": "<p>Including a module in a given context  makes the methods defined in that module available in that context.</p>\n\n<p>In this case, you're making the methods defined the <code>Gosu</code> module available in the current context.</p>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Module.html#method-i-include\" rel=\"nofollow noreferrer\"><code>Module#include</code></a>.</p>\n\n<p>For example, including <code>Test</code> causes <code>foo</code> to be added to the current context, so that <code>foo</code> can be invoked:</p>\n\n<pre><code>module Test\n  def foo\n    \"bar\"\n  end\nend\n\ninclude Test\n\nfoo # \"bar\"\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 11509885, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rcII9fmHi-Y/AAAAAAAAAAI/AAAAAAAAQKM/MgjGSbaFWaM/photo.jpg?sz=128", "display_name": "UrAverageCoder", "link": "https://stackoverflow.com/users/11509885/uraveragecoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 56519939, "answer_count": 1, "score": 0, "last_activity_date": 1613643333, "creation_date": 1560133615, "last_edit_date": 1613643333, "question_id": 56519855, "link": "https://stackoverflow.com/questions/56519855/what-does-include-means-in-gosu", "title": "What does include means in gosu", "body": "<p>To use gosu in ruby program, we have to called out gosu.</p>\n\n<pre><code>require \"gosu\"\n</code></pre>\n\n<p>But what does include means in a gosu program.</p>\n\n<pre><code>require \"gosu\"\ninclude Gosu\n</code></pre>\n\n<p>what is the purpose of <code>include Gosu</code> in the program and what does it do.</p>\n"}, {"tags": ["ruby", "ruby-2.7"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1560134838, "post_id": 56519729, "comment_id": 99624848, "body": "A description of the method, together with an example of how it can be used to advantage, is given <a href=\"https://dev.to/hanachin/ruby-27-new-feature-method-reference-operator-38l2\" rel=\"nofollow noreferrer\">here</a>. That was at the top of the list when I googled &quot;ruby method reference v2.70&quot;. For general questions like these, googling is often more effective than asking SO for an explanation."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1560139987, "post_id": 56519729, "comment_id": 99625546, "body": "\u201cI found that article to be unclear\u201d is a statement, not a question, and SO is all about questions. Also, if you did not find the shortcut for <code>#method</code> clearly saving keystrokes in stuff like <code>[1,42].reject(&amp;42.:==)</code> self-explaining, I doubt we could be of any help here."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1560139998, "post_id": 56519729, "comment_id": 99625548, "body": "I looked further into my google results and found nothing helpful other than the article containing the example you provided. You want more and I&#39;m sure other readers, myself included, would like to know more about possible uses of the method, so let&#39;s hope you get at least one good answer."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1560140072, "post_id": 56519729, "comment_id": 99625558, "body": "@CarySwoveland ruby updates nowadays bring more syntax sugar. <code>#itself</code>, safe navigation <code>&amp;.</code>, now this. It\u2019s all about saving keystrokes; that simple. Just new alias [with a same not overridable semantics as <code>__call__</code>] for <code>#method</code>."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1560177794, "post_id": 56519729, "comment_id": 99640487, "body": "@AlekseiMatiushkin but let&#39;s be honest how in love are you with this syntactical sugar. :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1560177880, "post_id": 56519729, "comment_id": 99640532, "body": "@engineersmnky sure I must have been if I still was doing any ruby :)"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1560177964, "post_id": 56521819, "comment_id": 99640571, "body": "There is a subtle difference though: one cannot override <code>#:</code>, unlike <code>#method</code>."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 5, "last_activity_date": 1560149808, "creation_date": 1560149808, "answer_id": 56521819, "question_id": 56519729, "link": "https://stackoverflow.com/questions/56519729/how-does-the-method-reference-operator-work/56521819#56521819", "title": "How does the method reference operator .: work?", "body": "<p>The method reference operator <code>.:</code> is simply syntactic sugar for <a href=\"https://ruby-doc.org/core/Object.html#method-i-method\" rel=\"noreferrer\"><code>Object#method</code></a> just like the function call operator <code>.()</code>. is simply syntactic sugar for <code>#call</code>.</p>\n\n<p>Thus, the use cases for the method reference operator are the exact same ones as the use cases for the <code>Object#method</code> method \u2026 just with less keystrokes.</p>\n"}], "owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 56521819, "answer_count": 1, "score": 5, "last_activity_date": 1598907126, "creation_date": 1560131991, "last_edit_date": 1598907126, "question_id": 56519729, "link": "https://stackoverflow.com/questions/56519729/how-does-the-method-reference-operator-work", "title": "How does the method reference operator .: work?", "body": "<p>This question is not very useful because <a href=\"https://bugs.ruby-lang.org/issues/16275\" rel=\"nofollow noreferrer\">the method reference operator was removed from Ruby 2.7.0</a> before release. This question is left up for historical reasons.</p>\n<p><a href=\"https://www.ruby-lang.org/en/news/2019/05/30/ruby-2-7-0-preview1-released/\" rel=\"nofollow noreferrer\">Ruby 2.7.0-preview1</a> has introduced the method reference operator <code>.:</code> as an experimental feature. (more <a href=\"https://bugs.ruby-lang.org/issues/12125\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://bugs.ruby-lang.org/issues/13581\" rel=\"nofollow noreferrer\">here</a>).</p>\n<p>There are some abstract examples available for how to use this new operator:</p>\n<pre><code>method = 42.:to_s\n =&gt; #&lt;Method: Integer#to_s&gt;\nmethod.receiver\n =&gt; 42\nmethod.name\n =&gt; :to_s\nmethod.call\n =&gt; &quot;42&quot;\n</code></pre>\n<p>and:</p>\n<pre><code>method = File.:read\n =&gt; #&lt;Method: File.read&gt;\nmethod.call('/Users/foo/.zshrc')\n =&gt; &quot;export ZSH=$HOME/.zsh&quot;\n</code></pre>\n<p>These abstract examples are not representative of real-world implementations. What is the plain-English explanation of the purpose and use of the method reference operator, defined in terms of practical and real-world examples?</p>\n"}, {"tags": ["ruby", "ruby-hash"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1560141156, "post_id": 56520327, "comment_id": 99625723, "body": "Good answer. Consider pointing out that <code>&#47;^*[&quot;apple&quot;, &quot;cherry&quot;]*&#47;.match?(string)</code> is the same as <code>&#47;^&#47;.match?(string)</code>, which of course is <code>true</code> for any <code>string</code>."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 2, "last_activity_date": 1560138897, "creation_date": 1560138897, "answer_id": 56520327, "question_id": 56519539, "link": "https://stackoverflow.com/questions/56519539/ruby-hash-only-return-true/56520327#56520327", "title": "Ruby hash only return TRUE", "body": "<p>Your <code>v</code> variablere here is actually an <em>array of words</em>.</p>\n\n<p>So when you say:</p>\n\n<pre><code>if /^*#{v.to_s}*/.match? str\n</code></pre>\n\n<p>that's actually doing something like this:</p>\n\n<pre><code>if /^*[\"apple\", \"cherry\"]*/.match?(string)\n</code></pre>\n\n<p>Which is not what you need.</p>\n\n<p>If you want to see if <em>any</em> of the words match, you can use <a href=\"https://apidock.com/ruby/Enumerable/any%3F\" rel=\"nofollow noreferrer\">Array#any?</a>:</p>\n\n<pre><code>list = {\n    \"red\" =&gt; [\"apple\", \"cherry\"],\n    \"blue\" =&gt; [\"sky\", \"cloud\"],\n    \"white\" =&gt; [\"paper\"]\n}\n\nstr = \"testString\"\n\nlist.each do |key, words|\n  puts \"string: #{str}\"\n  puts \"value: #{words}\"\n  puts words.any? { |word| /^*#{word}*/.match? str.to_s }\nend\n</code></pre>\n\n<p>which prints:</p>\n\n<pre><code>string: testString\nvalue: [\"apple\", \"cherry\"]\nfalse\nstring: testString\nvalue: [\"sky\", \"cloud\"]\nfalse\nstring: testString\nvalue: [\"paper\"]\nfalse\n</code></pre>\n\n<p>Note, it's not really clear to me what the expected output is, but if you want to print something other than true/false, you can do so like:</p>\n\n<pre><code>if words.any? { |word| /^*#{word}*/.match? str.to_s }\n  puts \"its a match\"\nelse\n  puts \"its not a match\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1560153880, "creation_date": 1560153880, "answer_id": 56522679, "question_id": 56519539, "link": "https://stackoverflow.com/questions/56519539/ruby-hash-only-return-true/56522679#56522679", "title": "Ruby hash only return TRUE", "body": "<p>Without regexps, since the values are Arrays, you could do a nested loop:</p>\n\n<pre><code>list.each do |color, words| # loops through keys and values\n    puts \"\\nLooking for #{str} in #{color}\"\n    words.each do |word| # loops through the elements of values\n      found = (word == str)\n      puts \"\\t- #{word} is #{found}\"\n    end\n    found_any = words.include? str\n    puts \"\\tFound any match? #{found_any}\"\nend\n</code></pre>\n\n<p>Which prints out</p>\n\n<pre><code># Looking for apple in red\n#   - apple is true\n#   - cherry is false\n#   Found any match? true\n# \n# Looking for apple in blue\n#   - sky is false\n#   - cloud is false\n#   Found any match? false\n# \n# Looking for apple in white\n#   - paper is false\n#   Found any match? false\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9849543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uri1b.jpg?s=128&g=1", "display_name": "sepw", "link": "https://stackoverflow.com/users/9849543/sepw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 56520327, "answer_count": 2, "score": 0, "last_activity_date": 1560153880, "creation_date": 1560129171, "question_id": 56519539, "link": "https://stackoverflow.com/questions/56519539/ruby-hash-only-return-true", "title": "Ruby hash only return TRUE", "body": "<p>If string any of the Value matches, I want to output the value</p>\n\n<p>Code:</p>\n\n<pre><code>list = {\n    \"red\" =&gt; [\"apple\", \"cherry\"],\n    \"blue\" =&gt; [\"sky\", \"cloud\"],\n    \"white\" =&gt; [\"paper\"]\n}\n\nstr = \"testString\"\n\nlist.each do |k, v|\n    puts \"string: #{str}\"\n    puts \"value: #{v}\"\n    puts /^*#{v}*/.match? str.to_s\nend\n</code></pre>\n\n<p>I expect the output is false because nothing matches</p>\n\n<p>but the actual output is all true..</p>\n\n<pre><code>string: testString\nvalue: String\ntrue\nstring: testString\nvalue: String\ntrue\nstring: testString\nvalue: String\ntrue\n</code></pre>\n\n<p>If \"testString\" matches any of the \"Value\"</p>\n\n<p>how can print the key of value?</p>\n\n<p>The code below is my wrong code.</p>\n\n<pre><code>list.each do |k, v|\n    puts \"string: #{str}\"\n    puts \"value: #{v}\"\n    if /^*#{v.to_s}*/.match? str\n        puts \"key of value is : #{k}\"\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby", "variable-assignment"], "answers": [{"tags": [], "owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "is_accepted": true, "score": 5, "last_activity_date": 1560125994, "creation_date": 1560125994, "answer_id": 56519294, "question_id": 56518433, "link": "https://stackoverflow.com/questions/56518433/why-does-ruby-define-variables-even-if-it-never-executes-the-variable-assignment/56519294#56519294", "title": "Why does ruby define variables even if it never executes the variable assignment code?", "body": "<p>Some of the <a href=\"https://docs.ruby-lang.org/en/2.6.0/syntax/assignment_rdoc.html#label-Local+Variables+and+Methods\" rel=\"noreferrer\">docs</a> explain how variables are created; the explanation as I understand it is that's just how the parser works:</p>\n\n<blockquote>\n  <p>The local variable is created when the parser encounters the assignment, not when the assignment occurs:</p>\n</blockquote>\n\n<pre><code>a = 0 if false # does not assign to a\np local_variables # prints [:a]\np a # prints nil\n</code></pre>\n\n<p>You can see other examples of this:</p>\n\n<pre><code>b = true if false # b is nil\n\"test\" || c = true # c is nil\n</code></pre>\n\n<p>And others it doesn't get assigned:</p>\n\n<pre><code>puts d if false # d generates a NameError\n</code></pre>\n"}], "owner": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "accepted_answer_id": 56519294, "answer_count": 1, "score": 3, "last_activity_date": 1560125994, "creation_date": 1560115076, "question_id": 56518433, "link": "https://stackoverflow.com/questions/56518433/why-does-ruby-define-variables-even-if-it-never-executes-the-variable-assignment", "title": "Why does ruby define variables even if it never executes the variable assignment code?", "body": "<p>Given the following code:</p>\n\n<pre><code>a = true # let's assign `a` a value\n\n# and let's test if calling `b`, an unassigned variable, throws an error\nbegin\n  puts \"The value of b is: #{b.inspect}\"\nrescue NameError =&gt; e\n  puts \"Caught an error: #{e}\"\nend\n\na || b = true # the assignment should never be executed because `a` is `true`\n\nputs \"The value of b is: #{b.inspect}\" # will calling `b` still raise an error?\n</code></pre>\n\n<p>We get the following result:</p>\n\n<pre><code>Caught an error: undefined local variable or method `b' for main:Object\nThe value of b is: nil\n</code></pre>\n\n<p>Even though we expected calling <code>b</code> to raise an error the second time, we see that <code>b</code> is now, in fact, <code>nil</code>.</p>\n\n<p>Why is that? Why does <code>b</code> get assigned <code>nil</code>? Since the <code>||</code> never reached the assignment, I would expect <code>b</code> to remain undefined. How can it be defined, but not assigned a value? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5.2"], "answers": [{"comments": [{"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1560166516, "post_id": 56519967, "comment_id": 99634960, "body": "Why do I need the &amp; in &amp;@block?"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 2, "creation_date": 1560170302, "post_id": 56519967, "comment_id": 99636723, "body": "<code>instance_eval</code> expects a block argument, not a regular positional argument: <a href=\"https://ruby-doc.org/core-2.6.3/BasicObject.html#method-i-instance_eval\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.6.3/BasicObject.html#method-i-instance_e&zwnj;&#8203;val</a>. It&#39;s the difference between a positional argument, <code>def foo(x)</code>, and a block argument, <code>def bar(&amp;block)</code>. You would invoke <code>foo(x)</code> or <code>block(&amp;x)</code> to pass a proc in <code>x</code> to either method."}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": true, "score": 2, "last_activity_date": 1560135136, "creation_date": 1560135136, "answer_id": 56519967, "question_id": 56518290, "link": "https://stackoverflow.com/questions/56518290/undefined-local-variable-or-method-from-block-when-calling-instance-method/56519967#56519967", "title": "undefined local variable or method from &amp;block when calling instance method", "body": "<p>The block isn't part of <code>MyClass</code>, it has its own <code>self</code> which does not have a <code>my_method_to_call_from_block</code> method. Using <code>@a.call</code> from inside a method of <code>MyClass</code> is no different that calling the block <em>anywhere else</em>.</p>\n\n<p>If you want the block to be executed with <code>self</code> set to your instance of <code>MyClass</code>, you need <code>instance_eval</code>:</p>\n\n<pre><code>def method_missing(m, *args, &amp;block)\n   instance_eval &amp;@a\nend\n</code></pre>\n\n<p>Consider the difference:</p>\n\n<pre><code>class MyClass\n  def initialize(&amp;block)\n      @block = block\n   end\n\n  def default_self\n    @block.call\n  end\n\n  def myclass_self\n    instance_eval &amp;@block\n  end\nend\n\n\na = MyClass.new do\n  p self\nend\n\na.default_self # main\n\na.myclass_self # &lt;MyClass:0x00007f8da68da348 @block=#&lt;Proc:0x00007f8da68da320@test.rb:16&gt;&gt;\n</code></pre>\n"}], "owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 979, "favorite_count": 0, "accepted_answer_id": 56519967, "answer_count": 1, "score": 1, "last_activity_date": 1560135136, "creation_date": 1560113476, "last_edit_date": 1560128453, "question_id": 56518290, "link": "https://stackoverflow.com/questions/56518290/undefined-local-variable-or-method-from-block-when-calling-instance-method", "title": "undefined local variable or method from &amp;block when calling instance method", "body": "<p>I am getting a <code>undefined local variable or method</code> error.</p>\n\n<pre><code>class MyClass\n  def initialize(my_value, &amp;if_undefine_method)\n      @my_value = my_value\n      @a = if_undefine_method\n   end\n\n  def method_missing(m, *args, &amp;block)\n     @a.call\n  end\n\n  def my_method_to_call_from_block\n     'HELLO'\n  end\nend\n</code></pre>\n\n<hr>\n\n<pre><code>a = MyClass.new(\"some_value\") do\n     my_method_to_call_from_block\nend\n</code></pre>\n\n<p>When I call a missing method:</p>\n\n<pre><code>a.a_method_that_does_not_exist\n</code></pre>\n\n<p>the method_missing is called, but I get an error:</p>\n\n<blockquote>\n  <p>Traceback (most recent call last):\n          3: from (irb):17\n          2: from lib/myruby.rb:22:in <code>method_missing'\n          1: from (irb):16:in</code>block in irb_binding' NameError (undefined local variable or method `my_method_to_call_from_block' for\n  main:Object)</p>\n</blockquote>\n\n<p>How do I reference an instance method from the block I pass, so I prevent the error?  </p>\n"}, {"tags": ["arrays", "ruby", "string"], "answers": [{"comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1560112874, "post_id": 56518206, "comment_id": 99621610, "body": "This is not the expected output, you see in OP&#39;s post it&#39;s <code>mangos, and dragon fruits</code>. I think you need to special case when length=2 (just join by &quot;and&quot; without the comma) and have the &#39;else&#39; case join by &quot;, and&quot;"}, {"owner": {"reputation": 741, "user_id": 464152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9de7b60b21fbff8ef111ec7b827de984?s=128&d=identicon&r=PG", "display_name": "joel1di1", "link": "https://stackoverflow.com/users/464152/joel1di1"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1560112952, "post_id": 56518206, "comment_id": 99621623, "body": "additional edge cases you may want to handle: 1) non array argument like nil or single value, use the <code>array = [*array]</code> notation 2) array of non string, change for array[0],to_s in the <code>when 1</code> block"}, {"owner": {"reputation": 741, "user_id": 464152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9de7b60b21fbff8ef111ec7b827de984?s=128&d=identicon&r=PG", "display_name": "joel1di1", "link": "https://stackoverflow.com/users/464152/joel1di1"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1560113227, "post_id": 56518206, "comment_id": 99621669, "body": "tx max, didn&#39;t notice that"}, {"owner": {"reputation": 741, "user_id": 464152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9de7b60b21fbff8ef111ec7b827de984?s=128&d=identicon&r=PG", "display_name": "joel1di1", "link": "https://stackoverflow.com/users/464152/joel1di1"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1560113795, "post_id": 56518206, "comment_id": 99621753, "body": "Changed with another versio. But the use of a copy is useless since I&#39;d also used the array = [*array] that already made a copy."}], "tags": [], "owner": {"reputation": 741, "user_id": 464152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9de7b60b21fbff8ef111ec7b827de984?s=128&d=identicon&r=PG", "display_name": "joel1di1", "link": "https://stackoverflow.com/users/464152/joel1di1"}, "is_accepted": false, "score": 0, "last_activity_date": 1560113601, "last_edit_date": 1560113601, "creation_date": 1560112637, "answer_id": 56518206, "question_id": 56518068, "link": "https://stackoverflow.com/questions/56518068/how-to-turn-an-array-of-strings-into-a-list-with-an-oxford-comma-using-array-met/56518206#56518206", "title": "How to turn an array of strings into a list with an oxford comma using array methods in Ruby", "body": "<p>EDIT with max comments:</p>\n\n<p>You can do that:</p>\n\n<pre><code>def oxford_comma(array)\n  array = [*array]\n  case array.size\n  when 0\n    ''\n  when 1\n    array[0].to_s\n  when 2\n    array.join(' and ')\n  else\n    array_copy = array\n    array_copy[-1] = \"and #{array_copy[-1]}\"\n    array_copy.join(', ')\n  end\nend\n</code></pre>\n\n<p>The case when is to handle edge cases for empty array, single value array and double values array.\nOtherwise, you change the last item to add the <code>and</code> then join everything  with comma.\nUse a copy of the array to be non destructive.</p>\n\n<p><a href=\"https://i.stack.imgur.com/nkKUr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nkKUr.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 143, "user_id": 10559334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/01GgL.jpg?s=128&g=1", "display_name": "Amanda Treutler", "link": "https://stackoverflow.com/users/10559334/amanda-treutler"}, "edited": false, "score": 0, "creation_date": 1560115547, "post_id": 56518434, "comment_id": 99622078, "body": "Thank you! This way makes sense to me. I&#39;m not quite sure how this line works: <code>list[-1] = &quot;and &quot; + list[-1]</code>   But that&#39;s okay! Thanks!"}, {"owner": {"reputation": 332, "user_id": 5238822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23aeccb480cb323503ba983f61598e17?s=128&d=identicon&r=PG", "display_name": "Jigarius", "link": "https://stackoverflow.com/users/5238822/jigarius"}, "reply_to_user": {"reputation": 143, "user_id": 10559334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/01GgL.jpg?s=128&g=1", "display_name": "Amanda Treutler", "link": "https://stackoverflow.com/users/10559334/amanda-treutler"}, "edited": false, "score": 0, "creation_date": 1609979844, "post_id": 56518434, "comment_id": 115992567, "body": "To answer your question, @AmandaTreutler, <code>list[-1]</code> refers to the last item. So, the code sets the last item as <code>&quot;and &quot; + last_item</code>. After that line, the last item becomes: ` and ITEM`."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": true, "score": 2, "last_activity_date": 1560115081, "creation_date": 1560115081, "answer_id": 56518434, "question_id": 56518068, "link": "https://stackoverflow.com/questions/56518068/how-to-turn-an-array-of-strings-into-a-list-with-an-oxford-comma-using-array-met/56518434#56518434", "title": "How to turn an array of strings into a list with an oxford comma using array methods in Ruby", "body": "<p>When you have just one element in the array, <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-join\" rel=\"nofollow noreferrer\">Array#join</a> returns the element itself:</p>\n\n<pre><code>['a'].join(' and ') #=&gt; \"a\"\n</code></pre>\n\n<p>So, you could simplify your code prepending <code>\"and \"</code> to the last element when list size is 3 or more or returning <code>.join(' and ')</code> if less than 3 elements:</p>\n\n<pre><code>def oxford_comma(list)\n  return list.join(' and ') if list.size &lt; 3\n  list[-1] = \"and \" + list[-1]\n  list.join(', ')\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1560143820, "creation_date": 1560143820, "answer_id": 56520840, "question_id": 56518068, "link": "https://stackoverflow.com/questions/56518068/how-to-turn-an-array-of-strings-into-a-list-with-an-oxford-comma-using-array-met/56520840#56520840", "title": "How to turn an array of strings into a list with an oxford comma using array methods in Ruby", "body": "<p>For readability, I suggest a straightforward solution.</p>\n\n<pre><code>def oxford_comma(arr)\n  case arr.size\n  when 0\n    \"\"\n  when 1\n    arr.first\n  when 2\n    arr.join(' and ')\n  else\n    [arr[0..-2].join(', '), arr.last].join(', and ')\n  end\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>oxford_comma [\"blue\", \"green\", \"pink\", \"white\"]\n  #=&gt; \"blue, green, pink and white\" \noxford_comma [\"blue\", \"green\"]\n  #=&gt; \"blue and green\" \noxford_comma [\"blue\"]\n  #=&gt; \"blue\" \noxford_comma []\n  #=&gt; \"\" \n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 10559334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/01GgL.jpg?s=128&g=1", "display_name": "Amanda Treutler", "link": "https://stackoverflow.com/users/10559334/amanda-treutler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 755, "favorite_count": 0, "accepted_answer_id": 56518434, "answer_count": 3, "score": 0, "last_activity_date": 1560143820, "creation_date": 1560111333, "question_id": 56518068, "link": "https://stackoverflow.com/questions/56518068/how-to-turn-an-array-of-strings-into-a-list-with-an-oxford-comma-using-array-met", "title": "How to turn an array of strings into a list with an oxford comma using array methods in Ruby", "body": "<p>This is for a homework problem, so I tried to work through it as much as I could before coming here for help. I've got it 95% solved, I just can't figure out the syntax of the last bit or what method I should be using if it's different from what I'm doing now. I can't find any solution to this online that isn't actually my classmates' answers and I'm avoiding clicking on those to see how they completed the problem.</p>\n\n<p>I can return the string without formatting if it only has one element, with only the word 'and' when there are two elements, and I can add commas and the word 'and' when there are more than three elements. However, I can't seem to skip adding the last comma when the array has more than three elements.</p>\n\n<pre><code>def oxford_comma(array)\n    if array.length == 2\n        array.join(\" and \")\n    elsif array.length &gt; 2\n        array.insert(-2, \"and\")\n        array[0..-1].join(\", \")\n    else\n        array.join\n    end\nend\n</code></pre>\n\n<p>Here's the error message I'm getting:</p>\n\n<pre><code>         Failure/Error: expect(oxford_comma([\"kiwi\", \"durian\", \"starfruit\", \"mangos\", \"dragon fruits\"])).to eq(\"kiwi, durian, starfruit, mangos, and dragon fruits\")\n\n   expected: \"kiwi, durian, starfruit, mangos, and dragon fruits\"\n        got: \"kiwi, durian, starfruit, mangos, and, dragon fruits\"\n\n   (compared using ==)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-ec2", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 2019, "user_id": 9595653, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jNAfm9c6bRo/AAAAAAAAAAI/AAAAAAAAABA/2JGGWk6fJl8/photo.jpg?sz=128", "display_name": "Clara", "link": "https://stackoverflow.com/users/9595653/clara"}, "edited": false, "score": 0, "creation_date": 1560105282, "post_id": 56515944, "comment_id": 99620138, "body": "Did you migrate your database in production?"}, {"owner": {"reputation": 1, "user_id": 11621997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/161034c832406b30897f4fd3da2708ca?s=128&d=identicon&r=PG&f=1", "display_name": "land", "link": "https://stackoverflow.com/users/11621997/land"}, "reply_to_user": {"reputation": 2019, "user_id": 9595653, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jNAfm9c6bRo/AAAAAAAAAAI/AAAAAAAAABA/2JGGWk6fJl8/photo.jpg?sz=128", "display_name": "Clara", "link": "https://stackoverflow.com/users/9595653/clara"}, "edited": false, "score": 0, "creation_date": 1560105707, "post_id": 56515944, "comment_id": 99620232, "body": "Yes, I migrated"}, {"owner": {"reputation": 2000, "user_id": 952740, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d758ce8171d8e74b9c5f5a2e701f1b9b?s=128&d=identicon&r=PG", "display_name": "Nick M", "link": "https://stackoverflow.com/users/952740/nick-m"}, "edited": false, "score": 0, "creation_date": 1560112769, "post_id": 56515944, "comment_id": 99621587, "body": "Welcome to SO, land! are you sure application loads properly?"}, {"owner": {"reputation": 1, "user_id": 11621997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/161034c832406b30897f4fd3da2708ca?s=128&d=identicon&r=PG&f=1", "display_name": "land", "link": "https://stackoverflow.com/users/11621997/land"}, "edited": false, "score": 0, "creation_date": 1560143284, "post_id": 56515944, "comment_id": 99626099, "body": "Thank you, Nick.  I have confirmed that this application can be accessed from the web."}, {"owner": {"reputation": 1, "user_id": 11621997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/161034c832406b30897f4fd3da2708ca?s=128&d=identicon&r=PG&f=1", "display_name": "land", "link": "https://stackoverflow.com/users/11621997/land"}, "edited": false, "score": 0, "creation_date": 1560143329, "post_id": 56515944, "comment_id": 99626104, "body": "I think this error appears because the model can not be read from cron, but I do not know why it is not read"}, {"owner": {"reputation": 802, "user_id": 8728218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/376ec53188ea3ec0271198a862516657?s=128&d=identicon&r=PG&f=1", "display_name": "Dyaniyal Wilson", "link": "https://stackoverflow.com/users/8728218/dyaniyal-wilson"}, "edited": false, "score": 0, "creation_date": 1560173398, "post_id": 56515944, "comment_id": 99638277, "body": "check the project path using &#39;crontab -l&#39; whether the path is set correctly."}, {"owner": {"reputation": 1, "user_id": 11621997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/161034c832406b30897f4fd3da2708ca?s=128&d=identicon&r=PG&f=1", "display_name": "land", "link": "https://stackoverflow.com/users/11621997/land"}, "edited": false, "score": 0, "creation_date": 1560191193, "post_id": 56515944, "comment_id": 99646601, "body": "I updated &#39;crontab -l&#39; result, path is right."}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1560218859, "post_id": 56515944, "comment_id": 99653822, "body": "Are you using spring on your production server? The first block of code (with the log output) mentions spring but it&#39;s not clear if that&#39;s from local development or production."}, {"owner": {"reputation": 1, "user_id": 11621997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/161034c832406b30897f4fd3da2708ca?s=128&d=identicon&r=PG&f=1", "display_name": "land", "link": "https://stackoverflow.com/users/11621997/land"}, "edited": false, "score": 0, "creation_date": 1560227959, "post_id": 56515944, "comment_id": 99655461, "body": "Sorry! This is production log.  The other person told me that spring does not work in production."}], "owner": {"reputation": 1, "user_id": 11621997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/161034c832406b30897f4fd3da2708ca?s=128&d=identicon&r=PG&f=1", "display_name": "land", "link": "https://stackoverflow.com/users/11621997/land"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1560191058, "creation_date": 1560094542, "last_edit_date": 1560191058, "question_id": 56515944, "link": "https://stackoverflow.com/questions/56515944/whenever-cause-uninitialized-constant-error-in-production", "title": "whenever cause uninitialized constant error in production", "body": "<p>After confirming the operation in the local environment, I deployed it in the production environment.\nThe first time I made a mistake in the code and got an <code>undefined method</code> error.\nAfter fixing the code and deploying it again, the following error appeared.</p>\n\n<p>When I searched, there were articles such as being not read if it was under lib, but I thought that it was not applicable because it was under models.\nIt would be appreciated if you could borrow someone's wisdom.</p>\n\n<pre><code># log/cron.log\nRunning via Spring preloader in process 7298\nPlease specify a valid ruby command or the path of a script to run.\nRun 'bin/rails runner -h' for help.\n\nuninitialized constant Item\n</code></pre>\n\n<pre class=\"lang-sh prettyprint-override\"><code># crontab -l\n\n# Begin Whenever generated tasks for: /var/www/rails/myapp/config/schedule.rb at: 2019-06-10 16:14:42 +0000\n0 2 * * * /bin/bash -l -c 'cd /var/www/rails/myapp &amp;&amp; bundle exec bin/rails runner -e production '\\''Item.reload'\\'' &gt;&gt; /var/www/rails/myapp/log/cron.log 2&gt;&amp;1'\n\n# End Whenever generated tasks for: /var/www/rails/myapp/config/schedule.rb at: 2019-06-10 16:14:42 +0000\n</code></pre>\n\n<h3>environment</h3>\n\n<p>ruby: 2.5.0\nrails: 5.2.3\n\u30b5\u30fc\u30d0\u30fc: Amazon Linux 2 AMI</p>\n\n<h3>code</h3>\n\n<pre><code>config/schedule.rb\nrequire File.expand_path(File.dirname(__FILE__) + \"/environment\")\n\nset :output, \"#{Rails.root}/log/cron.log\"\nset :environment, :production\n\nevery 1.day, at: '02:00' do\n  runner 'Item.reload'\nend\n</code></pre>\n\n<pre><code># models/item.rb\nclass Item &lt; ApplicationRecord\n  ...\n  def self.reload\n    ...\n  end\nend\n\n</code></pre>\n"}, {"tags": ["ruby", "yaml", "ruby-on-rails-5.2"], "answers": [{"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1560287025, "post_id": 56514931, "comment_id": 99684936, "body": "It&#39;s worth noting that the splat operator (<code>*</code>) might be useful for OP&#39;s use case: <code>def scope(scope_path); MY_YAML.dig(*scope_path); end</code>."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 4, "last_activity_date": 1560086483, "creation_date": 1560086483, "answer_id": 56514931, "question_id": 56514744, "link": "https://stackoverflow.com/questions/56514744/reference-yaml-node-using-method-parameter/56514931#56514931", "title": "Reference YAML Node using method parameter", "body": "<p>You can simple use <a href=\"https://ruby-doc.org/core-2.6.3/Hash.html#method-i-dig\" rel=\"nofollow noreferrer\"><code>Hash#dig</code></a>:</p>\n\n<pre><code>myYaml.dig(:first_node, :first_child, :second_child)\n</code></pre>\n"}], "owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 56514931, "answer_count": 1, "score": 1, "last_activity_date": 1560086483, "creation_date": 1560084701, "question_id": 56514744, "link": "https://stackoverflow.com/questions/56514744/reference-yaml-node-using-method-parameter", "title": "Reference YAML Node using method parameter", "body": "<p>I load a yaml, and need to define a scope for it, to reference a specific node.</p>\n\n<pre><code>myYaml = YAML.load_file('myfile.yml').with_indifferent_access\n</code></pre>\n\n<p>Normally, I can just do</p>\n\n<pre><code>myYaml[:first_node][:first_child][:second_child]\n</code></pre>\n\n<p>However, I wanted to pass the path to a method to scope it for me. I am struggling to do something like this..</p>\n\n<pre><code>scope_path = [:first_node,:first_child,:second_child]\n\ndef scope(scope_path)\n myYAML[scope_path]\nend\n</code></pre>\n\n<p># So I need code to convert my scope_path parameter to</p>\n\n<pre><code>myYaml[:first_node][:first_child][:second_child]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1560087719, "post_id": 56514522, "comment_id": 99615933, "body": "What web server do you use? How did you install that server?"}, {"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1560087732, "post_id": 56514522, "comment_id": 99615936, "body": "It&#39;s probably in the logs for either nginx or apache, do you have access to them on AWS?"}, {"owner": {"reputation": 307, "user_id": 2932090, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7b678c303685811858adcf532cbccf7a?s=128&d=identicon&r=PG&f=1", "display_name": "user2932090", "link": "https://stackoverflow.com/users/2932090/user2932090"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1560087964, "post_id": 56514522, "comment_id": 99615986, "body": "@spickermann I use <code>nginx</code>, I installed it as an image."}, {"owner": {"reputation": 307, "user_id": 2932090, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7b678c303685811858adcf532cbccf7a?s=128&d=identicon&r=PG&f=1", "display_name": "user2932090", "link": "https://stackoverflow.com/users/2932090/user2932090"}, "reply_to_user": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1560088164, "post_id": 56514522, "comment_id": 99616022, "body": "@Eyeslandic when I look to the file <code>&#47;var&#47;log&#47;nginx&#47;myapp_production.error.log</code>, there&#39;s this &quot;error&quot; message: <code>2019&#47;06&#47;09 13:47:14 [error] 987#0: *7824941 upstream prematurely closed connection while reading response header from upstream, client: IP, server: www.my_website.com, request: &quot;GET &#47;contact-us HTTP&#47;1.1&quot;, upstream: &quot;http:&#47;&#47;unix:&#47;tmp&#47;unicorn.myapp_production.sock:&#47;contact-us&quot;&zwnj;&#8203;, host: &quot;www.my_website.com&quot;</code> -- but it doesn&#39;t really say what&#39;s wrong there"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1560096062, "post_id": 56514522, "comment_id": 99617819, "body": "Does this <a href=\"https://stackoverflow.com/questions/30277164/i-cannot-locate-production-log-files-on-elastic-beanstalk-ec2-instance\" title=\"i cannot locate production log files on elastic beanstalk ec2 instance\">stackoverflow.com/questions/30277164/&hellip;</a> helps?"}], "owner": {"reputation": 307, "user_id": 2932090, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7b678c303685811858adcf532cbccf7a?s=128&d=identicon&r=PG&f=1", "display_name": "user2932090", "link": "https://stackoverflow.com/users/2932090/user2932090"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 370, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1560088202, "creation_date": 1560082631, "last_edit_date": 1560088202, "question_id": 56514522, "link": "https://stackoverflow.com/questions/56514522/where-do-i-find-the-error-log-of-a-rails-app-on-the-production-server", "title": "Where do I find the error log of a Rails app on the production server?", "body": "<p>My app is working fine on a local server. After deploying it on production (AWS EC2), I see this \"classic\" Rails error page:\n<a href=\"https://i.stack.imgur.com/LMgJB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LMgJB.png\" alt=\"enter image description here\"></a></p>\n\n<p>I thought that the errors are logged to the file <code>current/log/production.log</code>, but when I looked in it, there's no error captured. I can only see there the following:</p>\n\n<pre><code>I, [2019-06-09T12:12:04.353438 #12855]  INFO -- : Started GET \"/constact-us\" for 185.44.76.84 at 2019-06-09 12:12:04 +0000\nI, [2019-06-09T12:12:04.355034 #12855]  INFO -- : Processing by MyAppSite::SiteController#contact_us as HTML\n</code></pre>\n\n<p>There's logged accessing the URL, but not the error message. Where do I find it? I added some pure HTML/image to that template, so I think the error must be related to some issue with assets (and precompilation).</p>\n\n<p>However, where do I find the full error message?</p>\n\n<p>I am looking to the <code>config/environments/production.rb</code> file and regarding logs, there's \"only\" this line:</p>\n\n<pre><code>config.log_level = :info\n</code></pre>\n\n<p>Any advise how to figure out the error message?</p>\n\n<p><strong>EDIT:</strong> I just realized that I also have integrated Rollbar to the app and it hasn't caught the error either.</p>\n\n<p><strong>EDIT 2:</strong> error from the nginx log: </p>\n\n<pre><code>2019/06/09 13:47:14 [error] 987#0: *7824941 upstream prematurely closed connection while reading response header from upstream, client: IP, server: www.my_website.com, request: \"GET /contact-us HTTP/1.1\", upstream: \"http://unix:/tmp/unicorn.myapp_production.sock:/contact-us\", host: \"www.my_website.com\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1560073706, "post_id": 56513520, "comment_id": 99613268, "body": "<code>args.ids.split is not a function</code> is an ECMAScript error, not a Ruby error. This error message comes from some piece of ECMAScript code that you are not showing us."}, {"owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1560073829, "post_id": 56513520, "comment_id": 99613296, "body": "I don&#39;t have any other code am not showing. Am calling this from Postman and that&#39;s what returns."}, {"owner": {"reputation": 1165, "user_id": 6945452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98f194d5802eb275d75a6c1af397534a?s=128&d=identicon&r=PG", "display_name": "Kamal Pandey", "link": "https://stackoverflow.com/users/6945452/kamal-pandey"}, "edited": false, "score": 0, "creation_date": 1560074283, "post_id": 56513520, "comment_id": 99613380, "body": "I have a function called value that returns this array below: could you show your function value"}, {"owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "edited": false, "score": 0, "creation_date": 1560075111, "post_id": 56513520, "comment_id": 99613561, "body": "Edited and supplied that function"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1560078122, "post_id": 56513520, "comment_id": 99614117, "body": "The error message is a JavaScript error. It doesn&#39;t come from Ruby code. No matter how much Ruby code you add to your question, we cannot tell you where the JavaScript error comes from."}, {"owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "edited": false, "score": 0, "creation_date": 1560082745, "post_id": 56513520, "comment_id": 99614947, "body": "I don&#39;t understand except HTTParty Gem which I am using to call the API is using JavaScript. But that&#39;s not enough to flag my question down. I will try and fix it. Again, I don&#39;t have JS in my RAILS API."}], "answers": [{"tags": [], "owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "is_accepted": true, "score": 0, "last_activity_date": 1560100456, "creation_date": 1560100456, "answer_id": 56516739, "question_id": 56513520, "link": "https://stackoverflow.com/questions/56513520/dropping-array-into-httparty-api-call-argument-throws-args-ids-split-is-not-a-f/56516739#56516739", "title": "Dropping array into HTTParty API call argument throws `args.ids.split is not a function` error. How do I fix this?", "body": "<p>Fixed. This is what I have done to make this work. Bear in mind this error is thrown as a result of passing an array into the HTTParty API call argument. Hence the <code>args.ids.split is not a function</code> Error.</p>\n\n<p>Fixing this for me is just by converting the <code>value</code> to <code>string</code> instead of <code>array</code> by just adding <code>.join(', ')</code> to the response in the method. See below:</p>\n\n<pre><code>  def value\n    params = set_params_if_not_added\n    value_search = ValueSearchService::ValueSearch.new(\n      params[:one],\n      params['two'] = 1_000_000,\n      params[:three],\n      params[:four]\n    ).values\n    value_search['data'].join(', ') # This will solve it.\n  end\n</code></pre>\n\n<p>Thereby when you append <code>value</code> result to the defined HTTParty module call to the <code>ids</code> argument, it takes it as a string and it works fine.</p>\n\n<pre><code>list_info = ListInfoService::ListInfo.new(\n  value, # Note that this line is `ids` under ListInfoService::ListInfo argument and cant be array.\n  params[:some_params], \n  params[:another_params]).movies \n\nrender json: list_info\n</code></pre>\n"}], "owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 56516739, "answer_count": 1, "score": -3, "last_activity_date": 1560104350, "creation_date": 1560073162, "last_edit_date": 1560104350, "question_id": 56513520, "link": "https://stackoverflow.com/questions/56513520/dropping-array-into-httparty-api-call-argument-throws-args-ids-split-is-not-a-f", "title": "Dropping array into HTTParty API call argument throws `args.ids.split is not a function` error. How do I fix this?", "body": "<p>I have a function called <code>value</code> that returns this array below:</p>\n\n<pre><code>[1893, 1724, 257344, 353491, 301337, 305470, 348, 264660, 76341, 68726]\n</code></pre>\n\n<p>However for more clarity, here is the <code>value function</code> that returns the <code>value array</code> above: It's a module like <code>ListInfoService</code> below and has 4 arguments which are the arguments supplied in the values method below <code>ValueSearchService::ValueSearch.new(params[:one], params['two'] = 1_000_000, params[:three], params[:four]).values</code></p>\n\n<pre><code>def value\n    params = set_params_if_not_added\n    value_search = ValueSearchService::ValueSearch.new(\n      params[:one],\n      params['two'] = 1_000_000,\n      params[:three],\n      params[:four]\n    ).values\n    value_search['data']\n  end\n</code></pre>\n\n<p>I also have a function where the argument <code>ids</code> is supposed to take the result of value (i.e. comma separated numbers):</p>\n\n<pre><code>module ListInfoService\n  class ListInfo\n    include HTTParty\n    base_uri 'localhost:7000'\n\n    def initialize(ids, limit, offset)\n      @options = { query: { ids: ids, some_params: some_params, another_params: another_params } }\n    end\n\n    def movies\n      self.class.get('/list', @options)\n    end\n  end\nend\n</code></pre>\n\n<p>The URL I interpreted to make the module function above is:</p>\n\n<pre><code>localhost:7000/list?ids=2,3,6&amp;some_params=5&amp;another_params=0\n</code></pre>\n\n<p>But when I call the function by dropping <code>value</code> result into the function call below, I get <code>args.ids.split is not a function</code> error:</p>\n\n<pre><code>list_info = ListInfoService::ListInfo.new(\n   value,\n   params[:some_params],\n   params[:another_params]\n).movies\n\nrender json: list_info\n</code></pre>\n\n<p>So how do I make sure my <code>ids</code> argument takes a comma-separated list of number? </p>\n\n<p><strong>Note</strong>: Am using HTTParty, Rails5.1, Ruby 2.6</p>\n\n<p>I think the problem is the array <code>value</code> that I supplied inside <code>ListInfoService::ListInfo</code> that searches an api. If I can probably change how I call my api in the module or find a way to supply comma-separated list of ids needed, it will work.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 1175, "user_id": 2861567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRa02.jpg?s=128&g=1", "display_name": "quyetdc", "link": "https://stackoverflow.com/users/2861567/quyetdc"}, "is_accepted": true, "score": 1, "last_activity_date": 1560068098, "creation_date": 1560068098, "answer_id": 56512993, "question_id": 56512918, "link": "https://stackoverflow.com/questions/56512918/ruby-on-rails-bundle-install-is-not-working/56512993#56512993", "title": "Ruby on Rails - bundle install is not working", "body": "<p>If you're using Ubuntu, try to run</p>\n\n<pre><code>sudo apt-get install libpq-dev\n</code></pre>\n\n<p>If you're using MAC</p>\n\n<pre><code>brew install postgresql\n</code></pre>\n\n<p>Then, try to run <code>gem install pg</code> again</p>\n"}], "owner": {"reputation": 974, "user_id": 10719564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/389a0f44307d1c137d141f7d7025c009?s=128&d=identicon&r=PG&f=1", "display_name": "mph85", "link": "https://stackoverflow.com/users/10719564/mph85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 56512993, "answer_count": 1, "score": 0, "last_activity_date": 1560068098, "creation_date": 1560067230, "question_id": 56512918, "link": "https://stackoverflow.com/questions/56512918/ruby-on-rails-bundle-install-is-not-working", "title": "Ruby on Rails - bundle install is not working", "body": "<p>When I try to do <code>bundle install</code> it gives the error below.</p>\n\n<p>When I try running <code>bundle install</code>, or the suggest prompt below, with and without the ending url, I keep getting the same error and keeps telling me to <code>bundle install</code>, which I have been doing.</p>\n\n<p><strong>ERROR</strong></p>\n\n<p>An error occurred while installing pg (1.1.4), and Bundler cannot\ncontinue.\nMake sure that <code>gem install pg -v '1.1.4' --source 'https://rubygems.org/'</code>\nsucceeds before bundling.</p>\n"}, {"tags": ["ruby", "alias-method"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1560042553, "post_id": 56511244, "comment_id": 99609286, "body": "It&#39;s a method that makes aliases of methods: <a href=\"https://docs.ruby-lang.org/en/2.6.0/Module.html#method-i-alias_method\" rel=\"nofollow noreferrer\">docs.ruby-lang.org/en/2.6.0/Module.html#method-i-alias_metho&zwnj;&#8203;d</a>."}, {"owner": {"reputation": 974, "user_id": 10719564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/389a0f44307d1c137d141f7d7025c009?s=128&d=identicon&r=PG&f=1", "display_name": "mph85", "link": "https://stackoverflow.com/users/10719564/mph85"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1560042917, "post_id": 56511244, "comment_id": 99609333, "body": "so if i wanted to make an instance variable called <code>thirsty?</code>, I wouldn&#39;t be able to because of the <code>?</code>, so I would use an alias_method to make a new copy of <code>thirsty</code> and changed it to <code>thirsty?</code>. That makes sense?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1560043378, "post_id": 56511244, "comment_id": 99609372, "body": "I understand the question and no, it does not make sense in ruby. Why create a method only to rename it? Create it with the right name from the start. <code>def thirsty? @thirsty; end</code>"}, {"owner": {"reputation": 974, "user_id": 10719564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/389a0f44307d1c137d141f7d7025c009?s=128&d=identicon&r=PG&f=1", "display_name": "mph85", "link": "https://stackoverflow.com/users/10719564/mph85"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1560043514, "post_id": 56511244, "comment_id": 99609385, "body": "@SergioTulentsev take a look at this example someone gave me for my other question, you&#39;re saying that, that stuff is extraneous? <a href=\"https://stackoverflow.com/questions/56420576/ruby-making-test-pass?noredirect=1#comment99472049_56420576\" title=\"ruby making test pass\">stackoverflow.com/questions/56420576/&hellip;</a>"}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1560043706, "post_id": 56511244, "comment_id": 99609409, "body": "@SergioTulentsev I posted the answer on the other post, and added my reasoning as an answer on this post. tldr; the code snippet was short, i threw something out there that met the requirement of passing the spec but I didn&#39;t go back and think about it in too much depth (the attr_reader &amp; alias weren&#39;t really necessary)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1560044255, "post_id": 56511244, "comment_id": 99609462, "body": "@JayDorsey: ah, I see, thanks."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1560049835, "post_id": 56511244, "comment_id": 99610011, "body": "I would not expect you to see answers here to the question you pose, as I think most members would regard the question as &quot;off topic&quot; because it is &quot;too broad&quot; for SO. See <a href=\"https://stackoverflow.com/help\">this faq</a>. I suggest you google for articles on the subject (e.g., &quot;Ruby alias uses&quot;). One that will come up is <a href=\"https://www.rubyguides.com/2018/11/ruby-alias-keyword/\" rel=\"nofollow noreferrer\">this one</a>. Note that aliases can be created with the keyword <code>alias</code> or the method <code>alias_method</code>. All articles on either will no doubt cover the other as well, and explain the differences."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1560093460, "post_id": 56511244, "comment_id": 99617235, "body": "@mph85 did you see the <a href=\"https://stackoverflow.com/questions/56420576/ruby-making-test-pass?noredirect=1#comment99444846_56420912\">comment</a> I posted under Jay Dorsey&#39;s answer?"}], "answers": [{"tags": [], "owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "is_accepted": true, "score": 3, "last_activity_date": 1560043549, "creation_date": 1560043549, "answer_id": 56511315, "question_id": 56511244, "link": "https://stackoverflow.com/questions/56511244/when-should-i-use-an-alias-method-ruby/56511315#56511315", "title": "When should I use an Alias Method? - Ruby", "body": "<p>I think this is from an earlier question I responded to, where I proposed using <code>alias_method</code>, so I have a little bit of extra context into this to explain it's use in that context.</p>\n\n<p>In your code snippet, you have a bit of code that reads <code>attr_reader :thirsty</code> that is basically a getter for an instance variable of the same name (<code>@thirsty</code>)</p>\n\n<pre><code>def thirsty\n  @thirsty\nend\n</code></pre>\n\n<p>In the original code snippet, you had an assertion that was:</p>\n\n<pre><code>refute vampire.thirsty?\n</code></pre>\n\n<p>You also had code that simply returned <code>true</code> for <code>thirsty?</code> method, which failed your assertion.</p>\n\n<p>There are at least two ways you could have modified your code so that the call to <code>thirsty?</code> worked and your assertion passed:</p>\n\n<p>Create a method that calls the <code>thirsty</code> reader, or access the <code>@thirsty</code> instance variable itself:</p>\n\n<pre><code>def thirsty?\n  thirsty # or @thirsty\nend\n</code></pre>\n\n<p>The other way is to use <code>alias_method</code>, which is functionally equivalent to the above. It aliases <code>thirsty?</code> to <code>thirsty</code> which is an <code>attr_reader</code> which reads from the <code>@thirsty</code> instance variable</p>\n\n<p><a href=\"https://stackoverflow.com/a/56420912/2892779\">Reference</a> to the other answer I gave</p>\n\n<p>You might be better off not using an attr_reader at all, instead just doing as Sergio noted in his comment:</p>\n\n<pre><code>class Vampire\n  def initialize(name)\n    @name = name\n    @thirsty = true\n  end\n\n  def thirsty?\n    @thirsty\n  end\n\n  def drink\n    @thirsty = false\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 4, "last_activity_date": 1560064977, "creation_date": 1560064977, "answer_id": 56512722, "question_id": 56511244, "link": "https://stackoverflow.com/questions/56511244/when-should-i-use-an-alias-method-ruby/56512722#56512722", "title": "When should I use an Alias Method? - Ruby", "body": "<p>There are two reasons why one would use <a href=\"https://ruby-doc.org/core/Module.html#method-i-alias_method\" rel=\"nofollow noreferrer\"><code>Module#alias_method</code></a>, one is current and valid, and the other is obsolete and was never actually necessary anyway.</p>\n\n<p>The first reason is that you simply want to have two methods with different names that do the exact same thing. One reason for that could be that there are two equally widely-used terms for the same action, and you want to make it easier for people write code that is understandable to their community. (Some examples in the Ruby core library are the collection methods, which have names that are familiar to people coming from functional programming languages, such as <code>map</code>, <code>reduce</code>, people coming the Smalltalk family of programming languages, such as <code>collect</code>, <code>inject</code>, <code>select</code>, and standard English names, such as <code>find_all</code>.) Another possibility would be that you build a <em>Fluent Interface</em> and want it to read more fluently, like this:</p>\n\n<pre><code>play this\nand that\nand something_else\n</code></pre>\n\n<p>In this case, <code>and</code> could be an alias for <code>play</code>.</p>\n\n<p>Another, related reason (let's call it reason 1.5) is that you want to implement some protocol and you already have a method that implements that protocol's semantics correctly, but it has the wrong name. Let's assume a hypothetical collections framework which has two methods <code>map_seq</code> and <code>map_nonseq</code>. The first one performs a <code>map</code> and guarantees the order of side-effects, whereas the second one does not guarantee the order of side-effects and may even perform the mapping operation asynchronously, concurrently, or in parallel. These two methods have actually different semantics, but if your data structure does not lend itself to parallelization, then you can simply implement <code>map_seq</code> and make <code>map_nonseq</code> an alias.</p>\n\n<p>In this case, the driver is not so much that you want to provide two names for the same operation, but rather that you want to provide the same implementation for two names (if that sentence makes sense :-D ).</p>\n\n<p>The second major reason why <code>alias_method</code> was used in the past, has to do with an important detail of its semantics: when you override or monkey-patch either of the two methods, this will only affect <em>that</em> name, but not the other. This was used in the past for <em>wrapping</em> the behavior of a method, like this:</p>\n\n<pre><code>class SomeClass\n  def some_method\n    \"Hello World\"\n  end\nend\n</code></pre>\n\n<p>This is a little boring. We want our method to SHOUT! But, we don't want to just copy and re-implement the method, we want to re-use its internal implementation without having to know how it is implemented internally. And we want to monkey-patch it, so that all clients of this method have the shouting behavior. The popular way to do this was something like this:</p>\n\n<pre><code>class SomeClass\n  alias_method :__some_method_without_shouting :some_method\n\n  def __some_method_with_shouting\n    __some_method_without_shouting.upcase\n  end\n\n  alias_method :some_method :__some_method_with_shouting\nend\n</code></pre>\n\n<p>In this example, we use <code>alias_method</code> to create a \"backup\" of the method we are monkey-patching, so that we can call it from within our monkey-patched version of the method. (Otherwise, the method would be gone.) This is actually the use case given in the documentation of <code>alias_method</code>.</p>\n\n<p>This idiom was so popular and widely-used that some libraries even provided an implementation for it, e.g. ActiveSupport's <a href=\"https://api.rubyonrails.org/v5.0/classes/Module.html#method-i-alias_method_chain\" rel=\"nofollow noreferrer\"><code>Module#alias_method_chain</code></a>.</p>\n\n<p>Note, however that this idiom has some not-so-nice properties. One is that we are polluting the namespace with all those <code>_with_</code> and <code>_without_</code> methods. E.g. when you look at an object's methods, you will see all of those. The other problem is that people can still call the old method directly, but presumably we had a reason to patch it, because we don't <em>want</em> the old behavior. (Otherwise, we could have just made a method with a new name that calls the old one, e.g. <code>shout</code>.)</p>\n\n<p>There has always been a better alternative that was not so widely-used:</p>\n\n<pre><code>class SomeClass\n  some_method_without_shouting = instance_method(:some_method)\n\n  define_method(:some_method) do\n    some_method_without_shouting.bind(self).().upcase\n  end\nend\n</code></pre>\n\n<p>Here, we store the old method in a local variable and we use a block to define the new method (via <a href=\"https://ruby-doc.org/core/Module.html#method-i-define_method\" rel=\"nofollow noreferrer\"><code>Module#define_method</code></a>). The local variable goes out of scope at the end of the class body, so it can never be accessed anywhere ever again. But blocks are <em>closures</em>, they close over their surrounding lexical environment, and thus the block passed to <code>define_method</code> (and <em>only</em> this block) still has access to the variable binding. That way, the old implementation is completely hidden and there is no namespace pollution.</p>\n\n<p>However, as of Ruby 2.0, there is a much better solution for this method wrapping: <a href=\"https://ruby-doc.org/core/Module.html#method-i-prepend\" rel=\"nofollow noreferrer\"><code>Module#prepend</code></a>. The beauty of <code>prepend</code> is that it is \"just inheritance\", and we can simply use <code>super</code>:</p>\n\n<pre><code>module Shouter\n  def some_method\n    super.upcase\n  end\nend\n\nclass SomeClass\n  prepend Shouter\nend\n</code></pre>\n\n<p><code>Module#prepend</code> is the reason why <code>Module#alias_method_chain</code> was deprecated in ActiveSupport 5.0 and removed in 5.1, for example. All these contortions are simply no longer necessary.</p>\n\n<p>So, to summarize: there were two main reasons why <code>alias_method</code> was used: literally making an alias, i.e. two names for the same operation, and creating a backup copy for method wrapping. The second is no longer valid and maybe arguably never was. Today, only the first reason is a valid reason to use <code>alias_method</code>.</p>\n"}], "owner": {"reputation": 974, "user_id": 10719564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/389a0f44307d1c137d141f7d7025c009?s=128&d=identicon&r=PG&f=1", "display_name": "mph85", "link": "https://stackoverflow.com/users/10719564/mph85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 56511315, "answer_count": 2, "score": 1, "last_activity_date": 1560064977, "creation_date": 1560042412, "last_edit_date": 1560043078, "question_id": 56511244, "link": "https://stackoverflow.com/questions/56511244/when-should-i-use-an-alias-method-ruby", "title": "When should I use an Alias Method? - Ruby", "body": "<p>I've looked through and haven't seen an answer to:</p>\n\n<p>What would you use an alias method?</p>\n\n<pre><code>class Vampire\n attr_reader :name, :thirsty\n\n alias_method :thirsty?, :thirsty\nend\n</code></pre>\n\n<p>Is the only reason I would use one is to be able to use a question mark with whatever method I define? I believe you can't use question marks with instance variables.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord", "rails-activerecord"], "comments": [{"owner": {"reputation": 1175, "user_id": 2861567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRa02.jpg?s=128&g=1", "display_name": "quyetdc", "link": "https://stackoverflow.com/users/2861567/quyetdc"}, "edited": false, "score": 0, "creation_date": 1560050980, "post_id": 56511219, "comment_id": 99610124, "body": "The first option, just remove current index and create another one. The second option I think will NOT work for this case"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11620322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7753473d8c9ae94dcf45abaa79d2287a?s=128&d=identicon&r=PG", "display_name": "mirkayser", "link": "https://stackoverflow.com/users/11620322/mirkayser"}, "is_accepted": false, "score": 1, "last_activity_date": 1560049403, "creation_date": 1560049403, "answer_id": 56511670, "question_id": 56511219, "link": "https://stackoverflow.com/questions/56511219/activerecordrecordnotunique-mysql2error-duplicate-entry/56511670#56511670", "title": "ActiveRecord::RecordNotUnique: Mysql2::Error: Duplicate entry", "body": "<p>the controller validation enforces a unique triplet (url,user_id,provider),\nwhile the index enforces a unique pair (user_id,url).</p>\n\n<p>if you want to create a record with the same user_id and url than an existing record, but with another provider, removing the current unique index from the database and adding a new unique index for triplet should do the trick.</p>\n\n<p><code>add_index :business_profiles, [:user_id, :url, :provider], unique: true</code></p>\n"}], "owner": {"reputation": 429, "user_id": 678483, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b5838d15ded7a409e1d8f20a9a11cd12?s=128&d=identicon&r=PG", "display_name": "Leo", "link": "https://stackoverflow.com/users/678483/leo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3354, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1560049403, "creation_date": 1560042007, "last_edit_date": 1560043689, "question_id": 56511219, "link": "https://stackoverflow.com/questions/56511219/activerecordrecordnotunique-mysql2error-duplicate-entry", "title": "ActiveRecord::RecordNotUnique: Mysql2::Error: Duplicate entry", "body": "<p>I'm having the following error when trying to save an entry with the same URL and user_id. The issue here is that I need to add it but with a different provider (Yext, Synup or Default) (look at the very end of the ActiveRecordError). </p>\n\n<p>Below, I pasted the validations in my controller and the table indexes as well but I'm not sure if </p>\n\n<p>1) I need to remove the current index and add a new one with the <strong>provider</strong> column</p>\n\n<p>AND/OR</p>\n\n<p>2) change the validates in the controller to allow saving the records with same <strong>user_id, url but different provider</strong></p>\n\n<p><strong>Thanks for your answer!!</strong></p>\n\n<p>ActiveRecord Error:</p>\n\n<pre><code>#&lt;ActiveRecord::RecordNotUnique: Mysql2::Error: Duplicate entry '1070078-https://www.cylex.ca/company/the-painted-window-wedding-' for key 'index_business_profiles_on_user_id_and_url': INSERT INTO `business_profiles` (`local_seo_site_id`, `url`, `success_at`, `company_location_id`, `provider`, `user_id`, `created_at`, `updated_at`) VALUES (136, 'https://www.cylex.ca/company/the-painted-window-wedding-venue-24052526.html', '2019-06-08 07:36:36', 1051892, 'synup', 1070078, '2019-06-08 07:36:36', '2019-06-08 07:36:36')&gt;\n</code></pre>\n\n<p>Validations:</p>\n\n<pre><code>validates :user_id, :local_seo_site_id, :url, presence: true\n  validates_uniqueness_of :url, scope: [:user_id, :provider], case_sensitive: false, if: :url_changed?\n  # vendor can't add same directory twice to same account\n  validates_uniqueness_of :local_seo_site_id, scope: [:user_id, :admin_id, :company_location_id], on: :create, if: :added_by_vendor?\n  validates :url, :url =&gt; true, if: :url_changed?\n</code></pre>\n\n<p>Table Index:</p>\n\n<pre><code>add_index :business_profiles, [:user_id, :url], unique: true\n</code></pre>\n"}, {"tags": ["regex", "ruby"], "comments": [{"owner": {"reputation": 69330, "user_id": 1612975, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nVzDH.png?s=128&g=1", "display_name": "TheGeneral", "link": "https://stackoverflow.com/users/1612975/thegeneral"}, "edited": false, "score": 1, "creation_date": 1560041575, "post_id": 56511180, "comment_id": 99609189, "body": "Why have you tagged C# ruby and perl?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1560042157, "post_id": 56511180, "comment_id": 99609237, "body": "Do you mean letters that repeat themselves, like <code>aa</code>, or any letters (<code>ab</code>)? Do they need to be consecutive (so <code>aba</code> doesn&#39;t count, only <code>aa</code>)?  What you have matches a letter, two or more times, so <code>abc</code>..."}, {"owner": {"reputation": 19, "user_id": 11522316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb3c7a93059868ee4c00b46bd40c4d9?s=128&d=identicon&r=PG&f=1", "display_name": "Avery", "link": "https://stackoverflow.com/users/11522316/avery"}, "edited": false, "score": 1, "creation_date": 1560042824, "post_id": 56511180, "comment_id": 99609319, "body": "Hi, zdim. What I want is a regular expression that only matches any letter that occurs 2 times or more in a string. The letter could be anywhere in the string but if it occurs more than once in  a string, only then I want the match. For example: for string = &quot;data&quot;, the matched item should only be &quot;a&quot;, in uppercase or lowercase."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1560043345, "post_id": 56511180, "comment_id": 99609370, "body": "OK. But I did&#39;t understand: should <code>data</code> match then (with letter <code>a</code> more than once), or not match (since <code>a</code> repeats not right after the first <code>a</code>)?"}, {"owner": {"reputation": 19, "user_id": 11522316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb3c7a93059868ee4c00b46bd40c4d9?s=128&d=identicon&r=PG&f=1", "display_name": "Avery", "link": "https://stackoverflow.com/users/11522316/avery"}, "edited": false, "score": 0, "creation_date": 1560043737, "post_id": 56511180, "comment_id": 99609413, "body": "The 2 &quot;a&quot; in &quot;data&quot; should match because we are trying to match any letter that occurs more than once in a string. It does not matter if the &quot;a&quot; are not consecutive, as long as they occur more than once in a string, before or after any other letter, the regex should match them because we are only looking for letters that occur more than once in a string."}, {"owner": {"reputation": 19, "user_id": 11522316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb3c7a93059868ee4c00b46bd40c4d9?s=128&d=identicon&r=PG&f=1", "display_name": "Avery", "link": "https://stackoverflow.com/users/11522316/avery"}, "reply_to_user": {"reputation": 1, "user_id": 6553328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omcAX.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6553328/emma"}, "edited": false, "score": 1, "creation_date": 1560043975, "post_id": 56511180, "comment_id": 99609438, "body": "That&#39;s right, @Emma. What I have explained in the comment above is exactly what we wish to do."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 11522316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb3c7a93059868ee4c00b46bd40c4d9?s=128&d=identicon&r=PG&f=1", "display_name": "Avery", "link": "https://stackoverflow.com/users/11522316/avery"}, "edited": false, "score": 1, "creation_date": 1560042185, "post_id": 56511203, "comment_id": 99609240, "body": "I have tried using ([A-Za-z]{2,}) but this matches all the letters, no matter if it&#39;s just 1 letter or more. For example for the word &quot;data&quot;,  I only wanted ([A-Za-z]{2,}) to match the two &quot;a&quot; but it matches all the letters in the word."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1560062200, "post_id": 56511203, "comment_id": 99611436, "body": "Is \u201cnai\u0308ve\u201d a word?"}, {"owner": {"reputation": 19, "user_id": 11522316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb3c7a93059868ee4c00b46bd40c4d9?s=128&d=identicon&r=PG&f=1", "display_name": "Avery", "link": "https://stackoverflow.com/users/11522316/avery"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1560070382, "post_id": 56511203, "comment_id": 99612706, "body": "Hi, @AlekseiMatiushkin.  The regex that I&#39;m looking for should not match &quot;naive&quot; because all letters in &quot;naive&quot; only occur once. The regex should match all the letters that repeat themselves in a string."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1560070880, "post_id": 56511203, "comment_id": 99612794, "body": "&#239; in na&#239;ve was what actually matters in my question."}], "tags": [], "owner": {"reputation": 1, "user_id": 6553328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omcAX.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6553328/emma"}, "is_accepted": false, "score": 4, "last_activity_date": 1560043773, "last_edit_date": 1560043773, "creation_date": 1560041811, "answer_id": 56511203, "question_id": 56511180, "link": "https://stackoverflow.com/questions/56511180/how-to-only-match-letters-that-occur-more-than-once-in-a-string-using-regex/56511203#56511203", "title": "How to only match letters that occur more than once in a string, using regex?", "body": "<p>Here, we can simply use a back-reference with an <code>i</code> flag: </p>\n\n<pre><code>([a-z])\\1\n</code></pre>\n\n<p>or without an <code>i</code> flag:</p>\n\n<pre><code>([A-Za-z])\\1\n</code></pre>\n\n<h3><a href=\"https://regex101.com/r/PVny43/1/\" rel=\"nofollow noreferrer\">Demo</a></h3>\n\n<h3>Test</h3>\n\n<pre><code>re = /([a-z])\\1/im\nstr = 'a\nab\nabc\n1\n22\n22AB\nAB\nABC\nABBC\nABBCCDD\n'\n\n# Print the match result\nstr.scan(re) do |match|\n    puts match.to_s\nend\n</code></pre>\n\n<h3>RegEx</h3>\n\n<p>If this expression wasn't desired and you wish to modify it, please visit this link at <a href=\"https://regex101.com/r/PVny43/1/\" rel=\"nofollow noreferrer\">regex101.com</a>.</p>\n\n<h3>RegEx Circuit</h3>\n\n<p><a href=\"https://jex.im/regulex/#!flags=&amp;re=%5E(a%7Cb)*%3F%24\" rel=\"nofollow noreferrer\">jex.im</a> visualizes regular expressions:</p>\n\n<p><a href=\"https://i.stack.imgur.com/cvZvD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cvZvD.png\" alt=\"enter image description here\"></a></p>\n\n<h3>Edit</h3>\n\n<p>My guess is that here we wish to capture the repeating letter here, which this expression might do so: </p>\n\n<pre><code>([a-z])(?=[a-z]*\\1)\n</code></pre>\n\n<h3><a href=\"https://regex101.com/r/u9Cv0v/1\" rel=\"nofollow noreferrer\">Demo 2</a></h3>\n\n<h3>Test</h3>\n\n<pre><code>re = /([a-z])(?=[a-z]*\\1)/\nstr = 'data\npattern\nalice\nbob\nzdim\navery\nparagraph\n'\n\n# Print the match result\nstr.scan(re) do |match|\n    puts match.to_s\nend\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/5rPN9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5rPN9.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1560062082, "post_id": 56512392, "comment_id": 99611422, "body": "Since you are already aware of the fact \u201cletter\u201d is not exactly what ignorant users of the Latin alphabet call \u201cletter,\u201d would you mind to make it work for poor Germans? :) <code>&quot;u\u0308&quot;.match(&#47;\\p{Ll}&#47;) #\u21d2 #&lt;MatchData &quot;u&quot;&gt;</code> but <code>&quot;u\u0308&quot;.unicode_normalize(:nfc).match(&#47;\\p{Ll}&#47;) #\u21d2 #&lt;MatchData &quot;&#252;&quot;&gt;</code>."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1581285614, "last_edit_date": 1581285614, "creation_date": 1560060559, "answer_id": 56512392, "question_id": 56511180, "link": "https://stackoverflow.com/questions/56511180/how-to-only-match-letters-that-occur-more-than-once-in-a-string-using-regex/56512392#56512392", "title": "How to only match letters that occur more than once in a string, using regex?", "body": "<p>It would be nice to be able to write:</p>\n\n<pre><code>str.gsub(/(.)[^\\1]*\\z/i, '')\n</code></pre>\n\n<p>but, alas, back-references (<code>\\1</code>) cannot appear in character classes.</p>\n\n<p>I don't believe the objective can be achieved with a single regular expression, but it could be realised with a sequence of them. I assume the string contains only lowercase letters, for example:</p>\n\n<pre><code>str = \"bananas\"\n</code></pre>\n\n<p><p></p>1. Convert letters that are followed later in the string by the same letter to upper case.</p>\n\n<pre><code>str1 = str.gsub(/(.)(?=.*\\1)/) { |s| s.upcase }\n  #=&gt; \"bANAnas\n</code></pre>\n\n<p><p></p>2. Remove the lowercase letters.</p>\n\n<pre><code>str2 = str1.gsub(/\\p{Ll}/, '')\n  #=&gt; \"ANA\"\n</code></pre>\n\n<p><p></p>3. Remove duplicates of the letters that remain.</p>\n\n<pre><code>str3 = str2.gsub(/(.)(?=.*\\1)/, '')\n  #=&gt; \"NA\"\n</code></pre>\n\n<p><p></p>4. Downcase <code>str3</code> if desired.</p>\n\n<pre><code>str3.downcase\n  #=&gt; \"na\"\n</code></pre>\n\n<p><code>(?=.*\\1)</code> is a <em>positive lookahead</em>.</p>\n\n<p>If the requirement that a regular expression be used is lifted, one could write:</p>\n\n<pre><code>str.each_char.with_object(Hash.new(0)) { |c,h| h[c] += 1 }.\n    select { |_,count| count &gt; 1 }.\n    keys\n  #=&gt; [\"a\", \"n\"]\n</code></pre>\n\n<p>Here</p>\n\n<pre><code>str.each_char.with_object(Hash.new(0)) { |c,h| h[c] += 1 }\n  #=&gt; {\"b\"=&gt;1, \"a\"=&gt;3, \"n\"=&gt;2, \"s\"=&gt;1}\n</code></pre>\n\n<p>This uses the second form of <a href=\"http://ruby-doc.org/core-2.5.1/Hash.html#method-c-new\" rel=\"nofollow noreferrer\">Hash::new</a>, which takes an argument that is referred to as the <em>default value</em>. <code>h[c] += 1</code> expands to <code>h[c] = h[c] + 1</code>. If <code>h</code> does not have a key <code>c</code>, <code>h[c]</code> on the right of the equality returns the default value of zero, yielding <code>h[c] = 0 + 1</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1560062764, "creation_date": 1560062764, "answer_id": 56512543, "question_id": 56511180, "link": "https://stackoverflow.com/questions/56511180/how-to-only-match-letters-that-occur-more-than-once-in-a-string-using-regex/56512543#56512543", "title": "How to only match letters that occur more than once in a string, using regex?", "body": "<p>You do not need a regular expression here.</p>\n\n<pre><code>\"bananas\".\n    downcase.\n    unicode_normalize(:nfc).\n    each_char.\n    with_object([Set.new, []]) do |e, (result, temp)|\n  (temp.include?(e) ? result : temp) &lt;&lt; e\nend.first.to_a.join\n#\u21d2\u00a0\"an\"\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>\"bananas\".\n    downcase.\n    unicode_normalize(:nfc).\n    chars.\n    group_by(&amp;:itself).\n    reject { |_, e| e.count == 1 }.\n    keys.\n    join\n#\u21d2 \"an\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1560140882, "post_id": 56513142, "comment_id": 99625666, "body": "C\u2019mon, you live in Mu\u0308nchen, you should know why <code>&quot;&#228;&quot; == &quot;a\u0308&quot; #\u21d2 false</code> (the example is copy-pasteable.) The code above will fail on combined diacritics, <code>String#unicode_normalize(:nfc)</code> call is mandatory before calling <code>chars</code>. Try e. g. <code>&quot;&#196;pfelsa\u0308ure&quot;</code> :)"}], "tags": [], "owner": {"reputation": 27685, "user_id": 610979, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ku5ga.png?s=128&g=1", "display_name": "Frank Schmitt", "link": "https://stackoverflow.com/users/610979/frank-schmitt"}, "is_accepted": false, "score": 0, "last_activity_date": 1561039142, "last_edit_date": 1561039142, "creation_date": 1560069516, "answer_id": 56513142, "question_id": 56511180, "link": "https://stackoverflow.com/questions/56511180/how-to-only-match-letters-that-occur-more-than-once-in-a-string-using-regex/56513142#56513142", "title": "How to only match letters that occur more than once in a string, using regex?", "body": "<p>If you absolutely have to use regular expressions, you can first sort the characters in your input string and then use a regex to check for repeating characters (I shamelessly stole the regex from @AlekseiMatiushkin's answer):</p>\n\n<pre><code>input = \"A man a plan a canal Panama - \u00c4pfels\u00e4ure\".split()\n\nre = /(\\p{Ll})\\1/\n\ninput.each do |w|\n  sorted = w.downcase.unicode_normalize(:nfc).chars.sort().join()\n  puts w if sorted =~ re\nend\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 11522316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb3c7a93059868ee4c00b46bd40c4d9?s=128&d=identicon&r=PG&f=1", "display_name": "Avery", "link": "https://stackoverflow.com/users/11522316/avery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1671, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1581285614, "creation_date": 1560041426, "last_edit_date": 1560041745, "question_id": 56511180, "link": "https://stackoverflow.com/questions/56511180/how-to-only-match-letters-that-occur-more-than-once-in-a-string-using-regex", "title": "How to only match letters that occur more than once in a string, using regex?", "body": "<p>I am trying to only match letters that appear more than once(twice or more) in a string , using regex for ruby. I came up with the regular expression below but it does not seem to work. I'd appreciate if someone could explain why my regex does not work and tell me how it should be in order for it to work.</p>\n\n<pre><code>/[a-z]{2,}/\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1560038855, "post_id": 56510921, "comment_id": 99608866, "body": "Why do you want to use your <code>promoted?</code> method instead of <code>promoted_posts</code>? What is <code>@posts</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 11530585, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-s7MOFD9RSlY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGY4gDshJQMuCG_v7x_es3za-BqA/mo/photo.jpg?sz=128", "display_name": "Andy Walker", "link": "https://stackoverflow.com/users/11530585/andy-walker"}, "edited": false, "score": 0, "creation_date": 1560040223, "post_id": 56511051, "comment_id": 99609049, "body": "When I try &quot;Post.all.find_all(&amp;:promoted)&quot; in my show action in my posts controller I get an error &quot;undefined method `promoted&#39; for #&lt;Post:0x00007fd9a0f1c788&gt; Did you mean? promoted?&quot;"}, {"owner": {"reputation": 2356, "user_id": 1547872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/x2Brf.jpg?s=128&g=1", "display_name": "dileep nandanam", "link": "https://stackoverflow.com/users/1547872/dileep-nandanam"}, "reply_to_user": {"reputation": 67, "user_id": 11530585, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-s7MOFD9RSlY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGY4gDshJQMuCG_v7x_es3za-BqA/mo/photo.jpg?sz=128", "display_name": "Andy Walker", "link": "https://stackoverflow.com/users/11530585/andy-walker"}, "edited": false, "score": 0, "creation_date": 1560040526, "post_id": 56511051, "comment_id": 99609081, "body": "I missed a &quot;?&quot; :)"}], "tags": [], "owner": {"reputation": 2356, "user_id": 1547872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/x2Brf.jpg?s=128&g=1", "display_name": "dileep nandanam", "link": "https://stackoverflow.com/users/1547872/dileep-nandanam"}, "is_accepted": true, "score": 0, "last_activity_date": 1560040612, "last_edit_date": 1560040612, "creation_date": 1560039328, "answer_id": 56511051, "question_id": 56510921, "link": "https://stackoverflow.com/questions/56510921/loop-through-posts-that-is-promote/56511051#56511051", "title": "Loop through posts that is promote", "body": "<p>If you are desperately in need of using the promoted, you can try</p>\n\n<pre><code>Post.all.find_all(&amp;:promoted?)\n</code></pre>\n\n<p>which is short notation of</p>\n\n<pre><code>Post.all.find_all do |post|\n    post.promoted?\nend\n</code></pre>\n\n<p>which is kinda n+1 query and opting it while you can just use</p>\n\n<pre><code>Post.joins :subscriptions\n</code></pre>\n\n<p>is a fail.</p>\n"}], "owner": {"reputation": 67, "user_id": 11530585, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-s7MOFD9RSlY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGY4gDshJQMuCG_v7x_es3za-BqA/mo/photo.jpg?sz=128", "display_name": "Andy Walker", "link": "https://stackoverflow.com/users/11530585/andy-walker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 56511051, "answer_count": 1, "score": 0, "last_activity_date": 1560040612, "creation_date": 1560037451, "question_id": 56510921, "link": "https://stackoverflow.com/questions/56510921/loop-through-posts-that-is-promote", "title": "Loop through posts that is promote", "body": "<p>How to loop through post that are on promoted. I have a method in my post model that I can access. How would I call it in this instance. For example here are my methods my post model.</p>\n\n<pre><code>class Post &lt; ApplicationRecord\ndef promoted?\n    subscriptions.present?\n  end\n\n  def self.promoted_posts\n    Post.joins(:subscriptions).where(:subscriptions =&gt; {:is_active =&gt; true})\n  end\n\n  def self.not_promoted_posts\n    Post.left_outer_joins(:subscriptions).where(:subscriptions =&gt; {:post_id =&gt; nil})\n  end\n\n  def self.ordered_posts\n    Post.promoted_posts + Post.not_promoted_posts\n  end\nend\n</code></pre>\n\n<p>Here is my view. I would like to loop through all the posts that are promoted which is the method \"def promoted?\" in my model</p>\n\n<pre><code>&lt;% @posts.take(6).each do |post| %&gt;\n      &lt;div class=\"col-xs-6 col-sm-6 col-md-6 col-lg-4\"&gt;\n        &lt;div class=\"featured-box\"&gt;\n          &lt;figure&gt;\n            &lt;%= link_to image_tag(post.images.first, class: 'img-fluid'), post %&gt;\n          &lt;/figure&gt;\n          &lt;div class=\"feature-content\"&gt;\n            &lt;div class=\"product\"&gt;\n              &lt;p&gt;&lt;%= post.category.name %&gt; / &lt;%= post.subcategory.name %&gt;&lt;/p&gt;\n            &lt;/div&gt;\n            &lt;h4&gt;&lt;%= link_to post.title, post %&gt;&lt;/h4&gt;\n            &lt;ul class=\"address\"&gt;\n              &lt;li&gt;\n                Ad#: &lt;%= post.ad_number %&gt;\n              &lt;/li&gt;\n              &lt;li&gt;\n                posted &lt;%= time_ago_in_words(post.created_at) %&gt; ago\n              &lt;/li&gt;\n              &lt;li&gt;\n                &lt;%= post.state%&gt; , &lt;%= post.city.downcase %&gt;\n              &lt;/li&gt;\n            &lt;/ul&gt;\n            &lt;div class=\"listing-bottom\"&gt;\n              &lt;h3 class=\"price float-left\"&gt;$&lt;%= post.price%&gt;&lt;/h3&gt;\n              &lt;%= link_to 'Feature Ad', post, class: 'btn-verified float-right', style: 'color: red;' %&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 38258, "user_id": 560593, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99c93a3c235763708dd7263e197acdc6?s=128&d=identicon&r=PG", "display_name": "Patrick Evans", "link": "https://stackoverflow.com/users/560593/patrick-evans"}, "edited": false, "score": 0, "creation_date": 1560036363, "post_id": 56510789, "comment_id": 99608577, "body": "None of your code adds the new comment to the page, just the response from the server which doesnt include the posted comment unless you arent showing that code"}, {"owner": {"reputation": 1562, "user_id": 1845464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2704f8f368ca132fc95afeb3cd3693e?s=128&d=identicon&r=PG", "display_name": "Ali Humayun", "link": "https://stackoverflow.com/users/1845464/ali-humayun"}, "edited": false, "score": 0, "creation_date": 1560036614, "post_id": 56510789, "comment_id": 99608609, "body": "best way is to append comments through js"}, {"owner": {"reputation": 41, "user_id": 9221123, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214337241412532/picture?type=large", "display_name": "Christian Dziwornu", "link": "https://stackoverflow.com/users/9221123/christian-dziwornu"}, "reply_to_user": {"reputation": 1562, "user_id": 1845464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2704f8f368ca132fc95afeb3cd3693e?s=128&d=identicon&r=PG", "display_name": "Ali Humayun", "link": "https://stackoverflow.com/users/1845464/ali-humayun"}, "edited": false, "score": 0, "creation_date": 1560040515, "post_id": 56510789, "comment_id": 99609080, "body": "@AliHumayun How will I go about that?"}, {"owner": {"reputation": 1562, "user_id": 1845464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2704f8f368ca132fc95afeb3cd3693e?s=128&d=identicon&r=PG", "display_name": "Ali Humayun", "link": "https://stackoverflow.com/users/1845464/ali-humayun"}, "edited": false, "score": 0, "creation_date": 1560163393, "post_id": 56510789, "comment_id": 99633561, "body": "$(&quot;#div&quot;).append(comments);  so basically you will send js post to server and will also add comments on front end. Will look seamless."}, {"owner": {"reputation": 41, "user_id": 9221123, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214337241412532/picture?type=large", "display_name": "Christian Dziwornu", "link": "https://stackoverflow.com/users/9221123/christian-dziwornu"}, "reply_to_user": {"reputation": 1562, "user_id": 1845464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2704f8f368ca132fc95afeb3cd3693e?s=128&d=identicon&r=PG", "display_name": "Ali Humayun", "link": "https://stackoverflow.com/users/1845464/ali-humayun"}, "edited": false, "score": 0, "creation_date": 1560230580, "post_id": 56510789, "comment_id": 99656054, "body": "@AliHumayun I&#39;ve tried what you&#39;ve suggested. Just posts the text &#39;comments&#39; below the previous comments. How do I grab the text in the comments form to append? I don&#39;t know js. this has been based off tutorials"}, {"owner": {"reputation": 1562, "user_id": 1845464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2704f8f368ca132fc95afeb3cd3693e?s=128&d=identicon&r=PG", "display_name": "Ali Humayun", "link": "https://stackoverflow.com/users/1845464/ali-humayun"}, "edited": false, "score": 0, "creation_date": 1560252130, "post_id": 56510789, "comment_id": 99666752, "body": "comments must be something you are reading through div or textbox you can use same value here"}], "answers": [{"tags": [], "owner": {"reputation": 2356, "user_id": 1547872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/x2Brf.jpg?s=128&g=1", "display_name": "dileep nandanam", "link": "https://stackoverflow.com/users/1547872/dileep-nandanam"}, "is_accepted": false, "score": 0, "last_activity_date": 1560042088, "creation_date": 1560042088, "answer_id": 56511227, "question_id": 56510789, "link": "https://stackoverflow.com/questions/56510789/comments-javascript-not-working-updating-only-after-page-reload/56511227#56511227", "title": "Comments javascript not working. Updating only after page reload", "body": "<pre><code>$(xhr.responseText).hide().insertAfter($(this))\n</code></pre>\n\n<p>appends a div containing your xhr.responseText with inline style \"display: none\" after  and returns no jquery handle at all.</p>\n\n<pre><code>$(xhr.responseText).hide().insertAfter($(this)).length\n&gt; 0\n</code></pre>\n\n<p>so select the new div as sibling of form element and cast show('slow')</p>\n\n<pre><code>$(this).siblings('div').show('slow')\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 9221123, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214337241412532/picture?type=large", "display_name": "Christian Dziwornu", "link": "https://stackoverflow.com/users/9221123/christian-dziwornu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 393, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1560042088, "creation_date": 1560035616, "question_id": 56510789, "link": "https://stackoverflow.com/questions/56510789/comments-javascript-not-working-updating-only-after-page-reload", "title": "Comments javascript not working. Updating only after page reload", "body": "<p>So I have put together a comment section on my rails app from a couple tutorials online. Everything works well, except that when I post a comment, it doesn't get displayed unless I reload the page. I'm using the acts_as_commentable_with_threading gem.</p>\n\n<p>Here's my comments controller:</p>\n\n<pre><code>class CommentsController &lt; ApplicationController\n  before_action :authenticate_user!\n  def create\n    commentable = commentable_type.constantize.find(commentable_id)\n    @comment = Comment.build_from(commentable, current_user.id, body)\n\n\n    if @comment.save\n      make_child_comment\n      redirect_back fallback_location: root_path, :notice =&gt; 'Comment was successfully added.'\n    else\n      render :action =&gt; \"new\"\n    end\n  end\n\n  private\n\n  def comment_params\n    params.require(:comment).permit(:body, :commentable_id, :commentable_type, :comment_id)\n  end\n\n  def commentable_type\n    comment_params[:commentable_type]\n  end\n\n  def commentable_id\n    comment_params[:commentable_id]\n  end\n\n  def comment_id\n    comment_params[:comment_id]\n  end\n\n  def body\n    comment_params[:body]\n  end\n\n  def make_child_comment\n    return \"\" if comment_id.blank?\n\n    parent_comment = Comment.find comment_id\n    @comment.move_to_child_of(parent_comment)\n  end\nend\n</code></pre>\n\n<p>Here are my view files. \n_form partial:</p>\n\n<pre><code>.comment-form\n  = simple_form_for @new_comment, :remote =&gt; true do |f|\n    = f.input :commentable_id, :as =&gt; :hidden, :value =&gt; @new_comment.commentable_id\n    = f.input :commentable_type, :as =&gt; :hidden, :value =&gt; @new_comment.commentable_type\n    .field.form-group\n      = f.input :body, :input_html =&gt; { :rows =&gt; \"2\" }, :label =&gt; false\n    .field.form-group\n      = f.button :submit, :class =&gt; \"btn btn-primary\", :disable_with =&gt; \"Submitting\u2026\"\n</code></pre>\n\n<p>_reply.html.haml</p>\n\n<pre><code>- comments.each do |comment|\n  .comments-show\n    .comment\n      .media.mb-4\n        .d-flex.mr-3\n\n          .float-left.image\n            - if comment.user.profile_image.present?\n              .review-img\n                = image_tag attachment_url(comment.user, :profile_image, :fit, 50, 50,  format: \"jpg\")\n            - else\n              %img.review-img{:alt =&gt; \"user profile image\", :src =&gt; \"https://img.icons8.com/bubbles/100/000000/user.png\"}/\n        .media-body\n          .small\n            %b\n              - if comment.user.username.present?\n                {comment.user.username}\n              - else\n                {comment.user.full_name}\n          .small.text-muted\n            {time_ago_in_words(comment.created_at)} ago\n          .small\n            {content_tag(:div, comment.body, style: \"white-space: pre-wrap;\")}\n            %br\n          .comment-nav\n            %a.comment-reply{:href =&gt; \"#/\", class: \"btn btn-sm btn-link\"} reply\n          .reply-form\n            = simple_form_for @new_comment do |f|\n              = f.hidden_field :commentable_id, value: @new_comment.commentable_id\n              = f.hidden_field :commentable_type, value: @new_comment.commentable_type\n              = f.hidden_field :comment_id, value: comment.id\n              .field.form-group\n                = f.text_area :body, class: 'form-control'\n              .field.form-group{:style =&gt; \"margin-bottom: 60px\"}\n                = submit_tag \"Post Reply\", class: 'btn btn-primary', style: \"float: right;\"\n      %div{:style =&gt; \"margin-left: 100px;\"}\n        = render partial: \"comments/reply\", locals: {comments: comment.children}\n</code></pre>\n\n<p>_template.html.haml</p>\n\n<pre><code>.card.my-2\n  .scrollable\n    .card-body\n      %b\n        #{pluralize(commentable.comment_threads.count, \"Comment\")}\n      %hr\n\n      = render :partial =&gt; 'comments/form', :locals =&gt; { new_comment: new_comment }\n      = render partial: 'comments/reply', locals: {comments: commentable.root_comments}\n</code></pre>\n\n<p>comments.js.coffee</p>\n\n<pre><code>$ -&gt;\n  $('.comment-reply').click -&gt;\n    $(this).closest('.comment').find('.reply-form').toggle()\n    return\n\n\njQuery -&gt;\n  $(\".comment-form\")\n    .on \"ajax:beforeSend\", (evt, xhr, settings) -&gt;\n      $(this).find('textarea')\n        .addClass('uneditable-input')\n        .attr('disabled', 'disabled');\n    .on \"ajax:success\", (evt, data, status, xhr) -&gt;\n      $(this).find('textarea')\n        .removeClass('uneditable-input')\n        .removeAttr('disabled', 'disabled')\n        .val('');\n      $(xhr.responseText).hide().insertAfter($(this)).show('slow')\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "actionmailer"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 2, "creation_date": 1560033123, "post_id": 56510563, "comment_id": 99608180, "body": "I assume you&#39;ve confirmed the user name and password from <code>ENV</code> is the same as what you tested on <code>localhost</code>?"}, {"owner": {"reputation": 138, "user_id": 10013290, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OJdm_xmOTQ4/AAAAAAAAAAI/AAAAAAAAAb8/CfK9VdvijTs/photo.jpg?sz=128", "display_name": "Austin Burke", "link": "https://stackoverflow.com/users/10013290/austin-burke"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1560034033, "post_id": 56510563, "comment_id": 99608308, "body": "@lurker wow. Thanks, it&#39;s nice to be humbled."}], "answers": [{"tags": [], "owner": {"reputation": 124, "user_id": 4163268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f3049ec142c2aff3d86158e5825d6e3?s=128&d=identicon&r=PG&f=1", "display_name": "FullMetalEngineer", "link": "https://stackoverflow.com/users/4163268/fullmetalengineer"}, "is_accepted": false, "score": 0, "last_activity_date": 1560098749, "creation_date": 1560098749, "answer_id": 56516504, "question_id": 56510563, "link": "https://stackoverflow.com/questions/56510563/ruby-on-rails-not-receiving-welcome-email-in-production/56516504#56516504", "title": "Ruby on Rails - Not receiving &#39;Welcome Email&#39; in Production", "body": "<p>I don't see any major issues with your code. First thing I'd check is to make sure the credentials are correct. If that's not the issue, without log information, I'm not sure of the problem.</p>\n"}, {"tags": [], "owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "is_accepted": false, "score": 0, "last_activity_date": 1560126730, "creation_date": 1560126730, "answer_id": 56519356, "question_id": 56510563, "link": "https://stackoverflow.com/questions/56510563/ruby-on-rails-not-receiving-welcome-email-in-production/56519356#56519356", "title": "Ruby on Rails - Not receiving &#39;Welcome Email&#39; in Production", "body": "<p>From the <a href=\"https://guides.rubyonrails.org/action_mailer_basics.html#action-mailer-configuration-for-gmail\" rel=\"nofollow noreferrer\">guides</a></p>\n\n<blockquote>\n  <p>Note: As of July 15, 2014, Google increased its security measures and now blocks attempts from apps it deems less secure. You can change your Gmail settings here to allow the attempts. If your Gmail account has 2-factor authentication enabled, then you will need to set an app password and use that instead of your regular password. Alternatively, you can use another ESP to send email by replacing 'smtp.gmail.com' above with the address of your provider.</p>\n</blockquote>\n\n<p>Can you check your gmail security settings from that article link? I'm wondering if the production host is blocked because it's coming from something that might seem less secure (a hosted server, versus your local computer)</p>\n"}], "owner": {"reputation": 138, "user_id": 10013290, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OJdm_xmOTQ4/AAAAAAAAAAI/AAAAAAAAAb8/CfK9VdvijTs/photo.jpg?sz=128", "display_name": "Austin Burke", "link": "https://stackoverflow.com/users/10013290/austin-burke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1560126730, "creation_date": 1560032876, "question_id": 56510563, "link": "https://stackoverflow.com/questions/56510563/ruby-on-rails-not-receiving-welcome-email-in-production", "title": "Ruby on Rails - Not receiving &#39;Welcome Email&#39; in Production", "body": "<p>I'm attempting to send a welcome email when a new user is created via Action Mailer. I've followed the guide here: <a href=\"https://guides.rubyonrails.org/action_mailer_basics.html\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/action_mailer_basics.html</a></p>\n\n<p>The email is successful when creating a user on localhost:3000, but when I deploy and test in production environment (Heroku), no success.</p>\n\n<p>Even worse, I'm not seeing errors in the Heroku logs.</p>\n\n<p>I'm not really sure what to check at this point. I've tried moving everything to my application.rb file since the configuration is the same (see: <a href=\"https://stackoverflow.com/questions/34980701/actionmailer-doesnt-work-in-production\">ActionMailer doesn&#39;t work in production</a>)</p>\n\n<p>I thought that it may be sending a delayed message, but I've already tried \n<code>UserMailer.with(user: @user).welcome_email.deliver_later</code> as well as <code>deliver_now</code> </p>\n\n<h2>config/application.rb</h2>\n\n<pre><code>config.action_mailer.delivery_method = :smtp\n    config.action_mailer.smtp_settings = {\n      address:              'smtp.gmail.com',\n      port:                 587,\n      domain:               'gmail.com',\n      user_name:            ENV[\"GMAIL_USERNAME\"],\n      password:             ENV[\"GMAIL_PASSWORD\"],\n      authentication:       'plain',\n      enable_starttls_auto: true }\n</code></pre>\n\n<h2>config/environments/production.rb</h2>\n\n<pre><code>config.action_mailer.raise_delivery_errors = false\nconfig.action_mailer.perform_caching = false\n\n</code></pre>\n\n<h2>mailers/user_mailer</h2>\n\n<pre><code>class UserMailer &lt; ApplicationMailer\n  default from: 'pickleballsocial@gmail.com'\n\n  def welcome_email\n    @user = params[:user]\n    @url  = 'https://pickleballsocial.herokuapp.com'\n    mail(to: @user.email, subject: 'Welcome Pickleball Social')\n  end\nend\n</code></pre>\n\n<h2>users_controller</h2>\n\n<pre><code>def create\n    @user = User.new(user_params)\n\n    respond_to do |format|\n      if @user.save\n        session[:user_id] = @user.id\n        # Tell the UserMailer to send a welcome email after save\n        UserMailer.with(user: @user).welcome_email.deliver_later\n\n        format.html { redirect_to(@user, notice: 'User was successfully created.') }\n        format.json { render json: @user, status: :created, location: @user }\n\n        #redirect_to user_path(@user)\n      else\n        format.html { render action: 'new' }\n        format.json { render json: @user.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n</code></pre>\n"}]