[{"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5104689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a41a3cc95b015592aa0c151e2d4ca8b?s=128&d=identicon&r=PG&f=1", "display_name": "Jr2342342", "link": "https://stackoverflow.com/users/5104689/jr2342342"}, "edited": false, "score": 0, "creation_date": 1444884109, "post_id": 33137373, "comment_id": 54090804, "body": "Thanks for the reply @tompave I will certainly take this advice into consideration"}], "tags": [], "owner": {"reputation": 9917, "user_id": 1586221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/96ab4c67eb62b315a8e7584f7dfd547a?s=128&d=identicon&r=PG", "display_name": "tompave", "link": "https://stackoverflow.com/users/1586221/tompave"}, "is_accepted": true, "score": 2, "last_activity_date": 1444865657, "last_edit_date": 1444865657, "creation_date": 1444865305, "answer_id": 33137373, "question_id": 33137257, "link": "https://stackoverflow.com/questions/33137257/in-ruby-on-rails-is-it-standard-to-use-hashes-or-classes/33137373#33137373", "title": "In Ruby on Rails is it standard to use hashes or classes?", "body": "<p>The short answer: go with <code>Hash</code>.</p>\n\n<p>The long answer: it depends.<br>\nWhat do you need to do with this data? If you know that you'll need to manipulate it, or that you'll end up with a lot of helper functions to extract and present subset of the data, then a dedicated class might serve you better.  </p>\n\n<p>Still, there is a spectrum of possibilities.\nA minimum approach would be to not use a \"class with public properties\", but instead a thin class with composition. Define a ruby class that holds the deserialized JSON in a <code>Hash</code>, then define instance methods that act on the <code>Hash</code>.<br>\nAt the other end of the spectrum we have classes with attributes that hold all the deserialized data. These work well if the deserialized data will act as an entity in your application as opposed to plain stuff to be temporarily held in memory and presented. See also <a href=\"http://c2.com/cgi/wiki?ValueObject\" rel=\"nofollow\">value objects</a>.</p>\n"}], "owner": {"reputation": 15, "user_id": 5104689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a41a3cc95b015592aa0c151e2d4ca8b?s=128&d=identicon&r=PG&f=1", "display_name": "Jr2342342", "link": "https://stackoverflow.com/users/5104689/jr2342342"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 33137373, "answer_count": 1, "score": 1, "last_activity_date": 1444865657, "creation_date": 1444864604, "last_edit_date": 1444865294, "question_id": 33137257, "link": "https://stackoverflow.com/questions/33137257/in-ruby-on-rails-is-it-standard-to-use-hashes-or-classes", "title": "In Ruby on Rails is it standard to use hashes or classes?", "body": "<p>I am retrieving JSON from a third party API, and want to bind that information to the front end. I thought of creating a class for the information, but I've also noticed that hashes can be used. What is the standard convention in Rails? Should I bind directly to the front end using a hash? Or should I model my own classes and then bind?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "ruby-on-rails-4", "haml"], "answers": [{"comments": [{"owner": {"reputation": 516, "user_id": 3295407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/WqEep.png?s=128&g=1", "display_name": "etdev", "link": "https://stackoverflow.com/users/3295407/etdev"}, "edited": false, "score": 0, "creation_date": 1444870497, "post_id": 33137318, "comment_id": 54087449, "body": "You can also render the collection with <code>= render partial: &quot;dog&quot;, collection: @dogs</code> which will automatically create a <code>dog</code> local variable for you <a href=\"http://api.rubyonrails.org/classes/ActionView/PartialRenderer.html#class-ActionView::PartialRenderer-label-Rendering+a+collection+of+partials\" rel=\"nofollow noreferrer\">(relevant docs)</a>"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 516, "user_id": 3295407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/WqEep.png?s=128&g=1", "display_name": "etdev", "link": "https://stackoverflow.com/users/3295407/etdev"}, "edited": false, "score": 1, "creation_date": 1444912588, "post_id": 33137318, "comment_id": 54106703, "body": "@etdev Again, that&#39;s a dated way that you should avoid. The better way is to simply <code>= render @dogs</code>, which is the new and functionally identical way."}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": true, "score": 6, "last_activity_date": 1444912746, "last_edit_date": 1444912746, "creation_date": 1444864988, "answer_id": 33137318, "question_id": 33137224, "link": "https://stackoverflow.com/questions/33137224/rendering-partials-in-haml-and-passing-variable-to-it/33137318#33137318", "title": "Rendering partials in haml and passing variable to it", "body": "<p>You're mixing together two different ways of rendering partials.</p>\n\n<p>Use either this (legacy) form...</p>\n\n<pre><code>render partial: 'dog', locals: {dog: dog}\n</code></pre>\n\n<p><strong>or</strong> this newer form:</p>\n\n<pre><code>render 'dog', dog: dog\n</code></pre>\n\n<p><strong>or</strong> this <em>even better</em> newer form, which you should prefer:</p>\n\n<pre><code>= render dog\n</code></pre>\n\n<p>but not the version you've written. You've taken the <code>render 'dog'</code> part from the second way, and the <code>locals: { dog: dog }</code> part from the first way. That  passes a single local called <code>locals</code>, which has a value of a hash.</p>\n\n<p>The third way is the preferred way. If you have an ActiveModel object, you can simply call <code>render &lt;object&gt;</code> and it will <em>automatically</em> choose the right partial for you based on the name of the model.</p>\n\n<p>This works for collections of ActiveRecord models as well. You should be dropping your <code>@dogs.each</code> loop completely, and simply be calling</p>\n\n<pre><code>= render @dogs\n</code></pre>\n\n<p>This will <em>automatically</em> invoke <code>= render dog</code> for every dog in the collection. You just need to move your <code>.dog</code> inside the <code>_dog</code> partial.</p>\n"}], "owner": {"reputation": 93, "user_id": 3146948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65641b5a1dda9fdec049ea8677ebb270?s=128&d=identicon&r=PG&f=1", "display_name": "piechos", "link": "https://stackoverflow.com/users/3146948/piechos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4677, "favorite_count": 2, "accepted_answer_id": 33137318, "answer_count": 1, "score": 2, "last_activity_date": 1444912746, "creation_date": 1444864378, "question_id": 33137224, "link": "https://stackoverflow.com/questions/33137224/rendering-partials-in-haml-and-passing-variable-to-it", "title": "Rendering partials in haml and passing variable to it", "body": "<p>I'm trying to render my partials by iterating through variables and then pass specific variable to the partial but it doesn't see this variable.</p>\n\n<p>Here I'm rendering it </p>\n\n<p>(dogs.html.haml)</p>\n\n<pre><code>- dogs.each do |dog|\n    .dog\n      = render 'dog', :locals =&gt; { :dog =&gt; dog }\n</code></pre>\n\n<p>And then I want variable dog to be visible in my partial</p>\n\n<p>(_dog.html.haml)</p>\n\n<pre><code>.title\n  = dog.name\n</code></pre>\n\n<p>But it's not visible</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby", "paypal"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1444873162, "post_id": 33136568, "comment_id": 54088036, "body": "If you need help during testing, I would be glad to help. My email address is in my profile."}], "answers": [{"tags": [], "owner": {"reputation": 2820, "user_id": 431938, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9eadc153e79fb73a74acdc7f42003bfa?s=128&d=identicon&r=PG", "display_name": "tomwhipple", "link": "https://stackoverflow.com/users/431938/tomwhipple"}, "is_accepted": false, "score": 0, "last_activity_date": 1445259756, "creation_date": 1445259756, "answer_id": 33215162, "question_id": 33136568, "link": "https://stackoverflow.com/questions/33136568/how-to-make-a-ruby-application-to-send-money-to-specific-users/33215162#33215162", "title": "How to make a Ruby application to send money to specific users?", "body": "<p>This might be a good case for the <a href=\"https://developer.paypal.com/docs/api/#payouts\" rel=\"nofollow\">Payouts API</a>, which is also supported by the <a href=\"https://github.com/paypal/PayPal-Ruby-SDK\" rel=\"nofollow\">Ruby SDK</a>.</p>\n\n<p>To fund the payout with minimal fees, you'll want to have the payout amount already in your PayPal account or link to your bank account.</p>\n"}], "owner": {"reputation": 943, "user_id": 3861062, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100003054720441/picture?type=large", "display_name": "Sungpah Lee", "link": "https://stackoverflow.com/users/3861062/sungpah-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1445259756, "creation_date": 1444861052, "question_id": 33136568, "link": "https://stackoverflow.com/questions/33136568/how-to-make-a-ruby-application-to-send-money-to-specific-users", "title": "How to make a Ruby application to send money to specific users?", "body": "<p>I'm a Ruby user, who is trying to make a Ruby application that allows me to pay to my friends. My friends have Paypal account individually (i.e. sungpahfriend@hello.com ). I have a particular amount of money that I have to pay to my friends. \nI have a business account. ( sungpah@hello.com ). \nBut I can't find how I can pay to my friend.</p>\n\n<p>Do I have to put my credit card information or just my email address and amount of money? Also where should I put my friend's email address?</p>\n\n<p>I really want to know how to this effectively. I'm looking forward to getting a feedback! </p>\n\n<p>Best</p>\n\n<pre><code>require 'paypal-sdk-rest'\n    PayPal::SDK::Core::Config.load('config/paypal.yml',  ENV['RACK_ENV'] || 'development')\n    PayPal::SDK.logger = Logger.new(STDERR)\n\n    PayPal::SDK.logger.level = Logger::INFO\n\n\n    PayPal::SDK.configure({\n      :mode =&gt; \"sandbox\",\n      :client_id =&gt; \"xxx-xx\",\n      :client_secret =&gt; \"xx-xx\"\n    })\n\n\n    @payment = PayPal::SDK::REST::Payment.new({\n      :intent =&gt; \"sale\",\n      :payer =&gt; {\n        :payment_method =&gt; \"credit_card\",\n        :funding_instruments =&gt; [{\n          :credit_card =&gt; {\n            :type =&gt; \"visa\",\n            :number =&gt; \"4567516310777851\",\n            :expire_month =&gt; \"11\",\n            :expire_year =&gt; \"2018\",\n            :cvv2 =&gt; \"874\",\n            :first_name =&gt; \"Joe\",\n            :last_name =&gt; \"Shopper\",\n            :billing_address =&gt; {\n              :line1 =&gt; \"52 N Main ST\",\n              :city =&gt; \"Johnstown\",\n              :state =&gt; \"OH\",\n              :postal_code =&gt; \"43210\",\n              :country_code =&gt; \"US\" }}}]},\n      :transactions =&gt; [{\n        :item_list =&gt; {\n          :items =&gt; [{\n            :name =&gt; \"item\",\n            :sku =&gt; \"item\",\n            :price =&gt; \"1\",\n            :currency =&gt; \"USD\",\n            :quantity =&gt; 1 }]},\n        :amount =&gt; {\n          :total =&gt; \"1.00\",\n          :currency =&gt; \"USD\" },\n        :description =&gt; \"This is the payment transaction description.\" }]})\n\n    # Create Payment and return the status(true or false)\n    if @payment.create\n      @payment.id     # Payment Id\n    else\n      @payment.error  # Error Hash\n    end\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/fHaws.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fHaws.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "angularjs"], "answers": [{"tags": [], "owner": {"reputation": 1685, "user_id": 779519, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/VSdX1.png?s=128&g=1", "display_name": "Federico Giust", "link": "https://stackoverflow.com/users/779519/federico-giust"}, "is_accepted": false, "score": 1, "last_activity_date": 1444860882, "creation_date": 1444860882, "answer_id": 33136520, "question_id": 33136464, "link": "https://stackoverflow.com/questions/33136464/angularjs-rails-giving-blank-page/33136520#33136520", "title": "AngularJS Rails giving blank page", "body": "<p>Found the problem.</p>\n\n<p>I still had the script tags in the partials _home.html and _posts.html.</p>\n\n<p>I removed the script tags and it works fine now.</p>\n"}], "owner": {"reputation": 1685, "user_id": 779519, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/VSdX1.png?s=128&g=1", "display_name": "Federico Giust", "link": "https://stackoverflow.com/users/779519/federico-giust"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444860882, "creation_date": 1444860577, "question_id": 33136464, "link": "https://stackoverflow.com/questions/33136464/angularjs-rails-giving-blank-page", "title": "AngularJS Rails giving blank page", "body": "<p>I'm following the tutorials at <a href=\"https://thinkster.io/angular-rails\" rel=\"nofollow\">thinkster.io/angular-rails</a></p>\n\n<p>So far I got to end of this stage</p>\n\n<blockquote>\n  <p>Integrating the Front-end with the Asset Pipeline</p>\n</blockquote>\n\n<p>But now my app is giving me a blank page with no errors on Chrome console or WebRick console either</p>\n\n<p>This is what I see when trying to go to <a href=\"http://localhost:3000/#/home\" rel=\"nofollow\">http://localhost:3000/#/home</a></p>\n\n<pre><code>Started GET \"/\" for ::1 at 2015-10-14 18:57:54 -0300\nProcessing by ApplicationController#angular as HTML\n  Rendered layouts/application.html.erb within layouts/application (95.2ms)\nCompleted 200 OK in 177ms (Views: 176.4ms | ActiveRecord: 0.0ms)\n\n\nStarted GET \"/assets/bootstrap/dist/css/bootstrap.css.map\" for ::1 at 2015-10-14 18:57:59 -0300\n</code></pre>\n\n<p>If I try to go to <a href=\"http://localhost:3000\" rel=\"nofollow\">http://localhost:3000</a>, I see all this on WebRick </p>\n\n<pre><code>Started GET \"/\" for ::1 at 2015-10-14 19:02:09 -0300\nProcessing by ApplicationController#angular as HTML\n  Rendered layouts/application.html.erb within layouts/application (55.3ms)\nCompleted 200 OK in 106ms (Views: 105.9ms | ActiveRecord: 0.0ms)\n\n\nStarted GET \"/assets/bootstrap/dist/css/bootstrap-b0009f9e25467a0cf98029ba5cea5cc6.css?body=1\" for ::1 at 2015-10-14 19:02:09 -0300\n\n\nStarted GET \"/assets/application-ebcbb47a1897dc658f254d3ed27f8059.css?body=1\" for ::1 at 2015-10-14 19:02:09 -0300\n\n\nStarted GET \"/assets/angular/angular-2d5a33d94b093db45bb7a9ede7fb19cd.js?body=1\" for ::1 at 2015-10-14 19:02:09 -0300\n\n\nStarted GET \"/assets/app-aa9fab9c243b33abeab86ad1957ed641.js?body=1\" for ::1 at 2015-10-14 19:02:09 -0300\n\n\nStarted GET \"/assets/angular-ui-router/release/angular-ui-router-baa37ca0378f13b403a5dbcdc9aa5155.js?body=1\" for ::1 at 2015-10-14 19:02:09 -0300\n\n\nStarted GET \"/assets/angular-rails-templates-4c1f2ca110b30578d07f9cc497121e81.js?body=1\" for ::1 at 2015-10-14 19:02:09 -0300\n\n\nStarted GET \"/assets/home/mainCtrl-b29014101de152dbd6e2c9dc5c28ece7.js?body=1\" for ::1 at 2015-10-14 19:02:09 -0300\n\n\nStarted GET \"/assets/posts/posts-35d84f25af005d974cc5973c2ef26354.js?body=1\" for ::1 at 2015-10-14 19:02:09 -0300\n\n\nStarted GET \"/assets/posts/_posts-bc8b8c3f542abacc3b5e9ad028f3cb96.js?body=1\" for ::1 at 2015-10-14 19:02:09 -0300\n\n\nStarted GET \"/assets/posts/postsCtrl-5ef10d79585a7fc3d40aa58e799fbf70.js?body=1\" for ::1 at 2015-10-14 19:02:09 -0300\n\n\nStarted GET \"/assets/application-c0bc5d796fa367b0c956d35d8a01fdb4.js?body=1\" for ::1 at 2015-10-14 19:02:09 -0300\n\n\nStarted GET \"/assets/home/_home-583f0c3e136561b0bb8b62359042f948.js?body=1\" for ::1 at 2015-10-14 19:02:09 -0300\n\n\nStarted GET \"/assets/bootstrap/dist/css/bootstrap.css.map\" for ::1 at 2015-10-14 19:02:09 -0300\n\n\nStarted GET \"/assets/application-c0bc5d796fa367b0c956d35d8a01fdb4.js?body=1\" for ::1 at 2015-10-14 19:02:09 -0300\n</code></pre>\n\n<p>You can see my source code here \n<a href=\"https://bitbucket.org/federicogiust/flapper-news/src\" rel=\"nofollow\">https://bitbucket.org/federicogiust/flapper-news/src</a></p>\n"}, {"tags": ["ruby", "macos", "rspec", "terminal"], "comments": [{"owner": {"reputation": 13948, "user_id": 283342, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e3ef6dbec3a443e7cda5b5624311ca08?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/283342/adrian"}, "edited": false, "score": 0, "creation_date": 1444859034, "post_id": 33135866, "comment_id": 54083795, "body": "I don&#39;t know what rspec is, but if it&#39;s a command that is just supposed to output text, you could could try running <code>rspec | cat</code> or <code>rspec | cat -v</code> so that the stdout of rspec isn&#39;t a tty. Just something to try."}, {"owner": {"reputation": 389, "user_id": 5446978, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/RExLi.png?s=128&g=1", "display_name": "jslutzky", "link": "https://stackoverflow.com/users/5446978/jslutzky"}, "reply_to_user": {"reputation": 13948, "user_id": 283342, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e3ef6dbec3a443e7cda5b5624311ca08?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/283342/adrian"}, "edited": false, "score": 0, "creation_date": 1444860036, "post_id": 33135866, "comment_id": 54084244, "body": "Hi - rspec is a code-testing gem: <a href=\"http://rspec.info/\" rel=\"nofollow noreferrer\">rspec.info</a>"}, {"owner": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "edited": false, "score": 0, "creation_date": 1444946686, "post_id": 33135866, "comment_id": 54127508, "body": "Are you by any change using <code>guard</code>?"}, {"owner": {"reputation": 389, "user_id": 5446978, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/RExLi.png?s=128&g=1", "display_name": "jslutzky", "link": "https://stackoverflow.com/users/5446978/jslutzky"}, "edited": false, "score": 0, "creation_date": 1444999838, "post_id": 33135866, "comment_id": 54149406, "body": "No, not using <code>guard</code>."}], "answers": [{"comments": [{"owner": {"reputation": 389, "user_id": 5446978, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/RExLi.png?s=128&g=1", "display_name": "jslutzky", "link": "https://stackoverflow.com/users/5446978/jslutzky"}, "edited": false, "score": 0, "creation_date": 1444874091, "post_id": 33136713, "comment_id": 54088258, "body": "Thanks - that doesn&#39;t seem to be the issue, as the configuration is set to <code>--color</code> already."}, {"owner": {"reputation": 389, "user_id": 5446978, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/RExLi.png?s=128&g=1", "display_name": "jslutzky", "link": "https://stackoverflow.com/users/5446978/jslutzky"}, "edited": false, "score": 0, "creation_date": 1444924737, "post_id": 33136713, "comment_id": 54115742, "body": "Anyone else have any ideas?"}], "tags": [], "owner": {"reputation": 7192, "user_id": 2891689, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TGKLe.jpg?s=128&g=1", "display_name": "Hassan Azimi", "link": "https://stackoverflow.com/users/2891689/hassan-azimi"}, "is_accepted": false, "score": 0, "last_activity_date": 1444861723, "creation_date": 1444861723, "answer_id": 33136713, "question_id": 33135866, "link": "https://stackoverflow.com/questions/33135866/running-rspec-in-mac-terminal-with-ruby-makes-my-text-invisible-how-do-i-stop/33136713#33136713", "title": "Running &quot;rspec&quot; in Mac Terminal with Ruby makes my text invisible. How do I stop this from happening in the first place?", "body": "<p>You may have a look at your configuration file first in your User Home Directory path <code>~/.rspec</code> or see in root of your project if you have a file called <code>.rspec</code> if you're using mac that these files are actually hidden. Rspec version 3 there is another file called <code>.rspec-local</code> in root of your application. You should view or edit any files and see what configurations they have:</p>\n\n<p>Try changing these configurations:</p>\n\n<p><code>--no-color</code> to <code>--color</code></p>\n\n<p>The rest are as follows which I don't think you should change them:</p>\n\n<pre><code>--format progress\n--no-profile\n--no-fail-fast\n--order defined\n</code></pre>\n\n<p>You can change them to:</p>\n\n<pre><code>--format documentation\n--profile\n--fail-fast\n--order random\n</code></pre>\n\n<p>If you do not have any of these files you might want to create a file in your user directory and open it with a text editor and add <code>--color</code> to it.</p>\n"}], "owner": {"reputation": 389, "user_id": 5446978, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/RExLi.png?s=128&g=1", "display_name": "jslutzky", "link": "https://stackoverflow.com/users/5446978/jslutzky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 234, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1445692129, "creation_date": 1444857943, "last_edit_date": 1495535226, "question_id": 33135866, "link": "https://stackoverflow.com/questions/33135866/running-rspec-in-mac-terminal-with-ruby-makes-my-text-invisible-how-do-i-stop", "title": "Running &quot;rspec&quot; in Mac Terminal with Ruby makes my text invisible. How do I stop this from happening in the first place?", "body": "<p>I'm having problems similar to <a href=\"https://stackoverflow.com/questions/28073559/cant-see-what-im-typing-in-iterm2\">this question</a>, so I know how to make the text reappear <em>after</em> it disappears: just type \"stty echo\" or \"reset.\" But how do I prevent it from happening in the first place? Why does it happen?</p>\n\n<p><strong>Update 10/24/15:</strong> I figured out the issue. Whenever I was using binding.pry and exited it with CTRL-C, the problem occurred. Now I exit binding.pry the \"legal\" way, by typing \"exit!\", and I haven't had invisible text since then.</p>\n"}, {"tags": ["ruby", "activerecord", "batch-processing"], "comments": [{"owner": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "edited": false, "score": 0, "creation_date": 1444862139, "post_id": 33135714, "comment_id": 54085094, "body": "Could you include the full definition of your <code>Course</code> class?"}, {"owner": {"reputation": 522, "user_id": 384724, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VvF8J.png?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/384724/todd"}, "edited": false, "score": 0, "creation_date": 1444865498, "post_id": 33135714, "comment_id": 54086248, "body": "should it be like this <code>Course.find_each(conditions: &#39;blocks is not null and size &gt; 0&#39;)</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": false, "score": 0, "last_activity_date": 1444858616, "creation_date": 1444858616, "answer_id": 33136019, "question_id": 33135714, "link": "https://stackoverflow.com/questions/33135714/active-record-where-find-each/33136019#33136019", "title": "Active Record .where.find_each", "body": "<p>Try this:</p>\n\n<pre><code>  Course.where('blocks IS NOT NULL AND length(blocks) &gt; 0').find_each do |course|\n    #logic on course variable\n  end\n</code></pre>\n"}], "owner": {"reputation": 243, "user_id": 4639689, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/IeGRx.jpg?s=128&g=1", "display_name": "premunk", "link": "https://stackoverflow.com/users/4639689/premunk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1444858616, "creation_date": 1444857370, "question_id": 33135714, "link": "https://stackoverflow.com/questions/33135714/active-record-where-find-each", "title": "Active Record .where.find_each", "body": "<p>I am trying batch processing from <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Batches.html#method-i-find_each\" rel=\"nofollow\">Example here</a>. </p>\n\n<pre><code>Course.where( \"blocks != nil\" &amp;&amp; \"blocks.size &gt; 0\").find_each do |course|\n#logic on course variable\nend\n</code></pre>\n\n<p>I get this error:</p>\n\n<blockquote>\n  <p><code>method_missing': undefined method</code>find_each' for # (NoMethodError)</p>\n</blockquote>\n\n<p>(<code>blocks</code> is an attribute which is of type array of course model)\nI checked that where returns an array of results, so shouldn't there be a batch processing find_each on the resulting array? Where am I going wrong?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1444856915, "post_id": 33135562, "comment_id": 54082822, "body": "A good regex intro <a href=\"http://regexone.com/\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1444856944, "post_id": 33135562, "comment_id": 54082837, "body": "<b>Output strings:</b> is what is want or what you already have ?"}, {"owner": {"reputation": 129, "user_id": 5433535, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bf251713a6da142034a50e008985fbf6?s=128&d=identicon&r=PG&f=1", "display_name": "ruby life questions", "link": "https://stackoverflow.com/users/5433535/ruby-life-questions"}, "edited": false, "score": 0, "creation_date": 1444857080, "post_id": 33135562, "comment_id": 54082901, "body": "What I want, and what I already can do with this code"}, {"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1444857312, "post_id": 33135562, "comment_id": 54083002, "body": "The problem seems to be <code>string2</code>, the rest is easy."}, {"owner": {"reputation": 129, "user_id": 5433535, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bf251713a6da142034a50e008985fbf6?s=128&d=identicon&r=PG&f=1", "display_name": "ruby life questions", "link": "https://stackoverflow.com/users/5433535/ruby-life-questions"}, "edited": false, "score": 0, "creation_date": 1444857400, "post_id": 33135562, "comment_id": 54083030, "body": "My code works fine for all 3 types of strings. Just wondering how can I improve that code :)"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 4, "creation_date": 1444857418, "post_id": 33135562, "comment_id": 54083040, "body": "Please formulate the requirements. And please try <a href=\"https://regex101.com/r/pL3sL7/1\" rel=\"nofollow noreferrer\"><code>(?&lt;!\\&#47;)\\$\\d+.\\d+(?=\\s\\w+)</code></a>."}, {"owner": {"reputation": 2212, "user_id": 4803039, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh3.googleusercontent.com/-MmbDSCFLpd8/AAAAAAAAAAI/AAAAAAAAADg/2jruEOH8FM0/photo.jpg?sz=128", "display_name": "philip yoo", "link": "https://stackoverflow.com/users/4803039/philip-yoo"}, "edited": false, "score": 0, "creation_date": 1444857515, "post_id": 33135562, "comment_id": 54083074, "body": "I&#39;m a bit confused.. For the &quot;Price as Selected&quot; strings, how are you determining which of the 2 prices are being selected? Also, are you parsing these strings from somewhere? If this is information being passed from a form, or something similar, then you can pass one of the 2 prices based on the selection, and then only have to worry about parsing the string with the single price displayed"}, {"owner": {"reputation": 129, "user_id": 5433535, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bf251713a6da142034a50e008985fbf6?s=128&d=identicon&r=PG&f=1", "display_name": "ruby life questions", "link": "https://stackoverflow.com/users/5433535/ruby-life-questions"}, "edited": false, "score": 0, "creation_date": 1444857644, "post_id": 33135562, "comment_id": 54083134, "body": "Yeah, I&#39;m getting this strings from other resources. I need to get second (lower) (sale) price when 2 prices is provided in string"}, {"owner": {"reputation": 129, "user_id": 5433535, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bf251713a6da142034a50e008985fbf6?s=128&d=identicon&r=PG&f=1", "display_name": "ruby life questions", "link": "https://stackoverflow.com/users/5433535/ruby-life-questions"}, "edited": false, "score": 0, "creation_date": 1444857736, "post_id": 33135562, "comment_id": 54083180, "body": "stribizhev, nice, thank you!"}, {"owner": {"reputation": 4689, "user_id": 1296030, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/qhTIW.png?s=128&g=1", "display_name": "lintmouse", "link": "https://stackoverflow.com/users/1296030/lintmouse"}, "edited": false, "score": 0, "creation_date": 1444857756, "post_id": 33135562, "comment_id": 54083188, "body": "Why not just parse out all numbers and select the lowest programmatically?"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 4689, "user_id": 1296030, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/qhTIW.png?s=128&g=1", "display_name": "lintmouse", "link": "https://stackoverflow.com/users/1296030/lintmouse"}, "edited": false, "score": 0, "creation_date": 1444857758, "post_id": 33135562, "comment_id": 54083190, "body": "With regex in Ruby, you cannot compare matched numbers. That regex will not work as per your requirements. You should do what @dustmouse says."}, {"owner": {"reputation": 129, "user_id": 5433535, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bf251713a6da142034a50e008985fbf6?s=128&d=identicon&r=PG&f=1", "display_name": "ruby life questions", "link": "https://stackoverflow.com/users/5433535/ruby-life-questions"}, "edited": false, "score": 0, "creation_date": 1444857863, "post_id": 33135562, "comment_id": 54083243, "body": "dustmouse - I can&#39;t parse just numbers, they are in html.text with &quot;Price as selected&quot; stuff."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1444858128, "post_id": 33135562, "comment_id": 54083365, "body": "Have a look at <a href=\"http://ideone.com/ax6T99\" rel=\"nofollow noreferrer\">this demo</a>. I extract the floats as strings, parse them as float numbers, and get the minimum value. Isn&#39;t it what you are looking for?"}, {"owner": {"reputation": 129, "user_id": 5433535, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bf251713a6da142034a50e008985fbf6?s=128&d=identicon&r=PG&f=1", "display_name": "ruby life questions", "link": "https://stackoverflow.com/users/5433535/ruby-life-questions"}, "edited": false, "score": 0, "creation_date": 1444858302, "post_id": 33135562, "comment_id": 54083446, "body": "Wow, nice solution. But in my situation, I don&#39;t really need to compare. Because when 2 prices in string - I always need second (lower <i>*it is always lower, it is *sale price</i>), but when string is 9.90 or 5/27.50 I should select first price, because it is for single item."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1444858514, "post_id": 33135562, "comment_id": 54083542, "body": "Ok, is <a href=\"http://ideone.com/k73weB\" rel=\"nofollow noreferrer\">this code</a> working as expected?"}, {"owner": {"reputation": 129, "user_id": 5433535, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bf251713a6da142034a50e008985fbf6?s=128&d=identicon&r=PG&f=1", "display_name": "ruby life questions", "link": "https://stackoverflow.com/users/5433535/ruby-life-questions"}, "edited": false, "score": 0, "creation_date": 1444858637, "post_id": 33135562, "comment_id": 54083604, "body": "Yes, thank you very much!!!"}, {"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1444860450, "post_id": 33135562, "comment_id": 54084394, "body": "@rubylifequestions I know you&#39;ve already accepted an answer and that&#39;s cool, but I&#39;ve updated my answer with a shorter regex."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1444869843, "post_id": 33135562, "comment_id": 54087304, "body": "Several people have asked you to state your question, but you have refused to do so. That warrants a downvote. I will retract it if you edit your question to state what you want to do in in words. (Do not try to explain in a comment, as not everyone reads all comments.) To give you an example of the ambiguity,what is the significance of <code>5&#47;</code> in <code>str3</code>? Initially, I thought you were comparing <code>$9.90</code> with <code>$27.50&#47;5 = $5.50</code>, but that doesn&#39;t seem to be the case."}], "answers": [{"tags": [], "owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "is_accepted": false, "score": 0, "last_activity_date": 1444860306, "last_edit_date": 1444860306, "creation_date": 1444858638, "answer_id": 33136023, "question_id": 33135562, "link": "https://stackoverflow.com/questions/33135562/regex-strings-in-ruby/33136023#33136023", "title": "Regex strings in Ruby", "body": "<blockquote>\n  <p>My code works fine for all 3 types of strings. Just wondering how can\n  I improve that code</p>\n</blockquote>\n\n<pre><code>str = str.gsub(/ or \\d\\/[\\$\\d.]+/i, '')\nstr = /(\\$[\\d.]+) P/.match(str)\n</code></pre>\n\n<hr>\n\n<p><strong>Ruby Live Demo</strong></p>\n\n<p><a href=\"http://ideone.com/18XMjr\" rel=\"nofollow\">http://ideone.com/18XMjr</a></p>\n"}, {"comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 129, "user_id": 5433535, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bf251713a6da142034a50e008985fbf6?s=128&d=identicon&r=PG&f=1", "display_name": "ruby life questions", "link": "https://stackoverflow.com/users/5433535/ruby-life-questions"}, "edited": false, "score": 1, "creation_date": 1444859308, "post_id": 33136040, "comment_id": 54083909, "body": "I updated it now. I improved it when working on an alternative solution and forgot to update."}, {"owner": {"reputation": 129, "user_id": 5433535, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bf251713a6da142034a50e008985fbf6?s=128&d=identicon&r=PG&f=1", "display_name": "ruby life questions", "link": "https://stackoverflow.com/users/5433535/ruby-life-questions"}, "edited": false, "score": 1, "creation_date": 1444859382, "post_id": 33136040, "comment_id": 54083936, "body": "regex guru confirmed :)"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1444860959, "post_id": 33136040, "comment_id": 54084602, "body": "@Jordan: So, <a href=\"http://apidock.com/ruby/Enumerable/min_by\" rel=\"nofollow noreferrer\"><code>min_by</code></a> receives a block (<code>&amp;</code>) that is cast to float (<code>:to_f</code>)? Nice. Let&#39;s live and learn, thank you very much!"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1444861700, "post_id": 33136040, "comment_id": 54084890, "body": "<code>&amp;</code> is the <a href=\"http://ruby-doc.org/core-2.2.2/Symbol.html#method-i-to_proc\" rel=\"nofollow noreferrer\"><code>to_proc</code></a> operator. Basically <code>&amp;:foo</code> is equivalent to <code>proc {|obj| obj.foo }</code>, so <code>.min_by(&amp;:to_f)</code> is equivalent to <code>.min_by {|value| value.to_f }</code>"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1444885780, "post_id": 33136040, "comment_id": 54091293, "body": "I believe the above comment is off-topic."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1444943052, "post_id": 33136040, "comment_id": 54125835, "body": "@Jordan, a fine point <code>&amp;</code> in <code>min_by(&amp;:to_f)</code> actually does to things: it invokes &#39;:to_proc&#39; to convert the method <code>:to_f</code> to a proc (as you say), but  also, it then calls the proc."}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1444859249, "last_edit_date": 1444859249, "creation_date": 1444858724, "answer_id": 33136040, "question_id": 33135562, "link": "https://stackoverflow.com/questions/33135562/regex-strings-in-ruby/33136040#33136040", "title": "Regex strings in Ruby", "body": "<p>A regex I suggested first is just a sum total of your regexps:</p>\n\n<pre><code>(?&lt;=(?&lt;!\\/)\\$)\\d+.\\d+(?=\\s\\w+)\n</code></pre>\n\n<p>See <a href=\"https://regex101.com/r/pL3sL7/2\" rel=\"nofollow\">demo</a></p>\n\n<p>Since it is next to impossible to compare numbers with regex, I suggest </p>\n\n<ol>\n<li>Extracting all float numbers</li>\n<li>Parse them as float values</li>\n<li>Get the minimum one</li>\n</ol>\n\n<p>Here is a <a href=\"http://ideone.com/k73weB\" rel=\"nofollow\">working snippet</a>:</p>\n\n<pre><code>def getLowestNumberFromString(input)\n    arr = input.scan(/(?&lt;=(?&lt;!\\/)\\$)\\d+(?:\\.\\d+)?/)\n    arr.collect do |value| \n        value.to_f \n    end\n    return arr.min\nend\n\nputs getLowestNumberFromString(\"$13.90 Price as Shown\")\nputs getLowestNumberFromString(\"$590.50  $490.00 Price as Selected\")\nputs getLowestNumberFromString(\"$9.90 or 5/$27.50 Price as Selected\")\n</code></pre>\n\n<p>The regex breakdown:</p>\n\n<ul>\n<li><code>(?&lt;=(?&lt;!\\/)\\$)</code> - assert that there is a <code>$</code> symbol not preceded with <code>/</code> right before...</li>\n<li><code>\\d+</code> - 1 or more digits</li>\n<li><code>(?:\\.\\d+)?</code> - optionally followed with a <code>.</code> followed by 1 or more digits</li>\n</ul>\n\n<p>Note that if you only need to match floats with decimal part, remove the <code>?</code> and non-capturing group from the last subpattern (<code>/(?&lt;=(?&lt;!\\/)\\$)\\d+\\.\\d+/</code> or even <code>/(?&lt;=(?&lt;!\\/)\\$)\\d*\\.?\\d+/</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 129, "user_id": 5433535, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bf251713a6da142034a50e008985fbf6?s=128&d=identicon&r=PG&f=1", "display_name": "ruby life questions", "link": "https://stackoverflow.com/users/5433535/ruby-life-questions"}, "edited": false, "score": 0, "creation_date": 1444858876, "post_id": 33136046, "comment_id": 54083713, "body": "WOW! All solution just in single line <i>.</i>"}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 1, "last_activity_date": 1444859930, "last_edit_date": 1444859930, "creation_date": 1444858761, "answer_id": 33136046, "question_id": 33135562, "link": "https://stackoverflow.com/questions/33135562/regex-strings-in-ruby/33136046#33136046", "title": "Regex strings in Ruby", "body": "<p>Supposing input can be relied upon to look like one of your three examples, how about this?</p>\n\n<pre><code>expr = /\\$(\\d+\\.\\d\\d)\\s+(?:or\\s+\\d+\\/\\$\\d+\\.\\d\\d\\s+)?Price/\n\nstr = \"$9.90 or 5/$27.50 Price as Selected\"\nstr[expr, 1] # =&gt; \"9.90\"\n</code></pre>\n\n<p>Here it is on Rubular: <a href=\"http://rubular.com/r/CakoUt5Lo3\" rel=\"nofollow\">http://rubular.com/r/CakoUt5Lo3</a></p>\n\n<p>Explained:</p>\n\n<pre><code>expr = %r{\n  \\$          # literal dollar sign\n  (\\d+\\.\\d\\d) # capture a price with two decimal places (assume no thousands separator)\n  \\s+         # whitespace\n  (?:         # non-capturing group\n    or\\s+       # literal \"or\" followed by whitespace\n    \\d+\\/       # one or more digits followed by literal \"/\"\n    \\$\\d+\\.\\d\\d # dollar sign and price\n    \\s+         # whitespace\n  )?          # preceding group is optional\n  Price       # the literal word \"Price\"\n}x\n</code></pre>\n\n<p>You might use it like this:</p>\n\n<pre><code>MATCH_PRICE_EXPR = /\\$(\\d+\\.\\d\\d)\\s+(?:or\\s+\\d+\\/\\$\\d+\\.\\d\\d\\s+)?Price/\n\ndef match_price(input)\n  return unless input =~ MATCH_PRICE_EXPR\n  $1.to_f\nend\n\nputs match_price(\"$13.90 Price as Shown\")\n# =&gt; 13.9\n\nputs match_price(\"$590.50  $490.00 Price as Selected\")\n# =&gt; 490.0\n\nputs match_price(\"$9.90 or 5/$27.50 Price as Selected\")\n# =&gt; 9.9\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1444889590, "last_edit_date": 1444889590, "creation_date": 1444870817, "answer_id": 33138104, "question_id": 33135562, "link": "https://stackoverflow.com/questions/33135562/regex-strings-in-ruby/33138104#33138104", "title": "Regex strings in Ruby", "body": "<p>Assuming you simply want the smallest dollar value in each line:</p>\n\n<pre><code>r = /\n    \\$    # match a dollar sign\n    \\d+   # match one or more digits\n    \\.    # match a decimal point\n    \\d{2} # match two digits\n    /x    # extended mode\n\n[str1, str2, str3].map { |s| s.scan(r).min_by { |s| s[1..-1].to_f } }\n  #=&gt; [\"$13.90\", \"$490.00\", \"$9.90\"]\n</code></pre>\n\n<p>Actually, you don't have to use a regex. You could do it like this:</p>\n\n<pre><code>def smallest(str)\n  val = str.each_char.with_index(1).\n        select { |c,_| c == ?$ }.\n        map { |_,i| str[i..-1].to_f }.\n        min\n  \"$%.2f\" % val\nend\n\nsmallest(str1) #=&gt; \"$13.90\" \nsmallest(str2) #=&gt; \"$490.00\" \nsmallest(str3) #=&gt; \"$9.90\" \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "is_accepted": false, "score": 0, "last_activity_date": 1444872783, "creation_date": 1444872783, "answer_id": 33138365, "question_id": 33135562, "link": "https://stackoverflow.com/questions/33135562/regex-strings-in-ruby/33138365#33138365", "title": "Regex strings in Ruby", "body": "<p>A better regex is probably: <code>/\\B\\$(\\d+\\.\\d{2})\\b/</code></p>\n\n<pre><code>str = \"$590.50  $490.00 Price as Selected\"\nstr.scan(/\\B\\$(\\d+\\.\\d{2})\\b/).flatten.min_by(&amp;:to_f)\n#=&gt; \"490.00\"\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 5433535, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bf251713a6da142034a50e008985fbf6?s=128&d=identicon&r=PG&f=1", "display_name": "ruby life questions", "link": "https://stackoverflow.com/users/5433535/ruby-life-questions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 1, "accepted_answer_id": 33136040, "answer_count": 5, "score": 0, "last_activity_date": 1444903935, "creation_date": 1444856697, "last_edit_date": 1444903935, "question_id": 33135562, "link": "https://stackoverflow.com/questions/33135562/regex-strings-in-ruby", "title": "Regex strings in Ruby", "body": "<p>Input strings: </p>\n\n<pre><code>str1 = \"$13.90 Price as Shown\"\nstr2 = \"$590.50  $490.00 Price as Selected\" \nstr3 = \"$9.90 or 5/$27.50 Price as Selected\"\n</code></pre>\n\n<p>Output strings:</p>\n\n<pre><code>str1 = \"13.90\"\nstr2 = \"490.00\"\nstr3 = \"9.90\"\n</code></pre>\n\n<p>My code to get output:</p>\n\n<pre><code>str = str.strip.gsub(/\\s\\w{2}\\s\\d\\/\\W\\d+.\\d+/, \"\") # remove or 5/$27.50 from string\nstr = /\\W\\d+.\\d+\\s\\w+/.match(str).to_s.gsub(\"$\", \"\").gsub(\" Price\", \"\")\n</code></pre>\n\n<p>This code works fine for all 3 different types of strings. But how can I improve my code? Are there any better solutions?\nAlso guys can you give link to good regex guide/book?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "devise"], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 5446891, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-MsMDifKFAF0/AAAAAAAAAAI/AAAAAAAAARg/AsxM-M5ATRU/photo.jpg?sz=128", "display_name": "Shyam Pillai", "link": "https://stackoverflow.com/users/5446891/shyam-pillai"}, "edited": false, "score": 0, "creation_date": 1444858138, "post_id": 33135565, "comment_id": 54083367, "body": "I&#39;m new to rails.Could you kindly tell me whats wrong ?"}, {"owner": {"reputation": 7633, "user_id": 1520714, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b6725a3582042901598451ee700116ce?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Campbell", "link": "https://stackoverflow.com/users/1520714/mike-campbell"}, "reply_to_user": {"reputation": 311, "user_id": 5446891, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-MsMDifKFAF0/AAAAAAAAAAI/AAAAAAAAARg/AsxM-M5ATRU/photo.jpg?sz=128", "display_name": "Shyam Pillai", "link": "https://stackoverflow.com/users/5446891/shyam-pillai"}, "edited": false, "score": 0, "creation_date": 1444858319, "post_id": 33135565, "comment_id": 54083454, "body": "well you appear to be passing <code>mca_id</code> but never accessing it? surely you just need <code>@mca=Mca.find_by_id(params[:mca_id])</code> ? but to be honest it&#39;s quite hard to understand the question as it&#39;s full of domain specific language."}, {"owner": {"reputation": 311, "user_id": 5446891, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-MsMDifKFAF0/AAAAAAAAAAI/AAAAAAAAARg/AsxM-M5ATRU/photo.jpg?sz=128", "display_name": "Shyam Pillai", "link": "https://stackoverflow.com/users/5446891/shyam-pillai"}, "edited": false, "score": 0, "creation_date": 1444858815, "post_id": 33135565, "comment_id": 54083685, "body": "Mike thank you :) Somehow I feel like I did try this earlier, but seemed to evade. Clearly I lacked something. Thanks for the response. I&#39;m new on stackoverflow. I&#39;ll be on 15 rep points and upvote your answer :)"}, {"owner": {"reputation": 7633, "user_id": 1520714, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b6725a3582042901598451ee700116ce?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Campbell", "link": "https://stackoverflow.com/users/1520714/mike-campbell"}, "reply_to_user": {"reputation": 311, "user_id": 5446891, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-MsMDifKFAF0/AAAAAAAAAAI/AAAAAAAAARg/AsxM-M5ATRU/photo.jpg?sz=128", "display_name": "Shyam Pillai", "link": "https://stackoverflow.com/users/5446891/shyam-pillai"}, "edited": false, "score": 0, "creation_date": 1444899038, "post_id": 33135565, "comment_id": 54097652, "body": "typically when an answer solves your problem, you mark it as accepted by clicking the green tick."}], "tags": [], "owner": {"reputation": 7633, "user_id": 1520714, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b6725a3582042901598451ee700116ce?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Campbell", "link": "https://stackoverflow.com/users/1520714/mike-campbell"}, "is_accepted": true, "score": 2, "last_activity_date": 1444861402, "last_edit_date": 1444861402, "creation_date": 1444856710, "answer_id": 33135565, "question_id": 33135451, "link": "https://stackoverflow.com/questions/33135451/how-to-send-a-join-request-to-a-group-in-my-case-i-want-connection-requests-to/33135565#33135565", "title": "how to send a join request to a group? In my case i want connection requests to be sent to a group called mca", "body": "<p>In the create action of your ConnectionsController you have:</p>\n\n<pre><code>@mca=Mca.find_by_id(params[:id])\n</code></pre>\n\n<p>Yet you're passing the parameter <code>mca_id</code> on your link_to, not <code>id</code> ... I assume what you want is:</p>\n\n<pre><code>@mca=Mca.find_by_id(params[:mca_id])\n</code></pre>\n"}], "owner": {"reputation": 311, "user_id": 5446891, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-MsMDifKFAF0/AAAAAAAAAAI/AAAAAAAAARg/AsxM-M5ATRU/photo.jpg?sz=128", "display_name": "Shyam Pillai", "link": "https://stackoverflow.com/users/5446891/shyam-pillai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 33135565, "answer_count": 1, "score": -2, "last_activity_date": 1444861402, "creation_date": 1444856242, "question_id": 33135451, "link": "https://stackoverflow.com/questions/33135451/how-to-send-a-join-request-to-a-group-in-my-case-i-want-connection-requests-to", "title": "how to send a join request to a group? In my case i want connection requests to be sent to a group called mca", "body": "<p>the record connection gets updated but then the value of mca_id is nil. Why is that ? I tried several things like rewriting the create function an everything, but nothing seems to happen . I'd really appreciate some help cuz I've spent quite sometime on this. </p>\n\n<p>Users model:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n  has_one :connection\n  has_one :mca, through: :connection\nend\n</code></pre>\n\n<p>Mca model:</p>\n\n<pre><code>class Mca &lt; ActiveRecord::Base\n\n\n  has_many :connections\n  has_many :users, through: :connections\nend\n</code></pre>\n\n<p>Connections model:</p>\n\n<pre><code>class Connection &lt; ActiveRecord::Base\n\n    belongs_to :user\n    belongs_to :mca\n\n\nend\n</code></pre>\n\n<p>Connections controller:</p>\n\n<pre><code>class ConnectionsController &lt; ApplicationController\n\n  before_action :authenticate_user!\n  # GET /connections\n  # GET /connections.json\n  def index\n    @connections = Connection.all\n  end\n\n  # GET /connections/1\n  # GET /connections/1.json\n  def show\n  end\n\n  # GET /connections/new\n  def new\n    @connection = current_user.build_connection(connection_params)\n  end\n\n  # GET /connections/1/edit\n  def edit\n  end\n\n  # POST /connections\n  # POST /connections.json\n  def create\n    @mca=Mca.find_by_id(params[:id])\n    @connection = current_user.build_connection(:mca_id=&gt; @mca , approved: false)\n\n      if @connection.save\n        flash[:notice] = \"Connection requested.\"\n        redirect_to :back\n      else\n        flash[:error] = \"Unable to request connection.\"\n        redirect_to :back\n      end\n  end\n\n  # PATCH/PUT /connections/1\n  # PATCH/PUT /connections/1.json\n  def update\n    @mca=Mca.find(params[:mca_id])\n    @connection= Connection.where(user_id: params[:id], mca_id: mca.id)\n    @connection.update(approved: true)\n     if @connection.save\n        redirect_to root_url, :notice =&gt; \"Successfully confirmed connection\"\n      else\n        redirect_to root_url, :notice =&gt; \"Sorry! Could not confirm connection!\"\n      end\n  end\n\n  # DELETE /connections/1\n  # DELETE /connections/1.json\n  def destroy\n    @mca=Mca.find(params[:mca_id])\n    @connection= Connection.where(user_id: params[:id], mca_id: @mca.id)\n    @connection.destroy\n    flash[:notice]= \"Removed Connection\"\n    redirect_to :back\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_connection\n      @connection = Connection.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def connection_params\n      params.require(:connection).permit(:user_id, :mca_id, :approved)\n    end\nend\n</code></pre>\n\n<p>my routes.rb has :</p>\n\n<pre><code>resources :connections\n</code></pre>\n\n<p>my views/mcas/show.html.erb has:</p>\n\n<pre><code>&lt;p&gt;&lt;%= link_to \"Join\", connections_path(:mca_id=&gt;@mca) , :method=&gt;:post , class: \"btn btn-primary btn-large\" %&gt;\n        &lt;/p&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "debugging", "docker", "printf"], "comments": [{"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 0, "creation_date": 1444855951, "post_id": 33134900, "comment_id": 54082337, "body": "Maybe this would help? <a href=\"http://serverfault.com/a/634296/783\">serverfault.com/a/634296/783</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1726, "user_id": 3170628, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d70c86c77d917a839ff29bad350a908?s=128&d=identicon&r=PG", "display_name": "Alserda", "link": "https://stackoverflow.com/users/3170628/alserda"}, "is_accepted": true, "score": 2, "last_activity_date": 1444859167, "creation_date": 1444859167, "answer_id": 33136139, "question_id": 33134900, "link": "https://stackoverflow.com/questions/33134900/console-prints-not-appearing-when-using-docker-in-ruby-on-rails/33136139#33136139", "title": "Console prints not appearing when using Docker in Ruby on Rails", "body": "<p>I noticed that this isn't something Docker related by tailing a non-Docker project. Logging tools like <code>puts</code> or <code>print</code> are displayed in your console when using WEBrick, but aren't added to your log files. </p>\n\n<p>The solution to this is by using <code>logger.info()</code> instead.</p>\n"}], "owner": {"reputation": 1726, "user_id": 3170628, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d70c86c77d917a839ff29bad350a908?s=128&d=identicon&r=PG", "display_name": "Alserda", "link": "https://stackoverflow.com/users/3170628/alserda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 717, "favorite_count": 1, "accepted_answer_id": 33136139, "answer_count": 1, "score": 2, "last_activity_date": 1444859167, "creation_date": 1444854231, "question_id": 33134900, "link": "https://stackoverflow.com/questions/33134900/console-prints-not-appearing-when-using-docker-in-ruby-on-rails", "title": "Console prints not appearing when using Docker in Ruby on Rails", "body": "<p>I've been trying to use Docker for development, it works pretty well but one of the things that annoys me is not being able to see the console prints.</p>\n\n<p>Rails server (exactly the same application):</p>\n\n<pre><code>Started GET \"/\" for ::1 at 2015-10-14 22:18:28 +0200\nProcessing by PagesController#home as HTML\nfoobar\nRendered pages/home.html.erb within layouts/home (0.0ms)\nCompleted 200 OK in 20ms (Views: 19.7ms | ActiveRecord: 0.0ms)\n</code></pre>\n\n<p>Docker: </p>\n\n<pre><code>Started GET \"/\" for 192.168.99.1 at 2015-10-14 20:18:44 +0000\nProcessing by PagesController#home as HTML\nRendered pages/home.html.erb within layouts/home (0.1ms)\nCompleted 200 OK in 179ms (Views: 177.6ms | ActiveRecord: 0.0ms)\n</code></pre>\n\n<p>These logs are from tailing the log/development.log file within my container.</p>\n\n<p>Has anyone else encountered this before? How to solve this? Cheers!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 10185, "user_id": 5328417, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ecwCL.jpg?s=128&g=1", "display_name": "Arsen", "link": "https://stackoverflow.com/users/5328417/arsen"}, "edited": false, "score": 0, "creation_date": 1444856082, "post_id": 33134872, "comment_id": 54082409, "body": "Such a nice question!"}], "answers": [{"comments": [{"owner": {"reputation": 3665, "user_id": 4330954, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/340ffba5552ac48227741a8695a255ff?s=128&d=identicon&r=PG", "display_name": "x6iae", "link": "https://stackoverflow.com/users/4330954/x6iae"}, "edited": false, "score": 0, "creation_date": 1444856105, "post_id": 33135221, "comment_id": 54082421, "body": "wow! Thanks, Arsen, that is an eye opener. However, seeing that the database gets automatically populated with all this nano stuff, is there any way I can preserve(get back) the <code>nsec</code> when converting the time back from either string or int?"}, {"owner": {"reputation": 10185, "user_id": 5328417, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ecwCL.jpg?s=128&g=1", "display_name": "Arsen", "link": "https://stackoverflow.com/users/5328417/arsen"}, "reply_to_user": {"reputation": 3665, "user_id": 4330954, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/340ffba5552ac48227741a8695a255ff?s=128&d=identicon&r=PG", "display_name": "x6iae", "link": "https://stackoverflow.com/users/4330954/x6iae"}, "edited": false, "score": 0, "creation_date": 1444856482, "post_id": 33135221, "comment_id": 54082616, "body": "No. You cannot because if you convert time with nanosecs to string or integer you will lose this information and you cannot restore it in the future. But you can call <code>a.to_f</code> and save this float. This float contains seconds and nano seconds and you can restore Time from it."}, {"owner": {"reputation": 3665, "user_id": 4330954, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/340ffba5552ac48227741a8695a255ff?s=128&d=identicon&r=PG", "display_name": "x6iae", "link": "https://stackoverflow.com/users/4330954/x6iae"}, "edited": false, "score": 0, "creation_date": 1444857889, "post_id": 33135221, "comment_id": 54083251, "body": "Thanks much. this has really been of great help :)"}], "tags": [], "owner": {"reputation": 10185, "user_id": 5328417, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ecwCL.jpg?s=128&g=1", "display_name": "Arsen", "link": "https://stackoverflow.com/users/5328417/arsen"}, "is_accepted": true, "score": 2, "last_activity_date": 1444919623, "last_edit_date": 1444919623, "creation_date": 1444855390, "answer_id": 33135221, "question_id": 33134872, "link": "https://stackoverflow.com/questions/33134872/parsing-string-to-time-is-not-the-same-as-the-original-time/33135221#33135221", "title": "parsing string to time is not the same as the original time", "body": "<p>The reason:</p>\n\n<blockquote>\n  <p>Since Ruby 1.9.2, Time implementation uses a signed 63 bit integer,\n  Bignum or Rational. The integer is a <strong>number of nanoseconds</strong> since the\n  Epoch which can represent 1823-11-12 to 2116-02-20. When Bignum or\n  Rational is used (before 1823, after 2116, under nanosecond), Time\n  works slower as when integer is used.</p>\n</blockquote>\n\n<p>And if you run <code>a = Time.now</code> you got N seconds since the Epoch <strong>plus</strong> P nanoseconds. But when you run <code>Time.parse b</code> you got same number seconds but with <strong>zero</strong> nanosecond. This is what you're looking for.</p>\n\n<pre><code>Loading development environment (Rails 4.2.4)\n[1] pry(main)&gt; a = Time.now\n=&gt; 2015-10-14 23:41:12 +0300\n[2] pry(main)&gt; a.nsec\n=&gt; 733355000\n[3] pry(main)&gt; Time.parse(a.to_s).nsec\n=&gt; 0\n</code></pre>\n\n<p>So you have to avoid this nano stuff. For instance you can write something like that:</p>\n\n<pre><code>[16] pry(main)&gt; a = Time.at(Time.now.to_i)\n=&gt; 2015-10-14 23:47:59 +0300\n[17] pry(main)&gt; a.nsec\n=&gt; 0\n</code></pre>\n"}], "owner": {"reputation": 3665, "user_id": 4330954, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/340ffba5552ac48227741a8695a255ff?s=128&d=identicon&r=PG", "display_name": "x6iae", "link": "https://stackoverflow.com/users/4330954/x6iae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 1, "accepted_answer_id": 33135221, "answer_count": 1, "score": 2, "last_activity_date": 1444919623, "creation_date": 1444854113, "question_id": 33134872, "link": "https://stackoverflow.com/questions/33134872/parsing-string-to-time-is-not-the-same-as-the-original-time", "title": "parsing string to time is not the same as the original time", "body": "<p>So I was having a problem with finding records by using one of the object property which is of class <code>Time</code>. </p>\n\n<p>Turns out that when I pass in the time as a <code>params</code> to my controller, which in turn sends it to the model... the <code>time</code> object I'm sending gets stringified. </p>\n\n<p>So I thought I will just convert it back to Time either by <code>Time.parse(&lt;stringified time&gt;)</code> or <code>&lt;stringified time&gt;.to_time</code> - (Using rails)</p>\n\n<p>But my test keeps failing, so I decided to do some look into what was going on there.</p>\n\n<p>This was what I found out:</p>\n\n<pre><code>2.2.0 :003 &gt; a = Time.now\n =&gt; 2015-10-14 20:50:19 +0100 \n2.2.0 :004 &gt; b = a.to_s\n =&gt; \"2015-10-14 20:50:19 +0100\" \n2.2.0 :005 &gt; c = Time.parse b\n =&gt; 2015-10-14 20:50:19 +0100 \n2.2.0 :006 &gt; c == a\n =&gt; false \n2.2.0 :007 &gt; a.class\n =&gt; Time \n2.2.0 :008 &gt; c.class\n =&gt; Time \n2.2.0 :015 &gt; a - c\n =&gt; 0.951439 \n2.2.0 :016 &gt; d = b.to_time\n =&gt; 2015-10-14 20:50:19 +0100 \n2.2.0 :017 &gt; c - d\n =&gt; 0.0 \n</code></pre>\n\n<p>My confusion is mostly from the line: <code>a - c</code> which gave me <code>0.951439</code>. Where did this difference come from?</p>\n\n<p>Most importantly, how do I make these two to be equal? Thanks much, all.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5000249"}, "edited": false, "score": 0, "creation_date": 1444854028, "post_id": 33134744, "comment_id": 54081278, "body": "I know that <code>C</code> is an object. I&#39;m just confused about where methods are defined by default. If they&#39;re defined on <code>self</code>, then the <code>bar</code> method should be defined on the class <code>C</code> like the first method."}, {"owner": {"reputation": 516, "user_id": 1965639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1b26f7f5bf496afa58f8aa562d53a2e?s=128&d=identicon&r=PG", "display_name": "jjk", "link": "https://stackoverflow.com/users/1965639/jjk"}, "edited": false, "score": 0, "creation_date": 1444854580, "post_id": 33134744, "comment_id": 54081605, "body": "you are confused about &#39;self&#39; ... self changes as the context changes."}, {"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 1, "creation_date": 1444855045, "post_id": 33134744, "comment_id": 54081858, "body": "It&#39;s just the way the ruby <code>def</code> keyword works, it&#39;s built into ruby to work this way. <code>def</code> will define an instance method in just <code>def method_name</code>, but a singleton class method with <code>def someclass.method_name</code>. It&#39;s just how <code>def</code> works. Because most of the time instance methods are what you want, they are the typical kind of method you are defining, so it&#39;s what <code>def</code> does. Just how ruby was designed to work, I see how you&#39;re trying to reason it out consistently, perhaps it&#39;s not consistent, it&#39;s just how ruby was designed."}, {"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1444855317, "post_id": 33134744, "comment_id": 54082003, "body": "think about C as a blueprint. everything you put in there (without def) alters the blueprint. when you build a new object via C.new you get what the blueprint defines. when you define things with self in front think about it  like you are defining some operations that are related to the blueprint but are not captured in the blueprint itself."}], "tags": [], "owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "is_accepted": false, "score": 1, "last_activity_date": 1444853597, "last_edit_date": 1495540350, "creation_date": 1444853597, "answer_id": 33134744, "question_id": 33134557, "link": "https://stackoverflow.com/questions/33134557/why-do-methods-inside-a-class-become-instance-methods-instead-of-becoming-single/33134744#33134744", "title": "Why do methods inside a class become instance methods instead of becoming singleton methods of the class itself?", "body": "<p>it's a convention of the ruby language. (conceptually you can think of this like you think about static methods in Java. they are not associated with any instance of the class but with the class itself)</p>\n\n<p>bar is going to be a method on objects instantiated from C.\nself.bar is going to be a method on C itself. </p>\n\n<p>What's interesting in Ruby is that C class itself is an object (so the class definition that you can use to build objects is an object itself). That's where the <strong>self</strong> comes from (i.e. define this on myself vs define this from objects that will be built using me as a blueprint) Read more on this: <a href=\"https://stackoverflow.com/questions/4967556/ruby-craziness-class-vs-object\">Ruby craziness: Class vs Object?</a></p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5000249"}, "edited": false, "score": 0, "creation_date": 1444913532, "post_id": 33141318, "comment_id": 54107376, "body": "<a href=\"http://yugui.jp/articles/846\" rel=\"nofollow noreferrer\">default definition context</a> made it a lot clearer."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 1, "last_activity_date": 1444890248, "creation_date": 1444890248, "answer_id": 33141318, "question_id": 33134557, "link": "https://stackoverflow.com/questions/33134557/why-do-methods-inside-a-class-become-instance-methods-instead-of-becoming-single/33141318#33141318", "title": "Why do methods inside a class become instance methods instead of becoming singleton methods of the class itself?", "body": "<p>It works similarly to message sends and constant lookup:</p>\n\n<ul>\n<li>The general format of a message send is <code>foo.bar</code>, which sends the message <code>bar</code> to <code>foo</code>. If you leave out <code>foo</code>, the message will be sent to the <em>default receiver</em> (which is <code>self</code>).</li>\n<li>The general format of a constant lookup is <code>Foo::Bar</code>, which looks up the constant <code>Bar</code> in the module <code>Foo</code>. If you leave out <code>Foo</code>, the constant will be looked up in the <em>default constant context</em> (or <em>cref</em>).</li>\n<li><p>The general format of a method definition is <code>def foo.bar</code>, which defines the method <code>bar</code> in the singleton class of <code>foo</code>. If you leave out <code>foo</code>, the method will be defined in the <a href=\"http://yugui.jp/articles/846\" rel=\"nofollow\"><em>default definition context</em></a> (or <em>default definee</em>):</p>\n\n<ul>\n<li>At the top-level, the default definee is <code>Object</code>. (Also, the methods become <code>private</code>.)</li>\n<li>Within a module declaration body, the default definee is <code>self</code> (and <em>not</em> <code>self</code>'s singleton class, like you assumed!)</li>\n<li>Within a method body, the default definee is the syntactically enclosing module. (Put another way: <code>def</code> doesn't change the default definee.)</li>\n<li><code>instance_eval</code> changes the default definee to the receiver's singleton class</li>\n<li><code>class_eval</code> changes the default definee to the receiver</li>\n</ul></li>\n</ul>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5000249"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "accepted_answer_id": 33141318, "answer_count": 2, "score": 0, "last_activity_date": 1444890248, "creation_date": 1444852916, "question_id": 33134557, "link": "https://stackoverflow.com/questions/33134557/why-do-methods-inside-a-class-become-instance-methods-instead-of-becoming-single", "title": "Why do methods inside a class become instance methods instead of becoming singleton methods of the class itself?", "body": "<p>Suppose I have the following simple class:</p>\n\n<pre><code>class C\n  p self # =&gt; C\n\n  def self.foo\n    puts \"foo\"\n  end\n\n  def bar\n    puts \"bar\"\n  end\nend\n\np C.foo # =&gt; \"foo\"\np C.bar # =&gt; \"`&lt;main&gt;': undefined method `bar' for C:Class (NoMethodError)\"\n</code></pre>\n\n<p>I know that <code>self.foo</code> defines <code>foo</code> to be an instance method inside the singleton class of <code>C</code>. </p>\n\n<p>Why does the second method not get defined inside the singleton class of <code>C</code> like the first one? <code>self</code> is still <code>C</code> when this method is defined.</p>\n"}, {"tags": ["ruby", "error-handling", "tdd", "mechanize-ruby"], "answers": [{"tags": [], "owner": {"reputation": 15006, "user_id": 520567, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6cb1b2c58abc2116f910ec9253ee387f?s=128&d=identicon&r=PG", "display_name": "akostadinov", "link": "https://stackoverflow.com/users/520567/akostadinov"}, "is_accepted": false, "score": 1, "last_activity_date": 1444851925, "creation_date": 1444851925, "answer_id": 33134258, "question_id": 33134058, "link": "https://stackoverflow.com/questions/33134058/what-is-proper-way-to-test-error-handling/33134258#33134258", "title": "What is proper way to test error handling?", "body": "<p>you need to <code>mock</code> the <code>Mechanize</code> class. search other questions how to do</p>\n"}, {"comments": [{"owner": {"reputation": 1082, "user_id": 5381605, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-5ZF_yJyjvcQ/AAAAAAAAAAI/AAAAAAAAAFM/lQbQAZxe2wo/photo.jpg?sz=128", "display_name": "binarymason", "link": "https://stackoverflow.com/users/5381605/binarymason"}, "edited": false, "score": 0, "creation_date": 1444853847, "post_id": 33134366, "comment_id": 54081165, "body": "@jjk thanks for your answer.  Some background to this is my crawler has gotten all types of errors in the past, whether it be trying to reach a page that doesn&#39;t exist or simply a connection timeout.  Mechanize raises each of the errors appropriately, I want to test the handling."}, {"owner": {"reputation": 516, "user_id": 1965639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1b26f7f5bf496afa58f8aa562d53a2e?s=128&d=identicon&r=PG", "display_name": "jjk", "link": "https://stackoverflow.com/users/1965639/jjk"}, "edited": false, "score": 1, "creation_date": 1444854359, "post_id": 33134366, "comment_id": 54081482, "body": "so if you need to be explicit, you would create a mock object relying on each of those underlying objects. Then you can deal with them to be raised, or whatever. You notice that I am using rspec&#39;s instance double to create an interface that I can use. Then I can reference that in my mock object&#39;s instance. If this is helpful please mark this answer as correct."}, {"owner": {"reputation": 1082, "user_id": 5381605, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-5ZF_yJyjvcQ/AAAAAAAAAAI/AAAAAAAAAFM/lQbQAZxe2wo/photo.jpg?sz=128", "display_name": "binarymason", "link": "https://stackoverflow.com/users/5381605/binarymason"}, "edited": false, "score": 0, "creation_date": 1444901404, "post_id": 33134366, "comment_id": 54099372, "body": "Thanks for leading me in the right direction, @jjk.  Marking solved."}], "tags": [], "owner": {"reputation": 516, "user_id": 1965639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1b26f7f5bf496afa58f8aa562d53a2e?s=128&d=identicon&r=PG", "display_name": "jjk", "link": "https://stackoverflow.com/users/1965639/jjk"}, "is_accepted": true, "score": 1, "last_activity_date": 1445284317, "last_edit_date": 1445284317, "creation_date": 1444852249, "answer_id": 33134366, "question_id": 33134058, "link": "https://stackoverflow.com/questions/33134058/what-is-proper-way-to-test-error-handling/33134366#33134366", "title": "What is proper way to test error handling?", "body": "<p>Sort of. You shouldn't test dependent libraries <em>again</em> in your application. It's enough to catch the Net::HTTP::Persistent::Error without ensuring the underlying functionality is working. Well written gems should provide their own tests, and you should be able to access those tests as needed by testing that gem (Mechanize, for example). </p>\n\n<p>You could mock for those errors, but you should be judicious. Here is some code to mock an SMTP connection</p>\n\n<pre><code> class Mock\n    require 'net/smtp'\n\n    def initialize( options )\n      @options = options\n      @username = options[:username]\n      @password = options[:password]\n      options[:port] ? @port = options[:port] : @port = 25\n      @helo_domain = options[:helo_domain]\n      @from_addr = options[:from_address]\n      @from_domain = options[:from_domain]\n\n      #Mock object for SMTP connections\n      mock_config = {}\n      mock_config[:address] = options[:server]\n      mock_config[:port] = @port\n\n      @connection = RSpec::instance_double(Net::SMTP, mock_config)\n\n      allow(@connection).to receive(:start).and_yield(@connection)\n      allow(@connection).to receive(:send_message).and_return(true)\n      allow(@connection).to receive(:started?).and_return(true)\n      allow(@connection).to receive(:finish).and_return(true)\n    end\n    #more stuff here\n end\n</code></pre>\n\n<p>I don't see you testing for any custom errors which would make more sense here. For example, you might test for url-unfriendly characters in your parameter and rescue from that. In that case, your test would offer something explicit. </p>\n\n<pre><code> expect(get(\"???.net\")).to raise_error(CustomError)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15006, "user_id": 520567, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6cb1b2c58abc2116f910ec9253ee387f?s=128&d=identicon&r=PG", "display_name": "akostadinov", "link": "https://stackoverflow.com/users/520567/akostadinov"}, "edited": false, "score": 0, "creation_date": 1444925376, "post_id": 33144629, "comment_id": 54116168, "body": "glad you found your solution"}], "tags": [], "owner": {"reputation": 1082, "user_id": 5381605, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-5ZF_yJyjvcQ/AAAAAAAAAAI/AAAAAAAAAFM/lQbQAZxe2wo/photo.jpg?sz=128", "display_name": "binarymason", "link": "https://stackoverflow.com/users/5381605/binarymason"}, "is_accepted": false, "score": 2, "last_activity_date": 1444900987, "last_edit_date": 1495541671, "creation_date": 1444900987, "answer_id": 33144629, "question_id": 33134058, "link": "https://stackoverflow.com/questions/33134058/what-is-proper-way-to-test-error-handling/33144629#33144629", "title": "What is proper way to test error handling?", "body": "<p>This is the link to where I found an answer more in line with what I am asking:\n<a href=\"https://stackoverflow.com/a/17825110/5381605\">https://stackoverflow.com/a/17825110/5381605</a></p>\n\n<pre><code>describe 'testing' do\n  it 'must raise' do\n   a = Proc.new {oo.non_existant}\n   begin\n     a[]\n   rescue =&gt; e\n    end\n   e.must_be_kind_of Exception\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1082, "user_id": 5381605, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-5ZF_yJyjvcQ/AAAAAAAAAAI/AAAAAAAAAFM/lQbQAZxe2wo/photo.jpg?sz=128", "display_name": "binarymason", "link": "https://stackoverflow.com/users/5381605/binarymason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 33134366, "answer_count": 3, "score": 2, "last_activity_date": 1445284317, "creation_date": 1444851247, "question_id": 33134058, "link": "https://stackoverflow.com/questions/33134058/what-is-proper-way-to-test-error-handling", "title": "What is proper way to test error handling?", "body": "<p>I've been working with the Mechanize gem a lot recently and would like to incorporate some tests to ensure I am catching the proper errors.  What is the proper way to test error handling?</p>\n\n<p>This is my basic method:</p>\n\n<pre><code>def get(str)\n  url = format_url(str)\n  #puts \"sending GET request to: #{url}\"\n  sleep(0.1)\n  @page = Mechanize.new do |a|\n    a.user_agent_alias = 'Mac Safari'\n    a.open_timeout = 7\n    a.read_timeout = 7\n    a.idle_timeout = 7\n    a.redirect_ok = true\n  end.get(url)\n\nrescue Mechanize::ResponseCodeError =&gt; e\n  puts \"#{'Response Error:'.red} #{e}\"\nrescue SocketError =&gt; e\n  puts \"#{'Socket Error:'.red} #{e}\"\nrescue Net::OpenTimeout =&gt; e\n  puts \"#{'Connection Timeout:'.red} #{e}\"\nrescue Errno::ETIMEDOUT =&gt; e\n  puts \"#{'Connection Timeout:'.red} #{e}\"\nrescue Net::HTTP::Persistent::Error\n  puts \"#{'Connection Timeout:'.red} read timeout, too many resets.\"\nend\n</code></pre>\n\n<p>And this is the start to tests for handling errors:</p>\n\n<pre><code>class TestErrorHandling &lt; Mechanize::TestCase\n  context 'Example when sending a GET request' do\n    should 'rescue error and return nil' do\n      assert_equal nil, Example.get('http://localhost/pagethatdoesntexist')\n    end\n  end\nend\n</code></pre>\n\n<p>Am I heading in the correct direction?  Any insight and/or resources welcome.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "http", "httparty"], "answers": [{"comments": [{"owner": {"reputation": 367, "user_id": 2569393, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4880196aac023974064d3a0cdc89ceb2?s=128&d=identicon&r=PG", "display_name": "Jaeren Coathup", "link": "https://stackoverflow.com/users/2569393/jaeren-coathup"}, "edited": false, "score": 0, "creation_date": 1444852055, "post_id": 33133999, "comment_id": 54080106, "body": "Hmm... Do you know how I could get HTTParty not to add these to the query parameters themselves?  As currently   &quot;GET /flights?v=2&amp;sort=price&amp;asc=1&amp;adults=1&amp;children=0&amp;infants=0&amp;&zwnj;&#8203;flyFrom=london_gb&amp;to&zwnj;&#8203;=new-york_us&amp;dateFro&zwnj;&#8203;m=02%2F11%2F2015&amp;dat&zwnj;&#8203;eTo=02%2F11%2F2015&amp;t&zwnj;&#8203;ypeFlight=return&amp;ret&zwnj;&#8203;urnTo=04%2F11%2F2015&zwnj;&#8203;&amp;limit=1&amp;curr=gbp works....  But GET /flights?v=2&amp;sort=price&amp;asc=1&amp;adults=1&amp;children=0&amp;infants=0&amp;&zwnj;&#8203;flyFrom=london_gb&amp;to&zwnj;&#8203;=new-york_us&amp;dateFro&zwnj;&#8203;m=02%252F11%252F2015&zwnj;&#8203;&amp;dateTo=02%252F11%25&zwnj;&#8203;2F2015&amp;typeFlight=re&zwnj;&#8203;turn&amp;returnTo=04%252&zwnj;&#8203;F11%252F2015&amp;limit=1&zwnj;&#8203;&amp;curr=gbp doesn&#39;t"}, {"owner": {"reputation": 367, "user_id": 2569393, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4880196aac023974064d3a0cdc89ceb2?s=128&d=identicon&r=PG", "display_name": "Jaeren Coathup", "link": "https://stackoverflow.com/users/2569393/jaeren-coathup"}, "edited": false, "score": 0, "creation_date": 1444852194, "post_id": 33133999, "comment_id": 54080179, "body": "The difference being the second query has 25 after the %"}, {"owner": {"reputation": 905, "user_id": 2641483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/849d311ae1e79d161a6c93b2f9f881bf?s=128&d=identicon&r=PG&f=1", "display_name": "sourcx", "link": "https://stackoverflow.com/users/2641483/sourcx"}, "edited": false, "score": 0, "creation_date": 1444858130, "post_id": 33133999, "comment_id": 54083366, "body": "You probably cannot get around url encoding, make sure to decode it again and you&#39;ll be fine!"}, {"owner": {"reputation": 367, "user_id": 2569393, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4880196aac023974064d3a0cdc89ceb2?s=128&d=identicon&r=PG", "display_name": "Jaeren Coathup", "link": "https://stackoverflow.com/users/2569393/jaeren-coathup"}, "edited": false, "score": 0, "creation_date": 1444877335, "post_id": 33133999, "comment_id": 54089060, "body": "It&#39;s not my API though, so it rejects my input... If I request the URL with the parameters like this however it works..  response = HTTParty.get(&#39;<a href=\"https://api.blahblah.com/flights?flyFrom=london_gb&amp;dateFrom=02%2F11%2F2015\" rel=\"nofollow noreferrer\">api.blahblah.com/&hellip;</a>)"}, {"owner": {"reputation": 3496, "user_id": 1274248, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a5faf6d5b6d38c6b4015b69fd31e7f8f?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/1274248/will"}, "reply_to_user": {"reputation": 367, "user_id": 2569393, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4880196aac023974064d3a0cdc89ceb2?s=128&d=identicon&r=PG", "display_name": "Jaeren Coathup", "link": "https://stackoverflow.com/users/2569393/jaeren-coathup"}, "edited": false, "score": 0, "creation_date": 1445006845, "post_id": 33133999, "comment_id": 54154126, "body": "Thanks for the clarifications, @Jack. Updated my answer to take your comments into consideration."}, {"owner": {"reputation": 367, "user_id": 2569393, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4880196aac023974064d3a0cdc89ceb2?s=128&d=identicon&r=PG", "display_name": "Jaeren Coathup", "link": "https://stackoverflow.com/users/2569393/jaeren-coathup"}, "edited": false, "score": 0, "creation_date": 1445016244, "post_id": 33133999, "comment_id": 54159619, "body": "Thanks!  That was it, I was already encoding the &quot;/&quot; which were being encoded themselves to represent the %"}], "tags": [], "owner": {"reputation": 3496, "user_id": 1274248, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a5faf6d5b6d38c6b4015b69fd31e7f8f?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/1274248/will"}, "is_accepted": true, "score": 1, "last_activity_date": 1444946031, "last_edit_date": 1444946031, "creation_date": 1444851018, "answer_id": 33133999, "question_id": 33133906, "link": "https://stackoverflow.com/questions/33133906/httparty-adding-25-to-in-query-string/33133999#33133999", "title": "HTTParty adding 25 to % in query string", "body": "<p>Adjusted answer based on the additional comments.</p>\n\n<p><a href=\"https://tools.ietf.org/html/rfc3986#section-2.4\" rel=\"nofollow\">\"%25\" is the correct URL encoding for \"%\"</a>. So HTTParty is encoding the percent.</p>\n\n<p>However, <a href=\"http://www.w3schools.com/tags/ref_urlencode.asp\" rel=\"nofollow\">\"%2F\" is the URL encoding for \"/\"</a>. So if you intend to send \"02%2F11%2F2015\" over the wire then you probably want to pass the unencoded version to HTTParty: \"02/11/2015\".</p>\n"}], "owner": {"reputation": 367, "user_id": 2569393, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/4880196aac023974064d3a0cdc89ceb2?s=128&d=identicon&r=PG", "display_name": "Jaeren Coathup", "link": "https://stackoverflow.com/users/2569393/jaeren-coathup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 947, "favorite_count": 0, "accepted_answer_id": 33133999, "answer_count": 1, "score": 1, "last_activity_date": 1444946031, "creation_date": 1444850689, "question_id": 33133906, "link": "https://stackoverflow.com/questions/33133906/httparty-adding-25-to-in-query-string", "title": "HTTParty adding 25 to % in query string", "body": "<p>I am creating a ruby on rails application using HTTParty.  I create a request using this method</p>\n\n<pre><code>query   = { :flyFrom =&gt; \"london_gb\",:dateFrom =&gt; \"02%2F11%2F2015\"}\nresponse = HTTParty.get('https://api.blahblah.com/flights', :query =&gt; query)\n</code></pre>\n\n<p>However HTTParty seems to encode % signs as %25.  So the request looks like this:</p>\n\n<p><a href=\"https://api.blahblah.com/flights?flyfrom=london&amp;dateFrom==02%252F11%252F2015\" rel=\"nofollow\">https://api.blahblah.com/flights?flyfrom=london&amp;dateFrom==02%252F11%252F2015</a></p>\n\n<p>As you can see the difference is:</p>\n\n<pre><code>02%2F11%2F2015\n02%252F11%252F2015\n</code></pre>\n\n<p>My API expects the dates to be in a particular format, so is complaining about this.  Does anyone know how you can get HTTParty to encode these characters correctly so that it sends just a % rather than %25?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 516, "user_id": 1965639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1b26f7f5bf496afa58f8aa562d53a2e?s=128&d=identicon&r=PG", "display_name": "jjk", "link": "https://stackoverflow.com/users/1965639/jjk"}, "edited": false, "score": 0, "creation_date": 1444849511, "post_id": 33133538, "comment_id": 54078655, "body": "well, that sounds like good advice. Have you tried that?"}, {"owner": {"reputation": 37, "user_id": 5442091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964cfba4f7767ee680b14ca7272eced9?s=128&d=identicon&r=PG&f=1", "display_name": "Bryan Ospina", "link": "https://stackoverflow.com/users/5442091/bryan-ospina"}, "reply_to_user": {"reputation": 516, "user_id": 1965639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1b26f7f5bf496afa58f8aa562d53a2e?s=128&d=identicon&r=PG", "display_name": "jjk", "link": "https://stackoverflow.com/users/1965639/jjk"}, "edited": false, "score": 0, "creation_date": 1444850102, "post_id": 33133538, "comment_id": 54078998, "body": "I did, and it does make the web app work, I added the <code>via: [:get, :post]</code> after the <code>match</code> code. But I&#39;m supposed to get the routing error for the homepage at least. This is supposed to teach us about the concept of &quot;rails default routing&quot;. @jjk"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 5442091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964cfba4f7767ee680b14ca7272eced9?s=128&d=identicon&r=PG&f=1", "display_name": "Bryan Ospina", "link": "https://stackoverflow.com/users/5442091/bryan-ospina"}, "edited": false, "score": 0, "creation_date": 1444850832, "post_id": 33133878, "comment_id": 54079414, "body": "oh my god, that explains a ton thank you. @dan philips"}, {"owner": {"reputation": 194, "user_id": 5286003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/023d89912b43fd59bc06cf59bc51179c?s=128&d=identicon&r=PG", "display_name": "danmakenoise", "link": "https://stackoverflow.com/users/5286003/danmakenoise"}, "reply_to_user": {"reputation": 37, "user_id": 5442091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964cfba4f7767ee680b14ca7272eced9?s=128&d=identicon&r=PG&f=1", "display_name": "Bryan Ospina", "link": "https://stackoverflow.com/users/5442091/bryan-ospina"}, "edited": false, "score": 0, "creation_date": 1444851206, "post_id": 33133878, "comment_id": 54079619, "body": "No problem! In case you want a good tutorial for Rails 4, this one is always highly recommended:  <a href=\"https://www.railstutorial.org/book\" rel=\"nofollow noreferrer\">Rails Tutorial by Michael Hartl</a>"}], "tags": [], "owner": {"reputation": 194, "user_id": 5286003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/023d89912b43fd59bc06cf59bc51179c?s=128&d=identicon&r=PG", "display_name": "danmakenoise", "link": "https://stackoverflow.com/users/5286003/danmakenoise"}, "is_accepted": true, "score": 1, "last_activity_date": 1444850580, "creation_date": 1444850580, "answer_id": 33133878, "question_id": 33133538, "link": "https://stackoverflow.com/questions/33133538/received-an-argument-error-when-expecting-a-routing-error-on-in-ruby-on-rails/33133878#33133878", "title": "Received an Argument error when expecting a routing error on in Ruby on Rails", "body": "<p>You are taking a course designed for Rails 3, but are using Rails 4. That is why you are having trouble! <code>match</code> was changed in Rails 4.</p>\n"}], "owner": {"reputation": 37, "user_id": 5442091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964cfba4f7767ee680b14ca7272eced9?s=128&d=identicon&r=PG&f=1", "display_name": "Bryan Ospina", "link": "https://stackoverflow.com/users/5442091/bryan-ospina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 33133878, "answer_count": 1, "score": 0, "last_activity_date": 1444850580, "creation_date": 1444849375, "question_id": 33133538, "link": "https://stackoverflow.com/questions/33133538/received-an-argument-error-when-expecting-a-routing-error-on-in-ruby-on-rails", "title": "Received an Argument error when expecting a routing error on in Ruby on Rails", "body": "<p>On a the beginner course Ruby on Rails 3 Essential Training with Kevin Skoglund, I am asked to add the following line of code into my routes.rb file.<code>match ':controller(/:action(/:id(.:format)))'</code> and comment out this line <code>get 'demo/index'</code>. According to the tutorial I should get a routing error but instead I get the following argument error. (You should not use the <code>match</code> method in your router without specifying an HTTP method. If you want to expose your action to both GET and POST, add <code>via: [:get, :post]</code> option. If you want to expose your action to GET, use <code>get</code> in the router: Instead of: match \"controller#action\" Do: get \"controller#action\").</p>\n"}, {"tags": ["ruby", "selenium-webdriver", "textarea", "rubymine"], "answers": [{"tags": [], "owner": {"reputation": 107, "user_id": 5392105, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5116fa2af439923945ad5a2c0d987c7d?s=128&d=identicon&r=PG&f=1", "display_name": "Ninja java", "link": "https://stackoverflow.com/users/5392105/ninja-java"}, "is_accepted": false, "score": 1, "last_activity_date": 1444906414, "creation_date": 1444906414, "answer_id": 33146590, "question_id": 33133525, "link": "https://stackoverflow.com/questions/33133525/how-to-click-on-text-area-to-send-long-text-using-ruby-with-selenium-web-driver/33146590#33146590", "title": "how to click on text area to send long text using ruby with selenium web driver", "body": "<p>I don't have idea on rudy but can help you logically..</p>\n\n<p>1) first scroll the page from your code to the text area.</p>\n\n<p>2) select the text area by id, xpath or etc. driver.findelement(by.id(...)).sendkey(..........);</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5420492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a433dec0260b7673dbb1a9f8cbc33a4?s=128&d=identicon&r=PG", "display_name": "Erica", "link": "https://stackoverflow.com/users/5420492/erica"}, "is_accepted": false, "score": 0, "last_activity_date": 1445455759, "creation_date": 1445455759, "answer_id": 33267650, "question_id": 33133525, "link": "https://stackoverflow.com/questions/33133525/how-to-click-on-text-area-to-send-long-text-using-ruby-with-selenium-web-driver/33267650#33267650", "title": "how to click on text area to send long text using ruby with selenium web driver", "body": "<p>Thanks Shukla!@sourabh shukla\nMine inside has frame so I need to switch to frame that is why I am not able ciclk that element!!\n   @driver.switch_to.frame(\"06618000000Crrp\"#this is id);\nThen my element found and entered text!!</p>\n"}], "owner": {"reputation": 1, "user_id": 5420492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a433dec0260b7673dbb1a9f8cbc33a4?s=128&d=identicon&r=PG", "display_name": "Erica", "link": "https://stackoverflow.com/users/5420492/erica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1445455759, "creation_date": 1444849331, "question_id": 33133525, "link": "https://stackoverflow.com/questions/33133525/how-to-click-on-text-area-to-send-long-text-using-ruby-with-selenium-web-driver", "title": "how to click on text area to send long text using ruby with selenium web driver", "body": "<p>\n I tried xpath and id\n getting `until': timed out after 10 seconds (no such element (Selenium::WebDriver::Error::TimeOutError)\nI am using rubymine editor.</p>\n\n<pre><code>wait = Selenium::WebDriver::Wait.new(:timeout =&gt; 10)\nwait.until { @driver.find_element(:xpath =&gt; \"//*[@id='j_id0:pb:j_id35']\") }\n@driver.find_element(:xpath =&gt; \"//*[@id='j_id0:pb:j_id35']\").send_keys \"test send sms\"\n</code></pre>\n\n<p>Text area element is placed on bottom of the page.Do I need to scroll down the page and click and sendkeys in the text area.\nin the below code I am trying to find nearest element to the text box and do scroll down later click on text area and sendkeys.But even it's not working..</p>\n\n<pre><code> #wait = Selenium::WebDriver::Wait.new(:timeout =&gt; 10)\n#wait.until { @driver.find_element(:name =&gt; \"j_id0:pb:j_id33\") }\n#scroll = @driver.find_element(:name =&gt; \"j_id0:pb:j_id33\")\n#scroll.location_once_scrolled_into_view\n</code></pre>\n\n<p>Please help on this..\nThanks!!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "params"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4187589"}, "edited": false, "score": 0, "creation_date": 1444849453, "post_id": 33133502, "comment_id": 54078617, "body": "Hello, thank your for your help. The params hash is still empty :/."}], "tags": [], "owner": {"reputation": 2060, "user_id": 3625058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PEy9i.jpg?s=128&g=1", "display_name": "matanco", "link": "https://stackoverflow.com/users/3625058/matanco"}, "is_accepted": false, "score": 0, "last_activity_date": 1444849262, "creation_date": 1444849262, "answer_id": 33133502, "question_id": 33133359, "link": "https://stackoverflow.com/questions/33133359/params-hash-is-empty-when-posting-json/33133502#33133502", "title": "Params hash is empty when POSTing JSON", "body": "<p>You need to configure your params_warrper.rb:</p>\n\n<p>on the top of your controller put:</p>\n\n<pre><code>wrap_parameters format: [:json]\n</code></pre>\n\n<p>then it should automatic parse it as a JSON.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4187589"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 481, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444849262, "creation_date": 1444848708, "question_id": 33133359, "link": "https://stackoverflow.com/questions/33133359/params-hash-is-empty-when-posting-json", "title": "Params hash is empty when POSTing JSON", "body": "<p>I am using the \"default\" create method from the scaffold:</p>\n\n<pre><code>  def create\n    @user = User.new(firstname: params[:firstname], surname: params[:surname])\n    respond_to do |format|\n      if @user.save\n        format.html { redirect_to @user, notice: 'User was successfully created.' }\n        format.json { render :show, status: :created, location: @user }\n      else\n        format.html { render :new }\n        format.json { render json: @user.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n</code></pre>\n\n<p>(I know I'm not using strong parameters there, but whatever :)).</p>\n\n<p>When I am sending a POST request using a very specific REST client, the params hash doesn't contain the parameters. When I look at the request.body, it contains the parameters as JSON. Also, content_type is \"application/json</p>\n\n<p>To fix this issue I had to had </p>\n\n<pre><code>   before_filter :fix_json_params\n   [...]\n   def fix_json_params\n      if request.content_type == \"application/json\"\n        @reparsed_params = JSON.parse(request.body.string).with_indifferent_access\n      end\n    end\n\n    private\n\n    def params\n      @reparsed_params || super\n    end\n</code></pre>\n\n<p>However, I don't understand why?? Why isn't rails parsing my json body correctly if content_type is correct? Any idea?</p>\n\n<p>This is using rails '4.2.4'.</p>\n"}, {"tags": ["ruby", "host"], "answers": [{"comments": [{"owner": {"reputation": 255, "user_id": 3610137, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/de66072482fa86fef2dabdb8eb8cb371?s=128&d=identicon&r=PG&f=1", "display_name": "user3610137", "link": "https://stackoverflow.com/users/3610137/user3610137"}, "edited": false, "score": 0, "creation_date": 1444852104, "post_id": 33133332, "comment_id": 54080134, "body": "I believe that still generates an error if page respone is 404.. How do I override that?"}, {"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "reply_to_user": {"reputation": 255, "user_id": 3610137, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/de66072482fa86fef2dabdb8eb8cb371?s=128&d=identicon&r=PG&f=1", "display_name": "user3610137", "link": "https://stackoverflow.com/users/3610137/user3610137"}, "edited": false, "score": 0, "creation_date": 1444853956, "post_id": 33133332, "comment_id": 54081236, "body": "i don&#39;t get any error when a 404 is encountered - perhaps its related to the version of ruby - what version are you using?"}], "tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": 0, "last_activity_date": 1444848635, "creation_date": 1444848635, "answer_id": 33133332, "question_id": 33132840, "link": "https://stackoverflow.com/questions/33132840/ruby-getting-page-content-even-if-it-doesnt-exist/33133332#33133332", "title": "Ruby - Getting page content even if it doesn&#39;t exist", "body": "<p><code>Net::HTTP.get</code> returns the page content directly as a string, so there is no need to call <code>.content</code> on the results:</p>\n\n<pre><code>page_content = Net::HTTP.get(URI.parse(url))\nputs page_content\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 255, "user_id": 3610137, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/de66072482fa86fef2dabdb8eb8cb371?s=128&d=identicon&r=PG&f=1", "display_name": "user3610137", "link": "https://stackoverflow.com/users/3610137/user3610137"}, "edited": false, "score": 0, "creation_date": 1444852932, "post_id": 33134495, "comment_id": 54080621, "body": "This is not returning anything"}, {"owner": {"reputation": 516, "user_id": 1965639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1b26f7f5bf496afa58f8aa562d53a2e?s=128&d=identicon&r=PG", "display_name": "jjk", "link": "https://stackoverflow.com/users/1965639/jjk"}, "reply_to_user": {"reputation": 255, "user_id": 3610137, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/de66072482fa86fef2dabdb8eb8cb371?s=128&d=identicon&r=PG&f=1", "display_name": "user3610137", "link": "https://stackoverflow.com/users/3610137/user3610137"}, "edited": false, "score": 0, "creation_date": 1444853568, "post_id": 33134495, "comment_id": 54080995, "body": "it works for ruby-2.1.0. I added the explicit requirement, but you probably don&#39;t need that"}, {"owner": {"reputation": 255, "user_id": 3610137, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/de66072482fa86fef2dabdb8eb8cb371?s=128&d=identicon&r=PG&f=1", "display_name": "user3610137", "link": "https://stackoverflow.com/users/3610137/user3610137"}, "edited": false, "score": 0, "creation_date": 1444855889, "post_id": 33134495, "comment_id": 54082300, "body": "Thanks for the answer! Is there a possible way to parse that line by line to look for data? to check if page includes (&quot;You broke it!&quot;)"}], "tags": [], "owner": {"reputation": 516, "user_id": 1965639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1b26f7f5bf496afa58f8aa562d53a2e?s=128&d=identicon&r=PG", "display_name": "jjk", "link": "https://stackoverflow.com/users/1965639/jjk"}, "is_accepted": true, "score": 1, "last_activity_date": 1444853467, "last_edit_date": 1444853467, "creation_date": 1444852675, "answer_id": 33134495, "question_id": 33132840, "link": "https://stackoverflow.com/questions/33132840/ruby-getting-page-content-even-if-it-doesnt-exist/33134495#33134495", "title": "Ruby - Getting page content even if it doesn&#39;t exist", "body": "<p>You need to rescue from the error</p>\n\n<pre><code> def open(url)\n   require 'net/http'\n   page_content = \"\"\n   begin\n     page_content = Net::HTTP.get(URI.parse(url))        \n     puts page_content\n   rescue Net::HTTPNotFound         \n     puts \"THIS IS 404\" + page_content\n   end\n end\n</code></pre>\n\n<p>You can find more information on something like this here: <a href=\"http://tammersaleh.com/posts/rescuing-net-http-exceptions/\" rel=\"nofollow\">http://tammersaleh.com/posts/rescuing-net-http-exceptions/</a></p>\n"}], "owner": {"reputation": 255, "user_id": 3610137, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/de66072482fa86fef2dabdb8eb8cb371?s=128&d=identicon&r=PG&f=1", "display_name": "user3610137", "link": "https://stackoverflow.com/users/3610137/user3610137"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 33134495, "answer_count": 2, "score": -1, "last_activity_date": 1444853467, "creation_date": 1444847011, "last_edit_date": 1444848614, "question_id": 33132840, "link": "https://stackoverflow.com/questions/33132840/ruby-getting-page-content-even-if-it-doesnt-exist", "title": "Ruby - Getting page content even if it doesn&#39;t exist", "body": "<p>I am trying to put together a series of custom 404 pages. </p>\n\n<pre><code>require 'uri'\n\ndef open(url)\n page_content = Net::HTTP.get(URI.parse(url))\n puts page_content.content\nend\n\nopen('http://somesite.com/1ygjah1761')\n</code></pre>\n\n<p>the following code exits the program with an error. How can I get the page content from a website, regardless of it being 404 or not.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 653, "user_id": 1741823, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2ce26d37d1a685b094324b5ed9a6a755?s=128&d=identicon&r=PG", "display_name": "Nick L Scott", "link": "https://stackoverflow.com/users/1741823/nick-l-scott"}, "edited": false, "score": 0, "creation_date": 1444849189, "post_id": 33132948, "comment_id": 54078462, "body": "Thanks for the answer. I should have mentioned that there are more scoped queries by a given Organization. For example a User may have Articles for a given Organization, as he may have Comments for a given Article that of course are scoped by Organization. Can this be done with this approach?"}, {"owner": {"reputation": 4156, "user_id": 5438616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ac7d10942eb0c1ef5db6f7db98a6b37?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Hennes", "link": "https://stackoverflow.com/users/5438616/thomas-hennes"}, "reply_to_user": {"reputation": 653, "user_id": 1741823, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2ce26d37d1a685b094324b5ed9a6a755?s=128&d=identicon&r=PG", "display_name": "Nick L Scott", "link": "https://stackoverflow.com/users/1741823/nick-l-scott"}, "edited": false, "score": 0, "creation_date": 1444891343, "post_id": 33132948, "comment_id": 54093432, "body": "Yes it can. Although this is beyond the scope of your original question, the actual design implementation would be done based on a few key decisions: 1. When you say a User has Articles <b>for</b> an Organization, do you mean the Articles are <b>about</b> the Organization, or that the User has written the Article under a Role capacity that connects him/her to the Organization, or a mix of both? 2. Same thing with Comments."}], "tags": [], "owner": {"reputation": 4156, "user_id": 5438616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ac7d10942eb0c1ef5db6f7db98a6b37?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Hennes", "link": "https://stackoverflow.com/users/5438616/thomas-hennes"}, "is_accepted": false, "score": 3, "last_activity_date": 1444847381, "creation_date": 1444847381, "answer_id": 33132948, "question_id": 33132604, "link": "https://stackoverflow.com/questions/33132604/how-should-i-approach-this-relations-in-ruby/33132948#33132948", "title": "How should I approach this relations in ruby?", "body": "<p>You should use a much simpler approach. According to your description, <code>Roles</code> is actually what connects <code>Users</code> to <code>Organizations</code> and vice-versa.</p>\n\n<p>Using the <code>has_many</code> and <code>has_many :through</code> associations, this can be implemented like the following:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :roles, inverse_of: :users, dependent: :destroy\n  has_many :organizations, inverse_of: :users, through: :roles\nend\n\nclass Organization &lt; ActiveRecord::Base\n  has_many :roles, inverse_of: :organizations, dependent: :destroy\n  has_many :users, inverse_of: :organizations, through: :roles\nend\n\nclass Role &lt; ActiveRecord::Base\n  belongs_to :user, inverse_of: :roles\n  belongs_to :organization, inverse_of: :roles\nend\n</code></pre>\n\n<p>If you wish to preserve roles when you destroy users or organizations, change the <code>dependent:</code> keys to <code>:nullify</code>. This might be a good idea if you add other descriptive data in your <code>Role</code> and want the role to remain even though temporarily vacated by a user, for example.</p>\n\n<p>The <code>has_many :through</code> association reference:</p>\n\n<p><a href=\"http://guides.rubyonrails.org/association_basics.html#the-has-many-through-association\" rel=\"nofollow\">http://guides.rubyonrails.org/association_basics.html#the-has-many-through-association</a></p>\n"}, {"tags": [], "owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "is_accepted": false, "score": 1, "last_activity_date": 1444853939, "creation_date": 1444853939, "answer_id": 33134824, "question_id": 33132604, "link": "https://stackoverflow.com/questions/33132604/how-should-i-approach-this-relations-in-ruby/33134824#33134824", "title": "How should I approach this relations in ruby?", "body": "<p>If the user can have many <code>Roles</code> for a single organisation, \nand <code>OrganizationUser</code> represents this membership, \nthan, yes, you need another table for <code>organization_user_roles</code>.</p>\n\n<p>You need to explicitly create it in the database (normally with a migration)</p>\n\n<p>To not get confused, try to find a nice name for <code>OrganisationUser</code>, like employment, membership, etc.</p>\n"}, {"comments": [{"owner": {"reputation": 4156, "user_id": 5438616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ac7d10942eb0c1ef5db6f7db98a6b37?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Hennes", "link": "https://stackoverflow.com/users/5438616/thomas-hennes"}, "edited": false, "score": 1, "creation_date": 1444897843, "post_id": 33143474, "comment_id": 54096975, "body": "This is a very nice addition indeed, as it abstracts roles. Well done!"}], "tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": false, "score": 2, "last_activity_date": 1444897581, "creation_date": 1444897581, "answer_id": 33143474, "question_id": 33132604, "link": "https://stackoverflow.com/questions/33132604/how-should-i-approach-this-relations-in-ruby/33143474#33143474", "title": "How should I approach this relations in ruby?", "body": "<p>To add to <code>jaxx</code>'s answer (I upvoted), I originally thought you'd be best looking at <a href=\"http://guides.rubyonrails.org/association_basics.html#the-has-many-through-association\" rel=\"nofollow\"><code>has_many :through</code></a>:</p>\n\n<pre><code>#app/models/user.rb\nclass User &lt; ActiveRecord::Base\n   has_many :positions\n   has_many :organizations, through: :positions\nend\n\n#app/models/position.rb\nclass Position &lt; ActiveRecord::Base\n   #columns id | user_id | organization_id | role_id | etc | created_at | updated_at\n   belongs_to :user\n   belongs_to :organization\n\n   belongs_to :role\n   delegate :name, to: :role #-&gt; @position.name\nend\n\n#app/models/organization.rb\nclass Organization &lt; ActiveRecord::Base\n   has_many :positions\n   has_many :users, through: :positions\nend\n\n#app/models/role.rb\nclass Role &lt; ActiveRecord::Base\n   has_many :positions\nend\n</code></pre>\n\n<p>This will allow you to call the following:</p>\n\n<pre><code>@organization = Organization.find x\n@organization.positions\n@organization.users\n\n@user = User.find x\n@user.organizations\n@user.positions\n</code></pre>\n\n<hr>\n\n<p>This is much simpler than your approach, and therefore has much more ability to keep your system flexible &amp; extensible. </p>\n\n<p>If you want to scope your <code>@organizations</code>, you should be able to do so, and still call the <code>users</code> / <code>positions</code> you need.</p>\n\n<p>One of the added benefits of the code above is that the <code>Position</code> model will give you an actual set of data which can be shared between <code>organizations</code> and <code>users</code>. </p>\n\n<p>It resolves one of the main issues with <code>jaxx</code>'s answer, which is that you have to set a role for every association you make. With my interpretation, your <code>roles</code> can be set on their own, and each <em>position</em> assigned the privileges each role provides.</p>\n"}], "owner": {"reputation": 653, "user_id": 1741823, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2ce26d37d1a685b094324b5ed9a6a755?s=128&d=identicon&r=PG", "display_name": "Nick L Scott", "link": "https://stackoverflow.com/users/1741823/nick-l-scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1444897581, "creation_date": 1444846250, "question_id": 33132604, "link": "https://stackoverflow.com/questions/33132604/how-should-i-approach-this-relations-in-ruby", "title": "How should I approach this relations in ruby?", "body": "<p>I've been going back and forward on this and I would like some advices.</p>\n\n<p>I have \"User\" that can be part of many \"Organizations\", and for each one they can have many \"Roles\". (actually I have this scenario repeated with other kind of users and with something like roles, but for the sake of the example I summed it up).</p>\n\n<p>My initial approach was doing a Table with user_id, organization_id and role_id, but that would mean many registers with the same user_id and organization_id just to change the role_id.</p>\n\n<p>So I thought of doing an organization_users relation table and an organization_users_roles relation. The thing is, now I don't exactly know how to code the models.</p>\n\n<pre><code>class Organization &lt; ActiveRecord::Base\n   has_and_belongs_to_many :users, join_table: :organization_users\nend\n\nclass User &lt; ActiveRecord::Base\n  has_and_belongs_to_many :organizations, join_table: :organization_users\nend\n\nclass OrganizationUser &lt; ActiveRecord::Base\n   has_and_belongs_to_many :users\n   has_and_belongs_to_many :organizations\n   has_many :organization_user_roles\n   has_many :roles, through: :organization_user_roles\nend\n\nclass OrganizationUserRole &lt; ActiveRecord::Base\n  has_and_belongs_to_many :roles\n  has_and_belongs_to_many :organization_users\nend\n\nclass Role &lt; ActiveRecord::Base\n  has_and_belongs_to_many :organization_user_roles\nend\n</code></pre>\n\n<p>If for example I want to get: \u00b4OrganizationUser.first.roles\u00b4 I get an error saying: PG::UndefinedTable: ERROR:  relation \"organization_user_roles\" does not exist</p>\n\n<p>How should I fix my models?</p>\n"}, {"tags": ["ruby", "metaprogramming"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1444845545, "post_id": 33132000, "comment_id": 54076292, "body": "These are simplistic examples of how <code>Binding</code> and <code>eval</code> <i>work</i>, <i>not</i> realistic real-world applications of how they are <i>used</i>. In particular, using <code>eval</code> with a constant string doesn&#39;t make sense, you&#39;d typically use it with a string that includes some unknown or dynamically built parts."}], "answers": [{"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 3, "last_activity_date": 1444848468, "creation_date": 1444848468, "answer_id": 33133269, "question_id": 33132000, "link": "https://stackoverflow.com/questions/33132000/eval-and-binding-what-are-they-useful-for/33133269#33133269", "title": "eval and binding: what are they useful for?", "body": "<p>For sake of discussion, lets say you are working on a template engine - which will process a given text and replace the Ruby code in it with the its value.  We can use <code>eval</code> for that.</p>\n\n<p>Being a general purpose engine, the template text should allow usage of Ruby variables, whose value will be defined in the caller's binding.  In such cases, by passing binding to the <code>eval</code>, we can allow user's binding to be used for variable evaluation.</p>\n\n<p>A rudimentary, not elegant, approach is demonstrated below:</p>\n\n<pre><code>template = \"Hello @first_name@ @last_name@\"\n\ndef process(template, b)\n    vars = template.scan(/@(\\w+)@/).flatten\n    vars.each {|v| template = template.gsub(\"@#{v}@\", eval(\"#{v}\", b)) }\n    return template\nend\n\nfirst_name = \"Wand\"\nlast_name = \"Maker\"\n\nstr = process(template, binding)\np str\n#=&gt; \"Hello Wand Maker\"\n\nfirst_name = \"Rubeus\"\nlast_name = \"Hagrid\"\np process(template, binding)\n#=&gt; \"Hello Rubeus Hagrid\"\n</code></pre>\n\n<p>A somewhat similar approach has been used in ERB, Ruby's in-built template engine.  You can take a look at <a href=\"https://github.com/ruby/ruby/blob/trunk/lib/erb.rb#L860\" rel=\"nofollow\">source code</a></p>\n"}], "owner": {"reputation": 1020, "user_id": 5078888, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/25b81b1de5e97f0453de76de26329d6c?s=128&d=identicon&r=PG&f=1", "display_name": "Asarluhi", "link": "https://stackoverflow.com/users/5078888/asarluhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 724, "favorite_count": 0, "accepted_answer_id": 33133269, "answer_count": 1, "score": 4, "last_activity_date": 1444848468, "creation_date": 1444844117, "last_edit_date": 1444845562, "question_id": 33132000, "link": "https://stackoverflow.com/questions/33132000/eval-and-binding-what-are-they-useful-for", "title": "eval and binding: what are they useful for?", "body": "<p>According to <a href=\"http://ruby-doc.org/core-2.2.0/Binding.html\" rel=\"nofollow\">ruby-doc.org</a>, <code>kernel#eval</code> takes a binding object as the second argument as follows:</p>\n\n<pre><code>Const = 7\np eval(\"Const\", binding)  # =&gt; 7\n</code></pre>\n\n<p>The method <code>eval</code> can be used with an object returned by a method <code>get_binding</code> that accepts one parameter:</p>\n\n<pre><code>def get_binding(param)\n  return binding\nend\nn = get_binding(7)\np eval(\"param\", n)  # =&gt; 7\n</code></pre>\n\n<p>In the first piece of code, we get the value of <code>Const</code>, and in the second piece of code, we get the value of <code>param</code>. If we use <code>eval</code> and <code>binding</code> to retrieve values that we already know, what are these methods useful for?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "deprecated", "deprecation-warning"], "comments": [{"owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "edited": false, "score": 0, "creation_date": 1445607978, "post_id": 33131627, "comment_id": 54406536, "body": "you sure you running on Ruby 2?   I see a lot of references to 1.8 in the stacktrace/dump.  FWIW  running Rails on a cpanel host appears to be an exercise in frustration, as they generally do not have the required stuff installed.  If you look at that wiki entry they tell you to develop on rails 2.3.18.  Hate to say this but I suggest you look for different hosting."}, {"owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "edited": false, "score": 0, "creation_date": 1445614019, "post_id": 33131627, "comment_id": 54410938, "body": "just adding to this,  <code>Ruby 2.1.5p273 (2014-11-13 revision 48405) [i386-mingw32]!</code> is what you are using on your development host, no way that is running on cpanel  (windows for you vs probably centos on the cpanel host). Ruby is is 1.8 on the host,  It isn&#39;t looking at your Gemfile,  no bundler, etc.. I still stand by find another host."}], "answers": [{"tags": [], "owner": {"reputation": 2213, "user_id": 5157221, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh4.googleusercontent.com/-YW9dXs0bMLY/AAAAAAAAAAI/AAAAAAAAD3E/cEQZYkX5qWw/photo.jpg?sz=128", "display_name": "Suriyaa", "link": "https://stackoverflow.com/users/5157221/suriyaa"}, "is_accepted": true, "score": 0, "last_activity_date": 1450460598, "creation_date": 1450460598, "answer_id": 34361158, "question_id": 33131627, "link": "https://stackoverflow.com/questions/33131627/gemsourceindex-from-installed-gems-is-deprecated-with-no-replacement-it-will/34361158#34361158", "title": "Gem::SourceIndex.from_installed_gems is deprecated with no replacement. It will be removed on or after 2011-10-01", "body": "<blockquote>\n  <p><strong>Solved</strong> by Doon: The Rails app has a lot of references to 1.8 in the stacktrace/dump.</p>\n</blockquote>\n\n<p><em>Running Ruby on Rails (RoR) on a cPanel host appears to be an exercise in frustration,</em> <strong>as they generally <em>do not</em> have the required stuff installed</strong>.</p>\n"}], "owner": {"reputation": 2213, "user_id": 5157221, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh4.googleusercontent.com/-YW9dXs0bMLY/AAAAAAAAAAI/AAAAAAAAD3E/cEQZYkX5qWw/photo.jpg?sz=128", "display_name": "Suriyaa", "link": "https://stackoverflow.com/users/5157221/suriyaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 850, "favorite_count": 2, "accepted_answer_id": 34361158, "answer_count": 1, "score": 1, "last_activity_date": 1450460598, "creation_date": 1444842778, "last_edit_date": 1495542654, "question_id": 33131627, "link": "https://stackoverflow.com/questions/33131627/gemsourceindex-from-installed-gems-is-deprecated-with-no-replacement-it-will", "title": "Gem::SourceIndex.from_installed_gems is deprecated with no replacement. It will be removed on or after 2011-10-01", "body": "<p>I'm running a <em>Ruby on Rails (RoR) app</em> on the web hoster <em>HelioHost</em>.</p>\n\n<blockquote>\n  <p><em>The code of my project is available under <a href=\"https://github.com/neogames/neogames.github.io/tree/rails-website\" rel=\"nofollow noreferrer\">https://github.com/neogames/neogames.github.io/tree/rails-website</a>.</em></p>\n</blockquote>\n\n<p>After <strong>trying to run RoR I got the following error message</strong>:</p>\n\n<pre><code>NOTE: Gem::SourceIndex.from_installed_gems is deprecated with no replacement.\nIt will be removed on or after 2011-10-01.    \nGem::SourceIndex.from_installed_gems called from /usr/lib/ruby/gems/1.8/gems/gem_plugin-0.2.3/lib/gem_plugin.rb:109.\nNOTE: from_installed_gems(arg) is deprecated. \nFrom /usr/lib/ruby/site_ruby/1.8/rubygems/deprecate.rb:63:in `send'\nNOTE: Gem::SourceIndex.from_gems_in is deprecated with no replacement.\nIt will be removed on or after 2011-10-01. Gem::SourceIndex.from_gems_in called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:50.        \nNOTE: Gem::SourceIndex#initialize is deprecated with no replacement.\nIt will be removed on or after 2011-11-01.\nGem::SourceIndex#initialize called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:67. \nNOTE: Gem::SourceIndex#spec_dirs= is deprecated, use Specification.dirs=.\nIt will be removed on or after 2011-11-01. \nGem::SourceIndex#spec_dirs= called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:94.\nNOTE: Gem::SourceIndex#refresh! is deprecated with no replacement.\nIt will be removed on or after 2011-11-01. \nGem::SourceIndex#refresh! called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:95.\nNOTE: Gem::SourceIndex#load_gems_in is deprecated with no replacement. It will be removed on or after 2011-11-01. \nGem::SourceIndex#load_gems_in called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:322.\nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec.\nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec.\nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec.\nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec.\nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec.\nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec.\nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec.\nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec.\nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec.\nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec.\nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127.     \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127.    \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. \nIt will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. \nNOTE: Gem::SourceIndex#add_spec is deprecated, use Specification.add_spec. It will be removed on or after 2011-11-01. Gem::SourceIndex#add_spec called from /usr/lib/ruby/site_ruby/1.8/rubygems/source_index.rb:127. NOTE: Gem::SourceIndex#each is deprecated with no replacement. It will be removed on or after 2011-11-01. Gem::SourceIndex#each called from /usr/lib/ruby/gems/1.8/gems/gem_plugin-0.2.3/lib/gem_plugin.rb:112. \n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/kTUn6.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kTUn6.jpg\" alt=\"enter image description here\"></a></p>\n\n<blockquote>\n  <p>I'm using <strong>Rails 4.2.4</strong> and <strong>Ruby 2.1.5p273 (2014-11-13 revision 48405) [i386-mingw32]</strong>!</p>\n  \n  <p><em>Did I install something wrong?</em> :-/</p>\n  \n  <p>Thank you so much for your help and advice. :-D</p>\n</blockquote>\n\n<hr>\n\n<p>I also searched the Internet after this problem and I'm not alone.\n<em>I tried the instructions from the links below but RoR is still <strong>not working</em></strong>! :-S</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/6065383/gem-source-index-is-deprecated-use-specification-should-i-re-install-gem-or-ra\">Gem.source_index is deprecated, use Specification. Should I re-install Gem or Rails?</a></li>\n<li><a href=\"https://github.com/rubygems/rubygems/issues/145\" rel=\"nofollow noreferrer\">https://github.com/rubygems/rubygems/issues/145</a></li>\n<li><a href=\"https://serverfault.com/questions/261080/deployment-of-rails-app-with-nginx-and-mongrel-cluster-on-ubuntu-10-04-lts\">https://serverfault.com/questions/261080/deployment-of-rails-app-with-nginx-and-mongrel-cluster-on-ubuntu-10-04-lts</a></li>\n<li><a href=\"http://wiki.helionet.org/Deploying_a_Rails_application_on_HelioHost\" rel=\"nofollow noreferrer\">http://wiki.helionet.org/Deploying_a_Rails_application_on_HelioHost</a></li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1100, "user_id": 4524789, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/844f22aa3a74fa8145406ea89fb77491?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Collins", "link": "https://stackoverflow.com/users/4524789/jack-collins"}, "edited": false, "score": 0, "creation_date": 1444852715, "post_id": 33133817, "comment_id": 54080487, "body": "Thanks for taking the time to answer - I appreciate it. I like your use of <code>after_initialize</code> in a Presenter object. I didn&#39;t think of that. Unless I&#39;m misunderstanding, I couldn&#39;t use the <code>after_initialize</code> block to help with <b>setting</b> the value in Celsius when a Fahrenheit value is passed in, right?"}, {"owner": {"reputation": 516, "user_id": 1965639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1b26f7f5bf496afa58f8aa562d53a2e?s=128&d=identicon&r=PG", "display_name": "jjk", "link": "https://stackoverflow.com/users/1965639/jjk"}, "reply_to_user": {"reputation": 1100, "user_id": 4524789, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/844f22aa3a74fa8145406ea89fb77491?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Collins", "link": "https://stackoverflow.com/users/4524789/jack-collins"}, "edited": false, "score": 0, "creation_date": 1444852820, "post_id": 33133817, "comment_id": 54080552, "body": "It&#39;s a little tough to answer without seeing the whole code base, and my answer is vague as a result. I think you are right, but I think that a lot of problems go away if you use Temperature &lt; ActiveRecord::Base, and use after_initialize to ensure the value is in C. You started off by talking about getter and setters, but you are using them on a helper class (if I am understanding) when they probably are better used on a model that is significant to your app."}], "tags": [], "owner": {"reputation": 516, "user_id": 1965639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1b26f7f5bf496afa58f8aa562d53a2e?s=128&d=identicon&r=PG", "display_name": "jjk", "link": "https://stackoverflow.com/users/1965639/jjk"}, "is_accepted": false, "score": 0, "last_activity_date": 1444850350, "creation_date": 1444850350, "answer_id": 33133817, "question_id": 33131367, "link": "https://stackoverflow.com/questions/33131367/intercept-getter-and-setter-calls-in-rails-for-data-manipulation/33133817#33133817", "title": "Intercept getter and setter calls in Rails for data manipulation", "body": "<p>I think you are making some things more difficult than they have to be while also hinting at using some nice patterns. </p>\n\n<p>First issue is your use of callbacks ... I think that what you want is to use an after_initialize ...</p>\n\n<pre><code> class ReadingPresenter\n      ...\n      after_initialize :presentation_value\n\n      def presentation_value\n           TemperatureService.for_current_user @model.value\n      end\n</code></pre>\n\n<p>And then use this presentation_value instead of value. (I am assuming there is a good reason to have the ReadingPresenter class rather than just working with some model like Temperature &lt; ActiveRecord::Base). </p>\n\n<p>I think you are probably making the right decision to use a service to handle the presentation value, especially as I can imagine that draws status from other parts of your app. I also think that a lot of your logic in the callbacks is beside the point and is better handled by using something like after_initialize. But it also seems odd that you are not just managing the presentation of the Temperature object, that you could handle a little more atomically than handling your presentation as a 'thing' unto itself.   </p>\n"}], "owner": {"reputation": 1100, "user_id": 4524789, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/844f22aa3a74fa8145406ea89fb77491?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Collins", "link": "https://stackoverflow.com/users/4524789/jack-collins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444850350, "creation_date": 1444841969, "question_id": 33131367, "link": "https://stackoverflow.com/questions/33131367/intercept-getter-and-setter-calls-in-rails-for-data-manipulation", "title": "Intercept getter and setter calls in Rails for data manipulation", "body": "<p>I am working with a Rails/Angular application that stores temperature values. Temperatures are always stored in Celsius in the database. These temperature values can be displayed to the user in either Celsius or Fahrenheit based on the user's preference. </p>\n\n<p>The application can also alert the user if a temperature reaches a certain value. That is important because a user might enter an alert value in Fahrenheit, but it needs to be converted to Celsius before it is stored in the database. These <code>alert</code> values are also in a different table than the temperature readings themselves, so the solution is ideally applicable across models. </p>\n\n<p>So, essentially, <strong>I need to find the best location and strategy for manipulating values when they are read <em>and saved</em> to the database</strong>. We've tried a couple different things, but I am looking to refactor these into a nice maintainable solution that involves as few code paths as possible.</p>\n\n<p>For the display-time change of temperature readings, we've used a controller concern in the <code>ReadingsController</code>. That maps to a <code>ReadingPresenter</code> that will convert to Fahrenheit if the user has that preference.</p>\n\n<pre><code>class ReadingPresenter\n  include ApplicationHelper\n\n  def initialize(sensor_reading, sample_type)\n    @model = sensor_reading\n    @sample_type = sample_type\n  end\n\n  def value\n    if @sample_type.temperature?\n      TemperatureService.for_current_user @model.value\n    else\n      @model.value\n    end\n  end\nend\n</code></pre>\n\n<p>This works fine when we need to display a Fahrenheit reading that is already stored, but since it is a presenter it will obviously not work when we need to change a user-entered Fahrenheit <code>alert</code> value to Celsius to be stored in the database. </p>\n\n<p>In that case, we've created a model concern that has <code>before_save</code>, <code>after_save</code>, and <code>after_find</code> callbacks to manipulate. </p>\n\n<pre><code>module TemperatureAttributes\n  extend ActiveSupport::Concern\n\n  module ClassMethods\n    def temperatures(*temperature_attributes)\n      options = temperature_attributes.extract_options!\n      before_save TemperatureScaleConverter.new(temperature_attributes, options[:if])\n      after_save TemperatureScaleConverter.new(temperature_attributes, options[:if])\n      after_find TemperatureScaleConverter.new(temperature_attributes, options[:if])\n    end\n  end\nend\n</code></pre>\n\n<p>This does work, but you can see that it is a completely different code path. I have to imagine there is a better way to handle this type of situation in Rails.</p>\n\n<p>I've been experimenting with <a href=\"http://ruby-doc.org/core-2.0.0/Module.html#method-i-prepended\" rel=\"nofollow\">Ruby's prepend method</a> to intercept the calls and have also considered using <code>alias_method_chain</code> in a similar way. I have also thought of trying to conditionally use database views to convert the values at the lowest level possible.</p>\n\n<p>I'm not looking for you to solve my problem for me, but <strong>if you have any advice on the best way to intercept getter and setter calls in Rails across models</strong> I would love to hear it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "is_accepted": true, "score": 0, "last_activity_date": 1445012387, "creation_date": 1445012387, "answer_id": 33175161, "question_id": 33131347, "link": "https://stackoverflow.com/questions/33131347/showing-previously-checked-records-marked-inactive-in-edit-form-with-collectio/33175161#33175161", "title": "Showing previously checked records marked &#39;inactive&#39; in edit form with collection_check_boxes", "body": "<p>Figured it out thanks to some help:</p>\n\n<pre><code> ...\n\n &lt;%= f.collection_check_boxes(\"language_ids\", Language.active + @company.languages.inactive, :id, :name ) do |language| %&gt;\n\n ...\n</code></pre>\n\n<p>This works for the <code>@agency</code> that is new because it doesn't have any <code>languages.inactive</code>.  It also works for <code>@agency</code> when we <code>edit</code> it because it grabs all the <code>active</code> agencies, but also shows any <code>inactive</code> languages that already exist.</p>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 33175161, "answer_count": 1, "score": 0, "last_activity_date": 1445012387, "creation_date": 1444841904, "last_edit_date": 1444843886, "question_id": 33131347, "link": "https://stackoverflow.com/questions/33131347/showing-previously-checked-records-marked-inactive-in-edit-form-with-collectio", "title": "Showing previously checked records marked &#39;inactive&#39; in edit form with collection_check_boxes", "body": "<p>Rails convention uses the same <code>_form.html.erb</code> form for both creating a <code>new</code> record, and for <code>editing</code> an existing record.  This is causing an issue with  an <code>f.collection_check_boxes</code> section in my form because I am attempting to distinguish between <code>active</code> and <code>inactive</code> selections.</p>\n\n<ul>\n<li>For creating a new record, I want to display only those checkbox selections that have the <code>active</code> attribute marked as: <code>true</code>.</li>\n<li>Editing an existing record is different.  Like for new records, I want to display all checkbox selections whose <code>active</code> attribute is marked as <code>true</code>.  But I also want to show any already existing checked selections, even if the <code>active</code> attribute is marked as <code>false</code>.</li>\n</ul>\n\n<p>Here is a tangible example.  I have <code>companies</code>, <code>languages</code>, and <code>companies_languages</code>.  The <code>companies_languages</code> table is a rich join table, representing language interpreters that this company has on staff. </p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-sm-12\"&gt;\n    &lt;div class=\"field\"&gt;\n      &lt;%= f.label :companies_languages, \"What Language Translators are on Staff?\" %&gt;&lt;br&gt;\n      &lt;%= f.collection_check_boxes(\"language_ids\", Language.active, :id, :name ) do |language| %&gt;\n        &lt;div class=\"row\"&gt;\n          &lt;div class=\"col-xs-1\"&gt;\n            &lt;%= language.check_box(class: \"check_box\") %&gt;\n          &lt;/div&gt;\n          &lt;div class=\"col-xs-11\"&gt;\n            &lt;%= language.object.name %&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>This works great when creating a <code>new</code> company and choosing from all <code>active</code> languages in order to specify the language interpreters the company has on staff.  </p>\n\n<p>However, it does not work great for <code>editing</code> a company.  Any languages this company has interpreters for whose <code>active</code> attribute is marked <code>false</code> is simply not shown.  This makes it not possible for the user to remove those <code>inactive</code> interpreters, or to see them at all in the <code>edit</code> form. </p>\n\n<p>Any tips for solving this would be appreciated. </p>\n"}, {"tags": ["ruby", "terminal"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1444840520, "post_id": 33130843, "comment_id": 54073437, "body": "Your issue seems to be a simple thing to understand (not necessarily meaning that it is easy to solve), but you are writing it as if it is very difficult."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1444840590, "post_id": 33130843, "comment_id": 54073472, "body": "How/why your lines are being wrapped, again?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1444841046, "post_id": 33130843, "comment_id": 54073716, "body": "Under &quot;What I want&quot;, why do you have <code>$ print &quot;XXXX\\r&quot;</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1444843196, "post_id": 33131029, "comment_id": 54074971, "body": "I&#39;m not sure if this is documented somewhere but current versions of MRI support some ANSI escape codes on Windows when writing to the console."}, {"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1444856510, "post_id": 33131029, "comment_id": 54082633, "body": "Actually, the &quot;by definition&quot; found in ECMA-48 (the relevant standard) is more complicated than that.  It has the cursor (active presentation position) going to the <i>home</i> position on the same line.  The home position is configurable (though the given SLH sequence is rarely used). Some terminals have settable margins -- and carriage return is affected by those."}], "tags": [], "owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "is_accepted": false, "score": 2, "last_activity_date": 1444840892, "creation_date": 1444840892, "answer_id": 33131029, "question_id": 33130843, "link": "https://stackoverflow.com/questions/33130843/r-doesnt-clear-more-than-one-line/33131029#33131029", "title": "\\r doesn&#39;t clear more than one line", "body": "<p><code>\\r</code>, by definition, only moves the cursor to the start of the current line. There is <em>no</em> standardized way to move the cursor to other lines - different platforms have different ways to do it. On Windows, you'd use the Win32 console API to move the cursor, and on Linux/UNIX/OS X you would use ANSI escape codes to move the cursor around. </p>\n\n<p>The Ruby Curses library can do some of this, but I'm not certain it works on Windows, for example. </p>\n"}], "owner": {"reputation": 501, "user_id": 5065939, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2ea2ad20076d69570c0d1ca3253761d6?s=128&d=identicon&r=PG&f=1", "display_name": "JayTarka", "link": "https://stackoverflow.com/users/5065939/jaytarka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1444840910, "creation_date": 1444840305, "last_edit_date": 1444840910, "question_id": 33130843, "link": "https://stackoverflow.com/questions/33130843/r-doesnt-clear-more-than-one-line", "title": "\\r doesn&#39;t clear more than one line", "body": "<p>Let's say my terminal is 4-columns wide, and I print 4 <code>X</code>s and a return character:</p>\n\n<pre><code>$ print \"XXXX\\r\"\n$ yesyeshellothiscanbeanythig\n</code></pre>\n\n<p>The <code>\\r</code> returns to the start of the line, so that the characters to follow (<code>yesyeshellothiscanbeanythig</code>) can overwrite them.</p>\n\n<p>I want to achieve this effect beyond a single line: when I have five <code>X</code> and the final <code>X</code> wraps onto a second line, I want <code>\\r</code> to move back both lines.</p>\n\n<p>What I want:</p>\n\n<pre><code>$ print \"XXXX\\r\"\n$ overwrite\n</code></pre>\n\n<p>What I get:</p>\n\n<pre><code>$ print \"XXXXX\\r\"\nXXXX\n$ overwrite\n</code></pre>\n\n<p>The first 4 <code>X</code>s are printed, and then the fifth <code>X</code> is wrapped onto a newline, and then the <code>\\r</code> only goes to the start of the second line, leaving the 4 <code>X</code> intact on the first line. </p>\n\n<p>Is there a platform-independent way to let <code>\\r</code> go back to the start of the first line? I thought an <code>\\r</code> would go to the start of the first line if the lines are produced via a wrap rather than an explicit <code>\\n</code>.</p>\n"}, {"tags": ["ruby", "api", "httparty", "campaign-monitor"], "answers": [{"tags": [], "owner": {"reputation": 1272, "user_id": 3338159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6132bd030583e478dbc41c369f410ad6?s=128&d=identicon&r=PG&f=1", "display_name": "T J", "link": "https://stackoverflow.com/users/3338159/t-j"}, "is_accepted": false, "score": 0, "last_activity_date": 1444919905, "creation_date": 1444919905, "answer_id": 33151444, "question_id": 33130800, "link": "https://stackoverflow.com/questions/33130800/cant-add-email-to-campaign-monitor-api/33151444#33151444", "title": "Can&#39;t add email to Campaign Monitor API?", "body": "<p>It looks like you have everything setup correctly, you just need to turn the body of the post into a json string.</p>\n\n<pre><code>  response = HTTParty.post(url,\n    :basic_auth =&gt; auth, :body =&gt; {\n       'EmailAddress' =&gt; 'mike@hotmail.com',\n       'Name' =&gt; 'Test',\n       'Resubscribe' =&gt; true,\n       'RestartSubscriptionBasedAutoresponders' =&gt; true\n     }.to_json)\n</code></pre>\n\n<p>I'd like to point out that a Campaign Monitor API gem also exists that will do all of that work for you.</p>\n\n<p><a href=\"https://github.com/campaignmonitor/createsend-ruby\" rel=\"nofollow\" title=\"Campaign Monitor API gem\">Campaign Monitor API Gem</a></p>\n"}], "owner": {"reputation": 47, "user_id": 5172981, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1146756268674720/picture?type=large", "display_name": "Michael O Meara", "link": "https://stackoverflow.com/users/5172981/michael-o-meara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 733, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1444919905, "creation_date": 1444840177, "last_edit_date": 1444842245, "question_id": 33130800, "link": "https://stackoverflow.com/questions/33130800/cant-add-email-to-campaign-monitor-api", "title": "Can&#39;t add email to Campaign Monitor API?", "body": "<p>I am trying to create some simple Ruby code to add emails using the Campaign Monitor API. Below is my code.</p>\n\n<pre><code>require 'httparty'\nrequire 'json'\n\ndef request\n    url = 'https://api.createsend.com/api/v3.1/subscribers/MYLISTID.json'\n    auth = {:username =&gt; 'MYAPIKEY', :password =&gt; 'x'}\n    response = HTTParty.post(url,\n                  :basic_auth =&gt; auth, :body =&gt; {\n                      'EmailAddress' =&gt; 'mike@hotmail.com',\n                      'Name' =&gt; 'Test',\n                      'Resubscribe' =&gt; true,\n                      'RestartSubscriptionBasedAutoresponders' =&gt; true\n                  })\n    puts response\n    puts response.code\nend\nrequest\n</code></pre>\n\n<p>I can connect with the API. However, when I try to add the email I am getting the following response.</p>\n\n<blockquote>\n  <p>{\"Code\"=>400, \"Message\"=>\"Failed to deserialize your request. <br/>\n  Please check the documentation and try again. <br/>\n  Fields in error: subscriber\"} <br/>\n     400</p>\n</blockquote>\n\n<p>When I change the request to <code>get</code> instead of <code>put</code>\nmy response is:</p>\n\n<blockquote>\n  <p>{\"Code\"=>1, \"Message\"=>\"Invalid Email Address\"}</p>\n</blockquote>\n\n<p>I can't understand what I am doing wrong as I have followed the documentation on the <a href=\"https://www.campaignmonitor.com/api/subscribers/\" rel=\"nofollow\">Campaign Monitor API</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 5032001, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2eca42528522bccbbec5e5309ad9f398?s=128&d=identicon&r=PG&f=1", "display_name": "Carla", "link": "https://stackoverflow.com/users/5032001/carla"}, "is_accepted": true, "score": 2, "last_activity_date": 1444841449, "creation_date": 1444841449, "answer_id": 33131207, "question_id": 33130773, "link": "https://stackoverflow.com/questions/33130773/how-to-find-product-before-save-rails-4-2/33131207#33131207", "title": "How to find product before_save Rails 4.2", "body": "<p>Try this:</p>\n\n<pre><code>private\n\ndef find_ingredient\n    Ingredient.find(:ingredient_id).increment!(:quantity)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 335, "user_id": 1502296, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bffcdc9f77475839353cff6fbbcc1e20?s=128&d=identicon&r=PG", "display_name": "nikos83", "link": "https://stackoverflow.com/users/1502296/nikos83"}, "edited": false, "score": 1, "creation_date": 1445197694, "post_id": 33145967, "comment_id": 54209643, "body": "Connecting two answers together works! Thanks   def find_ingredient          Ingredient.find(ingredient_id)          ingredient.increment! :quantity, unloaded     end"}], "tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": false, "score": 1, "last_activity_date": 1444904553, "creation_date": 1444904553, "answer_id": 33145967, "question_id": 33130773, "link": "https://stackoverflow.com/questions/33130773/how-to-find-product-before-save-rails-4-2/33145967#33145967", "title": "How to find product before_save Rails 4.2", "body": "<p>You'd do something like this:</p>\n\n<pre><code>#app/models/delivery.rb\nclass Delivery &lt; ActiveRecord::Base\n   belongs_to :ingredient, inverse_of: :deliveries\n   before_save :increase_ingredient\n\n   private\n\n   def increase_ingredient\n      ingredient.increment! :quantity, unloaded\n   end\nend\n</code></pre>\n"}], "owner": {"reputation": 335, "user_id": 1502296, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bffcdc9f77475839353cff6fbbcc1e20?s=128&d=identicon&r=PG", "display_name": "nikos83", "link": "https://stackoverflow.com/users/1502296/nikos83"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 33131207, "answer_count": 2, "score": 1, "last_activity_date": 1444904553, "creation_date": 1444840070, "last_edit_date": 1444904145, "question_id": 33130773, "link": "https://stackoverflow.com/questions/33130773/how-to-find-product-before-save-rails-4-2", "title": "How to find product before_save Rails 4.2", "body": "<p>I've app where I've got Ingredients and also have deliveries of <code>Ingredients</code>, after delivery ingredient is increasing value. I have a problem to find <code>Ingredient</code> before save.</p>\n\n<p>On my delivery I store ingredient_id so I should have a in my controller function to find Ingredient via </p>\n\n<p>before_save :find_ingredient</p>\n\n<pre><code>private\ndef find_ingredient\n    self.find_ingredient = find(:ingredient_id)\nend\n</code></pre>\n\n<p>How to find this Ingredient before_save?\nIn my controller </p>\n\n<pre><code>  if @delivery.save\n\n    @ingredient.quantity += @delivery.unloaded\n    @ingredient.save\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 6347, "user_id": 613703, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7a530ba90b271e192e6bc9dbcce3e16e?s=128&d=identicon&r=PG", "display_name": "djt", "link": "https://stackoverflow.com/users/613703/djt"}, "is_accepted": true, "score": 0, "last_activity_date": 1444915530, "creation_date": 1444915530, "answer_id": 33149808, "question_id": 33130582, "link": "https://stackoverflow.com/questions/33130582/redmine-project-version-causing-error/33149808#33149808", "title": "Redmine - Project Version causing Error:", "body": "<p>I had used a Puphpet installation (which provided RVM( and that seemed to be the problem.  I fixed it by doing a pretty spare Vagrant box setup and installed RVM manually afterward.</p>\n\n<p>And for the record, the <code>Version</code> constant it was looking for was part of the Ruby core libs, specifically in <code>rexml</code></p>\n"}], "owner": {"reputation": 6347, "user_id": 613703, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7a530ba90b271e192e6bc9dbcce3e16e?s=128&d=identicon&r=PG", "display_name": "djt", "link": "https://stackoverflow.com/users/613703/djt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 33149808, "answer_count": 1, "score": 0, "last_activity_date": 1444915530, "creation_date": 1444839518, "last_edit_date": 1444842280, "question_id": 33130582, "link": "https://stackoverflow.com/questions/33130582/redmine-project-version-causing-error", "title": "Redmine - Project Version causing Error:", "body": "<p>I've installed a fresh copy of Redmine on an Ubuntu box for a plugin development project.  Once I got the basic Redmine install up and running and ran the migrations, everything seemed to work fine.  However, anytime I get to a page which requires use of the Version class, an error is thrown.</p>\n\n<p>It seems as though it may be trying to use a different Version class -- perhaps the one that specifies the Version of redmine?  </p>\n\n<p>UPDATE: It seems that any references to <code>Version</code> in Redmine are calling a constant called <code>Version</code> and not the class <code>Version</code>.</p>\n\n<p>For example, creating a Project works.  However, when I try to view the Project, I get this:</p>\n\n<pre><code>Completed 500 Internal Server Error in 167ms (ActiveRecord: 7.4ms)\n\nActionView::Template::Error (undefined method `joins' for \"3.1.7.3\":String):\n    42:     &lt;% end %&gt;\n    43:\n    44:     &lt;h1&gt;&lt;%= page_header_title %&gt;&lt;/h1&gt;\n    45:\n    46:     &lt;% if display_main_menu?(@project) %&gt;\n    47:     &lt;div id=\"main-menu\"&gt;\n    48:         &lt;%= render_main_menu(@project) %&gt;\n  app/models/project.rb:455:in `shared_versions'\n  lib/redmine.rb:228:in `block (2 levels) in &lt;top (required)&gt;'\n  lib/redmine/menu_manager.rb:446:in `call'\n  lib/redmine/menu_manager.rb:446:in `allowed?'\n  lib/redmine/menu_manager.rb:164:in `block in menu_items_for'\n  lib/redmine/menu_manager.rb:163:in `each'\n  lib/redmine/menu_manager.rb:163:in `menu_items_for'\n  lib/redmine/menu_manager.rb:90:in `render_menu'\n  lib/redmine/menu_manager.rb:80:in `render_main_menu'\n  app/views/layouts/base.html.erb:45:in `_app_views_layouts_base_html_erb___3256852209764588002_58036380'\n  app/controllers/projects_controller.rb:153:in `show'\n  lib/redmine/sudo_mode.rb:63:in `sudo_mode'\n\n\n  Rendered /usr/local/rvm/gems/ruby-2.1.2/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (28.8ms)\n  Rendered /usr/local/rvm/gems/ruby-2.1.2/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.3ms)\n  Rendered /usr/local/rvm/gems/ruby-2.1.2/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)\n  Rendered /usr/local/rvm/gems/ruby-2.1.2/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (44.9ms)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "mongoid"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5445838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ce2cb9b2fa9582322d3342f0f3ed86d?s=128&d=identicon&r=PG&f=1", "display_name": "david lin", "link": "https://stackoverflow.com/users/5445838/david-lin"}, "edited": false, "score": 0, "creation_date": 1445281184, "post_id": 33213863, "comment_id": 54248227, "body": "Thanks Marcin, but using the   &#39;&lt;%= form_for h, :url =&gt; {:action =&gt; &quot;update&quot;, :method =&gt; :put } do |f| %&gt;&#39;  I get   &#39;No route matches {:action=&gt;&quot;update&quot;, :controller=&gt;&quot;hotlines&quot;, :method=&gt;:put, :person_id=&gt;&quot;2&quot;}&#39;  Using rake routes I do see      person_hotline PATCH  /people/:person_id/hotlines/:id(.:format) hotlines#update                      PUT    /people/:person_id/hotlines/:id(.:format) hotlines#update&#39;"}, {"owner": {"reputation": 1, "user_id": 4079802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49b62b85272a2666b1e8358d085fc3b5?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin Grzymski", "link": "https://stackoverflow.com/users/4079802/marcin-grzymski"}, "reply_to_user": {"reputation": 1, "user_id": 5445838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ce2cb9b2fa9582322d3342f0f3ed86d?s=128&d=identicon&r=PG&f=1", "display_name": "david lin", "link": "https://stackoverflow.com/users/5445838/david-lin"}, "edited": false, "score": 0, "creation_date": 1445336575, "post_id": 33213863, "comment_id": 54271238, "body": "You are trying to create url for nested resources. Named routes would be better that hash with :action/:method try: <code>code</code>(person_hotline_path(person, hotline). More info and examples <a href=\"http://guides.rubyonrails.org/routing.html#nested-resources\" rel=\"nofollow noreferrer\">link</a>"}], "tags": [], "owner": {"reputation": 1, "user_id": 4079802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49b62b85272a2666b1e8358d085fc3b5?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin Grzymski", "link": "https://stackoverflow.com/users/4079802/marcin-grzymski"}, "is_accepted": false, "score": 0, "last_activity_date": 1445256053, "creation_date": 1445256053, "answer_id": 33213863, "question_id": 33130558, "link": "https://stackoverflow.com/questions/33130558/mongoid-edit-form-in-ruby-not-working/33213863#33213863", "title": "Mongoid edit form in Ruby not working", "body": "<p>Problem with your update url is related to the fact that there is no action and route with name \"patch\". Please update it to:</p>\n\n<pre><code>&lt;%= form_for h, :url =&gt; {:action =&gt; \"update\", :method =&gt; :put } do |f| %&gt;\n</code></pre>\n\n<p>Or use named routes. This console command will help you with available routes:</p>\n\n<pre><code>\"rake routes | grep user\"\n</code></pre>\n\n<p>And then edit form become:</p>\n\n<pre><code>&lt;%= form_for h, :url =&gt; user_path(h) do |f| %&gt;\n</code></pre>\n\n<p>For more information visit: \n    <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow\">http://guides.rubyonrails.org/routing.html</a></p>\n\n<p>Hope it does help.</p>\n"}], "owner": {"reputation": 1, "user_id": 5445838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ce2cb9b2fa9582322d3342f0f3ed86d?s=128&d=identicon&r=PG&f=1", "display_name": "david lin", "link": "https://stackoverflow.com/users/5445838/david-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1445256053, "creation_date": 1444839473, "question_id": 33130558, "link": "https://stackoverflow.com/questions/33130558/mongoid-edit-form-in-ruby-not-working", "title": "Mongoid edit form in Ruby not working", "body": "<p>I have a simple application that has a hotline model which is a mongoid document.  The create and view works fine but the edit I cant seem to get to work for the life of me.</p>\n\n<p>I was hoping someone could help me identify what I am doing wrong.</p>\n\n<p>This is my create form which works properly:</p>\n\n<pre><code>  &lt;%= form_for Hotline.new, :url =&gt; {:action =&gt; \"create\"} do |f| %&gt;\n    &lt;div class=\"row top-buffer\"&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;label class=\"col-sm-1 rt-label\" for=\"textinput\"&gt;Address&lt;/label&gt;\n        &lt;div class=\"col-sm-3\"&gt;\n          &lt;%= f.text_field :city, class: 'form-control input-sm', placeholder: \"City\" %&gt;\n        &lt;/div&gt;\n        &lt;label class=\"col-sm-1\" for=\"textinput\"&gt;&lt;/label&gt;\n        &lt;div class=\"col-sm-3\"&gt;\n          &lt;%= f.text_field :zip, class: 'form-control input-sm', placeholder: \"Zip\" %&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;br&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;label class=\"col-sm-1\" for=\"textinput\"&gt;&lt;/label&gt;\n      &lt;%= f.submit \"Save\", class: 'btn btn-sm btn-success' %&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt; \n</code></pre>\n\n<p>I tried changing the url to post or create and using the h in my edit form... but it keeps giving me no route matches errors.</p>\n\n<pre><code>No route matches {:action=&gt;\"patch\", :controller=&gt;\"hotlines\", :person_id=&gt;\"2\"}\n</code></pre>\n\n<p>Here is the form with the view and put or patch as the action:</p>\n\n<pre><code>&lt;% @hotlines.each do |h| %&gt;\n  &lt;div id=\"log\" class=\"visable\"&gt;\n    &lt;p&gt;View Log&lt;/p&gt;\n    &lt;%= \"City: \" + h.city %&gt;&lt;br&gt;\n    &lt;%= \"Zip: \" + h.zip %&gt;&lt;br&gt;\n  &lt;/div&gt;\n  &lt;br&gt;\n    &lt;div id=\"edit\" class=\"visable\"&gt;\n      &lt;p&gt;Edit Log&lt;/p&gt;\n\n\n  &lt;%= form_for h, :url =&gt; {:action =&gt; \"patch\"} do |f| %&gt;\n    &lt;div class=\"row top-buffer\"&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;label class=\"col-sm-1 rt-label\" for=\"textinput\"&gt;Address&lt;/label&gt;\n        &lt;div class=\"col-sm-3\"&gt;\n          &lt;%= f.text_field :city, class: 'form-control input-sm', placeholder: \"City\" %&gt;\n        &lt;/div&gt;\n        &lt;label class=\"col-sm-1\" for=\"textinput\"&gt;&lt;/label&gt;\n        &lt;div class=\"col-sm-3\"&gt;\n          &lt;%= f.text_field :zip, class: 'form-control input-sm', placeholder: \"Zip\" %&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;br&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;label class=\"col-sm-1\" for=\"textinput\"&gt;&lt;/label&gt;\n      &lt;%= f.submit \"Save\", class: 'btn btn-sm btn-success' %&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt; \n\n\n  &lt;/div&gt;\n\n\n  &lt;% end %&gt;\n</code></pre>\n\n<p>Not sure if this is need but here are a few more bits from my code.</p>\n\n<p>Controller (I realize the update is incomplete but I cant seem to get it even render edit)</p>\n\n<pre><code>class HotlinesController &lt; ApplicationController\n  def index\n    @person = Person.find(params['person_id'])\n    #binding.pry\n    #@person = Person.find(params: id)\n    #@hotlines = Hotline.where(person_id: @person.id)\n    @hotlines = Hotline.where(person_id: params['person_id'])\n  end\n\n  def new\n    @new_hotline = Hotline.new\n  end  \n\n  def create\n    @new_hotline = Hotline.new(hotline_params)\n    @new_hotline.person_id = params['person_id']\n    if @new_hotline.save\n      redirect_to person_hotlines_path(params['person_id']), notice: \"Hotline was added successfully.\"\n    else\n      flash[:error] = \"Error creating hotline. Please try again.\"\n      render :new\n    end\n  end\n\n  def update\n    @person = Person.find(params['person_id'])\n    @update_hotline = Hotline.find(params[:id])\n     if @update_hotline.update_attributes(person_params)\n       redirect_to person_hotlines_path(params['person_id']), notice: \"Person was updated successfully.\"\n     else\n       flash[:error] = \"Error saving person. Please try again.\"\n       render :edit\n     end  \n  end\n\n  private\n\n  def hotline_params\n    params.require(:hotline).permit(:person_id, :city, :zip)\n  end    \nend\n</code></pre>\n\n<p>Routes</p>\n\n<pre><code>  devise_for :users\n  resources :users, only: [:update, :index, :new, :edit, :create] \n  resources :dashboard, only: [:index]\n  resources :people do\n    resources :hotlines, only: [:index, :create, :update, :new]\n  end\n\n  post 'dashboard/search'\n  get '/person/:id', to: 'person#show'\n  get 'welcome/index'\n  get 'welcome/about'\n\n  root to: 'welcome#index'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem"], "answers": [{"comments": [{"owner": {"reputation": 1074, "user_id": 2591553, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/h4cFo.jpg?s=128&g=1", "display_name": "Corstiaan", "link": "https://stackoverflow.com/users/2591553/corstiaan"}, "edited": false, "score": 0, "creation_date": 1444840710, "post_id": 33130313, "comment_id": 54073525, "body": "Thanks. Thats another 2 hours Im not getting back :-)"}], "tags": [], "owner": {"reputation": 813, "user_id": 1961154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af6b9daa60a6856519080acddfd5f254?s=128&d=identicon&r=PG", "display_name": "intale", "link": "https://stackoverflow.com/users/1961154/intale"}, "is_accepted": true, "score": 0, "last_activity_date": 1444838835, "creation_date": 1444838835, "answer_id": 33130313, "question_id": 33130238, "link": "https://stackoverflow.com/questions/33130238/referer-tracking-gem-undefined-local-variable-or-method-has-tracking/33130313#33130313", "title": "Referer_tracking gem. &quot;undefined local variable or method `has_tracking&#39;&quot;?", "body": "<p>Looks like there is a mistake in readme. It should be <code>has_referer_tracking</code> instead <code>has_tracking</code> .</p>\n"}], "owner": {"reputation": 1074, "user_id": 2591553, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/h4cFo.jpg?s=128&g=1", "display_name": "Corstiaan", "link": "https://stackoverflow.com/users/2591553/corstiaan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 33130313, "answer_count": 1, "score": 0, "last_activity_date": 1444838835, "creation_date": 1444838597, "question_id": 33130238, "link": "https://stackoverflow.com/questions/33130238/referer-tracking-gem-undefined-local-variable-or-method-has-tracking", "title": "Referer_tracking gem. &quot;undefined local variable or method `has_tracking&#39;&quot;?", "body": "<p>I installed the referer_tracking gem, bundled, configured the ApplicationController, added 'has_tracking' to my model and restarted the server.</p>\n\n<p>As soon as my model gets instantiated I get \"undefined local variable or method `has_tracking'\".</p>\n\n<p>Using rails 4.</p>\n\n<p>Any ideas? :-)</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 800, "user_id": 4828850, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/epNbR.jpg?s=128&g=1", "display_name": "Sergei Stralenia", "link": "https://stackoverflow.com/users/4828850/sergei-stralenia"}, "is_accepted": false, "score": 0, "last_activity_date": 1444838607, "creation_date": 1444838607, "answer_id": 33130244, "question_id": 33130040, "link": "https://stackoverflow.com/questions/33130040/ruby-on-rails-form-params-becomes-null-on-update-action/33130244#33130244", "title": "ruby on rails form params becomes null on update action", "body": "<p>Pass article object to form_for helper:</p>\n\n<pre><code>&lt;%= form_for @article, url: {action: \"update_memo\", id: @article.id},  html: {method: \"put\"} do |f| %&gt;\n  &lt;%= f.label :'Comment:' %&gt;\n  &lt;%= f.text_field :memo %&gt;\n  &lt;%= f.submit \"Save !\"%&gt;\n&lt;%  end %&gt;\n</code></pre>\n\n<p>Your controller's action:</p>\n\n<pre><code>def update_memo\n  @article = Article.find_by_id(params[:id])\n  @article.update_attributes(:memo =&gt; params][:article][:memo])\n  redirect_to :back\nend\n</code></pre>\n\n<p>And I recomend you to read about strong_parameters(<a href=\"http://api.rubyonrails.org/classes/ActionController/Parameters.html\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActionController/Parameters.html</a>)</p>\n"}, {"tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": false, "score": 0, "last_activity_date": 1444905015, "creation_date": 1444905015, "answer_id": 33146130, "question_id": 33130040, "link": "https://stackoverflow.com/questions/33130040/ruby-on-rails-form-params-becomes-null-on-update-action/33146130#33146130", "title": "ruby on rails form params becomes null on update action", "body": "<p>Do this:</p>\n\n<pre><code>#config/routes.rb\nresources :articles do\n   resources :memos #-&gt; url.com/articles/:article_id/memos/new\nend\n\n#app/controllers/memos_controller.rb\nclass MemosController &lt; ApplicationController\n   def new\n      @article = Article.find params[:article_id]\n      @memo = @article.memos.new\n   end\n\n   def create\n      @article = Article.find params[:article_id]\n      @memo = @article.memos.new memo_params\n      @memo.save\n   end\n\n   private\n\n   def memo_params\n      params.require(:memo).permit(:article_id, :remark)\n   end\nend\n\n#app/views/memos/new.html.erb\n&lt;%= form_for @memo do |f| %&gt;\n   &lt;%= f.text_field :remark %&gt;\n   &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5445821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5757a99117b81a645d8034c67db00cbe?s=128&d=identicon&r=PG&f=1", "display_name": "qmo", "link": "https://stackoverflow.com/users/5445821/qmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1444905015, "creation_date": 1444838058, "last_edit_date": 1444838468, "question_id": 33130040, "link": "https://stackoverflow.com/questions/33130040/ruby-on-rails-form-params-becomes-null-on-update-action", "title": "ruby on rails form params becomes null on update action", "body": "<p>I just started learning rails. I'm trying to create a page to display comments/contents as well as adding comments.\nThis is what my update controller looks like:</p>\n\n<pre><code>  def update_memo\n    @article = Article.find_by_id(params[:id])\n    @article.update_attributes(:memo =&gt; params[:remark])\n    redirect_to :back\n  end\n</code></pre>\n\n<p>And this is what my form looks like:</p>\n\n<pre><code>&lt;%= form_for @article.memo, url: {action: \"update_memo\", id: @article.id},  html: {method: \"put\"} do |f| %&gt;\n  &lt;%= f.label :'Comment:' %&gt;\n  &lt;%= f.text_field :remark %&gt;\n  &lt;%= f.submit \"Save !\"%&gt;\n&lt;%  end %&gt;\n</code></pre>\n\n<p>It was fine when I update the memo field for the first time. But when I try to update again. It shows \"Mysql2::Error: Column 'memo' cannot be null\"</p>\n\n<pre><code>Started PUT \"/showarticle/update_memo?id=1\" \nProcessing by ShowarticleController#update_memo as HTML\nParameters: {\"utf8\"=&gt;\"\u201a\u00ec\", \"authenticity_token\"=&gt;\"LXEUxk&gt;wI9W+VpAP+mpULojiGeYTDoSBIjrCkkA3GacYwZLZyJyfHFOsoxwdSS5LUoQDuP3FGidopp2KA==\", \"test1\"=&gt;{\"remark\"=&gt;\"test0\"}, \"commit\"=&gt;\"Save !\", \"id\"=&gt;\"1\"}\nArticle Load (1.8ms)  SELECT  `articles`.* FROM `articles` WHERE `articles`.`id` = 1 LIMIT 1\n   (1.5ms)  BEGIN\nSQL (3.5ms)  UPDATE `articles` SET `memo` = NULL WHERE `articles`.`id` = 1\nMysql2::Error: Column 'memo' cannot be null: UPDATE `articles` SET `memo` = NULL WHERE `articles`.`id` = 1\n   (1.5ms)  ROLLBACK\nCompleted 500 Internal Server Error in 14ms (ActiveRecord: 8.3ms)\n</code></pre>\n"}, {"tags": ["ruby", "rspec", "shoes"], "answers": [{"tags": [], "owner": {"reputation": 546, "user_id": 1810896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8480daec7137f28565bc2d2e666b915a?s=128&d=identicon&r=PG", "display_name": "PragTob", "link": "https://stackoverflow.com/users/1810896/pragtob"}, "is_accepted": false, "score": 0, "last_activity_date": 1445169078, "last_edit_date": 1495541032, "creation_date": 1445169078, "answer_id": 33197637, "question_id": 33129719, "link": "https://stackoverflow.com/questions/33129719/executing-commands-in-shoes/33197637#33197637", "title": "Executing commands in Shoes", "body": "<p>Shoes is just a ruby program, so you can do whatever ruby does. So <a href=\"https://stackoverflow.com/questions/2232/calling-shell-commands-from-ruby\">this stack overflow question</a> should hold your answers.</p>\n\n<p>For instance this works and returns the result:</p>\n\n<p><code>\n2.2.2 :004 &gt; `pwd`\n =&gt; \"/home/tobi\\n\"\n</code></p>\n\n<p>You can run the commands, capture the output and then display it in your shoes application anyway you like.</p>\n"}], "owner": {"reputation": 11, "user_id": 5445801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbab2f7564be79cce5ff4104b777093a?s=128&d=identicon&r=PG&f=1", "display_name": "Crow", "link": "https://stackoverflow.com/users/5445801/crow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 309, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1445169078, "creation_date": 1444837052, "question_id": 33129719, "link": "https://stackoverflow.com/questions/33129719/executing-commands-in-shoes", "title": "Executing commands in Shoes", "body": "<p>Is it possible to execute an <strong>rspec</strong> command (usually executed in <strong>Terminal</strong>) using <strong>Shoes</strong>? </p>\n\n<p>More detailed: I want to create some kind of GUI with a few buttons. Every button should execute a different command usually executed in <strong>Terminal</strong>. </p>\n\n<p>So, I want to start my Shoes app -> click a button -> the button opens <strong>Terminal</strong> and executes a command (something like \"<em>cd /Users/Documents/test</em>\" and then \"<em>rspec test_spec.rb</em>\". I'm a Ruby and Shoes newbie, so if there is a better/easier way to do this for a newbie - please suggest.</p>\n\n<p>OS: Mac OSX</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "blob"], "comments": [{"owner": {"reputation": 280, "user_id": 4941901, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/81b080e3fb02c291fb7e7dda4831a804?s=128&d=identicon&r=PG&f=1", "display_name": "patricio", "link": "https://stackoverflow.com/users/4941901/patricio"}, "edited": false, "score": 1, "creation_date": 1444837712, "post_id": 33129460, "comment_id": 54071665, "body": "can u please write the sql query for blob and the other queries that work?"}, {"owner": {"reputation": 6267, "user_id": 1144104, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c135bc644610fabc6e059b73fdd7f8ad?s=128&d=identicon&r=PG", "display_name": "jazzytomato", "link": "https://stackoverflow.com/users/1144104/jazzytomato"}, "edited": false, "score": 0, "creation_date": 1444842383, "post_id": 33129460, "comment_id": 54074513, "body": "How do you read the results from <code>ActiveRecord::Base.connection.execute(&quot;SQL query&quot;)</code>."}], "owner": {"user_type": "does_not_exist", "display_name": "user5445788"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 464, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1445163820, "creation_date": 1444836392, "last_edit_date": 1444843292, "question_id": 33129460, "link": "https://stackoverflow.com/questions/33129460/ruby-on-rails-activerecord-blob", "title": "Ruby on Rails ActiveRecord BLOB", "body": "<p>Im trying to get some data from database, but its kinda not working.\nI use </p>\n\n<pre><code>results = ActiveRecord::Base.connection.execute(\"SQL query\")\n</code></pre>\n\n<p>to get BLOB objects, but it only returns the first BLOB. BLOB's contain text strings so it shouldn't be that hard. Other queries works fine.\nI have no control about DB Schema, so I cant chose how the data is stored.</p>\n\n<p>What am I doing wrong? Any suggestions?</p>\n\n<p>The queries is just standart SQL queries. The one for blob is: </p>\n\n<pre><code>select data from measure_data where measure_id = 'some int here' AND snapshot_id = 'some int here'\n</code></pre>\n\n<p>Data is the column name where BLOB lives. The same query executed in MySQL Workbench produces the correct result.\nIts bit tricky to write the queries now, because Im already at home.</p>\n\n<p>But since the same SQL produces correct result in Workbench then I suppose the problem is with Ruby.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 536, "user_id": 5214346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EbeyD.png?s=128&g=1", "display_name": "Jean Bob", "link": "https://stackoverflow.com/users/5214346/jean-bob"}, "edited": false, "score": 0, "creation_date": 1444839744, "post_id": 33129386, "comment_id": 54072999, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/33128927/how-can-i-subract-two-json-files-in-ruby\">How can I subract two json files in ruby</a>"}, {"owner": {"reputation": 536, "user_id": 5214346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EbeyD.png?s=128&g=1", "display_name": "Jean Bob", "link": "https://stackoverflow.com/users/5214346/jean-bob"}, "edited": false, "score": 0, "creation_date": 1444839830, "post_id": 33129386, "comment_id": 54073046, "body": "You duplicate your own questions ... <a href=\"http://stackoverflow.com/questions/33128927/how-can-i-subract-two-json-files-in-ruby\" title=\"how can i subract two json files in ruby\">stackoverflow.com/questions/33128927/&hellip;</a>"}, {"owner": {"reputation": 7877, "user_id": 1401560, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/347d89519bdf28150424b22543d0fbdb?s=128&d=identicon&r=PG", "display_name": "Chris F", "link": "https://stackoverflow.com/users/1401560/chris-f"}, "reply_to_user": {"reputation": 536, "user_id": 5214346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EbeyD.png?s=128&g=1", "display_name": "Jean Bob", "link": "https://stackoverflow.com/users/5214346/jean-bob"}, "edited": false, "score": 0, "creation_date": 1444840918, "post_id": 33129386, "comment_id": 54073644, "body": "They&#39;re a different approach to solving the same problem."}], "answers": [{"tags": [], "owner": {"reputation": 3511, "user_id": 1200057, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dd0a7af03f33141f54a2df43266687e9?s=128&d=identicon&r=PG", "display_name": "Marc Young", "link": "https://stackoverflow.com/users/1200057/marc-young"}, "is_accepted": false, "score": 0, "last_activity_date": 1444848458, "creation_date": 1444848458, "answer_id": 33133267, "question_id": 33129386, "link": "https://stackoverflow.com/questions/33129386/how-can-i-ignore-certain-attributes-when-comparing-two-json-files-in-ruby/33133267#33133267", "title": "How can I ignore certain attributes when comparing two json files in ruby?", "body": "<p>I've done this in rspec with json_spec: <a href=\"https://github.com/collectiveidea/json_spec\" rel=\"nofollow\">https://github.com/collectiveidea/json_spec</a> with good success. but that's specific to rspec and not just ruby</p>\n"}], "owner": {"reputation": 7877, "user_id": 1401560, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/347d89519bdf28150424b22543d0fbdb?s=128&d=identicon&r=PG", "display_name": "Chris F", "link": "https://stackoverflow.com/users/1401560/chris-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1444864707, "creation_date": 1444836207, "last_edit_date": 1495535227, "question_id": 33129386, "link": "https://stackoverflow.com/questions/33129386/how-can-i-ignore-certain-attributes-when-comparing-two-json-files-in-ruby", "title": "How can I ignore certain attributes when comparing two json files in ruby?", "body": "<p>I'm looking for a parallel approach to solving a problem. One approach I posted in \"<a href=\"https://stackoverflow.com/questions/33128927/how-can-i-subract-two-json-files-in-ruby\">How can I subract two json files in ruby</a>.\" Another approach is this.</p>\n\n<p>I'm using this nifty <a href=\"https://gist.github.com/agius/2631752\" rel=\"nofollow noreferrer\">json_diff.rb</a> program to compare two similarly-structured json files. How can I skip certain attributes that can be nested inside other attributes?\nFor example, I have file1.json</p>\n\n<pre><code>{\n  \"id\" : \"file1\",\n  \"att1\" : {\n    \"attA\" : {\n      \"free_mem\" : \"1234\",\n      \"buff_mem\" : \"5678\"\n    },\n    \"attB\" : {\n      \"name\" : \"Joe\",\n      \"location\" : \"Lab\"\n    }\n  }\n}\n</code></pre>\n\n<p>and file2.json</p>\n\n<pre><code>{\n  \"id\" : \"file2\",\n  \"att1\" : {\n    \"attA\" : {\n      \"free_mem\" : \"5555\",\n      \"buff_mem\" : \"6666\"\n    },\n    \"attB\" : {\n      \"name\" : \"John\",\n      \"location\" : \"Lab\"\n    }\n  }\n}\n</code></pre>\n\n<p>I want to ignore <code>attA</code>. Note that these files are just examples, and real json files I have will have more attributes to ignore, which may be nested deeper inside other attributes.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 2553, "user_id": 4443890, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2601f3b9ff36beb56eaa3ddee2a3f6e9?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/4443890/jason"}, "edited": false, "score": 0, "creation_date": 1444836296, "post_id": 33129052, "comment_id": 54070671, "body": "Chain multiple <code>where</code> calls"}, {"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 1, "creation_date": 1444908339, "post_id": 33129052, "comment_id": 54103884, "body": "Check <a href=\"http://stackoverflow.com/a/31485318/846163\">stackoverflow.com/a/31485318/846163</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "is_accepted": false, "score": 0, "last_activity_date": 1444835783, "creation_date": 1444835783, "answer_id": 33129239, "question_id": 33129052, "link": "https://stackoverflow.com/questions/33129052/how-to-query-where-cola-colb-colc-in-a1-b1-c1-a2-b2-c2/33129239#33129239", "title": "How to query WHERE (ColA, ColB, ColC) IN ((a1, b1, c1), (a2, b2, c2), ...)", "body": "<p>You can do something like:</p>\n\n<pre><code>Foo.where('bar = ? AND baz = ?', 1, 2)\n</code></pre>\n\n<p>This query searches for <code>Foo.bar</code> of <code>1</code> <strong>and</strong> <code>Foo.baz</code> of <code>2</code></p>\n\n<p>the query could go on, you can pass as many conditions as you need. You can also use other operators like <code>&gt;</code> and <code>&gt;=</code>. For example you can do <code>Foo.where('bar &gt;= ?', 3)</code> querying <code>Foo</code> class for <code>bar</code> with more or equal to 3. </p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 5445625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3588ee70de0be2487da4599d46e99f5d?s=128&d=identicon&r=PG&f=1", "display_name": "steschul", "link": "https://stackoverflow.com/users/5445625/steschul"}, "edited": false, "score": 0, "creation_date": 1444836176, "post_id": 33129257, "comment_id": 54070587, "body": "Yes, this is it! After debugging through ActiveRecord all day I actually never thought of trying the obvious and simple way first. Of course, it&#39;s this simple in the end! Sorry for asking this question I could have answered myself!"}, {"owner": {"reputation": 978, "user_id": 3797480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZuuZI.jpg?s=128&g=1", "display_name": "nsave", "link": "https://stackoverflow.com/users/3797480/nsave"}, "reply_to_user": {"reputation": 41, "user_id": 5445625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3588ee70de0be2487da4599d46e99f5d?s=128&d=identicon&r=PG&f=1", "display_name": "steschul", "link": "https://stackoverflow.com/users/5445625/steschul"}, "edited": false, "score": 0, "creation_date": 1444836603, "post_id": 33129257, "comment_id": 54070876, "body": "@steschul, ok, you are welcome but please try to read docs more before asking such questions. And accept answers if they help you."}, {"owner": {"reputation": 41, "user_id": 5445625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3588ee70de0be2487da4599d46e99f5d?s=128&d=identicon&r=PG&f=1", "display_name": "steschul", "link": "https://stackoverflow.com/users/5445625/steschul"}, "edited": false, "score": 0, "creation_date": 1444893532, "post_id": 33129257, "comment_id": 54094508, "body": "Sorry, I need to unmark this answer. After adding more tests I found out that this solution leads to wrong results under certain conditions. I&#39;ll update the question soon."}], "tags": [], "owner": {"reputation": 978, "user_id": 3797480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZuuZI.jpg?s=128&g=1", "display_name": "nsave", "link": "https://stackoverflow.com/users/3797480/nsave"}, "is_accepted": false, "score": 1, "last_activity_date": 1444835824, "creation_date": 1444835824, "answer_id": 33129257, "question_id": 33129052, "link": "https://stackoverflow.com/questions/33129052/how-to-query-where-cola-colb-colc-in-a1-b1-c1-a2-b2-c2/33129257#33129257", "title": "How to query WHERE (ColA, ColB, ColC) IN ((a1, b1, c1), (a2, b2, c2), ...)", "body": "<p>If I understand you correctly then simply:</p>\n\n<pre><code>User.where({ name: [\"Alice\", \"Bob\"], age: [20,30,40] })\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 5445625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3588ee70de0be2487da4599d46e99f5d?s=128&d=identicon&r=PG&f=1", "display_name": "steschul", "link": "https://stackoverflow.com/users/5445625/steschul"}, "is_accepted": true, "score": 1, "last_activity_date": 1445006345, "creation_date": 1445006345, "answer_id": 33173174, "question_id": 33129052, "link": "https://stackoverflow.com/questions/33129052/how-to-query-where-cola-colb-colc-in-a1-b1-c1-a2-b2-c2/33173174#33173174", "title": "How to query WHERE (ColA, ColB, ColC) IN ((a1, b1, c1), (a2, b2, c2), ...)", "body": "<p>Now answering my own question as there seems to be no official way with problems like that when using ActiveRecord 4.2.4.</p>\n\n<p>I solved my problem by extending AR with a new method especially made for querying tuples:</p>\n\n<pre><code>module ActiveRecord\n  class Base\n    class &lt;&lt; self\n\n      # not really compatible to the rest of ActiveRecord but it works\n      # provide parameters like this: symbols_tuple = [ :col1, :col2, :col3 ]\n      # and values_tuples = [ [1, 4, 7], [2, 5, 8], [3, 6, 9]]\n      # this will result in a SQL statement like SELECT * FROM table WHERE ((col1, col2, col3) IN ((1,4,7),(2,5,8),(3,6,9)))\n      def where_tuple(symbols_tuple, values_tuples)\n        tuple_size = symbols_tuple.size\n\n        tuple_part = \"(#{(['?']*tuple_size).join(',')})\"\n        in_stmt = \"(#{([tuple_part]*values_tuples.size).join(', ')})\"\n        stmt = \"(#{symbols_tuple.map { |sym| sym.to_s }.join(', ')}) IN #{in_stmt}\"\n\n        res = where(stmt, *(values_tuples.flatten!))\n\n        return res\n      end\n\n    end # end of class &lt;&lt; self\n  end # end of class Base\nend\n</code></pre>\n\n<p>This doesn't really integrate too well into the usual ways of ActiveRecord but at least for my cases it does the job. </p>\n\n<p>Please let me know if you can think of a way on how to solve problems like this in a more elegant way!</p>\n"}], "owner": {"reputation": 41, "user_id": 5445625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3588ee70de0be2487da4599d46e99f5d?s=128&d=identicon&r=PG&f=1", "display_name": "steschul", "link": "https://stackoverflow.com/users/5445625/steschul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 2, "accepted_answer_id": 33173174, "answer_count": 3, "score": 3, "last_activity_date": 1445006345, "creation_date": 1444835277, "last_edit_date": 1444898916, "question_id": 33129052, "link": "https://stackoverflow.com/questions/33129052/how-to-query-where-cola-colb-colc-in-a1-b1-c1-a2-b2-c2", "title": "How to query WHERE (ColA, ColB, ColC) IN ((a1, b1, c1), (a2, b2, c2), ...)", "body": "<p>How do I find multiple records by sets of multiple values in Rails4 / ActiveRecord? I'd like to achieve something like:</p>\n\n<p><code>SELECT * FROM some_table WHERE (A, B, C) IN ((1, 2, 3), (4, 5, 6), ...)</code></p>\n\n<p>The following way suggested by nsave does <strong>not</strong> work entirely. </p>\n\n<p><code>User.where({ name: [\"Alice\", \"Bob\"], age: [20, 30, 40]})</code></p>\n\n<p>will result in</p>\n\n<p><code>SELECT * FROM users WHERE name IN ('Alice', 'Bob') AND age IN (20, 30, 40)</code></p>\n\n<p>What I need exactly is a piece of code that results in</p>\n\n<p><code>SELECT * FROM users WHERE (name, age) IN (('Alice', 20), ('Bob', 30))</code></p>\n\n<p>I'd like to do search for all rows that contain exactly one out of many sets of values. How could I achieve this?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 7810, "user_id": 2671317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13862b290e178f5a6c40b8d8dfc4f05?s=128&d=identicon&r=PG", "display_name": "ptierno", "link": "https://stackoverflow.com/users/2671317/ptierno"}, "edited": false, "score": 0, "creation_date": 1444835847, "post_id": 33128927, "comment_id": 54070363, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/11958374/subtract-values-in-hash-from-corresponding-values-in-another-hash\" title=\"subtract values in hash from corresponding values in another hash\">stackoverflow.com/questions/11958374/&hellip;</a>"}, {"owner": {"reputation": 536, "user_id": 5214346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EbeyD.png?s=128&g=1", "display_name": "Jean Bob", "link": "https://stackoverflow.com/users/5214346/jean-bob"}, "edited": false, "score": 1, "creation_date": 1444838462, "post_id": 33128927, "comment_id": 54072180, "body": "What if you have same key but not same value ? Consider this : <code>{ &quot;key1&quot; : &quot;value is string&quot; }</code> and <code>{ &quot;key1&quot; : { &quot;value&quot; : &quot;is string&quot; } }</code>"}, {"owner": {"reputation": 7877, "user_id": 1401560, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/347d89519bdf28150424b22543d0fbdb?s=128&d=identicon&r=PG", "display_name": "Chris F", "link": "https://stackoverflow.com/users/1401560/chris-f"}, "edited": false, "score": 0, "creation_date": 1444865264, "post_id": 33128927, "comment_id": 54086171, "body": "Jean Bob, that&#39;s okay, as long as key1 is not one of the attributes I want to delete."}], "answers": [{"comments": [{"owner": {"reputation": 7877, "user_id": 1401560, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/347d89519bdf28150424b22543d0fbdb?s=128&d=identicon&r=PG", "display_name": "Chris F", "link": "https://stackoverflow.com/users/1401560/chris-f"}, "edited": false, "score": 0, "creation_date": 1444865281, "post_id": 33137217, "comment_id": 54086176, "body": "Thanks I&#39;ll try this."}, {"owner": {"reputation": 7877, "user_id": 1401560, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/347d89519bdf28150424b22543d0fbdb?s=128&d=identicon&r=PG", "display_name": "Chris F", "link": "https://stackoverflow.com/users/1401560/chris-f"}, "edited": false, "score": 0, "creation_date": 1444917258, "post_id": 33137217, "comment_id": 54110212, "body": "This did not work for me. I get {&quot;id&quot;=&gt;&quot;file1&quot;, &quot;att1&quot;=&gt;{&quot;attA&quot;=&gt;{&quot;free_mem&quot;=&gt;&quot;1234&quot;, &quot;buff_mem&quot;=&gt;&quot;5678&quot;}, &quot;attB&quot;=&gt;{&quot;name&quot;=&gt;&quot;Joe&quot;, &quot;location&quot;=&gt;&quot;Lab&quot;}}}. I&#39;ll edit my post to include all the code, including Cary&#39;s"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 7877, "user_id": 1401560, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/347d89519bdf28150424b22543d0fbdb?s=128&d=identicon&r=PG", "display_name": "Chris F", "link": "https://stackoverflow.com/users/1401560/chris-f"}, "edited": false, "score": 0, "creation_date": 1444941223, "post_id": 33137217, "comment_id": 54124914, "body": "I don&#39;t understand. You said it did work in your edited question."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 0, "last_activity_date": 1444864352, "creation_date": 1444864352, "answer_id": 33137217, "question_id": 33128927, "link": "https://stackoverflow.com/questions/33128927/how-can-i-subract-two-json-files-in-ruby/33137217#33137217", "title": "How can I subract two json files in ruby", "body": "<p>Let's say you read those files and convert them to hashes <code>h1</code> and <code>h2</code>. We can do the following to obtain the desired hash.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def subtract(h1, h2)\n  h1_deep_copy = Marshal.load(Marshal.dump(h1))\n  recurse(h1_deep_copy, h2)\n  h1_deep_copy\nend\n\ndef recurse(h1, h2)\n  result = h1.keys.map do |k|\n    remove =\n    if !h2.key?(k)\n      false\n    elsif !h1[k].is_a?(Hash)\n      true\n    elsif !h2[k].is_a?(Hash)\n      false\n    else\n      recurse(h1[k], h2[k])\n    end\n    h1.delete(k) if remove\n    remove\n  end\n  result.uniq == [true]\nend\n</code></pre>\n\n<p>As indicated, the two <a href=\"http://ruby-doc.org//core-2.2.0/Marshal.html\" rel=\"nofollow\">Marshal</a> methods are used to obtain a deep copy of <code>h1</code>.</p>\n\n<p><strong>Example</strong></p>\n\n<p>Suppose after converting each of the JSON strings to hashes we obtain:</p>\n\n<pre><code>h1 = { \"id\": \"file1\",\n       \"att1\": {\n         \"attA\": {\n           \"free_mem\": \"1234\",\n           \"buff_mem\": \"5678\"\n         },\n         \"attB\": {\n           \"name\": \"Joe\",\n           \"location\": \"Lab\"\n         }\n       }\n     }\n\nh2 = { \"att1\": {\n         \"attA\": {\n           \"free_mem\": \"3457\",\n           \"buff_mem\": \"6789\"\n         }\n       }\n     }\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>subtract(h1, h2)\n  #=&gt; {:id=&gt;\"file1\", :att1=&gt;{:attB=&gt;{:name=&gt;\"Joe\", :location=&gt;\"Lab\"}}} \n</code></pre>\n"}], "owner": {"reputation": 7877, "user_id": 1401560, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/347d89519bdf28150424b22543d0fbdb?s=128&d=identicon&r=PG", "display_name": "Chris F", "link": "https://stackoverflow.com/users/1401560/chris-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 1, "accepted_answer_id": 33137217, "answer_count": 1, "score": 1, "last_activity_date": 1454691033, "creation_date": 1444834967, "last_edit_date": 1444917800, "question_id": 33128927, "link": "https://stackoverflow.com/questions/33128927/how-can-i-subract-two-json-files-in-ruby", "title": "How can I subract two json files in ruby", "body": "<p>I want to essentially subtract two json files in ruby, and have the difference written to a third file. For example</p>\n\n<p>file1.json</p>\n\n<pre><code>{\n  \"id\" : \"file1\",\n  \"att1\" : {\n    \"attA\" : {\n      \"free_mem\" : \"1234\",\n      \"buff_mem\" : \"5678\"\n    },\n    \"attB\" : {\n      \"name\" : \"Joe\",\n      \"location\" : \"Lab\"\n    }\n  }\n}\n</code></pre>\n\n<p>file2.json</p>\n\n<pre><code>{\n  \"att1\" : {\n    \"attA\" : {\n      \"free_mem\" : \"3457\",\n      \"buff_mem\" : \"6789\"\n    }\n  }\n}\n</code></pre>\n\n<p>Resulting flle3.json file</p>\n\n<p>file3.json</p>\n\n<pre><code>{\n  \"id\" : \"file1\",\n  \"att1\" : {\n    \"attB\" : {\n      \"name\" : \"Joe\",\n      \"location\" : \"Lab\"\n    }\n  }\n}\n</code></pre>\n\n<p>This is just an example file. The real file1.json I have may have several attributes nested inside the att1, which themselves can be nested attributes. Similarly the file2.json file I have may have several attributes nested inside the att1, which themselves can be nested attributes. However, nesting structure in each respective file is similar. IOW, attA will be nested in att1 in BOTH files for example. Thanks!</p>\n\n<p>Edit to answer Pedro's question \"What have you tried so far\"</p>\n\n<p>I've tried this ruby code, but I don't get the result I want.</p>\n\n<pre><code>require 'rubygems'\nrequire 'json'\n\nunless ARGV.count &gt; 1\n  puts \"Usage: json_diff.rb json_file_1.json json_file_2.json\"\n  puts \"AND    json_diff.rb json_file_2.json json_file_1.json\"\n  exit\nend\n\n\njson_a = JSON.parse(File.read(ARGV[0]))\njson_b = JSON.parse(File.read(ARGV[1]))\n\narray_diff = [\"#{json_a}\"] - [\"#{json_b}\"]\n\nputs array_diff.to_s\n</code></pre>\n\n<p>Cary's code works! Here's the complete implementation.</p>\n\n<pre><code>require 'rubygems'\nrequire 'json'\n\nunless ARGV.count &gt; 1\n  puts \"Usage: json_diff.rb json_file_1.json json_file_2.json\"\n  puts \"AND    json_diff.rb json_file_2.json json_file_1.json\"\n  exit\nend\n\ndef subtract(h1, h2)\n  h1_deep_copy = Marshal.load(Marshal.dump(h1))\n  recurse(h1_deep_copy, h2)\n  h1_deep_copy\nend\n\ndef recurse(h1, h2)\n  result = h1.keys.map do |k|\n    remove =\n    if !h2.key?(k)\n      remove = false\n    elsif !h1[k].is_a?(Hash)\n      remove = true\n    elsif !h2[k].is_a?(Hash)\n      remove = false\n    else\n      recurse(h1[k], h2[k])\n    end\n    h1.delete(k) if remove\n    remove\n  end\n  result.uniq == [true]\nend\n\nh1 = JSON.parse(File.read(ARGV[0]))\nh2 = JSON.parse(File.read(ARGV[1]))\nh1 = subtract(h1, h2)\nputs h1.to_s\n</code></pre>\n"}, {"tags": ["ruby", "imagemagick", "minimagick"], "comments": [{"owner": {"reputation": 20869, "user_id": 438117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dec2e8d45b1a0210065d1a4e3800f151?s=128&d=identicon&r=PG", "display_name": "emcconville", "link": "https://stackoverflow.com/users/438117/emcconville"}, "edited": false, "score": 0, "creation_date": 1444837196, "post_id": 33128693, "comment_id": 54071322, "body": "Use <a href=\"http://www.imagemagick.org/script/magick-vector-graphics.php\" rel=\"nofollow noreferrer\"><code>path</code> drawing command</a>. It might be easier than attempting rotation and translation, as you already know the expected coordinates of the shape."}, {"owner": {"reputation": 4615, "user_id": 816002, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/f9b0b3d0bb0134538e3fb020206babc9?s=128&d=identicon&r=PG", "display_name": "squarefrog", "link": "https://stackoverflow.com/users/816002/squarefrog"}, "reply_to_user": {"reputation": 20869, "user_id": 438117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dec2e8d45b1a0210065d1a4e3800f151?s=128&d=identicon&r=PG", "display_name": "emcconville", "link": "https://stackoverflow.com/users/438117/emcconville"}, "edited": false, "score": 0, "creation_date": 1444895981, "post_id": 33128693, "comment_id": 54095923, "body": "@emcconville thanks so much for bringing this to my attention!"}], "owner": {"reputation": 4615, "user_id": 816002, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/f9b0b3d0bb0134538e3fb020206babc9?s=128&d=identicon&r=PG", "display_name": "squarefrog", "link": "https://stackoverflow.com/users/816002/squarefrog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 471, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1444834356, "creation_date": 1444834356, "question_id": 33128693, "link": "https://stackoverflow.com/questions/33128693/how-can-i-rotate-a-rectangle-and-position-using-minimagick", "title": "How can I rotate a rectangle and position using MiniMagick?", "body": "<p>I'm trying to create an overlay using <code>mini_magick</code> (Ruby wrapper for <code>imagemagick</code>) similar to the example below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/q9Wjx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/q9Wjx.png\" alt=\"example image\"></a></p>\n\n<p>I know how to draw a rectangle, and I know how to rotate, but I can't wrap my head around the coordinate system once the rotation has been applied.</p>\n\n<p>So I wrote the following:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>x = original_icon.width / 2\ny = 0 # or should it be -10 so it's off the canvas?\nwidth = 100\nheight = 20\nresult = original_icon.combine_options do |c|\n  c.fill('#FF0000')\n  c.draw \"rotate -45 rectangle #{x},#{y},#{width},#{height}\"\nend\n</code></pre>\n\n<p>However, things get odd fast after the rotate -45. It seems positioning has completely gone out the window.</p>\n\n<p>Is there another way to achieve this?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "postgresql", "rake"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1444834839, "post_id": 33128664, "comment_id": 54069678, "body": "are there any associations between <code>comments&#47;admins&#47;users</code> right now?"}], "answers": [{"tags": [], "owner": {"reputation": 1634, "user_id": 319297, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/tyBYy.png?s=128&g=1", "display_name": "Zahid", "link": "https://stackoverflow.com/users/319297/zahid"}, "is_accepted": false, "score": 0, "last_activity_date": 1444835658, "creation_date": 1444835658, "answer_id": 33129187, "question_id": 33128664, "link": "https://stackoverflow.com/questions/33128664/how-do-i-write-this-ruby-rake-task-in-straight-postgresql/33129187#33129187", "title": "How do I write this ruby rake task in straight postgresql?", "body": "<p>This can save you plenty of cost of object initialization and speed up things for you.</p>\n\n<pre><code>Comment.select(:id,:user_id).each do |c|\n  email = Admin.where(mongo_id: c.mongo_user_id).pluck(:email).first\n  uid = User.where(email: email).pluck(:id).first\n  c.user_id = uid\n  c.save\nend  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12085, "user_id": 632688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6c6e4e8117bbd27fd25e9e2ea350458?s=128&d=identicon&r=PG", "display_name": "Wizard of Ogz", "link": "https://stackoverflow.com/users/632688/wizard-of-ogz"}, "is_accepted": true, "score": 1, "last_activity_date": 1444836087, "creation_date": 1444836087, "answer_id": 33129338, "question_id": 33128664, "link": "https://stackoverflow.com/questions/33128664/how-do-i-write-this-ruby-rake-task-in-straight-postgresql/33129338#33129338", "title": "How do I write this ruby rake task in straight postgresql?", "body": "<p>Your SQL is very close. It just require a few minor syntax changes.</p>\n\n<pre><code>UPDATE comments c\nSET user_id = u.id\nFROM users u, admins a\nWHERE c.mongo_user_id = a.mongo_id\n  AND u.email = a.email;\n</code></pre>\n"}], "owner": {"reputation": 1023, "user_id": 2351232, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa75acdd942fa9facfc4d82bebbee995?s=128&d=identicon&r=PG", "display_name": "notaceo", "link": "https://stackoverflow.com/users/2351232/notaceo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 33129338, "answer_count": 2, "score": 0, "last_activity_date": 1444836087, "creation_date": 1444834279, "last_edit_date": 1444835362, "question_id": 33128664, "link": "https://stackoverflow.com/questions/33128664/how-do-i-write-this-ruby-rake-task-in-straight-postgresql", "title": "How do I write this ruby rake task in straight postgresql?", "body": "<p>Here is the rake task:</p>\n\n<pre><code>task :map_comment_to_user =&gt; :environment do\n    Comment.all.each do |c|\n      a         = Admin.where(mongo_id: c.mongo_user_id).first\n      u         = User.where(email: a.email).first\n      c.user_id = u.id\n      c.save\n    end\n  end\n</code></pre>\n\n<p>I screwed up a migration from Admin => User tables, and the email being unique allows me to stitch them back together.  But it's so slow.</p>\n\n<p>How do I write the above in straight PSQL?</p>\n\n<pre><code>UPDATE comments c \nSET c.user_id = u.id \nFROM users u admins a \nWHERE c.mongo_user_id == a.mongo_id \n  AND u.email = a.email; ???\n</code></pre>\n"}, {"tags": ["ruby", "linux", "symfony", "ubuntu-14.04", "capistrano3"], "answers": [{"comments": [{"owner": {"reputation": 338, "user_id": 960732, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/3eeb15e206ef0a0a41286100ddcbf641?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/960732/patrick"}, "edited": false, "score": 0, "creation_date": 1444843981, "post_id": 33129910, "comment_id": 54075395, "body": "Thanks. I also now get a zillion errors when I think it is trying to remove the old release folder such as <code>rm: cannot remove \u2018&#47;var&#47;www&#47;releases&#47;20151014113947&#47;vendor&#47;doctrine&#47;inflector&#47;&zwnj;&#8203;.travis.yml\u2019: Permission denied</code>"}, {"owner": {"reputation": 2465, "user_id": 3042016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6kVHc.jpg?s=128&g=1", "display_name": "will_in_wi", "link": "https://stackoverflow.com/users/3042016/will-in-wi"}, "reply_to_user": {"reputation": 338, "user_id": 960732, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/3eeb15e206ef0a0a41286100ddcbf641?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/960732/patrick"}, "edited": false, "score": 0, "creation_date": 1444845134, "post_id": 33129910, "comment_id": 54076024, "body": "That&#39;s a unix filesystem permissions error. Use ls -l to check permissions and fix them."}, {"owner": {"reputation": 338, "user_id": 960732, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/3eeb15e206ef0a0a41286100ddcbf641?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/960732/patrick"}, "edited": false, "score": 0, "creation_date": 1444898668, "post_id": 33129910, "comment_id": 54097447, "body": "Thanks for your answer @will_in_wi I will mark as accepted answer. But I have an update I have put at the end of my question regarding setting permissions too, which I wonder if you could also help with please?"}, {"owner": {"reputation": 2465, "user_id": 3042016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6kVHc.jpg?s=128&g=1", "display_name": "will_in_wi", "link": "https://stackoverflow.com/users/3042016/will-in-wi"}, "reply_to_user": {"reputation": 338, "user_id": 960732, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/3eeb15e206ef0a0a41286100ddcbf641?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/960732/patrick"}, "edited": false, "score": 0, "creation_date": 1444911659, "post_id": 33129910, "comment_id": 54106049, "body": "The user you are deploying as is probably different from the user under which Apache is running. You can probably set up the cache directory as a Capistrano shared directory and set the permissions on the destination appropriately. Additional questions like this should probably go in a new question. Feel free to link back in order to draw my attention if my suggestion doesn&#39;t work. Good luck!"}, {"owner": {"reputation": 338, "user_id": 960732, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/3eeb15e206ef0a0a41286100ddcbf641?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/960732/patrick"}, "edited": false, "score": 0, "creation_date": 1444976742, "post_id": 33129910, "comment_id": 54136287, "body": "Thanks @will_in_wi I have posted my new question regarding server permissions <a href=\"http://stackoverflow.com/questions/33163809/capistrano-3-permissions-not-set-on-correctly-on-cache-and-releases\">here</a>"}], "tags": [], "owner": {"reputation": 2465, "user_id": 3042016, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6kVHc.jpg?s=128&g=1", "display_name": "will_in_wi", "link": "https://stackoverflow.com/users/3042016/will-in-wi"}, "is_accepted": true, "score": 0, "last_activity_date": 1444837598, "creation_date": 1444837598, "answer_id": 33129910, "question_id": 33128623, "link": "https://stackoverflow.com/questions/33128623/capistrano-3-deploy-failed-messages-exit-status-1-failed/33129910#33129910", "title": "Capistrano 3 deploy failed messages - exit status 1 (failed)", "body": "<p>The flags are <a href=\"http://tldp.org/LDP/abs/html/fto.html\" rel=\"nofollow\">file test operators</a>.</p>\n\n<p>When Capistrano says a command fails, it just means it returns a non-0 status code. In the case of file test operators, it may be checking whether something exists before creating it, so that failure is fed into a conditional which will create the file/folder/symlink. This is normal, albeit confusing. If a critical command fails, Capistrano will stop the deployment and display an error message.</p>\n"}], "owner": {"reputation": 338, "user_id": 960732, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/3eeb15e206ef0a0a41286100ddcbf641?s=128&d=identicon&r=PG", "display_name": "Patrick", "link": "https://stackoverflow.com/users/960732/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 695, "favorite_count": 0, "accepted_answer_id": 33129910, "answer_count": 1, "score": 1, "last_activity_date": 1444976685, "creation_date": 1444834155, "last_edit_date": 1444976685, "question_id": 33128623, "link": "https://stackoverflow.com/questions/33128623/capistrano-3-deploy-failed-messages-exit-status-1-failed", "title": "Capistrano 3 deploy failed messages - exit status 1 (failed)", "body": "<p>When I deploy my Symfony2 app using Capistrano with symfony gem I get various errors such as</p>\n\n<pre><code>Running /usr/bin/env [ -L  /var/www/releases/20151014090151/app/config/parameters.yml ] as ubuntu@ec2-00-000-000-000.eu-west-1.compute.amazonaws.com \nCommand: [ -L /var/www/releases/20151014090151/app/config/parameters.yml ]\nFinished in 0.038 seconds with exit status 1 (failed)\n</code></pre>\n\n<p>and I get the same for </p>\n\n<pre><code>-f /var/www/releases/20151014120425/app/config/parameters.yml\n-L /var/www/releases/20151014090151/web/.htaccess\n-L /var/www/releases/20151014090151/web/robots.txt\n-L /var/www/releases/20151014090151/app/logs\n-d /var/www/releases/20151014120425/app/logs\nSYMFONY_ENV=prod /usr/bin/env ln -s /var/www/shared/app/logs /var/www/releases/20151014120425/app/logs\n-L /var/www/releases/20151014120425/web/uploads\n-d /var/www/releases/20151014120425/web/uploads\n-L /var/www/releases/20151014120425/src/Helios/CoreBundle/Resources/translations\n-d /var/www/releases/20151014120425/src/Helios/CoreBundle/Resources/translations\n-L /var/www/releases/20151014120425/app/spool\n-d /var/www/releases/20151014120425/app/spool\n-d /var/www/releases/20151014120425/app/cache\n</code></pre>\n\n<p>I am not sure what is failing or what the various flags -f -L -d mean?</p>\n\n<p>The deploy completes but it just shows these failed message. Please can someone advise what they mean and how to fix please?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "variables", "base64"], "answers": [{"comments": [{"owner": {"reputation": 34, "user_id": 3982943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Udnzj.gif?s=128&g=1", "display_name": "knope", "link": "https://stackoverflow.com/users/3982943/knope"}, "edited": false, "score": 0, "creation_date": 1444839021, "post_id": 33128990, "comment_id": 54072541, "body": "is there a way to specify some sort of join character?  I appreciate your response, but the goal is to keep the code entered into the string as natural as possible."}, {"owner": {"reputation": 34, "user_id": 3982943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Udnzj.gif?s=128&g=1", "display_name": "knope", "link": "https://stackoverflow.com/users/3982943/knope"}, "edited": false, "score": 0, "creation_date": 1444839108, "post_id": 33128990, "comment_id": 54072598, "body": "the odd thing, is the line returns show when i decode by simply include a new line in the script i&#39;m encoding... it&#39;s just when i call it in the systm/exec/etc function that it loses that line return."}], "tags": [], "owner": {"reputation": 494, "user_id": 1546824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b48fbeb6e50c4cfa27972f202ec40300?s=128&d=identicon&r=PG", "display_name": "Zac Hallett", "link": "https://stackoverflow.com/users/1546824/zac-hallett"}, "is_accepted": false, "score": 1, "last_activity_date": 1444835109, "creation_date": 1444835109, "answer_id": 33128990, "question_id": 33128592, "link": "https://stackoverflow.com/questions/33128592/ruby-base64-encode-include-linebreaks-in-variable/33128990#33128990", "title": "Ruby Base64 encode include linebreaks in variable", "body": "<p>When you encode your payload, you may need to include the newline characters before encoding via Base64. Please see below:</p>\n\n<pre><code>[7] pry(main)&gt; require \"base64\"\n=&gt; true\n[8] pry(main)&gt; Base64.encode64(\"Apple\\nBacon\")\n=&gt; \"QXBwbGUKQmFjb24=\\n\"\n[9] pry(main)&gt; Base64.decode64(_)\n=&gt; \"Apple\\nBacon\"\n[10] pry(main)&gt; Base64.encode64(\"Apple\\nBacon\")\n=&gt; \"QXBwbGUKQmFjb24=\\n\"\n[11] pry(main)&gt; puts Base64.decode64(_)\nApple\nBacon\n</code></pre>\n\n<p>By placing the \"\\n\" in the string before encoding, it will be returned when decoding and subsequently printed as well</p>\n"}, {"tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 1, "last_activity_date": 1444840138, "creation_date": 1444840138, "answer_id": 33130786, "question_id": 33128592, "link": "https://stackoverflow.com/questions/33128592/ruby-base64-encode-include-linebreaks-in-variable/33130786#33130786", "title": "Ruby Base64 encode include linebreaks in variable", "body": "<p>The problem is to with how <code>echo</code> handles its inputs, it is not related to the base 64 encoding / decoding.</p>\n\n<p>You call to <code>exec</code> has <code>echo $code</code>. Here <code>$code</code> is expanded and then is split on whitespace before being passed to <code>echo</code> as a list of strings. <code>echo</code> then prints out each one separated by spaces.</p>\n\n<p>To prevent this you can make sure the entire <code>$code</code> variable is passed directly as a single string by enclosing it in quotes. Change your <code>exec</code> line to (note the extra quotes around <code>$code</code>):</p>\n\n<pre><code>exec({\"code\" =&gt; plain}, \"echo ; echo bash ; echo \\\"$code\\\"\")\n</code></pre>\n\n<p>This will print the block out including the newlines.</p>\n"}], "owner": {"reputation": 34, "user_id": 3982943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Udnzj.gif?s=128&g=1", "display_name": "knope", "link": "https://stackoverflow.com/users/3982943/knope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 33130786, "answer_count": 2, "score": -2, "last_activity_date": 1444840138, "creation_date": 1444834058, "last_edit_date": 1444838940, "question_id": 33128592, "link": "https://stackoverflow.com/questions/33128592/ruby-base64-encode-include-linebreaks-in-variable", "title": "Ruby Base64 encode include linebreaks in variable", "body": "<h2>base64 encode with line returns</h2>\n\n<p>in an attempt to understand how to append line returns in Base64 through the <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/base64/rdoc/Base64.html\" rel=\"nofollow\">Base64 module</a>, i'm having trouble getting the encoding to do what I want...</p>\n\n<p>simply put, given my bad code:</p>\n\n<pre><code>require \"base64\"\n#\nenc   = Base64.encode64(%q[\n    #!/bin/bash\n    echo 'this is a test of nesting quotes using ruby's %q thing-a-ma-bob'\n    echo 'this should return a base64 formattes version of this \"file\" for the purposes of cloudconfig formation'\n    echo \"i'm not quite certain what this script should do... so for now it does a lot of nothing ... and i don't care\"\n    df -h |awk '{print $1\"[ ]\"$2\"{ }\"$3\" -- \"$4}'\n    ])\n#\nplain = Base64.decode64(enc)\n#\n#\nputs \"base64: \"+enc\nputs\nputs \"plain:\"\nputs plain\nputs\nputs \"let's run the script now for testing:\"\nputs\nexec({\"code\" =&gt; plain}, \"echo ; echo bash ; echo $code\")\n</code></pre>\n\n<h2>returns:</h2>\n\n<pre><code>base64: CiAgICAjIS9iaW4vYmFzaAogICAgZWNobyAndGhpcyBpcyBhIHRlc3Qgb2Yg\nbmVzdGluZyBxdW90ZXMgdXNpbmcgcnVieSdzICVxIHRoaW5nLWEtbWEtYm9i\nJwogICAgZWNobyAndGhpcyBzaG91bGQgcmV0dXJuIGEgYmFzZTY0IGZvcm1h\ndHRlcyB2ZXJzaW9uIG9mIHRoaXMgImZpbGUiIGZvciB0aGUgcHVycG9zZXMg\nb2YgY2xvdWRjb25maWcgZm9ybWF0aW9uJwogICAgZWNobyAiaSdtIG5vdCBx\ndWl0ZSBjZXJ0YWluIHdoYXQgdGhpcyBzY3JpcHQgc2hvdWxkIGRvLi4uIHNv\nIGZvciBub3cgaXQgZG9lcyBhIGxvdCBvZiBub3RoaW5nIC4uLiBhbmQgaSBk\nb24ndCBjYXJlIgogICAgZGYgLWggfGF3ayAne3ByaW50ICQxIlsgXSIkMiJ7\nIH0iJDMiIC0tICIkNH0nCiAgICA=\n\nplain:\n\n#!/bin/bash\necho 'this is a test of nesting quotes using ruby's %q thing-a-ma-bob'\necho 'this should return a base64 formattes version of this \"file\" for the purposes of cloudconfig formation'\necho \"i'm not quite certain what this script should do... so for now it does a lot of nothing ... and i don't care\"\ndf -h |awk '{print $1\"[ ]\"$2\"{ }\"$3\" -- \"$4}'\n\n\nlet's run the script now for testing:\n\n\nbash\n#!/bin/bash echo 'this is a test of nesting quotes using ruby's %q thing-a-ma-bob' echo 'this should return a base64 formattes version of this \"file\" for the purposes of cloudconfig formation' echo \"i'm not quite certain what this script should do... so for now it does a lot of nothing ... and i don't care\" df -h |awk '{print $1\"[ ]\"$2\"{ }\"$3\" -- \"$4}'\n</code></pre>\n\n<h2>I would like to try to understand</h2>\n\n<p>how to have the line-breaks carry into the variable I'm passing into the system command, with out having to format as follows:</p>\n\n<pre><code>plain = 'VGhpcyBpcyBsaW5lIG9uZQpUaGlzIG' +\n    'lzIGxpbmUgdHdvClRoaXMgaXMgbGlu' +\n    'ZSB0aHJlZQpBbmQgc28gb24uLi4K'\n</code></pre>\n\n<h2>thanks</h2>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rails-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "is_accepted": true, "score": 2, "last_activity_date": 1444835388, "last_edit_date": 1444835388, "creation_date": 1444834062, "answer_id": 33128593, "question_id": 33128538, "link": "https://stackoverflow.com/questions/33128538/how-to-increase-product-quantity-in-ruby-on-rails-4-2-on-delivery/33128593#33128593", "title": "How to increase product quantity in Ruby on Rails 4.2 on delivery", "body": "<p>You can try the following code (assuming that delivered quantity is stored in the <code>delivered</code> attribute):</p>\n\n<pre><code>@ingredient.quantity += @delivery.delivered\n@ingredient.save\n</code></pre>\n\n<p>If you want to use exactly the <code>update_attributes</code> method:</p>\n\n<pre><code>@ingredient.update_attributes(quantity: (@ingredient.quantity + @delivery.delivered))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1057, "user_id": 557451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf5e28e2e7ce245632a4a29896e6799?s=128&d=identicon&r=PG", "display_name": "Scott", "link": "https://stackoverflow.com/users/557451/scott"}, "is_accepted": false, "score": 1, "last_activity_date": 1444834285, "creation_date": 1444834285, "answer_id": 33128668, "question_id": 33128538, "link": "https://stackoverflow.com/questions/33128538/how-to-increase-product-quantity-in-ruby-on-rails-4-2-on-delivery/33128668#33128668", "title": "How to increase product quantity in Ruby on Rails 4.2 on delivery", "body": "<p>You can use increment!</p>\n\n<p>eg</p>\n\n<pre><code>@ingredient.quantity.increment!\n</code></pre>\n\n<p>or if you need to increase by more than one</p>\n\n<pre><code>@ingredient.quantity.increment!(amount)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2575, "user_id": 891359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4926014a83c1d25207953e5e585556cb?s=128&d=identicon&r=PG", "display_name": "bo-oz", "link": "https://stackoverflow.com/users/891359/bo-oz"}, "is_accepted": false, "score": 0, "last_activity_date": 1444835689, "creation_date": 1444835689, "answer_id": 33129196, "question_id": 33128538, "link": "https://stackoverflow.com/questions/33128538/how-to-increase-product-quantity-in-ruby-on-rails-4-2-on-delivery/33129196#33129196", "title": "How to increase product quantity in Ruby on Rails 4.2 on delivery", "body": "<p>As a basic remark, I would advise refactoring the Ingredient stuff out of the DelliveryController. You could do a after_save callback in the Delivery model for instance.</p>\n\n<pre><code>class Delivery &lt; ActiveRecord::Base\n  after_save :update_ingredients\n\n  def update_ingredients\n    // do the update here\n  end\nend\n</code></pre>\n\n<p>Probably you should even be thinkink about creating a seperate Object for handling this. Read this for inspiration: <a href=\"https://blog.engineyard.com/2014/keeping-your-rails-controllers-dry-with-services\" rel=\"nofollow\">https://blog.engineyard.com/2014/keeping-your-rails-controllers-dry-with-services</a></p>\n"}], "owner": {"reputation": 335, "user_id": 1502296, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bffcdc9f77475839353cff6fbbcc1e20?s=128&d=identicon&r=PG", "display_name": "nikos83", "link": "https://stackoverflow.com/users/1502296/nikos83"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 2, "accepted_answer_id": 33128593, "answer_count": 3, "score": 0, "last_activity_date": 1444835689, "creation_date": 1444833916, "last_edit_date": 1444834151, "question_id": 33128538, "link": "https://stackoverflow.com/questions/33128538/how-to-increase-product-quantity-in-ruby-on-rails-4-2-on-delivery", "title": "How to increase product quantity in Ruby on Rails 4.2 on delivery", "body": "<p>I have app where I store products and their quantity, I've created controller delivery where I've got product_id and I have also value delivered.</p>\n\n<p>So now after delivery I would love to update my product quantity. (Add value from delivery to the current value)</p>\n\n<p>I was thinking to put this code to the create action in delivery controller but I don't know how?</p>\n\n<pre><code> def create\n@delivery= Delivery.new(delivery_params)\n\nrespond_to do |format|\n  if @delivery.save\n    @ingredient = Ingredient.find(params[:ingredient_id])\n    @ingredient.update_attributes(:quantity =&gt; :quantity + :delivered)\n    ....\n</code></pre>\n\n<p>But It's not working that way. Maybe before save I need to find ingredient? Anything will help thanks</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "edited": false, "score": 0, "creation_date": 1444833382, "post_id": 33128243, "comment_id": 54068587, "body": "<a href=\"https://repl.it/BQ06\" rel=\"nofollow noreferrer\">Is it supposed to work like this?</a>"}, {"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1444833916, "post_id": 33128243, "comment_id": 54069015, "body": "This line <code>reversed_sentence = words[i] + reversed_sentence</code> is wrong, as you sum String and Array. You should think about <code>&lt;&lt;</code> method."}], "answers": [{"tags": [], "owner": {"reputation": 1311, "user_id": 3228012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61d46264687a98d404fd749f658d92fc?s=128&d=identicon&r=PG", "display_name": "Caillou", "link": "https://stackoverflow.com/users/3228012/caillou"}, "is_accepted": true, "score": 4, "last_activity_date": 1444833781, "creation_date": 1444833781, "answer_id": 33128481, "question_id": 33128243, "link": "https://stackoverflow.com/questions/33128243/weird-error-on-a-simple-ruby-program-which-reverses-the-words-in-an-input-senten/33128481#33128481", "title": "Weird error on a simple ruby program which reverses the words in an input sentence", "body": "<pre><code>def reverse_words(sentence)\n  return sentence.split(\" \").reverse.join(\" \")\nend\n</code></pre>\n\n<ul>\n<li><code>.split(\" \")</code> is splitting your String at each space character, returns an Array</li>\n<li><code>.reverse</code> is reversing the order of the elements in an Array, returns an Array</li>\n<li><code>.join(\" \")</code> is joining the elements of an Array with a space character, returns a String</li>\n</ul>\n"}], "owner": {"reputation": 343, "user_id": 5445544, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/10156045897395315/picture?type=large", "display_name": "Stan Amsellem", "link": "https://stackoverflow.com/users/5445544/stan-amsellem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 33128481, "answer_count": 1, "score": -1, "last_activity_date": 1444833781, "creation_date": 1444833188, "question_id": 33128243, "link": "https://stackoverflow.com/questions/33128243/weird-error-on-a-simple-ruby-program-which-reverses-the-words-in-an-input-senten", "title": "Weird error on a simple ruby program which reverses the words in an input sentence", "body": "<p>To put things in context, I'm a ruby beginner.</p>\n\n<p>So, I was doing a simple exercise: Create a ruby program which reverses the words in an input sentence.</p>\n\n<p>This is what I did:</p>\n\n<pre><code>def reverse_words(sentence)\n\n  reversed_sentence = []\n  words = sentence.split(\" \")\n\n  i = 0\n    while i &lt; words.length\n     reversed_sentence = words[i] + reversed_sentence\n     i += 1\n    end\n\n return reversed_sentence.join(\" \")\n\nend\n\n # I make a simple test by adding:\nputs reverse_words(\"Hi how are you\")\n</code></pre>\n\n<p>When I run the program, it says:</p>\n\n<p>reverse_words_ex.rb:7:in <code>reverse_words': undefined local variable or method</code>i' for main:Object (NameError)\n    from reverse_words_ex.rb:15:in `'</p>\n\n<p>I don't understand why they say that i is undefined. I would really appreciate some help here.\nThanks</p>\n"}, {"tags": ["javascript", "ruby", "node.js", "sass", "gruntjs"], "answers": [{"tags": [], "owner": {"reputation": 347, "user_id": 5414694, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8c419f591be234bc220968196b327abb?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Graham", "link": "https://stackoverflow.com/users/5414694/alexander-graham"}, "is_accepted": true, "score": 1, "last_activity_date": 1445278638, "last_edit_date": 1445278638, "creation_date": 1444833660, "answer_id": 33128437, "question_id": 33128133, "link": "https://stackoverflow.com/questions/33128133/working-sass-preprocessor-by-node-js-through-grunt/33128437#33128437", "title": "Working SASS preprocessor by Node.js through Grunt", "body": "<p>Use <code>npm install -g ruby-sass</code>, which installs the ruby-sass gem globally in your environment variables. Then proceed.</p>\n\n<p>I recommend using Gulp over Grunt. They are similar in function but I prefer Gulp due to it's pipeline assets. Worth learning for sure.</p>\n"}], "owner": {"reputation": 6272, "user_id": 2685914, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/4bdXc.jpg?s=128&g=1", "display_name": "Deadpool", "link": "https://stackoverflow.com/users/2685914/deadpool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 33128437, "answer_count": 1, "score": 0, "last_activity_date": 1445278638, "creation_date": 1444832929, "question_id": 33128133, "link": "https://stackoverflow.com/questions/33128133/working-sass-preprocessor-by-node-js-through-grunt", "title": "Working SASS preprocessor by Node.js through Grunt", "body": "<p>I have D:/projectA<br/></p>\n\n<p>Gruntfile.js</p>\n\n<pre><code>module.exports = function(grunt) {\n\n// Project configuration.\ngrunt.initConfig({\n\n    //Read the package.json (optional)\n    pkg: grunt.file.readJSON('package.json'),\n\n    // Metadata.\n    meta: {\n        basePath: '../',\n        srcPath: '../',\n        deployPath: '../'\n    },\n\n    banner: '/*! &lt;%= pkg.name %&gt; - v&lt;%= pkg.version %&gt; - ' +\n            '&lt;%= grunt.template.today(\"yyyy-mm-dd\") %&gt;\\n' +\n            '* Copyright (c) &lt;%= grunt.template.today(\"yyyy\") %&gt; ',\n\n    // Task configuration.\n    concat: {\n        options: {\n            stripBanners: true\n        },\n        dist: {\n            src: ['&lt;%= meta.srcPath %&gt;engine/css/mycss1.css', '&lt;%= meta.srcPath %&gt;engine/css/mycss2.css'],\n            dest: '&lt;%= meta.deployPath %&gt;engine/css/00myfinal.css'\n        }\n    },\n\n    //the Sass Task \n    sass: {\n        sass_my_files : {\n\n            files : {\n                //\"the Destination \" : \" the source files\"\n                \"../engine/css/mystyle3.css\" : \"../engine/css/mysass1.scss\",\n            },\n            options : {\n                \"style\":\"compressed\",\n                \"precision\":\"7\"\n            },\n        },\n    },\n\n});\n\n// These plugins provide necessary tasks.\ngrunt.loadNpmTasks('grunt-contrib-concat');\ngrunt.loadNpmTasks('grunt-contrib-sass');\n\n// Default task\ngrunt.registerTask('default', ['concat','sass']);\n\n};\n</code></pre>\n\n<p>package.json</p>\n\n<pre><code>{\n  \"name\": \"Test-Project\",\n  \"version\": \"0.1.0\",\n  \"devDependencies\": {\n    \"grunt\": \"~0.4.1\",\n    \"grunt-contrib-concat\": \"~0.1.3\"\n  }\n}\n</code></pre>\n\n<p>Ruby is installed on my 'Windows'.<br/></p>\n\n<p>Inserting following command: </p>\n\n<pre><code>npm install ruby-sass\n</code></pre>\n\n<p>I get everything done. But on running 'Grunt' command, I get error: </p>\n\n<pre><code>You need to have Ruby and Sass installed and in your path for this task to work.\n</code></pre>\n\n<p>Can someone tell why my console is showing error after it successfully runs the '<strong><em>concat</em></strong>' task, and showing error on the '<strong><em>SASS</em></strong>' task?</p>\n"}, {"tags": ["ruby", "mkdir"], "comments": [{"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1444832530, "post_id": 33127743, "comment_id": 54067936, "body": "can you put your code in codetags ? isn&#39;t readable like that. In your mkdir you &#39;d better put the path where to create the folder also, the chdir isn&#39;t necessary then"}, {"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1444833317, "post_id": 33127743, "comment_id": 54068539, "body": "Have you tried to create it by <code>FileUtils::mkdir_p &quot;&#47;home&#47;moot&#47;pickaxe&#47;pics&#47;#{batch_name}&quot;</code> ?"}, {"owner": {"reputation": 13, "user_id": 5445483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1529ea68070f5046a8fc3155feaa93fa?s=128&d=identicon&r=PG&f=1", "display_name": "Charris11", "link": "https://stackoverflow.com/users/5445483/charris11"}, "edited": false, "score": 0, "creation_date": 1444900506, "post_id": 33127743, "comment_id": 54098683, "body": "Thanks Yevgeniy, that worked."}], "answers": [{"tags": [], "owner": {"reputation": 280, "user_id": 4941901, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/81b080e3fb02c291fb7e7dda4831a804?s=128&d=identicon&r=PG&f=1", "display_name": "patricio", "link": "https://stackoverflow.com/users/4941901/patricio"}, "is_accepted": false, "score": 0, "last_activity_date": 1444837185, "creation_date": 1444837185, "answer_id": 33129769, "question_id": 33127743, "link": "https://stackoverflow.com/questions/33127743/moving-files-into-new-created-directory-via-gets-chomp/33129769#33129769", "title": "Moving files into new created directory via `gets.chomp`", "body": "<p>why don't simply something like this?</p>\n\n<pre><code>Dir.mkdir(\"#{batch_name}\")\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5445483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1529ea68070f5046a8fc3155feaa93fa?s=128&d=identicon&r=PG&f=1", "display_name": "Charris11", "link": "https://stackoverflow.com/users/5445483/charris11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1444837419, "creation_date": 1444832004, "last_edit_date": 1444837419, "question_id": 33127743, "link": "https://stackoverflow.com/questions/33127743/moving-files-into-new-created-directory-via-gets-chomp", "title": "Moving files into new created directory via `gets.chomp`", "body": "<p>The purpose of the program is to copy images from an SD card into a new folder from a question via <code>gets.chomp</code>. I cannot find a way to create a new directory from the <code>gets.chomp</code> variable named <code>new_batch</code>. Can you advise what I am doing wrong?</p>\n\n<pre><code>Dir.chdir '/home/moot/pickaxe/pics'\n\npic_names = Dir['/media/moot/**/*.{CR2,cr2,JPG,jpg}']\nputs nil\nputs \"What would you like to call this batch? e.g Subject_Location\"\nputs nil\nbatch_name = gets.chomp\n\nrequire 'fileutils'\nFileUtils::mkdir_p \"#{batch_name}\" \nDir.chdir '/home/moot/pickaxe/pics/#{batch_name}'\n\nputs nil\nprint \"Downloading #{pic_names.length} Files: \"\n\npic_number = 1\n\npic_names.each do |name|\n  print '\u02c1\u02da\u1d25\u02da\u02c0  ' \n\n  new_name = if pic_number &lt; 10\n    \"#{batch_name} 0#{pic_number}_#{Time.now} .CR2\"\n  else\n    \"#{batch_name} #{pic_number}_#{Time.now} .CR2\"\n  end\n\n  require 'fileutils'\n  include FileUtils\n  cp(name, new_name)  \n\n  pic_number = pic_number + 1\nend\nputs nil\nputs \"Move Complete.\"\n</code></pre>\n"}, {"tags": ["ruby", "watir", "watir-classic"], "comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 2, "creation_date": 1444832376, "post_id": 33127529, "comment_id": 54067811, "body": "<a href=\"https://github.com/watir/watir-classic/issues/73\" rel=\"nofollow noreferrer\">github.com/watir/watir-classic/issues/73</a>"}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1444834844, "post_id": 33127529, "comment_id": 54069681, "body": "Watir classic is no longer in active development, you should update your tests to use the watir-webdriver gem"}, {"owner": {"reputation": 11, "user_id": 3292247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1649d1cc46b656703e43e2c116354f96?s=128&d=identicon&r=PG&f=1", "display_name": "user3292247", "link": "https://stackoverflow.com/users/3292247/user3292247"}, "edited": false, "score": 0, "creation_date": 1445155482, "post_id": 33127529, "comment_id": 54196633, "body": "thanks a lot! it worked when i changed to watir-webdriver"}, {"owner": {"reputation": 11, "user_id": 3292247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1649d1cc46b656703e43e2c116354f96?s=128&d=identicon&r=PG&f=1", "display_name": "user3292247", "link": "https://stackoverflow.com/users/3292247/user3292247"}, "edited": false, "score": 0, "creation_date": 1445172382, "post_id": 33127529, "comment_id": 54201106, "body": "can you tell me the difference between Watir classic and Watir webdriver?"}], "answers": [{"tags": [], "owner": {"reputation": 10185, "user_id": 5328417, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ecwCL.jpg?s=128&g=1", "display_name": "Arsen", "link": "https://stackoverflow.com/users/5328417/arsen"}, "is_accepted": false, "score": 0, "last_activity_date": 1444966047, "last_edit_date": 1444966047, "creation_date": 1444854013, "answer_id": 33134839, "question_id": 33127529, "link": "https://stackoverflow.com/questions/33127529/cant-run-file-rb-from-command-prompt/33134839#33134839", "title": "Can&#39;t run file.rb from command prompt", "body": "<p>Try this:</p>\n\n<pre><code>gem install net-ssh -v 2.9.3.beta1\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3292247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1649d1cc46b656703e43e2c116354f96?s=128&d=identicon&r=PG&f=1", "display_name": "user3292247", "link": "https://stackoverflow.com/users/3292247/user3292247"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444966047, "creation_date": 1444831430, "last_edit_date": 1444853573, "question_id": 33127529, "link": "https://stackoverflow.com/questions/33127529/cant-run-file-rb-from-command-prompt", "title": "Can&#39;t run file.rb from command prompt", "body": "<p>i have Ruby 2.2 and i can't run any file .rb from command prompt each time i have same error: </p>\n\n<pre><code>C:/Ruby22/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require': cannot load such file -- dl/import (LoadError)\n        from C:/Ruby22/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from C:/Ruby22/lib/ruby/gems/2.2.0/gems/watir-classic-4.2.0/lib/watir-classic/win32.rb:1:in `&lt;top (required)&gt;'\n        from C:/Ruby22/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from C:/Ruby22/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from C:/Ruby22/lib/ruby/gems/2.2.0/gems/watir-classic-4.2.0/lib/watir-classic.rb:32:in `&lt;top (required)&gt;'\n        from C:/Ruby22/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from C:/Ruby22/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n        from C:/Ruby22/lib/ruby/gems/2.2.0/gems/watir-5.0.0-x86-mingw32/lib/watir/loader.rb:41:in `load_driver'\n        from C:/Ruby22/lib/ruby/gems/2.2.0/gems/watir-5.0.0-x86-mingw32/lib/watir/loader.rb:33:in `load_driver_for'\n        from C:/Ruby22/lib/ruby/gems/2.2.0/gems/watir-5.0.0-x86-mingw32/lib/watir/loader.rb:14:in `start'\n        from test.rb:2:in `&lt;main&gt;'\n</code></pre>\n\n<p>what shall i do? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "factory-bot"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1444831575, "post_id": 33127298, "comment_id": 54067218, "body": "why would title have 3 values? 0o"}, {"owner": {"reputation": 622, "user_id": 3303513, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d060e6ac7d96ee538874bdb48d8ed143?s=128&d=identicon&r=PG", "display_name": "maahd", "link": "https://stackoverflow.com/users/3303513/maahd"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1444831692, "post_id": 33127298, "comment_id": 54067306, "body": "@AndreyDeineko It&#39;s just an example. You can replace title with name or anything else."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1444831751, "post_id": 33127298, "comment_id": 54067351, "body": "question is the same - why would you have a set (actually, more then one) of values for an attribute? (metamessage - <a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">associations</a> to the rescue)"}], "answers": [{"tags": [], "owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "is_accepted": true, "score": 1, "last_activity_date": 1444831169, "creation_date": 1444831169, "answer_id": 33127416, "question_id": 33127298, "link": "https://stackoverflow.com/questions/33127298/factory-girl-multiple-values/33127416#33127416", "title": "Factory girl multiple values", "body": "<p>You can simply do:</p>\n\n<pre><code>posts_attrs = [{ title: 'new', number: 6}, { title: 'old' }]\n\nposts_attrs.each do |post_attrs|\n  factory :post do\n    title post_attrs[:title] || 'default title'\n    number post_attrs[:number] || 1\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 978, "user_id": 3797480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZuuZI.jpg?s=128&g=1", "display_name": "nsave", "link": "https://stackoverflow.com/users/3797480/nsave"}, "is_accepted": false, "score": 3, "last_activity_date": 1444832310, "last_edit_date": 1444832310, "creation_date": 1444831947, "answer_id": 33127724, "question_id": 33127298, "link": "https://stackoverflow.com/questions/33127298/factory-girl-multiple-values/33127724#33127724", "title": "Factory girl multiple values", "body": "<ol>\n<li><p>If you want to pass values as arguments:</p>\n\n<pre><code>factory :post do\n  title 'Default Title'\nend\n\n# create(:post, title: 'Custom Title')\n</code></pre></li>\n<li><p>If you want just randomize values then simply:</p>\n\n<pre><code>factory :post do\n  title {  ['New Post', 'Old Post', 'Hello'].sample }\nend\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 662, "user_id": 4747096, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0b85639c3c1cc226a5962b469c8bbbab?s=128&d=identicon&r=PG&f=1", "display_name": "IvanSelivanov", "link": "https://stackoverflow.com/users/4747096/ivanselivanov"}, "is_accepted": false, "score": 1, "last_activity_date": 1444832956, "creation_date": 1444832956, "answer_id": 33128148, "question_id": 33127298, "link": "https://stackoverflow.com/questions/33127298/factory-girl-multiple-values/33128148#33128148", "title": "Factory girl multiple values", "body": "<p>For numbers you can use FactoryGirl sequences:</p>\n\n<pre><code>FactoryGirl.define do\n  sequence :email do |n|\n    \"person#{n}@example.com\"\n  end\nend\n</code></pre>\n\n<p>To generate some random strings there is a gem <code>Faker</code>:</p>\n\n<pre><code>FactoryGirl.define do\n  factory :post do\n    title { Faker::Lorem.sentence }\n  end\nend\n</code></pre>\n\n<p>Faker can be used to generate random emails, strings, e-commerce items, addresses and lots of other things, see at <a href=\"https://github.com/stympy/faker\" rel=\"nofollow\">https://github.com/stympy/faker</a></p>\n"}], "owner": {"reputation": 622, "user_id": 3303513, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d060e6ac7d96ee538874bdb48d8ed143?s=128&d=identicon&r=PG", "display_name": "maahd", "link": "https://stackoverflow.com/users/3303513/maahd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 604, "favorite_count": 0, "accepted_answer_id": 33127416, "answer_count": 3, "score": 0, "last_activity_date": 1444832956, "creation_date": 1444830896, "last_edit_date": 1444830955, "question_id": 33127298, "link": "https://stackoverflow.com/questions/33127298/factory-girl-multiple-values", "title": "Factory girl multiple values", "body": "<p>I know I can give factory girl static data values like this:</p>\n\n<pre><code>  factory :post do\n    title 'New post'\n    number 7\n  end\n</code></pre>\n\n<p>But what if I have more than one value for each title and number. What if title is 'New Post', 'Old Post', 'Hello' and number is 7, 8, 9. How would I pass that data to factory girl? Should I use an array or use multiple do end blocks?</p>\n"}, {"tags": ["css", "ruby"], "comments": [{"owner": {"reputation": 1311, "user_id": 3228012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61d46264687a98d404fd749f658d92fc?s=128&d=identicon&r=PG", "display_name": "Caillou", "link": "https://stackoverflow.com/users/3228012/caillou"}, "edited": false, "score": 1, "creation_date": 1444832688, "post_id": 33127271, "comment_id": 54068059, "body": "Is your problem in production only ? Have you run <code>rake assets:precompile</code> in production ?"}, {"owner": {"reputation": 34, "user_id": 5422083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b21d0bcf3b7fba3da0754e1b271a3b0?s=128&d=identicon&r=PG&f=1", "display_name": "Rajesh Ramamoorthy", "link": "https://stackoverflow.com/users/5422083/rajesh-ramamoorthy"}, "reply_to_user": {"reputation": 1311, "user_id": 3228012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61d46264687a98d404fd749f658d92fc?s=128&d=identicon&r=PG", "display_name": "Caillou", "link": "https://stackoverflow.com/users/3228012/caillou"}, "edited": false, "score": 0, "creation_date": 1444884895, "post_id": 33127271, "comment_id": 54091022, "body": "Even after using this   rake assets:precompile   i can&#39;t able to view the background images"}], "owner": {"reputation": 34, "user_id": 5422083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b21d0bcf3b7fba3da0754e1b271a3b0?s=128&d=identicon&r=PG&f=1", "display_name": "Rajesh Ramamoorthy", "link": "https://stackoverflow.com/users/5422083/rajesh-ramamoorthy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1444830833, "creation_date": 1444830833, "question_id": 33127271, "link": "https://stackoverflow.com/questions/33127271/to-add-the-background-image-in-the-style-sheet-in-ruby-on-rails", "title": "to add the background image in the style sheet in ruby on rails", "body": "<p>I tried these commands but i cannot access the background image which i stored in both places,  <br><br>\n            app/assets/images/pw_maze_black_2X.png<br><br>\n            public/image/pw_maze_black_2X.png     </p>\n\n<pre><code> background-image: image-url('pw_maze_black_2X.png');\n\n background-image: image-url(\"pw_maze_black_2X.png\");\n\n background:image-url('pw_maze_black_2X.png');\n\n background-image:url('pw_maze_black_2X.png');\n\n background-image:url(../images/macbook-pro.png);\n\n background: url( asset-path('pw_maze_black_2X.png') );\n\n background:url('/app/assets/images/pw_maze_black_2X.png');\n\n background: url('/assets/pw_maze_black_2X.png');\n\n background:url(../image/pw_maze_black_2X.png) left top no-repeat;\n\n background-image: image-url('/public/images/pw_maze_black_2X.png');\n\n background_image:url('/public/images/pw_maze_black_2X.png');\n</code></pre>\n\n<p>i changed in config/environments/production.rb</p>\n\n<pre><code>config.serve_static_files = true  \n</code></pre>\n\n<p>and added the code given below:</p>\n\n<pre><code> config.assets.precompile = ['*.js', '*.css', '*.css.erb']\n</code></pre>\n\n<p>i am using rails version 4.2.4</p>\n\n<p>thank you in advance </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services"], "answers": [{"tags": [], "owner": {"reputation": 1527, "user_id": 1107878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rLi3w.png?s=128&g=1", "display_name": "basiam", "link": "https://stackoverflow.com/users/1107878/basiam"}, "is_accepted": true, "score": 1, "last_activity_date": 1444832182, "creation_date": 1444832182, "answer_id": 33127818, "question_id": 33127053, "link": "https://stackoverflow.com/questions/33127053/rails-aws-dynamo-insert-into-database/33127818#33127818", "title": "Rails aws dynamo insert into database", "body": "<p><code>table.hash_key = [:string, :string]</code></p>\n\n<p>needs be changed to <code>[:name_of_hash_key, :type_of_hash_key]</code>, for example</p>\n\n<p><code>table.hash_key = [:id, :string]</code> </p>\n"}, {"tags": [], "owner": {"reputation": 366, "user_id": 2486299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gvIRp.jpg?s=128&g=1", "display_name": "blankenshipz", "link": "https://stackoverflow.com/users/2486299/blankenshipz"}, "is_accepted": false, "score": 1, "last_activity_date": 1444832678, "last_edit_date": 1444832678, "creation_date": 1444832342, "answer_id": 33127882, "question_id": 33127053, "link": "https://stackoverflow.com/questions/33127053/rails-aws-dynamo-insert-into-database/33127882#33127882", "title": "Rails aws dynamo insert into database", "body": "<p>Edit:</p>\n\n<p>I think that you need to remove the call to <code>table.hash_key</code> and specify the <code>hash_key</code> when you create the table. Here's an example from the documentation from the version of the API you seem to be using (V1)</p>\n\n<pre><code>table = dynamo_db.tables.create(\n  \"MyTable\", 10, 5,\n  :hash_key =&gt; { :id =&gt; :string }\n)\nsleep 1 while table.status == :creating\n</code></pre>\n\n<p>See the documentation on this page:</p>\n\n<p><a href=\"http://docs.aws.amazon.com/AWSRubySDK/latest/AWS/DynamoDB.html\" rel=\"nofollow\">http://docs.aws.amazon.com/AWSRubySDK/latest/AWS/DynamoDB.html</a>          # V1</p>\n"}], "owner": {"reputation": 1312, "user_id": 2280562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/3a1ecbfd6f642d6f18eaa9a51edbed89?s=128&d=identicon&r=PG", "display_name": "Sebastian Corneliu V&#238;rlan", "link": "https://stackoverflow.com/users/2280562/sebastian-corneliu-v%c3%aerlan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 33127818, "answer_count": 2, "score": 0, "last_activity_date": 1444832678, "creation_date": 1444830213, "question_id": 33127053, "link": "https://stackoverflow.com/questions/33127053/rails-aws-dynamo-insert-into-database", "title": "Rails aws dynamo insert into database", "body": "<p>I use this code to insert into dynamo db:</p>\n\n<pre><code>require \"aws\"\n\nAWS.config(\n    access_key_id: 'xxxxxxxxxxxxxxxxxx',\n    secret_access_key: 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx',\n    region: 'eu-west-1'\n)\n\ndynamo_db = AWS::DynamoDB.new\n\n\ntable = dynamo_db.tables['mytable']\ntable.hash_key = [:string, :string]\n\n# add an item\ntable.items.create(id: '12345', 'foo' =&gt; 'bar')\n</code></pre>\n\n<p>Everything is ok, the data is inserted but I still get this error:</p>\n\n<blockquote>\n  <p>missing hash key value in put_item response</p>\n</blockquote>\n\n<p>What did I missed? According their <a href=\"http://docs.aws.amazon.com/AWSRubySDK/latest/AWS/DynamoDB.html\" rel=\"nofollow\">documentation</a> seems to be ok.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv"], "comments": [{"owner": {"reputation": 4450, "user_id": 837638, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/32d80da41830a6e6c1bb3eb977537e3e?s=128&d=identicon&r=PG", "display_name": "coorasse", "link": "https://stackoverflow.com/users/837638/coorasse"}, "edited": false, "score": 2, "creation_date": 1444829590, "post_id": 33126693, "comment_id": 54065708, "body": "<a href=\"http://spreadsheets.about.com/od/formulatips/qt/numbersign_err.htm\" rel=\"nofollow noreferrer\">spreadsheets.about.com/od/formulatips/qt/numbersign_err.htm</a>"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 2, "creation_date": 1444830128, "post_id": 33126693, "comment_id": 54066145, "body": "You should look at the CSV with a text editor and see if the text is correct."}, {"owner": {"reputation": 261, "user_id": 4153588, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5728436899b0a06ddf2b5b93a5aa757d?s=128&d=identicon&r=PG&f=1", "display_name": "stackow1", "link": "https://stackoverflow.com/users/4153588/stackow1"}, "edited": false, "score": 0, "creation_date": 1444830349, "post_id": 33126693, "comment_id": 54066314, "body": "thanks! i open file with other editor and look normal nubmers"}], "answers": [{"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": true, "score": 2, "last_activity_date": 1444832924, "creation_date": 1444832924, "answer_id": 33128128, "question_id": 33126693, "link": "https://stackoverflow.com/questions/33126693/why-not-exported-numbers-in-csv/33128128#33128128", "title": "Why not exported numbers in csv?", "body": "<p>The '###' symbols are the Excel representation when a number is too big to display in the available column width. So just widen the colums by dragging the columnheader or double clicking the right separator in the column headers so that the widt is automaticly adjusted to the value with the maximum width.</p>\n"}, {"tags": [], "owner": {"reputation": 1311, "user_id": 3228012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61d46264687a98d404fd749f658d92fc?s=128&d=identicon&r=PG", "display_name": "Caillou", "link": "https://stackoverflow.com/users/3228012/caillou"}, "is_accepted": false, "score": 0, "last_activity_date": 1444833299, "creation_date": 1444833299, "answer_id": 33128292, "question_id": 33126693, "link": "https://stackoverflow.com/questions/33126693/why-not-exported-numbers-in-csv/33128292#33128292", "title": "Why not exported numbers in csv?", "body": "<p>I guess that the result number is too wide for your spreadsheet software (Excel ?). If it is correctly displayed when you open your file with a text editor, you're ok. Your data is well-written.</p>\n"}], "owner": {"reputation": 261, "user_id": 4153588, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5728436899b0a06ddf2b5b93a5aa757d?s=128&d=identicon&r=PG&f=1", "display_name": "stackow1", "link": "https://stackoverflow.com/users/4153588/stackow1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 33128128, "answer_count": 2, "score": 0, "last_activity_date": 1444833299, "creation_date": 1444829309, "question_id": 33126693, "link": "https://stackoverflow.com/questions/33126693/why-not-exported-numbers-in-csv", "title": "Why not exported numbers in csv?", "body": "<p>please help solve the problem.</p>\n\n<p>i create scaffold Product, fill it, and try export product data to csv-format file.\napplication_controller.rb:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  protect_from_forgery with: :exception\n  require 'csv'\nend\n</code></pre>\n\n<p>product controller:</p>\n\n<pre><code>class ProductsController &lt; ApplicationController\n  def index\n    @products = Product.all\n\n    respond_to do |format|\n      format.html\n      format.csv do\n        headers['Content-Disposition'] = \"attachment; filename=\\\"user-list\\\"\"\n        headers['Content-Type'] ||= 'text/csv'\n      end\n    end    \n  end\nend\n</code></pre>\n\n<p>app/views/users/index.csv.erb:</p>\n\n<pre><code>&lt;%- headers = [\n  'title', \n  'is_catalog', \n  'parent_id', \n  'lft', \n  'rgt', \n  'description'\n] -%&gt;\n&lt;%= CSV.generate_line headers %&gt;\n&lt;%- @products.each do |product| -%&gt;\n  &lt;%= CSV.generate_line([\n    product.title, \n    product.is_catalog, \n    product.parent_id, \n    product.lft, \n    product.rgt, \n    product.description\n  ]) %&gt;\n&lt;%- end -%&gt;\n</code></pre>\n\n<p>schema:</p>\n\n<pre><code>create_table \"products\", force: :cascade do |t|\n  t.string   \"title\"\n  t.text     \"description\"\n  t.boolean  \"is_catalog\"\n  t.integer  \"parent_id\"\n  t.integer  \"lft\"\n  t.integer  \"rgt\"\nend\n</code></pre>\n\n<p>but after open link 'host/products.csv', downloaded csv-file which contain '###' symbols in 'lft' column. see it on screenshot <a href=\"http://hostingkartinok.com/show-image.php?id=f08a98e485285e4adb23f5c148620aa2\" rel=\"nofollow\">http://hostingkartinok.com/show-image.php?id=f08a98e485285e4adb23f5c148620aa2</a> </p>\n\n<p>please help export 'lft' column values</p>\n"}, {"tags": ["php", "ruby", "xml", "mediawiki", "wikipedia"], "comments": [{"owner": {"reputation": 19745, "user_id": 574632, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/bb13b2bbc97ce81108b09be9a41120a1?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/574632/steve"}, "edited": false, "score": 1, "creation_date": 1444828878, "post_id": 33126418, "comment_id": 54065207, "body": "Not familiar with the wikipedia dump syntax, can you post a sample, or a link to docs"}, {"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1444829044, "post_id": 33126418, "comment_id": 54065323, "body": "With almost 12k rep you should know these questions fall into the  <b>&quot;primarily opinion-based&quot;</b> category"}, {"owner": {"reputation": 83063, "user_id": 2310830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6rM1.png?s=128&g=1", "display_name": "RiggsFolly", "link": "https://stackoverflow.com/users/2310830/riggsfolly"}, "edited": false, "score": 0, "creation_date": 1444829058, "post_id": 33126418, "comment_id": 54065331, "body": "I would start by uncompressing the <code>bz2</code> file as there does not appear to be a way to process it in compressed format"}, {"owner": {"reputation": 21415, "user_id": 1270812, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LmoZ6.jpg?s=128&g=1", "display_name": "Dr.Kameleon", "link": "https://stackoverflow.com/users/1270812/dr-kameleon"}, "reply_to_user": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1444829115, "post_id": 33126418, "comment_id": 54065368, "body": "@PedroLobito Well, how is this &quot;opinion-based&quot;? I know there might be 10 different possible approaches (as there are in almost anything programming-related). I just need <i>one</i>."}, {"owner": {"reputation": 21415, "user_id": 1270812, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LmoZ6.jpg?s=128&g=1", "display_name": "Dr.Kameleon", "link": "https://stackoverflow.com/users/1270812/dr-kameleon"}, "reply_to_user": {"reputation": 83063, "user_id": 2310830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6rM1.png?s=128&g=1", "display_name": "RiggsFolly", "link": "https://stackoverflow.com/users/2310830/riggsfolly"}, "edited": false, "score": 0, "creation_date": 1444829137, "post_id": 33126418, "comment_id": 54065375, "body": "@RiggsFolly Lol. I guess I&#39;ve already gone past this part... :)"}, {"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1444829181, "post_id": 33126418, "comment_id": 54065411, "body": "<b>&quot; how is this &quot;opinion-based&quot;? I know there might be 10 different possible approaches&quot;</b> You answered yourself."}, {"owner": {"reputation": 83063, "user_id": 2310830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6rM1.png?s=128&g=1", "display_name": "RiggsFolly", "link": "https://stackoverflow.com/users/2310830/riggsfolly"}, "edited": false, "score": 0, "creation_date": 1444838752, "post_id": 33126418, "comment_id": 54072370, "body": "LOL - <i>Well that was not obvious from your question</i>. Ok if it is extracted to an XML file then you <b>could</b> use PHP&#39;s <a href=\"http://php.net/manual/en/book.xmlreader.php\" rel=\"nofollow noreferrer\">XMLReader</a>. I would suggest sticking to a <code>XML Pull parser</code> rather than using <code>SimpleXML</code> as I assume the XML file is quite large. Of course a database would probably be easier <b>and quicker</b> in the long run"}, {"owner": {"reputation": 177680, "user_id": 367456, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/MGhY2.png?s=128&g=1", "display_name": "hakre", "link": "https://stackoverflow.com/users/367456/hakre"}, "reply_to_user": {"reputation": 83063, "user_id": 2310830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6rM1.png?s=128&g=1", "display_name": "RiggsFolly", "link": "https://stackoverflow.com/users/2310830/riggsfolly"}, "edited": false, "score": 0, "creation_date": 1444839145, "post_id": 33126418, "comment_id": 54072625, "body": "@RiggsFolly: The compression stream wrapper is a way in PHP to process it compressed. In any case this question is a dupe of how to parse and process XML with PHP. Also asking for &quot;just some ideas&quot; doesn&#39;t work well with Stackoverflow."}], "answers": [{"comments": [{"owner": {"reputation": 21415, "user_id": 1270812, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LmoZ6.jpg?s=128&g=1", "display_name": "Dr.Kameleon", "link": "https://stackoverflow.com/users/1270812/dr-kameleon"}, "edited": false, "score": 0, "creation_date": 1444829296, "post_id": 33126631, "comment_id": 54065494, "body": "The problem with this one is that it makes use of the online wikipedia. Or it would need a quasi-complete offline mediawiki installation. The reason for having downloaded the dumps and wanting to do it offline is speed. (I need to perform some massive processing)"}, {"owner": {"reputation": 19745, "user_id": 574632, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/bb13b2bbc97ce81108b09be9a41120a1?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/574632/steve"}, "reply_to_user": {"reputation": 21415, "user_id": 1270812, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LmoZ6.jpg?s=128&g=1", "display_name": "Dr.Kameleon", "link": "https://stackoverflow.com/users/1270812/dr-kameleon"}, "edited": false, "score": 1, "creation_date": 1444830556, "post_id": 33126631, "comment_id": 54066495, "body": "@Dr.Kameleon Well it appears they offer sql dumps as well - i would suggest using that, and then querying using regular sql. Its going to be a lot more efficient that parsing XML with such a huge data set, unless you have a lot of ram and can read the whole thing into memory"}], "tags": [], "owner": {"reputation": 1714, "user_id": 3961074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de3c7fd1d4b1cbbf28717e9e09fe3d5?s=128&d=identicon&r=PG&f=1", "display_name": "IsThisJavascript", "link": "https://stackoverflow.com/users/3961074/isthisjavascript"}, "is_accepted": false, "score": 0, "last_activity_date": 1444829163, "creation_date": 1444829163, "answer_id": 33126631, "question_id": 33126418, "link": "https://stackoverflow.com/questions/33126418/get-article-from-wikipedia-xml-dump-by-title/33126631#33126631", "title": "Get article from Wikipedia XML dump - by title", "body": "<p>If you're only after a short bit of information, you could use Wikipedias JSON API...\n<a href=\"https://en.wikipedia.org/w/api.php?format=json&amp;action=query&amp;prop=extracts&amp;exintro=&amp;explaintext=&amp;titles=book\" rel=\"nofollow\">https://en.wikipedia.org/w/api.php?format=json&amp;action=query&amp;prop=extracts&amp;exintro=&amp;explaintext=&amp;titles=book</a></p>\n\n<p>If you want the full article, then I believe you can use this:\n<a href=\"https://en.wikipedia.org/w/api.php?format=json&amp;action=query&amp;prop=extracts&amp;explaintext=&amp;titles=book\" rel=\"nofollow\">https://en.wikipedia.org/w/api.php?format=json&amp;action=query&amp;prop=extracts&amp;explaintext=&amp;titles=book</a></p>\n\n<p>The difference between these two sources is that in the first one, we set 'exintro' and in the second link we have 'explaintext'. The sections are split up using \"\\n\\n\\n===\" and \"===\\n\". With this information, you can pick out the ending of a section and find the start of a new one, along with the section name.</p>\n\n<p>For more info, check out <a href=\"https://en.wikipedia.org/w/api.php?action=help&amp;modules=query%2Bextracts\" rel=\"nofollow\">https://en.wikipedia.org/w/api.php?action=help&amp;modules=query%2Bextracts</a></p>\n\n<p>Sorry this isn't in XML.</p>\n"}], "owner": {"reputation": 21415, "user_id": 1270812, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LmoZ6.jpg?s=128&g=1", "display_name": "Dr.Kameleon", "link": "https://stackoverflow.com/users/1270812/dr-kameleon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 704, "favorite_count": 0, "closed_date": 1444839172, "answer_count": 1, "score": 0, "last_activity_date": 1444829163, "creation_date": 1444828644, "last_edit_date": 1444828882, "question_id": 33126418, "link": "https://stackoverflow.com/questions/33126418/get-article-from-wikipedia-xml-dump-by-title", "closed_reason": "Duplicate", "title": "Get article from Wikipedia XML dump - by title", "body": "<p>I know the question might be simpler than it seems, but after reading tons of material, I'm really confused.</p>\n\n<p>So, I have downloaded a wikipedia dump (this one to be precise: <em>enwiktionary-20151002-pages-articles-multistream.xml.bz2</em> - which supposedly contains all articles from the English Wiktionary). What I want is to get the content of a specific article, by title (the same way you would search it in Wikipedia itself).</p>\n\n<p>Note: I don't want the HTML (as generated by wikipedia). I want the \"real\" content, as you see it when \"edit\"ing any article in Wikipedia.</p>\n\n<p>In a few words:</p>\n\n<ul>\n<li>Search for the article with the title, e.g. \"book\"</li>\n<li>Get the content</li>\n</ul>\n\n<p>How should I go about that?</p>\n\n<hr>\n\n<p>P.S. I'm not looking for a language-specific solution. I just need some ideas as to how this can be approached.</p>\n"}, {"tags": ["ruby", "class", "methods"], "comments": [{"owner": {"reputation": 6798, "user_id": 4174897, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/gS0gI.jpg?s=128&g=1", "display_name": "Kyll", "link": "https://stackoverflow.com/users/4174897/kyll"}, "edited": false, "score": 0, "creation_date": 1444828560, "post_id": 33126359, "comment_id": 54064956, "body": "Are you sure using swear words is essential to the understanding of your programming issue? Please <a href=\"https://stackoverflow.com/posts/33126359/edit\">edit</a> them out or replace them with appropriate terms."}, {"owner": {"reputation": 1423, "user_id": 1480605, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/98d26ead0d4b27f07e8444bea07a3949?s=128&d=identicon&r=PG", "display_name": "Hew Wolff", "link": "https://stackoverflow.com/users/1480605/hew-wolff"}, "edited": false, "score": 0, "creation_date": 1444829266, "post_id": 33126359, "comment_id": 54065475, "body": "You may want to fix the spelling of &quot;bowdlerize&quot;.  Also, and more importantly, note that <code>&quot;duck&quot;</code> is not an object of your class, but just a string, so calling <code>to_s</code> on it doesn&#39;t really do anything.  Maybe you meant <code>Bowlderize.new(&quot;duck&quot;)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1444829665, "post_id": 33126594, "comment_id": 54065776, "body": "There are ways to cheat, e.g. <code>instance_eval</code>."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1444836533, "post_id": 33126594, "comment_id": 54070833, "body": "@undur_gongor better still <code>instance_variable_set</code>"}], "tags": [], "owner": {"reputation": 1423, "user_id": 1480605, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/98d26ead0d4b27f07e8444bea07a3949?s=128&d=identicon&r=PG", "display_name": "Hew Wolff", "link": "https://stackoverflow.com/users/1480605/hew-wolff"}, "is_accepted": false, "score": 1, "last_activity_date": 1444829086, "creation_date": 1444829086, "answer_id": 33126594, "question_id": 33126359, "link": "https://stackoverflow.com/questions/33126359/what-is-the-value-of-a-class-variable-which-is-initialised-in-the-same-class-aga/33126594#33126594", "title": "What is the value of a class variable which is initialised in the same class again?", "body": "<p>@value in the original instance is not changed.  You've just created a new instance with the combined @value.</p>\n\n<p>In fact there isn't really any way to change @value in an existing object, because none of the class methods modify that instance variable.</p>\n"}], "owner": {"reputation": 31, "user_id": 5211392, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1129529527061340/picture?type=large", "display_name": "Akshansh Gupta", "link": "https://stackoverflow.com/users/5211392/akshansh-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1444829837, "creation_date": 1444828488, "last_edit_date": 1444829837, "question_id": 33126359, "link": "https://stackoverflow.com/questions/33126359/what-is-the-value-of-a-class-variable-which-is-initialised-in-the-same-class-aga", "title": "What is the value of a class variable which is initialised in the same class again?", "body": "<p>This code replaces vowels with * in swear words given as input. Now when I use \"+\" operator, a class instance is created and initialised again with input as both strings (\"t*mn\" and \"d*ck\").</p>\n\n<p>My doubt is that what happens to @value variable in this case? Can the call to new instance in \"+\" method replace the value of @value in original class?</p>\n\n<pre><code>class Bowlderize\n\n  def initialize(string)\n    @value = string.gsub(/[aeiou]/, \"*\")\n  end\n\n  def +(other)\n    Bowlderize.new(self.to_s + other.to_s)\n  end\n\n  def to_s\n    @value\n  end\nend\n\nmybow = Bowlderize.new(\"tamn \") + \"duck\"\nputs mybow.to_s\n</code></pre>\n\n<p>1st Edit:</p>\n\n<p>This code returns \"d*ck\". If the new call to the same class cannot change the @value, then how is d*ck returned?</p>\n\n<pre><code>class Bowlderize\n\n  def initialize(string)\n    @value = string.gsub(/[aeiou]/, \"*\")\n  end\n\n  def +(other)\n    Bowlderize.new(other.to_s)\n  end\n\n  def to_s\n    @value\n  end\nend\n\nmybow = Bowlderize.new(\"tamn \") + \"duck\"\nputs mybow.to_s\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1444828544, "post_id": 33126228, "comment_id": 54064944, "body": "Your logs are (usually) stored on your host server (the one hosting your app). Unless you have a security breach (an intruder can connect to your server), nobody should be able to read your logs. Also, keep in mind that what you do in development mode is what you <b>expect</b> to happen, but in production mode, everything can happen (users do weird stuff sometimes). For this reason I would try to log stuff in production mode because maybe one day something weird and not planned will happen but you won&#39;t have a lot of informations about it."}], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 4, "last_activity_date": 1444828610, "creation_date": 1444828610, "answer_id": 33126403, "question_id": 33126228, "link": "https://stackoverflow.com/questions/33126228/rails-4-should-i-place-logger-debug-messages-inside-a-block-rails-env-developm/33126403#33126403", "title": "Rails 4 - Should I place logger/debug messages inside a block Rails.env.development?", "body": "<p>There's no need to do that with if statements. It's already controlled by <code>log_level</code> of the environment</p>\n\n<p>In your <code>config/environments/development.rb</code></p>\n\n<pre><code>config.log_level = :debug\n</code></pre>\n\n<p>But if you put this into <code>config/environments/production.rb</code> (default value, btw), you won't see any debug messages in the production log.</p>\n\n<pre><code> config.log_level = :warn\n</code></pre>\n\n<p>If you want to temporarily increase verbosity of production logs (for debugging or whatever), change log_level and redeploy. Do your troubleshooting and then rollback the app when you're done. Easier than touching <code>Rails.env</code> checks all over the codebase, isn't it?</p>\n"}], "owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 33126403, "answer_count": 1, "score": 2, "last_activity_date": 1444828610, "creation_date": 1444828163, "question_id": 33126228, "link": "https://stackoverflow.com/questions/33126228/rails-4-should-i-place-logger-debug-messages-inside-a-block-rails-env-developm", "title": "Rails 4 - Should I place logger/debug messages inside a block Rails.env.development?", "body": "<p>I am using inside a controller a logger message:</p>\n\n<pre><code>logger.debug \"Here is the resulting object find_by_sql outputs: #{@deal}\"\n</code></pre>\n\n<p>Should I use </p>\n\n<pre><code>if Rails.env.development?   \n  logger.debug \"Here is the resulting object find_by_sql outputs: #{@deal}\"\nend \n</code></pre>\n\n<p>Is it generally a good practice to put the logger message inside a Rails.dev block? I don't want to slow even a little little bit the app so the fact i add a if/end block will slow the app.</p>\n\n<p>Letting it without any restriction to the dev mode would compromise the information security?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "factory-bot"], "owner": {"reputation": 1423, "user_id": 2948157, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/100001350795049/picture?type=large", "display_name": "Lucian Tarna", "link": "https://stackoverflow.com/users/2948157/lucian-tarna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1444827927, "creation_date": 1444827927, "question_id": 33126140, "link": "https://stackoverflow.com/questions/33126140/factorygirl-sequence-not-instantiating-when-creating-an-object-with-association", "title": "FactoryGirl Sequence not instantiating when creating an object with association", "body": "<p>I have to write a few tests for a controller I have. I have 3 models : User, UserInfo and UserPaymentPreference. I am using FactoryGirl to make a UserPaymentPreference object like this:</p>\n\n<pre><code>factory :advertiser_payment_preference_sequence do\n      association :advertiser_user, factory: [:advertiser_user_sequence]\n    end\n\nfactory :advertiser_user_sequence, class: 'AdvertiserUser' do\n      deposit { rand(100..1000).round(2) }\n      sequence(:login) { |n| \"#{Faker::Internet.domain_name}#{n}\" }\n      user_type 'advertiser'\n      association :user_info, factory: :advertiser_user_info_sequence\n\n      trait :no_deposit do\n        deposit 0\n      end\n    end\n\nfactory :advertiser_user_info_sequence, class: 'AdvertiserUserInfo' do\n      sequence(:firstname) { |n| \"#{Faker::Name.first_name}#{n}\" }\n      sequence(:organization) { |n| \"#{Faker::Company.name}#{n}\" }\n      sequence(:phone) { |n| \"#{Faker::PhoneNumber.cell_phone}#{n}\" }\n      sequence(:fiscal_code) { |n| \"#{Faker::Company.duns_number}#{n}\" }\n      sequence(:address) { |n| \"#{Faker::Address.street_address}#{n}\" }\n      sequence(:city) { |n| \"#{Faker::Address.city}#{n}\" }\n    end\n</code></pre>\n\n<p>This works fine if I do something like FactoryGirl.build(:advertiser_user_info_sequence) it will create an object of type UserInfo with all the fields populated as they should be.</p>\n\n<p>However when I try to make an AdvertiserPaymentPreference object by doing FactoryGirl.build(:advertiser_payment_preference_sequence) all the user_info fields will be \"\" instead of the value that it should have been created by the association.</p>\n\n<pre><code>describe 'Advertiser::Billing::SettingsController', type: :request do\n  let!(:campaign) { create :campaign }\n  let!(:user) { campaign.user }\n  let!(:user_info) { user.user_info }\n  let!(:advertiser_payment_preference) { create(:advertiser_payment_preference, advertiser_user_id: user.id)}\n\n  before :each do\n    login(user)\n  end\n\n  describe \"PUT/PATCH /advertiser/billing/settings\" do\n    context \"it is a valid request\" do\n      it \"updates the resource\" do\n        binding.pry\n        new_advertiser_payment_preference = build(:advertiser_payment_preference_sequence)\n\n        binding.pry\n        params = {}\n        params['user_info'] = to_api_advertiser_info(new_advertiser_user_info)\n        api_put '/advertiser/billing/profile', params\n\n        expect(response.status).to eq(200)\n\n        user_info.reload\n        expect(user_info.organization).to eq(new_advertiser_user_info.organization)\n        expect(user_info.phone).to eq(new_advertiser_user_info.phone)\n        expect(user_info.fiscal_code).to eq(new_advertiser_user_info.fiscal_code)\n        expect(user_info.country).to eq(new_advertiser_user_info.country)\n        expect(user_info.address).to eq(new_advertiser_user_info.address)\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>This is how the test for the controller looks like . When I call new_advertiser_payment_preference = build(:advertiser_payment_preference_sequence) I get an object user_info with \"\" on all fields that are made using advertser_user_info_sequence.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"tags": [], "owner": {"reputation": 520, "user_id": 1964758, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/635b115f78c4ff097d49f753ed04bcae?s=128&d=identicon&r=PG&f=1", "display_name": "SeemsIndie", "link": "https://stackoverflow.com/users/1964758/seemsindie"}, "is_accepted": true, "score": 1, "last_activity_date": 1446045459, "creation_date": 1446045459, "answer_id": 33394891, "question_id": 33126052, "link": "https://stackoverflow.com/questions/33126052/devise-send-instructions-with-my-mail-wrapper/33394891#33394891", "title": "Devise, send instructions with my mail wrapper", "body": "<p>I got it, just had to think a bit.</p>\n\n<p>I just overrided send_reset_password_instructions in admin model:</p>\n\n<pre><code>def send_reset_password_instructions\n    token = set_reset_password_token # Use the token if i need it inside link\n\n    MyApp::MadMimi.send! :forgot_password, current_user, link\n\n    token\nend\n</code></pre>\n"}], "owner": {"reputation": 520, "user_id": 1964758, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/635b115f78c4ff097d49f753ed04bcae?s=128&d=identicon&r=PG&f=1", "display_name": "SeemsIndie", "link": "https://stackoverflow.com/users/1964758/seemsindie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 33394891, "answer_count": 1, "score": 1, "last_activity_date": 1446045459, "creation_date": 1444827719, "question_id": 33126052, "link": "https://stackoverflow.com/questions/33126052/devise-send-instructions-with-my-mail-wrapper", "title": "Devise, send instructions with my mail wrapper", "body": "<p>I have madmimi wrapper that somebody wrote as a helper, andi i have to use it not matter what. So i was wondering how would i go about sending forgot password mail with reset link with my own wrapper.</p>\n\n<p>My method works like this:</p>\n\n<pre><code>MyApp::MadMimi.send! :forgot_password, @user, @link\n</code></pre>\n\n<p>How i can somehow override send_reset_password_instructions, generate a link and send it like this?</p>\n\n<p>Thanks guys.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ajax", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 978, "user_id": 3797480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZuuZI.jpg?s=128&g=1", "display_name": "nsave", "link": "https://stackoverflow.com/users/3797480/nsave"}, "reply_to_user": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "edited": false, "score": 0, "creation_date": 1444828352, "post_id": 33125991, "comment_id": 54064818, "body": "Don&#39;t you enjoy the beauty of <code>js.erb</code> partial? :)"}, {"owner": {"reputation": 978, "user_id": 3797480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZuuZI.jpg?s=128&g=1", "display_name": "nsave", "link": "https://stackoverflow.com/users/3797480/nsave"}, "reply_to_user": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "edited": false, "score": 0, "creation_date": 1444828815, "post_id": 33125991, "comment_id": 54065161, "body": "I mean create <code>_yourpartial.js.erb</code> and render it inside the <code>index.html.erb</code>"}, {"owner": {"reputation": 978, "user_id": 3797480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZuuZI.jpg?s=128&g=1", "display_name": "nsave", "link": "https://stackoverflow.com/users/3797480/nsave"}, "reply_to_user": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "edited": false, "score": 0, "creation_date": 1444903692, "post_id": 33125991, "comment_id": 54100881, "body": "@ImranNaqvi, have you checked my updated answer? If it appears like a text then you just forgot to add <code>script</code> tags"}, {"owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "edited": false, "score": 0, "creation_date": 1444914032, "post_id": 33125991, "comment_id": 54107747, "body": "yeah you&#39;re right but we don&#39;t need to specify the format , just specify .js.erb with the partial as <code>render partial: &#39;yourpartial.js.erb&#39;</code>"}], "tags": [], "owner": {"reputation": 978, "user_id": 3797480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZuuZI.jpg?s=128&g=1", "display_name": "nsave", "link": "https://stackoverflow.com/users/3797480/nsave"}, "is_accepted": true, "score": 1, "last_activity_date": 1444829132, "last_edit_date": 1444829132, "creation_date": 1444827546, "answer_id": 33125991, "question_id": 33125788, "link": "https://stackoverflow.com/questions/33125788/make-js-erb-file-to-work-without-ajax-ruby-on-rails-4/33125991#33125991", "title": "Make js.erb file to work without ajax Ruby on Rails 4", "body": "<p>You could simply move the code from <code>index.js.erb</code> to <code>index.html.erb</code>.</p>\n\n<p>If you want to keep it separately then you could move js code to a partial and render it inside <code>index.html.erb</code>. See docs <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials\" rel=\"nofollow\">here</a>.</p>\n\n<p><strong>Update</strong></p>\n\n<p>How to do this with partial:</p>\n\n<ol>\n<li>Create <code>_yourpartial.js.erb</code> and fill with js code</li>\n<li>To render the code inside 'index.html.erb' add this: <code>&lt;%= render partial: 'yourpartial', formats: [:js] %&gt;</code></li>\n</ol>\n\n<p>(But of course you would still need the script tag around the js code)</p>\n"}, {"comments": [{"owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "edited": false, "score": 0, "creation_date": 1444889012, "post_id": 33127828, "comment_id": 54092472, "body": "I think you didn&#39;t noticed the question . I clearly stated that I want js.erb to work <b>without</b> ajax"}], "tags": [], "owner": {"reputation": 4497, "user_id": 1050875, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3549436942ea890da97f41d1dbd3594f?s=128&d=identicon&r=PG", "display_name": "akbarbin", "link": "https://stackoverflow.com/users/1050875/akbarbin"}, "is_accepted": false, "score": -1, "last_activity_date": 1444832200, "creation_date": 1444832200, "answer_id": 33127828, "question_id": 33125788, "link": "https://stackoverflow.com/questions/33125788/make-js-erb-file-to-work-without-ajax-ruby-on-rails-4/33127828#33127828", "title": "Make js.erb file to work without ajax Ruby on Rails 4", "body": "<p>I'd try to help you. You can put your ajax into your <code>application.js</code>. For make it clean, you have to create one function into document ready. Document ready function will be active when the page have already done to load.</p>\n\n<pre><code>$( document ).ready(function() {\n    callAjaxCustomerIndex(location.pathname);\n});\n\nfunction callAjaxCustomerIndex(current_url) {\n  if (current_url == \"/customers\")\n    $.ajax({\n        url: \"/customers\",\n        async: false,\n        method: \"GET\",\n        data: { \"place_id\" : place[\"place_id\"] },\n        success: function(data){\n                 alert('success');\n             }\n         });\n         infoWindow.open(map, marker);\n         buildIWContent(place);\n    });\n}\n</code></pre>\n\n<p>This ajax request will be send when <code>location.pathname</code> is \"customers\". I hope this help you.</p>\n"}], "owner": {"reputation": 2278, "user_id": 3728916, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Zmke4.jpg?s=128&g=1", "display_name": "ImranNaqvi", "link": "https://stackoverflow.com/users/3728916/imrannaqvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 708, "favorite_count": 0, "accepted_answer_id": 33125991, "answer_count": 2, "score": 2, "last_activity_date": 1444832200, "creation_date": 1444826961, "question_id": 33125788, "link": "https://stackoverflow.com/questions/33125788/make-js-erb-file-to-work-without-ajax-ruby-on-rails-4", "title": "Make js.erb file to work without ajax Ruby on Rails 4", "body": "<p>I have a view \n<br><strong>index.html.erb</strong> -><br>\n<code>link_to \"click me \" , 'customers/index' , :remote =&gt; true</code> .</p>\n\n<p><strong>controller -> customers</strong></p>\n\n<pre><code>def index\nend\n</code></pre>\n\n<p><strong>index.js.erb</strong></p>\n\n<pre><code>alert('in js file');\n</code></pre>\n\n<p><code>alert</code> works absolutely fine . but what if i don't want to make ajax and i just want js.erb file to work every time customers/index is loaded . I'm new to <code>rails</code> development and my question may very basic but i could not find a solution . I know that we specify the following when we want specific type . but as far i know my case is differenct</p>\n\n<pre><code>respond_to do |format|\nformat.js\nformat.html\nend \n</code></pre>\n"}, {"tags": ["ruby", "string", "truncate", "truncated"], "comments": [{"owner": {"reputation": 24791, "user_id": 499214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PObJM.png?s=128&g=1", "display_name": "John Dvorak", "link": "https://stackoverflow.com/users/499214/john-dvorak"}, "edited": false, "score": 0, "creation_date": 1444827270, "post_id": 33125711, "comment_id": 54064049, "body": "What have you tried? Also, why do you want a 1 at the end? A subnet is denoted with zero/es at the end."}, {"owner": {"reputation": 24791, "user_id": 499214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PObJM.png?s=128&g=1", "display_name": "John Dvorak", "link": "https://stackoverflow.com/users/499214/john-dvorak"}, "edited": false, "score": 0, "creation_date": 1444827432, "post_id": 33125711, "comment_id": 54064148, "body": "I would use a regex, but finding the last index of a dot should also work, albeit less elegantly"}], "answers": [{"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1444827203, "creation_date": 1444827203, "answer_id": 33125872, "question_id": 33125711, "link": "https://stackoverflow.com/questions/33125711/ruby-programming-how-to-truncate-ip-address/33125872#33125872", "title": "Ruby programming: How to truncate IP address?", "body": "<p>Ruby is an object-oriented language, not a string-oriented or integer-oriented language. You should use objects in your program, not strings or integers. (Unless your objects <em>are</em> strings or integers, of course. But an IP address is not a string or an integer, it's an IP address.)</p>\n\n<p>Once you switch over to using IP addresses, your problem becomes trivial:</p>\n\n<pre><code>require 'ipaddr'\n\nip = IPAddr.new('12.34.56.78')\n\n(ip &amp; IPAddr.new(255.255.255.0)).succ\n# =&gt; #&lt;IPAddr: IPv4:12.34.56.1/255.255.255.255&gt;\n</code></pre>\n"}], "owner": {"reputation": 371, "user_id": 4493605, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/de634ffd4d8a90ffbf4c4c6ad023e8b6?s=128&d=identicon&r=PG&f=1", "display_name": "user4493605", "link": "https://stackoverflow.com/users/4493605/user4493605"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1444827203, "creation_date": 1444826741, "last_edit_date": 1444827055, "question_id": 33125711, "link": "https://stackoverflow.com/questions/33125711/ruby-programming-how-to-truncate-ip-address", "title": "Ruby programming: How to truncate IP address?", "body": "<p>For various purposes I find myself needing to truncate an IP address, I need to alter an IP address within my program from (xx.x.x.x) to (xx.x.x.1) by changing the last number after the final \".\" in the string to the value of 1.</p>\n\n<p>I theorise that this could be achieved by either truncating the string from the very end up to the final \".\", and adding a \"1\" onto the end of it, or somehow by ordering the program to alter the string value after the final \".\" to be equal to 1 - none of which i know how to do.</p>\n\n<p>I have seen various tutorials on both truncating and altering strings in Ruby, however none seem to cover something quite as complicated.</p>\n\n<p>In short, my question:</p>\n\n<p><strong>- How do i change the value of the last number after the final \".\" in my IP address to the value of 1 (using either aforementioned method in paragraph 2)?</strong></p>\n\n<p><strong>- Will this require a variable class change from string to int etc?</strong></p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["ruby", "bash", "cygwin"], "answers": [{"tags": [], "owner": {"reputation": 2891, "user_id": 476884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ece0804e7f6ecd8ba79421938de10ab1?s=128&d=identicon&r=PG", "display_name": "Fge", "link": "https://stackoverflow.com/users/476884/fge"}, "is_accepted": false, "score": 12, "last_activity_date": 1455275003, "last_edit_date": 1495540814, "creation_date": 1455275003, "answer_id": 35360977, "question_id": 33125675, "link": "https://stackoverflow.com/questions/33125675/running-ruby-gems-with-cygwin/35360977#35360977", "title": "Running Ruby gems with Cygwin", "body": "<p>Although my answer is a bit late in this, I figure it might help someone having the same problem. </p>\n\n<p>The problem for me was, that the all ruby executables were stored in <code>~/bin</code>., which wasn't set in my cygwin path. So I changed the location of all ruby gems and their executables in my <code>~/.gemrc</code>:</p>\n\n<pre><code>gemhome: /usr/local/rubygems\ngem: --bindir /usr/bin\n</code></pre>\n\n<p>After re-installing the gems, everything worked fine from me forward. This will install all gem executables directly into <code>/usr/bin</code>. This is for sure a bit dirty when it comes to multi-user setups. </p>\n\n<p>If you require a proper multi-user setup, the better way would be to adjust the <code>PATH</code> to point to <code>~./bin</code> isntead.</p>\n\n<p>Further readings:</p>\n\n<ul>\n<li><a href=\"https://www.cygwin.com/ml/cygwin/2014-11/msg00377.html\" rel=\"nofollow noreferrer\">Default location of executables on Mailinglist</a> </li>\n<li><a href=\"https://stackoverflow.com/questions/333508/can-gem-install-be-configured-to-install-executables-outside-usr-bin-by-defa\">Change location of executables directory</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 827, "user_id": 535071, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4e4c10f290b8ad284a353dc76a8297ab?s=128&d=identicon&r=PG", "display_name": "drkvogel", "link": "https://stackoverflow.com/users/535071/drkvogel"}, "is_accepted": false, "score": 7, "last_activity_date": 1551787554, "last_edit_date": 1551787554, "creation_date": 1464454152, "answer_id": 37501558, "question_id": 33125675, "link": "https://stackoverflow.com/questions/33125675/running-ruby-gems-with-cygwin/37501558#37501558", "title": "Running Ruby gems with Cygwin", "body": "<p>You could just add the following to your <code>.bashrc</code> or similar:</p>\n\n<pre><code>export PATH=$PATH:~/bin\n</code></pre>\n\n<p>and do <code>source ~/.bashrc</code> to add it to the path immediately.</p>\n"}], "owner": {"reputation": 101, "user_id": 4580715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b6e09de53ec6f835708eea1ae23a703?s=128&d=identicon&r=PG", "display_name": "lopert", "link": "https://stackoverflow.com/users/4580715/lopert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6389, "favorite_count": 3, "answer_count": 2, "score": 10, "last_activity_date": 1551787554, "creation_date": 1444826664, "last_edit_date": 1495541831, "question_id": 33125675, "link": "https://stackoverflow.com/questions/33125675/running-ruby-gems-with-cygwin", "title": "Running Ruby gems with Cygwin", "body": "<p>I am using Cygwin with the cygwin'd version of ruby on Windows.</p>\n\n<pre><code>$ ruby -v\nruby 2.2.2p95 (2015-04-13 revision 50295) [x86_64-cygwin]\n</code></pre>\n\n<p>After successfully installing rspec (gem install rspec), I try running the basic init command (rspec --init) to get started, but I get a bash command not found message.</p>\n\n<pre><code>$ rspec --init\n-bash: rspec: command not found\n</code></pre>\n\n<p>I'm guessing this is happening because there is no \"rspec\" file under my C:\\cygwin64\\bin directory (as there is \"ruby\",\"irb\", etc. files that cygwin must look at when commands are typed into it).</p>\n\n<p>Looking through my cygwin directories, I can see the rspec \"exe\" file under \"C:\\cygwin64\\home\\username\\.gem\\ruby\\gems\\rspec-core-3.3.2\\exe\". I think this means it is simply a matter of adding this file to cygwin's path, but I have not been able to find a good example of this. Ideally the solution would handle this gem (rspec) and all future installs without having to \"hard-code\" the path everytime.</p>\n\n<p>Looking at my \"gem environment\", it seems like the installed gems are already under my \"GEM PATHS\". It seems like there's a disconnect between this and where Cygwin is looking.</p>\n\n<pre><code>$ gem environment\nRubyGems Environment:\n  - RUBYGEMS VERSION: 2.4.7\n  - RUBY VERSION: 2.2.2 (2015-04-13 patchlevel 95) [x86_64-cygwin]\n  - INSTALLATION DIRECTORY: /home/username/.gem/ruby\n  - RUBY EXECUTABLE: /usr/bin/ruby.exe\n  - EXECUTABLE DIRECTORY: /home/username/bin\n  - SPEC CACHE DIRECTORY: /home/username/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-cygwin\n  - GEM PATHS:\n     - /home/username/.gem/ruby\n     - /usr/share/gems\n     - /usr/local/share/gems\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - /usr/local/bin\n     - /usr/bin\n     ...\n</code></pre>\n\n<p>The closest thing I found in my searching was another StackOverflow question here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/8707697/what-version-of-ruby-use-with-cygwin\">What version of ruby use with cygwin?</a></p>\n\n<p>but from what I understand of the solution, it is going to look for files with the .bat extension. Running parts of it in my cygwin to test it out doesn't produce useful results.</p>\n\n<p>Any tips on making cygwin line up with what I'm seeing in gem environment?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ruby-on-rails-4", "reactjs"], "answers": [{"comments": [{"owner": {"reputation": 1506, "user_id": 2831700, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5e40a909ecdd6e94a32e120c0044ac9d?s=128&d=identicon&r=PG", "display_name": "IvRRimUm", "link": "https://stackoverflow.com/users/2831700/ivrrimum"}, "edited": false, "score": 1, "creation_date": 1444827378, "post_id": 33125828, "comment_id": 54064115, "body": "That did the trick, i got another error, but i think i will just remove the gem and install newest react version manualy. Thanks for the response!!!"}], "tags": [], "owner": {"reputation": 69012, "user_id": 367138, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L9Q9v.png?s=128&g=1", "display_name": "Oleksandr T.", "link": "https://stackoverflow.com/users/367138/oleksandr-t"}, "is_accepted": true, "score": 28, "last_activity_date": 1558345127, "last_edit_date": 1558345127, "creation_date": 1444827080, "answer_id": 33125828, "question_id": 33125669, "link": "https://stackoverflow.com/questions/33125669/uncaught-referenceerror-reactdom-is-not-defined/33125828#33125828", "title": "Uncaught ReferenceError: ReactDOM is not defined", "body": "<p><code>ReactDOM</code> available since version <strong>0.14.0</strong>, so you need to use <code>React.render</code> (because you have a React version <strong>0.13.3</strong>) instead, </p>\n\n<pre><code>setInterval(function() {\n  React.render(\n    &lt;HelloWorld date={new Date()} /&gt;,\n    document.getElementById('example')\n  );\n}, 500);\n</code></pre>\n\n<p>or upgrade your <code>React</code> version and include <code>ReactDOM</code></p>\n\n<blockquote>\n  <p><a href=\"https://facebook.github.io/react/blog/2015/10/07/react-v0.14.html\" rel=\"nofollow noreferrer\">Changes in React 0.14</a></p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 318, "user_id": 1988866, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2bc43e9cb36f0b8934d79386aebdebf8?s=128&d=identicon&r=PG", "display_name": "Grisk", "link": "https://stackoverflow.com/users/1988866/grisk"}, "edited": false, "score": 0, "creation_date": 1461177157, "post_id": 36379542, "comment_id": 61084877, "body": "Something strange is happening here.  I&#39;m not sure that this should be correct based on the tutorial available (<a href=\"https://facebook.github.io/react/docs/tutorial.html\" rel=\"nofollow noreferrer\">facebook.github.io/react/docs/tutorial.html</a>) but my app actually started working when I changed ReactDom to ReactDOM when using 15.0.1 and ReactDom 15.0.1."}, {"owner": {"reputation": 641, "user_id": 1656637, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/02N1F.jpg?s=128&g=1", "display_name": "Gilad Barner", "link": "https://stackoverflow.com/users/1656637/gilad-barner"}, "edited": false, "score": 5, "creation_date": 1465399949, "post_id": 36379542, "comment_id": 62887679, "body": "Unbelievable. Just spent an hour tearing my hair out making wrong assumptions as to why SystemJS (that&#39;s what I was using) was telling me ReactDom was undefined. Finally saw this answer, replaced the spelling to ReactDOM, and it works...Oh boy."}, {"owner": {"reputation": 3736, "user_id": 505355, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/29206deff8d175c2f1a9b7b450cf4262?s=128&d=identicon&r=PG", "display_name": "Chandresh M", "link": "https://stackoverflow.com/users/505355/chandresh-m"}, "edited": false, "score": 0, "creation_date": 1558442906, "post_id": 36379542, "comment_id": 99096024, "body": "Perfect click boss!"}, {"owner": {"reputation": 617, "user_id": 1384545, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/1CSvU.jpg?s=128&g=1", "display_name": "Harlin", "link": "https://stackoverflow.com/users/1384545/harlin"}, "edited": false, "score": 0, "creation_date": 1565312445, "post_id": 36379542, "comment_id": 101323712, "body": "Very common error. I&#39;ve done this many times with ReactDOM. Watch out for it."}], "tags": [], "owner": {"reputation": 2987, "user_id": 1333744, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/tl2m3.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/1333744/adam"}, "is_accepted": false, "score": 77, "last_activity_date": 1589660503, "last_edit_date": 1589660503, "creation_date": 1459636974, "answer_id": 36379542, "question_id": 33125669, "link": "https://stackoverflow.com/questions/33125669/uncaught-referenceerror-reactdom-is-not-defined/36379542#36379542", "title": "Uncaught ReferenceError: ReactDOM is not defined", "body": "<p>It may be the spelling issue - it is <code>ReactDOM</code>, not <code>ReactDom</code>.</p>\n\n<p>This has changed over time with the new release of React</p>\n"}, {"tags": [], "owner": {"reputation": 6050, "user_id": 671575, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/42c0a00d0cce4e810c026ecff4beda96?s=128&d=identicon&r=PG", "display_name": "Seppo Ervi&#228;l&#228;", "link": "https://stackoverflow.com/users/671575/seppo-ervi%c3%a4l%c3%a4"}, "is_accepted": false, "score": 8, "last_activity_date": 1484667240, "creation_date": 1484667240, "answer_id": 41701115, "question_id": 33125669, "link": "https://stackoverflow.com/questions/33125669/uncaught-referenceerror-reactdom-is-not-defined/41701115#41701115", "title": "Uncaught ReferenceError: ReactDOM is not defined", "body": "<p>Make sure that you've included <code>react-dom.js</code>. You can add it from CDN or use js toolchain of your choice.</p>\n\n<p><a href=\"https://facebook.github.io/react/docs/installation.html#using-a-cdn\" rel=\"noreferrer\">Installing React - using a CDN</a></p>\n\n<pre><code>&lt;script src=\"https://unpkg.com/react@15/dist/react.js\"&gt;&lt;/script&gt;\n&lt;script src=\"https://unpkg.com/react-dom@15/dist/react-dom.js\"&gt;&lt;/script&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 307, "user_id": 1299229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d93df303029ad8617fa0db4b82ec2e87?s=128&d=identicon&r=PG&f=1", "display_name": "Kay", "link": "https://stackoverflow.com/users/1299229/kay"}, "is_accepted": false, "score": 15, "last_activity_date": 1531843595, "creation_date": 1531843595, "answer_id": 51385901, "question_id": 33125669, "link": "https://stackoverflow.com/questions/33125669/uncaught-referenceerror-reactdom-is-not-defined/51385901#51385901", "title": "Uncaught ReferenceError: ReactDOM is not defined", "body": "<p>You have to import it </p>\n\n<pre><code>import ReactDOM from 'react-dom';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1414, "user_id": 10907720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cdf9ca05adf76596beeaaae617056c3?s=128&d=identicon&r=PG", "display_name": "Anand Raja", "link": "https://stackoverflow.com/users/10907720/anand-raja"}, "is_accepted": false, "score": 0, "last_activity_date": 1590411462, "creation_date": 1590411462, "answer_id": 62002885, "question_id": 33125669, "link": "https://stackoverflow.com/questions/33125669/uncaught-referenceerror-reactdom-is-not-defined/62002885#62002885", "title": "Uncaught ReferenceError: ReactDOM is not defined", "body": "<p>To make it work properly, you have to do 3 things.</p>\n\n<ol>\n<li>Import the CDNs, necessary for the developement(Say react and react-dom for web development)</li>\n</ol>\n\n\n\n<pre><code>&lt;script crossorigin src=\"https://unpkg.com/react-dom@16/umd/react-dom.development.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<ol start=\"2\">\n<li><p>install <code>babel-cli</code> . It is needed for the compilation of JSX into vanila js</p></li>\n<li><p>change the typo in your code, </p></li>\n</ol>\n\n<p>it is <code>ReactDOM</code> , not RaactDOM</p>\n"}], "owner": {"reputation": 1506, "user_id": 2831700, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5e40a909ecdd6e94a32e120c0044ac9d?s=128&d=identicon&r=PG", "display_name": "IvRRimUm", "link": "https://stackoverflow.com/users/2831700/ivrrimum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73067, "favorite_count": 10, "accepted_answer_id": 33125828, "answer_count": 5, "score": 47, "last_activity_date": 1590411462, "creation_date": 1444826648, "last_edit_date": 1480209286, "question_id": 33125669, "link": "https://stackoverflow.com/questions/33125669/uncaught-referenceerror-reactdom-is-not-defined", "title": "Uncaught ReferenceError: ReactDOM is not defined", "body": "<p>So i have Rails applications, i installed react-rails gem, set it up and try to run test application.</p>\n\n<p>Freshly installed, when i tryed to run hello world program, this error hapened: </p>\n\n<blockquote>\n  <p>Uncaught ReferenceError: ReactDOM is not defined</p>\n</blockquote>\n\n<p>This is my react: </p>\n\n<pre><code>var HelloWorld = React.createClass({\n  render: function() {\n    return (\n      &lt;p&gt;\n        Hello, &lt;input type=\"text\" placeholder=\"Your name here\" /&gt;!\n        It is {this.props.date.toTimeString()}\n      &lt;/p&gt;\n    );\n  }\n});\n\nsetInterval(function() {\n  ReactDOM.render(\n    &lt;HelloWorld date={new Date()} /&gt;,\n    document.getElementById('example')\n  );\n}, 500);\n</code></pre>\n\n<p>Its saved inside /app/assets/javascripts/components/test.js.jsx file.</p>\n\n<p>Rails 4.2.4 With Ruby 2.2.3</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "sorting"], "comments": [{"owner": {"reputation": 1713, "user_id": 2545197, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zIDXo.jpg?s=128&g=1", "display_name": "Abhinay", "link": "https://stackoverflow.com/users/2545197/abhinay"}, "edited": false, "score": 0, "creation_date": 1444840814, "post_id": 33124910, "comment_id": 54073590, "body": "Hey Usman, you should just accept one as a solution, to let other people know that you found your solution."}], "answers": [{"tags": [], "owner": {"reputation": 978, "user_id": 3797480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZuuZI.jpg?s=128&g=1", "display_name": "nsave", "link": "https://stackoverflow.com/users/3797480/nsave"}, "is_accepted": false, "score": 1, "last_activity_date": 1444825495, "last_edit_date": 1444825495, "creation_date": 1444824956, "answer_id": 33125046, "question_id": 33124910, "link": "https://stackoverflow.com/questions/33124910/sort-data-in-ruby-on-rails/33125046#33125046", "title": "Sort data in ruby on rails", "body": "<pre><code>User.joins(:ratings).where(\"ratings.rate &gt; ?\", 4).order('ratings.rate')\n</code></pre>\n\n<p>And if you want to find associated products then this should work:</p>\n\n<pre><code>Product.joins(user: :ratings).where(\"ratings.rate &gt; ?\", 4).order('ratings.rate')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1713, "user_id": 2545197, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zIDXo.jpg?s=128&g=1", "display_name": "Abhinay", "link": "https://stackoverflow.com/users/2545197/abhinay"}, "is_accepted": true, "score": 3, "last_activity_date": 1444825035, "last_edit_date": 1495535411, "creation_date": 1444825035, "answer_id": 33125067, "question_id": 33124910, "link": "https://stackoverflow.com/questions/33124910/sort-data-in-ruby-on-rails/33125067#33125067", "title": "Sort data in ruby on rails", "body": "<p><code>User.joins(:ratings).where(\"ratings.rate &gt; ?\", 4).order('ratings DESC')</code></p>\n\n<p>I am not sure what <code>includes(:ratings)</code> doing at the last.\nShould just use something like this and it should probably work:</p>\n\n<p><code>User.includes(:ratings).where(\"ratings.rate &gt; ?\", 4).order('ratings DESC')</code></p>\n\n<p>Reference: <a href=\"https://stackoverflow.com/questions/10597135/issue-in-order-clause-and-limit-in-active-record\">issue in order clause and limit in active record</a></p>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 750, "favorite_count": 0, "accepted_answer_id": 33125067, "answer_count": 2, "score": 0, "last_activity_date": 1444829429, "creation_date": 1444824557, "question_id": 33124910, "link": "https://stackoverflow.com/questions/33124910/sort-data-in-ruby-on-rails", "title": "Sort data in ruby on rails", "body": "<p>Association is like</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n\nhas_many :products\nhas_many :ratings\n</code></pre>\n\n<p>I want to sort products according to user ratings.\nLet suppose I want to sort all those product whose ratings is greater than 4.\nI cant find any way to do that.</p>\n\n<p>I do something like</p>\n\n<pre><code>User.joins(:ratings).where(\"ratings.rate &gt; ?\", 4).includes(:ratings)\n</code></pre>\n\n<p>From that I get all user whose ratings is greater than 4 but how join with product and sort them?</p>\n"}, {"tags": ["ruby", "dynamic-variables"], "comments": [{"owner": {"reputation": 978, "user_id": 3797480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZuuZI.jpg?s=128&g=1", "display_name": "nsave", "link": "https://stackoverflow.com/users/3797480/nsave"}, "edited": false, "score": 0, "creation_date": 1444823041, "post_id": 33124132, "comment_id": 54061226, "body": "First try to find out name of the hash instance variable: <code>pdc.instance_variables</code>"}], "answers": [{"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 1, "last_activity_date": 1444823494, "creation_date": 1444823494, "answer_id": 33124522, "question_id": 33124132, "link": "https://stackoverflow.com/questions/33124132/dynamic-variables-to-access-class-methods-in-ruby/33124522#33124522", "title": "Dynamic Variables to access class methods in Ruby", "body": "<p>You could either try to call the getter (preferably, since it honors encapsulation):</p>\n\n<pre><code>pdc = PoorlyDesignedClass.new\n1.upto(number_of_things.times do |i|\n  pdc.public_send(:\"thing#{i}\").bar = value[i]\nend\n</code></pre>\n\n<p>or get the instance variable (less preferred, since it breaks encapsulation):</p>\n\n<pre><code>pdc = PoorlyDesignedClass.new\n1.upto(number_of_things) do |i|\n  pdc.instance_variable_get(:\"@thing#{i}\").bar = value[i]\nend\n</code></pre>\n\n<p>So, you were on the right track, there were just two problems with your code: instance variable names start with an <code>@</code> sign, and <code>.</code> is not a legal character in an identifier.</p>\n"}, {"tags": [], "owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "is_accepted": false, "score": 0, "last_activity_date": 1444823561, "creation_date": 1444823561, "answer_id": 33124551, "question_id": 33124132, "link": "https://stackoverflow.com/questions/33124132/dynamic-variables-to-access-class-methods-in-ruby/33124551#33124551", "title": "Dynamic Variables to access class methods in Ruby", "body": "<p>You're using <a href=\"http://ruby-doc.org/core/Object.html#method-i-instance_variable_set\" rel=\"nofollow\"><code>Object#instance_variable_set</code></a> incorrectly. The first argument must be a string or a symbol representing the name of an instance variable including the <code>@</code> prefix: e.g. <code>\"@thing{i}\"</code>. However you actually want to <em>get</em> the value of an instance variable and then send <code>#bar=</code> to it. That can be done with <a href=\"http://ruby-doc.org/core/Object.html#method-i-instance_variable_get\" rel=\"nofollow\"><code>Object#instance_variable_get</code></a>:</p>\n\n<pre><code>1.upto(numberOfThings) { |i| pdc.instance_variable_get(\"@thing#{i}\").bar = value[i] }\n</code></pre>\n\n<p>That's a bit long and since <code>attr_acessor :thingX</code> defines getter methods, it's usually preferable to call them with <a href=\"http://ruby-doc.org/core/Object.html#method-i-public_send\" rel=\"nofollow\"><code>Object#public_send</code></a> instead of directly accessing the instance variable (a getter method might do something else than just returning a value):</p>\n\n<pre><code>1.upto(numberOfThings) { |i| pdc.public_send(\"thing#{i}\").bar = value[i] }\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 822905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d2ae7b95c5852c67080226c54217ed7?s=128&d=identicon&r=PG", "display_name": "mbond", "link": "https://stackoverflow.com/users/822905/mbond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 33124522, "answer_count": 2, "score": 0, "last_activity_date": 1444823561, "creation_date": 1444822140, "question_id": 33124132, "link": "https://stackoverflow.com/questions/33124132/dynamic-variables-to-access-class-methods-in-ruby", "title": "Dynamic Variables to access class methods in Ruby", "body": "<p>Working in Ruby, we have to use a 3rd party Framework, which has a class setup something like this:</p>\n\n<pre><code>class Foo \n\n    attr_accessor :bar\n\n    def initialize() \n    end\n\nend\n\nclass Poorly_Designed_Class\n\n    attr_accessor :thing1\n    attr_accessor :thing2\n    attr_accessor :thing3\n    attr_accessor :thing4\n    attr_accessor :thing5\n\n    # through :thing_n .. number defined at runtime\n\n    def initialize()\n        @thing1 = Foo.new\n        @thing2 = Foo.new\n        @thing3 = Foo.new\n        @thing4 = Foo.new\n        @thing5 = Foo.new\n    end\n\nend\n</code></pre>\n\n<p>I don't know how many \"things\" there are until run time. there could be 5 or their could be 50. </p>\n\n<p>What I would like to do is something like:</p>\n\n<pre><code>pdc = Poorly_Designed_Class.new\nfor i in 0..numberOfThings do\n    pdc.\"thing#{i}\".bar = value[i]\nend\n</code></pre>\n\n<p>The above doesn't work. </p>\n\n<p>I've also tried accessing it via:</p>\n\n<pre><code>instance_variable_set(\"pdc.thing#{i}.bar\",value)\n</code></pre>\n\n<p>I understand that the class should be using an array or hash. Unfortunately I can't do anything about how the class is designed and we have to use it.</p>\n\n<p>Is what i'm trying to do even possible? </p>\n"}, {"tags": ["ruby", "docker"], "comments": [{"owner": {"reputation": 5621, "user_id": 3692399, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/b24bx.jpg?s=128&g=1", "display_name": "askb", "link": "https://stackoverflow.com/users/3692399/askb"}, "edited": false, "score": 0, "creation_date": 1444821829, "post_id": 33123834, "comment_id": 54060476, "body": "Its possible PATH is not set correctly use the complete path of the binary <code>&#47;usr&#47;bin&#47;ruby</code> or try <code>&#47;bin&#47;sh -c &quot;&#47;usr&#47;bin&#47;ruby  -e &quot;puts &#39;Hello&#39;&quot;</code> make sure the path is correct."}], "answers": [{"comments": [{"owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "edited": false, "score": 0, "creation_date": 1444978515, "post_id": 33124258, "comment_id": 54137142, "body": "Thanks, I just tried to run: <code>docker run -it jikkujose&#47;apple whoami</code> and got <code>root</code> as the response; the same user when I login to this container. It seems the problem is that the <code>PATH</code> isn&#39;t getting set. If I am running the container from command line how can I endure path is set?"}, {"owner": {"reputation": 326, "user_id": 1950048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84ce77a065e55b98f3181c029ff3e1c0?s=128&d=identicon&r=PG", "display_name": "Snorre", "link": "https://stackoverflow.com/users/1950048/snorre"}, "reply_to_user": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "edited": false, "score": 0, "creation_date": 1444982388, "post_id": 33124258, "comment_id": 54139082, "body": "Added minimal viable Dockerfile in the answer above."}, {"owner": {"reputation": 326, "user_id": 1950048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84ce77a065e55b98f3181c029ff3e1c0?s=128&d=identicon&r=PG", "display_name": "Snorre", "link": "https://stackoverflow.com/users/1950048/snorre"}, "reply_to_user": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "edited": false, "score": 0, "creation_date": 1444985479, "post_id": 33124258, "comment_id": 54140646, "body": "Added example of how you can specify environment variables as options to the docker run command."}], "tags": [], "owner": {"reputation": 326, "user_id": 1950048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84ce77a065e55b98f3181c029ff3e1c0?s=128&d=identicon&r=PG", "display_name": "Snorre", "link": "https://stackoverflow.com/users/1950048/snorre"}, "is_accepted": true, "score": 2, "last_activity_date": 1444985426, "last_edit_date": 1444985426, "creation_date": 1444822541, "answer_id": 33124258, "question_id": 33123834, "link": "https://stackoverflow.com/questions/33123834/cannot-run-ruby-commands-while-running-docker/33124258#33124258", "title": "Cannot run ruby commands while running Docker", "body": "<p>That is probably because the ruby executable is not in the path of the user running the container process (i.e. <code>root</code> or the user specified with the USER command in the Dockerfile). The following two options might help you with your problem.</p>\n\n<ol>\n<li>Specify the full path to the ruby binary when running the container. <code>docker run -it jikkujose/apple /usr/bin/ruby -e \"puts 'Hello'\"</code></li>\n<li>Add <code>/usr/bin</code> to the path in the Dockerfile <code>ENV PATH /usr/bin:$PATH</code> I'm not 100% sure this works, but the ENV operator in the Dockerfile should add this environment variable to the container. Source <a href=\"https://docs.docker.com/reference/builder/\" rel=\"nofollow\">docker.com</a>.</li>\n</ol>\n\n<p>Alternatively you can specify <code>/usr/bin/ruby</code> as the <code>ENTRYPOINT</code> in your Dockerfile. That is: <code>ENTRYPOINT [\"/usr/bin/ruby\"]</code>. Then you can run <code>docker run -it jikkujose/apple -e \"puts 'Hello'\"</code> Note that this causes  the container to run /usr/bin/ruby as default, and that you need to override this entrypoint if you want to run <code>ls</code> or other commands.</p>\n\n<p>Edit:</p>\n\n<p>Minimal viable <code>Dockerfile</code> solution is given below. Let us assume that /usr/bin is not already in the $PATH environment variable, which it is in the Ubuntu image.</p>\n\n<pre><code>FROM ubuntu:latest\n\nRUN apt-get install ruby -y\n\nENV PATH /usr/bin:$PATH\n\nCMD [\"bash\"]\n</code></pre>\n\n<p>Running <code>docker run --rm -it pathtest ruby -e \"puts 'Hello'\"</code> now outputs <code>Hello</code> in the terminal.</p>\n\n<p>Edit 2:</p>\n\n<p>Ah, you built the image with Docker commit. You can send in environment variables when running the <code>docker run</code> command. To do this simply run docker like so:</p>\n\n<pre><code>docker run --rm -e \"PATH=/usr/bin\" -it pathtest ruby -e \"puts 'Hello'\"\n</code></pre>\n\n<p>The -e option for <code>docker run</code> lets you specify or override an environment variable inside the container. Note that you will have to provide all paths you want $PATH to equal with this method.</p>\n\n<p>You may also want to simply edit the PATH variable inside the container and then recommit the container so that /usr/bin is present in the $PATH environment variable stored in the container.</p>\n"}, {"comments": [{"owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "edited": false, "score": 0, "creation_date": 1444978631, "post_id": 33124487, "comment_id": 54137196, "body": "Providing <code>PATH</code> of the Ruby executable does indeed work. But I would like to know why the <code>PATH</code> isn&#39;t getting set. Curiously, <code>running: docker run -it jikkujose&#47;apple echo $PATH</code> gives my own machine&#39;s <code>PATH</code> variable rather than the container&#39;s! Why is it so?"}, {"owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "edited": false, "score": 0, "creation_date": 1444978669, "post_id": 33124487, "comment_id": 54137222, "body": "Interestingly, when I login and echo the <code>PATH</code> variable I get it right too!"}, {"owner": {"reputation": 5621, "user_id": 3692399, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/b24bx.jpg?s=128&g=1", "display_name": "askb", "link": "https://stackoverflow.com/users/3692399/askb"}, "reply_to_user": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "edited": false, "score": 0, "creation_date": 1444979039, "post_id": 33124487, "comment_id": 54137391, "body": "Then you may want to check the dockerfile, if your PATH is getting overwritten while building the image. Next check the base images docker file just to confirm."}, {"owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "edited": false, "score": 0, "creation_date": 1444979709, "post_id": 33124487, "comment_id": 54137723, "body": "I don&#39;t have a Dockerfile as I created this image via <code>docker commit</code>; any way to have the <code>PATH</code> via command line?"}], "tags": [], "owner": {"reputation": 5621, "user_id": 3692399, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/b24bx.jpg?s=128&g=1", "display_name": "askb", "link": "https://stackoverflow.com/users/3692399/askb"}, "is_accepted": false, "score": 1, "last_activity_date": 1444823334, "creation_date": 1444823334, "answer_id": 33124487, "question_id": 33123834, "link": "https://stackoverflow.com/questions/33123834/cannot-run-ruby-commands-while-running-docker/33124487#33124487", "title": "Cannot run ruby commands while running Docker", "body": "<p>Its possible <code>PATH</code> is not set correctly, therefore try </p>\n\n<blockquote>\n  <p>docker run -it jikkujose/apple /usr/bin/ruby -e \"puts 'Hello'\"</p>\n</blockquote>\n\n<p>or </p>\n\n<blockquote>\n  <p>docker run -it jikkujose/apple /bin/sh -c \"/usr/bin/ruby -e \"puts\n  'Hello'\"</p>\n</blockquote>\n"}], "owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1626, "favorite_count": 0, "accepted_answer_id": 33124258, "answer_count": 2, "score": 2, "last_activity_date": 1444985426, "creation_date": 1444821269, "question_id": 33123834, "link": "https://stackoverflow.com/questions/33123834/cannot-run-ruby-commands-while-running-docker", "title": "Cannot run ruby commands while running Docker", "body": "<p>I have an image I have built with Ruby in it. I am able to run Ruby commands, <code>irb</code> and <code>install gems</code> in the image while running by:</p>\n\n<pre><code>docker run -it jikkujose/apple\n</code></pre>\n\n<p>I can also do this to list the files in the container:</p>\n\n<pre><code>docker run -it jikkujose/apple ls\n</code></pre>\n\n<p>But when I try to run Ruby commands, it fails:</p>\n\n<pre><code>docker run -it jikkujose/apple ruby -e \"puts 'Hello'\"\n</code></pre>\n\n<p>Error: </p>\n\n<pre><code>Error response from daemon: Cannot start container c888aa8d2c7510a672608744a69f00c5feda4509742d54ea2896b7ebce76c16d: [8] System error: exec: \"ruby\": executable file not found in $PATH\n</code></pre>\n"}, {"tags": ["ruby", "rubyxl"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1444821333, "post_id": 33123472, "comment_id": 54060178, "body": "I feel like there&#39;s an r&amp;b song with the same title but can&#39;t put my finger on it..."}], "answers": [{"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 1, "last_activity_date": 1444837060, "creation_date": 1444837060, "answer_id": 33129722, "question_id": 33123472, "link": "https://stackoverflow.com/questions/33123472/rubyxl-copying-cells-between-the-sheets/33129722#33129722", "title": "RubyXL - Copying cells between the sheets", "body": "<p>Can't help you with RubyXL but here is a tested sript that does just that.\nYou will need to be on Windows though.</p>\n\n<pre><code>require 'win32ole'\n\nxl=WIN32OLE::new('Excel.Application')\nxl.Visible=0 #hide excel, 1 = show\n\nxl.Workbooks.Open('c:\\\\temp\\\\Map1.xlsx') #will open a file\nsheet = xl.sheets(1)\nsheet.activate #activate the sheet you want\nxlPasteValues = -4163 #(&amp;HFFFFEFBD)\nxlPasteSpecialOperationNone = -4142 #(&amp;HFFFFEFD2)\nxlPasteFormats = -4122 # Copied source format is pasted\nxlPasteValuesAndNumberFormats = 12\nsheet.Range(\"A1:A2\").Copy\nsheet.Range(\"B1:B2\").PasteSpecial(xlPasteValuesAndNumberFormats)\nsheet.Range(\"B1:B2\").PasteSpecial(xlPasteFormats)\nxl.ActiveWorkbook.Save\nxl.ActiveWorkbook.Close()\nxl.Quit\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1444839548, "creation_date": 1444839548, "answer_id": 33130597, "question_id": 33123472, "link": "https://stackoverflow.com/questions/33123472/rubyxl-copying-cells-between-the-sheets/33130597#33130597", "title": "RubyXL - Copying cells between the sheets", "body": "<p>Took the time to spit this out because I use RubyXL on a regular base.\nSeems there is a much better gem <a href=\"https://github.com/randym/axlsx\" rel=\"nofollow\">axlsx</a> to work with spreadsheets, more logical and much more things you can do. Here a simple example of setting and copying styles. I keep my other answer for reference because it works but has obvious drawnbacks.</p>\n\n<pre><code>require 'axlsx'\n\np = Axlsx::Package.new\nwb = p.workbook\n\nwb.add_worksheet(:name =&gt; \"Basic Worksheet\") do |sheet|\n  sheet.add_row [\"First Column\", \"Second\", \"Third\"]\n  sheet.add_row [1, 2, 3]\n  sheet.add_row ['     preserving whitespace']\n  thin_border = Axlsx::STYLE_THIN_BORDER\n  sheet['A1:A1'].first.style = thin_border\n  sheet['A1:C1'].each{|cell|cell.style = sheet['A1'].style}\nend\n\np.serialize('./simple.xlsx')\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 3471671, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/6806252b58a2d2e79212188e46833db2?s=128&d=identicon&r=PG&f=1", "display_name": "user3471671", "link": "https://stackoverflow.com/users/3471671/user3471671"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1595, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1444839548, "creation_date": 1444820101, "question_id": 33123472, "link": "https://stackoverflow.com/questions/33123472/rubyxl-copying-cells-between-the-sheets", "title": "RubyXL - Copying cells between the sheets", "body": "<p>How can I copy a cell from one sheet (or worksheet) with all styles (not only value) and paste to another? \nThanks for answer.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "metaprogramming"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1444818634, "post_id": 33122559, "comment_id": 54058555, "body": "You can&#39;t access <code>a</code> from outside its scope. it&#39;s called &quot;local variable&quot; for a reason."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1444821647, "post_id": 33123202, "comment_id": 54060360, "body": "No need for that <code>method(:initialize)</code> business. Just <code>send</code> it."}, {"owner": {"reputation": 246, "user_id": 4199403, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uOAxBjjXN8o/AAAAAAAAAAI/AAAAAAAAIUE/1ZhuwQgFiQw/photo.jpg?sz=128", "display_name": "poctek", "link": "https://stackoverflow.com/users/4199403/poctek"}, "edited": false, "score": 0, "creation_date": 1444825915, "post_id": 33123202, "comment_id": 54063109, "body": "Thank you very much, it helped!"}], "tags": [], "owner": {"reputation": 3840, "user_id": 1054638, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/39071d37bc0d2ca9954bf865e7ce0167?s=128&d=identicon&r=PG", "display_name": "Harsh Gupta", "link": "https://stackoverflow.com/users/1054638/harsh-gupta"}, "is_accepted": false, "score": 3, "last_activity_date": 1444821054, "last_edit_date": 1444821054, "creation_date": 1444819358, "answer_id": 33123202, "question_id": 33122559, "link": "https://stackoverflow.com/questions/33122559/how-to-get-the-values-from-outside-the-class-ruby/33123202#33123202", "title": "How to get the values from outside the class ruby", "body": "<p>I believe you are talking about <a href=\"http://ruby-metaprogramming.rubylearning.com/html/Exercise_1.html\" rel=\"nofollow\">this exercise</a>. </p>\n\n<p>I am not sure how you could access a local scoped variable from outside. It's called local scoped for a reason. For others:</p>\n\n<p>After the class is defined, try:</p>\n\n<pre><code>A.instance_variable_get(:@a) # =&gt; 1\nA.class_variable_get(:@@a) # =&gt; 2\nA.new.instance_variable_get(:@a) # =&gt; 11\nA.class_variable_get(:@@a) # =&gt; 22\n</code></pre>\n\n<p>Edit: I played around a bit with this code, I guess I figured it:</p>\n\n<pre><code>a = class A\n  def initialize\n    @a = 11\n    @@a = 22\n    a = 33\n  end\n  @a = 1\n  @@a = 2\n  a = 3\nend\n\nA.instance_variable_get(:@a) # =&gt; 1\nA.class_variable_get(:@@a) # =&gt; 2\na # =&gt; 3\nA.new.instance_variable_get(:@a) # =&gt; 11\nA.class_variable_get(:@@a) # =&gt; 22\nA.new.method(:initialize).call # =&gt; 33 , basically we tricked Ruby into calling initialize method again, slick huh!\n</code></pre>\n\n<p>Edit: @RossMc beat me at last line </p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1444821650, "post_id": 33123429, "comment_id": 54060366, "body": "No need for that <code>method(:initialize)</code> business. Just <code>send</code> it."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1444821724, "post_id": 33123429, "comment_id": 54060411, "body": "Also, your <code>respond_to</code> check is flawed (you check the wrong object) and unneeded (<code>initialize</code> <i>will</i> be there)"}], "tags": [], "owner": {"reputation": 406, "user_id": 4482286, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Sl_16MRc3EQ/AAAAAAAAAAI/AAAAAAAAAJ4/OjoaYnwT9HU/photo.jpg?sz=128", "display_name": "RossMc", "link": "https://stackoverflow.com/users/4482286/rossmc"}, "is_accepted": true, "score": 3, "last_activity_date": 1444820774, "last_edit_date": 1444820774, "creation_date": 1444819994, "answer_id": 33123429, "question_id": 33122559, "link": "https://stackoverflow.com/questions/33122559/how-to-get-the-values-from-outside-the-class-ruby/33123429#33123429", "title": "How to get the values from outside the class ruby", "body": "<p>When you define this class, the output will be the local scoped variable <code>3</code></p>\n\n<pre><code>class A\n  def initialize\n    @a = 11\n    @@a = 22\n    a = 33\n  end\n  @a = 1\n  @@a = 2\n  a = 3\nend        #=&gt; 3\n</code></pre>\n\n<p>You can access the instance and class variables as follows;</p>\n\n<pre><code>A.instance_variable_get(:@a) #=&gt; 1\nA.class_variable_get(:@@a)   #=&gt; 2\n\nA.new.instance_variable_get(:@a) #=&gt; 11\nA.class_variable_get(:@@a) #=&gt; 22\n</code></pre>\n\n<p>For the other value, if you call <code>initialize</code> on this class and create a new object, this will return the last expression evaluated, which will be the local variable <code>a</code></p>\n\n<pre><code>if A.respond_to?(:initialize, true)\n  A.new.method(:initialize).call} #=&gt; 33\nend\n</code></pre>\n"}], "owner": {"reputation": 246, "user_id": 4199403, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uOAxBjjXN8o/AAAAAAAAAAI/AAAAAAAAIUE/1ZhuwQgFiQw/photo.jpg?sz=128", "display_name": "poctek", "link": "https://stackoverflow.com/users/4199403/poctek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 33123429, "answer_count": 2, "score": -1, "last_activity_date": 1444821054, "creation_date": 1444817489, "question_id": 33122559, "link": "https://stackoverflow.com/questions/33122559/how-to-get-the-values-from-outside-the-class-ruby", "title": "How to get the values from outside the class ruby", "body": "<p>I'm trying to solve the exercise 1 from the <a href=\"http://ruby-metaprogramming.rubylearning.com/\" rel=\"nofollow\">http://ruby-metaprogramming.rubylearning.com/</a> but I have no idea how to get \"a\" variable from the A class and its instance.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>class A\n  def initialize\n    @a = 11\n    @@a = 22\n    a = 33\n  end\n  @a = 1\n  @@a = 2\n  a = 3\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2437, "user_id": 4058838, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/56c7770d8f5d6b9ec7a13e82fbf0a59c?s=128&d=identicon&r=PG", "display_name": "Amit Badheka", "link": "https://stackoverflow.com/users/4058838/amit-badheka"}, "edited": false, "score": 0, "creation_date": 1444817638, "post_id": 33122533, "comment_id": 54057833, "body": "In which action do you want worker category?"}, {"owner": {"reputation": 123, "user_id": 5441255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6972f5bed9fa88a53c2a742ab19c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "alex lug", "link": "https://stackoverflow.com/users/5441255/alex-lug"}, "reply_to_user": {"reputation": 2437, "user_id": 4058838, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/56c7770d8f5d6b9ec7a13e82fbf0a59c?s=128&d=identicon&r=PG", "display_name": "Amit Badheka", "link": "https://stackoverflow.com/users/4058838/amit-badheka"}, "edited": false, "score": 0, "creation_date": 1444817741, "post_id": 33122533, "comment_id": 54057905, "body": "well that&#39;s the problem. there isn&#39;t any action, i want it in the application.html.erb. I&#39;ve looked around for some other topics like these suggesting using a before_filter. but that didn&#39;t work out. So now i&#39;m stuck ..."}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 5441255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6972f5bed9fa88a53c2a742ab19c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "alex lug", "link": "https://stackoverflow.com/users/5441255/alex-lug"}, "edited": false, "score": 0, "creation_date": 1444818063, "post_id": 33122734, "comment_id": 54058145, "body": "this is giving me the same error. I actually tried &#39;workcategories&#39; before and it wasn&#39;t working :) so the issue is somewhere else. thank you."}, {"owner": {"reputation": 123, "user_id": 5441255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6972f5bed9fa88a53c2a742ab19c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "alex lug", "link": "https://stackoverflow.com/users/5441255/alex-lug"}, "edited": false, "score": 0, "creation_date": 1444818705, "post_id": 33122734, "comment_id": 54058595, "body": "hey i&#39;ve already tried this second option, the update. And this didn&#39;t work either. i&#39;m getting the same error."}, {"owner": {"reputation": 978, "user_id": 3797480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZuuZI.jpg?s=128&g=1", "display_name": "nsave", "link": "https://stackoverflow.com/users/3797480/nsave"}, "reply_to_user": {"reputation": 123, "user_id": 5441255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6972f5bed9fa88a53c2a742ab19c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "alex lug", "link": "https://stackoverflow.com/users/5441255/alex-lug"}, "edited": false, "score": 0, "creation_date": 1444820303, "post_id": 33122734, "comment_id": 54059563, "body": "@alexlug, please update the answer with the exact code you tried (including this <code>before_action</code>)"}, {"owner": {"reputation": 123, "user_id": 5441255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6972f5bed9fa88a53c2a742ab19c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "alex lug", "link": "https://stackoverflow.com/users/5441255/alex-lug"}, "edited": false, "score": 0, "creation_date": 1444848861, "post_id": 33122734, "comment_id": 54078271, "body": "In the end i went for this =&gt;   before_action :work_categories   private   def work_categories   \t@workcategory = Workcategory.all.order(&quot;created_at DESC&quot;)   end. Now that i think about it you did post an alright version, but me being a total beginner i didn&#39;t know what was up and failed to use it correctly."}], "tags": [], "owner": {"reputation": 978, "user_id": 3797480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZuuZI.jpg?s=128&g=1", "display_name": "nsave", "link": "https://stackoverflow.com/users/3797480/nsave"}, "is_accepted": false, "score": 2, "last_activity_date": 1444818154, "last_edit_date": 1444818154, "creation_date": 1444817928, "answer_id": 33122734, "question_id": 33122533, "link": "https://stackoverflow.com/questions/33122533/using-a-controller-variable-in-application-html-erb/33122734#33122734", "title": "Using a controller variable in application html.erb", "body": "<p>If we talk about <code>index</code> action, then you just forgot to use appropriate variable:</p>\n\n<pre><code>&lt;ul class=\"dropdown-menu\"&gt;\n  &lt;% @workcategories.each do |workcategory| %&gt;\n  &lt;li&gt;&lt;%= workcategory.name%&gt;&lt;/li&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>If you want to have this in all actions, then initialize <code>@workcategories</code> in <code>before_action</code>:</p>\n\n<pre><code># your_controller.rb\nbefore_action :initialize_work_categories\ndef initialize_work_categories\n  @workcategories = Workcategory.all.order(\"created_at DESC\")\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 5441255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6972f5bed9fa88a53c2a742ab19c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "alex lug", "link": "https://stackoverflow.com/users/5441255/alex-lug"}, "edited": false, "score": 0, "creation_date": 1444818915, "post_id": 33122903, "comment_id": 54058733, "body": "hello. I&#39;ve tried this and it threw : undefined method `helper_method&#39; for main:Object"}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "reply_to_user": {"reputation": 123, "user_id": 5441255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6972f5bed9fa88a53c2a742ab19c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "alex lug", "link": "https://stackoverflow.com/users/5441255/alex-lug"}, "edited": false, "score": 0, "creation_date": 1444819036, "post_id": 33122903, "comment_id": 54058806, "body": "Did you add the code to apps/controllers/application_controller.rb ?"}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "reply_to_user": {"reputation": 123, "user_id": 5441255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6972f5bed9fa88a53c2a742ab19c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "alex lug", "link": "https://stackoverflow.com/users/5441255/alex-lug"}, "edited": false, "score": 0, "creation_date": 1444819786, "post_id": 33122903, "comment_id": 54059249, "body": "That&#39;s odd. See: <a href=\"http://api.rubyonrails.org/classes/AbstractController/Helpers/ClassMethods.html#method-i-helper_method\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/AbstractController/Helpers/&hellip;</a>"}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "reply_to_user": {"reputation": 123, "user_id": 5441255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6972f5bed9fa88a53c2a742ab19c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "alex lug", "link": "https://stackoverflow.com/users/5441255/alex-lug"}, "edited": false, "score": 0, "creation_date": 1444819948, "post_id": 33122903, "comment_id": 54059352, "body": "The method needs to be defined within the ApplicationController code. I&#39;ve modified my answer to show this."}], "tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": false, "score": 0, "last_activity_date": 1444819898, "last_edit_date": 1444819898, "creation_date": 1444818453, "answer_id": 33122903, "question_id": 33122533, "link": "https://stackoverflow.com/questions/33122533/using-a-controller-variable-in-application-html-erb/33122903#33122903", "title": "Using a controller variable in application html.erb", "body": "<p>You can make a helper method work_categories and use that. Either define it directly in application_helper - or if you don't want to use helpers you can put this code in your ApplicationController</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n\n  def work_categories\n    Workcategory.all.order(\"created_at DESC\")\n  end\n  helper_method :work_categories\n\nend\n</code></pre>\n\n<p>Then in your view:</p>\n\n<pre><code>&lt;ul class=\"dropdown-menu\"&gt;\n  &lt;% work_categories.each do |workcategory| %&gt;\n    &lt;li&gt;&lt;%= workcategory.name%&gt;&lt;/li&gt;\n  &lt;% end %&gt;\n&lt;/ul&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 5441255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6972f5bed9fa88a53c2a742ab19c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "alex lug", "link": "https://stackoverflow.com/users/5441255/alex-lug"}, "edited": false, "score": 0, "creation_date": 1444819143, "post_id": 33122916, "comment_id": 54058863, "body": "This gave me &#39;undefined method `first&#39; for nil:NilClass&#39;. I&#39;ve removed that line and got back to nil class. etc ... i&#39;m thinking i&#39;m maybe not saving it right or something...."}, {"owner": {"reputation": 2437, "user_id": 4058838, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/56c7770d8f5d6b9ec7a13e82fbf0a59c?s=128&d=identicon&r=PG", "display_name": "Amit Badheka", "link": "https://stackoverflow.com/users/4058838/amit-badheka"}, "reply_to_user": {"reputation": 123, "user_id": 5441255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6972f5bed9fa88a53c2a742ab19c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "alex lug", "link": "https://stackoverflow.com/users/5441255/alex-lug"}, "edited": false, "score": 0, "creation_date": 1444819267, "post_id": 33122916, "comment_id": 54058946, "body": "I added the change.Just as a confirmation, do you have data in <code>Workcategory</code> model?"}, {"owner": {"reputation": 123, "user_id": 5441255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6972f5bed9fa88a53c2a742ab19c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "alex lug", "link": "https://stackoverflow.com/users/5441255/alex-lug"}, "edited": false, "score": 0, "creation_date": 1444819714, "post_id": 33122916, "comment_id": 54059207, "body": "hey yes thanks for the unless. I&#39;ve tried it, and although it doesn&#39;t work like i want it. Now i/we know that the work category isn&#39;t saved correctly. When i go to rails console and check, i have 3 work categories but they just don&#39;t show ... and i&#39;ve tried the before_filter and still doesn&#39;t. any ideas ?"}, {"owner": {"reputation": 2437, "user_id": 4058838, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/56c7770d8f5d6b9ec7a13e82fbf0a59c?s=128&d=identicon&r=PG", "display_name": "Amit Badheka", "link": "https://stackoverflow.com/users/4058838/amit-badheka"}, "reply_to_user": {"reputation": 123, "user_id": 5441255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6972f5bed9fa88a53c2a742ab19c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "alex lug", "link": "https://stackoverflow.com/users/5441255/alex-lug"}, "edited": false, "score": 0, "creation_date": 1444819800, "post_id": 33122916, "comment_id": 54059257, "body": "@alexlug, try <code>better_errors</code> gem for dynamic debugging"}, {"owner": {"reputation": 123, "user_id": 5441255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6972f5bed9fa88a53c2a742ab19c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "alex lug", "link": "https://stackoverflow.com/users/5441255/alex-lug"}, "edited": false, "score": 0, "creation_date": 1444820627, "post_id": 33122916, "comment_id": 54059752, "body": "ha in the end it was a mix between your answer and Rich&#39;s :) now it works, thank you !!"}], "tags": [], "owner": {"reputation": 2437, "user_id": 4058838, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/56c7770d8f5d6b9ec7a13e82fbf0a59c?s=128&d=identicon&r=PG", "display_name": "Amit Badheka", "link": "https://stackoverflow.com/users/4058838/amit-badheka"}, "is_accepted": true, "score": 6, "last_activity_date": 1444819204, "last_edit_date": 1444819204, "creation_date": 1444818512, "answer_id": 33122916, "question_id": 33122533, "link": "https://stackoverflow.com/questions/33122533/using-a-controller-variable-in-application-html-erb/33122916#33122916", "title": "Using a controller variable in application html.erb", "body": "<p>If you want it in all ur actions, it is wise to put it in your <code>application_controller.rb</code>.</p>\n\n<pre><code>before_filter :set_work_categories\n\ndef set_work_categoriers\n    @w_categories =  Workcategory.all.order(\"created_at DESC\")\nend\n</code></pre>\n\n<p>This should work fine.</p>\n\n<p>Also, a tip.</p>\n\n<p>You can use <code>default_scope {order(created_at: :desc)}</code> in your model <code>WorkCategory.rb</code></p>\n\n<p>Then you can use this like,</p>\n\n<pre><code>def set_work_categoriers\n  @w_categories =  Workcategory.all\nend\n</code></pre>\n\n<p>I would recommend changing the variable name to @w_categories or else it will conflict with your @work_categories name in <code>index</code> action.</p>\n\n<p>In your <code>application.html.erb</code> file, change</p>\n\n<pre><code>&lt;% unless @w_categories.nil? %&gt;\n  &lt;ul class=\"dropdown-menu\"&gt;\n    &lt;% @w_categories.each do |workcategory| %&gt;\n      &lt;li&gt;&lt;%= workcategory.name%&gt;&lt;/li&gt;\n    &lt;% end %&gt;\n  &lt;/ul&gt;\n&lt;%end&gt;\n</code></pre>\n\n<p>I guess this should do the trick</p>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 5441255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6972f5bed9fa88a53c2a742ab19c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "alex lug", "link": "https://stackoverflow.com/users/5441255/alex-lug"}, "edited": false, "score": 1, "creation_date": 1444820662, "post_id": 33123509, "comment_id": 54059772, "body": "thank you .. this was the missing piece, that before_action combined with Amit&#39;s code ! Thank you !"}], "tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": false, "score": 2, "last_activity_date": 1444821274, "last_edit_date": 1444821274, "creation_date": 1444820207, "answer_id": 33123509, "question_id": 33122533, "link": "https://stackoverflow.com/questions/33122533/using-a-controller-variable-in-application-html-erb/33123509#33123509", "title": "Using a controller variable in application html.erb", "body": "<p><strong>Layouts</strong></p>\n\n<p><code>application.html.erb</code> is a <strong>layout</strong>, meaning that it will be present regardless of whether you're using the <code>Workcategories</code> controller or not.</p>\n\n<p>If you want to load a variable into the <em>layout</em>, irrespective of which controller is being invoked, you'll need to make sure the <code>@workcategory</code> variable is present. </p>\n\n<p>To do this, you would generally put the <code>@workcategory</code> declaration into the <code>ApplicationController</code> (which most other controllers inherit from):</p>\n\n<pre><code>#app/controllers/application_controller.rb\nclass ApplicationController &lt; ActionController::Base\n   before_action :set_categories\n\n   private\n\n   def set_categories\n      @workcategory = ....\n   end\nend\n</code></pre>\n\n<p>This is the standard way to populate layout-side variables. It's not efficient and <em>only</em> works if your controllers inherit from the <code>Application</code> controller.</p>\n\n<hr>\n\n<p>Some further pointers would include the following:</p>\n\n<p><strong>1. Object orientation</strong></p>\n\n<p>Ruby, and by virtue, Rails, is <a href=\"https://en.wikipedia.org/wiki/Object-oriented_programming\" rel=\"nofollow noreferrer\"><em>object orientated</em></a>.</p>\n\n<p>This means that everything you do should revolve around <em>objects</em>. This is why Rails has many helpers that seem to work \"magically\".</p>\n\n<p>They're not magic at all - they just take the <em>objects</em> you pass them, and build pre-baked HTML to give you specific functionality. </p>\n\n<p>A good example are the <a href=\"http://guides.rubyonrails.org/routing.html#resource-routing-the-rails-default\" rel=\"nofollow noreferrer\">routes</a>:</p>\n\n<pre><code>#config/routes.rb\nresources :controller\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ssRF4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ssRF4.png\" alt=\"enter image description here\"></a></p>\n\n<p>The reason this is important is that when you call actions / variables, you need to think of them as <em>objects</em>. This is difficult to do for newbies, but if you can get your head around it, it helps your coding massively.</p>\n\n<p>--</p>\n\n<p><strong>2. Controllers</strong></p>\n\n<p>Following on from the above, you have to remember that your <em>controller</em> is really just a way to manipulate objects.</p>\n\n<p>Thus, if you're calling <code>@workcategory</code>, you need to appreciate where the object is going to come from and how it's going to be populated.</p>\n"}], "owner": {"reputation": 123, "user_id": 5441255, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e6972f5bed9fa88a53c2a742ab19c1a6?s=128&d=identicon&r=PG&f=1", "display_name": "alex lug", "link": "https://stackoverflow.com/users/5441255/alex-lug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2159, "favorite_count": 2, "accepted_answer_id": 33122916, "answer_count": 4, "score": 5, "last_activity_date": 1444821274, "creation_date": 1444817429, "question_id": 33122533, "link": "https://stackoverflow.com/questions/33122533/using-a-controller-variable-in-application-html-erb", "title": "Using a controller variable in application html.erb", "body": "<p>I'm probably trying too hard for my first website but i wanted to make a dropdown on a (bootstrap) navbar to be flexible, and show the names of the saved work categories.</p>\n\n<p>This is what i've tried to do in the application.html.erb file :</p>\n\n<pre><code>  &lt;ul class=\"dropdown-menu\"&gt;\n    &lt;% @workcategory.each do |workcategory| %&gt;\n    &lt;li&gt;&lt;%= workcategory.name%&gt;&lt;/li&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>Failed with error <code>undefined method</code>each' for nil:NilClass<code>on the</code>&lt;% @workcategory.each do |workcategory| %>` line.</p>\n\n<p>This is the workcategories controller : </p>\n\n<pre><code>class WorkcategoriesController &lt; ApplicationController\n    before_action :find_workcategory, only: [:edit, :update, :destroy]\n    def index\n        @workcategories = Workcategory.all.order(\"created_at DESC\")\n    end\n    def new\n        @workcategory = Workcategory.new\n    end\n    def create\n        @workcategory = Workcategory.new(post_params)\n        if @workcategory.save\n            flash[:notice] = \"Workcategory created\"\n            redirect_to(:action=&gt;'index', :workcategory_id =&gt; @workcategory.id)\n        else\n            @workcategories = Workcategories.order()\n            render('new')\n        end\n    end\n\n    def edit\n    end\n\n    def update\n    end\n\n    def destroy\n        @workcategory.destroy\n        redirect_to workcategory_path\n    end\n    private\n    def find_workcategory\n        @workcategory=Workcategory.find(params[:id])\n    end\n    def post_params\n        params.require(:workcategory).permit(:name)\n    end\nend\n</code></pre>\n\n<p>Any tips and help are welcome, even non-related to the initial question :) Thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "httparty"], "comments": [{"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1444817793, "post_id": 33122103, "comment_id": 54057939, "body": "Is that &quot;should do stuff&quot; test correct? Shouldn&#39;t it start <code>expect { delete :delete, @model_instance }</code>"}, {"owner": {"reputation": 3665, "user_id": 4330954, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/340ffba5552ac48227741a8695a255ff?s=128&d=identicon&r=PG", "display_name": "x6iae", "link": "https://stackoverflow.com/users/4330954/x6iae"}, "reply_to_user": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1444820569, "post_id": 33122103, "comment_id": 54059718, "body": "@ReggieB thanks for that observation, and yes it is correct. I am doing the delete in a <code>before_action</code> for the <code>create</code> method of another resource."}], "answers": [{"tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": false, "score": 0, "last_activity_date": 1444817628, "creation_date": 1444817628, "answer_id": 33122623, "question_id": 33122103, "link": "https://stackoverflow.com/questions/33122103/httparty-over-riding-the-native-delete-in-ruby-on-rails/33122623#33122623", "title": "HTTParty over-riding the native delete in ruby on rails", "body": "<p>You'll need to alias the delete method before you include HTTParty. Something like:</p>\n\n<pre><code>alias_method :model_delete, :delete\ninclude HTTParty\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>model.delete # calls HTTParty's delete instance method\nmodel.model_delete # call ActiveRecord delete instance method\n</code></pre>\n"}], "owner": {"reputation": 3665, "user_id": 4330954, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/340ffba5552ac48227741a8695a255ff?s=128&d=identicon&r=PG", "display_name": "x6iae", "link": "https://stackoverflow.com/users/4330954/x6iae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 261, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444817628, "creation_date": 1444816307, "question_id": 33122103, "link": "https://stackoverflow.com/questions/33122103/httparty-over-riding-the-native-delete-in-ruby-on-rails", "title": "HTTParty over-riding the native delete in ruby on rails", "body": "<p>I am trying to <code>delete</code> a record from the database through the controller as follows:</p>\n\n<pre><code>Model.where(\"property_1  = ? OR property_2 = ?\", value_1, value_2).first.destroy\n</code></pre>\n\n<p>And I have a Rspec test for it as follow:</p>\n\n<pre><code>it \"should do stuff\" do\n  expect{ post :create, @model_instance }.to change{ Model.count }.by -1\nend\n</code></pre>\n\n<p>And this passes.</p>\n\n<p>However, when I change my code to use <code>delete</code> in place of <code>destroy</code> as follow:</p>\n\n<pre><code>Model.where(\"property_1  = ? OR property_2 = ?\", value_1, value_2).first.delete\n</code></pre>\n\n<p>The test failed with the following error:</p>\n\n<pre><code>ArgumentError: bad argument (expected URI object or URI string)\n</code></pre>\n\n<p>On careful examination, it turned out that I was including <code>HTTParty</code> in my model Class (<code>include HTTParty</code>) which has a delete method that is over-riding the native one:</p>\n\n<pre><code>def delete\n  self.class.delete(id) if persisted?\n  @destroyed = true\n  freeze\nend\n</code></pre>\n\n<p>So, my question is: does using <code>HTTParty</code> means that I won't be able to use the native <code>delete</code> method again? knowing that <code>delete</code> will remove the record without triggering any callback as <code>destroy</code> would. (I won't want to use <code>destroy</code> and then manually <code>skip_callbacks</code> when <code>delete</code> could do just that for me)</p>\n\n<p>Thanks in advance for responses </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4989, "user_id": 2041077, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/MPBxe.jpg?s=128&g=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/2041077/dave"}, "edited": false, "score": 1, "creation_date": 1444817435, "post_id": 33121755, "comment_id": 54057692, "body": "This doesn&#39;t answer your question, but your code could be more efficient. If k is the number of divisors and n is the upper limit of numbers considered, your algorithm is O(n*k). E.g., say you have 1 number: d and your upper limit is L. Then you want d + 2d + 3d + ... + md where m = floor(L/d). This is equal to d * (1 + 2 + ... + m) = d * m * (m+1) / 2. Done in O(1). For k=2 you can get an answer in O(1) with a bit more work. Larger k will require some thought which I won&#39;t bother with since this isn&#39;t your question."}, {"owner": {"reputation": 3377, "user_id": 3438405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bacfe7cf1712f9858bebaf738438718?s=128&d=identicon&r=PG&f=1", "display_name": "The F", "link": "https://stackoverflow.com/users/3438405/the-f"}, "reply_to_user": {"reputation": 4989, "user_id": 2041077, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/MPBxe.jpg?s=128&g=1", "display_name": "Dave", "link": "https://stackoverflow.com/users/2041077/dave"}, "edited": false, "score": 0, "creation_date": 1444817597, "post_id": 33121755, "comment_id": 54057805, "body": "@DaveGalvin thanks for your feedback. Admittably I am not an ace in maths but i&#39;m sure i&#39;ll find some useful resources to improve my script - thanks to your advice."}], "answers": [{"comments": [{"owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 3, "creation_date": 1444816735, "post_id": 33122065, "comment_id": 54057270, "body": "Isn&#39;t that functionally identical to <code>divisables.any? { | d | i % d == 0 }</code> but less efficient?"}, {"owner": {"reputation": 3840, "user_id": 1054638, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/39071d37bc0d2ca9954bf865e7ce0167?s=128&d=identicon&r=PG", "display_name": "Harsh Gupta", "link": "https://stackoverflow.com/users/1054638/harsh-gupta"}, "reply_to_user": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1444817018, "post_id": 33122065, "comment_id": 54057439, "body": "@undur_gongor, Yes you are right. It didn&#39;t occur to me. Post edited."}], "tags": [], "owner": {"reputation": 3840, "user_id": 1054638, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/39071d37bc0d2ca9954bf865e7ce0167?s=128&d=identicon&r=PG", "display_name": "Harsh Gupta", "link": "https://stackoverflow.com/users/1054638/harsh-gupta"}, "is_accepted": true, "score": 2, "last_activity_date": 1444817149, "last_edit_date": 1444817149, "creation_date": 1444816204, "answer_id": 33122065, "question_id": 33121755, "link": "https://stackoverflow.com/questions/33121755/select-subset-of-list-matching-condition/33122065#33122065", "title": "Select subset of list matching condition", "body": "<p>Use <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-map\" rel=\"nofollow\">Array#map</a> and <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-any-3F\" rel=\"nofollow\">Enumerable#any?</a> </p>\n\n<pre><code>divisables.map do |d|\n  i % d == 0\nend.any?\n</code></pre>\n\n<p>HTH</p>\n\n<p>Edit: Alternatively, as @undur_gongor said, you can also use <code>any?</code> like</p>\n\n<pre><code>divisables.any? { |d| i % d == 0 }\n</code></pre>\n"}], "owner": {"reputation": 3377, "user_id": 3438405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bacfe7cf1712f9858bebaf738438718?s=128&d=identicon&r=PG&f=1", "display_name": "The F", "link": "https://stackoverflow.com/users/3438405/the-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 33122065, "answer_count": 1, "score": 1, "last_activity_date": 1536696813, "creation_date": 1444815447, "last_edit_date": 1536696813, "question_id": 33121755, "link": "https://stackoverflow.com/questions/33121755/select-subset-of-list-matching-condition", "title": "Select subset of list matching condition", "body": "<p>Assume I am supposed to find the sum of multiples of 7 an 9 up to a limit of 255, this is what I do:</p>\n\n<pre><code>(0..255).select do |i|\n  i % 7 == 0 || i % 9 == 0\nend.inject(:+)\n</code></pre>\n\n<p>I would like to remove the magic numbers and have the method more versatile:</p>\n\n<pre><code>divisors = [7,9,13]\n\n(0..255).select do |i|\n  divisors.each do |d|\n    i % d == 0\n  end\nend.inject(:+)\n</code></pre>\n\n<p>What is an idiomatic way of doing this?</p>\n"}, {"tags": ["html", "ruby", "json"], "answers": [{"tags": [], "owner": {"reputation": 978, "user_id": 3797480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZuuZI.jpg?s=128&g=1", "display_name": "nsave", "link": "https://stackoverflow.com/users/3797480/nsave"}, "is_accepted": true, "score": 2, "last_activity_date": 1444819108, "last_edit_date": 1444819108, "creation_date": 1444813812, "answer_id": 33121149, "question_id": 33120775, "link": "https://stackoverflow.com/questions/33120775/extract-the-json-tags-you-want-in-ruby/33121149#33121149", "title": "Extract the JSON tags you want in Ruby", "body": "<p>You could try this:</p>\n\n<pre><code>results = web_data.scan(/(tag\\s\\S*\\stag)/).flatten\n# =&gt; [\"tag 'A' tag\", \"tag 'B' tag\", \"tag 'C' tag\", \"tag 'D' tag\", \"tag 'E' tag\"]\n</code></pre>\n\n<p>Is this what you want?</p>\n\n<p><strong>Update</strong></p>\n\n<pre><code>require 'json'\njson_data = JSON.parse(web_data)\n\nkeys   = ['tag']\nvalues = json_data['results'].map do |result|\n  result['tags'].map do |tag|\n    tag.values_at(*keys)\n  end\nend\n\n# values =&gt; [[[\"people\"], [\"happy\"], [\"group\"], [\"man\"], [\"smiling\"], [\"smile\"], [\"person\"]]]\n</code></pre>\n"}], "owner": {"reputation": 936, "user_id": 5080273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b26b400d54f2a52add7900c381fb1778?s=128&d=identicon&r=PG&f=1", "display_name": "semiflex", "link": "https://stackoverflow.com/users/5080273/semiflex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 33121149, "answer_count": 1, "score": 0, "last_activity_date": 1444822041, "creation_date": 1444812730, "last_edit_date": 1444822041, "question_id": 33120775, "link": "https://stackoverflow.com/questions/33120775/extract-the-json-tags-you-want-in-ruby", "title": "Extract the JSON tags you want in Ruby", "body": "<p>I have extracted data from a website in json and it looks a little like this:</p>\n\n<pre><code>    {\n        \"results\": [\n            {\n                \"image\": \"http://en.hdyo.org/assets/art-shutter-young-people-a12e2c0cd7a54920cb024fd1394190fd.jpg\",\n                \"tags\": [\n                    {\n                        \"confidence\": 39.00159782165525,\n                        \"tag\": \"people\"\n                    },\n                    {\n                        \"confidence\": 35.583618780278364,\n                        \"tag\": \"happy\"\n                    },\n                    {\n                        \"confidence\": 34.44308639680471,\n                        \"tag\": \"group\"\n                    },\n                    {\n                        \"confidence\": 33.77196537562902,\n                        \"tag\": \"man\"\n                    },\n                    {\n                        \"confidence\": 32.55533432893469,\n                        \"tag\": \"smiling\"\n                    }\n                ]\n            }\n        ]\n    }\n</code></pre>\n\n<p>Is there a way of extracting all the <code>confidence</code> scores and <code>tags</code>? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model", "relational-database"], "comments": [{"owner": {"reputation": 800, "user_id": 4828850, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/epNbR.jpg?s=128&g=1", "display_name": "Sergei Stralenia", "link": "https://stackoverflow.com/users/4828850/sergei-stralenia"}, "edited": false, "score": 0, "creation_date": 1444812643, "post_id": 33120664, "comment_id": 54054454, "body": "did you try to use HABTM-relation?"}, {"owner": {"reputation": 197, "user_id": 5194390, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e6a0bc118be964d3ddaabf0ffb541e13?s=128&d=identicon&r=PG&f=1", "display_name": "orgertot", "link": "https://stackoverflow.com/users/5194390/orgertot"}, "reply_to_user": {"reputation": 800, "user_id": 4828850, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/epNbR.jpg?s=128&g=1", "display_name": "Sergei Stralenia", "link": "https://stackoverflow.com/users/4828850/sergei-stralenia"}, "edited": false, "score": 0, "creation_date": 1444812815, "post_id": 33120664, "comment_id": 54054592, "body": "I thought this wont use existing childs ( ingredients ) on the fly?"}], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 5194390, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e6a0bc118be964d3ddaabf0ffb541e13?s=128&d=identicon&r=PG&f=1", "display_name": "orgertot", "link": "https://stackoverflow.com/users/5194390/orgertot"}, "edited": false, "score": 0, "creation_date": 1444813228, "post_id": 33120840, "comment_id": 54054866, "body": "I want to expand your example: if I add a new ingredient to a new recipe it should look up if there is the same ingredient by name and should link to that one though RecipeIngredient"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 197, "user_id": 5194390, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e6a0bc118be964d3ddaabf0ffb541e13?s=128&d=identicon&r=PG&f=1", "display_name": "orgertot", "link": "https://stackoverflow.com/users/5194390/orgertot"}, "edited": false, "score": 0, "creation_date": 1444814659, "post_id": 33120840, "comment_id": 54055885, "body": "That&#39;s not an expansion, that&#39;s exactly how it&#39;s supposed to work.  You would only ever have one &quot;all purpose flour&quot; ingredient in the &quot;ingredients&quot; table, and recipe ingredients using all purpose flour point to that."}, {"owner": {"reputation": 197, "user_id": 5194390, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e6a0bc118be964d3ddaabf0ffb541e13?s=128&d=identicon&r=PG&f=1", "display_name": "orgertot", "link": "https://stackoverflow.com/users/5194390/orgertot"}, "edited": false, "score": 0, "creation_date": 1444816457, "post_id": 33120840, "comment_id": 54057053, "body": "But is that not sooo much complicated if i have a show on recipe and just want to add a ingredient without recipeingredient ? The recipe thing is just an example. So you could have ingredients without quantity at first. so it should be create/open recipe =&gt; create/use existing ingredient"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 197, "user_id": 5194390, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e6a0bc118be964d3ddaabf0ffb541e13?s=128&d=identicon&r=PG&f=1", "display_name": "orgertot", "link": "https://stackoverflow.com/users/5194390/orgertot"}, "edited": false, "score": 0, "creation_date": 1444817547, "post_id": 33120840, "comment_id": 54057771, "body": "3 models?  Complicated?  I wouldn&#39;t say so.  Having ingredients without quantity in a recipe doesn&#39;t make sense: there&#39;s no point trying to start with a nonsensical situation and then change it later.  You might as well start with the situation which makes sense.  Can you imagine looking at a recipe in which the ingredients list says &quot;caster sugar, all-purpose flour, eggs, bananas, vanilla essence&quot;?  The first thing you would think would be &quot;err, it&#39;s missing the quantities&quot;."}], "tags": [], "owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "is_accepted": false, "score": 1, "last_activity_date": 1444812914, "creation_date": 1444812914, "answer_id": 33120840, "question_id": 33120664, "link": "https://stackoverflow.com/questions/33120664/ruby-on-rails-use-existing-model-if-possible/33120840#33120840", "title": "Ruby on Rails: Use existing Model if possible", "body": "<p>You need to expand your schema out:  you need to differentiate between an ingredient like \"all purpose flour\", of which you want one in your database, and then \"100 grams of all purpose flour\" which might be used in a specific recipe.</p>\n\n<p>I would do something like this:</p>\n\n<pre><code>Recipe\n  has_many :recipe_ingredients\n  #fields - name\n\nRecipeIngredient\n  belongs_to :ingredient\n  belongs_to :recipe\n  #fields - quantity\n\nIngredient\n  has_many :recipe_ingredients\n  #fields - name\n</code></pre>\n\n<p>Now, when you build a recipe, you're building a list of associated <code>recipe_ingredients</code>, each of which points to an ingredient (like the \"all-purpose flour\" ingredient) and has a quantity, eg \"100 grams\".</p>\n\n<p>Note - i could have added \"has_many :ingredients, :through => :recipe_ingredients\" to Recipe, but i don't actually think this is a useful association:  ingredients only make sense for the recipe when they have a quantity - i don't think you would ever want to say \"recipe.ingredients\" as this doesn't give you the quantity info.</p>\n"}, {"comments": [{"owner": {"reputation": 197, "user_id": 5194390, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e6a0bc118be964d3ddaabf0ffb541e13?s=128&d=identicon&r=PG&f=1", "display_name": "orgertot", "link": "https://stackoverflow.com/users/5194390/orgertot"}, "edited": false, "score": 0, "creation_date": 1444816543, "post_id": 33120918, "comment_id": 54057117, "body": "That would be pretty nice. But what will be the create method for ingredient ? <code>@recipe.ingredients.add_ingredient(params[:something])</code> will not work, wont it?"}, {"owner": {"reputation": 978, "user_id": 3797480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZuuZI.jpg?s=128&g=1", "display_name": "nsave", "link": "https://stackoverflow.com/users/3797480/nsave"}, "reply_to_user": {"reputation": 197, "user_id": 5194390, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e6a0bc118be964d3ddaabf0ffb541e13?s=128&d=identicon&r=PG&f=1", "display_name": "orgertot", "link": "https://stackoverflow.com/users/5194390/orgertot"}, "edited": false, "score": 0, "creation_date": 1444816733, "post_id": 33120918, "comment_id": 54057267, "body": "Well, simply <code>@recipe.add_ingredient(params[:something])</code>"}, {"owner": {"reputation": 978, "user_id": 3797480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZuuZI.jpg?s=128&g=1", "display_name": "nsave", "link": "https://stackoverflow.com/users/3797480/nsave"}, "reply_to_user": {"reputation": 197, "user_id": 5194390, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e6a0bc118be964d3ddaabf0ffb541e13?s=128&d=identicon&r=PG&f=1", "display_name": "orgertot", "link": "https://stackoverflow.com/users/5194390/orgertot"}, "edited": false, "score": 0, "creation_date": 1444816947, "post_id": 33120918, "comment_id": 54057398, "body": "@orgertot, (just updated with more appropriate method name)"}], "tags": [], "owner": {"reputation": 978, "user_id": 3797480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZuuZI.jpg?s=128&g=1", "display_name": "nsave", "link": "https://stackoverflow.com/users/3797480/nsave"}, "is_accepted": true, "score": 0, "last_activity_date": 1444817206, "last_edit_date": 1444817206, "creation_date": 1444813115, "answer_id": 33120918, "question_id": 33120664, "link": "https://stackoverflow.com/questions/33120664/ruby-on-rails-use-existing-model-if-possible/33120918#33120918", "title": "Ruby on Rails: Use existing Model if possible", "body": "<p>Having all realations set up in a standart way (HABTM) you could add ingrediants by name like this:</p>\n\n<pre><code># reciept.rb\ndef add_ingredient_by_name(ingredient_name)\n  self.ingredients &lt;&lt; Ingredient.find_or_create_by(name: ingredient_name)\nend\n</code></pre>\n\n<p><strong>Update:</strong>\nAlso I'd add a uniqueness constraint for ingredient name for safety:</p>\n\n<pre><code># ingredient.rb\nvalidates_uniqueness_of :name\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 5194390, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e6a0bc118be964d3ddaabf0ffb541e13?s=128&d=identicon&r=PG&f=1", "display_name": "orgertot", "link": "https://stackoverflow.com/users/5194390/orgertot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 33120918, "answer_count": 2, "score": 0, "last_activity_date": 1444817206, "creation_date": 1444812491, "last_edit_date": 1444812852, "question_id": 33120664, "link": "https://stackoverflow.com/questions/33120664/ruby-on-rails-use-existing-model-if-possible", "title": "Ruby on Rails: Use existing Model if possible", "body": "<p>I want to create a relationship from recipe to ingredients. Basically:</p>\n\n<pre><code>recipe has_many ingredients\ningredients belongs_to recipe\n</code></pre>\n\n<p>But if I add a ingredient to a recipe it should look if there is an existing ingredient with the same name and should use that one.</p>\n\n<p>Is there a smooth solution?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "simple-form"], "comments": [{"owner": {"reputation": 3377, "user_id": 3438405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bacfe7cf1712f9858bebaf738438718?s=128&d=identicon&r=PG&f=1", "display_name": "The F", "link": "https://stackoverflow.com/users/3438405/the-f"}, "edited": false, "score": 0, "creation_date": 1444812536, "post_id": 33120600, "comment_id": 54054388, "body": "I don&#39;t understand what you are asking for. Can you refactor your question, in case I am not the only one? Are you looking to select an existing <code>vehicle</code> in your repair form?"}, {"owner": {"reputation": 47, "user_id": 5183212, "user_type": "registered", "profile_image": "https://graph.facebook.com/1139585906058030/picture?type=large", "display_name": "Ian Cheng", "link": "https://stackoverflow.com/users/5183212/ian-cheng"}, "reply_to_user": {"reputation": 3377, "user_id": 3438405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bacfe7cf1712f9858bebaf738438718?s=128&d=identicon&r=PG&f=1", "display_name": "The F", "link": "https://stackoverflow.com/users/3438405/the-f"}, "edited": false, "score": 0, "creation_date": 1444813077, "post_id": 33120600, "comment_id": 54054778, "body": "I have a input area to search for the Vehicle Number, but that value would be Vehicle id.  Form =&gt;  Vehicle No [_____]  &lt;= input the vehicle.no, but I would like to put the value about the vehicle&#39;s id."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 5183212, "user_type": "registered", "profile_image": "https://graph.facebook.com/1139585906058030/picture?type=large", "display_name": "Ian Cheng", "link": "https://stackoverflow.com/users/5183212/ian-cheng"}, "edited": false, "score": 0, "creation_date": 1444813179, "post_id": 33120706, "comment_id": 54054844, "body": "But, if I would like to search first and then put the value in, how could I do with that?"}, {"owner": {"reputation": 635, "user_id": 5332286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb9bbcfabe5cb5d2631b3dcadef70e49?s=128&d=identicon&r=PG", "display_name": "Devin Howard", "link": "https://stackoverflow.com/users/5332286/devin-howard"}, "reply_to_user": {"reputation": 47, "user_id": 5183212, "user_type": "registered", "profile_image": "https://graph.facebook.com/1139585906058030/picture?type=large", "display_name": "Ian Cheng", "link": "https://stackoverflow.com/users/5183212/ian-cheng"}, "edited": false, "score": 0, "creation_date": 1444814067, "post_id": 33120706, "comment_id": 54055467, "body": "@IanCheng if you could clarify <i>how</i> you hope to &quot;search&quot; the vehicle numbers (like, using what mechanism?) I could help with that. But by default an HTML &lt;input&gt; element doesn&#39;t allow searching, so I recommend researching select2 or something like it and doing something like I suggest above"}, {"owner": {"reputation": 47, "user_id": 5183212, "user_type": "registered", "profile_image": "https://graph.facebook.com/1139585906058030/picture?type=large", "display_name": "Ian Cheng", "link": "https://stackoverflow.com/users/5183212/ian-cheng"}, "edited": false, "score": 0, "creation_date": 1444846553, "post_id": 33120706, "comment_id": 54076919, "body": "I explained more about my question above~~~~~ Sorry about my English Skill.....  :-("}], "tags": [], "owner": {"reputation": 635, "user_id": 5332286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb9bbcfabe5cb5d2631b3dcadef70e49?s=128&d=identicon&r=PG", "display_name": "Devin Howard", "link": "https://stackoverflow.com/users/5332286/devin-howard"}, "is_accepted": true, "score": 1, "last_activity_date": 1444813963, "last_edit_date": 1444813963, "creation_date": 1444812563, "answer_id": 33120706, "question_id": 33120600, "link": "https://stackoverflow.com/questions/33120600/ruby-on-rails-form-input-a-column-and-insert-another-column-in-the-form/33120706#33120706", "title": "Ruby on Rails - form input a column and insert another column in the form", "body": "<p><a href=\"https://github.com/plataformatec/simple_form#associations\" rel=\"nofollow\">https://github.com/plataformatec/simple_form#associations</a></p>\n\n<p><code>&lt;%= f.association :vehicle, label_method: :no, value_method: :id %&gt;</code></p>\n\n<p>This of course assumes that Repair has a <code>has_one :vehicle</code> line in its model file.</p>\n\n<p>What this code will do is generate a select tag with all of the labels equal to the :no (which I assume is of the format XXX-1211), but the value of the select elements will be the vehicle_id</p>\n\n<p>Now if you create a new repair, it will be a dropdown showing the @vechicle.no but storing @vechicle.id in the database.</p>\n\n<p>To be able to search, you'll need some extra javascript library like <a href=\"https://select2.github.io\" rel=\"nofollow\">select2</a> that turns a select box into an autocomplete element. Then you add <code>input_html: {class: \"select2\"}</code> to the f.input line above to use it.</p>\n"}, {"tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": false, "score": 0, "last_activity_date": 1444817376, "creation_date": 1444817376, "answer_id": 33122513, "question_id": 33120600, "link": "https://stackoverflow.com/questions/33120600/ruby-on-rails-form-input-a-column-and-insert-another-column-in-the-form/33122513#33122513", "title": "Ruby on Rails - form input a column and insert another column in the form", "body": "<pre><code>&lt;%= simple_form_for @repair do |f| %&gt;\n    &lt;%= f.collection_select :vehicle_id, Vehicle.all, :id, :no %&gt;\n    &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 5183212, "user_type": "registered", "profile_image": "https://graph.facebook.com/1139585906058030/picture?type=large", "display_name": "Ian Cheng", "link": "https://stackoverflow.com/users/5183212/ian-cheng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 33120706, "answer_count": 2, "score": 1, "last_activity_date": 1444848068, "creation_date": 1444812256, "last_edit_date": 1444848068, "question_id": 33120600, "link": "https://stackoverflow.com/questions/33120600/ruby-on-rails-form-input-a-column-and-insert-another-column-in-the-form", "title": "Ruby on Rails - form input a column and insert another column in the form", "body": "<p>There is a question about simple_form in ruby in rails.<br>\nI would like to create a form.<br></p>\n\n<p>I have two model like: Vehicle, Repair.<br></p>\n\n<pre><code> &lt;%= simple_form_for(@repair) do |f| %&gt;\n   &lt;div class=\"form-inputs\"&gt;\n     &lt;%= f.input :vehicle_id, include_blank: true, label: 'Vehicle_no' %&gt;\n   &lt;/div&gt;\n &lt;% end %&gt;\n</code></pre>\n\n<p>When I create the repair form, I would like to search @vehicle.no.<br>\nand When I key in the keyword about vehicle number like: XXX-1211 and I choose the one I need, then I could get the id with @vehicle.no to placing with the vehicle number.<br></p>\n\n<p>How could I achieve with that?<br></p>\n\n<p>Thank you! <br></p>\n\n<pre><code>&gt; Updated\n</code></pre>\n\n<p>I have a input area to search for the Vehicle Number, but that value would be Vehicle id.<br></p>\n\n<p>Form => Vehicle No [_____]  &lt;= input the vehicle.no, but I would like to put the value about the vehicle's id.<br></p>\n\n<pre><code>&gt; Updated\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/fzaMY.png\" alt=\"This is the form\">\nThis is the form above.<br> </p>\n\n<p><a href=\"https://i.stack.imgur.com/1b4hp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1b4hp.png\" alt=\"enter image description here\"></a>\nAnd when I key in the part of the vehicle number, it could appear some vehicle number to be choosen.(Search Part)<br>\n<a href=\"https://i.stack.imgur.com/gsqz4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gsqz4.png\" alt=\"enter image description here\"></a>\n<br>If I choose XXX-112, and according to the below datatables, I could get the value id = 2 to submit the form.</p>\n\n<ol>\n      <li>Vehicle_tables</li>\n</ol>\n\n<p>id  no <br>\n1 XXX-111 <br>\n2 XXX-112 <br>\n3 XXX-332 <br>\n.<br>\n.<br>\n.<br>\n100 XXX-222 <br></p>\n\n<p>How could I achieve this goal?\nIt use some of AJAX function?</p>\n\n<p>I would like to use the search method because I have many vehicles data...</p>\n\n<p>Sorry about the English skill to clearify the question..... :-(</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "graph", "stockquotes", "chartkick"], "answers": [{"comments": [{"owner": {"reputation": 684, "user_id": 955366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4884f3bf89d9a09a499dd0001b63cd0c?s=128&d=identicon&r=PG", "display_name": "buren", "link": "https://stackoverflow.com/users/955366/buren"}, "edited": false, "score": 0, "creation_date": 1449619698, "post_id": 34112677, "comment_id": 56084377, "body": "The API have been stable for quite some time, so the docs should be up to date :)"}], "tags": [], "owner": {"reputation": 20989, "user_id": 148844, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/263aa1ae12d9757f78167b80e596c3df?s=128&d=identicon&r=PG", "display_name": "Chloe", "link": "https://stackoverflow.com/users/148844/chloe"}, "is_accepted": false, "score": 0, "last_activity_date": 1449362584, "creation_date": 1449362584, "answer_id": 34112677, "question_id": 33120423, "link": "https://stackoverflow.com/questions/33120423/chartkick-and-groupdate-gems-are-show-only-one-point-at-graph-graph-should-be-s/34112677#34112677", "title": "Chartkick and groupdate gems are show only one point at graph, graph should be several lines", "body": "<p>Maybe they changed the API since this question, but they show an example of a multi line series. <a href=\"http://chartkick.com/\" rel=\"nofollow\">http://chartkick.com/</a></p>\n\n<pre><code>&lt;%= line_chart Feat.group(:goal_id).group_by_week(:created_at).count %&gt;\n</code></pre>\n\n<p>So try </p>\n\n<pre><code>&lt;%= line_chart @company.group(:symbol).group_by_day(:current_date).count %&gt;\n</code></pre>\n\n<p>You are grouping by the <code>current_date</code> instead of <code>:created_at</code>, which is all set to the same value:</p>\n\n<pre><code>company.current_date = stock.Date\n</code></pre>\n\n<p>I don't know what that will return, because it doesn't look like an attribute value. I get <code>undefined method Date</code> error. </p>\n"}], "owner": {"reputation": 579, "user_id": 1598051, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/444a3e1b98fb1375cfecf211862dbb26?s=128&d=identicon&r=PG", "display_name": "Evgeny Palguev", "link": "https://stackoverflow.com/users/1598051/evgeny-palguev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 491, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1449619670, "creation_date": 1444811700, "question_id": 33120423, "link": "https://stackoverflow.com/questions/33120423/chartkick-and-groupdate-gems-are-show-only-one-point-at-graph-graph-should-be-s", "title": "Chartkick and groupdate gems are show only one point at graph, graph should be several lines", "body": "<p>I create ruby on rails app to show stock value for some companies at some time period. I use next gems: <code>chartkick</code>, <code>groupdate</code> and <code>stock_quote</code></p>\n\n<p>My Shema.db:</p>\n\n<pre><code>  create_table \"companies\", force: :cascade do |t|\n    t.string   \"symbol\"\n    t.datetime \"current_date\"\n    t.float    \"value\"\n    t.datetime \"created_at\",   null: false\n    t.datetime \"updated_at\",   null: false\n  end\n</code></pre>\n\n<p>Fill database with seeds.rb:</p>\n\n<pre><code>Company.delete_all\nd1 = Date.new(2014, 9, 1)\nd2 = Date.new(2015, 9, 1)\n\nstocks = StockQuote::Stock.history(\"aapl\", d1, d2)\nstocks.each do |stock|\n    company = Company.new\n    company.symbol = stock.Symbol.to_s\n    company.current_date = stock.Date\n    company.value = stock.Volume\n    company.save\nend\n\nstocks = StockQuote::Stock.history(\"tsla\", d1, d2)\nstocks.each do |stock|\n    company = Company.new\n    company.symbol = stock.Symbol.to_s\n    company.current_date = stock.Date\n    company.value = stock.Volume\n    company.save\nend\n\nstocks = StockQuote::Stock.history(\"yhoo\", d1, d2)\nstocks.each do |stock|\n    company = Company.new\n    company.symbol = stock.Symbol.to_s\n    company.current_date = stock.Date\n    company.value = stock.Volume\n    company.save\nend\n</code></pre>\n\n<p>In controller:</p>\n\n<pre><code>  def show\n    @company = Company.all\n  end\n</code></pre>\n\n<p>In show.html.erb I put code from <a href=\"http://ankane.github.io/chartkick/\" rel=\"nofollow noreferrer\">http://ankane.github.io/chartkick/</a>:</p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-xs-12\"&gt;\n    &lt;h3&gt;Values By Day 2 years by companies&lt;/h3&gt;\n    &lt;%= line_chart @company.group(:symbol).group_by_day(:current_date, format: \"%B %d, %Y\").count, discrete: true %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The graph should be several lines, and have only <strong>ONE</strong> point at graph:</p>\n\n<p><a href=\"https://i.stack.imgur.com/t1Cl6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t1Cl6.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>What should i do, change, add???</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "render"], "answers": [{"comments": [{"owner": {"reputation": 333, "user_id": 4995200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/121841d50806c06ca5a53de524eb22f5?s=128&d=identicon&r=PG&f=1", "display_name": "Mordechai Dror", "link": "https://stackoverflow.com/users/4995200/mordechai-dror"}, "edited": false, "score": 0, "creation_date": 1444895043, "post_id": 33121039, "comment_id": 54095389, "body": "But the question is the same (although it became more theoretical). If I can render one type of partial (<code>&lt;%= render @product %&gt;</code>) how can I render another type (<code>&lt;%= render @products %&gt;</code>)?"}, {"owner": {"reputation": 2180, "user_id": 809904, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aTkpH.png?s=128&g=1", "display_name": "nicohvi", "link": "https://stackoverflow.com/users/809904/nicohvi"}, "reply_to_user": {"reputation": 333, "user_id": 4995200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/121841d50806c06ca5a53de524eb22f5?s=128&d=identicon&r=PG&f=1", "display_name": "Mordechai Dror", "link": "https://stackoverflow.com/users/4995200/mordechai-dror"}, "edited": false, "score": 0, "creation_date": 1445167026, "post_id": 33121039, "comment_id": 54199729, "body": "Well (and I might remember incorrectly here), but in your first example (<code>&lt;%= render @product %&gt;</code>) Rails will look for a partial named <code>_product.html.erb</code> and throw an exception if it&#39;s not found. In your second example, I think the exact same thing will happen (though I&#39;m not entirely sure). To verify this, try to create a <code>_products.html.erb</code> partial and remove the <code>_product.html.erb</code> partial. To ensure you render <code>_products.html.erb</code> you need to call it explicitly <code>&lt;%= render &#39;products&#39;, locals: { products: @products } %&gt;</code>. Did that make sense?"}], "tags": [], "owner": {"reputation": 2180, "user_id": 809904, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aTkpH.png?s=128&g=1", "display_name": "nicohvi", "link": "https://stackoverflow.com/users/809904/nicohvi"}, "is_accepted": false, "score": 0, "last_activity_date": 1444813453, "creation_date": 1444813453, "answer_id": 33121039, "question_id": 33119496, "link": "https://stackoverflow.com/questions/33119496/how-to-test-rendering-a-partial-for-each-object-with-rspec-3-3/33121039#33121039", "title": "How to test rendering a partial for each object with rspec 3.3?", "body": "<p>Well, since the <code>rendered</code>string simply returns what the view actually rendered (as one might expect), the behaviour is as expected. </p>\n\n<p><code>expect(rendered).to match /slicer/</code> simply asserts that the rendered string contains the word <code>slicer</code>, and not whether or not the partial view was actually rendered.</p>\n\n<p>A quick way to solve this is to match the <code>rendered</code> string with something that is <strong>only part of the partial view</strong>, like so:</p>\n\n<pre><code>require \"rails_helper\"\n\nRSpec.describe \"widgets/index\" do\n  it \"displays all the widgets\" do\n    assign(:widgets, [\n      Widget.create!({ name: \"slicer\", body: \"this is the slicer body\"}),\n      Widget.create!({ name: \"dicer\", body: \"this is the dicer body\"})\n    ])\n\n    render\n\n    expect(rendered).to match /this is the slicer body/\n    expect(rendered).to match /this is the dicer body/\n  end\nend\n</code></pre>\n\n<p>Assuming this partial view:</p>\n\n<pre><code>&lt;h3&gt;&lt;%= widget.name %&gt;&lt;/h3&gt;\n\n&lt;p&gt;&lt;%= widget.body %&gt;&lt;/h3&gt;&lt;/p&gt;\n</code></pre>\n\n<p>Of course, you can match the string based on anything you'd like.</p>\n"}], "owner": {"reputation": 333, "user_id": 4995200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/121841d50806c06ca5a53de524eb22f5?s=128&d=identicon&r=PG&f=1", "display_name": "Mordechai Dror", "link": "https://stackoverflow.com/users/4995200/mordechai-dror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 510, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1444813453, "creation_date": 1444808639, "last_edit_date": 1444808858, "question_id": 33119496, "link": "https://stackoverflow.com/questions/33119496/how-to-test-rendering-a-partial-for-each-object-with-rspec-3-3", "title": "How to test rendering a partial for each object with rspec 3.3?", "body": "<p>Here is what I've found in the <a href=\"https://www.relishapp.com/rspec/rspec-rails/v/3-3/docs/view-specs/view-spec\" rel=\"nofollow\">documentation</a>:</p>\n\n<pre><code>require \"rails_helper\"\n\nRSpec.describe \"widgets/index\" do\n  it \"displays all the widgets\" do\n    assign(:widgets, [\n      Widget.create!(:name =&gt; \"slicer\"),\n      Widget.create!(:name =&gt; \"dicer\")\n    ])\n\n    render\n\n    expect(rendered).to match /slicer/\n    expect(rendered).to match /dicer/\n  end\nend\n</code></pre>\n\n<p>but it doesn't make a difference if I write this in the view</p>\n\n<pre><code>&lt;%= render @widgets %&gt;\n</code></pre>\n\n<p>or this</p>\n\n<pre><code>&lt;% @widgets.each do |widget| %&gt;\n  &lt;p&gt;&lt;%= widget.name %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<hr>\n\n<p>Then I decided to try this (source the same):</p>\n\n<pre><code>require \"rails_helper\"\n\nRSpec.describe \"rendering locals in a partial\" do\n  it \"displays the widget\" do\n    widget = Widget.create!(:name =&gt; \"slicer\")\n\n    render \"widgets/widget\", :widget =&gt; widget\n\n    expect(rendered).to match /slicer/\n  end\nend\n</code></pre>\n\n<p>but it works only for rendering one object i.e. for</p>\n\n<pre><code>&lt;%= render @product %&gt;\n</code></pre>\n\n<p>and not for </p>\n\n<pre><code>&lt;%= render @products %&gt;\n</code></pre>\n\n<hr>\n\n<p>So how do I test that my list of widgets renders a partial for each widget?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ajax", "ruby-on-rails-4", "devise"], "comments": [{"owner": {"reputation": 1050, "user_id": 2487790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sxzEQ.jpg?s=128&g=1", "display_name": "Moustafa Sallam", "link": "https://stackoverflow.com/users/2487790/moustafa-sallam"}, "edited": false, "score": 0, "creation_date": 1444810561, "post_id": 33117359, "comment_id": 54053269, "body": "please checkout that the params sent to the server is correct something is wrong here. in the first server log. the <code>non-ajax request</code> you send <code>&quot;email&quot;=&gt;&quot;teacher1@teach.org&quot;</code> while the sql is executed and search for <code>&quot;teacher1@bizworld.org&quot;</code>"}, {"owner": {"reputation": 11, "user_id": 5443618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/396cf1803f0d697b3e380023530f1291?s=128&d=identicon&r=PG&f=1", "display_name": "nnarayen", "link": "https://stackoverflow.com/users/5443618/nnarayen"}, "reply_to_user": {"reputation": 1050, "user_id": 2487790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sxzEQ.jpg?s=128&g=1", "display_name": "Moustafa Sallam", "link": "https://stackoverflow.com/users/2487790/moustafa-sallam"}, "edited": false, "score": 0, "creation_date": 1444897779, "post_id": 33117359, "comment_id": 54096939, "body": "Hey thanks for the comment, I changed the actual emails when copying to this post and obviously wasn&#39;t careful enough :) It&#39;s always the same email when testing locally, so I&#39;ve updated the logs accordingly"}, {"owner": {"reputation": 1050, "user_id": 2487790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sxzEQ.jpg?s=128&g=1", "display_name": "Moustafa Sallam", "link": "https://stackoverflow.com/users/2487790/moustafa-sallam"}, "edited": false, "score": 0, "creation_date": 1444914809, "post_id": 33117359, "comment_id": 54108339, "body": "if you looked at the difference between the two logs you will find that the first one the correct one the server finds the record in the <code>teachers</code> table, that why it doesn&#39;t query the <code>admins</code> table. while in the second log the <code>ajax one</code> you will find that the <code>admins table</code> has been queried after the <code>teachers table</code> which means the entry can&#39;t be found inside the <code>teachers table</code>. please show us the <code>ajax code</code> the <code>js code</code> you use to make <code>ajaxable request</code> make sure you are sending the correct password and username"}, {"owner": {"reputation": 11, "user_id": 5443618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/396cf1803f0d697b3e380023530f1291?s=128&d=identicon&r=PG&f=1", "display_name": "nnarayen", "link": "https://stackoverflow.com/users/5443618/nnarayen"}, "reply_to_user": {"reputation": 1050, "user_id": 2487790, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sxzEQ.jpg?s=128&g=1", "display_name": "Moustafa Sallam", "link": "https://stackoverflow.com/users/2487790/moustafa-sallam"}, "edited": false, "score": 0, "creation_date": 1444965856, "post_id": 33117359, "comment_id": 54132756, "body": "My devise setup currently tries to authenticate as a teacher; if that fails, it&#39;ll try to authenticate as an Admin. That&#39;s why in the second case you see the Admin lookup table attempt. The issue is that I can&#39;t seem to figure out why it&#39;s even attempting to try the Admin lookup, the since the Teacher SQL query looks exactly the same.   However, you can tell from the logs that the username being passed to both cases is the same (&quot;teacher1@teach.org&quot;) and though the password is filtered out I&#39;m sure that matches as well since I&#39;ve tried multiple times."}], "owner": {"reputation": 11, "user_id": 5443618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/396cf1803f0d697b3e380023530f1291?s=128&d=identicon&r=PG&f=1", "display_name": "nnarayen", "link": "https://stackoverflow.com/users/5443618/nnarayen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 666, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1444897696, "creation_date": 1444800970, "last_edit_date": 1444897696, "question_id": 33117359, "link": "https://stackoverflow.com/questions/33117359/rails-devise-ajax-login-401-unauthorized", "title": "Rails Devise Ajax Login 401 Unauthorized", "body": "<p>I'm trying to perform authentication in my Rails app with Ajax calls and Devise. I've set up my environment according to many resources doing the same thing, but I keep getting 401 Unauthorized errors. </p>\n\n<p>I've configured my <code>routes.rb</code> file to point to my custom <code>SessionsController</code></p>\n\n<pre><code>class SessionsController &lt; Devise::SessionsController\n\n  respond_to :json\n\n  def create  \n    self.resource, resource_name = authenticate(auth_options, :teacher)\n    set_flash_message(:notice, :signed_in) if is_navigational_format?\n    sign_in(resource_name, resource)\n    respond_with resource, location: after_sign_in_path_for(resource)\n  end\n\n  # Attempts to authenticate the login request, first as a Teacher and\n  # then as an Admin.\n  def authenticate(auth_options, resource_name)\n    # First login attempt using Teacher scope\n    resource = warden.authenticate(auth_options)\n\n    # If authentication failed, retry using Admin scope\n    if resource.nil?\n      resource_name = :admin\n      request.params[:admin] = params[:teacher]\n      resource = warden.authenticate!(auth_options.merge(scope: :admin))\n    end\n\n    # Return resource and resource name, required for Devise sign_in method\n    [resource, resource_name]\n  end\nend\n</code></pre>\n\n<p>My situation is a little unique since I'm trying to have the same controller handle the login for two Devise models. Currently, this works exactly as expected, as I can log in through <code>/teachers/sign_in</code> (default Devise form) with both teacher and admin credentials. When I try and log in through that route, my rails output looks like:</p>\n\n<pre><code>Started POST \"/teachers/sign_in\" for 127.0.0.1 at 2015-10-13 21:15:26 -0700\nProcessing by SessionsController#create as HTML\nParameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"HRIuJCj/FoHYEPX+boKC60s4oau6OyWz1NY8ZbC0ruLRLfGOs6esElHEYSdLHesZjXBk4LGTffE5Ilq1p5pjqQ==\", \"teacher\"=&gt;{\"email\"=&gt;\"teacher1@teach.org\", \"password\"=&gt;\"[FILTERED]\", \"remember_me\"=&gt;\"0\"}, \"commit\"=&gt;\"Log in\"}\nTeacher Load (0.3ms)  SELECT  \"teachers\".* FROM \"teachers\" WHERE \"teachers\".\"email\" = $1  ORDER BY \"teachers\".\"id\" ASC LIMIT 1  [[\"email\", \"teacher1@teach.org\"]]\n (0.2ms)  BEGIN\n SQL (0.3ms)  UPDATE \"teachers\" SET \"last_sign_in_at\" = $1, \"current_sign_in_at\" = $2, \"sign_in_count\" = $3, \"updated_at\" = $4 WHERE \"teachers\".\"id\" = $5  [[\"last_sign_in_at\", \"2015-10-14 04:03:00.121311\"], [\"current_sign_in_at\", \"2015-10-14 04:15:26.801062\"], [\"sign_in_count\", 16], [\"updated_at\", \"2015-10-14 04:15:26.802083\"], [\"id\", 1]]\n (0.7ms)  COMMIT\n</code></pre>\n\n<p>However, when I try and log in through my Ajax calls, I get:</p>\n\n<pre><code>Started POST \"/sign_in\" for 127.0.0.1 at 2015-10-13 21:09:06 -0700\nProcessing by SessionsController#create as */*\nParameters: {\"teacher\"=&gt;{\"email\"=&gt;\"teacher1@teach.org\", \"password\"=&gt;\"[FILTERED]\", \"remember_me\"=&gt;\"0\", \"authenticity_token\"=&gt;\"m3+HyUZ+fbQ3d70X2LtL5Wff2b/6lAe++psXGM2T6dtXQFhj3SbHJ76jKc79JCIXoZcc9PE8X/wXb3HI2r0kkA==\"}}\nTeacher Load (0.8ms)  SELECT  \"teachers\".* FROM \"teachers\" WHERE \"teachers\".\"email\" = $1  ORDER BY \"teachers\".\"id\" ASC LIMIT 1  [[\"email\", \"teacher1@teach.org\"]]\nAdmin Load (0.4ms)  SELECT  \"admins\".* FROM \"admins\" WHERE \"admins\".\"email\" = $1  ORDER BY \"admins\".\"id\" ASC LIMIT 1  [[\"email\", \"teacher1@teach.org\u201d]]\nCompleted 401 Unauthorized in 136ms (ActiveRecord: 6.1ms)\n</code></pre>\n\n<p>In the second case, it seems like it's performing the exact same (correct) SQL query, but it's failing to authenticate. I've been hitting this problem for hours and don't really know how to proceed from here. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "devise"], "answers": [{"comments": [{"owner": {"reputation": 1171, "user_id": 1693541, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/ae68b37d5edb59b31eb357554929c4d5?s=128&d=identicon&r=PG", "display_name": "Braham Shakti", "link": "https://stackoverflow.com/users/1693541/braham-shakti"}, "edited": false, "score": 0, "creation_date": 1444800329, "post_id": 33117181, "comment_id": 54048151, "body": "Actually record is already saved and I did fetched the organization record and tried to save in session variable. My question was on reloading why it returns true"}, {"owner": {"reputation": 4168, "user_id": 737275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51f7198e2f8a5bce446aafc6acc85c3b?s=128&d=identicon&r=PG&f=1", "display_name": "blnc", "link": "https://stackoverflow.com/users/737275/blnc"}, "reply_to_user": {"reputation": 1171, "user_id": 1693541, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/ae68b37d5edb59b31eb357554929c4d5?s=128&d=identicon&r=PG", "display_name": "Braham Shakti", "link": "https://stackoverflow.com/users/1693541/braham-shakti"}, "edited": false, "score": 0, "creation_date": 1444800399, "post_id": 33117181, "comment_id": 54048176, "body": "in that case store only the organization_id and then call for that record. I&#39;ll update my answer"}, {"owner": {"reputation": 1171, "user_id": 1693541, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/ae68b37d5edb59b31eb357554929c4d5?s=128&d=identicon&r=PG", "display_name": "Braham Shakti", "link": "https://stackoverflow.com/users/1693541/braham-shakti"}, "edited": false, "score": 0, "creation_date": 1444800528, "post_id": 33117181, "comment_id": 54048222, "body": "No my <code>current_organization</code> method is called before every action and I don&#39;t want to make a call for that record again and again"}, {"owner": {"reputation": 4168, "user_id": 737275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51f7198e2f8a5bce446aafc6acc85c3b?s=128&d=identicon&r=PG&f=1", "display_name": "blnc", "link": "https://stackoverflow.com/users/737275/blnc"}, "reply_to_user": {"reputation": 1171, "user_id": 1693541, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/ae68b37d5edb59b31eb357554929c4d5?s=128&d=identicon&r=PG", "display_name": "Braham Shakti", "link": "https://stackoverflow.com/users/1693541/braham-shakti"}, "edited": false, "score": 0, "creation_date": 1444800894, "post_id": 33117181, "comment_id": 54048354, "body": "have you thought about writing a dynamic method into the team model called &#39;current_organization&#39; that uses some db logic to pull what you consider to be the current_organization and avoiding a before_filter/before_action that sits in front of all of your actions? Let me try somthing"}, {"owner": {"reputation": 4168, "user_id": 737275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51f7198e2f8a5bce446aafc6acc85c3b?s=128&d=identicon&r=PG&f=1", "display_name": "blnc", "link": "https://stackoverflow.com/users/737275/blnc"}, "reply_to_user": {"reputation": 1171, "user_id": 1693541, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/ae68b37d5edb59b31eb357554929c4d5?s=128&d=identicon&r=PG", "display_name": "Braham Shakti", "link": "https://stackoverflow.com/users/1693541/braham-shakti"}, "edited": false, "score": 0, "creation_date": 1444802270, "post_id": 33117181, "comment_id": 54048862, "body": "from what I can tell it is not possible to retrieve the actual Active Record Object without querying it. perhaps the best fit is to re-visit the design?"}], "tags": [], "owner": {"reputation": 4168, "user_id": 737275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51f7198e2f8a5bce446aafc6acc85c3b?s=128&d=identicon&r=PG&f=1", "display_name": "blnc", "link": "https://stackoverflow.com/users/737275/blnc"}, "is_accepted": false, "score": 0, "last_activity_date": 1444800480, "last_edit_date": 1444800480, "creation_date": 1444800190, "answer_id": 33117181, "question_id": 33116976, "link": "https://stackoverflow.com/questions/33116976/how-to-initialize-record-from-session-variable-in-rails-so-that-we-need-not-to-e/33117181#33117181", "title": "How to initialize record from session variable in rails so that we need not to execute query for initializing a record?", "body": "<p>Try saving the record first.</p>\n\n<p>Until you save it into the database, it is likely not to show up when you query for the team's organization children.</p>\n\n<pre><code>session[:organization_id] = organization.id\n\ndef current_organization\n    Organization.find session[:organization_id]\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1171, "user_id": 1693541, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/ae68b37d5edb59b31eb357554929c4d5?s=128&d=identicon&r=PG", "display_name": "Braham Shakti", "link": "https://stackoverflow.com/users/1693541/braham-shakti"}, "is_accepted": false, "score": 0, "last_activity_date": 1444808201, "creation_date": 1444808201, "answer_id": 33119341, "question_id": 33116976, "link": "https://stackoverflow.com/questions/33116976/how-to-initialize-record-from-session-variable-in-rails-so-that-we-need-not-to-e/33119341#33119341", "title": "How to initialize record from session variable in rails so that we need not to execute query for initializing a record?", "body": "<p>Ok after some googling i found that instead of using </p>\n\n<pre><code>Organization.new(session[:organization])\n</code></pre>\n\n<p>I should use </p>\n\n<pre><code>Organization.instantiate(session[:organization])\n</code></pre>\n\n<p>From <a href=\"http://apidock.com/rails/ActiveRecord/Persistence/ClassMethods/instantiate\" rel=\"nofollow\">apidock</a> I found that</p>\n\n<blockquote>\n  <p><strong>instantiate(attributes, column_types = {}) public</strong></p>\n  \n  <p>Given an attributes hash, instantiate returns a new instance of the\n  appropriate class. Accepts only keys as strings.</p>\n  \n  <p>For example, Post.all may return Comments, Messages, and Emails by\n  storing the record\u2019s subclass in a type attribute. By calling\n  instantiate instead of new, finder methods ensure they get new\n  instances of the appropriate class for each record.</p>\n</blockquote>\n"}], "owner": {"reputation": 1171, "user_id": 1693541, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/ae68b37d5edb59b31eb357554929c4d5?s=128&d=identicon&r=PG", "display_name": "Braham Shakti", "link": "https://stackoverflow.com/users/1693541/braham-shakti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 431, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1444808201, "creation_date": 1444799025, "last_edit_date": 1444799530, "question_id": 33116976, "link": "https://stackoverflow.com/questions/33116976/how-to-initialize-record-from-session-variable-in-rails-so-that-we-need-not-to-e", "title": "How to initialize record from session variable in rails so that we need not to execute query for initializing a record?", "body": "<p>Is there any way to initialize a record from session. for e.g I have a organization object and I put this in session object like</p>\n\n<pre><code>session[:organization] = organization\n</code></pre>\n\n<p>Now I made a custom method <code>current_organization</code> <em>(I know about devise)</em> like</p>\n\n<pre><code>def current_organization\n Organization.new(session[:organization])\nend\n</code></pre>\n\n<p>This will return organization object. My <code>organization</code> <code>belongs_to</code> a <code>team</code> a devise model and <code>team</code> <code>has_many :organizations</code> but when I call </p>\n\n<pre><code>current_team.organizations.includes?(current_organization)\n</code></pre>\n\n<p>in view. It is returning false even if it is included in team's organizations but doing this</p>\n\n<pre><code>current_team.organizations.reload.includes?(current_organization)\n</code></pre>\n\n<p>is returning true. I set the session variable with organization object before calling view where i am using above method. Is there any thing which I missed like I am not able to figure out the reason for not returning true even it is included?</p>\n"}, {"tags": ["ruby", "markdown", "jekyll", "redcarpet"], "answers": [{"comments": [{"owner": {"reputation": 298, "user_id": 3681958, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/372dd6074eae7a4b708f399059f469b4?s=128&d=identicon&r=PG", "display_name": "HotelCalifornia", "link": "https://stackoverflow.com/users/3681958/hotelcalifornia"}, "edited": false, "score": 1, "creation_date": 1444795533, "post_id": 33116359, "comment_id": 54046827, "body": "Ah! Of course: when I first wrote the code, I accidentally typed some of the characters using the Japanese keyboard."}, {"owner": {"reputation": 298, "user_id": 3681958, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/372dd6074eae7a4b708f399059f469b4?s=128&d=identicon&r=PG", "display_name": "HotelCalifornia", "link": "https://stackoverflow.com/users/3681958/hotelcalifornia"}, "edited": false, "score": 1, "creation_date": 1444795581, "post_id": 33116359, "comment_id": 54046840, "body": "Also, I was wondering what those dashes in the stacktrace were... and now I know. Thanks!"}], "tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": true, "score": 3, "last_activity_date": 1444794960, "creation_date": 1444794960, "answer_id": 33116359, "question_id": 33116316, "link": "https://stackoverflow.com/questions/33116316/syntax-error-unexpected-expecting/33116359#33116359", "title": "syntax error, unexpected &#39;)&#39;, expecting &#39;=&#39;", "body": "<p>Your code has some special characters which is causing this error:</p>\n\n<pre><code>syntax error, unexpected ')', expecting '='\n            doc.gs-ub!(/\\[([\\-s\\S]+)\\|([-\\s\\S]+)\\]/-, s)\n</code></pre>\n\n<p>Replace your current code with this piece of code:</p>\n\n<pre><code>class Jekyll::Converters::Markdown::HotelDown &lt; Redcarpet::Render::HTML\n  #Overriding the preprocess() function\n  def preprocess(doc)\n    s = \"&lt;ruby&gt;&lt;rb&gt;\\\\1&lt;/rb&gt;&lt;rp&gt;(&lt;/rp&gt;&lt;rt&gt;\\\\2&lt;/rt&gt;&lt;rp&gt;)&lt;/rp&gt;&lt;/ruby&gt;\"\n    doc.gsub!(/\\[([\\s\\S]+)\\|([\\s\\S]+)\\]/, s)\n    doc\n  end\nend\n\nmarkdown = Redcarpet::Markdown.new(HotelDown)\n</code></pre>\n\n<p>and it should work!</p>\n"}], "owner": {"reputation": 298, "user_id": 3681958, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/372dd6074eae7a4b708f399059f469b4?s=128&d=identicon&r=PG", "display_name": "HotelCalifornia", "link": "https://stackoverflow.com/users/3681958/hotelcalifornia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 771, "favorite_count": 0, "accepted_answer_id": 33116359, "answer_count": 1, "score": 2, "last_activity_date": 1444795548, "creation_date": 1444794675, "last_edit_date": 1444795548, "question_id": 33116316, "link": "https://stackoverflow.com/questions/33116316/syntax-error-unexpected-expecting", "title": "syntax error, unexpected &#39;)&#39;, expecting &#39;=&#39;", "body": "<p>I'm writing an extension for Redcarpet for a Jekyll-powered website. I want to use <code>{x|y}</code> as a tag in markdown that evaluates to the HTML <code>&lt;ruby&gt;</code> tag (and its associates). I wrote this class as per <a href=\"http://jekyllrb.com/docs/configuration/#custom-markdown-processors\" rel=\"nofollow\">Jekyll's guide</a>, <a href=\"http://dev.af83.com/2012/02/27/howto-extend-the-redcarpet2-markdown-lib.html\" rel=\"nofollow\">Redcarpet's guide</a>, and <a href=\"http://dev.af83.com/2012/02/27/howto-extend-the-redcarpet2-markdown-lib.html\" rel=\"nofollow\">this guide</a> on how to do so:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Jekyll::Converters::Markdown::HotelDown &lt; Redcarpet::Render::HTML\n    def preprocess(doc)\n        s = \"&lt;ruby&gt;&lt;rb&gt;\\\\1&lt;/rb&gt;&lt;rp&gt;(&lt;/rp&gt;&lt;rt&gt;\\\\2&lt;/rt&gt;&lt;rp&gt;)&lt;/rp&gt;&lt;/ruby&gt;\"\n        doc.gs\u00adub!(/\\[([\\\u00ads\\S]+)\\|([\u00ad\\s\\S]+)\\]/\u00ad, s)\n        doc\n    end\nend\n</code></pre>\n\n<p>But, I seem to be getting a couple errors when I run <code>bundle exec jekyll serve</code>:</p>\n\n<pre><code>Configuration file: C:/Users/Alex/OneDrive/codes/hotelc.me/hotelc.me/_config.yml\nplugin_manager.rb:58:in `require': HotelDown.rb:4: syntax error, unexpected tIDENTIFIER, expecting ')' (SyntaxError)\n            doc.gs-ub!(/\\[([\\-s\\S]+)\\|([-\\s\\S]+)\\]/-, s)\n                                                        ^\nHotelDown.rb:4: syntax error, unexpected ')', expecting '='\n            doc.gs-ub!(/\\[([\\-s\\S]+)\\|([-\\s\\S]+)\\]/-, s)\n                                                            ^\n</code></pre>\n\n<p>It seems there's something wrong with my syntax (an extra space, missing parentheses, or something like that). Is there something I've missed?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 3075, "user_id": 182139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dad854fb031553bbecd729a292e6860?s=128&d=identicon&r=PG", "display_name": "Aur&#233;lien Bottazini", "link": "https://stackoverflow.com/users/182139/aur%c3%a9lien-bottazini"}, "is_accepted": false, "score": 0, "last_activity_date": 1444806106, "creation_date": 1444806106, "answer_id": 33118666, "question_id": 33116271, "link": "https://stackoverflow.com/questions/33116271/iterate-through-an-array-to-create-rails-objects/33118666#33118666", "title": "Iterate through an array to create rails objects", "body": "<p>There is a good basic example on <em>RailsGuides</em></p>\n\n<p><a href=\"http://guides.rubyonrails.org/form_helpers.html#binding-a-form-to-an-object\" rel=\"nofollow\">http://guides.rubyonrails.org/form_helpers.html#binding-a-form-to-an-object</a></p>\n"}, {"tags": [], "owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "is_accepted": false, "score": 0, "last_activity_date": 1444806740, "creation_date": 1444806740, "answer_id": 33118885, "question_id": 33116271, "link": "https://stackoverflow.com/questions/33116271/iterate-through-an-array-to-create-rails-objects/33118885#33118885", "title": "Iterate through an array to create rails objects", "body": "<p>Do you want to achieve something like this:</p>\n\n<pre><code>def create\n  params[:attendee_id].each do |user_id|\n    Invitation.create(:attended_event_id =&gt; params[:attended_event_id], :attendee_id =&gt; user_id)\n  end\n  .\n  .\n  .\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 4181952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83ef9cb0daeaeef8b8ecec0133c1a010?s=128&d=identicon&r=PG&f=1", "display_name": "Prkl8r", "link": "https://stackoverflow.com/users/4181952/prkl8r"}, "edited": false, "score": 0, "creation_date": 1444850654, "post_id": 33118938, "comment_id": 54079325, "body": "Thanks!! I am going through this but keep running into a: &quot;NoMethodError (undefined method `map&#39; for nil:NilClass):&quot; error. I did everything else verbatum (other than change attendie_id to attendee_id, which I&#39;m guess was just a typo."}, {"owner": {"reputation": 19, "user_id": 4181952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83ef9cb0daeaeef8b8ecec0133c1a010?s=128&d=identicon&r=PG&f=1", "display_name": "Prkl8r", "link": "https://stackoverflow.com/users/4181952/prkl8r"}, "edited": false, "score": 0, "creation_date": 1444952360, "post_id": 33118938, "comment_id": 54129430, "body": "Thanks for getting me started! I had to make a few changes but that basically did the trick. (Edits made in the solution)"}], "tags": [], "owner": {"reputation": 978, "user_id": 3797480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZuuZI.jpg?s=128&g=1", "display_name": "nsave", "link": "https://stackoverflow.com/users/3797480/nsave"}, "is_accepted": true, "score": 0, "last_activity_date": 1444955441, "last_edit_date": 1444955441, "creation_date": 1444806918, "answer_id": 33118938, "question_id": 33116271, "link": "https://stackoverflow.com/questions/33116271/iterate-through-an-array-to-create-rails-objects/33118938#33118938", "title": "Iterate through an array to create rails objects", "body": "<p>Do you mean something like this?</p>\n\n<pre><code>&lt;%= bootstrap_form_for Invitation.new do |f| %&gt;\n  &lt;br&gt;\n    &lt;ul&gt;\n      &lt;%= f.hidden_field :attended_event_id, :value =&gt; @event_selected.id %&gt;\n      &lt;% users.each do |user| %&gt;\n        &lt;li&gt;\n          &lt;%= check_box_tag 'invitation[attendee_id][]', user.id %&gt;\n          &lt;%= h user.name %&gt;\n        &lt;/li&gt;\n      &lt;% end %&gt;\n    &lt;/ul&gt;\n  &lt;br&gt;\n  &lt;%= f.submit \"Invite Selected Users\" %&gt;\n&lt;% end %&gt;\n\n\ndef create\n@invitations = invite_params[:attendee_id].map do |attendee_id|\n  Invitation.new(\n    attended_event_id: invite_params[:attended_event_id],\n    attendee_id: attendee_id\n  )\nend\n\nif @invitations.any?(&amp;:invalid?)\n  flash.now[:error] = \"Failure!\"\n  redirect_to root_path\nelse\n  @invitations.each(&amp;:save!)\n  flash.now[:success] = \"Invited!\"\n  redirect_to root_path\nend\nend\n\nprivate\ndef invite_params\n  params.require(:invitation).permit(:attended_event_id, {:attendee_id =&gt; []})\nend\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 4181952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83ef9cb0daeaeef8b8ecec0133c1a010?s=128&d=identicon&r=PG&f=1", "display_name": "Prkl8r", "link": "https://stackoverflow.com/users/4181952/prkl8r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 1, "accepted_answer_id": 33118938, "answer_count": 3, "score": 0, "last_activity_date": 1444955441, "creation_date": 1444794254, "question_id": 33116271, "link": "https://stackoverflow.com/questions/33116271/iterate-through-an-array-to-create-rails-objects", "title": "Iterate through an array to create rails objects", "body": "<p>I am having trouble finding any information on how to iterate through an array and create objects. </p>\n\n<p>My form creates a selectable list of users that when checked, pass the user_ids as an array object. </p>\n\n<p>invitations\\new.html.rb</p>\n\n<pre><code>&lt;%= bootstrap_form_for Invitation.new do |f| %&gt;\n&lt;br&gt;\n  &lt;ul&gt;\n    &lt;%= f.hidden_field :attended_event_id, :value =&gt; @event_selected.id %&gt;\n    &lt;li&gt;\n    &lt;%= check_box_tag 'attendee_id[]', user.id %&gt;\n    &lt;%= h user.name %&gt;\n    &lt;/li&gt;\n    &lt;% end %&gt;\n  &lt;/ul&gt;\n&lt;br&gt;\n&lt;%= f.submit \"Invite Selected Users\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I would like to then create new Invitations objects by combining the attended_event_id with all of the objects in the attendee_id array. </p>\n\n<p>After a bit of trouble I got the basics of my controller working but only by passing in the user_id as a text entry. Below is my Invitations controller. Not really sure where to start on this one as I haven't been able to find a good example. </p>\n\n<p>invitations_controller.rb</p>\n\n<pre><code>  def create\n     @invitation = Invitation.new(invite_params)\n\n     if @invitation.save!\n      flash.now[:success] = \"Invited!\"\n       redirect_to root_path\n     else\n      flash.now[:error] = \"Failure!\"\n      redirect_to root_path\n     end\n  end\n\n  private\n  def invite_params\n\n    params.require(:invitation).permit(:attended_event_id, :attendee_id)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "hash"], "answers": [{"tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": false, "score": 4, "last_activity_date": 1444796089, "last_edit_date": 1444796089, "creation_date": 1444794361, "answer_id": 33116281, "question_id": 33116115, "link": "https://stackoverflow.com/questions/33116115/converting-ruby-hash-into-json-object/33116281#33116281", "title": "converting ruby hash into json object", "body": "<p>You can convert a Ruby hash into JSON using <code>to_json</code>:</p>\n\n<pre><code>require 'json'\n\nyour_hash.to_json # gives you a JSON object\n</code></pre>\n\n<p>But, in your case the data is an array of hashes, but NOT a hash. So, your <code>to_json</code> would not work.</p>\n\n<p>I am not quite sure how you want to do this, but one possibility is to loop through the array of hashes, get each hash and convert that to a JSON object using <code>to_json</code> call (like shown above) and build a new array of JSON objects. This way, you can build an array of JSON objects from an array of hashes.</p>\n\n<pre><code>array_of_json = []\n# loop through the array of hashes\nclean_response.each do |hash|\n  array_of_json &lt;&lt; hash.to_json\nend\narray_of_json # array of JSON objects\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 897, "user_id": 5255019, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-obI_W7jTY6M/AAAAAAAAAAI/AAAAAAAACLg/-ccFAzkxIq4/photo.jpg?sz=128", "display_name": "Brian", "link": "https://stackoverflow.com/users/5255019/brian"}, "is_accepted": false, "score": 0, "last_activity_date": 1444799498, "creation_date": 1444799498, "answer_id": 33117053, "question_id": 33116115, "link": "https://stackoverflow.com/questions/33116115/converting-ruby-hash-into-json-object/33117053#33117053", "title": "converting ruby hash into json object", "body": "<p>If by \"serve it to a specific view\" you mean pass it to a .haml or .erb template, you can pass the array of hashes as is. Both haml and erb will allow you to iterate over the array, and even the hash if you want.</p>\n\n<p>If you mean you want to hand a json string to the browser, #to_json should work fine. Other options are jbuilder or oat when you want to refine what is sent, but to_json should \"serve\" you well!</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4930839"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6546, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1444799498, "creation_date": 1444793099, "question_id": 33116115, "link": "https://stackoverflow.com/questions/33116115/converting-ruby-hash-into-json-object", "title": "converting ruby hash into json object", "body": "<p>So I am iterating through a set of data and building a hash from it:</p>\n\n<pre><code>clean_response = Array.new\n        response.each_with_index do |h, idx|\n        clean_response &lt;&lt;\n        {\n                    :lat =&gt; h[\"location\"][\"latitude\"],\n                    :lg =&gt; h[\"location\"][\"longitude\"],\n                    :place =&gt; h[\"location\"][\"name\"],\n                    #This grabs the entire hash at \"location\" because we are wanting all of that data\n                    :profile_picture =&gt; h[\"user\"][\"profile_picture\"],\n                    :hash_tags =&gt; h[\"tags\"],\n                    :username =&gt; h[\"user\"][\"username\"],\n                    :fullname =&gt; h[\"user\"][\"full_name\"],\n                    :created_time =&gt; (Time.at(h[\"created_time\"].to_i)).to_s,\n                    :image =&gt; h[\"images\"][\"low_resolution\"][\"url\"] # we can replace this with whichever resolution.\n        }\n        end\n</code></pre>\n\n<p>Which return an array of hashes like so:</p>\n\n<pre><code>[{:lat=&gt;40.7486382,\n  :lg=&gt;-73.9487686,\n  :place=&gt;\"The Cliffs at LIC\",\n  :profile_picture=&gt;\"http://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-19/s150x150/12104940_1653775014895036_286845624_a.jpg\",\n  :hash_tags=&gt;[\"bouldering\"],\n  :username=&gt;\"denim_climber\",\n  :fullname=&gt;\"DenimClimber\",\n  :created_time=&gt;2015-10-13 22:58:09 -0400,\n  :image=&gt;\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/s320x320/e35/11856571_1062082890510188_611068928_n.jpg\"},\n {:lat=&gt;40.7459602,\n  :lg=&gt;-73.9574966,\n  :place=&gt;\"SHI\",\n  :profile_picture=&gt;\"http://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-19/11348212_1453525204954535_631200718_a.jpg\",\n  :hash_tags=&gt;[\"cousins\", \"suchafunmoment\", \"johnlennonstyle\"],\n  :username=&gt;\"xiomirb\",\n  :fullname=&gt;\"Xiomi\",\n  :created_time=&gt;2015-10-13 22:57:21 -0400,\n  :image=&gt;\"https://scontent.cdninstagram.com/hphotos-xaf1/t51.2885-15/s320x320/e35/11375290_1688934151392424_2009781937_n.jpg\"}]\n</code></pre>\n\n<p>I'd like to convert this data to json and then serve it to a specific view. \nHow can I convert this? I tried the <code>.to_json</code> method but it doesn't return a well formatted one since my UI isn't binding to the data.</p>\n"}, {"tags": ["ruby", "rake"], "answers": [{"tags": [], "owner": {"reputation": 1311, "user_id": 3228012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61d46264687a98d404fd749f658d92fc?s=128&d=identicon&r=PG", "display_name": "Caillou", "link": "https://stackoverflow.com/users/3228012/caillou"}, "is_accepted": false, "score": 1, "last_activity_date": 1444917628, "last_edit_date": 1444917628, "creation_date": 1444821610, "answer_id": 33123946, "question_id": 33115910, "link": "https://stackoverflow.com/questions/33115910/get-chain-of-calling-rake-tasks/33123946#33123946", "title": "Get chain of calling rake tasks", "body": "<p>I don't know if there is a native solution, but here is what I would have done :</p>\n\n<ul>\n<li>Create a file named \"task_chain.json\"</li>\n<li><p>On the beginning of each of your tasks, append the name of the task into the Hash inside the file : </p>\n\n<pre><code>#getting the list\ntask_list = JSON.parse(File.open(\"task_chain.json\"))\n\n#updating the list\ntask_list &lt;&lt; \"my_new_task_name\"\n\n#writing the list\nFile.open(\"task_chain.json\", \"w\"){ |file|\n  file.write(JSON.pretty_generate(task_list))\n}\n</code></pre></li>\n<li><p>Then, you just need to access this file in order to know your chain of tasks : <code>task_list = JSON.parse(File.open(\"task_chain.json\"))</code></p></li>\n</ul>\n\n<p>You might want to make this into methods, for not repeating the same code over and over. And don't forget to empty the file before the first task of your chain.</p>\n"}], "owner": {"reputation": 7734, "user_id": 2490003, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/3dRD0.png?s=128&g=1", "display_name": "user2490003", "link": "https://stackoverflow.com/users/2490003/user2490003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444917628, "creation_date": 1444791843, "question_id": 33115910, "link": "https://stackoverflow.com/questions/33115910/get-chain-of-calling-rake-tasks", "title": "Get chain of calling rake tasks", "body": "<p>Let's say I have a chain of <code>rake</code> tasks</p>\n\n<pre><code>taskA  --(calls)--&gt;  taskB  --(calls)--&gt;  taskC\n</code></pre>\n\n<p>Is there any way, in the middle of <code>taskC</code> to get the list of invoking rake tasks? I.e. the chain of <code>rake</code> tasks that have been called to lead up to this task? </p>\n\n<p><code>caller</code> returns a not-so-useful stack trace in this instance.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web", "erb"], "comments": [{"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1444791647, "post_id": 33115759, "comment_id": 54045823, "body": "See if this one helps: <a href=\"http://stackoverflow.com/questions/15313892/rails-range-field-from-0-to-100\" title=\"rails range field from 0 to 100\">stackoverflow.com/questions/15313892/&hellip;</a>"}, {"owner": {"reputation": 153, "user_id": 3761348, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1012827205/picture?type=large", "display_name": "Ghi102", "link": "https://stackoverflow.com/users/3761348/ghi102"}, "reply_to_user": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1444795652, "post_id": 33115759, "comment_id": 54046848, "body": "My question was poorly written, I need to display the number chosen on the slider."}], "answers": [{"tags": [], "owner": {"reputation": 3798, "user_id": 7693, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/u5IF3.png?s=128&g=1", "display_name": "tamersalama", "link": "https://stackoverflow.com/users/7693/tamersalama"}, "is_accepted": true, "score": 2, "last_activity_date": 1444796724, "creation_date": 1444796724, "answer_id": 33116618, "question_id": 33115759, "link": "https://stackoverflow.com/questions/33115759/getting-the-value-of-range-field-tag/33116618#33116618", "title": "Getting the value of range_field_tag", "body": "<p>You should be using JavaScript to display</p>\n\n<pre><code>&lt;% # your erb %&gt;\n&lt;%= range_field_tag 'ranger', in: 1...10, step: 1 %&gt;\n&lt;div id='target'&gt;&lt;/div&gt;\n\n#JavaScript using JQuery &amp; coffee - works in Chrome\n$('#ranger').on 'input', -&gt;\n  $('#target').text($('#ranger').val())\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 3761348, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1012827205/picture?type=large", "display_name": "Ghi102", "link": "https://stackoverflow.com/users/3761348/ghi102"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1157, "favorite_count": 1, "accepted_answer_id": 33116618, "answer_count": 1, "score": 1, "last_activity_date": 1444796724, "creation_date": 1444790669, "last_edit_date": 1444795618, "question_id": 33115759, "link": "https://stackoverflow.com/questions/33115759/getting-the-value-of-range-field-tag", "title": "Getting the value of range_field_tag", "body": "<p>I'm trying to get the value of the <code>range_field_tag</code> and display it in the page, modifying the number as it moves along. (So it starts at value 1 and displays 1, move the slider up to 3 and the displayed value changes to 3).</p>\n\n<pre><code>&lt;%= range_field_tag 'ranger', in: 1...10, step: 1 %&gt;\n</code></pre>\n\n<p>Do I have to extract the value of this in the controller or is there a way to get that working in erb? Or will that require Javascript?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "image-uploading", "imgur"], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 1368785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/654c203f4d1c78392370aeb8325bbb58?s=128&d=identicon&r=PG", "display_name": "Matt Rayner", "link": "https://stackoverflow.com/users/1368785/matt-rayner"}, "is_accepted": false, "score": 0, "last_activity_date": 1444810022, "creation_date": 1444810022, "answer_id": 33119936, "question_id": 33115642, "link": "https://stackoverflow.com/questions/33115642/uploading-multiple-images-to-imgur-api-with-ruby-is-slow/33119936#33119936", "title": "Uploading Multiple Images to Imgur API with Ruby is Slow", "body": "<p>I'd take a look at Typhoeus <a href=\"https://github.com/typhoeus/typhoeus\" rel=\"nofollow\">https://github.com/typhoeus/typhoeus</a> - I've used this in the past to handle uploads etc to Amazon Glacier. I found that it could be much faster - Typhoeus gives you a future object and will handle the upload of you in the background without blocking the application.</p>\n\n<p>I hope this helps!</p>\n"}], "owner": {"reputation": 6059, "user_id": 1197246, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1c752a51e48f7574720d80c2468006e7?s=128&d=identicon&r=PG", "display_name": "Tom Prats", "link": "https://stackoverflow.com/users/1197246/tom-prats"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444810022, "creation_date": 1444789896, "question_id": 33115642, "link": "https://stackoverflow.com/questions/33115642/uploading-multiple-images-to-imgur-api-with-ruby-is-slow", "title": "Uploading Multiple Images to Imgur API with Ruby is Slow", "body": "<p>So I have a form that can submit multiple images at once. I also wrote a wrapper for the Imgur API in Ruby. My problem is that since this happens completely synchronously, it takes forever and times out for even 10 images. I'm wondering if there is a better way that would be able to handle more images.</p>\n\n<p>All I can think of is asynchronously submitting forms with one image each, but I'm not sure if that's a good idea or if it will just hold up other requests.</p>\n\n<pre><code>class MissionsController &lt; ApplicationController\n  def add_images\n    image_ids = params[:images].collect do |image|\n      Image.with_imgur(\n        title: \"#{@mission.trip.name} - #{current_user.username}\",\n        image: image,\n        album_id: @mission.album.imgur_id,\n        user_id: current_user.id,\n        trip_id: @mission.trip_id\n      ).imgur_id\n    end\n  end\nend\n\nclass Image &lt; ActiveRecord::Base\n  def self.with_imgur(options)\n    trip_id = options.delete(:trip_id)\n    user_id = options.delete(:user_id)\n    image = Imgur::Image.create(options)\n    create(\n      imgur_id: image[\"id\"],\n      link: image[\"link\"],\n      trip_id: trip_id,\n      user_id: user_id\n    )\n  end\nend\n</code></pre>\n\n<p><a href=\"https://github.com/tomprats/toms-missions/blob/master/app/models/imgur.rb#L116\" rel=\"nofollow\">https://github.com/tomprats/toms-missions/blob/master/app/models/imgur.rb#L116</a></p>\n\n<pre><code>class Imgur::Image &lt; Base\n  def self.create(options)\n    url = \"https://api.imgur.com/3/image\"\n    params = {\n      image: options[:image],\n      album: options[:album_id],\n      type: options[:type] || \"file\", # \"file\" || \"base64\" || \"URL\"\n      title: options[:title],\n      description: options[:description]\n    }\n    api_post(url, params).body[\"data\"]\n  end\nend\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "random"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1444790295, "post_id": 33115335, "comment_id": 54045432, "body": "Does it have to be an increasing sequence? Do only consecutive numbers matter? Is <code>[1, 4, 1, 4, 1]</code> okay  (provided it was generated randomly?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1444812971, "post_id": 33115335, "comment_id": 54054700, "body": "What is a random sequence in this case? I can think of two ways of drawing a random set of M numbers between 1 and N such that no two numbers are within D of each other. The first is to enumerate all such sets of numbers and then select one at random. (Depending on N, M and D, there could be quite a few sets.) The second way would be to randomly draw N numbers and then check to see if any pair is within D of each other. If not, you have a random set; if so, discard the set and draw another random set of N, continuing until a set passes the test. (cont...)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1444813483, "post_id": 33115335, "comment_id": 54055074, "body": "(...cont.) Again, that could take quite awhile. (It all depends on the values of the three parameters.) Both of those methods result in a random set being drawn. If, however, both of those approaches are computationally infeasible, and you resort to some <i>ad hoc</i> procedure, you will probably not draw a set randomly and will have no idea how skewed your sample might be."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1444811264, "post_id": 33115429, "comment_id": 54053627, "body": "It should be <code>&lt; diff</code>, not <code>&lt;= diff</code>. Or you could use <code>keep_if</code> and <code>&gt;= diff</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1444811514, "post_id": 33115429, "comment_id": 54053769, "body": "Note that your candidates array has to be large enough in order to guarantee 5 results, in this case at least 1..21 (if I&#39;m not mistaken)."}, {"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1444811845, "post_id": 33115429, "comment_id": 54053959, "body": "@Stefan You are right, the current code doesn&#39;t check for validity of input. It should be more defensive to be used in real, however I&#39;ll keep it simple here, just showing the idea."}], "tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": false, "score": 3, "last_activity_date": 1444811402, "last_edit_date": 1444811402, "creation_date": 1444788452, "answer_id": 33115429, "question_id": 33115335, "link": "https://stackoverflow.com/questions/33115335/set-random-numbers-in-array-with-spacing/33115429#33115429", "title": "Set random numbers in array with spacing", "body": "<p>Here's one idea: every time a random number is generated, remove every number that's close to it from the candidates:</p>\n\n<pre><code>def gen_rand_arr(arr, diff)\n  sample = arr.sample\n  arr.delete_if {|x| (x - sample).abs &lt; diff }\n  sample\nend\n</code></pre>\n\n<p>Then use it like:</p>\n\n<pre><code>arr = (1..100).to_a\nresult = []\n1.upto(5) { result &lt;&lt; gen_rand_arr(arr, 3) }\np result.sort\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1444791046, "post_id": 33115473, "comment_id": 54045649, "body": "You are adding an additional constraint to the sequence. That is one way to make sense out of the OP&#39;s bad question. It is the OP&#39;s fault that the question was not clear, but I am not sure whether that was intended by the OP."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1444791084, "post_id": 33115473, "comment_id": 54045662, "body": "However, don&#39;t use global variables for such very temporal things."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1444810150, "post_id": 33115473, "comment_id": 54053037, "body": "This approach will fetch random numbers from the ranges 4..21, 24..41, 44..61, 64..81 and 84..101. Numbers from the gaps in-between are never returned."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1444943896, "post_id": 33115473, "comment_id": 54126261, "body": "It&#39;s laughable to suggest that this would produce anything close to random sequences. Not only are there the gaps @Stefan mentioned, but forcing the selection of exactly one number in each interval is the antithesis of randomness."}, {"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1444944148, "post_id": 33115473, "comment_id": 54126386, "body": "<b>&quot;but forcing the selection of exactly one number in each interval&quot;</b> Isn&#39;t exactly this that rand do,  choose one number in each interval?  I don&#39;t see your point, could you please elaborate ?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1444953122, "post_id": 33115473, "comment_id": 54129639, "body": "Momentarily forgetting about the requirement that numbers cannot be too close to each other, suppose we just drew 5 numbers between 1 and 100 and wanted to compute the probability that each of the five intervals 1-20, 21-40, 41-60, 61-80 and 81-100 contained one number. To simplify the calculations I will assume sampling with replacement, which gives a close approximation to sampling with replacement (multinomial distribution). The first number can go in any of the five intervals, The second must go in one of the remaining 4 intervals, for which the probability is 4/5, (cont....)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1444953271, "post_id": 33115473, "comment_id": 54129688, "body": "(...cont.) the third must go in one of the remaining 3 intervals, having a probability of 3/5, etc. Therefore, the probability of there being one randomly-drawn number in each interval equals 4!/5^4, which is about 0.038."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1444980646, "post_id": 33115473, "comment_id": 54138198, "body": "If I&#39;m not mistaken, there are <a href=\"https://www.wolframalpha.com/input/?i=87+choose+5\" rel=\"nofollow noreferrer\">~37 million</a> possibilities for these 5 numbers, but this algorithm only yields <a href=\"https://www.wolframalpha.com/input/?i=17%5E5\" rel=\"nofollow noreferrer\">~1.4 million</a> possibilities, that&#39;s just ~4%."}, {"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1444992207, "post_id": 33115473, "comment_id": 54144749, "body": "My code isn&#39;t the algorithm for euro millions.  The OP just need <b>&quot;5 numbers, randomly generated between 1 and 100, but ensuring that no number is closer than 3.&quot;</b> The possibilities here doesn&#39;t matter, it&#39;s something very basic I guess you didn&#39;t understand the question properly. Nice explanation though."}], "tags": [], "owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "is_accepted": true, "score": 1, "last_activity_date": 1444791189, "last_edit_date": 1444791189, "creation_date": 1444788785, "answer_id": 33115473, "question_id": 33115335, "link": "https://stackoverflow.com/questions/33115335/set-random-numbers-in-array-with-spacing/33115473#33115473", "title": "Set random numbers in array with spacing", "body": "<pre><code>i = 1\nwhile i &lt; 100  do\n   final = rand(i+3..i+20)\n   (a ||= []).push(final)\n   i +=20\nend\np a\n</code></pre>\n\n<hr>\n\n<p>Some random examples.</p>\n\n<pre><code>[18, 39, 48, 65, 83]\n[9, 27, 56, 66, 100]\n[10, 29, 46, 68, 86]\n[11, 34, 57, 64, 86]\n[3, 31, 46, 70, 99]\n[16, 36, 43, 75, 92]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4793, "user_id": 1099230, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d9d86aa069778820dfc676147d432c2d?s=128&d=identicon&r=PG", "display_name": "luoluo", "link": "https://stackoverflow.com/users/1099230/luoluo"}, "is_accepted": false, "score": 0, "last_activity_date": 1444791126, "last_edit_date": 1444791126, "creation_date": 1444790399, "answer_id": 33115719, "question_id": 33115335, "link": "https://stackoverflow.com/questions/33115335/set-random-numbers-in-array-with-spacing/33115719#33115719", "title": "Set random numbers in array with spacing", "body": "<p>How about this random version one?</p>\n\n<pre><code>sample_result = []\narr = (1..100).to_a\ndiff = 15\nresult_len = 5\n1.upto(result_len) {\n    sample = arr.sample\n    sample_result &lt;&lt; sample\n    (sample-diff..sample+diff).each do \n        |i| arr.delete(i)\n    end\n}\np sample_result.sort\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 0, "last_activity_date": 1444977572, "last_edit_date": 1495542148, "creation_date": 1444828573, "answer_id": 33126387, "question_id": 33115335, "link": "https://stackoverflow.com/questions/33115335/set-random-numbers-in-array-with-spacing/33126387#33126387", "title": "Set random numbers in array with spacing", "body": "<p>Here's another way to approach this.</p>\n\n<p>The smallest numbers allowed are:</p>\n\n<pre><code>a = Array.new(5) { |i| i * 3 + 1 }\n#=&gt; [1, 4, 7, 10, 13]\n</code></pre>\n\n<p>We can increment these numbers (or this group of numbers) 100 - 13 = 87 times until we hit the end:</p>\n\n<pre><code>87.times { a[0..-1] = a[0..-1].map(&amp;:next) }\na #=&gt; [88, 91, 94, 97, 100]\n</code></pre>\n\n<p>These are the largest numbers allowed.</p>\n\n<p>Instead of incrementing all elements, we can pick a random element each time and increment that one (and it's right neighbors):</p>\n\n<pre><code>def spread(size, count, step)\n  arr = Array.new(count) { |i| i * step + 1 }\n  (size - arr.last).times do\n    i = rand(0..arr.size)\n    arr[i..-1] = arr[i..-1].map(&amp;:next)\n  end\n  arr\nend\n\n5.times do\n  p spread(100, 5, 3)\nend\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[21, 42, 56, 73, 86]\n[6, 21, 45, 61, 81]\n[20, 33, 48, 63, 81]\n[12, 38, 55, 75, 90]\n[11, 29, 50, 71, 86]\n[26, 44, 64, 79, 95]\n</code></pre>\n\n<p>Unfortunately we have to loop several times to generate the final values. This is not only slow, but also results in a non-uniform distribution:</p>\n\n<p><img src=\"https://i.stack.imgur.com/hWVyk.png\" alt=\"Distribution 1\"></p>\n\n<p>It would be better to determine 6 random offsets that sum to 87 and move the elements accordingly. Why 6? Because the offsets are the distances between our 5 numbers, i.e.:</p>\n\n<pre><code>       n1       n2                 n3     n4           n5            \n|&lt;-o1-&gt;|&lt;--o2--&gt;|&lt;-------o3-------&gt;|&lt;-o4-&gt;|&lt;----o5----&gt;|&lt;----o6----&gt;|\n0                                                                  max\n</code></pre>\n\n<p>This helper method returns such offsets: (stolen from <a href=\"https://stackoverflow.com/a/8064754/477037\">here</a>)</p>\n\n<pre><code>def offsets(size, count)\n  offsets = Array.new(count) { rand(0..size) }.sort\n  [0, *offsets, size].each_cons(2).map { |a, b| b - a }\nend\n\no = offsets(87, 5) #=&gt; [3, 0, 15, 4, 64, 1]\no.inject(:+)       #=&gt; 87\n</code></pre>\n\n<p>We can add the offsets to our initial number array:</p>\n\n<pre><code>def spread(size, count, step)\n  arr = Array.new(count) { |i| i * step }\n  offsets(size - arr.last, count).each_with_index do |offset, index|\n    arr[index..-1] = arr[index..-1].map { |i| i + offset }\n  end\n  arr\nend\n\n5.times do\n  p spread(99, 5, 3)\nend\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[1, 14, 48, 60, 94]\n[12, 46, 54, 67, 72]\n[8, 14, 35, 40, 45]\n[27, 30, 51, 81, 94]\n[63, 79, 86, 90, 96]\n</code></pre>\n\n<p>As expected, this results in a random distribution:</p>\n\n<p><img src=\"https://i.stack.imgur.com/7Km9h.png\" alt=\"Distribution 2\"></p>\n\n<p>That looks better. Note that these results are zero based.</p>\n\n<p>We can even remove the initial array and calculate the final values from the offsets. Starting with the first offset, we just have to add each following offset plus 3:</p>\n\n<pre><code>def spread(size, count, step)\n  offs = offsets(size - (count - 1) * step, count)\n  (1...offs.size).each { |i| offs[i] += offs[i-1] + step }\n  offs[0, count]\nend\n</code></pre>\n"}], "owner": {"reputation": 4666, "user_id": 24708, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/544e2e76286098a2c64c3638401d2191?s=128&d=identicon&r=PG", "display_name": "jmccartie", "link": "https://stackoverflow.com/users/24708/jmccartie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 33115473, "answer_count": 4, "score": 0, "last_activity_date": 1444977572, "creation_date": 1444787594, "last_edit_date": 1444790247, "question_id": 33115335, "link": "https://stackoverflow.com/questions/33115335/set-random-numbers-in-array-with-spacing", "title": "Set random numbers in array with spacing", "body": "<p>I need to fill a Ruby array with N random numbers. However, I need to ensure that they are X numbers apart from each other.</p>\n\n<p>For instance, I need to fill an array with 5 numbers, randomly generated between 1 and 100, but ensuring that no number is closer than 3.</p>\n\n<p>So this is valid:</p>\n\n<pre><code>[1, 4, 7, 22, 84]  # the differences between the numbers are &gt;= 3\n</code></pre>\n\n<p>This is not valid:</p>\n\n<pre><code>[1, 2, 50, 70, 90] # \"1\" and \"2\" are too close together\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 6165, "user_id": 2697183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65255fe741b95ba0c641d96ea6750ea9?s=128&d=identicon&r=PG&f=1", "display_name": "AbM", "link": "https://stackoverflow.com/users/2697183/abm"}, "edited": false, "score": 0, "creation_date": 1444788477, "post_id": 33115178, "comment_id": 54045048, "body": "Check the documentation for <a href=\"http://guides.rubyonrails.org/association_basics.html#the-belongs-to-association\" rel=\"nofollow noreferrer\">belongs_to</a>. You need to add <code>fruit_id</code> to your <code>berries</code> table"}, {"owner": {"reputation": 36449, "user_id": 2453699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b0a49d160baf7d95b81d798ea0cb65?s=128&d=identicon&r=PG", "display_name": "vee", "link": "https://stackoverflow.com/users/2453699/vee"}, "edited": false, "score": 0, "creation_date": 1444788842, "post_id": 33115178, "comment_id": 54045135, "body": "Broken english could equally recieve help from our <a href=\"http://english.stackexchange.com/\">english.stackexchange.com</a>"}], "answers": [{"tags": [], "owner": {"reputation": 943, "user_id": 546950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60de781d84a6767b10c5040c54180433?s=128&d=identicon&r=PG", "display_name": "robertoplancarte", "link": "https://stackoverflow.com/users/546950/robertoplancarte"}, "is_accepted": false, "score": 1, "last_activity_date": 1444791480, "creation_date": 1444791480, "answer_id": 33115857, "question_id": 33115178, "link": "https://stackoverflow.com/questions/33115178/how-to-using-where-to-dynamic-build-realation/33115857#33115857", "title": "How to using &quot;where&quot; to dynamic build realation", "body": "<p>First of all bannanas are considered <a href=\"https://www.google.com/search?sourceid=chrome-psyapi2&amp;ion=1&amp;espv=2&amp;es_th=1&amp;ie=UTF-8&amp;q=list%20of%20berries&amp;oq=list%20of%20berries&amp;aqs=chrome..69i57j0l5.3715j0j4\" rel=\"nofollow\">berries</a>... sometimes </p>\n\n<p>There are at least 2 ways of doing this\n <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Inheritance.html\" rel=\"nofollow\">Single Table Inheritance</a> (STI)\n <a href=\"http://dan.chak.org/enterprise-rails/chapter-10-multiple-table-inheritance/\" rel=\"nofollow\">Multiple Table Inheritance</a></p>\n\n<p>In STI you only create the fruits table in the database, but add all the columns the Berry class will need. Even if this method will leave many blank spaces in the DB where fruits aren't berries, I recommend it because it is pretty straight forward and supported by rails. To use it change your <code>attr</code> column to <code>type</code> and add the <code>hp</code>, <code>atk</code> and <code>def</code> columns in a migration:</p>\n\n<pre><code>rails g migration AddAttrsToFruit hp:integer atk:integer def:integer\nrails g migration ChangeAttrToType\n</code></pre>\n\n<p>Since the migration generator doesn't do magic like when the migration starts with the word Change as it does with Add, you have to edit the change function in the migration it creates to look like this:</p>\n\n<pre><code>rename_column :fruits, :attr, :type\n</code></pre>\n\n<p>Then change your Berry class to inherit from Fruit instead of ActiveRecord::Base</p>\n\n<pre><code>class Berry &lt; ActiveRecord::Base\n  belongs_to :fruit\nend\n</code></pre>\n\n<p>Now when you create a Berry</p>\n\n<pre><code>Berry.create(name: 'Coconut', hp:100, atk:5, def:999)\n</code></pre>\n\n<p>Rails creates a the record in the Fruit table with all the attributes filed in:</p>\n\n<pre><code>#&lt;ActiveRecord::Relation [#&lt;Berry id: 1, name: nil, type: \"Berry\", created_at: \"2015-10-14 02:38:09\", updated_at: \"2015-10-14 02:38:09\", hp: 1, atk: nil, def: nil&gt;]&gt;\n</code></pre>\n\n<p>For MTI you can read the link.\nGood luck :)</p>\n"}, {"tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": false, "score": 1, "last_activity_date": 1444818584, "creation_date": 1444818584, "answer_id": 33122938, "question_id": 33115178, "link": "https://stackoverflow.com/questions/33115178/how-to-using-where-to-dynamic-build-realation/33122938#33122938", "title": "How to using &quot;where&quot; to dynamic build realation", "body": "<p>Great answer from <code>robertoplancarte</code> - to explain a little more simply for you, you're looking to use a <a href=\"http://guides.rubyonrails.org/association_basics.html#the-has-many-association\" rel=\"nofollow noreferrer\"><code>has_many/belongs_to</code></a> relationship:</p>\n\n<p><a href=\"https://i.stack.imgur.com/bYUuH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bYUuH.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>#app/models/fruit.rb\nclass Fruit &lt; ActiveRecord::Base\n   has_many :berries\nend\n\n#app/models/berry.rb\nclass Berry &lt; ActiveRecord::Base\n   belongs_to :fruit\nend\n</code></pre>\n\n<p>You can set it up in your database as follows:</p>\n\n<pre><code>#fruits\n+-----+------------+-----------+\n| id  |    name    |   attr    |\n+-----+------------+-----------+\n| 123 | Blueberry  | berry     |\n| 932 | Apple      | not berry |\n| 429 | Banana     | not berry |\n| 563 | Strawberry | berry     |\n+-----+------------+-----------+\n\n#berries\n+-----+----------+----+-----+-----+\n| id  | fruit_id | hp | atk | def |\n+-----+----------+----+-----+-----+\n| 1   | 123      | 15 |   5 |   5 |\n| 2   | 932      | 10 |   3 |   x |\n+-----+----+-----+----+-----+-----+\n</code></pre>\n\n<p>This will allow you to call...</p>\n\n<pre><code>@fruit = Fruit.find params[:id]\n@fruit.berries\n</code></pre>\n\n<hr>\n\n<p>What <code>robertoplancarte</code> was saying was your current setup is pretty weak:</p>\n\n<blockquote>\n  <ol>\n  <li>You're identifying which \"fruit\" is a berry manually</li>\n  <li>You're then populating another model with data which could be put into the first</li>\n  </ol>\n</blockquote>\n\n<p>The way around this is to use something called an <a href=\"http://samurails.com/tutorial/single-table-inheritance-with-rails-4-part-1/\" rel=\"nofollow noreferrer\">STI - Single Table Inheritance</a>.</p>\n\n<p>This is a Railsy way to use a single model to define multiple <em>types</em> of data:</p>\n\n<pre><code>#app/models/fruit.rb\nclass Fruit &lt; ActiveRecord::Base\n   #columns id | type | name | hp | atk | def | created_at | updated_at \nend\n\n#app/models/berry.rb\nclass Berry &lt; Fruit\nend\n</code></pre>\n\n<p>This will give you the ability to call:</p>\n\n<pre><code>@berry = Berry.find x\n</code></pre>\n\n<p>This is more appropriate for your requirements; is somewhat advanced, but nothing a question on StackOverflow would be defeated by.</p>\n"}], "owner": {"reputation": 11, "user_id": 5405668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a19b2b15047e5220dd39ab30b515047?s=128&d=identicon&r=PG&f=1", "display_name": "Xoniyc.L", "link": "https://stackoverflow.com/users/5405668/xoniyc-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1444818584, "creation_date": 1444786133, "question_id": 33115178, "link": "https://stackoverflow.com/questions/33115178/how-to-using-where-to-dynamic-build-realation", "title": "How to using &quot;where&quot; to dynamic build realation", "body": "<p>Sry for broken english</p>\n\n<p>I have 2 table fruits and berries and 2 model fruit and berry, both id are primary key, berries's id is a foreign key of fruits.</p>\n\n<p>The meaning is if fruit's attr is \"berry\" then this fruit will have hp, atk, def. other just a normal fruit, they don't have hp, atk, def.</p>\n\n<p>i'm tring \"where\" but not work, and i have no idea to add foreign key to migrate file</p>\n\n<p>it's any solutions can solve this realation</p>\n\n<h2>fruits</h2>\n\n<pre><code>+-----+------------+-----------+\n| id  |    name    |   attr    |\n+-----+------------+-----------+\n| 123 | Blueberry  | berry     |\n| 932 | Apple      | not berry |\n| 429 | Banana     | not berry |\n| 563 | Strawberry | berry     |\n+-----+------------+-----------+\n</code></pre>\n\n<h2>berries</h2>\n\n<pre><code>+-----+----+-----+-----+\n| id  | hp | atk | def |\n+-----+----+-----+-----+\n| 123 | 15 |   5 |   5 |\n| 563 |  7 |  10 |   3 |\n+-----+----+-----+-----+\n</code></pre>\n\n<h2>Fruit</h2>\n\n<pre><code>class Fruit &lt; ActiveRecord::Base\nhas_one :berry, -&gt; { where attr: \"berry\"}, foreign_key: 'id'\nend\n</code></pre>\n\n<h2>Berry</h2>\n\n<pre><code>class Berry &lt; ActiveRecord::Base\nbelongs_to :fruit\nend\n</code></pre>\n"}, {"tags": ["ruby", "net-http"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1444785004, "post_id": 33114708, "comment_id": 54044240, "body": "stream it how? HTTP does not hold onto a connection.  Request goes out,  server responds, connection closed.  So in your case, you&#39;re requesting an image, the server will respond with the image and the connection is closed.  Would simply knowing the image exists on the server work for your scenario?"}, {"owner": {"reputation": 195223, "user_id": 48523, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1c787bc735dbe80ec2f88824e1d10c6c?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/48523/andrew"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1444795169, "post_id": 33114708, "comment_id": 54046750, "body": "@Anthony I don&#39;t think this is true. HTTP servers can support persistent connections with keep alive settings. Also imagine a 100TB file download. You&#39;re not going to download the whole file in one, all-or-nothing, session. The client is going to want to store those bytes received somewhere so it doesn&#39;t have to download the whole file all over again."}], "owner": {"reputation": 195223, "user_id": 48523, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1c787bc735dbe80ec2f88824e1d10c6c?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/48523/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1444785053, "creation_date": 1444782220, "question_id": 33114708, "link": "https://stackoverflow.com/questions/33114708/how-to-use-ruby-nethttp-to-download-an-image-without-storing-it", "title": "How to use Ruby Net::HTTP to download an image without storing it?", "body": "<p>I'm writing a script to warm a CDN cache. I need to make a request to download an image, but I don't actually need to load it into memory or storing it to disk. From what I've read, <code>Net::HTTP.get</code> will load the image response into memory. How can I stream the download without taking up space in memory or writing to disk?</p>\n"}, {"tags": ["ruby", "stdin"], "answers": [{"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 3, "last_activity_date": 1444782404, "last_edit_date": 1495541671, "creation_date": 1444782404, "answer_id": 33114732, "question_id": 33114653, "link": "https://stackoverflow.com/questions/33114653/redirect-stdin-to-string-in-ruby/33114732#33114732", "title": "Redirect $stdin to string in Ruby", "body": "<p>To answer your literal question: unlike the constant <code>STDIN</code>, <code>$stdin</code> is just a global variable, you can replace it with another IO object:</p>\n\n<pre><code>require 'stringio'\n$stdin = StringIO.new(\"foo\\nbar\")\n2.times { puts gets }\n# =&gt; foo\n# =&gt; bar\n</code></pre>\n\n<p>But it is probably a better idea to use a proper mocking framework instead, for example like <a href=\"https://stackoverflow.com/questions/23349863/testing-stdin-in-ruby\">this</a>.</p>\n"}], "owner": {"reputation": 5402, "user_id": 68759, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e616db0aa0d8703ef8929fb43165554d?s=128&d=identicon&r=PG", "display_name": "His", "link": "https://stackoverflow.com/users/68759/his"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 371, "favorite_count": 0, "accepted_answer_id": 33114732, "answer_count": 1, "score": 2, "last_activity_date": 1444784628, "creation_date": 1444781663, "last_edit_date": 1444784628, "question_id": 33114653, "link": "https://stackoverflow.com/questions/33114653/redirect-stdin-to-string-in-ruby", "title": "Redirect $stdin to string in Ruby", "body": "<p>I'm writing a unit test for my class which reads inputs from stdin.  In the unit tests, I'm hoping I can redirect the stdin stream to a string.</p>\n\n<p>How can I achieve this?</p>\n"}, {"tags": ["ruby", "uri", "host"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1444784308, "post_id": 33114354, "comment_id": 54044091, "body": "<a href=\"http://ruby-doc.org/stdlib-1.9.2/libdoc/resolv/rdoc/Resolv.html\" rel=\"nofollow noreferrer\"><code>Resolv</code></a> - the docs even have some nice examples."}, {"owner": {"reputation": 255, "user_id": 3610137, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/de66072482fa86fef2dabdb8eb8cb371?s=128&d=identicon&r=PG&f=1", "display_name": "user3610137", "link": "https://stackoverflow.com/users/3610137/user3610137"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1444784763, "post_id": 33114354, "comment_id": 54044174, "body": "Which docs? I tried a few things with Resolv but not as useful as executing  <code>host domain.com</code> command from ruby."}], "answers": [{"comments": [{"owner": {"reputation": 255, "user_id": 3610137, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/de66072482fa86fef2dabdb8eb8cb371?s=128&d=identicon&r=PG&f=1", "display_name": "user3610137", "link": "https://stackoverflow.com/users/3610137/user3610137"}, "edited": false, "score": 0, "creation_date": 1444788018, "post_id": 33115222, "comment_id": 54044938, "body": "Wow! that&#39;s exactly what I was looking for! Thanks."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 1, "last_activity_date": 1444786533, "creation_date": 1444786533, "answer_id": 33115222, "question_id": 33114354, "link": "https://stackoverflow.com/questions/33114354/getting-domain-host-name-in-ruby/33115222#33115222", "title": "Getting domain host name in ruby", "body": "<blockquote>\n  <p>not as useful as executing <code>host domain.com</code> command from ruby</p>\n</blockquote>\n\n<p>I beg to differ... (but it does involve knowing what data you want, and how DNS works).</p>\n\n<pre><code>require 'resolv'\n\ndef host(address)\n  Resolv::DNS.open do |dns|\n    loop do\n      ress = dns.getresources address, Resolv::DNS::Resource::IN::CNAME\n      break if ress.empty?\n      canonical_name = ress.first.name.to_s\n      puts \"#{address} is an alias for #{canonical_name}\"\n      address = canonical_name\n    end\n\n    ress = dns.getresources address, Resolv::DNS::Resource::IN::A\n    addresses = ress.each do |r|\n      puts \"#{address} has address #{r.address.to_s}\"\n    end\n  end\n  return\nend\n\nhost(\"api.heroku.com\")\n</code></pre>\n"}], "owner": {"reputation": 255, "user_id": 3610137, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/de66072482fa86fef2dabdb8eb8cb371?s=128&d=identicon&r=PG&f=1", "display_name": "user3610137", "link": "https://stackoverflow.com/users/3610137/user3610137"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 573, "favorite_count": 0, "accepted_answer_id": 33115222, "answer_count": 1, "score": 0, "last_activity_date": 1444786533, "creation_date": 1444779606, "last_edit_date": 1444780741, "question_id": 33114354, "link": "https://stackoverflow.com/questions/33114354/getting-domain-host-name-in-ruby", "title": "Getting domain host name in ruby", "body": "<p>Is there a possible way to get the domain's hostname in ruby? </p>\n\n<p>For example:</p>\n\n<pre><code>$ host api.heroku.com\napi.heroku.com is an alias for api-default.herokussl.com.\napi-default.herokussl.com is an alias for elb027033-298234319.us-east-1.elb.amazonaws.com.\nelb027033-298234319.us-east-1.elb.amazonaws.com has address 23.23.76.65\nelb027033-298234319.us-east-1.elb.amazonaws.com has address 23.21.240.208\nelb027033-298234319.us-east-1.elb.amazonaws.com has address 107.22.242.236\n</code></pre>\n\n<p>host would be the best example, because it'll also show if the domain/subdomain is pointing to another host like amazonAWS or etc.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1444779153, "creation_date": 1444779153, "answer_id": 33114289, "question_id": 33114248, "link": "https://stackoverflow.com/questions/33114248/is-it-legal-to-define-constants-with-the-same-name-in-different-modules/33114289#33114289", "title": "Is it legal to define constants with the same name in different modules?", "body": "<p>Defining constants with the same name in different namespaces is of course okay. That is the whole purpose of having a namespace.</p>\n\n<p>However, in your case, the warning message says that what you think as belonging to two different namespaces are actually not. They are in the same namespace. Hence the warning. Notice that even in such case, it is not an error. Ruby can redefine a constant during run time. It is just discouraged.</p>\n"}, {"comments": [{"owner": {"reputation": 897, "user_id": 5255019, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-obI_W7jTY6M/AAAAAAAAAAI/AAAAAAAACLg/-ccFAzkxIq4/photo.jpg?sz=128", "display_name": "Brian", "link": "https://stackoverflow.com/users/5255019/brian"}, "edited": false, "score": 1, "creation_date": 1444780903, "post_id": 33114433, "comment_id": 54043304, "body": "You can test the theory presented by CodeGnome and sawa by running irb and loading these two files -- you should not see the error (assuming there is nothing more in them than you&#39;ve shown)."}, {"owner": {"reputation": 10605, "user_id": 825706, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/572bd664aa7b6c34eded040804a240d7?s=128&d=identicon&r=PG", "display_name": "Travis Bear", "link": "https://stackoverflow.com/users/825706/travis-bear"}, "edited": false, "score": 1, "creation_date": 1444780917, "post_id": 33114433, "comment_id": 54043309, "body": "&quot;Improperly nested.&quot;  This."}], "tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": true, "score": 1, "last_activity_date": 1444780552, "last_edit_date": 1444780552, "creation_date": 1444780166, "answer_id": 33114433, "question_id": 33114248, "link": "https://stackoverflow.com/questions/33114248/is-it-legal-to-define-constants-with-the-same-name-in-different-modules/33114433#33114433", "title": "Is it legal to define constants with the same name in different modules?", "body": "<h2>TL; DR</h2>\n\n<blockquote>\n  <p>warning: already initialized constant ThePlatform::Monitoring::Key::LOGGER</p>\n</blockquote>\n\n<p>Your error comes from <em>redefining</em> a constant that belongs to a given namespace. There's nothing stopping you from having constants that share a name as long as they are in different namespaces.</p>\n\n<h2>Example</h2>\n\n<p>Consider the following simplified example:</p>\n\n<pre><code>module Foo\n  LOGGER = :log1\n\n  module Bar\n    LOGGER = :log2\n  end\nend\n\nFoo.const_get :LOGGER\n#=&gt; :log1\n\nFoo::Bar.const_get :LOGGER\n#=&gt; :log2\n</code></pre>\n\n<p>In this example, you can see that each of the namespaced constants hold different values. So, it's perfectly legal to do this, and won't raise warnings in otherwise well-formed code.</p>\n\n<p>So, the problem lies elsewhere within your code. Most likely, you are redefining ThePlatform::Monitoring::Key::LOGGER twice, either by assigning to that specific constant more than once in your code&mdash;most likely (but not necessarily) somewhere within your Key module&mdash;or because at least one of your other modules is improperly nested.</p>\n"}], "owner": {"reputation": 10605, "user_id": 825706, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/572bd664aa7b6c34eded040804a240d7?s=128&d=identicon&r=PG", "display_name": "Travis Bear", "link": "https://stackoverflow.com/users/825706/travis-bear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 999, "favorite_count": 0, "accepted_answer_id": 33114433, "answer_count": 2, "score": 0, "last_activity_date": 1444780552, "creation_date": 1444778890, "question_id": 33114248, "link": "https://stackoverflow.com/questions/33114248/is-it-legal-to-define-constants-with-the-same-name-in-different-modules", "title": "Is it legal to define constants with the same name in different modules?", "body": "<p>I have the constant LOGGER defined in two Ruby modules, assuming that since they were in separate name spaces, this would be ok</p>\n\n<pre><code>module Key\n  ...\n  LOGGER = 'logger'\n  ...\nend\n</code></pre>\n\n<p>and elsewhere</p>\n\n<pre><code>module ThePlatform\n  module Monitoring\n    ...\n    module Key\n      ...\n      LOGGER          = 'logger'\n      ...\n    end\n  end\nend\n</code></pre>\n\n<p>But this results in warning messages:</p>\n\n<pre><code>warning: already initialized constant ThePlatform::Monitoring::Key::LOGGER\n</code></pre>\n\n<p>Is this legal in Ruby?  Is there a best practice for this situation?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 392, "user_id": 5017531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6a19f8ef6254807120c84df262bfd3d?s=128&d=identicon&r=PG&f=1", "display_name": "mb_s88", "link": "https://stackoverflow.com/users/5017531/mb-s88"}, "edited": false, "score": 0, "creation_date": 1444780148, "post_id": 33114218, "comment_id": 54043113, "body": "So, you can&#39;t locate the correct file?"}], "answers": [{"comments": [{"owner": {"reputation": 269, "user_id": 5437827, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bbfb5339a3f97da532c5c8b8f1175225?s=128&d=identicon&r=PG&f=1", "display_name": "Alfonso Giron", "link": "https://stackoverflow.com/users/5437827/alfonso-giron"}, "edited": false, "score": 0, "creation_date": 1444800023, "post_id": 33114437, "comment_id": 54048049, "body": "Perfect thank you! I got it to work. This is just the clear and concise explanation I needed. I just started learning last week so I didn&#39;t even realize the directions were referring to a folder. You saved the day, thanks again :)"}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": true, "score": 0, "last_activity_date": 1444780953, "last_edit_date": 1444780953, "creation_date": 1444780195, "answer_id": 33114437, "question_id": 33114218, "link": "https://stackoverflow.com/questions/33114218/hello-action-into-app-controller-hartl-tutorial/33114437#33114437", "title": "Hello Action into App controller... Hartl tutorial", "body": "<p>Using the answer in the link you provided and having a look at the tutorial this is what you should do in a simpler way:</p>\n\n<p>You know all the folders and files that make up your Rails app? You need to find the file named 'application_controller.rb'.</p>\n\n<ol>\n<li>Open the folder called 'app'.</li>\n<li>Once you're in the folder 'app', open the folder 'controllers'.</li>\n<li>There you will find a file named 'application_controller.rb'. Open this file and add the text (highlighted by listing 1.8) to the file. </li>\n</ol>\n"}], "owner": {"reputation": 269, "user_id": 5437827, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bbfb5339a3f97da532c5c8b8f1175225?s=128&d=identicon&r=PG&f=1", "display_name": "Alfonso Giron", "link": "https://stackoverflow.com/users/5437827/alfonso-giron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 33114437, "answer_count": 1, "score": 1, "last_activity_date": 1444780953, "creation_date": 1444778660, "last_edit_date": 1495541032, "question_id": 33114218, "link": "https://stackoverflow.com/questions/33114218/hello-action-into-app-controller-hartl-tutorial", "title": "Hello Action into App controller... Hartl tutorial", "body": "<p>I am starting out Hartl's Ruby on Rails tutorial and I am stuck on Listing 1.8 which prompts the user to accomplish this</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n# Prevent CSRF attacks by raising an exception.\n# For APIs, you may want to use :null_session instead.\nprotect_from_forgery with: :exception\n  def hello\nrender text: \"hello, world!\"\n\n\n end\nend\n</code></pre>\n\n<p>I have seen another post asking exactly the same question but the answer still didn't register to me. I went through the same process/mistakes. <a href=\"https://stackoverflow.com/questions/29907915/cant-modify-application-controller-for-hello-world-app\">Can&#39;t modify Application Controller for &#39;hello world&#39; app</a></p>\n\n<p>After all is said and done I don't understand this answer: </p>\n\n<p>\"What you are supposed to do is find your sample_app/app/controllers/application_controller.rb and add the new text inside that file. Then save and close the file.\" How do I do this?</p>\n\n<p>This was the satisfactory answer for that thread but I am still confused. Any help would be much appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb"], "comments": [{"owner": {"reputation": 446, "user_id": 3758617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d95235c454982860393ca013e815af1b?s=128&d=identicon&r=PG&f=1", "display_name": "Eugene G", "link": "https://stackoverflow.com/users/3758617/eugene-g"}, "edited": false, "score": 0, "creation_date": 1445015229, "post_id": 33113898, "comment_id": 54159177, "body": "see my last comment. did that fix the issue?"}, {"owner": {"reputation": 446, "user_id": 3758617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d95235c454982860393ca013e815af1b?s=128&d=identicon&r=PG&f=1", "display_name": "Eugene G", "link": "https://stackoverflow.com/users/3758617/eugene-g"}, "edited": false, "score": 0, "creation_date": 1496795927, "post_id": 33113898, "comment_id": 75803190, "body": "In case anyone stumbles on this two years later, you can make the AND request using just plain mongo syntax.  it would be something along the lines of:  query = { &quot;$and&quot; =&gt; [ {Tags: /romantic/i }, { Tags: /comedy/i ]   }  @story = Story.where(query)  The $and operator gets passed an array of objects that all have to match for the final result to match.  Looks ugly in Ruby, but works."}], "answers": [{"comments": [{"owner": {"reputation": 370, "user_id": 1354836, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f15b618f82d71e9bf1e1e8edb7424d6c?s=128&d=identicon&r=PG", "display_name": "Gcap", "link": "https://stackoverflow.com/users/1354836/gcap"}, "edited": false, "score": 0, "creation_date": 1444859135, "post_id": 33115695, "comment_id": 54083837, "body": "This helped a lot, but it still isn&#39;t properly searching case insensitive"}, {"owner": {"reputation": 446, "user_id": 3758617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d95235c454982860393ca013e815af1b?s=128&d=identicon&r=PG&f=1", "display_name": "Eugene G", "link": "https://stackoverflow.com/users/3758617/eugene-g"}, "reply_to_user": {"reputation": 370, "user_id": 1354836, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f15b618f82d71e9bf1e1e8edb7424d6c?s=128&d=identicon&r=PG", "display_name": "Gcap", "link": "https://stackoverflow.com/users/1354836/gcap"}, "edited": false, "score": 1, "creation_date": 1444859453, "post_id": 33115695, "comment_id": 54083974, "body": "get rid of the quotes in your regex.    you want <code>[&#47;romantic&#47;i, &#47;comedy&#47;i]</code>  and not <code>[&quot;&#47;romantic&#47;i&quot;,&quot;&#47;comedy&#47;i&quot;]</code>.  The way you have it, it&#39;s probably searching for a string rather than searching as a regular expression. you can map a string to a regex by doing <code>&#47;#{string}&#47;i</code>  without the quotes"}], "tags": [], "owner": {"reputation": 446, "user_id": 3758617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d95235c454982860393ca013e815af1b?s=128&d=identicon&r=PG&f=1", "display_name": "Eugene G", "link": "https://stackoverflow.com/users/3758617/eugene-g"}, "is_accepted": true, "score": 1, "last_activity_date": 1444790256, "creation_date": 1444790256, "answer_id": 33115695, "question_id": 33113898, "link": "https://stackoverflow.com/questions/33113898/multi-parameter-search-via-user-input-ruby-on-rails-mongodb/33115695#33115695", "title": "Multi parameter search via user input - ruby on rails &amp; mongodb", "body": "<p>to create an OR statement, you can convert the string into an array of strings, and then convert the array of strings into an array of regex and then use the '$in' option.  So first, pick a delimeter - perhaps commas or space or you can set up a custom like ||.  Let's say you do comma seperated.  When user enters:</p>\n\n<p>romantic, comedy</p>\n\n<p>you split that into <code>['romantic', 'comedy']</code>, then convert that to <code>[/romantic/i, /comedy/i]</code> then do</p>\n\n<p><code>@story = Story.any_of( { :Tags.in =&gt; [/romantic/i, /comedy/i]}....</code></p>\n\n<p>To create an AND query, it can get a little more complicated.  There is an elemMatch function you could use.  </p>\n\n<p>I don't think you could do <code>{:Tags =&gt; /romantic/i, :Tags =&gt; /comedy/i }</code> </p>\n\n<p>So my best thought would be to do sequential queries, even though there would be a performance hit, but if your DB isn't that big, it shouldn't be a big issue.  So if you want Romantic AND Comedy you can do</p>\n\n<p>query 1: find all collections that match /romantic/i</p>\n\n<p>query 2: take results of query 1, find all collections that match /comedy/i</p>\n\n<p>And so on by iterating through your array of selectors. </p>\n"}], "owner": {"reputation": 370, "user_id": 1354836, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f15b618f82d71e9bf1e1e8edb7424d6c?s=128&d=identicon&r=PG", "display_name": "Gcap", "link": "https://stackoverflow.com/users/1354836/gcap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 33115695, "answer_count": 1, "score": 0, "last_activity_date": 1445367701, "creation_date": 1444776468, "last_edit_date": 1445367701, "question_id": 33113898, "link": "https://stackoverflow.com/questions/33113898/multi-parameter-search-via-user-input-ruby-on-rails-mongodb", "title": "Multi parameter search via user input - ruby on rails &amp; mongodb", "body": "<p>I have a web page where a user can search through documents in a mongoDB collection.\nI get the user's input through <code>@q = params[:search].to_s</code></p>\n\n<p>I then run a mongoid query:<br>\n<code>@story = Story.any_of( { :Tags =&gt; /#{@q}/i}, {:Name =&gt; /#{@q}/i}, {:Genre =&gt; {/#{@q}/i}} )</code></p>\n\n<p>This works fine if the user looks for something like 'humor' 'romantic comedy' or 'mystery'. But if looking for 'romance fiction', nothing comes up. <br> Basically I'd like to add 'and' 'or' functionality to my search so that it will find documents in the database that are related to all strings that a user types into the input field.<br><br>\nHow can this be done while still maintaining the substring search capabilties I currently have?<br>Thanks in advance for help!<br><br>\n<strong>UPDATE:</strong>\nPer Eugene's comment below...\nI tried converting to case insensitive with  <code>@q.map! { |x| x=\"/#{x}/i\"}</code>. It does save it properly as <code>[\"/romantic/i\",\"/comedy/i\"]</code>. But the query <code>Story.any_of({:Tags.in =&gt; @q}, {:Story.in =&gt; @q})</code>finds nothing.\nWhen I change the array to be <code>[\"Romantic\",\"Comedy\"]</code>. Then it does.\nHow can I properly make it case insensitive?</p>\n\n<p><strong>Final:</strong><br>\nRemoving the quotes worked. \nHowever there is now no way to use an <code>.and()</code> search to find a book that has both words in all these fields.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 0, "creation_date": 1444775559, "post_id": 33113702, "comment_id": 54041801, "body": "The <code>1=0</code> looks like an attempt to force the query to return no rows.  I don&#39;t speak rails, so I can&#39;t see why it is doing that."}, {"owner": {"reputation": 2858, "user_id": 527472, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VmZD.jpg?s=128&g=1", "display_name": "Kurt Mueller", "link": "https://stackoverflow.com/users/527472/kurt-mueller"}, "reply_to_user": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 0, "creation_date": 1444775634, "post_id": 33113702, "comment_id": 54041823, "body": "Hey Kevin. I know that <code>1=0</code> is <code>ActiveRecord</code>&#39;s way of forcing the query to return nothing. I just don&#39;t know <i>why</i> it&#39;s doing that."}, {"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1444849676, "post_id": 33113702, "comment_id": 54078746, "body": "I reproduced your setup (from what was available) and <code>s.attachments</code> fires <b>no queries whatsoever</b>. However, when poked at with <code>.to_sql</code> it does output <code>(1=0)</code>, yet there&#39;s no <code>DISTINCT</code>. What version of ActiveRecord are you using? Mine is <code>4.2.3</code>."}, {"owner": {"reputation": 4530, "user_id": 3259320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83a84c55be5441370dbd6273169048c6?s=128&d=identicon&r=PG", "display_name": "Rob Wise", "link": "https://stackoverflow.com/users/3259320/rob-wise"}, "reply_to_user": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1444850277, "post_id": 33113702, "comment_id": 54079099, "body": "@D-side did you do something differently setup-wise from what I have in my answer down below? Mine fired fine. So weird. My ActiveRecord for there was 4.2.4."}, {"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "reply_to_user": {"reputation": 4530, "user_id": 3259320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83a84c55be5441370dbd6273169048c6?s=128&d=identicon&r=PG", "display_name": "Rob Wise", "link": "https://stackoverflow.com/users/3259320/rob-wise"}, "edited": false, "score": 0, "creation_date": 1444858343, "post_id": 33113702, "comment_id": 54083467, "body": "@RobWise actually, yes, I was operating on unsaved instances only. Pretty much replicated the associations and issued <code>Submission.new.attachments</code>. No queries, empty relation (was that <code>.none</code>?). So I appended <code>.to_sql</code> and looked through the result. No <code>DISTINCT</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2858, "user_id": 527472, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VmZD.jpg?s=128&g=1", "display_name": "Kurt Mueller", "link": "https://stackoverflow.com/users/527472/kurt-mueller"}, "edited": false, "score": 0, "creation_date": 1444828324, "post_id": 33116779, "comment_id": 54064799, "body": "Woops, I forgot to add <code>Submission :has_many :attachments, through: :assignments</code>. Sorry about that - I updated the code in my question."}, {"owner": {"reputation": 2858, "user_id": 527472, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VmZD.jpg?s=128&g=1", "display_name": "Kurt Mueller", "link": "https://stackoverflow.com/users/527472/kurt-mueller"}, "edited": false, "score": 0, "creation_date": 1444828825, "post_id": 33116779, "comment_id": 54065170, "body": "In the code above, I want to be able to retrieve the attachments associated with the submission&#39;s assignment. I&#39;m know that I could retrieve these attachments via <code>submission.assignment.attachments</code> (and this is the workaround I am using). However, the question pertains to <i>why</i> arel&#39;s algebraic syntax tree is using the <code>distinct</code> clause &amp; <code>(1=0)</code> predicate."}, {"owner": {"reputation": 2858, "user_id": 527472, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VmZD.jpg?s=128&g=1", "display_name": "Kurt Mueller", "link": "https://stackoverflow.com/users/527472/kurt-mueller"}, "edited": false, "score": 0, "creation_date": 1444828888, "post_id": 33116779, "comment_id": 54065214, "body": "However, yes, you are correct... Rails&#39; guides specifies that <code>has_many :through</code> is meant for many-to-many associations."}, {"owner": {"reputation": 4530, "user_id": 3259320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83a84c55be5441370dbd6273169048c6?s=128&d=identicon&r=PG", "display_name": "Rob Wise", "link": "https://stackoverflow.com/users/3259320/rob-wise"}, "reply_to_user": {"reputation": 2858, "user_id": 527472, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VmZD.jpg?s=128&g=1", "display_name": "Kurt Mueller", "link": "https://stackoverflow.com/users/527472/kurt-mueller"}, "edited": false, "score": 0, "creation_date": 1444843017, "post_id": 33116779, "comment_id": 54074876, "body": "Well you can also use it as a shortcut which I think is what you&#39;re doing here (now that I have that other piece of information lol). I recreated this scenario in a fresh project by copy and pasting your code and doing the necessary underlying migrations. But, my query does not have the <code>DISTINCT</code> clause or the weird <code>1=0</code> predicate and actually returns the result correctly when calling <code>s.attachments</code>. I will edit to show my code."}], "tags": [], "owner": {"reputation": 4530, "user_id": 3259320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83a84c55be5441370dbd6273169048c6?s=128&d=identicon&r=PG", "display_name": "Rob Wise", "link": "https://stackoverflow.com/users/3259320/rob-wise"}, "is_accepted": true, "score": 1, "last_activity_date": 1444866196, "last_edit_date": 1495540393, "creation_date": 1444797843, "answer_id": 33116779, "question_id": 33113702, "link": "https://stackoverflow.com/questions/33113702/for-new-activerecord-models-why-do-some-has-many-through-associations-add-a-1/33116779#33116779", "title": "For new ActiveRecord models, why do some has_many :through associations add a (1=0) predicate and distinct clause to the sql query?", "body": "<p>Note this is an edit to reflect new info from OP. With the new info I have recreated the scenario in a fresh project by copy and pasting OP's code plus the following migration.</p>\n\n<p><strong>Migration:</strong></p>\n\n<pre><code>class CreateAttachments &lt; ActiveRecord::Migration\n  def change\n    create_table :attachments do |t|\n      t.integer :assignment_attachment_id\n      t.timestamps null: false\n    end\n\n    create_table :assignments do |t|\n      t.integer :assignment_attachment_id\n      t.timestamps null: false\n    end\n\n    create_table :assignment_attachments do |t|\n      t.integer :assignment_id\n      t.integer :attachment_id\n      t.timestamps null: false\n    end\n\n    create_table :submissions do |t|\n      t.integer :assignment_id\n      t.timestamps null: false\n    end\n  end\nend\n</code></pre>\n\n<h2>Works fine when associations exist in DB</h2>\n\n<p>When I save the <code>Attachment</code> and <code>Assignment</code> models to which I will associate my <code>Submission</code> model <code>s</code>, even though never save <code>s</code>, it works fine.</p>\n\n<pre><code>irb(main):001:0&gt; attachment = Attachment.new\n=&gt; #&lt;Attachment id: nil, assignment_attachment_id: nil, created_at: nil, updated_at: nil&gt;\nirb(main):003:0&gt; assignment = Assignment.new\n=&gt; #&lt;Assignment id: nil, assignment_attachment_id: nil, created_at: nil, updated_at: nil&gt;\nirb(main):005:0&gt; assignment.attachments &lt;&lt; attachment\n=&gt; #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;Attachment id: nil, assignment_attachment_id: nil, created_at: nil, updated_at: nil&gt;]&gt;\nirb(main):006:0&gt; assignment.save\n   (0.2ms)  begin transaction\n  SQL (1.5ms)  INSERT INTO \"assignments\" (\"created_at\", \"updated_at\") VALUES (?, ?)  [[\"created_at\", \"2015-10-14 17:10:34.936929\"], [\"updated_at\", \"2015-10-14 17:10:34.936929\"]]\n  SQL (0.6ms)  INSERT INTO \"attachments\" (\"created_at\", \"updated_at\") VALUES (?, ?)  [[\"created_at\", \"2015-10-14 17:10:34.944453\"], [\"updated_at\", \"2015-10-14 17:10:34.944453\"]]\n  SQL (0.3ms)  INSERT INTO \"assignment_attachments\" (\"assignment_id\", \"attachment_id\", \"created_at\", \"updated_at\") VALUES (?, ?, ?, ?)  [[\"assignment_id\", 1], [\"attachment_id\", 1], [\"created_at\", \"2015-10-14 17:10:34.947481\"], [\"updated_at\", \"2015-10-14 17:10:34.947481\"]]\n   (0.8ms)  commit transaction\n=&gt; true\nirb(main):007:0&gt; s = Submission.new(assignment: Assignment.first)\n  Assignment Load (0.2ms)  SELECT  \"assignments\".* FROM \"assignments\"  ORDER BY \"assignments\".\"id\" ASC LIMIT 1\n=&gt; #&lt;Submission id: nil, assignment_id: 1, created_at: nil, updated_at: nil&gt;\nirb(main):008:0&gt; s.assignment\n=&gt; #&lt;Assignment id: 1, assignment_attachment_id: nil, created_at: \"2015-10-14 17:10:34\", updated_at: \"2015-10-14 17:10:34\"&gt;\nirb(main):009:0&gt; s.assignment_attachments\n  AssignmentAttachment Load (0.2ms)  SELECT \"assignment_attachments\".* FROM \"assignment_attachments\" INNER JOIN \"assignments\" ON \"assignment_attachments\".\"assignment_id\" = \"assignments\".\"id\" WHERE \"assignments\".\"id\" = ?  [[\"id\", 1]]\n=&gt; #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;AssignmentAttachment id: 1, assignment_id: 1, attachment_id: 1, created_at: \"2015-10-14 17:10:34\", updated_at: \"2015-10-14 17:10:34\"&gt;]&gt;\nirb(main):010:0&gt; s.attachments\n  Attachment Load (0.2ms)  SELECT \"attachments\".* FROM \"attachments\" INNER JOIN \"assignment_attachments\" ON \"attachments\".\"id\" = \"assignment_attachments\".\"attachment_id\" INNER JOIN \"assignments\" ON \"assignment_attachments\".\"assignment_id\" = \"assignments\".\"id\" WHERE \"assignments\".\"id\" = ?  [[\"id\", 1]]\n=&gt; #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;Attachment id: 1, assignment_attachment_id: nil, created_at: \"2015-10-14 17:10:34\", updated_at: \"2015-10-14 17:10:34\"&gt;]&gt;\nirb(main):011:0&gt; s.attachments.to_sql\n=&gt; \"SELECT \\\"attachments\\\".* FROM \\\"attachments\\\" INNER JOIN \\\"assignment_attachments\\\" ON \\\"attachments\\\".\\\"id\\\" = \\\"assignment_attachments\\\".\\\"attachment_id\\\" INNER JOIN \\\"assignments\\\" ON \\\"assignment_attachments\\\".\\\"assignment_id\\\" = \\\"assignments\\\".\\\"id\\\" WHERE \\\"assignments\\\".\\\"id\\\" = 1\"\n</code></pre>\n\n<h2>Generates \"1=0\" predicate when there are no associations</h2>\n\n<p>If I do not specify any associations to the <code>Submission</code> instance, however, when I ask for its <code>attachments</code>, the query <em>does</em> get the <code>1=0</code> predicate. As <a href=\"https://stackoverflow.com/questions/21886242/why-is-rails-is-adding-or-1-0-to-queries-using-the-where-clause-hash-syntax-wi\">this post</a> describes, the <code>1=0</code> predicate is added when you are trying to retrieve records that join on an array of ids that is actually empty. This is true here, since we made sure that there are no <code>assignment</code> ids we can use for joining to <code>attachment</code>. </p>\n\n<pre><code>irb(main):007:0&gt; Submission.new.attachments.to_sql\n=&gt; \"SELECT \\\"attachments\\\".* FROM \\\"attachments\\\" INNER JOIN \\\"assignment_attachments\\\" ON \\\"attachments\\\".\\\"id\\\" = \\\"assignment_attachments\\\".\\\"attachment_id\\\" INNER JOIN \\\"assignments\\\" ON \\\"assignment_attachments\\\".\\\"assignment_id\\\" = \\\"assignments\\\".\\\"id\\\" WHERE \\\"assignments\\\".\\\"id\\\" = NULL AND (1=0)\"\nirb(main):008:0&gt;\n</code></pre>\n\n<p>Notice how it says <code>WHERE \\\"assignments\\\".\\\"id\\\" = NULL</code>. It can't leave it at that because it doesn't want to assume that there aren't null ids in the assignments table that would cause it to return false positives. With the additional <code>1=0</code> predicate, you are ensured to get the correct answer: an empty result.</p>\n\n<h2>DISTINCT</h2>\n\n<p>I am unable to reproduce a scenario where <code>DISTINCT</code> appears.</p>\n"}, {"comments": [{"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 1, "creation_date": 1444844545, "post_id": 33129264, "comment_id": 54075707, "body": "&quot;Is used for&quot;... including, but not limited to."}, {"owner": {"reputation": 4530, "user_id": 3259320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83a84c55be5441370dbd6273169048c6?s=128&d=identicon&r=PG", "display_name": "Rob Wise", "link": "https://stackoverflow.com/users/3259320/rob-wise"}, "reply_to_user": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1444850487, "post_id": 33129264, "comment_id": 54079212, "body": "@D-side correct, and I should have made that more clear in my original answer as well (Kurt had forgotten one of the associations, so I was focusing on a different issue). If you keep reading the rails guide (linked by Kurt) it goes on to say that it can also be used as a shortcut for nested <code>has_many</code> associations. &gt; The has_many :through association is also useful for setting up &quot;shortcuts&quot; through nested has_many associations. For example, if a document has many sections, and a section has many paragraphs, you may sometimes want to get a simple collection of all paragraphs in the document."}, {"owner": {"reputation": 4530, "user_id": 3259320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83a84c55be5441370dbd6273169048c6?s=128&d=identicon&r=PG", "display_name": "Rob Wise", "link": "https://stackoverflow.com/users/3259320/rob-wise"}, "edited": false, "score": 0, "creation_date": 1444851405, "post_id": 33129264, "comment_id": 54079737, "body": "@KurtMueller if you are looking at only a single <code>assignment</code> object, how could there be more than one instance of the same <code>attachment</code> object associated with it? There couldn&#39;t be, therefore there is no need for <code>DISTINCT</code> (although it wouldn&#39;t change the outcome if you added it). If you are looking at more than one <code>assignment</code> object, it is possible that they both point to the same <code>attachment</code> object, but you only want to instantiate that <code>attachment</code> object once, so we need to call <code>DISTINCT</code> there."}], "tags": [], "owner": {"reputation": 2858, "user_id": 527472, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VmZD.jpg?s=128&g=1", "display_name": "Kurt Mueller", "link": "https://stackoverflow.com/users/527472/kurt-mueller"}, "is_accepted": false, "score": 0, "last_activity_date": 1444835852, "creation_date": 1444835852, "answer_id": 33129264, "question_id": 33113702, "link": "https://stackoverflow.com/questions/33113702/for-new-activerecord-models-why-do-some-has-many-through-associations-add-a-1/33129264#33129264", "title": "For new ActiveRecord models, why do some has_many :through associations add a (1=0) predicate and distinct clause to the sql query?", "body": "<p>According to the Rails' guide, the <a href=\"http://guides.rubyonrails.org/association_basics.html#the-has-many-through-association\" rel=\"nofollow\"><code>has_many :through</code> asssociation</a> is used for the classic <code>many-to-many</code> connection.</p>\n\n<p>In this context, I the <code>(1=0)</code> predicate makes sense. Let me explain with an example.</p>\n\n<p>Consider the <code>Assignment</code>, <code>AssignmentAttachment</code>, and <code>Attachment</code> models from the question above:</p>\n\n<pre><code>Assignment.new.attachments.to_sql\n\nSELECT attachments.*\nFROM attachments INNER JOIN assignment_attachments ON attachments.id = assignment_attachments.attachment_id\nWHERE assignment_attachments.assignment_id = NULL AND (1=0)\n</code></pre>\n\n<p>In code above, a new <code>Assignment</code> instance, not yet persisted to the database, tries to access attachments associated with it. Obviously, since the model has not been saved, there are no attachments associated with it and the query builder adds a <code>(1=0)</code> predicate.</p>\n\n<p>I still don't know why the <code>DISTINCT</code> clause doesn't get added to the query for a classic <code>many-to-many</code> relationship but does when the <code>has_many :through</code> relationship goes through >= 2 tables.</p>\n"}], "owner": {"reputation": 2858, "user_id": 527472, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/6VmZD.jpg?s=128&g=1", "display_name": "Kurt Mueller", "link": "https://stackoverflow.com/users/527472/kurt-mueller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1395, "favorite_count": 0, "accepted_answer_id": 33116779, "answer_count": 2, "score": 7, "last_activity_date": 1444866196, "creation_date": 1444775380, "last_edit_date": 1444828256, "question_id": 33113702, "link": "https://stackoverflow.com/questions/33113702/for-new-activerecord-models-why-do-some-has-many-through-associations-add-a-1", "title": "For new ActiveRecord models, why do some has_many :through associations add a (1=0) predicate and distinct clause to the sql query?", "body": "<p>Whenever I instantiate a new <code>ActiveRecord</code> model (one that has not been persisted to the database) and attempt to access some various associations on the built model, the Rails query builder will sometimes:</p>\n\n<ol>\n<li>Add a <code>(1=0)</code> predicate to the <code>where</code> clause of the query. </li>\n<li>Add a 'distinct` clause to the select statement.</li>\n</ol>\n\n<p>I think this only occurs when the <code>has_many :through</code> association is joining two or more tables.</p>\n\n<p>I want to know <em>why</em> it adds the <code>(1=0)</code> predicate as well as the <code>distinct</code> clause. For the <code>(1=0)</code> predicate, it shouldn't matter if the new model has been saved to the database or not (right?). I have no idea why the <code>distinct</code> clause is being added.</p>\n\n<p>I have a simple example below.</p>\n\n<pre><code>class Assignment &lt; ActiveRecord::Base\n  has_many :assignment_attachments\n  has_many :attachments, through: :assignment_attachments\nend\n\nclass AssignmentAttachment &lt; ActiveRecord::Base\n  belongs_to :assignment\n  belongs_to :attachment\nend\n\nclass Attachment &lt; ActiveRecord::Base\n  has_many :assignment_attachments\n  has_many :assignments, through: :assignment_attachments\nend\n\nclass Submission &lt; ActiveRecord::Base\n  belongs_to :assignment\n  has_many :assignment_attachments, through: :assignment\n  has_many :attachments, through: :assignment\nend\n\ns = Submission.new(assignment: Assignment.first)\ns.assignment #=&gt; #&lt;Assignment ...&gt;\ns.assignment_attachments #=&gt; [#AssignmentAttachment id: '1'&gt;, #AssignmentAttachment assignment_id: '1', attachment_id: '1' ...&gt;]\ns.attachments #=&gt; []\n</code></pre>\n\n<p>Here's the sql query for <code>s.attachments</code>:</p>\n\n<pre><code>SELECT DISTINCT attachments.*\nFROM attachments\nINNER JOIN assignment_attachments ON attachments.id = assignment_attachments.attachment_id\nINNER JOIN assignments ON assignment_attachments.assignment_id = assignments.id\nWHERE assignments.id = 'a0dbfdc7-0d67-4aad-ad06-6a7a5a91d2d0' AND (1=0)\n</code></pre>\n\n<p>Located somewhere deep in one of the subtrees of the abstract syntax tree that arel builds:</p>\n\n<pre><code># the 'distinct' select clause\n#&lt;Arel::Nodes::SelectCore:0x007ffe43d45be0\n  @groups=[],\n  @having=nil,\n  @projections=\n   [#&lt;struct Arel::Attributes::Attribute\n     relation=\n      #&lt;Arel::Table:0x007ffe45a7be58\n       @aliases=[],\n       @columns=nil,\n       @engine=\n        Attachment(name: string, description: text, created_at: datetime, updated_at: datetime, required: boolean, id: uuid, slug: string, file_types: string),\n       @name=\"attachments\",\n       @primary_key=nil,\n       @table_alias=nil&gt;,\n     name=\"*\"&gt;],\n  @set_quantifier=#&lt;Arel::Nodes::Distinct:0x007ffe43d44dd0&gt;,\n  ...\n\n# the (1=0) predicate\n@wheres=\n [#&lt;Arel::Nodes::And:0x007ffe43d45028\n   @children=\n    [#&lt;Arel::Nodes::Equality:0x007ffe45958788\n      @left=\n       #&lt;struct Arel::Attributes::Attribute\n        relation=\n         #&lt;Arel::Table:0x007ffe45958e68\n          @aliases=[],\n          @columns=nil,\n          @engine=ActiveRecord::Base,\n          @name=\"assignments\",\n          @primary_key=nil,\n          @table_alias=nil&gt;,\n        name=\"id\"&gt;,\n      @right=#&lt;Arel::Nodes::BindParam:0x007ffe45958878&gt;&gt;,\n     #&lt;Arel::Nodes::Grouping:0x007ffe43d45050 @expr=\"1=0\"&gt;]&gt;]\n</code></pre>\n\n<p>Do you know <em>why</em> arel is building the <code>distinct</code> clause and the <code>(1=0)</code> predicate? I can use some workarounds to get what I want - however, I would love to be able to investigate and find out why and how this tree is built.</p>\n\n<p>Thanks for any/all advice.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rack"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1444774761, "post_id": 33113519, "comment_id": 54041498, "body": "By &quot;Rake&quot; I suspect you mean &quot;Rack&quot;. Rake is &quot;Ruby Make&quot;, whereas Rack is the middle-layer under Rails, Sinatra, etc. You can answer your question by reading the documentation for Rack, Sinatra, Ramaze, and see what their minimal code is to create a server. Using something with the least footprint/dependencies could mean you write a lot more code, so which is more important, your time and ease of debugging, or footprint?"}, {"owner": {"reputation": 356, "user_id": 4479966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c63aeb255c0bf35dd9dc2847925aac38?s=128&d=identicon&r=PG&f=1", "display_name": "Naya Bonbo", "link": "https://stackoverflow.com/users/4479966/naya-bonbo"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1444774949, "post_id": 33113519, "comment_id": 54041573, "body": "@theTinMan, I absolutely meant Rack. I&#39;ll edit the question. I&#39;ll check the Rack code. Thanks for the direction"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1444775129, "post_id": 33113519, "comment_id": 54041640, "body": "I&#39;d check Sinatra&#39;s really. It&#39;s amazing how little code it takes to make a usable server. <code>get &#39;&#47;&#39; { &#39;hi&#39; }</code> is the gist of it."}], "answers": [{"comments": [{"owner": {"reputation": 356, "user_id": 4479966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c63aeb255c0bf35dd9dc2847925aac38?s=128&d=identicon&r=PG&f=1", "display_name": "Naya Bonbo", "link": "https://stackoverflow.com/users/4479966/naya-bonbo"}, "edited": false, "score": 0, "creation_date": 1444774823, "post_id": 33113581, "comment_id": 54041518, "body": "Thanks @nick, you posted the answer while I was still writing the pseudo code in nodejs and it looks exactly similar. I wish I could upvote the answer if I had enough points."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1444775263, "post_id": 33113581, "comment_id": 54041685, "body": "Agreed about Sinatra. It&#39;s plenty powerful and results in really clean code. Toss in Haml support and Sequel and it&#39;s my go-to."}], "tags": [], "owner": {"reputation": 21521, "user_id": 78613, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0fa1dc97175c4cc1ea4ecf506119961c?s=128&d=identicon&r=PG", "display_name": "Nick Veys", "link": "https://stackoverflow.com/users/78613/nick-veys"}, "is_accepted": true, "score": 3, "last_activity_date": 1444775203, "last_edit_date": 1444775203, "creation_date": 1444774726, "answer_id": 33113581, "question_id": 33113519, "link": "https://stackoverflow.com/questions/33113519/ruby-library-with-least-footprint-to-host-a-very-simple-single-endpoint-api/33113581#33113581", "title": "Ruby library with least footprint to host a very simple single endpoint API", "body": "<p>You seem like you want to use <a href=\"http://rack.github.io\" rel=\"nofollow\">Rack</a> directly.  \"<a href=\"http://hawkins.io/2012/07/rack_from_the_beginning/\" rel=\"nofollow\">Rack from the Beginning</a>\" is a decent tutorial that should get you started.</p>\n\n<p>It'll probably look something like this:</p>\n\n<pre><code>class CrunchApp\n  def self.crunch(crunchable)\n    # top-secret crunching\n  end\n  def self.call(env)\n    crunchy_stuff = input(env)\n    [200, {}, crunch(crunchy_stuff)]\n  end\n  private\n  def self.input(env)\n    request = Rack::Request.new(env)\n    request.params['my_input']\n  end\nend\n\nRack::Server.start app: CrunchApp\n</code></pre>\n\n<p>But I must say, using that instead of something like <a href=\"http://www.sinatrarb.com\" rel=\"nofollow\">Sinatra</a> seems silly unless this is just a fun project to play with things. See their 'Hello World':</p>\n\n<pre><code>require 'sinatra'\n\nget '/hi' do\n  \"Hello World!\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66, "user_id": 4424147, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HpbdDCMWJjE/AAAAAAAAAAI/AAAAAAAAAXU/glJ8ldJ0mIU/photo.jpg?sz=128", "display_name": "Leo Nogueira", "link": "https://stackoverflow.com/users/4424147/leo-nogueira"}, "is_accepted": false, "score": 0, "last_activity_date": 1444775447, "creation_date": 1444775447, "answer_id": 33113710, "question_id": 33113519, "link": "https://stackoverflow.com/questions/33113519/ruby-library-with-least-footprint-to-host-a-very-simple-single-endpoint-api/33113710#33113710", "title": "Ruby library with least footprint to host a very simple single endpoint API", "body": "<p><a href=\"http://www.ruby-grape.org\" rel=\"nofollow\">Ruby-Grape</a> is a good option for your use case. It has a minimal implementation over Rack that allow the creation of simple REST-API endpoints.</p>\n\n<p><a href=\"http://cuba.is\" rel=\"nofollow\">Cuba</a> is another good option with a thin layer over Rack itself.<a href=\"http://serdardogruyol.com/using-cuba-to-build-lightweight-apis/\" rel=\"nofollow\">sample post</a></p>\n\n<p>If you are familiar with Rails you can use the <a href=\"https://github.com/rails-api/rails-api\" rel=\"nofollow\">Rails API gem</a> which is very well documented with minor overhead. Remember also that Rails-API will be part of <a href=\"http://wyeworks.com/blog/2015/6/11/how-to-build-a-rails-5-api-only-and-backbone-application\" rel=\"nofollow\">Rails 5</a>.</p>\n\n<p>Last, but not last you can implement it on Rack directly.</p>\n"}], "owner": {"reputation": 356, "user_id": 4479966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c63aeb255c0bf35dd9dc2847925aac38?s=128&d=identicon&r=PG&f=1", "display_name": "Naya Bonbo", "link": "https://stackoverflow.com/users/4479966/naya-bonbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 33113581, "answer_count": 2, "score": 0, "last_activity_date": 1444775447, "creation_date": 1444774371, "last_edit_date": 1444775406, "question_id": 33113519, "link": "https://stackoverflow.com/questions/33113519/ruby-library-with-least-footprint-to-host-a-very-simple-single-endpoint-api", "title": "Ruby library with least footprint to host a very simple single endpoint API", "body": "<p>I have a very simple number crunching Ruby function that I want to make available via a web API. The API is essentially a single endpoint, e.g. <code>http://example.com/crunch/&lt;number&gt;</code> and it returns JSON output.</p>\n\n<p>I can obviously install Rails and implement this quickly. I require no more help from a 'framework' other than to handle HTTP for me. No ORM, MVC and other frills.</p>\n\n<p>On the far end, I can write some Ruby code to listen on a port and accept GET request and parse HTTP headers etc. etc. I don't want to re-invent that wheel either.</p>\n\n<p>What can I use to expose a minimal API to the web using something with the least footprint/dependencies. I read about Sinatra, Ramaze, etc., but I believe there can be a way to do something even simpler. Can I just hack some code on top of Rack to do what I am trying to do? </p>\n\n<p>Or in other words, what will be the simplest Ruby equivalent of the following code in nodejs:</p>\n\n<pre><code>var http = require('http');\n\nhttp.createServer(function (req, res) {\n  res.writeHead(200, {'Content-Type': 'text/plain'});\n  var ans = crunch(number);\n  res.end(ans);\n}).listen(1337, \"127.0.0.1\");\n\nconsole.log('Server running at http://127.0.0.1:1337/');\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "sprockets", "ruby-on-rails-4.2"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4811298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad2a9028b3c74319928764ff4b98dfd6?s=128&d=identicon&r=PG&f=1", "display_name": "meowsus", "link": "https://stackoverflow.com/users/4811298/meowsus"}, "edited": false, "score": 0, "creation_date": 1444842351, "post_id": 33113593, "comment_id": 54074499, "body": "Thanks Mike, but I found another solution that fit my use case a bit better. I linked to in my original post."}], "tags": [], "owner": {"reputation": 36, "user_id": 2151907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8078622042b671978a83015b360d68?s=128&d=identicon&r=PG", "display_name": "Mike Eirih", "link": "https://stackoverflow.com/users/2151907/mike-eirih"}, "is_accepted": false, "score": 0, "last_activity_date": 1444774780, "creation_date": 1444774780, "answer_id": 33113593, "question_id": 33113383, "link": "https://stackoverflow.com/questions/33113383/rails-4-2-custom-helper-for-scss-manifest-in-engines/33113593#33113593", "title": "Rails 4.2: Custom Helper for SCSS Manifest in Engines", "body": "<p>We had a similar issue a while ago.</p>\n\n<p>application.scss (within gem) looks like this:</p>\n\n<pre><code> /*\n *= require_tree .\n *= require_self\n */\n\n@import \"c3.min\";\n@import \"analytics\";\n</code></pre>\n\n<p>and gemspec contains line for including all the code from app folder.</p>\n\n<pre><code>Gem::Specification.new do |s|    \n   s.files = Dir['{app,config,db,lib}/**/*', 'MIT-LICENSE', 'Rakefile',   'README.rdoc']\nend\n</code></pre>\n\n<p>Be sure to check that you don't have any caching enabled in env files as well.</p>\n"}], "owner": {"reputation": 13, "user_id": 4811298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad2a9028b3c74319928764ff4b98dfd6?s=128&d=identicon&r=PG&f=1", "display_name": "meowsus", "link": "https://stackoverflow.com/users/4811298/meowsus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444842247, "creation_date": 1444773633, "last_edit_date": 1495542214, "question_id": 33113383, "link": "https://stackoverflow.com/questions/33113383/rails-4-2-custom-helper-for-scss-manifest-in-engines", "title": "Rails 4.2: Custom Helper for SCSS Manifest in Engines", "body": "<p>Our application is a collection of 3 engines that make up our base gem. Other plugin gems, written specifically for our base gem, can be used to add functionality to the base.</p>\n\n<p>Currently we have 2 custom sprockets directives and 1 custom Sass importer that attempts to pull in SCSS files from these plugins dynamically into the base manifest. A contrived example looks something like:</p>\n\n<pre><code>//= depend_on_gemfile     # mimics default \"depend_on\" functionality\n//= depend_on_stylesheets # mimics default \"depend_on\" functionality\n\n...\n\n@import 'engine/namespace/settings/global';\n@import 'engine/namespace/settings/colors';\n@import 'engine/namespace/settings/fonts';\n@import '[engine-plugins]/namespace/settings'; # mimics Sass Filesystem importer\n\n...\n</code></pre>\n\n<p>To be clear, this works. We're having problems with the way Sass is caching the files, that is a bit too complicated to get into and not really my goal at the moment.</p>\n\n<p>The point is that we realized that removing the custom Sprockets directives and Sass importer, in favor of using a Rails helper, would also solve our problem, since the ERB would be compiled before the SCSS, we'd be able to find and format all of the paths needed in all included plugins into a string and dump it out into the manifest. Something like:</p>\n\n<pre><code>@import 'engine/namespace/settings/global';\n@import 'engine/namespace/settings/colors';\n@import 'engine/namespace/settings/fonts';\n&lt;%= load_plugin_stylesheets_for('settings'); %&gt;\n\n...\n</code></pre>\n\n<p>This seems like a much more simple solution, since all we are doing is finding each path and converting those paths to strings.</p>\n\n<p>The problem seems to be that Rails helpers are outside of domain of Sprockets entirely.</p>\n\n<p>I've found some resources, but they all seem to pertain to Rails 3.</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/7602173/add-custom-methods-to-rails-3-1-asset-pipeline\">Add custom methods to Rails 3.1 asset pipeline?</a></li>\n<li><a href=\"https://github.com/rails/rails/issues/3282\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/issues/3282</a></li>\n</ul>\n\n<p>I'm curious if anyone has had this problem with Rails 4, if they solved it and how. Or if I'm just thinking about this all wrong and there is a better way to approach the problem without a similar over-complication like we had before.</p>\n\n<p><strong>TL;DR</strong></p>\n\n<p>I'd like to use regular Rails helpers inside of a Sprockets manifest file. The Rails version is 4.2.4. We're running engines. Is this possible?</p>\n\n<hr>\n\n<p><strong>EDIT:</strong></p>\n\n<p><a href=\"https://github.com/rails/rails/issues/3116#issuecomment-3137131\" rel=\"nofollow noreferrer\">This comment</a> answered my question.</p>\n\n<p>After implementing this solution in an initializer within our <code>engine.rb</code> file, all of the Rails ActionView Helpers were available, including my custom written helper.</p>\n"}, {"tags": ["arrays", "ruby", "iterator", "symbols"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1444771787, "post_id": 33112777, "comment_id": 54040275, "body": "Method names are symbols, so the reference is to the method <code>:even?</code>. The operator <code>&amp;</code> does two things: it invokes <a href=\"http://ruby-doc.org/core-2.2.0/Symbol.html#method-i-to_proc\" rel=\"nofollow noreferrer\">Symbol#to_proc</a> on the method name to convert it to a proc (instance of <a href=\"http://ruby-doc.org/core-2.2.0/Proc.html\" rel=\"nofollow noreferrer\">Proc</a>) and then calls the proc. If you instead had <code>arr.select(&amp;proc)</code>, it would just call the proc."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1444772380, "post_id": 33112777, "comment_id": 54040564, "body": "I cannot parse your sentence <code>(The &amp; symbol, to me, is) what makes the method name, well a method name</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1444772455, "post_id": 33112777, "comment_id": 54040596, "body": "Why would you think it would work without <code>:</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 2, "last_activity_date": 1444773144, "last_edit_date": 1495540702, "creation_date": 1444771793, "answer_id": 33112974, "question_id": 33112777, "link": "https://stackoverflow.com/questions/33112777/simple-ruby-proc-with/33112974#33112974", "title": "Simple Ruby Proc with (&amp;:)", "body": "<p>As explained in \"<a href=\"https://stackoverflow.com/questions/1217088/what-does-mapname-mean-in-ruby\">What does map(&amp;:name) mean in Ruby?</a>\", the <code>&amp;:whatever</code> syntax converts the <code>:whatever</code> method in a proc and passes it to the caller.</p>\n\n<pre><code>puts arr.select(&amp;:even?)\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>puts arr.select { |x| x.even? }\n</code></pre>\n\n<p>The reason why <code>&amp;:whatever</code> works whereas <code>&amp;whatever</code> does not, is because in the latter case the Ruby virtual machine will actually try to evaluate <code>whatever</code> and pass the result to <code>&amp;</code>, when what you really want is a sort of lazy-evaluation. You want is to pass a method reference/name to <code>&amp;</code>, not execute the method itself.</p>\n\n<p>The error you experience is because the following code</p>\n\n<pre><code>puts arr.select(&amp;even?)\n</code></pre>\n\n<p>can be read as</p>\n\n<ol>\n<li>execute <code>even?</code></li>\n<li>get the return value and pass it to <code>&amp;</code></li>\n<li>... but hey... <code>even?</code> is not defined (notice the target is implicit)... crash!</li>\n</ol>\n"}], "owner": {"reputation": 597, "user_id": 4534985, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Z4Y06.jpg?s=128&g=1", "display_name": "inthenameofmusik", "link": "https://stackoverflow.com/users/4534985/inthenameofmusik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "closed_date": 1444773061, "accepted_answer_id": 33112974, "answer_count": 1, "score": 0, "last_activity_date": 1444773144, "creation_date": 1444770980, "question_id": 33112777, "link": "https://stackoverflow.com/questions/33112777/simple-ruby-proc-with", "closed_reason": "Duplicate", "title": "Simple Ruby Proc with (&amp;:)", "body": "<p>Quick question, I've run across this <code>select(&amp;:even)</code> syntax a few times, and I understand it for the most part except for one thing:</p>\n\n<p>The <code>&amp;</code> symbol, to me, is what makes the method name, well a method name. I don't understand why a symbol syntax is needed to define even. In a short example:</p>\n\n<pre><code>arr = [1,2,3,4,5]\nputs arr.select(&amp;:even?)\n</code></pre>\n\n<p>correctly selects and prints all the even numbers but,</p>\n\n<pre><code>arr = [1,2,3,4,5]\nputs arr.select(&amp;even?)\n</code></pre>\n\n<p>produces:</p>\n\n<p><code>Untitled 3.rb:2:in &lt;main&gt;: undefined method even? for main:Object (NoMethodError)\n</code></p>\n\n<p>Can anyone help me understand the necessity of using a <code>:</code> symbol?</p>\n"}, {"tags": ["ruby", "curl", "put"], "comments": [{"owner": {"reputation": 1320, "user_id": 577133, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a7fca2db6ff3f4583df98043bd5166f9?s=128&d=identicon&r=PG", "display_name": "atmosx", "link": "https://stackoverflow.com/users/577133/atmosx"}, "edited": false, "score": 1, "creation_date": 1444771078, "post_id": 33112730, "comment_id": 54039883, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/4762541/ruby-put-request-with-json-body\">Ruby: PUT Request with JSON body?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 185, "user_id": 3841384, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/aPY5J.png?s=128&g=1", "display_name": "oorahduc", "link": "https://stackoverflow.com/users/3841384/oorahduc"}, "edited": false, "score": 0, "creation_date": 1444777255, "post_id": 33113760, "comment_id": 54042339, "body": "Thanks Dan! I was requiring json, but I didn&#39;t really fully understand the difference in the data = part. The JSON.dump part made total sense. Works like a charm."}], "tags": [], "owner": {"reputation": 223, "user_id": 602980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bb1a734ea843eb1ad773bae741c40aa?s=128&d=identicon&r=PG", "display_name": "stompydan", "link": "https://stackoverflow.com/users/602980/stompydan"}, "is_accepted": true, "score": 4, "last_activity_date": 1444775676, "creation_date": 1444775676, "answer_id": 33113760, "question_id": 33112730, "link": "https://stackoverflow.com/questions/33112730/ruby-http-put-method/33113760#33113760", "title": "Ruby: HTTP Put method", "body": "<p>A few things:</p>\n\n<ul>\n<li>You're not sending JSON in the Ruby example, it's a string representation of a Ruby hash which isn't the same. You need the <a href=\"http://ruby-doc.org/stdlib-2.2.3/libdoc/json/rdoc/JSON.html\" rel=\"nofollow\">JSON module</a> or similar.</li>\n<li>In the Ruby code you're attempting to send a JSON object (which would look like <code>{\"ip\":\"1.1.1.1\"}</code> and in the curl example you're sending it in application/x-www-form-urlencoded format, so they're currently not equivalent.</li>\n<li>Also I'd look at the type of data the server expects from your requests: both Ruby and curl send a request header of <code>Content-Type: application/x-www-form-urlencoded</code> by default, and you're expecting to send JSON. This is why the curl example works: the data format you're using and the header matches. Note the <code>.json</code> in the URL shouldn't really make any difference; the header takes precedence.</li>\n<li>Your call to <code>send_request</code> has you picking out the <code>data</code> parameter as a Python-style keyword argument. Ruby doesn't do that: what you're actually doing there is assigning a local variable in-line with the call.</li>\n</ul>\n\n<p>So try something like this:</p>\n\n<pre><code>require 'json' # put this at the top of the file\n\nuri = URI.parse(\"http://#{ip}:#{port}/api/v1/address_data/1.json\")\njobj = {\"ip\" =&gt; \"1.1.1.1\"}\nhttp = Net::HTTP.new(uri.hostname, uri.port)\nresponse = http.send_request('PUT', uri.path, JSON.dump(jobj),\n  {'Content-Type' =&gt; 'application/json'})\n</code></pre>\n\n<p>And just a friendly reminder, saying something \"doesn't work\" doesn't usually give enough information to people that might answer your question: try and remember to paste in error messages, stack traces, and things like that :)</p>\n"}], "owner": {"reputation": 185, "user_id": 3841384, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/aPY5J.png?s=128&g=1", "display_name": "oorahduc", "link": "https://stackoverflow.com/users/3841384/oorahduc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1286, "favorite_count": 0, "accepted_answer_id": 33113760, "answer_count": 1, "score": 2, "last_activity_date": 1444775766, "creation_date": 1444770786, "question_id": 33112730, "link": "https://stackoverflow.com/questions/33112730/ruby-http-put-method", "title": "Ruby: HTTP Put method", "body": "<p>I am attempting to update the 'ip' parameter in a json object in an API.</p>\n\n<p>I have the following case:</p>\n\n<pre><code>when \"put\"\n  uri = URI.parse(\"http://#{ip}:#{port}/api/v1/address_data/1.json\")\n  jobj = Hash.new\n  jobj['ip'] = \"1.1.1.1\"\n  http = Net::HTTP.new(uri.hostname, uri.port)\n  response = http.send_request('PUT', '/api/v1/address_data/1.json', data = jobj.to_s)\nend\n</code></pre>\n\n<p>This does not work, but this does:</p>\n\n<pre><code>curl -X PUT http://ip:port/api/v1/address_data/1.json -d \"ip=1.1.1.1\"\n</code></pre>\n\n<p>How do I more accurately translate the curl into a Put request in Ruby? I have tried several methods I've found through google searching, but none of them have had successful results.</p>\n"}, {"tags": ["ruby", "sqlite", "csv", "sequel"], "comments": [{"owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "edited": false, "score": 0, "creation_date": 1444834645, "post_id": 33112566, "comment_id": 54069538, "body": "Your code example can&#39;t be executed.  You require sequel, but there&#39;s no code to create the <code>DB</code> constant. The code depends on other tables that aren&#39;t created, such as news and item. You don&#39;t need to use both <code>File.new</code> and <code>File.open</code>. Also, <code>Dataset#to_csv</code> isn&#39;t defined in recent versions of Sequel unless you use an extension."}, {"owner": {"reputation": 141, "user_id": 2318081, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bec95b5640474b27e965961c7b55eb1c?s=128&d=identicon&r=PG", "display_name": "nanotechz9l", "link": "https://stackoverflow.com/users/2318081/nanotechz9l"}, "reply_to_user": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "edited": false, "score": 0, "creation_date": 1444838242, "post_id": 33112566, "comment_id": 54072029, "body": "All that code is included just not shown. On my question above I mentioned my code worked with the exception of the blank csv file. I will update the code to be complete. Those two item and news tables are already present in my sqlite file I&#39;m just parsing them."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1444839477, "post_id": 33112566, "comment_id": 54072829, "body": "<code>news = DB[&#39;SELECT one, two FROM news WHERE Id=12;&#39;]</code>"}, {"owner": {"reputation": 141, "user_id": 2318081, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bec95b5640474b27e965961c7b55eb1c?s=128&d=identicon&r=PG", "display_name": "nanotechz9l", "link": "https://stackoverflow.com/users/2318081/nanotechz9l"}, "edited": false, "score": 0, "creation_date": 1444840483, "post_id": 33112566, "comment_id": 54073417, "body": "Thanks steenslag. That was one of the diff things I tried but still produced an empty csv file."}], "owner": {"reputation": 141, "user_id": 2318081, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bec95b5640474b27e965961c7b55eb1c?s=128&d=identicon&r=PG", "display_name": "nanotechz9l", "link": "https://stackoverflow.com/users/2318081/nanotechz9l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1444839340, "creation_date": 1444770146, "last_edit_date": 1444839340, "question_id": 33112566, "link": "https://stackoverflow.com/questions/33112566/how-do-i-create-a-csv-file-with-specific-sqlite-table-fields-using-ruby-and-seq", "title": "How do I create a .csv file with specific sqlite table fields using ruby and sequel gem?", "body": "<p>The bottom code is supposed to create a new test table, add data from two existing tables and add the contents to a new csv file. The parsing of both existing tables works fine, and the .csv also gets created without error. The issue I'm having is that the .csv is being created with blank data except for the 3 \"Fixnum\" header columns above. I've tried multiple different things including numerous variations of string interpolation.</p>\n\n<pre><code>require 'sequel'\n\n# Run time argv\nDB = Sequel.connect(\"sqlite://#{db_file}\")\n\n# Load to_csv method via extension\nDB.extension(:sequel_3_dataset_methods)\n\n# Create test case\nDB.create_table(:\"#{table}\"){\nFixnum :\"News-1\"\nFixnum :\"News-2\"\nFixnum :\"Item-1\"\n}\n\n# Parse news table\nDB['SELECT one, two FROM news WHERE Id=12;'].each do |news|\n#p news\nend\n\n# Parse item table\nDB['SELECT news_feed FROM item;'].each do |item|\n#p item\nend\n\n# Insert data into csv_file\n1.times{|i|\nDB[:\"#{table}\"].insert(\"#{news}\", \"#{news}\", \"#{item}\")\n}\n\n# Open .csv file, write and save\nFile.open(\"#{csv_file}\", 'w'){|f|\nf &lt;&lt; DB[:\"#{table}\"].to_csv                        \n}\n</code></pre>\n"}, {"tags": ["ruby", "audio", "fft", "wav", "equalizer"], "comments": [{"owner": {"reputation": 8444, "user_id": 1837203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4db7eb958bf0c84072c8e9658700167?s=128&d=identicon&r=PG", "display_name": "jaket", "link": "https://stackoverflow.com/users/1837203/jaket"}, "edited": false, "score": 0, "creation_date": 1444772774, "post_id": 33112427, "comment_id": 54040746, "body": "I don&#39; t know ruby so could you explain what <code>fft[j] &lt;&lt; x</code> does?"}, {"owner": {"reputation": 72, "user_id": 5419764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff33d1d86e64b81e9367b01d97b24286?s=128&d=identicon&r=PG&f=1", "display_name": "Britt", "link": "https://stackoverflow.com/users/5419764/britt"}, "reply_to_user": {"reputation": 8444, "user_id": 1837203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4db7eb958bf0c84072c8e9658700167?s=128&d=identicon&r=PG", "display_name": "jaket", "link": "https://stackoverflow.com/users/1837203/jaket"}, "edited": false, "score": 0, "creation_date": 1444792456, "post_id": 33112427, "comment_id": 54046028, "body": "That part of the function is taking the value x and putting it into the fft array at position j. It then increments j so the next value will be at the next index."}, {"owner": {"reputation": 8444, "user_id": 1837203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4db7eb958bf0c84072c8e9658700167?s=128&d=identicon&r=PG", "display_name": "jaket", "link": "https://stackoverflow.com/users/1837203/jaket"}, "edited": false, "score": 0, "creation_date": 1444792619, "post_id": 33112427, "comment_id": 54046077, "body": "So it&#39;s the same as a = for assignment?"}, {"owner": {"reputation": 72, "user_id": 5419764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff33d1d86e64b81e9367b01d97b24286?s=128&d=identicon&r=PG&f=1", "display_name": "Britt", "link": "https://stackoverflow.com/users/5419764/britt"}, "reply_to_user": {"reputation": 8444, "user_id": 1837203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4db7eb958bf0c84072c8e9658700167?s=128&d=identicon&r=PG", "display_name": "jaket", "link": "https://stackoverflow.com/users/1837203/jaket"}, "edited": false, "score": 0, "creation_date": 1444840385, "post_id": 33112427, "comment_id": 54073358, "body": "Similar, but <code>fft[j] &lt;&lt; x</code> is how to assign things into arrays."}], "owner": {"reputation": 72, "user_id": 5419764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff33d1d86e64b81e9367b01d97b24286?s=128&d=identicon&r=PG&f=1", "display_name": "Britt", "link": "https://stackoverflow.com/users/5419764/britt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 307, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1444769620, "creation_date": 1444769620, "last_edit_date": 1495541033, "question_id": 33112427, "link": "https://stackoverflow.com/questions/33112427/fast-fourier-transform-output-manipulation-in-ruby", "title": "Fast Fourier Transform Output Manipulation in Ruby", "body": "<p>I am building a visual equalizer for audio and am confused what the output to my FFT is. My end goal is to send a simplified array of 6 numbers (1 bass, 4 mid-tones, and 1 treble) to an Arduino equipped with bluetooth.  The numbers will denote how many LEDs to light up in each column (1 column for bass, 1 column for treble, etc).</p>\n\n<p>The first step is to change an audio signal into numerical representations.\nIn order to do that I want to combine certain frequencies into discrete buckets at regular time intervals, i.e. one for Bass that's 60 to 250 Hz.</p>\n\n<p>I've obtained a 300Hz wav file that I am trying to deconvolute using the ruby <code>FFTW3</code> gem.  I would expect one sine wave that completes 300 periods over the course of a 1 second sample. When I pass in a 1s sample of a 300 Hz tone, the <code>fft.length = 1024</code> and <code>fft[0] = 22528</code>.  </p>\n\n<p>I have been using these conversations <a href=\"https://stackoverflow.com/questions/15528293/audio-equalizer-in-ruby\" title=\"Audio Equalizer in Ruby\">Audio Equalizer in Ruby</a>, and <a href=\"https://stackoverflow.com/questions/15031544/extract-fast-fourier-transform-data-from-file#comment21153172_15035230\">Extract Fast Fourier Transform data from file</a> as my main points of reference as the documentation for the ruby gem is confusing.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>require \"ruby-audio\"\nrequire \"fftw3\"\nrequire \"narray\"\n\n# Audio sample rate and block size:\nSAMPLE_RATE = 44100\n# break the audio into chunks (called windows, or frames)\n# pass them sequentially to the FFT.\n# gives a frequency profile that changes over time\n# e.g. 1024, 2048, 4096, 8192, etc..\nWINDOW = 2048\n# samplerate/window =&gt; 44100/2048 = 10.7\n# Updates about 11 times/second\n# RESOLUTION = (1.0*SAMPLE_RATE/WINDOW)\n\nfilename = ARGV[0]\n\nwave = Array.new # length is window size/2\nfft = Array.new(WINDOW/2,[])\n\nbegin\n  # extracting audio from wav with ruby-audio\n  buf = RubyAudio::Buffer.float(WINDOW)\n  RubyAudio::Sound.open(filename) do |snd|\n    while snd.read(buf) != 0\n      wave.concat(buf.to_a)\n      na = NArray.to_na(buf.to_a)\n      fft_slice = FFTW3.fft(na).to_a[0, WINDOW/2]\\\n      # na = array to be transformed\n      j=0\n      fft_slice.each do |x|\n        # getting the real part of the complex number\n        x = x.abs\n        fft[j] &lt;&lt; x; j+=1\n      end\n    end\n  end\n\nrescue =&gt; err\n    # log.error \"error reading audio file: \" + err\n    puts 'There was an error, exiting!'\n    exit\nend\n</code></pre>\n\n<p>Are the inner-most arrays denoting frequencies, and the outer representing time passing, or is it the other way around.  How do I know which array index represents a specific frequency? </p>\n\n<p>I am unsure of how to test this to see if it has accurately created the proper frequency. Is there a good way to look at the data that I've missed, visually or otherwise?</p>\n\n<p>Thanks for any pointers!</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "openssl", "ssl-certificate", "pg"], "answers": [{"comments": [{"owner": {"reputation": 281, "user_id": 2441745, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ca14225b1ae933c94e75089514367232?s=128&d=identicon&r=PG", "display_name": "Bruno Mucelini Mergen", "link": "https://stackoverflow.com/users/2441745/bruno-mucelini-mergen"}, "edited": false, "score": 0, "creation_date": 1469482005, "post_id": 36283315, "comment_id": 64544480, "body": "Thank you Tuxified.. It worked to me. Very very Thanks. =)"}, {"owner": {"reputation": 281, "user_id": 2441745, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ca14225b1ae933c94e75089514367232?s=128&d=identicon&r=PG", "display_name": "Bruno Mucelini Mergen", "link": "https://stackoverflow.com/users/2441745/bruno-mucelini-mergen"}, "edited": false, "score": 0, "creation_date": 1471470298, "post_id": 36283315, "comment_id": 65365193, "body": "Even with Thread.new, sometimes occurred the error again. The solution was shortly after Thread, clean the OpenSSL errors: <code>OpenSSL.errors.clear</code>. Credits: <a href=\"https://github.com/tedconf/front_end_builds/pull/66\" rel=\"nofollow noreferrer\">github.com/tedconf/front_end_builds/pull/66</a>"}], "tags": [], "owner": {"reputation": 683, "user_id": 49792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/297dafb69fdab02a85363d308ccf2af1?s=128&d=identicon&r=PG", "display_name": "Tuxified", "link": "https://stackoverflow.com/users/49792/tuxified"}, "is_accepted": true, "score": 1, "last_activity_date": 1459251791, "creation_date": 1459251791, "answer_id": 36283315, "question_id": 33112155, "link": "https://stackoverflow.com/questions/33112155/pgconnectionbad-pqconsumeinput-ssl-error-key-values-mismatch/36283315#36283315", "title": "PG::ConnectionBad: PQconsumeInput() SSL error: key values mismatch", "body": "<p>I encountered this same problem today. After a long search I came across <a href=\"https://bitbucket.org/ged/ruby-pg/issues/142/async_exec-over-ssl-connection-can-fail-on\" rel=\"nofollow\">this thread</a>. Seems like a bug in OpenSSL library/extension. Because opening a certificate and talking to a DB happen in a single thread, the connection gets screwed up. I still haven't figured out all details but a workaround is to open the certificate in it's own thread, like:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>pkcs = nil\nThread.new { pkcs = OpenSSL::PKCS12.new File.read('/local/to/mycert.pfx'), 'PASSWORD' }.join\n</code></pre>\n\n<p>Hope that helps :)</p>\n"}], "owner": {"reputation": 281, "user_id": 2441745, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ca14225b1ae933c94e75089514367232?s=128&d=identicon&r=PG", "display_name": "Bruno Mucelini Mergen", "link": "https://stackoverflow.com/users/2441745/bruno-mucelini-mergen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 0, "accepted_answer_id": 36283315, "answer_count": 1, "score": 0, "last_activity_date": 1459251791, "creation_date": 1444768580, "question_id": 33112155, "link": "https://stackoverflow.com/questions/33112155/pgconnectionbad-pqconsumeinput-ssl-error-key-values-mismatch", "title": "PG::ConnectionBad: PQconsumeInput() SSL error: key values mismatch", "body": "<p>When I open a certificate with OpenSSL::PKCS12, I lose the connection with my database and occur the error: <code>PG::ConnectionBad: PQconsumeInput() SSL error: key values mismatch</code>.</p>\n\n<p>I'm doing this:</p>\n\n<pre><code>myuser@developer:~/myapp$ rails c\n\n2.2.3 :001 &gt; OpenSSL::PKCS12.new File.read('/local/to/mycert.pfx'), 'PASSWORD'\n=&gt; #&lt;OpenSSL::PKCS12:0x000000072e6808 @key=#&lt;OpenSSL::PKey::RSA:0x000000072e67e0&gt;, @certificate=#&lt;OpenSSL::X509::Certificate: subject=#&lt;OpenSSL::X509::Name:0x000000072e6100&gt;, issuer=#&lt;OpenSSL::X509::Name:0x000000072e6128&gt;, serial=#&lt;OpenSSL::BN:0x000000072e6150&gt;, not_before=2014-12-18 19:15:55 UTC, not_after=2015-12-18 19:15:55 UTC&gt;, \n@ca_certs=[#&lt;OpenSSL::X509::Certificate: subject=#&lt;OpenSSL::X509::Name:0x000000072e5c78&gt;, issuer=#&lt;OpenSSL::X509::Name:0x000000072e5ca0&gt;, serial=#&lt;OpenSSL::BN:0x000000072e5cc8&gt;, not_before=2014-08-04 18:38:36 UTC, not_after=2021-10-11 18:38:36 UTC&gt;, #&lt;OpenSSL::X509::Certificate: subject=#&lt;OpenSSL::X509::Name:0x000000072e5818&gt;, issuer=#&lt;OpenSSL::X509::Name:0x000000072e5840&gt;, serial=#&lt;OpenSSL::BN:0x000000072e5868&gt;, not_before=2011-10-21 12:16:29 UTC, not_after=2021-10-21 12:16:29 UTC&gt;, #&lt;OpenSSL::X509::Certificate: subject=#&lt;OpenSSL::X509::Name:0x000000072e52f0&gt;, issuer=#&lt;OpenSSL::X509::Name:0x000000072e5318&gt;, serial=#&lt;OpenSSL::BN:0x000000072e5340&gt;, not_before=2010-06-21 19:04:57 UTC, not_after=2023-06-21 19:04:57 UTC&gt;]&gt;\n</code></pre>\n\n<p>After this I lose the connection:</p>\n\n<pre><code>2.2.3 :002 &gt; Company.last\nPG::ConnectionBad: PQconsumeInput() SSL error: key values mismatch\n:             SELECT tablename\n            FROM pg_tables\n            WHERE schemaname = ANY (current_schemas(false))\n\nActiveRecord::StatementInvalid: PG::ConnectionBad: PQconsumeInput() SSL error: key values mismatch\n:             SELECT tablename\n            FROM pg_tables\n            WHERE schemaname = ANY (current_schemas(false))\n\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.4/lib/active_record/connection_adapters/postgresql/database_statements.rb:147:in `async_exec'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.4/lib/active_record/connection_adapters/postgresql/database_statements.rb:147:in `block in query'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.4/lib/active_record/connection_adapters/abstract_adapter.rb:473:in `block in log'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/activesupport-4.2.4/lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.4/lib/active_record/connection_adapters/abstract_adapter.rb:467:in `log'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.4/lib/active_record/connection_adapters/postgresql/database_statements.rb:146:in `query'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.4/lib/active_record/connection_adapters/postgresql/schema_statements.rb:91:in `tables'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.4/lib/active_record/connection_adapters/schema_cache.rb:90:in `prepare_tables'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.4/lib/active_record/connection_adapters/schema_cache.rb:22:in `table_exists?'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.4/lib/active_record/model_schema.rb:230:in `table_exists?'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.4/lib/active_record/attribute_methods/primary_key.rb:97:in `get_primary_key'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.4/lib/active_record/attribute_methods/primary_key.rb:85:in `reset_primary_key'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.4/lib/active_record/attribute_methods/primary_key.rb:73:in `primary_key'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.4/lib/active_record/attribute_methods/primary_key.rb:80:in `quoted_primary_key'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.4/lib/active_record/relation/delegation.rb:48:in `quoted_primary_key'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.4/lib/active_record/relation/query_methods.rb:1078:in `reverse_sql_order'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.4/lib/active_record/relation/query_methods.rb:852:in `reverse_order!'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.4/lib/active_record/relation/query_methods.rb:846:in `reverse_order'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.4/lib/active_record/relation/finder_methods.rb:511:in `find_last'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.4/lib/active_record/relation/finder_methods.rb:160:in `last'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/activerecord-4.2.4/lib/active_record/querying.rb:3:in `last'\n    from (irb):2\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/railties-4.2.4/lib/rails/commands/console.rb:110:in `start'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/railties-4.2.4/lib/rails/commands/console.rb:9:in `start'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:68:in `console'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/railties-4.2.4/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n    from /home/myuser/.rvm/gems/ruby-2.2.3/gems/railties-4.2.4/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n    from bin/rails:4:in `require'\n    from bin/rails:4:in `&lt;main&gt;'2.2.3 :003 &gt;\n</code></pre>\n\n<p>I perceive  that this occurs when the method <code>ca_certs</code> is not null.</p>\n\n<pre><code>Ruby version: 2.2.3\nRails version: 4.2.4\ngem 'pg', '0.18.3'\n</code></pre>\n\n<p>Has anyone had this problem?   </p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 2, "creation_date": 1444766878, "post_id": 33111651, "comment_id": 54037585, "body": "Maybe create some sort of script as part of the install process that downloads the DB independently, but still as part of the <code>gem install</code> process?"}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1444775702, "post_id": 33112825, "comment_id": 54041848, "body": "I think the idea of a well-documented import script would work. I hate when an installer tries to download a lot more than I expect, or it takes longer than I expect; CNTRL+C gets hit a lot then. A script initiated by the user that shows progress during the transfer would go a long way toward giving me a warm and fuzzy feeling."}], "tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": false, "score": 0, "last_activity_date": 1444771184, "creation_date": 1444771184, "answer_id": 33112825, "question_id": 33111651, "link": "https://stackoverflow.com/questions/33111651/packaging-a-large-data-file-in-a-ruby-gem/33112825#33112825", "title": "Packaging a large data file in a ruby gem", "body": "<p>I suspect the error is coming from this <a href=\"https://github.com/rubygems/rubygems/blob/master/lib/rubygems/package/tar_reader/entry.rb#L133\" rel=\"nofollow\">line</a> where rubygems tries to read the entry from the tar archive (a gem is basically a tar archive).</p>\n\n<p>Not only is it trying to read the entry into memory in one go, but ruby's <code>IO.read</code> requires that its first argument fit into a signed long (not sure this is documented, but it's certainly what MRI does). On many common platforms, that means a 32 bit signed integer, max value 2**31-1, which is less than the size of your sqlite file.</p>\n\n<p>You won't be able to install this gem without patching rubygems itself. Furthermore, since it does everything in memory (since it's expecting files to be smallish) you might run into memory allocation issues.</p>\n\n<p>A gem can have a post install message, which you could use to prompt users to run your download script, but you can't run a script automatically (unless you abuse extconf.rb). Your users will probably thank you when minor code changes to your gem don't require them to re-download the 2GB data files.</p>\n"}], "owner": {"reputation": 813, "user_id": 2494057, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e7806cb6e3ca1ad99afca95af130ce5e?s=128&d=identicon&r=PG", "display_name": "David Tresner-Kirsch", "link": "https://stackoverflow.com/users/2494057/david-tresner-kirsch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444771184, "creation_date": 1444766733, "question_id": 33111651, "link": "https://stackoverflow.com/questions/33111651/packaging-a-large-data-file-in-a-ruby-gem", "title": "Packaging a large data file in a ruby gem", "body": "<p>I'm trying to package a gem that relies on a large relational reference source, currently implemented as a 2.1GB sqlite database file.  I've placed the file in a /data directory and included it appropriately in the gemspec.  <code>gem build</code> works fine (although it takes half an hour to compress itself!), but <code>gem install</code> errors out:</p>\n\n<pre><code>ERROR:  While executing gem ... (RangeError)\n    integer 2243380224 too big to convert to `int'\n</code></pre>\n\n<p>This would be totally cryptic, if I didn't notice that 2243380224 is the exact file size of the database. However, knowing that's the cause of the error doesn't bring me closer to a solution.</p>\n\n<p>In the case at hand, it would not make sense to require users to separately download the database and specify it in their project configuration. I want <code>gem install</code> to deliver this functionality out of the box. Any suggestions on what best practice should be on packaging up ruby functionality that relies on mining a large information repository? </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1444766647, "post_id": 33111468, "comment_id": 54037439, "body": "Quick note: that&#39;s not the syntax for case statements. Just use an if, or here&#39;s the syntax for case: <a href=\"http://www.skorks.com/2009/08/how-a-ruby-case-statement-works-and-what-you-can-do-with-it/\" rel=\"nofollow noreferrer\">skorks.com/2009/08/&hellip;</a>"}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1444767404, "post_id": 33111468, "comment_id": 54037881, "body": "&quot;if they are facing north and turn left, they will face north.&quot; Is that really what you mean?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1444768892, "post_id": 33111468, "comment_id": 54038725, "body": "@steenslag, that could be true, depending on where you are standing."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1444770611, "post_id": 33111468, "comment_id": 54039634, "body": "@CarySwoveland  southpole ?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1444771067, "post_id": 33111468, "comment_id": 54039871, "body": "Somebody give that man (@steenslag) a cigar."}, {"owner": {"reputation": 49, "user_id": 5438726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c3995e34da786053a4508c1dcc5e281?s=128&d=identicon&r=PG&f=1", "display_name": "Muetral_Nilk_Hotel", "link": "https://stackoverflow.com/users/5438726/muetral-nilk-hotel"}, "reply_to_user": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1444787685, "post_id": 33111468, "comment_id": 54044845, "body": "@Linuxios you&#39;re right, and thank you for the link."}], "answers": [{"comments": [{"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 1, "creation_date": 1444766736, "post_id": 33111604, "comment_id": 54037489, "body": "Just a note for anyone who doesn&#39;t know: <code>%</code> is the remainder, or modular arithmetic operator. Ex. 3 % 2 = 1, or 4 % 5 = 4."}, {"owner": {"reputation": 1113, "user_id": 1250190, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/42209a6704f712d1eadbc28a4f024c9e?s=128&d=identicon&r=PG", "display_name": "pjd", "link": "https://stackoverflow.com/users/1250190/pjd"}, "reply_to_user": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1444766876, "post_id": 33111604, "comment_id": 54037583, "body": "Thanks, @Linuxios. I&#39;ll make it a little more clear in my answer. Thanks also for noting the incorrect <code>case</code> syntax in the original question."}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 1, "creation_date": 1444766917, "post_id": 33111604, "comment_id": 54037610, "body": "No problem. Just thought it might help the OP if they weren&#39;t familiar with modular arithmetic in Ruby."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "reply_to_user": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1444768133, "post_id": 33111604, "comment_id": 54038303, "body": "@Linuxios: In Ruby <code>%</code> is the modulus or modulo operator and not the remainder operator. In this case (non-negative values) it doesn&#39;t make a difference though."}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1444768545, "post_id": 33111604, "comment_id": 54038529, "body": "@cremno: Yes, formally. It can be thought of (under certain circumstances) as a remainder operator."}], "tags": [], "owner": {"reputation": 1113, "user_id": 1250190, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/42209a6704f712d1eadbc28a4f024c9e?s=128&d=identicon&r=PG", "display_name": "pjd", "link": "https://stackoverflow.com/users/1250190/pjd"}, "is_accepted": false, "score": 3, "last_activity_date": 1445264765, "last_edit_date": 1445264765, "creation_date": 1444766577, "answer_id": 33111604, "question_id": 33111468, "link": "https://stackoverflow.com/questions/33111468/cardinal-directions-in-ruby-array/33111604#33111604", "title": "Cardinal directions in Ruby array", "body": "<p>Since you have 4 possible options, you can use modular arithmetic (i.e., get the remainder) when your variable is divided by 4:</p>\n\n<pre><code>case turn_list\nwhen \"R\"\n    position = (position + 1)%4\nwhen \"L\" \n    position = (position - 1)%4\nend\n</code></pre>\n\n<p>The <code>%</code> sign is the modulo operator that will give you the remainder when two numbers are divided. That should give you the answer you want. For example, if you are at position 3 (West) and turn right you add 1 and divide by 4 and get take the remainder, which is 0 (North).</p>\n\n<p>(I edited cases \"R\" and \"L\" because I think you had them labeled backwards in your question.)</p>\n"}, {"comments": [{"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1444768572, "post_id": 33111954, "comment_id": 54038546, "body": "This is a great, very Rubyish solution."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1444769196, "post_id": 33111954, "comment_id": 54038886, "body": "The OP asked that an index between <code>0</code> and <code>3</code> be returned. That&#39;s of course an easy change, of course, and possibly not one that is advised, depending on the OP&#39;s application."}, {"owner": {"reputation": 13376, "user_id": 3357295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3PzYS.jpg?s=128&g=1", "display_name": "Doguita", "link": "https://stackoverflow.com/users/3357295/doguita"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1444770171, "post_id": 33111954, "comment_id": 54039414, "body": "@CarySwoveland I am just showing another way. The other answer already covers how OP can use modulo to get the index."}], "tags": [], "owner": {"reputation": 13376, "user_id": 3357295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3PzYS.jpg?s=128&g=1", "display_name": "Doguita", "link": "https://stackoverflow.com/users/3357295/doguita"}, "is_accepted": false, "score": 2, "last_activity_date": 1444768459, "last_edit_date": 1444768459, "creation_date": 1444767853, "answer_id": 33111954, "question_id": 33111468, "link": "https://stackoverflow.com/questions/33111468/cardinal-directions-in-ruby-array/33111954#33111954", "title": "Cardinal directions in Ruby array", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-rotate-21\" rel=\"nofollow\"><code>Array#rotate!</code></a> passing 1(or nothing, as 1 is the default argument) to go right and -1 to go left, always keeping the original position:</p>\n\n<pre><code>cardinal_directions = [\"N\", \"E\", \"S\", \"W\"]\n# =&gt; [\"N\", \"E\", \"S\", \"W\"] \nposition = cardinal_directions.index('S')\n# =&gt; 2 \ncardinal_directions.rotate!(1)\n# =&gt; [\"E\", \"S\", \"W\", \"N\"] \ncardinal_directions[position]\n# =&gt; \"W\" \ncardinal_directions.rotate!(1)\n# =&gt; [\"S\", \"W\", \"N\", \"E\"] \ncardinal_directions[position]\n# =&gt; \"N\" \ncardinal_directions.rotate!(1)\n# =&gt; [\"W\", \"N\", \"E\", \"S\"] \ncardinal_directions[position]\n# =&gt; \"E\" \ncardinal_directions.rotate!(-1)\n# =&gt; [\"S\", \"W\", \"N\", \"E\"] \ncardinal_directions[position]\n# =&gt; \"N\" \ncardinal_directions.rotate!(-1)\n# =&gt; [\"E\", \"S\", \"W\", \"N\"] \ncardinal_directions[position]\n# =&gt; \"W\" \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1444786506, "post_id": 33112784, "comment_id": 54044589, "body": "I see I forgot the North Pole case. Oh, well."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1444771026, "creation_date": 1444771026, "answer_id": 33112784, "question_id": 33111468, "link": "https://stackoverflow.com/questions/33111468/cardinal-directions-in-ruby-array/33112784#33112784", "title": "Cardinal directions in Ruby array", "body": "<p>I suggest you employ a class to keep track of each person's bearing:</p>\n\n<pre><code>class Wanderers\n  attr_accessor :name, :bearing\n\n  def initialize(name, initial_bearing, at_south_pole = false)\n    @name = name\n    @bearing = at_south_pole ? :north : initial_bearing\n    @at_south_pole = at_south_pole\n  end\n\n  def turn_left\n    return :north if @at_south_pole\n    @bearing = \n    case @bearing\n    when :north  then :west\n    when :west   then :south\n    when :south  then :east\n    when :east   then :north\n    end\n  end\n\n  def turn_right\n    return :north if @at_south_pole\n    @bearing = \n    case @bearing\n    when :north  then :east\n    when :east   then :south\n    when :south  then :west\n    when :west   then :north\n    end\n  end\nend\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>hector = Wanderers.new \"Hector\", :east\nhector.turn_right #=&gt; :south \nhector.turn_right #=&gt; :west \nhector.turn_right #=&gt; :north \nhector.turn_right #=&gt; :east \nhector.turn_left  #=&gt; :north \nhector.bearing    #=&gt; :north \n\nlola = Wanderers.new \"Lola\", :north, true\nlola.turn_right   #=&gt; :north \nlola.turn_right   #=&gt; :north \nlola.turn_left    #=&gt; :north \nlola.bearing      #=&gt; :north \n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 5438726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c3995e34da786053a4508c1dcc5e281?s=128&d=identicon&r=PG&f=1", "display_name": "Muetral_Nilk_Hotel", "link": "https://stackoverflow.com/users/5438726/muetral-nilk-hotel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1445264765, "creation_date": 1444766095, "question_id": 33111468, "link": "https://stackoverflow.com/questions/33111468/cardinal-directions-in-ruby-array", "title": "Cardinal directions in Ruby array", "body": "<p>I'm trying to create a program that will keep track of a person's bearing as they turn left and right (e.g., if they are facing north and turn left, they will face north.) I wrote the as an array that works in both ways. Here's my code so far:</p>\n\n<pre><code>puts \"What is your initial bearing?\"\nbearing = gets.chomp\n\nputs \"And what turns do you want to make?\"\nturn_list = gets.chomp\n\ncardinal_directions = [\"N\", \"E\", \"S\", \"W\"]\n\nposition = cardinal_directions.index(bearing)\nturn_list.each |direction|\ncase \"L\"\n    position += 1\ncase \"R\" \n    position -= 1\nend\n</code></pre>\n\n<p>But there's an obvious problem. Say my person is facing west and wants to turn right. How can I tell it it to go from index 3 to index 0? Or if they are at north and want to turn left?</p>\n\n<p>Please excuse crappy code and formatting, I am a novice. Thank you so much for your help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux", "gem"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1444775862, "post_id": 33111428, "comment_id": 54041902, "body": "Please don&#39;t abuse bold text; It&#39;s as bad as writing everything in uppercase. Instead use a little more commentary and format the commands you typed in the same as the output received."}, {"owner": {"reputation": 58061, "user_id": 1610034, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/x77Vf.jpg?s=128&g=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/1610034/saurabh"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1445782811, "post_id": 33111428, "comment_id": 54458211, "body": "@theTinMan: Edited, Thanks."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1445786701, "post_id": 33111428, "comment_id": 54459554, "body": "<code>&#47;use&#47;lib&#47;lib</code> is very suspicious and likely the problem. There should only be a single <code>lib</code>. I suspect you forced the path instead of allowing the install go where it knew it should. Ruby and gem could also be confused as a result. Perhaps a starting question should be &quot;How do I install Ruby correctly?&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1445787032, "post_id": 33111652, "comment_id": 54459682, "body": "It isn&#39;t necessarily to restart a Linux server after installing gems. Restarting individual apps might help but generally they would not have been started until after the <code>bundle install</code> succeeds."}], "tags": [], "owner": {"reputation": 2060, "user_id": 3625058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PEy9i.jpg?s=128&g=1", "display_name": "matanco", "link": "https://stackoverflow.com/users/3625058/matanco"}, "is_accepted": false, "score": 0, "last_activity_date": 1444766739, "last_edit_date": 1495540706, "creation_date": 1444766739, "answer_id": 33111652, "question_id": 33111428, "link": "https://stackoverflow.com/questions/33111428/not-able-to-use-gem-even-after-bundle-install/33111652#33111652", "title": "not able to use gem even after bundle install", "body": "<p>sound like 2 options:</p>\n\n<ol>\n<li>you didn't restarted your server after <code>bundle install</code>, please do.</li>\n<li>you used <code>sudo</code> to install the gems so they installed to all linux users as <code>root</code> so bottom line they really not in your source path, read more about it here:\n<a href=\"https://stackoverflow.com/questions/9065496/why-do-gem-and-sudo-gem-have-different-installation-directories\">Why do &quot;gem&quot; and &quot;sudo gem&quot; have different installation directories?</a></li>\n</ol>\n"}], "owner": {"reputation": 58061, "user_id": 1610034, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/x77Vf.jpg?s=128&g=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/1610034/saurabh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1355, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1445786316, "creation_date": 1444765949, "last_edit_date": 1445786316, "question_id": 33111428, "link": "https://stackoverflow.com/questions/33111428/not-able-to-use-gem-even-after-bundle-install", "title": "not able to use gem even after bundle install", "body": "<p>I am creating a <a href=\"https://github.com/Shopify/dashing\" rel=\"nofollow\">dashing</a> project, on a Linux machine. </p>\n\n<p>When I do <code>bundle install</code>, it installs all the gems, but when I try to use the gem, it gives me an error and suggests to do <code>bundle install</code> again. </p>\n\n<p>The commands and output follow:</p>\n\n<pre><code>saurabh@my-linux:~/beacon$ bundle install\n\nUsing addressable 2.3.8\nUsing execjs 2.0.2\nUsing json 1.8.3\nUsing autoprefixer-rails 6.0.3\nUsing backports 3.6.6\nUsing sass 3.2.19\nUsing bootstrap-sass 3.2.0.2\nUsing buftok 0.2.0\nUsing coffee-script-source 1.9.1.1\nUsing coffee-script 2.2.0\nUsing daemons 1.2.3\nUsing rack 1.5.5\nUsing thread_safe 0.3.5\nUsing tzinfo 1.2.2\nUsing rufus-scheduler 2.0.24\nUsing rack-protection 1.5.3\nUsing tilt 1.4.1\nUsing sinatra 1.4.6\nUsing multi_json 1.11.2\nUsing rack-test 0.6.3\nUsing sinatra-contrib 1.4.6\nUsing hike 1.2.3\nUsing sprockets 2.10.2\nUsing eventmachine 1.0.8\nUsing thin 1.6.4\nUsing thor 0.18.1\nUsing dashing 1.3.4\nUsing unf_ext 0.0.7.1\nUsing unf 0.1.4\nUsing domain_name 0.5.25\nUsing equalizer 0.0.10\nUsing multipart-post 2.0.0\nUsing faraday 0.9.2\nUsing http-cookie 1.0.2\nUsing http-form_data 1.0.1\nUsing http_parser.rb 0.6.0\nUsing http 0.9.8\nUsing memoizable 0.4.2\nUsing naught 1.1.0\nUsing netrc 0.7.9\nUsing rest_client 1.8.3\nUsing simple_oauth 0.3.1\nUsing twitter 5.15.0\nUsing bundler 1.10.6\nUpdating files in vendor/cache\nBundle complete! 5 Gemfile dependencies, 44 gems now installed.\nUse `bundle show [gemname]` to see where a bundled gem is installed.\n\nsaurabh@my-linux:~/beacon$ bundle show dashing\n\n/usr/lib/lib/ruby/gems/2.1.0/gems/dashing-1.3.4\n\nsaurabh@my-linux:~/beacon$ /usr/lib/lib/ruby/gems/2.1.0/gems/dashing-1.3.4/bin/dashing start\n\n/usr/lib/lib/ruby/gems/2.1.0/gems/dashing-1.3.4/lib/dashing/cli.rb:1:in `require': no such file to load -- thor (LoadError)\n    from /usr/lib/lib/ruby/gems/2.1.0/gems/dashing-1.3.4/lib/dashing/cli.rb:1\n    from /usr/lib/lib/ruby/gems/2.1.0/gems/dashing-1.3.4/bin/dashing:6:in `require'\n    from /usr/lib/lib/ruby/gems/2.1.0/gems/dashing-1.3.4/bin/dashing:6\n\nsaurabh@my-linux:~/beacon$ dashing start\n\nCould not find addressable-2.3.8 in any of the sources\nRun `bundle install` to install missing gems.\n\nsaurabh@my-linux:~/beacon$ /usr/lib/lib/ruby/gems/2.1.0/gems/dashing-1.3.4/bin/dashing start\n\nCould not find addressable-2.3.8 in any of the sources\nRun `bundle install` to install missing gems.\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1444766442, "post_id": 33111397, "comment_id": 54037309, "body": "Indentation, while not absolutely required in Ruby scripts, is still a very good idea. It shows blocks and helps us understand loops. Please indent your code correctly in your question, and make sure you maintain that in your own code. Your future self will thank you."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1444766511, "post_id": 33111397, "comment_id": 54037356, "body": "Also, please describe why your code isn&#39;t doing what you want. Provide sample inputs and what you&#39;d expect to happen. See &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1444769710, "post_id": 33111397, "comment_id": 54039170, "body": "beyond that you have a ton of issues such as you are trying to use rails validations outside of ActiveRecord without any reference to them e.g. what do you think happens when you call <code>validate :password</code> or <code>errors.add(:username)</code> you will need methods for these to work. I am not even sure how to help because what you have done is purely conceptual (At a very high level) from what I can see and will never function as it stands."}], "owner": {"reputation": 9, "user_id": 5442339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0fc60a7a677cfc946383f66568be48d?s=128&d=identicon&r=PG&f=1", "display_name": "RubyRow", "link": "https://stackoverflow.com/users/5442339/rubyrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1444768541, "creation_date": 1444765836, "last_edit_date": 1444768541, "question_id": 33111397, "link": "https://stackoverflow.com/questions/33111397/how-to-call-in-validation-logic-in-ruby", "title": "How to call in validation logic in ruby?", "body": "<p>Trying to figure out how to call in validation logic in a ruby program.\nI can not figure out what I am missing.  This program is intended for use in the console.</p>\n\n<pre><code>require_relative 'main_support'\n\nprompt = \"&gt;&gt; \"\n  puts \"Username/Password Validator\"\n\nbegin\n  print \"Please enter your Username: \", prompt\n  username = gets.chomp\nrescue\n    puts \"Oops! You must enter a valid Username! Please try again.\"\n  end\nbegin\n  print \"Please enter your Password: \", prompt\n  password = gets.chomp\nrescue\n puts \"Oops! You must enter a valid password! Please try again.\"\nend\n\n# Decides if the Username and Password is 'true' or 'false'\n\nif (username == true) &amp;&amp; (password == true)\n  puts \"The Username/Password combination is valid!\" \"\\n\" \n# else \n#   puts \"Sorry! Please try again later!!\" \"\\n\"\nend\n\nputs \"Thank you for trying the Username/Password Validator! \\n\"\n</code></pre>\n\n<p>Below is the main_support.rb file.</p>\n\n<pre><code>def username\n  @username\nend\n\nclass Username_validator\n  def username_validation(username, *args)\n    validate :username    \n    has_one_letter = username =~ /^(?=.*[a-zA-Z])(?=.*[0-9]).{8,20}$/\n    t_valid_char = username =~ /^(?=.*[a-zA-Z])(?=.*[0-9]).{8,20}$/\n    validates_exclusion_of /^?=.*\\z$/\n    errors.add(:username, \"Oops! Username must have at least one letter     \n    and contain only letters and numbers\") unless (has_one_letter and        \n    t_valid_char)\n  end\nend\n\nclass Password_validator\n  def password_validation(password, *args)\n    validate :password    \n    has_one_letter = password =~ /^(?=.*[a-zA-Z])(?=.*[0-9]).{8,20}$/\n    t_valid_char = password =~ /^(?=.*[a-zA-Z])(?=.*[0-9]).{8,20}$/\n    validates_exclusion_of  :username \u21d2 \"Must not match username\"\n    validates_exclusion_of /^?=.*\\z$/\n    errors.add(:password, \"Oops! Password must have at least one letter \n    and contain only letters and numbers.\") unless (has_one_letter and \n    t_valid_char)\n  end\nend\n\ndef validate_password(password)\n\nend\n</code></pre>\n\n<p>Here is one of the errors that I am receiving from the console:</p>\n\n<pre><code>main_support.rb:25: syntax error, unexpected tIDENTIFIER, expecting   \nkeyword_end (SyntaxError)\nvalidates_exclusion_of  :username \u21d2 \"Must not match username\"\n</code></pre>\n\n<p>My code is not enforcing any of the validations because the validation logic written is never being called.</p>\n\n<p>Any suggestions would be great!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 1, "last_activity_date": 1444766213, "creation_date": 1444766213, "answer_id": 33111496, "question_id": 33111248, "link": "https://stackoverflow.com/questions/33111248/remove-expect-any-instance-of-rspec/33111496#33111496", "title": "Remove expect_any_instance_of RSpec", "body": "<p>You could use different <code>context</code>'s so you can describe 1 behavior vs. another like so:</p>\n\n<pre><code>describe 'something' do\n  context 'valid with callback' do\n    before :each do\n      expect_any_instance_of(Foo).to receive(:callback)\n    end\n\n    it 'does a callback on this test' do\n      Foo.new\n    end\n\n    it 'does it in this too!' do\n      Foo.new.other\n    end\n  end\n\n  context 'invalid with callback' do\n    it 'doesnt do it in this one' do\n      # how do i remove the stub???\n    end\n  end\nend\n</code></pre>\n\n<p>In the above code the <code>before :each</code> block is only local to the <code>valid with callback</code> context, so you can test that isolated behavior there.</p>\n"}, {"tags": [], "owner": {"reputation": 476, "user_id": 2615087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ec31c1eb2ca38f1e81297eecb1e486e?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Ellis", "link": "https://stackoverflow.com/users/2615087/steve-ellis"}, "is_accepted": false, "score": 0, "last_activity_date": 1444868855, "last_edit_date": 1444868855, "creation_date": 1444766906, "answer_id": 33111709, "question_id": 33111248, "link": "https://stackoverflow.com/questions/33111248/remove-expect-any-instance-of-rspec/33111709#33111709", "title": "Remove expect_any_instance_of RSpec", "body": "<p><strong>update:</strong> <code>expect_any_instance_of(Foo).to receive(:bar).and_call_original</code></p>\n\n<p>But, consider that it may be a smell if you are mocking every instance of a class. There may be cleaner alternatives for structuring your test.</p>\n"}], "owner": {"reputation": 6654, "user_id": 654457, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8806c26cc5687109c0669221ab54ecb7?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Nelson", "link": "https://stackoverflow.com/users/654457/ben-nelson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "accepted_answer_id": 33111496, "answer_count": 2, "score": 0, "last_activity_date": 1444868855, "creation_date": 1444765292, "question_id": 33111248, "link": "https://stackoverflow.com/questions/33111248/remove-expect-any-instance-of-rspec", "title": "Remove expect_any_instance_of RSpec", "body": "<p>I have a stub on a particular class method that is valid for most of my tests. I setup the mock in a before block to DRY my test up. I want to remove the stub for one test where it is not valid. How do I do this using RSpec?</p>\n\n<p>Code</p>\n\n<pre><code>before :all do\n expect_any_instance_of(Foo).to receive(:callback)\nend\n\nit 'does a callback on this test' do\n Foo.new\nend\n\nit 'does it in this too!' do\n Foo.new.other\nend\n\nit 'doesnt do it in this one' do\n # how do i remove the stub???\nend\n</code></pre>\n"}, {"tags": ["ruby", "rvm"], "comments": [{"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1444765349, "post_id": 33111211, "comment_id": 54036644, "body": "did you try <code>rvm get master</code> then <code>rvm reinstall 2.2.3</code>"}, {"owner": {"reputation": 63, "user_id": 2376182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/267791feef4335e6a93c7e00758afa19?s=128&d=identicon&r=PG", "display_name": "Nikita Pashinsky", "link": "https://stackoverflow.com/users/2376182/nikita-pashinsky"}, "reply_to_user": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1444766088, "post_id": 33111211, "comment_id": 54037084, "body": "@Cyzanfar yes I did, ended up with exact same error (added it to the question, thanks)"}, {"owner": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "edited": false, "score": 0, "creation_date": 1454687503, "post_id": 33111211, "comment_id": 58171077, "body": "mee too, i have this error when i was trying to update to 2.2.4 any solutions?"}, {"owner": {"reputation": 63, "user_id": 2376182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/267791feef4335e6a93c7e00758afa19?s=128&d=identicon&r=PG", "display_name": "Nikita Pashinsky", "link": "https://stackoverflow.com/users/2376182/nikita-pashinsky"}, "reply_to_user": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "edited": false, "score": 0, "creation_date": 1454698963, "post_id": 33111211, "comment_id": 58177744, "body": "Hey @Ccr, in my case the problem was just a gemfile located at Users/%username%/, probably from some old project/ruby tutorial. I just deleted it and it worked! (I&#39;m not 100% sure that it was gemfile, though... If I&#39;m wrong, just try and look for some ruby-related documents in your user directory)"}], "owner": {"reputation": 63, "user_id": 2376182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/267791feef4335e6a93c7e00758afa19?s=128&d=identicon&r=PG", "display_name": "Nikita Pashinsky", "link": "https://stackoverflow.com/users/2376182/nikita-pashinsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 921, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1444770182, "creation_date": 1444765169, "last_edit_date": 1444770182, "question_id": 33111211, "link": "https://stackoverflow.com/questions/33111211/error-running-rvm-make-install-when-updating-ruby", "title": "&quot;Error running &#39;__rvm_make install&#39;&quot; when updating Ruby", "body": "<p>I'm getting this error when I'm trying to update Ruby (it's 2.0.0p645 now) on OS X 10.11 El Capitan:</p>\n\n<pre><code>rvm install 2.2.3\nSearching for binary rubies, this might take some time.\nNo binary rubies available for: osx/10.11/x86_64/ruby-2.2.3.\nContinuing with compilation. Please read 'rvm help mount' to get more  information on binary rubies.\nChecking requirements for osx.\nCertificates in '/usr/local/etc/openssl/cert.pem' are already up to date.\nRequirements installation successful.\nInstalling Ruby from source to: /Users/pashinsky/.rvm/rubies/ruby-2.2.3, this may take a while depending on your cpu(s)...\nruby-2.2.3 - #downloading ruby-2.2.3, this may take a while depending on your connection...\n    ...\nruby-2.2.3 - #extracting ruby-2.2.3 to /Users/pashinsky/.rvm/src/ruby-2.2.3....\nruby-2.2.3 - #configuring......................................................-\nruby-2.2.3 - #post-configuration.\nruby-2.2.3 - #compiling.........................................................\nruby-2.2.3 - #installing............\nError running '__rvm_make install',\nshowing last 15 lines of /Users/pashinsky/.rvm/log/1444763500_ruby-2.2.3/install.log\nfrom /Users/pashinsky/.rvm/src/ruby-2.2.3/lib/rubygems/spec_fetcher.rb:42:in `fetcher'\nfrom /Users/pashinsky/.rvm/src/ruby-2.2.3/lib/rubygems/resolver/installer_set.rb:37:in `initialize'\nfrom /Users/pashinsky/.rvm/src/ruby-2.2.3/lib/rubygems/dependency_installer.rb:430:in `new'\nfrom /Users/pashinsky/.rvm/src/ruby-2.2.3/lib/rubygems/dependency_installer.rb:430:in `resolve_dependencies'\nfrom /Users/pashinsky/.rvm/src/ruby-2.2.3/lib/rubygems/dependency_installer.rb:373:in `install'\nfrom /Users/pashinsky/.rvm/src/ruby-2.2.3/lib/rubygems.rb:558:in `install'\nfrom ./tool/rbinstall.rb:722:in `block (2 levels) in &lt;main&gt;'\nfrom ./tool/rbinstall.rb:721:in `each'\nfrom ./tool/rbinstall.rb:721:in `block in &lt;main&gt;'\nfrom ./tool/rbinstall.rb:757:in `call'\nfrom ./tool/rbinstall.rb:757:in `block in &lt;main&gt;'\nfrom ./tool/rbinstall.rb:754:in `each'\nfrom ./tool/rbinstall.rb:754:in `&lt;main&gt;'\nmake: *** [do-install-nodoc] Error 1\n++ return 2\nThere has been an error while running make install. Halting the installation.\n</code></pre>\n\n<p>Googling it for a couple of hours now with no luck. Neither <code>rvm get head</code> nor <code>rvm get master</code> doesn't help. Actually, nothing of all that I've found (those were solutions for slightly different errors though) did help.</p>\n\n<p>I also tried <code>rvm all do gem errors</code>, but the output gives me no clue:</p>\n\n<pre><code>/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/psych.rb:205:in `parse': (&lt;unknown&gt;): mapping values are not allowed in this context at line 2 column 30 (Psych::SyntaxError)\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/psych.rb:205:in `parse_stream'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/psych.rb:153:in `parse'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/psych.rb:129:in `load'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/config_file.rb:319:in `load_file'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/config_file.rb:192:in `initialize'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/gem_runner.rb:66:in `new'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/gem_runner.rb:66:in `do_configuration'\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/gem_runner.rb:46:in `run'\nfrom /usr/bin/gem:21:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "active-directory", "ldap", "omniauth", "padrino"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4053321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3b6d7a300626d9582f5f696bf83da6d?s=128&d=identicon&r=PG&f=1", "display_name": "punit", "link": "https://stackoverflow.com/users/4053321/punit"}, "is_accepted": false, "score": 1, "last_activity_date": 1446801211, "last_edit_date": 1446801211, "creation_date": 1446800820, "answer_id": 33563073, "question_id": 33110846, "link": "https://stackoverflow.com/questions/33110846/omniauth-ldap-invalid-credentials/33563073#33563073", "title": "Omniauth-ldap invalid credentials", "body": "<p>This is primarily because of a design choice that omniauth-ldap makes. \nThe design is that the user supplied username (email or id) is insufficient to construct a DN (distinguished name) which can be used for binding. Hence what omniauth ldap does is </p>\n\n<ol>\n<li>Call a ldap search (bind_dn and password used if anonymous search not allowed in your AD/LDAP) to extract a DN for user. </li>\n<li>Then it binds to LDAP/AP using the DN from step 1 and password entered by user.</li>\n</ol>\n\n<p>I believe step 1) is unnecessary. Most DN can be derived from username.</p>\n"}, {"tags": [], "owner": {"reputation": 964, "user_id": 510905, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9aa2a816c61170cc0183a68be0386ba5?s=128&d=identicon&r=PG", "display_name": "Oranges13", "link": "https://stackoverflow.com/users/510905/oranges13"}, "is_accepted": true, "score": 0, "last_activity_date": 1510948450, "creation_date": 1510948450, "answer_id": 47358335, "question_id": 33110846, "link": "https://stackoverflow.com/questions/33110846/omniauth-ldap-invalid-credentials/47358335#47358335", "title": "Omniauth-ldap invalid credentials", "body": "<p>I had to solve this by creating a service account. That account logs in then queries for the existence and validity of the user that's actually trying to log in. The service account credentials can be set in your Omniauth configuration, and then you can utilize omniauth-ldap as you would any other omniauth methodology.</p>\n"}], "owner": {"reputation": 964, "user_id": 510905, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9aa2a816c61170cc0183a68be0386ba5?s=128&d=identicon&r=PG", "display_name": "Oranges13", "link": "https://stackoverflow.com/users/510905/oranges13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 1, "accepted_answer_id": 47358335, "answer_count": 2, "score": 1, "last_activity_date": 1510948450, "creation_date": 1444763829, "last_edit_date": 1444768317, "question_id": 33110846, "link": "https://stackoverflow.com/questions/33110846/omniauth-ldap-invalid-credentials", "title": "Omniauth-ldap invalid credentials", "body": "<p>I'm having a heck of a time getting omniauth-ldap to work properly with our AD server, and I believe it is because our usernames have our Domain Names in them.</p>\n\n<p>This will successfully connect to our ldap server:</p>\n\n<pre><code>ldapsearch -h ldap.ourdomain.com -b \"dc=ourdomain,dc=int\" -D \"OURDOMAIN\\username\" -w &lt;password&gt; '(sAMAccountName=username)'\n</code></pre>\n\n<p>But, these settings in OmniAuth only result in \"invalid credentials\"</p>\n\n<pre><code>Padrino.use OmniAuth::Strategies::LDAP,\n    :host =&gt; \"ldap.ourdomain.com\",\n    :base =&gt; \"dc=OURDOMAIN,dc=INT\",\n    :uid =&gt; \"sAMAccountName\",\n    :bind_dn =&gt; 'OURDOMAIN\\%{username}',\n    # This is hard coded for now, but I need it to be the value entered by the user\n    :password =&gt; \"mypassword\"\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Working on this further, I have discovered that omniauth-ldap sets the bind method to :anonymous if the :bind_dn and :password are not set.</p>\n\n<p>However, it does not insert the username and does not provide the user-entered password if the values <em>are</em> set.</p>\n\n<p>What I need is</p>\n\n<pre><code>:bind_dn =&gt; 'OURDOMAIN\\&lt;user entered username&gt;',\n:password =&gt; &lt;user entered password&gt;\n</code></pre>\n\n<p>but the password and entered username are only provided to the connection if you hard code them.</p>\n"}]