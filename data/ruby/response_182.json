[{"tags": ["mysql", "ruby-on-rails", "ruby", "server"], "comments": [{"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1530748288, "post_id": 51181839, "comment_id": 89346003, "body": "try <code>spring stop</code> from root of your project"}, {"owner": {"reputation": 21, "user_id": 9932190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b2758c432e78cdaa4590a48f6b627f2?s=128&d=identicon&r=PG&f=1", "display_name": "spectregris", "link": "https://stackoverflow.com/users/9932190/spectregris"}, "reply_to_user": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1530748416, "post_id": 51181839, "comment_id": 89346017, "body": "it&#39;s telling me that Spring is not running"}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1530749904, "post_id": 51181839, "comment_id": 89346253, "body": "can you paste the output of <code>gem env</code> and <code>echo $PATH</code>"}, {"owner": {"reputation": 21, "user_id": 9932190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b2758c432e78cdaa4590a48f6b627f2?s=128&d=identicon&r=PG&f=1", "display_name": "spectregris", "link": "https://stackoverflow.com/users/9932190/spectregris"}, "reply_to_user": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1530750281, "post_id": 51181839, "comment_id": 89346311, "body": "okay it&#39;s pasted in the main comment due to it being too long for a replay to this one"}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1530751590, "post_id": 51181839, "comment_id": 89346506, "body": "what if you just do <code>bundle exec rake</code> ?"}, {"owner": {"reputation": 21, "user_id": 9932190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b2758c432e78cdaa4590a48f6b627f2?s=128&d=identicon&r=PG&f=1", "display_name": "spectregris", "link": "https://stackoverflow.com/users/9932190/spectregris"}, "reply_to_user": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1530751727, "post_id": 51181839, "comment_id": 89346528, "body": "Run options: --seed 15367  # Running:    Finished in 0.000929s, 0.0000 runs/s, 0.0000 assertions/s. 0 runs, 0 assertions, 0 failures, 0 errors, 0 skips"}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1530751861, "post_id": 51181839, "comment_id": 89346544, "body": "so its not an issue with rake path, show you <code>application.rb</code> file"}, {"owner": {"reputation": 21, "user_id": 9932190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b2758c432e78cdaa4590a48f6b627f2?s=128&d=identicon&r=PG&f=1", "display_name": "spectregris", "link": "https://stackoverflow.com/users/9932190/spectregris"}, "reply_to_user": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1530752934, "post_id": 51181839, "comment_id": 89346704, "body": "I&#39;ve posted the application.rb in the main post"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 9932190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b2758c432e78cdaa4590a48f6b627f2?s=128&d=identicon&r=PG&f=1", "display_name": "spectregris", "link": "https://stackoverflow.com/users/9932190/spectregris"}, "edited": false, "score": 0, "creation_date": 1530748711, "post_id": 51181869, "comment_id": 89346081, "body": "It doesn&#39;t seem to have a config.time_zone in that file"}, {"owner": {"reputation": 21, "user_id": 9932190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b2758c432e78cdaa4590a48f6b627f2?s=128&d=identicon&r=PG&f=1", "display_name": "spectregris", "link": "https://stackoverflow.com/users/9932190/spectregris"}, "edited": false, "score": 0, "creation_date": 1530748953, "post_id": 51181869, "comment_id": 89346113, "body": "also it&#39;s telling me bash: rake: command not found, however i have rake installed"}], "tags": [], "owner": {"reputation": 139, "user_id": 2188244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a990edea3b1077dc71bdbf64b7b475a1?s=128&d=identicon&r=PG", "display_name": "ricsdeol", "link": "https://stackoverflow.com/users/2188244/ricsdeol"}, "is_accepted": false, "score": 0, "last_activity_date": 1530748510, "creation_date": 1530748510, "answer_id": 51181869, "question_id": 51181839, "link": "https://stackoverflow.com/questions/51181839/i-cant-seem-to-get-rails-server-to-run/51181869#51181869", "title": "I can&#39;t seem to get rails server to run", "body": "<p>See at <code>config/application.rb</code> the <code>config.time_zone</code> section.</p>\n\n<p>You could run <code>rake -D time</code> to show all timezone available.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 9932190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b2758c432e78cdaa4590a48f6b627f2?s=128&d=identicon&r=PG&f=1", "display_name": "spectregris", "link": "https://stackoverflow.com/users/9932190/spectregris"}, "edited": false, "score": 0, "creation_date": 1530753256, "post_id": 51182208, "comment_id": 89346756, "body": "ive added the out put in the main comment I&#39;m not sure whats going on my timezine is set correctly"}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "edited": false, "score": 0, "creation_date": 1530753274, "post_id": 51182208, "comment_id": 89346761, "body": "This should be a comment rather than an answer"}], "tags": [], "owner": {"reputation": 171, "user_id": 10034431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPDRY.jpg?s=128&g=1", "display_name": "Ivan Raszl", "link": "https://stackoverflow.com/users/10034431/ivan-raszl"}, "is_accepted": false, "score": 0, "last_activity_date": 1530752806, "creation_date": 1530752806, "answer_id": 51182208, "question_id": 51181839, "link": "https://stackoverflow.com/questions/51181839/i-cant-seem-to-get-rails-server-to-run/51182208#51182208", "title": "I can&#39;t seem to get rails server to run", "body": "<p>You may have a migration pending. Try running:</p>\n\n<pre><code>rails db:migrate\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "is_accepted": false, "score": 0, "last_activity_date": 1530753423, "creation_date": 1530753423, "answer_id": 51182251, "question_id": 51181839, "link": "https://stackoverflow.com/questions/51181839/i-cant-seem-to-get-rails-server-to-run/51182251#51182251", "title": "I can&#39;t seem to get rails server to run", "body": "<p>Add a <code>time_zone</code> to your config file,</p>\n\n<pre><code>config.time_zone = 'Australia/Melbourne'\n</code></pre>\n\n<p>You can change it to be whatever timezone your application will be in, you can also do</p>\n\n<pre><code>config.time_zone = 'UTC'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 12858767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a456977c47b127d55a14125b5f383be?s=128&d=identicon&r=PG&f=1", "display_name": "Mahan Mashoof", "link": "https://stackoverflow.com/users/12858767/mahan-mashoof"}, "is_accepted": false, "score": 0, "last_activity_date": 1599049076, "creation_date": 1599049076, "answer_id": 63705360, "question_id": 51181839, "link": "https://stackoverflow.com/questions/51181839/i-cant-seem-to-get-rails-server-to-run/63705360#63705360", "title": "I can&#39;t seem to get rails server to run", "body": "<p>Experienced the same problem, showed that my teammate had changed the config/master.key code. Once updated, things went to normal again.</p>\n"}], "owner": {"reputation": 21, "user_id": 9932190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b2758c432e78cdaa4590a48f6b627f2?s=128&d=identicon&r=PG&f=1", "display_name": "spectregris", "link": "https://stackoverflow.com/users/9932190/spectregris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2103, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1599049076, "creation_date": 1530748120, "last_edit_date": 1530753229, "question_id": 51181839, "link": "https://stackoverflow.com/questions/51181839/i-cant-seem-to-get-rails-server-to-run", "title": "I can&#39;t seem to get rails server to run", "body": "<p>I'm trying to make my first rails application, however when i try to run <code>rails server</code>    however it just gives me a load of text. I'm running this on arch linux and used the <code>ruby-rails</code> bundle from the AUR.</p>\n\n<p>this is what it gives me when it try to run the command</p>\n\n<pre><code>[drew@rhino sophia]$ rails server\n=&gt; Booting Puma\n=&gt; Rails 5.2.0 application starting in development \n=&gt; Run `rails server -h` for more startup options\nExiting\nTraceback (most recent call last):\n        70: from bin/rails:3:in `&lt;main&gt;'\n        69: from bin/rails:3:in `load'\n        68: from /home/drew/work/spproject/sophia/sophia/bin/spring:15:in `&lt;top (required)&gt;'\n        67: from /usr/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:70:in `require'\n        66: from /usr/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:70:in `require'\n        65: from /usr/lib/ruby/gems/2.5.0/gems/spring-2.0.2/lib/spring/binstub.rb:31:in `&lt;top (required)&gt;'\n        64: from /usr/lib/ruby/gems/2.5.0/gems/spring-2.0.2/lib/spring/binstub.rb:31:in `load'\n        63: from /usr/lib/ruby/gems/2.5.0/gems/spring-2.0.2/bin/spring:49:in `&lt;top (required)&gt;'\n        62: from /usr/lib/ruby/gems/2.5.0/gems/spring-2.0.2/lib/spring/client.rb:30:in `run'\n        61: from /usr/lib/ruby/gems/2.5.0/gems/spring-2.0.2/lib/spring/client/command.rb:7:in `call'\n        60: from /usr/lib/ruby/gems/2.5.0/gems/spring-2.0.2/lib/spring/client/rails.rb:28:in `call'\n        59: from /usr/lib/ruby/gems/2.5.0/gems/spring-2.0.2/lib/spring/client/rails.rb:28:in `load'\n        58: from /home/drew/work/spproject/sophia/sophia/bin/rails:9:in `&lt;top (required)&gt;'\n        57: from /usr/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `require'\n        56: from /usr/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:249:in `load_dependency'\n        55: from /usr/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `block in require'\n        54: from /usr/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in `require'\n        53: from /usr/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in `require_with_bootsnap_lfi'\n        52: from /usr/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/loaded_features_index.rb:65:in `register'\n        51: from /usr/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `block in require_with_bootsnap_lfi'\n        50: from /usr/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require'\n        49: from /home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/commands.rb:18:in `&lt;main&gt;'\n        48: from /home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/command.rb:46:in `invoke'\n        47: from /home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/command/base.rb:65:in `perform'\n        46: from /usr/lib/ruby/gems/2.5.0/gems/thor-0.20.0/lib/thor.rb:387:in `dispatch'\n        45: from /usr/lib/ruby/gems/2.5.0/gems/thor-0.20.0/lib/thor/invocation.rb:126:in `invoke_command'\n        44: from /usr/lib/ruby/gems/2.5.0/gems/thor-0.20.0/lib/thor/command.rb:27:in `run'\n        43: from /home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/commands/server/server_command.rb:142:in `perform'\n        42: from /home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/commands/server/server_command.rb:142:in `tap'\n        41: from /home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/commands/server/server_command.rb:147:in `block in perform'\n        40: from /home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/commands/server/server_command.rb:51:in `start'\n        39: from /home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/commands/server/server_command.rb:89:in `log_to_stdout'\n        38: from /usr/lib/ruby/gems/2.5.0/gems/rack-2.0.5/lib/rack/server.rb:354:in `wrapped_app'\n        37: from /home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/commands/server/server_command.rb:27:in `app'\n        36: from /usr/lib/ruby/gems/2.5.0/gems/rack-2.0.5/lib/rack/server.rb:219:in `app'\n        35: from /usr/lib/ruby/gems/2.5.0/gems/rack-2.0.5/lib/rack/server.rb:319:in `build_app_and_options_from_config'\n        34: from /usr/lib/ruby/gems/2.5.0/gems/rack-2.0.5/lib/rack/builder.rb:40:in `parse_file'\n        33: from /usr/lib/ruby/gems/2.5.0/gems/rack-2.0.5/lib/rack/builder.rb:49:in `new_from_string'\n        32: from /usr/lib/ruby/gems/2.5.0/gems/rack-2.0.5/lib/rack/builder.rb:49:in `eval'\n        31: from config.ru:in `&lt;main&gt;'\n        30: from config.ru:in `new'\n        29: from /usr/lib/ruby/gems/2.5.0/gems/rack-2.0.5/lib/rack/builder.rb:55:in `initialize'\n        28: from /usr/lib/ruby/gems/2.5.0/gems/rack-2.0.5/lib/rack/builder.rb:55:in `instance_eval'\n        27: from config.ru:3:in `block in &lt;main&gt;'\n        26: from /usr/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:44:in `require_relative'\n        25: from /usr/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `require'\n        24: from /usr/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:249:in `load_dependency'\n        23: from /usr/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `block in require'\n        22: from /usr/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in `require'\n        21: from /usr/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in `require_with_bootsnap_lfi'\n        20: from /usr/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/loaded_features_index.rb:65:in `register'\n        19: from /usr/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `block in require_with_bootsnap_lfi'\n        18: from /usr/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require'\n        17: from /home/drew/work/spproject/sophia/sophia/config/environment.rb:5:in `&lt;main&gt;'\n        16: from /home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/application.rb:361:in `initialize!'\n        15: from /home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/initializable.rb:60:in `run_initializers'\n        14: from /usr/lib/ruby/2.5.0/tsort.rb:205:in `tsort_each'\n        13: from /usr/lib/ruby/2.5.0/tsort.rb:226:in `tsort_each'\n        12: from /usr/lib/ruby/2.5.0/tsort.rb:347:in `each_strongly_connected_component'\n        11: from /usr/lib/ruby/2.5.0/tsort.rb:347:in `call'\n        10: from /usr/lib/ruby/2.5.0/tsort.rb:347:in `each'\n         9: from /usr/lib/ruby/2.5.0/tsort.rb:349:in `block in each_strongly_connected_component'\n         8: from /usr/lib/ruby/2.5.0/tsort.rb:431:in `each_strongly_connected_component_from'\n         7: from /usr/lib/ruby/2.5.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'\n         6: from /usr/lib/ruby/2.5.0/tsort.rb:228:in `block in tsort_each'\n         5: from /home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/initializable.rb:61:in `block in run_initializers'\n         4: from /home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/initializable.rb:32:in `run'\n         3: from /home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/initializable.rb:32:in `instance_exec'\n         2: from /usr/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/railtie.rb:42:in `block in &lt;class:Railtie&gt;'\n         1: from /usr/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/core_ext/time/zones.rb:82:in `find_zone!'\n/usr/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/core_ext/time/zones.rb:100:in `rescue in find_zone!': Invalid Timezone: UTC (ArgumentError)\n</code></pre>\n\n<p>EDIT gem env </p>\n\n<pre><code>RubyGems Environment:\n  - RUBYGEMS VERSION: 2.7.7\n  - RUBY VERSION: 2.5.1 (2018-03-29 patchlevel 57) [x86_64-linux]\n  - INSTALLATION DIRECTORY: /usr/lib/ruby/gems/2.5.0\n  - USER INSTALLATION DIRECTORY: /home/drew/.gem/ruby/2.5.0\n  - RUBY EXECUTABLE: /usr/bin/ruby\n  - EXECUTABLE DIRECTORY: /usr/bin\n  - SPEC CACHE DIRECTORY: /home/drew/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-linux\n  - GEM PATHS:\n     - /usr/lib/ruby/gems/2.5.0\n     - /home/drew/.gem/ruby/2.5.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n     - \"gem\" =&gt; \"--user-install\"\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - /usr/local/bin\n     - /usr/bin\n     - /bin\n     - /usr/local/sbin\n     - /usr/lib/jvm/default/bin\n     - /usr/bin/site_perl\n     - /usr/bin/vendor_perl\n     - /usr/bin/core_perl\n</code></pre>\n\n<p>Paste of $PATH</p>\n\n<pre><code>/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\n</code></pre>\n\n<p>Paste of application.rb</p>\n\n<pre><code>require_relative 'boot'\n\nrequire 'rails/all'\n\n# Require the gems listed in Gemfile, including any gems\n# you've limited to :test, :development, or :production.\nBundler.require(*Rails.groups)\n\nmodule Sophia\n  class Application &lt; Rails::Application\n    # Initialize configuration defaults for originally generated Rails version.\n    config.load_defaults 5.2\n\n    # Settings in config/environments/* take precedence over those specified here.\n    # Application configuration can go into files in config/initializers\n    # -- all .rb files in that directory are automatically loaded after loading\n    # the framework and any gems in your application.\n  end\nend\n\n\nPaster of rails migrate:db\n\nrails aborted!\nArgumentError: Invalid Timezone: UTC\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/initializable.rb:32:in `instance_exec'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/initializable.rb:32:in `run'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/initializable.rb:61:in `block in run_initializers'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/initializable.rb:60:in `run_initializers'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/application.rb:361:in `initialize!'\n/home/drew/work/spproject/sophia/sophia/config/environment.rb:5:in `&lt;main&gt;'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/application.rb:337:in `require_environment!'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/application.rb:520:in `block in run_tasks_blocks'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/commands/rake/rake_command.rb:23:in `block in perform'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/commands/rake/rake_command.rb:20:in `perform'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/command.rb:48:in `invoke'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/commands.rb:18:in `&lt;main&gt;'\n/home/drew/work/spproject/sophia/sophia/bin/rails:9:in `&lt;top (required)&gt;'\n/home/drew/work/spproject/sophia/sophia/bin/spring:15:in `&lt;top (required)&gt;'\nbin/rails:3:in `load'\nbin/rails:3:in `&lt;main&gt;'\n\nCaused by:\nTZInfo::InvalidTimezoneIdentifier: Expected 44 bytes reading '/usr/share/zoneinfo/UTC', but got 0 bytes\n/home/drew/.gem/ruby/2.5.0/gems/tzinfo-1.2.5/lib/tzinfo/zoneinfo_data_source.rb:205:in `rescue in load_timezone_info'\n/home/drew/.gem/ruby/2.5.0/gems/tzinfo-1.2.5/lib/tzinfo/zoneinfo_data_source.rb:202:in `load_timezone_info'\n/home/drew/.gem/ruby/2.5.0/gems/tzinfo-1.2.5/lib/tzinfo/timezone.rb:92:in `get'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/initializable.rb:32:in `instance_exec'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/initializable.rb:32:in `run'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/initializable.rb:61:in `block in run_initializers'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/initializable.rb:60:in `run_initializers'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/application.rb:361:in `initialize!'\n/home/drew/work/spproject/sophia/sophia/config/environment.rb:5:in `&lt;main&gt;'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/application.rb:337:in `require_environment!'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/application.rb:520:in `block in run_tasks_blocks'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/commands/rake/rake_command.rb:23:in `block in perform'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/commands/rake/rake_command.rb:20:in `perform'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/command.rb:48:in `invoke'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/commands.rb:18:in `&lt;main&gt;'\n/home/drew/work/spproject/sophia/sophia/bin/rails:9:in `&lt;top (required)&gt;'\n/home/drew/work/spproject/sophia/sophia/bin/spring:15:in `&lt;top (required)&gt;'\nbin/rails:3:in `load'\nbin/rails:3:in `&lt;main&gt;'\n\nCaused by:\nTZInfo::InvalidZoneinfoFile: Expected 44 bytes reading '/usr/share/zoneinfo/UTC', but got 0 bytes\n/home/drew/.gem/ruby/2.5.0/gems/tzinfo-1.2.5/lib/tzinfo/zoneinfo_timezone_info.rb:53:in `check_read'\n/home/drew/.gem/ruby/2.5.0/gems/tzinfo-1.2.5/lib/tzinfo/zoneinfo_timezone_info.rb:169:in `parse'\n/home/drew/.gem/ruby/2.5.0/gems/tzinfo-1.2.5/lib/tzinfo/zoneinfo_timezone_info.rb:28:in `block in initialize'\n/home/drew/.gem/ruby/2.5.0/gems/tzinfo-1.2.5/lib/tzinfo/zoneinfo_timezone_info.rb:27:in `open'\n/home/drew/.gem/ruby/2.5.0/gems/tzinfo-1.2.5/lib/tzinfo/zoneinfo_timezone_info.rb:27:in `initialize'\n/home/drew/.gem/ruby/2.5.0/gems/tzinfo-1.2.5/lib/tzinfo/zoneinfo_data_source.rb:203:in `new'\n/home/drew/.gem/ruby/2.5.0/gems/tzinfo-1.2.5/lib/tzinfo/zoneinfo_data_source.rb:203:in `load_timezone_info'\n/home/drew/.gem/ruby/2.5.0/gems/tzinfo-1.2.5/lib/tzinfo/timezone.rb:92:in `get'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/initializable.rb:32:in `instance_exec'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/initializable.rb:32:in `run'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/initializable.rb:61:in `block in run_initializers'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/initializable.rb:60:in `run_initializers'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/application.rb:361:in `initialize!'\n/home/drew/work/spproject/sophia/sophia/config/environment.rb:5:in `&lt;main&gt;'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/application.rb:337:in `require_environment!'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/application.rb:520:in `block in run_tasks_blocks'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/commands/rake/rake_command.rb:23:in `block in perform'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/commands/rake/rake_command.rb:20:in `perform'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/command.rb:48:in `invoke'\n/home/drew/.gem/ruby/2.5.0/gems/railties-5.2.0/lib/rails/commands.rb:18:in `&lt;main&gt;'\n/home/drew/work/spproject/sophia/sophia/bin/rails:9:in `&lt;top (required)&gt;'\n/home/drew/work/spproject/sophia/sophia/bin/spring:15:in `&lt;top (required)&gt;'\nbin/rails:3:in `load'\nbin/rails:3:in `&lt;main&gt;'\nTasks: TOP =&gt; db:migrate =&gt; db:load_config =&gt; environment\n(See full trace by running task with --trace)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rubygems", "unicorn"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1530742816, "post_id": 51181158, "comment_id": 89345068, "body": "What <b>exactly</b> do you mean by <i>&#39;these all break w/ warning: &quot;No support for Active Record version 42&quot;&#39;</i>? What does the warning actually say? Show the exact error message, not a summarised/rephrased version. Please <a href=\"https://stackoverflow.com/posts/51181158/edit\">edit your post</a>."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1530742944, "post_id": 51181158, "comment_id": 89345091, "body": "And rather than seeing a list of all gems like that, can you instead post the <code>Gemfile</code> and <code>Gemfile.lock</code>? Doing this should hopefully allow us to <b>reproduce</b> the error - which makes it a million times easier for someone to confidently answer the question accurately."}], "owner": {"reputation": 36, "user_id": 5911660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3b700f8ec6c112051ff9bc24bc42d65?s=128&d=identicon&r=PG&f=1", "display_name": "BG San", "link": "https://stackoverflow.com/users/5911660/bg-san"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530748704, "creation_date": 1530741347, "last_edit_date": 1530748704, "question_id": 51181158, "link": "https://stackoverflow.com/questions/51181158/cannot-start-rails-4-no-support-for-active-record-version-42", "title": "Cannot Start Rails 4: No support for Active Record version 42", "body": "<p>Started a separate Rails project intended to use version 4 and upgraded relative gems. But these all break w/ warning: \"No support for Active Record version 42\" when trying to start server (rails s), console (rails c) and starting a Unicorn with it.  To avoid any conflict w/ previous project that used Rails 3, I've already installed gems on a different version of Ruby + rvm, so started out clean (or uninstalled all).  </p>\n\n<p>Is this a gems library conflict or certain gems related to Rails 4 are incompatible?</p>\n\n<p>Here are my Gemfile and Gemfile.lock files:</p>\n\n<p><a href=\"https://www.dropbox.com/s/9mqbmloie0r99d9/Gemfile?dl=0\" rel=\"nofollow noreferrer\">https://www.dropbox.com/s/9mqbmloie0r99d9/Gemfile?dl=0</a></p>\n\n<p><a href=\"https://www.dropbox.com/s/rg7wf9ydjv4hncl/Gemfile.lock?dl=0\" rel=\"nofollow noreferrer\">https://www.dropbox.com/s/rg7wf9ydjv4hncl/Gemfile.lock?dl=0</a></p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 2, "creation_date": 1530740268, "post_id": 51180923, "comment_id": 89344451, "body": "Use <code>is_a?</code> to check the object&#39;s class, as <code>integer?</code> isn&#39;t a method for strings, that&#39;s why the NoMethodError. You&#39;d need an else statement, perhaps. And to replace <code>!==</code>."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1530798637, "post_id": 51180923, "comment_id": 89367552, "body": "You have made no specification for non-letter <code>String</code>s what should &quot;0&quot; or &quot;2&quot; return? They are not <code>Integer</code>s but they are not &quot;letters&quot; either. (for the sake of the question I will assume that punctuation and other non-numeric/non-letter characters should be considered &quot;letters&quot;)"}], "answers": [{"tags": [], "owner": {"reputation": 1918, "user_id": 9224452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb0f303869bf090269cbcc46cef14991?s=128&d=identicon&r=PG&f=1", "display_name": "John Baker", "link": "https://stackoverflow.com/users/9224452/john-baker"}, "is_accepted": false, "score": -1, "last_activity_date": 1530742039, "last_edit_date": 1530742039, "creation_date": 1530741105, "answer_id": 51181128, "question_id": 51180923, "link": "https://stackoverflow.com/questions/51180923/how-to-use-ruby-array-in-this-case/51181128#51181128", "title": "How to use Ruby array in this case?", "body": "<p>As mentioned in the comment above you should use <code>is_a?</code> method to check the datatype of an element. The code below should work as expected: </p>\n\n<pre><code> def minusNumber(array)\n   array.map do |e|\n     if e.is_a?(String) || e == 0\n       e\n     else\n       e - 2\n     end\n   end\n end\n</code></pre>\n\n<p>Instead of the <em>if</em> statement you could also do:</p>\n\n<pre><code>(e.is_a?(String) || e == 0 ) ? e : e-2\n</code></pre>\n\n<p>Please note that the original object is unchanged unless you use <code>map!</code></p>\n"}, {"comments": [{"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 1, "creation_date": 1530743966, "post_id": 51181302, "comment_id": 89345271, "body": "A case statement seems a bit complex for such a simple operation IMO. Not to say this is not a valid solution and works, just thinking a switch is an expensive operation when only really need to check for numbers, and everything else will be ignored."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1530776516, "post_id": 51181302, "comment_id": 89353515, "body": "@ForeverZer0 It is more expensive how? Performance-wise, it should be identical to an if. And brain-power-wise it should be even cheaper. Reads like engish, no need to decipher any <code>is_a?</code> and <code>== 0</code>. &#175;\\_(\u30c4)_/&#175;"}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1530776945, "post_id": 51181302, "comment_id": 89353753, "body": "Switch statements inherently have more overhead than <code>if..end</code> in pretty much every language, Ruby being no exception. Not to mention equality comparison works differently, <code>&lt;=&gt;</code> is also more expensive than basic equality, so it is in multiple ways."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 1, "creation_date": 1530776982, "post_id": 51181302, "comment_id": 89353778, "body": "@ForeverZer0: no <code>&lt;=&gt;</code> here, though"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1530777144, "post_id": 51181302, "comment_id": 89353884, "body": "@ForeverZer0: nope, they don&#39;t. They use threequals, not the spaceship. Benchmarked mine against yours and yes, yours is 1.5x faster. Still I think this one reads better."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1530777246, "post_id": 51181302, "comment_id": 89353946, "body": "I am incorrect in one regard, <code>===</code> is used, not <code>&lt;=&gt;</code>, I am too tired, lol, but same theory."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1530777565, "post_id": 51181302, "comment_id": 89354151, "body": "@ForeverZer0: not only does my code read better, it is also closer to the spec! :) It is literally not specified what to do if it&#39;s not a number or string, so I do the most sensible thing."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 2, "last_activity_date": 1530742503, "creation_date": 1530742503, "answer_id": 51181302, "question_id": 51180923, "link": "https://stackoverflow.com/questions/51180923/how-to-use-ruby-array-in-this-case/51181302#51181302", "title": "How to use Ruby array in this case?", "body": "<p>Here's another take on this:</p>\n\n<pre><code>array = ['x', 3, 0, 4, 4, 7]\n\ntransformed = array.map do |e|\n  case e\n  when 0, String\n    e\n  when Integer\n    e - 2\n  else\n    fail 'unexpected input'\n  end\nend\n\ntransformed # =&gt; [\"x\", 1, 0, 2, 2, 5]\n</code></pre>\n\n<hr>\n\n<p>It's a pity that you have to keep the elements from which you didn't subtract 2. I really wanted to do something like this</p>\n\n<pre><code>array.grep(Integer).reject(&amp;:zero?).map{|i| i - 2 } # =&gt; [1, 2, 2, 5]\n</code></pre>\n\n<p>Couldn't find a way yet (which preserves the unprocessed items).</p>\n"}, {"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1530752042, "post_id": 51181416, "comment_id": 89346568, "body": "<i>every integer in the array (except for 0)</i>, what happens with the number lower than 0?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1530776368, "post_id": 51181416, "comment_id": 89353434, "body": "<code>&amp;&amp; v.nonzero?</code>"}], "tags": [], "owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "is_accepted": false, "score": 0, "last_activity_date": 1530752204, "last_edit_date": 1530752204, "creation_date": 1530743571, "answer_id": 51181416, "question_id": 51180923, "link": "https://stackoverflow.com/questions/51180923/how-to-use-ruby-array-in-this-case/51181416#51181416", "title": "How to use Ruby array in this case?", "body": "<p>Short and sweet. </p>\n\n<pre><code>array.map { |v| v.is_a?(Integer) &amp;&amp; !v.zero? ? v - 2 : v }\n</code></pre>\n\n<p>This eliminates all the needless <code>case</code> statements, multiple iteration, and transformations. Simply takes each element, if it is an integer and greater than 0,  then subtracts 2, otherwise does nothing.</p>\n"}, {"comments": [{"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1530773270, "post_id": 51181801, "comment_id": 89351603, "body": "Asking for <code>:to_int</code> is not enough. <code>e</code>  would also need to respont to <code>:-</code>. For this task, asking to where e responds to, is IMO not appropriate anyway, because the requirement says that the transformation should apply if e <i>is</i> an Integer, not if it can be turned into one. Imagine someone one would Monkey-patch <code>String</code> to  also have a <code>to_int</code> method.... What <i>would</i> make sense, is to test for <code>e.class &lt;= Integer</code> instead of <code>e.is_a?(Integer)</code>."}, {"owner": {"reputation": 799, "user_id": 139299, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/167372e60b77c07e81a41a36f7d4f1b5?s=128&d=identicon&r=PG", "display_name": "Nossidge", "link": "https://stackoverflow.com/users/139299/nossidge"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1530796597, "post_id": 51181801, "comment_id": 89366177, "body": "If it responds to <code>:to_int</code> it will respond to <code>:-</code>. Implementing <code>#to_int</code> is a contract that the writer of the class makes to its users that says, &quot;this can be considered an Integer in ALL cases where an Integer can be used&quot;. Inheritance is the best, but not the only, way of abiding by this contract."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 1, "creation_date": 1530796873, "post_id": 51181801, "comment_id": 89366365, "body": "@user1934428 why would you recommend <code>&lt;=</code> over <code>is_a?</code>. <code>is_a?</code> has a simpler implementation and provides the desired result in this context. e.g. the OP does not need to know if <code>Integer</code> is less than <code>e.class</code> (<code>false</code>) or not in the ancestry chain at all (<code>nil</code>) and given the fact that <code>e</code> is an instance already <code>e.is_a?</code> makes more logical sense since the desired result from <code>is_a?</code> and <code>&lt;=</code> is an identical call to <code>class_search_ancestor</code> without all the other contextual checks that <code>&lt;=</code> implements"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1530865551, "post_id": 51181801, "comment_id": 89392966, "body": "My mistake! I first thought that <code>is_a?</code> requires class equality, but of course it works for subclasses too. Hence, <code>is_a?</code> is indeed a perfect choice."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1530865929, "post_id": 51181801, "comment_id": 89393129, "body": "@Nossidge: Can we rely on it? One can create a class which has <code>:to_int</code>, and still decide not to implement the arithmetic operations. AFIK, <code>to_int</code> is currently used only by subclasses of <code>Numeric</code> (for instance, <code>Float</code>). If you want to go along the line, that it can be kind of a substitue for Integers, it would make more sense to me to ask for <code>e.is_a?(Numeric)</code>, which makes the (not unreasonable) assumption that a class, which behaves like a number, should be derived from <code>Numeric</code>."}, {"owner": {"reputation": 799, "user_id": 139299, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/167372e60b77c07e81a41a36f7d4f1b5?s=128&d=identicon&r=PG", "display_name": "Nossidge", "link": "https://stackoverflow.com/users/139299/nossidge"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1530876715, "post_id": 51181801, "comment_id": 89399554, "body": "@user1934428: I&#39;d consider this to be acceptable. In the future, if a non-arithmetic class were created, the missing <code>:-</code> method will create a runtime error. This will alert the tester to this use-case and the code can be altered accordingly. The goal of writing code such as this is to be future-friendly, not future-proof. I&#39;d say <code>:to_int</code> gives the most maintenance-bang for your time-buck, and you should deal with weird outliers only if they come up."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1530899004, "post_id": 51181801, "comment_id": 89411913, "body": "I have to agree with @user1934428 <code>to_int</code> has nothing to do with this question IMO. Implementation of <code>:to_int</code> does not imply implementation of <code>:-</code> and furthermore is now assuming the <code>:-</code> is an arithmetical operation based on <code>to_int</code>. However if the intended result was to act on things that can be coerced into <code>Integers</code> then <code>to_i</code> is the correct method to use. (every class that implements <code>to_int</code> implements it as <code>to_i</code>). <code>to_i</code> is explicit and, semantically speaking, implies the return of an <code>Integer</code> which guarantees that <code>- 2</code> also returns an <code>Integer</code>."}, {"owner": {"reputation": 799, "user_id": 139299, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/167372e60b77c07e81a41a36f7d4f1b5?s=128&d=identicon&r=PG", "display_name": "Nossidge", "link": "https://stackoverflow.com/users/139299/nossidge"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1530914294, "post_id": 51181801, "comment_id": 89417256, "body": "@engineersmnky: <code>:to_i</code> is absolutely not the message to check a response to; <code>String</code> implements <code>:to_i</code>, and the use-case specifically states to return strings as-is. See this answer for more about the differences between <code>:to_i</code> and <code>:to_int</code>: <a href=\"https://stackoverflow.com/a/11182123/139299\">stackoverflow.com/a/11182123/139299</a>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1530914503, "post_id": 51181801, "comment_id": 89417310, "body": "I understand the difference as noted in my comment \u201c[if the intent] was to act on things that can be coerced in to <code>Integers</code>\u201c Also the post clearly states only <code>Integer</code>s are to be acted upon which further supports my statwment"}, {"owner": {"reputation": 799, "user_id": 139299, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/167372e60b77c07e81a41a36f7d4f1b5?s=128&d=identicon&r=PG", "display_name": "Nossidge", "link": "https://stackoverflow.com/users/139299/nossidge"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1530920754, "post_id": 51181801, "comment_id": 89418685, "body": "@engineersmnky: We&#39;re arguing over a spec that hasn&#39;t had its edge-cases sanded off. I think we&#39;re both right, depending on what the client wants :-). The purpose behind my answer was to help a newbie start to think of objects not as having a fixed type based on their class, but a flexible type based on their public interface. It&#39;s something I wish I&#39;d learnt sooner."}], "tags": [], "owner": {"reputation": 799, "user_id": 139299, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/167372e60b77c07e81a41a36f7d4f1b5?s=128&d=identicon&r=PG", "display_name": "Nossidge", "link": "https://stackoverflow.com/users/139299/nossidge"}, "is_accepted": true, "score": 2, "last_activity_date": 1530747576, "creation_date": 1530747576, "answer_id": 51181801, "question_id": 51180923, "link": "https://stackoverflow.com/questions/51180923/how-to-use-ruby-array-in-this-case/51181801#51181801", "title": "How to use Ruby array in this case?", "body": "<p>The other answers here will work fine with your current input. Something like:</p>\n\n<pre><code>def minusNumber(array)\n  array.map do |e|\n    if e.is_a?(Integer) &amp;&amp; e != 0\n      e - 2\n    else\n      e\n    end\n  end\nend\n</code></pre>\n\n<p>But here is a more flexible solution. This might be a bit too advanced for you where you are now, but all learning is good learning :-)</p>\n\n<p>Ruby is a language that allows polymorphism in its variables. You can see, using the example input for your method, that the variable <code>e</code> may contain a <code>String</code> object or an <code>Integer</code> object. But it actually may contain <em>any</em> type of object, and Ruby would not care one bit, unless it encounters an error in using the variable.</p>\n\n<p>So. In your example, you need to keep <code>Integer</code>s in the output. But what if in the future you need to pass in an array containing some <code>Score</code> objects, and you'd need those in your output too? This is a brand new class that you haven't even written yet, but you know you will later on down the line. There's a way you can re-write your method that will anticipate this future class, and all other <code>Integer</code>-type classes you may someday write.</p>\n\n<p>Instead of using <code>#is_a?</code> to check the type of the object, use <code>#respond_to?</code> to check what methods it implements.</p>\n\n<p>Any class that can be used as an integer <a href=\"http://www.rubyfleebie.com/2007/04/05/to_i-vs-to_int/\" rel=\"nofollow noreferrer\">should implement the <code>#to_int</code> method</a>. <code>Integer</code> certainly does, and your future <code>Score</code> class will, but <code>String</code> does not. And neither does any other class that can't be considered like an integer. So this will work for all types of values, correctly separating those that respond to <code>#to_int</code> and those that don't.</p>\n\n<pre><code>def minusNumber(array)\n  array.map do |e|\n    if e.respond_to?(:to_int) &amp;&amp; e != 0\n      e - 2\n    else\n      e\n    end\n  end\nend\n</code></pre>\n\n<p>Again, this stuff might be a bit advanced, but it's good to get in the habit early of thinking of variables in terms of its methods as opposed to its type. This way of thinking will really help you out later on.</p>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1530797790, "post_id": 51181820, "comment_id": 89366982, "body": "Honestly I would say this is the best answer excepting that <code>&quot;2&quot;.to_i.nonzero? #=&gt; true</code> but the fallout is a <code>NoMethodError</code> because <code>String#-</code> is not a method and even if it was it is unlikely it would accept an <code>Integer</code> as its argument"}, {"owner": {"reputation": 1880, "user_id": 3574603, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/71a7b92124991652bf4dd64a9c50a9ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3574603", "link": "https://stackoverflow.com/users/3574603/user3574603"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1530889871, "post_id": 51181820, "comment_id": 89407404, "body": "<code>item.inspect.to_i.nonzero?</code> works in that case. Although, IMHO, I don&#39;t think it&#39;s ideal. I feel uncomfortable about coercing <code>item</code> to a string and back to an integer and I don&#39;t think it&#39;s clear why or what it&#39;s doing anyway."}], "tags": [], "owner": {"reputation": 1880, "user_id": 3574603, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/71a7b92124991652bf4dd64a9c50a9ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3574603", "link": "https://stackoverflow.com/users/3574603/user3574603"}, "is_accepted": false, "score": 0, "last_activity_date": 1530747832, "creation_date": 1530747832, "answer_id": 51181820, "question_id": 51180923, "link": "https://stackoverflow.com/questions/51180923/how-to-use-ruby-array-in-this-case/51181820#51181820", "title": "How to use Ruby array in this case?", "body": "<p>You can do this without checking for type.</p>\n\n<blockquote>\n  <p>use of kind_of? is a code smell that says your code is procedural, not object oriented\u2026\n  <a href=\"https://www.sandimetz.com/blog/2009/06/12/ruby-case-statements-and-kind-of\" rel=\"nofollow noreferrer\">https://www.sandimetz.com/blog/2009/06/12/ruby-case-statements-and-kind-of</a></p>\n</blockquote>\n\n<pre><code>def someMethod(arr)\n  arr.map do |item|\n    next item unless item.to_i.nonzero?\n    item - 2\n  end\nend\n\nsomeMethod([\"x\", 3, 0, 4, 4, 7])\n\n&gt; [\"x\", 1, 0, 2, 2, 5]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1530751513, "post_id": 51181850, "comment_id": 89346490, "body": "Lol, almost cut-paste of the solution I had already posted <a href=\"https://stackoverflow.com/questions/51180923/how-to-use-ruby-array-in-this-case\" title=\"how to use ruby array in this case\">stackoverflow.com/questions/51180923/&hellip;</a>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1530797414, "post_id": 51181850, "comment_id": 89366729, "body": "Not that it generally matters anymore and especially in a ternary situation but a good rule of thumb is that a conditional should check the &quot;most likely&quot; scenarios in order so as to reach the result in the fastest manner. This is especially true with if..elsif conditionals. Thus given the provided input we can divide the results into 2 groups <code>[&#39;x&#39;,0]</code> and <code>[1,3,4,4,7]</code> as you can see the second group is larger and thus &quot;more likely&quot; to occur so we should check for this and let group one represent false in this case. However your example checks for group 1."}], "tags": [], "owner": {"reputation": 139, "user_id": 2188244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a990edea3b1077dc71bdbf64b7b475a1?s=128&d=identicon&r=PG", "display_name": "ricsdeol", "link": "https://stackoverflow.com/users/2188244/ricsdeol"}, "is_accepted": false, "score": -1, "last_activity_date": 1530748256, "creation_date": 1530748256, "answer_id": 51181850, "question_id": 51180923, "link": "https://stackoverflow.com/questions/51180923/how-to-use-ruby-array-in-this-case/51181850#51181850", "title": "How to use Ruby array in this case?", "body": "<p>I think this is legible and elegant:</p>\n\n<pre><code>array.map { |v| v.is_a?(Integer) &amp;&amp; v == 0 ? v : v -2 }\n</code></pre>\n"}], "owner": {"reputation": 265, "user_id": 8550156, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1166133806820715/picture?type=large", "display_name": "Olivia", "link": "https://stackoverflow.com/users/8550156/olivia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 51181801, "answer_count": 6, "score": 0, "last_activity_date": 1530752204, "creation_date": 1530739599, "question_id": 51180923, "link": "https://stackoverflow.com/questions/51180923/how-to-use-ruby-array-in-this-case", "title": "How to use Ruby array in this case?", "body": "<p>Here is a ruby array:</p>\n\n<p><code>array = ['x', 3, 0, 4, 4, 7]</code></p>\n\n<p>I want to map through <code>array</code>, take every integer in the array (except for <code>0</code> ) minus 2, and return a new array.</p>\n\n<p>When there are letters, no change will be made to the letters.</p>\n\n<p>Example output:</p>\n\n<pre><code>['x', 1, 0, 2, 2, 5]\n</code></pre>\n\n<p>This is what I have, but I got the error message saying \"undefined method integer? \"can someone tell me what is the problem?</p>\n\n<pre><code>    def minusNumber(array)\n     array.map do |e|\n      if e.integer? &amp;&amp; e !== 0\n      e - 2\n      end\n     end\n    end\n</code></pre>\n"}, {"tags": ["ruby", "xcode", "cocoapods"], "comments": [{"owner": {"reputation": 684, "user_id": 955366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4884f3bf89d9a09a499dd0001b63cd0c?s=128&d=identicon&r=PG", "display_name": "buren", "link": "https://stackoverflow.com/users/955366/buren"}, "edited": false, "score": 0, "creation_date": 1530796330, "post_id": 51180534, "comment_id": 89366016, "body": "Answered here (your other similar posted question) &gt;&gt; <a href=\"https://stackoverflow.com/questions/51181915/cocoapods-folder-does-not-exist-permissions-error?answertab=votes#tab-top\" title=\"cocoapods folder does not exist permissions error\">stackoverflow.com/questions/51181915/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2980, "user_id": 4507447, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh4.googleusercontent.com/-9wbq5kqNp50/AAAAAAAAAAI/AAAAAAAAAl8/J-1YRKR_7xs/photo.jpg?sz=128", "display_name": "nachshon f", "link": "https://stackoverflow.com/users/4507447/nachshon-f"}, "is_accepted": true, "score": 2, "last_activity_date": 1530812293, "creation_date": 1530812293, "answer_id": 51197101, "question_id": 51180534, "link": "https://stackoverflow.com/questions/51180534/cocoapods-permission-denied-errnoeacces-permission-denied-dir-s-mkdir/51197101#51197101", "title": "CocoaPods permission denied (Errno::EACCES - Permission denied @ dir_s_mkdir)", "body": "<p>I answered it here: <a href=\"https://stackoverflow.com/questions/51181915/cocoapods-folder-does-not-exist-permissions-error\">CocoaPods folder does not exist / permissions error</a></p>\n\n<p>This took me 2 full days to figure it out!</p>\n"}, {"tags": [], "owner": {"reputation": 1451, "user_id": 5160929, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh5.googleusercontent.com/-4wMmDYMTkqw/AAAAAAAAAAI/AAAAAAAAABM/CWc4rFiSzH4/photo.jpg?sz=128", "display_name": "bearacuda13", "link": "https://stackoverflow.com/users/5160929/bearacuda13"}, "is_accepted": false, "score": 0, "last_activity_date": 1545236943, "creation_date": 1545236943, "answer_id": 53855396, "question_id": 51180534, "link": "https://stackoverflow.com/questions/51180534/cocoapods-permission-denied-errnoeacces-permission-denied-dir-s-mkdir/53855396#53855396", "title": "CocoaPods permission denied (Errno::EACCES - Permission denied @ dir_s_mkdir)", "body": "<p>I was able to solve the problem by going to </p>\n\n<pre><code>/Users/{myusername}/Library/Caches/\n</code></pre>\n\n<p><strong>in Finder</strong> and manually adding the folder</p>\n\n<pre><code>CocoaPods\n</code></pre>\n\n<p>Cocoapods takes care of the rest when you run <code>pod install</code> again. </p>\n"}], "owner": {"reputation": 2980, "user_id": 4507447, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh4.googleusercontent.com/-9wbq5kqNp50/AAAAAAAAAAI/AAAAAAAAAl8/J-1YRKR_7xs/photo.jpg?sz=128", "display_name": "nachshon f", "link": "https://stackoverflow.com/users/4507447/nachshon-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3222, "favorite_count": 1, "accepted_answer_id": 51197101, "answer_count": 2, "score": 2, "last_activity_date": 1573450417, "creation_date": 1530736985, "question_id": 51180534, "link": "https://stackoverflow.com/questions/51180534/cocoapods-permission-denied-errnoeacces-permission-denied-dir-s-mkdir", "title": "CocoaPods permission denied (Errno::EACCES - Permission denied @ dir_s_mkdir)", "body": "<p>When I try <code>pod install</code> after adding <code>pod 'Firebase/Storage'</code> I get this error...</p>\n\n<blockquote>\n  <p>Errno::EACCES - Permission denied @ dir_s_mkdir -\n  /Users/nachshonfertel/Library/Caches/CocoaPods</p>\n</blockquote>\n\n<p>That folder doesn't even exist? Any ideas? I tried <code>pod update</code>, uninstalling and reinstalling ect.</p>\n\n<p>Here is the full error...</p>\n\n<pre><code>$ pod install\nAnalyzing dependencies\nDownloading dependencies\nUsing BoringSSL (9.1)\nInstalling Firebase 4.8.0\n\n\u2015\u2015\u2015 MARKDOWN TEMPLATE \u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\u2015\n\n### Command\n\n```\n/usr/local/bin/pod install\n```\n\n### Report\n\n* What did you do?\n\n* What did you expect to happen?\n\n* What happened instead?\n\n\n### Stack\n\n```\n   CocoaPods : 1.5.3\n        Ruby : ruby 2.3.3p222 (2016-11-21 revision 56859) [universal.x86_64-darwin17]\n    RubyGems : 2.5.2\n        Host : Mac OS X 10.13.5 (17F77)\n       Xcode : 9.4.1 (9F2000)\n         Git : git version 2.15.2 (Apple Git-101.1)\nRuby lib dir : /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib\nRepositories : master - https://github.com/CocoaPods/Specs.git @ 0f34dee0f260b4b053d1a2bf5d529c3c7fd31380\n```\n\n### Plugins\n\n```\ncocoapods-deintegrate : 1.0.2\ncocoapods-plugins     : 1.0.0\ncocoapods-search      : 1.0.0\ncocoapods-stats       : 1.0.0\ncocoapods-trunk       : 1.3.0\ncocoapods-try         : 1.1.0\n```\n\n### Podfile\n\n```ruby\nplatform :ios, '9.0'\n\ntarget 'Sudsters' do\n\n  use_frameworks!\n    pod 'Firebase/Core'\n    pod 'Firebase/Firestore'\n    pod 'Firebase/Messaging'\n    pod 'Firebase/Storage'\n\nend\n```\n\n### Error\n\n```\nErrno::EACCES - Permission denied @ dir_s_mkdir - /Users/nachshonfertel/Library/Caches/CocoaPods\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/fileutils.rb:253:in `mkdir'\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/fileutils.rb:253:in `fu_mkdir'\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/fileutils.rb:227:in `block (2 levels) in mkdir_p'\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/fileutils.rb:225:in `reverse_each'\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/fileutils.rb:225:in `block in mkdir_p'\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/fileutils.rb:211:in `each'\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/fileutils.rb:211:in `mkdir_p'\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/pathname.rb:576:in `mkpath'\n/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.3/lib/cocoapods/config.rb:90:in `cache_root'\n/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.3/lib/cocoapods/downloader.rb:33:in `download'\n/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.3/lib/cocoapods/installer/pod_source_installer.rb:121:in `download_source'\n/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.3/lib/cocoapods/installer/pod_source_installer.rb:60:in `install!'\n/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.3/lib/cocoapods/installer.rb:374:in `install_source_of_pod'\n/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.3/lib/cocoapods/installer.rb:339:in `block (2 levels) in install_pod_sources'\n/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.3/lib/cocoapods/user_interface.rb:85:in `titled_section'\n/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.3/lib/cocoapods/installer.rb:338:in `block in install_pod_sources'\n/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.3/lib/cocoapods/installer.rb:321:in `each'\n/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.3/lib/cocoapods/installer.rb:321:in `install_pod_sources'\n/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.3/lib/cocoapods/installer.rb:164:in `block in download_dependencies'\n/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.3/lib/cocoapods/user_interface.rb:64:in `section'\n/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.3/lib/cocoapods/installer.rb:162:in `download_dependencies'\n/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.3/lib/cocoapods/installer.rb:117:in `install!'\n/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.3/lib/cocoapods/command/install.rb:41:in `run'\n/Library/Ruby/Gems/2.3.0/gems/claide-1.0.2/lib/claide/command.rb:334:in `run'\n/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.3/lib/cocoapods/command.rb:52:in `run'\n/Library/Ruby/Gems/2.3.0/gems/cocoapods-1.5.3/bin/pod:55:in `&lt;top (required)&gt;'\n/usr/local/bin/pod:22:in `load'\n/usr/local/bin/pod:22:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "sinatra", "rackup", "shotgun"], "comments": [{"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 0, "creation_date": 1530739532, "post_id": 51180431, "comment_id": 89344238, "body": "<code>uname</code> is a Unix shell command/program. I take it from your error message that this is Windows."}], "answers": [{"tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": false, "score": 1, "last_activity_date": 1530757133, "last_edit_date": 1530757133, "creation_date": 1530756718, "answer_id": 51182558, "question_id": 51180431, "link": "https://stackoverflow.com/questions/51180431/shotgun-command-prompt-ruby-no-such-file-or-directory-uname-errnoenoen/51182558#51182558", "title": "&quot;shotgun&quot; command prompt Ruby - &quot;No such file or directory - uname (Errno::ENOENT)&quot;", "body": "<p>Shotgun does not work on Windows. From the <a href=\"https://github.com/rtomayko/shotgun#compatibility\" rel=\"nofollow noreferrer\">Shotgun docs</a>:</p>\n\n<blockquote>\n  <p><strong>Compatibility</strong></p>\n  \n  <p>Because of the underlying technique used, Shotgun is only compatible with systems that support fork(2) (probably just MRI on POSIX systems).</p>\n</blockquote>\n\n<p>If you're running Windows 10 and feeling adventurous, I would suggest <a href=\"https://www.howtogeek.com/249966/how-to-install-and-use-the-linux-bash-shell-on-windows-10/\" rel=\"nofollow noreferrer\">trying out the Windows Subsystem for Linux</a>. This way you can run a POSIX compliant subsystem on Windows, and use tools such as Shotgun without problems.</p>\n"}, {"tags": [], "owner": {"reputation": 799, "user_id": 139299, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/167372e60b77c07e81a41a36f7d4f1b5?s=128&d=identicon&r=PG", "display_name": "Nossidge", "link": "https://stackoverflow.com/users/139299/nossidge"}, "is_accepted": false, "score": 1, "last_activity_date": 1530811386, "creation_date": 1530811386, "answer_id": 51196922, "question_id": 51180431, "link": "https://stackoverflow.com/questions/51180431/shotgun-command-prompt-ruby-no-such-file-or-directory-uname-errnoenoen/51196922#51196922", "title": "&quot;shotgun&quot; command prompt Ruby - &quot;No such file or directory - uname (Errno::ENOENT)&quot;", "body": "<p>Shotgun doesn't work on Windows, but <a href=\"https://github.com/alexch/rerun\" rel=\"nofollow noreferrer\"><code>rerun</code></a> runs fine on my Windows 7 machine.</p>\n"}], "owner": {"reputation": 345, "user_id": 9983127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8765c919867c192ddacbe101456986f?s=128&d=identicon&r=PG&f=1", "display_name": "caro", "link": "https://stackoverflow.com/users/9983127/caro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1530811386, "creation_date": 1530736301, "question_id": 51180431, "link": "https://stackoverflow.com/questions/51180431/shotgun-command-prompt-ruby-no-such-file-or-directory-uname-errnoenoen", "title": "&quot;shotgun&quot; command prompt Ruby - &quot;No such file or directory - uname (Errno::ENOENT)&quot;", "body": "<p>I've installed Ruby onto my Windows PC and have a home.erb file with a route that is described in my app.rb file. </p>\n\n<p>My Gemfile currently looks like: </p>\n\n<pre><code>#Gemfile\nsource :rubygems\n\ngem 'sinatra'\ngem 'sass'\ngem 'rake'\ngem 'shotgun'\ngem 'pry'\ngem 'require_all'\n\ngroup :test do \ngem 'rspec'\ngem 'capybara'\ngem 'rack-test'\nend \n</code></pre>\n\n<p>I've been running the \"bundle install\" command on the 'Start Command Prompt With Ruby'. I've successfully installed the 'sinatra', 'shotgun', 'rake' (etc.) gems onto the Ruby application. </p>\n\n<p>However, every time I run \"shotgun\" to see my website in progress, I get the following error in the terminal. </p>\n\n<pre><code>C:/Ruby24/lib/ruby/gems/2.4.0/gems/shotgun-0.9.2/bin/shotgun:102:in ``': No such file or directory - uname (Errno::ENOENT)\n    from C:/Ruby24/lib/ruby/gems/2.4.0/gems/shotgun-0.9.2/bin/shotgun:102:in `block in &lt;top (required)&gt;'\n    from C:/Ruby24/lib/ruby/gems/2.4.0/gems/shotgun-0.9.2/bin/shotgun:101:in `each'\n    from C:/Ruby24/lib/ruby/gems/2.4.0/gems/shotgun-0.9.2/bin/shotgun:101:in `find'\n    from C:/Ruby24/lib/ruby/gems/2.4.0/gems/shotgun-0.9.2/bin/shotgun:101:in `&lt;top (required)&gt;'\n    from C:/Ruby24/bin/shotgun:23:in `load'\n    from C:/Ruby24/bin/shotgun:23:in `&lt;main&gt;'\n</code></pre>\n\n<p>My Gemfile is under Ruby24/lib/personalsite. </p>\n\n<p>Any help would be appreciated as I am just starting off with website development! Thanks!! </p>\n"}, {"tags": ["ruby", "class", "methods"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 3, "creation_date": 1530731777, "post_id": 51179720, "comment_id": 89341929, "body": "<i>pink</i>? What do you mean by <i>pink</i>?"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1530733663, "post_id": 51179720, "comment_id": 89342480, "body": "Paste the exact output, please."}, {"owner": {"reputation": 1, "user_id": 6335702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7228358a270b09511146f7e07787da1?s=128&d=identicon&r=PG&f=1", "display_name": "kamrul hasan", "link": "https://stackoverflow.com/users/6335702/kamrul-hasan"}, "edited": false, "score": 0, "creation_date": 1530734960, "post_id": 51179720, "comment_id": 89342880, "body": "I am confused as well I don&#39;t know why the result is pink. that my i posted this question"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1530764370, "post_id": 51179720, "comment_id": 89348577, "body": "Cannot be reproduced."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530773170, "post_id": 51179720, "comment_id": 89351544, "body": "Why is there <i>no</i> <code>end</code> to your class <code>Dog</code>?"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530773979, "post_id": 51179720, "comment_id": 89352006, "body": "@Jagdeep Going by indentation, I&#39;d say there is no <code>end</code> to his <code>speak</code> method :P."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 1, "creation_date": 1530774314, "post_id": 51179720, "comment_id": 89352216, "body": "Yeah, but <code>ruby</code> will not consider indentation while running this code. :)"}], "answers": [{"comments": [{"owner": {"reputation": 799, "user_id": 139299, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/167372e60b77c07e81a41a36f7d4f1b5?s=128&d=identicon&r=PG", "display_name": "Nossidge", "link": "https://stackoverflow.com/users/139299/nossidge"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1530731943, "post_id": 51179741, "comment_id": 89341976, "body": "I assumed their error messages were being displayed in pink / red. I figured it was just a language barrier thing."}, {"owner": {"reputation": 1, "user_id": 6335702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7228358a270b09511146f7e07787da1?s=128&d=identicon&r=PG&f=1", "display_name": "kamrul hasan", "link": "https://stackoverflow.com/users/6335702/kamrul-hasan"}, "edited": false, "score": 0, "creation_date": 1530735257, "post_id": 51179741, "comment_id": 89342984, "body": "thanks, @Nossidge that worked. is there any way I change speak output? like this:  harry.speak(&quot;hello I can talk too&quot;)"}, {"owner": {"reputation": 799, "user_id": 139299, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/167372e60b77c07e81a41a36f7d4f1b5?s=128&d=identicon&r=PG", "display_name": "Nossidge", "link": "https://stackoverflow.com/users/139299/nossidge"}, "edited": false, "score": 0, "creation_date": 1530736132, "post_id": 51179741, "comment_id": 89343243, "body": "Sure: <code>def speak(noise); puts noise; end</code>. This is very basic stuff though, you should probably get started with a beginners Ruby tutorial. There&#39;s loads online if you search."}], "tags": [], "owner": {"reputation": 799, "user_id": 139299, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/167372e60b77c07e81a41a36f7d4f1b5?s=128&d=identicon&r=PG", "display_name": "Nossidge", "link": "https://stackoverflow.com/users/139299/nossidge"}, "is_accepted": false, "score": 1, "last_activity_date": 1530731730, "creation_date": 1530731730, "answer_id": 51179741, "question_id": 51179720, "link": "https://stackoverflow.com/questions/51179720/ruby-class-and-method-are-not-working/51179741#51179741", "title": "ruby class and method are not working", "body": "<p>You are missing an <code>end</code> for your <code>def</code>. Your code should be:</p>\n\n<pre><code>class Dog\n  def speak\n    puts \"woof-woof\"\n  end\nend\nharry = Dog.new\nharry.speak\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6335702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7228358a270b09511146f7e07787da1?s=128&d=identicon&r=PG&f=1", "display_name": "kamrul hasan", "link": "https://stackoverflow.com/users/6335702/kamrul-hasan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "closed_date": 1530798846, "answer_count": 1, "score": -2, "last_activity_date": 1530731730, "creation_date": 1530731574, "question_id": 51179720, "link": "https://stackoverflow.com/questions/51179720/ruby-class-and-method-are-not-working", "closed_reason": "Needs details or clarity", "title": "ruby class and method are not working", "body": "<p>I am new in ruby and was trying to write a method to see the result this is my code </p>\n\n<pre><code>class Dog\n  def speak\n  puts \"woof-woof\"\nend\nharry= Dog.new()\nharry.speak\n</code></pre>\n\n<p>Result:\nwoof-woof <br/>\npink <br/>\nwhy does the result give me pink and not woof-woof please help</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 2, "creation_date": 1530726877, "post_id": 51178595, "comment_id": 89340303, "body": "Post the error message you are getting when you try to deploy"}, {"owner": {"reputation": 3, "user_id": 9662812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Ja5y.jpg?s=128&g=1", "display_name": "Gonzalo Diaz", "link": "https://stackoverflow.com/users/9662812/gonzalo-diaz"}, "reply_to_user": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 0, "creation_date": 1530728124, "post_id": 51178595, "comment_id": 89340695, "body": "@MarkMerrit this is the error:"}, {"owner": {"reputation": 3, "user_id": 9662812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Ja5y.jpg?s=128&g=1", "display_name": "Gonzalo Diaz", "link": "https://stackoverflow.com/users/9662812/gonzalo-diaz"}, "reply_to_user": {"reputation": 2345, "user_id": 4988918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1BRI.png?s=128&g=1", "display_name": "Mark Merritt", "link": "https://stackoverflow.com/users/4988918/mark-merritt"}, "edited": false, "score": 0, "creation_date": 1530728169, "post_id": 51178595, "comment_id": 89340706, "body": "remote:        Tasks: TOP =&gt; assets:precompile remote:        (See full trace by running task with --trace) remote:  ! remote:  !     Precompiling assets failed. remote:  ! remote:  !     Push rejected, failed to compile Ruby app. remote:  remote:  !     Push failed"}, {"owner": {"reputation": 1909, "user_id": 2225619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/286a6578091bb7b170a254eb8b5c100d?s=128&d=identicon&r=PG", "display_name": "Capricorn", "link": "https://stackoverflow.com/users/2225619/capricorn"}, "edited": false, "score": 1, "creation_date": 1530728198, "post_id": 51178595, "comment_id": 89340713, "body": "Please put the error message into your question and not in the comments ;)"}, {"owner": {"reputation": 3, "user_id": 9662812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Ja5y.jpg?s=128&g=1", "display_name": "Gonzalo Diaz", "link": "https://stackoverflow.com/users/9662812/gonzalo-diaz"}, "reply_to_user": {"reputation": 1909, "user_id": 2225619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/286a6578091bb7b170a254eb8b5c100d?s=128&d=identicon&r=PG", "display_name": "Capricorn", "link": "https://stackoverflow.com/users/2225619/capricorn"}, "edited": false, "score": 0, "creation_date": 1530780302, "post_id": 51178595, "comment_id": 89355618, "body": "@Capricorn did you see the error? I thought it was webpack but it didnt work - I ran webpack-dev-server but nothing..."}], "owner": {"reputation": 3, "user_id": 9662812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Ja5y.jpg?s=128&g=1", "display_name": "Gonzalo Diaz", "link": "https://stackoverflow.com/users/9662812/gonzalo-diaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530733172, "creation_date": 1530725329, "last_edit_date": 1530733172, "question_id": 51178595, "link": "https://stackoverflow.com/questions/51178595/precompiling-assets-failed-sos", "title": "Precompiling assets failed. - SOS", "body": "<pre><code>****ERROR MESSAGE******\nremote:        rake aborted!\nremote:        LoadError: cannot load such file -- yui/compressor\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:32:in `require'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `block in require'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:249:in `load_dependency'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `require'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/autoload/yui.rb:1:in `&lt;main&gt;'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `block in require_with_bootsnap_lfi'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/loaded_features_index.rb:65:in `register'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in `require_with_bootsnap_lfi'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in `require'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `block in require'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:249:in `load_dependency'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `require'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/yui_compressor.rb:39:in `initialize'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/yui_compressor.rb:24:in `new'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/yui_compressor.rb:24:in `instance'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/yui_compressor.rb:28:in `call'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/processor_utils.rb:75:in `call_processor'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/processor_utils.rb:57:in `block in call_processors'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/processor_utils.rb:56:in `reverse_each'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/processor_utils.rb:56:in `call_processors'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/loader.rb:134:in `load_from_unloaded'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/loader.rb:60:in `block in load'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/loader.rb:317:in `fetch_asset_from_dependency_cache'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/loader.rb:44:in `load'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/cached_environment.rb:20:in `block in initialize'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/cached_environment.rb:47:in `load'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/base.rb:66:in `find_asset'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/base.rb:73:in `find_all_linked_assets'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/manifest.rb:142:in `block in find'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/legacy.rb:114:in `block (2 levels) in logical_paths'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/path_utils.rb:228:in `block in stat_tree'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/path_utils.rb:212:in `block in stat_directory'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/path_utils.rb:209:in `each'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/path_utils.rb:209:in `stat_directory'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/path_utils.rb:227:in `stat_tree'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/legacy.rb:105:in `each'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/legacy.rb:105:in `block in logical_paths'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/legacy.rb:104:in `each'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/legacy.rb:104:in `logical_paths'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/manifest.rb:140:in `find'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/sprockets/manifest.rb:186:in `compile'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-rails-3.2.1/lib/sprockets/rails/task.rb:68:in `block (3 levels) in define'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-3.7.2/lib/rake/sprocketstask.rb:147:in `with_logger'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/sprockets-rails-3.2.1/lib/sprockets/rails/task.rb:67:in `block (2 levels) in define'\nremote:        /tmp/build_2693109f145a888e2c997888081094e8/vendor/bundle/ruby/2.4.0/gems/rake-12.3.1/exe/rake:27:in `&lt;top (required)&gt;'\nremote:        Tasks: TOP =&gt; assets:precompile\nremote:        (See full trace by running task with --trace)\nremote:  !\nremote:  !     Precompiling assets failed.\nremote:  !\nremote:  !     Push rejected, failed to compile Ruby app.\nremote: \nremote:  !     Push failed\nremote: Verifying deploy...\n</code></pre>\n\n<hr>\n\n<p>I havent been able to deploy to Heroku since i created this repo?\nAny theories?</p>\n\n<p>Putted this on my config/application.rb (based on another post) but it didnt work:\n    require_relative 'boot'</p>\n\n<pre><code>require 'rails/all'\n\n# Require the gems listed in Gemfile, including any gems\n# you've limited to :test, :development, or :production.enter code here\nBundler.require(*Rails.groups)\n\nmodule Bgwsite\n  class Application &lt; Rails::Application\n\n    config.action_view.embed_authenticity_token_in_remote_forms = true\n\n    config.generators do |generate|\n          generate.assets false\n          generate.helper false\n          generate.test_framework  :test_unit, fixture: false\n        end\n    # Initialize configuration defaults for originally generated Rails version.\n    config.load_defaults 5.2\n\n    config.action_view.embed_authenticity_token_in_remote_forms = true\n\n    # Settings in config/environments/* take precedence over those specified here.\n    # Application configuration can go into files in config/initializers\n    # -- all .rb files in that directory are automatically loaded after loading\n    # the framework and any gems in your application.\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "text-files"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1530722212, "post_id": 51177937, "comment_id": 89338460, "body": "Do you mean <a href=\"https://stackoverflow.com/questions/2856038/setting-end-of-line-character-for-puts\">like this</a>?"}, {"owner": {"reputation": 65, "user_id": 5009179, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fONrH5SuAIQ/AAAAAAAAAAI/AAAAAAAABOA/obJfG5aYtKo/photo.jpg?sz=128", "display_name": "Denis Gubaua", "link": "https://stackoverflow.com/users/5009179/denis-gubaua"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1530723342, "post_id": 51177937, "comment_id": 89338951, "body": "@tadman, thanks man, I add &#39;\\r\\n&#39; and now the file is a DOS format for the software. How I supposed before, this is a beginner question. I really thankful for you help! If you want, make a answer in this question with this solve."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1530725938, "post_id": 51178045, "comment_id": 89339988, "body": "A lot of DOS-origin Windows software has no idea that LF encoding is a thing."}], "tags": [], "owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "is_accepted": true, "score": 2, "last_activity_date": 1530722661, "creation_date": 1530722661, "answer_id": 51178045, "question_id": 51177937, "link": "https://stackoverflow.com/questions/51177937/ruby-write-txt-file-dos-windows/51178045#51178045", "title": "Ruby Write txt file DOS/Windows", "body": "<p>Use <code>\\r\\n</code> instead:</p>\n\n<pre><code>File.open(filePath, \"w+\"){ |file| file.write(\"blablabla\\r\\n\")}\n</code></pre>\n\n<ul>\n<li>Using <code>\\n (0x0a)</code> only is 'unix style'.</li>\n<li>Using <code>\\r\\n (0x0d 0x0a)</code> is 'windows style'.</li>\n</ul>\n\n<p>Although most software should be able to handle both.</p>\n"}, {"tags": [], "owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "is_accepted": false, "score": 1, "last_activity_date": 1530783032, "creation_date": 1530783032, "answer_id": 51187891, "question_id": 51177937, "link": "https://stackoverflow.com/questions/51177937/ruby-write-txt-file-dos-windows/51187891#51187891", "title": "Ruby Write txt file DOS/Windows", "body": "<p>It isn't very clearly documented but <code>File.open</code> also accepts these <code>String#encode</code> options:</p>\n\n<pre><code>File.open('a.txt', 'w+', crlf_newline: true){ |file| file.write(\"blablabla\\n\")}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>File.open('a.txt', 'w+', newline: :crlf){ |file| file.write(\"blablabla\\n\")}\n</code></pre>\n\n<p>Either will force Ruby to write CRLF instead of LF (CR is <code>\\r</code> and LF is <code>\\n</code>).</p>\n"}], "owner": {"reputation": 65, "user_id": 5009179, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fONrH5SuAIQ/AAAAAAAAAAI/AAAAAAAABOA/obJfG5aYtKo/photo.jpg?sz=128", "display_name": "Denis Gubaua", "link": "https://stackoverflow.com/users/5009179/denis-gubaua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 51178045, "answer_count": 2, "score": 3, "last_activity_date": 1530783032, "creation_date": 1530722037, "question_id": 51177937, "link": "https://stackoverflow.com/questions/51177937/ruby-write-txt-file-dos-windows", "title": "Ruby Write txt file DOS/Windows", "body": "<p>Maybe this is a beginner question, but I could not find the problem yet.\nI need to write a text file with Ruby.\nI can write and create the file to export, but the time I export the file and it is read in other software, it tells me it is a UNIX file and the program requires it to be DOS / Windows.</p>\n\n<p>How can I do this with Ruby?\nI use Rails 4 in the project.</p>\n\n<p>Example of how I am writing.</p>\n\n<pre><code>File.open(filePath, \"w+\"){ |file| file.write(\"blablabla\\n\")}\n</code></pre>\n"}, {"tags": ["ruby", "request", "net-http"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8924831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359a989293ce703eeabfde54994be679?s=128&d=identicon&r=PG&f=1", "display_name": "MattVoid", "link": "https://stackoverflow.com/users/8924831/mattvoid"}, "edited": false, "score": 0, "creation_date": 1530723441, "post_id": 51177989, "comment_id": 89338990, "body": "thank you, but I need to get the body of the page with status code 3xx, not the redirected page, but in the <code>response.body</code> return a empty string, while in python returns me the the response code"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 1, "user_id": 8924831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359a989293ce703eeabfde54994be679?s=128&d=identicon&r=PG&f=1", "display_name": "MattVoid", "link": "https://stackoverflow.com/users/8924831/mattvoid"}, "edited": false, "score": 0, "creation_date": 1530777903, "post_id": 51177989, "comment_id": 89354350, "body": "Thanks @MattVoid - I&#39;ve updated my answer to reflect this. The <a href=\"https://ruby-doc.org/stdlib-2.5.1/libdoc/net/http/rdoc/Net/HTTPResponse.html#method-c-body_permitted-3F\" rel=\"nofollow noreferrer\">docs</a> show a <code>body_permitted?</code> method which checks the <a href=\"https://ruby-doc.org/stdlib-2.5.1/libdoc/net/http/rdoc/Net/HTTPRedirection.html\" rel=\"nofollow noreferrer\"><code>HAS_BODY</code></a> constant. You can then return this if it exists, or handle in a custom manner if it doesn&#39;t (in my example, by following the redirect, though this could easily be adapted to return a custom response). Hope that helps!"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 1, "user_id": 8924831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359a989293ce703eeabfde54994be679?s=128&d=identicon&r=PG&f=1", "display_name": "MattVoid", "link": "https://stackoverflow.com/users/8924831/mattvoid"}, "edited": false, "score": 0, "creation_date": 1531296140, "post_id": 51177989, "comment_id": 89537745, "body": "Did this help at all @MattVoid?"}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": false, "score": 0, "last_activity_date": 1530793656, "last_edit_date": 1530793656, "creation_date": 1530722343, "answer_id": 51177989, "question_id": 51177281, "link": "https://stackoverflow.com/questions/51177281/ruby-net-http-how-to-get-body-of-page-with-status-code-3xx/51177989#51177989", "title": "Ruby Net/Http how to get body of page with status code 3xx", "body": "<p>You'll likely need to follow the redirect (<code>302</code> code). The <a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/net/http/rdoc/Net/HTTP.html\" rel=\"nofollow noreferrer\">Ruby docs</a> have a great example for doing this. </p>\n\n<p>I've included this below, along with a check to return the body if it exists. If you never want to follow the redirect, you could change the <code>else</code> condition to return <code>response.code</code>, and empty string, false, or whatever's appropriate. Here's the full example:</p>\n\n<pre><code>def fetch(uri_str, limit = 10)\n  raise ArgumentError, 'too many HTTP redirects' if limit == 0\n\n  response = Net::HTTP.get_response(URI(uri_str))\n\n  case response\n  when Net::HTTPSuccess then\n    response\n  when Net::HTTPRedirection then\n    if response.body_permitted?\n      response\n    else\n      location = response['location']\n      warn \"redirected to #{location}\"\n      fetch(location, limit - 1)\n    end\n  else\n    response.value\n  end\nend\n</code></pre>\n\n<p>The code is pretty straight forward, calling itself recursively if the code from <code>Net::HTTP.get_response</code> returns a redirect, pointing to the new location.</p>\n\n<p>You can follow up to ten redirects with this approach, which should be ample, though should likely adjust to suit or circumstances.</p>\n\n<p>Then, when you run <code>fetch(your_url)</code>, it should follow the redirect until it lands on a page and can return the body. I.E.</p>\n\n<pre><code>res = fetch(your_url)\nres.body\n</code></pre>\n\n<p>Let me know how you get on with this, or if you've any questions!</p>\n"}], "owner": {"reputation": 1, "user_id": 8924831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359a989293ce703eeabfde54994be679?s=128&d=identicon&r=PG&f=1", "display_name": "MattVoid", "link": "https://stackoverflow.com/users/8924831/mattvoid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 617, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530793656, "creation_date": 1530719233, "last_edit_date": 1530720842, "question_id": 51177281, "link": "https://stackoverflow.com/questions/51177281/ruby-net-http-how-to-get-body-of-page-with-status-code-3xx", "title": "Ruby Net/Http how to get body of page with status code 3xx", "body": "<p>I use net/http ruby's library to get the html response, but i can't get the body of the page with the status code 3xx</p>\n\n<p>Page Body:</p>\n\n<pre><code>&lt;div class=\"flash-container\"&gt;\n    &lt;div class=\"flash flash-success\"&gt;\n        Il tuo indirizzo email \u00e8 stato modificato con successo.\n        &lt;a href=\"#\" onclick=\"removeFlash(this);\" class=\"close\"&gt;\u00d7&lt;/a&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Request:</p>\n\n<pre><code>require 'net/http'\nrequire 'uri'\nhttp = Net::HTTP.new(uri.host, uri.port)\nhttp.use_ssl = true\nrequest = Net::HTTP::Post.new(uri.request_uri)\nrequest.set_form_data({\n      'email' =&gt; email,\n      'email-confirm' =&gt; email_confirm,\n      'password' =&gt; password\n})\nrequest['Cookie'] = 'ACCOUNT_SESSID=' + token\nresponse = http.request(request)\n</code></pre>\n\n<p>Response:</p>\n\n<pre><code>response.code  # '302'\nresponse.body # ''\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 4, "creation_date": 1530719313, "post_id": 51177261, "comment_id": 89337222, "body": "If your <code>short_circuit_or</code> is being passed <code>other</code> as a value, hasn\u2019t it been evaluated already? That wouldn\u2019t be short-circuiting."}, {"owner": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1530719549, "post_id": 51177261, "comment_id": 89337354, "body": "@Ry- It would be used like <code>a.short_circuit_or(b)</code>.  If the value of <code>a</code> is non-nil, then it will immediately return <code>true</code> and will skip any checks on <code>b</code>."}, {"owner": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1530719656, "post_id": 51177261, "comment_id": 89337406, "body": "Oh I think I see what you&#39;re getting at... the real short-circuit operator could be used with <i>expressions</i>.... whereas this couldn&#39;t"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1530720085, "post_id": 51177261, "comment_id": 89337617, "body": "@Jonah with <code>true || a_very_expensive_operation</code> you will just get <code>true</code>. With <code>true.short_circuit_or(a_very_expensive_operation)</code> you will still have to do the evaluation in order to pass it to the <code>#short_circuit_or</code> invocation."}, {"owner": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1530720176, "post_id": 51177261, "comment_id": 89337656, "body": "@ndn, yep, i get it now.  That&#39;s what I meant by expression, but you&#39;re right it could apply to any expensive operation, not just an expensive expression.  although technically speaking even a method call is an expression..."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530721395, "post_id": 51177261, "comment_id": 89338128, "body": "It <i>is</i> an expression, just a non-short-circuiting one :)"}, {"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1530721998, "post_id": 51177261, "comment_id": 89338374, "body": "<a href=\"https://stackoverflow.com/questions/15311349/why-cant-we-override-and\">Related</a>. Wouldn&#39;t call it a dup though."}, {"owner": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "reply_to_user": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1530722780, "post_id": 51177261, "comment_id": 89338709, "body": "@SilvioMayolo it looks like my guess \u201cbaked in bits of syntax\u201d is correct.  The bit about parameters always being evaluated first gets to the heart of the discussion above"}, {"owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1530732463, "post_id": 51177261, "comment_id": 89342105, "body": "they are part of the syntax called <code>operators</code> <a href=\"https://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Operators\" rel=\"nofollow noreferrer\">en.wikibooks.org/wiki/Ruby_Programming/Syntax/Operators</a>"}], "answers": [{"comments": [{"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1530801597, "post_id": 51187060, "comment_id": 89369603, "body": "I rephrased the explanation of the example code and corrected (I hope) the other errors."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1530802307, "post_id": 51187060, "comment_id": 89370170, "body": "Much better now :)"}], "tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": true, "score": 2, "last_activity_date": 1530801466, "last_edit_date": 1530801466, "creation_date": 1530780671, "answer_id": 51187060, "question_id": 51177261, "link": "https://stackoverflow.com/questions/51177261/and-arent-methods-on-object-what-are-they/51187060#51187060", "title": "|| and &amp;&amp; aren&#39;t methods on Object -- what are they?", "body": "<p>Both <code>|</code> and <code>||</code> are <a href=\"http://ruby-doc.org/core-2.5.0/doc/syntax/precedence_rdoc.html\" rel=\"nofollow noreferrer\">operators</a>. <code>||</code> is part of the language while <code>|</code> is implemented as a method by some classes (<a href=\"http://ruby-doc.org/core-2.5.0/Array.html#method-i-7C\" rel=\"nofollow noreferrer\"><code>Array</code></a>, <a href=\"http://ruby-doc.org/core-2.5.0/FalseClass.html#method-i-7C\" rel=\"nofollow noreferrer\"><code>FalseClass</code></a>, <a href=\"http://ruby-doc.org/core-2.5.0/Integer.html#method-i-7C\" rel=\"nofollow noreferrer\"><code>Integer</code></a>, <a href=\"http://ruby-doc.org/core-2.5.0/NilClass.html#method-i-7C\" rel=\"nofollow noreferrer\"><code>NilClass</code></a> and <a href=\"http://ruby-doc.org/core-2.5.0/TrueClass.html#method-i-7C\" rel=\"nofollow noreferrer\"><code>TrueClass</code></a>) .</p>\n\n<p>In programming languages, <code>|</code> is used in general as the <a href=\"https://en.wikipedia.org/wiki/Bitwise_operation#OR\" rel=\"nofollow noreferrer\">bitwise OR</a> operator. It combines the bits of its integer operands and produces a new integer value. When used with non-integer operands, some languages convert them to integer, others prohibit such usage. </p>\n\n<p><code>||</code> is the <a href=\"https://en.wikipedia.org/wiki/Logical_disjunction\" rel=\"nofollow noreferrer\">logical OR</a> operator. It combines two boolean values (<code>true</code> or <code>false</code>) and produces another boolean value. When its operands are not boolean values, they are converted to boolean by some languages. Ruby (and JavaScript and other languages) evaluate its first operand as boolean and the value of the expression is the value of its first operand if its boolean value is <code>true</code> or the value of its second operand if the logical value of its first one is <code>false</code>. The type of the resulting value is its original type, it is not converted to boolean.</p>\n\n<p>Each language uses its own rules to decide what non-boolean values are converted to <code>false</code> (usually the number <code>0</code>, the empty string <code>''</code> and <code>null</code> or <code>undefined</code>); all the other values are converted to <code>true</code>. The only \"false\" values in Ruby are <code>false</code> (boolean) and <code>nil</code> (non-boolean); all the other values (including <code>0</code>) are \"true\".</p>\n\n<p>Because <a href=\"https://en.wikipedia.org/wiki/Logical_disjunction#Truth_table\" rel=\"nofollow noreferrer\"><code>true || anything</code> is <code>true</code></a> and <a href=\"https://en.wikipedia.org/wiki/Logical_conjunction#Truth_table\" rel=\"nofollow noreferrer\"><code>false &amp;&amp; anything</code> is <code>false</code></a>, many programming languages including Ruby implement <em>short-circuit evaluation</em> for logical expressions.</p>\n\n<p>Using <a href=\"https://en.wikipedia.org/wiki/Short-circuit_evaluation\" rel=\"nofollow noreferrer\">short-circuit evaluation</a>, a logical expression is evaluated from left to right, one operand at a time until the value of the expression can be computed without the need to compute the other operands. In the examples above, the value of <code>anything</code> doesn't change the value of the entire expression. Using short-circuit evaluation, the value of <code>anything</code> is not computed at all because it does not influence the value of the entire expression. Being <code>anything</code> a method call that takes considerable time to execute, the short-circuit evaluation avoids calling it and saves execution time.</p>\n\n<p>As others already mentioned in comments to the question, implementing <code>||</code> as a method of some class is not possible. The value of its second operand must be evaluated in order to be passed as argument to the method and this breaks the short-circuiting behaviour.</p>\n\n<p>The usual representation of the logical values in programming languages uses only one bit (and I guess Ruby does the same.) Results of <code>|</code> and <code>||</code> are the same for operands stored on one bit.</p>\n\n<p>Ruby uses the <code>|</code> symbol to implement different flavors of the <code>OR</code> operation as follows:</p>\n\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Bitwise_operation#OR\" rel=\"nofollow noreferrer\"><em>bitwise OR</em></a> for integers;</li>\n<li>non-short-circuit <a href=\"https://en.wikipedia.org/wiki/Logical_disjunction\" rel=\"nofollow noreferrer\"><em>logical OR</em></a> for booleans and <code>nil</code>;</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Union_(set_theory)\" rel=\"nofollow noreferrer\"><em>union</em></a> for arrays.</li>\n</ul>\n\n<p>An expression like:</p>\n\n<pre><code>x = false | a | b | c\n</code></pre>\n\n<p>ensures that all <code>a</code>, <code>b</code> and <code>c</code> expressions are evaluated (no short-circuit) and the value of <code>x</code> is the <em>logical OR</em> of the logical values of <code>a</code>, <code>b</code> and <code>c</code>.</p>\n\n<p>If <code>a</code>, <code>b</code> and <code>c</code> are method calls, to achieve the same result using the <em>logical OR</em> operator (<code>||</code>) the code needs to look like this:</p>\n\n<pre><code>aa = a\nbb = b\ncc = c\nx = aa || bb || cc\n</code></pre>\n\n<p>This way each method is called no matter what values are returned by the methods called before it.</p>\n\n<p>For <a href=\"http://ruby-doc.org/core-2.5.0/TrueClass.html#method-i-7C\" rel=\"nofollow noreferrer\"><code>TrueClass</code></a>, <a href=\"http://ruby-doc.org/core-2.5.0/FalseClass.html#method-i-7C\" rel=\"nofollow noreferrer\"><code>FalseClass</code></a> and <a href=\"http://ruby-doc.org/core-2.5.0/NilClass.html#method-i-7C\" rel=\"nofollow noreferrer\"><code>NilClass</code></a>, the <code>|</code> operator is useful when short-circuit evaluation is not desired.</p>\n\n<p>Also, for <a href=\"http://ruby-doc.org/core-2.5.0/Array.html#method-i-7C\" rel=\"nofollow noreferrer\"><code>Array</code></a> (an array is just an ordered set), the <code>|</code> operator implements union, an operation that is the semantically equivalent of <em>logical OR</em> for sets.</p>\n"}], "owner": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 51187060, "answer_count": 1, "score": 1, "last_activity_date": 1530801466, "creation_date": 1530719158, "question_id": 51177261, "link": "https://stackoverflow.com/questions/51177261/and-arent-methods-on-object-what-are-they", "title": "|| and &amp;&amp; aren&#39;t methods on Object -- what are they?", "body": "<p>The single pipe \"or\"  <code>|</code> exists as a method on <code>TrueClass</code> and <code>FalseClass</code>, but the short circuit <code>||</code> operator does not.  Neither does it exist as a method on <code>Object</code>. </p>\n\n<p>This seems to be an exception to ruby's \"everything is an object\" metaphor.  </p>\n\n<p><strong>Main Question:</strong> Syntactically speaking, what <em>are</em> <code>||</code> and <code>&amp;&amp;</code>?  Are they just baked bits of global syntax?</p>\n\n<p><strong>Secondary Question:</strong> I'm flagging this as not part of the main question, because it is potentially subjective, though I suspect it probably isn't.</p>\n\n<p>Is there a language design or performance reason for this asymmetry?  It seems to me both operators <em>could have been</em> implemented as methods on <code>Object</code>.  Something like:</p>\n\n<pre><code>class Object\n  def short_circuit_or(other)\n    !nil?       ? true : \n    !other.nil? ? true : false\n  end\nend\n</code></pre>\n\n<p>I assume there is a reason they were not.  What is it?</p>\n"}, {"tags": ["ruby", "capybara"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1530719344, "post_id": 51177100, "comment_id": 89337236, "body": "Those aren\u2019t contradictory - it can\u2019t find that field at all on the page (disabled or not) - What is the HTML you\u2019re attempting to match"}, {"owner": {"reputation": 29, "user_id": 6644408, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157284207370565/picture?type=large", "display_name": "Ian Pie Goddard", "link": "https://stackoverflow.com/users/6644408/ian-pie-goddard"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1530720314, "post_id": 51177100, "comment_id": 89337718, "body": "&lt;input type=&quot;email&quot; required=&quot;&quot; name=&quot;username&quot; placeholder=&quot;Username&quot; value=&quot;&quot; data-test-id=&quot;SANDBOX_FIELD_USERNAME&quot;&gt;&lt;br&gt;  &lt;input type=&quot;password&quot; required=&quot;&quot; name=&quot;password&quot; placeholder=&quot;Password&quot; data-test-id=&quot;SANDBOX_FIELD_PASSWORD&quot;&gt;&lt;br&gt;  I have a test previous to this that checks for the element using <code>expect(page).to have_entry_field</code> defined in my Page Object and that is passing so I assumed that the field was there."}], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1530722000, "creation_date": 1530722000, "answer_id": 51177936, "question_id": 51177100, "link": "https://stackoverflow.com/questions/51177100/capybara-unable-to-find-field-text-entry-that-is-is-not-disabled/51177936#51177936", "title": "Capybara unable to find field (text entry) that is/is not disabled", "body": "<p>Capybaras <code>find_field</code> finds form fields by id, name, placeholder, or associated label text.  Since \"SANDBOX_FIELD_USERNAME\" is none of those in the element you're attempting to fill in it doesn't find the field.  You could do </p>\n\n<pre><code>fill_in('Username', with: username)\n</code></pre>\n\n<p>to match on the placeholder text, and set the value which is basically the same as </p>\n\n<pre><code>find_field('Username').set(username)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7672657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/318055a3c0df38c238f87452b702aab8?s=128&d=identicon&r=PG&f=1", "display_name": "napster235", "link": "https://stackoverflow.com/users/7672657/napster235"}, "is_accepted": false, "score": 0, "last_activity_date": 1530788512, "creation_date": 1530788512, "answer_id": 51189657, "question_id": 51177100, "link": "https://stackoverflow.com/questions/51177100/capybara-unable-to-find-field-text-entry-that-is-is-not-disabled/51189657#51189657", "title": "Capybara unable to find field (text entry) that is/is not disabled", "body": "<p>You can also do something like this:</p>\n\n<pre><code>page.fill_in :placeholder =&gt; 'Username', with: 'some_name'\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 6644408, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157284207370565/picture?type=large", "display_name": "Ian Pie Goddard", "link": "https://stackoverflow.com/users/6644408/ian-pie-goddard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1431, "favorite_count": 0, "accepted_answer_id": 51177936, "answer_count": 2, "score": 0, "last_activity_date": 1530788512, "creation_date": 1530718526, "question_id": 51177100, "link": "https://stackoverflow.com/questions/51177100/capybara-unable-to-find-field-text-entry-that-is-is-not-disabled", "title": "Capybara unable to find field (text entry) that is/is not disabled", "body": "<p>Using Capybara with Cucumber (and Selenium) I am seeing two distinctly different responses that are contradicting themselves and I am a bit lost.</p>\n\n<p>trying to:</p>\n\n<p><code>find_field('SANDBOX_FIELD_USERNAME', {disabled: true}).set(username)</code></p>\n\n<p>If disabled is set to true then I get </p>\n\n<p><code>Unable to find field \"SANDBOX_FIELD_USERNAME\" that is disabled (Capybara::ElementNotFound)</code></p>\n\n<p>But if disabled is set to false I get </p>\n\n<p><code>Unable to find field \"SANDBOX_FIELD_USERNAME\" that is not disabled (Capybara::ElementNotFound)</code></p>\n\n<p>I have looked around but can't find anyone else describing this issue so i am sure it must be something i am missing but can anyone shed some light on how this might have occurred?</p>\n"}, {"tags": ["ruby", "homebrew", "rbenv", "asdf-vm"], "comments": [{"owner": {"reputation": 6058, "user_id": 662425, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-JXe9IA2rZYM/AAAAAAAAAAI/AAAAAAAAGEg/RlIJwUwmP90/photo.jpg?sz=128", "display_name": "AnkitG", "link": "https://stackoverflow.com/users/662425/ankitg"}, "edited": false, "score": 0, "creation_date": 1530717535, "post_id": 51176819, "comment_id": 89336320, "body": "Do you have 2.5.1 installed? Did you try <code>rbenv install 2.5.1</code> ?"}, {"owner": {"reputation": 2028, "user_id": 1657377, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4iVGJ.png?s=128&g=1", "display_name": "jethroo", "link": "https://stackoverflow.com/users/1657377/jethroo"}, "edited": false, "score": 0, "creation_date": 1530717833, "post_id": 51176819, "comment_id": 89336484, "body": "you should try to update bundler as proposed here: <a href=\"https://stackoverflow.com/a/23039832/1657377\">stackoverflow.com/a/23039832/1657377</a>"}, {"owner": {"reputation": 285, "user_id": 2970050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6ebb92674288a036a7df33655b85eec0?s=128&d=identicon&r=PG&f=1", "display_name": "user2970050", "link": "https://stackoverflow.com/users/2970050/user2970050"}, "edited": false, "score": 0, "creation_date": 1530718824, "post_id": 51176819, "comment_id": 89336966, "body": "Yes - install is there.. ``` rbenv install 2.5.1 rbenv: /Users/annieogrady/.rbenv/versions/2.5.1 already exists ```"}, {"owner": {"reputation": 285, "user_id": 2970050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6ebb92674288a036a7df33655b85eec0?s=128&d=identicon&r=PG&f=1", "display_name": "user2970050", "link": "https://stackoverflow.com/users/2970050/user2970050"}, "edited": false, "score": 0, "creation_date": 1530719142, "post_id": 51176819, "comment_id": 89337131, "body": "I have tried both of the above recommendations.    The issue i think is this:  <a href=\"http://take.ms/x0hgt\" rel=\"nofollow noreferrer\">take.ms/x0hgt</a>  how/where can i get to it?"}], "answers": [{"tags": [], "owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "is_accepted": false, "score": 1, "last_activity_date": 1532434853, "creation_date": 1532434853, "answer_id": 51498503, "question_id": 51176819, "link": "https://stackoverflow.com/questions/51176819/your-ruby-version-is-2-5-0-but-your-gemfile-specified-2-5-1/51498503#51498503", "title": "Your Ruby version is 2.5.0, but your Gemfile specified 2.5.1", "body": "<p>If you use several version managers, you end up having several versions of everything. <code>asdf</code> installs in <code>~/.asdf/installs/ruby/*</code>, <code>chruby</code> <em>reads</em> from <code>~/.rubies</code> (where <code>ruby-install</code> installs them), <code>RVM</code> installs in <code>~/.rvm/rubies</code>, <code>rbenv</code> in <code>~/.rbenv/versions</code> and <code>rbfu</code> in <code>~/.rbfu/rubies</code>.</p>\n\n<p>You need to decide on one version manager and configure it so it accepts your projects' configs. </p>\n\n<p>You might go with <code>asdf</code>, set it up so it reads <code>.ruby-version</code> (see <a href=\"https://github.com/asdf-vm/asdf-ruby#ruby-version-file\" rel=\"nofollow noreferrer\">https://github.com/asdf-vm/asdf-ruby#ruby-version-file</a>), and remove all the others -- also, make sure you bundle your dependencies inside each project, otherwise you will get a very messy global.</p>\n\n<p>To help with the transition, set up a shell alias for your old version manager (for instance in bash, add <code>alias rbenv=\"echo 'Use ASDF instead'\"</code> to your shell init file -- permutate the \"old version manager\" and \"new version manager\" names as needed)</p>\n"}], "owner": {"reputation": 285, "user_id": 2970050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6ebb92674288a036a7df33655b85eec0?s=128&d=identicon&r=PG&f=1", "display_name": "user2970050", "link": "https://stackoverflow.com/users/2970050/user2970050"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1168, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540568511, "creation_date": 1530717373, "last_edit_date": 1540568511, "question_id": 51176819, "link": "https://stackoverflow.com/questions/51176819/your-ruby-version-is-2-5-0-but-your-gemfile-specified-2-5-1", "title": "Your Ruby version is 2.5.0, but your Gemfile specified 2.5.1", "body": "<p>I keep getting this error\n<code>\nYour Ruby version is 2.5.0, but your Gemfile specified 2.5.1\n</code></p>\n\n<p>I use rbenv and homebrew.   I also realized that I have .asdf working. </p>\n\n<p>Based on other Stackoverflow, I have tried:</p>\n\n<p><code>\n2.5.0 % rbenv local 2.5.1\nrbenv: version `2.5.1' not installed\n2.5.0 % ruby -v\nruby 2.5.0p0 (2017-12-25 revision 61468) [x86_64-darwin16]\n</code></p>\n\n<p>When i run this command, i get this:\n<code>\n2.5.0 .rbenv % gem env home\n/Users/annxxxx/.asdf/installs/ruby/2.5.0/lib/ruby/gems/2.5.0\n</code></p>\n\n<p>UPDATE:</p>\n\n<p>So all the commands related to Homebrew are not working because it seems my system seems to be looking for ruby in the .asdf file (this version of ruby was 2.5.0) is pointing using .asdf </p>\n\n<p>I updated .asdf to now use 2.5.1 (so now working - but my machine now has multiple copies of 2.5.1)</p>\n\n<p>My conclusion is that I have multiple copies of ruby on my machine. \n - one set for rbenv/homebrew\n - one set for .asdf</p>\n\n<p>Question:\n1- should i have both of these?\n2- I would prefer to remove .asdf ?\na- how do i do that?\nb- once I do that, what do I need to do to get rbenv/homebrew working?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rollbar"], "comments": [{"owner": {"reputation": 160, "user_id": 7376169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8800e57af965a4abcb643fec534c6595?s=128&d=identicon&r=PG&f=1", "display_name": "Jesse Gibbs", "link": "https://stackoverflow.com/users/7376169/jesse-gibbs"}, "edited": false, "score": 0, "creation_date": 1530804301, "post_id": 51176471, "comment_id": 89371592, "body": "Hi there - You can get an answer directly from the Rollbar SDK team by re-posting your question at <a href=\"https://github.com/rollbar/rollbar-gem/issues/new\" rel=\"nofollow noreferrer\">github.com/rollbar/rollbar-gem/issues/new</a>.  Rollbar provides support to all customers, regardless of subscription level."}], "owner": {"reputation": 11, "user_id": 9753613, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-x_1eKoxb9iU/AAAAAAAAAAI/AAAAAAAAABs/dtC6LpVv7r4/photo.jpg?sz=128", "display_name": "Or Keren", "link": "https://stackoverflow.com/users/9753613/or-keren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1530717703, "creation_date": 1530716191, "last_edit_date": 1530717703, "question_id": 51176471, "link": "https://stackoverflow.com/questions/51176471/ignoring-specific-errors-in-rollbar-based-on-substring", "title": "Ignoring specific errors in Rollbar based on substring", "body": "<p>I have an issue where there are 3 different errors thrown. All 3 have a certain substring in their message which indicates for me that I should ignore it. \nFor Example:</p>\n\n<pre><code>E_type1::UpdateError \nE_type2::CreationError\nE_type3::EditError\n</code></pre>\n\n<p>I would like to add to rollbar's <code>exception_level_filters</code> a lambda which ignores all three errors if they include a specific substring, something akin to this:</p>\n\n<pre><code>config.exception_level_filters.merge!({\n              'ErrorClass:MiscError' =&gt; 'ignore',\n              'E_type1::UpdateError' =&gt; lambda { |e|\n                if e.include? 'SUBSTRING'\n                  'ignore'\n                else\n                  e.rollbar_level\n                end\n              }\n            })\n</code></pre>\n\n<p>Except I would like the same lambda to be for all <strong>three</strong> errors.</p>\n\n<p>How can I go about doing this?</p>\n\n<p>Can it be DRY'd up a bit?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1530715594, "post_id": 51176051, "comment_id": 89335303, "body": "What&#39;s your input? What&#39;s the output / what&#39;s wrong with your current code?"}, {"owner": {"reputation": 541, "user_id": 1908281, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/72ee401422cc1119d04b538aeb906918?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Ainsworth", "link": "https://stackoverflow.com/users/1908281/joe-ainsworth"}, "reply_to_user": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 1, "creation_date": 1530715673, "post_id": 51176051, "comment_id": 89335339, "body": "An array of objects like so.. [#&lt;LineItem:0x7f5994288da0 @grams=0, @original_line_price=#&lt;Money:0x7f5994289220&gt;, @discounts=[], @properties_was={}, @line_price=#&lt;Money:0x7f5994289370&gt;, @variant=#&lt;Variant:0x7f59942898b0&gt;, @properties={}, @adjustments=[], @quantity=1, @source_indices={&quot;12593518772283:86c53a47791a6f36173f4ecc303&zwnj;&#8203;9ec9b&quot;=&gt;1}, @line_price_was=#&lt;Money:0x7f5994289370&gt;&gt;]"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1530716710, "post_id": 51176051, "comment_id": 89335874, "body": "Great, thanks @JoeAinsworth - I&#39;ve edited your question to include this, hope you don&#39;t mind. Keeps it nice and readable. Have also popped an answer in below. Hope it helps!"}, {"owner": {"reputation": 541, "user_id": 1908281, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/72ee401422cc1119d04b538aeb906918?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Ainsworth", "link": "https://stackoverflow.com/users/1908281/joe-ainsworth"}, "reply_to_user": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1530718931, "post_id": 51176051, "comment_id": 89337014, "body": "No problem, thanks for editing!"}], "answers": [{"comments": [{"owner": {"reputation": 541, "user_id": 1908281, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/72ee401422cc1119d04b538aeb906918?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Ainsworth", "link": "https://stackoverflow.com/users/1908281/joe-ainsworth"}, "edited": false, "score": 0, "creation_date": 1530719159, "post_id": 51176370, "comment_id": 89337148, "body": "Awesome, amazing answer! If I used group_by and assigned it to a variable and I then wanted to count the total of each product type what would be the best way to achieve this?"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 541, "user_id": 1908281, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/72ee401422cc1119d04b538aeb906918?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Ainsworth", "link": "https://stackoverflow.com/users/1908281/joe-ainsworth"}, "edited": false, "score": 0, "creation_date": 1530720296, "post_id": 51176370, "comment_id": 89337711, "body": "Welcome - glad to help. To do that, you could use something like: <code>grouped.map { |key, values| [key, values.count] }.to_h</code>. Basically, this maps the data to to an array of arrays containing key and count, then converts these to a hash. Hope that helps too!"}, {"owner": {"reputation": 541, "user_id": 1908281, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/72ee401422cc1119d04b538aeb906918?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Ainsworth", "link": "https://stackoverflow.com/users/1908281/joe-ainsworth"}, "edited": false, "score": 0, "creation_date": 1530721213, "post_id": 51176370, "comment_id": 89338053, "body": "Within each line_item object there is a &#39;quantity&#39; field and I&#39;d like to get the sum of the quantity of all line items within a category?"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 541, "user_id": 1908281, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/72ee401422cc1119d04b538aeb906918?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Ainsworth", "link": "https://stackoverflow.com/users/1908281/joe-ainsworth"}, "edited": false, "score": 0, "creation_date": 1530721530, "post_id": 51176370, "comment_id": 89338182, "body": "Try this: <code>grouped.map { |key, values| [key, values.sum(&amp;:quantity)] }.to_h</code>. You might not need the <code>&amp;</code>, I can&#39;t remember off hand."}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": true, "score": 1, "last_activity_date": 1530717835, "last_edit_date": 1530717835, "creation_date": 1530715871, "answer_id": 51176370, "question_id": 51176051, "link": "https://stackoverflow.com/questions/51176051/sorting-objects-into-a-hash-of-types/51176370#51176370", "title": "Sorting objects into a hash of types", "body": "<p>The simplest approach will be to use <a href=\"https://apidock.com/rails/Enumerable/group_by\" rel=\"nofollow noreferrer\"><code>group_by</code></a>:</p>\n\n<pre><code>Input.cart.line_items.group_by { |item| item.variant.product.product_type }\n</code></pre>\n\n<p>That should return a hash exactly as desired - the output of the evaluated block is returned as a hash key (i.e. <code>item.variant.product.product_type</code>), with the items assigned as an array of values to these keys.</p>\n\n<p>One side note - as you're querying through a few of each <code>line_item</code>'s associated records, it's worth <code>including</code> these to avoid N + 1 issues, e.g. </p>\n\n<pre><code>Input.cart.line_items.includes(variant: { product: :product_type }).group_by do |item| \n  item.variant.product.product_type\nend\n</code></pre>\n\n<hr>\n\n<p>Here's another simple way to achieve what you're after using <a href=\"https://apidock.com/rails/Enumerable/each_with_object\" rel=\"nofollow noreferrer\"><code>each_with_object</code></a>:</p>\n\n<pre><code>Input.cart.line_items.each_with_object(Hash.new { |h, k| h[k] = [] }) do |item, hash| \n  hash[item.variant.product.product_type] &lt;&lt; item\nend\n</code></pre>\n\n<p>Edit: just realised your question is tagged Ruby not Rails, in which case <code>each_with_object</code> isn't available, though you can achieve similar using <a href=\"https://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-reduce\" rel=\"nofollow noreferrer\"><code>reduce</code></a>:</p>\n\n<pre><code>Input.cart.line_items.reduce(Hash.new { |h, k| h[k] = [] }) do |hash, item| \n  hash.tap { |h| h[item.variant.product.product_type] &lt;&lt; item }\nend\n</code></pre>\n\n<p>Note the use of <code>tap</code>: <code>reduce</code> returns whatever the block evaluates to rather than the object and assigns to the first block arg (in this case <code>hash</code>). Using <code>tap</code> ensures this is always the hash.</p>\n\n<hr>\n\n<p>In terms of what's 'correct', <code>group_by</code> is there for this exact purpose - using this will give a readable approach that's been optimised for the task at hand.</p>\n\n<p>Hope that helps - let me know how you get on and if you have any questions :)</p>\n"}], "owner": {"reputation": 541, "user_id": 1908281, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/72ee401422cc1119d04b538aeb906918?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Ainsworth", "link": "https://stackoverflow.com/users/1908281/joe-ainsworth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 51176370, "answer_count": 1, "score": 1, "last_activity_date": 1530717835, "creation_date": 1530714693, "last_edit_date": 1530715758, "question_id": 51176051, "link": "https://stackoverflow.com/questions/51176051/sorting-objects-into-a-hash-of-types", "title": "Sorting objects into a hash of types", "body": "<p>I would like to loop through an array of objects and sort them into a product types hash.</p>\n\n<p>The outcome I am looking for is something like this.</p>\n\n<pre><code>{ \"Bike\" =&gt; [line_item, line_item, line_item], \"Car\" =&gt; [line_item] }\n</code></pre>\n\n<p>So far I have got the following</p>\n\n<pre><code>PRODUCT_TYPES = Hash.new []\n\nInput.cart.line_items.each do |item| \n  PRODUCT_TYPES[item.variant.product.product_type] &lt;&lt; line_item\nend\n</code></pre>\n\n<p>What is the correct way to achieve this?</p>\n\n<p>Edit: </p>\n\n<p>This is my input:</p>\n\n<pre><code>[#&lt;LineItem:0x7f5994288da0 @grams=0, @original_line_price=#&lt;Money:0x7f5994289220&gt;, @discounts=[], \n @properties_was={}, @line_price=#&lt;Money:0x7f5994289370&gt;, @variant=#&lt;Variant:0x7f59942898b0&gt;, @properties={}, \n @adjustments=[], @quantity=1, @source_indices={\"12593518772283:86c53a47791a6f36173f4ecc3039ec9b\"=&gt;1}, \n @line_price_was=#&lt;Money:0x7f5994289370&gt;&gt;]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "ruby-on-rails-5.2"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1530714407, "post_id": 51175944, "comment_id": 89334600, "body": "Mass-deleting is easy: just go to your storage provider and remove the files. But presumably you also want to do something with the references in your db? In which case you could iterate all your objects and <a href=\"http://edgeguides.rubyonrails.org/active_storage_overview.html#removing-files\" rel=\"nofollow noreferrer\">delete their fiels individually</a>."}, {"owner": {"reputation": 767, "user_id": 7985922, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f8bcc5be5da750cd58183b5ef19c89b?s=128&d=identicon&r=PG&f=1", "display_name": "Proz1g", "link": "https://stackoverflow.com/users/7985922/proz1g"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530715804, "post_id": 51175944, "comment_id": 89335405, "body": "@SergioTulentsev thank you for the answer. What if I want to reinstall the Active Storage? How can I do that? Drop the tables and then do <code>rails active_storage:install</code> ?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530716010, "post_id": 51175944, "comment_id": 89335533, "body": "What do you mean, &quot;reinstall active storage&quot;? To accomplish what?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530716122, "post_id": 51175944, "comment_id": 89335581, "body": "You could simply empty/truncate the tables, no? But that would leave the actual files intact."}, {"owner": {"reputation": 767, "user_id": 7985922, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f8bcc5be5da750cd58183b5ef19c89b?s=128&d=identicon&r=PG&f=1", "display_name": "Proz1g", "link": "https://stackoverflow.com/users/7985922/proz1g"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530716274, "post_id": 51175944, "comment_id": 89335645, "body": "I&#39;m getting some erros with the active storage, and I think I delete something important when I tried to delete an attachment, a while ago. Now every time I try to create a new object on a determined model, I get an error about: <code>Can&#39;t resolve image into URL: undefined method &quot;signed_id&quot; for nil:NilClass</code>. So, I think If I reset/drop the active storage tables tables, might work, I don&#39;t know. That&#39;s why I want to delete the tables and create new ones."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530716416, "post_id": 51175944, "comment_id": 89335713, "body": "I kinda doubt it would help (this reinstallation is not at all like, say, reinstallation of windows), but you can try.  &#175;\\_(\u30c4)_/&#175;"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530716490, "post_id": 51175944, "comment_id": 89335755, "body": "Sounds like you don&#39;t have any valuable data in your db. You could even drop the database and recreate from scratch (in which case, no need for <code>rails active_storage:install</code>)"}, {"owner": {"reputation": 767, "user_id": 7985922, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f8bcc5be5da750cd58183b5ef19c89b?s=128&d=identicon&r=PG&f=1", "display_name": "Proz1g", "link": "https://stackoverflow.com/users/7985922/proz1g"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530716705, "post_id": 51175944, "comment_id": 89335870, "body": "Yeah, I doubt it too, but I&#39;m all in now xD But maybe I will try drop the database as you said. I will tell you later if it works. Thanks ;)"}], "answers": [{"comments": [{"owner": {"reputation": 767, "user_id": 7985922, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f8bcc5be5da750cd58183b5ef19c89b?s=128&d=identicon&r=PG&f=1", "display_name": "Proz1g", "link": "https://stackoverflow.com/users/7985922/proz1g"}, "edited": false, "score": 0, "creation_date": 1530738840, "post_id": 51179019, "comment_id": 89344036, "body": "wooww! Thank you mate for the effort! It will help in the future for sure! I end up dropping the database and create a new one, and now everything works fine so I can&#39;t test your solution, sorry. But thank you anyway. Best regards ;)"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 767, "user_id": 7985922, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f8bcc5be5da750cd58183b5ef19c89b?s=128&d=identicon&r=PG&f=1", "display_name": "Proz1g", "link": "https://stackoverflow.com/users/7985922/proz1g"}, "edited": false, "score": 0, "creation_date": 1530801392, "post_id": 51179019, "comment_id": 89369446, "body": "Glad if was helpful. Thanks."}, {"owner": {"reputation": 169, "user_id": 5258689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Julfv.png?s=128&g=1", "display_name": "M-Dahab", "link": "https://stackoverflow.com/users/5258689/m-dahab"}, "edited": false, "score": 0, "creation_date": 1565801583, "post_id": 51179019, "comment_id": 101467552, "body": "That helped me to achieve something <a href=\"https://stackoverflow.com/a/57498963/5258689\">else</a>."}, {"owner": {"reputation": 3758, "user_id": 4530440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y6kMf.png?s=128&g=1", "display_name": "Kruup&#246;s", "link": "https://stackoverflow.com/users/4530440/kruup%c3%b6s"}, "edited": false, "score": 0, "creation_date": 1588246833, "post_id": 51179019, "comment_id": 108828407, "body": "To purge all Blobs O needed to run <code>ActiveStorage::Blob.all.each { |blob| blob.purge }</code> as well"}, {"owner": {"reputation": 815, "user_id": 4803880, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/zf4gI.png?s=128&g=1", "display_name": "thiebo", "link": "https://stackoverflow.com/users/4803880/thiebo"}, "edited": false, "score": 0, "creation_date": 1592996281, "post_id": 51179019, "comment_id": 110623117, "body": "Doesn&#39;t this also delete files from S3 if your app is online ?"}, {"owner": {"reputation": 508, "user_id": 2798001, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/14947023b9f1c0f3d8a07bbc8b5b9c17?s=128&d=identicon&r=PG", "display_name": "just4fun", "link": "https://stackoverflow.com/users/2798001/just4fun"}, "reply_to_user": {"reputation": 815, "user_id": 4803880, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/zf4gI.png?s=128&g=1", "display_name": "thiebo", "link": "https://stackoverflow.com/users/4803880/thiebo"}, "edited": false, "score": 1, "creation_date": 1609920994, "post_id": 51179019, "comment_id": 115968951, "body": "@thiebo Yes it will, I verified it for our app on PROD."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": true, "score": 29, "last_activity_date": 1530727569, "creation_date": 1530727569, "answer_id": 51179019, "question_id": 51175944, "link": "https://stackoverflow.com/questions/51175944/remove-all-data-from-active-storage/51179019#51179019", "title": "Remove all data from Active Storage?", "body": "<p>This question challenged me, so I did some test on my dummy app with local storage.</p>\n\n<p>I have the usual model <code>User</code> which <code>has_one_attached :avatar</code></p>\n\n<p>On local storage files are saved on <code>/storage</code> folder, under subfolders named randomly with a string of two characters.</p>\n\n<p>Informations related to files are stored in two tables:</p>\n\n<ul>\n<li><a href=\"https://github.com/rails/rails/blob/master/activestorage/app/models/active_storage/attachment.rb\" rel=\"noreferrer\">ActiveStorage::Attachment</a></li>\n<li><a href=\"https://github.com/rails/rails/blob/master/activestorage/app/models/active_storage/blob.rb\" rel=\"noreferrer\">ActiveStorage::Blob</a></li>\n</ul>\n\n<p><strong>To completely clean the two tables</strong>, I did in <code>rails console</code>:</p>\n\n<pre><code>ActiveStorage::Attachment.all.each { |attachment| attachment.purge }\n</code></pre>\n\n<p>This command deletes</p>\n\n<ul>\n<li>All record in that table: <code>ActiveStorage::Attachment.any? #=&gt; false</code></li>\n<li>All the blobs: <code>ActiveStorage::Blob.any? #=&gt; false</code></li>\n<li>All the files located under <code>/storage</code> subfolders; of course, subfolders are still there empty.</li>\n</ul>\n\n<p>The ActiveStorage still works poperly.</p>\n\n<p>I expect the same behaviour for remote storage, having the right privileges.</p>\n"}, {"tags": [], "owner": {"reputation": 524, "user_id": 415665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ch1Vc.jpg?s=128&g=1", "display_name": "jabbett", "link": "https://stackoverflow.com/users/415665/jabbett"}, "is_accepted": false, "score": 0, "last_activity_date": 1562077791, "creation_date": 1562077791, "answer_id": 56854747, "question_id": 51175944, "link": "https://stackoverflow.com/questions/51175944/remove-all-data-from-active-storage/56854747#56854747", "title": "Remove all data from Active Storage?", "body": "<p>On my local development environment, whenever I perform <code>rails db:reset</code>, I also run <code>rm -rf storage</code> to clear all previously-saved files. Rails will automatically recreate the <code>storage</code> directory the next time a file is uploaded.</p>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 6102736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9343b2bfa0898aceecc46bcdee517c8e?s=128&d=identicon&r=PG&f=1", "display_name": "Kishan Ku. Patel", "link": "https://stackoverflow.com/users/6102736/kishan-ku-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1599032459, "creation_date": 1599032459, "answer_id": 63700873, "question_id": 51175944, "link": "https://stackoverflow.com/questions/51175944/remove-all-data-from-active-storage/63700873#63700873", "title": "Remove all data from Active Storage?", "body": "<p>No doubt <code>ActiveStorage::Attachment.all.each { |attachment| attachment.purge }</code> will purge all records, but it will take long time if you lots of files.</p>\n<p>For development env, you can simply remove all the attachment records from the database and <code>remove</code> files from the <code>storage</code> folder.</p>\n<p>run <code>rails dbconsole</code> and execute the following queries to delete the attachment records.</p>\n<pre><code>delete from active_storage_attachments;\n</code></pre>\n<p>if you are storing variant in your database:</p>\n<pre><code>delete from active_storage_variant_records;\n</code></pre>\n<p>then finally,</p>\n<pre><code>delete from active_storage_blobs;\n</code></pre>\n"}], "owner": {"reputation": 767, "user_id": 7985922, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f8bcc5be5da750cd58183b5ef19c89b?s=128&d=identicon&r=PG&f=1", "display_name": "Proz1g", "link": "https://stackoverflow.com/users/7985922/proz1g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5797, "favorite_count": 1, "accepted_answer_id": 51179019, "answer_count": 3, "score": 8, "last_activity_date": 1599032459, "creation_date": 1530714288, "question_id": 51175944, "link": "https://stackoverflow.com/questions/51175944/remove-all-data-from-active-storage", "title": "Remove all data from Active Storage?", "body": "<p>I would like to know how can I delete all data from Active Storage or even resetting Active Storage? There is any way to do that? Thank you in advance!</p>\n\n<p>NOTE: I'm using Rails 5.2</p>\n"}, {"tags": ["ruby", "nginx", "sinatra"], "comments": [{"owner": {"reputation": 5168, "user_id": 7147666, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OnA81.png?s=128&g=1", "display_name": "miknik", "link": "https://stackoverflow.com/users/7147666/miknik"}, "edited": false, "score": 0, "creation_date": 1530730848, "post_id": 51174986, "comment_id": 89341664, "body": "Ruby server is bound to 127.0.0.1?"}, {"owner": {"reputation": 11008, "user_id": 1230257, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/Gcmi0.jpg?s=128&g=1", "display_name": "Danyal Sandeelo", "link": "https://stackoverflow.com/users/1230257/danyal-sandeelo"}, "reply_to_user": {"reputation": 5168, "user_id": 7147666, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OnA81.png?s=128&g=1", "display_name": "miknik", "link": "https://stackoverflow.com/users/7147666/miknik"}, "edited": false, "score": 0, "creation_date": 1530771178, "post_id": 51174986, "comment_id": 89350591, "body": "@miknik I installed nginx and ruby on a centos machine, proceeded to gem sinatra, generally i install apache for php application and I am aware of httpd.conf, do I need to set anything here?"}], "answers": [{"tags": [], "owner": {"reputation": 684, "user_id": 955366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4884f3bf89d9a09a499dd0001b63cd0c?s=128&d=identicon&r=PG", "display_name": "buren", "link": "https://stackoverflow.com/users/955366/buren"}, "is_accepted": true, "score": 1, "last_activity_date": 1530796907, "creation_date": 1530796907, "answer_id": 51192454, "question_id": 51174986, "link": "https://stackoverflow.com/questions/51174986/cannot-access-a-ruby-file-via-browser-but-can-access-it-from-command-line/51192454#51192454", "title": "Cannot access a RUBY file via browser but can access it from command line", "body": "<p>As mentioned in the comments by @miknik it's quite possible that it has to do with the servers <code>bind</code> option.</p>\n\n<p>Documented on Sintara website: <a href=\"http://sinatrarb.com/configuration.html#bind---server-hostname-or-ip-address\" rel=\"nofollow noreferrer\">http://sinatrarb.com/configuration.html#bind---server-hostname-or-ip-address</a></p>\n\n<p>This will allow connections from any host:\n</p>\n\n<pre><code>set :bind, '0.0.0.0'\n</code></pre>\n\n<p><a href=\"https://github.com/sinatra/sinatra/pull/634\" rel=\"nofollow noreferrer\">Here's the actual PR</a> for making the default bind address <code>localhost</code> rather than <code>0.0.0.0</code> which will allow connections from any host. <a href=\"https://github.com/sinatra/sinatra/pull/634\" rel=\"nofollow noreferrer\">https://github.com/sinatra/sinatra/pull/634</a></p>\n"}], "owner": {"reputation": 11008, "user_id": 1230257, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/Gcmi0.jpg?s=128&g=1", "display_name": "Danyal Sandeelo", "link": "https://stackoverflow.com/users/1230257/danyal-sandeelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 51192454, "answer_count": 1, "score": 1, "last_activity_date": 1530796907, "creation_date": 1530711201, "question_id": 51174986, "link": "https://stackoverflow.com/questions/51174986/cannot-access-a-ruby-file-via-browser-but-can-access-it-from-command-line", "title": "Cannot access a RUBY file via browser but can access it from command line", "body": "<p>I created a file with name <code>server.rb</code></p>\n\n<pre><code>require 'bundler' ; Bundler.require\nget '/hello-world' do\n  \"Hello World!\"\nend\n</code></pre>\n\n<p>when i access it as  <code>curl http://localhost:4567</code> from command line I can easily see <code>Hello World!</code> but when I access via browser as <code>http://172.16.16.14:4567</code></p>\n\n<p><code>172.16.16.14</code> is the ip of the local server and when I hit <code>http://172.16.16.14/</code> I can see the default page of nginx.</p>\n\n<p>I get </p>\n\n<pre><code>This site can\u2019t be reached\n172.16.16.14 refused to connect. \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "spree"], "comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1530712304, "post_id": 51173049, "comment_id": 89333346, "body": "Have you had a read of the docs <a href=\"https://guides.spreecommerce.org/developer/preferences.html\" rel=\"nofollow noreferrer\">here</a>? There&#39;s a lot in there that could be handy. It covers where they&#39;re stored, inheritance, initialisers among plenty of other useful areas."}], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 5483671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBIzy.jpg?s=128&g=1", "display_name": "Alexey Spiridonov", "link": "https://stackoverflow.com/users/5483671/alexey-spiridonov"}, "is_accepted": true, "score": 0, "last_activity_date": 1531488326, "creation_date": 1531488326, "answer_id": 51326205, "question_id": 51173049, "link": "https://stackoverflow.com/questions/51173049/caching-configs-in-spree-ruby-gem/51326205#51326205", "title": "Caching configs in Spree ruby gem", "body": "<p>The problem was in the caching of unicorn workers.</p>\n"}], "owner": {"reputation": 73, "user_id": 5483671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBIzy.jpg?s=128&g=1", "display_name": "Alexey Spiridonov", "link": "https://stackoverflow.com/users/5483671/alexey-spiridonov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 51326205, "answer_count": 1, "score": 0, "last_activity_date": 1531488326, "creation_date": 1530705190, "question_id": 51173049, "link": "https://stackoverflow.com/questions/51173049/caching-configs-in-spree-ruby-gem", "title": "Caching configs in Spree ruby gem", "body": "<p>When I update spree config via admin panel <code>Spree::Config[some_key] = some_value</code> it overwrites the value in a spree_preferences table, but also store previous versions of value and use all these versions.\n<code>Rails.cache.clear</code> do not help. But restart a unicorn helped me.</p>\n\n<p>Where are these versions stored? \nHow can I explicitly reset the cached values \u200b\u200bin the code?</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "simple-form"], "comments": [{"owner": {"reputation": 465, "user_id": 4849143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Vc25.gif?s=128&g=1", "display_name": "Empty Brain", "link": "https://stackoverflow.com/users/4849143/empty-brain"}, "edited": false, "score": 0, "creation_date": 1530705013, "post_id": 51172800, "comment_id": 89328651, "body": "Did you try anything yet? Please share the problem you are facing."}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 1, "creation_date": 1530705044, "post_id": 51172800, "comment_id": 89328672, "body": "If you post in the raw html that gets generated you&#39;ll probably get a lot more help from JS people, the ruby is probably putting them off"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530709571, "post_id": 51172800, "comment_id": 89331586, "body": "1. Add an event handler on change of course field 2. Check current value of course inside the callback 3. Toggle video field based on the value in (2). Details here: <a href=\"https://developer.mozilla.org/en-US/docs/Web/Events/change\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/Events/change</a>"}], "owner": {"reputation": 391, "user_id": 9118625, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/24c0b4ff94e144c7c384b51e1e632cce?s=128&d=identicon&r=PG&f=1", "display_name": "Hakeem Baba", "link": "https://stackoverflow.com/users/9118625/hakeem-baba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1532678714, "creation_date": 1530704351, "last_edit_date": 1532678714, "question_id": 51172800, "link": "https://stackoverflow.com/questions/51172800/remove-form-input-based-on-value-in-simple-form-collection", "title": "Remove form input based on value in simple form collection", "body": "<p>In my rails app I have a lesson model that belongs to a course. In the lesson new page, there is a collection of courses that can be selected for the lesson. Courses have several 'course_types' but the most important one for this question is the 'physical' course_type. This is the sample code </p>\n\n<pre><code>&lt;%= f.association :course, collection: current_academy.courses.collect \n { |u| [u.title, u.id] }, prompt: t(\"select\") %&gt;\n</code></pre>\n\n<p>On the same page, you can add a video link to the lesson </p>\n\n<pre><code>&lt;%= f.input :video, label: t(\".vimeo_link_to_video\") %&gt;\n</code></pre>\n\n<p>I want to be able to remove the video link if the course_type is 'physical'. </p>\n\n<p>In my js, I have </p>\n\n<pre><code>document.addEventListener('DOMContentLoaded',function() {\n    document.querySelector('select[name=\"lesson[course_id]\"]').onchange=changeEventHandler;\n},false);\nfunction changeEventHandler(event) {\n    if(event.target.value == \"97\" ) {\n      $(\".vimeo\").hide();\n    }\n    else {\n        $(\".vimeo\").show();\n    }\n}\n</code></pre>\n\n<p>At the moment, I have to enter the course id, to make it work. What i want is to be able to derive the course type dynamically. So essentially i would like to do something like this in javascript </p>\n\n<pre><code>if(event.target.value == course.physical? )\n</code></pre>\n\n<p>How I can remove the video form input dynamically with Javascript when the value of the course is a 'physical' course_type.</p>\n"}, {"tags": ["ruby", "selenium", "firefox", "selenium-webdriver", "jasmine"], "comments": [{"owner": {"reputation": 1893, "user_id": 1519178, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/60FYc.jpg?s=128&g=1", "display_name": "mosaad", "link": "https://stackoverflow.com/users/1519178/mosaad"}, "edited": false, "score": 0, "creation_date": 1616597241, "post_id": 51172365, "comment_id": 118052886, "body": "Hey, did you find a solution ? I have the same problem"}], "answers": [{"comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "reply_to_user": {"reputation": 932, "user_id": 7334515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b787284ccd1cfcc380a9d0e9b46ea6c4?s=128&d=identicon&r=PG&f=1", "display_name": "Yurii Halapup", "link": "https://stackoverflow.com/users/7334515/yurii-halapup"}, "edited": false, "score": 0, "creation_date": 1530712879, "post_id": 51175022, "comment_id": 89333705, "body": "You are using Ruby Selenium Binding, yes?"}, {"owner": {"reputation": 932, "user_id": 7334515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b787284ccd1cfcc380a9d0e9b46ea6c4?s=128&d=identicon&r=PG&f=1", "display_name": "Yurii Halapup", "link": "https://stackoverflow.com/users/7334515/yurii-halapup"}, "edited": false, "score": 0, "creation_date": 1530713089, "post_id": 51175022, "comment_id": 89333825, "body": "I&#39;m using selenium-webdriver gem v3.8.0"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "reply_to_user": {"reputation": 932, "user_id": 7334515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b787284ccd1cfcc380a9d0e9b46ea6c4?s=128&d=identicon&r=PG&f=1", "display_name": "Yurii Halapup", "link": "https://stackoverflow.com/users/7334515/yurii-halapup"}, "edited": false, "score": 0, "creation_date": 1530713644, "post_id": 51175022, "comment_id": 89334171, "body": "The above stated error is coming from Selenium, If page loads exceeds 60 seconds, this error would be thrown, If you include the above code in your program, this will be resolved.  Here is the same another question where I have answered the same, You may read that question and then see my answer. <a href=\"https://stackoverflow.com/questions/50431267/watir-script-occasionally-returning-netreadtimeout-error/50432231#50432231\" title=\"watir script occasionally returning netreadtimeout error\">stackoverflow.com/questions/50431267/&hellip;</a>"}], "tags": [], "owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "is_accepted": false, "score": 0, "last_activity_date": 1530712530, "last_edit_date": 1530712530, "creation_date": 1530711335, "answer_id": 51175022, "question_id": 51172365, "link": "https://stackoverflow.com/questions/51172365/netreadtimeout-netreadtimeout-using-selenium-webdriver-with-ruby/51175022#51175022", "title": "Net::ReadTimeout: Net::ReadTimeout using selenium-webdriver with Ruby", "body": "<p>The above error was thrown when the page load time exceeds 60 seconds so write the following code for page load</p>\n\n<pre><code>client = Selenium::WebDriver::Remote::Http::Default.new\nclient.read_timeout = 120 # seconds\ndriver = Selenium::WebDriver.for :firefox,http_client: client\n</code></pre>\n\n<p>Now your code would wait for 120 seconds for any page load which has been caused by <code>#click</code> and also wait to load the url by <code>goto</code> method.</p>\n"}], "owner": {"reputation": 932, "user_id": 7334515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b787284ccd1cfcc380a9d0e9b46ea6c4?s=128&d=identicon&r=PG&f=1", "display_name": "Yurii Halapup", "link": "https://stackoverflow.com/users/7334515/yurii-halapup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1589, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530712678, "creation_date": 1530702981, "last_edit_date": 1530712678, "question_id": 51172365, "link": "https://stackoverflow.com/questions/51172365/netreadtimeout-netreadtimeout-using-selenium-webdriver-with-ruby", "title": "Net::ReadTimeout: Net::ReadTimeout using selenium-webdriver with Ruby", "body": "<p>I use selenium-webdriver gem, Ruby 2.4.4, Rails 4.2 to run Jasmine tests using Firefox.<br>\nBut unfortunately in most cases I have this error <strong>: Net::ReadTimeout: Net::ReadTimeout</strong>.<br></p>\n\n<p>Logs from Selenium show me that test run, but then there is a huge delay after running tests before closing browser.<br>\nCould you please advise how to fix that? Or maybe someone had the same issue?<br>\nMaybe I can add some code fix this in jasmine_helper.rb ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "ruby-hash"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530700586, "post_id": 51171568, "comment_id": 89325770, "body": "&quot;then the ranks data is still in arrays&quot; - what if you group those arrays too?"}, {"owner": {"reputation": 195, "user_id": 9241438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/024ae9f1a10f89fe07ea3e4fc4b00803?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Schneider", "link": "https://stackoverflow.com/users/9241438/jay-schneider"}, "edited": false, "score": 0, "creation_date": 1530701802, "post_id": 51171568, "comment_id": 89326570, "body": "I solved similar problems by chaining multiple <code>group_by</code>s with <code>map</code> (to transform the values in a suitable format like another hash), <code>to_h</code> and <code>sort</code>/<code>sort_by</code>. I am not aware of a more elegant solution but curious to see one too. But as long as it works (and your query does not produce data which is too large to be processed inplace by ruby) this could be a way."}, {"owner": {"reputation": 41, "user_id": 8801891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964a7524c6088fef9a4f82224aac772d?s=128&d=identicon&r=PG&f=1", "display_name": "gibihmruby", "link": "https://stackoverflow.com/users/8801891/gibihmruby"}, "reply_to_user": {"reputation": 195, "user_id": 9241438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/024ae9f1a10f89fe07ea3e4fc4b00803?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Schneider", "link": "https://stackoverflow.com/users/9241438/jay-schneider"}, "edited": false, "score": 0, "creation_date": 1530701895, "post_id": 51171568, "comment_id": 89326632, "body": "I guess theoretically I could group by list_edition_id in the second step, but I don&#39;t know how to properly nest the statements. @JaySchneider: It would usually be up to ~300 BookRanks handled per request. Not ideal, would rather get this done in the DB, but it could work."}, {"owner": {"reputation": 517, "user_id": 4595818, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ICCSy.jpg?s=128&g=1", "display_name": "Kinjal Shah", "link": "https://stackoverflow.com/users/4595818/kinjal-shah"}, "edited": false, "score": 0, "creation_date": 1530702188, "post_id": 51171568, "comment_id": 89326839, "body": "Can you please add your query in your question?"}], "answers": [{"tags": [], "owner": {"reputation": 195, "user_id": 9241438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/024ae9f1a10f89fe07ea3e4fc4b00803?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Schneider", "link": "https://stackoverflow.com/users/9241438/jay-schneider"}, "is_accepted": false, "score": 1, "last_activity_date": 1530703991, "creation_date": 1530703991, "answer_id": 51172697, "question_id": 51171568, "link": "https://stackoverflow.com/questions/51171568/rails-ruby-turning-query-result-into-multi-level-hash/51172697#51172697", "title": "Rails/Ruby: turning query result into multi-level hash", "body": "<p>Hey @gibihmruby (nice name btw),</p>\n\n<p>so since you asked in the comments for a more specific description of my <strong>ugly</strong> approach using just <code>group_by</code> and friends, here is my proposal:</p>\n\n<pre><code>rel.group_by(&amp;:book_id).map do |k, v| \n  [k, v.group_by(&amp;:list_edition_id)]\nend.to_h\n</code></pre>\n\n<p>would yield a structure like</p>\n\n<pre><code>{2=&gt;\n  {1=&gt;\n    [#&lt;struct BookRank\n      id=2,\n      book_id=2,\n      list_edition_id=1,\n      rank_world=5,\n      rank_europe=1&gt;],\n   3=&gt;\n    [#&lt;struct BookRank\n      id=8,\n      book_id=2,\n      list_edition_id=3,\n      rank_world=1,\n      rank_europe=1&gt;]},\n 1=&gt;\n  {1=&gt;\n    [#&lt;struct BookRank\n      id=3,\n      book_id=1,\n      list_edition_id=1,\n      rank_world=6,\n      rank_europe=2&gt;],\n   3=&gt;\n    [#&lt;struct BookRank\n      id=9,\n      book_id=1,\n      list_edition_id=3,\n      rank_world=2,\n      rank_europe=2&gt;]}}\n</code></pre>\n\n<p>You then would have to map the most inner object to the attributes you want. If you are sure that the combination of <code>book_id</code> and <code>list_edition_id</code> is unique, you can get rid of the array wrapping and then map to the required attributes. You can use <a href=\"https://apidock.com/rails/ActiveRecord/Core/slice\" rel=\"nofollow noreferrer\" title=\"slice\">slice</a> for <code>ActiveRecord</code> objects. The mapping would then be</p>\n\n<pre><code>rel.group_by(&amp;:book_id).map do |book_id, grouped_by_book_id| \n  [\n    book_id, \n    grouped_by_book_id.group_by(&amp;:list_edition_id).map do |list_ed_id, grouped|\n      [list_ed_id, grouped.first.slice(:rank_world, :rank_europe)]\n    end.to_h\n  ]\nend.to_h\n</code></pre>\n\n<p>Since I didn't create a model but simply used structs (as you can see in my example above), I didn't really test the last bit by myself. But it should work like this, please comment if you found a mistake or have more questions. I still hope someone comes up with a better solution since I was looking for one myself way too often now.</p>\n\n<p>Cheers :)</p>\n\n<p><em>edit: minor corrections</em></p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1530704113, "creation_date": 1530704113, "answer_id": 51172734, "question_id": 51171568, "link": "https://stackoverflow.com/questions/51171568/rails-ruby-turning-query-result-into-multi-level-hash/51172734#51172734", "title": "Rails/Ruby: turning query result into multi-level hash", "body": "<pre><code>ranks_relation.\n  group_by(&amp;:book_id).\n  map do |id, books|\n    [id, books.map do |book|\n           [\n             book.list_edition_id,\n             {\n               \"rank_world\" =&gt; book.rank_world,\n               \"rank_europe\" =&gt; book.rank_europe\n             }\n           ]\n         end.sort_by { |_, hash| hash[\"rank_world\"] }.to_h\n    ]\n  end.to_h\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 195, "user_id": 9241438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/024ae9f1a10f89fe07ea3e4fc4b00803?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Schneider", "link": "https://stackoverflow.com/users/9241438/jay-schneider"}, "edited": false, "score": 2, "creation_date": 1530704726, "post_id": 51172792, "comment_id": 89328460, "body": "This solution is quite nice. You could be able to improve it by writing <code>hash[record.book_id][record.list_edition_id] = record.slice(:rank_world, :rank_europe)</code> which makes it really short. As far as I understood it, I don&#39;t think the keys being strings or symbols matters here."}, {"owner": {"reputation": 162, "user_id": 7627958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dH5hS.jpg?s=128&g=1", "display_name": "Rashid D R", "link": "https://stackoverflow.com/users/7627958/rashid-d-r"}, "reply_to_user": {"reputation": 195, "user_id": 9241438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/024ae9f1a10f89fe07ea3e4fc4b00803?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Schneider", "link": "https://stackoverflow.com/users/9241438/jay-schneider"}, "edited": false, "score": 0, "creation_date": 1530705379, "post_id": 51172792, "comment_id": 89328909, "body": "@JaySchneider Yea if  strings or symbols doesn&#39;t matter, then we can use slice"}], "tags": [], "owner": {"reputation": 162, "user_id": 7627958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dH5hS.jpg?s=128&g=1", "display_name": "Rashid D R", "link": "https://stackoverflow.com/users/7627958/rashid-d-r"}, "is_accepted": false, "score": 2, "last_activity_date": 1530704332, "creation_date": 1530704332, "answer_id": 51172792, "question_id": 51171568, "link": "https://stackoverflow.com/questions/51171568/rails-ruby-turning-query-result-into-multi-level-hash/51172792#51172792", "title": "Rails/Ruby: turning query result into multi-level hash", "body": "<p>Try this</p>\n\n<pre><code>record = your_record\n\nhash = {}\n\nrecord.each do |record|\n  hash[record.book_id] ||= {}\n  hash[record.book_id][record.list_edition_id] = {\n    'rank_world' =&gt; record.rank_world,\n    'rank_europe' =&gt; record.rank_europe\n  }\nend\n# hash will then be {2=&gt;{1=&gt;{\"rank_world\"=&gt;5, \"rank_europe\"=&gt;1}, 3=&gt;{\"rank_world\"=&gt;1, \"rank_europe\"=&gt;1}}, 1=&gt;{1=&gt;{\"rank_world\"=&gt;6, \"rank_europe\"=&gt;2}, 3=&gt;{\"rank_world\"=&gt;2, \"rank_europe\"=&gt;2}}}\n</code></pre>\n\n<p>This will iterate through record only once.</p>\n"}], "owner": {"reputation": 41, "user_id": 8801891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/964a7524c6088fef9a4f82224aac772d?s=128&d=identicon&r=PG&f=1", "display_name": "gibihmruby", "link": "https://stackoverflow.com/users/8801891/gibihmruby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1530731755, "creation_date": 1530700326, "last_edit_date": 1530731755, "question_id": 51171568, "link": "https://stackoverflow.com/questions/51171568/rails-ruby-turning-query-result-into-multi-level-hash", "title": "Rails/Ruby: turning query result into multi-level hash", "body": "<p>I have a query* that results in the following:</p>\n\n<pre><code>#&lt;ActiveRecord::Relation [\n    #&lt;BookRank id: 2, book_id: 2, list_edition_id: 1, rank_world: 5, rank_europe: 1&gt;,\n    #&lt;BookRank id: 3, book_id: 1, list_edition_id: 1, rank_world: 6, rank_europe: 2&gt;,\n    #&lt;BookRank id: 8, book_id: 2, list_edition_id: 3, rank_world: 1, rank_europe: 1&gt;,\n    #&lt;BookRank id: 9, book_id: 1, list_edition_id: 3, rank_world: 2, rank_europe: 2\n]&gt;\n</code></pre>\n\n<p>What I am trying to get is a hash like this:</p>\n\n<pre><code>{\n    book_id =&gt; {\n        list_edition_id =&gt; {\n            \"rank_world\" =&gt; value,\n            \"rank_europe\" =&gt; value\n        }\n    }\n}\n</code></pre>\n\n<p>(The cherry on top would be to order the hash by the rank_world value for the lowest list_edition_id, but that may be too complex perhaps.)</p>\n\n<p><code>ranks_relation.group_by(&amp;:book_id)</code> gives me a hash where the <code>book_ids</code> are keys, but then the ranks data is still in arrays:</p>\n\n<pre><code>{\n    2 =&gt; [\n            #&lt;BookRank id: 2, book_id: 2, list_edition_id: 1, rank_world: 5, rank_europe: 1&gt;,\n            #&lt;BookRank id: 8, book_id: 2, list_edition_id: 3, rank_world: 1, rank_europe: 1&gt;\n    ],\n    1 =&gt; [\n            #&lt;BookRank id: 3, book_id: 1, list_edition_id: 1, rank_world: 6, rank_europe: 2&gt;\n            #&lt;BookRank id: 9, book_id: 1, list_edition_id: 3, rank_world: 2, rank_europe: 2&gt;\n    ]\n}\n</code></pre>\n\n<p>How should I proceed?</p>\n\n<p><strong>*EDIT:</strong> This is the model structure and query. Another user asked for it:</p>\n\n<pre><code>class Book &lt; ActiveRecord::Base\n  has_many :book_ranks, dependent: :destroy\nend\n\nclass List &lt; ActiveRecord::Base\n  has_many :list_editions, dependent: :destroy\nend\n\nclass ListEdition &lt; ActiveRecord::Base\n  belongs_to :list\n  has_many :book_ranks, dependent: :destroy\nend\n\nclass BookRank &lt; ActiveRecord::Base\n  belongs_to :book\n  belongs_to :list_edition\n\n  has_one :list, through: :list_edition\nend\n</code></pre>\n\n<p>For the query, I already use two arrays with the relevant IDs for <code>Book</code> and <code>ListEdition</code>:</p>\n\n<pre><code>BookRank.where(:book_id =&gt; book_ids, :list_edition_id =&gt; list_edition_ids)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530699405, "post_id": 51170922, "comment_id": 89325051, "body": "Does not reproduce on my machine. Works as expected (although it&#39;s macos, not win 10)"}, {"owner": {"reputation": 1918, "user_id": 9224452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb0f303869bf090269cbcc46cef14991?s=128&d=identicon&r=PG&f=1", "display_name": "John Baker", "link": "https://stackoverflow.com/users/9224452/john-baker"}, "edited": false, "score": 0, "creation_date": 1530699616, "post_id": 51170922, "comment_id": 89325189, "body": "It works as expected on my machine also! Please check if you changed something in your file before running it!"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 1, "creation_date": 1530700047, "post_id": 51170922, "comment_id": 89325464, "body": "Works ok on win7 and Sierra. But try add <code>STDOUT.flush</code> before the <code>gets</code>."}, {"owner": {"reputation": 359, "user_id": 5251601, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ckF3X.jpg?s=128&g=1", "display_name": "Tanmay Vats", "link": "https://stackoverflow.com/users/5251601/tanmay-vats"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1530701065, "post_id": 51170922, "comment_id": 89326099, "body": "@iGian Thank you. It works. I added <i>STDOUT.flush</i> before <i>gets</i>"}, {"owner": {"reputation": 359, "user_id": 5251601, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ckF3X.jpg?s=128&g=1", "display_name": "Tanmay Vats", "link": "https://stackoverflow.com/users/5251601/tanmay-vats"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1530701856, "post_id": 51170922, "comment_id": 89326604, "body": "@iGian but it&#39;s so irritating. I have to add <i>STDOUT.flush</i> before every gets statement."}, {"owner": {"reputation": 162, "user_id": 7627958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dH5hS.jpg?s=128&g=1", "display_name": "Rashid D R", "link": "https://stackoverflow.com/users/7627958/rashid-d-r"}, "edited": false, "score": 0, "creation_date": 1530703237, "post_id": 51170922, "comment_id": 89327481, "body": "It worked for me. The same code"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1530706080, "post_id": 51170922, "comment_id": 89329348, "body": "@TanmayVats what does <code>STDOUT.tty?</code> return?"}], "answers": [{"tags": [], "owner": {"reputation": 4052, "user_id": 476979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e55df1cc7d5fdb4ae9bc2afcb9afe7e4?s=128&d=identicon&r=PG", "display_name": "matthewd", "link": "https://stackoverflow.com/users/476979/matthewd"}, "is_accepted": true, "score": 2, "last_activity_date": 1530703548, "creation_date": 1530703548, "answer_id": 51172547, "question_id": 51170922, "link": "https://stackoverflow.com/questions/51170922/gets-chomp-invoked-first/51172547#51172547", "title": "gets.chomp invoked first", "body": "<p>Set <code>$stdout.sync = true</code> to force everything you write to stdout (after that point) to be immediately flushed.</p>\n\n<p>By default ruby will buffer I/O if it thinks it's writing to something non-interactive, because that improves performance when you're e.g. writing to a file.</p>\n\n<p>In this case, it sounds like it's guessing wrong... but it also sounds like your application is unlikely to benefit from ever buffering, so it's safe to just override the default to always be synchronous.</p>\n"}], "owner": {"reputation": 359, "user_id": 5251601, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ckF3X.jpg?s=128&g=1", "display_name": "Tanmay Vats", "link": "https://stackoverflow.com/users/5251601/tanmay-vats"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 51172547, "answer_count": 1, "score": 1, "last_activity_date": 1530703548, "creation_date": 1530698348, "question_id": 51170922, "link": "https://stackoverflow.com/questions/51170922/gets-chomp-invoked-first", "title": "gets.chomp invoked first", "body": "<p>I am new to Ruby. I have created a file <strong><em>test.rb</em></strong> and it has following code.</p>\n\n<pre><code>puts \"Enter your First Name\"\nfname = gets.chomp\nputs \"Welcome #{fname}\"\n</code></pre>\n\n<p>And, when I run this in terminal <strong><em>ruby test.rb</em></strong> it first shows empty line (waiting from user input). There I entered my name. And then on a new line, it shows \"Enter your First Name\" then on a new line it shows \"Welcome Tanmay\"</p>\n\n<pre><code>Tanmay\nEnter your First Name\nWelcome Tanmay\n</code></pre>\n\n<p>It should show \"Enter your First Name\" before asking for input.</p>\n\n<p><strong>I am using windows 10, ruby 2.5.1p57, Rails 5.2.0</strong></p>\n\n<p>Please help.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activestorage"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1530699514, "post_id": 51170577, "comment_id": 89325126, "body": "Maybe that record doesn&#39;t own an image? Try add <code>if img.attached?</code> or something like this. Check the docs of ActiveStorage so you can see how to check whether the attachment exist."}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1530699788, "post_id": 51170577, "comment_id": 89325322, "body": "Could you share code where <code>signed_id</code> has been used?"}, {"owner": {"reputation": 767, "user_id": 7985922, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f8bcc5be5da750cd58183b5ef19c89b?s=128&d=identicon&r=PG&f=1", "display_name": "Proz1g", "link": "https://stackoverflow.com/users/7985922/proz1g"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1530700553, "post_id": 51170577, "comment_id": 89325748, "body": "Hi @iGian, to be more simple to explain I&#39;ve removed some code, but in my original code I check if there is some img or not with that helper method. But thank you for the answer ;)"}, {"owner": {"reputation": 767, "user_id": 7985922, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f8bcc5be5da750cd58183b5ef19c89b?s=128&d=identicon&r=PG&f=1", "display_name": "Proz1g", "link": "https://stackoverflow.com/users/7985922/proz1g"}, "reply_to_user": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1530700750, "post_id": 51170577, "comment_id": 89325877, "body": "@Gabbar that code was used in the vehicle controller, but I swap that <code>@image = ActiveStorage::Blob.find_signed(params[:id])</code> by <code>@image = ActiveStorage::Attachment.find(params[:image_id])</code>, like I said in the question. I think that first code destroy something in activestorage table, I dont know...Maybe there is some way to reset the tables, but I don&#39;t know how to do that."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1530701430, "post_id": 51170577, "comment_id": 89326338, "body": "Is the first vehicle &#39;s image attached when creating a vehicle? <b>|||</b> For resetting, I never tried!, but maybe from console deleting all rows of <code>ActiveStorage::Attachment</code> and <code>ActiveStorage::Blob</code>"}, {"owner": {"reputation": 767, "user_id": 7985922, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f8bcc5be5da750cd58183b5ef19c89b?s=128&d=identicon&r=PG&f=1", "display_name": "Proz1g", "link": "https://stackoverflow.com/users/7985922/proz1g"}, "edited": false, "score": 0, "creation_date": 1530717486, "post_id": 51170577, "comment_id": 89336295, "body": "I end up dropping the database, I think it is some error with it, I dont know. Thank you for the help. If someone finds out the solution, please answer it ;)"}], "owner": {"reputation": 767, "user_id": 7985922, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f8bcc5be5da750cd58183b5ef19c89b?s=128&d=identicon&r=PG&f=1", "display_name": "Proz1g", "link": "https://stackoverflow.com/users/7985922/proz1g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1047, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1530700882, "creation_date": 1530697239, "last_edit_date": 1530700882, "question_id": 51170577, "link": "https://stackoverflow.com/questions/51170577/undefined-method-signed-id-for-nilnilclass", "title": "undefined method `signed_id&#39; for nil:NilClass", "body": "<p>A while back I tried to delete attachments of the active storage so I follow the answer of this question: <a href=\"https://stackoverflow.com/questions/49515529/rails-5-2-active-storage-purging-deleting-attachements\">Rails 5.2 Active Storage purging/deleting attachements</a></p>\n\n<p>But after doing this:</p>\n\n<pre><code>def delete_image_attachment\n  @image = ActiveStorage::Blob.find_signed(params[:id])\n  @image.purge\n  redirect_to collections_url\nend \n</code></pre>\n\n<p>I start getting this error every time I entered a view with images or a link to the destroy method:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2VagO.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2VagO.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>So I change the code a bit:</p>\n\n<p><em>routes.rb</em></p>\n\n<pre><code>match 'vehicles/:id/:image_id' =&gt; 'vehicles#delete_image_attachment', :via =&gt; :delete, :as =&gt; :delete_image_attachment\n</code></pre>\n\n<p><em>vehicles_controller.rb</em></p>\n\n<pre><code>def delete_image_attachment\n  @image = ActiveStorage::Attachment.find(params[:image_id])\n  @image.purge\n  redirect_back(fallback_location: vehicles_path)\nend\n</code></pre>\n\n<p><em>in a view that I want to delete some image</em></p>\n\n<pre><code>&lt;% @vehicle.images.each do |img| %&gt;\n  &lt;%= image_tag img %&gt;\n  &lt;%= link_to delete_image_attachment_url(@vehicle, img), method: :delete, data: { confirm: 'Are you sure?' } %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>That kind of works for the vehicles that already existed, but when I create a new vehicle the same error appears in every view with an image of that vehicle.</p>\n\n<p>Does anyone knows what kind of error is this, and how can I fix it? \nAlso, there is any way to delete all data from active storage, like resetting the table?\nThank you!</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby"], "comments": [{"owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "edited": false, "score": 1, "creation_date": 1530697761, "post_id": 51170321, "comment_id": 89324000, "body": "Hey, can you share the rest of the error log? you should find it in your server logs. thanks!"}, {"owner": {"reputation": 344, "user_id": 6328506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/1ejFX.jpg?s=128&g=1", "display_name": "CaioIgnm", "link": "https://stackoverflow.com/users/6328506/caioignm"}, "reply_to_user": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "edited": false, "score": 0, "creation_date": 1530707050, "post_id": 51170321, "comment_id": 89329992, "body": "&#39;Started GET &quot;/songs&quot; for 127.0.0.1 at 2018-07-04 09:22:52 -0300 Processing by SongsController#index as <i>/</i> Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms)&#39;"}, {"owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "edited": false, "score": 0, "creation_date": 1530707471, "post_id": 51170321, "comment_id": 89330245, "body": "Thanks for sharing this part of the log! Do you have a view of the rest of the log? to be precise, the line <code>syntax error (unexpected &#39;S&#39;)</code> and the lines right after?"}, {"owner": {"reputation": 344, "user_id": 6328506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/1ejFX.jpg?s=128&g=1", "display_name": "CaioIgnm", "link": "https://stackoverflow.com/users/6328506/caioignm"}, "reply_to_user": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "edited": false, "score": 0, "creation_date": 1530707789, "post_id": 51170321, "comment_id": 89330449, "body": "That error is showing up only in Postman &quot;pretty&quot; section. In &quot;Raw&quot; section, I can see the full payload, but it does not render as json"}], "answers": [{"comments": [{"owner": {"reputation": 344, "user_id": 6328506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/1ejFX.jpg?s=128&g=1", "display_name": "CaioIgnm", "link": "https://stackoverflow.com/users/6328506/caioignm"}, "edited": false, "score": 0, "creation_date": 1530707419, "post_id": 51170720, "comment_id": 89330206, "body": "&#39;@songs &#39;is a String. So is I want it rendered in &quot;whole_song&quot; key, so I have to run render json: { whole_song: &#39;@songs &#39;}, right? Using Serialilzer or&#39; @songs.as_json&#39;, I want to have it showed as whole_song attribute. How can I create an atributte?"}, {"owner": {"reputation": 73, "user_id": 5483671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBIzy.jpg?s=128&g=1", "display_name": "Alexey Spiridonov", "link": "https://stackoverflow.com/users/5483671/alexey-spiridonov"}, "reply_to_user": {"reputation": 344, "user_id": 6328506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/1ejFX.jpg?s=128&g=1", "display_name": "CaioIgnm", "link": "https://stackoverflow.com/users/6328506/caioignm"}, "edited": false, "score": 0, "creation_date": 1530707934, "post_id": 51170720, "comment_id": 89330528, "body": "&gt; So is I want it rendered in &quot;whole_song&quot; key, so I have to run render json: { whole_song: &#39;@songs &#39;}, right? Yes. You do not need to create attribute if <code>@songs</code> is a String. <code>render json: { whole_song: @songs }</code>"}, {"owner": {"reputation": 344, "user_id": 6328506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/1ejFX.jpg?s=128&g=1", "display_name": "CaioIgnm", "link": "https://stackoverflow.com/users/6328506/caioignm"}, "edited": false, "score": 0, "creation_date": 1530708404, "post_id": 51170720, "comment_id": 89330853, "body": "It works! Thank you very much! But is it according to JSON API? I think I have to add other fields to the JSON response"}, {"owner": {"reputation": 73, "user_id": 5483671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBIzy.jpg?s=128&g=1", "display_name": "Alexey Spiridonov", "link": "https://stackoverflow.com/users/5483671/alexey-spiridonov"}, "reply_to_user": {"reputation": 344, "user_id": 6328506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/1ejFX.jpg?s=128&g=1", "display_name": "CaioIgnm", "link": "https://stackoverflow.com/users/6328506/caioignm"}, "edited": false, "score": 1, "creation_date": 1530719678, "post_id": 51170720, "comment_id": 89337416, "body": "The simplest way for you will be adding keys to hash. <code>render json: { whole_song: @songs, album: @album, artist: @artist }</code> Also, you can use local variables instead of instance variables."}], "tags": [], "owner": {"reputation": 73, "user_id": 5483671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBIzy.jpg?s=128&g=1", "display_name": "Alexey Spiridonov", "link": "https://stackoverflow.com/users/5483671/alexey-spiridonov"}, "is_accepted": true, "score": 3, "last_activity_date": 1530697680, "creation_date": 1530697680, "answer_id": 51170720, "question_id": 51170321, "link": "https://stackoverflow.com/questions/51170321/responding-json-according-to-json-api-in-controller/51170720#51170720", "title": "Responding JSON according to JSON API in controller", "body": "<p>What data class are you store in @songs?\nYou must pass the hash to render method, for example, <code>render json: { key: value }</code>.\nIf @songs is an object of your class, you must try to use Serializer or <code>@songs.as_json</code>.</p>\n"}], "owner": {"reputation": 344, "user_id": 6328506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/1ejFX.jpg?s=128&g=1", "display_name": "CaioIgnm", "link": "https://stackoverflow.com/users/6328506/caioignm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 1, "accepted_answer_id": 51170720, "answer_count": 1, "score": 0, "last_activity_date": 1530697680, "creation_date": 1530696531, "last_edit_date": 1530696881, "question_id": 51170321, "link": "https://stackoverflow.com/questions/51170321/responding-json-according-to-json-api-in-controller", "title": "Responding JSON according to JSON API in controller", "body": "<p>I created an rails api to expose my Bottl class. This class has some methods for solving the <a href=\"https://rosettacode.org/wiki/99_Bottles_of_Beer\" rel=\"nofollow noreferrer\">99Bottles</a> problem. The <code>song</code> method, for instance, returns the complete lyrics song. My intention is to return a JSON, according to <a href=\"http://jsonapi.org/\" rel=\"nofollow noreferrer\">JSON API</a> containing the response of that method.</p>\n\n<pre><code>require_relative '../bottles_logic/bottles'\n\nclass SongsController &lt; ApplicationController\n  before_action :set_song, only: [:show, :update, :destroy]\n\n  # GET /songs\n  def index\n    @songs = ::Bottl.new.song\n\n    render json: @songs\n  end\nend\n</code></pre>\n\n<p>Using Postman, I get 200 status and the request payload, however, JSON is not shown due to <code>syntax error (unexpected 'S')</code>.</p>\n\n<p>My questions are:</p>\n\n<ul>\n<li>How to return a JSON according to the JSON API in this case?</li>\n<li>Do I need to use a Serializer to format this JSON?</li>\n<li>I'd like to return the lyrics in a json entry called whole_song, so it must be an attribute, right?</li>\n</ul>\n"}, {"tags": ["ruby", "multithreading", "deadlock", "pry"], "comments": [{"owner": {"reputation": 195, "user_id": 9241438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/024ae9f1a10f89fe07ea3e4fc4b00803?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Schneider", "link": "https://stackoverflow.com/users/9241438/jay-schneider"}, "edited": false, "score": 0, "creation_date": 1530695544, "post_id": 51169731, "comment_id": 89322568, "body": "Since this only happens using wifi-wand as you explained (and not when using pry itself): Could you explain how you start wifi-wand in your case? When i just do <code>wifi-wand -s</code> and enter your code (either directly or via <code>%edit</code>) it just works (if I am not mistaken) and shows <code>[#&lt;Thread:0x00007ff82bafa200@(pry):5 dead&gt;, #&lt;Thread:0x00007ff82bafa0e8@(pry):5 dead&gt;]</code> as legit result."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 195, "user_id": 9241438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/024ae9f1a10f89fe07ea3e4fc4b00803?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Schneider", "link": "https://stackoverflow.com/users/9241438/jay-schneider"}, "edited": false, "score": 0, "creation_date": 1530695720, "post_id": 51169731, "comment_id": 89322681, "body": "Thanks, Jay. I trigger that code by calling the <code>ci</code> (connected to Internet?) command (that is, typing just <code>ci[Enter]</code> on the pry command line). I&#39;m not surprised thought that that works for you, because it has always worked for me too until today."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 195, "user_id": 9241438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/024ae9f1a10f89fe07ea3e4fc4b00803?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Schneider", "link": "https://stackoverflow.com/users/9241438/jay-schneider"}, "edited": false, "score": 0, "creation_date": 1530701184, "post_id": 51169731, "comment_id": 89326176, "body": "@JaySchneider I &quot;fixed&quot; the issue by creating a new (rvm) gemset and using it. It still seems crazy to me that it started going nuts today out of the blue, and I still wonder what happened, but it is no longer blocking me."}, {"owner": {"reputation": 195, "user_id": 9241438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/024ae9f1a10f89fe07ea3e4fc4b00803?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Schneider", "link": "https://stackoverflow.com/users/9241438/jay-schneider"}, "edited": false, "score": 0, "creation_date": 1530701520, "post_id": 51169731, "comment_id": 89326388, "body": "Ok this is good to hear. If you still want to look into this, maybe provide your OSX version in the question. Although it doesn&#39;t seem to be related (since you got it working without changes here apparently), for me it worked with 10.13.3. You could also try to remove gems from your old, broken gemset piece by piece to check for weird interactions. But anyway, I am glad you could find a solution that works for now."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 195, "user_id": 9241438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/024ae9f1a10f89fe07ea3e4fc4b00803?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Schneider", "link": "https://stackoverflow.com/users/9241438/jay-schneider"}, "edited": false, "score": 0, "creation_date": 1530705236, "post_id": 51169731, "comment_id": 89328808, "body": "I&#39;m using OS X 10.13.5. I uninstalled/reinstalled some gems one at a time in the default gemset, and the un/re-install of awesome_print fixed the problem. (!!!!!!)"}, {"owner": {"reputation": 195, "user_id": 9241438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/024ae9f1a10f89fe07ea3e4fc4b00803?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Schneider", "link": "https://stackoverflow.com/users/9241438/jay-schneider"}, "edited": false, "score": 0, "creation_date": 1530705434, "post_id": 51169731, "comment_id": 89328939, "body": "Ok, congrats. So if you find out on which side the problem most likely is caused I guess that the developers of either gem will be supportive on github. Consider posting your results as an answer to your own question? Good luck further on!"}], "answers": [{"tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": false, "score": 0, "last_activity_date": 1531216386, "creation_date": 1531216386, "answer_id": 51262188, "question_id": 51169731, "link": "https://stackoverflow.com/questions/51169731/thread-deadlock-on-simple-operations-in-pry/51262188#51262188", "title": "Thread deadlock on simple operations in pry", "body": "<p>Strangely, the problem was fixed by uninstalling and reinstalling the <code>awesome_print</code> gem. I have no idea why.</p>\n"}], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531216386, "creation_date": 1530694821, "last_edit_date": 1530701101, "question_id": 51169731, "link": "https://stackoverflow.com/questions/51169731/thread-deadlock-on-simple-operations-in-pry", "title": "Thread deadlock on simple operations in pry", "body": "<p>[Note: I \"fixed\" this problem by creating and using a new gemset. I'm still curious why the problem occurred but it is no longer blocking me.]</p>\n\n<p>[I am aware that there is a similar issue at <a href=\"https://stackoverflow.com/questions/8925001/deadlock-in-ruby-join/32241707#32241707\">Deadlock in Ruby join()</a>, but I have tried the timeout parameter suggested there and it does not help. I suspect there is a pry-specific problem not covered there.]</p>\n\n<p>I am getting the error below when running the code below, but only when  executed within a pry session. This code has not been changed and has been working fine for quite a while, and I have no idea why it's an issue just now. I am using pry version 0.11.3 on Ruby 2.5.1. Also, this code works fine when pasted into pry; it's not working in my wifi-wand application that launches pry in the context of one of its objects (<code>gem install wifi-wand</code> to install, <a href=\"https://github.com/keithrbennett/wifiwand\" rel=\"nofollow noreferrer\">https://github.com/keithrbennett/wifiwand</a> is the project page).</p>\n\n<pre><code>domains = %w(google.com  baidu.com)\nputs \"Calling dig on domains #{domains}...\" if @verbose_mode\n\nthreads = domains.map do |domain|\n  Thread.new do\n    output = `dig +short #{domain}`\n    output.length &gt; 0\n  end\nend\n\nthreads.each(&amp;:join)\n\n\n[1] pry(#&lt;WifiWand::CommandLineInterface&gt;)&gt; ci\nCalling dig on domains [\"google.com\", \"baidu.com\"]...\nfatal: No live threads left. Deadlock?\n3 threads, 3 sleeps current:0x00007fbd13d0c5a0 main thread:0x00007fbd13d0c5a0\n* #&lt;Thread:0x00007fbd14069c20 sleep_forever&gt;\n   rb_thread_t:0x00007fbd13d0c5a0 native:0x00007fff89c2b380 int:0\n   /Users/kbennett/work/wifi-wand/lib/wifi-wand/models/base_model.rb:89:in `join'\n   /Users/kbennett/work/wifi-wand/lib/wifi-wand/models/base_model.rb:89:in `each'\n   /Users/kbennett/work/wifi-wand/lib/wifi-wand/models/base_model.rb:89:in `block in connected_to_internet?'\n   /Users/kbennett/work/wifi-wand/lib/wifi-wand/models/base_model.rb:126:in `connected_to_internet?'\n   /Users/kbennett/work/wifi-wand/lib/wifi-wand/command_line_interface.rb:264:in `cmd_ci'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "sequel"], "comments": [{"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1530683659, "post_id": 51166497, "comment_id": 89316310, "body": "how are you trying to install <code>gem sequel-rails  </code> ?"}, {"owner": {"reputation": 11, "user_id": 3259675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8fe157b8144ed1a8ff718d77b11f0d6?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi", "link": "https://stackoverflow.com/users/3259675/aditi"}, "reply_to_user": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1530685701, "post_id": 51166497, "comment_id": 89317275, "body": "Yes, I have installed sequel gem by adding &#39;gem sequel-rails&#39; in Gemfile and then I am trying to run &#39;rails active_storage:install&#39; command."}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1530686470, "post_id": 51166497, "comment_id": 89317649, "body": "did you run bundle install ? did you find any error in bundle install ? please mention in question that you are getting this error when you performing ` rails active_storage:install` command"}, {"owner": {"reputation": 11, "user_id": 3259675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8fe157b8144ed1a8ff718d77b11f0d6?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi", "link": "https://stackoverflow.com/users/3259675/aditi"}, "reply_to_user": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1530688794, "post_id": 51166497, "comment_id": 89318857, "body": "I have run bundle install and there is no error for this."}], "answers": [{"tags": [], "owner": {"reputation": 649, "user_id": 1630556, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/fVmI3.jpg?s=128&g=1", "display_name": "Maciej Szlosarczyk", "link": "https://stackoverflow.com/users/1630556/maciej-szlosarczyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1539673081, "creation_date": 1539673081, "answer_id": 52829576, "question_id": 51166497, "link": "https://stackoverflow.com/questions/51166497/not-able-to-install-rails-active-storage-with-sequel-rails-gem/52829576#52829576", "title": "Not able to install rails active_storage with sequel-rails gem", "body": "<p>As far as I know, you currently cannot use Active Storage with Sequel, since it has a hard dependency on Active Record classes.</p>\n\n<p><a href=\"https://github.com/rails/rails/blob/master/activestorage/app/models/active_storage/attachment.rb#L9\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/master/activestorage/app/models/active_storage/attachment.rb#L9</a></p>\n\n<p>You need to use an alternate solution to Active Store, like <a href=\"https://github.com/shrinerb/shrine\" rel=\"nofollow noreferrer\">Shrine</a> or you need to use Active Record.</p>\n"}], "owner": {"reputation": 11, "user_id": 3259675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8fe157b8144ed1a8ff718d77b11f0d6?s=128&d=identicon&r=PG&f=1", "display_name": "Aditi", "link": "https://stackoverflow.com/users/3259675/aditi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 255, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1581277364, "creation_date": 1530682998, "last_edit_date": 1581277364, "question_id": 51166497, "link": "https://stackoverflow.com/questions/51166497/not-able-to-install-rails-active-storage-with-sequel-rails-gem", "title": "Not able to install rails active_storage with sequel-rails gem", "body": "<p>I am trying to install active_storage with rails 5.2 and I am using sequel-rails gem instead of active record.\nI am getting following error while performing 'rails active_storage:install'</p>\n\n<blockquote>\n  <p>rake aborted! Don't know how to build task\n  'app:railties:install:migrations' (see --tasks)\n  /home/edmodo/.rvm/gems/ruby-2.4.3/gems/railties-5.2.0/lib/rails/engine.rb:635:in\n  <code>block (4 levels) in &lt;class:Engine&gt;'\n  /home/edmodo/.rvm/gems/ruby-2.4.3/gems/activestorage-5.2.0/lib/tasks/activestorage.rake:7:in\n  </code>block (2 levels) in '\n  /home/edmodo/.rvm/gems/ruby-2.4.3/gems/rake-12.3.1/exe/rake:27:in\n  <code>&lt;top (required)&gt;'\n  /home/edmodo/.rvm/gems/ruby-2.4.3/bin/ruby_executable_hooks:24:in\n  </code>eval'\n  /home/edmodo/.rvm/gems/ruby-2.4.3/bin/ruby_executable_hooks:24:in\n  `' Tasks: TOP => active_storage:install:migrations</p>\n</blockquote>\n\n<p>Can anyone help me to fix this issue?</p>\n"}, {"tags": ["python", "ruby", "perl", "design-patterns", "idioms"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 2, "creation_date": 1530676344, "post_id": 51165434, "comment_id": 89314139, "body": "As a side note, none of these languages&#39; communities really goes in for the &quot;design patterns&quot; idea. Really, design patterns are repeatable workarounds for features that are missing in a language, and it&#39;s usually better to just have those features in the language. But that doesn&#39;t mean there aren&#39;t names for the languages&#39; idioms, of course."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1530676408, "post_id": 51165434, "comment_id": 89314153, "body": "At least in Python and Tcl, I&#39;ve seen the term &quot;main guard&quot; (or something &quot;<code>__main__</code> guard&quot; in Python, for obvious reasons) used for the more general, lower-level feature of guarding code from being run on import, at least in Python and Tcl. But that term applies whether you&#39;re using the idiom to write a source file that works both as a runnable script and as an importable module, or to guard against <code>multiprocessing</code> code running in child processes, or anything else. And I don&#39;t know of a cross-language name for the general idea of source-that-works-as-script-or-module (however implemented)."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1530676519, "post_id": 51165434, "comment_id": 89314177, "body": "As for your own terms, the problem with &quot;executable module&quot; and &quot;runnable module&quot; is that, at least in Python, they both seem to imply a module that&#39;s runnable via <code>-m</code> more than one that&#39;s a script-or-module. (Plus, I&#39;ve seen &quot;runnable module&quot; used to describe a module that has &quot;entry point&quot; functions that get auto-generated scripts at <code>pip install</code> time, which is yet another different thing.)"}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1530788902, "post_id": 51165931, "comment_id": 89361052, "body": "And before that name was suggested, they were called progmods (coined by tchrist?)"}, {"owner": {"reputation": 91, "user_id": 1822437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b561f4b6d93de9064e153d71bfd25d31?s=128&d=identicon&r=PG", "display_name": "hkoba", "link": "https://stackoverflow.com/users/1822437/hkoba"}, "edited": false, "score": 0, "creation_date": 1530889999, "post_id": 51165931, "comment_id": 89407491, "body": "Thank you for mentioning about the great articles for modulino. But I guess we can back further ago about this technique. Because I found <a href=\"https://gist.github.com/hkoba/37ec19af3c7a362f1288367c8f2adf91\" rel=\"nofollow noreferrer\">this post by Tim Bunce on c.l.p.m</a> from my local mail archives. So, It was publically known at least from 1995. (And I personally used similar technique in some of my perl codes written at 1999-2000)."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 17, "last_activity_date": 1530680004, "last_edit_date": 1530680004, "creation_date": 1530679662, "answer_id": 51165931, "question_id": 51165434, "link": "https://stackoverflow.com/questions/51165434/do-the-if-name-main-like-idioms-have-a-name-of-design-pattern/51165931#51165931", "title": "Do the `if __name__ == &quot;__main__&quot;: ` like idioms have a name of design pattern?", "body": "<p>In Perl, this pattern is known as a <a href=\"https://stackoverflow.com/questions/16288846/equivalent-to-perl-modulino-for-ruby-python\"><em>modulino</em></a>. I believe the term was coined by <a href=\"https://stackoverflow.com/users/2766176/brian-d-foy\">brian d foy</a> in his book <a href=\"http://shop.oreilly.com/product/9780596527242.do\" rel=\"noreferrer\"><em>Mastering Perl</em></a>. I don't often see the name applied for languages other than Perl, <a href=\"https://rosettacode.org/wiki/Modulinos\" rel=\"noreferrer\">but it does happen</a>.</p>\n\n<p>Edit to add: the name goes back earlier than that. Here's an <a href=\"http://www.drdobbs.com/scripts-as-modules/184416165\" rel=\"noreferrer\">article from 2004</a> that uses the term.</p>\n"}], "owner": {"reputation": 91, "user_id": 1822437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b561f4b6d93de9064e153d71bfd25d31?s=128&d=identicon&r=PG", "display_name": "hkoba", "link": "https://stackoverflow.com/users/1822437/hkoba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "answer_count": 1, "score": 9, "last_activity_date": 1530680004, "creation_date": 1530675832, "question_id": 51165434, "link": "https://stackoverflow.com/questions/51165434/do-the-if-name-main-like-idioms-have-a-name-of-design-pattern", "title": "Do the `if __name__ == &quot;__main__&quot;: ` like idioms have a name of design pattern?", "body": "<p>Do these following idioms (to write a module which is also an executable/runnable) have a name of design pattern?</p>\n\n<p>In Python, we can write a module as an executable too with <a href=\"https://stackoverflow.com/questions/419163/what-does-if-name-main-do\">if <strong>name</strong> == '<strong>main</strong>': idiom</a>:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>if __name__ == \"__main__\":\n    main()\n</code></pre>\n\n<p>Similar idiom can be found in <a href=\"https://stackoverflow.com/questions/4687680/what-does-if-file-0-mean-in-ruby\">Ruby</a>:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>if __FILE__ == $0\n  main()\nend\n</code></pre>\n\n<p>Also same effect can be achieved differently in <a href=\"https://stackoverflow.com/questions/1131304/in-perl-how-can-i-find-out-if-my-file-is-being-used-as-a-module-or-run-as-a-scr/1131490#1131490\">Perl</a> too:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>main() unless caller;\n</code></pre>\n\n<p>In Tcl, you may write:</p>\n\n<pre class=\"lang-tcl prettyprint-override\"><code>if {![info level] &amp;&amp; [info script] eq $::argv0} {\n    main\n}\n</code></pre>\n\n<p>Although these are implemented in different ways, they share the same goal: make single script file both a module and an executable/runnable.\nIt seems to me a design pattern. How do you call them? I personally have been called them as <em>Executable Module</em> or <em>Runnable Module</em>, but I want to know the more common name if it exists.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord", "nested-attributes"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 1, "creation_date": 1530673824, "post_id": 51165202, "comment_id": 89313730, "body": "<a href=\"http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\" rel=\"nofollow noreferrer\">ActiveRecord::NestedAttributes</a> is what you&#39;re looking for."}, {"owner": {"reputation": 313, "user_id": 1406904, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/70ae82210e956e534c6bba9eb626f175?s=128&d=identicon&r=PG", "display_name": "Guj Mil", "link": "https://stackoverflow.com/users/1406904/guj-mil"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1530674653, "post_id": 51165202, "comment_id": 89313864, "body": "@JoshBrody Can you ELI5 it to me on this example case? I&#39;m having a little trouble applying the concept on this context"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1530687033, "post_id": 51165202, "comment_id": 89317918, "body": "@JoshBrody&#39;s comment above and answer below are indeed the correct ways to implement what you need."}, {"owner": {"reputation": 313, "user_id": 1406904, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/70ae82210e956e534c6bba9eb626f175?s=128&d=identicon&r=PG", "display_name": "Guj Mil", "link": "https://stackoverflow.com/users/1406904/guj-mil"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530688100, "post_id": 51165202, "comment_id": 89318456, "body": "@JagdeepSingh Content is a table to handle the many-to-many relationship between Course and Topic. When I do Course.create and pass along that array of topics, it IS creating the proper records on the database in the Content table (I&#39;m testing it right now). None of your answers resolve my problem, or at least I don&#39;t see how yet"}], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 1406904, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/70ae82210e956e534c6bba9eb626f175?s=128&d=identicon&r=PG", "display_name": "Guj Mil", "link": "https://stackoverflow.com/users/1406904/guj-mil"}, "edited": false, "score": 0, "creation_date": 1530675547, "post_id": 51165369, "comment_id": 89314003, "body": "I don&#39;t think you understood very well my question. It is about the extra column on the &quot;Content&quot; table. I don&#39;t know how to fill it when creating Topics and Courses, other than running a query after creating the previous 2."}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "reply_to_user": {"reputation": 313, "user_id": 1406904, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/70ae82210e956e534c6bba9eb626f175?s=128&d=identicon&r=PG", "display_name": "Guj Mil", "link": "https://stackoverflow.com/users/1406904/guj-mil"}, "edited": false, "score": 1, "creation_date": 1530677759, "post_id": 51165369, "comment_id": 89314483, "body": "Yeah that&#39;s what <code>accepts_nested_attributes_for</code> permits. There&#39;s a million questions and answers about this. See <a href=\"https://stackoverflow.com/questions/44320284/edit-associated-model-by-input-form/44320724#44320724\" title=\"edit associated model by input form\">stackoverflow.com/questions/44320284/&hellip;</a> for an example of what your controller will look like."}], "tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": false, "score": 3, "last_activity_date": 1530675151, "creation_date": 1530675151, "answer_id": 51165369, "question_id": 51165202, "link": "https://stackoverflow.com/questions/51165202/create-a-ruby-object-with-has-many-through/51165369#51165369", "title": "Create a Ruby object with has_many :through", "body": "<p><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\" rel=\"nofollow noreferrer\">ActiveRecord::NestedAttributes</a> is what you're looking for.</p>\n\n<p>From the docs,</p>\n\n<blockquote>\n  <p>Nested attributes allow you to save attributes on associated records through the parent. By default nested attribute updating is turned off and you can enable it using the #accepts_nested_attributes_for class method. When you enable nested attributes an attribute writer is defined on the model.</p>\n</blockquote>\n\n<p>I can't test it right now, but you'll end up doing something like,</p>\n\n<pre><code>class Course &lt; ActiveRecord::Base\n    has_many :contents\n    has_many :topics, :through =&gt; :contents\n    accepts_nested_attribute_for :topics\nend\n\nclass Topic &lt; ActiveRecord::Base\n    has_many :contents\n    has_many :courses, :through =&gt; :contents\nend\n\nclass Content &lt; ActiveRecord::Base\n    belongs_to :courses\n    belongs_to :topics\nend\n\n\nt1 = Topic.create(name: \"Topic 1\")\nt2 = Topic.create(name: \"Topic 1\")\ncourse = Course.new(name: \"Course 1\")\ncourse.topics &lt;&lt; t1\ncourse.topics &lt;&lt; t2\n\ncourse.save!\n\nputs course.topics # ... t1, t2\n</code></pre>\n\n<p>There's a lot more you can do, including creating new child records on the parent on the fly as well. The docs \u2014 and StackOverflow \u2014 are riddled with more documentation on it :) </p>\n"}], "owner": {"reputation": 313, "user_id": 1406904, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/70ae82210e956e534c6bba9eb626f175?s=128&d=identicon&r=PG", "display_name": "Guj Mil", "link": "https://stackoverflow.com/users/1406904/guj-mil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530687108, "creation_date": 1530673392, "last_edit_date": 1530687108, "question_id": 51165202, "link": "https://stackoverflow.com/questions/51165202/create-a-ruby-object-with-has-many-through", "title": "Create a Ruby object with has_many :through", "body": "<p>Suppose I have the following models:</p>\n\n<pre><code>class Course &lt; ActiveRecord::Base\n  has_many :contents\n  has_many :topics, :through =&gt; :contents\nend\n\nclass Topic &lt; ActiveRecord::Base\n  has_many :contents\n  has_many :courses, :through =&gt; :contents\nend\n\nclass Content &lt; ActiveRecord::Base\n  belongs_to :courses\n  belongs_to :topics\nend\n</code></pre>\n\n<p>If I want to create a course and topic on the spot, I would do:</p>\n\n<pre><code>t1 = Topic.create(name: \"Topic 1\")\nt2 = Topic.create(name: \"Topic 1\")\nCourse.create(name: \"Course 1\", topics: [t1, t2])\n</code></pre>\n\n<p>That would create the <code>Content</code> record automatically. If I add an additional column to <code>Content</code>, say <code>my_column</code>, is there a way to create my course as quickly, including the new <code>Content</code> column?</p>\n\n<p>Something along the lines of:</p>\n\n<pre><code>Course.create(name: \"Course 1\", topics: [(t1, my_column: 1), (t2, my_column: 2)])\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "function", "class", "model"], "comments": [{"owner": {"reputation": 1723, "user_id": 4735914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998392dbbbd8061d2ef13ea60955633?s=128&d=identicon&r=PG&f=1", "display_name": "jdgray", "link": "https://stackoverflow.com/users/4735914/jdgray"}, "edited": false, "score": 0, "creation_date": 1530676882, "post_id": 51165100, "comment_id": 89314267, "body": "Can you paste the entire error?"}], "answers": [{"tags": [], "owner": {"reputation": 1723, "user_id": 4735914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998392dbbbd8061d2ef13ea60955633?s=128&d=identicon&r=PG&f=1", "display_name": "jdgray", "link": "https://stackoverflow.com/users/4735914/jdgray"}, "is_accepted": false, "score": 1, "last_activity_date": 1530677053, "last_edit_date": 1530677053, "creation_date": 1530676421, "answer_id": 51165512, "question_id": 51165100, "link": "https://stackoverflow.com/questions/51165100/actionviewtemplateerror-uninitialized-constant-libobject/51165512#51165512", "title": "ActionView::Template::Error (uninitialized constant `LibObject`):", "body": "<p>This can be added in your <code>config/application.rb</code> to load your <code>lib/</code> directory:</p>\n\n<pre><code>config.eager_load_paths &lt;&lt; Rails.root.join('lib')\n</code></pre>\n\n<p>Restart your local server after adding this.</p>\n\n<p>Keep in mind that if you use <a href=\"http://guides.rubyonrails.org/autoloading_and_reloading_constants.html#autoload-paths-and-eager-load-paths\" rel=\"nofollow noreferrer\">autoload_paths</a>:</p>\n\n<blockquote>\n  <p>But using autoload_paths on its own in the past (pre-rails 5) developers might configure autoload_paths to add in extra locations (e.g. lib which used to be an autoload path list years ago, but no longer is). However this is now discouraged for most purposes, as it is likely to lead to production-only errors.</p>\n</blockquote>\n"}], "owner": {"reputation": 330, "user_id": 7762525, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c45760369a13e3f48831bcc08bf0d021?s=128&d=identicon&r=PG&f=1", "display_name": "AdminDev826", "link": "https://stackoverflow.com/users/7762525/admindev826"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1530677053, "creation_date": 1530672222, "question_id": 51165100, "link": "https://stackoverflow.com/questions/51165100/actionviewtemplateerror-uninitialized-constant-libobject", "title": "ActionView::Template::Error (uninitialized constant `LibObject`):", "body": "<p>I have added a object to the lib folder.\nAnd it's working well first time, but if I modify the controller or model, then it says <code>Uninitialized constant error</code>....</p>\n\n<p>This is lib/lib_object.rb</p>\n\n<pre><code>class LibObject\n    def object_description\n    \"object description\"\n  end\nend\n</code></pre>\n\n<p>And it's calling from model.</p>\n\n<pre><code>def object_description\n  return LibObject.new.object_description\nend\n</code></pre>\n\n<p>I am not sure, why I am getting the <code>uninitialized constant error</code> after modification for some code...\nSo I need to restart the server every time(updates code) .\nThank you.</p>\n"}, {"tags": ["arrays", "ruby", "multidimensional-array"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1530677854, "post_id": 51165056, "comment_id": 89314502, "body": "Here I\u2019d go with destructuring the inner array: <code>colors.each { |color1, color2| puts color1, color2 }</code>."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1530773641, "post_id": 51165056, "comment_id": 89351797, "body": "In this particular example<code>puts colors</code> will produce the same."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 1, "creation_date": 1530773988, "post_id": 51165056, "comment_id": 89352011, "body": "&quot;How to use <code>puts</code>&quot; is not really the focus of the question, it is properly format the code when iterating nested arrays."}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1530677663, "post_id": 51165365, "comment_id": 89314459, "body": "Beware that curlies have higher precedence than <code>do</code>-<code>end</code> and they are not always behaving the same way. E.g. <code>puts [1,2,3].map { |e| e ** 2 }</code> works as expected, while <code>puts [1,2,3].map do |e| e ** 2 end</code> <b>does not</b>."}], "tags": [], "owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "is_accepted": true, "score": 1, "last_activity_date": 1530675135, "creation_date": 1530675135, "answer_id": 51165365, "question_id": 51165056, "link": "https://stackoverflow.com/questions/51165056/formatting-of-iterating-over-multi-dimensional-arrays-in-ruby/51165365#51165365", "title": "Formatting of iterating over multi-dimensional arrays in Ruby", "body": "<p>Formatting in Ruby is pretty much only convention, not really enforced as it is some other languages like Python, but still very important for the sake of readability and avoiding certain pitfalls due to the \"freedom\" of the syntax.</p>\n\n<p>As for convention, the example is \"wrong\" in the regard of indentation, the second <code>do..end</code> loop should be indented from the outer loop. </p>\n\n<p>As for <code>{..}</code> vs <code>do..end</code>, it is largely subjective, but one roll of thumb to use is this: if the statement is going to extend beyond one line or if it is nested, then prefer the <code>do..end</code> syntax. Nested use of <code>{..}</code> just looks ugly, and should be avoided. This follows the Ruby way of \"ugly code should look ugly\".</p>\n\n<p>There is some additional syntatic sugar that could be applied to avoid the use of any type of block, but that is kinda extending beyond the scope of the question.</p>\n\n<p>If I personally were to write that statement, I would prefer something like this: </p>\n\n<pre><code>  colors.each do |sub_arrays|\n    sub_arrays.each { |items| puts items }\n  end\n</code></pre>\n\n<p>or...</p>\n\n<pre><code>  colors.each do |sub_arrays|\n    sub_arrays.each do |item|\n      puts items\n    end\n  end\n</code></pre>\n\n<p>But I would definitely avoid the use of nested curly braces. I don't believe anyone would agree the keeping the same indent on the inner loop is the \"proper\" way to do that. Consecutive <code>end</code> on the same indent level just looks bad and reeks of bad formatting.</p>\n"}], "owner": {"reputation": 221, "user_id": 8395901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63eca9c9b34baf560df1412e03888efc?s=128&d=identicon&r=PG&f=1", "display_name": "Hayley Walters", "link": "https://stackoverflow.com/users/8395901/hayley-walters"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 51165365, "answer_count": 1, "score": 1, "last_activity_date": 1530675135, "creation_date": 1530671831, "question_id": 51165056, "link": "https://stackoverflow.com/questions/51165056/formatting-of-iterating-over-multi-dimensional-arrays-in-ruby", "title": "Formatting of iterating over multi-dimensional arrays in Ruby", "body": "<p>I'm new to coding in Ruby, and I have a quick question about iterating over multi-dimensional arrays. I need to know what is appropriate in terms of formatting. This is my code for iterating over the array 'colors'</p>\n\n<pre><code>colors = [['red','orange'],['purple','blue'],['yellow','green']]\ncolors.each{ |sub_arrays|\n    sub_arrays.each{ |items|\n        puts \"#{items}\"\n    }\n}\n</code></pre>\n\n<p>This is the answer code</p>\n\n<pre><code>colors = [['red', 'orange'],['purple','blue'],['yellow','green']]\n\ncolors.each do |sub_arrays|\n\nsub_arrays.each do |items|\n    puts \"#{items}\"\nend\nend\n</code></pre>\n\n<p>I'm asking if this was just a mistake on the answer sheet or if this is actually how you're supposed to format this code. Also, is it better to use keywords 'do' and 'end' as supposed to curly brackets? And should I put the element |sub_arrays| or |items| on the same line as the .each method? Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530684760, "post_id": 51164749, "comment_id": 89316795, "body": "Is it <code>FiltersController</code> or <code>GlobalFiltersController</code>?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530684805, "post_id": 51164749, "comment_id": 89316823, "body": "Please show the relevant code from controller action including any <code>before_action</code>s."}, {"owner": {"reputation": 1054, "user_id": 801343, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1181779036/picture?type=large", "display_name": "Sivakumar", "link": "https://stackoverflow.com/users/801343/sivakumar"}, "edited": false, "score": 0, "creation_date": 1530709959, "post_id": 51164749, "comment_id": 89331822, "body": "include Devise::TestHelpers"}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1530726747, "post_id": 51164749, "comment_id": 89340254, "body": "It is GlobalFiltersController but irrelevant here. All I have is before_filter :authenticate_user!"}, {"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 0, "creation_date": 1530865391, "post_id": 51164749, "comment_id": 89392881, "body": "What&#39;s the dubject on your tests? Usually in controller specs it&#39;s something like <code>subject { get :show }</code> which gives you a <code>TestResponse</code>. In your case it&#39;s probably something else? Also give us the controller source."}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530668670, "creation_date": 1530668670, "question_id": 51164749, "link": "https://stackoverflow.com/questions/51164749/authenticating-a-user-is-failing-in-rspec", "title": "Authenticating a user is failing in Rspec", "body": "<p>In factories.rb:</p>\n\n<pre><code>FactoryBot.define do\n  factory :user do\n    email { Faker::Internet.email }\n    username { Faker::FunnyName.name.downcase.gsub(/\\s/,\"_\") }\n    first_name { Faker::Name.name }\n    last_name { Faker::Name.name }\n    password \"password\"\n    password_confirmation \"password\"\n    confirmed_at Date.today\n    roles { [ FactoryBot.create(:role) ] }\n\n    factory :admin do\n      roles { [ FactoryBot.create(:admin_role) ] }\n    end\n  end\n\n  factory :role do\n    name { Faker::Job.field.downcase }\n\n    factory :admin_role do\n      name \"admin\"\n    end\n  end\n</code></pre>\n\n<p>In <code>support/controller_macros.rb</code></p>\n\n<pre><code>module ControllerMacros\n  def login_admin\n    before(:each) do\n      @request.env[\"devise.mapping\"] = Devise.mappings[:admin]\n      admin = FactoryBot.create(:admin)\n      sign_in :user, admin\n    end\n  end\nend\n</code></pre>\n\n<p>In rails_helper.rb:</p>\n\n<pre><code>  config.include Devise::Test::ControllerHelpers, type: :controller\n  config.extend ControllerMacros, type: :controller\n</code></pre>\n\n<p>In filters_controller_spec.rb:</p>\n\n<pre><code>require 'rails_helper'\n\ndescribe GlobalFiltersController, type: :controller do\n  describe \"GET #new\" do\n    context \"when model is an :ActiveRecord object\" do\n      login_admin\n\n      it \"should have a current_user\" do\n        expect(subject.current_user).to_not eq(nil)\n      end\n</code></pre>\n\n<p>However, I get following results in Rspec:</p>\n\n<pre><code>FiltersController GET #new when model is an :ActiveRecord object should have a current_user\n     Failure/Error: expect(subject.current_user).to_not eq(nil)\n\n     ArgumentError:\n       uncaught throw :warden\n</code></pre>\n\n<p>The signing in is failing. But in my app, it does not fail. I am not sure what I am doing wrong in this test. How can I get the test to pass when I am using Devise?</p>\n"}, {"tags": ["ruby", "documentation", "ri"], "comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1530694766, "post_id": 51164588, "comment_id": 89322065, "body": "You can use any 2.4 documentation. 2.4.x are just bugfixes. And documentation is also installed by RubyInstaller (search for <code>API reference</code> in the Start menu)."}], "answers": [{"tags": [], "owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "is_accepted": false, "score": 0, "last_activity_date": 1530697731, "creation_date": 1530697731, "answer_id": 51170743, "question_id": 51164588, "link": "https://stackoverflow.com/questions/51164588/ruby-2-4-4-documentation-missing/51170743#51170743", "title": "Ruby 2.4.4 documentation missing", "body": "<p>Since you are using the RubyInstaller, I will assume that you are on Windows. </p>\n\n<p>I will open this by saying that I am not 100% on this, but I am pretty condfident in this answer. </p>\n\n<ul>\n<li>The \"Use 2.4, not 2.5\" was due to errors with Ruby Gem when Ruby 2.5\nwas first released, as I happen to be on a Windows machine installing\nRuby at that exact time, and that was the reasoning at that point not\nto use the newest 2.5 version.</li>\n<li>The above mentioned reason has since been corrected.</li>\n</ul>\n\n<p>Realistically, if you are beginner, as long as you using documentation that is <em>close</em> to your version (2.0+ - 2.4-ish), it will be fine. Now obviously, and I shouldn't have to provide this disclaimer, though I will so to avoid the inevitable down-votes if I don't,  this is not 100% perfect solution and there will be very small differences. As a beginner, the likelihood of you encountering any of these differences are extremely low, low enough not to even worry about. There are missing and poorly documented sections of every language, and Ruby is no exception. Typically these are less used classes (though Ruby Fiddle is an exception that I hate how poorly documented it is), and will have no effect on your learning process as you learn the fundamentals and core of the language. </p>\n\n<p>To my recollection, the \"core\" is rather well documented, and so long as you use documentation from 2.0+ (the closer to 2.4 the better), you should be completely fine, and it is exactly the same. The \"standard library\" may be slightly more hit or miss, and your mileage may vary a little more, yet still nothing too extreme.</p>\n\n<p>So, to address the second part of your question, do not worry too hard about finding the EXACT version of documentation you are using. It may not even exist online, though the installer should have provided a CHM help file (there will be shortcut for it with the shortcuts for Ruby, IRB, etc. </p>\n\n<p>As for \"why\" ri is not working, I am not 100% sure yet again. I am on ArchLinux, and RDoc doesn't even built. Honestly, RDoc is being left by the wayside for newer (and IMO better) document engine, namely YARD. A possible solution that I do, and prefer, is to install the YARD gem right after I install Ruby:</p>\n\n<pre><code>gem install yard\n</code></pre>\n\n<p>And then set YARD to generate my documentation with this in CMD:</p>\n\n<pre><code>yard config --gem-install-yri\n</code></pre>\n\n<p>If you decide to take this route, much more can be learned about it <a href=\"https://github.com/lsegal/yard/blob/master/docs/GettingStarted.md\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>The benefit with it is that it also supports RDoc and is backwards compatible.</p>\n"}], "owner": {"reputation": 1, "user_id": 10029419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64a2f450e0f93bfc479c08cf49eb9e54?s=128&d=identicon&r=PG&f=1", "display_name": "Alpha", "link": "https://stackoverflow.com/users/10029419/alpha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 180, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530697731, "creation_date": 1530666877, "last_edit_date": 1530671172, "question_id": 51164588, "link": "https://stackoverflow.com/questions/51164588/ruby-2-4-4-documentation-missing", "title": "Ruby 2.4.4 documentation missing", "body": "<p>My question is about the ruby-doc.org documentation, but also relates to the ri documentation lookup inside ruby. </p>\n\n<p>I've already read dozens of similar questions/answers about the ri not working and giving \"nothing known\" messages and I've tried to follow some of that old advice. It just seems that those old answers aren't applicable to me.\nOne was to install the rdoc --all --ri from the ruby root directory. I tried that and it failed (unable to convert to UTF8 or something like that).\nAnother suggested that the rubyinstaller for windows installer just doesn't contain that info anymore and I should use the online documentation, which, when I goto <a href=\"http://ruby-doc.org/downloads/\" rel=\"nofollow noreferrer\">http://ruby-doc.org/downloads/</a> I discover that the version I am using (2.4.4) does not exist.</p>\n\n<p>This is odd, because the rubyinstaller site specifically says that if I'm new to Ruby(which I am), I should install 2.4.4. You'd think that if any version had good documentation, it would be that one. Instead, it seems to be missing entirely.</p>\n\n<p>This all started because I am trying to learn Ruby and am watching the Lynda.com course on Ruby by Kevin Skoglund, which was recorded many versions ago and in that course he refers to the ri command from the shell, which in my version doesn't work. see below:</p>\n\n<blockquote>\n  <p>ruby --version\n  ruby 2.4.4p296 (2018-03-28 revision 63013) [x64-mingw32]</p>\n  \n  <p>ri --version\n  ri.cmd 5.0.0</p>\n  \n  <p>ri String\n  Nothing known about String</p>\n</blockquote>\n\n<p>Now, if it's not available within ruby using ri, and I have to use online documentation, AND it's missing for my version, which happens to be the version recommended for new users, \u2026 you see my frustration.</p>\n\n<p>Here's what I really want...\n1. I want to use ri and have it work.\n2. If that's just not possible, I'd like to know where the documentation for my version is online, because it's not where it's supposed to be.</p>\n\n<p>Any help is appreciated. If it involves installing anything, letting me know HOW to do that is also appreciated. As I mentioned, I'm new.</p>\n"}, {"tags": ["ruby", "string"], "comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1530660831, "post_id": 51163946, "comment_id": 89311344, "body": "Aside: what is the max value of <code>i</code>? What does this mean about <code>letters[i+1]</code>? Trivially, input of &quot;abc&quot; will fail."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1530675523, "post_id": 51163946, "comment_id": 89314000, "body": "<code>arr = word.chars; arr == arr.sort </code>"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1530683809, "post_id": 51163946, "comment_id": 89316371, "body": "@SagarPandya : This would just yield an array of the letters in <i>word</i>, in sorted order."}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 2, "creation_date": 1530686142, "post_id": 51163946, "comment_id": 89317487, "body": "@user1934428 It does not &#39;just yield [a sorted array]&#39;, consider this slight variation for clarity: <code>arr = word.chars; already_sorted = (arr == arr.sort)</code>. That is, the code is <i>not</i> assigning the result of arr.sort.."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1530698521, "post_id": 51163946, "comment_id": 89324530, "body": "Arrrgh! I missed the double-equal sign. You&#39;re right."}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1530820419, "post_id": 51164032, "comment_id": 89379561, "body": "The second solution proposed here is the best as it does not create any unnecessary intermediary objects although a <code>downcase</code> would eb recommended unless <code>&#39;abC&#39;</code> is not considered &quot;ordered&quot; . However the first solution could be shortened as well and avoid the <code>Array</code> such that <code>(0...word.length).all? { |i|     word[i]&lt;=word[i+1] }</code> but same issue as above"}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1530826071, "post_id": 51164032, "comment_id": 89381902, "body": "Yeah, first solution is only there because it&#39;s OP&#39;s code with minimal changes to get it working. <code>downcase</code> would also be a good idea, but the prompt stated to assume only lowercase characters, so un-necessary in this example"}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 3, "last_activity_date": 1530661720, "last_edit_date": 1530661720, "creation_date": 1530660752, "answer_id": 51164032, "question_id": 51163946, "link": "https://stackoverflow.com/questions/51163946/finding-whether-a-string-is-an-alphabetically-ordered-word-in-ruby/51164032#51164032", "title": "Finding whether a string is an alphabetically ordered word in Ruby?", "body": "<p>The <code>return</code> is returning from the entire method. You need to just \"return\" from the block, by not specifying <code>return</code> and just relying on the last line of the block being the returned value, so like:</p>\n\n<pre><code>def ordered_word?(word)\n  letters=word.split(\"\")\n  (0..(letters.length-1)).all? do |i|\n    letters[i]&lt;=letters[i+1]\n  end\nend\n</code></pre>\n\n<p>Though you could use some of the convenient methods of ruby to shorten this to:</p>\n\n<pre><code>def ordered_word?(word)\n  word.each_char.each_cons(2).all? do |first, second|\n    first &lt;= second\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1530684613, "post_id": 51165435, "comment_id": 89316726, "body": "Good idea! I think you need <code>.split(&#47;&#47;)</code> in the first example. Or <code>.char</code> as the second."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1530688892, "post_id": 51165435, "comment_id": 89318912, "body": "@iGian Good call, cut-paste error from my &quot;first-draft&quot;, lol. Fixed the first example to match the second example that I intended."}], "tags": [], "owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "is_accepted": false, "score": 3, "last_activity_date": 1530688814, "last_edit_date": 1530688814, "creation_date": 1530675834, "answer_id": 51165435, "question_id": 51163946, "link": "https://stackoverflow.com/questions/51163946/finding-whether-a-string-is-an-alphabetically-ordered-word-in-ruby/51165435#51165435", "title": "Finding whether a string is an alphabetically ordered word in Ruby?", "body": "<p>A very simple comparison would be this:</p>\n\n<pre><code>word.chars.sort.join == word\n</code></pre>\n\n<p>What this does is takes the characters of the string as an array, sorts them alphanumerically, and then joins them back together into a string. This string is then compared to the original string, and if it is equal, then no reordering was done and the string was already ordered.</p>\n\n<p>If you wanted to extend this as a method to the <code>String</code> class:</p>\n\n<pre><code>class String\n\n  def ordered?\n    chars.sort.join == self\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 9813399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a11e1024b0e9963eec46721b4f0021cb?s=128&d=identicon&r=PG&f=1", "display_name": "emwhy", "link": "https://stackoverflow.com/users/9813399/emwhy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1530688814, "creation_date": 1530660028, "question_id": 51163946, "link": "https://stackoverflow.com/questions/51163946/finding-whether-a-string-is-an-alphabetically-ordered-word-in-ruby", "title": "Finding whether a string is an alphabetically ordered word in Ruby?", "body": "<p>The prompt is to write a method, ordered_word?, which returns whether the letters in a word occur in alphabetical order. Assume the string contains only lowercase letters with no spaces or punctuation. My solution is the following: </p>\n\n<pre><code>def ordered_word?(word)\n  letters=word.split(\"\")\n  (0..(letters.length-1)).all? do |i|\n    if letters[i]&lt;=letters[i+1]\n      return true\n    end\n  end \nend\n</code></pre>\n\n<p>However, it doesn't pass all my test cases and I don't understand why. The argument \"amz\" and \"zma\" produce expected output, but if it's something like \"abcdgfe\", it's still returning true even though that is not an ordered word.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 26589, "user_id": 1032785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30816b3d787c2bd9d6f036318304f225?s=128&d=identicon&r=PG", "display_name": "jordanm", "link": "https://stackoverflow.com/users/1032785/jordanm"}, "edited": false, "score": 2, "creation_date": 1530671815, "post_id": 51163676, "comment_id": 89313359, "body": "Run <code>ldd &#47;usr&#47;lib&#47;ruby&#47;2.3.0&#47;x86_64-linux&#47;openssl.so</code>. You are probably missing libraries that the shared objects are linked against."}, {"owner": {"reputation": 636, "user_id": 6115544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a92f1fb48245ff57e3aed1b9e43019c7?s=128&d=identicon&r=PG&f=1", "display_name": "arminfro", "link": "https://stackoverflow.com/users/6115544/arminfro"}, "reply_to_user": {"reputation": 26589, "user_id": 1032785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30816b3d787c2bd9d6f036318304f225?s=128&d=identicon&r=PG", "display_name": "jordanm", "link": "https://stackoverflow.com/users/1032785/jordanm"}, "edited": false, "score": 0, "creation_date": 1530689212, "post_id": 51163676, "comment_id": 89319088, "body": "Thank you for your comment jordanm, that pointed me in the right direction :)"}], "answers": [{"comments": [{"owner": {"reputation": 26589, "user_id": 1032785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30816b3d787c2bd9d6f036318304f225?s=128&d=identicon&r=PG", "display_name": "jordanm", "link": "https://stackoverflow.com/users/1032785/jordanm"}, "edited": false, "score": 1, "creation_date": 1530728474, "post_id": 51168060, "comment_id": 89340800, "body": "Gem dependencies can not expressly depend on system packages/libraries, but they will fail to compile in cases when the relevant system libraries don&#39;t exist. I suspect that openssl was installed when you setup the ruby environment but was removed later."}, {"owner": {"reputation": 636, "user_id": 6115544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a92f1fb48245ff57e3aed1b9e43019c7?s=128&d=identicon&r=PG&f=1", "display_name": "arminfro", "link": "https://stackoverflow.com/users/6115544/arminfro"}, "reply_to_user": {"reputation": 26589, "user_id": 1032785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30816b3d787c2bd9d6f036318304f225?s=128&d=identicon&r=PG", "display_name": "jordanm", "link": "https://stackoverflow.com/users/1032785/jordanm"}, "edited": false, "score": 0, "creation_date": 1530781554, "post_id": 51168060, "comment_id": 89356370, "body": "You&#39;re right, I was cleaning up my system and removed some packages. <code>openssl-1.0</code> was properly removed, as a dependency of a package I removed. Thanks for the explanation :)"}], "tags": [], "owner": {"reputation": 636, "user_id": 6115544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a92f1fb48245ff57e3aed1b9e43019c7?s=128&d=identicon&r=PG&f=1", "display_name": "arminfro", "link": "https://stackoverflow.com/users/6115544/arminfro"}, "is_accepted": true, "score": 4, "last_activity_date": 1530689983, "last_edit_date": 1530689983, "creation_date": 1530689168, "answer_id": 51168060, "question_id": 51163676, "link": "https://stackoverflow.com/questions/51163676/loaderror-cannot-open-shared-object-file-file-is-present-but-it-says-no-suc/51168060#51168060", "title": "LoadError - cannot open shared object file - file is present, but it says no such file", "body": "<p>Thanks to jordanm's comment, I was able to solve the issue!</p>\n\n<p>The issue was related to <code>openssl</code>. <code>ldd</code> prints shared object dependencies and revealed the missing libraries.</p>\n\n<pre><code>ldd /usr/lib/ruby/2.3.0/x86_64-linux/openssl.so\n...\nlibssl.so.1.0.0 =&gt; not found\nlibcrypto.so.1.0.0 =&gt; not found\n...\n</code></pre>\n\n<p>After installing <code>openssl-1.0</code> package, (while <code>openssl</code> v1.1.0 package was installed), the output of the same command looks better:</p>\n\n<pre><code>libssl.so.1.0.0 =&gt; /usr/lib/libssl.so.1.0.0 (0x00007faddac8f000)\nlibcrypto.so.1.0.0 =&gt; /usr/lib/libcrypto.so.1.0.0 (0x00007fadda814000)\n</code></pre>\n\n<p>and now, I'm able to <code>require 'openssl'</code> as well as generating a new <code>rails</code> project.</p>\n\n<p>But after all, shouldn't ruby complain about missing packages, or should <code>openssl-1.0</code> be at least a dependency of <code>rails</code>?</p>\n"}], "owner": {"reputation": 636, "user_id": 6115544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a92f1fb48245ff57e3aed1b9e43019c7?s=128&d=identicon&r=PG&f=1", "display_name": "arminfro", "link": "https://stackoverflow.com/users/6115544/arminfro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1641, "favorite_count": 0, "accepted_answer_id": 51168060, "answer_count": 1, "score": 1, "last_activity_date": 1530689983, "creation_date": 1530657760, "question_id": 51163676, "link": "https://stackoverflow.com/questions/51163676/loaderror-cannot-open-shared-object-file-file-is-present-but-it-says-no-suc", "title": "LoadError - cannot open shared object file - file is present, but it says no such file", "body": "<p>Ruby comes up with <code>LoadErrors</code> I do not understand. It complains about opening a shared object file, while it's present.</p>\n\n<pre><code>irb(main):001:0&gt; require 'openssl'\nLoadError: libssl.so.1.0.0: cannot open shared object file: No such file or directory - /usr/lib/ruby/2.3.0/x86_64-linux/openssl.so\n    from /usr/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /usr/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /usr/lib/ruby/2.3.0/openssl.rb:13:in `&lt;top (required)&gt;'\n    from /usr/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /usr/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n</code></pre>\n\n<p>but <code>ls /usr/lib/ruby/2.3.0/x86_64-linux/openssl.so</code><br>\nreturns the file <code>/usr/lib/ruby/2.3.0/x86_64-linux/openssl.so</code></p>\n\n<p>Load Path:</p>\n\n<pre><code>irb(main):001:0&gt; pp $LOAD_PATH\n[\"/usr/lib/ruby/site_ruby/2.3.0\",\n \"/usr/lib/ruby/site_ruby/2.3.0/x86_64-linux\",\n \"/usr/lib/ruby/site_ruby\",\n \"/usr/lib/ruby/vendor_ruby/2.3.0\",\n \"/usr/lib/ruby/vendor_ruby/2.3.0/x86_64-linux\",\n \"/usr/lib/ruby/vendor_ruby\",\n \"/usr/lib/ruby/2.3.0\",\n \"/usr/lib/ruby/2.3.0/x86_64-linux\"]\n</code></pre>\n\n<p>Another example, with the <code>rails</code> gem installed, generating a new project fails with following <code>LoadError</code>.</p>\n\n<pre><code>/usr/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:120:in `require': libcrypto.so.1.0.0: cannot open shared object file: No such file or directory - /usr/lib/ruby/2.3.0/x86_64-linux/digest/md5.so (LoadError)\n</code></pre>\n\n<p>And again, doing <code>ls /usr/lib/ruby/2.3.0/x86_64-linux/digest/md5.so</code> shows the presence of the file.</p>\n\n<p>my ruby version is <code>ruby 2.3.1p112</code>.\nIn case you wonder, <code>uname -m</code> returns <code>x86_64</code>.</p>\n\n<p>I must miss something obvious, I guess. Any hints popping up are much appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4797, "user_id": 177154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f719bc9e36272f09feca03728b4a160c?s=128&d=identicon&r=PG", "display_name": "draganstankovic", "link": "https://stackoverflow.com/users/177154/draganstankovic"}, "edited": false, "score": 0, "creation_date": 1530673723, "post_id": 51163228, "comment_id": 89313702, "body": "What is addition_count?"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1530700556, "post_id": 51163228, "comment_id": 89325749, "body": "How can you let the algorithm know that <code>german shepherd</code> is a DOG, for example?"}], "answers": [{"comments": [{"owner": {"reputation": 172, "user_id": 5786189, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/49541c0a9e94e83417c68b03eb915151?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/5786189/user"}, "edited": false, "score": 0, "creation_date": 1530822688, "post_id": 51165430, "comment_id": 89380543, "body": "Very nice! Thank you"}], "tags": [], "owner": {"reputation": 4797, "user_id": 177154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f719bc9e36272f09feca03728b4a160c?s=128&d=identicon&r=PG", "display_name": "draganstankovic", "link": "https://stackoverflow.com/users/177154/draganstankovic"}, "is_accepted": true, "score": 1, "last_activity_date": 1530770909, "last_edit_date": 1530770909, "creation_date": 1530675789, "answer_id": 51165430, "question_id": 51163228, "link": "https://stackoverflow.com/questions/51163228/simplify-code-that-adds-dictionary-value-with-highest-count-to-an-array/51165430#51165430", "title": "Simplify code that adds dictionary value with highest count to an array", "body": "<p>Something like this will probably be the way to do it:</p>\n\n<p><em>Simplified code:</em></p>\n\n<pre><code>relevant_species = [DOG, CAT, MOUSE]\n  .map { |animal| species_count(animals, animal) }\n  .sort { |a, b| a[:count].to_i &lt;=&gt; b[:count].to_i }\n  .last\n</code></pre>\n\n<p><em>OR step by step:</em></p>\n\n<pre><code># returns array of [{ species: 'dog', count: 3 }, ... ]\nspecies_counts = [DOG, CAT, MOUSE].map { |animal| species_count(animals, animal) }\n\n# sorts the array based on the count value. to_i is to account for nils\nsorted_species_counts = species_counts.sort { |a, b| a[:count].to_i &lt;=&gt; b[:count].to_i }\n\n# returns the last element (with the highest count value) to be assigned to relevant species\nrelevant_species = sorted_species_counts.last\n</code></pre>\n"}], "owner": {"reputation": 172, "user_id": 5786189, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/49541c0a9e94e83417c68b03eb915151?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/5786189/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 51165430, "answer_count": 1, "score": 0, "last_activity_date": 1530822718, "creation_date": 1530654573, "last_edit_date": 1530822718, "question_id": 51163228, "link": "https://stackoverflow.com/questions/51163228/simplify-code-that-adds-dictionary-value-with-highest-count-to-an-array", "title": "Simplify code that adds dictionary value with highest count to an array", "body": "<p>I have an array of individual animals, and an array of relevant species. I want to add the higher of cats and dogs to my array of relevant species. The array of individual animals may not have the requested species, in which case species_count returns <code>{}</code>.</p>\n\n<p><code>species_count</code> takes in an array of animals and groups them by species. Example: </p>\n\n<pre><code>animals = ['chihuaha', 'german_shepherd', 'golden_retriever', 'tabby cat', 'siamese cat'}\nspecies_count(animals, DOG) = { species: 'dog', count: 3 }\nspecies_count(animals, CAT) = { species: 'cat', count: 3 }\nspecies_count(animals, MOUSE) = {}\n</code></pre>\n\n<p>The below can be improved, I think. Ruby has all sorts of magical methods that surprise me. </p>\n\n<pre><code>dogs = species_count(animals, DOG)\ndog_count = dogs.fetch(:count, 0)\ncats = species_count(animals, CAT)\ncat_count = cats.fetch(:count, 0)\n\nif dog_count &gt;= cat_count &amp;&amp; dog_count &gt;= 3\n    relevant_species &lt;&lt; dogs\nelsif cat_count &gt;= 3\n    relevant_species &lt;&lt; cats\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "google-cloud-speech"], "comments": [{"owner": {"reputation": 2028, "user_id": 1657377, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4iVGJ.png?s=128&g=1", "display_name": "jethroo", "link": "https://stackoverflow.com/users/1657377/jethroo"}, "edited": false, "score": 1, "creation_date": 1530711496, "post_id": 51162975, "comment_id": 89332833, "body": "your gem is not yet ready to be used for rails 5.x since it needs <code>activesupport (&lt; 5.0, &gt;= 3.2) </code> usually something like this is stated on the gems repo (or might not if its not maintained anymore)"}], "answers": [{"tags": [], "owner": {"reputation": 361, "user_id": 9458290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d5e6f8d434664423d1d19784db962b?s=128&d=identicon&r=PG&f=1", "display_name": "Jinjun", "link": "https://stackoverflow.com/users/9458290/jinjun"}, "is_accepted": true, "score": 1, "last_activity_date": 1532720729, "creation_date": 1532720729, "answer_id": 51564611, "question_id": 51162975, "link": "https://stackoverflow.com/questions/51162975/ruby-on-rails-how-to-deal-with-gem-dependences/51564611#51564611", "title": "Ruby on Rails - how to deal with gem dependences", "body": "<p>Your gem is not yet ready to be used for rails 5.x since it needs activesupport (&lt; 5.0, >= 3.2) usually something like this is stated on the gems repo (or might not if its not maintained anymore)</p>\n"}], "owner": {"reputation": 65, "user_id": 4649722, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HNb6Gnjo-8E/AAAAAAAAAAI/AAAAAAAAARg/2nT2cS-Bm-g/photo.jpg?sz=128", "display_name": "KIT", "link": "https://stackoverflow.com/users/4649722/kit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 51564611, "answer_count": 1, "score": 0, "last_activity_date": 1532720729, "creation_date": 1530653061, "last_edit_date": 1530653320, "question_id": 51162975, "link": "https://stackoverflow.com/questions/51162975/ruby-on-rails-how-to-deal-with-gem-dependences", "title": "Ruby on Rails - how to deal with gem dependences", "body": "<p>Are there any rules how to solve problems with incompatible gems?</p>\n\n<p>As an example I am showing problem that I currently have after adding <code>gem 'google-cloud-speech'</code></p>\n\n<p>I got error: </p>\n\n<pre><code>Bundler could not find compatible versions for gem\n\"activesupport\":   In Gemfile:\n  gcloud_storage was resolved to 0.0.3, which depends on\n    gcloud (= 0.7.2) was resolved to 0.7.2, which depends on\n      google-api-client (~&gt; 0.8.3) was resolved to 0.8.7, which depends on\n        activesupport (&lt; 5.0, &gt;= 3.2)\n\n  jbuilder (~&gt; 2.5) was resolved to 2.7.0, which depends on\n    activesupport (&gt;= 4.2.0)\n\n  jbuilder (~&gt; 2.5) was resolved to 2.7.0, which depends on\n    activesupport (&gt;= 4.2.0)\n\n  jbuilder (~&gt; 2.5) was resolved to 2.7.0, which depends on\n    activesupport (&gt;= 4.2.0)\n\n  rails (~&gt; 5.1.6) was resolved to 5.1.6, which depends on\n    activesupport (= 5.1.6)\n\n  rails (~&gt; 5.1.6) was resolved to 5.1.6, which depends on\n    activesupport (= 5.1.6)\n\n  rails (~&gt; 5.1.6) was resolved to 5.1.6, which depends on\n    activesupport (= 5.1.6)\n\n  rails (~&gt; 5.1.6) was resolved to 5.1.6, which depends on\n    activesupport (= 5.1.6)\n\n  rails (~&gt; 5.1.6) was resolved to 5.1.6, which depends on\n    activesupport (= 5.1.6)\n\n  rails (~&gt; 5.1.6) was resolved to 5.1.6, which depends on\n    activesupport (= 5.1.6)\n\n  rails (~&gt; 5.1.6) was resolved to 5.1.6, which depends on\n    activesupport (= 5.1.6)\n\n  rails (~&gt; 5.1.6) was resolved to 5.1.6, which depends on\n    sprockets-rails (&gt;= 2.0.0) was resolved to 3.2.1, which depends on\n      activesupport (&gt;= 4.0) Bundler could not find compatible versions for gem \"faraday\":   In Gemfile:\n  gcloud_storage was resolved to 0.0.3, which depends on\n    faraday (= 0.9.0)\n\n  gcloud_storage was resolved to 0.0.3, which depends on\n    gcloud (= 0.7.2) was resolved to 0.7.2, which depends on\n      grpc (~&gt; 0.13.1) was resolved to 0.13.1, which depends on\n        googleauth (~&gt; 0.5.1) was resolved to 0.5.2, which depends on\n          faraday (~&gt; 0.12) Bundler could not find compatible versions for gem \"grpc\":   In Gemfile:\n  gcloud_storage was resolved to 0.0.3, which depends on\n    gcloud (= 0.7.2) was resolved to 0.7.2, which depends on\n      grpc (~&gt; 0.13.1)\n\n  google-cloud-speech was resolved to 0.20.0, which depends on\n    grpc (~&gt; 1.0)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "minitest"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1530644738, "post_id": 51161229, "comment_id": 89306252, "body": "You could read that file back, extract the files and compare file contents."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530645828, "post_id": 51161229, "comment_id": 89306637, "body": "Further to @Sergio&#39;s suggestion (<code>str == unzip(zip(str))</code> ?), If it&#39;s just the <code>zip</code> and <code>unzip</code> methods you wish to test you could apply that test to one or more ranomly-generated large files"}, {"owner": {"reputation": 4527, "user_id": 29326, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/93d7b04645374b59787799903c9aafff?s=128&d=identicon&r=PG", "display_name": "Tomek", "link": "https://stackoverflow.com/users/29326/tomek"}, "edited": false, "score": 0, "creation_date": 1530646663, "post_id": 51161229, "comment_id": 89306948, "body": "Wonder if instead of testing the contents (which I feel tests more the implementation of rubyzip) I wonder if I can instead return an OutputStream and test things like number of files in the zip, names of those files, and somehow check for a non-zero size?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1530650372, "post_id": 51161229, "comment_id": 89308380, "body": "I would argue that testing the number of files, their names and that they have non-zero size tells you nothing if you aren&#39;t able to unzip the files anymore. On the other hand, when you are able to unzip the files do you really care about how they are stored in the output stream?"}], "owner": {"reputation": 4527, "user_id": 29326, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/93d7b04645374b59787799903c9aafff?s=128&d=identicon&r=PG", "display_name": "Tomek", "link": "https://stackoverflow.com/users/29326/tomek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 522, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1530643828, "creation_date": 1530643828, "question_id": 51161229, "link": "https://stackoverflow.com/questions/51161229/how-would-you-write-a-test-for-zip-file-generation", "title": "How would you write a test for zip file generation?", "body": "<p>I'm working on a service/workflow that takes a number of data files  associated with a <code>Project</code> and creates a zip of them. These files are managed by Carrierwave. I am using the native Rails TestCase/Minitest and was wondering what is the best way to test the generation of the zip file?</p>\n\n<p>At the moment, the code that would grab the files and write them to a zip looks something like:</p>\n\n<pre><code>def generate_zip(project)\n  project_tracks = project.project_tracks\n\n  # base temp dir\n  temp_dir = Dir.mktmpdir\n\n  # path for zip we are about to create\n  zip_path = File.join(temp_dir, \"#{project.name}.zip\")\n\n  Zip::ZipOutputStream.open(zip_path) do |zos|\n    project_tracks.each do |project_track|\n      path = project_track.track.path\n      zos.put_next_entry(path)\n      zos.write project_track.track.file.read\n    end\n  end\nend\n</code></pre>\n\n<p>Initially my thought was to create the zip files and compare the bytes? Was wondering if this was a good idea or if there is a better/faster way to test this logic.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "searchkick", "scopes"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530642876, "post_id": 51160872, "comment_id": 89305418, "body": "<code>range</code> argument in your scopes <code>in_price_range</code> and <code>in_ratings_range</code> is not being used properly. If you use only <code>range.first</code> in your query, then why passing a whole range?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530642959, "post_id": 51160872, "comment_id": 89305449, "body": "Can you show the exact error message?"}, {"owner": {"reputation": 38, "user_id": 7300099, "user_type": "registered", "profile_image": "https://graph.facebook.com/1501026983244282/picture?type=large", "display_name": "Gabriel Henry J. Lopez", "link": "https://stackoverflow.com/users/7300099/gabriel-henry-j-lopez"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530709145, "post_id": 51160872, "comment_id": 89331311, "body": "The code is currently like that because I&#39;m planning on changing it into an actual range in the future, but for now I&#39;m trying to get it to work"}, {"owner": {"reputation": 38, "user_id": 7300099, "user_type": "registered", "profile_image": "https://graph.facebook.com/1501026983244282/picture?type=large", "display_name": "Gabriel Henry J. Lopez", "link": "https://stackoverflow.com/users/7300099/gabriel-henry-j-lopez"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530709186, "post_id": 51160872, "comment_id": 89331343, "body": "I&#39;m getting this error message:  undefined method `with_all_categories&#39; for #&lt;Searchkick::Results:0x00007f4521074c30&gt; @JagdeepSingh"}], "answers": [{"comments": [{"owner": {"reputation": 38, "user_id": 7300099, "user_type": "registered", "profile_image": "https://graph.facebook.com/1501026983244282/picture?type=large", "display_name": "Gabriel Henry J. Lopez", "link": "https://stackoverflow.com/users/7300099/gabriel-henry-j-lopez"}, "edited": false, "score": 0, "creation_date": 1530709257, "post_id": 51161095, "comment_id": 89331393, "body": "I&#39;m also getting the same error with my other scopes though"}], "tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1530643236, "creation_date": 1530643236, "answer_id": 51161095, "question_id": 51160872, "link": "https://stackoverflow.com/questions/51160872/rails-searchkick-with-scopes-in-controller/51161095#51161095", "title": "Rails Searchkick with scopes in controller", "body": "<p>The error (unknown to me at the time of writing this answer) might be because you defined <code>with_all_categories</code> as a class method on <code>Product</code>, but in your controller you call it on <code>@results</code> which must be an <code>ActiveRecord::Relation</code>.</p>\n\n<p>Turning it into a <code>scope</code> should fix the issue:</p>\n\n<p>Change this:</p>\n\n<pre><code>def self.with_all_categories(category_ids)\n  select(:id).distinct.\n    joins(:categories).\n    where(\"categories.id\" =&gt; category_ids)\nend\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>scope :with_all_categories, -&gt; (category_ids) { select(:id).distinct.joins(:categories).where(\"categories.id\" =&gt; category_ids) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2875, "user_id": 1177228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2f2287b6054926438eb65f8726cc77d?s=128&d=identicon&r=PG", "display_name": "Andrew Kane", "link": "https://stackoverflow.com/users/1177228/andrew-kane"}, "is_accepted": true, "score": 2, "last_activity_date": 1533800757, "creation_date": 1533800757, "answer_id": 51761457, "question_id": 51160872, "link": "https://stackoverflow.com/questions/51160872/rails-searchkick-with-scopes-in-controller/51761457#51761457", "title": "Rails Searchkick with scopes in controller", "body": "<p>You can apply scopes to Searchkick results with:</p>\n\n<pre><code>Product.search \"milk\", scope_results: -&gt;(r) { in_price_range(params[:price]) }\n</code></pre>\n\n<p>See \"Run additional scopes on results\" in <a href=\"https://github.com/ankane/searchkick\" rel=\"nofollow noreferrer\">the readme</a>.</p>\n\n<p>However, if you apply ActiveRecord <code>where</code> filters, it will throw off pagination. For pagination to work correctly, you need to use Searchkick's <code>where</code> option:</p>\n\n<pre><code>Product.search(query, where: {price_range: 10..20})\n</code></pre>\n"}], "owner": {"reputation": 38, "user_id": 7300099, "user_type": "registered", "profile_image": "https://graph.facebook.com/1501026983244282/picture?type=large", "display_name": "Gabriel Henry J. Lopez", "link": "https://stackoverflow.com/users/7300099/gabriel-henry-j-lopez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 563, "favorite_count": 0, "accepted_answer_id": 51761457, "answer_count": 2, "score": 1, "last_activity_date": 1533800757, "creation_date": 1530642278, "last_edit_date": 1530766520, "question_id": 51160872, "link": "https://stackoverflow.com/questions/51160872/rails-searchkick-with-scopes-in-controller", "title": "Rails Searchkick with scopes in controller", "body": "<p>I'm making a search page where I have a couple of filters on the side and I'm trying to integrate them with Searchkick to query products.</p>\n\n<p>These are my scopes I'm using for the products</p>\n\n<p>models/product.rb</p>\n\n<pre><code>scope :in_price_range, -&gt;(range) { where(\"price &lt;= ?\", range.first) }    \nscope :in_ratings_range, -&gt; (range) { where(\"average_rating &gt;= ?\", range.first) }\n\ndef self.with_all_categories(category_ids)\n    select(:id).distinct.\n    joins(:categories).\n    where(\"categories.id\" =&gt; category_ids)\nend\n</code></pre>\n\n<p>This is where I'm actually calling the scopes </p>\n\n<p>controllers/search_controller.rb</p>\n\n<pre><code>@results = Product.search(@query)\n@results = @results.with_all_categories(params[:category_ids]) if params[:category_ids].present?\n@results = @results.in_price_range(params[:price]) if params[:price].present?\n@results = @results.in_ratings_range(params[:rating]) if params[:rating].present?\n</code></pre>\n\n<p>After running it, I get an error saying the searchkick model doesn't have any methods with the name of my scope.</p>\n\n<p>undefined method `with_all_categories' for #Searchkick::Results:0x00007f4521074c30></p>\n\n<p>How do I use scopes with my search query?</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1530639685, "post_id": 51160041, "comment_id": 89303885, "body": "Which gem, for example?"}, {"owner": {"reputation": 254687, "user_id": 6068, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/931970b8dc51b72e05e3a12b88612d61?s=128&d=identicon&r=PG", "display_name": "pupeno", "link": "https://stackoverflow.com/users/6068/pupeno"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1530639910, "post_id": 51160041, "comment_id": 89303998, "body": "pg or nokogiri, they both have native extensions and they both have packages for windows. I want to build them locally on Windows."}, {"owner": {"reputation": 571, "user_id": 4759390, "user_type": "registered", "profile_image": "https://graph.facebook.com/839598759461592/picture?type=large", "display_name": "Artem Dorodovskyi", "link": "https://stackoverflow.com/users/4759390/artem-dorodovskyi"}, "edited": false, "score": 0, "creation_date": 1530641504, "post_id": 51160041, "comment_id": 89304764, "body": "You can download pg gem file and then use <code>gem install --local &#47;path&#47;to&#47;file.gem</code> to install pg locally."}], "owner": {"reputation": 254687, "user_id": 6068, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/931970b8dc51b72e05e3a12b88612d61?s=128&d=identicon&r=PG", "display_name": "pupeno", "link": "https://stackoverflow.com/users/6068/pupeno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530638720, "creation_date": 1530638720, "question_id": 51160041, "link": "https://stackoverflow.com/questions/51160041/force-compilation-of-ruby-extensions-when-installing-a-gem", "title": "Force compilation of Ruby extensions when installing a gem?", "body": "<p>Is it possible to force the compilation of a Ruby extensions locally, instead of using any sort of packaged version, when installing a gem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin", "ransack"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530638654, "post_id": 51159985, "comment_id": 89303382, "body": "How is <code>preference</code> defined?"}, {"owner": {"reputation": 43, "user_id": 7641238, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FJm3z_b87V0/AAAAAAAAAAI/AAAAAAAAAAo/Tl7_So5zKC8/photo.jpg?sz=128", "display_name": "cop", "link": "https://stackoverflow.com/users/7641238/cop"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530638765, "post_id": 51159985, "comment_id": 89303430, "body": "<code>preference</code> is not defined anywhere just like <code>period</code> is not defined. They are not a part of the collection &quot;<code>User</code>&quot;"}, {"owner": {"reputation": 571, "user_id": 4759390, "user_type": "registered", "profile_image": "https://graph.facebook.com/839598759461592/picture?type=large", "display_name": "Artem Dorodovskyi", "link": "https://stackoverflow.com/users/4759390/artem-dorodovskyi"}, "edited": false, "score": 0, "creation_date": 1530642044, "post_id": 51159985, "comment_id": 89305028, "body": "What you want to filter with <code>preference </code>?"}, {"owner": {"reputation": 2560, "user_id": 153279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783f796db3d628f7c268326fb3323de8?s=128&d=identicon&r=PG", "display_name": "Piers C", "link": "https://stackoverflow.com/users/153279/piers-c"}, "edited": false, "score": 0, "creation_date": 1531766963, "post_id": 51159985, "comment_id": 89709049, "body": "There are some articles on custom filters linked from the wiki (<a href=\"https://github.com/activeadmin/activeadmin/wiki#index-pages-filters-and-scopes\" rel=\"nofollow noreferrer\">github.com/activeadmin/activeadmin/&hellip;</a>) You will need to add more details to get an answer here, however."}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 1636544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e1738188089e55590afe16bfe599190?s=128&d=identicon&r=PG", "display_name": "Alexander Milano Manias", "link": "https://stackoverflow.com/users/1636544/alexander-milano-manias"}, "is_accepted": false, "score": 0, "last_activity_date": 1570461197, "creation_date": 1570461197, "answer_id": 58272423, "question_id": 51159985, "link": "https://stackoverflow.com/questions/51159985/active-admin-with-custom-filter-on-a-non-table-attribute/58272423#58272423", "title": "Active Admin with custom filter on a non-table attribute", "body": "<p>If <code>preference</code> is another table, you can filter by <code>preference</code> attributes like this:</p>\n\n<p><code>filter :preference_attribute, as: :string</code></p>\n\n<p>For example, if <code>preference</code> table has an attribute called <code>link</code>, you can do this:</p>\n\n<p><code>filter :preference_link, as: :string</code></p>\n"}], "owner": {"reputation": 43, "user_id": 7641238, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FJm3z_b87V0/AAAAAAAAAAI/AAAAAAAAAAo/Tl7_So5zKC8/photo.jpg?sz=128", "display_name": "cop", "link": "https://stackoverflow.com/users/7641238/cop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 341, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570461197, "creation_date": 1530638502, "question_id": 51159985, "link": "https://stackoverflow.com/questions/51159985/active-admin-with-custom-filter-on-a-non-table-attribute", "title": "Active Admin with custom filter on a non-table attribute", "body": "<p>collection: <code>users</code></p>\n\n<p>attributes: <code>name, phone_no, email</code></p>\n\n<pre><code>ActiveAdmin.register User do\n   filter 'period', as: :date_range, label: 'From - To'\nend\n</code></pre>\n\n<p>Above code works well for a date range</p>\n\n<p>HOWEVER, Below active admin code doesn't work</p>\n\n<pre><code>ActiveAdmin.register User do\n   filter 'preference', as: :string\nend\n</code></pre>\n\n<p>Error raised is:</p>\n\n<pre><code>undefined method `preference_contains' for Ransack::Search&lt;class: User, base: Grouping &lt;combinator: and&gt;&gt;:Ransack::Search\n</code></pre>\n\n<p>Both <code>period</code> and <code>preference</code> are not attributes in the user table. I want to be able to have preference work as a free text box search param, which i'll use in the controller to derive to a data and then render records.</p>\n\n<p>Please help</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1530635992, "post_id": 51159202, "comment_id": 89302029, "body": "What rails version are you using? If rails 5 checkout <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Attributes/ClassMethods.html\" rel=\"nofollow noreferrer\"><code>Attributes</code></a>"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 1, "creation_date": 1530636369, "post_id": 51159202, "comment_id": 89302214, "body": "<i>&quot;I am trying to assign a default room_type&quot;</i> - Ok. But where do you want to set it? Before saving the record / After initialising an instance? You read about <code>after_initialize</code>. So, i guess, you need it after initialising an instance. Correct me if my assumption is wrong."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1530637638, "post_id": 51159202, "comment_id": 89302830, "body": "Do you really need an additional database field <code>room_type</code> if you already have the number of people? What if the number of people changes? Maybe it makes more sense to <i>compute</i> the value instead of persisting it, i.e. just use a method."}, {"owner": {"reputation": 27, "user_id": 10027818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a2972e07c92c6a3658345cce4b6799?s=128&d=identicon&r=PG&f=1", "display_name": "kkir", "link": "https://stackoverflow.com/users/10027818/kkir"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1530638611, "post_id": 51159202, "comment_id": 89303358, "body": "@Stefan I get what you&#39;re saying, and that makes sense given the info I provided. But there are actually a few more room_types offered, its just that the majority of the time those are the room_types selected for the respective people_in_room.size"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 10027818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a2972e07c92c6a3658345cce4b6799?s=128&d=identicon&r=PG&f=1", "display_name": "kkir", "link": "https://stackoverflow.com/users/10027818/kkir"}, "edited": false, "score": 0, "creation_date": 1530646642, "post_id": 51159406, "comment_id": 89306941, "body": "Awesome! This is helped a ton. Thank you!"}, {"owner": {"reputation": 1456, "user_id": 2295410, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/PYmkM.png?s=128&g=1", "display_name": "Alex.U", "link": "https://stackoverflow.com/users/2295410/alex-u"}, "reply_to_user": {"reputation": 27, "user_id": 10027818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a2972e07c92c6a3658345cce4b6799?s=128&d=identicon&r=PG&f=1", "display_name": "kkir", "link": "https://stackoverflow.com/users/10027818/kkir"}, "edited": false, "score": 0, "creation_date": 1530646735, "post_id": 51159406, "comment_id": 89306969, "body": "@kkir could you accept the answer as a solution then please? :)"}], "tags": [], "owner": {"reputation": 1456, "user_id": 2295410, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/PYmkM.png?s=128&g=1", "display_name": "Alex.U", "link": "https://stackoverflow.com/users/2295410/alex-u"}, "is_accepted": true, "score": 0, "last_activity_date": 1530636973, "last_edit_date": 1530636973, "creation_date": 1530635940, "answer_id": 51159406, "question_id": 51159202, "link": "https://stackoverflow.com/questions/51159202/set-a-default-value-conditionally/51159406#51159406", "title": "Set a default value conditionally", "body": "<p>From the <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html\" rel=\"nofollow noreferrer\">API docs</a></p>\n\n<blockquote>\n  <p>after_find and after_initialize callback is triggered for each object that is found and instantiated by a finder, with after_initialize being triggered after new objects are instantiated as well.</p>\n</blockquote>\n\n<p>You could do something along the lines of:</p>\n\n<pre><code>class Room &lt; ApplicationRecord\n  after_initialize :set_room_defaults\n\n  def set_room_defaults\n    if people_in_room.size == 1\n        set room_type = \"Single\"\n    elsif people_in_room.size == 2\n        set room_type = \"Double\"\n    elsif people_in_room.size == 3\n        set room_type = \"Triple\"\n    end\n  end\nend\n</code></pre>\n\n<p>Or you could store the mappings in an <code>Array</code>:</p>\n\n<pre><code>class Room &lt; ApplicationRecord\n  ROOM_TYPES = %w(Single Double Triple).freeze\n\n  after_initialize :set_room_defaults\n\n  def set_room_defaults\n    set room_type = ROOM_TYPES[people_in_room.size - 1]\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 10027818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a2972e07c92c6a3658345cce4b6799?s=128&d=identicon&r=PG&f=1", "display_name": "kkir", "link": "https://stackoverflow.com/users/10027818/kkir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 655, "favorite_count": 0, "accepted_answer_id": 51159406, "answer_count": 1, "score": 0, "last_activity_date": 1530636973, "creation_date": 1530635062, "last_edit_date": 1530636609, "question_id": 51159202, "link": "https://stackoverflow.com/questions/51159202/set-a-default-value-conditionally", "title": "Set a default value conditionally", "body": "<p>I'm trying to figure out how to set a default value of a field based on some conditions.</p>\n\n<p>Right now, a field <code>room_type</code> is defaulted to <code>double</code>, regardless of the number of people in a room.</p>\n\n<p>Basically I'm aiming for something along the lines of:</p>\n\n<pre><code>def set_room_defaults\n  if people_in_room.size == 1\n    set room_type = \"Single\"\n  elsif people_in_room.size == 2\n    set room_type = \"Double\"\n  elsif people_in_room.size == 3\n    set room_type = \"Triple\"\n  end\nend\n</code></pre>\n\n<p>I've been looking into the <code>default_value_for</code> gem, hoping I could do something like:</p>\n\n<pre><code>default_value_for :room_type, (call set_room_default)\n</code></pre>\n\n<p>I've read a bit that <code>after_initialize</code> might be close to what I'm looking for?</p>\n\n<p>Is something like this possible? Or am I going about this all wrong?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "firefox", "web-scraping", "watir"], "answers": [{"comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1530793140, "post_id": 51181474, "comment_id": 89363878, "body": "It&#39;s not accurate to say WATIR and capybara sit on the top of webdriver, It&#39;s accurate to say WATIR and capybara sit on the top of Selenium and Selenium gives the command to the webdriver and according to the command it received, it drives the browser."}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1535484274, "post_id": 51181474, "comment_id": 91080382, "body": "I would disagree.  the API that WATIR and Capybara call is the WEBDRIVER API. neither uses what some would call &#39;selenese&#39;.  The Webdriver API was also added to selenium when it went to 2.0 and the Selenium and Webdriver projects merged.  Development of Selenium 2 (ruby) and what was called watir-webdriver happened in parallel.   (see <a href=\"http://watir.com/history/\" rel=\"nofollow noreferrer\">watir.com/history</a> )The current &#39;powered by selenium&#39; branding is basically a result of the selenium name &#39;winning out&#39; when those projects merged and selenium was re-written to run on top of webdriver.  See <a href=\"https://www.seleniumhq.org/docs/03_webdriver.jsp\" rel=\"nofollow noreferrer\">seleniumhq.org/docs/03_webdriver.jsp</a>"}], "tags": [], "owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "is_accepted": true, "score": 1, "last_activity_date": 1530744035, "creation_date": 1530744035, "answer_id": 51181474, "question_id": 51158218, "link": "https://stackoverflow.com/questions/51158218/watirbrowser-in-ruby-catch-all-the-xhr-requests-with-their-responses-made-b/51181474#51181474", "title": "Watir::browser in ruby - Catch all the XHR requests with their responses, made by browser", "body": "<p>The primary purpose of webdriver and tools like WATIR and capybara that sit on top of webdriver is to drive the browser the way a user would.  Deep inspection of the resulting network traffic is not really part of the tool.</p>\n\n<p>To do this manually you can use the developer tools network tab to see all the requests that happen as the page is loaded.  You could also use network sniffing or proxy tools such as fiddler-2, Charles, Wireshark, or Netmon.</p>\n\n<p>To do it programmatically you might want to use nokogiri or a similar gem that specializes in parsing html perhaps in combination with something like rest-client if you want to actually make requests of the various api endpoints and work with the XML/JSON returned by the services being called.   This blog posting might be helpful <a href=\"https://readysteadycode.com/howto-extract-data-from-html-with-ruby\" rel=\"nofollow noreferrer\">https://readysteadycode.com/howto-extract-data-from-html-with-ruby</a></p>\n"}, {"tags": [], "owner": {"reputation": 1672, "user_id": 1413913, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nGSn2.jpg?s=128&g=1", "display_name": "J. Willette", "link": "https://stackoverflow.com/users/1413913/j-willette"}, "is_accepted": false, "score": 0, "last_activity_date": 1586577126, "creation_date": 1586577126, "answer_id": 61151922, "question_id": 51158218, "link": "https://stackoverflow.com/questions/51158218/watirbrowser-in-ruby-catch-all-the-xhr-requests-with-their-responses-made-b/61151922#61151922", "title": "Watir::browser in ruby - Catch all the XHR requests with their responses, made by browser", "body": "<p>You can achieve this with:</p>\n\n<pre><code>script = 'var performance = window.performance || window.mozPerformance || window.msPerformance || window.webkitPerformance || {}; return performance.getEntries().filter(e=&gt;e.initiatorType==\"xmlhttprequest\")'\nbrowser.execute_script(script)\n</code></pre>\n"}], "owner": {"reputation": 3154, "user_id": 5409748, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DQWhS.jpg?s=128&g=1", "display_name": "Jai Kumar Rajput", "link": "https://stackoverflow.com/users/5409748/jai-kumar-rajput"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 637, "favorite_count": 1, "accepted_answer_id": 51181474, "answer_count": 2, "score": 1, "last_activity_date": 1586577126, "creation_date": 1530631655, "last_edit_date": 1530742901, "question_id": 51158218, "link": "https://stackoverflow.com/questions/51158218/watirbrowser-in-ruby-catch-all-the-xhr-requests-with-their-responses-made-b", "title": "Watir::browser in ruby - Catch all the XHR requests with their responses, made by browser", "body": "<p>I'm using following <code>gems</code> to open the site in the browser </p>\n\n<pre><code>gem \"watir\", \"~&gt; 6.1\"\ngem 'watir-scroll'\ngem \"geckodriver-helper\"\ngem 'chromedriver-helper'\n</code></pre>\n\n<p>I'm making an instance for the browser to operate on loaded <code>HTML</code> like,</p>\n\n<pre><code>browser = Watir::Browser.new :firefox\nbrowser.goto \"https://www.mysitessss.net/testing\"\n</code></pre>\n\n<p>I just want to catch all the <code>XHR</code> requests made by this page URL after loading using the <code>browser</code> object, so I can get their responses.</p>\n\n<p>Please help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "github-api"], "answers": [{"comments": [{"owner": {"reputation": 1646, "user_id": 485397, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/148b981a024d8668a09a72e55e25555d?s=128&d=identicon&r=PG", "display_name": "esausilva", "link": "https://stackoverflow.com/users/485397/esausilva"}, "edited": false, "score": 0, "creation_date": 1530632489, "post_id": 51158094, "comment_id": 89300267, "body": "Thanks for replying, I solved the issue. I needed to access the <code>repos</code> attribute. See my answer to this question"}, {"owner": {"reputation": 1646, "user_id": 485397, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/148b981a024d8668a09a72e55e25555d?s=128&d=identicon&r=PG", "display_name": "esausilva", "link": "https://stackoverflow.com/users/485397/esausilva"}, "edited": false, "score": 0, "creation_date": 1530633309, "post_id": 51158094, "comment_id": 89300728, "body": "I implemented this and makes sense. Thanks, your solution works as expected."}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 1, "last_activity_date": 1530633124, "last_edit_date": 1530633124, "creation_date": 1530631253, "answer_id": 51158094, "question_id": 51157873, "link": "https://stackoverflow.com/questions/51157873/how-to-create-an-array-of-objects-from-api-response-in-ruby-on-rails/51158094#51158094", "title": "How to create an array of objects from API response in Ruby on Rails", "body": "<p>You need to implement <code>each</code> as the error suggests please read the first paragraph of <a href=\"https://ruby-doc.org/core-2.5.1/Enumerable.html\" rel=\"nofollow noreferrer\"><code>Enumerable</code></a>. </p>\n\n<p>Usually you can just pass this off to an object that is already enumerable (like an <code>Array</code> in your case.)</p>\n\n<p>For Example </p>\n\n<pre><code>module Github\n  class Repos &lt; Base\n    include Enumerable\n\n    def self.list\n      response = Request.get(\"user/repos\")\n      Repos.new(response)\n    end\n\n    def initialize(args = [])\n      @repos = parse_repos(args)\n    end\n\n    def each(&amp;block)\n      @repos.each(&amp;block)\n    end\n\n    private\n\n    def parse_repos(args = [])\n      args.map { |repo| Repo.new(repo) }\n    end\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1530632571, "post_id": 51158460, "comment_id": 89300315, "body": "<code>attr_accessor :repos</code> is in general very bad idea; the delegation should be done as shown by @engineersmnky unless this is a one-time-run script."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1530633132, "post_id": 51158460, "comment_id": 89300621, "body": "What @mudasobwa said. Also even this implementation over exposes <code>repos</code> such that <code>@repos.repos &lt;&lt; 12</code> is functionally possible see my updated suggestion"}, {"owner": {"reputation": 1646, "user_id": 485397, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/148b981a024d8668a09a72e55e25555d?s=128&d=identicon&r=PG", "display_name": "esausilva", "link": "https://stackoverflow.com/users/485397/esausilva"}, "edited": false, "score": 0, "creation_date": 1530633602, "post_id": 51158460, "comment_id": 89300884, "body": "Thanks for the tips"}], "tags": [], "owner": {"reputation": 1646, "user_id": 485397, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/148b981a024d8668a09a72e55e25555d?s=128&d=identicon&r=PG", "display_name": "esausilva", "link": "https://stackoverflow.com/users/485397/esausilva"}, "is_accepted": false, "score": 0, "last_activity_date": 1530632448, "creation_date": 1530632448, "answer_id": 51158460, "question_id": 51157873, "link": "https://stackoverflow.com/questions/51157873/how-to-create-an-array-of-objects-from-api-response-in-ruby-on-rails/51158460#51158460", "title": "How to create an array of objects from API response in Ruby on Rails", "body": "<p>Ah, my implementation was correct, HOWEVER I needed to access the <code>repos</code> attribute like this </p>\n\n<pre><code>  &lt;% @repos.repos.each do |repo|%&gt;\n    &lt;%= repo.name %&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>I don't know why I didn't see this earlier, I guess I was just frustrated </p>\n"}], "owner": {"reputation": 1646, "user_id": 485397, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/148b981a024d8668a09a72e55e25555d?s=128&d=identicon&r=PG", "display_name": "esausilva", "link": "https://stackoverflow.com/users/485397/esausilva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 534, "favorite_count": 0, "accepted_answer_id": 51158094, "answer_count": 2, "score": 0, "last_activity_date": 1530633124, "creation_date": 1530630641, "question_id": 51157873, "link": "https://stackoverflow.com/questions/51157873/how-to-create-an-array-of-objects-from-api-response-in-ruby-on-rails", "title": "How to create an array of objects from API response in Ruby on Rails", "body": "<p>I am following <a href=\"https://revs.runtime-revolution.com/integrating-a-third-party-api-with-rails-5-134f960ddbba\" rel=\"nofollow noreferrer\">this tutorial</a> to connect to GitHub API. I can successfully connect and bring back the currently authenticated user information.</p>\n\n<p>However I am trying to get back the user's repos, the response is an array of objects.</p>\n\n<p>I do not know how to pass that to the view. From the tutorial I am following, take a look at the <code>recipe.rb</code> class <a href=\"https://github.com/AnnieLee/blog-spoonacular-api/blob/master/app/services/spoonacular/recipe.rb\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p><code>attr_accessor :ingrediets</code> will function as an array (line 8). In line 32 she is passing the response from an API to a custom method to parse it, create an <code>Ingredient</code> object and push it into the array. <code>self.ingredients = parse_ingredients(args)</code></p>\n\n<p>This is the custom method</p>\n\n<pre><code>def parse_ingredients(args = {})\n  args.fetch(\"extendedIngredients\", []).map { |ingredient| Ingredient.new(ingredient) }\nend\n</code></pre>\n\n<p>As you can see, from the <code>args</code> object she is <em>fetching</em> the <code>extendedIngredients</code> property in the response and creating the array.</p>\n\n<p>My problem is that with the GitHub API, the response is a plain array and my attempt to parse it and turn it into an array of objects has been unsuccessful.</p>\n\n<p>This is my <code>repos.rb</code> class</p>\n\n<pre><code>module Github\n  class Repos &lt; Base\n    attr_accessor :repos\n\n    def initialize(args = [])\n      self.repos = parse_repos(args)\n    end\n\n    def self.list\n      response = Request.get(\"user/repos\")\n      Repos.new(response)\n    end\n\n    private\n\n    def parse_repos(args = [])\n      args.map { |repo| Repo.new(repo) }\n    end\n  end\nend\n</code></pre>\n\n<p>And my <code>repo.rb</code> class</p>\n\n<pre><code>module Github\n  class Repo &lt; Base\n    attr_accessor :name,:full_name,:description            \n  end\nend\n</code></pre>\n\n<p>If you notice I am following the tutorial's style, but I haven't been able to implement it. </p>\n\n<p>With my current implementation, this is the error I am getting in my view</p>\n\n<pre><code>  undefined method `each' for #&lt;Github::Repos:0x00007feaadd494d8&gt;\n  &lt;% @repos.each do |repo|%&gt;\n    &lt;%= repo %&gt;\n  &lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "jekyll", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1530630607, "post_id": 51157544, "comment_id": 89299125, "body": "...with an exact gemset specified in the <code>Gemfile</code>."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 12, "last_activity_date": 1530629550, "creation_date": 1530629550, "answer_id": 51157544, "question_id": 51157446, "link": "https://stackoverflow.com/questions/51157446/whats-the-difference-between-bundle-exec-jekyll-serve-and-jekyll-serve/51157544#51157544", "title": "What&#39;s the difference between &#39;bundle exec jekyll serve&#39; and &#39;jekyll serve&#39;?", "body": "<p>In two words:</p>\n\n<p><code>bundle exec jekyll serve</code> - runs the exact jekyll server version that is specified in your Gemfile/Gemfile.lock.</p>\n\n<p><code>jekyll serve</code> - runs <em>some</em> version of jekyll server, which may or may not be the one you want.</p>\n\n<p>For best results, always use <code>bundle exec</code>. On my machine, I have a shell alias for it, so that I can type</p>\n\n<pre><code>be jekyll serve\n</code></pre>\n"}], "owner": {"reputation": 2034, "user_id": 1704895, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/SvOnC.jpg?s=128&g=1", "display_name": "Cequiel", "link": "https://stackoverflow.com/users/1704895/cequiel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1182, "favorite_count": 5, "accepted_answer_id": 51157544, "answer_count": 1, "score": 8, "last_activity_date": 1530629550, "creation_date": 1530629276, "question_id": 51157446, "link": "https://stackoverflow.com/questions/51157446/whats-the-difference-between-bundle-exec-jekyll-serve-and-jekyll-serve", "title": "What&#39;s the difference between &#39;bundle exec jekyll serve&#39; and &#39;jekyll serve&#39;?", "body": "<p>I'm currently learning Jekyll, a framework for building websites, and I don't know what's the difference between <code>bundle exec jekyll serve</code> and <code>jekyll serve</code>. Both seem to behave the same.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1530630564, "post_id": 51157382, "comment_id": 89299092, "body": "<code>duration</code> is confusing me. Where <code>duration</code> is defined? I mean, I suppose I should use something like <code>start_time</code> to find upcoming events."}, {"owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1530631190, "post_id": 51157382, "comment_id": 89299490, "body": "I guess the method name is confusing over here. <code>duration</code> is the duration of the event. My main problem is how to ensure that it looks for <code>duration</code> on <code>event</code> record rather than <code>user</code> record"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1530632103, "post_id": 51157382, "comment_id": 89300051, "body": "You cannot perform the query in this fashion because the range needs to be interpreted prior to being translated to SQL you cannot mix and match the ruby code with database specific logic."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530637392, "post_id": 51157382, "comment_id": 89302696, "body": "<i>&quot;it attempts to look for <code>duration</code> in the user instance&quot;</i> - It is because your method <code>upcoming_events_in</code> is defined in <code>User</code> class and (you haven&#39;t cleared what <code>duration</code> refers to in your method) i assume <code>duration</code> is some attribute or method from <code>User</code> class itself."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1530639616, "post_id": 51157382, "comment_id": 89303852, "body": "I can&#39;t find a way following your idea. But maybe you can evaluate something like this: <code>events.where(client_id: client_id).select(:start_time, :duration).to_a.delete_if { |event| ![Time.zone.now - event.duration..Time.zone.now + minutes].include? event.start_time }.any?</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "edited": false, "score": 0, "creation_date": 1530692464, "post_id": 51157714, "comment_id": 89320768, "body": "I get the following error on using the above: <code>PG::SyntaxError: ERROR:  syntax error at or near &quot;30&quot;</code> where 30 is the value for the <code>minutes</code> argument"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "edited": false, "score": 1, "creation_date": 1530693827, "post_id": 51157714, "comment_id": 89321493, "body": "Oh, you do use <code>Postgres</code>. It makes sense to mention it upfront. I will update an answer accordingly."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1530694444, "last_edit_date": 1530694444, "creation_date": 1530630083, "answer_id": 51157714, "question_id": 51157382, "link": "https://stackoverflow.com/questions/51157382/inconsistent-attribute-reference-in-exists-method-in-rails/51157714#51157714", "title": "Inconsistent attribute reference in `exists?` method in Rails", "body": "<p>I have no idea about <code>Rails</code> but it can be easily performed with plain old good SQL:</p>\n\n<pre><code>def upcoming_events_in(minutes, client_id)\n  events.\n    where(client_id: client_id).\n    where('DATEDIFF(events.start, DATESUB(NOW(), INTERVAL events.duration MINUTES)) &gt; 0').\n    where('DATEDIFF(events.start, DATEADD(NOW(), INTERVAL events.minutes MINUTES)) &lt; 0').\n    exists?\nend\n</code></pre>\n\n<hr>\n\n<p><em>PostgreSQL</em> version:</p>\n\n<pre><code>def upcoming_events_in(minutes, client_id)\n  start = \"(TIMESTAMP events.start, TIMESTAMP events.start + INTERVAL '1 MINUTE')\"\n  interval = \"(NOW() - INTERVAL 'events.duration MINUTES', NOW() + INTERVAL 'events.minutes MINUTES')\"\n\n  events.\n    where(client_id: client_id).\n    where(\"#{start} OVERLAPS #{interval}\").\n    exists?\nend\n</code></pre>\n\n<p>Or like, I don\u2019t have PG to check.</p>\n"}], "owner": {"reputation": 2401, "user_id": 2873548, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b90a1fd45fc72bd55f8948b385d4626f?s=128&d=identicon&r=PG&f=1", "display_name": "anonn023432", "link": "https://stackoverflow.com/users/2873548/anonn023432"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 51157714, "answer_count": 1, "score": 0, "last_activity_date": 1530694444, "creation_date": 1530629038, "last_edit_date": 1530637551, "question_id": 51157382, "link": "https://stackoverflow.com/questions/51157382/inconsistent-attribute-reference-in-exists-method-in-rails", "title": "Inconsistent attribute reference in `exists?` method in Rails", "body": "<p>This is my <code>User</code> model:</p>\n\n<pre><code>class User\n  def upcoming_events_in(minutes, client_id)\n    events.where(client_id: client_id).exists?(start: (Time.zone.now - duration)..(Time.zone.now + minutes))\n  end\nend\n</code></pre>\n\n<p>In method <code>upcoming_events_in</code>, it correctly looks for <code>start</code> attribute on the <code>events</code> record, but it attempts to look for <code>duration</code> on the <code>User</code> instance. Is there a way to tie it to the <code>events</code> instance?</p>\n"}, {"tags": ["ruby", "activerecord", "dart"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1530627826, "post_id": 51156802, "comment_id": 89297319, "body": "Take a look at <a href=\"https://github.com/rails-api/active_model_serializers\" rel=\"nofollow noreferrer\">Active Model Serializers</a>, they&#39;re pretty cool."}], "answers": [{"comments": [{"owner": {"reputation": 2571, "user_id": 6822876, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/i6dGp.jpg?s=128&g=1", "display_name": "Carrein", "link": "https://stackoverflow.com/users/6822876/carrein"}, "edited": false, "score": 0, "creation_date": 1530634033, "post_id": 51158847, "comment_id": 89301123, "body": "Thanks, but how would i accomplish this if my object is a collection instead? I.e. <code>posts = Post.first(15)</code>, do i simply loop through it using a foreach? Sorry if i did not indicate in the original post."}, {"owner": {"reputation": 2571, "user_id": 6822876, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/i6dGp.jpg?s=128&g=1", "display_name": "Carrein", "link": "https://stackoverflow.com/users/6822876/carrein"}, "edited": false, "score": 0, "creation_date": 1530635775, "post_id": 51158847, "comment_id": 89301923, "body": "I managed to format it as a <code>json</code> instead which works for my case better, thanks!"}, {"owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "reply_to_user": {"reputation": 2571, "user_id": 6822876, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/i6dGp.jpg?s=128&g=1", "display_name": "Carrein", "link": "https://stackoverflow.com/users/6822876/carrein"}, "edited": false, "score": 0, "creation_date": 1530635913, "post_id": 51158847, "comment_id": 89301991, "body": "Great...you can use select on ActiveRecord for selecting specific fields as mentioned in the answer as well."}], "tags": [], "owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "is_accepted": true, "score": 1, "last_activity_date": 1530633701, "creation_date": 1530633701, "answer_id": 51158847, "question_id": 51156802, "link": "https://stackoverflow.com/questions/51156802/formatting-activerecord-results-for-parsing/51158847#51158847", "title": "Formatting ActiveRecord results for parsing?", "body": "<p>As per the description shared it seems like you have data from the database and you now need to select only particular fields that needs to be shown.</p>\n\n<p>As per current scenario you could use something like:</p>\n\n<pre><code>post.as_json(only: [:content, :name, :location])\n</code></pre>\n\n<p>Else you could modify the query you are using by using select statement for selecting specific attributes from database.</p>\n\n<pre><code>Post.select(:name, :content, :location)\n</code></pre>\n\n<p>Hope it helps!!</p>\n"}], "owner": {"reputation": 2571, "user_id": 6822876, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/i6dGp.jpg?s=128&g=1", "display_name": "Carrein", "link": "https://stackoverflow.com/users/6822876/carrein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 51158847, "answer_count": 1, "score": 0, "last_activity_date": 1530634072, "creation_date": 1530627192, "last_edit_date": 1530634072, "question_id": 51156802, "link": "https://stackoverflow.com/questions/51156802/formatting-activerecord-results-for-parsing", "title": "Formatting ActiveRecord results for parsing?", "body": "<p>I have a database with entries which I can fetch using ActiveRecord. Currently, using something like <code>post.to_yaml</code> yields:</p>\n\n<pre><code> !ruby/object:Post\n  concise_attributes:\n  - !ruby/object:ActiveModel::Attribute::FromDatabase\n    name: id\n    value_before_type_cast: 1\n  - !ruby/object:ActiveModel::Attribute::FromDatabase\n    name: user\n    value_before_type_cast: efy5qC5YmJNml23JowOUrlmfN0D2\n  - !ruby/object:ActiveModel::Attribute::FromDatabase\n    name: content\n    value_before_type_cast: bol4\n  - !ruby/object:ActiveModel::Attribute::FromDatabase\n    name: location\n    value_before_type_cast: '123'\n  - !ruby/object:ActiveModel::Attribute::FromDatabase\n    name: timestamp\n    value_before_type_cast: '12:00'\n  new_record: false\n</code></pre>\n\n<p>The exact collection i'm returning is as follow: <code>record = Post.order(:timestamp).offset(15 * 0).first(15)</code></p>\n\n<p>This returned result contains several fields which will be returned to a Flutter application. The data will populate a widget with several fields such as <code>content</code>, <code>date</code> and <code>location</code>, all of which is returned by the above query.</p>\n\n<p>I could use a Dart library to parse the YAML, but is there a better way to condense the returned values so that only the necessary fields are shown?</p>\n"}, {"tags": ["ruby", "binary", "integer"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 4, "last_activity_date": 1530627406, "creation_date": 1530627406, "answer_id": 51156878, "question_id": 51156799, "link": "https://stackoverflow.com/questions/51156799/ruby-convert-integer-to-32-bit-binary-number-or-string/51156878#51156878", "title": "Ruby: convert integer to 32 bit binary number (or string)", "body": "<p>Use <a href=\"https://ruby-doc.org/core/String.html#method-i-rjust\" rel=\"nofollow noreferrer\"><code>String#rjust</code></a>:</p>\n\n<pre><code>1.to_s(2).rjust(32, '0')\n#\u21d2 \"00000000000000000000000000000001\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "is_accepted": false, "score": 5, "last_activity_date": 1530629209, "last_edit_date": 1530629209, "creation_date": 1530628482, "answer_id": 51157214, "question_id": 51156799, "link": "https://stackoverflow.com/questions/51156799/ruby-convert-integer-to-32-bit-binary-number-or-string/51157214#51157214", "title": "Ruby: convert integer to 32 bit binary number (or string)", "body": "<p><a href=\"http://ruby-doc.org/core-2.5.1/String.html#method-i-25\" rel=\"noreferrer\"><code>String#%</code></a> (via <code>sprintf</code>):</p>\n\n<pre><code>'%032b' % 7\n=&gt; \"00000000000000000000000000000111\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 0, "last_activity_date": 1530638246, "creation_date": 1530638246, "answer_id": 51159941, "question_id": 51156799, "link": "https://stackoverflow.com/questions/51156799/ruby-convert-integer-to-32-bit-binary-number-or-string/51159941#51159941", "title": "Ruby: convert integer to 32 bit binary number (or string)", "body": "<p>Using <a href=\"http://ruby-doc.org/core-2.5.1/Array.html#method-i-pack\" rel=\"nofollow noreferrer\"><code>pack</code></a> and <a href=\"http://ruby-doc.org/core-2.5.1/String.html#method-i-unpack1\" rel=\"nofollow noreferrer\"><code>unpack1</code></a>:</p>\n\n<pre><code>[1].pack('L&gt;').unpack1('B*')\n#=&gt; \"00000000000000000000000000000001\"\n</code></pre>\n\n<p><code>L</code> indicates 32-bit unsigned integer, <code>&gt;</code> denotes big endian. <code>B</code> indicates bit string, <code>*</code> outputs all available bits.</p>\n\n<p>This will wrap around when exceeding the 32-bit unsigned integer range:</p>\n\n<pre><code>[4_294_967_294].pack('L&gt;').unpack1('B*') #=&gt; \"11111111111111111111111111111110\"\n[4_294_967_295].pack('L&gt;').unpack1('B*') #=&gt; \"11111111111111111111111111111111\"\n[4_294_967_296].pack('L&gt;').unpack1('B*') #=&gt; \"00000000000000000000000000000000\"\n[4_294_967_297].pack('L&gt;').unpack1('B*') #=&gt; \"00000000000000000000000000000001\"\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 8440917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f86c892cf987de92b59436472de9c58?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Wisowaty", "link": "https://stackoverflow.com/users/8440917/alexander-wisowaty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 919, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1530638246, "creation_date": 1530627183, "last_edit_date": 1530627481, "question_id": 51156799, "link": "https://stackoverflow.com/questions/51156799/ruby-convert-integer-to-32-bit-binary-number-or-string", "title": "Ruby: convert integer to 32 bit binary number (or string)", "body": "<p>I want to convert a number, say <code>1</code>, into a <code>32</code> bit binary number:</p>\n\n<pre><code>00000000000000000000000000000001  \n</code></pre>\n\n<p>how can I do this to ensure the full string is of length <code>32</code>, no matter how small the number might be?</p>\n\n<p>I had a <code>sprintf</code> working for <code>8</code> bit binary, but not sure how to make it <code>32</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "mailer"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530625663, "post_id": 51156172, "comment_id": 89295827, "body": "Well, status of <code>sendmail</code> is irrelevant, you&#39;re not using it. Check if your credentials and connection settings for serverxxxx.com are correct."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 2, "creation_date": 1530625822, "post_id": 51156172, "comment_id": 89295934, "body": "I think you are missing a couple of closing braces (<code>}</code>)."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 1, "creation_date": 1530626168, "post_id": 51156172, "comment_id": 89296186, "body": "@JagdeepSingh: good eye!"}, {"owner": {"reputation": 1, "user_id": 10027016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6728fe35e525f4e6f1a516fbd402f695?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/10027016/patrick"}, "edited": false, "score": 0, "creation_date": 1530626317, "post_id": 51156172, "comment_id": 89296310, "body": "Sergio, Thanks for this remark, but braces are OK, I just removed (maybe a bad idea) to show only essential parameters."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530626326, "post_id": 51156172, "comment_id": 89296323, "body": "I assume you send your emails with <code>.deliver_later</code>. Is your background worker running?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530626359, "post_id": 51156172, "comment_id": 89296344, "body": "@Patrick yeah, very bad idea. Bring them back."}, {"owner": {"reputation": 1, "user_id": 10027016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6728fe35e525f4e6f1a516fbd402f695?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/10027016/patrick"}, "edited": false, "score": 0, "creation_date": 1530626447, "post_id": 51156172, "comment_id": 89296403, "body": "the full file with braces:"}, {"owner": {"reputation": 1, "user_id": 10027016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6728fe35e525f4e6f1a516fbd402f695?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/10027016/patrick"}, "edited": false, "score": 0, "creation_date": 1530626613, "post_id": 51156172, "comment_id": 89296511, "body": "background.worker? I even don&#39;t know how to check it. Maybe your are right. How to check if it is running? What should start it?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530626715, "post_id": 51156172, "comment_id": 89296572, "body": "@Patrick &quot;How to check if it is running?&quot; - well, if you set up the whole server and didn&#39;t set up auto-start for the worker, then it&#39;s safe to assume it is not running. First you have to find out what is the worker this app uses (DJ, resque, sidekiq or something else), then read its documentation on how to start it properly."}, {"owner": {"reputation": 1, "user_id": 10027016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6728fe35e525f4e6f1a516fbd402f695?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/10027016/patrick"}, "edited": false, "score": 0, "creation_date": 1530627187, "post_id": 51156172, "comment_id": 89296892, "body": "Sidekiq is running from init.d script # ps -ef|fgrep sidekiq sesame   18173     1  0 juin18 ?       01:31:50 sidekiq 5.1.3 Sesame [0 of 25 busy]"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530627378, "post_id": 51156172, "comment_id": 89297015, "body": "&quot;Sidekiq is running&quot; - well, shit. I thought it would be as easy as starting it. This now needs interactive troubleshooting, something which is this site is not designed for."}, {"owner": {"reputation": 1, "user_id": 10027016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6728fe35e525f4e6f1a516fbd402f695?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/10027016/patrick"}, "edited": false, "score": 0, "creation_date": 1530627790, "post_id": 51156172, "comment_id": 89297290, "body": "Because I tried to copy all settings from the old server, I found this sidekiq and set the init.d script. Maybe I missed somewhere some parameter to have the app sending in some &quot;sidekiq queue&quot;, or maybe sidekiq parameters don&#39;t have mailer active? What do you think is &quot;interactive troubleshooting&quot;?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530627999, "post_id": 51156172, "comment_id": 89297452, "body": "&quot;What do you think is &quot;interactive troubleshooting&quot;?&quot; - something that would shorten the feedback loop for an expert/answerer. Like a remote desktop access or a live shell."}, {"owner": {"reputation": 9579, "user_id": 1013031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f51ec049afbab6feac78771488d91300?s=128&d=identicon&r=PG", "display_name": "Iuri G.", "link": "https://stackoverflow.com/users/1013031/iuri-g"}, "edited": false, "score": 0, "creation_date": 1530646104, "post_id": 51156172, "comment_id": 89306743, "body": "Can you show the line thats used for sending email? Also, what service are you using to send emails? does it have a log for your account to see if that mail server is getting mail from your app?"}], "owner": {"reputation": 1, "user_id": 10027016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6728fe35e525f4e6f1a516fbd402f695?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/10027016/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530758322, "creation_date": 1530625416, "last_edit_date": 1530758322, "question_id": 51156172, "link": "https://stackoverflow.com/questions/51156172/ruby-on-rails-application-not-sending-emails", "title": "Ruby on rails application not sending emails", "body": "<p>I am new here, very experienced in Linux, very new at Ruby.</p>\n\n<p>I have fully reinstalled an old damaged Debian 7.8 server running a Ruby On Rails application with PostgreSql db.</p>\n\n<p>To run the new installation, I had to change the <em>Gemfile</em> to adapt to new ruby packages versions.</p>\n\n<p>The new server is running Debian GNU/Linux 9 (stretch) and all ruby packages have been installed from debian packages for system-wide use.</p>\n\n<p>Now it's running ruby 2.3.3, pretty well. First time I have installed such server, I am pretty proud of this.</p>\n\n<p>But emails can't be sent from the application. I can send an email from this server using the Linux mail command, sendmail daemon is running, but the ruby app can't send emails.</p>\n\n<p>I got the errors initially, then i changed the mail paramters in the <em>config/environments/production.rb</em> as follows, and no more errors apparently:</p>\n\n<pre><code>Rails.application.configure do\n  config.cache_classes = true\n  config.eager_load = true\n  config.consider_all_requests_local       = false\n  config.action_controller.perform_caching = true\n  config.serve_static_files = false\n  config.assets.js_compressor = :uglifier\n  config.assets.compile = true\n  config.assets.digest = true\n  config.log_level = :info\n  config.i18n.fallbacks = true\n  config.active_support.deprecation = :notify\n  config.action_mailer.smtp_settings = {\n    address: \"mailserver.com\",\n    port: 465,\n    domain: Rails.application.secrets.domain_name,\n    authentication: :plain,\n    enable_starttls_auto: true,\n    user_name: Rails.application.secrets.email_provider_username,\n    password: Rails.application.secrets.email_provider_password\n  }\n  config.action_mailer.default_url_options = { \n    :host =&gt; Rails.application.secrets.domain_name,\n    :protocol =&gt; 'https' \n  }\n  config.action_mailer.default_options = {\n    from: \"Centre Sesame &lt;contact@mailserver.com&gt;\",\n    reply_to: \"contact@mailserver.com\"\n  }\n  config.action_mailer.delivery_method = :smtp\n  config.action_mailer.perform_deliveries = true\n  config.action_mailer.raise_delivery_errors = true\n  config.log_formatter = ::Logger::Formatter.new\n  config.active_record.dump_schema_after_migration = false\nend\n</code></pre>\n\n<p>I searched in the production logs for some request to send an email:</p>\n\n<pre><code>I, [2018-07-02T19:16:08.110776 #17945]  INFO -- : Started GET \"/users/password/new\" for xx.yyy.zzz.15 at 2018-07-02 19:16:08 +0200\nI, [2018-07-02T19:16:08.114272 #17945]  INFO -- : Processing by Devise::PasswordsController#new as HTML\nI, [2018-07-02T19:16:08.123870 #17945]  INFO -- :   Rendered devise/passwords/new.html.erb within layouts/application (2.1ms)\nI, [2018-07-02T19:16:08.124890 #17945]  INFO -- :   Rendered layouts/_topbar.html.erb (0.2ms)\nI, [2018-07-02T19:16:08.125064 #17945]  INFO -- :   Rendered layouts/_messages.html.erb (0.1ms)\nI, [2018-07-02T19:16:08.125255 #17945]  INFO -- : Completed 200 OK in 11ms (Views: 9.7ms | ActiveRecord: 0.0ms)\nI, [2018-07-02T19:16:11.617686 #17945]  INFO -- : Started POST \"/users/password\" for xx.yyy.zzz.15 at 2018-07-02 19:16:11 +0200\nI, [2018-07-02T19:16:11.619438 #17945]  INFO -- : Processing by Devise::PasswordsController#create as HTML\nI, [2018-07-02T19:16:11.619535 #17945]  INFO -- :   Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"yI1T7u39N/xxxxxxxxxxxxxxxl8EqvuXupFiijmMtMDHimdtsGMIKkF9HzP17PMsEflWdFn/g==\", \"user\"=&gt;{\"email\"=&gt;\"name@yahoo.fr\"}, \"commit\"=&gt;\"Valider\"}\nI, [2018-07-02T19:16:11.630951 #17945]  INFO -- :   Rendered devise/passwords/new.html.erb within layouts/application (3.8ms)\nI, [2018-07-02T19:16:11.632109 #17945]  INFO -- :   Rendered layouts/_topbar.html.erb (0.2ms)\nI, [2018-07-02T19:16:11.632296 #17945]  INFO -- :   Rendered layouts/_messages.html.erb (0.1ms)\nI, [2018-07-02T19:16:11.632480 #17945]  INFO -- : Completed 200 OK in 13ms (Views: 6.2ms | ActiveRecord: 0.5ms)\n</code></pre>\n\n<p>Where should I lookup for more details? Did I miss something?</p>\n\n<p>Apparently everything is correct, no error.</p>\n\n<p>Where should I find errors.</p>\n\n<p>Of course I have checked email account credentials on email server.</p>\n\n<p>Could you help?</p>\n\n<p>Many thanks.</p>\n\n<p>Patrick</p>\n"}, {"tags": ["ruby", "performance", "optimization", "refactoring", "ruby-hash"], "comments": [{"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1530624142, "post_id": 51155512, "comment_id": 89294760, "body": "depends on what you intend to do. some more context will definitely help. if you are ok with <i>mutating</i> <code>h</code>, you can just do <code>h[:a] &amp;&amp; h[:a].upcase!</code> or <code>h[:a].try(:upcase!)</code>"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 2, "creation_date": 1530624371, "post_id": 51155512, "comment_id": 89294910, "body": "to answer your question on perf and optimization with second approach, it&#39;s better you do some benchmarking around it. You are compensating for hash-lookup with storing in a variable."}, {"owner": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "reply_to_user": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1530624556, "post_id": 51155512, "comment_id": 89295054, "body": "@kiddorails <code>upcase!</code> OR <code>upcase</code> both will do the same as I am anyways using another hash to store its value. Also trying to benchmark with the <code>try</code> method."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1530625793, "post_id": 51155512, "comment_id": 89295918, "body": "They will not do the same thing as <code>upcase!</code> may alter the value in <code>h</code> as well as it may return <code>nil</code>. e.g. <code>&#39;A&#39;.upcase! #=&gt; nil</code> @kiddorails&#39; point was <code>new_hash</code> is not needed if altering <code>h[:a]</code>, and by association <code>h</code>, directly is an acceptable solution. This way would technically be more performant albeit infinitesimally so ."}, {"owner": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1530626446, "post_id": 51155512, "comment_id": 89296402, "body": "@engineersmnky <code>new_hash</code> is important in my case."}, {"owner": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "edited": false, "score": 0, "creation_date": 1530626516, "post_id": 51155512, "comment_id": 89296451, "body": "I have updated the question with benchmark for 1000 count. It seems assigning new variable is way too faster."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1530627746, "post_id": 51155512, "comment_id": 89297260, "body": "@kiddorails there is no <code>try</code> method in Ruby."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1530627781, "post_id": 51155512, "comment_id": 89297286, "body": "@mudasobwa there also is no <code>present?</code> method :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1530627806, "post_id": 51155512, "comment_id": 89297304, "body": "@engineersmnky oh, indeed. What language is it in the first place?"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1530628058, "post_id": 51155512, "comment_id": 89297489, "body": "share the benchmark code please, the size of your sample hash will matter greatly"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1530628258, "post_id": 51155512, "comment_id": 89297627, "body": "@mudasobwa since he is using <code>present?</code>, I presumed he was running this in RoR which also has <code>try</code>. but I get your point."}, {"owner": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "edited": false, "score": 0, "creation_date": 1530682712, "post_id": 51155512, "comment_id": 89315934, "body": "to run benchmarks I included <code>active_support&#47;core_ext&#47;object&#47;try</code> &amp; replaced <code>present?</code> with <code>!nil?</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "edited": false, "score": 0, "creation_date": 1530626766, "post_id": 51155837, "comment_id": 89296607, "body": "I have updated the question with benchmark for 1000 count. It seems assigning new variable is way too faster. In memory benchmarking as well assigning new variable seems to be consuming less memory."}, {"owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "reply_to_user": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "edited": false, "score": 0, "creation_date": 1530627188, "post_id": 51155837, "comment_id": 89296893, "body": "Thanks for providing benchmarks! not sure if the difference between <code>0.000014</code> and <code>0.000005</code> can be put as &quot;way too faster&quot;. time is &quot;nearly&quot; the same in both cases, so the effect on speed can easily be neglected"}], "tags": [], "owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "is_accepted": false, "score": 1, "last_activity_date": 1530624444, "creation_date": 1530624444, "answer_id": 51155837, "question_id": 51155512, "link": "https://stackoverflow.com/questions/51155512/ruby-if-statement-optimization-refactor-best-practice/51155837#51155837", "title": "Ruby if statement optimization refactor best practice", "body": "<p>Optimization wears different shoes, there's memory optimization, performance optimization, and there's the readability and how the code is structured. </p>\n\n<p><strong>Performance</strong>: There's nearly no effect whatsoever on the speed and performance because the hash is being accessed in O(1). Try using <code>benchmark</code> to see yourself that there's nearly no difference</p>\n\n<p><a href=\"https://www.engineyard.com/blog/hash-lookup-in-ruby-why-is-it-so-fast\" rel=\"nofollow noreferrer\">You can check this article about hash lookup and why it's so fast</a> </p>\n\n<p><strong>Memory</strong>: Your friend's Code is less optimized than yours because he initialized another object <code>a</code> while yours doesn't.</p>\n\n<p><strong>Readability and Style</strong>: At the first glance your friend's code looks like fewer lines and more descriptive. But keep in mind that you may need to do this for every key/value in the hash, so you may need to have <code>a</code>, <code>b</code>, and it goes on as your hash goes on (When it goes like that it's better to iterate over the hash of course). Not too much to look on here tbh</p>\n"}, {"comments": [{"owner": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "edited": false, "score": 0, "creation_date": 1530683108, "post_id": 51157559, "comment_id": 89316088, "body": "Thanks for more detailed benchmarks. It looks like <code>new_var_wo_rails</code> is better and looking more descriptive in code as well. I will just remove the <code>present</code> check."}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 1, "last_activity_date": 1530630956, "last_edit_date": 1530630956, "creation_date": 1530629593, "answer_id": 51157559, "question_id": 51155512, "link": "https://stackoverflow.com/questions/51155512/ruby-if-statement-optimization-refactor-best-practice/51157559#51157559", "title": "Ruby if statement optimization refactor best practice", "body": "<p>Depending on your circumstances rails methods like <code>present?</code> can be dirty and definitely impact performance. If you are only concerned about a <code>nil</code> check and not things like empty <code>Array</code> or blank <code>String</code> then using pure ruby methods will be \"much\" faster (the quotes are to emphasize the fact that performance is completely inconsequential in this basic example)</p>\n\n<p>Since we are benchmarking things. </p>\n\n<p><strong>Setup</strong> </p>\n\n<pre><code>h = {\n  a: 'a',\n  b: 'b'\n}\n\n\nclass Object\n  def present? \n    !blank?\n  end\n  def blank?\n    respond_to?(:empty?) ? !!empty? : !self\n  end\nend\n\ndef hash_lookup(h)\n  new_hash = {}\n  new_hash[:a] = h[:a].upcase if h[:a].present?\n  new_hash\nend\n\ndef new_var(h)\n  new_hash = {}\n  a = h[:a]\n  new_hash[:a] = a.upcase if a.present?\n  new_hash\nend\n\ndef hash_lookup_w_safe_nav(h)\n  new_hash = {}\n  new_hash[:a] = h[:a]&amp;.upcase\n  new_hash\nend\n\ndef hash_lookup_wo_rails(h)\n  new_hash = {}\n  new_hash[:a] = h[:a].upcase if h[:a]\n  new_hash\nend\n\ndef new_var_wo_rails(h)\n  new_hash = {}\n  a = h[:a]\n  new_hash[:a] = a.upcase if a\n  new_hash\nend\n</code></pre>\n\n<p><strong>Benchmarks</strong></p>\n\n<pre><code>N = [1_000,10_000,100_000]\nrequire 'benchmark'\nN.each do |n|\n  puts \"OVER #{n} ITERATIONS\"\n  Benchmark.bm do |x|\n    x.report(:new_var) { n.times {new_var(h)}}\n    x.report(:hash_lookup) { n.times {hash_lookup(h)}}\n    x.report(:hash_lookup_w_safe_nav) { n.times {hash_lookup_w_safe_nav(h)}}\n    x.report(:hash_lookup_wo_rails) { n.times {hash_lookup_wo_rails(h)}}\n    x.report(:new_var_wo_rails) { n.times {new_var_wo_rails(h)}}\n  end\nend\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>OVER 1000 ITERATIONS\n                        user     system      total        real\nnew_var                 0.001075   0.000159   0.001234 (  0.001231)\nhash_lookup             0.002441   0.000000   0.002441 (  0.002505)\nhash_lookup_w_safe_nav  0.001077   0.000000   0.001077 (  0.001077)\nhash_lookup_wo_rails    0.001100   0.000000   0.001100 (  0.001145)\nnew_var_wo_rails        0.001015   0.000000   0.001015 (  0.001016)\nOVER 10000 ITERATIONS\n                        user     system      total        real\nnew_var                 0.010321   0.000000   0.010321 (  0.010329)\nhash_lookup             0.010104   0.000015   0.010119 (  0.010123)\nhash_lookup_w_safe_nav  0.007211   0.000000   0.007211 (  0.007213)\nhash_lookup_wo_rails    0.007508   0.000000   0.007508 (  0.017302)\nnew_var_wo_rails        0.008186   0.000026   0.008212 (  0.016679)\nOVER 100000 ITERATIONS\n                        user     system      total        real\nnew_var                 0.099400   0.000249   0.099649 (  0.192481)\nhash_lookup             0.101419   0.000009   0.101428 (  0.199788)\nhash_lookup_w_safe_nav  0.078156   0.000010   0.078166 (  0.140796)\nhash_lookup_wo_rails    0.078743   0.000000   0.078743 (  0.166815)\nnew_var_wo_rails        0.073271   0.000000   0.073271 (  0.125869)\n</code></pre>\n"}], "owner": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "accepted_answer_id": 51157559, "answer_count": 2, "score": 0, "last_activity_date": 1530630956, "creation_date": 1530623469, "last_edit_date": 1530626863, "question_id": 51155512, "link": "https://stackoverflow.com/questions/51155512/ruby-if-statement-optimization-refactor-best-practice", "title": "Ruby if statement optimization refactor best practice", "body": "<p>I am having a very common refactor situation here with me, and after going through a few blogs I still didn't get any satisfactory comment on the same; so asking a question here.</p>\n\n<pre><code>h = {\n  a: 'a',\n  b: 'b'\n}\nnew_hash = {}\nnew_hash[:a] = h[:a].upcase if h[:a].present?\n</code></pre>\n\n<p>According to my friend, this code can be refactored in following way to improve performance.</p>\n\n<pre><code>a = h[:a]\nnew_hash[:a] = a.upcase if a.present?\n</code></pre>\n\n<p>At first glance it looks a little optimized. But is it something that'll make a lot of difference or its an over-optimization? And which style should be preferred?</p>\n\n<blockquote>\n  <p>Looking for an expert advice :)</p>\n</blockquote>\n\n<p><strong>UPDATE with <code>Benchmark n = 1000</code></strong></p>\n\n<pre><code>              user     system      total        real\nhash lookup  0.000000   0.000000   0.000000 (  0.000014)\nnew var      0.000000   0.000000   0.000000 (  0.000005)\nAND op       0.000000   0.000000   0.000000 (  0.000018)\ntry          0.000000   0.000000   0.000000 (  0.000046)\n</code></pre>\n\n<p><strong>UPDATE with <code>Memory Benchmark</code> using gem <code>benchmark-memory</code></strong></p>\n\n<pre><code>Calculating -------------------------------------\n         hash lookup    40.000  memsize (    40.000  retained)\n                         1.000  objects (     1.000  retained)\n                         1.000  strings (     1.000  retained)\n             new var     0.000  memsize (     0.000  retained)\n                         0.000  objects (     0.000  retained)\n                         0.000  strings (     0.000  retained)\n              AND op    40.000  memsize (    40.000  retained)\n                         1.000  objects (     1.000  retained)\n                         1.000  strings (     1.000  retained)\n                 try   200.000  memsize (    40.000  retained)\n                         5.000  objects (     1.000  retained)\n                         1.000  strings (     1.000  retained)\n</code></pre>\n"}, {"tags": ["ruby", "activerecord"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1530623121, "post_id": 51155282, "comment_id": 89293992, "body": "<code>Client.where(id: (var..var +14))</code> should do it. Although I would probably recommend <code>Client.limit(15).offset(var).order(:id)</code> which will order by id and select the next  15 based on the offset"}], "answers": [{"comments": [{"owner": {"reputation": 2571, "user_id": 6822876, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/i6dGp.jpg?s=128&g=1", "display_name": "Carrein", "link": "https://stackoverflow.com/users/6822876/carrein"}, "edited": false, "score": 0, "creation_date": 1530624707, "post_id": 51155446, "comment_id": 89295158, "body": "I&#39;ll try this. Just to inquire, how does ActiveRecord format the return values? Json?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 2571, "user_id": 6822876, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/i6dGp.jpg?s=128&g=1", "display_name": "Carrein", "link": "https://stackoverflow.com/users/6822876/carrein"}, "edited": false, "score": 1, "creation_date": 1530625599, "post_id": 51155446, "comment_id": 89295774, "body": "@Carrein they will be returned as instances of the <code>Client</code> class as you have shown in your post"}], "tags": [], "owner": {"reputation": 195, "user_id": 9241438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/024ae9f1a10f89fe07ea3e4fc4b00803?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Schneider", "link": "https://stackoverflow.com/users/9241438/jay-schneider"}, "is_accepted": true, "score": 3, "last_activity_date": 1530623277, "creation_date": 1530623277, "answer_id": 51155446, "question_id": 51155282, "link": "https://stackoverflow.com/questions/51155282/ruby-activerecord-getting-a-range-up-to-last-entry/51155446#51155446", "title": "Ruby ActiveRecord getting a range up to last entry?", "body": "<pre><code>Client.offset(15 * iteration).first(15)\n</code></pre>\n\n<p>is what I would recommend here. Then iteration should be 0 for the first 15, 1 the second time you refresh your list. Of course you can adjust the way you compute your offset.</p>\n\n<p>You might want to specify a <code>order</code> though, to keep it consistent.</p>\n"}, {"tags": [], "owner": {"reputation": 153, "user_id": 3761042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ywHjQ.png?s=128&g=1", "display_name": "Kenigbolo", "link": "https://stackoverflow.com/users/3761042/kenigbolo"}, "is_accepted": false, "score": 0, "last_activity_date": 1530623563, "creation_date": 1530623563, "answer_id": 51155547, "question_id": 51155282, "link": "https://stackoverflow.com/questions/51155282/ruby-activerecord-getting-a-range-up-to-last-entry/51155547#51155547", "title": "Ruby ActiveRecord getting a range up to last entry?", "body": "<pre><code>Client.limit(15).offset(var).order(:id)\n</code></pre>\n\n<p>This is what I would suggest as to the best of my knowledge shouldn't throw you any errors</p>\n"}], "owner": {"reputation": 2571, "user_id": 6822876, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/i6dGp.jpg?s=128&g=1", "display_name": "Carrein", "link": "https://stackoverflow.com/users/6822876/carrein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 51155446, "answer_count": 2, "score": 1, "last_activity_date": 1530623563, "creation_date": 1530622765, "question_id": 51155282, "link": "https://stackoverflow.com/questions/51155282/ruby-activerecord-getting-a-range-up-to-last-entry", "title": "Ruby ActiveRecord getting a range up to last entry?", "body": "<p>Suppose I have 100 entries in my database, my mobile application has an infinite listview which queries the database for the entries.</p>\n\n<p>The application displays items in batches of 15, once a user reaches the end of the 15 items, the application will query for the next 15 items. This means that there will be a remained of 10 items to make a total 100 items.</p>\n\n<p>I have tried looking at some of the ActiveRecord's method such as <code>find</code>:</p>\n\n<pre><code># Find the clients with primary keys 1 and 10.\nclients = Client.find([var, var+14]) # var integer is provided by GET request.\n# =&gt; [#&lt;Client id: 1, first_name: \"Lifo\"&gt;, #&lt;Client id: 10, first_name: \"Ryan\"&gt;]\n</code></pre>\n\n<p>However, it is noted that <code>The find method will raise an ActiveRecord::RecordNotFound exception unless a matching record is found for all of the supplied primary keys.</code></p>\n\n<p>How then would I go about fetching the last 10 items to show on screen? Also, is it possible to get ActiveRecord to return a value when there are no items in range so I can display an <code>all items shown</code> message?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 114, "user_id": 533062, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71e3c96181ce3b3b8cb24244eb7ed6a1?s=128&d=identicon&r=PG", "display_name": "Grey", "link": "https://stackoverflow.com/users/533062/grey"}, "edited": false, "score": 1, "creation_date": 1530624280, "post_id": 51155472, "comment_id": 89294835, "body": "No, i don&#39;t want to remove anything from the db. I want report.dosages.size at the end to give me 0. I don&#39;t understand why rails set the destroyed flag instead of deleting the object."}], "tags": [], "owner": {"reputation": 153, "user_id": 3761042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ywHjQ.png?s=128&g=1", "display_name": "Kenigbolo", "link": "https://stackoverflow.com/users/3761042/kenigbolo"}, "is_accepted": false, "score": 0, "last_activity_date": 1530623369, "creation_date": 1530623369, "answer_id": 51155472, "question_id": 51155225, "link": "https://stackoverflow.com/questions/51155225/delete-a-relationship-in-a-rails-model/51155472#51155472", "title": "Delete a relationship in a Rails model", "body": "<p>If I understand you correctly, you would like to remove the dosage from the db hence rendering the dosage as <code>deleted</code> but would still like to keep the report object? If this is your use case then first you should know that report will stay regardless of the dosage being deleted since its a 1-* (one to many relationship) however you will need to take a look at the difference between <code>delete</code> and <code>destroy</code> which the stackoverflow community has helped in answering here <a href=\"https://stackoverflow.com/questions/22757450/difference-between-destroy-and-delete\">Difference between Destroy and Delete</a></p>\n\n<p>As a bonus, do take a look at the shebang(!) method in ruby and when to use it e.g. <code>delete!</code> <code>destroy!</code></p>\n"}, {"tags": [], "owner": {"reputation": 1456, "user_id": 2295410, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/PYmkM.png?s=128&g=1", "display_name": "Alex.U", "link": "https://stackoverflow.com/users/2295410/alex-u"}, "is_accepted": true, "score": 4, "last_activity_date": 1530630292, "last_edit_date": 1530630292, "creation_date": 1530625648, "answer_id": 51156258, "question_id": 51155225, "link": "https://stackoverflow.com/questions/51155225/delete-a-relationship-in-a-rails-model/51156258#51156258", "title": "Delete a relationship in a Rails model", "body": "<p>TL;DR: this will do what you need:</p>\n\n<pre><code>report = Report.first\ndosage = report.dosages.build\nreport.dosages.size // 1\nto_delete_dosage = report.dosages.first\nreport.dosages.delete(to_delete_dosage)\nreport.dosages.size // 0\n</code></pre>\n\n<p>For more information, check the docs for <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-delete\" rel=\"nofollow noreferrer\"><code>ActiveRecord_Associations_CollectionProxy::delete</code></a></p>\n\n<hr>\n\n<p>First, <code>ActiveRecord::Relation#build</code> is an alias for <a href=\"https://apidock.com/rails/ActiveRecord/Base/new/class\" rel=\"nofollow noreferrer\"><code>ActiveRecord::Relation#new</code></a>:</p>\n\n<blockquote>\n  <p>New objects can be instantiated as either empty (pass no construction parameter) or pre-set with attributes but not yet saved (pass a hash with key names matching the associated table column names). In both instances, valid attribute keys are determined by the column names of the associated table \u2013 hence you can\u2019t have attributes that aren\u2019t part of the table columns.</p>\n</blockquote>\n\n<p>if you want the first element deleted you would have to persist it to the database, otherwise rails does exactly what you experienced, set the destroyed flag.</p>\n\n<p>Try the following sequence:</p>\n\n<pre><code>report = Report.first\ndosage = report.dosages.build\ndosage.save\nreport.dosages.size   # 1\nreport.dosages.first.destroy\nreport.dosages.size  # 0\n</code></pre>\n\n<p>I set up the equivalent to your question and this is the output:</p>\n\n<p>Your scenario:</p>\n\n<pre><code>2.4.0 :007 &gt; r.dosages.build\n =&gt; #&lt;Dosage id: nil, title: nil, created_at: nil, updated_at: nil, report_id: 1&gt;\n2.4.0 :008 &gt; r.dosages.size\n =&gt; 1\n2.4.0 :009 &gt; r.dosages.first.destroy\n   (0.1ms)  begin transaction\n   (0.0ms)  commit transaction\n =&gt; #&lt;Dosage id: nil, title: nil, created_at: nil, updated_at: nil, report_id: 1&gt;\n2.4.0 :010 &gt; r.dosages.size\n =&gt; 1\n</code></pre>\n\n<p>My proposal:</p>\n\n<pre><code>2.4.0 :005 &gt; report = Report.first\n  Report Load (0.1ms)  SELECT  \"reports\".* FROM \"reports\" ORDER BY \"reports\".\"id\" ASC LIMIT ?  [[\"LIMIT\", 1]]\n =&gt; #&lt;Report id: 1, title: nil, date: nil, created_at: \"2018-07-03 14:00:08\", updated_at: \"2018-07-03 14:00:08\"&gt;\n2.4.0 :006 &gt; report.dosages.count\n   (0.1ms)  SELECT COUNT(*) FROM \"dosages\" WHERE \"dosages\".\"report_id\" = ?  [[\"report_id\", 1]]\n =&gt; 0\n2.4.0 :007 &gt; dosage = report.dosages.build\n =&gt; #&lt;Dosage id: nil, title: nil, created_at: nil, updated_at: nil, report_id: 1&gt;\n2.4.0 :008 &gt; dosage.save\n   (0.1ms)  begin transaction\n  SQL (0.7ms)  INSERT INTO \"dosages\" (\"created_at\", \"updated_at\", \"report_id\") VALUES (?, ?, ?)  [[\"created_at\", \"2018-07-03 14:06:08.709323\"], [\"updated_at\", \"2018-07-03 14:06:08.709323\"], [\"report_id\", 1]]\n   (0.9ms)  commit transaction\n =&gt; true\n2.4.0 :009 &gt; report.dosages.size\n   (0.2ms)  SELECT COUNT(*) FROM \"dosages\" WHERE \"dosages\".\"report_id\" = ?  [[\"report_id\", 1]]\n =&gt; 1\n2.4.0 :010 &gt; report.dosages.first.destroy\n  Dosage Load (0.2ms)  SELECT  \"dosages\".* FROM \"dosages\" WHERE \"dosages\".\"report_id\" = ? ORDER BY \"dosages\".\"id\" ASC LIMIT ?  [[\"report_id\", 1], [\"LIMIT\", 1]]\n   (0.0ms)  begin transaction\n  SQL (0.3ms)  DELETE FROM \"dosages\" WHERE \"dosages\".\"id\" = ?  [[\"id\", 1]]\n   (0.8ms)  commit transaction\n =&gt; #&lt;Dosage id: 1, title: nil, created_at: \"2018-07-03 14:06:08\", updated_at: \"2018-07-03 14:06:08\", report_id: 1&gt;\n2.4.0 :011 &gt; report.dosages.size\n   (0.2ms)  SELECT COUNT(*) FROM \"dosages\" WHERE \"dosages\".\"report_id\" = ?  [[\"report_id\", 1]]\n =&gt; 0\n</code></pre>\n\n<p>I believe this is what you need. The relationships are set like:</p>\n\n<pre><code>dosage.rb\nclass Dosage &lt; ApplicationRecord\n  belongs_to :report\nend\n\nreport.rb\nclass Report &lt; ApplicationRecord\n  has_many :dosages\nend\n</code></pre>\n\n<p>And the following migrations:</p>\n\n<pre><code>class ManyDosagesToReport &lt; ActiveRecord::Migration[5.0]\n  def change\n    add_column :dosages, :report_id, :integer\n  end\nend\n</code></pre>\n\n<p>In fact, if you try to persist the <code>dosage</code> object that you built but didn't persist, Rails will complain:</p>\n\n<pre><code>RuntimeError: can't modify frozen Hash\n</code></pre>\n\n<p>due to the <code>destroyed</code> attribute.</p>\n"}], "owner": {"reputation": 114, "user_id": 533062, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71e3c96181ce3b3b8cb24244eb7ed6a1?s=128&d=identicon&r=PG", "display_name": "Grey", "link": "https://stackoverflow.com/users/533062/grey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2762, "favorite_count": 0, "accepted_answer_id": 51156258, "answer_count": 2, "score": 2, "last_activity_date": 1530630292, "creation_date": 1530622608, "question_id": 51155225, "link": "https://stackoverflow.com/questions/51155225/delete-a-relationship-in-a-rails-model", "title": "Delete a relationship in a Rails model", "body": "<p>I'm using rails 5 and I have an ActiveRecord 'Report' with a one-to-many relationship called dosages.</p>\n\n<p>If on a new report:</p>\n\n<pre><code>report.dosages.size   # Returns 0\nreport.dosages.build\nreport.dosages.size   # 1, correct\nreport.dosages.first.destroy\nreport.dosages.size  # Still 1 !\n</code></pre>\n\n<p>I understand that it set dosage as 'destroyed' but it's possible to actually remove it from the list of relationship?\n(I can't save the report on db until later)</p>\n"}, {"tags": ["ruby", "sqlite", "sqlite3-ruby"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 1, "creation_date": 1530619887, "post_id": 51154193, "comment_id": 89291703, "body": "It is not talking about <code>execute</code> method, but about <code>@db</code> variable being <code>nil</code> at the time of calling."}, {"owner": {"reputation": 31, "user_id": 9786170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uuvyhU6hlmY/AAAAAAAAAAI/AAAAAAAAAAc/xLNI9avIz9w/photo.jpg?sz=128", "display_name": "vbhv", "link": "https://stackoverflow.com/users/9786170/vbhv"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 1, "creation_date": 1530621195, "post_id": 51154193, "comment_id": 89292565, "body": "Thanks a ton, man..!!! It was such a silly mistake... haha"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530624240, "post_id": 51154193, "comment_id": 89294819, "body": "If it solves your issue, i can post it as an answer OR you can do it."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 9786170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uuvyhU6hlmY/AAAAAAAAAAI/AAAAAAAAAAc/xLNI9avIz9w/photo.jpg?sz=128", "display_name": "vbhv", "link": "https://stackoverflow.com/users/9786170/vbhv"}, "is_accepted": true, "score": 0, "last_activity_date": 1530812350, "creation_date": 1530812350, "answer_id": 51197118, "question_id": 51154193, "link": "https://stackoverflow.com/questions/51154193/undefined-method-execute-for-nilnilclass/51197118#51197118", "title": "undefined method &#39;execute&#39; for nil:NilClass", "body": "<p>The problem in this was that the new class formed dynamically doesn't know about the connection variable '@db'. Hence the code solves the problem.</p>\n\n<blockquote>\n  <p>@class_created.instance_variable_set(:@database, @db)</p>\n</blockquote>\n\n<p>A big thanks to <a href=\"https://stackoverflow.com/users/2594185/jagdeep-singh\">Jagdeep Singh</a>.</p>\n"}], "owner": {"reputation": 31, "user_id": 9786170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uuvyhU6hlmY/AAAAAAAAAAI/AAAAAAAAAAc/xLNI9avIz9w/photo.jpg?sz=128", "display_name": "vbhv", "link": "https://stackoverflow.com/users/9786170/vbhv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 0, "accepted_answer_id": 51197118, "answer_count": 1, "score": 0, "last_activity_date": 1530812350, "creation_date": 1530619527, "question_id": 51154193, "link": "https://stackoverflow.com/questions/51154193/undefined-method-execute-for-nilnilclass", "title": "undefined method &#39;execute&#39; for nil:NilClass", "body": "<p>I am making a tool in ruby which can interact with databases.\nI am using <code>amalgalite</code> as an adapter for sqlite3.</p>\n\n<p>Code:</p>\n\n<pre><code>require 'amalgalite'\n# this is class RQuery\nclass RQuery\n  def db_open(db_name)\n    @db = Amalgalite::Database.new \"#{db_name}.db\"\n    make_class\n  end\n\n  def exec_this(query)\n    @db.execute(query)\n  end\n\n  def make_class\n    tables_list = exec_this(\"select name from sqlite_master where type='table'\")\n    tables_list.each do |table|\n      @class_created = Object.const_set(table[0].capitalize, Class.new)\n      @class_created.class_eval do\n        define_singleton_method :first do\n          RQuery.new.exec_this(\"select * from #{table[0]} order by #{table[0]}.id ASC limit 1\")\n        end\n      end\n    end\n  end\n\n  def eval_this(input)\n    instance_eval(input)\n  end\n\n  def code\n    print '&gt;&gt;'\n    input = gets\n    exit if input =~ /^q$/\n    puts eval_this(input)\n    code\n  end\nend\n</code></pre>\n\n<p>Now when I am running the code everything works fine until I call <code>table_name.first</code></p>\n\n<p>It gives output</p>\n\n<pre><code>vbhv@fsociety ~/git/R-Query/bin $ ruby main.rb \nEnter the code or q for quit\n&gt;&gt;db_open('vbhv')\nusers\npersons\npeople\nprogrammers\n&gt;&gt;Users.first\n/home/vbhv/git/R-Query/lib/r-query.rb:36:in `instance_eval': undefined  method `execute' for nil:NilClass (NoMethodError)\nDid you mean?  exec\nfrom /home/vbhv/git/R-Query/lib/r-query.rb:29:in `block (3 levels) in make_class'\nfrom (eval):1:in `eval_this'\nfrom /home/vbhv/git/R-Query/lib/r-query.rb:36:in `instance_eval'\nfrom /home/vbhv/git/R-Query/lib/r-query.rb:36:in `eval_this'\nfrom /home/vbhv/git/R-Query/lib/r-query.rb:43:in `code'\nfrom /home/vbhv/git/R-Query/lib/r-query.rb:44:in `code'\nfrom /home/vbhv/git/R-Query/lib/r-query.rb:44:in `code'\nfrom main.rb:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>Now the 'execute' function it is talking about is inside <code>amalgalite</code>. What am I doing wrong here?? Thanks in Advance!</p>\n"}, {"tags": ["ruby", "rspec", "faker"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1530618107, "post_id": 51153689, "comment_id": 89290600, "body": "It&#39;s pure Ruby. Are you using fixtures or factories?"}, {"owner": {"reputation": 475, "user_id": 5950598, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Ihgv3.jpg?s=128&g=1", "display_name": "Jan Krupa", "link": "https://stackoverflow.com/users/5950598/jan-krupa"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1530618199, "post_id": 51153689, "comment_id": 89290668, "body": "I&#39;am using factories"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530618397, "post_id": 51153689, "comment_id": 89290780, "body": "Hitting in the dark. Try <code>FFaker::InternetSE.login_user_name(8..20)</code>. Min length: 8 and Max length: 20."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1530618418, "post_id": 51153689, "comment_id": 89290793, "body": "You can try <code>FFaker::InternetSE.login_user_name[minimum_length, maximum_length]</code>. If you need it more than once, you can use a transient."}, {"owner": {"reputation": 475, "user_id": 5950598, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Ihgv3.jpg?s=128&g=1", "display_name": "Jan Krupa", "link": "https://stackoverflow.com/users/5950598/jan-krupa"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 1, "creation_date": 1530618540, "post_id": 51153689, "comment_id": 89290874, "body": "@JagdeepSingh <code>FFaker::InternetSE.login_user_name(8..20)</code>  <code>ArgumentError: wrong number of arguments (given 1, expected 0)</code>"}, {"owner": {"reputation": 475, "user_id": 5950598, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Ihgv3.jpg?s=128&g=1", "display_name": "Jan Krupa", "link": "https://stackoverflow.com/users/5950598/jan-krupa"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1530618619, "post_id": 51153689, "comment_id": 89290919, "body": "@SebastianPalma <code>FFaker::InternetSE.login_user_name[8, 20]</code> =&gt; <code>&quot;&quot;</code>   <code>FFaker::InternetSE.login_user_name[8, 20]</code> =&gt; &quot;dstrm&quot;"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1530619144, "post_id": 51153689, "comment_id": 89291248, "body": "That&#39;s it, you can start from the index zero if you want to &quot;truncate&quot; your string."}, {"owner": {"reputation": 475, "user_id": 5950598, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Ihgv3.jpg?s=128&g=1", "display_name": "Jan Krupa", "link": "https://stackoverflow.com/users/5950598/jan-krupa"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1530619269, "post_id": 51153689, "comment_id": 89291322, "body": "@SebastianPalma  Well yes, but when it generates a string with length 2 and I need minimum to be 8, then there is nothing to truncate."}, {"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 0, "creation_date": 1530630943, "post_id": 51153689, "comment_id": 89299342, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/51071115/specifying-minimum-length-when-using-ffakerinternet-user-name\">Specifying minimum length when using FFaker::Internet.user_name</a>"}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 2, "last_activity_date": 1530619806, "creation_date": 1530619806, "answer_id": 51154301, "question_id": 51153689, "link": "https://stackoverflow.com/questions/51153689/define-minimum-and-maximum-length/51154301#51154301", "title": "Define minimum and maximum length", "body": "<p>You can store the result of <code>FFaker::InternetSE.login_user_name</code> and check if the size of the string generated is between the minimum and maximum length you need, if so, return it, otherwise call the function again:</p>\n\n<pre><code>require 'ffaker'\n\ndef login_user_name(min, max)\n  raise 'max can not be minor than min' if min &gt; max\n  username = FFaker::InternetSE.login_user_name\n  username.size.between?(min, max) ? username : login_user_name(min, max)\nend\n\np login_user_name(8, 9) # christian\np login_user_name(9, 8) # `login_user_name': max can not be minor than min (RuntimeError)\n</code></pre>\n"}], "owner": {"reputation": 475, "user_id": 5950598, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Ihgv3.jpg?s=128&g=1", "display_name": "Jan Krupa", "link": "https://stackoverflow.com/users/5950598/jan-krupa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 51154301, "answer_count": 1, "score": 2, "last_activity_date": 1530619806, "creation_date": 1530617903, "last_edit_date": 1530618226, "question_id": 51153689, "link": "https://stackoverflow.com/questions/51153689/define-minimum-and-maximum-length", "title": "Define minimum and maximum length", "body": "<p>How is possible to define a minimum and maximum length of user login generated by</p>\n\n<pre><code>FFaker::InternetSE.login_user_name\n</code></pre>\n\n<p>Used gem <code>FFaker</code></p>\n"}, {"tags": ["ruby", "puppet", "facter"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530617800, "post_id": 51153436, "comment_id": 89290429, "body": "<i>&quot;The output of the fact is a String like this: [&#39;user1&#39;, &#39;user2&#39;, &#39;user3&#39;]&quot;</i> - It does not look like a string. It is an array."}, {"owner": {"reputation": 39, "user_id": 6457058, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/85146f641f3486b6c51747cc79c70e23?s=128&d=identicon&r=PG&f=1", "display_name": "Studentus", "link": "https://stackoverflow.com/users/6457058/studentus"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 1, "creation_date": 1530617994, "post_id": 51153436, "comment_id": 89290532, "body": "@JagdeepSingh Yeah it looks like an array. But the point is, that it is a string with the content of an array. If I use validate_array(), It also tells me that it&#39;s not an array but a string."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530618536, "post_id": 51153436, "comment_id": 89290872, "body": "You will need to elaborate &quot;string with content of an array&quot;. Can you paste what you actually have in your terminal?"}, {"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1530618669, "post_id": 51153436, "comment_id": 89290954, "body": "I am unable to reproduce this. That fact code outputs an array for me and not a string. I double checked it with <code>.instance_of?(Array)</code> to verify. You will need to post more information to verify that your question matches your situation."}, {"owner": {"reputation": 39, "user_id": 6457058, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/85146f641f3486b6c51747cc79c70e23?s=128&d=identicon&r=PG&f=1", "display_name": "Studentus", "link": "https://stackoverflow.com/users/6457058/studentus"}, "reply_to_user": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1530618928, "post_id": 51153436, "comment_id": 89291117, "body": "@MattSchuchard Yeah inside of the ruby code/fact, it is an array. But the fact doesn&#39;t pass it as array to puppet (but as a string). validate_array($::users) tells me  &quot;[\\&quot;user1\\&quot;, \\&quot;user2\\&quot;, \\&quot;user3\\&quot;]&quot; is not an Array.  It looks to be a String"}, {"owner": {"reputation": 2031, "user_id": 670339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942f0170639d3fd6d2bd3a2ce057e3e7?s=128&d=identicon&r=PG", "display_name": "Marc Talbot", "link": "https://stackoverflow.com/users/670339/marc-talbot"}, "edited": false, "score": 1, "creation_date": 1530619680, "post_id": 51153436, "comment_id": 89291573, "body": "This is pretty much a textbook example of a method that does too much that should be broken up so that you can test and understand the components better individually."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 6457058, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/85146f641f3486b6c51747cc79c70e23?s=128&d=identicon&r=PG&f=1", "display_name": "Studentus", "link": "https://stackoverflow.com/users/6457058/studentus"}, "edited": false, "score": 0, "creation_date": 1530618505, "post_id": 51153746, "comment_id": 89290856, "body": "Sorry for my wrong output. It is already like [&quot;user1&quot;, &quot;user2&quot;, &quot;user3&quot;]  but the output is just a string with the content of above. I can only pass a string from facter to puppet. Inside the fact, it is an array I guess."}], "tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1530618126, "creation_date": 1530618126, "answer_id": 51153746, "question_id": 51153436, "link": "https://stackoverflow.com/questions/51153436/get-array-of-strings-from-facter-into-puppet/51153746#51153746", "title": "Get array of strings from Facter into Puppet", "body": "<p>Assuming, you have this as the output of <code>Factor.add</code>:</p>\n\n<pre><code>output = '[\"user1\", \"user2\", \"user3\"]'\n</code></pre>\n\n<p>You can convert it to an <code>Array</code> with the help of <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/json/rdoc/JSON.html\" rel=\"nofollow noreferrer\"><code>JSON</code></a>:</p>\n\n<pre><code>require 'json'\n\nJSON.parse output\n =&gt; [\"user1\", \"user2\", \"user3\"] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 1, "last_activity_date": 1530626900, "creation_date": 1530626900, "answer_id": 51156708, "question_id": 51153436, "link": "https://stackoverflow.com/questions/51153436/get-array-of-strings-from-facter-into-puppet/51156708#51156708", "title": "Get array of strings from Facter into Puppet", "body": "<blockquote>\n  <p>The output of the fact is a String like this: [\"user1\", \"user2\", \"user3\"]</p>\n</blockquote>\n\n<p>No, it isn't.  The Ruby code you presented in the fact's <code>setcode</code> block evaluates to an array.  That expression provides the value of the fact.  It is an array.</p>\n\n<p>It is possible, however, that Puppet <em>converts</em> that array to a string after receiving it from Facter.  Puppet 3 did this by default, but had a boolean <code>stringify_facts</code> configuration setting that could prevent that behavior.  Puppet 4 retained that setting but deprecated it and reversed its default value (to <code>false</code>).  Puppet 5 removed the setting, and never stringifies fact values.</p>\n\n<p>Therefore, if you are using (obsolete) Puppet 3 then you can avoid fact stringification by setting</p>\n\n<pre><code>stringify_facts = false\n</code></pre>\n\n<p>in the <code>[main]</code> section of your <code>puppet.conf</code> files on the master and all agents.  You can do the same on Puppet 4, but there you can also just ensure that the <code>stringify_facts</code> setting is not  explicitly set at all.</p>\n"}], "owner": {"reputation": 39, "user_id": 6457058, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/85146f641f3486b6c51747cc79c70e23?s=128&d=identicon&r=PG&f=1", "display_name": "Studentus", "link": "https://stackoverflow.com/users/6457058/studentus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 942, "favorite_count": 1, "accepted_answer_id": 51156708, "answer_count": 2, "score": 0, "last_activity_date": 1530626900, "creation_date": 1530617157, "last_edit_date": 1530618410, "question_id": 51153436, "link": "https://stackoverflow.com/questions/51153436/get-array-of-strings-from-facter-into-puppet", "title": "Get array of strings from Facter into Puppet", "body": "<p>In a module I'm working on, I need to check if specific users exist on a machine.\nThe idea was to create a custom fact that contains an array of all users.\nIn the module, it should iterate through the array and check if a specific user is part of the array.</p>\n\n<p>My Custom Fact:</p>\n\n<pre><code>Facter.add(\"users\") do\n  setcode do\n    IO.readlines(\"/etc/passwd\").collect do |line|\n      line.split(\":\").first\n    end\n  end\nend\n</code></pre>\n\n<p>The output of the fact is a String like this:\n[\"user1\", \"user2\", \"user3\"]</p>\n\n<p>Because it is just a string and no array, I'm unable to iterate through it in my puppet module.</p>\n\n<p>I then tried</p>\n\n<pre><code>  shell_split($::users).each |String $user| {\n    notify { \"$user\":}\n  }\n</code></pre>\n\n<p>But now, each user contains a comma after the username.</p>\n\n<p>Do you have an idea for a working and better solution?</p>\n"}, {"tags": ["ruby", "ubuntu"], "owner": {"reputation": 11, "user_id": 10026114, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nqt8aK9ZRoI/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1s8Q8Tev9KleUc6RIppbm6S-7Rag/mo/photo.jpg?sz=128", "display_name": "\u5b8b\u5149\u6696", "link": "https://stackoverflow.com/users/10026114/%e5%ae%8b%e5%85%89%e6%9a%96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1530615842, "creation_date": 1530614037, "last_edit_date": 1530615842, "question_id": 51152401, "link": "https://stackoverflow.com/questions/51152401/i-am-trying-to-install-oversip-2-0-4-on-ruby-2-2-0-but-facing-issues", "title": "I am trying to install oversip 2.0.4 on Ruby 2.2.0. but facing issues", "body": "<p>At first I wanted to install <code>oversip</code>. I downloaded the source package and installed it locally</p>\n\n<p>After executing</p>\n\n<pre><code>gem build oversip.gemspec\n</code></pre>\n\n<p>and</p>\n\n<pre><code>gem install oversip-2.0.5.gem\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Building native extensions. This could take a while...\n    ERROR:  Error installing oversip-2.0.5.gem:\n        ERROR: Failed to build gem native extension.\n        current directory: /usr/local/rvm/gems/ruby-2.1.0/gems/oversip-2.0.5/ext/stud\n    /usr/local/rvm/rubies/ruby-2.1.0/bin/ruby -r ./siteconf20180703-10042-1210kx6.rb extconf.rb\n    [ext/stud/extconf.rb] executing system command: tar -zxf stud.tar.gz\n    [ext/stud/extconf.rb] RbConfig::CONFIG['host_os'] returns \"linux-gnu\"\n    [ext/stud/extconf.rb] executing system command: make\n    *** extconf.rb failed ***\n    Could not create Makefile due to some reason, probably lack of necessary\n    libraries and/or headers.  Check the mkmf.log file for more details.  You may\n    need configuration options.\n    Provided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=/usr/local/rvm/rubies/ruby-2.1.0/bin/ruby\n    extconf.rb:14:in `sys': [ext/stud/extconf.rb] system command `make' failed (RuntimeError)\n        from extconf.rb:35:in `block (2 levels) in &lt;main&gt;'\n        from extconf.rb:27:in `chdir'\n        from extconf.rb:27:in `block in &lt;main&gt;'\n        from extconf.rb:24:in `chdir'\n        from extconf.rb:24:in `&lt;main&gt;'\n    extconf failed, exit code 1\n    Gem files will remain installed in /usr/local/rvm/gems/ruby-2.1.0/gems/oversip-2.0.5 for inspection.\n    Results logged to /usr/local/rvm/gems/ruby-2.1.0/extensions/x86_64-linux/2.1.0/oversip-2.0.5/gem_make.out\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "timezone"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1530612564, "post_id": 51150652, "comment_id": 89287159, "body": "<i>&quot;Time.now.zone gives me a string representation of the zone&quot;</i> \u2013 that&#39;s the expected behavior. From <a href=\"http://ruby-doc.org/core-2.5.1/Time.html#method-i-zone\" rel=\"nofollow noreferrer\"><code>Time#zone</code></a>: <i>&quot;Returns the <b>name</b> of the time zone [...]&quot;</i> (emphasis added). Same for <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/TimeWithZone.html#method-i-zone\" rel=\"nofollow noreferrer\"><code>ActiveSupport::TimeWithZone#zone</code></a>."}, {"owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1530612802, "post_id": 51150652, "comment_id": 89287318, "body": "@Stefan I know that&#39;s the expected behaviour. But <code>Time.zone</code> or <code>TimeWithZone.zone</code> doesn&#39;t return the system time"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1530612883, "post_id": 51150652, "comment_id": 89287360, "body": "<code>Time.zone</code> gives you the <code>ActiveSupport::TimeZone</code> instance. Isn&#39;t that what you are looking for? I&#39;m a little confused. What is it that you want?"}, {"owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1530613028, "post_id": 51150652, "comment_id": 89287460, "body": "<code>Time.zone</code> does return <code>ActiveSupport::TimeZone</code>, but it returns it in <i>application time</i>, while <code>Time.now</code> will return <i>system time</i>. So for example, Time.zone will be in UTC, while Time.now will be in BST for me"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1530613258, "post_id": 51150652, "comment_id": 89287612, "body": "You can set your application&#39;s time zone via <code>config.time_zone = &quot;Europe&#47;London&quot;</code> in <code>config&#47;application.rb</code>, see <a href=\"http://guides.rubyonrails.org/configuring.html#configuring-rails-components\" rel=\"nofollow noreferrer\">Configuring Rails Components</a>"}, {"owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1530613652, "post_id": 51150652, "comment_id": 89287886, "body": "But that&#39;s changing the Application time again, that&#39;s not what I want. This is being done in a system test and time is being grabbed on the client side by a Javascript library. I have no control over that. All I want is to also grab the system time in my test to correctly format the expected time, so I know what to look for with Capybara"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1530614087, "post_id": 51150652, "comment_id": 89288150, "body": "You&#39;re asking how to get a <code>ActiveSupport::TimeZone</code> instance from <code>Time.now</code>. That implies that <code>Time.now</code> gives you the correct result. But <code>Time.now</code> \u2013 being a Ruby method \u2013 returns the server time, not the client time. However, you say that <i>&quot;time is being grabbed on the client side&quot;</i>. Can you post a more complete example? Maybe showing some client-side code (the time-fetching part), the request and the server side handling?"}, {"owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1530615712, "post_id": 51150652, "comment_id": 89289196, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/174247/discussion-between-maxim-fedotov-and-stefan\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 162, "user_id": 7627958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dH5hS.jpg?s=128&g=1", "display_name": "Rashid D R", "link": "https://stackoverflow.com/users/7627958/rashid-d-r"}, "is_accepted": false, "score": 3, "last_activity_date": 1530609652, "creation_date": 1530609652, "answer_id": 51150893, "question_id": 51150652, "link": "https://stackoverflow.com/questions/51150652/convert-time-now-into-activesupporttimezone/51150893#51150893", "title": "Convert Time.now into ActiveSupport::TimeZone", "body": "<p>Use <code>Time.zone</code> instead of <code>Time.now.zone</code></p>\n"}, {"tags": [], "owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "is_accepted": true, "score": 1, "last_activity_date": 1530695251, "creation_date": 1530695251, "answer_id": 51169894, "question_id": 51150652, "link": "https://stackoverflow.com/questions/51150652/convert-time-now-into-activesupporttimezone/51169894#51169894", "title": "Convert Time.now into ActiveSupport::TimeZone", "body": "<p>Thanks to <a href=\"https://stackoverflow.com/users/477037/stefan\">@Stefan</a>, my misunderstanding of <code>Time.now</code> has been cleared, it reporting server machine time, not user's, which of course makes all the sense. Thankfully, when it comes to tests, I can assume the client and server are the on the same machine, so its not a big problem.</p>\n\n<p>I managed to also find a solution to my original problem. The method I was looking for was <code>getlocal</code>, which converts the <code>DateTime</code> object into system time(as mentioned above, that would be the server time, which is ok in tests). That made tests pass on both CircleCI and locally.</p>\n"}], "owner": {"reputation": 1281, "user_id": 2308531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/DV29D.jpg?s=128&g=1", "display_name": "Maxim Fedotov", "link": "https://stackoverflow.com/users/2308531/maxim-fedotov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 51169894, "answer_count": 2, "score": 0, "last_activity_date": 1530695251, "creation_date": 1530608830, "last_edit_date": 1530614073, "question_id": 51150652, "link": "https://stackoverflow.com/questions/51150652/convert-time-now-into-activesupporttimezone", "title": "Convert Time.now into ActiveSupport::TimeZone", "body": "<p>My website has a functionality of using User system time unless they are logged in. </p>\n\n<p>The problem comes when trying to test this functionality, as <code>Time.now.zone</code> gives me a string representation of the zone instead of an <code>ActiveSupport::TimeZone</code> object.</p>\n\n<p>The one I get from <code>Time.now.zone</code> also can't be used to look up the timezone:</p>\n\n<pre><code>Time.now.zone\n =&gt; 'BST'\n</code></pre>\n\n<p>while I need:</p>\n\n<pre><code> =&gt; #&lt;ActiveSupport::TimeZone:0x00007ffe1afd9470 @name=\"Europe/London\", @utc_offset=nil, @tzinfo=#&lt;TZInfo::DataTimezone: Europe/London&gt;&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1530608387, "post_id": 51150473, "comment_id": 89284515, "body": "You mean  to say you have this string only <code>25&#47;%m&#47;%Y 00:00</code> and you want to get the date in same format  ?"}, {"owner": {"reputation": 1221, "user_id": 9375533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a08c00e9e6694fe8222c6918801dcc0?s=128&d=identicon&r=PG&f=1", "display_name": "dcangulo", "link": "https://stackoverflow.com/users/9375533/dcangulo"}, "reply_to_user": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1530608539, "post_id": 51150473, "comment_id": 89284605, "body": "I want the day and time to be fixed while keeping the month and the year dynamic and auto adjusting."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1530608567, "post_id": 51150473, "comment_id": 89284621, "body": "You should compare <i>dates</i> not <i>strings</i> in the first place."}, {"owner": {"reputation": 1221, "user_id": 9375533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a08c00e9e6694fe8222c6918801dcc0?s=128&d=identicon&r=PG&f=1", "display_name": "dcangulo", "link": "https://stackoverflow.com/users/9375533/dcangulo"}, "edited": false, "score": 0, "creation_date": 1530608642, "post_id": 51150473, "comment_id": 89284666, "body": "Yes I know, that&#39;s why I&#39;m asking on how to convert that string into a date."}, {"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1530608731, "post_id": 51150473, "comment_id": 89284730, "body": "@DavidAngulo do you know what are you asking ? <code>DateTime.now.last_month</code> is used for fetching last month, what string do you have to convert in to date?"}, {"owner": {"reputation": 1221, "user_id": 9375533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a08c00e9e6694fe8222c6918801dcc0?s=128&d=identicon&r=PG&f=1", "display_name": "dcangulo", "link": "https://stackoverflow.com/users/9375533/dcangulo"}, "edited": false, "score": 0, "creation_date": 1530608827, "post_id": 51150473, "comment_id": 89284784, "body": "If I used <code>DateTime.now.last_month</code> it will return June 03, 2018, I want to return June 25, 2018 instead that why I want to fix the day as 25."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1530608967, "creation_date": 1530608967, "answer_id": 51150687, "question_id": 51150473, "link": "https://stackoverflow.com/questions/51150473/how-to-declare-a-date-with-string-in-ruby-on-rails/51150687#51150687", "title": "How to declare a date with string in Ruby on Rails", "body": "<p>If I properly understood what you are looking for, you are after getting 25th of the previous month. Use <a href=\"https://ruby-doc.org/core/Time.html#method-c-new\" rel=\"nofollow noreferrer\"><code>Time#new</code></a>:</p>\n\n<pre><code>ma = (DateTime.now - 1.month)\n#\u21d2 Sun, 03 Jun 2018 11:07:24 +0200\nDateTime.new(ma.year, ma.month, 25, 0, 0, 0, \"+00:00\")\n#\u21d2 Mon, 25 Jun 2018 00:00:00 +0000\n</code></pre>\n\n<p>Now compare whatever you want against it.</p>\n"}, {"comments": [{"owner": {"reputation": 1221, "user_id": 9375533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a08c00e9e6694fe8222c6918801dcc0?s=128&d=identicon&r=PG&f=1", "display_name": "dcangulo", "link": "https://stackoverflow.com/users/9375533/dcangulo"}, "edited": false, "score": 0, "creation_date": 1530617097, "post_id": 51152311, "comment_id": 89290016, "body": "Is <code>+00:00</code> the time zone? Does changing it to <code>+08:00</code> will make it GMT +8 (Singapore, Manila) Time?"}, {"owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "reply_to_user": {"reputation": 1221, "user_id": 9375533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a08c00e9e6694fe8222c6918801dcc0?s=128&d=identicon&r=PG&f=1", "display_name": "dcangulo", "link": "https://stackoverflow.com/users/9375533/dcangulo"}, "edited": false, "score": 1, "creation_date": 1530621737, "post_id": 51152311, "comment_id": 89292964, "body": "<code>+00:00</code> is UTC, If you set the timezone of your server to (Singapore, Manila), You should set <code>ma</code> to this timezone to have an accurate comparison.   You can change the timezone of your datetime object like that <code>ma.in_time_zone(&#39;Asia&#47;Singapore&#39;)</code>.  You can find all the timezone codes here: <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveSupport/TimeZone.html</a>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1530676918, "post_id": 51152311, "comment_id": 89314271, "body": "LOL \u201csafer.\u201d FYI: <code>1.month.ago</code> calls <code>- 1.month</code> <a href=\"https://github.com/rails/rails/blob/375a4143cf5caeb6159b338be824903edfd62836/activesupport/lib/active_support/duration.rb#L366\" rel=\"nofollow noreferrer\">under the hood</a>."}, {"owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "edited": false, "score": 1, "creation_date": 1530692637, "post_id": 51152311, "comment_id": 89320878, "body": "I didn&#39;t say it was incorrect, I mentioned in the first line that your answer is correct and will work (I also upvoted it). Thanks for sharing the code itself. I think my meaning of safety exists in the method <code>sum</code> in the <code>duration.rb</code>. <code>1.month</code> just really represents an integer in the end. Using <code>ago</code> gives you these some extra checks. Sorry if my answer felt insulting in any way, it&#39;s not. and thanks again for sharing the link."}], "tags": [], "owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "is_accepted": false, "score": 1, "last_activity_date": 1530613728, "creation_date": 1530613728, "answer_id": 51152311, "question_id": 51150473, "link": "https://stackoverflow.com/questions/51150473/how-to-declare-a-date-with-string-in-ruby-on-rails/51152311#51152311", "title": "How to declare a date with string in Ruby on Rails", "body": "<p><a href=\"https://stackoverflow.com/users/2035262/mudasobwa\">@mudasobwa</a> answer will work.</p>\n\n<p>But I guess it can be done a little bit safer from using <code>- 1.month</code> by using <code>.ago</code> </p>\n\n<p>Example: <code>ma = 1.month.ago</code></p>\n\n<p>Then you can add this piece that he wrote: <code>DateTime.new(ma.year, ma.month, 25, 0, 0, 0, \"+00:00\")</code></p>\n\n<p>Also when you can compare the dates, it's better to use UTC so you don't compare two datetimes with different timezones </p>\n\n<p>Example: <code>if your_datetime.utc &gt; ma.utc</code></p>\n"}, {"tags": [], "owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "is_accepted": false, "score": 2, "last_activity_date": 1530681881, "creation_date": 1530681881, "answer_id": 51166291, "question_id": 51150473, "link": "https://stackoverflow.com/questions/51150473/how-to-declare-a-date-with-string-in-ruby-on-rails/51166291#51166291", "title": "How to declare a date with string in Ruby on Rails", "body": "<p>You can also do something like this for getting 25th date of month</p>\n\n<pre><code> DateTime.current.last_month.beginning_of_month + 24.days\n =&gt; Mon, 25 Jun 2018 00:00:00 +0000\n</code></pre>\n"}], "owner": {"reputation": 1221, "user_id": 9375533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a08c00e9e6694fe8222c6918801dcc0?s=128&d=identicon&r=PG&f=1", "display_name": "dcangulo", "link": "https://stackoverflow.com/users/9375533/dcangulo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 322, "favorite_count": 0, "accepted_answer_id": 51150687, "answer_count": 3, "score": 0, "last_activity_date": 1530681881, "creation_date": 1530608260, "last_edit_date": 1530608498, "question_id": 51150473, "link": "https://stackoverflow.com/questions/51150473/how-to-declare-a-date-with-string-in-ruby-on-rails", "title": "How to declare a date with string in Ruby on Rails", "body": "<p>I can print the date today using the code <code>DateTime.now.strftime(\"%d/%m/%Y %H:%M\")</code></p>\n\n<p>But what if I want to combine some of it with string such as <code>DateTime.now.last_month.strftime(\"25/%m/%Y 00:00\")</code></p>\n\n<p>Is it possible to achieve this?</p>\n\n<p>I want to select the 25th day of the last month and use it in a condition. </p>\n\n<p>This condition <code>if DateTime.now.strftime(\"%d/%m/%Y %H:%M\") &gt; DateTime.now.last_month.strftime(\"25/%m/%Y 00:00\")</code> returns false (with string)</p>\n\n<p>While this condition <code>if if DateTime.now.strftime(\"%d/%m/%Y %H:%M\") &gt; DateTime.now.last_month.strftime(\"%d/%m/%Y %H:%M\")</code> returns true (without string)</p>\n"}, {"tags": ["ruby", "rubymine"], "answers": [{"tags": [], "owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "is_accepted": false, "score": 0, "last_activity_date": 1530609579, "creation_date": 1530609579, "answer_id": 51150868, "question_id": 51149951, "link": "https://stackoverflow.com/questions/51149951/rubymine-2018-1-3-not-able-to-configure-ruby-interpreter-in-mac-os-x-10-13-4/51150868#51150868", "title": "RubyMine 2018.1.3 - Not able to configure Ruby Interpreter in Mac OS X 10.13.4", "body": "<p>I am not sure whether I have faced the same problem, but for me when I press apply button, it got stuck so I directly pressed the okay button, it has configured the interpreter fine. Try it. </p>\n"}, {"comments": [{"owner": {"reputation": 4123, "user_id": 785523, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b51864374e248ee87686628bc8528677?s=128&d=identicon&r=PG", "display_name": "tuk", "link": "https://stackoverflow.com/users/785523/tuk"}, "edited": false, "score": 0, "creation_date": 1530611561, "post_id": 51151398, "comment_id": 89286478, "body": "I restarted RubyMine after pressing <code>OK</code> button. But still same message."}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "reply_to_user": {"reputation": 4123, "user_id": 785523, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b51864374e248ee87686628bc8528677?s=128&d=identicon&r=PG", "display_name": "tuk", "link": "https://stackoverflow.com/users/785523/tuk"}, "edited": false, "score": 0, "creation_date": 1530644978, "post_id": 51151398, "comment_id": 89306341, "body": "Did you test run?"}], "tags": [], "owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "is_accepted": false, "score": 0, "last_activity_date": 1530611100, "creation_date": 1530611100, "answer_id": 51151398, "question_id": 51149951, "link": "https://stackoverflow.com/questions/51149951/rubymine-2018-1-3-not-able-to-configure-ruby-interpreter-in-mac-os-x-10-13-4/51151398#51151398", "title": "RubyMine 2018.1.3 - Not able to configure Ruby Interpreter in Mac OS X 10.13.4", "body": "<p>This is literally just a case of the message not going away, same thing happens in PyCharm as well. Closing the tab the message is displayed on and re-opening it will make it go away, as well as simply clicking the \"play\" button to confirm it is indeed working.</p>\n"}, {"tags": [], "owner": {"reputation": 4123, "user_id": 785523, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b51864374e248ee87686628bc8528677?s=128&d=identicon&r=PG", "display_name": "tuk", "link": "https://stackoverflow.com/users/785523/tuk"}, "is_accepted": true, "score": 0, "last_activity_date": 1530696715, "creation_date": 1530696715, "answer_id": 51170382, "question_id": 51149951, "link": "https://stackoverflow.com/questions/51149951/rubymine-2018-1-3-not-able-to-configure-ruby-interpreter-in-mac-os-x-10-13-4/51170382#51170382", "title": "RubyMine 2018.1.3 - Not able to configure Ruby Interpreter in Mac OS X 10.13.4", "body": "<p>The project I was working on has both python and ruby files. I have configured PyCharm and then in the same directory I was trying to configure RubyMine for ruby which was causing the issue.</p>\n\n<p>So I checked out the code in a different folder and configured only RubyMine there. Now things are working as expected.</p>\n"}], "owner": {"reputation": 4123, "user_id": 785523, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b51864374e248ee87686628bc8528677?s=128&d=identicon&r=PG", "display_name": "tuk", "link": "https://stackoverflow.com/users/785523/tuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 51170382, "answer_count": 3, "score": 2, "last_activity_date": 1530696715, "creation_date": 1530606524, "question_id": 51149951, "link": "https://stackoverflow.com/questions/51149951/rubymine-2018-1-3-not-able-to-configure-ruby-interpreter-in-mac-os-x-10-13-4", "title": "RubyMine 2018.1.3 - Not able to configure Ruby Interpreter in Mac OS X 10.13.4", "body": "<p>RubyMine shows me an error regarding Ruby Interpreter like below</p>\n\n<p><a href=\"https://i.stack.imgur.com/yE9Tg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yE9Tg.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now whenever I click on <code>Configure Ruby Interpreter</code> it takes me to the below page and even after selecting the interpreter and pressing <code>Apply</code> , the interpreter is not getting configured.</p>\n\n<p><a href=\"https://i.stack.imgur.com/QcyQd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QcyQd.png\" alt=\"enter image description here\"></a></p>\n\n<p>The same issue with <code>Configure Cookbooks</code>. When I try to configure Cookbooks it shows me an window like below and even after doing apply nothing happens.</p>\n\n<p><a href=\"https://i.stack.imgur.com/qqBoD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qqBoD.png\" alt=\"enter image description here\"></a></p>\n\n<p>Can some one let me know what is going wrong ?</p>\n"}, {"tags": ["ruby", "algorithm", "matching", "bipartite"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8847561, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t538-NIbXyk/AAAAAAAAAAI/AAAAAAAAE0w/aEoDgpNLJF4/photo.jpg?sz=128", "display_name": "Jake Tompkins", "link": "https://stackoverflow.com/users/8847561/jake-tompkins"}, "edited": false, "score": 0, "creation_date": 1530720289, "post_id": 51157644, "comment_id": 89337708, "body": "Thank you, I appreciate it. The logic behind what I was trying was that if a job can only be done by one employee then it that connection should be prioritized, and that subsequent connections should prioritize the least in-demand shopper so as to affect the ability of the fewest number of other jobs to be filled. Again, I have no formal background in this stuff so I took my best stab at it. Thank you for your explanation, it cleared things up a bit and I think I should be able to implement it now. Much appreciated."}, {"owner": {"reputation": 36328, "user_id": 5483526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec50563f80bacd2a7fed69bd31d0c810?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Timmermans", "link": "https://stackoverflow.com/users/5483526/matt-timmermans"}, "reply_to_user": {"reputation": 11, "user_id": 8847561, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t538-NIbXyk/AAAAAAAAAAI/AAAAAAAAE0w/aEoDgpNLJF4/photo.jpg?sz=128", "display_name": "Jake Tompkins", "link": "https://stackoverflow.com/users/8847561/jake-tompkins"}, "edited": false, "score": 0, "creation_date": 1530751695, "post_id": 51157644, "comment_id": 89346524, "body": "You can reduce the time taken on average by using rules like that to pick your initial assignment, but they&#39;ll be fooled by some instances so you&#39;ll still need the iterative improvement.  To find a situation where the rules fail, try thinking of ways to trick the rules into creating a subset of N unassigned shoppers that can only connect to N-1 unassigned orders, or a set of N unassigned orders that can only connect to N-1 unassigned shoppers."}], "tags": [], "owner": {"reputation": 36328, "user_id": 5483526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec50563f80bacd2a7fed69bd31d0c810?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Timmermans", "link": "https://stackoverflow.com/users/5483526/matt-timmermans"}, "is_accepted": false, "score": 1, "last_activity_date": 1530630688, "last_edit_date": 1530630688, "creation_date": 1530629854, "answer_id": 51157644, "question_id": 51149609, "link": "https://stackoverflow.com/questions/51149609/how-can-this-bipartite-matching-solution-be-improved/51157644#51157644", "title": "How can this bipartite matching solution be improved?", "body": "<p>Well, I don't see any reason to think that the algorithm you're writing is actually going to work so the question about how you might be messing it up doesn't seem to be relevant.</p>\n\n<p>You have correctly identified this as an instance of the assignment problem.  More specifically this is the \"maximum bipartite matching\" problem, and the Edmonds-Karp algorithm is the simpliest way to solve it (<a href=\"https://en.wikipedia.org/wiki/Edmonds%E2%80%93Karp_algorithm\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Edmonds%E2%80%93Karp_algorithm</a>)</p>\n\n<p>However, this is an algorithm for finding the maximum flow in a network, which is a larger problem than simple bipartite matching, and the explanations of this algorithm are really a lot more complicated than you need.  It's understandable that you had some trouble implementing this from the literature, but actually when the problem is reduced to simple (unweighted) bipartite matching, the algorithm is easy to understand:</p>\n\n<ol>\n<li>Make an initial assignment</li>\n<li>Try to find an improvement</li>\n<li>Repeat until no more improvements can be found.</li>\n</ol>\n\n<p>For bipartite matching, an \"improvement\" always has the same form, which is what makes this problem easy to solve.  To find an improvement, you have to find a path that connects an unassigned shopper to an unassigned order, following these rules:</p>\n\n<ul>\n<li>The path can go from any shopper to any order he/she could fulfill but does not</li>\n<li>The path can go from any order only to the shopper that is fulfilling it in the current assignment.</li>\n</ul>\n\n<p>You use bread-first search to find the shortest path, which will correspond to the improvement that changes the smallest number of existing assignments.</p>\n\n<p>The path you find will necessarily have an odd number of edges, and the even-numbered edges will be assignments.  To implement the improvement, you remove those assignments and replace them with the odd-numbered edges.  There's one more of those, which is what makes it an improvement.  It looks like this:</p>\n\n<pre><code>PREVIOUS       PATH FOUND      IMPROVED ASSIGNMENT\n\n    1              1                  1\n                 /                  /\nA              A                  A\n  \\              \\     \n    2              2                  2\n                 /                  /\nB              B                  B           \n  \\              \\       \n    3              3                  3\n                 /                  /\nC              C                  C\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8847561, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t538-NIbXyk/AAAAAAAAAAI/AAAAAAAAE0w/aEoDgpNLJF4/photo.jpg?sz=128", "display_name": "Jake Tompkins", "link": "https://stackoverflow.com/users/8847561/jake-tompkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530630688, "creation_date": 1530605411, "question_id": 51149609, "link": "https://stackoverflow.com/questions/51149609/how-can-this-bipartite-matching-solution-be-improved", "title": "How can this bipartite matching solution be improved?", "body": "<p>I'm working through codefights and am attempting the busyHolidays challenge from the Instacart company challenges. </p>\n\n<p>The challenge provides three arrays. Shoppers contains strings representing the start and end times of their shifts. Orders contains strings representing the start and end times of the orders, and leadTime contains integers representing the number of minutes it takes to complete the job. </p>\n\n<p>The goal is to determine if the orders can be matched to shoppers such that each shopper has only one order and each order has a shopper. An order may only be matched to a shopper if the shopper can both begin and complete it within the order time.</p>\n\n<p>I have a solution that passes 19/20 tests, but since I can't see the last test I have no idea what's going wrong. I originally spent a couple days trying to learn algorithms like Edmond's Algorithm and the Hungarian Algorithm, but my lack of CS background and weakness in math kind of bit me in the ass and I can't seem to wrap my head around how to actually implement those methodologies, so I came up with a solution that involves weighting each node on each side of the graph according to its number of possible connections. I would appreciate it if anyone could help me take a look at my solution and either point out where it might be messing up or suggest a more standard solution to the problem in a way that might be easier for someone without formal training in algorithms to understand. Thanks in advance.</p>\n\n<p>I'll put the code in a gist since it's fairly length</p>\n\n<p>Code: <a href=\"https://gist.github.com/JakeTompkins/7e1afc4722fb828f26f8f6a964774a25\" rel=\"nofollow noreferrer\">https://gist.github.com/JakeTompkins/7e1afc4722fb828f26f8f6a964774a25</a></p>\n"}, {"tags": ["ruby", "metaprogramming", "alias"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1530614826, "post_id": 51149367, "comment_id": 89288628, "body": "Why don&#39;t you move the implementation into <code>method_missing</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1913, "user_id": 1307778, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ZcuJ8.png?s=128&g=1", "display_name": "psychoslave", "link": "https://stackoverflow.com/users/1307778/psychoslave"}, "edited": false, "score": 0, "creation_date": 1530606889, "post_id": 51149584, "comment_id": 89283622, "body": "Yes, it works. I&#39;m astonished with my own confusion as with other methods aliases, I didn&#39;t made this error of inverting parameters. Now to be complete, for some reason in this case it seems required to put the alias <i>after</i> the method definition, when I can successfully alias other methods before there definition. Any idea why is that so?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1913, "user_id": 1307778, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ZcuJ8.png?s=128&g=1", "display_name": "psychoslave", "link": "https://stackoverflow.com/users/1307778/psychoslave"}, "edited": false, "score": 0, "creation_date": 1530606966, "post_id": 51149584, "comment_id": 89283672, "body": "Use <a href=\"https://ruby-doc.org/core/Module.html#method-i-alias_method\" rel=\"nofollow noreferrer\"><code>Module#alias_method</code></a> to put it wherever. <code>alias</code> requires the method to exist due to it\u2019s syntax."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 1, "creation_date": 1530610814, "post_id": 51149584, "comment_id": 89286026, "body": "But before you use <code>alias_method</code> over <code>alias</code>, first have a look at the differences and decide for yourself. <a href=\"https://stackoverflow.com/a/27310250/3982562\">stackoverflow.com/a/27310250/3982562</a>"}, {"owner": {"reputation": 1913, "user_id": 1307778, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ZcuJ8.png?s=128&g=1", "display_name": "psychoslave", "link": "https://stackoverflow.com/users/1307778/psychoslave"}, "edited": false, "score": 0, "creation_date": 1530621697, "post_id": 51149584, "comment_id": 89292927, "body": "Understandably, <code>alias</code> can&#39;t be aliased as it&#39;s a language keyword, and no keyword can be aliased. But shouldn&#39;t it possible to alias <code>alias_method</code>? I tried to make <code>alias alivoke alias_method</code> and ended with <code>undefined method </code>alias_method&#39; for module <code>\u011cue&#39; (NameError)</code>"}, {"owner": {"reputation": 1913, "user_id": 1307778, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ZcuJ8.png?s=128&g=1", "display_name": "psychoslave", "link": "https://stackoverflow.com/users/1307778/psychoslave"}, "edited": false, "score": 0, "creation_date": 1530623254, "post_id": 51149584, "comment_id": 89294090, "body": "class Module     alias_method :alivoke, :alias_method   ;end"}, {"owner": {"reputation": 1913, "user_id": 1307778, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ZcuJ8.png?s=128&g=1", "display_name": "psychoslave", "link": "https://stackoverflow.com/users/1307778/psychoslave"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1530673143, "post_id": 51149584, "comment_id": 89313593, "body": "Thus said, @mudasobwa and @johan-wentholt even with <code>alias_method</code> it only works if it&#39;s placed after the <code>mistrafe</code> method."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1530605799, "last_edit_date": 1530605799, "creation_date": 1530605312, "answer_id": 51149584, "question_id": 51149367, "link": "https://stackoverflow.com/questions/51149367/in-ruby-why-is-it-not-enough-to-alias-method-missing-to-catch-call-to-undefin/51149584#51149584", "title": "In Ruby, why is it not enough to alias `method_missing` to catch call to undefined methods?", "body": "<p>Generally speaking, you want <code>method_missing</code> (that is called by Ruby internally) to be an alias for <code>mistrafe</code> not vice versa. You have an implementation in <code>mistrafe</code> and you want reassign <code>method_missing</code> to be calling it.</p>\n\n<p>That said, the following will work:</p>\n\n<pre><code>alias method_missing mistrafe\n</code></pre>\n\n<p>See the <a href=\"http://ruby-doc.org/core-2.5.1/doc/syntax/miscellaneous_rdoc.html#label-alias\" rel=\"nofollow noreferrer\">alias documentation</a>.</p>\n"}], "owner": {"reputation": 1913, "user_id": 1307778, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ZcuJ8.png?s=128&g=1", "display_name": "psychoslave", "link": "https://stackoverflow.com/users/1307778/psychoslave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 51149584, "answer_count": 1, "score": 0, "last_activity_date": 1530605799, "creation_date": 1530604652, "question_id": 51149367, "link": "https://stackoverflow.com/questions/51149367/in-ruby-why-is-it-not-enough-to-alias-method-missing-to-catch-call-to-undefin", "title": "In Ruby, why is it not enough to alias `method_missing` to catch call to undefined methods?", "body": "<p>That seems all the more unexpected when defining a dummy method passing all arguments do the job. That is the following works:</p>\n\n<pre><code>  def method_missing(ago, *lokatoj, &amp;bloko)\n    mistrafe(ago, *lokatoj, &amp;bloko)\n  end\n\n  def mistrafe(ago, *lokatoj, &amp;bloko)\n    # faru ion\n  end\n</code></pre>\n\n<p>While the following doen't</p>\n\n<pre><code>alias mistrafe method_missing\n</code></pre>\n\n<p>Why is that so?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activestorage", "ruby-on-rails-5.2"], "comments": [{"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1530608634, "post_id": 51148547, "comment_id": 89284661, "body": "I had the same problem, it seems there is no public URL for files uploaded without a private markup. With ActiveStorage all files are private by default. That is a problem for me with emails embedding images, images must be inline attached. see this thread <a href=\"https://stackoverflow.com/questions/50719769/activestorage-for-s3-private-files\" title=\"activestorage for s3 private files\">stackoverflow.com/questions/50719769/&hellip;</a> for a patch (I have not yet moved to AS for this reason. waiting for Rails 6 to see if we get something a bit more rounded)"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 1, "creation_date": 1530613461, "post_id": 51148547, "comment_id": 89287752, "body": "Maybe I&#39;m not getting the point, but check out this <a href=\"https://stackoverflow.com/questions/50775686/how-to-get-url-of-active-storage-image\" title=\"how to get url of active storage image\">stackoverflow.com/questions/50775686/&hellip;</a>"}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1530715175, "post_id": 51148547, "comment_id": 89335061, "body": "@iGian Is the URL generated permanent or for a limited time only ? Maybe my mistake but I thought we couldnt get permanent links to assets with AS. I need dive into AS more thoroughly maybe.."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1530715664, "post_id": 51148547, "comment_id": 89335332, "body": "@Maxence, after your comment I did a test on local storage of my dummy app. I copied the image url, stopped the server and relaunched many times pasting the url into many browsers. The URL is still valid. So, I suppose it is permanent. Also for remote storage. Can you confirm by a similar test?"}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1530715809, "post_id": 51148547, "comment_id": 89335411, "body": "@iGian thanks a lot. I was afraid to move to AS from Paperclip due to such limitations. I will do a test on a dedicated bucket with a dummy app and see if I get the same result."}], "answers": [{"comments": [{"owner": {"reputation": 3548, "user_id": 1729692, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/I9nUd.jpg?s=128&g=1", "display_name": "Topher Hunt", "link": "https://stackoverflow.com/users/1729692/topher-hunt"}, "edited": false, "score": 2, "creation_date": 1547892378, "post_id": 51151077, "comment_id": 95355478, "body": "Note that (to my understanding) this is NOT a link to the file itself, it&#39;s a link to a Rails endpoint that will look up the blob and redirect to a temporary signed url for it. This is great for private attachments... not so great for images which will be displayed on the page because rendering the page will trigger a separate Rails request (involving multiple db queries) per each image shown."}], "tags": [], "owner": {"reputation": 162, "user_id": 7627958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dH5hS.jpg?s=128&g=1", "display_name": "Rashid D R", "link": "https://stackoverflow.com/users/7627958/rashid-d-r"}, "is_accepted": true, "score": 2, "last_activity_date": 1530610152, "creation_date": 1530610152, "answer_id": 51151077, "question_id": 51148547, "link": "https://stackoverflow.com/questions/51148547/activestorage-retrieving-file-url/51151077#51151077", "title": "ActiveStorage - retrieving file URL", "body": "<pre><code>file = fetch_your_file\n\nlink = rails_blob_path(file, disposition: 'attachment') \n</code></pre>\n\n<p>will return the attachment link</p>\n"}], "owner": {"reputation": 10453, "user_id": 872514, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a42591877295d7b253af219057635ba7?s=128&d=identicon&r=PG", "display_name": "alexs333", "link": "https://stackoverflow.com/users/872514/alexs333"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1566, "favorite_count": 0, "accepted_answer_id": 51151077, "answer_count": 1, "score": 2, "last_activity_date": 1530610152, "creation_date": 1530601830, "question_id": 51148547, "link": "https://stackoverflow.com/questions/51148547/activestorage-retrieving-file-url", "title": "ActiveStorage - retrieving file URL", "body": "<p>I am migrating from deprecated <a href=\"https://github.com/thoughtbot/paperclip\" rel=\"nofollow noreferrer\">paperclip</a> gem to <code>ActiveStorage</code> and wondering how can I get hold of attachment URL in the model (for example if I want to add it to custom <code>as_json</code> method, some elasticshearh data etc.)</p>\n\n<p>Couldn't find anything in documentation for that particular use case.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "serialization", "delegates", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530601866, "post_id": 51148143, "comment_id": 89281018, "body": "You can check the logs to see how many queries does it fire in each case. Lesser the better."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530601884, "post_id": 51148143, "comment_id": 89281031, "body": "This <code>delegate: :user, to: object</code> looks like a syntax error."}, {"owner": {"reputation": 856, "user_id": 3755578, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PmkSj.jpg?s=128&g=1", "display_name": "eudaimonia", "link": "https://stackoverflow.com/users/3755578/eudaimonia"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530602146, "post_id": 51148143, "comment_id": 89281162, "body": "@JagdeepSingh there&#39;s no syntax error - it works for me and it loads in similar time, but I found example with memorized helper so I try to understand difference"}, {"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 1, "creation_date": 1530602505, "post_id": 51148143, "comment_id": 89281337, "body": "It does <i>not</i> work for you, <code>:</code> after <code>delegate</code> is wrong :)"}, {"owner": {"reputation": 856, "user_id": 3755578, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PmkSj.jpg?s=128&g=1", "display_name": "eudaimonia", "link": "https://stackoverflow.com/users/3755578/eudaimonia"}, "edited": false, "score": 0, "creation_date": 1530602616, "post_id": 51148143, "comment_id": 89281378, "body": "okey my fault ;D correctedthx"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530602904, "post_id": 51148143, "comment_id": 89281526, "body": "Can you print the server logs for both cases?"}, {"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 1, "creation_date": 1530606293, "post_id": 51148143, "comment_id": 89283261, "body": "You have to point, that this is <code>ActiveModelSerializers</code> to be clear. We don&#39;t need server logs or whatever to guess that there is no difference in performance despite the way we choose. We got exactly same number of DB queries(N+1 w/o .includes). So, in this case delegate is preferred way. Private methods are needed when logic is more complex."}], "answers": [{"comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530602858, "post_id": 51148694, "comment_id": 89281498, "body": "You should not use something just because it is less code. Performance too is an important aspect of the application."}, {"owner": {"reputation": 73, "user_id": 5483671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBIzy.jpg?s=128&g=1", "display_name": "Alexey Spiridonov", "link": "https://stackoverflow.com/users/5483671/alexey-spiridonov"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530603535, "post_id": 51148694, "comment_id": 89281842, "body": "Often, code readability is more important than a minor performance gain."}, {"owner": {"reputation": 856, "user_id": 3755578, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PmkSj.jpg?s=128&g=1", "display_name": "eudaimonia", "link": "https://stackoverflow.com/users/3755578/eudaimonia"}, "edited": false, "score": 0, "creation_date": 1530604172, "post_id": 51148694, "comment_id": 89282140, "body": "Okey, so I understand here that if I join table in controller (<code>.include</code>) there is no difference in logs, so is better idea to use shorter, more readable code, but for future (no join before) I would use memorize object - better for performance"}, {"owner": {"reputation": 73, "user_id": 5483671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBIzy.jpg?s=128&g=1", "display_name": "Alexey Spiridonov", "link": "https://stackoverflow.com/users/5483671/alexey-spiridonov"}, "edited": false, "score": 0, "creation_date": 1530605058, "post_id": 51148694, "comment_id": 89282599, "body": "We must see the action of your controller to give the response to your question. The best practice: you must not leave much logic in the controllers, you must move it into some services."}], "tags": [], "owner": {"reputation": 73, "user_id": 5483671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBIzy.jpg?s=128&g=1", "display_name": "Alexey Spiridonov", "link": "https://stackoverflow.com/users/5483671/alexey-spiridonov"}, "is_accepted": false, "score": 1, "last_activity_date": 1530602358, "creation_date": 1530602358, "answer_id": 51148694, "question_id": 51148143, "link": "https://stackoverflow.com/questions/51148143/what-is-the-difference-between-memorized-object-vs-using-delegate/51148694#51148694", "title": "What is the difference between memorized object vs using delegate?", "body": "<p>Using delegate is better because you need less code and it's easy to understanding.</p>\n\n<p>If you will create user helper, you need call <code>user.email, user.phone_number, user.verified?</code> instead of call <code>email, phone_number, verified?</code> in your context when you use delegation.</p>\n"}], "owner": {"reputation": 856, "user_id": 3755578, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PmkSj.jpg?s=128&g=1", "display_name": "eudaimonia", "link": "https://stackoverflow.com/users/3755578/eudaimonia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530602593, "creation_date": 1530600319, "last_edit_date": 1530602593, "question_id": 51148143, "link": "https://stackoverflow.com/questions/51148143/what-is-the-difference-between-memorized-object-vs-using-delegate", "title": "What is the difference between memorized object vs using delegate?", "body": "<p>I use serializer to render each <code>Order</code> object (which includes <code>User</code> information)</p>\n\n<p>In my serializer I have:</p>\n\n<pre><code>delegate :user, to: object\ndelegate :email, :phone_number, :verified?, to: :user\n</code></pre>\n\n<p>I found that I can also use memorized helper, like this:</p>\n\n<pre><code>private\n\ndef user\n  @user ||= object.user\nend\n</code></pre>\n\n<p>Is that better practise? And what is the difference?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1530599023, "post_id": 51147568, "comment_id": 89279612, "body": "Show full model relations."}, {"owner": {"reputation": 342, "user_id": 7368783, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/iedz3.jpg?s=128&g=1", "display_name": "Naveen Honest Raj K", "link": "https://stackoverflow.com/users/7368783/naveen-honest-raj-k"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1530600360, "post_id": 51147568, "comment_id": 89280254, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 I added the model details"}], "answers": [{"comments": [{"owner": {"reputation": 342, "user_id": 7368783, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/iedz3.jpg?s=128&g=1", "display_name": "Naveen Honest Raj K", "link": "https://stackoverflow.com/users/7368783/naveen-honest-raj-k"}, "edited": false, "score": 0, "creation_date": 1530598568, "post_id": 51147702, "comment_id": 89279402, "body": "Then that&#39;s my problem again. I might have nearly 100 - 1000 numbers. Isn&#39;t there anyway I can get everything and do a filter on ruby side rather than doing on db side? Making the line 4, a ruby part? You have any idea on that?"}], "tags": [], "owner": {"reputation": 171, "user_id": 1592591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b2d32ac48d24c7313d703b09b9d6ea7?s=128&d=identicon&r=PG", "display_name": "Sujay Gavhane", "link": "https://stackoverflow.com/users/1592591/sujay-gavhane"}, "is_accepted": false, "score": 0, "last_activity_date": 1530598414, "creation_date": 1530598414, "answer_id": 51147702, "question_id": 51147568, "link": "https://stackoverflow.com/questions/51147568/rails-optimizing-the-queries/51147702#51147702", "title": "Rails - Optimizing the queries", "body": "<p>You can just neglect the line no 2 i.e </p>\n\n<p><code>contacts = User.where(number: numbers)</code></p>\n\n<p>And on line no 4 do this </p>\n\n<p><code>user = User.find_by(number: number)</code>.</p>\n\n<p>But keep in mind that find_by will return you only single result.</p>\n"}, {"comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1530601103, "post_id": 51148263, "comment_id": 89280632, "body": "You&#39;re wrong <code>find</code> and <code>find_by</code> generate sql query in this case."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1530602820, "post_id": 51148263, "comment_id": 89281482, "body": "<code>s&#47;find&#47;detect&#47;</code>"}], "tags": [], "owner": {"reputation": 162, "user_id": 7627958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dH5hS.jpg?s=128&g=1", "display_name": "Rashid D R", "link": "https://stackoverflow.com/users/7627958/rashid-d-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1530600779, "creation_date": 1530600779, "answer_id": 51148263, "question_id": 51147568, "link": "https://stackoverflow.com/questions/51147568/rails-optimizing-the-queries/51148263#51148263", "title": "Rails - Optimizing the queries", "body": "<p>Instead of <code>find_by</code> use <code>find</code> method.</p>\n\n<pre><code>user = contacts.find(number: number)\n</code></pre>\n\n<p><code>find</code> is handled in Ruby level. <code>find_by</code> will send db query</p>\n"}, {"comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1530602218, "post_id": 51148586, "comment_id": 89281195, "body": "How to deal with numbers what aren&#39;t in db? <b>has few numbers that aren&#39;t in my system</b>"}, {"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1530602300, "post_id": 51148586, "comment_id": 89281233, "body": "Line &quot;# Operation with <code>number</code>&quot;"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1530609070, "post_id": 51148586, "comment_id": 89284919, "body": "Keep in mind that <code>Enumerable#group_by</code> creates a group. This means that <code>contacts[number]</code> returns a collection and not one user."}], "tags": [], "owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "is_accepted": false, "score": 1, "last_activity_date": 1530610048, "last_edit_date": 1530610048, "creation_date": 1530601957, "answer_id": 51148586, "question_id": 51147568, "link": "https://stackoverflow.com/questions/51147568/rails-optimizing-the-queries/51148586#51148586", "title": "Rails - Optimizing the queries", "body": "<blockquote>\n  <p>Isn't there anyway I can get everything and do a filter on ruby side rather than doing on db side?</p>\n</blockquote>\n\n<p>Yes, you can use <a href=\"https://apidock.com/ruby/Enumerable/group_by\" rel=\"nofollow noreferrer\"><code>Enumerable#group_by</code></a>:</p>\n\n<pre><code>def sync_fit!(numbers, current_user)\n  contacts = User.where(number: numbers).group_by(&amp;:number)\n  numbers.each do |number|\n    # contacts is {number1=&gt;[user1, ...], number2=&gt;[...]}\n    user = contacts[number].first # or other logic when many users with same number\n    if user\n      # Operation with `user`\n    end\n    # Operation with `number`\n  end\nend\n</code></pre>\n\n<p>Note: if you don't need to process exactly each number (# Operation with number), you can simplify your code to:</p>\n\n<pre><code>def sync_fit!(numbers, current_user)\n  contacts = User.where(number: numbers)\n  contacts.each do |user|\n    number = user.number\n    # Operation with `user`\n  end\nend\n</code></pre>\n\n<p><strong>UPD:</strong> Fixed <code>#group_by</code> example with @johan-wentholt comment.</p>\n"}, {"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 1, "last_activity_date": 1530609681, "last_edit_date": 1530609681, "creation_date": 1530607631, "answer_id": 51150274, "question_id": 51147568, "link": "https://stackoverflow.com/questions/51147568/rails-optimizing-the-queries/51150274#51150274", "title": "Rails - Optimizing the queries", "body": "<p>The following code executes only one query and works further from there:</p>\n\n<pre><code>def sync_fit!(numbers, current_user)\n  contacts = User.where(number: numbers)\n  unfound_numbers = numbers - contacts.map(&amp;:number)\n\n  contacts.each do |user|\n    # code for found users\n  end\n\n  unfound_numbers.each do |number|\n    # code for numbers not found in users table\n  end\nend\n</code></pre>\n\n<p><strong>Note:</strong></p>\n\n<p>This however assumes you <code>numbers</code> input matches the type of the <code>user.number</code> output. Assuming <code>user.number</code> is an integer than it will loop over all provided numbers, even if found, if a list of string numbers is given eg. <code>%w[1 2 3 4]</code>. If you want the extra security make sure the result of <code>number</code> and the provided numbers are the same type. <code>numbers.map(&amp;:to_i)</code></p>\n\n<p>You also would normally use <code>contacts.pluck(:number)</code> to get the list of numbers. But since you'll use the contacts instances anyway I opted for <code>map</code> instead, because this loads the instances and works from there. Resulting in one less query to the database.</p>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1530637351, "post_id": 51152544, "comment_id": 89302678, "body": "As a note <code>ActiveRecord::QueryMethods#select</code> is the method being called it just so happens that with a block it delegates to <code>to_a.select</code>. Other notes: <code>select</code> will return an <code>Array</code> where as <code>find_by</code> will return a single instance; <code>user</code> is not a defined local variable only <code>users</code> is"}], "tags": [], "owner": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "is_accepted": false, "score": 0, "last_activity_date": 1530614535, "creation_date": 1530614535, "answer_id": 51152544, "question_id": 51147568, "link": "https://stackoverflow.com/questions/51147568/rails-optimizing-the-queries/51152544#51152544", "title": "Rails - Optimizing the queries", "body": "<p>As an alternative to the other answers, you may find the Ruby <code>Array#select</code> method helpful (not to be confused with the Active Record method of the same name). It accepts a block which should map array elements into Boolean values, and filters the array to those that return <code>true</code>. E.g.</p>\n\n<pre><code>[0,1,2,3].select {|x| x%2 == 0 }\n# [0,2]\n</code></pre>\n\n<p>So your code could would require the minimal change:</p>\n\n<pre><code>  def sync_fit!(numbers, current_user)\n    contacts = User.where(number: numbers)\n    numbers.each do |number|\n      users = contacts.select{|contact| contact.number == number }\n      if user.present?\n        # Another operation\n      end\n    end\n  end\n</code></pre>\n\n<p>This is 'at the ruby level'. However, the fact that contacts is an ActiveRecord relation might cause further queries. As you have no further relations to query against, you can prevent this by making sure that the contacts are fully loaded as ruby objects before proceeding:</p>\n\n<pre><code>contacts = User.where(number: numbers).to_a\n</code></pre>\n\n<p>should do the trick.\nNote that this approach is probably the closest to your existing code that will accomplish what you want. However, depending on what \"another operation\" is, you may or may not find one of the other answers more efficient.</p>\n"}, {"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 0, "last_activity_date": 1530637093, "last_edit_date": 1530637093, "creation_date": 1530636757, "answer_id": 51159572, "question_id": 51147568, "link": "https://stackoverflow.com/questions/51147568/rails-optimizing-the-queries/51159572#51159572", "title": "Rails - Optimizing the queries", "body": "<p><code>find_by</code> is a query method, thus the query fires at line 4. You can achieve the same with <code>Enumerable#find</code> since the data is already loaded and no queries will execute in the loop</p>\n\n<pre><code>def sync_fit!(numbers, current_user)\n  contacts = User.where(number: numbers)\n  numbers.each do |number|\n    user = contacts.find { |c| c.number == number } \n    if user.present?\n      # Another operation\n    end\n  end\nend\n</code></pre>\n\n<p>However in both cases if a <code>User</code> shares a number with another <code>User</code> only the first will be returned. Additionally you could change the loop to </p>\n\n<pre><code>def sync_fit!(numbers, current_user)\n  numbers = numbers.dup \n  User.where(number: numbers).each do |contact|\n    number = numbers.delete(contact.number)\n    # Another operation\n  end\nend\n</code></pre>\n\n<p>In this case we loop all the <code>Users</code> that were located and remove the found numbers from the local variable <code>numbers</code>. When the loop completes all the numbers that were not associated with a user will be left in <code>numbers</code></p>\n"}, {"tags": [], "owner": {"reputation": 8973, "user_id": 831564, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b7b5cb565edb37aac67f053f64f0324f?s=128&d=identicon&r=PG", "display_name": "Marlin Pierce", "link": "https://stackoverflow.com/users/831564/marlin-pierce"}, "is_accepted": false, "score": 0, "last_activity_date": 1530822768, "creation_date": 1530822768, "answer_id": 51199437, "question_id": 51147568, "link": "https://stackoverflow.com/questions/51147568/rails-optimizing-the-queries/51199437#51199437", "title": "Rails - Optimizing the queries", "body": "<pre><code>def sync_fit!(numbers, current_user)\n  contacts = User.where(number: numbers).to_a\n  numbers.each do |number|\n    user = contacts.find {|contact| contact.number == number}\n    if user.present?\n      # Another operation\n    end\n  end\nend\n</code></pre>\n\n<p>In line 2, you get all the users, but what you actually get and store in the variable <code>contacts</code> is an ActiveRecord relation.  If you want to do the query on line 2, and not make any more queries, covert the ActiveRecord relation into an array and do array operations on the result.</p>\n"}], "owner": {"reputation": 342, "user_id": 7368783, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/iedz3.jpg?s=128&g=1", "display_name": "Naveen Honest Raj K", "link": "https://stackoverflow.com/users/7368783/naveen-honest-raj-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "answer_count": 7, "score": 0, "last_activity_date": 1530822768, "creation_date": 1530597734, "last_edit_date": 1530600342, "question_id": 51147568, "link": "https://stackoverflow.com/questions/51147568/rails-optimizing-the-queries", "title": "Rails - Optimizing the queries", "body": "<p>I am trying to do a simple operation but facing unnecessary queries made. I wanted to know how to optimize. In my code snippet, below, the line 2 gets all the users. The \"numbers\" parameters also has few numbers that aren't in my system. So I need to do an operation to find both exists and non-exists. But Line2 and Line4 are making multiple queries. Any ways to optimize it?</p>\n\n<pre><code>  def sync_fit!(numbers, current_user)\n    contacts = User.where(number: numbers)\n    numbers.each do |number|\n      user = contacts.find_by(number: number)\n      if user.present?\n        # Another operation\n      end\n    end\n  end\n</code></pre>\n\n<p>EDIT 1:</p>\n\n<h1>Table name: users</h1>\n\n<pre><code>    #  id                     :bigint(8)        not null, primary key\n    #  country                :string(255)      not null\n    #  number                 :string(255)      not null\n    #  first_name             :string(255)      default(\"\")\n    #  last_name              :string(255)      default(\"\")\n    #  username               :string(255)\n    #  email                  :string(255)\n</code></pre>\n\n<p>There is no relation. Only User model is used.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activestorage", "ruby-on-rails-5.2"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 12, "last_activity_date": 1530598936, "last_edit_date": 1530598936, "creation_date": 1530597901, "answer_id": 51147603, "question_id": 51147449, "link": "https://stackoverflow.com/questions/51147449/rails-activestorage-accessing-through-rails-console/51147603#51147603", "title": "Rails ActiveStorage - accessing through Rails console", "body": "<p><sub>Rails is open source, fwiw.</sub></p>\n\n<p><a href=\"https://github.com/rails/rails/tree/ef5902a2f195c2be5a4e9ad0f31003774a93aa1c/activestorage/app/models/active_storage\" rel=\"noreferrer\">Looks like</a> it\u2019d be <a href=\"https://github.com/rails/rails/blob/ef5902a2f195c2be5a4e9ad0f31003774a93aa1c/activestorage/app/models/active_storage/blob.rb#L16\" rel=\"noreferrer\"><code>ActiveStorage::Blob</code></a> and <a href=\"https://github.com/rails/rails/blob/ef5902a2f195c2be5a4e9ad0f31003774a93aa1c/activestorage/app/models/active_storage/attachment.rb#L9\" rel=\"noreferrer\"><code>ActiveStorage::Attachment</code></a>.</p>\n"}], "owner": {"reputation": 10453, "user_id": 872514, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a42591877295d7b253af219057635ba7?s=128&d=identicon&r=PG", "display_name": "alexs333", "link": "https://stackoverflow.com/users/872514/alexs333"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1729, "favorite_count": 2, "accepted_answer_id": 51147603, "answer_count": 1, "score": 6, "last_activity_date": 1530598936, "creation_date": 1530597076, "question_id": 51147449, "link": "https://stackoverflow.com/questions/51147449/rails-activestorage-accessing-through-rails-console", "title": "Rails ActiveStorage - accessing through Rails console", "body": "<p><strong><em>ActiveStorage</em></strong> creates 2 tables <code>active_storage_blobs</code> and <code>active_storage_attachments</code>.  I wonder if there is a way to access them easily through Rails console (i.e. schema migration internal table can be accessed by <code>ActiveRecord::SchemaMigration</code>)?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "timezone"], "comments": [{"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1530593492, "post_id": 51146807, "comment_id": 89277675, "body": "use <code>in_time_zone(&quot;Central Time (US &amp; Canada)&quot;)</code> for CST/CDT?"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1530593539, "post_id": 51146807, "comment_id": 89277689, "body": "see list of all time zones with <code>rake time:zones:all</code>"}], "answers": [{"comments": [{"owner": {"reputation": 9222, "user_id": 307428, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a598c573fb032f717dd0754250366cc9?s=128&d=identicon&r=PG", "display_name": "jdog", "link": "https://stackoverflow.com/users/307428/jdog"}, "edited": false, "score": 0, "creation_date": 1531145835, "post_id": 51146915, "comment_id": 89474131, "body": "Love this code. Thank you! Works like a charm and is precise."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1530593864, "creation_date": 1530593864, "answer_id": 51146915, "question_id": 51146807, "link": "https://stackoverflow.com/questions/51146807/ruby-rails-time-zone-rush-hour/51146915#51146915", "title": "Ruby Rails Time zone rush hour", "body": "<p>The easiest way to check the time is in the specific range would be to compare hours and minutes:</p>\n\n<pre><code>cst = time.in_time_zone(\"America/Guatemala\") # CST whole year\n(16..18).cover?(cst.hour) &amp;&amp; cst.min &gt;= 15\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1530594643, "post_id": 51146941, "comment_id": 89278036, "body": "How does it answer the original question?"}, {"owner": {"reputation": 123, "user_id": 7506518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/608a7d37db9cf2ea97d9e7de98d367d0?s=128&d=identicon&r=PG", "display_name": "Seun Adekunle", "link": "https://stackoverflow.com/users/7506518/seun-adekunle"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1530595385, "post_id": 51146941, "comment_id": 89278262, "body": "Your logic can be passed into it, just an alternative"}], "tags": [], "owner": {"reputation": 123, "user_id": 7506518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/608a7d37db9cf2ea97d9e7de98d367d0?s=128&d=identicon&r=PG", "display_name": "Seun Adekunle", "link": "https://stackoverflow.com/users/7506518/seun-adekunle"}, "is_accepted": false, "score": 2, "last_activity_date": 1530595263, "last_edit_date": 1530595263, "creation_date": 1530594007, "answer_id": 51146941, "question_id": 51146807, "link": "https://stackoverflow.com/questions/51146807/ruby-rails-time-zone-rush-hour/51146941#51146941", "title": "Ruby Rails Time zone rush hour", "body": "<p>You might want to try the <code>use_zone</code> method</p>\n\n<pre><code>Time.use_zone(\"America/Chicago\") { (16..18).cover?(time.hour) &amp;&amp; time.min &gt;= 15 }\n</code></pre>\n"}], "owner": {"reputation": 9222, "user_id": 307428, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a598c573fb032f717dd0754250366cc9?s=128&d=identicon&r=PG", "display_name": "jdog", "link": "https://stackoverflow.com/users/307428/jdog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 51146915, "answer_count": 2, "score": 0, "last_activity_date": 1530595263, "creation_date": 1530593080, "last_edit_date": 1530593394, "question_id": 51146807, "link": "https://stackoverflow.com/questions/51146807/ruby-rails-time-zone-rush-hour", "title": "Ruby Rails Time zone rush hour", "body": "<p>The last developer is using time in our app like this.</p>\n\n<pre><code>:timestamp_requested =&gt; Time.now.utc\n</code></pre>\n\n<p>I want to check if <code>:timestamp_requested</code> is between <code>4:15PM</code> and <code>6:00PM</code> CST.</p>\n\n<p>I saw another post that uses <code>in_time_zone</code> but not sure how to check for between two times?</p>\n\n<pre><code>t = foo.start_time\n#\u21d2 2000-01-01 14:20:00 UTC\nt.zone\n#\u21d2 \"UTC\"\nt.in_time_zone(\"America/Chicago\")\n#\u21d2 Sat, 01 Jan 2000 09:20:00 EST -05:00\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "cookies", "server"], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 1, "last_activity_date": 1530588551, "creation_date": 1530588551, "answer_id": 51146274, "question_id": 51146023, "link": "https://stackoverflow.com/questions/51146023/rails-cookies-adds-an-array/51146274#51146274", "title": "Rails -- cookies adds an array", "body": "<p>I don't think it's possible to append directly to the cookie; it's stored as a string (which JSON.generate returns), so you need to deserialize, append, then reserialize and store:</p>\n\n<pre><code>current = JSON.parse cookies[:test]\ncurrent &lt;&lt; [@page.image, @page.title]\ncookies[:test] = JSON.generate current\n</code></pre>\n\n<p>Or a little more succinctly:</p>\n\n<pre><code>cookies[:test] = (JSON.parse(cookies[:test]) + [[@page.image, @page.title]]).to_json\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 9970746, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EcTeoxuR1Hc/AAAAAAAAAAI/AAAAAAAAAAc/AyTecg_yrnA/photo.jpg?sz=128", "display_name": "Shao Kahn", "link": "https://stackoverflow.com/users/9970746/shao-kahn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 51146274, "answer_count": 1, "score": -1, "last_activity_date": 1530588551, "creation_date": 1530586408, "last_edit_date": 1530587550, "question_id": 51146023, "link": "https://stackoverflow.com/questions/51146023/rails-cookies-adds-an-array", "title": "Rails -- cookies adds an array", "body": "<p>I store an array to cookies in someone method:</p>\n\n<pre><code>def someone\n  cookies[:test] = JSON.generate [@page.image, @page.title]\nend\n</code></pre>\n\n<p>But I want to cookies[:test] can store more information as \"&lt;&lt;\" not \"=\",<br>\nlike(will get an error): </p>\n\n<pre><code>def someone\n  cookies[:test] &lt;&lt; JSON.generate [@page.image, @page.title]\nend\n</code></pre>\n\n<p>Now, <code>cookies[:test].inspect</code> is <code>[[@page.image, @page.title], [@page.image, @page.title]]</code>.<br>\nHow to make this? </p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 1, "user_id": 10024226, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SFKhtL_m07k/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1LHiFEGFl4llaz3fCEz_ypN4BUyg/mo/photo.jpg?sz=128", "display_name": "kirtiman singh", "link": "https://stackoverflow.com/users/10024226/kirtiman-singh"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1530584824, "post_id": 51145829, "comment_id": 89275954, "body": "new_array = test_tweets.join(&quot; &quot;).split(&quot; &quot;) new_array.map {|word| word == banned_phrases.to_s? &quot;CENSORED&quot;:word}.flatten! This is what I could conjure up. :/ @SebastianPalma"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10024226, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SFKhtL_m07k/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1LHiFEGFl4llaz3fCEz_ypN4BUyg/mo/photo.jpg?sz=128", "display_name": "kirtiman singh", "link": "https://stackoverflow.com/users/10024226/kirtiman-singh"}, "edited": false, "score": 0, "creation_date": 1530587194, "post_id": 51145903, "comment_id": 89276378, "body": "What about the first at last &quot;sucks&quot;? One is &quot;sucks!&quot; and the other &quot;sucks!&quot;"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 1, "user_id": 10024226, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SFKhtL_m07k/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1LHiFEGFl4llaz3fCEz_ypN4BUyg/mo/photo.jpg?sz=128", "display_name": "kirtiman singh", "link": "https://stackoverflow.com/users/10024226/kirtiman-singh"}, "edited": false, "score": 0, "creation_date": 1530587270, "post_id": 51145903, "comment_id": 89276390, "body": "<i>Write a program that filters out the following words from tweets: &quot;sucks&quot;, ...</i> sucks isn&#39;t sucks!, I don&#39;t see that in the question. See the updated answer."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 1, "user_id": 10024226, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SFKhtL_m07k/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1LHiFEGFl4llaz3fCEz_ypN4BUyg/mo/photo.jpg?sz=128", "display_name": "kirtiman singh", "link": "https://stackoverflow.com/users/10024226/kirtiman-singh"}, "edited": false, "score": 0, "creation_date": 1530615835, "post_id": 51145903, "comment_id": 89289264, "body": "If it&#39;s wat you needed, you can accept the answer @kirtimansingh."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 1, "last_activity_date": 1530587527, "last_edit_date": 1530587527, "creation_date": 1530585311, "answer_id": 51145903, "question_id": 51145829, "link": "https://stackoverflow.com/questions/51145829/ruby-replace-elements-in-an-array/51145903#51145903", "title": "Ruby replace elements in an array", "body": "<p>You're converting the whole banned_phrases array to a string, which would return something like</p>\n\n<pre><code>\"[\\\"sucks\\\", \\\"bad\\\", \\\"hate\\\", \\\"foolish\\\", \\\"danger to society\\\"]\"\n</code></pre>\n\n<p>So, there's no word in any tweet that can be equal to that (and probably wouldn't). The main problem seems to be in the comparison.</p>\n\n<p>You could start iterating each tweet, split them, getting each word inside, and then check if the array with the banned phrases contains that specific word, if so, you return \"CENSORED\", otherwise the word. Then you can join with a whitespace each word in the generated array:</p>\n\n<pre><code>test_tweets = [\n  \"This president sucks!\",\n  \"I hate this Blank House!\",\n  \"I can't believe we're living with such a bad leadership. We were so foolish\",\n  \"President Presidentname is a danger to society. I hate that he's so bad \u2013 it sucks.\"\n]\n\nbanned_phrases = [\"sucks\", \"bad\", \"hate\", \"foolish\", \"danger to society\"]\n\ncensored_tweets = test_tweets.flat_map do |tweet|\n  tweet.split.map { |word| banned_phrases.include?(word) ? 'CENSORED' : word }.join(' ')\nend\np censored_tweets\n# [\"This president sucks!\", \"I CENSORED this Blank House!\", \"I can't believe we're living with such a CENSORED leadership. We were so CENSORED\", \"President Presidentname is a danger to society. I CENSORED that he's so CENSORED \u2013 it sucks.\"]\n</code></pre>\n\n<hr>\n\n<pre><code>test_tweets.flat_map do |tweet|\n  re = Regexp.union(banned_phrases)\n  tweet.split.map { |word| word.gsub(re, 'CENSORED') }.join(' ')\nend\n# [\"This president CENSORED!\", \"I CENSORED this Blank House!\", \"I can't believe we're living with such a CENSORED leadership. We were so CENSORED\", \"President Presidentname is a danger to society. I CENSORED that he's so CENSORED \u2013 it CENSORED.\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1530589035, "post_id": 51145941, "comment_id": 89276752, "body": "<code>Regexp.union</code> would be a better choice than using <code>Array#join</code>. Consider what happens when <code>banned_phrases = [&#39;.&#39;, &#39;a|b&#39;]</code> or similar things."}, {"owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1530594755, "post_id": 51145941, "comment_id": 89278068, "body": "@muistooshort edited, thanks for the suggestion, it does get messed up with <code>[&#39;.&#39;,&#39;a|b&#39;]</code> or other similar examples"}], "tags": [], "owner": {"reputation": 2946, "user_id": 1430057, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Tbizp.jpg?s=128&g=1", "display_name": "Subash", "link": "https://stackoverflow.com/users/1430057/subash"}, "is_accepted": false, "score": 0, "last_activity_date": 1530594730, "last_edit_date": 1530594730, "creation_date": 1530585763, "answer_id": 51145941, "question_id": 51145829, "link": "https://stackoverflow.com/questions/51145829/ruby-replace-elements-in-an-array/51145941#51145941", "title": "Ruby replace elements in an array", "body": "<p>Another one liner way,</p>\n\n<pre><code>test_tweets.map {|tweet| tweet.gsub!(Regexp.union(banned_phrases),'censored')}\n</code></pre>\n\n<p>it uses regular expression to match those banned phrases and globally replaces them</p>\n"}], "owner": {"reputation": 1, "user_id": 10024226, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SFKhtL_m07k/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1LHiFEGFl4llaz3fCEz_ypN4BUyg/mo/photo.jpg?sz=128", "display_name": "kirtiman singh", "link": "https://stackoverflow.com/users/10024226/kirtiman-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1142, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1530594730, "creation_date": 1530584498, "last_edit_date": 1530584878, "question_id": 51145829, "link": "https://stackoverflow.com/questions/51145829/ruby-replace-elements-in-an-array", "title": "Ruby replace elements in an array", "body": "<pre><code>test_tweets = [\n  \"This president sucks!\",\n  \"I hate this Blank House!\",\n  \"I can't believe we're living with such a bad leadership. We were so foolish\",\n  \"President Presidentname is a danger to society. I hate that he's so bad \u2013 it sucks.\"\n  ]\n\nbanned_phrases = [\"sucks\", \"bad\", \"hate\", \"foolish\", \"danger to society\"]\n</code></pre>\n\n<p>Write me a program that filters out the following words from tweets: \"sucks\", \"bad\", \"hate\", \"foolish\", and \"danger to society\". Replace each negative word or phrase them with the word \"CENSORED\".</p>\n\n<p>Not sure how to do this. Could someone shed some light?</p>\n\n<pre><code>new_array = test_tweets.join(\" \").split(\" \")\nnew_array.map { |word| word == banned_phrases.to_s ? \"CENSORED\" : word }.flatten!\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "passenger"], "owner": {"reputation": 1372, "user_id": 2956829, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WW0RL.jpg?s=128&g=1", "display_name": "el n00b", "link": "https://stackoverflow.com/users/2956829/el-n00b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1530582081, "creation_date": 1530581679, "last_edit_date": 1530582081, "question_id": 51145534, "link": "https://stackoverflow.com/questions/51145534/phusion-passenger-vs-raw-process", "title": "phusion passenger vs raw process", "body": "<p>I'm looking into tuning our <a href=\"https://phusionpassenger.com\" rel=\"nofollow noreferrer\">Phusion Passenger</a> with <a href=\"https://www.nginx.com\" rel=\"nofollow noreferrer\">Nginx</a> set up for deployment of Rails applications on AWS.  After going through all the documentation, I am leaning towards completely removing Passenger from the stack since I can spin up a bunch of little Docker instances pointing to Rails directly instead.</p>\n\n<p>Am I missing something in the use of Passenger?</p>\n\n<p>Since I have my applications behind an AWS load balancer, I'm not sure whether I need it or not.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "simple-form"], "answers": [{"comments": [{"owner": {"reputation": 17747, "user_id": 241142, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/dc690e6057d0756358e2d80409a945b1?s=128&d=identicon&r=PG", "display_name": "iconoclast", "link": "https://stackoverflow.com/users/241142/iconoclast"}, "edited": false, "score": 0, "creation_date": 1530674148, "post_id": 51149112, "comment_id": 89313780, "body": "interesting... does a hint for a checkbox <i>look</i> just like an inline label?  The example you linked to deals with a text field, not a checkbox, so I&#39;m not sure how this will work"}], "tags": [], "owner": {"reputation": 435, "user_id": 6733955, "user_type": "registered", "profile_image": "https://graph.facebook.com/1257294547637551/picture?type=large", "display_name": "Dende", "link": "https://stackoverflow.com/users/6733955/dende"}, "is_accepted": false, "score": 0, "last_activity_date": 1530603800, "creation_date": 1530603800, "answer_id": 51149112, "question_id": 51145532, "link": "https://stackoverflow.com/questions/51145532/how-to-style-the-inline-label-in-simple-form/51149112#51149112", "title": "How to style the inline label in Simple Form?", "body": "<p>You might want to have a hint, not an inline label.</p>\n\n<p>Then you can write a wrapper, which allows doing something like this</p>\n\n<pre><code>&lt;%= f.input :subdomain, input_wrapper_html: { class: 'col-sm-4' } %&gt;\n</code></pre>\n\n<p>And then your hints will be inline.</p>\n\n<p>Please check here <a href=\"https://github.com/plataformatec/simple_form/issues/1035\" rel=\"nofollow noreferrer\">https://github.com/plataformatec/simple_form/issues/1035</a></p>\n"}], "owner": {"reputation": 17747, "user_id": 241142, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/dc690e6057d0756358e2d80409a945b1?s=128&d=identicon&r=PG", "display_name": "iconoclast", "link": "https://stackoverflow.com/users/241142/iconoclast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1120, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530603800, "creation_date": 1530581663, "question_id": 51145532, "link": "https://stackoverflow.com/questions/51145532/how-to-style-the-inline-label-in-simple-form", "title": "How to style the inline label in Simple Form?", "body": "<p>I have a <a href=\"https://github.com/plataformatec/simple_form\" rel=\"nofollow noreferrer\">Simple Form</a> checkbox which uses both a regular field label and an inline label:</p>\n\n<pre><code>&lt;%= f.input :remove_default_template, \n  label: 'Advanced Option',\n  inline_label: \"Remove Header, Footer, and Department Name\"\n%&gt;\n</code></pre>\n\n<p>And I need to add styling to the inline label.  How can I do this?  I would expect <em>something following this pattern</em> to work:</p>\n\n<pre><code>&lt;%= f.input :remove_default_template, \n  label: 'Advanced Option',\n  inline_label: \"Remove Header, Footer, and Department Name\",\n  inline_label_html: \n  input_html: {class: \"input_class\"},               # THIS works\n  wrapper_html: {class: \"wrapper_class\"},           # THIS works\n  label_html: {class: \"label_class\"},               # THIS works  \n  inline_label_html: {class: \"inline_label_class\"}  # THIS DOES NOT WORK!!!\n%&gt;\n</code></pre>\n\n<p>but the final line doesn't work:</p>\n\n<pre><code>inline_label_html: {class: \"inline_label_class\"}\n</code></pre>\n\n<p>Since Simple Form doesn't seem to support this option (at least under the name I expected, nor anything else that I could find), how can I accomplish the same goal?</p>\n"}, {"tags": ["arrays", "ruby", "date"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1530583363, "post_id": 51145469, "comment_id": 89275677, "body": "<code>act</code> is an array. There are plenty ways to iterate through an array in Ruby, but the recommended and if you don&#39;t need anything &quot;extra&quot; is using <a href=\"https://ruby-doc.org/core-2.5.0/Array.html#method-i-each\" rel=\"nofollow noreferrer\"><code>Array#each</code></a>."}, {"owner": {"reputation": 1, "user_id": 10024088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6db6648203b554e5e270044768e4ea0?s=128&d=identicon&r=PG&f=1", "display_name": "Belal Kamara", "link": "https://stackoverflow.com/users/10024088/belal-kamara"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1530584017, "post_id": 51145469, "comment_id": 89275817, "body": "When I use the <code>Array#each</code> I get a <code>expected Numeric</code> error. My code is                    <code>def event_days     Activity.pluck(:end_date).each do |endz|       (endz - closer_to_end_date).to_i     end   end</code>"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1530584525, "post_id": 51145469, "comment_id": 89275893, "body": "It seems to be a difference in the data types you&#39;re comparing. What&#39;s the value of <code>closer_to_end_date</code>? try <code>(endz - closer_to_end_date.to_date).to_i</code>."}, {"owner": {"reputation": 1, "user_id": 10024088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6db6648203b554e5e270044768e4ea0?s=128&d=identicon&r=PG&f=1", "display_name": "Belal Kamara", "link": "https://stackoverflow.com/users/10024088/belal-kamara"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1530584695, "post_id": 51145469, "comment_id": 89275925, "body": "I get this error <code>undefined method </code>to_date&#39; for #&lt;Array:0x007fd11a803ca0&gt; Did you mean? to_a` also this is that method its subtracting from <code>def closer_to_end_date     Activity.pluck(:start_date).each do |acts|       if Date.today &gt;= acts         Date.today       elsif acts &gt; Date.today         acts       end     end   end</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10024088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6db6648203b554e5e270044768e4ea0?s=128&d=identicon&r=PG&f=1", "display_name": "Belal Kamara", "link": "https://stackoverflow.com/users/10024088/belal-kamara"}, "edited": false, "score": 0, "creation_date": 1530665072, "post_id": 51145968, "comment_id": 89312115, "body": "I tried that code in the rail console and it returns a &#39;nil&#39; array.   IE:  <code>2.4.0 :004 &gt; start = Activity.pluck(:start_date).map do |acts| 2.4.0 :005 &gt;     puts acts 2.4.0 :006?&gt;   end    (1.1ms)  SELECT &quot;activities&quot;.&quot;start_date&quot; FROM &quot;activities&quot; 2018-06-17 2018-06-17 2018-06-17 2018-06-17 2018-06-17 2018-06-17 2018-04-15 2018-06-26  =&gt; [nil, nil, nil, nil, nil, nil, nil, nil] </code>"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 1, "user_id": 10024088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6db6648203b554e5e270044768e4ea0?s=128&d=identicon&r=PG&f=1", "display_name": "Belal Kamara", "link": "https://stackoverflow.com/users/10024088/belal-kamara"}, "edited": false, "score": 0, "creation_date": 1530665767, "post_id": 51145968, "comment_id": 89312233, "body": "That&#39;s because you&#39;re not storing nothing within the map block. Each value is nil because of the result of using puts, that&#39;s always nil"}, {"owner": {"reputation": 1, "user_id": 10024088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6db6648203b554e5e270044768e4ea0?s=128&d=identicon&r=PG&f=1", "display_name": "Belal Kamara", "link": "https://stackoverflow.com/users/10024088/belal-kamara"}, "edited": false, "score": 0, "creation_date": 1530666821, "post_id": 51145968, "comment_id": 89312408, "body": "I&#39;m not understanding how I can store something in the block (Like fetch) to return the date. Could you send me an example please?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 1, "user_id": 10024088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6db6648203b554e5e270044768e4ea0?s=128&d=identicon&r=PG&f=1", "display_name": "Belal Kamara", "link": "https://stackoverflow.com/users/10024088/belal-kamara"}, "edited": false, "score": 0, "creation_date": 1530667455, "post_id": 51145968, "comment_id": 89312531, "body": "The code in the answer is an example. It should store the value of <code>Date.today.to_date</code> or <code>acts</code> depending on what they return, assuming the can have any value, even nil. But in the code you provided, it stores the result of each <code>puts acts</code>, knowing that puts always returns nil, nil is what the map will store. I must go in my steps and the _you&#39;re not storing nothing _ was wrong, you&#39;re storing nil. Just try the code I provided in the answer."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 2, "last_activity_date": 1530586007, "creation_date": 1530586007, "answer_id": 51145968, "question_id": 51145469, "link": "https://stackoverflow.com/questions/51145469/how-can-i-get-all-the-elements-in-an-array-using-fetch/51145968#51145968", "title": "How can I get all the elements in an array using .fetch?", "body": "<p><code>closer_to_end_date</code> returns an Enumerator, because is what the call of <code>each</code> in an array returns, so, actually the subtraction <code>endz - closer_to_end_date</code> is being applied in a date and an array object.</p>\n\n<p>If you wanna store the value after each comparison in <code>closer_to_end_date</code> you could try using <code>map</code>, it'll store each value you return within the iteration, resulting in a new array.</p>\n\n<p>Try tweaking a bit your code like:</p>\n\n<pre><code>def closer_to_end_date\n  Activity.pluck(:start_date).map do |acts|\n    if Date.today &gt;= acts\n      Date.today.to_date\n    elsif acts &gt; Date.today\n      acts\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10024088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6db6648203b554e5e270044768e4ea0?s=128&d=identicon&r=PG&f=1", "display_name": "Belal Kamara", "link": "https://stackoverflow.com/users/10024088/belal-kamara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530834510, "creation_date": 1530580899, "last_edit_date": 1530584809, "question_id": 51145469, "link": "https://stackoverflow.com/questions/51145469/how-can-i-get-all-the-elements-in-an-array-using-fetch", "title": "How can I get all the elements in an array using .fetch?", "body": "<p>I'm new to Ruby and Ruby on Rails and I have data in an array which is a Date data type. I'm trying to have a date comparison with each of the dates in the array so I used <code>.fetch</code> to retrieve one of the dates to test it out with <code>Date.today</code> and it worked. But is there a way for fetch to iterate over each date in the array?</p>\n\n<p>For example:</p>\n\n<pre><code>act = [Tue, 30 Oct 2018, Tue, 30 Oct 2018, Tue, 30 Oct 2018, Tue, 30 Oct 2018, Tue, 30 Oct 2018, Tue, 30 Oct 2018, Tue, 30 Oct 2018, Sun, 01 Jul 2018]\n</code></pre>\n\n<p><code>act.fetch(0)</code> is <code>Tue, 30 Oct 2018</code> and that is a Date data type. </p>\n\n<p>Also, if I don't call fetch and try to do a block statement to iterate, I get an error that states:</p>\n\n<blockquote>\n  <p>no implicit conversion of Date into Array</p>\n</blockquote>\n\n<p>EDIT 1: When I tried to iterate using the Array#each like this:</p>\n\n<pre><code>     2.4.0 :001 &gt; cted = Activity.pluck(:start_date).each do |acts|\n2.4.0 :002 &gt;           if Date.today &gt;= acts\n2.4.0 :003?&gt;             Date.today\n2.4.0 :004?&gt;           elsif acts &gt; Date.today\n2.4.0 :005?&gt;             acts\n2.4.0 :006?&gt;           end\n2.4.0 :007?&gt;       end\n   (1.0ms)  SELECT \"activities\".\"start_date\" FROM \"activities\"\n =&gt; [Sun, 17 Jun 2018, Sun, 17 Jun 2018, Sun, 17 Jun 2018, Sun, 17 Jun 2018, Sun, 17 Jun 2018, Sun, 17 Jun 2018, Sun, 15 Apr 2018, Tue, 26 Jun 2018] \n</code></pre>\n\n<p>It returns the array when I tried to use it. </p>\n\n<pre><code>def closer_to_end_date\n  Activity.pluck(:start_date).each do |acts|\n    if Date.today &gt;= acts\n      Date.today\n    elsif acts &gt; Date.today\n      acts\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "math", "combinations", "factorial"], "comments": [{"owner": {"reputation": 14582, "user_id": 871096, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/39b6e181c797ef3ab2119322f7cac20b?s=128&d=identicon&r=PG", "display_name": "Robert Dodier", "link": "https://stackoverflow.com/users/871096/robert-dodier"}, "edited": false, "score": 1, "creation_date": 1530575562, "post_id": 51144838, "comment_id": 89274212, "body": "<code>(n choose r) = n!&#47;(r!*(n - r)!)</code> so I think the formula in the comment is correct, and not the one that&#39;s implemented."}], "answers": [{"comments": [{"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 1, "creation_date": 1530595565, "post_id": 51145350, "comment_id": 89278321, "body": "You could also pass the <code>initial</code> value to <code>inject</code> to handle <code>0!</code>: <code>(1..0).inject(1, :*) # =&gt; 1</code>...the <code>initial</code> defaults to the first element of the collection, but since multiplying by 1 doesn&#39;t affect the result, the only difference this makes is when <code>n &lt; 1</code>, which causes <code>(1..n)</code> to be an empty collection. <code>inject</code> will then return the explicit <code>initial</code> you pass in. This will change (probably errornous) inputs: <code>(1..-10).inject(1, :*) # =&gt; 1 instead of nil</code>, but I believe both <code>n &gt;= r =&gt; 0</code> is supposed to be true for this equation"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1530598750, "post_id": 51145350, "comment_id": 89279481, "body": "@SimpleLime True but I like the explicit <code>n==0</code> check, the intent seems more obvious to me. This factorial implementation is only for a limited domain anyway and the <code>n &gt;= r</code> cases are better handled elsewhere. You could also put the <code>factorial</code> definition inside <code>combinations</code> to make it really clear that it is only defined as a notational convenience rather than a general purpose implementation."}], "tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": false, "score": 2, "last_activity_date": 1530579676, "creation_date": 1530579676, "answer_id": 51145350, "question_id": 51144838, "link": "https://stackoverflow.com/questions/51144838/ruby-factorial-combinations-using-inject/51145350#51145350", "title": "Ruby - factorial / combinations using inject", "body": "<p>You have a couple problems:</p>\n\n<ol>\n<li>You're using the wrong equation for <code>C(n,r)</code>.</li>\n<li>You're ignoring a couple boundary conditions in your factorial and <code>C(n,r)</code> implementations.</li>\n</ol>\n\n<p>The correct formula for the <a href=\"https://en.wikipedia.org/wiki/Binomial_coefficient\" rel=\"nofollow noreferrer\">binomial coefficient</a> is:</p>\n\n<pre><code>             n!\nC(n,r) = ----------\n         r!(n - r)!\n</code></pre>\n\n<p>On to the boundary conditions.</p>\n\n<p>By definition, <code>0!</code> is <code>1</code> so you should wrap your <code>inject</code>s in another lambda:</p>\n\n<pre><code>factorial = -&gt;(n) { n == 0 ? 1 : (1..n).inject(:*) }\n</code></pre>\n\n<p>Also, <code>C(n,r)</code> is zero if <code>n &lt; r</code> so you should check for that.</p>\n\n<pre><code>combinations = -&gt;(n, r) do\n  if(n &lt; r)\n    0\n  else\n    factorial[n] / (factorial[r] * factorial[n - r])\n  end\nend\n</code></pre>\n\n<p>You could also short circuit the <code>n == r</code> and <code>r == 0</code> cases and not worry about <code>0!</code>:</p>\n\n<pre><code>factorial = -&gt;(n) { (1..n).inject(:*) }\ncombinations = -&gt;(n, r) do\n  if(n &lt; r)\n    0\n  elsif(n == r || r == 0)\n    1\n  else\n    factorial[n] / (factorial[r] * factorial[n - r])\n  end\nend\n</code></pre>\n\n<p>Since you're explicitly dealing with combinations you can probably safely ignore the <code>n &lt; 0</code> and <code>r &lt; 0</code> cases but you can add checks for those as well.</p>\n"}], "owner": {"reputation": 181, "user_id": 4794419, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6a9ece4d31badd2d176e02696cf6a152?s=128&d=identicon&r=PG&f=1", "display_name": "MattEm", "link": "https://stackoverflow.com/users/4794419/mattem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1530579676, "creation_date": 1530574239, "question_id": 51144838, "link": "https://stackoverflow.com/questions/51144838/ruby-factorial-combinations-using-inject", "title": "Ruby - factorial / combinations using inject", "body": "<p>I am trying to solve this combination (nCr) problem, which essentially boils down to factorials. Any help explaining why my approach doesnt work is helpful.. </p>\n\n<pre><code>combination = -&gt; (n) do\n    -&gt; (r) do\n\n    #This equation I wrote, and it doesnt work, which \n    #This seems like my equation is (n!/r!)*(n-r)!  &lt;-- factorial equation       \n    ((1..n).inject(:*)/(1..r).inject(:*)) * (1..(n - r)).inject(:*)\n\n    # This is the answer, which seems like n!/(r!*(n-r)!)    \n    #(1..n).inject(1, :*) / (((1..r).inject(1, :*)) * ((1..(n-r)).inject(1, :*)))\n    end\nend\n\nn = 4\nr = 2\nnCr = combination.(n)\nputs nCr.(r)\n</code></pre>\n"}, {"tags": ["ruby", "simple-form"], "comments": [{"owner": {"reputation": 3119, "user_id": 4842949, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0agpj31wtZ8/AAAAAAAAAAI/AAAAAAAAAAA/mSolbNN-zIY/photo.jpg?sz=128", "display_name": "Joseph Cho", "link": "https://stackoverflow.com/users/4842949/joseph-cho"}, "edited": false, "score": 0, "creation_date": 1530562625, "post_id": 51143006, "comment_id": 89270471, "body": "You&#39;ll need an onclick function that triggers each time you check a box. This function would take your current checked boxes and call the your <code>matches</code> method and rerender your view.  A screenshot of what your form looks like and what you want would help a lot."}, {"owner": {"reputation": 571, "user_id": 4759390, "user_type": "registered", "profile_image": "https://graph.facebook.com/839598759461592/picture?type=large", "display_name": "Artem Dorodovskyi", "link": "https://stackoverflow.com/users/4759390/artem-dorodovskyi"}, "edited": false, "score": 0, "creation_date": 1530566038, "post_id": 51143006, "comment_id": 89271721, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/22159614/ruby-on-rails-4-simple-form-multiple-select-input\">Ruby on Rails 4 - simple_form multiple select input</a>"}, {"owner": {"reputation": 11, "user_id": 10023278, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PDCDS9-vypA/AAAAAAAAAAI/AAAAAAAAo6k/VLisQ208_so/photo.jpg?sz=128", "display_name": "Pedro Marzag&#227;o", "link": "https://stackoverflow.com/users/10023278/pedro-marzag%c3%a3o"}, "reply_to_user": {"reputation": 3119, "user_id": 4842949, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0agpj31wtZ8/AAAAAAAAAAI/AAAAAAAAAAA/mSolbNN-zIY/photo.jpg?sz=128", "display_name": "Joseph Cho", "link": "https://stackoverflow.com/users/4842949/joseph-cho"}, "edited": false, "score": 0, "creation_date": 1530567191, "post_id": 51143006, "comment_id": 89272132, "body": "Hi @JosephCho, thanks for that. So the view render will only happen later on. Take this form as a profile edit form. Form and Render view are totally independent."}], "owner": {"reputation": 11, "user_id": 10023278, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PDCDS9-vypA/AAAAAAAAAAI/AAAAAAAAo6k/VLisQ208_so/photo.jpg?sz=128", "display_name": "Pedro Marzag&#227;o", "link": "https://stackoverflow.com/users/10023278/pedro-marzag%c3%a3o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1530752644, "creation_date": 1530561686, "last_edit_date": 1530752644, "question_id": 51143006, "link": "https://stackoverflow.com/questions/51143006/how-can-i-change-how-collections-are-stored-through-simple-form", "title": "How can I change how collections are stored through Simple Form?", "body": "<p>I want to return on a view the users whose interest_category selections match my own 100% on at least 1 interest_category. If users don't match on at least 1 interest_category, they should not be selected.</p>\n\n<p>Apart from the 100% matches, my view should show sorted by match rate.</p>\n\n<p>For instance, if I select 5 interest_category items, and another <strong>user A</strong> has at least 5 of her interest_category items which are equal to mine, this is a 100% match. </p>\n\n<p>If a <strong>user B</strong> has 4 interests which are equal to mine, this is a 4/5 (80%) match.</p>\n\n<p>Each user edits its' profile with a Simple Form. I'm posting part of it here:</p>\n\n<pre><code>&lt;%= f.input :interest_category, collection: ['Reading', 'Tech' ,'Food', 'Mindfullness', 'Sports', 'Parenting', 'Yoga'], input_html: { multiple: true }, include_blank: true, include_hidden: false, label: \"Select your interest: \"%&gt;\n</code></pre>\n\n<p>Which, after selecting the first 3 options, stores the following into the DB:</p>\n\n<p><strong>\"[\\\"Reading\\\", \\\"Tech\\\", \\\"Food\\\"]\"</strong></p>\n\n<p>I have started to define a new method on my Users controller called <strong>matches</strong> which should have the matching logic to select my matched users.</p>\n\n<p>Would someone be able to help me out on understanding how to go ahead and think about this?</p>\n\n<p><strong>EDITED</strong></p>\n\n<p>So, I was able to resolve this by adding a method on my Users controller and work from there with IFs on first defining a variable that would get me the common elements:</p>\n\n<pre><code>join_categories = match_real_categories &amp; user_real_categories\n</code></pre>\n\n<p>and then playing around with the .length, calculating a ratio between common  elements and both match or user elements:</p>\n\n<pre><code>      match_real_categories = match.interest_category.gsub(/[~;:\"'&lt;&gt;?#\\s\\]\\\\\\[]+/, '').split(\",\")\n      user_real_categories = @user.interest_category.gsub(/[~;:\"'&lt;&gt;?#\\s\\]\\\\\\[]+/, '').split(\",\")\n      join_categories = match_real_categories &amp; user_real_categories\n      join_length = join_categories.length\n\n      if join_categories.length == 0\n        match_value = 0\n      elsif match_real_categories.sort == user_real_categories.sort\n        match_value = 1\n      else\n        match_value = join_categories.length.to_f*2 / (user_real_categories.length.to_f + match_real_categories.length.to_f)\n      end\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "bundler", "gemspecs"], "comments": [{"owner": {"reputation": 10091, "user_id": 4625365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/l6v41.jpg?s=128&g=1", "display_name": "Matt Brictson", "link": "https://stackoverflow.com/users/4625365/matt-brictson"}, "edited": false, "score": 0, "creation_date": 1530586743, "post_id": 51142827, "comment_id": 89276285, "body": "I have never seen the <code>&quot;=3.14&quot;</code> syntax before. I think <code>&quot;3.14&quot;</code> (i.e. without the equals sign) is preferred. Also: when you say &quot;dependency errors&quot;, could you be more specific? Can you post the error?"}, {"owner": {"reputation": 1372, "user_id": 2956829, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WW0RL.jpg?s=128&g=1", "display_name": "el n00b", "link": "https://stackoverflow.com/users/2956829/el-n00b"}, "reply_to_user": {"reputation": 10091, "user_id": 4625365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/l6v41.jpg?s=128&g=1", "display_name": "Matt Brictson", "link": "https://stackoverflow.com/users/4625365/matt-brictson"}, "edited": false, "score": 0, "creation_date": 1530624956, "post_id": 51142827, "comment_id": 89295328, "body": "I was trying to create a project to simulate the issue but cannot reproduce it.  It is only happening in one of my projects so I&#39;ll need to dig a little more to get the errors (it&#39;s not an easy app to run locally).  I&#39;ll get it here as soon as I can."}, {"owner": {"reputation": 1372, "user_id": 2956829, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WW0RL.jpg?s=128&g=1", "display_name": "el n00b", "link": "https://stackoverflow.com/users/2956829/el-n00b"}, "reply_to_user": {"reputation": 10091, "user_id": 4625365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/l6v41.jpg?s=128&g=1", "display_name": "Matt Brictson", "link": "https://stackoverflow.com/users/4625365/matt-brictson"}, "edited": false, "score": 0, "creation_date": 1530628745, "post_id": 51142827, "comment_id": 89297922, "body": "I cannot reproduce it at all now.  It must have just been a fluke.  :confused:"}, {"owner": {"reputation": 4175, "user_id": 711534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e7e729bd5be485229516d1bdbe1c175?s=128&d=identicon&r=PG", "display_name": "grzuy", "link": "https://stackoverflow.com/users/711534/grzuy"}, "edited": false, "score": 0, "creation_date": 1532399936, "post_id": 51142827, "comment_id": 89948009, "body": "Are you sure that version <code>1.12</code> of <code>mygem</code> published in gem.fury does depend on <code>my_other_gem</code>? Or was that dependency added on a later version?"}], "owner": {"reputation": 1372, "user_id": 2956829, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WW0RL.jpg?s=128&g=1", "display_name": "el n00b", "link": "https://stackoverflow.com/users/2956829/el-n00b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530621477, "creation_date": 1530560732, "last_edit_date": 1530621477, "question_id": 51142827, "link": "https://stackoverflow.com/questions/51142827/ruby-gem-inclusion-still-requires-explicit-dependencies-in-gemfile", "title": "ruby gem inclusion still requires explicit dependencies in Gemfile", "body": "<p>I have a Gem project that has the following in the <strong>mygem.gemspec</strong> file:</p>\n\n<pre><code>Gem::Specification.new do |s|\n\n  s.add_dependency 'some_other_gem'\n\nend\n</code></pre>\n\n<p>Everything builds and publishes just fine for the Gem.</p>\n\n<p>In my Rails projects that use it, I have the following in my <strong>Gemfile</strong>:</p>\n\n<pre><code>source 'http://abc123@gem.fury.io/my_user/' do\n  gem 'mygem', '1.12'\nend\n</code></pre>\n\n<p>When I run my projects, I need to explicitly add  the following in the <strong>Gemfile</strong> or else I wind up with dependency errors:</p>\n\n<pre><code>'some_other_gem', '3.14'\n\nsource 'http://abc123@gem.fury.io/my_user/' do\n  gem 'mygem', '1.12'\nend\n</code></pre>\n\n<p>Project's Rails version is 5.0.6 running on Ruby 2.3.1.</p>\n\n<p>Is there more necessary than just <code>s.add_dependency</code> in my <strong>mygem.gemspec</strong> file?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "chartkick"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 6317543, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cdcd66e111e8f429321db455b2b968b3?s=128&d=identicon&r=PG&f=1", "display_name": "AJC", "link": "https://stackoverflow.com/users/6317543/ajc"}, "edited": false, "score": 0, "creation_date": 1533677764, "post_id": 51143287, "comment_id": 90432268, "body": "Thanks i ended up adding to the user model since using devise."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": true, "score": 1, "last_activity_date": 1530823066, "last_edit_date": 1530823066, "creation_date": 1530563127, "answer_id": 51143287, "question_id": 51142556, "link": "https://stackoverflow.com/questions/51142556/rails-chartkick-cummulative-user-graph/51143287#51143287", "title": "Rails: Chartkick cummulative user graph", "body": "<p>If I understand your question, you need to manipulate the hash of data.</p>\n\n<p>In controller do somehing like this:</p>\n\n<pre><code>@data = User.group_by_week(:created_at).count\naccumulator = 0\n@data.transform_values! do |val|\n  val += accumulator\n  accumulator = val\nend\n</code></pre>\n\n<p>Then show the chart in view as <code>&lt;%= line_chart @data %&gt;</code></p>\n\n<p>If you inspect the hash <code>&lt;%= User.group_by_week(:created_at).count.inspect %&gt;</code> it becomes clear.</p>\n\n<p>In order to use accumulator over any hash, could be useful to add a custom method to Class hash.</p>\n\n<pre><code>module HashPatch\n  def accumulate_values!\n    accumulator = 0\n    transform_values! do |val|\n      val+= accumulator\n      accumulator = val\n    end\n  end\nend\nHash.include HashPatch\n\npoints = {'x1' =&gt; 0, 'x2' =&gt; 10, 'x3' =&gt; 10, 'x4' =&gt; 10.1}\npoints.accumulate_values! #=&gt; {\"x1\"=&gt;0, \"x2\"=&gt;10, \"x3\"=&gt;20, \"x4\"=&gt;30.1}\n</code></pre>\n\n<p><code>transform_values!</code> since Ruby v4.2.1</p>\n"}], "owner": {"reputation": 55, "user_id": 6317543, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cdcd66e111e8f429321db455b2b968b3?s=128&d=identicon&r=PG&f=1", "display_name": "AJC", "link": "https://stackoverflow.com/users/6317543/ajc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 0, "accepted_answer_id": 51143287, "answer_count": 1, "score": 1, "last_activity_date": 1530823066, "creation_date": 1530559392, "question_id": 51142556, "link": "https://stackoverflow.com/questions/51142556/rails-chartkick-cummulative-user-graph", "title": "Rails: Chartkick cummulative user graph", "body": "<p>I'm using chartkick in an active admin dashboard and trying to track a cumulative user base over time.  </p>\n\n<p>Using groupdate to count by week I can successfully create a chart displaying point in time counts but struggling to display cumulative results.</p>\n\n<p>Any suggestion on best way to approach as I have not found a similar question?  </p>\n\n<p><strong>chart partial</strong></p>\n\n<pre><code>            &lt;%= javascript_include_tag \"https://www.gstatic.com/charts/loader.js\" %&gt;\n            &lt;%= line_chart User.group_by_week(:created_at).count %&gt;\n</code></pre>\n\n<p><strong>dashboard.rb</strong></p>\n\n<pre><code>            column do\n              panel \"Recent User Additions\" do\n                table_for User.order(\"id desc\").limit(10).each do |_user|\n                  column(:email)    { |user| link_to(user.email, admin_user_path(user)) }\n                  column(:state_waters)    { |user| link_to(user.state_waters, admin_user_path(user)) }\n                  column(:state_waters)    { |user| link_to(user.home_port, admin_user_path(user)) }\n                end\n              end\n</code></pre>\n"}, {"tags": ["ruby", "methods", "grep", "race-condition", "code-duplication"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1530556622, "post_id": 51141593, "comment_id": 89268077, "body": "This is quite a vague problem, especially since you mention &quot;race conditions&quot;. Are the methods defined in different files? Different classes/modules? Why does the order in which files are loaded affect which method &quot;takes precedence&quot;? Can you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of the problem? There are all sorts of things you <i>could</i> try, but I&#39;m not sure what to suggest, with such little information to go on."}, {"owner": {"reputation": 546, "user_id": 7184365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/706810459355fe8aff132f0655b6f481?s=128&d=identicon&r=PG", "display_name": "Toma Nistor", "link": "https://stackoverflow.com/users/7184365/toma-nistor"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1530557795, "post_id": 51141593, "comment_id": 89268567, "body": "Hey @TomLord, the duplicated methods are spread out across hundreds of different files and contained in one class. These are essentially helper methods that should have been centralized in one file but instead have been duplicated over and over and often altered, but keeping the same method name. Right now with this question I just need a good way to locate all the instances where these methods have been duplicated and are different from what the method <i>should</i> be. So it&#39;s more of a research and planning phase of dealing with a race condition."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1530557799, "post_id": 51141593, "comment_id": 89268569, "body": "237 methods with the same name in the same Class? Many methods have the same name but different implementations for numerous reasons e.g. <code>Integer#+</code> and <code>String#+</code> should obviously differ, but I am not sure why you would have them redefined over and over in the same class."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1530557874, "post_id": 51141593, "comment_id": 89268604, "body": "Based on your above comment what you should do is write a module that contains the &quot;control&quot; method and then include it in the class and remove all the other references regardless of their implementation"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1530558410, "post_id": 51141593, "comment_id": 89268843, "body": "You should clarify by editing your question, not trying to explain in comments."}, {"owner": {"reputation": 1915, "user_id": 1188132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44cf1e5c382cd1f508662f7abf357615?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1188132/max"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1530558739, "post_id": 51141593, "comment_id": 89268976, "body": "Could you post an example of three truncated methods? It may be possible to compare the bytecode of each of the similarly named functions, but the success of that approach depends on how similar the &#39;correct&#39; implementations are to each other. Alternatively, @engineersmnky is correct in that you should write a module with the correct implementation, and include it in every other class, and nuke each class-specific method"}, {"owner": {"reputation": 546, "user_id": 7184365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/706810459355fe8aff132f0655b6f481?s=128&d=identicon&r=PG", "display_name": "Toma Nistor", "link": "https://stackoverflow.com/users/7184365/toma-nistor"}, "reply_to_user": {"reputation": 1915, "user_id": 1188132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44cf1e5c382cd1f508662f7abf357615?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1188132/max"}, "edited": false, "score": 0, "creation_date": 1530560302, "post_id": 51141593, "comment_id": 89269524, "body": "@Max I&#39;ve added some examples of a method with different variations."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1530563817, "post_id": 51141593, "comment_id": 89270938, "body": "Do you have (or could you produce) a list of all modules (of which some are classes) that may contain instance methods of the same name in different files? Also, are you only interested in instance methods, as opposed to class/module methods?"}, {"owner": {"reputation": 546, "user_id": 7184365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/706810459355fe8aff132f0655b6f481?s=128&d=identicon&r=PG", "display_name": "Toma Nistor", "link": "https://stackoverflow.com/users/7184365/toma-nistor"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1530566997, "post_id": 51141593, "comment_id": 89272068, "body": "@CarySwoveland I believe for the most part they are housed in one module and I think they are all instance methods."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1530625696, "post_id": 51141593, "comment_id": 89295850, "body": "@TomaNistor You said the issue is that &quot;the same method is defined in <b>one class</b>, in <b>multiple files</b>&quot;. And yet, <b>your example does not show multiple files, and does not show a <code>class</code></b>. Can you please make your example a bit clearer, so I know what we&#39;re dealing with here?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1530723536, "post_id": 51141593, "comment_id": 89339032, "body": "I&#39;ve come to the conclusion that what I&#39;ve proposed probably won&#39;t work; more generally, that no solution that runs code in the files of interest is likely to work. For one, it would likely cause an exception to be raised almost immediately. For another, it could cause unwanted side effects (such as modifying a database). I therefore deleted my answer. I will, however,  offer another solution (in a separate answer) that I think has promise."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1530859591, "creation_date": 1530859591, "answer_id": 51204469, "question_id": 51141593, "link": "https://stackoverflow.com/questions/51141593/how-to-find-duplicated-ruby-methods-with-the-same-name-but-different-code/51204469#51204469", "title": "How to find duplicated Ruby methods with the same name but different code?", "body": "<p>My first thought was to execute each file of interest with additional code added on the fly to build a directory of methods and their locations. That clearly would not work, however, as exceptions could be expected to be raised almost immediately. Even if exceptions were avoided there would be no guarantee that that added code would be executed. In addition, there could be unintended adverse consequences of blinding running code.</p>\n\n<p>I think the only reasonable approach would be to parse the files of interest. There may even be gems that do just that. It's certainly worth a search.</p>\n\n<p>I have constructed a method that parses the files to build a hash containing the information desired. The main requirement for its use is that the files are formatted properly; specifically, the key words <code>class</code>, <code>module</code> and <code>def</code> must be indented the same number of spaces as their corresponding <code>end</code> keywords. It will therefore miss modules, classes and methods that are defined in-line, such as the following.</p>\n\n<pre><code>module M; end\nclass C; end\ndef im(n) 2*n end\ndef self.cm(n) 2*n end\n</code></pre>\n\n<p>If vertical alignment is a problem there certainly are gems that format code properly.</p>\n\n<p>I chose a particular hash structure, but once that hash has been constructed it could be modified as desired. For example, I've adopted the hierarchy \"instance methods->files->containers\" (\"containers\" being modules, classes and top-level). One could easily modify that hash to change the hierarchy to, say, \"container->module methods->files\". Alternatively, one could enter the information into a database to maintain flexibility on how is used.</p>\n\n<p><strong>Code</strong></p>\n\n<p>The following regular expression is used to parse each line of each file of interest.</p>\n\n<pre><code>R = /\n    \\A                             # match beginning of string\n    (?&lt;indent&gt;[ ]*)                # capture zero or more spaces, name 'indent' \n    (?:                            # begin non-capture group\n      (?&lt;type&gt;class|module)        #   capture keyword 'class' or 'module', name 'type'\n      [ ]+                         #   match one or more spaces\n      (?&lt;name&gt;\\p{Upper}\\p{Alnum}*) #   capture an uppercase letter followed by\n                                   #   &gt;= alphanumeric chars, name 'name'\n    |                              # or\n      (?&lt;type&gt;def)                 #   capture keyword 'def', name 'type'\n      [ ]+                         #   match one or more spaces\n      (?&lt;name&gt;                     #   begin capture group named 'name'\n        (?:self\\.)?                #   optionally match 'self.'\n        \\p{Lower}\\p{Alnum}*        #   match a lowercase letter followed by\n                                   #   &gt;= 0 zero alphanumeric chars, name 'name'\n      )                            #   close capture group 'name'\n    |                              # or\n      (?&lt;type&gt;end)                 #   capture keyword 'end', name 'type'\n      \\b                           #   match a word break\n    )                              # end non-capture group\n    /x                             # free-spacing regex definition mode \n</code></pre>\n\n<p>The method used for parsing follows.</p>\n\n<pre><code>def find_methods_by_name(files_of_interest)\n  files_of_interest.each_with_object({ imethod: {}, cmethod: {} }) do |fname, h|\n    stack = []\n    File.readlines(fname).each do |line|\n      m = line.match R\n      next if m.nil?\n      indent, type, name = m[:indent].size, m[:type], m[:name]\n      case type\n      when \"module\", \"class\"\n        name = stack.any? ? [stack.last[:name], name].join('::') : name\n        stack &lt;&lt; { indent: indent, type: type, name: name }\n      when \"def\"\n        if name =~ /\\Aself\\./\n          stack &lt;&lt; { indent: indent, type: :cmethod, name: name[5..-1] }\n        else\n          stack &lt;&lt; { indent: indent, type: :imethod, name: name }\n        end\n      when \"end\"\n        next if stack.empty? || stack.last[:indent] != indent\n        type, name = stack.pop.values_at(:type, :name)\n        next if type == \"module\" or type == \"class\"\n        ((h[type][name] ||= {})[fname] ||= []) &lt;&lt; (stack.any? ?\n          [stack.last[:type], stack.last[:name]].join(' ') : :main)\n      end\n    end\n    raise StandardError, \"stack = #{stack} after processing file '#{fname}'\" if stack.any?\n  end\nend\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<p>The files of interest might be, for example, all files in certain directories. In this example we have just two files.</p>\n\n<pre><code>files_of_interest = ['file1.rb', 'file2.rb']\n</code></pre>\n\n<p>Those files are as follows.</p>\n\n<pre><code>File.write('file1.rb',\n&lt;&lt;_)\n    def mm\n    end\n    module M\n      def m\n      end\n      module N\n        def self.nm\n        end\n        def n\n        end\n        def a2\n        end\n      end\n    end\n\n    class A\n      def self.a1c\n      end\n      def a1\n      end\n      def a2\n      end\n    end\n\n    class B\n      include M\n      def b\n      end\n    end\n_\n  #=&gt; 327\n</code></pre>\n\n<p></p>    \n\n<pre><code>File.write('file2.rb',\n&lt;&lt;_)\n    def mm\n    end\n    module M\n      def m\n      end\n      module N\n        def n\n        end\n        def a2\n        end\n      end\n    end\n\n    module P\n      def p\n      end\n    end\n\n    class A\n      include M::N\n      def self.a1c\n      end\n      def a1\n      end\n    end\n\n    class B\n      include P\n      def b\n      end\n    end\n_\n  #=&gt; 335\n</code></pre>\n\n<p></p>\n\n<pre><code>h = find_methods_by_name(files_of_interest)\n  #=&gt; {\n  #     :imethod=&gt;{\n  #       \"mm\"=&gt;{\n  #         \"file1.rb\"=&gt;[:main],\n  #         \"file2.rb\"=&gt;[:main]\n  #       },\n  #       \"m\"=&gt;{\n  #         \"file1.rb\"=&gt;[\"module M\"],\n  #         \"file2.rb\"=&gt;[\"module M\"]\n  #       },\n  #       \"n\"=&gt;{\n  #         \"file1.rb\"=&gt;[\"module M::N\"],\n  #         \"file2.rb\"=&gt;[\"module M::N\"]\n  #       },\n  #       \"a2\"=&gt;{\n  #         \"file1.rb\"=&gt;[\"module M::N\", \"class A\"],\n  #         \"file2.rb\"=&gt;[\"module M::N\"]\n  #       },\n  #       \"a1\"=&gt;{\n  #         \"file1.rb\"=&gt;[\"class A\"],\n  #         \"file2.rb\"=&gt;[\"class A\"]\n  #       },\n  #       \"b\"=&gt;{\n  #         \"file1.rb\"=&gt;[\"class B\"],\n  #         \"file2.rb\"=&gt;[\"class B\"]\n  #       },\n  #       \"p\"=&gt;{\n  #         \"file2.rb\"=&gt;[\"module P\"]\n  #       }\n  #     },\n  #     :cmethod=&gt;{\n  #       \"nm\"=&gt;{\n  #         \"file1.rb\"=&gt;[\"module M::N\"]\n  #       },\n  #       \"a1c\"=&gt;{\n  #         \"file1.rb\"=&gt;[\"class A\"],\n  #         \"file2.rb\"=&gt;[\"class A\"]\n  #       }\n  #     }\n  #   }\n</code></pre>\n\n<p>To eliminate files that appear only once, we can perform an additional step.</p>\n\n<pre><code>h.transform_values! { |g| g.reject { |k,v| v.size == 1 &amp;&amp; v.values.first.size == 1 } }\n</code></pre>\n\n<p>This removes the instance method <code>p</code> and the class method <code>nm</code>.</p>\n"}], "owner": {"reputation": 546, "user_id": 7184365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/706810459355fe8aff132f0655b6f481?s=128&d=identicon&r=PG", "display_name": "Toma Nistor", "link": "https://stackoverflow.com/users/7184365/toma-nistor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 302, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530859591, "creation_date": 1530554828, "last_edit_date": 1530633806, "question_id": 51141593, "link": "https://stackoverflow.com/questions/51141593/how-to-find-duplicated-ruby-methods-with-the-same-name-but-different-code", "title": "How to find duplicated Ruby methods with the same name but different code?", "body": "<p>The very large Ruby codebase I am working with has many instances of duplicated methods defined with the same name but some of its code is different (causing a large race condition problem). The eventual end goal is to reconcile the duplicates and have just one version of the same-named method. First I need to find all versions of a method that deviate from the \"control\" version of that method. Is there an optimal way to search and for and find all instances of duplicated same-named methods that deviate from one defined version?</p>\n\n<p>The duplicated methods are spread out across hundreds of different files and contained in one class. These are essentially helper methods that should have been centralized in one file but instead have been duplicated and often altered, but keeping the same method name. Right now I just need a good way to locate all the instances where these methods have been duplicated and are different from what the method should be.</p>\n\n<p>I think Rubocop only searches for duplicated method names which is only moderately helpful since it could find 237 methods with the same name but I don't know how many of those methods are deviations from my \"control\" method without manually looking and comparing.</p>\n\n<p>Some examples of a method redefined in files across multiple subdirectories:</p>\n\n<pre><code>def get_field(field_name)\n  return nil unless field = @global_vars.business.fields.find_by_identifier(field_name)\n  field.value.present? ? field.value : nil\nend\n\ndef get_field(field_name)\n  @global_vars.business.fields.find_by_identifier(field_name).try(:value)\nend\n\ndef get_field(field_name)\n  return nil unless field @company.fields.find_by_identifier(field_name)\n  field.value.present? ? field.value : nil\nend\n\ndef get_field(field_name)\n  @property.fields.find_by_identifier(field_name).try(:value)\nend\n</code></pre>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rmagick"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1530551876, "post_id": 51140697, "comment_id": 89265880, "body": "Take a look at <a href=\"https://turnspike.com/2018/01/29/simple-magiccloud-example/\" rel=\"nofollow noreferrer\">this post</a> and see if it helps."}], "answers": [{"tags": [], "owner": {"reputation": 1915, "user_id": 1188132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44cf1e5c382cd1f508662f7abf357615?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1188132/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1530559080, "creation_date": 1530559080, "answer_id": 51142493, "question_id": 51140697, "link": "https://stackoverflow.com/questions/51140697/magic-cloud-rails-picture-does-not-appear/51142493#51142493", "title": "Magic Cloud Rails Picture does not appear", "body": "<p>That's because <code>cloud = MagicCloud::Cloud.new</code> instantiates a new object, and when you're doing <code>&lt;%= something %&gt;</code> in rails, it's basically outputting <code>something.to_s</code>.</p>\n\n<p>Looking at the source for that class (I assume <a href=\"https://github.com/zverok/magic_cloud/blob/master/lib/magic_cloud/cloud.rb\" rel=\"nofollow noreferrer\">this is the gem</a>)\nWhat you want to do is something like:</p>\n\n<p><code>&lt;%= mgcloud(pages.dados).draw %&gt;\n</code></p>\n"}], "owner": {"reputation": 11, "user_id": 10020278, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207827646768344/picture?type=large", "display_name": "Ricardo Junior", "link": "https://stackoverflow.com/users/10020278/ricardo-junior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1530559080, "creation_date": 1530550753, "question_id": 51140697, "link": "https://stackoverflow.com/questions/51140697/magic-cloud-rails-picture-does-not-appear", "title": "Magic Cloud Rails Picture does not appear", "body": "<p>I'm using \"MAgic cloud\" to generate the word cloud in ruby, but I can not get the image to appear in the view.</p>\n\n<p>My function\n`</p>\n\n<pre><code>  def mgcloud(string)\n     words = []\n     (Hash[count_words2(string).sort_by{|k, v| v}.reverse]).each_pair do |key, value|  \n       words.push([key, value])\n     end\n     cloud = MagicCloud::Cloud.new(words, rotate: :free, scale: :log)\n     cloud\n  end\n</code></pre>\n\n<p><code>\nMy View</code></p>\n\n<pre><code>&lt;%= mgcloud(pages.dados)%&gt;\n</code></pre>\n\n<p>output</p>\n\n<pre><code>#&lt;MagicCloud::Cloud:0x007f8a1801da48&gt;\n</code></pre>\n"}, {"tags": ["ruby", "yaml"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1530548133, "post_id": 51139902, "comment_id": 89264321, "body": "That <code>2</code> is an <i>indentation indicator</i>, it says that the block is indented by 2 spaces."}, {"owner": {"reputation": 179, "user_id": 2418839, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/831f269745f2902732d71ff9f69d3ac7?s=128&d=identicon&r=PG", "display_name": "Burdette Lamar", "link": "https://stackoverflow.com/users/2418839/burdette-lamar"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1530548518, "post_id": 51139902, "comment_id": 89264518, "body": "I did not indent.  Does the empty line amount to a request for indentation?  Also, if I indent each line 4 spaces, that spacing is honored, and I still get &#39;|2&#39;, both with and with and without the leading empty line."}], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 2418839, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/831f269745f2902732d71ff9f69d3ac7?s=128&d=identicon&r=PG", "display_name": "Burdette Lamar", "link": "https://stackoverflow.com/users/2418839/burdette-lamar"}, "edited": false, "score": 1, "creation_date": 1530565491, "post_id": 51140867, "comment_id": 89271545, "body": "Thanks much, Schwern!  I looked at this very document, but did not know what terms to search for.  I looked at every &#39;|&#39; character in it, trying to find one that&#39;s followed by a number."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 6, "last_activity_date": 1530552008, "last_edit_date": 1592644375, "creation_date": 1530551662, "answer_id": 51140867, "question_id": 51139902, "link": "https://stackoverflow.com/questions/51139902/why-does-ruby-yaml-sometimes-add-2-after-pipe-char/51140867#51140867", "title": "Why does Ruby YAML sometimes add &#39;2&#39; after pipe char (|)?", "body": "<p><code>|</code> indicates a literal scalar. It is followed by a <a href=\"http://yaml.org/spec/1.2/spec.html#id2793718\" rel=\"noreferrer\">Block Scalar Header</a> which can indicate the indentation level of the literal and whether or not it is &quot;chomped&quot;. Chomping is whether or not to strip the final newline. For example, when we remove the last newline...</p>\n<pre><code>2.4.3 :059 &gt; puts &quot;\\n1\\n2\\n3&quot;.to_yaml\n--- |2-\n\n  1\n  2\n  3\n =&gt; nil \n</code></pre>\n<p>...YAML adds a <code>-</code> to indicate that the final newline is removed.</p>\n<p>Similarly, the <code>2</code> says to remove the first two spaces from each line. This allows leading newlines in the original string to be preserved.</p>\n<pre><code>2.4.3 :061 &gt; puts &quot;\\n  1\\n2\\n3&quot;.to_yaml\n--- |2-\n\n    1\n  2\n  3\n =&gt; nil \n</code></pre>\n<p>Normally the indentation level is blank, so you just see <code>|</code>, and the indentation value is inferred from the first line non-empty line. In this example, 2 is inferred.</p>\n<pre><code>2.4.3 :062 &gt; puts &quot;1\\n2\\n3&quot;.to_yaml\n--- |-\n  1\n  2\n  3\n =&gt; nil \n</code></pre>\n<p>But when the first line contains ambiguities, it must be made explicit. Here's the full docs from the spec on that.</p>\n<blockquote>\n<p><a href=\"http://yaml.org/spec/1.2/spec.html#id2793979\" rel=\"noreferrer\">8.1.1.1. Block Indentation Indicator</a></p>\n<p>Typically, the indentation level of a block scalar is detected from its first non-empty line. It is an error for any of the leading empty lines to contain more spaces than the first non-empty line.</p>\n<p>Detection fails when the first non-empty line contains leading content space characters. Content may safely start with a tab or a \u201c#\u201d character.</p>\n<p>When detection would fail, YAML requires that the indentation level for the content be given using an explicit indentation indicator. This level is specified as the integer number of the additional indentation spaces used for the content, relative to its parent node.</p>\n<p>It is always valid to specify an indentation indicator for a block scalar node, though a YAML processor should only emit an explicit indentation indicator for cases where detection will fail.</p>\n</blockquote>\n<p>In your case, the YAML round trips just fine with or without the explicit indicator. It can get the indentation from the first non-empty line. I'd imagine that particular YAML implementation is being conservative and making the indentation explicit when the first line is blank.</p>\n<p>There's many ways to express the same thing in YAML. For example, adding an extra leading space and Ruby switches to quotes.</p>\n<pre><code>2.4.3 :055 &gt; puts &quot; \\n1\\n2\\n3\\n&quot;.to_yaml\n--- &quot; \\n1\\n2\\n3\\n&quot;\n =&gt; nil \n</code></pre>\n<p>Why not this?</p>\n<pre><code>--- |2-\n   \n  1\n  2\n  3\n</code></pre>\n<p>Probably because it's not easy to read and that extra space is very easy to miss when being ready a human, YAML is for humans as well as machines. To really know you'll have to read the code of the YAML library and probably online discussions during its development. I'm going to guess that it was decided being explicit when there is any possibility of ambiguity or confusion is safer.</p>\n"}], "owner": {"reputation": 179, "user_id": 2418839, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/831f269745f2902732d71ff9f69d3ac7?s=128&d=identicon&r=PG", "display_name": "Burdette Lamar", "link": "https://stackoverflow.com/users/2418839/burdette-lamar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1530552008, "creation_date": 1530547130, "question_id": 51139902, "link": "https://stackoverflow.com/questions/51139902/why-does-ruby-yaml-sometimes-add-2-after-pipe-char", "title": "Why does Ruby YAML sometimes add &#39;2&#39; after pipe char (|)?", "body": "<p>In working with Ruby module YAML, I've come across a behavior I don't understand.</p>\n\n<p>String#to_yaml for a multiline string sometimes adds character '2' just after the pipe character:  '|2' vs. just '|'.</p>\n\n<p>In particular, it does this when the first line is empty.</p>\n\n<p>Any clue as to why?</p>\n\n<p>Here's an example:</p>\n\n<pre><code>C:\\Users\\Burdette&gt;irb\nirb(main):001:0&gt; RUBY_VERSION\n=&gt; \"2.2.6\"\nirb(main):002:0&gt; require 'yaml'\n=&gt; true\nirb(main):003:0&gt; s = &lt;&lt;EOT\nirb(main):004:0\" 1\nirb(main):005:0\" 2\nirb(main):006:0\" 3\nirb(main):007:0\" EOT\n=&gt; \"1\\n2\\n3\\n\"\nirb(main):008:0&gt; puts s.to_yaml\n--- |\n  1\n  2\n  3\n=&gt; nil\nirb(main):009:0&gt; s = \"\\n\" + s\n=&gt; \"\\n1\\n2\\n3\\n\"\nirb(main):010:0&gt; puts s.to_yaml\n--- |2\n\n  1\n  2\n  3\n=&gt; nil\nirb(main):011:0&gt; exit\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "upload", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1530550561, "post_id": 51139887, "comment_id": 89265384, "body": "you should show your attempt, it will probably be easier to fix that way. Also, calling one controller&#39;s methods from another is kind of a noob trap. Not saying it&#39;s something you should never do, but it&#39;s better to keep controllers as just the means of fielding requests/responses from the client, and if you need to share some code between them, extract it to a shared class or module."}], "answers": [{"comments": [{"owner": {"reputation": 517, "user_id": 307743, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/26b2328deaa0ff977e9863f22cee3f93?s=128&d=identicon&r=PG&f=1", "display_name": "compiledweird", "link": "https://stackoverflow.com/users/307743/compiledweird"}, "edited": false, "score": 0, "creation_date": 1612220781, "post_id": 51151423, "comment_id": 116694179, "body": "Can you explain more what this means? I have the same question but I don&#39;t understand the obviousness of the answer."}], "tags": [], "owner": {"reputation": 1584, "user_id": 601976, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/de088f705937dd429b9470ab9b9bbd8b?s=128&d=identicon&r=PG", "display_name": "RoUS", "link": "https://stackoverflow.com/users/601976/rous"}, "is_accepted": true, "score": 0, "last_activity_date": 1530611170, "creation_date": 1530611170, "answer_id": 51151423, "question_id": 51139887, "link": "https://stackoverflow.com/questions/51139887/rails-5-how-to-use-an-uploads-controller-to-handle-bulk-uploads-by-dispatching/51151423#51151423", "title": "Rails 5. How to use an uploads controller to handle bulk uploads by dispatching each record", "body": "<p>Well, I feel sheeeepish.  Obviously the correct path is to abstract the generic upload methods and logic into a separate module and mix it in.  Routes can be adjusted.  So no need for controllers to know about the internals of others for this scenario.  Thanks for the hint!</p>\n"}], "owner": {"reputation": 1584, "user_id": 601976, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/de088f705937dd429b9470ab9b9bbd8b?s=128&d=identicon&r=PG", "display_name": "RoUS", "link": "https://stackoverflow.com/users/601976/rous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 51151423, "answer_count": 1, "score": 1, "last_activity_date": 1532029650, "creation_date": 1530547081, "last_edit_date": 1532029650, "question_id": 51139887, "link": "https://stackoverflow.com/questions/51139887/rails-5-how-to-use-an-uploads-controller-to-handle-bulk-uploads-by-dispatching", "title": "Rails 5. How to use an uploads controller to handle bulk uploads by dispatching each record", "body": "<p>This is Rails 5 with Mongoid.</p>\n\n<p>I have a MVC structure for load balancers.  The model and the controller do all the validation and sanitising I want and need.  However, I want to be able to send an array of balancer data structures to an <code>upload</code> controller, which will verify the upload is in a sane format, and then iterate over the array dispatching to the <code>balancers</code> controller to validate, insert, or upsert each entry as needed -- and accumulate statistics so that at the end of the iteration I can produce an HTML or JSON rendering of success count and detailed errors.</p>\n\n<p>I'm pretty sure I need to frob the <code>params</code> structure as part of each iteration/dispatch, but it's unclear how, or whether I want to use the <code>BalancersController</code>'s <code>#new</code>, <code>#create</code>, <code>#update</code>, <code>#save</code>, or what method in order to get the validation to work and the insert/upsert to be done properly.</p>\n\n<p>I haven't yet been able to find anything that seems to describe this exact sort of bulk-upload scenario, so any/all help &amp; guidance will be much appreciated.</p>\n\n<p>Thanks!\n(There are serveral other models/controllers I want to push through here; the balancer case is just an example.)</p>\n\n<p>I've <em>sort</em> of got the collecting of the statistics summary down, but I' having trouble dispatching to the <code>balancers</code> controller to actually update the database with anything other than <code>nil</code>.</p>\n\n<p>[edited]</p>\n\n<p>Here's an simple example model:</p>\n\n<pre><code>class Puppet::Dbhost\n\n  include ::PerceptSys\n  include Mongoid::Document\n  include Mongoid::Timestamps\n\n  validates(:pdbfqdn,\n            :presence   =&gt; true)\n\n  field(:pdbfqdn,\n        :type       =&gt; String)\n  field(:active,\n        :type       =&gt; Mongoid::Boolean)\n  field(:phases,\n        :type       =&gt; Array)\n\n  index(\n    {\n      :pdbfqdn      =&gt; 1,\n    },\n    {\n      :unique       =&gt; true,\n      :name         =&gt; 'dbhosts_pdbfqdn',\n    }\n  )\n\nend                             # class Puppet::Dbhost\n</code></pre>\n\n<p>The <code>uploads</code> controller has a route <code>post('/uploads/puppet/dbhosts(.:format)', :id =&gt; 'puppet_dbhosts', :to =&gt; 'uploads#upload')</code>.</p>\n\n<p>The document containing upload information looks like this:</p>\n\n<pre><code>{\n  \"puppet_dbhosts\" : [\n    {\n      \"pdbfqdn\" : \"some-fqdn\",\n      \"active\" : true\n    }\n  ]\n}\n</code></pre>\n\n<p>The <code>uploads#upload</code> method vets the basic syntax of the document, and then is where I get stuck.  I've tried</p>\n\n<pre><code>before_action(:upload, :set_upload_list)\ndef set_upload_list\n  params.require(:puppet_dbhosts)\nend\n\ndef upload\n  reclist = params.delete(:puppet_dbhosts)\n  reclist.each do |dbhrec|\n    params[:puppet_dbhost] = dbhrec\n    dbhost = Puppet::Dbhost.new\n    dbhost.update\n  end\nend\n</code></pre>\n\n<p>In very broad strokes.  The logic for validating a <code>puppet_dbhost</code> entry is embedded in the model and the controller; the <code>uploads</code> controller is meant to simply dispatch and delegate, and tabulate the results.  There a several models accepting uploads in this manner, hence the separate controller.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "bundler", "gem-bundler"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1530544633, "post_id": 51139114, "comment_id": 89262517, "body": "What&#39;s the full error?"}, {"owner": {"reputation": 43, "user_id": 9905680, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Spencer Bailey", "link": "https://stackoverflow.com/users/9905680/spencer-bailey"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1530545053, "post_id": 51139114, "comment_id": 89262752, "body": "That was the full error."}, {"owner": {"reputation": 313, "user_id": 7485168, "user_type": "registered", "profile_image": "https://graph.facebook.com/1797273820298202/picture?type=large", "display_name": "Jok\u016bbas Brunonas Pu\u010dinskas", "link": "https://stackoverflow.com/users/7485168/jok%c5%abbas-brunonas-pu%c4%8dinskas"}, "edited": false, "score": 0, "creation_date": 1530546522, "post_id": 51139114, "comment_id": 89263540, "body": "Did you specify  ruby version in your Gemfile? Have you tried run <code>rbenv rehash</code>? Have you set your global ruby version with <code>rbenv global 2.5.1</code>?"}, {"owner": {"reputation": 43, "user_id": 9905680, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Spencer Bailey", "link": "https://stackoverflow.com/users/9905680/spencer-bailey"}, "edited": false, "score": 0, "creation_date": 1530546595, "post_id": 51139114, "comment_id": 89263578, "body": "Yes. <code>rbenv global</code> and <code>rbenv local</code> are already set to 2.5.1 and <code>rbenv rehash</code> didn&#39;t seem to do anything."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 5, "creation_date": 1530549831, "post_id": 51139114, "comment_id": 89265079, "body": "You marked this &quot;Solved&quot;. Why don&#39;t you post as an answer to your own question? It is allowed... Otherwise, it&#39;s left as an open question even though you wrote the solution within the question."}], "answers": [{"tags": [], "owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "is_accepted": false, "score": 1, "last_activity_date": 1530601008, "creation_date": 1530601008, "answer_id": 51148325, "question_id": 51139114, "link": "https://stackoverflow.com/questions/51139114/gem-install-wrong-number-of-arguments-given-1-expected-0/51148325#51148325", "title": "Gem install wrong number of arguments (given 1, expected 0)", "body": "<p><em>(Posted on behalf of the question author)</em>.</p>\n\n<p>I solved it by reinstalling Rbenv and then using rbenv rehash.</p>\n"}, {"tags": [], "owner": {"reputation": 1607, "user_id": 7151673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/257324e88d03e0fd01d7f09f3bd5a788?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/7151673/max"}, "is_accepted": true, "score": 3, "last_activity_date": 1546637416, "creation_date": 1546637416, "answer_id": 54046354, "question_id": 51139114, "link": "https://stackoverflow.com/questions/51139114/gem-install-wrong-number-of-arguments-given-1-expected-0/54046354#54046354", "title": "Gem install wrong number of arguments (given 1, expected 0)", "body": "<p>This was happening on my system, so I dug into it for a while. It appears to be an incompatibility between Ruby 2.5 and RubyGems &lt; 2.6.10.</p>\n\n<h2>Short answer</h2>\n\n<p>If you want to install Ruby 2.5, make sure you have RubyGems >= 2.6.10. You may be able to explicitly specify which version of RubyGems to use (for example, I called <code>rvm rubygems 2.7.7</code>) or it may work to just update to a newer version of RVM/rbenv/etc.</p>\n\n<h2>Longer explanation</h2>\n\n<p>As shown in the backtrace in the question, the error occurs when calling <code>require</code>. This is a version of <code>require</code> that RubyGems has written to replace the definition that comes with Ruby. In RubyGems before 2.6.10, this part of the code looks something like:</p>\n\n<pre><code>spec = Gem.find_unresolved_default_spec(path)\nif spec\n  Gem.remove_unresolved_default_spec(spec)\n  gem(spec.name)\nend\n</code></pre>\n\n<p>(<a href=\"https://github.com/rubygems/rubygems/blob/v2.6.9/lib/rubygems/core_ext/kernel_require.rb#L44-L48\" rel=\"nofollow noreferrer\">source</a>)</p>\n\n<p>The error occurs when calling <code>gem(spec.name)</code>, but why?</p>\n\n<p>It ends up having to do with a quirk of Ruby. Even though <code>require</code> seems kind of like a built-in keyword, it's actually a method in the <code>Kernel</code> module. That module is included in <code>Object</code>, so the method can be called from any object that descends from <code>Object</code> (including the \"main\" object at the top level of a script/console). But in the end it's still a method on whatever object you call it from, so any method calls within <code>require</code> that don't have an explicit receiver are called on that same object. </p>\n\n<p>Normal inheritance rules apply, so if your object doesn't have an explicit <code>gem</code> method, the one defined in <code>Kernel</code> by RubyGems will be called, which is great. But if your object does have its own <code>gem</code> method, that'll be called instead, which is unlikely to work. In this case, <code>require 'fileutils'</code> is called from within the initializer for <code>Gem::Installer</code> (<a href=\"https://github.com/rubygems/rubygems/blob/v2.6.9/lib/rubygems/installer.rb#L162\" rel=\"nofollow noreferrer\">https://github.com/rubygems/rubygems/blob/v2.6.9/lib/rubygems/installer.rb#L162</a>). The <code>Gem::Installer</code> class has its own <code>gem</code> method with zero parameters, created by <code>attr_reader :gem</code>. The <code>require</code> code tries to call it with one parameter, and there we have our error.</p>\n\n<p>(This issue was resolved in RubyGems 2.6.10 by changing the <code>gem</code> call to <code>Kernel.send(:gem, spec.name)</code> in <a href=\"https://github.com/rubygems/rubygems/pull/1822\" rel=\"nofollow noreferrer\">https://github.com/rubygems/rubygems/pull/1822</a>. This was prompted by somewhat similar difficulties in the Bundler library, which also had an object defining its own <code>gem</code> method.)</p>\n\n<p>The last question is why this occurred in Ruby 2.5 but not before. It turns out that this particular call to <code>gem</code> only occurs when trying to require a \"default\" gem. In versions of Ruby before 2.5, \"fileutils\" has not been a default gem, so those versions have managed to avoid this particular issue, even with older versions of RubyGems. It's only with Ruby 2.5 making \"fileutils\" a default gem that this odd issue has cropped up.</p>\n"}], "owner": {"reputation": 43, "user_id": 9905680, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Spencer Bailey", "link": "https://stackoverflow.com/users/9905680/spencer-bailey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2809, "favorite_count": 0, "accepted_answer_id": 54046354, "answer_count": 2, "score": 4, "last_activity_date": 1566909188, "creation_date": 1530544035, "last_edit_date": 1530600981, "question_id": 51139114, "link": "https://stackoverflow.com/questions/51139114/gem-install-wrong-number-of-arguments-given-1-expected-0", "title": "Gem install wrong number of arguments (given 1, expected 0)", "body": "<p>When I run <code>bundle</code>, I get the following:</p>\n\n<p><code>The `bundle' command exists in these Ruby versions:\n  2.1.8\n  2.4.2\n  jruby-9.1.15.0</code></p>\n\n<p>My project uses Ruby-2.5.1, so I'm trying to update my bundler using <code>gem install bundler</code>, but I get the following error:</p>\n\n<p><code>ERROR:  While executing gem ... (ArgumentError)\n    wrong number of arguments (given 1, expected 0)</code></p>\n\n<p>Using <code>--backtrace</code></p>\n\n<pre><code>/Users/spencerbailey/.rbenv/versions/2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/core_ext/kernel_require.rb:47:in `require'\n/Users/spencerbailey/.rbenv/versions/2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/installer.rb:162:in `initialize'\n/Users/spencerbailey/.rbenv/versions/2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/installer.rb:104:in `new'\n/Users/spencerbailey/.rbenv/versions/2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/installer.rb:104:in `at'\n/Users/spencerbailey/.rbenv/versions/2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/resolver/specification.rb:93:in `install'\n/Users/spencerbailey/.rbenv/versions/2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/request_set.rb:166:in `block in install'\n/Users/spencerbailey/.rbenv/versions/2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/request_set.rb:156:in `each'\n/Users/spencerbailey/.rbenv/versions/2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/request_set.rb:156:in `install'\n/Users/spencerbailey/.rbenv/versions/2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/commands/install_command.rb:251:in `install_gem'\n/Users/spencerbailey/.rbenv/versions/2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/commands/install_command.rb:301:in `block in install_gems'\n/Users/spencerbailey/.rbenv/versions/2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/commands/install_command.rb:297:in `each'\n/Users/spencerbailey/.rbenv/versions/2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/commands/install_command.rb:297:in `install_gems'\n/Users/spencerbailey/.rbenv/versions/2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/commands/install_command.rb:204:in `execute'\n/Users/spencerbailey/.rbenv/versions/2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/command.rb:310:in `invoke_with_build_args'\n/Users/spencerbailey/.rbenv/versions/2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/command_manager.rb:169:in `process_args'\n/Users/spencerbailey/.rbenv/versions/2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/command_manager.rb:139:in `run'\n/Users/spencerbailey/.rbenv/versions/2.5.1/lib/ruby/site_ruby/2.5.0/rubygems/gem_runner.rb:55:in `run'\n/Users/spencerbailey/.rbenv/versions/2.5.1/bin/gem:21:in `&lt;main&gt;'\n</code></pre>\n\n<p>Extra information:</p>\n\n<ul>\n<li>Rails 5.1.2</li>\n<li>Ruby-2.5.1</li>\n<li>macOS High Sierra Version 10.13.4</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1530543519, "post_id": 51138940, "comment_id": 89261948, "body": "What do you mean by <i>&quot;I don&#39;t ever want it to be put back into the database in the future&quot;</i>? How much data is it?"}, {"owner": {"reputation": 51, "user_id": 8873720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebd7e2909257491908fa0992bee4d1ab?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/8873720/paul"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1530543668, "post_id": 51138940, "comment_id": 89262051, "body": "Well, I already have a seed file with data that I want to be populated again if this site was set up again in the future, but this new data for this new model should only be put in this one time."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 5, "creation_date": 1530547403, "post_id": 51138940, "comment_id": 89263977, "body": "Do it in a migration."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 1, "creation_date": 1530550376, "post_id": 51138940, "comment_id": 89265308, "body": "Or write a rake task that checks if the table is empty and then populates it with initial data. Another option to writing the migration."}, {"owner": {"reputation": 51, "user_id": 8873720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebd7e2909257491908fa0992bee4d1ab?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/8873720/paul"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530550786, "post_id": 51138940, "comment_id": 89265471, "body": "@JagdeepSingh If I write a rake task, will it only run if I manually run it?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530550836, "post_id": 51138940, "comment_id": 89265489, "body": "Yes, only when you run it."}, {"owner": {"reputation": 51, "user_id": 8873720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebd7e2909257491908fa0992bee4d1ab?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/8873720/paul"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530555497, "post_id": 51138940, "comment_id": 89267603, "body": "@JagdeepSingh Perfect, that sounds like it&#39;ll work.  Thanks!"}], "owner": {"reputation": 51, "user_id": 8873720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebd7e2909257491908fa0992bee4d1ab?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/8873720/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1530551997, "creation_date": 1530543390, "last_edit_date": 1530551997, "question_id": 51138940, "link": "https://stackoverflow.com/questions/51138940/rails-adding-new-model-with-initial-data-to-existing-app", "title": "(Rails) Adding new model with initial data to existing app", "body": "<p>I've an existing web app that is running in production with user data and various other types of data. I want to add a new model with some initial data for the same. </p>\n\n<p>The data should be there when it goes live. This new data is a one time thing and I don't ever want it to be put back into the database in the future.</p>\n\n<p>I couldn't find an answer to this specific scenario that I have. What is the best way to do this?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "metaprogramming"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1530546511, "post_id": 51138274, "comment_id": 89263538, "body": "<code>- Object.methods</code> effectively removes the remaining methods from <code>Object</code> and <code>BasicObject</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1530547179, "post_id": 51138274, "comment_id": 89263859, "body": "BTW, instance methods are usually written <code>ClassName#method_name</code>, not <code>#&lt;ClassName&gt;.method_name</code>"}, {"owner": {"reputation": 2017, "user_id": 6302131, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh5.googleusercontent.com/-upxNYfE-Cr4/AAAAAAAAAAI/AAAAAAAAAB8/FR6BaGFHNo8/photo.jpg?sz=128", "display_name": "Sancarn", "link": "https://stackoverflow.com/users/6302131/sancarn"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1530548914, "post_id": 51138274, "comment_id": 89264688, "body": "Oh derr... You are absolutely right... xD I will have to catch that. And yeah, <code>ClassName#methodName</code> is a form I considered. But I couldn&#39;t execute it like that from ruby, which made me settle with the <code>#&lt;&gt;.someMethod</code> syntax...  Though I may want to revert that decision."}], "answers": [{"comments": [{"owner": {"reputation": 2017, "user_id": 6302131, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh5.googleusercontent.com/-upxNYfE-Cr4/AAAAAAAAAAI/AAAAAAAAAB8/FR6BaGFHNo8/photo.jpg?sz=128", "display_name": "Sancarn", "link": "https://stackoverflow.com/users/6302131/sancarn"}, "edited": false, "score": 0, "creation_date": 1530711799, "post_id": 51140507, "comment_id": 89333012, "body": "Thanks for the highly detailed answer! I didn&#39;t actually think that hash would allow objects and classes as keys! I guess internally ruby uses the cryptographic hash of the class to identify it... But this certainly does simplify the code."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 2017, "user_id": 6302131, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh5.googleusercontent.com/-upxNYfE-Cr4/AAAAAAAAAAI/AAAAAAAAAB8/FR6BaGFHNo8/photo.jpg?sz=128", "display_name": "Sancarn", "link": "https://stackoverflow.com/users/6302131/sancarn"}, "edited": false, "score": 0, "creation_date": 1530776109, "post_id": 51140507, "comment_id": 89353267, "body": "Sancam, I\u2019m pleased to hear you found it helpful."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 3, "last_activity_date": 1530553815, "last_edit_date": 1530553815, "creation_date": 1530549909, "answer_id": 51140507, "question_id": 51138274, "link": "https://stackoverflow.com/questions/51138274/list-all-ruby-classes-and-methods/51140507#51140507", "title": "List all Ruby classes and methods", "body": "<p>I suggest you create a hash for each Ruby version and then save that hash or its contents to a file whose name indicates the Ruby version (e.g., <code>v_2-5-1.json</code> or <code>v_2-5-1.txt</code>)</p>\n\n<p>While I don't fully understand the question, you may find he method <a href=\"http://ruby-doc.org/core-2.4.0/ObjectSpace.html#method-c-each_object\" rel=\"nofollow noreferrer\">ObjectSpace::each_object</a> helpful here. For example, </p>\n\n<pre><code>h = ObjectSpace.each_object(Class).with_object({}) do |c,h|\n  h[c] = { cm: c.methods(false).sort, im: c.instance_methods(false).sort,\n           con: c.constants.sort }\nend\n\nh.keys &amp;&amp; [Object, BasicObject]\n  # [Object, BasicObject]\n</code></pre>\n\n<p>As you see <code>Object</code> and <code>BasicObject</code> are two keys (classes) in this hash. Let's look at the value of one of the keys: <code>Dir</code>.</p>\n\n<pre><code>h[Dir]\n  #=&gt; {:cm=&gt;[:[], :chdir, :children, :chroot, :delete, :each_child, :empty?,\n  #          :entries, :exist?, :exists?, :foreach, :getwd, :glob, :home,\n  #          :mkdir, :open, :pwd, :rmdir, :unlink],\n  #    :im=&gt;[:close, :each, :fileno, :inspect, :path, :pos, :pos=, :read,\n  #          :rewind, :seek, :tell, :to_path],\n  #    :con=&gt;[]}\n</code></pre>\n\n<p>This is for</p>\n\n<pre><code>RUBY_VERSION\n  #=&gt; \"2.5.1\"\n</code></pre>\n\n<p>Comparing the contents of this hash with the doc for <a href=\"http://ruby-doc.org/core-2.5.1/Dir.html\" rel=\"nofollow noreferrer\">Dir</a> for v2.5.1 we see that the results are correct for the class <code>Dir</code>.</p>\n\n<p>Obtaining constants defined within a class <code>C</code> is problematic. <code>C.constants</code>, which I've used above includes inherited constants. Were I to write <code>C.constants - C.superclass.constants</code> (mindful that <code>BasicObject.superclass #=&gt; nil</code>) that would not report inherited constants the are redefined in <code>C</code> (and redefining an inherited constant does not produce a warning message).</p>\n\n<p>Instead of just looking at classes you may wish to examine all modules (<code>ObjectSpace.each_object(Module)</code>) and add a key <code>:is_class</code> to the hash with value <code>true</code> or <code>false</code>):</p>\n\n<p>There may be other keys you may wish to add to the hash. <code>:superclass</code> and <code>:included_modules</code> (for classes ) are two that comes to mind; <code>:nesting</code> (for non-class modules) is another. See <a href=\"http://ruby-doc.org/core-2.4.0/Module.html#method-c-nesting\" rel=\"nofollow noreferrer\">Module::nesting</a>. I suspect that these observations just scratch the surface, that a meaningful comparison of two Ruby versions will be  highly complex.</p>\n"}], "owner": {"reputation": 2017, "user_id": 6302131, "user_type": "registered", "accept_rate": 30, "profile_image": "https://lh5.googleusercontent.com/-upxNYfE-Cr4/AAAAAAAAAAI/AAAAAAAAAB8/FR6BaGFHNo8/photo.jpg?sz=128", "display_name": "Sancarn", "link": "https://stackoverflow.com/users/6302131/sancarn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 51140507, "answer_count": 1, "score": 0, "last_activity_date": 1530553815, "creation_date": 1530541081, "question_id": 51138274, "link": "https://stackoverflow.com/questions/51138274/list-all-ruby-classes-and-methods", "title": "List all Ruby classes and methods", "body": "<p>For a while now I've wanted a way to inspect all changes made to a given ruby environment when a particular model is loaded. Furthermore, the ability to compare and contrast the methods and classes available in separate versions of ruby, and different Ruby VMs.</p>\n\n<p>I've created some code which uses meta-programming to generate such a list:</p>\n\n<pre><code>arr = []\narr &lt;&lt; \"Ruby version \" + ::RUBY_VERSION\narr &lt;&lt; \"\"\nModule.constants.each do |const|\n  if ::Module.const_defined? const\n    #If for whatever reason const_get fails, then rescue.\n    begin\n      obj = Module.const_get(const)\n      if obj\n        if obj.is_a? Class\n        # Class methods\n        arr &lt;&lt; (obj.singleton_methods).sort.map do |method_sym|\n          obj.to_s + \"::\" + method_sym.to_s\n        end\n\n        # Instance methods\n        arr &lt;&lt; (obj.instance_methods - (obj.superclass ? obj.superclass.instance_methods : []) - Object.methods).sort.map do |method_sym|\n          \"#&lt;\" + obj.to_s + \"&gt;.\" + method_sym.to_s\n        end\n        elsif obj.is_a? Module\n          arr &lt;&lt; (obj.methods - Module.methods).sort.map do |method_sym|\n            obj.to_s + \"::\" + method_sym.to_s\n          end\n        else\n          # Methods\n          arr &lt;&lt; \"::\" + const.to_s\n        end\n      end\n    rescue\n    end\n  end\nend\n\nFile.new(\"D:\\\\methods_#{::RUBY_VERSION}.txt\",\"w\").write(arr.flatten.sort.join(\"\\n\"))\n</code></pre>\n\n<p>The criteria for the list is that it should list all non-inherited instance and class methods. Constants are indicated with <code>::</code> prefix, Class methods are indicated as <code>MyClass::someMethod</code> and instance methods are indicated as follows: <code>#&lt;MyClass&gt;.someMethod</code>.</p>\n\n<p>The script above works for the most part however, it misses out <code>Object</code> and <code>BasicObject</code>. I.E. in the lists created there are no lines prefixed with <code>#&lt;Object&gt;.</code> or <code>Object::</code>. Am I missing something obvious?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "heroku", "ruby-2.2"], "comments": [{"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1530542205, "post_id": 51137917, "comment_id": 89261183, "body": "Do you know which parts of your app. are causing the memory spikes or is it a leak that keeps compounding while idle?"}, {"owner": {"reputation": 899, "user_id": 1986039, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/lLSu0.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/1986039/developer"}, "reply_to_user": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1530557909, "post_id": 51137917, "comment_id": 89268622, "body": "@bkunzi01 i have updated the topic, thanks"}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1530563657, "post_id": 51137917, "comment_id": 89270870, "body": "Finding memory leaks is hard.  I use Valgrind-Massif which is a heap profiler and great for looking at memory consumption but that will only give you half of the puzzle since it won&#39;t dive in to your ruby code it will just tell you if it&#39;s from object creation etc.  Couple that with Stackprof and you should be able to track it down.  I hear New Relic is great too but haven&#39;t used it."}], "owner": {"reputation": 899, "user_id": 1986039, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/lLSu0.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/1986039/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1530557748, "creation_date": 1530539896, "last_edit_date": 1530557748, "question_id": 51137917, "link": "https://stackoverflow.com/questions/51137917/memory-increases-when-upgrade-ruby-from-1-9-3-to-2-2-10", "title": "Memory increases when upgrade ruby from 1.9.3 to 2.2.10", "body": "<p>I was using Ruby 1.9.3 + Rails 3.2.22 in heroku, recently i have upgraded ruby 1.9.3 to 2.2.10 then i could see that memory is growing fast and getting memory quota, we were using performance L dynos and WEB_CONCURRENCY as 80. Will it help anything with GC Tuning?</p>\n\n<p>Before the upgrade memory was reaching 14gb after 9 PM only\n<a href=\"https://i.stack.imgur.com/1Z2AW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1Z2AW.png\" alt=\"\"></a>\nAfter the upgrade memory was reaching 14 gb on every 4 hours\n<a href=\"https://i.stack.imgur.com/SJhcv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SJhcv.png\" alt=\"\"></a></p>\n"}, {"tags": ["php", "python", "angularjs", "ruby", "stripe-payments"], "answers": [{"tags": [], "owner": {"reputation": 418, "user_id": 9989178, "user_type": "registered", "profile_image": "https://graph.facebook.com/668951880120207/picture?type=large", "display_name": "Oscar Sortland Kolsrud", "link": "https://stackoverflow.com/users/9989178/oscar-sortland-kolsrud"}, "is_accepted": false, "score": 0, "last_activity_date": 1531163333, "creation_date": 1531163333, "answer_id": 51252513, "question_id": 51136596, "link": "https://stackoverflow.com/questions/51136596/how-to-create-a-popup-like-stripe-checkout/51252513#51252513", "title": "How to create a popup like Stripe checkout", "body": "<p>What you are loading is basically javascript. Here is the script you are loading: <a href=\"https://checkout.stripe.com/checkout.js\" rel=\"nofollow noreferrer\">https://checkout.stripe.com/checkout.js</a>.</p>\n\n<p>This script creates the pop up called a \"Modal\".</p>\n\n<p>Here is a tutorial from W3Schools: <a href=\"https://www.w3schools.com/howto/howto_css_modals.asp\" rel=\"nofollow noreferrer\">https://www.w3schools.com/howto/howto_css_modals.asp</a></p>\n\n<p>This should be enough to get you started.</p>\n"}], "owner": {"reputation": 174, "user_id": 4844045, "user_type": "registered", "profile_image": "https://graph.facebook.com/439741672864787/picture?type=large", "display_name": "Paul Tofunmi", "link": "https://stackoverflow.com/users/4844045/paul-tofunmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2383, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1531163333, "creation_date": 1530535590, "last_edit_date": 1530535835, "question_id": 51136596, "link": "https://stackoverflow.com/questions/51136596/how-to-create-a-popup-like-stripe-checkout", "title": "How to create a popup like Stripe checkout", "body": "<p>I have been tasked with creating a web application that creates popups on other sites like Stripe checkout does those using this code (attached below) in checkout documentation (<a href=\"https://stripe.com/docs/quickstart\" rel=\"nofollow noreferrer\">https://stripe.com/docs/quickstart</a>). I have experience with Iframe but not using script tags.</p>\n\n<p>Any advice or sample code will do.</p>\n\n<pre><code>&lt;form action=\"your-server-side-code\" method=\"POST\"&gt;   \n  &lt;script src=\"https://checkout.stripe.com/checkout.js\" \n          class=\"stripe-button\"     \n          data-key=\"pk_test_g6do5S237ekq10r65BnxO6S0\"     \n          data-amount=\"999\"     \n          data-name=\"Stripe.com\"    \n          data-description=\"Example charge\"     \n          data-image=\"https://stripe.com/img/documentation/checkout/marketplace.png\"     \n          data-locale=\"auto\"    \n          data-zip-code=\"true\"&gt;  \n  &lt;/script&gt; \n&lt;/form&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "session", "cookies"], "comments": [{"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1530532592, "post_id": 51135496, "comment_id": 89255375, "body": "Is this object private and needs be encrypted ? (session cookie is always encrypted) Encryption increases the size of the string. Also Session cookie already stores some data (CSRF token ..) Maybe you can store this object in a separate cookie, encrypted or not, and have it erased at the end of session"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530532625, "post_id": 51135496, "comment_id": 89255401, "body": "Related: <a href=\"https://stackoverflow.com/questions/640938/what-is-the-maximum-size-of-a-web-browsers-cookies-key\" title=\"what is the maximum size of a web browsers cookies key\">stackoverflow.com/questions/640938/&hellip;</a>"}, {"owner": {"reputation": 9578, "user_id": 120917, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cfb74e792db321ba120ffa223197f673?s=128&d=identicon&r=PG", "display_name": "SztupY", "link": "https://stackoverflow.com/users/120917/sztupy"}, "edited": false, "score": 0, "creation_date": 1530532783, "post_id": 51135496, "comment_id": 89255504, "body": "We believe the best option for us would be to refactor it so it&#39;s stored in a server side cache, but this functionality is already used in a lot of places, and we don&#39;t have the capacity yet to do this refactor. We&#39;re okay if we undersize the limit, as for most of our users the size of the object is &lt;0.5kb"}, {"owner": {"reputation": 171, "user_id": 1592591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b2d32ac48d24c7313d703b09b9d6ea7?s=128&d=identicon&r=PG", "display_name": "Sujay Gavhane", "link": "https://stackoverflow.com/users/1592591/sujay-gavhane"}, "edited": false, "score": 0, "creation_date": 1530537914, "post_id": 51135496, "comment_id": 89258492, "body": "may be you can just store the object id in session store instead of whole object. then can fetch that object from that id.storing whole object in cookie might expose some sensitive data.and one more thing cookies max limit is 4kb so you can not store objects larger than that"}, {"owner": {"reputation": 9578, "user_id": 120917, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cfb74e792db321ba120ffa223197f673?s=128&d=identicon&r=PG", "display_name": "SztupY", "link": "https://stackoverflow.com/users/120917/sztupy"}, "reply_to_user": {"reputation": 171, "user_id": 1592591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b2d32ac48d24c7313d703b09b9d6ea7?s=128&d=identicon&r=PG", "display_name": "Sujay Gavhane", "link": "https://stackoverflow.com/users/1592591/sujay-gavhane"}, "edited": false, "score": 0, "creation_date": 1530538746, "post_id": 51135496, "comment_id": 89259022, "body": "@SujayGavhane this is used for caching reasons meaning only storing the id would defeat the purpose"}, {"owner": {"reputation": 171, "user_id": 1592591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b2d32ac48d24c7313d703b09b9d6ea7?s=128&d=identicon&r=PG", "display_name": "Sujay Gavhane", "link": "https://stackoverflow.com/users/1592591/sujay-gavhane"}, "edited": false, "score": 0, "creation_date": 1530538879, "post_id": 51135496, "comment_id": 89259109, "body": "then store only needed values from that object into cookie which will slightly reduce the size of object."}], "answers": [{"comments": [{"owner": {"reputation": 9578, "user_id": 120917, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cfb74e792db321ba120ffa223197f673?s=128&d=identicon&r=PG", "display_name": "SztupY", "link": "https://stackoverflow.com/users/120917/sztupy"}, "edited": false, "score": 0, "creation_date": 1530538682, "post_id": 51137400, "comment_id": 89258987, "body": "But the two will give different results, and as @Maxence said encryption might also add some overhead, so these are good for starters but I was wondering if there&#39;s anything more accurate"}, {"owner": {"reputation": 10912, "user_id": 1681, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dcc2d3a8038cd47219af0eebe0a8a78e?s=128&d=identicon&r=PG", "display_name": "Sixty4Bit", "link": "https://stackoverflow.com/users/1681/sixty4bit"}, "reply_to_user": {"reputation": 9578, "user_id": 120917, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cfb74e792db321ba120ffa223197f673?s=128&d=identicon&r=PG", "display_name": "SztupY", "link": "https://stackoverflow.com/users/120917/sztupy"}, "edited": false, "score": 0, "creation_date": 1530552236, "post_id": 51137400, "comment_id": 89266037, "body": "I added more explanation. You need to pick one strategy and then use that to determine whether or not you will put the object into the cookie."}], "tags": [], "owner": {"reputation": 10912, "user_id": 1681, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dcc2d3a8038cd47219af0eebe0a8a78e?s=128&d=identicon&r=PG", "display_name": "Sixty4Bit", "link": "https://stackoverflow.com/users/1681/sixty4bit"}, "is_accepted": false, "score": 1, "last_activity_date": 1530543487, "last_edit_date": 1530543487, "creation_date": 1530538241, "answer_id": 51137400, "question_id": 51135496, "link": "https://stackoverflow.com/questions/51135496/how-to-determine-if-an-object-would-fit-in-the-cookie-cache-or-not-in-rails/51137400#51137400", "title": "How to determine if an object would fit in the cookie cache or not in rails", "body": "<p>You can test to see how large the object is in memory using <a href=\"https://ruby-doc.org/stdlib-2.3.0/libdoc/objspace/rdoc/ObjectSpace.html\" rel=\"nofollow noreferrer\">ObjectSpace</a>.</p>\n\n<pre><code>ObjectSpace.memsize_of(obj)\n</code></pre>\n\n<p>Or you can serialize it to a String and compare size of the string.</p>\n\n<pre><code>str = YAML::dump(obj)\n</code></pre>\n\n<p>ObjectSpace is only going to give you a hint at the size of the object but will be fast. Serializing the object will be slower but more accurate. </p>\n\n<p>Use one of these strategies on all of your objects to get a feel for how big the objects will be when serialized to the cookie. Determine what your cutoff should be and then set the cookie based on size.</p>\n\n<pre><code>str = YAML::dump(obj)\nsession[:data] = obj if str.length &lt; MAX_OBJ_SIZE\n</code></pre>\n\n<p>You will have to test to determine the correct value for MAX_OBJ_SIZE but you know it will be less than 4000.</p>\n"}], "owner": {"reputation": 9578, "user_id": 120917, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cfb74e792db321ba120ffa223197f673?s=128&d=identicon&r=PG", "display_name": "SztupY", "link": "https://stackoverflow.com/users/120917/sztupy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1530543487, "creation_date": 1530532086, "question_id": 51135496, "link": "https://stackoverflow.com/questions/51135496/how-to-determine-if-an-object-would-fit-in-the-cookie-cache-or-not-in-rails", "title": "How to determine if an object would fit in the cookie cache or not in rails", "body": "<p>We're having an application that uses <code>CookieStore</code> to store the session's data. Among others we're using this functionality to store an object in the session to increase the performance of our site, e.g.</p>\n\n<pre><code>session[:data] = some_object\n</code></pre>\n\n<p>Usually it's fine, but sometimes the representation of <code>some_object</code> is too large to be stored as a cookie. In this case we are completely happy not storing the object in the session - it just increases the site's performance a bit, and only affects a few of our users. However for this to work we would need to decide early whether to store the object or not, otherwise we'll get a <code>ActionDispatch::Cookies::CookieOverflow</code> on the middleware level - too late to do anything about it.</p>\n\n<p>Is there a way to get the size of the object in an easy way? We're thinking about converting the object to JSON and checking it's string's length but there might be better solutions.</p>\n\n<p>In short we're interested in the implementation of the following <code>stored_as_cookie_size</code> method:</p>\n\n<pre><code>if stored_as_cookie_size(some_object) &lt; LIMIT\n   session[:data] = some_object\nelse\n   session[:data] = nil\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530528314, "post_id": 51134315, "comment_id": 89252908, "body": "Do you need indexes or you want to simply remove duplicates? You can do the latter without the former."}, {"owner": {"reputation": 6105, "user_id": 1700874, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad36477949cfd7db659cd4420537911c?s=128&d=identicon&r=PG&f=1", "display_name": "The Whiz of Oz", "link": "https://stackoverflow.com/users/1700874/the-whiz-of-oz"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530528443, "post_id": 51134315, "comment_id": 89252974, "body": "I didn&#39;t know it was possible but the answer below shows it can be done. Will rephrase"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1530528522, "post_id": 51134368, "comment_id": 89253018, "body": "Or, without binding to the max length of the array: <code>ary.uniq { |e| e[2..-1] }</code> or <code>ary.uniq {|date, time, *rest| rest }</code>"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1530528568, "post_id": 51134368, "comment_id": 89253051, "body": "Did just that. First part. :P"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1530528710, "post_id": 51134368, "comment_id": 89253116, "body": "I wish the block form was named <code>uniq_by</code> to be consistent with sort_by/group_by and other similar methods."}], "tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": true, "score": 3, "last_activity_date": 1530528656, "last_edit_date": 1530528656, "creation_date": 1530528343, "answer_id": 51134368, "question_id": 51134315, "link": "https://stackoverflow.com/questions/51134315/removing-duplicate-array-items-from-array-with-filtering-in-ruby/51134368#51134368", "title": "Removing duplicate array items from array with filtering in Ruby", "body": "<p>If you just want to remove the duplicates based on last 4 values, use <a href=\"https://apidock.com/ruby/Array/uniq\" rel=\"nofollow noreferrer\"><code>uniq</code></a> with a block:</p>\n\n<pre><code>ary.uniq { |e| e[2..5] }\n =&gt; [[\"20180629\", \"14:49\", \"google\", \"iOS\", \"Safari\", \"1\"],\n     [\"20180629\", \"12:22\", \"google\", \"Android\", \"Chrome\", \"2\"],\n     [\"20180629\", \"16:30\", \"(direct)\", \"iOS\", \"Safari\", \"1\"],\n     [\"20180629\", \"09:29\", \"(direct)\", \"Android\", \"Chrome\", \"2\"]] \n</code></pre>\n\n<p>Or, to remove them based on all values except first two, do:</p>\n\n<pre><code>ary.uniq { |e| e[2..-1] }\n</code></pre>\n\n<p>which can also be written as (Sergio's suggestion):</p>\n\n<pre><code>ary.uniq { |date, time, *rest| rest }\n</code></pre>\n"}], "owner": {"reputation": 6105, "user_id": 1700874, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad36477949cfd7db659cd4420537911c?s=128&d=identicon&r=PG&f=1", "display_name": "The Whiz of Oz", "link": "https://stackoverflow.com/users/1700874/the-whiz-of-oz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 51134368, "answer_count": 1, "score": 1, "last_activity_date": 1530528656, "creation_date": 1530528161, "last_edit_date": 1530528502, "question_id": 51134315, "link": "https://stackoverflow.com/questions/51134315/removing-duplicate-array-items-from-array-with-filtering-in-ruby", "title": "Removing duplicate array items from array with filtering in Ruby", "body": "<p>I have an array of items:</p>\n\n<pre><code>[\n  [\"20180629\", \"14:49\", \"google\", \"iOS\", \"Safari\", \"1\"], \n  [\"20180629\", \"12:22\", \"google\", \"Android\", \"Chrome\", \"2\"],\n  [\"20180629\", \"17:20\", \"google\", \"iOS\", \"Safari\", \"1\"], \n  [\"20180629\", \"16:30\", \"(direct)\", \"iOS\", \"Safari\", \"1\"], \n  [\"20180629\", \"09:29\", \"(direct)\", \"Android\", \"Chrome\", \"2\"]\n]\n</code></pre>\n\n<p>I need to remove duplicate sub-arrays that have all the same items, except for the first two (timecodes). I narrowed my code down to this:</p>\n\n<pre><code>exclude_from_filter = [0,1]\n\n\narray.each_with_index.map do |array, index|\n  array.reject.with_index { |e,i| exclude_from_filter.include? i }\nend.uniq!\n</code></pre>\n\n<p>Which removes timecodes and then removes duplicate items:</p>\n\n<pre><code>[\n  [\"google\", \"iOS\", \"Safari\", \"1\"], \n  [\"google\", \"Android\", \"Chrome\", \"2\"], \n  [\"(direct)\", \"iOS\", \"Safari\", \"1\"], \n  [\"(direct)\", \"Android\", \"Chrome\", \"2\"]\n]\n</code></pre>\n\n<p>However instead I would like to get rid of duplicate items, leaving one unique value intact:</p>\n\n<pre><code>[\n  [\"20180629\", \"14:49\", \"google\", \"iOS\", \"Safari\", \"1\"], \n  [\"20180629\", \"12:22\", \"google\", \"Android\", \"Chrome\", \"2\"],\n  [\"20180629\", \"16:30\", \"(direct)\", \"iOS\", \"Safari\", \"1\"], \n  [\"20180629\", \"09:29\", \"(direct)\", \"Android\", \"Chrome\", \"2\"]\n]\n</code></pre>\n\n<p>And this is where I'm completely lost</p>\n"}, {"tags": ["ruby", "svg"], "comments": [{"owner": {"reputation": 173, "user_id": 8718742, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XBXjN.jpg?s=128&g=1", "display_name": "Enner31", "link": "https://stackoverflow.com/users/8718742/enner31"}, "reply_to_user": {"reputation": 101196, "user_id": 1038015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5d912dac5c74b47bbaff7164f5f8bb8?s=128&d=identicon&r=PG", "display_name": "Robert Longson", "link": "https://stackoverflow.com/users/1038015/robert-longson"}, "edited": false, "score": 0, "creation_date": 1530536834, "post_id": 51134030, "comment_id": 89257849, "body": "@RobertLongson what kind of joke is that ?"}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 8718742, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XBXjN.jpg?s=128&g=1", "display_name": "Enner31", "link": "https://stackoverflow.com/users/8718742/enner31"}, "edited": false, "score": 0, "creation_date": 1530690323, "post_id": 51138689, "comment_id": 89319649, "body": "Hi, thanks for your answer, but what do you mean by save it as string and call <code>html_safe</code> ? Should it looks like <code>&lt;tspan x=&quot;39&quot; y=&quot;157&quot;&gt;t(&#39;Accessoires&#39;)&lt;&#47;tspan&gt;.html_safe</code> ?"}, {"owner": {"reputation": 571, "user_id": 4759390, "user_type": "registered", "profile_image": "https://graph.facebook.com/839598759461592/picture?type=large", "display_name": "Artem Dorodovskyi", "link": "https://stackoverflow.com/users/4759390/artem-dorodovskyi"}, "reply_to_user": {"reputation": 173, "user_id": 8718742, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XBXjN.jpg?s=128&g=1", "display_name": "Enner31", "link": "https://stackoverflow.com/users/8718742/enner31"}, "edited": false, "score": 0, "creation_date": 1530697951, "post_id": 51138689, "comment_id": 89324140, "body": "It should be <code>&quot;&lt;svg&gt;&lt;tspan x=&quot;39&quot; y=&quot;157&quot;&gt;#{t(&#39;Accessoires&#39;)}&lt;&#47;tspan&gt;&lt;&#47;svg&gt;&quot;.html_safe</code>. You need to interpolate I18n to string before converting to html."}, {"owner": {"reputation": 571, "user_id": 4759390, "user_type": "registered", "profile_image": "https://graph.facebook.com/839598759461592/picture?type=large", "display_name": "Artem Dorodovskyi", "link": "https://stackoverflow.com/users/4759390/artem-dorodovskyi"}, "reply_to_user": {"reputation": 173, "user_id": 8718742, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XBXjN.jpg?s=128&g=1", "display_name": "Enner31", "link": "https://stackoverflow.com/users/8718742/enner31"}, "edited": false, "score": 0, "creation_date": 1530698232, "post_id": 51138689, "comment_id": 89324339, "body": "I think best way is third. You create partial (html.erb file) where you copy your svg code and just add erb code where you need."}, {"owner": {"reputation": 173, "user_id": 8718742, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XBXjN.jpg?s=128&g=1", "display_name": "Enner31", "link": "https://stackoverflow.com/users/8718742/enner31"}, "edited": false, "score": 0, "creation_date": 1530714186, "post_id": 51138689, "comment_id": 89334463, "body": "Should I create the partial into the same folder ? In ``app/assets/images ``` ?  But how do I add erb code ? I tried to do the way you explained to me but do not seems to work..."}, {"owner": {"reputation": 571, "user_id": 4759390, "user_type": "registered", "profile_image": "https://graph.facebook.com/839598759461592/picture?type=large", "display_name": "Artem Dorodovskyi", "link": "https://stackoverflow.com/users/4759390/artem-dorodovskyi"}, "reply_to_user": {"reputation": 173, "user_id": 8718742, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XBXjN.jpg?s=128&g=1", "display_name": "Enner31", "link": "https://stackoverflow.com/users/8718742/enner31"}, "edited": false, "score": 0, "creation_date": 1530714905, "post_id": 51138689, "comment_id": 89334919, "body": "You don&#39;t need to save svg to assets. Create file <code>_accessoires.html.erb</code> in <code>views&#47;layouts</code> folder. Then you can use your svg by adding to view <code>&lt;%= render &#39;layouts&#47;accessoires&#39; %&gt;</code>"}], "tags": [], "owner": {"reputation": 571, "user_id": 4759390, "user_type": "registered", "profile_image": "https://graph.facebook.com/839598759461592/picture?type=large", "display_name": "Artem Dorodovskyi", "link": "https://stackoverflow.com/users/4759390/artem-dorodovskyi"}, "is_accepted": false, "score": 0, "last_activity_date": 1530543870, "last_edit_date": 1530543870, "creation_date": 1530542463, "answer_id": 51138689, "question_id": 51134030, "link": "https://stackoverflow.com/questions/51134030/rails-how-to-put-i18n-into-svg-file/51138689#51138689", "title": "Rails : How to put I18N into SVG file", "body": "<p>I know three ways to build svg with parameter. The first one is save it as string and then call <code>html_safe</code>. The second way use object tag according to W3C <a href=\"https://www.w3.org/TR/SVGParamPrimer/\" rel=\"nofollow noreferrer\">SVG with parameters</a></p>\n\n<pre><code>&lt;object type=\"image/svg+xml\" data=\"text.svg\" class=\"logo\"&gt;\n  &lt;param text=\"&lt;%= t('accessoires') %&gt;\"&gt;\n&lt;/object&gt;\n\n&lt;text font-family=\"OpenSans-Semibold, Open Sans\" font-size=\"22\" font-weight=\"500\" fill=\"#FFFFFF\"&gt;\n  &lt;tspan x=\"39\" y=\"157\" content-value=\"param(label)\" /&gt;\n&lt;/text&gt;\n</code></pre>\n\n<p>Third way is use raw svg or partial <code>_my_svg.html.erb</code>:</p>\n\n<pre><code>&lt;text font-family=\"OpenSans-Semibold, Open Sans\" font-size=\"22\" font-weight=\"500\" fill=\"#FFFFFF\"&gt;\n  &lt;tspan x=\"39\" y=\"157\" content-value=\"&lt;%= t('accessoires') %&gt;\" /&gt;\n&lt;/text&gt;\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 8718742, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/XBXjN.jpg?s=128&g=1", "display_name": "Enner31", "link": "https://stackoverflow.com/users/8718742/enner31"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 269, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530543870, "creation_date": 1530527219, "question_id": 51134030, "link": "https://stackoverflow.com/questions/51134030/rails-how-to-put-i18n-into-svg-file", "title": "Rails : How to put I18N into SVG file", "body": "<p>I want to internationalize several SVG files but I have no idea how I could do that.<br>\nHere's my SVG file : </p>\n\n<pre><code>&lt;text font-family=\"OpenSans-Semibold, Open Sans\" font-size=\"22\" font-weight=\"500\" fill=\"#FFFFFF\"&gt;\n  &lt;tspan x=\"39\" y=\"157\"&gt;Accessoires&lt;/tspan&gt;\n&lt;/text&gt;\n</code></pre>\n\n<p>Should I do something like : </p>\n\n<pre><code>&lt;text font-family=\"OpenSans-Semibold, Open Sans\" font-size=\"22\" font-weight=\"500\" fill=\"#FFFFFF\"&gt;\n  &lt;tspan x=\"39\" y=\"157\"&gt;&lt;%= t('accessoires') %&gt;&lt;/tspan&gt;\n&lt;/text&gt;\n</code></pre>\n\n<p>Or is there an other way to do it ? </p>\n\n<p>Thanks for your answers. </p>\n"}, {"tags": ["ruby", "multidimensional-array", "nested", "enumerable"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530529069, "post_id": 51133956, "comment_id": 89253311, "body": "Instead of doing <code>ary.inject([ary]) { |memo, elem|</code>, prefer <code>do..end</code> when multiline blocks e.g. <code>ary.inject([ary]) do |memo, elem| ...</code>"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530529100, "post_id": 51133956, "comment_id": 89253330, "body": "This <code>.max_by{ |elem| elem.size }</code> can be shortened to <code>.max_by(&amp;:size)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 9696243, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Brunhilde Line", "link": "https://stackoverflow.com/users/9696243/brunhilde-line"}, "edited": false, "score": 0, "creation_date": 1530605575, "post_id": 51134638, "comment_id": 89282857, "body": "Thank you! What do you mean by cheating with the optional parameters?"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 1, "last_activity_date": 1530529218, "creation_date": 1530529218, "answer_id": 51134638, "question_id": 51133956, "link": "https://stackoverflow.com/questions/51133956/ruby-getting-a-max-value-out-of-a-newly-created-array-in-one-function/51134638#51134638", "title": "Ruby Getting a max value out of a newly created array in one function", "body": "<p>You can unroll it:</p>\n\n<pre><code>def deep_max(ary)\n  arys = []\n  ary = [ary]\n  until ary.empty?\n    elem = ary.pop\n    if elem.is_a?(Array)\n      ary.push(*elem)\n      arys.push(elem)\n    end\n  end\n  arys.max_by(&amp;:size)\nend\n</code></pre>\n\n<p>Or you can cheat, by introducing an optional parameter that changes how your recursion works on top level vs how it behaves down the rabbit hole.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1530558119, "last_edit_date": 1530558119, "creation_date": 1530557810, "answer_id": 51142225, "question_id": 51133956, "link": "https://stackoverflow.com/questions/51133956/ruby-getting-a-max-value-out-of-a-newly-created-array-in-one-function/51142225#51142225", "title": "Ruby Getting a max value out of a newly created array in one function", "body": "<pre><code>def deep_max(arr)\n  biggest_so_far = arr\n  arr.each do |e|\n    if e.is_a?(Array)\n      candidate = deep_max(e)\n      biggest_so_far = candidate if candidate.size &gt; biggest_so_far.size\n    end\n  end\n  biggest_so_far\nend\n\ndeep_max [[1, 2], [[1, 2, [[1, 2, 3, 4, [5], 6, 7, 11]]]], [1, [2]]]\n  #=&gt; [1, 2, 3, 4, [5], 6, 7, 11]\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 9696243, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Brunhilde Line", "link": "https://stackoverflow.com/users/9696243/brunhilde-line"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 51142225, "answer_count": 2, "score": 0, "last_activity_date": 1530558119, "creation_date": 1530526929, "last_edit_date": 1530529026, "question_id": 51133956, "link": "https://stackoverflow.com/questions/51133956/ruby-getting-a-max-value-out-of-a-newly-created-array-in-one-function", "title": "Ruby Getting a max value out of a newly created array in one function", "body": "<p>I want my function to return the longest Array within a nested array (including the array itself) so </p>\n\n<pre><code>nested_ary = [[1,2],[[1,2,[[1,2,3,4,[5],6,7,11]]]],[1,[2]]\ndeep_max(nested_ary)\n =&gt; [1,2,3,4,[5],6,7,11]\n\nsimple_ary = [1,2,3,4,5]\ndeep_max(simple_ary)\n =&gt; returns: [1,2,3,4,5]\n</code></pre>\n\n<p>I created a function to collect all arrays. I have to get the max value in another function. </p>\n\n<p>my code:</p>\n\n<pre><code>def deep_max(ary)\n  ary.inject([ary]) { |memo, elem|\n  if elem.is_a?(Array)\n    memo.concat(deep_max(elem))\n  else\n    memo\n  end }\nend\n</code></pre>\n\n<p>This gives me what I want:</p>\n\n<pre><code>deep_max(nested_ary).max_by{ |elem| elem.size }\n</code></pre>\n\n<p>Is there a way to get this max inside of the function?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "after-save"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530526778, "post_id": 51133895, "comment_id": 89252165, "body": "Which line is at <code>app&#47;models&#47;teacher_post.rb:17</code>?"}, {"owner": {"reputation": 15, "user_id": 9986009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec404e78ba34c11439924d992d3a5e20?s=128&d=identicon&r=PG&f=1", "display_name": "R.lOOp", "link": "https://stackoverflow.com/users/9986009/r-loop"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530527013, "post_id": 51133895, "comment_id": 89252293, "body": "@JagdeepSingh I&#39;ve commented line 17 in the model code"}], "answers": [{"tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1530527112, "creation_date": 1530527112, "answer_id": 51133996, "question_id": 51133895, "link": "https://stackoverflow.com/questions/51133895/ruby-on-rails-stack-level-too-deep/51133996#51133996", "title": "Ruby on Rails -- Stack level too deep", "body": "<p>The reason for \"stack level too deep error\" is because you are calling <code>update_attributes</code> inside <code>after_save</code> callback, which will invoke the callback <code>after_save</code> again, calling <code>update_attributes</code> again, and so on...</p>\n\n<p>Change it to following:</p>\n\n<pre><code>before_save :set_correct_post_type\n\ndef set_correct_post_type\n  if self.document.present?\n    if (find_mime_type(self.document.original_filename) == \"application/vnd.openxmlformats-officedocument.presentationml.presentation\") || (find_mime_type(self.document.original_filename) == \"application/vnd.ms-powerpoint\")\n      self.post_type = 3\n    elsif (find_mime_type(self.document.original_filename) == \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\" ) || (find_mime_type(self.document.original_filename) == \"application/msword\") || (find_mime_type(self.document.original_filename) == \"application/pdf\")\n      self.post_type = 2\n    elsif (MIME::Types.type_for(self.document.original_filename).first.content_type == \"image/png\") || (MIME::Types.type_for(self.document.original_filename).first.content_type ==\"image/jpeg\") || (MIME::Types.type_for(self.document.original_filename).first.content_type == \"image/jpg\")\n      self.post_type = 5\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 741, "user_id": 464152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9de7b60b21fbff8ef111ec7b827de984?s=128&d=identicon&r=PG", "display_name": "joel1di1", "link": "https://stackoverflow.com/users/464152/joel1di1"}, "is_accepted": false, "score": 0, "last_activity_date": 1530527220, "creation_date": 1530527220, "answer_id": 51134031, "question_id": 51133895, "link": "https://stackoverflow.com/questions/51133895/ruby-on-rails-stack-level-too-deep/51134031#51134031", "title": "Ruby on Rails -- Stack level too deep", "body": "<p>When you call update_attributes, the callbacks are called, as your method set_correct_post_type is set as \"after_save\", you end with an loop.</p>\n\n<p>You call save on you method that triggers the set_correct_post_type method that call update_attributes that triggers the set_correct_post_type method that call update_attributes...</p>\n\n<p>If you don't want to trigger the callbacks in your method, look at update_columns instead of update_attributes.\nOf consider setting attribute with a before_save instead of a after save.</p>\n"}, {"tags": [], "owner": {"reputation": 905, "user_id": 5119244, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203221141608724/picture?type=large", "display_name": "Argonus", "link": "https://stackoverflow.com/users/5119244/argonus"}, "is_accepted": false, "score": 0, "last_activity_date": 1530545754, "last_edit_date": 1530545754, "creation_date": 1530541619, "answer_id": 51138448, "question_id": 51133895, "link": "https://stackoverflow.com/questions/51133895/ruby-on-rails-stack-level-too-deep/51138448#51138448", "title": "Ruby on Rails -- Stack level too deep", "body": "<p>If you have your custom code, without any gems etc, avoid using rails callbacks. I'd recommend use Serice Object ex. <code>CreateTeacherPost</code> which will create a post, do magic with params, types etc all in one Transaction. This way you will avoid problems like below and you will always know whats going on without callbacks magic. </p>\n\n<p>But if you really want to use this pattern it's going into an infinite loop because each update_attributes is calling after_save! callback method. You could use <code>update_column</code> method or <code>before_save</code> callback and set attribute directly using <code>self.post_type=number</code>. \nBut first will call SQL update the second time, there is no reason to do this. </p>\n\n<p>One more :) if you have to/want to use after callback better use after_commit callback. It's much safer. </p>\n"}], "owner": {"reputation": 15, "user_id": 9986009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec404e78ba34c11439924d992d3a5e20?s=128&d=identicon&r=PG&f=1", "display_name": "R.lOOp", "link": "https://stackoverflow.com/users/9986009/r-loop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 926, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1530545754, "creation_date": 1530526723, "last_edit_date": 1530526968, "question_id": 51133895, "link": "https://stackoverflow.com/questions/51133895/ruby-on-rails-stack-level-too-deep", "title": "Ruby on Rails -- Stack level too deep", "body": "<p><strong>model:</strong></p>\n\n<pre><code>after_save :set_correct_post_type\n\ndef set_correct_post_type\n  if self.document.present?\n    if (find_mime_type(self.document.original_filename) == \"application/vnd.openxmlformats-officedocument.presentationml.presentation\") || (find_mime_type(self.document.original_filename) == \"application/vnd.ms-powerpoint\")\n      self.update_attributes(:post_type =&gt; 3)\n    elsif (find_mime_type(self.document.original_filename) == \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\" ) || (find_mime_type(self.document.original_filename) == \"application/msword\") || (find_mime_type(self.document.original_filename) == \"application/pdf\")\n      self.update_attributes(:post_type =&gt; 2)\n    elsif (MIME::Types.type_for(self.document.original_filename).first.content_type == \"image/png\") || (MIME::Types.type_for(self.document.original_filename).first.content_type ==\"image/jpeg\") || (MIME::Types.type_for(self.document.original_filename).first.content_type == \"image/jpg\")\n      self.update_attributes(:post_type =&gt; 5)\n    end\n  end #line17\nend\n</code></pre>\n\n<p><strong>Logs:</strong></p>\n\n<pre><code>  (0.3ms)  rollback transaction\nCompleted 500 Internal Server Error in 1939ms (ActiveRecord: 37.5ms)\n\nSystemStackError (stack level too deep):\n  app/models/teacher_post.rb:17:in `set_correct_post_type'\n  app/models/teacher_post.rb:17:in `set_correct_post_type'\n  app/models/teacher_post.rb:17:in `set_correct_post_type'\n  app/models/teacher_post.rb:17:in `set_correct_post_type'\n  app/models/teacher_post.rb:17:in `set_correct_post_type'\n  app/models/teacher_post.rb:17:in `set_correct_post_type'\n  app/models/teacher_post.rb:17:in `set_correct_post_type'\n</code></pre>\n\n<p>And then it repeats the last line again and again until I stop it manually. Can anyone tell me what I'm doing wrong?</p>\n"}, {"tags": ["ruby", "metaprogramming", "eigenclass"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1530521960, "post_id": 51132394, "comment_id": 89249348, "body": "<code>BasicObject.singleton_class.singleton_class.is_a?(Class) #\u21d2\u00a0true</code> <code>#Class</code> is a string representation."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1530522144, "post_id": 51132394, "comment_id": 89249428, "body": "Your question says <code>BasicObject.singleton_class.singleton_class</code> but your diagram says <code>BasicObject.singleton_class.singleton_class.superclass</code>. Please clarify."}, {"owner": {"reputation": 6329, "user_id": 178728, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WEcsM.jpg?s=128&g=1", "display_name": "kstratis", "link": "https://stackoverflow.com/users/178728/kstratis"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1530523099, "post_id": 51132394, "comment_id": 89249951, "body": "@Stefan @mudasobwa You are right. I meant to say <code>BasicObject.singleton_class.singleton_class.superclass</code>. I also edited the question. Any clues are more than welcome."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530524231, "post_id": 51132394, "comment_id": 89250658, "body": "@kstratis: not sure what confusion is still there after mudasobwa&#39;s clarification. It IS a Class."}, {"owner": {"reputation": 6329, "user_id": 178728, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WEcsM.jpg?s=128&g=1", "display_name": "kstratis", "link": "https://stackoverflow.com/users/178728/kstratis"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530524340, "post_id": 51132394, "comment_id": 89250716, "body": "@SergioTulentsev According to the diagram <code>BasicObject.singleton_class.singleton_class.superclass</code> is simply <code>Class</code>. However in reality is the singleton class of <code>Class</code> which is <code>#Class</code>. It can&#39;t be both. Which one is correct and why?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1530524461, "post_id": 51132394, "comment_id": 89250798, "body": "@kstratis: ah, I see. Well, when a diagram conflicts with reality, the answer to &quot;which is correct&quot; is obvious. :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1530524511, "post_id": 51132394, "comment_id": 89250823, "body": "You keep saying <code>#Class</code>.  What&#39;s your ruby version and/or env where you see this? for me it&#39;s <code>#&lt;Class:Class&gt;</code>"}, {"owner": {"reputation": 6329, "user_id": 178728, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WEcsM.jpg?s=128&g=1", "display_name": "kstratis", "link": "https://stackoverflow.com/users/178728/kstratis"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530524640, "post_id": 51132394, "comment_id": 89250893, "body": "@SergioTulentsev Right. <code>#&lt;Class:Class&gt;</code>  is what I meant. <code>#Class</code> was just a shortcut I made up for brevity. Using Ruby v2.5.1 on macOS."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1530524647, "post_id": 51132394, "comment_id": 89250897, "body": "Indeed, this is confusing. Where is that diagram from?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530524707, "post_id": 51132394, "comment_id": 89250945, "body": "Yeah, don&#39;t use confusing shortcuts that only you are aware of. We programmers like exactness :)"}, {"owner": {"reputation": 6329, "user_id": 178728, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WEcsM.jpg?s=128&g=1", "display_name": "kstratis", "link": "https://stackoverflow.com/users/178728/kstratis"}, "edited": false, "score": 0, "creation_date": 1530524744, "post_id": 51132394, "comment_id": 89250966, "body": "It&#39;s from a user I chatted with at Ruby IRC in freenode. However it&#39;s been quoted multiple times to many other users and it&#39;s been treated as the Ruby object model bible... Turns out it&#39;s got its flaws..."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530524823, "post_id": 51132394, "comment_id": 89251014, "body": "I&#39;m betting it <i>was</i> accurate at the time. If only we could find out what ruby version was current at the moment of making the diagram."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1530524909, "post_id": 51132394, "comment_id": 89251067, "body": "Or who made this (so that we can tweet at them, or something)"}, {"owner": {"reputation": 6329, "user_id": 178728, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WEcsM.jpg?s=128&g=1", "display_name": "kstratis", "link": "https://stackoverflow.com/users/178728/kstratis"}, "edited": false, "score": 1, "creation_date": 1530525208, "post_id": 51132394, "comment_id": 89251246, "body": "I like your train of thought. This COULD be true. Maybe it was accurate at the time. On the other hand I haven&#39;t heard of any object model changes in Ruby in recent years. Anyway to tell you the truth I don&#39;t remember. It was months ago. I&#39;ll try to ping a moderator at the IRC and will update the post in case of any updates. Thanks for the help anyway."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1530525685, "post_id": 51132394, "comment_id": 89251525, "body": "Checked a few ruby versions down to 1.9.3. All exhibit the same behaviour. Guess we were reading the wrong bible all this time :)"}], "answers": [{"tags": [], "owner": {"reputation": 4769, "user_id": 1242470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f1b4b172a8f873efe1179ca140f1eb?s=128&d=identicon&r=PG", "display_name": "Mate Solymosi", "link": "https://stackoverflow.com/users/1242470/mate-solymosi"}, "is_accepted": false, "score": 2, "last_activity_date": 1533508962, "creation_date": 1533508962, "answer_id": 51698780, "question_id": 51132394, "link": "https://stackoverflow.com/questions/51132394/singleton-class-of-singleton-class-of-basicobject-in-ruby/51698780#51698780", "title": "Singleton class of singleton class of BasicObject in Ruby", "body": "<p>The behavior of the Ruby interpreter makes perfect sense because:</p>\n\n<ul>\n<li>When a <code>Child</code> class extends a <code>Parent</code>, Ruby sets it up so that the singleton class <code>#&lt;Class:Child&gt;</code> extends <code>#&lt;Class:Parent&gt;</code> as well; and</li>\n<li><code>BasicObject.singleton_class</code> is a subclass of <code>Class</code>, so <code>BasicObject.singleton_class.singleton_class</code> will be a subclass of <code>#&lt;Class:Class&gt;</code></li>\n</ul>\n\n<p>Verifying the equality:</p>\n\n<pre><code>BasicObject.singleton_class.singleton_class.superclass.equal?(Class.singleton_class)\n#=> true\n</code></pre>\n\n<p>This leads to the next question &ndash; why does <code>#&lt;Class:BaseObject&gt;</code> extend <code>Class</code> in the first place? Following the rule above, since <code>BaseObject</code> has no superclass &ndash; that is, <code>BaseObject.superclass</code> is <code>nil</code> &ndash; the logical thing would be for its singleton class to not have a superclass either.</p>\n\n<p>The answer is that <code>#&lt;Class:BaseObject&gt;</code> extending <code>Class</code> ensures consistency in the inheritance hierarchy when it comes to singleton classes. Take this Ruby object for example:</p>\n\n<pre><code>obj = \"a string\"\n</code></pre>\n\n<p>It is a well-established notion that instead of <code>obj</code> being simply an instance of <code>String</code>, we can think of it as an (only) instance of its own singleton class, which in turn is a subclass of <code>String</code>. That is:</p>\n\n<pre><code>obj.class.equal?(obj.singleton_class.superclass)\n#=&gt; true\n</code></pre>\n\n<p>It seems only logical that the same should apply to class instances as well. But it does not, because it contradicts the rule mentioned above, where the superclass of a singleton class of a <code>Child</code> class is the singleton class of its <code>Parent</code> class.</p>\n\n<pre><code>class Foo; end\n\nFoo.class\n#=&gt; Class\n\nFoo.singleton_class.superclass\n#=&gt; #&lt;Class:Object&gt;      &lt;-- not equal to Class!\n\n# because:\nFoo.superclass\n#=&gt; Object\n</code></pre>\n\n<p>But it is possible to resolve this contradiction by placing <code>Class</code> at the top of the singleton class inheritance hierarchy:</p>\n\n<pre><code>Foo.singleton_class.superclass\n#=&gt; #&lt;Class:Object&gt;\n\nFoo.singleton_class.superclass.superclass\n#=&gt; #&lt;Class:BasicObject&gt;\n\nFoo.singleton_class.superclass.superclass.superclass\n#=&gt; Class\n</code></pre>\n\n<p>This way, even though <code>Foo.singleton_class.superclass</code> is not equal to <code>Foo.class</code>, by walking up the inheritance chain, it does get there eventually...</p>\n"}], "owner": {"reputation": 6329, "user_id": 178728, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WEcsM.jpg?s=128&g=1", "display_name": "kstratis", "link": "https://stackoverflow.com/users/178728/kstratis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 2, "answer_count": 1, "score": 5, "last_activity_date": 1533508962, "creation_date": 1530521833, "last_edit_date": 1531435047, "question_id": 51132394, "link": "https://stackoverflow.com/questions/51132394/singleton-class-of-singleton-class-of-basicobject-in-ruby", "title": "Singleton class of singleton class of BasicObject in Ruby", "body": "<p>This is mostly an \u201cacademic\u201d one but here it goes:</p>\n\n<p>According to this Ruby eigenclass diagram (slightly edited):</p>\n\n<p><a href=\"https://i.stack.imgur.com/gM41D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gM41D.png\" alt=\"Possibly-wrong Ruby eigenclass diagram\"></a></p>\n\n<p><code>BasicObject.singleton_class.singleton_class.superclass</code> is <code>Class</code>. </p>\n\n<p>However, running this on a Ruby interpreter (Ruby v2.5.1), it turns out that <code>BasicObject.singleton_class.singleton_class.superclass</code> is <code>#&lt;Class:Class&gt;</code> and not <code>Class</code>. Therefore, is the diagram lying or am I missing something?</p>\n\n<p>The diagram is from a user I chatted with at Ruby IRC in Freenode. However, it's been quoted multiple times to many other users and it's been treated as the Ruby object model bible.</p>\n"}, {"tags": ["ruby", "error-handling", "argument-error"], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 5514831, "user_type": "registered", "profile_image": "https://graph.facebook.com/10104745856851707/picture?type=large", "display_name": "Eric Chuhao Chan", "link": "https://stackoverflow.com/users/5514831/eric-chuhao-chan"}, "edited": false, "score": 0, "creation_date": 1530517733, "post_id": 51131058, "comment_id": 89247257, "body": "This is great! thanks a lot!"}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 3, "last_activity_date": 1530516461, "creation_date": 1530516461, "answer_id": 51131058, "question_id": 51131005, "link": "https://stackoverflow.com/questions/51131005/ruby-automatically-add-argument-when-wrong-number-of-arguments-appears/51131058#51131058", "title": "Ruby automatically add argument when &quot;wrong number of arguments&quot; appears", "body": "<p>You don't need to, you need to use <a href=\"https://learn.co/lessons/methods-default-arguments\" rel=\"nofollow noreferrer\">default arguments</a>, like this:</p>\n\n<pre><code>def prefill(n, v = nil)\n  # code\nend\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 5514831, "user_type": "registered", "profile_image": "https://graph.facebook.com/10104745856851707/picture?type=large", "display_name": "Eric Chuhao Chan", "link": "https://stackoverflow.com/users/5514831/eric-chuhao-chan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "closed_date": 1530516535, "accepted_answer_id": 51131058, "answer_count": 1, "score": 0, "last_activity_date": 1530516461, "creation_date": 1530516257, "question_id": 51131005, "link": "https://stackoverflow.com/questions/51131005/ruby-automatically-add-argument-when-wrong-number-of-arguments-appears", "closed_reason": "Duplicate", "title": "Ruby automatically add argument when &quot;wrong number of arguments&quot; appears", "body": "<p>Hi guys I am doing this <a href=\"https://www.codewars.com/kata/prefill-an-array/train/ruby\" rel=\"nofollow noreferrer\">codewar challenge</a>. </p>\n\n<p>The goal is to implement data structure manipulation for method prefill(n, v).</p>\n\n<pre><code>def prefill(n, v)\n    some code\nend\n</code></pre>\n\n<p>One of the requirements is to give a default <strong>\"undefined\"</strong> value for the method argument <strong>v</strong> if it's not given when method is called. </p>\n\n<p>I am not sure how I can catch this ArgumentError and re-trigger the iteration of prefill. Can someone help? </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1530514706, "post_id": 51130285, "comment_id": 89245863, "body": "<code>self.secret</code> can be simplified to <code>secret</code> as <code>self</code> is the implicit receiver. If, however <code>secret</code> were <code>private</code> one cannot use an explicit receiver, even <code>self</code>; you must write just <code>secret</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1530515147, "post_id": 51130285, "comment_id": 89246059, "body": "What is \u201cinherited members\u201d supposed to mean? Also, if it is possible, it\u2019s a correct code."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1530519590, "post_id": 51130285, "comment_id": 89248148, "body": "<i>&quot;Is it possible to access the protected methods outside the class&quot;</i> \u2013 you don&#39;t access the <i>protected</i> method <code>secret</code> from outside the class. You access the <i>public</i> method <code>say_secret_with_self</code>. The protected method is called from <i>within</i> the class."}], "answers": [{"tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": false, "score": 4, "last_activity_date": 1530513550, "creation_date": 1530513550, "answer_id": 51130344, "question_id": 51130285, "link": "https://stackoverflow.com/questions/51130285/is-it-possible-to-access-the-protected-methods-outside-the-class-ruby/51130344#51130344", "title": "Is it possible to access the protected methods outside the class - ruby", "body": "<p>Yes it is correct code. An instance of the class is able to call self methods even if they are <code>protected</code>. <code>protected/private</code> methods are hidden from the outside but not from inside.</p>\n"}, {"tags": [], "owner": {"reputation": 437, "user_id": 6394930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12e47b3e7046a22fd1dbdfe0d4f966d9?s=128&d=identicon&r=PG&f=1", "display_name": "Rafid", "link": "https://stackoverflow.com/users/6394930/rafid"}, "is_accepted": false, "score": 1, "last_activity_date": 1530514101, "creation_date": 1530514101, "answer_id": 51130467, "question_id": 51130285, "link": "https://stackoverflow.com/questions/51130285/is-it-possible-to-access-the-protected-methods-outside-the-class-ruby/51130467#51130467", "title": "Is it possible to access the protected methods outside the class - ruby", "body": "<p>the method <code>secret</code> is still protected. you cant call it from outside of your class (or inherited class). but you can call it from <code>say_secret_with_self</code> because it is still in the same class with <code>secret</code></p>\n"}], "owner": {"reputation": 4246, "user_id": 2541366, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f6d2bc66669eb034160002544a580c61?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/2541366/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1530515351, "creation_date": 1530513293, "last_edit_date": 1530515351, "question_id": 51130285, "link": "https://stackoverflow.com/questions/51130285/is-it-possible-to-access-the-protected-methods-outside-the-class-ruby", "title": "Is it possible to access the protected methods outside the class - ruby", "body": "<pre><code>class User    \n  def say_secret_with_self\n    self.secret\n  end\n\n  protected\n\n  def secret\n    \"secret\"\n  end\nend\n\nu = User.new\np u.say_secret_with_self   # =&gt; \"secret\"\n</code></pre>\n\n<p>I have heard that protected methods can be accessed only by inherited members. But the above is possible in ruby. Is it correct code?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "rspec-rails"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1530512488, "post_id": 51130047, "comment_id": 89244975, "body": "You have a typo in the Todo model, <code>validates :title, :created_by, presence: true</code> missing comma."}, {"owner": {"reputation": 57, "user_id": 9580483, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Daniel Daza", "link": "https://stackoverflow.com/users/9580483/daniel-daza"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1530512750, "post_id": 51130047, "comment_id": 89245083, "body": "Already fix the comma but thats not the mistake"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530513689, "post_id": 51130047, "comment_id": 89245428, "body": "Your output says &quot;5 examples&quot;, but i see only 3 in your code."}, {"owner": {"reputation": 57, "user_id": 9580483, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Daniel Daza", "link": "https://stackoverflow.com/users/9580483/daniel-daza"}, "edited": false, "score": 0, "creation_date": 1530542183, "post_id": 51130047, "comment_id": 89261172, "body": "3 from one model and 2 from this, but the problem is on this model"}, {"owner": {"reputation": 571, "user_id": 4759390, "user_type": "registered", "profile_image": "https://graph.facebook.com/839598759461592/picture?type=large", "display_name": "Artem Dorodovskyi", "link": "https://stackoverflow.com/users/4759390/artem-dorodovskyi"}, "edited": false, "score": 0, "creation_date": 1530567353, "post_id": 51130047, "comment_id": 89272181, "body": "Please read the <a href=\"https://github.com/thoughtbot/shoulda-matchers/issues/951\" rel=\"nofollow noreferrer\">issue in shoulda</a>"}], "answers": [{"tags": [], "owner": {"reputation": 571, "user_id": 4759390, "user_type": "registered", "profile_image": "https://graph.facebook.com/839598759461592/picture?type=large", "display_name": "Artem Dorodovskyi", "link": "https://stackoverflow.com/users/4759390/artem-dorodovskyi"}, "is_accepted": true, "score": 0, "last_activity_date": 1530567517, "creation_date": 1530567517, "answer_id": 51144054, "question_id": 51130047, "link": "https://stackoverflow.com/questions/51130047/rspec-for-presence-validation-not-working-in-rails-5/51144054#51144054", "title": "Rspec for presence validation not working in Rails 5", "body": "<p>This is the issue in <a href=\"https://github.com/thoughtbot/shoulda-matchers/issues/951\" rel=\"nofollow noreferrer\">shoulda-matchers</a>. You need to add to your <code>spec_helper.rb</code>:</p>\n\n<pre><code>RSpec.configure do |config|\n  config.include(Shoulda::Matchers::ActiveModel, type: :model)\n  config.include(Shoulda::Matchers::ActiveRecord, type: :model)\nend\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 9580483, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Daniel Daza", "link": "https://stackoverflow.com/users/9580483/daniel-daza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 0, "accepted_answer_id": 51144054, "answer_count": 1, "score": -1, "last_activity_date": 1530567517, "creation_date": 1530512162, "last_edit_date": 1530513662, "question_id": 51130047, "link": "https://stackoverflow.com/questions/51130047/rspec-for-presence-validation-not-working-in-rails-5", "title": "Rspec for presence validation not working in Rails 5", "body": "<h3>Model Todo</h3>\n\n<pre><code>class Todo &lt; ApplicationRecord\n  has_many :items, dependent: :destroy\n  validates :title, :created_by, presence: true\nend\n</code></pre>\n\n<h3>RSpecs</h3>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe Todo, type: :model do\n  it { should have_many(:items).dependent(:destroy) }\n  it { should validate_presence_of(:title) }\n  it { should validate_presence_of(:created_by) }\nend\n</code></pre>\n\n<p>When i run the command <code>bundle exec rspec</code>, i see:</p>\n\n<pre><code>Finished in 1.82 seconds (files took 0.97238 seconds to load)\n5 examples, 2 failures\n\nFailed examples:\n\nrspec ./spec/models/todo_spec.rb:8 # Todo should validate that :title cannot be empty/falsy\nrspec ./spec/models/todo_spec.rb:9 # Todo should validate that :created_by cannot be empty/falsy\n</code></pre>\n\n<p>Can anyone explain why is it failing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "rails-routing"], "answers": [{"tags": [], "owner": {"reputation": 742, "user_id": 5328443, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/MIICt.png?s=128&g=1", "display_name": "slehmann36", "link": "https://stackoverflow.com/users/5328443/slehmann36"}, "is_accepted": false, "score": 1, "last_activity_date": 1530679638, "creation_date": 1530679638, "answer_id": 51165928, "question_id": 51129391, "link": "https://stackoverflow.com/questions/51129391/error-disabling-sign-ups-for-devise-model-devise-rails-5-2/51165928#51165928", "title": "Error disabling sign-ups for Devise model - Devise | Rails 5.2", "body": "<p>Answer found:</p>\n\n<p>Routes needed to be configured like so (as can be found in <a href=\"https://stackoverflow.com/a/49228093/5328443\">this Stack Overflow answer</a>):</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>devise_for :admins, :skip =&gt; [:registrations], path: 'admins', controllers: { sessions: 'admins/sessions', registrations: 'admins/registrations' }\n\ndevise_scope :admin do\n  get 'admins/edit' =&gt; 'admins/registrations#edit', as: 'edit_admin_registration'\n  put 'admins' =&gt; 'admins/registrations#update', as: 'admin_registration'\nend\n</code></pre>\n"}], "owner": {"reputation": 742, "user_id": 5328443, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/MIICt.png?s=128&g=1", "display_name": "slehmann36", "link": "https://stackoverflow.com/users/5328443/slehmann36"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530679638, "creation_date": 1530508030, "last_edit_date": 1530532391, "question_id": 51129391, "link": "https://stackoverflow.com/questions/51129391/error-disabling-sign-ups-for-devise-model-devise-rails-5-2", "title": "Error disabling sign-ups for Devise model - Devise | Rails 5.2", "body": "<p>I'm working on a Rails 5.2 project with two Devise models (<code>Admin</code> and <code>User</code>). I've followed the suggestion on this <a href=\"https://stackoverflow.com/a/39780131/5328443\">Stack Overflow answer</a> to disable sign-ups for a Devise model without breaking Devise's <code>edit_admin_registration_path</code>.</p>\n\n<p>After applying the changes suggested in <code>routes.rb</code>, running <code>rails routes</code> shows the changes working as expected, however when going to edit an <code>Admin</code> (<code>edit_admin_registration_path</code>), i get the error:</p>\n\n<pre><code>NoMethodError in Admins::RegistrationsController#edit\nundefined method `validatable?' for nil:NilClass\n</code></pre>\n\n<p>I suspect the issue is that the linked answer was not using multiple Devise models with scoped views and controllers.</p>\n\n<p>Any ideas?</p>\n\n<p>I've added this to <code>routes.rb</code>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>devise_scope :admin do\n  get \"/sign_in\" =&gt; \"admins/sessions#new\" # custom path to login/sign_in\n  get \"/sign_up\" =&gt; \"admins/registrations#new\", as: \"new_admin_registration\" # custom path to sign_up/registration\nend\n\ndevise_for :admins, skip: [ :registrations ], path: 'admins', controllers: { sessions: 'admins/sessions', registrations: 'admins/registrations' }\n  as :admins do\n    get 'admins/edit' =&gt; 'admins/registrations#edit', as: 'edit_admin_registration'\n    put 'admins' =&gt; 'admins/registrations#update', as: 'admin_registration'\n  end\n</code></pre>\n\n<p>Form on view:</p>\n\n<pre><code>&lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name), method: :put) do |f| %&gt;\n  &lt;%= devise_error_messages! %&gt;\n\n  &lt;%= f.label :email %&gt;&lt;br /&gt;\n  &lt;%= f.email_field :email, autofocus: true, autocomplete: \"email\", class: \"form-control\" %&gt;\n\n  &lt;% if devise_mapping.confirmable? &amp;&amp; resource.pending_reconfirmation? %&gt;\n    &lt;div&gt;Currently waiting confirmation for: &lt;%= resource.unconfirmed_email %&gt;&lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;%= f.label :password %&gt; &lt;i&gt;(leave blank if you don't want to change it)&lt;/i&gt;&lt;br /&gt;\n  &lt;%= f.password_field :password, autocomplete: \"off\", class: \"form-control\" %&gt;\n  &lt;% if @minimum_password_length %&gt;\n    &lt;em&gt;&lt;%= @minimum_password_length %&gt; characters minimum&lt;/em&gt;\n  &lt;% end %&gt;\n\n  &lt;%= f.label :password_confirmation %&gt;&lt;br /&gt;\n  &lt;%= f.password_field :password_confirmation, autocomplete: \"off\", class: \"form-control\" %&gt;\n\n  &lt;%= f.label :current_password %&gt; &lt;i&gt;(we need your current password to confirm your changes)&lt;/i&gt;&lt;br /&gt;\n  &lt;%= f.password_field :current_password, autocomplete: \"off\", class: \"form-control\" %&gt;\n\n  &lt;%= f.submit \"Update\", class: \"btn btn-success\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1530503714, "post_id": 51128863, "comment_id": 89242659, "body": "<i>I want to fetch companies which carries at least one post</i>, actually, an INNER JOIN keyword would return the companies with posts associated, you can append a distinct statement to get non-repeated records. Can you explain further what you&#39;re trying to do?"}, {"owner": {"reputation": 399, "user_id": 7445709, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8c9967ea3a9aa233dd5835e1fceb7455?s=128&d=identicon&r=PG&f=1", "display_name": "jesica", "link": "https://stackoverflow.com/users/7445709/jesica"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1530503882, "post_id": 51128863, "comment_id": 89242689, "body": "I don&#39;t want to fetch company which post record zero based on post <code>scope</code> like <code>notClosed</code> and <code>published</code> @SebastianPalma"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1530504028, "post_id": 51128863, "comment_id": 89242717, "body": "So, try <code>Company.joins(:posts).distinct.merge(Post.notClosed)</code>."}, {"owner": {"reputation": 399, "user_id": 7445709, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8c9967ea3a9aa233dd5835e1fceb7455?s=128&d=identicon&r=PG&f=1", "display_name": "jesica", "link": "https://stackoverflow.com/users/7445709/jesica"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1530504800, "post_id": 51128863, "comment_id": 89242834, "body": "Hey @SebastianPalma, maybe it&#39;s working see the query <i><code>SELECT  DISTINCT &quot;companies&quot;.* FROM &quot;companies&quot; INNER JOIN &quot;posts&quot; ON &quot;posts&quot;.&quot;company_id&quot; = &quot;companies&quot;.&quot;id&quot; WHERE &quot;companies&quot;.&quot;company_type&quot; = ? AND &quot;posts&quot;.&quot;closed&quot; = ? AND &quot;posts&quot;.&quot;published&quot; = ? LIMIT ?  [[&quot;company_type&quot;, &quot;Private&quot;], [&quot;closed&quot;, &quot;f&quot;], [&quot;published&quot;, &quot;t&quot;], [&quot;LIMIT&quot;, 11]]</code></i>, can you please suggest me about speed performance issue because my database is only posts over one million, I think you can post this as a answer."}], "answers": [{"comments": [{"owner": {"reputation": 399, "user_id": 7445709, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8c9967ea3a9aa233dd5835e1fceb7455?s=128&d=identicon&r=PG&f=1", "display_name": "jesica", "link": "https://stackoverflow.com/users/7445709/jesica"}, "edited": false, "score": 0, "creation_date": 1530504111, "post_id": 51128884, "comment_id": 89242730, "body": "My database is only posts over one million"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1530504139, "post_id": 51128884, "comment_id": 89242733, "body": "<code>where(id: Post.published.select(:company_id))</code> would serve you better, that would do a subquery inside the database rather than pulling a bunch of data out of the database and then sending it back. It also neatly avoids duplicates that JOINs can introduce."}, {"owner": {"reputation": 399, "user_id": 7445709, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8c9967ea3a9aa233dd5835e1fceb7455?s=128&d=identicon&r=PG&f=1", "display_name": "jesica", "link": "https://stackoverflow.com/users/7445709/jesica"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1530504659, "post_id": 51128884, "comment_id": 89242804, "body": "Hello Sir @muistooshort, I have several condition like <code>type: &quot;private&quot;</code>, <code>notClosed</code>, <code>published</code> &amp; not <code>expired</code> how the query based on that condition, can you please suggest me."}, {"owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1530504757, "post_id": 51128884, "comment_id": 89242825, "body": "@muistooshort TIL, ty for the comment."}], "tags": [], "owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "is_accepted": false, "score": -1, "last_activity_date": 1530503405, "last_edit_date": 1530503405, "creation_date": 1530503047, "answer_id": 51128884, "question_id": 51128863, "link": "https://stackoverflow.com/questions/51128863/how-to-fetch-parents-based-on-their-childs-records/51128884#51128884", "title": "How to fetch parents based on their child&#39;s records", "body": "<p>The explicit Rails way: get the IDs of companies from the <code>Post</code> scope then query on those IDs:</p>\n\n<pre><code>Company.where(id: Post.published.pluck(:company_id).uniq)\n</code></pre>\n\n<p>Note, however, this might be expensive if you have a huge amount of posts. There could be a more efficient way using SQL.</p>\n"}, {"tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": false, "score": 0, "last_activity_date": 1530504011, "creation_date": 1530504011, "answer_id": 51128966, "question_id": 51128863, "link": "https://stackoverflow.com/questions/51128863/how-to-fetch-parents-based-on-their-childs-records/51128966#51128966", "title": "How to fetch parents based on their child&#39;s records", "body": "<pre><code>published_post_companies = Company.joins(:posts).distinct.merge(Post.published)\nnotClosed_post_companies = Company.joins(:posts).distinct.merge(Post.notClosed)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 399, "user_id": 7445709, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8c9967ea3a9aa233dd5835e1fceb7455?s=128&d=identicon&r=PG&f=1", "display_name": "jesica", "link": "https://stackoverflow.com/users/7445709/jesica"}, "edited": false, "score": 0, "creation_date": 1530505020, "post_id": 51129003, "comment_id": 89242878, "body": "It&#39;s execution time is to long"}, {"owner": {"reputation": 13635, "user_id": 4494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5981dd7d253ecf61590502eeb183ee7b?s=128&d=identicon&r=PG", "display_name": "Matthias Winkelmann", "link": "https://stackoverflow.com/users/4494/matthias-winkelmann"}, "reply_to_user": {"reputation": 399, "user_id": 7445709, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8c9967ea3a9aa233dd5835e1fceb7455?s=128&d=identicon&r=PG&f=1", "display_name": "jesica", "link": "https://stackoverflow.com/users/7445709/jesica"}, "edited": false, "score": 0, "creation_date": 1530519049, "post_id": 51129003, "comment_id": 89247885, "body": "Do you have database indices on all the relevant columns, i. e. company.company_type, post,company_id, post.closed, post.published?"}], "tags": [], "owner": {"reputation": 13635, "user_id": 4494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5981dd7d253ecf61590502eeb183ee7b?s=128&d=identicon&r=PG", "display_name": "Matthias Winkelmann", "link": "https://stackoverflow.com/users/4494/matthias-winkelmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1530504482, "creation_date": 1530504482, "answer_id": 51129003, "question_id": 51128863, "link": "https://stackoverflow.com/questions/51128863/how-to-fetch-parents-based-on-their-childs-records/51129003#51129003", "title": "How to fetch parents based on their child&#39;s records", "body": "<p>This will get you all Companies (once) with at least one post that's \"not closed\":</p>\n\n<pre><code>Company.includes(:posts).joins(:posts).where(company_type: \"Private\").merge(Post.notClosed)\n</code></pre>\n"}], "owner": {"reputation": 399, "user_id": 7445709, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8c9967ea3a9aa233dd5835e1fceb7455?s=128&d=identicon&r=PG&f=1", "display_name": "jesica", "link": "https://stackoverflow.com/users/7445709/jesica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1530504482, "creation_date": 1530502825, "last_edit_date": 1530503581, "question_id": 51128863, "link": "https://stackoverflow.com/questions/51128863/how-to-fetch-parents-based-on-their-childs-records", "title": "How to fetch parents based on their child&#39;s records", "body": "<p>I have two models like </p>\n\n<p>company.rb</p>\n\n<pre><code>class Company &lt; ApplicationRecord\n     has_many :posts\nend\n</code></pre>\n\n<p>post.rb</p>\n\n<pre><code>class Post &lt; ApplicationRecord\n    belongs_to :company\n\n    scope :notClosed, -&gt; {where(closed: false)}\n    scope :published, -&gt; {where(published: true)}\nend\n</code></pre>\n\n<p>I want to fetch companies which carries at least one post with matching post <code>scope</code></p>\n\n<p>Currently my queries is </p>\n\n<pre><code>Company.where(company_type: \"Private\").all\n</code></pre>\n\n<p>It's return all companies but how to modify this query for my needs.</p>\n"}, {"tags": ["ruby", "data-structures", "time-complexity"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1530505044, "post_id": 51128366, "comment_id": 89242881, "body": "Please post the problem itself into the question. Questions should be as independent as possible; additional data or different presentation is welcome on links, but the question should be understandable without them."}, {"owner": {"reputation": 346, "user_id": 1601309, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fe6f347e18a97cfc2aebbd94a975395?s=128&d=identicon&r=PG", "display_name": "Kanahaiya", "link": "https://stackoverflow.com/users/1601309/kanahaiya"}, "edited": false, "score": 0, "creation_date": 1554716564, "post_id": 51128366, "comment_id": 97839816, "body": "See this <a href=\"https://stackoverflow.com/a/55569655/1601309\">thread</a> for run time analysis of this problem. <a href=\"https://stackoverflow.com/a/55569655/1601309\">stackoverflow.com/a/55569655/1601309</a>"}], "answers": [{"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 4, "last_activity_date": 1530505739, "creation_date": 1530505739, "answer_id": 51129139, "question_id": 51128366, "link": "https://stackoverflow.com/questions/51128366/ruby-complexity-time-explaination/51129139#51129139", "title": "Ruby Complexity / Time explaination", "body": "<p>Your code is <code>O(m * n)</code> as you have a nested loop to update the array for each entry.</p>\n\n<p>The working code is <code>O(m + n)</code>: it never really stores the array, it stores the delta array, the array of changes that makes it possible to reconstruct the array. In your first example, it would store:</p>\n\n<pre><code>0    0    0    0    0   0\n+100 0    -100 0    0   0\n+100 +100 -100 0    0   -100\n+100 +100 0    0   -100 -100\n</code></pre>\n\n<p>This requires only a loop of <code>m</code> iterations, no nested loops; then you need another loop of <code>n</code> iterations to run through the array, keep running total, and identify the maximum of it.</p>\n"}], "owner": {"reputation": 181, "user_id": 4794419, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6a9ece4d31badd2d176e02696cf6a152?s=128&d=identicon&r=PG&f=1", "display_name": "MattEm", "link": "https://stackoverflow.com/users/4794419/mattem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530505739, "creation_date": 1530497445, "question_id": 51128366, "link": "https://stackoverflow.com/questions/51128366/ruby-complexity-time-explaination", "title": "Ruby Complexity / Time explaination", "body": "<p>I am using HackerRank to improve my ruby skills. I am on the Data Structures - Array Manipulation problem: <a href=\"https://www.hackerrank.com/challenges/crush/problem\" rel=\"nofollow noreferrer\">https://www.hackerrank.com/challenges/crush/problem</a></p>\n\n<p>My solution is listed first, a supposedly \"correct\" solution I haven't been able to implement is listed last. My solution works for all test cases except **VERY ** large numbers, it fails due to timeout. I know this is because of a loop, but can someone offer a different solution, and explain why theirs works?</p>\n\n<p>EXPLAINATION OF PROBLEM:</p>\n\n<p>Sample Input</p>\n\n<pre><code>5 3\n1 2 100\n2 5 100\n3 4 100\n#n=5 m=3, then following numbers leftIndex=1 rightIndex=3 sum=100 and so on\n</code></pre>\n\n<p>Sample Output</p>\n\n<pre><code>200\n</code></pre>\n\n<p>Explanation</p>\n\n<pre><code>After the first update list will be 100 100 0 0 0. \nAfter the second update list will be 100 200 100 100 100. \nAfter the third update list will be 100 200 200 200 100. \nThe required answer will be 200. \n</code></pre>\n\n<p>OR</p>\n\n<p>Explain how the why the bottom solution can work without looping?</p>\n\n<pre><code>#Problem Data Set, my solution times out for the listed data set\n\n10000000 100000\n[\n [1400906,9889280,90378],\n [6581237,9872072,87106],\n [4386373,9779851,52422],\n [198648,4373818,5289]\n]\n# For this problem, variables will look like:\nn = 10000000\nm = 100000\nq = [[1400906,9889280,90378],[6581237,9872072,87106],[4386373,9779851,52422],[198648,4373818,5289]]\n\n\ndef arrayManipulation(n, q)\n  arr = Array.new(n,0)\n  max = 0\n  q.size.times do |i|\n    left, right, value = q[i][0],q[i][1],q[i][2]\n    left -= 1\n    (left...right).each do |j|\n      arr[j] += value\n      max = arr[j] if max &lt; arr[j]\n    end\n  end\n  return max\nend\n# this times out on HackerRank, please explain better solution, \n#or why the bottom solution works!\n\nresult = arrayManipulation n, queries\n</code></pre>\n\n<p>Working SOlution on Discussion board</p>\n\n<pre><code>N, M = gets.chomp.split(' ').map(&amp;:to_i)\n\n# create array of zeros of length N + 1\narr = Array.new(N + 1, 0)\n\nM.times do\n  # cycle through and get the inputs\n  start, finish, value = gets.chomp.split(' ').map(&amp;:to_i)\n\n  # increment value at start of sequence\n  arr[start - 1] += value\n\n  # decrement value at first position after sequence\n  arr[finish] -= value\nend\n\ntmp = 0\nmax = 0\n\narr.each do |value|\n  # step through summing array\n  tmp += value\n\n  # capture the max value of tmp\n  max = tmp if max &lt; tmp\nend\n\nputs max\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 1723, "user_id": 4735914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998392dbbbd8061d2ef13ea60955633?s=128&d=identicon&r=PG&f=1", "display_name": "jdgray", "link": "https://stackoverflow.com/users/4735914/jdgray"}, "is_accepted": true, "score": 6, "last_activity_date": 1530493824, "creation_date": 1530493824, "answer_id": 51128120, "question_id": 51128103, "link": "https://stackoverflow.com/questions/51128103/rails-routes-do-not-contain-id-in-that/51128120#51128120", "title": "Rails routes do not contain id in that", "body": "<p>It's because your are using <a href=\"http://guides.rubyonrails.org/routing.html#singular-resources\" rel=\"noreferrer\">singular resources</a>:</p>\n\n<blockquote>\n  <p>Sometimes, you have a resource that clients always look up without referencing an ID.</p>\n</blockquote>\n\n<p>Change your routes to use <a href=\"http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions\" rel=\"noreferrer\">resources</a> for certain routes to contain the <code>id</code>:</p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :report_templates\nend\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 5180410, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/0afc1572a56d449f2ec157c78e648946?s=128&d=identicon&r=PG&f=1", "display_name": "elkun49", "link": "https://stackoverflow.com/users/5180410/elkun49"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 51128120, "answer_count": 1, "score": 0, "last_activity_date": 1530493824, "creation_date": 1530493555, "question_id": 51128103, "link": "https://stackoverflow.com/questions/51128103/rails-routes-do-not-contain-id-in-that", "title": "Rails routes do not contain id in that", "body": "<p>I use rails 5 and setting route, type rake routes in console and result is:</p>\n\n<pre><code>Prefix Verb   URI Pattern                      Controller#Action\nnew_report_templates GET    /report_templates/new(.:format)  report_templates#new\nedit_report_templates GET    /report_templates/edit(.:format) report_templates#edit\nreport_templates GET    /report_templates(.:format)      report_templates#show\n                  PATCH  /report_templates(.:format)      report_templates#update\n                  PUT    /report_templates(.:format)      report_templates#update\n                  DELETE /report_templates(.:format)      report_templates#destroy\n                  POST   /report_templates(.:format)      report_templates#create    \n</code></pre>\n\n<p>It's so weird to see that result routes do not have id in url template. My route:</p>\n\n<pre><code>Rails.application.routes.draw do\n  resource :report_templates\nend\n</code></pre>\n\n<p>I use gem 'rails', '~> 5.1.6'. So my question is: why my result routes do not contain id in that ?</p>\n"}, {"tags": ["ruby", "module"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1530511497, "post_id": 51128097, "comment_id": 89244614, "body": "I pasted your exact code, without the <code>include</code> line, then ran <code>Car.testing</code> and it returned <code>&#39;Helloo!&#39;</code> as expected. Can you show your failing attempt?"}, {"owner": {"reputation": 6268, "user_id": 503831, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/992c174c48fa4dadacb03854dbf7ade8?s=128&d=identicon&r=PG", "display_name": "Arnold Roa", "link": "https://stackoverflow.com/users/503831/arnold-roa"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1530587854, "post_id": 51128097, "comment_id": 89276525, "body": "Yes, <code>Car.testing</code> works but <code>Car::HOLA</code> does not."}], "answers": [{"tags": [], "owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1530517874, "creation_date": 1530517874, "answer_id": 51131381, "question_id": 51128097, "link": "https://stackoverflow.com/questions/51128097/extend-a-module-with-submodule-methods-and-constants/51131381#51131381", "title": "extend a module with submodule methods and constants", "body": "<p>As per the description shared, it seems like you want to access the nested module constants and methods in some_other_class.</p>\n\n<p>This is the module definition as mentioned in the post.</p>\n\n<pre><code>module Car\n module Container\n  HOLA = 'Helloo!'\n  def testing\n   HOLA\n  end\n end\nend\n</code></pre>\n\n<p>Now Suppose , that you want to use this method in some class say Vehicle</p>\n\n<pre><code>require 'car' #this is the module file since it is residing in some other file\n\nclass Vehicle\n  extend Car\n\n  def test\n    Car.testing\n  end\nend\n</code></pre>\n\n<p>Now calling Vehicle.new.test will print </p>\n\n<pre><code>\"Helloo!\"\n</code></pre>\n\n<p>Hope it helps!!</p>\n"}], "owner": {"reputation": 6268, "user_id": 503831, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/992c174c48fa4dadacb03854dbf7ade8?s=128&d=identicon&r=PG", "display_name": "Arnold Roa", "link": "https://stackoverflow.com/users/503831/arnold-roa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530587898, "creation_date": 1530493458, "last_edit_date": 1530587898, "question_id": 51128097, "link": "https://stackoverflow.com/questions/51128097/extend-a-module-with-submodule-methods-and-constants", "title": "extend a module with submodule methods and constants", "body": "<p>I want to be able to extend a module with the methods and constants of a submodule.</p>\n\n<p>If I use <code>extend</code> I receive undefined constant. </p>\n\n<p>The only way I made it work is using both <code>extend</code> and <code>include</code>. I tried also using self.method on submodule.</p>\n\n<pre><code>module Car\n  module Container\n    HOLA = 'Helloo!'\n    def testing\n      HOLA\n    end\n  end\n  include Container\n  extend Container\nend\n</code></pre>\n\n<p>So this both should work:</p>\n\n<pre><code>Car.testing # Hello!\nCar::HOLA   # Hello!\n</code></pre>\n\n<p>I guess this is a code smell..., but what other ways to make it work you know?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530514255, "post_id": 51127266, "comment_id": 89245649, "body": "Try running the same thing <code>Comment.unread_by(user).count</code> in <code>rails console</code>. See if it gives the expected output."}, {"owner": {"reputation": 11, "user_id": 6538771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/554f4ea837e54414e9288e4b65ecdf66?s=128&d=identicon&r=PG", "display_name": "Sunny", "link": "https://stackoverflow.com/users/6538771/sunny"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530616515, "post_id": 51127266, "comment_id": 89289673, "body": "It doesnt return anything... I am kinda thinking there is something i havent added to my database that wasnt added during unread gem generated some migration files..."}, {"owner": {"reputation": 11, "user_id": 6538771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/554f4ea837e54414e9288e4b65ecdf66?s=128&d=identicon&r=PG", "display_name": "Sunny", "link": "https://stackoverflow.com/users/6538771/sunny"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530616593, "post_id": 51127266, "comment_id": 89289718, "body": "Could there be any gem you have used in the past or any working online source i can use to just track total number of unread comments made on a post belonging to a current_user?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530616686, "post_id": 51127266, "comment_id": 89289770, "body": "<i>&quot;It doesnt return anything.&quot;</i> - you can check the database query it fires."}, {"owner": {"reputation": 11, "user_id": 6538771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/554f4ea837e54414e9288e4b65ecdf66?s=128&d=identicon&r=PG", "display_name": "Sunny", "link": "https://stackoverflow.com/users/6538771/sunny"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530617109, "post_id": 51127266, "comment_id": 89290026, "body": "FROM Comments &#39;LEFT JOIN read_marks ON read_marks.readable_type = &quot;Message&quot;                     AND read_marks.readable_id = comments.id                     AND read_marks.reader_id = 1                     AND read_marks.reader_type = &#39;User&#39;                     AND read_marks.timestamp &gt;= messages.created_at WHERE read_marks.id IS NULL"}, {"owner": {"reputation": 11, "user_id": 6538771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/554f4ea837e54414e9288e4b65ecdf66?s=128&d=identicon&r=PG", "display_name": "Sunny", "link": "https://stackoverflow.com/users/6538771/sunny"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1530617267, "post_id": 51127266, "comment_id": 89290116, "body": "From <a href=\"https://github.com/ledermann/unread\" rel=\"nofollow noreferrer\">github.com/ledermann/unread</a> it suppose to have at the end  AND messages.created_at &gt; &#39;2010-10-20 08:50:00&#39; Mine is not generating that query"}], "owner": {"reputation": 11, "user_id": 6538771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/554f4ea837e54414e9288e4b65ecdf66?s=128&d=identicon&r=PG", "display_name": "Sunny", "link": "https://stackoverflow.com/users/6538771/sunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1530622920, "creation_date": 1530481855, "last_edit_date": 1530622920, "question_id": 51127266, "link": "https://stackoverflow.com/questions/51127266/how-do-i-count-unread-comments-using-unread-ruby-gem", "title": "How do I count unread comments using &quot;Unread&quot; Ruby gem?", "body": "<p><em>comments_helper.rb</em>:</p>\n\n<pre><code>module CommentsHelper\n  def unread_comments_count\n    @comments_count = Comment.unread_by(user).count\n  end\nend\n</code></pre>\n\n<p>In my <code>ApplicationController</code>, I defined <code>user</code>:</p>\n\n<pre><code>def user\n  @user = User.find_by(params[:user_id])\nend\n</code></pre>\n\n<p>I could have used <code>current_user</code>, but the result I got (with that) is total number of comments in my database. So, I thought I should use <code>user</code>. But it didn't work.</p>\n\n<p><em>view</em>:</p>\n\n<pre><code>&lt;%= unread_comments_count %&gt;\n</code></pre>\n\n<p>However, the result is still total number of all the comments made on all the posts by all users. I can't actually figure out what I am doing wrong because I have carefully done everything right in my Models as guided by the gem.</p>\n\n<p>I would appreciate any clue to fix this.</p>\n\n<p><strong>Update</strong></p>\n\n<p>The query it generates is:</p>\n\n<pre><code> SELECT COUNT(*) FROM \"comments\" 'LEFT JOIN read_marks ON read_marks.readable_type = \"Message\" AND read_marks.readable_id = comments.id AND read_marks.reader_id = 1 AND read_marks.reader_type = 'User' AND read_marks.timestamp &gt;= comments.created_at WHERE read_marks.id IS NULL\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 455, "user_id": 9572605, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214151296270813/picture?type=large", "display_name": "Philippe Haumesser", "link": "https://stackoverflow.com/users/9572605/philippe-haumesser"}, "edited": false, "score": 0, "creation_date": 1530476920, "post_id": 51126725, "comment_id": 89238471, "body": "To complete I m connected with a user and entreprise is not create in DB"}, {"owner": {"reputation": 2031, "user_id": 670339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942f0170639d3fd6d2bd3a2ce057e3e7?s=128&d=identicon&r=PG", "display_name": "Marc Talbot", "link": "https://stackoverflow.com/users/670339/marc-talbot"}, "edited": false, "score": 0, "creation_date": 1530486776, "post_id": 51126725, "comment_id": 89240177, "body": "The model will have an errors array on it if it has failed validation, and you can access this in your view, for example by adding a div on your form in which you display the errors if there are any."}, {"owner": {"reputation": 1140, "user_id": 3248148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CLgGs.jpg?s=128&g=1", "display_name": "praaveen V R", "link": "https://stackoverflow.com/users/3248148/praaveen-v-r"}, "edited": false, "score": 0, "creation_date": 1530525348, "post_id": 51126725, "comment_id": 89251334, "body": "@PhilippeHaumesser what does the shared/message contain? for error message?"}], "answers": [{"tags": [], "owner": {"reputation": 1140, "user_id": 3248148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CLgGs.jpg?s=128&g=1", "display_name": "praaveen V R", "link": "https://stackoverflow.com/users/3248148/praaveen-v-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1530522195, "creation_date": 1530522195, "answer_id": 51132485, "question_id": 51126725, "link": "https://stackoverflow.com/questions/51126725/saving-record-not-working-without-showing-any-error-messages-rails/51132485#51132485", "title": "Saving record not working without showing any error messages - Rails", "body": "<p>In your view for new entreprise</p>\n\n<pre><code>&lt;% if @entreprise.errors.any? %&gt;\n    &lt;% @entreprise.errors.full_messages.each do |message| %&gt;\n      &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 455, "user_id": 9572605, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214151296270813/picture?type=large", "display_name": "Philippe Haumesser", "link": "https://stackoverflow.com/users/9572605/philippe-haumesser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530522195, "creation_date": 1530476305, "last_edit_date": 1530514990, "question_id": 51126725, "link": "https://stackoverflow.com/questions/51126725/saving-record-not-working-without-showing-any-error-messages-rails", "title": "Saving record not working without showing any error messages - Rails", "body": "<p>I've an <code>Entreprise</code> model in which belongs to an owner identified by column <code>user_id</code>.</p>\n\n<p>When i try to create a blank entreprise, i see no error messages. So I don't know how to fix it. Need to see error messages like \"name is blank\", etc...</p>\n\n<p>This is my controller code:</p>\n\n<pre><code>class EntreprisesController &lt; ApplicationController\n  before_action :authenticate_user! # pour acceder il faut etre identifier\n\n  authorize_resource # utilisation de cancancan pour les droits -  voir models/ability.rb\n\n  def new\n    @entreprise = Entreprise.new\n    @entreprise.build_owner\n  end\n\n  def create\n    @entreprise = Entreprise.new(entreprise_params)\n    if @entreprise.save\n      redirect_to entreprise_path, notice: \"creation faite\"\n    else\n      render \"entreprises/new\"\n    end\n  end\n\n  private\n\n  def entreprise_params    \n    params.require(:entreprise).permit(:subdomain, :name, :country, :town, :owner_id, :zipcode, :street, :state, :taxconfig )\n  end    \nend\n</code></pre>\n\n<p>My Entreprise model:</p>\n\n<pre><code>class Entreprise &lt; ApplicationRecord\n  RESTRICTED_SUBDOMAINS = %w(www)\n\n  belongs_to :owner, class_name: 'User', foreign_key: :user_id\n\n  validates :owner_id, presence: true\n\n  validates :name, presence: true, length: {maximum: 50}, uniqueness: { case_sensitive: false},\n            format: { with: /\\A[\\w\\-]+\\Z/i, message: 'contains invalid characters'}\n  validates :town, presence: true\n  validates :country, presence: true\n  validates :zipcode, presence: true\n\n  validates :subdomain,\n            uniqueness: { case_sensitive: false},\n            format: { with: /\\A[\\w\\-]+\\Z/i, allow_blank: true, message: 'contains invalid characters'},\n            exclusion: { in: RESTRICTED_SUBDOMAINS, message: 'restricted'}\n\n  before_validation :downcase_subdomain\n  before_validation :downcase_name\n\n  has_many :users\n\n  private\n\n  def downcase_name\n    self.name = name.try(:downcase)\n  end\n\n  def downcase_subdomain\n    self.subdomain = subdomain.try(:downcase)\n  end\nend\n</code></pre>\n\n<p>and User model:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  ROLES = %i[user banned admin] # defini les roles possibles pour cancancan\n\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n  validates :fullname, presence: true, length: {maximum: 50}\n  validates :first_name, presence: true\n  validates :last_name, presence: true\n  validates :role, presence: true\n\n  has_attached_file :avatar, :style =&gt; { :medium =&gt; \"300x300\", :thumb =&gt; \"100x100\"},\n                    :default_url =&gt; \"/assets/default_image.jpeg\"\n  validates_attachment_content_type :avatar, :content_type =&gt; /\\Aimage\\/.*\\Z/\n\n  has_many :account, inverse_of: :owner\nend\n</code></pre>\n\n<p>and my view for new entreprise:</p>\n\n<pre><code>&lt;%= form_for @entreprise do |f| %&gt;\n  &lt;%= render 'shared/message' %&gt;\n\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.label :subdomain %&gt;\n      &lt;%= f.text_field :subdomain %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.label :name, class: 'form-label' %&gt;&lt;br /&gt;\n      &lt;%= f.text_field :name, autofocus: true, autocomplete: \"Nom\",class: 'form-control' %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-6\"&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.label :street, class: 'form-label' %&gt;&lt;br /&gt;\n        &lt;%= f.text_field :street, autofocus: true, autocomplete: \"Adress\",class: 'form-control' %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"col-md-6\"&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.label :town, class: 'form-label' %&gt;&lt;br /&gt;\n        &lt;%= f.text_field :town, autofocus: true, autocomplete: \"Ville\",class: 'form-control' %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-6\"&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.label :state, class: 'form-label' %&gt;&lt;br /&gt;\n        &lt;%= f.text_field :state, autofocus: true, autocomplete: \"Etat\",class: 'form-control' %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"col-md-6\"&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.label :country, class: 'form-label' %&gt;&lt;br /&gt;\n        &lt;%= f.text_field :country, autofocus: true, autocomplete: \"Pays\",class: 'form-control' %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-6\"&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.label :zipcode, class: 'form-label' %&gt;&lt;br /&gt;\n        &lt;%= f.text_field :zipcode, autofocus: true, autocomplete: \"Zipcode\",class: 'form-control' %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-6\"&gt;\n      &lt;div class=\"actions\"&gt;\n        &lt;%= f.submit t('entreprise.new.title'), class: \"btn btn-normal btn-block\" %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Thanks for help.</p>\n"}, {"tags": ["ruby", "math", "substring", "modulo", "fizzbuzz"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1530477321, "post_id": 51126534, "comment_id": 89238544, "body": "Excellent? Don&#39;t you mean terrible? For the FizzBuzz challenged, perhaps remind them of the objective."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1530478897, "post_id": 51126534, "comment_id": 89238885, "body": "@CarySwoveland: very clever? Yes. Unacceptable anywhere except codegolf and mind-twisting puzzles? Big yes."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1530556110, "post_id": 51126534, "comment_id": 89267861, "body": "...but good calisthenics for the little gray cells."}, {"owner": {"reputation": 504, "user_id": 5282337, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/J5BT7.jpg?s=128&g=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/5282337/fred"}, "edited": false, "score": 0, "creation_date": 1530567270, "post_id": 51126534, "comment_id": 89272157, "body": "Many thanks - high quality answers. I am now digging into modular exponentiation."}], "answers": [{"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 2, "last_activity_date": 1530509592, "last_edit_date": 1530509592, "creation_date": 1530478490, "answer_id": 51126952, "question_id": 51126534, "link": "https://stackoverflow.com/questions/51126534/fizzbuzz-ruby-one-liner/51126952#51126952", "title": "FizzBuzz Ruby one-liner", "body": "<p>Quite tricky.</p>\n\n<p>Modulus is a periodic function. \nYou can get more periodic function with the same schema, changing the exponent (k) and divisor (h):</p>\n\n<pre><code>y = x**k % h\n</code></pre>\n\n<p>Or just see the x,y pairs for the case:</p>\n\n<pre><code>h = 4 # exponent\nk = -15 # divisor\n\nxy = []\n1.upto 100 do |n|\n  i= n**h % k\n  xy &lt;&lt; [n, i]\nend\np xy\n</code></pre>\n\n<p>The periodicity is evident choosing a basic example of <code>y = x % 2</code>: <code>k = 1</code> and <code>h = 2</code>.\nYou get a series of <code>1, 0, 1, 0, 1, ...</code></p>\n\n<p>To visualise the function used in this case, you can plot in ruby for example using gnuplot gem.</p>\n\n<pre><code>require 'gnuplot' \n\nGnuplot.open do |gp|\n  Gnuplot::Plot.new( gp ) do |plot|\n\n    plot.title  \"Periodic function for FizzBuzz\"\n\n    x = (0..100).collect { |v| v }\n    p y = x.collect { |v| v ** 4 % -15 }\n\n    plot.data &lt;&lt; Gnuplot::DataSet.new( [x, y] ) do |ds|\n      ds.with = \"linespoints\"\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 7, "last_activity_date": 1530489581, "creation_date": 1530489581, "answer_id": 51127839, "question_id": 51126534, "link": "https://stackoverflow.com/questions/51126534/fizzbuzz-ruby-one-liner/51127839#51127839", "title": "FizzBuzz Ruby one-liner", "body": "<p>I don't know how they discovered to raise to the fourth power, but the -15 is because FizzBuzz deals with multiples of 3 or multiples of 5 or multiples of both 3 and 5 (ie, multiples of 15)...then negating it ends up working with negative indices quite well. We can see that it works with <a href=\"https://en.wikipedia.org/wiki/Modular_exponentiation\" rel=\"noreferrer\">Modular Exponentiation</a>. The <strong>Memory-efficient method</strong> section there says:</p>\n\n<blockquote>\n  <p>c mod m = (a \u22c5 b) mod m<br>\n  c mod m = [(a mod m) \u22c5 (b mod m)] mod m</p>\n</blockquote>\n\n<p>In our case, the <em>c</em> is our <em>n</em>, so we have</p>\n\n<pre><code>c ** 4 % m\n</code></pre>\n\n<p>using the <a href=\"https://www.merriam-webster.com/dictionary/law%20of%20exponents\" rel=\"noreferrer\">law of exponents</a>, we know that <code>(c ** e1) * (c ** e2) = c ** (e1 + e2)</code>, so <code>c ** 4 = (c ** 2) * (c ** 2)</code>, so we now have an <code>a</code> and a <code>b</code>, which are both <code>c ** 2</code>. Thus:</p>\n\n<pre><code>(c ** 4) % m = ((c ** 2) * (c ** 2)) % m\n             = (((c ** 2) % m) * ((c ** 2) % m)) % m\n             = (((c ** 2) % m) ** 2) % m\n</code></pre>\n\n<p>and following the same steps, again:</p>\n\n<pre><code>(c ** 2) % m = (c * c) % m\n             = ((c % m) * (c % m)) % m\n             = ((c % m) ** 2) % m\n</code></pre>\n\n<p>and finally:</p>\n\n<pre><code>(c ** 4) % m = ((((c % m) ** 2) % m) ** 2) % m\n</code></pre>\n\n<p>When <code>m = -15</code>, the only values for <code>c % m</code> are <code>(-14..0)</code> and we can build a simple table to look at. Since we only ever operate on the result of a modulo, we only need to be able to prove these 15 numbers work:</p>\n\n<pre><code>c%m    **2     %m    **2     %m\n-14 =&gt; 196 =&gt; -14 =&gt; 196 =&gt; -14\n-13 =&gt; 169 =&gt; -11 =&gt; 121 =&gt; -14\n-12 =&gt; 144 =&gt; -06 =&gt;  36 =&gt; -09\n-11 =&gt; 121 =&gt; -14 =&gt; 196 =&gt; -14\n-10 =&gt; 100 =&gt; -05 =&gt;  25 =&gt; -05\n-09 =&gt;  81 =&gt; -09 =&gt;  81 =&gt; -09\n-08 =&gt;  64 =&gt; -11 =&gt; 121 =&gt; -14\n-07 =&gt;  49 =&gt; -11 =&gt; 121 =&gt; -14\n-06 =&gt;  36 =&gt; -09 =&gt;  81 =&gt; -09\n-05 =&gt;  25 =&gt; -05 =&gt;  25 =&gt; -05\n-04 =&gt;  16 =&gt; -14 =&gt; 196 =&gt; -14\n-03 =&gt;   9 =&gt; -06 =&gt;  36 =&gt; -09\n-02 =&gt;   4 =&gt; -11 =&gt; 121 =&gt; -14\n-01 =&gt;   1 =&gt; -14 =&gt; 196 =&gt; -14\n 00 =&gt;   0 =&gt;  00 =&gt;   0 =&gt;  00\n</code></pre>\n\n<p>Now, looking at our table, the values for all multiples of 3 are <code>-09</code>, the values for all multiples of 5 are <code>-05</code>, and things that are multiples of 3 and 5 are set to <code>00</code>; everything else is <code>-14</code> (If we had used 15 instead of -15, we'd have 6, 10, 0, and 1, respectively, and would need a look up to turn that into string indices). Plugging those in for the start parameter of <a href=\"https://ruby-doc.org/core/String.html#method-i-5B-5D\" rel=\"noreferrer\"><code>String#[]</code></a> with the string <code>'FizzBuzz '</code> gives us:</p>\n\n<pre><code>'FizzBuzz '[-9] # =&gt; 'F'\n'FizzBuzz '[-5] # =&gt; 'B'\n'FizzBuzz '[0]  # =&gt; 'F'\n'FizzBuzz '[-14]# =&gt; nil\n</code></pre>\n\n<p>and adding 13 to those numbers to get the length:</p>\n\n<pre><code>'FizzBuzz '[-9, 4]   # =&gt; \"Fizz\"\n'FizzBuzz '[-5, 8]   # =&gt; \"Buzz \"\n'FizzBuzz '[0, 13]   # =&gt; \"FizzBuzz \"\n'FizzBuzz '[-14, -1] # =&gt; nil\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6119, "user_id": 165753, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/w6iBN.jpg?s=128&g=1", "display_name": "dimid", "link": "https://stackoverflow.com/users/165753/dimid"}, "is_accepted": false, "score": 2, "last_activity_date": 1530519516, "last_edit_date": 1530519516, "creation_date": 1530505445, "answer_id": 51129101, "question_id": 51126534, "link": "https://stackoverflow.com/questions/51126534/fizzbuzz-ruby-one-liner/51129101#51129101", "title": "FizzBuzz Ruby one-liner", "body": "<p>I'll try to add a simpler explanation to @Simple Lime's excellent answer.\nIf <code>n</code> is a multiple of 3, let's denote it as <code>3k</code>, Now:</p>\n\n<pre><code>(3k)^4  == 81(k^4)\n</code></pre>\n\n<p><code>81 % 15 == 6</code> and let's subtract 15 (since it's modulo -15) to get -9.</p>\n\n<p>Likewise when <code>n</code> is a multiple of 5, it's <code>625(k^4)</code> and <code>625 % 15 == 10</code> and after subtracting we get -5.</p>\n\n<p>Otherwise, n might be a multiple of 2, 7, 11, and 13. In all these cases n^4 % 15 will be 1 (see Simple Lime's table) and -15 will get us -14. </p>\n"}], "owner": {"reputation": 504, "user_id": 5282337, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/J5BT7.jpg?s=128&g=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/5282337/fred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 850, "favorite_count": 0, "accepted_answer_id": 51127839, "answer_count": 3, "score": 7, "last_activity_date": 1536857127, "creation_date": 1530474564, "last_edit_date": 1536857127, "question_id": 51126534, "link": "https://stackoverflow.com/questions/51126534/fizzbuzz-ruby-one-liner", "title": "FizzBuzz Ruby one-liner", "body": "<p>Rosettacode.org has this excellent one-line FizzBuzz solution in Ruby.</p>\n\n<pre><code>1.upto(100){|n|puts'FizzBuzz '[i=n**4%-15,i+13]||n}\n</code></pre>\n\n<p>The trouble is, I don\u2019t understand it.  The part that puzzles me is the \u201dn to the power of 4 modulo -15\u201d. Does anyone have an explanation or a reference to an explanation? I want to use this way of selecting substrings in other problems.\nFor more information on FizzBuzz, see [<a href=\"https://rosettacode.org/wiki/FizzBuzz\" rel=\"nofollow noreferrer\">https://rosettacode.org/wiki/FizzBuzz</a>]</p>\n"}, {"tags": ["html", "json", "ruby", "bash", "html-table"], "comments": [{"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1530473226, "post_id": 51126226, "comment_id": 89237620, "body": "Check content of <code>$file</code> and <code>html&#47;$file.html</code> in your loop."}], "answers": [{"comments": [{"owner": {"reputation": 3410, "user_id": 2900196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lz658.jpg?s=128&g=1", "display_name": "Idriss Neumann", "link": "https://stackoverflow.com/users/2900196/idriss-neumann"}, "edited": false, "score": 0, "creation_date": 1530481037, "post_id": 51126718, "comment_id": 89239325, "body": "It&#39;s a bad idea to use <code>ls</code> in a <code>for</code> loop like that. <a href=\"https://stackoverflow.com/a/19607361/2900196\">Here&#39;s why</a>."}], "tags": [], "owner": {"reputation": 4917, "user_id": 2320961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AdwXN.png?s=128&g=1", "display_name": "Nic3500", "link": "https://stackoverflow.com/users/2320961/nic3500"}, "is_accepted": false, "score": -1, "last_activity_date": 1530476229, "creation_date": 1530476229, "answer_id": 51126718, "question_id": 51126226, "link": "https://stackoverflow.com/questions/51126226/combine-for-loop-with-cat-and-json2html/51126718#51126718", "title": "Combine for loop with cat and json2html", "body": "<p>Your ls command returns the directory as well as the file name.</p>\n\n<p>Ex. json/1.json json/2.json json/3.json</p>\n\n<p>So do:</p>\n\n<pre><code>for file in $(/bin/ls json/*.json)\ndo\n    cat $file | json2table &gt;html/$(basename $file).html\ndone\n</code></pre>\n\n<ul>\n<li>I always use the full path for <code>ls</code> in such conditions since I want to make sure I do not use any alias that might have been defined on it.</li>\n<li>basename removes the directory out of $file</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1530477555, "post_id": 51126732, "comment_id": 89238590, "body": "I suggest to replace <code>${file%&#47;*}</code> with <code>${file#*&#47;}</code>."}, {"owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "reply_to_user": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1530480334, "post_id": 51126732, "comment_id": 89239185, "body": "@Cyrus Good idea, tx."}, {"owner": {"reputation": 3410, "user_id": 2900196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lz658.jpg?s=128&g=1", "display_name": "Idriss Neumann", "link": "https://stackoverflow.com/users/2900196/idriss-neumann"}, "edited": false, "score": 0, "creation_date": 1530481417, "post_id": 51126732, "comment_id": 89239391, "body": "+1 for removing <code>ls</code> but I think he needs to use something like <code>&quot;$(basename $file)&quot;</code> instead of <code>${file#*&#47;}</code> to get the filename only. Otherwise that&#39;s will try to create some files with <code>html&#47;json&#47;{filename}.html</code> insteaf of <code>html&#47;{filename}.html</code> as path."}, {"owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "edited": false, "score": 0, "creation_date": 1530482716, "post_id": 51126732, "comment_id": 89239627, "body": "<code>file=json&#47;example.json; echo &quot;${file#*&#47;}&quot; </code> will return <code>example.json</code>. The <code>file</code> returned by <code>json&#47;*.json</code> will have one slash, never two. You might want to replace all <code>json</code> with <code>cat &quot;${file} | json2table &gt; &quot;${file&#47;&#47;json&#47;html}&quot;</code>, but this will fail for <code>json&#47;json_in_basename.json</code>. notpossible/example.json"}, {"owner": {"reputation": 3410, "user_id": 2900196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lz658.jpg?s=128&g=1", "display_name": "Idriss Neumann", "link": "https://stackoverflow.com/users/2900196/idriss-neumann"}, "edited": false, "score": 0, "creation_date": 1530515887, "post_id": 51126732, "comment_id": 89246387, "body": "Indeed, I tried with a subdir <code>json</code> and it works with this loop. I think it remain a lot more safer to use <code>basename</code> (which is a builtin in bash) to get the filename only. Anyway, I&#39;ve given +1 to this answer :p"}, {"owner": {"reputation": 115, "user_id": 5151892, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-7fxhVZVE5TE/AAAAAAAAAAI/AAAAAAAAABI/GLmFMSXkRew/photo.jpg?sz=128", "display_name": "Silvio", "link": "https://stackoverflow.com/users/5151892/silvio"}, "edited": false, "score": 0, "creation_date": 1530518678, "post_id": 51126732, "comment_id": 89247706, "body": "Thank you this is the solution. Thank you and thx for the ls information. This was new. Thanks."}], "tags": [], "owner": {"reputation": 16325, "user_id": 3220113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a1c0b015f14adfdf581d04c065e903d?s=128&d=identicon&r=PG&f=1", "display_name": "Walter A", "link": "https://stackoverflow.com/users/3220113/walter-a"}, "is_accepted": true, "score": 2, "last_activity_date": 1530482917, "last_edit_date": 1530482917, "creation_date": 1530476379, "answer_id": 51126732, "question_id": 51126226, "link": "https://stackoverflow.com/questions/51126226/combine-for-loop-with-cat-and-json2html/51126732#51126732", "title": "Combine for loop with cat and json2html", "body": "<p>Your <code>${file}</code> includes the <code>json</code> directory. When you don't have a directory <code>html/json</code> the redirection will fail.<br>\nI think you have a subdir <code>html</code> and stripping the path from <code>${file}</code> will work:</p>\n\n<pre><code>for file in json/*.json; do \n   cat \"${file}\" | json2table &gt; html/\"${file#*/}\".html\n   # OR avoid cat with\n   # json2table &lt; \"${file}\" &gt; html/\"${file#*/}\".html\ndone\n</code></pre>\n\n<p>As a bonus I removed the <code>ls</code>, added quotes for filenames with spaces and showed in a comment how to avoid <code>cat</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 115, "user_id": 5151892, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-7fxhVZVE5TE/AAAAAAAAAAI/AAAAAAAAABI/GLmFMSXkRew/photo.jpg?sz=128", "display_name": "Silvio", "link": "https://stackoverflow.com/users/5151892/silvio"}, "is_accepted": false, "score": 0, "last_activity_date": 1530553394, "creation_date": 1530553394, "answer_id": 51141260, "question_id": 51126226, "link": "https://stackoverflow.com/questions/51126226/combine-for-loop-with-cat-and-json2html/51141260#51141260", "title": "Combine for loop with cat and json2html", "body": "<p>I want give all the complete script if people have same problem / project or how will call it. </p>\n\n<p>The first loop generates an HTML table from the JSON files and stores it in an HTML file. The second loop combines the result of the first loop with a template, so that you have a complete page. In the body tag, the include is simply searched for, deleted and filled with the table. </p>\n\n<pre><code>#!/bin/bash\n\njdata=\"json\"\nhdata=\"html\" \ntemplate=\"tpl/tpl.html\"\ntmp=\"tmp\"\n\n# convert json to html\n# https://stackoverflow.com/questions/51126226/combine-for-loop-with-cat-and-json2html/51126732#51126732\n\nfor file in $jdata/*.json;\ndo\n    # php\n    #php json.php $file &gt; tmp/${file#*/}.html\n\n    # ruby\n    json2table &lt; \"${file}\" &gt; $hdata/\"${file#*/}\".html\ndone\n\n# write html file \n# https://unix.stackexchange.com/questions/32908/how-to-insert-the-content-of-a-file-into-another-file-before-a-pattern-marker\n\nfor file in html/*.html;\ndo\n    # extract Project Number for newfile \n    filename=\"$(basename -- \"$file\")\"\n    extension=\"${filename#*.}\"\n    filename=\"${filename%.*}\"\n\n    # save the project number\n    NO=\"$(grep \"No\" $jdata/$filename | sed 's/[^0-9]*//g')\"\n    OUT=\"$NO.html\"\n\n    # write new html file\n    sed 's/include/$x/g' tpl/tpl.html | x=\"$(&lt;$file)\" envsubst '$x' &gt; html/$OUT\n\ndone\n</code></pre>\n\n<p>Thank you for help &amp; Nice day\nSilvio </p>\n"}], "owner": {"reputation": 115, "user_id": 5151892, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-7fxhVZVE5TE/AAAAAAAAAAI/AAAAAAAAABI/GLmFMSXkRew/photo.jpg?sz=128", "display_name": "Silvio", "link": "https://stackoverflow.com/users/5151892/silvio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 51126732, "answer_count": 3, "score": 0, "last_activity_date": 1530553394, "creation_date": 1530472180, "question_id": 51126226, "link": "https://stackoverflow.com/questions/51126226/combine-for-loop-with-cat-and-json2html", "title": "Combine for loop with cat and json2html", "body": "<p>I try to convert json files to html files. So I can later import them to the website. My idea is run <a href=\"https://github.com/codeexpress/json2table\" rel=\"nofollow noreferrer\">json2table</a> to create a table and write then to the html directory. But I find not out how can redirecting the output of json2table.</p>\n\n<pre><code>for file in $(ls json/*.json); do cat $file | json2table &gt; html/$file.html; done\n</code></pre>\n\n<p>But this end with</p>\n\n<pre><code>bash: html/json/26.json.html: No such file or directory\n</code></pre>\n\n<p>Is there someone which can help to fix the error? Thank you</p>\n\n<p>Silvio </p>\n"}]