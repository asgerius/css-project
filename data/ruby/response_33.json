[{"tags": ["ruby", "datetime", "select"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1440638125, "post_id": 32238460, "comment_id": 52360281, "body": "<code>June 25 5 pm</code> is not a valid object. Do you mean it to be a string?"}, {"owner": {"reputation": 11093, "user_id": 1560517, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/233d55363fa09a5613a4a2d9fff2bf8c?s=128&d=identicon&r=PG", "display_name": "appleLover", "link": "https://stackoverflow.com/users/1560517/applelover"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1440638317, "post_id": 32238460, "comment_id": 52360330, "body": "no, sorry, that was psuedo-code.  it is meant to be a valid datetime instance"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1440639045, "post_id": 32238460, "comment_id": 52360495, "body": "Then write <code>list = [ { info: &quot;i am cool&quot;, datetime: #&lt;DateTime: 2015-06-25T17:00:00+00:00 ((2457199j,61200s,0n),+0s,2299161j)&gt;, ...}</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2176, "user_id": 4756398, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/327d9051425cf0168c13dcbeb992925a?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Davenport", "link": "https://stackoverflow.com/users/4756398/jeff-davenport"}, "edited": false, "score": 0, "creation_date": 1480226895, "post_id": 32238516, "comment_id": 68870827, "body": "This does not return the most recent date, it returns the newest date. Most recent would infer that the date returned is always in the past."}], "tags": [], "owner": {"reputation": 26911, "user_id": 225262, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/10f7602ff38f6486cb1580052746fc05?s=128&d=identicon&r=PG", "display_name": "satoru", "link": "https://stackoverflow.com/users/225262/satoru"}, "is_accepted": true, "score": 4, "last_activity_date": 1440633129, "creation_date": 1440633129, "answer_id": 32238516, "question_id": 32238460, "link": "https://stackoverflow.com/questions/32238460/ruby-select-array-entry-with-most-recent-date/32238516#32238516", "title": "Ruby - Select Array Entry With Most Recent Date", "body": "<p>You can use <code>Array#max_by</code>:</p>\n\n<pre><code>list.max_by {|o| o[:datetime]}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1440638456, "post_id": 32238518, "comment_id": 52360364, "body": "Sorting is waseful when you only need the element for which a computed value is largest or smallest. Here use <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-max_by\" rel=\"nofollow noreferrer\">Enumerable#max_by</a>."}], "tags": [], "owner": {"reputation": 9917, "user_id": 1586221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/96ab4c67eb62b315a8e7584f7dfd547a?s=128&d=identicon&r=PG", "display_name": "tompave", "link": "https://stackoverflow.com/users/1586221/tompave"}, "is_accepted": false, "score": 0, "last_activity_date": 1440633142, "creation_date": 1440633142, "answer_id": 32238518, "question_id": 32238460, "link": "https://stackoverflow.com/questions/32238460/ruby-select-array-entry-with-most-recent-date/32238518#32238518", "title": "Ruby - Select Array Entry With Most Recent Date", "body": "<p>You can use the block form of <a href=\"http://ruby-doc.org/core-2.2.2/Array.html#method-i-sort\" rel=\"nofollow\"><code>Array#sort</code></a> to sort them by <code>datetime</code>, and then get the last one.</p>\n\n<pre><code>require 'date'\n\nlist = [\n  { datetime: DateTime.parse(\"June 25 5pm\"), info: \"i am cool\" },\n  { datetime: DateTime.parse(\"June 25 4pm\"), info: \"this is sweet\" },\n  { datetime: DateTime.parse(\"June 23 2pm\"), info: \"it is blue\" }\n]\n\nlist.sort do |a, b|\n  a[:datetime] &lt;=&gt; b[:datetime]\nend.last\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 12144545, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tDr8siSItQE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfOACVQvt7Z5i5Uue1BVaEszJzJVg/photo.jpg?sz=128", "display_name": "Blaine M. Lawson", "link": "https://stackoverflow.com/users/12144545/blaine-m-lawson"}, "is_accepted": false, "score": 0, "last_activity_date": 1606341641, "creation_date": 1606341641, "answer_id": 65013287, "question_id": 32238460, "link": "https://stackoverflow.com/questions/32238460/ruby-select-array-entry-with-most-recent-date/65013287#65013287", "title": "Ruby - Select Array Entry With Most Recent Date", "body": "<p>For anyone looking for this answer five years later, here you go:</p>\n<pre><code>list.filter {|o| o[:datetime] &lt; Date.today}.max\n</code></pre>\n"}], "owner": {"reputation": 11093, "user_id": 1560517, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/233d55363fa09a5613a4a2d9fff2bf8c?s=128&d=identicon&r=PG", "display_name": "appleLover", "link": "https://stackoverflow.com/users/1560517/applelover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1754, "favorite_count": 0, "accepted_answer_id": 32238516, "answer_count": 3, "score": 2, "last_activity_date": 1606341641, "creation_date": 1440632684, "question_id": 32238460, "link": "https://stackoverflow.com/questions/32238460/ruby-select-array-entry-with-most-recent-date", "title": "Ruby - Select Array Entry With Most Recent Date", "body": "<p>How do I return just the hash with the most recent datetime? </p>\n\n<pre><code>list = [ { info: \"i am cool\", datetime: June 25 5 pm},\n         { info: \"this is sweet\", datetime: June 25 4 pm},\n         { info: \"it is blue\", datetime: June 23 2 pm} ]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "is_accepted": true, "score": 1, "last_activity_date": 1440634956, "creation_date": 1440634956, "answer_id": 32238767, "question_id": 32237919, "link": "https://stackoverflow.com/questions/32237919/view-html-of-plain-capybara-element-without-using-the-driver/32238767#32238767", "title": "View HTML of plain capybara element without using the driver", "body": "<p>No, there is not. Here are <a href=\"http://www.rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Element\" rel=\"nofollow\">the methods you get</a>. The closest you get is <a href=\"http://www.rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Element#native-instance_method\" rel=\"nofollow\">the native method</a>, which you do not wish to use. You can see how it is done by drivers by looking at <a href=\"http://www.rubydoc.info/github/jnicklas/capybara/Capybara/Selenium/Driver#html-instance_method\" rel=\"nofollow\">their code</a> - you need the driver. You can verify this yourself by running <code>my_cabybara_element.methods.sort</code>, there just isn't anything there for this.</p>\n"}], "owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 32238767, "answer_count": 1, "score": 0, "last_activity_date": 1440635012, "creation_date": 1440629160, "last_edit_date": 1495539835, "question_id": 32237919, "link": "https://stackoverflow.com/questions/32237919/view-html-of-plain-capybara-element-without-using-the-driver", "title": "View HTML of plain capybara element without using the driver", "body": "<p><em>Please note the difference between my question and others like <a href=\"https://stackoverflow.com/questions/4071937/how-do-i-get-the-html-in-an-element-using-capybara\">this one</a> is that I am looking for a way to do this without using driver methods.</em></p>\n\n<p>Is there a way to view all the HTML of a given Capybara Element without driver support?</p>\n\n<p>Currently, a plain Capybara element allows you to access the attributes, if you know about them:</p>\n\n<pre><code># &lt;span class=\"one\" id=\"two\" data=\"three\"&gt;\nel = find(\".klass\")\nel['class'] #=&gt; \"one\"\nel['id'] #=&gt; \"two\"\n</code></pre>\n\n<p>It seems like surely there should be a way to just view the entire set of attributes, but I can't find a way without driver support. Is there a way to get something like this?</p>\n\n<pre><code>el.html #=&gt; &lt;span class=\\\"one\\\" id=\\\"two\\\" data=\\\"three\\\"&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap", "devise"], "comments": [{"owner": {"reputation": 2449, "user_id": 2808883, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DM8gt.jpg?s=128&g=1", "display_name": "Hristo Georgiev", "link": "https://stackoverflow.com/users/2808883/hristo-georgiev"}, "edited": false, "score": 0, "creation_date": 1440629242, "post_id": 32237818, "comment_id": 52358095, "body": "You need to use AJAX with Rails. I will give you an answer, but it will take a little while"}, {"owner": {"reputation": 141, "user_id": 4504303, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/53a2af6ee15830460098500d2d0bb98d?s=128&d=identicon&r=PG&f=1", "display_name": "jacob1992", "link": "https://stackoverflow.com/users/4504303/jacob1992"}, "reply_to_user": {"reputation": 2449, "user_id": 2808883, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DM8gt.jpg?s=128&g=1", "display_name": "Hristo Georgiev", "link": "https://stackoverflow.com/users/2808883/hristo-georgiev"}, "edited": false, "score": 0, "creation_date": 1440630344, "post_id": 32237818, "comment_id": 52358440, "body": "Thanks Hristo Georgiev! I would be incredibly thankful!"}, {"owner": {"reputation": 2449, "user_id": 2808883, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DM8gt.jpg?s=128&g=1", "display_name": "Hristo Georgiev", "link": "https://stackoverflow.com/users/2808883/hristo-georgiev"}, "edited": false, "score": 0, "creation_date": 1440669309, "post_id": 32237818, "comment_id": 52372915, "body": "Did the solution work for you?"}, {"owner": {"reputation": 141, "user_id": 4504303, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/53a2af6ee15830460098500d2d0bb98d?s=128&d=identicon&r=PG&f=1", "display_name": "jacob1992", "link": "https://stackoverflow.com/users/4504303/jacob1992"}, "reply_to_user": {"reputation": 2449, "user_id": 2808883, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DM8gt.jpg?s=128&g=1", "display_name": "Hristo Georgiev", "link": "https://stackoverflow.com/users/2808883/hristo-georgiev"}, "edited": false, "score": 0, "creation_date": 1440689234, "post_id": 32237818, "comment_id": 52387236, "body": "Thanks for taking the time Hristo Georgiev! I still haven&#39;t made it work. I get the error: undefined method `users_path&#39;. &lt;%= form_for(resource) do |f| %&gt; is highlighted in the error. So I need to solve that part..."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 4504303, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/53a2af6ee15830460098500d2d0bb98d?s=128&d=identicon&r=PG&f=1", "display_name": "jacob1992", "link": "https://stackoverflow.com/users/4504303/jacob1992"}, "edited": false, "score": 0, "creation_date": 1440689215, "post_id": 32238764, "comment_id": 52387221, "body": "Thanks for taking the time Hristo Georgiev! I still haven&#39;t made it work. I get the error: undefined method `users_path&#39;. &lt;%= form_for(resource) do |f| %&gt; is highlighted in the error. So I need to solve that part..."}, {"owner": {"reputation": 2449, "user_id": 2808883, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DM8gt.jpg?s=128&g=1", "display_name": "Hristo Georgiev", "link": "https://stackoverflow.com/users/2808883/hristo-georgiev"}, "reply_to_user": {"reputation": 141, "user_id": 4504303, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/53a2af6ee15830460098500d2d0bb98d?s=128&d=identicon&r=PG&f=1", "display_name": "jacob1992", "link": "https://stackoverflow.com/users/4504303/jacob1992"}, "edited": false, "score": 0, "creation_date": 1440689727, "post_id": 32238764, "comment_id": 52387578, "body": "Are you sure you&#39;ve set up devise correctly? Run &#39;rake routes&#39; in your terminal and tell me if you have users in your resources"}, {"owner": {"reputation": 141, "user_id": 4504303, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/53a2af6ee15830460098500d2d0bb98d?s=128&d=identicon&r=PG&f=1", "display_name": "jacob1992", "link": "https://stackoverflow.com/users/4504303/jacob1992"}, "edited": false, "score": 0, "creation_date": 1440690057, "post_id": 32238764, "comment_id": 52387792, "body": "I got users for all of devise. For example: for &quot;new_user_session GET&quot; I have: /users/sign_in(.:format). The prefix for that one is &quot;new_user_session&quot;"}, {"owner": {"reputation": 2449, "user_id": 2808883, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DM8gt.jpg?s=128&g=1", "display_name": "Hristo Georgiev", "link": "https://stackoverflow.com/users/2808883/hristo-georgiev"}, "reply_to_user": {"reputation": 141, "user_id": 4504303, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/53a2af6ee15830460098500d2d0bb98d?s=128&d=identicon&r=PG&f=1", "display_name": "jacob1992", "link": "https://stackoverflow.com/users/4504303/jacob1992"}, "edited": false, "score": 0, "creation_date": 1440690206, "post_id": 32238764, "comment_id": 52387901, "body": "My bad. I had two form tags, Try to paste the form code again"}, {"owner": {"reputation": 2449, "user_id": 2808883, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DM8gt.jpg?s=128&g=1", "display_name": "Hristo Georgiev", "link": "https://stackoverflow.com/users/2808883/hristo-georgiev"}, "reply_to_user": {"reputation": 141, "user_id": 4504303, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/53a2af6ee15830460098500d2d0bb98d?s=128&d=identicon&r=PG&f=1", "display_name": "jacob1992", "link": "https://stackoverflow.com/users/4504303/jacob1992"}, "edited": false, "score": 0, "creation_date": 1440690590, "post_id": 32238764, "comment_id": 52388167, "body": "You can also try  form_tag(new_session_path(:user) , :html =&gt; {:id =&gt; &quot;login-box&quot;},:format =&gt; :json, :remote =&gt; true )  Reference:  <a href=\"http://www.rubydoc.info/github/plataformatec/devise/Devise/Controllers/UrlHelpers\" rel=\"nofollow noreferrer\">rubydoc.info/github/plataformatec/devise/Devise/Controllers/&zwnj;&#8203;&hellip;</a>"}, {"owner": {"reputation": 141, "user_id": 4504303, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/53a2af6ee15830460098500d2d0bb98d?s=128&d=identicon&r=PG&f=1", "display_name": "jacob1992", "link": "https://stackoverflow.com/users/4504303/jacob1992"}, "edited": false, "score": 1, "creation_date": 1440691454, "post_id": 32238764, "comment_id": 52388749, "body": "Thanks Hristo Georgiev. Your change in the form code worked! I&#39;ll guess I do something similar for my registration form then! Thanks alot!"}, {"owner": {"reputation": 151, "user_id": 6076780, "user_type": "registered", "accept_rate": 45, "profile_image": "https://lh3.googleusercontent.com/-EKMY13fOp88/AAAAAAAAAAI/AAAAAAAAAZU/td303OVqth0/photo.jpg?sz=128", "display_name": "srihari sairam Ventrapragada", "link": "https://stackoverflow.com/users/6076780/srihari-sairam-ventrapragada"}, "edited": false, "score": 0, "creation_date": 1484654126, "post_id": 32238764, "comment_id": 70588741, "body": "@HristoGeorgiev i&#39;m getting err unxpectd string at                $(&quot;form#login-box&quot;).bind &quot;ajax:success&quot;, (e, data, status, xhr) -&gt;"}], "tags": [], "owner": {"reputation": 2449, "user_id": 2808883, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DM8gt.jpg?s=128&g=1", "display_name": "Hristo Georgiev", "link": "https://stackoverflow.com/users/2808883/hristo-georgiev"}, "is_accepted": true, "score": 8, "last_activity_date": 1440690176, "last_edit_date": 1440690176, "creation_date": 1440634942, "answer_id": 32238764, "question_id": 32237818, "link": "https://stackoverflow.com/questions/32237818/devise-sign-in-sign-up-in-popup/32238764#32238764", "title": "Devise sign in/sign up in popup", "body": "<p>You need a custom sessions controller and some extra configuration.</p>\n\n<p>Step 1: Enable devise to respond with JSON</p>\n\n<pre><code> # config/initializers/devise.rb\n\nconfig.http_authenticatable_on_xhr = false\nconfig.navigational_formats = [\"*/*\", :html, :json]\n</code></pre>\n\n<p>Step 2: Add mappings (I can see that you already did that)</p>\n\n<pre><code> # app/helpers/application_helper.rb\n\nmodule ApplicationHelper\n  def resource_name\n    :user\n  end\n\n  def resource\n    @resource ||= User.new\n  end\n\n  def devise_mapping\n    @devise_mapping ||= Devise.mappings[:user]\n  end\nend\n</code></pre>\n\n<p>Step 3: Add a custom controller</p>\n\n<pre><code> # app/controllers/sessions_controller.rb\n\nclass SessionsController  \n\n  def create\n   resource = warden.authenticate!(:scope =&gt; resource_name, :recall =&gt; '#{controller_path}#failure')\n    sign_in_and_redirect(resource_name, resource)\n  end\n\n  def sign_in_and_redirect(resource_or_scope, resource=nil)\n    scope = Devise::Mapping.find_scope!(resource_or_scope)\n    resource ||= resource_or_scope\n    sign_in(scope, resource) unless warden.user(scope) == resource\n    return render :json =&gt; {:success =&gt; true}\n  end\n\n  def failure\n    return render :json =&gt; {:success =&gt; false, :errors =&gt; [\"Login failed.\"]}\n  end\nend\n</code></pre>\n\n<p>Here what's special about the controller is that we return everything in <code>:json</code></p>\n\n<p>Step 3: Override the controllers:</p>\n\n<pre><code>  # config/routes.rb\n\ndevise_for :users, :controllers =&gt; {sessions: 'sessions'}\n</code></pre>\n\n<p>Now devise uses the custom sessions controller.</p>\n\n<p>Step 4: Add your custom form (with :remote=> true)</p>\n\n<pre><code>%h2 Sign in\n   &lt;%= devise_error_messages! %&gt;\n   &lt;%= form_for(resource, :as =&gt; resource_name, :url =&gt; session_path(resource_name) ,:html =&gt; {:id =&gt; \"login-box\"},:format =&gt; :json, :remote =&gt; true ) do |f| %&gt;\n\n   &lt;%= f.password_field :password, :class =&gt; \"form-control\", :placeholder =&gt; \"Password\", autocomplete: \"off\" %&gt;\n\n       &lt;% if devise_mapping.rememberable? -%&gt;\n       &lt;%= f.check_box :remember_me, :style =&gt; \"margin-top:20px;margin-bottom:20px;\" %&gt;\n       &lt;%= f.label :remember_me, :style =&gt; \"margin-top:20px;margin-bottom:20px;\" %&gt;\n       &lt;% end -%&gt;\n\n\n       &lt;%= f.submit \"Sign In\", :class =&gt; \"btn btn-default btn-login\" %&gt;\n\n       &lt;% end %&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>Step 5: Add the javascript</p>\n\n<pre><code>$(\"form#login-box\").bind \"ajax:success\", (e, data, status, xhr) -&gt;\n    if data.success\n      //javascript that executes if everything goes o.k.\n      $('#sign_in').modal('hide')\n      $('#sign_in_button').hide()\n      $('#submit_comment').slideToggle(1000, \"easeOutBack\" )\n    else\n      alert('failure!')\n</code></pre>\n\n<p>This should work</p>\n"}], "owner": {"reputation": 141, "user_id": 4504303, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/53a2af6ee15830460098500d2d0bb98d?s=128&d=identicon&r=PG&f=1", "display_name": "jacob1992", "link": "https://stackoverflow.com/users/4504303/jacob1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5218, "favorite_count": 2, "accepted_answer_id": 32238764, "answer_count": 1, "score": 3, "last_activity_date": 1440690176, "creation_date": 1440628565, "question_id": 32237818, "link": "https://stackoverflow.com/questions/32237818/devise-sign-in-sign-up-in-popup", "title": "Devise sign in/sign up in popup", "body": "<p>I'm developing an app with Ruby on Rails and bootstrap. I'm using the Devise gem for the authentication system. I generated the devise views but I don't like to use the pages/views for sign in/sign up. Instead I got a popup modal/form which I'm using. Right now my Sign In form looks like this: </p>\n\n<pre><code>&lt;div class=\"form loginBox\"&gt;\n&lt;%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %&gt;\n&lt;%= devise_error_messages! %&gt;\n\n   &lt;%= f.email_field :email, :class =&gt; \"form-control\", :placeholder =&gt; \"Email\" %&gt;\n   &lt;%= f.password_field :password, :class =&gt; \"form-control\", :placeholder =&gt; \"Password\", autocomplete: \"off\" %&gt;\n\n   &lt;% if devise_mapping.rememberable? -%&gt;\n   &lt;%= f.check_box :remember_me, :style =&gt; \"margin-top:20px;margin-bottom:20px;\" %&gt;\n   &lt;%= f.label :remember_me, :style =&gt; \"margin-top:20px;margin-bottom:20px;\" %&gt;\n   &lt;% end -%&gt;\n\n\n   &lt;%= f.submit \"Sign In\", :class =&gt; \"btn btn-default btn-login\" %&gt;\n\n   &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>I put this in the application helper:</strong> </p>\n\n<pre><code>module ApplicationHelper\n\n\n     def resource_name\n        :user\n      end\n\n      def resource\n        @resource ||= User.new\n      end\n\n      def devise_mapping\n        @devise_mapping ||= Devise.mappings[:user]\n      end\n    end\n</code></pre>\n\n<p>When I press the Sign In button (submit-button) without filling out the fields I'm redirected to the /users/sign_in page where I get the devise error messages. The same happens with my registration form. </p>\n\n<p><strong>How can I prevent this from happening? What should I do about the original devise views to not show them? Am I doing this the wrong way?</strong> </p>\n\n<p>I'm quite new with Ruby and Rails and I'm happy I atleast got the authentication Sign In/Sign Up process to work using the popup forms I have. Its just that I'm not sure I did this the right way as I got the problem mentioned above.</p>\n\n<p>Thanks a lot in advance!\n/Jacob</p>\n"}, {"tags": ["javascript", "ruby", "json"], "comments": [{"owner": {"reputation": 712, "user_id": 4191738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKXDY.jpg?s=128&g=1", "display_name": "Sculper", "link": "https://stackoverflow.com/users/4191738/sculper"}, "edited": false, "score": 0, "creation_date": 1440625172, "post_id": 32236953, "comment_id": 52356546, "body": "Can you print out the value of <code>response[&#39;data&#39;]</code> from ruby, and show us the output of that statement?"}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "reply_to_user": {"reputation": 712, "user_id": 4191738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKXDY.jpg?s=128&g=1", "display_name": "Sculper", "link": "https://stackoverflow.com/users/4191738/sculper"}, "edited": false, "score": 0, "creation_date": 1440625514, "post_id": 32236953, "comment_id": 52356703, "body": "@Sculper I did print it out above. I have it in the yellow box."}, {"owner": {"reputation": 575, "user_id": 2855747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef29652da2fde5184c329af0e72ccea?s=128&d=identicon&r=PG", "display_name": "Colto", "link": "https://stackoverflow.com/users/2855747/colto"}, "edited": false, "score": 0, "creation_date": 1440626018, "post_id": 32236953, "comment_id": 52356878, "body": "The backslashes (<code>F\\B</code>) are causing it to not be valid. It&#39;s basically canceling out the quotes."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1440629114, "post_id": 32236953, "comment_id": 52358058, "body": "What version of Ruby are you using? I can parse the JSON provided correctly, so please show a minor snippet of code the replicates the problem."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1440629827, "post_id": 32236953, "comment_id": 52358284, "body": "@Donato, welcome to Stack Overflow. Please read the documentation for formatting questions. In particular, source code and data should be formatted as code, typically done using a four-space indent. That will display the double-slashes correctly. Using quote formatting will display &quot;\\\\&quot; as &quot;\\&quot; which is confusing when people try to copy it to help you."}], "answers": [{"comments": [{"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1440687503, "post_id": 32237959, "comment_id": 52386025, "body": "you are parsing the whole string. I am trying to parse str[&quot;data&quot;] after parsing str itself. It throws the error when I parse str[&quot;data&quot;]."}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1440706585, "post_id": 32237959, "comment_id": 52397224, "body": "Yes this was the solution JSON[hash[&#39;data&#39;].tr(&quot;&#39;&quot;, &#39;&quot;&#39;)]"}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 0, "last_activity_date": 1440699121, "last_edit_date": 1440699121, "creation_date": 1440629392, "answer_id": 32237959, "question_id": 32236953, "link": "https://stackoverflow.com/questions/32236953/ruby-parsing-json-throws-an-error-uncaught-exception-399-unexpected-token/32237959#32237959", "title": "Ruby parsing json throws an error Uncaught exception: 399: unexpected token", "body": "<p>Testing the JSON shows no problems:</p>\n\n<pre><code>require 'json'\n\nstr = &lt;&lt;EOT\n{\"data\": \"[{'Docket Type': 'MOT - MOTION','Filing Date': '19-AUG-2015','Filing Party': 'PNC BANK, NATIONAL ASSOCIATION,','Docket Text': 'TO GRANT WRIT OF POSSESSION FOR FAILURE TO VACATE PREMISES F\\\\B PLT, PNC BANK'},{'Docket Type': 'AFF - AFFIDAVIT','Filing Date': '19-AUG-2015','Filing Party': '&amp;nbsp;','Docket Text': 'PURSUANT TO SECTION 83.561, FLORIDA STATUTES F\\\\B PLT, PNC'},{'Docket Type': '108FF - CAFF/REOPEN ($50.00)','Filing Date': '19-AUG-2015','Filing Party': '&amp;nbsp;','Docket Text': '&lt;i&gt;none.&lt;/i&gt;'},{'Docket Type': 'RO - REOPEN','Filing Date': '19-AUG-2015','Filing Party': '&amp;nbsp;','Docket Text': '&lt;i&gt;none.&lt;/i&gt;'},{'Docket Type': 'COS - CERTIFICATE OF SERVICE','Filing Date': '14-JUL-2015','Filing Party': 'NATIONAL CITY BANK,','Docket Text': 'OF ORDER ON OBJECTION TO FORECLOSURE SALE F/B PLT'},{'Docket Type': 'CRT - CERTIFICATE','Filing Date': '01-JUL-2015','Filing Party': '&amp;nbsp;','Docket Text': 'OF DISBURSEMENTS'},{'Docket Type': 'COFT - CERTIFICATE OF TITLE','Filing Date': '01-JUL-2015','Filing Party': '&amp;nbsp;','Docket Text': 'WAS SOLD TO PNC BANK NATIONAL ASSOCIATION'}]\"}\nEOT\n\nJSON[str]\n# =&gt; {\"data\"=&gt;\n#      \"[{'Docket Type': 'MOT - MOTION','Filing Date': '19-AUG-2015','Filing Party': 'PNC BANK, NATIONAL ASSOCIATION,','Docket Text': 'TO GRANT WRIT OF POSSESSION FOR FAILURE TO VACATE PREMISES FB PLT, PNC BANK'},{'Docket Type': 'AFF - AFFIDAVIT','Filing Date': '19-AUG-2015','Filing Party': '&amp;nbsp;','Docket Text': 'PURSUANT TO SECTION 83.561, FLORIDA STATUTES FB PLT, PNC'},{'Docket Type': '108FF - CAFF/REOPEN ($50.00)','Filing Date': '19-AUG-2015','Filing Party': '&amp;nbsp;','Docket Text': '&lt;i&gt;none.&lt;/i&gt;'},{'Docket Type': 'RO - REOPEN','Filing Date': '19-AUG-2015','Filing Party': '&amp;nbsp;','Docket Text': '&lt;i&gt;none.&lt;/i&gt;'},{'Docket Type': 'COS - CERTIFICATE OF SERVICE','Filing Date': '14-JUL-2015','Filing Party': 'NATIONAL CITY BANK,','Docket Text': 'OF ORDER ON OBJECTION TO FORECLOSURE SALE F/B PLT'},{'Docket Type': 'CRT - CERTIFICATE','Filing Date': '01-JUL-2015','Filing Party': '&amp;nbsp;','Docket Text': 'OF DISBURSEMENTS'},{'Docket Type': 'COFT - CERTIFICATE OF TITLE','Filing Date': '01-JUL-2015','Filing Party': '&amp;nbsp;','Docket Text': 'WAS SOLD TO PNC BANK NATIONAL ASSOCIATION'}]\"}\n</code></pre>\n\n<p>I'm on Ruby 2.2.3.</p>\n\n<hr>\n\n<p>The problem is that the JSON string is being used to transfer another JSON string, which has had its expected double-quotes translated to single-quotes. Convert them back:</p>\n\n<pre><code>hash = JSON[str]\nJSON[hash['data'].tr(\"'\", '\"')]\n# =&gt; [{\"Docket Type\"=&gt;\"MOT - MOTION\",\n#      \"Filing Date\"=&gt;\"19-AUG-2015\",\n#      \"Filing Party\"=&gt;\"PNC BANK, NATIONAL ASSOCIATION,\",\n#      \"Docket Text\"=&gt;\n#       \"TO GRANT WRIT OF POSSESSION FOR FAILURE TO VACATE PREMISES FB PLT, PNC BANK\"},\n#     {\"Docket Type\"=&gt;\"AFF - AFFIDAVIT\",\n#      \"Filing Date\"=&gt;\"19-AUG-2015\",\n#      \"Filing Party\"=&gt;\"&amp;nbsp;\",\n#      \"Docket Text\"=&gt;\n#       \"PURSUANT TO SECTION 83.561, FLORIDA STATUTES FB PLT, PNC\"},\n#     {\"Docket Type\"=&gt;\"108FF - CAFF/REOPEN ($50.00)\",\n#      \"Filing Date\"=&gt;\"19-AUG-2015\",\n#      \"Filing Party\"=&gt;\"&amp;nbsp;\",\n#      \"Docket Text\"=&gt;\"&lt;i&gt;none.&lt;/i&gt;\"},\n#     {\"Docket Type\"=&gt;\"RO - REOPEN\",\n#      \"Filing Date\"=&gt;\"19-AUG-2015\",\n#      \"Filing Party\"=&gt;\"&amp;nbsp;\",\n#      \"Docket Text\"=&gt;\"&lt;i&gt;none.&lt;/i&gt;\"},\n#     {\"Docket Type\"=&gt;\"COS - CERTIFICATE OF SERVICE\",\n#      \"Filing Date\"=&gt;\"14-JUL-2015\",\n#      \"Filing Party\"=&gt;\"NATIONAL CITY BANK,\",\n#      \"Docket Text\"=&gt;\"OF ORDER ON OBJECTION TO FORECLOSURE SALE F/B PLT\"},\n#     {\"Docket Type\"=&gt;\"CRT - CERTIFICATE\",\n#      \"Filing Date\"=&gt;\"01-JUL-2015\",\n#      \"Filing Party\"=&gt;\"&amp;nbsp;\",\n#      \"Docket Text\"=&gt;\"OF DISBURSEMENTS\"},\n#     {\"Docket Type\"=&gt;\"COFT - CERTIFICATE OF TITLE\",\n#      \"Filing Date\"=&gt;\"01-JUL-2015\",\n#      \"Filing Party\"=&gt;\"&amp;nbsp;\",\n#      \"Docket Text\"=&gt;\"WAS SOLD TO PNC BANK NATIONAL ASSOCIATION\"}]\n</code></pre>\n\n<p>JSON is a defined format and must follow <a href=\"http://json.org\" rel=\"nofollow\">the specification</a>. Strings are delimited with double-quotes:</p>\n\n<blockquote>\n  <p>A value can be a string in double quotes, or a number, or true or false or null, or an object or an array. These structures can be nested.</p>\n</blockquote>\n\n<p>Encoding JSON in JSON is screwy but obviously someone is doing it (wrong). I think it should be base64 encoded to avoid the possibility of corruption or the need for translating the quotes, which is bound to fail or result in further machinations to get at the original data.</p>\n\n<p>The alternate is to let the JSON parser serialize the data itself, which it will do using escaped characters:</p>\n\n<pre><code>require 'json'\n\nfoo = JSON[{'a' =&gt; 'b'}]\nJSON[ {'bar' =&gt; foo }] # =&gt; \"{\\\"bar\\\":\\\"{\\\\\\\"a\\\\\\\":\\\\\\\"b\\\\\\\"}\\\"}\"\n</code></pre>\n\n<p>Which will look like:</p>\n\n<pre><code>{\"bar\":\"{\\\"a\\\":\\\"b\\\"}\"}\n</code></pre>\n\n<p>in real life.</p>\n\n<p>Retrieving the data then becomes much more simple:</p>\n\n<pre><code>JSON[bar] # =&gt; {\"bar\"=&gt;\"{\\\"a\\\":\\\"b\\\"}\"}\nJSON[bar]['bar'] # =&gt; \"{\\\"a\\\":\\\"b\\\"}\"\nJSON[bar]['bar']['a'] # =&gt; \"a\"\n</code></pre>\n\n<p>Having to decode multiple times is the \"machinations\" I refer to. And, the obvious downside to this is there'll be a growing \"leaning-toothpick\" situation happening, which can get pretty ugly but if nobody messes with them during the transfer of the data then JSON should be able to sort it out if enough decoding steps are done.</p>\n"}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 0, "accepted_answer_id": 32237959, "answer_count": 1, "score": 0, "last_activity_date": 1440709311, "creation_date": 1440624219, "last_edit_date": 1440709311, "question_id": 32236953, "link": "https://stackoverflow.com/questions/32236953/ruby-parsing-json-throws-an-error-uncaught-exception-399-unexpected-token", "title": "Ruby parsing json throws an error Uncaught exception: 399: unexpected token", "body": "<p>When I use <code>JSON.parse(response['data'])</code>, Ruby raises the error:</p>\n\n<pre><code>Uncaught exception: 399: unexpected token at ...\n</code></pre>\n\n<p>And I am not sure why. In casperjs, I echo the following back to Ruby:</p>\n\n<pre><code>this.echo('{\"data\": '+ JSON.stringify(resultFinal) + '}');\n</code></pre>\n\n<p>I use <code>JSON.stringify</code> to encode the string, which yields the following:</p>\n\n<pre><code>{\"data\": \"[{'Docket Type': 'MOT - MOTION','Filing Date': '19-AUG-2015','Filing Party': 'PNC BANK, NATIONAL ASSOCIATION,','Docket Text': 'TO GRANT WRIT OF POSSESSION FOR FAILURE TO VACATE PREMISES F\\\\B PLT, PNC BANK'},{'Docket Type': 'AFF - AFFIDAVIT','Filing Date': '19-AUG-2015','Filing Party': '&amp;nbsp;','Docket Text': 'PURSUANT TO SECTION 83.561, FLORIDA STATUTES  F\\\\B PLT, PNC'},{'Docket Type': '108FF - CAFF/REOPEN ($50.00)','Filing Date': '19-AUG-2015','Filing Party': '&amp;nbsp;','Docket Text': '&lt;i&gt;none.&lt;/i&gt;'},{'Docket Type': 'RO - REOPEN','Filing Date': '19-AUG-2015','Filing Party': '&amp;nbsp;','Docket Text': '&lt;i&gt;none.&lt;/i&gt;'},{'Docket Type': 'COS - CERTIFICATE OF SERVICE','Filing Date': '14-JUL-2015','Filing Party': 'NATIONAL CITY BANK,','Docket Text': 'OF ORDER ON OBJECTION TO FORECLOSURE SALE F/B PLT'},{'Docket Type': 'CRT - CERTIFICATE','Filing Date': '01-JUL-2015','Filing Party': '&amp;nbsp;','Docket Text': 'OF DISBURSEMENTS'},{'Docket Type': 'COFT - CERTIFICATE OF TITLE','Filing Date': '01-JUL-2015','Filing Party': '&amp;nbsp;','Docket Text': 'WAS SOLD TO PNC BANK NATIONAL ASSOCIATION'}]\"}\n</code></pre>\n\n<p>Properly encoded as a JSON string, Ruby's <code>JSON.parse</code> should be able to parse it. So why does it fail?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "devise", "cancan"], "comments": [{"owner": {"reputation": 9855, "user_id": 895789, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bac3b43b389e58d49f8b4a30bd0cf96a?s=128&d=identicon&r=PG", "display_name": "Alter Lagos", "link": "https://stackoverflow.com/users/895789/alter-lagos"}, "edited": false, "score": 1, "creation_date": 1440679324, "post_id": 32236259, "comment_id": 52379752, "body": "What if you explicitly add <code>method: :post</code> to <code>form_for</code> ?. If you remove your template and uses the default happens the same thing?"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 2786158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I2PI6.jpg?s=128&g=1", "display_name": "andrewwx10", "link": "https://stackoverflow.com/users/2786158/andrewwx10"}, "edited": false, "score": 0, "creation_date": 1440623881, "post_id": 32236669, "comment_id": 52355986, "body": "I&#39;m honestly just using what devise provides for the views (its set up to patch by default?)... I&#39;ve modified that code to force a post, but that seems to be breaking other things, such as: current_user. Not sure why..."}, {"owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "reply_to_user": {"reputation": 55, "user_id": 2786158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I2PI6.jpg?s=128&g=1", "display_name": "andrewwx10", "link": "https://stackoverflow.com/users/2786158/andrewwx10"}, "edited": false, "score": 0, "creation_date": 1440624152, "post_id": 32236669, "comment_id": 52356106, "body": "Not sure but I&#39;d suggest posting the view code in that case. Here&#39;s one example of sign-in: <a href=\"https://github.com/RailsApps/rails-devise/blob/master/app/views/devise/sessions/new.html.erb\" rel=\"nofollow noreferrer\">github.com/RailsApps/rails-devise/blob/master/app/views/devi&zwnj;&#8203;se/&hellip;</a>"}, {"owner": {"reputation": 55, "user_id": 2786158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I2PI6.jpg?s=128&g=1", "display_name": "andrewwx10", "link": "https://stackoverflow.com/users/2786158/andrewwx10"}, "edited": false, "score": 0, "creation_date": 1440624409, "post_id": 32236669, "comment_id": 52356214, "body": "I just added it, but it&#39;s straight from devise 3.5.2 gem.. I haven&#39;t made any edits"}, {"owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "reply_to_user": {"reputation": 55, "user_id": 2786158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I2PI6.jpg?s=128&g=1", "display_name": "andrewwx10", "link": "https://stackoverflow.com/users/2786158/andrewwx10"}, "edited": false, "score": 1, "creation_date": 1440626305, "post_id": 32236669, "comment_id": 52357001, "body": "My only guess is that the session already exists, so the form helper is making it an update (PATCH) instead of create (POST). (A real-world app wouldn&#39;t present the user with a login form under those circumstances.) Perhaps see if it works different in incognito (which should reset the session)."}], "tags": [], "owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "is_accepted": false, "score": 1, "last_activity_date": 1440623093, "creation_date": 1440623093, "answer_id": 32236669, "question_id": 32236259, "link": "https://stackoverflow.com/questions/32236259/no-route-matches-patch-users-sign-in-devise-sign-in/32236669#32236669", "title": "No route matches [PATCH] &quot;/users/sign_in&quot; Devise Sign_In", "body": "<p>Why can't you just POST to create a new session? As shown in your routes:</p>\n\n<pre><code>   user_session POST   /users/sign_in(.:format)       devise/sessions#create\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 76, "user_id": 4924935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df1aa7a66bca10d9e6e9b6db9bcc5842?s=128&d=identicon&r=PG", "display_name": "Marc", "link": "https://stackoverflow.com/users/4924935/marc"}, "is_accepted": true, "score": 2, "last_activity_date": 1449765321, "last_edit_date": 1449765321, "creation_date": 1449763600, "answer_id": 34206510, "question_id": 32236259, "link": "https://stackoverflow.com/questions/32236259/no-route-matches-patch-users-sign-in-devise-sign-in/34206510#34206510", "title": "No route matches [PATCH] &quot;/users/sign_in&quot; Devise Sign_In", "body": "<p>We are having exactly the same issue. So far, the best solution I have found is to create routes for patch requests like this:</p>\n\n<pre><code>as :account do\n  patch '/accounts/sign_in', to: 'accounts/sessions#create'\nend\n</code></pre>\n\n<p>Note, that our resource_name is account and we have inherited from the session controller of rails, therefore the controller 'accounts/sessions'.</p>\n\n<p><strong>Edit:</strong> A better solution is to change your form to always create a new session like this:</p>\n\n<p>The original code from the <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Display-a-custom-sign_in-form-anywhere-in-your-app\" rel=\"nofollow\">devise tutorial to customize the sign in view</a>:</p>\n\n<pre><code>&lt;%= form_for(:user, :url =&gt; session_path(:user)) do |f| %&gt;\n</code></pre>\n\n<p>Change it into the new action and use a post request:</p>\n\n<pre><code>&lt;%= form_for(:user, :url =&gt; new_session_path(:user), :method =&gt; :post) do |f| %&gt;\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 2786158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I2PI6.jpg?s=128&g=1", "display_name": "andrewwx10", "link": "https://stackoverflow.com/users/2786158/andrewwx10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1039, "favorite_count": 0, "accepted_answer_id": 34206510, "answer_count": 2, "score": 1, "last_activity_date": 1449765321, "creation_date": 1440621425, "last_edit_date": 1440624328, "question_id": 32236259, "link": "https://stackoverflow.com/questions/32236259/no-route-matches-patch-users-sign-in-devise-sign-in", "title": "No route matches [PATCH] &quot;/users/sign_in&quot; Devise Sign_In", "body": "<p>I keep recieving this error while trying to login to my rails app using devise:</p>\n\n<pre><code>No route matches [PATCH] \"/users/sign_in\"\n</code></pre>\n\n<p>I cannot for the life of me figure out why the sign in is not working with the devise gem. My routes are as follows:</p>\n\n<pre><code>              Prefix Verb   URI Pattern                    Controller#Action\n                root GET    /                              static_pages#home\n    new_user_session GET    /users/sign_in(.:format)       devise/sessions#new\n        user_session POST   /users/sign_in(.:format)       devise/sessions#create\ndestroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy\n       user_password POST   /users/password(.:format)      devise/passwords#create\n   new_user_password GET    /users/password/new(.:format)  devise/passwords#new\n  edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit\n                     PATCH  /users/password(.:format)      devise/passwords#update\n                     PUT    /users/password(.:format)      devise/passwords#update\ncancel_user_registration GET    /users/cancel(.:format)        devise/registrations#cancel\n   user_registration POST   /users(.:format)               devise/registrations#create\n   new_user_registration GET    /users/sign_up(.:format)       devise/registrations#new\nedit_user_registration GET    /users/edit(.:format)          devise/registrations#edit\n                     PATCH  /users(.:format)               devise/registrations#update\n                     PUT    /users(.:format)               devise/registrations#update\n                     DELETE /users(.:format)               devise/registrations#destroy\n                home GET    /home(.:format)                static_pages#home\n               about GET    /about(.:format)               static_pages#about\n             lessons GET    /lessons(.:format)             lessons#index\n                     POST   /lessons(.:format)             lessons#create\n          new_lesson GET    /lessons/new(.:format)         lessons#new\n         edit_lesson GET    /lessons/:id/edit(.:format)    lessons#edit\n              lesson GET    /lessons/:id(.:format)         lessons#show\n                     PATCH  /lessons/:id(.:format)         lessons#update\n                     PUT    /lessons/:id(.:format)         lessons#update\n                     DELETE /lessons/:id(.:format)         lessons#destroy\n</code></pre>\n\n<p>I see that PATCH /users/sign_in is not a route, but I can't figure out why it isn't created by devise_for :users? I was under the impression such call would generate all the necessary routes for basic authentication.</p>\n\n<p>EDIT 1:</p>\n\n<p>/app/views/devise/sessions/new.html.erb</p>\n\n<pre><code>&lt;h2&gt;Log in&lt;/h2&gt;\n\n&lt;%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :email %&gt;&lt;br /&gt;\n    &lt;%= f.email_field :email, autofocus: true %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :password %&gt;&lt;br /&gt;\n    &lt;%= f.password_field :password, autocomplete: \"off\" %&gt;\n  &lt;/div&gt;\n\n  &lt;% if devise_mapping.rememberable? -%&gt;\n    &lt;div class=\"field\"&gt;\n      &lt;%= f.check_box :remember_me %&gt;\n      &lt;%= f.label :remember_me %&gt;\n    &lt;/div&gt;\n  &lt;% end -%&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit \"Log in\" %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n\n&lt;%= render \"devise/shared/links\" %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "if-statement"], "comments": [{"owner": {"reputation": 26783, "user_id": 297114, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/30f7d0e60442d70d7e22667520442395?s=128&d=identicon&r=PG", "display_name": "Oscar Mederos", "link": "https://stackoverflow.com/users/297114/oscar-mederos"}, "edited": false, "score": 2, "creation_date": 1440621641, "post_id": 32236217, "comment_id": 52354890, "body": "You need to provide the context where you&#39;re calling this. At first I thought you wanted to make a method call if some condition was met, but you&#39;re calling that same method to check the condition <code>:)</code>, so please, provide more info about this"}, {"owner": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "edited": false, "score": 0, "creation_date": 1440622772, "post_id": 32236217, "comment_id": 52355448, "body": "i imagine the condition is just an example. take this one instead <code>foo(:bar) if [&#39;x&#39;,&#39;y&#39;].member?(foo(:bar))</code>. that is, run the method if the return value is part of some collection. in general, its give me the return value of this method if the return value meets some condition."}, {"owner": {"reputation": 67, "user_id": 4420322, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/05cd02fccf4212f2dce4182d0bc35f96?s=128&d=identicon&r=PG", "display_name": "Jan Hofmann", "link": "https://stackoverflow.com/users/4420322/jan-hofmann"}, "edited": false, "score": 0, "creation_date": 1440622978, "post_id": 32236217, "comment_id": 52355537, "body": "thx for all the answers, but why the downvote?"}], "answers": [{"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 1, "last_activity_date": 1440621703, "creation_date": 1440621703, "answer_id": 32236326, "question_id": 32236217, "link": "https://stackoverflow.com/questions/32236217/foobar-if-foobar-0-the-rails-way/32236326#32236326", "title": "foo(:bar) if foo(:bar) != 0 the rails-way?", "body": "<p>I can't think of a way to do it without referencing <code>foo(:bar)</code> twice. Ruby has ways of handling a <code>nil</code> response and substituting another value but not a zero value.</p>\n\n<pre><code>foo(:bar) unless foo(:bar).zero?\n\nfoo(:bar).zero? ? nil : foo(:bar)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "is_accepted": true, "score": 2, "last_activity_date": 1440621766, "creation_date": 1440621766, "answer_id": 32236347, "question_id": 32236217, "link": "https://stackoverflow.com/questions/32236217/foobar-if-foobar-0-the-rails-way/32236347#32236347", "title": "foo(:bar) if foo(:bar) != 0 the rails-way?", "body": "<p>your example is a pretty normal way of doing it. as @ndn said, you can assign to a variable if your method foo is either not performant or very verbose, and as a result inconvenient to call twice. </p>\n\n<pre><code>baz if (baz = foo(:bar)) != 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 888, "user_id": 5264870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5bd6b62db67b7e4cd1ef0464f5de64a?s=128&d=identicon&r=PG&f=1", "display_name": "dinomix", "link": "https://stackoverflow.com/users/5264870/dinomix"}, "is_accepted": false, "score": 0, "last_activity_date": 1440626821, "creation_date": 1440626821, "answer_id": 32237498, "question_id": 32236217, "link": "https://stackoverflow.com/questions/32236217/foobar-if-foobar-0-the-rails-way/32237498#32237498", "title": "foo(:bar) if foo(:bar) != 0 the rails-way?", "body": "<p>So you wish to call a function only if the result of that function is not 0. This means you must call the function anyway to check it's result, so just:</p>\n\n<pre><code>foo(:bar)\n</code></pre>\n\n<p>This is without context, if you provide some context for where you use this, i'm sure we could provide better options.</p>\n"}, {"comments": [{"owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "reply_to_user": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1440653216, "post_id": 32240137, "comment_id": 52363947, "body": "Thanks @Steve. When I read your comment, it occurred to me that I don&#39;t need the <code>x</code> variable for this case."}], "tags": [], "owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "is_accepted": false, "score": 1, "last_activity_date": 1440652843, "last_edit_date": 1440652843, "creation_date": 1440645702, "answer_id": 32240137, "question_id": 32236217, "link": "https://stackoverflow.com/questions/32236217/foobar-if-foobar-0-the-rails-way/32240137#32240137", "title": "foo(:bar) if foo(:bar) != 0 the rails-way?", "body": "<pre><code>[foo(:bar)].find{ |x| x.nonzero? }\n</code></pre>\n\n<p>of course in the general case, you can use any other predicate you wish instead of <code>x.nonzero?</code></p>\n\n<p>In the case given in the question, you can write even more simply</p>\n\n<pre><code>[foo(:baz)].find(&amp;:nonzero?)\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 4420322, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/05cd02fccf4212f2dce4182d0bc35f96?s=128&d=identicon&r=PG", "display_name": "Jan Hofmann", "link": "https://stackoverflow.com/users/4420322/jan-hofmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "accepted_answer_id": 32236347, "answer_count": 4, "score": 0, "last_activity_date": 1440652843, "creation_date": 1440621256, "question_id": 32236217, "link": "https://stackoverflow.com/questions/32236217/foobar-if-foobar-0-the-rails-way", "title": "foo(:bar) if foo(:bar) != 0 the rails-way?", "body": "<p>I have this if-condition:</p>\n\n<pre><code>foo(:bar) if foo(:bar) != 0\n</code></pre>\n\n<p>and I asked myself if there is a better \"rails-/ruby-way\" to express this condition? (Without calling the foo(:bar) twice?)</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 416, "user_id": 1031478, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8ebfd80989779e7e09777bc01ab21062?s=128&d=identicon&r=PG", "display_name": "ronan_mac", "link": "https://stackoverflow.com/users/1031478/ronan-mac"}, "edited": false, "score": 0, "creation_date": 1440620062, "post_id": 32235729, "comment_id": 52354039, "body": "It looks like a routing problem - try putting a <code>fail</code> in the index action in the controller to ensure that that action is being called."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1440620125, "post_id": 32235729, "comment_id": 52354071, "body": "What does it do? And why are you expecting the <code>index</code> controller to use <code>test_index.html.erb</code> as the view?"}, {"owner": {"reputation": 1005, "user_id": 2574811, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/04GJS.png?s=128&g=1", "display_name": "Senju", "link": "https://stackoverflow.com/users/2574811/senju"}, "reply_to_user": {"reputation": 416, "user_id": 1031478, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8ebfd80989779e7e09777bc01ab21062?s=128&d=identicon&r=PG", "display_name": "ronan_mac", "link": "https://stackoverflow.com/users/1031478/ronan-mac"}, "edited": false, "score": 0, "creation_date": 1440620540, "post_id": 32235729, "comment_id": 52354262, "body": "@ronan_mac putting fail &quot;failed&quot; in the index action does nothing"}, {"owner": {"reputation": 1005, "user_id": 2574811, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/04GJS.png?s=128&g=1", "display_name": "Senju", "link": "https://stackoverflow.com/users/2574811/senju"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1440620686, "post_id": 32235729, "comment_id": 52354360, "body": "@muistooshort Thanks I figured it out. Should have been using <code>test_index</code>, instead of just <code>index</code> in the controller.."}], "answers": [{"tags": [], "owner": {"reputation": 454, "user_id": 3169550, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000370892968/picture?type=large", "display_name": "aaron.v", "link": "https://stackoverflow.com/users/3169550/aaron-v"}, "is_accepted": false, "score": 2, "last_activity_date": 1440620085, "creation_date": 1440620085, "answer_id": 32235910, "question_id": 32235729, "link": "https://stackoverflow.com/questions/32235729/not-able-to-use-controller-in-view/32235910#32235910", "title": "Not able to use controller in view", "body": "<p>In your route file I believe you are missing the <code>to:</code> statement</p>\n\n<pre><code>Rails.application.routes.draw do\n  get 'test/test_index', to: 'test#index'\n  root :to =&gt; 'home#index'\nend\n</code></pre>\n"}], "owner": {"reputation": 1005, "user_id": 2574811, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/04GJS.png?s=128&g=1", "display_name": "Senju", "link": "https://stackoverflow.com/users/2574811/senju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440620085, "creation_date": 1440619491, "question_id": 32235729, "link": "https://stackoverflow.com/questions/32235729/not-able-to-use-controller-in-view", "title": "Not able to use controller in view", "body": "<p>I can't access rails objects created in my controller in my view. This should print \"test\" in the view, but does not:</p>\n\n<p>test_index.html.erb:</p>\n\n<pre><code>&lt;%= label_tag(@test) %&gt;\n</code></pre>\n\n<p>test_controller.rb:</p>\n\n<pre><code>class TestController &lt; ApplicationController\n  def index\n    @test = \"test\"\n  end\nend\n</code></pre>\n\n<p>routes.rb:</p>\n\n<pre><code>Rails.application.routes.draw do\n  get 'test/test_index'\n  root :to =&gt; 'home#index'\nend\n</code></pre>\n"}, {"tags": ["ruby", "mongodb", "hash", "bulkinsert"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1440621166, "post_id": 32235068, "comment_id": 52354650, "body": "do you get more accurate results with <code>map</code> instead of <code>.each</code> ?"}], "owner": {"reputation": 11, "user_id": 5258141, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-buLRxtZfPak/AAAAAAAAAAI/AAAAAAAAl-0/3knRKF0BsM0/photo.jpg?sz=128", "display_name": "Isaac Mativo", "link": "https://stackoverflow.com/users/5258141/isaac-mativo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1440617995, "creation_date": 1440617074, "last_edit_date": 1440617995, "question_id": 32235068, "link": "https://stackoverflow.com/questions/32235068/ruby-mongodb-insert-many", "title": "Ruby MongoDB insert_many", "body": "<p>I am trying to load a collection into MongoDB with <code>insert_many</code>:</p>\n\n<pre><code>result = @my_db[:\"my_database\"].insert_many([@my_hash.each { |key, value| {:id=&gt;key, :description=&gt;value[:description]}}])\n</code></pre>\n\n<p><code>my_hash</code> is a hash containing many hashes, each with one key-value pair.</p>\n\n<p>The collection of <code>my_hash</code> loads ok, but what I actually want is the key-values on the top level of the database collection.  Right now, I have to expand the top level of the collection to see the fields (key-value pairs).</p>\n"}, {"tags": ["ruby", "iteration"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1440618836, "post_id": 32234960, "comment_id": 52353388, "body": "Your desired output is misleading! It shows account 2 as belonging to customer 1 when, in fact, it does not belong to him."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1440618958, "post_id": 32234960, "comment_id": 52353466, "body": "Something&#39;s wrong. Either your output, or your sample data."}, {"owner": {"reputation": 8258, "user_id": 5182047, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vkgn6.jpg?s=128&g=1", "display_name": "Erik &#197;sland", "link": "https://stackoverflow.com/users/5182047/erik-%c3%85sland"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1440622300, "post_id": 32234960, "comment_id": 52355229, "body": "Sorry. Was a typo. It does in fact belong. Simple mistake. Fixed error."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1440631199, "post_id": 32234960, "comment_id": 52358684, "body": "I suggest you edit your question to make a few changes. 1. Represent the last four lines as a (named) array, such as <code>arr = [{&quot;account_id&quot;=&gt;1,...,2=&gt;0.0},...&#39;</code>. 2. Move <code>arr</code> to the beginning and say you are given this array. 3. State that the elements of the array are grouped by customer, and that if the value of <code>&quot;customer_id&quot;</code> is <code>nil</code> it is in the same customer group as the previous element. 4. State your question: how do you print the elements of <code>arr</code> so that it look like this:."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1440631409, "post_id": 32234960, "comment_id": 52358745, "body": "I suggested #1 above because the last four lines do not together constitute a valid Ruby object. That&#39;s almost guaranteed to attract downvotes."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1440640712, "post_id": 32234960, "comment_id": 52360845, "body": "You edited the question to completely change the meaning. Worse, you did so without telling readers that you had. Such changes can render answers and comments meaningless. My answer is evidence of that. The most significant aspect of your initial questions is that values of <code>&quot;customer_id&quot; could be </code>nil`. You changed that in complete silence. I rarely downvote questions but here I&#39;ve made an exception."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1440618751, "post_id": 32235481, "comment_id": 52353346, "body": "yeah, this can probably be simplified a bit :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1440631459, "post_id": 32235481, "comment_id": 52358761, "body": "Thanks @Sergio. I decided to use a machete."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1440640946, "last_edit_date": 1440640946, "creation_date": 1440618588, "answer_id": 32235481, "question_id": 32234960, "link": "https://stackoverflow.com/questions/32234960/need-assistance-optimizing-each-iteration/32235481#32235481", "title": "Need assistance optimizing `each` iteration", "body": "<p><strong>Edit:</strong> My solution answers the original question. If you are interested in knowing what that was, look at the question's revision history.</p>\n\n<p>Your (modified) array of hashes is:</p>\n\n<pre><code>arr = [{ \"account_id\"=&gt;1, \"customer_id\"=&gt;1,   \"balance\"=&gt;0.0 },\n       { \"account_id\"=&gt;2, \"customer_id\"=&gt;nil, \"balance\"=&gt;1000.0 },\n       { \"account_id\"=&gt;3, \"customer_id\"=&gt;1,   \"balance\"=&gt;500.0 },\n       { \"account_id\"=&gt;4, \"customer_id\"=&gt;2,   \"balance\"=&gt;9.0 },\n       { \"account_id\"=&gt;5, \"customer_id\"=&gt;2,   \"balance\"=&gt;0.0 }]\n</code></pre>\n\n<p>This is one simple way to print the contents of <code>arr</code> in the desired format:</p>\n\n<pre><code>CUST_ID_SIZE = 1\nCUST_ID_FILLER = ' '*(\"Customer # \".size + CUST_ID_SIZE)\n  #=&gt; \"            \"\n\nlast_id = nil\narr.each do |h|\n  if h[\"customer_id\"] &amp;&amp; h[\"customer_id\"] != last_id\n    last_id = h[\"customer_id\"]\n    print \"Customer # #{ h[\"customer_id\"] }\"\n  else\n    print CUST_ID_FILLER\n  end\n    puts \" Account # #{ h[\"account_id\"] } -----  Balance: $ #{ h[\"balance\"] }\\n\\n\"\nend\nCustomer # 1 Account # 1 -----  Balance: $ 0.0\n\n             Account # 2 -----  Balance: $ 1000.0\n\n             Account # 3 -----  Balance: $ 500.0\n\nCustomer # 2 Account # 4 -----  Balance: $ 9.0\n\n             Account # 5 -----  Balance: $ 0.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 1, "last_activity_date": 1440633240, "last_edit_date": 1440633240, "creation_date": 1440632786, "answer_id": 32238476, "question_id": 32234960, "link": "https://stackoverflow.com/questions/32234960/need-assistance-optimizing-each-iteration/32238476#32238476", "title": "Need assistance optimizing `each` iteration", "body": "<pre><code>@acct_list = [\n  {\"account_id\"=&gt;1, \"customer_id\"=&gt;1, \"balance\"=&gt;0.0, 0=&gt;1, 1=&gt;1, 2=&gt;0.0},\n  {\"account_id\"=&gt;2, \"customer_id\"=&gt;1, \"balance\"=&gt;1000.0, 0=&gt;2, 1=&gt;nil, 2=&gt;1000.0},\n  {\"account_id\"=&gt;3, \"customer_id\"=&gt;2, \"balance\"=&gt;9.0, 0=&gt;3, 1=&gt;2, 2=&gt;9.0},\n  {\"account_id\"=&gt;4, \"customer_id\"=&gt;2, \"balance\"=&gt;0.0, 0=&gt;4, 1=&gt;2, 2=&gt;0.0}\n]\n\n@acct_list.chunk{|h| h[\"customer_id\"]}\n.each do |customer, a| a\n  .each.with_index do |h, i|\n    puts \\\n      ((\"Customer ##{customer}\" if i.zero?)).to_s.ljust(11) +\n      \"Account ##{h[\"account_id\"]}  -----  Balance: $#{h[\"balance\"]}\",\n      nil\n  end\nend\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Customer #1 Account #1  -----  Balance: $0.0\n\n            Account #2  -----  Balance: $1000.0\n\nCustomer #2 Account #3  -----  Balance: $9.0\n\n            Account #4  -----  Balance: $0.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 740, "user_id": 3993528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2a8e387fa8dfb4e2e1a2d827c0fdfd8?s=128&d=identicon&r=PG", "display_name": "Joseph", "link": "https://stackoverflow.com/users/3993528/joseph"}, "is_accepted": false, "score": 1, "last_activity_date": 1440639885, "creation_date": 1440639885, "answer_id": 32239380, "question_id": 32234960, "link": "https://stackoverflow.com/questions/32234960/need-assistance-optimizing-each-iteration/32239380#32239380", "title": "Need assistance optimizing `each` iteration", "body": "<p>Seems like <code>group_by</code> would help you out here. You have a bunch of account data that you need grouped by <code>customer_id</code> and then processed for output.</p>\n\n<p><code>group_by</code> returns a hash where the keys are the grouping items (<code>customer_id</code>'s) and the values are an array of the inputs. You don't really need the keys, so call <code>.values</code> on the result to make <code>customer_accounts</code> an array of arrays where each array element contains an array of hashes for each account associated with one customer. Like this:</p>\n\n<p><code>[[{\"account_id\"=&gt;1, \"customer_id\"=&gt;1, \"balance\"=&gt;0.0}, {\"account_id\"=&gt;2, \"customer_id\"=&gt;1, \"balance\"=&gt;1000.0}], [{\"account_id\"=&gt;3, \"customer_id\"=&gt;2, \"balance\"=&gt;9.0}, {\"account_id\"=&gt;4, \"customer_id\"=&gt;2, \"balance\"=&gt;0.0}]]</code></p>\n\n<p>Then iterate over <code>customer_accounts</code> to get each customer's info and iterate over each <code>customer</code> using the <code>with_index</code> option so that you can assign the <code>Customer #</code> only to the first one and the needed spacing to all others, collecting all results into the <code>account_output</code> string.</p>\n\n<pre><code>account_list = [{\"account_id\"=&gt;1, \"customer_id\"=&gt;1, \"balance\"=&gt;0.0}, \n{\"account_id\"=&gt;2, \"customer_id\"=&gt;1, \"balance\"=&gt;1000.0}, \n{\"account_id\"=&gt;3, \"customer_id\"=&gt;2, \"balance\"=&gt;9.0}, \n{\"account_id\"=&gt;4, \"customer_id\"=&gt;2, \"balance\"=&gt;0.0}]\n\ndef account_info(acct_list)\n  account_output = \"\"\n\n  customer_accounts = acct_list.group_by { |account| account['customer_id'] }.values\n\n  customer_accounts.each do |customer|\n    customer.each_with_index do |account, index|\n      if index == 0\n        account_output += \"Customer ##{account['customer_id']} Account ##{account['account_id']} ----- Balance: $#{account['balance']}\\n\"\n      else\n        account_output += \"            Account ##{account['account_id']} ----- Balance: $#{account['balance']}\\n\"\n      end\n    end\n  end\n\n  print account_output\n\nend\n\naccount_info(account_list)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "is_accepted": false, "score": 1, "last_activity_date": 1440685264, "creation_date": 1440685264, "answer_id": 32251954, "question_id": 32234960, "link": "https://stackoverflow.com/questions/32234960/need-assistance-optimizing-each-iteration/32251954#32251954", "title": "Need assistance optimizing `each` iteration", "body": "<pre><code>list = [\n    {\"account_id\" =&gt; 1, \"customer_id\" =&gt; 1, \"balance\" =&gt; 0.0, 0 =&gt; 1, 1 =&gt; 1, 2 =&gt; 0.0},\n    {\"account_id\" =&gt; 2, \"customer_id\" =&gt; 1, \"balance\" =&gt; 1000.0, 0 =&gt; 2, 1 =&gt; nil, 2 =&gt; 1000.0},\n    {\"account_id\" =&gt; 3, \"customer_id\" =&gt; 2, \"balance\" =&gt; 9.0, 0 =&gt; 3, 1 =&gt; 2, 2 =&gt; 9.0},\n    {\"account_id\" =&gt; 4, \"customer_id\" =&gt; 2, \"balance\" =&gt; 0.0, 0 =&gt; 4, 1 =&gt; 2, 2 =&gt; 0.0}\n]\n\nlist.chunk{|h| h[\"customer_id\"]}.each { |customer_id, customer_data|\n    msg = \"Customer # #{customer_id}\"\n    cust_id_filter = ' ' * (msg.size)\n    customer_data.each { |h|\n        print (msg ? msg : cust_id_filter) + \" Account # #{h[\"account_id\"]} ---- Balance: $ #{h[\"balance\"]}\\n\\n\"\n        msg = nil if msg\n    }\n}\n</code></pre>\n\n<p>you should your output:</p>\n\n<pre><code>Customer # 1 Account # 1 ---- Balance: $ 0.0\n\n             Account # 2 ---- Balance: $ 1000.0\n\nCustomer # 2 Account # 3 ---- Balance: $ 9.0\n\n             Account # 4 ---- Balance: $ 0.0\n</code></pre>\n"}], "owner": {"reputation": 8258, "user_id": 5182047, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vkgn6.jpg?s=128&g=1", "display_name": "Erik &#197;sland", "link": "https://stackoverflow.com/users/5182047/erik-%c3%85sland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 32238476, "answer_count": 4, "score": -5, "last_activity_date": 1440685264, "creation_date": 1440616692, "last_edit_date": 1440631927, "question_id": 32234960, "link": "https://stackoverflow.com/questions/32234960/need-assistance-optimizing-each-iteration", "title": "Need assistance optimizing `each` iteration", "body": "<p>I have <code>@acct_list</code>: </p>\n\n<pre><code>{\"account_id\"=&gt;1, \"customer_id\"=&gt;1, \"balance\"=&gt;0.0, 0=&gt;1, 1=&gt;1, 2=&gt;0.0}\n{\"account_id\"=&gt;2, \"customer_id\"=&gt;1, \"balance\"=&gt;1000.0, 0=&gt;2, 1=&gt;nil, 2=&gt;1000.0}\n{\"account_id\"=&gt;3, \"customer_id\"=&gt;2, \"balance\"=&gt;9.0, 0=&gt;3, 1=&gt;2, 2=&gt;9.0}\n{\"account_id\"=&gt;4, \"customer_id\"=&gt;2, \"balance\"=&gt;0.0, 0=&gt;4, 1=&gt;2, 2=&gt;0.0}\n</code></pre>\n\n<p>I am attempting to display customer #'s and account #'s for a bank program. I would like my display to read something like this: </p>\n\n<pre><code>Customer #1 Account #1  -----  Balance: $0.0\n\n            Account #2  -----  Balance: $1000.0\n\nCustomer #2 Account #3  -----  Balance: $9.0\n\n            Account #4  -----  Balance: $0.0\n</code></pre>\n\n<p>Each customer should be displayed only once with the total amount of accounts that the customer has.</p>\n\n<p>This is what my code looks like:</p>\n\n<pre><code>def self.account_info2(acct_list)\n  account_id_array = []\n  acct_list.each do |a|\n    print \"\\n\"\n    print 'Customer #' + a[\"customer_id\"].to_s + ' Account #' + a[\"account_id\"].to_s + \"  -----  \" + \"Balance: $\" +\n    a[\"balance\"].to_s\n    print \"\\n\"\n    account_id_array.push(a[\"account_id\"])\n  end\n  account_id_array\nend\n@acct_list = bank.account_list(@man_name, @man_pin)\nreturn account_info2(@acct_list)\n</code></pre>\n\n<p>It displays unnecessary duplicates of the <code>Customer #</code>:</p>\n\n<pre><code>Customer #1 Account #1  -----  Balance: $0.0\n\nCustomer #1 Account #2  -----  Balance: $1000.0\n\nCustomer #2 Account #3  -----  Balance: $9.0\n\nCustomer #2 Account #4  -----  Balance: $0.0\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-ec2", "capistrano", "rubber"], "comments": [{"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 1, "creation_date": 1440618340, "post_id": 32234896, "comment_id": 52353145, "body": "Possible duplicate of <a href=\"http://dba.stackexchange.com/questions/83984/connect-to-postgresql-server-fatal-no-pg-hba-conf-entry-for-host\" title=\"connect to postgresql server fatal no pg hba conf entry for host\">dba.stackexchange.com/questions/83984/&hellip;</a>?"}, {"owner": {"reputation": 399, "user_id": 719661, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f52d8660c0c8d98223778a71ba89844a?s=128&d=identicon&r=PG&f=1", "display_name": "dcalixto", "link": "https://stackoverflow.com/users/719661/dcalixto"}, "reply_to_user": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1440618631, "post_id": 32234896, "comment_id": 52353274, "body": "no because this is a rubber ec2 issue"}, {"owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1440627337, "post_id": 32234896, "comment_id": 52357446, "body": "@dcalixto If you&#39;re looking for a bug fix in the rubber gem, you should open an issue on their github page."}, {"owner": {"reputation": 399, "user_id": 719661, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f52d8660c0c8d98223778a71ba89844a?s=128&d=identicon&r=PG&f=1", "display_name": "dcalixto", "link": "https://stackoverflow.com/users/719661/dcalixto"}, "edited": false, "score": 0, "creation_date": 1440627786, "post_id": 32234896, "comment_id": 52357619, "body": "well, someone got the same problem, and know the fix"}], "owner": {"reputation": 399, "user_id": 719661, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f52d8660c0c8d98223778a71ba89844a?s=128&d=identicon&r=PG&f=1", "display_name": "dcalixto", "link": "https://stackoverflow.com/users/719661/dcalixto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1440616467, "creation_date": 1440616467, "question_id": 32234896, "link": "https://stackoverflow.com/questions/32234896/rubber-rails-pgconnectionbad-not-connect-to-ec2", "title": "Rubber Rails PG::ConnectionBad not connect to EC2", "body": "<p>After update to rubber 3.1.0 and using postgres 9.3 on a 3.2.22 rails app i'm trying to deploy on Ec2 is showing this on the log:</p>\n\n<pre><code>** [out :: app01.foo.com] PG::ConnectionBad: FATAL: no pg_hba.conf entry for host \"172.35.45.216\", user \"foo\", database \"foo_production\", SSL on\n** [out :: app01.foo.com] \n** [out :: app01.foo.com] FATAL: no pg_hba.conf entry for host \"172.35.45.216\", user \"foo\", database \"foo_production\", SSL off\n</code></pre>\n\n<p>someone got the same problem?</p>\n"}, {"tags": ["ruby", "csv"], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1440619547, "post_id": 32235118, "comment_id": 52353782, "body": "Don&#39;t read data into an array unless you&#39;re guaranteed that the file will fit into memory. CSV files can be huge, especially when used to move database tables. It&#39;s easy to use <code>foreach</code> and still ignore the first row which maintains scalability. <a href=\"http://stackoverflow.com/questions/25189262/why-is-slurping-a-file-bad\">Slurping data, such as using <code>read</code> is going to be slower 99% of the time than using <code>foreach</code></a>.."}, {"owner": {"reputation": 5017, "user_id": 2047418, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1d49bccfa9d2c633db6f854e67b88362?s=128&d=identicon&r=PG", "display_name": "Filip Bartuzi", "link": "https://stackoverflow.com/users/2047418/filip-bartuzi"}, "edited": false, "score": 0, "creation_date": 1440670982, "post_id": 32235118, "comment_id": 52374085, "body": "This raises ` <code>foreach&#39;: wrong number of arguments (3 for 1..2) (ArgumentError</code>"}], "tags": [], "owner": {"reputation": 712, "user_id": 4191738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKXDY.jpg?s=128&g=1", "display_name": "Sculper", "link": "https://stackoverflow.com/users/4191738/sculper"}, "is_accepted": false, "score": 3, "last_activity_date": 1440683358, "last_edit_date": 1440683358, "creation_date": 1440617211, "answer_id": 32235118, "question_id": 32234861, "link": "https://stackoverflow.com/questions/32234861/open-csv-without-reading-header-rows-in-ruby/32235118#32235118", "title": "Open CSV without reading header rows in Ruby", "body": "<p>There are a few ways you could handle this.  The simplest method would be to pass the <code>{headers: true}</code> option to your loop:</p>\n\n<pre><code>CSV.foreach(file_name, headers: true) do |row|\n  update_row! row    \nend\n</code></pre>\n\n<p>Notice how there is no mode specified - this is because according to the documentation, <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html#method-c-foreach\" rel=\"nofollow\">CSV::foreach</a> takes only the file and options hash as its arguments (as opposed to, say, <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html#method-c-open\" rel=\"nofollow\">CSV::open</a>, which <em>does</em> allow one to specify mode.</p>\n\n<p>Alternatively, you could read the data into an array (rather than using foreach), and <code>shift</code> the array before iterating over it:</p>\n\n<pre><code> my_csv= CSV.read(filename)\n my_csv.shift\n my_csv.each do |row|\n     update_row! row \n end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1979, "user_id": 528302, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8d65eef623ff08d7a1e1d21ca3f97cb0?s=128&d=identicon&r=PG", "display_name": "Tim", "link": "https://stackoverflow.com/users/528302/tim"}, "is_accepted": false, "score": 1, "last_activity_date": 1440617658, "creation_date": 1440617658, "answer_id": 32235236, "question_id": 32234861, "link": "https://stackoverflow.com/questions/32234861/open-csv-without-reading-header-rows-in-ruby/32235236#32235236", "title": "Open CSV without reading header rows in Ruby", "body": "<p>According to <a href=\"http://ruby-doc.org/stdlib-2.2.3/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow\">Ruby doc</a>:</p>\n\n<pre><code>options = {:headers=&gt;true}\nCSV.foreach(file_name, options) ...\n</code></pre>\n\n<p>should suffice.</p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1440619936, "creation_date": 1440619936, "answer_id": 32235864, "question_id": 32234861, "link": "https://stackoverflow.com/questions/32234861/open-csv-without-reading-header-rows-in-ruby/32235864#32235864", "title": "Open CSV without reading header rows in Ruby", "body": "<p>A simple thing to do that works when reading files line-by-line is:</p>\n\n<pre><code>CSV.foreach(file_name, \"r+\") do |row|\n  next if $. == 1\n  update_row! row    \nend\n</code></pre>\n\n<p><code>$.</code> is a global variable in Ruby that contains the line-number of the file being read.</p>\n"}], "owner": {"reputation": 5017, "user_id": 2047418, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1d49bccfa9d2c633db6f854e67b88362?s=128&d=identicon&r=PG", "display_name": "Filip Bartuzi", "link": "https://stackoverflow.com/users/2047418/filip-bartuzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3606, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1440683358, "creation_date": 1440616367, "last_edit_date": 1440616597, "question_id": 32234861, "link": "https://stackoverflow.com/questions/32234861/open-csv-without-reading-header-rows-in-ruby", "title": "Open CSV without reading header rows in Ruby", "body": "<p>I'm opening CSV using Ruby:</p>\n\n<pre><code>CSV.foreach(file_name, \"r+\") do |row|\n  next if row[0] == 'id'\n  update_row! row    \nend\n</code></pre>\n\n<p>and I don't really care about headers row.</p>\n\n<p>I don't like <code>next if row[1] == 'id'</code> inside loop. Is there anyway to tell CSV to skip headers row and just iterate through rows with data ? </p>\n\n<p>I assume provided CSVs always have a header row.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1440616425, "post_id": 32234826, "comment_id": 52352076, "body": "It is not best practice to define a method within another method definition."}, {"owner": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "reply_to_user": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 2, "creation_date": 1440616588, "post_id": 32234826, "comment_id": 52352174, "body": "@HunterStevens, That has nothing to do with the question."}, {"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1440616960, "post_id": 32234826, "comment_id": 52352370, "body": "I meant to say that it may be best to create 2 distinct methods, as to maybe avoid the issue you are having. But it was then too late for me to edit my comment. The answers below work around the double definition, though :-)"}, {"owner": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "reply_to_user": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1440617096, "post_id": 32234826, "comment_id": 52352454, "body": "@HunterStevens, I wasn&#39;t asking how to do it some other way that works around the problem.  That&#39;s obviously trivial.  The point of the question was to <i>understand</i>, not to <i>avoid</i> understanding by doing the &quot;normal&quot; thing."}], "answers": [{"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 5, "last_activity_date": 1440616591, "creation_date": 1440616591, "answer_id": 32234933, "question_id": 32234826, "link": "https://stackoverflow.com/questions/32234826/why-doesnt-this-closure-work/32234933#32234933", "title": "Why doesn&#39;t this closure work?", "body": "<p>The reason is that the <code>def</code> keyword defines a new scope.</p>\n\n<p>To work around this, you can use <code>Object#define_singleton_method</code> instead:</p>\n\n<pre><code>def test_closure(close_over_me: 1)\n  Object.new.tap do |x|\n    x.define_singleton_method(:captured_var) do\n      close_over_me\n    end\n  end\nend\n\no = test_closure\no.captured_var # =&gt; 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 3, "last_activity_date": 1440616594, "creation_date": 1440616594, "answer_id": 32234934, "question_id": 32234826, "link": "https://stackoverflow.com/questions/32234826/why-doesnt-this-closure-work/32234934#32234934", "title": "Why doesn&#39;t this closure work?", "body": "<p>It's so-called \"scope gate\". Keywords <code>def</code>/<code>class</code>/<code>module</code> push all local variables out of scope.</p>\n\n<p>You'll have to come up with a way to do your patching without those.</p>\n"}], "owner": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 1, "accepted_answer_id": 32234933, "answer_count": 2, "score": 1, "last_activity_date": 1440616594, "creation_date": 1440616233, "question_id": 32234826, "link": "https://stackoverflow.com/questions/32234826/why-doesnt-this-closure-work", "title": "Why doesn&#39;t this closure work?", "body": "<p>In the example below, I would have thought that <code>close_over_me</code> would be available to the returned object through a closure. </p>\n\n<p>But clearly that is not the case.</p>\n\n<p>Why not?</p>\n\n<p>Also, what options are available for making the code work as expected (that is, returning the value 1 rather than an error)?</p>\n\n<pre><code>def test_closure(close_over_me: 1)\n  Object.new.tap do |x|\n    def x.captured_var\n      close_over_me\n    end\n  end\nend\n\no = test_closure\no.captured_var # NameError: undefined local variable or method `close_over_me' for #&lt;Object:0x007fb46b41a718&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "stripe-payments", "spree", "payment-processing"], "owner": {"reputation": 514, "user_id": 4607118, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7MNST.jpg?s=128&g=1", "display_name": "Julian Rodriguez", "link": "https://stackoverflow.com/users/4607118/julian-rodriguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 204, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1440625631, "creation_date": 1440615920, "last_edit_date": 1440625631, "question_id": 32234729, "link": "https://stackoverflow.com/questions/32234729/custom-spree-discounts-points-system-for-discount", "title": "Custom Spree Discounts. Points system for discount", "body": "<p>I don't have tons of experience in ruby nor Spree, but I have been playing around with the Spree 3.0 stable version for a while and I was wondering about how can I implement a discount system based in points which users collect somehow.</p>\n\n<p>According to that, a user could select the amount of points that he wants to use for a determinate product in the product details page, lets say next to the \"add to cart\" button. Each point has a representation in the current currency, so right after the item has been added to the cart, I want to calculate the discount based in the selected quantity of points and attach it to the current order.</p>\n\n<p>I have been try to set some values in @order to try to receive the correct amount (I mean, the discount amount not included) in my spree payment gateway (which is stripe) without success.</p>\n\n<p>I have tried to change from a view using ruby code:</p>\n\n<pre><code>@order.item_total\n@order.total\n@order.promo_total\n@order.amount (this is not even possible to set like I am trying to do it)\n</code></pre>\n\n<p>The thing is that Stripe always get the payment for the complete amount, not including the discount.</p>\n\n<p>What and where should I change to modify the amount that the Spree payment gateway receive? Doesn't the payment gateway receive the complete order object?</p>\n\n<p>I would appreciate any help to clear this, also if you have any idea about how to get my goal it also would be appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "reply_to_user": {"reputation": 435, "user_id": 2084919, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a56ebf8dfd0924eab98ef0ceec44177d?s=128&d=identicon&r=PG", "display_name": "Shwheelz", "link": "https://stackoverflow.com/users/2084919/shwheelz"}, "edited": false, "score": 0, "creation_date": 1440616023, "post_id": 32234649, "comment_id": 52351810, "body": "your rails server run in the development environment?"}, {"owner": {"reputation": 435, "user_id": 2084919, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a56ebf8dfd0924eab98ef0ceec44177d?s=128&d=identicon&r=PG", "display_name": "Shwheelz", "link": "https://stackoverflow.com/users/2084919/shwheelz"}, "edited": false, "score": 0, "creation_date": 1440616283, "post_id": 32234649, "comment_id": 52351977, "body": "I made the mistake of using a file called secrets.sample.yml instead of secrets.yml.  It&#39;s working now.  Thanks for the answer, that command was exactly what I needed!"}, {"owner": {"reputation": 435, "user_id": 2084919, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a56ebf8dfd0924eab98ef0ceec44177d?s=128&d=identicon&r=PG", "display_name": "Shwheelz", "link": "https://stackoverflow.com/users/2084919/shwheelz"}, "edited": false, "score": 0, "creation_date": 1440617604, "post_id": 32234649, "comment_id": 52352747, "body": "Thanks, had to wait for StackOverflow&#39;s timer to allow me to do so"}], "tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": true, "score": 23, "last_activity_date": 1440615922, "last_edit_date": 1440615922, "creation_date": 1440615605, "answer_id": 32234649, "question_id": 32234620, "link": "https://stackoverflow.com/questions/32234620/generating-a-new-secrets-yml-file/32234649#32234649", "title": "Generating a new secrets.yml file", "body": "<p>This rake task generate secret for you:</p>\n\n<pre><code>bundle exec rake secret\n</code></pre>\n\n<blockquote>\n  <p>Generate a cryptographically secure secret key (this is typically\n  used to generate a secret for cookie sessions)</p>\n</blockquote>\n\n<p>All rake tasks:</p>\n\n<pre><code>bundle exec rake -T \n</code></pre>\n\n<p>The secrets.yml file(note the indentation):</p>\n\n<pre><code>development:\n  secret_key_base: d140269c106b6d064cdd670a5aace0bbbb1400de545377a47836dbdab8104f2fdf0ab87e6b7982819d1bcc2ccf6a5f093985a0895970f01f30b0b15378a090e9\n  some_key: 338a3312d82\n  some_secret: f5d9c3214e7b\n  other_environment: development\n  other_password: password\n\nproduction:\n  secret_key_base: d140269c106b6d064cdd670a5aace0bbbb1400de545377a47836dbdab8104f2fdf0ab87e6b7982819d1bcc2ccf6a5f093985a0895970f01f30b0b15378a090e9\n  some_key: 338a3312d82\n  some_secret: f5d9c3214e7b\n  other_environment: development\n  other_password: password\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3408, "user_id": 659634, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c68127bd31a9fe0abcf48de4a96cb4d4?s=128&d=identicon&r=PG", "display_name": "Whitecat", "link": "https://stackoverflow.com/users/659634/whitecat"}, "is_accepted": false, "score": 11, "last_activity_date": 1494267573, "creation_date": 1494267573, "answer_id": 43854671, "question_id": 32234620, "link": "https://stackoverflow.com/questions/32234620/generating-a-new-secrets-yml-file/43854671#43854671", "title": "Generating a new secrets.yml file", "body": "<p>In Rails 5 you can simply type. </p>\n\n<pre><code>rails secret\n</code></pre>\n\n<p>This will generate a new key for you. Just copy the key and put it in your <code>secrets.yml</code> file</p>\n\n<pre><code>development:\n  secret_key_base: &lt;Generated key&gt;\n</code></pre>\n"}], "owner": {"reputation": 435, "user_id": 2084919, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a56ebf8dfd0924eab98ef0ceec44177d?s=128&d=identicon&r=PG", "display_name": "Shwheelz", "link": "https://stackoverflow.com/users/2084919/shwheelz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19470, "favorite_count": 2, "accepted_answer_id": 32234649, "answer_count": 2, "score": 12, "last_activity_date": 1494267573, "creation_date": 1440615481, "question_id": 32234620, "link": "https://stackoverflow.com/questions/32234620/generating-a-new-secrets-yml-file", "title": "Generating a new secrets.yml file", "body": "<p>I'm trying to clone a rails repository from github, but it doesn't have a secrets.yml file.  When I try to run the app from rails server, I get the error</p>\n\n<p>Missing <code>secret_key_base</code> for 'development' environment, set this value in <code>config/secrets.yml</code></p>\n\n<p>I know what the structure of the file is supposed to look like, but is there a way for me to generate keys to use the development environment?</p>\n"}, {"tags": ["ruby", "http", "rack"], "comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1440614989, "post_id": 32234377, "comment_id": 52351244, "body": "There are two <code>end</code> missing in your program.  It does not compile without those"}, {"owner": {"reputation": 7276, "user_id": 1419236, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7b397e63cc2782396ceb5934ed6e0efc?s=128&d=identicon&r=PG&f=1", "display_name": "RobertJoseph", "link": "https://stackoverflow.com/users/1419236/robertjoseph"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1440615910, "post_id": 32234377, "comment_id": 52351750, "body": "It was not my intention to have it be compilable (you can&#39;t test it in isolation anyway). My intension was to signify that there is elided code with the use of ellipses."}], "answers": [{"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 5, "last_activity_date": 1440615451, "creation_date": 1440615451, "answer_id": 32234610, "question_id": 32234377, "link": "https://stackoverflow.com/questions/32234377/how-to-perform-an-http-redirect-302-using-rack/32234610#32234610", "title": "How to perform an HTTP redirect (302) using Rack?", "body": "<p>Here is working app with re-direct to Google</p>\n\n<pre><code>require 'rack'\nrequire 'rack/server'\n\nclass HelloWorld\n  def response\n    [ 302, {'Location' =&gt;\"http://google.com\"}, [] ]\n  end\nend\n\nclass HelloWorldApp\n  def self.call(env)\n    HelloWorld.new.response\n  end\nend\n\nRack::Server.start :app =&gt; HelloWorldApp\n</code></pre>\n"}], "owner": {"reputation": 7276, "user_id": 1419236, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7b397e63cc2782396ceb5934ed6e0efc?s=128&d=identicon&r=PG&f=1", "display_name": "RobertJoseph", "link": "https://stackoverflow.com/users/1419236/robertjoseph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1712, "favorite_count": 1, "accepted_answer_id": 32234610, "answer_count": 1, "score": 0, "last_activity_date": 1440616163, "creation_date": 1440614751, "last_edit_date": 1440614955, "question_id": 32234377, "link": "https://stackoverflow.com/questions/32234377/how-to-perform-an-http-redirect-302-using-rack", "title": "How to perform an HTTP redirect (302) using Rack?", "body": "<p>I am messing around with my first Rack application (this is just for experimentation).</p>\n\n<p>When a call comes in I do something like this:</p>\n\n<pre><code>class Application\n    def call(env)\n      # Totally ignore favicons for the time being\n      if env['PATH_INFO'] == '/favicon.ico'\n        return [ 404, {'Content-Type' =&gt; 'text/html'}, [] ]\n      elsif env['PATH_INFO'] == '/'\n        return [ 302, {'http-equiv' =&gt; \"refresh\", 'content' =&gt; \"2;url=http://google.com\"}, [] ]\n      end\n      ...\n</code></pre>\n\n<p>I know this is horrible... but, again, this isn't a serious project.</p>\n\n<p>I'm trying to figure out how to do the redirect. What I have does not work. Basically, when you hit / on my site I want to redirect that require to google.com.</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "multidimensional-array"], "comments": [{"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1440615614, "post_id": 32234356, "comment_id": 52351589, "body": "(1) Do you have your controller methods (think CRUD) properly setup? (2) Why is your Label model empty? It should have an association with your contacts. (3) Please narrow your post to <b>one question</b>. (4) Edit your post (with the previous details, <b>not as comments</b>) and correctly format the code. Paste your code directly in, then click the <code>{}</code> button, to format it. I tried editing it for format, but your post was too jumbled with details for me to handle"}, {"owner": {"reputation": 285, "user_id": 2970050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6ebb92674288a036a7df33655b85eec0?s=128&d=identicon&r=PG&f=1", "display_name": "user2970050", "link": "https://stackoverflow.com/users/2970050/user2970050"}, "reply_to_user": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1440617221, "post_id": 32234356, "comment_id": 52352528, "body": "hi - thanks for feedback - i updated the question.   Yes, I was thinking my issue was that i was not saving the array properly, but maybe its more of a front end (of how do i take the array (from labels) and render back to display the one Contact::GRADES selected."}, {"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1440617920, "post_id": 32234356, "comment_id": 52352917, "body": "I would suggest that you post any error messages you have. How do you know it is not saving correctly? Does it display right in the database, but not in the view?"}, {"owner": {"reputation": 285, "user_id": 2970050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6ebb92674288a036a7df33655b85eec0?s=128&d=identicon&r=PG&f=1", "display_name": "user2970050", "link": "https://stackoverflow.com/users/2970050/user2970050"}, "reply_to_user": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1440618875, "post_id": 32234356, "comment_id": 52353411, "body": "Okay -see above - on the form input, i replaced the Contact::GRADES to be explicit and this now works so  when go via EDIT, it displays the collection I had picked ( A+, A, B).  So why doesn&#39;t referencing the Contact::GRADES work on EDIT?"}, {"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1440619237, "post_id": 32234356, "comment_id": 52353610, "body": "Have you done the Getting Started section on Rails Guides? I suggest doing that before a more complicated app. Your question is still difficult to understand, as you post a lot of code without much organization. (You have two MODELS sections in the question)"}, {"owner": {"reputation": 285, "user_id": 2970050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6ebb92674288a036a7df33655b85eec0?s=128&d=identicon&r=PG&f=1", "display_name": "user2970050", "link": "https://stackoverflow.com/users/2970050/user2970050"}, "reply_to_user": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1440619887, "post_id": 32234356, "comment_id": 52353953, "body": "hey thanks.  yes, the 2 models are relevant -hence why i posted them both. I am trying not to duplicate the code in the second.  Anyway, I think i have figured out by just posting it.    if you want me to delete this completely (as it may be confusing for others), just let me know and I will.  many thanks for questions - it brought some clarity to what i am doing."}, {"owner": {"reputation": 4100, "user_id": 217756, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/547377f831a0ee3de6df245b7d40cbff?s=128&d=identicon&r=PG", "display_name": "tomsoft", "link": "https://stackoverflow.com/users/217756/tomsoft"}, "edited": false, "score": 1, "creation_date": 1440697693, "post_id": 32234356, "comment_id": 52392490, "body": "Not very clear, but if you just want to convert array like [1,2,3] why not just do   [1,2,3].map{|idx| grade[idx]}.join(&#39; &#39;)"}, {"owner": {"reputation": 285, "user_id": 2970050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6ebb92674288a036a7df33655b85eec0?s=128&d=identicon&r=PG&f=1", "display_name": "user2970050", "link": "https://stackoverflow.com/users/2970050/user2970050"}, "reply_to_user": {"reputation": 4100, "user_id": 217756, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/547377f831a0ee3de6df245b7d40cbff?s=128&d=identicon&r=PG", "display_name": "tomsoft", "link": "https://stackoverflow.com/users/217756/tomsoft"}, "edited": false, "score": 0, "creation_date": 1440699145, "post_id": 32234356, "comment_id": 52393326, "body": "@tomsoft  - that did the trick great. many thanks.   &lt;%= print_campaign.grades.compact.map{|idx| PrintCampaign::GRADES[idx][0]}.join(&#39; &#39;)  %&gt;"}], "answers": [{"tags": [], "owner": {"reputation": 1167, "user_id": 506357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52fcc423b1ca162671ba810fd6ef65e?s=128&d=identicon&r=PG", "display_name": "supermoogle", "link": "https://stackoverflow.com/users/506357/supermoogle"}, "is_accepted": true, "score": 1, "last_activity_date": 1440711366, "creation_date": 1440711366, "answer_id": 32259859, "question_id": 32234356, "link": "https://stackoverflow.com/questions/32234356/rails-converting-an-integer-to-array-offset/32259859#32259859", "title": "Rails, converting an integer to array offset", "body": "<p><code>[0, 1, 2].map {|g| Contact::GRADES.select.map {|letter, val| val == g; letter}</code></p>\n\n<p>Really though <code>GRADES</code> seems much better off as a <code>Hash</code>:</p>\n\n<p><code>\nGRADES = {\n  \"A+\" =&gt; 0,\n  \"A\" =&gt; 1,\n  ..\n}\n</code></p>\n\n<p>Then you lookup would be much simpler </p>\n\n<p><code>[0, 1, 2].map {|g| Contact::GRADES.key(g) }</code></p>\n"}], "owner": {"reputation": 285, "user_id": 2970050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6ebb92674288a036a7df33655b85eec0?s=128&d=identicon&r=PG&f=1", "display_name": "user2970050", "link": "https://stackoverflow.com/users/2970050/user2970050"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "accepted_answer_id": 32259859, "answer_count": 1, "score": 3, "last_activity_date": 1440711366, "creation_date": 1440614688, "last_edit_date": 1495535625, "question_id": 32234356, "link": "https://stackoverflow.com/questions/32234356/rails-converting-an-integer-to-array-offset", "title": "Rails, converting an integer to array offset", "body": "<p>Based on feedback, I am revising this question.  How do i convert an integer array to a set of values displayed on the view page using the Constants (defined in the model).  I can do it on my form page but have not figured it out for the Index.</p>\n\n<p>On an Index Page (if dbase has grades: [0, 1, 2], the page should display as A+, A, B)  </p>\n\n<p>something like what is done for days of the week (e.g. <a href=\"http://hightechsorcery.com/2010/02/16/ruby-arrays-and-hashes-and-days-of-the-week/\" rel=\"nofollow noreferrer\">http://hightechsorcery.com/2010/02/16/ruby-arrays-and-hashes-and-days-of-the-week/</a></p>\n\n<pre><code>....\n&lt;h4 class=\"h3\"&gt;&lt;%= @gradestemp %&gt;\n</code></pre>\n\n<p><strong>CONTROLLER</strong> Labels Controller</p>\n\n<pre><code>  def index\n    @labels = current_user.labels\n    grad = []\n    @gradestemp = Contact::GRADES.each_with_index { |x, i| grad &lt;&lt; [x, i] }\n    render\n  end\n</code></pre>\n\n<p><strong>MODEL</strong>  NB: GRADES is a constant - I am trying to also use in Labels\n     class Label &lt; ActiveRecord::Base\n    NB:  this is in the CONTACT model</p>\n\n<pre><code>  GRADES  = [[\"A+\",0 ], [\"A\",1], [\"B\", 2], [ \"C\",3], [ \"D\",4], [ \"-\",5]]\n</code></pre>\n\n<p>Am i able to access the Contact GRADES while in the Labels controller?</p>\n\n<p>i have found this SO - which is similar to what i am trying to do: \n<a href=\"https://stackoverflow.com/questions/6590364/ruby-how-to-store-and-display-a-day-of-the-week\">Ruby: How to store and display a day of the week?</a></p>\n\n<p>Based suggestion below, this did the trick:</p>\n\n<pre><code>&lt;h4 class=\"h3\"&gt;&lt;%= print_campaign.grades.compact.map{|idx| Contact::GRADES[idx][0]}.join(' ')  %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "elasticsearch", "sinatra"], "comments": [{"owner": {"reputation": 163519, "user_id": 4604579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/reC2t.jpg?s=128&g=1", "display_name": "Val", "link": "https://stackoverflow.com/users/4604579/val"}, "edited": false, "score": 0, "creation_date": 1440642650, "post_id": 32234258, "comment_id": 52361220, "body": "There once was a <a href=\"https://github.com/kzwang/elasticsearch-image\" rel=\"nofollow noreferrer\">plugin</a> for that, though it&#39;s not been updated for a long time and seems to only support up to ES v1.3."}, {"owner": {"reputation": 1074, "user_id": 3546071, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1TSbL.jpg?s=128&g=1", "display_name": "haley", "link": "https://stackoverflow.com/users/3546071/haley"}, "reply_to_user": {"reputation": 163519, "user_id": 4604579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/reC2t.jpg?s=128&g=1", "display_name": "Val", "link": "https://stackoverflow.com/users/4604579/val"}, "edited": false, "score": 0, "creation_date": 1440645999, "post_id": 32234258, "comment_id": 52362021, "body": "What&#39;s the name of the plugin?"}, {"owner": {"reputation": 163519, "user_id": 4604579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/reC2t.jpg?s=128&g=1", "display_name": "Val", "link": "https://stackoverflow.com/users/4604579/val"}, "edited": false, "score": 1, "creation_date": 1440646228, "post_id": 32234258, "comment_id": 52362070, "body": "You can follow the link :)"}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 5270317, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FbHibq5Cvjs/AAAAAAAAAAI/AAAAAAAAOGw/ZfXYkLQ15jE/photo.jpg?sz=128", "display_name": "Arm", "link": "https://stackoverflow.com/users/5270317/arm"}, "is_accepted": true, "score": 3, "last_activity_date": 1440660051, "creation_date": 1440660051, "answer_id": 32243042, "question_id": 32234258, "link": "https://stackoverflow.com/questions/32234258/save-image-in-elasticsearch-with-ruby/32243042#32243042", "title": "Save Image in Elasticsearch with Ruby", "body": "<p>Elasticsearch can store binary data using the binary type.  The binary type needs to be base64 encoded and will not be indexed by default.  Here is an example es mapping</p>\n\n<pre><code>POST http://localhost:9200/adimages/\n{\n    \"mappings\" : {\n    \"images\" : {\n        \"properties\" : {\n            \"image\" : { \"type\" : \"binary\"},\n            \"id\" : {\"type\" : \"string\"}\n        }\n    }\n}\n</code></pre>\n\n<p>Some sinatra/ruby code</p>\n\n<pre><code>  get '/pictures/:name' do |name|                                                                                                                                                    \n    @image = @es_client.search index: 'adsimages', body: { query: { match: { id: name } } }   \n    @image = AdHelpers.get_hashie_list(@image)\n    content_type 'image/png' #hardcoded content type for now\n    fileContent = Base64.decode64(@image[0].image);\n  end \n\n  post '/sell/pictures' do\n    #adsimagesindex/images\n    image_id = SecureRandom.hex\n    file = params[:file][:tempfile] #get the post from body\n    fileContent = file.read\n    fileContent =  Base64.encode64(fileContent)\n    @es_client.index index: 'adsimages', type: 'images', id: image_id, body: {id: image_id, image: fileContent}\n    redirect '/ads/sell/pictures' \n  end \n</code></pre>\n\n<p>You then use a form to submit the image </p>\n\n<pre><code>&lt;form class=\"form-horizontal\" action=\"/ads/sell/pictures\" method=\"post\"&gt;\n    &lt;div class=\"container\"&gt; \n      &lt;div class=\"form-group\"&gt;\n        &lt;label for=\"upload-pictures\"&gt;Upload Pictures&lt;/label&gt;\n        &lt;input type=\"file\" id=\"file\" name=\"upload-pictures[]\" multiple&gt;\n      &lt;/div&gt;\n\n      &lt;button type=\"submit\" class=\"btn btn-default\"&gt;Next&lt;/button&gt;\n    &lt;/div&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>to retrieve the image do 'GET /ads/sell/pictures/7a911a0355ad1cc3cfc78bbf6038699b'\n<a href=\"https://i.stack.imgur.com/9Kq3s.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9Kq3s.jpg\" alt=\"obligatory lena\"></a></p>\n\n<p>If you want to store images along with the your documents (depending on your use case) you can omit the image field when doing the search by specifying the fields you want returned back. Alternatively you can just store the image id(s) with your documents and create an index only for images.</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 1074, "user_id": 3546071, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1TSbL.jpg?s=128&g=1", "display_name": "haley", "link": "https://stackoverflow.com/users/3546071/haley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1098, "favorite_count": 1, "accepted_answer_id": 32243042, "answer_count": 1, "score": 1, "last_activity_date": 1440660051, "creation_date": 1440614338, "question_id": 32234258, "link": "https://stackoverflow.com/questions/32234258/save-image-in-elasticsearch-with-ruby", "title": "Save Image in Elasticsearch with Ruby", "body": "<p>I'm using Elasticsearch as a datastore for my Ruby/Sinatra app, and I'm wanting to save images. Is there a way to index an image as a binary into ES? If so, how should I go about doing this and then converting the binary back to an image in order to display it on the site?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "json"], "comments": [{"owner": {"reputation": 634, "user_id": 1199793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/339b1b14c371fc2e607967663f93e1e4?s=128&d=identicon&r=PG", "display_name": "bpromas", "link": "https://stackoverflow.com/users/1199793/bpromas"}, "edited": false, "score": 0, "creation_date": 1440613677, "post_id": 32234015, "comment_id": 52350458, "body": "Try something like <code>request.headers[&#39;user&#39;][&#39;latitude&#39;]</code> or <code>request.headers[&#39;user&#39;][&#39;longitude&#39;]</code>"}, {"owner": {"reputation": 69, "user_id": 4677664, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/RXseX.jpg?s=128&g=1", "display_name": "Jourdan Bul-lalayao", "link": "https://stackoverflow.com/users/4677664/jourdan-bul-lalayao"}, "reply_to_user": {"reputation": 634, "user_id": 1199793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/339b1b14c371fc2e607967663f93e1e4?s=128&d=identicon&r=PG", "display_name": "bpromas", "link": "https://stackoverflow.com/users/1199793/bpromas"}, "edited": false, "score": 0, "creation_date": 1440613800, "post_id": 32234015, "comment_id": 52350542, "body": "Just tried, I get <code>nil</code> :/"}], "answers": [{"comments": [{"owner": {"reputation": 634, "user_id": 1199793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/339b1b14c371fc2e607967663f93e1e4?s=128&d=identicon&r=PG", "display_name": "bpromas", "link": "https://stackoverflow.com/users/1199793/bpromas"}, "edited": false, "score": 0, "creation_date": 1440614042, "post_id": 32234153, "comment_id": 52350694, "body": "I would change it to <code>var headers = JSON.stringify({ user: { latitude: 37.3382, longitude: -121.8863     }, test: &#39;testing&#39;});</code>"}, {"owner": {"reputation": 69, "user_id": 4677664, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/RXseX.jpg?s=128&g=1", "display_name": "Jourdan Bul-lalayao", "link": "https://stackoverflow.com/users/4677664/jourdan-bul-lalayao"}, "reply_to_user": {"reputation": 634, "user_id": 1199793, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/339b1b14c371fc2e607967663f93e1e4?s=128&d=identicon&r=PG", "display_name": "bpromas", "link": "https://stackoverflow.com/users/1199793/bpromas"}, "edited": false, "score": 0, "creation_date": 1440614554, "post_id": 32234153, "comment_id": 52350990, "body": "This worked! But, it sounds like I have to call <code>JSON.stringify</code> for each nested object. Is there a better way to handle this for nested objects, rather than calling <code>JSON.stringify</code> on every single nested object?   @BrunoRomaszkiewicz I tried that and the header doesn&#39;t recognize either the <code>user</code> or <code>test</code> keys &gt;.&lt;. Both give me <code>nil</code>"}, {"owner": {"reputation": 888, "user_id": 5264870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5bd6b62db67b7e4cd1ef0464f5de64a?s=128&d=identicon&r=PG&f=1", "display_name": "dinomix", "link": "https://stackoverflow.com/users/5264870/dinomix"}, "edited": false, "score": 1, "creation_date": 1440614630, "post_id": 32234153, "comment_id": 52351045, "body": "Why not use a POST and post the data as data instead of headers? Also you could store it in the session cookie and it would be automatically passed in the header for each request."}, {"owner": {"reputation": 69, "user_id": 4677664, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/RXseX.jpg?s=128&g=1", "display_name": "Jourdan Bul-lalayao", "link": "https://stackoverflow.com/users/4677664/jourdan-bul-lalayao"}, "edited": false, "score": 0, "creation_date": 1440614963, "post_id": 32234153, "comment_id": 52351228, "body": "From my understanding, POST requests are typically used by forms and when adding data to the database? On this users page, I&#39;m retrieving a user&#39;s profile (and thus, a user&#39;s data) and am calculating how far away that user is to the current user who is viewing the profile (hence, the latitude and longitude values). Perhaps I should consider using the session cookie since that seems like a viable alternative"}, {"owner": {"reputation": 888, "user_id": 5264870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5bd6b62db67b7e4cd1ef0464f5de64a?s=128&d=identicon&r=PG&f=1", "display_name": "dinomix", "link": "https://stackoverflow.com/users/5264870/dinomix"}, "edited": false, "score": 0, "creation_date": 1440615168, "post_id": 32234153, "comment_id": 52351339, "body": "Ahh in that case i would suggest just passing the lat/long as a query string parameter to the GET request. You can just append &#39;?lat=37.33&amp;lon=-121.55&amp;test=testing&#39; to the url and the parameters will be in the params hash in your controller server side."}, {"owner": {"reputation": 888, "user_id": 5264870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5bd6b62db67b7e4cd1ef0464f5de64a?s=128&d=identicon&r=PG&f=1", "display_name": "dinomix", "link": "https://stackoverflow.com/users/5264870/dinomix"}, "edited": false, "score": 0, "creation_date": 1440615410, "post_id": 32234153, "comment_id": 52351479, "body": "HTML headers are not usually used to transport application data, more for technical things like API negotiation and session/cookie transport."}, {"owner": {"reputation": 69, "user_id": 4677664, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/RXseX.jpg?s=128&g=1", "display_name": "Jourdan Bul-lalayao", "link": "https://stackoverflow.com/users/4677664/jourdan-bul-lalayao"}, "edited": false, "score": 1, "creation_date": 1440615445, "post_id": 32234153, "comment_id": 52351498, "body": "Thanks @dinomix for the answer and comments! I actually wanted to do that, but I was told yesterday that it&#39;s common practice (?) to pass data from front-end to back-end using <code>headers</code> (specifically for GET requests). But, for POST, <code>data</code> is typically used. If you or anyone has an opinion on this, please share because I always used URL parameters (like you suggested) before I was told this :)"}, {"owner": {"reputation": 888, "user_id": 5264870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5bd6b62db67b7e4cd1ef0464f5de64a?s=128&d=identicon&r=PG&f=1", "display_name": "dinomix", "link": "https://stackoverflow.com/users/5264870/dinomix"}, "edited": false, "score": 0, "creation_date": 1440616241, "post_id": 32234153, "comment_id": 52351942, "body": "The GET query string and POST body are common ways to pass application data, this is what they were designed for. HTML headers are for protocol negotiation, cache control, and other meta data, you wouldn&#39;t usually use those for application data."}, {"owner": {"reputation": 69, "user_id": 4677664, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/RXseX.jpg?s=128&g=1", "display_name": "Jourdan Bul-lalayao", "link": "https://stackoverflow.com/users/4677664/jourdan-bul-lalayao"}, "edited": false, "score": 0, "creation_date": 1440621781, "post_id": 32234153, "comment_id": 52354967, "body": "Thanks again, not sure how to upvote comments, otherwise you&#39;d have more 1s next to your comments!"}], "tags": [], "owner": {"reputation": 888, "user_id": 5264870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5bd6b62db67b7e4cd1ef0464f5de64a?s=128&d=identicon&r=PG&f=1", "display_name": "dinomix", "link": "https://stackoverflow.com/users/5264870/dinomix"}, "is_accepted": true, "score": 2, "last_activity_date": 1440613998, "creation_date": 1440613998, "answer_id": 32234153, "question_id": 32234015, "link": "https://stackoverflow.com/questions/32234015/how-to-correctly-pass-in-javascript-object-to-rails-back-end-through-http-header/32234153#32234153", "title": "How to correctly pass in JavaScript object to Rails back-end through HTTP headers?", "body": "<pre><code>var user_id = '114';\nvar headers = { user: JSON.stringify({ latitude: 37.3382, longitude: -121.8863     }), test: 'testing'};\n$.ajax({\n  type: 'GET',\n  url: 'http://localhost:3000/users/' + user_id,\n  headers: headers\n});\n</code></pre>\n\n<p>Then on the ruby side use JSON.parse to recover the object.</p>\n"}], "owner": {"reputation": 69, "user_id": 4677664, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/RXseX.jpg?s=128&g=1", "display_name": "Jourdan Bul-lalayao", "link": "https://stackoverflow.com/users/4677664/jourdan-bul-lalayao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 32234153, "answer_count": 1, "score": 1, "last_activity_date": 1440613998, "creation_date": 1440613459, "last_edit_date": 1440613891, "question_id": 32234015, "link": "https://stackoverflow.com/questions/32234015/how-to-correctly-pass-in-javascript-object-to-rails-back-end-through-http-header", "title": "How to correctly pass in JavaScript object to Rails back-end through HTTP headers?", "body": "<p>I'm trying to pass in header information from the JavaScript to a Rails back-end using AJAX, and I can't seem to correctly get the data of <code>user</code>. </p>\n\n<p>Example, I have the following code:</p>\n\n<pre><code>var user_id = '114';\nvar headers = { user: { latitude: 37.3382, longitude: -121.8863 }, test: 'testing'};\n$.ajax({\n  type: 'GET',\n  url: 'http://localhost:3000/users/' + user_id,\n  headers: headers\n});\n</code></pre>\n\n<p>On the Ruby on Rails back-end, I can access the <code>test</code> key just fine using <code>request.headers['test']</code>. It will give me exactly the value I expect, <code>\"testing\"</code>. </p>\n\n<p>However, when I try to access the <code>user</code> key through <code>request.headers['user']</code>, I get the value of <code>\"[object Object]\"</code>. This is not what I want, I want to be able to get a user's <code>latitude</code> and <code>longitude</code> values.</p>\n\n<p>I have tried <code>request.headers['user']['latitude']</code> and <code>request.headers['user']['longitude']</code>, and in both cases I get a result of <code>nil</code>.</p>\n\n<p>My question is, how can I modify the above code in order to be able to correctly access a user's latitude and longitude on the back-end from the HTTP Headers? </p>\n\n<p>I've read countless Stack Overflow questions but this is the closest I have been able to get!</p>\n"}, {"tags": ["ruby", "plugins", "loading"], "comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1440614519, "post_id": 32233860, "comment_id": 52350964, "body": "Can you do the check at the point where you would have invoked <code>specific_method_to_use</code> instead of doing the check at class load time?"}, {"owner": {"reputation": 1309, "user_id": 564383, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/DQw9E.jpg?s=128&g=1", "display_name": "LikeMaBell", "link": "https://stackoverflow.com/users/564383/likemabell"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1440620362, "post_id": 32233860, "comment_id": 52354178, "body": ":specific_method_to_use only gets invoked at runtime, so although I could certainly catch the NoMethodError and provide constructive messaging to the developer around it, the bug would only be caught at runtime, not at load time...the latter being preferable I think."}, {"owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "edited": false, "score": 1, "creation_date": 1450819894, "post_id": 32233860, "comment_id": 56591077, "body": "The check you&#39;re doing using <code>self.respond_to?</code> won&#39;t check for the instance method <code>YourClass#your_method</code>; it will look for the singleton/class method <code>YourClass.your_method</code>. In my answer I modified it to <code>self.instance_methods.include?</code>. Feel free to change it back to <code>respond_to?</code> if I misunderstood your intention."}], "answers": [{"comments": [{"owner": {"reputation": 1309, "user_id": 564383, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/DQw9E.jpg?s=128&g=1", "display_name": "LikeMaBell", "link": "https://stackoverflow.com/users/564383/likemabell"}, "edited": false, "score": 0, "creation_date": 1451352782, "post_id": 34424483, "comment_id": 56748428, "body": "This looks like exactly the answer I was looking for. Thank you. My apologies that it did not award you the full bounty--I was traveling during the bounty-awarding period, and it won&#39;t seem to let me award the full amount."}], "tags": [], "owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "is_accepted": true, "score": 10, "last_activity_date": 1564150157, "last_edit_date": 1564150157, "creation_date": 1450818676, "answer_id": 34424483, "question_id": 32233860, "link": "https://stackoverflow.com/questions/32233860/how-can-i-set-a-hook-to-run-code-at-the-end-of-a-ruby-class-definition/34424483#34424483", "title": "How can I set a hook to run code at the end of a Ruby class definition?", "body": "<p>Use <code>TracePoint</code> to track when your class sends up an <code>:end</code> event.</p>\n\n<hr>\n\n<p><strong>General solution</strong></p>\n\n<p>This module will let you create a <code>self.finalize</code> callback in any class.</p>\n\n<pre><code>module Finalize\n  def self.extended(obj)\n    TracePoint.trace(:end) do |t|\n      if obj == t.self\n        obj.finalize\n        t.disable\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Now you can extend your class and define <code>self.finalize</code>, which will run as soon as the class definition ends:</p>\n\n<pre><code>class Foo\n  puts \"Top of class\"\n\n  extend Finalize\n\n  def self.finalize\n    puts \"Finalizing #{self}\"\n  end\n\n  puts \"Bottom of class\"\nend\n\nputs \"Outside class\"\n\n# output:\n#   Top of class\n#   Bottom of class\n#   Finalizing Foo\n#   Outside class\n</code></pre>\n\n<hr>\n\n<p><strong>Specific solution to OP's problem</strong></p>\n\n<p>Here's how you can fit <code>TracePoint</code> directly into your pre-existing module.</p>\n\n<pre><code>require 'active_support/all'\n\nmodule MyPlugin\n  extend ActiveSupport::Concern\n\n  module ClassMethods\n    def consumes_my_plugin(**options)\n      m = options[:specific_method_to_use]\n\n      TracePoint.trace(:end) do |t|\n        break unless self == t.self\n\n        raise ArgumentError.new(\"#{m} is not defined\") unless instance_methods.include?(m)\n\n        t.disable\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>The examples below demonstrate that it works as specified:</p>\n\n<pre><code># `def` before `consumes`: evaluates without errors\nclass MethodBeforePlugin\n  include MyPlugin\n  def your_method; end\n  consumes_my_plugin option1: :value1, specific_method_to_use: :your_method\nend\n\n# `consumes` before `def`: evaluates without errors\nclass PluginBeforeMethod\n  include MyPlugin\n  consumes_my_plugin option1: :value1, specific_method_to_use: :your_method\n  def your_method; end\nend\n\n# `consumes` with no `def`: throws ArgumentError at load time\nclass PluginWithoutMethod\n  include MyPlugin\n  consumes_my_plugin option1: :value1, specific_method_to_use: :your_method\nend\n</code></pre>\n"}], "owner": {"reputation": 1309, "user_id": 564383, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/DQw9E.jpg?s=128&g=1", "display_name": "LikeMaBell", "link": "https://stackoverflow.com/users/564383/likemabell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 659, "favorite_count": 1, "accepted_answer_id": 34424483, "answer_count": 1, "score": 12, "last_activity_date": 1564150157, "creation_date": 1440612984, "last_edit_date": 1450821937, "question_id": 32233860, "link": "https://stackoverflow.com/questions/32233860/how-can-i-set-a-hook-to-run-code-at-the-end-of-a-ruby-class-definition", "title": "How can I set a hook to run code at the end of a Ruby class definition?", "body": "<p>I'm building a plugin that will allow a developer to add various features to a class with a simple declaration in the class definition (following the normal acts_as pattern).</p>\n\n<p>For example, code consuming the plugin might look like</p>\n\n<pre><code>class YourClass\n  consumes_my_plugin option1: :value1, specific_method_to_use: :your_method\nend\n</code></pre>\n\n<p>My question arises because I want to error check that the value provided for the :specific_method_to_use parameter exists as a method, but the way code is typically organized and loaded, the method doesn't exist yet.</p>\n\n<p>The code in my plugin tentatively looks like this:</p>\n\n<pre><code>module MyPlugin\n  extend ActiveSupport::Concern\n\n  module ClassMethods\n    def consumes_my_plugin(options = {})\n      raise ArgumentError.new(\"#{options[:specific_method_to_use]} is not defined\") if options[:specific_method_to_use].present? &amp;&amp; !self.respond_to?(options[:specific_method_to_use])\n    end\n  end\nend\n</code></pre>\n\n<p>This would work:</p>\n\n<pre><code>class YourClass\n  def your_method; true; end\n\n  consumes_my_plugin option1: :value1, specific_method_to_use: :your_method\nend\n</code></pre>\n\n<p>But this is how most people write code, and it would not:</p>\n\n<pre><code>class YourClass\n  consumes_my_plugin option1: :value1, specific_method_to_use: :your_method\n\n  def your_method; true; end\nend\n</code></pre>\n\n<p>How can I fail at YourClass load time? I want it to error then, not at run time with a NoMethodError. Can I defer execution of the line that raises the ArgumentError until the entire class is loaded, or do something else clever to achieve that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "devise"], "comments": [{"owner": {"reputation": 712, "user_id": 4191738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKXDY.jpg?s=128&g=1", "display_name": "Sculper", "link": "https://stackoverflow.com/users/4191738/sculper"}, "edited": false, "score": 1, "creation_date": 1440612891, "post_id": 32233741, "comment_id": 52349976, "body": "Please post your model and controller."}], "answers": [{"tags": [], "owner": {"reputation": 494, "user_id": 4797935, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/YkWn1.jpg?s=128&g=1", "display_name": "Vedprakash Singh", "link": "https://stackoverflow.com/users/4797935/vedprakash-singh"}, "is_accepted": true, "score": 2, "last_activity_date": 1440764459, "last_edit_date": 1440764459, "creation_date": 1440613218, "answer_id": 32233947, "question_id": 32233741, "link": "https://stackoverflow.com/questions/32233741/devise-mass-assignment-error-for-failed-logins-when-using-username-as-login/32233947#32233947", "title": "Devise mass assignment error for failed logins when using username as login", "body": "<p>In your model please add login to <code>attr_accessible</code>, i.e;</p>\n\n<pre><code>attr_accessible :login .\n</code></pre>\n\n<p>For more info, refer to this;\n<a href=\"http://apidock.com/rails/ActiveModel/MassAssignmentSecurity/ClassMethods/attr_accessible\" rel=\"nofollow\">http://apidock.com/rails/ActiveModel/MassAssignmentSecurity/ClassMethods/attr_accessible</a></p>\n"}], "owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 32233947, "answer_count": 1, "score": 1, "last_activity_date": 1440764459, "creation_date": 1440612603, "question_id": 32233741, "link": "https://stackoverflow.com/questions/32233741/devise-mass-assignment-error-for-failed-logins-when-using-username-as-login", "title": "Devise mass assignment error for failed logins when using username as login", "body": "<p>HAving a weird one. </p>\n\n<p>I've set up devise to authenticate using either a username or an email as per \n<a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-sign-in-using-their-username-or-email-address\" rel=\"nofollow\">Devise login with username</a></p>\n\n<p>I can log in absolutely fine with a correct username or email with a password. \nIf I put something incorrect in, I get a </p>\n\n<pre><code>Can't mass-assign protected attributes: login\n</code></pre>\n\n<p>Can't work out quite what's going on. I assume it's something to do with Devise killing the session, but not sure why it would be doing anything with the login field at that point....</p>\n"}, {"tags": ["ruby", "redis", "rake", "resque"], "comments": [{"owner": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "edited": false, "score": 0, "creation_date": 1440627211, "post_id": 32233273, "comment_id": 52357407, "body": "Are you sure that your Redis initializer is loaded before your resque.rb? Seems like the <code>$resque_redis</code> global is <code>nil</code>"}, {"owner": {"reputation": 41, "user_id": 4469634, "user_type": "registered", "profile_image": "https://graph.facebook.com/684285197/picture?type=large", "display_name": "Amit Liber", "link": "https://stackoverflow.com/users/4469634/amit-liber"}, "reply_to_user": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "edited": false, "score": 0, "creation_date": 1440954233, "post_id": 32233273, "comment_id": 52474400, "body": "Yes, made sure it is loaded before:      irb(main):010:0&gt; Resque.redis     =&gt; #&lt;Redis::Namespace:0x00000001cb4098 @namespace=:resque, @redis=#&lt;Redis client v3.2.1 for redis://localhost:6379/0&gt;, @warning=true, @deprecations=false&gt;"}, {"owner": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "edited": false, "score": 0, "creation_date": 1440963037, "post_id": 32233273, "comment_id": 52477017, "body": "That is your Redis class, did what is the output if you load up your DRB and call <code>$resque_redis</code>, the global var?"}, {"owner": {"reputation": 41, "user_id": 4469634, "user_type": "registered", "profile_image": "https://graph.facebook.com/684285197/picture?type=large", "display_name": "Amit Liber", "link": "https://stackoverflow.com/users/4469634/amit-liber"}, "reply_to_user": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "edited": false, "score": 0, "creation_date": 1441094572, "post_id": 32233273, "comment_id": 52527402, "body": "@yez you are right, $resque_redis yields nil. I don&#39;t understand why this global var does not hold the value it had assigned to :\\"}, {"owner": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "edited": false, "score": 0, "creation_date": 1441141531, "post_id": 32233273, "comment_id": 52556337, "body": "I would check to make sure your redis initializer file is loaded before you use it."}, {"owner": {"reputation": 41, "user_id": 4469634, "user_type": "registered", "profile_image": "https://graph.facebook.com/684285197/picture?type=large", "display_name": "Amit Liber", "link": "https://stackoverflow.com/users/4469634/amit-liber"}, "reply_to_user": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "edited": false, "score": 0, "creation_date": 1441874482, "post_id": 32233273, "comment_id": 52853822, "body": "Thanks @yez, but even though it is loaded, I still can&#39;t make it work nor think of where could the problem be :\\"}, {"owner": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "edited": false, "score": 0, "creation_date": 1441905492, "post_id": 32233273, "comment_id": 52875054, "body": "If you host the full files in question somewhere (or have a public github) I can take a closer look."}], "owner": {"reputation": 41, "user_id": 4469634, "user_type": "registered", "profile_image": "https://graph.facebook.com/684285197/picture?type=large", "display_name": "Amit Liber", "link": "https://stackoverflow.com/users/4469634/amit-liber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1440611066, "creation_date": 1440611066, "question_id": 32233273, "link": "https://stackoverflow.com/questions/32233273/resque-worker-error-when-forking-ruby-redis", "title": "resque worker error when forking [Ruby, Redis]", "body": "<p>I'm having a difficulty with processing resque tasks which were enqueued.\nThe whole enqueuing part goes well - I can see it in Redis and also Resque.info shows the pending tasks number incrementing as it should.</p>\n\n<p>If I run the perform method of the Job class explicitly - everything works fine.</p>\n\n<p>Once the worker come alive - all the tasks fail.</p>\n\n<p>This is the Job class:</p>\n\n<pre><code>class TestJob\n  @queue = :test1_queue\n\n  def self.perform(str)\n    begin\n      f = open('/tmp/test.txt', 'a')\n      f.write(\"#{Time.now.to_s} #{str} in self.perform\\n\")\n    rescue Exception =&gt; e\n      f.write(\"#{Time.now.to_s} #{str} in self.perform\\n#{e.message}\\n#{e.backtrace}\\n\")\n    ensure\n      f.close\n    end\n  end  \nend\n</code></pre>\n\n<p>The resque.rb initializer:</p>\n\n<pre><code>require 'resque'\nrequire 'redis'\nDir['../../jobs'].each { |file| require file }\n\nResque.redis = $resque_redis\nResque.logger.level = Logger::WARN\nResque.after_fork do |_|\n  $resque_redis.client.reconnect\nend\n</code></pre>\n\n<p>Redis initializer:</p>\n\n<pre><code>require 'redis'\n$resque_redis = Redis.new(:host =&gt; REDIS_BITMAP_HOST,  :port =&gt; REDIS_PORT, :db =&gt; 0, :timeout =&gt; 30)\n</code></pre>\n\n<p>config file to start the worker with god:</p>\n\n<pre><code>require_relative './common.rb'\nwatch_resque_process('test1', 1)\n</code></pre>\n\n<p>God definitions:</p>\n\n<pre><code>$home_dir = ENV[\"HOME\"]\n$rack_env = ENV[\"ETL_ENV\"] || \"development\"\n\ndef create_deafult_monitoring_scheme(watch)\n  # Restart if memory is above 150 Megabytes or CPU is above 50% for 5 consecutive intervals\n  watch.restart_if do |restart|\n    restart.condition(:memory_usage) do |c|\n      c.above = 150.megabytes\n      c.times = [3, 5] # 3 out of 5 intervals\n    end\n\n    restart.condition(:cpu_usage) do |c|\n      c.above = 50.percent\n      c.times = 5\n    end\n  end\n\n  # The :flapping condition guards against the edge case wherein god rapidly starts or restarts your application.\n  # If this watch is started or restarted five times withing 5 minutes, then unmonitor it for 10 minutes.\n  # After 10 minutes, monitor it again to see if it was just a temporary problem; if the process is seen to be flapping five times within two hours, then give up completely.\n  watch.lifecycle do |on|\n    on.condition(:flapping) do |c|\n      c.to_state      = [:start, :restart]\n      c.times         = 5\n      c.within        = 5.minute\n      c.transition    = :unmonitored\n      c.retry_in      = 10.minute\n      c.retry_times   = 5\n      c.retry_within  = 30.minute\n    end\n  end\nend\n\ndef watch_resque_process(resque_process_name, worker_count=8)\n  God.watch do |w|\n    w.name      = \"resque_work-#{resque_process_name}\"\n    w.start     = \"cd #{$home_dir}/rtb-etl &amp;&amp; COUNT=#{worker_count} QUEUE='#{resque_process_name}_queue' RACK_ENV=#{$rack_env} rake resque:workers\"\n    w.interval  = 30.seconds\n    w.log       = File.join($home_dir, 'logs', 'resque', \"resque_#{resque_process_name}.log\")\n    w.err_log   = File.join($home_dir, 'logs', 'resque', \"resque_#{resque_process_name}.log\")\n    w.env       = { 'PIDFILE' =&gt; \"#{$home_dir}/pids/#{w.name}.pid\" }\n\n    # Check if the process is still up every 5 seconds\n    w.start_if do |start|\n      start.condition(:process_running) do |c|\n        c.interval = 5.seconds\n        c.running = false\n      end\n    end\n\n    create_deafult_monitoring_scheme(w)\n\n  end\nend\n\ndef watch_rake_task(rake_task_name, interval=30.seconds)\n  God.watch do |w|\n    w.name  = \"rake_#{rake_task_name}\"\n    # w.start = \"cd #{$home_dir}/rtb-etl &amp;&amp; RACK_ENV=#{$rack_env} bundle exec rake #{rake_task_name}\"\n    w.start = \"cd #{$home_dir}/rtb-etl &amp;&amp; RACK_ENV=#{$rack_env} rake #{rake_task_name}\"\n    w.interval = interval\n    w.log      = File.join($home_dir, 'logs', 'resque', \"rake_#{rake_task_name}.log\")\n    w.err_log  = File.join($home_dir, 'logs', 'resque', \"rake_#{rake_task_name}.log\")\n    w.env      = { 'PIDFILE' =&gt; \"#{$home_dir}/pids/#{w.name}.pid\" }\n\n    # Check if the process is still up every 30 seconds\n    w.start_if do |start|\n      start.condition(:process_running) do |c|\n        c.interval = interval\n        c.running = false\n      end\n    end\n\n    create_deafult_monitoring_scheme(w)\n\n  end\nend\n</code></pre>\n\n<p>when I run the follwoing:\n    irb(main):004:0> Resque.enqueue(TestJob, 'foo')\n    => true</p>\n\n<p>In order to check what went wrong, I run in irb the following:</p>\n\n<pre><code>Resque::Failure.all(0,20).each { |job|\n   puts \"#{job[\"exception\"]}  #{job[\"backtrace\"]}\"\n}\n</code></pre>\n\n<p>and get this result:</p>\n\n<pre><code>[{\"failed_at\"=&gt;\"2015/08/26 17:35:00 UTC\", \n\"payload\"=&gt;{\"class\"=&gt;\"TestJob\", \"args\"=&gt;[\"foo\"]},     \n\"exception\"=&gt;\"NoMethodError\", \n\"error\"=&gt;\"undefined method `client' for nil:NilClass\", \n\"backtrace\"=&gt;[], \"worker\"=&gt;\"ip-172-31-11-211:5006:test1_queue\",\n\"queue\"=&gt;\"test1_queue\"}]\n</code></pre>\n\n<p>Any ideas ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "datetime"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1440610774, "post_id": 32233004, "comment_id": 52348782, "body": "@mudasobwa getting error - <code>NameError: uninitialized constant Duration</code>"}], "answers": [{"comments": [{"owner": {"reputation": 17582, "user_id": 280143, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/46ac5380f2c25f9901f83964916c0226?s=128&d=identicon&r=PG", "display_name": "casraf", "link": "https://stackoverflow.com/users/280143/casraf"}, "edited": false, "score": 0, "creation_date": 1440658489, "post_id": 32233637, "comment_id": 52366373, "body": "I see. Maybe it&#39;s time to contribute a bit to Rails :)"}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 1, "last_activity_date": 1440612660, "last_edit_date": 1440612660, "creation_date": 1440612262, "answer_id": 32233637, "question_id": 32233004, "link": "https://stackoverflow.com/questions/32233004/how-can-i-know-what-activesupport-duration-was-used/32233637#32233637", "title": "How can I know what ActiveSupport Duration was used?", "body": "<p>That may not be possible.</p>\n\n<p>If you look at implementation of <a href=\"https://github.com/rails/rails/blob/master/activesupport/lib/active_support/core_ext/numeric/time.rb\" rel=\"nofollow\">core-extensions in Active Support, time.rb</a>, <code>parts</code> is set to <code>:seconds</code> for <code>Duration</code> instances constructed using <code>Numeric#hours</code> or <code>Numeric#minutes</code> or <code>Numeric#seconds</code>.</p>\n\n<pre><code>p 1.hour     # 3600 seconds\np 2.minutes  # 120 seconds\np 30.seconds # 30 seconds\n</code></pre>\n\n<p>Hence, you will always see something like below for all duration which are in hours, minutes or seconds, if you inspect the <code>Duration#parts</code> attribute</p>\n\n<pre><code>[[:seconds, 7200]]\n</code></pre>\n"}], "owner": {"reputation": 17582, "user_id": 280143, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/46ac5380f2c25f9901f83964916c0226?s=128&d=identicon&r=PG", "display_name": "casraf", "link": "https://stackoverflow.com/users/280143/casraf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 664, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1440612660, "creation_date": 1440610143, "last_edit_date": 1495542124, "question_id": 32233004, "link": "https://stackoverflow.com/questions/32233004/how-can-i-know-what-activesupport-duration-was-used", "title": "How can I know what ActiveSupport Duration was used?", "body": "<p>Looking at \"<a href=\"https://stackoverflow.com/questions/28647309\">How to recover an integer from an ActiveSupport::Duration object</a>\", I can see it should be possible, but for:</p>\n\n<pre><code>2.hours.parts\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>[[:seconds, 7200]]\n</code></pre>\n\n<p>How can this be done better so that I have:</p>\n\n<pre><code>[[:hours, 2]]\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1440610210, "post_id": 32232946, "comment_id": 52348437, "body": "Please give us an example of output for input <code>%w(orange apple lemon melon lime)</code>. It hard to understand what &#39;every other word&#39; and &#39;remaining&#39; mean."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1440614364, "post_id": 32232946, "comment_id": 52350868, "body": "Can the input words be mixed case? As is, your question is not well defined and leaves too much room for guessing at the requirements."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1440618951, "post_id": 32232946, "comment_id": 52353459, "body": "Where is <code>odd</code> defined? What is its contract?"}], "answers": [{"tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": false, "score": 1, "last_activity_date": 1440610482, "creation_date": 1440610482, "answer_id": 32233104, "question_id": 32232946, "link": "https://stackoverflow.com/questions/32232946/array-that-alphabetizes-and-alternates-between-all-caps/32233104#32233104", "title": "Array that alphabetizes and alternates between all caps", "body": "<p><code>with_index</code> can help you with the <em>every other word</em> problem:</p>\n\n<pre><code>words = %w(hello world this is test)\n# =&gt; [\"hello\", \"world\", \"this\", \"is\", \"test\"]\nwords.map(&amp;:downcase).sort.map.with_index {|word, index| index.odd? ? word : word.upcase}\n# =&gt; [\"HELLO\", \"is\", \"TEST\", \"this\", \"WORLD\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 5266498, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/35140aa543689b761c1a167440cb5af0?s=128&d=identicon&r=PG&f=1", "display_name": "Mahler7", "link": "https://stackoverflow.com/users/5266498/mahler7"}, "edited": false, "score": 0, "creation_date": 1440611362, "post_id": 32233129, "comment_id": 52349101, "body": "Thank you this is what I was looking for."}, {"owner": {"reputation": 4100, "user_id": 217756, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/547377f831a0ee3de6df245b7d40cbff?s=128&d=identicon&r=PG", "display_name": "tomsoft", "link": "https://stackoverflow.com/users/217756/tomsoft"}, "reply_to_user": {"reputation": 27, "user_id": 5266498, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/35140aa543689b761c1a167440cb5af0?s=128&d=identicon&r=PG&f=1", "display_name": "Mahler7", "link": "https://stackoverflow.com/users/5266498/mahler7"}, "edited": false, "score": 0, "creation_date": 1440611549, "post_id": 32233129, "comment_id": 52349205, "body": "that a flag for answering the question would be appreciate! ;)"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1440611617, "post_id": 32233129, "comment_id": 52349252, "body": "It&#39;s not necessary, or particularly desirable to ask for your answer to be selected. Answer the question to the best of your ability and don&#39;t worry about points. Points accumulate with good answers."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1440613457, "post_id": 32233129, "comment_id": 52350309, "body": "You might want to check your result against your code."}], "tags": [], "owner": {"reputation": 4100, "user_id": 217756, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/547377f831a0ee3de6df245b7d40cbff?s=128&d=identicon&r=PG", "display_name": "tomsoft", "link": "https://stackoverflow.com/users/217756/tomsoft"}, "is_accepted": false, "score": 0, "last_activity_date": 1440610588, "creation_date": 1440610588, "answer_id": 32233129, "question_id": 32232946, "link": "https://stackoverflow.com/questions/32232946/array-that-alphabetizes-and-alternates-between-all-caps/32233129#32233129", "title": "Array that alphabetizes and alternates between all caps", "body": "<p>If I understand well (but the question is not so clear) you want to sort and then put one word out of two in uppercase and the other in lowercase:</p>\n\n<pre><code>words.sort.each_with_index.map{|w,i| i.odd? ? w.upcase : w.downcase }\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>words=%w( orange banana apple melon)\n</code></pre>\n\n<p>Result: </p>\n\n<pre><code>[\"APPLE\", \"banana\", \"MELON\", \"orange\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1440611477, "post_id": 32233378, "comment_id": 52349164, "body": "Use <code>flat_map</code> instead of <code>map...flatten</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1440611538, "post_id": 32233378, "comment_id": 52349196, "body": "@theTinMan There is no <code>map.flatten</code> in my solution. Or, at least, I do not see, how to do the same with <code>flat_map</code>."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1440611689, "post_id": 32233378, "comment_id": 52349289, "body": "Yeah. I missed that <code>map</code> was inside the <code>zip</code>. Carry on."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1440964052, "post_id": 32233378, "comment_id": 52477315, "body": "Mental image: &quot;Aye, aye, sir!&quot; :-)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1440611857, "last_edit_date": 1440611857, "creation_date": 1440611415, "answer_id": 32233378, "question_id": 32232946, "link": "https://stackoverflow.com/questions/32232946/array-that-alphabetizes-and-alternates-between-all-caps/32233378#32233378", "title": "Array that alphabetizes and alternates between all caps", "body": "<p>Just out of curiosity:</p>\n\n<pre><code>arr = %w(orange apple lemon melon lime)\na1, a2 = arr.sort.partition.with_index { |_, i| i.even? }\na1.map(&amp;:downcase).zip(a2.map &amp;:upcase).flatten.compact\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1440647545, "last_edit_date": 1440647545, "creation_date": 1440612348, "answer_id": 32233660, "question_id": 32232946, "link": "https://stackoverflow.com/questions/32232946/array-that-alphabetizes-and-alternates-between-all-caps/32233660#32233660", "title": "Array that alphabetizes and alternates between all caps", "body": "<p>Here are two ways that don't use indices.</p>\n\n<pre><code>arr = %w|the quicK brown dog jumpEd over the lazy fox|\n  #=&gt; [\"the\", \"quicK\", \"brown\", \"dog\", \"jumpEd\", \"over\", \"the\", \"lazy\", \"fox\"]\n</code></pre>\n\n<p>Note:</p>\n\n<pre><code>arr.sort\n  #=&gt; [\"brown\", \"dog\", \"fox\", \"jumpEd\", \"lazy\", \"over\", \"quicK\", \"the\", \"the\"] \n</code></pre>\n\n<p><strong>#1</strong></p>\n\n<pre><code>e = [:UC, :LC].cycle\narr.sort.map { |w| (e.next == :UC) ? w.upcase : w.downcase }\n  # =&gt; [\"BROWN\", \"dog\", \"FOX\", \"jumped\", \"LAZY\", \"over\", \"QUICK\", \"the\", \"THE\"]\n</code></pre>\n\n<p><strong>#2</strong></p>\n\n<pre><code>arr.sort.each_slice(2).flat_map { |u,v| v ? [u.upcase, v.downcase] : [u.upcase] }\n  # =&gt; [\"BROWN\", \"dog\", \"FOX\", \"jumped\", \"LAZY\", \"over\", \"QUICK\", \"the\", \"THE\"]  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1440613839, "last_edit_date": 1440613839, "creation_date": 1440612807, "answer_id": 32233809, "question_id": 32232946, "link": "https://stackoverflow.com/questions/32232946/array-that-alphabetizes-and-alternates-between-all-caps/32233809#32233809", "title": "Array that alphabetizes and alternates between all caps", "body": "<p>I'd use:</p>\n\n<pre><code>user_input = %w(the quick red fox jumped)\nuc_flag = true\noutput = []\nuser_input.sort.each { |w| \n  output &lt;&lt; if uc_flag\n              w.upcase\n            else\n              w.downcase\n            end\n  uc_flag = !uc_flag\n}\noutput # =&gt; [\"FOX\", \"jumped\", \"QUICK\", \"red\", \"THE\"]\n</code></pre>\n\n<p>It's old-school but is extremely fast as it only makes one pass through the array.</p>\n\n<p>It can be written a bit more tersely using:</p>\n\n<pre><code>output &lt;&lt; (uc_flag ? w.upcase : w.downcase)\n</code></pre>\n\n<p>but ternary statements are generally considered to be undesirable.</p>\n\n<p>If the user is allowed to enter mixed-case words, use:</p>\n\n<pre><code>sort_by(&amp;:downcase) \n</code></pre>\n\n<p>instead of <code>sort</code>.</p>\n"}], "owner": {"reputation": 27, "user_id": 5266498, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/35140aa543689b761c1a167440cb5af0?s=128&d=identicon&r=PG&f=1", "display_name": "Mahler7", "link": "https://stackoverflow.com/users/5266498/mahler7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1440647545, "creation_date": 1440609941, "last_edit_date": 1440611393, "question_id": 32232946, "link": "https://stackoverflow.com/questions/32232946/array-that-alphabetizes-and-alternates-between-all-caps", "title": "Array that alphabetizes and alternates between all caps", "body": "<p>I need to get the user to input five words, which I believe I have. Then the program needs to spit the words in alphabetical order with every other word being in all-caps, starting with the first word, and the remaining words being in all lowercase.  </p>\n\n<p>I'm eventually going to have switch the loop to 500 words, and it's only the number in the loop that I need to change. How do I get this to work? </p>\n\n<p>Here's what I have so far:</p>\n\n<pre><code>words = []\n\n5.times do\n  puts \"Please enter a word\"\n  words &lt;&lt; gets.chomp\nend\n\nputs words.sort.odd.upcase\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "tree", "children", "ancestry"], "comments": [{"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 1, "creation_date": 1440610274, "post_id": 32232894, "comment_id": 52348478, "body": "I would only suggest to shorten your post to the least amount of code required to understand the issue. It is a good question, but the excessive details make the Q lose its meaning. You <i>may</i> want to include your MVC code in a gisthub gist."}, {"owner": {"reputation": 103, "user_id": 4825402, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-VjqlkHxoe2o/AAAAAAAAAAI/AAAAAAAAAOk/UL-ROrRJlss/photo.jpg?sz=128", "display_name": "Benjamin Linville", "link": "https://stackoverflow.com/users/4825402/benjamin-linville"}, "reply_to_user": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 1, "creation_date": 1440689783, "post_id": 32232894, "comment_id": 52387622, "body": "Thanks Hunter, I edited the question for clarity, and I made a gist for it and included simplified MVC."}, {"owner": {"reputation": 929, "user_id": 3776156, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4cc452b37dfefdadb36828b05cee9612?s=128&d=identicon&r=PG&f=1", "display_name": "TwiceB", "link": "https://stackoverflow.com/users/3776156/twiceb"}, "edited": false, "score": 0, "creation_date": 1440701295, "post_id": 32232894, "comment_id": 52394481, "body": "Ben, if you use ancestry, you&#39;d only need to create a single model &quot;Person&quot; and the relation within the tree would determine if the instance is a grandparent, kid, grandkid, etc."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 4825402, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-VjqlkHxoe2o/AAAAAAAAAAI/AAAAAAAAAOk/UL-ROrRJlss/photo.jpg?sz=128", "display_name": "Benjamin Linville", "link": "https://stackoverflow.com/users/4825402/benjamin-linville"}, "edited": false, "score": 0, "creation_date": 1440631371, "post_id": 32236768, "comment_id": 52358734, "body": "Thanks, that is exactly what I thought ancestry would do for me. I&#39;m not sure I followed whether or not I could use the parent_ids to accomplish my &#39;ancestor-descendant&#39; tables, but I got it working right now by just manually coding every view. If you - or anyone else - knows of a nice DRY way to write that table so I can use it on several &#39;descendants&#39; show pages, I would greatly appreciate it."}, {"owner": {"reputation": 929, "user_id": 3776156, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4cc452b37dfefdadb36828b05cee9612?s=128&d=identicon&r=PG&f=1", "display_name": "TwiceB", "link": "https://stackoverflow.com/users/3776156/twiceb"}, "reply_to_user": {"reputation": 103, "user_id": 4825402, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-VjqlkHxoe2o/AAAAAAAAAAI/AAAAAAAAAOk/UL-ROrRJlss/photo.jpg?sz=128", "display_name": "Benjamin Linville", "link": "https://stackoverflow.com/users/4825402/benjamin-linville"}, "edited": false, "score": 0, "creation_date": 1440680737, "post_id": 32236768, "comment_id": 52380817, "body": "Do you have a &quot;region&quot; controller with a &quot;show&quot; action implemented?"}, {"owner": {"reputation": 103, "user_id": 4825402, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-VjqlkHxoe2o/AAAAAAAAAAI/AAAAAAAAAOk/UL-ROrRJlss/photo.jpg?sz=128", "display_name": "Benjamin Linville", "link": "https://stackoverflow.com/users/4825402/benjamin-linville"}, "edited": false, "score": 0, "creation_date": 1440685310, "post_id": 32236768, "comment_id": 52384395, "body": "I&#39;ve updated the original question to include the Regions controller &amp; Region show.html.haml"}, {"owner": {"reputation": 929, "user_id": 3776156, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4cc452b37dfefdadb36828b05cee9612?s=128&d=identicon&r=PG&f=1", "display_name": "TwiceB", "link": "https://stackoverflow.com/users/3776156/twiceb"}, "reply_to_user": {"reputation": 103, "user_id": 4825402, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-VjqlkHxoe2o/AAAAAAAAAAI/AAAAAAAAAOk/UL-ROrRJlss/photo.jpg?sz=128", "display_name": "Benjamin Linville", "link": "https://stackoverflow.com/users/4825402/benjamin-linville"}, "edited": false, "score": 0, "creation_date": 1440687281, "post_id": 32236768, "comment_id": 52385844, "body": "This is getting outside the scope of the original question, so you should probably submit a new question for a better answer.  For now, it&#39;s possible that what you&#39;re looking for can be solved by view partials:  <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}], "tags": [], "owner": {"reputation": 929, "user_id": 3776156, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4cc452b37dfefdadb36828b05cee9612?s=128&d=identicon&r=PG&f=1", "display_name": "TwiceB", "link": "https://stackoverflow.com/users/3776156/twiceb"}, "is_accepted": true, "score": 0, "last_activity_date": 1440623481, "creation_date": 1440623481, "answer_id": 32236768, "question_id": 32232894, "link": "https://stackoverflow.com/questions/32232894/how-to-get-all-the-descendants-of-an-object-in-ruby-on-rails/32236768#32236768", "title": "How to get all the descendants of an object in Ruby on Rails", "body": "<p>I believe you're interpreting the ancestry gem incorrectly.\nIt looks like you expect Region to show up as a child of Country. Is that right?</p>\n\n<p>Ancestry is useful for tree like structures (think folders -> sub folders -> child sub folders -> etc.)</p>\n\n<p>Applying has_ancestry within your Country model would allow you to create countries within countries.  But I don't believe that's what you're looking for.</p>\n\n<p>Regardless, you can set up those relations by setting the \"parent_id\" attribute for a country when creating/updating it within the controller.  Just set it to the ID of the parent country.\nSame for regions if you want a tree structure of regions.</p>\n"}], "owner": {"reputation": 103, "user_id": 4825402, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-VjqlkHxoe2o/AAAAAAAAAAI/AAAAAAAAAOk/UL-ROrRJlss/photo.jpg?sz=128", "display_name": "Benjamin Linville", "link": "https://stackoverflow.com/users/4825402/benjamin-linville"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 807, "favorite_count": 0, "accepted_answer_id": 32236768, "answer_count": 1, "score": 1, "last_activity_date": 1441296473, "creation_date": 1440609735, "last_edit_date": 1441296473, "question_id": 32232894, "link": "https://stackoverflow.com/questions/32232894/how-to-get-all-the-descendants-of-an-object-in-ruby-on-rails", "title": "How to get all the descendants of an object in Ruby on Rails", "body": "<p>I'm have models related as follows:</p>\n\n<pre><code>GrandParent \n  has_many :kids\n  has_many :grand_children, through: :kids\nKid \n  belongs_to :grand_parent\n  has_many :grand_kids\nGrandKid\n  belongs_to :kid\n</code></pre>\n\n<p>I would just like to call .descendants on an object, and get all the objects that belong to its 'lineage'. </p>\n\n<p>I thought that using the ancestry gem would give me the .descendants method I wanted, but it only creates an additional index on a single class, allowing you to get descendants within said class.(great for things like comments &amp; replies, but not useful for my problem) My code is not really necessary to understand the problem, but here it is for those interested: <a href=\"https://gist.github.com/bjlinville1/8425bfe88bc7060209e8\" rel=\"nofollow\">https://gist.github.com/bjlinville1/8425bfe88bc7060209e8</a></p>\n"}, {"tags": ["ruby", "testing", "cucumber", "bdd"], "answers": [{"comments": [{"owner": {"reputation": 1584, "user_id": 601976, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/de088f705937dd429b9470ab9b9bbd8b?s=128&d=identicon&r=PG", "display_name": "RoUS", "link": "https://stackoverflow.com/users/601976/rous"}, "edited": false, "score": 0, "creation_date": 1441047664, "post_id": 32301668, "comment_id": 52511204, "body": "I see what you mean by soul pain! :-O This is a great leap forward for me, although I&#39;m still having trouble with multiple <code>Around()</code> stanzata.  I&#39;m using <code>@test_instance</code> and <code>@test_module</code> values for the <code>-t</code> command-line option, but if a scenario is tagged with both, the selection of which <code>Around()</code> stanza is executed is weird. And I don&#39;t think the scenario block can be invoked multiple times in a hook. :-/"}], "tags": [], "owner": {"reputation": 319, "user_id": 3995028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7b45fcf2ff847244d2a02590f1eee20?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod Adair", "link": "https://stackoverflow.com/users/3995028/jarod-adair"}, "is_accepted": true, "score": 1, "last_activity_date": 1440979731, "last_edit_date": 1440979731, "creation_date": 1440972837, "answer_id": 32301668, "question_id": 32232683, "link": "https://stackoverflow.com/questions/32232683/can-cucumber-hooks-differentiate-tags/32301668#32301668", "title": "Can Cucumber hooks differentiate tags", "body": "<p>If you have your feature/scenario tagged ...</p>\n\n<pre><code>@some_tag\nFeature: My feature\n\n  @some_other_tag\n  Scenario: My scenario\n    Given ......\n</code></pre>\n\n<p>You can retrieve a list of your tag names when a given hook is applied by ...</p>\n\n<pre><code>Around('@some_tag') do |scenario|\n  tags = scenario.source_tag_names\nend\n</code></pre>\n\n<p>This would return a list of tag names in an array</p>\n\n<pre><code>$ tags\n=&gt; ['@some_tag', '@some_other_tag']\n</code></pre>\n\n<p>The tag that was called when the scenario was executed, lives in the Cucumber::Cli::Options object. I found a way to retrieve it, but it hurts my soul a little to post it ...</p>\n\n<p>If you run the above with cucumber -t @some_tag, you can get the tag in your hook by doing the following ...(although, I'm sure there must be a better way)</p>\n\n<pre><code>Around('@some_tag') do |scenario|\n  tags = scenario.source_tag_names\n  options = Array.new puts\n  executed_tag = options.last.config.tag_expressions\nend\n\n$ tags\n=&gt; ['@some_tag', '@some_other_tag']\n$ executed_tag\n=&gt; ['@some_tag']\n</code></pre>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 1584, "user_id": 601976, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/de088f705937dd429b9470ab9b9bbd8b?s=128&d=identicon&r=PG", "display_name": "RoUS", "link": "https://stackoverflow.com/users/601976/rous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 519, "favorite_count": 0, "accepted_answer_id": 32301668, "answer_count": 1, "score": 0, "last_activity_date": 1440979731, "creation_date": 1440609105, "question_id": 32232683, "link": "https://stackoverflow.com/questions/32232683/can-cucumber-hooks-differentiate-tags", "title": "Can Cucumber hooks differentiate tags", "body": "<p>Ruby 2. I have an API realised as a module.  It defines a class as simply as</p>\n\n<pre><code>class Foo\n  include API\nend\n</code></pre>\n\n<p>but it's also used to extend another module <em>via</em></p>\n\n<pre><code>module Bar\n  class &lt;&lt; self\n    include API\n  end\nend\n</code></pre>\n\n<p>I want to test the behaviour both of an instance of Foo (<em>e.g.</em>, <code>Foo.new.</code><em>methname</em>) but also the module functions (<em>e.g.</em>, <code>Bar.</code><em>methname</em>).</p>\n\n<p>One of my <code>Before</code> hooks defines <code>@exemplar</code> as the default object against tests should be applied.  So, the question: how can my <code>Before</code> hook tell whether it should use <code>@exemplar = Bar</code> or <code>@exemplar = Foo.new</code> ?</p>\n\n<p>Alternatively, after playing with tags a bit, let me try a different approach.  If a scenario is tagged with <code>@a</code> and <code>@b</code>, and I have <code>Around('@a')</code> and <code>Around('@b')</code> hooks, and cucumber is invoked with <code>-t @a</code>, <em>both</em> hooks get invoked.  Is there a way the hook code can tell</p>\n\n<ol>\n<li>What the <code>Around('...')</code> argument is (<em>i.e.</em>, the value of the <code>'...'</code>), and</li>\n<li>What tags are actually in the set being applied?</li>\n</ol>\n\n<p><em>I.e.</em>, is there any way the <code>Around('@b')</code> hook can tell that it's for the <code>@b</code> tag expression, <em>and</em> that <code>@b</code> is <strong>not</strong> in the list of tags being applied?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 2, "creation_date": 1440609283, "post_id": 32232626, "comment_id": 52347843, "body": "What do you mean specifically? It looks like you <i>did</i> loop through the array."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1440609317, "post_id": 32232626, "comment_id": 52347867, "body": "What you wrote is not an array."}, {"owner": {"reputation": 147, "user_id": 4430549, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/158e2e2c31d79fac49cceccbd2423cc0?s=128&d=identicon&r=PG&f=1", "display_name": "Brogrammer", "link": "https://stackoverflow.com/users/4430549/brogrammer"}, "edited": false, "score": 0, "creation_date": 1440609334, "post_id": 32232626, "comment_id": 52347879, "body": "I mean how do I get the genre_name value once I&#39;m looping through the array?"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1440609364, "post_id": 32232626, "comment_id": 52347896, "body": "<code>the_item_under_iteration[:genre_name]</code>, just like any other Ruby hash. But you would appear to have an array of hashes, not an array of objects (yes, I know hashes are objects; you know what I mean)."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1440609485, "post_id": 32232626, "comment_id": 52347980, "body": "The more important question is <i>why</i> do you have an array of hashes; if this is Rails, why don&#39;t you have an ActiveRecord relation with actual objects in it? And if you&#39;re just trying to get the genre names, you should be plucking them."}, {"owner": {"reputation": 147, "user_id": 4430549, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/158e2e2c31d79fac49cceccbd2423cc0?s=128&d=identicon&r=PG&f=1", "display_name": "Brogrammer", "link": "https://stackoverflow.com/users/4430549/brogrammer"}, "edited": false, "score": 0, "creation_date": 1440610063, "post_id": 32232626, "comment_id": 52348333, "body": "I just get &#39;no implicit conversion of String into Integer&#39;"}, {"owner": {"reputation": 147, "user_id": 4430549, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/158e2e2c31d79fac49cceccbd2423cc0?s=128&d=identicon&r=PG&f=1", "display_name": "Brogrammer", "link": "https://stackoverflow.com/users/4430549/brogrammer"}, "edited": false, "score": 0, "creation_date": 1440610209, "post_id": 32232626, "comment_id": 52348436, "body": "I guess I don&#39;t know what I&#39;m doing."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 4, "last_activity_date": 1440609378, "creation_date": 1440609378, "answer_id": 32232785, "question_id": 32232626, "link": "https://stackoverflow.com/questions/32232626/looping-through-an-array-of-objects-in-rails/32232785#32232785", "title": "Looping through an array of objects in rails", "body": "<pre><code>[\n  {:genre_name=&gt;\"Education\", :title_ids=&gt;[]},\n  {:genre_name=&gt;\"Health and Fitness\", :title_ids=&gt;[]},\n  {:genre_name=&gt;\"Animals and Nature\", :title_ids=&gt;[35, 49, 7, 10, 14, 17, 25, 28, 3283]},\n  {:genre_name=&gt;\"Short Stories\", :title_ids=&gt;[]},\n  {:genre_name=&gt;\"Literary Collections\", :title_ids=&gt;[]},\n  {:genre_name=&gt;\"Essays\", :title_ids=&gt;[]}\n].each do |h|\n  puts h[:genre_name]\nend\n\n#=&gt;\n# Education\n# Health and Fitness\n# Animals and Nature\n# Short Stories\n# Literary Collections\n# Essays\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 4430549, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/158e2e2c31d79fac49cceccbd2423cc0?s=128&d=identicon&r=PG&f=1", "display_name": "Brogrammer", "link": "https://stackoverflow.com/users/4430549/brogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 773, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1440609378, "creation_date": 1440608967, "question_id": 32232626, "link": "https://stackoverflow.com/questions/32232626/looping-through-an-array-of-objects-in-rails", "title": "Looping through an array of objects in rails", "body": "<p>I have an array of objects that I'm attempting to get the genre name value from.  The output to the console is the following.</p>\n\n<pre><code>{:genre_name=&gt;\"Education\", :title_ids=&gt;[]}\n{:genre_name=&gt;\"Health and Fitness\", :title_ids=&gt;[]}\n{:genre_name=&gt;\"Animals and Nature\", :title_ids=&gt;[35, 49, 7, 10, 14, 17, 25, 28, 3283]}\n{:genre_name=&gt;\"Short Stories\", :title_ids=&gt;[]}\n{:genre_name=&gt;\"Literary Collections\", :title_ids=&gt;[]}\n{:genre_name=&gt;\"Essays\", :title_ids=&gt;[]}\n</code></pre>\n\n<p>How do I loop through the array and the objects within it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "axlsx"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1440607495, "post_id": 32232185, "comment_id": 52346856, "body": "It would help if you write which method is raising the error, and the full error message."}, {"owner": {"reputation": 284, "user_id": 4535576, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cf77d60e5f3ab57ee7dcbd6c0d45039a?s=128&d=identicon&r=PG", "display_name": "Joseph Freivald", "link": "https://stackoverflow.com/users/4535576/joseph-freivald"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1440608549, "post_id": 32232185, "comment_id": 52347448, "body": "As it turns out, rails completely buggers which line the error is on when using axlsx views, so the array error was on another line.  Once I fixed that, I properly got the wrong number of arguments, 1 for 0 error."}, {"owner": {"reputation": 284, "user_id": 4535576, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cf77d60e5f3ab57ee7dcbd6c0d45039a?s=128&d=identicon&r=PG", "display_name": "Joseph Freivald", "link": "https://stackoverflow.com/users/4535576/joseph-freivald"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1440608687, "post_id": 32232185, "comment_id": 52347524, "body": "I wrote a helper <code>def increment_letter(l, c)   (1..c).map { l = l.next }   l end</code> that works, but I was looking for &quot;The Rails Way\u2122&quot; to do it without the helper."}], "answers": [{"comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1440607545, "post_id": 32232212, "comment_id": 52346885, "body": "<a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-next\" rel=\"nofollow noreferrer\">String#next</a> takes argument....whooaa.. It seems odd."}, {"owner": {"reputation": 284, "user_id": 4535576, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cf77d60e5f3ab57ee7dcbd6c0d45039a?s=128&d=identicon&r=PG", "display_name": "Joseph Freivald", "link": "https://stackoverflow.com/users/4535576/joseph-freivald"}, "edited": false, "score": 0, "creation_date": 1440608459, "post_id": 32232212, "comment_id": 52347408, "body": "Yeah, I noticed that just after I posted, and no, next does not take an argument. :("}], "tags": [], "owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "is_accepted": false, "score": 1, "last_activity_date": 1440607592, "last_edit_date": 1440607592, "creation_date": 1440607482, "answer_id": 32232212, "question_id": 32232185, "link": "https://stackoverflow.com/questions/32232185/incrementing-letters-in-ruby/32232212#32232212", "title": "Incrementing Letters in ruby", "body": "<p>This looks like a quoting problem</p>\n\n<pre><code>\"I2:#{'I'.next(@task_categories.count)}2\"\n</code></pre>\n\n<p>Note my use of single quotes <code>'</code> around your <code>I</code></p>\n\n<p>Otherwise you could also use <code>%Q{...}</code> if that looks more readable to you</p>\n\n<pre><code>%Q{I2:#{\"I\".next(@task_categories.count)}2}\n</code></pre>\n\n<p>Lastly, <code>String#next</code> does not take arguments, so you'll end up with something like this</p>\n\n<pre><code>%Q{I2:#{\"I\".next}2} #=&gt; \"I2:J2\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3290, "user_id": 1214951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/313ce4fdeb46839023cc31357b72710b?s=128&d=identicon&r=PG", "display_name": "chad_", "link": "https://stackoverflow.com/users/1214951/chad"}, "is_accepted": false, "score": 0, "last_activity_date": 1440608115, "creation_date": 1440608115, "answer_id": 32232377, "question_id": 32232185, "link": "https://stackoverflow.com/questions/32232185/incrementing-letters-in-ruby/32232377#32232377", "title": "Incrementing Letters in ruby", "body": "<p>I'm not sure I understand but something like this might do what you want:</p>\n\n<pre><code>first_col = \"I\"\nlast_col = first_col\n@task_categories.count.times { last_col = last_col.next }\nsheet.merge_cells(\"#{first_col}2:#{last_col}2\")\n</code></pre>\n"}], "owner": {"reputation": 284, "user_id": 4535576, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cf77d60e5f3ab57ee7dcbd6c0d45039a?s=128&d=identicon&r=PG", "display_name": "Joseph Freivald", "link": "https://stackoverflow.com/users/4535576/joseph-freivald"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1440608980, "creation_date": 1440607368, "last_edit_date": 1440608980, "question_id": 32232185, "link": "https://stackoverflow.com/questions/32232185/incrementing-letters-in-ruby", "title": "Incrementing Letters in ruby", "body": "<p>I'm working with axlsx in rails and I want to be able to set up the columns according to the number of elements in a collection:</p>\n\n<p>In my controller:</p>\n\n<pre><code> @task_categories = TaskCategories.all\n</code></pre>\n\n<p>In my xlsx.axlsx view I would like to do something like: </p>\n\n<pre><code> sheet.merge_cells(\"I2:#{'I'.next(@task_categories.count)}2\")\n</code></pre>\n\n<p>but I get a no explicit conversion to Array error.</p>\n\n<p>I can write a helper that loops the <code>.next</code> by <code>count</code>, but it seems that this is a common enough issue that there should be a built-in short-cut that I'm just missing.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I wrote a helper that works:</p>\n\n<pre><code>def increment_letter(l, c)\n  (1..c).map { l = l.next }\n  l\nend\n</code></pre>\n\n<p>with the call:</p>\n\n<pre><code> sheet.merge_cells(\"I2:#{increment_letter('I', @task_categories.count)}2\")\n</code></pre>\n\n<p>But I am still looking for The Rails Way\u2122.</p>\n"}, {"tags": ["ruby", "datetime"], "answers": [{"tags": [], "owner": {"reputation": 13872, "user_id": 29613, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/o1X9X.jpg?s=128&g=1", "display_name": "Tod Birdsall", "link": "https://stackoverflow.com/users/29613/tod-birdsall"}, "is_accepted": false, "score": 0, "last_activity_date": 1440606408, "creation_date": 1440606408, "answer_id": 32231918, "question_id": 32231917, "link": "https://stackoverflow.com/questions/32231917/ruby-how-do-i-handle-time-zone-offsets-that-include-minutes/32231918#32231918", "title": "Ruby: How do I handle time zone offsets that include minutes", "body": "<p>After much trial and error, I determined that I need to pass a decimal for time zone offsets that include minutes.</p>\n\n<p>So, to address my previous example using Venezuela (UTC-04:30), I can simply pass in the value <code>-4.5</code> and that works perfectly.</p>\n\n<p>Similarly, for Nepal (UTC+05:45) I would pass in the value <code>5.75</code>.</p>\n"}], "owner": {"reputation": 13872, "user_id": 29613, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/o1X9X.jpg?s=128&g=1", "display_name": "Tod Birdsall", "link": "https://stackoverflow.com/users/29613/tod-birdsall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440606408, "creation_date": 1440606408, "question_id": 32231917, "link": "https://stackoverflow.com/questions/32231917/ruby-how-do-i-handle-time-zone-offsets-that-include-minutes", "title": "Ruby: How do I handle time zone offsets that include minutes", "body": "<p>I have created an API endpoint that accepts a parameter called <code>time_zone</code>. I use this parameter to determine what time zone the requesting user is in. <code>time_zone</code> is a utc offset value that should be an integer. Example: MST has a UTC offset of -7.</p>\n\n<p>This allows me to insert the passed in <code>time_zone</code> in the following line of code:</p>\n\n<pre><code>start_time = Time.now.in_time_zone(time_zone).beginning_of_day\n</code></pre>\n\n<p>The above works fine when the time_zone value is something simple like <code>-7</code>. However, if the time zone offset includes minutes, I run into trouble. Example: Venezuela is UTC-04:30. If I pass in '-430', I get <code>ArgumentError: Invalid Timezone</code>.</p>\n\n<p>What value should I be passing into `Time.now.in_time_zone()' to get my example to work?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash", "devise"], "comments": [{"owner": {"reputation": 2388, "user_id": 1752114, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/778377fd64568f1a23968400a7477306?s=128&d=identicon&r=PG", "display_name": "Arvind", "link": "https://stackoverflow.com/users/1752114/arvind"}, "edited": false, "score": 2, "creation_date": 1440605590, "post_id": 32231498, "comment_id": 52345717, "body": "check this <a href=\"http://stackoverflow.com/questions/5763160/encrypting-additional-table-columns-using-devise\" title=\"encrypting additional table columns using devise\">stackoverflow.com/questions/5763160/&hellip;</a>"}, {"owner": {"reputation": 712, "user_id": 4191738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKXDY.jpg?s=128&g=1", "display_name": "Sculper", "link": "https://stackoverflow.com/users/4191738/sculper"}, "edited": false, "score": 1, "creation_date": 1440606113, "post_id": 32231498, "comment_id": 52346043, "body": "Are you sure you want to encrypt it?  Hashing it would be far more secure."}, {"owner": {"reputation": 1154, "user_id": 1154618, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/2f40d6ab19fe78fc49900103c4b3d086?s=128&d=identicon&r=PG", "display_name": "Blease", "link": "https://stackoverflow.com/users/1154618/blease"}, "reply_to_user": {"reputation": 712, "user_id": 4191738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKXDY.jpg?s=128&g=1", "display_name": "Sculper", "link": "https://stackoverflow.com/users/4191738/sculper"}, "edited": false, "score": 0, "creation_date": 1440606415, "post_id": 32231498, "comment_id": 52346232, "body": "@Sculper I would rather hash it yes, thanks for the advice. I&#39;ve edited my question."}], "answers": [{"tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": false, "score": 0, "last_activity_date": 1440606071, "creation_date": 1440606071, "answer_id": 32231812, "question_id": 32231498, "link": "https://stackoverflow.com/questions/32231498/devise-add-hashed-column/32231812#32231812", "title": "Devise: Add Hashed Column", "body": "<p>You can use <a href=\"https://github.com/attr-encrypted/attr_encrypted\" rel=\"nofollow\"><strong><em><code>attr_encrypted</code></em></strong></a> gem for this.</p>\n\n<pre><code>#user.rb\nClass User &lt; ActiveRecord::Base\n  attr_encrypted :pin_number, :key =&gt; 'a secret key'\nend\n</code></pre>\n\n<p>And save encrypted version of <code>pin_number</code> in <code>encrypted_pin_number</code> field and call it like <code>@user.encrypted_pin_number</code> which returns the encrypted value of <code>pin_number</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1154, "user_id": 1154618, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/2f40d6ab19fe78fc49900103c4b3d086?s=128&d=identicon&r=PG", "display_name": "Blease", "link": "https://stackoverflow.com/users/1154618/blease"}, "edited": false, "score": 0, "creation_date": 1440608790, "post_id": 32232228, "comment_id": 52347581, "body": "How would I save this hashed pin? I know how to retrieve it, but I&#39;m using devise and don&#39;t know what to change/add."}, {"owner": {"reputation": 712, "user_id": 4191738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKXDY.jpg?s=128&g=1", "display_name": "Sculper", "link": "https://stackoverflow.com/users/4191738/sculper"}, "reply_to_user": {"reputation": 1154, "user_id": 1154618, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/2f40d6ab19fe78fc49900103c4b3d086?s=128&d=identicon&r=PG", "display_name": "Blease", "link": "https://stackoverflow.com/users/1154618/blease"}, "edited": false, "score": 0, "creation_date": 1440609588, "post_id": 32232228, "comment_id": 52348048, "body": "@JoshLukeBlease I&#39;ve updated my answer.  You would need to add the field to your user migration (or create a new migration to add the pin field)."}], "tags": [], "owner": {"reputation": 712, "user_id": 4191738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKXDY.jpg?s=128&g=1", "display_name": "Sculper", "link": "https://stackoverflow.com/users/4191738/sculper"}, "is_accepted": true, "score": 0, "last_activity_date": 1440609555, "last_edit_date": 1440609555, "creation_date": 1440607546, "answer_id": 32232228, "question_id": 32231498, "link": "https://stackoverflow.com/questions/32231498/devise-add-hashed-column/32232228#32232228", "title": "Devise: Add Hashed Column", "body": "<p>You could use the <a href=\"http://bcrypt-ruby.rubyforge.org/\" rel=\"nofollow\">bcrypt</a> gem for this (Devise is already using this).  In your create / update actions, you would have something that looks like this:</p>\n\n<pre><code>pin_number = BCrypt::Password.create(\"1234\")\n</code></pre>\n\n<p>You'd then store <code>pin_number</code> in the database as is.  When you retrieve it, you'd make a new <code>Bcrypt::Password</code> object like this:</p>\n\n<pre><code>hashed_pin = @user.pin_number\npin_number = BCrypt::Password.new(hashed_pin)\n</code></pre>\n\n<p>You could then compare a raw string to the BCrypt::Password objects with the <code>==</code> operator (the string will be automatically hashed before comparison):</p>\n\n<pre><code>hashed_pin == \"1234\" # true\n</code></pre>\n\n<p>In order to use this with your User model, you would need to add the field to your User migration:</p>\n\n<pre><code># devise_create_users.rb\nt.string :pin_number\n</code></pre>\n\n<p>You could then access it just like any other attribute of your model:</p>\n\n<pre><code>@user = User.find(1)\n@user.pin_number = BCrypt::Password.create(\"1234\")\n@user.save\n</code></pre>\n"}], "owner": {"reputation": 1154, "user_id": 1154618, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/2f40d6ab19fe78fc49900103c4b3d086?s=128&d=identicon&r=PG", "display_name": "Blease", "link": "https://stackoverflow.com/users/1154618/blease"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 32232228, "answer_count": 2, "score": 1, "last_activity_date": 1440609555, "creation_date": 1440605112, "last_edit_date": 1440608727, "question_id": 32231498, "link": "https://stackoverflow.com/questions/32231498/devise-add-hashed-column", "title": "Devise: Add Hashed Column", "body": "<p>I'm using Devise within my Rails app and I want to create a column where a user's pin number is stored (and is hashed).</p>\n\n<p>The pin number is optional so it will be empty by default and changeable on the user settings page, provided by Devise.\nI have the following code which works as expected:</p>\n\n<pre><code>class RegistrationsController &lt; Devise::RegistrationsController\n\n  private\n\n  def sign_up_params\n    params.require(:user).permit(:first_name, :last_name, :email, :password, :password_confirmation)\n  end\n\n  def account_update_params\n    params.require(:user).permit(:first_name, :last_name, :email, :password, :password_confirmation, :current_password)\n  end\nend\n</code></pre>\n\n<p>I would add <code>:pin_number</code> as one of the permitted parameters in the <code>account_update_params</code> function, but how would I hash that and where?</p>\n\n<p>I am a novice with rails so I would be grateful to be shown how to hash the parameter and then save it with the appropriate user.</p>\n"}, {"tags": ["ruby-on-rails", "sql-server", "ruby", "rails-activerecord", "database-migration"], "comments": [{"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1440604966, "post_id": 32231335, "comment_id": 52345345, "body": "Stupid question, but you are looking at the database which is specified in the production block of your &quot;config/database.yml&quot; file, right?"}, {"owner": {"reputation": 1592, "user_id": 4271743, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Nivk1.jpg?s=128&g=1", "display_name": "ConnorCMcKee", "link": "https://stackoverflow.com/users/4271743/connorcmckee"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1440605183, "post_id": 32231335, "comment_id": 52345477, "body": "Yes. In fact I can run a <code>rake db:schema:reset RAILS_ENV=production</code> and see the expected results in my production (backup), but that&#39;s not a solution for obvious reasons."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1440663040, "post_id": 32231335, "comment_id": 52368886, "body": "Hmm.  What i normally do in puzzling situations like this is go to the files/lines at the top of the stack trace and start putting lots of logging in.  Sorry that&#39;s rather vague."}], "answers": [{"tags": [], "owner": {"reputation": 27854, "user_id": 1892060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e50f7bd50bf166113e2fbcf94eb9ab76?s=128&d=identicon&r=PG", "display_name": "Ainar-G", "link": "https://stackoverflow.com/users/1892060/ainar-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1535039321, "creation_date": 1535039321, "answer_id": 51989696, "question_id": 32231335, "link": "https://stackoverflow.com/questions/32231335/migrations-failing-no-superclass-method-version-for-activerecordschemam/51989696#51989696", "title": "Migrations Failing - &quot;No superclass method &#39;version&#39; for #&lt;ActiveRecord::SchemaMigration&gt;&quot;", "body": "<p>I've had the same issue today. Turns out it was because in my <code>database.yml</code> I had other schemas in my <code>search_path</code>, and those schemas had tables named <code>schema_migrations</code> without the field <code>version</code>.</p>\n\n<p>So if you're having this issue, make sure that there are no tables with the name <code>schema_migrations</code> except for the one you need in the search path.</p>\n"}], "owner": {"reputation": 1592, "user_id": 4271743, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Nivk1.jpg?s=128&g=1", "display_name": "ConnorCMcKee", "link": "https://stackoverflow.com/users/4271743/connorcmckee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 716, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1535048987, "creation_date": 1440604629, "last_edit_date": 1535048987, "question_id": 32231335, "link": "https://stackoverflow.com/questions/32231335/migrations-failing-no-superclass-method-version-for-activerecordschemam", "title": "Migrations Failing - &quot;No superclass method &#39;version&#39; for #&lt;ActiveRecord::SchemaMigration&gt;&quot;", "body": "<p><strong>The Problem</strong></p>\n\n<p>I am attempting to update a production database with a series of migrations without losing its current data. In starting from scratch, I've had no problems running all of the migrations on an empty database, or working forward with my development and test databases. However, in trying to run the migrations on a backup of our production database I am receiving a strange error, which in turn prevents all migrations from running.</p>\n\n<p><strong>The Error Message:</strong></p>\n\n<p>This is the result of running <code>rake db:migrate RAILS_ENV=production</code></p>\n\n<pre><code>rake aborted!\nNoMethodError: super: no superclass method `version' for #&lt;ActiveRecord::SchemaMigration &gt;\nC:in `map'\nC:in `map'\nTasks: TOP =&gt; db:migrate\n</code></pre>\n\n<p><strong>The Error Message - Expanded:</strong></p>\n\n<p>This is the result of running <code>rake db:migrate RAILS_ENV=production --trace</code></p>\n\n<pre><code>** Invoke db:migrate (first_time)\n** Invoke environment (first_time)\n** Execute environment\n** Invoke db:load_config (first_time)\n** Execute db:load_config\n** Execute db:migrate\nrake aborted!\nNoMethodError: super: no superclass method `version' for #&lt;ActiveRecord::SchemaMigration &gt;\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/activemodel-4.2.0/lib/active_model/attribute_methods.rb:430:in `method_missing'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/activerecord-4.2.0/lib/active_record/schema_migration.rb:53:in `version'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/activerecord-4.2.0/lib/active_record/migration.rb:844:in `block in get_all_versions'\nC:in `map'\nC:in `map'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/activerecord-4.2.0/lib/active_record/migration.rb:844:in `get_all_versions'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/activerecord-4.2.0/lib/active_record/migration.rb:985:in `migrated'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/activerecord-4.2.0/lib/active_record/migration.rb:990:in `ran?'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/activerecord-4.2.0/lib/active_record/migration.rb:967:in `block in runnable'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/activerecord-4.2.0/lib/active_record/migration.rb:967:in `reject'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/activerecord-4.2.0/lib/active_record/migration.rb:967:in `runnable'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/activerecord-4.2.0/lib/active_record/migration.rb:952:in `migrate'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/activerecord-4.2.0/lib/active_record/migration.rb:820:in `up'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/activerecord-4.2.0/lib/active_record/migration.rb:798:in `migrate'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/activerecord-4.2.0/lib/active_record/tasks/database_tasks.rb:137:in `migrate'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/activerecord-4.2.0/lib/active_record/railties/databases.rake:44:in `block (2 levels) in &lt;top (required)&gt;'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/task.rb:240:in `call'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/task.rb:240:in `block in execute'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/task.rb:235:in `each'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/task.rb:235:in `execute'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/task.rb:179:in `block in invoke_with_call_chain'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/2.0.0/monitor.rb:211:in `mon_synchronize'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/task.rb:172:in `invoke_with_call_chain'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/task.rb:165:in `invoke'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/application.rb:150:in `invoke_task'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/application.rb:106:in `block (2 levels) in top_level'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/application.rb:106:in `each'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/application.rb:106:in `block in top_level'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/application.rb:115:in `run_with_threads'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/application.rb:100:in `top_level'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/application.rb:78:in `block in run'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/application.rb:176:in `standard_exception_handling'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/rake-10.4.2/lib/rake/application.rb:75:in `run'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/gems/2.0.0/gems/rake-10.4.2/bin/rake:33:in `&lt;top (required)&gt;'\nC:/RailsInstaller/Ruby2.0.0/bin/rake:23:in `load'\nC:/RailsInstaller/Ruby2.0.0/bin/rake:23:in `&lt;main&gt;'\nTasks: TOP =&gt; db:migrate\n</code></pre>\n\n<p><strong>Additional Info:</strong></p>\n\n<ul>\n<li>Database: sqlserver</li>\n<li>Ruby: 1.9.3</li>\n<li>Rails: 4.2.0</li>\n<li>Environment: Windows 7</li>\n</ul>\n\n<p><strong>Actions Taken:</strong></p>\n\n<p>A cursory check of my database proves that the schema_migrations table exists, and that it does contain a \"version\" column. Everything appears to be in proper order. For good measure I've tried dropping and (re-)restoring the database backup multiple times, deleting and regenerating the schema.rb, and running all of my migrations again from scratch. I can't seem to figure out what is causing this to fail.</p>\n\n<p><strong>Research:</strong></p>\n\n<p>I can only find one example of someone experiencing a similar problem (<a href=\"https://gist.github.com/sam452/604f57c0525cf3416129\" rel=\"nofollow\">here</a>), and no clear resolution.</p>\n\n<p><strong>I Need to Know:</strong></p>\n\n<ul>\n<li>What's causing this</li>\n<li>How to fix it</li>\n<li>OR an alternative way to update my database without losing its records</li>\n</ul>\n"}, {"tags": ["ruby", "xml", "parsing"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1440603838, "post_id": 32231015, "comment_id": 52344547, "body": "<a href=\"http://www.nokogiri.org\" rel=\"nofollow noreferrer\">nokogiri.org</a>"}, {"owner": {"reputation": 1, "user_id": 4500213, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eRjMV.jpg?s=128&g=1", "display_name": "BJ Bryant", "link": "https://stackoverflow.com/users/4500213/bj-bryant"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1440604730, "post_id": 32231015, "comment_id": 52345192, "body": "Thank you for posting that resource, mudasobwa! I&#39;ve looked at Nokogiri sax parsing multiple times over the past few days, but I would like to reiterate that I don&#39;t understand how to use the tools to achieve what I want, not that I don&#39;t know of the different tools available."}, {"owner": {"reputation": 2036, "user_id": 477403, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/860ef9f1f54410fcfb2eff1b5f111e44?s=128&d=identicon&r=PG", "display_name": "Amol Pujari", "link": "https://stackoverflow.com/users/477403/amol-pujari"}, "edited": false, "score": 0, "creation_date": 1484205009, "post_id": 32231015, "comment_id": 70415903, "body": "<a href=\"https://amolnpujari.wordpress.com/2012/03/31/reading_huge_xml-rb/\" rel=\"nofollow noreferrer\">amolnpujari.wordpress.com/2012/03/31/reading_huge_xml-rb</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4500213, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eRjMV.jpg?s=128&g=1", "display_name": "BJ Bryant", "link": "https://stackoverflow.com/users/4500213/bj-bryant"}, "edited": false, "score": 0, "creation_date": 1440623757, "post_id": 32235578, "comment_id": 52355922, "body": "I very much appreciate the effort you put into this post; however, your response is in Java. I&#39;m using Ruby and would prefer to continue using Ruby."}], "tags": [], "owner": {"reputation": 28373, "user_id": 5015238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8790f8091d3c6c58fd45664a165117a?s=128&d=identicon&r=PG", "display_name": "jdweng", "link": "https://stackoverflow.com/users/5015238/jdweng"}, "is_accepted": false, "score": -1, "last_activity_date": 1440618985, "creation_date": 1440618985, "answer_id": 32235578, "question_id": 32231015, "link": "https://stackoverflow.com/questions/32231015/parsing-complex-xml-in-ruby-with-sax-parsing/32235578#32235578", "title": "Parsing complex xml in Ruby with sax parsing", "body": "<p>Use XMLTextReader for huge xml files.  Use code like this</p>\n\n<p>\n\n<pre><code>namespace ConsoleApplication1\n{\n    class Program\n    {\n        const string FILENAME = @\"c:\\temp\\test.txt\";\n        static void Main(string[] args)\n        {\n            List&lt;Client&gt; clients = new List&lt;Client&gt;();\n            XmlTextReader reader = new XmlTextReader(FILENAME);\n            while (!reader.EOF)\n            {\n                if (reader.Name == \"client\")\n                {\n                    string xmlClient = reader.ReadOuterXml();\n                    XElement xClient = XElement.Parse(xmlClient);\n                    Client newClient = new Client();\n                    clients.Add(newClient);\n\n                    newClient.name = xClient.Element(\"name\").Value;\n                    newClient.clientid = xClient.Element(\"clientid\").Value;\n                    newClient.workstations = xClient.Descendants(\"server\").Select(x =&gt; new WorkStation\n                    {\n                        name = x.Element(\"name\").Value,\n                        id = x.Element(\"id\").Value\n                    }).ToList();\n                }\n                else\n                {\n                    reader.ReadToFollowing(\"client\");\n                }\n            }\n        }\n    }\n    public class Client\n    {\n        public string name { get; set;}\n        public string clientid { get; set; }\n        public List&lt;WorkStation&gt; workstations { get; set; }\n    }\n    public class WorkStation\n    {\n        public string name { get; set; }\n        public string id { get; set; }\n\n    }\n}\n\u200b\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4500213, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eRjMV.jpg?s=128&g=1", "display_name": "BJ Bryant", "link": "https://stackoverflow.com/users/4500213/bj-bryant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484203165, "creation_date": 1440603702, "question_id": 32231015, "link": "https://stackoverflow.com/questions/32231015/parsing-complex-xml-in-ruby-with-sax-parsing", "title": "Parsing complex xml in Ruby with sax parsing", "body": "<p>I've been searching and searching for a couple of days on how to do this, but I can't seem to understand sax parsing in a way that will help me accomplish what I want to accomplish. I understand sax parsing on a basic level, but I can't wrap my mind around how to use it to extract the data I need to extract.</p>\n\n<p>I'm currently using:</p>\n\n<ul>\n<li>xml data</li>\n<li>ruby</li>\n<li>the <a href=\"https://github.com/soulcutter/saxerator\" rel=\"nofollow\">saxerator gem</a> (I'm not sold on this, it's just the easiest I've found so far that I'm able to understand clearly enough)</li>\n</ul>\n\n<p>Here's a sample of the xml structure:</p>\n\n<pre><code>&lt;result created=\"2015-08-26T09:42:35-05:00\" host=\"testdata\" status=\"\n  &lt;items&gt;\n    &lt;client&gt;\n      &lt;clientid&gt;00001&lt;/clientid&gt;\n      &lt;name&gt;\n        &lt;![CDATA[ ABC Company ]]&gt;\n      &lt;/name&gt;\n      &lt;site&gt;\n        &lt;siteid&gt;222222&lt;/siteid&gt;\n        &lt;name&gt;\n          &lt;![CDATA[ 123 Blvd ]]&gt;\n        &lt;/name&gt;\n        &lt;workstations/&gt;\n        &lt;servers&gt;\n          &lt;server&gt;\n            &lt;id&gt;333333&lt;/id&gt;\n            &lt;name&gt;\n              &lt;![CDATA[ 123BLVD-SRV ]]&gt;\n            &lt;/name&gt;\n            &lt;failed_checks&gt;\n              &lt;check&gt;\n                &lt;checkid&gt;4444444&lt;/checkid&gt;\n                &lt;check_type&gt;0001&lt;/check_type&gt;\n                &lt;description&gt;\n                  &lt;![CDATA[Critical Events Check - Application log]]&gt;\n                &lt;/description&gt;\n                &lt;dsc_247&gt;2&lt;/dsc_247&gt;\n                &lt;date&gt;2015-08-26&lt;/date&gt;\n                &lt;time&gt;06:03:44&lt;/time&gt;\n                &lt;consecutive_fails&gt;2&lt;/consecutive_fails&gt;\n                &lt;startdate&gt;2015-08-25&lt;/startdate&gt;\n                &lt;starttime&gt;10:43:51&lt;/starttime&gt;\n                &lt;formatted_output&gt;\n                  &lt;![CDATA[Event log issues[CLIENT:]]&gt;\n                &lt;/formatted_output&gt;\n                &lt;checkstatus&gt;\n                  &lt;![CDATA[ Status ]]&gt;\n                &lt;/checkstatus&gt;\n              &lt;/check&gt;\n            &lt;/failed_checks&gt;\n          &lt;/server&gt;\n        &lt;/servers&gt;\n      &lt;/site&gt;\n    &lt;/client&gt;\n</code></pre>\n\n<p>What I'm trying to extract is an array of clients. Each client will have a name, a clientid, an array of its workstations (and their properties), and an array of its servers (and their properties). Something like this:</p>\n\n<pre><code>clients_array = [\n  {\n    :name =&gt; 'ABC Company', \n    :clientid =&gt; '00001', \n    :workstations =&gt; [\n      {\n        :name =&gt; 'hostname', \n        :id =&gt; '00002', \n        :failed_checks =&gt; [\n          {\n            :description =&gt; 'description', :cause =&gt; 'cause'\n          }\n        ]\n      }, \n      {\n        :name =&gt; 'hostname2',\n        :id =&gt; '00003',\n        ...\n      }\n    ]\n  },\n  {\n    :name =&gt; 'Second Company',\n    :clientid =&gt; '...',\n    ...\n  }\n] \n</code></pre>\n\n<p>The problem I'm running into is I can extract the client node's information easily enough, but extracting the workstation and server information for each client node is difficult. </p>\n\n<p><em>Side note: I would just use DOM parsing, which I've done in the past with great success, but the XML I'm working with is far too large and has crashed the server.</em></p>\n\n<p>Here's what I've been working with so far. I keep getting stuck at the site/workstations/servers nodes because sometimes there will be one site (hash element) and sometimes there are multiple sites (array element). The same goes for workstations and servers.</p>\n\n<p>Since this is sax parsing, I don't understand how I can point the workstations and servers back to each client. I don't need the site data, just the workstations and servers for each client:</p>\n\n<pre><code>require 'saxerator'\n\ndef parse_sax    \n\n  clients_array = []\n\n  parser = Saxerator.parser(File.new(\"data.xml\"))\n\n  parser.for_tag(:client).each do |client|\n\n    # Create a hash to store 'this' client's data in\n    client_hash = Hash.new\n\n    # Grab some data\n    client_hash[:name] = client['name']\n    client_hash[:clientid] = client['clientid']\n\n    # Here's where the workstation/server code would go\n    parser.for_tag(:site).each do |site|\n      # This just goes through and finds ALL sites\n    end\n  clients_array &lt;&lt; client_hash\nend\n</code></pre>\n\n<p>I thought I had figured it out when I thought about parsing clients, workstations, and servers separately:</p>\n\n<pre><code>parser.for_tag(:client).each do |client|\n  ...\nend\n\nparser.for_tag(:workstation).each do |ws|\n  ...\nend\n\nparser.for_tag(:server).each do |srv|\n  ...\nend\n</code></pre>\n\n<p>But then I end up with a bunch of separate client, workstation, and server objects with no way of relating the devices back to their respective clients.</p>\n\n<p>It's very possible my grasp of sax parsing is such that I'm just missing something trivial that will accomplish what I want, but I can't seem to discover the solution.</p>\n\n<p>I'm more than happy to provide clarification where needed and any help is more than appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeresource"], "comments": [{"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1440604048, "post_id": 32231000, "comment_id": 52344716, "body": "Which version of Rails are you using?"}, {"owner": {"reputation": 33, "user_id": 5269299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f337857fcddf3b2eac7e1af67de674f9?s=128&d=identicon&r=PG&f=1", "display_name": "prion_niopr", "link": "https://stackoverflow.com/users/5269299/prion-niopr"}, "reply_to_user": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1440605132, "post_id": 32231000, "comment_id": 52345445, "body": "rails version 4.2.0. Active Resource version 4.0.0"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5269299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f337857fcddf3b2eac7e1af67de674f9?s=128&d=identicon&r=PG&f=1", "display_name": "prion_niopr", "link": "https://stackoverflow.com/users/5269299/prion-niopr"}, "edited": false, "score": 0, "creation_date": 1440604627, "post_id": 32231127, "comment_id": 52345118, "body": "Thank you. I also tried update_attribute, to no avail (same error)."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 33, "user_id": 5269299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f337857fcddf3b2eac7e1af67de674f9?s=128&d=identicon&r=PG&f=1", "display_name": "prion_niopr", "link": "https://stackoverflow.com/users/5269299/prion-niopr"}, "edited": false, "score": 0, "creation_date": 1440604900, "post_id": 32231127, "comment_id": 52345298, "body": "can you show your full code snippet? also which version of Rails are you using?"}, {"owner": {"reputation": 33, "user_id": 5269299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f337857fcddf3b2eac7e1af67de674f9?s=128&d=identicon&r=PG&f=1", "display_name": "prion_niopr", "link": "https://stackoverflow.com/users/5269299/prion-niopr"}, "edited": false, "score": 0, "creation_date": 1440607767, "post_id": 32231127, "comment_id": 52347009, "body": "Thank you for being patient with me. The stack trace is posted above and I am trying to get a more verbose one as we speak."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 33, "user_id": 5269299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f337857fcddf3b2eac7e1af67de674f9?s=128&d=identicon&r=PG&f=1", "display_name": "prion_niopr", "link": "https://stackoverflow.com/users/5269299/prion-niopr"}, "edited": false, "score": 0, "creation_date": 1440610995, "post_id": 32231127, "comment_id": 52348910, "body": "Can you post the full controller&#39;s code? Along with your strong parameters. Also, the full stack trace means everything from your rails log"}, {"owner": {"reputation": 33, "user_id": 5269299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f337857fcddf3b2eac7e1af67de674f9?s=128&d=identicon&r=PG&f=1", "display_name": "prion_niopr", "link": "https://stackoverflow.com/users/5269299/prion-niopr"}, "edited": false, "score": 1, "creation_date": 1440769732, "post_id": 32231127, "comment_id": 52424021, "body": "Thank you so much, K M Rakibul Islam. I was unable to find the logs easily because one of our team members had added a gem that overrode the traditional Rails logging. I found out the issue and it was completely unrelated - I failed to convert an attribute to an acceptable type, so my json was being formatted improperly.   This is my first post. I will try to be more helpful in the future in providing my question along with necessary information. Thanks again."}], "tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": true, "score": 0, "last_activity_date": 1440604658, "last_edit_date": 1440604658, "creation_date": 1440604014, "answer_id": 32231127, "question_id": 32231000, "link": "https://stackoverflow.com/questions/32231000/activeresourcebadrequest-error-when-trying-to-save-after-one-update-to-a-primi/32231127#32231127", "title": "ActiveResource::BadRequest error when trying to save after one update to a primitive attribute", "body": "<p>Looks like <a href=\"http://apidock.com/rails/ActiveRecord/Base/attributes%3D\" rel=\"nofollow\">attributes=</a> is deprecated on the latest stable version of Rails. The last existing version (v3.1.0).</p>\n\n<p>Instead, you can use <a href=\"http://apidock.com/rails/ActiveRecord/Base/update_attribute\" rel=\"nofollow\">update_attribute</a> to update the record's attribute:</p>\n\n<pre><code>item.update_attribute(:name, \"New Name\")\n</code></pre>\n\n<p>and <code>update_attribute</code> will save the record (if valid), so you don't have to call <code>save</code> on it.</p>\n"}], "owner": {"reputation": 33, "user_id": 5269299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f337857fcddf3b2eac7e1af67de674f9?s=128&d=identicon&r=PG&f=1", "display_name": "prion_niopr", "link": "https://stackoverflow.com/users/5269299/prion-niopr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 505, "favorite_count": 1, "accepted_answer_id": 32231127, "answer_count": 1, "score": 2, "last_activity_date": 1440609796, "creation_date": 1440603657, "last_edit_date": 1440607736, "question_id": 32231000, "link": "https://stackoverflow.com/questions/32231000/activeresourcebadrequest-error-when-trying-to-save-after-one-update-to-a-primi", "title": "ActiveResource::BadRequest error when trying to save after one update to a primitive attribute", "body": "<p>I am currently working with a REST API that has an object with an attribute \"name.\" </p>\n\n<pre><code>item = person.find(id)\n</code></pre>\n\n<p>I can loop through the item's attributes without any problem and one attribute is, indeed, \"name.\" However, when I try the following:</p>\n\n<pre><code>item.attributes[\"name\"] = \"New Name\"\n</code></pre>\n\n<p>I can confirm that the attribute \"name\" has been updated, yet after calling</p>\n\n<pre><code>item.save\n</code></pre>\n\n<p>results in an ActiveResource::BadRequest (400) error. Has anybody encountered a problem like this before?</p>\n\n<p>Thanks! </p>\n\n<p>I tried the above and I also tried</p>\n\n<pre><code>item = person.find(id)\nitem.name = \"New Name\"\nitem.save\n</code></pre>\n\n<p>Finally, per suggestion, I tried</p>\n\n<pre><code>item.update_attribute(:name, \"New Name\")\n</code></pre>\n\n<p>and omitted item.save since the save is performed inherently.</p>\n\n<p>It seems that no matter what I try, I continue to see the following stacktrace: </p>\n\n<pre><code>ActiveResource::BadRequest (Failed.  Response code = 400.  Response message = Bad Request.): \napp/controllers/home_controller.rb:84:in `update_data'\n</code></pre>\n\n<p>Where Line 84 is the event where the ActiveResource object is being updated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "shopify", "x-frame-options"], "comments": [{"owner": {"reputation": 8203, "user_id": 210841, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5adbe9e20522d6a177e76b223b6750ed?s=128&d=identicon&r=PG", "display_name": "David Lazar", "link": "https://stackoverflow.com/users/210841/david-lazar"}, "edited": false, "score": 0, "creation_date": 1440608059, "post_id": 32230982, "comment_id": 52347185, "body": "I too would like to know the answer to this. It is a hole in the Shopify pattern they have not addressed to my knowledge. I use Sinatra and have the same issue with trying to get the payment confirmation dialog to show a second/third or more time."}, {"owner": {"reputation": 2547, "user_id": 1353441, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ZFbyK.jpg?s=128&g=1", "display_name": "alexandresaiz", "link": "https://stackoverflow.com/users/1353441/alexandresaiz"}, "edited": false, "score": 0, "creation_date": 1440723619, "post_id": 32230982, "comment_id": 52403131, "body": "Why don&#39;t you add a free very limited plan? this way, you have lots of merchants on board so they can try the magic of your app?"}, {"owner": {"reputation": 635, "user_id": 2968448, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5c17ac9384320b2f261471f1510b9d5c?s=128&d=identicon&r=PG", "display_name": "voskart", "link": "https://stackoverflow.com/users/2968448/voskart"}, "reply_to_user": {"reputation": 2547, "user_id": 1353441, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ZFbyK.jpg?s=128&g=1", "display_name": "alexandresaiz", "link": "https://stackoverflow.com/users/1353441/alexandresaiz"}, "edited": false, "score": 0, "creation_date": 1440748213, "post_id": 32230982, "comment_id": 52410856, "body": "@alexandresaiz I did it now the way I described below. I added a trial of 7 days so it should be enough. I would do the first app for free but I&#39;m not the one to decide such things ;)"}, {"owner": {"reputation": 3640, "user_id": 1591957, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f8f7f625b8466f0f163f4c55c30538c?s=128&d=identicon&r=PG", "display_name": "Rebs", "link": "https://stackoverflow.com/users/1591957/rebs"}, "edited": false, "score": 0, "creation_date": 1449122493, "post_id": 32230982, "comment_id": 55871526, "body": "shopify api: worst dev experience ever"}], "answers": [{"tags": [], "owner": {"reputation": 635, "user_id": 2968448, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5c17ac9384320b2f261471f1510b9d5c?s=128&d=identicon&r=PG", "display_name": "voskart", "link": "https://stackoverflow.com/users/2968448/voskart"}, "is_accepted": false, "score": 0, "last_activity_date": 1441959728, "last_edit_date": 1441959728, "creation_date": 1440611044, "answer_id": 32233265, "question_id": 32230982, "link": "https://stackoverflow.com/questions/32230982/not-able-to-embed-sites-in-an-application-in-shopify-x-frame-options/32233265#32233265", "title": "Not able to embed sites in an application in Shopify (X-Frame-Options)", "body": "<p>Ok this is by far not the solution I was looking for but oh well. If I see that the charge is not valid I redirect the user to my billing_error_path. There I have a button with a link_to to my shopify-app listing. There he can click on \"Get\" once again and is then redirected back to my shop and can accept/decline the fees once again. Probably not the best solution but at least it does what I was looking for</p>\n"}, {"comments": [{"owner": {"reputation": 126, "user_id": 1444233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c97d984ab5e5bb7dd00a40e200898e15?s=128&d=identicon&r=PG", "display_name": "stanhope", "link": "https://stackoverflow.com/users/1444233/stanhope"}, "edited": false, "score": 1, "creation_date": 1453141350, "post_id": 34078215, "comment_id": 57462263, "body": "The issues is that Shopify don&#39;t allow 302 redirects from embedded apps.  I experienced my app timing out.  It turns out this error appeared in the javascript console  Load denied by X-Frame-Options: https://&lt;shop_name&gt;.myshopify.com/admin/charges/&lt;id&gt;/confirm&zwnj;&#8203;_recurring_applicati&zwnj;&#8203;on_charge?signature=&zwnj;&#8203;&lt;signature_hash&gt; does not permit framing.  I followed @Rebs instructions and re-wrote the 302 as a javascript redirect (window.top.location) and it worked fine."}, {"owner": {"reputation": 126, "user_id": 1444233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c97d984ab5e5bb7dd00a40e200898e15?s=128&d=identicon&r=PG", "display_name": "stanhope", "link": "https://stackoverflow.com/users/1444233/stanhope"}, "edited": false, "score": 1, "creation_date": 1453141545, "post_id": 34078215, "comment_id": 57462373, "body": "I produced a screencast demonstrating the problem and reported this issue to Shopify in ticket 2421717 on 27/11/2015, but as of 18/1/2016 they have chosen not to do anything about it."}, {"owner": {"reputation": 141, "user_id": 6521576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e489c91d48b928dccf4407f4c3c3d05?s=128&d=identicon&r=PG&f=1", "display_name": "Riken Mehta", "link": "https://stackoverflow.com/users/6521576/riken-mehta"}, "edited": false, "score": 0, "creation_date": 1523459905, "post_id": 34078215, "comment_id": 86572939, "body": "@Rebs I had the same issue, I solved by making ajax call to get subscription information. Then redirect to confirmation page using the method you suggested. But now I am unable to go back to iframe scope of the shopify."}], "tags": [], "owner": {"reputation": 3640, "user_id": 1591957, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f8f7f625b8466f0f163f4c55c30538c?s=128&d=identicon&r=PG", "display_name": "Rebs", "link": "https://stackoverflow.com/users/1591957/rebs"}, "is_accepted": true, "score": 5, "last_activity_date": 1458167498, "last_edit_date": 1458167498, "creation_date": 1449185145, "answer_id": 34078215, "question_id": 32230982, "link": "https://stackoverflow.com/questions/32230982/not-able-to-embed-sites-in-an-application-in-shopify-x-frame-options/34078215#34078215", "title": "Not able to embed sites in an application in Shopify (X-Frame-Options)", "body": "<p>Shopify ignore 302's to their charge approval forms. The reason being, that your app is embedded in an iframe. The payment confirmation endpoint refuses to be embedded inside an iframe regardless of origin - they don't even whitelist their own site!!</p>\n\n<p>This means you <strong>CANNOT</strong> simply do a form post and 302 on success to the subscription confirmation url, that would be too easy.</p>\n\n<p>You <strong>MUST</strong> write some javascript that will take the confirmation url and perform <code>window.top.location = confirm_url;</code>. </p>\n\n<p>You <strong>MUST</strong> break out of the iframe or shopify will also deny you redirect capabilities and you'll be back where you were.</p>\n\n<p>Alternatively, you can open the link in a new window.</p>\n\n<p>I had to convert my 'quick and simple' app to make an Ajax call to submit the subscription information to my server, then do a JS redirect using the resulting confirmation url sent back.</p>\n\n<p>Have to say, Shopify's API is <em>horrendously</em> under-documented, and incredibly poorly implemented. At every turn their \"API\" puts up a roadblock.</p>\n"}, {"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1478871149, "post_id": 40548966, "comment_id": 68336507, "body": "Welcome to Stack Overflow! While this code snippet may solve the question, including an explanation <a href=\"//meta.stackexchange.com/q/114762\">really helps</a> to improve the quality of your post. Remember that you are answering the question for readers in the future, not just the person asking now!  Please <a href=\"https://stackoverflow.com/posts/40548966/edit\">edit</a> your answer to add explanation, and give an indication of what limitations and assumptions apply."}], "tags": [], "owner": {"reputation": 11, "user_id": 7146241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91571a2766be12247a44a07586c1a84c?s=128&d=identicon&r=PG&f=1", "display_name": "Krishna Srihari", "link": "https://stackoverflow.com/users/7146241/krishna-srihari"}, "is_accepted": false, "score": 1, "last_activity_date": 1478870656, "creation_date": 1478870656, "answer_id": 40548966, "question_id": 32230982, "link": "https://stackoverflow.com/questions/32230982/not-able-to-embed-sites-in-an-application-in-shopify-x-frame-options/40548966#40548966", "title": "Not able to embed sites in an application in Shopify (X-Frame-Options)", "body": "<p>Add these below code in config/application.rb file</p>\n\n<pre><code>config.action_dispatch.default_headers['P3P'] = 'CP=\"Not used\"'\nconfig.action_dispatch.default_headers.delete('X-Frame-Options')\nconfig.active_record.raise_in_transactional_callbacks = true\n</code></pre>\n"}], "owner": {"reputation": 635, "user_id": 2968448, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5c17ac9384320b2f261471f1510b9d5c?s=128&d=identicon&r=PG", "display_name": "voskart", "link": "https://stackoverflow.com/users/2968448/voskart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1970, "favorite_count": 2, "accepted_answer_id": 34078215, "answer_count": 3, "score": 3, "last_activity_date": 1478870656, "creation_date": 1440603588, "question_id": 32230982, "link": "https://stackoverflow.com/questions/32230982/not-able-to-embed-sites-in-an-application-in-shopify-x-frame-options", "title": "Not able to embed sites in an application in Shopify (X-Frame-Options)", "body": "<p>I've been working on my first RoR/Shopify-application for the last couple of weeks and it is nearly finished. The only thing I'm having trouble with are the application charges. When a user sees my application in the store he clicks on \"Get\" and the authentication process is then initialized. The app is being installed and the user can Accept/Decline the charges. If he declines, he is redirected to my app listing in the store.\nNow here is my problem. If the user declines the fees my application is still installed and if he clicks on my banner a second time I need to check whether he is paying for it or not. I do it via</p>\n\n<pre><code>if (ShopifyAPI::RecurringApplicationCharge.current)\n   some logic since the charge is valid\nelse \n   redirect_to billing_index_path(:shop_url =&gt; cur_shop_url)\n</code></pre>\n\n<p>My idea was to make the popup with the charging fees show up once again if the user hasn't paid yet. This doesn't work and I get an error saying that my site was not displayed because the X-Frame-Options are set to DENY. I've already tried to delete the options in my application_controller.rb and also in my application.rb using either</p>\n\n<pre><code>Response.headers.delete('X-Frame-Options') \n</code></pre>\n\n<p>and</p>\n\n<pre><code>config.action_dispatch.default_headers.delete('X-Frame-Options') \n</code></pre>\n\n<p>respectively. The first time the user installs the app everything seems to work, the embedding, the logic etc. but after he tries it a second time all hell breaks loose. How can I embed all the sites each time a user accesses my application? I read that Shopify's response has a DENY Header by default but I am sure that there must be a solution to this problem. I can't make a user uninstall the app every single time.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["ruby", "expression", "conditional-statements"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1440603221, "post_id": 32230715, "comment_id": 52344094, "body": "Ruby operator precedence is <i>exactly</i> what you should be reviewing here. And, please don&#39;t post your questions as puzzles. Give us the information required to answer, and then pose your question in as straightforward a manner as possible."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1440607779, "post_id": 32230715, "comment_id": 52347019, "body": "Cannot be reproduced."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1440614376, "post_id": 32230715, "comment_id": 52350877, "body": "@sawa, what do you mean?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1440631050, "post_id": 32230715, "comment_id": 52358644, "body": "@ndn The OP&#39;s code does not output what OP claims to output."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1440658652, "post_id": 32230715, "comment_id": 52366483, "body": "@sawa, it does... what do you get when you execute it?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1440658837, "post_id": 32230715, "comment_id": 52366600, "body": "@ndn I get <code>var1: BBB var2: BBB</code> (with linebreak)."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1440603313, "post_id": 32230837, "comment_id": 52344157, "body": "&quot;it is not that readable to assign values while checking &quot; - rubymine even highlights this as a warning"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1440603376, "post_id": 32230837, "comment_id": 52344201, "body": "it&#39;s worth mentioning that <code>&amp;&amp;</code> and <code>||</code> have higher precedence than assignment specifically so that you can use <code>x = a &amp;&amp; b &amp;&amp; c</code> and have it work as expected."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 4, "last_activity_date": 1440603167, "creation_date": 1440603167, "answer_id": 32230837, "question_id": 32230715, "link": "https://stackoverflow.com/questions/32230715/ruby-condition-expression-parsing-order/32230837#32230837", "title": "Ruby condition expression parsing order", "body": "<p>Both are parsed from left to right.</p>\n\n<p>What confuses you here is that <code>&amp;&amp;</code> and <code>||</code> have higher precedence than <code>=</code>.\n<hr>\nTherefore:</p>\n\n<pre><code>var1 = 'AAA' &amp;&amp; var2 = 'BBB'\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>var1 = ('AAA' &amp;&amp; var2 = 'BBB')\n</code></pre>\n\n<p>which leaves you with both variables equal to <code>BBB</code>, because <code>AAA</code> is truthy.\n<hr>\nSame for the second example:</p>\n\n<pre><code>var1 = 'AAA' || var2 = 'BBB' || var3 = 'CCC'\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>var1 = ('AAA' || var2 = 'BBB' || var3 = 'CCC')\n</code></pre>\n\n<p>which just assigns <code>AAA</code> to <code>var1</code> and nothing more.</p>\n\n<hr>\n\n<p>To achieve what you want here, either put the brackets where you need them or use <code>and</code> and <code>or</code> as they have lower precedence. Either way, it is not that readable to assign values while checking for condition to begin with.</p>\n"}], "owner": {"reputation": 103, "user_id": 4558418, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/aa909d518f24f3ed9181cd16f237b2cb?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir", "link": "https://stackoverflow.com/users/4558418/vladimir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "answer_count": 1, "score": -5, "last_activity_date": 1440603167, "creation_date": 1440602861, "last_edit_date": 1440603151, "question_id": 32230715, "link": "https://stackoverflow.com/questions/32230715/ruby-condition-expression-parsing-order", "title": "Ruby condition expression parsing order", "body": "<p>Consider the following two code snippets:</p>\n\n<p>The first...</p>\n\n<pre><code> if var1 = 'AAA' &amp;&amp; var2 = 'BBB'\n   puts \"var1: #{var1}\"\n   puts \"var2: #{var2}\"\n end\n</code></pre>\n\n<p>outputs:</p>\n\n<blockquote>\n  <p>BBB BBB</p>\n</blockquote>\n\n<p>The second...</p>\n\n<pre><code> if var1 = 'AAA' || var2 = 'BBB' || var3 = 'CCC'\n   puts \"#{var1} #{var2} #{var3}\"\n end\n</code></pre>\n\n<p>outputs:</p>\n\n<blockquote>\n  <p>AAA</p>\n</blockquote>\n\n<p>Why in the first example code is parsed by the Ruby interpreter from the right, but with the second example from the left? Where can I find how exactly Ruby is parsing operators (expression) inside of conditions (if/unless...)?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord", "sidekiq"], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 1863758, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/37f109fd8f398238dd037bae02b54258?s=128&d=identicon&r=PG", "display_name": "divergent", "link": "https://stackoverflow.com/users/1863758/divergent"}, "edited": false, "score": 0, "creation_date": 1440667127, "post_id": 32239276, "comment_id": 52371436, "body": "So I am passing the title attribute of the Active Type Object, a string, to <code>perform_async</code> in the absence of an id. But this problem isn&#39;t about not having an id, it is about not having a primary key a la an Active Type Object. I have just tried using Sidekiq with an actual Active Record object and it worked perfectly. What I&#39;m wondering then is if there is any way to make the Active Type object more Active Record like by setting a p key. Thanks."}, {"owner": {"reputation": 191, "user_id": 1863758, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/37f109fd8f398238dd037bae02b54258?s=128&d=identicon&r=PG", "display_name": "divergent", "link": "https://stackoverflow.com/users/1863758/divergent"}, "edited": false, "score": 0, "creation_date": 1440667444, "post_id": 32239276, "comment_id": 52371622, "body": "I have tried to do <code>self.primary_key = :title</code> in <code>active_type_object.rb</code> but that didn&#39;t work"}], "tags": [], "owner": {"reputation": 505, "user_id": 3790827, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/49de53853bf9015755623fb280584504?s=128&d=identicon&r=PG&f=1", "display_name": "user3790827", "link": "https://stackoverflow.com/users/3790827/user3790827"}, "is_accepted": false, "score": 0, "last_activity_date": 1440639063, "creation_date": 1440639063, "answer_id": 32239276, "question_id": 32230268, "link": "https://stackoverflow.com/questions/32230268/sidekiq-throws-active-record-unknown-primary-key-error-on-active-type-object/32239276#32239276", "title": "Sidekiq throws &#39;Active Record Unknown Primary Key Error&#39; on Active Type object", "body": "<p>It depends on what do you want to do with your Active Type Object.\nAs the <a href=\"https://github.com/mperham/sidekiq/wiki/Best-Practices#1-make-your-job-parameters-small-and-simple\" rel=\"nofollow\">Documentation</a> states</p>\n\n<blockquote>\n  <p>The arguments you pass to <code>perform_async</code> must be composed of <strong><code>simple</code></strong> JSON datatypes: string, integer, float, boolean, null, array and hash.</p>\n</blockquote>\n\n<p>If you don't have an id to identify the Object( from your post I understand that you don't), then the best solution would be to convert the Object to a Hash and then pass it to <code>perform_async</code> . But as I said, it depends on what you data you need from your Object. In some cases you might not need to use a hash and a simpler data type will suffice.</p>\n"}], "owner": {"reputation": 191, "user_id": 1863758, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/37f109fd8f398238dd037bae02b54258?s=128&d=identicon&r=PG", "display_name": "divergent", "link": "https://stackoverflow.com/users/1863758/divergent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 240, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1440639063, "creation_date": 1440601591, "question_id": 32230268, "link": "https://stackoverflow.com/questions/32230268/sidekiq-throws-active-record-unknown-primary-key-error-on-active-type-object", "title": "Sidekiq throws &#39;Active Record Unknown Primary Key Error&#39; on Active Type object", "body": "<p>I am using the <a href=\"http://sidekiq.org\" rel=\"nofollow\">Sidekiq</a> gem in my Rails app to handle some long-running processes asynchronously. As illustrated in <a href=\"http://railscasts.com/episodes/366-sidekiq?view=asciicast\" rel=\"nofollow\">this Railscast</a>, a reference to the model to be processed is passed as an argument to the <code>perform_async</code> method of the worker class doing the background processing. </p>\n\n<p>This would not be a problem if the model in question was an Active Record object. However it is an <a href=\"http://github.com/makandra/active_type\" rel=\"nofollow\">Active Type</a> object designed to \"quack like ActiveRecord\" and unfortunately it does not quack as loudly so I get an <code>ActiveRecord::UnknownPrimaryKeyError</code>.</p>\n\n<p>How do I set a primary key for a Ruby object that really is not a db object and convince Sidekiq to treat it as such? Unable to glean information on how to do this from the Active Type Github page.</p>\n\n<p>Any help will be greatly appreciated!</p>\n"}, {"tags": ["ruby", "google-api", "google-api-ruby-client"], "answers": [{"tags": [], "owner": {"reputation": 1229, "user_id": 568801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/717f836f35abbccabd7c66cbdc2362f9?s=128&d=identicon&r=PG", "display_name": "stoodfarback", "link": "https://stackoverflow.com/users/568801/stoodfarback"}, "is_accepted": false, "score": 0, "last_activity_date": 1440600625, "creation_date": 1440600625, "answer_id": 32229892, "question_id": 32229359, "link": "https://stackoverflow.com/questions/32229359/google-spreadsheets-api-not-giving-a-response/32229892#32229892", "title": "Google Spreadsheets API Not Giving a Response", "body": "<p>Check the full response object, not just <code>response.body</code>. It might be under a different method, or you might find a more specific error.</p>\n"}], "owner": {"reputation": 2286, "user_id": 3166622, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/686656406/picture?type=large", "display_name": "Bill L", "link": "https://stackoverflow.com/users/3166622/bill-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1440685286, "creation_date": 1440599144, "last_edit_date": 1440685286, "question_id": 32229359, "link": "https://stackoverflow.com/questions/32229359/google-spreadsheets-api-not-giving-a-response", "title": "Google Spreadsheets API Not Giving a Response", "body": "<p>I'm using Google's Drive and Spreadsheet API together to try and edit some spreadsheets in Google drive. I'm trying to get a list of my worksheets currently. I'm working with their Ruby client, and am trying to grab the list of worksheets in the following way:</p>\n\n<pre><code>response = client.execute(\n    :http_method =&gt; :get,\n    :uri =&gt; \"https://spreadsheets.google.com/feeds/worksheets/1MBP9Q9Q-9ZgLoYnY8ExS-EcxHLESI_vcK4J91ngp6-Q/private/full\"\n)\n</code></pre>\n\n<p>Client is a fully authenticated Google::APIClient object, and it has all permissions and scopes to access what it needs to access. However, when I try to print <code>response.body</code> to the console, it comes out blank, meaning I never captured the response.</p>\n\n<p>However, when I try doing the same stuff in Google's OAuth 2.0 Playground, sending a GET request to that endpoint, it returns all the data I'm hoping to capture in the <code>response</code> variable. Any ideas why this is happening? I don't know why it would be returning nothing in my console, but in the OAuth 2.0 playground, it gives the data I need. </p>\n\n<p>Thanks in advance for any help.</p>\n"}, {"tags": ["ruby", "gem", "rubygems", "bundler"], "comments": [{"owner": {"reputation": 2044, "user_id": 1107211, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mte2a.jpg?s=128&g=1", "display_name": "wurde", "link": "https://stackoverflow.com/users/1107211/wurde"}, "edited": false, "score": 0, "creation_date": 1440599432, "post_id": 32229248, "comment_id": 52341359, "body": "sounds like a security concern - i wouldn&#39;t want a gem to execute arbitrary code on install."}, {"owner": {"reputation": 2044, "user_id": 1107211, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mte2a.jpg?s=128&g=1", "display_name": "wurde", "link": "https://stackoverflow.com/users/1107211/wurde"}, "edited": false, "score": 1, "creation_date": 1440599478, "post_id": 32229248, "comment_id": 52341391, "body": "What exactly is the reason for doing this? Perhaps you have other options."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2993456"}, "reply_to_user": {"reputation": 2044, "user_id": 1107211, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mte2a.jpg?s=128&g=1", "display_name": "wurde", "link": "https://stackoverflow.com/users/1107211/wurde"}, "edited": false, "score": 0, "creation_date": 1440600836, "post_id": 32229248, "comment_id": 52342388, "body": "The reason is so that I can call a command by name from command line"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2993456"}, "reply_to_user": {"reputation": 2044, "user_id": 1107211, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mte2a.jpg?s=128&g=1", "display_name": "wurde", "link": "https://stackoverflow.com/users/1107211/wurde"}, "edited": false, "score": 0, "creation_date": 1440600892, "post_id": 32229248, "comment_id": 52342428, "body": "If it&#39;s not possible then I can just place instructions within the readme to tell the user &#39;hey guy, run the installer after you download the gem&#39;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2993456"}, "reply_to_user": {"reputation": 2044, "user_id": 1107211, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mte2a.jpg?s=128&g=1", "display_name": "wurde", "link": "https://stackoverflow.com/users/1107211/wurde"}, "edited": false, "score": 0, "creation_date": 1440601748, "post_id": 32229248, "comment_id": 52343056, "body": "Mainly, I need a .bat file to be placed in RUBY_HOME/bin, similar to how <code>rails.bat</code> gets placed in bin when the Rails gem is installed"}], "owner": {"user_type": "does_not_exist", "display_name": "user2993456"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1440601778, "creation_date": 1440598829, "last_edit_date": 1440601778, "question_id": 32229248, "link": "https://stackoverflow.com/questions/32229248/how-can-i-make-a-gem-perform-an-action-on-install", "title": "How can I make a gem perform an action on install?", "body": "<p><strong>Update:</strong><br>\nMainly, I need a .bat file to be placed in RUBY_HOME/bin, similar to how rails.bat gets placed in bin when the Rails gem is installed </p>\n\n<p>I'm building a gem that can be used for generating automation test frameworks for testing web application written in any language, with any framework. </p>\n\n<p>I need one file within my gem to be run every time the gem is installed. This file generates either a .bat or .sh file. </p>\n\n<p>I have already built this script and it works great, I just need it be run each time the gem is installed using bundler. Is this possible? </p>\n"}, {"tags": ["ruby", "windows", "sinatra"], "comments": [{"owner": {"reputation": 3249, "user_id": 1279355, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ac7a44c55973edf3381ce916ee8eb100?s=128&d=identicon&r=PG", "display_name": "Sir l33tname", "link": "https://stackoverflow.com/users/1279355/sir-l33tname"}, "edited": false, "score": 1, "creation_date": 1440598803, "post_id": 32228794, "comment_id": 52340873, "body": "I guess you have checked that <code>c:&#47;Users&#47;mark&#47;Desktop&#47;extreme_startup&#47;lib&#47;extreme_startup&#47;vi&zwnj;&#8203;ews&#47;leaderboard.haml</code> exists?"}, {"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "reply_to_user": {"reputation": 3249, "user_id": 1279355, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ac7a44c55973edf3381ce916ee8eb100?s=128&d=identicon&r=PG", "display_name": "Sir l33tname", "link": "https://stackoverflow.com/users/1279355/sir-l33tname"}, "edited": false, "score": 0, "creation_date": 1440600198, "post_id": 32228794, "comment_id": 52341869, "body": "@Sirl33tname As a matter of fact, I hadn&#39;t :$ I just <a href=\"https://github.com/rchatley/extreme_startup\" rel=\"nofollow noreferrer\">cloned the repository</a> and naively assumed that everything would work. As you may have guessed, the file isn&#39;t there. Do I need to somehow &#39;build&#39; the app in order to makes this file (and others) appear? Could the issue be connected to the warning about <code>:public</code>?"}, {"owner": {"reputation": 3249, "user_id": 1279355, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ac7a44c55973edf3381ce916ee8eb100?s=128&d=identicon&r=PG", "display_name": "Sir l33tname", "link": "https://stackoverflow.com/users/1279355/sir-l33tname"}, "edited": false, "score": 0, "creation_date": 1440601672, "post_id": 32228794, "comment_id": 52342993, "body": "I don&#39;t use git with windows but I just checked it out with git on linux and I have that file, so I guess something gone wrong in the git checkout. The warning about public folder setting, is just a warning I&#39;m not 100% sure if it could make problems, but I&#39;m really sure that it&#39;s not related with your problem."}, {"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "reply_to_user": {"reputation": 3249, "user_id": 1279355, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ac7a44c55973edf3381ce916ee8eb100?s=128&d=identicon&r=PG", "display_name": "Sir l33tname", "link": "https://stackoverflow.com/users/1279355/sir-l33tname"}, "edited": false, "score": 0, "creation_date": 1440603789, "post_id": 32228794, "comment_id": 52344517, "body": "@Sirl33tname If you look in <a href=\"https://github.com/rchatley/extreme_startup/tree/master/lib/extreme_startup\" rel=\"nofollow noreferrer\">the GitHub web view, you&#39;ll see that <code>lib&#47;extreme_startup</code> has no sub-directories</a>. The <code>leaderboard.haml</code> file exists in the repo, but <a href=\"https://github.com/rchatley/extreme_startup/tree/master/views\" rel=\"nofollow noreferrer\">in <code>&#47;views</code></a>. That file is on my hard drive as well. The error message seems to hint that the web server is looking for the view files in the wrong place, or am I misunderstanding something?"}], "answers": [{"comments": [{"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 0, "creation_date": 1440611531, "post_id": 32232488, "comment_id": 52349193, "body": "Thank you. The problem with that command is that if I issue that, I run into <a href=\"http://stackoverflow.com/q/32224128/126014\">this problem</a>. Is there a way to get past both hurdles?"}, {"owner": {"reputation": 3249, "user_id": 1279355, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ac7a44c55973edf3381ce916ee8eb100?s=128&d=identicon&r=PG", "display_name": "Sir l33tname", "link": "https://stackoverflow.com/users/1279355/sir-l33tname"}, "reply_to_user": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 0, "creation_date": 1440612483, "post_id": 32232488, "comment_id": 52349762, "body": "Can you replace your Gemfile.lock with this <a href=\"http://pastebin.com/xCBfeTkV\" rel=\"nofollow noreferrer\">pastebin.com/xCBfeTkV</a> and try again?"}, {"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 0, "creation_date": 1440615574, "post_id": 32232488, "comment_id": 52351557, "body": "Thank you for your effort. It now gets past the nokogiri step, but then it fails while installing <code>ffi</code>. It&#39;s quite a massive error message there, so I almost dare not post it. I think I&#39;ll post an issue on the repo and see if the original author&#39;d be interested in updating the code. Thank you very much for your kind efforts."}, {"owner": {"reputation": 3249, "user_id": 1279355, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ac7a44c55973edf3381ce916ee8eb100?s=128&d=identicon&r=PG", "display_name": "Sir l33tname", "link": "https://stackoverflow.com/users/1279355/sir-l33tname"}, "reply_to_user": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 0, "creation_date": 1440616241, "post_id": 32232488, "comment_id": 52351940, "body": "It&#39;s probably easier to setup a linux VM ;D"}, {"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 0, "creation_date": 1440616457, "post_id": 32232488, "comment_id": 52352095, "body": "It probably is, if one knows how to do that - which I don&#39;t :$"}, {"owner": {"reputation": 3249, "user_id": 1279355, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ac7a44c55973edf3381ce916ee8eb100?s=128&d=identicon&r=PG", "display_name": "Sir l33tname", "link": "https://stackoverflow.com/users/1279355/sir-l33tname"}, "reply_to_user": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 0, "creation_date": 1440617169, "post_id": 32232488, "comment_id": 52352496, "body": "Feel free to message me on Twitter or somewhere else infos are on my site"}, {"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 0, "creation_date": 1440617798, "post_id": 32232488, "comment_id": 52352851, "body": "Thank you, that&#39;s very kind of you, but after all, I consider Stack Overflow a better medium for technical troubleshooting than Twitter. FWIW, I&#39;ve <a href=\"https://github.com/rchatley/extreme_startup/issues/46\" rel=\"nofollow noreferrer\">created an issue in the original repo</a>."}], "tags": [], "owner": {"reputation": 3249, "user_id": 1279355, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ac7a44c55973edf3381ce916ee8eb100?s=128&d=identicon&r=PG", "display_name": "Sir l33tname", "link": "https://stackoverflow.com/users/1279355/sir-l33tname"}, "is_accepted": false, "score": 1, "last_activity_date": 1440608502, "creation_date": 1440608502, "answer_id": 32232488, "question_id": 32228794, "link": "https://stackoverflow.com/questions/32228794/error-running-extreme-startup-sinatra-web-server/32232488#32232488", "title": "Error running Extreme Startup Sinatra web server", "body": "<p>Your problem is that the application was developed a long time ago an nobody took the time to upgrade. </p>\n\n<p>For example you should run it with ruby 1.9.3 which is end of live. \nBut using a newer ruby version would probably work. (at least ruby-2.1.6 works for me)</p>\n\n<p>But what definitely not works is to run this project with sinatra v1.4.6. \nAs you can see in the source code this project was build with <a href=\"https://github.com/rchatley/extreme_startup/blob/master/Gemfile.lock#L57\" rel=\"nofollow\">v1.2.6</a>. \nProbably you have installed a newer version of sinatra for a other project.\nSo I would recommend that you install the gems in your project folder with:</p>\n\n<blockquote>\n  <p>bundle install --binstubs --path vendor</p>\n</blockquote>\n\n<p>If installed this way you can have multiple projects with the same dependency with out a problem. But now you need to prefix you commands with <strong>bundle exec</strong> for example <code>bundle exec ruby web_server.rb</code>. </p>\n\n<p>Or if you are using rvm there is this thing called <a href=\"https://rvm.io/gemsets/basics\" rel=\"nofollow\">gemsets</a> which does something similar. </p>\n"}], "owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440608502, "creation_date": 1440597622, "question_id": 32228794, "link": "https://stackoverflow.com/questions/32228794/error-running-extreme-startup-sinatra-web-server", "title": "Error running Extreme Startup Sinatra web server", "body": "<p>I'm trying to set up and run the <a href=\"https://github.com/rchatley/extreme_startup/blob/master/lib/extreme_startup/web_server.rb#L28-L30\" rel=\"nofollow\">Extreme Startup</a> coding dojo on my Windows machine.</p>\n\n<p>When I try to access the front page on <a href=\"http://localhost:3000\" rel=\"nofollow\">http://localhost:3000</a>, I get this error:</p>\n\n<pre><code>application error\nErrno::ENOENT at /\nNo such file or directory @ rb_sysopen - c:/Users/mark/Desktop/extreme_startup/lib/extreme_startup/views/leaderboard.haml\nfile: template.rb location: initialize line: 210\nBACKTRACE\n(expand)\nJUMP TO: GET POST COOKIES ENV\nc:/Users/mark/Desktop/extreme_startup/lib/extreme_startup/web_server.rb in block in &lt;class:WebServer&gt;\n    set :players,    Hash.new\n    set :players_threads, Hash.new\n    set :scoreboard, Scoreboard.new(ENV['LENIENT'])\n    set :question_factory, ENV['WARMUP'] ? WarmupQuestionFactory.new : QuestionFactory.new\n    set :game_state, GameState.new\n\n    get '/' do\n      haml :leaderboard, :locals =&gt; {\n          :leaderboard =&gt; LeaderBoard.new(scoreboard, players, game_state),\n          :players =&gt; players  }\n    end\n\n    get '/scores' do\n      LeaderBoard.new(scoreboard, players, game_state).to_json\n    end\nGET\nNo GET data.\nPOST\nNo POST data.\nCOOKIES\nNo cookie data.\nRack ENV\nVariable    Value\nGATEWAY_INTERFACE   \nCGI/1.2\nHTTP_ACCEPT \ntext/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\nHTTP_ACCEPT_ENCODING    \ngzip, deflate, sdch\nHTTP_ACCEPT_LANGUAGE    \nen-US,en;q=0.8,en-GB;q=0.6,da;q=0.4\nHTTP_CACHE_CONTROL  \nmax-age=0\nHTTP_CONNECTION \nkeep-alive\nHTTP_HOST   \nlocalhost:3000\nHTTP_UPGRADE_INSECURE_REQUESTS  \n1\nHTTP_USER_AGENT \nMozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/44.0.2403.157 Safari/537.36\nHTTP_VERSION    \nHTTP/1.1\nPATH_INFO   \n/\nQUERY_STRING    \nREMOTE_ADDR \n127.0.0.1\nREQUEST_METHOD  \nGET\nREQUEST_PATH    \n/\nREQUEST_URI \n/\nSCRIPT_NAME \nSERVER_NAME \nlocalhost\nSERVER_PORT \n3000\nSERVER_PROTOCOL \nHTTP/1.1\nSERVER_SOFTWARE \nthin 1.6.3 codename Protein Powder\nasync.callback  \n#&lt;Method: Thin::Connection#post_process&gt;\nasync.close \n#&lt;EventMachine::DefaultDeferrable:0x00000004497b28&gt;\nrack.errors \n#&lt;Object:0x000000031c5608&gt;\nrack.input  \n#&lt;StringIO:0x000000041a6860&gt;\nrack.logger \n#&lt;Rack::NullLogger:0x0000000447cd28 @app=#&lt;Rack::Protection::FrameOptions:0x0000000447ce40 @app=#&lt;Rack::Protection::HttpOrigin:0x0000000447cee0 @app=#&lt;Rack::Protection::IPSpoofing:0x0000000447cf80 @app=#&lt;Rack::Protection::JsonCsrf:0x0000000447d020 @app=#&lt;Rack::Protection::PathTraversal:0x0000000447d0c0 @app=#&lt;Rack::Protection::XSSHeader:0x0000000447d1d8 @app=#&lt;ExtremeStartup::WebServer:0x00000004497a88 @default_layout=:layout, @preferred_extension=nil, @app=nil, @template_cache=#&lt;Tilt::Cache:0x00000004497a60 @cache={}&gt;&gt;, @options={:reaction=&gt;:drop_session, :logging=&gt;true, :message=&gt;\"Forbidden\", :encryptor=&gt;Digest::SHA1, :session_key=&gt;\"rack.session\", :status=&gt;403, :allow_empty_referrer=&gt;true, :report_key=&gt;\"protection.failed\", :html_types=&gt;[\"text/html\", \"application/xhtml\"], :xss_mode=&gt;:block, :nosniff=&gt;true, :except=&gt;[:session_hijacking, :remote_token]}&gt;, @options={:reaction=&gt;:drop_session, :logging=&gt;true, :message=&gt;\"Forbidden\", :encryptor=&gt;Digest::SHA1, :session_key=&gt;\"rack.session\", :status=&gt;403, :allow_empty_referrer=&gt;true, :report_key=&gt;\"protection.failed\", :html_types=&gt;[\"text/html\", \"application/xhtml\"], :except=&gt;[:session_hijacking, :remote_token]}&gt;, @options={:reaction=&gt;:drop_session, :logging=&gt;true, :message=&gt;\"Forbidden\", :encryptor=&gt;Digest::SHA1, :session_key=&gt;\"rack.session\", :status=&gt;403, :allow_empty_referrer=&gt;true, :report_key=&gt;\"protection.failed\", :html_types=&gt;[\"text/html\", \"application/xhtml\"], :except=&gt;[:session_hijacking, :remote_token]}&gt;, @options={:reaction=&gt;:drop_session, :logging=&gt;true, :message=&gt;\"Forbidden\", :encryptor=&gt;Digest::SHA1, :session_key=&gt;\"rack.session\", :status=&gt;403, :allow_empty_referrer=&gt;true, :report_key=&gt;\"protection.failed\", :html_types=&gt;[\"text/html\", \"application/xhtml\"], :except=&gt;[:session_hijacking, :remote_token]}&gt;, @options={:reaction=&gt;:drop_session, :logging=&gt;true, :message=&gt;\"Forbidden\", :encryptor=&gt;Digest::SHA1, :session_key=&gt;\"rack.session\", :status=&gt;403, :allow_empty_referrer=&gt;true, :report_key=&gt;\"protection.failed\", :html_types=&gt;[\"text/html\", \"application/xhtml\"], :except=&gt;[:session_hijacking, :remote_token]}&gt;, @options={:reaction=&gt;:drop_session, :logging=&gt;true, :message=&gt;\"Forbidden\", :encryptor=&gt;Digest::SHA1, :session_key=&gt;\"rack.session\", :status=&gt;403, :allow_empty_referrer=&gt;true, :report_key=&gt;\"protection.failed\", :html_types=&gt;[\"text/html\", \"application/xhtml\"], :frame_options=&gt;:sameorigin, :except=&gt;[:session_hijacking, :remote_token]}&gt;&gt;\nrack.multiprocess   \nfalse\nrack.multithread    \ntrue\nrack.request.cookie_hash    \n{}\nrack.request.query_hash \n{}\nrack.request.query_string   \nrack.run_once   \nfalse\nrack.url_scheme \nhttp\nrack.version    \n[1, 0]\nsinatra.accept  \n[#&lt;Sinatra::Request::AcceptEntry:0x0000000425ace8 @entry=\"text/html\", @type=\"text/html\", @params={}, @q=1.0&gt;, #&lt;Sinatra::Request::AcceptEntry:0x0000000425ab08 @entry=\"application/xhtml+xml\", @type=\"application/xhtml+xml\", @params={}, @q=1.0&gt;, #&lt;Sinatra::Request::AcceptEntry:0x0000000425a5b8 @entry=\"image/webp\", @type=\"image/webp\", @params={}, @q=1.0&gt;, #&lt;Sinatra::Request::AcceptEntry:0x0000000425a928 @entry=\"application/xml;q=0.9\", @type=\"application/xml\", @params={}, @q=0.9&gt;, #&lt;Sinatra::Request::AcceptEntry:0x0000000425a428 @entry=\"*/*;q=0.8\", @type=\"*/*\", @params={}, @q=0.8&gt;]\nsinatra.error   \n#&lt;Errno::ENOENT: No such file or directory @ rb_sysopen - c:/Users/mark/Desktop/extreme_startup/lib/extreme_startup/views/leaderboard.haml&gt;\nsinatra.route   \nGET /\nYou're seeing this error because you have enabled the show_exceptions setting.\n</code></pre>\n\n<p>As far as I can tell, the offending line of code is on line 28, <a href=\"https://github.com/rchatley/extreme_startup/blob/master/lib/extreme_startup/web_server.rb#L28-L30\" rel=\"nofollow\">which seems to be this</a>:</p>\n\n<pre><code>haml :leaderboard, :locals =&gt; {\n    :leaderboard =&gt; LeaderBoard.new(scoreboard, players, game_state),\n    :players =&gt; players  }\n</code></pre>\n\n<p>Unfortunately, my knowledge of Ruby is almost non-existent, so nothing there looks untoward to me.</p>\n\n<p>When I start the web server, it produces this output, including a single warning, that I (so far unsuccessfully) have tried to get rid of. I don't know if it's related:</p>\n\n<pre><code>$ ruby web_server.rb\n:public is no longer used to avoid overloading Module#public, use :public_folder or :public_dir instead\n        from c:/Users/mark/Desktop/extreme_startup/lib/extreme_startup/web_server.rb:20:in `&lt;class:WebServer&gt;'\n== Sinatra (v1.4.6) has taken the stage on 3000 for development with backup from Thin\nThin web server (v1.6.3 codename Protein Powder)\nMaximum connections set to 1024\nListening on localhost:3000, CTRL+C to stop\n</code></pre>\n\n<p>When I issue the request to <a href=\"http://localhost:3000\" rel=\"nofollow\">http://localhost:3000</a> from Chrome, the console outputs this error message:</p>\n\n<pre><code>WARN: tilt autoloading 'tilt/haml' in a non thread-safe way; explicit require 'tilt/haml' suggested.\n2015-08-26 15:50:41 - Errno::ENOENT - No such file or directory @ rb_sysopen - c:/Users/mark/Desktop/extreme_startup/lib/extreme_startup/views/leaderboard.haml:\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/tilt-2.0.1/lib/tilt/template.rb:210:in `initialize'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/tilt-2.0.1/lib/tilt/template.rb:210:in `open'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/tilt-2.0.1/lib/tilt/template.rb:210:in `read_template_file'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/tilt-2.0.1/lib/tilt/template.rb:76:in `block in initialize'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/tilt-2.0.1/lib/tilt/template.rb:77:in `call'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/tilt-2.0.1/lib/tilt/template.rb:77:in `initialize'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:861:in `new'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:861:in `block in compile_template'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/tilt-2.0.1/lib/tilt.rb:88:in `fetch'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:840:in `compile_template'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:821:in `render'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:676:in `haml'\n        c:/Users/mark/Desktop/extreme_startup/lib/extreme_startup/web_server.rb:28:in `block in &lt;class:WebServer&gt;'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:1610:in `call'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:1610:in `block in compile!'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:974:in `[]'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:974:in `block (3 levels) in route!'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:993:in `route_eval'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:974:in `block (2 levels) in route!'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:1014:in `block in process_route'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:1012:in `catch'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:1012:in `process_route'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:972:in `block in route!'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:971:in `each'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:971:in `route!'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:1084:in `block in dispatch!'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:1066:in `block in invoke'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:1066:in `catch'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:1066:in `invoke'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:1081:in `dispatch!'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:906:in `block in call!'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:1066:in `block in invoke'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:1066:in `catch'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:1066:in `invoke'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:906:in `call!'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:894:in `call'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/rack-protection-1.5.3/lib/rack/protection/xss_header.rb:18:in `call'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/rack-protection-1.5.3/lib/rack/protection/path_traversal.rb:16:in `call'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/rack-protection-1.5.3/lib/rack/protection/json_csrf.rb:18:in `call'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/rack-protection-1.5.3/lib/rack/protection/base.rb:49:in `call'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/rack-protection-1.5.3/lib/rack/protection/base.rb:49:in `call'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/rack-protection-1.5.3/lib/rack/protection/frame_options.rb:31:in `call'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/rack-1.6.4/lib/rack/nulllogger.rb:9:in `call'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/rack-1.6.4/lib/rack/head.rb:13:in `call'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/show_exceptions.rb:21:in `call'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:181:in `call'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:2021:in `call'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:1486:in `block in call'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:1795:in `synchronize'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/sinatra-1.4.6/lib/sinatra/base.rb:1486:in `call'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/thin-1.6.3/lib/thin/connection.rb:86:in `block in pre_process'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/thin-1.6.3/lib/thin/connection.rb:84:in `catch'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/thin-1.6.3/lib/thin/connection.rb:84:in `pre_process'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/eventmachine-1.0.8/lib/eventmachine.rb:1062:in `call'\n        c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/eventmachine-1.0.8/lib/eventmachine.rb:1062:in `block in spawn_threadpool'\n</code></pre>\n\n<p>What's wrong, and what can I do to fix the issue?</p>\n\n<p>I know almost nothing about Ruby, so it's probably a stupid beginner's mistake.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 1, "creation_date": 1440597063, "post_id": 32228505, "comment_id": 52339492, "body": "It should be <code>includes(:schools)</code> not sure if that was just a typo.  What is in your models?"}, {"owner": {"reputation": 15341, "user_id": 2228325, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Vn6At.png?s=128&g=1", "display_name": "TonyGW", "link": "https://stackoverflow.com/users/2228325/tonygw"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1440597744, "post_id": 32228505, "comment_id": 52340001, "body": "yes, that was a typo. Thank you"}, {"owner": {"reputation": 685, "user_id": 2227594, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/228229fcadbd44ca5224e06176adc05e?s=128&d=identicon&r=PG", "display_name": "scoots", "link": "https://stackoverflow.com/users/2227594/scoots"}, "edited": false, "score": 0, "creation_date": 1440598852, "post_id": 32228505, "comment_id": 52340908, "body": "Can you describe what exactly isn&#39;t working? Is there an error, or does it just fail to eager load?"}, {"owner": {"reputation": 2755, "user_id": 1543985, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/h2xDy.jpg?s=128&g=1", "display_name": "RichardAE", "link": "https://stackoverflow.com/users/1543985/richardae"}, "edited": false, "score": 0, "creation_date": 1440600242, "post_id": 32228505, "comment_id": 52341905, "body": "Yup need more details on &#39;does not work&#39;. Do you get errors in the rails console? In the browser? Or just wrong results? What is the SQL the console is logging?"}], "answers": [{"comments": [{"owner": {"reputation": 15341, "user_id": 2228325, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Vn6At.png?s=128&g=1", "display_name": "TonyGW", "link": "https://stackoverflow.com/users/2228325/tonygw"}, "edited": false, "score": 0, "creation_date": 1440612423, "post_id": 32228780, "comment_id": 52349722, "body": "Thanks, this helped me a lot. I also found it necessary to modify the json template in the view directory. Appreciate it"}], "tags": [], "owner": {"reputation": 4022, "user_id": 1741325, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/amaxC.png?s=128&g=1", "display_name": "DaniG2k", "link": "https://stackoverflow.com/users/1741325/danig2k"}, "is_accepted": true, "score": 2, "last_activity_date": 1440597592, "creation_date": 1440597592, "answer_id": 32228780, "question_id": 32228505, "link": "https://stackoverflow.com/questions/32228505/rails-4-how-to-include-selected-association-in-searching-filtering-a-model-enti/32228780#32228780", "title": "Rails 4: how to include selected association in searching/filtering a model entity", "body": "<p>Maybe try something like:</p>\n\n<pre><code>def search\n  if params[:id].present? || params[:city].present?\n    @teachers = Teacher.includes(:schools)\n    if params[:id].present?\n      @teachers = @teachers.find params[:id]\n    elsif params[:city].present?\n      @teachers = @teachers.find_by_name params[:city]\n    end\n  else\n     @teachers = []\n  end\nend\n</code></pre>\n\n<p>I think you are using <code>include</code> instead of <code>includes</code>. See <a href=\"http://guides.rubyonrails.org/active_record_querying.html\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 15341, "user_id": 2228325, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Vn6At.png?s=128&g=1", "display_name": "TonyGW", "link": "https://stackoverflow.com/users/2228325/tonygw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 32228780, "answer_count": 1, "score": 0, "last_activity_date": 1440597592, "creation_date": 1440596910, "question_id": 32228505, "link": "https://stackoverflow.com/questions/32228505/rails-4-how-to-include-selected-association-in-searching-filtering-a-model-enti", "title": "Rails 4: how to include selected association in searching/filtering a model entity", "body": "<p>First of all, I am totally new to Rails and still on the steep learning curve. I recently took over a rails project and need to do some tweaking on the existing code.</p>\n\n<p>I need to include an association named '<code>School</code>' when searching/filtering the model named '<code>Teacher</code>'. A teacher <code>has_many</code> schools. </p>\n\n<p>In the search method of the teacher controller, I have the following:</p>\n\n<pre><code>def search\nif params[:id].present? || params[:city].present?\n  @teachers = Teacher.include(:schools).all\n  @teachers = @teachers.matches('id', params[:id]) if params[:id].present?\n  @teachers = @teachers.matches('name', params[:city]) if params[:city].present?\nelse\n   @teachers = []\nend\nend\n</code></pre>\n\n<p>However, the <code>.include(:schools)</code> does not work for me. I also tried to use <code>.eager_loading(:schools)</code>, but does not work either. </p>\n"}, {"tags": ["ruby", "json"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1440597997, "post_id": 32228126, "comment_id": 52340203, "body": "the json you supplied from the file is invalid."}, {"owner": {"reputation": 51, "user_id": 5268472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ce5f930ee040a94fd06818ddaca8d82?s=128&d=identicon&r=PG&f=1", "display_name": "ditty_one", "link": "https://stackoverflow.com/users/5268472/ditty-one"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1440598454, "post_id": 32228126, "comment_id": 52340568, "body": "It should validate now."}, {"owner": {"reputation": 6859, "user_id": 2643172, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VMWUe.jpg?s=128&g=1", "display_name": "Mauricio Moraes", "link": "https://stackoverflow.com/users/2643172/mauricio-moraes"}, "edited": false, "score": 0, "creation_date": 1440599140, "post_id": 32228126, "comment_id": 52341132, "body": "I suggest you organize your data as an OpenStruct, then convert it to json again."}, {"owner": {"reputation": 51, "user_id": 5268472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ce5f930ee040a94fd06818ddaca8d82?s=128&d=identicon&r=PG&f=1", "display_name": "ditty_one", "link": "https://stackoverflow.com/users/5268472/ditty-one"}, "edited": false, "score": 0, "creation_date": 1440599775, "post_id": 32228126, "comment_id": 52341576, "body": "Looking around as to how. Any pointers?"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5268472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ce5f930ee040a94fd06818ddaca8d82?s=128&d=identicon&r=PG&f=1", "display_name": "ditty_one", "link": "https://stackoverflow.com/users/5268472/ditty-one"}, "edited": false, "score": 0, "creation_date": 1440602083, "post_id": 32229722, "comment_id": 52343297, "body": "This is interesting as I&#39;ve never worked with Structs. How do I make it a JSON again?"}, {"owner": {"reputation": 51, "user_id": 5268472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ce5f930ee040a94fd06818ddaca8d82?s=128&d=identicon&r=PG&f=1", "display_name": "ditty_one", "link": "https://stackoverflow.com/users/5268472/ditty-one"}, "edited": false, "score": 1, "creation_date": 1440602993, "post_id": 32229722, "comment_id": 52343933, "body": "I get this when using .to_json  <code>&quot;\\&quot;#&lt;OpenStruct features=#&lt;OpenStruct additional-options=true&gt;, values=#&lt;OpenStruct lo-value=34, hi-value=554&gt;, persons=[#&lt;OpenStruct name=\\\\\\&quot;john\\\\\\&quot;, member=true, current=false, sponsor=\\\\\\&quot;pete\\\\\\&quot;, profile=\\\\\\&quot;\\\\\\&quot;, credits=[\\\\\\&quot;04\\\\\\&quot;], linked=[\\\\\\&quot;philip\\\\\\&quot;, \\\\\\&quot;guy\\\\\\&quot;], maptools=[\\\\\\&quot;crossfit\\\\\\&quot;, \\\\\\&quot;soccer\\\\\\&quot;, \\\\\\&quot;running\\\\\\&quot;]&gt;, #&lt;OpenStruct name=\\\\\\&quot;mary\\\\\\&quot;, member=true, current=false, sponsor=\\\\\\&quot;swift-water\\\\\\&quot;, profile=\\\\\\&quot;\\\\\\&quot;, credits=[\\\\\\&quot;all\\\\\\&quot;], activities=[\\\\\\&quot;cycling\\\\\\&quot;, \\\\\\&quot;running\\\\\\&quot;]&gt;], data_map=[1122, 3234]&gt;\\&quot;&quot;</code>"}, {"owner": {"reputation": 6859, "user_id": 2643172, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VMWUe.jpg?s=128&g=1", "display_name": "Mauricio Moraes", "link": "https://stackoverflow.com/users/2643172/mauricio-moraes"}, "reply_to_user": {"reputation": 51, "user_id": 5268472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ce5f930ee040a94fd06818ddaca8d82?s=128&d=identicon&r=PG&f=1", "display_name": "ditty_one", "link": "https://stackoverflow.com/users/5268472/ditty-one"}, "edited": false, "score": 0, "creation_date": 1440604851, "post_id": 32229722, "comment_id": 52345265, "body": "@ditty_one Sorry. I corrected that. You must convert to hash before converting to json again. The openstruct implements the to_h (to hash conversion)"}, {"owner": {"reputation": 51, "user_id": 5268472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ce5f930ee040a94fd06818ddaca8d82?s=128&d=identicon&r=PG&f=1", "display_name": "ditty_one", "link": "https://stackoverflow.com/users/5268472/ditty-one"}, "edited": false, "score": 0, "creation_date": 1440619335, "post_id": 32229722, "comment_id": 52353669, "body": "Thanks, I have tried converting to hash first and then to json but  the <code>#&lt;OpenStruct </code> is still there and converts the keys to symbols <code>: features</code>"}], "tags": [], "owner": {"reputation": 6859, "user_id": 2643172, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VMWUe.jpg?s=128&g=1", "display_name": "Mauricio Moraes", "link": "https://stackoverflow.com/users/2643172/mauricio-moraes"}, "is_accepted": true, "score": 5, "last_activity_date": 1450986678, "last_edit_date": 1450986678, "creation_date": 1440600177, "answer_id": 32229722, "question_id": 32228126, "link": "https://stackoverflow.com/questions/32228126/how-to-convert-json-to-a-hash-search-for-and-change-a-value/32229722#32229722", "title": "How to convert JSON to a hash, search for and change a value", "body": "<p>I understand your JSON may look like this:</p>\n\n<pre><code>\"{\\\"features\\\":{\\\"additional-options\\\":true},\\\"values\\\":{\\\"lo-value\\\":34,\\\"hi-value\\\":554},\\\"persons\\\":[{\\\"name\\\":\\\"john\\\",\\\"member\\\":true,\\\"current\\\":false,\\\"sponsor\\\":\\\"pete\\\",\\\"profile\\\":\\\"\\\",\\\"credits\\\":[\\\"04\\\"],\\\"linked\\\":[\\\"philip\\\",\\\"guy\\\"],\\\"maptools\\\":[\\\"crossfit\\\",\\\"soccer\\\",\\\"running\\\"]},{\\\"name\\\":\\\"mary\\\",\\\"member\\\":true,\\\"current\\\":false,\\\"sponsor\\\":\\\"judy\\\",\\\"profile\\\":\\\"\\\",\\\"credits\\\":[\\\"all\\\"],\\\"activities\\\":[\\\"swimming\\\",\\\"cycling\\\",\\\"running\\\"]}],\\\"data_map\\\":[1122,3234]}\"\n</code></pre>\n\n<p>I suggest using an <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/ostruct/rdoc/OpenStruct.html\" rel=\"nofollow\">OpenStruct</a> to organize your data:</p>\n\n<pre><code>your_struct_name =  JSON.parse(yourJson, object_class: OpenStruct)\n</code></pre>\n\n<p>Then you get all the things you want. For the operations you show:</p>\n\n<pre><code>#change_key(hash, \"features.additional-options\", false)\nyour_struct_name.features['additional-options'] = false \n#this one above you set in this hash-like manner because of the '-' in the middle of the key. Otherwise you could just do your_struct_name.features.additional_options = false\n\n#del_from_array(hash, \"persons.name=mary.activities\", \"cycling\")\nyour_struct_name.persons.last.activities.delete('swimming')\n\n# or selecting by name:\nyour_struct_name.persons.select {|person| person.name == 'mary' }.first.activities.delete('swimming')\n\n#add_to_array(hash, \"persons.name=mary.activities\", \"hockey\")\nyour_struct_name.persons.last.activities &lt;&lt; 'hockey'\n\n#del_key(hash, \"data_map\")\nyour_struct_name.delete_field('data_map')\n\n#del_key(hash, persons.name=john.profile)\n...\n\n#del_key(hash, persons.name=mary.credits)\n...\n</code></pre>\n\n<p>Then, after you make your changes, you can use:</p>\n\n<pre><code>your_struct_name.to_h.to_json\n</code></pre>\n\n<p>You can also use the method <code>as_json</code> to get a structure very similar to what you showed on the question:</p>\n\n<pre><code>your_struct_name.as_json\n</code></pre>\n\n<p><code>OpenStruct</code> is very nice to deal with data that has a <strong>changing structure</strong>. If you have data that can be \"modeled\", has a name you can call, has some attributes you can predict, and even methods you will use for this data, I suggest you to create a Class to describe this data, its properties and attributes (it can even inherit from OpenStruct). Then work inside this Class domain, creating a layer of abstraction. This way your code gets a lot more robust and readable. Don't forget to create automatic tests! It saves you a lot of time.</p>\n\n<p>The way you organize and abstract your data, and specially the way you name entities are things that have high impact on code quality.</p>\n\n<p>For further reading see: <a href=\"http://ruby-doc.org/core-2.2.3/Object.html\" rel=\"nofollow\">Object</a> and <a href=\"https://github.com/pyromaniac/active_data\" rel=\"nofollow\">ActiveData</a>.</p>\n"}], "owner": {"reputation": 51, "user_id": 5268472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ce5f930ee040a94fd06818ddaca8d82?s=128&d=identicon&r=PG&f=1", "display_name": "ditty_one", "link": "https://stackoverflow.com/users/5268472/ditty-one"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1163, "favorite_count": 1, "accepted_answer_id": 32229722, "answer_count": 1, "score": 2, "last_activity_date": 1450986721, "creation_date": 1440596042, "last_edit_date": 1450986721, "question_id": 32228126, "link": "https://stackoverflow.com/questions/32228126/how-to-convert-json-to-a-hash-search-for-and-change-a-value", "title": "How to convert JSON to a hash, search for and change a value", "body": "<p>I'm trying to process a JSON file:</p>\n\n<pre><code>{\n  \"features\": {\n    \"additional-options\": true\n  },\n  \"values\": {\n    \"lo-value\": 34,\n    \"hi-value\": 554\n  },\n  \"persons\": [\n    {\n      \"name\": \"john\",\n      \"member\": true,\n      \"current\": false,\n      \"sponsor\": \"pete\",\n      \"profile\": \"\",\n      \"credits\": [\"04\"],\n      \"linked\": [\"philip\",\"guy\"],\n      \"maptools\": [\"crossfit\",\"soccer\",\"running\"]\n    },\n    {\n      \"name\": \"mary\",\n      \"member\": true,\n      \"current\": false,\n      \"sponsor\": \"judy\",\n      \"profile\": \"\",\n      \"credits\": [\"all\"],\n      \"activities\": [\"swimming\",\"cycling\",\"running\"]\n    }\n  ],\n  \"data_map\": [1122,3234]\n}\n</code></pre>\n\n<p>I would like to be able to:</p>\n\n<ul>\n<li>Update a value on a key value pair</li>\n<li>Delete both the key/value </li>\n<li>Delete or insert a value that's an array</li>\n</ul>\n\n<p>I have tried so many thing to get this right.</p>\n\n<p>My simplified code idea is:</p>\n\n<pre><code>require 'json'\n\nhash = JSON.parse(File.read('test.json'))\n\n# Add key &amp; value or change existing one\ndef change_key(hash, key, value)\n    keys = key.strip(\".\")\n    hash[*keys] = value\nend\n\ndef add_to_array(hash, key, val)\n    keys = key.strip(\".\")\n    hash[*keys] = locate_arr(hash, key).insert(val)\nend\n\n# Delete a key and it's value\ndef del_key(hash, key)\n    keys = key.strip(\".\")\n    hash[*keys].delete[-1]\nend\n\ndef del_from_array(hash, key, val)\n    keys = key.strip(\".\")\n    hash[*keys] = locate_arr(hash, key).delete[-1]\nend\n\nf = File.write('test.json') ; f.puts JSON.pretty_generate(hash)\n\n\nchange_key(hash, \"features.additional-options\", false)\n\ndel_from_array(hash, \"persons.name=mary.activities\", \"cycling\")\n\nadd_to_array(hash, \"persons.name=mary.activities\", \"hockey\")\n\ndel_key(hash, \"data_map\")\n\ndel_key(hash, persons.name=john.profile)\n\ndel_key(hash, persons.name=mary.credits)\n</code></pre>\n\n<p>The resulting JSON should be:</p>\n\n<pre><code>{\n  \"features\": {\n    \"additional-options\": false\n  },\n  \"values\": {\n    \"lo-value\": 34,\n    \"hi-value\": 554\n  },\n  \"persons\": [\n    {\n      \"name\": \"john\",\n      \"member\": true,\n      \"current\": false,\n      \"sponsor\": \"pete\",\n      \"credits\": [\"04\"],\n      \"linked\": [\"philip\",\"guy\"],\n      \"maptools\": [\"crossfit\",\"soccer\",\"running\"]\n    },\n    {\n      \"name\": \"mary\",\n      \"member\": true,\n      \"current\": false,\n      \"sponsor\": \"judy\",\n      \"profile\": \"\",\n      \"activities\": [\"swimming\", \"running\",\"hockey\"]\n    }\n  ]\n}\n</code></pre>\n\n<p>I'm not sure how to work with JSON that is structured like this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 3, "creation_date": 1440596114, "post_id": 32227922, "comment_id": 52338762, "body": "Not sure if it is just a typo in your post, but you have <code>get &#39;&#47;transportation&#39;         =&gt; &#39;transportation#index&#39;</code> and should have <code>get &#39;&#47;transportations&#39;         =&gt; &#39;transportations#index&#39;</code>.  That would explain your error."}, {"owner": {"reputation": 6798, "user_id": 3282434, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd87b9229901acfa4c6f754da6bf3655?s=128&d=identicon&r=PG&f=1", "display_name": "codyc4321", "link": "https://stackoverflow.com/users/3282434/codyc4321"}, "reply_to_user": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1440596194, "post_id": 32227922, "comment_id": 52338816, "body": "yes sir, but why? why must it be transportations? In the <code>create</code> view I named it <code>@transportation = Transportation.new</code> which is singular"}, {"owner": {"reputation": 6798, "user_id": 3282434, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd87b9229901acfa4c6f754da6bf3655?s=128&d=identicon&r=PG&f=1", "display_name": "codyc4321", "link": "https://stackoverflow.com/users/3282434/codyc4321"}, "reply_to_user": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1440596259, "post_id": 32227922, "comment_id": 52338866, "body": "also a publicly facing URL of <code>transportations</code>, <code>mouses</code>, and/or <code>shrimps</code> seems ridiculous and dangerously unprofessional. How do you railsers handle this?"}, {"owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "edited": false, "score": 0, "creation_date": 1440596534, "post_id": 32227922, "comment_id": 52339073, "body": "I&#39;m not sure if you&#39;re joking or not, but rails works by conventions and logic, not magic. You sir, are expecting magic here from a piece of software."}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1440596912, "post_id": 32227922, "comment_id": 52339368, "body": "@codyc4321 look into REST"}, {"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 1, "creation_date": 1440597013, "post_id": 32227922, "comment_id": 52339447, "body": "Rails handles most irregular plurals correctly (e.g. words like mouse/mice), but if you want to override how Rails is &quot;pluralizing&quot;, you can do it in <code>&#47;config&#47;initializers&#47;inflections.rb</code>."}, {"owner": {"reputation": 6798, "user_id": 3282434, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd87b9229901acfa4c6f754da6bf3655?s=128&d=identicon&r=PG&f=1", "display_name": "codyc4321", "link": "https://stackoverflow.com/users/3282434/codyc4321"}, "edited": false, "score": 0, "creation_date": 1440608474, "post_id": 32227922, "comment_id": 52347418, "body": "I&#39;m similarly not sure if you&#39;re joking or not, but wondering how the MVC handles irregular plurals must not be expecting magic, since it handles them automatically, according to the other more polite people posting"}, {"owner": {"reputation": 6798, "user_id": 3282434, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd87b9229901acfa4c6f754da6bf3655?s=128&d=identicon&r=PG&f=1", "display_name": "codyc4321", "link": "https://stackoverflow.com/users/3282434/codyc4321"}, "edited": false, "score": 0, "creation_date": 1440608624, "post_id": 32227922, "comment_id": 52347481, "body": "I guess <code>&#47;config&#47;initializers&#47;inflections.rb</code> is more of a permanent thing, but you can still override one word for a specific table like the answer says?"}], "answers": [{"tags": [], "owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "is_accepted": false, "score": 2, "last_activity_date": 1440596957, "last_edit_date": 1440596957, "creation_date": 1440596538, "answer_id": 32228342, "question_id": 32227922, "link": "https://stackoverflow.com/questions/32227922/nomethoderror-after-replicating-rcv-pattern-in-2-other-objects/32228342#32228342", "title": "NoMethodError after replicating RCV pattern in 2 other objects", "body": "<p>You should use rails resources for routes.  If you want to limit them you can </p>\n\n<pre><code>resources :transportations, only: [:new, :create, :index]\n</code></pre>\n\n<p>When using <code>form_for(@transportation)</code> rails guesses at the correct place to route to based on the object.  So you can either use resources or set the url explicitly</p>\n\n<p><code>form_for(@transportation, url: \"/transportation\")</code></p>\n"}, {"tags": [], "owner": {"reputation": 1628, "user_id": 1788508, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9472263545564d9fc34fbf2d4c62035c?s=128&d=identicon&r=PG", "display_name": "mr. Holiday", "link": "https://stackoverflow.com/users/1788508/mr-holiday"}, "is_accepted": true, "score": 1, "last_activity_date": 1440597068, "creation_date": 1440597068, "answer_id": 32228557, "question_id": 32227922, "link": "https://stackoverflow.com/questions/32227922/nomethoderror-after-replicating-rcv-pattern-in-2-other-objects/32228557#32228557", "title": "NoMethodError after replicating RCV pattern in 2 other objects", "body": "<p>Just to add additional input on the naming conventions. This is why when you generate <code>rails generate model vacation</code> you will get in your database <code>vacations</code> table. Rails utilizes approach of Convention over configuration</p>\n\n<blockquote>\n  <p>By default, Active Record uses some naming conventions to find out how the mapping between models and database tables should be created. Rails will pluralize your class names to find the respective database table. So, for a class Book, you should have a database table called books.</p>\n</blockquote>\n\n<p>There are also ways to override this convention and in case you have a different name of the table let's say <code>my_vacantions</code> in database you can bind the model to it following way</p>\n\n<pre><code>class Vacation &lt; ActiveRecord::Base\n  self.table_name = \"my_vacations\"\nend\n</code></pre>\n\n<p>And for the final part of your question,  guess what ruby knows how to convert that type of things properly, therefore here is the answer for you :) sheep will be sheep and mouse will be mice </p>\n\n<pre><code>'sheep'.pluralize            # =&gt; \"sheep\"\n</code></pre>\n"}], "owner": {"reputation": 6798, "user_id": 3282434, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd87b9229901acfa4c6f754da6bf3655?s=128&d=identicon&r=PG&f=1", "display_name": "codyc4321", "link": "https://stackoverflow.com/users/3282434/codyc4321"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "accepted_answer_id": 32228557, "answer_count": 2, "score": 0, "last_activity_date": 1440597068, "creation_date": 1440595490, "last_edit_date": 1440596119, "question_id": 32227922, "link": "https://stackoverflow.com/questions/32227922/nomethoderror-after-replicating-rcv-pattern-in-2-other-objects", "title": "NoMethodError after replicating RCV pattern in 2 other objects", "body": "<p>I have replicated the same pattern a 3rd time in my rails app, and suddenly the page loads but the form will not submit. The issue looks like:</p>\n\n<pre><code>NoMethodError in Transportation#new\nShowing /home/cchilders/projects/rails_projects/jared_test/app/views/transportation/new.html.erb where line #12 raised:\n\nundefined method `transportations_path' for #&lt;#&lt;Class:0x007fc3e8013a20&gt;:0x007fc3ee3c0fc8&gt;\nExtracted source (around line #12):\n10\n11\n12\n13\n14\n15\n\n&lt;div&gt;\n  &lt;div&gt;\n    &lt;%= form_for(@transportation) do |f| %&gt;\n        &lt;div&gt;\n          &lt;%= f.label :name %&gt;&lt;br&gt;\n          &lt;%= f.text_area :name %&gt;\n\nRails.root: /home/cchilders/projects/rails_projects/jared_test\n</code></pre>\n\n<p>in transportation_controller we have:</p>\n\n<pre><code>class TransportationController &lt; ApplicationController\n\n    def index\n        @transportations = Transportation.all\n    end\n\n    def new\n        @transportation = Transportation.new\n    end\n\n    def create\n        @transportation = Transportation.new(transportation_params)\n        if @transportation.save\n            redirect_to '/vacations'\n        else\n            render 'new'\n        end\n    end\n\n    private \n      def transportation_params\n          params.require(:transportation).permit(:name)\n      end\n\nend\n</code></pre>\n\n<p>in routes.rb:</p>\n\n<pre><code>Rails.application.routes.draw do\n\n    get '/vacations'     =&gt; 'vacations#index'\n    get 'vacations/new'  =&gt; 'vacations#new'\n    post '/vacations'    =&gt; 'vacations#create'\n\n    get '/destinations'     =&gt; 'destinations#index'\n    get 'destinations/new'  =&gt; 'destinations#new'\n    post '/destinations'    =&gt; 'destinations#create'\n\n    get '/transportation'         =&gt; 'transportation#index'\n    get 'transportation/new'      =&gt; 'transportation#new'\n    post '/transportation'        =&gt; 'transportation#create'\n</code></pre>\n\n<p>What's so weird is I checked the pattern vs destinations and vacations, and the pattern is the same for each. The only difference I can imagine is the models, but all I'm trying to do is make an object with one field...the other 2 models are much more complicated and save correctly</p>\n\n<p>The issue is on form submission only, the page loads. The page is as follows:</p>\n\n<pre><code>&lt;%= render :template =&gt; 'base' %&gt; \n\n\n&lt;div&gt;\n  &lt;div&gt;\n    &lt;h1&gt;Add transportation&lt;/h1&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div&gt;\n  &lt;div&gt;\n    &lt;%= form_for(@transportation) do |f| %&gt;\n        &lt;div&gt;\n          &lt;%= f.label :name %&gt;&lt;br&gt;\n          &lt;%= f.text_area :name %&gt;\n        &lt;/div&gt;\n\n        &lt;div&gt;\n          &lt;%= f.submit \"Create\" %&gt;\n        &lt;/div&gt;\n    &lt;% end %&gt;\n\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>My transportation schema is so simple:</p>\n\n<pre><code> create_table \"transportations\", force: :cascade do |t|\n    t.string   \"name\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n</code></pre>\n\n<p>This form was demanding a URL of '/transportations', not transportation. Can someone explain in detail how the naming works in Rails? I am getting puzzle by naming the model Vacation, the SQL comes up as <code>create table vacations</code>, making a single object should be named singularly, but the URL expects plural. What is the proper pattern to craft a basic rails app with CRUDing a single model?</p>\n\n<p>Also, what do you do about mouse vs mice or sheep vs sheep? Use <code>sheeps</code>? Thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 863, "user_id": 4104996, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/CTLx5.jpg?s=128&g=1", "display_name": "Muhammad Ateeq Azam", "link": "https://stackoverflow.com/users/4104996/muhammad-ateeq-azam"}, "edited": false, "score": 0, "creation_date": 1440596131, "post_id": 32227614, "comment_id": 52338778, "body": "Actually I am following &quot;Learn Web Development with Rails&quot; by Michael Hartl. And it did the same thing. I don&#39;t know where I am doing wrong.   Reference link: <a href=\"https://www.railstutorial.org/book/log_in_log_out\" rel=\"nofollow noreferrer\">railstutorial.org/book/log_in_log_out</a>"}, {"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "reply_to_user": {"reputation": 863, "user_id": 4104996, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/CTLx5.jpg?s=128&g=1", "display_name": "Muhammad Ateeq Azam", "link": "https://stackoverflow.com/users/4104996/muhammad-ateeq-azam"}, "edited": false, "score": 0, "creation_date": 1440597902, "post_id": 32227614, "comment_id": 52340122, "body": "It looks you are not reading the book carefully. <a href=\"https://www.railstutorial.org/book/log_in_log_out#sec-forgetting_users\" rel=\"nofollow noreferrer\">railstutorial.org/book/log_in_log_out#sec-forgetting_users</a> The forget method is implemented in the model, whereas you are adding it to a controller. There may be other errors in your code."}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 0, "last_activity_date": 1440594697, "creation_date": 1440594697, "answer_id": 32227614, "question_id": 32227460, "link": "https://stackoverflow.com/questions/32227460/helper-funcation-call-error-ruby-on-rails/32227614#32227614", "title": "Helper Funcation Call Error - Ruby on Rails", "body": "<p>That's correct. Helpers got mixed into the view context, not the controller context, therefore the <code>forget</code> helper is not available in the controller. And even if it would, any method directly defined in the controller class will replace methods provided by included mixins.</p>\n\n<p>Why don't you simply define the forget method in the controller itself? Do you need to use it elsewhere?</p>\n\n<p>As a side note, the <code>forget</code> method you created in the controller will never work because you are calling <code>update_attribute</code> with no receiver hence the receiver will be the controller itself, whereas it should be the current user instance.</p>\n\n<p>Your code is quite confusing. You may also want to read some Ruby/Rails book/course before trying to jump into building an application.</p>\n"}], "owner": {"reputation": 863, "user_id": 4104996, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/CTLx5.jpg?s=128&g=1", "display_name": "Muhammad Ateeq Azam", "link": "https://stackoverflow.com/users/4104996/muhammad-ateeq-azam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 32227614, "answer_count": 1, "score": 0, "last_activity_date": 1440594697, "creation_date": 1440594281, "last_edit_date": 1440594681, "question_id": 32227460, "link": "https://stackoverflow.com/questions/32227460/helper-funcation-call-error-ruby-on-rails", "title": "Helper Funcation Call Error - Ruby on Rails", "body": "<p>I am trying to develop a simple login/logout web application in Rails4. I have following code for session helper</p>\n\n<pre><code>module SessionsHelper\n\n  # Logs in the given user.\n  def log_in(user)\n    session[:user_id] = user.id\n  end\n\n  # Returns the current logged-in user (if any).\n  def current_user\n    if (user_id = session[:user_id])\n      @current_user ||= User.find_by(id: user_id)\n    elsif (user_id = cookies.signed[:user_id])\n      user = User.find_by(id: user_id)\n      if user &amp;&amp; user.authenticated?(cookies[:remember_token])\n        log_in user\n        @current_user = user\n      end\n    end\n  end\n\n  # Forgets a persistent session.\n  def forget(user)\n    user.forget\n    cookies.delete(:user_id)\n    cookies.delete(:remember_token)\n  end\n\n   # Returns true if the user is logged in, false otherwise.\n  def logged_in?\n    !current_user.nil?\n  end\n\n  # Logs out the current user.\n  def log_out\n    forget(current_user)\n    session.delete(:user_id)\n    @current_user = nil\n  end\n\n  # Remembers a user in a persistent session.\n  def remember(user)\n    user.remember\n    cookies.permanent.signed[:user_id] = user.id\n    cookies.permanent[:remember_token] = user.remember_token\n  end\nend\n</code></pre>\n\n<p>When I try to logout, it calls the controller function \"forget\" instead of helper function. Here is logout code for session controller class. </p>\n\n<pre><code>  def destroy\n    log_out if logged_in?\n      redirect_to root_url\n  end\n\n  # Forgets a user.\n  def forget\n    update_attribute(:remember_digest, nil)\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1440593182, "post_id": 32226978, "comment_id": 52336476, "body": "Rails built on top of famous ruby metaprogramming features. It \u201cdefines\u201d tons of methods like <code>article.author</code> on <code>Article</code> class in runtime by looking up the relations between tables. All that stuff is handled with single <a href=\"http://ruby-doc.org/core-2.2.3/BasicObject.html#method-i-method_missing\" rel=\"nofollow noreferrer\"><code>method_missing</code></a> handler, that checks if it can resolve the method, basing on it\u2019s name and passes control flow to the main handler if not. Main handler is unsurprisingly throwing this error."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1440594327, "post_id": 32226978, "comment_id": 52337425, "body": "There is no real attributes in ruby. All you see that seems to be an attribute is actually a pair of methods. So getting or setting a missing attribute&#39;s value may raise <code>NoMethodError</code>, just like calling a method that doesn&#39;t exist."}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1440593286, "post_id": 32227070, "comment_id": 52336570, "body": "Are you kidding? This is by no means an answer to why <b>rails</b> throws dozillions of <code>NoMethodError</code>. The correct answer is \u201cbecause the whole rails is one huge <code>method_missing</code> handler.\u201d"}, {"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1440593507, "post_id": 32227070, "comment_id": 52336770, "body": "@mudasobwa If you are so confident that yours is the correct answer, then create your own answer."}, {"owner": {"reputation": 6798, "user_id": 3282434, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd87b9229901acfa4c6f754da6bf3655?s=128&d=identicon&r=PG&f=1", "display_name": "codyc4321", "link": "https://stackoverflow.com/users/3282434/codyc4321"}, "edited": false, "score": 0, "creation_date": 1440593622, "post_id": 32227070, "comment_id": 52336872, "body": "I see a lot of value there, learning rails again for the last 2 days my app is surely poorly designed in the rails way, until I get it all down. It isn&#39;t fair I always ask 3-4 part questions either :)"}, {"owner": {"reputation": 6798, "user_id": 3282434, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd87b9229901acfa4c6f754da6bf3655?s=128&d=identicon&r=PG&f=1", "display_name": "codyc4321", "link": "https://stackoverflow.com/users/3282434/codyc4321"}, "edited": false, "score": 0, "creation_date": 1440593684, "post_id": 32227070, "comment_id": 52336932, "body": "How did you learn rails Simone, are they any helpers and tools on the command line you love, I seem to get nondescript message when it breaks"}, {"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "edited": false, "score": 1, "creation_date": 1440593797, "post_id": 32227070, "comment_id": 52337016, "body": "It depends &quot;where&quot; it breaks. Generally the log is a good starting point. On production you can use tools such as Bugsnag to track exceptions. On dev you can use gems such as <code>better_errors</code> to expose and debug the stack trace."}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": 1, "last_activity_date": 1440593195, "creation_date": 1440593195, "answer_id": 32227070, "question_id": 32226978, "link": "https://stackoverflow.com/questions/32226978/how-to-solve-nomethoderror-efficiently-rails/32227070#32227070", "title": "how to solve NoMethodError efficiently (rails)?", "body": "<p><code>NoMethodError</code> means you are calling a method on an object, but that object doesn't provide such method.</p>\n\n<p>This is a quite bad error in the sense that is reveals a poorly designed and tested application. It generally means your code is not behaving as you are expected.</p>\n\n<p>The way to reduce such errors is:</p>\n\n<ul>\n<li>Make sure that when you are writing the code you are taking care of the various edge cases that may happen, not just the correct path. In other words, you need to take care of validating what's going on and making sure that if something is not successful (e.g. the user is not supplying all the input requested) your application will handle the case gracefully.</li>\n<li>Make sure you write automatic test cases that covers the behavior of each method in your codebase</li>\n<li>Keep track of the errors. When an error occurs, write a test to reproduce the behavior, fix the code and check the test passes. That will reduce the risk of regression.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 3832, "user_id": 136508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391f9b787cdc12aa2c179713f5103e3a?s=128&d=identicon&r=PG", "display_name": "ilan berci", "link": "https://stackoverflow.com/users/136508/ilan-berci"}, "is_accepted": false, "score": 0, "last_activity_date": 1440595398, "creation_date": 1440595398, "answer_id": 32227894, "question_id": 32226978, "link": "https://stackoverflow.com/questions/32226978/how-to-solve-nomethoderror-efficiently-rails/32227894#32227894", "title": "how to solve NoMethodError efficiently (rails)?", "body": "<blockquote>\n  <p>How do rails people tell the difference between all these errors with\n  the same name?</p>\n</blockquote>\n\n<p>We usually look at the stack trace that comes back with the response (in development mode) as well as looking in the logs. In a dev environment, I am running my server in a console where I can scroll through the request.</p>\n\n<blockquote>\n  <p>What does NoMethodError mean at it's core? It seems like what you're\n  calling in the template is misspelled, or you're accessing attributes\n  that don't exist?</p>\n</blockquote>\n\n<p>Due to dynamic coupling nature of Ruby.  When Ruby determines that an object doesn't have a method by the name of the one that was called.  It looks for a method by the name of \"method_missing\" within that object.  If it's not defined then the super one is called which has the default behaviour of raising an exception.  Rails leverages this mechanism heavily in it's internal dispatching</p>\n\n<blockquote>\n  <p>Where can this error happen? Is the only possible cause in the\n  template/view (the html.erb file)? Or can a bad call in the controller\n  and whatnot cause same error?</p>\n</blockquote>\n\n<p>This error can happen wherever you have Ruby code, It has nothing to do with rails</p>\n\n<blockquote>\n  <p>Also, what is the best debugger gem to alleviate these issues? Reading\n  the full trace isn't too helpful for beginners at least for a while,\n  I;d like a first hand account of what debugger someone uses instead of\n  reading hype</p>\n</blockquote>\n\n<p>An Invaluable tool for debugging is the gem 'pry'.  It has many useful plug-able tools that greatly simplify debugging</p>\n"}, {"tags": [], "owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "is_accepted": true, "score": 0, "last_activity_date": 1440596784, "creation_date": 1440596784, "answer_id": 32228446, "question_id": 32226978, "link": "https://stackoverflow.com/questions/32226978/how-to-solve-nomethoderror-efficiently-rails/32228446#32228446", "title": "how to solve NoMethodError efficiently (rails)?", "body": "<p>This is not a Rails specific error actually. I'll try to explain what's happening at its core. </p>\n\n<p>Ruby is a language that functions through message passing. Objects communicate by sending messages to each other. </p>\n\n<p>The message needs to be defined as a method on the object to respond to it. This can be directly defined on the object itself, the object's class, the object's class's parents/ancestors or through included modules.</p>\n\n<pre><code>class MyObject\n  def some_method\n    puts \"Yay!\"\n  end\nend\n\n&gt; MyObject.new.some_method\nYay!\n</code></pre>\n\n<p>Objects can define <code>method_missing</code> to handle unexpected messages. </p>\n\n<pre><code>class MyObject\n  def method_missing(name, *args, &amp;block)\n    puts name\n  end\nend\n\n&gt; MyObject.new.some_undefined_method\nsome_undefined_method\n</code></pre>\n\n<p>Without the <code>method_missing</code> handler, the object will raise a <code>NoMethodError</code></p>\n\n<pre><code>class MyObject\nend\n\n&gt; MyObject.new.some_undefined_method\nNoMethodError: undefined method 'some_undefined_method' for #&lt;MyObject...&gt;\n</code></pre>\n\n<hr>\n\n<p>So what does this look like in Rails?  </p>\n\n<pre><code>$ rails generate model User name:string\n</code></pre>\n\n<p>Produces this</p>\n\n<pre><code># models/user.rb\nclass User &lt; ActiveRecord::Base\nend\n</code></pre>\n\n<p>Which has the following methods implemented among others (by ActiveRecord)</p>\n\n<pre><code>  def name\n  end\n\n  def name=(value)\n  end\n</code></pre>\n\n<p>When you do the following:</p>\n\n<pre><code># create a new User object\n&gt; user = User.new \n#&lt;User ... &gt;\n\n# call the 'name=' method on the User object\n&gt; user.name = \"name\" \n\"name\"\n\n# call the 'name' method on the User object. Note that these are 2 different methods\n&gt; user.name\n\"name\" \n\n&gt; user.some_undefined_method\nNoMethodError: undefined method 'some_undefined_method' for #&lt;User...&gt;\n</code></pre>\n\n<p>You'll see the same results whether you're calling it in your console, your model, your controller or in the view as they're all running the same Ruby code. </p>\n\n<p>ERB view templates are slightly different in that what you enter is only evaluated as Ruby code when it's between <code>&lt;% %&gt;</code> or <code>&lt;%= %&gt;</code>. Otherwise, it gets written out to the page as text.</p>\n"}], "owner": {"reputation": 6798, "user_id": 3282434, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd87b9229901acfa4c6f754da6bf3655?s=128&d=identicon&r=PG&f=1", "display_name": "codyc4321", "link": "https://stackoverflow.com/users/3282434/codyc4321"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 32228446, "answer_count": 3, "score": 0, "last_activity_date": 1440596784, "creation_date": 1440592921, "question_id": 32226978, "link": "https://stackoverflow.com/questions/32226978/how-to-solve-nomethoderror-efficiently-rails", "title": "how to solve NoMethodError efficiently (rails)?", "body": "<p>I am new to rails and notice a very odd pattern. I thought some error messages in Django were obscenely cryptic, but building my second app in rails I notice my errors come up NoMethodError more than 90% of the time. </p>\n\n<p>How do rails people tell the difference between all these errors with the same name?</p>\n\n<p>What does NoMethodError mean at it's core? It seems like what you're calling in the template is misspelled, or you're accessing attributes that don't exist?</p>\n\n<p>Where can this error happen? Is the only possible cause in the template/view (the html.erb file)? Or can a bad call in the controller and whatnot cause same error?</p>\n\n<p>Also, what is the best debugger gem to alleviate these issues? Reading the full trace isn't too helpful for beginners at least for a while, I;d like a first hand account of what debugger someone uses instead of reading hype</p>\n\n<p>Thank you kindly</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-recipe"], "comments": [{"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 3, "creation_date": 1440627379, "post_id": 32226877, "comment_id": 52357458, "body": "This is not the right place to ask &quot;why?&quot; questions like this. You are welcome to jump on IRC and ask there though."}, {"owner": {"reputation": 2496, "user_id": 1132628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d9a2ea1d861e04547c439049662eb59?s=128&d=identicon&r=PG", "display_name": "cassianoleal", "link": "https://stackoverflow.com/users/1132628/cassianoleal"}, "edited": false, "score": 0, "creation_date": 1440668497, "post_id": 32226877, "comment_id": 52372337, "body": "It&#39;s the other way around. The <code>default</code> attributes set on a role take higher precedence over the ones set on the environment -- i.e. if you set the same default on both the role and the environment, the one on the role wins.  The opposite is true for <code>override</code> attributes. If you override an attribute on the environment, it will win over the overrides set elsewhere, including on roles."}], "answers": [{"tags": [], "owner": {"reputation": 1065, "user_id": 5504, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ENIXZ.jpg?s=128&g=1", "display_name": "nedruod", "link": "https://stackoverflow.com/users/5504/nedruod"}, "is_accepted": false, "score": 0, "last_activity_date": 1440861965, "creation_date": 1440861965, "answer_id": 32287648, "question_id": 32226877, "link": "https://stackoverflow.com/questions/32226877/attributes-precedent-in-chef/32287648#32287648", "title": "Attributes precedent in chef", "body": "<p>The explanation for the override order is on the site you link to.  Just be clear though, because it's a common confusion, precedence in that documentation is referring to the order in which values are fed to the evaluation sequence.  Because the evaluation is in a overwrite form, the lowest precedence values are the ones that you get after evaluation is complete.  Thus there is no way to override Ohai supplied values.</p>\n\n<blockquote>\n  <p>The attribute precedence order for roles and environments is reversed\n  for default and override attributes. The precedence order for default\n  attributes is environment, then role. The precedence order for\n  override attributes is role, then environment. Applying environment\n  override attributes after role override attributes allows the same\n  role to be used across multiple environments, yet ensuring that values\n  can be set that are specific to each environment (when required). For\n  example, the role for an application server may exist in all\n  environments, yet one environment may use a database server that is\n  different from other environments.</p>\n</blockquote>\n\n<p>As to the why of the default doesn't use the same logic as override, I don't know.</p>\n"}], "owner": {"reputation": 1790, "user_id": 1198993, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f72dec256589fbedb5b8ec039ab23018?s=128&d=identicon&r=PG", "display_name": "anonymous", "link": "https://stackoverflow.com/users/1198993/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440861965, "creation_date": 1440592561, "last_edit_date": 1440600251, "question_id": 32226877, "link": "https://stackoverflow.com/questions/32226877/attributes-precedent-in-chef", "title": "Attributes precedent in chef", "body": "<p>I read in <a href=\"https://docs.chef.io/attributes.html\" rel=\"nofollow\">Chef site</a> that for default attributes specified in environment takes higher precedence than default attributes specified in roles. This makes sense as we may have different web-server for development, testing and production. </p>\n\n<p>But in case of override attribute this is reverse i.e override attributes of roles takes precedence over override attribute of roles. I am not able to guess reason behind this ? Can anyone please explain me why chef chose such precedence ordering.</p>\n\n<p>I am also adding complete list of  attribute precedence as given in chef site</p>\n\n<ul>\n<li>The <code>default</code> attribute specified in a <strong>cookbook attribute file</strong>.</li>\n<li>The <code>default</code> attribute specified in a <strong>recipe</strong>.</li>\n<li>The <code>default</code> attribute specified in an <strong>environment</strong>.</li>\n<li>The <code>default</code> attribute specified in a <strong>role</strong>.</li>\n<li>The <code>force_default</code> attribute specified in a<strong>a cookbook attribute file</strong>.</li>\n<li>The <code>force_default</code> attribute specified in a <strong>recipe</strong>.</li>\n<li>The <code>normal</code> attribute specified in a <strong>cookbook attribute file</strong>.</li>\n<li>The <code>normal</code> attribute specified in a <strong>recipe</strong>.</li>\n<li>The <code>override attribute</code> specified in a <strong>cookbook attribute file</strong>.</li>\n<li>The <code>override attribute</code> specified in a <strong>recipe</strong>.</li>\n<li>The <code>override attribute</code> specified in a <strong>role</strong>.</li>\n<li>The <code>override attribute</code> specified in an <strong>environment</strong>.</li>\n<li>The <code>force_override</code> attribute specified in a <strong>cookbook attribute file</strong>.</li>\n<li>The <code>force_override</code> attribute specified in a <strong>recipe</strong>.</li>\n<li>The <code>automatic</code> attribute collected during the <strong>Ohai run</strong>.</li>\n</ul>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 564, "user_id": 982061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b89fb766826d61f613177047c98a3c?s=128&d=identicon&r=PG", "display_name": "robomc", "link": "https://stackoverflow.com/users/982061/robomc"}, "edited": false, "score": 0, "creation_date": 1440632903, "post_id": 32226530, "comment_id": 52359128, "body": "It&#39;s not clear from your question what is going wrong - all you do in your model is create a nokogiri doc, and the there&#39;s a comment. What do you expect to happen?"}, {"owner": {"reputation": 953, "user_id": 4874399, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/FcT2W.jpg?s=128&g=1", "display_name": "Morphasis", "link": "https://stackoverflow.com/users/4874399/morphasis"}, "reply_to_user": {"reputation": 564, "user_id": 982061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b89fb766826d61f613177047c98a3c?s=128&d=identicon&r=PG", "display_name": "robomc", "link": "https://stackoverflow.com/users/982061/robomc"}, "edited": false, "score": 0, "creation_date": 1440722314, "post_id": 32226530, "comment_id": 52402802, "body": "Im trying to import and phrase a XML document. Idealy i would like a way of saving the fields in my msql"}, {"owner": {"reputation": 564, "user_id": 982061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b89fb766826d61f613177047c98a3c?s=128&d=identicon&r=PG", "display_name": "robomc", "link": "https://stackoverflow.com/users/982061/robomc"}, "edited": false, "score": 0, "creation_date": 1440724704, "post_id": 32226530, "comment_id": 52403406, "body": "It&#39;s not clear from your question if you&#39;re failing to open the file, or failing to parse the XML."}, {"owner": {"reputation": 953, "user_id": 4874399, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/FcT2W.jpg?s=128&g=1", "display_name": "Morphasis", "link": "https://stackoverflow.com/users/4874399/morphasis"}, "reply_to_user": {"reputation": 564, "user_id": 982061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b89fb766826d61f613177047c98a3c?s=128&d=identicon&r=PG", "display_name": "robomc", "link": "https://stackoverflow.com/users/982061/robomc"}, "edited": false, "score": 0, "creation_date": 1440760680, "post_id": 32226530, "comment_id": 52418089, "body": "Im failing to phrase the file. However as i said. It doesn&#39;t throw a console error so its hard to answer your question. Because it says file imported and i get the nokogiri authentication hey and file translation."}], "owner": {"reputation": 953, "user_id": 4874399, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/FcT2W.jpg?s=128&g=1", "display_name": "Morphasis", "link": "https://stackoverflow.com/users/4874399/morphasis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1440597368, "creation_date": 1440591652, "last_edit_date": 1440597310, "question_id": 32226530, "link": "https://stackoverflow.com/questions/32226530/ruby-on-rails-nokogiri-gem-importing-orders-from-xml-working-not-fully-possibly", "title": "Ruby On Rails Nokogiri gem importing orders from xml working not fully. Possibly permitted perimeters", "body": "<p>I'm having some trouble with Nokogiri.</p>\n\n<p>I'm new to this xml parsing and I seem to get no errors. I get the order imported alert.</p>\n\n<p>Which means it may be permitted perimeters. If I'm right then, Could I create a model that allows all permitted perimeters. So please take a look, thank you for your time, here is my code:</p>\n\n<p>Routes.rb</p>\n\n<pre><code>resources :orders do\n  collection { post :import }\n  get \"/confirm\" =&gt; \"confirmations#show\"\n  get 'dconfirmation' =&gt; 'orders#confirmation'\nend\n</code></pre>\n\n<p>Model</p>\n\n<pre><code>class Order &lt; ActiveRecord::Base\n  belongs_to :user\n  scope :not_completed_orders, -&gt; {\n    where(:complete =&gt; false)\n  }\n  require 'nokogiri'\n\n def self.import(file)\n    doc = Nokogiri::XML.parse(file)\n    #your processing code goes here\n end\nend\n</code></pre>\n\n<p>Controller Order</p>\n\n<pre><code>class OrdersController &lt; ApplicationController\n  before_filter :authenticate_user!\n\n  def new\n    @order = Order.new\n  end\n\n  def create\n    @order = current_user.orders.new(order_params)\n    @order.email = current_user.email\n    @order.name = current_user.name\n    @order.address_line_1 = current_user.address_line_1\n    @order.address_line_2 = current_user.address_line_2\n    @order.postcode = current_user.postcode\n    @order.city = current_user.city\n    @order.country = current_user.country\n    if @order.save\n      redirect_to dconfirmation_path\n    end\n  end\n\n  def order_params\n    params.require(:order).\n      permit(\n        :email,\n        :delivery_name,\n        :company_name,\n        :delivery_address1,\n        :delivery_address2,\n        :delivery_address3,\n        :delivery_city,\n        :delivery_postcode,\n        :delivery_country,\n        :phone,\n        :package_contents,\n        :description_content,\n        :restricted_items,\n        :terms_conditions,\n        :insurance,\n        :contents_value,\n        :cf_reference,\n        :reference_number,\n        :service\n        )\n  end\n  def show\n    @user = User.find(params[:id])\n  end\n\n  def confirmation\n  end\n\n  def import\n    Order.import(params[:file])\n    redirect_to root_url, notice: \"Order imported.\"\n  end\n\n\nend\n</code></pre>\n\n<p>View</p>\n\n<pre><code>  = form_tag import_orders_path, multipart: true do\n    = file_field_tag :file\n    = submit_tag \"Import\"\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 0, "last_activity_date": 1440592915, "creation_date": 1440592915, "answer_id": 32226975, "question_id": 32226507, "link": "https://stackoverflow.com/questions/32226507/sinatra-and-slim-with-sidekiq/32226975#32226975", "title": "Sinatra and Slim with Sidekiq", "body": "<p>Sidekiq uses slim and sinatra for its admin web page (where you can monitor your queue size, various counters, stuff like this)</p>\n"}, {"tags": [], "owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "is_accepted": false, "score": 1, "last_activity_date": 1440605714, "creation_date": 1440605714, "answer_id": 32231693, "question_id": 32226507, "link": "https://stackoverflow.com/questions/32226507/sinatra-and-slim-with-sidekiq/32231693#32231693", "title": "Sinatra and Slim with Sidekiq", "body": "<p>Sidekiq hasn't used slim for two years now.  You don't need it.</p>\n\n<p>Sinatra is used to provide the Web UI.  <code>require: false</code> ensures it is not loaded where it is not needed.</p>\n"}], "owner": {"reputation": 181, "user_id": 2879272, "user_type": "registered", "accept_rate": 31, "profile_image": "https://graph.facebook.com/808630981/picture?type=large", "display_name": "Mohamed Ahmed Taher Mohamed", "link": "https://stackoverflow.com/users/2879272/mohamed-ahmed-taher-mohamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1440605714, "creation_date": 1440591601, "last_edit_date": 1440593010, "question_id": 32226507, "link": "https://stackoverflow.com/questions/32226507/sinatra-and-slim-with-sidekiq", "title": "Sinatra and Slim with Sidekiq", "body": "<p>What do sidekiq do with slim and sinatra gems for monitoring, what does sinatra do and what does slim do?\nAnd why do we set <code>require: false</code> with sinatra gem.</p>\n"}, {"tags": ["android", "ruby", "build", "rake"], "owner": {"reputation": 11, "user_id": 5268208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H2lSC.png?s=128&g=1", "display_name": "user1234567", "link": "https://stackoverflow.com/users/5268208/user1234567"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1440590845, "creation_date": 1440590845, "question_id": 32226202, "link": "https://stackoverflow.com/questions/32226202/rhomobile-upgrade-to-5-1-app-build-failure", "title": "Rhomobile upgrade to 5.1 app build failure", "body": "<p>I wonder if anyone can give me a clue where to look on this one.</p>\n\n<p>I am trying to upgrade a RhoMobile application from 2.2 to 5.1.</p>\n\n<p>The driver being the loss of file write permissions in KitKat as part of a camera-callback. I'm looking to move the captured image away from the (volatile) blob storage. Code works okay but not on KitKat.</p>\n\n<p>So I have prepared a new machine with RMS5/Android/Java and then I did an update via search+replace of 'File.' with 'RhoFile.'.</p>\n\n<p>Having repaired the ruby file to use my D: drive installation I'm now getting much further into the build but it's aborting with:</p>\n\n<pre><code>.....&lt;br/&gt;\ncd d:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rhodes-5.1.1\nrake aborted!\nNameError: uninitialized constant Rho::AppManifest::RhoFile\n\nTasks: TOP =&gt; build:android:extensions =&gt; config:android:extensions =&gt; build:bun\ndle:noxruby\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>So I have run with --trace and the end of that is:</p>\n\n<pre><code>.....\n\nrm refresh_btn.wp8.png\nrm sip_btn.wp8.png\n-$TIME$- message [ common_bundle_start() FINISH ] time is { 2015-08-25T14:03:36Z\n } milliseconds from start (372125)\ncd Z:/IHS/Projects/RSWorkspace/ECMK_MobileApp/bin/tmp/assets\ncd Z:/IHS/Projects/RSWorkspace/ECMK_MobileApp/bin/tmp/assets/apps\ncd d:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rhodes-5.1.1\nrake aborted!\nNameError: uninitialized constant Rho::AppManifest::RhoFile\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rhodes-5.1.1/lib/framework/\nrhoappmanifest.rb:39:in `block in enumerate_models'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/1.9.1/find.rb:41:in `block in find'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/1.9.1/find.rb:40:in `catch'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/1.9.1/find.rb:40:in `find'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rhodes-5.1.1/lib/framework/\nrhoappmanifest.rb:37:in `enumerate_models'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rhodes-5.1.1/Rakefile:3784:\nin `create_manifest'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rhodes-5.1.1/Rakefile:4023:\nin `block (3 levels) in &lt;top (required)&gt;'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:240:in `call'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:240:in `block in execute'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:235:in `each'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:235:in `execute'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:179:in `block in invoke_with_call_chain'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:172:in `invoke_with_call_chain'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:201:in `block in invoke_prerequisites'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:199:in `each'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:199:in `invoke_prerequisites'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:178:in `block in invoke_with_call_chain'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:172:in `invoke_with_call_chain'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:201:in `block in invoke_prerequisites'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:199:in `each'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:199:in `invoke_prerequisites'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:178:in `block in invoke_with_call_chain'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:172:in `invoke_with_call_chain'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:165:in `invoke'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rhodes-5.1.1/Rakefile:4999:\nin `invoke'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rhodes-5.1.1/platform/andro\nid/build/android.rake:866:in `block (3 levels) in &lt;top (required)&gt;'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:240:in `call'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:240:in `block in execute'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:235:in `each'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:235:in `execute'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:179:in `block in invoke_with_call_chain'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:172:in `invoke_with_call_chain'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:201:in `block in invoke_prerequisites'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:199:in `each'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:199:in `invoke_prerequisites'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:178:in `block in invoke_with_call_chain'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:172:in `invoke_with_call_chain'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:201:in `block in invoke_prerequisites'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:199:in `each'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:199:in `invoke_prerequisites'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:178:in `block in invoke_with_call_chain'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:172:in `invoke_with_call_chain'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:201:in `block in invoke_prerequisites'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:199:in `each'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:199:in `invoke_prerequisites'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:178:in `block in invoke_with_call_chain'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:172:in `invoke_with_call_chain'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/task.r\nb:165:in `invoke'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rhodes-5.1.1/Rakefile:4999:\nin `invoke'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/applic\nation.rb:150:in `invoke_task'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/applic\nation.rb:106:in `block (2 levels) in top_level'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/applic\nation.rb:106:in `each'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/applic\nation.rb:106:in `block in top_level'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/applic\nation.rb:115:in `run_with_threads'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/applic\nation.rb:100:in `top_level'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/applic\nation.rb:78:in `block in run'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/applic\nation.rb:176:in `standard_exception_handling'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/lib/rake/applic\nation.rb:75:in `run'\nd:/RhoMobileSuite5.1.1/ruby/lib/ruby/gems/1.9.1/gems/rake-10.4.2/bin/rake:33:in\n`&lt;top (required)&gt;'\nd:/RhoMobileSuite5.1.1/ruby/bin/rake:23:in `load'\nd:/RhoMobileSuite5.1.1/ruby/bin/rake:23:in `&lt;main&gt;'\nTasks: TOP =&gt; build:android:extensions =&gt; config:android:extensions =&gt; build:bun\ndle:noxruby\n</code></pre>\n\n<p>But despite numerous searches I cannot find 'Rho::AppManifest::RhoFile' anywhere within the app/workspace.</p>\n\n<p>Using $ rake device:android:debug.</p>\n\n<p>This is not a corner of my chosing and right now I'm out of ideas.\nThanks in advance to anyone who can help.</p>\n"}, {"tags": ["ruby", "activerecord", "heroku"], "comments": [{"owner": {"reputation": 4349, "user_id": 648392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2bd8a8c583866711c234a612f6b157?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/648392/jesper"}, "edited": false, "score": 0, "creation_date": 1440591332, "post_id": 32225537, "comment_id": 52335100, "body": "Do you have a really good reason for going against ActiveRecord naming conventions?"}, {"owner": {"reputation": 1331, "user_id": 706833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7da2b02238a72bca9a3a0c064ac78d96?s=128&d=identicon&r=PG", "display_name": "iGoDa", "link": "https://stackoverflow.com/users/706833/igoda"}, "reply_to_user": {"reputation": 4349, "user_id": 648392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2bd8a8c583866711c234a612f6b157?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/648392/jesper"}, "edited": false, "score": 0, "creation_date": 1440593586, "post_id": 32225537, "comment_id": 52336836, "body": "No, I&#39;m just exploring all the options, but thanks I will take a look on the naming conventions, maybe that&#39;s a reason for these kind of problems."}], "answers": [{"comments": [{"owner": {"reputation": 1331, "user_id": 706833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7da2b02238a72bca9a3a0c064ac78d96?s=128&d=identicon&r=PG", "display_name": "iGoDa", "link": "https://stackoverflow.com/users/706833/igoda"}, "edited": false, "score": 0, "creation_date": 1440594980, "post_id": 32226241, "comment_id": 52337895, "body": "Thanks you :) You help me on my way, definitely the problem was with plural also changing this it worked: Products.create(name: &quot;name1&quot;, price: &quot;1.1&quot;, category: Categories.find(1))"}], "tags": [], "owner": {"reputation": 2591, "user_id": 2689541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efb8ec80d1ae2fd19fb7629da7e702db?s=128&d=identicon&r=PG&f=1", "display_name": "haradwaith", "link": "https://stackoverflow.com/users/2689541/haradwaith"}, "is_accepted": true, "score": 1, "last_activity_date": 1440590928, "creation_date": 1440590928, "answer_id": 32226241, "question_id": 32225537, "link": "https://stackoverflow.com/questions/32225537/ruby-activemodelmissingattributeerror/32226241#32226241", "title": "Ruby ActiveModel::MissingAttributeError", "body": "<p>You may have a problem with singular / plural.</p>\n\n<p>In your migration, to create the table <code>products</code>, you have the line:</p>\n\n<pre><code>p.references :categories, index: true\n</code></pre>\n\n<p>This should add to your table the column <code>categories_id</code>.</p>\n\n<p>However, in the <code>Products</code> model, the foreign key is set to <code>category_id</code>. So when you try to attach a category to a production, it's trying to write the ID of the category to the column <code>category_id</code> of the table <code>categories</code>, which doesn't exists.</p>\n\n<p>By changing the reference name in the products migration, everything should work fine:</p>\n\n<pre><code>create_table :products, primary_key: 'product_id' do |p|\n  p.index :product_id\n  p.string :name\n  p.decimal :price\n  p.references :category, index: true\nend\n</code></pre>\n"}], "owner": {"reputation": 1331, "user_id": 706833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7da2b02238a72bca9a3a0c064ac78d96?s=128&d=identicon&r=PG", "display_name": "iGoDa", "link": "https://stackoverflow.com/users/706833/igoda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 32226241, "answer_count": 1, "score": 0, "last_activity_date": 1440590928, "creation_date": 1440588867, "question_id": 32225537, "link": "https://stackoverflow.com/questions/32225537/ruby-activemodelmissingattributeerror", "title": "Ruby ActiveModel::MissingAttributeError", "body": "<p>I'm trying to learn on my own ruby database relations. \nI have a relation of 1 \"Category\" to many \"Products\" and I'm trying to add a product to the remote database (heroku server). </p>\n\n<p>TIMESTAMP_create_products.rb</p>\n\n<pre><code>class CreateProducts &lt; ActiveRecord::Migration\n    def up\n        create_table :products, primary_key: 'product_id' do |p|\n            p.index :product_id\n            p.string :name\n            p.decimal :price\n            p.references :categories, index: true\n        end\n    end\n\n    def down\n        drop_table :products\n    end\nend\n</code></pre>\n\n<p>TIMETSTAMP_create_categories.rb</p>\n\n<pre><code>class CreateCategories &lt; ActiveRecord::Migration\n    def up\n        create_table :categories, primary_key: 'category_id' do |c|\n      c.index :category_id\n            c.string :name\n            c.integer :parentId\n        end\n    end\n\n    def down\n        drop_table :categories\n    end\nend\n</code></pre>\n\n<p>model.rb</p>\n\n<pre><code>class Products &lt; ActiveRecord::Base\n  self.primary_key = \"product_id\"\n    validates :name, presence: true, uniqueness: true\n    belongs_to :categories, class_name: \"Categories\", foreign_key: 'category_id'\nend\n\nclass Categories &lt; ActiveRecord::Base\n  self.primary_key = \"category_id\"\n    validates :name, presence: true, uniqueness: true\n    has_many :products, class_name: \"Products\"\nend\n</code></pre>\n\n<p>I add manually a category to the database and every time I try to execute the code:</p>\n\n<pre><code>Products.create(name: \"name1\", price: \"1.1\", categories: Categories.find(1))\n</code></pre>\n\n<p>It gives me the output:</p>\n\n<blockquote>\n  <p>ActiveModel::MissingAttributeError can't write unknown attribute <code>category_id</code></p>\n</blockquote>\n\n<p>Is there anything missing here? I don't understand why this is not working.</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 0, "creation_date": 1440588536, "post_id": 32225219, "comment_id": 52333302, "body": "@YuHao: I think it is valid syntax in new ruby"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 0, "creation_date": 1440588596, "post_id": 32225219, "comment_id": 52333340, "body": "@YuHao <a href=\"http://stackoverflow.com/a/27759858/125816\">stackoverflow.com/a/27759858/125816</a>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1440591801, "post_id": 32225219, "comment_id": 52335409, "body": "Cannot be reproduced. Voted to close."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1440591977, "post_id": 32225219, "comment_id": 52335543, "body": "@SergioTulentsev Indeed it is valid syntax, but note that the result cannot be reproduced."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1440592604, "post_id": 32225219, "comment_id": 52336046, "body": "@sawa: yeah, he messed up the example"}, {"owner": {"reputation": 991, "user_id": 3248481, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1218205107/picture?type=large", "display_name": "akshitBhatia", "link": "https://stackoverflow.com/users/3248481/akshitbhatia"}, "edited": false, "score": 0, "creation_date": 1440593863, "post_id": 32225219, "comment_id": 52337061, "body": "Sorry for using : instead of =&gt;"}, {"owner": {"reputation": 991, "user_id": 3248481, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1218205107/picture?type=large", "display_name": "akshitBhatia", "link": "https://stackoverflow.com/users/3248481/akshitbhatia"}, "edited": false, "score": 0, "creation_date": 1440593921, "post_id": 32225219, "comment_id": 52337110, "body": "Close the question if you don&#39;t want people with similar problems to look at the solution. I got what i needed. Also, try understanding the fact that i am new to ruby, hence asking this question."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1440594480, "post_id": 32225219, "comment_id": 52337536, "body": "Telling a lie has nothing to do with being new to Ruby."}, {"owner": {"reputation": 991, "user_id": 3248481, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1218205107/picture?type=large", "display_name": "akshitBhatia", "link": "https://stackoverflow.com/users/3248481/akshitbhatia"}, "edited": false, "score": 0, "creation_date": 1440596956, "post_id": 32225219, "comment_id": 52339398, "body": "So you are saying that i am lying because i could not copy paste the massive input to my small snipet and had to make a sample input on this UI (where tabs dont work and i have to manually enter 4 spaces on each line) so that people can understand the question better? If you have such a problem understanding the context of the question, just ignore the question and solve someone else&#39;s doubt. M sure there are people (like others who answered) who can use common sense. Also, i said sorry, what more do you want me to do?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1440607180, "post_id": 32225219, "comment_id": 52346703, "body": "You lied because you wrote that your code returned <code>[123456,123459,123458,nil,nil,nil]</code> while it didn&#39;t. It returned <code>[nil,nil,nil,nil,nil,nil]</code> (before your edit)."}, {"owner": {"reputation": 991, "user_id": 3248481, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1218205107/picture?type=large", "display_name": "akshitBhatia", "link": "https://stackoverflow.com/users/3248481/akshitbhatia"}, "edited": false, "score": 0, "creation_date": 1440669659, "post_id": 32225219, "comment_id": 52373173, "body": "Untrue. I got what i wrote. And just to be sure, i ran the exact thing in my question again and got the same output. It is not my problem you cannot reproduce it. I dont appreciate being called a liar on a public forum. If you have something personal against me, lets take this up privately. Also, i didnt ask you to reply on this thread. You chose to. So, why dont you reply on threads that you find &quot;Honest&quot; as you define it."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1440772112, "post_id": 32225219, "comment_id": 52425668, "body": "Consider selecting an answer if you found at least one to be helpful."}], "answers": [{"tags": [], "owner": {"reputation": 120, "user_id": 2497616, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9863c9a711e9c922e5a44869045f599b?s=128&d=identicon&r=PG", "display_name": "Arkantus", "link": "https://stackoverflow.com/users/2497616/arkantus"}, "is_accepted": false, "score": 0, "last_activity_date": 1440588295, "creation_date": 1440588295, "answer_id": 32225344, "question_id": 32225219, "link": "https://stackoverflow.com/questions/32225219/conditionally-extract-hashes-from-array-of-hashes/32225344#32225344", "title": "Conditionally extract hashes from array of hashes", "body": "<p>I'd guess something like :</p>\n\n<pre><code>x.delete_if {|x| x == nil}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 991, "user_id": 3248481, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1218205107/picture?type=large", "display_name": "akshitBhatia", "link": "https://stackoverflow.com/users/3248481/akshitbhatia"}, "edited": false, "score": 0, "creation_date": 1440669873, "post_id": 32225357, "comment_id": 52373321, "body": "Thanks for .compact. That is exactly what i was looking for."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1440588333, "creation_date": 1440588333, "answer_id": 32225357, "question_id": 32225219, "link": "https://stackoverflow.com/questions/32225219/conditionally-extract-hashes-from-array-of-hashes/32225357#32225357", "title": "Conditionally extract hashes from array of hashes", "body": "<p>What you want to do here is:</p>\n\n<pre><code>x.select { |record| record[:createdBy] == 'test_user1' }.map { |record| record[:creationDate] }.max\n  # =&gt; 123459\n</code></pre>\n\n<p>In general, to remove <code>nil</code>s from an array, you can simply call <code>Array#compact</code>:</p>\n\n<pre><code>[1, nil, nil, 2, 'foo', nil].compact # =&gt; [1, 2, \"foo\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1440589305, "post_id": 32225453, "comment_id": 52333767, "body": "This returns the record (hash) and not the max date itself."}, {"owner": {"reputation": 4100, "user_id": 217756, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/547377f831a0ee3de6df245b7d40cbff?s=128&d=identicon&r=PG", "display_name": "tomsoft", "link": "https://stackoverflow.com/users/217756/tomsoft"}, "reply_to_user": {"reputation": 6388, "user_id": 45254, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a8126f7b02a2fb9038f05158320fbace?s=128&d=identicon&r=PG", "display_name": "Krule", "link": "https://stackoverflow.com/users/45254/krule"}, "edited": false, "score": 0, "creation_date": 1440589327, "post_id": 32225453, "comment_id": 52333780, "body": "@Krule be carefull with edition: I was reusing the same convention than the poster, and the poster use string based hash and not atom based hash, so your edit will fails..."}, {"owner": {"reputation": 6388, "user_id": 45254, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a8126f7b02a2fb9038f05158320fbace?s=128&d=identicon&r=PG", "display_name": "Krule", "link": "https://stackoverflow.com/users/45254/krule"}, "edited": false, "score": 0, "creation_date": 1440589386, "post_id": 32225453, "comment_id": 52333816, "body": "It is not actually string based hash. In that case he would have to use <code>=&gt;</code>. This code would return <code>nil</code>: <code>x.select { |n| n[&quot;createdBy&quot;] == &quot;test_user1&quot; }.max_by { |n| n[&quot;creationDate&quot;] }</code>"}, {"owner": {"reputation": 4100, "user_id": 217756, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/547377f831a0ee3de6df245b7d40cbff?s=128&d=identicon&r=PG", "display_name": "tomsoft", "link": "https://stackoverflow.com/users/217756/tomsoft"}, "reply_to_user": {"reputation": 6388, "user_id": 45254, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a8126f7b02a2fb9038f05158320fbace?s=128&d=identicon&r=PG", "display_name": "Krule", "link": "https://stackoverflow.com/users/45254/krule"}, "edited": false, "score": 0, "creation_date": 1440589585, "post_id": 32225453, "comment_id": 52333953, "body": "@krule : you&#39;re right, I thought that it was a typing error but I was not aware of the &#39;key&#39;:value syntax, only the key:value one (which I think create more issue than it solve....)"}, {"owner": {"reputation": 6388, "user_id": 45254, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a8126f7b02a2fb9038f05158320fbace?s=128&d=identicon&r=PG", "display_name": "Krule", "link": "https://stackoverflow.com/users/45254/krule"}, "edited": false, "score": 0, "creation_date": 1440589945, "post_id": 32225453, "comment_id": 52334200, "body": "@tomsoft: That syntax is rarely used since it was introduced in Ruby 2.2. I prefer previous approach to this (ruby 2, 2.1) <code>syntax error, unexpected &#39;:&#39;, expecting =&gt;</code> (ruby 1.9) <code>syntax error, unexpected &#39;}&#39;, expecting $end</code>. But with language tendency to make strings immutable (in ruby 3) and aversion towards symbols, I can understand the decision. Also a lot of people made this mistake."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1440641931, "post_id": 32225453, "comment_id": 52361096, "body": "Just tack <code>[&quot;creation_date&quot;]</code> to the end to return the requested value."}], "tags": [], "owner": {"reputation": 4100, "user_id": 217756, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/547377f831a0ee3de6df245b7d40cbff?s=128&d=identicon&r=PG", "display_name": "tomsoft", "link": "https://stackoverflow.com/users/217756/tomsoft"}, "is_accepted": false, "score": 1, "last_activity_date": 1440589220, "last_edit_date": 1440589220, "creation_date": 1440588616, "answer_id": 32225453, "question_id": 32225219, "link": "https://stackoverflow.com/questions/32225219/conditionally-extract-hashes-from-array-of-hashes/32225453#32225453", "title": "Conditionally extract hashes from array of hashes", "body": "<p>It' close to what you plan to do in python:</p>\n\n<pre><code>x.select { |n| n[:createdBy] == \"test_user1\" }.max_by { |n| n[:creationDate] }\n</code></pre>\n\n<p>First operation select on records created by \"test_user1\", while second operation get the maximum of the resulting array based on the creationDate</p>\n"}, {"tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": 0, "last_activity_date": 1440591190, "creation_date": 1440591190, "answer_id": 32226339, "question_id": 32225219, "link": "https://stackoverflow.com/questions/32225219/conditionally-extract-hashes-from-array-of-hashes/32226339#32226339", "title": "Conditionally extract hashes from array of hashes", "body": "<p>This is a good candidate for a map-reduce function such as <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-inject\" rel=\"nofollow\"><code>inject</code></a>.</p>\n\n<pre><code>x = [{\"creationDate\" =&gt; 123456,\"createdBy\" =&gt; \"test_user1\"},\n     {\"creationDate\" =&gt; 123459,\"createdBy\" =&gt; \"test_user1\"},\n     {\"creationDate\" =&gt; 123458,\"createdBy\" =&gt; \"test_user1\"},\n     {\"creationDate\" =&gt; 123454,\"createdBy\" =&gt; \"test_user2\"},\n     {\"creationDate\" =&gt; 123452,\"createdBy\" =&gt; \"test_user2\"},\n     {\"creationDate\" =&gt; 123451,\"createdBy\" =&gt; \"test_user2\"}]\n\nx.inject(nil) do |result, item|\n  if item[\"createdBy\"] == \"test_user1\" &amp;&amp; (result.nil? or item[\"creationDate\"] &gt; result)\n    item[\"creationDate\"]\n  else\n    result\n  end\nend\n</code></pre>\n\n<p>Here's a possible implementation of the <code>inject</code>. The block will iterate each item in the collection and will always maintain the highest value.</p>\n"}, {"comments": [{"owner": {"reputation": 38863, "user_id": 2415822, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zxy7G.jpg?s=128&g=1", "display_name": "JAL", "link": "https://stackoverflow.com/users/2415822/jal"}, "edited": false, "score": 0, "creation_date": 1440602263, "post_id": 32226770, "comment_id": 52343418, "body": "While this code may answer the question, providing additional context regarding why and/or how this code answers the question improves its long-term value."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1440592287, "creation_date": 1440592287, "answer_id": 32226770, "question_id": 32225219, "link": "https://stackoverflow.com/questions/32225219/conditionally-extract-hashes-from-array-of-hashes/32226770#32226770", "title": "Conditionally extract hashes from array of hashes", "body": "<pre><code>x.min_by{|h| [h[:createdBy], -h[:creationDate]]}[:creationDate]\n# =&gt; 123459\n</code></pre>\n\n<hr>\n\n<pre><code>[123456, 123459, 123458, nil, nil, nil].compact\n# =&gt; [123456, 123459, 123458]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 991, "user_id": 3248481, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1218205107/picture?type=large", "display_name": "akshitBhatia", "link": "https://stackoverflow.com/users/3248481/akshitbhatia"}, "is_accepted": true, "score": 0, "last_activity_date": 1440594129, "creation_date": 1440594129, "answer_id": 32227405, "question_id": 32225219, "link": "https://stackoverflow.com/questions/32225219/conditionally-extract-hashes-from-array-of-hashes/32227405#32227405", "title": "Conditionally extract hashes from array of hashes", "body": "<p>This works:</p>\n\n<pre><code>x.map {|a| a['creationDate'] if a['createdBy'] == 'test_user1'}.compact.max\n# =&gt; 123459\n</code></pre>\n"}], "owner": {"reputation": 991, "user_id": 3248481, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1218205107/picture?type=large", "display_name": "akshitBhatia", "link": "https://stackoverflow.com/users/3248481/akshitbhatia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 32227405, "answer_count": 6, "score": -1, "last_activity_date": 1440594129, "creation_date": 1440587937, "last_edit_date": 1440593840, "question_id": 32225219, "link": "https://stackoverflow.com/questions/32225219/conditionally-extract-hashes-from-array-of-hashes", "title": "Conditionally extract hashes from array of hashes", "body": "<p>From the following array of hashes:</p>\n\n<pre><code>x = [\n  {\"creationDate\"=&gt;123456,\"createdBy\"=&gt;\"test_user1\"},\n  {\"creationDate\"=&gt;123459,\"createdBy\"=&gt;\"test_user1\"},\n  {\"creationDate\"=&gt;123458,\"createdBy\"=&gt;\"test_user1\"},\n  {\"creationDate\"=&gt;123454,\"createdBy\"=&gt;\"test_user2\"},\n  {\"creationDate\"=&gt;123452,\"createdBy\"=&gt;\"test_user2\"},\n  {\"creationDate\"=&gt;123451,\"createdBy\"=&gt;\"test_user2\"}\n]\n</code></pre>\n\n<p>I am trying to find the maximum <code>:creationDate</code> value where <code>:createdBy</code> value  is <code>\"test_user1\"</code>. I did this:</p>\n\n<pre><code>x.map {|a| a['creationDate'] if a['createdBy'] == 'test_user1'}\n# =&gt; [123456,123459,123458,nil,nil,nil]\n</code></pre>\n\n<p>I want to get rid of the <code>nil</code> so that I can apply <code>max</code> to that array. How do I modify the code above?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "amazon-s3"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1440587347, "post_id": 32224995, "comment_id": 52332500, "body": "Quotes near <code>AWS_REGION</code> are messed up."}, {"owner": {"reputation": 6088, "user_id": 1983072, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/974c4e106b996fff51c25171e439b7b8?s=128&d=identicon&r=PG", "display_name": "bbozo", "link": "https://stackoverflow.com/users/1983072/bbozo"}, "edited": false, "score": 0, "creation_date": 1440587382, "post_id": 32224995, "comment_id": 52332530, "body": "That access key looks suspiciously legit :P"}], "answers": [{"comments": [{"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 529, "user_id": 3574178, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6f9079310597136064b4b8197f7a8bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/3574178/neil"}, "edited": false, "score": 0, "creation_date": 1440592476, "post_id": 32225279, "comment_id": 52335948, "body": "You actually had another typo: <code>region: &quot;ENV[&#39;AWS_REGION&quot;],</code> fix that and try again."}, {"owner": {"reputation": 529, "user_id": 3574178, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6f9079310597136064b4b8197f7a8bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/3574178/neil"}, "edited": false, "score": 0, "creation_date": 1440592722, "post_id": 32225279, "comment_id": 52336138, "body": "thanks for your help but getting the same error, using oregan which is &#39;us-west-2&#39;"}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 529, "user_id": 3574178, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6f9079310597136064b4b8197f7a8bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/3574178/neil"}, "edited": false, "score": 0, "creation_date": 1440593054, "post_id": 32225279, "comment_id": 52336381, "body": "what happens if you out <code>region: ENV[&#39;AWS_REGION&#39;]</code> inside the <code>s3_credentials </code> key?"}], "tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": false, "score": 0, "last_activity_date": 1440592282, "last_edit_date": 1440592282, "creation_date": 1440588110, "answer_id": 32225279, "question_id": 32224995, "link": "https://stackoverflow.com/questions/32224995/rails4-1-aws-errors-missing-region/32225279#32225279", "title": "Rails4.1: AWS errors missing region", "body": "<p>You have a syntax error in your <code>.env</code> file which is most probably causing this error.</p>\n\n<p>Change:</p>\n\n<pre><code>export AWS_REGION=\"'us-west-2'\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>export AWS_REGION='us-west-2'\n</code></pre>\n\n<p>Reload the shell and try again.</p>\n\n<h3>Upate</h3>\n\n<p>Make sure your <code>ENV</code> hash has the correct <code>region</code>. You can check by typing: <code>ENV | grep AWS</code> in your console.</p>\n\n<p>Then, add <code>region: ENV['AWS_REGION']</code> to your <code>s3_credentials</code>:</p>\n\n<pre><code>config.paperclip_defaults = {\n        storage: :s3,\n            region: ENV['AWS_REGION'],\n        s3_credentials: {\n            bucket: ENV['AWS_BUCKET'],\n            access_key_id: ENV['AWS_ACCESS_KEY_ID'],\n            secret_access_key: ENV['AWS_SECRET_ACCESS_KEY']\n        }\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1726, "user_id": 4890595, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-9rPtty8_fOI/AAAAAAAAAAI/AAAAAAAAA0Y/wmx2PYqTMEQ/photo.jpg?sz=128", "display_name": "Code-MonKy", "link": "https://stackoverflow.com/users/4890595/code-monky"}, "edited": false, "score": 0, "creation_date": 1492937654, "post_id": 33394812, "comment_id": 74188199, "body": "I did this but didn&#39;t work. Does it need to be &#39;AWS_REGION&#39;, can&#39;t I simply have it called differently in my secrets or figaro .yml file?"}], "tags": [], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "is_accepted": true, "score": 16, "last_activity_date": 1446045265, "creation_date": 1446045265, "answer_id": 33394812, "question_id": 32224995, "link": "https://stackoverflow.com/questions/32224995/rails4-1-aws-errors-missing-region/33394812#33394812", "title": "Rails4.1: AWS errors missing region", "body": "<p>The error is originating from the Paperclip gem. In your <code>config.paperclip_defaults</code> you used <code>region</code> when you should have used <code>s3_region</code>. This is how the config should look:</p>\n\n<pre><code>config.paperclip_defaults = {\n  :storage =&gt; :s3,\n  :s3_region =&gt; ENV['AWS_REGION'],\n  :s3_credentials =&gt; {\n    :bucket =&gt; ENV['S3_BUCKET_NAME'],\n    :access_key_id =&gt; ENV['AWS_ACCESS_KEY_ID'],\n    :secret_access_key =&gt; ENV['AWS_SECRET_ACCESS_KEY']\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 529, "user_id": 3574178, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6f9079310597136064b4b8197f7a8bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/3574178/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10516, "favorite_count": 4, "accepted_answer_id": 33394812, "answer_count": 2, "score": 13, "last_activity_date": 1446045265, "creation_date": 1440587216, "last_edit_date": 1592644375, "question_id": 32224995, "link": "https://stackoverflow.com/questions/32224995/rails4-1-aws-errors-missing-region", "title": "Rails4.1: AWS errors missing region", "body": "<p>I'm trying to create an image uploader using paperclip, the aws-sdk gem and Amazon S3.\nI get this error:</p>\n<pre><code>Aws::Errors::MissingRegionError in ProjectsController#create. \nMissing region; use :region option or export region name to ENV['AWS_REGION']. using Oregon region. \n</code></pre>\n<p><strong>projects_controller.rb</strong></p>\n<pre><code>def create\n    @project = current_user.projects.new(project_params)\n    @project.save\n    respond_with(@project)\nend\n</code></pre>\n<p><strong>application.rb file</strong></p>\n<pre><code>config.paperclip_defaults = {\n        storage: :s3,\n        s3_host_name: &quot;s3-us-west-2.amazonaws.com&quot;,\n        s3_credentials: {\n            bucket: ENV['AWS_BUCKET'],\n            access_key_id: ENV['AWS_ACCESS_KEY_ID'],\n            secret_access_key: ENV['AWS_SECRET_ACCESS_KEY']\n        }\n    }\n</code></pre>\n<p>According to the S3 documentation I understand I need to change to ENV['AWS_REGION']</p>\n<pre><code>config.paperclip_defaults = {\n        storage: :s3,\n            region: &quot;ENV['AWS_REGION&quot;],\n        s3_credentials: {\n            bucket: ENV['AWS_BUCKET'],\n            access_key_id: ENV['AWS_ACCESS_KEY_ID'],\n            secret_access_key: ENV['AWS_SECRET_ACCESS_KEY']\n        }\n    }\n</code></pre>\n<p>and add region to my .env file</p>\n<pre><code>export AWS_BUCKET=realv1\nexport AWS_ACCESS_KEY_ID=&lt;MY_ACCESS_KEY_ID_HERE&gt;\nexport AWS_SECRET_ACCESS_KEY=&lt;MY_ACCESS_KEY_HERE&gt;\nexport AWS_REGION=&quot;'us-west-2'\n</code></pre>\n<p>I rebooted the server and retested but still get the same errors.</p>\n<p>update</p>\n<p>update:</p>\n<p>in rails console</p>\n<p>2.0.0p247 :001 &gt; ENV[&quot;AWS_REGION&quot;]</p>\n<p>=&gt; &quot;us-west-2&quot;\n2.0.0p247 :002 &gt;</p>\n"}, {"tags": ["arrays", "ruby", "ruby-on-rails-3", "search", "activerecord"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1440586064, "post_id": 32224445, "comment_id": 52331617, "body": "Assuming you are building the search query on <code>search</code> page, it should <b>post to <code>index</code></b>, not back to <code>search</code> controller. In <code>index</code> you should check for params and either show everything, or filtered results. And, yes, <code>to_a</code> is fine."}, {"owner": {"reputation": 604, "user_id": 4689916, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7ce4bcab78b3e6a5805192fdc80a8f5a?s=128&d=identicon&r=PG&f=1", "display_name": "Vito", "link": "https://stackoverflow.com/users/4689916/vito"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1440586203, "post_id": 32224445, "comment_id": 52331718, "body": "i check the text-field in the search controller. Cause i want to show in the index page the list of the results. I execute the query in search controller and then i want to pass this result to index controller.Sorry , I don&#39;t understand you."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1440586416, "post_id": 32224445, "comment_id": 52331855, "body": "In frontend you have a search-box, presumably in a form, that <i>posts</i> search result somewhere. Just post user input <i>directly to index controller</i>, not back to <i>search</i>."}, {"owner": {"reputation": 604, "user_id": 4689916, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7ce4bcab78b3e6a5805192fdc80a8f5a?s=128&d=identicon&r=PG&f=1", "display_name": "Vito", "link": "https://stackoverflow.com/users/4689916/vito"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1440586511, "post_id": 32224445, "comment_id": 52331932, "body": "is this the problem of the loop? can you explain me better what happens? thank you for the help"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1440586686, "post_id": 32224445, "comment_id": 52332066, "body": "I can not explain you anything, besides my suggestions on what you are trying to achieve, until you have your frontend code posted."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1440587184, "post_id": 32224445, "comment_id": 52332394, "body": "<b>frontend code</b> is the code, that is executed in browser and posts entered by user search string to controller. I believe it posts to <code>search</code> controller, what is wrong. It should post to <code>index</code> controller. I am unable to explain that clearer."}, {"owner": {"reputation": 604, "user_id": 4689916, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7ce4bcab78b3e6a5805192fdc80a8f5a?s=128&d=identicon&r=PG&f=1", "display_name": "Vito", "link": "https://stackoverflow.com/users/4689916/vito"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1440595831, "post_id": 32224445, "comment_id": 52338530, "body": "i understand your advice. thank you"}], "answers": [{"tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": true, "score": 0, "last_activity_date": 1440587723, "last_edit_date": 1440587723, "creation_date": 1440586619, "answer_id": 32224779, "question_id": 32224445, "link": "https://stackoverflow.com/questions/32224445/rails-3-2-searching-action-how-to-pass-results-to-another-action/32224779#32224779", "title": "rails 3.2 searching action. how to pass results to another action", "body": "<blockquote>\n  <p>I used  @companies ||= Company.all cause i think that the  @companies\n  is and istance variable and it should be available in all the actions\n  of the class. Isn't it?</p>\n</blockquote>\n\n<p>Not really, it depends on from where you want to access the <code>@companies</code> instance variable. e.g. from which view, you need <code>@companies</code> instance variable in the corresponding action method of the controller.</p>\n\n<blockquote>\n  <p>The second time i call the search action it brings me into the index\n  action</p>\n</blockquote>\n\n<p>You are using <code>redirect_to companies_index_path</code> in your <code>search</code> method which brings you to the index action.</p>\n\n<p><strong>To implement search in your application</strong>, you can follow this somewhat standard process:</p>\n\n<p>In your <code>application_controller.rb</code> which will have the <code>@search_query</code>.</p>\n\n<pre><code>  # Returns string\n  def search_query\n    @search_query ||= params[:query] || params[:search]\n  end\n</code></pre>\n\n<p>Then, in your <code>searches_controller.rb</code>, you can have:</p>\n\n<pre><code>  def search\n    # in the method build your search results based on \n    # search_query param\n    @search_results = Company.joins(:references).where(sql_string(search_query)).to_a\n  end\n</code></pre>\n\n<p>In your <code>routes.rb</code>, you can have:</p>\n\n<pre><code>get '/search(/:query)' =&gt; 'searches#search', query: /.+/, as: 'search'\n</code></pre>\n\n<p>Which will take you to the searches_controller's <code>search</code> action where you are building the search results <code>@search_results</code>.</p>\n\n<p>Finally, you need to have a <code>app/views/searches/search.html.erb</code> view file where you have access to your <code>@search_results</code> instance variable and you can just loop through them and display them in this view.</p>\n\n<p><strong>Answers to your last 3 questions:</strong></p>\n\n<blockquote>\n  <ol>\n  <li><p>passing @companies searching result to index action.</p></li>\n  <li><p>avoid the loop between search-index. So in every new request resets\n  the old searching.</p></li>\n  </ol>\n</blockquote>\n\n<p>You can overcome these problems by following the request/response flow that I have mentioned above. You should not share your <code>index</code> view with your <code>search</code> and you should not have any loop between <code>search</code> and <code>index</code>. Both of them are separate actions of the controller and can be handled separately as I showed above.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>i want to know if it's correct the casting with the to_a to bring an\n  ActiveRecord:Relation to Array.</li>\n  </ol>\n</blockquote>\n\n<p>You can do that if you want. But, you don't really need it in this use case. You can store the <code>ActiveRecord:Relation</code> in your <code>search_results</code> and when you access this instance variable from inside your <code>search.html.erb</code> view, you can easily loop through using a <code>.each do</code> block. So, you don't have to worry about <code>ActiveRecord:Relation</code> and <code>Array</code>.</p>\n"}], "owner": {"reputation": 604, "user_id": 4689916, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7ce4bcab78b3e6a5805192fdc80a8f5a?s=128&d=identicon&r=PG&f=1", "display_name": "Vito", "link": "https://stackoverflow.com/users/4689916/vito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 32224779, "answer_count": 1, "score": 0, "last_activity_date": 1440587723, "creation_date": 1440585695, "last_edit_date": 1440586958, "question_id": 32224445, "link": "https://stackoverflow.com/questions/32224445/rails-3-2-searching-action-how-to-pass-results-to-another-action", "title": "rails 3.2 searching action. how to pass results to another action", "body": "<p>I should create a search page in which i have to save in an Array all the results of the searching. I had two problems:</p>\n\n<p>1) I used the following statement:</p>\n\n<pre><code>Company.joins(:references).where(sql_string)\n</code></pre>\n\n<p>that returns an <code>ActiveRecord:Relation</code> and it's not good for me cause i have to display these results in the index action , in which i use an <code>each</code> statement. So , to overcame this problem i used the <code>to_a</code>.\nI checked the <code>.class</code> of my variable and with the <code>to_a</code> it passed from <code>ActiveRecord:Relation</code> to <code>Array</code>. So , it seems that this solve the problem.</p>\n\n<pre><code>Company.joins(:references).where(sql_string).to_a\n</code></pre>\n\n<p>2) Now, i have to pass this variable (<code>Array</code>) into my <code>index</code> action.\nI executed the search in the action called <code>search</code>:</p>\n\n<pre><code>def search\n   ...\n   @companies = Company.joins(:references).where(sql_string).to_a\nend\n</code></pre>\n\n<p>Now, i want to pass this to <code>index</code>:</p>\n\n<pre><code>def index\n  @companies ||= Company.all\nend\n</code></pre>\n\n<p>I used   <code>@companies ||= Company.all</code> cause i think that the  <code>@companies</code> is and istance variable and it should be available in all the actions of the class. Isn't it? By the way, it doesn't workl. I mean , the results are not shared through the two methods.\nAlso , in the <code>search</code> action i don't know how to call <code>index</code> action. I used the <code>redirect_to</code> but this bring me to another problem.</p>\n\n<pre><code>def search\n   ...\n   @companies = Company.joins(:references).where(sql_string).to_a\n   redirect_to companies_index_path\nend\n</code></pre>\n\n<p>The second time i call the search action it brings me into the index action.As i insered the searching value. At really he still had the past searching in memory, and i don't want this behavior.\nSo , in other words, i want to:</p>\n\n<ol>\n<li><p><strong>passing @companies searching result to index action.</strong></p></li>\n<li><p><strong>avoid the loop between <code>search-index</code>. So in every new request resets\n    the old searching.</strong></p></li>\n<li><p><strong>i want to know if it's correct the casting with the <code>to_a</code> to bring\n    an <code>ActiveRecord:Relation</code> to <code>Array</code>.</strong></p></li>\n</ol>\n\n<p>Thank You.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<pre><code>    def search\n\n    stringa_sql = \"\"\n    ragione_sociale = \"\"\n    riferimento = \"\"\n    note = \"\"\n    min_date = \"\"\n    max_date = \"\"\n    company_type = \"\"\n    sector = \"\"\n    country = \"\"\n    certification = \"\"\n    contact = \"\"\n    state = \"\"\n    manage = \"\"\n    consultation = \"\"\n    formation = \"\"\n    software = \"\"\n\n        if params[:ragione_sociale]\n\n            ragione_sociale = params[:ragione_sociale]\n          stringa_sql = \"ragione_sociale like \"+\"'%\"+ragione_sociale+\"%'\"\n\n        end\n\n\n\n        if params[:riferimento]\n\n            riferimento = params[:riferimento]\n        stringa_sql += \" AND nome like \"+\"'%\"+riferimento+\"%'\"\n        end\n\n        if params[:note]\n\n            note = params[:note]\n        stringa_sql += \" AND note like \"+\"'%\"+note+\"%'\"\n\n        end\n\n\n\n        if params[:min_date] &amp;&amp; params[:min_date]!= \"\"\n\n            if params[:max_date] &amp;&amp; params[:max_date]!= \"\"\n\n                min_date = params[:min_date]\n\n                max_date = params[:max_date]\n        stringa_sql += \" AND richiamare &gt;=\"+min_date+\" AND richiamare &lt;=\"+max_date\n\n            end     \n\n        end\n\n\n\n        if params[:company_type] #se inviamo la richesta senza scrivere params[:category] viene passato vuoto\n\n            if params[:company_type][:id] != \"\"\n\n                company_type = params[:company_type][:id]\n          stringa_sql += \" AND id_forma_giuridica = \"+company_type\n\n            end\n\n        end     \n\n\n\n        if params[:sector] \n\n            if params[:sector][:id] != \"\"\n\n                sector = params[:sector][:id]\n          stringa_sql += \" AND id_settore = \"+sector\n\n            end\n\n        end\n\n\n\n        if params[:country] \n\n            if params[:country][:id] != \"\"\n\n                country = params[:country][:id]\n            stringa_sql += \" AND id_provincia = \"+country\n\n            end\n\n        end\n\n\n\n        if params[:certification] \n\n            if params[:certification][:id] != \"\"\n\n                certification = params[:certification][:id]\n              stringa_sql += \" AND id_certificazione = \"+certification\n\n            end\n\n        end     \n\n\n\n        if params[:contact] \n\n            if params[:contact][:id] != \"\"\n\n                contact = params[:contact][:id]\n              stringa_sql += \" AND id_contattato = \"+contact\n\n            end\n\n        end     \n\n\n\n        if params[:state] \n\n            if params[:state][:id] != \"\"\n\n                state = params[:state][:id]\n              stringa_sql += \" AND id_stato = \"+state\n\n            end\n\n        end     \n\n\n\n        if params[:manage] \n\n            if params[:manage][:id] != \"\"\n\n                manage = params[:manage][:id]\n              stringa_sql += \" AND id_gestito = \"+manage\n\n            end\n\n        end     \n\n\n    if params[:consultation] \n\n        if params[:consultation][:id] != \"\"\n\n            consultation = params[:consultation][:id]\n          stringa_sql += \" AND id_consulenza = \"+consultation\n\n        end\n\n    end     \n\n\n\n    if params[:formation] \n\n        if params[:formation][:id] != \"\"\n\n            formation = params[:formation][:id]\n            #formazione DA METTERE\n\n        end\n\n    end     \n\n\n\n    if params[:software] \n\n        if params[:software][:id] != \"\"\n\n            software = params[:software][:id]\n            stringa_sql += \" AND id_software = \"+software\n\n        end\n\n    end     \n\n\n\n    @companies = Company.search(stringa_sql).to_a\n\n    if not @companies.empty? \n        redirect_to companies_index_path\n\n    end\nend\n</code></pre>\n\n<p>index:</p>\n\n<pre><code>  def index\n\n    @companies ||= Company.all\n\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "edited": false, "score": 0, "creation_date": 1440585305, "post_id": 32224210, "comment_id": 52331135, "body": "Do you have the locale file in your /locales folder?"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1440585437, "post_id": 32224210, "comment_id": 52331212, "body": "Please include related locales(en, cs) and error."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1440585719, "post_id": 32224210, "comment_id": 52331402, "body": "<code>I have two files: cs.rb &amp; en.yml</code> why it is <code>cs.rb</code>??"}, {"owner": {"reputation": 1006, "user_id": 5084274, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-fbGQrddTMpM/AAAAAAAAAAI/AAAAAAAAAKs/q8Eolhwsznc/photo.jpg?sz=128", "display_name": "J&#250;lius Marko", "link": "https://stackoverflow.com/users/5084274/j%c3%balius-marko"}, "reply_to_user": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "edited": false, "score": 0, "creation_date": 1440586586, "post_id": 32224210, "comment_id": 52331987, "body": "@SimoneCarletti No i haven&#39;t. I my locales folder I have just this two files."}, {"owner": {"reputation": 1006, "user_id": 5084274, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-fbGQrddTMpM/AAAAAAAAAAI/AAAAAAAAAKs/q8Eolhwsznc/photo.jpg?sz=128", "display_name": "J&#250;lius Marko", "link": "https://stackoverflow.com/users/5084274/j%c3%balius-marko"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1440586594, "post_id": 32224210, "comment_id": 52331997, "body": "@mudasobwa cs.rb is czech language"}, {"owner": {"reputation": 1006, "user_id": 5084274, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-fbGQrddTMpM/AAAAAAAAAAI/AAAAAAAAAKs/q8Eolhwsznc/photo.jpg?sz=128", "display_name": "J&#250;lius Marko", "link": "https://stackoverflow.com/users/5084274/j%c3%balius-marko"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1440586598, "post_id": 32224210, "comment_id": 52332000, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 Sorry, I don&#39;t understand your idea"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1440586712, "post_id": 32224210, "comment_id": 52332085, "body": "<i>I my locales folder I have just this two files</i> - show us it please."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1440587908, "post_id": 32224210, "comment_id": 52332913, "body": "<code>number_to_currency</code> method is what should be posted as well."}], "answers": [{"comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1440586896, "post_id": 32224733, "comment_id": 52332217, "body": "Rails allow <code>*.rb</code> <a href=\"http://guides.rubyonrails.org/v2.3.11/i18n.html#configure-the-i18n-module\" rel=\"nofollow noreferrer\">setup-the-rails-application-for-internationalization</a>"}, {"owner": {"reputation": 1006, "user_id": 5084274, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-fbGQrddTMpM/AAAAAAAAAAI/AAAAAAAAAKs/q8Eolhwsznc/photo.jpg?sz=128", "display_name": "J&#250;lius Marko", "link": "https://stackoverflow.com/users/5084274/j%c3%balius-marko"}, "edited": false, "score": 0, "creation_date": 1440587408, "post_id": 32224733, "comment_id": 52332548, "body": "@dipak gupta  please check my cs.rb above. Could I just retype .cs to .yml? Make the author of this cs.rb mistake?"}], "tags": [], "owner": {"reputation": 366, "user_id": 1124177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d20c3b09bb03d1c1c93e435f5324bbc9?s=128&d=identicon&r=PG", "display_name": "dipak gupta", "link": "https://stackoverflow.com/users/1124177/dipak-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1440586471, "creation_date": 1440586471, "answer_id": 32224733, "question_id": 32224210, "link": "https://stackoverflow.com/questions/32224210/locales-ruby-on-rails-issue/32224733#32224733", "title": "Locales Ruby on Rails issue", "body": "<p>I think, you have not defined cs.yml in locale directory that's why, it is taking default as en locale.</p>\n\n<p>please define cs.yml instead of cs.rb</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 4387722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7635633007d2ee06c1726d6a0be5103e?s=128&d=identicon&r=PG&f=1", "display_name": "Kotagiri", "link": "https://stackoverflow.com/users/4387722/kotagiri"}, "is_accepted": false, "score": 0, "last_activity_date": 1440586908, "creation_date": 1440586908, "answer_id": 32224881, "question_id": 32224210, "link": "https://stackoverflow.com/questions/32224210/locales-ruby-on-rails-issue/32224881#32224881", "title": "Locales Ruby on Rails issue", "body": "<p>For this to work you need to have a locale file at config/locales/fr.yml for this to work.  </p>\n\n<p>The :locale option only declares to Rails what locale you want it to be. Rails does not have all the translations for every language in the project, and so you must include these translation files yourself.</p>\n"}], "owner": {"reputation": 1006, "user_id": 5084274, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-fbGQrddTMpM/AAAAAAAAAAI/AAAAAAAAAKs/q8Eolhwsznc/photo.jpg?sz=128", "display_name": "J&#250;lius Marko", "link": "https://stackoverflow.com/users/5084274/j%c3%balius-marko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1440846599, "creation_date": 1440585086, "last_edit_date": 1440846599, "question_id": 32224210, "link": "https://stackoverflow.com/questions/32224210/locales-ruby-on-rails-issue", "title": "Locales Ruby on Rails issue", "body": "<p>I have a issue with Locales.  In rails app /config/locales/ I have two files: cs.rb &amp; en.yml.  At the end, the output of price is in $. Why is this?</p>\n\n<p>my index.html.erb looks </p>\n\n<pre><code>&lt;% if notice %&gt;\n&lt;p id=\"notice\" &gt;&lt;%= notice %&gt;&lt;/p&gt;\n&lt;% end %&gt; \n\n&lt;h1&gt;Zoznam produktov&lt;/h1&gt;\n\n&lt;% @products.each do |product| %&gt;\n  &lt;div class=\"entry\" &gt;\n    &lt;%= image_tag(product.image_url) %&gt;\n    &lt;h3&gt;&lt;%= product.title %&gt;&lt;/h3&gt;\n    &lt;%= sanitize(product.description) %&gt;\n    &lt;div class=\"price_line\" &gt; \n      &lt;span class=\"price\"&gt;\n        &lt;%= number_to_currency(product.price, :locale =&gt; :cs) %&gt;\n %&gt;\n      &lt;/span&gt;       \n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 </p>\n\n<p>First is cs.rb and second is en.yml</p>\n\n<pre><code># Czech translations for Ruby on Rails\n# by Karel Mina\u0159\u00edk (karmi@karmi.cz)\n# contributors:\n#  - V\u00edt Krchov - http://github.com/vita - Rails 3 update\n\nunless defined?(CzechLocaleI18n::ERROR_MESSAGES)\n  module CzechLocaleI18n\n    ERROR_MESSAGES = {\n      :inclusion           =&gt; \"nen\u00ed v seznamu povolen\u00fdch hodnot\",\n      :exclusion           =&gt; \"je vyhrazeno pro jin\u00fd \u00fa\u010del\",\n      :invalid             =&gt; \"nen\u00ed platn\u00e1 hodnota\",\n      :confirmation        =&gt; \"nebylo potvrzeno\",\n      :accepted            =&gt; \"mus\u00ed b\u00fdt potvrzeno\",\n      :empty               =&gt; \"nesm\u00ed b\u00fdt pr\u00e1zdn\u00fd/\u00e1/\u00e9\",\n      :blank               =&gt; \"je povinn\u00e1 polo\u017eka\", # alternate formulation: \"is required\"\n      :too_long            =&gt; \"je p\u0159\u00edli\u0161 dlouh\u00fd/\u00e1/\u00e9 (max. %{count} znak\u016f)\",\n      :too_short           =&gt; \"je p\u0159\u00edli\u0161 kr\u00e1tk\u00fd/\u00e1/\u00e9 (min. %{count} znak\u016f)\",\n      :wrong_length        =&gt; \"nem\u00e1 spr\u00e1vnou d\u00e9lku (o\u010dek\u00e1v\u00e1no %{count} znak\u016f)\",\n      :not_a_number        =&gt; \"nen\u00ed \u010d\u00edslo\",\n      :greater_than        =&gt; \"mus\u00ed b\u00fdt v\u011bt\u0161\u00ed ne\u017e %{count}\",\n      :greater_than_or_equal_to =&gt; \"mus\u00ed b\u00fdt v\u011bt\u0161\u00ed nebo rovno %{count}\",\n      :equal_to            =&gt; \"mus\u00ed b\u00fdt rovno %{count}\",\n      :less_than           =&gt; \"mus\u00ed b\u00fdt m\u00e9n\u011b ne\u017e %{count}\",\n      :less_than_or_equal_to    =&gt; \"mus\u00ed b\u00fdt m\u00e9n\u011b nebo rovno %{count}\",\n      :odd                 =&gt; \"mus\u00ed b\u00fdt lich\u00e9 \u010d\u00edslo\",\n      :even                =&gt; \"mus\u00ed b\u00fdt sud\u00e9 \u010d\u00edslo\",\n      :not_an_integer       =&gt; \"mus\u00ed b\u00fdt cel\u00e9 \u010d\u00edslo\"\n    }\n  end\nend\n\n{ :'cs' =&gt; {\n\n    # ActiveSupport\n    :support =&gt; {\n      :array =&gt; {\n    :two_words_connector =&gt; ' a ',\n    :last_word_connector =&gt; ' a ',\n    :words_connector =&gt; ', '\n      },\n      :select =&gt; {\n    :prompt =&gt; 'Pros\u00edm vyberte si',\n      }\n    },\n\n    # Date\n    :date =&gt; {\n      :formats =&gt; {\n    :default =&gt; \"%d. %m. %Y\",\n    :short   =&gt; \"%d %b\",\n    :long    =&gt; \"%d. %B %Y\",\n      },\n      :day_names         =&gt; %w{Ned\u011ble Pond\u011bl\u00ed \u00dater\u00fd St\u0159eda \u010ctvrtek P\u00e1tek Sobota},\n      :abbr_day_names    =&gt; %w{Ne Po \u00dat St \u010ct P\u00e1 So},\n      :month_names       =&gt; %w{~ Leden \u00danor B\u0159ezen Duben Kv\u011bten \u010cerven \u010cervenec Srpen Z\u00e1\u0159\u00ed \u0158\u00edjen Listopad Prosinec},\n      :abbr_month_names  =&gt; %w{~ Led \u00dano B\u0159e Dub Kv\u011b \u010cvn \u010cvc Srp Z\u00e1\u0159 \u0158\u00edj Lis Pro},\n      :order             =&gt; [:day, :month, :year]\n    },\n\n    # Time\n    :time =&gt; {\n      :formats =&gt; {\n    :default =&gt; \"%a %d. %B %Y %H:%M %z\",\n    :short   =&gt; \"%d. %m. %H:%M\",\n    :long    =&gt; \"%A %d. %B %Y %H:%M\",\n      },\n      :am =&gt; 'am',\n      :pm =&gt; 'pm'\n    },\n\n    # Numbers\n    :number =&gt; {\n      :format =&gt; {\n    :precision =&gt; 3,\n    :separator =&gt; '.',\n    :delimiter =&gt; ',',\n    :significant =&gt; false,\n    :strip_insignificant_zeros =&gt; false\n      },\n      :currency =&gt; {\n    :format =&gt; {\n      :unit =&gt; 'K\u010d',\n      :precision =&gt; 2,\n      :format    =&gt; '%n %u',\n      :separator =&gt; \",\",\n      :delimiter =&gt; \" \",\n      :significant =&gt; false,\n      :strip_insignificant_zeros =&gt; false\n    }\n      },\n      :human =&gt; {\n    :format =&gt; {\n      :precision =&gt; 1,\n      :delimiter =&gt; '',\n      :significant =&gt; false,\n      :strip_insignificant_zeros =&gt; false\n    },\n       :storage_units =&gt; {\n     :format =&gt; \"%n %u\",\n     :units =&gt; {\n       :byte =&gt; \"B\",\n       :kb   =&gt; \"KB\",\n       :mb   =&gt; \"MB\",\n       :gb   =&gt; \"GB\",\n       :tb   =&gt; \"TB\",\n     }\n       },\n       :decimal_units =&gt; {\n     :format =&gt; \"%n %u\",\n     :units =&gt; {\n       :unit =&gt; \"\",\n       :thousand =&gt; \"Tis\u00edc\",\n       :million =&gt; \"Milion\",\n       :billion =&gt; \"Miliarda\",\n       :trillion =&gt; \"Bilion\",\n       :quadrillion =&gt; \"Kvadrilion\"\n     }\n       }\n      },\n      :percentage =&gt; {\n    :format =&gt; {\n      :delimiter =&gt; ''\n    }\n      },\n      :precision =&gt; {\n    :format =&gt; {\n      :delimiter =&gt; ''\n    }\n      }\n    },\n\n    # Distance of time ... helper\n    # NOTE: In Czech language, these values are different for the past and for the future. Preference has been given to past here.\n    :datetime =&gt; {\n      :prompts =&gt; {\n    :second =&gt; \"Sekunda\",\n    :minute =&gt; \"Minuta\",\n    :hour =&gt; \"Hodina\",\n    :day =&gt; \"Den\",\n    :month =&gt; \"M\u011bs\u00edc\",\n    :year =&gt; \"Rok\"\n      },\n      :distance_in_words =&gt; {\n    :half_a_minute =&gt; 'p\u016fl minutou',\n    :less_than_x_seconds =&gt; {\n      :one =&gt; 'necelou sekundou',\n      :other =&gt; 'ani ne %{count} sekundami'\n    },\n    :x_seconds =&gt; {\n      :one =&gt; 'sekundou',\n      :other =&gt; '%{count} sekundami'\n    },\n    :less_than_x_minutes =&gt; {\n      :one =&gt; 'necelou minutou',\n      :other =&gt; 'ani ne %{count} minutami'\n    },\n    :x_minutes =&gt; {\n      :one =&gt; 'minutou',\n      :other =&gt; '%{count} minutami'\n    },\n    :about_x_hours =&gt; {\n      :one =&gt; 'asi hodinou',\n      :other =&gt; 'asi %{count} hodinami'\n    },\n    :x_days =&gt; {\n      :one =&gt; '24 hodinami',\n      :other =&gt; '%{count} dny'\n    },\n    :about_x_months =&gt; {\n      :one =&gt; 'asi m\u011bs\u00edcem',\n      :other =&gt; 'asi %{count} m\u011bs\u00edci'\n    },\n    :x_months =&gt; {\n      :one =&gt; 'm\u011bs\u00edcem',\n      :other =&gt; '%{count} m\u011bs\u00edci'\n    },\n    :about_x_years =&gt; {\n      :one =&gt; 'asi rokem',\n      :other =&gt; 'asi %{count} roky'\n    },\n    :over_x_years =&gt; {\n      :one =&gt; 'v\u00edce ne\u017e rokem',\n      :other =&gt; 'v\u00edce ne\u017e %{count} roky'\n    },\n    :almost_x_years =&gt; {\n      :one =&gt; 't\u00e9m\u011b\u0159 rokem',\n      :other =&gt; 't\u00e9m\u011b\u0159 %{count} roky'\n    }\n      }\n    },\n\n    :helpers =&gt; {\n      :select =&gt; {\n    :prompt =&gt; \"Pros\u00edm vyberte si\"\n      },\n\n      :submit =&gt; {\n    :create =&gt; \"Vytvo\u0159it %{model}\",\n    :update =&gt; \"Aktualizovat %{model}\",\n    :submit =&gt; \"Ulo\u017eit %{model}\"\n      }\n    },\n\n    :errors =&gt; {\n      :format =&gt; \"%{attribute} %{message}\",\n      :messages =&gt; CzechLocaleI18n::ERROR_MESSAGES\n    },\n\n    # ActiveRecord validation messages\n    :activerecord =&gt; {\n      :errors =&gt; {\n    :messages =&gt; {\n      :taken               =&gt; \"ji\u017e datab\u00e1ze obsahuje\",\n      :record_invalid      =&gt; \"Validace je ne\u00faspe\u0161n\u00e1: %{errors}\"\n    }.merge(CzechLocaleI18n::ERROR_MESSAGES),\n    :template =&gt; {\n      :header   =&gt; {\n        :one =&gt; \"P\u0159i ukl\u00e1d\u00e1n\u00ed objektu %{model} do\u0161lo k chyb\u00e1m a nebylo jej mo\u017en\u00e9 ulo\u017eit\",\n        :other =&gt; \"P\u0159i ukl\u00e1d\u00e1n\u00ed objektu %{model} do\u0161lo ke %{count} chyb\u00e1m a nebylo mo\u017en\u00e9 jej ulo\u017eit\"\n      },\n      :body  =&gt; \"N\u00e1sleduj\u00edc\u00ed pole obsahuj\u00ed chybn\u011b vypln\u011bn\u00e9 \u00fadaje:\"\n    },\n    :full_messages =&gt; {\n      :format =&gt; \"%{attribute} %{message}\"\n    }\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>#</p>\n\n<pre><code># Sample localization file for English. Add more files in   this      directory for other locales.\n# See http://github.com/svenfuchs/rails-i18n/tree/master/rails%2Flocale for starting points.\nen:\n  hello: \"Hello world\"\n</code></pre>\n"}, {"tags": ["ruby", "windows", "bundler"], "comments": [{"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "edited": false, "score": 0, "creation_date": 1440585100, "post_id": 32224128, "comment_id": 52330999, "body": "Is <a href=\"http://stackoverflow.com/q/30322935/123527\">stackoverflow.com/q/30322935/123527</a> a possible solution?"}, {"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "reply_to_user": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "edited": false, "score": 0, "creation_date": 1440585591, "post_id": 32224128, "comment_id": 52331303, "body": "@SimoneCarletti Thank you, but the <code>rake install_deps</code> step fails on my machine. That accepted answer has been edited to indicate that it doesn&#39;t work."}, {"owner": {"reputation": 2262, "user_id": 4101569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c4c64e58bc5cdeec8e7ce067131a54?s=128&d=identicon&r=PG", "display_name": "katafrakt", "link": "https://stackoverflow.com/users/4101569/katafrakt"}, "edited": false, "score": 0, "creation_date": 1440592501, "post_id": 32224128, "comment_id": 52335967, "body": "This particular version of Nokogiri is listed in <code>Gemfile.lock</code>. You can probably try to remove that file, run <code>bundle install</code> again and see if it works."}, {"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "reply_to_user": {"reputation": 2262, "user_id": 4101569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c4c64e58bc5cdeec8e7ce067131a54?s=128&d=identicon&r=PG", "display_name": "katafrakt", "link": "https://stackoverflow.com/users/4101569/katafrakt"}, "edited": false, "score": 0, "creation_date": 1440594538, "post_id": 32224128, "comment_id": 52337566, "body": "@katafrakt That seem to work! Add your comment as an answer, and I&#39;ll accept it as <i>the</i> answer :) Thank you."}, {"owner": {"reputation": 4288, "user_id": 527152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c784b2e1c3fb28d8bad8f50ca0282b4?s=128&d=identicon&r=PG", "display_name": "Azolo", "link": "https://stackoverflow.com/users/527152/azolo"}, "edited": false, "score": 1, "creation_date": 1440865413, "post_id": 32224128, "comment_id": 52453839, "body": "Just a heads up, Nokogiri doesn&#39;t have binaries for Ruby 2.2.X yet. So, unless you checkout master and build it (recently enabled building on Windows) you&#39;ll have to downgrade to Ruby 2.1.X. Sorry I didn&#39;t get to this earlier =/"}], "answers": [{"comments": [{"owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "edited": false, "score": 0, "creation_date": 1440597776, "post_id": 32228670, "comment_id": 52340024, "body": "Thank you for your help! I do have a follow-up question, which it is obviously entirely voluntary to answer: <a href=\"http://stackoverflow.com/q/32228794/126014\">stackoverflow.com/q/32228794/126014</a>"}], "tags": [], "owner": {"reputation": 2262, "user_id": 4101569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c4c64e58bc5cdeec8e7ce067131a54?s=128&d=identicon&r=PG", "display_name": "katafrakt", "link": "https://stackoverflow.com/users/4101569/katafrakt"}, "is_accepted": true, "score": 2, "last_activity_date": 1440597328, "creation_date": 1440597328, "answer_id": 32228670, "question_id": 32224128, "link": "https://stackoverflow.com/questions/32224128/error-installing-nokogiri-via-bundler-on-windows/32228670#32228670", "title": "Error installing Nokogiri via Bundler on Windows", "body": "<p>This particular version of Nokogiri is listed in Gemfile.lock. You can remove that file, run bundle install again and see if it works. </p>\n\n<p>This is more a workaround than a proper solution, but dependencies in <code>Gemfile.lock</code> are quite old so it would be a good thing to refresh them anyway.</p>\n"}], "owner": {"reputation": 208473, "user_id": 126014, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/33526616d4a11f1630d4939b769cfbf9?s=128&d=identicon&r=PG", "display_name": "Mark Seemann", "link": "https://stackoverflow.com/users/126014/mark-seemann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 613, "favorite_count": 1, "accepted_answer_id": 32228670, "answer_count": 1, "score": 2, "last_activity_date": 1440597328, "creation_date": 1440584892, "last_edit_date": 1495541738, "question_id": 32224128, "link": "https://stackoverflow.com/questions/32224128/error-installing-nokogiri-via-bundler-on-windows", "title": "Error installing Nokogiri via Bundler on Windows", "body": "<p>I'm trying to set up and run the <a href=\"https://github.com/rchatley/extreme_startup\" rel=\"nofollow noreferrer\">Extreme Startup</a> coding dojo on my Windows machine.</p>\n\n<p>When I reach the <code>bundle install</code> step, I get this error message:</p>\n\n<pre><code>$ bundle install\nFetching gem metadata from https://rubygems.org/............\nFetching version metadata from https://rubygems.org/..\nResolving dependencies...\nInstalling builder 3.2.2\nInstalling nokogiri 1.4.5 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    c:/Ruby22-x64/bin/ruby.exe -r ./siteconf20150826-3512-ilnke5.rb extconf.rb\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=c:/Ruby22-x64/bin/$(RUBY_BASE_NAME)\nextconf.rb:10:in `&lt;main&gt;': uninitialized constant Config (NameError)\n\nextconf failed, exit code 1\n\nGem files will remain installed in c:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/nokogiri-1.4.5 for inspection.\nResults logged to c:/Ruby22-x64/lib/ruby/gems/2.2.0/extensions/x64-mingw32/2.2.0/nokogiri-1.4.5/gem_make.out\nAn error occurred while installing nokogiri (1.4.5), and Bundler cannot\ncontinue.\nMake sure that `gem install nokogiri -v '1.4.5'` succeeds before bundling.\n</code></pre>\n\n<p>According to the <a href=\"http://www.nokogiri.org/tutorials/installing_nokogiri.html#windows\" rel=\"nofollow noreferrer\">documentation for Nokogiri</a>, it just ought to work, and in a sense, it does, because if I issue the command <code>gem install nokogiri</code>, it <em>does</em> work, but installs <code>nokogiri-1.6.6.2-x64-mingw32</code>.</p>\n\n<p>As I understand the error message from <code>bundle install</code>, it specifically wants version 1.4.5. At least, even with <code>nokogiri-1.6.6.2-x64-mingw32</code> installed, <code>bundle install</code> still fails with the above error message.</p>\n\n<p>This is likely to be a simple problem, but since I'm a novice ruby user, I could use some help.</p>\n\n<p>I've already tried the suggestions from <a href=\"https://stackoverflow.com/q/29020478/126014\">Error installing Nokogiri on bundle install but already installed</a>, but none of them work.</p>\n"}, {"tags": ["ruby", "spatial", "oracle-spatial"], "comments": [{"owner": {"reputation": 1280, "user_id": 1545982, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6126f899f04c410b80d91063a8f125ab?s=128&d=identicon&r=PG&f=1", "display_name": "Emz", "link": "https://stackoverflow.com/users/1545982/emz"}, "edited": false, "score": 0, "creation_date": 1440583806, "post_id": 32223681, "comment_id": 52330161, "body": "And what have you tried so far? How does your code look and work?"}, {"owner": {"reputation": 1, "user_id": 5267851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7047279bb8713e1cdca3598bf4e55945?s=128&d=identicon&r=PG&f=1", "display_name": "Charz1121", "link": "https://stackoverflow.com/users/5267851/charz1121"}, "reply_to_user": {"reputation": 1280, "user_id": 1545982, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6126f899f04c410b80d91063a8f125ab?s=128&d=identicon&r=PG&f=1", "display_name": "Emz", "link": "https://stackoverflow.com/users/1545982/emz"}, "edited": false, "score": 0, "creation_date": 1440584306, "post_id": 32223681, "comment_id": 52330493, "body": "@Emz I have used the sdo_util.extract(),but i have unknown number of elements and rings.I am new to Oracle spatial"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5267851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7047279bb8713e1cdca3598bf4e55945?s=128&d=identicon&r=PG&f=1", "display_name": "Charz1121", "link": "https://stackoverflow.com/users/5267851/charz1121"}, "edited": false, "score": 0, "creation_date": 1440601459, "post_id": 32226879, "comment_id": 52342836, "body": "It did help. Thank You. :-)"}, {"owner": {"reputation": 1842, "user_id": 505835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9765861e153a87b54bea947d3eddc836?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/505835/ben"}, "edited": false, "score": 0, "creation_date": 1440622585, "post_id": 32226879, "comment_id": 52355364, "body": "You don&#39;t need to write your own function to extract the number of elements, that&#39;s what SDO_UTIL.GETNUMELEM is for. <a href=\"http://docs.oracle.com/cd/B28359_01/appdev.111/b28400/sdo_util.htm#BJEEEJGH\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/B28359_01/appdev.111/b28400/&hellip;</a>"}], "tags": [], "owner": {"reputation": 129, "user_id": 5164808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab111c6698ebab61bc536680ab7acbb?s=128&d=identicon&r=PG&f=1", "display_name": "Ashutosh Agrawal", "link": "https://stackoverflow.com/users/5164808/ashutosh-agrawal"}, "is_accepted": true, "score": 0, "last_activity_date": 1440592565, "creation_date": 1440592565, "answer_id": 32226879, "question_id": 32223681, "link": "https://stackoverflow.com/questions/32223681/oracle-spatial-extracting-individual-rings-in-a-multipolygon/32226879#32226879", "title": "Oracle Spatial-Extracting Individual Rings in a MultiPolygon", "body": "<h2>First, You need to use a function for getting inner polygon count.</h2>\n\n<pre><code>    create or replace\nFunction GetNumRings( p_geometry  in mdsys.sdo_geometry,\n                      p_ring_type in integer default 0 /* 0 = ALL; 1 = OUTER; 2 = INNER */ )\n  Return Number\nIs\n   v_ring_count number := 0;\n   v_ring_type  number := p_ring_type;\n   v_elements   number;\n   v_etype      pls_integer;\nBegin\n   If ( p_geometry is null ) Then\n      return 0;\n   End If;\n   If ( p_geometry.sdo_elem_info is null ) Then\n      return 0;\n   End If;\n   If ( v_ring_type not in (0,1,2) ) Then\n      v_ring_type := 0;\n   End If;\n   v_elements := ( ( p_geometry.sdo_elem_info.COUNT / 3 ) - 1 );\n   &lt;&lt;element_extraction&gt;&gt;\n   for v_i IN 0 .. v_elements LOOP\n     v_etype := p_geometry.sdo_elem_info(v_i * 3 + 2);\n     If  ( v_etype in (1003,1005,2003,2005) and 0 = v_ring_type )\n      OR ( v_etype in (1003,1005)           and 1 = v_ring_type )\n      OR ( v_etype in (2003,2005)           and 2 = v_ring_type ) Then\n         v_ring_count := v_ring_count + 1;\n     end If;\n   end loop element_extraction;\n   Return v_ring_count;\nEnd GetNumRings;\n</code></pre>\n\n<p>Ref: <a href=\"http://spatialdbadvisor.com/oracle_spatial_tips_tricks/203/alternative-to-my-sql-based-getnumrings-function\" rel=\"nofollow\">GetNumRings Function for Oracle-Spatial</a></p>\n\n<h2>Then, with this count you will get inner polygons</h2>\n\n<pre><code> FOR i IN 2..countFromFunction\n    LOOP            \n        begin\n         insert into target_table(geom) \n          select SDO_UTIL.EXTRACT(t.geom,1,i) FROM source_table t;\n          exception when others then \n          continue;\n          end;\n   end loop;\n</code></pre>\n\n<p>Loop is started from 2, because 1 will get outer ring.</p>\n\n<p>Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 1842, "user_id": 505835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9765861e153a87b54bea947d3eddc836?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/505835/ben"}, "is_accepted": false, "score": 0, "last_activity_date": 1440622740, "creation_date": 1440622740, "answer_id": 32236590, "question_id": 32223681, "link": "https://stackoverflow.com/questions/32223681/oracle-spatial-extracting-individual-rings-in-a-multipolygon/32236590#32236590", "title": "Oracle Spatial-Extracting Individual Rings in a MultiPolygon", "body": "<ol>\n<li>Use <code>SDO_UTIL.GETNUMELEM</code> to work out the number of elements in a polygon or multipolygon.</li>\n<li>Extract each element with <code>SDO_UTIL.EXTRACT</code>, bearing in mind that the first element will be an outer boundary.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 911987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c93e8844a0fae49deca910e5b178095?s=128&d=identicon&r=PG", "display_name": "Elnur", "link": "https://stackoverflow.com/users/911987/elnur"}, "edited": false, "score": 0, "creation_date": 1587044106, "post_id": 32247458, "comment_id": 108358171, "body": "Archipelago example is very useful!"}, {"owner": {"reputation": 91, "user_id": 911987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c93e8844a0fae49deca910e5b178095?s=128&d=identicon&r=PG", "display_name": "Elnur", "link": "https://stackoverflow.com/users/911987/elnur"}, "edited": false, "score": 0, "creation_date": 1587082799, "post_id": 32247458, "comment_id": 108376912, "body": "In the inner loop sdo_util.getnumrings(element) worked for me i.e: for j in 1..sdo_util.getnumrings(element) loop"}], "tags": [], "owner": {"reputation": 1667, "user_id": 2895087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OAhqy.jpg?s=128&g=1", "display_name": "Albert Godfrind", "link": "https://stackoverflow.com/users/2895087/albert-godfrind"}, "is_accepted": false, "score": 2, "last_activity_date": 1440672815, "creation_date": 1440672815, "answer_id": 32247458, "question_id": 32223681, "link": "https://stackoverflow.com/questions/32223681/oracle-spatial-extracting-individual-rings-in-a-multipolygon/32247458#32247458", "title": "Oracle Spatial-Extracting Individual Rings in a MultiPolygon", "body": "<p>To be complete: <code>SDO_UTIL.GETNUMELEM()</code> returns the number of elements in a polygon, where an element is defined as being an outer ring with all its inner rings. <code>SDO_UTIL.GETNUMRINGS()</code> will give the total number of rings in the polygon (outer and inner rings).</p>\n\n<p>For example, consider a shape that represents an archipelago of three islands, and each island has two lakes. That would be a multipolygon with <strong>three elements</strong>, each one containing two holes: GETNUMELEM will return 3, GETNUMRINGS returns 9 (3 outer rings and 6 inner rings). </p>\n\n<p>So you need to be <strong>clearer about your need</strong>. If you want to split that archipelago into the three individual islands (each with its two internal lakes), then you can do as suggested in the first answer. Something like this:</p>\n\n<pre><code>create or replace procedure split_geom (geom sdo_geometry)\nas\nbegin\n  for i in 1..sdo_util.getnumelem(geom) loop            \n    insert into target_table(element_id, geom) \n    values (i, sdo_util.extract(geom,i));\n  end loop;\nend;\n/\n</code></pre>\n\n<p>On the other hand, if you want to split the entire shape into individual rings (i.e. also separate out the voids), then try this:</p>\n\n<pre><code>create or replace procedure split_geom (geom sdo_geometry)\nas\n  element sdo_geometry;\nbegin\n  for i in 1..sdo_util.getnumelem(geom) loop\n    -- Extract element (with its inner rings)\n    element := sdo_util.extract(geom,i); \n    for j in 1..sdo_util.getnumelem(element) loop \n      -- Extract ring        \n      insert into target_table(element_id, ring_id, geom) \n      values (i, j, sdo_util.extract(element,1,j));\n    end loop;\n  end loop;\nend;\n/\n</code></pre>\n\n<p>Note that when an inner ring is extracted from a polygon, it is returned as a valid single element, single ring polygon, with its ordinates re-oriented to counter-clockwise.</p>\n"}], "owner": {"reputation": 1, "user_id": 5267851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7047279bb8713e1cdca3598bf4e55945?s=128&d=identicon&r=PG&f=1", "display_name": "Charz1121", "link": "https://stackoverflow.com/users/5267851/charz1121"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 619, "favorite_count": 1, "accepted_answer_id": 32226879, "answer_count": 3, "score": 0, "last_activity_date": 1440672815, "creation_date": 1440583668, "last_edit_date": 1440584793, "question_id": 32223681, "link": "https://stackoverflow.com/questions/32223681/oracle-spatial-extracting-individual-rings-in-a-multipolygon", "title": "Oracle Spatial-Extracting Individual Rings in a MultiPolygon", "body": "<p>In a multipolygon,I need to count how many rings the polygon has,and then individually extract the rings and it's coordinates </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "angularjs", "ruby-on-rails-4", "angular-resource"], "answers": [{"comments": [{"owner": {"reputation": 15006, "user_id": 520567, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6cb1b2c58abc2116f910ec9253ee387f?s=128&d=identicon&r=PG", "display_name": "akostadinov", "link": "https://stackoverflow.com/users/520567/akostadinov"}, "reply_to_user": {"reputation": 173, "user_id": 4310813, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5b8105ce5decc4ccf3e97b3ddb82bd9d?s=128&d=identicon&r=PG&f=1", "display_name": "Trusislv1", "link": "https://stackoverflow.com/users/4310813/trusislv1"}, "edited": false, "score": 0, "creation_date": 1484312834, "post_id": 32223761, "comment_id": 70470261, "body": "@Trusislv1, also if you serve UI from same domain, protocol and port, you will not need this as the <code>pre-flight</code> OPTIONS requests would not be sent at all."}], "tags": [], "owner": {"reputation": 2449, "user_id": 2808883, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DM8gt.jpg?s=128&g=1", "display_name": "Hristo Georgiev", "link": "https://stackoverflow.com/users/2808883/hristo-georgiev"}, "is_accepted": true, "score": 18, "last_activity_date": 1440584207, "last_edit_date": 1440584207, "creation_date": 1440583877, "answer_id": 32223761, "question_id": 32223675, "link": "https://stackoverflow.com/questions/32223675/getting-actioncontrollerroutingerror-no-route-matches-options-users-when/32223761#32223761", "title": "Getting ActionController::RoutingError (No route matches [OPTIONS] &quot;/users&quot; when trying to POST data to RAils server with AngularJS", "body": "<p>Rails cannot process <code>[OPTIONS]</code> requests</p>\n\n<p>You have to install <a href=\"https://github.com/cyu/rack-cors\">rack-cors</a> to process CORS.</p>\n\n<p>Here's where your problem comes from:</p>\n\n<pre><code>  resources :users do\n    collection { post :create_user , via: :options  }\n    # via: :options ?\n\n  end\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 4310813, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5b8105ce5decc4ccf3e97b3ddb82bd9d?s=128&d=identicon&r=PG&f=1", "display_name": "Trusislv1", "link": "https://stackoverflow.com/users/4310813/trusislv1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9595, "favorite_count": 1, "accepted_answer_id": 32223761, "answer_count": 1, "score": 5, "last_activity_date": 1440584207, "creation_date": 1440583649, "question_id": 32223675, "link": "https://stackoverflow.com/questions/32223675/getting-actioncontrollerroutingerror-no-route-matches-options-users-when", "title": "Getting ActionController::RoutingError (No route matches [OPTIONS] &quot;/users&quot; when trying to POST data to RAils server with AngularJS", "body": "<p>Having issue when trying to POST data to Rails server from my AngularJS side.</p>\n\n<p><strong>The server error:</strong> </p>\n\n<pre><code>ActionController::RoutingError (No route matches [OPTIONS] \"/users\"):\n  actionpack (4.1.9) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'\n  actionpack (4.1.9) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n  railties (4.1.9) lib/rails/rack/logger.rb:38:in `call_app'\n  railties (4.1.9) lib/rails/rack/logger.rb:20:in `block in call'\n  activesupport (4.1.9) lib/active_support/tagged_logging.rb:68:in `block in tagged'\n  activesupport (4.1.9) lib/active_support/tagged_logging.rb:26:in `tagged'\n  activesupport (4.1.9) lib/active_support/tagged_logging.rb:68:in `tagged'\n  railties (4.1.9) lib/rails/rack/logger.rb:20:in `call'\n  actionpack (4.1.9) lib/action_dispatch/middleware/request_id.rb:21:in `call'\n  rack (1.5.5) lib/rack/methodoverride.rb:21:in `call'\n  rack (1.5.5) lib/rack/runtime.rb:17:in `call'\n  activesupport (4.1.9) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'\n  rack (1.5.5) lib/rack/lock.rb:17:in `call'\n  actionpack (4.1.9) lib/action_dispatch/middleware/static.rb:84:in `call'\n  rack (1.5.5) lib/rack/sendfile.rb:112:in `call'\n  railties (4.1.9) lib/rails/engine.rb:514:in `call'\n  railties (4.1.9) lib/rails/application.rb:144:in `call'\n  rack (1.5.5) lib/rack/content_length.rb:14:in `call'\n  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'\n  thin (1.6.3) lib/thin/connection.rb:84:in `catch'\n  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'\n  thin (1.6.3) lib/thin/connection.rb:53:in `process'\n  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'\n  eventmachine (1.0.8) lib/eventmachine.rb:193:in `run_machine'\n  eventmachine (1.0.8) lib/eventmachine.rb:193:in `run'\n  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'\n  thin (1.6.3) lib/thin/server.rb:162:in `start'\n  rack (1.5.5) lib/rack/handler/thin.rb:16:in `run'\n  rack (1.5.5) lib/rack/server.rb:264:in `start'\n  railties (4.1.9) lib/rails/commands/server.rb:69:in `start'\n  railties (4.1.9) lib/rails/commands/commands_tasks.rb:81:in `block in server'\n  railties (4.1.9) lib/rails/commands/commands_tasks.rb:76:in `tap'\n  railties (4.1.9) lib/rails/commands/commands_tasks.rb:76:in `server'\n  railties (4.1.9) lib/rails/commands/commands_tasks.rb:40:in `run_command!'\n  railties (4.1.9) lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n  bin/rails:8:in `require'\n  bin/rails:8:in `&lt;top (required)&gt;'\n  spring (1.3.6) lib/spring/client/rails.rb:28:in `load'\n  spring (1.3.6) lib/spring/client/rails.rb:28:in `call'\n  spring (1.3.6) lib/spring/client/command.rb:7:in `call'\n  spring (1.3.6) lib/spring/client.rb:26:in `run'\n  spring (1.3.6) bin/spring:48:in `&lt;top (required)&gt;'\n  spring (1.3.6) lib/spring/binstub.rb:11:in `load'\n  spring (1.3.6) lib/spring/binstub.rb:11:in `&lt;top (required)&gt;'\n  bin/spring:13:in `require'\n  bin/spring:13:in `&lt;top (required)&gt;'\n  bin/rails:3:in `load'\n  bin/rails:3:in `&lt;main&gt;'\n</code></pre>\n\n<p>So here will be my Rails server controllers and routes files.</p>\n\n<p><strong>User Controller</strong></p>\n\n<pre><code>class UsersController &lt; ApplicationController\n\n  def index\n    respond_to do |format|\n      format.json {render json: { name: 'Jonhy'}, callback: params[:callback]}\n    end\n  end\n\n  def new\n\n  end\n\n  def create_user\n    puts user_params\n    @user = User.new(user_params)\n    if @user.save\n      render json: { error: false }, layout: false\n    else\n      render json: { error: true }, layout: false\n    end\n  end\n\n  def show\n\n  end\n\n  def user_params\n    params.require(:user).permit(:email, :password, :password_confirmation)\n  end\nend\n</code></pre>\n\n<p><strong>Application Controller</strong></p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  # Prevent CSRF attacks by raising an exception.\n  # For APIs, you may want to use :null_session instead.\n  protect_from_forgery with: :exception\n\n  before_filter :allow_ajax_request_from_other_domains\n\n def allow_ajax_request_from_other_domains\n   headers['Access-Control-Allow-Origin'] = 'http://localhost:8001'\n   headers['Access-Control-Request-Method'] = '*'\n   headers['Access-Control-Allow-Headers'] = '*'\n end\nend\n</code></pre>\n\n<p><strong>Routs</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n\n  root 'home#index'\n  resources :users do\n    collection { post :create_user , via: :options  }\n  end\nend\n</code></pre>\n\n<p>And here is my AngularJS where i make the POST Ajax.</p>\n\n<pre><code>var App = angular.module('OutOfBox', ['ng.deviceDetector','ngRoute','ngResource']);\nApp.factory('Users',\n\n  function($resource){\n    var users =\n     $resource('http://127.0.0.1\\\\:8001/:user', {user:'users'}, {\n        query: {method:'GET', isArray: true},\n        save: {method:'POST', isArray: false}\n     });\n     return users;\n  }\n);\nApp.controller('MainCtrl', ['$scope','$http','Users', function($scope,$http,Users) {\n    $scope.user = [];\n    $scope.responsive = [];\n    $scope.submit = function() {\n      if ($scope.users.email &amp;&amp; $scope.users.password &amp;&amp; $scope.users.password_confirmation) {\n        $scope.user.push(this.users);\n         Users.save({user: $scope.user}, function(){\n         console.log(':)')\n        }, function(error){\n          console.log(error)\n        });\n        $scope.users = '';\n      }\n    };\n}]);\n\nApp.config(['$routeProvider','$locationProvider','$httpProvider',\n  function($routeProvider, $locationProvider, $httpProvider) {\n    $routeProvider.\n      when('/home', {\n        templateUrl: 'views/main.html',\n        controller: 'MainCtrl'\n      }).\n      otherwise({\n        redirectTo: '/home'\n      });\n              // use the HTML5 History API\n        $locationProvider.html5Mode(true);\n        $httpProvider.defaults.useXDomain = true;\ndelete $httpProvider.defaults.headers.common[\"X-Requested-With\"];\n  }]);\n</code></pre>\n\n<p>So i tried a lot solutions but no one fixed my.</p>\n"}, {"tags": ["java", "ruby"], "comments": [{"owner": {"reputation": 1814, "user_id": 5006469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7b557baad76e9fca74ff4d0d1aac568a?s=128&d=identicon&r=PG&f=1", "display_name": "rdupz", "link": "https://stackoverflow.com/users/5006469/rdupz"}, "edited": false, "score": 0, "creation_date": 1600617232, "post_id": 32222963, "comment_id": 113137777, "body": "It&#39;s 09/2020 and Java&#39;s API is still lacking this, while this data driven world needs more and more batches &amp; chunks. I miss Ruby every time I use Java."}], "answers": [{"tags": [], "owner": {"reputation": 10274, "user_id": 930207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oy7Q3.png?s=128&g=1", "display_name": "mcfinnigan", "link": "https://stackoverflow.com/users/930207/mcfinnigan"}, "is_accepted": false, "score": 0, "last_activity_date": 1440583138, "creation_date": 1440583138, "answer_id": 32223484, "question_id": 32222963, "link": "https://stackoverflow.com/questions/32222963/is-there-a-way-to-do-the-ruby-each-slice-in-java-8/32223484#32223484", "title": "Is there a way to do the Ruby each_slice in Java 8?", "body": "<p>There is, but there's no elegant one-method way of doing it that I'm aware of.  You'd need to write your own array slice method, something like this (nasty, inelegant way):</p>\n\n<pre><code>public static int[][] slice(int[] source, int n) {\n    List&lt;int[]&gt; results = new ArrayList&lt;int[]&gt;();\n\n    int len = (source.length % n == 0 ? source.length/n : source.length / n + 1);\n\n    for(int i = 0; i &lt; len; i++) {\n        results.add(Arrays.copyOfRange(source, i * n, (i+1 == len ? source.length : (i+1)*len)));\n    }\n\n    return results.toArray(new int[][]{});\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1811, "user_id": 4572590, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh5.googleusercontent.com/-AdTOTTXucYE/AAAAAAAAAAI/AAAAAAAAADo/0jguQ7fG9SY/photo.jpg?sz=128", "display_name": "griFlo", "link": "https://stackoverflow.com/users/4572590/griflo"}, "reply_to_user": {"reputation": 18675, "user_id": 1216775, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/gX53v.jpg?s=128&g=1", "display_name": "akhil_mittal", "link": "https://stackoverflow.com/users/1216775/akhil-mittal"}, "edited": false, "score": 0, "creation_date": 1440584232, "post_id": 32223666, "comment_id": 52330446, "body": "@akhil_mittal you need Java 8 for this"}, {"owner": {"reputation": 18675, "user_id": 1216775, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/gX53v.jpg?s=128&g=1", "display_name": "akhil_mittal", "link": "https://stackoverflow.com/users/1216775/akhil-mittal"}, "edited": false, "score": 0, "creation_date": 1440584270, "post_id": 32223666, "comment_id": 52330465, "body": "@Flown It complains of cyclic inference on my machine. And yes I am on Java 8."}, {"owner": {"reputation": 10389, "user_id": 4105457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9ef298504ee9556c9532d3c7f3a3263?s=128&d=identicon&r=PG&f=1", "display_name": "Flown", "link": "https://stackoverflow.com/users/4105457/flown"}, "reply_to_user": {"reputation": 18675, "user_id": 1216775, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/gX53v.jpg?s=128&g=1", "display_name": "akhil_mittal", "link": "https://stackoverflow.com/users/1216775/akhil-mittal"}, "edited": false, "score": 0, "creation_date": 1440584351, "post_id": 32223666, "comment_id": 52330525, "body": "@akhil_mittal Where is the cyclic inference? I&#39;m running Java 1.8.0_51"}, {"owner": {"reputation": 18675, "user_id": 1216775, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/gX53v.jpg?s=128&g=1", "display_name": "akhil_mittal", "link": "https://stackoverflow.com/users/1216775/akhil-mittal"}, "edited": false, "score": 0, "creation_date": 1440584677, "post_id": 32223666, "comment_id": 52330733, "body": "@Flown I am using JDK 1.8.0_31"}, {"owner": {"reputation": 10389, "user_id": 4105457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9ef298504ee9556c9532d3c7f3a3263?s=128&d=identicon&r=PG&f=1", "display_name": "Flown", "link": "https://stackoverflow.com/users/4105457/flown"}, "reply_to_user": {"reputation": 18675, "user_id": 1216775, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/gX53v.jpg?s=128&g=1", "display_name": "akhil_mittal", "link": "https://stackoverflow.com/users/1216775/akhil-mittal"}, "edited": false, "score": 0, "creation_date": 1440584788, "post_id": 32223666, "comment_id": 52330794, "body": "@akhil_mittal Again: Where is the cyclic inference?"}, {"owner": {"reputation": 18675, "user_id": 1216775, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/gX53v.jpg?s=128&g=1", "display_name": "akhil_mittal", "link": "https://stackoverflow.com/users/1216775/akhil-mittal"}, "edited": false, "score": 0, "creation_date": 1440584846, "post_id": 32223666, "comment_id": 52330840, "body": "@Flown: IntelliJ complains of cyclic reference in <code>mapToObj</code> statement."}, {"owner": {"reputation": 10389, "user_id": 4105457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9ef298504ee9556c9532d3c7f3a3263?s=128&d=identicon&r=PG&f=1", "display_name": "Flown", "link": "https://stackoverflow.com/users/4105457/flown"}, "reply_to_user": {"reputation": 18675, "user_id": 1216775, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/gX53v.jpg?s=128&g=1", "display_name": "akhil_mittal", "link": "https://stackoverflow.com/users/1216775/akhil-mittal"}, "edited": false, "score": 0, "creation_date": 1440584972, "post_id": 32223666, "comment_id": 52330919, "body": "@akhil_mittal Compile it with your command line and see what happens. Obviously there is no cyclic reference in it."}], "tags": [], "owner": {"reputation": 10389, "user_id": 4105457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9ef298504ee9556c9532d3c7f3a3263?s=128&d=identicon&r=PG&f=1", "display_name": "Flown", "link": "https://stackoverflow.com/users/4105457/flown"}, "is_accepted": false, "score": 1, "last_activity_date": 1440583630, "creation_date": 1440583630, "answer_id": 32223666, "question_id": 32222963, "link": "https://stackoverflow.com/questions/32222963/is-there-a-way-to-do-the-ruby-each-slice-in-java-8/32223666#32223666", "title": "Is there a way to do the Ruby each_slice in Java 8?", "body": "<p>I came up with this solution:</p>\n\n<pre><code>public static int[][] slice(int[] arr, int n) {\n    return IntStream.range(0, (int) Math.ceil((double) arr.length / n))\n            .mapToObj(i -&gt; Arrays.copyOfRange(arr, i * n, Math.min((i + 1) * n, arr.length)))\n            .toArray(int[][]::new);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18675, "user_id": 1216775, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/gX53v.jpg?s=128&g=1", "display_name": "akhil_mittal", "link": "https://stackoverflow.com/users/1216775/akhil-mittal"}, "is_accepted": false, "score": 0, "last_activity_date": 1440589100, "creation_date": 1440589100, "answer_id": 32225632, "question_id": 32222963, "link": "https://stackoverflow.com/questions/32222963/is-there-a-way-to-do-the-ruby-each-slice-in-java-8/32225632#32225632", "title": "Is there a way to do the Ruby each_slice in Java 8?", "body": "<p>I have liked the solution proposed by Flown above but somehow it does not compile in my IntelliJ. I have used his solution only to modify it a little and have written method <code>sliceUsingJavaStreams</code> below. Another thing with my code is it works even when array cannot be sliced completely e.g an array with elements <code>{1,2,3,4,5,6,7,8,9,10}</code> will be sliced as <code>[[1, 2, 3], [4, 5, 6], [7, 8, 9], [10]]</code> in the following code:</p>\n\n<h2>Without Using Streams:</h2>\n\n<pre><code>public static int[][] slice(int[] array, int sliceSize) {\n        int slicesCount = (int) Math.ceil(array.length/(double)sliceSize);\n        int[][] results = new int[slicesCount][];\n        int[] sliceArray;\n        int index = 0;\n        for(int i=array.length; i&gt;0; i=i-sliceSize) {\n            int start = array.length-i;\n            int last = ((start+sliceSize) &lt; array.length)? (start+sliceSize) : (array.length);\n            sliceArray = Arrays.copyOfRange(array,start,last);\n            results[index++] = sliceArray;\n        }\n        return results;\n    }\n</code></pre>\n\n<h2>Using Streams:</h2>\n\n<pre><code>public static int[][] sliceUsingJavaStreams(int[] arr, int n) {\n        return IntStream.range(0, (int) Math.ceil(arr.length / (double) n))\n                .mapToObj(new IntFunction&lt;int[]&gt;() {\n                    @Override\n                    public int[] apply(int i) {\n                        return Arrays.copyOfRange(arr, i * n, Math.min((i + 1) * n, arr.length));\n                    }\n                }).toArray(int[][]::new);\n    }\n</code></pre>\n\n<p>Now I can test them as:</p>\n\n<pre><code>public static void main(String[] args) {\n        int[] array = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};\n        final int n = 3;\n        int[][] slicedArrayOne = slice(array,3);\n        int[][] slicedArrayTwo = sliceUsingJavaStreams(array,3);\n        System.out.println(Arrays.deepToString(slicedArrayOne));\n        System.out.println(Arrays.deepToString(slicedArrayTwo));\n    }\n</code></pre>\n\n<p>And the output is:</p>\n\n<p><code>[[1, 2, 3], [4, 5, 6], [7, 8, 9], [10]]\n[[1, 2, 3], [4, 5, 6], [7, 8, 9], [10]]</code></p>\n"}, {"tags": [], "owner": {"reputation": 8255, "user_id": 3432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cb106209fe57b4e2a494bf136abcb37c?s=128&d=identicon&r=PG", "display_name": "Wouter Coekaerts", "link": "https://stackoverflow.com/users/3432/wouter-coekaerts"}, "is_accepted": false, "score": 0, "last_activity_date": 1444947332, "creation_date": 1444947332, "answer_id": 33159418, "question_id": 32222963, "link": "https://stackoverflow.com/questions/32222963/is-there-a-way-to-do-the-ruby-each-slice-in-java-8/33159418#33159418", "title": "Is there a way to do the Ruby each_slice in Java 8?", "body": "<p>If you don't mind depending on the excellent Guava library, you can use <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Lists.html#partition(java.util.List,%20int)\" rel=\"nofollow\">Lists.partition</a> or <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Iterables.html#partition(java.lang.Iterable,%20int)\" rel=\"nofollow\">Iterables.partition</a></p>\n"}, {"tags": [], "owner": {"reputation": 183757, "user_id": 20654, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94066dfa49c2feb14706cb081848fda7?s=128&d=identicon&r=PG", "display_name": "OscarRyz", "link": "https://stackoverflow.com/users/20654/oscarryz"}, "is_accepted": false, "score": 0, "last_activity_date": 1444950937, "creation_date": 1444950937, "answer_id": 33160058, "question_id": 32222963, "link": "https://stackoverflow.com/questions/32222963/is-there-a-way-to-do-the-ruby-each-slice-in-java-8/33160058#33160058", "title": "Is there a way to do the Ruby each_slice in Java 8?", "body": "<p>Shouldn't be hard to add. </p>\n\n<p>Iterate the input. Every n elements add a new bucke. Add the item there:</p>\n\n<pre><code>public static &lt;T&gt; List&lt;List&lt;T&gt;&gt; eachSlice(List&lt;T&gt; input, int size) {\n\n    List&lt;List&lt;T&gt;&gt; r = new ArrayList&lt;List&lt;T&gt;&gt;();\n\n    for( int i = 0 ; i &lt; input.size(); i++ ) { // iterate input\n        if ( i % size == 0 ) {                 // every n elements\n            r.add(new ArrayList&lt;T&gt;());         // add bucket\n        }\n        r.get(r.size()-1).add(input.get(i));   // add current element to bucket\n    }\n\n    return r;\n}\n</code></pre>\n\n<p>The you can <code>import static</code> this function and use it, e.g.</p>\n\n<pre><code>import static java.lang.System.out;\nimport static something.Util.eachSlice;\nclass Main {\n    public static void main( String ... args ) {\n        List&lt;Integer&gt; input = Arrays.asList(1,2,3,4,5,6,7,8,9,10);\n        List&lt;List&lt;Integer&gt;&gt; output  = eachSlice( input , 3);\n        out.println( output );\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[[1, 2, 3], [4, 5, 6], [7, 8, 9], [10]]\n</code></pre>\n"}], "owner": {"reputation": 2337, "user_id": 231513, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c356fae93d62118b01f5a85ae7adbf19?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/231513/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 457, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1444950937, "creation_date": 1440581681, "last_edit_date": 1444948482, "question_id": 32222963, "link": "https://stackoverflow.com/questions/32222963/is-there-a-way-to-do-the-ruby-each-slice-in-java-8", "title": "Is there a way to do the Ruby each_slice in Java 8?", "body": "<p>If I have an array</p>\n\n<pre><code>[1, 2, 3, 4, 5, 6, 7, 8, 9]\n</code></pre>\n\n<p>And want to split this into to groups of 3, I can use .each_slice(3) as follows</p>\n\n<pre><code>[1, 2, 3, 4, 5, 6, 7, 8, 9].each_slice(3).to_a =&gt; [[1, 2, 3], [4, 5, 6], [7, 8, 9]]\n</code></pre>\n\n<p>Is there a way I can do something similar in Java 8?</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-each_slice\" rel=\"nofollow\">Ruby enumerable each_slice</a></p>\n"}, {"tags": ["android", "ruby", "build.gradle"], "answers": [{"tags": [], "owner": {"reputation": 554, "user_id": 5112643, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3c24541517cb7582ca9f488c697a5fe9?s=128&d=identicon&r=PG&f=1", "display_name": "Euphor08", "link": "https://stackoverflow.com/users/5112643/euphor08"}, "is_accepted": true, "score": 0, "last_activity_date": 1442828909, "creation_date": 1442828909, "answer_id": 32692105, "question_id": 32222424, "link": "https://stackoverflow.com/questions/32222424/run-a-rubys-script-using-gradle/32692105#32692105", "title": "Run a Ruby&#39;s script using Gradle", "body": "<p>the answer was the version of gradle was older, after updating the gradle the problem resolved.</p>\n"}], "owner": {"reputation": 554, "user_id": 5112643, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3c24541517cb7582ca9f488c697a5fe9?s=128&d=identicon&r=PG&f=1", "display_name": "Euphor08", "link": "https://stackoverflow.com/users/5112643/euphor08"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 879, "favorite_count": 0, "accepted_answer_id": 32692105, "answer_count": 1, "score": 1, "last_activity_date": 1442828909, "creation_date": 1440580195, "question_id": 32222424, "link": "https://stackoverflow.com/questions/32222424/run-a-rubys-script-using-gradle", "title": "Run a Ruby&#39;s script using Gradle", "body": "<p>I used <a href=\"http://jruby-gradle.org/\" rel=\"nofollow\">Jruby</a> in Gradle to run my script, but it gives me this error :</p>\n\n<blockquote>\n  <p>Error:(16, 0) Gradle DSL method not found: 'jrubyExec()' Possible\n  causes:<li>The project 'AppBusiness' may be using a version of\n  Gradle that does not contain the method. Gradle settings</li><li>The build file\n  may be missing a Gradle plugin.</p>\n</blockquote>\n\n<p>this is my build.gradle</p>\n\n<pre><code>apply plugin: \"com.github.jruby-gradle.base\"\n\nimport com.**github**.jrubygradle.JRubyExec   --This github is red\ntask printSomePrettyOutputPlease(type: JRubyExec) {\ndescription \"Execute our nice local print-script.rb\"\nscript \"print-script.rb\"\n} \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 1, "creation_date": 1440580277, "post_id": 32222374, "comment_id": 52327647, "body": "<code>CREATE EXTENSION</code> was introduced with Postgres 9.1"}, {"owner": {"reputation": 2424, "user_id": 4604645, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yQczD.png?s=128&g=1", "display_name": "The Fabio", "link": "https://stackoverflow.com/users/4604645/the-fabio"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1440580344, "post_id": 32222374, "comment_id": 52327692, "body": "that is a relief... should i downgrade the pg gem?"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1440580397, "post_id": 32222374, "comment_id": 52327742, "body": "it&#39;s is not about the <code>pg</code> gem, it&#39;s all about Postgres database itself. <code>pg</code> gem it&#39;s just the ruby wrapper for <code>Postgres</code> database."}, {"owner": {"reputation": 6388, "user_id": 45254, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a8126f7b02a2fb9038f05158320fbace?s=128&d=identicon&r=PG", "display_name": "Krule", "link": "https://stackoverflow.com/users/45254/krule"}, "edited": false, "score": 0, "creation_date": 1440580402, "post_id": 32222374, "comment_id": 52327744, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/20723100/why-can-only-a-superuser-create-extension-hstore-but-not-on-heroku\">Why can only a superuser CREATE EXTENSION hstore, but not on Heroku?</a>"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1440580416, "post_id": 32222374, "comment_id": 52327759, "body": "Also related to <a href=\"http://stackoverflow.com/questions/13410631/how-to-solve-privileges-issues-when-restore-postgresql-database\" title=\"how to solve privileges issues when restore postgresql database\">stackoverflow.com/questions/13410631/&hellip;</a>"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1440580570, "post_id": 32222374, "comment_id": 52327861, "body": "why you just do not do the migration? <code>RAILS_ENV=production bundle exec rake db:migrate</code>"}, {"owner": {"reputation": 2424, "user_id": 4604645, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yQczD.png?s=128&g=1", "display_name": "The Fabio", "link": "https://stackoverflow.com/users/4604645/the-fabio"}, "edited": false, "score": 0, "creation_date": 1440580575, "post_id": 32222374, "comment_id": 52327865, "body": "I understand that \u0417\u0435\u043b\u0451\u043d\u044b\u0439, but there is nothing i can do with the db server itself.... is there nothing i can do on rails side?"}, {"owner": {"reputation": 2424, "user_id": 4604645, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yQczD.png?s=128&g=1", "display_name": "The Fabio", "link": "https://stackoverflow.com/users/4604645/the-fabio"}, "edited": false, "score": 0, "creation_date": 1440581568, "post_id": 32222374, "comment_id": 52328528, "body": "OK... the <code>rake db:migrate</code> command did it (some many other errors happened in this adventure with his provider that i even forgot to go simple) if you wish I can mark your answer as solution."}, {"owner": {"reputation": 257364, "user_id": 398670, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85f50c23bb5e9dfb061af5032bfe8e65?s=128&d=identicon&r=PG", "display_name": "Craig Ringer", "link": "https://stackoverflow.com/users/398670/craig-ringer"}, "edited": false, "score": 0, "creation_date": 1440595610, "post_id": 32222374, "comment_id": 52338359, "body": "Your hosting provider should provide a less prehistoric version of PostgreSQL. If this is a new app deployment then it&#39;s absurd to use 8.4. It&#39;d be like designing a new app to run on Windows XP."}], "answers": [{"tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": true, "score": 1, "last_activity_date": 1440581648, "creation_date": 1440581648, "answer_id": 32222946, "question_id": 32222374, "link": "https://stackoverflow.com/questions/32222374/minimum-privileges-to-run-a-rails-db-migration-with-postgresql/32222946#32222946", "title": "Minimum privileges to run a rails db migration with PostgreSQL", "body": "<p><code>CREATE EXTENSION</code> was introduced with Postgres 9.1, i suggest you to run migrations:</p>\n\n<pre><code>RAILS_ENV=production bundle exec rake db:migrate\n</code></pre>\n"}], "owner": {"reputation": 2424, "user_id": 4604645, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yQczD.png?s=128&g=1", "display_name": "The Fabio", "link": "https://stackoverflow.com/users/4604645/the-fabio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 574, "favorite_count": 0, "accepted_answer_id": 32222946, "answer_count": 1, "score": 1, "last_activity_date": 1538671302, "creation_date": 1440580036, "last_edit_date": 1538671302, "question_id": 32222374, "link": "https://stackoverflow.com/questions/32222374/minimum-privileges-to-run-a-rails-db-migration-with-postgresql", "title": "Minimum privileges to run a rails db migration with PostgreSQL", "body": "<p>I enrolled into a web-host plan so I could have my rails apps published. They provided me with a server and access to it. This is a shared CentOS Linux server and I can access its bash.</p>\n\n<p>I was trying to load my database schema into the postgres database (v8.4) they are offering but it gives me an error when doing so.\nWhen I execute:</p>\n\n<pre><code> RAILS_ENV=production rake db:schema:load\n</code></pre>\n\n<p>The following error is generated:</p>\n\n<pre><code>-- enable_extension(\"plpgsql\")\nrake aborted!\nActiveRecord::StatementInvalid: PG::SyntaxError: ERROR:  syntax error at or near \"EXTENSION\"\nLINE 1: CREATE EXTENSION IF NOT EXISTS \"plpgsql\"\n               ^\n: CREATE EXTENSION IF NOT EXISTS \"plpgsql\"\n/home/user/path-to-app/db/schema.rb:17:in `block in &lt;top (required)&gt;'\n/home/user/path-to-app/db/schema.rb:14:in `&lt;top (required)&gt;'\nPG::SyntaxError: ERROR:  syntax error at or near \"EXTENSION\"\nLINE 1: CREATE EXTENSION IF NOT EXISTS \"plpgsql\"\n               ^\n/home/user/path-to-app/db/schema.rb:17:in `block in &lt;top (required)&gt;'\n/home/user/path-to-app/db/schema.rb:14:in `&lt;top (required)&gt;'\nTasks: TOP =&gt; db:schema:load\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>Because the web-host provider does not allow many db privileges, and due to my unfamiliarity with PostgreSQL, I would prefer a solution changing something on the rails side...</p>\n\n<p>Is there something I can do on the rails side to work around (or hopefully address) this issue?</p>\n\n<p>If nothing can be really done from the rails side I would have to be specific with the privileges necessary.</p>\n\n<p>This PostgreSQL <a href=\"http://www.postgresql.org/docs/9.1/static/sql-createextension.html\" rel=\"nofollow noreferrer\">EXTENSION object</a> seems to demand privileges my db user does not have...</p>\n\n<p>What would be the minimum privileges for the rails database user running the db migration in PostgeSQL? </p>\n\n<h2>Update</h2>\n\n<p>This is about PostgreSQL 8.4, witch according to the comments here do not have the \"CREATE EXTENSION\" command.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 366, "user_id": 1124177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d20c3b09bb03d1c1c93e435f5324bbc9?s=128&d=identicon&r=PG", "display_name": "dipak gupta", "link": "https://stackoverflow.com/users/1124177/dipak-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1440587882, "creation_date": 1440587882, "answer_id": 32225197, "question_id": 32222224, "link": "https://stackoverflow.com/questions/32222224/rails-rendering-a-javascript-file/32225197#32225197", "title": "Rails - rendering a javascript file", "body": "<p>Try this:</p>\n\n<p>Create a before filter and make changes in request format:</p>\n\n<pre><code>before_filter :set_js_request_format\n\ndef set_js_request_format\n  request.format = :js\nend \n</code></pre>\n\n<p>Hope it is helpful for you. </p>\n"}], "owner": {"reputation": 3396, "user_id": 830423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f6599cf254cbedf57c3c5e85e26c03bd?s=128&d=identicon&r=PG", "display_name": "Alon", "link": "https://stackoverflow.com/users/830423/alon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440587882, "creation_date": 1440579645, "last_edit_date": 1440579886, "question_id": 32222224, "link": "https://stackoverflow.com/questions/32222224/rails-rendering-a-javascript-file", "title": "Rails - rendering a javascript file", "body": "<p>I'm new to Ruby &amp; I'm struggling serving a javascript file and executing it.</p>\n\n<p>I'm trying to build an embeddable widget so when someone runs mydomain.com/widget.js, he will get the javascript file which will execute after fetching it</p>\n\n<p>loader.js.erb content:</p>\n\n<pre><code>(function(global) {\n  var WIDGET = WIDGET || {};\n\n  WIDGET.version = '0.1';\n})(this);\n</code></pre>\n\n<p>router.rb content:</p>\n\n<pre><code>get 'widget.js' =&gt; 'application#test'\n</code></pre>\n\n<p>application_controller.rb content:</p>\n\n<pre><code>def test\n    render template: 'loader.js.erb', status: :ok,  content_type:'text/javascript'\nend\n</code></pre>\n\n<p>I'm expecting after calling for mydomain.com/widget.js, to see WIDGET in the global object, but at the moment it renders it as HTML</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "controller", "action", "response"], "answers": [{"comments": [{"owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "edited": false, "score": 0, "creation_date": 1440580896, "post_id": 32222537, "comment_id": 52328090, "body": "does this method switch the response content according request dataType?"}, {"owner": {"reputation": 2449, "user_id": 2808883, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DM8gt.jpg?s=128&g=1", "display_name": "Hristo Georgiev", "link": "https://stackoverflow.com/users/2808883/hristo-georgiev"}, "reply_to_user": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "edited": false, "score": 0, "creation_date": 1440581751, "post_id": 32222537, "comment_id": 52328660, "body": "Unfortunately no. If you want to use different respond formats, you still have to use respond_to blocks. I updated my answer to give you a better perspective on your question"}, {"owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "edited": false, "score": 0, "creation_date": 1440582395, "post_id": 32222537, "comment_id": 52329107, "body": "but I have read somewhere that its not good to write logics inside the <code>respond_to</code> block. Does not my first approach violate this convention?"}, {"owner": {"reputation": 2449, "user_id": 2808883, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DM8gt.jpg?s=128&g=1", "display_name": "Hristo Georgiev", "link": "https://stackoverflow.com/users/2808883/hristo-georgiev"}, "reply_to_user": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "edited": false, "score": 0, "creation_date": 1440583106, "post_id": 32222537, "comment_id": 52329625, "body": "I don&#39;t know where you read this (perhaps if you  provide a source that&#39;d be great) , but style-wise, the second method of writing is inefficient"}, {"owner": {"reputation": 2449, "user_id": 2808883, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DM8gt.jpg?s=128&g=1", "display_name": "Hristo Georgiev", "link": "https://stackoverflow.com/users/2808883/hristo-georgiev"}, "reply_to_user": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "edited": false, "score": 0, "creation_date": 1440583179, "post_id": 32222537, "comment_id": 52329696, "body": "Additionally, you&#39;re going to use a response anyway, regardless if the conditional gives true or false. So in performance terms, I don&#39;t think it matters either."}], "tags": [], "owner": {"reputation": 2449, "user_id": 2808883, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DM8gt.jpg?s=128&g=1", "display_name": "Hristo Georgiev", "link": "https://stackoverflow.com/users/2808883/hristo-georgiev"}, "is_accepted": false, "score": 1, "last_activity_date": 1440581922, "last_edit_date": 1440581922, "creation_date": 1440580494, "answer_id": 32222537, "question_id": 32222135, "link": "https://stackoverflow.com/questions/32222135/ruby-on-rails-is-multiple-respond-to-block-good-in-an-action-best-practice/32222537#32222537", "title": "Ruby on Rails : is multiple respond_to block good in an action : best practice", "body": "<p>That's a lot of code for a controller action in my opinion. Rails was built with the <a href=\"https://en.wikipedia.org/wiki/Don%27t_repeat_yourself\" rel=\"nofollow\">DRY</a> methodology in mind, so you can try something like this:</p>\n\n<p>if you put this:</p>\n\n<pre><code>class SomeController &lt; ApplicationController\n  respond_to :html, :json , :js\n</code></pre>\n\n<p>In the beginning of your controller, you can make your actions much slimmer:</p>\n\n<pre><code>def someaction\n if aplicant.id.nil?\n  redirect_to applicant_path(params[:id])\n end\n else\n    flash[:notice] = \"Applicant already assigned\" \n end\nend \n</code></pre>\n\n<p><a href=\"http://www.justinweiss.com/blog/2014/11/03/respond-to-without-all-the-pain/\" rel=\"nofollow\">Read more about rails responses in this article.</a></p>\n\n<p>To directly answer your question:\n  The first option with the single <code>respond_to</code> block is more reasonable because it involves writing less code. As I mentioned earlier, Rails is all about avoiding repetition, and two response blocks in a conditional operator are against the style of writing Rails apps.</p>\n"}], "owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1296, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1440581922, "creation_date": 1440579395, "question_id": 32222135, "link": "https://stackoverflow.com/questions/32222135/ruby-on-rails-is-multiple-respond-to-block-good-in-an-action-best-practice", "title": "Ruby on Rails : is multiple respond_to block good in an action : best practice", "body": "<p>I need to do condition check whether to render this or that. \nIs it good to wrap condition checks with <code>respond_to</code> block?\nlike</p>\n\n<pre><code>   respond_to do |format|\n     if @applicant.user_id.nil?\n       # Some logic\n       format.js\n       format.html { redirect_to applicant_path(params[:id]) }\n     else\n       format.json { render json: {message: t('_applicants.flash.applicant_already_assigned')}, status: 400 }\n     end\n   end\n</code></pre>\n\n<p>or </p>\n\n<p>I shall have multiple <code>respond_to</code> block inside if..else \nlike</p>\n\n<pre><code>if @applicant.user_id.nil?\n  # Some logic\n  respond_to do |format|\n    format.js\n    format.html { redirect_to applicant_path(params[:id]) }\n  end\nelse\n  respond_to do |format|\n    format.json { render json: {message: t('_applicants.flash.applicant_already_assigned')}, status: 400 }\n  end\nend\n</code></pre>\n\n<p>What would be the recommended best approach?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sql-server", "ruby-on-rails-3", "devise"], "comments": [{"owner": {"reputation": 10289, "user_id": 15394, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/9757acb5b356cbf87576c2005f2cf33c?s=128&d=identicon&r=PG", "display_name": "glenatron", "link": "https://stackoverflow.com/users/15394/glenatron"}, "edited": false, "score": 0, "creation_date": 1440580870, "post_id": 32221801, "comment_id": 52328074, "body": "Rails against SQL Server plays against the strengths of both platforms. Weird thing for them to want to do."}], "answers": [{"tags": [], "owner": {"reputation": 1305, "user_id": 623919, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7d2113d86e7a9b16e8cac6956096bf0?s=128&d=identicon&r=PG", "display_name": "Axel Tetzlaff", "link": "https://stackoverflow.com/users/623919/axel-tetzlaff"}, "is_accepted": true, "score": 1, "last_activity_date": 1440584128, "creation_date": 1440584128, "answer_id": 32223850, "question_id": 32221801, "link": "https://stackoverflow.com/questions/32221801/ruby-on-rails-and-microsoft-sql-server/32223850#32223850", "title": "Ruby on Rails and Microsoft SQL server", "body": "<p>We're using this adapter in our project. Yes, you can use the 'normal way' to map you're models. Although we're only using it to read from the database I'm pretty sure the writes work the usual way as well.</p>\n\n<p>If devise works strongly depends on the presence of the columns that devise expects.</p>\n\n<p>Getting a MS Sql Server to run under OSX will be tricky enough. I'm not sure there are any trial licenses.</p>\n"}], "owner": {"reputation": 1618, "user_id": 4390569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/45e5cbdbb0918c604054719dcd4d8e96?s=128&d=identicon&r=PG&f=1", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/4390569/kelvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 32223850, "answer_count": 1, "score": 0, "last_activity_date": 1440584128, "creation_date": 1440578417, "question_id": 32221801, "link": "https://stackoverflow.com/questions/32221801/ruby-on-rails-and-microsoft-sql-server", "title": "Ruby on Rails and Microsoft SQL server", "body": "<p>I am asked to build a website with ruby on rails using a SQL server backend. I have only built sites with sqlite and postgres so I am a bit unsure. I did some digging and found a gem I can use.</p>\n\n<p>activerecord-sqlserver-adapter\n<a href=\"https://github.com/rails-sqlserver/activerecord-sqlserver-adapter\" rel=\"nofollow\">https://github.com/rails-sqlserver/activerecord-sqlserver-adapter</a></p>\n\n<p>1) I am wondering if I use this plugin, does it mean I can still set up models and using active record searches such as where()</p>\n\n<p>2) If users are pre created in the SQL through a EPRS system, will I still be able to integrate devise with that?</p>\n\n<p>3) They are going to give me a bak file for the SQL server and asked me to set up my own sql server on my mac during the development phase, is this possible or do I have to pay for a microsoft sql server license to do this?</p>\n\n<p>Thank you very much in advance, any help would be deeply appreciated. Thanks again.</p>\n"}, {"tags": ["arrays", "ruby", "range"], "comments": [{"owner": {"reputation": 15276, "user_id": 3451975, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/tj66m.jpg?s=128&g=1", "display_name": "Jeehut", "link": "https://stackoverflow.com/users/3451975/jeehut"}, "edited": false, "score": 0, "creation_date": 1440578737, "post_id": 32221652, "comment_id": 52326654, "body": "If you are looking on how to do this with integer values only, see <a href=\"http://stackoverflow.com/questions/2583665/about-ruby-range\">stackoverflow.com/questions/2583665/about-ruby-range</a> or <a href=\"http://stackoverflow.com/questions/3029785/declaring-an-integer-range-with-step-1-in-ruby\" title=\"declaring an integer range with step 1 in ruby\">stackoverflow.com/questions/3029785/&hellip;</a> and simply call <code>.to_a</code> at the end."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1440579706, "post_id": 32221652, "comment_id": 52327268, "body": "Why <code>decimal</code> and not just <code>float</code>? I think that&#39;s confusing since Ruby has <code>BigDecimal</code> as decimal data type."}, {"owner": {"reputation": 15276, "user_id": 3451975, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/tj66m.jpg?s=128&g=1", "display_name": "Jeehut", "link": "https://stackoverflow.com/users/3451975/jeehut"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1440592458, "post_id": 32221652, "comment_id": 52335934, "body": "@cremno: You&#39;re right, I&#39;m updating the wording to only state <code>float</code> then."}], "answers": [{"comments": [{"owner": {"reputation": 4100, "user_id": 217756, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/547377f831a0ee3de6df245b7d40cbff?s=128&d=identicon&r=PG", "display_name": "tomsoft", "link": "https://stackoverflow.com/users/217756/tomsoft"}, "edited": false, "score": 0, "creation_date": 1440578118, "post_id": 32221653, "comment_id": 52326277, "body": "btw, posting the question if you know the answer, not sure it&#39;s in the spirit of SO...."}, {"owner": {"reputation": 15276, "user_id": 3451975, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/tj66m.jpg?s=128&g=1", "display_name": "Jeehut", "link": "https://stackoverflow.com/users/3451975/jeehut"}, "reply_to_user": {"reputation": 4100, "user_id": 217756, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/547377f831a0ee3de6df245b7d40cbff?s=128&d=identicon&r=PG", "display_name": "tomsoft", "link": "https://stackoverflow.com/users/217756/tomsoft"}, "edited": false, "score": 3, "creation_date": 1440578201, "post_id": 32221653, "comment_id": 52326331, "body": "It sure is in the spirit of SO, it&#39;s even encouraged to do so, see this post on meta: <a href=\"http://meta.stackexchange.com/questions/17463/can-i-answer-my-own-questions-even-if-i-knew-the-answer-before-asking\" title=\"can i answer my own questions even if i knew the answer before asking\">meta.stackexchange.com/questions/17463/&hellip;</a>"}, {"owner": {"reputation": 1052, "user_id": 5153223, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2eb1e2066f49fd770286205385ad6d1?s=128&d=identicon&r=PG&f=1", "display_name": "Borsunho", "link": "https://stackoverflow.com/users/5153223/borsunho"}, "edited": false, "score": 0, "creation_date": 1440578341, "post_id": 32221653, "comment_id": 52326397, "body": "Oh. Makes sense, actually."}], "tags": [], "owner": {"reputation": 15276, "user_id": 3451975, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/tj66m.jpg?s=128&g=1", "display_name": "Jeehut", "link": "https://stackoverflow.com/users/3451975/jeehut"}, "is_accepted": true, "score": 5, "last_activity_date": 1440592323, "last_edit_date": 1495541755, "creation_date": 1440577963, "answer_id": 32221653, "question_id": 32221652, "link": "https://stackoverflow.com/questions/32221652/create-array-in-ruby-with-begin-value-end-value-and-step-for-float-values/32221653#32221653", "title": "Create array in Ruby with begin value, end value and step for float values", "body": "<p>For <strong>floats with custom stepping</strong> you can use <a href=\"http://ruby-doc.org/core-2.2.3/Numeric.html#method-i-step\" rel=\"nofollow noreferrer\">Numeric#step</a> like so:</p>\n\n<pre><code>-1.25.step(by: 0.5, to: 1.25).to_a\n# =&gt; [-1.25, -0.75, -0.25, 0.25, 0.75, 1.25] \n</code></pre>\n\n<hr>\n\n<p>If you are looking on how to do this with <strong>integer values only</strong>, see <a href=\"https://stackoverflow.com/questions/2583665/about-ruby-range\">this post</a> or <a href=\"https://stackoverflow.com/questions/3029785/declaring-an-integer-range-with-step-1-in-ruby\">that post</a> on how to create ranges and simply call <code>.to_a</code> at the end. Example:</p>\n\n<pre><code>(-1..1).step(0.5).to_a\n# =&gt; [-1.0, -0.5, 0.0, 0.5, 1.0] \n</code></pre>\n"}], "owner": {"reputation": 15276, "user_id": 3451975, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/tj66m.jpg?s=128&g=1", "display_name": "Jeehut", "link": "https://stackoverflow.com/users/3451975/jeehut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1457, "favorite_count": 0, "accepted_answer_id": 32221653, "answer_count": 1, "score": 4, "last_activity_date": 1440592479, "creation_date": 1440577963, "last_edit_date": 1440592479, "question_id": 32221652, "link": "https://stackoverflow.com/questions/32221652/create-array-in-ruby-with-begin-value-end-value-and-step-for-float-values", "title": "Create array in Ruby with begin value, end value and step for float values", "body": "<p>How can one create an array filled with values within a range (having a begin and end value) and a step? It should support begin and end values of <code>float</code> type.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem", "operating-system", "ruby-on-rails-4.2"], "answers": [{"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 2, "last_activity_date": 1440575055, "creation_date": 1440575055, "answer_id": 32220745, "question_id": 32220555, "link": "https://stackoverflow.com/questions/32220555/cannot-load-such-file-kconv/32220745#32220745", "title": "cannot load such file -- Kconv", "body": "<p>The name of the file is <code>kconv.rb</code>, not <code>Kconv.rb</code>. On your Mac, you are presumably using a case-insensitive file system such as FAT, NTFS or HFS, whereas on your CentOS box, you are using a case-sensitive file system such as ext4, btrfs or ZFS.</p>\n\n<p>So, it should be </p>\n\n<pre><code>require 'kconv'\n</code></pre>\n\n<p>and the fact that </p>\n\n<pre><code>require 'Kconv'\n</code></pre>\n\n<p>works on a case-insensitive file system is just pure dumb luck.</p>\n"}], "owner": {"reputation": 298, "user_id": 2522666, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d99019d49e480c8654156065b29eeb6f?s=128&d=identicon&r=PG", "display_name": "dosuken123", "link": "https://stackoverflow.com/users/2522666/dosuken123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "accepted_answer_id": 32220745, "answer_count": 1, "score": 1, "last_activity_date": 1440579782, "creation_date": 1440574423, "last_edit_date": 1440579782, "question_id": 32220555, "link": "https://stackoverflow.com/questions/32220555/cannot-load-such-file-kconv", "title": "cannot load such file -- Kconv", "body": "<p>I'm wondering why i got this error on particular situation.</p>\n\n<p>One of my controller class has </p>\n\n<pre><code>require 'Kconv'\n</code></pre>\n\n<p>on top.\nAnd after running app by \"$ rails s\", i got this error (cannot load such file -- Kconv) in only my centos5.10. My mac has no problem with the code and can work correctly.</p>\n\n<p><strong>Specs</strong></p>\n\n<p>My mac</p>\n\n<ul>\n<li>Rails 4.2.0</li>\n<li>ruby 2.1.1p76 (2014-02-24 revision 45161) [x86_64-darwin12.0]</li>\n<li>gem 2.2.2</li>\n<li>Yosemite 10.10.2</li>\n</ul>\n\n<p>centos5.10</p>\n\n<ul>\n<li>Rails 4.2.0</li>\n<li>ruby 2.1.2p95 (2014-05-08 revision 45877) [i686-linux]</li>\n<li>gem 2.4.8</li>\n<li>CentOS release 5.10 (Final)</li>\n</ul>\n\n<p>And one of tutorial site mentioned about need to install 'Kconv' by gem.\nBut both of my pc has error with it.</p>\n\n<pre><code>ERROR:  Could not find a valid gem 'kconv' (&gt;= 0) in any repository\nERROR:  Possible alternatives: bconv, conv, iconv, sconv\n</code></pre>\n\n<p>My question is why this error happens even if these specs are almost same. Another tutorial site said this lib is included into general package. If so, if i use same ruby version, i don't get this error, do i?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1444145204, "post_id": 32220099, "comment_id": 53772668, "body": "Did you find a solution to this?"}, {"owner": {"reputation": 128, "user_id": 2176005, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/11eab5c9af153c9b9c616865b9466569?s=128&d=identicon&r=PG", "display_name": "Tavio", "link": "https://stackoverflow.com/users/2176005/tavio"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1444363343, "post_id": 32220099, "comment_id": 53881557, "body": "Not yet! We are ignoring it for now and will come back to it later. I&#39;ll update this as soon as we find out what was the cause."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1444383908, "post_id": 32220099, "comment_id": 53891229, "body": "Are your tests wrapped in a transaction, e.g.<code>use_transactional_fixtures</code> or database cleaner transaction strategy. Changing to truncation might help. But then if your after_commit is being fired you can&#39;t be wrapping your tests in a transaction..."}], "answers": [{"comments": [{"owner": {"reputation": 128, "user_id": 2176005, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/11eab5c9af153c9b9c616865b9466569?s=128&d=identicon&r=PG", "display_name": "Tavio", "link": "https://stackoverflow.com/users/2176005/tavio"}, "edited": false, "score": 1, "creation_date": 1440724453, "post_id": 32220206, "comment_id": 52403339, "body": "Sadly, these errors are not related to the destroy action. The Work entity has mechanisms that ensure it is never destroyed, and is soft deleted instead. Furthermore, the code inside the on_work_commit method throws an error when the id of the work is nil, which generates a stack trace that tells me the error is happening when the work is created."}, {"owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "reply_to_user": {"reputation": 128, "user_id": 2176005, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/11eab5c9af153c9b9c616865b9466569?s=128&d=identicon&r=PG", "display_name": "Tavio", "link": "https://stackoverflow.com/users/2176005/tavio"}, "edited": false, "score": 0, "creation_date": 1440724705, "post_id": 32220206, "comment_id": 52403407, "body": "Try using after_save instead"}], "tags": [], "owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "is_accepted": false, "score": 5, "last_activity_date": 1440573374, "creation_date": 1440573374, "answer_id": 32220206, "question_id": 32220099, "link": "https://stackoverflow.com/questions/32220099/rails-active-record-has-nil-id-after-commit/32220206#32220206", "title": "Rails Active Record has nil id after commit", "body": "<p><code>after_commit</code> method also executes for <code>destroy</code> action, that's why its returning <code>nil</code> when you are trying to delete an item, do this instead</p>\n\n<pre><code>after_commit :on_work_commit, on: [:create, :update]\n</code></pre>\n\n<p>I would suggest you to use <code>after_save</code> for this purpose</p>\n\n<pre><code>after_save :on_work_commit\n</code></pre>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 128, "user_id": 2176005, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/11eab5c9af153c9b9c616865b9466569?s=128&d=identicon&r=PG", "display_name": "Tavio", "link": "https://stackoverflow.com/users/2176005/tavio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 982, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1440573374, "creation_date": 1440573072, "question_id": 32220099, "link": "https://stackoverflow.com/questions/32220099/rails-active-record-has-nil-id-after-commit", "title": "Rails Active Record has nil id after commit", "body": "<p>I registered an after_commit trigger for one of my Active Record entities, like so:</p>\n\n<pre><code>class Work &lt; ActiveRecord::Base\n    after_commit :on_work_commit\n\n    ...\n\n    def on_work_commit\n        puts self.id # prints nil sometimes\n    end\nend\n</code></pre>\n\n<p>The problem is that in my production environment, self.id is sometimes nil \ninside the on_work_commit method. It doesn't happen all the time, in fact, it happens intermittently. By analysing the stack trace of these errors, I can see that they happen intermittently during the work creation operation, but never when updating a work. I am unable to reproduce this problem locally though, as it only happens in production when a lot of works are being created and updated at the same time.</p>\n\n<p>This kind of problem screams race condition to me, but I have no idea what could be wrong. Is there any scenario where an after_commit trigger could be called for an object before the object could get an id?</p>\n\n<p>I'm using rails version 3.2.22 and ruby version 1.9.3-p484.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1440570570, "post_id": 32219417, "comment_id": 52321947, "body": "What do you mean by <code>current_course</code> here?"}, {"owner": {"reputation": 133, "user_id": 4725883, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/10206205148117394/picture?type=large", "display_name": "Timoth&#233; Gauguet", "link": "https://stackoverflow.com/users/4725883/timoth%c3%a9-gauguet"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1440570745, "post_id": 32219417, "comment_id": 52322051, "body": "I mean, if I have &quot;course1&quot; and &quot;course2&quot;, the link will redirect &quot;course1 presentation&quot; to &quot;course1 first video&quot; and &quot;course2 presentation&quot; to &quot;course2 first video&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "is_accepted": true, "score": 0, "last_activity_date": 1440572482, "creation_date": 1440572482, "answer_id": 32219944, "question_id": 32219417, "link": "https://stackoverflow.com/questions/32219417/how-to-link-my-courses-show-html-erb-to-the-current-course/32219944#32219944", "title": "How to link my courses/show.html.erb to the current_course?", "body": "<p>On your index you are doing right.</p>\n\n<pre><code>def index\n  @courses = Course.all\nend\n</code></pre>\n\n<p>Now in index view you should have link to show page related to each course.</p>\n\n<pre><code>&lt;% @courses.each do |course| %&gt;\n  &lt;tr&gt;\n     ....\n     ....\n     &lt;td&gt;&lt;%= link_to( 'show', course_path(course) ) %&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>To show all videos related to a course in show page start from first video, You should use kaminari or will paginate. So your show action should look like.</p>\n\n<pre><code>def show\n  @course = Course.find(params[:id]) #if you want to show any detail of course\n  @videos = @course.videos.paginate(:page =&gt; params[:page], :per_page =&gt; 1)\nend\n</code></pre>\n\n<p>Now you will get first video of course in first show request and on each pagination click. you will see next one.</p>\n\n<pre><code>&lt;%= @course.name %&gt;\n&lt;%= @videos.first.url %&gt; ##because paginate return array always\n\n## to paginate videos\n\n&lt;%= will_paginate @videos %&gt;\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 4725883, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/10206205148117394/picture?type=large", "display_name": "Timoth&#233; Gauguet", "link": "https://stackoverflow.com/users/4725883/timoth%c3%a9-gauguet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 32219944, "answer_count": 1, "score": 0, "last_activity_date": 1440572482, "creation_date": 1440570452, "last_edit_date": 1440571145, "question_id": 32219417, "link": "https://stackoverflow.com/questions/32219417/how-to-link-my-courses-show-html-erb-to-the-current-course", "title": "How to link my courses/show.html.erb to the current_course?", "body": "<p>I'm creating an app that allows users to access different courses on video (each course has its own 4 or 5 videos, and each video has its own page). </p>\n\n<p>I created a <code>courses_controller</code> which allows me to index and show the courses stored in the database.</p>\n\n<p>Courses_controller.rb :</p>\n\n<pre><code>class CoursesController &lt; ApplicationController\nbefore_action :set_course, only: [:show]\nskip_before_filter  :verify_authenticity_token\nbefore_filter :authorize , except: [:index, :show]\n\ndef index\n    @courses = Course.all\nend\n\ndef show\nend\n\nprivate\n# Use callbacks to share common setup or constraints between actions.\ndef set_course\n    @course = Course.find(params[:id])\nend\n\ndef authorize\n    unless User.find_by_id(session[:user_id]) and User.find_by_id(session[:user_id]).active == true\n        redirect_to subscriptions_path, :notice =&gt; \"Vous devez souscrire \u00e0 un abonnement pour avoir acc\u00e8s a cette page\"\n    end\nend\n</code></pre>\n\n<p>Each course is stored in a seeds.rb file.</p>\n\n<p><code>courses/index.html.erb</code> lists the courses, <code>courses/show.html.erb</code> shows the presentation of a specific course. These 2 parts are OK. </p>\n\n<p>How to create a link to the current course from the show.html.erb page? </p>\n\n<p>I mean, if I have \"course1\" and \"course2\", the link will redirect \"( show.html.erb )course1 presentation\" to \"( ?.html.erb )course1 first video\" and \"( show.html.erb )course2 presentation\" to \"( ?.html.erb )course2 first video\", etc.</p>\n\n<p>Any idea?</p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver"], "comments": [{"owner": {"reputation": 179, "user_id": 1617212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/315275d1a8e94a785a1da5fe79a04ec7?s=128&d=identicon&r=PG", "display_name": "rejin", "link": "https://stackoverflow.com/users/1617212/rejin"}, "edited": false, "score": 2, "creation_date": 1440570247, "post_id": 32219270, "comment_id": 52321808, "body": "you can always use  nokogiri for parsing"}, {"owner": {"reputation": 1078, "user_id": 734744, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3a20b00349cbb9c96c21c307a74487a7?s=128&d=identicon&r=PG", "display_name": "Sameer Naik", "link": "https://stackoverflow.com/users/734744/sameer-naik"}, "reply_to_user": {"reputation": 179, "user_id": 1617212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/315275d1a8e94a785a1da5fe79a04ec7?s=128&d=identicon&r=PG", "display_name": "rejin", "link": "https://stackoverflow.com/users/1617212/rejin"}, "edited": false, "score": 0, "creation_date": 1440571708, "post_id": 32219270, "comment_id": 52322529, "body": "Thanks. I was able to get it using this code. doc = Nokogiri::HTML(driver.page_source)          doc.css(&#39;link[rel=stylesheet]&#39;).each do |e|                 puts e[&#39;href&#39;]         end"}, {"owner": {"reputation": 6693, "user_id": 4180674, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/95bQJ.jpg?s=128&g=1", "display_name": "Girish Sortur", "link": "https://stackoverflow.com/users/4180674/girish-sortur"}, "edited": false, "score": 1, "creation_date": 1440577050, "post_id": 32219270, "comment_id": 52325625, "body": "If the above answer solved your problem, please provide an answer below and mark it as a right answer. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 1078, "user_id": 734744, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3a20b00349cbb9c96c21c307a74487a7?s=128&d=identicon&r=PG", "display_name": "Sameer Naik", "link": "https://stackoverflow.com/users/734744/sameer-naik"}, "is_accepted": true, "score": 1, "last_activity_date": 1440718762, "creation_date": 1440718762, "answer_id": 32261132, "question_id": 32219270, "link": "https://stackoverflow.com/questions/32219270/selenium-ruby-get-href-of-a-link-of-type-css/32261132#32261132", "title": "Selenium Ruby get href of a link of type css", "body": "<p>As rejin suggested, used nokogiri to parse HTML and found CSS links.</p>\n\n<pre><code>doc = Nokogiri::HTML(driver.page_source) \ndoc.css('link[rel=stylesheet]').each do |e| \nputs e['href']\nend\n</code></pre>\n"}], "owner": {"reputation": 1078, "user_id": 734744, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3a20b00349cbb9c96c21c307a74487a7?s=128&d=identicon&r=PG", "display_name": "Sameer Naik", "link": "https://stackoverflow.com/users/734744/sameer-naik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 32261132, "answer_count": 1, "score": 1, "last_activity_date": 1440718762, "creation_date": 1440569948, "question_id": 32219270, "link": "https://stackoverflow.com/questions/32219270/selenium-ruby-get-href-of-a-link-of-type-css", "title": "Selenium Ruby get href of a link of type css", "body": "<p>Is it possible to get href of following element using Ruby Selenium WebDriver?</p>\n\n<pre><code>&lt;link type=\"text/css\" rel=\"stylesheet\" href=\"https://host/public-theme/css/main.css\"&gt;\n</code></pre>\n\n<p>Thanks,\nSameer</p>\n"}, {"tags": ["ruby", "gem", "rubygems", "vagrant", "virtual-machine"], "answers": [{"comments": [{"owner": {"reputation": 4208, "user_id": 1512940, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/4OxsK.jpg?s=128&g=1", "display_name": "Dimag Kharab", "link": "https://stackoverflow.com/users/1512940/dimag-kharab"}, "edited": false, "score": 0, "creation_date": 1440574246, "post_id": 32220425, "comment_id": 52323964, "body": "Fine , I didnt try I removed the rsync dependency from the vagrant for the time being ! But still if I try I am getting the same error ! :("}, {"owner": {"reputation": 166, "user_id": 5267234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1731a8cbf1b4b497f271c35335170b7?s=128&d=identicon&r=PG&f=1", "display_name": "rmacklin", "link": "https://stackoverflow.com/users/5267234/rmacklin"}, "reply_to_user": {"reputation": 4208, "user_id": 1512940, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/4OxsK.jpg?s=128&g=1", "display_name": "Dimag Kharab", "link": "https://stackoverflow.com/users/1512940/dimag-kharab"}, "edited": false, "score": 0, "creation_date": 1440574264, "post_id": 32220425, "comment_id": 52323977, "body": "P.S. If you&#39;re still curious about the warning, this security vulnerability is the reason Bundler added that: <a href=\"http://bundler.io/blog/2014/08/14/bundler-may-install-gems-from-a-different-source-than-expected-cve-2013-0334.html\" rel=\"nofollow noreferrer\">bundler.io/blog/2014/08/14/&hellip;</a>. It looks like <a href=\"https://github.com/mitchellh/vagrant/blob/c84e05fd063f043d71f77aae6d4b01e04d1164ff/lib/vagrant/bundler.rb#L181-L185\" rel=\"nofollow noreferrer\">these lines</a> are responsible for adding the multiple sources to begin with."}, {"owner": {"reputation": 166, "user_id": 5267234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1731a8cbf1b4b497f271c35335170b7?s=128&d=identicon&r=PG&f=1", "display_name": "rmacklin", "link": "https://stackoverflow.com/users/5267234/rmacklin"}, "reply_to_user": {"reputation": 4208, "user_id": 1512940, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/4OxsK.jpg?s=128&g=1", "display_name": "Dimag Kharab", "link": "https://stackoverflow.com/users/1512940/dimag-kharab"}, "edited": false, "score": 1, "creation_date": 1440574358, "post_id": 32220425, "comment_id": 52324047, "body": "Are you behind a firewall? If so, this issue may have some ways to help you: <a href=\"https://github.com/mitchellh/vagrant/issues/4748\" rel=\"nofollow noreferrer\">github.com/mitchellh/vagrant/issues/4748</a>"}], "tags": [], "owner": {"reputation": 166, "user_id": 5267234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1731a8cbf1b4b497f271c35335170b7?s=128&d=identicon&r=PG&f=1", "display_name": "rmacklin", "link": "https://stackoverflow.com/users/5267234/rmacklin"}, "is_accepted": false, "score": 2, "last_activity_date": 1440574512, "last_edit_date": 1440574512, "creation_date": 1440574022, "answer_id": 32220425, "question_id": 32218626, "link": "https://stackoverflow.com/questions/32218626/warning-this-gemfile-contains-multiple-primary-sources-during-vagrant-rsync-bac/32220425#32220425", "title": "Warning: this Gemfile contains multiple primary sources during vagrant-rsync-back plugin Installation", "body": "<p>The \"multiple primary sources\" warning you are seeing is just that: a warning. The error that prevented the installation was the \"Could not fetch specs from ...\" part you see above the warning.</p>\n\n<p>My guess is just that this gem server was down at the time you tried to install it. In fact, it looks like someone reported a similar issue on the vagrant github repository back in July, and one of the top contributors guessed exactly that: <a href=\"https://github.com/mitchellh/vagrant/issues/5966\" rel=\"nofollow\">https://github.com/mitchellh/vagrant/issues/5966</a></p>\n\n<p>Have you tried it again to see if the issue has gone away (the gem server appears to be up for me)?</p>\n"}], "owner": {"reputation": 4208, "user_id": 1512940, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/4OxsK.jpg?s=128&g=1", "display_name": "Dimag Kharab", "link": "https://stackoverflow.com/users/1512940/dimag-kharab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2704, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440574512, "creation_date": 1440566983, "last_edit_date": 1440567427, "question_id": 32218626, "link": "https://stackoverflow.com/questions/32218626/warning-this-gemfile-contains-multiple-primary-sources-during-vagrant-rsync-bac", "title": "Warning: this Gemfile contains multiple primary sources during vagrant-rsync-back plugin Installation", "body": "<p>I installed <code>vargrant</code> in my windows 7, my VM box is <code>CentOS</code> 6, well vagrant is working fine.But now I want to install <code>rsync-back</code> for syncing my VM files to Windows, I am getting few errors.</p>\n\n<p>When I use the command in CMD windows,</p>\n\n<pre><code>vagrant plugin install vagrant-rsync-back\n</code></pre>\n\n<p>I get the below errors</p>\n\n<blockquote>\n  <p>Installing the 'vagrant-rsync-back' plugin. This can take a few\n  minutes... Bundler, the underlying system Vagrant uses to install\n  plugins, reported an error. The error is shown below. These errors are\n  usually caused by misconfigured plugin installations or transient\n  network issues. The error from Bundler is:</p>\n  \n  <p>Could not fetch specs from <a href=\"http://gems.hashicorp.com/\" rel=\"nofollow\">http://gems.hashicorp.com/</a></p>\n  \n  <p>Warning: this Gemfile contains multiple primary sources. Using\n  <code>source</code> more than once without a block is a security risk, and may\n  result in installing unexpected gems. T o resolve this warning, use a\n  block to indicate which gems should come from the secondary source. To\n  upgrade this warning to an error, run <code>bundle config disable_multisou\n  rce true</code>.</p>\n</blockquote>\n\n<p>I am pretty new to vagrant, I am unable to solve this issue. Any suggestion where I am doing wrong ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "sqlite", "whenever"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1440566607, "post_id": 32218396, "comment_id": 52320354, "body": "Did you run <code>rake db:migrate</code> after creating migration file?"}, {"owner": {"reputation": 165, "user_id": 3534558, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/BsoRU.jpg?s=128&g=1", "display_name": "jlquaccia", "link": "https://stackoverflow.com/users/3534558/jlquaccia"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1440567054, "post_id": 32218396, "comment_id": 52320524, "body": "@Pavan I did run rake db:migrate after creating the file, still left me with the error above though.."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1440567318, "post_id": 32218396, "comment_id": 52320617, "body": "You can go to your rails console and check: <code>Item.count</code> or <code>Item.first</code> to see if the <code>items</code> table exists in the database."}, {"owner": {"reputation": 165, "user_id": 3534558, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/BsoRU.jpg?s=128&g=1", "display_name": "jlquaccia", "link": "https://stackoverflow.com/users/3534558/jlquaccia"}, "reply_to_user": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1440568660, "post_id": 32218396, "comment_id": 52321158, "body": "@KMRakibulIslam Thanks, I just went into my rails console to double check things (updated my question above to include my rails c code) and it looks like the table does exist, unclear why I&#39;m still getting the error.."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1440568730, "post_id": 32218396, "comment_id": 52321192, "body": "<code>RAILS_ENV=production</code> you ran the cron task in production environement. Did you check the production database if the items table is present there?"}, {"owner": {"reputation": 14640, "user_id": 380607, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0475394dd283efd42d1ae51379c9ed00?s=128&d=identicon&r=PG", "display_name": "Magne", "link": "https://stackoverflow.com/users/380607/magne"}, "edited": false, "score": 0, "creation_date": 1494941670, "post_id": 32218396, "comment_id": 75034342, "body": "PS: One might come across this error if one has not renamed / deleted old fixture files. See related question: <a href=\"http://stackoverflow.com/questions/3721564/rails3-activerecordstatementinvalid-no-such-table-in-every-test\" title=\"rails3 activerecordstatementinvalid no such table in every test\">stackoverflow.com/questions/3721564/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 3534558, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/BsoRU.jpg?s=128&g=1", "display_name": "jlquaccia", "link": "https://stackoverflow.com/users/3534558/jlquaccia"}, "edited": false, "score": 0, "creation_date": 1440978044, "post_id": 32218615, "comment_id": 52480640, "body": "I went ahead and reset my db both in development and production (see my comment on Michael Pell&#39;s answer above) and now I don&#39;t receive any errors at all when attempting to automate my rake task, however, it is still not working.  Maybe some sort of configuration issue, but I&#39;m not sure.."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 165, "user_id": 3534558, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/BsoRU.jpg?s=128&g=1", "display_name": "jlquaccia", "link": "https://stackoverflow.com/users/3534558/jlquaccia"}, "edited": false, "score": 0, "creation_date": 1440978525, "post_id": 32218615, "comment_id": 52480725, "body": "If you did, <code>rake db:drop</code> then you lost all of your data in the database and you don&#39;t have anything in your <code>items</code> table. So,  the automate taks won&#39;t do anything. You need to create items in your <code>items</code> table to see your automate task in action."}, {"owner": {"reputation": 165, "user_id": 3534558, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/BsoRU.jpg?s=128&g=1", "display_name": "jlquaccia", "link": "https://stackoverflow.com/users/3534558/jlquaccia"}, "edited": false, "score": 0, "creation_date": 1440978900, "post_id": 32218615, "comment_id": 52480790, "body": "I know, I did go back and create a new user and added a few new items under that user.  Then I went and updated the created_at attribute for one of the items so that it was created 8 days ago.  Yet when I readjust my rake automation to run again nothing happens and the item I updated is not deleted..  since it should be automatically deleted after 7 days."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 165, "user_id": 3534558, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/BsoRU.jpg?s=128&g=1", "display_name": "jlquaccia", "link": "https://stackoverflow.com/users/3534558/jlquaccia"}, "edited": false, "score": 0, "creation_date": 1440979363, "post_id": 32218615, "comment_id": 52480856, "body": "did you make sure your rake task is being called? put a print statement inside and try to see if it finds the correct records to delete: <code>puts Item.where(&quot;created_at &lt;= ?&quot;, Time.now - 7.days).inspect</code>"}, {"owner": {"reputation": 165, "user_id": 3534558, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/BsoRU.jpg?s=128&g=1", "display_name": "jlquaccia", "link": "https://stackoverflow.com/users/3534558/jlquaccia"}, "edited": false, "score": 0, "creation_date": 1441057093, "post_id": 32218615, "comment_id": 52515825, "body": "Thanks, I inserted a print statement into my rake task like you said to see if it is actually being called when automated.  It looks like it is because I do receive a message in the terminal that displays some printed output.  Yet my rake task is not running in the right place because the printed output returns an empty array when there should be an old item inside.  Note: I updated my question above (more details there)."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 165, "user_id": 3534558, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/BsoRU.jpg?s=128&g=1", "display_name": "jlquaccia", "link": "https://stackoverflow.com/users/3534558/jlquaccia"}, "edited": false, "score": 0, "creation_date": 1441057306, "post_id": 32218615, "comment_id": 52515908, "body": "right, this means your rake task is running but it can&#39;t find the items to delete in the database. make sure you are getting the data from the same database. Try to print: <code>puts Item.count</code> or ``puts Item.first` to see if they can print the record count to make sure your database really has some item data."}, {"owner": {"reputation": 165, "user_id": 3534558, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/BsoRU.jpg?s=128&g=1", "display_name": "jlquaccia", "link": "https://stackoverflow.com/users/3534558/jlquaccia"}, "edited": false, "score": 0, "creation_date": 1441082464, "post_id": 32218615, "comment_id": 52521949, "body": "Ya the rake task is not running in the right db (I&#39;m actually not sure where it&#39;s running because it does not work in development or production).  I ran the automated task with <code>puts Item.count</code> and the output I got was 0.  And items do in fact exist in development and production."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 165, "user_id": 3534558, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/BsoRU.jpg?s=128&g=1", "display_name": "jlquaccia", "link": "https://stackoverflow.com/users/3534558/jlquaccia"}, "edited": false, "score": 1, "creation_date": 1441082665, "post_id": 32218615, "comment_id": 52521995, "body": "try to run the rake task like this: <code>RAILS_ENV=development bundle exec rake todo:delete_items</code>, means, specifying the <code>RAILS_ENV</code>"}, {"owner": {"reputation": 165, "user_id": 3534558, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/BsoRU.jpg?s=128&g=1", "display_name": "jlquaccia", "link": "https://stackoverflow.com/users/3534558/jlquaccia"}, "edited": false, "score": 1, "creation_date": 1441136287, "post_id": 32218615, "comment_id": 52553585, "body": "Thanks, this helped me out.  Within my crontab I updated it to what you said and then also updated my schedule.rb file to <code>rake &quot;todo:delete_items&quot;, :environment =&gt; &#39;development&#39;</code>.  Now it runs fine in development!"}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 165, "user_id": 3534558, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/BsoRU.jpg?s=128&g=1", "display_name": "jlquaccia", "link": "https://stackoverflow.com/users/3534558/jlquaccia"}, "edited": false, "score": 0, "creation_date": 1441137792, "post_id": 32218615, "comment_id": 52554423, "body": "awesome :) Consider accepting the answer if it helped to solve your problem. Thanks."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 165, "user_id": 3534558, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/BsoRU.jpg?s=128&g=1", "display_name": "jlquaccia", "link": "https://stackoverflow.com/users/3534558/jlquaccia"}, "edited": false, "score": 0, "creation_date": 1441137993, "post_id": 32218615, "comment_id": 52554515, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/88512/discussion-between-k-m-rakibul-islam-and-jlquaccia\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": true, "score": 1, "last_activity_date": 1440569742, "last_edit_date": 1440569742, "creation_date": 1440566951, "answer_id": 32218615, "question_id": 32218396, "link": "https://stackoverflow.com/questions/32218396/rake-aborted-activerecordstatementinvalid-sqlite3sqlexception-no-such-tab/32218615#32218615", "title": "rake aborted! ActiveRecord::StatementInvalid: SQLite3::SQLException: no such table: Trouble Getting Rake Automation to Work", "body": "<pre><code>ActiveRecord::StatementInvalid: SQLite3::SQLException: no such table: items: SELECT \"items\".* FROM \"items\"\n</code></pre>\n\n<p>From the error message, it's obvious that the <code>items</code> table does not exist in your database right now. It got deleted somehow even if you did not delete it knowingly. </p>\n\n<p>So, you should create the <code>items</code> table again by running the corresponding migration:</p>\n\n<pre><code>bundle exec rake db:migrate\n</code></pre>\n\n<h3>Update</h3>\n\n<p>Check the <code>RAILS_ENV</code> in which you are running this rake task. As the error is showing up, this means you don't have the <code>items</code> table present in your database (looks like it's your production database). Then, you have to run the migration in that <code>RAILS_ENV</code> to create the <code>items</code> table back:</p>\n\n<pre><code>RAILS_ENV=production bundle exec rake db:migrate\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 165, "user_id": 3534558, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/BsoRU.jpg?s=128&g=1", "display_name": "jlquaccia", "link": "https://stackoverflow.com/users/3534558/jlquaccia"}, "edited": false, "score": 0, "creation_date": 1440977522, "post_id": 32266792, "comment_id": 52480537, "body": "So I went back and ran <code>rake db:drop</code> then <code>rake db:migrate</code> to start fresh.  I also tried <code>RAILS_ENV=production rake db:migrate</code> and even ran <code>heroku run rake db:migrate</code> and <code>heroku restart</code> to update production.  Now I don&#39;t receive any errors at all, but the automation is still not working.  Not working in development or production.  And as far as I can see I&#39;m not setting the environment to anything other than development anywhere."}], "tags": [], "owner": {"reputation": 1253, "user_id": 1295896, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2c3582415f40a963480414ed98dec5da?s=128&d=identicon&r=PG", "display_name": "Michael Pell", "link": "https://stackoverflow.com/users/1295896/michael-pell"}, "is_accepted": false, "score": 1, "last_activity_date": 1440751125, "creation_date": 1440751125, "answer_id": 32266792, "question_id": 32218396, "link": "https://stackoverflow.com/questions/32218396/rake-aborted-activerecordstatementinvalid-sqlite3sqlexception-no-such-tab/32266792#32266792", "title": "rake aborted! ActiveRecord::StatementInvalid: SQLite3::SQLException: no such table: Trouble Getting Rake Automation to Work", "body": "<p>I am with the other commenters here and think that something funny has happened that might not be easy to understand.</p>\n\n<p>My recommendation is to try running rake 'db:drop' and then 'rake db:migrate' just to make sure that things are the way that you think they are.</p>\n\n<p>If the problem persists, I would expect it has something to do with rails environments. Are you setting the environment to anything other than 'development' anywhere?</p>\n\n<p>if so, either dont do that, or, make sure you run 'RAILS_ENV=production rake db:migrate ' and probably read up on environments in the rails guides.</p>\n"}, {"tags": [], "owner": {"reputation": 165, "user_id": 3534558, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/BsoRU.jpg?s=128&g=1", "display_name": "jlquaccia", "link": "https://stackoverflow.com/users/3534558/jlquaccia"}, "is_accepted": false, "score": 0, "last_activity_date": 1441136098, "creation_date": 1441136098, "answer_id": 32339570, "question_id": 32218396, "link": "https://stackoverflow.com/questions/32218396/rake-aborted-activerecordstatementinvalid-sqlite3sqlexception-no-such-tab/32339570#32339570", "title": "rake aborted! ActiveRecord::StatementInvalid: SQLite3::SQLException: no such table: Trouble Getting Rake Automation to Work", "body": "<p>Thanks to everyone for the help!  To fix my rake automation to work in development, turns out I just had to log into my crontab via terminal with <code>crontab -e</code> and then edit my rails environment to <code>RAILS_ENV=development</code>.</p>\n\n<p>Then since I am using the Whenever gem, within my schedule.rb file I had to set the environment to development there as well:</p>\n\n<p><code>rake \"todo:delete_items\", :environment =&gt; 'development'</code></p>\n\n<p>To get things to work on production, I use Heroku, all that I had to do was use the Heroku Scheduler add-on and I was able to get things working after a little bit of configuration setting.</p>\n"}], "owner": {"reputation": 165, "user_id": 3534558, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/BsoRU.jpg?s=128&g=1", "display_name": "jlquaccia", "link": "https://stackoverflow.com/users/3534558/jlquaccia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1012, "favorite_count": 0, "accepted_answer_id": 32218615, "answer_count": 3, "score": 3, "last_activity_date": 1441136098, "creation_date": 1440565733, "last_edit_date": 1441056841, "question_id": 32218396, "link": "https://stackoverflow.com/questions/32218396/rake-aborted-activerecordstatementinvalid-sqlite3sqlexception-no-such-tab", "title": "rake aborted! ActiveRecord::StatementInvalid: SQLite3::SQLException: no such table: Trouble Getting Rake Automation to Work", "body": "<p>I'm working on making a to-do list application and I'm trying to implement a feature where a to-do list item will automatically be deleted after 7 days if it never was completed within that time period.  I'm trying to use rake automation with the help of the 'whenever' gem however I receive the following error:</p>\n\n<pre><code>rake aborted!\nActiveRecord::StatementInvalid: SQLite3::SQLException: no such table: items: SELECT \"items\".* FROM \"items\"  WHERE (created_at &lt;= '2015-08-18 23:26:04.639414') \n</code></pre>\n\n<p>Here's the full stack trace:\n<a href=\"https://gist.github.com/jlquaccia/0ac0eaa2b1d639fc514e\" rel=\"nofollow\">https://gist.github.com/jlquaccia/0ac0eaa2b1d639fc514e</a></p>\n\n<p>You can also view my most recent commit on Github <a href=\"https://github.com/jlquaccia/Blocitoff\" rel=\"nofollow\">here</a></p>\n\n<p>I'm still a bit new to RoR and am confused by the error message because I already created a table named <code>items</code>.</p>\n\n<p>db/migrate/20150817215220_create_items.rb:</p>\n\n<pre><code>class CreateItems &lt; ActiveRecord::Migration\n  def change\n    create_table :items do |t|\n      t.string :name\n      t.references :user, index: true\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>Can someone please help?  I've been spinning my wheels on this one for a while today before I decided to ask here.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I have completely reset my db, re-migrated again in development and production and also recreated new users and items.  I know longer receive an error when running my rake automation (everything seems to have migrated smoothly this time).  However, my rake automation still does not work..</p>\n\n<p>I went back and added a print statement inside of my rake task to help look deeper into things:</p>\n\n<p><code>puts Item.where(\"created_at &lt;= ?\", Time.now - 7.days).inspect</code></p>\n\n<p>When running this task manually I get:</p>\n\n<p>input: <code>rake todo:delete_items</code></p>\n\n<p>output: <code>#&lt;ActiveRecord::Relation [#&lt;Item id: 2, name: \"Milk\", user_id: 1, created_at: \"2015-08-24 18:16:25\", updated_at: \"2015-08-31 18:16:25\"&gt;]&gt;</code></p>\n\n<p>This proves that the rake task does work when run manually.</p>\n\n<p>Yet when I go to automate this task:</p>\n\n<p>schedule.rb:</p>\n\n<pre><code>every :day, :at =&gt; '12:09 pm' do\n  rake \"todo:delete_items\"\nend\n</code></pre>\n\n<p>Nothing happens, yet I do receive a message in the terminal.</p>\n\n<pre><code>Mail version 8.1 6/6/93.  Type ? for help.\n\"/var/mail/Jason\": 1 message 1 new\n&gt;N  1 Jason@jason-quaccias  Mon Aug 31 12:09  19/900   \"Cron &lt;Jason@jason-quaccias-macbook-pro&gt; /bin/bash -l -c 'cd /Users/Jason/code/projects/blocitoff &amp;&amp; RAILS_ENV=production bundle exec rake todo:de\"\n? \nMessage 1:\nFrom Jason@jason-quaccias-macbook-pro.local  Mon Aug 31 12:09:18 2015\nX-Original-To: Jason\nDelivered-To: Jason@jason-quaccias-macbook-pro.local\nFrom: Jason@jason-quaccias-macbook-pro.local (Cron Daemon)\nTo: Jason@jason-quaccias-macbook-pro.local\nSubject: Cron &lt;Jason@jason-quaccias-macbook-pro&gt; /bin/bash -l -c 'cd /Users/Jason/code/projects/blocitoff &amp;&amp; RAILS_ENV=production bundle exec rake todo:delete_items --silent'\nX-Cron-Env: &lt;SHELL=/bin/sh&gt;\nX-Cron-Env: &lt;PATH=/usr/bin:/bin&gt;\nX-Cron-Env: &lt;LOGNAME=Jason&gt;\nX-Cron-Env: &lt;USER=Jason&gt;\nX-Cron-Env: &lt;HOME=/Users/Jason&gt;\nDate: Mon, 31 Aug 2015 12:09:15 -0700 (PDT)\n\n#&lt;ActiveRecord::Relation []&gt;\n</code></pre>\n\n<p>Paying attention to the last line of the message <code>#&lt;ActiveRecord::Relation []&gt;</code> I can tell that my rake automation did run and printed out that it could not find a match for any items that are >= 7 days old.</p>\n\n<p>However, this is not true.  Prior to automating my rake task I made sure there was an item that existed on production that was older than 7 days by running the Heroku rails console.</p>\n\n<pre><code>irb(main):003:0&gt; u_items.find_by(id: 1)\n=&gt; #&lt;Item id: 1, name: \"Bread\", user_id: 3, created_at: \"2015-08-22 22:32:55\", updated_at: \"2015-08-30 22:32:55\"&gt;\n</code></pre>\n\n<p>This is clear because the created_at attribute reads <code>\"2015-08-22 22:32:55\"</code></p>\n\n<p>However, this makes me wonder, has this bug now been reduced to some kind of configuration error?  Seems as though my rake task is running automatically yet it's not executing in the right place.  E.g. my rake task is not running in my production environment.</p>\n\n<p>environment.rb:</p>\n\n<pre><code># Load the Rails application.\nrequire File.expand_path('../application', __FILE__)\n\n# Initialize the Rails application.\nRails.application.initialize!\n</code></pre>\n\n<p>todo.rake:</p>\n\n<pre><code>namespace :todo do\n  desc \"Delete items older than seven days\"\n  task delete_items: :environment do\n    # Item.where(\"created_at &lt;= ?\", Time.now - 7.days).destroy_all\n    puts Item.where(\"created_at &lt;= ?\", Time.now - 7.days).inspect\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "rake", "units-of-measurement"], "comments": [{"owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "edited": false, "score": 0, "creation_date": 1440582999, "post_id": 32218096, "comment_id": 52329550, "body": "You probably need to read again how to set up fixtures."}, {"owner": {"reputation": 1895, "user_id": 605948, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e2fd8602397f2e842f5bd64b2a3269a5?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/605948/matthew"}, "edited": false, "score": 0, "creation_date": 1440690025, "post_id": 32218096, "comment_id": 52387778, "body": "which line is line 79?"}], "answers": [{"tags": [], "owner": {"reputation": 126, "user_id": 7995316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/63Fc4.jpg?s=128&g=1", "display_name": "vinoth", "link": "https://stackoverflow.com/users/7995316/vinoth"}, "is_accepted": false, "score": 0, "last_activity_date": 1600407494, "creation_date": 1600407494, "answer_id": 63949907, "question_id": 32218096, "link": "https://stackoverflow.com/questions/32218096/ruby-on-rails-rake-testunits-error/63949907#63949907", "title": "Ruby on Rails rake test:units error", "body": "<p>I think you missed this in products.yml</p>\n<pre><code>ruby:\n    title: Programming Ruby 1.9 \n    description:\n        Ruby is the fastest growing and most exciting dynamic language out there. \n        If you need to get working programs delivered fast, you should add Ruby to \n        your toolbox.\n    price: 49.50\n    image_url: ruby.jpg\n</code></pre>\n"}], "owner": {"reputation": 1006, "user_id": 5084274, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-fbGQrddTMpM/AAAAAAAAAAI/AAAAAAAAAKs/q8Eolhwsznc/photo.jpg?sz=128", "display_name": "J&#250;lius Marko", "link": "https://stackoverflow.com/users/5084274/j%c3%balius-marko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1600407494, "creation_date": 1440563844, "question_id": 32218096, "link": "https://stackoverflow.com/questions/32218096/ruby-on-rails-rake-testunits-error", "title": "Ruby on Rails rake test:units error", "body": "<p>I have a problem about product_text.rb</p>\n\n<p>I'm newbie in RoR, this example is from Agile Web Development from Sam Ruby and Dave Thomas. </p>\n\n<p>my product_test.rb looks like this </p>\n\n<pre><code>#---\n# Excerpted from \"Agile Web Development with Rails\",\n# published by The Pragmatic Bookshelf.\n# Copyrights apply to this code. It may not be used to create training material, \n# courses, books, articles, and the like. Contact us if you are in doubt.\n# We make no guarantees that this code is fit for any purpose. \n# Visit http://www.pragmaticprogrammer.com/titles/rails4 for more book information.\n#---\n#---\n# Excerpted from \"Agile Web Development with Rails, 4rd Ed.\",\n# published by The Pragmatic Bookshelf.\n# Copyrights apply to this code. It may not be used to create training material, \n# courses, books, articles, and the like. Contact us if you are in doubt.\n# We make no guarantees that this code is fit for any purpose. \n# Visit http://www.pragmaticprogrammer.com/titles/rails4 for more book information.\n#---\nrequire 'test_helper'\n\nclass ProductTest &lt; ActiveSupport::TestCase\n  test \"product attributes must not be empty\" do\n    product = Product.new\n    assert product.invalid?\n    assert product.errors[:title].any?\n    assert product.errors[:description].any?\n    assert product.errors[:price].any?\n    assert product.errors[:image_url].any?\n  end\n\n  test \"product price must be positive\" do\n    product = Product.new(:title       =&gt; \"My Book Title\",\n                          :description =&gt; \"yyy\",\n                          :image_url   =&gt; \"zzz.jpg\")\n    product.price = -1\n    assert product.invalid?\n    assert_equal \"must be greater than or equal to 0.01\", \n      product.errors[:price].join('; ')\n\n    product.price = 0\n    assert product.invalid?\n    assert_equal \"must be greater than or equal to 0.01\", \n      product.errors[:price].join('; ')\n\n    product.price = 1\n    assert product.valid?\n  end\n\n  def new_product(image_url)\n    Product.new(:title       =&gt; \"My Book Title\",\n                :description =&gt; \"yyy\",\n                :price       =&gt; 1,\n                :image_url   =&gt; image_url)\n  end\n\n  test \"image url\" do\n    ok = %w{ fred.gif fred.jpg fred.png FRED.JPG FRED.Jpg\n             http://a.b.c/x/y/z/fred.gif }\n    bad = %w{ fred.doc fred.gif/more fred.gif.more }\n\n    ok.each do |name|\n      assert new_product(name).valid?, \"#{name} shouldn't be invalid\"\n    end\n\n    bad.each do |name|\n      assert new_product(name).invalid?, \"#{name} shouldn't be valid\"\n    end\n  end\n\n  test \"product is not valid without a unique title\" do\n    product = Product.new(:title       =&gt; products(:ruby).title,\n                          :description =&gt; \"yyy\", \n                          :price       =&gt; 1, \n                          :image_url   =&gt; \"fred.gif\")\n\n    assert !product.save\n    assert_equal \"has already been taken\", product.errors[:title].join('; ')\n  end\n\n  test \"product is not valid without a unique title - i18n\" do\n    product = Product.new(:title       =&gt; products(:ruby).title,\n                          :description =&gt; \"yyy\", \n                          :price       =&gt; 1, \n                          :image_url   =&gt; \"fred.gif\")\n\n    assert !product.save\n    assert_equal I18n.translate('activerecord.errors.messages.taken'),\n                 product.errors[:title].join('; ')\n  end\n\nend\n</code></pre>\n\n<p>and the output from the console:</p>\n\n<pre><code>juldou-programming@juldou-programming-laptop:~/work/depot$ rake --trace  test:units\n(in /home/juldou-programming/work/depot)\n** Invoke test:units (first_time)\n** Invoke test:prepare (first_time)\n** Invoke db:test:prepare (first_time)\n** Invoke db:abort_if_pending_migrations (first_time)\n** Invoke environment (first_time)\n** Execute environment\n** Execute db:abort_if_pending_migrations\n** Execute db:test:prepare\n** Invoke db:test:load (first_time)\n** Invoke db:test:purge (first_time)\n** Invoke environment \n** Execute db:test:purge\n** Execute db:test:load\n** Invoke db:schema:load (first_time)\n** Invoke environment \n** Execute db:schema:load\n** Execute test:prepare\n** Execute test:units\nLoaded suite /usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake/rake_test_loader\nStarted\n[deprecated] I18n.enforce_available_locales will default to true in the future. If you really want to skip validation of your locale you can set I18n.enforce_available_locales = false to avoid this message.\n..EE.\nFinished in 0.075767 seconds.\n\n  1) Error:\ntest_product_is_not_valid_without_a_unique_title(ProductTest):\nStandardError: No fixture with name 'ruby' found for table 'products'\n    /test/unit/product_test.rb:69:in `test_product_is_not_valid_without_a_unique_title'\n\n  2) Error:\ntest_product_is_not_valid_without_a_unique_title_-_i18n(ProductTest):\nStandardError: No fixture with name 'ruby' found for table 'products'\n    /test/unit/product_test.rb:79:in `test_product_is_not_valid_without_a_unique_title_-_i18n'\n\n5 tests, 19 assertions, 0 failures, 2 errors\nrake aborted!\nCommand failed with status (1): [/usr/bin/ruby1.8 -I\"lib:test\" \"/usr/lib/ru...]\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:995\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:1010:in `call'\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:1010:in `sh'\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:1094:in `sh'\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:1029:in `ruby'\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:1094:in `ruby'\n/usr/lib/ruby/gems/1.8/gems/railties-3.0.7/lib/rails/test_unit/testing.rake:26\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:1112:in `verbose'\n/usr/lib/ruby/gems/1.8/gems/railties-3.0.7/lib/rails/test_unit/testing.rake:11\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:636:in `call'\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:636:in `execute'\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:631:in `each'\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:631:in `execute'\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:597:in `invoke_with_call_chain'\n/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain'\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:583:in `invoke'\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2051:in `invoke_task'\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2029:in `top_level'\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2029:in `each'\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2029:in `top_level'\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2023:in `top_level'\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2001:in `run'\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake.rb:1998:in `run'\n/usr/lib/ruby/gems/1.8/gems/rake-0.8.7/bin/rake:31\n/usr/bin/rake:19:in `load'\n/usr/bin/rake:19\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["python", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 41246, "user_id": 129655, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa81588f4aa842d08c9539f9313df4cc?s=128&d=identicon&r=PG", "display_name": "Platinum Azure", "link": "https://stackoverflow.com/users/129655/platinum-azure"}, "is_accepted": true, "score": 10, "last_activity_date": 1510023240, "last_edit_date": 1510023240, "creation_date": 1440562895, "answer_id": 32217950, "question_id": 32217931, "link": "https://stackoverflow.com/questions/32217931/python-equivalent-of-rubys-select/32217950#32217950", "title": "Python equivalent of Ruby&#39;s .select", "body": "<p>Python has a built-in <a href=\"https://docs.python.org/2/library/functions.html#filter\" rel=\"nofollow noreferrer\"><code>filter</code></a> function:</p>\n\n<pre><code>lst = [1, 2, 3, 4, 5, 6]\nfiltered = filter(lambda x: x &lt; 5, lst)\n</code></pre>\n\n<p>But list comprehensions might flow better, especially when combining with map operations:</p>\n\n<pre><code>mapped_and_filtered = [x*2 for x in lst if x &lt; 5]\n# compare to:\nmapped_and_filtered = map(lambda y: y*2, filter(lambda x: x &lt; 5, lst))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": false, "score": 2, "last_activity_date": 1440562950, "creation_date": 1440562950, "answer_id": 32217961, "question_id": 32217931, "link": "https://stackoverflow.com/questions/32217931/python-equivalent-of-rubys-select/32217961#32217961", "title": "Python equivalent of Ruby&#39;s .select", "body": "<p>One option is to use list comprehension:</p>\n\n<pre><code>&gt;&gt;&gt; [a for a in x if a &lt; 5]\n[1, 2, 3, 4]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 74709, "user_id": 21945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631470ecb1d4fe8bd3be6d7e0dfe4449?s=128&d=identicon&r=PG", "display_name": "mhawke", "link": "https://stackoverflow.com/users/21945/mhawke"}, "is_accepted": false, "score": 2, "last_activity_date": 1440562961, "creation_date": 1440562961, "answer_id": 32217967, "question_id": 32217931, "link": "https://stackoverflow.com/questions/32217931/python-equivalent-of-rubys-select/32217967#32217967", "title": "Python equivalent of Ruby&#39;s .select", "body": "<p>Using a list comprehension is considered \"Pythonic\":</p>\n\n<pre><code>x = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\nz = [i for i in x if i &lt; 5]\nprint z\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>[1, 2, 3, 4]\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 5253677, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VJfoG2eOSz8/AAAAAAAAAAI/AAAAAAAAAG0/j0RUOi79qV8/photo.jpg?sz=128", "display_name": "tperera11", "link": "https://stackoverflow.com/users/5253677/tperera11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3081, "favorite_count": 1, "accepted_answer_id": 32217950, "answer_count": 3, "score": 8, "last_activity_date": 1510023240, "creation_date": 1440562749, "last_edit_date": 1440562965, "question_id": 32217931, "link": "https://stackoverflow.com/questions/32217931/python-equivalent-of-rubys-select", "title": "Python equivalent of Ruby&#39;s .select", "body": "<p>I have an list/array, lets call it <code>x</code>, and I want to create a new list/array, lets call this one <code>z</code>, out of elements from <code>x</code> that match a certain condition.</p>\n\n<p>In Ruby you could do that by calling the .select method on the list/array like so:</p>\n\n<pre><code>x = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\nz = x.select{|a| a &lt; 5}\n</code></pre>\n\n<p>After this <code>z</code> would look like this:</p>\n\n<pre><code>z = [1, 2, 3, 4]\n</code></pre>\n\n<p>Is there a function/method in Python that I could use to get the same effect?</p>\n\n<p>If not, what is the cleanest way I could do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rake", "bundler"], "comments": [{"owner": {"reputation": 2591, "user_id": 2689541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efb8ec80d1ae2fd19fb7629da7e702db?s=128&d=identicon&r=PG&f=1", "display_name": "haradwaith", "link": "https://stackoverflow.com/users/2689541/haradwaith"}, "edited": false, "score": 0, "creation_date": 1441011662, "post_id": 32217900, "comment_id": 52490329, "body": "Could you share your Rakefile? I can&#39;t reproduce the difference between &quot;rake&quot; and &quot;rake spec&quot; on my computer."}, {"owner": {"reputation": 2591, "user_id": 2689541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efb8ec80d1ae2fd19fb7629da7e702db?s=128&d=identicon&r=PG&f=1", "display_name": "haradwaith", "link": "https://stackoverflow.com/users/2689541/haradwaith"}, "edited": false, "score": 1, "creation_date": 1441013378, "post_id": 32217900, "comment_id": 52491274, "body": "I also responded to your 4th remark in an edit of my response."}, {"owner": {"reputation": 1450, "user_id": 1763937, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d39d98c533ff828b5b3c8ac1ea3b0de?s=128&d=identicon&r=PG", "display_name": "Ilya O.", "link": "https://stackoverflow.com/users/1763937/ilya-o"}, "reply_to_user": {"reputation": 2591, "user_id": 2689541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efb8ec80d1ae2fd19fb7629da7e702db?s=128&d=identicon&r=PG&f=1", "display_name": "haradwaith", "link": "https://stackoverflow.com/users/2689541/haradwaith"}, "edited": false, "score": 0, "creation_date": 1441045431, "post_id": 32217900, "comment_id": 52510057, "body": "My Rakefile is the rails standard one, consisting of the following two lines:  1) <code>require File.expand_path(&#39;..&#47;config&#47;application&#39;, __FILE__)</code>  and 2) <code>Rails.application.load_tasks</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1450, "user_id": 1763937, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d39d98c533ff828b5b3c8ac1ea3b0de?s=128&d=identicon&r=PG", "display_name": "Ilya O.", "link": "https://stackoverflow.com/users/1763937/ilya-o"}, "edited": false, "score": 0, "creation_date": 1440773035, "post_id": 32271715, "comment_id": 52426322, "body": "Thanks for the answer! Please see the updated question for my full response."}, {"owner": {"reputation": 1450, "user_id": 1763937, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d39d98c533ff828b5b3c8ac1ea3b0de?s=128&d=identicon&r=PG", "display_name": "Ilya O.", "link": "https://stackoverflow.com/users/1763937/ilya-o"}, "edited": false, "score": 0, "creation_date": 1441045342, "post_id": 32271715, "comment_id": 52510018, "body": "That is a great point! Just tested it with <code>rake app</code> and <code>rake lib</code> and sure enough, the same behavior occurred! (Exit 0, brief pause, no output). Thank you so much for shedding light on this."}], "tags": [], "owner": {"reputation": 2591, "user_id": 2689541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efb8ec80d1ae2fd19fb7629da7e702db?s=128&d=identicon&r=PG&f=1", "display_name": "haradwaith", "link": "https://stackoverflow.com/users/2689541/haradwaith"}, "is_accepted": true, "score": 9, "last_activity_date": 1441012774, "last_edit_date": 1441012774, "creation_date": 1440766933, "answer_id": 32271715, "question_id": 32217900, "link": "https://stackoverflow.com/questions/32217900/rake-spec-doesnt-run-with-custom-rails-env-but-rspec-and-bundle-exec-rspec/32271715#32271715", "title": "&#39;rake spec&#39; doesn&#39;t run with custom RAILS_ENV but &#39;rspec&#39; and &#39;bundle exec rspec&#39; do", "body": "<p>Several points:</p>\n\n<h3>rspec</h3>\n\n<p><code>rspec</code> and <code>bundle exec rspec</code> always run your tests because it uses directly the <code>rspec</code> executable.</p>\n\n<h3>rake</h3>\n\n<p>The gem <code>rspec-rails</code> defines some rake tasks, including the <code>spec</code> task. However, <code>rake</code> will only be able to run this task if the rspec gem has been loaded in the used environment. If you have something like this in your Gemfile:</p>\n\n<pre><code>group :test, :development do\n  gem 'rspec-rails', '~&gt; 3.0'\nend\n</code></pre>\n\n<p>The <code>spec</code> task command will only work in the test and development environment, and not with <code>RAILS_ENV=ci</code>.</p>\n\n<h3>bundle</h3>\n\n<p>It is recommended to always use <code>bundle exec</code> to run a ruby executable. From the <a href=\"http://bundler.io/\">Bundler website</a>:</p>\n\n<blockquote>\n  <p>In some cases, running executables without <code>bundle exec</code> may work, if\n  the executable happens to be installed in your system and does not\n  pull in any gems that conflict with your bundle.</p>\n  \n  <p>However, this is unreliable and is the source of considerable pain.\n  Even if it looks like it works, it may not work in the future or on\n  another machine.</p>\n</blockquote>\n\n<p>Without <code>bundle exec</code>, the executable may have unexpected or inconsistent behavior, by mixing other gems or gem versions already installed on your machine.</p>\n\n<p>In your case, the fact that <code>RAILS_ENV=ci rake</code> works and <code>RAILS_ENV=ci rake spec</code> doesn't could be caused by some conflict with an older version of <code>rspec-spec</code>, or by some other gem defining other default rake task.</p>\n\n<p>In any case, this behavior is nor a bug and is probably specific to your machine. I'd recommend using exclusively <code>bundle exec rspec</code> to run your tests.</p>\n\n<hr>\n\n<p>EDIT: In response to your remarks:</p>\n\n<p>4 - The fact that <code>rake spec</code> doesn't crash even if <code>rspec-rails</code> is not loaded is a tricky part. When you try to run a task <code>example</code>, <code>rake</code> first searches for the task <code>example</code> in the loaded rakefiles. If it doesn't find it, it will check if the file <code>example</code> exists in your project. If it does, it will try to execute so task from this file.</p>\n\n<p>In your case, the file <code>spec</code> exists in your project, and is a directory. So when you do <code>rake spec</code>, if the task <code>spec</code> doesn't exists, it will load your <code>spec</code> file, and do nothing before there is no task to run in it.</p>\n\n<p>That's why <code>rake blublu</code> will fail, but <code>rake spec</code> or <code>rake app</code> won't.</p>\n"}], "owner": {"reputation": 1450, "user_id": 1763937, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d39d98c533ff828b5b3c8ac1ea3b0de?s=128&d=identicon&r=PG", "display_name": "Ilya O.", "link": "https://stackoverflow.com/users/1763937/ilya-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1712, "favorite_count": 1, "accepted_answer_id": 32271715, "answer_count": 1, "score": 7, "last_activity_date": 1441012774, "creation_date": 1440562552, "last_edit_date": 1495541785, "question_id": 32217900, "link": "https://stackoverflow.com/questions/32217900/rake-spec-doesnt-run-with-custom-rails-env-but-rspec-and-bundle-exec-rspec", "title": "&#39;rake spec&#39; doesn&#39;t run with custom RAILS_ENV but &#39;rspec&#39; and &#39;bundle exec rspec&#39; do", "body": "<p>So I'm having a bit of a bizarre issue. I have a custom rails environment setup for my CI server which is running linux. The environment gets loaded properly, and the tests DO run on the CI server, but only if I run them with <code>bundle exec rspec</code> instead of <code>bundle exec rake spec</code> or <code>bundle exec rake</code>.</p>\n\n<p>When the tests don't run, they still return an exit code of 0 and the CI server assumes the build was successful, even if theoretically the build may be broken.</p>\n\n<p>Identical behavior occurs on my machine, which is running OS X.</p>\n\n<p>Here's a console session with all the different test cases to better illustrate what's happening.</p>\n\n<h2>No RAILS_ENV specified</h2>\n\n<pre><code>~/myapp $ rake\n/Users/io/.rvm/rubies/ruby-2.2.0/bin/ruby -I/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/lib:/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-support-3.3.0/lib /Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/exe/rspec --pattern spec/\\*\\*\\{,/\\*/\\*\\*\\}/\\*_spec.rb\n...............................................\n\nFinished in 4.34 seconds (files took 3.1 seconds to load)\n47 examples, 0 failures\n# -----\n~/myapp $ rake spec\n/Users/io/.rvm/rubies/ruby-2.2.0/bin/ruby -I/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/lib:/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-support-3.3.0/lib /Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/exe/rspec --pattern spec/\\*\\*\\{,/\\*/\\*\\*\\}/\\*_spec.rb\n...............................................\n\nFinished in 3.8 seconds (files took 3.36 seconds to load)\n47 examples, 0 failures\n# -----\n~/myapp $ rspec\n...............................................\n\nFinished in 3.87 seconds (files took 2.98 seconds to load)\n47 examples, 0 failures\n# -----\n~/myapp $ bundle exec rake\n/Users/io/.rvm/rubies/ruby-2.2.0/bin/ruby -I/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/lib:/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-support-3.3.0/lib /Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/exe/rspec --pattern spec/\\*\\*\\{,/\\*/\\*\\*\\}/\\*_spec.rb\n...............................................\n\nFinished in 3.9 seconds (files took 3.03 seconds to load)\n47 examples, 0 failures\n# -----\n~/myapp $ bundle exec rake spec\n/Users/io/.rvm/rubies/ruby-2.2.0/bin/ruby -I/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/lib:/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-support-3.3.0/lib /Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/exe/rspec --pattern spec/\\*\\*\\{,/\\*/\\*\\*\\}/\\*_spec.rb\n...............................................\n\nFinished in 3.64 seconds (files took 2.97 seconds to load)\n47 examples, 0 failures\n# -----\n~/myapp $ bundle exec rspec\n...............................................\n\nFinished in 3.75 seconds (files took 2.95 seconds to load)\n47 examples, 0 failures\n</code></pre>\n\n<p>Everything is working as expected</p>\n\n<h2>With a standard RAILS_ENV</h2>\n\nResults are identical with test, development, or production\n\n<pre><code>~/myapp $ RAILS_ENV=test rake\n/Users/io/.rvm/rubies/ruby-2.2.0/bin/ruby -I/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/lib:/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-support-3.3.0/lib /Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/exe/rspec --pattern spec/\\*\\*\\{,/\\*/\\*\\*\\}/\\*_spec.rb\n...............................................\n\nFinished in 3.86 seconds (files took 3.07 seconds to load)\n47 examples, 0 failures\n# -----\n~/myapp $ RAILS_ENV=test rake spec\n/Users/io/.rvm/rubies/ruby-2.2.0/bin/ruby -I/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/lib:/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-support-3.3.0/lib /Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/exe/rspec --pattern spec/\\*\\*\\{,/\\*/\\*\\*\\}/\\*_spec.rb\n...............................................\n\nFinished in 3.9 seconds (files took 3.02 seconds to load)\n47 examples, 0 failures\n# -----\n~/myapp $ RAILS_ENV=test rspec    \n...............................................\n\nFinished in 3.82 seconds (files took 2.98 seconds to load)\n47 examples, 0 failures\n# -----\n~/myapp $ RAILS_ENV=test bundle exec rake\n/Users/io/.rvm/rubies/ruby-2.2.0/bin/ruby -I/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/lib:/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-support-3.3.0/lib /Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/exe/rspec --pattern spec/\\*\\*\\{,/\\*/\\*\\*\\}/\\*_spec.rb\n...............................................\n\nFinished in 3.76 seconds (files took 2.91 seconds to load)\n47 examples, 0 failures\n# ------\n~/myapp $ RAILS_ENV=test bundle exec rake spec\n/Users/io/.rvm/rubies/ruby-2.2.0/bin/ruby -I/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/lib:/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-support-3.3.0/lib /Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/exe/rspec --pattern spec/\\*\\*\\{,/\\*/\\*\\*\\}/\\*_spec.rb\n...............................................\n\nFinished in 3.83 seconds (files took 2.99 seconds to load)\n47 examples, 0 failures\n# -----\n~/myapp $ RAILS_ENV=test bundle exec rspec    \n...............................................\n\nFinished in 3.83 seconds (files took 3.11 seconds to load)\n47 examples, 0 failures\n</code></pre>\n\n<p>Once again everything is fine and dandy.</p>\n\n<h2>With a custom RAILS_ENV</h2>\n\n<pre><code>~/myapp $ RAILS_ENV=ci rake\n/Users/io/.rvm/rubies/ruby-2.2.0/bin/ruby -I/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/lib:/Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-support-3.3.0/lib /Users/io/.rvm/gems/ruby-2.2.0/gems/rspec-core-3.3.2/exe/rspec --pattern spec/\\*\\*\\{,/\\*/\\*\\*\\}/\\*_spec.rb\n...............................................\n\nFinished in 3.73 seconds (files took 3.03 seconds to load)\n47 examples, 0 failures\n# -----\n~/myapp $ RAILS_ENV=ci rake spec\n# No output, just a brief pause and back to shell prompt\n~/myapp $ RAILS_ENV=ci rspec    \n...............................................\n\nFinished in 7.82 seconds (files took 2.96 seconds to load)\n47 examples, 0 failures\n# -----\n~/myapp $ RAILS_ENV=ci bundle exec rake\n# No output, just a brief pause and back to shell prompt\n~/myapp $ RAILS_ENV=ci bundle exec rake spec\n# No output, just a brief pause and back to shell prompt\n~/myapp $ RAILS_ENV=ci bundle exec rspec    \n...............................................\n\nFinished in 7.77 seconds (files took 2.8 seconds to load)\n47 examples, 0 failures\n</code></pre>\n\n<p>Due to the nature of the CI server's setup, I have to run the tests within <code>bundle exec</code>. But what I find mind boggling is that on my machine <code>RAILS_ENV=ci rake</code> works flawlessly, while <code>RAILS_ENV=ci rake spec</code> doesn't run.</p>\n\n<p>But when I wrap them in a <code>bundle exec</code> neither <code>rake</code> nor <code>rake spec</code> run in <code>RAILS_ENV=ci</code> but <code>bundle exec rspec</code> works fine.</p>\n\n<p>Can someone explain what is going on here? I can't find a way for this to make any  logical sense. Have I stumbled upon a bug in Rails' rake tasks?</p>\n\n<p>EDIT: In response to <a href=\"https://stackoverflow.com/a/32271715/1763937\">haradwaith's answer</a>:\nYou bring up some really good points, and the first point is spot on (it runs the rspec executable directly), but I can't say your answer adequately explains what's happening.</p>\n\n<ol>\n<li><p>This behavior is not specific to my machine, the behavior is identical on a clean ruby:2.2 Docker container which runs bundle install before every test. As it loads a clean container each time, there is no way for \"old\" versions of gems to creep in.</p></li>\n<li><p>To further replicate the \"clean slate\" of the Docker container, I just did a test on my machine with an empty gemset to rule out gem version conflicts and got identical results: <a href=\"http://pastebin.com/9u3MJaFw\" rel=\"nofollow noreferrer\">http://pastebin.com/9u3MJaFw</a></p></li>\n<li><p>My Gemfile does indeed have no mention of a <code>:ci</code> group. If the <code>rspec-rails</code> gem isn't being loaded, then <code>RAILS_ENV=ci rake</code> with no arguments wouldn't run Rspec as the default Rake task, but it clearly does. We can also see that it has different behavior depending on whether or not its being ran with <code>bundle exec</code>. I don't believe that running with <code>bundle exec</code> would \"unload\" <code>rspec-rails</code> if running it without <code>bundler</code> somehow manages to load it automatically.</p></li>\n<li><p>If <code>rspec</code> and/or <code>rspec-rails</code> weren't being loaded, the <code>rake</code> would fail with an exit code other than <code>0</code>, and spit out something like:</p>\n\n<p>~/not-myapp $ touch Rakefile</p>\n\n<p>~/not-myapp $ rake spec</p>\n\n<p>rake aborted!</p>\n\n<p>Don't know how to build task 'spec'</p>\n\n<p>(See full trace by running task with --trace)</p></li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby", "params"], "answers": [{"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 3, "last_activity_date": 1440563176, "creation_date": 1440563176, "answer_id": 32217999, "question_id": 32217794, "link": "https://stackoverflow.com/questions/32217794/how-does-rails-params-parse-hash-from-string/32217999#32217999", "title": "How does Rails params parse hash from string", "body": "<p>The GET parameters are set from <code>ActionDispatch::Request#GET</code>, which extends <code>Rack::Request#GET</code>, which uses <a href=\"https://github.com/rack/rack/blob/master/lib/rack/query_parser.rb\" rel=\"nofollow\"><code>Rack::QueryParser#parse_nested_query</code></a>.</p>\n\n<p>The POST parameters are set from <code>ActionDispatch::Request#POST</code>, which extends <code>Rack::Request#POST</code>, which uses <a href=\"https://github.com/rack/rack/blob/master/lib/rack/multipart.rb\" rel=\"nofollow\"><code>Rack::Multipart#parse_multipart</code></a>. That splays through several more files in <a href=\"https://github.com/rack/rack/tree/master/lib/rack/multipart\" rel=\"nofollow\"><code>lib/rack/multipart</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 3020, "user_id": 4493564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZrR5HKgzmQA/AAAAAAAAAAI/AAAAAAAAA2Y/YxH3F9m512U/photo.jpg?sz=128", "display_name": "Petr Gazarov", "link": "https://stackoverflow.com/users/4493564/petr-gazarov"}, "is_accepted": false, "score": 1, "last_activity_date": 1452048237, "creation_date": 1452048237, "answer_id": 34624776, "question_id": 32217794, "link": "https://stackoverflow.com/questions/32217794/how-does-rails-params-parse-hash-from-string/34624776#34624776", "title": "How does Rails params parse hash from string", "body": "<p>Here is a reproduction of the functionality of the method (note: this is NOT how the method works). Helper methods of interest: <code>#array_to_hash</code> and <code>#handle_nested_hash_array</code></p>\n\n<pre><code>require 'uri'\n\nclass Params\n  def initialize(req, route_params = {})\n    @params = {}\n\n    route_params.keys.each do |key|\n      handle_nested_hash_array([{key =&gt; route_params[key]}])\n    end\n\n    parse_www_encoded_form(req.query_string) if req.query_string\n    parse_www_encoded_form(req.body) if req.body\n  end\n\n  def [](key)\n    @params[key.to_sym] || @params[key.to_s]\n  end\n\n  def to_s\n    @params.to_s\n  end\n\n  class AttributeNotFoundError &lt; ArgumentError; end;\n\n  private\n\n  def parse_www_encoded_form(www_encoded_form)\n    params_array = URI::decode_www_form(www_encoded_form).map do |k, v|\n      [parse_key(k), v]\n    end\n\n    params_array.map! do |sub_array|\n      array_to_hash(sub_array.flatten)\n    end\n\n    handle_nested_hash_array(params_array)\n  end\n\n  def handle_nested_hash_array(params_array)\n    params_array.each do |working_hash|\n      params = @params\n\n      while true\n        if params.keys.include?(working_hash.keys[0])\n          params = params[working_hash.keys[0]]\n          working_hash = working_hash[working_hash.keys[0]]\n        else\n          break\n        end\n\n        break if !working_hash.values[0].is_a?(Hash)\n        break if !params.values[0].is_a?(Hash)\n      end\n\n      params.merge!(working_hash)\n    end\n  end\n\n  def array_to_hash(params_array)\n    return params_array.join if params_array.length == 1\n\n    hash = {}\n    hash[params_array[0]] = array_to_hash(params_array.drop(1))\n\n    hash\n  end\n\n  def parse_key(key)\n    key.split(/\\]\\[|\\[|\\]/)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 3020, "user_id": 4493564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZrR5HKgzmQA/AAAAAAAAAAI/AAAAAAAAA2Y/YxH3F9m512U/photo.jpg?sz=128", "display_name": "Petr Gazarov", "link": "https://stackoverflow.com/users/4493564/petr-gazarov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2145, "favorite_count": 2, "accepted_answer_id": 32217999, "answer_count": 2, "score": 3, "last_activity_date": 1452048237, "creation_date": 1440561846, "question_id": 32217794, "link": "https://stackoverflow.com/questions/32217794/how-does-rails-params-parse-hash-from-string", "title": "How does Rails params parse hash from string", "body": "<p>I'm learning Ruby on Rails and got curious how the params method works. I understand what it does, but how? </p>\n\n<p>Is there a built-in method that takes a hash string like so </p>\n\n<pre><code>\"cat[name]\"\n</code></pre>\n\n<p>and translates it to </p>\n\n<pre><code>{ :cat =&gt; { :name =&gt; &lt;assigned_value&gt; } } \n</code></pre>\n\n<p>?</p>\n\n<p>I have attempted to write the params method myself but am not sure how to write this functionality in ruby.</p>\n"}, {"tags": ["ruby", "unit-testing", "rspec", "twitter-streaming-api", "tweetstream"], "answers": [{"tags": [], "owner": {"reputation": 15367, "user_id": 66945, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9cfa271fb69f3c757657d10aa29fc65b?s=128&d=identicon&r=PG", "display_name": "Rishav Rastogi", "link": "https://stackoverflow.com/users/66945/rishav-rastogi"}, "is_accepted": false, "score": 0, "last_activity_date": 1440558519, "creation_date": 1440558519, "answer_id": 32217367, "question_id": 32217186, "link": "https://stackoverflow.com/questions/32217186/how-to-mock-a-streaming-api-with-rspec/32217367#32217367", "title": "How to mock a streaming API with RSpec?", "body": "<p>Read the article for a very simple way to test External services using the VCR gem\n<a href=\"https://robots.thoughtbot.com/how-to-stub-external-services-in-tests\" rel=\"nofollow\">https://robots.thoughtbot.com/how-to-stub-external-services-in-tests</a></p>\n\n<p>Lot of people might suggest using this method below, its incomplete and brittle so best to avoid it. </p>\n\n<pre>\n client = Twitter::Client.new\n client.stub(:sample).and_yield(:message)\n</pre>\n"}], "owner": {"reputation": 307, "user_id": 3809888, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/36f9e77a573e873058b98a3de6276a03?s=128&d=identicon&r=PG&f=1", "display_name": "user3809888", "link": "https://stackoverflow.com/users/3809888/user3809888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 474, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440558519, "creation_date": 1440557154, "last_edit_date": 1440557707, "question_id": 32217186, "link": "https://stackoverflow.com/questions/32217186/how-to-mock-a-streaming-api-with-rspec", "title": "How to mock a streaming API with RSpec?", "body": "<p>I'm playing around with the <a href=\"https://github.com/tweetstream/tweetstream\" rel=\"nofollow\">tweetstream gem</a>, which simplifies interaction with the <a href=\"https://dev.twitter.com/streaming/overview\" rel=\"nofollow\">Twitter streaming API</a>.  I'm streaming all tweets just like the code example shown on the gem's page:</p>\n\n<pre><code>TweetStream::Client.new.sample do |status|\n  puts \"#{status.text}\"\nend\n</code></pre>\n\n<p>I've put this in a <code>#capture</code> method with some simple logic to run the stream for only a few seconds and capture all the tweets (the <code>status.text</code> strings) in an array.</p>\n\n<p>I want to write unit tests for <code>#capture</code>.  How would I stub out the stream of tweets?  I'm guessing I'll have store tweets in either a file or a <code>StringIO</code> object, but I don't know how to write the mock to handle whatever TCP interaction is going on with the streaming API. I'm not sure if I should use VCR here, either.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2781, "user_id": 4200307, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/59KSj.jpg?s=128&g=1", "display_name": "Elvn", "link": "https://stackoverflow.com/users/4200307/elvn"}, "edited": false, "score": 0, "creation_date": 1440601069, "post_id": 32216750, "comment_id": 52342556, "body": "Is this your goal? &quot;username&quot; and &quot;email&quot; are combined into a &quot;serial number&quot; type unique index saved within the product table when a product is created. Your wish is make sure that if the same user tries to create another product, any product, they&#39;ll be stopped because that user name and email have been used before to create a product. And you are not using model active record relationships to accomplish any of this logic. Is this the case?"}, {"owner": {"reputation": 1120, "user_id": 3381662, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001425623999/picture?type=large", "display_name": "Aleksandrus", "link": "https://stackoverflow.com/users/3381662/aleksandrus"}, "reply_to_user": {"reputation": 2781, "user_id": 4200307, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/59KSj.jpg?s=128&g=1", "display_name": "Elvn", "link": "https://stackoverflow.com/users/4200307/elvn"}, "edited": false, "score": 0, "creation_date": 1440626066, "post_id": 32216750, "comment_id": 52356896, "body": "No. &quot;username&quot; and &quot;email&quot; have nothing to do with &quot;Product&quot;. They are examples of &quot;unique-index&quot; attributes. It&#39;s like when you are creating an e-mail account, and as you type the desired e-mail, you get the feedback of it&#39;s availability instantaniously. That&#39;s because as you type, the email string is sent to the server and it checks if it already exists in the database. Please read @yez answer, as it shows what I was trying to accomplish"}, {"owner": {"reputation": 2781, "user_id": 4200307, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/59KSj.jpg?s=128&g=1", "display_name": "Elvn", "link": "https://stackoverflow.com/users/4200307/elvn"}, "edited": false, "score": 0, "creation_date": 1440626327, "post_id": 32216750, "comment_id": 52357013, "body": "Okay. Thanks. I was just wondering."}], "answers": [{"comments": [{"owner": {"reputation": 5009, "user_id": 431243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4efe3b97fdc854a143c3e92c95f46571?s=128&d=identicon&r=PG", "display_name": "Troy", "link": "https://stackoverflow.com/users/431243/troy"}, "edited": false, "score": 1, "creation_date": 1440565050, "post_id": 32216873, "comment_id": 52319851, "body": "You could further refine this by gleaning the model name from the controller name - see <a href=\"http://stackoverflow.com/questions/4869917/rails-how-to-get-the-model-class-name-based-on-the-controller-class-name\" title=\"rails how to get the model class name based on the controller class name\">stackoverflow.com/questions/4869917/&hellip;</a> (i.e.<code>controller_name.classify.constantize</code>)"}, {"owner": {"reputation": 1120, "user_id": 3381662, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001425623999/picture?type=large", "display_name": "Aleksandrus", "link": "https://stackoverflow.com/users/3381662/aleksandrus"}, "edited": false, "score": 0, "creation_date": 1440626153, "post_id": 32216873, "comment_id": 52356950, "body": "nice! I didn&#39;t know that a method could simply return a model, as you did in &quot;def model_name ...&quot;"}], "tags": [], "owner": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "is_accepted": true, "score": 3, "last_activity_date": 1440554703, "creation_date": 1440554703, "answer_id": 32216873, "question_id": 32216750, "link": "https://stackoverflow.com/questions/32216750/how-to-call-the-models-where-method-from-applicationcontroller/32216873#32216873", "title": "How to call the model&#39;s where(...) method from ApplicationController", "body": "<p>It would be wise to avoid raw SQL for this.</p>\n\n<p>Would this work?</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  def unique\n    id = if params[:attrName].blank? || params[:attrValue].blank?\n      -2\n    elsif found = model_name.where(params[:attrName] =&gt; params[:attrValue]).take\n      found.id\n    else\n      -1\n    end\n\n    render json: { id: id }\n  end\nend\n</code></pre>\n\n<p>You could put that in <code>application_controller.rb</code> then in both of your <code>ClientsController</code> and <code>ProductsController</code> you would define the <code>model_name</code> method:</p>\n\n<pre><code>class ClientsController &lt; ApplicationController\n  def model_name\n    Client\n  end\nend\n\nclass ProductsController &lt; ApplicationController\n  def model_name\n    Product\n  end\nend\n</code></pre>\n\n<p>This will work but might not be ideal. You might want to let Rails do more of the work by using <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-find\" rel=\"nofollow\"><code>find</code></a> to raise if a model exists or not and <a href=\"http://edgeguides.rubyonrails.org/action_controller_overview.html#strong-parameters\" rel=\"nofollow\">strong params</a> for validating that the params you need are present.</p>\n"}, {"comments": [{"owner": {"reputation": 1120, "user_id": 3381662, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001425623999/picture?type=large", "display_name": "Aleksandrus", "link": "https://stackoverflow.com/users/3381662/aleksandrus"}, "edited": false, "score": 0, "creation_date": 1440634567, "post_id": 32217194, "comment_id": 52359556, "body": "I didn&#39;t fully understand. So, with this approach, how could I check if, for example, the attribute &quot;email&quot; of Client has a value like &quot;example@example.com&quot;? Would it be like this? &quot;def unique(attrName, attrValue) ... end&quot; and use it like &quot; &#39;Client.constantize.unique(&#39;email&#39;, &#39;example@example.com&#39; &quot;?"}, {"owner": {"reputation": 1120, "user_id": 3381662, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001425623999/picture?type=large", "display_name": "Aleksandrus", "link": "https://stackoverflow.com/users/3381662/aleksandrus"}, "edited": false, "score": 0, "creation_date": 1440686490, "post_id": 32217194, "comment_id": 52385249, "body": "nice! I&#39;ll try this too"}], "tags": [], "owner": {"reputation": 16077, "user_id": 319702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Rb5G2.jpg?s=128&g=1", "display_name": "sameera207", "link": "https://stackoverflow.com/users/319702/sameera207"}, "is_accepted": false, "score": 1, "last_activity_date": 1440657923, "last_edit_date": 1440657923, "creation_date": 1440557194, "answer_id": 32217194, "question_id": 32216750, "link": "https://stackoverflow.com/questions/32216750/how-to-call-the-models-where-method-from-applicationcontroller/32217194#32217194", "title": "How to call the model&#39;s where(...) method from ApplicationController", "body": "<p>You can move this to a module and make it return an <code>ActiveRecord</code> relation. the advantage is later you can chain this with other <code>ActiveRecord relations</code> if you wish to, Something like (and note I have used <code>?</code> in my sql condition, instead of directing giving the param )</p>\n\n<pre><code>#module\nmodule UniqueRecord\n  module ClassMethods\n     def unique(params)\n       where(params)\n     end\n  end\n\n  def self.included(receiver) \n    receiver.extend         ClassMethods\n  end\nend\n</code></pre>\n\n<p>and use it in your class</p>\n\n<pre><code>#client.rb\nclass Client &lt; ActiveRecord::Base\n  include UniqueRecord\nend\n\n#product.rb\nclass Product &lt; ActiveRecord::Base\n  include UniqueRecord\nend\n</code></pre>\n\n<p>So now both of your classes has the method <code>unique</code> available. </p>\n\n<p>you can create a hash from the keys and values you get, Ex: you could dynamically create a hash to search email like</p>\n\n<pre><code>hash = {email: 'same@email.com'}\n</code></pre>\n\n<p>and then call the method</p>\n\n<pre><code>Client.unique(hash)\n</code></pre>\n\n<p>and if you want to , you can call it by the class name string </p>\n\n<pre><code>'Client'.constantize.unique(hash)\n</code></pre>\n\n<p>one more thing, it better to return an array of objects (if found) or blank array (if not found) instead of -1, -2. that will make your api consistent. like</p>\n\n<p><code>Client.unique(hash).to_json</code></p>\n"}], "owner": {"reputation": 1120, "user_id": 3381662, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100001425623999/picture?type=large", "display_name": "Aleksandrus", "link": "https://stackoverflow.com/users/3381662/aleksandrus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 3, "accepted_answer_id": 32216873, "answer_count": 2, "score": 1, "last_activity_date": 1440657923, "creation_date": 1440553751, "question_id": 32216750, "link": "https://stackoverflow.com/questions/32216750/how-to-call-the-models-where-method-from-applicationcontroller", "title": "How to call the model&#39;s where(...) method from ApplicationController", "body": "<p>Let's say I have two models: Client and Product</p>\n\n<p>The \"username\" and \"email\" of Client should be \"unique index\", as \"serialnumber\" of Product</p>\n\n<p>When the user is typing on the form field that is unique index, I have an onblur function that sends a request to the controller with the attribute name and attribute value. If a value exists, the user is immediately informed.</p>\n\n<p>In ClientController, I wrote a function that checks if it's unique or not and returns -2 for error, -1 for not exists or a positive number (the id) if exists.</p>\n\n<pre><code>def unique  \n  if params[:attrName].blank? or params[:attrValue].blank?\n    id = \"-2\"\n  else\n    cli = Client.where(\"#{params[:attrName]} = '#{params[:attrValue]}'\").first\n    if cli != nil\n      id = cli[\"id\"]\n    else\n      id = \"-1\"\n    end\n  end\n\n  render :json =&gt; {\n    :id =&gt; id\n  }\nend\n</code></pre>\n\n<p>This is not good for many reasons (SQL Injection vulnerability, violation of DRY, as each controller would have basically the same method.</p>\n\n<p>I'm thinking of writing the \"unique\" function inside ApplicationController, but as you saw above, I should be able to call \"Client.where\" if it's a client, or \"Product.where\" if it's a product. How can I build this function the most \"generically\" possible and the most securily? I'm thinking of raw SQL but I think this is a naive approach.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "ruby-on-rails-4", "rails-activejob"], "comments": [{"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "edited": false, "score": 0, "creation_date": 1440555092, "post_id": 32216529, "comment_id": 52317478, "body": "can you show your   config/application.rb` file? also, what is your Rails version?"}, {"owner": {"reputation": 16077, "user_id": 319702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Rb5G2.jpg?s=128&g=1", "display_name": "sameera207", "link": "https://stackoverflow.com/users/319702/sameera207"}, "edited": false, "score": 0, "creation_date": 1440558145, "post_id": 32216529, "comment_id": 52318151, "body": "@ojdq s answer should work, there is a blog post on how to do the same in engineyard <a href=\"https://blog.engineyard.com/2014/getting-started-with-active-job\" rel=\"nofollow noreferrer\">blog.engineyard.com/2014/getting-started-with-active-job</a>. However I&#39;m more interested to see your stack trace if possible ( so that I can try to track which file gives this error)"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 5072672, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/36909ce80c6d0958869162696cb754cd?s=128&d=identicon&r=PG&f=1", "display_name": "josh", "link": "https://stackoverflow.com/users/5072672/josh"}, "edited": false, "score": 0, "creation_date": 1440557306, "post_id": 32216951, "comment_id": 52317985, "body": "Do I need to change my def perform(user) action in my send_email_job.rb  to new(user)? Getting a ArgumentError (wrong number of arguments (1 for 0)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5245636"}, "reply_to_user": {"reputation": 95, "user_id": 5072672, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/36909ce80c6d0958869162696cb754cd?s=128&d=identicon&r=PG&f=1", "display_name": "josh", "link": "https://stackoverflow.com/users/5072672/josh"}, "edited": false, "score": 0, "creation_date": 1440557987, "post_id": 32216951, "comment_id": 52318126, "body": "In my case I do:  class SendEmailJob &lt; ActiveJob::Base        queue_as :email       def perform(email)             UserMailer.follow_up_email(email).deliver_now       end  end  In controller: def create    @user = User.create(user_params)           SendEmailJob.new(@user.email).enqueue(wait: 20.seconds)     redirect_to root_url end"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5245636"}, "is_accepted": false, "score": 1, "last_activity_date": 1440555367, "creation_date": 1440555367, "answer_id": 32216951, "question_id": 32216529, "link": "https://stackoverflow.com/questions/32216529/ruby-rails-undefined-method-set-for-activejob/32216951#32216951", "title": "Ruby/ Rails: undefined method `set&#39; for ActiveJob", "body": "<p>Try this in your controller:</p>\n\n<pre><code>SendEmailJob.new(@user).enqueue(wait: 20.seconds)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95, "user_id": 5072672, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/36909ce80c6d0958869162696cb754cd?s=128&d=identicon&r=PG&f=1", "display_name": "josh", "link": "https://stackoverflow.com/users/5072672/josh"}, "edited": false, "score": 0, "creation_date": 1440564322, "post_id": 32217343, "comment_id": 52319642, "body": "I had to use SendEmailJob.enqueue(@user)"}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 95, "user_id": 5072672, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/36909ce80c6d0958869162696cb754cd?s=128&d=identicon&r=PG&f=1", "display_name": "josh", "link": "https://stackoverflow.com/users/5072672/josh"}, "edited": false, "score": 0, "creation_date": 1440564378, "post_id": 32217343, "comment_id": 52319660, "body": "right. As you are using Rails 4.1.8, this is the correct syntaxt. 2nd param is an options hash. You don&#39;t send it, if you don&#39;t need it."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 95, "user_id": 5072672, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/36909ce80c6d0958869162696cb754cd?s=128&d=identicon&r=PG&f=1", "display_name": "josh", "link": "https://stackoverflow.com/users/5072672/josh"}, "edited": false, "score": 0, "creation_date": 1440564574, "post_id": 32217343, "comment_id": 52319721, "body": "@josh please consider upvoting/accepting the answer if that helped you to solve your problem. Thanks."}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 95, "user_id": 5072672, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/36909ce80c6d0958869162696cb754cd?s=128&d=identicon&r=PG&f=1", "display_name": "josh", "link": "https://stackoverflow.com/users/5072672/josh"}, "edited": false, "score": 0, "creation_date": 1440564667, "post_id": 32217343, "comment_id": 52319751, "body": "To see how accepting answers work: <a href=\"http://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\" title=\"how does accepting an answer work\">meta.stackexchange.com/questions/5234/&hellip;</a>"}], "tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": true, "score": 1, "last_activity_date": 1440559328, "last_edit_date": 1440559328, "creation_date": 1440558273, "answer_id": 32217343, "question_id": 32216529, "link": "https://stackoverflow.com/questions/32216529/ruby-rails-undefined-method-set-for-activejob/32217343#32217343", "title": "Ruby/ Rails: undefined method `set&#39; for ActiveJob", "body": "<p>ActiveJob was integrated with Rails from version <code>4.2</code></p>\n\n<p>Before that, you needed to use the <code>active_job</code> gem. As you are using Rails version <code>4.1.8</code>, you have to use the <code>active_job</code> gem along with the old syntaxes. <code>.set</code> method was not available before Rails 4.2, so you are getting that error.</p>\n\n<p>However, the syntax for Rails version 4.1 is:</p>\n\n<pre><code>YourJob.enqueue(record)\nYourJob.enqueue(record, options)\n</code></pre>\n\n<p>So, in your case, it would be something like:</p>\n\n<pre><code>SendEmailJob.enqueue(@user, wait: 20.seconds)\n</code></pre>\n\n<p><code>perform_later</code> is introduced in Rails 4.2</p>\n\n<p>See <a href=\"http://kinopyo.com/en/blog/use-activejob-in-rails-4-1\" rel=\"nofollow\">this article</a> for the active job differences between Rails 4.1 and 4.2</p>\n"}], "owner": {"reputation": 95, "user_id": 5072672, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/36909ce80c6d0958869162696cb754cd?s=128&d=identicon&r=PG&f=1", "display_name": "josh", "link": "https://stackoverflow.com/users/5072672/josh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1608, "favorite_count": 2, "accepted_answer_id": 32217343, "answer_count": 2, "score": 2, "last_activity_date": 1440559328, "creation_date": 1440551942, "last_edit_date": 1440557572, "question_id": 32216529, "link": "https://stackoverflow.com/questions/32216529/ruby-rails-undefined-method-set-for-activejob", "title": "Ruby/ Rails: undefined method `set&#39; for ActiveJob", "body": "<p>I created a job like so:</p>\n\n<pre><code>class SendEmailJob &lt; ActiveJob::Base\n  queue_as :default\n\n   def perform(user)\n    @user = user\n    UserMailer.welcome_email(@user).deliver_later\n   end\n\nend\n</code></pre>\n\n<p>That uses my mailer:</p>\n\n<pre><code>class UserMailer &lt; ActionMailer::Base\n\n  def welcome_email(user)\n    @user = user\n    mg_client = Mailgun::Client.new ENV['api_key']\n    message_params = {\n      :from   =&gt; ENV[\"gmail_username\"],\n      :to     =&gt; @user.email,\n      :subject =&gt; \"Welcome\",\n      :text =&gt;    \"This is a welcome email\"\n    }\n    mg_client.send_message ENV[\"domain\"], message_params\n  end\n\nend\n</code></pre>\n\n<p>My controller:</p>\n\n<pre><code>  SendEmailJob.set(wait: 20.seconds).perform_later(@user)\n</code></pre>\n\n<p>I keep getting the following error:\nNoMethodError (undefined method `set' for SendEmailJob:Class):</p>\n\n<p>EDIT config/application.rb\nrequire File.expand_path('../boot', <strong>FILE</strong>)</p>\n\n<pre><code>require 'rails/all'\nrequire 'active_job'\n\n# Require the gems listed in Gemfile, including any gems\n# you've limited to :test, :development, or :production.\nBundler.require(*Rails.groups)\n\nmodule LinkbuilderPro\n  class Application &lt; Rails::Application\n    # Settings in config/environments/* take precedence over those specified here.\n    # Application configuration should go into files in config/initializers\n    # -- all .rb files in that directory are automatically loaded.\n\n    # Set Time.zone default to the specified zone and make Active Record auto-convert to this zone.\n    # Run \"rake -D time\" for a list of tasks for finding time zone names. Default is UTC.\n    # config.time_zone = 'Central Time (US &amp; Canada)'\n\n    # The default locale is :en and all translations from config/locales/*.rb,yml are auto loaded.\n    # config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}').to_s]\n    # config.i18n.default_locale = :de\n  end\nend\n</code></pre>\n\n<p>Rails 4.1.8</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "model", "getter-setter"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1440552298, "post_id": 32216525, "comment_id": 52316873, "body": "If you are thinking that the reason the first way works is because they are interpreted as local variables, then you are entirely wrong."}, {"owner": {"reputation": 2287, "user_id": 2842709, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/30f658c76a63bcb3f40cc305020e6109?s=128&d=identicon&r=PG", "display_name": "MicFin", "link": "https://stackoverflow.com/users/2842709/micfin"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1440552638, "post_id": 32216525, "comment_id": 52316966, "body": "@sawa i thought the way the first way worked was because it first looked for a local variable, didnt find one, and then it look for a getter method. Updated my question to clear up my original misunderstanding.  Thank you for pointing that out.  If you can help, please help!  Or at least remove downvote.  Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 2287, "user_id": 2842709, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/30f658c76a63bcb3f40cc305020e6109?s=128&d=identicon&r=PG", "display_name": "MicFin", "link": "https://stackoverflow.com/users/2842709/micfin"}, "edited": false, "score": 0, "creation_date": 1440553300, "post_id": 32216673, "comment_id": 52317098, "body": "thank you.  Reference to style guides is exactly what I needed to  understand best practices."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 4, "last_activity_date": 1440553071, "creation_date": 1440553071, "answer_id": 32216673, "question_id": 32216525, "link": "https://stackoverflow.com/questions/32216525/is-it-better-practice-to-use-attribute-name-or-self-attribute-name-when-accessin/32216673#32216673", "title": "Is it better practice to use attribute_name or self.attribute_name when accessing within model", "body": "<p>Camp 1: Convention over configuration. Also, <code>self.first_name</code> will not work for private accessors.</p>\n\n<p>Camp 2: You know what's what at a glance, whereas you might forget what methods you have without the explicit receiver.</p>\n\n<p>In the end, it's an opinion question, so I'm voting to close. However, food for thought: </p>\n\n<p><a href=\"https://github.com/bbatsov/ruby-style-guide#no-self-unless-required\" rel=\"nofollow\">bbatsov style guide</a>:</p>\n\n<blockquote>\n  <p>Avoid <code>self</code> where not required. (It is only required when calling a self write accessor.)</p>\n</blockquote>\n\n<p><a href=\"https://github.com/styleguide/ruby\" rel=\"nofollow\">GitHub style guide</a> (based on bbatsov style guide):</p>\n\n<blockquote>\n  <p>Avoid explicit use of <code>self</code> as the recipient of internal class or instance messages unless to specify a method shadowed by a variable.</p>\n</blockquote>\n"}], "owner": {"reputation": 2287, "user_id": 2842709, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/30f658c76a63bcb3f40cc305020e6109?s=128&d=identicon&r=PG", "display_name": "MicFin", "link": "https://stackoverflow.com/users/2842709/micfin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 1, "accepted_answer_id": 32216673, "answer_count": 1, "score": 2, "last_activity_date": 1440553071, "creation_date": 1440551910, "last_edit_date": 1440552597, "question_id": 32216525, "link": "https://stackoverflow.com/questions/32216525/is-it-better-practice-to-use-attribute-name-or-self-attribute-name-when-accessin", "title": "Is it better practice to use attribute_name or self.attribute_name when accessing within model", "body": "<p>For a User model with columns :first_name and :last_name, what is the best way to write the full_name method.  Both seem to work.  </p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n\n    def full_name\n       first_name + last_name\n    end\n\nend\n</code></pre>\n\n<p>Or </p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n\n    def full_name\n       self.first_name + self.last_name\n    end\n\nend\n</code></pre>\n\n<p>I've looked at the SO posts below but am not sure </p>\n\n<p><strong>Why isn't self always needed in ruby / rails / activerecord?</strong></p>\n\n<blockquote>\n  <p>This is because attributes/associations are actually\n  methods(getters/setters) and not local variables. When you state\n  \"parent = value\" Ruby assumes you want to assign the value to the\n  local variable parent.</p>\n  \n  <p>Somewhere up the stack there's a setter method \"def parent=\" and to\n  call that you must use \"self.parent = \" to tell ruby that you actually\n  want to call a setter and not just set a local variable.</p>\n  \n  <p>When it comes to getters Ruby looks to see if there's a local variable\n  first and if can't find it then it tries to find a method with the\n  same name which is why your getter method works without \"self\".</p>\n  \n  <p>In other words it's not the fault of Rails, but it's how Ruby works\n  inherently.\"</p>\n</blockquote>\n\n<p><a href=\"https://stackoverflow.com/questions/5183664/why-isnt-self-always-needed-in-ruby-rails-activerecord\">Why isn&#39;t self always needed in ruby / rails / activerecord?</a></p>\n\n<p><strong>Why use \u201cself\u201d to access ActiveRecord/Rails model properties?</strong></p>\n\n<blockquote>\n  <p>\"Often the use of self is to force Ruby to recognize that as a method\n  call and not mis-interpret it as a variable. Without prior knowledge\n  of a method called day=, then day = \"x\" looks to Ruby like a variable\n  assignment. self.day = \"x\" is always a method call.</p>\n  \n  <p>The reason this is trouble is because the name and name= methods are\n  added dynamically after the User class file has been parsed. The first\n  thing Rails does when using a model is make methods for the associated\n  database fields, but this happens after your user.rb file is parsed.\"</p>\n</blockquote>\n\n<p><a href=\"https://stackoverflow.com/questions/10127393/why-use-self-to-access-activerecord-rails-model-properties/10127425#10127425\">Why use &quot;self&quot; to access ActiveRecord/Rails model properties?</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms"], "comments": [{"owner": {"reputation": 2424, "user_id": 4604645, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yQczD.png?s=128&g=1", "display_name": "The Fabio", "link": "https://stackoverflow.com/users/4604645/the-fabio"}, "edited": false, "score": 1, "creation_date": 1440549233, "post_id": 32216076, "comment_id": 52316172, "body": "are there relationships between the models? <code>belongs_to</code> / <code>has_many</code> / <code>has_one</code>"}, {"owner": {"reputation": 6798, "user_id": 3282434, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd87b9229901acfa4c6f754da6bf3655?s=128&d=identicon&r=PG&f=1", "display_name": "codyc4321", "link": "https://stackoverflow.com/users/3282434/codyc4321"}, "edited": false, "score": 0, "creation_date": 1440549558, "post_id": 32216076, "comment_id": 52316249, "body": "Yes, I&#39;m also on the task.  I have an attempt but it isn&#39;t saving:         <code>&lt;%= f.label :vacation %&gt;&lt;br &#47;&gt;         &lt;%= f.select :vacation_id, options_for_select(Vacation.all.map{|v|[v.name, v.id]}) %&gt;</code>"}, {"owner": {"reputation": 6798, "user_id": 3282434, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd87b9229901acfa4c6f754da6bf3655?s=128&d=identicon&r=PG&f=1", "display_name": "codyc4321", "link": "https://stackoverflow.com/users/3282434/codyc4321"}, "edited": false, "score": 0, "creation_date": 1440549704, "post_id": 32216076, "comment_id": 52316284, "body": "We have a form that makes a new destination which contains the above code ^, but it makes a destination correctly except it doesn&#39;t add the Vacation as a FK. The vacation select box does show our vacations"}, {"owner": {"reputation": 2424, "user_id": 4604645, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yQczD.png?s=128&g=1", "display_name": "The Fabio", "link": "https://stackoverflow.com/users/4604645/the-fabio"}, "edited": false, "score": 1, "creation_date": 1440549867, "post_id": 32216076, "comment_id": 52316322, "body": "With this layout, the table <code>destinations</code> must have a column <code>vacation_id</code> (please check it /add it if necessary ). You can create a new migration and add this column if necessary"}, {"owner": {"reputation": 6798, "user_id": 3282434, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd87b9229901acfa4c6f754da6bf3655?s=128&d=identicon&r=PG&f=1", "display_name": "codyc4321", "link": "https://stackoverflow.com/users/3282434/codyc4321"}, "edited": false, "score": 0, "creation_date": 1440549964, "post_id": 32216076, "comment_id": 52316350, "body": "<code>create_table &quot;destinations&quot;, force: :cascade do |t|     t.integer  &quot;vacation_id&quot; .....</code>  Now I&#39;m more baffled."}, {"owner": {"reputation": 6798, "user_id": 3282434, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd87b9229901acfa4c6f754da6bf3655?s=128&d=identicon&r=PG&f=1", "display_name": "codyc4321", "link": "https://stackoverflow.com/users/3282434/codyc4321"}, "edited": false, "score": 0, "creation_date": 1440550018, "post_id": 32216076, "comment_id": 52316360, "body": "I allow it in the view: <code>params.require(:destination).permit(:vacation, :name, :full_address)</code>"}, {"owner": {"reputation": 6798, "user_id": 3282434, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd87b9229901acfa4c6f754da6bf3655?s=128&d=identicon&r=PG&f=1", "display_name": "codyc4321", "link": "https://stackoverflow.com/users/3282434/codyc4321"}, "edited": false, "score": 0, "creation_date": 1440550131, "post_id": 32216076, "comment_id": 52316381, "body": "Vacation id comes up in the POST, but does not get added in the SQL as follows:"}, {"owner": {"reputation": 6798, "user_id": 3282434, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd87b9229901acfa4c6f754da6bf3655?s=128&d=identicon&r=PG&f=1", "display_name": "codyc4321", "link": "https://stackoverflow.com/users/3282434/codyc4321"}, "edited": false, "score": 0, "creation_date": 1440550166, "post_id": 32216076, "comment_id": 52316390, "body": "<code>...   Parameters: {&quot;utf8&quot;=&gt;&quot;\u2713&quot;, &quot;destination&quot;=&gt;{&quot;vacation_id&quot;=&gt;&quot;40&quot;, &quot;name&quot;=&gt;&quot;fake post&quot;, &quot;full_address&quot;=&gt;&quot;fake post&quot;, &quot;latitude&quot;=&gt;&quot;fake post&quot;, &quot;longitude&quot;=&gt;&quot;fake post&quot;}, &quot;commit&quot;=&gt;&quot;Create&quot;} Unpermitted parameters: vacation_id, latitude, longitude    (0.1ms)  begin transaction   SQL (0.5ms)  INSERT INTO &quot;destinations&quot; (&quot;name&quot;, &quot;full_address&quot;, &quot;created_at&quot;, &quot;updated_at&quot;) VALUES (?, ?, ?, ?)  [[&quot;name&quot;, &quot;fake post&quot;], [&quot;full_address&quot;, &quot;fake post&quot;], ...]</code>"}, {"owner": {"reputation": 2424, "user_id": 4604645, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yQczD.png?s=128&g=1", "display_name": "The Fabio", "link": "https://stackoverflow.com/users/4604645/the-fabio"}, "edited": false, "score": 1, "creation_date": 1440550238, "post_id": 32216076, "comment_id": 52316410, "body": "you might want to permit these ones as well <code>vacation_id, latitude, longitude</code> as your log have them Unpermitted"}, {"owner": {"reputation": 6798, "user_id": 3282434, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd87b9229901acfa4c6f754da6bf3655?s=128&d=identicon&r=PG&f=1", "display_name": "codyc4321", "link": "https://stackoverflow.com/users/3282434/codyc4321"}, "edited": false, "score": 0, "creation_date": 1440550263, "post_id": 32216076, "comment_id": 52316420, "body": "The FK must be explicitly named &quot;modelname_id&quot;, not &quot;modelname&quot; as in Django. Thank you Fabio"}], "answers": [{"tags": [], "owner": {"reputation": 2424, "user_id": 4604645, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yQczD.png?s=128&g=1", "display_name": "The Fabio", "link": "https://stackoverflow.com/users/4604645/the-fabio"}, "is_accepted": false, "score": 1, "last_activity_date": 1440550368, "creation_date": 1440550368, "answer_id": 32216341, "question_id": 32216076, "link": "https://stackoverflow.com/questions/32216076/what-is-the-correct-way-to-submit-a-foreign-key-in-a-form-and-tie-it-to-a-refere/32216341#32216341", "title": "What is the correct way to submit a foreign key in a form and tie it to a reference?", "body": "<p>I think what you are after is a <a href=\"http://apidock.com/rails/ActionView/Helpers/FormTagHelper/select_tag\" rel=\"nofollow\">select_tag</a>:</p>\n\n<p>You could add this line inside your form (you are going in the right track), so you select an existing vacation:</p>\n\n<pre><code>&lt;%= select_tag \"vacation_id\", options_from_collection_for_select(Vacation.all, \"id\", \"name\") %&gt;\n</code></pre>\n\n<p>And the structure of your tables should be as we discussed below the question.</p>\n\n<p>Happy to have helped.</p>\n"}], "owner": {"reputation": 11, "user_id": 5266306, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-j0XqV4XMAy0/AAAAAAAAAAI/AAAAAAAAAes/Q65885CrdHs/photo.jpg?sz=128", "display_name": "Joe Rhodes", "link": "https://stackoverflow.com/users/5266306/joe-rhodes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1440550590, "creation_date": 1440547870, "last_edit_date": 1440550590, "question_id": 32216076, "link": "https://stackoverflow.com/questions/32216076/what-is-the-correct-way-to-submit-a-foreign-key-in-a-form-and-tie-it-to-a-refere", "title": "What is the correct way to submit a foreign key in a form and tie it to a reference?", "body": "<p>I have models with references:</p>\n\n<pre><code>Vacation\n  name:string\n  slug:string:uniq\n  start_at:datetime\n  end_at:datetime\n\nTransportation\n   name:string\n\nDestinations\n  vacation:references\n  transportation:references\n  name:string\n  full_address:string\n  latitude:float\n  longitude:float\n  position:integer\n</code></pre>\n\n<p>I am wondering how can I add a reference in a form submission? I have a form working:</p>\n\n<pre><code>&lt;%= form_for(@vacation) do |f| %&gt;\n        &lt;%= f.label :vacation %&gt;&lt;br&gt;\n        &lt;%= f.text_area :name %&gt;\n      &lt;%= f.submit \"Create\" %&gt;\n</code></pre>\n\n<p>when I submit, it now shows up on the home page. I want to pick a vacation from a select box (I'm close to handling that), like vacation with ID=2, and on form submission, tie this new destination to the selected vacation: ID=2. My working example looks like:</p>\n\n<pre><code>    def create\n        @vacation = Vacation.new(vacation_params)\n        if @vacation.save\n            redirect_to '/'\n        else\n            render 'new'\n        end\n    end\n\n    private \n      def vacation_params\n          params.require(:vacation).permit(:name)\n      end\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby", "regex"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5260526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/668fc801c5382e76edb55df9dfb4aaab?s=128&d=identicon&r=PG&f=1", "display_name": "J Weite", "link": "https://stackoverflow.com/users/5260526/j-weite"}, "edited": false, "score": 0, "creation_date": 1440598442, "post_id": 32215342, "comment_id": 52340558, "body": "I really like the simplicity of it this approach.  I like less that the format string doesn&#39;t directly reference the captures by name.  In practice I&#39;ll have dozens of captures, where keeping names and index numbers aligned will be a maintenance challenge."}, {"owner": {"reputation": 26911, "user_id": 225262, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/10f7602ff38f6486cb1580052746fc05?s=128&d=identicon&r=PG", "display_name": "satoru", "link": "https://stackoverflow.com/users/225262/satoru"}, "reply_to_user": {"reputation": 3, "user_id": 5260526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/668fc801c5382e76edb55df9dfb4aaab?s=128&d=identicon&r=PG&f=1", "display_name": "J Weite", "link": "https://stackoverflow.com/users/5260526/j-weite"}, "edited": false, "score": 0, "creation_date": 1440627661, "post_id": 32215342, "comment_id": 52357570, "body": "@JWeite I&#39;ve updated my answer to use the group name."}, {"owner": {"reputation": 3, "user_id": 5260526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/668fc801c5382e76edb55df9dfb4aaab?s=128&d=identicon&r=PG&f=1", "display_name": "J Weite", "link": "https://stackoverflow.com/users/5260526/j-weite"}, "edited": false, "score": 0, "creation_date": 1440637196, "post_id": 32215342, "comment_id": 52360104, "body": "Nice. Simple and consistency between the regex captures and format placeholders."}], "tags": [], "owner": {"reputation": 26911, "user_id": 225262, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/10f7602ff38f6486cb1580052746fc05?s=128&d=identicon&r=PG", "display_name": "satoru", "link": "https://stackoverflow.com/users/225262/satoru"}, "is_accepted": true, "score": 0, "last_activity_date": 1440627637, "last_edit_date": 1440627637, "creation_date": 1440542886, "answer_id": 32215342, "question_id": 32215268, "link": "https://stackoverflow.com/questions/32215268/reformat-string-with-regexp-named-captures-and-string/32215342#32215342", "title": "Reformat string with `Regexp`, named captures, and `String#%`", "body": "<p>What about using string interpolation directly:</p>\n\n<pre><code>puts \"#{s.match(re)['second']}\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 5260526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/668fc801c5382e76edb55df9dfb4aaab?s=128&d=identicon&r=PG&f=1", "display_name": "J Weite", "link": "https://stackoverflow.com/users/5260526/j-weite"}, "edited": false, "score": 1, "creation_date": 1440598307, "post_id": 32215404, "comment_id": 52340455, "body": "Brilliant ninja array processing.  Not an easy grok.  I was hoping there was a way to transform MatchData into a usable hash directly (ie, inline).  This works great though."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1440543220, "creation_date": 1440543220, "answer_id": 32215404, "question_id": 32215268, "link": "https://stackoverflow.com/questions/32215268/reformat-string-with-regexp-named-captures-and-string/32215404#32215404", "title": "Reformat string with `Regexp`, named captures, and `String#%`", "body": "<p>Try this:</p>\n\n<pre><code>s  = \"One-Two-Three\"\nre = /(?&lt;first&gt;.*?)-(?&lt;second&gt;.*?)-(?&lt;third&gt;.*)/\n\nmatch = s.match(re)\n[match.names.map(&amp;:to_sym), match.captures].transpose.to_h\n# =&gt; {:first=&gt;\"One\", :second=&gt;\"Two\", :third=&gt;\"Three\"}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1440561807, "post_id": 32216669, "comment_id": 52318959, "body": "That is called plagiarism."}, {"owner": {"reputation": 3, "user_id": 5260526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/668fc801c5382e76edb55df9dfb4aaab?s=128&d=identicon&r=PG&f=1", "display_name": "J Weite", "link": "https://stackoverflow.com/users/5260526/j-weite"}, "edited": false, "score": 0, "creation_date": 1440598541, "post_id": 32216669, "comment_id": 52340644, "body": "It was useful to me, though, to see the &lt;2.0 method of converting an array into a hash."}], "tags": [], "owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "is_accepted": false, "score": -1, "last_activity_date": 1440569406, "last_edit_date": 1440569406, "creation_date": 1440553032, "answer_id": 32216669, "question_id": 32215268, "link": "https://stackoverflow.com/questions/32215268/reformat-string-with-regexp-named-captures-and-string/32216669#32216669", "title": "Reformat string with `Regexp`, named captures, and `String#%`", "body": "<p>For ruby &lt; 2.0 you want to use <code>Hash[]</code>:</p>\n\n<pre><code>m = s.match re\nHash[m.names.map(&amp;:to_sym).zip m.captures]\n#=&gt; {:first=&gt;\"One\", :second=&gt;\"Two\", :third=&gt;\"Three\"}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5260526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/668fc801c5382e76edb55df9dfb4aaab?s=128&d=identicon&r=PG&f=1", "display_name": "J Weite", "link": "https://stackoverflow.com/users/5260526/j-weite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 32215342, "answer_count": 3, "score": 0, "last_activity_date": 1440627637, "creation_date": 1440542411, "last_edit_date": 1440543853, "question_id": 32215268, "link": "https://stackoverflow.com/questions/32215268/reformat-string-with-regexp-named-captures-and-string", "title": "Reformat string with `Regexp`, named captures, and `String#%`", "body": "<p>Does anyone know a way to directly use a <code>MatchData</code> object containing named captures as the input to a String template formatting operation (<code>%</code>)?  When I attempt to do so, I get a \"positional args mixed with named args\" error.</p>\n\n<pre><code>s  = \"One-Two-Three\"\nre = /(?&lt;first&gt;.*?)-(?&lt;second&gt;.*?)-(?&lt;third&gt;.*)/\nputs \"%{second}\" % s.match(re)\n</code></pre>\n\n<p>I found other ways to achieve the functional objective (ie by creating an array of the captures in the desired order and using positional templating), but the code is comparatively klunky.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "integration-testing", "rails-routing"], "comments": [{"owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1440545215, "post_id": 32215053, "comment_id": 52315071, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/13996259/testing-error-pages-in-rails-with-rspec-capybara\">Testing error pages in Rails with Rspec + Capybara</a>"}, {"owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1440545290, "post_id": 32215053, "comment_id": 52315103, "body": "I think you may be overthinking this. You should be able to create a simple Capybara acceptance test like <code>visit &quot;&#47;some&#47;unrouted&#47;path&quot;</code> and <code>expect(page).to have_content &quot;404 error&quot;</code>, you just need to the correct settings as in the answer I linked to."}, {"owner": {"reputation": 996, "user_id": 879854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30f2de7af9b9f26154c585a3a5a1f824?s=128&d=identicon&r=PG", "display_name": "BF4", "link": "https://stackoverflow.com/users/879854/bf4"}, "reply_to_user": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1440700895, "post_id": 32215053, "comment_id": 52394269, "body": "I updated the question explaining why I don&#39;t think I can test a fail safe exception with capybara"}, {"owner": {"reputation": 996, "user_id": 879854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30f2de7af9b9f26154c585a3a5a1f824?s=128&d=identicon&r=PG", "display_name": "BF4", "link": "https://stackoverflow.com/users/879854/bf4"}, "reply_to_user": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1441182645, "post_id": 32215053, "comment_id": 52569960, "body": "to clarify, the exception is happening when the ExceptionController is trying to render a non-existent template, which results in a Fail-Safe response.  To test this via capybara I&#39;d need a route that raises an exception that causes the exceptions_app to render a format it doesn&#39;t know how to.  I don&#39;t think that&#39;s possible.  If I just wanted to verify my 404 page, I agree, that would be trivial."}], "owner": {"reputation": 996, "user_id": 879854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30f2de7af9b9f26154c585a3a5a1f824?s=128&d=identicon&r=PG", "display_name": "BF4", "link": "https://stackoverflow.com/users/879854/bf4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1070, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1441741294, "creation_date": 1440541358, "last_edit_date": 1441741294, "question_id": 32215053, "link": "https://stackoverflow.com/questions/32215053/how-to-test-an-unrouted-controller-action-or-exception-app-in-rails", "title": "How to test an unrouted controller action or exception_app in Rails", "body": "<p>We have a custom exception app that has been raising (fail safe) exceptions (the application equivalent of having an exception in a rescue block).</p>\n\n<p>I think I've fixed it, but am finding it hard to test.  It's an unrouted controller, so I can't use controller tests (require routing).  </p>\n\n<p>i.e. I have <code>Rails.configuration.exceptions_app = ExceptionController.action(:show)</code>, not <a href=\"http://blog.plataformatec.com.br/2012/01/my-five-favorite-hidden-features-in-rails-3-2/\" rel=\"nofollow\"><code>Rails.configuration.exceptions_app = self.routes</code></a>.</p>\n\n<p>Basically what I think I need to do is </p>\n\n<ol>\n<li>Generate a test request <code>request = ActionDispatch::TestRequest.new</code></li>\n<li><code>include Rack::Test</code> or maybe mimic behavior in <a href=\"https://github.com/rails/rails/blob/34fa6658dd1b779b21e586f01ee64c6f59ca1537/actionpack/lib/action_dispatch/testing/integration.rb#L647-L674\" rel=\"nofollow\"><code>ActiveSupport::IntegrationTest</code></a></li>\n<li>Set <code>@app = ExceptionsController.action(:show)</code></li>\n<li>Fake an exception <code>request.env.merge! 'action_dispatch.exception' =&gt; ActionController::RoutingError.new(:foo)</code> </li>\n<li>Test <code>response = @app.call(request.env)</code></li>\n<li>Assert no exception is raised and correct response body and status</li>\n</ol>\n\n<p>Problems:</p>\n\n<p>The env needs</p>\n\n<ul>\n<li>a warden / devise session with current_user <code>request.env['warden'] = spy(Warden)</code> and <code>request.session =  ActionDispatch::Integration::Session.new(@app)</code></li>\n<li>to manipulate request formats so that I can check that a request without an <a href=\"https://github.com/plataformatec/responders/blob/8f03848a2f50d4685c15a31254a1f600af947bd7/test/action_controller/respond_with_test.rb#L265-L275\" rel=\"nofollow\">accept</a> defaults to json <code>request.any?(:json)</code>? <code>constraints: { default: :json }</code> ? `request.accept = \"application/javascript\"</li>\n<li>work work with the respond_with responder</li>\n<li>set action_dispatch.show_exceptions, consider all requests local, etc <code>request.env[\"action_dispatch.show_detailed_exceptions\"] = true</code></li>\n</ul>\n\n<p>Also, I considered building a <a href=\"https://github.com/rails/rails/blob/1d43458c148f9532a81b92ee3a247da4f1c0b7ad/actionpack/test/dispatch/show_exceptions_test.rb#L92-L99\" rel=\"nofollow\">ActionDispatch::ShowException.new(app, ExceptionController.new)</a> or a small rack app</p>\n\n<p>But <a href=\"https://github.com/richpeck/exception_handler\" rel=\"nofollow\">our gem has no tests</a> and I haven't been able to apply anything that I've read in exception handling gems (most work at the <a href=\"https://github.com/bugsnag/bugsnag-ruby/blob/master/lib/bugsnag/rails/action_controller_rescue.rb#L3-L33\" rel=\"nofollow\">rescue_action_in_public</a> level or mix in to ShowException) or in the Rails source code</p>\n\n<p>This is a Rails 4.2 app tested via Rspec and Capybara.  </p>\n\n<p>Thoughts, links, halp?</p>\n\n<p>Example code and tests</p>\n\n<pre><code>RSpec.describe 'ExceptionController' do\n  class ExceptionController &lt; ActionController::Base\n    use ActionDispatch::ShowExceptions, Rails.configuration.exceptions_app\n    use ActionDispatch::DebugExceptions\n\n    #Response\n    respond_to :html, :json\n\n    #Layout\n    layout :layout_status\n\n    #Dependencies\n    before_action :status, :app_name, :log_exception\n\n    def show\n      respond_with details, status: @status, location: nil\n    end\n\n    def show_detailed_exceptions?\n      request.local?\n    end\n\n    protected\n\n    ####################\n    #   Dependencies   #\n    ####################\n\n    #Info\n    def status\n      @exception  = env['action_dispatch.exception']\n      @status     = ActionDispatch::ExceptionWrapper.new(env, @exception).status_code\n      @response   = ActionDispatch::ExceptionWrapper.rescue_responses[@exception.class.name]\n    end\n\n    #Format\n    def details\n      @details ||= {}.tap do |h|\n        I18n.with_options scope: [:exception, :show, @response], exception_name: @exception.class.name, exception_message: @exception.message do |i18n|\n          h[:name]    = i18n.t \"#{@exception.class.name.underscore}.title\", default: i18n.t(:title, default: @exception.class.name)\n          h[:message] = i18n.t \"#{@exception.class.name.underscore}.description\", default: i18n.t(:description, default: @exception.message)\n        end\n      end\n    end\n    helper_method :details\n\n    ####################\n    #      Layout      #\n    ####################\n\n    private\n\n    def log_exception\n      if @status.to_s == '500'\n        request.env[:exception_details] = details\n        request.env[:exception_details][:location] = ActionDispatch::ExceptionWrapper.new(env, @exception).application_trace[0]\n      end\n    end\n\n    #Layout\n    def layout_status\n      @status.to_s != '404' ? 'error' : 'application'\n    end\n\n    #App\n    def app_name\n      @app_name = Rails.application.class.parent_name\n    end\n\n  end\n\n  include Rack::Test::Methods\n  include ActionDispatch::Integration::Runner\n  include ActionController::TemplateAssertions\n  include ActionDispatch::Routing::UrlFor\n\n  let(:exception) { ActionController::RoutingError.new(:foo) }\n  let(:request) { ActionDispatch::TestRequest.new }\n\n  def app\n    # Rails.application.config.exceptions_app\n    @app ||= ExceptionController.action(:show)\n  end\n\n  it 'logs unknown format errors' do\n    request.env['action_dispatch.show_exceptions'] = true\n    request.env['consider_all_requests_local'] = true\n    request.env['warden'] = spy(Warden)\n    request.session =  ActionDispatch::Integration::Session.new(app)\n    exception = ActionController::RoutingError.new(:foo)\n    request.env.merge! 'action_dispatch.exception' =&gt; exception \n\n    post '/whatever'\n    expect(response.body).to eq(\"dunno?\")\n  end\nend\n</code></pre>\n\n<p>refs:</p>\n\n<ul>\n<li><a href=\"https://github.com/richpeck/exception_handler\" rel=\"nofollow\">https://github.com/richpeck/exception_handler</a></li>\n<li><a href=\"https://github.com/plataformatec/responders/blob/8f03848a2f50d4685c15a31254a1f600af947bd7/test/action_controller/respond_with_test.rb#L265-L275\" rel=\"nofollow\">https://github.com/plataformatec/responders/blob/8f03848a2f50d4685c15a31254a1f600af947bd7/test/action_controller/respond_with_test.rb#L265-L275</a></li>\n<li><a href=\"https://github.com/rails/rails/blob/1d43458c148f9532a81b92ee3a247da4f1c0b7ad/actionpack/test/dispatch/show_exceptions_test.rb#L92-L99\" rel=\"nofollow\">https://github.com/rails/rails/blob/1d43458c148f9532a81b92ee3a247da4f1c0b7ad/actionpack/test/dispatch/show_exceptions_test.rb#L92-L99</a></li>\n<li><a href=\"https://github.com/rails/rails/blob/3e36db4406beea32772b1db1e9a16cc1e8aea14c/railties/test/application/middleware/exceptions_test.rb#L86-L91\" rel=\"nofollow\">https://github.com/rails/rails/blob/3e36db4406beea32772b1db1e9a16cc1e8aea14c/railties/test/application/middleware/exceptions_test.rb#L86-L91</a></li>\n<li><a href=\"https://github.com/rails/rails/blob/34fa6658dd1b779b21e586f01ee64c6f59ca1537/actionpack/lib/action_dispatch/testing/integration.rb#L647-L674\" rel=\"nofollow\">https://github.com/rails/rails/blob/34fa6658dd1b779b21e586f01ee64c6f59ca1537/actionpack/lib/action_dispatch/testing/integration.rb#L647-L674</a></li>\n<li><a href=\"https://github.com/rails/rails/blob/ef8d09d932e36b0614905ea5bc3fb6af318b6ce2/actionview/test/abstract_unit.rb#L146-L184\" rel=\"nofollow\">https://github.com/rails/rails/blob/ef8d09d932e36b0614905ea5bc3fb6af318b6ce2/actionview/test/abstract_unit.rb#L146-L184</a></li>\n<li><a href=\"https://github.com/plataformatec/responders/blob/8f03848a2f50d4685c15a31254a1f600af947bd7/lib/action_controller/respond_with.rb#L196-L207\" rel=\"nofollow\">https://github.com/plataformatec/responders/blob/8f03848a2f50d4685c15a31254a1f600af947bd7/lib/action_controller/respond_with.rb#L196-L207</a></li>\n<li><a href=\"http://blog.plataformatec.com.br/2012/01/my-five-favorite-hidden-features-in-rails-3-2/\" rel=\"nofollow\">http://blog.plataformatec.com.br/2012/01/my-five-favorite-hidden-features-in-rails-3-2/</a></li>\n<li><a href=\"https://github.com/bugsnag/bugsnag-ruby/blob/master/lib/bugsnag/middleware/warden_user.rb\" rel=\"nofollow\">https://github.com/bugsnag/bugsnag-ruby/blob/master/lib/bugsnag/middleware/warden_user.rb</a></li>\n<li><a href=\"https://github.com/bugsnag/bugsnag-ruby/blob/master/lib/bugsnag/rails/action_controller_rescue.rb#L3-L33\" rel=\"nofollow\">https://github.com/bugsnag/bugsnag-ruby/blob/master/lib/bugsnag/rails/action_controller_rescue.rb#L3-L33</a></li>\n<li><a href=\"https://github.com/bugsnag/bugsnag-ruby/blob/master/lib/bugsnag/rails/active_record_rescue.rb\" rel=\"nofollow\">https://github.com/bugsnag/bugsnag-ruby/blob/master/lib/bugsnag/rails/active_record_rescue.rb</a></li>\n<li><a href=\"https://github.com/rollbar/rollbar-gem/blob/master/spec/rollbar_spec.rb\" rel=\"nofollow\">https://github.com/rollbar/rollbar-gem/blob/master/spec/rollbar_spec.rb</a></li>\n<li><a href=\"http://andre.arko.net/2011/12/10/make-rails-3-stop-trying-to-serve-html/\" rel=\"nofollow\">http://andre.arko.net/2011/12/10/make-rails-3-stop-trying-to-serve-html/</a></li>\n<li><a href=\"https://github.com/rails/rails/blob/9503e65b9718e4f01860cf017c1cdcdccdfffde7/actionpack/lib/action_dispatch/middleware/show_exceptions.rb#L46-L49\" rel=\"nofollow\">https://github.com/rails/rails/blob/9503e65b9718e4f01860cf017c1cdcdccdfffde7/actionpack/lib/action_dispatch/middleware/show_exceptions.rb#L46-L49</a></li>\n</ul>\n\n<h2>Update 2015-08-27</h2>\n\n<p>It has been suggested that this question may be a duplicate of <a href=\"https://stackoverflow.com/questions/13996259\">Testing error pages in Rails with Rspec + Capybara</a>, however, that question addresses testing exception responses when the exceptions_app is set to routes.</p>\n\n<p>As I wrote above, I'm using a Controller as the exceptions_app, so though I could use capybara to visit non-existing pages, I'd like to test Controller's action directly, rather than include the rest of the show exceptions stack.  This is important because my problem is when the exceptions app is called with an unhandled content type, which I cannot easily test via capybara.</p>\n\n<p>More generally, what I need to test is when the Exceptions app raises and exception, that I have fixed it.</p>\n\n<p>I'm open to seeing some example code, though.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3720516"}, "edited": false, "score": 0, "creation_date": 1440543275, "post_id": 32215047, "comment_id": 52314467, "body": "Could you please post the controller and the database migration for Member?"}, {"owner": {"reputation": 319, "user_id": 4241192, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2c118dc81d72408ac58bf13a367162c9?s=128&d=identicon&r=PG", "display_name": "Adam Denoon", "link": "https://stackoverflow.com/users/4241192/adam-denoon"}, "edited": false, "score": 0, "creation_date": 1440595004, "post_id": 32215047, "comment_id": 52337919, "body": "@Tommyixi Devise has no controller for the user model (&quot;member&quot; model in my case). I added to my question some other changes I made to the project I thought might be relevant, clarified my intent, and added migration and trace info."}, {"owner": {"reputation": 319, "user_id": 4241192, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2c118dc81d72408ac58bf13a367162c9?s=128&d=identicon&r=PG", "display_name": "Adam Denoon", "link": "https://stackoverflow.com/users/4241192/adam-denoon"}, "edited": false, "score": 0, "creation_date": 1440682021, "post_id": 32215047, "comment_id": 52381843, "body": "@Tommyixi I figured it out :) Thanks for taking a look at this for me!"}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 339444, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/696bf107459919d14d2d61af7c5e03d2?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/339444/phil"}, "edited": false, "score": 1, "creation_date": 1443230094, "post_id": 32250667, "comment_id": 53423899, "body": "You don&#39;t know how long I struggled with this issue.  So glad I found this post.  So the wiki article about this topic is not correct because it ignores authentication_keys and recommends changing request_keys.  It seems."}, {"owner": {"reputation": 319, "user_id": 4241192, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2c118dc81d72408ac58bf13a367162c9?s=128&d=identicon&r=PG", "display_name": "Adam Denoon", "link": "https://stackoverflow.com/users/4241192/adam-denoon"}, "reply_to_user": {"reputation": 133, "user_id": 339444, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/696bf107459919d14d2d61af7c5e03d2?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/339444/phil"}, "edited": false, "score": 0, "creation_date": 1454010939, "post_id": 32250667, "comment_id": 57864526, "body": "@Phil, see the amended answer for the proper fix."}, {"owner": {"reputation": 903, "user_id": 2278103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b511dfd204d5374974c5aa5e306e0364?s=128&d=identicon&r=PG", "display_name": "Terrell Miller", "link": "https://stackoverflow.com/users/2278103/terrell-miller"}, "edited": false, "score": 1, "creation_date": 1495819231, "post_id": 32250667, "comment_id": 75426528, "body": "Good to know that request_keys only honors predefined keys such as :subdomain. I spent a while wondering why subdomain would work but not store_id."}], "tags": [], "owner": {"reputation": 319, "user_id": 4241192, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2c118dc81d72408ac58bf13a367162c9?s=128&d=identicon&r=PG", "display_name": "Adam Denoon", "link": "https://stackoverflow.com/users/4241192/adam-denoon"}, "is_accepted": true, "score": 3, "last_activity_date": 1465683522, "last_edit_date": 1465683522, "creation_date": 1440681977, "answer_id": 32250667, "question_id": 32215047, "link": "https://stackoverflow.com/questions/32215047/nomethoderror-undefined-method-email-for-actiondispatch/32250667#32250667", "title": "NoMethodError - undefined method `email&#39; for #&lt;ActionDispatch::", "body": "<p>To fix this, I changed my <code>config/initializers/devise.rb</code> to reflect the following:</p>\n\n<p><code>config.request_keys = { role_id: false }</code></p>\n\n<p>This fixed the issue, but still prevented the same email from signing up with a different role ID. To fix this, I removed <code>:validatable</code> from my User model and added:</p>\n\n<pre><code>  validates_uniqueness_of   :email,    :case_sensitive =&gt; false, :scope =&gt; :role_id, :allow_blank =&gt; true, :if =&gt; :email_changed?\n  validates_format_of       :email,    :with  =&gt; Devise.email_regexp, :allow_blank =&gt; true, :if =&gt; :email_changed?\n  validates_presence_of     :password, :on=&gt;:create\n  validates_confirmation_of :password, :on=&gt;:create\n  validates_length_of       :password, :within =&gt; Devise.password_length, :allow_blank =&gt; true\n</code></pre>\n\n<p>This allows the same email address to sign up with a different role_id.</p>\n\n<p>I also changed the following in authenticatable.rb:</p>\n\n<pre><code>      def request_values\n        keys = request_keys.respond_to?(:keys) ? request_keys.keys : request_keys\n        values = keys.map { |k| self.request[self.scope][k] }\n#        values = keys.map { |k| self.request.send(k) }\n        Hash[keys.zip(values)]\n      end\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I got tired of always having to re-hack the devise library, especially after I updated gems or transferred the app. I found this page that offered a better work-around (still follow the step regarding validations the User model listed above):</p>\n\n<p>(From <a href=\"https://github.com/plataformatec/devise/pull/3965\" rel=\"nofollow\">https://github.com/plataformatec/devise/pull/3965</a>)</p>\n\n<p>Comment out the following line we edited above:</p>\n\n<p><code># config.request_keys = { role_id: false }</code></p>\n\n<p>Edit the <code>config.authentication_keys</code> line as follows:</p>\n\n<p><code>config.authentication_keys = { email: true, role_id: false }</code></p>\n\n<p>The issue is that <code>request_keys</code> honors only predefined keys such as <code>:subdomain</code>.</p>\n\n<p>That should work now for creating a combination of custom keys to authenticate with.</p>\n"}], "owner": {"reputation": 319, "user_id": 4241192, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2c118dc81d72408ac58bf13a367162c9?s=128&d=identicon&r=PG", "display_name": "Adam Denoon", "link": "https://stackoverflow.com/users/4241192/adam-denoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1550, "favorite_count": 0, "accepted_answer_id": 32250667, "answer_count": 1, "score": 0, "last_activity_date": 1465683522, "creation_date": 1440541338, "last_edit_date": 1440679995, "question_id": 32215047, "link": "https://stackoverflow.com/questions/32215047/nomethoderror-undefined-method-email-for-actiondispatch", "title": "NoMethodError - undefined method `email&#39; for #&lt;ActionDispatch::", "body": "<p>Devise 3.5.2, Rails 4.2.3</p>\n\n<p>While logging in, I'm trying to pass a hidden role_id along with the email/password combination. I am allowing the same email to register again, on a different subdomain, which causes a different role_id to be passed. The email+role_id is the unique index for the user.</p>\n\n<p>I can create a user, but cannot log in. When I submit the log in form, I am faced with the following error:</p>\n\n<p><code>undefined method 'email' for #&lt;ActionDispatch::Request:0x007fa21628bda0&gt;</code></p>\n\n<h1>EDIT:</h1>\n\n<p>If anyone can explain the process of changing the email uniqueness validation to email+role_id (not either/or, but and), that's all I need to accomplish. Following that process properly may avoid this error.</p>\n\n<h2>Debugging info:</h2>\n\n<p>The POST parameters are as follows:</p>\n\n<pre><code>{\"utf8\"=&gt;\"\u2713\",\n \"authenticity_token\"=&gt;\"[FILTERED]\",\n \"member\"=&gt;{\"role_id\"=&gt;\"1\",\n \"email\"=&gt;\"some.user@email.com\",\n \"password\"=&gt;\"[FILTERED]\",\n \"remember_me\"=&gt;\"0\"},\n \"commit\"=&gt;\"Log in\"}\n</code></pre>\n\n<p>Here is my Member model:</p>\n\n<pre><code>class Member &lt; ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable,\n         :confirmable, :lockable, :timeoutable, :omniauthable\n\n  belongs_to :role\n\n  def self.find_for_authentication(warden_conditions)\n    where(:email =&gt; warden_conditions[:email], :role_id =&gt; warden_conditions[:role_id]).first\n  end\nend\n</code></pre>\n\n<p>In <em>config/initializers/devise.rb</em>, the following is set:</p>\n\n<p><code>config.authentication_keys = [:email, :role_id]</code></p>\n\n<p><code>config.request_keys = [:email, :role_id]</code></p>\n\n<p>My views/devise/sessions/new.html.erb includes:</p>\n\n<p><code>&lt;%= f.hidden_field :role_id, :value =&gt; Role.find_by_name(current_subdomain).id %&gt;</code></p>\n\n<p>I adjusted <em>vendor/bundle/ruby/1.9.1/gems/devise-3.5.2/lib/devise/models/validatable.rb</em> by changing this line:</p>\n\n<pre><code>validates_uniqueness_of :email, allow_blank: true, if: :email_changed?\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>validates_uniqueness_of :email, :scope =&gt; :role_id, allow_blank: true, if: :email_changed? #using subdomains for validation\n</code></pre>\n\n<p>The relevant database migrations for the member are found here:</p>\n\n<h3>...devise_create_members.rb</h3>\n\n<pre><code>class DeviseCreateMembers &lt; ActiveRecord::Migration\n  def change\n    create_table(:members) do |t|\n      ## Database authenticatable\n      t.string :email,              null: false, default: \"\"\n      t.string :encrypted_password, null: false, default: \"\"\n\n      ## Recoverable\n      t.string   :reset_password_token\n      t.datetime :reset_password_sent_at\n\n      ## Rememberable\n      t.datetime :remember_created_at\n\n      ## Trackable\n      t.integer  :sign_in_count, default: 0, null: false\n      t.datetime :current_sign_in_at\n      t.datetime :last_sign_in_at\n      t.string   :current_sign_in_ip\n      t.string   :last_sign_in_ip\n\n      ## Confirmable\n      t.string   :confirmation_token\n      t.datetime :confirmed_at\n      t.datetime :confirmation_sent_at\n      t.string   :unconfirmed_email # Only if using reconfirmable\n\n      ## Lockable\n      t.integer  :failed_attempts, default: 0, null: false # Only if lock strategy is :failed_attempts\n      t.string   :unlock_token # Only if unlock strategy is :email or :both\n      t.datetime :locked_at\n\n\n      t.timestamps null: false\n    end\n\n    add_index :members, :email,                unique: true\n    add_index :members, :reset_password_token, unique: true\n    add_index :members, :confirmation_token,   unique: true\n    add_index :members, :unlock_token,         unique: true\n  end\n</code></pre>\n\n<h3>...add_columns_to_member.rb</h3>\n\n<pre><code>class AddColumnsToMember &lt; ActiveRecord::Migration\n  def change\n    add_reference :members, :contact, index: true\n    add_reference :members, :role, index: true\n    add_reference :members, :ownership, index: true\n    add_column :members, :account_status, :string\n  end\nend\n</code></pre>\n\n<h3>...reindex_members_email_and_role.rb</h3>\n\n<pre><code>class ReindexMembersEmailAndRole &lt; ActiveRecord::Migration\n  def change\n    add_index :members, [:email, :role_id], :unique =&gt; true\n  end\nend\n</code></pre>\n\n<p>The last item on the trace is:</p>\n\n<p><em>vendor/bundle/ruby/1.9.1/gems/devise-3.5.2/lib/devise/strategies/authenticatable.rb:152:in `block in request_values'</em></p>\n\n<pre><code>    keys = request_keys.respond_to?(:keys) ? request_keys.keys : request_keys\n    values = keys.map { |k| self.request.send(k) } &lt;--ERROR THIS LINE\n    Hash[keys.zip(values)]\n  end\n</code></pre>\n\n<h3>What am I missing?</h3>\n"}, {"tags": ["ruby", "db2", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 174, "user_id": 1971022, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/97ad70fb98d6abd00b0044cf731f1049?s=128&d=identicon&r=PG", "display_name": "Jerry Oberle", "link": "https://stackoverflow.com/users/1971022/jerry-oberle"}, "edited": false, "score": 0, "creation_date": 1440556099, "post_id": 32215751, "comment_id": 52317696, "body": "Thank you.  This may be a semantic distinction, but as far as I understood, the derivation of my class from ActiveRecord::Migration meant that this is using ActiveRecord.  I&#39;m certainly not coding a connection to the database - that is all happening via rake magic.  Likewise, I didn&#39;t create the name IBM_DB, so it makes me suspicious that it&#39;s non-standard. As for not using integers, the question is about using the query column names, not defining my own constants for 0, 1, ... etc."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 174, "user_id": 1971022, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/97ad70fb98d6abd00b0044cf731f1049?s=128&d=identicon&r=PG", "display_name": "Jerry Oberle", "link": "https://stackoverflow.com/users/1971022/jerry-oberle"}, "edited": false, "score": 0, "creation_date": 1440557083, "post_id": 32215751, "comment_id": 52317927, "body": "@JerryOberle models in an ORM allow us to use the field names as accessors. That&#39;s a very nice syntactic sugar. How those are defined depends on the ORM."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1440545475, "creation_date": 1440545475, "answer_id": 32215751, "question_id": 32214882, "link": "https://stackoverflow.com/questions/32214882/is-there-a-db-independent-way-to-get-db2-sql-results-in-ruby/32215751#32215751", "title": "Is there a DB independent way to get Db2 SQL results in Ruby?", "body": "<p>What is wrong with <code>x = exec_query(\"Select ... blah blah blah...\")</code>? If your query is not SQL compliant then you've tied yourself to the DBM and will have a lot more work <em>when</em> you need to migrate to some other DBM. That's the whole point of using an ORM, to separate the code from the query. It also means you'll need to stand up an instance of DB2 for development, test and production because your code can't adjust for scenarios like using SQLite for development locally, MySQL or PostgreSQL in test and DB2 in production. That's really easy with a good ORM.</p>\n\n<p>Using or renaming <code>IBM_DB</code> isn't a significant issue in my experience. If you don't like calling it <code>IBM_DB</code>, assign that constant to another that is more visually pleasing. Sequel code typically uses <code>DB</code> but it's up to us what we want to call it. It's just a constant holding the connection information.</p>\n\n<p>Having to index into an array is the result of using <code>fetch_array</code>. Typically, instead of using integers to identify fields, I'd define constants that are more symbolic/mnemonic and use them in place of the numbers. But, again, a good ORM makes it easy to use classes/models based on the table schema, adding layers of convenience and readability to isolate you from the uglier lower level driver's API.</p>\n\n<p>Look at using Active Record or <a href=\"http://sequel.jeremyevans.net\" rel=\"nofollow\">Sequel</a>. Sequel supports DB2 nicely and is easily as powerful as Active Record and works with Rails. Both also work well in a non-Rails script; Sequel is my favorite for that but YMMV.</p>\n"}], "owner": {"reputation": 174, "user_id": 1971022, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/97ad70fb98d6abd00b0044cf731f1049?s=128&d=identicon&r=PG", "display_name": "Jerry Oberle", "link": "https://stackoverflow.com/users/1971022/jerry-oberle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440545475, "creation_date": 1440540403, "last_edit_date": 1440544599, "question_id": 32214882, "link": "https://stackoverflow.com/questions/32214882/is-there-a-db-independent-way-to-get-db2-sql-results-in-ruby", "title": "Is there a DB independent way to get Db2 SQL results in Ruby?", "body": "<p>I have Rake code which I've cobbled together from some sample code in my shop, and the advice of another programmer.  It looks more or less as follows:</p>\n\n<pre><code>class Ticket666StupidDb2Test &lt; ActiveRecord::Migration\n    def up\n        lookup('WXYZ3529300')\n    end\n\n    def down\n        puts \"down, boy!\"\n    end\n\n    def lookup(xiskid)\n       qresult = exec_query(\"SELECT DISTINCT SNARK, GLOOPEE FROM VITA_XISK WHERE XISKID = '#{xiskid}'\")\n       while row = IBM_DB.fetch_array(qresult) do\n           snark = row[0]\n           gloopee = row[1]\n           puts \"snark = #{snark}; gloopee = #{gloopee}\"\n       end\n    end\nend\n</code></pre>\n\n<ul>\n<li><p>Is there a way to use the result set column names in getting the data, instead of integer indices?  I looked at <a href=\"http://rubyibm.rubyforge.org/docs/adapter/2.5.9/doc/ActiveRecord/ConnectionAdapters/IBM_DBAdapter.html\" rel=\"nofollow\">http://rubyibm.rubyforge.org/docs/adapter/2.5.9/doc/ActiveRecord/ConnectionAdapters/IBM_DBAdapter.html</a> and found at least one method, <code>fetch_data</code>, which seemed as though it would allow one to reference column names, but every attempt to try to use it produced an error such as:</p>\n\n<pre><code>rake aborted!\nundefined method `fetch_data' for #&lt;ActiveRecord::ConnectionAdapters::IBM_DBAdapter:0x38c16c0&gt;\n</code></pre></li>\n<li><p>What is wrong with this code, which was my first attempt:</p>\n\n<pre><code>x = exec_query(\"Select ... blah blah blah...\")\nx.each do |row|\n    puts row['SNARK']\nend\n</code></pre>\n\n<p>This was modeled on stuff documented at <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Result.html\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActiveRecord/Result.html</a>, but it failed with a similar exception that <code>x.each</code> is undefined.</p></li>\n<li><p>Regardless, the notion that I have to resort to anything like <code>IBM_DB.whathaveyou</code> strikes me as obscene.  Either IBM doesn't believe in making a standards conforming driver (not my experience using the Db2 driver for Java JDBC), or I just don't know what the supported, straightforward approach to this is.</p></li>\n</ul>\n\n<p>Can someone tell me?</p>\n\n<p><code>ruby -v</code> returns <code>ruby 1.9.3p545 (2014-02-24) [i386-mingw32]</code>.</p>\n"}, {"tags": ["ruby", "multiple-instances", "instances"], "comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1440540501, "post_id": 32214878, "comment_id": 52313505, "body": "<i>If</i> returning an array of boards from &quot;generate boards&quot;, then one could use <code>boards = plays.generate_boards; boards[0].player</code>, eg. <i>As it currently is the function returns no useful value.</i> I would suggest looking into <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-map\" rel=\"nofollow noreferrer\"><code>Array#map</code></a> and using it instead of each.."}, {"owner": {"reputation": 20, "user_id": 3426261, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a19cbbc127b954cf195a1b8be9913a9d?s=128&d=identicon&r=PG&f=1", "display_name": "Nick P", "link": "https://stackoverflow.com/users/3426261/nick-p"}, "reply_to_user": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1440541266, "post_id": 32214878, "comment_id": 52313768, "body": "Thanks, I see what you are saying about setting the variable boards = to the generating boards.  I rearranged my  code a bit and I think I have the right idea now."}], "answers": [{"tags": [], "owner": {"reputation": 3533, "user_id": 1955990, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/5112f123adc37e54a218f4571b784f32?s=128&d=identicon&r=PG", "display_name": "aceofbassgreg", "link": "https://stackoverflow.com/users/1955990/aceofbassgreg"}, "is_accepted": true, "score": 0, "last_activity_date": 1440558502, "last_edit_date": 1440558502, "creation_date": 1440552093, "answer_id": 32216545, "question_id": 32214878, "link": "https://stackoverflow.com/questions/32214878/using-a-method-to-generate-multiple-instances-of-another-class/32216545#32216545", "title": "Using a method to generate multiple instances of another class", "body": "<p>As indicated by user2864740, you can use <code>:map</code> instead of <code>:each</code> to return an array of <code>BingoBoard</code> instances. If you wanted to store those instances to use later, you can use memoization as shown below. The first time <code>:bingo_board_instances</code> is called, the boards will be generated and the instance variable <code>@bingo_board_instances</code> will be set so that future invocations of <code>:bingo_board_instances</code> will not result in the generation of new boards.</p>\n\n<pre><code>class Players\n  def initialize(players)\n    @players = players\n  end\n\n  def generate_boards\n    @players.map do |player|\n      board = BingoBoardGenerator.new\n      BingoBoard.new(player, board.generate)\n    end\n  end\n\n  def bingo_board_instances\n    @bingo_board_instances ||= generate_boards\n  end\nend\n</code></pre>\n\n<p>While the above code works just fine, I think the more intuitive solution would be to have a <code>Player</code> class (instead of <code>Players</code>) and then pass in an array of <code>Player</code> instances when initializing a <code>BingoBoardGenerator</code>. With this approach, you can set an instance variable for each individual player and create a unique board that belongs to the player:</p>\n\n<pre><code>class BingoBoardGenerator\n\n  def initialize(args)\n    #dynamically set instance vars to handle n number of players\n    args.fetch(:players).each_with_index do |player,index|\n      instance_variable_set(\"@player_#{index+1}\",player)\n    end\n  end\n\n  def generate_boards\n    instance_variables.map do |player|\n      player = instance_variable_get(instance_var)\n      #you will need to implement :generate_bingo_board on player...I would suggest using memoization so you can store the player's board for later retrieval\n      player.generate_bingo_board\n    end\n  end\nend\n\n#I have no idea what your implementation looks like...\nb = BingoBoardGenerator.new(players: [Player.new(\"Jen\"),Player.new(\"Phil\"),Player.new(\"Mary\"),Player.new(\"Bert\")])\n\nb.generate_boards  \n</code></pre>\n\n<p>This would allow you to better encapsulate data that may belong to individual players, including the ability to ask each <code>Player</code> instance for its <code>:board</code>.    </p>\n"}], "owner": {"reputation": 20, "user_id": 3426261, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a19cbbc127b954cf195a1b8be9913a9d?s=128&d=identicon&r=PG&f=1", "display_name": "Nick P", "link": "https://stackoverflow.com/users/3426261/nick-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 743, "favorite_count": 0, "accepted_answer_id": 32216545, "answer_count": 1, "score": 0, "last_activity_date": 1440558502, "creation_date": 1440540396, "last_edit_date": 1440541710, "question_id": 32214878, "link": "https://stackoverflow.com/questions/32214878/using-a-method-to-generate-multiple-instances-of-another-class", "title": "Using a method to generate multiple instances of another class", "body": "<p>I  am trying to let a method initiate multiple instances of another class.  </p>\n\n<pre><code>class Players\n  def initialize(players)\n    @players = players\n  end\n  def generate_boards\n    @players.each do |player|\n      board = BingoBoardGenerator.new\n      player = BingoBoard.new(player, board.generate)\n      p player\n    end\n  end\nend\n\nplayers = [\"Nick\",\"Jiyoon\",\"Mae\",\"Lawson\",\"Matthew\"]\nplays = Players.new(players)\nplays.generate_boards\n</code></pre>\n\n<p><code>p player</code> shows that five instances of <code>BingoBoard</code> were created properly, but I am not sure how to access them (or where they are). Any help on how to call these instances? Normally I would do:</p>\n\n<pre><code>nick = BingoBoard.new(\"Nick\", board.generate) \nnick.board\n</code></pre>\n\n<p>but when I instantiate them all together, I don't know how to set/access their instance name.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 2991, "user_id": 3739861, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNUJz.jpg?s=128&g=1", "display_name": "cheniel", "link": "https://stackoverflow.com/users/3739861/cheniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1440539484, "last_edit_date": 1440539484, "creation_date": 1440538191, "answer_id": 32214443, "question_id": 32214354, "link": "https://stackoverflow.com/questions/32214354/rails-return-uniq-results-using-two-columns/32214443#32214443", "title": "Rails: Return uniq results using two columns", "body": "<p>You need to <a href=\"http://guides.rubyonrails.org/active_record_querying.html#group\" rel=\"nofollow\">group</a> by company ids and search date.</p>\n\n<pre><code>@history = Search.includes(:user).where(\"searches.query = ?\", query).group(\"users.company_id, searches.date\")\n</code></pre>\n\n<p><code>includes</code> give you access to the user table, which allows you to group by the company ID. <code>group</code> ensures that you only get one record for each company id and search date.</p>\n"}, {"tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": false, "score": 0, "last_activity_date": 1440539219, "last_edit_date": 1440539219, "creation_date": 1440538866, "answer_id": 32214578, "question_id": 32214354, "link": "https://stackoverflow.com/questions/32214354/rails-return-uniq-results-using-two-columns/32214578#32214578", "title": "Rails: Return uniq results using two columns", "body": "<p>This should do it:</p>\n\n<pre><code>@history = Search.joins(:users).where(\"searches.query = ?\", query).uniq.group(\"users.company_id, searches.date\")\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 1298322, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/55f02f926802f9d3f6fd7c4b83c7d91a?s=128&d=identicon&r=PG&f=1", "display_name": "josenova", "link": "https://stackoverflow.com/users/1298322/josenova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1440539484, "creation_date": 1440537778, "question_id": 32214354, "link": "https://stackoverflow.com/questions/32214354/rails-return-uniq-results-using-two-columns", "title": "Rails: Return uniq results using two columns", "body": "<p>After the user submits a search, I'd like to show a history of what companies have made the same search and in what day. Let me explain...</p>\n\n<p>I have a <code>searches</code> table like so:</p>\n\n<pre><code>id   user_id   date          query\n1    1         01-01-2015    A457263\n2    1         01-01-2015    A457263\n3    2         01-01-2015    A457263\n4    3         01-01-2015    A457263\n5    3         02-01-2015    A457263\n</code></pre>\n\n<p>and the <code>users</code> belong to a company:</p>\n\n<pre><code>id   company_id\n1    1\n2    1\n3    2\n\nid   name\n1    Company One\n2    Company Two\n</code></pre>\n\n<p>Now what I'd like to do is select all searches made for that specific query <code>A457263</code>. Im assuming its:</p>\n\n<pre><code>query = params[:query]\n@history = Search.where(\"query = ?\", query)\n</code></pre>\n\n<p>And then filter out the repeated searches made by users in the same company on the same day.</p>\n\n<p>So the final result will look like this:</p>\n\n<pre><code>id    user_id    date         query\n1     1          01-01-2015   A457263\n4     3          01-01-2015   A457263\n5     3          02-01-2015   A457263\n</code></pre>\n\n<p>I've been messing around with the uniq method but I can't get around it this time.</p>\n"}, {"tags": ["ruby", "methods", "overriding"], "answers": [{"tags": [], "owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "is_accepted": false, "score": 0, "last_activity_date": 1440538264, "creation_date": 1440538264, "answer_id": 32214462, "question_id": 32214096, "link": "https://stackoverflow.com/questions/32214096/displaying-objects-puts-and-p-to-s-and-inspect/32214462#32214462", "title": "Displaying Objects: puts and p, to_s and inspect", "body": "<p>Try:</p>\n\n<pre><code>def to_s\n  p \"#{@item_name} and #{@qty}\"\nend\n</code></pre>\n\n<p>with double quotes and p</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 5245363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b887466e70fb3b90207582544f81df32?s=128&d=identicon&r=PG&f=1", "display_name": "acla19", "link": "https://stackoverflow.com/users/5245363/acla19"}, "edited": false, "score": 0, "creation_date": 1440559010, "post_id": 32214718, "comment_id": 52318329, "body": "Works. Thank you for the detailed tips. 1) I never knew that there was a difference between 1 and 2 quotation marks, so thank you for that. 2) I just copied that portion about returning a string from the actual question itself, but I will definitely keep your tip in mind. Also what is the documentation portion you were talking about? Thank you in advance, much appreciated."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 21, "user_id": 5245363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b887466e70fb3b90207582544f81df32?s=128&d=identicon&r=PG&f=1", "display_name": "acla19", "link": "https://stackoverflow.com/users/5245363/acla19"}, "edited": false, "score": 0, "creation_date": 1440571898, "post_id": 32214718, "comment_id": 52322614, "body": "The <a href=\"http://ruby-doc.org/core-2.2.3/Kernel.html#method-i-puts\" rel=\"nofollow noreferrer\">documentation for <code>Kernel#puts</code></a> says <code>puts(obj, \u2026) \u2192 nil</code>, i.e. <code>puts</code> takes one or more arguments and returns <code>nil</code>. But <a href=\"http://ruby-doc.org/core-2.2.3/Object.html#method-i-to_s\" rel=\"nofollow noreferrer\"><code>to_s</code></a> shouldn&#39;t return <code>nil</code>, it should return a <code>String</code> (that&#39;s why it is <i>called</i> &quot;to string&quot;, after all)!"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 0, "last_activity_date": 1440539516, "creation_date": 1440539516, "answer_id": 32214718, "question_id": 32214096, "link": "https://stackoverflow.com/questions/32214096/displaying-objects-puts-and-p-to-s-and-inspect/32214718#32214718", "title": "Displaying Objects: puts and p, to_s and inspect", "body": "<p>There are two problems with your code:</p>\n\n<ol>\n<li>Single quoted strings don't interpolate, only double quoted strings do</li>\n<li>You are not returning the string, you are passing the string as an argument to <code>puts</code> and return the result of <code>puts</code>, however, if you look at the documentation for <code>puts</code>, you will see it always returns <code>nil</code></li>\n</ol>\n\n<p>So, your code should be something like</p>\n\n<pre><code>class Item\n  def initialize(item_name, qty)\n    @item_name = item_name\n    @qty = qty\n  end\n\n  def to_s\n    \"#{@item_name} and #{@qty}\"\n  end\nend\n\nitem = Item.new('a', 1)\n\nputs item\np item\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5245363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b887466e70fb3b90207582544f81df32?s=128&d=identicon&r=PG&f=1", "display_name": "acla19", "link": "https://stackoverflow.com/users/5245363/acla19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 305, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1440539516, "creation_date": 1440536820, "question_id": 32214096, "link": "https://stackoverflow.com/questions/32214096/displaying-objects-puts-and-p-to-s-and-inspect", "title": "Displaying Objects: puts and p, to_s and inspect", "body": "<p>On the Rubymonk website tutorial I am stuck on an interactive question (2.3 Displaying Objects: puts and p, to_s and inspect) on the inspect vs to_s portion.They ask to override to_s method >'so that it returns a string with both the item's name and quantity.'</p>\n\n<p>Here is the link to the specific question: <a href=\"https://rubymonk.com/learning/books/4-ruby-primer-ascent/chapters/45-more-classes/lessons/108-displaying-objects\" rel=\"nofollow\">https://rubymonk.com/learning/books/4-ruby-primer-ascent/chapters/45-more-classes/lessons/108-displaying-objects</a></p>\n\n<p>I am not sure how to approach this portion. I did skip around this tutorial, so I might have missed how to approach a similar problem that may have shown how to tackle this question.</p>\n\n<p>I utilized a puts method and interpolation of an expression within a string:</p>\n\n<pre><code>class Item\n   def initialize(item_name, qty)\n     @item_name = item_name\n     @qty = qty\n   end\n\n   def to_s\n      puts '#{@item_name} and #{@qty}'\n   end\n end\n\nitem = Item.new(\"a\",1)\n\nputs item\np item\n</code></pre>\n"}, {"tags": ["ruby", "dashing"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1440536441, "post_id": 32213524, "comment_id": 52311742, "body": "You are building a Hash incorrectly try <code>data &lt;&lt; {&quot;x&quot; =&gt; results[j].at(i).to_s, &quot;y&quot; =&gt; results[j].at(i).to_i}</code> that should at least get you closer."}, {"owner": {"reputation": 28, "user_id": 5265923, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-efHgpYpwHXs/AAAAAAAAAAI/AAAAAAAAAxQ/Wukzva5k38c/photo.jpg?sz=128", "display_name": "mikeyeg", "link": "https://stackoverflow.com/users/5265923/mikeyeg"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1440598421, "post_id": 32213524, "comment_id": 52340540, "body": "Thanks for the feedback. I&#39;ve changed the way the hash is built and my output now looks like this:        [{&quot;x&quot;=&gt;&quot;2015-08-22 20:00:00 -0600&quot;, &quot;y&quot;=&gt;&quot;4913&quot;}, {&quot;x&quot;=&gt;&quot;2015-08-23 20:00:00 -0600&quot;, &quot;y&quot;=&gt;&quot;4915&quot;}, {&quot;x&quot;=&gt;&quot;2015-08-24 20:00:00 -0600&quot;, &quot;y&quot;=&gt;&quot;4918&quot;}, {&quot;x&quot;=&gt;&quot;2015-08-25 20:00:00 -0600&quot;, &quot;y&quot;=&gt;&quot;4906&quot;}, {&quot;x&quot;=&gt;&quot;2015-08-26 20:00:00 -0600&quot;, &quot;y&quot;=&gt;&quot;4904&quot;}, {&quot;x&quot;=&gt;&quot;2015-08-27 20:00:00 -0600&quot;, &quot;y&quot;=&gt;&quot;4915&quot;}]  When this is sent to the Dashing Graph Widget, it doesn&#39;t seem to plot anything."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1440598647, "post_id": 32213524, "comment_id": 52340735, "body": "That is because you are passing strings and the graph wants numbers if you look at my example I changed <code>y</code> from <code>to_s</code> to <code>to_i</code>. Not sure what format you need for the date object. you could use something like <code>results[j].at(i).day</code> to see if it at least works."}, {"owner": {"reputation": 28, "user_id": 5265923, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-efHgpYpwHXs/AAAAAAAAAAI/AAAAAAAAAxQ/Wukzva5k38c/photo.jpg?sz=128", "display_name": "mikeyeg", "link": "https://stackoverflow.com/users/5265923/mikeyeg"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1440600129, "post_id": 32213524, "comment_id": 52341806, "body": "I have corrected it to &#39;to_i &#39; for the Y axis, but I need the X to be a full date for when the data spans more than a month. Is there an option to convert the current date to unix timestamp?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1440600887, "post_id": 32213524, "comment_id": 52342424, "body": "Sure you can use <code>results[j].at(i).to_time.to_i</code>. Also seems like the <a href=\"http://code.shutterstock.com/rickshaw/tutorial/introduction.html\" rel=\"nofollow noreferrer\">Rickshaw documentation</a> might be worth a read as it appears this is what dashing&#39;s graph widget uses."}, {"owner": {"reputation": 28, "user_id": 5265923, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-efHgpYpwHXs/AAAAAAAAAAI/AAAAAAAAAxQ/Wukzva5k38c/photo.jpg?sz=128", "display_name": "mikeyeg", "link": "https://stackoverflow.com/users/5265923/mikeyeg"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1440601707, "post_id": 32213524, "comment_id": 52343020, "body": "Thanks, this is the page I&#39;ve been working from that referenced the unix timestamps <a href=\"https://gist.github.com/jwalton/6614023\" rel=\"nofollow noreferrer\">gist.github.com/jwalton/6614023</a>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1440602653, "post_id": 32213524, "comment_id": 52343690, "body": "I can see the reference to <code>Rickshaw.Graph.Axis.Time xAxisOptions</code> in that file. Did it work for you?"}, {"owner": {"reputation": 28, "user_id": 5265923, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-efHgpYpwHXs/AAAAAAAAAAI/AAAAAAAAAxQ/Wukzva5k38c/photo.jpg?sz=128", "display_name": "mikeyeg", "link": "https://stackoverflow.com/users/5265923/mikeyeg"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1440607320, "post_id": 32213524, "comment_id": 52346777, "body": "I figured it out, thanks for your help. Final code included in the original post."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1440607811, "post_id": 32213524, "comment_id": 52347036, "body": "glad it worked. you know that the ` for i..` loop is no longer needed in the example also generally <code>rs.affected_rows.each</code> is considered more idiomatic ruby."}], "owner": {"reputation": 28, "user_id": 5265923, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-efHgpYpwHXs/AAAAAAAAAAI/AAAAAAAAAxQ/Wukzva5k38c/photo.jpg?sz=128", "display_name": "mikeyeg", "link": "https://stackoverflow.com/users/5265923/mikeyeg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 333, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1440607475, "creation_date": 1440534785, "last_edit_date": 1440607475, "question_id": 32213524, "link": "https://stackoverflow.com/questions/32213524/convert-array-output-from-tiny-tds-to-dashing-io-graph-format", "title": "Convert array output from Tiny_TDS to Dashing.io Graph format", "body": "<p>I'm pretty new at Ruby and Dashing, but I've been able to muddle through so far up until this point.</p>\n\n<p>I am trying to get data from a MS SQL server using Tiny_TDS and into a format that Dashing can handle for it's Graph widget.</p>\n\n<p>I have been working on a basic ruby script to get the output correct before attempting to input into Dashing.</p>\n\n<pre><code>#!/usr/bin/ruby\n\nrequire 'tiny_tds'\n\ndata = Array.new\n\nclient = TinyTds::Client.new(:username =&gt; 'MYUN', :password =&gt; 'MYPW', :host =&gt; '192.168.X.X', :database =&gt; 'SQL2012', :port =&gt; '1433')\n\nrs = client.execute(\"SELECT Date, KPI_UserCount AS UserCountCurrent FROM     [SQL2012].[dbo].[DashTbl]\")\n\nresults = rs.each(:symbolize_keys =&gt; true, :as =&gt; :array, :cache_rows =&gt; true, :empty_sets =&gt; true) do |rowset| end\n\nfor j in (0...rs.affected_rows)\n  for i in (0...rs.fields.length)\n    #data.push('\"x\" =&gt; ' + results[j].at(i).to_s, '\"y\" =&gt; ' + results[j].at(i).to_s)\n  end\nend\n\nprintf(\"%5s\",results)\n\n #data = [ { \"x\" =&gt; 1980, \"y\" =&gt; 1323 }, { \"x\" =&gt; 1981, \"y\" =&gt; 53234 }, { \"x\" =&gt; 1982, \"y\" =&gt; 2344 } ]\n # this is what the output is supposed to look like\n\nclient.close\n</code></pre>\n\n<p>Currently my output looks like this:</p>\n\n<pre><code>[[2015-08-22 20:00:00 -0600, 4913], [2015-08-23 20:00:00 -0600, 4915], [2015-08-24 20:00:00 -0600, 4918]]'\n</code></pre>\n\n<p>I have been experimenting with adding the required formatting into the data array with the for loops, to no avail.</p>\n\n<p>Can someone please point me in the right direction?</p>\n\n<p>UPDATE 1: Thanks to the help of engineersmnky, the hash seems to be created correctly.</p>\n\n<p>My updated portion of the script is this:</p>\n\n<pre><code>for j in (0...rs.affected_rows)\n  for i in (0...rs.fields.length)\n  end\n  data &lt;&lt; {\"x\" =&gt; results[j].at(0).to_s, \"y\" =&gt; results[j].at(1).to_i}\nend\n</code></pre>\n\n<p>Now the issue is that Dashing just seems to show the last number of the y axis as the displayed number and doesn't seem to show any graphed points.</p>\n\n<p>UPDATE 2:</p>\n\n<p>This has been resolved. I ended up needing to recreate the array each time the job was run so that the historical data was pulled from SQL.</p>\n\n<pre><code>rs = client.execute(\"SELECT Date, KPI_UserCount AS UserCountCurrent FROM [TSQL2012].[dbo].[DashTbl]\")\nresults = rs.each(:symbolize_keys =&gt; true, :as =&gt; :array, :cache_rows =&gt; true, :empty_sets =&gt; true) do |rowset| end\ndata_count = Array.new \nfor j in (0...rs.affected_rows)\n  for i in (0...rs.fields.length)\n  end\ndata_count &lt;&lt; {\"x\" =&gt; results[j].at(0).to_time.to_i, \"y\" =&gt; results[j].at(1).to_i}\nend\nsend_event('usergraph',points: data_count)\n</code></pre>\n\n<p>The Dashing code looked like this:</p>\n\n<pre><code>&lt;li data-row=\"1\" data-col=\"1\" data-sizex=\"2\" data-sizey=\"1\"&gt;\n  &lt;div data-id=\"usergraph\" data-view=\"Rickshawgraph\" data-title=\"User Count Today\" style=\"background-color:#336699\" data-renderer=\"area\" data-min=\"3000\" data-max=\"6500\"&gt;&lt;/div&gt;\n&lt;/li&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows", "postgresql", "server"], "comments": [{"owner": {"reputation": 2541, "user_id": 1162683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8e05cd764cc2ecba1884b309e9dd5df5?s=128&d=identicon&r=PG", "display_name": "penner", "link": "https://stackoverflow.com/users/1162683/penner"}, "edited": false, "score": 1, "creation_date": 1440535376, "post_id": 32213393, "comment_id": 52311194, "body": "Use docker? Why windows?"}, {"owner": {"reputation": 4288, "user_id": 527152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c784b2e1c3fb28d8bad8f50ca0282b4?s=128&d=identicon&r=PG", "display_name": "Azolo", "link": "https://stackoverflow.com/users/527152/azolo"}, "edited": false, "score": 0, "creation_date": 1440646004, "post_id": 32213393, "comment_id": 52362022, "body": "There are a lot of reasons why someone has to use Windows. Sometimes people just want to... An answer to a question shouldn&#39;t really ever be don&#39;t try it when there is an actual answer somewhere."}], "answers": [{"comments": [{"owner": {"reputation": 4288, "user_id": 527152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c784b2e1c3fb28d8bad8f50ca0282b4?s=128&d=identicon&r=PG", "display_name": "Azolo", "link": "https://stackoverflow.com/users/527152/azolo"}, "edited": false, "score": 0, "creation_date": 1440646098, "post_id": 32215244, "comment_id": 52362037, "body": "Pretty much this. I recommend using 2.1.X, it&#39;s the best supported right now."}], "tags": [], "owner": {"reputation": 23, "user_id": 4739082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c41e7a5baa9ed5216a084d9733ca3fd?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Perry", "link": "https://stackoverflow.com/users/4739082/rob-perry"}, "is_accepted": false, "score": 1, "last_activity_date": 1440542310, "creation_date": 1440542310, "answer_id": 32215244, "question_id": 32213393, "link": "https://stackoverflow.com/questions/32213393/rails-deployment-to-windows-server/32215244#32215244", "title": "Rails deployment to Windows Server", "body": "<p>Nokogiri won't support windows and ruby 2.2.x until the next release (which should be very soon).\nsee flavorjones's <a href=\"https://github.com/sparklemotion/nokogiri/issues/1256\" rel=\"nofollow\">reply</a> and <a href=\"https://groups.google.com/forum/#!msg/nokogiri-talk/aJkGZz5bhRo/3yu3BNFPDgAJ\" rel=\"nofollow\">post</a></p>\n\n<blockquote>\n  <p>Hi all, I just emailed nokogiri-talk about a Windows release. If you don't subscribe, you should ... TL;DR we're going to get this out the door this week, honest. Thanks for your patience. </p>\n</blockquote>\n\n<p>I believe there are issues because it doesn't suport native builds (relying on prebuilt DLLs instead.</p>\n"}], "owner": {"reputation": 1, "user_id": 5265919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e30bd177d43a8623c49c543b87d66e89?s=128&d=identicon&r=PG&f=1", "display_name": "MathManiac", "link": "https://stackoverflow.com/users/5265919/mathmaniac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440542310, "creation_date": 1440534279, "last_edit_date": 1440535562, "question_id": 32213393, "link": "https://stackoverflow.com/questions/32213393/rails-deployment-to-windows-server", "title": "Rails deployment to Windows Server", "body": "<p>I am trying to serve up a Rails application to a Windows Server that runs on a PostgreSQL DB. Was wondering if anyone had any resources/experience that would help this <i>brutal</i> process. I keep running into the Nokogiri build problem where, I can successfully <code>bundle install</code> but then when I run <code>rake db:create</code> it throws this error:</p>\n\n<pre><code>'require': cannot load such file -- 'nokogiri\\nokogiri' (LoadError)\n</code></pre>\n"}, {"tags": ["ruby", "sinatra", "figaro-ruby"], "answers": [{"tags": [], "owner": {"reputation": 2627, "user_id": 1119043, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f7141e066d691d7f18765c1ea6389b18?s=128&d=identicon&r=PG", "display_name": "belgoros", "link": "https://stackoverflow.com/users/1119043/belgoros"}, "is_accepted": true, "score": 1, "last_activity_date": 1447160879, "creation_date": 1447160879, "answer_id": 33630748, "question_id": 32213138, "link": "https://stackoverflow.com/questions/32213138/sinatra-with-figaro-gem/33630748#33630748", "title": "Sinatra with Figaro Gem", "body": "<p>You should declare yuor variables in application.yml as explained at Figaro github README <a href=\"https://github.com/laserlemon/figaro\" rel=\"nofollow\">https://github.com/laserlemon/figaro</a> (in YAML syntax):</p>\n\n<pre><code>pusher_app_id: \"2954\"\npusher_key: \"7381a978f7dd7f9a1117\"\npusher_secret: \"abdc3b896a0ffb85d373\"\n\ntest:\n  pusher_app_id: \"5112\"\n  pusher_key: \"ad69caf9a44dcac1fb28\"\n  pusher_secret: \"83ca7aa160fedaf3b350\"\n...\n</code></pre>\n\n<p>You will be able to access the declared variables as follows:</p>\n\n<pre><code>ENV[\"stripe_api_key\"] # =&gt; \"sk_live_dSqzdUq80sw9GWmuoI0qJ9rL\"\nENV.key?(\"stripe_api_key\") # =&gt; true\nENV[\"google_analytics_key\"] # =&gt; nil\nENV.key?(\"google_analytics_key\") # =&gt; false\n</code></pre>\n"}], "owner": {"reputation": 545, "user_id": 1658053, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1bf2373eaf0666115f63f3b5fb3287d6?s=128&d=identicon&r=PG&f=1", "display_name": "polarcare", "link": "https://stackoverflow.com/users/1658053/polarcare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 592, "favorite_count": 0, "accepted_answer_id": 33630748, "answer_count": 1, "score": 1, "last_activity_date": 1447160879, "creation_date": 1440533293, "question_id": 32213138, "link": "https://stackoverflow.com/questions/32213138/sinatra-with-figaro-gem", "title": "Sinatra with Figaro Gem", "body": "<p>I m trying to use Figaro gem with Sinatra. I have installed Figaro and it created the following file/ folder...</p>\n\n<pre><code>/config/application.yml\n</code></pre>\n\n<p>On this file I have added some environment variables...</p>\n\n<pre><code>ENV['GMAIL_USERNAME']\nENV['GMAIL_PASSWORD']\n</code></pre>\n\n<p>Then on my my \"app.rb\" file I am trying to include the yml file like...</p>\n\n<pre><code>require 'config/application.yml'\n</code></pre>\n\n<p>How can I have access to my \"ENV['BIG_SECRET']\" in my app.rb file?</p>\n\n<pre><code>Mail.defaults do\n  delivery_method :smtp, {\n    :address =&gt; 'smtp.gmail.com',\n    :port =&gt; '587',\n    :domain =&gt; 'mydomain.com',\n    :user_name =&gt; ENV['GMAIL_USERNAME'],\n    :password =&gt; ENV['GMAIL_PASSWORD'],\n    :authentication =&gt; :plain,\n    :enable_starttls_auto =&gt; true\n  }\nend\n</code></pre>\n"}, {"tags": ["ruby", "encoding", "inspect"], "answers": [{"tags": [], "owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "is_accepted": true, "score": 3, "last_activity_date": 1440532744, "creation_date": 1440532744, "answer_id": 32212975, "question_id": 32212974, "link": "https://stackoverflow.com/questions/32212974/why-do-i-get-a-encodingcompatibilityerror-with-inspect/32212975#32212975", "title": "Why do I get a Encoding::CompatibilityError with #inspect?", "body": "<p>The error message explains already the why:\n<em>inspected result must be ASCII only or use the default external encoding</em></p>\n\n<p>In this case the inspect-command gets a UTF-8 character (Not ASCII), but the default encoding seems to be another.\nThe default encoding can be read in <code>Encoding.default_external</code>.</p>\n\n<p>To avoid the error you must encode the result of inspect:</p>\n\n<pre><code>#encoding: utf-8\nclass Text\n  def initialize(txt)\n    @txt = txt\n  end\n  def inspect\n    #force ASCII and replace invalid/undefined characters\n    (\"&lt;Text: %s&gt;\" % @txt).encode('ASCII', :undef =&gt; :replace, :invalid =&gt; :replace)\n  end\nend\n\np Text.new('H\u00e4, was soll das?') #-&gt; &lt;Text: H?, was soll das?&gt;\n</code></pre>\n\n<p>Instead of <code>ASCII</code> in <code>encode</code> you can use also <code>Encoding.default_external</code>:</p>\n\n<pre><code>(\"&lt;Text: %s&gt;\" % @txt).encode(Encoding.default_external, :undef =&gt; :replace)\n</code></pre>\n"}], "owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 819, "favorite_count": 0, "accepted_answer_id": 32212975, "answer_count": 1, "score": 2, "last_activity_date": 1440532744, "creation_date": 1440532744, "question_id": 32212974, "link": "https://stackoverflow.com/questions/32212974/why-do-i-get-a-encodingcompatibilityerror-with-inspect", "title": "Why do I get a Encoding::CompatibilityError with #inspect?", "body": "<p>The following code works without problem:</p>\n\n<pre><code>#encoding: utf-8\nclass Text\n  def initialize(txt)\n    @txt = txt\n  end\n  def inspect\n    \"&lt;Text: %s&gt;\" % @txt\n  end\nend\n\np Text.new('Hello World')\n</code></pre>\n\n<p>But if I try <code>p Text.new('H\u00e4, was soll das?')</code> I get a Encoding::CompatibilityError:</p>\n\n<pre><code>inspect_with_umlaut.rb:26:in `p': inspected result must be ASCII only or use the default external encoding (Encoding::CompatibilityError)\n  from inspect_with_umlaut.rb:26:in `&lt;main&gt;'\n</code></pre>\n\n<p>Why this? </p>\n\n<p>And more important: How can I avoid it?</p>\n"}, {"tags": ["ruby", "profiling", "profiler"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1440533757, "post_id": 32212970, "comment_id": 52310407, "body": "I see that <code>(130&#47;0.6842)&#47;2 #=&gt; 95.001...</code> A clue, perhaps?"}, {"owner": {"reputation": 633, "user_id": 5107759, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/33e659c0770221780a6fd21960909b6d?s=128&d=identicon&r=PG", "display_name": "joanbm", "link": "https://stackoverflow.com/users/5107759/joanbm"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1440538768, "post_id": 32212970, "comment_id": 52312799, "body": "@CarySwoveland The calculation does not fit other rows. I&#39;d say the <code>total ms&#47;call</code> means time in ms per method call since first stack entered from the top-level, not from the closest outer stack - that&#39;s <code>self ms&#47;call</code>. The base value is not in the table, only number of calls so deriving the formula from it is meaningless."}, {"owner": {"reputation": 633, "user_id": 5107759, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/33e659c0770221780a6fd21960909b6d?s=128&d=identicon&r=PG", "display_name": "joanbm", "link": "https://stackoverflow.com/users/5107759/joanbm"}, "edited": false, "score": 0, "creation_date": 1440539469, "post_id": 32212970, "comment_id": 52313094, "body": "It seems this is the correct meaning: <a href=\"http://rxr.whitequark.org/mri/source/lib/profiler.rb#60\" rel=\"nofollow noreferrer\">Profiler source</a>"}, {"owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 0, "creation_date": 1440540734, "post_id": 32212970, "comment_id": 52313582, "body": "It&#39;s yet another <a href=\"https://archive.is/9r927\" rel=\"nofollow noreferrer\"><i>gprof clone</i></a>. It says <code>Profiling your program is a way of determining which methods are called and how long each method takes to complete.  This way you can detect which methods are possible bottlenecks.</code> Wrong."}, {"owner": {"reputation": 11332, "user_id": 52499, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e13c0896a2408caf559934466737f716?s=128&d=identicon&r=PG", "display_name": "x-yuri", "link": "https://stackoverflow.com/users/52499/x-yuri"}, "edited": false, "score": 0, "creation_date": 1440545881, "post_id": 32212970, "comment_id": 52315285, "body": "I indeed was going to try <code>ruby-prof</code>. Just wanted to clear things up, concerning this one."}], "answers": [{"comments": [{"owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 0, "creation_date": 1440541015, "post_id": 32214896, "comment_id": 52313672, "body": "How do you figure self time makes sense?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 0, "creation_date": 1440541094, "post_id": 32214896, "comment_id": 52313699, "body": "@MikeDunlavey Because the method with a large <code>self seconds</code> is where you want to improve."}, {"owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 0, "creation_date": 1440541168, "post_id": 32214896, "comment_id": 52313729, "body": "Only if the program is tiny. Check the second answer <a href=\"https://archive.is/9r927\" rel=\"nofollow noreferrer\"><i>here</i></a>."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1443816945, "last_edit_date": 1443816945, "creation_date": 1440540482, "answer_id": 32214896, "question_id": 32212970, "link": "https://stackoverflow.com/questions/32212970/how-to-read-ruby-profilers-output/32214896#32214896", "title": "How to read ruby profiler&#39;s output", "body": "<p>A method may spend time on its own, or spend time due to time spent by the methods it calls. <code>self ms/call</code> only counts the former, while <code>total ms/call</code> counts the sum of both. It makes sense to represent <code>self seconds</code>, but not <code>total seconds</code> because that would be cumulate all over the place.</p>\n"}, {"tags": [], "owner": {"reputation": 11332, "user_id": 52499, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e13c0896a2408caf559934466737f716?s=128&d=identicon&r=PG", "display_name": "x-yuri", "link": "https://stackoverflow.com/users/52499/x-yuri"}, "is_accepted": true, "score": 2, "last_activity_date": 1441228361, "last_edit_date": 1441228361, "creation_date": 1440544376, "answer_id": 32215586, "question_id": 32212970, "link": "https://stackoverflow.com/questions/32212970/how-to-read-ruby-profilers-output/32215586#32215586", "title": "How to read ruby profiler&#39;s output", "body": "<p><strong>tl;dr</strong> <code>self seconds</code> + time spent in called methods</p>\n\n<p>Okay, let us dig into the <a href=\"https://github.com/ruby/ruby/blob/v2_2_3/lib/profiler.rb\" rel=\"nofollow\">source</a>. There are two <code>proc</code>s, gathering information there: <a href=\"https://github.com/ruby/ruby/blob/v2_2_3/lib/profiler.rb#L79-L83\" rel=\"nofollow\"><code>PROFILE_CALL_PROC</code></a>, <a href=\"https://github.com/ruby/ruby/blob/v2_2_3/lib/profiler.rb#L84-L97\" rel=\"nofollow\"><code>PROFILE_RETURN_PROC</code></a>. The former gets called before stepping into a method, the latter before stepping out.</p>\n\n<p><code>@@maps[Thread.current]</code> accumulates information about methods, namely <a href=\"https://github.com/ruby/ruby/blob/v2_2_3/lib/profiler.rb#L91\" rel=\"nofollow\"><code>calls</code></a>, <a href=\"https://github.com/ruby/ruby/blob/v2_2_3/lib/profiler.rb#L93\" rel=\"nofollow\"><code>total seconds</code></a> (<code>cost</code>), <a href=\"https://github.com/ruby/ruby/blob/v2_2_3/lib/profiler.rb#L94\" rel=\"nofollow\"><code>self seconds</code></a> and <a href=\"https://github.com/ruby/ruby/blob/v2_2_3/lib/profiler.rb#L90\" rel=\"nofollow\"><code>name</code></a> in this particular order. This very information is served later to the user, in a more wordy fashion. After being <a href=\"https://github.com/ruby/ruby/blob/v2_2_3/lib/profiler.rb#L123-L131\" rel=\"nofollow\">aggregated</a>.</p>\n\n<p><code>@@stacks[Thread.current]</code> stores information about methods being run, in a stack. Namely \"when the method was started\", and \"how much time does called (child) methods took\" (<code>tick[1]</code>). This is more of a temporary data structure destined to help gathering data into <code>@@maps</code>.</p>\n\n<p>As one can supposedly see now, <a href=\"https://github.com/ruby/ruby/blob/v2_2_3/lib/profiler.rb#L94\" rel=\"nofollow\"><code>self seconds</code></a> is <a href=\"https://github.com/ruby/ruby/blob/v2_2_3/lib/profiler.rb#L93\" rel=\"nofollow\"><code>total seconds</code></a> minus <a href=\"https://github.com/ruby/ruby/blob/v2_2_3/lib/profiler.rb#L95\" rel=\"nofollow\"><code>cost</code></a> (time spent in called methods). That is, <code>total seconds</code> is a time spent both in the method itself and in the methods it calls.</p>\n\n<p>P.S. Pretty much reminds <a href=\"https://github.com/ruby-prof/ruby-prof/blob/master/examples/flat.txt\" rel=\"nofollow\">flat profiles</a> in <code>ruby-prof</code>.</p>\n"}], "owner": {"reputation": 11332, "user_id": 52499, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e13c0896a2408caf559934466737f716?s=128&d=identicon&r=PG", "display_name": "x-yuri", "link": "https://stackoverflow.com/users/52499/x-yuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 938, "favorite_count": 0, "accepted_answer_id": 32215586, "answer_count": 2, "score": 3, "last_activity_date": 1516215371, "creation_date": 1440532730, "last_edit_date": 1516215371, "question_id": 32212970, "link": "https://stackoverflow.com/questions/32212970/how-to-read-ruby-profilers-output", "title": "How to read ruby profiler&#39;s output", "body": "<p>Let us take an example from the <a href=\"http://ruby-doc.org/stdlib-2.2.3/libdoc/profiler/rdoc/Profiler__.html\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<pre><code>require 'profile'\n\ndef slow_method\n  5000.times do\n    9999999999999999*999999999\n  end\nend\n\ndef fast_method\n  5000.times do\n    9999999999999999+999999999\n  end\nend\n\nslow_method\nfast_method\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>  %   cumulative   self              self     total\n time   seconds   seconds    calls  ms/call  ms/call  name\n 68.42     0.13      0.13        2    65.00    95.00  Integer#times\n 15.79     0.16      0.03     5000     0.01     0.01  Fixnum#*\n 15.79     0.19      0.03     5000     0.01     0.01  Fixnum#+\n  0.00     0.19      0.00        2     0.00     0.00  IO#set_encoding\n  0.00     0.19      0.00        1     0.00   100.00  Object#slow_method\n  0.00     0.19      0.00        2     0.00     0.00  Module#method_added\n  0.00     0.19      0.00        1     0.00    90.00  Object#fast_method\n  0.00     0.19      0.00        1     0.00   190.00  #toplevel\n</code></pre>\n\n<ul>\n<li><code>% time</code> is how much time spent in those methods.</li>\n<li><code>cumulative seconds</code> are previous <code>cumulative seconds</code> plus <code>self seconds</code>, that is, <code>0 + 0.13 = 0.13</code>, <code>0.13 + 0.03 = 0.16</code>, <code>0.16 + 0.03 = 0.19</code>, and so on.</li>\n<li><code>self seconds</code> are <code>% time</code> measured in seconds.</li>\n<li><code>calls</code> says how many times the method was called.</li>\n<li><code>self ms/call</code> is <code>self seconds</code> / <code>calls</code>.</li>\n<li>What is <code>total ms/call</code>?</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1440531786, "post_id": 32212585, "comment_id": 52309232, "body": "You might want to look at <a href=\"http://api.rubyonrails.org/classes/ActionController/HttpAuthentication/Basic.html\" rel=\"nofollow noreferrer\">the rails basic auth guide</a>"}, {"owner": {"reputation": 712, "user_id": 4191738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKXDY.jpg?s=128&g=1", "display_name": "Sculper", "link": "https://stackoverflow.com/users/4191738/sculper"}, "edited": false, "score": 0, "creation_date": 1440531918, "post_id": 32212585, "comment_id": 52309317, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/31929897/how-to-allow-a-user-to-login-with-user-name-or-email-using-rails\">How to allow a user to login with user_name or email using Rails</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4531850"}, "edited": false, "score": 0, "creation_date": 1440532105, "post_id": 32212585, "comment_id": 52309424, "body": "I had read that one Sculper but no luck on my end so I figured I&#39;d ask myself. :)"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4531850"}, "edited": false, "score": 0, "creation_date": 1440532062, "post_id": 32212697, "comment_id": 52309391, "body": "Thanks so much man! I am going to rate your answer as correct! It means a lot, The 3rd line of code you gave me to try didn&#39;t work though but the other two did user = User.find_by(name: params[:name]) ||        User.find_by(email: params[:name]) so thank you!"}, {"owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "edited": false, "score": 0, "creation_date": 1440532156, "post_id": 32212697, "comment_id": 52309453, "body": "@genobambino Just noticed a missing <code>]</code> in that third line.  It should work as well now."}], "tags": [], "owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "is_accepted": true, "score": 0, "last_activity_date": 1440532119, "last_edit_date": 1440532119, "creation_date": 1440531797, "answer_id": 32212697, "question_id": 32212585, "link": "https://stackoverflow.com/questions/32212585/how-can-i-allow-users-to-sign-in-using-their-email-or-username/32212697#32212697", "title": "How can I allow users to sign in using their email or username?", "body": "<p>In SessionsController#create change this line:</p>\n\n<pre><code>user = User.find_by(name: params[:name])\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>user = User.find_by(name: params[:name]) ||\n       User.find_by(email: params[:name])\n</code></pre>\n\n<p>Or some other variant that looks at both fields:</p>\n\n<pre><code>user = User.where([\"name = ? OR email = ?\", params[:name], params[:name]]).first\n</code></pre>\n\n<p>You could also check <code>params[:name]</code> and if it has an '@' in it, look it up by email, otherwise by username.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4531850"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 32212697, "answer_count": 1, "score": 0, "last_activity_date": 1440532747, "creation_date": 1440531471, "last_edit_date": 1440532747, "question_id": 32212585, "link": "https://stackoverflow.com/questions/32212585/how-can-i-allow-users-to-sign-in-using-their-email-or-username", "title": "How can I allow users to sign in using their email or username?", "body": "<p>I've spent days looking for this, I made a username table when creating my users and realized later in the project that I didn't need to have that but instead just let them use the email. I've tried different things with no luck. PLEASE NOTE: I am NOT USING DEVISE. I do not want to use Devise either. Here is my code, Thanks in advanced if you can help me out! And no this is not the same question as another because I read that one and did what the correct answer said to and no luck.</p>\n\n<p>This is users_controller.rb, </p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  before_action :set_user, only: [:show, :edit, :update, :destroy]\n  after_action :signed_in_after_register, only: :create \n\n  def index\n    @users = User.all\n    @user = User.find(session[:user_id])\n    @user = User.search(params[:search])\n  end\n\n  def dashboard \n    @user = User.find(session[:user_id]) unless session[:user_id] == \"\"\n    redirect_to login_path, notice: \"You're not logged in\" unless @user \n    @posts = @user.posts.order(\"created_at DESC\").limit(3)\n    @comment = Comment.new \n    @post = Post.new \n  end \n\n  def newsfeed\n    @user = User.find(session[:user_id]) unless session[:user_id] == nil\n    redirect_to login_path, notice: \"You're not logged in\" unless @user \n    @posts = @user.posts.order(\"created_at DESC\").limit(3)\n  end\n\n  def nav\n    @user = User.find(session[:user_id])\n  end\n  def posts\n    @user = User.find(session[:user_id])\n    @posts = @user.posts\n  end\n\n  def destroy\n    @user = User.find(session[:user_id]) unless session[:user_id] == \"\"\n    redirect_to login_path, notice: \"You're not logged in\" unless @user \n  end\n\n  def welcome\n    @user = User.find(session[:user_id]) unless session[:user_id] == \"\"\n    redirect_to login_path, notice: \"You're not logged in\" unless @user \n  end\n\n  def show\n    @user = User.find(session[:user_id]) unless session[:user_id] == \"\"\n    redirect_to login_path, notice: \"You're not logged in\" unless @user \n    @posts = @user.posts.order(\"created_at DESC\").limit(3)\n    @comment = Comment.new \n    @post = Post.new \n  end\n\n  def new\n    @post = Post.new(params[:post_id])\n    @user = User.new\n  end\n\n  def edit\n\n  end\n\n  def create\n    @user = User.new(user_params)\n\n    respond_to do |format|\n      if @user.save\n        format.html { redirect_to dashboard_path, notice: 'User was successfully created!' }\n        format.json { render :show, status: :created, location: @user }\n      else\n        format.html { render :new }\n        format.json { render json: @user.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def update\n\n    respond_to do |format|\n      if @user.update(user_params)\n        format.html { redirect_to dashboard_path, notice: 'User was successfully updated.' }\n        format.json { render :show, status: :ok, location: @user }\n      else\n        format.html { render :edit }\n        format.json { render json: @user.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def destroy\n    @user.destroy\n    respond_to do |format|\n      format.html { redirect_to users_url, notice: 'User was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n\n    def set_user\n      @user = User.find(params[:id])\n    end\n    def signed_in_after_register \n      session[:user_id] = @user.id \n    end\n\n    def user_params\n      params.require(:user).permit(:first_name, :last_name, :name, :bio, :password, :password_confirmation, :email, :age, :profile_picture, :post, :body)\n    end\nend\n</code></pre>\n\n<p>Here is my Model for user.rb, </p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_secure_password\n  validates :email, :first_name, :last_name, :name, presence: true, uniqueness: true \n  validates_inclusion_of :age, in: 10..100\n  validates :password, presence: true \n  has_many :posts\n  has_attached_file :profile_picture, :styles =&gt; { :medium =&gt; \"300x300&gt;\", :thumb =&gt; \"100x100&gt;\" }, \n  :default_url =&gt; \"app/assets/images/missing.png\", \n  :path =&gt;  \":rails_root/public/system/:class/:attachment/:id_partition/:style/:filename\" \n  validates_attachment_content_type :profile_picture, :content_type =&gt; /\\Aimage\\/.*\\Z/\n\nend\n</code></pre>\n\n<p>This is my _form.html.erb,</p>\n\n<pre><code>&lt;%= form_for @user, html: { multipart: true } do |f| %&gt;\n  &lt;% if @user.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@user.errors.count, \"error\") %&gt; prohibited this user from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% @user.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;div class=\"sign_up_form_2\"&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :first_name %&gt;\n    &lt;%= f.text_field :first_name, placeholder: \"First Name\", class: \"form-control\" %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :last_name %&gt;\n    &lt;%= f.text_field :last_name, placeholder: \"Last Name\", class: \"form-control\" %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :email %&gt;&lt;br&gt;\n    &lt;%= f.text_field :email, placeholder: \"Email\", class: \"form-control\" %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :age %&gt;&lt;br&gt;\n    &lt;%= f.number_field :age, placeholder: \"Age\", class: \"form-control\" %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :password %&gt;&lt;br&gt;\n    &lt;%= f.password_field :password, placeholder: \"Password\", class: \"form-control\" %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :password_confirmation %&gt;&lt;br&gt;\n    &lt;%= f.password_field :password_confirmation, placeholder: \"Password Confirmation\", class: \"form-control\" %&gt;\n  &lt;/div&gt;&lt;br&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :bio %&gt;\n    &lt;%= f.text_area :bio, placeholder: \"Write something!\", class: \"form-control\" %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :profile_picture %&gt;\n    &lt;%= f.file_field :profile_picture %&gt;&lt;br&gt;\n  &lt;/div&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit \"Create Account\", class: \"btn btn-default btn-sign-up\" %&gt;\n  &lt;/div&gt;\n\n&lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>This is in my sessions_controller.rb,</p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n  before_action :checked_logged_in, only: :login \n  def login\n\n  end\n\n  def create\n    user = User.find_by(name: params[:name])\n    if user and user.authenticate(params[:password])\n        session[:user_id] = user.id \n        redirect_to dashboard_path\n    else \n        redirect_to login_url, notice: \"Invalid User or Password Combination\"\n    end\n\n  end\n\n  def destroy\n    if session[:user_id]\n        session[:user_id] = nil\n        redirect_to login_url\n\n    end\n\n  end\n  private \n\n  def checked_logged_in \n    if session[:user_id]\n      redirect_to dashboard_path, notice: \"You are already logged in\"\n\n    end\n\n  end\nend\n</code></pre>\n\n<p>Just in case here is my gemfile,</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'rails', '4.2.0'\n\ngem 'sqlite3'\n\ngem 'sass-rails', '~&gt; 5.0'\n\ngem 'uglifier', '&gt;= 1.3.0'\n\ngem 'coffee-rails', '~&gt; 4.1.0'\n\ngem 'bcrypt-ruby' \n\ngem \"twitter-bootstrap-rails\"\n\ngem \"paperclip\", \"~&gt; 4.2\"\n\ngem 'jquery-rails'\n\ngem 'turbolinks'\n\ngem 'jbuilder', '~&gt; 2.0'\n\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\ngem 'imagemagick-identify', '~&gt; 0.0.1'\n\ngem 'bootstrap-sass', '~&gt; 3.3.3'\n\ngroup :development, :test do\n\n  gem 'byebug'\n\n  gem 'web-console', '~&gt; 2.0'\nend\n\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n\n<p>I'm willing to explain any further if needed, I'm also willing to post any more code you may need to see to help me out! Thank you for your time! </p>\n"}, {"tags": ["ruby", "rspec3"], "owner": {"reputation": 633, "user_id": 1968918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbada6df20bdf14447d90aaeb2911768?s=128&d=identicon&r=PG", "display_name": "Rohit", "link": "https://stackoverflow.com/users/1968918/rohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 608, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1440530849, "creation_date": 1440530240, "last_edit_date": 1440530849, "question_id": 32212231, "link": "https://stackoverflow.com/questions/32212231/rspec-raise-error-not-working-with-allow-any-instance", "title": "rspec raise_error not working with allow_any_instance", "body": "<p>I am trying to raise an error using the below rpsec code</p>\n\n<pre><code>allow_any_instance_of(ClientClass).to receive(:instance_method).and_raise(ErrorClass, 'Error raised')\n</code></pre>\n\n<p>My code which I am trying to test has an instance method</p>\n\n<pre><code>def to_be_tested_code\n   # do some stuff\n   client = ClientClass.new\n   client.instance_method\n   # do other stuff \nend\n</code></pre>\n\n<p>My questions:</p>\n\n<ol>\n<li>The error is not getting raised when I am trying to run the test case. What am I doing wrong ?</li>\n<li>I know double is recommended to mock stuff but then I have to <code>double</code> a <code>ClientClass</code> object and inject it in causing my method signature to change like this <code>#to_be_test_code(client_class_instance)</code>. Since <code>#to_be_test_code</code> is a public method I don't want to change the method signature for the sake of easy testing.</li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1440529950, "post_id": 32212147, "comment_id": 52308182, "body": "What DBMS you are using? MySql/Postgresql ?"}, {"owner": {"reputation": 4159, "user_id": 1959050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/421de4eb68c9e4a007b0c90f05c15999?s=128&d=identicon&r=PG", "display_name": "Philip7899", "link": "https://stackoverflow.com/users/1959050/philip7899"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1440530105, "post_id": 32212147, "comment_id": 52308283, "body": "postgresql and active_Record"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1440532663, "post_id": 32212147, "comment_id": 52309757, "body": "Why? The results will be ordered by arbitrary criteria depending on how you generated it. This seems brittle and prone to breakage--what&#39;s the usecase?"}], "answers": [{"comments": [{"owner": {"reputation": 4159, "user_id": 1959050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/421de4eb68c9e4a007b0c90f05c15999?s=128&d=identicon&r=PG", "display_name": "Philip7899", "link": "https://stackoverflow.com/users/1959050/philip7899"}, "edited": false, "score": 0, "creation_date": 1440530549, "post_id": 32212245, "comment_id": 52308527, "body": "Thanks, but that&#39;s not what I&#39;m trying to do.  I&#39;m looking for a method that acts on a specific survey object IE Survey.last.  I need to be able to get the number from an object.  The method you wrote only works if I already know a number."}, {"owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "reply_to_user": {"reputation": 4159, "user_id": 1959050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/421de4eb68c9e4a007b0c90f05c15999?s=128&d=identicon&r=PG", "display_name": "Philip7899", "link": "https://stackoverflow.com/users/1959050/philip7899"}, "edited": false, "score": 0, "creation_date": 1440533729, "post_id": 32212245, "comment_id": 52310385, "body": "I see, the challenge here is that the only reason your order isn&#39;t following the ranking of ID&#39;s must be due to some default_scope acting on the collection to order it in another way.  You&#39;re going to need a method to iterate against your collection.  I don&#39;t advise this since your collection order will change all the time but it could be done."}], "tags": [], "owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "is_accepted": false, "score": 0, "last_activity_date": 1440530293, "creation_date": 1440530293, "answer_id": 32212245, "question_id": 32212147, "link": "https://stackoverflow.com/questions/32212147/looking-for-rails-ruby-method-that-returns-order-number-of-object-in-a-relation/32212245#32212245", "title": "Looking for rails/ruby method that returns order number of object in a relation", "body": "<p>You can fetch any item ordered in an array by its order by calling the following:</p>\n\n<pre><code>Survey.all[number]\n</code></pre>\n\n<p>With 0 being the first item in the collection:</p>\n\n<pre><code>Survey.all[0] # first item\nSurvey.all[1] # second item\nSurvey.all[2] # third item\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": false, "score": 0, "last_activity_date": 1440531578, "last_edit_date": 1440531578, "creation_date": 1440530772, "answer_id": 32212385, "question_id": 32212147, "link": "https://stackoverflow.com/questions/32212147/looking-for-rails-ruby-method-that-returns-order-number-of-object-in-a-relation/32212385#32212385", "title": "Looking for rails/ruby method that returns order number of object in a relation", "body": "<p>You can do that like :</p>\n\n<pre><code>@surveys = Survey.select(\"row_number() OVER(ORDER BY created_at DESC) AS row_num, *\")\n</code></pre>\n\n<p>Now, you can do <code>@surveys.first.row_num</code> like that.</p>\n\n<p>Example:</p>\n\n<pre><code>2.2.1 :002 &gt; a = Account.select(\"row_number() OVER(ORDER BY created_at DESC) AS row_num, id, email\").limit(4)\n  Account Load (0.7ms)  SELECT  row_number() OVER(ORDER BY created_at DESC) AS row_num, id, email FROM \"accounts\" WHERE \"accounts\".\"deleted_at\" IS NULL LIMIT 4\n2.2.1 :004 &gt; a.first.row_num\n =&gt; 1\n2.2.1 :005 &gt; a.last.row_num\n =&gt; 4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 376, "user_id": 2999800, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/36CsO.jpg?s=128&g=1", "display_name": "Tauhidul Islam", "link": "https://stackoverflow.com/users/2999800/tauhidul-islam"}, "is_accepted": false, "score": 1, "last_activity_date": 1440531377, "last_edit_date": 1440531377, "creation_date": 1440530881, "answer_id": 32212421, "question_id": 32212147, "link": "https://stackoverflow.com/questions/32212147/looking-for-rails-ruby-method-that-returns-order-number-of-object-in-a-relation/32212421#32212421", "title": "Looking for rails/ruby method that returns order number of object in a relation", "body": "<pre><code>Survey.all.map(&amp;:id).index(141) + 1\n</code></pre>\n\n<p>It should show back 3.</p>\n\n<pre><code>Survey.all.map(&amp;:id).index(136) + 1\n</code></pre>\n\n<p>It should show back 2.</p>\n"}, {"tags": [], "owner": {"reputation": 2174, "user_id": 3448554, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j7RcG.jpg?s=128&g=1", "display_name": "Kelsey Hannan", "link": "https://stackoverflow.com/users/3448554/kelsey-hannan"}, "is_accepted": false, "score": 0, "last_activity_date": 1440533984, "creation_date": 1440533984, "answer_id": 32213318, "question_id": 32212147, "link": "https://stackoverflow.com/questions/32212147/looking-for-rails-ruby-method-that-returns-order-number-of-object-in-a-relation/32213318#32213318", "title": "Looking for rails/ruby method that returns order number of object in a relation", "body": "<p>I don't advise you ever do this, but a really inefficient way to achieve this could be done by:</p>\n\n<pre><code>Survey.find(141).record # =&gt; 3\n\ndef record\n   Survey.all.each_with_index.map{|object, index| index if object == self}.reject{|o| o.nil?}.first\nend\n</code></pre>\n\n<p>Again this is extremely inefficient and as others have said you should not need to be in a position retrieve a collection by its order.  Default scopes and other things threaten to change the order of your collection as generated within Rails constantly, so if you're actually basing your code off of this please relook at your problem.</p>\n"}], "owner": {"reputation": 4159, "user_id": 1959050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/421de4eb68c9e4a007b0c90f05c15999?s=128&d=identicon&r=PG", "display_name": "Philip7899", "link": "https://stackoverflow.com/users/1959050/philip7899"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 1, "answer_count": 4, "score": 2, "last_activity_date": 1440533984, "creation_date": 1440529858, "question_id": 32212147, "link": "https://stackoverflow.com/questions/32212147/looking-for-rails-ruby-method-that-returns-order-number-of-object-in-a-relation", "title": "Looking for rails/ruby method that returns order number of object in a relation", "body": "<p>I am trying to get the order number of a record in a table.  I have a model called Survey.  There are 4 surveys in the database.  If I run <code>Survey.all</code> I get</p>\n\n<pre><code> =&gt; #&lt;ActiveRecord::Relation \n    [#&lt;Survey id: 138, presentation_id: 300, created_at: \"2015-08-24 20:51:25\", updated_at: \"2015-08-24 20:57:07\", current_question_id: 417, complete: true, survey_taker_name: \"\"&gt;, \n     #&lt;Survey id: 136, presentation_id: 297, created_at: \"2015-08-24 20:25:55\", updated_at: \"2015-08-24 20:27:36\", current_question_id: 392, complete: true, survey_taker_name: \"try 1\"&gt;, \n     #&lt;Survey id: 141, presentation_id: 302, created_at: \"2015-08-25 17:48:38\", updated_at: \"2015-08-25 17:49:31\", current_question_id: 417, complete: true, survey_taker_name: \"\"&gt;\n    ]&gt;\n</code></pre>\n\n<p>I am looking for a way to find what the order is of a specific record.  For example, let's say there was a method called <code>record</code>.  If I called:</p>\n\n<pre><code>Survey.find(141).record\n</code></pre>\n\n<p>I would get back <code>3</code>.  If I call</p>\n\n<pre><code>Survey.find(136).record\n</code></pre>\n\n<p>I would get back 2.</p>\n\n<p>Is there any method like that in Rails?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "rspec", "devise"], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 7014170, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FZW7AbVsfDc/AAAAAAAAAAI/AAAAAAAAFYc/b8qXwRUifOQ/photo.jpg?sz=128", "display_name": "Karan Bamniya", "link": "https://stackoverflow.com/users/7014170/karan-bamniya"}, "is_accepted": false, "score": 0, "last_activity_date": 1600616083, "creation_date": 1600616083, "answer_id": 63980694, "question_id": 32212143, "link": "https://stackoverflow.com/questions/32212143/multiple-devise-for-routes-for-the-same-rails-resource/63980694#63980694", "title": "Multiple devise_for routes for the same rails resource", "body": "<p>you write two devise_for which is not correct. you will not need api devise_for as there is no need of that in pais</p>\n<p><a href=\"https://i.stack.imgur.com/ixPbm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ixPbm.png\" alt=\"Duplicate devise_for\" /></a></p>\n"}], "owner": {"reputation": 81, "user_id": 5265683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95d6794415926355c43113ae0662bed8?s=128&d=identicon&r=PG&f=1", "display_name": "H. Dill", "link": "https://stackoverflow.com/users/5265683/h-dill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 904, "favorite_count": 2, "answer_count": 1, "score": 8, "last_activity_date": 1600616083, "creation_date": 1440529850, "question_id": 32212143, "link": "https://stackoverflow.com/questions/32212143/multiple-devise-for-routes-for-the-same-rails-resource", "title": "Multiple devise_for routes for the same rails resource", "body": "<p>I am working on an existing web application that uses Rails 3 and Devise.  My task at the moment is to add a JSON API to the application.  I have created a Mobile::SessionsController (&lt; Devise::SessionsController) that implements '#create' with a data-only response.  </p>\n\n<p>The issue is in the routing.  Right now, the relevant parts of routes.rb are as follows:</p>\n\n<pre><code> # For the web app:\n  devise_for :users, :controllers =&gt; {:sessions =&gt; 'sessions',\n                                      :registrations =&gt; 'registrations'}\n  as :user do\n    get \"/login\" =&gt; \"devise/sessions#new\"\n    get \"/logout\" =&gt; \"devise/sessions#destroy\", :as =&gt; :logout\n    post '/signup' =&gt; 'registrations#signup', :as =&gt; :signup\n  end\n  # And for the API, later on:\n  namespace :api do\n    namespace :user do\n      devise_for :users, :controllers =&gt; {:sessions =&gt; 'mobile/sessions'},\n                 skip: :all\n      devise_scope :user do\n        post 'login' =&gt; 'mobile/sessions#create'\n      end\n...\n</code></pre>\n\n<p>The data endpoint is at /api/user/login.  rake routes lists the following:</p>\n\n<pre><code>api_user_login POST /api/user/login(.:format) api/user/mobile/sessions#create\n</code></pre>\n\n<p>In my spec, there's the following:</p>\n\n<pre><code>describe Mobile::SessionsController do\n  render_views\n  describe '#create' do\n    context 'for some condition' do\n      let(:params) do\n        {\n          # basic params\n        }\n      end\n      before do\n        post :create, params.merge(format: :json)\n      end\n\n      it 'should render a json response' do\n        expect(response.headers['Content-Type']).to eq 'application/json; charset=utf-8'\n      end\n...\n</code></pre>\n\n<p>When I run the spec, it gives the following error:</p>\n\n<pre><code>AbstractController::ActionNotFound: Could not find devise mapping for path \"/mobile/sessions/create.json?params=blah.\nThis may happen for two reasons:\n\n1) You forgot to wrap your route inside the scope block. For example:\n\n  devise_scope :user do\n    get \"/some/route\" =&gt; \"some_devise_controller\"\n  end\n\n2) You are testing a Devise controller bypassing the router.\n   If so, you can explicitly tell Devise which mapping to use:\n\n   @request.env[\"devise.mapping\"] = Devise.mappings[:user]\n</code></pre>\n\n<p>I've tried many different configurations within the second devise_for block (modules, whether or not to use skip: :all, removing the second devise_for entirely, putting it at different levels of the namespace) and I can't shake this error.  My guess is that the second option there (the devise.mapping bit) is not the solution as it seems like it's not supposed to be bypassing the router at all.  And since I have the route in <em>precisely</em> the sort of block it suggests for the first option, I'm befuddled as to how to fix this thing.  How can I get this thing working?</p>\n\n<p>Appreciate the help!</p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver", "web-scraping"], "answers": [{"comments": [{"owner": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "edited": false, "score": 4, "creation_date": 1440543281, "post_id": 32212185, "comment_id": 52314470, "body": "Please don&#39;t do <code>sleep</code>s... the proper way is to wait for an element on the new page to be accessible. That way your script doesn&#39;t break when 1 second isn&#39;t enough and goes faster when you don&#39;t need a full second."}], "tags": [], "owner": {"reputation": 610, "user_id": 2873497, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/acd75ed7dc7b147b62a5f06592c8e8ba?s=128&d=identicon&r=PG", "display_name": "arthur.karganyan", "link": "https://stackoverflow.com/users/2873497/arthur-karganyan"}, "is_accepted": true, "score": 0, "last_activity_date": 1440529991, "creation_date": 1440529991, "answer_id": 32212185, "question_id": 32212080, "link": "https://stackoverflow.com/questions/32212080/when-i-click-a-button-that-leads-to-another-page-how-do-i-get-the-contents-of-t/32212185#32212185", "title": "When I click a button that leads to another page, how do I get the contents of the new page?", "body": "<p>If you are sure, that Selenium had clicked on the button the next page is loaded, then I think you should add <code>sleep 1</code> after click.</p>\n"}, {"tags": [], "owner": {"reputation": 4809, "user_id": 4423545, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/dRPDg.jpg?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4423545/andrew"}, "is_accepted": false, "score": 0, "last_activity_date": 1440530221, "creation_date": 1440530221, "answer_id": 32212228, "question_id": 32212080, "link": "https://stackoverflow.com/questions/32212080/when-i-click-a-button-that-leads-to-another-page-how-do-i-get-the-contents-of-t/32212228#32212228", "title": "When I click a button that leads to another page, how do I get the contents of the new page?", "body": "<p>Possibly ajax wasn't finished on the moment after the click action.\nTry to wait 1-3 seconds before doing additional actions.</p>\n"}], "owner": {"reputation": 2635, "user_id": 1435711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9fac7fe4c7290024faee8bfe6367f130?s=128&d=identicon&r=PG", "display_name": "Username", "link": "https://stackoverflow.com/users/1435711/username"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 32212185, "answer_count": 2, "score": 0, "last_activity_date": 1440530221, "creation_date": 1440529614, "question_id": 32212080, "link": "https://stackoverflow.com/questions/32212080/when-i-click-a-button-that-leads-to-another-page-how-do-i-get-the-contents-of-t", "title": "When I click a button that leads to another page, how do I get the contents of the new page?", "body": "<p>I'm using <code>selenium-webdriver</code> to scrape a website. When the browser clicks the \"Next\" button, the next page loads, but when I try to find the elements I want, the driver prints contents from the previous page.</p>\n\n<p>Here's my script:</p>\n\n<pre><code>require 'selenium-webdriver'\n\ndriver = Selenium::WebDriver.for :firefox\nurl = 'http://www.airforwarders.org/companies'\npage = driver.navigate.to(url)\n\ndriver.find_elements(:css=&gt;'.item_main').each{|div|\n    puts div.text \n}\n\npaginationToolbar = driver.find_element(:css=&gt;'.pagination-toolbar')\npaginationToolbar.find_elements(:css=&gt;'.btn')[-2].click # Clicking the \"next\" button\ndriver.find_elements(:css=&gt;'.item_main').each{|div|\n    puts div.text # This shows the same stuff from the previous loop\n}\n</code></pre>\n\n<p>If I can get the contents from the new page, this would be no problem. How do I do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1440529417, "post_id": 32211994, "comment_id": 52307892, "body": "Class name should match filename. Name the class <code>SlugUniqueVacations</code>"}], "answers": [{"comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1440531515, "post_id": 32212046, "comment_id": 52309050, "body": "The only way Rails can guess which class to instantiate and invoke <code>change</code> on is by looking at the filename. Your filename needs to tell Rails the name of the class it contains, otherwise Rails cannot guess the name of the class to instantiate."}], "tags": [], "owner": {"reputation": 376, "user_id": 2999800, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/36CsO.jpg?s=128&g=1", "display_name": "Tauhidul Islam", "link": "https://stackoverflow.com/users/2999800/tauhidul-islam"}, "is_accepted": true, "score": 4, "last_activity_date": 1440529469, "creation_date": 1440529469, "answer_id": 32212046, "question_id": 32211994, "link": "https://stackoverflow.com/questions/32211994/making-migration-by-hand-ruby-on-rails-4/32212046#32212046", "title": "making migration by hand ruby on rails 4", "body": "<p>Migration file name and class name must be same.</p>\n\n<pre><code>class SlugUniqueVacations &lt; ActiveRecord::Migration\n  def change\n    add_index :vacations, [:slug], :unique =&gt; true\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 6798, "user_id": 3282434, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd87b9229901acfa4c6f754da6bf3655?s=128&d=identicon&r=PG&f=1", "display_name": "codyc4321", "link": "https://stackoverflow.com/users/3282434/codyc4321"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 32212046, "answer_count": 1, "score": 0, "last_activity_date": 1440532850, "creation_date": 1440529306, "last_edit_date": 1440532850, "question_id": 32211994, "link": "https://stackoverflow.com/questions/32211994/making-migration-by-hand-ruby-on-rails-4", "title": "making migration by hand ruby on rails 4", "body": "<p>I have been learning rails, and am having an issue making a migration by hand. What I have done:</p>\n\n<p>The filename is:</p>\n\n<pre><code>20150825194806_slug_unique_vacations.rb\n</code></pre>\n\n<p>which I made up. I tried cutting and pasting a migration and I named the class based on what I thought made sense:</p>\n\n<pre><code>class SlugUniqueIndex &lt; ActiveRecord::Migration\n  def change\n    add_index :vacations, [:slug], :unique =&gt; true\n  end\nend\n</code></pre>\n\n<p>but I get this error:</p>\n\n<pre><code>cchilders@cody_pc:~/projects/rails_projects/vacation$ rake db:migrate\nrake aborted!\nStandardError: An error has occurred, this and all later migrations canceled:\n\nuninitialized constant SlugUniqueVacations\nTasks: TOP =&gt; db:migrate\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>What is the correct way to migrate where you only want to make a single field that already exists in a table unique?</p>\n"}, {"tags": ["arrays", "ruby", "hash", "key"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1440529101, "post_id": 32211748, "comment_id": 52307707, "body": "Must &quot;north&quot; be the first element of the array or any element of the array?"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1440529397, "post_id": 32211748, "comment_id": 52307876, "body": "@CarySwoveland OP is looking for identifying a key if  given a member of the array value - it should return <code>&quot;direction&quot;</code> for <code>&quot;south&quot;</code> as well"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1440530987, "post_id": 32211748, "comment_id": 52308751, "body": "James, please answer. @Wand, I think it could be interpreted either way.  Suppose <code>words = { &quot;Jones&quot; =&gt; [&quot;Bob&quot;, &quot;chief underling&quot;], &quot;Cher&quot; =&gt; [&quot;&quot;, &quot;singer and actor&quot;]</code>. and you wanted the person with no first name."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1440542234, "post_id": 32211748, "comment_id": 52314108, "body": "Cannot be reproduced."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1440917494, "post_id": 32211748, "comment_id": 52464916, "body": "I asked a very simple question. When you did not answer, I asked again. Again, you did not answer. Did you never learn manners?"}], "answers": [{"tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": false, "score": 1, "last_activity_date": 1440528922, "last_edit_date": 1440528922, "creation_date": 1440528614, "answer_id": 32211809, "question_id": 32211748, "link": "https://stackoverflow.com/questions/32211748/get-corresponding-key-from-an-array-value/32211809#32211809", "title": "Get corresponding key from an array value", "body": "<p>You can use <code>Enumerable#select</code></p>\n\n<pre><code>@@words\n=&gt; {\"direction\"=&gt;[\"north\", \"south\", \"west\"], \"verb\"=&gt;[\"go\", \"jump\"]}\n@@words.select { |_, v| v.include?(\"north\") }\n=&gt; {\"direction\"=&gt;[\"north\", \"south\", \"west\"]}\n@@words.select { |_, v| v.include?(\"north\") }.keys\n=&gt; [\"direction\"]\n</code></pre>\n\n<p>An alternative with <code>map</code>:</p>\n\n<pre><code>@@words.map { |k, v| k if v.include?(\"north\") }.compact\n=&gt; [\"direction\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1440529549, "post_id": 32211892, "comment_id": 52307969, "body": "Do you have the <code>tick</code> icon to hypnotise OP to accept your answer?  Or trick people to upvote your answer thinking its an accepted answer?  It sure works in 2nd case :-)"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1440529792, "post_id": 32211892, "comment_id": 52308109, "body": "@WandMaker, you underestimate human beings. It is just the most correct and on the point solution atm. :)"}, {"owner": {"reputation": 1967, "user_id": 2056180, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/guLZe.jpg?s=128&g=1", "display_name": "James Mitchell", "link": "https://stackoverflow.com/users/2056180/james-mitchell"}, "edited": false, "score": 0, "creation_date": 1440529874, "post_id": 32211892, "comment_id": 52308151, "body": "Whats the purpose of the underscore btw? Why can&#39;t it be |k,v|, I thought those were just placeholder terms? So why does |underscore, value| have to be used? @ndn"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 1967, "user_id": 2056180, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/guLZe.jpg?s=128&g=1", "display_name": "James Mitchell", "link": "https://stackoverflow.com/users/2056180/james-mitchell"}, "edited": false, "score": 1, "creation_date": 1440529956, "post_id": 32211892, "comment_id": 52308188, "body": "@JamesMitchell, it&#39;s an idiom. I could have used <code>key</code> there, but the convention goes that if you are not interested in something, you should name it <code>_</code> (as the case here, I&#39;m not directly accessing the <code>key</code> variable)."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 2, "creation_date": 1440531160, "post_id": 32211892, "comment_id": 52308849, "body": "@Wand, the technical term is &quot;<a href=\"https://en.wikipedia.org/wiki/Subliminal_stimuli\" rel=\"nofollow noreferrer\">subliminal stimuli</a>&quot;."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1440531417, "post_id": 32211892, "comment_id": 52308984, "body": "@CarySwoveland And it has already made OP to accept the answer :-)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 2, "creation_date": 1440531752, "post_id": 32211892, "comment_id": 52309212, "body": "@Wand, something like <a href=\"http://lowres.jantoo.com/entertainment-hypnotised-guilty_verdicts-judges-trails-hypnotist-16514979_low.jpg\" rel=\"nofollow noreferrer\">this</a>?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1440535849, "post_id": 32211892, "comment_id": 52311442, "body": "@ndn while I up voted on the basis of your solution I think you over estimate humanity and under estimate the power of suggestion. Almost all successful, full scale, marketing campaigns start with an idea of how they want their product or company to be perceived and they build around that rather than the product itself (e.g. Pharmaceuticals). In your case your product is your answer and using a green check in the same fashion SO does causes a perception of correctness whether or not this was you intention. Visual perception is more immediate than cognitive processing to help keep us alive."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1440536448, "post_id": 32211892, "comment_id": 52311745, "body": "@engineersmnky, again, these are assumptions. An experiment can be conducted. Try to use a generic picture for a month. Then use a green tick sign for a month. Then use a red x mark for a month. As long as your answers remain consistent, I would guess there would be no statistically significant difference. Some of my answers are upvoted, some are accepted, some are ignored. It really mainly depends on the relevance and correctness of a given answer. Also, what if it has the opposite effect? Maybe people subconsciously feel tricked and are in fact less likely to approve of a tick sign."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1440537342, "post_id": 32211892, "comment_id": 52312152, "body": "@engineersmnky, ofc, if you are willing to conduct such an experiment, you should think of an objective way to retrospectively measure progress (<b>reputation_gained</b> - <b>bounty_reputation</b>) / <b>#answers</b> sounds reasonable."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 4, "last_activity_date": 1440528928, "creation_date": 1440528928, "answer_id": 32211892, "question_id": 32211748, "link": "https://stackoverflow.com/questions/32211748/get-corresponding-key-from-an-array-value/32211892#32211892", "title": "Get corresponding key from an array value", "body": "<pre><code>@@words.find { |_, value| value.include? 'north' }.first\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1967, "user_id": 2056180, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/guLZe.jpg?s=128&g=1", "display_name": "James Mitchell", "link": "https://stackoverflow.com/users/2056180/james-mitchell"}, "edited": false, "score": 0, "creation_date": 1440529128, "post_id": 32211898, "comment_id": 52307725, "body": "Okay I&#39;ll give it a try. Would you care to explain the <i>,(v,*</i>) syntax. I want to try to learn exactly what this answer does."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1440529572, "post_id": 32211898, "comment_id": 52307985, "body": "I believe the OP wants the key for a value contained in the array e.g. &#39;south&#39; would still return &quot;direction&quot; as would &#39;west&#39; but &#39;jump&#39; would return &quot;verb&quot;. That being said bravo on the syntax exploitation."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1440530252, "post_id": 32211898, "comment_id": 52308375, "body": "If I use <code>&quot;south&quot;</code> instead of <code>&quot;north&quot;</code>, then, I get <code>undefined method &#39;first&#39; for nil:NilClass (NoMethodError)</code> in the 3rd variant"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1440531218, "post_id": 32211898, "comment_id": 52308889, "body": "@engineersmnky and Wand, not necessarily. See my comments on the question."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 4, "last_activity_date": 1440530523, "last_edit_date": 1440530523, "creation_date": 1440528937, "answer_id": 32211898, "question_id": 32211748, "link": "https://stackoverflow.com/questions/32211748/get-corresponding-key-from-an-array-value/32211898#32211898", "title": "Get corresponding key from an array value", "body": "<pre><code>@@words = {\n    \"direction\" =&gt; [\"north\", \"south\", \"west\"],\n    \"verb\" =&gt; [\"go\", \"jump\"]\n  }\n\n@@words.find { |_,(v,*_)| v == \"north\" }\n  #=&gt; [\"direction\", [\"north\", \"south\", \"west\"]] \n\nor \n\n@@words.find { |_,(v,*_)| v == \"north\" }.first\n  #=&gt; \"direction\"\n</code></pre>\n\n<p>depending on your requirements. I'm assuming \"north\" is to be the first element of the value array.</p>\n\n<p>A variant:</p>\n\n<pre><code>@@words.keys.find { |k| @@words[k].first == \"north\" }\n</code></pre>\n\n<p>You asked about the block variables in:</p>\n\n<pre><code>@@words.find { |_,(v,*_)| v == \"north\" }\n</code></pre>\n\n<p>I've used a combination of parallel assignment and <em>decomposition</em> (or <em>disambiguation</em>, a term I find somewhat homely). We have:</p>\n\n<pre><code>enum = @@words.find\n  #=&gt; #&lt;Enumerator: {\"direction\"=&gt;[\"north\", \"south\", \"west\"],\n  #                  \"verb\"=&gt;[\"go\", \"jump\"]}:find&gt;\n</code></pre>\n\n<p>The two elements of <code>enum</code> that will be passed to the block can be seen by converting it to an array:</p>\n\n<pre><code>enum.to_a\n  #=&gt; [[\"direction\", [\"north\", \"south\", \"west\"]],\n  #    [\"verb\", [\"go\", \"jump\"]]]\n</code></pre>\n\n<p>When the first value of <code>enum</code> is passed to the block, the block variables are set like so:</p>\n\n<pre><code>k,(v,*rest) = enum.next #=&gt; [\"direction\", [\"north\", \"south\", \"west\"]] \nk                       #=&gt; \"direction\" \nv                       #=&gt; \"north\" \nrest                    #=&gt; [\"south\", \"west\"] \n</code></pre>\n\n<p>I won't be using <code>k</code> or <code>rest</code> in the block calculation, so I've chosen to replace both with the local variable <code>_</code>, mainly to draw attention to the fact that that those variables are not being used, but also to reduce the chance of error in the block calculation.</p>\n\n<p>Incidentally, there's no point in using a class variable outside of a class, and little reason for using one at all. It's generally (always?) preferable to use a class instance variable than a class variable. If you are not familiar with the former, that will be a lesson for another day.</p>\n"}, {"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 0, "last_activity_date": 1440531289, "last_edit_date": 1440531289, "creation_date": 1440530918, "answer_id": 32212435, "question_id": 32211748, "link": "https://stackoverflow.com/questions/32211748/get-corresponding-key-from-an-array-value/32212435#32212435", "title": "Get corresponding key from an array value", "body": "<p>Some monkey patching to rescue :-)</p>\n\n<pre><code>words = {\n    \"direction\" =&gt; [\"north\", \"south\", \"west\"],\n    \"verb\" =&gt; [\"go\", \"jump\"],\n    \"test\" =&gt; \"me\"\n}\n\nclass Hash \n  def key_ (value)\n    key(value) || key(self.select { |k, v| v.include?(value)}.values.first)\n  end\nend\n\nputs words.key_(\"south\")  # direction\nputs words.key_(\"go\")     # verb\nputs words.key_(\"me\")     # test\n</code></pre>\n\n<p><code>self.select { |k, v| v.include?(value)}.values.first</code> represents the array in which <code>value</code> is present, so that now we can use built-in <a href=\"http://docs.ruby-lang.org/en/2.0.0/Hash.html#method-i-key\" rel=\"nofollow\"><code>Hash#key</code> method</a> to find the key.  </p>\n\n<p>The code also takes care of scenario when values of Hash are not all arrays by invoking <code>key(value)</code> first, and if it is <code>nil</code>, then, it try again thinking may be <code>value</code> is present in one of the <code>Hash#values</code> as an array member.</p>\n\n<p>This solution can be extended to include nested hashes, and other data types. </p>\n"}], "owner": {"reputation": 1967, "user_id": 2056180, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/guLZe.jpg?s=128&g=1", "display_name": "James Mitchell", "link": "https://stackoverflow.com/users/2056180/james-mitchell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 32211892, "answer_count": 4, "score": 1, "last_activity_date": 1440542320, "creation_date": 1440528396, "last_edit_date": 1440542320, "question_id": 32211748, "link": "https://stackoverflow.com/questions/32211748/get-corresponding-key-from-an-array-value", "title": "Get corresponding key from an array value", "body": "<p>I have a hash whose values are arrays:</p>\n\n<pre><code>@@words = {\n    \"direction\" =&gt; [\"north\", \"south\", \"west\"],\n    \"verb\" =&gt; [\"go\", \"jump\"]\n  }\n</code></pre>\n\n<p>If I do <code>@@words.key(\"north\")</code>, it will return <code>error</code> rather than <code>direction</code>. How do I get this to work properly?</p>\n"}, {"tags": ["ruby", "class"], "comments": [{"owner": {"reputation": 3518, "user_id": 925881, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3b6533f664763eaa708b6faa848f6de1?s=128&d=identicon&r=PG", "display_name": "steve_gallagher", "link": "https://stackoverflow.com/users/925881/steve-gallagher"}, "edited": false, "score": 3, "creation_date": 1440527910, "post_id": 32211568, "comment_id": 52307002, "body": "Looks like its just syntactic sugar, an alias for <code>Dir.glob([string,...],0)</code> <a href=\"http://ruby-doc.org/core-2.2.0/Dir.html\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.0/Dir.html</a>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1440528276, "post_id": 32211568, "comment_id": 52307225, "body": "<a href=\"http://ruby-doc.org/core-2.2.0/Dir.html#method-c-5B-5D\" rel=\"nofollow noreferrer\">Dir::[&#93;</a> is a garden-variety method. To define it on your own class: <code>class A; def [](other); puts other; end; end; A.new[&#39;cat&#39;] =&gt; &quot;cat&quot;</code>."}, {"owner": {"reputation": 3518, "user_id": 925881, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3b6533f664763eaa708b6faa848f6de1?s=128&d=identicon&r=PG", "display_name": "steve_gallagher", "link": "https://stackoverflow.com/users/925881/steve-gallagher"}, "edited": false, "score": 3, "creation_date": 1440528280, "post_id": 32211568, "comment_id": 52307228, "body": "for your second point -&gt; <a href=\"http://stackoverflow.com/questions/13767240/ruby-how-to-make-a-public-static-method\" title=\"ruby how to make a public static method\">stackoverflow.com/questions/13767240/&hellip;</a>"}, {"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1440528885, "post_id": 32211568, "comment_id": 52307591, "body": "Please remove the second part of your question. Questions on SO must be about one issue. If another issue is found, it is best to (a) update your question/title to reflect the new issue, or (b) open up a new post. I suggest the latter, as you have solved your original answer."}, {"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1440529422, "post_id": 32211568, "comment_id": 52307895, "body": "I know you have selected an accepted answer, but you may find mine helpful, specifically with <code>Dir[&quot;*&quot;]</code>"}, {"owner": {"reputation": 11231, "user_id": 127511, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/a727af7a2094e5fe644718884deec529?s=128&d=identicon&r=PG", "display_name": "Prakash Raman", "link": "https://stackoverflow.com/users/127511/prakash-raman"}, "edited": false, "score": 1, "creation_date": 1440529483, "post_id": 32211568, "comment_id": 52307933, "body": "Yes, I did thank you for your answer :)"}], "answers": [{"comments": [{"owner": {"reputation": 11231, "user_id": 127511, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/a727af7a2094e5fe644718884deec529?s=128&d=identicon&r=PG", "display_name": "Prakash Raman", "link": "https://stackoverflow.com/users/127511/prakash-raman"}, "edited": false, "score": 0, "creation_date": 1440528169, "post_id": 32211619, "comment_id": 52307159, "body": "Thanks, yes, that cleared it up. I have updated my question. Any thoughts of the second part of it ?"}, {"owner": {"reputation": 7893, "user_id": 380451, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WowPn.png?s=128&g=1", "display_name": "Parker", "link": "https://stackoverflow.com/users/380451/parker"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1440528305, "post_id": 32211619, "comment_id": 52307240, "body": "@cremno, you&#39;re right, thanks for pointing that out, I&#39;ll update"}, {"owner": {"reputation": 7893, "user_id": 380451, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WowPn.png?s=128&g=1", "display_name": "Parker", "link": "https://stackoverflow.com/users/380451/parker"}, "reply_to_user": {"reputation": 11231, "user_id": 127511, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/a727af7a2094e5fe644718884deec529?s=128&d=identicon&r=PG", "display_name": "Prakash Raman", "link": "https://stackoverflow.com/users/127511/prakash-raman"}, "edited": false, "score": 0, "creation_date": 1440528664, "post_id": 32211619, "comment_id": 52307450, "body": "@PrakashRaman I&#39;ve updated the question again now that you reworded the second question :)"}], "tags": [], "owner": {"reputation": 7893, "user_id": 380451, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WowPn.png?s=128&g=1", "display_name": "Parker", "link": "https://stackoverflow.com/users/380451/parker"}, "is_accepted": true, "score": 4, "last_activity_date": 1440528701, "last_edit_date": 1495542212, "creation_date": 1440527965, "answer_id": 32211619, "question_id": 32211568, "link": "https://stackoverflow.com/questions/32211568/how-does-work-on-a-class-in-ruby/32211619#32211619", "title": "How does [ ] work on a class in Ruby", "body": "<p>From the <a href=\"http://ruby-doc.org/core-2.2.0/Dir.html\" rel=\"nofollow noreferrer\">Ruby Docs</a>, <code>Dir[\"*\"]</code> is equivalent to <code>Dir.glob([\"*\"])</code>. (As pointed out, it's <a href=\"https://en.wikipedia.org/wiki/Syntactic_sugar\" rel=\"nofollow noreferrer\">syntactic sugar</a>)   </p>\n\n<p><code>Dir</code> isn't a call, it's a class, and objects of <code>class Dir</code> are directory streams, which you access like an array. </p>\n\n<p>In your specific case, <code>Dir[\"*\"]</code> will return an <code>array</code> of filenames that are found from the pattern passed as <code>Dir[patternString]</code>. <code>\"*\"</code> as a pattern will match zero or more characters, in other words, it will match everything, and thus will return an <code>array</code> of all of the filenames in that directory.</p>\n\n<p>For your second question, you can just <a href=\"https://stackoverflow.com/questions/13767240/ruby-how-to-make-a-public-static-method\">define it as any other method</a> like so:</p>\n\n<pre><code>class YourClass\n  def self.[](v)\n    #your code here\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 610, "user_id": 2873497, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/acd75ed7dc7b147b62a5f06592c8e8ba?s=128&d=identicon&r=PG", "display_name": "arthur.karganyan", "link": "https://stackoverflow.com/users/2873497/arthur-karganyan"}, "is_accepted": false, "score": 5, "last_activity_date": 1440528200, "creation_date": 1440528200, "answer_id": 32211699, "question_id": 32211568, "link": "https://stackoverflow.com/questions/32211568/how-does-work-on-a-class-in-ruby/32211699#32211699", "title": "How does [ ] work on a class in Ruby", "body": "<p><code>[]</code> is simply a method, like #to_s, #object_id. etc.</p>\n\n<p>You can define it on any object:</p>\n\n<pre><code>class CoolClass\n  def [](v)\n    puts \"hello #{v}\"\n  end\nend\n\nCoolClass.new[\"John\"] # =&gt; \"hello John\"\n</code></pre>\n\n<p>In your case it's defined as singleton method, in this way:</p>\n\n<pre><code>class Dir\n  def self.[](v)\n    ...\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "is_accepted": false, "score": 2, "last_activity_date": 1440529380, "last_edit_date": 1440529380, "creation_date": 1440528991, "answer_id": 32211912, "question_id": 32211568, "link": "https://stackoverflow.com/questions/32211568/how-does-work-on-a-class-in-ruby/32211912#32211912", "title": "How does [ ] work on a class in Ruby", "body": "<p>The method <a href=\"http://ruby-doc.org/core-2.2.3/Dir.html\" rel=\"nofollow\"><code>Dir::glob</code></a> takes an argument, and provides an array of all directories <em>and</em> files nested under the argument. (From there, you can grab the index of the array with <code>[0]</code>.) The argument may include a pattern to match, along with flags. The argument (pattern, flags) may be options <em>similar</em> (but not exactly) regular expressions.</p>\n\n<p>From the docs, including a couple of patterns/flags that may be of interest to you:</p>\n\n<blockquote>\n  <p>Note that this pattern is not a regexp, it's closer to a shell glob. See <a href=\"http://ruby-doc.org/core-2.2.3/File.html#method-c-fnmatch\" rel=\"nofollow\"><code>File.fnmatch</code></a> for the meaning of the flags parameter. Note that case sensitivity depends on your system (so <code>File::FNM_CASEFOLD</code> is ignored), as does the order in which the results are returned.</p>\n  \n  <ul>\n  <li><strong><code>*</code></strong> - Matches any file. Can be restricted by other values in the glob. Equivalent to <code>/ .* /x</code> in regexp.</li>\n  <li><strong><code>[set]</code></strong> - Matches any one character in set. Behaves exactly like character sets in <a href=\"http://ruby-doc.org/core-2.2.3/Regexp.html\" rel=\"nofollow\">Regexp</a>, including set negation (<code>[^a-z]</code>).</li>\n  </ul>\n</blockquote>\n\n<p>The shorthand of <code>Dir::glob()</code> is <code>Dir[]</code>, although I prefer the long form. As you saw above, using brackets denotes a special pattern/flag for the argument. Here are some examples (from the docs) that may better explain this:</p>\n\n<pre><code>Dir[\"config.?\"]                     #=&gt; [\"config.h\"]\nDir.glob(\"config.?\")                #=&gt; [\"config.h\"]\nDir.glob(\"*.[a-z][a-z]\")            #=&gt; [\"main.rb\"]\nDir.glob(\"*\")                       #=&gt; [\"config.h\", \"main.rb\"]\n</code></pre>\n\n<p>It is possible for you to redefine the <code>[]</code> method for <code>Dir</code>, but I will not show how -- many (and myself) do not recommend monkey-patching core Ruby classes and modules. However, you can create the method in a class of your own. See the following:</p>\n\n<pre><code>class User\n  # Class method =&gt; User.new[arg]\n  def self.[](arg)\n  end\n\n  # Instance method =&gt; @user[arg]\n  def [](arg)\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1440539710, "creation_date": 1440539710, "answer_id": 32214753, "question_id": 32211568, "link": "https://stackoverflow.com/questions/32211568/how-does-work-on-a-class-in-ruby/32214753#32214753", "title": "How does [ ] work on a class in Ruby", "body": "<p><code>Dir</code> is an object just like any other object (it just happens to be an instance of class <code>Class</code>), and <code>[]</code> is a method just like any other method (it just happens to have a funny name, and special syntactic conveniences that allow it to called using a different syntax in addition to the normal one).</p>\n\n<p>So, you define it just like any other method:</p>\n\n<pre><code>class MyClass\n  def self.[](*) end\nend\n</code></pre>\n"}], "owner": {"reputation": 11231, "user_id": 127511, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/a727af7a2094e5fe644718884deec529?s=128&d=identicon&r=PG", "display_name": "Prakash Raman", "link": "https://stackoverflow.com/users/127511/prakash-raman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 32211619, "answer_count": 4, "score": 5, "last_activity_date": 1440539710, "creation_date": 1440527737, "last_edit_date": 1440529000, "question_id": 32211568, "link": "https://stackoverflow.com/questions/32211568/how-does-work-on-a-class-in-ruby", "title": "How does [ ] work on a class in Ruby", "body": "<p>I see that I can get a list of files in a directory using </p>\n\n<pre><code>Dir[\"*\"]\n</code></pre>\n\n<p>How am I supposed to read that syntax exactly ? As I know that you can use <strong>[ ]</strong> to fetch a value from a array or a hash. </p>\n\n<p>How does [ ] work on a call ?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1440527805, "post_id": 32211515, "comment_id": 52306937, "body": "I suggest that you correct your indentation in the post. Second, Try running the program locally on your machine. With Ruby installed, in the terminal run <code>ruby .&#47;night_at_the_movies.rb</code>. You will then get an error at the first incorrect line."}, {"owner": {"reputation": 712, "user_id": 3788772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76OZ8.png?s=128&g=1", "display_name": "noobninja", "link": "https://stackoverflow.com/users/3788772/noobninja"}, "edited": false, "score": 0, "creation_date": 1467091633, "post_id": 32211515, "comment_id": 63573612, "body": "<a href=\"https://www.codecademy.com/en/forum_questions/538652267c82cadb40000811\" rel=\"nofollow noreferrer\">codecademy.com/en/forum_questions/538652267c82cadb40000811</a>"}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 5414692, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3f5f9f8814c7af0a8d97f9919732781c?s=128&d=identicon&r=PG&f=1", "display_name": "mdalmau", "link": "https://stackoverflow.com/users/5414692/mdalmau"}, "is_accepted": false, "score": 1, "last_activity_date": 1444334436, "creation_date": 1444334436, "answer_id": 33024914, "question_id": 32211515, "link": "https://stackoverflow.com/questions/32211515/codecademy-a-night-at-movies-4-10-prompting-redux/33024914#33024914", "title": "Codecademy - a night at movies 4/10: Prompting: Redux", "body": "<p>I tested your code - I got stuck in the same part. Instructions at CodeAcademy are not always clear. Your code, according to what CA is asking is right, you just need to write \"add\" as an answer for \"Which one do you like better?\" when testing code at CA's virtual machine. So: </p>\n\n<pre><code>choice = \"add\" \n</code></pre>\n\n<p>That way you will be running your case/when filter. Got it? </p>\n"}], "owner": {"reputation": 19, "user_id": 5220317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2941f0d3c2175f57f9e34f68536d904?s=128&d=identicon&r=PG&f=1", "display_name": "user5220317", "link": "https://stackoverflow.com/users/5220317/user5220317"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1265, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460032971, "creation_date": 1440527567, "question_id": 32211515, "link": "https://stackoverflow.com/questions/32211515/codecademy-a-night-at-movies-4-10-prompting-redux", "title": "Codecademy - a night at movies 4/10: Prompting: Redux", "body": "<p>I can't find the error, it keeps telling me: Oops, try again. It looks like you didn't add to the movies hash!\nThank you.</p>\n\n<pre><code>   movies = { 'himym' =&gt; 5, \n   'oitnb' =&gt; 4 }\n  puts \"Which one do you like better?\"\n  choice = gets.chomp\n\n case choice\n when \"add\"\n puts \"What is your favorite movie?\"\n title = gets.chomp\n puts \"What would you rate it?\"\n rating = gets.chomp\n movies = {}\n movies[title] = rating\n puts \"#{title} with rating #{rating} has been added!\"\n when \"update\"\n puts \"Updated!\"\n when \"display\"\n puts \"Movies!\"\n when \"delete\"\n puts \"Deleted!\"\n else\n puts \"Error!\"\n end\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 2, "creation_date": 1440527604, "post_id": 32211252, "comment_id": 52306829, "body": "you fiel name should be <code>js.erb</code> And <code>&lt;%= javascript_include_tag &quot;social_sharing&quot; %&gt;</code>  is enough."}], "answers": [{"comments": [{"owner": {"reputation": 34222, "user_id": 881559, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/K8wbX.png?s=128&g=1", "display_name": "Abram", "link": "https://stackoverflow.com/users/881559/abram"}, "edited": false, "score": 0, "creation_date": 1440528142, "post_id": 32211665, "comment_id": 52307142, "body": "Any idea how to get my rails variables to work in the js.erb? For example, <code>post</code> is nil"}, {"owner": {"reputation": 490, "user_id": 3777336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb69a73492db7ee0765f836edb4b56af?s=128&d=identicon&r=PG&f=1", "display_name": "trvrfrd", "link": "https://stackoverflow.com/users/3777336/trvrfrd"}, "reply_to_user": {"reputation": 34222, "user_id": 881559, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/K8wbX.png?s=128&g=1", "display_name": "Abram", "link": "https://stackoverflow.com/users/881559/abram"}, "edited": false, "score": 0, "creation_date": 1440528869, "post_id": 32211665, "comment_id": 52307575, "body": "The first answer <a href=\"https://stackoverflow.com/questions/13287588/what-is-the-scope-of-ruby-code-in-a-js-erb-file-and-how-can-it-access-controller\">here</a> might help, you may need to render the .js.erb as a partial inside a &lt;script&gt; tag and pass in @post as a local - I&#39;ll update my answer to reflect this"}, {"owner": {"reputation": 34222, "user_id": 881559, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/K8wbX.png?s=128&g=1", "display_name": "Abram", "link": "https://stackoverflow.com/users/881559/abram"}, "edited": false, "score": 0, "creation_date": 1440532178, "post_id": 32211665, "comment_id": 52309466, "body": "Thanks. I guess this isn&#39;t really an awesome unobtrusive way to do things, but it works for getting my js out of my view file for now."}, {"owner": {"reputation": 15235, "user_id": 505152, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c988366574e6e5f4fa0b3e01faa90a86?s=128&d=identicon&r=PG", "display_name": "htafoya", "link": "https://stackoverflow.com/users/505152/htafoya"}, "edited": false, "score": 0, "creation_date": 1456283320, "post_id": 32211665, "comment_id": 58871248, "body": "It says &quot;missing partial with name [somewhere]/social_sharing&quot; , should it be .html.erb?"}, {"owner": {"reputation": 490, "user_id": 3777336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb69a73492db7ee0765f836edb4b56af?s=128&d=identicon&r=PG&f=1", "display_name": "trvrfrd", "link": "https://stackoverflow.com/users/3777336/trvrfrd"}, "reply_to_user": {"reputation": 15235, "user_id": 505152, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c988366574e6e5f4fa0b3e01faa90a86?s=128&d=identicon&r=PG", "display_name": "htafoya", "link": "https://stackoverflow.com/users/505152/htafoya"}, "edited": false, "score": 0, "creation_date": 1456410033, "post_id": 32211665, "comment_id": 58941017, "body": "@htafoya Is the file in the views directory? [somewhere] should be a path in the views directory so that Rails knows where to look for the partial. For example, the full path to the file might be something like app/views/posts/_social_sharing.js.erb. The file should be .js.erb unless it contains HTML in addition to JavaScript code."}], "tags": [], "owner": {"reputation": 490, "user_id": 3777336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb69a73492db7ee0765f836edb4b56af?s=128&d=identicon&r=PG&f=1", "display_name": "trvrfrd", "link": "https://stackoverflow.com/users/3777336/trvrfrd"}, "is_accepted": true, "score": 13, "last_activity_date": 1440529905, "last_edit_date": 1440529905, "creation_date": 1440528097, "answer_id": 32211665, "question_id": 32211252, "link": "https://stackoverflow.com/questions/32211252/how-do-i-use-javascript-include-tag-with-js-erb-file-in-rails-4/32211665#32211665", "title": "How do I use javascript_include_tag with js.erb file in Rails 4?", "body": "<p>The file should be named <code>assets/javascripts/social_sharing.js.erb</code> (with .erb on the end), otherwise the Rails asset pipeline won't know to process it and will serve it up as if it were plain JavaScript. The include tag should read <code>&lt;%= javascript_include_tag \"social_sharing.js\" %&gt;</code> rather than <code>.erb</code>, although <a href=\"http://apidock.com/rails/ActionView/Helpers/AssetTagHelper/javascript_include_tag\" rel=\"noreferrer\">the .js is optional</a>.</p>\n\n<p>Everything in the assets folder will get processed through the <a href=\"http://guides.rubyonrails.org/asset_pipeline.html\" rel=\"noreferrer\">asset pipeline</a> and can be easily pulled in with <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html#method-i-javascript_include_tag\" rel=\"noreferrer\">asset helper tags</a>.</p>\n\n<p>HOWEVER, <code>javascript_include_tag</code> and the asset pipeline are for truly static assets that will only be precompiled once and then the same file served with every relevant request. If you're trying to include dynamic content such as <code>&lt;%= post.id %&gt;</code> that will vary from request to request, you will probably want to move the .js.erb file to somewhere in the views directory and render it as a partial, similar to the first answer for <a href=\"https://stackoverflow.com/questions/13287588/what-is-the-scope-of-ruby-code-in-a-js-erb-file-and-how-can-it-access-controller\">this question</a>:</p>\n\n<pre><code>&lt;script&gt;\n    render partial: '[somewhere]/social_sharing', post: @post\n&lt;/script&gt;\n</code></pre>\n\n<p>The file will need to be renamed <code>_social_sharing.js.erb</code> as well.</p>\n"}, {"comments": [{"owner": {"reputation": 34222, "user_id": 881559, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/K8wbX.png?s=128&g=1", "display_name": "Abram", "link": "https://stackoverflow.com/users/881559/abram"}, "edited": false, "score": 0, "creation_date": 1440532098, "post_id": 32212086, "comment_id": 52309417, "body": "Hi this is typically what I do, but I wanted to include it in a single page, sorry."}, {"owner": {"reputation": 2781, "user_id": 4200307, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/59KSj.jpg?s=128&g=1", "display_name": "Elvn", "link": "https://stackoverflow.com/users/4200307/elvn"}, "reply_to_user": {"reputation": 34222, "user_id": 881559, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/K8wbX.png?s=128&g=1", "display_name": "Abram", "link": "https://stackoverflow.com/users/881559/abram"}, "edited": false, "score": 0, "creation_date": 1440532739, "post_id": 32212086, "comment_id": 52309799, "body": "&quot;include it in a single page&quot;  All assets in rails are compiled, even libs like jquery are compiled into application.js.  You&#39;ve got high rep in RoR (profile) so you know this stuff. So I guess, I&#39;m not sure what you&#39;re going for."}, {"owner": {"reputation": 34222, "user_id": 881559, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/K8wbX.png?s=128&g=1", "display_name": "Abram", "link": "https://stackoverflow.com/users/881559/abram"}, "edited": false, "score": 0, "creation_date": 1440533158, "post_id": 32212086, "comment_id": 52310041, "body": "Hey basically I was just trying to move a snippet of js from my html.erb file, but still have the instance variables available to the js.. I guess <code>javascript_include_tag</code> is more for static assets, etc.. So I was probably approaching things the wrong way to begin with. Your answer isn&#39;t wrong, so I will upvote you."}, {"owner": {"reputation": 2781, "user_id": 4200307, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/59KSj.jpg?s=128&g=1", "display_name": "Elvn", "link": "https://stackoverflow.com/users/4200307/elvn"}, "reply_to_user": {"reputation": 34222, "user_id": 881559, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/K8wbX.png?s=128&g=1", "display_name": "Abram", "link": "https://stackoverflow.com/users/881559/abram"}, "edited": false, "score": 1, "creation_date": 1440533258, "post_id": 32212086, "comment_id": 52310099, "body": "Thank you. Interesting question, upvoted, too. I also learned something from the accepted answer."}], "tags": [], "owner": {"reputation": 2781, "user_id": 4200307, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/59KSj.jpg?s=128&g=1", "display_name": "Elvn", "link": "https://stackoverflow.com/users/4200307/elvn"}, "is_accepted": false, "score": 2, "last_activity_date": 1440529631, "creation_date": 1440529631, "answer_id": 32212086, "question_id": 32211252, "link": "https://stackoverflow.com/questions/32211252/how-do-i-use-javascript-include-tag-with-js-erb-file-in-rails-4/32212086#32212086", "title": "How do I use javascript_include_tag with js.erb file in Rails 4?", "body": "<p>I'm not sure this is the answer, but what you're doing with your asset pipeline vis a vis the javascript looks unusual.</p>\n\n<p>To include the js in your assets precompile add this line in your /config/initalizers/assets.rb file. </p>\n\n\n\n<pre><code>Rails.application.config.assets.precompile += %w( social_sharing.js )  \n</code></pre>\n\n<p>I think once you include this file in your asset pipeline compilation you do not need to use the <code>javascript_include_tag</code> at all. </p>\n\n<p>If you try this, please let me if you still have the error and or the rendering problem.</p>\n"}], "owner": {"reputation": 34222, "user_id": 881559, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/K8wbX.png?s=128&g=1", "display_name": "Abram", "link": "https://stackoverflow.com/users/881559/abram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11367, "favorite_count": 2, "accepted_answer_id": 32211665, "answer_count": 2, "score": 10, "last_activity_date": 1440529905, "creation_date": 1440526661, "question_id": 32211252, "link": "https://stackoverflow.com/questions/32211252/how-do-i-use-javascript-include-tag-with-js-erb-file-in-rails-4", "title": "How do I use javascript_include_tag with js.erb file in Rails 4?", "body": "<p>Here is what I have in my view:</p>\n\n<pre><code>&lt;%= javascript_include_tag \"social_sharing.erb\" %&gt;\n</code></pre>\n\n<p>Then I have: <code>assets/javascripts/social_sharing.erb.js</code> which includes some ERB tags like <code>&lt;%= post.id %&gt;</code> ... </p>\n\n<p>The first problem is I see this error message:</p>\n\n<pre><code>`Asset filtered out and will not be served: add `Rails.application.config.assets.precompile += %w( social_sharing.erb.js )` to `config/initializers/assets.rb` and restart your server\n</code></pre>\n\n<p>If I follow those directions, I then get the js file served, but none of the ERB tags have been evaluated, so I still see <code>&lt;%= post.id %&gt;</code> in the linked js file.</p>\n"}, {"tags": ["ruby", "unit-testing", "minitest", "ruby-2.2"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1440526036, "post_id": 32211031, "comment_id": 52305928, "body": "You want to run the tests programmatically? I mean, normally test pass/fail is reported to either a file, the console, or both."}, {"owner": {"reputation": 45, "user_id": 1049296, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/46dbd89f07a86cae91fb7c44bd126e49?s=128&d=identicon&r=PG", "display_name": "charlie", "link": "https://stackoverflow.com/users/1049296/charlie"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1440526411, "post_id": 32211031, "comment_id": 52306124, "body": "I would prefer to access it on the level of Ruby. If that&#39;s not possible, then file - but I guess that would be in text form, like the result on console? I need to prepare statistics about the number of tests failed, I would prefer to ommit parsing such output. I don&#39;t know how to save result to the file either."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1440527263, "post_id": 32211031, "comment_id": 52306639, "body": "It sounds like you might want to consider an existing CI solution to avoid duplicating what they already do, but YMMV."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 1049296, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/46dbd89f07a86cae91fb7c44bd126e49?s=128&d=identicon&r=PG", "display_name": "charlie", "link": "https://stackoverflow.com/users/1049296/charlie"}, "edited": false, "score": 1, "creation_date": 1440531962, "post_id": 32211799, "comment_id": 52309335, "body": "Thanks! This is not how I imagined it, but it seems to do the trick, so a big thank you :)"}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 1, "last_activity_date": 1440528583, "creation_date": 1440528583, "answer_id": 32211799, "question_id": 32211031, "link": "https://stackoverflow.com/questions/32211031/ruby-unit-testing-access-test-result-success-failure/32211799#32211799", "title": "Ruby unit testing - access test result (success/failure)?", "body": "<p>May be you can run the tests using Ruby's ability to run shell command and return results.</p>\n\n<p>Here is an example for <a href=\"https://github.com/test-unit/test-unit\" rel=\"nofollow\">test-unit</a>:</p>\n\n<pre><code>test_output = `ruby test.rb --runner console --verbose=progress`\n\nfailed_tests = test_output.chomp.split('').count('F')\npassed_tests = test_output.chomp.split('').count('.')\n\nputs \"P: #{passed_tests}, F: #{failed_tests}\"\n</code></pre>\n\n<p>We are using <code>--verbose=progress</code> option so that we get minimum output.  It will look something like below:</p>\n\n<pre><code>.F...F\n</code></pre>\n\n<p>We count number of <code>F</code> to figure out how many tests failed.\nFor about test output, the sample program will print:</p>\n\n<pre><code>P: 4, F: 2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 527, "user_id": 1905254, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2419816c1fbf2f0b06aef575fa4b94a8?s=128&d=identicon&r=PG", "display_name": "wondersz1", "link": "https://stackoverflow.com/users/1905254/wondersz1"}, "is_accepted": false, "score": 0, "last_activity_date": 1547931668, "creation_date": 1547931668, "answer_id": 54271353, "question_id": 32211031, "link": "https://stackoverflow.com/questions/32211031/ruby-unit-testing-access-test-result-success-failure/54271353#54271353", "title": "Ruby unit testing - access test result (success/failure)?", "body": "<p>Another option is to use <code>passed?</code> method:\n<a href=\"https://ruby-doc.org/stdlib-2.1.1/libdoc/minitest/unit/rdoc/MiniTest/Unit/TestCase.html#method-i-passed-3F\" rel=\"nofollow noreferrer\">https://ruby-doc.org/stdlib-2.1.1/libdoc/minitest/unit/rdoc/MiniTest/Unit/TestCase.html#method-i-passed-3F</a>\nNot sure if it's still available in the latest versions of Ruby, so please check that before using.</p>\n"}], "owner": {"reputation": 45, "user_id": 1049296, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/46dbd89f07a86cae91fb7c44bd126e49?s=128&d=identicon&r=PG", "display_name": "charlie", "link": "https://stackoverflow.com/users/1049296/charlie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 674, "favorite_count": 0, "accepted_answer_id": 32211799, "answer_count": 2, "score": 2, "last_activity_date": 1547931668, "creation_date": 1440525828, "last_edit_date": 1440526106, "question_id": 32211031, "link": "https://stackoverflow.com/questions/32211031/ruby-unit-testing-access-test-result-success-failure", "title": "Ruby unit testing - access test result (success/failure)?", "body": "<p>I'm using Ruby 2.2. I need to run a unit test and get information if it succeeded or failed. I'm browsing through docs of both test-unit and minitest (suggested gems for unit testing in Ruby 2.2) but I can't seem to find a method that would return or store somewhere information about the test result. </p>\n\n<p>All I need is information whether the test failed/succeeded, and I need to access it from the level of Ruby. I imagine I would have to use a specific method to run the test - so far, I was only able to run a single test by running the test file, not by invoking any method.  </p>\n\n<p>Maybe it's just my poor knowledge of Ruby, anyway I would appreciate any help. </p>\n"}]