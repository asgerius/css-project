[{"tags": ["ruby", "discourse"], "comments": [{"owner": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "edited": false, "score": 0, "creation_date": 1546471878, "post_id": 54014464, "comment_id": 94866193, "body": "Is the validation in the Topic class custom or simply <code>uniqueness: true</code>? Could you have titles in your DB that are equivalent to your search term after stripping whitespace, but not before?"}, {"owner": {"reputation": 4103, "user_id": 162358, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/I2kN6.jpg?s=128&g=1", "display_name": "Keith John Hutchison", "link": "https://stackoverflow.com/users/162358/keith-john-hutchison"}, "reply_to_user": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "edited": false, "score": 0, "creation_date": 1546472220, "post_id": 54014464, "comment_id": 94866284, "body": "The validation is custom. Adding to question. The process of saving a Topic instance removes whitespace, including double spaces within the title."}, {"owner": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "edited": false, "score": 0, "creation_date": 1546474276, "post_id": 54014464, "comment_id": 94866710, "body": "I&#39;m not familiar with <code>unique_among</code>, is that a custom validation? Some of your others appear to be. If so, please provide the code for that too."}, {"owner": {"reputation": 4103, "user_id": 162358, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/I2kN6.jpg?s=128&g=1", "display_name": "Keith John Hutchison", "link": "https://stackoverflow.com/users/162358/keith-john-hutchison"}, "reply_to_user": {"reputation": 1266, "user_id": 6022100, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/dc0adea29934c8ee1c31f96bf85a7fbc?s=128&d=identicon&r=PG", "display_name": "rwold", "link": "https://stackoverflow.com/users/6022100/rwold"}, "edited": false, "score": 0, "creation_date": 1546475093, "post_id": 54014464, "comment_id": 94866878, "body": "I&#39;m not yet familiar with unique_among either. I&#39;m running an open source discourse server. It feels like the error message is somehow wrong."}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 1, "creation_date": 1546483047, "post_id": 54014464, "comment_id": 94868288, "body": "Does the title you&#39;re checking contain any single or double quotes, or special characters? Can you share the title you&#39;re validating against? Also, is <code>find_by_title</code> just the older syntax (e.g. equivalent to <code>Topic.find_by(title: title)</code>, or is it a custom method on your <code>Title</code> model?"}, {"owner": {"reputation": 4103, "user_id": 162358, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/I2kN6.jpg?s=128&g=1", "display_name": "Keith John Hutchison", "link": "https://stackoverflow.com/users/162358/keith-john-hutchison"}, "reply_to_user": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 1, "creation_date": 1546484074, "post_id": 54014464, "comment_id": 94868426, "body": "@JayDorsey Discovered it was a case issue after a lead from Jay Pfaffman on meta.discourse.com. The title started with a lower case letter. When it was saved it the first letter was upper case."}, {"owner": {"reputation": 4103, "user_id": 162358, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/I2kN6.jpg?s=128&g=1", "display_name": "Keith John Hutchison", "link": "https://stackoverflow.com/users/162358/keith-john-hutchison"}, "reply_to_user": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1546484312, "post_id": 54014464, "comment_id": 94868461, "body": "@JayDorsey So the resolution would be to do a case-insensitive search."}], "owner": {"reputation": 4103, "user_id": 162358, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/I2kN6.jpg?s=128&g=1", "display_name": "Keith John Hutchison", "link": "https://stackoverflow.com/users/162358/keith-john-hutchison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546475300, "creation_date": 1546471279, "last_edit_date": 1546475300, "question_id": 54014464, "link": "https://stackoverflow.com/questions/54014464/checking-for-a-discourse-topic-title", "title": "Checking for a Discourse topic title", "body": "<p>I have a ruby function that creates a discourse topic if the title is not found.</p>\n\n<pre><code>def get_topic(user,title,created_at,bumped_at,last_posted_at,excerpt)\n\n\n  title = title.gsub(/  /,' ')\n  puts \"get_topic.title:'#{title}' user.id:#{user.id} created_at:#{created_at} last_posted_at:#{last_posted_at} excerpt:#{excerpt}\"\n  result = Topic.find_by_title(title)\n  if result == nil then\n    result = Topic.create\n    result.title = title\n    result.fancy_title = title\n    result.user_id = user.id\n    result.last_post_user_id = user.id\n    result.updated_at = last_posted_at\n    result.created_at = created_at\n    result.bumped_at = bumped_at\n    result.last_posted_at = last_posted_at\n    result.excerpt = excerpt\n    result.save!\n  else \n      puts result\n      puts created_at,bumped_at,last_posted_at\n      if result.user_id != user.id then\n        result.user_id = user.id\n        result.last_post_user_id = user.id\n      end\n      if result.updated_at != last_posted_at then\n        result.updated_at = last_posted_at\n      end\n      if result.created_at != created_at then\n        result.created_at = created_at\n      end\n      if result.bumped_at != bumped_at then\n        result.bumped_at = bumped_at\n      end\n      if result.last_posted_at != last_posted_at then\n        result.last_posted_at = last_posted_at\n      end\n      if result.excerpt != excerpt then\n        result.excerpt = excerpt\n      end\n      if result.changed.length &gt; 0 then\n        result.save!\n        puts result.slug\n        post = result.first_post\n        post.created_at = created_at\n        post.updated_at = result.updated_at\n        post.baked_at = result.bumped_at\n        post.last_version_at = result.last_posted_at\n        post.user_id = result.user_id\n        post.last_editor_id = result.user_id\n        post.raw = result.excerpt\n        post.save!\n        puts post\n        #puts user.id\n      end\n  end \n  puts \"get_topic.result.slug:#{result.slug}\"\n  return result\nend\n</code></pre>\n\n<p>Before the code creates a topic it searches for the title.\ntitle = title.gsub(/ /,' ') result = Topic.find_by_title(title)\nIf a nil result occurs it then creates a topic.</p>\n\n<p>It works for most topics, however, for one title it\u2019s throwing ActiveRecord::RecordInvalid: Validation failed: Title has already been used when the topic is being saved.</p>\n\n<p>The valiation settings for topic.title is</p>\n\n<p><code>validates :title, if: Proc.new { |t| t.new_record? || t.title_changed? },\n                    presence: true,\n                    topic_title_length: true,\n                    censored_words: true,\n                    quality_title: { unless: :private_message? },\n                    max_emojis: true,\n                    unique_among: { unless: Proc.new { |t| (SiteSetting.allow_duplicate_topic_titles? || t.private_message?) },\n                                    message: :has_already_been_used,\n                                    allow_blank: true,\n                                    case_sensitive: false,\n                                    collection: Proc.new { Topic.listable_topics } }\n</code>\nI\u2019ve checked in the console using Topic.find_by_title(\u2018title\u2019). No topics exist with the title. I checked using Topic.find_by_sql(\"select * from topics where title like \u2018start of title%\u2019). No topics exist with the first word of the title.</p>\n\n<p>What other checks can done \u2026 what could be causing the error saying the topic title has already been used when there are no topics found with that title?</p>\n\n<p><strong>Further information</strong></p>\n\n<p>I tried turning on allowing duplicate titles. The code ran through without an error yet there were no topics with the title that was causing the error after the import. Feels like the error message is wrong.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 9916584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6716490a3b083f3be39585f16d97fe6?s=128&d=identicon&r=PG&f=1", "display_name": "user1234", "link": "https://stackoverflow.com/users/9916584/user1234"}, "edited": false, "score": 0, "creation_date": 1546470311, "post_id": 54014123, "comment_id": 94865770, "body": "Thank you for the feedback! I tried adding skip_before_action :logged_in_user to my sessions and users controllers and it is still redirecting over and over. I can&#39;t add it to the pages controller, because some of the pages are needed to login and some are what I&#39;m trying to protect. Is there a way to target some of the pages but not all of them?"}, {"owner": {"reputation": 628, "user_id": 4643970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AwK4h.jpg?s=128&g=1", "display_name": "Mahmoud Sayed", "link": "https://stackoverflow.com/users/4643970/mahmoud-sayed"}, "reply_to_user": {"reputation": 43, "user_id": 9916584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6716490a3b083f3be39585f16d97fe6?s=128&d=identicon&r=PG&f=1", "display_name": "user1234", "link": "https://stackoverflow.com/users/9916584/user1234"}, "edited": false, "score": 1, "creation_date": 1546473769, "post_id": 54014123, "comment_id": 94866601, "body": "yes, you can use only option with before action for example <code>before_action :do_sometihing, only: [:new, :create, :update]</code>"}], "tags": [], "owner": {"reputation": 628, "user_id": 4643970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AwK4h.jpg?s=128&g=1", "display_name": "Mahmoud Sayed", "link": "https://stackoverflow.com/users/4643970/mahmoud-sayed"}, "is_accepted": true, "score": 1, "last_activity_date": 1546468882, "creation_date": 1546468882, "answer_id": 54014123, "question_id": 54014042, "link": "https://stackoverflow.com/questions/54014042/keep-users-from-accessing-pages-in-rails-app-if-theyre-not-logged-in/54014123#54014123", "title": "Keep users from accessing pages in Rails app if they&#39;re not logged in", "body": "<p>when you use <code>before_action</code> in the <code>ApplicationController</code> the specified action will run before any action in all controller that inherits <code>ApplicationController</code> unless you skip it by <code>skip_before_action</code>.</p>\n\n<p>In your case you need either to apply <code>before_action</code> in <code>ApplicationController</code> and use <code>skip_before_action</code> before <code>login</code> action in for example in the <code>SessionsController</code> or you can only use <code>before_action</code> in all other controllers instead of <code>ApplicationController</code> to specify when you need them to run.</p>\n\n<pre><code>class SessionsController\n  skip_before_action :logged_in_user, only: :login\n\n  def login\n  end\nend\n</code></pre>\n\n<blockquote>\n  <p>Also remember to handle when a user is already logged in and he tries\n  to visit the login page.</p>\n</blockquote>\n"}], "owner": {"reputation": 43, "user_id": 9916584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6716490a3b083f3be39585f16d97fe6?s=128&d=identicon&r=PG&f=1", "display_name": "user1234", "link": "https://stackoverflow.com/users/9916584/user1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 54014123, "answer_count": 1, "score": 0, "last_activity_date": 1546468882, "creation_date": 1546468402, "question_id": 54014042, "link": "https://stackoverflow.com/questions/54014042/keep-users-from-accessing-pages-in-rails-app-if-theyre-not-logged-in", "title": "Keep users from accessing pages in Rails app if they&#39;re not logged in", "body": "<p>I'm fairly new to Rails and am building a webapp to learn. I currently have the webapp working to accept new users and log them in. However, I want to block access to pages other than the login page when users aren't logged in. I've searched for hours and nothing I have found has worked. I don't want to use to Devise. Here is my code:</p>\n\n<p>Application controller:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n   protect_from_forgery\n   include SessionsHelper\n   before_action :logged_in_user\nend\n</code></pre>\n\n<p>Session Helper: </p>\n\n<pre><code>module SessionsHelper\n\n  def current_user\n    @current_user ||= User.find(session[:user_id]) if session[:user_id]\n  end\n\n  def logged_in?\n      !current_user.nil?\n  end\n\n  # Confirms a logged-in user.\n  def logged_in_user\n     unless logged_in?\n        flash[:danger] = \"Please log in.\"\n        redirect_to 'name of login page'\n     end\n  end\n\nend\n</code></pre>\n\n<p>Currently, the page just reloads over and over (because the user isn't logged in) and the page times out. What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bootstrap-4"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1546462767, "post_id": 54013012, "comment_id": 94863071, "body": "remove the spaces in <code>data-target</code> and <code>id</code>. Also for <code>id</code> to work the name would have to be unique otherwise as mentioned below use the database <code>id</code> instead (guaranteed to be unique). Also make sure you close the anchor tag"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1546466241, "post_id": 54013012, "comment_id": 94864449, "body": "<i>&quot;When specified on HTML elements, the id attribute value must be unique amongst all the IDs in the element\u2019s tree and must contain at least one character. The value must not contain any space characters.&quot;</i> - <a href=\"https://www.w3.org/TR/html52/dom.html#element-attrdef-global-id\" rel=\"nofollow noreferrer\">W3C HTML 5.2</a>"}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1546466780, "post_id": 54013275, "comment_id": 94864632, "body": "Why generate a <code>hex</code> then? <code>_service.__id__</code> will not leak a database id and is likely to be unique given that I doubt <code>Service</code> is an immutable interned object"}, {"owner": {"reputation": 40466, "user_id": 33226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8f75007bcbcb8ba4daa408592e1c65ec?s=128&d=identicon&r=PG", "display_name": "Gavin Miller", "link": "https://stackoverflow.com/users/33226/gavin-miller"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1546468349, "post_id": 54013275, "comment_id": 94865190, "body": "@engineersmnky never thought to use the underlying object id. According to the docs: <code>no two active objects will share an id</code> so it would work just as well."}, {"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "edited": false, "score": 1, "creation_date": 1546490388, "post_id": 54013275, "comment_id": 94869570, "body": "HTML ids must begin with a letter, just so you know. But you can easily add some sort of prefix such as \u201cservice-\u201c to the IDs you generate."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "edited": false, "score": 0, "creation_date": 1546526091, "post_id": 54013275, "comment_id": 94884919, "body": "@Nate Not true. According to the <a href=\"https://www.w3.org/TR/html52/dom.html#element-attrdef-global-id\" rel=\"nofollow noreferrer\">Spec</a> <i>&quot;The id attribute specifies its element\u2019s unique identifier (ID). There are no other restrictions on what form an ID can take; in particular, IDs can consist of just digits, start with a digit, start with an underscore, consist of just punctuation, etc.&quot;</i>"}, {"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1546526292, "post_id": 54013275, "comment_id": 94885050, "body": "@engineersmnky That\u2019s only true as of HTML5. Before that, my statement is true. The OP did not specify whether they were using HTML4 or 5, so I commented. Also some articles will recommend you still start with a letter for backwards compatibility. Also, tossing a prefix in will help prevent collisions in IDs, which the OP was concerned about already."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "edited": false, "score": 0, "creation_date": 1546527122, "post_id": 54013275, "comment_id": 94885573, "body": "@Nate You stated it as a universal fact that is why I commented. Also given that this question is tagged <a href=\"https://stackoverflow.com/questions/tagged/bootstrap-4\">bootstrap-4</a> I think we can reasonably assume that HTML 4 spec is not a concern here."}, {"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1546527978, "post_id": 54013275, "comment_id": 94886089, "body": "@engineersmnky you\u2019re right. I should have mentioned html 4 in my comment. I\u2019m not familiar with bootstrap, so that tag meant nothing to me, rails did. It\u2019s also worth noting that if this code is going to be used with ajax, this code <i>can</i> have collisions across servers. If there\u2019s any pagination / infinite scroll features involved, it\u2019s possible for the ruby object ids to collide across servers. So, you should really clarify these caveats in your answer, lest someone who also doesn\u2019t care about bootstrap or maybe uses older bootstrap read your answer and have issues. Completeness is good."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "edited": false, "score": 0, "creation_date": 1546537721, "post_id": 54013275, "comment_id": 94890969, "body": "@Nate very well. <b>Caveat</b>: if you plan on using <code>__id__</code> AND you plan on loading this data in an asynchronous manner AND you have an extremely large number of elements THEN there is a slight possibility of causing a collision. I tested this theory over 40_000 ids trying a maximum of 5_000 times per each id to cause a collision (so max iterations 200_000_000). This test was run 10 times and the collision rate was ~ 0.001% - 0.003%."}, {"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1546538758, "post_id": 54013275, "comment_id": 94891425, "body": "@engineersmnky The collision rate is definitely low for sure. I just feel it\u2019s important to point out. This is the kind of thing that\u2019ll break once a year for someone, and a bug will be reported, and it\u2019ll be nearly impossible to reproduce, and a bunch of time will be wasted on something trivial. That\u2019s why I\u2019m bringing this up. Random and unique are two different things. Random works well enough <i>most</i> times."}], "tags": [], "owner": {"reputation": 40466, "user_id": 33226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8f75007bcbcb8ba4daa408592e1c65ec?s=128&d=identicon&r=PG", "display_name": "Gavin Miller", "link": "https://stackoverflow.com/users/33226/gavin-miller"}, "is_accepted": false, "score": 4, "last_activity_date": 1546468958, "last_edit_date": 1546468958, "creation_date": 1546463635, "answer_id": 54013275, "question_id": 54013012, "link": "https://stackoverflow.com/questions/54013012/how-can-i-add-rails-code-to-id-attribute-in-div-tag/54013275#54013275", "title": "How can I add rails code to id attribute in div tag?", "body": "<p>My preference is to use a unique value like <a href=\"https://ruby-doc.org/stdlib-2.5.1/libdoc/securerandom/rdoc/SecureRandom.html\" rel=\"nofollow noreferrer\"><code>SecureRandom.hex</code></a> or <a href=\"https://ruby-doc.org/core-2.1.1/BasicObject.html#method-i-__id__\" rel=\"nofollow noreferrer\"><code>__id__</code></a> as <a href=\"https://stackoverflow.com/users/1978251/engineersmnky\"><code>engineersmnky</code></a> pointed out, instead of using model ids. Code would look something like this:</p>\n\n<pre><code># You may also have to require 'securerandom' within your rails app \n# (can't remember if that comes in automatically or not)\n&lt;% @services.each do |service| %&gt;\n  &lt;!-- Either option for random_id works below --&gt;\n  &lt;% random_id = SecureRandom.hex %&gt; \n  &lt;% random_id = service.__id__ %&gt;\n\n  &lt;div class=\"card\"&gt;\n    &lt;a class=\"card-b\" href=\"#\" data-toggle=\"modal\" data-target=\"#&lt;%= random_id %&gt;\"&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"modal\" id=\"&lt;%= random_id %&gt;\" tabindex=\"-1\" role=\"dialog\" aria-  hidden=\"true\"&gt;\n    Hello this is the modal.\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The reason I prefer this, is it doesn't leak database ids (if that's something you care about) and you're less likely to get id collisions in the event that this modal gets embedded into other pages.</p>\n\n<hr>\n\n<p>And given a simple benchmarking script, it looks like <code>__id__</code> is the more performant of the two options:</p>\n\n<pre><code>$ cat unique_id.test.rb\nrequire 'securerandom'\nrequire 'benchmark'\n\nn = 100_000\nBenchmark.bm do |x|\n  x.report { n.times do |n|  ; SecureRandom.hex; end }\n  x.report { n.times do |n|  ; n.__id__ ; end }\nend\n\n$ ruby unique_id.test.rb\n   user     system      total        real\n   0.180000   0.000000   0.180000 (  0.176293)\n   0.000000   0.000000   0.000000 (  0.005554)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1546488997, "post_id": 54015073, "comment_id": 94869281, "body": "Benchmarks might be a bit misleading since <code>__id__</code> and <code>object_id</code> are aliases for the same internal call"}], "tags": [], "owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "is_accepted": false, "score": 0, "last_activity_date": 1546477021, "creation_date": 1546477021, "answer_id": 54015073, "question_id": 54013012, "link": "https://stackoverflow.com/questions/54013012/how-can-i-add-rails-code-to-id-attribute-in-div-tag/54015073#54015073", "title": "How can I add rails code to id attribute in div tag?", "body": "<p>Also, You can use <code>object_id</code>. </p>\n\n<p><strong>Rails:</strong> <code>data-target=\"#&lt;%= service.object_id %&gt;\"&gt;</code></p>\n\n<p>Benchmark:</p>\n\n<pre><code>   user     system      total        real\n0.071505   0.000187   0.071692 (  0.072017) #SecureRandom.hex\n0.004685   0.000016   0.004701 (  0.004727) #__id__\n0.004500   0.000001   0.004501 (  0.004503) #object_id\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 3, "creation_date": 1546527231, "post_id": 54018252, "comment_id": 94885638, "body": "I was completely unaware of the <code>dom_id</code> method. Nice to learn a new trick."}, {"owner": {"reputation": 40466, "user_id": 33226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8f75007bcbcb8ba4daa408592e1c65ec?s=128&d=identicon&r=PG", "display_name": "Gavin Miller", "link": "https://stackoverflow.com/users/33226/gavin-miller"}, "edited": false, "score": 0, "creation_date": 1546535908, "post_id": 54018252, "comment_id": 94890128, "body": "TIL! This is a good solution too. It will leak database identifiers but for most use cases would be the most appropriate."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 40466, "user_id": 33226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8f75007bcbcb8ba4daa408592e1c65ec?s=128&d=identicon&r=PG", "display_name": "Gavin Miller", "link": "https://stackoverflow.com/users/33226/gavin-miller"}, "edited": false, "score": 1, "creation_date": 1546539211, "post_id": 54018252, "comment_id": 94891625, "body": "@GavinMiller that it true. But this should not be an issue because Rails per default leaks database identifiers in URLs anyway. If you use a gem like friendly_id or override the to_param method yourself to avoid this behavior then you should consider overriding to_key too."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 4, "last_activity_date": 1546501618, "creation_date": 1546501618, "answer_id": 54018252, "question_id": 54013012, "link": "https://stackoverflow.com/questions/54013012/how-can-i-add-rails-code-to-id-attribute-in-div-tag/54018252#54018252", "title": "How can I add rails code to id attribute in div tag?", "body": "<p>Ruby on Rails has a <a href=\"https://api.rubyonrails.org/classes/ActionView/RecordIdentifier.html#method-i-dom_id\" rel=\"nofollow noreferrer\"><code>dom_id</code> method</a> to generate unique ids for the use in HTML documents. Furthermore, I do not like to mix HTML tags and ERB \u2013 therefore I would probably work with a helper method</p>\n\n<pre><code># in a helper\ndef service_modal(service, &amp;block)\n  tag.div(class: 'card') do\n    tag.a(class: 'card-b', data: {toggle: 'modal', target: dom_id(service) }, href: '#')\n  end +\n\n  tag.div(class: 'modal', dom_id(service), tabindex: 1, role: 'dialog', 'aria-hidden': 'true') do\n    capture(&amp;block)\n  end\nend\n</code></pre>\n\n<p>and use it like this</p>\n\n<pre><code># in the view\n&lt;% @services.each do |service| %&gt;\n  &lt;%= service_modal(service) do %&gt;\n    Hello this is the modal.\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 7050383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-37dOOOZc8TE/AAAAAAAAAAI/AAAAAAAAaEU/Xe92SRFjjr8/photo.jpg?sz=128", "display_name": "Matheus Santos", "link": "https://stackoverflow.com/users/7050383/matheus-santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1040, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1546507119, "creation_date": 1546462268, "last_edit_date": 1546507119, "question_id": 54013012, "link": "https://stackoverflow.com/questions/54013012/how-can-i-add-rails-code-to-id-attribute-in-div-tag", "title": "How can I add rails code to id attribute in div tag?", "body": "<p>I would like to do something like this: <code>&lt;div id=\"&lt;%=service.name%&gt;\"</code></p>\n\n<p>However, I just can't get it to work. I need help! I am trying to create a modal for each button clicked on, but with just on modal div in html.erb.</p>\n\n<p>For the modals to work they would need to be the same ID.</p>\n\n<pre><code>&lt;% @services.each do |service| %&gt;\n\n&lt;div class=\"card\"&gt;\n&lt;a class=\"card-b\" href=\"#\" data-toggle=\"modal\" data-target=\"# &lt;%=service.name%&gt; \"&gt;\n&lt;/div&gt;\n\n&lt;div class=\"modal\" id=\" &lt;%=service.name%&gt; \" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\"&gt;\nHello this is the modal.\n&lt;/div&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>I would like to use rails code in the ID tag, I don't know if that is possible?</p>\n\n<p><strong>EDIT:</strong> </p>\n\n<p>I tried the best answer and it worked only for a few of the modals and the rest didn't. Then I added a <code>modal_tag</code> column to my table and all the modals worked. Thank you!</p>\n\n<p>My code is now <code>id=\"&lt;%=service.modal_tag%&gt;</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "parsing", "yaml"], "answers": [{"comments": [{"owner": {"reputation": 11144, "user_id": 328294, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fbbd46a6f03489e1724c2dbf50c6a98c?s=128&d=identicon&r=PG", "display_name": "pixelearth", "link": "https://stackoverflow.com/users/328294/pixelearth"}, "edited": false, "score": 0, "creation_date": 1546460202, "post_id": 54012554, "comment_id": 94862025, "body": "Read the docs, but not obvious how to decode the &quot;file&quot;. The #decode signature is decode(coder), but not sure what the coder is or how to convert the file to that."}, {"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "reply_to_user": {"reputation": 11144, "user_id": 328294, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fbbd46a6f03489e1724c2dbf50c6a98c?s=128&d=identicon&r=PG", "display_name": "pixelearth", "link": "https://stackoverflow.com/users/328294/pixelearth"}, "edited": false, "score": 0, "creation_date": 1546460747, "post_id": 54012554, "comment_id": 94862222, "body": "I believe the coder will be <code>Question</code>. In <code>#encode(attribute_set, coder)</code> we have <code>coder[&quot;concise_attributes&quot;]</code> which looks like <code>!ruby&#47;object:Question</code> in your file."}, {"owner": {"reputation": 11144, "user_id": 328294, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fbbd46a6f03489e1724c2dbf50c6a98c?s=128&d=identicon&r=PG", "display_name": "pixelearth", "link": "https://stackoverflow.com/users/328294/pixelearth"}, "edited": false, "score": 0, "creation_date": 1546461225, "post_id": 54012554, "comment_id": 94862446, "body": "Perhaps, but how do get the contents of this file into this method? I don&#39;t see how this instance method can fully work. Could you provide a code snippet?"}, {"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "reply_to_user": {"reputation": 11144, "user_id": 328294, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fbbd46a6f03489e1724c2dbf50c6a98c?s=128&d=identicon&r=PG", "display_name": "pixelearth", "link": "https://stackoverflow.com/users/328294/pixelearth"}, "edited": false, "score": 0, "creation_date": 1546461991, "post_id": 54012554, "comment_id": 94862746, "body": "<code>ActiveRecord::AttributeSet::YAMLEncoder.new(nil).decode(YAML&zwnj;&#8203;.load_file(&quot;#{Rails.&zwnj;&#8203;root}&#47;path&#47;to&#47;questi&zwnj;&#8203;on.yaml&quot;))</code>"}, {"owner": {"reputation": 11144, "user_id": 328294, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fbbd46a6f03489e1724c2dbf50c6a98c?s=128&d=identicon&r=PG", "display_name": "pixelearth", "link": "https://stackoverflow.com/users/328294/pixelearth"}, "edited": false, "score": 0, "creation_date": 1546462172, "post_id": 54012554, "comment_id": 94862834, "body": "Interestingly: ActiveRecord::AttributeSet::YAMLEncoder.new(nil).decode(YAML&zwnj;&#8203;.load_file(&quot;...../qu&zwnj;&#8203;estion.yml&quot;)) =&gt; NameError (uninitialized constant ActiveRecord::AttributeSet) irb(main):005:0&gt;"}, {"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "reply_to_user": {"reputation": 11144, "user_id": 328294, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fbbd46a6f03489e1724c2dbf50c6a98c?s=128&d=identicon&r=PG", "display_name": "pixelearth", "link": "https://stackoverflow.com/users/328294/pixelearth"}, "edited": false, "score": 0, "creation_date": 1546462996, "post_id": 54012554, "comment_id": 94863163, "body": "Rails 4? It is only available in Rails 5.  So here&#39;s what we do.  Go <a href=\"https://raw.githubusercontent.com/rails/rails/master/activemodel/lib/active_model/attribute_set/yaml_encoder.rb\" rel=\"nofollow noreferrer\">here</a> and copy the raw code.  Paste that into a rails console.  Then you can do <code>ActiveModel::AttributeSet::YAMLEncoder.new(nil).decode(YAML.&zwnj;&#8203;load_file(&quot;#{Rails.r&zwnj;&#8203;oot}&#47;path&#47;to&#47;questio&zwnj;&#8203;n.yaml&quot;))</code>. Note it is now back to <code>ActiveModel</code>"}, {"owner": {"reputation": 11144, "user_id": 328294, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fbbd46a6f03489e1724c2dbf50c6a98c?s=128&d=identicon&r=PG", "display_name": "pixelearth", "link": "https://stackoverflow.com/users/328294/pixelearth"}, "edited": false, "score": 0, "creation_date": 1546463787, "post_id": 54012554, "comment_id": 94863484, "body": "$ rails -v Rails 5.2.1; $ ruby -v ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-darwin18]"}, {"owner": {"reputation": 11144, "user_id": 328294, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fbbd46a6f03489e1724c2dbf50c6a98c?s=128&d=identicon&r=PG", "display_name": "pixelearth", "link": "https://stackoverflow.com/users/328294/pixelearth"}, "edited": false, "score": 0, "creation_date": 1546463945, "post_id": 54012554, "comment_id": 94863544, "body": "Either way this gives the same error since YAML.load_file is what&#39;s throwing the error. It never makes it to #decode"}, {"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "reply_to_user": {"reputation": 11144, "user_id": 328294, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fbbd46a6f03489e1724c2dbf50c6a98c?s=128&d=identicon&r=PG", "display_name": "pixelearth", "link": "https://stackoverflow.com/users/328294/pixelearth"}, "edited": false, "score": 0, "creation_date": 1546464438, "post_id": 54012554, "comment_id": 94863739, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/186070/discussion-between-tom-and-pixelearth\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "is_accepted": false, "score": 0, "last_activity_date": 1546461558, "last_edit_date": 1546461558, "creation_date": 1546459903, "answer_id": 54012554, "question_id": 54012348, "link": "https://stackoverflow.com/questions/54012348/how-do-i-load-this-yml-file-in-rails/54012554#54012554", "title": "How do I load this yml file in rails?", "body": "<p>It appears to have been encoded with <a href=\"https://www.rubydoc.info/github/rails/rails/master/ActiveModel/AttributeSet/YAMLEncoder#decode-instance_method\" rel=\"nofollow noreferrer\">ActiveModel::AttributeSet::YAMLEncoder</a>. You can use the <code>decode</code> method to parse the yaml file.  The use of the <code>concise_attributes</code> is idiosyncratic to YAMLEncoder.</p>\n\n<p><a href=\"https://github.com/rails/rails/blob/260b273106168ba7a122c76c79a3b7f4a3209559/activemodel/lib/active_model/attribute_set/yaml_encoder.rb\" rel=\"nofollow noreferrer\">Rails Source Code</a></p>\n\n<p>EDIT: While the file is under ActiveModel, to load it in a console use <code>ActiveRecord::AttributeSet::YAMLEncoder</code></p>\n"}], "owner": {"reputation": 11144, "user_id": 328294, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fbbd46a6f03489e1724c2dbf50c6a98c?s=128&d=identicon&r=PG", "display_name": "pixelearth", "link": "https://stackoverflow.com/users/328294/pixelearth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1546461558, "creation_date": 1546458833, "last_edit_date": 1546459881, "question_id": 54012348, "link": "https://stackoverflow.com/questions/54012348/how-do-i-load-this-yml-file-in-rails", "title": "How do I load this yml file in rails?", "body": "<p>I received this yml data file from a colleague who is unreachable. I need to load it to get the data, but I'm not sure how:</p>\n\n<pre><code>---\n- !ruby/object:Question\n  concise_attributes:\n  - !ruby/object:ActiveModel::Attribute::FromDatabase\n    name: id\n    value_before_type_cast: 1\n  - !ruby/object:ActiveModel::Attribute::FromDatabase\n    name: name\n    value_before_type_cast: Trip Summary\n  - !ruby/object:ActiveModel::Attribute::FromDatabase\n    name: question\n    value_before_type_cast: Please state your general feelings about itinerary, the\n      group, and the operations. How did it go overall?\n  - !ruby/object:ActiveModel::Attribute::FromDatabase\n    name: created_at\n  - !ruby/object:ActiveModel::Attribute::FromDatabase\n    name: updated_at\n  new_record: false\n  active_record_yaml_version: 2\n- !ruby/object:Question\n  concise_attributes:\n  - !ruby/object:ActiveModel::Attribute::FromDatabase\n    name: id\n    value_before_type_cast: 2\n  - !ruby/object:ActiveModel::Attribute::FromDatabase\n    name: name\n    value_before_type_cast: Itinerary\n  - !ruby/object:ActiveModel::Attribute::FromDatabase\n    name: question\n    value_before_type_cast: Did you and the clients like the itinerary? If not, why\n      not? How could it be improved? Was it accurate? Did you make any adjustments\n      to the itinerary? Please describe any special things you did on the trip that\n      were not part of the itinerary.\n  - !ruby/object:ActiveModel::Attribute::FromDatabase\n    name: created_at\n  - !ruby/object:ActiveModel::Attribute::FromDatabase\n    name: updated_at\n  new_record: false\n  active_record_yaml_version: 2\n</code></pre>\n\n<p>My first guess was to use the yaml_db gem, and then YAML::load_file itself directly, but I get the error:</p>\n\n<pre><code>ArgumentError: undefined class/module Question\n</code></pre>\n\n<p>Even though there is a Question model in the app\"</p>\n\n<pre><code>class Question &lt; ActiveRecord::Base\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "owner": {"reputation": 11, "user_id": 6136309, "user_type": "registered", "profile_image": "https://graph.facebook.com/1211829902176765/picture?type=large", "display_name": "Bruno Oliveira", "link": "https://stackoverflow.com/users/6136309/bruno-oliveira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1546454748, "creation_date": 1546454748, "question_id": 54011591, "link": "https://stackoverflow.com/questions/54011591/i-can-not-create-simple-options-with-simple-form-grouped-select", "title": "I can not create simple options with Simple _form grouped_select", "body": "<p>I'm using simple_form to generate my options in the select field. It generates group options without any problem. But it does not generate the options that are not grouped.</p>\n\n<pre><code>&lt;%= f.association :abstract_document_filters,\n    :collection =&gt; Abstract::DocumentCategory.order(:label),\n    :as =&gt; :grouped_select,\n    :group_method =&gt; :abstract_document_filters,\n    :group_label_method =&gt; :label,\n    :label_method =&gt; :label,\n    :include_blank =&gt; \"Escolha a lista\",  :class =&gt; 'form-control select chosen-select'  %&gt;\n</code></pre>\n\n<p>I have the following HTML code:</p>\n\n<pre><code>&lt;select class=\"form-control grouped_select optional\" name=\"business_child_international_document_list[abstract_document_filters_id]\" id=\"business_child_international_document_list_abstract_document_filters_id\"&gt;\n&lt;option value=\"\"&gt;Escolha a lista&lt;/option&gt;\n&lt;optgroup label=\"Assets\"&gt;\n    &lt;option value=\"4\"&gt;Pedras Preciosas&lt;/option&gt;\n    &lt;option value=\"5\"&gt;Ouro&lt;/option&gt;\n&lt;/optgroup&gt;\n&lt;optgroup label=\"Monetiza\u00e7\u00e3o\"&gt;\n    &lt;option value=\"1\"&gt;Pessoa Fisica&lt;/option&gt;\n    &lt;option value=\"2\"&gt;Pessoa Jur\u00eddica Nacional&lt;/option&gt;\n    &lt;option value=\"3\"&gt;Pessoa Jur\u00eddica Interacional&lt;/option&gt;\n&lt;/optgroup&gt;\n</code></pre>\n\n<p></p>\n\n<p>I need to receive the following code:</p>\n\n<pre><code>&lt;select class=\"form-control grouped_select optional\" name=\"business_child_international_document_list[abstract_document_filters_id]\" id=\"business_child_international_document_list_abstract_document_filters_id\"&gt;\n&lt;option value=\"\"&gt;Escolha a lista&lt;/option&gt;\n&lt;optgroup label=\"Assets\"&gt;\n    &lt;option value=\"4\"&gt;Pedras Preciosas&lt;/option&gt;\n    &lt;option value=\"5\"&gt;Ouro&lt;/option&gt;\n&lt;/optgroup&gt;\n&lt;optgroup label=\"Monetiza\u00e7\u00e3o\"&gt;\n    &lt;option value=\"1\"&gt;Pessoa Fisica&lt;/option&gt;\n    &lt;option value=\"2\"&gt;Pessoa Jur\u00eddica Nacional&lt;/option&gt;\n    &lt;option value=\"3\"&gt;Pessoa Jur\u00eddica Interacional&lt;/option&gt;\n&lt;/optgroup&gt;\n&lt;option value=\"5\"&gt;T\u00edtulos&lt;/option&gt; &lt;------------------------ I need this line\n</code></pre>\n\n<p></p>\n\n<p>I understand that the problem occurs because of my collection. It's pointing to Abstract::DocumentCategory and I have an Abstract::DocumentFilter with no category. For this reason he does not find the items that are not in the collection. I wondered if there was any other way to do that.</p>\n"}, {"tags": ["ruby", "fileutils"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1546457892, "post_id": 54011365, "comment_id": 94861113, "body": "<code>cp_r</code> is a recursive copy, including any and all subdirectories, so it definitely <i>will</i> need to call <code>mkdir</code> at some point if there exists any subdirectory. Note that e.g. macOS will actually create tons of hidden subdirectories."}, {"owner": {"reputation": 6375, "user_id": 6826164, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh6.googleusercontent.com/-CKThqFqe5Eo/AAAAAAAAAAI/AAAAAAAAP10/ih0uh1YgT_I/photo.jpg?sz=128", "display_name": "Jonathan Tuzman", "link": "https://stackoverflow.com/users/6826164/jonathan-tuzman"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1546458044, "post_id": 54011365, "comment_id": 94861179, "body": "But isn&#39;t it encountering this error on the first file, which is simply a file and not a directory?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546486392, "post_id": 54011365, "comment_id": 94868787, "body": "Presumably <code>transfer_path</code> is a method. What does it return? If it returns a directory that might be the problem, as <code>in</code> would work but <code>out</code> would raise an exception. As to why you are getting the particular error message, search for &quot;eexists&quot; <a href=\"https://blog.honeybadger.io/understanding-rubys-strange-errno-exceptions/\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 6375, "user_id": 6826164, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh6.googleusercontent.com/-CKThqFqe5Eo/AAAAAAAAAAI/AAAAAAAAP10/ih0uh1YgT_I/photo.jpg?sz=128", "display_name": "Jonathan Tuzman", "link": "https://stackoverflow.com/users/6826164/jonathan-tuzman"}, "edited": false, "score": 0, "creation_date": 1546487084, "post_id": 54011365, "comment_id": 94868920, "body": "Yeah it wound up being dumb: as you may notice in the code <code>path</code> got a filename appended to it, whereas <code>transfer_path</code> is a path to a folder. So, moving a file to a folder works. But moving a folder to a file... obviously not. Gods of SO, what should I do with this post? Delete it?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546500916, "post_id": 54011365, "comment_id": 94872406, "body": "I think the question has value, but for it to make sense you need to edit it to show the value of <code>transfer_path</code>. That might be done most easily by making <code>transfer_path</code> an argument (rather than a method) and then invoke the method with example values of the two arguments. As far as answering the question, I suggest you provide an answer yourself (not in the question, but as an answer.) I say the question has merit because anyone could encounter the problem."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1546501197, "post_id": 54011365, "comment_id": 94872511, "body": "I just happened to see your comment. You need to remember to add @&lt;username&gt; to your comments so the persons to which they are directed will be notified by SO."}], "owner": {"reputation": 6375, "user_id": 6826164, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh6.googleusercontent.com/-CKThqFqe5Eo/AAAAAAAAAAI/AAAAAAAAP10/ih0uh1YgT_I/photo.jpg?sz=128", "display_name": "Jonathan Tuzman", "link": "https://stackoverflow.com/users/6826164/jonathan-tuzman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 577, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546453710, "creation_date": 1546453710, "question_id": 54011365, "link": "https://stackoverflow.com/questions/54011365/file-exists-dir-s-mkdir-when-im-not-calling-mk-dir", "title": "File exists @ dir_s_mkdir when I&#39;m not calling mk_dir", "body": "<p>I'm trying to write a simple file transfer script:</p>\n\n<pre><code>def copy_vscode_files(in_or_out)\n  vsc_path = Paths.base_path[@year] + Paths.vscode_path\n  Paths.vscode_files.each do |file|\n    path = vsc_path + \"/#{file}\"\n    case in_or_out\n      when \"in\" then    FileUtils.cp_r(path, transfer_path)\n      when \"out\" then   FileUtils.cp_r(transfer_path, path)\n    end\n  end\nend\n</code></pre>\n\n<p>Copying in works fine but when I try to copy out I get </p>\n\n<pre><code>Errno::EEXIST: File exists @ dir_s_mkdir - /Users/TuzsNewMacBook/Library/Application Support/Code/User/keybindings.json \n</code></pre>\n\n<p>which is confusing me because I'm never calling <code>mkdir</code> in this method or in any of the methods it calls. </p>\n\n<p>It's also confusing because while yes, the file it mentions does indeed exist, \"copying in\" also involves overwriting an existing file.</p>\n"}, {"tags": ["ruby", "encryption"], "comments": [{"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 0, "creation_date": 1546454349, "post_id": 54011153, "comment_id": 94859679, "body": "Try <code>key_array.map(&amp;:to_s)</code>? <code>key_array.map(&amp;:size).inject(:+) =&gt; 128</code> whereas <code>key_array.map(&amp;:to_s).map(&amp;:size).inject(:+) =&gt; 32</code>.  If Mcrypt is not changing the ints to strings it may be giving it a 128byte / 1024bit key instead of 32byte / 256bit"}, {"owner": {"reputation": 564, "user_id": 9911698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HiA9x.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/9911698/gabriel"}, "reply_to_user": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 0, "creation_date": 1546454715, "post_id": 54011153, "comment_id": 94859812, "body": "Thanks for the suggestion. Unfortunately I am still getting the same error. I was hoping that would work cause that makes sense."}, {"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 0, "creation_date": 1546458088, "post_id": 54011153, "comment_id": 94861202, "body": "Try doubling the length of the array [65, 66, 67, 68, 49, 50, 51, 52, 70, 71, 72, 73, 53, 54, 55, 56, 65, 66, 67, 68, 49, 50, 51, 52, 70, 71, 72, 73, 53, 54, 55, 56]`.  That would match up with <a href=\"https://stackoverflow.com/questions/36826445/rijndael-key-size-in-c-sharp\">this suggestion</a> where their hex array is twice as long for a 256 rijndael."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1546458418, "post_id": 54011153, "comment_id": 94861344, "body": "Judging by the fact that <a href=\"https://rubydoc.info/gems/ruby-mcrypt/Mcrypt:key\" rel=\"nofollow noreferrer\">the <code>key</code> accessor returns a <code>String</code></a> and reading <a href=\"https://rubydoc.info/gems/ruby-mcrypt/Mcrypt:key=\" rel=\"nofollow noreferrer\">between the lines of the documentation for <code>key=</code></a>, I would guess that the key needs to be a <code>String</code> in <code>Encoding::BINARY</code> encoding."}, {"owner": {"reputation": 564, "user_id": 9911698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HiA9x.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/9911698/gabriel"}, "reply_to_user": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 0, "creation_date": 1546458799, "post_id": 54011153, "comment_id": 94861499, "body": "@Tom I did try that and still got the same error"}, {"owner": {"reputation": 564, "user_id": 9911698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HiA9x.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/9911698/gabriel"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1546458874, "post_id": 54011153, "comment_id": 94861531, "body": "@J&#246;rgWMittag I suspect you are correct about that. That was what I was thinking. Just wanted to see if anyone else could verify this is the case."}], "answers": [{"tags": [], "owner": {"reputation": 1331, "user_id": 161183, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cb8d293c40433618da050c1f17119754?s=128&d=identicon&r=PG", "display_name": "KingPong", "link": "https://stackoverflow.com/users/161183/kingpong"}, "is_accepted": true, "score": 1, "last_activity_date": 1546890271, "creation_date": 1546890271, "answer_id": 54080799, "question_id": 54011153, "link": "https://stackoverflow.com/questions/54011153/why-wont-ruby-mcrypt-accept-an-array-as-a-key/54080799#54080799", "title": "Why won&#39;t ruby-mcrypt accept an array as a key?", "body": "<p>The library doesn't support arrays. You'll need to use Strings instead:</p>\n\n<pre><code>def binary(byte_array)\n  byte_array.pack('C*')\nend\n\narray_to_encrypt = [16, 0, 0, 0, 50, 48, 49, 55, 47, 48, 50, 47, 48, 55, 32, 50, 50, 58, 52, 54, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\nkey_array = [65, 66, 67, 68, 49, 50, 51, 52, 70, 71, 72, 73, 53, 54, 55, 56]\n\nresult = encrypt(binary(array_to_encrypt), binary(key_array))\np \"RESULT IS #{result}\"\n</code></pre>\n"}], "owner": {"reputation": 564, "user_id": 9911698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HiA9x.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/9911698/gabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 54080799, "answer_count": 1, "score": 2, "last_activity_date": 1546987239, "creation_date": 1546452590, "last_edit_date": 1546987239, "question_id": 54011153, "link": "https://stackoverflow.com/questions/54011153/why-wont-ruby-mcrypt-accept-an-array-as-a-key", "title": "Why won&#39;t ruby-mcrypt accept an array as a key?", "body": "<p>Hello I am having trouble encrypting using an array as the key and the value with the <a href=\"https://github.com/kingpong/ruby-mcrypt\" rel=\"nofollow noreferrer\">ruby-mcrypt gem</a>. The gem lets me use an array for the key fine, <code>cipher = Mcrypt.new(\"rijndael-256\", :ecb, secret)</code> works. But it will give me an error when I try to encrypt. I've tried many things but no luck. Does anyone know if Mcrypt just doesn't like encrypting with an array?</p>\n\n<pre><code>require 'mcrypt'\n\ndef encrypt(plain, secret)\n  cipher = Mcrypt.new(\"rijndael-256\", :ecb, secret)\n  cipher.padding = :zeros\n\n  encrypted = cipher.encrypt(plain)\n  p encrypted\n  encrypted.unpack(\"H*\").first.to_s.upcase\nend\n\narray_to_encrypt = [16, 0, 0, 0, 50, 48, 49, 55, 47, 48, 50, 47, 48, 55, 32, 50, 50, 58, 52, 54, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\nkey_array = [65, 66, 67, 68, 49, 50, 51, 52, 70, 71, 72, 73, 53, 54, 55, 56]\n\nresult = encrypt(array_to_encrypt, key_array)\np \"RESULT IS #{result}\"\n</code></pre>\n\n<p>The output is as follows:</p>\n\n<pre><code>Mcrypt::RuntimeError: Could not initialize mcrypt: Key length is not legal.\n</code></pre>\n\n<p>I traced this error to <a href=\"https://github.com/kingpong/ruby-mcrypt/blob/master/ext/mcrypt_wrapper.c#L150\" rel=\"nofollow noreferrer\">here</a> in the <code>ruby-mcrypt</code> gem but don't understand it enough to figure out why I am getting the error message. Any help or insights would be amazing. Thanks!</p>\n"}, {"tags": ["ruby", "mongodb", "collections", "sinatra", "geospatial"], "owner": {"reputation": 35, "user_id": 10231307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6AkK2.jpg?s=128&g=1", "display_name": "mwdeatherage", "link": "https://stackoverflow.com/users/10231307/mwdeatherage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1546455396, "creation_date": 1546452482, "last_edit_date": 1546455396, "question_id": 54011129, "link": "https://stackoverflow.com/questions/54011129/mongodb-geosptial-query-with-distance-in-ruby-route", "title": "MongoDB Geosptial Query with Distance in Ruby Route", "body": "<p>I am trying to add a maxDistance filter to my collection query, but it will return nothing anytime I apply the filter. If I don't apply maxDistance, the full collection does come. </p>\n\n<p>What I ultimately want is to return the locations within the distance provided from the coordinates provided, along with returning that integer-based distance from each other within the bson object. </p>\n\n<p>Any help greatly appreciated!</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>//Find method\r\n@stores =[]\r\ncollection.find({\r\n  \"location\" =&gt; {\r\n    \"$near\" =&gt; {\r\n        \"$geometry\" =&gt; {\r\n          \"type\" =&gt;'Point',\r\n          \"coordinates\" =&gt; [1,1]\r\n        },\r\n        \"$maxDistance\" =&gt; 5000 \r\n        // if deleted will return full collection\r\n    }\r\n  }\r\n}).each do |doc|\r\n      @stores.push(doc)\r\n    end\r\n \r\n //collection index \r\n     @grid = collection.indexes.create_one({ \"collection\" =&gt; \"2dsphere\"})\r\n     \r\n// collection sample\r\ncollection.insert_one({\r\n      :id =&gt; 3,\r\n      :rid =&gt; \"tango\",\r\n      :location =&gt; [18, 15]\r\n    })\r\n\r\n \r\n    \r\n </code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 3, "creation_date": 1546448162, "post_id": 54010180, "comment_id": 94857160, "body": "How does your User model look like? How do you define that a user already exits \u2013 same email, same name?"}, {"owner": {"reputation": 11, "user_id": 10858611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28eed9616a66f14c17db9891cadff2e2?s=128&d=identicon&r=PG&f=1", "display_name": "jnjndjn", "link": "https://stackoverflow.com/users/10858611/jnjndjn"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1546448242, "post_id": 54010180, "comment_id": 94857208, "body": "Same username, though I might have the syntax wrong"}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 1, "creation_date": 1546448312, "post_id": 54010180, "comment_id": 94857238, "body": "You need to add a validation for uniqueness to your model as shown here: <a href=\"https://guides.rubyonrails.org/active_record_validations.html#uniqueness\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>  Also, add a unique index to your username column on the database level via a migration as Rails validations are not full proof due to race conditions."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1546450471, "post_id": 54010276, "comment_id": 94858130, "body": "The new form is <code>validates :username, uniqueness: true</code>. The old <code>validates_X</code> methods are still supported but aren&#39;t as flexible as the new ones."}], "tags": [], "owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "is_accepted": false, "score": 1, "last_activity_date": 1546448387, "creation_date": 1546448387, "answer_id": 54010276, "question_id": 54010180, "link": "https://stackoverflow.com/questions/54010180/exists-method-not-working-trying-to-check-if-a-user-exists-before-saving-to/54010276#54010276", "title": "&quot;exists?&quot; method not working- trying to check if a user exists before saving to DB", "body": "<p>Use like this in the model file such as</p>\n\n<pre><code>validates_uniqueness_of :username #=&gt; or specify :email or :name etc...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1546450436, "post_id": 54010279, "comment_id": 94858120, "body": "May want to add <code>presence: true</code> as well."}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1546455165, "post_id": 54010279, "comment_id": 94859991, "body": "Would also be beneficial to add an example of modifying their controller. With this, they&#39;ll no longer need the <code>exists?</code> check because it should raise a validation error when they try to save."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 4, "last_activity_date": 1546467258, "last_edit_date": 1546467258, "creation_date": 1546448396, "answer_id": 54010279, "question_id": 54010180, "link": "https://stackoverflow.com/questions/54010180/exists-method-not-working-trying-to-check-if-a-user-exists-before-saving-to/54010279#54010279", "title": "&quot;exists?&quot; method not working- trying to check if a user exists before saving to DB", "body": "<p>A very simple validation would be something like this:</p>\n\n<pre><code># in your user.rb\nvalidates :username, uniqueness: true\n</code></pre>\n\n<p>You might want to ignore upper and lower case:</p>\n\n<pre><code># in your user.rb\nvalidates :username, uniqueness: { case_sensitive: false }\n</code></pre>\n\n<p>And change your <code>create</code> method to something like this:</p>\n\n<pre><code>def create \n  @user = User.new(user_params)\n\n  if @user.save \n    session[:id] = @user.id\n    redirect_to posts_path\n  else\n    render :new\n  end\nend\n</code></pre>\n\n<p>Furthermore, I suggest having a unique index on the database level too:</p>\n\n<pre><code># in a migration\nadd_index :users, :username, unique: true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7878, "user_id": 630780, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fskbD.png?s=128&g=1", "display_name": "Carl Markham", "link": "https://stackoverflow.com/users/630780/carl-markham"}, "is_accepted": false, "score": 0, "last_activity_date": 1546448673, "creation_date": 1546448673, "answer_id": 54010343, "question_id": 54010180, "link": "https://stackoverflow.com/questions/54010180/exists-method-not-working-trying-to-check-if-a-user-exists-before-saving-to/54010343#54010343", "title": "&quot;exists?&quot; method not working- trying to check if a user exists before saving to DB", "body": "<p>As suggested, you should use model validation for something like this. However, here's why your code doesn't work.</p>\n\n<p>The <code>exists?</code> method is to be used on the model class, not an instance of it for example:</p>\n\n<pre><code>Person.exists?(5)\nPerson.exists?(:name =&gt; \"David\")\n</code></pre>\n\n<p>The above is from the <a href=\"https://apidock.com/rails/ActiveRecord/Base/exists%3F/class\" rel=\"nofollow noreferrer\">exists? docs</a></p>\n"}, {"tags": [], "owner": {"reputation": 520, "user_id": 6507755, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/IUwxM.png?s=128&g=1", "display_name": "2017kamb", "link": "https://stackoverflow.com/users/6507755/2017kamb"}, "is_accepted": false, "score": 0, "last_activity_date": 1546451483, "creation_date": 1546451483, "answer_id": 54010924, "question_id": 54010180, "link": "https://stackoverflow.com/questions/54010180/exists-method-not-working-trying-to-check-if-a-user-exists-before-saving-to/54010924#54010924", "title": "&quot;exists?&quot; method not working- trying to check if a user exists before saving to DB", "body": "<p>As almost people suggested you above and this is the best way to use <a href=\"https://guides.rubyonrails.org/active_record_validations.html#uniqueness\" rel=\"nofollow noreferrer\">uniqueness</a> validation.</p>\n\n<p>But, If you want to give it a try with <a href=\"https://apidock.com/rails/ActiveResource/Base/exists%3F/class\" rel=\"nofollow noreferrer\">exists?</a> \nYou can do like,</p>\n\n<blockquote>\n  <p>User.exists?(username: params[:username])</p>\n</blockquote>\n"}], "owner": {"reputation": 11, "user_id": 10858611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28eed9616a66f14c17db9891cadff2e2?s=128&d=identicon&r=PG&f=1", "display_name": "jnjndjn", "link": "https://stackoverflow.com/users/10858611/jnjndjn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 400, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1546467258, "creation_date": 1546447938, "last_edit_date": 1546448350, "question_id": 54010180, "link": "https://stackoverflow.com/questions/54010180/exists-method-not-working-trying-to-check-if-a-user-exists-before-saving-to", "title": "&quot;exists?&quot; method not working- trying to check if a user exists before saving to DB", "body": "<p>I'm new to Rails, and am trying to create a signup form for my site. It works fine, with one exception- it saves users to the database without checking first to see if they exist. How can I check to make sure a user exists before I save it?</p>\n\n<p>User controller:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  def new\n    @user = User.new\n  end\n\n  def create \n    @user = User.new(user_params)\n    if @user.exists?(:username) == false &amp;&amp; @user.save(user_params)\n      session[:id] = @user.id\n      redirect_to posts_path\n    else\n      redirect_to '/signup'\n    end\n  end\n\n  def edit\n\n  end\n\n  def update\n  end\n\n  def show\n  end\n\n  def destroy\n  end\n\n    private\n\n  def user_params\n    params.require(:user).permit(:username, :jabber_id, :password)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "rhel7"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1546452155, "post_id": 54009880, "comment_id": 94858816, "body": "Install RVM with <code>\\curl -sSL https:&#47;&#47;get.rvm.io | bash -s stable</code>; install Ruby with <code>rvm install 2.0.0</code>. <a href=\"https://robots.thoughtbot.com/psa-do-not-use-system-ruby\" rel=\"nofollow noreferrer\">Don&#39;t</a> <a href=\"https://chrisherring.co/posts/why-you-shouldn-t-use-the-system-ruby\" rel=\"nofollow noreferrer\">use</a> <a href=\"http://billpatrianakos.me/blog/2014/05/15/never-use-system-ruby-ever/\" rel=\"nofollow noreferrer\">system Ruby</a>. (and if possible, please use a newer version of Ruby as support for 2.0 <a href=\"https://www.ruby-lang.org/en/news/2016/02/24/support-plan-of-ruby-2-0-0-and-2-1/\" rel=\"nofollow noreferrer\">ended three years ago</a>)"}, {"owner": {"reputation": 1, "user_id": 10858770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76673e77aeccff8516813f4cd2cb531?s=128&d=identicon&r=PG&f=1", "display_name": "CooLC", "link": "https://stackoverflow.com/users/10858770/coolc"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546452304, "post_id": 54009880, "comment_id": 94858881, "body": "This system cannot be added to the internet. (it totally closed off)  I&#39;m not an rvm expert but I think that tool works by automatically downloading gems from the network, right?   If so then that tool would not work since I dont have any internet access,   ls -tr /usr/share/gems/gems/  shows all of the gems.  Is there a way to make them appear in the   *** LOCAL GEMS ***  databse?"}], "answers": [{"tags": [], "owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "is_accepted": false, "score": 0, "last_activity_date": 1546470767, "creation_date": 1546470767, "answer_id": 54014383, "question_id": 54009880, "link": "https://stackoverflow.com/questions/54009880/rubygem-is-installed-but-now-in-local-gems-database/54014383#54014383", "title": "rubygem is installed but now in LOCAL GEMs database", "body": "<p>You can change the path to your gems by running the following command in your shell (or by adding it to your shell profile and reloading your shell):</p>\n\n<pre><code>export GEM_PATH=/usr/share/gems/gems\n</code></pre>\n\n<p>After running this command you can verify that the change has taken effect by running <code>gem env</code>:</p>\n\n<pre><code>RubyGems Environment:\n  &lt;snipped&gt;\n  - GEM PATHS:\n     - /usr/share/gems/gems\n  &lt;snipped&gt;\n</code></pre>\n\n<p>It sounds like you are not installing additional gems since your system is not connected to the Internet, but if you were to use the <code>gem install</code> command then you would also want to set <code>GEM_HOME</code> to the same path:</p>\n\n<pre><code>export GEM_HOME=/usr/share/gems/gems\n</code></pre>\n\n<p><code>GEM_PATH</code> is where <code>gem</code> and <code>bundler</code> will find gems and <code>GEM_HOME</code> is where gems will be installed.</p>\n\n<p>More details <a href=\"https://stackoverflow.com/a/11277228/3784008\">here</a> and <a href=\"https://unix.stackexchange.com/q/203376/218427\">here</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 10858770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76673e77aeccff8516813f4cd2cb531?s=128&d=identicon&r=PG&f=1", "display_name": "CooLC", "link": "https://stackoverflow.com/users/10858770/coolc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546470767, "creation_date": 1546446713, "last_edit_date": 1546447090, "question_id": 54009880, "link": "https://stackoverflow.com/questions/54009880/rubygem-is-installed-but-now-in-local-gems-database", "title": "rubygem is installed but now in LOCAL GEMs database", "body": "<p>I have a RedHat 7 system and I have installed the ruby 2.0.0.648 and rubygem 2.0.14 package and it has also installed a few dependent gems.</p>\n\n<p>My problem is when I run the\n<code>gem list</code> command I don't see any of the gems.</p>\n\n<p>If I cd into the /usr/share/gems/gems/ directory I can see all of the files.</p>\n\n<p>My question is\u2026</p>\n\n<p>How can I force the \u201cgems command\u201d to scan the /usr/share/gems/gems directory and update the\n*** LOCAL GEMS *** database?</p>\n\n<p>There has to be a way to manually edit the files to tell the gems command that all of the files are really on the system.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "html-table", "associations"], "comments": [{"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 0, "creation_date": 1546447245, "post_id": 54009843, "comment_id": 94856691, "body": "Can you show the rest of your controller? Specifically your strong parameters? Did you add the new <code>status</code> and <code>notes</code> as keys in your permitted parameters?"}, {"owner": {"reputation": 77, "user_id": 9938579, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hMt9bBtK7CM/AAAAAAAAAAI/AAAAAAAAAAA/2GwKhh_cv1c/photo.jpg?sz=128", "display_name": "Werner Adewole", "link": "https://stackoverflow.com/users/9938579/werner-adewole"}, "reply_to_user": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 0, "creation_date": 1546447968, "post_id": 54009843, "comment_id": 94857063, "body": "Updated now, no I have not included status and notes included params because I figured that I would not be updating any of the columns in the submissions model?"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 9938579, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hMt9bBtK7CM/AAAAAAAAAAI/AAAAAAAAAAA/2GwKhh_cv1c/photo.jpg?sz=128", "display_name": "Werner Adewole", "link": "https://stackoverflow.com/users/9938579/werner-adewole"}, "edited": false, "score": 0, "creation_date": 1546449058, "post_id": 54010297, "comment_id": 94857562, "body": "Thanks @Tom very helpful although my form fields on my index view seem to now have disappeared?"}, {"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "reply_to_user": {"reputation": 77, "user_id": 9938579, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hMt9bBtK7CM/AAAAAAAAAAI/AAAAAAAAAAA/2GwKhh_cv1c/photo.jpg?sz=128", "display_name": "Werner Adewole", "link": "https://stackoverflow.com/users/9938579/werner-adewole"}, "edited": false, "score": 0, "creation_date": 1546449212, "post_id": 54010297, "comment_id": 94857620, "body": "Try <code>&lt;% form.fields_for :agent_activities, @submission.agent_activities.build do |act| %&gt;</code> This will supply a record object in the event there are no pre existing agent_activities. OR try <code>form_with(model: @submission..</code> using the instance variable instead of a symbol reference."}, {"owner": {"reputation": 77, "user_id": 9938579, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hMt9bBtK7CM/AAAAAAAAAAI/AAAAAAAAAAA/2GwKhh_cv1c/photo.jpg?sz=128", "display_name": "Werner Adewole", "link": "https://stackoverflow.com/users/9938579/werner-adewole"}, "edited": false, "score": 0, "creation_date": 1546449703, "post_id": 54010297, "comment_id": 94857814, "body": "So the second option seems to work, however, my button has changed from updated to save and it is now asking me to save to a completely different model (called estate agents) which isn&#39;t working because I have not added to the required params for it."}, {"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "reply_to_user": {"reputation": 77, "user_id": 9938579, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hMt9bBtK7CM/AAAAAAAAAAI/AAAAAAAAAAA/2GwKhh_cv1c/photo.jpg?sz=128", "display_name": "Werner Adewole", "link": "https://stackoverflow.com/users/9938579/werner-adewole"}, "edited": false, "score": 0, "creation_date": 1546449948, "post_id": 54010297, "comment_id": 94857912, "body": "estate agents?? could that be a typo somewhere?"}, {"owner": {"reputation": 77, "user_id": 9938579, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hMt9bBtK7CM/AAAAAAAAAAI/AAAAAAAAAAA/2GwKhh_cv1c/photo.jpg?sz=128", "display_name": "Werner Adewole", "link": "https://stackoverflow.com/users/9938579/werner-adewole"}, "edited": false, "score": 0, "creation_date": 1546450329, "post_id": 54010297, "comment_id": 94858074, "body": "It seems to be coming from me using the instance variable as opposed to the symbol reference in the form"}], "tags": [], "owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "is_accepted": true, "score": 1, "last_activity_date": 1546448489, "creation_date": 1546448489, "answer_id": 54010297, "question_id": 54009843, "link": "https://stackoverflow.com/questions/54009843/form-associations-having-trouble-with-controller-saving-information-to-2-models/54010297#54010297", "title": "Form associations: Having trouble with controller saving information to 2 models simultaneously", "body": "<ol>\n<li><p>On your <code>Submission</code> model add: <code>accepts_nested_attributes_for :agent_activities</code> (<a href=\"https://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\" rel=\"nofollow noreferrer\">accepts_nested_attributes_for documentation</a>) This will let Rails know that your form is going to be supplying fields for an associated model.</p></li>\n<li><p>Once that is added Rails will be supplying a key in params <code>agent_activities_attributes</code> in your strong params we can add: <code>.permit(..., agent_activities_attributes: [:id, :Status, :Notes, :_destroy]</code>.  The <code>:_destroy</code> key is only needed if you plan on having <code>allow_destroy: true</code> on the nested attribute call.</p></li>\n</ol>\n\n<p>One side note: Capitalized names (<code>Status</code>, <code>Notes</code>, etc) are normally reserved for constants in Ruby.  You may want to look into changing your attribute column names to lowercase.</p>\n"}], "owner": {"reputation": 77, "user_id": 9938579, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hMt9bBtK7CM/AAAAAAAAAAI/AAAAAAAAAAA/2GwKhh_cv1c/photo.jpg?sz=128", "display_name": "Werner Adewole", "link": "https://stackoverflow.com/users/9938579/werner-adewole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 54010297, "answer_count": 1, "score": 1, "last_activity_date": 1546452918, "creation_date": 1546446579, "last_edit_date": 1546452918, "question_id": 54009843, "link": "https://stackoverflow.com/questions/54009843/form-associations-having-trouble-with-controller-saving-information-to-2-models", "title": "Form associations: Having trouble with controller saving information to 2 models simultaneously", "body": "<p>For my project I am trying to build a dashboard whereby an Agent can view submissions posted by a user and add a Status &amp; Notes to each submission in order to log their own personal activity i.e they would not be changing the actual record, just leaving private notes against it. In order to do this I have created a join table with both Agent id and Submission id as well as Status and Notes columns.</p>\n\n<p>I have managed to create an index view that shows submissions data with 2 form fields at the end of each line from my join table which are called Status and Notes... the problem is when I update these fields they do not get saved to my jointable.</p>\n\n<p>Form on index view</p>\n\n<pre><code>  &lt;%= form_with(model: submission, local: true) do |form| %&gt;\n      &lt;% form.fields_for :agent_activities do |act| %&gt;\n\n      &lt;td&gt; &lt;div class=\"field\"&gt;\n\n        &lt;%= act.text_field :Status %&gt;\n\n      &lt;/div&gt;\n    &lt;/td&gt;\n\n    &lt;td&gt; &lt;div class=\"field\"&gt;\n\n      &lt;%= act.text_field :Notes %&gt;\n    &lt;/div&gt;\n  &lt;/td&gt;\n  &lt;td&gt;\n    &lt;div class=\"actions\"&gt;\n    &lt;%= form.submit %&gt;\n  &lt;/div&gt;\n&lt;/td&gt;\n\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>Model associations in rb files</p>\n\n<pre><code>class Submission &lt; ApplicationRecord\n  belongs_to :user, :optional =&gt; true\n\n  belongs_to :location, :optional =&gt; true\n\n  has_many :agent_activities\n\nend\n\n\nclass AgentActivity &lt; ApplicationRecord\n\n  belongs_to :submission, :optional =&gt; true #has submission_id \n  foreign key in table\n\n  belongs_to :agent, :optional =&gt; true #has agent_id foreign key in \n  table\n\n\nend\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code> class SubmissionsController &lt; ApplicationController\n before_action :set_submission, only: [:show, :edit, :update, :destroy]\n\ndef index\n@submissions = Submission.where(:user_id =&gt; current_user.id)\n\nend\n\n\ndef show\nend\n\n\ndef new\n@submission = Submission.new\nend\n\n\ndef edit\nend\n\n# POST /submissions\n# POST /submissions.json\ndef create\n@submission = Submission.new(submission_params.merge(user_id: current_user.id))\n\nrespond_to do |format|\n  if @submission.save\n    # Tell the UserMailer to send a welcome email after save\n    NewSubmissionMailer.submission_email(@submission).deliver_now\n    NewSubmissionMailer.matching_agents_email(@submission).deliver_now\n\n    format.html { redirect_to @submission, notice: 'Submission was successfully created.' }\n    format.json { render :show, status: :created, location: @submission }\n  else\n    format.html { render :new }\n    format.json { render json: @submission.errors, status: :unprocessable_entity }\n  end\n  end\n end\n\n # PATCH/PUT /submissions/1\n # PATCH/PUT /submissions/1.json\n  def update\n  respond_to do |format|\n  if @submission.update(submission_params)\n    format.html { redirect_to @submission, notice: 'Submission was successfully updated.' }\n    format.json { render :show, status: :ok, location: @submission }\n  else\n    format.html { render :edit }\n    format.json { render json: @submission.errors, status: :unprocessable_entity }\n   end\n  end\n\n end\n\n# DELETE /submissions/1\n# DELETE /submissions/1.json\ndef destroy\n@submission.destroy\nrespond_to do |format|\n  format.html { redirect_to submissions_url, notice: 'Submission was successfully destroyed.' }\n  format.json { head :no_content }\n  end\nend\n\n private\n  # Use callbacks to share common setup or constraints between actions.\n  def set_submission\n  @submission = Submission.find(params[:id])\n  end\n\n# Never trust parameters from the scary internet, only allow the white list through.\ndef submission_params\n  params.require(:submission).permit(:First_Name, :Last_Name, :Phone, :Email, :Desired_Location, :number_of_beds, :number_of_occupants, :Rent_price_per_month_gbp, :Max_move_in_date, :Tenant_Occupation, :Contact_me_on, :Furnished, :Current_Address, :Property_Requirements)\nend\nend\n</code></pre>\n\n<p>Not sure what im missing here :/</p>\n\n<p><strong>UPDATE BASED OFF @TOM ANSWER</strong></p>\n\n<p>New controller params:</p>\n\n<pre><code>  def submission_params\n  params.require(:submission).permit(:First_Name, :Last_Name, :Phone, :Email, :Desired_Location, :number_of_beds, :number_of_occupants, :Rent_price_per_month_gbp, :Max_move_in_date, :Tenant_Occupation, :Contact_me_on, :Furnished, :Current_Address, :Property_Requirements, agent_activities_attributes: [:id, :Status, :Notes, :_destroy])\nend\n</code></pre>\n\n<p>end</p>\n\n<p>New Submission Model rb:</p>\n\n<pre><code>class Submission &lt; ApplicationRecord\n belongs_to :user, :optional =&gt; true\n\n belongs_to :location, :optional =&gt; true\n\n has_many :agent_activities\n\n accepts_nested_attributes_for :agent_activities\n\nend\n</code></pre>\n\n<p>Index.html.erb</p>\n\n<pre><code>  &lt;%= form_with(model: submission, local: true) do |form| %&gt;\n  &lt;% form.fields_for :agent_activities, @submission.agent_activities.build do |act| %&gt;\n      &lt;td&gt; &lt;div class=\"field\"&gt;\n\n        &lt;%= act.text_field :Status %&gt;\n\n      &lt;/div&gt;\n    &lt;/td&gt;\n\n    &lt;td&gt; &lt;div class=\"field\"&gt;\n\n      &lt;%= act.text_field :Notes %&gt;\n    &lt;/div&gt;\n  &lt;/td&gt;\n  &lt;td&gt;\n    &lt;div class=\"actions\"&gt;\n    &lt;%= form.submit %&gt;\n  &lt;/div&gt;\n&lt;/td&gt;\n\n    &lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "https", "sinatra", "webrick"], "comments": [{"owner": {"reputation": 9012, "user_id": 122201, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/BTtUU.jpg?s=128&g=1", "display_name": "rainkinz", "link": "https://stackoverflow.com/users/122201/rainkinz"}, "edited": false, "score": 0, "creation_date": 1571168976, "post_id": 54009531, "comment_id": 103148512, "body": "Same issue here. Did you ever figure out what the issue was?"}, {"owner": {"reputation": 171, "user_id": 3857195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9251520cb17ddc87ae2c4a8ff304dced?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh Namburi", "link": "https://stackoverflow.com/users/3857195/dinesh-namburi"}, "reply_to_user": {"reputation": 9012, "user_id": 122201, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/BTtUU.jpg?s=128&g=1", "display_name": "rainkinz", "link": "https://stackoverflow.com/users/122201/rainkinz"}, "edited": false, "score": 1, "creation_date": 1572446814, "post_id": 54009531, "comment_id": 103563345, "body": "@rainkinz, yeah this was fixed, take a look the answer"}], "answers": [{"tags": [], "owner": {"reputation": 171, "user_id": 3857195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9251520cb17ddc87ae2c4a8ff304dced?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh Namburi", "link": "https://stackoverflow.com/users/3857195/dinesh-namburi"}, "is_accepted": true, "score": 2, "last_activity_date": 1572446783, "creation_date": 1572446783, "answer_id": 58627970, "question_id": 54009531, "link": "https://stackoverflow.com/questions/54009531/ruby-webrick-server-not-able-to-verify-client-certificate/58627970#58627970", "title": "Ruby Webrick server not able to verify client certificate", "body": "<p>This issue was fixed by providing the cacert file as <code>:SSLCACertificateFile</code> in server options instead of <code>:SSLClientCA</code>.</p>\n\n<pre><code>server_options = {\n    :Host =&gt; '0.0.0.0',\n    :Port =&gt; 443,\n    :SSLEnable =&gt; true,\n    :SSLVerifyClient    =&gt; OpenSSL::SSL::VERIFY_FAIL_IF_NO_PEER_CERT | OpenSSL::SSL::VERIFY_PEER,\n    :SSLVerifyDepth =&gt; 4,\n    :SSLCertificate =&gt; OpenSSL::X509::Certificate.new(File.open('/Users/cert.pem').read),\n    :SSLPrivateKey =&gt; OpenSSL::PKey::RSA.new(File.open('/Users/key.pem').read),\n    :SSLCACertificateFile =&gt; '/Users/cai.cer'\n}\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 3857195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9251520cb17ddc87ae2c4a8ff304dced?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh Namburi", "link": "https://stackoverflow.com/users/3857195/dinesh-namburi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 1, "accepted_answer_id": 58627970, "answer_count": 1, "score": 1, "last_activity_date": 1572446783, "creation_date": 1546445290, "last_edit_date": 1546457682, "question_id": 54009531, "link": "https://stackoverflow.com/questions/54009531/ruby-webrick-server-not-able-to-verify-client-certificate", "title": "Ruby Webrick server not able to verify client certificate", "body": "<p>I am running a sinatra based web application using Webrick. I was able to setup TLS using my self-signed server certificates and webrick starts in TLS mode, but I am not able to make a connection to server using client certificate (cert based authentication). </p>\n\n<p>Server logs says \"<strong>ERROR OpenSSL::SSL::SSLError: SSL_accept returned=1 errno=0 state=error: certificate verify failed</strong>\" </p>\n\n<p>But the same certificates (both server and client) are working with apache server.</p>\n\n<pre><code>def self.run!\n    server_options = {\n      :Host =&gt; '0.0.0.0',\n      :Port =&gt; 33443,\n      :SSLEnable =&gt; true,\n      :SSLVerifyClient    =&gt; OpenSSL::SSL::VERIFY_FAIL_IF_NO_PEER_CERT | OpenSSL::SSL::VERIFY_PEER,\n      :SSLVerifyDepth =&gt; 3,\n      :SSLCertificate =&gt; OpenSSL::X509::Certificate.new(File.open('/Users/cert.pem').read),\n      :SSLPrivateKey =&gt; OpenSSL::PKey::RSA.new(File.open('/Users/key.pem').read),\n      :SSLClientCA =&gt; OpenSSL::X509::Certificate.new(File.open('/Users/cai.cer').read)\n  }\n\n  Rack::Handler::WEBrick.run self, server_options do |server|\n    [:INT, :TERM].each { |sig| trap(sig) { server.stop } }\n    server.threaded = settings.threaded if server.respond_to? :threaded=\n    set :running, true\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 2, "creation_date": 1546441278, "post_id": 54008494, "comment_id": 94853663, "body": "What happens if you click the link? Does the confirmation dialog show up? How does the log file entry look like? Do you really follow a tutorial for Rails 4 - or do you use an up-to-date version of Rails? How does your <code>app&#47;assets&#47;javascripts&#47;application.js</code> look like and do you have a <code>javascript_include_tag</code> in your layout?"}, {"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 1, "creation_date": 1546441705, "post_id": 54008494, "comment_id": 94853907, "body": "In order to really help it would be useful to know, which the comment above me is also asking about, what exactly happens when you do click the link?  And, if you open up inspector are there any errors in the console when you click the button?"}, {"owner": {"reputation": 316, "user_id": 7558674, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qp50wBg6IhU/AAAAAAAAAAI/AAAAAAAAAD0/YNvxuQYnz6A/photo.jpg?sz=128", "display_name": "Pietro Allievi", "link": "https://stackoverflow.com/users/7558674/pietro-allievi"}, "edited": false, "score": 1, "creation_date": 1546445985, "post_id": 54008494, "comment_id": 94856084, "body": "Could your Article class has an has_many relationship? In this case you should also have to handle dependency on destroing it"}, {"owner": {"reputation": 25, "user_id": 10828349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7458d3d94a99624608e2c81f004ba9e5?s=128&d=identicon&r=PG&f=1", "display_name": "Venkat", "link": "https://stackoverflow.com/users/10828349/venkat"}, "edited": false, "score": 0, "creation_date": 1546513481, "post_id": 54008494, "comment_id": 94878011, "body": "I have in my layout &lt;%= javascript_include_tag &#39;application&#39;, &#39;data-turbolinks-track&#39; =&gt; true %&gt;"}, {"owner": {"reputation": 25, "user_id": 10828349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7458d3d94a99624608e2c81f004ba9e5?s=128&d=identicon&r=PG&f=1", "display_name": "Venkat", "link": "https://stackoverflow.com/users/10828349/venkat"}, "edited": false, "score": 0, "creation_date": 1546513574, "post_id": 54008494, "comment_id": 94878067, "body": "my application.js file                     = require jquery //= require jquery_ujs //= require turbolinks //= require_tree ."}, {"owner": {"reputation": 25, "user_id": 10828349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7458d3d94a99624608e2c81f004ba9e5?s=128&d=identicon&r=PG&f=1", "display_name": "Venkat", "link": "https://stackoverflow.com/users/10828349/venkat"}, "edited": false, "score": 0, "creation_date": 1546513634, "post_id": 54008494, "comment_id": 94878099, "body": "Whenever I click the delete button, it shows the edit result"}], "answers": [{"comments": [{"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "reply_to_user": {"reputation": 25, "user_id": 10828349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7458d3d94a99624608e2c81f004ba9e5?s=128&d=identicon&r=PG&f=1", "display_name": "Venkat", "link": "https://stackoverflow.com/users/10828349/venkat"}, "edited": false, "score": 0, "creation_date": 1546522865, "post_id": 54009539, "comment_id": 94883018, "body": "It won&#39;t necessarily make your code work, but it should show you what&#39;s wrong in your server logs. If there are no 500 errors in your server logs then the call to <code>destroy</code> is no the problem"}, {"owner": {"reputation": 25, "user_id": 10828349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7458d3d94a99624608e2c81f004ba9e5?s=128&d=identicon&r=PG&f=1", "display_name": "Venkat", "link": "https://stackoverflow.com/users/10828349/venkat"}, "edited": false, "score": 0, "creation_date": 1546961991, "post_id": 54009539, "comment_id": 95022546, "body": "I tried to delete from Rails console and its working fine. But whenever I tried to delete from my UI, it ends up showing the Show result :("}], "tags": [], "owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "is_accepted": false, "score": 1, "last_activity_date": 1546445327, "creation_date": 1546445327, "answer_id": 54009539, "question_id": 54008494, "link": "https://stackoverflow.com/questions/54008494/why-ruby-destroy-method-is-not-destroying-see-below/54009539#54009539", "title": "Why ruby destroy method is not destroying? (see below)", "body": "<p>One thing you could do to get a more useful exception would be to add a bang <code>!</code> to your <code>destroy</code> method, which will raise an exception if the destroy fails.</p>\n\n<p>It's possible that there is some failing association validation or callback that is raising an exception that you're not seeing. Try using this for your destroy method and watching your server logs after you click the link:</p>\n\n<pre><code>def destroy\n  @article = Article.find(params[:id])\n  @article.destroy!\n  redirect_to articles_path\nend\n</code></pre>\n\n<p>If you're not seeing anything in your server log, it may be a routing issue</p>\n"}, {"tags": [], "owner": {"reputation": 520, "user_id": 6507755, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/IUwxM.png?s=128&g=1", "display_name": "2017kamb", "link": "https://stackoverflow.com/users/6507755/2017kamb"}, "is_accepted": false, "score": 0, "last_activity_date": 1546452965, "creation_date": 1546452965, "answer_id": 54011225, "question_id": 54008494, "link": "https://stackoverflow.com/questions/54008494/why-ruby-destroy-method-is-not-destroying-see-below/54011225#54011225", "title": "Why ruby destroy method is not destroying? (see below)", "body": "<p>Your <strong>controller</strong> code of <strong>destroy action</strong> as well as <strong>view</strong> code of <strong>delete link</strong> seems fine, then in order to exactly dig the reason why it's not working do one thing, just open console and try to manually destroy an article with bang as NM Pennypacker suggested above. </p>\n\n<blockquote>\n  <p>Article.find(1).destroy!</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1546494416, "creation_date": 1546494416, "answer_id": 54016946, "question_id": 54008494, "link": "https://stackoverflow.com/questions/54008494/why-ruby-destroy-method-is-not-destroying-see-below/54016946#54016946", "title": "Why ruby destroy method is not destroying? (see below)", "body": "<p>Initially I got confused little (As I am using lower version of rails), later found and read <a href=\"https://content.pivotal.io/blog/were-finally-getting-destroy-in-rails-4\" rel=\"nofollow noreferrer\">this article</a></p>\n\n<p>This will clear your idea about other methods also along with <code>destroy!</code></p>\n"}], "owner": {"reputation": 25, "user_id": 10828349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7458d3d94a99624608e2c81f004ba9e5?s=128&d=identicon&r=PG&f=1", "display_name": "Venkat", "link": "https://stackoverflow.com/users/10828349/venkat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1546512054, "creation_date": 1546440974, "last_edit_date": 1546512054, "question_id": 54008494, "link": "https://stackoverflow.com/questions/54008494/why-ruby-destroy-method-is-not-destroying-see-below", "title": "Why ruby destroy method is not destroying? (see below)", "body": "<h1>My controller</h1>\n\n<pre><code>def destroy\n  @article = Article.find(params[:id])\n  @article.destroy\n  redirect_to articles_path\nend\n</code></pre>\n\n<h1>my view</h1>\n\n<pre><code>&lt;td&gt;&lt;%= link_to 'Destroy', article_path(article),\n              method: :delete,\n              data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n</code></pre>\n\n<p><strong>Notes from Tutorial Page:</strong>\nHere we're using <code>link_to</code> in a different way. We pass the named route as the second argument, and then the options as another argument. The <code>:method</code> and <code>'data-confirm'</code> options are used as HTML5 attributes so that when the link is clicked, Rails will first show a confirm dialog to the user, and then submit the link with method <code>delete</code>. </p>\n\n<p><strong>Whenever I click the delete button, it shows the edit result</strong> </p>\n\n<p><a href=\"https://i.stack.imgur.com/r7Ik7.png\" rel=\"nofollow noreferrer\">strong text</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "wow.js"], "comments": [{"owner": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "edited": false, "score": 0, "creation_date": 1546435995, "post_id": 54007211, "comment_id": 94851117, "body": "can you open the browser console and see wich error you get?"}, {"owner": {"reputation": 3, "user_id": 10857974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/decafd9e8a1720668342cc9191ac7d92?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/10857974/peeyush-verma"}, "reply_to_user": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "edited": false, "score": 0, "creation_date": 1546436275, "post_id": 54007211, "comment_id": 94851249, "body": "Rendering home/index.html.erb within layouts/application   Image Load (7.7ms)  SELECT &quot;images&quot;.* FROM &quot;images&quot; ORDER BY created_at DESC   \u21b3 app/views/home/index.html.erb:28   Rendered home/index.html.erb within layouts/application (40.8ms)   Rendered shared/_message.html.erb (2.2ms) Completed 200 OK in 633ms (Views: 582.3ms | ActiveRecord: 7.7ms)   Started GET &quot;/image_tag%20image.photo.url&quot; for 127.0.0.1 at 2019-01-02 19:06:49 +0530    ActionController::RoutingError (No route matches [GET] &quot;/image_tag%20image.photo.url&quot;):"}], "answers": [{"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1546436883, "post_id": 54007396, "comment_id": 94851554, "body": "nice catch.. :)"}, {"owner": {"reputation": 3, "user_id": 10857974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/decafd9e8a1720668342cc9191ac7d92?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/10857974/peeyush-verma"}, "edited": false, "score": 0, "creation_date": 1546506232, "post_id": 54007396, "comment_id": 94874342, "body": "@spikermann can you also take a look in one of my other question regarding images. <a href=\"https://stackoverflow.com/questions/54019061/rails-unable-to-add-image-within-style-background-imageurl-from-databa\" title=\"rails unable to add image within style background imageurl from databa\">stackoverflow.com/questions/54019061/&hellip;</a>"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 3, "user_id": 10857974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/decafd9e8a1720668342cc9191ac7d92?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/10857974/peeyush-verma"}, "edited": false, "score": 0, "creation_date": 1546507251, "post_id": 54007396, "comment_id": 94874785, "body": "@PeeyushVerma You might want to consider upvoting helpful answers and accepting an answer once your issue is solved."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1546436347, "creation_date": 1546436347, "answer_id": 54007396, "question_id": 54007211, "link": "https://stackoverflow.com/questions/54007211/unable-to-show-images-in-slider/54007396#54007396", "title": "Unable to show images in slider", "body": "<p>This line</p>\n\n<pre><code>&lt;a href=\"image_tag image.photo.url\" title=\"&lt;%= image.by %&gt;\" &gt;\n</code></pre>\n\n<p>should probably only be look like this:</p>\n\n<pre><code>&lt;a href=\"&lt;%= image.photo.url %&gt;\" title=\"&lt;%= image.by %&gt;\" &gt;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10857974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/decafd9e8a1720668342cc9191ac7d92?s=128&d=identicon&r=PG&f=1", "display_name": "Peeyush Verma", "link": "https://stackoverflow.com/users/10857974/peeyush-verma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546436347, "creation_date": 1546435588, "question_id": 54007211, "link": "https://stackoverflow.com/questions/54007211/unable-to-show-images-in-slider", "title": "Unable to show images in slider", "body": "<p>I'm new to rails and stack over flow, I would be grateful to you all if I can guided here.</p>\n\n<p>I'm developing a test site which is like a personal blog just to add portfolio for one user.</p>\n\n<p>I have a scaffold \"Images\" which is used to add images in the application the scaffold have only two fields one to upload the image and other for the photographer name.</p>\n\n<ol>\n<li>The images will be shown on the home page - which is working absolutely fine. </li>\n<li>However, when I click the image the image gets zoomed in and the user can use the right and left arrows to scroll the pictures.</li>\n<li>My problem - When the image is click the images are not getting fetched and it shows the message \"This image could not be loaded. </li>\n</ol>\n\n<p>Below is my code for your kind reference, I'm sure I'm making some mistake in this line </p>\n\n<pre><code>&lt;a href=\"image_tag image.photo.url\" title=\"&lt;%= image.by %&gt;\" &gt;\n</code></pre>\n\n<p>However, unable to rectify it yet.</p>\n\n<p>any help or suggestion would be great.</p>\n\n<p>My Code</p>\n\n<pre><code>&lt;!-- start portfolio section --&gt;\n&lt;section class=\"wow fadeIn\"&gt;\n  &lt;div class=\"container\"&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-md-12 no-padding xs-padding-15px-lr\"&gt;\n        &lt;div class=\"filter-content overflow-hidden\"&gt;\n          &lt;ul class=\"portfolio-grid work-3col hover-option4 lightbox-gallery gutter-small\"&gt;\n            &lt;li class=\"grid-sizer\"&gt;&lt;/li&gt;\n            &lt;!-- start portfolio item --&gt;\n            &lt;% @images.order('created_at DESC').each do |image| %&gt;\n            &lt;li class=\"grid-item web branding design wow fadeInUp\"&gt;\n              &lt;a href=\"image_tag image.photo.url\" title=\"&lt;%= image.by %&gt;\" &gt;\n                &lt;figure&gt;\n                  &lt;div class=\"portfolio-img bg-extra-dark-gray\"&gt;\n                    &lt;%= image_tag image.photo.url, class: \"project-img-gallery\", alt: \"\" %&gt;\n                  &lt;/div&gt;\n                  &lt;figcaption&gt;\n                    &lt;div class=\"portfolio-hover-main text-center\"&gt;\n                      &lt;div class=\"portfolio-hover-box vertical-align-middle\"&gt;\n                        &lt;div class=\"portfolio-hover-content position-relative\"&gt;\n                          &lt;i class=\"ti-zoom-in text-white fa-2x\"&gt;&lt;/i&gt;\n                        &lt;/div&gt;\n                      &lt;/div&gt;\n                    &lt;/div&gt;\n                  &lt;/figcaption&gt;\n                &lt;/figure&gt;\n              &lt;/a&gt;\n            &lt;/li&gt;\n            &lt;% end %&gt;\n            &lt;!-- end portfolio item --&gt;\n          &lt;/ul&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/section&gt;\n&lt;!-- end portfolio section --&gt;\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1546432320, "post_id": 54006295, "comment_id": 94849329, "body": "It would be helpful, if you could explain <i>precisely</i> what is unclear to you about the documentation of <code>Module#alias_method</code>. That way, the Ruby developers can improve the documentation so that future developers don&#39;t have the same problems you have. Also, it saves time and effort for people answering your question, so that they don&#39;t repeat things you already know, or repeat explanations that you don&#39;t understand. And lastly, it would help if you can check that your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> really <i>is</i> minimal. Are you absolutely certain that your problem cannot possibly be replicated in less than 25 lines?"}, {"owner": {"reputation": 37, "user_id": 10840651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hKJ9y.jpg?s=128&g=1", "display_name": "Luiz Melo", "link": "https://stackoverflow.com/users/10840651/luiz-melo"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1546435071, "post_id": 54006295, "comment_id": 94850656, "body": "Thank you for your input, I will certainly keep this in mind in the future. I got confused about when to use one or the other regarding lexical scope, which I did not see in the documentation (there is only one example and it is not clear at all). I found this blog post about the topic and found it to be really helpful : <a href=\"https://blog.bigbinary.com/2012/01/08/alias-vs-alias-method.html\" rel=\"nofollow noreferrer\">blog.bigbinary.com/2012/01/08/alias-vs-alias-method.html</a>  My intention is to help other beginners (like myself) that face the same doubt in the future."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546462366, "post_id": 54006295, "comment_id": 94862908, "body": "Google &quot;Ruby alais vs. alais method&quot; and you will get plenty of hits that will tell you all you need to know about that, and much more."}], "answers": [{"comments": [{"owner": {"reputation": 10805, "user_id": 262956, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7515cb5c8df2d07f6d3780346ec0da92?s=128&d=identicon&r=PG", "display_name": "vise", "link": "https://stackoverflow.com/users/262956/vise"}, "edited": false, "score": 0, "creation_date": 1546434197, "post_id": 54006563, "comment_id": 94850272, "body": "The reason that alias_method can be overwritten is because it creates a copy of the method. In your example of <code>alias_method :read, :byte_content</code> the content of the read method should be <code>@byte_content</code>."}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "reply_to_user": {"reputation": 10805, "user_id": 262956, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7515cb5c8df2d07f6d3780346ec0da92?s=128&d=identicon&r=PG", "display_name": "vise", "link": "https://stackoverflow.com/users/262956/vise"}, "edited": false, "score": 1, "creation_date": 1546434657, "post_id": 54006563, "comment_id": 94850463, "body": "@vise Updated the answer to mention the copying."}, {"owner": {"reputation": 37, "user_id": 10840651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hKJ9y.jpg?s=128&g=1", "display_name": "Luiz Melo", "link": "https://stackoverflow.com/users/10840651/luiz-melo"}, "edited": false, "score": 0, "creation_date": 1546435209, "post_id": 54006563, "comment_id": 94850724, "body": "That was extremely helpful. Thank you!"}], "tags": [], "owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "is_accepted": true, "score": 4, "last_activity_date": 1546435439, "last_edit_date": 1546435439, "creation_date": 1546432786, "answer_id": 54006563, "question_id": 54006295, "link": "https://stackoverflow.com/questions/54006295/ruby-alias-alias-method-confusion/54006563#54006563", "title": "Ruby alias alias_method confusion", "body": "<p>This:</p>\n\n<pre><code>attr_accessor :byte_content\n</code></pre>\n\n<p>Essentially does:</p>\n\n<pre><code>def byte_content\n  @byte_content\nend \n\ndef byte_content=(value)\n  @byte_content = value\nend\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>alias_method :read, :byte_content\nalias_method :write, :byte_content=\n</code></pre>\n\n<p>will create copies of the <code>byte_content</code> and <code>byte_content=</code> methods with <code>read</code> and <code>write</code> as the new names . If you modify the <code>byte_content</code> or <code>byte_content=</code> methods after the aliasing, the <code>read</code> and <code>write</code> will remain unchanged.</p>\n\n<p>So, the intention of the <code>alias_method</code> in the example appears to be to give the user a more \"<code>File</code>-like\" interface. Without the method aliases, you would use:</p>\n\n<pre><code>file = MyFile.new\nfile.byte_content = \"abcd\"\nputs file.byte_content\n</code></pre>\n\n<p>With the aliases, the user can use:</p>\n\n<pre><code>file = MyFile.new\nfile.write(\"abcd\")\nfile.read\n</code></pre>\n\n<p>Which is quite similar to the methods of the standard library <code>File</code> class, </p>\n\n<pre><code>file = File.open('/tmp/foo.txt', 'w')\nfile.write('hello')\nfile.rewind\nputs file.read\n</code></pre>\n\n<p>And this makes it possible to use instances of <code>MyFile</code> in place of real <code>File</code> instances in some very simple use-cases, also known as <a href=\"https://en.wikipedia.org/wiki/Duck_typing\" rel=\"nofollow noreferrer\">Duck-typing</a>.</p>\n\n<h3><code>alias</code> vs <code>alias_method</code></h3>\n\n<p>The differences of <code>alias</code> and <code>alias_method</code> are described in the answers to <a href=\"https://stackoverflow.com/q/4763121/681520\">this question</a>, most imporantly:</p>\n\n<ul>\n<li>you can override <code>alias_method</code> but not <code>alias</code></li>\n<li><code>alias_method</code> is used with symbols as the method names, making it useful for dynamically created methods</li>\n</ul>\n"}], "owner": {"reputation": 37, "user_id": 10840651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hKJ9y.jpg?s=128&g=1", "display_name": "Luiz Melo", "link": "https://stackoverflow.com/users/10840651/luiz-melo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 54006563, "answer_count": 1, "score": 1, "last_activity_date": 1546435439, "creation_date": 1546431640, "last_edit_date": 1546433223, "question_id": 54006295, "link": "https://stackoverflow.com/questions/54006295/ruby-alias-alias-method-confusion", "title": "Ruby alias alias_method confusion", "body": "<p>I have this piece of code here:</p>\n\n<pre><code>class MyFile\n  attr_accessor :byte_content\n\n  alias_method :read,  :byte_content\n  alias_method :write, :byte_content=\nend\n</code></pre>\n\n<p>On the class <code>MyFile</code> there is an <code>alias_method</code>, but I do not understand how this method is working. Does it change the way the getter and setter for <code>:byte_content</code> are called?</p>\n\n<p>Also, what is the difference between this method and just using <code>alias</code>? When should I one over the other?</p>\n\n<p>Thanks in advance for your time!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "rubygems"], "comments": [{"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1546430113, "post_id": 54005829, "comment_id": 94848352, "body": "active_for_authentication?  should be public, did you put it in private ?"}, {"owner": {"reputation": 43, "user_id": 7781171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a3a04a957ef3aadfda6644eeacbe545?s=128&d=identicon&r=PG&f=1", "display_name": "SARR", "link": "https://stackoverflow.com/users/7781171/sarr"}, "reply_to_user": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 1, "creation_date": 1546430364, "post_id": 54005829, "comment_id": 94848457, "body": "oufff thanks, it wasn&#39;t public. have a nice day"}], "answers": [{"tags": [], "owner": {"reputation": 920, "user_id": 3512189, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/hXdNN.jpg?s=128&g=1", "display_name": "wasipeer", "link": "https://stackoverflow.com/users/3512189/wasipeer"}, "is_accepted": true, "score": 1, "last_activity_date": 1546431767, "creation_date": 1546431767, "answer_id": 54006325, "question_id": 54005829, "link": "https://stackoverflow.com/questions/54005829/private-method-active-for-authentication-called-for-user0x00007f2d0e04d3e0/54006325#54006325", "title": "private method `active_for_authentication?&#39; called for #&lt;User:0x00007f2d0e04d3e0&gt;", "body": "<p>You have defined it into the private methods section. Make it public.</p>\n"}], "owner": {"reputation": 43, "user_id": 7781171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a3a04a957ef3aadfda6644eeacbe545?s=128&d=identicon&r=PG&f=1", "display_name": "SARR", "link": "https://stackoverflow.com/users/7781171/sarr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 54006325, "answer_count": 1, "score": 0, "last_activity_date": 1546431767, "creation_date": 1546429799, "last_edit_date": 1546430088, "question_id": 54005829, "link": "https://stackoverflow.com/questions/54005829/private-method-active-for-authentication-called-for-user0x00007f2d0e04d3e0", "title": "private method `active_for_authentication?&#39; called for #&lt;User:0x00007f2d0e04d3e0&gt;", "body": "<p>After signup i have this error:</p>\n\n<blockquote>\n  <p><code>NoMethodError</code> in <code>RegistrationsController#create</code><br>\n  private method <code>'active_for_authentication?'</code> called for <code>&lt;User:0x00007f2d0e04d3e0&gt;</code></p>\n</blockquote>\n\n<pre><code>**Extracted source (around line #430):**\n\n428 def method_missing(method, *args, &amp;block)\n429 if respond_to_without_attributes?(method, true)\n430    super\n431 else\n432  match = match_attribute_method?(method.to_s)\n434  match ? attribute_missing(match, *args, &amp;block) : super\n</code></pre>\n\n<p>in my user model i have:</p>\n\n<pre><code>def active_for_authentication? \n super &amp;&amp; approved? \nend \n\ndef inactive_message \n approved? ? super : :not_approved\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "activeadmin"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1546421101, "post_id": 54003858, "comment_id": 94844425, "body": "See <a href=\"https://github.com/activeadmin/activeadmin/issues/915\" rel=\"nofollow noreferrer\">here</a>."}], "answers": [{"comments": [{"owner": {"reputation": 685, "user_id": 4899057, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ocrp7ClEgE0/AAAAAAAAAAI/AAAAAAAAAGc/ZRb4SBwuPWw/photo.jpg?sz=128", "display_name": "Evan Ross", "link": "https://stackoverflow.com/users/4899057/evan-ross"}, "edited": false, "score": 3, "creation_date": 1546422599, "post_id": 54003935, "comment_id": 94845087, "body": "Thanks! It works fine inside <code>pre</code> tag: <code>pre JSON.pretty_generate(JSON.parse(model.source_json))</code>"}, {"owner": {"reputation": 890, "user_id": 1435116, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e8d8f792c2beb8c405080649d1e19fc?s=128&d=identicon&r=PG", "display_name": "Adeynack", "link": "https://stackoverflow.com/users/1435116/adeynack"}, "reply_to_user": {"reputation": 685, "user_id": 4899057, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ocrp7ClEgE0/AAAAAAAAAAI/AAAAAAAAAGc/ZRb4SBwuPWw/photo.jpg?sz=128", "display_name": "Evan Ross", "link": "https://stackoverflow.com/users/4899057/evan-ross"}, "edited": false, "score": 0, "creation_date": 1612797196, "post_id": 54003935, "comment_id": 116871750, "body": "@EvanRoss: How do you achieve the <code>pre</code> tag?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 890, "user_id": 1435116, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e8d8f792c2beb8c405080649d1e19fc?s=128&d=identicon&r=PG", "display_name": "Adeynack", "link": "https://stackoverflow.com/users/1435116/adeynack"}, "edited": false, "score": 1, "creation_date": 1612797722, "post_id": 54003935, "comment_id": 116872017, "body": "@Adeynack Please see my updated answer."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 7, "last_activity_date": 1612797616, "last_edit_date": 1612797616, "creation_date": 1546421363, "answer_id": 54003935, "question_id": 54003858, "link": "https://stackoverflow.com/questions/54003858/how-can-i-prettify-json-output-for-activeadmin/54003935#54003935", "title": "How can I prettify json output for ActiveAdmin?", "body": "<p>I would go with something like this:</p>\n<pre><code>show do\n  attributes_table do\n    row :source_json do |model|\n      JSON.pretty_generate(JSON.parse(model.source_json))\n    end\n  end\nend\n</code></pre>\n<p>You might not need the <code>JSON.parse</code> call if you have an option to get <code>source</code> as a Ruby hash instead of a JSON string.</p>\n<p>You might want to wrap the output into a <code>&lt;pre&gt;</code> HTML tag \u2013 like Evan Ross suggested \u2013 to improve readability:</p>\n<pre><code>show do\n  attributes_table do\n    row :source_json do |model|\n      tag.pre JSON.pretty_generate(JSON.parse(model.source_json))\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 685, "user_id": 4899057, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ocrp7ClEgE0/AAAAAAAAAAI/AAAAAAAAAGc/ZRb4SBwuPWw/photo.jpg?sz=128", "display_name": "Evan Ross", "link": "https://stackoverflow.com/users/4899057/evan-ross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1371, "favorite_count": 0, "accepted_answer_id": 54003935, "answer_count": 1, "score": 2, "last_activity_date": 1612797616, "creation_date": 1546420961, "question_id": 54003858, "link": "https://stackoverflow.com/questions/54003858/how-can-i-prettify-json-output-for-activeadmin", "title": "How can I prettify json output for ActiveAdmin?", "body": "<p>I have a model with json field and I want to prettify the output for this field. How can I do it?</p>\n\n<pre><code>show do\n  attributes_table do\n    row :source_json do |model|\n      model.source_json\n    end\n  end\nend\n</code></pre>\n\n<p>Current field looks like this:</p>\n\n<pre><code>  {\"date\"=&gt;\"2018-12-17\", \"value\"=&gt;\"sample\"}\n</code></pre>\n\n<p>I want something like this:</p>\n\n<pre><code>  {\n     \"date\"=&gt;\"2018-12-17\",\n     \"value\"=&gt;\"sample\"\n  }\n</code></pre>\n"}, {"tags": ["html", "ruby", "haml"], "comments": [{"owner": {"reputation": 2642, "user_id": 9718056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/40NGR.png?s=128&g=1", "display_name": "Arkellys", "link": "https://stackoverflow.com/users/9718056/arkellys"}, "edited": false, "score": 2, "creation_date": 1546415744, "post_id": 54002853, "comment_id": 94842488, "body": "Just click on &quot;View Compiled&quot; below the snippet and you will get the <code>HTML</code> code"}, {"owner": {"reputation": 128254, "user_id": 13508, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c9e1d852b4d287027fe76f794e506878?s=128&d=identicon&r=PG", "display_name": "&#193;lvaro Gonz&#225;lez", "link": "https://stackoverflow.com/users/13508/%c3%81lvaro-gonz%c3%a1lez"}, "edited": false, "score": 0, "creation_date": 1546416042, "post_id": 54002853, "comment_id": 94842574, "body": "You are not meant to create CSS manually, that&#39;s not how SASS works."}], "answers": [{"tags": [], "owner": {"reputation": 385, "user_id": 10425871, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HuZvA2kRuwI/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVBaUsvwAV5j5Jhi_JkVzd9ugat5A/mo/photo.jpg?sz=128", "display_name": "Gaurav Rana", "link": "https://stackoverflow.com/users/10425871/gaurav-rana"}, "is_accepted": true, "score": 1, "last_activity_date": 1546416018, "creation_date": 1546416018, "answer_id": 54003024, "question_id": 54002853, "link": "https://stackoverflow.com/questions/54002853/convert-haml-code-to-normal-html-and-code/54003024#54003024", "title": "Convert HAML code to normal HTML and code", "body": "<p>Here is the compiled version.</p>\n\n<pre><code>&lt;div class='wrap'&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n  &lt;div class='c'&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 9483695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1b981ba405da46149bc5a36c541fc34?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/9483695/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 54003024, "answer_count": 1, "score": 4, "last_activity_date": 1581309212, "creation_date": 1546415081, "last_edit_date": 1581309212, "question_id": 54002853, "link": "https://stackoverflow.com/questions/54002853/convert-haml-code-to-normal-html-and-code", "title": "Convert HAML code to normal HTML and code", "body": "<p>I am trying to implement a CSS globe style which I found from this link: <a href=\"https://speckyboy.com/particle-animation-code-snippets/\" rel=\"nofollow noreferrer\">https://speckyboy.com/particle-animation-code-snippets/</a> (Particle Orb CSS by Nate Wiley) style. </p>\n\n<p>Here you can see that they are using SCSS code. I have converted that SCSS code CSS code. Now they also used following code in HTML portion:</p>\n\n<pre><code>%div.wrap\n  -300.times do\n    %div.c\n</code></pre>\n\n<p>How can I convert that code into normal HTML?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1546407253, "post_id": 54001419, "comment_id": 94840060, "body": "Upvoting, but remind him that jobs do get deleted once completed, so need to confirm whether invoices are dependent destroyed with jobs?"}], "tags": [], "owner": {"reputation": 6165, "user_id": 2697183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65255fe741b95ba0c641d96ea6750ea9?s=128&d=identicon&r=PG&f=1", "display_name": "AbM", "link": "https://stackoverflow.com/users/2697183/abm"}, "is_accepted": true, "score": 2, "last_activity_date": 1546405248, "creation_date": 1546405248, "answer_id": 54001419, "question_id": 54001338, "link": "https://stackoverflow.com/questions/54001338/increment-invoices-number-in-rails/54001419#54001419", "title": "Increment Invoices number in Rails", "body": "<p>Change the name of your method since it is overriding the attribute name (the way you have it, when you call <code>invoice.invoice_number</code>, it is invoking the method and returning <code>Invoice.maximum(\"invoice_number\") + 1</code> instead of the attribute stored in the database):</p>\n\n<pre><code>before_create :set_invoice_number\n\ndef set_invoice_number\n  self.invoice_number = self.user.invoices.maximum(\"invoice_number\") + 1\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 6, "last_activity_date": 1546424924, "last_edit_date": 1546424924, "creation_date": 1546416991, "answer_id": 54003166, "question_id": 54001338, "link": "https://stackoverflow.com/questions/54001338/increment-invoices-number-in-rails/54003166#54003166", "title": "Increment Invoices number in Rails", "body": "<p>While AbM's answer is correct, I think in this case it is important to add uniques validation too:</p>\n\n<pre><code># in your invoice model:\nvalidates :invoice_number, uniqueness: { scope: :user }\n\nbefore_validation :generate_invoice_number\n\nprivate\ndef generate_invoice_number\n  self.invoice_number = user.invoices.maximum(:invoice_number).next\nend\n</code></pre>\n\n<p>Furthermore, I would add a database constraint to ensure that these numbers are unique per user even in the unlikely event of a race-condition:</p>\n\n<pre><code>add_index :invoices, [:user_id, :invoice_number], unique: true\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 9255392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XM7oB.jpg?s=128&g=1", "display_name": "ovi_tsb", "link": "https://stackoverflow.com/users/9255392/ovi-tsb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 587, "favorite_count": 0, "accepted_answer_id": 54001419, "answer_count": 2, "score": 1, "last_activity_date": 1546424924, "creation_date": 1546404585, "last_edit_date": 1546411752, "question_id": 54001338, "link": "https://stackoverflow.com/questions/54001338/increment-invoices-number-in-rails", "title": "Increment Invoices number in Rails", "body": "<p>I have <code>User</code>, <code>Job</code> and <code>Invoice</code> models. Every user can create their own jobs and every job have an invoice. Now I need User 1 to have invoice 1, invoice 2 ..... etc   and User 2 to have invoice 1, invoice 2.... etc. So I can't use the id.</p>\n\n<p>Now in <code>invoices</code> table I have <code>invoice_number</code> (integer) column. How can I increment this invoice_number?</p>\n\n<p>I tried with <code>before_create :invoice_number</code> and</p>\n\n<pre><code>def invoice_number\n  self.invoice_number = Invoice.maximum(\"invoice_number\") + 1\nend\n</code></pre>\n\n<p>But I have the same number for all invoices.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 973, "user_id": 9989384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/530602201f9551563176b0b648b7d50b?s=128&d=identicon&r=PG&f=1", "display_name": "Cryptex Technologies", "link": "https://stackoverflow.com/users/9989384/cryptex-technologies"}, "edited": false, "score": 0, "creation_date": 1546408117, "post_id": 54001284, "comment_id": 94840301, "body": "What problem you are facing you are using the right syntax please specify the error or used the debugger for debugg your application"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1546440096, "post_id": 54001284, "comment_id": 94853103, "body": "Please show the log file entries for the login attempt and the following redirect. How did you configure Rails to store the session? How do you know the session is not saved? Is there an error?"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10855987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f21d1e568ed28f514e17cfe100c2f0f8?s=128&d=identicon&r=PG&f=1", "display_name": "yhtr", "link": "https://stackoverflow.com/users/10855987/yhtr"}, "edited": false, "score": 0, "creation_date": 1546406771, "post_id": 54001437, "comment_id": 94839965, "body": "i am not using it"}, {"owner": {"reputation": 44, "user_id": 7511701, "user_type": "registered", "profile_image": "https://graph.facebook.com/1393020227374737/picture?type=large", "display_name": "Vikas Verma", "link": "https://stackoverflow.com/users/7511701/vikas-verma"}, "reply_to_user": {"reputation": 21, "user_id": 10855987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f21d1e568ed28f514e17cfe100c2f0f8?s=128&d=identicon&r=PG&f=1", "display_name": "yhtr", "link": "https://stackoverflow.com/users/10855987/yhtr"}, "edited": false, "score": 0, "creation_date": 1546407703, "post_id": 54001437, "comment_id": 94840173, "body": "then you must use this gem <a href=\"https://github.com/rails/activerecord-session_store\" rel=\"nofollow noreferrer\">github.com/rails/activerecord-session_store</a>, It will allow you to  save session in a table"}], "tags": [], "owner": {"reputation": 44, "user_id": 7511701, "user_type": "registered", "profile_image": "https://graph.facebook.com/1393020227374737/picture?type=large", "display_name": "Vikas Verma", "link": "https://stackoverflow.com/users/7511701/vikas-verma"}, "is_accepted": false, "score": 0, "last_activity_date": 1546405358, "creation_date": 1546405358, "answer_id": 54001437, "question_id": 54001284, "link": "https://stackoverflow.com/questions/54001284/rails-will-not-set-sessions/54001437#54001437", "title": "Rails will not set sessions", "body": "<p>i assume that you are using activerecord-session_store gem for storing sessions in a table.</p>\n\n<p>add this in initializers/session_store.rb</p>\n\n<pre><code>require \"action_dispatch/session/active_record_store\"\n\nRails.application.config.session_store :active_record_store, :key =&gt; \n '_lotuspay_session'\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10855987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f21d1e568ed28f514e17cfe100c2f0f8?s=128&d=identicon&r=PG&f=1", "display_name": "yhtr", "link": "https://stackoverflow.com/users/10855987/yhtr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546440167, "creation_date": 1546404253, "last_edit_date": 1546440167, "question_id": 54001284, "link": "https://stackoverflow.com/questions/54001284/rails-will-not-set-sessions", "title": "Rails will not set sessions", "body": "<p>I have a login form that is supposed to create a session upon submission of correct credentials, however the sessions are not saving. What is causing this?</p>\n\n<p>sessions_controller:</p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n  def new\n  end\n\n  def create\n    @user = User.find_by_username(params[:session][:username])\n    if @user &amp;&amp; @user.authenticate(params[:session][:password])\n      session[:id] = @user.id\n      redirect_to '/posts'\n    else\n      session[:id] = nil\n      flash[:warning] = \"Failed login- try again\"\n      redirect_to '/login'\n    end \n  end\n\n  def destroy\n    session[:user_id] = nil \n    redirect_to login_path \n  end\nend\n</code></pre>\n\n<p>Migration:</p>\n\n<pre><code>class CreateSessions &lt; ActiveRecord::Migration[5.2]\n  def change\n    create_table :sessions do |t|\n\n      t.integer :session_id\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "perl"], "comments": [{"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 2, "creation_date": 1546403657, "post_id": 54001142, "comment_id": 94839293, "body": "See <a href=\"https://gist.github.com/SaswatPadhi/2872457\" rel=\"nofollow noreferrer\">PHP + Perl + Python + Ruby + C + C++ - polyglot</a>."}, {"owner": {"reputation": 320781, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1546489848, "post_id": 54001142, "comment_id": 94869454, "body": "The name of the language is Perl, not PERL. It&#39;s not an acronym"}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 6, "last_activity_date": 1546405899, "creation_date": 1546405899, "answer_id": 54001493, "question_id": 54001142, "link": "https://stackoverflow.com/questions/54001142/is-it-possible-to-run-a-program-as-both-ruby-and-perl/54001493#54001493", "title": "Is it possible to run a program as both Ruby and PERL?", "body": "<p>Yes. This kind of program is called a <a href=\"https://codegolf.stackexchange.com/questions/7261/write-a-polyglot-that-prints-the-languages-name/7280#7280\">polyglot</a>. For Perl and Ruby, one useful insight is that <a href=\"https://ruby-doc.org/core-2.1.1/doc/globals_rdoc.html\" rel=\"noreferrer\"><code>$stdin</code> is a defined, initialized variable in Ruby</a></p>\n\n<pre><code>print $stdin ? \"This is a Ruby program\" : \"This is a Perl program\";\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 8351150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71c931b8b919aeaa81f2d3995a0160cd?s=128&d=identicon&r=PG&f=1", "display_name": "Kuais", "link": "https://stackoverflow.com/users/8351150/kuais"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 3, "accepted_answer_id": 54001493, "answer_count": 1, "score": 1, "last_activity_date": 1546405899, "creation_date": 1546402752, "question_id": 54001142, "link": "https://stackoverflow.com/questions/54001142/is-it-possible-to-run-a-program-as-both-ruby-and-perl", "title": "Is it possible to run a program as both Ruby and PERL?", "body": "<p>Is it possible to run a program as both Ruby and PERL. If so, are you able to detect the change and print something like \"This is a perl program\" for perl compiler and \"This is a Ruby program\" for a ruby compiler</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "omniauth", "omniauth-twitter"], "answers": [{"tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1546587774, "creation_date": 1546587774, "answer_id": 54034864, "question_id": 54000942, "link": "https://stackoverflow.com/questions/54000942/authentication-failure-invalid-credentials-oauthunauthorized-401-authorizat/54034864#54034864", "title": "Authentication failure! invalid_credentials: OAuth::Unauthorized, 401 Authorization Required", "body": "<p>Assuming you using gem <code>devise</code>, <code>omniauth-oauth2</code> &amp; <code>omniauth-twitter</code>,</p>\n\n<p>Check your API key and API secret provided in your rails app whether it matches from your registered a Twitter app. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10358924"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 441, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546600835, "creation_date": 1546400244, "last_edit_date": 1546600835, "question_id": 54000942, "link": "https://stackoverflow.com/questions/54000942/authentication-failure-invalid-credentials-oauthunauthorized-401-authorizat", "title": "Authentication failure! invalid_credentials: OAuth::Unauthorized, 401 Authorization Required", "body": "<p>I want to create Twitter login function,but error is occured.</p>\n\n<p>My error is</p>\n\n<pre><code>Authentication failure! invalid_credentials: OAuth::Unauthorized, 401 Authorization Required\nProcessing by Users::OmniauthCallbacksController#failure as HTML\n  Parameters: {\"oauth_token\"=&gt;\"OFSEOwAAAAAA9LdUAAABaAyY_Uc\", \"oauth_verifier\"=&gt;\"hogehogehoge\"}\nRedirected to http://localhost:3000/\n</code></pre>\n\n<p>initializers/omniauth.rb</p>\n\n<pre><code>Rails.application.config.middleware.use OmniAuth::Builder do\n  provider :twitter, 'agfrfgagfkfuauR1U8Busfd4KAiq', 'djkjsgkjgkasjkdfjskajfkjdskfjsk'\nend\n</code></pre>\n\n<p>initializers/divise.rb</p>\n\n<pre><code> config.omniauth :twitter, ENV['TWITTER_API_KEY'], ENV['TWITTER_API_SECRET'], scope: 'email', oauth_callback: \"#{ENV['HOST']}/users/auth/twitter/callback\"\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code> devise_for controllers: { registrations: \"registrations\", omniauth_callbacks: 'users/omniauth_callbacks' }\n</code></pre>\n\n<p>controllers/users/ominiauth.rb</p>\n\n<pre><code>class Users::OmniauthCallbacksController &lt; Devise::OmniauthCallbacksController\n\n  # callback for twitter\n  def twitter\n    callback_for(:twitter)\n  end\n\n  def callback_for(provider)\n    @user = User.from_omniauth(request.env[\"omniauth.auth\"])\n    if @user.persisted?\n      sign_in_and_redirect @user, event: :authentication #this will throw if @user is not activated\n      set_flash_message(:notice, :success, kind: \"#{provider}\".capitalize) if is_navigational_format?\n    else\n      session[\"devise.#{provider}_data\"] = request.env[\"omniauth.auth\"].except(\"extra\")\n      redirect_to new_user_registration_url\n    end\n  end\n\n  def failure\n    redirect_to root_path\n  end\nend\n</code></pre>\n\n<p>model/user.rb</p>\n\n<pre><code>devise :omniauthable, omniauth_providers: %i[twitter]\n  def self.from_omniauth(auth)\n    where(provider: auth.provider, uid: auth.uid).first_or_create do |user|\n      user.email = auth.info.email\n      user.password = Devise.friendly_token[0,20]\n    end\n  end\n</code></pre>\n\n<p>Please teach me a hint!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1546404482, "post_id": 54000302, "comment_id": 94839465, "body": "It appears to me that you have a string (possibly read from a file, but that doesn&#39;t matter) and you wish to extract something from the string. If so, what do you want to extract? You need to tell us for your example (by editing your question). If I am correct, you should not assume that particular methods (e.g., <code>split</code>) are needed. Just say what you want  to achieve. This may be what&#39;s sometimes called an <a href=\"https://en.wikipedia.org/wiki/XY_problem\" rel=\"nofollow noreferrer\">&quot;X-Y Problem&quot;</a>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1546435582, "post_id": 54000302, "comment_id": 94850909, "body": "Is <code>&quot;--NAME: &quot;</code> actually a <i>delimiter</i>? To me it looks more like a prefix / label."}], "answers": [{"tags": [], "owner": {"reputation": 172, "user_id": 1606830, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5f6c688bdf74ac78266cbdda4463d77c?s=128&d=identicon&r=PG", "display_name": "Saraswathy Renuga", "link": "https://stackoverflow.com/users/1606830/saraswathy-renuga"}, "is_accepted": false, "score": 1, "last_activity_date": 1546397082, "creation_date": 1546397082, "answer_id": 54000653, "question_id": 54000302, "link": "https://stackoverflow.com/questions/54000302/how-to-convert-an-array-to-a-string-after-split-function/54000653#54000653", "title": "how to convert an array to a string after split function", "body": "<p>you can use '<a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-join\" rel=\"nofollow noreferrer\">join</a>' to convert the array to string. </p>\n\n<p>With your example, I used 'join' to get string seperated by comma and used 'reject' to remove empty strings if any.</p>\n\n<pre><code>example = \"--NAME: John Doe\"\nvalue = example.split(\"--NAME: \")\nputs value\n</code></pre>\n\n<blockquote>\n  <p>[\"\", \"John Doe\"]</p>\n</blockquote>\n\n<pre><code>puts value.reject(&amp;:blank?).join(\",\")\n</code></pre>\n\n<blockquote>\n  <p>\"John Doe\"</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1840, "user_id": 202224, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/EY43q.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/202224/david"}, "is_accepted": false, "score": 0, "last_activity_date": 1546400719, "creation_date": 1546400719, "answer_id": 54000978, "question_id": 54000302, "link": "https://stackoverflow.com/questions/54000302/how-to-convert-an-array-to-a-string-after-split-function/54000978#54000978", "title": "how to convert an array to a string after split function", "body": "<p>Perhaps <code>split()</code> isn't the right tool for your needs?</p>\n\n<p>If you just want to remove the prompt you could try <code>gsub()</code> (<a href=\"https://ruby-doc.org/core-2.4.1/String.html#method-i-gsub\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.4.1/String.html#method-i-gsub</a>). <code>gsub()</code> stands for \"global substitution\" and in other languages it is often known as <code>replace()</code>.</p>\n\n<p><code>example.gsub(\"--NAME: \", \"\")</code></p>\n\n<p>Will replace the prompt with an empty string and give you:</p>\n\n<blockquote>\n  <p>\"John Doe\"</p>\n</blockquote>\n\n<p>(a String)</p>\n"}, {"tags": [], "owner": {"reputation": 1528, "user_id": 1616697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pwa5t.jpg?s=128&g=1", "display_name": "Lahiru", "link": "https://stackoverflow.com/users/1616697/lahiru"}, "is_accepted": false, "score": 0, "last_activity_date": 1546402331, "last_edit_date": 1546402331, "creation_date": 1546401944, "answer_id": 54001070, "question_id": 54000302, "link": "https://stackoverflow.com/questions/54000302/how-to-convert-an-array-to-a-string-after-split-function/54001070#54001070", "title": "how to convert an array to a string after split function", "body": "<p>Simply sub-string your string:</p>\n\n<pre><code>example = \"--NAME: John Doe\"\n\nexample[8..-1]\n\n#=&gt; \"John Doe\"\n</code></pre>\n\n<p>While <code>8</code> indicates the start position and <code>-1</code> indicates that the substring should be ended with the last character of the <code>example</code> string since the length of the <code>NAME</code> is a variable.</p>\n"}, {"tags": [], "owner": {"reputation": 5470, "user_id": 2052097, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KOzAT.jpg?s=128&g=1", "display_name": "z atef", "link": "https://stackoverflow.com/users/2052097/z-atef"}, "is_accepted": false, "score": 1, "last_activity_date": 1546403260, "last_edit_date": 1546403260, "creation_date": 1546402905, "answer_id": 54001161, "question_id": 54000302, "link": "https://stackoverflow.com/questions/54000302/how-to-convert-an-array-to-a-string-after-split-function/54001161#54001161", "title": "how to convert an array to a string after split function", "body": "<p><code>(?&lt;=--NAME:)</code> Positive lookbehind assertion: ensures that the preceding characters match --NAME:, but doesn't include those characters in the matched text</p>\n\n<p><code>Strip!</code> to remove leading or trailing spaces in place. </p>\n\n<pre><code>irb(main):018:0&gt;\"--NAME: John Doe\"[/(?&lt;=--NAME:).*$/].strip!\n</code></pre>\n\n<p>Step by step: </p>\n\n<pre><code>irb(main):026:0&gt; exampel = \"--NAME: John Doe\"\n=&gt; \"--NAME: John Doe\"\nirb(main):027:0&gt; example = exampel[/(?&lt;=--NAME:).*$/].strip!\n=&gt; \"John Doe\"\nirb(main):028:0&gt; example\n=&gt; \"John Doe\"\nirb(main):029:0&gt; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1546407584, "creation_date": 1546407584, "answer_id": 54001706, "question_id": 54000302, "link": "https://stackoverflow.com/questions/54000302/how-to-convert-an-array-to-a-string-after-split-function/54001706#54001706", "title": "how to convert an array to a string after split function", "body": "<p>If you are getting your <code>example</code> string in same formats everytime,</p>\n\n<pre><code>example.split(' ', 2).last\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 0, "last_activity_date": 1546409097, "creation_date": 1546409097, "answer_id": 54001929, "question_id": 54000302, "link": "https://stackoverflow.com/questions/54000302/how-to-convert-an-array-to-a-string-after-split-function/54001929#54001929", "title": "how to convert an array to a string after split function", "body": "<pre><code>&gt; value = example.split(\"--NAME: \")\n#=&gt; [\"\", \"John Doe\"]\n&gt; value.join.strip\n#=&gt; \"John Doe\" \n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 10807822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a51a803348082b39b41410fbd549742a?s=128&d=identicon&r=PG&f=1", "display_name": "philly_mcv", "link": "https://stackoverflow.com/users/10807822/philly-mcv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 1, "answer_count": 6, "score": 0, "last_activity_date": 1546409097, "creation_date": 1546392916, "last_edit_date": 1546408839, "question_id": 54000302, "link": "https://stackoverflow.com/questions/54000302/how-to-convert-an-array-to-a-string-after-split-function", "title": "how to convert an array to a string after split function", "body": "<p>I'm trying to convert the return value of the <code>.split()</code> function into a string.</p>\n\n<p>There is a string of characters that is being parsed from a text file, and I need to change it from an array to a string. </p>\n\n<p>After calling the split function, the result is an array, however, I need it to be a string to perform character operations and functions.</p>\n\n<pre><code>example = \"--NAME: John Doe\"\nprint example\nvalue = example.split(\"--NAME: \")\nprint value.class\nvalue.to_s.strip\nprint value\nprint value.class\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1546413496, "post_id": 54000243, "comment_id": 94841879, "body": "Your question is very unclear. You say that &quot;you solve the problem&quot;, so why are you asking this question if the problem is solved?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1546418352, "post_id": 54000243, "comment_id": 94843345, "body": "Also, so you say that you have a problem with Ruby&#39;s grammar, but I don&#39;t see any syntactical problems in your code."}], "answers": [{"comments": [{"owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "edited": false, "score": 1, "creation_date": 1546408488, "post_id": 54001056, "comment_id": 94840386, "body": "<code>to_i</code> is needed"}, {"owner": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "reply_to_user": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "edited": false, "score": 0, "creation_date": 1546408827, "post_id": 54001056, "comment_id": 94840459, "body": "@Santhosh  Updated. Thanks :)"}], "tags": [], "owner": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "is_accepted": true, "score": 1, "last_activity_date": 1546412657, "last_edit_date": 1546412657, "creation_date": 1546401733, "answer_id": 54001056, "question_id": 54000243, "link": "https://stackoverflow.com/questions/54000243/ruby-grammar-problem-i-dont-know-how-to-solve-it/54001056#54001056", "title": "Ruby grammar problem . I don&#39;t know how to solve it", "body": "<p>Add <code>split</code> to the chopped gets would work:</p>\n\n<pre><code>input_lines = gets.chop.split\na = input_lines[0].to_i\nb = input_lines[1].to_i\n\nputs a + b\n</code></pre>\n\n<p>Try it.<br>\nCheck <a href=\"https://ruby-doc.org/core-2.4.1/String.html\" rel=\"nofollow noreferrer\">String doc.</a></p>\n\n<p>More DRY way to do it:  </p>\n\n<pre><code>input_lines = gets.chop.split.map(&amp;:to_i)\na,b = input_lines\n\nputs a + b\n</code></pre>\n\n<p>In this case the numbers inside <code>input_lines</code> already changed to Integers.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10358924"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "closed_date": 1546423931, "accepted_answer_id": 54001056, "answer_count": 1, "score": 0, "last_activity_date": 1546587117, "creation_date": 1546392251, "last_edit_date": 1546587117, "question_id": 54000243, "link": "https://stackoverflow.com/questions/54000243/ruby-grammar-problem-i-dont-know-how-to-solve-it", "closed_reason": "Needs details or clarity", "title": "Ruby grammar problem . I don&#39;t know how to solve it", "body": "<pre><code>Please output the number obtained by adding a and b.\n\nAt the end of the line break, do not include extra characters, blank lines.\n\nexpmple1\n1 1\n\nresult1\n2\n\nexpmple2\n0 99\n\nresult2\n99\n</code></pre>\n\n<p>My code is:</p>\n\n<pre><code>input_lines = gets.chop\na = input_lines[0]\nb = input_lines[1]\n\nputs a + b\n</code></pre>\n\n<p>But it's not working, please help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "group-by", "sum"], "comments": [{"owner": {"reputation": 1410, "user_id": 1507845, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9daba84d2a161462310fe5a0eb3ab53c?s=128&d=identicon&r=PG", "display_name": "XML Slayer", "link": "https://stackoverflow.com/users/1507845/xml-slayer"}, "edited": false, "score": 1, "creation_date": 1546393135, "post_id": 54000242, "comment_id": 94837650, "body": "<code>@a_sum.keys</code> and <code>@a_sum.values</code> will give you exactly what you want"}, {"owner": {"reputation": 771, "user_id": 4464547, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/SU8yD.jpg?s=128&g=1", "display_name": "Tazwar Utshas", "link": "https://stackoverflow.com/users/4464547/tazwar-utshas"}, "reply_to_user": {"reputation": 1410, "user_id": 1507845, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9daba84d2a161462310fe5a0eb3ab53c?s=128&d=identicon&r=PG", "display_name": "XML Slayer", "link": "https://stackoverflow.com/users/1507845/xml-slayer"}, "edited": false, "score": 0, "creation_date": 1546393425, "post_id": 54000242, "comment_id": 94837696, "body": "yes. Thank you bro. It worked. But if you would add this answer as an answer instead of comment I could mark it as accepted. Btw, really thanks for your help"}, {"owner": {"reputation": 1410, "user_id": 1507845, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9daba84d2a161462310fe5a0eb3ab53c?s=128&d=identicon&r=PG", "display_name": "XML Slayer", "link": "https://stackoverflow.com/users/1507845/xml-slayer"}, "edited": false, "score": 1, "creation_date": 1546394183, "post_id": 54000242, "comment_id": 94837823, "body": "No worries mate!"}], "answers": [{"tags": [], "owner": {"reputation": 1410, "user_id": 1507845, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9daba84d2a161462310fe5a0eb3ab53c?s=128&d=identicon&r=PG", "display_name": "XML Slayer", "link": "https://stackoverflow.com/users/1507845/xml-slayer"}, "is_accepted": true, "score": 1, "last_activity_date": 1546394263, "creation_date": 1546394263, "answer_id": 54000410, "question_id": 54000242, "link": "https://stackoverflow.com/questions/54000242/rails-get-particular-value-from-database-datas-groups-sum/54000410#54000410", "title": "rails get particular value from database data&#39;s group&#39;s sum", "body": "<p>Since <code>@a_sum</code> is a hash, you can simply use the <code>.keys</code> and <code>.values</code> methods to access those items.</p>\n\n<p><code>@a_sum.keys</code> and <code>@a_sum.values</code> will give you exactly what you want!</p>\n"}], "owner": {"reputation": 771, "user_id": 4464547, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/SU8yD.jpg?s=128&g=1", "display_name": "Tazwar Utshas", "link": "https://stackoverflow.com/users/4464547/tazwar-utshas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 54000410, "answer_count": 1, "score": 0, "last_activity_date": 1546394263, "creation_date": 1546392235, "last_edit_date": 1546392857, "question_id": 54000242, "link": "https://stackoverflow.com/questions/54000242/rails-get-particular-value-from-database-datas-groups-sum", "title": "rails get particular value from database data&#39;s group&#39;s sum", "body": "<p>Here I have a database table named DeliveryCharge. I tried to get get the values of overall weight for every method. For which I tried like this:</p>\n\n<pre><code>@a = DeliveryCharge.all.group(\"method\")\n@a_sum = @a.sum(\"weight\")\nlogger.debug(\"-----------#{@a_sum}----------\")\n</code></pre>\n\n<p>and it is giving this output:</p>\n\n<pre><code>-----------{\"e-packet\"=&gt;6, \"ems\"=&gt;482, \"free-shipping\"=&gt;9999}----------\n</code></pre>\n\n<p>Which is good. But now I want output of only methods in an array and weights in a different array. like this:\n[\"e-packet\", \"ems\", \"free-shipping\"] and [6, 482, 9999]\nFor that I tried these two ways:</p>\n\n<pre><code>logger.debug(\"-----------#{@a_sum(:method)}----------\")   \nlogger.debug(\"-----------#{@a_sum[:method]}----------\")\n</code></pre>\n\n<p>Which are not working. Could anyone help me how to get output like I mentioned above?\nAnd also I tried \n<code>logger.debug(\"-----------#{Array(@a_sum)}----------\")</code>\nfrom which I got: \n<code>------[[\"e-packet\", 6], [\"ems\", 482], [\"free-shipping\", 9999]]---</code>\nbut need to get it like the way I mentioned above.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "edited": false, "score": 0, "creation_date": 1546388346, "post_id": 53999977, "comment_id": 94836869, "body": "Yes, you are right. It looks up the first &amp; second item in the array."}, {"owner": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "edited": false, "score": 2, "creation_date": 1546389312, "post_id": 53999977, "comment_id": 94837027, "body": "No it doesn\u2019t. It splats the subarray."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 10840651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hKJ9y.jpg?s=128&g=1", "display_name": "Luiz Melo", "link": "https://stackoverflow.com/users/10840651/luiz-melo"}, "edited": false, "score": 0, "creation_date": 1546427706, "post_id": 54001094, "comment_id": 94847318, "body": "Woah, that is a very thorough explanation. Thank you very much!"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 3, "last_activity_date": 1601580244, "last_edit_date": 1601580244, "creation_date": 1546402202, "answer_id": 54001094, "question_id": 53999977, "link": "https://stackoverflow.com/questions/53999977/how-does-ruby-arraymap-behave-when-the-block-has-two-parameters/54001094#54001094", "title": "How does Ruby Array#map behave when the block has two parameters?", "body": "<p>We are given two arrays:</p>\n<pre><code>RANKS = ((&quot;2&quot;..&quot;10&quot;).to_a + %w(Jack Queen King Ace)).freeze\n  #=&gt; [&quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;Jack&quot;, &quot;Queen&quot;, &quot;King&quot;, &quot;Ace&quot;] \nSUITS = %w(Hearts Clubs Diamonds Spades).freeze\n  #=&gt; [&quot;Hearts&quot;, &quot;Clubs&quot;, &quot;Diamonds&quot;, &quot;Spades&quot;] \n</code></pre>\n<p>Our first step is to compute the product of those two arrays:</p>\n<pre><code>arr = RANKS.product(SUITS)\n  #=&gt; [[&quot;2&quot;, &quot;Hearts&quot;], [&quot;2&quot;, &quot;Clubs&quot;], [&quot;2&quot;, &quot;Diamonds&quot;], [&quot;2&quot;, &quot;Spades&quot;],\n  #    [&quot;3&quot;, &quot;Hearts&quot;], [&quot;3&quot;, &quot;Clubs&quot;], [&quot;3&quot;, &quot;Diamonds&quot;], [&quot;3&quot;, &quot;Spades&quot;],\n  #    ...\n  #    [&quot;Ace&quot;, &quot;Clubs&quot;], [&quot;Ace&quot;, &quot;Diamonds&quot;], [&quot;Ace&quot;, &quot;Spades&quot;]]\n</code></pre>\n<p>To print the elements of the elements of this array we can write:</p>\n<pre><code>arr.map do |a|\n    rank = a[0]\n    suit = a[1]\n    p rank\n    p suit\nend\n&quot;2&quot;\n&quot;Hearts&quot;\n&quot;2&quot;\n&quot;Clubs&quot;\n&quot;2&quot;\n...\n&quot;Ace&quot;\n&quot;Spades&quot;\n</code></pre>\n<p>As only one Ruby object is passed to a block at a time, having a single block variable makes perfect sense. The first element of <code>arr</code> is passed to the block and the block variable is assigned its value:</p>\n<pre><code>a = arr.first\n  #=&gt; [&quot;2&quot;, &quot;Hearts&quot;] \n</code></pre>\n<p>I then used the method <a href=\"http://ruby-doc.org/core-2.5.1/Array.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">Array#[]</a> (actually, the first form of that method shown at the doc) to extract the first and second elements of the array <code>a</code> and assign those values to the variables <code>rank</code> and <code>suit</code>.</p>\n<p>A second way we could do that is as follows.</p>\n<pre><code>arr.map do |a|\n    rank, suit = a\n    p rank\n    p suit\nend\n</code></pre>\n<p>This uses <a href=\"https://docs.ruby-lang.org/en/2.7.0/doc/syntax/assignment_rdoc.html#label-Array+Decomposition\" rel=\"nofollow noreferrer\">Array#decomposition</a>.</p>\n<p>As a convenience, Ruby permits us to use array decomposition to compute multiple block variables directly:</p>\n<pre><code>arr.map do |rank, suit|\n    p rank\n    p suit\nend\n</code></pre>\n<p>When passing the first element of <code>arr</code> to the block, Ruby executes the following:</p>\n<pre><code>rank, suit = arr.first\n  #=&gt; [&quot;2&quot;, &quot;Hearts&quot;] \nrank\n  #=&gt; &quot;2&quot; \nsuit\n  #=&gt; &quot;Hearts&quot;\n</code></pre>\n<p>Sometimes the block variables are written in a more complex way. Suppose, for example,</p>\n<pre><code>arr = [[1, [2, [3, {:a=&gt;4}]], 5, 6]], [7, [8, [9, {:b=&gt;10}]], 11, 12]]] \n</code></pre>\n<p>We might write the following:</p>\n<pre><code>arr.each do |a,(b,(c,d),e,f)|\n  p a\n  p b\n  p c \n  p d\n  p e\n  p f\nend\n1\n2\n3\n{:a=&gt;4}\n5\n6\n7\n8\n9\n{:b=&gt;10}\n11\n12\n</code></pre>\n<p>This may seem somewhat advanced, but it is really quite straightforward. You will see what I mean if you compare the locations of the brackets contained in each element of <code>arr</code> with the locations of the parentheses surrounding groups of block variables.</p>\n<p>Suppose now we had no interest in the values of <code>b</code>, <code>e</code> or <code>f</code>. We might then write:</p>\n<pre><code>arr.each do |a,(_,(c,d),*)|\n  p a\n  p c \n  p d\nend\n1\n3\n{:a=&gt;4}\n7\n9\n{:b=&gt;10}\n</code></pre>\n<p>An important reason for writing the block variables like this is that it tells the reader which components of each element of <code>arr</code> are used in the block calculations.</p>\n<p>Lastly, the following is typical of a pattern that one often encounters.</p>\n<pre><code>arr = [1, 3, 4, 7, 2, 6, 9]\n\narr.each_with_object([]).with_index { |(n,a),i| a &lt;&lt; n*n if i.odd? }\n  #=&gt; [9, 49, 36]\n</code></pre>\n<p>What we actually have here is the following.</p>\n<pre><code>enum0 = arr.each_with_object([])\n  #=&gt; #&lt;Enumerator: [1, 3, 4, 7, 2, 6, 9]:each_with_object([])&gt; \nenum1 = enum0.with_index\n  #=&gt; #&lt;Enumerator: #&lt;Enumerator:\n  #    [1, 3, 4, 7, 2, 6, 9]:each_with_object([])&gt;:with_index&gt; \n</code></pre>\n<p>The enumerator <code>enum1</code> generates each value, passes it to the block, the block values are assigned values and the block calculation is performed. Here is what happens for the first three values generated by <code>enum1</code>.</p>\n<pre><code>(n,a),i = enum1.next\n  #=&gt; [[1, []], 0] \nn #=&gt; 1 \na #=&gt; [] \ni #=&gt; 0 \na &lt;&lt; n*n if i.odd?\n  #=&gt; nil\n\n(n,a),i = enum1.next\n  #=&gt; [[3, []], 1] \nn #=&gt; 3 \na #=&gt; [] \ni #=&gt; 1 \na &lt;&lt; n*n if i.odd?\n  #=&gt; [9] \n\n(n,a),i = enum1.next\n  #=&gt; [[4, [9]], 2] \nn #=&gt; 4 \na #=&gt; [9] \ni #=&gt; 2 \na &lt;&lt; n*n if i.odd?\n  #=&gt; nil \n\na #=&gt; [9] \n</code></pre>\n<p>See <a href=\"http://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-each_with_object\" rel=\"nofollow noreferrer\">Enumerable#each_with_object</a>, <a href=\"http://ruby-doc.org/core-2.5.1/Enumerator.html#method-i-with_index\" rel=\"nofollow noreferrer\">Enumerator#with_index</a> and <a href=\"http://ruby-doc.org/core-2.5.1/Enumerator.html#method-i-next\" rel=\"nofollow noreferrer\">Enumerator#next</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1546416975, "last_edit_date": 1546416975, "creation_date": 1546416601, "answer_id": 54003102, "question_id": 53999977, "link": "https://stackoverflow.com/questions/53999977/how-does-ruby-arraymap-behave-when-the-block-has-two-parameters/54003102#54003102", "title": "How does Ruby Array#map behave when the block has two parameters?", "body": "<p>Formal parameter binding semantics for block formal parameters are different from formal parameter binding semantics for method formal parameters. In particular, they are much more flexible in how they handle mismatches between the number of formal parameters and actual arguments.</p>\n\n<ul>\n<li>If there is exactly one block formal parameter and you <code>yield</code> more than one block actual argument, the block formal parameter gets bound to an <code>Array</code> containing the block actual arguments.</li>\n<li>If there are more than one block formal parameters and you <code>yield</code> exactly one block actual argument, and that one actual argument is an <code>Array</code>, then the block formal parameters get bound to the individual elements of the <code>Array</code>.</li>\n<li>If you <code>yield</code> more block actual arguments than the block has formal parameters, the extra actual arguments get ignored.</li>\n<li>If you pass fewer actual arguments than the block has formal parameters, then those extra formal parameters are defined but not bound, and evaluate to <code>nil</code> (just like defined but unitialized local variables).</li>\n</ul>\n\n<p>If you look closely, you can see that the formal parameter binding semantics for block formal parameters are much closer to assignment semantics, i.e. you can imagine an assignment with the block formal parameters on the left-hand side of the assignment operator and the block actual arguments on the right-hand side.</p>\n\n<p>If you have a block defined like this:</p>\n\n<pre><code>{|a, b, c|}\n</code></pre>\n\n<p>and are <code>yield</code>ing to it like this:</p>\n\n<pre><code>yield 1, 2, 3, 4\n</code></pre>\n\n<p>you can almost imagine the block formal parameter binding to work like this:</p>\n\n<pre><code>a, b, c = 1, 2, 3, 4\n</code></pre>\n\n<p>Fun fact: up to Ruby 1.8, block formal parameter binding <em>was</em> using <em>actual</em> assignment! You could, for example, define a constant, an instance variable, a class variable, a global variable, and even an attribute writer(!!!) as a formal parameter, and when you <code>yield</code>ed to that block, Ruby would <em>literally</em> perform the assignment:</p>\n\n<pre><code>class Foo\n  def bar=(value)\n    puts \"`#{__method__}` called with `#{value.inspect}`\"\n    @bar = value\n  end\n\n  attr_reader :bar\nend\n\ndef set_foo\n  yield 42\nend\n\nfoo = Foo.new\n\nset_foo {|foo.bar|}\n# `bar=` called with `42`\n\nfoo.bar\n#=&gt; 42\n</code></pre>\n\n<p>Pretty crazy, huh?</p>\n\n<p>The most widely-used application of these block formal parameter binding semantics is when using <code>Hash#each</code> (or any of the <code>Enumerable</code> methods with a <code>Hash</code> instance as the receiver). The <code>Hash#each</code> method <code>yield</code>s a single two-element <code>Array</code> containing the key and the value as an actual argument to the block, but we almost always treat it as if it were <code>yield</code>ing the key and value as separate actual arguments. Usually, we prefer writing </p>\n\n<pre><code>hsh.each do |k, v|\n  puts \"The key is #{k} and the value is #{v}\"\nend\n</code></pre>\n\n<p>over </p>\n\n<pre><code>hsh.each do |key_value_pair|\n  k, v = key_value_pair\n  puts \"The key is #{k} and the value is #{v}\"\nend\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 10840651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hKJ9y.jpg?s=128&g=1", "display_name": "Luiz Melo", "link": "https://stackoverflow.com/users/10840651/luiz-melo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 1, "accepted_answer_id": 54001094, "answer_count": 2, "score": 2, "last_activity_date": 1601580244, "creation_date": 1546388142, "last_edit_date": 1546427306, "question_id": 53999977, "link": "https://stackoverflow.com/questions/53999977/how-does-ruby-arraymap-behave-when-the-block-has-two-parameters", "title": "How does Ruby Array#map behave when the block has two parameters?", "body": "<p>I have the following code:</p>\n\n<pre><code>RANKS = ((2..10).to_a + %w(Jack Queen King Ace)).freeze\nSUITS = %w(Hearts Clubs Diamonds Spades).freeze\n\nRANKS.product(SUITS).map do |rank, suit|\n  p rank\n  p suit\nend\n</code></pre>\n\n<p>I noticed that when I ran this code, I got the value and the suit got printed, but when I use only 1 parameter, for example, <code>| rank |</code> I would get a sub-array, like <code>[2, \"Hearts\"]</code>.</p>\n\n<p>Does this mean that when the block has 2 parameters it is accessing <code>sub-array[0]</code>  and <code>sub-array[1]</code>?</p>\n\n<p>This really got me confused and any help would be most appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546384636, "post_id": 53999654, "comment_id": 94836339, "body": "Hope you have configured SSL key and cert. Then use the config to start the server. If you don&#39;t know or haven&#39;t done this step then google to look up a tutorial. :)"}, {"owner": {"reputation": 45, "user_id": 10840729, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YvZ-ZENdYLc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbu3HH78kkPEbx5PGCktp9p5VuVQg/mo/photo.jpg?sz=128", "display_name": "Artem", "link": "https://stackoverflow.com/users/10840729/artem"}, "reply_to_user": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546385017, "post_id": 53999654, "comment_id": 94836399, "body": "I configured SSL certificate in CloudFlare panel. Don&#39;t use server for configured. In apache rules i use redirect to https and it work&#39;s."}, {"owner": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546385124, "post_id": 53999654, "comment_id": 94836414, "body": "I meant set up SSL for puma or whatever rails server you are using."}, {"owner": {"reputation": 45, "user_id": 10840729, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YvZ-ZENdYLc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbu3HH78kkPEbx5PGCktp9p5VuVQg/mo/photo.jpg?sz=128", "display_name": "Artem", "link": "https://stackoverflow.com/users/10840729/artem"}, "reply_to_user": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546386014, "post_id": 53999654, "comment_id": 94836552, "body": "I do not have certificate files because the CloudFlare does not issue them"}, {"owner": {"reputation": 29469, "user_id": 333340, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EUElo.jpg?s=128&g=1", "display_name": "Synchro", "link": "https://stackoverflow.com/users/333340/synchro"}, "edited": false, "score": 1, "creation_date": 1546419809, "post_id": 53999654, "comment_id": 94843876, "body": "This question has nothing to do with the SSL certificate on your server, nor cloudflare. Your settings look correct for typical SMTP+STARTTLS servers, so I\u2019d say you need some lower-level debug logging or some other analysis tools like testssl.sh."}], "answers": [{"comments": [{"owner": {"reputation": 5437, "user_id": 1257094, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ob6MH.jpg?s=128&g=1", "display_name": "milgner", "link": "https://stackoverflow.com/users/1257094/milgner"}, "reply_to_user": {"reputation": 45, "user_id": 10840729, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YvZ-ZENdYLc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbu3HH78kkPEbx5PGCktp9p5VuVQg/mo/photo.jpg?sz=128", "display_name": "Artem", "link": "https://stackoverflow.com/users/10840729/artem"}, "edited": false, "score": 0, "creation_date": 1546442868, "post_id": 54005798, "comment_id": 94854467, "body": "Could you add a longer excerpt from your log? Is there a backtrace by any chance?"}, {"owner": {"reputation": 45, "user_id": 10840729, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YvZ-ZENdYLc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbu3HH78kkPEbx5PGCktp9p5VuVQg/mo/photo.jpg?sz=128", "display_name": "Artem", "link": "https://stackoverflow.com/users/10840729/artem"}, "edited": false, "score": 0, "creation_date": 1546446063, "post_id": 54005798, "comment_id": 94856117, "body": "Now error: <code>Net::SMTPFatalError (553 5.7.1 Sender address rejected: not owned by auth user.</code>"}, {"owner": {"reputation": 5437, "user_id": 1257094, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ob6MH.jpg?s=128&g=1", "display_name": "milgner", "link": "https://stackoverflow.com/users/1257094/milgner"}, "reply_to_user": {"reputation": 45, "user_id": 10840729, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YvZ-ZENdYLc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbu3HH78kkPEbx5PGCktp9p5VuVQg/mo/photo.jpg?sz=128", "display_name": "Artem", "link": "https://stackoverflow.com/users/10840729/artem"}, "edited": false, "score": 0, "creation_date": 1546540349, "post_id": 54005798, "comment_id": 94892137, "body": "This means that your mailer is trying send from an invalid source address. Try adding <code>default from: &#39;youraccount@example.com&#39;</code>, using your <code>yandex.ru</code> mail address."}, {"owner": {"reputation": 45, "user_id": 10840729, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YvZ-ZENdYLc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbu3HH78kkPEbx5PGCktp9p5VuVQg/mo/photo.jpg?sz=128", "display_name": "Artem", "link": "https://stackoverflow.com/users/10840729/artem"}, "edited": false, "score": 0, "creation_date": 1546602273, "post_id": 54005798, "comment_id": 94911756, "body": "The problem was that a completely different mail was used at <b>devise.rb</b>, changing it all worked."}], "tags": [], "owner": {"reputation": 5437, "user_id": 1257094, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ob6MH.jpg?s=128&g=1", "display_name": "milgner", "link": "https://stackoverflow.com/users/1257094/milgner"}, "is_accepted": true, "score": 2, "last_activity_date": 1546429703, "creation_date": 1546429703, "answer_id": 54005798, "question_id": 53999654, "link": "https://stackoverflow.com/questions/53999654/how-to-fix-opensslsslsslerror-error-in-ruby/54005798#54005798", "title": "How to fix &#39;OpenSSL::SSL::SSLError&#39; error in Ruby?", "body": "<p>This error usually occurs if you try to establish an encrypted connection to a server that doesn't expect this. Port 587 typically requires the use of <code>STARTTLS</code> after first establishing an unecrypted connection. Try removing <code>tls: true</code> in your configuration and using <code>enable_starttls_auto: true</code> instead.</p>\n"}], "owner": {"reputation": 45, "user_id": 10840729, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YvZ-ZENdYLc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbu3HH78kkPEbx5PGCktp9p5VuVQg/mo/photo.jpg?sz=128", "display_name": "Artem", "link": "https://stackoverflow.com/users/10840729/artem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 908, "favorite_count": 0, "accepted_answer_id": 54005798, "answer_count": 1, "score": 0, "last_activity_date": 1546429703, "creation_date": 1546384232, "last_edit_date": 1546419571, "question_id": 53999654, "link": "https://stackoverflow.com/questions/53999654/how-to-fix-opensslsslsslerror-error-in-ruby", "title": "How to fix &#39;OpenSSL::SSL::SSLError&#39; error in Ruby?", "body": "<p>I use CloudFlare Flexible SSL certificate.</p>\n\n<p>When I try send user registration confirmation, I receive 500 error. In log:</p>\n\n<blockquote>\n  <p>OpenSSL::SSL::SSLError (SSL_connect returned=1 errno=0 state=SSLv2/v3 read server hello A: unknown protocol):</p>\n</blockquote>\n\n<p>My <b>production.rb</b>:</p>\n\n<pre><code>config.action_mailer.default_url_options = { host: 'localhost', port: 3000 }\nconfig.action_mailer.delivery_method = :smtp\nconfig.action_mailer.smtp_settings = {\ntls: true,\n    address: 'smtp.yandex.ru',\n    port: 587,\n    domain: 'yandex.ru',\n    authentication: 'plain',\n    user_name: 'admin@site.ru',\n    password: 'password',\n}\n</code></pre>\n\n<p>How can I fix this error?</p>\n"}, {"tags": ["ruby", "multithreading", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 779, "user_id": 833555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99cf1bcf274d03c06d2f218f73cff0d?s=128&d=identicon&r=PG", "display_name": "Gregory Ostermayr", "link": "https://stackoverflow.com/users/833555/gregory-ostermayr"}, "is_accepted": true, "score": 1, "last_activity_date": 1546379288, "creation_date": 1546379288, "answer_id": 53999207, "question_id": 53998727, "link": "https://stackoverflow.com/questions/53998727/rspec-how-to-capture-exit-from-a-new-thread/53999207#53999207", "title": "rspec: How to capture exit from a new thread?", "body": "<p>I don't know if this is exactly what you want, but you can call join on that newly created thread. That seems to work for me.</p>\n\n<pre><code>expect { Thread.new { exit }.join }.to raise_error(SystemExit)   \n</code></pre>\n"}], "owner": {"reputation": 1251, "user_id": 1198224, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/26e95d4a1d91bab4d79881e6ee53b84c?s=128&d=identicon&r=PG", "display_name": "KZcoding", "link": "https://stackoverflow.com/users/1198224/kzcoding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 53999207, "answer_count": 1, "score": 1, "last_activity_date": 1546379288, "creation_date": 1546374649, "question_id": 53998727, "link": "https://stackoverflow.com/questions/53998727/rspec-how-to-capture-exit-from-a-new-thread", "title": "rspec: How to capture exit from a new thread?", "body": "<p>So, I am able to capture <code>exit</code> in rspec this way:</p>\n\n<p><code>expect { exit }.to raise_error(SystemExit)</code></p>\n\n<p>But, if the <code>exit</code> was called inside a new thread, the whole rspec run exits:</p>\n\n<p><code>expect { Thread.new { exit } }.to raise_error(SystemExit)</code></p>\n\n<p>Is there a way to capture <code>exit</code> from a new thread gracefully?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "edited": false, "score": 1, "creation_date": 1546353487, "post_id": 53995982, "comment_id": 94829887, "body": "Is it a checksum? A hash?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "edited": false, "score": 0, "creation_date": 1546359326, "post_id": 53995982, "comment_id": 94831163, "body": "You need to tell us what <code>input</code> is. Not just its class (<code>Integer</code>?), but more generally what it represents. We also need to understand how the return value of your code is used (related to @matt&#39;s question, which you need to answer). Lastly, you need a third line of code containing just <code>end</code>. Please address these issues by editing your question rather than by elaborating in comments."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546360147, "post_id": 53995982, "comment_id": 94831354, "body": "You have selected an answer that does nothing more than explain how <code>inject</code> works, with no reference to the particular calculation you wish to perform. There are thousands of explanations of <code>inject&#47;reduce</code> within easy reach, many with greater detail than the explanation contained in the selected answer,. That show of laziness earns a downvote from me."}, {"owner": {"reputation": 197, "user_id": 8142297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e5f520f018cc8c643c193429432b83?s=128&d=identicon&r=PG&f=1", "display_name": "LostIT", "link": "https://stackoverflow.com/users/8142297/lostit"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546388117, "post_id": 53995982, "comment_id": 94836843, "body": "@CarySwoveland It does give me the information I needed under, &quot;So in your case:&quot;."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546391761, "post_id": 53995982, "comment_id": 94837436, "body": "That may be, but it&#39;s not at all clear from the question what you want. Judging from the voting I don&#39;t seem to be alone in my assessment of the quality of the question."}], "answers": [{"tags": [], "owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "is_accepted": true, "score": 2, "last_activity_date": 1546353518, "creation_date": 1546353518, "answer_id": 53996339, "question_id": 53995982, "link": "https://stackoverflow.com/questions/53995982/what-do-these-2-lines-of-code-actually-do/53996339#53996339", "title": "What do these 2 lines of code actually do?", "body": "<p><a href=\"https://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-inject\" rel=\"nofollow noreferrer\">inject</a> is the same as reduce,  and is similar to reduce in many other languages.</p>\n\n<p>There are a number of different ways to call it but the way shown in the question is this:</p>\n\n<pre><code>inject(initial) { |memo, obj| block } \u2192 obj\n</code></pre>\n\n<blockquote>\n  <p>If you specify a block, then for each element in enum the block is\n  passed an accumulator value (memo) and the element. If you specify a\n  symbol instead, then each element in the collection will be passed to\n  the named method of memo. In either case, the result becomes the new\n  value for memo. At the end of the iteration, the final value of memo\n  is the return value for the method.</p>\n  \n  <p>If you do not explicitly specify an initial value for memo, then the\n  first element of collection is used as the initial value of memo.</p>\n</blockquote>\n\n<p>So in your case:</p>\n\n<pre><code>input.to_s.each_char.inject(0) do |sum, ch|\n    (sum &lt;&lt; 8) ^ (ch.ord) ^ (sum &gt;&gt; 4)\nend\n</code></pre>\n\n<p>The initial value of sum is 0, which is used for the first iteration, but for each subsequent iteration the result of the block is used for sum in the next iteration.</p>\n\n<p>For example the following should produce the same value without using inject/reduce.</p>\n\n<pre><code>sum = 0\ninput.to_s.each_char do |ch|\n    sum = (sum &lt;&lt; 8) ^ (ch.ord) ^ (sum &gt;&gt; 4)\nend\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 8142297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e5f520f018cc8c643c193429432b83?s=128&d=identicon&r=PG&f=1", "display_name": "LostIT", "link": "https://stackoverflow.com/users/8142297/lostit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 1, "accepted_answer_id": 53996339, "answer_count": 1, "score": -5, "last_activity_date": 1546353518, "creation_date": 1546350525, "question_id": 53995982, "link": "https://stackoverflow.com/questions/53995982/what-do-these-2-lines-of-code-actually-do", "title": "What do these 2 lines of code actually do?", "body": "<p>I don\u2019t know Ruby but I need to understand how the input value is manipulated in the lines below.</p>\n\n<p>I think that the input is converted to the sum of the values of its characters but the second line is confusing; does it take the final value of the sum and perform the bitwise operations or per iteration? Could you provide a simple explanation of the steps followed?</p>\n\n<p>Thank you in advance!</p>\n\n<pre><code>input.to_s.each_char.inject(0) do |sum, ch|\n    (sum &lt;&lt; 8) ^ (ch.ord) ^ (sum &gt;&gt; 4)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "docker"], "comments": [{"owner": {"reputation": 1926, "user_id": 2653120, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/chsmu.jpg?s=128&g=1", "display_name": "amir", "link": "https://stackoverflow.com/users/2653120/amir"}, "edited": false, "score": 1, "creation_date": 1546347651, "post_id": 53995592, "comment_id": 94828604, "body": "you can add a <code>CMD</code> to your docker file which rum the script that install that gem"}, {"owner": {"reputation": 612, "user_id": 1408156, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/4d47e03e58da39c9804e46b1bdbc5ce0?s=128&d=identicon&r=PG", "display_name": "stk1234", "link": "https://stackoverflow.com/users/1408156/stk1234"}, "reply_to_user": {"reputation": 1926, "user_id": 2653120, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/chsmu.jpg?s=128&g=1", "display_name": "amir", "link": "https://stackoverflow.com/users/2653120/amir"}, "edited": false, "score": 0, "creation_date": 1546347669, "post_id": 53995592, "comment_id": 94828609, "body": "Could you elaborate on how to do that?"}, {"owner": {"reputation": 1926, "user_id": 2653120, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/chsmu.jpg?s=128&g=1", "display_name": "amir", "link": "https://stackoverflow.com/users/2653120/amir"}, "edited": false, "score": 0, "creation_date": 1546347728, "post_id": 53995592, "comment_id": 94828626, "body": "can you share your dockerfile?"}, {"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 1, "creation_date": 1546348391, "post_id": 53995592, "comment_id": 94828769, "body": "The <code>Gemfile</code> is a file listing dependencies for <code>bundler</code>. It is created and maintained by a person and is not impacted by <code>gem</code> commands."}], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 2, "last_activity_date": 1546410375, "last_edit_date": 1546410375, "creation_date": 1546347972, "answer_id": 53995677, "question_id": 53995592, "link": "https://stackoverflow.com/questions/53995592/installing-a-ruby-gem-on-a-dockerized-application/53995677#53995677", "title": "Installing a Ruby Gem on a Dockerized Application", "body": "<p>The RubyGems <code>gem</code> command is actually a much older package manager that predates bundler. </p>\n\n<p>Running <code>gem install foo</code> just installs the gem to your local repository (a folder somewhere). It does not add the gem to your Gemfile and it does not perform the dependency tree resolution that Bundler does to ensure that your gems are actually compatible.</p>\n\n<p>Bundler is built on top of <code>gem</code>. To install gems with bundler (which is what you pretty much always want to do) you add the gem to your Gemfile and run <code>bundle install</code>. </p>\n\n<pre><code>gem 'awesome_print', '~&gt; 1.8'\n</code></pre>\n\n<p>Bundler also has a <a href=\"https://bundler.io/man/bundle-add.1.html\" rel=\"nofollow noreferrer\"><code>bundle add</code></a> command which will add a gem to the Gemfile and install your bundle, for example: </p>\n\n<pre><code>bundle add awesome_print --version \"~&gt; 1.8\"\n</code></pre>\n"}], "owner": {"reputation": 612, "user_id": 1408156, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/4d47e03e58da39c9804e46b1bdbc5ce0?s=128&d=identicon&r=PG", "display_name": "stk1234", "link": "https://stackoverflow.com/users/1408156/stk1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1546410375, "creation_date": 1546347141, "question_id": 53995592, "link": "https://stackoverflow.com/questions/53995592/installing-a-ruby-gem-on-a-dockerized-application", "title": "Installing a Ruby Gem on a Dockerized Application", "body": "<p>I want to install awesome_print in my dockerized ruby application. Running </p>\n\n<pre><code>docker-compose run application_name gem install awesome_print \n</code></pre>\n\n<p>says \"Successfully installed awesome_print-1.8.0,\" however, it does not appear in my Gemfile even after running </p>\n\n<pre><code>docker-compose run application_name bundle install\n</code></pre>\n\n<p>How can I install awesome_print in my dockerized application?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "shell", "nginx", "passenger"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 4, "creation_date": 1546347857, "post_id": 53995424, "comment_id": 94828654, "body": "You should use <code>rvm and rbenv</code>, because <code>bundler</code> depends on rubygems(finds, loads and runs gems). Its a little tricky since rvm and rbenv behave differently in the defferent shells."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1546375382, "post_id": 53995424, "comment_id": 94834595, "body": "I would never recommend starting Sidekiq by starting a new process from your existing Rails app (and definitely would not recommend starting it from a controller action!) I suggest reading <a href=\"https://github.com/mperham/sidekiq/wiki/Deployment\" rel=\"nofollow noreferrer\">the wiki</a> to understand how to start Sidekiq properly."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1546375463, "post_id": 53995424, "comment_id": 94834611, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 I would never recommend using RVM or rbenv in a production environment. Docker, for example, does not play very well with them."}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546375783, "post_id": 53995424, "comment_id": 94834661, "body": "@anothermh <a href=\"https://stackoverflow.com/questions/43612927/how-to-correctly-install-rvm-in-docker/43613426#43613426\">rvm works in docker very well</a>."}, {"owner": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546384277, "post_id": 53995424, "comment_id": 94836276, "body": "@parul-kanani Yes, do not start sidekiq from a controller or by forking another process. Also, it doesn&#39;t matter if RVM/rbenv play well with docker or not. It is not the best way. If you are using docker, then use supervisor to do so. If you aren&#39;t using docker, use your host&#39;s/host os&#39;s service manager to start it."}, {"owner": {"reputation": 111, "user_id": 8782346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0NNoa.png?s=128&g=1", "display_name": "Parul Kanani", "link": "https://stackoverflow.com/users/8782346/parul-kanani"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546408101, "post_id": 53995424, "comment_id": 94840296, "body": "@anothermh Yes, you are right. It&#39;s not good to use that in controller but my sidekiq stopped randomly in my live server so I think this way is last option to me. Let me know if you have better way to resolve this issue."}, {"owner": {"reputation": 111, "user_id": 8782346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0NNoa.png?s=128&g=1", "display_name": "Parul Kanani", "link": "https://stackoverflow.com/users/8782346/parul-kanani"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1546408272, "post_id": 53995424, "comment_id": 94840335, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 I installed ruby from ruby source so is it not possible to do with this ? I have issue of sidekiq because it&#39;s stop working randomly so I want to start it whenever it&#39;s stop. I will be great if you have any better idea to resolve this."}, {"owner": {"reputation": 111, "user_id": 8782346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0NNoa.png?s=128&g=1", "display_name": "Parul Kanani", "link": "https://stackoverflow.com/users/8782346/parul-kanani"}, "reply_to_user": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546409428, "post_id": 53995424, "comment_id": 94840617, "body": "@AadityaMaheshwari I am not using docker. What is your suggestion for this?"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1546411265, "post_id": 53995424, "comment_id": 94841180, "body": "@ParulKanani use <code>systemd</code> in order to run and restart <code>sidekiq</code>."}, {"owner": {"reputation": 111, "user_id": 8782346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0NNoa.png?s=128&g=1", "display_name": "Parul Kanani", "link": "https://stackoverflow.com/users/8782346/parul-kanani"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1546411725, "post_id": 53995424, "comment_id": 94841325, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 Are you talking about this? <a href=\"https://gist.github.com/mkhuda/132787f9d54890a183d665eb4560f196\" rel=\"nofollow noreferrer\">gist.github.com/mkhuda/132787f9d54890a183d665eb4560f196</a>"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1546413641, "post_id": 53995424, "comment_id": 94841925, "body": "@ParulKanani yes."}, {"owner": {"reputation": 111, "user_id": 8782346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0NNoa.png?s=128&g=1", "display_name": "Parul Kanani", "link": "https://stackoverflow.com/users/8782346/parul-kanani"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1546413986, "post_id": 53995424, "comment_id": 94842031, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 Do it work for ubuntu 14.04?"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1546414077, "post_id": 53995424, "comment_id": 94842053, "body": "@ParulKanani my bad, Ubuntu 14.10 and below use upstart."}, {"owner": {"reputation": 111, "user_id": 8782346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0NNoa.png?s=128&g=1", "display_name": "Parul Kanani", "link": "https://stackoverflow.com/users/8782346/parul-kanani"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1546414318, "post_id": 53995424, "comment_id": 94842108, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 I think for this RVM or rbenv is required"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546417932, "post_id": 53995424, "comment_id": 94843196, "body": "You should be running Sidekiq <i>separately</i> from your Rails server. If Sidekiq is shutting down unexpectedly then <i>fix that problem</i>, do not try to solve it by doing the wrong thing and running it as a forked process from your Rails server. It&#39;s unclear how you&#39;re running them, but if for example you&#39;re using Docker then you would start two separate Docker containers. They can be identical Docker images, but they would use different <code>CMD</code> actions: <code>bundle exec rails server</code> and <code>bundle exec sidekiq</code>. This question is a perfect example of an <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">XY problem</a>."}, {"owner": {"reputation": 111, "user_id": 8782346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0NNoa.png?s=128&g=1", "display_name": "Parul Kanani", "link": "https://stackoverflow.com/users/8782346/parul-kanani"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546418576, "post_id": 53995424, "comment_id": 94843434, "body": "@anothermh I am not using Docker. I used AWS, load balancer. I think due to heavy load sidekiq stopped unexpectedly."}, {"owner": {"reputation": 111, "user_id": 8782346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0NNoa.png?s=128&g=1", "display_name": "Parul Kanani", "link": "https://stackoverflow.com/users/8782346/parul-kanani"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546418690, "post_id": 53995424, "comment_id": 94843474, "body": "@anothermh, I used this command <code>bundle exec sidekiq -d -e production</code> to start sidekiq"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546418753, "post_id": 53995424, "comment_id": 94843500, "body": "Why is Sidekiq running behind a load balancer? That&#39;s not how Sidekiq works. You push jobs to Sidekiq via Redis, and the Sidekiq server reads the jobs from Redis. Besides that, Sidekiq will not exit under heavy load. I&#39;ve run Sidekiq with millions of jobs per day doing CPU-intensive work; if it exits, it exits for a reason listed in the logs."}, {"owner": {"reputation": 111, "user_id": 8782346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0NNoa.png?s=128&g=1", "display_name": "Parul Kanani", "link": "https://stackoverflow.com/users/8782346/parul-kanani"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546418877, "post_id": 53995424, "comment_id": 94843557, "body": "@anothermh Yes it&#39;s work via redis only."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546419047, "post_id": 53995424, "comment_id": 94843621, "body": "I want to emphasize again that you have an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a>, that the question you&#39;ve asked is the wrong question and not representative of the real problem. Check your Sidekiq logs and if you&#39;re unsure why it&#39;s terminating then open a question about that instead. And carefully read the Sidekiq <a href=\"https://github.com/mperham/sidekiq/wiki/\" rel=\"nofollow noreferrer\">wiki</a> to make sure you fully understand the Sidekiq architecture."}, {"owner": {"reputation": 111, "user_id": 8782346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0NNoa.png?s=128&g=1", "display_name": "Parul Kanani", "link": "https://stackoverflow.com/users/8782346/parul-kanani"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546419776, "post_id": 53995424, "comment_id": 94843853, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/186031/discussion-between-parul-kanani-and-anothermh\">continue this discussion in chat</a>."}], "owner": {"reputation": 111, "user_id": 8782346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0NNoa.png?s=128&g=1", "display_name": "Parul Kanani", "link": "https://stackoverflow.com/users/8782346/parul-kanani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 460, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1546346202, "creation_date": 1546345626, "last_edit_date": 1546346202, "question_id": 53995424, "link": "https://stackoverflow.com/questions/53995424/how-to-execute-shell-command-from-rails", "title": "How to execute shell command from Rails?", "body": "<p>I am facing a issue when tried to run shell command from rails controller.\nTried in 3 different environments</p>\n\n<ol>\n<li>Local (Puma)</li>\n<li>Staging Server( standalone passenger)</li>\n<li>Live (Nginx + Passenger 5.3.4)</li>\n</ol>\n\n<p>Ruby installed in live directly by source (no rvm and rbenv)</p>\n\n<p>It is working in Local and Sandbox but <code>127</code> error in live</p>\n\n<p>Tried with below 4 ways but all these are woking only in Local and Sandbox not on live </p>\n\n<pre><code>  def enable_sidekiq\n    system 'bundle exec sidekiq -d -e production'\n    exec('bundle sidekiq -d -e production') #working but stops rail console\n    %x{bundle exec sidekiq -d -e production}\n    `bundle exec sidekiq -d -e production`\n    puts $?  # this shows - pid 23543 exit 0 (when successfull)\n    # this shows - pid 23456 exit 127 (when  not successfull)\n  end\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>Passenger AppPreloader: /path/to/project (forking...): No such file or directory - bundle\n</code></pre>\n"}, {"tags": ["ruby", "class"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1546342265, "post_id": 53995008, "comment_id": 94827478, "body": "Both &quot;styles&quot; have their place, depending on what you want to achieve exactly. It&#39;s not an either-or kind of situation. Note though that the methods generated with <code>attr_accessor</code> also set instance variables internally."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1546346840, "post_id": 53995008, "comment_id": 94828410, "body": "Or also <a href=\"https://stackoverflow.com/q/34065817/5239030\">stackoverflow.com/q/34065817/5239030</a>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546361213, "post_id": 53995008, "comment_id": 94831615, "body": "You would normally initialize the values of the three instance variables as you have in #2, If you need to &quot;get&quot; the values of those those variables from outside the class you need a <i>getter method</i> for each (e.g., <code>def title; @title; end</code>), which, for convenience, <code>attr_reader</code> will construct. for you. If you need to &quot;set&quot; the values of those those variables from outside the class you need  <i>setter methods</i> (e.g., <code>def title=(val); @title=val; end</code>), which <code>attr_writer</code> will construct. If you need to do both, use <code>attr_accessor</code>, which amounts to your #1 and #2 combined."}], "answers": [{"tags": [], "owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "is_accepted": true, "score": 1, "last_activity_date": 1546355469, "creation_date": 1546355469, "answer_id": 53996554, "question_id": 53995008, "link": "https://stackoverflow.com/questions/53995008/ruby-class-output/53996554#53996554", "title": "Ruby Class Output", "body": "<p>In your first example you are providing access the info you want and leaving it up to the client to format the output.  For example you could have gotten what you wanted by adding this line in place of your commented line.</p>\n\n<pre><code>puts \"#{book1.title} is written by #{book1.author} and has #{book1.pages} pages\"\n</code></pre>\n\n<p>In your second example you are \"pushing\" that code down into the Novel class and proving a method to produce the output you want.  BTW,  don't use <code>inspect</code> as a method name, <a href=\"https://ruby-doc.org/core-2.1.1/Object.html#method-i-inspect\" rel=\"nofollow noreferrer\">inspect</a> is already a defined method </p>\n\n<p>For example the following will print the same info twice.</p>\n\n<pre><code>class Novel\n  attr_accessor :title, :author, :pages  \n  def initialize(title, author, pages)\n    @title = title\n    @author = author\n    @pages = pages\n  end\n\n  def info\n    \"#{@title} is written by #{@author} and has #{@pages} pages\"\n  end\nend\n\nnovel = Novel.new('harry potter', 'JK Rowling', 300)\nputs novel.info\nputs \"#{novel.title} is written by #{novel.author} and has #{novel.pages} pages\"\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 10704833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/814bb0ee6df7dc0bd30054e592d95a48?s=128&d=identicon&r=PG&f=1", "display_name": "janedoegcp", "link": "https://stackoverflow.com/users/10704833/janedoegcp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 53996554, "answer_count": 1, "score": 0, "last_activity_date": 1546380987, "creation_date": 1546341613, "last_edit_date": 1546380987, "question_id": 53995008, "link": "https://stackoverflow.com/questions/53995008/ruby-class-output", "title": "Ruby Class Output", "body": "<p>I am trying my hands at Ruby, below is the code that I am writing in 2 different ways to understand Ruby Classes. In first block I am using accessor method (combination of accessor read &amp; write) and I want to print final line as \"lord of the rings is written by Tolkien and has 400 pages\". How can I make that happen? I understand that adding string and integer will throw an error. I can get them to print on separate lines, its just that I can't get them in a sentence. </p>\n\n<pre><code>class Book\n  attr_accessor :title, :author, :pages\nend\n\nbook1 = Book.new()\nbook1.title = 'lord of the rings'\nbook1.author = 'Tolkien'\nbook1.pages = 400\n\nputs book1.title\nputs book1.author\nputs book1.pages\n\n#puts book1.title + \" is written by \" + book1.author + \" and has \" + book1.pages + \" pages\" &lt;&lt;&lt;this errors out for known reason&gt;&gt;&gt;\n</code></pre>\n\n<p>Second piece of code doing the same thing but I am using instance variable and have figured out how to get desired output. However, please advise if there's a better way of doing this?</p>\n\n<pre><code>class Novel\n  def initialize(title, author, pages)\n    @title = title\n    @author = author\n    @pages = pages\n  end\n\n  def inspect\n    \"#{@title} is written by #{@author} and has #{@pages} pages\"\n  end\nend\n\nnovel1 = Novel.new('harry potter', 'JK Rowling', 300)\nputs novel1.inspect\n</code></pre>\n"}, {"tags": ["ruby", "jekyll", "homebrew", "rvm"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546367499, "post_id": 53994366, "comment_id": 94833000, "body": "What if you try Ruby 1.9.3 (the oldest version I&#39;d recommend and closer to your OS release date) and jekyll 2.5.3 (the last version to support Ruby 1.9.3)? Your OS is 11 years old, you may have to make do with older versions of these as well."}, {"owner": {"reputation": 220, "user_id": 5291993, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3be6ab83cb5ac668b2af4d697c1bbec6?s=128&d=identicon&r=PG&f=1", "display_name": "greystash", "link": "https://stackoverflow.com/users/5291993/greystash"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546385102, "post_id": 53994366, "comment_id": 94836408, "body": "That doesn&#39;t work either, see the above edit. Even tried with Jekyll 1.0.0"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546419955, "post_id": 53994366, "comment_id": 94843945, "body": "Any help from <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=42243\" rel=\"nofollow noreferrer\">this</a>? This is a tough problem, and before spending too much time on resolving it I&#39;d seriously consider finding a workaround."}], "answers": [{"tags": [], "owner": {"reputation": 220, "user_id": 5291993, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3be6ab83cb5ac668b2af4d697c1bbec6?s=128&d=identicon&r=PG&f=1", "display_name": "greystash", "link": "https://stackoverflow.com/users/5291993/greystash"}, "is_accepted": true, "score": 0, "last_activity_date": 1550914791, "creation_date": 1550914791, "answer_id": 54840254, "question_id": 53994366, "link": "https://stackoverflow.com/questions/53994366/installing-jekyll-on-mac-os-leopard-10-5-8/54840254#54840254", "title": "Installing Jekyll on Mac OS Leopard (10.5.8)", "body": "<p>So I figured out that the Make error is due to some dependencies being incompatible with the system. </p>\n\n<p>I managed to get Jekyll 3.8.5 installed on OSX 10.5.6 (Leopard) by running these commands:</p>\n\n<pre><code>sudo gem install ffi -v 1.7.0\n\nsudo gem install eventmachine -v 1.0.9.1\n\nsudo gem install jekyll -v 3.8.5\n</code></pre>\n\n<p>Now to try 10.4.8..</p>\n"}], "owner": {"reputation": 220, "user_id": 5291993, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3be6ab83cb5ac668b2af4d697c1bbec6?s=128&d=identicon&r=PG&f=1", "display_name": "greystash", "link": "https://stackoverflow.com/users/5291993/greystash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 54840254, "answer_count": 1, "score": 0, "last_activity_date": 1550914791, "creation_date": 1546335107, "last_edit_date": 1546384923, "question_id": 53994366, "link": "https://stackoverflow.com/questions/53994366/installing-jekyll-on-mac-os-leopard-10-5-8", "title": "Installing Jekyll on Mac OS Leopard (10.5.8)", "body": "<p>I'm trying to install Jekyll on Leopard but can't get it working. The most progress I've made is being able to run <code>gem install jekyll</code> in Terminal, but then I get the error <code>make failed, exit code 2</code>.</p>\n\n<ul>\n<li>I have tigerbrew installed (since brew is incompatible with leopard now)</li>\n<li>I have rvm installed (installed from source due to constant certificate/ssl errors)</li>\n<li>I have installed Ruby version 2.3.8p459 from source</li>\n<li>I have Xcode 3.1.3 installed</li>\n</ul>\n\n<p>I can't install ruby from rbenv or rvm due to cert/ssl errors, that's why I've installed it from source. I can install via <code>brew install ruby</code>, but get the same results.</p>\n\n<p>I've looked at many other posts regarding the <code>make failed</code> error which tends to be related to multiple Ruby versions. None of the answers on these pages worked as I've installed everything from source (ruby has never been installed by brew, rbenv or rvm).\nI have tried installing ruby with all of the above but got the same error.\nEach time I've tested installing Ruby either from source or from tigerbrew/homebrew I've clean installed a new system of Leopard + Xcode etc. I've also tried this on multiple machines.</p>\n\n<p>I've just updated rubygems to version 3.0.2, which fixed some certificate errors when installing gems but hasn't fixed the problem.</p>\n\n<p>Is there anything else I can do to get this working??</p>\n\n<p>Below is the output from Terminal when I run <code>gem install jekyll</code>. </p>\n\n<pre><code>jordans-power-mac-g4:desktop Jordan$ gem \n\ninstall jekyll\nFetching fast-stemmer-1.0.2.gem\nFetching sass-3.7.2.gem\nFetching ruby_dep-1.5.0.gem\nFetching coffee-script-source-1.11.1.gem\nFetching rb-fsevent-0.10.3.gem\nFetching rb-inotify-0.10.0.gem\nFetching jekyll-watch-1.5.1.gem\nFetching ffi-1.9.25.gem\nFetching coffee-script-2.4.1.gem\nFetching public_suffix-3.0.3.gem\nFetching sass-listen-4.0.0.gem\nFetching faraday-0.15.4.gem\nFetching listen-3.1.5.gem\nFetching jekyll-gist-1.5.0.gem\nFetching execjs-2.7.0.gem\nFetching blankslate-2.1.2.4.gem\nFetching parslet-1.5.0.gem\nFetching multipart-post-2.0.0.gem\nFetching jekyll-sass-converter-1.5.2.gem\nFetching yajl-ruby-1.2.3.gem\nFetching toml-0.1.2.gem\nFetching redcarpet-3.4.0.gem\nFetching octokit-4.13.0.gem\nFetching posix-spawn-0.3.13.gem\nFetching pygments.rb-0.6.3.gem\nFetching colorator-0.1.gem\nFetching liquid-2.6.3.gem\nFetching jekyll-paginate-1.1.0.gem\nFetching mercenary-0.3.6.gem\nFetching jekyll-coffeescript-1.1.1.gem\nFetching addressable-2.5.2.gem\nFetching sawyer-0.8.1.gem\nFetching kramdown-1.17.0.gem\nFetching safe_yaml-1.0.4.gem\nBuilding native extensions. This could take a while...\nSuccessfully installed fast-stemmer-1.0.2\nSuccessfully installed classifier-reborn-2.2.0\nSuccessfully installed rb-fsevent-0.10.3\nBuilding native extensions. This could take a while...\nERROR:  Error installing jekyll:\n    ERROR: Failed to build gem native extension.\n\n    current directory: /usr/local/lib/ruby/gems/2.3.0/gems/ffi-\n\n1.9.25/ext/ffi_c\n    /usr/local/bin/ruby -I /usr/local/lib/ruby/site_ruby/2.3.0 -r ./siteconf20190101-36895-fo3oja.rb extconf.rb\n    checking for ffi.h... no\n    checking for ffi.h in /usr/local/include,/usr/include/ffi... yes\n    checking for ffi_call() in -lffi... yes\n    checking for ffi_closure_alloc()... no\n    checking for ffi_raw_call()... no\n    checking for shlwapi.h... no\n    checking for ruby/thread.h... yes\n    checking for rb_thread_blocking_region()... no\n    checking for rb_thread_call_with_gvl()... yes\n    checking for rb_thread_call_without_gvl()... yes\n    creating extconf.h\n    creating Makefile\n\n    current directory: /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c\n    make \"DESTDIR=\" clean\n\n    current directory: /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c\n    make \"DESTDIR=\"\n    Configuring libffi\n    cd \"/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi-powerpc-darwin9.0\" &amp;&amp; make\n    make 'AR_FLAGS=' 'CC_FOR_BUILD=' 'CFLAGS=-Wall -fexceptions' 'CXXFLAGS=-g -O2' 'CFLAGS_FOR_BUILD=' 'CFLAGS_FOR_TARGET=' 'INSTALL=/usr/local/bin/ginstall -c' 'INSTALL_DATA=/usr/local/bin/ginstall -c -m 644' 'INSTALL_PROGRAM=/usr/local/bin/ginstall -c' 'INSTALL_SCRIPT=/usr/local/bin/ginstall -c' 'JC1FLAGS=' 'LDFLAGS=' 'LIBCFLAGS=' 'LIBCFLAGS_FOR_TARGET=' 'MAKE=make' 'MAKEINFO=/bin/sh /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/missing makeinfo ' 'PICFLAG=' 'PICFLAG_FOR_TARGET=' 'RUNTESTFLAGS=' 'SHELL=/bin/sh' 'exec_prefix=/usr/local' 'infodir=/usr/local/share/info' 'libdir=/usr/local/lib' 'mandir=/usr/local/share/man' 'prefix=/usr/local' 'AR=ar' 'AS=as' 'CC=gcc' 'CXX=g++' 'LD=ld' 'NM=/usr/bin/nm -p' 'RANLIB=ranlib' 'DESTDIR=' all-recursive\n    Making all in include\n    make[3]: Nothing to be done for `all'.\n    Making all in testsuite\n    make[3]: Nothing to be done for `all'.\n    Making all in man\n    make[3]: Nothing to be done for `all'.\n    /bin/sh ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi  -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src   -Wall -fexceptions -c -o src/prep_cif.lo /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src/prep_cif.c\n    libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src -Wall -fexceptions -c /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src/prep_cif.c  -fno-common -DPIC -o src/.libs/prep_cif.o\n    /bin/sh ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi  -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src   -Wall -fexceptions -c -o src/types.lo /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src/types.c\n    libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src -Wall -fexceptions -c /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src/types.c  -fno-common -DPIC -o src/.libs/types.o\n    /bin/sh ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi  -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src   -Wall -fexceptions -c -o src/raw_api.lo /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src/raw_api.c\n    libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src -Wall -fexceptions -c /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src/raw_api.c  -fno-common -DPIC -o src/.libs/raw_api.o\n    /bin/sh ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi  -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src   -Wall -fexceptions -c -o src/java_raw_api.lo /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src/java_raw_api.c\n    libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src -Wall -fexceptions -c /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src/java_raw_api.c  -fno-common -DPIC -o src/.libs/java_raw_api.o\n    /bin/sh ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi  -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src   -Wall -fexceptions -c -o src/closures.lo /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src/closures.c\n    libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src -Wall -fexceptions -c /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src/closures.c  -fno-common -DPIC -o src/.libs/closures.o\n    /bin/sh ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi  -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src   -Wall -fexceptions -c -o src/powerpc/ffi_darwin.lo /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c\n    libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi -I. -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src -Wall -fexceptions -c /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c  -fno-common -DPIC -o src/powerpc/.libs/ffi_darwin.o\n    /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c:1114: error: syntax error before \u2018*\u2019 token\n    /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c:1116: error: syntax error before \u2018)\u2019 token\n    /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c:1172: error: syntax error before \u2018*\u2019 token\n    /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c:1434: error: syntax error before \u2018*\u2019 token\n    /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c: In function \u2018ffi_go_closure_helper_DARWIN\u2019:\n    /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c:1437: error: \u2018closure\u2019 undeclared (first use in this function)\n    /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c:1437: error: (Each undeclared identifier is reported only once\n    /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c:1437: error: for each function it appears in.)\n    /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c:1438: error: \u2018rvalue\u2019 undeclared (first use in this function)\n    /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c:1438: error: \u2018pgr\u2019 undeclared (first use in this function)\n    /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c:1438: error: \u2018pfr\u2019 undeclared (first use in this function)\n    make[3]: *** [src/powerpc/ffi_darwin.lo] Error 1\n    make[2]: *** [all-recursive] Error 1\n    make[1]: *** [all] Error 2\n    make: *** [\"/usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25/ext/ffi_c/libffi-powerpc-darwin9.0\"/.libs/libffi_convenience.a] Error 2\n\n    make failed, exit code 2\n\n    Gem files will remain installed in /usr/local/lib/ruby/gems/2.3.0/gems/ffi-1.9.25 for inspection.\n    Results logged to /usr/local/lib/ruby/gems/2.3.0/extensions/powerpc-darwin-9/2.3.0-static/ffi-1.9.25/gem_make.out\n</code></pre>\n\n<p>Edit:</p>\n\n<p>Also tried with fresh OS install, Ruby 1.9.3p0, and Jekyll 2.0.2. Output results below.</p>\n\n<pre><code>    powerbook:~ Jordan$ sudo gem install jekyll -v 2.0.2\nFetching: liquid-2.5.5.gem (100%)\nFetching: fast-stemmer-1.0.2.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: mathn-0.1.0.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: classifier-1.3.5.gem (100%)\nFetching: hitimes-1.3.0.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: timers-4.0.4.gem (100%)\nFetching: celluloid-0.16.0.gem (100%)\nFetching: rb-fsevent-0.10.3.gem (100%)\nFetching: ffi-1.9.25.gem (100%)\nBuilding native extensions.  This could take a while...\nERROR:  Error installing jekyll:\n    ERROR: Failed to build gem native extension.\n\n        /usr/local/bin/ruby extconf.rb\nchecking for ffi.h... no\nchecking for ffi.h in /usr/local/include,/usr/include/ffi... yes\nchecking for ffi_call() in -lffi... yes\nchecking for ffi_closure_alloc()... no\nchecking for ffi_raw_call()... no\nchecking for shlwapi.h... no\nchecking for ruby/thread.h... no\nchecking for rb_thread_blocking_region()... yes\nchecking for rb_thread_call_with_gvl()... yes\nchecking for rb_thread_call_without_gvl()... yes\ncreating extconf.h\ncreating Makefile\n\nmake\nConfiguring libffi\ncd \"/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi-powerpc-darwin9.6.0\" &amp;&amp; make\nmake 'AR_FLAGS=' 'CC_FOR_BUILD=' 'CFLAGS=-Wall -fexceptions' 'CXXFLAGS=-g -O2' 'CFLAGS_FOR_BUILD=' 'CFLAGS_FOR_TARGET=' 'INSTALL=/usr/bin/install -c' 'INSTALL_DATA=/usr/bin/install -c -m 644' 'INSTALL_PROGRAM=/usr/bin/install -c' 'INSTALL_SCRIPT=/usr/bin/install -c' 'JC1FLAGS=' 'LDFLAGS=' 'LIBCFLAGS=' 'LIBCFLAGS_FOR_TARGET=' 'MAKE=make' 'MAKEINFO=/bin/sh /usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/missing makeinfo ' 'PICFLAG=' 'PICFLAG_FOR_TARGET=' 'RUNTESTFLAGS=' 'SHELL=/bin/sh' 'exec_prefix=/usr/local' 'infodir=/usr/local/share/info' 'libdir=/usr/local/lib' 'mandir=/usr/local/share/man' 'prefix=/usr/local' 'AR=ar' 'AS=as' 'CC=gcc' 'CXX=g++' 'LD=ld' 'NM=/usr/bin/nm -p' 'RANLIB=ranlib' 'DESTDIR=' all-recursive\nMaking all in include\nmake[3]: Nothing to be done for `all'.\nMaking all in testsuite\nmake[3]: Nothing to be done for `all'.\nMaking all in man\nmake[3]: Nothing to be done for `all'.\n/bin/sh ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi  -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src   -Wall -fexceptions -c -o src/prep_cif.lo /usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src/prep_cif.c\nlibtool: compile:  gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src -Wall -fexceptions -c /usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src/prep_cif.c  -fno-common -DPIC -o src/.libs/prep_cif.o\n/bin/sh ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi  -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src   -Wall -fexceptions -c -o src/types.lo /usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src/types.c\nlibtool: compile:  gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src -Wall -fexceptions -c /usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src/types.c  -fno-common -DPIC -o src/.libs/types.o\n/bin/sh ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi  -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src   -Wall -fexceptions -c -o src/raw_api.lo /usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src/raw_api.c\nlibtool: compile:  gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src -Wall -fexceptions -c /usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src/raw_api.c  -fno-common -DPIC -o src/.libs/raw_api.o\n/bin/sh ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi  -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src   -Wall -fexceptions -c -o src/java_raw_api.lo /usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src/java_raw_api.c\nlibtool: compile:  gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src -Wall -fexceptions -c /usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src/java_raw_api.c  -fno-common -DPIC -o src/.libs/java_raw_api.o\n/bin/sh ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi  -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src   -Wall -fexceptions -c -o src/closures.lo /usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src/closures.c\nlibtool: compile:  gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src -Wall -fexceptions -c /usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src/closures.c  -fno-common -DPIC -o src/.libs/closures.o\n/bin/sh ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi  -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src   -Wall -fexceptions -c -o src/powerpc/ffi_darwin.lo /usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c\nlibtool: compile:  gcc -DHAVE_CONFIG_H -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi -I. -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/include -Iinclude -I/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src -Wall -fexceptions -c /usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c  -fno-common -DPIC -o src/powerpc/.libs/ffi_darwin.o\n/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c:1114: error: syntax error before \u2018*\u2019 token\n/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c:1116: error: syntax error before \u2018)\u2019 token\n/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c:1172: error: syntax error before \u2018*\u2019 token\n/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c:1434: error: syntax error before \u2018*\u2019 token\n/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c: In function \u2018ffi_go_closure_helper_DARWIN\u2019:\n/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c:1437: error: \u2018closure\u2019 undeclared (first use in this function)\n/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c:1437: error: (Each undeclared identifier is reported only once\n/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c:1437: error: for each function it appears in.)\n/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c:1438: error: \u2018rvalue\u2019 undeclared (first use in this function)\n/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c:1438: error: \u2018pgr\u2019 undeclared (first use in this function)\n/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi/src/powerpc/ffi_darwin.c:1438: error: \u2018pfr\u2019 undeclared (first use in this function)\nmake[3]: *** [src/powerpc/ffi_darwin.lo] Error 1\nmake[2]: *** [all-recursive] Error 1\nmake[1]: *** [all] Error 2\nmake: *** [\"/usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/libffi-powerpc-darwin9.6.0\"/.libs/libffi_convenience.a] Error 2\n\n\nGem files will remain installed in /usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25 for inspection.\nResults logged to /usr/local/lib/ruby/gems/1.9.1/gems/ffi-1.9.25/ext/ffi_c/gem_make.out\n</code></pre>\n"}, {"tags": ["json", "ruby", "jekyll"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 9651869, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Fun Media", "link": "https://stackoverflow.com/users/9651869/fun-media"}, "edited": false, "score": 0, "creation_date": 1546332463, "post_id": 53994074, "comment_id": 94825795, "body": "Thanks, Now I get error like <code>2: from _scripts&#47;import.rb:18:in `&lt;main&gt;&#39; \t1: from _scripts&#47;import.rb:18:in `each&#39; _scripts&#47;import.rb:19:in `block in &lt;main&gt;&#39;: undefined method `last&#39; for #&lt;Hash:0x00005600277297a0&gt; (NoMethodError)</code>"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "reply_to_user": {"reputation": 67, "user_id": 9651869, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Fun Media", "link": "https://stackoverflow.com/users/9651869/fun-media"}, "edited": false, "score": 0, "creation_date": 1546334638, "post_id": 53994074, "comment_id": 94826146, "body": "I assume that you&#39;re trying to read the value of the <code>name</code> key in the hash (the URL like <code>https:&#47;&#47;www.flipkart.com&#47;...</code>). In that case, change <code>entry.last</code> to <code>entry[&#39;name&#39;]</code>, or <code>entry.fetch(&#39;name&#39;)</code>."}, {"owner": {"reputation": 67, "user_id": 9651869, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Fun Media", "link": "https://stackoverflow.com/users/9651869/fun-media"}, "edited": false, "score": 0, "creation_date": 1546336085, "post_id": 53994074, "comment_id": 94826376, "body": "Thanks, now error comes like <code>No such file or directory @ rb_sysopen - &#47;home&#47;_scripts&#47;_drafts&#47;https:&#47;&#47;www.flipkart.com&#47;redmi-note-6&zwnj;&#8203;-pro-black-64-gb&#47;p&#47;i&zwnj;&#8203;tmfayzxqnzjhtbh?affi&zwnj;&#8203;d=xxx,[Flipkart] Redmi Note 6 Pro (Black, 64 GB)\u00a0\u00a0(4 GB RAM) (Errno::ENOENT)</code>"}, {"owner": {"reputation": 67, "user_id": 9651869, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Fun Media", "link": "https://stackoverflow.com/users/9651869/fun-media"}, "edited": false, "score": 0, "creation_date": 1546337930, "post_id": 53994074, "comment_id": 94826711, "body": "fixed it by removing link in the <code>entry[&#39;name&#39;]</code>"}], "tags": [], "owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "is_accepted": true, "score": 4, "last_activity_date": 1546331986, "last_edit_date": 1546331986, "creation_date": 1546331635, "answer_id": 53994074, "question_id": 53993965, "link": "https://stackoverflow.com/questions/53993965/no-implicit-conversion-of-stringio-into-string-typeerror-ruby/53994074#53994074", "title": "no implicit conversion of StringIO into String (TypeError) - ruby", "body": "<p>Change this:</p>\n\n<pre><code>data = JSON.parse(open('https://script.google.com/macros/s/AKfycbyHFt1Yz96q91-D6eP4uWtRCcF_lzG2WM-sjrpZIr3s02HrICBQ/exec'))\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>data = JSON.parse(open('https://script.google.com/macros/s/AKfycbyHFt1Yz96q91-D6eP4uWtRCcF_lzG2WM-sjrpZIr3s02HrICBQ/exec').string)\n</code></pre>\n\n<p>The <code>.string</code> method <a href=\"https://ruby-doc.org/stdlib-2.5.1/libdoc/stringio/rdoc/StringIO.html#method-i-string\" rel=\"nofollow noreferrer\"><code>Returns underlying String object</code></a>.</p>\n\n<p>And while you're at it, change this:</p>\n\n<pre><code>array &amp;&amp; !array.empty?\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>array&amp;.any?\n</code></pre>\n\n<p><code>&amp;.</code> is the <a href=\"https://stackoverflow.com/q/36812647/3784008\">safe navigation operator</a> and it simplifies the process of checking for <code>nil</code> and calling a method on the object. And from a style perspective, it's preferred to call <code>array.any?</code> over <code>!array.empty?</code>.</p>\n\n<p>Finally, when using <code>FileUtils.mkdir_p</code> you do not have to include the guard condition <code>unless Dir.exist?(drafts_dir)</code>. It can be safely called without concern that it will remove or overwrite the existing directory.</p>\n"}], "owner": {"reputation": 67, "user_id": 9651869, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Fun Media", "link": "https://stackoverflow.com/users/9651869/fun-media"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4100, "favorite_count": 0, "accepted_answer_id": 53994074, "answer_count": 1, "score": 2, "last_activity_date": 1546331986, "creation_date": 1546330101, "last_edit_date": 1546331304, "question_id": 53993965, "link": "https://stackoverflow.com/questions/53993965/no-implicit-conversion-of-stringio-into-string-typeerror-ruby", "title": "no implicit conversion of StringIO into String (TypeError) - ruby", "body": "<p>I have a script called <code>import.rb</code> which will import json content from url to drafts directory in jekyll. Below is my code.</p>\n\n<pre><code>require 'fileutils'\nrequire 'json'\nrequire 'open-uri'\n\n# Load JSON data from source\n# (Assuming the data source is a json file on your file system)\ndata = JSON.parse(open('https://script.google.com/macros/s/AKfycbyHFt1Yz96q91-D6eP4uWtRCcF_lzG2WM-sjrpZIr3s02HrICBQ/exec'))\n\n# Proceed to create post files if the value array is not empty\narray = data[\"user\"]\nif array &amp;&amp; !array.empty?\n  # create the `_drafts` directory if it doesn't exist already\n  drafts_dir = File.expand_path('./_drafts', __dir__)\n  FileUtils.mkdir_p(drafts_dir) unless Dir.exist?(drafts_dir)\n\n  # iterate through the array and generate draft-files for each entry\n  # where entry.first will be the \"content\" and entry.last the \"title\"\n  array.each do |entry|\n    File.open(File.join(drafts_dir, entry.last), 'wb') do |draft|\n      draft.puts(\"---\\n---\\n\\n#{entry.first}\")\n    end\n  end\nend\n</code></pre>\n\n<p>When I run <code>ruby _scripts/import.rb</code> I get error like </p>\n\n<pre><code>3: from _scripts/import.rb:7:in `&lt;main&gt;'\n    2: from /usr/lib/ruby/2.5.0/json/common.rb:156:in `parse'\n    1: from /usr/lib/ruby/2.5.0/json/common.rb:156:in `new'\n    /usr/lib/ruby/2.5.0/json/common.rb:156:in `initialize': no implicit conversion of StringIO into String (TypeError)\n</code></pre>\n\n<p>Please suggest the corrections.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "ruby-on-rails-5", "factory"], "answers": [{"tags": [], "owner": {"reputation": 2890, "user_id": 1237117, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/H7dfY.jpg?s=128&g=1", "display_name": "mridula", "link": "https://stackoverflow.com/users/1237117/mridula"}, "is_accepted": true, "score": 1, "last_activity_date": 1546332687, "creation_date": 1546332687, "answer_id": 53994154, "question_id": 53993469, "link": "https://stackoverflow.com/questions/53993469/rails-factories-having-multiple-associations-to-same-object/53994154#53994154", "title": "Rails factories having multiple associations to same object", "body": "<p>You can use the <code>after(:build)</code> callback to build your <code>customer_address</code> records.</p>\n\n<pre><code>FactoryGirl.define do\n    factory :order do \n        association :customer\n        association :user\n        after(:build) do |order|\n            order.shipping_address = FactoryGirl.build(:customer_address, customer_id: order.customer_id)\n            order.billing_address = FactoryGirl.build(:customer_address, customer_id: order.customer_id)\n        end\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 655, "user_id": 6046641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c716b970d2d8e6ca81ed19a4b0c26fb1?s=128&d=identicon&r=PG", "display_name": "Umesh Malhotra", "link": "https://stackoverflow.com/users/6046641/umesh-malhotra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 53994154, "answer_count": 1, "score": 0, "last_activity_date": 1546332687, "creation_date": 1546324189, "question_id": 53993469, "link": "https://stackoverflow.com/questions/53993469/rails-factories-having-multiple-associations-to-same-object", "title": "Rails factories having multiple associations to same object", "body": "<p>I have a model which have associations like this:- </p>\n\n<pre><code> class Order &lt; ApplicationRecord\n  belongs_to :customer, inverse_of: :orders\n  belongs_to :user, inverse_of: :orders\n  belongs_to :shipping_address, class_name: \"Customer::Address\", inverse_of: :shipped_orders\n  belongs_to :billing_address, class_name: \"Customer::Address\", inverse_of: :billed_orders\nend\n</code></pre>\n\n<p>Also, customer_address have a field customer_id. My factory is like this:-</p>\n\n<pre><code>FactoryGirl.define do\n  factory :order do \n    customer\n    user\n    association :shipping_address, factory: :customer_address, customer_id: customer.id \n    association :billing_address, factory: :customer_address, customer_id: customer.id\n  end\nend\n</code></pre>\n\n<p>But I am not able to access customer.id. I am getting this error:- </p>\n\n<pre><code>undefined method `id' for #&lt;FactoryGirl::Declaration::Implicit:0x007fa3e6979d70&gt;\n</code></pre>\n\n<p>How can I pass customer.id to shipping_address and billing_address association?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1546317454, "post_id": 53992960, "comment_id": 94823790, "body": "inspect <code>&lt;%= @order.errors.full_messages %&gt;</code> in view and check whether error message present or not"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1546317661, "post_id": 53992960, "comment_id": 94823814, "body": "hm.  I searchd for &quot;full_messages&quot; and nothing came up"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1546317844, "post_id": 53992960, "comment_id": 94823831, "body": "Then I am sure, @order is not validated in action by <code>valid?</code> or save methods (save, update_attributes etc). You need to provide your  code of action called"}, {"owner": {"reputation": 95, "user_id": 9361533, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-skZgtkXNKK4/AAAAAAAAAAI/AAAAAAAAAVw/ChuLDYzLJpI/photo.jpg?sz=128", "display_name": "Bhargav Reddy", "link": "https://stackoverflow.com/users/9361533/bhargav-reddy"}, "edited": false, "score": 0, "creation_date": 1546319930, "post_id": 53992960, "comment_id": 94824050, "body": "I saw this in ror guides  <code>&gt;&gt;p = Person.new     # =&gt; #&lt;Person id: nil, name: nil&gt;    &gt;&gt; p.errors.messages    # =&gt; {}     &gt;&gt; p.valid?     # =&gt; false     &gt;&gt; p.errors.messages     # =&gt; {name:[&quot;can&#39;t be blank&quot;]}    &gt;&gt; p = Person.create     # =&gt; #&lt;Person id: nil, name: nil&gt;     &gt;&gt; p.errors.messages     # =&gt; {name:[&quot;can&#39;t be blank&quot;]}</code>"}, {"owner": {"reputation": 95, "user_id": 9361533, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-skZgtkXNKK4/AAAAAAAAAAI/AAAAAAAAAVw/ChuLDYzLJpI/photo.jpg?sz=128", "display_name": "Bhargav Reddy", "link": "https://stackoverflow.com/users/9361533/bhargav-reddy"}, "edited": false, "score": 0, "creation_date": 1546320071, "post_id": 53992960, "comment_id": 94824073, "body": "so you need to call valid? or save methods after creating model objects"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1546323409, "post_id": 53992960, "comment_id": 94824487, "body": "@ray Code of action.. can you clarify.  Do you mean the en.yml ? or the controller code?"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 95, "user_id": 9361533, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-skZgtkXNKK4/AAAAAAAAAAI/AAAAAAAAAVw/ChuLDYzLJpI/photo.jpg?sz=128", "display_name": "Bhargav Reddy", "link": "https://stackoverflow.com/users/9361533/bhargav-reddy"}, "edited": false, "score": 0, "creation_date": 1546323456, "post_id": 53992960, "comment_id": 94824494, "body": "@BhargavReddy I&#39;m only looking for the error from the validates to show up.  It&#39;s separate than the create or update methods in the controller --- as I said, I have used this same code elsewhere for validates error message but the only difference is, this is a nested resource.  And I don&#39;t understand why the message won&#39;t appear."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1546323624, "post_id": 53992960, "comment_id": 94824516, "body": "@ray On the page where this code works on another form... the &quot;full_messages&quot; doesn&#39;t show up either.  Not sure if that&#39;s the issue anymore.  I can only assume its&#39; the html as of now unless someone has another opinion"}, {"owner": {"reputation": 920, "user_id": 3512189, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/hXdNN.jpg?s=128&g=1", "display_name": "wasipeer", "link": "https://stackoverflow.com/users/3512189/wasipeer"}, "edited": false, "score": 0, "creation_date": 1546324512, "post_id": 53992960, "comment_id": 94824638, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/30181303/how-to-show-nested-form-validation-errors-after-the-validation-errors-for-the-pa\">How to show nested form validation errors after the validation errors for the parent model?</a>"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 920, "user_id": 3512189, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/hXdNN.jpg?s=128&g=1", "display_name": "wasipeer", "link": "https://stackoverflow.com/users/3512189/wasipeer"}, "edited": false, "score": 0, "creation_date": 1546325513, "post_id": 53992960, "comment_id": 94824754, "body": "@wasipeer I updated my OP.  If you see a reason for how it&#39;s a duplicate, please let me know."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1546326132, "post_id": 53992960, "comment_id": 94824835, "body": "@ray It actually is possible this is an issue with my create method in my orders controller.  I&#39;m going to post it in the end of my OP at the bottom.  because I use valid? to create charges ."}, {"owner": {"reputation": 95, "user_id": 9361533, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-skZgtkXNKK4/AAAAAAAAAAI/AAAAAAAAAVw/ChuLDYzLJpI/photo.jpg?sz=128", "display_name": "Bhargav Reddy", "link": "https://stackoverflow.com/users/9361533/bhargav-reddy"}, "edited": false, "score": 0, "creation_date": 1546342029, "post_id": 53992960, "comment_id": 94827421, "body": "What I know is  &#39;save&#39; method also generates error messages in the model object if the object  is not valid, I think that might be the problem"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1546382159, "post_id": 53992960, "comment_id": 94835946, "body": "Something is disturbing the validates error message from appearing."}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 229, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1546326368, "creation_date": 1546315980, "last_edit_date": 1546326368, "question_id": 53992960, "link": "https://stackoverflow.com/questions/53992960/showing-error-message-in-form-for-nested-forms", "title": "Showing error message in form for Nested forms?", "body": "<p><strong>Issue:</strong> I have a form which uses nested resources and for some reason no error messages are appearing like they do in my other forms.</p>\n\n<p><strong>This is my form:</strong> (in short)</p>\n\n<pre><code>&lt;%= form_for(@order, url: listing_orders_path([@listing, @listing_tweet]), remote: true) do |form| %&gt;\n\n&lt;% if @order.errors.any? %&gt;\n &lt;ul&gt;\n   &lt;% @order.errors.full_messages.each do |msg| %&gt;\n    &lt;div class=\"alert alert-danger alert-dismissable\"&gt;\n     &lt;button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-hidden=\"true\"&gt;&amp;times;&lt;/button&gt;\n      &lt;%= msg %&gt;\n    &lt;/div&gt;\n   &lt;% end %&gt;\n  &lt;/ul&gt;\n&lt;% end %&gt;\n\n &lt;div class=\"form-group\"&gt;\n  &lt;%= form.label :twitter_link, \"Twitter Link\" %&gt;\n  &lt;%= form.text_field :twitter_link, class: \"form-control\", required: true  %&gt;\n &lt;/div&gt;\n\n   &lt;% form.hidden_field :order_type, value: 2 %&gt;\n\n   &lt;%= form.submit %&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>order.rb model:</strong></p>\n\n<pre><code>  validates :twitter_link, format: { with: /\\A((http|https):\\/\\/)?(www.)?twitter.com\\//,\n    message: \"use a valid twitter url\" }\n</code></pre>\n\n<p>The validation itself is working, just the message won't appear.</p>\n\n<p><strong>Question:</strong> How do I correct my html or any other code to have the error message appear?</p>\n\n<p>The idea is that if a URL doesn't include or begin with twitter.com, they error message should appear.</p>\n\n<hr>\n\n<p>I used this exact error code in other forms but the only difference is that this form is using nested resources.  So I have tried doing things like </p>\n\n<p>if @order([@listing, @listing_tweet]), etc (other combinations similar) but none allow the page to load.  I would assume @order should work fine because that's where the submit goes</p>\n\n<p>As an explanation to the possible duplicate.... My error message for the validation ISN'T appearing at all.  The \"possible duplicate\" question is in reference to the order of their error messages.</p>\n\n<p><strong>I will show below where my code works, and then after, where it doesn't work [with the nested resources]</strong></p>\n\n<p><strong>Form:</strong></p>\n\n<pre><code>&lt;%= form_for([@listing, @listing_tweet]) do |form| %&gt;\n   &lt;% if @listing_tweet.errors.any? %&gt;\n      &lt;ul&gt;\n        &lt;% @listing_tweet.errors.full_messages.each do |msg| %&gt;\n          &lt;div class=\"alert alert-danger alert-dismissable\"&gt;\n            &lt;button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-hidden=\"true\"&gt;&amp;times;&lt;/button&gt;\n            &lt;%= msg %&gt;\n          &lt;/div&gt;\n          &lt;% end %&gt;\n        &lt;/ul&gt;\n        &lt;% end %&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"field col-10\"&gt;\n      &lt;%= form.text_field :price, class: \"form-control\"  %&gt;\n      &lt;%= form.label :price %&gt;\n    &lt;/div&gt;\n    &lt;br&gt;\n    &lt;div class=\"actions col-2\"&gt;\n      &lt;%= form.submit \"Submit\", class: \"btn btn-success\"  %&gt;\n    &lt;/div&gt;\n\n\n    &lt;% end %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p><strong>Listing tweet model:</strong></p>\n\n<pre><code>validates :price, :numericality =&gt; {:only_integer =&gt; true, greater_than_or_equal_to: 5, message: \"must be great than or equal to $5\" }\n</code></pre>\n\n<p>The above code generates an error message when the text_field input isn't validates</p>\n\n<p>The difference between this and the form I have issues with is that it is a double nested form.  Not sure how to explain other than \"double nested\" but you can see the difference above.</p>\n\n<p>Both create methods in the controllers use this formatting:</p>\n\n<pre><code>else\n  format.html { render :new }\n  format.json { render json: @order.errors, status: :unprocessable_entity }\nend\n</code></pre>\n\n<hr>\n\n<p>UPDATE:</p>\n\n<p>I was thinking it may be an issue with my create method since I use valid? before initiating my charge code nd after ray mentioned it...</p>\n\n<p><strong>Here's my create in short:</strong></p>\n\n<pre><code>def create\n    @order = Order.new(order_params)\n    @listing = Listing.find(params[:listing_id])\n    #more code here\n\n\n        if @order.valid?\n          begin\n\n            ###stripe code here to create charges\n\n          rescue Stripe::CardError =&gt; e\n            charge_error = e.message\n          end\n          if charge_error\n            flash[:error] = charge_error\n            redirect_to listing_path(@listing)\n          else\n\n\n        respond_to do |format|\n          if @order.save\n            @order.update_column(:order_status, 1)\n            if user_signed_in?\n              # @user = current_user\n              # OrderMailer.order_email(@user, @order).deliver\n              format.html { redirect_to @order, notice: 'Order was successfully created.' }\n              format.json { render :show, status: :created, location: @order }\n              else\n                format.html { render :new }\n                format.json { render json: @order.errors, status: :unprocessable_entity }\n              end\n            end\n          end\n        end\n      end\n    end\n</code></pre>\n\n<p>Any issues in the create method to cause the validates error message to not appear?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "answers": [{"tags": [], "owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "is_accepted": true, "score": 1, "last_activity_date": 1546315255, "creation_date": 1546315255, "answer_id": 53992924, "question_id": 53992799, "link": "https://stackoverflow.com/questions/53992799/heroku-push-rejected-cannot-find-gem-multipart-post/53992924#53992924", "title": "Heroku Push Rejected - Cannot find gem multipart-post", "body": "<p>You can see the <a href=\"https://rubygems.org/gems/multipart-post/versions/2.0.0\" rel=\"nofollow noreferrer\">RubyGems</a> site &amp; use proper version format such as </p>\n\n<pre><code>gem 'multipart-post', '~&gt; 2.0'\n</code></pre>\n\n<p>and again commit lifecycle &amp; see what happens </p>\n"}], "owner": {"reputation": 60, "user_id": 6736517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a6338ca2ddc4b62f44c8e45144f974d?s=128&d=identicon&r=PG&f=1", "display_name": "Sillico", "link": "https://stackoverflow.com/users/6736517/sillico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 53992924, "answer_count": 1, "score": 0, "last_activity_date": 1546315255, "creation_date": 1546312223, "question_id": 53992799, "link": "https://stackoverflow.com/questions/53992799/heroku-push-rejected-cannot-find-gem-multipart-post", "title": "Heroku Push Rejected - Cannot find gem multipart-post", "body": "<p>I finished setting up OAuth in my app, but I can't seem to push to Heroku. There is a gem dependency that was installed (and everything works locally), but Heroku rejects the push. </p>\n\n<p>I have tried deleted my .lock file, .bundle, and have tried bundle update as well. Heroku will not accept the push</p>\n\n<pre><code>remote: Compressing source files... done.\nremote: Building source:\nremote:\nremote: -----&gt; Ruby app detected\nremote: -----&gt; Compiling Ruby/Rails\nremote: -----&gt; Using Ruby version: ruby-2.5.3\nremote: -----&gt; Installing dependencies using bundler 1.15.2\nremote:        Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin -j4 --deployment\nremote:        Warning: the running version of Bundler (1.15.2) is older than the version that created the lockfile (1.17.1). We suggest you upgrade to the latest version of Bundler by running `gem install bundler`.\nremote:        Fetching gem metadata from https://rubygems.org/........\nremote:        Fetching version metadata from https://rubygems.org/..\nremote:        Fetching dependency metadata from https://rubygems.org/.\nremote:        Could not find multipart-post-2.0.0 in any of the sources\nremote:        Bundler Output: Warning: the running version of Bundler (1.15.2) is older than the version that created the lockfile (1.17.1). We suggest you upgrade to the latest version of Bundler by running `gem install bundler`.\nremote:        Fetching gem metadata from https://rubygems.org/........\nremote:        Fetching version metadata from https://rubygems.org/..\nremote:        Fetching dependency metadata from https://rubygems.org/.\nremote:        Could not find multipart-post-2.0.0 in any of the sources\nremote:\nremote:  !\nremote:  !     Failed to install gems via Bundler.\nremote:  !\nremote:  !     Push rejected, failed to compile Ruby app.\nremote:\nremote:  !     Push failed\n</code></pre>\n\n<p>The gem is supposed to be <code>multipart-post</code> (version 2.0.0), but for some reason it is including the version as part of the gem file. Any thoughts?</p>\n"}, {"tags": ["ruby", "struct", "equality", "class-instance-variables"], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 4858223, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IFx6P.gif?s=128&g=1", "display_name": "MorboRe&#39;", "link": "https://stackoverflow.com/users/4858223/morbore"}, "edited": false, "score": 0, "creation_date": 1546300056, "post_id": 53992137, "comment_id": 94821960, "body": "I meant why are the hash int are different for same-valued-Class-instances but same hash int for Struct instances with the same value?"}, {"owner": {"reputation": 121, "user_id": 4858223, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IFx6P.gif?s=128&g=1", "display_name": "MorboRe&#39;", "link": "https://stackoverflow.com/users/4858223/morbore"}, "edited": false, "score": 0, "creation_date": 1546300427, "post_id": 53992137, "comment_id": 94822022, "body": "I thought the behavior is odd since both Struct and Class inherits #hash from Kernel but they act differently."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 1, "creation_date": 1546343379, "post_id": 53992137, "comment_id": 94827713, "body": "They are not the same methods. <a href=\"https://ruby-doc.org/core/Struct.html#method-i-hash\" rel=\"nofollow noreferrer\"><code>Struct#hash</code></a> is a different (overwritten) method from <code>Kernel#hash</code> to take into account the different equality rules. Note that an object&#39;s <code>hash</code> is not strictly used for object equality usually but to identify a key for an object to be used e.g. as a key in a <code>Hash</code> object. If two objects have the same <code>hash</code> value, they will use the same &quot;slot&quot; in a <code>Hash</code> object."}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "reply_to_user": {"reputation": 121, "user_id": 4858223, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IFx6P.gif?s=128&g=1", "display_name": "MorboRe&#39;", "link": "https://stackoverflow.com/users/4858223/morbore"}, "edited": false, "score": 0, "creation_date": 1546438116, "post_id": 53992137, "comment_id": 94852131, "body": "@MorboRe&#39; the link &amp; explanation posted by Holger is the answer to your hash question specifically. If you toggle source you can see that they&#39;re building the hash from (what looks like) the member values. This aligns with why equality is calculated differently (that&#39;s how it&#39;s meant to work, because it calculates the hash based on values )"}, {"owner": {"reputation": 121, "user_id": 4858223, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IFx6P.gif?s=128&g=1", "display_name": "MorboRe&#39;", "link": "https://stackoverflow.com/users/4858223/morbore"}, "edited": false, "score": 0, "creation_date": 1546509056, "post_id": 53992137, "comment_id": 94875642, "body": "interesting, I tried Struct.new(&quot;N&quot;).method(:hash).owner to find out the owner of the #hash method then got return value as Kernel.  I ran some test with instance methods from some customized Class but the result of that turns out to be my last modified Class.  Therefore I assume #owner returns the last overridden Class as the result.  Since Struct inherits from Emuerable.  I guess #hash was redefined there because the equality test for Emuerable works the same way.  thx for explanation"}], "tags": [], "owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "is_accepted": true, "score": 5, "last_activity_date": 1546300032, "last_edit_date": 1546300032, "creation_date": 1546299238, "answer_id": 53992137, "question_id": 53992097, "link": "https://stackoverflow.com/questions/53992097/why-equality-check-for-instance-of-struct-class-are-different/53992137#53992137", "title": "Why equality check for instance of Struct/Class are different?", "body": "<p>I believe the answer you're looking for is found in the <a href=\"https://ruby-doc.org/core-2.2.0/Struct.html#method-i-3D-3D\" rel=\"noreferrer\">Struct documentation</a></p>\n\n<pre><code>Equality\u2014Returns true if other has the same struct subclass \nand has equal member values (according to Object#==).\n</code></pre>\n\n<p>Your example has equal member values for <code>str_a</code> and <code>str_b</code>, and they have the same subclass (<code>Customer</code>), so they are equal when compared with <code>==</code></p>\n\n<p>Contrast this with the <a href=\"http://ruby-doc.org/core-2.5.3/Object.html#method-i-eql-3F\" rel=\"noreferrer\">Object documentation</a></p>\n\n<pre><code>Equality \u2014 At the Object level, == returns true only if \nobj and other are the same object. Typically, this method is\noverridden in descendant classes to provide class-specific meaning.\n</code></pre>\n\n<p>In your example, <code>foo_a</code> and <code>foo_b</code> are not the same object (because they're not the same instance)</p>\n\n<p>If you're seeking <em>why</em> these are different, I didn't really answer that question. Just that the behavior is as intended per the docs. They don't actually have the same ID:</p>\n\n<pre><code>pry &gt;&gt; Bar = Struct.new(:name) do; end\n=&gt; Bar &lt; Struct\npry &gt;&gt; x = Bar.new\n=&gt; #&lt;Struct:Bar:0x7f8ebca47610\n        name = nil\n\npry &gt;&gt; y = Bar.new\n=&gt; #&lt;Struct:Bar:0x7f8ebca14058\n        name = nil\n\npry &gt;&gt; x.name = \"foo\"\n=&gt; \"foo\"\npry &gt;&gt; y.name = \"foo\"\n=&gt; \"foo\"\npry &gt;&gt; x\n=&gt; #&lt;Struct:Bar:0x7f8ebca47610\n        name = \"foo\"\n\npry &gt;&gt; y\n=&gt; #&lt;Struct:Bar:0x7f8ebca14058\n        name = \"foo\"\n</code></pre>\n\n<p>But, you'll note comparison is based on attributes, rather than the object ID:</p>\n\n<pre><code>pry &gt;&gt; x == y\n=&gt; true\n</code></pre>\n\n<p>Even though the object id's are different:</p>\n\n<pre><code>pry &gt;&gt; x.__id__\n=&gt; 70125513489160\npry &gt;&gt; y.__id__\n=&gt; 70125513383980\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 4858223, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IFx6P.gif?s=128&g=1", "display_name": "MorboRe&#39;", "link": "https://stackoverflow.com/users/4858223/morbore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 0, "accepted_answer_id": 53992137, "answer_count": 1, "score": 1, "last_activity_date": 1546303371, "creation_date": 1546298528, "last_edit_date": 1546303371, "question_id": 53992097, "link": "https://stackoverflow.com/questions/53992097/why-equality-check-for-instance-of-struct-class-are-different", "title": "Why equality check for instance of Struct/Class are different?", "body": "<p>I don't understand the difference between struct and class equality check.  Since both Struct and Class gets their #hash from Kernel but they seem to behave differently.</p>\n\n<p>I know that instance.hash will produce a different result for each class instance.  Struct instance has different ancestors [Customer, Struct, Enumerable, Object, Kernel, BasicObject] compare to Class instance [Foo, Object, Kernel, BasicObject].  What really caused each Class instance to have a different hash number to othe</p>\n\n<pre><code>Customer = Struct.new(:name, :phone, :address) do\n\nend\n\nclass Foo\n  def initialize(the_name, phone, address)\n    @name = the_name\n    @phone = phone\n    @address = address\n  end\nend\n\n\nstr_a = Customer.new('bond', 'ring', 'address')\nstr_b = Customer.new('bond', 'ring', 'address')\n\nfoo_a = Foo.new('bond', 'ring', 'address')\nfoo_b = Foo.new('bond', 'ring', 'address')\n\np str_a == str_b #true\np foo_a == foo_b #false\n\np str_a.hash # 4473040617195177332\np str_b.hash # 4473040617195177332\np foo_a.hash # -3118151143418428190\np foo_b.hash # -1042397847400824657\n\np str_a.method(:hash).owner #Kernel\np foo_a.method(:hash).owner #Kernel\n</code></pre>\n\n<p>both Struct and Class use Kernel for its hash_number generation.  Why do a different instance of Class produce different hash int but Struct instance would produce the same hash int?  </p>\n"}, {"tags": ["ruby", "nginx", "logging", "sinatra"], "comments": [{"owner": {"reputation": 623, "user_id": 846250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o1e1i.png?s=128&g=1", "display_name": "To\ub9c8SE", "link": "https://stackoverflow.com/users/846250/to%eb%a7%88se"}, "edited": false, "score": 0, "creation_date": 1546585561, "post_id": 53991140, "comment_id": 94904410, "body": "This looks like a &quot;top-level&quot; Sinatra application, where logging is enabled by default, and is displayed in the console from which you started it. How do you start your Sinatra application?"}, {"owner": {"reputation": 11596, "user_id": 465986, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/592491f3adae59ba7f0416760d5361ab?s=128&d=identicon&r=PG", "display_name": "AKWF", "link": "https://stackoverflow.com/users/465986/akwf"}, "reply_to_user": {"reputation": 623, "user_id": 846250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o1e1i.png?s=128&g=1", "display_name": "To\ub9c8SE", "link": "https://stackoverflow.com/users/846250/to%eb%a7%88se"}, "edited": false, "score": 0, "creation_date": 1546620226, "post_id": 53991140, "comment_id": 94921293, "body": "bundle exec rackup config.ru -D"}], "answers": [{"comments": [{"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "reply_to_user": {"reputation": 11596, "user_id": 465986, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/592491f3adae59ba7f0416760d5361ab?s=128&d=identicon&r=PG", "display_name": "AKWF", "link": "https://stackoverflow.com/users/465986/akwf"}, "edited": false, "score": 0, "creation_date": 1547079330, "post_id": 54068487, "comment_id": 95072847, "body": "@AKWF I put it either before the Sinatra app declaration(s) - if there&#39;s only one file then stick it at or near the top - or in the config.ru if there is one. Basically, somewhere in the chain of files near the beginning so that it&#39;s declared in time for anything that needs it to use it during start up."}, {"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "reply_to_user": {"reputation": 11596, "user_id": 465986, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/592491f3adae59ba7f0416760d5361ab?s=128&d=identicon&r=PG", "display_name": "AKWF", "link": "https://stackoverflow.com/users/465986/akwf"}, "edited": false, "score": 0, "creation_date": 1547171715, "post_id": 54068487, "comment_id": 95110259, "body": "@AKWF If they&#39;re the only files relating to the sinatra app, sure."}], "tags": [], "owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "is_accepted": true, "score": 1, "last_activity_date": 1546834529, "creation_date": 1546834529, "answer_id": 54068487, "question_id": 53991140, "link": "https://stackoverflow.com/questions/53991140/does-my-sinatra-api-application-need-a-class-declaration/54068487#54068487", "title": "Does my Sinatra API application need a class declaration?", "body": "<p>Have a look at Sinatra's <a href=\"http://sinatrarb.com/intro\" rel=\"nofollow noreferrer\">README</a> in the Logging section but I tend to set up a logger outside of the Sinatra app in case other bits get bolted on or several apps are used together and I can use the same logger for all of them. Simplest way is a global variable (one of the few places they're acceptable, but it's not the only way) :</p>\n\n<pre><code>require 'mono_logger' # because it's thread safe\nrequire 'pathname'    # because paths aren't strings :)\n\nlog_path = Pathname(__dir__).join(\"logs/app.log\")\n$logger = MonoLogger.new(log_path)\n$logger.level = MonoLogger::INFO\n</code></pre>\n\n<p>Then in a route or wherever:</p>\n\n<pre><code>get '/' do\n  $logger.info \"here\"\n</code></pre>\n\n<p>In my terminal:</p>\n\n<pre><code>$ cat logs/app.log \nI, [2019-01-07T13:03:52.989415 #64378]  INFO -- : here\n</code></pre>\n\n<p>As to configuration blocks, you don't need to worry about putting them within a class declaration unless you're using a modular app (see Modular vs. Classic Style in the README) and yours is in the classic style.</p>\n\n<p>Configuration blocks aren't namespaced (<a href=\"http://sinatrarb.com/contrib/namespace.html\" rel=\"nofollow noreferrer\">Sinatra::Namespace</a> handles things that take a route as an argument, like <code>get</code> and <code>before</code>) so follow convention and stick it near the top of the file.</p>\n\n<p>Hope that helps.</p>\n"}], "owner": {"reputation": 11596, "user_id": 465986, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/592491f3adae59ba7f0416760d5361ab?s=128&d=identicon&r=PG", "display_name": "AKWF", "link": "https://stackoverflow.com/users/465986/akwf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 54068487, "answer_count": 1, "score": 1, "last_activity_date": 1546834564, "creation_date": 1546287671, "last_edit_date": 1546834564, "question_id": 53991140, "link": "https://stackoverflow.com/questions/53991140/does-my-sinatra-api-application-need-a-class-declaration", "title": "Does my Sinatra API application need a class declaration?", "body": "<p>Someone developed an API application for me that works well. Unfortunately, it doesn't log anywhere and there are no logs at all. The app runs with the \"rackup\" command and sits behind an nginx web server. The Sinatra errors are not logged to the nginx logs.</p>\n\n<p>The <code>app.rb</code> file looks something like this:</p>\n\n<pre><code>require './libs'\nrequire 'sinatra'\nrequire 'sinatra/namespace'\n\nset :bind, '::1'\n\nbefore do\n  content_type :json\n  headers 'Access-Control-Allow-Origin' =&gt; '*',  'Access-Control-Allow-Methods' =&gt; ['OPTIONS', 'GET', 'POST']\nend\n\nnamespace '/api/v1' do\n  namespace '/getit/:thingtoget' do\n    helpers do\n      def myhelper1\n        &lt;stuff&gt;\n      end\n      def myhelper1\n        &lt;stuff&gt;\n      end\n   end\n\n   before do\n     myhelper1\n     myhelper2\n   end\n\n   get '/info' do\n     WidgetDomain::get_info(@va1, @var2).to_json\n   end\n\n   &lt;more API paths here&gt;\n\n end\n</code></pre>\n\n<p>Now this is working fine. But now I want to introduce logging. So I looked at the Sinatra README and it said I could enable logging like so:</p>\n\n<pre><code>class MyApp &lt; Sinatra::Base\n  configure :production, :development do\n    enable :logging\n  end\nend\n</code></pre>\n\n<p>Do I put that above the <code>namespace</code> stuff? If I declare an app like that, does my namespace stuff need to be inside that app code somehow? I don't have a grasp of how this works at all.</p>\n\n<p>It almost looks like it's <em>trying</em> to log in the nginx log, but here's what an error line looks like there:</p>\n\n<pre><code>2018/12/30 19:53:15 [error] 6615#0: *21522 connect() failed (111: Connection refused) while connecting to upstream, client: &lt;someip&gt;, server: api.example.com, request: \"GET /api/v1/getit/thingtoget1/stuff/var1/var2/var3 HTTP/1.1\", upstream: \"http://[::1]:9292/api/v1/getit/thingtoget/stuff/var1/var2/var3\", host: \"api.example.com\", referrer: \"an HTML page from the nginx server\"\n</code></pre>\n\n<p>It's almost like it's trying to connect back to the server to retrieve a message or something. But in case the logging has something to do with the way I've declared the server in the nginx configuration, here it is:</p>\n\n<pre><code>server {\n    listen 443;\n    listen [::]:443;\n    server_name api.myapp.com;\n\n    ssl on;\n    ssl_certificate /etc/nginx/ssl/myapp_com.pem;\n    ssl_certificate_key /etc/nginx/ssl/star_myapp_com.key;\n\n    location / {\n      proxy_pass http://localhost:9292;\n    }\n\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "actionmailer", "rails-activestorage"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 1, "creation_date": 1546293798, "post_id": 53990639, "comment_id": 94821172, "body": "<code>File.read</code> expects a local file, not a URL."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 7526673, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208191469968821/picture?type=large", "display_name": "Ermek Rysbek Uulu", "link": "https://stackoverflow.com/users/7526673/ermek-rysbek-uulu"}, "edited": false, "score": 0, "creation_date": 1546449360, "post_id": 53991771, "comment_id": 94857684, "body": "Hi thanks, yes I did the same right before, however, how does it affect memory? Will the system store that file in cache or tmp? How can I delete them afterward?"}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "reply_to_user": {"reputation": 53, "user_id": 7526673, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208191469968821/picture?type=large", "display_name": "Ermek Rysbek Uulu", "link": "https://stackoverflow.com/users/7526673/ermek-rysbek-uulu"}, "edited": false, "score": 0, "creation_date": 1546454873, "post_id": 53991771, "comment_id": 94859873, "body": "<code>Blob#download</code> gets read into memory and then later collected by Ruby&#39;s GC. If you pass a block to <code>Blob#download</code> it will streamed and yielded in chunks."}], "tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": false, "score": 4, "last_activity_date": 1546294041, "creation_date": 1546294041, "answer_id": 53991771, "question_id": 53990639, "link": "https://stackoverflow.com/questions/53990639/attach-active-storage-file-to-mailer/53991771#53991771", "title": "Attach active storage file to mailer", "body": "<p>You should be able to do something like,</p>\n\n<pre><code>statement.files.each_with_index do |file, q|\n  attachments[\"statement_#{q + 1}.pdf\"] = { mime_type: 'application/pdf', content: file.blob.download }\nend\n</code></pre>\n\n<p><code>file.blob.download</code> will return the content of the file, similar to <code>File.read</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 665, "user_id": 4773859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02d0e17759aaf6c044a55251ceab97ca?s=128&d=identicon&r=PG&f=1", "display_name": "Markus Andreas", "link": "https://stackoverflow.com/users/4773859/markus-andreas"}, "is_accepted": false, "score": 5, "last_activity_date": 1585859883, "creation_date": 1585859883, "answer_id": 61000707, "question_id": 53990639, "link": "https://stackoverflow.com/questions/53990639/attach-active-storage-file-to-mailer/61000707#61000707", "title": "Attach active storage file to mailer", "body": "<p>If somebody lands here looking for a general solution:</p>\n\n<pre><code>modelname.attachments.each do |file|\n  attachments[file.blob.filename.to_s] = {\n    mime_type: file.blob.content_type,\n    content: file.blob.download\n  }\nend\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 7526673, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208191469968821/picture?type=large", "display_name": "Ermek Rysbek Uulu", "link": "https://stackoverflow.com/users/7526673/ermek-rysbek-uulu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1657, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1585859883, "creation_date": 1546282970, "question_id": 53990639, "link": "https://stackoverflow.com/questions/53990639/attach-active-storage-file-to-mailer", "title": "Attach active storage file to mailer", "body": "<p>I have tried everything and still can't get this to work. </p>\n\n<p>I have two types of application in my system that are pre-qualified and sent to lenders, </p>\n\n<p>1) one generates a pdf\n2) second should use active storage attachments and attach them to an ActionMailer</p>\n\n<p>First one is working the second is giving me the following error:</p>\n\n<blockquote>\n  <p>[ActionMailer::DeliveryJob] [905177a5-b0e9-46f4-ba9a-fc4630e873f9]\n  Error performing ActionMailer::DeliveryJob (Job ID:\n  905177a5-b0e9-46f4-ba9a-fc4630e873f9) from Async(mailers) in 140.14ms:\n  Errno::ENOENT (No such file or directory @ rb_sysopen -\n  <a href=\"https://funderhunt.co/rails/active_storage/blobs/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBZ1lIIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--fa91a15681c23d47d767169c7821601aa15ed2b3/Statuses.pages?disposition=attachment\" rel=\"nofollow noreferrer\">https://funderhunt.co/rails/active_storage/blobs/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBZ1lIIiwiZXhwIjpudWxsLCJwdXIiOiJibG9iX2lkIn19--fa91a15681c23d47d767169c7821601aa15ed2b3/Statuses.pages?disposition=attachment</a>):</p>\n</blockquote>\n\n<p>The link is correct tho:</p>\n\n<p>My mailer code for this part looks like this:</p>\n\n<pre><code>      q = 0\n      statement.files.each do |file|\n        q += 1\n        bank_statement = File.read(rails_blob_url(file, disposition: \"attachment\"))\n        attachments[\"statement_#{q}.pdf\"] = { :mime_type =&gt; 'application/pdf', :content =&gt; bank_statement }\n      end\n</code></pre>\n\n<p>What is wrong? Can you please help. Thanks in advance.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 6361, "user_id": 2097529, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/QnP8n.jpg?s=128&g=1", "display_name": "Kick Buttowski", "link": "https://stackoverflow.com/users/2097529/kick-buttowski"}, "edited": false, "score": 0, "creation_date": 1546283002, "post_id": 53990488, "comment_id": 94818928, "body": "I recommend you to read this.  <a href=\"https://ruby-doc.org/docs/ruby-doc-bundle/Tutorial/part_02/user_input.html\" rel=\"nofollow noreferrer\">ruby-doc.org/docs/ruby-doc-bundle/Tutorial/part_02/&hellip;</a>"}, {"owner": {"reputation": 3047, "user_id": 10388629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/My8T3.png?s=128&g=1", "display_name": "Pika the Master of the Whales", "link": "https://stackoverflow.com/users/10388629/pika-the-master-of-the-whales"}, "edited": false, "score": 0, "creation_date": 1546283008, "post_id": 53990488, "comment_id": 94818931, "body": "What&#39;s wrong with your current code?"}, {"owner": {"reputation": 11, "user_id": 9224267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de42627bb5ec37c2415fd7a2c60a8537?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Boylan", "link": "https://stackoverflow.com/users/9224267/jack-boylan"}, "edited": false, "score": 0, "creation_date": 1546283039, "post_id": 53990488, "comment_id": 94818938, "body": "I recieve the error  &lt;br&gt; <code>ndefined method </code>chomp&#39; for nil:NilClass (NoMethodError)`"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9224267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de42627bb5ec37c2415fd7a2c60a8537?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Boylan", "link": "https://stackoverflow.com/users/9224267/jack-boylan"}, "edited": false, "score": 0, "creation_date": 1546284358, "post_id": 53990626, "comment_id": 94819288, "body": "Discovered issue, was to do with file pathway"}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": false, "score": 0, "last_activity_date": 1546282903, "creation_date": 1546282903, "answer_id": 53990626, "question_id": 53990488, "link": "https://stackoverflow.com/questions/53990488/inputting-string-using-gets-chomp-and-producing-a-histogram/53990626#53990626", "title": "Inputting string using (gets.chomp) and producing a histogram", "body": "<p>In the script runner of Atom where you are currently running your Ruby program, you can not read from standard input using <code>gets</code>. It appears that the <a href=\"https://atom.io/packages/script-runner\" rel=\"nofollow noreferrer\">script-runner package</a> can extend this to provide a real terminal to the script where you can then also use STDIN.</p>\n\n<p>Alternatively, you could also run your program from a real console. For that, you have run it from a command line window, e.g. with <code>ruby name_of_program.rb</code> instead of starting it from Atom.</p>\n"}, {"tags": [], "owner": {"reputation": 392, "user_id": 9910110, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OTTsN.jpg?s=128&g=1", "display_name": "Sandra", "link": "https://stackoverflow.com/users/9910110/sandra"}, "is_accepted": false, "score": 1, "last_activity_date": 1546407636, "creation_date": 1546407636, "answer_id": 54001718, "question_id": 53990488, "link": "https://stackoverflow.com/questions/53990488/inputting-string-using-gets-chomp-and-producing-a-histogram/54001718#54001718", "title": "Inputting string using (gets.chomp) and producing a histogram", "body": "<p>The <code>gets</code> method must be called alone. Try it in your second line:</p>\n\n<pre><code>user_input = gets.chomp\n</code></pre>\n\n<p>without <code>String</code>.</p>\n\n<p>I hope it useful for you. :)</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10077587, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tmFYqBQPeew/AAAAAAAAAAI/AAAAAAAAAAw/lTnPz2wQS1M/photo.jpg?sz=128", "display_name": "William Mills", "link": "https://stackoverflow.com/users/10077587/william-mills"}, "is_accepted": false, "score": 0, "last_activity_date": 1546460653, "creation_date": 1546460653, "answer_id": 54012688, "question_id": 53990488, "link": "https://stackoverflow.com/questions/53990488/inputting-string-using-gets-chomp-and-producing-a-histogram/54012688#54012688", "title": "Inputting string using (gets.chomp) and producing a histogram", "body": "<p>Your code is working as intended. You went wrong by running the code in your text editor instead of through the console. The <code>Kernal#gets</code> method requires user input, which would need to be <em>mocked</em> in order to run within your text-editor. Because your <em>editor</em> is returning <code>nil</code> instead of user input in string format, the <code>chomp</code> method is raising your <code>NoMethodError</code>. </p>\n\n<p>Essentially your code is fine, but your are trying to run it in a limited environment. As a beginner, if your code requires user input, it's easier to test the code by running your ruby file through the console/terminal with <code>ruby &lt;filename.rb&gt;</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 9224267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de42627bb5ec37c2415fd7a2c60a8537?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Boylan", "link": "https://stackoverflow.com/users/9224267/jack-boylan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1546460653, "creation_date": 1546281658, "last_edit_date": 1546283565, "question_id": 53990488, "link": "https://stackoverflow.com/questions/53990488/inputting-string-using-gets-chomp-and-producing-a-histogram", "title": "Inputting string using (gets.chomp) and producing a histogram", "body": "<p>I'm having struggles understanding ruby. I wish to have a program in which a user can input a set of text and it come back with asterisks. So far I was able to do it via a .txt file. Can anyone explain where I went wrong? I am struggling with ruby a lot.</p>\n\n<p><a href=\"https://i.stack.imgur.com/HIqOi.png\" rel=\"nofollow noreferrer\">Image of outcome when I run it</a></p>\n\n<pre><code>print \"Please enter any length of text:\"\nuser_input = String(gets.chomp)\nh = Hash.new\nf = user_input\nf.each_line { |line|\n  letters = line.split(//)\n  letters.each { |w|\n    if h.has_key?(w)\n      h[w] = h[w] + 1\n    else\n      h[w] = 1\n    end\n  }\n}\n\n# sort the hash by\nh.sort{|a,b| a[1]&lt;=&gt;b[1]}.each { |elem|\n  puts \"\\\"#{elem[0]}\\\": \" + '*' * elem[1]\n}\n</code></pre>\n\n<p><br>\nError message I encountered </p>\n\n<pre><code>Undefined method `chomp' for nil:NilClass (NoMethodError)\n</code></pre>\n"}, {"tags": ["json", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 9651869, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Fun Media", "link": "https://stackoverflow.com/users/9651869/fun-media"}, "edited": false, "score": 0, "creation_date": 1546274230, "post_id": 53989422, "comment_id": 94816703, "body": "Now I get <code>unexpected token at &#39;https:&#47;&#47;script.google.com&#47;macros&#47;s&#47;AKfycbyHFt1Yz96q91-D6eP4&zwnj;&#8203;uWtRCcF_lzG2WM-sjrpZ&zwnj;&#8203;Ir3s02HrICBQ&#47;exec&#39; (JSON::ParserError)</code>"}, {"owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "reply_to_user": {"reputation": 67, "user_id": 9651869, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Fun Media", "link": "https://stackoverflow.com/users/9651869/fun-media"}, "edited": false, "score": 0, "creation_date": 1546276023, "post_id": 53989422, "comment_id": 94817186, "body": "@FunMedia a URL is not JSON. If you want to access the JSON at the url, you have to use a http client to retrieve it, then parse the response body (see <a href=\"https://github.com/rest-client/rest-client\" rel=\"nofollow noreferrer\">rest-client</a>)"}, {"owner": {"reputation": 67, "user_id": 9651869, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Fun Media", "link": "https://stackoverflow.com/users/9651869/fun-media"}, "reply_to_user": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "edited": false, "score": 0, "creation_date": 1546278095, "post_id": 53989422, "comment_id": 94817673, "body": "@MarcinKo\u0142odziej Can I use like <code>data = JSON.parse(open(&#39;https:&#47;&#47;script.google.com&#47;macros&#47;s&#47;AKfycbyH&zwnj;&#8203;Ft1Yz96q91-D6eP4uWtR&zwnj;&#8203;CcF_lzG2WM-sjrpZIr3s&zwnj;&#8203;02HrICBQ&#47;exec&#39;))</code> also a <code>require &#39;open-uri&#39;</code>. Now I get <code>no implicit conversion of StringIO into String (TypeError)</code>"}], "tags": [], "owner": {"reputation": 99, "user_id": 3432167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TlA9i.jpg?s=128&g=1", "display_name": "gajewsky", "link": "https://stackoverflow.com/users/3432167/gajewsky"}, "is_accepted": true, "score": 1, "last_activity_date": 1546273031, "creation_date": 1546273031, "answer_id": 53989422, "question_id": 53989307, "link": "https://stackoverflow.com/questions/53989307/syntax-error-unexpected-keyword-end-expecting/53989422#53989422", "title": "syntax error, unexpected keyword_end, expecting &#39;)&#39;", "body": "<p>The problem is lacking <code>)</code> at the end of 19 line:</p>\n\n<pre><code> ...\n\n array.each do |entry|\n   File.open(File.join(drafts_dir, entry.last), 'wb') do |draft|\n     draft.puts(\"---\\n---\\n\\n#{entry.first}\")\n   end\n end\n</code></pre>\n\n<p>it should resolve the issue :)</p>\n"}], "owner": {"reputation": 67, "user_id": 9651869, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Fun Media", "link": "https://stackoverflow.com/users/9651869/fun-media"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1546284794, "accepted_answer_id": 53989422, "answer_count": 1, "score": -2, "last_activity_date": 1546273073, "creation_date": 1546272164, "question_id": 53989307, "link": "https://stackoverflow.com/questions/53989307/syntax-error-unexpected-keyword-end-expecting", "closed_reason": "Not suitable for this site", "title": "syntax error, unexpected keyword_end, expecting &#39;)&#39;", "body": "<p>I have a script called <code>import.rb</code> which will import json content from url to drafts directory.</p>\n\n<pre><code>require 'fileutils'\nrequire 'json'\n\n# Load JSON data from source\n# (Assuming the data source is a json file on your file system)\ndata = JSON.parse('https://script.google.com/macros/s/AKfycbyHFt1Yz96q91-D6eP4uWtRCcF_lzG2WM-sjrpZIr3s02HrICBQ/exec')\n\n# Proceed to create post files if the value array is not empty\narray = data[\"user\"]\nif array &amp;&amp; !array.empty?\n  # create the `_drafts` directory if it doesn't exist already\n  drafts_dir = File.expand_path('./_drafts', __dir__)\n  FileUtils.mkdir_p(posts_dir) unless Dir.exist?(drafts_dir)\n\n  # iterate through the array and generate draft-files for each entry\n  # where entry.first will be the \"content\" and entry.last the \"title\"\n  array.each do |entry|\n    File.open(File.join(drafts_dir, entry.last), 'wb') do |draft|\n      draft.puts(\"---\\n---\\n\\n#{entry.first}\"\n    end\n  end\nend\n</code></pre>\n\n<p>When I run <code>ruby _scripts/import.rb</code> I get <code>_scripts/import.rb:20: syntax error, unexpected keyword_end, expecting ')'\n    end</code> error. I changed line from recommended form to <code>data = JSON.parse('https://script.google.com/macros/s/AKfycbyHFt1Yz96q91-D6eP4uWtRCcF_lzG2WM-sjrpZIr3s02HrICBQ/exec')</code>. Original was <code>data = JSON.parse(File.read(your_json_source.json))</code>. Please assist me.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5.1"], "comments": [{"owner": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546272107, "post_id": 53989252, "comment_id": 94816073, "body": "In your model, <code>serialize :keywords, Array</code>, did you try just  <code>serialize :keywords</code> without the Array?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1546272295, "post_id": 53989252, "comment_id": 94816116, "body": "What do your submitted parameters look like?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5084534"}, "reply_to_user": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546272377, "post_id": 53989252, "comment_id": 94816136, "body": "@AadityaMaheshwari still returns <code>[&quot;voip man cat&quot;]</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5084534"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1546272392, "post_id": 53989252, "comment_id": 94816138, "body": "@jvillian they look like: <code>[&quot;voip man cat&quot;]</code> or <code>&quot;keywords&quot;=&gt;[&quot;voip man cat&quot;]</code>"}, {"owner": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546272555, "post_id": 53989252, "comment_id": 94816187, "body": "@LearningROR I assume you already tried restarting the server &amp; rails console after editing the model?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5084534"}, "reply_to_user": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546272648, "post_id": 53989252, "comment_id": 94816214, "body": "@AadityaMaheshwari yes many times upon each single change. :)"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1546272807, "post_id": 53989252, "comment_id": 94816270, "body": "Presumably, the answers to your prior <a href=\"https://stackoverflow.com/questions/53984862/how-to-store-string-as-array-in-database-column-using-ruby-on-rails\">question</a> didn&#39;t work. Did you try <code>KeywordSerializer</code>, as suggested? And why is it you think you can store an <code>array</code> in a <code>text</code> column? <code>array</code> != <code>text</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5084534"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1546272963, "post_id": 53989252, "comment_id": 94816328, "body": "@jvillian well, I have tried all answers from my old question but none of them worked as they should. I was ended with some errors in the end. Also during finding here and there I found on many blogs and on SO that storing array this way worked well."}, {"owner": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546273008, "post_id": 53989252, "comment_id": 94816343, "body": "@LearningROR For the migration try this: <code>add_column :products, :keywords, :string, array: true, default: []</code>. Also, did you try not specifying keywords as an array in your controller params and still use serialize?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5084534"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1546273028, "post_id": 53989252, "comment_id": 94816351, "body": "@jvillian The main problem I faced during the whole time is lack of proper way to deal this particular case. Mostly people suggest to create new model, migration and all but this is something that do not need to create all those. Some said create text field and do array serialize. some suggest jsonb."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5084534"}, "reply_to_user": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546273578, "post_id": 53989252, "comment_id": 94816496, "body": "@AadityaMaheshwari I tried both cases just now and they saved the data as empty array in the column.<code>{}</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5084534"}, "reply_to_user": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546273633, "post_id": 53989252, "comment_id": 94816518, "body": "@AadityaMaheshwari <code>&quot;keywords&quot;=&gt;&quot;void wan lan&quot;</code> and in controller no array params, in model no array serialize just posted data <code>lan man voip</code> and it saved as empty array"}, {"owner": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546273717, "post_id": 53989252, "comment_id": 94816547, "body": "@LearningROR In the model, keep the serialize but in controller try <code>params.require(:product).permit(:id, :name, :keywords)</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5084534"}, "reply_to_user": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546273854, "post_id": 53989252, "comment_id": 94816588, "body": "@AadityaMaheshwari  returned: <code>can&#39;t serialize </code>keywords<code>: was supposed to be a Array, but was a String. -- &quot;void wan lan&quot;  </code>"}, {"owner": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546274140, "post_id": 53989252, "comment_id": 94816682, "body": "@LearningROR this is getting too long for comments; head in to <a href=\"https://chat.stackoverflow.com/rooms/44914/ruby-sometimes-on-rails\">chat.stackoverflow.com/rooms/44914/ruby-sometimes-on-rails</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5084534"}, "reply_to_user": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546274196, "post_id": 53989252, "comment_id": 94816697, "body": "@AadityaMaheshwari Sure brother."}], "answers": [{"tags": [], "owner": {"reputation": 885, "user_id": 1251220, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ef0b83959c5ad0bf18f1dcd57c678792?s=128&d=identicon&r=PG", "display_name": "Walid Da.", "link": "https://stackoverflow.com/users/1251220/walid-da"}, "is_accepted": false, "score": 0, "last_activity_date": 1546276359, "creation_date": 1546276359, "answer_id": 53989830, "question_id": 53989252, "link": "https://stackoverflow.com/questions/53989252/how-to-convert-string-from-array-field-and-save-it-as-array-in-db-column/53989830#53989830", "title": "How to convert string from array field and save it as array in db column", "body": "<p>You can keep storing it as a text with a separator like a \",\" for example. And you convert it to an array when you read it as the following:</p>\n\n<pre><code>keywords = Product.find(id).keywords.split(\",\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "is_accepted": true, "score": 0, "last_activity_date": 1546277972, "creation_date": 1546277972, "answer_id": 53990013, "question_id": 53989252, "link": "https://stackoverflow.com/questions/53989252/how-to-convert-string-from-array-field-and-save-it-as-array-in-db-column/53990013#53990013", "title": "How to convert string from array field and save it as array in db column", "body": "<p>Solution for this use case:</p>\n\n<p>Removed serialize array from model. Post without array params.</p>\n\n<p>Post with commas on the front end. On the view, use <code>.join(',')</code></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5084534"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 53990013, "answer_count": 2, "score": 0, "last_activity_date": 1546277972, "creation_date": 1546271803, "question_id": 53989252, "link": "https://stackoverflow.com/questions/53989252/how-to-convert-string-from-array-field-and-save-it-as-array-in-db-column", "title": "How to convert string from array field and save it as array in db column", "body": "<p>I am not able to store array in database column.</p>\n\n<p><strong>text_field:</strong></p>\n\n<pre><code>= text_field_tag 'product[keywords][]', @product.keywords, class: 'tab-input\nproduct_keywords'\n</code></pre>\n\n<p><strong>controller params:</strong></p>\n\n<pre><code>params.require(:product).permit(:id, :name, :keywords =&gt; [])\n</code></pre>\n\n<p><strong>model:</strong></p>\n\n<pre><code>serialize :keywords, Array\n</code></pre>\n\n<p><strong>migration:</strong></p>\n\n<pre><code>class AddKeywordsToProducts &lt; ActiveRecord::Migration[5.1]\n  def change\n    add_column :products, :keywords, :text\n  end\nend\n</code></pre>\n\n<p>So, if someone writes, <strong>abc mbc csx</strong> and hit submit it should save in db column as array like below:</p>\n\n<pre><code>[\"abc\", \"mbc\", \"csx\"]\n</code></pre>\n\n<p>now I want to store it as array in column but its not storing properly. \nit stores as:</p>\n\n<pre><code>[\"abc mbc csx\"]\n</code></pre>\n\n<p>Also what are the best practices to deal with these cases?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2324, "user_id": 6144626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w5zgz.jpg?s=128&g=1", "display_name": "Ari Cooper-Davis", "link": "https://stackoverflow.com/users/6144626/ari-cooper-davis"}, "edited": false, "score": 1, "creation_date": 1546270951, "post_id": 53989094, "comment_id": 94815717, "body": "Could you include a minimal working example of your code in your question so we don&#39;t have to type it out if we want to debug it?"}, {"owner": {"reputation": 11, "user_id": 9224267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de42627bb5ec37c2415fd7a2c60a8537?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Boylan", "link": "https://stackoverflow.com/users/9224267/jack-boylan"}, "reply_to_user": {"reputation": 2324, "user_id": 6144626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w5zgz.jpg?s=128&g=1", "display_name": "Ari Cooper-Davis", "link": "https://stackoverflow.com/users/6144626/ari-cooper-davis"}, "edited": false, "score": 0, "creation_date": 1546271227, "post_id": 53989094, "comment_id": 94815802, "body": "sorry ill do it now"}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1546271456, "post_id": 53989094, "comment_id": 94815879, "body": "<code>words</code> are not words."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1546281615, "post_id": 53989094, "comment_id": 94818529, "body": "Standard Ruby style is to <a href=\"https://github.com/rubocop-hq/ruby-style-guide#single-line-blocks\" rel=\"nofollow noreferrer\">use <code>do</code> and <code>end</code> rather than curly braces</a> when the block is expressed on multiple lines."}, {"owner": {"reputation": 11, "user_id": 9224267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de42627bb5ec37c2415fd7a2c60a8537?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Boylan", "link": "https://stackoverflow.com/users/9224267/jack-boylan"}, "edited": false, "score": 0, "creation_date": 1546281841, "post_id": 53989094, "comment_id": 94818593, "body": "so instead of putting a bracket just say end at the last point?"}], "answers": [{"tags": [], "owner": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "is_accepted": false, "score": 0, "last_activity_date": 1546271006, "creation_date": 1546271006, "answer_id": 53989139, "question_id": 53989094, "link": "https://stackoverflow.com/questions/53989094/can-anyone-give-me-advice-on-how-to-replace-the-number-of-letters-with-asterisks/53989139#53989139", "title": "Can anyone give me advice on how to replace the number of letters with asterisks?", "body": "<pre><code>puts \"\\\"#{elem[0]}\\\": \" + '*' * elem[1]\n</code></pre>\n\n<p><code>+</code> for concatenate, <code>string</code> <code>*</code> <code>number</code> is to repeat certain string <code>number</code> times.</p>\n"}, {"tags": [], "owner": {"reputation": 2496, "user_id": 3046905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/692eb06201cbed91c3c6a9cf11ed0511?s=128&d=identicon&r=PG", "display_name": "Ilya Konyukhov", "link": "https://stackoverflow.com/users/3046905/ilya-konyukhov"}, "is_accepted": false, "score": 2, "last_activity_date": 1546271139, "creation_date": 1546271139, "answer_id": 53989154, "question_id": 53989094, "link": "https://stackoverflow.com/questions/53989094/can-anyone-give-me-advice-on-how-to-replace-the-number-of-letters-with-asterisks/53989154#53989154", "title": "Can anyone give me advice on how to replace the number of letters with asterisks?", "body": "<p>Instead of <code>#{elem[1]} occurences</code> you just need to write <code>#{'*' * elem[1]}</code></p>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.4.0/String.html#method-i-2A\" rel=\"nofollow noreferrer\">method description</a> for more details.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 9224267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de42627bb5ec37c2415fd7a2c60a8537?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Boylan", "link": "https://stackoverflow.com/users/9224267/jack-boylan"}, "edited": false, "score": 0, "creation_date": 1546279218, "post_id": 53989167, "comment_id": 94817940, "body": "I have tried replacing the file so it would have input instead like below, sorry im very new to this. <code>print &quot;Please enter any length of text:&quot;</code> <code>user_input = String(gets.chomp)</code> <code>h = Hash.new</code> <code>f = user_input</code> <code>f.each_line { |line|</code>"}], "tags": [], "owner": {"reputation": 7878, "user_id": 630780, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fskbD.png?s=128&g=1", "display_name": "Carl Markham", "link": "https://stackoverflow.com/users/630780/carl-markham"}, "is_accepted": false, "score": 0, "last_activity_date": 1546271209, "creation_date": 1546271209, "answer_id": 53989167, "question_id": 53989094, "link": "https://stackoverflow.com/questions/53989094/can-anyone-give-me-advice-on-how-to-replace-the-number-of-letters-with-asterisks/53989167#53989167", "title": "Can anyone give me advice on how to replace the number of letters with asterisks?", "body": "<p>With strings in Ruby, you can use math operators against them. So, you know how many times the letter appears (in <code>elem[1]</code>). In that case you can just multiply the asterisks symbol by that amount:</p>\n\n<p><code>\"\\\"#{elem[0]}: #{'*' * elem[1]}\\\"\"</code></p>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 2, "last_activity_date": 1546275717, "creation_date": 1546275717, "answer_id": 53989749, "question_id": 53989094, "link": "https://stackoverflow.com/questions/53989094/can-anyone-give-me-advice-on-how-to-replace-the-number-of-letters-with-asterisks/53989749#53989749", "title": "Can anyone give me advice on how to replace the number of letters with asterisks?", "body": "<p>I would like to show another possible alternative way to achieve the word count.\nLetting apart the file reading, let's consider the following string:</p>\n\n<pre><code>line = 'Here is my code and output below, i would like to have it so that instead of saying how many occurrences, it would output the number of times the letter appears in asterisk form.'\n\nh = Hash.new(0)\nline.downcase.each_char{ |ch| h[ch] += 1 if ('a'..'z').include? ch }\nh.to_a.sort_by(&amp;:last).reverse.each { |ch, count| puts \"#{ch}: \" + \"*\" * count}\n</code></pre>\n\n<ul>\n<li>Initialise the hash with <code>default = 0</code> allow you to start the count without checking if key exists: <a href=\"https://ruby-doc.org/core-2.5.1/Hash.html#method-i-default\" rel=\"nofollow noreferrer\"><code>Hash#default</code></a>.</li>\n<li>Iterate over the line by <a href=\"https://ruby-doc.org/core-2.5.1/String.html#method-i-each_char\" rel=\"nofollow noreferrer\"><code>String#each_char</code></a></li>\n<li>I counted only case insensitive letters, up to you</li>\n<li>For sorting change the Hash into an Array with <a href=\"https://ruby-doc.org/core-2.5.1/Hash.html#method-i-to_a\" rel=\"nofollow noreferrer\"><code>Hash#to_a</code></a></li>\n<li>For printing the histogram, as shown in other posts</li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 9224267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de42627bb5ec37c2415fd7a2c60a8537?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Boylan", "link": "https://stackoverflow.com/users/9224267/jack-boylan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1546281159, "creation_date": 1546270648, "last_edit_date": 1546281159, "question_id": 53989094, "link": "https://stackoverflow.com/questions/53989094/can-anyone-give-me-advice-on-how-to-replace-the-number-of-letters-with-asterisks", "title": "Can anyone give me advice on how to replace the number of letters with asterisks?", "body": "<p>Here is my code and output below, i would like to have it so that instead of saying how many occurences, it would output the number of times the letter appears in asterisk form.</p>\n\n<p>For exmaple if \"a\" appeared four times within a sentence the output would produce:\n<code>\"a\": ****</code></p>\n\n<pre><code>the_file='C:\\Users\\Jack\\Documents\\Ruby\\Lab1\\lyric.txt'\nh = Hash.new\nf = File.open(the_file, \"r\")\nf.each_line { |line|\n  words = line.split(//)\n  words.each { |w|\n    if h.has_key?(w)\n      h[w] = h[w] + 1\n    else\n      h[w] = 1\n    end\n  }\n}\n\n# sort the hash by value, and then print it in this sorted order\n\nh.sort{|a,b| a[1]&lt;=&gt;b[1]}.each { |elem|\n  puts \"\\\"#{elem[0]}\\\" : #{elem[1]} occurrences\"\n}\n</code></pre>\n\n<p>Screenshot of my current program and output\n<a href=\"https://i.stack.imgur.com/dpIXY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dpIXY.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546312622, "post_id": 53986349, "comment_id": 94823396, "body": "I think you mean &quot;digits&quot;, not &quot;numbers&quot;, in your first sentence. We know what you mean but it&#39;s always best to be precise."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 826704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65fe2854dc7e408d036756d2e102cbd8?s=128&d=identicon&r=PG", "display_name": "hakuya", "link": "https://stackoverflow.com/users/826704/hakuya"}, "edited": false, "score": 0, "creation_date": 1546406869, "post_id": 53986391, "comment_id": 94839984, "body": "not completly works, its only delete first . between digit, result displays is dolar. 2000.000"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 49, "user_id": 826704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65fe2854dc7e408d036756d2e102cbd8?s=128&d=identicon&r=PG", "display_name": "hakuya", "link": "https://stackoverflow.com/users/826704/hakuya"}, "edited": false, "score": 0, "creation_date": 1546407075, "post_id": 53986391, "comment_id": 94840028, "body": "No way. You have an induced error. Copy-paste the snippet above and make sure it perfectly works."}, {"owner": {"reputation": 49, "user_id": 826704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65fe2854dc7e408d036756d2e102cbd8?s=128&d=identicon&r=PG", "display_name": "hakuya", "link": "https://stackoverflow.com/users/826704/hakuya"}, "edited": false, "score": 0, "creation_date": 1546491733, "post_id": 53986391, "comment_id": 94869853, "body": "sorry, I miss something, yes, this is the simple one and correct"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1546252284, "creation_date": 1546252284, "answer_id": 53986391, "question_id": 53986349, "link": "https://stackoverflow.com/questions/53986349/how-to-get-specific-dot-between-number/53986391#53986391", "title": "how to get specific dot between number", "body": "<p>Use positive <a href=\"https://www.regular-expressions.info/lookaround.html\" rel=\"nofollow noreferrer\">lookarounds</a>.</p>\n\n<pre><code>\"dolar. 2.000.000\".gsub(/(?&lt;=\\d)\\.(?=\\d)/, '')\n#\u21d2 \"dolar. 2000000\"\n</code></pre>\n\n<p><code>(?&lt;=\\d)</code> here means \u201cpreceded by not included in the match digit\u201d and <code>(?=\\d)</code> means \u201cfollowed by not included in the match digit.\u201d</p>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1546409198, "post_id": 53993285, "comment_id": 94840561, "body": "\ud83d\udc4d\ud83d\udc4d\ud83d\udc4d <code>Hash.new { |_,k| k.delete(&#39;.&#39;) }</code> \u2764\u2764\u2764"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1546321835, "creation_date": 1546321835, "answer_id": 53993285, "question_id": 53986349, "link": "https://stackoverflow.com/questions/53986349/how-to-get-specific-dot-between-number/53993285#53993285", "title": "how to get specific dot between number", "body": "<p>Here are some more ways to do that.</p>\n\n<pre><code>str = \"dolar. 2.000.000\"\n</code></pre>\n\n<p>All of the following return <code>\"dolar. 2000000\"</code>.</p>\n\n<pre><code>str.gsub(/\\d\\.\\d/) { |s| s.delete('.') }\n\nstr.gsub(/(\\d)\\.(\\d)/, '\\1\\2')\n\nh = Hash.new { |_,k| k.delete('.') } #=&gt; {} \nstr.gsub(/\\d\\.\\d/, h)\n</code></pre>\n\n<p>In #3 <code>h[k]</code> returns <code>k.delete('.')</code> if the hash has no key <code>k</code>. Since the hash has no keys that will be returned for all matches.</p>\n"}], "owner": {"reputation": 49, "user_id": 826704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65fe2854dc7e408d036756d2e102cbd8?s=128&d=identicon&r=PG", "display_name": "hakuya", "link": "https://stackoverflow.com/users/826704/hakuya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 53986391, "answer_count": 2, "score": 2, "last_activity_date": 1546321835, "creation_date": 1546252085, "last_edit_date": 1546252450, "question_id": 53986349, "link": "https://stackoverflow.com/questions/53986349/how-to-get-specific-dot-between-number", "title": "how to get specific dot between number", "body": "<p>I want to delete dot only in between numbers</p>\n\n<p>I have text <code>\"dolar. 2.000.000\"</code></p>\n\n<p>I have tried using <code>\\\\.\\d*?</code>, but <code>.</code> in dollar also deleted</p>\n\n<p>I want it displayed as <code>\"dolar. 2000000\"</code>.</p>\n"}, {"tags": ["ruby", "azure-active-directory", "sinatra", "session-cookies"], "comments": [{"owner": {"reputation": 23809, "user_id": 351909, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/71a6b8a36a63c2cb9de678c07be6d8a4?s=128&d=identicon&r=PG", "display_name": "moritz", "link": "https://stackoverflow.com/users/351909/moritz"}, "edited": false, "score": 0, "creation_date": 1546276136, "post_id": 53986199, "comment_id": 94817206, "body": "When I had this problem, it was mostly caused by some extension, e.g. &quot;privacy badger&quot;. Did you try it in a pristine chrome profile?"}, {"owner": {"reputation": 21, "user_id": 10851446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YYN-6PhlG7g/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY-SKRhYRV_SIUpwuPfdQfluLeVGg/mo/photo.jpg?sz=128", "display_name": "Hamza Sanoma", "link": "https://stackoverflow.com/users/10851446/hamza-sanoma"}, "reply_to_user": {"reputation": 23809, "user_id": 351909, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/71a6b8a36a63c2cb9de678c07be6d8a4?s=128&d=identicon&r=PG", "display_name": "moritz", "link": "https://stackoverflow.com/users/351909/moritz"}, "edited": false, "score": 0, "creation_date": 1546510741, "post_id": 53986199, "comment_id": 94876536, "body": "I have tried with disabling all my extensions on chrome and still the same issue."}], "answers": [{"tags": [], "owner": {"reputation": 5749, "user_id": 9541448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3xscN.jpg?s=128&g=1", "display_name": "Marilee Turscak - MSFT", "link": "https://stackoverflow.com/users/9541448/marilee-turscak-msft"}, "is_accepted": false, "score": 1, "last_activity_date": 1548380149, "creation_date": 1548380149, "answer_id": 54357846, "question_id": 53986199, "link": "https://stackoverflow.com/questions/53986199/session-expiration-value-is-missing-in-chrome-but-present-in-firefox-and-ie/54357846#54357846", "title": "Session expiration value is missing in Chrome but present in Firefox and IE", "body": "<p>This can be caused by having Chrome set to \"Continue where you left off.\"</p>\n\n<p><a href=\"https://i.stack.imgur.com/bloKY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bloKY.png\" alt=\"enter image description here\"></a></p>\n\n<p>Check under Settings > On startup > Continue where you left off. </p>\n\n<p>Other possible causes:</p>\n\n<ul>\n<li><p>Your environment uses an http endpoint but requires https in the web.config </p>\n\n<p>&lt; httpCookies httpOnlyCookies=\"true\" requireSSL=\"true\" /></p></li>\n</ul>\n\n<p>(Chrome52+ and Firefox52+ can't set insecure http sites with the secure directive anymore, so expiration requests will be ignored by the browser.)</p>\n\n<ul>\n<li>You may need to explicitly query the cookies API or try one of the workarounds mentioned in this thread. <a href=\"https://stackoverflow.com/questions/10617954/chrome-doesnt-delete-session-cookies/12592024\">Chrome doesn&#39;t delete session cookies</a></li>\n</ul>\n"}], "owner": {"reputation": 21, "user_id": 10851446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YYN-6PhlG7g/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY-SKRhYRV_SIUpwuPfdQfluLeVGg/mo/photo.jpg?sz=128", "display_name": "Hamza Sanoma", "link": "https://stackoverflow.com/users/10851446/hamza-sanoma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1548380149, "creation_date": 1546251166, "last_edit_date": 1546511110, "question_id": 53986199, "link": "https://stackoverflow.com/questions/53986199/session-expiration-value-is-missing-in-chrome-but-present-in-firefox-and-ie", "title": "Session expiration value is missing in Chrome but present in Firefox and IE", "body": "<p>When the user logs in the session cookie expiration value is missing. Therefore when the session begins it ends immediately. This only happens in Chrome, I am using the latest version of Chrome 71.035.</p>\n\n<p>This was working fine until the 27th, and there has been no change to code in any way for the last 3 weeks.<br>\nThe session expiration value is present in Firefox and IE and it works absolutely fine there.</p>\n\n<p>Below are the response cookies:</p>\n\n<p><strong>In Chrome:</strong><br>\n<code>Set-Cookie: arkku.session_until=; max-age=0; expires=Thu, 01 Jan 1970 00:00:00 -0000; secure; HttpOnly; SameSite=Lax</code></p>\n\n<p><code>Set-Cookie: arkku.session=BAh7BkkiD3Nlc3Npb25faWQGOgZFVEkiRWY1NWM4ZWE3OTQwNGY2OTRiYjQx%0ANGU0ZWRlZDQ2Mzc1ZWI4YjcxMDU2NzhiOWY2YzlkNzZmMGEzOThkM2QyMzcG%0AOwBG%0A--28332b90945ff110102d7869ab31458d3583798d; path=/; expires=Sun, 31 Mar 2019 08:43:10 -0000; secure; HttpOnly; SameSite=Lax</code></p>\n\n<p><strong>In Firefox:</strong><br>\n<code>Set-Cookie: arkku.session_until=IjIwMTgtMTItMzFUMTI6MzQ6NTErMDI6MDAi--bde9eb54c68113310441353c9547b8a2d501835d; path=/; secure; HttpOnly; SameSite=Lax</code></p>\n\n<p><code>Set-Cookie: arkku.session=BAh7B0kiD3Nlc3Npb25faWQGOgZFVEkiRTRlZmU3NjU4OWQzYTFiZmFmMmEz%0AYWFmZjA3ZTU1YzM3MzI3Yzc3YTJjYjI0YjBkNjBmNWM4NWQ1ZjgwMDk0MDIG%0AOwBGSSIPYXJra3VfdXNlcgY7AEZDOhdPbW5pQXV0aDo6QXV0aEhhc2h7CUki%0ADXByb3ZpZGVyBjsARkkiGWF6dXJlYWN0aXZlZGlyZWN0b3J5BjsARkkiCHVp%0AZAY7AEZJIjBWem9POFg3RmNEalp0M2s1ZDVlaExjejlybEtpejJCRmp1ZWdZ%0ASXVlMktvBjsAVEkiCWluZm8GOwBGQzohT21uaUF1dGg6OkF1dGhIYXNoOjpJ%0AbmZvSGFzaHsHSSIJbmFtZQY7AEZJIhFIYW16YSBXYWhlZWQGOwBUSSIKZW1h%0AaWwGOwBGSSIcaGFtemEud2FoZWVkQHNhbm9tYS5jb20GOwBUSSIPdXNlcmdy%0Ab3VwcwY7AEZDOwZ7BkkiDnVzZXJncm91cAY7AEZJIgpBRE1JTgY7AFQ%3D%0A--93133ef84469a8230c43d31950da38be7925bf27; path=/; expires=Sun, 31 Mar 2019 09:04:51 -0000; secure; HttpOnly; SameSite=Lax</code></p>\n\n<p>As you can see the <code>arkku.session_until</code> value in Chrome is missing.</p>\n\n<p>I have noticed that the <code>arkku.session_until</code> value is returned null in response to an ajax request, this cookie value is present in the request headers.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "mongoid"], "comments": [{"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1546244384, "post_id": 53985117, "comment_id": 94807458, "body": "What if instead of options you can give <code>class Opt self.collection_name = &#39;options&#39;</code> and in Product use <code>has_many :opts</code>"}, {"owner": {"reputation": 21, "user_id": 3086718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efa2c298abddb23d3ba23f029278f2b6?s=128&d=identicon&r=PG&f=1", "display_name": "willyan9092", "link": "https://stackoverflow.com/users/3086718/willyan9092"}, "reply_to_user": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1546245294, "post_id": 53985117, "comment_id": 94807686, "body": "@RajarshiDas Thanks, but noting changed."}, {"owner": {"reputation": 3397, "user_id": 2563282, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/nCJrZ.jpg?s=128&g=1", "display_name": "G.B", "link": "https://stackoverflow.com/users/2563282/g-b"}, "edited": false, "score": 1, "creation_date": 1546245306, "post_id": 53985117, "comment_id": 94807689, "body": "on a lighter note, options is a reserved word change this to some other word"}, {"owner": {"reputation": 21, "user_id": 3086718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efa2c298abddb23d3ba23f029278f2b6?s=128&d=identicon&r=PG&f=1", "display_name": "willyan9092", "link": "https://stackoverflow.com/users/3086718/willyan9092"}, "reply_to_user": {"reputation": 3397, "user_id": 2563282, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/nCJrZ.jpg?s=128&g=1", "display_name": "G.B", "link": "https://stackoverflow.com/users/2563282/g-b"}, "edited": false, "score": 0, "creation_date": 1546247518, "post_id": 53985117, "comment_id": 94808303, "body": "@G.B Thanks it works!"}, {"owner": {"reputation": 3397, "user_id": 2563282, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/nCJrZ.jpg?s=128&g=1", "display_name": "G.B", "link": "https://stackoverflow.com/users/2563282/g-b"}, "edited": false, "score": 0, "creation_date": 1546249310, "post_id": 53985117, "comment_id": 94808869, "body": "Happy to know that it worked. Kindly accept the answer as well then"}], "answers": [{"tags": [], "owner": {"reputation": 3397, "user_id": 2563282, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/nCJrZ.jpg?s=128&g=1", "display_name": "G.B", "link": "https://stackoverflow.com/users/2563282/g-b"}, "is_accepted": false, "score": 1, "last_activity_date": 1546249217, "creation_date": 1546249217, "answer_id": 53985894, "question_id": 53985117, "link": "https://stackoverflow.com/questions/53985117/mongoid-has-many-belongs-to-has-undefined-method-error/53985894#53985894", "title": "Mongoid has_many / belongs_to has &#39;undefined method&#39; error", "body": "<p>You are using options which is a reserved word. Change <code>Option</code> to some other word like <code>ProductOption</code></p>\n"}], "owner": {"reputation": 21, "user_id": 3086718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efa2c298abddb23d3ba23f029278f2b6?s=128&d=identicon&r=PG&f=1", "display_name": "willyan9092", "link": "https://stackoverflow.com/users/3086718/willyan9092"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1546249217, "creation_date": 1546244026, "question_id": 53985117, "link": "https://stackoverflow.com/questions/53985117/mongoid-has-many-belongs-to-has-undefined-method-error", "title": "Mongoid has_many / belongs_to has &#39;undefined method&#39; error", "body": "<p>I want to use has_many/belongs_to in my mongoid models.</p>\n\n<p>I already use that in other models and it works well, but in the codes below occurs </p>\n\n<pre><code>undefined method `options' for class `Product' error. \n</code></pre>\n\n<p>Models :</p>\n\n<pre><code>class Product\n  include Mongoid::Document\n  include Mongoid::Timestamps\n\n  has_many :options\n\n  field :name, type: String\n  ...\nend\n\nclass Option\n  include Mongoid::Document\n  include Mongoid::Timestamps\n\n  belongs_to :product\n\n  field :name, type: String\nend\n</code></pre>\n\n<p>Controller :</p>\n\n<pre><code>class ProductsController &lt; ApplicationController\n  def index\n    @products = Product.order(id: :desc)\n  end\nend\n</code></pre>\n\n<p>How can I fix the error?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "ruby-on-rails-5.1"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1546249159, "post_id": 53984862, "comment_id": 94808815, "body": "You can split string &amp; use it as array by using <code>str.split(&#47;\\s*,\\s*&#47;)</code> which will remove leading &amp; ailing whitespaces also"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5084534"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1546250819, "post_id": 53984862, "comment_id": 94809374, "body": "@ray at what stage I need to do this please?"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1546251563, "post_id": 53984862, "comment_id": 94809652, "body": "check answer posted, whether it work"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5084534"}, "edited": false, "score": 0, "creation_date": 1546244249, "post_id": 53984995, "comment_id": 94807436, "body": "Should I take the keywords without adding custom commas in the end of each keyword now?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1546244380, "post_id": 53984995, "comment_id": 94807456, "body": "It\u2019s up to you and the desired implementation of both <code>dump</code> and <code>load</code>; I just showed the generic receipt."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1546244996, "post_id": 53984995, "comment_id": 94807600, "body": "This is real good one, but I am getting nil for what inside <code>load</code> method, why?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1546245072, "post_id": 53984995, "comment_id": 94807622, "body": "@ray I have no idea."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5084534"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1546248254, "post_id": 53984995, "comment_id": 94808533, "body": "@ray Same here."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1546242990, "creation_date": 1546242990, "answer_id": 53984995, "question_id": 53984862, "link": "https://stackoverflow.com/questions/53984862/how-to-store-string-as-array-in-database-column-using-ruby-on-rails/53984995#53984995", "title": "How to store string as array in database column using Ruby on Rails", "body": "<p>You probably want a custom serializer as shown <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods/Serialization/ClassMethods.html#method-i-serialize\" rel=\"nofollow noreferrer\">here</a>. So instead of:</p>\n\n<pre><code>serialize :keywords, Array\n</code></pre>\n\n<p>You might do somewhat like:</p>\n\n<pre><code>serialize :keywords, KeywordSerializer\n</code></pre>\n\n<p>And somewhere in <code>helpers</code>:</p>\n\n<pre><code>class KeywordSerializer \n  def self.dump(what)\n    what.join(\", \")\n  end\n  def self.load(what)\n    what.split(/\\s*,\\s*/)\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1546251536, "creation_date": 1546251536, "answer_id": 53986259, "question_id": 53984862, "link": "https://stackoverflow.com/questions/53984862/how-to-store-string-as-array-in-database-column-using-ruby-on-rails/53986259#53986259", "title": "How to store string as array in database column using Ruby on Rails", "body": "<p>Passing array elements using single form tag is not possible to pass as a array and passing array as a string, you need to process it near white-listing your params,</p>\n\n<pre><code>permitted_params = params.require(:product).permit(:id, :name, :keywords =&gt; [])\npermitted_params[:keywords] = permitted_params[:keywords][0].split(/\\s*,\\s*/)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5084534"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 988, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1546251536, "creation_date": 1546242055, "question_id": 53984862, "link": "https://stackoverflow.com/questions/53984862/how-to-store-string-as-array-in-database-column-using-ruby-on-rails", "title": "How to store string as array in database column using Ruby on Rails", "body": "<p>This question is asked many times on SO. The main problem is nothing got fits into my situation.</p>\n\n<p>Case is, I am not able to store typed content as array in database column.</p>\n\n<p><strong>text_field whose code is:</strong></p>\n\n<pre><code>= text_field_tag 'product[keywords][]', @product.keywords, class: 'tab-input\nproduct_keywords'\n</code></pre>\n\n<p><strong>In controller strong parameters are:</strong></p>\n\n<pre><code>params.require(:product).permit(:id, :name, :keywords =&gt; [])\n</code></pre>\n\n<p><strong>Jquery code that is not not removing value upon deletion when typed wrong value but it add commas after each element as I want to take commas seperated value in one column.</strong></p>\n\n<pre><code>  $(document).on 'keyup', '.product_keywords', -&gt;\n    keyword = @value.replace(/(\\w)[\\s,]+(\\w?)/g, '$1, $2')\n    if keyword != @value\n      @value = keyword\n    return\n</code></pre>\n\n<p><strong>model code:</strong></p>\n\n<pre><code>serialize :keywords, Array\n</code></pre>\n\n<p><strong>migration code:</strong></p>\n\n<pre><code>class AddKeywordsToProducts &lt; ActiveRecord::Migration[5.1]\n  def change\n    add_column :products, :keywords, :text\n  end\nend\n</code></pre>\n\n<p>So, if someone writes, abc and hit space a comma is added in the end. after three typed words it will look like:</p>\n\n<pre><code>abc, dbx, she\n</code></pre>\n\n<p>now I want to store it as array in column but its not storing properly. \nit stores as:</p>\n\n<pre><code>[\"abc, dbx, she\"]\n</code></pre>\n\n<p>Also please can anybody tell me the best cases to handle these cases?\nPlus best practices to deal with such cases using ruby so I will learn it for future?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1546348933, "post_id": 53984606, "comment_id": 94828891, "body": "Welcome to stackoverflow. If you have solved your own problem you can answer your own question. Don&#39;t do this by editing the question as it breaks the Q&amp;A format of the site."}], "answers": [{"tags": [], "owner": {"reputation": 97, "user_id": 6927514, "user_type": "registered", "profile_image": "https://graph.facebook.com/1417569534938796/picture?type=large", "display_name": "Harsimar Sandhu", "link": "https://stackoverflow.com/users/6927514/harsimar-sandhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1546240583, "creation_date": 1546240583, "answer_id": 53984673, "question_id": 53984606, "link": "https://stackoverflow.com/questions/53984606/how-to-add-a-message-to-validates-in-model/53984673#53984673", "title": "How to add a message to validates in model?", "body": "<p>This might help. A simple check for an amount</p>\n\n<pre><code>validate :amount_valid?\n\n def amount_valid?\n  errors.add(:amount, \"cant be zero\") if self.amount.zero?\n  errors.add(:amount, \"cant be negative\") if self.amount.negative?\nend\n</code></pre>\n\n<p>display errors on UI after validations if errors present :)</p>\n"}, {"tags": [], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "is_accepted": true, "score": 0, "last_activity_date": 1546382089, "creation_date": 1546382089, "answer_id": 53999470, "question_id": 53984606, "link": "https://stackoverflow.com/questions/53984606/how-to-add-a-message-to-validates-in-model/53999470#53999470", "title": "How to add a message to validates in model?", "body": "<p><strong>SOLVED:</strong></p>\n\n<p>Just needed to add:</p>\n\n<pre><code>&lt;% if @listing_video.errors.any? %&gt;\n    &lt;ul&gt;\n      &lt;% @listing_video.errors.full_messages.each do |msg| %&gt;\n        &lt;%= msg %&gt;\n      &lt;% end %&gt;\n    &lt;/ul&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>To my form.</p>\n\n<p>This creates an error for the validates above the input text field - which is what i want.</p>\n"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 53999470, "answer_count": 2, "score": 0, "last_activity_date": 1546382089, "creation_date": 1546240107, "last_edit_date": 1546244073, "question_id": 53984606, "link": "https://stackoverflow.com/questions/53984606/how-to-add-a-message-to-validates-in-model", "title": "How to add a message to validates in model?", "body": "<p>I have a form with a text field which needs to be a number and 5 or above.</p>\n\n<p><strong>Issue:</strong> I can't seem to get a message to appear when it's not validated</p>\n\n<p><strong>I have tried:</strong></p>\n\n<pre><code>validates :price, :numericality =&gt; {:only_integer =&gt; true, greater_than_or_equal_to: 5, message: \"should happen once per year\" }\n</code></pre>\n\n<p><strong>And this</strong> (I know this isn't a min number but just testing the message feature I saw on another post ... still no message if i use non-integer charecters.</p>\n\n<pre><code> validates :price, format: { with: /\\A\\d+\\z/, message: \"Integer only. No sign allowed.\" }\n</code></pre>\n\n<p><strong>The main layout has:</strong></p>\n\n<pre><code>&lt;% flash.each do |name, msg| %&gt;\n    &lt;% if msg.is_a?(String) %&gt;\n      &lt;div class=\"alert alert-&lt;%= name.to_s == 'notice' ? 'success' : 'danger' %&gt; alert-dismissable\"&gt;\n        &lt;button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-hidden=\"true\"&gt;&amp;times;&lt;/button&gt;\n        &lt;%= content_tag :div, msg, :id =&gt; \"flash_#{name}\" %&gt;\n      &lt;/div&gt;\n      &lt;% end %&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>How can I have it so when the field entry isn't valid, it has a message appear?</p>\n\n<p><strong>SOLVED:</strong> kinda...</p>\n\n<p>Just needed to add:</p>\n\n<pre><code>&lt;% if @listing_video.errors.any? %&gt;\n    &lt;ul&gt;\n      &lt;% @listing_video.errors.full_messages.each do |msg| %&gt;\n        &lt;%= msg %&gt;\n      &lt;% end %&gt;\n    &lt;/ul&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>To my form.</p>\n\n<p>It doesn't pop up like a banner atm but will figure that out soon with bootstrap and/or css</p>\n\n<p>I usually remove this from my forms to avoid the \"double\" error message situation but this is a case where it is needed.  I should had realized this before asking -</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "mib", "f5"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1546240532, "post_id": 53984603, "comment_id": 94806500, "body": "<i>Sidenote:</i> never ever rescue <code>Exception</code>. Rescue <code>StandardError</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546240704, "post_id": 53984603, "comment_id": 94806542, "body": "Presumably there&#39;s a problem with your code. If so, please tell us what it is (by editing the question)."}, {"owner": {"reputation": 3, "user_id": 10841876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed43ba384918053b8b3841145fbcc32?s=128&d=identicon&r=PG&f=1", "display_name": "irwan", "link": "https://stackoverflow.com/users/10841876/irwan"}, "edited": false, "score": 0, "creation_date": 1546241218, "post_id": 53984603, "comment_id": 94806644, "body": "can i search and get value from specific string/id from key:  sample:  &quot;PoolName.11.22.33&quot;:&quot;pool_a&quot;,   &quot;PoolMemberName.11.22.33.11&quot;:&quot;member_pool_a1&quot;,   &quot;PoolMemberScore.11.22.33.11&quot;:0,  let say this is name and &quot;11.22.33&quot; and this is ID. i want to search"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1546241425, "post_id": 53984603, "comment_id": 94806694, "body": "a) keys in your hash are symbols, while you expect them to be strings; b) <code>Hash#each</code> block receives 2 parameters and your <code>key</code> as block parameter receives an array; c) <code>each</code> won\u2019t result in the hash you have requested as a result; d) what the heck are <code>event</code>s in your posted code? \u2192 there are so many glitches that you\u2019d better read some ruby book instead of asking questions here."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546302640, "post_id": 53984603, "comment_id": 94822312, "body": "As a Ruby newbie I&#39;m sure you&#39;ll have trouble understanding my answer, even though I&#39;ve given quite a bit of detail. By going through it step-by-step I think you may learn a lot about Ruby and the <i>Ruby way</i>. You can&#39;t be expected to understand everything, but if you return to my answer in a few months you should be able to do so. Note that my answer is not just for you, but for other Rubiests with more experience."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1546302351, "last_edit_date": 1546302351, "creation_date": 1546247762, "answer_id": 53985644, "question_id": 53984603, "link": "https://stackoverflow.com/questions/53984603/ruby-hash-get-from-dynamic-key-and-value-mib-snmp/53985644#53985644", "title": "Ruby hash get from dynamic key and value (MIB SNMP)", "body": "<pre><code>person.\n  slice_before { |_,v| v.is_a?(String) &amp;&amp;\n    v.match?(/\\Apool_\\p{Lower}{,2}\\z/) }.\n  each_with_object({}) do |((_, pool), *rest),h|\n    pool_str = pool + \".member_pool_\"\n    rest.group_by { |k,_| k[/(?:\\.\\d+)+\\z/] }.\n         each do |_,((_,s),(_,n))|\n           (s,n = n,s) if n.is_a?(String)\n           h[(pool_str + s[/[^_]+\\z/]).to_sym] = n\n         end  \n  end\n  #=&gt; {:\"pool_a.member_pool_a1\"=&gt;0,\n  #    :\"pool_b.member_pool_b1\"=&gt;2,\n  #    :\"pool_b.member_pool_b2\"=&gt;3,\n  #    :\"pool_c.member_pool_c1\"=&gt;11,\n  #    :\"pool_c.member_pool_c2\"=&gt;22,\n  #    :\"pool_c.member_pool_c3\"=&gt;33} \n</code></pre>\n\n<p>The steps are as follows<sup>1</sup>.</p>\n\n<pre><code>c = person.slice_before { |_,v| v.is_a?(String) &amp;&amp;\n      v.match?(/\\Apool_\\p{Lower}{,2}\\z/) }\n  #=&gt; #&lt;Enumerator: #&lt;Enumerator::Generator:0x00005d500f652950&gt;:each&gt; \n</code></pre>\n\n<p>We can see the values that will be generated by this enumerator by converting it to an array.</p>\n\n<pre><code>c.to_a\n  #=&gt; [[[:\"PoolName.11.22.33\", \"pool_a\"],\n  #     [:\"PoolMemberName.11.22.33.11\", \"member_pool_a1\"],\n  #     [:\"PoolMemberScore.11.22.33.11\", 0]],\n  #    [[:\"PoolName.11.22.44\", \"pool_b\"],\n  #     [:\"PoolMemberName.11.22.44.11\", \"member_pool_b1\"], \n  #     [:\"PoolMemberName.11.22.44.12\", \"member_pool_b2\"],\n  #     [:\"PoolMemberScore.11.22.44.11\", 2],\n  #     [:\"PoolMemberScore.11.22.44.12\", 3]],\n  #    [[:\"PoolName.11.22.55\", \"pool_c\"],\n  #     [:\"PoolMemberName.11.22.55.11\", \"member_pool_c1\"],\n  #     [:\"PolMemberName.11.22.55.12\", \"member_pool_c2\"],\n  #     [:\"PoolMemberName.11.22.55.13\", \"member_pool_c3\"],\n  #     [:\"PoolMemberScore.11.22.55.11\", 11],\n  #     [:\"PoolMemberScore.11.22.55.12\", 22],\n  #     [:\"PoolMemberScore.11.22.55.13\", 33]]]\n</code></pre>\n\n<p>As seen, <code>c</code> generates 3 arrays, one for each of the three pools, \"a\", \"b\" and \"c\". See <a href=\"http://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-slice_before\" rel=\"nofollow noreferrer\">Enumerable#slice_before</a>. Continuing,</p>\n\n<pre><code>d = c.each_with_object({})\n  #=&gt; #&lt;Enumerator: #&lt;Enumerator:\n  # #&lt;Enumerator::Generator:0x00005d500f652950&gt;:each&gt;\n  #   :each_with_object({})&gt; \n</code></pre>\n\n<p><code>d</code> can be thought of as a <em>compound enumerator</em>, though Ruby has no such concept. See <a href=\"http://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-each_with_object\" rel=\"nofollow noreferrer\">Enumerable#each_with_object</a>. The first element is generated and passed to the block, and the block variables are assigned to that value. </p>\n\n<pre><code>((_, pool), *rest),h = d.next\n  #=&gt; [[[:\"PoolName.11.22.33\", \"pool_a\"],\n  #     [:\"PoolMemberName.11.22.33.11\", \"member_pool_a1\"], \n  #     [:\"PoolMemberScore.11.22.33.11\", 0]], {}]\n</code></pre>\n\n<p>We see the block variables now have the following values.</p>\n\n<pre><code>pool\n  #=&gt; \"pool_a\" \nrest\n  #=&gt; [[:\"PoolMemberName.11.22.33.11\", \"member_pool_a1\"],\n  #    [:\"PoolMemberScore.11.22.33.11\", 0]]\nh #=&gt; {} \n</code></pre>\n\n<p>The breaking down of arrays into their components of interest is called <a href=\"https://docs.ruby-lang.org/en/2.1.0/syntax/assignment_rdoc.html\" rel=\"nofollow noreferrer\">\"array decomposition\"</a> (search for \"Array Decomposition\"). It's also known as <em>array disambiguation</em>. It's a very powerful and useful technique. Note that <code>_</code> is a valid, but somewhat special, local variable. The main reason for using an underscore (or a variable name beginning with an underscore) is to inform the reader that that variable is not used in subsequent calculations. Continuing,</p>\n\n<pre><code>pool_str = pool + \".member_pool_\"\n  #=&gt; \"pool_a.member_pool_\" \ne = rest.group_by { |k,_| k[/(?:\\.\\d+)+\\z/] }\n  #=&gt; {\".11.22.33.11\"=&gt;[\n  #     [:\"PoolMemberName.11.22.33.11\", \"member_pool_a1\"],\n  #     [:\"PoolMemberScore.11.22.33.11\", 0]]} \n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-group_by\" rel=\"nofollow noreferrer\">Enumerable#group_by</a>. Continuing,</p>\n\n<pre><code>g = e.each\n  #=&gt; #&lt;Enumerator:\n  #    {\".11.22.33.11\"=&gt;[\n  #      [:\"PoolMemberName.11.22.33.11\", \"member_pool_a1\"],\n  #      [:\"PoolMemberScore.11.22.33.11\", 0]]}:each&gt; \n</code></pre>\n\n<p>Lots of enumerators, eh? Again, the first element of the enumerator is generated and passed to the block and the block variables are assigned values:</p>\n\n<pre><code>p,((q,s),(r,n)) = g.next\n  #=&gt; [\".11.22.33.11\",\n  #   [[:\"PoolMemberName.11.22.33.11\", \"member_pool_a1\"],\n  #    [:\"PoolMemberScore.11.22.33.11\", 0]]]\np #=&gt; \".11.22.33.11\"\nq #=&gt; :\"PoolMemberName.11.22.33.11\"\ns #=&gt; \"member_pool_a1\"\nr #=&gt; :\"PoolMemberScore.11.22.33.11\"\nn #=&gt; 0\n</code></pre>\n\n<p><code>p</code>, <code>q</code> and <code>r</code> are not used in the block calculations. For that reason I used <code>_</code> for all three of those variables:</p>\n\n<pre><code>each do |_,((_,s),(_,n))| ...\n</code></pre>\n\n<p>This array decomposition may look extremely complex, but it really isn't. Just compare the locations of the parentheses in the line immediately above with the locations of brackets in the return value of <code>g.next</code> shown above.</p>\n\n<p>The block calculation is now performed. We cannot be sure the two elements of <code>g.next</code> are in the right order (though here they are), so we reverse them if needed.</p>\n\n<pre><code>(s,n = n,s) if n.is_a?(String)\n  #=&gt; nil \ns #=&gt; \"member_pool_a1\" \nn #=&gt; 0 \n\ni = s[/[^_]+\\z/]\n  #=&gt; \"a1\" \nj = pool_str + i\n  #=&gt; \"pool_a.member_pool_a1\" \nk = j.to_sym\n  #=&gt; :\"pool_a.member_pool_a1\" \nh[k] = n\n  #=&gt; 0 \nh #=&gt; {:\"pool_a.member_pool_a1\"=&gt;0} \n</code></pre>\n\n<p>As <code>g.size #=&gt; 1</code> we are finished with <code>g</code>. The next step is therefore to generate the next element of <code>d</code> (pool \"b\"):</p>\n\n<pre><code>((_, pool), *rest),h = d.next\n  #=&gt; [[[:\"PoolName.11.22.44\", \"pool_b\"],\n  #     [:\"PoolMemberName.11.22.44.11\", \"member_pool_b1\"],\n  #     [:\"PoolMemberName.11.22.44.12\", \"member_pool_b2\"],\n  #     [:\"PoolMemberScore.11.22.44.11\", 2], \n  #     [:\"PoolMemberScore.11.22.44.12\", 3]],\n  #    {:\"pool_a.member_pool_a1\"=&gt;0}] \npool\n  #=&gt; \"pool_b\"\nrest\n  #=&gt; [[:\"PoolMemberName.11.22.44.11\", \"member_pool_b1\"],\n  #    [:\"PoolMemberName.11.22.44.12\", \"member_pool_b2\"],\n  #    [:\"PoolMemberScore.11.22.44.11\", 2],\n  #    [:\"PoolMemberScore.11.22.44.12\", 3]]\nh #=&gt; {:\"pool_a.member_pool_a1\"=&gt;0}\n</code></pre>\n\n<p>Notice how the block variable <code>h</code> has been updated. The remaining calculations are similar.</p>\n\n<p><sup>1 Experienced Rubiests: gory-detail alert!</sup></p>\n"}], "owner": {"reputation": 3, "user_id": 10841876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed43ba384918053b8b3841145fbcc32?s=128&d=identicon&r=PG&f=1", "display_name": "irwan", "link": "https://stackoverflow.com/users/10841876/irwan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 53985644, "answer_count": 1, "score": 0, "last_activity_date": 1546302351, "creation_date": 1546240074, "last_edit_date": 1546248142, "question_id": 53984603, "link": "https://stackoverflow.com/questions/53984603/ruby-hash-get-from-dynamic-key-and-value-mib-snmp", "title": "Ruby hash get from dynamic key and value (MIB SNMP)", "body": "<p>I'm a newbie on ruby, I have hash data like below.</p>\n\n<pre><code>person = {\n  \"PoolName.11.22.33\":\"pool_a\",\n  \"PoolMemberName.11.22.33.11\":\"member_pool_a1\",\n  \"PoolMemberScore.11.22.33.11\":0,\n  \"PoolName.11.22.44\":\"pool_b\",\n  \"PoolMemberName.11.22.44.11\":\"member_pool_b1\",\n  \"PoolMemberName.11.22.44.12\":\"member_pool_b2\",\n  \"PoolMemberScore.11.22.44.11\":2,\n  \"PoolMemberScore.11.22.44.12\":3,\n  \"PoolName.11.22.55\":\"pool_c\",\n  \"PoolMemberName.11.22.55.11\":\"member_pool_c1\",\n  \"PolMemberName.11.22.55.12\":\"member_pool_c2\",\n  \"PoolMemberName.11.22.55.13\":\"member_pool_c3\",\n  \"PoolMemberScore.11.22.55.11\":11,\n  \"PoolMemberScore.11.22.55.12\":22,\n  \"PoolMemberScore.11.22.55.13\":33\n}\n</code></pre>\n\n<p>Can i get results like following below:</p>\n\n<pre><code>\"pool_a.member_pool_a1\" : 0,\n\"pool_b.member_pool_b1\" : 2,\n\"pool_b.member_pool_b2\" : 3,\n\"pool_c.member_pool_c1\" : 11,\n\"pool_c.member_pool_c2\" : 22,\n\"pool_c.member_pool_c3\" : 33\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 809, "user_id": 7723441, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RTtHX.jpg?s=128&g=1", "display_name": "Anton Sergeyev", "link": "https://stackoverflow.com/users/7723441/anton-sergeyev"}, "edited": false, "score": 0, "creation_date": 1546239431, "post_id": 53984257, "comment_id": 94806239, "body": "Thank you very much, couldn&#39;t find the right answer in Google."}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": true, "score": 1, "last_activity_date": 1546237384, "creation_date": 1546237384, "answer_id": 53984257, "question_id": 53984214, "link": "https://stackoverflow.com/questions/53984214/users-position-in-ruby-on-rails-devise-gem/53984257#53984257", "title": "User&#39;s position in Ruby on Rails, Devise gem", "body": "<p>Your User models have number of records and those are stored with <code>id</code> which is already auto incremented. Adding <code>position</code> similar to <code>id</code> is useless.</p>\n\n<p>You can achieve it by following as few of your records used to get deleted and you want position as per existing records.</p>\n\n<pre><code>@position = User.all.ids.sort.index(@user.id)\n</code></pre>\n\n<p>Here <code>@user</code> is object for which 'show' action is getting called to get <code>@position</code></p>\n"}, {"comments": [{"owner": {"reputation": 809, "user_id": 7723441, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RTtHX.jpg?s=128&g=1", "display_name": "Anton Sergeyev", "link": "https://stackoverflow.com/users/7723441/anton-sergeyev"}, "edited": false, "score": 0, "creation_date": 1546239453, "post_id": 53984289, "comment_id": 94806246, "body": "Thank you for the answer, really appreciate your help sir!"}], "tags": [], "owner": {"reputation": 1473, "user_id": 3173665, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e4f32eea9b60872a87bf1a04847ce267?s=128&d=identicon&r=PG&f=1", "display_name": "bhanu", "link": "https://stackoverflow.com/users/3173665/bhanu"}, "is_accepted": false, "score": 1, "last_activity_date": 1546237581, "creation_date": 1546237581, "answer_id": 53984289, "question_id": 53984214, "link": "https://stackoverflow.com/questions/53984214/users-position-in-ruby-on-rails-devise-gem/53984289#53984289", "title": "User&#39;s position in Ruby on Rails, Devise gem", "body": "<p>If you have a column for position you probably need to update it if some of the records are deleted.</p>\n\n<p>You can do two count queries, given a <code>user</code> object.</p>\n\n<pre><code>count_1 = User.where(\"id &lt;= ?\", user.id).count\n</code></pre>\n\n<p><code>count_1</code> is the position of the user</p>\n\n<pre><code>count_2 = User.count\n</code></pre>\n\n<p><code>count_2</code> is the total postions</p>\n"}], "owner": {"reputation": 809, "user_id": 7723441, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RTtHX.jpg?s=128&g=1", "display_name": "Anton Sergeyev", "link": "https://stackoverflow.com/users/7723441/anton-sergeyev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 53984257, "answer_count": 2, "score": 0, "last_activity_date": 1546237581, "creation_date": 1546237060, "question_id": 53984214, "link": "https://stackoverflow.com/questions/53984214/users-position-in-ruby-on-rails-devise-gem", "title": "User&#39;s position in Ruby on Rails, Devise gem", "body": "<p>I want to display a user's position on <code>show</code> page. For example, \"Your position is 1921 out of 195119\". Is there any effective way to do such thing in <code>devise gem</code>?</p>\n\n<p>My idea was to add an extra column inside <code>users</code> table and make it auto increment for each entry. However, I think that there is a better way to do so. Thank you very much for your help and time.</p>\n"}, {"tags": ["ruby", "rubocop"], "answers": [{"comments": [{"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "edited": false, "score": 0, "creation_date": 1546237288, "post_id": 53984206, "comment_id": 94805758, "body": "One reason Rubocop says not to use class variables (the ones with two at signs, for clarity of other readers) is that it says class variables are passed by reference when inheriting classes. This means a class can change another\u2019s class variable and that is likely not very obvious or intentional."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "edited": false, "score": 1, "creation_date": 1546237414, "post_id": 53984206, "comment_id": 94805783, "body": "@Nate well, this is the desired behaviour for class variables contrarywise to instance variables on the class level, so Rubocop would better shut up (or explain the intent so that people do not need to post questions like above on SO.)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "edited": false, "score": 1, "creation_date": 1546237557, "post_id": 53984206, "comment_id": 94805820, "body": "@Nate class variables are perfectly usable when one needs to collect some base-class-wide information and keep it accessible from the whole hierarchy tree branch. For instance, <code>ActiveRecord::Base</code> could have all the instances, direct and indirect, stored <i>in the class variable</i>. That is what class variables were invented for."}, {"owner": {"reputation": 536, "user_id": 7887006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ffe87f9f197932cc6bd0e0a943072e4?s=128&d=identicon&r=PG&f=1", "display_name": "RWDJ", "link": "https://stackoverflow.com/users/7887006/rwdj"}, "reply_to_user": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "edited": false, "score": 2, "creation_date": 1546238671, "post_id": 53984206, "comment_id": 94806057, "body": "@Nate&#39;s right about the intent from their documentation, but Aleksei&#39;s right about everything else. It&#39;s unreasonable for RuboCop to oust class variables and provide a fake correction."}, {"owner": {"reputation": 536, "user_id": 7887006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ffe87f9f197932cc6bd0e0a943072e4?s=128&d=identicon&r=PG&f=1", "display_name": "RWDJ", "link": "https://stackoverflow.com/users/7887006/rwdj"}, "edited": false, "score": 0, "creation_date": 1546238978, "post_id": 53984206, "comment_id": 94806130, "body": "@AlekseiMatiushkin, I didn&#39;t miss a <code>@</code>. That&#39;s the exact code provided by RuboCop to fix <code>correction:Style&#47;ClassVars</code> in the provided <a href=\"https://rubocop.readthedocs.io/en/latest/cops_style/#styleclassvars\" rel=\"nofollow noreferrer\">documentation</a>. I knew the second snippet would fail too, but I added it for completeness since ruby made the suggestion.  Your response mostly reflects what I&#39;m thinking, so I&#39;ll check back in a day or so and accept your answer if no one else figures out if RuboCop just has a typo in their documentation or if they&#39;re just straight wrong. But, good insight into the class method."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 536, "user_id": 7887006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ffe87f9f197932cc6bd0e0a943072e4?s=128&d=identicon&r=PG&f=1", "display_name": "RWDJ", "link": "https://stackoverflow.com/users/7887006/rwdj"}, "edited": false, "score": 1, "creation_date": 1546239106, "post_id": 53984206, "comment_id": 94806162, "body": "@RWDJ if you do care about Rubocop docs, create an issue in their repo; it makes more sense than sitting here waiting for strangers wild guesses :)"}, {"owner": {"reputation": 536, "user_id": 7887006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ffe87f9f197932cc6bd0e0a943072e4?s=128&d=identicon&r=PG&f=1", "display_name": "RWDJ", "link": "https://stackoverflow.com/users/7887006/rwdj"}, "edited": false, "score": 0, "creation_date": 1546241031, "post_id": 53984206, "comment_id": 94806607, "body": "@AlekseiMatiushkin, true enough. I actually did that originally and was directed to SO, but I just posted a ticket on their style guide repo. Anyways, I&#39;d still like to see what people come up with for resolving it, since the docs definitely do not. Your suggestion to create a class method to access the class instance variable works fine and it&#39;s reasonable, although I would still never do that unless I was forced to, so I&#39;ll accept your answer."}, {"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "edited": false, "score": 0, "creation_date": 1546266360, "post_id": 53984206, "comment_id": 94814331, "body": "For what it\u2019s worth, I\u2019ve been taught for years not to use the @@variables. If you have any, it\u2019s still good practice to get rid of them, though honestly I don\u2019t have a great reason why other than there are other not-as-fragile ways to store variables."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "edited": false, "score": 0, "creation_date": 1546268181, "post_id": 53984206, "comment_id": 94814902, "body": "@Nate once again, there is no better way to store anything shared between subclasses."}, {"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "edited": false, "score": 2, "creation_date": 1546268375, "post_id": 53984206, "comment_id": 94814966, "body": "Sure there is. Use a class-level instance variable as the cop suggests. This gets shared amongst all subclasses, but doesn\u2019t leave you with the possibility of a child class changing the parent\u2019s variable on accident. If you need the instances to have access to your class instance variable, you likely should be using a reader method anyways. If you use Rails, you can also check out <code>class_attribute</code> which has a lot of inheritance features that are too much for this comment."}, {"owner": {"reputation": 1047, "user_id": 1223501, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/3eDvF.jpg?s=128&g=1", "display_name": "Foton", "link": "https://stackoverflow.com/users/1223501/foton"}, "edited": false, "score": 0, "creation_date": 1614678877, "post_id": 53984206, "comment_id": 117451900, "body": "I recommend this question and answer for understandind what cops  suggets: <a href=\"https://stackoverflow.com/questions/15773552/ruby-class-instance-variable-vs-class-variable\" title=\"ruby class instance variable vs class variable\">stackoverflow.com/questions/15773552/&hellip;</a>"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 10, "last_activity_date": 1546236994, "creation_date": 1546236994, "answer_id": 53984206, "question_id": 53984143, "link": "https://stackoverflow.com/questions/53984143/how-to-correct-style-classvars-in-rubocop/53984206#53984206", "title": "How to correct `Style/ClassVars` in RuboCop?", "body": "<p>You are missing the difference between the scopes of variables.</p>\n\n<pre><code>class A\n  @test = 42\nend\n</code></pre>\n\n<p>The above declares an instance variable in the class scope. It is accessible as</p>\n\n<pre><code>A.instance_variable_get(:@test)\n#\u21d2 42\n</code></pre>\n\n<p>You can define an accessor for this variable:</p>\n\n<pre><code>class A\n  @test = 42\n  def self.test\n    @test\n  end\nend\n\nA.test #\u21d2\u00a042\n</code></pre>\n\n<p>It is shared between instances and to access it from instances you should refer to the class:</p>\n\n<pre><code>#     \u21d3\u21d3\u21d3\u21d3\u21d3 HERE\nA.new.class.test #\u21d2\u00a042\n</code></pre>\n\n<hr>\n\n<p>The following code declares an instance variable on the <em>class instances</em>:</p>\n\n<pre><code>class A\n  def initialize\n    @test = 42\n  end\nend\n</code></pre>\n\n<p>It can be accessed from the <em>instances</em> of <code>A</code>:</p>\n\n<pre><code>A.new.instance_variable_get(:@test)\n#\u21d2 42\n</code></pre>\n\n<hr>\n\n<p>Class variables have some drawbacks when used within the class hierarchy, that is [probably] why Rubocop suggests not to use class variables (or whatever it suggests\u2014I honestly never used it since it brings more harm than help IMSO.)  </p>\n\n<p>In your first snippet you have missed the <code>@</code>. The correct code would be:</p>\n\n<pre><code>class A\n# \u21d3\u21d3 HERE\n  @@test = 10\nend\nclass A\n  def test\n    @@test # you can access class variable without offense\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 536, "user_id": 7887006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ffe87f9f197932cc6bd0e0a943072e4?s=128&d=identicon&r=PG&f=1", "display_name": "RWDJ", "link": "https://stackoverflow.com/users/7887006/rwdj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2864, "favorite_count": 0, "accepted_answer_id": 53984206, "answer_count": 1, "score": 12, "last_activity_date": 1573586790, "creation_date": 1546236447, "last_edit_date": 1546241816, "question_id": 53984143, "link": "https://stackoverflow.com/questions/53984143/how-to-correct-style-classvars-in-rubocop", "title": "How to correct `Style/ClassVars` in RuboCop?", "body": "<p>I see the <a href=\"https://github.com/rubocop-hq/ruby-style-guide#no-class-vars\" rel=\"noreferrer\">issue</a> with using class variables with Ruby; however, it seems RuboCop's <a href=\"https://rubocop.readthedocs.io/en/latest/cops_style/#styleclassvars\" rel=\"noreferrer\">documentation</a> for how to fix the issue is not sufficient. </p>\n\n<p>Now, I could just ignore it. Given my project, it doesn't matter. But, I just want to know what Rubocop is trying to tell me to do, because it doesn't make sense. </p>\n\n<p>Executing the provided <a href=\"https://rubocop.readthedocs.io/en/latest/cops_style/#styleclassvars\" rel=\"noreferrer\">code</a> in <code>irb 0.9.6</code> with <code>Ruby 2.5.1</code> gives:</p>\n\n<pre><code>class A\n  @test = 10\nend\n#=&gt; 10\nclass A\n  def test\n    @@test # you can access class variable without offense\n  end\nend\n#=&gt; :test\nA.new.test\nTraceback (most recent call last):\n        3: from /Users/Ricky/.rbenv/versions/2.5.1/bin/irb:11:in `&lt;main&gt;'\n        2: from (irb):12\n        1: from (irb):9:in `test'\nNameError (uninitialized class variable @@test in A)\nDid you mean?  @test\n</code></pre>\n\n<p>So, no. We obviously cannot access class variable without offense. irb was <em>very</em> offended. But, ruby suggests using <code>@test</code>. Maybe it was just a typo? Let's try it:</p>\n\n<pre><code>class A\n  @test = 10\n  def test\n    @test # you can access class variable without offense\n  end\nend\n#=&gt; :test\nA.new.test\n#=&gt; nil\n</code></pre>\n\n<p>So, the instance variable was never defined. What is RuboCop trying to say here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "aws-codebuild", "aws-codestar"], "answers": [{"tags": [], "owner": {"reputation": 323, "user_id": 1092800, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yVzfE.jpg?s=128&g=1", "display_name": "bradpotts", "link": "https://stackoverflow.com/users/1092800/bradpotts"}, "is_accepted": true, "score": 0, "last_activity_date": 1546245493, "creation_date": 1546245493, "answer_id": 53985291, "question_id": 53983669, "link": "https://stackoverflow.com/questions/53983669/aws-codebuild-error-while-installing-sassc-gem-wrong-ruby-version/53985291#53985291", "title": "AWS Codebuild error while installing SASSC gem wrong ruby version", "body": "<p>I changed Codebuild environment from AWS Linux distro to Ubuntu with Ruby 2.5.3 which fixed my problem. Unless someone has a better answer.</p>\n"}], "owner": {"reputation": 323, "user_id": 1092800, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yVzfE.jpg?s=128&g=1", "display_name": "bradpotts", "link": "https://stackoverflow.com/users/1092800/bradpotts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 394, "favorite_count": 0, "accepted_answer_id": 53985291, "answer_count": 1, "score": 0, "last_activity_date": 1546245493, "creation_date": 1546231346, "question_id": 53983669, "link": "https://stackoverflow.com/questions/53983669/aws-codebuild-error-while-installing-sassc-gem-wrong-ruby-version", "title": "AWS Codebuild error while installing SASSC gem wrong ruby version", "body": "<p>I'm running a Codestar project. Sample app installs fine. When I add my application in with SASSC get failure, because of Ruby version. Is there away to notify CodeBuild to upgrade Ruby version? tried looking through buildspec.yml am I anywhere close? trying to google.</p>\n\n<p>In middle of build logs</p>\n\n<pre><code>Installing sassc 2.0.0 with native extensions\n Gem::InstallError: sassc requires Ruby version &gt;= 2.3.3.\n</code></pre>\n\n<p>At end of build logs</p>\n\n<pre><code>An error occurred while installing sassc (2.0.0), and Bundler cannot continue.\nMake sure that `gem install sassc -v '2.0.0'` succeeds before bundling.\n [Container] 2018/12/31 04:17:42 Command did not exit successfully bundle install exit status 5\n[Container] 2018/12/31 04:17:42 Phase complete: INSTALL Success: false\n[Container] 2018/12/31 04:17:42 Phase context status code: COMMAND_EXECUTION_ERROR Message: Error while executing command: bundle install. Reason: exit status 5\n</code></pre>\n\n<p>thanks.</p>\n"}, {"tags": ["ruby", "irb", "private-methods", "public-method"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1546235078, "post_id": 53983115, "comment_id": 94805305, "body": "See <a href=\"https://rubyplus.com/cheatsheets/411-ruby-top-level-methods\" rel=\"nofollow noreferrer\">this article</a>: &#39;The IRB binds methods in the top level scope to main as public methods for convenience. btw, I think it would be clearer if you just referred to &#39;irb&#39; rather than &#39;irb REPL&#39;."}, {"owner": {"reputation": 2267, "user_id": 2143275, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eMJGg.png?s=128&g=1", "display_name": "Richie Thomas", "link": "https://stackoverflow.com/users/2143275/richie-thomas"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546236819, "post_id": 53983115, "comment_id": 94805665, "body": "@CarySwoveland- I edited my question for clarity.  Also, after taking a look at <a href=\"https://github.com/ruby/irb/blob/711c4e69495a69008d1be9714d65a42f8c15bf58/lib/irb.rb#L221\" rel=\"nofollow noreferrer\">the IRB source code</a>, I see the following: <code>Because irb evaluates input immediately after it is syntactically complete, the results may be slightly different than directly using Ruby.</code>.  This may refer to the public-level binding your article mentioned."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546237554, "post_id": 53983115, "comment_id": 94805819, "body": "I think that refers to multi-line statements that <code>ruby &#39;src.rb&#39;</code> has no problem with but irb can&#39;t handle. For example irb would choke on <code>arr.map(&amp;:to_i)</code> on one line and <code>.sum</code> on the next (because it wouldn&#39;t know the first line continues). Here using irb you&#39;d need to write <code>arr.map(&amp;:to).</code> on the first line and ``sum` on the next line."}, {"owner": {"reputation": 2267, "user_id": 2143275, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eMJGg.png?s=128&g=1", "display_name": "Richie Thomas", "link": "https://stackoverflow.com/users/2143275/richie-thomas"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546238054, "post_id": 53983115, "comment_id": 94805917, "body": "That makes sense.  Also, I found <a href=\"https://www.ruby-forum.com/t/differences-between-irb-and-ruby/96727/6\" rel=\"nofollow noreferrer\">this link</a> which seems to echo the point made in the article you linked.  In any case, it seems like the key takeaway is that IRB doesn&#39;t &quot;privatize&quot; any methods declared in its top-level scope, the way MRI does.  I&#39;d be curious to learn why this is the case."}], "answers": [{"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1546238810, "post_id": 53984358, "comment_id": 94806085, "body": "I added following in irb, <code>class Object; puts self; def print1; end; end;</code> &amp; <code>puts self; def print2; end;</code> both define instance methods for <code>Object</code>, but checking self in both scenario, one shows class <code>Object</code> and another shows Object class instance <code>main</code>. Please clarify if I missed something."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1546238996, "post_id": 53984358, "comment_id": 94806136, "body": "<code>main</code> is an implicitly defined by IRB instance of <code>Object</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546239787, "post_id": 53984358, "comment_id": 94806337, "body": "If one added <code>private :pretty_print</code> the method would indeed become a private instance method of <code>Object</code>, so it could still be used at top level. It could not then be used in other classes, but I don&#39;t know why one would want to do that in irb. That is, why <code>A.new.pretty_print</code>? Perhaps you could elaborate on why its a &quot;convenience&quot; for methods defined in <code>main</code> to be public."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546239863, "post_id": 53984358, "comment_id": 94806359, "body": "@CarySwoveland because you do not need to bother with defining a module for the common behaviour and including this module everywhere."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546240109, "post_id": 53984358, "comment_id": 94806411, "body": "True, but that&#39;s not a great saving. I would have created the module for inclusion in the classes (in irb), in part because I would want the code to work when it&#39;s executed in a file. I&#39;ve never used irb in the way you mentioned. (Have you?) Maybe I should consider doing so."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546240304, "post_id": 53984358, "comment_id": 94806452, "body": "@CarySwoveland \u201cI&#39;ve never used irb in the way you mentioned\u201d\u2014me neither :) But still, it was done most likely with this use-case in mind."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546240497, "post_id": 53984358, "comment_id": 94806494, "body": "I think you&#39;re right as to &quot;why&quot;, but if so I&#39;m not sure I agree with the design decision (but who am I?)."}, {"owner": {"reputation": 2267, "user_id": 2143275, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eMJGg.png?s=128&g=1", "display_name": "Richie Thomas", "link": "https://stackoverflow.com/users/2143275/richie-thomas"}, "edited": false, "score": 0, "creation_date": 1546279497, "post_id": 53984358, "comment_id": 94818026, "body": "Related question- is it equally easy for the interpreter to determine top-level scoping when running a program from a file, vs interpreting commands line-by-line in a REPL?  I was thinking that if it&#39;s more difficult to determine whether the execution flow of a REPL is in top-level scope at any given time, it would also be harder to determine when to add those top-level methods as private methods to the Object class, and that maybe this influenced the above design decision."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1546280813, "post_id": 53984358, "comment_id": 94818367, "body": "To add them as private does not require any additional action taken. Making them public does."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1546239906, "last_edit_date": 1546239906, "creation_date": 1546238125, "answer_id": 53984358, "question_id": 53983115, "link": "https://stackoverflow.com/questions/53983115/why-is-my-top-level-method-public-as-opposed-to-private-on-all-classes-when-i/53984358#53984358", "title": "Why is my top-level method public (as opposed to private) on all classes when I declare it in IRB?", "body": "<p>Both <code>irb</code> and <a href=\"https://pryrepl.org\" rel=\"nofollow noreferrer\"><code>pry</code></a> (<em>sidenote:</em> I strongly encourage to use the latter) tweak their input to declare all methods as public (during <em><code>E</code></em> stage of <code>REP</code> loop):</p>\n\n<pre><code>\u25b6 def foo; end\n#\u21d2\u00a0:foo\n\u25b6 public_methods.grep /foo/\n#\u21d2 [:foo]\n</code></pre>\n\n<p>That\u2019s it, no magic.</p>\n\n<hr>\n\n<p>That is done mostly to simplify playing with it in scenarios when one defines the method here and then wants it to be accessible from e.g. there. In <code>REPL</code> it is worth it to make everything accessible everywhere.</p>\n\n<pre><code>def pretty_print; self.inspect; end\nclass A; ...; end\nclass B; ...; end\n\nA.new.pretty_print\nB.new.pretty_print\n</code></pre>\n\n<p>One should not pay too much attention to encapsulation, SRP, etc while playing the sandbox.</p>\n\n<hr>\n\n<p>In general, it\u2019s like declaring the module with generic helpers and including it everywhere for free.</p>\n"}], "owner": {"reputation": 2267, "user_id": 2143275, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eMJGg.png?s=128&g=1", "display_name": "Richie Thomas", "link": "https://stackoverflow.com/users/2143275/richie-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 53984358, "answer_count": 1, "score": 4, "last_activity_date": 1546239906, "creation_date": 1546224457, "last_edit_date": 1546236308, "question_id": 53983115, "link": "https://stackoverflow.com/questions/53983115/why-is-my-top-level-method-public-as-opposed-to-private-on-all-classes-when-i", "title": "Why is my top-level method public (as opposed to private) on all classes when I declare it in IRB?", "body": "<p>I'm currently reading \"The Well-Grounded Rubyist\", and on page 196 I see the following:</p>\n\n<blockquote>\n  <p>Suppose you define a method at the top level:</p>\n\n<pre><code>def talk\n  puts \"Hello\"\nend\n</code></pre>\n  \n  <p>....</p>\n  \n  <p>A method that you define at the top level is stored as a private\n  instance method of the <code>Object</code> class.  The previous code is\n  equivalent to this:</p>\n\n<pre><code>class Object\n\n  private\n\n  def talk\n    puts \"Hello\"\n  end\nend\n</code></pre>\n  \n  <p>...</p>\n  \n  <p>To illustrate, let's extend the <code>talk</code> example.  Here it is again,\n  with some code that exercises it:</p>\n\n<pre><code>puts \"Trying 'talk' with no receiver...\"\ntalk\nputs \"Trying 'talk' with an explicit receiver...\"\nobj = Object.new\nobj.talk\n</code></pre>\n  \n  <p>The first call to <code>talk</code> succeeds; the second fails with a fatal\n  error, because it tries to call a private method with an explicit\n  receiver.</p>\n</blockquote>\n\n<p>I wanted to reproduce this on my local, so I put the above code in a Ruby file I created.  I did indeed get the results mentioned in the book:</p>\n\n<pre><code>$ ruby talk.rb \nTrying 'talk' with no receiver...\nHello\nTrying 'talk' with an explicit receiver...\nTraceback (most recent call last):\ntalk.rb:22:in `&lt;main&gt;': private method `talk' called for #&lt;Object:0x00007f9a8499c3e0&gt; (NoMethodError)\n</code></pre>\n\n<p>I also tried the following, which produced the same error as running the code via the Ruby interpreter:</p>\n\n<pre><code>irb(main):008:0&gt; load 'talk.rb'\nTrying 'talk' with no receiver...\nHello\nTrying 'talk' with an explicit receiver...\nTraceback (most recent call last):\n        4: from /Users/richiethomas/.rbenv/versions/2.5.3/bin/irb:11:in `&lt;main&gt;'\n        3: from (irb):8\n        2: from (irb):8:in `load'\n        1: from talk.rb:22:in `&lt;top (required)&gt;'\nNoMethodError (private method `talk' called for #&lt;Object:0x00007ffb219c95e0&gt;)\n</code></pre>\n\n<p>Next, I tried the same code in <code>irb</code>, and this time I got the following strange results:</p>\n\n<pre><code>irb(main):001:0&gt; def talk\nirb(main):002:1&gt; puts \"Hello\"\nirb(main):003:1&gt; end\n=&gt; :talk\nirb(main):004:0&gt; puts \"Trying 'talk' with no receiver...\"\nTrying 'talk' with no receiver...\n=&gt; nil\nirb(main):005:0&gt; talk\nHello\n=&gt; nil\nirb(main):006:0&gt; puts \"Trying 'talk' with an explicit receiver...\"\nTrying 'talk' with an explicit receiver...\n=&gt; nil\nirb(main):007:0&gt; Object.new.talk\nHello\n=&gt; nil\n</code></pre>\n\n<p>As you can see, in the last code example, I was able to call <code>Object.new.talk</code> and have it print <code>Hello</code> as if <code>.talk</code> were a public method on the <code>Object</code> instance.</p>\n\n<p>My question is- why is the <code>talk</code> method public on the Object class when I implement it directly in the REPL, but private when I implement it in a file and load it into the REPL (and also when I run that same file directly in my CLI via the Ruby interpreter)?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546221772, "post_id": 53982890, "comment_id": 94803360, "body": "As per <a href=\"https://api.rubyonrails.org/classes/ActiveModel/Errors.html#method-i-add\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveModel/&hellip;</a>, maybe try using the <code>message</code> key, <code>message: &quot;is required&quot;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1045, "user_id": 1417660, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WyLBz.jpg?s=128&g=1", "display_name": "rafiki_rafi", "link": "https://stackoverflow.com/users/1417660/rafiki-rafi"}, "is_accepted": false, "score": 0, "last_activity_date": 1546225357, "creation_date": 1546225357, "answer_id": 53983179, "question_id": 53982890, "link": "https://stackoverflow.com/questions/53982890/upgrading-from-ror-4-2-to-5-1-seeing-an-array-element-in-activemodel/53983179#53983179", "title": "Upgrading from RoR 4.2 to 5.1 - seeing an array element &quot;[...]&quot; in ActiveModel::Errors messages array", "body": "<p>The messages were stored in a local variable which directly referred to the error instance which also caused an infinite loop. I decided to duplicate it and then iterate over the array to add each message separately:</p>\n\n<pre><code>messages.dup.each { |m| record.errors.add(attribute, message: m) }\n</code></pre>\n\n<p>That seemed to do it!</p>\n"}], "owner": {"reputation": 1045, "user_id": 1417660, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WyLBz.jpg?s=128&g=1", "display_name": "rafiki_rafi", "link": "https://stackoverflow.com/users/1417660/rafiki-rafi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546225357, "creation_date": 1546221000, "last_edit_date": 1546221380, "question_id": 53982890, "link": "https://stackoverflow.com/questions/53982890/upgrading-from-ror-4-2-to-5-1-seeing-an-array-element-in-activemodel", "title": "Upgrading from RoR 4.2 to 5.1 - seeing an array element &quot;[...]&quot; in ActiveModel::Errors messages array", "body": "<p>Was upgrading from Rails 4.2 to Rail 5 and ran into a deprecation error:</p>\n\n<blockquote>\n  <p>DEPRECATION WARNING: ActiveModel::Errors#set is deprecated and will be removed in Rails 5.1. Use model.errors.add(:foo, [\"is required\"]) instead.</p>\n</blockquote>\n\n<p>Ok, easy enough. So I changed it to <code>model.errors.add(:foo, ['message'])</code>, however then one of my specs started going into an infinite loop (from what I could tell it was due to an self-referencing array passed to a render and then a <code>to_json</code> method).</p>\n\n<p>So, I threw in a pry and noticed the errors on my model include a strange <code>[...]</code> element:</p>\n\n<pre><code>[\"is required\", [...]]\n</code></pre>\n\n<p>The above happens when I call the <code>add</code> method vs the <code>set</code> method. The <code>set</code> method on the other hand just returns <code>[\"is required\"]</code> -- without the 2nd <code>[...]</code> element. When I try to reference that element - it just returns the whole array:</p>\n\n<pre><code>&gt; result.second\n=&gt; [\"is required\", [...]]\n</code></pre>\n\n<p>Another interesting find is that when I call <code>object_id</code> on it, it points to the parent array:</p>\n\n<pre><code>&gt; result.object_id\n=&gt; 47158376546320\n&gt; result.second.object_id\n=&gt; 47158376546320\n</code></pre>\n\n<p>So my question is:</p>\n\n<ol>\n<li>Why is the <code>add</code> method adding a second array element that's just a reference to the array itself?</li>\n</ol>\n\n<p>Note: for reference I'm actually on 5.0.6, haven't upgraded to 5.1 yet.</p>\n"}, {"tags": ["ruby", "google-app-engine", "jekyll"], "answers": [{"comments": [{"owner": {"reputation": 2343, "user_id": 7757976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c5e68bc637516cac8b94f65008473da?s=128&d=identicon&r=PG&f=1", "display_name": "llompalles", "link": "https://stackoverflow.com/users/7757976/llompalles"}, "edited": false, "score": 0, "creation_date": 1546514899, "post_id": 53983034, "comment_id": 94878778, "body": "Good job finding the solution! Do you know that you can accept your own answer?"}], "tags": [], "owner": {"reputation": 1058, "user_id": 659194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff61b8ca8fafb1ae85a7c6b7110e593f?s=128&d=identicon&r=PG", "display_name": "Luis M Rodriguez-R", "link": "https://stackoverflow.com/users/659194/luis-m-rodriguez-r"}, "is_accepted": true, "score": 0, "last_activity_date": 1546223176, "creation_date": 1546223176, "answer_id": 53983034, "question_id": 53982746, "link": "https://stackoverflow.com/questions/53982746/jekyll-app-in-google-app-engine-throws-error-502-bad-gateway/53983034#53983034", "title": "Jekyll App in Google App Engine throws error 502 Bad Gateway", "body": "<p>The solution was to set the hostname to 0.0.0.0 and the port to 8080.</p>\n\n<p>I had tried 0.0.0.0 before, but I had the default port (4000 for jekyll).</p>\n\n<p>To set the port: In the <code>app.yaml</code>, set <code>entrypoint: bundle exec jekyll serve -P $PORT</code>.</p>\n\n<p>To set the hostname: In <code>_config.yaml</code>, set <code>host: \"0.0.0.0\"</code>.</p>\n"}], "owner": {"reputation": 1058, "user_id": 659194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff61b8ca8fafb1ae85a7c6b7110e593f?s=128&d=identicon&r=PG", "display_name": "Luis M Rodriguez-R", "link": "https://stackoverflow.com/users/659194/luis-m-rodriguez-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 53983034, "answer_count": 1, "score": 0, "last_activity_date": 1546223176, "creation_date": 1546218773, "question_id": 53982746, "link": "https://stackoverflow.com/questions/53982746/jekyll-app-in-google-app-engine-throws-error-502-bad-gateway", "title": "Jekyll App in Google App Engine throws error 502 Bad Gateway", "body": "<p>I'm trying to deploy a simple Jekyll app in Google App Engine and it keeps throwing a 502 Bad Gateway error. This is my code: <a href=\"https://github.com/voiladt/voiladt.github.io\" rel=\"nofollow noreferrer\">https://github.com/voiladt/voiladt.github.io</a></p>\n\n<p>When I launch it from the GC console it works perfectly, I simply use: <code>bundle exec jekyll serve -P 8080</code>.</p>\n\n<p>But when I deploy it with <code>gcloud app deploy</code> it takes a very long time (about 30 minutes) and the resulting website throws a 502 error from nginx.</p>\n\n<p>The logs don't seem to be of much help:</p>\n\n<p><code>\n...\nConfiguration file: /app/_config.yml\nInvalid theme folder: _includes\n            Source: /app\n       Destination: /app/_site\n Incremental build: disabled. Enable with --incremental\n      Generating...\n       Jekyll Feed: Generating feed for posts\n     Build Warning: Layout 'post' requested in _posts/2018-12-30-welcome-to-jekyll.markdown does not exist.\n     Build Warning: Layout 'page' requested in about.md does not exist.\n                    done in 0.767 seconds.\n Auto-regeneration: enabled for '/app'\n    Server address: http://127.0.0.1:8080/\n  Server running... press ctrl-c to stop.\n\"GET /\" 502\n\"GET /\" 502\n\"GET /\" 502\n</code></p>\n\n<p>I've tried replacing the hostname to <code>localhost</code> and to <code>0.0.0.0</code>, but nothing seems to work. What am I doing wrong?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "datetime"], "answers": [{"tags": [], "owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "is_accepted": false, "score": 0, "last_activity_date": 1546221361, "last_edit_date": 1546221361, "creation_date": 1546216885, "answer_id": 53982616, "question_id": 53982548, "link": "https://stackoverflow.com/questions/53982548/ruby-get-time-at-start-of-next-minute/53982616#53982616", "title": "Ruby - Get time at start of next minute", "body": "<p>Not that clean without ActiveSupport:</p>\n\n<pre><code>new_date = (DateTime.now + 1.to_f / (60*24))\nDateTime.new(new_date.year, new_date.month, new_date.day, new_date.hour, new_date.minute)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 677, "user_id": 3692993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df58980e773a17b1c4258c5c143bb0e0?s=128&d=identicon&r=PG&f=1", "display_name": "TFrazee", "link": "https://stackoverflow.com/users/3692993/tfrazee"}, "edited": false, "score": 1, "creation_date": 1546222427, "post_id": 53982680, "comment_id": 94803439, "body": "I&#39;m a little embarrassed I didn&#39;t think of this. Sometimes I get so caught up in what the class&#39;s methods are capable of, I forget to consider the underlying mechanics the class is built on."}, {"owner": {"reputation": 782, "user_id": 2444220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17c671b475eeda2d0557ed441c4df01f?s=128&d=identicon&r=PG", "display_name": "mannykary", "link": "https://stackoverflow.com/users/2444220/mannykary"}, "reply_to_user": {"reputation": 677, "user_id": 3692993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df58980e773a17b1c4258c5c143bb0e0?s=128&d=identicon&r=PG&f=1", "display_name": "TFrazee", "link": "https://stackoverflow.com/users/3692993/tfrazee"}, "edited": false, "score": 0, "creation_date": 1546277520, "post_id": 53982680, "comment_id": 94817528, "body": "No worries. Here&#39;s an even more concise solution <code>time_one_min_later_rounded_down = Time.now + 60 - Time.now.sec</code>"}], "tags": [], "owner": {"reputation": 782, "user_id": 2444220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17c671b475eeda2d0557ed441c4df01f?s=128&d=identicon&r=PG", "display_name": "mannykary", "link": "https://stackoverflow.com/users/2444220/mannykary"}, "is_accepted": true, "score": 3, "last_activity_date": 1546277636, "last_edit_date": 1546277636, "creation_date": 1546217737, "answer_id": 53982680, "question_id": 53982548, "link": "https://stackoverflow.com/questions/53982548/ruby-get-time-at-start-of-next-minute/53982680#53982680", "title": "Ruby - Get time at start of next minute", "body": "<p>You could convert the <code>Time</code> object to UNIX epoch time (seconds since 1970) using <code>#to_i</code>, add 60 s, and then convert back to a <code>Time</code> object.</p>\n\n<pre><code>time_unix = Time.now.to_i\ntime_unix_one_min_later = time_unix + 60\ntime_one_min_later = t = Time.at(time_unix_one_min_later)\ntime_one_min_later_rounded_down = Time.new(t.year, t.month, t.day, t.hour, t.min)\n</code></pre>\n\n<p>EDIT: Even shorter - you can just add integer seconds to <code>Time.now</code> directly:</p>\n\n<pre><code>time_one_min_later = t = Time.now + 60\ntime_one_min_later_rounded_down = Time.new(t.year, t.month, t.day, t.hour, t.min)\n</code></pre>\n\n<p>EDIT 2: One-liner - just subtract <code>Time.now.sec</code>:</p>\n\n<pre><code>time_one_min_later_rounded_down = Time.now + 60 - Time.now.sec\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 677, "user_id": 3692993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df58980e773a17b1c4258c5c143bb0e0?s=128&d=identicon&r=PG&f=1", "display_name": "TFrazee", "link": "https://stackoverflow.com/users/3692993/tfrazee"}, "edited": false, "score": 0, "creation_date": 1546222491, "post_id": 53982693, "comment_id": 94803451, "body": "This is a good answer to the question in general, but my use case (as presented in the question) is specific to a <code>Time</code> object, whereas these methods require a <code>DateTime</code> object.  Still, it&#39;s good info, so thank you."}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 1, "last_activity_date": 1546217873, "creation_date": 1546217873, "answer_id": 53982693, "question_id": 53982548, "link": "https://stackoverflow.com/questions/53982548/ruby-get-time-at-start-of-next-minute/53982693#53982693", "title": "Ruby - Get time at start of next minute", "body": "<p>Ruby has built in methods for adding months (<code>&gt;&gt;</code>) and days (<code>+</code>). A year is 12 months, and an hour is 1/24th of a day.</p>\n\n<pre><code>require 'date'\n\ndef add_time(time, year: 0 ,month: 0, day: 0, hour: 0, minute: 0)\n  time &gt;&gt;= 12*year\n  time &gt;&gt;= month\n  time +=  day\n  time +=  Rational(hour,24)       # or (hour/24.0) if you dislike rationals\n  time +=  Rational(minute, 24*60) # (minute/24.0*60) if you dislike rationals\nend\n\np t = DateTime.now\np add_time(t, year: 1, minute: 30)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 782, "user_id": 2444220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17c671b475eeda2d0557ed441c4df01f?s=128&d=identicon&r=PG", "display_name": "mannykary", "link": "https://stackoverflow.com/users/2444220/mannykary"}, "edited": false, "score": 0, "creation_date": 1546277670, "post_id": 53985893, "comment_id": 94817567, "body": "Clever solution with subtracting <code>now.sec</code>!"}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 2, "last_activity_date": 1546291812, "last_edit_date": 1546291812, "creation_date": 1546249211, "answer_id": 53985893, "question_id": 53982548, "link": "https://stackoverflow.com/questions/53982548/ruby-get-time-at-start-of-next-minute/53985893#53985893", "title": "Ruby - Get time at start of next minute", "body": "<p>Other option, given one second to midnight:</p>\n\n<pre><code>require 'time'\nnow = Time.strptime('2018-12-31 23:59:59', '%Y-%m-%d %H:%M:%S')\n</code></pre>\n\n<p>Within one minute:</p>\n\n<pre><code>Time.at(now + 60) #=&gt; 2019-01-01 00:00:59 +0100\nTime.at(now + 60 - now.sec) #=&gt; 2019-01-01 00:00:00 +0100\n</code></pre>\n\n<p>You get: <strong><code># HAPPY NEW YEAR!</code></strong></p>\n"}], "owner": {"reputation": 677, "user_id": 3692993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df58980e773a17b1c4258c5c143bb0e0?s=128&d=identicon&r=PG&f=1", "display_name": "TFrazee", "link": "https://stackoverflow.com/users/3692993/tfrazee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1121, "favorite_count": 1, "accepted_answer_id": 53982680, "answer_count": 4, "score": 2, "last_activity_date": 1546291812, "creation_date": 1546215918, "question_id": 53982548, "link": "https://stackoverflow.com/questions/53982548/ruby-get-time-at-start-of-next-minute", "title": "Ruby - Get time at start of next minute", "body": "<p>I'm looking for a concise way to get a Ruby <code>Time</code> object representing the top of the next minute (and hour/day/month/year, if possible).  I want this to work in a pure Ruby environment, so the Rails function <code>Time.change</code> or similar doesn't fit the bill.</p>\n\n<p>At first this seems simple - just add 1 to <code>Time.now</code>, but there are edge cases where if, for example, you try to instantiate a <code>Time</code> object with <code>Time.now.min + 1</code> when the current minute is 59, you get an <code>ArgumentError: min out of range</code>. This goes for hour, day, and month as well.</p>\n\n<p>I have some lengthy code that does the job. It's ugly, but I'm just experimenting:</p>\n\n<pre><code>def add_minute\n\n    now = Time.local\n    year = now.year\n    month = now.month\n    day = now.day\n    hour = now.hour\n    min = now.min\n\n    if now.min == 59\n        if now.hour == 23\n            if now.day == Date.civil(now.year, now.month, -1).day\n                if month == 12\n                    year = year + 1\n                    month = 1\n                    day = 1\n                    hour = 0\n                    min = 0\n                else\n                    month = now.month + 1\n                    day = 1\n                    hour = 0\n                    min = 0\n                end\n            else\n                day = now.day + 1\n                hour = 0\n                min = 0\n            end\n        else\n            hour = now.hour + 1\n            min = 0\n        end\n    else\n        min = now.min + 1\n    end\n\n    Time.local year, month, day, hour, min, 0\nend\n</code></pre>\n\n<p>This seems absurdly verbose for what seems like it should be a simple or built-in task, but I haven't found a native Ruby solution.  Does one exist?</p>\n"}, {"tags": ["ruby", "http", "faraday"], "comments": [{"owner": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546218171, "post_id": 53982168, "comment_id": 94802842, "body": "Does the same happen if you use <code>puts response.body</code>?"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546247350, "post_id": 53982168, "comment_id": 94808267, "body": "What version of Ruby? What version of Faraday? What is the actual JSON response? (preferably the smallest payload able to reproduce the issue) What are the headers for the response? Please remember that questions should include a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, verifiable example</a>."}, {"owner": {"reputation": 219, "user_id": 5095832, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cdbf08ed1957197c73ab5d35cf26a602?s=128&d=identicon&r=PG&f=1", "display_name": "Krid", "link": "https://stackoverflow.com/users/5095832/krid"}, "edited": false, "score": 0, "creation_date": 1546262365, "post_id": 53982168, "comment_id": 94813110, "body": "Thanks for your comments. I have edited my question. Unfortunately I can not post a real example here due data protection issues. I have looked into it a bit more and it appears that it is a Faraday issue. When I use HTTParty everything works fine without any latency."}, {"owner": {"reputation": 219, "user_id": 5095832, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cdbf08ed1957197c73ab5d35cf26a602?s=128&d=identicon&r=PG&f=1", "display_name": "Krid", "link": "https://stackoverflow.com/users/5095832/krid"}, "reply_to_user": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546262497, "post_id": 53982168, "comment_id": 94813159, "body": "@Aaditya: yes it happens with puts as well. The processing time goes up whenever I try to do something with the result object. The only thing that doesn&#39;t slow down the runtime is when I do p response.class - that produces an output directly without any lag"}, {"owner": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546306762, "post_id": 53982168, "comment_id": 94822781, "body": "@Krid Something I came across. I think they never found a solution either. Do look into their chat link. <a href=\"https://stackoverflow.com/questions/48554031/google-api-response-time\" title=\"google api response time\">stackoverflow.com/questions/48554031/google-api-response-tim&zwnj;&#8203;e</a>"}, {"owner": {"reputation": 219, "user_id": 5095832, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cdbf08ed1957197c73ab5d35cf26a602?s=128&d=identicon&r=PG&f=1", "display_name": "Krid", "link": "https://stackoverflow.com/users/5095832/krid"}, "reply_to_user": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546446306, "post_id": 53982168, "comment_id": 94856228, "body": "@Aaditya: thanks for looking into it. Things are very strange. I have tried almost all settings (turn off IPV6, entries in hosts etc...). The strange thing is, when I query the server from my local machine with a Python HTTP Client it works perfectly. When I use a Ruby client it is painfully slow. I thought it might be a problem with the NET::HTTP library but it is the same with Excon. I&#39;m sure it is a network issue somewhere on my local machine (MBP with High Sierra) but I have absolutely no clue to fix it..."}, {"owner": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546454604, "post_id": 53982168, "comment_id": 94859771, "body": "@Krid Well, if it works fast well with postman, python, other languages and their libraries, etc. then it has to be a problem with ruby or the ruby i/o kernel. I will be surprised if it came out to be a problem with the MacOS. You could maybe try your code on another machine , if you have one or online somewhere like REPL, coder, etc...or a friend&#39;s machine."}, {"owner": {"reputation": 219, "user_id": 5095832, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cdbf08ed1957197c73ab5d35cf26a602?s=128&d=identicon&r=PG&f=1", "display_name": "Krid", "link": "https://stackoverflow.com/users/5095832/krid"}, "reply_to_user": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546456342, "post_id": 53982168, "comment_id": 94860483, "body": "@Aaditya: uhhh... you&#39;re so right. I didn&#39;t thought about checking the LAN. I tried it over the LAN with another MBP and it works like a charm. So the issue must be somewhere in the Ruby 127.0.0.1 or &#39;localhost&#39; processing. I&#39;ll try to move the server to Docker and see if this helps."}], "answers": [{"tags": [], "owner": {"reputation": 219, "user_id": 5095832, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cdbf08ed1957197c73ab5d35cf26a602?s=128&d=identicon&r=PG&f=1", "display_name": "Krid", "link": "https://stackoverflow.com/users/5095832/krid"}, "is_accepted": false, "score": 0, "last_activity_date": 1546540748, "last_edit_date": 1546540748, "creation_date": 1546536963, "answer_id": 54027154, "question_id": 53982168, "link": "https://stackoverflow.com/questions/53982168/ruby-within-python-virtualenv-http-post-request-very-slow-on-the-client-side/54027154#54027154", "title": "Ruby within Python virtualenv HTTP Post Request very slow on the client side", "body": "<p>...after searching for a solution for days I finally found the issue. When you have Python and Ruby code combined within a folder that is connected with a virtualenv Python (and activated Python env of course) Ruby apparently has problems resolving the local address space. It works but it takes some strange detours that make the whole thing terribly slow.</p>\n\n<p>My solution: I moved the Ruby code that has to play together with the Python code via HTTP connections in a folder outside of the Python code folder.</p>\n"}], "owner": {"reputation": 219, "user_id": 5095832, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cdbf08ed1957197c73ab5d35cf26a602?s=128&d=identicon&r=PG&f=1", "display_name": "Krid", "link": "https://stackoverflow.com/users/5095832/krid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1546540748, "creation_date": 1546211351, "last_edit_date": 1546537191, "question_id": 53982168, "link": "https://stackoverflow.com/questions/53982168/ruby-within-python-virtualenv-http-post-request-very-slow-on-the-client-side", "title": "Ruby within Python virtualenv HTTP Post Request very slow on the client side", "body": "<p>I'm currently stuck with a response time problem with the Faraday HTTP library. I'm using the following code to initialize a POST request to a server running on my local machine at 127.0.0.1. The server returns a valid JSON string. The code to initialize the Faraday object on the client side is as follows:</p>\n\n<pre><code>url = 'http://127.0.0.1'\n\nconn = Faraday.new(:url =&gt; url) do |faraday|\n  faraday.request  :url_encoded\n  faraday.response :json, :content_type =&gt; 'application/json'\n  faraday.adapter  Faraday.default_adapter\nend\n</code></pre>\n\n<p>Then I send a JSON string via a POST request to the server. The code for sending the request looks like this (text size up to 5000 char):</p>\n\n<pre><code>payload = {:language =&gt; 'en', :text =&gt; 'some text'}.to_json\n\nresponse = conn.post do |req|\n  req.url '/api'\n  req.headers['Content-Type'] = 'application/json'\n  req.body = payload\nend\n</code></pre>\n\n<p>The expected result is a JSON string of the following structure:</p>\n\n<pre><code>{\n  \"level1.1\" : [\n     {\n       \"level2.1\" : [\n          {\n            \"value1\" : \"Text\",\n            \"value2\" : \"Text\",\n            \"value(...)\" : \"Text\",\n            \"value(n)\" : \"Text\"\n          },\n          {...\n          }\n        ],\n&lt;and so on... - of course in a valid JSON structure ending&gt;\n</code></pre>\n\n<p>When I run the code without doing anything with the result it performs pretty well and finishes in a reasonable time (&lt; 0.5s). But as soon as I try to access the response object the script becomes terrible slow.</p>\n\n<p>Just by adding the line:</p>\n\n<pre><code>p response.body\n</code></pre>\n\n<p>The processing time goes up to > 8s.</p>\n\n<p>I have checked the server response with Postman and it works absolutely fine without any visible problems. Response time in Postman is >0.5 s as well. The slow down appears only on the client side when I try to access the response object. Just inspecting the response object doesn't effect the processing time either. But as soon as I start \"to do\" something with the response it becomes terribly slow.</p>\n\n<p>I'm running Ruby 2.5.3 and Faraday 0.15.4 / Middleware 0.12.2</p>\n\n<p>Any idea what might cause this slowdown is greatly appreciated.</p>\n\n<p>Krid</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Despite my comment that HTTParty solved this issue this was just due to a smaller  payload. HTTParty and Faraday both perform badly on my POST request while a POST request from Postman runs very fast even with large payloads. I have no idea what causes this different runtime behavior when querying exactly the same server app with exactly the same payload.</p>\n\n<p>As said any ideas that might point me in the right direction greatly appreciated.</p>\n\n<p>Krid</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1546211524, "post_id": 53981756, "comment_id": 94801784, "body": "What do you mean by &quot;inside hash&quot;? There are several nested hashes. <code>game_hash</code> needs to be fixed. For one, it can&#39;t end with a comma. Also, there are 4 left parens but only 1 right paren. See my answer. Always test your code before posting."}, {"owner": {"reputation": 782, "user_id": 2444220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17c671b475eeda2d0557ed441c4df01f?s=128&d=identicon&r=PG", "display_name": "mannykary", "link": "https://stackoverflow.com/users/2444220/mannykary"}, "edited": false, "score": 0, "creation_date": 1546215629, "post_id": 53981756, "comment_id": 94802406, "body": "I posted an answer to your question about converting the hash values to an integer, but I would like to point out a few unrelated things: 1) It is not necessary to do a check to see if a key exists in a hash; if you try to access a key that does not exist in a hash, it will return <code>nil</code>. If you want a different default value, you can use <code>#fetch</code>: <code>hash.fetch(:inexistent_key, {})</code>. 2) You don&#39;t need to use <code>return</code> as the last line executed in a block is implicitly returned. You would only use it if you want to return early from a block."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1546211328, "creation_date": 1546211328, "answer_id": 53982167, "question_id": 53981756, "link": "https://stackoverflow.com/questions/53981756/i-need-to-convert-a-string-to-an-integer-within-a-hash/53982167#53982167", "title": "I need to convert a string to an integer within a hash", "body": "<pre><code>game_hash = {\n  :home =&gt; {:team_name =&gt;\"Brooklyn Nets\",\n            :colors =&gt; [\"Black\", \"White\"], \n            :players =&gt; {\n              \"Alan Anderson\" =&gt; {\n               :number =&gt; 0,\n               :shoe =&gt; \"16\", \n               :points =&gt; 22,\n              }\n            }\n           }\n} \n</code></pre>\n\n<p>In this case, assuming you do not want to mutate (modify) the original hash, it's easiest to first make a <em>deep copy</em> of <code>game_hash</code>:</p>\n\n<pre><code>h = Marshal.load(Marshal.dump(game_hash))\n  #=&gt; {:home=&gt;{:team_name=&gt;\"Brooklyn Nets\", :colors=&gt;[\"Black\", \"White\"],\n  #    :players=&gt;{\"Alan Anderson\"=&gt;{:number=&gt;0, :shoe=&gt;\"16\", :points=&gt;22}}}}\n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.5.2/Marshal.html#method-c-load\" rel=\"nofollow noreferrer\">Marshall::load</a> and <a href=\"https://ruby-doc.org/core-2.5.2/Marshal.html#method-c-dump\" rel=\"nofollow noreferrer\">Marshall::dump</a>.</p>\n\n<p>Then just modify the value of interest:</p>\n\n<pre><code>h[:home][:players][\"Alan Anderson\"][:shoe] =\n  h[:home][:players][\"Alan Anderson\"][:shoe].to_i\nh #=&gt; {:home=&gt;{:team_name=&gt;\"Brooklyn Nets\", :colors=&gt;[\"Black\", \"White\"],\n  #    :players=&gt;{\"Alan Anderson\"=&gt;{:number=&gt;0, :shoe=&gt;16, :points=&gt;22}}}}\n</code></pre>\n\n<p>Lastly, let's confirm the original hash was not mutated:</p>\n\n<pre><code>game_hash\n  #=&gt; {:home=&gt;{:team_name=&gt;\"Brooklyn Nets\", :colors=&gt;[\"Black\", \"White\"],\n  #    :players=&gt;{\"Alan Anderson\"=&gt;{:number=&gt;0, :shoe=&gt;\"16\", :points=&gt;22}}}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1546213331, "creation_date": 1546213331, "answer_id": 53982341, "question_id": 53981756, "link": "https://stackoverflow.com/questions/53981756/i-need-to-convert-a-string-to-an-integer-within-a-hash/53982341#53982341", "title": "I need to convert a string to an integer within a hash", "body": "<p>Following your code, just a couple of changes (see inline comments in the option below).</p>\n\n<p>Given the <code>game_hash</code>, which could have integers as string somewhere:</p>\n\n<pre><code>game_hash = {:home =&gt; { team_name:\"Brooklyn Nets\", colors:[\"Black\", \"White\"],:players =&gt; {\"Alan Anderson\" =&gt; {:number =&gt; \"0\", :shoe =&gt; \"16\", :points =&gt; 22, :rebounds =&gt; 12, :assists =&gt;12, :steals =&gt; 3, :blocks =&gt; 1, :slam_dunks =&gt; 1},\"Reggie Evans\" =&gt; {:number =&gt; \"30\",:shoe =&gt; \"14\",:points =&gt; 12, :rebounds =&gt; 12, :assists =&gt; 12, :steals =&gt; 12, :blocks =&gt; 12, :slam_dunks =&gt; 7}}}}\n</code></pre>\n\n<p>This is the option:</p>\n\n<pre><code>def player_stats(player_name, game_hash) # &lt;-- pass game_hash as parameter\n  game_hash.keys.each do |data|\n    if game_hash[data][:players].keys.include?(player_name)\n      return game_hash[data][:players][player_name].transform_values { |v| v.to_i } # &lt;-- transform values to integer\n    end\n  end\nend\n</code></pre>\n\n<p>Then, you can call:</p>\n\n<pre><code>player_stats(\"Reggie Evans\", game_hash)\n#=&gt; {:number=&gt;30, :shoe=&gt;14, :points=&gt;12, :rebounds=&gt;12, :assists=&gt;12, :steals=&gt;12, :blocks=&gt;12, :slam_dunks=&gt;7}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 782, "user_id": 2444220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17c671b475eeda2d0557ed441c4df01f?s=128&d=identicon&r=PG", "display_name": "mannykary", "link": "https://stackoverflow.com/users/2444220/mannykary"}, "is_accepted": false, "score": 0, "last_activity_date": 1546216644, "last_edit_date": 1546216644, "creation_date": 1546214834, "answer_id": 53982462, "question_id": 53981756, "link": "https://stackoverflow.com/questions/53981756/i-need-to-convert-a-string-to-an-integer-within-a-hash/53982462#53982462", "title": "I need to convert a string to an integer within a hash", "body": "<p>There are a few \"issues\" that I would like to point out in your <code>#player_stats</code> method, but I will focus on your problem with converting the player hash values to integers. To start off, I am making the following assumptions:</p>\n\n<ol>\n<li>There is no consistency in whether the values are formatted as a string or integer. </li>\n<li>All values are of integer form, in either the <code>Integer</code> type, or <code>String</code> type.</li>\n</ol>\n\n<p>One thing I would like to point out is that shoe size could be <code>9.5</code> or <code>10.5</code>, etc. This could be the reason why the shoe value is formatted as a string. If this is the case, then you would need to take this into account and convert to a float using <code>#to_f</code> instead of <code>#to_i</code>. But since your question is asking for it to be an integer, I will use <code>#to_i</code> in my examples below.</p>\n\n<p>Given my assumptions, you would simply loop over all the values in the player hash and call <code>#to_i</code> on the value to convert it to an integer. This can be done using the following method:</p>\n\n<pre><code>def convert_hash_values_to_int(hash)\n  hash.each do |key, value|\n    hash[key] = value.to_i\n  end\nend\n</code></pre>\n\n<p>You can call this method inside your <code>#player_stats</code> method. <strong>Note that this method is mutating the original hash values in place without creating a new hash.</strong> If this is not desirable, then you should use <code>#inject</code>:</p>\n\n<pre><code>def convert_hash_values_to_int(hash)\n  hash.inject({}) do |result, (key, value)|\n    result[key] = value.to_i\n    result\n  end\nend\n</code></pre>\n\n<p>This creates a new hash with the transformed values, and returns it.</p>\n\n<p>This can be simplified even further using <code>#each_with_object</code>, which also creates a new hash instead of mutating the original hash:</p>\n\n<pre><code>def convert_hash_values_to_int(hash)\n  hash.each_with_object({}) do |(key, value), result|\n    result[key] = value.to_i\n  end\nend\n</code></pre>\n\n<p>This approach does not require that you return <code>result</code> in each loop. Note that the arguments are switched for <code>#each_with_object</code> - <code>|(key, value), result|</code> instead of <code>|result, (key, value)|</code>.</p>\n\n<p>There is one more approach that you could use which is the most succinct, <strong>but it is only available in Ruby 2.4+</strong>:</p>\n\n<pre><code>def convert_hash_values_to_int(hash)\n  hash.transform_values do |value|\n    value.to_i\n  end\nend\n</code></pre>\n\n<p>Which can be even more succinct:</p>\n\n<pre><code>def convert_hash_values_to_int(hash)\n  hash.transform_values(&amp;:to_i)\nend\n</code></pre>\n\n<p><code>#transform_values</code> does not mutate the original hash. If you would like to mutate the original hash, you would need to use a bang:</p>\n\n<pre><code>def convert_hash_values_to_int(hash)\n  hash.transform_values!(&amp;:to_i)\nend\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 10593831, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8uPkCHEUvCw/AAAAAAAAAAI/AAAAAAAAAKc/vjQpIAwh6Rw/photo.jpg?sz=128", "display_name": "shine12", "link": "https://stackoverflow.com/users/10593831/shine12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1547232235, "creation_date": 1546206974, "last_edit_date": 1547232235, "question_id": 53981756, "link": "https://stackoverflow.com/questions/53981756/i-need-to-convert-a-string-to-an-integer-within-a-hash", "title": "I need to convert a string to an integer within a hash", "body": "<p>I have a nested hash and I need to return the inside hash, which is a value of the key. The problem is one of the values is a string and it needs to be returned as an integer.</p>\n\n<pre><code>def player_stats(player_name)\n  game_hash.keys.each do |data|\n    if game_hash[data][:players].keys.include?(player_name)\n      return game_hash[data][:players][player_name]\n    end\n  end\nend\n\ngame_hash = {\n  :home =&gt; {team_name:\"Brooklyn Nets\", colors:[\"Black\", \"White\"], \n  :players =&gt; {\"Alan Anderson\" =&gt; {:number =&gt; 0, :shoe =&gt; \"16\", \n  :points =&gt; 22, :rebounds =&gt; 12, :assists =&gt;12, :steals =&gt; 3, \n  :blocks =&gt; 1, :slam_dunks =&gt; 1}, \n</code></pre>\n\n<p>The code is correct, the only thing is that I need to input a line that will convert the string**(:shoe)** to an integer.</p>\n"}, {"tags": ["ruby", "git", "github", "githooks"], "answers": [{"tags": [], "owner": {"reputation": 30588, "user_id": 8705432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14e0f95975d80525786e419222821ff4?s=128&d=identicon&r=PG&f=1", "display_name": "bk2204", "link": "https://stackoverflow.com/users/8705432/bk2204"}, "is_accepted": false, "score": 0, "last_activity_date": 1546208340, "creation_date": 1546208340, "answer_id": 53981886, "question_id": 53980990, "link": "https://stackoverflow.com/questions/53980990/git-extra-hook-pre-upload/53981886#53981886", "title": "Git extra hook, pre-upload", "body": "<p>The idea behind Git hooks is that they do at least one of two things: change the state of the repository or the current operation, or optionally block a behavior from occurring.</p>\n\n<p>A hook that executes before objects are pushed wouldn't be able to do either one of these: it has no data about how to change the repository, since it doesn't have any objects, and without any data about what's going on, there's no way that it can usefully determine whether to block a push.</p>\n\n<p>For your project, it might be useful to wrap the git HTTP backend script with a wrapper that executes before the push service starts, or one that looks for the flush pkt-line delimiter (0000) by intercepting the data. You could also patch Git to have the hook you need for your project at the appropriate location.</p>\n"}], "owner": {"reputation": 11, "user_id": 10799224, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Kenneth128", "link": "https://stackoverflow.com/users/10799224/kenneth128"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546208340, "creation_date": 1546200031, "question_id": 53980990, "link": "https://stackoverflow.com/questions/53980990/git-extra-hook-pre-upload", "title": "Git extra hook, pre-upload", "body": "<p>I'm a university student. Currently, I\u2019m doing my Final Year Project that requires a hook that executes automatically on the server side of the repository, before the objects been pulled to the client side, and after the objects have been pushed to the server side, which is \"post-receive\" hook.</p>\n\n<p>I have done lots of research regard on the hook and I came to know grack and rjgit_grack. Links will be attached below. </p>\n\n<p>Grack : <a href=\"https://github.com/grackorg/grack\" rel=\"nofollow noreferrer\">https://github.com/grackorg/grack</a>\nRjgit_grack : <a href=\"https://github.com/grackorg/rjgit_grack\" rel=\"nofollow noreferrer\">https://github.com/grackorg/rjgit_grack</a></p>\n\n<p>Grack and rjgit_grack is a gem from <a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">https://rubygems.org/</a>. Grack project aims to replace the builtin git-http-backend CGI handler distributed with C Git with a Rack application and rjgit_grack is an alternative adapter of grack that support extra hooks for git that have the hook that I needed for my project, \"preUpload\" hook that is executed immediately before an upload-operation is performed, i.e. before data is sent to the client. But I was unable to get it to work for my project due to various reasons.</p>\n\n<p>Why Git doesn't have a hook that executed immediately before the data is sent to the client? Any advice on getting this hook or any similar function of the hook?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routing", "http-status-code-404"], "comments": [{"owner": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "edited": false, "score": 1, "creation_date": 1546198296, "post_id": 53980726, "comment_id": 94798733, "body": "Try article <a href=\"https://mattbrictson.com/dynamic-rails-error-pages\" rel=\"nofollow noreferrer\">mattbrictson.com/dynamic-rails-error-pages</a>"}, {"owner": {"reputation": 45, "user_id": 10840729, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YvZ-ZENdYLc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbu3HH78kkPEbx5PGCktp9p5VuVQg/mo/photo.jpg?sz=128", "display_name": "Artem", "link": "https://stackoverflow.com/users/10840729/artem"}, "reply_to_user": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "edited": false, "score": 0, "creation_date": 1546198602, "post_id": 53980726, "comment_id": 94798819, "body": "I already make it. It is not a solve :("}, {"owner": {"reputation": 1583, "user_id": 5253108, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/o5DQ1.jpg?s=128&g=1", "display_name": "Trenton Tyler", "link": "https://stackoverflow.com/users/5253108/trenton-tyler"}, "edited": false, "score": 0, "creation_date": 1546200554, "post_id": 53980726, "comment_id": 94799320, "body": "Post your routes file, please. Does it work in development but not production? Have you restarted your rails server after making changes to your <code>application.rb</code> file?"}, {"owner": {"reputation": 45, "user_id": 10840729, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YvZ-ZENdYLc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbu3HH78kkPEbx5PGCktp9p5VuVQg/mo/photo.jpg?sz=128", "display_name": "Artem", "link": "https://stackoverflow.com/users/10840729/artem"}, "edited": false, "score": 0, "creation_date": 1546202247, "post_id": 53980726, "comment_id": 94799727, "body": "my routes:           match &#39;/404&#39;, to: &#39;errors#not_found&#39;, via: :all   match &#39;/422&#39;, to: &#39;errors#unacceptable&#39;, via: :all   match &#39;/500&#39;, to: &#39;errors#internal_server_error&#39;, via: :all    match &#39;/404&#39;, to: &#39;errors#not_found&#39;, via: :all   match &#39;/422&#39;, to: &#39;errors#unacceptable&#39;, via: :all   match &#39;/500&#39;, to: &#39;errors#internal_server_error&#39;, via: :all"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1546204749, "post_id": 53980726, "comment_id": 94800342, "body": "<code>&#47;404</code> means nothing to Rails. You can do this by adding a default route to catch all misses like <code>&#47;*path</code> or by using <code>rescue_from</code> in your ApplicationController."}, {"owner": {"reputation": 1682, "user_id": 6392696, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09WDQ.jpg?s=128&g=1", "display_name": "nourza", "link": "https://stackoverflow.com/users/6392696/nourza"}, "edited": false, "score": 0, "creation_date": 1546206553, "post_id": 53980726, "comment_id": 94800725, "body": "Check this video <a href=\"https://www.youtube.com/watch?v=OWGCiHDP-u4&amp;t=228s\" rel=\"nofollow noreferrer\">youtube.com/watch?v=OWGCiHDP-u4&amp;t=228s</a>"}, {"owner": {"reputation": 45, "user_id": 10840729, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YvZ-ZENdYLc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbu3HH78kkPEbx5PGCktp9p5VuVQg/mo/photo.jpg?sz=128", "display_name": "Artem", "link": "https://stackoverflow.com/users/10840729/artem"}, "edited": false, "score": 0, "creation_date": 1546207001, "post_id": 53980726, "comment_id": 94800846, "body": "Thank you! Add in routes <code>get &#39;*unmatched_route&#39;, :to =&gt; &#39;errors#not_found&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "is_accepted": true, "score": 3, "last_activity_date": 1546216184, "last_edit_date": 1546216184, "creation_date": 1546215813, "answer_id": 53982542, "question_id": 53980726, "link": "https://stackoverflow.com/questions/53980726/how-to-make-404-page-ruby/53982542#53982542", "title": "How to make 404 page ruby?", "body": "<p>This is default behavior in dev mode. In development env, the routing errors are displayed so the developer can notice them &amp; fix them.\nIf you want to see the 404 page, start the server in production mode &amp; check it.</p>\n\n<pre><code>$ rails s -e production # script/rails s -e production\n</code></pre>\n\n<p>OR if you don't want to always run the server in prod mode, try doing this in your <code>ApplicationController</code>:</p>\n\n<pre><code>rescue_from ActiveRecord::RecordNotFound, :with =&gt; :rescue_404\nrescue_from ActionController::RoutingError, :with =&gt; :rescue_404\n\ndef rescue_404\n  #custom behavior\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "is_accepted": false, "score": 0, "last_activity_date": 1546228084, "creation_date": 1546228084, "answer_id": 53983411, "question_id": 53980726, "link": "https://stackoverflow.com/questions/53980726/how-to-make-404-page-ruby/53983411#53983411", "title": "How to make 404 page ruby?", "body": "<p>You can this very easily such as follow the steps</p>\n\n<p>Step 1: run this below command</p>\n\n<pre><code>rails generate controller errors not_found\n</code></pre>\n\n<p>Step 2: open &amp; modify this controller such as below</p>\n\n<pre><code>class ErrorsController &lt; ApplicationController\n    def not_found\n        render(:status =&gt; 404)\n    end\nend\n</code></pre>\n\n<p>Step 3: update the routes such as below</p>\n\n<pre><code>match \"/404\", to: \"errors#not_found\", via: :all\n</code></pre>\n\n<p>Step 4: update the configuration file which is <code>application.rb</code></p>\n\n<pre><code>config.exceptions_app = self.routes\n</code></pre>\n\n<p>Step 5: Remove default template from the public folder like 404.html</p>\n\n<p>And Restart your server then test <code>localhost:3000/404</code> it will automatically work on <code>production</code> server</p>\n\n<p>for details, you can see <a href=\"https://techsolutionshere.com/generate-dynamic-error-page-rails/\" rel=\"nofollow noreferrer\">this blog post</a> </p>\n"}], "owner": {"reputation": 45, "user_id": 10840729, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YvZ-ZENdYLc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbu3HH78kkPEbx5PGCktp9p5VuVQg/mo/photo.jpg?sz=128", "display_name": "Artem", "link": "https://stackoverflow.com/users/10840729/artem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 53982542, "answer_count": 2, "score": -1, "last_activity_date": 1546248815, "creation_date": 1546197951, "last_edit_date": 1546248815, "question_id": 53980726, "link": "https://stackoverflow.com/questions/53980726/how-to-make-404-page-ruby", "title": "How to make 404 page ruby?", "body": "<p>When i try go to site.ru/gdfgsdf page, it says:</p>\n\n<pre><code>Routing Error\nNo route matches [GET] \"/gfdg\"\nRails.root: /site.ru\n\nApplication Trace | Framework Trace | Full Trace\nRoutes\nRoutes match in priority from top to bottom\n</code></pre>\n\n<p>But, when i try go to site.ru/404 page, it says my work 404 page.</p>\n\n<p>How to make a 404 page for everyone, if it is not registered in routs?</p>\n"}, {"tags": ["ruby", "terminal", "display", "puts"], "comments": [{"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 4, "creation_date": 1546194430, "post_id": 53980259, "comment_id": 94797772, "body": "Is your actual program <code>print &quot;Hello world&quot;</code> rather than <code>puts &quot;Hello world</code>?"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1546194929, "post_id": 53980259, "comment_id": 94797887, "body": "@mikej I don&#39;t follow. How would that cause the output?"}, {"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 4, "creation_date": 1546195074, "post_id": 53980259, "comment_id": 94797925, "body": "@SagarPandya The trailing <code>%</code> could be printed by zsh rather than by Ruby. By default zsh prints a <code>%</code> when the last line of output doesn&#39;t have a newline (which is the case when using <code>print</code> vs <code>puts</code>.)"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546199237, "post_id": 53980259, "comment_id": 94798987, "body": "<a href=\"https://unix.stackexchange.com/q/167582/218427\">Detailed explanation here</a>."}], "owner": {"reputation": 11, "user_id": 6025445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/082f977084a96f6df10bd3186e1e8ada?s=128&d=identicon&r=PG&f=1", "display_name": "stephane stadler", "link": "https://stackoverflow.com/users/6025445/stephane-stadler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1546194138, "creation_date": 1546194138, "question_id": 53980259, "link": "https://stackoverflow.com/questions/53980259/ruby-program-not-displaying-properly-in-terminal", "title": "Ruby program not displaying properly in terminal", "body": "<p>I am writing very basic Ruby programs to learn. I wrote the following:</p>\n\n<pre><code>puts \"Hello world\"\n</code></pre>\n\n<p>When I run this program in my terminal this happens:</p>\n\n<pre><code>Hello world%\n</code></pre>\n\n<p>Why there is a <code>%</code> at the end ? That's never happens before during my practise.</p>\n"}, {"tags": ["ruby", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 223, "user_id": 2995249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fd9b0da8ec85dfa613a0f327693289b?s=128&d=identicon&r=PG&f=1", "display_name": "dragonfly", "link": "https://stackoverflow.com/users/2995249/dragonfly"}, "edited": false, "score": 2, "creation_date": 1546201221, "post_id": 53980347, "comment_id": 94799471, "body": "Thanks for the reply. I just tried and it returned nothing. How do I know if it works?"}], "tags": [], "owner": {"reputation": 422, "user_id": 3687472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LrXbE.png?s=128&g=1", "display_name": "Palsri", "link": "https://stackoverflow.com/users/3687472/palsri"}, "is_accepted": false, "score": 6, "last_activity_date": 1546194879, "creation_date": 1546194879, "answer_id": 53980347, "question_id": 53979362, "link": "https://stackoverflow.com/questions/53979362/you-dont-have-path-in-your-path-gem-executables-will-not-run-while-using/53980347#53980347", "title": "&quot;You don&#39;t have [PATH ]in your PATH, gem executables will not run.&quot; while using &quot;gem install --user-install bundler&quot;", "body": "<p>You need to add the directory to your PATH environment variable</p>\n\n<p><a href=\"https://askubuntu.com/questions/406643/warning-you-dont-have-a-directory-in-your-path-gem-executables-will-not-run\">https://askubuntu.com/questions/406643/warning-you-dont-have-a-directory-in-your-path-gem-executables-will-not-run</a></p>\n"}, {"comments": [{"owner": {"reputation": 223, "user_id": 2995249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fd9b0da8ec85dfa613a0f327693289b?s=128&d=identicon&r=PG&f=1", "display_name": "dragonfly", "link": "https://stackoverflow.com/users/2995249/dragonfly"}, "edited": false, "score": 0, "creation_date": 1546234759, "post_id": 53983964, "comment_id": 94805246, "body": "I personally do not recommend to install under homebrew (even tho it&#39;s seducing to manage everything under one thing) because I was failed to make it work and I found some posts they also not to recommend and better go through the original way."}], "tags": [], "owner": {"reputation": 223, "user_id": 2995249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fd9b0da8ec85dfa613a0f327693289b?s=128&d=identicon&r=PG&f=1", "display_name": "dragonfly", "link": "https://stackoverflow.com/users/2995249/dragonfly"}, "is_accepted": false, "score": 1, "last_activity_date": 1546234640, "creation_date": 1546234640, "answer_id": 53983964, "question_id": 53979362, "link": "https://stackoverflow.com/questions/53979362/you-dont-have-path-in-your-path-gem-executables-will-not-run-while-using/53983964#53983964", "title": "&quot;You don&#39;t have [PATH ]in your PATH, gem executables will not run.&quot; while using &quot;gem install --user-install bundler&quot;", "body": "<p>Probably a bit odd to answer my own question but I did finally fix it somehow like a blind fly. I hope to write down the experience maybe who else is totally like me as a absolute beginner with everything wouldn't get struggling overnight.</p>\n\n<p>Stage 1: from gem to homebrew (failed)</p>\n\n<p>At the beginning, I did remove items that install in gem item-by-item, then I install brew-gem to do it. At some stage, it work for jekyll but not my theme. It kept popping out I didn't install a package that the theme needs even I installed it manually. So in the end, I remove everything related to jekyll from homebrew.</p>\n\n<p>Stage 2: back to gem (very long path but finally made it)</p>\n\n<p>I later found a <a href=\"https://gist.github.com/r-brown/a0b50d56cfb3596e0d17\" rel=\"nofollow noreferrer\">page</a> tell step-by-step to install jekyll. I am using OSX 10.13 (High Sierra) that cause me the permission problem. So I just granted access with this line:</p>\n\n<pre><code>sudo chown -R $(whoami) /usr/local/*\n</code></pre>\n\n<p>The * is a must or it won't work. I did the same to the ruby part</p>\n\n<pre><code>sudo chown -R $(whoami) /Library/Ruby/Gems/2.3.0/*\n</code></pre>\n\n<p>After that I install jekyll and bundler carefully following the instruction. And install the packages that the theme needs manually through <code>gem install</code>, which you can find at the Gemfile. I got the problem of jekyll-sitemap similar as <a href=\"https://github.com/jekyll/jekyll/issues/4972\" rel=\"nofollow noreferrer\">this</a>, I followed the method to install pygment.rb through <code>gem install pygments.rb</code>. And now my site is locally work.</p>\n"}, {"tags": [], "owner": {"reputation": 2366, "user_id": 5492956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wJ9fq.jpg?s=128&g=1", "display_name": "Benjamin Wen", "link": "https://stackoverflow.com/users/5492956/benjamin-wen"}, "is_accepted": false, "score": 2, "last_activity_date": 1614134109, "creation_date": 1614134109, "answer_id": 66343887, "question_id": 53979362, "link": "https://stackoverflow.com/questions/53979362/you-dont-have-path-in-your-path-gem-executables-will-not-run-while-using/66343887#66343887", "title": "&quot;You don&#39;t have [PATH ]in your PATH, gem executables will not run.&quot; while using &quot;gem install --user-install bundler&quot;", "body": "<p>If you are on a Mac like me, you need to add the <code>PATH</code> to the <code>PATH</code> environmental variable. You can do it with <code>export</code> command:</p>\n<pre><code>export PATH=&quot;/Users/Carrot/.gem/ruby/2.3.0/bin:$PATH&quot;\n</code></pre>\n<p>If you wanna know more about this process, here is a blog post about this: <a href=\"https://www.baeldung.com/linux/path-variable#:%7E:text=The%20PATH%20variable%20is%20an%20environment%20variable%20that,%2Fbin%2Fecho%20so%20long%20as%20%2Fbin%20is%20in%20PATH%3A\" rel=\"nofollow noreferrer\">Adding a Path to the Linux PATH Variable</a></p>\n"}], "owner": {"reputation": 223, "user_id": 2995249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fd9b0da8ec85dfa613a0f327693289b?s=128&d=identicon&r=PG&f=1", "display_name": "dragonfly", "link": "https://stackoverflow.com/users/2995249/dragonfly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19790, "favorite_count": 0, "answer_count": 3, "score": 11, "last_activity_date": 1614134109, "creation_date": 1546187235, "question_id": 53979362, "link": "https://stackoverflow.com/questions/53979362/you-dont-have-path-in-your-path-gem-executables-will-not-run-while-using", "title": "&quot;You don&#39;t have [PATH ]in your PATH, gem executables will not run.&quot; while using &quot;gem install --user-install bundler&quot;", "body": "<p>I was trying to install jekyll in my Mac and got the warning as following:</p>\n\n<blockquote>\n  <p>WARNING:  You don't have /Users/Carrot/.gem/ruby/2.3.0/bin in\n  your PATH, gem executables will not run.</p>\n</blockquote>\n\n<p>I checked through gem list and it shows it is installed; and I can find the jekyll through the path \"/Users/Carrot/.gem/ruby/2.3.0/bin\". I read a <a href=\"https://stackoverflow.com/questions/13886835/just-installed-sass-on-osx-what-is-this-warning-you-dont-have-users-orio\">post</a> which seems like my situation. I would like to know if it's a must to go through <code>sudo</code>? I now prefer to uninstall everything (since it also installed sass and bunch of things at the same time) and go through homebrew. How can I do the uninstallation?</p>\n\n<p>Many thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "capybara"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 1, "creation_date": 1546190630, "post_id": 53978413, "comment_id": 94796869, "body": "Show the actual HTML the erb template produces instead of the erb template"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10358924"}, "edited": false, "score": 1, "creation_date": 1546219445, "post_id": 53982043, "comment_id": 94803033, "body": "I change <code>attach_file &quot;post[picture]&quot;, &quot;#{Rails.root}&#47;spec&#47;files&#47;attachment.jpg&quot;</code>and was able to solve the problem. Thank you so much!"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1546209920, "creation_date": 1546209920, "answer_id": 53982043, "question_id": 53978413, "link": "https://stackoverflow.com/questions/53978413/i-want-to-do-image-upload-testfeature-spec/53982043#53982043", "title": "I want to do Image upload test(feature spec)", "body": "<p><code>attach_file</code> locates the file input element by it's id, name, or associated label text, so <code>picture</code> obviously doesn't match any of those.  Without the actual HTML produced by your <code>erb</code> template it's impossible to tell exactly what the attributes for your input are, but taking a guess based on your route names you probably want something like one of the following</p>\n\n<pre><code>attach_file 'post_picture', \"#{Rails.root}/spec/files/attachment.jpg\" # match id of the file input\nattach_file \"post[picture]\", \"#{Rails.root}/spec/files/attachment.jpg\" # match name of the file input\nattach_file \"Picture\", \"#{Rails.root}/spec/files/attachment.jpg\" # match associated label text\n</code></pre>\n\n<p>The other potential issue you may be dealing with is CSS styling of your file input. If your file input is actually styled to be non-visible and then replaced with some sort of button or image, to make it look nicer, then you will want to use the <code>make_visible</code> option which can be passed to <code>attach_file</code>. That will temporarily adjust the CSS to make the input visible - attach the file - and then reset the CSS to original state. Something like</p>\n\n<pre><code>attach_file 'post_picture', \"#{Rails.root}/spec/files/attachment.jpg\", make_visible: true\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10358924"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 53982043, "answer_count": 1, "score": 1, "last_activity_date": 1588086211, "creation_date": 1546179898, "last_edit_date": 1588086211, "question_id": 53978413, "link": "https://stackoverflow.com/questions/53978413/i-want-to-do-image-upload-testfeature-spec", "title": "I want to do Image upload test(feature spec)", "body": "<p>I want to test Image uploader.</p>\n\n<p>My error is</p>\n\n<pre><code>Failure/Error: attach_file \"picture\", \"#{Rails.root}/spec/files/attachment.jpg\"\n\n     Capybara::ElementNotFound:\n       Unable to find visible file field \"picture\" that is not disabled\n</code></pre>\n\n<p>My code is\n(features/posts_spec.rb)</p>\n\n<pre><code>scenario \"Access posting screen and post\" do\n\u3000\u3000 sign_in user\n    visit new_post_path\n    expect(page).to have_current_path(new_post_path)\n    fill_in \"share impression\", with: \"hogehoge\"\n    attach_file \"picture\", \"#{Rails.root}/spec/files/attachment.jpg\"\n    click_on \"post\"\n    expect(page).to have_current_path(posts_path)\n  end\n</code></pre>\n\n<p>(posts/new.html.erb)</p>\n\n<pre><code> &lt;%= form_with(model: post, local: true) do |f| %&gt;\n   &lt;div class=\"mb-3\"&gt;\n    &lt;%= f.label :picture %&gt;\n    &lt;%= f.file_field :picture %&gt;\n   &lt;/div&gt;\n &lt;% end %&gt;\n</code></pre>\n\n<p>Update: (posts/new.html)</p>\n\n<pre><code> &lt;form action=\"/posts\" method=\"post\"&gt;\n   &lt;input type=\"hidden\" ... /&gt;\n   &lt;div class=\"mb-3\"&gt;\n     &lt;label for=\"post_picture\"&gt;Picture&lt;/label&gt;\n     &lt;input type=\"file\" name=\"post[picture]\" id=\"post_picture\" /&gt;\n   &lt;/div&gt;\n &lt;/form&gt;\n</code></pre>\n\n<p>I was able to match on the name of <code>post[picture]</code> (see answer below) but equally the other suggestions of text of \"Picture\" and id of <code>post_picture</code> worked.</p>\n"}, {"tags": ["ruby", "http-headers", "net-http"], "comments": [{"owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "edited": false, "score": 1, "creation_date": 1546182009, "post_id": 53978308, "comment_id": 94794724, "body": "Use <code>HEAD</code> instead of <code>GET</code> if you don&#39;t care about the body."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "edited": false, "score": 0, "creation_date": 1546182230, "post_id": 53978308, "comment_id": 94794764, "body": "<code>GET</code> is supposed to get the whole resource from the server, I am unsure why you expected it to perform several requests to load this, than that, etc. As @MarcinKo\u0142odziej says, to get the header people in the internets use <code>HEAD</code> requests explicitly designed for this purpose."}], "answers": [{"comments": [{"owner": {"reputation": 32008, "user_id": 322020, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dce43cb8158a14c3fed02bea797becd7?s=128&d=identicon&r=PG", "display_name": "Nakilon", "link": "https://stackoverflow.com/users/322020/nakilon"}, "edited": false, "score": 0, "creation_date": 1546187696, "post_id": 53978795, "comment_id": 94796152, "body": "Thank you. I&#39;ll accept the answer once I manage this to work."}, {"owner": {"reputation": 32008, "user_id": 322020, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dce43cb8158a14c3fed02bea797becd7?s=128&d=identicon&r=PG", "display_name": "Nakilon", "link": "https://stackoverflow.com/users/322020/nakilon"}, "edited": false, "score": 0, "creation_date": 1548022622, "post_id": 53978795, "comment_id": 95384804, "body": "Unfortunately a lot of web services do not support HEAD. And not all of them respond 405 to show this specific error."}], "tags": [], "owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "is_accepted": true, "score": 0, "last_activity_date": 1546183011, "creation_date": 1546183011, "answer_id": 53978795, "question_id": 53978308, "link": "https://stackoverflow.com/questions/53978308/how-do-i-read-the-header-without-reading-the-rest-of-the-http-resource/53978795#53978795", "title": "How do I read the header without reading the rest of the HTTP resource?", "body": "<p>Depending on what you actually want to accomplish:</p>\n\n<h2>Don't care about the body at all:</h2>\n\n<p>Use <code>HEAD</code> instead of <code>GET</code>:</p>\n\n<pre><code>uri = URI('http://example.com')\nhttp = Net::HTTP.start uri.host, uri.port \nrequest = Net::HTTP::Head.new uri\nresponse = http.request request\nresponse.body\n# =&gt; nil\n</code></pre>\n\n<h2>Load the body conditionally</h2>\n\n<p>Using blocks with <code>net/http</code> will let you hook before the body is actually loaded:</p>\n\n<pre><code>uri = URI('http://example.com')\nres = nil\n\nNet::HTTP.start(uri.host, uri.port) do |http|\n  request = Net::HTTP::Get.new uri\n\n  http.request request do |response|\n    res = response\n    break\n  end\nend\n\nres\n# =&gt; #&lt;Net::HTTPOK 200 OK readbody=false&gt; \nres['Content-Type']\n# =&gt; \"text/html; charset=UTF-8\"\n</code></pre>\n"}], "owner": {"reputation": 32008, "user_id": 322020, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dce43cb8158a14c3fed02bea797becd7?s=128&d=identicon&r=PG", "display_name": "Nakilon", "link": "https://stackoverflow.com/users/322020/nakilon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 53978795, "answer_count": 1, "score": 0, "last_activity_date": 1546183011, "creation_date": 1546179109, "question_id": 53978308, "link": "https://stackoverflow.com/questions/53978308/how-do-i-read-the-header-without-reading-the-rest-of-the-http-resource", "title": "How do I read the header without reading the rest of the HTTP resource?", "body": "<p>I was sure that when I do like this:</p>\n\n<pre><code>http = Net::HTTP.start uri.host, uri.port\nrequest = Net::HTTP::Get.new uri\nresponse = http.request request\n</code></pre>\n\n<p>I get some sort of established connection to the remote HTTP resource to be able to tell, for example, its Content-Type, while to really load the whole resource I then call the <code>response.body</code>.</p>\n\n<p>But either I was always wrong or it is something with the server I access right now, the <code>http.request</code> loads the whole remote file that is unacceptable for me:</p>\n\n<pre><code>[Net::HTTP debug] opening connection to v.redd.it:80...  \n[Net::HTTP debug] opened  \n[Net::HTTP debug] &lt;- \"GET /6otzwem1c7721/DASH_9_6_M?source=fallback HTTP/1.1\\r\\nAccept-Encoding: gzip;q=1.0,deflate;q=0.6,identity;q=0.3\\r\\nAccept: */*\\r\\nUser-Agent: Ruby\\r\\nHost: v.redd.it\\r\\nConnection: close\\r\\n\\r\\n\"  \n[Net::HTTP debug] -&gt; \"HTTP/1.1 200 OK\\r\\n\"  \n[Net::HTTP debug] -&gt; \"Last-Modified: Sat, 29 Dec 2018 11:25:57 GMT\\r\\n\"  \n[Net::HTTP debug] -&gt; \"ETag: \\\"662291aec20b252aaebcf54c3b1827af-42\\\"\\r\\n\"  \n[Net::HTTP debug] -&gt; \"Content-Type: video/mp4\\r\\n\"  \n[Net::HTTP debug] -&gt; \"Cache-Control: public, max-age=604800, s-maxage=86400, must-revalidate\\r\\n\"  \n[Net::HTTP debug] -&gt; \"Accept-Ranges: bytes\\r\\n\"  \n[Net::HTTP debug] -&gt; \"Content-Length: 218756120\\r\\n\"  \n[Net::HTTP debug] -&gt; \"Accept-Ranges: bytes\\r\\n\"  \n[Net::HTTP debug] -&gt; \"Date: Sun, 30 Dec 2018 13:44:21 GMT\\r\\n\"  \n[Net::HTTP debug] -&gt; \"Via: 1.1 varnish\\r\\n\"  \n[Net::HTTP debug] -&gt; \"Connection: close\\r\\n\"  \n[Net::HTTP debug] -&gt; \"X-Served-By: cache-fra19120-FRA\\r\\n\"  \n[Net::HTTP debug] -&gt; \"X-Cache: HIT\\r\\n\"  \n[Net::HTTP debug] -&gt; \"X-Cache-Hits: 0\\r\\n\"  \n[Net::HTTP debug] -&gt; \"X-Timer: S1546177461.284280,VS0,VE0\\r\\n\"  \n[Net::HTTP debug] -&gt; \"Server: snooserv\\r\\n\"  \n[Net::HTTP debug] -&gt; \"Vary: Origin\\r\\n\"  \n[Net::HTTP debug] -&gt; \"\\r\\n\"  \n[Net::HTTP debug] reading 218756120 bytes... \n</code></pre>\n\n<p>I went inside with byebug until found where it happens:</p>\n\n<pre><code>[159, 168] in /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/net/http/response.rb\n   159:   def reading_body(sock, reqmethodallowbody)  #:nodoc: internal use only\n   160:     @socket = sock\n   161:     @body_exist = reqmethodallowbody &amp;&amp; self.class.body_permitted?\n   162:     begin\n   163:       yield\n=&gt; 164:       self.body   # ensure to read body\n   165:     ensure\n   166:       @socket = nil\n   167:     end\n   168:   end\n(byebug) where\n--&gt; #0  Net::HTTPResponse.reading_body(sock#Net::BufferedIO, reqmethodallowbody#TrueClass) at /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/net/http/response.rb:164\n    #1  Net::HTTP.transport_request(req#Net::HTTP::Get) at /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/net/http.rb:1445\n    #2  Net::HTTP.request(req#Net::HTTP::Get, body#NilClass, &amp;block#NilClass) at /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/net/http.rb:1407\n    #3  block in Net::HTTP.block in request(req#Net::HTTP::Get, body#NilClass, &amp;block#NilClass) at /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/net/http.rb:1400\n    #4  Net::HTTP.start at /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/net/http.rb:853\n    #5  Net::HTTP.request(req#Net::HTTP::Get, body#NilClass, &amp;block#NilClass) at /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/net/http.rb:1398\n</code></pre>\n\n<p>Is it server's fault? Ruby fault? Or should I use some another method if I want to get the header data without loading the whole resource?</p>\n\n<p>P.S.: I do not need third-party fancy dependency, I need to use only the <code>Net::HTTP</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "capybara"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1546174448, "post_id": 53977672, "comment_id": 94793016, "body": "I&#39;d guess it&#39;s looking for a <code>icon_red_heart</code> element with the class <code>png</code>. You don&#39;t need to click the image, you need to click <i>the button</i>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10358924"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1546175700, "post_id": 53977672, "comment_id": 94793270, "body": "Thank you.How do I change it?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10358924"}, "edited": false, "score": 0, "creation_date": 1546176354, "post_id": 53977912, "comment_id": 94793408, "body": "Thank you for teaching me.but An error occurred.  <code>Unable to find visible css &quot;#image-button&quot;</code>"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1546178910, "post_id": 53977912, "comment_id": 94794011, "body": "Good. Is the test passing now?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10358924"}, "edited": false, "score": 0, "creation_date": 1546179321, "post_id": 53977912, "comment_id": 94794120, "body": "No,error occurred.<code>Unable to find visible css &quot;#image-button&quot;</code>"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1546179401, "post_id": 53977912, "comment_id": 94794145, "body": "Try changing to <code>find(&#39;#image-button&#39;, visible: false).click</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10358924"}, "edited": false, "score": 0, "creation_date": 1546179817, "post_id": 53977912, "comment_id": 94794238, "body": "sorry,my error is changed.<code>LikesController#create is missing a template for this request format and variant.         request.formats: [&quot;text&#47;html&quot;]        request.variant: []</code>"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1546179880, "post_id": 53977912, "comment_id": 94794256, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/185938/discussion-between-moveson-and-kodai\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 1, "last_activity_date": 1546180059, "last_edit_date": 1546180059, "creation_date": 1546175719, "answer_id": 53977912, "question_id": 53977672, "link": "https://stackoverflow.com/questions/53977672/rspec-capybara-cant-find-link-to-image/53977912#53977912", "title": "RSpec/Capybara can&#39;t find link to image", "body": "<p>As @jonrsharpe indicated, you are not referencing the button properly. The most resilient way to reference an element is to give it an id and reference it by that id. </p>\n\n<p>Also, the button created by <code>button_to</code> may have no content, in which case you'll need to tell Capybara that the button is not visible.</p>\n\n<p>Change the <code>button_to</code> line to this:</p>\n\n<pre><code>&lt;%= button_to post_like_path(post, like), id: \"image-button\", remote: true do %&gt;\n</code></pre>\n\n<p>Then change your test to read as follows:</p>\n\n<pre><code>scenario \"push an image\" do\n  visit posts_path # Use the name of your path here\n  find('#image-button', visible: false).click\nend\n</code></pre>\n\n<p>Incidentally, using <code>method: :delete</code> in your <code>button_to</code> link doesn't do what you would expect. The method is automatically set to <code>POST</code>, which is presumably what you want. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10358924"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 53977912, "answer_count": 1, "score": 0, "last_activity_date": 1546186510, "creation_date": 1546173657, "last_edit_date": 1546186510, "question_id": 53977672, "link": "https://stackoverflow.com/questions/53977672/rspec-capybara-cant-find-link-to-image", "title": "RSpec/Capybara can&#39;t find link to image", "body": "<p>I want to use RSpec and Capybara to simulate clicking on an image, but I cannot do it.</p>\n\n<p>My error is this:</p>\n\n<pre><code>Failure/Error: click_on \"icon_red_heart.png\"\n\n     Capybara::ElementNotFound:\n       Unable to find visible css \"#image-button\"\n</code></pre>\n\n<p>spec/features/posts_spec.rb</p>\n\n<pre><code>scenario \"push an image\" do  \n  visit posts_path\n  expect(page).to have_current_path(posts_path)\n  find('#image-button').click\nend\n</code></pre>\n\n<p>likes/_likes.html.erb</p>\n\n<pre><code>   &lt;%= button_to post_like_path(post, like), id: \"image-button\",method: :delete, remote: true do %&gt;\n\n      &lt;%= image_tag(\"icon_red_heart.png\")%&gt;\n</code></pre>\n\n<p>I don't know how to how to specify the image.</p>\n\n<p>Please teach me.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1546175573, "post_id": 53977338, "comment_id": 94793237, "body": "I&#39;m not clear... if you have two &quot;Ultrasonic Probes&quot; and only one is &quot;multiple&quot; do you want the Plus icon to appear next to the whole selector, or just next to the specific drop down entry that has &quot;multiple&quot;?"}, {"owner": {"reputation": 2323, "user_id": 5012862, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10153310796509376/picture?type=large", "display_name": "mayorsanmayor", "link": "https://stackoverflow.com/users/5012862/mayorsanmayor"}, "reply_to_user": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1546175803, "post_id": 53977338, "comment_id": 94793300, "body": "Yes, I have 2 &quot;Ultrasonic Probes&quot; and 2 &quot;Ultrasonic Instruments&quot; that both have Multiple and Single equipment_amount, but I only want the plus icon to appear next to Ultrasonic Probes, that has Multiple equipment_amount and Ultrasonic Instruments that have multiple equipment_amount."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1546176296, "post_id": 53977338, "comment_id": 94793395, "body": "So the plus icon before the drop down should only appear if an item with &quot;Multiple&quot; is selected? If you change the selection to an item of type &quot;Single&quot; the plus should disappear? What happens when you click the plus icon? Is another select element created that only contains items in the same group that have &quot;Multiple&quot;? What should happen when an item with &quot;Multiple&quot; is selected, the plus icon is clicked and then the value is changed back to one that has &quot;Single&quot;?"}, {"owner": {"reputation": 2323, "user_id": 5012862, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10153310796509376/picture?type=large", "display_name": "mayorsanmayor", "link": "https://stackoverflow.com/users/5012862/mayorsanmayor"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1546176810, "post_id": 53977338, "comment_id": 94793493, "body": "Thanks, @JohanWentholt very good questions, yes, the plus should only appear when an item with Multiple is selected. If the selected item is changed from an item with a type of Multiple to a type of Single the plus icon should disappear. When the Plus Icon is clicked, an item is created and inserted into a join table between the current model &quot;Report&quot; and the &quot;Equipment&quot; table. After Plus icon is clicked the field should go back to the default value &quot;Ultrasonic Probe List&quot; for example."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1546176888, "post_id": 53977338, "comment_id": 94793508, "body": "I personally think there might be something wrong with the design. You might want to give the groups their own model/table, since this seems like an attribute that should be set on the group instead. Alternatively (while still using a group model) you might want to specify a certain amount of inventory slots a group has. Each selectable item takes up <i>X</i> amount of slots. Then set up a validation to make sure that the sum of inventory slots of the selected items take op less or equal the amount of inventory slots a the group has."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1546177435, "post_id": 53977338, "comment_id": 94793632, "body": "I&#39;ve got one last follow-up question. So assume you&#39;ve selected an item that is of type &quot;Multiple&quot;. You clicked the plus icon and it&#39;s added to the table. Should the select element still contain the values with type &quot;Single&quot;, or should they be removed from the selectable values? Since I assume you can&#39;t select an item of type &quot;Single&quot; if there is already an item added to the table. Along the same lines, should those options (with type &quot;Single&quot;) return into the selectable elements if the last element is deleted from the table?"}, {"owner": {"reputation": 2323, "user_id": 5012862, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10153310796509376/picture?type=large", "display_name": "mayorsanmayor", "link": "https://stackoverflow.com/users/5012862/mayorsanmayor"}, "edited": false, "score": 0, "creation_date": 1546177479, "post_id": 53977338, "comment_id": 94793644, "body": "So I clarified with the client, he said an Equipment should not have Multiple and Single values at the same time, I have edited my question above to reflect this, so basically, only one item has Multiple and only that should have the plus icon next to it.  My only issue here is, how do i loop through the value to check if an equipment_amount is multiple or single? I plan to use ajax to Add the item to the join table and list them beneath according to the design, that&#39;s actually the mockup that was sent to me."}, {"owner": {"reputation": 2323, "user_id": 5012862, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10153310796509376/picture?type=large", "display_name": "mayorsanmayor", "link": "https://stackoverflow.com/users/5012862/mayorsanmayor"}, "edited": false, "score": 0, "creation_date": 1546177789, "post_id": 53977338, "comment_id": 94793717, "body": "There was nothing wrong with the design, I basically misunderstood it and your questions forced me to clarify that. Thanks. Since the items are grouped by equipment name, if an item has multiple equipment amount with the plus icon, it means that it could be added multiple times to the table. Check the design for the table with title &quot;Ultrasonic Probes added to report&quot; that&#39;s where the items will be added when plus icon is clicked."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1546177865, "post_id": 53977338, "comment_id": 94793734, "body": "The looping is simple. First you have to realize that the value is an array, so not really a value, but rather values. You can loop through them with any of the <a href=\"https://ruby-doc.org/core-2.6/Array.html\" rel=\"nofollow noreferrer\"><i>Array</i></a> and <a href=\"https://ruby-doc.org/core-2.6/Enumerable.html\" rel=\"nofollow noreferrer\"><i>Enumerable</i></a> methods. For example: <code>values.each { |value| ... }</code>, or <code>singles, multiples = values.partition { |value| value.equipment_amount == &#39;Single&#39; }</code>."}, {"owner": {"reputation": 2323, "user_id": 5012862, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10153310796509376/picture?type=large", "display_name": "mayorsanmayor", "link": "https://stackoverflow.com/users/5012862/mayorsanmayor"}, "edited": false, "score": 0, "creation_date": 1546177962, "post_id": 53977338, "comment_id": 94793762, "body": "Thanks but what is the meaning of partition?"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1546178081, "post_id": 53977338, "comment_id": 94793797, "body": "Splitting up the collection into two groups. Values for which the block returns a truethy value, and values for which the block returns a falsey value. Have a look at the documentation: <a href=\"https://ruby-doc.org/core-2.6/Enumerable.html#method-i-partition\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.6/Enumerable.html#method-i-partition</a>"}, {"owner": {"reputation": 2323, "user_id": 5012862, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10153310796509376/picture?type=large", "display_name": "mayorsanmayor", "link": "https://stackoverflow.com/users/5012862/mayorsanmayor"}, "edited": false, "score": 0, "creation_date": 1546178168, "post_id": 53977338, "comment_id": 94793829, "body": "did it like this and it worked. I&#39;ll update the question. But I wish to explore partition further, thanks."}, {"owner": {"reputation": 2323, "user_id": 5012862, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10153310796509376/picture?type=large", "display_name": "mayorsanmayor", "link": "https://stackoverflow.com/users/5012862/mayorsanmayor"}, "edited": false, "score": 0, "creation_date": 1546178409, "post_id": 53977338, "comment_id": 94793885, "body": "I was actually trying to avoid having to loop twice, I thought there might be a better solution, looping twice is what we ended up doing. At least it works now, exactly like in the design. Next is to create the join tables and use ajax to create the multiple and insert in the table below"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1546178431, "post_id": 53977338, "comment_id": 94793888, "body": "You also might want to consider using <a href=\"https://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_from_collection_for_select\" rel=\"nofollow noreferrer\"><code>options_from_collection_for_select</code></a> instead of <a href=\"https://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select\" rel=\"nofollow noreferrer\"><code>options_for_select</code></a>. <code>options_from_collection_for_select</code> allows you to select a method that is used for the display name, and a method that is used for the value. Making it more readable than <code>#&lt;SomeObject with_some_attributes: &quot;and values&quot;&gt;</code>."}, {"owner": {"reputation": 2323, "user_id": 5012862, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10153310796509376/picture?type=large", "display_name": "mayorsanmayor", "link": "https://stackoverflow.com/users/5012862/mayorsanmayor"}, "edited": false, "score": 0, "creation_date": 1546178701, "post_id": 53977338, "comment_id": 94793957, "body": "Thank you so much. I actually changed to using f.collection_select, the f as in form is fake because this value does not get inserted into the current model of the form, so I know it&#39;s not gonna work by the time I&#39;m done. I&#39;ll take a look at <code>options_from_collection_for_select</code> as well. Thanks for your time. I might still come back with questions once I starting working on the join table."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1546178874, "post_id": 53977338, "comment_id": 94794005, "body": "You can&#39;t avoid looping twice, since you first time you loop through the groups and the second time you loop through the values of the group. Those are two different things so you have to do it that way. It is possible to do it in one single loop, but it involves not grouping them in the first place. Instead separate them out using if statements or cases. However this will clutter up your code like crazy so I don&#39;t recommend it. Might you have any other issues consider creating a new question instead. Try to isolate out the issue you&#39;re having and describe what you expect the code to do."}, {"owner": {"reputation": 2323, "user_id": 5012862, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10153310796509376/picture?type=large", "display_name": "mayorsanmayor", "link": "https://stackoverflow.com/users/5012862/mayorsanmayor"}, "edited": false, "score": 0, "creation_date": 1546178993, "post_id": 53977338, "comment_id": 94794037, "body": "You are right. That clarifies everything. I will create a new question if necessary and send a link here. Thanks. Please, drop your comment above as the answer with loop code so I can accept it."}, {"owner": {"reputation": 2323, "user_id": 5012862, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10153310796509376/picture?type=large", "display_name": "mayorsanmayor", "link": "https://stackoverflow.com/users/5012862/mayorsanmayor"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1546182868, "post_id": 53977338, "comment_id": 94794902, "body": "Thank you @JohanWentholt \ud83d\ude4f"}], "answers": [{"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": true, "score": 1, "last_activity_date": 1546182481, "creation_date": 1546182481, "answer_id": 53978730, "question_id": 53977338, "link": "https://stackoverflow.com/questions/53977338/how-do-i-loop-through-an-hash-in-a-ruby-array/53978730#53978730", "title": "How do I Loop through an Hash in a Ruby Array", "body": "<p>I personally found the question you're asking a bit unclear. For this reason I discussed some things in the comments with you. From our discussion in the comments it seemed you simply wanted to loop through the grouped values for each group.</p>\n\n<p>First I want to clear up what <a href=\"https://ruby-doc.org/core-2.6/Enumerable.html#method-i-group_by\" rel=\"nofollow noreferrer\"><code>group_by</code></a> exactly does, because this seemed to be the issue. A simple misunderstanding of what you're currently working on.</p>\n\n<blockquote>\n  <h3>group_by { |obj| block } \u2192 a_hash</h3>\n  \n  <h3>group_by \u2192 an_enumerator</h3>\n  \n  <p>Groups the collection by result of the block. Returns a hash where the keys are the evaluated result from the block and the values are arrays of elements in the collection that correspond to the key.</p>\n  \n  <p>If no block is given an enumerator is returned.</p>\n\n<pre><code>(1..6).group_by { |i| i%3 }   #=&gt; {0=&gt;[3, 6], 1=&gt;[1, 4], 2=&gt;[2, 5]}\n</code></pre>\n</blockquote>\n\n<p>The documentation makes clear that the grouped hash has keys that evaluate from the block (the return value). The value that belongs to the key is actually an list of values that evaluate to the same result. This means you can simply loop through the values in the following way.</p>\n\n<pre><code>grouped_values = (1..6).group_by { |n| n % 3 }\n\ngrouped_values.each do |key, values|\n  puts \"Key: #{key}\"\n\n  values.each do |value|\n    puts \"Value: #{value}\"\n  end\nend\n</code></pre>\n\n<p>The first <code>each</code> loops through the groups. The second <code>each</code> loops through the values of the group. Since you loop though two different things you can't change this into a single loop easily. The important thing to remember here that the value belonging to a group key is not a single value, but rather a group of values (array).</p>\n"}], "owner": {"reputation": 2323, "user_id": 5012862, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10153310796509376/picture?type=large", "display_name": "mayorsanmayor", "link": "https://stackoverflow.com/users/5012862/mayorsanmayor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 2, "accepted_answer_id": 53978730, "answer_count": 1, "score": 1, "last_activity_date": 1546183199, "creation_date": 1546170606, "last_edit_date": 1546183199, "question_id": 53977338, "link": "https://stackoverflow.com/questions/53977338/how-do-i-loop-through-an-hash-in-a-ruby-array", "title": "How do I Loop through an Hash in a Ruby Array", "body": "<p>I used <code>group_by</code> to get a certain desired result. Based on the explanation in the answer, I have updated my question to reflect the answer, to see the steps it took to arrive at a solution, see the edit history.</p>\n\n<pre><code>@grouped_test_specific_reports = TestSpecificReport.all.group_by(&amp;:equipment_type_name)\n</code></pre>\n\n<p>The code above produced this result:</p>\n\n<pre><code>    2.5.1 :026 &gt; pp @grouped_test_specific_reports\n{\"Ultrasonic Probes\"=&gt;\n  [#&lt;TestSpecificReport:0x00007f832aa2d6e0\n    id: 10,\n    equipment_type_id: 2,\n    test_method_id: 1,\n    equipment_amount: \"Multiple\",\n    equipment_heading: \"UT Probes\"&gt;],\n \"Ultrasonic Instruments\"=&gt;\n  [#&lt;TestSpecificReport:0x00007f832aa2d3c0\n    id: 8,\n    equipment_type_id: 1,\n    test_method_id: 1,\n    equipment_amount: \"Single\",\n    equipment_heading: \"UT Instrument\"&gt;],\n \"Visual Test Equipment\"=&gt;\n  [#&lt;TestSpecificReport:0x00007f832aa2cfb0\n    id: 11,\n    equipment_type_id: 4,\n    test_method_id: 1,\n    equipment_amount: \"Single\",\n    equipment_heading: \"VT Equipment\"&gt;]}\n =&gt; {\"Ultrasonic Probes\"=&gt;[#&lt;TestSpecificReport id: 10, equipment_type_id: 2, test_method_id: 1, equipment_amount: \"Multiple\", equipment_heading: \"UT Probes\"&gt;], \"Ultrasonic Instruments\"=&gt;[#&lt;TestSpecificReport id: 8, equipment_type_id: 1, test_method_id: 1, equipment_amount: \"Single\", equipment_heading: \"UT Instrument\"&gt;], \"Visual Test Equipment\"=&gt;[#&lt;TestSpecificReport id: 11, equipment_type_id: 4, test_method_id: 1, equipment_amount: \"Single\", equipment_heading: \"VT Equipment\"&gt;]} \n</code></pre>\n\n<p>My next goal is to list out the grouped test specific report in the browser by their keys, I was able to do that by <code>@grouped_test_specific_reports.each { |key, value| puts key }</code> </p>\n\n<ul>\n<li>\"Visual Test Equipment\"</li>\n<li>\"Ultrasonic Instruments\" and</li>\n<li>\"Ultrasonic Probes\"</li>\n</ul>\n\n<p>Now we have to iterate over the values, which happens to be an array, in another loop to be able to compare <code>equipment_amount</code>.</p>\n\n<p>The values with <code>equipment_amount: \"Multiple\"</code> will have the plus icon in front of them, and the ones with <code>equipment_amount: \"Single\"</code> will simply be a drop-down:</p>\n\n<p>Here's the code for the UI:</p>\n\n<pre><code>- @grouped_test_specific_reports.each do |equipment_type_name, test_specific_reports|\n  .form-group.row\n    .col-sm-6\n      %label\n        = equipment_type_name\n      = select_tag '', options_from_collection_for_select(test_specific_reports, :id, :equipment_heading), { include_blank: \"Select #{equipment_type_name} List\", class: 'form-control select2', style: 'width: 100%;' }\n    .col-sm-1\n      - test_specific_reports.each do |test_specific_report|\n        - if test_specific_report.equipment_amount == 'Multiple'\n          .icon.text-center\n            %i.fa.fa-plus-circle.add-icon\n</code></pre>\n"}, {"tags": ["ruby", "windows", "clipboard"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546211172, "post_id": 53977251, "comment_id": 94801739, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/53471428/how-to-get-the-temp-file-in-the-clipboard-in-ruby\">How to get the temp file in the clipboard in Ruby?</a>"}, {"owner": {"reputation": 85, "user_id": 8088049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45659d5bad51628e1ffcfacff971baf7?s=128&d=identicon&r=PG&f=1", "display_name": "Andrek", "link": "https://stackoverflow.com/users/8088049/andrek"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546247914, "post_id": 53977251, "comment_id": 94808410, "body": "i know that but i&#39;m looking for someone to do this in another way, something like Paint works, thank you."}], "owner": {"reputation": 85, "user_id": 8088049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45659d5bad51628e1ffcfacff971baf7?s=128&d=identicon&r=PG&f=1", "display_name": "Andrek", "link": "https://stackoverflow.com/users/8088049/andrek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 3, "answer_count": 0, "score": 1, "last_activity_date": 1546572724, "creation_date": 1546169576, "last_edit_date": 1546572724, "question_id": 53977251, "link": "https://stackoverflow.com/questions/53977251/how-to-get-a-image-from-the-clipboard-in-ruby", "title": "How to get a image from the clipboard in Ruby", "body": "<p>I'm trying to do this using 2 gems: <code>win32-clipboard</code> and <code>clipboard</code> but i can't do it.</p>\n\n<p><code>win32-clipboard</code>:</p>\n\n<pre><code>include Win32\n# I don't know what is this buffer, BM = BMP Images but the '??????' is the problem\nClipboard.data(Clipboard::DIB)[0..5000] # =&gt; BMB\u2192O     B   (   ?\u2663  ?\u2665  \u263a   \u2665    \u2192O                   ?  ??   ??? ??? ??? ??? ??? ??? ??? ??? ??? ??? ??? ??? ??? ??? ??? ??? ??? ??? ???...\nClipboard.data(Clipboard::BITMAP) #=&gt; FFI::NullPointerError\n</code></pre>\n\n<p><code>clipboard</code>:</p>\n\n<pre><code>Clipboard.paste # =&gt; \"\"\n</code></pre>\n\n<p>I would like to get the buffer of the image, a Gosu#Image or RMagick#Image.</p>\n\n<p>Thanks a lot!</p>\n\n<p><strong>Edit</strong>: Is there a way to get the buffer with C++ and load it in Ruby?</p>\n\n<p>I was doing good, <code>Clipboard.data(Clipboard::DIB)</code> return the buffer but without BMP Header and i don't know how to get width and height of the image, however i save the image and then load it with gosu gem(Gosu#Image) like that:</p>\n\n<pre><code>buffer = Win32::Clipboard.data(win32::Clipboard::DIB)\nFile.open(\"image.bmp\", \"wb\") do |file|\n  file.write(buffer)\nend\nimage = Gosu::Image.new(\"image.bmp\")\nimage.width # =&gt; 450\nimage.height # =&gt; 450\n</code></pre>\n\n<p>Problem solved, Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "caching", "heroku"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546154776, "post_id": 53975298, "comment_id": 94789421, "body": "I wonder if this is an <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">XY problem</a>. Can you explain more about how you came to be certain that you need to clear the cache?"}, {"owner": {"reputation": 803, "user_id": 3458162, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EtWor.jpg?s=128&g=1", "display_name": "Arye Eidelman", "link": "https://stackoverflow.com/users/3458162/arye-eidelman"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546156591, "post_id": 53975298, "comment_id": 94789705, "body": "I have a 400 line update script (with more than 20 methods), it destroys 5 database tables and imports fresh data into these tables. After I added action caching, I realized that the script doesn&#39;t take effect until the server is restarted."}, {"owner": {"reputation": 198, "user_id": 2936074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb5270af456d54f3f57fe05685968c6?s=128&d=identicon&r=PG&f=1", "display_name": "Foo Bar Zoo", "link": "https://stackoverflow.com/users/2936074/foo-bar-zoo"}, "edited": false, "score": 2, "creation_date": 1546167303, "post_id": 53975298, "comment_id": 94791568, "body": "@AryeEidelman There are 3 possibilities; First one is, you are using in memory cache. In this case, even though you call <code>Rails.cache.clear</code> it shouldn&#39;t clear the cache because your script and Rails application runs in different processes and each process has it&#39;s own heap. Second one is, you are using file store as cache store. In this case, you should make sure your script is in the same machine with your Rails application, otherwise it only removes local cache files. Third one is, you are using different cache stores for your Rails application and your cleanup script."}, {"owner": {"reputation": 803, "user_id": 3458162, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EtWor.jpg?s=128&g=1", "display_name": "Arye Eidelman", "link": "https://stackoverflow.com/users/3458162/arye-eidelman"}, "reply_to_user": {"reputation": 198, "user_id": 2936074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb5270af456d54f3f57fe05685968c6?s=128&d=identicon&r=PG&f=1", "display_name": "Foo Bar Zoo", "link": "https://stackoverflow.com/users/2936074/foo-bar-zoo"}, "edited": false, "score": 0, "creation_date": 1546188516, "post_id": 53975298, "comment_id": 94796382, "body": "@foo-bar-zoo thanks for the insight. As hazhir-derakhshi and others told me this should be using memory cache. So I&#39;ll add a clear cache button to the admin dashboard, that&#39;ll run Rails.cache.clear on the same process as the server. And see if that works."}, {"owner": {"reputation": 803, "user_id": 3458162, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EtWor.jpg?s=128&g=1", "display_name": "Arye Eidelman", "link": "https://stackoverflow.com/users/3458162/arye-eidelman"}, "edited": false, "score": 0, "creation_date": 1571945583, "post_id": 53975298, "comment_id": 103417016, "body": "Or I could have ssh&#39;ed into the dyno and cleared the cache that way. <a href=\"https://devcenter.heroku.com/articles/exec\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/exec</a>"}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 2107463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mw2ml.jpg?s=128&g=1", "display_name": "Hazhir Derakhshi", "link": "https://stackoverflow.com/users/2107463/hazhir-derakhshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1546156838, "creation_date": 1546156838, "answer_id": 53976067, "question_id": 53975298, "link": "https://stackoverflow.com/questions/53975298/how-can-i-clear-rails-action-cache-rails-cache-clear-isnt-working/53976067#53976067", "title": "How can I clear rails action cache? (Rails.cache.clear isn&#39;t working)", "body": "<p>As you can see <a href=\"https://github.com/rails/rails/blob/96dee0e7e5a8dd6ce42999b13d0bd0623073e229/railties/lib/rails/generators/rails/app/templates/config/environments/production.rb.tt#L70\" rel=\"nofollow noreferrer\">here</a>, default cache store in production is mem_cache_store. Therefore, you should be able to clear it in different ways, without restarting the sever. Maciej Mensfeld wrote a <a href=\"https://mensfeld.pl/2013/04/clear-memcached-without-restart-with-ruby-and-capistrano-rake-task/\" rel=\"nofollow noreferrer\">blog</a> about these ways. I personally use <code>flush_all</code> command in the cache server if <code>Rails.cache.clear</code> does not make effect.</p>\n"}], "owner": {"reputation": 803, "user_id": 3458162, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EtWor.jpg?s=128&g=1", "display_name": "Arye Eidelman", "link": "https://stackoverflow.com/users/3458162/arye-eidelman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3139, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1555095771, "creation_date": 1546144284, "last_edit_date": 1555095771, "question_id": 53975298, "link": "https://stackoverflow.com/questions/53975298/how-can-i-clear-rails-action-cache-rails-cache-clear-isnt-working", "title": "How can I clear rails action cache? (Rails.cache.clear isn&#39;t working)", "body": "<h2>How can I clear rails action cache without restarting the server?</h2>\n\n<p>I have a script that updates the Postgres database with new data. I'd like to clear all cached pages after the script completes. but I can't seem to get this to take effect without completely restarting the Heroku server</p>\n\n<p>I have tried without success:</p>\n\n<ul>\n<li><code>Rails.cache.clear\n=&gt; [\"/app/tmp/cache/bootsnap-compile-cache\", \"/app/tmp/cache/bootsnap-load-path-cache\"]</code></li>\n<li><code>rails tmp:cache:clear</code></li>\n<li><code>rails assets:clean</code></li>\n</ul>\n\n<p>config.cache_store is not set explicitly for production, (I've seen mixed information as to what cache is being used by default)</p>\n\n<p>I have ensured that there is no caching in the browser (by disabling caching in dev tools and bypassing the service worker)</p>\n\n<p>I'm using Heroku with ruby 2.5.3, rails 5.2.1.1, and actionpack-action_caching 1.2.0</p>\n\n<h3>How do I know it's not being cached at the database layer or with Fragment Caching?</h3>\n\n<p>I added logging to the action which only logs the first time a page is accessed after a restart</p>\n\n<p><strong>Update:</strong> I removed action caching and instead better optimized the SQL quarries by using eager loading.</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "serialization"], "answers": [{"comments": [{"owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "edited": false, "score": 1, "creation_date": 1546145969, "post_id": 53975274, "comment_id": 94788376, "body": "If you don&#39;t want to conform to JSON API specification, you can always change your adapter to <code>json</code>, see <a href=\"https://github.com/rails-api/active_model_serializers/blob/v0.10.6/docs/general/adapters.md\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 626, "user_id": 508400, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2bce2ee5cf090bf05b79fd14e4417157?s=128&d=identicon&r=PG", "display_name": "coryetzkorn", "link": "https://stackoverflow.com/users/508400/coryetzkorn"}, "reply_to_user": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "edited": false, "score": 0, "creation_date": 1546440761, "post_id": 53975274, "comment_id": 94853387, "body": "@MarcinKo\u0142odziej thanks! Didn&#39;t realize there were two JSON adapters."}], "tags": [], "owner": {"reputation": 626, "user_id": 508400, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2bce2ee5cf090bf05b79fd14e4417157?s=128&d=identicon&r=PG", "display_name": "coryetzkorn", "link": "https://stackoverflow.com/users/508400/coryetzkorn"}, "is_accepted": true, "score": 0, "last_activity_date": 1546143904, "creation_date": 1546143904, "answer_id": 53975274, "question_id": 53975225, "link": "https://stackoverflow.com/questions/53975225/activemodel-serializer-json-includes-attributes-key/53975274#53975274", "title": "ActiveModel Serializer JSON Includes &quot;attributes&quot; Key", "body": "<p>After reading through some GitHub issues, it appears the \"attributes\" nesting is coming from the JSON API spec and <em>is</em> expected behavior:\n<a href=\"https://jsonapi.org/format/#document-resource-objects\" rel=\"nofollow noreferrer\">https://jsonapi.org/format/#document-resource-objects</a></p>\n\n<p>This issue was helpful:\n<a href=\"https://github.com/rails-api/active_model_serializers/issues/2202\" rel=\"nofollow noreferrer\">https://github.com/rails-api/active_model_serializers/issues/2202</a></p>\n\n<p>Looks like a feature, not a bug.</p>\n"}], "owner": {"reputation": 626, "user_id": 508400, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2bce2ee5cf090bf05b79fd14e4417157?s=128&d=identicon&r=PG", "display_name": "coryetzkorn", "link": "https://stackoverflow.com/users/508400/coryetzkorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 53975274, "answer_count": 1, "score": 0, "last_activity_date": 1546143904, "creation_date": 1546143224, "question_id": 53975225, "link": "https://stackoverflow.com/questions/53975225/activemodel-serializer-json-includes-attributes-key", "title": "ActiveModel Serializer JSON Includes &quot;attributes&quot; Key", "body": "<p>I'm using the <a href=\"https://github.com/rails-api/active_model_serializers\" rel=\"nofollow noreferrer\">Rails ActiveModel Serializer</a> to output JSON to an API endpoint. </p>\n\n<p>I'm getting this JSON output:</p>\n\n<pre><code>{\n  \"data\":[\n    {\n      \"id\":\"396\",\n      \"type\":\"profiles\",\n      \"attributes\":{\n        \"name\":\"Impossibles\",\n        \"created-at\":\"2017-05-11T18:14:06.201-04:00\",\n        \"updated-at\":\"2018-04-01T13:34:15.905-04:00\",\n        \"website\":\"http://soundcloud.com/impossibles\"\n      }\n    }\n  ]\n}\n</code></pre>\n\n<p>But was expecting it to be formatted like this:</p>\n\n<pre><code>{\n  \"data\":[\n    {\n      \"id\":\"396\",\n      \"type\":\"profiles\",\n      \"name\":\"Impossibles\",\n      \"created-at\":\"2017-05-11T18:14:06.201-04:00\",\n      \"updated-at\":\"2018-04-01T13:34:15.905-04:00\",\n      \"website\":\"http://soundcloud.com/impossibles\"\n    }\n  ]\n}\n</code></pre>\n\n<p>Trying to avoid the extra level of nesting in the returned JSON.\nIs there a way to remove the \"attributes\" key?</p>\n\n<p>This is my serializer:</p>\n\n<pre><code>class ProfileSerializer &lt; ActiveModel::Serializer\n    attributes :id, :name, :created_at, :updated_at, :website\nend\n</code></pre>\n\n<p>And my controller:</p>\n\n<pre><code>def show\n  profile = Profile.find(params[:id])\n  render json: profile, status: :ok\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 628, "user_id": 4643970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AwK4h.jpg?s=128&g=1", "display_name": "Mahmoud Sayed", "link": "https://stackoverflow.com/users/4643970/mahmoud-sayed"}, "edited": false, "score": 0, "creation_date": 1546134327, "post_id": 53974681, "comment_id": 94787144, "body": "have you tried <code>acts_as_list</code> <a href=\"https://github.com/swanandp/acts_as_list\" rel=\"nofollow noreferrer\">github.com/swanandp/acts_as_list</a>?"}, {"owner": {"reputation": 439, "user_id": 3399767, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fhW1I.jpg?s=128&g=1", "display_name": "Ruegen", "link": "https://stackoverflow.com/users/3399767/ruegen"}, "reply_to_user": {"reputation": 628, "user_id": 4643970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AwK4h.jpg?s=128&g=1", "display_name": "Mahmoud Sayed", "link": "https://stackoverflow.com/users/4643970/mahmoud-sayed"}, "edited": false, "score": 0, "creation_date": 1546139760, "post_id": 53974681, "comment_id": 94787710, "body": "No, I implemented something similar myself by incrementing a column to raise it&#39;s order but this does more - I will give it a try"}], "owner": {"reputation": 439, "user_id": 3399767, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fhW1I.jpg?s=128&g=1", "display_name": "Ruegen", "link": "https://stackoverflow.com/users/3399767/ruegen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546141659, "creation_date": 1546133815, "last_edit_date": 1546141659, "question_id": 53974681, "link": "https://stackoverflow.com/questions/53974681/priority-using-a-date-or-integer-column-in-rails", "title": "priority using a date or integer column in Rails", "body": "<p>I want a priority column in a todolist that I can have in a join table with a many to many relationship in a rails application.</p>\n\n<p>e.g. \nproducts\nshops\nproducts_shops</p>\n\n<p>in the products_shops table I have a priority, when it is the same shop - they can move the priority of a product up or down. I was thinking to have an integer or date field that would help achieve this.</p>\n\n<p>I've tried several ways </p>\n\n<p>e.g. give all records the same date, last record id, add one second to date, sort by oldest first) not really sure how to go about it.</p>\n\n<p>Hoping for suggestions, I'm not looking for a queue structure as they have to move between rows on screen.</p>\n"}, {"tags": ["ruby", "multithreading"], "answers": [{"tags": [], "owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "is_accepted": true, "score": 1, "last_activity_date": 1546147438, "last_edit_date": 1546147438, "creation_date": 1546145643, "answer_id": 53975361, "question_id": 53974673, "link": "https://stackoverflow.com/questions/53974673/synchronising-thread-startup/53975361#53975361", "title": "Synchronising thread startup", "body": "<p>Set a while block to stop waiting if second thread finished (see more <a href=\"https://stackoverflow.com/questions/1136371/why-is-a-while-loop-needed-around-pthread-wait-conditions\">here</a>):</p>\n\n<pre><code>def run_test\n  mutex     = Mutex.new\n  cond      = ConditionVariable.new\n  cond_main = ConditionVariable.new\n  threads   = []\n\n  spawned = false\n\n  t1_done = false\n  t2_done = false\n\n  threads &lt;&lt; Thread.new do\n    mutex.synchronize do\n      while(!spawned) do\n        cond.wait(mutex, 2)\n      end\n      raise 'timeout waiting for switch' if !t2_done\n\n      # some work\n      t1_done = true\n      cond.signal\n    end\n  end\n\n  threads &lt;&lt; Thread.new do\n    mutex.synchronize do\n      spawned = true\n      cond.signal\n      # some work\n      t2_done = true\n      cond.wait(mutex, 2)\n      raise 'timeout waiting for switch' if !t1_done\n    end\n  end\n\n  threads.map(&amp;:join)\nend\n\n50000.times { |x| \n  puts x \n  run_test \n}\n</code></pre>\n\n<p>Alternatively, using a <a href=\"http://ruby-concurrency.github.io/concurrent-ruby/master/Concurrent/Semaphore.html\" rel=\"nofollow noreferrer\">counting semaphore</a>, we can assign some priorities to the threads:</p>\n\n<pre><code>require 'concurrent-ruby'\n\ndef run_test\n  mutex     = Mutex.new\n  sync      = Concurrent::Semaphore.new(0)\n  cond      = ConditionVariable.new\n  cond_main = ConditionVariable.new\n  threads   = []\n\n  t1_done = false\n  t2_done = false\n\n  threads &lt;&lt; Thread.new do\n    mutex.synchronize do\n      sync.release(1)\n      # this needs to happen first\n      cond.wait(mutex, 2)\n      raise 'timeout waiting for switch' if !t2_done\n\n      # some work\n      t1_done = true\n      cond.signal\n    end\n  end\n\n  threads &lt;&lt; Thread.new do\n    sync.acquire(1)\n    mutex.synchronize do\n      cond.signal\n      # some work\n      t2_done = true\n      cond.wait(mutex, 2)\n      raise 'timeout waiting for switch' if !t1_done\n    end\n  end\n\n  threads.map(&amp;:join)\nend\n\n50000.times { |x| \n  puts x \n  run_test \n}\n</code></pre>\n\n<p>I prefer the second solution as it allows you to control the order of your threads, though it feels a little dirtier.</p>\n\n<p>As a curiosity, on Ruby 2.6, your code does not seem to raise exceptions (tested >10M runs).</p>\n"}], "owner": {"reputation": 30697, "user_id": 31667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/082b069c287878a1bd5731f44c8f10e7?s=128&d=identicon&r=PG", "display_name": "viraptor", "link": "https://stackoverflow.com/users/31667/viraptor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 53975361, "answer_count": 1, "score": 2, "last_activity_date": 1546147438, "creation_date": 1546133670, "question_id": 53974673, "link": "https://stackoverflow.com/questions/53974673/synchronising-thread-startup", "title": "Synchronising thread startup", "body": "<p>I'm running some code (simplified, but still breaking version below), which fails in ~1/3000 executions waiting for the first switch. What should happen is:</p>\n\n<ul>\n<li><code>threads[0]</code> starts up and grabs the mutex</li>\n<li><code>threads[0]</code> notifies <code>cond_main</code> so the main thread can create <code>thread[1]</code></li>\n<li><code>thread[1]</code> / <code>thread[0]</code> do some work waiting for each others' signals</li>\n</ul>\n\n<p>Unfortunately it fails in <code>thread[0]</code> - the <code>cond.wait</code> ends with a timeout and raises an exception. How would I synchronise this, making sure that <code>cond_main</code> doesn't get signalled too early?</p>\n\n<p>Ideally I'd like to pass a locked mutex from main thread and unlock it in the first spawned thread, but Ruby requires mutexes to be unlocked in the same thread - so this won't work.</p>\n\n<p>Self-contained reproducer (doesn't make much sense on its own, but real work is stripped out):</p>\n\n<pre><code>def run_test\n  mutex     = Mutex.new\n  cond      = ConditionVariable.new\n  cond_main = ConditionVariable.new\n  threads   = []\n\n  t1_done = false\n  t2_done = false\n\n  threads &lt;&lt; Thread.new do\n    mutex.synchronize do\n      # this needs to happen first\n      cond_main.signal\n      cond.wait(mutex, 2)\n      raise 'timeout waiting for switch' if !t2_done\n\n      # some work\n      t1_done = true\n      cond.signal\n    end\n  end\n  cond_main.wait(Mutex.new.lock, 2)\n\n  threads &lt;&lt; Thread.new do\n    mutex.synchronize do\n      cond.signal\n      # some work\n      t2_done = true\n      cond.wait(mutex, 2)\n      raise 'timeout waiting for switch' if !t1_done\n    end\n  end\n\n  threads.map(&amp;:join)\nend\n\n5000.times { |x|\n  puts \"Run #{x}\"\n  run_test\n}\n</code></pre>\n\n<p>Tested on Ruby 2.5.3</p>\n"}, {"tags": ["ruby", "rbenv"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 3, "creation_date": 1546133817, "post_id": 53974597, "comment_id": 94787100, "body": "Run <a href=\"https://github.com/rbenv/rbenv#rbenv-rehash\" rel=\"nofollow noreferrer\"><code>rbenv rehash</code></a>."}, {"owner": {"reputation": 11, "user_id": 2205284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SfKjV.jpg?s=128&g=1", "display_name": "chlcweng", "link": "https://stackoverflow.com/users/2205284/chlcweng"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546143071, "post_id": 53974597, "comment_id": 94788064, "body": "it works. problem solved! Thanks"}], "owner": {"reputation": 11, "user_id": 2205284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SfKjV.jpg?s=128&g=1", "display_name": "chlcweng", "link": "https://stackoverflow.com/users/2205284/chlcweng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 253, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1546132558, "creation_date": 1546132558, "question_id": 53974597, "link": "https://stackoverflow.com/questions/53974597/ruby-2-5-3-version-installed-but-ruby-v-still-showing-2-3-7-version", "title": "ruby 2.5.3 version installed, but ruby -v still showing 2.3.7 version", "body": "<p>I've installed version 2.5.3 successfully, but ruby -v still show 2.3.7 version. </p>\n\n<p>rbenv 2.5.3\nrbenv global 2.5.3\nruby 2.3.7p456 (2018-03-28 revision 63024) [universal.x86_64-darwin18]</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "version-control", "installation", "version"], "answers": [{"comments": [{"owner": {"reputation": 637, "user_id": 9634620, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndQhh.png?s=128&g=1", "display_name": "geekTechnique", "link": "https://stackoverflow.com/users/9634620/geektechnique"}, "reply_to_user": {"reputation": 604, "user_id": 6365949, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/1Hn9j.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/6365949/martin"}, "edited": false, "score": 0, "creation_date": 1546132747, "post_id": 53974542, "comment_id": 94786980, "body": "@Martin No problem. I&#39;ve added a small step just in case."}, {"owner": {"reputation": 604, "user_id": 6365949, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/1Hn9j.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/6365949/martin"}, "edited": false, "score": 0, "creation_date": 1546134000, "post_id": 53974542, "comment_id": 94787123, "body": "does railsinstaller automatically download rvm ?  win10 command prompt says command not found"}, {"owner": {"reputation": 637, "user_id": 9634620, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndQhh.png?s=128&g=1", "display_name": "geekTechnique", "link": "https://stackoverflow.com/users/9634620/geektechnique"}, "reply_to_user": {"reputation": 604, "user_id": 6365949, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/1Hn9j.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/6365949/martin"}, "edited": false, "score": 0, "creation_date": 1546183772, "post_id": 53974542, "comment_id": 94795144, "body": "Yes it does. The rails installer downloads and installs the &quot;ruby version manager&quot;. For your future reference, anytime you try a command in cmd and it says &quot;command not found&quot; or something like that, it is because you are not in the directory where the executable is located. Browse to the directory where rvm is installed and try the commands there. Alternatively, you could add the rvm directory to your system path to be able to run it from any directory.  Also, runnig cmd &quot;with ruby-on-rails&quot; may allow you to run rvm commands from anywhere. Not positive though."}], "tags": [], "owner": {"reputation": 637, "user_id": 9634620, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndQhh.png?s=128&g=1", "display_name": "geekTechnique", "link": "https://stackoverflow.com/users/9634620/geektechnique"}, "is_accepted": true, "score": 0, "last_activity_date": 1546132701, "last_edit_date": 1546132701, "creation_date": 1546131760, "answer_id": 53974542, "question_id": 53974509, "link": "https://stackoverflow.com/questions/53974509/wrong-version-of-ruby-recognized-on-windows/53974542#53974542", "title": "wrong version of ruby recognized on windows", "body": "<p>Install the latest version of rails (my preference is the <a href=\"http://installrails.com/\" rel=\"nofollow noreferrer\">install rails website</a>).</p>\n\n<p>Then you want to type:</p>\n\n<pre><code>$rvm use ruby-2.3.1\n</code></pre>\n\n<p>I believe this will force your system to use that specific version of ruby. While I believe this will work alone, if rails throws some errors, try this:</p>\n\n<pre><code>$gem update rails --no-ri --no-rdoc\n</code></pre>\n\n<p><strong>side note</strong> I know your question is about ruby, but the rails installer should handle ruby too, and I see that your question is still externally in regards to rails.</p>\n"}], "owner": {"reputation": 604, "user_id": 6365949, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/1Hn9j.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/6365949/martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 53974542, "answer_count": 1, "score": 1, "last_activity_date": 1546132701, "creation_date": 1546131324, "question_id": 53974509, "link": "https://stackoverflow.com/questions/53974509/wrong-version-of-ruby-recognized-on-windows", "title": "wrong version of ruby recognized on windows", "body": "<p>I have an different version of ruby recognized by my windows10 cmd, even after I've uninstalled that version, and now it's preventing me from running bundle  update or bundle install.</p>\n\n<pre><code>C:\\Users\\marti\\Documents\\projects\\discogsTagger\\heroku\\test2\\jruby-getting-started&gt;bundle install\nYour Ruby version is 2.3.3, but your Gemfile specified 2.3.1\n</code></pre>\n\n<p>But if I run ruby -v, it says I have the correct version installed.</p>\n\n<pre><code>C:\\Users\\marti\\Documents\\projects\\discogsTagger\\heroku\\test2\\jruby-getting-started&gt;ruby -v\nruby 2.3.1p112 (2016-04-26 revision 54768) [x64-mingw32]\n</code></pre>\n\n<p>I'm trying to host a rubyonrails app with heroku, and need to be running 2.3.1, which is what I have installed, but cmd still thinks I'm using 2.3.3, which I've uninstalled. Thanks</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 23287, "user_id": 5981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ab183bb240ffd3a3966d5a615b4bdeb?s=128&d=identicon&r=PG", "display_name": "Phil Ross", "link": "https://stackoverflow.com/users/5981/phil-ross"}, "edited": false, "score": 0, "creation_date": 1546127893, "post_id": 53974001, "comment_id": 94786235, "body": "I&#39;ve just successfully built revision 65b1cf0 on Ubuntu 18.10. <a href=\"https://github.com/ruby/ruby/blob/65b1cf0e82255db68262dfb8fdb001268981e223/enc/make_encmake.rb#L100\" rel=\"nofollow noreferrer\">Line 100 of make_encmake.rb</a> is supposed to be calling <code>#-</code> on an <code>Array</code>, not a <code>Dir</code> (the result of the <code>Dir.open</code> block assigned to <code>trans</code> from line 90). The only way <code>trans</code> could be <code>Dir</code> is if no block was passed to <code>open</code>. Do you have any local changes to <code>enc&#47;make_encmake.rb</code>?"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546128319, "post_id": 53974001, "comment_id": 94786305, "body": "How <b>exactly</b> do you recreate your setup? <code>git clone https:&#47;&#47;github.com&#47;ruby&#47;ruby; cd ruby; git pull upstream trunk</code> returns <code>fatal: &#39;upstream&#39; does not appear to be a git repository</code>. It looks like you&#39;ve forked the repository, so explain in more detail please."}, {"owner": {"reputation": 198, "user_id": 2936074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb5270af456d54f3f57fe05685968c6?s=128&d=identicon&r=PG&f=1", "display_name": "Foo Bar Zoo", "link": "https://stackoverflow.com/users/2936074/foo-bar-zoo"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546163668, "post_id": 53974001, "comment_id": 94790884, "body": "@anothermh upstream is <code>git@github.com:ruby&#47;ruby.git</code>, it&#39;s a convention. origin targets to my fork and upstream targets to ruby&#39;s repository."}, {"owner": {"reputation": 198, "user_id": 2936074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb5270af456d54f3f57fe05685968c6?s=128&d=identicon&r=PG&f=1", "display_name": "Foo Bar Zoo", "link": "https://stackoverflow.com/users/2936074/foo-bar-zoo"}, "reply_to_user": {"reputation": 23287, "user_id": 5981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ab183bb240ffd3a3966d5a615b4bdeb?s=128&d=identicon&r=PG", "display_name": "Phil Ross", "link": "https://stackoverflow.com/users/5981/phil-ross"}, "edited": false, "score": 0, "creation_date": 1546164199, "post_id": 53974001, "comment_id": 94791004, "body": "@PhilRoss <code>Dir.open</code> with given block on line 90 returns an instance of <code>Dir</code> instead of an <code>Array</code> on my setup. I tried to run the same code(<code>Dir.open</code> with block) in IRB session and it correctly returns an Array."}, {"owner": {"reputation": 198, "user_id": 2936074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb5270af456d54f3f57fe05685968c6?s=128&d=identicon&r=PG&f=1", "display_name": "Foo Bar Zoo", "link": "https://stackoverflow.com/users/2936074/foo-bar-zoo"}, "edited": false, "score": 1, "creation_date": 1546164871, "post_id": 53974001, "comment_id": 94791144, "body": "ok, I&#39;ve found the problem. I made some changes for <code>select</code> method which was causing the problem because somehow the make target is using the recently built ruby version instead of base ruby version."}, {"owner": {"reputation": 23287, "user_id": 5981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ab183bb240ffd3a3966d5a615b4bdeb?s=128&d=identicon&r=PG", "display_name": "Phil Ross", "link": "https://stackoverflow.com/users/5981/phil-ross"}, "edited": false, "score": 1, "creation_date": 1546193241, "post_id": 53974001, "comment_id": 94797491, "body": "make_encmake.rb is <a href=\"https://github.com/ruby/ruby/blob/65b1cf0e82255db68262dfb8fdb001268981e223/common.mk#L825\" rel=\"nofollow noreferrer\">run using the miniruby executable</a> that is produced during the Ruby build process."}, {"owner": {"reputation": 198, "user_id": 2936074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb5270af456d54f3f57fe05685968c6?s=128&d=identicon&r=PG&f=1", "display_name": "Foo Bar Zoo", "link": "https://stackoverflow.com/users/2936074/foo-bar-zoo"}, "reply_to_user": {"reputation": 23287, "user_id": 5981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ab183bb240ffd3a3966d5a615b4bdeb?s=128&d=identicon&r=PG", "display_name": "Phil Ross", "link": "https://stackoverflow.com/users/5981/phil-ross"}, "edited": false, "score": 0, "creation_date": 1546199025, "post_id": 53974001, "comment_id": 94798942, "body": "Thanks a lot for the information @PhilRoss. It&#39;s really weird that the make target is using recently built miniruby version which obscures the errors in recent implementation as seen, I&#39;d expect it to use base ruby version."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546199412, "post_id": 53974001, "comment_id": 94799042, "body": "That you&#39;re trying to compile a fork that you&#39;ve modified is pretty important information; the title of this question is misleading."}], "owner": {"reputation": 198, "user_id": 2936074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afb5270af456d54f3f57fe05685968c6?s=128&d=identicon&r=PG&f=1", "display_name": "Foo Bar Zoo", "link": "https://stackoverflow.com/users/2936074/foo-bar-zoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546124624, "creation_date": 1546124624, "question_id": 53974001, "link": "https://stackoverflow.com/questions/53974001/having-error-while-building-ruby-from-trunk-on-osx", "title": "Having error while building Ruby from trunk on OSX", "body": "<p>I am trying to build ruby from source and here are the steps I'm following;</p>\n\n<ol>\n<li>Fetch the latest version from Github, <code>git pull upstream trunk</code></li>\n<li>Run <code>./configure</code></li>\n<li>Run <code>make</code></li>\n</ol>\n\n<p>The output of the 3rd command is;</p>\n\n<pre><code>./revision.h unchanged\ngenerating enc.mk\nTraceback (most recent call last):\n    1: from ./enc/make_encmake.rb:121:in `&lt;main&gt;'\n./enc/make_encmake.rb:100:in `target_transcoders': undefined method `-' for #&lt;Dir:./enc/trans&gt; (NoMethodError)\nmake: *** [enc.mk] Error 1\n</code></pre>\n\n<p>I don't really know how it's supposed to work because there is no <code>#-</code>(extract) method for Dir instances in none of the Ruby versions.</p>\n"}, {"tags": ["sql", "ruby", "postgresql", "activerecord", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 8556273, "user_type": "registered", "profile_image": "https://graph.facebook.com/476680342688938/picture?type=large", "display_name": "Josh Rice", "link": "https://stackoverflow.com/users/8556273/josh-rice"}, "edited": false, "score": 0, "creation_date": 1546125194, "post_id": 53974032, "comment_id": 94785717, "body": "Thank you. Side note we have the same last name. Thank you for that link I just"}], "tags": [], "owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "is_accepted": true, "score": 1, "last_activity_date": 1546124918, "creation_date": 1546124918, "answer_id": 53974032, "question_id": 53973801, "link": "https://stackoverflow.com/questions/53973801/activerecord-include-result-not-containing-the-data-of-related-table/53974032#53974032", "title": "ActiveRecord Include result not containing the data of related table", "body": "<p>It is because <code>.technologies</code> is a method being called on the <code>@portfolio_items</code> object which will return technologies related to it, but it does not mix them together which I think it what you are asking about.  To display this as a nested JSON object you would want something like this.</p>\n\n<pre><code>puts @portfolio_items.as_json(include:{technologies:{}})\n</code></pre>\n\n<p>This might help if you are curious about it: <a href=\"https://apidock.com/rails/ActiveModel/Serializers/JSON/as_json\" rel=\"nofollow noreferrer\">https://apidock.com/rails/ActiveModel/Serializers/JSON/as_json</a></p>\n"}], "owner": {"reputation": 27, "user_id": 8556273, "user_type": "registered", "profile_image": "https://graph.facebook.com/476680342688938/picture?type=large", "display_name": "Josh Rice", "link": "https://stackoverflow.com/users/8556273/josh-rice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 53974032, "answer_count": 1, "score": 0, "last_activity_date": 1546124927, "creation_date": 1546122333, "last_edit_date": 1546124927, "question_id": 53973801, "link": "https://stackoverflow.com/questions/53973801/activerecord-include-result-not-containing-the-data-of-related-table", "title": "ActiveRecord Include result not containing the data of related table", "body": "<p>Why is it when i display the jason for @portfolio_items I get the data only for Portfolio and not the technologies but when i do @portfolio_items.technologies I only get the records for the technologies\nI want a jason object that contains both</p>\n\n<pre><code>    @portfolio_items = Portfolio.includes(:technologies).find(27)\n\n    puts  json: @portfolio_items\n</code></pre>\n\n<p>returns </p>\n\n<pre><code>    Portfolio id: 27,\n    title: \"Portfolio title: 0\",\n    subtitle: \"Angular\", \n    body: \"Lorem ipsum dolor sit amet, consectetur adipiscing...\", \n    main_image: \"https://via.placeholder.com/600x400\", \n    thumb_image: \"https://via.placeholder.com/350x200\", \n    created_at:\"2018-12-28 23:18:35\", \n    updated_at: \"2018-12-28 23:18:35\"\n</code></pre>\n\n<p>and </p>\n\n<pre><code> puts  json: @portfolio_items.technologies\n</code></pre>\n\n<p>returns </p>\n\n<pre><code>   [#&lt;Technology id: 7, name: \"Technology 0\", portfolio_id: 27, created_at: \n   \"2018-12-28 23:18:35\", updated_at: \"2018-12-28 23:18:35\"&gt;,\n\n   &lt;Technology id: 8, name: \"Technology 1\", portfolio_id: 27, created_at\n :\"2018-12-28 23:18:35\", updated_at: \"2018-12-28 23:18:35\"&gt;,\n\n  &lt;Technology id: 9, name: \"Technology 2\", portfolio_id: 27, created_at: \n   \"2018- \n   12-28 23:18:35\", updated_at: \"2018-12-28 23:18:35\"&gt;]\n</code></pre>\n\n<p>So basically why is @portfolio_items not have the value thats in portfolio_items.technologies </p>\n"}, {"tags": ["ruby", "jruby"], "answers": [{"comments": [{"owner": {"reputation": 779, "user_id": 833555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99cf1bcf274d03c06d2f218f73cff0d?s=128&d=identicon&r=PG", "display_name": "Gregory Ostermayr", "link": "https://stackoverflow.com/users/833555/gregory-ostermayr"}, "edited": false, "score": 0, "creation_date": 1546379602, "post_id": 53975331, "comment_id": 94835461, "body": "I expect that the following would also work <code>CLASSPATH=&quot;.&quot;</code> and keep the require"}], "tags": [], "owner": {"reputation": 354, "user_id": 4954834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A4Hkh.jpg?s=128&g=1", "display_name": "Eric Marchese", "link": "https://stackoverflow.com/users/4954834/eric-marchese"}, "is_accepted": true, "score": 1, "last_activity_date": 1546144912, "creation_date": 1546144912, "answer_id": 53975331, "question_id": 53973727, "link": "https://stackoverflow.com/questions/53973727/how-to-include-class-dependency-jar-in-jruby/53975331#53975331", "title": "How to include class dependency jar in JRuby?", "body": "<p>My <code>$CLASSPATH</code> environment variable was not set, which it needs to be in order for JRuby to be able to find my <code>jar</code>. After I ran <code>export CLASSPATH=\".:mydependency.jar\"</code> on the command line and removed the line <code>require './mydependency.jar'</code>, it worked.</p>\n"}], "owner": {"reputation": 354, "user_id": 4954834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A4Hkh.jpg?s=128&g=1", "display_name": "Eric Marchese", "link": "https://stackoverflow.com/users/4954834/eric-marchese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "accepted_answer_id": 53975331, "answer_count": 1, "score": 2, "last_activity_date": 1546144912, "creation_date": 1546121489, "last_edit_date": 1546121861, "question_id": 53973727, "link": "https://stackoverflow.com/questions/53973727/how-to-include-class-dependency-jar-in-jruby", "title": "How to include class dependency jar in JRuby?", "body": "<p>I'm having trouble figuring out how to include/import/require <code>mydependency.jar</code> which <code>MyJavaClass</code> (within a <code>MyJavaClass.class</code> file) depends on. <code>MyJavaClass</code> contains many <code>import</code> statements importing classes from <code>mydependency.jar</code>. Everything is in the same directory.</p>\n\n<p>When I run <code>java -cp '.:mydependency.jar' MyJavaClass</code> on the command line, I get no error and by putting some calls in <code>main</code> I can get it to run how I want, but when I run <code>ruby my_ruby_file.rb</code> with JRuby on the command line I get <code>NoClassDefFoundError</code> for the first class imported (which is being imported from <code>mydependency.jar</code>) within the <code>MyJavaClass.class</code> file. The stack trace for the error points to the <code>java_import</code> line in <code>my_ruby_file.rb</code> so it seems like it's not properly finding the classes imported from <code>mydependency.jar</code> that are included in my <code>MyJavaClass.class</code> file, even though it runs fine in the normal Java environment.</p>\n\n<pre><code># contents of my_ruby_file.rb\n\nrequire 'java'\nrequire './mydependency.jar'\n\njava_import 'MyJavaClass'\n\nMyJavaClass.new.myJavaInstanceMethod('argument')\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1546117092, "post_id": 53973275, "comment_id": 94784258, "body": "See <a href=\"http://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-partition\" rel=\"nofollow noreferrer\">Enumerable#partition</a>: <code>array.partition { |s| ... }</code> is all you need. btw, more tags is not better than fewer tags. Here the only one that is deserved is &quot;ruby&quot;."}, {"owner": {"reputation": 13, "user_id": 10847502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ceb1212f764f67ba518df2c198e132b?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/10847502/bob"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546117278, "post_id": 53973275, "comment_id": 94784299, "body": "yes, the solution suggests .partition, but I would like to know why my solution didn&#39;t work :( btw i&#39;ve changed the tags, thanks!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546117458, "post_id": 53973275, "comment_id": 94784330, "body": "Oh, sorted. Then <code>array.partition { |s| ... }.map(&amp;:sort)</code>, which is (effectively) short for <code>array.partition { |s| ... }.map { |a| a.sort)</code>. @max has identified the problem with your code."}], "answers": [{"comments": [{"owner": {"reputation": 782, "user_id": 2444220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17c671b475eeda2d0557ed441c4df01f?s=128&d=identicon&r=PG", "display_name": "mannykary", "link": "https://stackoverflow.com/users/2444220/mannykary"}, "edited": false, "score": 1, "creation_date": 1546220389, "post_id": 53973317, "comment_id": 94803165, "body": "The <code>map</code> function can still be used, but then it is not necessary to append within the block, i.e. <code>words1 = array.map { |word| word if word.length == size }.compact</code>. Note that <code>#compact</code> will need to be used to get rid of <code>nil</code> values produced when the condition is not satisfied in the map block. Another note: the array is being looped over twice; it could be looped over once using <code>#each</code>: <code>array.each { |word| word.length == size ? words1 &lt;&lt; word : words2 &lt;&lt; word }</code> This cuts the runtime in half. I would only use it if the array is quite large. For small arrays, it won&#39;t matter much."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 1, "last_activity_date": 1546117421, "creation_date": 1546117421, "answer_id": 53973317, "question_id": 53973275, "link": "https://stackoverflow.com/questions/53973275/method-working-only-with-select-or-reject-but-not-working-with-map-solution/53973317#53973317", "title": "Method working only with .select or .reject but not working with .map solution", "body": "<p>The major difference between your solution and theirs, is that you are sorting <code>filtered_arrays</code> (which is an array of arrays) but you are required to sort each of the arrays inside <code>filtered_arrays</code>. You can simply change <code>return filtered_array.sort</code> to <code>return filtered_array.map { |array| array.sort }</code> or <code>return filtered_array.map(&amp;:sort)</code>.</p>\n\n<p>By the way, it's not a good practice to use <code>map</code> when you don't make use of the return value. You can replace <code>map</code> with <code>each</code> and your code will work the exact same. </p>\n"}], "owner": {"reputation": 13, "user_id": 10847502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ceb1212f764f67ba518df2c198e132b?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/10847502/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 53973317, "answer_count": 1, "score": 1, "last_activity_date": 1546117421, "creation_date": 1546116912, "last_edit_date": 1546117236, "question_id": 53973275, "link": "https://stackoverflow.com/questions/53973275/method-working-only-with-select-or-reject-but-not-working-with-map-solution", "title": "Method working only with .select or .reject but not working with .map solution", "body": "<p>I have to solve the following exercise:</p>\n\n<p>\"Implement a first method size_splitter which takes two parameters: an array, and a integer (the size). We will assume that the array only contains words, e.g. Strings, and that the arbitrary rule is to form two groups: the first one with words of the given size (second parameter of the method), and the other group with all the other words.</p>\n\n<p>The size_splitter method should return an array of two arrays - the two groups defined above - with the contents sorted alphabetically.\"</p>\n\n<p>My solution was that:</p>\n\n<pre><code>def size_splitter(array, size)\n\n  words1 = []\n  words2 = []\n  filtered_array = [words1, words2]\n\n  array.map { |word| words1 &lt;&lt; word if word.length == size }\n  array.map { |word| words2 &lt;&lt; word if word.length != size }\n\n  return filtered_array.sort\nend\n</code></pre>\n\n<p>The exercise solution is:</p>\n\n<pre><code>def size_splitter(array, size)\n  first_subarray = array.select { |word| word.length == size }.sort\n  second_subarray = array.reject { |word| word.length == size }.sort\n  return [first_subarray, second_subarray]\n\n  # OR\n\n  # array.sort.partition { |word| word.length == size }\nend\n</code></pre>\n\n<p>But i don't understand why my solution is not working, since it works on pry/irb :( can anyone help?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 3, "creation_date": 1546115610, "post_id": 53972452, "comment_id": 94783894, "body": "Are you asking what the effect is of storing data in an instance variable is? The effect is that the memory usage of the instance of the class will go up. But if those objects already exist in memory somewhere else then Ruby will store pointers to the data, not duplicates of the data. You should include a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> if you want specific answers; since your question does not include one I have voted to close it."}, {"owner": {"reputation": 1036, "user_id": 4465049, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/92iYb.jpg?s=128&g=1", "display_name": "Chitra", "link": "https://stackoverflow.com/users/4465049/chitra"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546234827, "post_id": 53972452, "comment_id": 94805260, "body": "@anothermh, i updated the description. plz have a look now."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546243714, "post_id": 53972452, "comment_id": 94807298, "body": "You have not updated the question. If you want to edit your question to add more information you must click the &quot;edit&quot; link at the bottom of your question."}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1546118107, "creation_date": 1546118107, "answer_id": 53973386, "question_id": 53972452, "link": "https://stackoverflow.com/questions/53972452/what-will-happen-if-i-store-collection-of-data-into-the-instance-variable-under/53973386#53973386", "title": "what will happen if i store collection of data into the instance variable under initialize method?", "body": "<p>It depends on whether or not you make a new copy of the data before passing it to initialize. Given a class like this:</p>\n\n<pre><code>class MyClass\n  attr_accessor :big_list\n  def initialize(big_list)\n    @big_list = big_list\n  end\nend\n\nbig_list = (0..1_000_000).to_a\n</code></pre>\n\n<p>This will only store the <code>big_list</code> in memory once:</p>\n\n<pre><code>inst = MyClass.new(big_list)\n</code></pre>\n\n<p>Since the instance variable in the class and the original <code>big_list</code> variable are the same object, changing one alters both:</p>\n\n<pre><code>inst.big_list.clear\nputs big_list.length # =&gt; 0\n</code></pre>\n\n<p>It's a different story if you completely re-assign one of the variables, because then they're pointing to different objects (and additional memory will be used)</p>\n\n<pre><code>inst.big_list = [1,2,3]\nputs big_list.length # =&gt; 0\n</code></pre>\n\n<p>The same thing would happen if you passed a different list to initialize:</p>\n\n<pre><code>inst = MyClass.new(big_list + big_list)\nputs inst.big_list.length == big_list.length # =&gt; false\n</code></pre>\n\n<p>In this case two lists would be stored in memory, not one. </p>\n"}, {"tags": [], "owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "is_accepted": false, "score": 0, "last_activity_date": 1546357405, "creation_date": 1546357405, "answer_id": 53996768, "question_id": 53972452, "link": "https://stackoverflow.com/questions/53972452/what-will-happen-if-i-store-collection-of-data-into-the-instance-variable-under/53996768#53996768", "title": "what will happen if i store collection of data into the instance variable under initialize method?", "body": "<blockquote>\n  <p>I want to understand how it slow down the execution.</p>\n</blockquote>\n\n<p>If you are asking if doing something in a <code>initialize</code> can slow down execution, then yes. When you call the <code>new</code> method the code inside that block will run and not return until it is completed.</p>\n\n<p>For example the following should show how code in <code>initialize</code> will slow down code execution.</p>\n\n<pre><code>class Foo \n    def initialize(n)\n        sleep n \n    end\nend\n\nputs \"slow down with sleep\"\nputs Time.now \nFoo.new(0)\nputs Time.now \nFoo.new(1)\nputs Time.now \n\nclass Bar \n    def initialize(n)\n        @a = []\n        (0..n).each { |i| @a&lt;&lt;i } \n    end\nend\n\nputs \"slow down with work\"\nputs Time.now \nBar.new(0)\nputs Time.now \nBar.new(100000000)\nputs Time.now \n</code></pre>\n"}], "owner": {"reputation": 1036, "user_id": 4465049, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/92iYb.jpg?s=128&g=1", "display_name": "Chitra", "link": "https://stackoverflow.com/users/4465049/chitra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1546357405, "creation_date": 1546109527, "last_edit_date": 1546115370, "question_id": 53972452, "link": "https://stackoverflow.com/questions/53972452/what-will-happen-if-i-store-collection-of-data-into-the-instance-variable-under", "title": "what will happen if i store collection of data into the instance variable under initialize method?", "body": "<p>what will happen if i store collection of data into instance variable under initialize method?</p>\n\n<p>when i create the object of the class, instance variable are there in the object with lots of data. \nI want to understand how it slow down the execution.</p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "reactjs"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9157191"}, "is_accepted": false, "score": 0, "last_activity_date": 1546111499, "creation_date": 1546111499, "answer_id": 53972700, "question_id": 53972396, "link": "https://stackoverflow.com/questions/53972396/rails-no-association-found-for-name-with-react-nested-form/53972700#53972700", "title": "Rails No association found for name with React Nested form", "body": "<p>For someone that has passing through this issue</p>\n\n<p>just use: <strong><code>accepts_nested_attributes_for</code></strong></p>\n\n<p>below <code>**has_one/has_many**</code>\n<strong><code>has_one/has_many through</code></strong></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9157191"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546111499, "creation_date": 1546109182, "question_id": 53972396, "link": "https://stackoverflow.com/questions/53972396/rails-no-association-found-for-name-with-react-nested-form", "title": "Rails No association found for name with React Nested form", "body": "<p>after setup a simple association mas_one through with rails, i've tried to nest the form with react, but in the logs rails shows this message:</p>\n\n<blockquote>\n  <p>ArgumentError (No association found for name <code>location'. Has it been\n  defined yet?):\n       app/models/post.rb:17:in</code>'  app/models/post.rb:3:in `'</p>\n</blockquote>\n\n<p>the model post has one location through locatable </p>\n\n<pre><code>class Post &lt; ApplicationRecord\n  belongs_to :user, touch: true\n\n\n  accepts_nested_attributes_for :location\n  has_one :locatable\n  has_one :location, through: :locatable\n\nend\n</code></pre>\n\n<p>and in the post controller</p>\n\n<pre><code>def post_params\n    params.require(:post).permit(:title, :body, :user_id,\n\n                                 location_attributes: [:address])\n  end\n</code></pre>\n\n<p>what i've tried to is instead of  <strong>accepts_nested_attributes_for :location</strong> use <strong>:locatable</strong>\nand on post_params use <strong>locatable_attributes</strong> instead of location</p>\n\n<p>on post.jsx</p>\n\n<p>i use</p>\n\n<pre><code> buildFormData() {\n    let formData = new FormData();\n    formData.append(\"post[title]\", this.state.post.title);\n    formData.append(\"post[body]\", this.state.post.body);\n    formData.append(\"post[location_attributes][address]\", this.state.address);\n}\n</code></pre>\n\n<p>on render</p>\n\n<pre><code>render() {\n    return ( \n&lt;div className=\"form-group\"&gt;\n            &lt;label&gt;Address&lt;/label&gt;\n\n            &lt;input\n              type=\"text\"\n              name=\"location[]\"\n              onChange={e =&gt; this.handleAddressChange(e)}\n            /&gt;\n\n            {this.renderAddressInlineError}\n          &lt;/div&gt;)\n}\n</code></pre>\n\n<p>and finally the function </p>\n\n<pre><code> handleAddressChange(e) {\n    let { address } = this.state;\n    address = e.target.value;\n    this.setState({ address: address });\n  }\n</code></pre>\n\n<p>So, i've tried to change location to locatable and the same error is spitted by the log.</p>\n\n<p>So the question is: is that a react.js issue or the rails model issue?</p>\n"}, {"tags": ["ruby", "nokogiri", "libxml2", "macos-high-sierra"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1546108755, "post_id": 53971840, "comment_id": 94782205, "body": "Does nokogiri not actually work, or are you just seeing a warning that can be ignored? If not working, can you <code>gem uninstall</code> and <code>gem install</code> it? Finally, are you using system Ruby or a version installed by a manager like RVM? If you&#39;re using system Ruby then stop using system Ruby, install RVM with <code>\\curl -sSL https:&#47;&#47;get.rvm.io | bash -s stable</code>; install Ruby with <code>rvm install 2.5.3</code>, and then <code>gem install nokogiri</code>."}, {"owner": {"reputation": 111, "user_id": 7448696, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZSsuwcBRCq8/AAAAAAAAAAI/AAAAAAAAAK4/5gpkOwbVXfI/photo.jpg?sz=128", "display_name": "Debora Weber-Wulff", "link": "https://stackoverflow.com/users/7448696/debora-weber-wulff"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546114490, "post_id": 53971840, "comment_id": 94783604, "body": "It&#39;s not actually working. If it was just a warning I would ignore it :) But trying to start the rails server (rails new works) crashes in burning flames. I&#39;ve tried gem uninstall and gem install. I&#39;ll give the RVM a try, I&#39;ve been using the system Ruby."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546115302, "post_id": 53971840, "comment_id": 94783816, "body": "<a href=\"https://robots.thoughtbot.com/psa-do-not-use-system-ruby\" rel=\"nofollow noreferrer\">Don&#39;t</a> <a href=\"https://chrisherring.co/posts/why-you-shouldn-t-use-the-system-ruby\" rel=\"nofollow noreferrer\">use</a> <a href=\"http://billpatrianakos.me/blog/2014/05/15/never-use-system-ruby-ever/\" rel=\"nofollow noreferrer\">system Ruby</a>."}, {"owner": {"reputation": 111, "user_id": 7448696, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZSsuwcBRCq8/AAAAAAAAAAI/AAAAAAAAAK4/5gpkOwbVXfI/photo.jpg?sz=128", "display_name": "Debora Weber-Wulff", "link": "https://stackoverflow.com/users/7448696/debora-weber-wulff"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546115917, "post_id": 53971840, "comment_id": 94783975, "body": "Ah yes, I have been reminded of DLL hell many times this afternoon and evening. I have also tried the sudo gem install bit, as that was one of the suggestions someone made. Currently stuck at  No binary rubies available for: osx/10.13/x86_64/ruby-2.5.3.  Installed rubygems 2.7.6 is newer than 2.6.14 provided with installed ruby, skipping installation, use --force to force installation  but it says &quot;this may take a while depending on your cpu&quot;, so I&#39;ll wait another hour. Thanks!"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546116367, "post_id": 53971840, "comment_id": 94784077, "body": "If you&#39;re using RVM then using <code>sudo gem</code> will fuck everything up. Just use <code>gem</code>. Also RVM doesn&#39;t install binary versions; it compiles Ruby from source. Give it time. And the comparison to DLL hell makes no sense here; RVM installs everything it needs into <code>~&#47;.rvm</code>; any issues with it, the Rubies it installs, or the gems it installs can be resolved by <code>rm -rf ~&#47;.rvm</code> and reinstalling RVM and Ruby."}, {"owner": {"reputation": 111, "user_id": 7448696, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZSsuwcBRCq8/AAAAAAAAAAI/AAAAAAAAAK4/5gpkOwbVXfI/photo.jpg?sz=128", "display_name": "Debora Weber-Wulff", "link": "https://stackoverflow.com/users/7448696/debora-weber-wulff"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546118371, "post_id": 53971840, "comment_id": 94784492, "body": "Oh, I didn&#39;t mean that RVM was DLL hell, but that futzing around with all the gems was. I haven&#39;t used RVM before, so I&#39;ll let it run a bit more and see.  rmv wouldn&#39;t install ruby, said it was already there. But I could do &quot;rvm reinstall ruby-2.5.3&quot;, which I did. That compiled from scratch (something I approve of) and is now hanging at &quot;ruby-2.5.3 - #making binaries executable..&quot; I&#39;ll wait!"}, {"owner": {"reputation": 111, "user_id": 7448696, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZSsuwcBRCq8/AAAAAAAAAAI/AAAAAAAAAK4/5gpkOwbVXfI/photo.jpg?sz=128", "display_name": "Debora Weber-Wulff", "link": "https://stackoverflow.com/users/7448696/debora-weber-wulff"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546122179, "post_id": 53971840, "comment_id": 94785177, "body": "Nope, installed rvm, used that to install ruby, then nodejs, and rails. Attempted to gem install nokogiri, and I get the old &quot;libxml2 is missing&quot; and it crashes."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546122327, "post_id": 53971840, "comment_id": 94785208, "body": "Run <code>brew doctor</code> and <code>brew update</code> and <code>brew upgrade libxml2</code> and then <code>gem install nokogiri</code>."}, {"owner": {"reputation": 111, "user_id": 7448696, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZSsuwcBRCq8/AAAAAAAAAAI/AAAAAAAAAK4/5gpkOwbVXfI/photo.jpg?sz=128", "display_name": "Debora Weber-Wulff", "link": "https://stackoverflow.com/users/7448696/debora-weber-wulff"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546123923, "post_id": 53971840, "comment_id": 94785480, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/185921/discussion-between-debora-weber-wulff-and-anothermh\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 7448696, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZSsuwcBRCq8/AAAAAAAAAAI/AAAAAAAAAK4/5gpkOwbVXfI/photo.jpg?sz=128", "display_name": "Debora Weber-Wulff", "link": "https://stackoverflow.com/users/7448696/debora-weber-wulff"}, "edited": false, "score": 0, "creation_date": 1546127555, "post_id": 53974108, "comment_id": 94786156, "body": "Now getting  Permission denied @ rb_sysopen - /usr/local/rvm/gems/ruby-2.5.3/gems/nokogiri-1.9.1/LICENSE-D&zwnj;&#8203;EPENDENCIES.md I&#39;m afraid I have mixed up too many ruby environments. Is there any way to cleanly remove ALL rubys (I have 5 on my machine) and rails and start over with a clean slate? Mac OSX 10.13...."}, {"owner": {"reputation": 111, "user_id": 7448696, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZSsuwcBRCq8/AAAAAAAAAAI/AAAAAAAAAK4/5gpkOwbVXfI/photo.jpg?sz=128", "display_name": "Debora Weber-Wulff", "link": "https://stackoverflow.com/users/7448696/debora-weber-wulff"}, "edited": false, "score": 0, "creation_date": 1546129467, "post_id": 53974108, "comment_id": 94786485, "body": "I rebooted, and the permission denied went away...  If I use the installing directly command above, I get &quot;Successfully installed nokogiri-1.9.1&quot; BUT, when trying to start the rails server I again get &quot;WARNING: Nokogiri was built against LibXML version 2.9.4, but has dynamically loaded 2.7.8&quot; I&#39;ve re-installed rails, same problem. Any ideas?"}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "reply_to_user": {"reputation": 111, "user_id": 7448696, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZSsuwcBRCq8/AAAAAAAAAAI/AAAAAAAAAK4/5gpkOwbVXfI/photo.jpg?sz=128", "display_name": "Debora Weber-Wulff", "link": "https://stackoverflow.com/users/7448696/debora-weber-wulff"}, "edited": false, "score": 0, "creation_date": 1546134745, "post_id": 53974108, "comment_id": 94787181, "body": "Try the bundle lines."}], "tags": [], "owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "is_accepted": false, "score": 2, "last_activity_date": 1546134699, "last_edit_date": 1546134699, "creation_date": 1546125759, "answer_id": 53974108, "question_id": 53971840, "link": "https://stackoverflow.com/questions/53971840/ruby-gem-nokogiri-1-9-1-fails-on-mac-with-different-libxml-versions/53974108#53974108", "title": "Ruby gem Nokogiri 1.9.1 fails on Mac with different LibXML versions", "body": "<p>According to <a href=\"https://www.nokogiri.org/tutorials/installing_nokogiri.html\" rel=\"nofollow noreferrer\">them</a> it's:</p>\n\n<p>brew install libxml2</p>\n\n<h2>If installing directly</h2>\n\n<p>gem install nokogiri -- --use-system-libraries --with-xml2-include=$(brew --prefix libxml2)/include/libxml2</p>\n\n<h2>If using Bundle</h2>\n\n<p>bundle config build.nokogiri --use-system-libraries --with-xml2-include=$(brew --prefix libxml2)/include/libxml2</p>\n\n<p>bundle install</p>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 7448696, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZSsuwcBRCq8/AAAAAAAAAAI/AAAAAAAAAK4/5gpkOwbVXfI/photo.jpg?sz=128", "display_name": "Debora Weber-Wulff", "link": "https://stackoverflow.com/users/7448696/debora-weber-wulff"}, "edited": false, "score": 0, "creation_date": 1546179725, "post_id": 53976799, "comment_id": 94794211, "body": "After rvm gemset empty I had to first install bundle again :)  Still doesn&#39;t work, same error. Doesn&#39;t work for me....  So I stepped back to Ruby 2.3.3 with rvm. Here, Rails 5.2.2 is installed. I can create a new project, everything looks fine. Rails is on top of the Gemfile, and next is sqllite3 (without a version number, is that maybe the problem)? But  rails server  gives me the exact same bail I have been seeing since yesterday.  Any ideas? Reinstall sqllite3?"}], "tags": [], "owner": {"reputation": 2059, "user_id": 898266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53b79cb3899f87de42ab6fb7fdb70a4c?s=128&d=identicon&r=PG&f=1", "display_name": "bento", "link": "https://stackoverflow.com/users/898266/bento"}, "is_accepted": false, "score": 2, "last_activity_date": 1546345736, "last_edit_date": 1546345736, "creation_date": 1546165126, "answer_id": 53976799, "question_id": 53971840, "link": "https://stackoverflow.com/questions/53971840/ruby-gem-nokogiri-1-9-1-fails-on-mac-with-different-libxml-versions/53976799#53976799", "title": "Ruby gem Nokogiri 1.9.1 fails on Mac with different LibXML versions", "body": "<p>... it works on my machine ... ;-)</p>\n\n<p>Although the Nokogiri Tutorial suggests handcrafting your local environment in complicated ways - see \n<a href=\"https://www.nokogiri.org/tutorials/installing_nokogiri.html\" rel=\"nofollow noreferrer\">https://www.nokogiri.org/tutorials/installing_nokogiri.html</a>\n- if adhering to any of these suggestions at all, I would escape ahead and try the direction of updating the system library rather than trying to make Nokogiri build against the older one, if only for the fact that if you install the gems using bundler you wouldn't want to mess around with manual gem installations, anyway. (Except for troubleshooting to retry this one gem over and over again until it works and then make sure bundler can do it, as well - but installing Nokogiri isn't the problem here).</p>\n\n<p>... because: while you may not want to install on a web server at the end, adhering to the principle of declaring and isolating dependencies with the app as described in <a href=\"https://12factor.net/dependencies\" rel=\"nofollow noreferrer\">https://12factor.net/dependencies</a> is still a great idea.</p>\n\n<p>And bundler and rvm (or rbenv) are the tools for that in the ruby/rails world (or, for that matter, bundler and docker, which I wouldn't recommend in that situation).</p>\n\n<p>If it still doesn't work with rvm, I would do the following: </p>\n\n<ul>\n<li>use rvm with gemsets. </li>\n<li><p>make sure that the current shell uses the exact gemset and ruby version you want. Always.</p>\n\n<p><code>rvm use 2.5.1@my-gemset --create --ruby-version</code></p></li>\n</ul>\n\n<p>(with the appropriate ruby version) creates a ruby-version+gemset combination and creates .ruby-* files in the dir making sure this gemset is used when you cd in this dir. all my rails-apps have this.\nyour path above shows that rvm throws all gems for one ruby version in one directory)</p>\n\n<ul>\n<li>delete all gems in the gemset: <code>$ rvm gemset empty</code></li>\n<li>and reinstall them: </li>\n<li>run: <code>$ gem install bundler</code></li>\n<li>and then: <code>$ bundle install</code></li>\n</ul>\n\n<p>(this is a rude but efficient way to have rvm make sure that your app / rails / bundler won't pick up another version of any gem lingering around in your system-wide or rvm-ruby-version-wide gem folder - none of your logs showed which version of Nokogiri was actually running)</p>\n\n<p>you can check on the gems in your gemset with `ls $(rvm gemset dir)/gems</p>\n\n<hr>\n\n<p>nb: one of the Stack Overflow answers on this topic suggests putting <code>gem rails</code> on the top of the Gemfile: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/16921700/how-to-load-correct-version-of-dynamic-libraries-and-gems-libxml-nokogiri-wit\">How to load correct version of dynamic libraries and gems (libxml, Nokogiri) within a custom Rails engine gem?</a></p>\n\n<p>and indeed, Gemfile order matters starting up rails: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/16724566/does-the-order-of-gems-in-your-gemfile-make-a-difference\">Does the order of gems in your Gemfile make a difference?</a></p>\n\n<p>so this might be a good idea, as well. </p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 7448696, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZSsuwcBRCq8/AAAAAAAAAAI/AAAAAAAAAK4/5gpkOwbVXfI/photo.jpg?sz=128", "display_name": "Debora Weber-Wulff", "link": "https://stackoverflow.com/users/7448696/debora-weber-wulff"}, "is_accepted": false, "score": 0, "last_activity_date": 1546181821, "creation_date": 1546181821, "answer_id": 53978653, "question_id": 53971840, "link": "https://stackoverflow.com/questions/53971840/ruby-gem-nokogiri-1-9-1-fails-on-mac-with-different-libxml-versions/53978653#53978653", "title": "Ruby gem Nokogiri 1.9.1 fails on Mac with different LibXML versions", "body": "<p>Alright, I found a bizarre sequence that works enough for me to get through an \"Introduction to Rails\" lecture:</p>\n\n<p>Go <em>back</em> to Ruby 2.3.3 with <code>rvm use 2.3.3</code>where rails 5.2.2 was still installed. I re-installed sqlite3 with <code>gem install sqlite3</code>and then <code>build install</code>. <em>Now</em> I can start a server!</p>\n\n<p>I tried it again with Ruby 2.5.3 in a new rvm gemset. sqlite3 is installable, <code>gem install rails</code> gets a permission error, so I have to <code>rvmsudo gem install rails</code> and this bails with the nokogiri problem. I tried to <code>bundle install</code> after setting </p>\n\n<p><code>bundle config build.nokogiri --use-system-libraries --with-xml2-include=$(brew --prefix libxml2)/include/libxml2</code></p>\n\n<p>and I just get <code>Could not locate Gemfile</code></p>\n\n<p>I can go back to 2.3.3 and so that's what I'm going to do for now. But something is screwed up somewhere.... Thanks for all the help!</p>\n"}], "owner": {"reputation": 111, "user_id": 7448696, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZSsuwcBRCq8/AAAAAAAAAAI/AAAAAAAAAK4/5gpkOwbVXfI/photo.jpg?sz=128", "display_name": "Debora Weber-Wulff", "link": "https://stackoverflow.com/users/7448696/debora-weber-wulff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1546345736, "creation_date": 1546104881, "question_id": 53971840, "link": "https://stackoverflow.com/questions/53971840/ruby-gem-nokogiri-1-9-1-fails-on-mac-with-different-libxml-versions", "title": "Ruby gem Nokogiri 1.9.1 fails on Mac with different LibXML versions", "body": "<p>I really hate these updates in Ruby/Rails....</p>\n\n<p>I have a Mac High Sierra OSX 10.13. I last used Ruby/Rails about a year ago, so of course I needed to update stuff. I have gone around and around the update carousell, but what I am stuck on is this:</p>\n\n<pre><code>Nokogiri was built against LibXML version 2.9.4, but has dynamically loaded 2.7.8\n</code></pre>\n\n<p>I find lots of questions with older versions of Nokogiri and LibXML, but none with these newer versions. I've tried all of the answers, too.</p>\n\n<p>I think the problem might be that I updated xcode (although I never use it, I prefer sublime) before I left for traveling, and now I have the xcode for OSX 10.14 installed. </p>\n\n<p>Is there any way I can make Nokogiri build against 2.7.8? I only wanted to demonstrate to a class how cool Ruby on Rails is (and right now I don't see it as being cool at all). I tried</p>\n\n<pre><code>gem install nokogiri -- --use-system-libraries --with-libxml-prefix=/usr/local/Cellar/libxml2/2.7.8\n</code></pre>\n\n<p>but it still built against libxml2 2.9.4!</p>\n\n<p>Would love to get this solved in 2018 :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "haml"], "answers": [{"tags": [], "owner": {"reputation": 7878, "user_id": 630780, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fskbD.png?s=128&g=1", "display_name": "Carl Markham", "link": "https://stackoverflow.com/users/630780/carl-markham"}, "is_accepted": false, "score": 0, "last_activity_date": 1546101726, "creation_date": 1546101726, "answer_id": 53971399, "question_id": 53971351, "link": "https://stackoverflow.com/questions/53971351/ruby-on-rails-haml-navigation-bar-hamburger-menu/53971399#53971399", "title": "Ruby on Rails haml navigation bar hamburger menu", "body": "<p>Have a look at the <a href=\"https://getbootstrap.com/docs/3.3/components/#navbar\" rel=\"nofollow noreferrer\">documentation for the navbar component</a>.</p>\n\n<p>You will need to add a button for the hamburger menu with the classes <code>navbar-toggle collapsed</code> next to your <code>navbar-brand</code> anchor.</p>\n\n<p>You will also need to add your links in to a div with the classes <code>collapse navbar-collapse</code> which is what is triggered by your hamburger menu via <code>data-target</code> attribute.</p>\n"}], "owner": {"reputation": 89, "user_id": 9137585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c02e7b117fd0ecc534a70305e525a3a?s=128&d=identicon&r=PG&f=1", "display_name": "Freddee", "link": "https://stackoverflow.com/users/9137585/freddee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 518, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1581309290, "creation_date": 1546101354, "last_edit_date": 1581309290, "question_id": 53971351, "link": "https://stackoverflow.com/questions/53971351/ruby-on-rails-haml-navigation-bar-hamburger-menu", "title": "Ruby on Rails haml navigation bar hamburger menu", "body": "<p>I have a problem with my ruby on rails navigation bar. I am using haml as well as the bootstrap gem.</p>\n\n<p>Here is my application.html.haml</p>\n\n<pre><code>!!!\n%html\n%head\n  %title GameX\n  = stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' =&gt; true \n  = javascript_include_tag 'application', 'data-turbolinks-track' =&gt; true\n  = csrf_meta_tags\n\n%body\n  %nav.navbar.navbar-inverse\n    .container\n        %ul.nav.navbar-nav.navbar-left\n          .navbar-brand= link_to \"GameX\", root_path\n\n      - if user_signed_in?\n        %ul.nav.navbar-nav.navbar-left\n          %li= link_to \"New GameX\", new_pic_path\n          %li= link_to \"Settings\", edit_user_registration_path\n          %li= link_to \"Sign Out\", destroy_user_session_path, method: :delete\n      - else\n        %ul.nav.navbar-nav.navbar-left\n          %li= link_to \"Sign Up\", new_user_registration_path\n          %li= link_to \"Log In\", new_user_session_path\n\n  .container\n    -flash.each do |name, msg|\n      =content_tag :div, msg, class: \"alert alert-info\"\n\n    =yield  \n</code></pre>\n\n<p>I would like to add a hamburger menu that is responsive. So when the browser becomes small the hamburger menu appears next to the navbar brand and is clickable. How do I achieve so?</p>\n\n<p>I've tried searching for a valid tutorial online but they all seem to incorporate something else.</p>\n\n<p>EDIT: I have gotten rid of the problem where when the browser is small the link stays next to the brand.</p>\n"}, {"tags": ["ruby", "performance", "compiler-construction", "access-modifiers", "dynamic-languages"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546116222, "post_id": 53970800, "comment_id": 94784046, "body": "Your first question asks us to read an 83 page book to understand your question. Not happening. You can read more about the Ruby and JIT <a href=\"https://medium.com/@k0kubun/ruby-2-6-jit-progress-and-future-84e0a830ecbf\" rel=\"nofollow noreferrer\">here</a>. For your second question, read more about Ruby method lookups <a href=\"https://stackoverflow.com/q/50286933/3784008\">here</a> and <a href=\"https://gist.github.com/damien-roche/351bf4e7991449714533\" rel=\"nofollow noreferrer\">here</a>. The performance impact is what it is: all lookups are the same."}, {"owner": {"reputation": 10833, "user_id": 560114, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/abbd78d1a92349bb4ad791d6b3ca485c?s=128&d=identicon&r=PG", "display_name": "Matt Browne", "link": "https://stackoverflow.com/users/560114/matt-browne"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546121445, "post_id": 53970800, "comment_id": 94785029, "body": "@anothermh Thanks for your comment. Regarding the first question, I&#39;ll rephrase it...I mentioned the book only to demonstrate that I had done some initial research; I wasn&#39;t expecting anyone to read it. I was simply saying I wasn&#39;t sure if the information in the book was relevant to the main Ruby implementation but that wasn&#39;t my actual question."}, {"owner": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 2, "creation_date": 1546165658, "post_id": 53970800, "comment_id": 94791289, "body": "@MattBrowne You might like to read <i>Ruby Under The Microscope</i> which is a fantastic book that goes into a lot of detail about how the VM works in a very approachable way. Although it\u2019s subject is the Ruby VM, it also covers quite a lot of general topics that will apply to any interpreted language."}], "owner": {"reputation": 10833, "user_id": 560114, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/abbd78d1a92349bb4ad791d6b3ca485c?s=128&d=identicon&r=PG", "display_name": "Matt Browne", "link": "https://stackoverflow.com/users/560114/matt-browne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1546121775, "creation_date": 1546096949, "last_edit_date": 1546121775, "question_id": 53970800, "link": "https://stackoverflow.com/questions/53970800/implementation-and-performance-of-access-modifiers-in-ruby", "title": "Implementation and performance of access modifiers in Ruby", "body": "<p>I am doing a little research into access modifiers in dynamic languages and I want to learn more about how Ruby implements them. I am specifically interested in whether or not the access control checks occur at run-time or if there is any ahead-of-time or evaluation-time optimization that happens, perhaps thanks to a just-in-time compilation step. And if there is no such optimization in current Ruby implementations, I'd still be interested to know if this would be possible in theory.</p>\n\n<p>Also, if it's true that <code>private</code> or <code>protected</code> methods require a run-time check when the method is called to ensure that access should be allowed, how significant is the effect on performance? I'm guessing that this run-time check would need to happen for all method calls, including public ones, so does that mean that all method calls are inherently slower than they would be if Ruby didn't have access modifiers?</p>\n\n<p>I realize these are rather technical questions about internals of the Ruby interpreter and that the best way to understand this in detail would be to read the Ruby source code. But I am not a Ruby developer and am more interested in learning the principles that apply to dynamic languages and access modifiers in general, so I'm hoping someone here might be able to share their knowledge of Ruby internals.</p>\n\n<hr>\n\n<p>Research I have done so far:</p>\n\n<ul>\n<li>Some background reading on the implementation of compilers vs. interpreters and static and dynamic type systems (I also have an understanding of how access modifiers work in compiled languages...obviously a bit more fuzzy when it comes to dynamic languages)</li>\n<li>I came across a book (<em><a href=\"https://books.google.com/books?id=Jn52DQAAQBAJ&amp;printsec=frontcover#v=onepage&amp;q&amp;f=false\" rel=\"nofollow noreferrer\">Extending a dynamic programming language and runtime environment with access control</a></em>) that talks about this problem in general and also discusses the GemStone Smalltalk VM for Ruby, but I don't know if the implementation details it discusses are also true of the main/official Ruby interpreter. But to be clear, I'm not asking anyone here to read or look at the book, just providing some context.</li>\n</ul>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver"], "comments": [{"owner": {"reputation": 14553, "user_id": 3446126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I37Df.png?s=128&g=1", "display_name": "Todor Minakov", "link": "https://stackoverflow.com/users/3446126/todor-minakov"}, "edited": false, "score": 0, "creation_date": 1546098129, "post_id": 53970781, "comment_id": 94779386, "body": "Is there the search suggestion box - which would obfuscate the button? You can hide it by sending the ESC key (I&#39;m sure you can find its code easily ;) to the search box."}, {"owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "reply_to_user": {"reputation": 14553, "user_id": 3446126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I37Df.png?s=128&g=1", "display_name": "Todor Minakov", "link": "https://stackoverflow.com/users/3446126/todor-minakov"}, "edited": false, "score": 0, "creation_date": 1546099713, "post_id": 53970781, "comment_id": 94779803, "body": "@Todor I can see in the browser that the button isn&#39;t obfuscated..;cos sometimes I have done escape manually.   But I also did escape with the code, and escape works to get rid of the suggestion box, but still same error when trying to click the button"}, {"owner": {"reputation": 53073, "user_id": 16148, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XTzm1.jpg?s=128&g=1", "display_name": "Corey Goldberg", "link": "https://stackoverflow.com/users/16148/corey-goldberg"}, "edited": false, "score": 0, "creation_date": 1546151970, "post_id": 53970781, "comment_id": 94789063, "body": "you can navigate to the SERP directly by passing a query string: <code>https:&#47;&#47;www.google.com&#47;search?q=foo</code>"}, {"owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "reply_to_user": {"reputation": 53073, "user_id": 16148, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XTzm1.jpg?s=128&g=1", "display_name": "Corey Goldberg", "link": "https://stackoverflow.com/users/16148/corey-goldberg"}, "edited": false, "score": 0, "creation_date": 1546168558, "post_id": 53970781, "comment_id": 94791804, "body": "@CoreyGoldberg did you really believe that somebody asking this level of question is not going to know that? the only thing you&#39;ve shown me there is that there is an abbreviation SERP.  Next you will post comments to IT Technicians telling them they can restart windows."}, {"owner": {"reputation": 53073, "user_id": 16148, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XTzm1.jpg?s=128&g=1", "display_name": "Corey Goldberg", "link": "https://stackoverflow.com/users/16148/corey-goldberg"}, "edited": false, "score": 0, "creation_date": 1546267508, "post_id": 53970781, "comment_id": 94814700, "body": "@barlop, &quot;this level of question&quot;?  I&#39;d consider that somewhere between &#39;complete newbie&#39; and &#39;confused beginner&#39; level.. so to answer your question... yes, I really did believe that."}], "answers": [{"comments": [{"owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "edited": false, "score": 0, "creation_date": 1546100441, "post_id": 53971223, "comment_id": 94780000, "body": "source was this youtube video by DevNami   <a href=\"https://www.youtube.com/watch?v=rL7V9x94OwM\" rel=\"nofollow noreferrer\">youtube.com/watch?v=rL7V9x94OwM</a>. (often useful to skip to 1:20 in any of the videos in his series to skip him entering lines like <code>require ...</code> and so on and typing all his initialisation code that&#39;s the same in all of them)"}, {"owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "edited": false, "score": 0, "creation_date": 1546100690, "post_id": 53971223, "comment_id": 94780068, "body": "also, <a href=\"https://stackoverflow.com/questions/7565562/how-to-execute-javascript-in-ruby-written-webdriver-test\" title=\"how to execute javascript in ruby written webdriver test\">stackoverflow.com/questions/7565562/&hellip;</a>  has a similarly simple example with it"}, {"owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "edited": false, "score": 0, "creation_date": 1546111776, "post_id": 53971223, "comment_id": 94782974, "body": "jeff&#39;s answer(with the clarification I added to it), explains why the click I did in my question, didn&#39;t work, though doesn&#39;t explain why(in contrast), this click works!"}], "tags": [], "owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "is_accepted": false, "score": 0, "last_activity_date": 1546168944, "last_edit_date": 1546168944, "creation_date": 1546100353, "answer_id": 53971223, "question_id": 53970781, "link": "https://stackoverflow.com/questions/53970781/in-ruby-with-selenium-difficulty-clicking-google-search/53971223#53971223", "title": "In Ruby, with selenium, difficulty clicking Google Search", "body": "<p>But you can do the click with javascript (sending javascript to the browser).</p>\n\n<pre><code>b=driver.find_element(:name, \"btnK\")\n\ndriver.execute_script(\"arguments[0].click();\",b)\n</code></pre>\n\n<p>Jeff explains why the javascript method(selenium with javascript), works on either button but the non-javascript method(selenium without javascript) works only on one button, he wrote \"Both of the buttons would work, the JS click will click on any element no matter where it is... or if it's visible, etc. Selenium was designed to interact with the page as a user would so it was unable to click on the element due to the error.\"</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3956566"}, "edited": false, "score": 0, "creation_date": 1546127593, "post_id": 53971329, "comment_id": 94786163, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/185923/discussion-on-answer-by-rajagopalan-in-ruby-with-selenium-difficulty-clicking\">moved to chat</a>."}, {"owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "edited": false, "score": 0, "creation_date": 1546133212, "post_id": 53971329, "comment_id": 94787042, "body": "@YvetteColomb how long will that last before getting deleted?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3956566"}, "reply_to_user": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "edited": false, "score": 0, "creation_date": 1546148672, "post_id": 53971329, "comment_id": 94788690, "body": "@barlop the chat will stay there indefinitely."}], "tags": [], "owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "is_accepted": false, "score": 2, "last_activity_date": 1546101163, "creation_date": 1546101163, "answer_id": 53971329, "question_id": 53970781, "link": "https://stackoverflow.com/questions/53970781/in-ruby-with-selenium-difficulty-clicking-google-search/53971329#53971329", "title": "In Ruby, with selenium, difficulty clicking Google Search", "body": "<p>This is what I told you to use WATIR, If you had used WATIR, this problem wouldn't have arrived. The problem in your code, it's not waiting for visibility. Recently Chrome Driver has added implicit wait for click as well, so it would wait for visibility if you set the implicit wait. Otherwise move to WATIR which is a good wrapper which doesn't wait via driver, In WATIR waiting for element status happens from local language binding, so use this selenium code</p>\n\n<pre><code>require 'selenium-webdriver'\ndriver = Selenium::WebDriver.for :chrome\ndriver.manage.timeouts.implicit_wait = 10\ndriver.navigate().to(\"http://www.google.com\")\ndriver.find_element(:name, \"q\").send_keys \"fff\"\ndriver.find_element(:name, \"btnK\").click\n</code></pre>\n\n<p>Remember this selenium code wouldn't work for firefox because implicit wait for click is not added yet for firefox. </p>\n\n<p>Since WATIR is handling the timing from local language binding, it doesn't matter whether you use Chrome or Firefox, it would perfectly work</p>\n\n<p>WATIR Code (Default is Chrome)</p>\n\n<pre><code>require 'watir'\nb=Watir::Browser.new\nb.goto 'www.google.com'\nb.text_field(name: 'q').set 'fff'\nb.button(name: 'btnK').click\n</code></pre>\n\n<p>If you want to drive Firefox</p>\n\n<pre><code>b=Watir::Browser.new :firefox\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "edited": false, "score": 0, "creation_date": 1546108695, "post_id": 53972237, "comment_id": 94782189, "body": "very strange that the javascript worked!(see the partial answer I posted), &#39;cos that was done on the same button that click didn&#39;t work on!"}, {"owner": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "reply_to_user": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "edited": false, "score": 1, "creation_date": 1546112964, "post_id": 53972237, "comment_id": 94783238, "body": "@barlop Both of the buttons would work, the JS click will click on any element no matter where it is... or if it&#39;s visible, etc. Selenium was designed to interact with the page as a user would so it was unable to click on the element due to the error."}, {"owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "edited": false, "score": 0, "creation_date": 1546116257, "post_id": 53972237, "comment_id": 94784050, "body": "Interesting. Looking at selenium without javascript and with C#, I think C# gives an element not visible exception in the case that one hasn&#39;t waited. But say one waits. Then another interesting thnig is that in C# I think it might be the other way around, so the first button is the one I want to click. If I try to click the second one , then it gives a state element reference exception.  (anyhow, not important, and I have some issue with VS right now so can&#39;t double check easily)."}], "tags": [], "owner": {"reputation": 18005, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "is_accepted": true, "score": 2, "last_activity_date": 1546111508, "last_edit_date": 1546111508, "creation_date": 1546107874, "answer_id": 53972237, "question_id": 53970781, "link": "https://stackoverflow.com/questions/53970781/in-ruby-with-selenium-difficulty-clicking-google-search/53972237#53972237", "title": "In Ruby, with selenium, difficulty clicking Google Search", "body": "<p>While discussing this problem in the comments, I wrote some C# code to demonstrate how we wait for clickable in C#</p>\n\n<pre><code>new WebDriverWait(Driver, TimeSpan.FromSeconds(5)).Until(ExpectedConditions.ElementToBeClickable(By.Name(\"btnK\"))).Click();\n</code></pre>\n\n<p>In the process of writing the C# code I posted, I think I see what the issue is. When you start typing in the search box, a dropdown appears that contains the suggested searches. This covers the \"Google Search\" button that you are trying to click... BUT another \"Google Search\" button appears at the bottom of the dropdown itself. You should print a count of the <code>(:name, \"btnK\")</code> element(s)... I'm assuming it will print 2 (if a proper wait is added). From there, you just need to click the one that is on top.</p>\n\n<p>Another option would be to send a \\r\\n at the end of your search string and avoid this whole issue... or you could just navigate to the final search URL and save even more headaches and time.</p>\n\n<p><strong>Added note from barlop</strong></p>\n\n<p>To clarify, this has nothing to do with the suggestions popup showing(and having to get rid of the popup).. and nothing to do with having a wait (Since I was working with IRB, I was naturally waiting). And I'd already clicked outside or hit escape to get rid of the popup. The issue was, and Jeff's answer alerted me to this - Even after the popup is gone, there are still two buttons with that btnK name. So, using <code>find_elements</code> rather than <code>find_element</code>, and running <code>.click</code> on the second one works!  (Also, using <code>find_elements</code>(plural) for the name attribute makes sense, since as noted in an answer herehttps://stackoverflow.com/questions/5518458/does-a-name-attribute-have-to-be-unique-in-a-html-document. the name attribute is not unique / not a unique identifier. </p>\n"}], "owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 505, "favorite_count": 1, "accepted_answer_id": 53972237, "answer_count": 3, "score": 0, "last_activity_date": 1546168944, "creation_date": 1546096775, "last_edit_date": 1546168703, "question_id": 53970781, "link": "https://stackoverflow.com/questions/53970781/in-ruby-with-selenium-difficulty-clicking-google-search", "title": "In Ruby, with selenium, difficulty clicking Google Search", "body": "<p>I get this far, opening the firefox browser, navigating to google, and finding the google search element</p>\n\n<pre><code>irb(main):001:0&gt; require 'selenium-webdriver'\n=&gt; true\n\nirb(main):002:0&gt; driver = Selenium::WebDriver.for:firefox\n=&gt; #&lt;Selenium::WebDriver::Firefox::Marionette::Driver:0x..fb3c81796cc82b708 browser=:firefox&gt;\n\nirb(main):003:0&gt; driver.navigate().to(\"http://www.google.com\")\n=&gt; nil\n\nirb(main):188:0&gt; driver.find_element(:name, \"q\").send_keys \"fff\"\n=&gt; nil    \n\nirb(main):112:0&gt; driver.find_element(:name, \"btnK\");\n=&gt; #&lt;Selenium::WebDriver::Element:0x5fb450f4379c50ce id=\"d767311c-27a2-3544-8f11-e4edc9736588\"&gt;\n\nirb(main):113:0&gt; driver.find_element(:name, \"btnK\").attribute('value');\n=&gt; \"Google Search\"\n</code></pre>\n\n<p>But I can't manage to click it!</p>\n\n<pre><code>irb(main):114:0&gt; driver.find_element(:name, \"btnK\").click\nTraceback (most recent call last):\n       16: from /usr/local/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/remote/w3c/bridge.rb:552:in `execute'\n       15: from /usr/local/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/remote/bridge.rb:166:in `execute'\n       14: from /usr/local/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/remote/http/common.rb:62:in `call'\n       13: from /usr/local/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/remote/http/default.rb:104:in `request'\n       12: from /usr/local/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/remote/http/common.rb:84:in `create_response'\n       11: from /usr/local/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/remote/http/common.rb:84:in `new'\n       10: from /usr/local/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/remote/response.rb:32:in `initialize'\n        9: from /usr/local/lib/ruby/gems/2.5.0/gems/selenium-webdriver-3.141.0/lib/selenium/webdriver/remote/response.rb:69:in `assert_ok'\n        8: from clickElement@chrome://marionette/content/listener.js:1209:5\n        7: from navigate@chrome://marionette/content/listener.js:409:13\n        6: from navigate/&lt;@chrome://marionette/content/listener.js:410:13\n        5: from clickElement/&lt;@chrome://marionette/content/listener.js:1210:14\n        4: from interaction.clickElement@chrome://marionette/content/interaction.js:130:11\n        3: from webdriverClickElement@chrome://marionette/content/interaction.js:159:11\n        2: from ElementNotInteractableError@chrome://marionette/content/error.js:286:5\n        1: from WebDriverError@chrome://marionette/content/error.js:178:5\nSelenium::WebDriver::Error::ElementNotInteractableError (Element &lt;input name=\"btnK\" type=\"submit\"&gt; could not be scrolled into view)\nirb(main):115:0&gt; \n</code></pre>\n\n<p>It says that the element \"could not be scrolled into view\" !</p>\n\n<p>I can do <code>driver.find_element(:tag_name, \"body\").send_keys :page_down;</code> which would page down. Which is mentioned Looking at ruby selenium documentation for send_keys <a href=\"https://www.rubydoc.info/gems/selenium-webdriver/Selenium%2FWebDriver%2FElement%3Asend_keys\" rel=\"nofollow noreferrer\">https://www.rubydoc.info/gems/selenium-webdriver/Selenium%2FWebDriver%2FElement%3Asend_keys</a> . I see a list of key codes  <a href=\"https://www.rubydoc.info/gems/selenium-webdriver/Selenium/WebDriver/Keys#KEYS-constant\" rel=\"nofollow noreferrer\">https://www.rubydoc.info/gems/selenium-webdriver/Selenium/WebDriver/Keys#KEYS-constant</a> . And also listed <a href=\"https://github.com/SeleniumHQ/selenium/blob/master/rb/lib/selenium/webdriver/common/keys.rb\" rel=\"nofollow noreferrer\">https://github.com/SeleniumHQ/selenium/blob/master/rb/lib/selenium/webdriver/common/keys.rb</a> .   Or I can page down manually. But scrolling (at least in the normal sense of the term) doesn't seem to be the issue, I still get that error.  Maybe it's in a frame I can switch to and I don't know which.</p>\n\n<p>The button is of course visible. It's just a regular google search page.</p>\n\n<p>I can find the button fine but I can't see how to click it, as <code>.click</code> isn't working for me. </p>\n\n<p><strong>added</strong></p>\n\n<p>in reply to a comment asking me if the google suggestions box is obfuscating the button.  I can see in the browser that the button isn't obfuscated 'cos sometimes I have done escape manually, or clicked the background window(to get rid of that. I am using IRB so running each statement manually so I have time to do that). But I also did escape with the code, and escape works to get rid of the suggestion box, but still same error when trying to click the button</p>\n"}, {"tags": ["python", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 2275, "user_id": 10419791, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zgtw4.jpg?s=128&g=1", "display_name": "Joey Coder", "link": "https://stackoverflow.com/users/10419791/joey-coder"}, "edited": false, "score": 1, "creation_date": 1546097342, "post_id": 53970415, "comment_id": 94779212, "body": "Thanks a lot that helped"}, {"owner": {"reputation": 318, "user_id": 1877501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46aabbe257541e8efd34e98f0e20c08c?s=128&d=identicon&r=PG", "display_name": "Londerson Ara&#250;jo", "link": "https://stackoverflow.com/users/1877501/londerson-ara%c3%bajo"}, "edited": false, "score": 2, "creation_date": 1546098270, "post_id": 53970415, "comment_id": 94779414, "body": "Another observation, try don&#39;t mix styles of variable or function names like <code>camelCase</code> in <code>clientId</code> and <code>snake_case</code> in <code>user_id</code>. Use only one."}], "tags": [], "owner": {"reputation": 4739, "user_id": 5403468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZJ8BE.jpg?s=128&g=1", "display_name": "Tiw", "link": "https://stackoverflow.com/users/5403468/tiw"}, "is_accepted": true, "score": 0, "last_activity_date": 1546097570, "last_edit_date": 1546097570, "creation_date": 1546093535, "answer_id": 53970415, "question_id": 53970223, "link": "https://stackoverflow.com/questions/53970223/convert-ruby-example-to-python/53970415#53970415", "title": "Convert Ruby example to Python", "body": "<p>Short answer: correct.  </p>\n\n<p><code>=&gt;</code> is actually the original Hash operator in ruby.<br>\nand <code>:</code> is a later syntactic sugar of <code>=&gt;</code> and symbol <code>:</code> combined.    </p>\n\n<p>Note that it is not the same between <code>key: value</code> and <code>key : value</code>,<br>\nthe former one actually is the same of <code>:key =&gt; value</code>,<br>\nbut the latter is <code>key =&gt; value</code>, i.e. <code>key</code> in the second one is a variable.<br>\n <code>:key</code> in ruby is a symbol, in many cases can be treated as string <code>'key'</code>.</p>\n\n<p>So in your question, you can treat <code>user_id</code>, <code>event</code>, <code>properties</code>, <code>context</code>, and <code>clientId</code> as strings, but <code>linkText</code> is a variable. </p>\n\n<p>And  </p>\n\n<pre><code>  context: {\n    'Google Analytics' =&gt; {\n        clientId: '1033501218.1368477899'\n    }\n  } \n</code></pre>\n\n<p>is same as  </p>\n\n<pre><code>'context' : { 'Google Analytics' : { 'clientId' : '1033501218.1368477899'} }\n</code></pre>\n\n<p>in python.</p>\n"}], "owner": {"reputation": 2275, "user_id": 10419791, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zgtw4.jpg?s=128&g=1", "display_name": "Joey Coder", "link": "https://stackoverflow.com/users/10419791/joey-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 53970415, "answer_count": 1, "score": -3, "last_activity_date": 1546097570, "creation_date": 1546091752, "question_id": 53970223, "link": "https://stackoverflow.com/questions/53970223/convert-ruby-example-to-python", "title": "Convert Ruby example to Python", "body": "<p>How would you write that Ruby example in Python?\nI am confused by the <code>'Google Analytics' =&gt;</code>. My best guess is changing it to :. Is that correct?</p>\n\n<pre><code>Analytics.track(\n  user_id: '019mr8mf4r',\n  event: 'Clicked a Link',\n  properties: {\n    linkText     : 'Next'\n  },\n  context: {\n    'Google Analytics' =&gt; {\n        clientId: '1033501218.1368477899'\n    }\n  }\n)\n</code></pre>\n"}, {"tags": ["ruby", "git", "rugged"], "comments": [{"owner": {"reputation": 8374, "user_id": 3691891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dcCUM.jpg?s=128&g=1", "display_name": "Arkadiusz Drabczyk", "link": "https://stackoverflow.com/users/3691891/arkadiusz-drabczyk"}, "edited": false, "score": 1, "creation_date": 1546089750, "post_id": 53969651, "comment_id": 94777310, "body": "How exactly does <code>git branch --list | head -1 | sed -E &#39;s&#47; *&#47;&#47;&#39;</code> get the <i>default</i> branch? It only returns the first branch from the list of branches."}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1546093007, "post_id": 53969651, "comment_id": 94778106, "body": "<a href=\"https://stackoverflow.com/questions/28666357/git-how-to-get-default-branch\" title=\"git how to get default branch\">stackoverflow.com/questions/28666357/&hellip;</a>"}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1546093017, "post_id": 53969651, "comment_id": 94778108, "body": "<code>git symbolic-ref --short HEAD</code>"}, {"owner": {"reputation": 934, "user_id": 4341322, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/BvBSy.jpg?s=128&g=1", "display_name": "Katrin Leinweber", "link": "https://stackoverflow.com/users/4341322/katrin-leinweber"}, "reply_to_user": {"reputation": 8374, "user_id": 3691891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dcCUM.jpg?s=128&g=1", "display_name": "Arkadiusz Drabczyk", "link": "https://stackoverflow.com/users/3691891/arkadiusz-drabczyk"}, "edited": false, "score": 0, "creation_date": 1546112452, "post_id": 53969651, "comment_id": 94783148, "body": "@ArkadiuszDrabczyk: I guessed that the list had the HEAD branch on top. In my use so far, this worked, also when the default branch on GitHub was called <code>dev</code> or <code>src</code>."}, {"owner": {"reputation": 934, "user_id": 4341322, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/BvBSy.jpg?s=128&g=1", "display_name": "Katrin Leinweber", "link": "https://stackoverflow.com/users/4341322/katrin-leinweber"}, "edited": false, "score": 0, "creation_date": 1546112476, "post_id": 53969651, "comment_id": 94783154, "body": "I explicitly that Q already, see the Linked section to the top right of this ;-) I&#39;ll add that suggestion to the Bash script, but the point of this question is how to port that behaviour to Ruby."}, {"owner": {"reputation": 8374, "user_id": 3691891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dcCUM.jpg?s=128&g=1", "display_name": "Arkadiusz Drabczyk", "link": "https://stackoverflow.com/users/3691891/arkadiusz-drabczyk"}, "edited": false, "score": 0, "creation_date": 1546113071, "post_id": 53969651, "comment_id": 94783266, "body": "Sorry but I still don&#39;t understand what <i>deafult</i> branch means to you - is it a) currently checked-out branch b) branch is automatically checked-out after cloning the repository?"}, {"owner": {"reputation": 934, "user_id": 4341322, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/BvBSy.jpg?s=128&g=1", "display_name": "Katrin Leinweber", "link": "https://stackoverflow.com/users/4341322/katrin-leinweber"}, "edited": false, "score": 0, "creation_date": 1546168226, "post_id": 53969651, "comment_id": 94791752, "body": "The one that is specified in GitHub under <code>&#47;settings&#47;branches</code>, because repo owners often request PRs to be submitted against that one. If <code>git clone --depth=\u2026</code> clones that one by default, the problem is already solved."}], "owner": {"reputation": 934, "user_id": 4341322, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/BvBSy.jpg?s=128&g=1", "display_name": "Katrin Leinweber", "link": "https://stackoverflow.com/users/4341322/katrin-leinweber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1555966934, "creation_date": 1546087503, "last_edit_date": 1555966934, "question_id": 53969651, "link": "https://stackoverflow.com/questions/53969651/how-to-get-a-git-repositorys-default-branch-in-rubys-rugged-gem", "title": "How to get a git repository&#39;s default branch in Ruby&#39;s &quot;rugged&quot; gem?", "body": "<p>Related to <a href=\"https://stackoverflow.com/questions/28666357/git-how-to-get-default-branch\">git - how to get default branch?</a></p>\n\n<p>I'm trying to port a Bash script to Ruby. The script uses <code>git symbolic-ref --short HEAD</code> to get a repo's default branch. </p>\n\n<p>Is there a way to combine <a href=\"https://github.com/libgit2/rugged#branches\" rel=\"nofollow noreferrer\">rugged's <code>repo.branches.each_name(:local)</code></a> with some other command to find the default branch?</p>\n\n<p>Or am I thinking too complicated and there is a useful default in rugged that I am missing? The script needs to continue by creating a new branch off the default/latest one, check-it out, commit something standardized, push the new branch, and open a pull request against that base branch.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 10840729, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YvZ-ZENdYLc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbu3HH78kkPEbx5PGCktp9p5VuVQg/mo/photo.jpg?sz=128", "display_name": "Artem", "link": "https://stackoverflow.com/users/10840729/artem"}, "edited": false, "score": 0, "creation_date": 1546089979, "post_id": 53969866, "comment_id": 94777369, "body": "try to    set_commentable in    News::CommentsController , not work :("}, {"owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "reply_to_user": {"reputation": 45, "user_id": 10840729, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YvZ-ZENdYLc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbu3HH78kkPEbx5PGCktp9p5VuVQg/mo/photo.jpg?sz=128", "display_name": "Artem", "link": "https://stackoverflow.com/users/10840729/artem"}, "edited": false, "score": 0, "creation_date": 1546090178, "post_id": 53969866, "comment_id": 94777433, "body": "Please update your question with the changes and error that you receive"}], "tags": [], "owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "is_accepted": true, "score": 1, "last_activity_date": 1546089117, "creation_date": 1546089117, "answer_id": 53969866, "question_id": 53969494, "link": "https://stackoverflow.com/questions/53969494/how-to-fix-rails-ajax-error-in-site-console/53969866#53969866", "title": "How to fix &#39;Rails.ajax&#39; error in site Console?", "body": "<p>The first suggestion - comment <code>require rails-ujs</code> until you solve the issue. It will be easier to debug.</p>\n\n<p>Then, the issue is that as a <code>params[:news_id]</code> you are passing news slug (<code>artifact-v-spiske-liderov-prodazh-steam-po-itogam-2018-goda</code>) instead of news id. One solution is to modify the code to pass news id as <code>params[:news_id</code>]. </p>\n\n<p>Another, a little big uglier solution, is to refactor <code>set_commentable</code> method in the <code>News::CommentsController</code> to something like this:</p>\n\n<pre><code>def set_commentable\n  @commentable = News.find_by(slug: params[:news_id])\nend\n</code></pre>\n\n<p>However, it might break other places where <code>set_commentable</code> is used.</p>\n"}], "owner": {"reputation": 45, "user_id": 10840729, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YvZ-ZENdYLc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbu3HH78kkPEbx5PGCktp9p5VuVQg/mo/photo.jpg?sz=128", "display_name": "Artem", "link": "https://stackoverflow.com/users/10840729/artem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 53969866, "answer_count": 1, "score": 0, "last_activity_date": 1546089117, "creation_date": 1546086272, "question_id": 53969494, "link": "https://stackoverflow.com/questions/53969494/how-to-fix-rails-ajax-error-in-site-console", "title": "How to fix &#39;Rails.ajax&#39; error in site Console?", "body": "<p>I have 2 different post types (news and articles). When i go to news and try to comment any news, nothing happen. In google chrome console it says:</p>\n\n<pre><code>POST /news/artifact-v-spiske-liderov-prodazh-steam-po-itogam-2018-goda/comments/ 404\nrails-ujs.self-d109d8c5c0194c8ad60b8838b2661c5596b5c955987f7cd4045eb2fb90ca5343.js?body=1:7 \nRails.ajax @ rails-ujs.self-d109d8c5c0194c8ad60b8838b2661c5596b5c955987f7cd4045eb2fb90ca5343.js?body=1:7\nRails.handleRemote @ rails-ujs.self-d109d8c5c0194c8ad60b8838b2661c5596b5c955987f7cd4045eb2fb90ca5343.js?body=1:31\n(anonymous) @ rails-ujs.self-d109d8c5c0194c8ad60b8838b2661c5596b5c955987f7cd4045eb2fb90ca5343.js?body=1:5\n</code></pre>\n\n<p>BUT! When i try comment in Articles type, all good, comments work. What is problem?</p>\n\n<p><b>My _form.html.haml:</b></p>\n\n<pre><code>- if user_signed_in? &amp;&amp; current_user.mute_to &amp;&amp; current_user.mute_to &gt; Time.current\n%div\n%strong\n  = \"\u0412\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0438\u0441\u0430\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0434\u043e #{current_user.mute_to.strftime(\"%F %R\")}\"\n- elsif user_signed_in?\n= form_with model: [commentable, Comment.new], html: { class: \nlocal_assigns[:class], data: { target: local_assigns[:target] } } do |form|\n.form-group\n  = form.text_area :body, placeholder: \"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 (\u043c\u0438\u043d\u0438\u043c\u0443\u043c 3 \u0441\u0438\u043c\u0432\u043e\u043b\u0430)\", class: \"form-control\"\n.form-group\n  = form.hidden_field :parent_id, value: local_assigns[:parent_id]\n  = form.submit '\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c', class: \"btn\"\n</code></pre>\n\n<p><b>My _comment.html.haml:</b></p>\n\n<pre><code>- nesting     = local_assigns.fetch(:nesting, 1)\n- max_nesting = local_assigns[:max_nesting]\n- continue_thread = local_assigns[:continue_thread]\n= tag.div id: dom_id(comment), class: \"border-left pl-4 my-4\" do\n- if comment.deleted?\n%strong [\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0443\u0434\u0430\u043b\u0435\u043d]\n%small\n  = link_to time_ago_in_words(comment.created_at), url_for(comment: comment.id, anchor: dom_id(comment))\n%p [\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0443\u0434\u0430\u043b\u0435\u043d]\n- else\n- comments_user = comment.user\n%strong.comments_user_line\n  = fa_icon \"user-circle\", class: \"mr-1\"\n  = link_to comments_user.nickname, user_path(comments_user), class: 'user_link'\n%small\n  = link_to time_ago_in_words(comment.created_at), polymorphic_path(comment.commentable, comment: comment.id, anchor: dom_id(comment))\n= simple_format comment.body\n%div.comments_block\n- if user_signed_in? &amp;&amp; current_user.mute_to &amp;&amp; current_user.mute_to &gt; Time.current\n- else\n  %small\n    - if user_signed_in? \n      %btn.reply \u041e\u0442\u0432\u0435\u0438\u0442\u044c\n    - else\n      = link_to \"\u041e\u0442\u0432\u0435\u0438\u0442\u044c\", new_user_session_path\n    = link_to \"\u0423\u0434\u0430\u043b\u0438\u0442\u044c\", [comment.commentable, comment], method: :delete, data: {confirm: \"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?\"} if comment.user == current_user\n  = render partial: \"comments/form\", locals: {                       |\n      commentable: comment.commentable,                              |\n      parent_id: reply_to_comment_id(comment, nesting, max_nesting), |\n      class: \"mt-4 d-none replies_form\",                             |\n      target: \"reply.form\"                                           |\n    }                                                                |\n = tag.div id: \"#{dom_id(comment)}_comments\" do\n- if continue_thread.present? &amp;&amp; nesting &gt;= continue_thread &amp;&amp; comment.comments.any?\n  = link_to \"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0432\u0435\u0442\u043a\u0443\", url_for(comment: comment.id, anchor: dom_id(comment))\n- else\n  = render comment.comments, continue_thread: continue_thread, nesting: nesting + 1, max_nesting: local_assigns[:max_nesting]\n</code></pre>\n\n<p><b>My comments_controller.rb:</b></p>\n\n<pre><code>class CommentsController &lt; ApplicationController\nbefore_action :authenticate_user!\n\ndef create\n@comment = @commentable.comments.new(comment_params)\n@comment.user = current_user\nif @comment.save\n  respond_to do |format|\n    format.html { redirect_to @commentable }\n    format.js\n  end\nelse\n  redirect_to @commentable, alert: \"\u041e\u0448\u0438\u0431\u043a\u0430 :(\"\nend\nend\n\ndef destroy\n@comment = @commentable.comments.find(params[:id])\nreturn false unless current_user.id == @comment.user_id\n\n@comment.destroy\nredirect_to @commentable\nend\n\nprivate\n\ndef comment_params\nparams.require(:comment).permit(:body, :parent_id)\nend\nend\n</code></pre>\n\n<p>If i uncomment rails-ujs in application.js like this:</p>\n\n<pre><code>require rails-ujs\n</code></pre>\n\n<p>Then when i posting comment it will be say: </p>\n\n<pre><code>ActiveRecord::RecordNotFound in News::CommentsController#create\nCouldn't find News with 'id'=artifact-v-spiske-liderov-prodazh-steam-po-itogam-2018-goda\n\nExtracted source (around line #7):\n\n6  def set_commentable\n7    @commentable = News.find(params[:news_id])\n8  end\n9 end\n</code></pre>\n\n<p>How i can fix it? Thanks!</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "erb"], "comments": [{"owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "edited": false, "score": 0, "creation_date": 1546084961, "post_id": 53969282, "comment_id": 94776211, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/29461116/pass-value-from-view-to-controller-in-rails-4\">Pass value from view to controller in rails 4</a>"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 10834384, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XkIDlG6hWA4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYIySLIWltV5oqrVin54d8QVjCxiw/mo/photo.jpg?sz=128", "display_name": "Bob K", "link": "https://stackoverflow.com/users/10834384/bob-k"}, "edited": false, "score": 0, "creation_date": 1546086881, "post_id": 53969486, "comment_id": 94776626, "body": "ProcessQ1 isn&#39;t the name of the controller. It is the name of the action in the controller. This action is supposed to receive the answer to the first question. I plan on creating more actions like ProcessQ2 (for processing the user input for the 2nd questions), ProcessQ3, etc. So assuming that the controller is called quiz_controller.rb, how can I pass the value of :answer to the action ProcessQ1?"}, {"owner": {"reputation": 318, "user_id": 1877501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46aabbe257541e8efd34e98f0e20c08c?s=128&d=identicon&r=PG", "display_name": "Londerson Ara&#250;jo", "link": "https://stackoverflow.com/users/1877501/londerson-ara%c3%bajo"}, "reply_to_user": {"reputation": 69, "user_id": 10834384, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XkIDlG6hWA4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYIySLIWltV5oqrVin54d8QVjCxiw/mo/photo.jpg?sz=128", "display_name": "Bob K", "link": "https://stackoverflow.com/users/10834384/bob-k"}, "edited": false, "score": 0, "creation_date": 1546097583, "post_id": 53969486, "comment_id": 94779271, "body": "Create a route for your action, pass in your form with param <code>&lt;%= form_for @quiz, url: your_new_route %&gt;</code> and get the value of params with <code>param</code> rails variable. ex: `params[:quiz][:answer]. So, you will understand this very well reading the docs."}], "tags": [], "owner": {"reputation": 318, "user_id": 1877501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46aabbe257541e8efd34e98f0e20c08c?s=128&d=identicon&r=PG", "display_name": "Londerson Ara&#250;jo", "link": "https://stackoverflow.com/users/1877501/londerson-ara%c3%bajo"}, "is_accepted": false, "score": 2, "last_activity_date": 1546086198, "creation_date": 1546086198, "answer_id": 53969486, "question_id": 53969282, "link": "https://stackoverflow.com/questions/53969282/how-can-i-send-values-from-an-erb-file-to-a-ruby-controller/53969486#53969486", "title": "How can I send values from an erb file to a ruby controller?", "body": "<p>First of all, try always use the Rails way instead html pure tags for create your forms:</p>\n\n<pre><code>&lt;%= form_for :quiz do |f| %&gt;\n  &lt;label&gt;What is the sum of 5 + 6 ?&lt;/label&gt;\n  &lt;%= f.text_field :answer %&gt;\n  &lt;%= f.submit \"Submit\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>After submit, in your controller you will get the value of answer in your <code>ProcessQ1</code> (This is not a good name for a controller because they are written in plural and more generically. So, for your purpose, <code>QuizzesController</code> is an option) in <code>params</code> rails hash variable on your action create.</p>\n\n<p>ex: <code>{ quiz: {answer: 5 }}</code> and make anything you want with this data.</p>\n\n<p>Please, read this docs. It is a good way to understand this processes of framework.</p>\n\n<p><a href=\"http://guides.rubyonrails.org/form_helpers.html\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/form_helpers.html</a></p>\n\n<p><a href=\"http://guides.rubyonrails.org/getting_started.html\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/getting_started.html</a></p>\n\n<p><a href=\"http://guides.rubyonrails.org/getting_started.html#saving-data-in-the-controller\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/getting_started.html#saving-data-in-the-controller</a></p>\n"}], "owner": {"reputation": 69, "user_id": 10834384, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XkIDlG6hWA4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYIySLIWltV5oqrVin54d8QVjCxiw/mo/photo.jpg?sz=128", "display_name": "Bob K", "link": "https://stackoverflow.com/users/10834384/bob-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 709, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546086198, "creation_date": 1546084585, "last_edit_date": 1546084998, "question_id": 53969282, "link": "https://stackoverflow.com/questions/53969282/how-can-i-send-values-from-an-erb-file-to-a-ruby-controller", "title": "How can I send values from an erb file to a ruby controller?", "body": "<p>I'm trying to create a dynamic quiz system as follows:</p>\n\n<ol>\n<li>A controller passes a value to an erb file (which creates an html\nform with the first quiz question)</li>\n<li>The erb file has an html form where the user can enter an input</li>\n<li>The erb file sends the input back to an action in the controller</li>\n<li>The action checks the input value and loads the next question. The next \nquestion depends on what the user's input was.</li>\n</ol>\n\n<p>Now I know that I can send a value from an action to its corresponding erb file. Basic stuff. But how can I send a value from the erb file back to the controller (so that it can process the input from the html form)?</p>\n\n<p>For example, this is what the html template (question1.html.erb) for the first question looks like:</p>\n\n<pre><code>&lt;head &gt;&lt;title &gt;Question 1&lt;/title &gt;&lt;/head &gt;\n &lt;body&gt;\n    &lt;form action=\"localhost:3000/welcome/processQ1\" method = \"get\"&gt; \n        &lt;p&gt;What is the sum of 5 + 6 ?&lt;/p&gt; \n        &lt;input name='sum' type='text' width='5' id='sum' required /&gt; \n        &lt;input type='submit' value='Submit' /&gt; \n    &lt;/form &gt;\n&lt;/body&gt; \n</code></pre>\n\n<p>What I want is to send the value of 'sum' back to an action called \"processQ1\" in the controller. How can this be achieved?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "controller"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1546080859, "post_id": 53968602, "comment_id": 94775352, "body": "Please check error log. Is it like <code>ActiveRecord::RecordNotFound: Couldn&#39;t find Post without an ID</code> or <code>ActiveRecord::RecordNotFound: Couldn&#39;t find User with &#39;id&#39;=</code> ?"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 1, "creation_date": 1546082775, "post_id": 53968602, "comment_id": 94775780, "body": "Can you post the url you have in the address bar?"}, {"owner": {"reputation": 139, "user_id": 7558396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7859e5c856d6c130da40451f7bbcc88?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksander Jess", "link": "https://stackoverflow.com/users/7558396/aleksander-jess"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 1, "creation_date": 1546088123, "post_id": 53968602, "comment_id": 94776889, "body": "@ray so it&#39;s <code>ActiveRecord::RecordNotFound in PostsController#show</code> and then <code>Couldn&#39;t find Post with &#39;id&#39;=index</code>."}, {"owner": {"reputation": 139, "user_id": 7558396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7859e5c856d6c130da40451f7bbcc88?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksander Jess", "link": "https://stackoverflow.com/users/7558396/aleksander-jess"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1546088146, "post_id": 53968602, "comment_id": 94776897, "body": "@iGian <a href=\"http://localhost:3000/posts/index\" rel=\"nofollow noreferrer\">localhost:3000/posts/index</a>"}, {"owner": {"reputation": 139, "user_id": 7558396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7859e5c856d6c130da40451f7bbcc88?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksander Jess", "link": "https://stackoverflow.com/users/7558396/aleksander-jess"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1546089585, "post_id": 53968602, "comment_id": 94777272, "body": "@iGian that;s all I get in the console window where I have <code>rails s</code> running:  ActiveRecord::RecordNotFound (Couldn&#39;t find Post with &#39;id&#39;=index):app/controllers/posts_controller.rb:16:in show&#39; Started GET &quot;/posts/index&quot; for 127.0.0.1 at 2018-12-29 13:53:08 +0100 Processing by PostsController#show as HTML  Parameters: {&quot;id&quot;=&gt;&quot;index&quot;}  Post Load (0.5ms)  SELECT  &quot;posts&quot;.* FROM &quot;posts&quot; WHERE &quot;posts&quot;.&quot;id&quot; = ? LIMIT ?  [[&quot;id&quot;, 0], [&quot;LIMIT&quot;, 1]]  Completed 404 Not Found in 4ms (ActiveRecord: 0.5ms)`"}, {"owner": {"reputation": 139, "user_id": 7558396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7859e5c856d6c130da40451f7bbcc88?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksander Jess", "link": "https://stackoverflow.com/users/7558396/aleksander-jess"}, "edited": false, "score": 0, "creation_date": 1546089740, "post_id": 53968602, "comment_id": 94777308, "body": "for some reason I can&#39;t really format the text"}, {"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1546089832, "post_id": 53968602, "comment_id": 94777330, "body": "@AleksanderJess URLs that are in the style <code>&#47;posts&#47;something</code> are for showing a single post with an id of &quot;something&quot;. So here <code>index</code> is being interpreted as an ID. For the index action try just <code>http:&#47;&#47;localhost:3000&#47;posts</code> - or if you&#39;re seeing the error when clicking on a link from somewhere else in your app then share the <code>link_to</code> that you&#39;re using."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1546089859, "post_id": 53968602, "comment_id": 94777338, "body": "My bad. Change the url to  <code>localhost:3000&#47;posts&#47;1</code> (or, instead of 1 use the ID of the last post). What are you getting? Also, instead of index.html.erb, please post in your question the content of  <code>show.html.erb</code>."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1546090262, "post_id": 53968602, "comment_id": 94777450, "body": "&quot;...so I changed <code>params[:id]</code> to <code>params[:title]</code>..&quot; Rollback to <code>@post = Post.find(params[:id])</code>"}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 7558396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7859e5c856d6c130da40451f7bbcc88?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksander Jess", "link": "https://stackoverflow.com/users/7558396/aleksander-jess"}, "edited": false, "score": 0, "creation_date": 1546088050, "post_id": 53969521, "comment_id": 94776871, "body": "Sure, the error is &quot;ActiveRecord::RecordNotFound in PostsController#show&quot; and then below &quot;Couldn&#39;t find Post with &#39;id&#39;=index&quot;  Btw that change you suggested did not help :("}], "tags": [], "owner": {"reputation": 101, "user_id": 1875735, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bffc75b2a96ad7575ff6783396dd9160?s=128&d=identicon&r=PG", "display_name": "Sridhar", "link": "https://stackoverflow.com/users/1875735/sridhar"}, "is_accepted": false, "score": 1, "last_activity_date": 1546086455, "creation_date": 1546086455, "answer_id": 53969521, "question_id": 53968602, "link": "https://stackoverflow.com/questions/53968602/getting-an-activerecordrecordnotfound-in-postscontrollershow-out-of-nowher/53969521#53969521", "title": "Getting an &quot;ActiveRecord::RecordNotFound in PostsController#show &quot; out of nowhere", "body": "<p>Can you post the error that you are getting.</p>\n\n<p>Just a wild guess, the issue could be in this line</p>\n\n<pre><code>&lt;%= link_to post.title, post%&gt;\n</code></pre>\n\n<p>If so, change it to</p>\n\n<pre><code>&lt;%= link_to post.title, post_path(post) %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320, "user_id": 6501234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e980b8b7894381f8d85eb060b7b0cbf?s=128&d=identicon&r=PG", "display_name": "Corey Gibson", "link": "https://stackoverflow.com/users/6501234/corey-gibson"}, "is_accepted": false, "score": 0, "last_activity_date": 1546093923, "creation_date": 1546093923, "answer_id": 53970446, "question_id": 53968602, "link": "https://stackoverflow.com/questions/53968602/getting-an-activerecordrecordnotfound-in-postscontrollershow-out-of-nowher/53970446#53970446", "title": "Getting an &quot;ActiveRecord::RecordNotFound in PostsController#show &quot; out of nowhere", "body": "<p>Just starting out and even now I have found that in development the gem BetterErrors <a href=\"https://github.com/BetterErrors/better_errors\" rel=\"nofollow noreferrer\">https://github.com/BetterErrors/better_errors</a> gives you a great way to debug errors live, maybe you can install this gem and give it a try it will give you better error pages and the ability to see different vars live. </p>\n\n<p>also, it looks like there the problem should be in your</p>\n\n<pre><code>&lt;%= link_to post.title, post %&gt;\n</code></pre>\n\n<p>it definitely needs to look something like this</p>\n\n<pre><code>&lt;%= link_to(post.title, post_path(post)) %&gt; \n</code></pre>\n\n<p>or</p>\n\n<pre><code>&lt;%= link_to post.tilte, post_path(post) %&gt;\n</code></pre>\n\n<p>if this does not work you need to look at your routes and see if you have the route for the show page defined. </p>\n"}, {"tags": [], "owner": {"reputation": 139, "user_id": 7558396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7859e5c856d6c130da40451f7bbcc88?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksander Jess", "link": "https://stackoverflow.com/users/7558396/aleksander-jess"}, "is_accepted": false, "score": 0, "last_activity_date": 1546101935, "creation_date": 1546101935, "answer_id": 53971420, "question_id": 53968602, "link": "https://stackoverflow.com/questions/53968602/getting-an-activerecordrecordnotfound-in-postscontrollershow-out-of-nowher/53971420#53971420", "title": "Getting an &quot;ActiveRecord::RecordNotFound in PostsController#show &quot; out of nowhere", "body": "<p>Okay, so I forgot about a basic thing.</p>\n\n<p>After adding <code>get 'posts/index</code> in <code>routes.rb</code> everything works.</p>\n"}], "owner": {"reputation": 139, "user_id": 7558396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7859e5c856d6c130da40451f7bbcc88?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksander Jess", "link": "https://stackoverflow.com/users/7558396/aleksander-jess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1546101935, "creation_date": 1546078481, "question_id": 53968602, "link": "https://stackoverflow.com/questions/53968602/getting-an-activerecordrecordnotfound-in-postscontrollershow-out-of-nowher", "title": "Getting an &quot;ActiveRecord::RecordNotFound in PostsController#show &quot; out of nowhere", "body": "<p>Okay, so I am trying to display index.html, and RoR is showing me something is up with... def show in posts_controller... Okay?</p>\n\n<p>So the index.html.erb </p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;% @posts.each do |post| %&gt;\n    &lt;div class=\"post_wrapper\"&gt;\n        &lt;h2 class=\"title\"&gt;&lt;%= link_to post.title, post%&gt;&lt;/h2&gt;\n        &lt;p class=\"date\"&gt;&lt;%= time_ago_in_words(post.created_at)%&gt;&lt;/p&gt;\n    &lt;/div&gt;\n    &lt;% end %&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>posts_controller.rb</p>\n\n<pre><code>class PostsController &lt; ApplicationController\n    def index\n        @posts = Post.all.order('created_at DESC')\n    end\n\n    def new\n    end\n\n    def create\n        @post = Post.new(post_params)\n        @post.save\n\n        redirect_to @post\n    end\n    def show\n        @post = Post.find(params[:id])\n    end\n    private\n\n        def post_params\n            params.require(:post).permit(:title, :body)\n        end    \nend\n</code></pre>\n\n<p>My guess was that it's because there was no attribute such as ID, so I changed <code>params[:id]</code> to <code>params[:title]</code> and still got the same error. </p>\n\n<p>Can you please explain what's wrong and what needs to be fixed?</p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver"], "comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 1, "creation_date": 1546091473, "post_id": 53967124, "comment_id": 94777744, "body": "Hi, If you are ready to use Ruby Selenium Binding, then use WATIR which is a nice wrapper around Ruby Selenium Binding, there are plenty of other things which are added in WATIR which would not be available to you if you use Ruby Selenium Binding."}, {"owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1546091662, "post_id": 53967124, "comment_id": 94777786, "body": "@Rajagopalan thanks I think I will try that some time"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1546091759, "post_id": 53967124, "comment_id": 94777814, "body": "Sure, here is a guide for you <a href=\"http://watir.com/guides/\" rel=\"nofollow noreferrer\">watir.com/guides</a>"}, {"owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1546093599, "post_id": 53967124, "comment_id": 94778244, "body": "useful send_keys documentation <a href=\"https://www.rubydoc.info/gems/selenium-webdriver/Selenium%2FWebDriver%2FElement%3Asend_keys\" rel=\"nofollow noreferrer\">rubydoc.info/gems/selenium-webdriver/&hellip;</a> . I see a list of key codes  <a href=\"https://www.rubydoc.info/gems/selenium-webdriver/Selenium/WebDriver/Keys#KEYS-constant\" rel=\"nofollow noreferrer\">rubydoc.info/gems/selenium-webdriver/Selenium/WebDriver/&hellip;</a> . And also listed <a href=\"https://github.com/SeleniumHQ/selenium/blob/master/rb/lib/selenium/webdriver/common/keys.rb\" rel=\"nofollow noreferrer\">github.com/SeleniumHQ/selenium/blob/master/rb/lib/selenium/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "edited": false, "score": 0, "creation_date": 1546093101, "post_id": 53967810, "comment_id": 94778132, "body": "when I realised re the &#39;e&#39; (minutes ago),  I couldn&#39;t undo it without editing your question.. but i&#39;ve added a note now to your question that is much clearer. And I have now upvoted it. So it has gone from -2 to 0."}, {"owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "edited": false, "score": 0, "creation_date": 1546093814, "post_id": 53967810, "comment_id": 94778308, "body": "thanks, and for the record, I notice <code>\\ue006</code>(return) works too.. though indeed I asked for &#39;enter&#39;, which is, as you say, <code>\\ue007</code>(enter)"}, {"owner": {"reputation": 14553, "user_id": 3446126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I37Df.png?s=128&g=1", "display_name": "Todor Minakov", "link": "https://stackoverflow.com/users/3446126/todor-minakov"}, "reply_to_user": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "edited": false, "score": 0, "creation_date": 1546094313, "post_id": 53967810, "comment_id": 94778416, "body": "Side note - the two in fact are different keys, and characters (as you&#39;ve seen in selenium&#39;s code table); this is a leftover from the &quot;good old days&quot; in the computing. The good thing is browsers handle them the same, e.g. in a way unify them in the same operation."}], "tags": [], "owner": {"reputation": 14553, "user_id": 3446126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I37Df.png?s=128&g=1", "display_name": "Todor Minakov", "link": "https://stackoverflow.com/users/3446126/todor-minakov"}, "is_accepted": false, "score": -1, "last_activity_date": 1546093181, "last_edit_date": 1546093181, "creation_date": 1546070763, "answer_id": 53967810, "question_id": 53967124, "link": "https://stackoverflow.com/questions/53967124/in-ruby-with-selenium-difficulty-programmatically-sending-the-enter-key/53967810#53967810", "title": "In Ruby with Selenium, difficulty programmatically sending the ENTER key", "body": "<p>Try it with <code>\\ue007</code>:</p>\n\n<pre><code>driver.find_element(:name, \"q\").send_keys(\"\\ue007\");\n</code></pre>\n\n<p>Edit: as it is probably not really obvious, the code I am proposing is different from what you have tried. It has an additional \"e\" character, which makes it a totally different unicode code.</p>\n\n<p>Also, if you check selenium source - <a href=\"https://github.com/SeleniumHQ/selenium/blob/master/rb/lib/selenium/webdriver/common/keys.rb\" rel=\"nofollow noreferrer\">https://github.com/SeleniumHQ/selenium/blob/master/rb/lib/selenium/webdriver/common/keys.rb</a> - this code - <code>\\ue007</code>, is what is defined as the return key. And calling <code>send_keys:return</code> sends exactly this code.</p>\n\n<p>HTH.</p>\n"}, {"comments": [{"owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "edited": false, "score": 1, "creation_date": 1546090793, "post_id": 53968099, "comment_id": 94777563, "body": "and this <code>driver.find_element(:name, &quot;q&quot;).send_keys &quot;fff&quot;,&quot;a&quot;,:return;</code> (to send fffa&lt;ENTER&gt;)"}, {"owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "edited": false, "score": 1, "creation_date": 1546092685, "post_id": 53968099, "comment_id": 94778032, "body": "useful page has all codes listed <a href=\"https://www.rubydoc.info/gems/selenium-webdriver/Selenium/WebDriver/Keys#KEYS-constant\" rel=\"nofollow noreferrer\">rubydoc.info/gems/selenium-webdriver/Selenium/WebDriver/&hellip;</a>"}], "tags": [], "owner": {"reputation": 5333, "user_id": 7901720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q16Ra.jpg?s=128&g=1", "display_name": "Ratmir Asanov", "link": "https://stackoverflow.com/users/7901720/ratmir-asanov"}, "is_accepted": true, "score": 1, "last_activity_date": 1546090375, "last_edit_date": 1546090375, "creation_date": 1546073507, "answer_id": 53968099, "question_id": 53967124, "link": "https://stackoverflow.com/questions/53967124/in-ruby-with-selenium-difficulty-programmatically-sending-the-enter-key/53968099#53968099", "title": "In Ruby with Selenium, difficulty programmatically sending the ENTER key", "body": "<p>You can try the following code for hitting the \"ENTER\" key:</p>\n\n<pre><code>driver.find_element(:name, \"q\").send_keys:return\n</code></pre>\n"}], "owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 1, "accepted_answer_id": 53968099, "answer_count": 2, "score": 0, "last_activity_date": 1546093181, "creation_date": 1546063366, "last_edit_date": 1546073720, "question_id": 53967124, "link": "https://stackoverflow.com/questions/53967124/in-ruby-with-selenium-difficulty-programmatically-sending-the-enter-key", "title": "In Ruby with Selenium, difficulty programmatically sending the ENTER key", "body": "<p>In Ruby with Selenium, I am having difficulty programmatically sending the ENTER key.</p>\n\n<p>I manage to programmatically load up google.com in Firefox and send keys into the search box. </p>\n\n<p>I can manually hit ENTER, that works, but I want to programmatically hit ENTER. And my attempts at programmatically hitting ENTER haven't worked.</p>\n\n<p>Here's the loading the page and entering text into the search box. That works:</p>\n\n<pre><code>irb(main):001:0&gt; require 'selenium-webdriver'\n=&gt; true\n\nirb(main):002:0&gt; driver = Selenium::WebDriver.for:firefox\n=&gt; #&lt;Selenium::WebDriver::Firefox::Marionette::Driver:0x..fb3c81796cc82b708 browser=:firefox&gt;\n\nirb(main):003:0&gt; driver.navigate().to(\"http://www.google.com\")\n=&gt; nil\n\nirb(main):004:0&gt; inps=driver.find_elements(:tag_name, \"input\");\n=&gt; [#&lt;Selenium::WebDriver::Element:0x..fbd90f502ff3e0576 id=\"534cf85c-1315-994f-ba72-0eae5f6ada73\"&gt;, #&lt;Selenium::WebDriver::Element:0x2c3d35f89c794\n\nirb(main):080:0&gt; driver.find_element(:name, \"q\").send_keys(\"abab\");\n=&gt; nil\n</code></pre>\n\n<p>So, that above all works fine and puts text into the search box.</p>\n\n<p>Now for programmatically hitting ENTER:</p>\n\n<pre><code>driver.find_element(:name, \"q\").send_keys(\"\\n\"); \n\ndriver.find_element(:name, \"q\").send_keys(\"aaa\\n\"); \n\ndriver.action.send_keys(\"\\n\").perform\n</code></pre>\n\n<p>And each of those three lines with <code>\\u0006</code> instead of <code>\\n</code>.</p>\n\n<p>And each of those three lines with <code>\\u0007</code> instead of <code>\\n</code>.</p>\n\n<p>It's not working.</p>\n\n<p>The <code>\\n</code> has no visual effect. And the <code>\\u0006</code> and <code>\\u0007</code> just make the special character appear in the textbox.</p>\n\n<p>I tried sending to the body instead:</p>\n\n<pre><code>irb(main):087:0&gt; b=driver.find_element(:tag_name, \"body\")\n=&gt; #&lt;Selenium::WebDriver::Element:0x45552f31d66411fa id=\"ce2a065b-c12a-1740-82ee-68bcf8a43ead\"&gt;\nirb(main):088:0&gt; b.send_key(\"\\n\");\n=&gt; nil\nirb(main):089:0&gt; b.send_key(\"\\n\");\n=&gt; nil\nirb(main):090:0&gt; b.send_key(\"\\u0006\");\n=&gt; nil\nirb(main):091:0&gt; b.send_keys(\"\\u0007\");\n=&gt; nil\nirb(main):092:0&gt; b.send_keys(\"\\n\");\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/uchhT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uchhT.png\" alt=\"enter image description here\"></a></p>\n\n<p>And it's the same issue. <code>\\u</code> makes the character appear in the box. <code>\\n</code> has no visual effect. And neither of them are sending an ENTER as a manual push of the ENTER key would.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "phantomjs", "ruby-on-rails-5", "puma"], "comments": [{"owner": {"reputation": 1327, "user_id": 4650675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SiYJE.jpg?s=128&g=1", "display_name": "Niraj Kaushal", "link": "https://stackoverflow.com/users/4650675/niraj-kaushal"}, "edited": false, "score": 0, "creation_date": 1546105797, "post_id": 53966556, "comment_id": 94781446, "body": "Are you using any gem for <code>Phantomjs</code>?? Check your GemFile"}, {"owner": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "edited": false, "score": 0, "creation_date": 1546216731, "post_id": 53966556, "comment_id": 94802604, "body": "Also, recommend to move off of PhantomJS; it is not longer developed AFAIK. Try looking into Chrome headless, etc. Performs way better too. <a href=\"https://hackernoon.com/benchmark-headless-chrome-vs-phantomjs-e7f44c6956c\" rel=\"nofollow noreferrer\">hackernoon.com/&hellip;</a>"}, {"owner": {"reputation": 412, "user_id": 4340066, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c95cbbc65958d466aae2a234e8266a37?s=128&d=identicon&r=PG&f=1", "display_name": "bav ko ten", "link": "https://stackoverflow.com/users/4340066/bav-ko-ten"}, "edited": false, "score": 0, "creation_date": 1546226996, "post_id": 53966556, "comment_id": 94804012, "body": "Niraj KaushalL No, i don&#39;i install gem for phantom js, I call phantomJs from cmd system"}], "answers": [{"comments": [{"owner": {"reputation": 412, "user_id": 4340066, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c95cbbc65958d466aae2a234e8266a37?s=128&d=identicon&r=PG&f=1", "display_name": "bav ko ten", "link": "https://stackoverflow.com/users/4340066/bav-ko-ten"}, "edited": false, "score": 0, "creation_date": 1546227194, "post_id": 53967171, "comment_id": 94804042, "body": "when i run phantomjs from shell it work, But when run from controller in mode production (puma boot) it not work."}, {"owner": {"reputation": 21, "user_id": 2281402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lN8Rl.jpg?s=128&g=1", "display_name": "teddylee", "link": "https://stackoverflow.com/users/2281402/teddylee"}, "reply_to_user": {"reputation": 412, "user_id": 4340066, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c95cbbc65958d466aae2a234e8266a37?s=128&d=identicon&r=PG&f=1", "display_name": "bav ko ten", "link": "https://stackoverflow.com/users/4340066/bav-ko-ten"}, "edited": false, "score": 0, "creation_date": 1546423078, "post_id": 53967171, "comment_id": 94845277, "body": "Are you running the puma thread under the same user with the current shell which phantomjs works?"}], "tags": [], "owner": {"reputation": 21, "user_id": 2281402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lN8Rl.jpg?s=128&g=1", "display_name": "teddylee", "link": "https://stackoverflow.com/users/2281402/teddylee"}, "is_accepted": false, "score": 0, "last_activity_date": 1546063931, "creation_date": 1546063931, "answer_id": 53967171, "question_id": 53966556, "link": "https://stackoverflow.com/questions/53966556/rails-puma-server-phantomjs-dont-run-on-production/53967171#53967171", "title": "Rails (Puma server) Phantomjs don&#39;t run on production", "body": "<p>try to make sure phantomjs is installed on your prod server, and the path setting is proper. run phantomjs  from your shell to verify this</p>\n"}], "owner": {"reputation": 412, "user_id": 4340066, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c95cbbc65958d466aae2a234e8266a37?s=128&d=identicon&r=PG&f=1", "display_name": "bav ko ten", "link": "https://stackoverflow.com/users/4340066/bav-ko-ten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1546063931, "creation_date": 1546055741, "question_id": 53966556, "link": "https://stackoverflow.com/questions/53966556/rails-puma-server-phantomjs-dont-run-on-production", "title": "Rails (Puma server) Phantomjs don&#39;t run on production", "body": "<p>I want to run PhantomJs on Controller.</p>\n\n<p>in my file <code>test.js</code></p>\n\n<pre><code>use 'strict';\nconsole.log('HELLO WORLD');\n</code></pre>\n\n<p>in <code>my_controller.rb</code></p>\n\n<pre><code>def test\n  rs = `phantomjs 'path/to/test.js' `\n  puts rs\nend\n</code></pre>\n\n<p>When i run project on local in mode <code>development</code>,</p>\n\n<ul>\n<li>i go to action <code>/test</code> => it display <code>'HELLO WORLD'</code> ( work )</li>\n</ul>\n\n<p>But when i deploy, and run it on mode <code>production</code>\nIt not display <code>HELLO WORLD</code>, seem like phantom js don't run.</p>\n\n<p>I use Phantomjs 2.1.1, rails 5.1.5, ruby 2.3.5 and boot use Puma server.\nAnyone can show me a way can fix it.</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "assert", "minitest"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1546045908, "post_id": 53965878, "comment_id": 94769867, "body": "It&#39;s really unclear what you&#39;re trying to do with <code>{ &quot;status&quot;: &quot;SUCCESS&quot; }</code>. Are you trying to match something like <code>&lt;p status=&quot;success&quot;&gt;</code>? That&#39;s not valid HTML. To be clear, JSON has nothing to do with <code>assert_select</code>, which is for working with HTML."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 10119931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379fc2525b2635937276a77dcd8ac476?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Lassiter", "link": "https://stackoverflow.com/users/10119931/paul-lassiter"}, "edited": false, "score": 1, "creation_date": 1546969284, "post_id": 53965900, "comment_id": 95026605, "body": "I see I didn&#39;t clearly convey my intention for why I&#39;m looking for parsed JSON on the page, so I added this to the post: <code>My view displays a parsed JSON response (which I&#39;ve verified in the browser), but I can&#39;t seem to verify this in a test.</code> Your answer helped me understand <code>assert_select</code> better, and helped me realize I was targeting the wrong key in my parsed JSON. And because <code>assert_select</code> doesn&#39;t have an <code>option</code> corresponding to the key I was checking, I was getting a <code>pass</code>. So by coincidence my parsed JSON was being interpreted as a hash with options by <code>assert_select</code>. Thank you!"}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": true, "score": 0, "last_activity_date": 1546046213, "last_edit_date": 1546046213, "creation_date": 1546045857, "answer_id": 53965900, "question_id": 53965878, "link": "https://stackoverflow.com/questions/53965878/ruby-on-rails-minitest-assert-select-test-passes-with-any-parsed-json-even-wh/53965900#53965900", "title": "Ruby on Rails - minitest assert_select test passes with any parsed JSON, even when it should fail", "body": "<blockquote>\n  <p>Is there an issue using parsed JSON here?</p>\n</blockquote>\n\n<p>You're misusing <code>assert_select</code>, which has nothing to do with JSON, it's for selecting HTML elements from your server's output. I can't tell what your intent is here, but you can't query parsed (or unparsed) JSON to <code>assert_select</code>, or send JSON as any of its arguments.</p>\n\n<p>In each of your four cases, the behavior of <code>assert_select</code> is as expected:</p>\n\n<ul>\n<li><blockquote>\n  <p><code>assert_select 'p', JSON.parse(expected_data) # passes</code></p>\n</blockquote>\n\n<p>You passed it an unknown option, <code>\"status\"</code>. That's not an option supported by <code>assert_select</code>, so in effect you're running <code>assert_select 'p'</code>, which passes because it finds a <code>&lt;p&gt;</code>.</p>\n\n<p>When given a hash as its second argument, the options it understands are:</p>\n\n<blockquote>\n  <p>:text - Narrow the selection to elements that have this text value\n  (string or regexp).</p>\n  \n  <p>:html - Narrow the selection to elements that have this HTML content\n  (string or regexp).</p>\n  \n  <p>:count - Assertion is true if the number of selected elements is equal\n  to this value.</p>\n  \n  <p>:minimum - Assertion is true if the number of selected elements is at\n  least this value.</p>\n  \n  <p>:maximum - Assertion is true if the number of selected elements is at\n  most this value.</p>\n</blockquote></li>\n<li><blockquote>\n  <p><code>assert_select 'p', JSON.parse(phony_data) # passes (shouldn't)</code></p>\n</blockquote>\n\n<p>Yes, this should pass, for the same reason: You're passing a random unknown option that is ignored, and a <code>&lt;p&gt;</code> is found to match.</p></li>\n<li><blockquote>\n  <p><code>assert_select 'p', { \"bestBearType\": \"BLACK\" } # passes (shouldn't)</code></p>\n</blockquote>\n\n<p>As above, yes, this should pass, \"bestBearType\" is not a valid option for <code>assert_select</code>.</p></li>\n<li><blockquote>\n  <p><code>assert_select 'p', expected_data # fails</code></p>\n</blockquote>\n\n<p>This <em>should</em> fail, because the second argument you're giving it is a string, which matches as follows:</p>\n\n<blockquote>\n  <p>Assertion is true if the text value of at least one element matches the string or regular expression.</p>\n</blockquote>\n\n<p>There is no <code>&lt;p&gt;</code> tag in your output that matches the string <code>\"{\\\"status\\\": \\\"SUCCESS\\\"}\"</code>.</p></li>\n</ul>\n\n<p>See <a href=\"https://api.rubyonrails.org/v4.1/classes/ActionDispatch/Assertions/SelectorAssertions.html#method-i-assert_select\" rel=\"nofollow noreferrer\">the documentation</a> for a complete description and some useful examples.</p>\n"}], "owner": {"reputation": 43, "user_id": 10119931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379fc2525b2635937276a77dcd8ac476?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Lassiter", "link": "https://stackoverflow.com/users/10119931/paul-lassiter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 53965900, "answer_count": 1, "score": 1, "last_activity_date": 1546968690, "creation_date": 1546045559, "last_edit_date": 1546968690, "question_id": 53965878, "link": "https://stackoverflow.com/questions/53965878/ruby-on-rails-minitest-assert-select-test-passes-with-any-parsed-json-even-wh", "title": "Ruby on Rails - minitest assert_select test passes with any parsed JSON, even when it should fail", "body": "<p>I can't seem to make my test fail with phony data, so that tells me I'm not properly testing my actual data. My view displays a parsed JSON response (which I've verified in the browser), but I can't seem to verify this in a test.</p>\n\n<pre><code># Arrange\naccount = accounts(:good_account) # from fixture\nexpected_data = { \"status\": \"SUCCESS\" }.to_json\nphony_data = { \"bestBearType\": \"BLACK\" }.to_json\n\n# Act\nget some_show_url(account.id)\n\n# Assert\nassert_select 'p', JSON.parse(expected_data) # passes\nassert_select 'p', JSON.parse(phony_data) # passes (shouldn't)\nassert_select 'p', { \"bestBearType\": \"BLACK\" } # passes (shouldn't)\nassert_select 'p', expected_data # fails\n</code></pre>\n\n<p>I'm really scratching my head as to how the phony data could be passing. It's almost as if I just have <code>assert_select 'p'</code> without the expected value that follows. Is there an issue using parsed JSON here?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1546042401, "post_id": 53965587, "comment_id": 94769262, "body": "Yep, <code>[0, a - b].max</code> is the most elegant I can think of right now."}, {"owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "edited": false, "score": 2, "creation_date": 1546042569, "post_id": 53965587, "comment_id": 94769301, "body": "Easy, <code>(a - b).to_s.sub(&#47;-.*&#47;, &#39;0&#39;).to_i</code> (please don&#39;t)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1546042589, "post_id": 53965587, "comment_id": 94769304, "body": "There&#39;s <a href=\"http://ruby-doc.org/core/Comparable.html#method-i-clamp\" rel=\"nofollow noreferrer\"><code>clamp</code></a> but it requires both, a lower and an upper bound."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "edited": false, "score": 0, "creation_date": 1546042808, "post_id": 53965587, "comment_id": 94769349, "body": "<code>a &gt;= b ? (a-b) : 0</code> is really the only alternative (and it arguably reads better), but I think most Rubyists (other than @Marcin) would go with <code>[0, a-b].max</code>, though neither seem to me to be especially <i>elegant</i>."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1546043739, "post_id": 53965587, "comment_id": 94769526, "body": "<code>v.negative? ? 0 : v</code>"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1546044285, "post_id": 53965587, "comment_id": 94769620, "body": "@Stefan You could <code>i.clamp(0, i.abs)</code> if you really want to use <code>clamp</code> but that feels a bit contrived and overly clever, shame that <code>clamp</code> doesn&#39;t take a range so you could <code>i.clamp(0..)</code> (in Ruby 2.6)."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1546045160, "post_id": 53965587, "comment_id": 94769765, "body": "<code>(num+num.abs)&#47;2</code>"}, {"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 0, "creation_date": 1546049776, "post_id": 53965587, "comment_id": 94770360, "body": "<code>num.rect.max</code> if you&#39;re never using complex numbers. or <code>num.coerce(0).max</code>"}, {"owner": {"reputation": 600, "user_id": 5994561, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh5.googleusercontent.com/-VGTzdts3mMw/AAAAAAAAAAI/AAAAAAAAADY/6Qwn_AVjnQI/photo.jpg?sz=128", "display_name": "sammms", "link": "https://stackoverflow.com/users/5994561/sammms"}, "edited": false, "score": 0, "creation_date": 1546061837, "post_id": 53965587, "comment_id": 94771697, "body": "@ Marcin Ko\u0142odziej :,("}, {"owner": {"reputation": 2151, "user_id": 10068463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3df811097b7fb8fef67238aad1151ca?s=128&d=identicon&r=PG&f=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/10068463/nate"}, "edited": false, "score": 0, "creation_date": 1546062207, "post_id": 53965587, "comment_id": 94771741, "body": "If this were me, I&#39;d do it in two lines: <code>v = a - b</code> and <code>v = 0 if v &lt; 0</code>. It feels the most straight forward and I would probably put a comment above the second line explaining why I&#39;m setting it to 0 if it&#39;s negative. I tend to put more weight in readability and less in code golfing. I would also recommend avoiding creating unnecessary arrays for performance reasons."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1546066080, "post_id": 53965587, "comment_id": 94772353, "body": "Be zero unless you are a natural number, just for :), <code>v = 0 unless (1..Float::INFINITY).include? v</code>, or <code>v = 0 unless v &gt; 0</code>. But why all answering in comments?"}, {"owner": {"reputation": 888, "user_id": 431357, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/nfiIt.png?s=128&g=1", "display_name": "Rex Butler", "link": "https://stackoverflow.com/users/431357/rex-butler"}, "edited": false, "score": 0, "creation_date": 1546104682, "post_id": 53965587, "comment_id": 94781156, "body": "See my solution to the original post this was marked a duplicate of.  I think your solution is essentially correct, and probably the most readable besides a small refactor.  I might change it slightly like so: <code>def total  final_total = subtotal - discount;  [final_total, 0].max end</code> Once you see this max expression once or twice you can read it as follows: &quot;final_total, but at least zero&quot;.  See my solution to the original post this was marked a duplicate of."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1546110519, "post_id": 53965587, "comment_id": 94782658, "body": "@muistooshort <i>&quot;shame that clamp doesn&#39;t take a range&quot;</i> \u2013 or keyword arguments, i.e. <code>clamp(min: 0)</code> ... maybe I should file a feature request."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1546111363, "post_id": 53965587, "comment_id": 94782865, "body": "@Stefan I was looking at the <code>cmp_clamp</code> source in <code>compar.c</code> yesterday to see what would be involved in patching it. I don&#39;t know if I could handle editing it without fixing the insane and inconsistent mess of mixed spaces and tabs and tabstops for the indentation."}], "owner": {"reputation": 1880, "user_id": 3574603, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/71a7b92124991652bf4dd64a9c50a9ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3574603", "link": "https://stackoverflow.com/users/3574603/user3574603"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 383, "favorite_count": 0, "closed_date": 1546070437, "answer_count": 0, "score": 0, "last_activity_date": 1546041894, "creation_date": 1546041894, "question_id": 53965587, "link": "https://stackoverflow.com/questions/53965587/ruby-how-to-return-positive-integer-or-0-if-number-is-negative", "closed_reason": "Duplicate", "title": "Ruby: How to return positive integer or 0 if number is negative?", "body": "<p>I have a calculation that may return a negative value. In that case, I want to limit the lowest return value to 0.</p>\n\n<pre><code>a - b\n&gt; -1\n</code></pre>\n\n<p>To get the desired result, I know I can place that calculation in an array with <code>0</code> and retrieve the highest value:</p>\n\n<pre><code>[0, a - b].max\n&gt; 0\n</code></pre>\n\n<p>I thought that there was a method on Integer that could do this (I was thinking of <code>#floor</code> but that does something different.) I've taken a look at the documentation but I can't find a method that does what I want and I feel that I must have missed something. Is there a method that returns the result I want? Is there a better way than the one I've suggested?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1546046544, "post_id": 53965281, "comment_id": 94769950, "body": "Can you edit your question and include the web server console messages for this transaction? There should be one where it shows the params being submitted, that will help ensure that what you expect to be sent by the form is being sent and accepted by the controller. Also right click on your form and inspect the size element and make sure the ERB is producing the HTML you are expecting. I&#39;m going to go out on a limb and guess that something is wrong with how your params are being submitted by the form, most likely a lack of nesting in the params being submitted."}], "answers": [{"tags": [], "owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "is_accepted": true, "score": 1, "last_activity_date": 1546052055, "creation_date": 1546052055, "answer_id": 53966320, "question_id": 53965281, "link": "https://stackoverflow.com/questions/53965281/select-a-nested-attributes-in-a-form/53966320#53966320", "title": "select a nested attributes in a form", "body": "<p><code>collection_select</code> generates a select field with name=\"size[id]\", and you get <code>{size: {id 1}}</code> instead of <code>{size_id: 1}</code> in controller params. What you need is select_tag helper here:</p>\n\n<pre><code>&lt;%= select_tag :size_id, options_from_collection_for_select(@product.sizes, :id, :size_name), prompt: \"Votre taille\" %&gt;\n</code></pre>\n"}], "owner": {"reputation": 646, "user_id": 8919469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f51a8277c113b7415c6b2bbd82be9615?s=128&d=identicon&r=PG&f=1", "display_name": "johan", "link": "https://stackoverflow.com/users/8919469/johan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 2, "accepted_answer_id": 53966320, "answer_count": 1, "score": 0, "last_activity_date": 1546052055, "creation_date": 1546038673, "question_id": 53965281, "link": "https://stackoverflow.com/questions/53965281/select-a-nested-attributes-in-a-form", "title": "select a nested attributes in a form", "body": "<p>It is an online shop</p>\n\n<p>I create Product with nested sizes_attributes</p>\n\n<p>A customer can buy a product and he has to select his size</p>\n\n<p><strong>products_controller.rb</strong></p>\n\n<pre><code>  def params_product\n    params.require(:product).permit(:title, :description, :price, \n:category_id, :color, sizes_attributes: [:id, :size_name, :quantity, :_destroy])\n   end\n</code></pre>\n\n<p><strong>products/show.html.erb</strong></p>\n\n<p>So the customer can select the wanted quantity and his size</p>\n\n<pre><code>   &lt;%= form_tag order_items_path do %&gt;\n    &lt;%= hidden_field_tag :product_id, @product.id %&gt;\n    &lt;%= hidden_field_tag :user_id, current_user.id %&gt;\n    &lt;%= number_field_tag :quantity, 1 %&gt; \n    &lt;%= collection_select :size, :id, @product.sizes, :id, :size_name, prompt: \"Votre taille\" %&gt;\n    &lt;%= submit_tag \"Add to Cart\" %&gt;\n   &lt;% end %&gt;\n</code></pre>\n\n<p><strong>shopping_cart.rb</strong></p>\n\n<pre><code>  def initialize(token:)\n    @token = token\n  end\n\n  def order\n   @order ||= Order.find_or_create_by(token: @token, status: 0) do |order|\n    order.sub_total = 0\n   end\n end\n\n def add_item(product_id:, quantity: 1, user_id:, size_id:)\n   @product = Product.find(product_id)\n   @size = Size.find_by(id: size_id)\n   #binding.pry\n\n   user = User.find(user_id)\n   order.user_id = user.id\n\n   order_item = order.items.find_or_initialize_by(product_id: product_id)\n   order_item.price = @product.price\n   order_item.quantity = quantity\n   order_item.size_id = @size.id\n\n\n   ActiveRecord::Base.transaction do\n     order_item.save\n   end\n end\n</code></pre>\n\n<p><strong>order_items_controller.rb</strong></p>\n\n<pre><code>  def create\n    current_cart.add_item(\n     product_id: params[:product_id],\n     quantity: params[:quantity],\n     user_id: params[:user_id],\n     size_id: params[:size_id]\n   )\n  end \n</code></pre>\n\n<h3>So the problem is:</h3>\n\n<ul>\n<li>The available sizes on a product can be [\"S\",\"M\",\"L\",\"XL\"]</li>\n<li>My user has selected \"L\"</li>\n<li>The selected size is not saved</li>\n</ul>\n\n<p>It records \"S\"... </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "edited": false, "score": 0, "creation_date": 1546039411, "post_id": 53965170, "comment_id": 94768592, "body": "What&#39;s your Rails version?"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1546038536, "post_id": 53965261, "comment_id": 94768375, "body": "Conventionally called <code>to_h</code>."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1546038998, "post_id": 53965261, "comment_id": 94768490, "body": "@Xero, I did not tested it, but maybe you can convert the method <code>amount</code> to an instance variable <code>@amount</code>?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1546039040, "post_id": 53965261, "comment_id": 94768500, "body": "What&#39;s wrong with this approach? It works, even if it&#39;s a bit more verbose. I tried hacking around with <code>as_json</code> but bare Ruby doesn&#39;t support this as well as Rails does."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 2, "last_activity_date": 1546039027, "last_edit_date": 1546039027, "creation_date": 1546038459, "answer_id": 53965261, "question_id": 53965170, "link": "https://stackoverflow.com/questions/53965170/usage-of-as-json-and-dynamic-method/53965261#53965261", "title": "Usage of as_json and dynamic method", "body": "<p>Can you define a custom method in your class?</p>\n\n<pre><code>  def to_h\n    {guest_age: @guest_age, amount: amount}\n  end\n</code></pre>\n\n<p>So you can call:</p>\n\n<pre><code>tax = Tax.new(18)\np tax.to_h\n#=&gt; {:guest_age=&gt;18, :amount=&gt;0}\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>require 'json'\nputs tax.to_h.to_json\n#=&gt; {\"guest_age\":18,\"amount\":0}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "is_accepted": false, "score": 3, "last_activity_date": 1546040895, "last_edit_date": 1546040895, "creation_date": 1546039765, "answer_id": 53965396, "question_id": 53965170, "link": "https://stackoverflow.com/questions/53965170/usage-of-as-json-and-dynamic-method/53965396#53965396", "title": "Usage of as_json and dynamic method", "body": "<p>Tested with Rails 5.2.2, this is the source of <code>as_json</code>:</p>\n\n<pre><code>def as_json(options = nil) #:nodoc:\n  if respond_to?(:to_hash)\n    to_hash.as_json(options)\n  else\n    instance_values.as_json(options)\n  end\nend\n</code></pre>\n\n<p>Which means that if you implement a <code>to_hash</code> method in your class, your <code>as_json</code> call will work the way you wish:</p>\n\n<pre><code>class Tax\n\n  attr_reader :guest_age\n\n  def initialize(guest_age)\n    @guest_age = guest_age\n  end\n\n  def amount\n    0\n  end\n\n  def to_hash\n    instance_values.merge(amount: amount)\n  end\nend\n</code></pre>\n\n<p>And...</p>\n\n<pre><code>Tax.new(1).as_json\n# =&gt; {\"guest_age\"=&gt;1, \"amount\"=&gt;0}\n</code></pre>\n\n<p>This will include the <code>amount</code> always though, there does not seem to be an easy way around that. </p>\n\n<p>It can work differently though, you need to explicitly throw away the <code>amount</code>:</p>\n\n<pre><code>Tax.new(1).as_json(except: :amount)\n# =&gt; {\"guest_age\"=&gt;1}\n</code></pre>\n\n<p>Or explicitly specify the attributes you wish to be serialized:</p>\n\n<pre><code>Tax.new(1).as_json(only: \"guest_age\")\n# =&gt; {\"guest_age\"=&gt;1}\n</code></pre>\n\n<p>The <code>methods</code> option that you'd like to use seems to be strictly tied to ActiveRecord.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 2281402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lN8Rl.jpg?s=128&g=1", "display_name": "teddylee", "link": "https://stackoverflow.com/users/2281402/teddylee"}, "is_accepted": false, "score": 1, "last_activity_date": 1546064984, "creation_date": 1546064984, "answer_id": 53967257, "question_id": 53965170, "link": "https://stackoverflow.com/questions/53965170/usage-of-as-json-and-dynamic-method/53967257#53967257", "title": "Usage of as_json and dynamic method", "body": "<p>the method option works for active model object.</p>\n\n<pre><code>class Tax\n\n  include ActiveModel::Serialization\n  include ActiveModel::Serializers::JSON\n\n  attr_accessor :guest_age\n\n  def initialize(guest_age)\n    @guest_age = guest_age\n  end\n\n  def attributes\n    {'guest_age' =&gt; nil}\n  end\n\n  def amount\n    0\n  end\n\nend\n</code></pre>\n\n<p>code like this should work, for more info see the source code.</p>\n\n<p><a href=\"https://github.com/rails/rails/blob/master/activemodel/lib/active_model/serialization.rb\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/master/activemodel/lib/active_model/serialization.rb</a></p>\n\n<p><a href=\"https://github.com/rails/rails/blob/master/activemodel/lib/active_model/serializers/json.rb\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/master/activemodel/lib/active_model/serializers/json.rb</a></p>\n"}], "owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1324, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1546064984, "creation_date": 1546037697, "last_edit_date": 1546038519, "question_id": 53965170, "link": "https://stackoverflow.com/questions/53965170/usage-of-as-json-and-dynamic-method", "title": "Usage of as_json and dynamic method", "body": "<p>I have an simple class (without Rails)</p>\n\n<pre><code>class Tax\n\n  attr_reader :guest_age\n\n  def initialize(guest_age)\n    @guest_age = guest_age\n  end\n\n  def amount\n    0\n  end\n\nend\n</code></pre>\n\n<p>This object has an \"amount\" custom method\nand I want to include the amount result in the json when I do this : <code>tax.as_json(methods: :amount)</code></p>\n\n<p>But this is not working, this return only the object with variables.</p>\n\n<p>What I'm getting now : </p>\n\n<blockquote>\n  <p>{ \"guest_age\": 18 }</p>\n</blockquote>\n\n<p>What I am expecting is :</p>\n\n<blockquote>\n  <p>{ \"guest_age\": 18, \"amount\": 0 }</p>\n</blockquote>\n\n<p>See <a href=\"https://apidock.com/rails/ActiveModel/Serializers/JSON/as_json\" rel=\"nofollow noreferrer\">https://apidock.com/rails/ActiveModel/Serializers/JSON/as_json</a></p>\n\n<p><strong>Note :</strong></p>\n\n<p>I want to keep this object without active record library dependency.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1546036138, "post_id": 53964868, "comment_id": 94767789, "body": "Looks like <code>cards</code> doesn&#39;t contain 5 elements. Remember that array indexes start at 0 so <code>cards[4]</code> is referring to the 5th element in the array. This will be <code>nil</code> if the array doesn&#39;t contain that many elements."}], "answers": [{"tags": [], "owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "is_accepted": false, "score": 1, "last_activity_date": 1546036171, "creation_date": 1546036171, "answer_id": 53964976, "question_id": 53964868, "link": "https://stackoverflow.com/questions/53964868/how-to-fix-nomethoderror-error-in-views-ruby/53964976#53964976", "title": "How to fix &#39;NoMethodError&#39; error in views Ruby", "body": "<p>In the first example you have <code>cards[4]</code> and in the second <code>cards[1]</code>. Not sure if that discrepancy is on purpose. You are getting a <code>NoMethodError</code> because there are not 5 elements in the cards array.  <code>cards[4]</code> is returning <code>nil</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1546036662, "post_id": 53965019, "comment_id": 94767914, "body": "Using defaults can be a good idea, but this isn&#39;t quite right. Elements from a <code>Hash</code> as used for the default can&#39;t be accessed using dot notation such as <code>.card_class</code>, <code>.color</code> etc."}, {"owner": {"reputation": 1686, "user_id": 7264341, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Oz5dfb6ASr8/AAAAAAAAAAI/AAAAAAAAAC8/33rQJBMPZZI/photo.jpg?sz=128", "display_name": "Javier Men&#233;ndez Rizo", "link": "https://stackoverflow.com/users/7264341/javier-men%c3%a9ndez-rizo"}, "edited": false, "score": 0, "creation_date": 1546037339, "post_id": 53965019, "comment_id": 94768068, "body": "that could be another solution"}], "tags": [], "owner": {"reputation": 1686, "user_id": 7264341, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Oz5dfb6ASr8/AAAAAAAAAAI/AAAAAAAAAC8/33rQJBMPZZI/photo.jpg?sz=128", "display_name": "Javier Men&#233;ndez Rizo", "link": "https://stackoverflow.com/users/7264341/javier-men%c3%a9ndez-rizo"}, "is_accepted": true, "score": 1, "last_activity_date": 1546037373, "last_edit_date": 1546037373, "creation_date": 1546036423, "answer_id": 53965019, "question_id": 53964868, "link": "https://stackoverflow.com/questions/53964868/how-to-fix-nomethoderror-error-in-views-ruby/53965019#53965019", "title": "How to fix &#39;NoMethodError&#39; error in views Ruby", "body": "<p>Your problem is that cards[4] is nil, you have to check for that and maybe put some defaults like this:</p>\n\n<pre><code>items.each_with_index do |cards, i|\n  if cards[4]\n    data = { color: cards[4].first.color,type: cards[4].first.card_class }\n  else\n    data = { color: 'default', type: 'default' }\n  end\n\n  .col-md.card-column{data: data}\n\nend\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 10840729, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YvZ-ZENdYLc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbu3HH78kkPEbx5PGCktp9p5VuVQg/mo/photo.jpg?sz=128", "display_name": "Artem", "link": "https://stackoverflow.com/users/10840729/artem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 53965019, "answer_count": 2, "score": 2, "last_activity_date": 1546037373, "creation_date": 1546035502, "question_id": 53964868, "link": "https://stackoverflow.com/questions/53964868/how-to-fix-nomethoderror-error-in-views-ruby", "title": "How to fix &#39;NoMethodError&#39; error in views Ruby", "body": "<p>I got a problem NoMethodError in Cards#card_list. </p>\n\n<p>I has a problem, it says problem in 3 line: </p>\n\n<pre><code>.placeholder2.container.visible.card_list.row\n- items.each_with_index do |cards, i|\n.col-md.card-column{data: {color: cards[4].first.color, type: cards[4].first.card_class}}\n  %h4\n    %span{class: \"icon-#{i == 4 ? ico_item : icon}\"}\n      = entities[i]\n</code></pre>\n\n<p>In log file it say:</p>\n\n<pre><code>ActionView::Template::Error (undefined method `first' for nil:NilClass):\n</code></pre>\n\n<p>My full code in this template:</p>\n\n<pre><code>.placeholder2.container.visible.card_list.row\n- items.each_with_index do |cards, i|\n.col-md.card-column{data: {color: cards[1].first.color, type: cards[1].first.card_class}}\n  %h4\n    %span{class: \"icon-#{i == 4 ? ico_item : icon}\"}\n      = entities[i]\n  - cards[1].each do |card|\n    .col-md-12.card_line.tooltip-card{style: \"padding:0px;margin:0;\", data: {id: card.id, color: card.color, type: card.card_class, rarity: card.rarity, set: card.card_set, eng_title: card.eng_title&amp;.downcase || '', title: card.title&amp;.downcase}}\n      = link_to card, class: \"#{color_class(card.color)}-card-tooltip card-tooltip\", target: '_blank' do\n        %div.cards_gr{class: \"bg1_#{color_class(card.color)}\", style: \"border-left: 4px solid #{rarity_color(card.rarity)};\"}\n          %div{:style =&gt; \"padding-right: 10px;float:left;\"}\n            - if card.card_class == 1\n              = image_tag card.hero_icon.url(:small), width: '20px', height: '20px', style: \"margin-top:-4px;\"\n            - elsif card.card_class == 3\n              %span{:style =&gt; \"font-size:14px;font-weight:bold;\"}= card.item_gold\n            - else\n              %span{:style =&gt; \"font-size:14px;font-weight:bold;\"}= card.manacost\n          = card.title\n</code></pre>\n\n<p>How i can fix it?</p>\n"}, {"tags": ["ruby", "http-post"], "answers": [{"tags": [], "owner": {"reputation": 7241, "user_id": 1096110, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XGVpR.jpg?s=128&g=1", "display_name": "Flavio Wuensche", "link": "https://stackoverflow.com/users/1096110/flavio-wuensche"}, "is_accepted": false, "score": 0, "last_activity_date": 1546034639, "creation_date": 1546034639, "answer_id": 53964743, "question_id": 53964410, "link": "https://stackoverflow.com/questions/53964410/send-a-http-post-request-to-an-api-in-ruby/53964743#53964743", "title": "Send a HTTP post request to an api in ruby", "body": "<p>I would recommend you to use the <a href=\"https://github.com/rest-client/rest-client\" rel=\"nofollow noreferrer\">REST Client</a> gem. </p>\n\n<h3>Installation</h3>\n\n<pre><code>gem install rest-client\n</code></pre>\n\n<h3>Usage</h3>\n\n<pre><code>require 'rest-client'\nRestClient.post(url, payload, headers={})\n</code></pre>\n\n<h3>Example</h3>\n\n<pre><code># with params\nRestClient.post(\n  'http://example.com/resource', \n  {param1: 'one', nested: {param2: 'two'}}\n)\n\n# with params and headers \nRestClient.post(\n  \"http://example.com/resource\", \n  {'x' =&gt; 1}.to_json,\n  {content_type: :json, accept: :json}\n)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10842498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a62c40ee6410b91b4cedbe7ef18f9f94?s=128&d=identicon&r=PG&f=1", "display_name": "ryuk", "link": "https://stackoverflow.com/users/10842498/ryuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1546051349, "creation_date": 1546032100, "last_edit_date": 1546051349, "question_id": 53964410, "link": "https://stackoverflow.com/questions/53964410/send-a-http-post-request-to-an-api-in-ruby", "title": "Send a HTTP post request to an api in ruby", "body": "<p>I am trying to send a post request to an other application in my local, using <code>after_create</code> callback in my model file.</p>\n\n<p>Receiving error as #&lt; Net::HTTPBadRequest 400 Bad Request readbody=true></p>\n\n<pre><code>require 'net/http'\ndef request_details\nuri = URI('http://localhost:4000/api/v1/requests/new')\nhttp = Net::HTTP.new(uri.host, uri.port)\n\nreq = Net::HTTP::Post.new(uri.path, {'Content-Type' =&gt; 'application/json'})\nreq.body = {data1: self.data1, data2: self.data2,data3: self.data3,data4: self.data4}.to_json\nresponse = http.request(req)\nend\n</code></pre>\n\n<p>While I am getting this on the other application's log:</p>\n\n<p><code>Started POST \"/api/v1/requests/new\" for 127.0.0.1 at 2018-12-29 01:20:43 +0530</code></p>\n\n<p><code>SELECT \"schema_migrations\".\"version\" FROM \"schema_migrations\" ORDER BY \"schema_migrations\".\"version\" ASC</code></p>\n\n<p>Can anyone figure the problem here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1546031810, "post_id": 53964215, "comment_id": 94766483, "body": "Have you tried using <a href=\"https://api.rubyonrails.org/v5.2.2/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to\" rel=\"nofollow noreferrer\"><code>button_to</code></a> instead of <code>button_tag</code>? That first method has more control over remote without needing to hack around with <code>data</code>."}, {"owner": {"reputation": 1583, "user_id": 5253108, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/o5DQ1.jpg?s=128&g=1", "display_name": "Trenton Tyler", "link": "https://stackoverflow.com/users/5253108/trenton-tyler"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1546032477, "post_id": 53964215, "comment_id": 94766679, "body": "That&#39;s embarrassing. I tried earlier with no success but that seems to have worked now. Thank you."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1546037366, "post_id": 53964215, "comment_id": 94768073, "body": "No shame in succeeding! If you&#39;ve got a working solution using that approach showing the adapted code as a self-answer would be educational to others."}], "answers": [{"tags": [], "owner": {"reputation": 1583, "user_id": 5253108, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/o5DQ1.jpg?s=128&g=1", "display_name": "Trenton Tyler", "link": "https://stackoverflow.com/users/5253108/trenton-tyler"}, "is_accepted": true, "score": 0, "last_activity_date": 1546199855, "creation_date": 1546199855, "answer_id": 53980965, "question_id": 53964215, "link": "https://stackoverflow.com/questions/53964215/rails-parameters-contain-backslashes/53980965#53980965", "title": "Rails parameters contain backslashes", "body": "<p>This seems to be an issue with <code>button_tag</code> in the feature I am using it for. </p>\n\n<p><code>button_tag</code> creates a button element that defines a submit button, resetbutton or a generic button which can be used in JavaScript. <code>button_tag</code> is also an action view helper but is defined as a FormTagHelper.</p>\n\n<p><code>button_to</code> generates a form containing a single button that submits to the URL created by the set of options. <code>button_to</code> is a UrlHelper while <code>button_tag</code> is a ViewHelper. </p>\n\n<p>Below is the <code>button_tag</code> code I was using which was creating the issue described above. Using <code>button_tag</code> fixed my parameters issue and also looks a bit cleaner. I hope this helps anybody else having issues with <code>button_tag</code> in the future. </p>\n\n<pre><code>&lt;%= button_tag \"#{answer.answer.titleize}\", class: 'btn btn-block btn-lg btn-primary', data: {\n    remote: true,\n    method: :post,\n    url:    answer_question_path(@question),\n    params: { answer_id: answer.id }\n  } %&gt;\n\n\n&lt;%= button_to \"#{answer.answer.titleize}\", \n      answer_question_path(@question), \n      class: 'btn btn-block btn-lg btn-primary',\n      params: { answer_id: answer.id },\n      remote: true %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1583, "user_id": 5253108, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/o5DQ1.jpg?s=128&g=1", "display_name": "Trenton Tyler", "link": "https://stackoverflow.com/users/5253108/trenton-tyler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 53980965, "answer_count": 1, "score": 1, "last_activity_date": 1546199855, "creation_date": 1546030653, "question_id": 53964215, "link": "https://stackoverflow.com/questions/53964215/rails-parameters-contain-backslashes", "title": "Rails parameters contain backslashes", "body": "<p>I am currently working with <code>button_tag</code> to create a remote styled answer submission quiz. When pressing this button, instead of posting the new record, it is throwing an error.</p>\n\n<p><code>ActiveRecord::RecordNotFound (Couldn't find Answer without an ID):</code></p>\n\n<p>When looking at the server logs I see it is trying to work with these params when trying to post <code>Parameters: {\"{\\\"answer_id\\\":59}\"=&gt;nil, \"id\"=&gt;\"15\"}</code></p>\n\n<p>What I am looking, or expecting to see is this. \n<code>Parameters: {\"answer_id\"=&gt;\"59\", \"id\"=&gt;\"15\"}</code></p>\n\n<p>Here is the <code>button_tag</code> I am using.</p>\n\n<pre><code>&lt;% @question.answers.each do |answer| %&gt;\n  &lt;%= button_tag \"#{answer.answer.titleize}\", class: 'btn btn-block btn-lg btn-primary', data: {\n    remote: true,\n    method: :post,\n    url:    answer_question_path(@question),\n    params: { answer_id: answer.id }\n  } %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Here is my response controller which is responsible for submitting the POST request.</p>\n\n<pre><code>class ResponsesController &lt; ApplicationController\n    def answer\n        question = Question.find(params[:id])\n        answer   = question.answers.find(params[:answer_id])\n        response = question.responses.find_or_initialize_by(user: current_user)\n\n        if response.update(answer: answer)\n            head :ok\n        else\n            puts 'Something went wrong chief' \n        end\n    end\n\n    private\n\n    def responses_params\n        params.require(:response).permit(:user_id, :question_id, :answer_id)\n    end\nend\n</code></pre>\n\n<p>I have tried using <code>to_json</code> on the parameter with no success and have not been able to find any solution elsewhere on SO or other forums. Any ideas? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nomethoderror", "ruby-on-rails-5.2"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10844341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ed579ac50c7171d7c2aa3c1d637a2ea?s=128&d=identicon&r=PG&f=1", "display_name": "ncux1699", "link": "https://stackoverflow.com/users/10844341/ncux1699"}, "edited": false, "score": 0, "creation_date": 1546029942, "post_id": 53963909, "comment_id": 94765915, "body": "@stulentsev Thanks, worked like a charm. Do you have any ideas why just Todo.create text: &quot;...&quot; didn&#39;t work? In walkthrough of this project it is written exactly that in check paragraph"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 3, "user_id": 10844341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ed579ac50c7171d7c2aa3c1d637a2ea?s=128&d=identicon&r=PG&f=1", "display_name": "ncux1699", "link": "https://stackoverflow.com/users/10844341/ncux1699"}, "edited": false, "score": 1, "creation_date": 1546031598, "post_id": 53963909, "comment_id": 94766423, "body": "@ncux1699 why yes, I do know :) Since rails 5 (if my memory serves me), <code>belongs_to</code> adds a required field. And there you&#39;re trying to create a todo without a project."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1546028567, "creation_date": 1546028567, "answer_id": 53963909, "question_id": 53963854, "link": "https://stackoverflow.com/questions/53963854/nomethoderror-undefined-method-each-for-todo0x000055f72c0896b0/53963909#53963909", "title": "NoMethodError (undefined method `each&#39; for #&lt;Todo:0x000055f72c0896b0&gt;)", "body": "<blockquote>\n  <p>what am i doing wrong</p>\n</blockquote>\n\n<p>You're passing a single todo into a method that expects a collection of todos.</p>\n\n<blockquote>\n  <p>how can i get it to work?</p>\n</blockquote>\n\n<p>Here's a more idiomatic way:  </p>\n\n<pre><code>project.todos.create(text: \"Some random task\")\n</code></pre>\n\n<p>Read this guide, it will be helpful: <a href=\"https://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/association_basics.html</a></p>\n"}], "owner": {"reputation": 3, "user_id": 10844341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ed579ac50c7171d7c2aa3c1d637a2ea?s=128&d=identicon&r=PG&f=1", "display_name": "ncux1699", "link": "https://stackoverflow.com/users/10844341/ncux1699"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 478, "favorite_count": 0, "accepted_answer_id": 53963909, "answer_count": 1, "score": 0, "last_activity_date": 1546028567, "creation_date": 1546028151, "question_id": 53963854, "link": "https://stackoverflow.com/questions/53963854/nomethoderror-undefined-method-each-for-todo0x000055f72c0896b0", "title": "NoMethodError (undefined method `each&#39; for #&lt;Todo:0x000055f72c0896b0&gt;)", "body": "<p>I'm trying to make simple web app with projects and some tasks for this project. Ubuntu 18.10 on Oracle VM, Ruby 2.5.3p105, Rails 5.2.2, Postgresql 10</p>\n\n<p>When i try to test it in rails console i can create project with no problems, but when i try to create todo i get this</p>\n\n<pre><code>2.5.3 :001 &gt; project = Project.create title: \"My project\"\n   (0.2ms)  BEGIN\n  Project Create (0.8ms)  INSERT INTO \"projects\" (\"title\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3) RETURNING \"id\"  [[\"title\", \"My project\"], [\"created_at\", \"2018-12-28 20:10:57.929619\"], [\"updated_at\", \"2018-12-28 20:10:57.929619\"]]\n   (15.1ms)  COMMIT\n =&gt; #&lt;Project id: 2, title: \"My project\", created_at: \"2018-12-28 20:10:57\", updated_at: \"2018-12-28 20:10:57\"&gt; \n2.5.3 :002 &gt; todo = Todo.create text: \"Some random task\"\n   (0.3ms)  BEGIN\n   (0.3ms)  ROLLBACK\n =&gt; #&lt;Todo id: nil, project_id: nil, text: \"Some random task\", created_at: nil, updated_at: nil, isCompleted: false&gt; \n2.5.3 :003 &gt; project.todos = Todo.create text: \"Some random task\"\n   (0.3ms)  BEGIN\n   (0.2ms)  ROLLBACK\nTraceback (most recent call last):\n        1: from (irb):3\nNoMethodError (undefined method `each' for #&lt;Todo:0x00007f7ab02c91d8&gt;)\n</code></pre>\n\n<p>This is my migrate</p>\n\n<pre><code>class CreateProjects &lt; ActiveRecord::Migration[5.2]\n  def change\n    create_table :projects do |t|\n      t.string :title\n      t.timestamps\n    end\n\n    create_table :todos do |t|\n      t.belongs_to :project, index: true\n      t.text :text\n      t.timestamps\n    end\n    add_column :todos, :isCompleted, :boolean, :default =&gt; false\n  end\nend\n</code></pre>\n\n<p>This is my project and todo models</p>\n\n<pre><code>class Project &lt; ApplicationRecord\n  has_many :todos\nend\n\nclass Todo &lt; ApplicationRecord\n  belongs_to :project\nend \n</code></pre>\n\n<p>So what am i doing wrong and how can i get it to work?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 570, "user_id": 2048680, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-ZNA8X0AjzPk/AAAAAAAAAAI/AAAAAAAAABg/H5jHKT7CRdk/photo.jpg?sz=128", "display_name": "Conor", "link": "https://stackoverflow.com/users/2048680/conor"}, "edited": false, "score": 4, "creation_date": 1546025474, "post_id": 53963330, "comment_id": 94764495, "body": "You could use <code>SecureRandom.base64</code>, this will generate a random base64 string. <code>SecureRandom.base64(75)</code> will get you to 100 characters. ref: <a href=\"https://ruby-doc.org/stdlib-1.9.3/libdoc/securerandom/rdoc/SecureRandom.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-1.9.3/libdoc/securerandom/rdoc/&hellip;</a>"}, {"owner": {"reputation": 31, "user_id": 10408562, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fdcYHiRPBRM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVVmX-eo4YpFLxn9hLhhJoinba3PA/mo/photo.jpg?sz=128", "display_name": "AA.", "link": "https://stackoverflow.com/users/10408562/aa"}, "reply_to_user": {"reputation": 570, "user_id": 2048680, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-ZNA8X0AjzPk/AAAAAAAAAAI/AAAAAAAAABg/H5jHKT7CRdk/photo.jpg?sz=128", "display_name": "Conor", "link": "https://stackoverflow.com/users/2048680/conor"}, "edited": false, "score": 0, "creation_date": 1546025622, "post_id": 53963330, "comment_id": 94764540, "body": "looking into this right now... ill report back if it works!"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1546028604, "post_id": 53963330, "comment_id": 94765541, "body": "<code>SecureRandom.hex</code> is an alternative if you want to ensure the string is purely alphanumeric."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1546032722, "post_id": 53963330, "comment_id": 94766750, "body": "As this is a pure-Ruby question <code>require &#39;securerandom&#39; is needed to use </code>SecureRandom` methods."}], "answers": [{"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": true, "score": 3, "last_activity_date": 1546025399, "creation_date": 1546025399, "answer_id": 53963442, "question_id": 53963330, "link": "https://stackoverflow.com/questions/53963330/how-to-write-a-method-in-ruby-that-increments-a-passed-in-string-by-x-amount-of/53963442#53963442", "title": "How to write a method in Ruby that increments a passed in string by X amount of random characters", "body": "<p>Maybe this can work for you:</p>\n\n<pre><code>100.times.map{ ('a'..'z').to_a.sample }.join('')\n#=&gt; \"jbcyklmcdaxzpucrrlguzfdmipnkmqllowziirdvcysjmyxirjnagoojazepxxmzzysonjicbjtgqinkvenastfmuvayefrxjjhn\"\n</code></pre>\n\n<p>Or, to get more chars:</p>\n\n<pre><code>chars = [*('A'..'Z'), *('a'..'z'), *('0'..'9')]\n100.times.map{ chars.sample }.join('')\n#=&gt; \"3kwsbKYTmXR9qmmC1JDdAkIP1tqA89L0ABF1et2drpPMUVP01qUHbmynB4iOzsGrmYzCdpva98boqoR2q6tIcOAvNb0ZiQ9tkkLr\"\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10408562, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fdcYHiRPBRM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVVmX-eo4YpFLxn9hLhhJoinba3PA/mo/photo.jpg?sz=128", "display_name": "AA.", "link": "https://stackoverflow.com/users/10408562/aa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 53963442, "answer_count": 1, "score": -1, "last_activity_date": 1546600027, "creation_date": 1546024751, "question_id": 53963330, "link": "https://stackoverflow.com/questions/53963330/how-to-write-a-method-in-ruby-that-increments-a-passed-in-string-by-x-amount-of", "title": "How to write a method in Ruby that increments a passed in string by X amount of random characters", "body": "<p>I am new to ruby. I vaguely remember utilizing incremental functions in Java, e.g.</p>\n\n<pre><code>for i = 0; i &lt; 100; i++\n</code></pre>\n\n<p>I am stress testing a text box by adding a LOT of characters to the end of a sentence to see if the text box works under such circumstances. .succ is not helping me. im trying to add 100 randomized characters to the end of a string.</p>\n"}]