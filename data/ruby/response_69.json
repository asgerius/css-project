[{"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 2736, "user_id": 592229, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d23e0616c0b2862d2226ea0792c920cc?s=128&d=identicon&r=PG", "display_name": "ezuk", "link": "https://stackoverflow.com/users/592229/ezuk"}, "edited": false, "score": 1, "creation_date": 1462406605, "post_id": 37040116, "comment_id": 61629964, "body": "this uses exceptions for flow control :("}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1462406463, "creation_date": 1462406463, "answer_id": 37040116, "question_id": 37040040, "link": "https://stackoverflow.com/questions/37040040/ruby-double-pipe-usage/37040116#37040116", "title": "Ruby double pipe usage", "body": "<p>A lazy way is:</p>\n\n<pre><code>begin\n  File.read(\"/app/public/front-end/public/JSONModels/IdPairing/Text.json\")\nrescue\n  File.read(\"public/front-end/public/JSONModels/IdPairing/Text.json\")\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1462406660, "post_id": 37040127, "comment_id": 61629978, "body": "To properly indent multiple lines of code, indent them by four spaces or press the &quot;<code>{}</code>&quot; button in the formatting toolbar which will do it for you."}, {"owner": {"reputation": 25, "user_id": 6293234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aacffb14207429ecbb90075215ae6df2?s=128&d=identicon&r=PG&f=1", "display_name": "Jokingpsh", "link": "https://stackoverflow.com/users/6293234/jokingpsh"}, "edited": false, "score": 0, "creation_date": 1462407180, "post_id": 37040127, "comment_id": 61630107, "body": "I just did as what you said and your syntax works in rails console but when I actually run the app in development environment, it gives me an error saying the syntax is wrong. Does this syntax not work in Rails app?"}, {"owner": {"reputation": 2736, "user_id": 592229, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d23e0616c0b2862d2226ea0792c920cc?s=128&d=identicon&r=PG", "display_name": "ezuk", "link": "https://stackoverflow.com/users/592229/ezuk"}, "edited": false, "score": 0, "creation_date": 1462407897, "post_id": 37040127, "comment_id": 61630265, "body": "Should work. Do you want to update your original q with your current code?"}], "tags": [], "owner": {"reputation": 2736, "user_id": 592229, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d23e0616c0b2862d2226ea0792c920cc?s=128&d=identicon&r=PG", "display_name": "ezuk", "link": "https://stackoverflow.com/users/592229/ezuk"}, "is_accepted": true, "score": 0, "last_activity_date": 1462407944, "last_edit_date": 1462407944, "creation_date": 1462406544, "answer_id": 37040127, "question_id": 37040040, "link": "https://stackoverflow.com/questions/37040040/ruby-double-pipe-usage/37040127#37040127", "title": "Ruby double pipe usage", "body": "<h1>Why it doesn't work for you:</h1>\n\n<pre><code>irb(main):001:0&gt; File.read(\"some made up name\")\nErrno::ENOENT: No such file or directory - some made up name\n        from (irb):1:in `read'\n        from (irb):1\n        from /usr/bin/irb:12:in `&lt;main&gt;'\nirb(main):002:0&gt; File.read(\"some made up name\" || \"Gemfile\")\nErrno::ENOENT: No such file or directory - some made up name\n        from (irb):2:in `read'\n        from (irb):2\n        from /usr/bin/irb:12:in `&lt;main&gt;'\n</code></pre>\n\n<p>As you can see, when you try to read a file that doesn't exist, Ruby explodes.</p>\n\n<p>That's what <a href=\"http://ruby-doc.org/core-2.2.0/File.html#method-c-exist-3F\" rel=\"nofollow\">exist?</a> is for.</p>\n\n<h1>What you should do</h1>\n\n<pre><code>irb(main):003:0&gt; filename = File.exist?(\"some made up name\") ? \"some made up name\" : \"Gemfile\"\n=&gt; \"Gemfile\"\nirb(main):004:0&gt; File.read(filename)\n</code></pre>\n\n<p>That's one way to do it, at least.</p>\n"}, {"tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 0, "last_activity_date": 1462407229, "creation_date": 1462407229, "answer_id": 37040231, "question_id": 37040040, "link": "https://stackoverflow.com/questions/37040040/ruby-double-pipe-usage/37040231#37040231", "title": "Ruby double pipe usage", "body": "<p>I would suggest to put those paths into an environment specific config file. Take a look at <a href=\"https://github.com/railsconfig/config\" rel=\"nofollow\">railsconfig/config</a> on GitHub.</p>\n\n<p>After you have installed the gem, you can add a configuration to <code>config/settings/&lt;RAILS_ENV&gt;.yml</code> like</p>\n\n<pre><code>json_file: /app/public/front-end/public/JSONModels/IdPairing/Text.json\n</code></pre>\n\n<p>where <code>&lt;RAILS_ENV&gt;</code> can be <code>development</code>, <code>test</code>, <code>production</code> or a custom environment.</p>\n\n<p>And in your code, just </p>\n\n<pre><code>File.read(Settings.json_file)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1462407497, "creation_date": 1462407497, "answer_id": 37040257, "question_id": 37040040, "link": "https://stackoverflow.com/questions/37040040/ruby-double-pipe-usage/37040257#37040257", "title": "Ruby double pipe usage", "body": "<p>If you want to try these in sequence, define a list first:</p>\n\n<pre><code>FILES = [\n  \"/app/public/front-end/public/JSONModels/IdPairing/Text.json\",\n  \"public/front-end/public/JSONModels/IdPairing/Text.json\"\n]\n</code></pre>\n\n<p>Then you can simply open the first one that exists:</p>\n\n<pre><code>path = FILES.find { |f| File.exists?(f) }\n\nFile.open(path)\n</code></pre>\n\n<p>The problem was that <code>\"string\" || \"string\"</code> will never work, the first string is logically true and the rest is irrelevant and ignored.</p>\n"}], "owner": {"reputation": 25, "user_id": 6293234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aacffb14207429ecbb90075215ae6df2?s=128&d=identicon&r=PG&f=1", "display_name": "Jokingpsh", "link": "https://stackoverflow.com/users/6293234/jokingpsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 1, "accepted_answer_id": 37040127, "answer_count": 4, "score": 0, "last_activity_date": 1462407944, "creation_date": 1462406036, "question_id": 37040040, "link": "https://stackoverflow.com/questions/37040040/ruby-double-pipe-usage", "title": "Ruby double pipe usage", "body": "<p>I have a file which have different paths for remote server and local server.</p>\n\n<pre><code>Remote server path:\n\"/app/public/front-end/public/JSONModels/IdPairing/Text.json\"\nLocal server path:\n\"public/front-end/public/JSONModels/IdPairing/Text.json\"\n</code></pre>\n\n<p>I basically wanna make sure my app finds correct path for the file regardless of which server I'm at.</p>\n\n<p>So I found something like double pipe ( || ) in Ruby syntax like below:</p>\n\n<pre><code>File.read(\"/app/public/front-end/public/JSONModels/IdPairing/Text.json\" || \"public/front-end/public/JSONModels/IdPairing/Text.json\")\n</code></pre>\n\n<p>But it seems like it only reads the first path. How do you make sure it reads the second path if the file is not being found in the first path?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "json"], "comments": [{"owner": {"reputation": 781, "user_id": 3802059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00bc9b09003456393fe147dce385b444?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/3802059/ian"}, "edited": false, "score": 0, "creation_date": 1462405565, "post_id": 37039892, "comment_id": 61629704, "body": "Does this still occur if you comment out the first middigests.read?"}], "answers": [{"comments": [{"owner": {"reputation": 458, "user_id": 3969195, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/yBppw.jpg?s=128&g=1", "display_name": "Keaton Burleson", "link": "https://stackoverflow.com/users/3969195/keaton-burleson"}, "edited": false, "score": 0, "creation_date": 1462409843, "post_id": 37039985, "comment_id": 61630792, "body": "thank you so much! Thats kinda weird, but I guess thats how ruby works :)"}], "tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": true, "score": 6, "last_activity_date": 1462405680, "creation_date": 1462405680, "answer_id": 37039985, "question_id": 37039892, "link": "https://stackoverflow.com/questions/37039892/a-json-text-must-at-least-contain-two-octets-jsonparsererror/37039985#37039985", "title": "A JSON text must at least contain two octets! (JSON::ParserError)", "body": "<p>You have a duplicate call to <code>read()</code> at the point that it all goes wrong.  Replace the second call to <code>read()</code> with the variable <code>mddigests</code> and all should be fine.</p>\n\n<p>This code should work like you'd expect:</p>\n\n<pre><code>if File.file?(\"md5.json\")\n  puts \"MD5s exists\"\n  mddigests = File.open(\"md5.json\", \"r\")\n  digests = mddigests.read\n  puts \"MD5s\" + digests\n  items = JSON.parse(digests)   #&lt;--- This should work now!\n  puts items[\"feed.xml\"]\nend\n</code></pre>\n\n<p>The reason is that the file pointer is moved after the first <code>read()</code>, and by the second <code>read()</code>, it's at the end of file, hence the message requiring at least 2 octets.</p>\n"}], "owner": {"reputation": 458, "user_id": 3969195, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/yBppw.jpg?s=128&g=1", "display_name": "Keaton Burleson", "link": "https://stackoverflow.com/users/3969195/keaton-burleson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7718, "favorite_count": 0, "accepted_answer_id": 37039985, "answer_count": 1, "score": 5, "last_activity_date": 1462405680, "creation_date": 1462405081, "question_id": 37039892, "link": "https://stackoverflow.com/questions/37039892/a-json-text-must-at-least-contain-two-octets-jsonparsererror", "title": "A JSON text must at least contain two octets! (JSON::ParserError)", "body": "<p>I'm working with a Ruby script that reads a .json file.</p>\n\n<p>Here is the JSON file:</p>\n\n<pre><code>{\n  \"feed.xml\": \"93d5b140dd2b4779edef0347ac835fb1\",\n  \"index.html\": \"1cbe25936e392161bad6074d65acdd91\",\n  \"md5.json\": \"655d7c1dbf83a271f348a50a44ba4f6a\",\n  \"test.sh\": \"9be192b1b5a9978cb3623737156445fd\",\n  \"index.html\": \"c064e204040cde216d494776fdcfb68f\",\n  \"main.css\": \"21b13d87db2186d22720e8c881a78580\",\n  \"welcome-to-jekyll.html\": \"01d7c7d66bdeecd9cd69feb5b4b4184d\"\n}\n</code></pre>\n\n<p>It is completely valid, and is checked for its existence before trying to read from it. Example:</p>\n\n<pre><code>if File.file?(\"md5.json\")\n  puts \"MD5s exists\"\n  mddigests = File.open(\"md5.json\", \"r\")\n  puts \"MD5s\" + mddigests.read\n  items = JSON.parse(mddigests.read) &lt;--- Where it all goes wrong.\n  puts items[\"feed.xml\"]\n</code></pre>\n\n<p>Everything works up until that point:</p>\n\n<pre><code>MD5s exists\nMD5s{\n  \"feed.xml\": \"93d5b140dd2b4779edef0347ac835fb1\",\n  \"index.html\": \"1cbe25936e392161bad6074d65acdd91\",\n  \"md5.json\": \"655d7c1dbf83a271f348a50a44ba4f6a\",\n  \"test.sh\": \"9be192b1b5a9978cb3623737156445fd\",\n  \"index.html\": \"c064e204040cde216d494776fdcfb68f\",\n  \"main.css\": \"21b13d87db2186d22720e8c881a78580\",\n  \"welcome-to-jekyll.html\": \"01d7c7d66bdeecd9cd69feb5b4b4184d\"\n}\ncommon.rb:156:in `initialize': A JSON text must at least contain two octets! (JSON::ParserError)\n</code></pre>\n\n<p>I've searched and tried a lot of different things, to no avail. I'm stumped. Thanks!</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 1, "creation_date": 1462414652, "post_id": 37039504, "comment_id": 61631861, "body": "...which is why it&#39;s usually a very bad idea to use something as mutable as a hash as a key.  Anyone with a reference to it can change it, and there is no guarantee that he/she will know to rehash it, or bother to do so."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 7, "last_activity_date": 1462402803, "creation_date": 1462402803, "answer_id": 37039504, "question_id": 37039465, "link": "https://stackoverflow.com/questions/37039465/why-cant-i-put-a-hash-inside-itself-as-a-key/37039504#37039504", "title": "Why can&#39;t I put a hash inside itself as a key?", "body": "<p>It is not that you cannot. You just need to rehash after you modify a mutable key in the hash.</p>\n\n<pre><code>a = {}\nb = {}\na[b] = b\na[:a] = a\na[a] = a\n\na.rehash\n# =&gt; {{}=&gt;{}, :a=&gt;{...}, {...}=&gt;{...}}\na[a] == a\n# =&gt; true\n</code></pre>\n\n<p>The <code>a</code> is different before and after <code>a[a] = a</code>. So you needed to update the <code>a</code> key of <code>a</code>.</p>\n"}], "owner": {"reputation": 178, "user_id": 3821061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db5b26e2eaf048f6630218876cf094e?s=128&d=identicon&r=PG&f=1", "display_name": "spejamchr", "link": "https://stackoverflow.com/users/3821061/spejamchr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 37039504, "answer_count": 1, "score": 2, "last_activity_date": 1462402803, "creation_date": 1462402574, "question_id": 37039465, "link": "https://stackoverflow.com/questions/37039465/why-cant-i-put-a-hash-inside-itself-as-a-key", "title": "Why can&#39;t I put a hash inside itself as a key?", "body": "<p>I can use hashes as keys and values:</p>\n\n<pre><code>a = {}\nb = {}\na[b] = b\na          #=&gt; {{}=&gt;{}}\na[b] == b  #=&gt; true\n</code></pre>\n\n<p>I can even put a hash inside itself as a value:</p>\n\n<pre><code>a[:a] = a\na          #=&gt; {{}=&gt;{}, :a=&gt;{...}}\na == a[:a] #=&gt; true\n</code></pre>\n\n<p>But I can't put a hash inside itself as a key:</p>\n\n<pre><code>a[a] = a\na          #=&gt; {{}=&gt;{}, {...}=&gt;{...}}\na[a]       #=&gt; nil\na[a] == a  #=&gt; false\n</code></pre>\n\n<p>I would expect <code>a == a[a] #=&gt; true</code> in this case.</p>\n\n<p>Why does this happen? I don't have a use case for this, I'm just curious about why a hash can't be used as it's own key.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3720516"}, "is_accepted": false, "score": 3, "last_activity_date": 1462403121, "creation_date": 1462403121, "answer_id": 37039561, "question_id": 37039367, "link": "https://stackoverflow.com/questions/37039367/missingtemplate-in-pageshome/37039561#37039561", "title": "MissingTemplate in Pages#home", "body": "<p>Within your code you called</p>\n\n<pre><code>&lt;%= render 'layout/messages' %&gt;\n</code></pre>\n\n<p>but you did not include the file \"_messages.html.erb\" within the \"app/views/layouts\" folder. Simply create a \"_messages.html.erb\" file within the layouts folder and you should be good to go.</p>\n"}], "owner": {"reputation": 55, "user_id": 5931828, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/5b2a4c96f15fa14ee2b0db09664aeeea?s=128&d=identicon&r=PG&f=1", "display_name": "stanley wendo", "link": "https://stackoverflow.com/users/5931828/stanley-wendo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462407210, "creation_date": 1462402068, "last_edit_date": 1462407210, "question_id": 37039367, "link": "https://stackoverflow.com/questions/37039367/missingtemplate-in-pageshome", "title": "MissingTemplate in Pages#home", "body": "<p>I tried opening my homepage blog on <strong>localhost:3000/pages/home</strong> and I got this error message: Missing Template` in Pages#home. I don't know what I'm missing. Still fairly new with ruby. I added an additional link in my homepage previously and maybe that's the reason. The code for my <strong>home.html.erb</strong> is below. Your assistance is sought and highly appreciated.</p>\n\n<pre><code>&lt;h1&gt;this the alpha-blog page&lt;/h1&gt;\n&lt;h2&gt;Spectacular Mountain&lt;/h2&gt;\n&lt;img src=\"pic_mountain.jpg\" alt=\"Mountain View\" style=\"width:304px;height:228px;\"&gt;\n&lt;%= link_to \"Alpha-blog\", articles_path %&gt; |&lt;%=link_to\"About\",about_path %&gt;\n\n\nAction View::Missing Template in Pages#home\nShowing /home/nitrous/code/rails_projects/alpha-blog/app/views/layouts/application.html.erb where line #10 raised:\n\nMissing partial layout/_messages with {:locale=&gt;[:en], :formats=&gt;[:html], :variants=&gt;[], :handlers=&gt;[:erb, :builder, :raw, :ruby, :coffee, :jbuilder]}. Searched in:\n\n* \"/home/nitrous/code/rails_projects/alpha-blog/app/views\"\nExtracted source (around line #10):\n8\n9\n10\n11\n12\n13\n\n&lt;/head&gt;\n&lt;body&gt;\n&lt;%= render 'layout/messages' %&gt;\n&lt;% yield% &gt;\n\n&lt;/body&gt;\n\nRails.root: /home/nitrous/code/rails_projects/alpha-blog\n\nApplication Trace | Framework Trace | Full Trace\napp/views/layouts/application.html.erb:10:in `_app_views_layouts_application_html_erb__148494832947707035_40406660'\n</code></pre>\n\n<p>My **config/routes.rb* looks like this </p>\n\n<pre><code>Rails.application.routes.draw do\n  root 'pages#home'\n  get 'about', to:'pages#about'\n  resources :articles\nend\n</code></pre>\n"}, {"tags": ["python", "ruby", "rubypython"], "comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1462401024, "post_id": 37039129, "comment_id": 61628276, "body": "Could you show us the full error message please?"}, {"owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1462401161, "post_id": 37039129, "comment_id": 61628327, "body": "@Schwern just added it now, thanks."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462401608, "post_id": 37039129, "comment_id": 61628475, "body": "Does RubyPython depend on having a particular version of Python also installed?"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1462401651, "post_id": 37039129, "comment_id": 61628483, "body": "Do you have <code>python</code> installed and in your PATH?"}, {"owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462401744, "post_id": 37039129, "comment_id": 61628507, "body": "@tadman RubyPython doesn&#39;t support python &gt; 3.0"}, {"owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1462401805, "post_id": 37039129, "comment_id": 61628518, "body": "@Schwern I am checking the version now with python --version.....I didn&#39;t have python installed.   When I read the documentation, I read it as the gem came with a python vm."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1462404387, "post_id": 37039129, "comment_id": 61629326, "body": "This didn&#39;t work for me either. I don&#39;t think this question is really specific to RSpec, but rather how to get the correct Python version loaded."}, {"owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "edited": false, "score": 0, "creation_date": 1462404730, "post_id": 37039129, "comment_id": 61629423, "body": "I added the console above: 2.7.6 but I still get the error of invalid interpreter.  How do I confirm the right path?"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1462410223, "post_id": 37039129, "comment_id": 61630897, "body": "I believe you have to install python yourself. And it has to be Python 2.x."}, {"owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1462484894, "post_id": 37039129, "comment_id": 61668620, "body": "@maxpleaner I have python 2.7.6 loaded.  It should be supported, but I still get an error.  Looking at how to explicitly point to this as the interpreter."}, {"owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1462487794, "post_id": 37039129, "comment_id": 61669739, "body": "@maxpleaner -- I do, in fact, have python and the path correct.  If it type python2.7, I enter the python console. But it still doesn&#39;t work, even when I explicitly name the interpreter."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1462489093, "post_id": 37039129, "comment_id": 61670198, "body": "@Angela I tried it (on ubuntu) and I have the same issue as you, not sure how to fix it."}, {"owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1462562159, "post_id": 37039129, "comment_id": 61704464, "body": "@maxpleaner --- argh, thanks I have been running on ubuntu as well.  I logged a ticket with the repo.  ugh.  Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 326, "user_id": 1864937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa0a0823fd9f951b2f580a7c2f9c8f06?s=128&d=identicon&r=PG", "display_name": "mkfs", "link": "https://stackoverflow.com/users/1864937/mkfs"}, "is_accepted": false, "score": 1, "last_activity_date": 1473534132, "creation_date": 1473534132, "answer_id": 39429567, "question_id": 37039129, "link": "https://stackoverflow.com/questions/37039129/how-to-test-python-code-with-ruby-rspec/39429567#39429567", "title": "How to test Python code with Ruby rspec?", "body": "<p>I've run into this problem a few times when working with RubyPython on a recent Debian build.</p>\n\n<p>The problem lies in the <strong>RubyPython::Interpreter#find_python_lib</strong> method. This method uses hard-coded paths and OS detection to find the library, instead of invoking python-config.</p>\n\n<p>I use the following code to repair the method:</p>\n\n<pre><code>require \"rubypython\"\nclass RubyPython::Interpreter\n  alias :find_python_lib_orig :find_python_lib\n\n  def find_python_lib\n    @libbase = \"#{::FFI::Platform::LIBPREFIX}#{@version_name}\"\n    @libext = ::FFI::Platform::LIBSUFFIX\n    @libname = \"#{@libbase}.#{@libext}\"\n\n    # python-config --confdir provides location of .so\n    config_util = \"#{version_name}-config\"\n    confdir = %x(#{config_util} --configdir).chomp\n\n    library = File.join(confdir, @libname)\n    if (File.exist? library)\n      @locations = [ library ]\n    else\n      library = find_python_lib_orig\n    end\n    library\n  end\nend\n\nRubyPython.start(:python_exe =&gt; \"/usr/bin/python2.7\") \n</code></pre>\n\n<p>This calls the original (flawed) method if pythonconfig fails to find the library.</p>\n"}], "owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1473534132, "creation_date": 1462400942, "last_edit_date": 1462487758, "question_id": 37039129, "link": "https://stackoverflow.com/questions/37039129/how-to-test-python-code-with-ruby-rspec", "title": "How to test Python code with Ruby rspec?", "body": "<p>I tried to test <code>rubypython</code> with the following:</p>\n\n<pre><code>bundle exec irb\nrequire 'rubypython'\nRubyPython.start\n</code></pre>\n\n<p>This resulted in an error.  </p>\n\n<p>The error message is:</p>\n\n<pre><code>Python-2.7.5  python --version\nPython 2.7.6\n\u279c  Python-2.7.5  cd ..\n\u279c  code  ls\ndesign  Gemfile  Gemfile.lock  Python-2.7.5  Python-2.7.5.tgz  ratelimit_spec.rb\n\u279c  code  bundle exec irb\nirb(main):001:0&gt; require 'rubypython'\n=&gt; true\nirb(main):002:0&gt; RubyPython.start\nRubyPython::InvalidInterpreter: An invalid interpreter was specified.\n</code></pre>\n\n<p>Python 2.7 has been installed:\n<code>\nirb(main):002:0&gt; RubyPython.start(:python_exec =&gt; 'python2.7')\nRubyPython::InvalidInterpreter: An invalid interpreter was specified.\n    from /home/nitrous/code/.bundle/gems/rubypython-0.6.3/lib/rubypython.rb:67:in `block in start'\n    from /home/nitrous/code/.bundle/gems/rubypython-0.6.3/lib/rubypython/python.rb:10:in `synchronize'\n    from /home/nitrous/code/.bundle/gems/rubypython-0.6.3/lib/rubypython/python.rb:10:in `synchronize'\n    from /home/nitrous/code/.bundle/gems/rubypython-0.6.3/lib/rubypython.rb:54:in `start'\n    from (irb):2\n    from /usr/local/opt/rbenv/versions/2.1.5/bin/irb:11:in `&lt;main&gt;'\n</code></p>\n\n<p>The documentation suggested that I would be able to run Python that has been imported using Ruby and, in my case, test via Rspec, but it doesn't.</p>\n\n<p>Should I be able to import and then run Python from within Ruby?</p>\n"}, {"tags": ["ruby", "hash"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 3827, "user_id": 886033, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e2a06542af3425f29588639cd9785f5e?s=128&d=identicon&r=PG", "display_name": "Favourite Onwuemene", "link": "https://stackoverflow.com/users/886033/favourite-onwuemene"}, "edited": false, "score": 1, "creation_date": 1462401838, "post_id": 37039142, "comment_id": 61628532, "body": "The <code>Hash.new</code> block is called each time a new key is populated and while you&#39;re not obligated to do anything to the hash, usually it&#39;s a good idea to alter it. Unless you call <code>h[k] = ...</code> or something like that your values are independent of the hash and aren&#39;t saved."}, {"owner": {"reputation": 3827, "user_id": 886033, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e2a06542af3425f29588639cd9785f5e?s=128&d=identicon&r=PG", "display_name": "Favourite Onwuemene", "link": "https://stackoverflow.com/users/886033/favourite-onwuemene"}, "edited": false, "score": 0, "creation_date": 1462401954, "post_id": 37039142, "comment_id": 61628576, "body": "Thanks!  Why does this work?      test_hash = Hash.new{|h, k| [] }     test_hash +=  [&#39;something&#39;]"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 3827, "user_id": 886033, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e2a06542af3425f29588639cd9785f5e?s=128&d=identicon&r=PG", "display_name": "Favourite Onwuemene", "link": "https://stackoverflow.com/users/886033/favourite-onwuemene"}, "edited": false, "score": 0, "creation_date": 1462402203, "post_id": 37039142, "comment_id": 61628650, "body": "I get &quot;undefined method `+&#39; for {}:Hash (NoMethodError)&quot;, which is not surprising. That shouldn&#39;t work."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 3827, "user_id": 886033, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e2a06542af3425f29588639cd9785f5e?s=128&d=identicon&r=PG", "display_name": "Favourite Onwuemene", "link": "https://stackoverflow.com/users/886033/favourite-onwuemene"}, "edited": false, "score": 1, "creation_date": 1462402313, "post_id": 37039142, "comment_id": 61628683, "body": "If you mean <code>test_hash[1] += [ &#39;test&#39; ]</code> then I presume it&#39;s because this also calls <code>test_hash[1] = [ &#39;test&#39; ]</code> which forces a direct assignment. Your two level version can&#39;t benefit from this quirk."}, {"owner": {"reputation": 3827, "user_id": 886033, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e2a06542af3425f29588639cd9785f5e?s=128&d=identicon&r=PG", "display_name": "Favourite Onwuemene", "link": "https://stackoverflow.com/users/886033/favourite-onwuemene"}, "edited": false, "score": 0, "creation_date": 1462402320, "post_id": 37039142, "comment_id": 61628685, "body": "Typo, I meant: test_hash = Hash.new{|h, k| [] } test_hash[1] += [&#39;something&#39;]"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 3827, "user_id": 886033, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e2a06542af3425f29588639cd9785f5e?s=128&d=identicon&r=PG", "display_name": "Favourite Onwuemene", "link": "https://stackoverflow.com/users/886033/favourite-onwuemene"}, "edited": false, "score": 1, "creation_date": 1462402372, "post_id": 37039142, "comment_id": 61628703, "body": "Note that <code>test_hash[1] &lt;&lt; &#39;test&#39;</code> doesn&#39;t work because the assignment operator is not involved. Your implementation only works by coincidence. The correct way to do it is to force an assignment in the block, that way values are always nailed down."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 3827, "user_id": 886033, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e2a06542af3425f29588639cd9785f5e?s=128&d=identicon&r=PG", "display_name": "Favourite Onwuemene", "link": "https://stackoverflow.com/users/886033/favourite-onwuemene"}, "edited": false, "score": 0, "creation_date": 1462402495, "post_id": 37039142, "comment_id": 61628746, "body": "Hope that explains it! Sometimes stuff in Ruby sort of kind of not quite works and it can be really confusing if you don&#39;t know the reason why."}, {"owner": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "edited": false, "score": 1, "creation_date": 1472913965, "post_id": 37039142, "comment_id": 65948775, "body": "The inner hash construction can simply be <code>Hash.new(0)</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "edited": false, "score": 0, "creation_date": 1472945601, "post_id": 37039142, "comment_id": 65957289, "body": "@AndrewMarshall Not sure why I didn&#39;t do that in the first place. Adjusted."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 4, "last_activity_date": 1472945589, "last_edit_date": 1472945589, "creation_date": 1462401007, "answer_id": 37039142, "question_id": 37039102, "link": "https://stackoverflow.com/questions/37039102/strange-behavior-when-updating-hash-with-default-proc-using/37039142#37039142", "title": "Strange Behavior when updating hash with default proc using +=", "body": "<p>You're not actually assigning the value to the Hash, you're just returning a Hash and an independent 0 value. These get modified, then thrown away.</p>\n\n<p>Fix this by performing an assignment:</p>\n\n<pre><code>test_hash = Hash.new { |h,k|\n  h[k] = Hash.new(0)\n}\n</code></pre>\n\n<p>You can tell something was wrong because after accessing <code>test_hash[1][1]</code> then calling <code>test_hash.inspect</code> it's still empty.</p>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1462401663, "creation_date": 1462401663, "answer_id": 37039286, "question_id": 37039102, "link": "https://stackoverflow.com/questions/37039102/strange-behavior-when-updating-hash-with-default-proc-using/37039286#37039286", "title": "Strange Behavior when updating hash with default proc using +=", "body": "<p>tadman's answer is (halfway) correct, but may be a bit misleading.</p>\n\n<p>You are assigning a value to the embedded hash, but not assigning the embedded hash to the main hash. Each time a key is called in the main hash, a new embedded hash is created. After you have assigned a value to the embedded hash, the embedded hash that has become <code>{1 =&gt; 1}</code> is not assigned to the main hash, and is thrown away.</p>\n"}], "owner": {"reputation": 3827, "user_id": 886033, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e2a06542af3425f29588639cd9785f5e?s=128&d=identicon&r=PG", "display_name": "Favourite Onwuemene", "link": "https://stackoverflow.com/users/886033/favourite-onwuemene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "closed_date": 1494044600, "answer_count": 2, "score": 0, "last_activity_date": 1472945589, "creation_date": 1462400786, "last_edit_date": 1462401383, "question_id": 37039102, "link": "https://stackoverflow.com/questions/37039102/strange-behavior-when-updating-hash-with-default-proc-using", "closed_reason": "Duplicate", "title": "Strange Behavior when updating hash with default proc using +=", "body": "<p>Why is this hash:</p>\n\n<pre><code>test_hash = Hash.new{|hash, key|\n              Hash.new{|second_level_hash, second_level_key| 0 }\n            }\n</code></pre>\n\n<p>not updated by the following operation?</p>\n\n<pre><code>test_hash[1][1] += 1\ntest_hash[1][1] # =&gt; 0\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "mongoid"], "comments": [{"owner": {"reputation": 1393, "user_id": 6206501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JENfJ.jpg?s=128&g=1", "display_name": "Abhilash Reddy", "link": "https://stackoverflow.com/users/6206501/abhilash-reddy"}, "edited": false, "score": 0, "creation_date": 1492686925, "post_id": 37038849, "comment_id": 74088944, "body": "Why don&#39;t you go and check the gem&#39;s documentation?"}], "answers": [{"comments": [{"owner": {"reputation": 2565, "user_id": 4733584, "user_type": "registered", "profile_image": "https://graph.facebook.com/883488668361599/picture?type=large", "display_name": "Tushar Niras", "link": "https://stackoverflow.com/users/4733584/tushar-niras"}, "edited": false, "score": 0, "creation_date": 1512233417, "post_id": 37039746, "comment_id": 82178765, "body": "what if we are using two databases ? sqllite and Mongo"}], "tags": [], "owner": {"reputation": 1393, "user_id": 6206501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JENfJ.jpg?s=128&g=1", "display_name": "Abhilash Reddy", "link": "https://stackoverflow.com/users/6206501/abhilash-reddy"}, "is_accepted": false, "score": 7, "last_activity_date": 1554271437, "last_edit_date": 1554271437, "creation_date": 1462404197, "answer_id": 37039746, "question_id": 37038849, "link": "https://stackoverflow.com/questions/37038849/create-model-rails-for-mongoid/37039746#37039746", "title": "Create Model (RAILS) for mongoid", "body": "<p>It's the same way..</p>\n\n<pre><code>rails generate model model_name\n</code></pre>\n\n<p>Also, you can specify the orm:</p>\n\n<pre><code>rails g active_record:model model_name\nrails g mongoid:model model_name\n</code></pre>\n\n<p>And the model file will look something like this:</p>\n\n<pre><code>class SomeModel\n  include Mongoid::Document\n  include Mongoid::Timestamps\n\n  field :id_test, type: String\n  field :array_ex1, type: Array\n  field :array_ex2, type: Array\n  field :obj_ex2\n  field :flg_test, type: Boolean\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 300, "user_id": 2946687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00fad24a9dd9379a16f22d074becd23d?s=128&d=identicon&r=PG", "display_name": "take", "link": "https://stackoverflow.com/users/2946687/take"}, "is_accepted": false, "score": 1, "last_activity_date": 1462407988, "creation_date": 1462407988, "answer_id": 37040333, "question_id": 37038849, "link": "https://stackoverflow.com/questions/37038849/create-model-rails-for-mongoid/37040333#37040333", "title": "Create Model (RAILS) for mongoid", "body": "<p>You would need to create a model in the <code>app/models</code> folder. For your example, it looks like it would be:</p>\n\n<p><code>app/models/singular_collection_name.rb</code></p>\n\n<pre><code>class SingularCollectionName\n  include Mongoid::Document\n\n  field :id_test, type: String\n  field :array_ex1, type: Array\n  field :array_ex2, type: Array\n  field :obj_ex2, type: Hash\n  field :flg_test, type: Boolean\n\nend\n</code></pre>\n\n<p>where SingularCollectionName is the collection name without pluralization.</p>\n\n<p>You can read more <a href=\"https://docs.mongodb.org/ecosystem/tutorial/mongoid-documents/\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 2565, "user_id": 4733584, "user_type": "registered", "profile_image": "https://graph.facebook.com/883488668361599/picture?type=large", "display_name": "Tushar Niras", "link": "https://stackoverflow.com/users/4733584/tushar-niras"}, "is_accepted": false, "score": 2, "last_activity_date": 1512238529, "creation_date": 1512238529, "answer_id": 47611008, "question_id": 37038849, "link": "https://stackoverflow.com/questions/37038849/create-model-rails-for-mongoid/47611008#47611008", "title": "Create Model (RAILS) for mongoid", "body": "<p>-> Create Model </p>\n\n<pre><code>rails generate model modelname\n</code></pre>\n\n<p>-> If data fields will different (dynamic) for each record, you need to add following line to your model</p>\n\n<pre><code> include Mongoid::Attributes::Dynamic\n</code></pre>\n\n<p>->Create Record </p>\n\n<pre><code>modelname.create({:field1 \"valie1\", :field2 \"value2\"})\nmodelname.create({:field1 \"valie1\"})\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 4671989, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-Y3boRr9J-WQ/AAAAAAAAAAI/AAAAAAAAABA/qjNDP1DSasE/photo.jpg?sz=128", "display_name": "eduardo Uchida", "link": "https://stackoverflow.com/users/4671989/eduardo-uchida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4729, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1554271437, "creation_date": 1462399332, "last_edit_date": 1462399648, "question_id": 37038849, "link": "https://stackoverflow.com/questions/37038849/create-model-rails-for-mongoid", "title": "Create Model (RAILS) for mongoid", "body": "<p>I have to connect my Rails app to MongoDB, after some research i found a gem (mongoid).\nMy doubt is, how to create the model?\nThe collection on MongoDB looks like the example bellow:</p>\n\n<pre><code>{\n    \"_id\": {\n        \"$oid\": \"56fbf7e577550f39a5aea04a\"\n    },\n    \"id_test\": \"225|1\",\n    \"array_ex1\": [],\n    \"array_ex2\": [\n        \"obj_ex1\": {\n            \"field_obj_1\": \"text1\",\n            \"field_obj_2\": \"text2\",\n            \"field_obj_3\": \"text3\",\n         }\n     ],\n    \"obj_ex2\": {\n       \"field1: \"textex1\",\n       \"field2: \"textex2\",\n       \"field3: \"textex3\",\n    },\n    \"flg_test\": true\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462397625, "post_id": 37038221, "comment_id": 61626904, "body": "Does <a href=\"http://stackoverflow.com/questions/4941004/putting-images-with-options-in-a-dropdown-list\">this link</a> answer your question?"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462397815, "post_id": 37038221, "comment_id": 61626987, "body": "It sheds light on the previous question I asked @MichaelGaskill, but not for this question. This question isn&#39;t about dropdown. I just want it where if a user clicks on an image, then that image will pass <code>ranking: 1</code> upon the user clicking submit on the _form. Thanks for your help!"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462397901, "post_id": 37038221, "comment_id": 61627027, "body": "Oops, sorry, I posted it in the wrong one.  I was looking a the other and clicked through to this one before I added the link.  I&#39;ll add it there."}], "answers": [{"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1462405072, "post_id": 37038515, "comment_id": 61629531, "body": "I just changed <code>ident</code> with <code>ranking</code> wherever it appeared, but I keep getting the error <code>undefined method image_ranking</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1462405548, "post_id": 37038515, "comment_id": 61629698, "body": "If your field is <code>ranking</code>, then <code>hidden_field(:ranking, ...)</code> should do it."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1462406055, "post_id": 37038515, "comment_id": 61629847, "body": "Updated question with attempts. <code>:ranking</code> is the field. Am I suppose to add something to the controller with <code>hidden_field</code>. And it is <code>hidden_field right</code>? Not <code>hidden_field_tag</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 1, "creation_date": 1462406995, "post_id": 37038515, "comment_id": 61630067, "body": "<code>hidden_field_tag</code> is for an arbitrary field not bound to anything, <code>f.hidden_field</code> is intrinsically populated with whatever value it can extract from the form&#39;s associated model."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 1, "creation_date": 1462412024, "post_id": 37038515, "comment_id": 61631251, "body": "I&#39;ve tried probably 25 different versions of your answer. And then realized I forgot to add <code>:ranking</code> to params :/ Thanks for your help :)"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1462412914, "post_id": 37038515, "comment_id": 61631482, "body": "You mentioned &quot;You can even add class information to make the selected image look different afterwards&quot; I added class information to <code>img-clicker</code> but that changes the way it looks preselected. How do I change the way it looks once it is selected?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 1, "creation_date": 1462414976, "post_id": 37038515, "comment_id": 61631960, "body": "By adding something like <code>$(this).addClass(&#39;clicked&#39;)</code> or whatever your &quot;clicked&quot; style is. You may need to <code>$(&#39;.clicked&#39;).removeClass(&#39;clicked&#39;)</code> to de-click all the others that might have been previously clicked."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 1, "creation_date": 1462472980, "post_id": 37038515, "comment_id": 61662485, "body": "Thanks! That got me on track. This was how I fully implemented it to work if you&#39;re curious: <code>&lt;script&gt;   $(&#39;.image-clicker&#39;).click(function() {     $(&#39;#ranking&#39;).val($(this).data(&#39;ranking&#39;));     $(&#39;.clicked&#39;).removeClass(&#39;clicked&#39;)     $(this).addClass(&#39;clicked&#39;);   }); &lt;&#47;script&gt;</code>"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1462397959, "creation_date": 1462397959, "answer_id": 37038515, "question_id": 37038221, "link": "https://stackoverflow.com/questions/37038221/how-to-pass-attribute-data-by-clicking-on-image/37038515#37038515", "title": "How to pass attribute data by clicking on image?", "body": "<p>Normally you do this with the unobtrusive JavaScript available in Rails:</p>\n\n<pre><code>&lt;%= f.hidden_field(:image_ident, id: 'image_ident') %&gt;\n&lt;%= image_tag('1.png', data: { ident: 1 }, class: 'img-clicker') %&gt;\n</code></pre>\n\n<p>Then you can trigger it with jQuery:</p>\n\n<pre><code>$('.img-clicker').click(function() {\n  $('#image_ident').val($(this).data('ident'));\n});\n</code></pre>\n\n<p>Idea here is you can have a hidden field to capture your selection and each image when clicked transfers its <code>data</code> value over. You can even add class information to make the selected image look different afterwards, up to you.</p>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 1, "accepted_answer_id": 37038515, "answer_count": 1, "score": 1, "last_activity_date": 1462405993, "creation_date": 1462396733, "last_edit_date": 1462405993, "question_id": 37038221, "link": "https://stackoverflow.com/questions/37038221/how-to-pass-attribute-data-by-clicking-on-image", "title": "How to pass attribute data by clicking on image?", "body": "<p>How to pass attribute data by clicking on an image:</p>\n\n<pre><code># Something like this I would imagine\n&lt;%= f.select '1.png', ranking: 1 %&gt;\n# or\n&lt;%= f.image_tag '1.png', ranking: 1 %&gt;\n</code></pre>\n\n<p><strong>Attempts Based Upon @Tadman</strong></p>\n\n<p>1</p>\n\n<pre><code>  &lt;%= f.hidden_field(:ranking, id: 'ranking') %&gt;\n  &lt;%= image_tag('1.png', data: { rank: 1 }, class: 'image-clicker') %&gt;\n  &lt;%= image_tag('2.png', data: { rank: 2 }, class: 'image-clicker') %&gt;\n  &lt;%= image_tag('3.png', data: { rank: 3 }, class: 'image-clicker') %&gt;\n  &lt;%= image_tag('4.png', data: { rank: 4 }, class: 'image-clicker') %&gt;\n</code></pre>\n\n<p>2</p>\n\n<pre><code>  &lt;%= f.hidden_field(:ranking, id: 'image_ranking') %&gt;\n  &lt;%= image_tag('1.png', data: { image_ranking: 1 }, class: 'image-clicker') %&gt;\n  &lt;%= image_tag('2.png', data: { image_ranking: 2 }, class: 'image-clicker') %&gt;\n  &lt;%= image_tag('3.png', data: { image_ranking: 3 }, class: 'image-clicker') %&gt;\n  &lt;%= image_tag('4.png', data: { image_ranking: 4 }, class: 'image-clicker') %&gt;\n</code></pre>\n\n<p>3</p>\n\n<pre><code>  &lt;%= f.hidden_field(:image_ranking, id: 'image_ranking') %&gt;\n  &lt;%= image_tag('1.png', data: { ranking: 1 }, class: 'image-clicker') %&gt;\n  &lt;%= image_tag('2.png', data: { ranking: 2 }, class: 'image-clicker') %&gt;\n  &lt;%= image_tag('3.png', data: { ranking: 3 }, class: 'image-clicker') %&gt;\n  &lt;%= image_tag('4.png', data: { ranking: 4 }, class: 'image-clicker') %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "netbeans-8"], "owner": {"reputation": 3461, "user_id": 1114136, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/87ec0ce8ac23df0e004db289a8677a34?s=128&d=identicon&r=PG", "display_name": "OtagoHarbour", "link": "https://stackoverflow.com/users/1114136/otagoharbour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1462395104, "creation_date": 1462395104, "question_id": 37037779, "link": "https://stackoverflow.com/questions/37037779/cannot-connect-to-the-debugged-process-with-ruby-on-netbeans", "title": "&quot;Cannot connect to the debugged process&quot; with Ruby on Netbeans", "body": "<p>I have installed Netbeans 8.1 on Ubuntu 14.04.  I have installed the plugin 1434628827_ruby_and_rails.  I have ruby-debug, version 0.10.5.rc2, installed along with ruby-debug-base(0.10.5.rc2 java) and ruby-debug-ide (0.4.17.beta14).</p>\n\n<p>I start a new project with the option \"Ruby Application\".  I enter some code, try to run it in debug mode and nothing happens.  I then choose</p>\n\n<pre><code>Attach Debugger ...\n</code></pre>\n\n<p>I take the default options</p>\n\n<pre><code>Debugger: Ruby Debugger (ruby-debug-ide)\nHost: localhost\nPort: 7000\nTimeout [2]: 15\n</code></pre>\n\n<p>After 15 seconds, I get the message</p>\n\n<pre><code>Problem occurred during debugger start: Cannot connect to the debugged process at port 7000 in 15s\n</code></pre>\n"}, {"tags": ["ruby", "primes"], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1462397465, "post_id": 37037807, "comment_id": 61626814, "body": "There&#39;s a second (similar) generator: <a href=\"https://github.com/ruby/ruby/blob/trunk/lib/prime.rb#L426\" rel=\"nofollow noreferrer\">github.com/ruby/ruby/blob/trunk/lib/prime.rb#L426</a>. Also, this is being really pedantic, but the code does also &quot;pre-load&quot; the fact that <code>2</code> and <code>3</code> are prime: <a href=\"https://github.com/ruby/ruby/blob/trunk/lib/prime.rb#L35-L36\" rel=\"nofollow noreferrer\">github.com/ruby/ruby/blob/trunk/lib/prime.rb#L35-L36</a>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1462399337, "post_id": 37037807, "comment_id": 61627682, "body": "Your answer is self-contradictory. The first sentence should just start with &quot;Yes, there are small number ...&quot;."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1462399810, "post_id": 37037807, "comment_id": 61627859, "body": "@sawa &quot;x is true except y&quot; is not contradictory"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1462400052, "post_id": 37037807, "comment_id": 61627965, "body": "The &quot;No&quot; part is contradictory. And the &quot;... expect&quot; part is unnecessary. Anyway, it is confusing. Why do you need to make it complicated?"}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": true, "score": 3, "last_activity_date": 1462395195, "creation_date": 1462395195, "answer_id": 37037807, "question_id": 37037673, "link": "https://stackoverflow.com/questions/37037673/does-a-ruby-prime-object-come-with-a-fixed-amount-of-prime-numbers-when-initiali/37037807#37037807", "title": "Does a Ruby Prime object come with a fixed amount of prime numbers when initialised?", "body": "<p>No, there are no pre-generated primes, except for a very small number in <a href=\"https://github.com/ruby/ruby/blob/trunk/lib/prime.rb#L382\" rel=\"nofollow\">one specific generator</a>. That said, you shouldn't depend on even those to be pre-generated, as this is entirely implementation-specific and they could go away at any time.</p>\n"}], "owner": {"reputation": 291, "user_id": 5771228, "user_type": "registered", "profile_image": "https://graph.facebook.com/1108283732545797/picture?type=large", "display_name": "Andrea Mazzarella", "link": "https://stackoverflow.com/users/5771228/andrea-mazzarella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 37037807, "answer_count": 1, "score": 3, "last_activity_date": 1462395195, "creation_date": 1462394711, "question_id": 37037673, "link": "https://stackoverflow.com/questions/37037673/does-a-ruby-prime-object-come-with-a-fixed-amount-of-prime-numbers-when-initiali", "title": "Does a Ruby Prime object come with a fixed amount of prime numbers when initialised?", "body": "<p>When I create a Prime object in Ruby, say <code>foo = Prime.instance</code>, does it come with a fixed amount of prime numbers 'preloaded'? If so, how many?</p>\n\n<p>If not, are they dynamically generated if and when required?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "activerecord", "rails-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 8800, "user_id": 14533, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a8b289d40d80dc4f1a994f735a152f65?s=128&d=identicon&r=PG", "display_name": "Gustavo Rubio", "link": "https://stackoverflow.com/users/14533/gustavo-rubio"}, "is_accepted": false, "score": 2, "last_activity_date": 1462396472, "creation_date": 1462396472, "answer_id": 37038150, "question_id": 37037607, "link": "https://stackoverflow.com/questions/37037607/find-all-record-without-association-with-a-certain-field/37038150#37038150", "title": "Find all record without association with a certain field", "body": "<p>If you are using rails 4.2 which supports negation on queries you could do something like:</p>\n\n<pre><code>Person.includes(:friends).where.not( friends: { type: \"best\" } )\n</code></pre>\n\n<p>In any other case:</p>\n\n<pre><code>Person.includes(:friends).where(\"friends.type != 'best'\")\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>Maybe a little bit off-topic, but you may consider using <a href=\"http://api.rubyonrails.org/v4.2/classes/ActiveRecord/Enum.html\" rel=\"nofollow\">enum</a> from active record so you can map these kind of things, like:</p>\n\n<pre><code>class Friend\n   belongs_to :person\n   enum type: {best: 0, acquaintance: 1}\nend\n</code></pre>\n\n<p>Then you could query like this:</p>\n\n<pre><code>Person.includes(:friends).where.not( friends: { type: Friend.types[:best] } )\n</code></pre>\n\n<p>Which makes it more readable, ruby-friendly and avoids using strings since the value is stored as an integer in the db.</p>\n"}, {"tags": [], "owner": {"reputation": 5250, "user_id": 5154683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae81933dce5ced9ec019414bbd4f0f4?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Nubel", "link": "https://stackoverflow.com/users/5154683/robert-nubel"}, "is_accepted": false, "score": 0, "last_activity_date": 1462396664, "creation_date": 1462396664, "answer_id": 37038204, "question_id": 37037607, "link": "https://stackoverflow.com/questions/37037607/find-all-record-without-association-with-a-certain-field/37038204#37038204", "title": "Find all record without association with a certain field", "body": "<p>The most straightforward, though not the only nor necessarily the most performant, way to do this is with a <code>NOT EXISTS</code> subquery:</p>\n\n<pre><code>Person.where('NOT EXISTS(SELECT 1 FROM friends WHERE person_id=persons.id AND type=?)', 'best')\n</code></pre>\n\n<p>You can define this as a scope on <code>Person</code> for easy composition.</p>\n\n<p>Note: I also want to point out that, while Gustavo's solution reads like you expect, it will return anyone who has a friend who's not their best friend (not just people without ANY best friends). This is due to how SQL's where clauses function on a per-row basis, and have trouble asserting over groups or one-to-many relations.</p>\n"}], "owner": {"reputation": 3921, "user_id": 1352263, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/02e08598768959ad9565a8e4dec34f70?s=128&d=identicon&r=PG", "display_name": "Dragonfly", "link": "https://stackoverflow.com/users/1352263/dragonfly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1058, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1462396664, "creation_date": 1462394452, "last_edit_date": 1495540363, "question_id": 37037607, "link": "https://stackoverflow.com/questions/37037607/find-all-record-without-association-with-a-certain-field", "title": "Find all record without association with a certain field", "body": "<p>My question is very similar to this question: <a href=\"https://stackoverflow.com/questions/5319400/want-to-find-records-with-no-associated-records-in-rails-3\">Want to find records with no associated records in Rails 3</a></p>\n\n<p>But with a twist. Let's use their example and add my problem:</p>\n\n<pre><code>class Person\n   has_many :friends\nend\n\nclass Friend\n   belongs_to :person\n   attr_accessor :type # this can be 'best' or 'acquaintance'\nend\n</code></pre>\n\n<p>I want to get all people without 'best' friends. The normal query for most cases that I see is to get people without any friends. And that would be:</p>\n\n<pre><code>Person.includes(:friends).where( :friends =&gt; { :person_id =&gt; nil } )\n</code></pre>\n\n<p>But that's not what I want. Is there a way to get all people who have no 'best' friends regardless of how many other type of friends they have?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-app-engine"], "comments": [{"owner": {"reputation": 4722, "user_id": 6061978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00b9d44fdcdfcd8b61552ec455129ce0?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/6061978/chris"}, "edited": false, "score": 1, "creation_date": 1462455275, "post_id": 37037501, "comment_id": 61651326, "body": "I&#39;ve just started experiencing the same problem. The timing of it makes me think maybe there is something wrong with AppEngine at the moment."}, {"owner": {"reputation": 605, "user_id": 3182764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KaNKE.jpg?s=128&g=1", "display_name": "Alvaro Cantador", "link": "https://stackoverflow.com/users/3182764/alvaro-cantador"}, "reply_to_user": {"reputation": 4722, "user_id": 6061978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00b9d44fdcdfcd8b61552ec455129ce0?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/6061978/chris"}, "edited": false, "score": 0, "creation_date": 1462459655, "post_id": 37037501, "comment_id": 61654286, "body": "Deploy worked with <code>--docker-build=remote</code> option. Anyway I opened a ticket on google support."}], "answers": [{"tags": [], "owner": {"reputation": 605, "user_id": 3182764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KaNKE.jpg?s=128&g=1", "display_name": "Alvaro Cantador", "link": "https://stackoverflow.com/users/3182764/alvaro-cantador"}, "is_accepted": true, "score": 0, "last_activity_date": 1462536456, "last_edit_date": 1462536456, "creation_date": 1462459782, "answer_id": 37053680, "question_id": 37037501, "link": "https://stackoverflow.com/questions/37037501/error-to-deploy-rails-on-gae/37053680#37053680", "title": "Error to deploy Rails on GAE", "body": "<p>Temporally solve:</p>\n\n<p>Just add <code>--docker-build=remote</code> option to you <code>gcloud preview app deploy</code> command. (Remote builds are working normally)</p>\n\n<p>To debug the command use <code>--verbosity debug</code> option.</p>\n\n<p>EDIT:</p>\n\n<p>Response from google support:</p>\n\n<p><code>Engineering is aware of an issue with the platform that would cause these errors. They are currently working on deploying a fix.</code></p>\n"}], "owner": {"reputation": 605, "user_id": 3182764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KaNKE.jpg?s=128&g=1", "display_name": "Alvaro Cantador", "link": "https://stackoverflow.com/users/3182764/alvaro-cantador"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 37053680, "answer_count": 1, "score": 0, "last_activity_date": 1462536456, "creation_date": 1462394024, "last_edit_date": 1462394647, "question_id": 37037501, "link": "https://stackoverflow.com/questions/37037501/error-to-deploy-rails-on-gae", "title": "Error to deploy Rails on GAE", "body": "<p>I am getting this error when the deploy to GAE (RoR) is finished:</p>\n\n<pre><code>latest: digest: sha256:fae8a83d8a4503b9ca284ecfb70da5faf1b66b015804396c2282fae7fc5e4669 size: 75429\nDONE\n-----------------------------------------------------------------------------------------------------------------------------------------\n\nUpdating service [default]...failed.\nERROR: (gcloud.preview.app.deploy) Error Response: [13] The system encountered a fatal error\n</code></pre>\n\n<p>I have no idea what happens.</p>\n\n<p>I checked the logs, and last register is about the docker build:</p>\n\n<p>17:13:24.410\nDONE\n{\nmetadata:\n{\u2026}\ntextPayload:\n\"DONE\"\ninsertId:\n\"271f3953-7ca6-4282-960a-fcb35a2261a2-316\"\nlog:\n\"cloudbuild\"\n}</p>\n\n<p>The application is running in development and production enviroment whitout errors.</p>\n\n<ul>\n<li>Rails : 4.2.6 </li>\n<li>Ruby: 2.3.1</li>\n<li>GCloud SDK: 108.0.0</li>\n</ul>\n\n<p>Someone knows how to fix it?</p>\n\n<p>Very thanks!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 113292, "user_id": 4376, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b9c927e051202fc198e70659d9827d2f?s=128&d=identicon&r=PG", "display_name": "Nathan Long", "link": "https://stackoverflow.com/users/4376/nathan-long"}, "edited": false, "score": 0, "creation_date": 1462392824, "post_id": 37037174, "comment_id": 61624473, "body": "As of now, <code>state_machine</code> looks abandoned and I wouldn&#39;t choose it for a new project, but I needed to solve this problem today."}], "answers": [{"comments": [{"owner": {"reputation": 1211, "user_id": 5056202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wq9rr.jpg?s=128&g=1", "display_name": "CheeseFry", "link": "https://stackoverflow.com/users/5056202/cheesefry"}, "edited": false, "score": 0, "creation_date": 1462392913, "post_id": 37037175, "comment_id": 61624524, "body": "Wow, that was a quick turn-around. :D"}, {"owner": {"reputation": 113292, "user_id": 4376, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b9c927e051202fc198e70659d9827d2f?s=128&d=identicon&r=PG", "display_name": "Nathan Long", "link": "https://stackoverflow.com/users/4376/nathan-long"}, "reply_to_user": {"reputation": 1211, "user_id": 5056202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wq9rr.jpg?s=128&g=1", "display_name": "CheeseFry", "link": "https://stackoverflow.com/users/5056202/cheesefry"}, "edited": false, "score": 0, "creation_date": 1462808537, "post_id": 37037175, "comment_id": 61780874, "body": "@CheeseFry Yep, I came here to document something I learned in searchable format. See <a href=\"http://blog.stackoverflow.com/2012/05/encyclopedia-stack-exchange/\">blog.stackoverflow.com/2012/05/encyclopedia-stack-exchange</a>"}], "tags": [], "owner": {"reputation": 113292, "user_id": 4376, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b9c927e051202fc198e70659d9827d2f?s=128&d=identicon&r=PG", "display_name": "Nathan Long", "link": "https://stackoverflow.com/users/4376/nathan-long"}, "is_accepted": false, "score": 1, "last_activity_date": 1462392784, "creation_date": 1462392784, "answer_id": 37037175, "question_id": 37037174, "link": "https://stackoverflow.com/questions/37037174/with-the-state-machine-gem-can-i-can-i-perform-a-transition-without-saving/37037175#37037175", "title": "With the state_machine gem, can I can I perform a transition without saving?", "body": "<h2>Pass <code>false</code></h2>\n\n<p>Eg:</p>\n\n<pre><code>account.close(false) # does not save\n</code></pre>\n\n<p>This isn't exactly documented, but I <a href=\"https://github.com/pluginaweek/state_machine/issues/13#issuecomment-1744855\" rel=\"nofollow\">found it here</a>.</p>\n"}], "owner": {"reputation": 113292, "user_id": 4376, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b9c927e051202fc198e70659d9827d2f?s=128&d=identicon&r=PG", "display_name": "Nathan Long", "link": "https://stackoverflow.com/users/4376/nathan-long"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1462392784, "creation_date": 1462392784, "question_id": 37037174, "link": "https://stackoverflow.com/questions/37037174/with-the-state-machine-gem-can-i-can-i-perform-a-transition-without-saving", "title": "With the state_machine gem, can I can I perform a transition without saving?", "body": "<p>I'm working on an app that uses <a href=\"https://github.com/pluginaweek/state_machine\" rel=\"nofollow\">state_machine</a>. I want to call a transition method but <strong>not</strong> persist the change, so that I have an opportunity to check whether the proposed change is authorized. Eg:</p>\n\n<pre><code>def some_controller_action\n  # ...\n  account.close     # but don't save...\n  authorize account # will explode if current_user may not do this\n  if account.save ....\n</code></pre>\n\n<p>How can I do this?</p>\n"}, {"tags": ["html", "css", "ruby-on-rails", "ruby", "dropdown"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462393603, "post_id": 37037069, "comment_id": 61624928, "body": "You might be stuck using a plugin like <a href=\"http://designwithpc.com/Plugins/ddSlick\" rel=\"nofollow noreferrer\">ddSlick</a>. Regular HTML <code>&lt;select&gt;</code> options don&#39;t allow images. You might be able to use a custom font for simple symbols."}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462394221, "post_id": 37037069, "comment_id": 61625213, "body": "Which UI (CSS and Javascript) framework(s) are you using or planning to use.  Most of them have a solution or allow plugin solutions that give you styled select options.  Sadly, the standard HTML set does not, and it is reasonably difficult to roll your own."}, {"owner": {"reputation": 8800, "user_id": 14533, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a8b289d40d80dc4f1a994f735a152f65?s=128&d=identicon&r=PG", "display_name": "Gustavo Rubio", "link": "https://stackoverflow.com/users/14533/gustavo-rubio"}, "edited": false, "score": 0, "creation_date": 1462395720, "post_id": 37037069, "comment_id": 61625983, "body": "Do you want to show an actual image on the dropdown or just the emoticon representation of that integer?"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462396899, "post_id": 37037069, "comment_id": 61626543, "body": "Yea @tadman. That might be a good option. Otherwise for now I&#39;m going to try to just show all four emoticons. Increase the opacity for nonactive ones and then when user hovers or clicks on one then remove transparency. Here is a new question to help me toward that goal: <a href=\"http://stackoverflow.com/questions/37038221/how-to-pass-attribute-data-by-clicking-on-image\" title=\"how to pass attribute data by clicking on image\">stackoverflow.com/questions/37038221/&hellip;</a>"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462397977, "post_id": 37037069, "comment_id": 61627059, "body": "<a href=\"http://stackoverflow.com/questions/4941004/putting-images-with-options-in-a-dropdown-list\">This link</a> may help answer your question, or at least shed light on it."}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1462392791, "creation_date": 1462392791, "answer_id": 37037176, "question_id": 37037069, "link": "https://stackoverflow.com/questions/37037069/select-images-which-represent-integer/37037176#37037176", "title": "select images, which represent integer?", "body": "<p>Instead of using the filenames in your views (\"1.png\"), why not use the emoticon strings i.e. <code>EMOTICONS = [':)', ':(', ':|', ':@']</code></p>\n\n<p>Then on the server, you could use a <code>case</code> statement on the param to find the matching filename. </p>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1462393559, "creation_date": 1462392436, "last_edit_date": 1462393559, "question_id": 37037069, "link": "https://stackoverflow.com/questions/37037069/select-images-which-represent-integer", "title": "select images, which represent integer?", "body": "<p>A user chooses a ranking <code>&lt;%= f.select :ranking, Challenge::EMOTICONS %&gt;</code>. <code>ranking: integer</code>.</p>\n\n<pre><code>EMOTICONS = ['1.png', '2.png', '3.png', '4.png']\n</code></pre>\n\n<p>How can I show the user the emoticon images in place of the integers these emoticons represent in a dropdown menu? </p>\n\n<pre><code>4 = :] = 4.png # Smilely face strings are an example. I have better quality emoticon images I'd like to use\n3 = :) = 3.png\n2 = :( = 2.png\n1 = :[ = 1.png\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Py0hq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Py0hq.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1462392572, "post_id": 37037031, "comment_id": 61624335, "body": "can you show your code so it is more clear what what you mean by a &quot;workaround&quot;?"}, {"owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1462394078, "post_id": 37037031, "comment_id": 61625138, "body": "Added some code examples"}, {"owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "edited": false, "score": 0, "creation_date": 1462394463, "post_id": 37037031, "comment_id": 61625331, "body": "What&#39;s the difference between <code>permitted_update_params</code> and <code>permitted_status_update_params </code>? Can you give an example of the format of the request?"}], "answers": [{"comments": [{"owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "edited": false, "score": 0, "creation_date": 1462408970, "post_id": 37037757, "comment_id": 61630560, "body": "I&#39;m not trying to include both scripts on the same page. I&#39;m trying to respond to an AJAX request with JavaScript."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1462395010, "creation_date": 1462395010, "answer_id": 37037757, "question_id": 37037031, "link": "https://stackoverflow.com/questions/37037031/ruby-on-rails-circumstantial-controller-action-javascript-response/37037757#37037757", "title": "Ruby on Rails Circumstantial Controller Action JavaScript Response", "body": "<p>It sounds like you're trying to figure out how to write a single Javascript file that gets sent with a few different HTML pages.</p>\n\n<p>There are a couple ways to do this. </p>\n\n<p>The easiest option is to put the file in <code>app/assets/javascripts</code> and write a <code>//= require myfile</code> line in <code>application.js</code>. This will get it included with every HTML response. </p>\n\n<p>You could alternative use a <a href=\"http://apidock.com/rails/ActionView/Helpers/AssetTagHelper/javascript_include_tag\" rel=\"nofollow\">javascript_include_tag</a> to include a script on a per-page basis.</p>\n\n<p>Besides loading the same script on two different pages, there's the question of how to actually write this script. It'll probably have to be refactored to be more generic (so that it works in two use-cases as opposed to one). </p>\n"}, {"tags": [], "owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "is_accepted": true, "score": 0, "last_activity_date": 1462412828, "creation_date": 1462412828, "answer_id": 37040989, "question_id": 37037031, "link": "https://stackoverflow.com/questions/37037031/ruby-on-rails-circumstantial-controller-action-javascript-response/37040989#37040989", "title": "Ruby on Rails Circumstantial Controller Action JavaScript Response", "body": "<p>Well, having different <code>action</code>s for updating the same <code>resource</code> say <code>request</code> is not <code>DRY</code>. No matter from which page the request is coming from, the same particular <code>request</code> object is gonna get updated.</p>\n\n<p>So, better to <code>reuse</code> the <code>update</code> action. To identify from which page the request is coming, you can give <code>name</code> to submit buttons.</p>\n\n<pre><code>&lt;%= submit_tag 'Update', name: 'update_status_only' %&gt;\n&lt;%= submit_tag 'Update', name: 'update_request' %&gt;\n</code></pre>\n\n<p>then in <code>request_controller</code></p>\n\n<pre><code>def update\n  # permitted_request_params permits editable request fields\n  if @request.update(permitted_request_params)\n    # handles success\n  else\n    # handles failure\n  end\n\n  if params[:update_status_only]\n    render 'update_status'\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 37040989, "answer_count": 2, "score": 0, "last_activity_date": 1462412828, "creation_date": 1462392290, "last_edit_date": 1462410757, "question_id": 37037031, "link": "https://stackoverflow.com/questions/37037031/ruby-on-rails-circumstantial-controller-action-javascript-response", "title": "Ruby on Rails Circumstantial Controller Action JavaScript Response", "body": "<p>Say I've got requests: <code>Request</code>. A request must be approved or declined by an administrator.</p>\n\n<p>I'm designing a UI with an approval/decline button on the index page for requests. Similar to the delete button generated by scaffolding.</p>\n\n<p>The issue I'm facing is that I want to respond to an AJAX request differently depending on the page it came from.</p>\n\n<p>I have an action <code>update</code> that could potentially be used, but the JavaScript response in <code>update.js.erb</code> was designed for an edit page that has a form <code>/requests/1/edit</code>.</p>\n\n<p>The only work around I've managed feels like its breaking conventions and creates a useless action that duplicates code.</p>\n\n<p>What I've done is added the action <code>update_status</code> that has it's own <code>*.js.erb</code> response to do something like UI changes on an index page.</p>\n\n<p>I feel like what I'm trying to do is pretty standard UI, and I like the idea of having CRUD actions, but I'm facing a wall.</p>\n\n<p>Is there a way of doing this all within <code>update.js.erb</code>. Could I send different <code>*.js.erb</code> responses? My workaround works, but is it the only way?</p>\n\n<p>Thanks in advance I truly appreciate the support, experience and expertise!</p>\n\n<h3>EDIT</h3>\n\n<p>Code Examples:</p>\n\n<pre><code># app/controllers/requests_controller.rb\nclass RequestsController &lt; ApplicationController\n  before_action :authenticate_admin!\n  before_action :set_request\n\n  def update\n    # permitted_request_params permits editable request fields\n    if @request.update(permitted_request_params)\n      # handles success\n    else\n      # handles failure\n    end\n  end\n\n  def update_status\n    if @request.update(status: params[:status])\n      # handles success\n    else\n      # handles failure\n    end\n  end\n\n  private\n    # more stuff\nend\n\n# app/views/requests/update.js.erb\n// code to signal that the update was successful or not on /requests/1/edit\n\n# app/views/request/update_status.js.erb\n// code that changes the UI to show the request was approved and signal successfully update of status\n</code></pre>\n\n<p>Ideally, everything could be accomplished within the <code>update.js.erb</code> file and I could then remove the <code>update_status</code> action.</p>\n\n<h3>EDIT 2</h3>\n\n<p>I've seen an example where someone made an <code>approve</code> and <code>decline</code> action. Maybe this would be better as it's more explicit if you were making a library to interface your application (e.g. Stripe, Heroku, Cloudflare, etc). </p>\n\n<pre><code>request.approve -&gt; PUT /request/1/approve\n</code></pre>\n\n<p>I didn't really like my approach, but dumb-ed down like this doesn't seem too bad.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "string"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1462392501, "post_id": 37036975, "comment_id": 61624291, "body": "can you show the expected result vs actual result?"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462392548, "post_id": 37036975, "comment_id": 61624321, "body": "What does &quot;URL with double quotes&quot; mean here?  I see the URL that you added, and do you mean that the double quotes in that URL are in the value and significant?  What do you want to see as the end result of the translation, in terms of quotes.  Can you show a before and after example?"}, {"owner": {"reputation": 335, "user_id": 886882, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/cf5970b4f1658ae3380b05b5646745af?s=128&d=identicon&r=PG", "display_name": "cheeseandpepper", "link": "https://stackoverflow.com/users/886882/cheeseandpepper"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1462392789, "post_id": 37036975, "comment_id": 61624447, "body": "@maxpleaner please see the edit 2"}, {"owner": {"reputation": 335, "user_id": 886882, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/cf5970b4f1658ae3380b05b5646745af?s=128&d=identicon&r=PG", "display_name": "cheeseandpepper", "link": "https://stackoverflow.com/users/886882/cheeseandpepper"}, "reply_to_user": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462392829, "post_id": 37036975, "comment_id": 61624481, "body": "@MichaelGaskill I&#39;ve clarified in my edits. Thx"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462393123, "post_id": 37036975, "comment_id": 61624642, "body": "The first part of my question was about which double quotes you mean.  Are the double quotes surrounding the example string the double quotes that you mean?  Do those come IN the URL value that you receive, or is there something else that you&#39;re asking?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462393246, "post_id": 37036975, "comment_id": 61624715, "body": "You might find it&#39;s cleaner to do this in JavaScript with <code>replace()</code>."}, {"owner": {"reputation": 335, "user_id": 886882, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/cf5970b4f1658ae3380b05b5646745af?s=128&d=identicon&r=PG", "display_name": "cheeseandpepper", "link": "https://stackoverflow.com/users/886882/cheeseandpepper"}, "reply_to_user": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462393279, "post_id": 37036975, "comment_id": 61624733, "body": "Ahh @MichaelGaskill.  So I&#39;m writing to a file, and the input is represented as a string.  But the string itself has double and single quotes within.  In the end, this will be set to a variable in js and I&#39;m handling the quoting of the variable separately from the parsing of the actual text.  Does that help?"}, {"owner": {"reputation": 335, "user_id": 886882, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/cf5970b4f1658ae3380b05b5646745af?s=128&d=identicon&r=PG", "display_name": "cheeseandpepper", "link": "https://stackoverflow.com/users/886882/cheeseandpepper"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462393342, "post_id": 37036975, "comment_id": 61624770, "body": "@tadman can&#39;t do this in js.  We are building files on the backend (through forms) so that the frontend doesn&#39;t do anything but load final file."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462393379, "post_id": 37036975, "comment_id": 61624791, "body": "Clearly you <i>can</i> do this in JavaScript because there&#39;s JavaScript in that string you&#39;re sending. It&#39;s probably safer to do it this way because you won&#39;t need to worry about which quotes are used. I&#39;d say <code>expand(&quot;...[timestamp]&quot;)</code> is a safer, more general-purpose approach than what&#39;s here unless you have some data that&#39;s Rails specific being put in there."}, {"owner": {"reputation": 335, "user_id": 886882, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/cf5970b4f1658ae3380b05b5646745af?s=128&d=identicon&r=PG", "display_name": "cheeseandpepper", "link": "https://stackoverflow.com/users/886882/cheeseandpepper"}, "edited": false, "score": 0, "creation_date": 1462393482, "post_id": 37036975, "comment_id": 61624852, "body": "well... sure, but we are delegating all processing to the backend. Further, the url isn&#39;t ours so what happens after we do our stuff is fine."}], "answers": [{"comments": [{"owner": {"reputation": 335, "user_id": 886882, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/cf5970b4f1658ae3380b05b5646745af?s=128&d=identicon&r=PG", "display_name": "cheeseandpepper", "link": "https://stackoverflow.com/users/886882/cheeseandpepper"}, "edited": false, "score": 0, "creation_date": 1462393760, "post_id": 37037272, "comment_id": 61624988, "body": "This works!  I&#39;ll have to make some tweaks, but I can see this working for me. Thanks!"}, {"owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "reply_to_user": {"reputation": 335, "user_id": 886882, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/cf5970b4f1658ae3380b05b5646745af?s=128&d=identicon&r=PG", "display_name": "cheeseandpepper", "link": "https://stackoverflow.com/users/886882/cheeseandpepper"}, "edited": false, "score": 0, "creation_date": 1462393770, "post_id": 37037272, "comment_id": 61624996, "body": "No prob, best of luck!"}], "tags": [], "owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "is_accepted": true, "score": 2, "last_activity_date": 1462393482, "last_edit_date": 1462393482, "creation_date": 1462393123, "answer_id": 37037272, "question_id": 37036975, "link": "https://stackoverflow.com/questions/37036975/how-can-i-escape-or-when-it-is-a-variable-in-ruby-or-rails/37037272#37037272", "title": "How can I escape &quot; or &#39; when it is a variable in ruby or rails?", "body": "<p>Consider <code>%()</code> to wrap your string:</p>\n\n<pre><code>def substitute_timestamp_macro!(string)\n  %(\"#{string}\").gsub(\"[timestamp]\", %(\" + new Date().getTime() + \"))\nend\n</code></pre>\n\n<p>Note that this will render a string with escaped double quotes:</p>\n\n<pre><code>substitute_timestamp_macro!(\"https://doesntmatter.com/stuff/123;time=[timestamp]\")\n=&gt; \"\\\"https://doesntmatter.com/stuff/123;time=\\\" + new Date().getTime() + \\\"?\\\"\"\n</code></pre>\n\n<p>Which will be interpreted properly when you render this to a buffer:    </p>\n\n<pre><code>puts substitute_timestamp_macro!(\"https://doesntmatter.com/stuff/123;time=[timestamp]\")\n=&gt; \"https://doesntmatter.com/stuff/123;time=\" + new Date().getTime() + \"?\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 335, "user_id": 886882, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/cf5970b4f1658ae3380b05b5646745af?s=128&d=identicon&r=PG", "display_name": "cheeseandpepper", "link": "https://stackoverflow.com/users/886882/cheeseandpepper"}, "edited": false, "score": 0, "creation_date": 1462393882, "post_id": 37037379, "comment_id": 61625053, "body": "Thanks for this... unfortunately in my context, the <code>quote_type</code> needs to be escaped.  Now that I think about it, perhaps a literal escape would have worked too? <code>&quot;\\\\#{quote_type}&quot;</code>"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "reply_to_user": {"reputation": 335, "user_id": 886882, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/cf5970b4f1658ae3380b05b5646745af?s=128&d=identicon&r=PG", "display_name": "cheeseandpepper", "link": "https://stackoverflow.com/users/886882/cheeseandpepper"}, "edited": false, "score": 0, "creation_date": 1462393966, "post_id": 37037379, "comment_id": 61625091, "body": "I see.  I&#39;ll update the answer to be correct in that regard."}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "reply_to_user": {"reputation": 335, "user_id": 886882, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/cf5970b4f1658ae3380b05b5646745af?s=128&d=identicon&r=PG", "display_name": "cheeseandpepper", "link": "https://stackoverflow.com/users/886882/cheeseandpepper"}, "edited": false, "score": 0, "creation_date": 1462394028, "post_id": 37037379, "comment_id": 61625114, "body": "And the literal escape is the most straightforward solution, so that&#39;s what I used.  Thanks!"}], "tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": false, "score": 0, "last_activity_date": 1462394614, "last_edit_date": 1462394614, "creation_date": 1462393578, "answer_id": 37037379, "question_id": 37036975, "link": "https://stackoverflow.com/questions/37036975/how-can-i-escape-or-when-it-is-a-variable-in-ruby-or-rails/37037379#37037379", "title": "How can I escape &quot; or &#39; when it is a variable in ruby or rails?", "body": "<p>The surrounding quote characters of the value determine the behavior of this function, this should fit the bill:</p>\n\n<pre><code>def substitute_timestamp_macro!(string)\n  quote_type = string[0]\n  string.gsub('[timestamp]', \"\\\\#{quote_type} + new Date().getTime() + \\\\#{quote_type}\")\nend\n</code></pre>\n"}], "owner": {"reputation": 335, "user_id": 886882, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/cf5970b4f1658ae3380b05b5646745af?s=128&d=identicon&r=PG", "display_name": "cheeseandpepper", "link": "https://stackoverflow.com/users/886882/cheeseandpepper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1092, "favorite_count": 1, "accepted_answer_id": 37037272, "answer_count": 2, "score": 2, "last_activity_date": 1462394614, "creation_date": 1462392052, "last_edit_date": 1462392724, "question_id": 37036975, "link": "https://stackoverflow.com/questions/37036975/how-can-i-escape-or-when-it-is-a-variable-in-ruby-or-rails", "title": "How can I escape &quot; or &#39; when it is a variable in ruby or rails?", "body": "<p>I'm building a js file on the backend for future use and need to convert macros into js code.  My <code>gsub</code> in the method below was working fine until I had a url with double quotes.  If I have a variable <code>quote_type = \"'\"</code>, how can I interpolate that as an escaped quote? In other words..</p>\n\n<p><code>\"'\"</code> becomes <code>\"\\'\"</code> and <code>'\"'</code> becomes <code>'\\\"'</code></p>\n\n<p>Here's my existing method and I just added the <code>quote_type</code> variable to try this out. </p>\n\n<pre><code>def substitute_timestamp_macro!(string)\n  quote_type = string[0]\n  string.gsub('[timestamp]', '\\' + new Date().getTime() + \\'')\nend\n</code></pre>\n\n<p>edit:  example string would be <code>\"https://doesntmatter.com/stuff/123;time=[timestamp]?\"</code></p>\n\n<p>edit 2:  Here is the expected result:\n<code>\"https://doesntmatter.com/stuff/123;time=\" + new Date().getTime() + \"?\"</code></p>\n\n<p>here is the actual result\n<code>\"https://doesntmatter.com/stuff/123;time=' + new Date().getTime() + '?\"</code></p>\n\n<p>notice in my <code>gsub</code> i hard coded an escaped single quote.  I now want to use the variable to match the input quote so if it's single, use single, and if double, use double</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1462393285, "post_id": 37036408, "comment_id": 61624735, "body": "Same issue as above comment... I think the output is formatted wrong"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1462396467, "post_id": 37036408, "comment_id": 61626325, "body": "As patkoperwas already answered: My code example covers the Ruby part of it. When you need to include <code>data</code> as JSON into a view, then you will need something like: <code>data: &lt;%== data.to_json %&gt; </code>"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 3, "last_activity_date": 1462390543, "last_edit_date": 1462390543, "creation_date": 1462390164, "answer_id": 37036408, "question_id": 37036280, "link": "https://stackoverflow.com/questions/37036280/iterate-of-rails-object-array-to-create-key-value-pair/37036408#37036408", "title": "Iterate of Rails Object array to create key/value pair", "body": "<p>I would do something like:</p>\n\n<pre><code>type_count = network_hosts.reduce(Hash.new(0)) do |hash, host| \n  hash.update(host. os_vendor =&gt; hash[host. os_vendor].next)\nend\ndata = type_count.map { |k, v| { label: k, value: v } }\n</code></pre>\n\n<p>Which would return:</p>\n\n<pre><code>[\n  {\n    :label =&gt; \"Unknown\",\n    :value =&gt; 10\n  },\n  {\n    :label =&gt; \"Linux\",\n    :value =&gt; 4\n  },\n  {\n    :label =&gt; \"Linksys\",\n    :value =&gt; 1\n  },\n  {\n    :label =&gt; \"HP\",\n    :value =&gt; 1\n  },\n  {\n    :label =&gt; \"Apple\",\n    :value =&gt; 2\n  }\n]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1462393075, "post_id": 37036487, "comment_id": 61624619, "body": "The only issue I see is that Morris.js is expecting the format to be like <code>{label: &quot;Download Sales&quot;, value: 12}</code> whereas the hash that is created with your code is <code>{:label=&gt;&quot;Apple&quot;, :value=&gt;2}</code>.  I think this is now why my chart isn&#39;t showing."}, {"owner": {"reputation": 1325, "user_id": 3295284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdP8.jpg?s=128&g=1", "display_name": "patkoperwas", "link": "https://stackoverflow.com/users/3295284/patkoperwas"}, "reply_to_user": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1462394189, "post_id": 37036487, "comment_id": 61625194, "body": "In your view add a call to <code>to_json</code> at the end. <code>&lt;%= raw grouped_network_hosts.to_json %&gt;</code>"}], "tags": [], "owner": {"reputation": 1325, "user_id": 3295284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUdP8.jpg?s=128&g=1", "display_name": "patkoperwas", "link": "https://stackoverflow.com/users/3295284/patkoperwas"}, "is_accepted": true, "score": 4, "last_activity_date": 1462393969, "last_edit_date": 1462393969, "creation_date": 1462390451, "answer_id": 37036487, "question_id": 37036280, "link": "https://stackoverflow.com/questions/37036280/iterate-of-rails-object-array-to-create-key-value-pair/37036487#37036487", "title": "Iterate of Rails Object array to create key/value pair", "body": "<p>If this is an <code>ActiveRecord::Relation</code> then you can use the database to group and count for you.</p>\n\n<pre><code>network_hosts.group(:os_vendor).count\n\n# returns a hash\n{ \"linux\" =&gt; 5, \"unkown\" =&gt; 35, \"mac\" =&gt; 10, etc... }\n</code></pre>\n\n<p>It seems like the library you linked wants an array with 2 keys, <code>label</code> and <code>value</code> so you can <code>map</code> over the result to transform the data into the shape you want</p>\n\n<pre><code>network_hosts\n  .group(:os_vendor)\n  .count\n  .map { |os_vendor, count| { \"label\" =&gt; os_vendor, \"value\" =&gt; count } }\n\n# returns an array of hashes\n[ { \"label\" =&gt; \"linux\", \"value\" =&gt; 5 } ... ]\n</code></pre>\n\n<p>If the array is just a plain Ruby array then you'll need to group + count using Ruby instead of the database</p>\n\n<pre><code>network_hosts\n   .group_by(&amp;:os_vendor)\n   .map { |os_vendor, group| { \"label\" =&gt; os_vendor, \"value\" =&gt; group.size } }\n</code></pre>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1333, "favorite_count": 1, "accepted_answer_id": 37036487, "answer_count": 2, "score": 1, "last_activity_date": 1462393969, "creation_date": 1462389668, "question_id": 37036280, "link": "https://stackoverflow.com/questions/37036280/iterate-of-rails-object-array-to-create-key-value-pair", "title": "Iterate of Rails Object array to create key/value pair", "body": "<p>I have a rails object <code>network_hosts</code>, which returns all of the network hosts for my application.  Now, I'd like to create a <a href=\"http://morrisjs.github.io/morris.js/donuts.html\" rel=\"nofollow\">Morris.js donut chart</a> that shows the <code>host.os_vendor</code> breakdown (Linux, Windows, Apple, etc.).</p>\n\n<p>So, what's the best way to iterate over an object, extract the OS type, create a <code>type count</code> and return it back into the <code>data</code> attribute which Morris.js relies on to create the donut chart?</p>\n\n<p>Here is a sample of the output for <code>network_hosts</code>:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>[#&lt;NetworkHost id: 80, location_id: 14, mac_address: \"70:56:81:C1:7C:FD\", ip_address: \"10.10.10.122\", hostname: \"Air1\", created_at: \"2016-04-14 19:30:20\", updated_at: \"2016-04-22 16:11:33\", deleted_at: nil, os_vendor: \"Unknown\", nickname: nil, vendor: \"Unknown\", os: \"Unknown\", ignore_date: nil, ignore_flag: false&gt;,\r\n #&lt;NetworkHost id: 10, location_id: 14, mac_address: \"C8:E0:EB:3D:2B:B7\", ip_address: \"10.10.10.129\", hostname: \"iMac2\", created_at: \"2014-11-25 23:20:41\", updated_at: \"2016-04-22 16:11:33\", deleted_at: nil, os_vendor: \"Unknown\", nickname: nil, vendor: \"Unknown\", os: \"Unknown\", ignore_date: nil, ignore_flag: false&gt;,\r\n #&lt;NetworkHost id: 29, location_id: 14, mac_address: \"18:B4:30:15:BC:63\", ip_address: \"10.10.10.130\", hostname: \"02AA01AC4414076R\", created_at: \"2015-02-26 02:24:32\", updated_at: \"2016-04-22 16:11:33\", deleted_at: nil, os_vendor: \"Unknown\", nickname: nil, vendor: \"Nest Labs\", os: \"Unknown\", ignore_date: nil, ignore_flag: false&gt;,\r\n #&lt;NetworkHost id: 30, location_id: 14, mac_address: \"00:04:20:F0:6E:9F\", ip_address: \"10.10.10.135\", hostname: \"HarmonyHub\", created_at: \"2015-02-26 02:24:32\", updated_at: \"2016-04-22 16:11:33\", deleted_at: nil, os_vendor: \"Linux\", nickname: nil, vendor: \"Slim Devices\", os: \"Linux 2.6.17 - 2.6.36\", ignore_date: nil, ignore_flag: false&gt;,\r\n #&lt;NetworkHost id: 2, location_id: 14, mac_address: \"DC:9F:DB:E6:CB:A9\", ip_address: \"10.10.10.100\", hostname: \"office\", created_at: \"2014-11-25 23:20:41\", updated_at: \"2016-05-03 18:30:36\", deleted_at: nil, os_vendor: \"Unknown\", nickname: \"Who 1\", vendor: \"Ubiquiti Networks\", os: \"Unknown\", ignore_date: \"2016-05-30 00:09:00\", ignore_flag: false&gt;,\r\n #&lt;NetworkHost id: 27, location_id: 14, mac_address: \"74:54:7D:02:53:8C\", ip_address: \"10.10.10.101\", hostname: \"Hostname Unknown\", created_at: \"2015-02-26 02:24:32\", updated_at: \"2016-05-03 18:30:36\", deleted_at: nil, os_vendor: \"Linksys\", nickname: nil, vendor: \"Unknown\", os: \"Linksys WET54G wireless bridge\", ignore_date: nil, ignore_flag: false&gt;,\r\n #&lt;NetworkHost id: 76, location_id: 14, mac_address: \"D0:63:B4:00:5B:40\", ip_address: \"10.10.10.106\", hostname: \"OpenELEC\", created_at: \"2016-02-19 01:03:24\", updated_at: \"2016-05-02 17:08:28\", deleted_at: nil, os_vendor: \"Unknown\", nickname: \"OpenElec\", vendor: \"Unknown\", os: \"Unknown\", ignore_date: \"2016-06-01 17:07:50\", ignore_flag: false&gt;,\r\n #&lt;NetworkHost id: 11, location_id: 14, mac_address: \"84:34:97:1C:42:50\", ip_address: \"10.10.10.137\", hostname: \"HP1A4DC4\", created_at: \"2014-11-25 23:20:41\", updated_at: \"2016-04-22 16:11:33\", deleted_at: nil, os_vendor: \"HP\", nickname: nil, vendor: \"Unknown\", os: \"HP printer: LaserJet CM1312, Photosmart C510a, or ...\", ignore_date: nil, ignore_flag: false&gt;,\r\n #&lt;NetworkHost id: 14, location_id: 14, mac_address: \"E8:8D:28:57:AE:22\", ip_address: \"10.10.10.144\", hostname: \"time-capsule\", created_at: \"2014-11-25 23:20:42\", updated_at: \"2016-04-22 16:11:33\", deleted_at: nil, os_vendor: \"Apple\", nickname: nil, vendor: \"Unknown\", os: \"Apple AirPort Extreme WAP or Time Capsule NAS devi...\", ignore_date: nil, ignore_flag: false&gt;,\r\n #&lt;NetworkHost id: 75, location_id: 14, mac_address: \"00:14:BF:E0:A0:05\", ip_address: \"10.10.10.2\", hostname: \"Hostname Unknown\", created_at: \"2016-02-18 22:48:01\", updated_at: \"2016-04-22 16:11:33\", deleted_at: nil, os_vendor: \"Linux\", nickname: \"test\", vendor: \"Cisco-Linksys\", os: \"DD-WRT v23 - v24-sp2 (Linux 2.4.20 - 2.4.37)\", ignore_date: nil, ignore_flag: false&gt;,\r\n #&lt;NetworkHost id: 4, location_id: 14, mac_address: \"DC:9F:DB:E6:CF:C1\", ip_address: \"10.10.10.104\", hostname: \"main\", created_at: \"2014-11-25 23:20:41\", updated_at: \"2016-05-03 18:30:36\", deleted_at: nil, os_vendor: \"Unknown\", nickname: nil, vendor: \"Ubiquiti Networks\", os: \"Unknown\", ignore_date: nil, ignore_flag: false&gt;,\r\n #&lt;NetworkHost id: 28, location_id: 14, mac_address: \"18:B4:30:15:BB:76\", ip_address: \"10.10.10.105\", hostname: \"02AA01AC451400G4\", created_at: \"2015-02-26 02:24:32\", updated_at: \"2016-05-03 18:30:36\", deleted_at: nil, os_vendor: \"Unknown\", nickname: nil, vendor: \"Nest Labs\", os: \"Unknown\", ignore_date: nil, ignore_flag: false&gt;,\r\n #&lt;NetworkHost id: 8, location_id: 14, mac_address: \"B8:78:2E:05:E7:F0\", ip_address: \"10.10.10.118\", hostname: \"Apple-TV-3\", created_at: \"2014-11-25 23:20:41\", updated_at: \"2016-04-22 16:11:33\", deleted_at: nil, os_vendor: \"Apple\", nickname: nil, vendor: \"Unknown\", os: \"Apple iOS 4.4.2 - 5.0.1 (Darwin 11.0.0)\", ignore_date: nil, ignore_flag: false&gt;,\r\n #&lt;NetworkHost id: 24, location_id: 14, mac_address: \"74:31:70:0B:56:75\", ip_address: \"10.10.10.113\", hostname: \"Hostname Unknown\", created_at: \"2015-01-29 19:05:44\", updated_at: \"2016-04-24 14:20:44\", deleted_at: nil, os_vendor: \"Unknown\", nickname: nil, vendor: \"Arcadyan Technology\", os: \"Unknown\", ignore_date: nil, ignore_flag: false&gt;,\r\n #&lt;NetworkHost id: 82, location_id: 14, mac_address: \"d2:2a:aa:3e:1e:5a:2d\", ip_address: \"10.10.10.222\", hostname: \"Hostname Unknown\", created_at: \"2016-04-18 17:45:30\", updated_at: \"2016-04-24 14:20:44\", deleted_at: nil, os_vendor: \"Unknown\", nickname: nil, vendor: \"Unknown\", os: \"Unknown\", ignore_date: nil, ignore_flag: false&gt;,\r\n #&lt;NetworkHost id: 81, location_id: 14, mac_address: \"10:9d:07:1b:e4:a7:a8\", ip_address: \"10.10.10.199\", hostname: \"Hostname Unknown\", created_at: \"2016-04-18 16:21:07\", updated_at: \"2016-04-28 20:49:47\", deleted_at: nil, os_vendor: \"Linux\", nickname: \"\", vendor: \"Unknown\", os: \"Linux 2.6.32 - 2.6.38\", ignore_date: nil, ignore_flag: false&gt;,\r\n #&lt;NetworkHost id: 1, location_id: 14, mac_address: \"4C:E6:76:3F:2F:77\", ip_address: \"10.10.10.1\", hostname: \"DD-WRT\", created_at: \"2014-11-25 23:20:41\", updated_at: \"2016-05-02 13:25:07\", deleted_at: nil, os_vendor: \"Linux\", nickname: \"Router\", vendor: \"Buffalo\", os: \"DD-WRT v24-sp2 (Linux 2.6.24)\", ignore_date: \"2016-05-30 00:56:45\", ignore_flag: false&gt;,\r\n #&lt;NetworkHost id: 41, location_id: 14, mac_address: \"54:9F:13:2A:29:16\", ip_address: \"10.10.10.133\", hostname: \"TravisFrsiPhone\", created_at: \"2015-03-05 18:00:18\", updated_at: \"2016-04-22 16:11:33\", deleted_at: nil, os_vendor: \"Unknown\", nickname: nil, vendor: \"Unknown\", os: \"Unknown\", ignore_date: nil, ignore_flag: false&gt;]</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby", "bash", "command-line", "nokogiri"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 3, "creation_date": 1462388634, "post_id": 37035896, "comment_id": 61622212, "body": "How, exactly, are you trying to run the Ruby script? It looks like you&#39;re trying to interpret Ruby as a shell script."}, {"owner": {"reputation": 15, "user_id": 6292327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/614c1638f01936a5c7d199cb6051e14d?s=128&d=identicon&r=PG&f=1", "display_name": "Katerina", "link": "https://stackoverflow.com/users/6292327/katerina"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1462477883, "post_id": 37035896, "comment_id": 61665198, "body": "Exactly! I was running require &#39;nokogiri&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 2736, "user_id": 592229, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d23e0616c0b2862d2226ea0792c920cc?s=128&d=identicon&r=PG", "display_name": "ezuk", "link": "https://stackoverflow.com/users/592229/ezuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1462388812, "creation_date": 1462388812, "answer_id": 37036015, "question_id": 37035896, "link": "https://stackoverflow.com/questions/37035896/require-command-not-found-when-require-nokogiri/37036015#37036015", "title": "&quot;require&quot; command not found when require &#39;nokogiri&#39;", "body": "<p>You're running your command in bash -- this is a Ruby command. </p>\n"}, {"tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": false, "score": 5, "last_activity_date": 1494093446, "last_edit_date": 1495540944, "creation_date": 1462389194, "answer_id": 37036122, "question_id": 37035896, "link": "https://stackoverflow.com/questions/37035896/require-command-not-found-when-require-nokogiri/37036122#37036122", "title": "&quot;require&quot; command not found when require &#39;nokogiri&#39;", "body": "<p>Try running the script from the <a href=\"https://en.wikipedia.org/wiki/Command-line_interface\" rel=\"nofollow noreferrer\">console/terminal shell</a> like this:</p>\n\n<pre><code>ruby script_name.rb\n</code></pre>\n\n<p>You can also try adding this <a href=\"https://en.wikipedia.org/wiki/Shebang_(Unix)\" rel=\"nofollow noreferrer\">shebang line</a> to the top of your .rb file: </p>\n\n<pre><code>#!/usr/bin/env ruby\n</code></pre>\n\n<p>This will auto-identify the script as Ruby when you try to run it directly in some shells.  Also see:</p>\n\n<ul>\n<li><a href=\"https://unix.stackexchange.com/questions/29608/why-is-it-better-to-use-usr-bin-env-name-instead-of-path-to-name-as-my\">Why is it better to use \u201c#!/usr/bin/env NAME\u201d instead of \u201c#!/path/to/NAME\u201d as my shebang?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/17447532/what-is-the-use-of-usr-local-bin-ruby-w-at-the-start-of-a-ruby-program\">what is the use of \u201c#!/usr/local/bin/ruby -w\u201d at the start of a ruby program</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 6292327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/614c1638f01936a5c7d199cb6051e14d?s=128&d=identicon&r=PG&f=1", "display_name": "Katerina", "link": "https://stackoverflow.com/users/6292327/katerina"}, "edited": false, "score": 1, "creation_date": 1462477930, "post_id": 37040402, "comment_id": 61665218, "body": "Thanks a lot! Yes, all the necessary gems have been installed. It works"}], "tags": [], "owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "is_accepted": true, "score": -1, "last_activity_date": 1462408485, "creation_date": 1462408485, "answer_id": 37040402, "question_id": 37035896, "link": "https://stackoverflow.com/questions/37035896/require-command-not-found-when-require-nokogiri/37040402#37040402", "title": "&quot;require&quot; command not found when require &#39;nokogiri&#39;", "body": "<p>You can't run a Ruby command directly in bash. If you want to use Ruby at command line, open the Ruby shell <strong>irb</strong>.</p>\n\n<pre><code>$ irb\n</code></pre>\n\n<p>and then you'll see the prompt</p>\n\n<pre><code>2.3.0 :001 &gt;\n</code></pre>\n\n<p>The first number indicates the Ruby version you are using. In my case it is Ruby 2.3.0. The second number is the command number.</p>\n\n<p>Then you may type</p>\n\n<pre><code>require 'nokogiri'\n</code></pre>\n\n<p>and it surely work, if you have this gem installed.</p>\n"}], "owner": {"reputation": 15, "user_id": 6292327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/614c1638f01936a5c7d199cb6051e14d?s=128&d=identicon&r=PG&f=1", "display_name": "Katerina", "link": "https://stackoverflow.com/users/6292327/katerina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2867, "favorite_count": 1, "accepted_answer_id": 37040402, "answer_count": 3, "score": -4, "last_activity_date": 1494093446, "creation_date": 1462388502, "last_edit_date": 1466688998, "question_id": 37035896, "link": "https://stackoverflow.com/questions/37035896/require-command-not-found-when-require-nokogiri", "title": "&quot;require&quot; command not found when require &#39;nokogiri&#39;", "body": "<p>Homebrew, ruby 2.0.0p648, nokogiri 1.6.7.2 are installed. When require 'nokogiri' there appears an error:</p>\n\n<pre><code>-bash: require: command not found\n</code></pre>\n\n<p>What's wrong?</p>\n"}, {"tags": ["c", "ruby", "garbage-collection", "internal", "internals"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462388577, "post_id": 37035739, "comment_id": 61622164, "body": "&quot;I&#39;d like to create String objects which reuse memory allocated by another binary.&quot; This sounds like a recipe for disaster. I&#39;d strongly encourage you to make a string work-alike that uses your custom allocator. Ruby will want to take ownership of any memory it&#39;s given and if this is allocated outside of the Ruby VM you may encounter seriously unpredictable behaviour. Duck typing is your friend here. Your string alternative might be transparently compatible if you do it right."}, {"owner": {"reputation": 2189, "user_id": 1477992, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/22e212e1defd6cf572fe11aa79f1dace?s=128&d=identicon&r=PG", "display_name": "le_me", "link": "https://stackoverflow.com/users/1477992/le-me"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462388998, "post_id": 37035739, "comment_id": 61622412, "body": "the problem with duck typing is that it is a lot of work to rewrite the entire String API, it&#39;s huge! Can you elaborate why it is problematic to allocate (and fill) the memory outside of the ruby VM?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462389256, "post_id": 37035739, "comment_id": 61622555, "body": "What if your string gets modified using <code>&lt;&lt;</code> which requires a buffer allocation? What about other forms of concatenation? What if a future version of Ruby rewrites how all of this is done for performance reasons or otherwise? There&#39;s a ton of things that can go wrong here. Writing your own work-alike that&#39;s 100% feature complete might not be easy, but covering the functions you&#39;re actually going to use wouldn&#39;t take long, and the rest can be handled by calling <code>custom_string.to_s</code> which emits a regular Ruby string."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462389295, "post_id": 37035739, "comment_id": 61622573, "body": "Your class could behave pretty closely to a frozen String object as you probably don&#39;t want people editing it. Depends on what restrictions that memory has if it&#39;s shared."}, {"owner": {"reputation": 2189, "user_id": 1477992, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/22e212e1defd6cf572fe11aa79f1dace?s=128&d=identicon&r=PG", "display_name": "le_me", "link": "https://stackoverflow.com/users/1477992/le-me"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462390194, "post_id": 37035739, "comment_id": 61623041, "body": "I see. The memory is not shared, as nothing but the ruby process would touch it after the String object is created. I think any implementation of String will have a pointer to the actual data, future ruby versions won&#39;t change that I guess. I want to use all the goodies a (frozen) Ruby String has to offer, like Regex matching etc, but strictly without copying the memory (unless a user modifies it of course). Is this not possible?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462392822, "post_id": 37035739, "comment_id": 61624469, "body": "I&#39;m just expressing caution here. The only way to find out for sure is to try."}, {"owner": {"reputation": 2189, "user_id": 1477992, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/22e212e1defd6cf572fe11aa79f1dace?s=128&d=identicon&r=PG", "display_name": "le_me", "link": "https://stackoverflow.com/users/1477992/le-me"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462395793, "post_id": 37035739, "comment_id": 61626018, "body": "maybe you&#39;re right...I initially thought it would be good to combine Ruby with a far more lowlevel language like Rust for example, but the way Ruby handles data is fundamentally inefficient rearding ffi, especially strings. I&#39;m not sure it&#39;s worth the trouble...but I still want to know how this aspect of MRI works, out of curiosity!"}], "owner": {"reputation": 2189, "user_id": 1477992, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/22e212e1defd6cf572fe11aa79f1dace?s=128&d=identicon&r=PG", "display_name": "le_me", "link": "https://stackoverflow.com/users/1477992/le-me"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1462387991, "creation_date": 1462387991, "question_id": 37035739, "link": "https://stackoverflow.com/questions/37035739/how-does-mri-ruby-store-the-contents-of-a-string", "title": "How does MRI Ruby store the contents of a String?", "body": "<p><em>Primer</em>: This question is quite long, because I want to give an overview of my current understanding of the inner mechanisms of MRI and how I came to my conclusions. I want to understand the code better, so please correct me if any assumption I'm making is wrong.</p>\n\n<p>I'm trying to find out where MRI Ruby stores the data part (aka the contents) of a String, because I'd like to create String objects which reuse memory allocated by another binary (same allocator of course).</p>\n\n<p>Here's what I know so far:</p>\n\n<p>RString: internal representation of a String.</p>\n\n<pre><code>struct RString {\n    struct RBasic basic;\n    union {\n        struct {\n            long len;\n            char *ptr;\n            union {\n                long capa;\n                VALUE shared;\n            } aux;\n        } heap;\n        char ary[RSTRING_EMBED_LEN_MAX + 1];\n    } as;\n};\n</code></pre>\n\n<p><a href=\"https://github.com/ruby/ruby/blob/973ba3e8e24f4497aebcbd3819fc9c0f38a7909f/include/ruby/ruby.h#L980\" rel=\"nofollow\">reference</a></p>\n\n<p>From the above snippet I conclude that there are 2 ways the data can be stored:</p>\n\n<ol>\n<li>on the heap via the <code>heap</code> struct (<code>ptr</code> points to data)</li>\n<li>in the <code>ary</code> char array directly (probably some optimization)</li>\n</ol>\n\n<p>I'm only interested in the heap case.</p>\n\n<p><code>str_new0()</code> seems to be the most common way to create a String from a pointer to some string data and a length.</p>\n\n<pre><code>static VALUE\nstr_new0(VALUE klass, const char *ptr, long len, int termlen)\n{\n    VALUE str;\n\n    if (len &lt; 0) {\n        rb_raise(rb_eArgError, \"negative string size (or size too big)\");\n    }\n\n    RUBY_DTRACE_CREATE_HOOK(STRING, len);\n\n    str = str_alloc(klass);\n    if (len &gt; RSTRING_EMBED_LEN_MAX) {\n        RSTRING(str)-&gt;as.heap.aux.capa = len;\n        RSTRING(str)-&gt;as.heap.ptr = ALLOC_N(char, len + termlen);\n        STR_SET_NOEMBED(str);\n    }\n    else if (len == 0) {\n        ENC_CODERANGE_SET(str, ENC_CODERANGE_7BIT);\n    }\n    if (ptr) {\n        memcpy(RSTRING_PTR(str), ptr, len);\n    }\n    STR_SET_LEN(str, len);\n    TERM_FILL(RSTRING_PTR(str) + len, termlen);\n    return str;\n}\n</code></pre>\n\n<p><a href=\"https://github.com/ruby/ruby/blob/32674b167bddc0d737c38f84722986b0f228b44b/string.c#L659\" rel=\"nofollow\">reference</a></p>\n\n<p>Memory is allocated with the macro <code>ALLOC_N</code> which is <a href=\"https://github.com/ruby/ruby/blob/973ba3e8e24f4497aebcbd3819fc9c0f38a7909f/include/ruby/ruby.h#L1609\" rel=\"nofollow\">an alias</a> for RB_ALLOC_N which <a href=\"https://github.com/ruby/ruby/blob/973ba3e8e24f4497aebcbd3819fc9c0f38a7909f/include/ruby/ruby.h#L1603\" rel=\"nofollow\">expands</a> to <code>ruby_xmalloc2()</code> which <a href=\"https://github.com/ruby/ruby/blob/trunk/gc.c#L7885\" rel=\"nofollow\">calls</a> <code>objspace_xmalloc2()</code> which <a href=\"https://github.com/ruby/ruby/blob/trunk/gc.c#L7808\" rel=\"nofollow\">calls</a> <code>objspace_xmalloc0()</code>.</p>\n\n<p><em>Phew</em></p>\n\n<pre><code>static void *\nobjspace_xmalloc0(rb_objspace_t *objspace, size_t size)\n{\n    void *mem;\n\n    size = objspace_malloc_prepare(objspace, size);\n    TRY_WITH_GC(mem = malloc(size));\n    size = objspace_malloc_size(objspace, mem, size);\n    objspace_malloc_increase(objspace, mem, size, 0, MEMOP_TYPE_MALLOC);\n    return objspace_malloc_fixup(objspace, mem, size);\n}\n</code></pre>\n\n<p><a href=\"https://github.com/ruby/ruby/blob/trunk/gc.c#L7786\" rel=\"nofollow\">reference</a></p>\n\n<p>So here we are. <code>TRY_WITH_GC</code> seems to check if the allocation <code>mem = malloc(size)</code> succeeds and if not it tries again after a GC run I think.</p>\n\n<pre><code>#define TRY_WITH_GC(alloc) do { \\\n        objspace_malloc_gc_stress(objspace); \\\n        if (!(alloc) &amp;&amp; \\\n        (!garbage_collect_with_gvl(objspace, TRUE, TRUE, TRUE, GPR_FLAG_MALLOC) || /* full/immediate mark &amp;&amp; immediate sweep */ \\\n         !(alloc))) { \\\n            ruby_memerror(); \\\n        } \\\n    } while (0)\n</code></pre>\n\n<p><a href=\"https://github.com/ruby/ruby/blob/trunk/gc.c#L7762\" rel=\"nofollow\">reference</a></p>\n\n<p>Here's the first thing I'm unsure about: It seems to malloc just some memory (important: not in objspace). Is this the case? I don't know if they overwrote malloc somewhere to allocate GC friendly or whatever.</p>\n\n<p>OK after that they mutate objspace with <a href=\"https://github.com/ruby/ruby/blob/trunk/gc.c#L7667\" rel=\"nofollow\"><code>objspace_malloc_increase()</code></a> and friends. I don't understand what these functions do. They do not seem to store the pointer <code>mem</code> in <code>objspace</code>, but maybe I overlooked it. I need clarification here.</p>\n\n<p>As noted in the beginning I want to write code that creates a Ruby String, which uses memory allocated by some other binary, eg. C via FFI, of course with the system allocator. Do I have to register my \"foreign\" memory via the objspace_* functions? If yes, how does that exactly work? And are there subtleties when it comes to freeing the memory again? (I guess the GC does that, but what conditions must be true for this to work?)</p>\n\n<p>I hope my question is not too vague, I can ask more precisely if necessary!</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "rake"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6292256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a209e863c4278cf46f9c37963c39a46?s=128&d=identicon&r=PG&f=1", "display_name": "SamB", "link": "https://stackoverflow.com/users/6292256/samb"}, "edited": false, "score": 0, "creation_date": 1462408282, "post_id": 37036590, "comment_id": 61630365, "body": "After removing the gem i get the following error :    rake aborted! LoadError: cannot load such file -- mysql2/2.3/mysql2 C:/Users/samue_000/Documents/Sites/test_app/config/applicati&zwnj;&#8203;on.rb:7:in <code>&lt;top (required)&gt;&#39; C:&#47;Users&#47;samue_000&#47;Documents&#47;Sites&#47;test_app&#47;Rakefile:4:in </code>&lt;top (required)&gt;&#39;"}], "tags": [], "owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "is_accepted": false, "score": 0, "last_activity_date": 1462390764, "creation_date": 1462390764, "answer_id": 37036590, "question_id": 37035429, "link": "https://stackoverflow.com/questions/37035429/error-after-rake-dbmigrate-command-rake-aborted-nomethoderror-undefined-meth/37036590#37036590", "title": "Error after rake db:migrate command: rake aborted! NoMethodError: undefined method `accept&#39; for nil:NilClass", "body": "<p>Like you mentioned, most likely this is a gem conflict from including gem <code>'activerecord-mysql2-adapter</code></p>\n\n<p>Remove it from your Gemfile, run <code>bundle update</code>, then restart your server. If you still get an error, post it here.</p>\n"}], "owner": {"reputation": 21, "user_id": 6292256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a209e863c4278cf46f9c37963c39a46?s=128&d=identicon&r=PG&f=1", "display_name": "SamB", "link": "https://stackoverflow.com/users/6292256/samb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1715, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1462391227, "creation_date": 1462386943, "last_edit_date": 1462391227, "question_id": 37035429, "link": "https://stackoverflow.com/questions/37035429/error-after-rake-dbmigrate-command-rake-aborted-nomethoderror-undefined-meth", "title": "Error after rake db:migrate command: rake aborted! NoMethodError: undefined method `accept&#39; for nil:NilClass", "body": "<p>Once i type rake db:migrate i receive this message </p>\n\n<pre><code>C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/activesupport-4.0.0/lib/active_support/values/time_zone.rb:282: warning: circular argument reference - now\n\nrake aborted!\n\nNoMethodError: undefined method `accept' for nil:NilClass\nC:3:in `rescue in map'\nC:-1:in `map'\nNoMethodError: undefined method `accept' for nil:NilClass\nC:-1:in `map'\nTasks: TOP =&gt; db:migrate\n</code></pre>\n\n<p>The following is my GemFile</p>\n\n<pre><code>source 'https://rubygems.org'\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.0.0'\n\n# Use mysql as the database for Active Record\ngem 'mysql2'\n\ngem 'activerecord-mysql2-adapter'\n\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 4.0.0'\n\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n\n\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 1.2'\n\ngroup :doc do\n  # bundle exec rake doc:rails generates the API under doc/api.\n  gem 'sdoc', require: false\nend\n</code></pre>\n\n<p>and the following is my database.yml</p>\n\n<pre><code>development:\n  adapter: mysql2\n  encoding: utf8\n  database: test_app_development\n  pool: 5\n  username: root\n  password: password\n  host: localhost\n</code></pre>\n\n<p>Before adding activerecord-mysql2-adapter to my gem files I got this error : active record::conecction not established webbrick \nbut after i added that gem it was fine (This was done before creating a database). A lot of forums online indicate that this gem is the origin of my problem and now when i remove it after creating a database I get the following error : Specified 'mysql2' for database adapter, but the gem is not loaded. Add <code>gem 'mysql2'</code> to your Gemfile.</p>\n\n<p>I am running rails 4.0.0 on ruby 2.3.0 on windows \nThanks a lot for your help</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "ruby-on-rails-5", "actioncable"], "comments": [{"owner": {"reputation": 9806, "user_id": 382982, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9ZaxF.jpg?s=128&g=1", "display_name": "pdoherty926", "link": "https://stackoverflow.com/users/382982/pdoherty926"}, "edited": false, "score": 0, "creation_date": 1462386330, "post_id": 37035173, "comment_id": 61620771, "body": "Are there any errors in your JavaScript console?"}, {"owner": {"reputation": 41, "user_id": 5153002, "user_type": "registered", "profile_image": "https://graph.facebook.com/988655527846390/picture?type=large", "display_name": "Jincheng Zhang", "link": "https://stackoverflow.com/users/5153002/jincheng-zhang"}, "reply_to_user": {"reputation": 9806, "user_id": 382982, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9ZaxF.jpg?s=128&g=1", "display_name": "pdoherty926", "link": "https://stackoverflow.com/users/382982/pdoherty926"}, "edited": false, "score": 0, "creation_date": 1462386682, "post_id": 37035173, "comment_id": 61621006, "body": "Thanks for reminding me of that. But there is no javascript error in browser&#39;s dev tool console."}, {"owner": {"reputation": 1185, "user_id": 1299792, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a30020548296b36eeaae81a04a5e2594?s=128&d=identicon&r=PG", "display_name": "Marklar", "link": "https://stackoverflow.com/users/1299792/marklar"}, "edited": false, "score": 0, "creation_date": 1469148860, "post_id": 37035173, "comment_id": 64429630, "body": "Did you find a solution to this?"}], "owner": {"reputation": 41, "user_id": 5153002, "user_type": "registered", "profile_image": "https://graph.facebook.com/988655527846390/picture?type=large", "display_name": "Jincheng Zhang", "link": "https://stackoverflow.com/users/5153002/jincheng-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 250, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1462387204, "creation_date": 1462386047, "last_edit_date": 1462387204, "question_id": 37035173, "link": "https://stackoverflow.com/questions/37035173/client-of-actioncable-on-heroku-not-receiving-data", "title": "Client of ActionCable on Heroku not receiving data", "body": "<p>My rails(5.0.0beta4) (and actioncable) works good locally.</p>\n\n<p>But on heroku, the browser seems not to receive any data from the actioncable stream.</p>\n\n<p>Here is my heroku setup:</p>\n\n<p>I am using redis-to-go addon</p>\n\n<pre><code>production: &amp;production\n  adapter: redis\n  url: redis://redistogo:[password]@hoki.redistogo.com:9079/\n  host: hoki.redistogo.com\n  port: 9079\n  password: [password]\n  inline: true\n  timeout: 10</code></pre>\n\n<p>In <code>config/environments/production.rb</code></p>\n\n<pre><code>config.action_cable.url = &quot;https://duewiz.herokuapp.com/cable&quot;\nconfig.action_cable.allowed_request_origins = [&quot;https://duewiz.herokuapp.com&quot;,/http:\\/\\/duewiz.herokuapp.com.*/]</code></pre>\n\n<p>Here I tried wss and https protocol, but neither works.</p>\n\n<p>In <code>routes.rb</code>\n<code>\n    mount ActionCable.server =&gt; '/cable'\n</code></p>\n\n<p>And in <code>app/assets/javascripts/channels/cable.coffee.erb</code></p>\n\n<pre><code>#= require action_cable\n#= require_self\n#= require_tree .\n#\n@App ||= {}\nApp.cable = ActionCable.createConsumer()\n</code></pre>\n\n<p>I have run <code>redis-cli monitor</code> on the redis-to-go server, it prints out the data from my <code>ActionCable.broadcast</code> calls</p>\n\n<p>In heroku logs, I can see the <code>ActionCable</code> broadcasts</p>\n\n<p>But I can't see any change in my browser, but things work just fine locally. </p>\n\n<p>I have run <code>heroku restart</code> for each deployment</p>\n\n<p>I also recall one thing that I use devise/warden for auth(also for actioncable)</p>\n\n<pre><code>module ApplicationCable\n    class Connection &lt; ActionCable::Connection::Base\n      identified_by :current_user\n\n        def connect\n          self.current_user = find_verified_user\n          logger.add_tags 'ActionCable', current_user.email\n        end\n\n      protected\n        def find_verified_user\n          if verified_user = User.find_by(id: cookies.signed['user.id'])\n            verified_user\n          else\n            reject_unauthorized_connection\n          end\n        end\n    end\nend\n</code></pre>\n\n<p>So how should I configure actioncable for deployment on heroku?</p>\n\n<p>Thanks for help.</p>\n\n<hr>\n\n<p>Thanks pdoherty926. There is no javascript error in my browser console.</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "html"], "comments": [{"owner": {"reputation": 868, "user_id": 647552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4ef20f72eb9bd4f293c5f8837ef2c064?s=128&d=identicon&r=PG", "display_name": "J Plato", "link": "https://stackoverflow.com/users/647552/j-plato"}, "edited": false, "score": 1, "creation_date": 1462385918, "post_id": 37034652, "comment_id": 61620521, "body": "See this: <a href=\"http://stackoverflow.com/questions/4646998/play-pause-html-5-video-using-jquery\" title=\"play pause html 5 video using jquery\">stackoverflow.com/questions/4646998/&hellip;</a>"}, {"owner": {"reputation": 423, "user_id": 5431754, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5863d37dc94dc07fa2341f87605a97a3?s=128&d=identicon&r=PG&f=1", "display_name": "Parker ", "link": "https://stackoverflow.com/users/5431754/parker"}, "reply_to_user": {"reputation": 868, "user_id": 647552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4ef20f72eb9bd4f293c5f8837ef2c064?s=128&d=identicon&r=PG", "display_name": "J Plato", "link": "https://stackoverflow.com/users/647552/j-plato"}, "edited": false, "score": 0, "creation_date": 1462386017, "post_id": 37034652, "comment_id": 61620580, "body": "Oh my gosh thank you so much. I looked for a similar question and couldn&#39;t find one. Thank you very much J Plato. I hope the rest of your day goes well!"}, {"owner": {"reputation": 868, "user_id": 647552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4ef20f72eb9bd4f293c5f8837ef2c064?s=128&d=identicon&r=PG", "display_name": "J Plato", "link": "https://stackoverflow.com/users/647552/j-plato"}, "edited": false, "score": 1, "creation_date": 1462386136, "post_id": 37034652, "comment_id": 61620651, "body": "I went through the same thing a while ago. good luck!"}, {"owner": {"reputation": 423, "user_id": 5431754, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5863d37dc94dc07fa2341f87605a97a3?s=128&d=identicon&r=PG&f=1", "display_name": "Parker ", "link": "https://stackoverflow.com/users/5431754/parker"}, "reply_to_user": {"reputation": 868, "user_id": 647552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4ef20f72eb9bd4f293c5f8837ef2c064?s=128&d=identicon&r=PG", "display_name": "J Plato", "link": "https://stackoverflow.com/users/647552/j-plato"}, "edited": false, "score": 0, "creation_date": 1462386506, "post_id": 37034652, "comment_id": 61620887, "body": "@JPlato Were you using ruby on rails when you had this issue? If so, is the class you used in the javascript the same class set the video_tag to be?"}, {"owner": {"reputation": 868, "user_id": 647552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4ef20f72eb9bd4f293c5f8837ef2c064?s=128&d=identicon&r=PG", "display_name": "J Plato", "link": "https://stackoverflow.com/users/647552/j-plato"}, "edited": false, "score": 1, "creation_date": 1462390966, "post_id": 37034652, "comment_id": 61623441, "body": "Yes, Rails app.  I used the id, not the class, but it should work with a class selector as well.  I did something along these lines: $(&quot;#my_video&quot;).trigger(&quot;play&quot;);"}, {"owner": {"reputation": 423, "user_id": 5431754, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5863d37dc94dc07fa2341f87605a97a3?s=128&d=identicon&r=PG&f=1", "display_name": "Parker ", "link": "https://stackoverflow.com/users/5431754/parker"}, "reply_to_user": {"reputation": 868, "user_id": 647552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4ef20f72eb9bd4f293c5f8837ef2c064?s=128&d=identicon&r=PG", "display_name": "J Plato", "link": "https://stackoverflow.com/users/647552/j-plato"}, "edited": false, "score": 0, "creation_date": 1462397048, "post_id": 37034652, "comment_id": 61626605, "body": "@JPlato Thanks a lot man. I&#39;ve got it working now. Couldn&#39;t have done it without you, you&#39;ve really helped me out a ton. Thanks and goodbye again :)"}], "owner": {"reputation": 423, "user_id": 5431754, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5863d37dc94dc07fa2341f87605a97a3?s=128&d=identicon&r=PG&f=1", "display_name": "Parker ", "link": "https://stackoverflow.com/users/5431754/parker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1462384066, "creation_date": 1462384066, "question_id": 37034652, "link": "https://stackoverflow.com/questions/37034652/how-to-write-your-own-video-tag-controls-with-javascript", "title": "How to write your own video_tag controls with javascript?", "body": "<p>I have a page with a video in it (using video_tag); the video url is stored in an instance variable in my controller. I'm trying to use jQuery to write my own controls for the video, but I can't seem to make it work.</p>\n\n<p><em>I am certain that the javascript is rendering properly, because I've replaced the video-related code in the click event with a simple function that changes the background color, and it worked</em></p>\n\n<p>This makes me believe that I'm improperly targeting the <em>video itself</em> since I'm using video_tag and adding a class attribute instead of an html video tag.</p>\n\n<p>Here is my html and my javascript, including the video_tag and the button:</p>\n\n<pre><code>&lt;div id=\"video-container\"&gt;\n  &lt;%= video_tag @video, class: \"actual-video\" %&gt;\n  &lt;button class=\"playbutton\"&gt;Play or Pause&lt;/div&gt;\n&lt;/div&gt;\n\n&lt;script&gt;\n$(\".playbutton\").on(\"click\", function() {\n    if (\".actual-video\").paused {\n        $( \".actual-video\" ).play();\n    } else {\n        $(\".actual-video\").pause();\n    }\n});\n</code></pre>\n\n<p></p>\n\n<p>I'm calling on the expertise of some Ruby on Rails peeps to tell me if there's something I need to know about properly targeting a video using video_tag and the class attribute. I believe that this is the problem, but if any of you spot anything fundamentally wrong with my code, please let me know! Thanks in advance!!!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3994, "user_id": 37019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4354cb7ba5e9c6a01f77eb8de753b62?s=128&d=identicon&r=PG", "display_name": "danielrsmith", "link": "https://stackoverflow.com/users/37019/danielrsmith"}, "edited": false, "score": 0, "creation_date": 1462383927, "post_id": 37034406, "comment_id": 61619270, "body": "Works fine, might be an issue with Windows."}, {"owner": {"reputation": 3994, "user_id": 37019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4354cb7ba5e9c6a01f77eb8de753b62?s=128&d=identicon&r=PG", "display_name": "danielrsmith", "link": "https://stackoverflow.com/users/37019/danielrsmith"}, "edited": false, "score": 0, "creation_date": 1462384163, "post_id": 37034406, "comment_id": 61619407, "body": "Check out: <a href=\"http://stackoverflow.com/questions/27871726/strange-error-in-rails-missing-helper/27909917#27909917\" title=\"strange error in rails missing helper\">stackoverflow.com/questions/27871726/&hellip;</a>"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462392155, "post_id": 37034406, "comment_id": 61624106, "body": "What is the value of $HOME in your Git Bash shell?  <a href=\"http://markb.co.uk/portable-git-windows-setting-home-environment-variable.html\" rel=\"nofollow noreferrer\">Here</a> is a guide to setting $HOME properly so that it doesn&#39;t have Windows pathnames mixed in with the *nix pathnames that Rails is generating."}, {"owner": {"reputation": 767, "user_id": 6027959, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O87Wy.jpg?s=128&g=1", "display_name": "Nirupa", "link": "https://stackoverflow.com/users/6027959/nirupa"}, "edited": false, "score": 0, "creation_date": 1462402572, "post_id": 37034406, "comment_id": 61628774, "body": "If you want to learn about creating static pages refer this <a href=\"https://www.railstutorial.org/book/static_pages\" rel=\"nofollow noreferrer\">railstutorial.org/book/static_pages</a>"}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 5907274, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8007212d273976ac9b6a4238c0e2d090?s=128&d=identicon&r=PG&f=1", "display_name": "Fuledbyramen", "link": "https://stackoverflow.com/users/5907274/fuledbyramen"}, "edited": false, "score": 0, "creation_date": 1462512717, "post_id": 37034598, "comment_id": 61675831, "body": "Yeah looks like wasn&#39;t a file issue, just something to do with Rails or Ruby not working on my computer and its files"}], "tags": [], "owner": {"reputation": 114, "user_id": 6266499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd0bc54a6d44873a6e98562a2813801?s=128&d=identicon&r=PG&f=1", "display_name": "dodo121", "link": "https://stackoverflow.com/users/6266499/dodo121"}, "is_accepted": false, "score": 1, "last_activity_date": 1462383892, "creation_date": 1462383892, "answer_id": 37034598, "question_id": 37034406, "link": "https://stackoverflow.com/questions/37034406/rails-generate-controller-pages-home-helper-error/37034598#37034598", "title": "Rails Generate Controller Pages Home : Helper Error", "body": "<p>I set up your project on my localhost and I am able to visit <a href=\"http://localhost:3000/pages/home\" rel=\"nofollow\">http://localhost:3000/pages/home</a> without any issues.</p>\n\n<p>You have set <code>get 'pages/home'</code> three times in routes.rb, one is enough.</p>\n"}, {"comments": [{"owner": {"reputation": 165, "user_id": 5907274, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8007212d273976ac9b6a4238c0e2d090?s=128&d=identicon&r=PG&f=1", "display_name": "Fuledbyramen", "link": "https://stackoverflow.com/users/5907274/fuledbyramen"}, "edited": false, "score": 0, "creation_date": 1462512755, "post_id": 37036627, "comment_id": 61675843, "body": "I changed some of the files around in my computer but not the application and it worked, looks like i didnt need to do any of these commands, thank you very much though"}], "tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": false, "score": 0, "last_activity_date": 1462391354, "last_edit_date": 1462391354, "creation_date": 1462390894, "answer_id": 37036627, "question_id": 37034406, "link": "https://stackoverflow.com/questions/37034406/rails-generate-controller-pages-home-helper-error/37036627#37036627", "title": "Rails Generate Controller Pages Home : Helper Error", "body": "<p>You've only generated the controller for <code>pages</code> and created an action called <code>home</code> for it.  You have some additional steps needed, as well, to fill out all of the functionality.</p>\n\n<p>There's a \"fast\" way to create the whole lot: <code>scaffold</code>.  Try using this command:</p>\n\n<pre><code>rails generate scaffold pages\n</code></pre>\n\n<p>Since you've already created your controller, when it asks if you want to overwrite your controller, you can answer 'N' to the question.  You can answer 'N' to any other questions that it asks, as well, especially if you've already made changes to any of the files, so that you don't lose those changes.</p>\n\n<p>If you want to go the long way around, you'll also need to create at least some of these:</p>\n\n<ul>\n<li>Model</li>\n<li>Migration</li>\n<li>Views</li>\n</ul>\n\n<p>To create the Model, you can use another similar command:</p>\n\n<pre><code>rails generate model pages\n</code></pre>\n\n<p>This will create a <code>page.rb</code> file in your <code>app/models</code> directory.  This maps to your database table that stores the details for each page.</p>\n\n<p>You can also generate the Migration to create the <code>pages</code> database table, like so:</p>\n\n<pre><code>rails generate migration CreatePages\n</code></pre>\n\n<p>You'll need to provide the basic details of the <code>pages</code> table structure, following the Rails migration guidelines, which you can find <a href=\"http://edgeguides.rubyonrails.org/active_record_migrations.html\" rel=\"nofollow\">here</a>.</p>\n\n<p>Finally, you'll need to create the Views for each action.  This is primarily what's missing from your current implementation, because generating the controller doesn't generate the corresponding view files.</p>\n\n<p>To do this, you'll want to create a new file called <code>home.html.erb</code> (if it doesn't already exist) in the app/views/pages directory.  Simply having this file will be enough to make it past the point that you need, but you'll probably want to put something in it.  Let's display the time:</p>\n\n<pre><code>&lt;p&gt;At the tone, it will be: &lt;%= DateTime.now.strftime(\"%Y-%m-%d %H:%M:%S\") %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>This should give you a decent starting point to build out the rest of what you need.</p>\n\n<p>When you're starting out, however, try to use the scaffold generator until you're comfortable with where the pieces are all located and how to create them individually.  And enjoy!</p>\n"}, {"tags": [], "owner": {"reputation": 165, "user_id": 5907274, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8007212d273976ac9b6a4238c0e2d090?s=128&d=identicon&r=PG&f=1", "display_name": "Fuledbyramen", "link": "https://stackoverflow.com/users/5907274/fuledbyramen"}, "is_accepted": true, "score": 1, "last_activity_date": 1462512684, "creation_date": 1462512684, "answer_id": 37064943, "question_id": 37034406, "link": "https://stackoverflow.com/questions/37034406/rails-generate-controller-pages-home-helper-error/37064943#37064943", "title": "Rails Generate Controller Pages Home : Helper Error", "body": "<p>Thank you guys for all the replies, finally figured it out, like all the other SO answers, its something to do with the capitalization of file names which I just couldn't figure out, so I just wrote it directly to /c instead of ~/desktop, then in application.html.erb just changed application in lines 5 and 6 to default and it works... Wasn't missing any files or needed to do any commands or anything</p>\n"}], "owner": {"reputation": 165, "user_id": 5907274, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8007212d273976ac9b6a4238c0e2d090?s=128&d=identicon&r=PG&f=1", "display_name": "Fuledbyramen", "link": "https://stackoverflow.com/users/5907274/fuledbyramen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 37064943, "answer_count": 3, "score": 1, "last_activity_date": 1462512684, "creation_date": 1462383225, "last_edit_date": 1462387937, "question_id": 37034406, "link": "https://stackoverflow.com/questions/37034406/rails-generate-controller-pages-home-helper-error", "title": "Rails Generate Controller Pages Home : Helper Error", "body": "<p>I'm very new to Rails and am trying to get started but have run into a problem, I've searched around and it seems like a lot of people have had the same problem but I either don't understand their solutions or don't seem to have the files that they changed to fix it, </p>\n\n<p>I'm currently using Windows and running all commands through Git Bash, I have <code>Ruby v2.2.4p230</code>, and <code>Rails v4.2.5.1</code>, through Git Bash, I have just run these commands</p>\n\n<pre><code>cd ~/Desktop\nrails new pinteresting\ncd pinteresting\nrails generate controller pages home\nrails server\n</code></pre>\n\n<p>So now if I go to the <code>localhost3000</code>, it gives me the basic sample layout of the app which is fine, but then I try to visit the pages/home and I get one of three errors,</p>\n\n<p><code>Missing helper file helpers/c:/users/acer_pc/desktop/pinteresting/app/helpers/application_helper.rb_helper.rb</code></p>\n\n<p><code>Missing helper file helpers/c:/users/acer_pc/desktop/pinteresting/app/helpers/pages_helper.rb_helper.rb</code></p>\n\n<p><code>Missing template pages/home, application/home with {:locale=&gt;[:en], :formats=&gt;[:html], :variants=&gt;[], :handlers=&gt;[:erb, :builder, :raw, :ruby, :coffee, :jbuilder]}. Searched in: * \"c:/Users/Acer-PC/desktop/pinteresting/app/views\"</code></p>\n\n<p>If it helps, this is the folder <code>https://github.com/Fuledbyramen/pinteresting</code></p>\n"}, {"tags": ["c", "ruby"], "comments": [{"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 1, "creation_date": 1462383546, "post_id": 37034010, "comment_id": 61619017, "body": "It was originally <code>#define RSTRING_EMBED_LEN_MAX ((int)((sizeof(VALUE)*3)&#47;sizeof(char)-1))</code>. See the commit where it was changed: <a href=\"https://github.com/ruby/ruby/commit/fd89a968372ca748910477dec8c5865e65a18565\" rel=\"nofollow noreferrer\">github.com/ruby/ruby/commit/&hellip;</a> I guess the macro was left for compatibility concerns?"}, {"owner": {"reputation": 2189, "user_id": 1477992, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/22e212e1defd6cf572fe11aa79f1dace?s=128&d=identicon&r=PG", "display_name": "le_me", "link": "https://stackoverflow.com/users/1477992/le-me"}, "reply_to_user": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1462383680, "post_id": 37034010, "comment_id": 61619094, "body": "oh I see..but wouldn&#39;t it make more sense to set it to 0? I&#39;m not a C guru, so I don&#39;t know the best practices."}, {"owner": {"reputation": 16415, "user_id": 1070117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/075d11243bc7564b736ad01169e12bd7?s=128&d=identicon&r=PG", "display_name": "Leandros", "link": "https://stackoverflow.com/users/1070117/leandros"}, "reply_to_user": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1462384501, "post_id": 37034010, "comment_id": 61619624, "body": "@matt It&#39;s still set to <code>(int)((sizeof(VALUE)*3)&#47;sizeof(char)-1)</code>. But it&#39;s not a macro anymore, but an <code>enum</code>. I assume it was converted into an <code>enum</code>, to prevent common pitfalls with the evaluation of macros."}], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1462383014, "post_id": 37034113, "comment_id": 61618715, "body": "So <code>#define RSTRING_EMBED_LEN_MAX RSTRING_EMBED_LEN_MAX</code> it&#39;s rather poinless I suppose."}, {"owner": {"reputation": 2189, "user_id": 1477992, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/22e212e1defd6cf572fe11aa79f1dace?s=128&d=identicon&r=PG", "display_name": "le_me", "link": "https://stackoverflow.com/users/1477992/le-me"}, "edited": false, "score": 0, "creation_date": 1462383415, "post_id": 37034113, "comment_id": 61618938, "body": "but where is RSTRING_EMBED_LEN_MAX given a meaningful value (a number I suppose)?"}, {"owner": {"reputation": 2189, "user_id": 1477992, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/22e212e1defd6cf572fe11aa79f1dace?s=128&d=identicon&r=PG", "display_name": "le_me", "link": "https://stackoverflow.com/users/1477992/le-me"}, "edited": false, "score": 0, "creation_date": 1462383431, "post_id": 37034113, "comment_id": 61618946, "body": "and why do they write that #define, if it has no meaning?"}, {"owner": {"reputation": 16415, "user_id": 1070117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/075d11243bc7564b736ad01169e12bd7?s=128&d=identicon&r=PG", "display_name": "Leandros", "link": "https://stackoverflow.com/users/1070117/leandros"}, "reply_to_user": {"reputation": 2189, "user_id": 1477992, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/22e212e1defd6cf572fe11aa79f1dace?s=128&d=identicon&r=PG", "display_name": "le_me", "link": "https://stackoverflow.com/users/1477992/le-me"}, "edited": false, "score": 0, "creation_date": 1462384382, "post_id": 37034113, "comment_id": 61619541, "body": "@le_me It&#39;s given a meaningful name literally 4 lines down in the source code. They define an <code>enum</code> with the name."}, {"owner": {"reputation": 2189, "user_id": 1477992, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/22e212e1defd6cf572fe11aa79f1dace?s=128&d=identicon&r=PG", "display_name": "le_me", "link": "https://stackoverflow.com/users/1477992/le-me"}, "edited": false, "score": 0, "creation_date": 1462386440, "post_id": 37034113, "comment_id": 61620848, "body": "oh enum variants are in the global namespace in C, I forgot that! Thank you, it makes sense now!"}], "tags": [], "owner": {"reputation": 16415, "user_id": 1070117, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/075d11243bc7564b736ad01169e12bd7?s=128&d=identicon&r=PG", "display_name": "Leandros", "link": "https://stackoverflow.com/users/1070117/leandros"}, "is_accepted": true, "score": 4, "last_activity_date": 1462384583, "last_edit_date": 1495541772, "creation_date": 1462382091, "answer_id": 37034113, "question_id": 37034010, "link": "https://stackoverflow.com/questions/37034010/what-does-a-macro-definition-with-the-same-token-twice-in-c-mean/37034113#37034113", "title": "What does a macro definition with the same token twice in C mean?", "body": "<p>This define will expand into the literal token <code>RSTRING_EMBED_LEN_MAX</code>, just as you would expect.</p>\n\n<p>By looking at the source, you'll see, that the macro is used to define an <code>enum</code> value with the same name, set to <code>(int)((sizeof(VALUE)*3)/sizeof(char)-1)</code>. </p>\n\n<p>The commit, linked by <a href=\"https://stackoverflow.com/users/214790/matt\">matt</a>, explains they converted all macros into enums, to improve debugging. And the macro was left for compatibility reasons.</p>\n"}], "owner": {"reputation": 2189, "user_id": 1477992, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/22e212e1defd6cf572fe11aa79f1dace?s=128&d=identicon&r=PG", "display_name": "le_me", "link": "https://stackoverflow.com/users/1477992/le-me"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 37034113, "answer_count": 1, "score": 1, "last_activity_date": 1462384583, "creation_date": 1462381749, "question_id": 37034010, "link": "https://stackoverflow.com/questions/37034010/what-does-a-macro-definition-with-the-same-token-twice-in-c-mean", "title": "What does a macro definition with the same token twice in C mean?", "body": "<p>I was reading the <a href=\"https://github.com/ruby/ruby\" rel=\"nofollow\">Ruby source code</a> when I stumbled upon the following:</p>\n\n<pre><code>#define RSTRING_EMBED_LEN_MAX RSTRING_EMBED_LEN_MAX\n</code></pre>\n\n<p><a href=\"https://github.com/ruby/ruby/blob/973ba3e8e24f4497aebcbd3819fc9c0f38a7909f/include/ruby/ruby.h#L968\" rel=\"nofollow\">context</a></p>\n\n<p>As far as I can tell <code>RSTRING_EMBED_LEN_MAX</code> is not defined before. (I grepped the Ruby source recursively).</p>\n\n<p>What does that line do exactly?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1462381914, "post_id": 37033935, "comment_id": 61618091, "body": "<code>@program.planning_levels.each { |p| p.stories.count}</code> should do it. <code>@program</code> does not respond to <code>planning_level</code> because this is a <code>has_many</code> relationship and the <code>ActiveRecord::Relation</code> returned by <code>planning_levels</code> does not know about <code>stories</code> but each instance contained within the Relation does. Please note this may cause an <code>n+1</code> concern so you may want to preload this data when setting <code>@program</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1041, "user_id": 2814270, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ezuBx.jpg?s=128&g=1", "display_name": "thanhnha1103", "link": "https://stackoverflow.com/users/2814270/thanhnha1103"}, "is_accepted": true, "score": 0, "last_activity_date": 1462383853, "creation_date": 1462383853, "answer_id": 37034589, "question_id": 37033935, "link": "https://stackoverflow.com/questions/37033935/displaying-has-many-through-association-records/37034589#37034589", "title": "Displaying has_many, :through association records", "body": "<p>Each Planning Level:</p>\n\n<pre><code>&lt;% @program.planning_levels.each do |planning_level| %&gt;\n  &lt;p&gt;&lt;%= planning_level.name %&gt;&lt;/p&gt;\n  # Aggregate Story count for each planning_level\n  &lt;p&gt;&lt;%= planning_level.stories.count %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Aggregate Story count for @program (if you want):</p>\n\n<pre><code>@program.stories.count\n</code></pre>\n\n<p>Hope this can help you.</p>\n"}, {"tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": false, "score": 0, "last_activity_date": 1462384751, "last_edit_date": 1462384751, "creation_date": 1462384248, "answer_id": 37034704, "question_id": 37033935, "link": "https://stackoverflow.com/questions/37033935/displaying-has-many-through-association-records/37034704#37034704", "title": "Displaying has_many, :through association records", "body": "<p>In your view, you can simply use the model associations by name to do this.  Try this code as a starting point for your display needs:</p>\n\n<pre><code>&lt;% @program.planning_levels.each do |planning_level| %&gt;\n  &lt;p&gt;&lt;%= planning_level.name %&gt; with &lt;%= planning_level.stories.count %&gt; stories&lt;/p&gt;\n  &lt;% planning_level.stories.each do |story| %&gt;\n    &lt;p&gt;&lt;%= story.name %&gt;&lt;/p&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>You can output any details that you choose for the stories loop.  You can add styling to get the presentation that you need.</p>\n\n<p>For instance, you might consider formatting this as a nested list, like so:</p>\n\n<pre><code>&lt;% @program.planning_levels.each do |planning_level| %&gt;\n  &lt;ul&gt;\n    &lt;li&gt;Planning Level: &lt;%= planning_level.name %&gt; with &lt;%= planning_level.stories.count %&gt; stories\n      &lt;ul&gt;\n        &lt;% planning_level.stories.each do |story| %&gt;\n          &lt;li&gt;Story: &lt;%= story.name %&gt;&lt;/li&gt;\n        &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/li&gt;\n  &lt;/ul&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Adding CSS <code>class</code> and <code>id</code> attributes would give you the ability to add styling to the elements to give your UI some flair.</p>\n"}], "owner": {"reputation": 47, "user_id": 6288896, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/59ec264f37ff0c05973fb4fe4cb77df1?s=128&d=identicon&r=PG&f=1", "display_name": "martinmsf", "link": "https://stackoverflow.com/users/6288896/martinmsf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 37034589, "answer_count": 2, "score": 1, "last_activity_date": 1462384751, "creation_date": 1462381464, "question_id": 37033935, "link": "https://stackoverflow.com/questions/37033935/displaying-has-many-through-association-records", "title": "Displaying has_many, :through association records", "body": "<p>I am working on an application a deep association. A Story belongs to a Planning Level, the Planning Level belongs to one or many Programs.</p>\n\n<pre><code>class Program &lt; ActiveRecord::Base\n  has_and_belongs_to_many :planning_levels\n  has_many :stories, :through =&gt; :planning_levels\nend\n\nclass PlanningLevelsPrograms &lt; ActiveRecord::Base\nend\n\nclass PlanningLevel &lt; ActiveRecord::Base\n  has_and_belongs_to_many :programs\n  has_many :stories\nend\n\nclass Story &lt; ActiveRecord::Base\n  belongs_to :planning_level\nend\n</code></pre>\n\n<p>Within the Program show page I'd like to display the Program, each Planning Level and aggregate Story count for each Planning Level. </p>\n\n<p>I'm not sure how to access the Story model from the Program show page.</p>\n\n<p>The following works great for displaying each Planning Level belonging to the Program.</p>\n\n<pre><code>&lt;% @program.planning_levels.each do |p| %&gt;\n  &lt;p&gt;&lt;%= p.name %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>...but I have no idea how to make the following work for each displayed Planning Level. How do I access the Story model from with the Program? Is there something needed in the Program controller that I'm missing. Thanks in advance!</p>\n\n<pre><code>@program.planning_level.stories.count(:id)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "coffeescript", "stripe-payments"], "comments": [{"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1462381378, "post_id": 37033650, "comment_id": 61617806, "body": "you dnt have even chargin object ))"}, {"owner": {"reputation": 27, "user_id": 5667263, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ee9fe84a398cdca219a51bc03af1e239?s=128&d=identicon&r=PG", "display_name": "cremboeye", "link": "https://stackoverflow.com/users/5667263/cremboeye"}, "reply_to_user": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1462381537, "post_id": 37033650, "comment_id": 61617893, "body": "thanks for replying. The charge is happening in the controller in the charge action."}, {"owner": {"reputation": 27, "user_id": 5667263, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ee9fe84a398cdca219a51bc03af1e239?s=128&d=identicon&r=PG", "display_name": "cremboeye", "link": "https://stackoverflow.com/users/5667263/cremboeye"}, "reply_to_user": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1462382201, "post_id": 37033650, "comment_id": 61618244, "body": "The Charging object is in the controller but it is not charging successfully."}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1462383314, "post_id": 37033650, "comment_id": 61618867, "body": "did u try to remove this <code>after_action :charge, only: [:create]</code> and add just <code>charge</code> into create method where u want to call ? cuz, i see yr deleting yr object, after update method called."}, {"owner": {"reputation": 27, "user_id": 5667263, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ee9fe84a398cdca219a51bc03af1e239?s=128&d=identicon&r=PG", "display_name": "cremboeye", "link": "https://stackoverflow.com/users/5667263/cremboeye"}, "reply_to_user": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1462383570, "post_id": 37033650, "comment_id": 61619028, "body": "I have tried to put into create method as you say and delete the charge after_create but I get the same error."}, {"owner": {"reputation": 27, "user_id": 5667263, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ee9fe84a398cdca219a51bc03af1e239?s=128&d=identicon&r=PG", "display_name": "cremboeye", "link": "https://stackoverflow.com/users/5667263/cremboeye"}, "reply_to_user": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1462383615, "post_id": 37033650, "comment_id": 61619056, "body": "Where do you see I&#39;m deleting the object after update?"}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1462383792, "post_id": 37033650, "comment_id": 61619166, "body": "its not after update but in side method. its in the <code>create</code> method,  <code>@application.destroy</code>"}, {"owner": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "edited": false, "score": 0, "creation_date": 1462384396, "post_id": 37033650, "comment_id": 61619555, "body": "as a side note, if your <code>save_with_payment</code> method returns false your controller method has no calls to render or redirect... might want to fix that."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 5667263, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ee9fe84a398cdca219a51bc03af1e239?s=128&d=identicon&r=PG", "display_name": "cremboeye", "link": "https://stackoverflow.com/users/5667263/cremboeye"}, "edited": false, "score": 0, "creation_date": 1462406686, "post_id": 37035366, "comment_id": 61629983, "body": "Michael. It was that simple. Thanks for the advise!"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "reply_to_user": {"reputation": 27, "user_id": 5667263, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ee9fe84a398cdca219a51bc03af1e239?s=128&d=identicon&r=PG", "display_name": "cremboeye", "link": "https://stackoverflow.com/users/5667263/cremboeye"}, "edited": false, "score": 0, "creation_date": 1462406781, "post_id": 37035366, "comment_id": 61630011, "body": "That one gets me all the time!  It&#39;s now one of the first places that I look when things don&#39;t behave.  :D  Good luck!"}], "tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": true, "score": 2, "last_activity_date": 1462386692, "creation_date": 1462386692, "answer_id": 37035366, "question_id": 37033650, "link": "https://stackoverflow.com/questions/37033650/unable-to-charge-customer-using-stripe/37035366#37035366", "title": "Unable to charge customer using stripe", "body": "<p>Your <code>application_params()</code> filter method doesn't appear to permit the <code>stripe_card_token</code> that gets submitted from your form.  I believe that if you add that to your <code>permit()</code> filter list, you should be able to get the value through to the controller, so that it can be used when it's needed.</p>\n"}], "owner": {"reputation": 27, "user_id": 5667263, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ee9fe84a398cdca219a51bc03af1e239?s=128&d=identicon&r=PG", "display_name": "cremboeye", "link": "https://stackoverflow.com/users/5667263/cremboeye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 37035366, "answer_count": 1, "score": 1, "last_activity_date": 1462386692, "creation_date": 1462380479, "last_edit_date": 1462384267, "question_id": 37033650, "link": "https://stackoverflow.com/questions/37033650/unable-to-charge-customer-using-stripe", "title": "Unable to charge customer using stripe", "body": "<p>I'm trying to save a customer with credit card details and charge it later. </p>\n\n<p>So far I was able to do the following:</p>\n\n<ol>\n<li><p>Get the card token to Stripe (I see it in the logs in stripe and in my Rails console)</p></li>\n<li><p>Create a customer, send it to Stripe and save the customer id in my database. </p></li>\n</ol>\n\n<p>When I try to charge the customer I get the following error:</p>\n\n<blockquote>\n  <p>Stripe::CardError (Cannot charge a customer that has no active card)</p>\n</blockquote>\n\n<p>Maybe the card token is not assigned to the customer properly? How can I solve it? maybe it's something simple that I'm missing but I've been trying to get a solution for a while.</p>\n\n<p><strong>application.rb:</strong></p>\n\n<pre><code>class Application &lt; ActiveRecord::Base\n\n  attr_accessor :stripe_card_token\n\n  def save_with_payment\n    if valid?\n      customer = Stripe::Customer.create(\n        description: id, \n        email: self.user.email,\n        source: self.stripe_card_token\n      )\n      self.stripe_customer_token = customer.id\n      save!\n    end\n    rescue Stripe::InvalidRequestError =&gt; e\n      logger.error \"Stripe error while creating customer: #{e.message}\"\n      errors.add :base, \"There was a problem with your credit card.\"\n      false\n    end \n</code></pre>\n\n<p><strong>applications.js.coffee:</strong></p>\n\n<pre><code>jQuery -&gt;\n  Stripe.setPublishableKey($('meta[name=\"stripe-key\"]').attr('content'))\n  application.setupForm()\n\n  application =\n    setupForm: -&gt;\n    $('#new_application').submit -&gt;\n      $('input[type=submit]').attr('disabled', true)\n      if $('#card_number').length\n        application.processCard()\n        false\n      else\n        true\n\n  processCard: -&gt;\n    card =\n      number: $('#card_number').val()\n      cvc: $('#card_code').val()\n      exp_month: $('#card_month').val()\n      exp_year: $('#card_year').val()\n    Stripe.createToken(card, application.handleStripeResponse)\n\n  handleStripeResponse: (status, response) -&gt;\n    if status == 200\n      $('#application_stripe_card_token').val(response.id)\n      $('#new_application')[0].submit() -&gt;\n       return true if($form.find('.application_stripe_card_token').val())\n\n    else\n      $('#stripe_error').text(response.error.message)\n      $('input[type=submit]').attr('disabled', false)\n</code></pre>\n\n<p><strong>applications_controller.rb</strong></p>\n\n<pre><code>class ApplicationsController &lt; ApplicationController\n\n  before_action :set_application, only: [:show, :edit, :update, :confirmation, :charge]\n  after_action :charge, only: [:create]\n\n  def new \n    @listing = Listing.find(params[:listing_id])\n    @application = Application.new\n\n    if Guarantor.where(application_id: @application.id).first.blank?\n      @guarantor = Guarantor.new(params[:guarantor])\n    end\n  end \n\n  def create\n    @listing = Listing.find(params[:listing_id])\n    @application = current_user.applications.create(application_params)       \n\n    if params[:btnSubmit]\n      redirect_to confirmation_listing_application_path(@application.listing_id, @application.id)\n    elsif @application.save_with_payment\n      if params[:application][:roommates_attributes].present?\n        params[:application][:roommates_attributes].values.each do |a|\n          @email = a[:email]\n        end\n        @user = User.where(email: @email).first\n        if @user.blank?\n          flash[:error] = \"The email address doesn't exist in our records\"\n          redirect_to new_listing_application_path(@application.listing_id)\n          @application.destroy\n        else          \n          redirect_to confirmation_listing_application_path(@application.listing_id, @application.id), :notice =&gt; \"Thank you for applying!\"\n        end\n      else\n        redirect_to confirmation_listing_application_path(@application.listing_id, @application.id), :notice =&gt; \"Thank you for applying!\"\n      end\n    end   \n  end\n\n  def charge\n    Stripe::Charge.create(\n      :amount   =&gt; 1500, \n      :currency =&gt; \"usd\",\n      :customer =&gt; @application.stripe_customer_token \n    )\n  end\n\n  private\n\n  def set_application\n    @application = Application.find(params[:id])\n  end\n\n  def application_params\n    params.require(:application).permit(\n      :_destroy,\n      :user_id,\n      :listing_id, \n      :stripe_customer_token,\n      :st_address,\n      :unit,\n      :city,\n      :state\n    )\n  end\nend\n</code></pre>\n\n<p><strong>form.html.erb</strong></p>\n\n<pre><code>&lt;%= form_for [@listing, @application], html: {id: \"new_application\", multipart: true} do |f| %&gt;\n  &lt;%= f.hidden_field :stripe_card_token %&gt;\n\n  &lt;% if @application.stripe_customer_token.present? %&gt;\n    Credit Card has been provided.\n  &lt;% else %&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-md-6\"&gt;\n        &lt;%= label_tag :card_number, \"Credit Card Number\" %&gt;\n        &lt;%= text_field_tag :card_number, nil, name: nil, \"data-stripe\" =&gt; \"number\" %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-md-6\"&gt;\n        &lt;%= label_tag :card_code, \"Security Code (CVC)\" %&gt;\n        &lt;%= text_field_tag :card_code, nil, name: nil, \"data-stripe\" =&gt; \"cvc\" %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-md-6\"&gt;\n        &lt;%= label_tag :card_month, \"Card Expiration\" %&gt;\n        &lt;%= select_month nil, {add_month_numbers: true},    {name: nil, id: \"card_month\", \"data-stripe\" =&gt; \"exp-month\" } %&gt;\n        &lt;%= select_year nil, {start_year: Date.today.year, end_year: Date.today.year+15}, {name: nil, id: \"card_year\", \"data-stripe\" =&gt; \"exp-year\"} %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div id=\"stripe_error\"&gt;\n    &lt;noscript&gt;JavaScript is not enabled and is required for this form. First enable it in your web browser settings.&lt;/noscript&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"nextBackBtns\"&gt;\n    &lt;a herf=\"#\" class=\"btn btn-primary-custom btnBack\" data-content=\"details\"&gt;Back&lt;/a&gt;\n    &lt;%= f.submit \"Save\", class: \"btn btn-primary\" %&gt;\n  &lt;/div&gt; \n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "parsing", "nokogiri", "screen-scraping"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1462382341, "post_id": 37032997, "comment_id": 61618328, "body": "<a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri%2FXML%2FSearchable%3Acss\" rel=\"nofollow noreferrer\">Nokogiri Docs</a> seems like it would appropriately answer this question"}], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1462405019, "creation_date": 1462405019, "answer_id": 37039885, "question_id": 37032997, "link": "https://stackoverflow.com/questions/37032997/nokogiri-get-element-which-attribute-match-a-pattern/37039885#37039885", "title": "Nokogiri get element which attribute match a pattern", "body": "<p>Yes, Nokogiri has provision for you to create your own <code>search</code>, <code>css</code>, <code>xpath</code>, <code>at</code>, <code>at_css</code> or <code>at_xpath</code> functions.</p>\n\n<p>It's in the <a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Node\" rel=\"nofollow\">Nokogiri::XML::Node</a> and <a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Searchable#search-instance_method\" rel=\"nofollow\">Nokogiri::XML::Searchable</a> documentation. For instance:</p>\n\n<blockquote>\n  <p>Custom XPath functions and CSS pseudo-selectors may also be defined. To define custom functions create a class and implement the function you want to define. The first argument to the method will be the current matching NodeSet. Any other arguments are ones that you pass in. Note that this class may appear anywhere in the argument list. For example:</p>\n</blockquote>\n\n<pre><code>node.search('.//title[regex(., \"\\w+\")]', 'div.employee:regex(\"[0-9]+\")'\n  Class.new {\n    def regex node_set, regex\n      node_set.find_all { |node| node['some_attribute'] =~ /#{regex}/ }\n    end\n  }.new\n)\n</code></pre>\n"}], "owner": {"reputation": 178, "user_id": 4658926, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/771302485/picture?type=large", "display_name": "Francisco Campa&#241;a", "link": "https://stackoverflow.com/users/4658926/francisco-campa%c3%b1a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1203, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462460265, "creation_date": 1462378386, "last_edit_date": 1462460265, "question_id": 37032997, "link": "https://stackoverflow.com/questions/37032997/nokogiri-get-element-which-attribute-match-a-pattern", "title": "Nokogiri get element which attribute match a pattern", "body": "<p>I'm trying to guess price from an HTML.</p>\n\n<p>If #id or .class or direct parent has attribute value like some regex =~ [price.*|prdown|proff]+</p>\n\n<p>1) Does Nokogiri doc.css accept regex like jsoup Java library does? i.e. [attr~=regex] <a href=\"https://jsoup.org/apidocs/org/jsoup/select/Selector.html\" rel=\"nofollow\">https://jsoup.org/apidocs/org/jsoup/select/Selector.html</a></p>\n\n<p>2) Can I accomplish that passing regex as argument for the attribute value? instead of creating a custom function?</p>\n\n<pre><code>doc = Nokogiri::HTML(open(url).read)\n\n  def get_price(doc)\n    if doc.at_css(\"meta[itemprop='price']\")\n      price = doc.css(\"meta[itemprop='price']\").first.attributes[\"content\"]\n    elsif doc.at_css('.price')\n      price = doc.at_css('[class~=price]').text\n    else\n     price = ''\n    end\n    /([\\d|\\.|\\$]+)/.match(price)[1].gsub(/[\\.|\\$]+/, '')\n  end\n</code></pre>\n"}, {"tags": ["ruby", "rvm", "rbenv", "gemfile"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1462378501, "post_id": 37032812, "comment_id": 61616097, "body": "Given that the specific ruby version <code>2.2.4</code> is <i>only</i> intended for production, and not development, why is this in your <code>Gemfile</code> in the first place? Why not put it somewhere more sensible, such as <code>config&#47;deploy.rb</code>?"}, {"owner": {"reputation": 432, "user_id": 5113832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/991ef57603f1d1c2358d5beee3f8a521?s=128&d=identicon&r=PG", "display_name": "bideowego", "link": "https://stackoverflow.com/users/5113832/bideowego"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1462379739, "post_id": 37032812, "comment_id": 61616834, "body": "I&#39;m deploying to Heroku and as their docs indicate, I&#39;m putting the ruby version in the Gemfile shown <a href=\"https://devcenter.heroku.com/articles/ruby-versions\" rel=\"nofollow noreferrer\">here</a>. Even if I were to put the version in a different place, that doesn&#39;t answer my question. That would only move the problem to a different file :)"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1462381294, "post_id": 37032812, "comment_id": 61617768, "body": "Ahh ok, I understand your problem now. (BTW, my suggestion was answering the question -- the issue is still all about separating the development vs production config.) How about using <a href=\"https://github.com/bkeepers/dotenv\" rel=\"nofollow noreferrer\">github.com/bkeepers/dotenv</a> to store the development ruby version? Would that work?"}, {"owner": {"reputation": 432, "user_id": 5113832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/991ef57603f1d1c2358d5beee3f8a521?s=128&d=identicon&r=PG", "display_name": "bideowego", "link": "https://stackoverflow.com/users/5113832/bideowego"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1462381495, "post_id": 37032812, "comment_id": 61617866, "body": "Creating custom ENV variables is certainly an option. I was searching through the <a href=\"https://rvm.io\" rel=\"nofollow noreferrer\">RVM docs</a> to find something similar to the <a href=\"https://github.com/rbenv/rbenv#environment-variables\" rel=\"nofollow noreferrer\">RBENV environment variabes</a>. Thought I might find a more simple answer I was missing from RVM users. Ideally it should just be as simple as a single line in the Gemfile regardless of the version manager an dev on the team is using."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1462382021, "post_id": 37032812, "comment_id": 61618151, "body": "But what if the developer is using <code>chruby</code>? Or just a plain old system ruby? The only catch-all would be to specify <code>RUBY_VERSION</code> in the Gemfile, but that&#39;s explicitly what the Heroku docs say <i>not</i> to do! So instead, you could do something like <code>ruby (ENV[&#39;DEVELOPMENT_MODE&#39;] ? RUBY_VERSION : &#39;2.2.4&#39;)</code> ... But now since we&#39;re setting an ENV variable flag, might as well just make it for the ruby version!  <code>ruby ENV[&#39;DEVELOPMENT_RUBY_VERSION&#39;] ||  &#39;2.2.4&#39;</code> ..... Unless I&#39;m missing something here?"}, {"owner": {"reputation": 432, "user_id": 5113832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/991ef57603f1d1c2358d5beee3f8a521?s=128&d=identicon&r=PG", "display_name": "bideowego", "link": "https://stackoverflow.com/users/5113832/bideowego"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1462383475, "post_id": 37032812, "comment_id": 61618968, "body": "Yeah using <code>RUBY_VERSION</code> is asking for trouble because it should always be set. I really can&#39;t see a better solution than a development <code>ENV</code> variable. I was just wondering if there was a widely accepted way to handle this. I suppose I&#39;ll just have to discuss it with team members and agree on something."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1462394763, "post_id": 37032812, "comment_id": 61625476, "body": "There is a widely accepted way to handle this: You develop using the same ruby version that you deploy on.  This is literally the whole point in using tools like rbenv"}], "answers": [{"comments": [{"owner": {"reputation": 432, "user_id": 5113832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/991ef57603f1d1c2358d5beee3f8a521?s=128&d=identicon&r=PG", "display_name": "bideowego", "link": "https://stackoverflow.com/users/5113832/bideowego"}, "edited": false, "score": 0, "creation_date": 1462408795, "post_id": 37037979, "comment_id": 61630521, "body": "Thanks I appreciate you actually answering my question instead of telling me in so many words, &quot;You&#39;re doing it wrong, do this instead&quot;. This has been a curiosity of mine for a while."}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "reply_to_user": {"reputation": 432, "user_id": 5113832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/991ef57603f1d1c2358d5beee3f8a521?s=128&d=identicon&r=PG", "display_name": "bideowego", "link": "https://stackoverflow.com/users/5113832/bideowego"}, "edited": false, "score": 0, "creation_date": 1462408990, "post_id": 37037979, "comment_id": 61630572, "body": "@bideowego Hey, I thought it was a great question and I learned a couple of new things in the process!  Is this what you were looking for, or was there any other part that isn&#39;t answered?"}, {"owner": {"reputation": 432, "user_id": 5113832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/991ef57603f1d1c2358d5beee3f8a521?s=128&d=identicon&r=PG", "display_name": "bideowego", "link": "https://stackoverflow.com/users/5113832/bideowego"}, "edited": false, "score": 0, "creation_date": 1462409199, "post_id": 37037979, "comment_id": 61630631, "body": "Yes @MichaelGaskell, I believe this is what I was looking for. Basically a way in RVM to get at the numeric string <code>2.x.x</code> for use in the Gemfile. I understand you can just install versions of Ruby for every project. But sometimes you don&#39;t want to install patch versions just for the sake of one or two projects. Add to that the complication of working on teams with varying Ruby versions and presto! That&#39;s where this question came from :D"}], "tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": true, "score": 1, "last_activity_date": 1462405982, "last_edit_date": 1462405982, "creation_date": 1462395881, "answer_id": 37037979, "question_id": 37032812, "link": "https://stackoverflow.com/questions/37032812/dynamic-gemfile-ruby-version-for-both-rbenv-and-rvm/37037979#37037979", "title": "Dynamic Gemfile Ruby version for both rbenv and RVM", "body": "<p>To get the current Ruby version from any RVM instance, you can query it using this method:</p>\n\n<pre><code>rvm list default string | sed s/ruby-//\n</code></pre>\n\n<p>You can also use the RVM prompt tools to query the current version</p>\n\n<pre><code>rvm-prompt i v | sed s/ruby-//\n</code></pre>\n\n<p>or </p>\n\n<pre><code>rvm-prompt i v p g | sed s/ruby-//\n</code></pre>\n\n<p>depending on how detailed you want to allow.  Docs for the <code>rvm-prompt</code> command can be found in \"<a href=\"http://rvm.io/workflow/prompt\" rel=\"nofollow\">rvm-prompt</a>\".</p>\n\n<p>If the user chooses to leave RVM at its default version, you get that version reported, but if the Ruby version has been changed in RVM, you get the currently chosen version.</p>\n\n<p>You can chain this in any way that <code>ENV['RBENV_VERSION']</code> is used, such as:</p>\n\n<pre><code>`rvm list default string | sed s/ruby-//` || 2.2.4\n</code></pre>\n\n<p>This will choose the current RVM Ruby version or 2.2.4 if RVM doesn't show a version.</p>\n\n<p>Note that RVM has to exist (or at least something called <code>rvm</code> has to be available as an executable).  If not, an additional script wrapper may be needed to handle the situation in which it doesn't exist and degrade gracefully.</p>\n\n<p>Personally, I love having it available everywhere, including production environments.  It's the very first thing that I install on a new OS instance, even before the text editor, and the second thing that I do is install the appropriate Ruby version with RVM.</p>\n"}], "owner": {"reputation": 432, "user_id": 5113832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/991ef57603f1d1c2358d5beee3f8a521?s=128&d=identicon&r=PG", "display_name": "bideowego", "link": "https://stackoverflow.com/users/5113832/bideowego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "accepted_answer_id": 37037979, "answer_count": 1, "score": 4, "last_activity_date": 1462405982, "creation_date": 1462377755, "last_edit_date": 1462405811, "question_id": 37032812, "link": "https://stackoverflow.com/questions/37032812/dynamic-gemfile-ruby-version-for-both-rbenv-and-rvm", "title": "Dynamic Gemfile Ruby version for both rbenv and RVM", "body": "<p>I use rbenv but other team members use RVM.</p>\n\n<p>When specifying the <code>ruby 2.x.x</code> version in the Gemfile I\u2019ve been doing this:</p>\n\n<pre><code>ruby ENV['RBENV_VERSION'] || '2.2.4'\n</code></pre>\n\n<p>which grabs the current version I\u2019m using from rbenv and uses it for the Gemfile. However, in production, it is not present  and uses the specified version after <code>||</code>.</p>\n\n<p>I\u2019ve been searching for a similar way to do this in RVM, the ultimate goal being to set up a Gemfile where all developers can use their local version of Ruby and a concrete version is specified for production.</p>\n\n<p>This would allow developers to use rbenv or RVM for a project as well as not need to install new versions of Ruby every time they work on a project with a version they don\u2019t have installed.</p>\n\n<p>Are there any RVM users that can give me an equivalent to <code>ENV['RBENV_VERSION']</code> for RVM? I\u2019ve been searching a lot and haven\u2019t found anything I like.</p>\n\n<p>The best answer I can see is having RVM users specify the version via an environment variable name agreed upon by the team and used like \"<a href=\"https://devcenter.heroku.com/articles/ruby-versions#specifying-a-ruby-version-via-the-environment\" rel=\"nofollow\">Specifying a Ruby version via the environment</a>\" as well and use that instead in the Gemfile.</p>\n"}, {"tags": ["ruby", "logstash"], "comments": [{"owner": {"reputation": 9567, "user_id": 1900722, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nGsJr.jpg?s=128&g=1", "display_name": "anquegi", "link": "https://stackoverflow.com/users/1900722/anquegi"}, "edited": false, "score": 0, "creation_date": 1462376245, "post_id": 37032004, "comment_id": 61614491, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/31782160/parse-json-in-a-list-in-logstash\">Parse json in a list in logstash</a>"}, {"owner": {"reputation": 919, "user_id": 2361836, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/cdca60eb050e800e9229d95b5d3a3e78?s=128&d=identicon&r=PG", "display_name": "corvax", "link": "https://stackoverflow.com/users/2361836/corvax"}, "reply_to_user": {"reputation": 9567, "user_id": 1900722, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nGsJr.jpg?s=128&g=1", "display_name": "anquegi", "link": "https://stackoverflow.com/users/1900722/anquegi"}, "edited": false, "score": 0, "creation_date": 1462376818, "post_id": 37032004, "comment_id": 61614928, "body": "@anquegi How is it duplicate? absolutely different questions."}, {"owner": {"reputation": 9567, "user_id": 1900722, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nGsJr.jpg?s=128&g=1", "display_name": "anquegi", "link": "https://stackoverflow.com/users/1900722/anquegi"}, "edited": false, "score": 0, "creation_date": 1462377367, "post_id": 37032004, "comment_id": 61615365, "body": "Well I think that you should read that other question answer to fix your solution, maybe I wrong"}], "owner": {"reputation": 919, "user_id": 2361836, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/cdca60eb050e800e9229d95b5d3a3e78?s=128&d=identicon&r=PG", "display_name": "corvax", "link": "https://stackoverflow.com/users/2361836/corvax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 724, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1512144982, "creation_date": 1462375474, "last_edit_date": 1512144982, "question_id": 37032004, "link": "https://stackoverflow.com/questions/37032004/how-to-loop-logstash-event-recursively", "title": "How to loop logstash event recursively", "body": "<p>I have following situation.</p>\n\n<p>I receive json encoded object in logstash and decode it, like</p>\n\n<pre><code>filter {\n    json {\n        source =&gt; \"message\"\n        target =&gt; \"json\"\n    }\n}\n</code></pre>\n\n<p>So I have json object with complex nested structure.\nNow I need to parse json object and remove all fields with special name.</p>\n\n<p>For example removing \"BinaryData\" fields:</p>\n\n<pre><code>event\n- json\n--...\n--- BinaryData: ... &lt;- remove\n</code></pre>\n\n<p>The problem is that BinaryData can be anywhere, on any nested level, and I need to traverse event recursively somehow.</p>\n\n<p>Any ideas how to do that?</p>\n\n<p>PS Don't suggest gsub as solution.\nPPS Suggesting ruby code please provide any recursive example.</p>\n"}, {"tags": ["ruby", "file", "scripting", "scripting-language"], "comments": [{"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1462415305, "post_id": 37031214, "comment_id": 61632035, "body": "Something I find useful for sorting by file name is to zero pad the numeric strings, and for easier reading, separating the stem and the number with an underscore.  You could do something like this: <code>newName + (&quot;_%03d&quot; % i) + &#39;.JPG&#39;</code> =&gt; &quot;newname_001.JPG&quot;"}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1462415440, "post_id": 37031214, "comment_id": 61632074, "body": "Also, rather than explicitly initializing and incrementing <code>i</code>, you can do this: <code>files.each.with_index(1) { |file, index| puts &quot;#{index}: #{file}&quot; }</code>"}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1462415617, "post_id": 37031214, "comment_id": 61632122, "body": "Also, 1.8 is very ancient, and will be less and less supported by gems, and no longer supported with regard to security, fixes, etc.  I highly recommend installing a more recent Ruby.  I like <code>rvm</code> for this.  Also, I recommend conforming to the Ruby snake case variable naming scheme, e.g. &#39;new_name&#39; and not &#39;newName&#39;."}, {"owner": {"reputation": 1, "user_id": 6288523, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tBWS6W28yEg/AAAAAAAAAAI/AAAAAAAABDM/zO_NE7uZ5ic/photo.jpg?sz=128", "display_name": "Shane Williamson", "link": "https://stackoverflow.com/users/6288523/shane-williamson"}, "reply_to_user": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1462471020, "post_id": 37031214, "comment_id": 61661327, "body": "@KeithBennet thanks for your responses.  I really appreciate it.  I&#39;m with you on the renaming using the _001 convention, just wasn&#39;t sure how to do it, frankly.  So thanks.  Would you mind elaborating a little bit on your solution to avoid explicitly initializing and incrementing?  Just trying to really understand this as all of this is a learning exercise as much as anything else. Specifically, I&#39;m not sure I understand what you&#39;re doing from with_index forward.  Thanks!"}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1462471250, "post_id": 37031214, "comment_id": 61661499, "body": "Shane, when you call with_index on <code>each</code>&#39;s return value, it adds the index to the list of values that is passed to each iteration of the block.  The parameter <code>1</code> just says start at number 1 and increment from there."}], "answers": [{"tags": [], "owner": {"reputation": 5207, "user_id": 3277393, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a2967a01798ad7d675a6b39f41232a5b?s=128&d=identicon&r=PG&f=1", "display_name": "user12341234", "link": "https://stackoverflow.com/users/3277393/user12341234"}, "is_accepted": false, "score": 0, "last_activity_date": 1462375384, "creation_date": 1462375384, "answer_id": 37031970, "question_id": 37031214, "link": "https://stackoverflow.com/questions/37031214/file-rename-throwing-invalid-argument-error-in-ruby-script-to-rename-all-files-i/37031970#37031970", "title": "File.rename throwing invalid argument error in Ruby script to rename all files in directory", "body": "<p>You might consider using an existing utility instead of writing your own. <a href=\"http://search.cpan.org/~pederst/rename-1.8/bin/rename.PL\" rel=\"nofollow\">rename</a> does just what you are trying to achieve and is available on most operating systems. Your whole script can be written as:</p>\n\n<pre><code>rename --just-print -N 001 's/.*/cobaltPic$N.jpg/' *.jpg\n</code></pre>\n\n<p>This command only shows you what the script would do, but doesn't actually rename anything. After you verify the output, you can remove the <code>--just-print</code> flag and it will apply the changes.</p>\n"}, {"comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462376716, "post_id": 37032258, "comment_id": 61614844, "body": "@tadman both <code>.each_with_index</code> and <code>.each.with_index</code> are valid for an <code>Enumerable</code>. I often use <code>.each.with_index</code> because sometimes the receiver is not an <code>Enumerable</code>, only something that <code>.respond_to?(:each)</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462376933, "post_id": 37032258, "comment_id": 61615022, "body": "Ah, the <a href=\"http://ruby-doc.org/core-2.3.0/Enumerator.html#method-i-with_index\" rel=\"nofollow noreferrer\"><code>with_index</code></a> method is an Enumerator method. They really should make both work the same way as being able to specify a starting index is nice. Thanks for pointing that out. That&#39;s a tidy way of solving this problem."}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 1, "last_activity_date": 1462376564, "last_edit_date": 1462376564, "creation_date": 1462376146, "answer_id": 37032258, "question_id": 37031214, "link": "https://stackoverflow.com/questions/37031214/file-rename-throwing-invalid-argument-error-in-ruby-script-to-rename-all-files-i/37032258#37032258", "title": "File.rename throwing invalid argument error in Ruby script to rename all files in directory", "body": "<p>A quick and relatively safe way is to rename only those files whose names do NOT start with a dot. Those \".xxx\" files are \"hidden files\" that are created typically by the operating system or some softwares, and they are not intended to be touched.</p>\n\n<pre><code>folder = '/Users/ShaneWilliamson/Desktop/cobalt pics'\nnewName = 'cobaltPic'\n\nDir.entries(folder).reject{|f| f[0] == '.'}.each_with_index(1) do |file, i|\n  File.rename file, \"#{newName}#{i}.JPG\"\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6288523, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tBWS6W28yEg/AAAAAAAAAAI/AAAAAAAABDM/zO_NE7uZ5ic/photo.jpg?sz=128", "display_name": "Shane Williamson", "link": "https://stackoverflow.com/users/6288523/shane-williamson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 686, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1462501618, "creation_date": 1462373388, "last_edit_date": 1462501618, "question_id": 37031214, "link": "https://stackoverflow.com/questions/37031214/file-rename-throwing-invalid-argument-error-in-ruby-script-to-rename-all-files-i", "title": "File.rename throwing invalid argument error in Ruby script to rename all files in directory", "body": "<p>I'm attempting to write a script that will take in a directory path to a folder, and rename all the files in that folder to a name plus a number.  For instance, rename img_0936.JPG, img_0937.JPG to hockeyPic_001.JPG and hockeyPic_002.JPG. </p>\n\n<p>So here's my script: </p>\n\n<pre><code>folder = '/Users/ShaneWilliamson/Desktop/cobalt pics'\nnewName = 'cobaltPic'\n\nputs 'Renaming files...'\nfiles = Dir.entries(folder).reject{|f| f[0] == '.'}\nputs files\n\ni = 1\nfiles.each do |file|\n  File.rename(file, newName + i.to_s + '.JPG')\n  i += 1\nend\n</code></pre>\n\n<p>It's currently returning the correct file names (before the rename) but throwing:</p>\n\n<pre><code>Renaming files...\n.\n..\n.DS_Store\nimage1.JPG\nimage2.JPG\nimage3.JPG\nimage4.JPG\nimage5.JPG\nIMG_1586.JPG\nIMG_1587.JPG\nfileNamer.rb:10:in `rename': Invalid argument - . or cobaltPic_001.JPG\n(Errno::EINVAL)\nfrom fileNamer.rb:10\nfrom fileNamer.rb:9:in `each'\nfrom fileNamer.rb:9\nShanes-MacBook-Air:Desktop ShaneWilliamson$ \n</code></pre>\n\n<p>So it seems the reject method isn't doing quite what I expect, which I think could be causing the error (system won't let the script change the 'hidden' files?). </p>\n\n<p>In case it's relevant, I'm running OSX 10.7.5 on a MacBook Air. Ruby version 1.8.7 per 'ruby -v' command, which I think is just what came on the system out of the box.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1462374277, "post_id": 37031147, "comment_id": 61613074, "body": "change this &lt;p&gt;&lt;% @proposals_q1 %&gt;&lt;/p&gt;"}, {"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 1, "creation_date": 1462374333, "post_id": 37031147, "comment_id": 61613113, "body": "<code>&lt;%= @country.proposals.each do |proposals| %&gt;</code> to <code>&lt;% @country.proposals.each do |proposals| %&gt;</code> and <code>&lt;% @proposals_q1 %&gt;</code> to <code>&lt;%= @proposals_q1 %&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6121852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640ccd3be23318551ece60d6178a80e2?s=128&d=identicon&r=PG&f=1", "display_name": "Berry Allen", "link": "https://stackoverflow.com/users/6121852/berry-allen"}, "edited": false, "score": 0, "creation_date": 1462374744, "post_id": 37031570, "comment_id": 61613436, "body": "The attributes do not appear at the bottom anymore, however they still do not appear in between the headings as well"}, {"owner": {"reputation": 3129, "user_id": 455826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/aPD2c.jpg?s=128&g=1", "display_name": "AmitA", "link": "https://stackoverflow.com/users/455826/amita"}, "reply_to_user": {"reputation": 21, "user_id": 6121852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640ccd3be23318551ece60d6178a80e2?s=128&d=identicon&r=PG&f=1", "display_name": "Berry Allen", "link": "https://stackoverflow.com/users/6121852/berry-allen"}, "edited": false, "score": 0, "creation_date": 1462374807, "post_id": 37031570, "comment_id": 61613494, "body": "Do you have the <code>@proposals_q2</code> defined in the controller?"}, {"owner": {"reputation": 21, "user_id": 6121852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640ccd3be23318551ece60d6178a80e2?s=128&d=identicon&r=PG&f=1", "display_name": "Berry Allen", "link": "https://stackoverflow.com/users/6121852/berry-allen"}, "edited": false, "score": 0, "creation_date": 1462374961, "post_id": 37031570, "comment_id": 61613596, "body": "No. Does that mean I have to create a method for every attribute in the model?"}, {"owner": {"reputation": 3129, "user_id": 455826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/aPD2c.jpg?s=128&g=1", "display_name": "AmitA", "link": "https://stackoverflow.com/users/455826/amita"}, "reply_to_user": {"reputation": 21, "user_id": 6121852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640ccd3be23318551ece60d6178a80e2?s=128&d=identicon&r=PG&f=1", "display_name": "Berry Allen", "link": "https://stackoverflow.com/users/6121852/berry-allen"}, "edited": false, "score": 0, "creation_date": 1462374998, "post_id": 37031570, "comment_id": 61613623, "body": "No you don&#39;t. Just updated my answer for how you can call the model attributes in your view."}, {"owner": {"reputation": 21, "user_id": 6121852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640ccd3be23318551ece60d6178a80e2?s=128&d=identicon&r=PG&f=1", "display_name": "Berry Allen", "link": "https://stackoverflow.com/users/6121852/berry-allen"}, "edited": false, "score": 0, "creation_date": 1462375291, "post_id": 37031570, "comment_id": 61613828, "body": "Sorry, for that I get the error &quot;undefined method &#39;q1&#39; for nil:NilClass&quot;"}, {"owner": {"reputation": 3129, "user_id": 455826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/aPD2c.jpg?s=128&g=1", "display_name": "AmitA", "link": "https://stackoverflow.com/users/455826/amita"}, "reply_to_user": {"reputation": 21, "user_id": 6121852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640ccd3be23318551ece60d6178a80e2?s=128&d=identicon&r=PG&f=1", "display_name": "Berry Allen", "link": "https://stackoverflow.com/users/6121852/berry-allen"}, "edited": false, "score": 0, "creation_date": 1462375368, "post_id": 37031570, "comment_id": 61613874, "body": "This can only happen if you&#39;re doing something like <code>proposal.q1</code> and <code>proposal</code> is nil. Also (somewhat related) - can you show us how your <code>proposals</code> table look like? It should be in the file <code>db&#47;schema.rb</code>"}, {"owner": {"reputation": 3129, "user_id": 455826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/aPD2c.jpg?s=128&g=1", "display_name": "AmitA", "link": "https://stackoverflow.com/users/455826/amita"}, "reply_to_user": {"reputation": 21, "user_id": 6121852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640ccd3be23318551ece60d6178a80e2?s=128&d=identicon&r=PG&f=1", "display_name": "Berry Allen", "link": "https://stackoverflow.com/users/6121852/berry-allen"}, "edited": false, "score": 0, "creation_date": 1462376882, "post_id": 37031570, "comment_id": 61614976, "body": "Berry, your proposals table looks good. Please double check your code to make sure it is exactly as I wrote it (no <code>@</code> or plural form instead of singular form)"}, {"owner": {"reputation": 21, "user_id": 6121852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640ccd3be23318551ece60d6178a80e2?s=128&d=identicon&r=PG&f=1", "display_name": "Berry Allen", "link": "https://stackoverflow.com/users/6121852/berry-allen"}, "edited": false, "score": 0, "creation_date": 1462377272, "post_id": 37031570, "comment_id": 61615297, "body": "Everything is the same, it still does not display the &#39;q1&#39; through &#39;q30&#39; attributes"}, {"owner": {"reputation": 3129, "user_id": 455826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/aPD2c.jpg?s=128&g=1", "display_name": "AmitA", "link": "https://stackoverflow.com/users/455826/amita"}, "reply_to_user": {"reputation": 21, "user_id": 6121852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640ccd3be23318551ece60d6178a80e2?s=128&d=identicon&r=PG&f=1", "display_name": "Berry Allen", "link": "https://stackoverflow.com/users/6121852/berry-allen"}, "edited": false, "score": 0, "creation_date": 1462377407, "post_id": 37031570, "comment_id": 61615396, "body": "OK, but you don&#39;t have an error anymore. That&#39;s progress! Can you make sure the <code>@country</code> you setup in the controller has <code>proposals</code> records and that some of them indeed have <code>qxxx</code> fields filled correctly and not empty? Easiest is from console do ` x = Country.find(&lt;some_id&gt;).proposals` and take a peek at the results. Like <code>x.first.q1</code>."}, {"owner": {"reputation": 3129, "user_id": 455826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/aPD2c.jpg?s=128&g=1", "display_name": "AmitA", "link": "https://stackoverflow.com/users/455826/amita"}, "reply_to_user": {"reputation": 21, "user_id": 6121852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640ccd3be23318551ece60d6178a80e2?s=128&d=identicon&r=PG&f=1", "display_name": "Berry Allen", "link": "https://stackoverflow.com/users/6121852/berry-allen"}, "edited": false, "score": 0, "creation_date": 1462378695, "post_id": 37031570, "comment_id": 61616200, "body": "Ok great! Glad it was helpful."}], "tags": [], "owner": {"reputation": 3129, "user_id": 455826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/aPD2c.jpg?s=128&g=1", "display_name": "AmitA", "link": "https://stackoverflow.com/users/455826/amita"}, "is_accepted": false, "score": 1, "last_activity_date": 1462374956, "last_edit_date": 1462374956, "creation_date": 1462374309, "answer_id": 37031570, "question_id": 37031147, "link": "https://stackoverflow.com/questions/37031147/ruby-on-rails-displaying-multiple-attributes-from-multiple-model-instances/37031570#37031570", "title": "Ruby on Rails, displaying multiple attributes from multiple model instances", "body": "<p>You forgot an equal sign. You should do:</p>\n\n<pre><code>&lt;p&gt;&lt;%= @proposals_q2 %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>Instead of:</p>\n\n<pre><code>&lt;p&gt;&lt;% @proposals_q2 %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>In addition you should remove the equal sign from your loop.</p>\n\n<pre><code>&lt;% @country.proposals.each do |proposals| %&gt;\n</code></pre>\n\n<p>Instead of:</p>\n\n<pre><code>&lt;%= @country.proposals.each do |proposals| %&gt;\n</code></pre>\n\n<p>In ERB, <code>&lt;%= expression %&gt;</code> is used to inject the evaluated expression into the DOM. <code>&lt;% expression %&gt;</code> is used to evaluate the expression and not do anything with it. You <strong>don't</strong> want the result of <code>@country.proposals.each {...}</code> to be evaluated on the first line and injected into the DOM, so you want it <strong>without</strong> the equal sign, while you <strong>do</strong> want each of the instance variables to be injected into the DOM, so you want them <strong>with</strong> the equal sign.</p>\n\n<p>By the way, I assume that <code>@proposals_q1</code>, <code>@proposals_q2</code>, etc. are initialized in the controller action. If instead you have <code>q1</code>, <code>q2</code>, etc. as attributes on the <code>Proposal</code> model, then instead of using <code>@proposals_q1</code> you should do something like:</p>\n\n<pre><code>&lt;div class=\"relative\"&gt; \n   &lt;% @country.proposals.each do |proposal| %&gt; \n     &lt;h2&gt;Food and Medicine:&lt;/h2&gt;&lt;br&gt;\n         &lt;div class=\"relative2\"&gt;\n           &lt;p&gt;List of prohibited drugs:&lt;/p&gt;\n           &lt;p&gt;&lt;%= proposal.q1 %&gt;&lt;/p&gt;\n         &lt;/div&gt;\n     &lt;h2&gt;Liquids and Gels:&lt;/h2&gt;&lt;br&gt;\n         &lt;div class=\"relative2\"&gt;\n           &lt;p&gt;List of prohibited liquids/gels:&lt;/p&gt;\n           &lt;p&gt;&lt;%= proposal.q2 %&gt;&lt;/p&gt;\n           ...\n      ...\n   &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "is_accepted": false, "score": -1, "last_activity_date": 1462374331, "creation_date": 1462374331, "answer_id": 37031577, "question_id": 37031147, "link": "https://stackoverflow.com/questions/37031147/ruby-on-rails-displaying-multiple-attributes-from-multiple-model-instances/37031577#37031577", "title": "Ruby on Rails, displaying multiple attributes from multiple model instances", "body": "<p>change this '<p>&lt;% @proposals_q1 %></p>\"  to this: \"<p>&lt;%= @proposals_q1 %></p>\"</p>\n"}, {"tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": false, "score": 0, "last_activity_date": 1462374346, "creation_date": 1462374346, "answer_id": 37031583, "question_id": 37031147, "link": "https://stackoverflow.com/questions/37031147/ruby-on-rails-displaying-multiple-attributes-from-multiple-model-instances/37031583#37031583", "title": "Ruby on Rails, displaying multiple attributes from multiple model instances", "body": "<p>You're using <code>&lt;%=</code> and <code>&lt;%</code> backwards. <code>&lt;%=</code> outputs stuff to the page. <code>&lt;%</code> runs Ruby code but doesn't output anything.</p>\n\n<p>As it stands, you are outputting the result of <code>&lt;%= @country.proposals.each</code>, and you are <em>not</em> outputting the <code>&lt;% @proposals_q1</code>. That means that, inside the loop, the line <code>&lt;% @proposals_q1 %&gt;</code> has absolutely no effect, but after the entire loop is done, <code>&lt;%= @country.proposals.each...</code> outputs <code>proposals</code>.</p>\n\n<p>You need to use <code>&lt;%= @proposals_q1 %&gt;</code> to output the contents of that variable, inside the markup being written inside your loop, and you need to use <code>&lt;% @country.proposals.each... %&gt;</code> because there is no useful output generated by that use of <code>&lt;%=</code>.</p>\n"}], "owner": {"reputation": 21, "user_id": 6121852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640ccd3be23318551ece60d6178a80e2?s=128&d=identicon&r=PG&f=1", "display_name": "Berry Allen", "link": "https://stackoverflow.com/users/6121852/berry-allen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1462377963, "creation_date": 1462373234, "last_edit_date": 1462377963, "question_id": 37031147, "link": "https://stackoverflow.com/questions/37031147/ruby-on-rails-displaying-multiple-attributes-from-multiple-model-instances", "title": "Ruby on Rails, displaying multiple attributes from multiple model instances", "body": "<p>In my Ruby on Rails project I have a Country model class and a Proposal model class.  Each Country has many Proposals and each Proposal belongs to a Country.  Each Proposal has 30 questions (attributes).  In my view page, I want to display each question for every proposal that a country has.  </p>\n\n<p>So far, I have:</p>\n\n<pre><code>&lt;div class=\"relative\"&gt; \n   &lt;% @country.proposals.each do |proposal| %&gt; \n     &lt;h2&gt;Food and Medicine:&lt;/h2&gt;&lt;br&gt;\n         &lt;div class=\"relative2\"&gt;\n           &lt;p&gt;List of prohibited drugs:&lt;/p&gt;\n           &lt;p&gt;&lt;% proposal.q1 %&gt;&lt;/p&gt;\n         &lt;/div&gt;\n     &lt;h2&gt;Liquids and Gels:&lt;/h2&gt;&lt;br&gt;\n         &lt;div class=\"relative2\"&gt;\n           &lt;p&gt;List of prohibited liquids/gels:&lt;/p&gt;\n           &lt;p&gt;&lt;% proposal.q2 %&gt;&lt;/p&gt;\n           ...\n      ...\n   &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The headings appear fine whenever the country has a proposal associated with it.  However, the proposal attributes do not appear where I have placed them (in between the headings).  I can confirm the attributes are not empty.</p>\n\n<p>Proposal table:</p>\n\n<pre><code>create_table \"proposals\", force: :cascade do |t|\n  t.string   \"status\",     default: \"Pending\"\n  t.text     \"q1\"\n  t.text     \"q2\"\n  ...\n  ...\n  t.text     \"q29\"\n  t.text     \"q30\"\n  t.datetime \"created_at\",                     null: false\n  t.datetime \"updated_at\",                     null: false\n  t.integer  \"country_id\"\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "model-view-controller", "observer-pattern"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462375619, "post_id": 37031059, "comment_id": 61614031, "body": "As far as I know there&#39;s no way for an Observer to communicate with a Controller much the same as how Models have no idea what context they were created in. If you need to communicate, an observer might not be the best way to do this."}, {"owner": {"reputation": 23, "user_id": 5710593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8b97790019ee60ca9180a20bb4e7ac?s=128&d=identicon&r=PG&f=1", "display_name": "rack koh", "link": "https://stackoverflow.com/users/5710593/rack-koh"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462428535, "post_id": 37031059, "comment_id": 61635780, "body": "can u suggest me any ways to solve this problem"}, {"owner": {"reputation": 23, "user_id": 5710593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8b97790019ee60ca9180a20bb4e7ac?s=128&d=identicon&r=PG&f=1", "display_name": "rack koh", "link": "https://stackoverflow.com/users/5710593/rack-koh"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462429004, "post_id": 37031059, "comment_id": 61635988, "body": "i have tried to create a module(http_request_to_another_api) in lib file from where the http request is been made and i have included module in both controller and observer but i am unable to access http_error variable (present in http_request_to_another_api) from controller while from observer http_error variable (present in http_request_to_another_api) is accessible"}], "owner": {"reputation": 23, "user_id": 5710593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8b97790019ee60ca9180a20bb4e7ac?s=128&d=identicon&r=PG&f=1", "display_name": "rack koh", "link": "https://stackoverflow.com/users/5710593/rack-koh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1462372965, "creation_date": 1462372965, "question_id": 37031059, "link": "https://stackoverflow.com/questions/37031059/pass-a-variable-from-observer-to-controller", "title": "pass a variable from observer to controller", "body": "<p>i have a controller (User controller), this is used to create update and delete a user from db. Within the UserObserver class after_save is been defined as a method in UserObserver after each save in db i have to call another application through http with user_details(in hash format) </p>\n\n<pre><code>class UserObserver &lt; ActiveRecord::Observer\n def after_save user_details\n  begin\n    http Net::HTTP.new(\"localhost\", \"8000\")\n    request = Net::HTTP::Post.new(\"/verification\")\n    request.add_field('Content-Type', 'application/json')\n    request.body = user_details.to_json   \n    response = http.request(request)\n    @http_error = false if response.code == 200\n  rescue Exception =&gt; error\n    @http_error = true\n  end\n end\nend\n</code></pre>\n\n<p>i need to access @http_error variable in user_controller to know status of http request been made so that furthur action can be taken according to it.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "edited": false, "score": 0, "creation_date": 1462370847, "post_id": 37029947, "comment_id": 61610333, "body": "Are you trying to figure out whether two files have the exact same contents, or something more complex?"}, {"owner": {"reputation": 21, "user_id": 5809287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94f5a5605edbcbf5206a9ff555769a3f?s=128&d=identicon&r=PG&f=1", "display_name": "redbull_221", "link": "https://stackoverflow.com/users/5809287/redbull-221"}, "reply_to_user": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "edited": false, "score": 0, "creation_date": 1462370915, "post_id": 37029947, "comment_id": 61610380, "body": "thats right trying to figure they have same content trying to read 100 lines at a time"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 4, "creation_date": 1462371221, "post_id": 37029947, "comment_id": 61610638, "body": "&gt;trying to figure they have same content ..... Why not calculate the md5 sum of each file, and compare those? If all you&#39;re interested in is &quot;are they the same&quot;."}, {"owner": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "edited": false, "score": 0, "creation_date": 1462373973, "post_id": 37029947, "comment_id": 61612855, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/6438651/process-two-files-at-the-same-time-in-ruby\" title=\"process two files at the same time in ruby\">stackoverflow.com/questions/6438651/&hellip;</a>."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462376096, "post_id": 37029947, "comment_id": 61614385, "body": "@tadman The probability of two hashes accidentally colliding is 1/2^128 which is 1 in 340,282,366,920,938,463,463,374,607,431,768,211,456. This is not something to worry about, unless you&#39;re making <i>trillions</i> of checks per <i>second</i>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462377459, "post_id": 37029947, "comment_id": 61615441, "body": "Possibly <a href=\"http://superuser.com/questions/174283/how-to-diff-large-files-on-linux\">relevant question</a> provides a number of options on Linux/POSIX systems."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1462371573, "post_id": 37030379, "comment_id": 61610951, "body": "Your first sentence is a bit misleading. You can&#39;t calculate a checksum without reading the files."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1462371671, "post_id": 37030379, "comment_id": 61611044, "body": "@Stefan But you don&#39;t have to read the entire file <i>into memory</i>. These files could be gigabytes in size."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1462372038, "post_id": 37030379, "comment_id": 61611350, "body": "It&#39;s worth noting that two files can differ but have same digest. The possibility is so remote, however, that it&#39;s not something to worry about."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1462372361, "post_id": 37030379, "comment_id": 61611613, "body": "@Matt I think it&#39;s better to read some data from the 2 files into memory, compare them and forget them, then read some more data ..."}, {"owner": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1462372860, "post_id": 37030379, "comment_id": 61612036, "body": "@Aetherus I agree, which is why I upvoted your answer. :D But I&#39;ll be editing this one to reflect that."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1462373233, "post_id": 37030379, "comment_id": 61612310, "body": "I don&#39;t see how calculating an MD5 hash can be faster than comparing the bytes."}, {"owner": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1462373379, "post_id": 37030379, "comment_id": 61612415, "body": "It&#39;s not. Go upvote @Aetherus&#39; answer, because it&#39;s better."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1462374915, "post_id": 37030379, "comment_id": 61613555, "body": "Regarding your update, this is the <i>wrong</i> way to go about using hashes for this purpose! When people were talking about &quot;not reading the entire file into memory&quot;, they were talking about streaming data into MD5 and producing a single hash for each file, not just chunking the file into 100 line groups and <i>individually</i> hashing those chunks. If you&#39;re just going to read chunks, hash and then compare hashes, there is <b>no value</b> to hashing at all. Just compare the chunks directly using <code>==</code>. It&#39;s <i>far</i> slower to hash each chunk and compare the hashes, for absolutely no gain."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1462375189, "post_id": 37030379, "comment_id": 61613754, "body": "Matt, it&#39;s not at all petty. The point is that opinions are of no value here. That&#39;s important. My choice of language was for emphases. I would have said the same if I were addressing anyone (other that Matz, perhaps). Does anyone care what I think? I hope not."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1462375599, "post_id": 37030379, "comment_id": 61614016, "body": "There is one situation where there&#39;s much to be said for this approach: when the two files are not at the same physical location. In that case.only the digest for one need be transmitted. Many moons ago, when data transmission was much slower and more expensive, I may have been the first to use this technique for remote computer backup. Digests for new and changed files were first transmitted to a central server. Then only those files not already in our &quot;library&quot; were physically transmitted to the server, to be added to the library. As most file were program files, this was a huge time-saver."}], "tags": [], "owner": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "is_accepted": false, "score": 1, "last_activity_date": 1462372084, "last_edit_date": 1462372084, "creation_date": 1462371277, "answer_id": 37030379, "question_id": 37029947, "link": "https://stackoverflow.com/questions/37029947/ruby-chunk-and-compare-two-large-files/37030379#37030379", "title": "Ruby chunk and compare two large files", "body": "<p>To determine if two files have the exact same content, without comparing the actual content of the same chunk of each file, you can use a checksum function that turns the data into a hash string in a deterministic way. And while you have to read the contents to checksum it, you can get checksums for each slice, and end up with an array of checksums for each file.</p>\n\n<p>You can then compare the collection of checksums. If the two files have the exact same content, the two collections will be equal.</p>\n\n<pre><code>require 'digest/md5'\n\nhashes1 = File.foreach('./path_to_file').each_slice(100).map do |slice|\n  Digest::MD5.hexdigest(slice)\nend\nhashes2 = File.read('./path_to_duplicate').each_slice(100).map do |slice|\n  Digest::MD5.hexdigest(slice)\nend\n\nhashes1.join == hashes2.join\n#=&gt; true, meaning the two files contain the same content\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "edited": false, "score": 0, "creation_date": 1462372641, "post_id": 37030751, "comment_id": 61611858, "body": "I was just about to ask how the loop exited. Thanks for that clarification, even if that clarification is &quot;It&#39;s a mystery!&quot;"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1462372840, "post_id": 37030751, "comment_id": 61612025, "body": "<code>next</code> raises <code>StopIteration</code> when reaching the end which breaks the loop."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1462372953, "post_id": 37030751, "comment_id": 61612100, "body": "@Stefan Thanks for clarification. I think I&#39;ll dig more deeply into <code>Enumerator</code> and <code>Proc</code>"}, {"owner": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "edited": false, "score": 0, "creation_date": 1462373860, "post_id": 37030751, "comment_id": 61612774, "body": "If I could upvote this a second time for explaining that mystery, I would. Nice work."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 1, "creation_date": 1462373997, "post_id": 37030751, "comment_id": 61612869, "body": "I suggest converting the potentially relative filespecs to absolute ones for the comparison, using <code>File.absolute_path</code>:    <code>return true if File.absolute_path(path1) == File.absolute_path(path2)</code>"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1462374239, "post_id": 37030751, "comment_id": 61613042, "body": "@KeithBennett Thanks for the suggestion. Updated."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1462376344, "post_id": 37030751, "comment_id": 61614562, "body": "Do you need <code>ensure</code>? I upvoted, even though I don&#39;t care what you think. :-)"}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 2, "last_activity_date": 1462406424, "last_edit_date": 1462406424, "creation_date": 1462372130, "answer_id": 37030751, "question_id": 37029947, "link": "https://stackoverflow.com/questions/37029947/ruby-chunk-and-compare-two-large-files/37030751#37030751", "title": "Ruby chunk and compare two large files", "body": "<p>Just compare those files line by line:</p>\n\n<pre><code>def same_file?(path1, path2)\n  file1 = File.open(path1)\n  file2 = File.open(path2)\n  return true if File.absolute_path(path1) == File.absolute_path(path2)\n  return false unless file1.size == file2.size\n  enum1 = file1.each\n  enum2 = file2.each\n\n  loop do\n    # It's a mystery that the loop really ends\n    # when any of the 2 files has nothing to read\n    return false unless enum1.next == enum2.next\n  end\n\n  return true\nensure\n  file1.close\n  file2.close\nend\n</code></pre>\n\n<hr>\n\n<p>I did my homework and found in the <a href=\"http://ruby-doc.org/core-2.3.1/Kernel.html#method-i-loop\" rel=\"nofollow\"><code>Kernel#loop</code></a> documentation: </p>\n\n<blockquote>\n  <p><code>StopIteration</code> raised in the block breaks the loop. In this case, loop returns the \"result\" value stored in the exception.</p>\n</blockquote>\n\n<p>And, in the <a href=\"http://ruby-doc.org/core-2.2.0/Enumerator.html#method-i-next\" rel=\"nofollow\"><code>Enumerator#next</code></a> documentation:</p>\n\n<blockquote>\n  <p>When the position reached at the end, <code>StopIteration</code> is raised.</p>\n</blockquote>\n\n<p>So the mystery is no longer a mystery for me.</p>\n"}, {"comments": [{"owner": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "edited": false, "score": 1, "creation_date": 1462373474, "post_id": 37030867, "comment_id": 61612481, "body": "This is, technically speaking, a good answer. But it comes with no framing or explanation of what the code is doing, for an asker who is new to trying to solve this kind of problem. I&#39;d recommend adding some framing and comments to explain."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462376125, "post_id": 37030867, "comment_id": 61614404, "body": "I think there&#39;s a small syntax error on the third line, but otherwise was roughly what I was thinking: Read in chunks at a time, compare. Make sure you don&#39;t exhaust either before finishing. A quick test at the start on file-size would avoid a lot of heavy lifting."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1462406127, "post_id": 37030867, "comment_id": 61629861, "body": "It&#39;s not necessary, or desirable to use &quot;UPD:&quot;, or any of the variants, to mark sections in questions or answers. Read <a href=\"http://meta.stackexchange.com/q/127639/153968\">meta.stackexchange.com/q/127639/153968</a>"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 3, "last_activity_date": 1462377926, "last_edit_date": 1462377926, "creation_date": 1462372441, "answer_id": 37030867, "question_id": 37029947, "link": "https://stackoverflow.com/questions/37029947/ruby-chunk-and-compare-two-large-files/37030867#37030867", "title": "Ruby chunk and compare two large files", "body": "<pre><code>CHUNK_SIZE = 256 # bytes\ndef same? path1, path2\n  return false unless [path1, path2].map { |f| File.size f }.reduce &amp;:==\n\n  f1, f2 = [path1, path2].map { |f| File.new f }\n\n  loop do\n    s1, s2 = [f1, f2].map { |f| f.read(CHUNK_SIZE) }\n    break false if s1 != s2\n    break true if s1.nil? || s1.length &lt; CHUNK_SIZE\n  end\nensure\n  [f1, f2].each &amp;:close\nend\n</code></pre>\n\n<p><em>UPD</em>: credits for fixed typo and file size comparison goes to @tadman.</p>\n"}, {"comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 3, "creation_date": 1462374777, "post_id": 37031383, "comment_id": 61613471, "body": "Or, <code>f1.each_line.zip(f2.each_line).all? { |a,b| a == b }</code>. It&#39;d be interesting to see whether <code>each_slice</code> is actually any faster, since I assume the file IO is internally buffered regardless."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1462376714, "post_id": 37031383, "comment_id": 61614843, "body": "You should either pass a block to <code>open</code> or close the files in an <code>ensure</code> block."}], "tags": [], "owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "is_accepted": false, "score": 3, "last_activity_date": 1462406495, "last_edit_date": 1495542705, "creation_date": 1462373795, "answer_id": 37031383, "question_id": 37029947, "link": "https://stackoverflow.com/questions/37029947/ruby-chunk-and-compare-two-large-files/37031383#37031383", "title": "Ruby chunk and compare two large files", "body": "<p>Just \"<a href=\"https://stackoverflow.com/questions/6438651/process-two-files-at-the-same-time-in-ruby\">Process two files at the same time in Ruby</a>\" and compare by chunks, like this:</p>\n\n<pre><code>f1 = File.open('file1.txt', 'r')\nf2 = File.open('file2.txt', 'r')\n\nf1.each_slice(10).zip(f2.each_slice(10)).each do |line1, line2|\n  return false unless line1 == line2\nend\nreturn true\n</code></pre>\n\n<p>Or, as suggested by @meagar (in this case line by line):</p>\n\n<pre><code>f1.each_line.zip(f2.each_line).all? { |a,b| a == b }\n</code></pre>\n\n<p>This will return <code>true</code> if files identical.</p>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 2, "last_activity_date": 1462437993, "last_edit_date": 1495540780, "creation_date": 1462380145, "answer_id": 37033538, "question_id": 37029947, "link": "https://stackoverflow.com/questions/37029947/ruby-chunk-and-compare-two-large-files/37033538#37033538", "title": "Ruby chunk and compare two large files", "body": "<p>Here's another one, the approach is similar to <a href=\"https://stackoverflow.com/a/37030867/477037\">mudasobwa's answer</a>:</p>\n\n<pre><code>def same?(file_1, file_2)\n  return true if File.identical?(file_1, file_2)\n  return false unless File.size(file_1) == File.size(file_2)\n\n  buf_size = 2 ** 15 # 32 K\n  buf_1 = ''\n  buf_2 = ''\n\n  File.open(file_1) do |f1|\n    File.open(file_2) do |f2|\n      while f1.read(buf_size, buf_1) &amp;&amp; f2.read(buf_size, buf_2)\n        return false unless buf_1 == buf_2\n      end\n    end\n  end\n  true\nend\n</code></pre>\n\n<p>In the first two lines perform quick checks for identical files (e.g. hard and soft links) and same size using <a href=\"http://ruby-doc.org/core-2.3.1/File.html#method-c-identical-3F\" rel=\"nofollow noreferrer\"><code>File.identical?</code></a> and <a href=\"http://ruby-doc.org/core-2.3.1/File.html#method-c-size\" rel=\"nofollow noreferrer\"><code>File.size</code></a>.</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.3.1/File.html#method-c-open\" rel=\"nofollow noreferrer\"><code>File.open</code></a> opens each file in read-only mode. The <code>while</code> loop then keeps calling <a href=\"http://ruby-doc.org/core-2.3.1/IO.html#method-i-read\" rel=\"nofollow noreferrer\"><code>read</code></a> to read 32K chunks from each file into the buffers <code>buf_1</code> and <code>buf_2</code> until EOF. If the buffers differ, <code>false</code> is returned. Otherwise, i.e. without encountering any differences, <code>true</code> is returned.</p>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1462442041, "last_edit_date": 1462442041, "creation_date": 1462441085, "answer_id": 37047219, "question_id": 37029947, "link": "https://stackoverflow.com/questions/37029947/ruby-chunk-and-compare-two-large-files/37047219#37047219", "title": "Ruby chunk and compare two large files", "body": "<h1>Benchmark time</h1>\n\n<p>(Matt's answer is not included because I couldn't get it working)</p>\n\n<h3>Results 1 KB file size (N = 10000)</h3>\n\n<pre><code>                          user     system      total        real\naetherus              0.510000   0.300000   0.810000 (  0.823201)\nmeagar                0.350000   0.160000   0.510000 (  0.512755)\nmudasobwa             0.290000   0.200000   0.490000 (  0.500831)\nstefan                0.150000   0.160000   0.310000 (  0.312743)\nyevgeniy_anfilofyev   0.320000   0.170000   0.490000 (  0.497157)\n</code></pre>\n\n<h3>Results 1 MB file size (N = 100)</h3>\n\n<pre><code>                          user     system      total        real\naetherus              1.540000   0.110000   1.650000 (  1.667937)\nmeagar                1.170000   0.130000   1.300000 (  1.310278)\nmudasobwa             1.470000   0.830000   2.300000 (  2.313481)\nstefan                0.010000   0.030000   0.040000 (  0.045577)\nyevgeniy_anfilofyev   0.570000   0.100000   0.670000 (  0.677226)\n</code></pre>\n\n<h3>Results 1 GB file size (N = 1)</h3>\n\n<pre><code>                          user     system      total        real\naetherus             15.570000   0.920000  16.490000 ( 16.525826)\nmeagar               24.170000   1.910000  26.080000 ( 26.190057)\nmudasobwa            16.260000   8.160000  24.420000 ( 24.471977)\nstefan                0.120000   0.330000   0.450000 (  0.443074)\nyevgeniy_anfilofyev  12.940000   1.310000  14.250000 ( 14.295736)\n</code></pre>\n\n<h3>Notes</h3>\n\n<ul>\n<li>mudasobwa's code runs significantly faster with larger <code>CHUNK_SIZE</code></li>\n<li>with identical chunk sizes, stefan's code seems to be ~2x faster than mudasobwa's code</li>\n<li>\"fastest\" chunk size is somewhere between 16 K and 512 K</li>\n<li>I couldn't use <a href=\"https://github.com/marcandre/fruity\" rel=\"nofollow\">fruity</a> because the 1 GB test would have taken too long</li>\n</ul>\n\n<h3>Code</h3>\n\n<pre><code>def aetherus_same?(f1, f2)\n  enum1 = f1.each\n  enum2 = f2.each\n  loop do\n    return false unless enum1.next == enum2.next\n  end\n  return true\nend\n\ndef meagar_same?(f1, f2)\n  f1.each_line.zip(f2.each_line).all? { |a,b| a == b }\nend\n\nCHUNK_SIZE = 256 # bytes\ndef mudasobwa_same?(f1, f2)\n  loop do\n    s1, s2 = [f1, f2].map { |f| f.read(CHUNK_SIZE) }\n    break false if s1 != s2\n    break true if s1.nil? || s1.length &lt; CHUNK_SIZE\n  end\nend\n\ndef stefan_same?(f1, f2)\n  buf_size = 2 ** 15 # 32 K\n  buf_1 = ''\n  buf_2 = ''\n  while f1.read(buf_size, buf_1) &amp;&amp; f2.read(buf_size, buf_2)\n    return false unless buf_1 == buf_2\n  end\n  true\nend\n\ndef yevgeniy_anfilofyev_same?(f1, f2)\n  f1.each_slice(10).zip(f2.each_slice(10)).each do |line1, line2|\n    return false unless line1 == line2\n  end\n  return true\nend\n\nFILE1 = ARGV[0]\nFILE2 = ARGV[1]\nN     = ARGV[2].to_i\n\ndef with_files\n  File.open(FILE1) { |f1| File.open(FILE2) { |f2| yield f1, f2 } }\nend\n\nrequire 'benchmark'\n\nBenchmark.bm(19) do |x|\n  x.report('aetherus')             { N.times { with_files { |f1, f2| aetherus_same?(f1, f2) } } }\n  x.report('meagar')               { N.times { with_files { |f1, f2| meagar_same?(f1, f2) } } }\n  x.report('mudasobwa')            { N.times { with_files { |f1, f2| mudasobwa_same?(f1, f2) } } }\n  x.report('stefan')               { N.times { with_files { |f1, f2| stefan_same?(f1, f2) } } }\n  x.report('yevgeniy_anfilofyev')  { N.times { with_files { |f1, f2| yevgeniy_anfilofyev_same?(f1, f2) } } }\nend\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5809287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94f5a5605edbcbf5206a9ff555769a3f?s=128&d=identicon&r=PG&f=1", "display_name": "redbull_221", "link": "https://stackoverflow.com/users/5809287/redbull-221"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "answer_count": 6, "score": 1, "last_activity_date": 1462442041, "creation_date": 1462370199, "last_edit_date": 1462371228, "question_id": 37029947, "link": "https://stackoverflow.com/questions/37029947/ruby-chunk-and-compare-two-large-files", "title": "Ruby chunk and compare two large files", "body": "<p>Looking for direction on how to chunk and compare two large text files using ruby. Any help is appreciated. Something like 100 lines at a time. </p>\n\n<p>tried:</p>\n\n<pre><code>file(file1).foreach.each_slice(100) do |lines|\n  pp lines\nend\n</code></pre>\n\n<p>getting confused how to include the second file to this loop.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6121852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640ccd3be23318551ece60d6178a80e2?s=128&d=identicon&r=PG&f=1", "display_name": "Berry Allen", "link": "https://stackoverflow.com/users/6121852/berry-allen"}, "edited": false, "score": 0, "creation_date": 1462371925, "post_id": 37029974, "comment_id": 61611258, "body": "when trying to display the questions, &quot;&lt;p&gt;&lt;% @proposal_q1 %&gt;&lt;/p&gt;&quot; doesn&#39;t display anything"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "reply_to_user": {"reputation": 21, "user_id": 6121852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640ccd3be23318551ece60d6178a80e2?s=128&d=identicon&r=PG&f=1", "display_name": "Berry Allen", "link": "https://stackoverflow.com/users/6121852/berry-allen"}, "edited": false, "score": 0, "creation_date": 1462371987, "post_id": 37029974, "comment_id": 61611309, "body": "@BerryAllen it is other question. Anyway, write full code."}], "tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": false, "score": 5, "last_activity_date": 1462370278, "creation_date": 1462370278, "answer_id": 37029974, "question_id": 37029930, "link": "https://stackoverflow.com/questions/37029930/ruby-on-rails-getting-attributes-from-multiple-model-instances/37029974#37029974", "title": "Ruby on Rails, getting attributes from multiple model instances", "body": "<p>According to yous associations, just replace <code>@country.proposal.each</code> with\n<code>@country.proposals.each</code>. <code>has_many</code> association define method with a name in plural form.</p>\n"}], "owner": {"reputation": 21, "user_id": 6121852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640ccd3be23318551ece60d6178a80e2?s=128&d=identicon&r=PG&f=1", "display_name": "Berry Allen", "link": "https://stackoverflow.com/users/6121852/berry-allen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1462370443, "creation_date": 1462370167, "last_edit_date": 1462370443, "question_id": 37029930, "link": "https://stackoverflow.com/questions/37029930/ruby-on-rails-getting-attributes-from-multiple-model-instances", "title": "Ruby on Rails, getting attributes from multiple model instances", "body": "<p>In my Ruby on Rails project, I have a Country model class and a Proposal model class.  A country has many proposals and a proposal belongs to a specific country.  Each proposal consists of 30 questions.  I want to display each question for every proposal for that specific country.</p>\n\n<p>My initial idea for syntax was:</p>\n\n<pre><code>&lt;% @country.proposal.each do |proposal| %&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>However, this resulted in an error message </p>\n\n<pre><code>undefined method `proposal' for #Country:0x007f67b51cf178\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby", "powershell", "encoding", "special-characters"], "comments": [{"owner": {"reputation": 39264, "user_id": 3905079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c54d4c111c4564b116ff1efca8c56788?s=128&d=identicon&r=PG", "display_name": "briantist", "link": "https://stackoverflow.com/users/3905079/briantist"}, "edited": false, "score": 0, "creation_date": 1462370594, "post_id": 37029914, "comment_id": 61610115, "body": "Can you explain how you&#39;re invoking these differently? Where does powershell fit in exactly?"}, {"owner": {"reputation": 47, "user_id": 6290195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b1e8839824dda85e70ee7fd1ce4e01?s=128&d=identicon&r=PG&f=1", "display_name": "Saian", "link": "https://stackoverflow.com/users/6290195/saian"}, "reply_to_user": {"reputation": 39264, "user_id": 3905079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c54d4c111c4564b116ff1efca8c56788?s=128&d=identicon&r=PG", "display_name": "briantist", "link": "https://stackoverflow.com/users/3905079/briantist"}, "edited": false, "score": 0, "creation_date": 1462370993, "post_id": 37029914, "comment_id": 61610445, "body": "I edited. Under Powershell output is powershell output."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1462371031, "post_id": 37029914, "comment_id": 61610481, "body": "FYI: In UTF-8, hex code of <code>&quot;\u0119&quot;</code> is <code>0x119</code>. <code>&quot;\\u{00A9}&quot;</code> is <code>&quot;&#169;&quot;</code>. Your powershell seems to be working in CP852 (hello, windows!)"}, {"owner": {"reputation": 1705, "user_id": 5815337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d037f3f7e31c5a10b55280a51393b6d?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/5815337/martin"}, "edited": false, "score": 1, "creation_date": 1462371139, "post_id": 37029914, "comment_id": 61610558, "body": "Check my answer on your (same) question here: <a href=\"http://stackoverflow.com/questions/37025963/powershellcmd-too-doesnt-recognize-special-characters-%c4%85-%c4%99-etc\" title=\"powershellcmd too doesnt recognize special characters %25c4%2585 %25c4%2599 etc\">stackoverflow.com/questions/37025963/&hellip;</a> Its all about encoding.."}, {"owner": {"reputation": 47, "user_id": 6290195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b1e8839824dda85e70ee7fd1ce4e01?s=128&d=identicon&r=PG&f=1", "display_name": "Saian", "link": "https://stackoverflow.com/users/6290195/saian"}, "edited": false, "score": 0, "creation_date": 1462371550, "post_id": 37029914, "comment_id": 61610924, "body": "Is there a way for two to work together?"}, {"owner": {"reputation": 22357, "user_id": 3439404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5YzGh.jpg?s=128&g=1", "display_name": "JosefZ", "link": "https://stackoverflow.com/users/3439404/josefz"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1462371812, "post_id": 37029914, "comment_id": 61611158, "body": "@mudasobwa  FYI: In <b>UTF-8</b>, hex code of &quot;<code>\u0119</code>&quot; (Unicode codepoint <code>U+0119</code> i.e. UTF-16 <code>\\u0119</code>) is byte sequence <code>0xC4</code> <code>0x99</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 22357, "user_id": 3439404, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5YzGh.jpg?s=128&g=1", "display_name": "JosefZ", "link": "https://stackoverflow.com/users/3439404/josefz"}, "edited": false, "score": 0, "creation_date": 1462373206, "post_id": 37029914, "comment_id": 61612288, "body": "@JosefZ yes, indeed, I meant codepoint writing \u201chex code.\u201d"}, {"owner": {"reputation": 47, "user_id": 6290195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b1e8839824dda85e70ee7fd1ce4e01?s=128&d=identicon&r=PG&f=1", "display_name": "Saian", "link": "https://stackoverflow.com/users/6290195/saian"}, "reply_to_user": {"reputation": 1705, "user_id": 5815337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d037f3f7e31c5a10b55280a51393b6d?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/5815337/martin"}, "edited": false, "score": 0, "creation_date": 1462373810, "post_id": 37029914, "comment_id": 61612737, "body": "@Martin while executing ruby script in powershell it ask you for input, and the input isn&#39;t in UTF8 so it gives an error. Is there a way to omit it?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1462377206, "post_id": 37029914, "comment_id": 61615230, "body": "If you&#39;re using UTF-8, don&#39;t forget to have <code># encoding: UTF-8</code> at the top of your Ruby script."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1462385497, "post_id": 37029914, "comment_id": 61620255, "body": "If you&#39;ve found a solution, post that as an answer and accept it. That helps other people with the same problem."}], "answers": [{"tags": [], "owner": {"reputation": 47, "user_id": 6290195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b1e8839824dda85e70ee7fd1ce4e01?s=128&d=identicon&r=PG&f=1", "display_name": "Saian", "link": "https://stackoverflow.com/users/6290195/saian"}, "is_accepted": true, "score": 0, "last_activity_date": 1462388991, "creation_date": 1462388991, "answer_id": 37036066, "question_id": 37029914, "link": "https://stackoverflow.com/questions/37029914/ruby-compatibility-error-encoding/37036066#37036066", "title": "Ruby compatibility error encoding", "body": "<p>If your input in prompt( either cmd or powershell) is causing problems due to incompatibility of using differents encodings just try to encode it via methods in script<code>.encode \"UTF-8\" #in case of Ruby language</code> If you dont know what methods do that just google <code>your_language_name encoding</code></p>\n"}], "owner": {"reputation": 47, "user_id": 6290195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b1e8839824dda85e70ee7fd1ce4e01?s=128&d=identicon&r=PG&f=1", "display_name": "Saian", "link": "https://stackoverflow.com/users/6290195/saian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 1, "accepted_answer_id": 37036066, "answer_count": 1, "score": 0, "last_activity_date": 1462388991, "creation_date": 1462370129, "last_edit_date": 1462385468, "question_id": 37029914, "link": "https://stackoverflow.com/questions/37029914/ruby-compatibility-error-encoding", "title": "Ruby compatibility error encoding", "body": "<p>I'm having a problem. Let's look: </p>\n\n<blockquote>\n  <p>C:\\temp> ruby script.rb                 </p>\n</blockquote>\n\n<pre><code>script.rb                 =&gt; Powershell output\n\nputs \"\u0119\"                  =&gt; \u0119 #irb \\xA9\nputs \"\\xA9\"               =&gt; \u25af\nputs \"\u0119\"==\"\\xA9\"          =&gt; false\ninput = $stdin.gets.chomp =&gt; input==\"\u0119\"\nputs \"e#{input}e\"         =&gt; e\u0119e\nputs \"\u0119\"==input           =&gt; false\nputs \"\u0119#{input}\"          =&gt; Encoding::Compatibility Error Utf8 &amp; CP852\n\nirb                       =&gt; #command line in ruby\nputs \"\u0119\"==\"\\xA9\"          =&gt; true\ninput = $stdin.gets.chomp =&gt; input==\"\u0119\"\nputs \"\u0119\"==input           =&gt; true  &amp;&amp; \"\\xA9\"==input =&gt; true\nputs \"\u0119#{input}\"          =&gt; \u0119\u0119\n</code></pre>\n\n<p>It looks like powershell's input uses other font for all special characters than ruby and notepad++(?). Can i change that so it will work when i type in prompt(when asked) and does not show an error?</p>\n\n<p>Edit: Sorry for misdirection. I added invoke and specified that file has extension \".rb\" not \".txt\"<br>\nEdit2: Ok, I've researched some more information and I've been trying do some encoding(UTF8) to a variable. Somethin' strange occured. </p>\n\n<pre><code>puts \"\u0119#{input.encoding}\"         =&gt; \u0119CP852\nputs \"\\xA9\"                       =&gt; UTF-8\n</code></pre>\n\n<p>Encoding to CP852 has revealed that encoding pass on bytes. I learned that value of \"\u0119\"=20+99=119, \"\u0105\" = 20 + 85, 20 = C4</p>\n\n<p>Ok. got it \".encoding\" - shows what encoding i use. And that resolve this problem. </p>\n\n<pre><code>puts \"\u0119#{input.encode \"UTF-8\"}\"         =&gt; \u0119\u0119\n</code></pre>\n\n<p>Thanks everyone for your input.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 847, "user_id": 1482694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e4742341658d0f90de0b770fc4f01f?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1482694/sam"}, "edited": false, "score": 0, "creation_date": 1462369994, "post_id": 37029498, "comment_id": 61609598, "body": "Which ruby version are you using?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462377781, "post_id": 37029498, "comment_id": 61615647, "body": "You will get different errors depending on the circumstances. I can think of a bunch of things that can go wrong here: No privilege to create port, port already in use, port held open by dead process or connection because <code>SO_REUSEADDR</code> wasn&#39;t set, out of file-handles, etc. You may have to really abuse this code to discover all of them."}, {"owner": {"reputation": 1, "user_id": 6290972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32acd739222d50104a4a1a0cb9d0bfbc?s=128&d=identicon&r=PG&f=1", "display_name": "mooli", "link": "https://stackoverflow.com/users/6290972/mooli"}, "edited": false, "score": 0, "creation_date": 1462692684, "post_id": 37029498, "comment_id": 61737744, "body": "ruby 2.1.1p76 (2014-02-24 revision 45161) [x86_64-linux]"}], "answers": [{"tags": [], "owner": {"reputation": 847, "user_id": 1482694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e4742341658d0f90de0b770fc4f01f?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1482694/sam"}, "is_accepted": false, "score": 0, "last_activity_date": 1462370779, "creation_date": 1462370779, "answer_id": 37030183, "question_id": 37029498, "link": "https://stackoverflow.com/questions/37029498/how-to-get-the-specific-error-when-tcpserver-open-fail-in-ruby/37030183#37030183", "title": "how to get the specific error when TCPServer.open fail in ruby", "body": "<p>The printed message is correct as \"no implicit conversion of nil into String\" is a type error. </p>\n\n<p>Though the reason behind this error being raised could be this bug: <a href=\"https://bugs.ruby-lang.org/issues/10203\" rel=\"nofollow\">https://bugs.ruby-lang.org/issues/10203</a></p>\n\n<p>As far as I can tell, in the first 2 attempts it would work without any errors opening the socket port, and binding it to the IPv4 / IPv6 address automatically. In the third attempt, it trips and expects an explicit IP to be provided as the first param (like <code>TCPServer.open(&lt;string_IP&gt;, &lt;int_port&gt;)</code>). This is probably where it fails for you as it doesn't find an IP string, and raises a TypeError. </p>\n\n<p>Though this error is essentially in ruby v2.1.x, so later / prior versions don't seem to have this problem (or at least I couldn't repro it locally except for this version)</p>\n"}], "owner": {"reputation": 1, "user_id": 6290972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32acd739222d50104a4a1a0cb9d0bfbc?s=128&d=identicon&r=PG&f=1", "display_name": "mooli", "link": "https://stackoverflow.com/users/6290972/mooli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462370900, "creation_date": 1462369024, "question_id": 37029498, "link": "https://stackoverflow.com/questions/37029498/how-to-get-the-specific-error-when-tcpserver-open-fail-in-ruby", "title": "how to get the specific error when TCPServer.open fail in ruby", "body": "<p>I try to use rescue, but the error that i get is unclear, \nand is same error in different cases (e.g in  illegal port and already used port.)  </p>\n\n<pre><code>require 'socket'\n\nbegin \n    server = TCPServer.open(33)\nrescue =&gt; ex\n    puts \"An error of type #{ex.class} happened, message is #{ex.message}\"\nend\n</code></pre>\n\n<p>and I get \n=> An error of type TypeError happened, message is no implicit conversion of nil into String</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise", "permission-denied"], "answers": [{"comments": [{"owner": {"reputation": 645, "user_id": 6285605, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d21129320196972e88809eefe996bdc2?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya Selvarajan", "link": "https://stackoverflow.com/users/6285605/suganya-selvarajan"}, "edited": false, "score": 0, "creation_date": 1462369196, "post_id": 37029381, "comment_id": 61608923, "body": "I tried that already sudo chown -R root /home/cbls-2/.rvm. But no help"}, {"owner": {"reputation": 75, "user_id": 6029329, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7b60bb6f81924ab25acdc285d3d2ba02?s=128&d=identicon&r=PG&f=1", "display_name": "KacperM", "link": "https://stackoverflow.com/users/6029329/kacperm"}, "reply_to_user": {"reputation": 645, "user_id": 6285605, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d21129320196972e88809eefe996bdc2?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya Selvarajan", "link": "https://stackoverflow.com/users/6285605/suganya-selvarajan"}, "edited": false, "score": 0, "creation_date": 1462369338, "post_id": 37029381, "comment_id": 61609030, "body": "For you i think that file cause a problem: /home/cbls-2/academics/assistant/config/routes.rb  so try to change chmod for routes.rb"}, {"owner": {"reputation": 645, "user_id": 6285605, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d21129320196972e88809eefe996bdc2?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya Selvarajan", "link": "https://stackoverflow.com/users/6285605/suganya-selvarajan"}, "edited": false, "score": 0, "creation_date": 1462371006, "post_id": 37029381, "comment_id": 61610464, "body": "Thanks...It worked for me. Please edit your answer with this. I will accept it as answer"}], "tags": [], "owner": {"reputation": 75, "user_id": 6029329, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7b60bb6f81924ab25acdc285d3d2ba02?s=128&d=identicon&r=PG&f=1", "display_name": "KacperM", "link": "https://stackoverflow.com/users/6029329/kacperm"}, "is_accepted": false, "score": 0, "last_activity_date": 1462442578, "last_edit_date": 1462442578, "creation_date": 1462368737, "answer_id": 37029381, "question_id": 37029297, "link": "https://stackoverflow.com/questions/37029297/devise-gem-permission-denied-rb-sysopen/37029381#37029381", "title": "&#39;devise&#39; gem - permission denied @rb_sysopen", "body": "<p>In your place i would try to change chmod for file that cause EACCESS error.\nIn your example it will be /home/cbls-2/academics/assistant/config/routes.rb</p>\n"}, {"comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1462368989, "post_id": 37029424, "comment_id": 61608766, "body": "how change right to the <code>&#47;tmp</code> dir should fix the permisson of   <code>&#47;home&#47;cbls-2&#47;academics&#47;assistant&#47;</code> ?"}, {"owner": {"reputation": 645, "user_id": 6285605, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d21129320196972e88809eefe996bdc2?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya Selvarajan", "link": "https://stackoverflow.com/users/6285605/suganya-selvarajan"}, "edited": false, "score": 0, "creation_date": 1462369018, "post_id": 37029424, "comment_id": 61608784, "body": "Throws the same error &#39;Permission denied @ rb_sysopen - /home/cbls-2/academics/assistant/config/routes.rb (Errno::EACCES) &#39;"}, {"owner": {"reputation": 217, "user_id": 5611635, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CiX8rJDcr9k/AAAAAAAAAAI/AAAAAAAAAOE/aHZ-nDcOXp8/photo.jpg?sz=128", "display_name": "Rehan Munir", "link": "https://stackoverflow.com/users/5611635/rehan-munir"}, "edited": false, "score": 0, "creation_date": 1462369318, "post_id": 37029424, "comment_id": 61609011, "body": "You needs ownership to write the re-write the pid for each server start. that&#39;s why need to change permission of /home/cbls-2/academics/assistant/tmp directory."}], "tags": [], "owner": {"reputation": 217, "user_id": 5611635, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CiX8rJDcr9k/AAAAAAAAAAI/AAAAAAAAAOE/aHZ-nDcOXp8/photo.jpg?sz=128", "display_name": "Rehan Munir", "link": "https://stackoverflow.com/users/5611635/rehan-munir"}, "is_accepted": false, "score": 0, "last_activity_date": 1462368859, "creation_date": 1462368859, "answer_id": 37029424, "question_id": 37029297, "link": "https://stackoverflow.com/questions/37029297/devise-gem-permission-denied-rb-sysopen/37029424#37029424", "title": "&#39;devise&#39; gem - permission denied @rb_sysopen", "body": "<p>Run this command in your project directory:</p>\n\n<pre><code>sudo chmod -R 1777 /tmp\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2315, "user_id": 5129663, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8P0ivhj4wM/AAAAAAAAAAI/AAAAAAAAAAo/7JsXqgRUH8w/photo.jpg?sz=128", "display_name": "Amol Udage", "link": "https://stackoverflow.com/users/5129663/amol-udage"}, "is_accepted": true, "score": 1, "last_activity_date": 1462447147, "creation_date": 1462447147, "answer_id": 37049261, "question_id": 37029297, "link": "https://stackoverflow.com/questions/37029297/devise-gem-permission-denied-rb-sysopen/37049261#37049261", "title": "&#39;devise&#39; gem - permission denied @rb_sysopen", "body": "<p>Hi Please change the permissions for the file <code>/home/cbls-2/academics/assistant/config/routes.rb</code> It will work.</p>\n"}], "owner": {"reputation": 645, "user_id": 6285605, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d21129320196972e88809eefe996bdc2?s=128&d=identicon&r=PG&f=1", "display_name": "Suganya Selvarajan", "link": "https://stackoverflow.com/users/6285605/suganya-selvarajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2269, "favorite_count": 0, "accepted_answer_id": 37049261, "answer_count": 3, "score": 1, "last_activity_date": 1462447147, "creation_date": 1462368593, "question_id": 37029297, "link": "https://stackoverflow.com/questions/37029297/devise-gem-permission-denied-rb-sysopen", "title": "&#39;devise&#39; gem - permission denied @rb_sysopen", "body": "<p>I have installed 'devise' gem.</p>\n\n<p>When I tried to run </p>\n\n<pre><code>rails g devise User\n</code></pre>\n\n<p>I get the following error. </p>\n\n<pre><code>/home/cbls-2/.rvm/gems/ruby-2.3.0/gems/thor-0.19.1/lib/thor/actions/inject_into_file.rb:101:in `initialize': Permission denied @ rb_sysopen - /home/cbls-2/academics/assistant/config/routes.rb (Errno::EACCES)\nfrom /home/cbls-2/.rvm/gems/ruby-2.3.0/gems/thor-0.19.1/lib/thor/actions/inject_into_file.rb:101:in `open'\nfrom /home/cbls-2/.rvm/gems/ruby-2.3.0/gems/thor-0.19.1/lib/thor/actions/inject_into_file.rb:101:in `replace!'\nfrom /home/cbls-2/.rvm/gems/ruby-2.3.0/gems/thor-0.19.1/lib/thor/actions/inject_into_file.rb:59:in `invoke!'\nfrom /home/cbls-2/.rvm/gems/ruby-2.3.0/gems/thor-0.19.1/lib/thor/actions.rb:94:in `action'\nfrom /home/cbls-2/.rvm/gems/ruby-2.3.0/gems/thor-0.19.1/lib/thor/actions/inject_into_file.rb:30:in `insert_into_file'\nfrom /home/cbls-2/.rvm/gems/ruby-2.3.0/gems/railties-4.2.6/lib/rails/generators/actions.rb:224:in `block in route'\nfrom /home/cbls-2/.rvm/gems/ruby-2.3.0/gems/thor-0.19.1/lib/thor/actions.rb:194:in `block in in_root'\nfrom /home/cbls-2/.rvm/gems/ruby-2.3.0/gems/thor-0.19.1/lib/thor/actions.rb:184:in `block in inside'\nfrom /home/cbls-2/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/fileutils.rb:128:in `chdir'\nfrom /home/cbls-2/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/fileutils.rb:128:in `cd'\nfrom /home/cbls-2/.rvm/gems/ruby-2.3.0/gems/thor-0.19.1/lib/thor/actions.rb:184:in `inside'\nfrom /home/cbls-2/.rvm/gems/ruby-2.3.0/gems/thor-0.19.1/lib/thor/actions.rb:194:in `in_root'\nfrom /home/cbls-2/.rvm/gems/ruby-2.3.0/gems/railties-4.2.6/lib/rails/generators/actions.rb:223:in `route'\nfrom /home/cbls-2/.rvm/gems/ruby-2.3.0/gems/devise-4.1.0/lib/generators/devise/devise_generator.rb:22:in `add_devise_routes'\n</code></pre>\n\n<p>I have Rails 4.2.6, Ruby 2.3.0</p>\n\n<p>This is my gemfile</p>\n\n<pre><code> gem 'rails', '4.2.6'\n gem 'mysql2'\n gem 'devise'\n gem 'sass-rails', '~&gt; 5.0'\n gem 'uglifier', '&gt;= 1.3.0'\n gem 'coffee-rails', '~&gt; 4.1.0'\n gem 'therubyracer', platforms: :ruby\n\ngem 'jquery-rails'\n\ngem 'turbolinks'\ngem 'jbuilder', '~&gt; 2.0'\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\n gem 'bcrypt', '~&gt; 3.1.7'\n gem 'unicorn'\n gem 'capistrano-rails', group: :development\n\ngroup :development, :test do\n      debugger console\n   gem 'byebug'\nend\n\ngroup :development do\n  gem 'web-console', '~&gt; 2.0'\n  gem 'spring'\nend\n</code></pre>\n\n<p>Could not run 'rails g activeadmin:resource User' also. It throws the same error. </p>\n"}, {"tags": ["javascript", "ruby-on-rails", "angularjs", "ruby", "ajax"], "comments": [{"owner": {"reputation": 3290, "user_id": 1214951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/313ce4fdeb46839023cc31357b72710b?s=128&d=identicon&r=PG", "display_name": "chad_", "link": "https://stackoverflow.com/users/1214951/chad"}, "edited": false, "score": 0, "creation_date": 1462368165, "post_id": 37028835, "comment_id": 61608106, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/7600347/rails-api-design-without-disabling-csrf-protection\">Rails API design without disabling CSRF protection</a>"}], "answers": [{"comments": [{"owner": {"reputation": 446, "user_id": 1134365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6af55f57c08a9fdaa2d70f57d2a7a9d5?s=128&d=identicon&r=PG", "display_name": "Patrick Narkinsky", "link": "https://stackoverflow.com/users/1134365/patrick-narkinsky"}, "edited": false, "score": 0, "creation_date": 1462368166, "post_id": 37029058, "comment_id": 61608112, "body": "Great answer, much better than mine."}, {"owner": {"reputation": 3290, "user_id": 1214951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/313ce4fdeb46839023cc31357b72710b?s=128&d=identicon&r=PG", "display_name": "chad_", "link": "https://stackoverflow.com/users/1214951/chad"}, "reply_to_user": {"reputation": 446, "user_id": 1134365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6af55f57c08a9fdaa2d70f57d2a7a9d5?s=128&d=identicon&r=PG", "display_name": "Patrick Narkinsky", "link": "https://stackoverflow.com/users/1134365/patrick-narkinsky"}, "edited": false, "score": 0, "creation_date": 1462368387, "post_id": 37029058, "comment_id": 61608300, "body": "Thanks!  No offense intended by my comment on your answer, I just cringe when I think of the potential issues w/ going without it."}, {"owner": {"reputation": 727, "user_id": 5670609, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1042677742461591/picture?type=large", "display_name": "Champer Wu", "link": "https://stackoverflow.com/users/5670609/champer-wu"}, "edited": false, "score": 0, "creation_date": 1462369663, "post_id": 37029058, "comment_id": 61609292, "body": "Thanks for answer. And now, I have new question, I success to sent data into database, but why I can&#39;t see the data update unless I refresh browser by myself ?"}, {"owner": {"reputation": 3290, "user_id": 1214951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/313ce4fdeb46839023cc31357b72710b?s=128&d=identicon&r=PG", "display_name": "chad_", "link": "https://stackoverflow.com/users/1214951/chad"}, "edited": false, "score": 1, "creation_date": 1462369797, "post_id": 37029058, "comment_id": 61609397, "body": "That&#39;s a whole other thing.  Basically you&#39;d ideally build an AngularJS service (<a href=\"https://docs.angularjs.org/api/ng/service\" rel=\"nofollow noreferrer\">docs.angularjs.org/api/ng/service</a>) to wrap your interactions with the Rails api you&#39;re building.  Then the service will take responses from Rails and update your Angular scope."}, {"owner": {"reputation": 3290, "user_id": 1214951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/313ce4fdeb46839023cc31357b72710b?s=128&d=identicon&r=PG", "display_name": "chad_", "link": "https://stackoverflow.com/users/1214951/chad"}, "edited": false, "score": 0, "creation_date": 1462369912, "post_id": 37029058, "comment_id": 61609510, "body": "Are you seeing the <code>data</code> in your console? Your page would have to have some variable bound that you put <code>data</code> into."}, {"owner": {"reputation": 727, "user_id": 5670609, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1042677742461591/picture?type=large", "display_name": "Champer Wu", "link": "https://stackoverflow.com/users/5670609/champer-wu"}, "edited": false, "score": 0, "creation_date": 1462370177, "post_id": 37029058, "comment_id": 61609773, "body": "Yes, the console of data is success, but <code>http.get</code> in other controller can&#39;t show my new data unless I refresh brower"}, {"owner": {"reputation": 3290, "user_id": 1214951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/313ce4fdeb46839023cc31357b72710b?s=128&d=identicon&r=PG", "display_name": "chad_", "link": "https://stackoverflow.com/users/1214951/chad"}, "reply_to_user": {"reputation": 727, "user_id": 5670609, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1042677742461591/picture?type=large", "display_name": "Champer Wu", "link": "https://stackoverflow.com/users/5670609/champer-wu"}, "edited": false, "score": 0, "creation_date": 1462370612, "post_id": 37029058, "comment_id": 61610134, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/111011/discussion-between-chad-and-champer-wu\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 3290, "user_id": 1214951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/313ce4fdeb46839023cc31357b72710b?s=128&d=identicon&r=PG", "display_name": "chad_", "link": "https://stackoverflow.com/users/1214951/chad"}, "is_accepted": true, "score": 2, "last_activity_date": 1462369107, "last_edit_date": 1462369107, "creation_date": 1462368037, "answer_id": 37029058, "question_id": 37028835, "link": "https://stackoverflow.com/questions/37028835/ruby-on-rails-application-with-angularjs-about-ajax/37029058#37029058", "title": "Ruby On Rails Application with angularJS about AJAX", "body": "<p>There is a great answer here: <a href=\"https://stackoverflow.com/questions/7600347/rails-api-design-without-disabling-csrf-protection\">Rails API design without disabling CSRF protection</a></p>\n\n<p>The gist of it is that you can put the CSRF token in a cookie called <code>XSRF-TOKEN</code> like so:</p>\n\n<pre><code># In my ApplicationController\nafter_filter :set_csrf_cookie\n\ndef set_csrf_cookie\n  if protect_against_forgery?\n    cookies['XSRF-TOKEN'] = form_authenticity_token\n  end\nend\n</code></pre>\n\n<p>You'll then have to overload the <code>verified_request?</code> method in your ApplicationController to load the token from where Angular will return it:</p>\n\n<pre><code>protected\n\ndef verified_request?\n  super || valid_authenticity_token?(session, request.headers['X-XSRF-TOKEN'])\nend\n</code></pre>\n\n<p>(read the link I included though.. there are caveats, but I think you want something like this anyway... basically your login actions shouldn't be protected against csrf, but other potentially destructive actions should. You could achieve this with <code>skip_before_filter</code>.)</p>\n\n<p>I hope that helps!</p>\n"}, {"comments": [{"owner": {"reputation": 3290, "user_id": 1214951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/313ce4fdeb46839023cc31357b72710b?s=128&d=identicon&r=PG", "display_name": "chad_", "link": "https://stackoverflow.com/users/1214951/chad"}, "edited": false, "score": 0, "creation_date": 1462368303, "post_id": 37029095, "comment_id": 61608230, "body": "While it is a &#39;quick fix&#39; in that it makes things happen and removes the current road block, I think csrf is worth a few minutes of up front work to avoid any trouble in the chance your site/app becomes popular enough to become a target."}, {"owner": {"reputation": 446, "user_id": 1134365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6af55f57c08a9fdaa2d70f57d2a7a9d5?s=128&d=identicon&r=PG", "display_name": "Patrick Narkinsky", "link": "https://stackoverflow.com/users/1134365/patrick-narkinsky"}, "reply_to_user": {"reputation": 3290, "user_id": 1214951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/313ce4fdeb46839023cc31357b72710b?s=128&d=identicon&r=PG", "display_name": "chad_", "link": "https://stackoverflow.com/users/1214951/chad"}, "edited": false, "score": 1, "creation_date": 1500499341, "post_id": 37029095, "comment_id": 77369655, "body": "Don&#39;t disagree.  CSRF is worth keeping around for production code."}], "tags": [], "owner": {"reputation": 446, "user_id": 1134365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6af55f57c08a9fdaa2d70f57d2a7a9d5?s=128&d=identicon&r=PG", "display_name": "Patrick Narkinsky", "link": "https://stackoverflow.com/users/1134365/patrick-narkinsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1462368129, "creation_date": 1462368129, "answer_id": 37029095, "question_id": 37028835, "link": "https://stackoverflow.com/questions/37028835/ruby-on-rails-application-with-angularjs-about-ajax/37029095#37029095", "title": "Ruby On Rails Application with angularJS about AJAX", "body": "<p>Your issue is a feature of rails designed to defeat so-called \"Cross Site Request Forgery\".  The Rails team has described this in some detail <a href=\"http://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf\" rel=\"nofollow\">on their website</a>, but basically it's a generated token that seeks to ensure that the form that generates a request to the web api is the form you provide. This often causes hassles with single page AJAX apps.</p>\n\n<p>The 'quick fix' would be to disable CSRF by adding something like this to your Controller.</p>\n\n<p><code>protect_from_forgery :except =&gt; :create</code></p>\n\n<p>Hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 1929, "user_id": 2599875, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8df321b0acd6bc227bafe0ff4bd0ac5d?s=128&d=identicon&r=PG", "display_name": "mariowise", "link": "https://stackoverflow.com/users/2599875/mariowise"}, "is_accepted": false, "score": 1, "last_activity_date": 1462634121, "creation_date": 1462634121, "answer_id": 37090182, "question_id": 37028835, "link": "https://stackoverflow.com/questions/37028835/ruby-on-rails-application-with-angularjs-about-ajax/37090182#37090182", "title": "Ruby On Rails Application with angularJS about AJAX", "body": "<p>I believe the quickest way of achieving this is with the helper method <code>form_authenticity_token</code>. </p>\n\n<pre><code>$http({\n  method: 'POST',\n  url: '&lt;%= some_path %&gt;',\n  params: { \n    authenticity_token: '&lt;%= form_authenticity_token %&gt;',\n    ... // Other params\n  }\n})\n</code></pre>\n\n<p>There is no need to disble CSRF which I don't recommend at all.</p>\n"}], "owner": {"reputation": 727, "user_id": 5670609, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1042677742461591/picture?type=large", "display_name": "Champer Wu", "link": "https://stackoverflow.com/users/5670609/champer-wu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "accepted_answer_id": 37029058, "answer_count": 3, "score": 0, "last_activity_date": 1462634121, "creation_date": 1462367490, "last_edit_date": 1462367810, "question_id": 37028835, "link": "https://stackoverflow.com/questions/37028835/ruby-on-rails-application-with-angularjs-about-ajax", "title": "Ruby On Rails Application with angularJS about AJAX", "body": "<p>I'm new to angularJS and Rails,and I tried to building a Rails application with AngularJS</p>\n\n<p>and now, I want to do a POST request to sent data insert database </p>\n\n<p>Activity Controller </p>\n\n<pre><code>def create\n        @activity = Activity.new(params[:activity])\n\n        respond_to do |format|\n            if @activity.save\n                format.html {redirect_to activities_url}\n                format.json { render activities_url, status: :created, location: @activity}\n            end\n        end\n\nend\n</code></pre>\n\n<p>Activity Coffee JS</p>\n\n<pre><code>app = module('activity', ['ngAnimate'])\napp.controller 'FormCtrl', ($scope, $http) -&gt;\n    config = {\n        header: {\n            'Content-Type': 'application/json'\n        }\n    }\n    @test = -&gt;\n        $http.post('/activities.json', {title: 'test1'}, config).success (data, status) -&gt;\n            console.log(data)\n            console.log(status)\nreturn\n</code></pre>\n\n<p>Console log</p>\n\n<pre><code>Started POST \"/activities.json\" for ::1 at 2016-05-04 21:06:10 +0800\nProcessing by ActivitiesController#create as JSON\n  Parameters: {\"title\"=&gt;\"test1\", \"activity\"=&gt;{\"title\"=&gt;\"test1\"}}\nCan't verify CSRF token authenticity\nCompleted 422 Unprocessable Entity in 2ms (ActiveRecord: 0.0ms)\n</code></pre>\n\n<p>I created a button of ng-click to trigger test function but I got information like console log, How can I do to fix it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "charts", "jbuilder"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1462367132, "post_id": 37028628, "comment_id": 61607274, "body": "Please show us what have you tried so far."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1462406636, "post_id": 37028628, "comment_id": 61629971, "body": "Welcome to SO. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;, including the links. We need to see your effort. Did you write code? If no, why not? If you did, tell us why it doesn&#39;t work, give us the minimum data to confirm the problem and your expected output. SO isn&#39;t a &quot;write code for me site&quot;, it&#39;s a &quot;help me fix my broken code&quot; site. <a href=\"http://meta.stackoverflow.com/q/261592/128421\">meta.stackoverflow.com/q/261592/128421</a> is applicable."}, {"owner": {"reputation": 195, "user_id": 442316, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d369616be7b74adb046219e44e95d61b?s=128&d=identicon&r=PG", "display_name": "hazardco", "link": "https://stackoverflow.com/users/442316/hazardco"}, "edited": false, "score": 0, "creation_date": 1462430198, "post_id": 37028628, "comment_id": 61636570, "body": "sorry but my english is not good and I can hardly explain the problem."}], "answers": [{"tags": [], "owner": {"reputation": 195, "user_id": 442316, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d369616be7b74adb046219e44e95d61b?s=128&d=identicon&r=PG", "display_name": "hazardco", "link": "https://stackoverflow.com/users/442316/hazardco"}, "is_accepted": false, "score": 1, "last_activity_date": 1462431572, "last_edit_date": 1462431572, "creation_date": 1462430365, "answer_id": 37044041, "question_id": 37028628, "link": "https://stackoverflow.com/questions/37028628/how-to-generate-json-data-for-chart-in-jbuilder-with-ruby-on-rails/37044041#37044041", "title": "How to generate JSON data for chart in Jbuilder with Ruby on Rails", "body": "<p>i found a solution:</p>\n\n<pre><code>`json.label \"Clicks\"\n json.color \"purple-300\"\n json.data @direccion.analiticas.map{|i| [\"#{i.id}\",i.total_clicks]}`\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>`{\"label\":\"Clicks\",\"color\":\"purple-300\",\"data\":[[\"1\",24],[\"2\",20],[\"3\",42],[\"4\",10],[\"5\",1],[\"6\",14]]}`\n</code></pre>\n\n<p>It\u00b4s a good star. To pass this result to a graph Flot need the result is between square brackets [\u00a0] and I can not find how to do this.</p>\n\n<p>The result should be:</p>\n\n<p><code>[{\"label\":\"Clicks\",\"color\":\"purple-300\",\"data\":[[\"1\",24],[\"2\",20],[\"3\",42],[\"4\",10],[\"5\",1],[\"6\",14]]}]</code></p>\n\n<p>Thanks!</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Final solution:</p>\n\n<pre><code> json.array!(@direccion) do |direccion|\n  json.label \"Clicks\"\n  json.color \"purple-300\"\n  json.data direccion.analiticas.map{|i| [\"#{i.id}\",i.total_clicks]}\nend\n</code></pre>\n\n<p>Thanks for all.</p>\n"}], "owner": {"reputation": 195, "user_id": 442316, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d369616be7b74adb046219e44e95d61b?s=128&d=identicon&r=PG", "display_name": "hazardco", "link": "https://stackoverflow.com/users/442316/hazardco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1462431572, "creation_date": 1462366902, "last_edit_date": 1462406676, "question_id": 37028628, "link": "https://stackoverflow.com/questions/37028628/how-to-generate-json-data-for-chart-in-jbuilder-with-ruby-on-rails", "title": "How to generate JSON data for chart in Jbuilder with Ruby on Rails", "body": "<p>I\u00b4m trying create a file for a FLOT chart with next data:</p>\n\n<pre><code>{\n        'label': 'Clicks',\n        'color': Colors.byName('purple-300'),\n        data: [\n        ['1', 40],\n        ['2', 50],\n        ['12', 135]]\n}\n</code></pre>\n\n<p>How can I create the data section array in jBuilder?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1462366476, "post_id": 37028251, "comment_id": 61606730, "body": "What about <code>&lt;ol&gt;&lt;%= colour %&gt;&lt;&#47;ol&gt;</code> (assuming this is HTML)?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1462377613, "post_id": 37028251, "comment_id": 61615538, "body": "<code>Red</code> is a constant. What does it equal?"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 13, "creation_date": 1462366532, "post_id": 37028303, "comment_id": 61606773, "body": "You can also use <code>.each.with_index(1)</code> to have a 1-based index."}], "tags": [], "owner": {"reputation": 2634, "user_id": 1210949, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vAL35.jpg?s=128&g=1", "display_name": "Albin", "link": "https://stackoverflow.com/users/1210949/albin"}, "is_accepted": true, "score": 5, "last_activity_date": 1462373946, "last_edit_date": 1462373946, "creation_date": 1462366052, "answer_id": 37028303, "question_id": 37028251, "link": "https://stackoverflow.com/questions/37028251/how-to-output-position-of-elements-in-an-array/37028303#37028303", "title": "How to output position of elements in an array", "body": "<p>You could use the method <a href=\"http://apidock.com/ruby/Enumerator/each_with_index\" rel=\"nofollow\"><code>each_with_index</code></a>.</p>\n\n<pre><code>&lt;% @colours.each_with_index do |colour, i| %&gt;\n &lt;%= \"#{i+1}: #{colour}\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 3403166, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1403d15f674970d29504de34a00a2c9c?s=128&d=identicon&r=PG&f=1", "display_name": "tonic", "link": "https://stackoverflow.com/users/3403166/tonic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 37028303, "answer_count": 1, "score": 1, "last_activity_date": 1462374022, "creation_date": 1462365895, "last_edit_date": 1462374022, "question_id": 37028251, "link": "https://stackoverflow.com/questions/37028251/how-to-output-position-of-elements-in-an-array", "title": "How to output position of elements in an array", "body": "<p>If I have an array:</p>\n\n<pre><code>[Red, Blue, Pick, Orange]\n</code></pre>\n\n<p>The array has been sorted and I'd to show what position they are inside the array:</p>\n\n<ol>\n<li>Red</li>\n<li>Blue</li>\n<li>Pink</li>\n<li>Orange</li>\n</ol>\n\n<p>I'd display the colours to the user like this but cannot work out how to display showing that red is number 1, blue is number 2 and 3 is pink in my sorted list.</p>\n\n<pre><code>&lt;% @colours.each do |colour| %&gt;\n &lt;%= colour %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1462374165, "post_id": 37027465, "comment_id": 61612981, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the links at the bottom, and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. We&#39;d like to see evidence of your effort, either showing us where you looked as you tried to find information how to solve this, along with an explanation why those pages didn&#39;t help, or code and supporting input and expected output data showing what you&#39;ve tried. Without that it looks like you haven&#39;t tried and want us to solve the problem for you."}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1462364620, "post_id": 37027667, "comment_id": 61605254, "body": "@AndreyDeineko thanks; I have just written the small <a href=\"https://github.com/am-kantox/iteraptor\" rel=\"nofollow noreferrer\">mixin for deep hash iteration</a>, that\u2019s probably why :)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 4, "last_activity_date": 1462364424, "creation_date": 1462364424, "answer_id": 37027667, "question_id": 37027465, "link": "https://stackoverflow.com/questions/37027465/how-to-remove-empty-string-in-hash/37027667#37027667", "title": "How to remove empty string in hash", "body": "<pre><code>hash = {\"name\"=&gt;\"XYZ\",\n        \"address\"=&gt;{\"street\"=&gt;{\"street_address\"=&gt;\"\",\"city\"=&gt;\"City name\"}},\n        \"form\"=&gt;{\"id\"=&gt;11,\"f_name\"=&gt;\"\"},\n        \"test\"=&gt;\"\"}\n\ndef remove_blanks hash\n  hash.map do |k, v|\n    v == '' ? nil : [k, v.is_a?(Hash) ? remove_blanks(v) : v]\n  end.compact.to_h\nend\n\nremove_blanks hash\n\n#\u21d2 {\n#  \"address\" =&gt; {\n#    \"street\" =&gt; {\n#      \"city\" =&gt; \"City name\"\n#    }\n#  },\n#     \"form\" =&gt; {\n#    \"id\" =&gt; 11\n#  },\n#     \"name\" =&gt; \"XYZ\"\n# }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1462365153, "post_id": 37027920, "comment_id": 61605648, "body": "Awesome, save for that there is no <code>blank?</code> method in ruby. Please correct it to make it work outside of rails and I will definitely upvote. <i>Sidenote</i>: I did not check, but I guess it will also remove empty hashes, what was not intentionally specified in the OP."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1462367757, "post_id": 37027920, "comment_id": 61607796, "body": "@mudasobwa : I have replace <code>blank?</code> method and updated my answer"}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 1, "last_activity_date": 1462367722, "last_edit_date": 1462367722, "creation_date": 1462365033, "answer_id": 37027920, "question_id": 37027465, "link": "https://stackoverflow.com/questions/37027465/how-to-remove-empty-string-in-hash/37027920#37027920", "title": "How to remove empty string in hash", "body": "<p>I tried with <code>Proc</code></p>\n\n<pre><code> &gt; hash = {\"name\"=&gt;\"XYZ\",\"address\"=&gt;{\"street\"=&gt;{\"street_address\"=&gt;\"\",\"city\"=&gt;\"City name\"}},\"form\"=&gt;{\"id\"=&gt;11,\"f_name\"=&gt;\"\"},\"test\"=&gt;\"\"}\n &gt; remove_blank = Proc.new { |k, v| v.delete_if(&amp;remove_blank) if v.is_a?(Hash); v == \"\" }\n &gt; hash.delete_if &amp;remove_blank\n #Output:\n\n# {\n#   \"name\"=&gt;\"XYZ\", \n#   \"address\"=&gt;\n#     {\n#       \"street\"=&gt;\n#         {\n#           \"city\"=&gt;\"City name\"\n#         }\n#     }, \n#   \"form\"=&gt;\n#     {\n#       \"id\"=&gt;11\n#     }\n# }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1462365540, "post_id": 37028055, "comment_id": 61605947, "body": "There is no such method <code>blank?</code> in the pure Ruby, only in the Rails."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1462367079, "post_id": 37028055, "comment_id": 61607235, "body": "@ArtemBiserov then please either correct the answer, or remove it. There is no tag <code>rails</code> specified in OP."}], "tags": [], "owner": {"reputation": 111, "user_id": 6108672, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-B04biSz76wE/AAAAAAAAAAI/AAAAAAAAACk/j7HUDiTdAog/photo.jpg?sz=128", "display_name": "Artem Biserov", "link": "https://stackoverflow.com/users/6108672/artem-biserov"}, "is_accepted": false, "score": 1, "last_activity_date": 1462370713, "last_edit_date": 1462370713, "creation_date": 1462365377, "answer_id": 37028055, "question_id": 37027465, "link": "https://stackoverflow.com/questions/37027465/how-to-remove-empty-string-in-hash/37028055#37028055", "title": "How to remove empty string in hash", "body": "<pre><code>require 'active_support/core_ext/object/blank'\n\ndef clean_hash(hash)\n  hash.each do |key, value|\n    if value.is_a?(Hash)\n      clean_hash(value)\n    else\n      hash.delete(key) if value.blank?\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 154, "user_id": 3636388, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/6466644a0ef8d77f6e2dfbb0ae0e8554?s=128&d=identicon&r=PG&f=1", "display_name": "user3636388", "link": "https://stackoverflow.com/users/3636388/user3636388"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 668, "favorite_count": 0, "answer_count": 3, "score": -6, "last_activity_date": 1462374240, "creation_date": 1462363948, "last_edit_date": 1462374240, "question_id": 37027465, "link": "https://stackoverflow.com/questions/37027465/how-to-remove-empty-string-in-hash", "title": "How to remove empty string in hash", "body": "<pre><code>{\"name\"=&gt;\"XYZ\",\"address\"=&gt;{\"street\"=&gt;{\"street_address\"=&gt;\"\",\"city\"=&gt;\"City name\"}},\"form\"=&gt;{\"id\"=&gt;11,\"f_name\"=&gt;\"\"},\"test\"=\"\"}\n</code></pre>\n\n<p>I'd like to get:</p>\n\n<pre><code>{\"name\"=&gt;\"XYZ\",\"address\"=&gt;{\"street\"=&gt;{\"city\"=&gt;\"City name\"}},\"form\"=&gt;{\"id\"=&gt;11}}\n</code></pre>\n\n<p>How do I remove the empty strings?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 5899018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b8ae6da87378dd8c26711188f8afe6e?s=128&d=identicon&r=PG&f=1", "display_name": "IliasP", "link": "https://stackoverflow.com/users/5899018/iliasp"}, "edited": false, "score": 0, "creation_date": 1462377199, "post_id": 37027607, "comment_id": 61615223, "body": "Thank you for explaining the rationale behind it."}], "tags": [], "owner": {"reputation": 821, "user_id": 1166593, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd1b53c45386ed7ac737bdd65b1f9fe2?s=128&d=identicon&r=PG", "display_name": "AlexN", "link": "https://stackoverflow.com/users/1166593/alexn"}, "is_accepted": false, "score": 2, "last_activity_date": 1462364301, "creation_date": 1462364301, "answer_id": 37027607, "question_id": 37027351, "link": "https://stackoverflow.com/questions/37027351/arithmetic-geometric-series/37027607#37027607", "title": "Arithmetic/Geometric series", "body": "<p>The difference between those two statements is that variable <code>s</code> is set for the first statement but not for the second. The first <code>if</code> statement has thus a side effect of setting <code>s</code> to <code>arr.length - 1</code></p>\n\n<pre><code>if s =  arr.length - 1  # s =&gt; arr.length - 1\nif s == arr.length - 1  # s =&gt; undefined\n</code></pre>\n\n<p>Because the <code>if</code> statement is inside a <code>while</code> loop which uses <code>s</code> in its expression the change of the statement changes the behavior of the programm.</p>\n"}, {"tags": [], "owner": {"reputation": 228, "user_id": 2835784, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gCyiM.jpg?s=128&g=1", "display_name": "Sergi Case", "link": "https://stackoverflow.com/users/2835784/sergi-case"}, "is_accepted": false, "score": 0, "last_activity_date": 1462364317, "creation_date": 1462364317, "answer_id": 37027616, "question_id": 37027351, "link": "https://stackoverflow.com/questions/37027351/arithmetic-geometric-series/37027616#37027616", "title": "Arithmetic/Geometric series", "body": "<p>If you put <code>==</code> the statement will try to check if they are equals , with just <code>=</code> the statement work properly because your are only setting  the value to a value , so this is always true.</p>\n\n<p>If it's different compare something to equals than just set a variable , that can be always true.</p>\n"}, {"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 3, "last_activity_date": 1462365346, "last_edit_date": 1462365346, "creation_date": 1462364384, "answer_id": 37027652, "question_id": 37027351, "link": "https://stackoverflow.com/questions/37027351/arithmetic-geometric-series/37027652#37027652", "title": "Arithmetic/Geometric series", "body": "<p>You're never changing the value of <code>s</code> which I think you want to do. You should do that at the point that you increment <code>k</code></p>\n\n<pre><code>k += 1\ns = k + 1\n</code></pre>\n\n<p>Also, at the point where you reinitialize <code>k</code> for the geometric test, you want to reset <code>s</code> as well...</p>\n\n<pre><code>k = 0\ns = k + 1\n</code></pre>\n\n<p>You could also get rid of the variable <code>s</code> completely and make it a method... add these three lines at the top of the code</p>\n\n<pre><code>def s(k)\n  k + 1\nend\n</code></pre>\n\n<p>And remove all the lines where you assign a value to <code>s</code> and use <code>s(k)</code>... <code>s(k)</code> will be a method that always returns the next higher value to <code>k</code></p>\n"}], "owner": {"reputation": 81, "user_id": 5899018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4b8ae6da87378dd8c26711188f8afe6e?s=128&d=identicon&r=PG&f=1", "display_name": "IliasP", "link": "https://stackoverflow.com/users/5899018/iliasp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 37027652, "answer_count": 3, "score": 0, "last_activity_date": 1462374530, "creation_date": 1462363658, "last_edit_date": 1462374530, "question_id": 37027351, "link": "https://stackoverflow.com/questions/37027351/arithmetic-geometric-series", "title": "Arithmetic/Geometric series", "body": "<p>The code below returns \"Arithmetic\", \"Geometric\" if the input array is an arithmetic and geometric series respectively and -1 if it is neither. </p>\n\n<p>Although the code works fine, when I change</p>\n\n<pre><code>if s = arr.length - 1\n</code></pre>\n\n<p>to </p>\n\n<pre><code>if s == arr.length - 1\n</code></pre>\n\n<p>in the <code>while</code> loop, the code is not working properly anymore. </p>\n\n<p>I do not understand why. Shouldn't <code>==</code> work instead of <code>=</code>?</p>\n\n<pre><code>def ArithGeo(arr)\n\n  # code goes here\n  len = arr.length\n  difference = arr[len-1] - arr[len-2]\n  ratio = arr[len-1]/arr[len-2]\n\n  k = 0 \n  s = k + 1\n\n\n  while (arr[s] - arr[k]) == difference &amp;&amp; s &lt; arr.length\n    if s = arr.length - 1\n      return \"Arithmetic\"\n    end\n    k += 1\n  end\n\n  k = 0 \n\n  while arr[s] / arr[k] == ratio &amp;&amp; s &lt; arr.length\n    if s = arr.length - 1\n      return \"Geometric\"\n    end\n    k += 1\n  end\n\n  return -1 \n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "command-line-interface", "aws-sdk"], "answers": [{"tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 3, "last_activity_date": 1462363630, "creation_date": 1462363630, "answer_id": 37027341, "question_id": 37026946, "link": "https://stackoverflow.com/questions/37026946/aws-ruby-sdk-v2-aws-error-command-not-found/37027341#37027341", "title": "AWS Ruby SDK V2: Aws error command not found", "body": "<p>The aws-sdk gem (that allows you to access aws services from inside your ruby programs) and the <a href=\"https://aws.amazon.com/cli/\" rel=\"nofollow\">aws cli</a> (which provides command line access to aws) are two completely separate pieces of software. Installing the gem doesn't install the cli for you</p>\n"}, {"comments": [{"owner": {"reputation": 2287, "user_id": 5557126, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/10207963011092502/picture?type=large", "display_name": "Nicholas Muir", "link": "https://stackoverflow.com/users/5557126/nicholas-muir"}, "edited": false, "score": 0, "creation_date": 1462364515, "post_id": 37027511, "comment_id": 61605188, "body": "Thanks @Sergi Case, that is a big help actually."}], "tags": [], "owner": {"reputation": 228, "user_id": 2835784, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gCyiM.jpg?s=128&g=1", "display_name": "Sergi Case", "link": "https://stackoverflow.com/users/2835784/sergi-case"}, "is_accepted": false, "score": 1, "last_activity_date": 1462364057, "creation_date": 1462364057, "answer_id": 37027511, "question_id": 37026946, "link": "https://stackoverflow.com/questions/37026946/aws-ruby-sdk-v2-aws-error-command-not-found/37027511#37027511", "title": "AWS Ruby SDK V2: Aws error command not found", "body": "<p>You can use <code>irb</code> it's pretty cool for check fast things with ruby.</p>\n\n<pre><code>% irb\n&gt;&gt; require 'aws-sdk'\n=&gt; true\n&gt;&gt; aws = Aws.new()\n</code></pre>\n\n<p>Just play with aws-sdk , you will need to create credentials and more for the aws resources.</p>\n"}], "owner": {"reputation": 2287, "user_id": 5557126, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/10207963011092502/picture?type=large", "display_name": "Nicholas Muir", "link": "https://stackoverflow.com/users/5557126/nicholas-muir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 37027341, "answer_count": 2, "score": 0, "last_activity_date": 1462364057, "creation_date": 1462362549, "question_id": 37026946, "link": "https://stackoverflow.com/questions/37026946/aws-ruby-sdk-v2-aws-error-command-not-found", "title": "AWS Ruby SDK V2: Aws error command not found", "body": "<p>I am using cloud9 with ruby on rails, I have just installed the AWS-SDK and was following the amazon documents to set it up (Listed below).</p>\n\n<p><a href=\"http://docs.aws.amazon.com/sdk-for-ruby/latest/DeveloperGuide/aws-ruby-sdk-getting-started.html#aws-ruby-sdk-credentials-client\" rel=\"nofollow\">http://docs.aws.amazon.com/sdk-for-ruby/latest/DeveloperGuide/aws-ruby-sdk-getting-started.html#aws-ruby-sdk-credentials-client</a></p>\n\n<p>But on the second step which is just to run Aws.config I am getting a Aws command not found error.</p>\n\n<p>I tried with capital letter ect but it is not recognizing AWS.</p>\n\n<p>I was thinking it may possibly be the directory I am in but there is nothing saying I should be in anything but the root directory for my applications. None of he other gems have this problem byt since I am using cloud9 I thought I would check. I have included the director for the gem  below if you think this may be the issue:</p>\n\n<pre><code>/usr/local/rvm/gems/ruby-2.3.0/gems/aws-sdk-2.3.1\n</code></pre>\n\n<p>This is the output from my console with the top line showing aws-sdk-core 2.3.1 is installed and the errors at the bottom when I try to enter aws into the console.</p>\n\n<pre><code>Using aws-sdk-core 2.3.1\n    Using rails-deprecated_sanitizer 1.0.3\n    Using globalid 0.3.6\n    Using activemodel 4.2.5\n    Using jbuilder 2.4.1\n    Using rails-html-sanitizer 1.0.3\n    Using aws-sdk-resources 2.3.1\n    Using rails-dom-testing 1.0.7\n    Using activejob 4.2.5\n    Using activerecord 4.2.5\n    Using aws-sdk 2.3.1\n    Using actionview 4.2.5\n    Using actionpack 4.2.5\n    Using actionmailer 4.2.5\n    Using railties 4.2.5\n    Using sprockets-rails 3.0.4\n    Installing aws-sdk-rails 1.0.1\n    Using coffee-rails 4.1.1\n    Using jquery-rails 4.1.1\n    Using rails 4.2.5\n    Using sass-rails 5.0.4\n    Using web-console 2.3.0\n    Using turbolinks 2.5.3\n    Bundle complete! 15 Gemfile dependencies, 65 gems now installed.\n    Use `bundle show [gemname]` to see where a bundled gem is installed.\n    discoveredfm:~/workspace $ aws\n    bash: aws: command not found\n    discoveredfm:~/workspace $ Aws\n    bash: Aws: command not found\n    discoveredfm:~/workspace $ AWS\n    bash: AWS: command not found\n    discoveredfm:~/workspace $ bundle show aws-sdk\n    /usr/local/rvm/gems/ruby-2.3.0/gems/aws-sdk-2.3.1\n    discoveredfm:~/workspace $ \n</code></pre>\n\n<p>Thanks for your help.</p>\n"}, {"tags": ["ruby", "module", "require"], "answers": [{"tags": [], "owner": {"reputation": 821, "user_id": 1166593, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd1b53c45386ed7ac737bdd65b1f9fe2?s=128&d=identicon&r=PG", "display_name": "AlexN", "link": "https://stackoverflow.com/users/1166593/alexn"}, "is_accepted": true, "score": 1, "last_activity_date": 1462364796, "creation_date": 1462364796, "answer_id": 37027826, "question_id": 37026721, "link": "https://stackoverflow.com/questions/37026721/get-the-rubys-required-module-pathor-the-gem-pathat-run-time/37027826#37027826", "title": "get the ruby&#39;s required module path(or the gem path)at run-time", "body": "<p>You can use reflection and use the <code>source_location</code> method.</p>\n\n<pre><code>Interface.public_methods().map{|m| Interface.public_method(m).source_location }.uniq\n</code></pre>\n"}], "owner": {"reputation": 1662, "user_id": 1804926, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6b774b839def195dc3940b67331b5793?s=128&d=identicon&r=PG", "display_name": "python", "link": "https://stackoverflow.com/users/1804926/python"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 37027826, "answer_count": 1, "score": 0, "last_activity_date": 1462364796, "creation_date": 1462361928, "last_edit_date": 1462362629, "question_id": 37026721, "link": "https://stackoverflow.com/questions/37026721/get-the-rubys-required-module-pathor-the-gem-pathat-run-time", "title": "get the ruby&#39;s required module path(or the gem path)at run-time", "body": "<p>Well, I googled this problem but I could not find one which could give it a clear explanation. \n  I want to know is there a general way for detecting the loaded module path at run time, which includes both ruby code and c extension code?\n  If the $LOAD_PATH variable contains a lot of \"Interface\" modules which are defined in a lot of places, after calling \"require 'Interface'\", how can I tell which module is ruby using? \n  for example, both</p>\n\n<pre><code>/web/blogplus/lib\n</code></pre>\n\n<p>and</p>\n\n<pre><code>/web/blogplus/vendor\n</code></pre>\n\n<p>has a gem named \"Interface\", after launching the rails, if a controller implements the class like</p>\n\n<pre><code>class MyCtrl &lt; Interface\nend\n</code></pre>\n\n<p>then how can I know which module is MyCtrl is using?</p>\n"}, {"tags": ["ruby", "mongodb"], "answers": [{"comments": [{"owner": {"reputation": 1007, "user_id": 5351714, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/ed8a93ea89809e3812bdfb926389ff96?s=128&d=identicon&r=PG&f=1", "display_name": "lolix", "link": "https://stackoverflow.com/users/5351714/lolix"}, "edited": false, "score": 0, "creation_date": 1462360844, "post_id": 37026288, "comment_id": 61602583, "body": "I can&#39;t. undefined method `where&#39; for #&lt;Mongo::Collection:0x007fb2f912a738&gt;"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1462360961, "post_id": 37026288, "comment_id": 61602667, "body": "<code>where</code> method available in the mongo <code>ORM</code>."}], "tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": true, "score": 2, "last_activity_date": 1462361133, "last_edit_date": 1462361133, "creation_date": 1462360673, "answer_id": 37026288, "question_id": 37026208, "link": "https://stackoverflow.com/questions/37026208/mongodb-query-with-array/37026288#37026288", "title": "mongodb query with array", "body": "<pre><code>coll.find('name' =&gt; { '$in' =&gt; names_array } } )\n</code></pre>\n"}], "owner": {"reputation": 1007, "user_id": 5351714, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/ed8a93ea89809e3812bdfb926389ff96?s=128&d=identicon&r=PG&f=1", "display_name": "lolix", "link": "https://stackoverflow.com/users/5351714/lolix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 37026288, "answer_count": 1, "score": 1, "last_activity_date": 1462361133, "creation_date": 1462360486, "question_id": 37026208, "link": "https://stackoverflow.com/questions/37026208/mongodb-query-with-array", "title": "mongodb query with array", "body": "<p>I have this collection:</p>\n\n<pre><code>{\"_id\"=&gt;BSON::ObjectId('5728cd81c08460ead'), \"age\"=&gt;4, \"name\"=&gt;\"Diogo\"}\n{\"_id\"=&gt;BSON::ObjectId('5728cd81c08460ead'), \"age\"=&gt;22, \"name\"=&gt;\"Tiago\"}\n{\"_id\"=&gt;BSON::ObjectId('5728cd81c08460ead'), \"age\"=&gt;15, \"name\"=&gt;\"Marie\"}\n{\"_id\"=&gt;BSON::ObjectId('5728cd81c08460ead'), \"age\"=&gt;2, \"name\"=&gt;\"JJ\"}\n{\"_id\"=&gt;BSON::ObjectId('5728cd81c08460ead'), \"age\"=&gt;44, \"name\"=&gt;\"John\"}\n</code></pre>\n\n<p>and this array of names:</p>\n\n<pre><code>names_array = [\"John\", \"Marie\", \"Tiago\"]\n</code></pre>\n\n<p>How can I use names_array to search for names in mongodb collection?</p>\n\n<p>I want this output:</p>\n\n<pre><code>{\"_id\"=&gt;BSON::ObjectId('5728cd81c08460ead'), \"age\"=&gt;4, \"name\"=&gt;\"Diogo\"}\n{\"_id\"=&gt;BSON::ObjectId('5728cd81c08460ead'), \"age\"=&gt;22, \"name\"=&gt;\"Tiago\"}\n{\"_id\"=&gt;BSON::ObjectId('5728cd81c08460ead'), \"age\"=&gt;15, \"name\"=&gt;\"Marie\"}\n</code></pre>\n\n<p>this query not work : </p>\n\n<pre><code>coll.find( { name: names_array } )\n</code></pre>\n"}, {"tags": ["ruby", "bitcoind", "popen3"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1462407307, "post_id": 37026024, "comment_id": 61630144, "body": "This <i>really</i> smells like a case of STDIN not being closed."}, {"owner": {"reputation": 355, "user_id": 4145123, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/442717345212a9a3023420a5c12ebe35?s=128&d=identicon&r=PG&f=1", "display_name": "Todoroki", "link": "https://stackoverflow.com/users/4145123/todoroki"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1463390849, "post_id": 37026024, "comment_id": 62029102, "body": "maybe you&#39;re right; If I do <code>Open3.popen(&quot;multichaind testchain -daemon&quot;)...</code>, with <code>stdin.close</code>, it doesn&#39;t hang up. Although, if I do <code>stdout.each_line { |line| puts line }</code> inside that block, it hangs. The original <code>multichaind testchain -daemon</code> quits automaticly and returns, but <code>stdout.each_line {}</code> does not. Why do you think this occurs? I think it is the same problem with <code>Open3.capture3</code>."}], "owner": {"reputation": 355, "user_id": 4145123, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/442717345212a9a3023420a5c12ebe35?s=128&d=identicon&r=PG&f=1", "display_name": "Todoroki", "link": "https://stackoverflow.com/users/4145123/todoroki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "closed_date": 1462406791, "answer_count": 0, "score": 1, "last_activity_date": 1463738223, "creation_date": 1462360000, "last_edit_date": 1463738223, "question_id": 37026024, "link": "https://stackoverflow.com/questions/37026024/open3-capture3-hangs-without-any-outputs", "closed_reason": "Duplicate", "title": "Open3.capture3 hangs without any outputs", "body": "<p>I have some codes like this in pry:</p>\n\n<pre><code>[1] pry(main)&gt; require 'open3'\n=&gt; true\n\n[2] pry(main)&gt; output, error, status = Open3.capture3(\"multichain-util create testchain\")\n=&gt; [\"MultiChain utilities build 1.0 alpha 20 protocol 10005\\n\\nBlockchain parameter\n    set was successfully generated.\\nYou can edit it \n    in /home/me/.multichain/testchain/params.dat before running multichaind for the first \n    time.\\n\\nTo generate blockchain please run \\\"multichaind testchain -daemon\\\".\\n\",\n    \"\",\n    #&lt;Process::Status: pid 13944 exit 0&gt;]\n</code></pre>\n\n<p>which uses <a href=\"http://www.multichain.com/\" rel=\"nofollow\">multichain</a> in command line.\nAlthough the above works good, the next part doesn't work:</p>\n\n<pre><code>[3] pry(main)&gt; output, error, status = Open3.capture3(\"multichaind testchain -daemon\")\n\n^CInterrupt: \nfrom /home/me/.rbenv/versions/2.3.0/lib/ruby/2.3.0/open3.rb:271:in `value'\n</code></pre>\n\n<p>I wait for ages but it never return anything until I interrupt it by ctrl-C.\n<code>multichaind -daemon</code> doesn't wait for any other inputs.</p>\n\n<p>I get the next output when I run multichaind from bash:</p>\n\n<pre><code>$ multichaind testchain -daemon\n\nMultiChain Core Daemon build 1.0 alpha 20 protocol 10005\n\nMultiChain server starting\nLooking for genesis block...\nGenesis block found\nNew users can connect to this node using\nmultichaind testchain@192.168.100.102:2681\n\nNode started\n</code></pre>\n\n<p>and quits.\nDoes anyone have any ideas of why capture3 hangs? Thanks,</p>\n\n<p>EDIT:\nthe Tin Man told me that this problem is about not closing STDIN, but I believe that <code>Open3.capture3</code> automatically closes STDIN. And after I done it in <code>Open3.popen3</code>, the problem was about the STDOUT. \nCan someone tell me more about this? thanks</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "edited": false, "score": 1, "creation_date": 1462359737, "post_id": 37025633, "comment_id": 61601777, "body": "If your textarea isn&#39;t within a form, it wont be submitted anywhere when you click another link on the page. The two things are completely separate from one another. You should use a form for voting, and allow them to optionally include a message when you submit the form to vote."}, {"owner": {"reputation": 52, "user_id": 6012946, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Cf2Ri.jpg?s=128&g=1", "display_name": "classequalsarthur", "link": "https://stackoverflow.com/users/6012946/classequalsarthur"}, "reply_to_user": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "edited": false, "score": 0, "creation_date": 1462361095, "post_id": 37025633, "comment_id": 61602765, "body": "So does that mean I need to put a form around the entire vote button and the text area? Or can I get away with just having a form around the textarea in a different location? I only ask as the design of it means that all the options are in a wrapper and there is a single textarea box in a different wrapper next to the options."}, {"owner": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "edited": false, "score": 0, "creation_date": 1462361260, "post_id": 37025633, "comment_id": 61602887, "body": "There are lots and lots of ways to implement this. You could wrap the entire lot in a form and check which button was clicked to submit it ... or use javascript to update a hidden field when typing into the message box so that each vote button can be a different form ... or change the vote buttons into a group of radio buttons styled as buttons and have a single submit button ... so many options. But whatever you do you must use a form if you want to submit data from the input field."}, {"owner": {"reputation": 52, "user_id": 6012946, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Cf2Ri.jpg?s=128&g=1", "display_name": "classequalsarthur", "link": "https://stackoverflow.com/users/6012946/classequalsarthur"}, "reply_to_user": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "edited": false, "score": 0, "creation_date": 1462364032, "post_id": 37025633, "comment_id": 61604819, "body": "Ah okay, thanks :-) the javascript idea sounds like something I can do fairly easily. I&#39;m not sure on how to add it to the <code>def upvote</code>, would I add something like <code>message: user_message</code> to the <code>Answer.create</code> and add <code>user_message</code> to the <code>text_area</code> in my view?"}], "owner": {"reputation": 52, "user_id": 6012946, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Cf2Ri.jpg?s=128&g=1", "display_name": "classequalsarthur", "link": "https://stackoverflow.com/users/6012946/classequalsarthur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1462359113, "creation_date": 1462359113, "question_id": 37025633, "link": "https://stackoverflow.com/questions/37025633/ruby-on-rails-optional-user-message-when-they-submit-their-vote-to-database", "title": "Ruby on Rails - Optional user message when they submit their vote to database", "body": "<p>My app allows users to see a list of questions and allows them to vote for an option (uniquely). I have a <code>users</code> table, a <code>questions</code> table, an <code>options</code> table and an <code>answers</code> table.</p>\n\n<p>I've created the migration to add the column <code>message</code> to the <code>answers</code> table and I can show the messages on the page, just need to actually send the message to the DB table - this is the button to allow the user to vote:</p>\n\n<pre><code>&lt;%= link_to 'Vote', question_option_upvote_path(@question, option), data: { confirm: 'Are you sure you want to vote for this option?' }, :class =&gt; 'voteNow', method: :post %&gt;\n</code></pre>\n\n<p>I'm struggling to hook up the textarea to be sent when the user clicks to vote, I'm using simply <code>&lt;%= text_area :message, autofocus: true %&gt;</code> to create my textarea on it's own. Do I need to setup a whole form for this or is there a simple way to pull the contents when the user votes? My options controller is:</p>\n\n<pre><code>class OptionsController &lt; ApplicationController\n\n    def create\n        @question = Question.find(params[:question_id])\n        @option = @question.options.create(option_param)\n        redirect_to question_path(@question)\n    end\n\n    def upvote\n        @question = Question.find(params[:question_id])\n        @option = Option.find(params[:option_id])\n        Answer.create(user_id: current_user.id, question_id: @question.id, option_id: @option.id)\n        redirect_to question_path(@question)\n    end\n\n    private\n\n    def option_param\n        params.require(:option).permit(:option_text)\n    end\nend\n</code></pre>\n\n<p>Let me know if I need to include anything else in this message!</p>\n"}, {"tags": ["ruby", "regex", "grep"], "comments": [{"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 1, "creation_date": 1462358877, "post_id": 37025475, "comment_id": 61601149, "body": "use <code>str.scan</code>.., <code>str.scan(&#47;p[A-Z]+&#47;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2861, "user_id": 8679627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zWBW2.jpg?s=128&g=1", "display_name": "DimiDak", "link": "https://stackoverflow.com/users/8679627/dimidak"}, "edited": false, "score": 0, "creation_date": 1614314260, "post_id": 37026183, "comment_id": 117353418, "body": "So, &quot;scan()&quot; is the equivalent of &quot;grep -Eo&quot; ?"}], "tags": [], "owner": {"reputation": 2059, "user_id": 985792, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/462183a7e1aa06a89cb656c024aa3b09?s=128&d=identicon&r=PG", "display_name": "Claudio Floreani", "link": "https://stackoverflow.com/users/985792/claudio-floreani"}, "is_accepted": true, "score": 1, "last_activity_date": 1462360419, "creation_date": 1462360419, "answer_id": 37026183, "question_id": 37025475, "link": "https://stackoverflow.com/questions/37025475/how-to-show-only-the-matching-portions-mimicing-the-o-only-matching-grep/37026183#37026183", "title": "How to show only the matching portions (mimicing the &quot;-o, --only-matching&quot; grep option) in Ruby?", "body": "<p>Taking advantage of @avinash-raj, I ended up with this:</p>\n\n<pre><code>puts File.open('test.css','r'){|f| f.read.scan(/p[A-Z]+/)}\n</code></pre>\n\n<p>It seems a good deal for file that doesn't take up too much memory space.</p>\n\n<p>Still open to other solutions.</p>\n"}, {"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 0, "last_activity_date": 1462360583, "creation_date": 1462360583, "answer_id": 37026248, "question_id": 37025475, "link": "https://stackoverflow.com/questions/37025475/how-to-show-only-the-matching-portions-mimicing-the-o-only-matching-grep/37026248#37026248", "title": "How to show only the matching portions (mimicing the &quot;-o, --only-matching&quot; grep option) in Ruby?", "body": "<p>Use <a href=\"http://ruby-doc.org/core/String.html#method-i-scan\" rel=\"nofollow\"><code>String#scan</code></a> to get an array of all matches:</p>\n\n<pre><code>File.foreach('test.css') do |line|\n  line.scan(/p[A-Z]+/).each do |match|\n    puts match\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2059, "user_id": 985792, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/462183a7e1aa06a89cb656c024aa3b09?s=128&d=identicon&r=PG", "display_name": "Claudio Floreani", "link": "https://stackoverflow.com/users/985792/claudio-floreani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 1, "accepted_answer_id": 37026183, "answer_count": 2, "score": 1, "last_activity_date": 1462360583, "creation_date": 1462358641, "question_id": 37025475, "link": "https://stackoverflow.com/questions/37025475/how-to-show-only-the-matching-portions-mimicing-the-o-only-matching-grep", "title": "How to show only the matching portions (mimicing the &quot;-o, --only-matching&quot; grep option) in Ruby?", "body": "<p>Unix <strong>grep</strong> has a simple <code>-o, --only-matching</code> option to show only the part of a matching line that matches PATTERN.</p>\n\n<p>What is the simplest way to mimic that behaviour in Ruby, either using the grep method or any other standard method (without exec or gems)?</p>\n\n<p>Example given:</p>\n\n<pre><code>File.open('test.css','r') do |file|\n  file.each_line do |line|\n    match=/p[A-Z]+/.match(line)\n    puts match.to_s unless match.nil?\n  end\nend\n</code></pre>\n\n<p>would mimic <code>grep -oE \"p[A-Z]+\" test.css</code>.\nI suppose there are better (cleaner and more concise) ways.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "exception-handling", "ruby-2.2"], "answers": [{"tags": [], "owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "is_accepted": false, "score": 1, "last_activity_date": 1462363848, "creation_date": 1462363848, "answer_id": 37027421, "question_id": 37025242, "link": "https://stackoverflow.com/questions/37025242/rails-rescue-from-scripterror/37027421#37027421", "title": "rails rescue_from ScriptError", "body": "<p>Unfortunately, I don't think it works that way.</p>\n\n<p>Rescuing from exceptions with <code>rescue_from</code> works <strong>only after creating a controller instance during request processing</strong> (see source code <a href=\"https://github.com/rails/rails/blob/master/actionpack/lib/action_controller/metal/rescue.rb#L30\" rel=\"nofollow\">here</a> and <a href=\"https://github.com/rails/rails/blob/master/actionpack/lib/action_controller/base.rb#L237\" rel=\"nofollow\">here</a>). Your <code>SyntaxError</code> is probably raised much earlier - during autoloading of the given controller and dependent classes / modules. So unless you were trying to rescue from a syntax error of code being loaded <em>during</em> a controller action execution, you are out of luck, I'm afraid.</p>\n\n<p><strong>Test:</strong> when you explicitly <code>load</code> a file with a syntax error in a controller action and the <code>rescue_from</code> will work as expected:</p>\n\n<pre><code>class MyController &lt; ApplicationController\n  rescue_from(::SyntaxError) { Rails.logger.error \"SYNTAX ERROR!\" }\n\n  def index\n    load \"#{Rails.root}/test.rb\"\n  end\nend\n</code></pre>\n\n<p>If you save a <code>test.rb</code> file in the rails root and add a deliberate syntax error in it, you will see the exception is handled correctly by <code>rescue_from</code> and the error message will be present in the log file.</p>\n\n<p>On the other hand, if you look at the full stack trace of your <code>SyntaxError</code>, you will probably see that it does not even reach the <code>ActionController</code> methods for request processing.</p>\n"}, {"comments": [{"owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "edited": false, "score": 0, "creation_date": 1462531395, "post_id": 37068749, "comment_id": 61685760, "body": "Wow, interesting. Does it work even in production environment? I thought Rails eager loads all files upon starting in production so at first thought I&#39;d expect this to work in development only. But am not sure."}], "tags": [], "owner": {"reputation": 2172, "user_id": 1125893, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Uttd4.png?s=128&g=1", "display_name": "swapab", "link": "https://stackoverflow.com/users/1125893/swapab"}, "is_accepted": false, "score": 0, "last_activity_date": 1462526606, "creation_date": 1462526606, "answer_id": 37068749, "question_id": 37025242, "link": "https://stackoverflow.com/questions/37025242/rails-rescue-from-scripterror/37068749#37068749", "title": "rails rescue_from ScriptError", "body": "<p>Thanks!</p>\n\n<p>I added a middleware to achieve this.</p>\n\n<pre><code>class RescueSyntaxError\n  def initialize(app)\n    @app = app\n  end\n\n  def call(env)\n    @app.call(env)\n  rescue SyntaxError =&gt; error\n\n    request = Rack::Request.new(env)\n    session = request.env['rack.session']\n    params = request.params\n\n    if session.try(:[], :user_object)\n      ##Do validation stuff\n      ...\n      [302, {'Location' =&gt; '/'}, []]\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2172, "user_id": 1125893, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Uttd4.png?s=128&g=1", "display_name": "swapab", "link": "https://stackoverflow.com/users/1125893/swapab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1462526606, "creation_date": 1462358057, "question_id": 37025242, "link": "https://stackoverflow.com/questions/37025242/rails-rescue-from-scripterror", "title": "rails rescue_from ScriptError", "body": "<p>According to the family tree of Exception. <code>SyntaxError</code> is child to <code>ScriptError</code></p>\n\n<p>I wish to handle Syntax and/or ScriptError in my rails application.</p>\n\n<pre><code>Exception\n    NoMemoryError\n    ScriptError\n        LoadError\n        NotImplementedError\n        SyntaxError\n    SignalException\n        Interrupt\n    StandardError\n        ArgumentError\n        IOError\n            EOFError\n        IndexError\n            StopIteration\n        LocalJumpError\n        NameError\n            NoMethodError\n        RangeError\n            FloatDomainError\n        RegexpError\n        RuntimeError\n        SecurityError\n        SystemCallError\n        SystemStackError\n        ThreadError\n        TypeError\n        ZeroDivisionError\n    SystemExit\n    fatal\n</code></pre>\n\n<hr>\n\n<p>I did:</p>\n\n<p><code>rescue_from ScriptError, :with =&gt; :notify_on_landing_page</code></p>\n\n<p>but didn't worked.</p>\n\n<p>Error raised on screen : \n<code>SyntaxError in Bc::Muse::User::ProfileController#show</code></p>\n\n<p>I have created an explicit syntax error, it should gracefully rescue it and do the things I want to.</p>\n"}, {"tags": ["ruby", "watir"], "answers": [{"tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 1, "last_activity_date": 1462367093, "creation_date": 1462367093, "answer_id": 37028697, "question_id": 37025145, "link": "https://stackoverflow.com/questions/37025145/unable-to-locate-element-in-ruby-simple-script-fail/37028697#37028697", "title": "unable to locate element in Ruby simple script fail", "body": "<p>The HTML for the View Details button is:</p>\n\n<pre><code>&lt;input class=\"rounded_button\" value=\"View Details\" type=\"submit\"&gt;\n</code></pre>\n\n<p>Notice that the <code>value</code> attribute is \"View Details\" not \"View details\". Watir's locators are case-sensitive, which is the element is not found. The <code>adopt_puppy_number</code> method should be:</p>\n\n<pre><code>def adopt_puppy_number(num)\n  @browser.button(:value =&gt; 'View Details', :index =&gt; num - 1).click\n  @browser.button(:value =&gt; 'Adopt Me!').click\nend\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 6244722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8a5dcd943b573d6ed15acb20075cc227?s=128&d=identicon&r=PG&f=1", "display_name": "pav", "link": "https://stackoverflow.com/users/6244722/pav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 37028697, "answer_count": 1, "score": -1, "last_activity_date": 1462378659, "creation_date": 1462357844, "last_edit_date": 1462378659, "question_id": 37025145, "link": "https://stackoverflow.com/questions/37025145/unable-to-locate-element-in-ruby-simple-script-fail", "title": "unable to locate element in Ruby simple script fail", "body": "<p>When I run the script:</p>\n\n<pre><code>require 'rubygems'\nrequire 'watir-webdriver'\n@browser = Watir::Browser.new :firefox\n\ndef adopt_puppy_number(num)\n  @browser.button(:value =&gt; 'View details', :index =&gt; num - 1).click\n  @browser.button(:value =&gt; 'Adopt Me!').click\nend\n\n@browser.goto 'http://puppies.herokuapp.com'\nadopt_puppy_number 1\n@browser.button(:value =&gt; 'Adopt Another Puppy').click\nadopt_puppy_number 2\n</code></pre>\n\n<p>I get the exception:</p>\n\n<pre><code>/var/lib/gems/1.9.1/gems/watir-webdriver-0.9.1/lib/watir-webdriver/elements/element.rb:536:in `assert_element_found': unable to locate element, using {:value=&gt;\"View details\", :index=&gt;0, :tag_name=&gt;\"button\"}  (Watir::Exception::UnknownObjectException)\n  from /var/lib/gems/1.9.1/gems/watir-webdriver-0.9.1/lib/watir-webdriver/elements/element.rb:508:in `assert_exists'\n  from /var/lib/gems/1.9.1/gems/watir-webdriver-0.9.1/lib/watir-webdriver/elements/element.rb:114:in `click'\n  from /home/giz/Downloads/RubymineProjects/learn_watir/thirdscript_dry.rb:6:in `adopt_puppy_number'\n  from /home/giz/Downloads/RubymineProjects/learn_watir/thirdscript_dry.rb:11:in `&lt;top (required)&gt;'\n  from -e:1:in `load'\n  from -e:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>Why? Maybe I should add a wait command, but where exactly and which one?</p>\n"}, {"tags": ["arrays", "ruby", "string", "gsub"], "comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1462357424, "post_id": 37024843, "comment_id": 61600072, "body": "please, write instances"}, {"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 0, "creation_date": 1462357495, "post_id": 37024843, "comment_id": 61600128, "body": "Provide an example input and your expected output."}, {"owner": {"reputation": 93, "user_id": 6219766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f290de450eabe77cbab43fde0a0e2357?s=128&d=identicon&r=PG&f=1", "display_name": "Oscady", "link": "https://stackoverflow.com/users/6219766/oscady"}, "edited": false, "score": 0, "creation_date": 1462357633, "post_id": 37024843, "comment_id": 61600224, "body": "Sorry about that, have added"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1462375266, "post_id": 37024843, "comment_id": 61613802, "body": "Welcome to Stack Overflow. We&#39;d like to see your effort toward solving the question, which the code you show doesn&#39;t do. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Without your actual attempt and an explanation of why it does do what you want it looks like you barely tried and gave up and want us to write it for you. <a href=\"http://meta.stackoverflow.com/q/261592/128421\">meta.stackoverflow.com/q/261592/128421</a> is applicable."}, {"owner": {"reputation": 93, "user_id": 6219766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f290de450eabe77cbab43fde0a0e2357?s=128&d=identicon&r=PG&f=1", "display_name": "Oscady", "link": "https://stackoverflow.com/users/6219766/oscady"}, "edited": false, "score": 0, "creation_date": 1462441569, "post_id": 37024843, "comment_id": 61642655, "body": "Apologies, I will read the &quot;how to ask&quot; and others that you&#39;ve recommended. It may look like I barely tried here but in my question I did ask that someone could point me in the direction of where I was going wrong with my code rather than give me the simplest way. I&#39;m grateful to those who helped me but I still don&#39;t understand why I couldn&#39;t sub each section after I had got to the problem above. Perhaps I need to find a different site that doesn&#39;t mock beginners who can&#39;t find the particular problems they&#39;re looking for online"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 6219766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f290de450eabe77cbab43fde0a0e2357?s=128&d=identicon&r=PG&f=1", "display_name": "Oscady", "link": "https://stackoverflow.com/users/6219766/oscady"}, "edited": false, "score": 0, "creation_date": 1462357902, "post_id": 37025088, "comment_id": 61600432, "body": "Thank you, that has done it. May I ask what the relevance of the e inside the || is if any?"}, {"owner": {"reputation": 10274, "user_id": 930207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oy7Q3.png?s=128&g=1", "display_name": "mcfinnigan", "link": "https://stackoverflow.com/users/930207/mcfinnigan"}, "edited": false, "score": 0, "creation_date": 1462357981, "post_id": 37025088, "comment_id": 61600488, "body": "e is a block parameter.  In this case it&#39;s not strictly necessary and could be replaced with <code>_</code>"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "reply_to_user": {"reputation": 10274, "user_id": 930207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oy7Q3.png?s=128&g=1", "display_name": "mcfinnigan", "link": "https://stackoverflow.com/users/930207/mcfinnigan"}, "edited": false, "score": 1, "creation_date": 1462358055, "post_id": 37025088, "comment_id": 61600534, "body": "@mcfinnigan, it can be omitted)"}, {"owner": {"reputation": 93, "user_id": 6219766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f290de450eabe77cbab43fde0a0e2357?s=128&d=identicon&r=PG&f=1", "display_name": "Oscady", "link": "https://stackoverflow.com/users/6219766/oscady"}, "edited": false, "score": 0, "creation_date": 1462358290, "post_id": 37025088, "comment_id": 61600725, "body": "Thanks, I&#39;ll play around with it a little to make sure I understand fully. I&#39;ve had a few problems trying to use blocks so it&#39;s usually not my first thought"}], "tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": false, "score": 1, "last_activity_date": 1462358018, "last_edit_date": 1462358018, "creation_date": 1462357700, "answer_id": 37025088, "question_id": 37024843, "link": "https://stackoverflow.com/questions/37024843/given-an-array-of-strings-varying-in-length-how-can-i-replace-every-string-with/37025088#37025088", "title": "Given an array of strings varying in length, how can I replace every string with the same word", "body": "<p>You can try this way:</p>\n\n<pre><code>\"This is a string\".split.map { \"plum\" }.join(\" \")\n=&gt; \"plum plum plum plum\"\n</code></pre>\n\n<p>Or by using <code>gsub</code>:</p>\n\n<pre><code>\"This is a string\".gsub(/[^\\s]+/, \"plum\")\n=&gt; \"plum plum plum plum\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1462357904, "creation_date": 1462357904, "answer_id": 37025169, "question_id": 37024843, "link": "https://stackoverflow.com/questions/37024843/given-an-array-of-strings-varying-in-length-how-can-i-replace-every-string-with/37025169#37025169", "title": "Given an array of strings varying in length, how can I replace every string with the same word", "body": "<p>You can just repeat \"plum\" as many times as you have words...</p>\n\n<pre><code>sentence = \"This is a string\"\n(\"plum \" * sentence.split.count).strip\n=&gt; \"plum plum plum plum\"\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 6219766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f290de450eabe77cbab43fde0a0e2357?s=128&d=identicon&r=PG&f=1", "display_name": "Oscady", "link": "https://stackoverflow.com/users/6219766/oscady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1462358018, "creation_date": 1462357105, "last_edit_date": 1462357615, "question_id": 37024843, "link": "https://stackoverflow.com/questions/37024843/given-an-array-of-strings-varying-in-length-how-can-i-replace-every-string-with", "title": "Given an array of strings varying in length, how can I replace every string with the same word", "body": "<p>I have to replace a number of strings with the same word, lets say that word is \"plum\".</p>\n\n<p>An example could be...\n\"This is a string\" and expected output would be \"plum plum plum plum\" or\n\"I'm happy\" output \"plum plum\"</p>\n\n<p>So far I have converted the string into an array, mapped and counted using...</p>\n\n<pre><code>string = sentence.split(&amp;:map).to_a\nn = string.count.to_i\n</code></pre>\n\n<p>I am now trying to replace each string in the array using <code>sentence.gsub[0..n]</code> which I expected to replace each position in the array with my word.</p>\n\n<p>I'm sure this is not the best way to do this, however I would really appreciate help on this particular method to help my understanding of where I've gone wrong in my thinking as well as finding out that I could have done it with far cleaner code</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-2.2"], "answers": [{"tags": [], "owner": {"reputation": 3251, "user_id": 861648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4deabcd4e46af59a4954674673143235?s=128&d=identicon&r=PG", "display_name": "Igor Kapkov", "link": "https://stackoverflow.com/users/861648/igor-kapkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1462355972, "creation_date": 1462355972, "answer_id": 37024407, "question_id": 37024324, "link": "https://stackoverflow.com/questions/37024324/replace-video-tags-from-html-string/37024407#37024407", "title": "Replace video tags from HTML string", "body": "<p>Parsing html with regex very hard task to do. I'll suggest to use <code>nokogiri</code> or similar gem to parse it to ast and replace nodes you need.</p>\n"}, {"comments": [{"owner": {"reputation": 3459, "user_id": 3185510, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nlb4D.jpg?s=128&g=1", "display_name": "webster", "link": "https://stackoverflow.com/users/3185510/webster"}, "edited": false, "score": 0, "creation_date": 1462361362, "post_id": 37024935, "comment_id": 61602973, "body": "Thanks for your help. But this is not what want. I want to remove   <code>controls=&quot;controls&quot; height=&quot;313&quot; id=&quot;video201643154436&quot; poster=&quot;&#47;uploads&#47;ckeditor&#47;pictures&#47;18&#47;content_56883622_18f24&zwnj;&#8203;2e114.jpg&quot; width=&quot;500&quot;&gt;&lt;source src=&quot;&#47;uploads&#47;ckeditor&#47;attachments&#47;23&#47;newtons_law.mp4&quot; type=&quot;video&#47;mp4&quot; &#47;&gt;Your browser doesn&amp;#39;t support video.&lt;br &#47;&gt; Please download the file: &lt;a href=&quot;&#47;uploads&#47;ckeditor&#47;attachments&#47;23&#47;newtons_law.mp4&quot;&gt;vide&zwnj;&#8203;o&#47;mp4&lt;&#47;a&gt;</code> also"}, {"owner": {"reputation": 9567, "user_id": 1900722, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nGsJr.jpg?s=128&g=1", "display_name": "anquegi", "link": "https://stackoverflow.com/users/1900722/anquegi"}, "reply_to_user": {"reputation": 3459, "user_id": 3185510, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nlb4D.jpg?s=128&g=1", "display_name": "webster", "link": "https://stackoverflow.com/users/3185510/webster"}, "edited": false, "score": 0, "creation_date": 1462362732, "post_id": 37024935, "comment_id": 61603925, "body": "I add the solution for the final doubt, finally I get the point @rahul"}], "tags": [], "owner": {"reputation": 9567, "user_id": 1900722, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nGsJr.jpg?s=128&g=1", "display_name": "anquegi", "link": "https://stackoverflow.com/users/1900722/anquegi"}, "is_accepted": true, "score": 1, "last_activity_date": 1462367224, "last_edit_date": 1462367224, "creation_date": 1462357351, "answer_id": 37024935, "question_id": 37024324, "link": "https://stackoverflow.com/questions/37024324/replace-video-tags-from-html-string/37024935#37024935", "title": "Replace video tags from HTML string", "body": "<p>I think that you need to substitute this two exact strings, and also the content inside this tags</p>\n\n<p>first the beginning and ending strings:</p>\n\n<pre><code>\"&lt;video \"\n\n\"&lt;/video&gt;\"\n\nputs html_text.gsub(\"&lt;video \",\"[[ video ]] \").gsub('&lt;/video&gt;',\"[[ video ]]\")\n</code></pre>\n\n<p>This should work</p>\n\n<pre><code>irb(main):020:0&gt; &lt;div&gt;\n[[ video ]]  controls=\"controls\" height=\"313\" id=\"video201643154436\" poster=\"/uploads/ckeditor/pictures/18/content_56883622_18f242e114.jpg\" width=\"500\"&gt;&lt;source src=\"/uploads/ckeditor/attachments/23/newtons_law.mp4\" type=\"video/mp4\" /&gt;Your browser doesn&amp;#39;t support video.&lt;br /&gt;\nPlease download the file: &lt;a href=\"/uploads/ckeditor/attachments/23/newtons_law.mp4\"&gt;video/mp4&lt;/a&gt;[[ video ]]\n&lt;/div&gt;\n\n&lt;div&gt;test description&lt;/div&gt;\n\n&lt;div&gt;\n&lt;div&gt;\n[[ video ]]  controls=\"controls\" height=\"300\" id=\"video201644152011\" poster=\"\" width=\"400\"&gt;&lt;source src=\"/uploads/ckeditor/attachments/24/test.mp4\" type=\"video/mp4\" /&gt;Your browser doesn&amp;#39;t support video.&lt;br /&gt;\nPlease download the file: &lt;a href=\"/uploads/ckeditor/attachments/24/test.mp4\"&gt;video/mp4&lt;/a&gt;[[ video ]]\n&lt;/div&gt;\n\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\n&lt;/div&gt;\n=&gt; true\n</code></pre>\n\n<p>or with regular expressions</p>\n\n<pre><code>puts html_text.gsub(/&lt;\\/?video[\\s&gt;]/, \"[[ video ]]\")\n\n&lt;div&gt;\n[[ video ]]controls=\"controls\" height=\"313\" id=\"video201643154436\" poster=\"/uploads/ckeditor/pictures/18/content_56883622_18f242e114.jpg\" width=\"500\"&gt;&lt;source src=\"/uploads/ckeditor/attachments/23/newtons_law.mp4\" type=\"video/mp4\" /&gt;Your browser doesn&amp;#39;t support video.&lt;br /&gt;\nPlease download the file: &lt;a href=\"/uploads/ckeditor/attachments/23/newtons_law.mp4\"&gt;video/mp4&lt;/a&gt;[[ video ]]\n&lt;/div&gt;\n\n&lt;div&gt;test description&lt;/div&gt;\n\n&lt;div&gt;\n&lt;div&gt;\n[[ video ]]controls=\"controls\" height=\"300\" id=\"video201644152011\" poster=\"\" width=\"400\"&gt;&lt;source src=\"/uploads/ckeditor/attachments/24/test.mp4\" type=\"video/mp4\" /&gt;Your browser doesn&amp;#39;t support video.&lt;br /&gt;\nPlease download the file: &lt;a href=\"/uploads/ckeditor/attachments/24/test.mp4\"&gt;video/mp4&lt;/a&gt;[[ video ]]\n&lt;/div&gt;\n\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Finally to remove all the inside this tag and all the content replace all. the problem is the \\n character use this modifiers:</p>\n\n<blockquote>\n<pre><code>/.*/m         multiline: . matches newline\n/.*/i         ignore case\n/.*/x         extended: ignore whitespace in pattern\n</code></pre>\n</blockquote>\n\n<p>so finally if we join alltogether the regular expression is: </p>\n\n<pre><code>puts html_text.gsub(/&lt;video\\s.*?&lt;\\/video&gt;/mix, \"[[ video ]]\")\n</code></pre>\n\n<p>result</p>\n\n<pre><code>irb(main):043:0&gt; &lt;div&gt;\n[[ video ]]\n&lt;/div&gt;\n\n&lt;div&gt;test description&lt;/div&gt;\n\n&lt;div&gt;\n&lt;div&gt;\n[[ video ]]\n&lt;/div&gt;\n\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\n&lt;/div&gt;\n=&gt; true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3459, "user_id": 3185510, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nlb4D.jpg?s=128&g=1", "display_name": "webster", "link": "https://stackoverflow.com/users/3185510/webster"}, "is_accepted": false, "score": 0, "last_activity_date": 1462365419, "creation_date": 1462365419, "answer_id": 37028074, "question_id": 37024324, "link": "https://stackoverflow.com/questions/37024324/replace-video-tags-from-html-string/37028074#37028074", "title": "Replace video tags from HTML string", "body": "<p>anquegi's solution works perfectly. In the meantime, I tried nokogiri:</p>\n\n<pre><code>str = \"&lt;div&gt;\\r\\n&lt;video controls=\\\"controls\\\" height=\\\"313\\\" id=\\\"video201643154436\\\" poster=\\\"/uploads/ckeditor/pictures/18/content_56883622_18f242e114.jpg\\\" width=\\\"500\\\"&gt;&lt;source src=\\\"/uploads/ckeditor/attachments/23/newtons_law.mp4\\\" type=\\\"video/mp4\\\" /&gt;Your browser doesn&amp;#39;t support video.&lt;br /&gt;\\r\\nPlease download the file: &lt;a href=\\\"/uploads/ckeditor/attachments/23/newtons_law.mp4\\\"&gt;video/mp4&lt;/a&gt;&lt;/video&gt;\\r\\n&lt;/div&gt;\\r\\n\\r\\n&lt;div&gt;test description&lt;/div&gt;\\r\\n\\r\\n&lt;div&gt;\\r\\n&lt;div&gt;\\r\\n&lt;video controls=\\\"controls\\\" height=\\\"300\\\" id=\\\"video201644152011\\\" poster=\\\"\\\" width=\\\"400\\\"&gt;&lt;source src=\\\"/uploads/ckeditor/attachments/24/test.mp4\\\" type=\\\"video/mp4\\\" /&gt;Your browser doesn&amp;#39;t support video.&lt;br /&gt;\\r\\nPlease download the file: &lt;a href=\\\"/uploads/ckeditor/attachments/24/test.mp4\\\"&gt;video/mp4&lt;/a&gt;&lt;/video&gt;\\r\\n&lt;/div&gt;\\r\\n\\r\\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\\r\\n&lt;/div&gt;\\r\\n\"\n\ndoc =  Nokogiri::HTML(str)\n\ndoc.css(\"video\").each do |video|\n  new_node = doc.create_element \"p\"\n  new_node.inner_html = \"[[ Video ]]\"\n  video.replace new_node\nend\n\nnew_str = doc.css(\"body\").to_s\n</code></pre>\n"}], "owner": {"reputation": 3459, "user_id": 3185510, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nlb4D.jpg?s=128&g=1", "display_name": "webster", "link": "https://stackoverflow.com/users/3185510/webster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 37024935, "answer_count": 3, "score": 1, "last_activity_date": 1462367224, "creation_date": 1462355767, "question_id": 37024324, "link": "https://stackoverflow.com/questions/37024324/replace-video-tags-from-html-string", "title": "Replace video tags from HTML string", "body": "<p>The HTML string is:</p>\n\n<pre><code>\"&lt;div&gt;\\r\\n&lt;video controls=\\\"controls\\\" height=\\\"313\\\" id=\\\"video201643154436\\\" poster=\\\"/uploads/ckeditor/pictures/18/content_56883622_18f242e114.jpg\\\" width=\\\"500\\\"&gt;&lt;source src=\\\"/uploads/ckeditor/attachments/23/newtons_law.mp4\\\" type=\\\"video/mp4\\\" /&gt;Your browser doesn&amp;#39;t support video.&lt;br /&gt;\\r\\nPlease download the file: &lt;a href=\\\"/uploads/ckeditor/attachments/23/newtons_law.mp4\\\"&gt;video/mp4&lt;/a&gt;&lt;/video&gt;\\r\\n&lt;/div&gt;\\r\\n\\r\\n&lt;div&gt;test description&lt;/div&gt;\\r\\n\\r\\n&lt;div&gt;\\r\\n&lt;div&gt;\\r\\n&lt;video controls=\\\"controls\\\" height=\\\"300\\\" id=\\\"video201644152011\\\" poster=\\\"\\\" width=\\\"400\\\"&gt;&lt;source src=\\\"/uploads/ckeditor/attachments/24/test.mp4\\\" type=\\\"video/mp4\\\" /&gt;Your browser doesn&amp;#39;t support video.&lt;br /&gt;\\r\\nPlease download the file: &lt;a href=\\\"/uploads/ckeditor/attachments/24/test.mp4\\\"&gt;video/mp4&lt;/a&gt;&lt;/video&gt;\\r\\n&lt;/div&gt;\\r\\n\\r\\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\\r\\n&lt;/div&gt;\\r\\n\"\n</code></pre>\n\n<p>I want to replace all video tags including its content and sub tags with <code>[[ Video ]]</code></p>\n\n<p>The expected output is:</p>\n\n<pre><code>\"&lt;div&gt;\\r\\n[[ Video ]]\\r\\n&lt;/div&gt;\\r\\n\\r\\n&lt;div&gt;test description&lt;/div&gt;\\r\\n\\r\\n&lt;div&gt;\\r\\n&lt;div&gt;\\r\\n[[ Video ]]\\r\\n&lt;/div&gt;\\r\\n\\r\\n&lt;p&gt;&amp;nbsp;&lt;/p&gt;\\r\\n&lt;/div&gt;\\r\\n\"\n</code></pre>\n\n<p>I have tried using the regex <code>/&lt;video\\s(.*?)&lt;\\/video(?=[&gt;])&gt;/</code>, but it's not working properly.</p>\n"}, {"tags": ["ruby", "xml", "nokogiri"], "comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1462355568, "post_id": 37024081, "comment_id": 61598782, "body": "I&#39;m not sure, but I believe Nokogiri takes care of this stuff of multiple http connections inside it and you don&#39;t need to care about this. Is your code running? If not, what are the error messages?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 0, "creation_date": 1462356034, "post_id": 37024081, "comment_id": 61599079, "body": "The error is on the server side: 500 error code means the server had an internal error."}, {"owner": {"reputation": 31, "user_id": 6289978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd6ea9da5a78b5e52c680319f49e821d?s=128&d=identicon&r=PG&f=1", "display_name": "wera wloch", "link": "https://stackoverflow.com/users/6289978/wera-wloch"}, "edited": false, "score": 0, "creation_date": 1462356150, "post_id": 37024081, "comment_id": 61599149, "body": "So to sum it all up, the problem is probably with server and I my method of doing it as shown in the code above is mjore or less correct?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 0, "creation_date": 1462356301, "post_id": 37024081, "comment_id": 61599266, "body": "It looks reasonable. Just to make sure though, when you are assigning $doc2, you are opening a different document, right?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1462375432, "post_id": 37024081, "comment_id": 61613905, "body": "@EddeAlmeida, Nokogiri has no idea of HTTP connections at all. It only reads a stream, or takes a string, and parses it."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1462375744, "post_id": 37024081, "comment_id": 61614130, "body": "@theTinMan Thanks for the information."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1462376496, "post_id": 37024501, "comment_id": 61614672, "body": "OpenURI returns a StringIO object if I remember right."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "is_accepted": false, "score": 0, "last_activity_date": 1462375648, "last_edit_date": 1462375648, "creation_date": 1462356183, "answer_id": 37024501, "question_id": 37024081, "link": "https://stackoverflow.com/questions/37024081/download-multiple-xml-files/37024501#37024501", "title": "Download multiple XML files", "body": "<p>You are using OpenUri to fetch a document from a URL. I am pretty sure that this doesn't leave any open connection, but reads the document into an IO like object, kind of like a file.</p>\n\n<p>Your problem seems to be that the server has had an internal error.</p>\n"}], "owner": {"reputation": 31, "user_id": 6289978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd6ea9da5a78b5e52c680319f49e821d?s=128&d=identicon&r=PG&f=1", "display_name": "wera wloch", "link": "https://stackoverflow.com/users/6289978/wera-wloch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 211, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462375648, "creation_date": 1462355116, "last_edit_date": 1462375601, "question_id": 37024081, "link": "https://stackoverflow.com/questions/37024081/download-multiple-xml-files", "title": "Download multiple XML files", "body": "<p>I'm writing an application to parse XML. I have to obtain data from one XML file, and then in a loop I have to open another XML file.</p>\n\n<p>The code looks like this:</p>\n\n<pre><code>$doc = Nokogiri::XML(open('myxmladress'))\n$doc.xpath('//job').each do |job|\n  if job.xpath('name').text.include?('joe')\n    $doc2 = Nokogiri::XML(open('myxmladress_for_joe'))\n  end\nend\n</code></pre>\n\n<p>I believe that I cannot have multiple HTTP connections open. </p>\n\n<p>Can I simply download the whole file instead of using</p>\n\n<pre><code>$doc Nokogiri::XML(open('myxmladress'))\n</code></pre>\n\n<p>or is there any way to close the Nokogiri HTTP connection? </p>\n\n<p>What is more I'm downloading it by https. </p>\n\n<p>My error:</p>\n\n<pre><code>in `open_http': 500 Server Error (OpenURI::HTTPError)\nfrom /home/nagios/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/open-uri.rb:737:in `buffer_open'\nfrom /home/nagios/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/open-uri.rb:212:in `block in open_loop'\nfrom /home/nagios/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/open-uri.rb:210:in `catch'\nfrom /home/nagios/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/open-uri.rb:210:in `open_loop'\nfrom /home/nagios/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/open-uri.rb:151:in `open_uri'\nfrom /home/nagios/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/open-uri.rb:717:in `open'\nfrom /home/nagios/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/open-uri.rb:35:in `open'\nfrom jenkins_auth.rb:97:in `block (2 levels) in combine_partial_results'\nfrom /home/nagios/.rvm/gems/ruby-2.3.0/gems/nokogiri-1.6.7.2/lib/nokogiri/xml/node_set.rb:187:in `block in each'\nfrom /home/nagios/.rvm/gems/ruby-2.3.0/gems/nokogiri-1.6.7.2/lib/nokogiri/xml/node_set.rb:186:in `upto'\nfrom /home/nagios/.rvm/gems/ruby-2.3.0/gems/nokogiri-1.6.7.2/lib/nokogiri/xml/node_set.rb:186:in `each'\nfrom jenkins_auth.rb:89:in `block in combine_partial_results'\nfrom /home/nagios/.rvm/gems/ruby-2.3.0/gems/nokogiri-1.6.7.2/lib/nokogiri/xml/node_set.rb:187:in `block in each'\nfrom /home/nagios/.rvm/gems/ruby-2.3.0/gems/nokogiri-1.6.7.2/lib/nokogiri/xml/node_set.rb:186:in `upto'\nfrom /home/nagios/.rvm/gems/ruby-2.3.0/gems/nokogiri-1.6.7.2/lib/nokogiri/xml/node_set.rb:186:in `each'\nfrom jenkins_auth.rb:86:in `combine_partial_results'\nfrom jenkins_auth.rb:130:in `get_tests_for_job'\nfrom jenkins_auth.rb:137:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "email-attachments"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1462356275, "post_id": 37023923, "comment_id": 61599244, "body": "Is there a reason why you&#39;re implementing a mail service from scratch? Would it not be much easier to just use an existing gem, e.g. <a href=\"https://github.com/mikel/mail\" rel=\"nofollow noreferrer\">github.com/mikel/mail</a> ?"}, {"owner": {"reputation": 1, "user_id": 6289903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d7be9ea2d47f22c065e1cb4e5be2d1a?s=128&d=identicon&r=PG&f=1", "display_name": "Janani Reddy", "link": "https://stackoverflow.com/users/6289903/janani-reddy"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1462356738, "post_id": 37023923, "comment_id": 61599606, "body": "i am completely new to ruby . In that case as well , how to send all files in a folder as attachments ."}], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 0, "last_activity_date": 1462359055, "creation_date": 1462359055, "answer_id": 37025609, "question_id": 37023923, "link": "https://stackoverflow.com/questions/37023923/how-to-send-all-files-in-a-folder-as-email-attachments-in-ruby/37025609#37025609", "title": "how to send all files in a folder as email attachments in ruby", "body": "<p>The important part here is to loop over all files in a directory, and add each of them as an attachment.</p>\n\n<p>I could modify your original code to do this, but there are much easier solutions.</p>\n\n<p>For example, using a ruby gem such as <code>mail</code> (<a href=\"https://github.com/mikel/mail\" rel=\"nofollow\">https://github.com/mikel/mail</a>), you can simplify the code a great deal:</p>\n\n<pre><code>Mail.deliver do\n  from     'me@fromdomain.net'\n  to       'mytest@todmain.com'\n  subject  'Sending Attachement'\n  body     'This is a test email to send an attachement.'\n  Dir.glob('/tmp/files_to_attach/*.txt') do |file|\n    add_file file\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6289903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d7be9ea2d47f22c065e1cb4e5be2d1a?s=128&d=identicon&r=PG&f=1", "display_name": "Janani Reddy", "link": "https://stackoverflow.com/users/6289903/janani-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 417, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462359055, "creation_date": 1462354690, "question_id": 37023923, "link": "https://stackoverflow.com/questions/37023923/how-to-send-all-files-in-a-folder-as-email-attachments-in-ruby", "title": "how to send all files in a folder as email attachments in ruby", "body": "<p>i am trying to send all files in a particular folder as email attachments using ruby .\nHow to read all files in a folder and send them as email attachment in ruby?\nAs of now  i am able to send one file as email attachment using the below code.</p>\n\n<pre><code>    require 'net/smtp'\n    filename = \"/tmp/test.txt\"\n    # Read a file and encode it into base64 format\n    filecontent = File.read(filename)\n    encodedcontent = [filecontent].pack(\"m\")   # base64\n    marker = \"AUNIQUEMARKER\"\n    body =&lt;&lt;EOF\n    This is a test email to send an attachement.\n    EOF\n    # Define the main headers.\n    part1 =&lt;&lt;EOF \n    From: Private Person &lt;me@fromdomain.net&gt;\n    To: A Test User &lt;test@todmain.com&gt;\n    Subject: Sending Attachement\n    MIME-Version: 1.0\n    Content-Type: multipart/mixed; boundary=#{marker}\n    --#{marker}\n    EOF\n    # Define the message action\n    part2 =&lt;&lt;EOF\n    Content-Type: text/plain\n    Content-Transfer-Encoding:8bit\n    #{body}\n    --#{marker}\n    EOF\n\n   # Define the attachment section\n   part3 =&lt;&lt;EOF\n   Content-Type: multipart/mixed; name=\\\"#{filename}\\\"\n   Content-Transfer-Encoding:base64\n   Content-Disposition: attachment; filename=\"#{filename}\"\n   #{encodedcontent}\n   --#{marker}--\n   EOF\n   mailtext = part1 + part2 + part3\n   # Let's put our code in safe area \n   begin \n       Net::SMTP.start('localhost') do |smtp|\n       smtp.sendmail(mailtext, 'me@fromdomain.net',\n                      ['test@todmain.com'])\n   end\n   rescue Exception =&gt; e  \n     print \"Exception occured: \" + e  \n   end  \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "parse-platform", "ruby-on-rails-4.2"], "comments": [{"owner": {"reputation": 1211, "user_id": 5056202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wq9rr.jpg?s=128&g=1", "display_name": "CheeseFry", "link": "https://stackoverflow.com/users/5056202/cheesefry"}, "edited": false, "score": 0, "creation_date": 1462351906, "post_id": 37022542, "comment_id": 61596209, "body": "What does <code>=p[&quot;following&quot;].first</code> give you?"}, {"owner": {"reputation": 561, "user_id": 4179335, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-y8bJXFa59yA/AAAAAAAAAAI/AAAAAAAAAvk/Ha7r3tgCwaI/photo.jpg?sz=128", "display_name": "Ali Zain", "link": "https://stackoverflow.com/users/4179335/ali-zain"}, "reply_to_user": {"reputation": 1211, "user_id": 5056202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wq9rr.jpg?s=128&g=1", "display_name": "CheeseFry", "link": "https://stackoverflow.com/users/5056202/cheesefry"}, "edited": false, "score": 0, "creation_date": 1462352139, "post_id": 37022542, "comment_id": 61596352, "body": "<code>undefined method &quot;first&quot; for #&lt;Parse::Pointer:0x007fefa5ba5260&gt;</code>  error"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462430869, "post_id": 37022542, "comment_id": 61636917, "body": "Can you show the code where you add the &quot;Follow&quot; relation?  I think that the real cause of this might be there."}, {"owner": {"reputation": 561, "user_id": 4179335, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-y8bJXFa59yA/AAAAAAAAAAI/AAAAAAAAAvk/Ha7r3tgCwaI/photo.jpg?sz=128", "display_name": "Ali Zain", "link": "https://stackoverflow.com/users/4179335/ali-zain"}, "reply_to_user": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462637735, "post_id": 37022542, "comment_id": 61725265, "body": "@MichaelGaskill yes! it has a relation"}], "answers": [{"comments": [{"owner": {"reputation": 561, "user_id": 4179335, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-y8bJXFa59yA/AAAAAAAAAAI/AAAAAAAAAvk/Ha7r3tgCwaI/photo.jpg?sz=128", "display_name": "Ali Zain", "link": "https://stackoverflow.com/users/4179335/ali-zain"}, "edited": false, "score": 0, "creation_date": 1462429008, "post_id": 37035816, "comment_id": 61635989, "body": "But that method I used is already documented there. But not working. Just wanted to check whether I have implemented that wrong or something else. Anyway thanks for answer."}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "reply_to_user": {"reputation": 561, "user_id": 4179335, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-y8bJXFa59yA/AAAAAAAAAAI/AAAAAAAAAvk/Ha7r3tgCwaI/photo.jpg?sz=128", "display_name": "Ali Zain", "link": "https://stackoverflow.com/users/4179335/ali-zain"}, "edited": false, "score": 0, "creation_date": 1462429099, "post_id": 37035816, "comment_id": 61636025, "body": "I didn&#39;t look at the documentation, I looked at the code.  Those members that I listed in the answer are copied from the code, and there are no others.  Which documentation are you looking at?  Can you provide a link?"}, {"owner": {"reputation": 561, "user_id": 4179335, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-y8bJXFa59yA/AAAAAAAAAAI/AAAAAAAAAvk/Ha7r3tgCwaI/photo.jpg?sz=128", "display_name": "Ali Zain", "link": "https://stackoverflow.com/users/4179335/ali-zain"}, "edited": false, "score": 0, "creation_date": 1462430165, "post_id": 37035816, "comment_id": 61636548, "body": "Already mentioned in my questions <a href=\"https://github.com/adelevie/parse-ruby-client\" rel=\"nofollow noreferrer\">Parse Ruby Client</a>"}], "tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": false, "score": 1, "last_activity_date": 1462388217, "creation_date": 1462388217, "answer_id": 37035816, "question_id": 37022542, "link": "https://stackoverflow.com/questions/37022542/ruby-on-rails-parse-library-issue/37035816#37035816", "title": "Ruby on Rails Parse Library Issue", "body": "<p>Parse::Pointer only has these accessors defined on it:</p>\n\n<ul>\n<li>attr_accessor :parse_object_id</li>\n<li>attr_accessor :class_name</li>\n</ul>\n\n<p>and these methods:</p>\n\n<ul>\n<li>def make(class_name, object_id)</li>\n<li>def initialize(data)</li>\n<li>def pointer</li>\n<li>def eql?(other)</li>\n<li>def hash</li>\n<li>def new?</li>\n<li>def to_h(*_a)</li>\n<li>def to_json(*a)</li>\n<li>def get(client = nil)</li>\n<li>def to_s</li>\n</ul>\n\n<p>and these aliases:</p>\n\n<ul>\n<li>alias id parse_object_id</li>\n<li>alias as_json to_h</li>\n</ul>\n\n<p>There are no iterators / enumerators or anything like what you're trying to do; the Parse::Pointer is just a reference (pointer) to another parse object.</p>\n\n<p>You CAN do something like this:</p>\n\n<pre><code>@follow.each do |p|\n  following = p[\"following\"]\n  \"Following: #{following.class_name} (#{following.id})\"\nend\n</code></pre>\n\n<p>And that will display all of the objects that are following.</p>\n\n<p>If you need to access the details of the objects, you'll need to resolve them each as you process them.</p>\n"}], "owner": {"reputation": 561, "user_id": 4179335, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-y8bJXFa59yA/AAAAAAAAAAI/AAAAAAAAAvk/Ha7r3tgCwaI/photo.jpg?sz=128", "display_name": "Ali Zain", "link": "https://stackoverflow.com/users/4179335/ali-zain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1462388217, "creation_date": 1462351129, "question_id": 37022542, "link": "https://stackoverflow.com/questions/37022542/ruby-on-rails-parse-library-issue", "title": "Ruby on Rails Parse Library Issue", "body": "<p><a href=\"https://github.com/adelevie/parse-ruby-client\" rel=\"nofollow\">https://github.com/adelevie/parse-ruby-client</a></p>\n\n<p>PARSE Library for ROR</p>\n\n<p><strong>Ruby 2.0\nRails 4.2.6</strong></p>\n\n<p>My Query to get all followers from a user</p>\n\n<pre><code>@follow = client.query(\"Follow\").tap do |q|\n      q.eq(\"user\",@user.pointer)\n      q.include = \"_User\"\n    end.get\n</code></pre>\n\n<p>Returns me correct data and </p>\n\n<pre><code>@follow.each do |p|\n p[\"following\"] #contains users pointer\nend\n</code></pre>\n\n<p>BUT displaying this returns</p>\n\n<pre><code>=p[\"following\"].objects.first\n</code></pre>\n\n<p><strong>ERROR</strong></p>\n\n<pre><code>undefined method `objects' for #&lt;Parse::Pointer:0x007fefa5506aa8&gt;\n</code></pre>\n\n<p>Any help regarding this would be highly appreciated! Thanks :)</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 1, "last_activity_date": 1462353286, "creation_date": 1462353286, "answer_id": 37023379, "question_id": 37022466, "link": "https://stackoverflow.com/questions/37022466/empty-variables-in-gherkins-tests/37023379#37023379", "title": "Empty variables in Gherkins tests", "body": "<p>It's not necessarily empty during the test, but it's not accessible within the test. What you're \"testing\" is an instance variable belonging to the test object, not the original instance variable.</p>\n\n<p>You don't say what object the instance variable belongs to, but you can retrieve the instance variable from within the test with...</p>\n\n<pre><code>foo.instance_variable_get(:bar)\n</code></pre>\n\n<p>But if you're testing instance variables, your test needs to know too much about the internals of your application.  Better would be for you to test whatever method uses / outputs the instance variable.</p>\n"}], "owner": {"reputation": 2426, "user_id": 514150, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2eca6296e3e091844ff62ad915a27f68?s=128&d=identicon&r=PG", "display_name": "Dennis", "link": "https://stackoverflow.com/users/514150/dennis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1462353286, "creation_date": 1462350892, "last_edit_date": 1462351251, "question_id": 37022466, "link": "https://stackoverflow.com/questions/37022466/empty-variables-in-gherkins-tests", "title": "Empty variables in Gherkins tests", "body": "<p>This is the output of the bundle exec cucumber run. You can see the @timeout_exception is nil during the cucumber run, but it's set fine during runtime.</p>\n\n<pre><code>And the output should be 'Execution Timeout Error: This deployment has taken too long to run'                                     # features/step_definitions/my_steps.rb:309\n\n  expected: \"Execution Timeout Error: This deployment has taken too long to run\"\n       got: nil\n\n  (compared using ==)\n   (RSpec::Expectations::ExpectationNotMetError)\n  ./features/step_definitions/my_steps.rb:310:in `/^the output should be '(.*)'$/'\n  features/timeout_lengthy_deploys.feature:25:in `And the output should be 'Execution Timeout Error: This deployment has taken too long to run''\n\nFailing Scenarios:\ncucumber features/timeout_lengthy_deploys.feature:11 # Scenario: Normal deploy that times out because it takes too long\n</code></pre>\n\n<p>This is my test, but even though @timeout_exception is working during running of the code, it's empty during the test. So how can I test if this variable is set?</p>\n\n<pre><code>Then(/^the output should be '(.*)'$/) do |expectedException|\n  expect(@timeout_exception).to eq(expectedException)\nend\n</code></pre>\n\n<p>This is the Ruby code.</p>\n\n<pre><code>log.info \"Executing '#{command.join(' ')}'\"\nbegin\n    timeout(config['deploy-timeout'].to_i) do\n        execute_and_log command\n    end\nrescue Timeout::Error =&gt; e\n    @timeout_exception = \"Execution Timeout Error\"\n    log.error \"#{@timeout_exception}\"\n    raise e\nend \n</code></pre>\n\n<p>Log.error prints nicely \"Execution Timeout Error\" but is empty during the expect(@timeout_exception)...</p>\n"}, {"tags": ["ruby", "jekyll", "liquid"], "answers": [{"comments": [{"owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 1, "creation_date": 1462374369, "post_id": 37026674, "comment_id": 61613141, "body": "Why are you using <code>capture</code> instead of <code>assign</code> ?"}, {"owner": {"reputation": 1490, "user_id": 1456318, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ZDHcR.png?s=128&g=1", "display_name": "michaPau", "link": "https://stackoverflow.com/users/1456318/michapau"}, "reply_to_user": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1462380483, "post_id": 37026674, "comment_id": 61617304, "body": "I am not sure actually. <a href=\"https://github.com/Shopify/liquid/issues/487\" rel=\"nofollow noreferrer\">Here</a> it says capture is/can be faster in some cases. I think <code>capture</code> makes sense for the some_string and sub_string definition because it could be something constructed from other things.  Perhaps for the rest <code>assign</code> would be clearer to read. What do you think?"}, {"owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 1, "creation_date": 1462383535, "post_id": 37026674, "comment_id": 61619006, "body": "In your case, with no <code>append</code>, like in <code>{% assign foobar = &quot;foo&quot; | append: bar %}</code>, the assign is 20% faster. From my point of view, when you can do with <code>assign</code>, this avoid you errors with unwanted spaces or line breaks."}, {"owner": {"reputation": 196, "user_id": 4045315, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HuShY3YEo4k/AAAAAAAAAAI/AAAAAAAAABM/t7lJKOzlDnc/photo.jpg?sz=128", "display_name": "Lirian Su", "link": "https://stackoverflow.com/users/4045315/lirian-su"}, "edited": false, "score": 0, "creation_date": 1462781059, "post_id": 37026674, "comment_id": 61762887, "body": "Haven&#39;t tried this answer. I use other approach and avoided to check string endings in liquid code."}], "tags": [], "owner": {"reputation": 1490, "user_id": 1456318, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ZDHcR.png?s=128&g=1", "display_name": "michaPau", "link": "https://stackoverflow.com/users/1456318/michapau"}, "is_accepted": true, "score": 2, "last_activity_date": 1462441196, "last_edit_date": 1462441196, "creation_date": 1462361768, "answer_id": 37026674, "question_id": 37022432, "link": "https://stackoverflow.com/questions/37022432/how-can-i-check-if-a-string-ends-with-a-particular-substring-in-liquid/37026674#37026674", "title": "How can I check if a string ends with a particular substring in Liquid?", "body": "<p>As a workaround you could use the <code>string slice</code> method </p>\n\n<ul>\n<li>with as <code>startIndex: some_string length - sub_string length</code>  and</li>\n<li><code>stringLength: sub_string size</code>   </li>\n<li>and if the result of the slice is the same as the sub_string -> the sub_string is at the end of some_string.</li>\n</ul>\n\n<p>it's a bit clumpy in a liquid template but it would look like: </p>\n\n<pre><code>{% capture sub_string %}{{'subString'}}{% endcapture %}\n{% capture some_string %}{{'some string with subString'}}{% endcapture %}\n\n{% assign sub_string_size = sub_string | size %}\n{% assign some_string_size = some_string | size %}\n{% assign start_index = some_string_size | minus: sub_string_size %}\n{% assign result = some_string | slice: start_index, sub_string_size %}\n\n{% if result == sub_string %}\n    Found string at the end\n{% else %}\n    Not found\n{% endif %}\n</code></pre>\n\n<p>and if the some_string is empty or shorter than sub_string it works anyway because the slice result would be empty as well </p>\n"}, {"comments": [{"owner": {"reputation": 89, "user_id": 8119317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6NLDw.png?s=128&g=1", "display_name": "informatik-handwerk.de", "link": "https://stackoverflow.com/users/8119317/informatik-handwerk-de"}, "edited": false, "score": 0, "creation_date": 1614364573, "post_id": 64120329, "comment_id": 117372695, "body": "Docs on installing/creating plugins: <a href=\"https://jekyllrb.com/docs/plugins/installation/\" rel=\"nofollow noreferrer\">jekyllrb.com/docs/plugins/installation</a>"}], "tags": [], "owner": {"reputation": 36, "user_id": 644716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8RU86.png?s=128&g=1", "display_name": "pilvikala", "link": "https://stackoverflow.com/users/644716/pilvikala"}, "is_accepted": false, "score": 2, "last_activity_date": 1601385037, "creation_date": 1601385037, "answer_id": 64120329, "question_id": 37022432, "link": "https://stackoverflow.com/questions/37022432/how-can-i-check-if-a-string-ends-with-a-particular-substring-in-liquid/64120329#64120329", "title": "How can I check if a string ends with a particular substring in Liquid?", "body": "<p>With Jekyll, I ended up writing a small module-wrapper that adds a filter:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>module Jekyll\n   module StringFilter\n    def endswith(text, query)\n      return text.end_with? query\n    end\n  end\nend\n  \nLiquid::Template.register_filter(Jekyll::StringFilter)\n</code></pre>\n<p>I use it like this:</p>\n<pre><code>{% assign is_directory = page.url | endswith: &quot;/&quot; %}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 627, "user_id": 4137262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tiu0t.jpg?s=128&g=1", "display_name": "v20100v", "link": "https://stackoverflow.com/users/4137262/v20100v"}, "is_accepted": false, "score": 1, "last_activity_date": 1605291238, "creation_date": 1605291238, "answer_id": 64825985, "question_id": 37022432, "link": "https://stackoverflow.com/questions/37022432/how-can-i-check-if-a-string-ends-with-a-particular-substring-in-liquid/64825985#64825985", "title": "How can I check if a string ends with a particular substring in Liquid?", "body": "<p>We can use another solution with <code>split</code> filter.</p>\n<pre><code>{%- assign filename = 'main.js' -%}\n{%- assign check = filename | split:'js' -%}\n\n{% if check.size == 1 and checkArray[0] != filename %}\n   Found 'js' at the end\n{% else %}\n   Not found 'js' at the end\n{% endif %}\n</code></pre>\n<p>Here we go ^^.</p>\n"}], "owner": {"reputation": 196, "user_id": 4045315, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HuShY3YEo4k/AAAAAAAAAAI/AAAAAAAAABM/t7lJKOzlDnc/photo.jpg?sz=128", "display_name": "Lirian Su", "link": "https://stackoverflow.com/users/4045315/lirian-su"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3183, "favorite_count": 1, "accepted_answer_id": 37026674, "answer_count": 3, "score": 4, "last_activity_date": 1612774857, "creation_date": 1462350780, "last_edit_date": 1612774857, "question_id": 37022432, "link": "https://stackoverflow.com/questions/37022432/how-can-i-check-if-a-string-ends-with-a-particular-substring-in-liquid", "title": "How can I check if a string ends with a particular substring in Liquid?", "body": "<p>I know there is a <code>contains</code> keyword so I can use:</p>\n<pre><code>{% if some_string contains sub_string %}\n    &lt;!-- do_something --&gt;\n{% ... %}\n</code></pre>\n<p>But how can I check if a string ends with a particular substring?</p>\n<p>I've tried this but it won't work:</p>\n<pre><code>{% if some_string.endswith? sub_string %}\n    &lt;!-- do_something --&gt;\n{% ... %}\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1462350517, "post_id": 37021694, "comment_id": 61595344, "body": "The conversion to Rational is already &quot;lossy&quot;, i.e. <code>(0.075).to_r</code> is not equal to <code>75&#47;1000r</code>"}], "tags": [], "owner": {"reputation": 794, "user_id": 1839692, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/3pZBl.jpg?s=128&g=1", "display_name": "Raphael Pr", "link": "https://stackoverflow.com/users/1839692/raphael-pr"}, "is_accepted": false, "score": -1, "last_activity_date": 1462348796, "last_edit_date": 1462348796, "creation_date": 1462348482, "answer_id": 37021694, "question_id": 37021490, "link": "https://stackoverflow.com/questions/37021490/ruby-round-5-not-correct/37021694#37021694", "title": "Ruby round .5 not correct", "body": "<p>This has to deal with the way ruby deals with Float. If you convert to Rational it rounds to the closest number : <code>(0.075).to_r.round(2) #=&gt; (7/100)</code> and <code>9.075.to_r.round(2) #=&gt; (907/100)</code></p>\n\n<p>More details on the floating point logic (logic used to internaly store floats) : <a href=\"https://en.wikipedia.org/wiki/Floating_point\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Floating_point</a> </p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1462349476, "post_id": 37021791, "comment_id": 61594649, "body": "or <code>sprintf(&#39;%.50f&#39;, 9.075)</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1462350151, "post_id": 37021791, "comment_id": 61595105, "body": "Can you explain why <code>0.075</code> is rounded to <code>0.08</code>? Its float value is also slightly <i>below</i> the decimal value."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1462350936, "post_id": 37021791, "comment_id": 61595626, "body": "Freddy &amp; @Stefan, the C code in the doc for <a href=\"http://ruby-doc.org/core-2.2.0/Float.html#method-i-round\" rel=\"nofollow noreferrer\">Float#round</a> contains an extended comment that may shed light here."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1462352754, "post_id": 37021791, "comment_id": 61596757, "body": "@CarySwoveland good catch, but that comment is rather technical. Someone has to explain the algorithm in layman&#39;s terms. Any volunteers? ;-)"}, {"owner": {"reputation": 16776, "user_id": 1620081, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bc22b26eca68dab55ec4fe491495951e?s=128&d=identicon&r=PG", "display_name": "Augustin Riedinger", "link": "https://stackoverflow.com/users/1620081/augustin-riedinger"}, "edited": false, "score": 0, "creation_date": 1462355637, "post_id": 37021791, "comment_id": 61598817, "body": "Thanks for explaining. I realized that also. Do you have any suggestion on how to write a method that would round my numbers as expected?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 16776, "user_id": 1620081, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bc22b26eca68dab55ec4fe491495951e?s=128&d=identicon&r=PG", "display_name": "Augustin Riedinger", "link": "https://stackoverflow.com/users/1620081/augustin-riedinger"}, "edited": false, "score": 2, "creation_date": 1462356310, "post_id": 37021791, "comment_id": 61599274, "body": "@AugustinRiedinger <code>BigDecimal(9.075.to_s).round(2).to_f</code> should work, but it&#39;s more like a hack. Maybe you should just use <code>BigDecimal</code> and avoid floats in the first place."}, {"owner": {"reputation": 16776, "user_id": 1620081, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bc22b26eca68dab55ec4fe491495951e?s=128&d=identicon&r=PG", "display_name": "Augustin Riedinger", "link": "https://stackoverflow.com/users/1620081/augustin-riedinger"}, "edited": false, "score": 0, "creation_date": 1462356482, "post_id": 37021791, "comment_id": 61599408, "body": "I&#39;ll go for this in the short term. :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1462382445, "post_id": 37021791, "comment_id": 61618385, "body": "Another data point:  <code>7.075.round(2) #=&gt; 7.08; 8.075.round(2)  =&gt; 8.07</code>."}], "tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": false, "score": 4, "last_activity_date": 1462382853, "last_edit_date": 1462382853, "creation_date": 1462348751, "answer_id": 37021791, "question_id": 37021490, "link": "https://stackoverflow.com/questions/37021490/ruby-round-5-not-correct/37021791#37021791", "title": "Ruby round .5 not correct", "body": "<p>Floating point is tricky. The decimal 9.075 can't be exactly represented as a float. This isn't specific to ruby.</p>\n\n<p>The rounding algorithm in most cases (not including nans and the like)  works by multiplying the number by the appropriate power of 10, rounding, and then dividing by that same number. That multiplying by 10 results in some loss of precision. </p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1462353226, "post_id": 37022960, "comment_id": 61597082, "body": "This doesn&#39;t explain <code>0.075</code>. Its <code>prev_float</code> and <code>next_float</code> values are <code>0.07499999999999998</code> and <code>0.07500000000000001</code>. The mean is <code>0.074999999999999995</code>, but it rounds <i>up</i> to <code>0.08</code>"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1462352244, "creation_date": 1462352244, "answer_id": 37022960, "question_id": 37021490, "link": "https://stackoverflow.com/questions/37021490/ruby-round-5-not-correct/37022960#37022960", "title": "Ruby round .5 not correct", "body": "<p>Floating point number can not represent all number precisely. I advise to read <a href=\"https://en.wikipedia.org/wiki/Floating_point#Representable_numbers.2C_conversion_and_rounding\" rel=\"nofollow\">Floating Point - Representable numbers, conversion and rounding</a>.</p>\n\n<p>Since Ruby 2.2 you can use <a href=\"http://ruby-doc.org/core-2.3.0/Float.html#method-i-prev_float\" rel=\"nofollow\"><code>prev_float</code></a> and <a href=\"http://ruby-doc.org/core-2.3.0/Float.html#method-i-next_float\" rel=\"nofollow\"><code>next_float</code></a> to see which are the cloased representable floating points to a given number:</p>\n\n<pre><code>9.075.prev_float\n#=&gt; 9.074999999999998\n\n9.075.next_float\n#=&gt; 9.075000000000001\n</code></pre>\n\n<p>As you see <code>9.075</code> is between to <code>9.075000000000001</code> and <code>9.074999999999998</code>, therefore the mean is at <code>9.0749999999999995</code> and therefore <code>9.075</code> rounds <em>down</em> to <code>9.07</code>.</p>\n"}], "owner": {"reputation": 16776, "user_id": 1620081, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bc22b26eca68dab55ec4fe491495951e?s=128&d=identicon&r=PG", "display_name": "Augustin Riedinger", "link": "https://stackoverflow.com/users/1620081/augustin-riedinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1462382853, "creation_date": 1462347842, "question_id": 37021490, "link": "https://stackoverflow.com/questions/37021490/ruby-round-5-not-correct", "title": "Ruby round .5 not correct", "body": "<p>Here what's bringing me trouble:</p>\n\n<pre><code>irb&gt; (0.5).round # =&gt; 1 YES\nirb&gt; (0.075).round(2) # =&gt; 0.08 YES\nirb&gt; (9.075).round(2) # =&gt; 9.07 WHY???\n</code></pre>\n\n<p>What is going on? How come the result isn't <code>9.08</code>?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1462352392, "post_id": 37021085, "comment_id": 61596509, "body": "Note: <code>c2.foo #=&gt; NoMethodError: private method &#39;foo&#39;...; c2.send(:foo) #=&gt; foo</code>."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1462353349, "post_id": 37021085, "comment_id": 61597165, "body": "@CarySwoveland I don&#39;t understand what you&#39;re saying, could you explain?  Also, BTW, I fixed my copy/paste error, all were printing out as M1."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1462355180, "post_id": 37021085, "comment_id": 61598514, "body": "Sorry, I just thought it was worth mentioning that <a href=\"http://ruby-doc.org/core-2.2.0/Module.html#method-i-module_function\" rel=\"nofollow noreferrer\">Module#module_function</a> makes the instance method private."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1462356609, "post_id": 37021085, "comment_id": 61599499, "body": "I see, that&#39;s interesting.  I&#39;ve only ever called such methods in the including class so that never occurred to me.  Thanks!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1462388509, "post_id": 37021085, "comment_id": 61622120, "body": "I see in my comment I forgot <code>c2=C2.new</code>. No wonder it was puzzling."}], "tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": false, "score": 2, "last_activity_date": 1462353306, "last_edit_date": 1462353306, "creation_date": 1462346706, "answer_id": 37021085, "question_id": 37021084, "link": "https://stackoverflow.com/questions/37021084/is-defining-a-module-function-with-module-function-the-same-as-defining-it-wit/37021085#37021085", "title": "Is defining a module function with `module_function` the same as defining it with `self.` in Ruby?", "body": "<p>No, they are not the same.  Using <code>self.</code> creates only a module method, whereas <code>module_function</code> creates both a module and an instance method:</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nmodule M1\n  def self.foo\n    puts 'foo'\n  end\nend\n\nmodule M2\n  module_function\n  def foo\n    puts 'foo'\n  end\nend\n\n\nclass C1\n  include M1\n\n  def test\n    puts 'Call M1 as module method:'\n    M1.foo\n    # puts 'Call M1 as instance method:'\n    # foo\n  end\nend\n\nclass C2\n  include M2\n\n  def test\n    puts 'Call M2 as module method:'\n    M2.foo\n    puts 'Call M2 as instance method:'\n    foo\n  end\nend\n\nC2.new.test; C1.new.test\n</code></pre>\n\n<p>Results in the following output:</p>\n\n<pre><code>Call M2 as module method:\nfoo\nCall M2 as instance method:\nfoo\nCall M1 as module method:\nfoo\n</code></pre>\n\n<p>If you then uncomment out the 'Call M1 as instance method:' 2 lines, you'll see this error:</p>\n\n<pre><code>./m1.rb:24:in `test': undefined local variable or method `foo' for #&lt;C1:0x007feb311767f8&gt; (NameError)\n</code></pre>\n\n<p>This shows that an instance method <code>foo</code> was <em>not</em> created when the method was defined as <code>self.foo</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 4, "last_activity_date": 1462351987, "last_edit_date": 1462351987, "creation_date": 1462351632, "answer_id": 37022728, "question_id": 37021084, "link": "https://stackoverflow.com/questions/37021084/is-defining-a-module-function-with-module-function-the-same-as-defining-it-wit/37022728#37022728", "title": "Is defining a module function with `module_function` the same as defining it with `self.` in Ruby?", "body": "<p>No.</p>\n\n<pre><code>module M1\n  def self.foo; end\nend\n\nmodule M2\n  module_function\n  def goo; end\nend\n\nM1.methods(false)           #=&gt; [:foo] \nM1.instance_methods         #=&gt; [] \nM1.private_instance_methods #=&gt; [] \n\nM2.methods(false)           #=&gt; [:goo] \nM2.instance_methods         #=&gt; [] \nM2.private_instance_methods #=&gt; [:goo] \n</code></pre>\n"}], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 865, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1462353306, "creation_date": 1462346706, "question_id": 37021084, "link": "https://stackoverflow.com/questions/37021084/is-defining-a-module-function-with-module-function-the-same-as-defining-it-wit", "title": "Is defining a module function with `module_function` the same as defining it with `self.` in Ruby?", "body": "<p>Is defining a module function with <code>module_function</code> the same as defining it with <code>self.</code> in Ruby?  That is, do they both result in the creation of both instance and module methods?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "exception"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1462349601, "post_id": 37021029, "comment_id": 61594733, "body": "Why do you think that error should be caught by one of your clauses (other than the catch all rescue Exception clause)"}, {"owner": {"reputation": 1222, "user_id": 2923253, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b165c2d2b048038a90e7215735a71920?s=128&d=identicon&r=PG&f=1", "display_name": "nayiaw", "link": "https://stackoverflow.com/users/2923253/nayiaw"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1462350026, "post_id": 37021029, "comment_id": 61595027, "body": "@FrederickCheung what do you mean?"}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1462350093, "post_id": 37021029, "comment_id": 61595068, "body": "I mean why do you think that error shouldn&#39;t end up in the <code>rescue Exception</code> bit?"}, {"owner": {"reputation": 1671, "user_id": 2156436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cd0e887ba1e6bd815a0345f300779e1?s=128&d=identicon&r=PG", "display_name": "Yuri Golobokov", "link": "https://stackoverflow.com/users/2156436/yuri-golobokov"}, "edited": false, "score": 0, "creation_date": 1462350121, "post_id": 37021029, "comment_id": 61595082, "body": "you got Net::FTPTempError not Net::FTPPermError. You don&#39;t handle Net::FTPTempError like other special cases, it is handled in <code>rescue Exception =&gt; e</code>"}, {"owner": {"reputation": 1222, "user_id": 2923253, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b165c2d2b048038a90e7215735a71920?s=128&d=identicon&r=PG&f=1", "display_name": "nayiaw", "link": "https://stackoverflow.com/users/2923253/nayiaw"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1462350663, "post_id": 37021029, "comment_id": 61595446, "body": "@FrederickCheung To catch different types of error message to users so that they know what&#39;s the problem when they want to get the data, for example FTP authentication fail, file not found etc. The generic Exception rescue bit is to catch the potential bugs such as NilClass error."}, {"owner": {"reputation": 1222, "user_id": 2923253, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b165c2d2b048038a90e7215735a71920?s=128&d=identicon&r=PG&f=1", "display_name": "nayiaw", "link": "https://stackoverflow.com/users/2923253/nayiaw"}, "reply_to_user": {"reputation": 1671, "user_id": 2156436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cd0e887ba1e6bd815a0345f300779e1?s=128&d=identicon&r=PG", "display_name": "Yuri Golobokov", "link": "https://stackoverflow.com/users/2156436/yuri-golobokov"}, "edited": false, "score": 0, "creation_date": 1462350760, "post_id": 37021029, "comment_id": 61595498, "body": "@YuriyGolobokov oh good catch. Will update my question."}], "answers": [{"tags": [], "owner": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "is_accepted": true, "score": 1, "last_activity_date": 1462360600, "creation_date": 1462360600, "answer_id": 37026258, "question_id": 37021029, "link": "https://stackoverflow.com/questions/37021029/catching-same-exception-between-methods-classes/37026258#37026258", "title": "Catching Same Exception between Methods/ Classes", "body": "<p>First, never rescue from <code>Exception</code> (unless you are re-raising, and even then, ask yourself why you are doing it). Rescue from <code>StandardError</code> instead. Read about it <a href=\"https://robots.thoughtbot.com/rescue-standarderror-not-exception\" rel=\"nofollow\">here</a>.</p>\n\n<p>I would define <code>rescue</code>s for subclass-specific errors only in those subclasses so that that specific logic can be completely isolated to the subclass in question. You can do this as you suggested, by moving the specific error catching to the <code>get_data</code> method. But you might consider defining a new method so you can use the non-rescuing method (maybe just for debugging purposes, or from another controller where you want to handle errors differently). Here's one way I'd consider doing that:</p>\n\n<pre><code>class FtpFileReader &lt; FileReader\n  def get_data\n    get_data!\n  rescue Net::FTPPermErro =&gt; e\n    # return error message\n  end\n\n  def get_data!\n    # do stuff\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1222, "user_id": 2923253, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b165c2d2b048038a90e7215735a71920?s=128&d=identicon&r=PG&f=1", "display_name": "nayiaw", "link": "https://stackoverflow.com/users/2923253/nayiaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 503, "favorite_count": 0, "accepted_answer_id": 37026258, "answer_count": 1, "score": 0, "last_activity_date": 1462360600, "creation_date": 1462346569, "last_edit_date": 1462351076, "question_id": 37021029, "link": "https://stackoverflow.com/questions/37021029/catching-same-exception-between-methods-classes", "title": "Catching Same Exception between Methods/ Classes", "body": "<p>I'm calling a function to get data from types of source, so I created a superclass called <code>FileReader</code> and several classes, each for FTP, SFTP, Google Drive etc.. Each of them will inherit and implement a <code>get_data</code> function. </p>\n\n<p>I want to catch the exceptions returned by gems so that we don't report the outside factors as a bug report to Rollbar, so we rescue the exceptions and return proper message to the users when the file is not found, request timed out etc. Rescue block is on superclass because exceptions like SocketError, EOFError is common on all subclasses so I'm trying to keep my code dry.</p>\n\n<pre><code>class FileReader\n\n  def get_data\n    nil\n  end\n\n  def read\n    data = nil\n    begin\n      data = get_data\n    rescue EOFError =&gt; e\n      # return error message\n    rescue SocketError =&gt; e\n      # return error message\n    rescue OpenURI::HTTPError =&gt; e\n      # return error message\n    rescue Net::FTPPermError =&gt; e\n      # return error message\n    rescue Net::SFTP::StatusException =&gt; e\n      # return error message\n    rescue Errno::ETIMEDOUT =&gt; e\n      # return error message\n    rescue Exception =&gt; e\n      puts e.message\n      puts e.backtrace.join(\"\\n\")\n      Rollbar.error(e, :source =&gt; self)\n      # return error message\n    end\n    return data\n  end\n\nend\n</code></pre>\n\n<p>FtpFileReader inherits FileReader class to implement the <code>get_data</code> function.</p>\n\n<pre><code>class FtpFileReader &lt; FileReader\n\n  def get_data\n    # connect to ftp, get file, return data\n    # no begin and rescue block here\n  end\n\nend\n</code></pre>\n\n<p>and my <code>read</code> method is called from my Rails model.</p>\n\n<p>But catching such exceptions are tricky to me.\nThe calling method <code>read</code> is catching this exception, do <code>FileReader#get_data</code> method catches the same exception too if I implement a rescue block in it? </p>\n\n<p>Should I catch these exceptions in FileReader <code>get_data</code> method instead of <code>read</code>? Or should I catch these specific exceptions in subclasses itself and return the error message in each <code>get_data</code> method in subclass? Eventually the classes to catch will be bigger but duplicating EOFError, SocketError is not so dry. What will be the best way of handling exceptions in cases like this? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sinatra", "refile"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3720516"}, "is_accepted": false, "score": 0, "last_activity_date": 1462399601, "creation_date": 1462399601, "answer_id": 37038898, "question_id": 37021005, "link": "https://stackoverflow.com/questions/37021005/refile-gives-sinatranotfound-sinatranotfound-in-rails/37038898#37038898", "title": "Refile gives Sinatra::NotFound: Sinatra::NotFound in rails?", "body": "<p>I think what you're looking for is a 'catch all' route. Basically, if the url is mistyped your application will reroute to a default route:</p>\n\n<pre><code>get '/*' do\n  redirect \"http://whateverYouWant.com\"\nend\n</code></pre>\n"}], "owner": {"reputation": 861, "user_id": 3384741, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/b963cea8f41c91b8fb79eedccce04d80?s=128&d=identicon&r=PG&f=1", "display_name": "user3384741", "link": "https://stackoverflow.com/users/3384741/user3384741"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462399601, "creation_date": 1462346499, "question_id": 37021005, "link": "https://stackoverflow.com/questions/37021005/refile-gives-sinatranotfound-sinatranotfound-in-rails", "title": "Refile gives Sinatra::NotFound: Sinatra::NotFound in rails?", "body": "<p>I added refile for file uploading in my rails 4.2 app. But now I starting to see Sinatra::NotFound when a user mistypes an url.\nWhat can I do to prevent it so it displays the correct error page?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-app-engine", "google-cloud-platform", "gcloud"], "answers": [{"comments": [{"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 3, "creation_date": 1462413903, "post_id": 37034206, "comment_id": 61631688, "body": "I&#39;m looking at the logs but they dont really say anything. They are hard to understand what they mean. Plus when I use the filter to show critical errors in the logs there are no results"}], "tags": [], "owner": {"reputation": 15238, "user_id": 4922212, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-eotxc8Z9h68/AAAAAAAAAAI/AAAAAAAAAEY/yFvQ6DayB3M/photo.jpg?sz=128", "display_name": "Zachary Newman", "link": "https://stackoverflow.com/users/4922212/zachary-newman"}, "is_accepted": false, "score": 3, "last_activity_date": 1462382444, "creation_date": 1462382444, "answer_id": 37034206, "question_id": 37020840, "link": "https://stackoverflow.com/questions/37020840/google-cloud-ruby-error-response-13-timed-out-when-starting-vms-its-possib/37034206#37034206", "title": "Google cloud Ruby: Error Response: [13] Timed out when starting VMs. It&#39;s possible that the application code is unhealthy.", "body": "<p>The key part of the error message is \"It's possible that the application code is unhealthy.\": this means that your application isn't passing <a href=\"https://cloud.google.com/appengine/docs/flexible/go/how-instances-are-managed#health_checking\" rel=\"nofollow\">health checks</a>. Take a look at your application logs (in the <a href=\"https://console.cloud.google.com/\" rel=\"nofollow\">Cloud Console</a>) to help diagnose.</p>\n"}], "owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1462382444, "creation_date": 1462346000, "question_id": 37020840, "link": "https://stackoverflow.com/questions/37020840/google-cloud-ruby-error-response-13-timed-out-when-starting-vms-its-possib", "title": "Google cloud Ruby: Error Response: [13] Timed out when starting VMs. It&#39;s possible that the application code is unhealthy.", "body": "<p>I have a rails app im trying to deploy to the google cloud platform. It gets to a certain point and then times out. I ran it a few times but it gives the same error each time.</p>\n\n<pre><code>The push refers to a repository [us.gcr.io/site-1286/appengine/default.20160504t151124] (len: 1)\na12739e07554: Preparing\na12739e07554: Pushing\na12739e07554: Pushed\n6caf2d2e404b: Preparing\n6caf2d2e404b: Pushing\n6caf2d2e404b: Pushed\n9ae35a0da566: Preparing\n9ae35a0da566: Pushing\n9ae35a0da566: Pushed\n1e540bceeb97: Preparing\n1e540bceeb97: Pushing\n1e540bceeb97: Pushed\n2bed01823074: Preparing\n2bed01823074: Pushing\n2bed01823074: Pushed\nc27bdbcec1bd: Preparing\nc27bdbcec1bd: Pushing\nc27bdbcec1bd: Pushed\n0bfc47188461: Image already exists\nef866b7acceb: Image already exists\nb5af07c62198: Image already exists\nb3388c4bd40b: Image already exists\n437045486895: Image already exists\n58d9f8b0627d: Image already exists\nf8f0a08927ad: Image already exists\n502312a1defd: Image already exists\nf28dbda953c1: Image already exists\n096d9403d234: Image already exists\nlatest: digest: sha256:a467b3258f8bb820ccf12ec29282869902522c7c4d790e7290aed6c1d8f0d1f7 size: 69944\nDONE\n---------------------------------------------------------------------------------------------------------\n\nUpdating service [default]...failed.\nERROR: (gcloud.preview.app.deploy) Error Response: [13] Timed out when starting VMs.  It's possible that the application code is unhealthy.  (0/2 ready, 2 still deploying).\nRoberts-MBP:site Robert$ \n</code></pre>\n\n<p>At this point I don't know what needs to be changed. I have enables all the API's that I think I need to enable, the bucket is made and setup, the dependencies are on the server (well at the ones i'm aware of) , the SQL db is up and working with <code>rake db:setup</code> working fine. So I think my problem lies in my app.yaml file considering I dont really know everything that is supposed to go in there.</p>\n\n<p>app.yaml</p>\n\n<pre><code>runtime: custom\nvm: true\nentrypoint: bundle exec rackup -p 8080 -E production config.ru\nresources:\n  cpu: 0.5\n  memory_gb: 1.3\n  disk_size_gb: 10\n\nenv_variables:\n  GCLOUD_STORAGE_BUCKET: site-1286.appspot.com\n</code></pre>\n\n<p>Maybe its missing info or something I dont know. I do have 2 instances I have manually created hoping the app would deploy on them but it seems to create other instacnes when I run the deploy maybe thats the reason?</p>\n\n<p>I'm not too familiar with deploying to VM servers and I'm new to google cloud so I'm at a loss of what could be causing this error.</p>\n"}, {"tags": ["ruby", "unicode-escapes"], "answers": [{"comments": [{"owner": {"reputation": 10249, "user_id": 1329116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e58c33b56b00d4148810d427a04e21e0?s=128&d=identicon&r=PG", "display_name": "idleberg", "link": "https://stackoverflow.com/users/1329116/idleberg"}, "edited": false, "score": 0, "creation_date": 1462350403, "post_id": 37020881, "comment_id": 61595274, "body": "I tried figuring out how to use to output each line, not the full array. I would rather be able to concat strings to my output. This doesn&#39;t work <code>puts e.to_i(16).pack(&quot;U*&quot;)</code>. Any hints?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 10249, "user_id": 1329116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e58c33b56b00d4148810d427a04e21e0?s=128&d=identicon&r=PG", "display_name": "idleberg", "link": "https://stackoverflow.com/users/1329116/idleberg"}, "edited": false, "score": 0, "creation_date": 1462351836, "post_id": 37020881, "comment_id": 61596161, "body": "Since <code>pack</code> is defined on <code>Array</code>: <code>[&quot;1F600&quot;.to_i(16)].pack &#39;U&#39;</code>."}, {"owner": {"reputation": 10249, "user_id": 1329116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e58c33b56b00d4148810d427a04e21e0?s=128&d=identicon&r=PG", "display_name": "idleberg", "link": "https://stackoverflow.com/users/1329116/idleberg"}, "edited": false, "score": 0, "creation_date": 1462353694, "post_id": 37020881, "comment_id": 61597440, "body": "Thank you so much!"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 5, "last_activity_date": 1462346142, "creation_date": 1462346142, "answer_id": 37020881, "question_id": 37020444, "link": "https://stackoverflow.com/questions/37020444/print-unicode-escape-codes-from-variable/37020881#37020881", "title": "Print Unicode escape codes from variable", "body": "<p>One can not use <code>\\u</code> along with string interpolation, since <code>\\u</code> takes precedence. What one might do, is to <a href=\"http://ruby-doc.org/core-2.3.1/Array.html#method-i-pack\" rel=\"noreferrer\"><code>Array#pack</code></a> an array of integers:</p>\n\n<pre><code>\u25b6 data.map { |e| e.to_i(16) }.pack 'U*'\n#\u21d2 \"\ud83d\ude00\ud83d\udc76\ud83d\udc74\"\n</code></pre>\n"}], "owner": {"reputation": 10249, "user_id": 1329116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e58c33b56b00d4148810d427a04e21e0?s=128&d=identicon&r=PG", "display_name": "idleberg", "link": "https://stackoverflow.com/users/1329116/idleberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "accepted_answer_id": 37020881, "answer_count": 1, "score": 1, "last_activity_date": 1462346142, "creation_date": 1462344612, "last_edit_date": 1462346066, "question_id": 37020444, "link": "https://stackoverflow.com/questions/37020444/print-unicode-escape-codes-from-variable", "title": "Print Unicode escape codes from variable", "body": "<p>I have a list of Unicode character codes that I would like to output with <code>rumoji</code>. Here's the code I'm using to iterate over my data. </p>\n\n<pre><code>require \"rumoji\"\n\n# this works\nputs Rumoji.decode(\"\\u{1F600}\")\n\n# feed some data\ndata = [\n    \"1F600\",\n    \"1F476\",\n    \"1F474\"\n]\n\ndata.each do |line|\n    # this doesn't work\n    puts Rumoji.decode(\"\\u{#{line}}\")\n    puts Rumoji.decode(\"\\u{\" + line + \"}\")\nend\n</code></pre>\n\n<p>I'm not sure how I can use variable names inside the escaped string.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 338, "user_id": 3392302, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zHY3O.jpg?s=128&g=1", "display_name": "Veeru", "link": "https://stackoverflow.com/users/3392302/veeru"}, "edited": false, "score": 0, "creation_date": 1462344355, "post_id": 37020173, "comment_id": 61591654, "body": "you can&#39;t access module function without self"}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 338, "user_id": 3392302, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/zHY3O.jpg?s=128&g=1", "display_name": "Veeru", "link": "https://stackoverflow.com/users/3392302/veeru"}, "edited": false, "score": 0, "creation_date": 1462345786, "post_id": 37020173, "comment_id": 61592472, "body": "@Veeru Yes, you can.  If the method is defined in the module to be an instance method (i.e. without <code>self.</code> preceding it) then inside the class that includes the module it can be accessed as if it were an instance variable, that is, without <code>self</code>.  I think what the OP means is that he does not want to <i>define</i> the method with <code>self</code>.  But then I want to ask the OP, why is it that you don&#39;t want to define the method with <code>self.</code>?  If you override the method in the class, you&#39;ll <i>have to</i> refer to it in some special way."}], "answers": [{"comments": [{"owner": {"reputation": 4001, "user_id": 599765, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/836ed996b63a770fb92cbe40ea29586a?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Schild", "link": "https://stackoverflow.com/users/599765/andr%c3%a9-schild"}, "edited": false, "score": 0, "creation_date": 1462349965, "post_id": 37020381, "comment_id": 61594968, "body": "Please also describe in words what the code is supposed to do, so the answer is simpler to understand"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1462351219, "post_id": 37020381, "comment_id": 61595795, "body": "Although this code may answer the question, providing additional context regarding <i>why</i> and/or <i>how</i> it answers the question would significantly improve its long-term value.  Please <a href=\"https://stackoverflow.com/posts/37020381/edit\">edit</a> your answer to add some explanation."}], "tags": [], "owner": {"reputation": 821, "user_id": 1166593, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd1b53c45386ed7ac737bdd65b1f9fe2?s=128&d=identicon&r=PG", "display_name": "AlexN", "link": "https://stackoverflow.com/users/1166593/alexn"}, "is_accepted": false, "score": 0, "last_activity_date": 1462354420, "last_edit_date": 1462354420, "creation_date": 1462344358, "answer_id": 37020381, "question_id": 37020173, "link": "https://stackoverflow.com/questions/37020173/access-module-functions-in-ruby/37020381#37020381", "title": "Access module functions in Ruby", "body": "<p>If you are overwriting a instance method of a module within your class, you can call this method using <code>super</code>.</p>\n\n<pre><code>module Base\n  def Hello\n    puts \"Hello\"\n  end\nend \n\nclass Top\n    include Base\n\n   def Hello\n     if p == 1\n       puts \"hello from top\"\n     else\n       super\n     end\n   end\n end\n\n t = Top.new\n t.Hello # =&gt; \"Hello\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1462344394, "creation_date": 1462344394, "answer_id": 37020389, "question_id": 37020173, "link": "https://stackoverflow.com/questions/37020173/access-module-functions-in-ruby/37020389#37020389", "title": "Access module functions in Ruby", "body": "<p>You demonstrated the complete misunderstanding of OOP concepts. And, BTW, the method names in Ruby are not to be started with capital letter.</p>\n\n<p>One can not just call an arbitrary method somewhere in the class hierarchy. Whether this was possible, the whole OOP would make absolutely no sense.</p>\n\n<p>One might call the <code>super</code> method <em>from within this method</em>:</p>\n\n<pre><code>module Base\n  def hello\n    puts \"Hello\"\n  end \nend\n\nclass Top \n  include Base\n\n  def initialize p\n    @p = p \n  end \n  def hello\n    if @p == 1\n      puts \"hello from top\"\n    else\n      super\n    end \n  end \n  def hi\n    hello\n  end \nend\n\nTop.new(1).hi\n#\u21d2 hello from top\nTop.new(2).hi\n#\u21d2 Hello\n</code></pre>\n\n<p>or, one might declare the <em>module function</em>, a.k.a. static function and call it from everywhere:</p>\n\n<pre><code>module Base\n  def self.hello\n    puts \"Hello\"\n  end\nend\n\nclass Top\n  # NOT NEEDED include Base\n  def hello\n    puts \"hello from top\"\n  end\n\n  def hi\n    if p == 1\n      hello\n    else\n      Base.hello\n    end\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1462345390, "post_id": 37020467, "comment_id": 61592237, "body": "It&#39;s redundant in this case, as is use of <code>module_function</code> itself, since in the example, the sole method is used only as a module method (it could have been defined simply as <code>self.hello</code>).  As for copying answers, there were no answers posted when I started working on my answer. In addition, you did not include the <code>module_function</code> approach creating both instance and module methods. BTW, your tone to both the OP and me is rather harsh."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1462345604, "post_id": 37020467, "comment_id": 61592356, "body": "\u201cyou did not include the <code>module_function</code> approach creating both instance and module methods\u201d\u2014<code>module_function</code> is just a syntactic sugar for <code>self.</code>. My code does not create <i>instance</i> function, it behaves exactly as yours. If you think, the tone is harsh, feel free to flag anything for moderator attention."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1462346766, "post_id": 37020467, "comment_id": 61592971, "body": "@mudasobwa This is not correct.  I just posted a SO question and answer explaining this, at <a href=\"http://stackoverflow.com/questions/37021084/is-defining-a-module-function-with-module-function-the-same-as-defining-it-wit/37021085#37021085\" title=\"is defining a module function with module function the same as defining it wit\">stackoverflow.com/questions/37021084/&hellip;</a>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1462347149, "post_id": 37020467, "comment_id": 61593186, "body": "I did not understand, what you have tried to explain. I never said <code>self.foo</code> creates an instance method, furthermore I said exactly an opposite (you might re-read my previous comment.) Since you never used <code>BaseModule#hello</code> as instance function in your example, I made an assumption the goal was to create the module function. That simple."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1462347365, "post_id": 37020467, "comment_id": 61593320, "body": "You said &quot;My code does not create instance function, it behaves exactly as yours.&quot;  My code <i>does</i> create an instance function, it creates both. Anyway, I think we understand each other now.  Thank you for your time and effort on SO, I see by your rep that you have done a lot here."}], "tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": false, "score": 1, "last_activity_date": 1462344730, "creation_date": 1462344730, "answer_id": 37020467, "question_id": 37020173, "link": "https://stackoverflow.com/questions/37020173/access-module-functions-in-ruby/37020467#37020467", "title": "Access module functions in Ruby", "body": "<p>One way you can do this is to make the module's method a module method rather than an instance method.  If you precede the method definition with <code>module_function</code>, then <em>both</em> a module and an instance method will be created.  This will enable you to access the module method using the module's name (in this case, <code>BaseModule.hello</code>).  I've trimmed your question code to the essentials and illustrated how that would work:</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nmodule BaseModule\n\n    module_function\n\n    def hello\n        puts 'Hello from BaseModule'\n    end\nend\n\n\nclass MyClass\n  include BaseModule\n\n  def hello\n    puts 'Hello from MyClass'\n  end\n\n  def module_hello\n    BaseModule.hello\n  end\nend\n\nMyClass.new.hello         # Hello from MyClass\nMyClass.new.module_hello  # Hello from BaseModule\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 766, "user_id": 1488591, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4373e8b5ebf359cb601120389378406a?s=128&d=identicon&r=PG", "display_name": "kunashir", "link": "https://stackoverflow.com/users/1488591/kunashir"}, "is_accepted": false, "score": 0, "last_activity_date": 1462344929, "creation_date": 1462344929, "answer_id": 37020527, "question_id": 37020173, "link": "https://stackoverflow.com/questions/37020173/access-module-functions-in-ruby/37020527#37020527", "title": "Access module functions in Ruby", "body": "<p>You didn't understand meaning of <code>include</code>!\nWhen you include a module to  a class methods from a module add  to a object inheritance chain. In this way You can call that methods like own.</p>\n\n<pre><code>module A\n def hello\n   p 'Hello from A'\n end\nend\nclass MyClass\n include A\nend\n\n2.2.2 :010 &gt; mm = MyClass.new\n=&gt; #&lt;MyClass:0x00000000ecaa68&gt; \n2.2.2 :011 &gt; mm.hello\n\"Hello from A\"\n</code></pre>\n\n<p>You can use next in your case:</p>\n\n<pre><code>module B\n def self.hello\n   p 'Hello from B'\n end\nend\nclass MyClass\n def my_hello\n  B.hello #direct call from module B\n end\nend\n</code></pre>\n\n<p>And one more note: Don't use capitalized name for a method</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2851669"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 671, "favorite_count": 0, "accepted_answer_id": 37020389, "answer_count": 4, "score": 1, "last_activity_date": 1462354420, "creation_date": 1462343705, "last_edit_date": 1462347393, "question_id": 37020173, "link": "https://stackoverflow.com/questions/37020173/access-module-functions-in-ruby", "title": "Access module functions in Ruby", "body": "<p>I am trying to access a module function that I have overriden in the class. </p>\n\n<pre><code>module Base\n    def Hello\n        puts \"Hello\"\n    end\nend\n\nclass Top\n\n  include Base\n\n  def Hello\n    puts \"hello from top\"\n  end\n\n  def Hi\n    if p == 1\n        Hello\n    else\n        Base::Hello\n    end\n  end\nend\n</code></pre>\n\n<p>But I get the following error - </p>\n\n<pre><code>Error:  undefined method `Hello' for Base:Module\n</code></pre>\n\n<p>Is there any way I can access the module function without using self.Hello in function definition.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 966, "user_id": 5350659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63535c11d66f71640d7a5a558b351d11?s=128&d=identicon&r=PG&f=1", "display_name": "Pitabas Prathal", "link": "https://stackoverflow.com/users/5350659/pitabas-prathal"}, "reply_to_user": {"reputation": 4766, "user_id": 353130, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/6b71251b5261e1fe3142bf620e573724?s=128&d=identicon&r=PG", "display_name": "Giuseppe", "link": "https://stackoverflow.com/users/353130/giuseppe"}, "edited": false, "score": 0, "creation_date": 1462358358, "post_id": 37020330, "comment_id": 61600775, "body": "it&#39;s working on my console can you post the error what you get after execute it"}, {"owner": {"reputation": 4766, "user_id": 353130, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/6b71251b5261e1fe3142bf620e573724?s=128&d=identicon&r=PG", "display_name": "Giuseppe", "link": "https://stackoverflow.com/users/353130/giuseppe"}, "edited": false, "score": 0, "creation_date": 1472199210, "post_id": 37020330, "comment_id": 65666080, "body": "please see my own answer"}], "tags": [], "owner": {"reputation": 966, "user_id": 5350659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63535c11d66f71640d7a5a558b351d11?s=128&d=identicon&r=PG&f=1", "display_name": "Pitabas Prathal", "link": "https://stackoverflow.com/users/5350659/pitabas-prathal"}, "is_accepted": false, "score": 2, "last_activity_date": 1462344205, "creation_date": 1462344205, "answer_id": 37020330, "question_id": 37020161, "link": "https://stackoverflow.com/questions/37020161/activerecord-calculations-on-subsets-or-records/37020330#37020330", "title": "ActiveRecord calculations on subsets or records", "body": "<p>Try this:</p>\n\n<pre><code> Game.order('points desc').limit(20).sum(:points)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4766, "user_id": 353130, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/6b71251b5261e1fe3142bf620e573724?s=128&d=identicon&r=PG", "display_name": "Giuseppe", "link": "https://stackoverflow.com/users/353130/giuseppe"}, "edited": false, "score": 0, "creation_date": 1462353051, "post_id": 37021116, "comment_id": 61596955, "body": "This is equivalent to what I wrote and it does not answer the question, as it uses ruby to perform the calculation."}], "tags": [], "owner": {"reputation": 459, "user_id": 5810899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fjGwDZDO7Zg/AAAAAAAAAAI/AAAAAAAAAPo/Ldy2L5fEqpY/photo.jpg?sz=128", "display_name": "Vaibhav Dhoke", "link": "https://stackoverflow.com/users/5810899/vaibhav-dhoke"}, "is_accepted": false, "score": 0, "last_activity_date": 1462346773, "creation_date": 1462346773, "answer_id": 37021116, "question_id": 37020161, "link": "https://stackoverflow.com/questions/37020161/activerecord-calculations-on-subsets-or-records/37021116#37021116", "title": "ActiveRecord calculations on subsets or records", "body": "<p>The limit() fails in the above answer</p>\n\n<p><code>Game.order('point desc').limit(2).pluck(:point).inject(:+)</code></p>\n"}, {"tags": [], "owner": {"reputation": 88, "user_id": 4218742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9a81b8f60bcdb73eab3b82a63fa6d900?s=128&d=identicon&r=PG&f=1", "display_name": "david", "link": "https://stackoverflow.com/users/4218742/david"}, "is_accepted": false, "score": -1, "last_activity_date": 1462347860, "creation_date": 1462347860, "answer_id": 37021496, "question_id": 37020161, "link": "https://stackoverflow.com/questions/37020161/activerecord-calculations-on-subsets-or-records/37021496#37021496", "title": "ActiveRecord calculations on subsets or records", "body": "<p>Do note that there is no point in ordering the results if your only interested in computing the sum hence then answer below would suffice</p>\n\n<p>Game.limit(10).sum(: points)</p>\n"}, {"comments": [{"owner": {"reputation": 178, "user_id": 1101017, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af48b3dddc0617ae1feca1d5488f0e42?s=128&d=identicon&r=PG", "display_name": "appleII717", "link": "https://stackoverflow.com/users/1101017/appleii717"}, "edited": false, "score": 0, "creation_date": 1494762669, "post_id": 39152351, "comment_id": 74957242, "body": "I asked about the same question yesterday <a href=\"http://stackoverflow.com/questions/43955310/rails-sum-on-associationrelation-attribute-is-incorrect-if-association-has-limit\" title=\"rails sum on associationrelation attribute is incorrect if association has limit\">stackoverflow.com/questions/43955310/&hellip;</a>. Even the &#39;from&#39; attempt is not working in rails 5, at least with a relation or PG. Guess there is not an answer, just use <code>relation.pluck(attr).sum</code>"}], "tags": [], "owner": {"reputation": 4766, "user_id": 353130, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/6b71251b5261e1fe3142bf620e573724?s=128&d=identicon&r=PG", "display_name": "Giuseppe", "link": "https://stackoverflow.com/users/353130/giuseppe"}, "is_accepted": true, "score": 0, "last_activity_date": 1495896187, "last_edit_date": 1495896187, "creation_date": 1472149558, "answer_id": 39152351, "question_id": 37020161, "link": "https://stackoverflow.com/questions/37020161/activerecord-calculations-on-subsets-or-records/39152351#39152351", "title": "ActiveRecord calculations on subsets or records", "body": "<p>I am going to answer my own question, but will gladly award a better solution.</p>\n\n<p>The <code>sum</code> function really only takes one argument, and while AR 4.x used to simply ignore any extra args, the new AR 5.0.0 raises an error. The original attempt was indeed naive.</p>\n\n<p>Following @pitabas' suggestion, I then tried:</p>\n\n<pre><code>Game.order('points desc').limit(20).sum(:points)\nSELECT SUM(\"games\".\"points\") FROM \"games\" LIMIT ?  [[\"LIMIT\", 20]]\n</code></pre>\n\n<p>As you can tell from the SQL constructed by AR, this does not work either, because the <code>LIMIT</code> clause acts on the result of the query, which is a single value. Furthermore, the <code>ORDER</code> clause is ignored altogether. The result of the above expression is the total sum of the points column, for all records.</p>\n\n<p>An SQL query that actually works is something like:</p>\n\n<pre><code>SELECT SUM(points) FROM (SELECT points FROM games ORDER BY points DESC LIMIT 20)\n</code></pre>\n\n<p>The closest I got to that is the following:</p>\n\n<pre><code>sq = Game.order('points desc').limit(20)\nGame.from(sq).sum('\"points\"')\n</code></pre>\n\n<p>which yields:</p>\n\n<pre><code>SELECT SUM(\"points\") FROM (SELECT  \"games\".* FROM \"games\" ORDER BY points desc LIMIT ?) subquery  [[\"LIMIT\", 20]]\n</code></pre>\n\n<p>Hack: note the double set of quotes around the <code>points</code>. That's how I managed to enforce a literal interpretation of the <code>sum</code> argument. Without them, the query raises a \"no such column\" error.</p>\n"}], "owner": {"reputation": 4766, "user_id": 353130, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/6b71251b5261e1fe3142bf620e573724?s=128&d=identicon&r=PG", "display_name": "Giuseppe", "link": "https://stackoverflow.com/users/353130/giuseppe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 39152351, "answer_count": 4, "score": 0, "last_activity_date": 1495896187, "creation_date": 1462343653, "question_id": 37020161, "link": "https://stackoverflow.com/questions/37020161/activerecord-calculations-on-subsets-or-records", "title": "ActiveRecord calculations on subsets or records", "body": "<p>I have a <code>Game</code> model with a <code>points</code> attribute, and I want to compute the sum of the top 20 scores.</p>\n\n<p>I can pluck the points and have ruby compute the sum, as in:</p>\n\n<pre><code>Game.order('points desc').limit(20).pluck(:points).sum\n</code></pre>\n\n<p>But I am curious as to whether there is a straightforward way to have AR produce an SQL aggregate calculation to accomplish the same. The following naive attempt does not work:</p>\n\n<pre><code>Game.sum(:points, order: 'points desc', limit: 20)\nSELECT SUM(`games`.`points`) FROM `games`\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["ios", "ruby-on-rails", "ruby", "swift2", "xcode7"], "answers": [{"tags": [], "owner": {"reputation": 8125, "user_id": 5634556, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xn7g3.jpg?s=128&g=1", "display_name": "Sahil", "link": "https://stackoverflow.com/users/5634556/sahil"}, "is_accepted": true, "score": 0, "last_activity_date": 1462344910, "creation_date": 1462344910, "answer_id": 37020521, "question_id": 37020081, "link": "https://stackoverflow.com/questions/37020081/swift-1-2-to-swift-2-objective-c-method-conflicts-with-optional-requirement-met/37020521#37020521", "title": "Swift 1.2 to swift 2: Objective C method conflicts with optional requirement method", "body": "<p>replace </p>\n\n<pre><code>func imagePickerController(picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [NSObject : AnyObject]) { }\n</code></pre>\n\n<p>with </p>\n\n<pre><code>func imagePickerController(picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : AnyObject]) { }\n</code></pre>\n"}], "owner": {"reputation": 417, "user_id": 6197515, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c5629434c6fe348ac9a2203327a33e25?s=128&d=identicon&r=PG&f=1", "display_name": "noobdev", "link": "https://stackoverflow.com/users/6197515/noobdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "closed_date": 1462913428, "accepted_answer_id": 37020521, "answer_count": 1, "score": 0, "last_activity_date": 1462344910, "creation_date": 1462343363, "last_edit_date": 1462344370, "question_id": 37020081, "link": "https://stackoverflow.com/questions/37020081/swift-1-2-to-swift-2-objective-c-method-conflicts-with-optional-requirement-met", "closed_reason": "Not suitable for this site", "title": "Swift 1.2 to swift 2: Objective C method conflicts with optional requirement method", "body": "<p>I'm trying to develop an app that accesses the phone's camera based on a tutorial I found online (<a href=\"https://www.raywenderlich.com/85528/user-accounts-ios-ruby-rails-swift#next_section\" rel=\"nofollow\">https://www.raywenderlich.com/85528/user-accounts-ios-ruby-rails-swift#next_section</a>). However my camera extension at the imagePickerController function keeps throwing up this error:</p>\n\n<blockquote>\n  <p>Objective-C method '<code>imagePickerController: didFinishPickingMediaWithInfo:</code>' provided by method '<code>imagePickerController(_:didFinishPickingMediaWithInfo:)</code>' conflicts with optional requirement method <code>imagePickerController(_:didFinishPickingMediaWithInfo:)</code></p>\n</blockquote>\n\n<p>This is the code where the error was thrown</p>\n\n<pre><code>func imagePickerController(picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [NSObject : AnyObject]) {}\n</code></pre>\n\n<p>The affected code block is as shown below</p>\n\n<pre><code>// Camera Extension\nextension SelfieCollectionViewController : UINavigationControllerDelegate,     UIImagePickerControllerDelegate {\nfunc displayCameraControl() {\nvar imagePickerController = UIImagePickerController()\nimagePickerController.delegate = self\nimagePickerController.allowsEditing = true\n\nif UIImagePickerController.isSourceTypeAvailable(UIImagePickerControllerSourceType.Camera) {\n  imagePickerController.sourceType = UIImagePickerControllerSourceType.Camera\n\n  if UIImagePickerController.isCameraDeviceAvailable(UIImagePickerControllerCameraDevice.Front) {\n    imagePickerController.cameraDevice = UIImagePickerControllerCameraDevice.Front\n  } else {\n    imagePickerController.cameraDevice = UIImagePickerControllerCameraDevice.Rear\n  }\n} else {\n  imagePickerController.sourceType = UIImagePickerControllerSourceType.PhotoLibrary\n}\n\nself.presentViewController(imagePickerController, animated: true, completion: nil)\n}\n\nfunc imagePickerController(picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [NSObject : AnyObject]) {\n}\n}\n</code></pre>\n\n<p>The full code block can be found here (<a href=\"https://codeshare.io/UurWD\" rel=\"nofollow\">https://codeshare.io/UurWD</a>) at line 111.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 766, "user_id": 1488591, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4373e8b5ebf359cb601120389378406a?s=128&d=identicon&r=PG", "display_name": "kunashir", "link": "https://stackoverflow.com/users/1488591/kunashir"}, "edited": false, "score": 0, "creation_date": 1462343514, "post_id": 37020068, "comment_id": 61591193, "body": "Maybe I didn&#39;t understand your post, but why you don&#39;t try next: <code>reasons.joins(:project).where(&quot;reasons.updated_at &gt; ?&quot;, DateTime.parse(updated_at))</code> ?"}, {"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1462343676, "post_id": 37020068, "comment_id": 61591275, "body": "<code>reasons = reasons.joins(:project).where(&quot;projects.updated_at &gt; ? AND reasons.updated_at &gt; ?&quot;, DateTime.parse(updated_at))</code> - try this as where clause should have condition to check with <code>updated_at</code> attributes of both <code>projects</code> and <code>reasons</code> table."}, {"owner": {"reputation": 1924, "user_id": 743663, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d8fae52dadf258b81cf53d014c331cf3?s=128&d=identicon&r=PG", "display_name": "Non Umemoto", "link": "https://stackoverflow.com/users/743663/non-umemoto"}, "edited": false, "score": 0, "creation_date": 1462344498, "post_id": 37020068, "comment_id": 61591723, "body": "That was it!  Thank you for that both of you."}], "answers": [{"tags": [], "owner": {"reputation": 1924, "user_id": 743663, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d8fae52dadf258b81cf53d014c331cf3?s=128&d=identicon&r=PG", "display_name": "Non Umemoto", "link": "https://stackoverflow.com/users/743663/non-umemoto"}, "is_accepted": false, "score": 0, "last_activity_date": 1462344560, "creation_date": 1462344560, "answer_id": 37020426, "question_id": 37020068, "link": "https://stackoverflow.com/questions/37020068/ruby-on-rails-where-query-with-relations-and-updated-at-compare/37020426#37020426", "title": "Ruby on Rails where query with relations and updated_at compare", "body": "<p>It was just changing to reasons.updated_at, thanks!</p>\n\n<pre><code>reasons = reasons.joins(:project).where(\"reasons.updated_at &gt; ?\", DateTime.parse(updated_at))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2278, "user_id": 2244501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/231d8805a81cf94c09ff60cdba6e4029?s=128&d=identicon&r=PG", "display_name": "retgoat", "link": "https://stackoverflow.com/users/2244501/retgoat"}, "is_accepted": true, "score": 2, "last_activity_date": 1462344582, "creation_date": 1462344582, "answer_id": 37020433, "question_id": 37020068, "link": "https://stackoverflow.com/questions/37020068/ruby-on-rails-where-query-with-relations-and-updated-at-compare/37020433#37020433", "title": "Ruby on Rails where query with relations and updated_at compare", "body": "<p>You fetching <code>projects.updated_at</code>, but if I understood you right you need to fetch <code>reasons.updated_at</code></p>\n\n<pre><code>reasons = reasons.joins(:project).where(\"reasons.updated_at &gt; ?\", DateTime.parse(updated_at))\n</code></pre>\n\n<p>produses that output for me</p>\n\n<pre><code>GET http://localhost:3000/reasons/index?updated_at=2016-05-04T06:43:19.280Z\n\n[\n    {\n        \"id\": 2,\n        \"name\": \"R2\",\n        \"project_id\": 3,\n        \"created_at\": \"2016-05-04T06:43:19.280Z\",\n        \"updated_at\": \"2016-05-04T06:43:19.280Z\",\n        \"deleted\": false\n    },\n    {\n        \"id\": 3,\n        \"name\": \"R3\",\n        \"project_id\": 3,\n        \"created_at\": \"2016-05-04T06:43:25.895Z\",\n        \"updated_at\": \"2016-05-04T06:43:25.895Z\",\n        \"deleted\": false\n    }\n]\n</code></pre>\n\n<p>And without any filter</p>\n\n<pre><code>GET http://localhost:3000/reasons/index\n\n[\n    {\n        \"id\": 1,\n        \"name\": \"R1\",\n        \"project_id\": 3,\n        \"created_at\": \"2016-05-04T06:43:11.044Z\",\n        \"updated_at\": \"2016-05-04T06:43:11.044Z\",\n        \"deleted\": false\n    },\n    {\n        \"id\": 2,\n        \"name\": \"R2\",\n        \"project_id\": 3,\n        \"created_at\": \"2016-05-04T06:43:19.280Z\",\n        \"updated_at\": \"2016-05-04T06:43:19.280Z\",\n        \"deleted\": false\n    },\n    {\n        \"id\": 3,\n        \"name\": \"R3\",\n        \"project_id\": 3,\n        \"created_at\": \"2016-05-04T06:43:25.895Z\",\n        \"updated_at\": \"2016-05-04T06:43:25.895Z\",\n        \"deleted\": false\n    }\n]\n</code></pre>\n"}], "owner": {"reputation": 1924, "user_id": 743663, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d8fae52dadf258b81cf53d014c331cf3?s=128&d=identicon&r=PG", "display_name": "Non Umemoto", "link": "https://stackoverflow.com/users/743663/non-umemoto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 37020433, "answer_count": 2, "score": 0, "last_activity_date": 1462344582, "creation_date": 1462343291, "question_id": 37020068, "link": "https://stackoverflow.com/questions/37020068/ruby-on-rails-where-query-with-relations-and-updated-at-compare", "title": "Ruby on Rails where query with relations and updated_at compare", "body": "<p>I am trying to use where query with relationships and updated_at compare.</p>\n\n<p>When I send this query with updated_at params, I want to fetch only the latest reasons filtered by updated_at date, but it filters with project's updated_at, not by reasons updated_at.</p>\n\n<p>How can I fix this to get reasons data with updated_at filter?</p>\n\n<p>@Getting reasons with updated_at filter</p>\n\n<pre><code>https://server.com/api/v1/entries?updated_at=2016-05-02T01:12:57.204Z\n</code></pre>\n\n<p>@Model</p>\n\n<pre><code>User\n  has_many :projects\n  has_many :reasons, through: :projects\n\nProject\n  belongs_to :user\n  has_many :reasons\n\nReasons\n  belongs_to :project\n</code></pre>\n\n<p>@Reasons Controllers</p>\n\n<pre><code>  # GET /reasons\n  def index\n    reasons     = current_user.reasons\n    updated_at  = params[:updated_at]\n\n    # Filter with updated_at for reloading from mobile app\n    if updated_at.present?\n\n      # This is my first try, but it shows error because of relations\n      # reasons = reasons.where(\"updated_at &gt; ?\", DateTime.parse(updated_at))      \n\n      # This shows reasons data, but it only compares updated_at in Project data, not reasons data...\n      reasons = reasons.joins(:project).where(\"projects.updated_at &gt; ?\", DateTime.parse(updated_at))\n\n    # Get all non deleted objects when logging in from mobile app\n    else\n      reasons = reasons.where(deleted: false)\n    end\n\n    render json: reasons\n  end \n</code></pre>\n"}, {"tags": ["ruby", "cdn"], "comments": [{"owner": {"reputation": 1971, "user_id": 3419341, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ameEV.jpg?s=128&g=1", "display_name": "anusha", "link": "https://stackoverflow.com/users/3419341/anusha"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1462343278, "post_id": 37019945, "comment_id": 61591081, "body": "@spickermann I am using one class to generate dynamic urls for my js, css and image files. So in production.rb I am creating object  for that class. In views and all is working fine. but in emails it is not serving. I am not getting any link to that image in email. empty image tag is showing"}, {"owner": {"reputation": 1971, "user_id": 3419341, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ameEV.jpg?s=128&g=1", "display_name": "anusha", "link": "https://stackoverflow.com/users/3419341/anusha"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1462343361, "post_id": 37019945, "comment_id": 61591118, "body": "@spickermann: <code>&lt;img alt=&quot;Logo&quot; height=&quot;100%&quot; src=&quot;&quot; width=&quot;100%&quot; class=&quot;CToWUd&quot;&gt;</code> like that I am getting image in email"}, {"owner": {"reputation": 1971, "user_id": 3419341, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ameEV.jpg?s=128&g=1", "display_name": "anusha", "link": "https://stackoverflow.com/users/3419341/anusha"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1462429869, "post_id": 37019945, "comment_id": 61636410, "body": "@spickermann I am calling that class in prodcution.rb  like suppose that class name is AssetsCDN, I am using this: <code>config.action_mailer.asset_host = AssetsCDN.new</code>. In that we are generating URLS with paths of images"}, {"owner": {"reputation": 1971, "user_id": 3419341, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ameEV.jpg?s=128&g=1", "display_name": "anusha", "link": "https://stackoverflow.com/users/3419341/anusha"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1462432399, "post_id": 37019945, "comment_id": 61637663, "body": "@spickermann I added code please help me out."}, {"owner": {"reputation": 1971, "user_id": 3419341, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ameEV.jpg?s=128&g=1", "display_name": "anusha", "link": "https://stackoverflow.com/users/3419341/anusha"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1462439108, "post_id": 37019945, "comment_id": 61641062, "body": "@spickermann Hey Man!, You made my day Thank you so much It worked like a charm. Please post it as answer I will accept it."}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1462439517, "creation_date": 1462439517, "answer_id": 37046695, "question_id": 37019945, "link": "https://stackoverflow.com/questions/37019945/images-not-loading-in-emails-with-cdn-hosts-url-rails/37046695#37046695", "title": "Images not loading in emails with CDN Hosts url rails", "body": "<p><code>action_mailer.assets_host</code> doesn't accept protocol relative URLs. Instead URLs have to start with with a protocol like <code>http://</code> or <code>https://</code>. </p>\n\n<p>This makes kind of sense, because usually emails aren't opened in a browser and email clients are not able to inherit the protocol from a patent html document like browsers do.</p>\n"}], "owner": {"reputation": 1971, "user_id": 3419341, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ameEV.jpg?s=128&g=1", "display_name": "anusha", "link": "https://stackoverflow.com/users/3419341/anusha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "accepted_answer_id": 37046695, "answer_count": 1, "score": 2, "last_activity_date": 1462439517, "creation_date": 1462342807, "last_edit_date": 1462432347, "question_id": 37019945, "link": "https://stackoverflow.com/questions/37019945/images-not-loading-in-emails-with-cdn-hosts-url-rails", "title": "Images not loading in emails with CDN Hosts url rails", "body": "<p>I recently moved all my app assets to CDN and everything is working fine. All images are loading in views. But my problem is my images are not loading in emails which I am sending from my application. I have specified <code>my CDN Path</code> in <code>production.rb</code> file also  but still not working. When I inspect that image in email, I didn't even getting <code>src</code> for that image.</p>\n\n<p>I am loading my images using <code>image_tag</code>.</p>\n\n<p>Can anyone please help me on this:</p>\n\n<p><strong>Production.rb:</strong></p>\n\n<pre><code>  config.action_controller.asset_host = AssetsCdn.new\n  config.action_mailer.asset_host = AssetsCdn.new\n\n\n config.action_mailer.default_url_options = { :host =&gt; 'localhost', :protocol =&gt; 'http' } \nconfig.action_mailer.perform_deliveries = true   config.action_mailer.raise_delivery_errors = false   config.action_mailer.default :charset =&gt; \"utf-8\"  \nconfig.action_mailer.delivery_method = :smtp #:mailhopper\n</code></pre>\n\n<p><strong>AssetsCdn Class:</strong></p>\n\n<pre><code>require 'zlib'\nclass AssetsCdn\n  CSS_CDN   = \"cdn-css\"\n  CSS_CDN_0 = \"cdn-css0\"\n  CSS_CDN_1 = \"cdn-css1\"\n  CSS_CDN_2 = \"cdn-css2\"\n\n  JS_CDN    = \"cdn-js\"  \n  JS_CDN_0  = \"cdn-js0\"\n  JS_CDN_1  = \"cdn-js1\"\n  JS_CDN_2  = \"cdn-js2\"  \n\n  ASSETS_CDN   = \"cdn-assets\"\n  ASSETS_CDN_0 = \"cdn-assets0\"\n  ASSETS_CDN_1 = \"cdn-assets1\"\n  ASSETS_CDN_2 = \"cdn-assets2\"\n  ALL = [CSS_CDN_0, CSS_CDN_1, CSS_CDN_2, JS_CDN_0, JS_CDN_1, JS_CDN_2, ASSETS_CDN_0, ASSETS_CDN_1, ASSETS_CDN_2]\n\n  def call(source, request = nil)\n    cdn_index = Zlib.crc32(source) % 3\n    if source.ends_with?('.css')\n      url(\"#{CSS_CDN}#{cdn_index}\", request)\n    elsif source.ends_with?('.js')\n      url(\"#{JS_CDN}#{cdn_index}\", request)\n    else  \n      url(\"#{ASSETS_CDN}#{cdn_index}\", request)\n    end\n  end\n\n  def url(cdn_subdomain, request = nil)\n      return \"//#{cdn_subdomain}-#{localhost}:3000\"\n  end\nend\n</code></pre>\n\n<p>TIA.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "rails-activerecord", "nested-attributes"], "answers": [{"comments": [{"owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "edited": false, "score": 0, "creation_date": 1462353128, "post_id": 37022117, "comment_id": 61597013, "body": "Thank you for your help. Really appreciate it."}], "tags": [], "owner": {"reputation": 343, "user_id": 550047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/krEXd.png?s=128&g=1", "display_name": "babgyy", "link": "https://stackoverflow.com/users/550047/babgyy"}, "is_accepted": false, "score": 0, "last_activity_date": 1462349812, "creation_date": 1462349812, "answer_id": 37022117, "question_id": 37019717, "link": "https://stackoverflow.com/questions/37019717/rails-nested-attributes-validates-uniqueness-of-doesnt-work/37022117#37022117", "title": "Rails nested attributes: validates_uniqueness_of doesn&#39;t work", "body": "<p>If User has and should only have one Language, then you could change the cardinality between the models:</p>\n\n<pre><code>class Language &lt; ActiveRecord::Base\n    has_many :users\nend\n\nclass User &lt; ActiveRecord::Base\n    has_one :language\nend\n</code></pre>\n\n<p>Then by definition your users will only have one language at a time and your overall model will be simpler. </p>\n\n<p>You can read more about active record associations and cardinalities <a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow\">in this Association Basics guide</a></p>\n"}, {"tags": [], "owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "is_accepted": false, "score": 1, "last_activity_date": 1462353077, "creation_date": 1462353077, "answer_id": 37023284, "question_id": 37019717, "link": "https://stackoverflow.com/questions/37019717/rails-nested-attributes-validates-uniqueness-of-doesnt-work/37023284#37023284", "title": "Rails nested attributes: validates_uniqueness_of doesn&#39;t work", "body": "<p>This is how I did it finally:</p>\n\n<pre><code>class UserLanguage &lt; ActiveRecord::Base\n\n    belongs_to :user\n    belongs_to :language\n\n    def self.delete_duplicated_user_languages(user_id)\n        user_languages_ids      = UserLanguage.where(user_id: user_id).pluck(:language_id).sort\n        duplicate_language_ids  = user_languages_ids.select {|language| user_languages_ids.count(language) &gt; 1}\n        duplicate_language_ids.uniq!\n        keep_this_language = []\n        duplicate_language_ids.each do |language_id|\n            keep_this_language &lt;&lt; UserLanguage.find_by(user_id: user_id, language_id: language_id).id\n        end\n        single_language = user_languages_ids.select {|language| user_languages_ids.count(language) == 1}\n        single_language.each do |language|\n            keep_this_language &lt;&lt; UserLanguage.find_by(user_id: user_id, language_id: language).id\n        end\n        UserLanguage.where(user_id: user_id).where.not(id: keep_this_language).destroy_all\n    end\n\nend\n</code></pre>\n\n<p>I save all <code>UserLanguage</code>s first and delete them (duplicate ones) later.</p>\n"}], "owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1462353077, "creation_date": 1462342003, "question_id": 37019717, "link": "https://stackoverflow.com/questions/37019717/rails-nested-attributes-validates-uniqueness-of-doesnt-work", "title": "Rails nested attributes: validates_uniqueness_of doesn&#39;t work", "body": "<p>I have 3 models:</p>\n\n<pre><code>class UserLanguage &lt; ActiveRecord::Base\n    belongs_to :user\n    belongs_to :language\nend\n\nclass Language &lt; ActiveRecord::Base\n    has_many :user_languages\n    has_many :users, :through =&gt; :user_languages\nend\n\nclass User &lt; ActiveRecord::Base\n    has_many :user_languages, :dependent =&gt; :destroy\n    has_many :languages, :through =&gt; :user_languages\n    accepts_nested_attributes_for :user_languages, :allow_destroy =&gt; true\nend\n</code></pre>\n\n<p>I'm using <a href=\"https://github.com/ryanb/nested_form\" rel=\"nofollow\">nested_form gem</a> to help user select which language(s) they can speak in. The CRUD for that is working fine.</p>\n\n<p>But, I can't validate uniqueness of the UserLanguage. I try this 2 syntax but they didn't work for me:</p>\n\n<pre><code>validates_uniqueness_of :language_id, scope: :user_id\nvalidates :language_id, :uniqueness =&gt; {:scope =&gt; user_id}\n</code></pre>\n\n<p>My schema for user_languages table:</p>\n\n<pre><code>  create_table \"user_languages\", force: :cascade do |t|\n    t.integer  \"user_id\"\n    t.integer  \"language_id\"\n    t.datetime \"created_at\",  null: false\n    t.datetime \"updated_at\",  null: false\n  end\n\n  add_index \"user_languages\", [\"language_id\"], name: \"index_user_languages_on_language_id\", using: :btree\n  add_index \"user_languages\", [\"user_id\"], name: \"index_user_languages_on_user_id\", using: :btree\n</code></pre>\n\n<p>What should I do to make sure one user can choose only a language once? Say, if I select English inside the dropdown, my second English will not be saved (duplicate) and rejected.</p>\n"}, {"tags": ["ruby", "macos", "gil", "fiddle"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1463580695, "post_id": 37019643, "comment_id": 62126265, "body": "I just noticed that Fiddle releases the gil in ruby 2.3 - if you can update ruby that is probably the easiest solution"}], "answers": [{"tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 2, "last_activity_date": 1463577225, "last_edit_date": 1463577225, "creation_date": 1462346523, "answer_id": 37021011, "question_id": 37019643, "link": "https://stackoverflow.com/questions/37019643/ruby-fiddle-and-global-interpreter-lock-gil/37021011#37021011", "title": "Ruby Fiddle and Global Interpreter Lock (GIL)", "body": "<p>In ruby 2.3 this is the default (see <a href=\"https://bugs.ruby-lang.org/issues/11607\" rel=\"nofollow\">the issue</a> on the ruby bug tracker).</p>\n\n<p>Prior to that, it doesn't look like it was exposed in the Fiddle api. There is a function in the ruby c API called <code>rb_thread_call_without_gvl</code> that does pretty much exactly what it says on the tin: it releases the gvl, calls the passed function, reacquires the gvl and returns. It's a little tricky to use - be sure  to read the comments in <a href=\"https://github.com/ruby/ruby/blob/ruby_2_0_0/thread.c#L1241\" rel=\"nofollow\">thread.c</a>. </p>\n\n<p>If you can't upgrade, I suspect your best bet is to write a very thin C layer that wraps calls with <code>rb_thread_call_without_gvl</code> and then use fiddle to call that wrapper library. </p>\n"}], "owner": {"reputation": 954, "user_id": 3259651, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xrrkE.jpg?s=128&g=1", "display_name": "Rojj", "link": "https://stackoverflow.com/users/3259651/rojj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 37021011, "answer_count": 1, "score": 1, "last_activity_date": 1463577225, "creation_date": 1462341636, "question_id": 37019643, "link": "https://stackoverflow.com/questions/37019643/ruby-fiddle-and-global-interpreter-lock-gil", "title": "Ruby Fiddle and Global Interpreter Lock (GIL)", "body": "<p>I am using <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/fiddle/rdoc/Fiddle.html\" rel=\"nofollow\">Fiddle</a> to call an external C Function for some heavy <a href=\"https://developer.apple.com/library/tvos/documentation/Accelerate/Reference/BLAS_Ref/index.html#//apple_ref/doc/uid/TP30000414-SW1\" rel=\"nofollow\">linear algebra</a> calculations (Mac OSX).</p>\n\n<p>The module definition looks like </p>\n\n<pre><code>  module BLAS\n    extend Fiddle::Importer\n    dlload $BLAS_PATH\n    extern 'void cblas_dgemm(int, int, int, int, int, int, double, double*, int, double*, int, double, double*, int)'\n    extern 'void cblas_dgemv(int, int, int, int, double, double*, int, double*, int, double, double*, int)'\n.......\n</code></pre>\n\n<p>The libraries have been optimized for mac osx and can use all the cores available. Unfortunately when I call these functions from Ruby with Fiddle only one core is used and my understanding is that this happens because of the <code>GIL</code>.</p>\n\n<p>Is there a way to release the lock during the execution of external functions?</p>\n\n<p>I am using <code>ruby 2.0.0-p247</code> (not the system Ruby).</p>\n"}, {"tags": ["ruby", "caching", "rubygems"], "comments": [{"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 1, "creation_date": 1462341371, "post_id": 37019456, "comment_id": 61590214, "body": "You don&#39;t want to cache the method but the result of the method call."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1462341963, "post_id": 37019456, "comment_id": 61590460, "body": "<i>Sidenote</i>: please never put a space between function name and parentheses. This may cause (in different cases) many unexpected problems."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1462377355, "post_id": 37019456, "comment_id": 61615358, "body": "What you&#39;re talking about is <a href=\"https://en.wikipedia.org/wiki/Memoization\" rel=\"nofollow noreferrer\">memoization</a>. You can cache the output of a method based on its incoming parameters, if the called code always returns the same value for the same input. There are downsides to caching results for long-running processes though; If a value is used for a very short time, even if it&#39;s used 100 times, then never used again but remains cached for days/weeks/months, then it&#39;s wasting resources, so timing them out and purging them is important."}], "answers": [{"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 6, "last_activity_date": 1576830963, "last_edit_date": 1576830963, "creation_date": 1462341293, "answer_id": 37019542, "question_id": 37019456, "link": "https://stackoverflow.com/questions/37019456/how-to-cache-methods-in-ruby/37019542#37019542", "title": "How to cache methods in ruby?", "body": "<p>The easiest way is to use a Hash:</p>\n\n<pre><code>class ApiWithCache\n\n  def initialize\n    @cache = {}\n  end\n\n  def do_thing(id)\n    expensive_api_call(id)\n  end\n\n  def do_thing_with_cache(id)\n    @cache[id] ||= do_thing(id)\n  end\nend\n</code></pre>\n\n<p>Now this poses some problems that you might want to look into:</p>\n\n<ul>\n<li>expiry of cached data</li>\n<li>size of cache (will grow unless you also remove items. this could cause problems in long running processes)</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": false, "score": 0, "last_activity_date": 1462341369, "creation_date": 1462341369, "answer_id": 37019563, "question_id": 37019456, "link": "https://stackoverflow.com/questions/37019456/how-to-cache-methods-in-ruby/37019563#37019563", "title": "How to cache methods in ruby?", "body": "<p>You can do this using an instance variable containing a hash, and the <code>||=</code> operator, as in:</p>\n\n<pre><code>def initialize\n  @user_cache = {}\n  # ...\nend\n\ndef get_information(id)\n  @user_cache[id] ||= expensive_api_call(id)\nend\n</code></pre>\n\n<p><code>||=</code> means execute the method call and perform the assignment only if the lvalue (in this case <code>@user_cache[id]</code>) is falsy (nil or false).  Otherwise, the value that is already in the hash is used.</p>\n"}, {"comments": [{"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1462341435, "post_id": 37019565, "comment_id": 61590242, "body": "This wont work. There is a parameter, so potentially different results."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1462341622, "post_id": 37019565, "comment_id": 61590318, "body": "@pascalbetz updated. Now it will work, given <code>foo</code> is a hash."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1462341627, "post_id": 37019565, "comment_id": 61590320, "body": "I just proposed an edit to add <code>[id]</code> to the question code that should clarify this."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 2, "last_activity_date": 1462341779, "last_edit_date": 1462341779, "creation_date": 1462341385, "answer_id": 37019565, "question_id": 37019456, "link": "https://stackoverflow.com/questions/37019456/how-to-cache-methods-in-ruby/37019565#37019565", "title": "How to cache methods in ruby?", "body": "<p>It is already pretty easy in pure ruby:</p>\n\n<pre><code>def foo(id)\n  @foo[id] ||= some_expensive_operation\nend\n</code></pre>\n\n<p>As far as gems go - check out <a href=\"https://github.com/matthewrudy/memoist/blob/master/README.md\" rel=\"nofollow\">memoist</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 5332839, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-W124KKtHHPQ/AAAAAAAAAAI/AAAAAAAAABk/eKg3XVGBfww/photo.jpg?sz=128", "display_name": "Uysim Ty", "link": "https://stackoverflow.com/users/5332839/uysim-ty"}, "is_accepted": false, "score": 0, "last_activity_date": 1462356056, "creation_date": 1462356056, "answer_id": 37024437, "question_id": 37019456, "link": "https://stackoverflow.com/questions/37019456/how-to-cache-methods-in-ruby/37024437#37024437", "title": "How to cache methods in ruby?", "body": "<p>Do it by hash global variable</p>\n\n<pre><code>def get_information(id)\n    @user_details ||= {}\n    @user_details[id] ||= expensive_api_call(id)\n    return @user_details[id]\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93455, "user_id": 187141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG", "display_name": "yegor256", "link": "https://stackoverflow.com/users/187141/yegor256"}, "is_accepted": false, "score": 0, "last_activity_date": 1546159777, "creation_date": 1546159777, "answer_id": 53976307, "question_id": 37019456, "link": "https://stackoverflow.com/questions/37019456/how-to-cache-methods-in-ruby/53976307#53976307", "title": "How to cache methods in ruby?", "body": "<p>Try <a href=\"https://github.com/yegor256/zache\" rel=\"nofollow noreferrer\">zache</a>:</p>\n\n<pre><code>require 'zache'\nzache = Zache.new\nx = zache.get(:x, lifetime: 15) do\n  # Something very slow and expensive, which\n  # we only want to execute once every 15 seconds.\nend\n</code></pre>\n\n<p>I'm the author.</p>\n"}], "owner": {"reputation": 149, "user_id": 2119276, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0189e78e9012dbfc46d6fdd4028c5b75?s=128&d=identicon&r=PG", "display_name": "amair", "link": "https://stackoverflow.com/users/2119276/amair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1097, "favorite_count": 1, "accepted_answer_id": 37019542, "answer_count": 5, "score": 4, "last_activity_date": 1576830963, "creation_date": 1462340963, "question_id": 37019456, "link": "https://stackoverflow.com/questions/37019456/how-to-cache-methods-in-ruby", "title": "How to cache methods in ruby?", "body": "<p>I have a ruby workflow which makes few expensive API calls. I know we have a easier way to cache things in Ruby on Rails but haven't found any common ruby gem for ruby scripts. </p>\n\n<p>What is the simplest and easiest way to cache results for a method which depends on input for a pure ruby application?</p>\n\n<pre><code>//pseudo code\ndef get_information (id)\n  user_details = expensive_api_call(id)\n  return user_details\nend\n</code></pre>\n"}, {"tags": ["ruby", "watir", "watir-webdriver"], "comments": [{"owner": {"reputation": 649, "user_id": 6103994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd47adb462023e049e59c6f437e6d4dd?s=128&d=identicon&r=PG&f=1", "display_name": "Antesser", "link": "https://stackoverflow.com/users/6103994/antesser"}, "edited": false, "score": 0, "creation_date": 1462350417, "post_id": 37019351, "comment_id": 61595282, "body": "It is very hard to understand what do you want to receive and how. Try to explain please. I see what you have. But if the page is dynamically created what do you know? What do you need to get?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 2431131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe38c68d8400d3a57ec67fcbb52b5d67?s=128&d=identicon&r=PG", "display_name": "user2431131", "link": "https://stackoverflow.com/users/2431131/user2431131"}, "edited": false, "score": 0, "creation_date": 1462342997, "post_id": 37019500, "comment_id": 61590928, "body": "I want to retrive the value associated with &lt;div id = &quot;tt52433002&quot;&gt; which is hidden. and i wanted retrive on the basis of my domain For e.g., if domain =~ /testci20160503105556/i  then id = browser.div.attribute_value(&#39;id&#39;)"}, {"owner": {"reputation": 11, "user_id": 2431131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe38c68d8400d3a57ec67fcbb52b5d67?s=128&d=identicon&r=PG", "display_name": "user2431131", "link": "https://stackoverflow.com/users/2431131/user2431131"}, "edited": false, "score": 0, "creation_date": 1462343091, "post_id": 37019500, "comment_id": 61590977, "body": "Also the div&#39;s visibility is hidden."}], "tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": false, "score": 1, "last_activity_date": 1462377658, "last_edit_date": 1462377658, "creation_date": 1462341148, "answer_id": 37019500, "question_id": 37019351, "link": "https://stackoverflow.com/questions/37019351/how-to-retrieve-hidden-elements-when-visibility-is-hidden/37019500#37019500", "title": "How to retrieve hidden elements when visibility is hidden", "body": "<p>Watir is designed to act like a user. So if a user can not see the text in an element, then Watir will not return the text of the element.</p>\n\n<p>Also, the element you are looking for is a <code>div</code> not a <code>hidden</code>.</p>\n\n<p>If you need the text you can do: </p>\n\n<pre><code>browser.div(class: 'bd').inner_html\n</code></pre>\n\n<p>which makes a JavaScript call to provide the result.</p>\n\n<hr>\n\n<p>This works:</p>\n\n<pre><code>browser.div.attribute_value('id') =&gt; tt52433002\n</code></pre>\n\n<p>as does this:</p>\n\n<pre><code>browser.div(class: 'bd').inner_html[/testci\\d{14}/] =&gt; testci20160503105556\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "is_accepted": false, "score": 0, "last_activity_date": 1462481556, "creation_date": 1462481556, "answer_id": 37060050, "question_id": 37019351, "link": "https://stackoverflow.com/questions/37019351/how-to-retrieve-hidden-elements-when-visibility-is-hidden/37060050#37060050", "title": "How to retrieve hidden elements when visibility is hidden", "body": "<p>First things first.  The error says that Watir cannot find an element using the criteria you specified.  That means either that no such thing exists anywhere in the DOM, or that it might be inside a frame.</p>\n\n<p>Since the element you want is a div, then you should be using the <code>.div</code> method to access it</p>\n\n<pre><code>browser.div(:class =&gt; 'bd')   #finds first matching div\n</code></pre>\n\n<p>A potential second problem could occur if that classname is not very unique.  Unless you specify an additional parameter, such as index, or perhaps a portion of the text contained by the div, you may not find the div you are looking for.  A fast debugging trick (I like to do it from IRB) is to get a collection of matching divs and check the size</p>\n\n<pre><code>div_count = browser.divs(:class =&gt; 'bd').size\nputs \"there are #{divcount} divs of class bd in the dom\"\n</code></pre>\n\n<p>If the count is anything more than 1, then you likely need to change how you are selecting it to ensure you get the right one.  for example</p>\n\n<pre><code>browser.div(:class =&gt; 'bd', :text =&gt; /Associated with the domain/)\n</code></pre>\n\n<p>If the count is zero, then check for frames</p>\n\n<pre><code>frame_count = browser.frames.size\niframe_count = browser.iframes.size\n</code></pre>\n\n<p>If there are frames you will have to tell watir to look inside the frame for the div, if more than one frame then be sure you specify the right one</p>\n\n<pre><code>browser.frame.div(:class =&gt; 'bd')  #looks for div inside first frame\n</code></pre>\n\n<p>Once you are sure you have the right div, then you ought to be able to use a method like <code>.text</code> or as in another answer <code>.inner_html</code> to get the contents of the div.</p>\n"}], "owner": {"reputation": 11, "user_id": 2431131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe38c68d8400d3a57ec67fcbb52b5d67?s=128&d=identicon&r=PG", "display_name": "user2431131", "link": "https://stackoverflow.com/users/2431131/user2431131"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 551, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1462481556, "creation_date": 1462340476, "last_edit_date": 1462377735, "question_id": 37019351, "link": "https://stackoverflow.com/questions/37019351/how-to-retrieve-hidden-elements-when-visibility-is-hidden", "title": "How to retrieve hidden elements when visibility is hidden", "body": "<p>I want to retrieve hidden text when the visibiility attribute is hidden:</p>\n\n<pre><code>&lt;div id = \"tt52433002\" class=\"yui-module yui-overlay yui-tt yui-overlay-hidden\" style=\"z-index: 2; visibility: hidden;\"&gt;\n&lt;div class=\"bd\"&gt;Associated with the domain : testci20160503105556.com&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>browser.hidden(:class, 'bd').text\n</code></pre>\n\n<p>and </p>\n\n<pre><code>browser.hidden(:class, 'bd').value\n</code></pre>\n\n<p>But I get this error:</p>\n\n<pre><code>\"unable to locate element, using {:class=&gt;\"bd\", :tag_name=&gt;\"input\", :type=&gt;\"hidden\"}\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "spree", "sprockets"], "comments": [{"owner": {"reputation": 655, "user_id": 5715918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02b2aca8bacf3913e5001a83bf96eb28?s=128&d=identicon&r=PG&f=1", "display_name": "rohin-arka", "link": "https://stackoverflow.com/users/5715918/rohin-arka"}, "edited": false, "score": 0, "creation_date": 1462351825, "post_id": 37019215, "comment_id": 61596151, "body": "Did you install js runtime or install gem <code>ruby racer</code>. Try <code>sudo apt-get install nodejs</code> in linux machine or <code>brew install nodejs</code> in osx."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4540628, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HMY4-W8wXwc/AAAAAAAAAAI/AAAAAAAAAC4/zP7BxuTLUWM/photo.jpg?sz=128", "display_name": "spider", "link": "https://stackoverflow.com/users/4540628/spider"}, "edited": false, "score": 0, "creation_date": 1462449126, "post_id": 37041918, "comment_id": 61647215, "body": "this problem is not because of node.js"}, {"owner": {"reputation": 500, "user_id": 3126291, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8f4e5aa2787c65782cf359db90a24a9c?s=128&d=identicon&r=PG", "display_name": "suyesh", "link": "https://stackoverflow.com/users/3126291/suyesh"}, "reply_to_user": {"reputation": 13, "user_id": 4540628, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HMY4-W8wXwc/AAAAAAAAAAI/AAAAAAAAAC4/zP7BxuTLUWM/photo.jpg?sz=128", "display_name": "spider", "link": "https://stackoverflow.com/users/4540628/spider"}, "edited": false, "score": 0, "creation_date": 1462467664, "post_id": 37041918, "comment_id": 61659341, "body": "I tried to duplicate on my machine but it worked perfectly fine for me."}], "tags": [], "owner": {"reputation": 500, "user_id": 3126291, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8f4e5aa2787c65782cf359db90a24a9c?s=128&d=identicon&r=PG", "display_name": "suyesh", "link": "https://stackoverflow.com/users/3126291/suyesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1462419603, "creation_date": 1462419603, "answer_id": 37041918, "question_id": 37019215, "link": "https://stackoverflow.com/questions/37019215/error-while-installing-sprangular-undefined-method-sprockets-v2-for-ngannota/37041918#37041918", "title": "Error while installing Sprangular. undefined method `sprockets_v2?&#39; for Ngannotate:Module", "body": "<p>Try <code>bundle update</code> instead of <code>bundle install</code> . and also do you have node.js installed?</p>\n"}], "owner": {"reputation": 13, "user_id": 4540628, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HMY4-W8wXwc/AAAAAAAAAAI/AAAAAAAAAC4/zP7BxuTLUWM/photo.jpg?sz=128", "display_name": "spider", "link": "https://stackoverflow.com/users/4540628/spider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462419603, "creation_date": 1462339867, "question_id": 37019215, "link": "https://stackoverflow.com/questions/37019215/error-while-installing-sprangular-undefined-method-sprockets-v2-for-ngannota", "title": "Error while installing Sprangular. undefined method `sprockets_v2?&#39; for Ngannotate:Module", "body": "<p>Thanks in advance</p>\n\n<p>I am following this to install sprangular locally.</p>\n\n<p><a href=\"https://github.com/sprangular/sprangular/wiki/setup-guide\" rel=\"nofollow\">https://github.com/sprangular/sprangular/wiki/setup-guide</a></p>\n\n<p>I tried manual method also its giving same error.</p>\n\n<p>getting this error while <code>bundle install</code></p>\n\n<pre><code>/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/bundler-1.12.1/lib/bundler/runtime.rb:89:in `rescue in block (2 levels) in require': There was an error while trying to load the gem 'sprangular'. (Bundler::GemRequireError)\nGem Load Error is: undefined method `sprockets_v2?' for Ngannotate:Module\nBacktrace for gem load error is:\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/ngannotate-rails-1.2.2/lib/ngannotate/rails/railtie.rb:2:in `&lt;top (required)&gt;'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/polyglot-0.3.5/lib/polyglot.rb:65:in `require'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/polyglot-0.3.5/lib/polyglot.rb:65:in `require'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/activesupport-4.1.8/lib/active_support/dependencies.rb:247:in `block in require'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/activesupport-4.1.8/lib/active_support/dependencies.rb:232:in `load_dependency'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/activesupport-4.1.8/lib/active_support/dependencies.rb:247:in `require'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/ngannotate-rails-1.2.2/lib/ngannotate/rails.rb:2:in `&lt;top (required)&gt;'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/polyglot-0.3.5/lib/polyglot.rb:65:in `require'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/polyglot-0.3.5/lib/polyglot.rb:65:in `require'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/activesupport-4.1.8/lib/active_support/dependencies.rb:247:in `block in require'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/activesupport-4.1.8/lib/active_support/dependencies.rb:232:in `load_dependency'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/activesupport-4.1.8/lib/active_support/dependencies.rb:247:in `require'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/sprangular-0.1.0/lib/sprangular.rb:9:in `&lt;top (required)&gt;'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/bundler-1.12.1/lib/bundler/runtime.rb:86:in `require'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/bundler-1.12.1/lib/bundler/runtime.rb:86:in `block (2 levels) in require'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/bundler-1.12.1/lib/bundler/runtime.rb:81:in `each'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/bundler-1.12.1/lib/bundler/runtime.rb:81:in `block in require'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/bundler-1.12.1/lib/bundler/runtime.rb:70:in `each'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/bundler-1.12.1/lib/bundler/runtime.rb:70:in `require'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/bundler-1.12.1/lib/bundler.rb:102:in `require'\n/home/spider/Dropbox/Round360/myapp/config/application.rb:14:in `&lt;top (required)&gt;'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/railties-4.1.8/lib/rails/commands/commands_tasks.rb:146:in `require'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/railties-4.1.8/lib/rails/commands/commands_tasks.rb:146:in `require_application_and_environment!'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/railties-4.1.8/lib/rails/commands/commands_tasks.rb:133:in `generate_or_destroy'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/railties-4.1.8/lib/rails/commands/commands_tasks.rb:51:in `generate'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/railties-4.1.8/lib/rails/commands/commands_tasks.rb:40:in `run_command!'\n/home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/railties-4.1.8/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\nbin/rails:4:in `require'\nbin/rails:4:in `&lt;main&gt;'\nBundler Error Backtrace:\n    from /home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/bundler-1.12.1/lib/bundler/runtime.rb:85:in `block (2 levels) in require'\n    from /home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/bundler-1.12.1/lib/bundler/runtime.rb:81:in `each'\n    from /home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/bundler-1.12.1/lib/bundler/runtime.rb:81:in `block in require'\n    from /home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/bundler-1.12.1/lib/bundler/runtime.rb:70:in `each'\n    from /home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/bundler-1.12.1/lib/bundler/runtime.rb:70:in `require'\n    from /home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/bundler-1.12.1/lib/bundler.rb:102:in `require'\n    from /home/spider/Dropbox/Round360/myapp/config/application.rb:14:in `&lt;top (required)&gt;'\n    from /home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/railties-4.1.8/lib/rails/commands/commands_tasks.rb:146:in `require'\n    from /home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/railties-4.1.8/lib/rails/commands/commands_tasks.rb:146:in `require_application_and_environment!'\n    from /home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/railties-4.1.8/lib/rails/commands/commands_tasks.rb:133:in `generate_or_destroy'\n    from /home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/railties-4.1.8/lib/rails/commands/commands_tasks.rb:51:in `generate'\n    from /home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/railties-4.1.8/lib/rails/commands/commands_tasks.rb:40:in `run_command!'\n    from /home/spider/.rvm/gems/ruby-2.3.0@rails-4.1.8/gems/railties-4.1.8/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n    from bin/rails:4:in `require'\n    from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "capybara", "appium"], "comments": [{"owner": {"reputation": 2304, "user_id": 2377164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2aca7ac513ec3ce58c082440fddf8a52?s=128&d=identicon&r=PG", "display_name": "olibiaz", "link": "https://stackoverflow.com/users/2377164/olibiaz"}, "edited": false, "score": 0, "creation_date": 1462334694, "post_id": 37018177, "comment_id": 61587935, "body": "Please reas <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> and improve your question with more detail. What you&#39;ve tried, why it doesn&#39;t working..."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 2805845, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/bb038c69cd326d2ae740cf598df2f4ba?s=128&d=identicon&r=PG&f=1", "display_name": "user2805845", "link": "https://stackoverflow.com/users/2805845/user2805845"}, "edited": false, "score": 0, "creation_date": 1462343654, "post_id": 37018673, "comment_id": 61591265, "body": "Hi Thanks for that. is it possible to run a loop to collect all contents from each row and put it in an array?  Say using row_count in for loop and getting each rows and its value and keep it in an array"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 53, "user_id": 2805845, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/bb038c69cd326d2ae740cf598df2f4ba?s=128&d=identicon&r=PG&f=1", "display_name": "user2805845", "link": "https://stackoverflow.com/users/2805845/user2805845"}, "edited": false, "score": 0, "creation_date": 1462379471, "post_id": 37018673, "comment_id": 61616679, "body": "It depends what you mean by contents, but whatever it is you don&#39;t really need row_count at all.  If you want the html of each row - it would be something like <code>table.all(:css, &#39;tr&#39;).map {|tr| tr[&#39;innerHTML&#39;]}</code>  if you mean the text content of each row it would be <code>table.all(:css, &#39;tr&#39;).map {|tr| tr.text}</code>  etc.. (note the :css is the default setting in Capybara so you may not actually need that parameter if you haven&#39;t changed the default)"}, {"owner": {"reputation": 53, "user_id": 2805845, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/bb038c69cd326d2ae740cf598df2f4ba?s=128&d=identicon&r=PG&f=1", "display_name": "user2805845", "link": "https://stackoverflow.com/users/2805845/user2805845"}, "edited": false, "score": 0, "creation_date": 1462405907, "post_id": 37018673, "comment_id": 61629802, "body": "Here is the thing. I have a table with 5 rows and 4 columns. in which first column belongs to numerical value. I want to collect all these values in an array and check whether the values are in ascending order or descending order. Please let me if you have any solution@tomwalpole @tom"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 53, "user_id": 2805845, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/bb038c69cd326d2ae740cf598df2f4ba?s=128&d=identicon&r=PG&f=1", "display_name": "user2805845", "link": "https://stackoverflow.com/users/2805845/user2805845"}, "edited": false, "score": 0, "creation_date": 1462406118, "post_id": 37018673, "comment_id": 61629858, "body": "ok - so you want the text contents of the first td of every row <code>table.all(:css, &#39;tr td:first-child&#39;).map {|td| td.text}</code>   - you could also do td.text.to_i if you want an array of integers or whatever instaed -- or rather than :css you can use :xpath and use indexes in your queries"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 3, "last_activity_date": 1462337084, "creation_date": 1462337084, "answer_id": 37018673, "question_id": 37018177, "link": "https://stackoverflow.com/questions/37018177/how-to-get-row-count-from-a-table-using-ruby-capybara/37018673#37018673", "title": "How to get row count from a table using ruby capybara?", "body": "<p>You can find all the elements matching a selector using <code>#all</code> so</p>\n\n<pre><code>page.all(:css, 'table tr').size\n</code></pre>\n\n<p>will count all the table rows in the page. If there are multiple tables and you want for a specific table you can increase the specificity of the CSS selector. You can also find the specific table and then call <code>all</code> on that</p>\n\n<pre><code>table = page.find(:css, 'table#my_table_id')\nrow_count = table.all(:css, 'tr').size\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 2805845, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/bb038c69cd326d2ae740cf598df2f4ba?s=128&d=identicon&r=PG&f=1", "display_name": "user2805845", "link": "https://stackoverflow.com/users/2805845/user2805845"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2574, "favorite_count": 0, "accepted_answer_id": 37018673, "answer_count": 1, "score": -1, "last_activity_date": 1462337084, "creation_date": 1462334403, "last_edit_date": 1462336468, "question_id": 37018177, "link": "https://stackoverflow.com/questions/37018177/how-to-get-row-count-from-a-table-using-ruby-capybara", "title": "How to get row count from a table using ruby capybara?", "body": "<p>In Java, we use:</p>\n\n<pre><code>WebElement tablename=driver.findElement(By.xpath(\"table_xpath\"));\n\nWebElement&lt;List&gt; rowcount=tablename.findelements(By.tagname(\"tr\"));\n\nsys(rowcount.size());\n</code></pre>\n\n<p>How to find row count in Ruby Capybara for above case?</p>\n"}, {"tags": ["ruby", "amazon-web-services", "amazon-ec2", "chef-infra", "amazon-cloudformation"], "owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1462334978, "creation_date": 1462334263, "last_edit_date": 1462334978, "question_id": 37018147, "link": "https://stackoverflow.com/questions/37018147/aws-cloudformation-cli-creds-file-created-but-not-found-during-later-configsets", "title": "AWS Cloudformation: cli creds file created but not found during later configsets", "body": "<p>I have an AWS Cloudformation template that, among other things, creates a public EC2 instance with some <code>Metadata</code> in the form of <code>AWS::Cloudformation::Init</code> configsets. When run, these configsets are meant to 1) install <code>chef-solo</code>, 2)create an AWS <code>credentials</code> file in <code>/home/ec2-user/.aws/credentials</code>, 3) use the credentials in <code>2)</code> with the aws cli to retrieve a Chef cookbook from AWS S3, 4) run the cookbook.</p>\n\n<p>Everything is working fine until <code>3)</code>. This breaks and, according to the <code>cfn-init</code> logs, the problem is that the credentials for the aws cli can't be found. However, step <code>2)</code> completes successfully and when I log into the server manually I can see the <code>credentials</code> file in the right place and successfully run <code>aws s3</code> commands from the prompt (the same ones that were supposed to be run automatically as part of the template. </p>\n\n<p>Here is the error from the logs:</p>\n\n<pre><code>2016-05-04 04:03:14,950 P2482 [INFO] Command 2_fetch-cookbook\n2016-05-04 04:03:15,977 P2482 [INFO] -----------------------Command Output-----------------------\n2016-05-04 04:03:15,977 P2482 [INFO]    Unable to locate credentials\n2016-05-04 04:03:15,977 P2482 [INFO]    Completed 1 part(s) with ... file(s) remaining\n</code></pre>\n\n<p>...and here is what it looks like when I log in:</p>\n\n<pre><code>ec2-user@ip-10-0-1-243 ~]$ ls .aws\ncredentials\n[ec2-user@ip-10-0-1-243 ~]$ aws s3 ls s3://my-bucket\n2016-05-04 00:27:43      41472 kitchen.tar.gz\n</code></pre>\n\n<p>I've been fiddling with this for quite a while and just can't seem to get it, so I'm hoping someone here might be able to help. =) Below you can find the relevant code for the EC2 instance. Note that I have to use <code>sudo su</code> before installing <code>chef-solo</code> since that script downloads and unpacks an <code>rpm</code>. Then I switch back to the <code>ec2-user</code> for everything else.</p>\n\n<pre><code>\"EC2Instance\" : {\n  \"Type\" : \"AWS::EC2::Instance\",\n  \"Description\" : \"EC2 Instance\",\n  \"Metadata\" : {\n    \"AWS::CloudFormation::Init\" : {\n      \"configSets\" : {\n        \"Setup\" : [ \"InstallChef\", \"SetAWSCreds\", \"Cook\" ]\n      },\n\n      \"InstallChef\" : {\n        \"commands\" : {\n          \"1_sudo\" : {\n            \"command\" : \"sudo su\"\n          },\n          \"2_install-chef\" : {\n            \"cw\": \"/home/ec2-user\",\n            \"command\" : \"curl -L https://www.opscode.com/chef/install.sh | bash\"\n          },\n          \"3_su\" : {\n            \"command\" : \"su ec2-user\"\n          }\n        }\n      },\n\n      \"SetAWSCreds\" : {\n        \"files\" : {\n          \"/home/ec2-user/.aws/credentials\" : {\n            \"content\" : { \"Fn::Join\" : [ \"\", [\n              \"[default]\\n\",\n              \"aws_access_key_id = \",\n              { \"Ref\" : \"AwsAccessKeyId\" },\n              \"\\n\",\n              \"aws_secret_access_key = \",\n              { \"Ref\" : \"AwsSecretAccessKey\" },\n              \"\\n\"\n            ]]},\n            \"owner\" : \"ec2-user\",\n            \"group\" : \"ec2-user\"\n          }\n        }\n      },\n\n      \"Cook\" : {\n        \"commands\" : {\n          \"1_ensure_ec2-user\" : {\n            \"command\" : \"su ec2-user\"\n          },\n          \"2_fetch-cookbook\" : {\n            \"cw\" : \"/home/ec2-user\",\n            \"command\" : \"aws s3 cp s3://my-bucket/kitchen.tar.gz .\"\n          },\n          \"3_unzip-cookbook\" : {\n            \"cw\" : \"/home/ec2-user\",\n            \"command\" : \"tar xvf kitchen.tar.gz\"\n          },\n          \"4_cook\" : {\n            \"cw\" : \"/home/ec2-user/kitchen\",\n            \"command\" : \"sudo chef-solo -c solo.rb -j web.json\"\n          }\n        }\n      }\n    }\n  },\n  \"Properties\" : {\n    \"ImageId\" : \"ami-08111162\",\n    \"KeyName\" : { \"Ref\" : \"KeyPairName\" },\n    \"InstanceType\" : \"t2.micro\",\n    \"SubnetId\" : { \"Ref\" : \"PublicSubnet\" },\n    \"SecurityGroupIds\" : [ { \"Ref\" : \"SecurityGroup\" } ],\n    \"UserData\" : {\n      \"Fn::Base64\" : {\n        \"Fn::Join\" : [\"\", [\n          \"#!/bin/bash -xe\\n\",\n\n          \"/opt/aws/bin/cfn-init -s \", { \"Ref\" : \"AWS::StackName\" },\n          \"                      -r EC2Instance\",\n          \"                      -c Setup\"\n        ]]\n      }\n    }\n  }\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "excel", "axlsx"], "comments": [{"owner": {"reputation": 700, "user_id": 908957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KPFXF.png?s=128&g=1", "display_name": "JohnPaul", "link": "https://stackoverflow.com/users/908957/johnpaul"}, "edited": false, "score": 0, "creation_date": 1462346342, "post_id": 37017894, "comment_id": 61592750, "body": "Please post a related code on it"}], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 865100, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a35d5a8fed0a37be5782f01fa7293458?s=128&d=identicon&r=PG", "display_name": "NYV", "link": "https://stackoverflow.com/users/865100/nyv"}, "is_accepted": false, "score": 2, "last_activity_date": 1483621029, "creation_date": 1483621029, "answer_id": 41485726, "question_id": 37017894, "link": "https://stackoverflow.com/questions/37017894/ruby-axlsx-gem-grouping-summary-rows-top-icon-icon-should-be-top/41485726#41485726", "title": "Ruby Axlsx gem grouping summary rows top icon(+/- icon should be top)", "body": "<p>Maybe, it's a little bit late, but anyway</p>\n\n<p>There is PR on github that's adding this functionality\n<a href=\"https://github.com/randym/axlsx/commit/c80c8b9d9be5542471d66afcc2ce4ddd80cac1f7\" rel=\"nofollow noreferrer\">https://github.com/randym/axlsx/commit/c80c8b9d9be5542471d66afcc2ce4ddd80cac1f7</a></p>\n\n<p>But, latest release (2.1.0.pre) on rubygem doesn't contain it\nSo you need to download it directly from github\nNow you can set -/+ icon on top instead of bottom with next code:</p>\n\n<pre><code>workbook.add_worksheet(name: worksheet_name) do |sheet|\n  sheet.sheet_pr.outline_pr.summary_below = false\n  sheet.add_row('row1')\n  sheet.add_row('row2')\n  sheet.add_row('row3')\n  sheet.outline_level_rows 1,2\nend\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/s61w5.png\" rel=\"nofollow noreferrer\">Picture with result there</a></p>\n"}], "owner": {"reputation": 11, "user_id": 2021230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b34a369f39a779b9275e0ef6656714d?s=128&d=identicon&r=PG", "display_name": "user2021230", "link": "https://stackoverflow.com/users/2021230/user2021230"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1493030809, "creation_date": 1462332665, "last_edit_date": 1463916818, "question_id": 37017894, "link": "https://stackoverflow.com/questions/37017894/ruby-axlsx-gem-grouping-summary-rows-top-icon-icon-should-be-top", "title": "Ruby Axlsx gem grouping summary rows top icon(+/- icon should be top)", "body": "<p>Currently I am Using axlsxgem in one of my project for grouping functionality, I am able to use the grouping functionality, but one place where I\u2019m struggling is to outline summary rows and -/+ icon should be on top instead of bottom</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462331320, "post_id": 37017634, "comment_id": 61587122, "body": "Does <code>bundle exec rails s</code> work any better? Maybe your system <code>rails</code> gem is broken."}, {"owner": {"reputation": 13, "user_id": 6142630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f2db75f60e67cf77f0cbc1a161daa2?s=128&d=identicon&r=PG&f=1", "display_name": "DanDNoob", "link": "https://stackoverflow.com/users/6142630/dandnoob"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462331490, "post_id": 37017634, "comment_id": 61587171, "body": "It does start up but then loading into an error page."}, {"owner": {"reputation": 767, "user_id": 6027959, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O87Wy.jpg?s=128&g=1", "display_name": "Nirupa", "link": "https://stackoverflow.com/users/6027959/nirupa"}, "edited": false, "score": 0, "creation_date": 1462331744, "post_id": 37017634, "comment_id": 61587231, "body": "which versions of ruby and rails are you using?"}, {"owner": {"reputation": 13, "user_id": 6142630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f2db75f60e67cf77f0cbc1a161daa2?s=128&d=identicon&r=PG&f=1", "display_name": "DanDNoob", "link": "https://stackoverflow.com/users/6142630/dandnoob"}, "reply_to_user": {"reputation": 767, "user_id": 6027959, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O87Wy.jpg?s=128&g=1", "display_name": "Nirupa", "link": "https://stackoverflow.com/users/6027959/nirupa"}, "edited": false, "score": 0, "creation_date": 1462331964, "post_id": 37017634, "comment_id": 61587274, "body": "@Nirupa the version is ruby 2.3.0p0"}, {"owner": {"reputation": 767, "user_id": 6027959, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O87Wy.jpg?s=128&g=1", "display_name": "Nirupa", "link": "https://stackoverflow.com/users/6027959/nirupa"}, "edited": false, "score": 0, "creation_date": 1462332289, "post_id": 37017634, "comment_id": 61587347, "body": "and rails version?"}, {"owner": {"reputation": 13, "user_id": 6142630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f2db75f60e67cf77f0cbc1a161daa2?s=128&d=identicon&r=PG&f=1", "display_name": "DanDNoob", "link": "https://stackoverflow.com/users/6142630/dandnoob"}, "edited": false, "score": 0, "creation_date": 1462332333, "post_id": 37017634, "comment_id": 61587356, "body": "When I check rails This is what came out  &gt;&gt;&gt;                                   Daniels-MacBook-Pro:myrubyblog daniellim$ rails -v /Users/daniellim/.rbenv/versions/2.3.0/bin/rails:23:in <code>load&#39;: cannot load such file -- &#47;Users&#47;daniellim&#47;.rbenv&#47;versions&#47;2.3.0&#47;lib&#47;ruby&#47;gems&#47;2.3.0&#47;g&zwnj;&#8203;ems&#47;rails-4.2.6&#47;bin&#47;&zwnj;&#8203;rails (LoadError) \tfrom &#47;Users&#47;daniellim&#47;.rbenv&#47;versions&#47;2.3.0&#47;bin&#47;rails:23:in </code>&lt;main&gt;&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6142630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f2db75f60e67cf77f0cbc1a161daa2?s=128&d=identicon&r=PG&f=1", "display_name": "DanDNoob", "link": "https://stackoverflow.com/users/6142630/dandnoob"}, "edited": false, "score": 0, "creation_date": 1462332985, "post_id": 37017899, "comment_id": 61587512, "body": "Hey buddy, I have done the update. but my localhost page shows error &gt;&gt;Showing /Users/daniellim/ruby/myrubyblog/app/views/layouts/applicati&zwnj;&#8203;on.html.erb where line #5 raised:  Permission denied @ utime_internal - /Users/daniellim/ruby/myrubyblog/tmp/cache/assets/sprockets/&zwnj;&#8203;v3.0/DS/DSOLSc6A5RVS&zwnj;&#8203;mvM415eEWAWG_AgOvZcL&zwnj;&#8203;ZOXQjsXyWQA.cache Extracted source (around line #5):"}, {"owner": {"reputation": 767, "user_id": 6027959, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O87Wy.jpg?s=128&g=1", "display_name": "Nirupa", "link": "https://stackoverflow.com/users/6027959/nirupa"}, "reply_to_user": {"reputation": 13, "user_id": 6142630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f2db75f60e67cf77f0cbc1a161daa2?s=128&d=identicon&r=PG&f=1", "display_name": "DanDNoob", "link": "https://stackoverflow.com/users/6142630/dandnoob"}, "edited": false, "score": 0, "creation_date": 1462333124, "post_id": 37017899, "comment_id": 61587554, "body": "I have updated my answer, try updating rails using above link."}, {"owner": {"reputation": 767, "user_id": 6027959, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O87Wy.jpg?s=128&g=1", "display_name": "Nirupa", "link": "https://stackoverflow.com/users/6027959/nirupa"}, "reply_to_user": {"reputation": 13, "user_id": 6142630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f2db75f60e67cf77f0cbc1a161daa2?s=128&d=identicon&r=PG&f=1", "display_name": "DanDNoob", "link": "https://stackoverflow.com/users/6142630/dandnoob"}, "edited": false, "score": 0, "creation_date": 1462333488, "post_id": 37017899, "comment_id": 61587644, "body": "did u try to install first? if that doesn&#39;t work then try to update"}, {"owner": {"reputation": 13, "user_id": 6142630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f2db75f60e67cf77f0cbc1a161daa2?s=128&d=identicon&r=PG&f=1", "display_name": "DanDNoob", "link": "https://stackoverflow.com/users/6142630/dandnoob"}, "edited": false, "score": 0, "creation_date": 1462333782, "post_id": 37017899, "comment_id": 61587700, "body": "I am doing it again.. hopefully it works. I have also updated the rails version to the latest version 5.0.0 beta"}, {"owner": {"reputation": 767, "user_id": 6027959, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O87Wy.jpg?s=128&g=1", "display_name": "Nirupa", "link": "https://stackoverflow.com/users/6027959/nirupa"}, "reply_to_user": {"reputation": 13, "user_id": 6142630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f2db75f60e67cf77f0cbc1a161daa2?s=128&d=identicon&r=PG&f=1", "display_name": "DanDNoob", "link": "https://stackoverflow.com/users/6142630/dandnoob"}, "edited": false, "score": 0, "creation_date": 1462334015, "post_id": 37017899, "comment_id": 61587749, "body": "I hope so too.. Let me know how it goes"}, {"owner": {"reputation": 13, "user_id": 6142630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f2db75f60e67cf77f0cbc1a161daa2?s=128&d=identicon&r=PG&f=1", "display_name": "DanDNoob", "link": "https://stackoverflow.com/users/6142630/dandnoob"}, "edited": false, "score": 0, "creation_date": 1462334222, "post_id": 37017899, "comment_id": 61587809, "body": "After updating ruby and I went check rails -v error msg shows again"}, {"owner": {"reputation": 13, "user_id": 6142630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f2db75f60e67cf77f0cbc1a161daa2?s=128&d=identicon&r=PG&f=1", "display_name": "DanDNoob", "link": "https://stackoverflow.com/users/6142630/dandnoob"}, "edited": false, "score": 0, "creation_date": 1462334255, "post_id": 37017899, "comment_id": 61587822, "body": "Now I am calling sudo gem install rails hopefully it will solve the problem"}, {"owner": {"reputation": 13, "user_id": 6142630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f2db75f60e67cf77f0cbc1a161daa2?s=128&d=identicon&r=PG&f=1", "display_name": "DanDNoob", "link": "https://stackoverflow.com/users/6142630/dandnoob"}, "edited": false, "score": 0, "creation_date": 1462334753, "post_id": 37017899, "comment_id": 61587952, "body": "I am still having this error on my localhost page &gt;&gt;Permission denied @ utime_internal - /Users/daniellim/ruby/myrubyblog/tmp/cache/assets/sprockets/&zwnj;&#8203;v3.0/DS/DSOLSc6A5RVS&zwnj;&#8203;mvM415eEWAWG_AgOvZcL&zwnj;&#8203;ZOXQjsXyWQA.cache"}, {"owner": {"reputation": 13, "user_id": 6142630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f2db75f60e67cf77f0cbc1a161daa2?s=128&d=identicon&r=PG&f=1", "display_name": "DanDNoob", "link": "https://stackoverflow.com/users/6142630/dandnoob"}, "edited": false, "score": 0, "creation_date": 1463120387, "post_id": 37017899, "comment_id": 61936971, "body": "Hi @Nirupa, yes. Thank you!"}, {"owner": {"reputation": 767, "user_id": 6027959, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O87Wy.jpg?s=128&g=1", "display_name": "Nirupa", "link": "https://stackoverflow.com/users/6027959/nirupa"}, "reply_to_user": {"reputation": 13, "user_id": 6142630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f2db75f60e67cf77f0cbc1a161daa2?s=128&d=identicon&r=PG&f=1", "display_name": "DanDNoob", "link": "https://stackoverflow.com/users/6142630/dandnoob"}, "edited": false, "score": 0, "creation_date": 1463129411, "post_id": 37017899, "comment_id": 61942335, "body": "Not a problem.. Good luck ahead !"}], "tags": [], "owner": {"reputation": 767, "user_id": 6027959, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O87Wy.jpg?s=128&g=1", "display_name": "Nirupa", "link": "https://stackoverflow.com/users/6027959/nirupa"}, "is_accepted": true, "score": 0, "last_activity_date": 1462333085, "last_edit_date": 1462333085, "creation_date": 1462332687, "answer_id": 37017899, "question_id": 37017634, "link": "https://stackoverflow.com/questions/37017634/rails-server-launch-fail/37017899#37017899", "title": "Rails Server Launch Fail", "body": "<p>According to the error you are getting which is you don't have the rails (or right version of rails) installed.</p>\n\n<p>Therefore, first install rails on your system </p>\n\n<pre><code>gem install rails -v 4.2.6\n</code></pre>\n\n<p>Or if you already have it installed, update it</p>\n\n<pre><code>gem update rails \n</code></pre>\n\n<p>Tell me if I am missing on something?</p>\n"}], "owner": {"reputation": 13, "user_id": 6142630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81f2db75f60e67cf77f0cbc1a161daa2?s=128&d=identicon&r=PG&f=1", "display_name": "DanDNoob", "link": "https://stackoverflow.com/users/6142630/dandnoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 37017899, "answer_count": 1, "score": 1, "last_activity_date": 1516005706, "creation_date": 1462330712, "last_edit_date": 1516005706, "question_id": 37017634, "link": "https://stackoverflow.com/questions/37017634/rails-server-launch-fail", "title": "Rails Server Launch Fail", "body": "<p>I need help to fix my ruby. It was working perfectly fine until this morning when I tried to start up my rails server and I've received this error msg:</p>\n\n<blockquote>\n  <p>Daniels-MacBook-Pro:myrubyblog daniellim$ rails s -p 5040 /Users/daniellim/.rbenv/versions/2.3.0/bin/rails:23:in load': cannot load such file -- /Users/daniellim/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0/gems/rails-4.2.6/bin/rails (LoadError)     from /Users/daniellim/.rbenv/versions/2.3.0/bin/rails:23:in main>'</p>\n</blockquote>\n\n<p>I have tried bundle install and update but it doesn't seem to be working.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "attachment"], "comments": [{"owner": {"reputation": 8117, "user_id": 1207687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cOUI4.jpg?s=128&g=1", "display_name": "Wes Foster", "link": "https://stackoverflow.com/users/1207687/wes-foster"}, "edited": false, "score": 0, "creation_date": 1462330075, "post_id": 37017522, "comment_id": 61586860, "body": "You&#39;re calling both <code>Attachment::Logo</code> and <code>Attachment::AccountLogo</code> -- which is it?"}, {"owner": {"reputation": 53, "user_id": 6185880, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153930977410027/picture?type=large", "display_name": "Jva Dev", "link": "https://stackoverflow.com/users/6185880/jva-dev"}, "reply_to_user": {"reputation": 8117, "user_id": 1207687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cOUI4.jpg?s=128&g=1", "display_name": "Wes Foster", "link": "https://stackoverflow.com/users/1207687/wes-foster"}, "edited": false, "score": 0, "creation_date": 1462380087, "post_id": 37017522, "comment_id": 61617057, "body": "Thank you for your answer, I&#39;ve already edit the question. It&#39;s just Attachment::Logo."}, {"owner": {"reputation": 189, "user_id": 4352712, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h58Q5.png?s=128&g=1", "display_name": "aonemd", "link": "https://stackoverflow.com/users/4352712/aonemd"}, "edited": false, "score": 0, "creation_date": 1462380900, "post_id": 37017522, "comment_id": 61617575, "body": "Can you add the form you are sending the params from?  If you want to upload files to Rails, you can use <a href=\"https://github.com/carrierwaveuploader/carrierwave\" rel=\"nofollow noreferrer\">Carrierwave</a>. It will make your life much easier."}], "owner": {"reputation": 53, "user_id": 6185880, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153930977410027/picture?type=large", "display_name": "Jva Dev", "link": "https://stackoverflow.com/users/6185880/jva-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1462380021, "creation_date": 1462329716, "last_edit_date": 1462380021, "question_id": 37017522, "link": "https://stackoverflow.com/questions/37017522/activerecord-attachment-ruby-on-rails", "title": "ActiveRecord Attachment Ruby on Rails", "body": "<p>I have an attachment in an object, but when I try to save the object using an image uploaded from a view, I'm getting the following error:</p>\n\n<pre><code>Completed 422 Unprocessable Entity in 46ms\n[Rollbar] Reporting exception: Failed to save the new associated logo.\n[Rollbar] Exception not reported because Rollbar is disabled\nActiveRecord::RecordNotSaved (Failed to save the new associated logo.):\n</code></pre>\n\n<p>The code (When call save the error is thrown)</p>\n\n<pre><code>logo = Attachment::Logo.new(:asset =&gt; params[:logo])\n  obj.logo = logo\n  if obj.save\n</code></pre>\n\n<p>The object has the Logo</p>\n\n<pre><code>has_one :logo, class_name: 'Attachment::Logo', as: :attachable, :dependent =&gt; :destroy\n</code></pre>\n"}, {"tags": ["ios", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462329822, "post_id": 37017485, "comment_id": 61586802, "body": "For clean, tidy parameters you might want to use the <code>Time.now.to_i</code> epoch format. Then: <code>where(&#39;updated_at&gt;?&#39;, Time.at(params[:updated_at]))</code>"}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 2, "last_activity_date": 1462329930, "creation_date": 1462329930, "answer_id": 37017545, "question_id": 37017485, "link": "https://stackoverflow.com/questions/37017485/send-datetime-to-rails-to-compare-with-whereupdated-at/37017545#37017545", "title": "Send datetime to Rails to compare with where(&quot;updated_at &gt; ?&quot;", "body": "<p>If you're changing the time to tomorrow, then you better have a time machine to put entries in the future. Try setting the time to yesterday.</p>\n"}, {"tags": [], "owner": {"reputation": 394, "user_id": 3390061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/509641d9e6398647f684c8e0cde8097d?s=128&d=identicon&r=PG&f=1", "display_name": "nathanallen", "link": "https://stackoverflow.com/users/3390061/nathanallen"}, "is_accepted": false, "score": 2, "last_activity_date": 1462330729, "creation_date": 1462330729, "answer_id": 37017637, "question_id": 37017485, "link": "https://stackoverflow.com/questions/37017485/send-datetime-to-rails-to-compare-with-whereupdated-at/37017637#37017637", "title": "Send datetime to Rails to compare with where(&quot;updated_at &gt; ?&quot;", "body": "<p>It may be a typo in your question, but you appear to have two question marks in your query parameter: <code>??updated_at=2016-05-02T01:12:57.204Z</code>. As a sanity check, verify <code>params</code> contains the key you want.</p>\n"}, {"comments": [{"owner": {"reputation": 1924, "user_id": 743663, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d8fae52dadf258b81cf53d014c331cf3?s=128&d=identicon&r=PG", "display_name": "Non Umemoto", "link": "https://stackoverflow.com/users/743663/non-umemoto"}, "edited": false, "score": 0, "creation_date": 1462342479, "post_id": 37017888, "comment_id": 61590693, "body": "Thanks!  It works as I expect!  &gt;&gt;delete Yes, I set deleted for soft-delete, what does it mean by &quot;That might be useful to precent end-user confusion&quot;?  what does that mean?"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "reply_to_user": {"reputation": 1924, "user_id": 743663, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d8fae52dadf258b81cf53d014c331cf3?s=128&d=identicon&r=PG", "display_name": "Non Umemoto", "link": "https://stackoverflow.com/users/743663/non-umemoto"}, "edited": false, "score": 0, "creation_date": 1462342767, "post_id": 37017888, "comment_id": 61590795, "body": "So glad to hear!  What I meant by the last statement is that end users (your iOS users) may be confused if list entries without a date filter and see only records that haven&#39;t been deleted, but if they specify a date for filtering, deleted records could suddenly show.  I meant that adding the filter for soft-delete to the date filter logic would keep those deleted records from being returned when they should not be."}, {"owner": {"reputation": 1924, "user_id": 743663, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d8fae52dadf258b81cf53d014c331cf3?s=128&d=identicon&r=PG", "display_name": "Non Umemoto", "link": "https://stackoverflow.com/users/743663/non-umemoto"}, "edited": false, "score": 0, "creation_date": 1462343644, "post_id": 37017888, "comment_id": 61591258, "body": "I see.  I use data fetch without updated_at params only when users login, so it sends active data only.  When users tap the refresh, it gets data with updated_at, so iOS app can fetch deleted info to update it properly.  Does it make sense?"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "reply_to_user": {"reputation": 1924, "user_id": 743663, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d8fae52dadf258b81cf53d014c331cf3?s=128&d=identicon&r=PG", "display_name": "Non Umemoto", "link": "https://stackoverflow.com/users/743663/non-umemoto"}, "edited": false, "score": 0, "creation_date": 1462344566, "post_id": 37017888, "comment_id": 61591766, "body": "Yes, it does.  I mentioned the soft-delete filter for the updated_at query only in case it was unintentionally omitted.  Since you meant for it to work that way, it&#39;s good."}, {"owner": {"reputation": 1924, "user_id": 743663, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d8fae52dadf258b81cf53d014c331cf3?s=128&d=identicon&r=PG", "display_name": "Non Umemoto", "link": "https://stackoverflow.com/users/743663/non-umemoto"}, "edited": false, "score": 0, "creation_date": 1462344668, "post_id": 37017888, "comment_id": 61591822, "body": "Ok, I understand why you said that now, thanks for mentioning that anyway!"}], "tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": true, "score": 2, "last_activity_date": 1462332632, "creation_date": 1462332632, "answer_id": 37017888, "question_id": 37017485, "link": "https://stackoverflow.com/questions/37017485/send-datetime-to-rails-to-compare-with-whereupdated-at/37017888#37017888", "title": "Send datetime to Rails to compare with where(&quot;updated_at &gt; ?&quot;", "body": "<p>I suggest converting the incoming value for <code>updated_at</code> from a <code>string</code> to a <code>DateTime</code>.  Assuming that you're using the standard Rails timestamping, this will allow the database to do date-to-date comparisons for both accuracy and performance.</p>\n\n<p>Here's the updated date comparison code:</p>\n\n<pre><code>entries = entries.where(\"updated_at &gt; ?\", DateTime.parse(updated_at))\n</code></pre>\n\n<p>Assuming that the incoming datetime format remains stable, this should work as you'd expect.  If you think that the datetime format might change, or you'd like to be more flexible in what you accept, consider changing the <code>DateTime.parse</code> to a call to a more robust date parser, such as <a href=\"https://github.com/mojombo/chronic\" rel=\"nofollow\">Chronic</a>.</p>\n\n<p>One last point: did you intend to filter for <code>deleted</code> in the date query, like is happening in the fallback query.  If you've implemented some soft-delete functionality, that might be useful to prevent end-user confusion.</p>\n"}], "owner": {"reputation": 1924, "user_id": 743663, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d8fae52dadf258b81cf53d014c331cf3?s=128&d=identicon&r=PG", "display_name": "Non Umemoto", "link": "https://stackoverflow.com/users/743663/non-umemoto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 37017888, "answer_count": 3, "score": 0, "last_activity_date": 1462335466, "creation_date": 1462329460, "last_edit_date": 1462335466, "question_id": 37017485, "link": "https://stackoverflow.com/questions/37017485/send-datetime-to-rails-to-compare-with-whereupdated-at", "title": "Send datetime to Rails to compare with where(&quot;updated_at &gt; ?&quot;", "body": "<p>I am building the Rails backend api for iOS app data sync.</p>\n\n<p>I want to fetch the latest updated data when users tap the refresh button in iOS app.  To do that, I saved the Rails updated_at in iOS side, then send it when I call get call with updated_at params.</p>\n\n<p>However, I don't know why this code doesn't work in Rails side.</p>\n\n<p>@Rails EntriesControllers</p>\n\n<pre><code># GET /entries\n  def index\n    entries     = current_user.entries\n    updated_at  = params[:updated_at]\n\n    # Filter with updated_at for reloading from mobile app\n    if updated_at.present?\n\n      entries = entries.where(\"updated_at &gt; ?\", updated_at)\n\n    # Get all non deleted objects when logging in from mobile app\n    else\n      entries = entries.where(deleted: false)\n    end\n\n    render json: entries\n  end \n</code></pre>\n\n<p>@Sending Rails Datatime format didn't work.. </p>\n\n<pre><code>https://server.com/api/v1/entries?updated_at=2016-05-02T01:12:57.204Z\n</code></pre>\n\n<p>Even if I change the date of 2016-05-02T01:12:57.204Z to yesterday after I update some entries 1 minute ago, I only get empty data.</p>\n\n<p>It works fine without params like this.</p>\n\n<pre><code>https://server.com/api/v1/entries\n</code></pre>\n\n<p>Any suggestions will be appreciated, thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "edited": false, "score": 0, "creation_date": 1462328651, "post_id": 37017206, "comment_id": 61586508, "body": "one idea is; you create a <code>table-less model</code> [its a normal Ruby class] opening an api doing this job. Then you can call it from anywhere"}, {"owner": {"reputation": 2315, "user_id": 5129663, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8P0ivhj4wM/AAAAAAAAAAI/AAAAAAAAAAo/7JsXqgRUH8w/photo.jpg?sz=128", "display_name": "Amol Udage", "link": "https://stackoverflow.com/users/5129663/amol-udage"}, "edited": false, "score": 0, "creation_date": 1462543142, "post_id": 37017206, "comment_id": 61693157, "body": "You can override <a href=\"http://apidock.com/rails/Hash/as_json\" rel=\"nofollow noreferrer\">as_json</a> method into user model, and then call it from controller as well as from rake task."}], "answers": [{"comments": [{"owner": {"reputation": 235600, "user_id": 39677, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77aa7bc1ace6e4b0b49a2102e4fa4059?s=128&d=identicon&r=PG", "display_name": "Blankman", "link": "https://stackoverflow.com/users/39677/blankman"}, "edited": false, "score": 0, "creation_date": 1462332726, "post_id": 37017255, "comment_id": 61587442, "body": "Isn&#39;t the render method doing some work behind the scenes?  Not sure how I can refactor it out."}, {"owner": {"reputation": 1031, "user_id": 1066244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d78498cf014ece6bf3460a4ee40c3b9?s=128&d=identicon&r=PG", "display_name": "Kenrick Chien", "link": "https://stackoverflow.com/users/1066244/kenrick-chien"}, "reply_to_user": {"reputation": 235600, "user_id": 39677, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77aa7bc1ace6e4b0b49a2102e4fa4059?s=128&d=identicon&r=PG", "display_name": "Blankman", "link": "https://stackoverflow.com/users/39677/blankman"}, "edited": false, "score": 0, "creation_date": 1462395414, "post_id": 37017255, "comment_id": 61625823, "body": "I&#39;m not sure. I&#39;ve had success by passing it a Hash and it converts it to JSON."}], "tags": [], "owner": {"reputation": 1031, "user_id": 1066244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d78498cf014ece6bf3460a4ee40c3b9?s=128&d=identicon&r=PG", "display_name": "Kenrick Chien", "link": "https://stackoverflow.com/users/1066244/kenrick-chien"}, "is_accepted": false, "score": 1, "last_activity_date": 1462719076, "last_edit_date": 1462719076, "creation_date": 1462327656, "answer_id": 37017255, "question_id": 37017206, "link": "https://stackoverflow.com/questions/37017206/how-to-render-json-in-a-rake-task/37017255#37017255", "title": "How to render json in a rake task", "body": "<p>Extract the code to a <a href=\"http://blog.steveklabnik.com/posts/2011-09-09-better-ruby-presenters\" rel=\"nofollow\">presenter</a> or use <a href=\"https://github.com/rails-api/active_model_serializers\" rel=\"nofollow\">ActiveModel::Serializers</a>, so that the controller and the Rake task call this new class.  </p>\n\n<pre><code>class UserPresenter\n  def initialize(user, account, sales)\n    @user = user\n    @account = account\n    @sales = sales\n  end\n\n  def as_json(*)\n    {\n     \"user\": @user,\n     \"account\": @account.map do |a|\n        JSON.parse(a.to_json(include: :addresses))\n      end,  # or @account.as_json(include: :addresses))\n     \"sales\": @sales.map do |s| \n        JSON.parse(s.to_json(include: :products))\n      end  # or @sales.as_json(include: :products))\n    }\n  end\nend\n\n# In the controller\nrender json: UserPresenter.new(@user, @account, @sales)\n</code></pre>\n"}], "owner": {"reputation": 235600, "user_id": 39677, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/77aa7bc1ace6e4b0b49a2102e4fa4059?s=128&d=identicon&r=PG", "display_name": "Blankman", "link": "https://stackoverflow.com/users/39677/blankman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462719076, "creation_date": 1462327298, "question_id": 37017206, "link": "https://stackoverflow.com/questions/37017206/how-to-render-json-in-a-rake-task", "title": "How to render json in a rake task", "body": "<p>I want to move the below logic to somewhere else so I can use it both in my controller and in a rake task.</p>\n\n<p>My controller action looks something like this:</p>\n\n<pre><code>def show\n  @user = User.find(params[:id])\n\n  @account = # load account\n  @sales = # load sales\n  ..\n\n  render :json =&gt; {\n     \"user\": user,\n     \"account\": @account.map do |a|\n        JSON.parse(a.to_json(include: :addresses))\n      end,\n      \"sales\": @sales.map do |s| \n        JSON.parse(s.to_json(include: :products))\n      end\n  }\nend\n</code></pre>\n\n<p>Basically the point is that I have to traverse the associations so the JSON has all of the data in it.</p>\n\n<p>How can I move this logic somewhere else so I can then call it in my controller action and also in a rake task.</p>\n"}, {"tags": ["php", "ruby", "wordpress", "vagrant", "command-line-interface"], "answers": [{"comments": [{"owner": {"reputation": 1013, "user_id": 5644982, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/4fcdeece2bd0769238ae01dfbd39fe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Carter", "link": "https://stackoverflow.com/users/5644982/jordan-carter"}, "edited": false, "score": 0, "creation_date": 1462328632, "post_id": 37017262, "comment_id": 61586503, "body": "1) Yes, I ended up realizing this and ran sudo in front of each command. Unfortunately, installing the wordmove gem failed, because it needed ruby =&gt; 2, but for some odd reason it only was using 1.9, even though I installed 2.3. I uninstalled ruby and installed 2.2, so I&#39;ll let you know what happens. 3) I mean git&#39;s shell, called git bash."}, {"owner": {"reputation": 1013, "user_id": 5644982, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/4fcdeece2bd0769238ae01dfbd39fe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Carter", "link": "https://stackoverflow.com/users/5644982/jordan-carter"}, "edited": false, "score": 0, "creation_date": 1462329715, "post_id": 37017262, "comment_id": 61586773, "body": "Still no luck. I tried with 2.2.4. The odd thing is that which ruby informs me it&#39;s rub22, but then when I go in ssh mode it&#39;s 2.3. I&#39;m not sure how it is upgrading to 2.3 when I uninstalled it in the control panel."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 1013, "user_id": 5644982, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/4fcdeece2bd0769238ae01dfbd39fe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Carter", "link": "https://stackoverflow.com/users/5644982/jordan-carter"}, "edited": false, "score": 0, "creation_date": 1462330821, "post_id": 37017262, "comment_id": 61587026, "body": "When you say <i>go in ssh mode</i> do you mean when you run a command by preceding it with <code>ssh</code>?  When you do that, you&#39;re running a command on the Linux guest, not on your Windows host.  You can verify it by doing this: <code>vagrant ssh uname -a</code>, and you will see info identifying the Linux environment."}, {"owner": {"reputation": 1013, "user_id": 5644982, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/4fcdeece2bd0769238ae01dfbd39fe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Carter", "link": "https://stackoverflow.com/users/5644982/jordan-carter"}, "edited": false, "score": 0, "creation_date": 1462342697, "post_id": 37017262, "comment_id": 61590767, "body": "The issue was I made a &quot;pre-provision.sh&quot; file when it needed to be &quot;provision-pre.sh&quot;. Ooops.....By ssh mode, I meant I enter the command &quot;vagrant ssh&quot;, which brings me into a whole different mode. By the way, I&#39;m still not sure why it&#39;s identifying me as having ruby 2.3 in that mode, when I uninstalled it in the control panel."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 1013, "user_id": 5644982, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/4fcdeece2bd0769238ae01dfbd39fe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Carter", "link": "https://stackoverflow.com/users/5644982/jordan-carter"}, "edited": false, "score": 0, "creation_date": 1462344198, "post_id": 37017262, "comment_id": 61591560, "body": "@JordanCarter Please reread my comment after the first sentence (question).  Am I right or wrong that you&#39;re running commands on the Linux VM when you use <code>vagrant ssh</code>?"}, {"owner": {"reputation": 1013, "user_id": 5644982, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/4fcdeece2bd0769238ae01dfbd39fe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Carter", "link": "https://stackoverflow.com/users/5644982/jordan-carter"}, "edited": false, "score": 0, "creation_date": 1462345639, "post_id": 37017262, "comment_id": 61592378, "body": "Looks like it. I get this back: Linux vvv 3.13.0-85-generic #129-Ubuntu SMP Thu Mar 17 20:50:15 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux"}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 1013, "user_id": 5644982, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/4fcdeece2bd0769238ae01dfbd39fe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Carter", "link": "https://stackoverflow.com/users/5644982/jordan-carter"}, "edited": false, "score": 0, "creation_date": 1462345818, "post_id": 37017262, "comment_id": 61592493, "body": "So then is the answer that you have Ruby 2.3 installed on the Linux VM?"}, {"owner": {"reputation": 1013, "user_id": 5644982, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/4fcdeece2bd0769238ae01dfbd39fe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Carter", "link": "https://stackoverflow.com/users/5644982/jordan-carter"}, "edited": false, "score": 0, "creation_date": 1462346137, "post_id": 37017262, "comment_id": 61592652, "body": "It seems logical, although I&#39;m unsure how to check this. The whole installation process was automated when I ran my first vagrant up."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 1013, "user_id": 5644982, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/4fcdeece2bd0769238ae01dfbd39fe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Carter", "link": "https://stackoverflow.com/users/5644982/jordan-carter"}, "edited": false, "score": 0, "creation_date": 1462346206, "post_id": 37017262, "comment_id": 61592685, "body": "You can check it by asking Ruby its version: <code>vagrant ssh ruby -v</code>.  Or, <code>vagrant ssh</code> to get a shell and poke around, e.g. <code>which ruby</code>."}, {"owner": {"reputation": 1013, "user_id": 5644982, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/4fcdeece2bd0769238ae01dfbd39fe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Carter", "link": "https://stackoverflow.com/users/5644982/jordan-carter"}, "edited": false, "score": 0, "creation_date": 1462346431, "post_id": 37017262, "comment_id": 61592801, "body": "Yes, and it shows 2.3. Actually I just found out that in my provision.sh file, it is automatically giving me the latest version of ruby every time I provision vagrant. There&#39;s the culprit! Now to figure out how to modify this mess..."}, {"owner": {"reputation": 1013, "user_id": 5644982, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/4fcdeece2bd0769238ae01dfbd39fe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Carter", "link": "https://stackoverflow.com/users/5644982/jordan-carter"}, "edited": false, "score": 0, "creation_date": 1462383851, "post_id": 37017262, "comment_id": 61619207, "body": "I accepted your answer. Although it did not answer the question per se (the answer was I had a typo naming the .sh file), it was still very valuable information and I appreciate all of your help. Thank you."}], "tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": true, "score": 0, "last_activity_date": 1462327713, "creation_date": 1462327713, "answer_id": 37017262, "question_id": 37017177, "link": "https://stackoverflow.com/questions/37017177/ruby-wordmove-command-not-found-in-cli-gem-not-installing/37017262#37017262", "title": "ruby wordmove command not found in cli (gem not installing)", "body": "<p>1) When you run <code>apt-get</code>, you need to run it as root.  You can (usually) accomplish this by prefacing the entire command with <code>sudo</code>:</p>\n\n<pre><code>sudo apt-get install -y ruby-dev\n</code></pre>\n\n<p>Personally, I prefer using <code>rvm</code> on Linux for managing Ruby.  You can install Ruby as your user, not as root, when using rvm, and rvm makes it trivially easy to have multiple versions of Ruby and JRuby and switch among them.</p>\n\n<p>2) I've heard multiple reports of Ruby 2.3 not working properly on Windows 10.  Unfortunately, I don't remember what the problem was.  If you have any unexplained issues, you might need to downgrade to Ruby 2.2.</p>\n\n<p>3) What do you mean by <code>git bash</code>?</p>\n"}], "owner": {"reputation": 1013, "user_id": 5644982, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/4fcdeece2bd0769238ae01dfbd39fe1d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Carter", "link": "https://stackoverflow.com/users/5644982/jordan-carter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 37017262, "answer_count": 1, "score": 0, "last_activity_date": 1462330714, "creation_date": 1462327082, "last_edit_date": 1462330714, "question_id": 37017177, "link": "https://stackoverflow.com/questions/37017177/ruby-wordmove-command-not-found-in-cli-gem-not-installing", "title": "ruby wordmove command not found in cli (gem not installing)", "body": "<p>I'm trying to install wordmove to easily push my wordpress local site (using vagrant VVV) to my server. I followed these instructions exactly, but it does not appear to be installing properly <a href=\"http://discover.webpagearchitecture.com/wordmove-wordpress-workflow/\" rel=\"nofollow\">http://discover.webpagearchitecture.com/wordmove-wordpress-workflow/</a></p>\n\n<p>I also installed ruby 2.2.4 using the windows installer, since I'm on Windows 10. </p>\n\n<p>When I provision vagrant, I don't appear to have wordmove installed. When I try to use any wordmove commands, my cli just tells me how it's not recognized.</p>\n\n<p>Strangely enough, I've been seeing ruby version 22 in the cli, but when I enter vagrant ssh mode, it informs me the version is 2.3.0. I know 2.3.0 causes some issues with Windows...but have no clue why it is showing that version.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "search"], "comments": [{"owner": {"reputation": 174, "user_id": 2112183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e51a8b1e67ebcdaf55480b65a4ed365?s=128&d=identicon&r=PG", "display_name": "luizrogeriocn", "link": "https://stackoverflow.com/users/2112183/luizrogeriocn"}, "edited": false, "score": 0, "creation_date": 1462333535, "post_id": 37017139, "comment_id": 61587652, "body": "Maybe this gem will be helpful: <a href=\"https://github.com/activerecord-hackery/ransack\" rel=\"nofollow noreferrer\">github.com/activerecord-hackery/ransack</a> It lets you search through a model and its associations easily, you can have a single form field search through all attributes at once."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4902249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e76f9f77e4f12f9c7064d9c162425f10?s=128&d=identicon&r=PG&f=1", "display_name": "Anilkumar Amrutham", "link": "https://stackoverflow.com/users/4902249/anilkumar-amrutham"}, "is_accepted": false, "score": 0, "last_activity_date": 1462339811, "last_edit_date": 1462339811, "creation_date": 1462330770, "answer_id": 37017648, "question_id": 37017139, "link": "https://stackoverflow.com/questions/37017139/rails-where-query-in-multiple-table/37017648#37017648", "title": "rails where query in multiple table", "body": "<p>You can use ajax call to send parameters, and in controller you need to create a query with sql.</p>\n\n<p>eg:</p>\n\n<p>get the all params into loacal variables or you can use directly.</p>\n\n<pre><code>reg_no = params[:reg_no]\nmake = params[:make]\nquery = 'where '\n\nif reg_no.present?\n query = query+ \"reg_no ilike #{reg_no} AND \"\nif make.present?\n query = query + \"make ilike #{make} AND \"\n</code></pre>\n\n<p>use \"=\" is user enters \"entire string\" if it is partial use \"ilike\".</p>\n\n<p>now you can use join and use the where condition.</p>\n"}], "owner": {"reputation": 115, "user_id": 5851209, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/6c06d629317e0c88f9c9bbaff0a037cb?s=128&d=identicon&r=PG&f=1", "display_name": "Anbazhagan P", "link": "https://stackoverflow.com/users/5851209/anbazhagan-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 214, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462339811, "creation_date": 1462326815, "last_edit_date": 1592644375, "question_id": 37017139, "link": "https://stackoverflow.com/questions/37017139/rails-where-query-in-multiple-table", "title": "rails where query in multiple table", "body": "<p>I have a form which has fields from around three tables, and user can fill in any field and they can make a search.</p>\n<p>For example i have these table and columns</p>\n<blockquote>\n<p>Vehicle:</p>\n<ul>\n<li>rego_num</li>\n<li>make</li>\n<li>model</li>\n<li>vin</li>\n<li>engine_num</li>\n<li>transmission, ...</li>\n</ul>\n<p>Customer:</p>\n<ul>\n<li>name</li>\n<li>surname</li>\n<li>email_address</li>\n</ul>\n<p>Address:</p>\n<ul>\n<li>address1</li>\n<li>address2</li>\n<li>address3</li>\n<li>phone</li>\n<li>work_num</li>\n<li>primary_num</li>\n<li>fax</li>\n</ul>\n</blockquote>\n<pre><code>Vehicle belongs_to Customer\nCustomer has_one address\n</code></pre>\n<p>User can make search in any of the above mentioned fields, for ex they can enter rego alone and find serch or rego with make and model or name alone or with phone,</p>\n<p>they can enter partial phone number and it should find it, phone is integer column.</p>\n<p>I thought of finding vehicle column, if vehicle exist and then find customer, but the problem is they can enter customer fields alone.</p>\n<p>I think i can write a joins and do a where query, like</p>\n<pre><code>vehicle.joins(:customer)\n</code></pre>\n<p>but address is related to vehicle, Can anyone suggest me how to send params to search method and write a query to find records</p>\n<p>I checked pg_search gem it has one keyword to search against multiple columns, but i have multiple value to search against the particular column.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2736, "user_id": 592229, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d23e0616c0b2862d2226ea0792c920cc?s=128&d=identicon&r=PG", "display_name": "ezuk", "link": "https://stackoverflow.com/users/592229/ezuk"}, "edited": false, "score": 1, "creation_date": 1462324427, "post_id": 37016783, "comment_id": 61585560, "body": "One thing to consider: Do you really want to use syntax that&#39;s so arcane, you have trouble finding it yourself? Might be worth going with something a bit more mundane (but which other maintainers could more easily understand in the future). Just a thought."}], "answers": [{"tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": true, "score": 3, "last_activity_date": 1462324211, "creation_date": 1462324211, "answer_id": 37016820, "question_id": 37016783, "link": "https://stackoverflow.com/questions/37016783/ruby-inheritance-syntax-passing-arguments-to-the-base-class/37016820#37016820", "title": "ruby inheritance syntax - passing arguments to the base class", "body": "<p>It's a common trick to make a normal class/module method call look like a parameterized type. </p>\n\n<p>There is actually a module method <code>Sequel::Model</code> which takes a single argument and returns a class (see <a href=\"https://github.com/jeremyevans/sequel/blob/master/lib%2Fsequel%2Fmodel.rb#L39\" rel=\"nofollow\">the source code</a>).</p>\n"}, {"tags": [], "owner": {"reputation": 1031, "user_id": 1066244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d78498cf014ece6bf3460a4ee40c3b9?s=128&d=identicon&r=PG", "display_name": "Kenrick Chien", "link": "https://stackoverflow.com/users/1066244/kenrick-chien"}, "is_accepted": false, "score": 0, "last_activity_date": 1462326311, "creation_date": 1462326311, "answer_id": 37017085, "question_id": 37016783, "link": "https://stackoverflow.com/questions/37016783/ruby-inheritance-syntax-passing-arguments-to-the-base-class/37017085#37017085", "title": "ruby inheritance syntax - passing arguments to the base class", "body": "<p>Have you considered using the <code>#inherited</code> hook of Class?</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.0.0/Class.html#method-i-inherited\" rel=\"nofollow\">http://ruby-doc.org/core-2.0.0/Class.html#method-i-inherited</a></p>\n\n<p>From the docs in the link above:</p>\n\n<pre><code>class Foo\n\n  def self.inherited(subclass)\n\n   puts \"New subclass: #{subclass}\"\n\n  end\nend\n\nclass Bar &lt; Foo\nend\n\nclass Baz &lt; Bar\nend\n</code></pre>\n"}], "owner": {"reputation": 10613, "user_id": 6062, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1178609ba6835138fb8ae7f0a2eeffc2?s=128&d=identicon&r=PG", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6062/nathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 1, "accepted_answer_id": 37016820, "answer_count": 2, "score": 2, "last_activity_date": 1494334670, "creation_date": 1462323850, "question_id": 37016783, "link": "https://stackoverflow.com/questions/37016783/ruby-inheritance-syntax-passing-arguments-to-the-base-class", "title": "ruby inheritance syntax - passing arguments to the base class", "body": "<p>When creating models for the sequel database gem in ruby a syntax like this is used:</p>\n\n<pre><code>class Users &lt; Sequel::Model(:users) # &lt;= what method is getting called here?\n # other stuff...\nend\n</code></pre>\n\n<p>Where <code>:users</code> is the name of the table.</p>\n\n<p>I would like to pass an argument to the base class like this when the child class is defined for one of my own classes, but I can't work out how to do it. I don't know what this syntax is called, and I couldn't find any examples of it in my googling. I tried looking at the source for Sequel::Model as well, but its such a big class I couldn't find the relevant section.</p>\n\n<p>Does anyone how what this syntax is and how it works?</p>\n"}, {"tags": ["ruby", "sass"], "comments": [{"owner": {"reputation": 1882, "user_id": 1423259, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/KMTXr.png?s=128&g=1", "display_name": "tommueller", "link": "https://stackoverflow.com/users/1423259/tommueller"}, "edited": false, "score": 0, "creation_date": 1464344198, "post_id": 37016103, "comment_id": 62458505, "body": "Same problem for me!"}], "owner": {"reputation": 1966, "user_id": 3653668, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73cf2795c698c4b903cafb41a6a34bf6?s=128&d=identicon&r=PG&f=1", "display_name": "crowhill", "link": "https://stackoverflow.com/users/3653668/crowhill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1462318695, "creation_date": 1462318695, "last_edit_date": 1495542157, "question_id": 37016103, "link": "https://stackoverflow.com/questions/37016103/ruby-jekyll-sass-directly-import-css-file-not-working", "title": "Ruby/Jekyll sass: directly import .css file not working", "body": "<p>According to <a href=\"https://stackoverflow.com/questions/7111610/import-regular-css-file-in-scss-file\">this</a> answer, I should be able to <code>@import</code> a <code>.css</code> file directly (as opposed to an import link).</p>\n\n<p>However, I have the following situation:</p>\n\n<p>If the file is named <code>bootstrap.css</code></p>\n\n<pre><code>@import \"../external_components/bootstrap/css/bootstrap\";\n</code></pre>\n\n<p>Does not work, because sass can't find the file.</p>\n\n<pre><code>@import \"../external_components/bootstrap/css/bootstrap.css\";\n</code></pre>\n\n<p>Does work, but now I have the import link and an extra <code>.css</code> file hanging around.</p>\n\n<p>Now, the answer I linked only mentions <code>libsass</code> and <code>node</code> but I would really like to be able to do something like that with <code>ruby sass</code>. Is there a way? Am I not understanding something basic?</p>\n\n<p>My <code>sass -v</code> is <code>3.4</code> and apparently up-to-date.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "edited": false, "score": 6, "creation_date": 1462318880, "post_id": 37016075, "comment_id": 61584235, "body": "Post your controller action and your view code"}], "answers": [{"comments": [{"owner": {"reputation": 174, "user_id": 2112183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e51a8b1e67ebcdaf55480b65a4ed365?s=128&d=identicon&r=PG", "display_name": "luizrogeriocn", "link": "https://stackoverflow.com/users/2112183/luizrogeriocn"}, "edited": false, "score": 0, "creation_date": 1462333887, "post_id": 37016503, "comment_id": 61587722, "body": "Good explanation. As we are only guessing, since there is no code to look at, scores can possibly be an association. If that is the case, it would be nice for the OP to read about eager loading on activerecord: <a href=\"http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 1, "last_activity_date": 1462321828, "last_edit_date": 1462321828, "creation_date": 1462321472, "answer_id": 37016503, "question_id": 37016075, "link": "https://stackoverflow.com/questions/37016075/how-to-get-data-shown-on-rails-console-into-my-views-in-rails/37016503#37016503", "title": "How to get data shown on rails console into my views in rails", "body": "<p>Without the code of your controller and your view, I can only <strong>guess</strong> the cause of your problem.</p>\n\n<p>The code <code>c.scores.all</code> returns an <code>ActiveRecord::Relation</code>, not an array of models.</p>\n\n<p>A relation is lazily loaded, which means it does not query DB until you retrieve data from it (typically by calling <code>to_a</code> or <code>each</code> on it). This may be the cause of your problem.</p>\n\n<p>Rails console and irb work, by default, in <strong>inspect mode</strong>, which means whenever you enter an expression, Rails console automatically calls <code>inspect</code> on the return value of that expression and prints the result. <code>ActiveRecord::Relation#inspect</code> internally calls <code>to_a</code> thus accesses DB, so you can see your data in Rails console.</p>\n"}], "owner": {"reputation": 1, "user_id": 6288211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51f9acaf0fb6a5f457543348d65007bc?s=128&d=identicon&r=PG&f=1", "display_name": "user6288211", "link": "https://stackoverflow.com/users/6288211/user6288211"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462324660, "creation_date": 1462318489, "last_edit_date": 1462324660, "question_id": 37016075, "link": "https://stackoverflow.com/questions/37016075/how-to-get-data-shown-on-rails-console-into-my-views-in-rails", "title": "How to get data shown on rails console into my views in rails", "body": "<p>I am new to rails and am having trouble showing what I get in my rails console to my views pages.</p>\n\n<p>In my rails console, I will type <code>c = Course.find(21)</code>.\nThen when I put <code>c.scores.all</code> in my console I get all of the scores columns that are associated with the Course model, with the id of 21. </p>\n\n<p>However, I cannot do the same thing in the controller or the views. I tried putting the same information but it does not find the scores that are associated with the courses_id in the course/show page. I know this is really simple but cannot seem to get this to work. Thanks</p>\n"}, {"tags": ["ruby", "github", "jekyll", "github-pages"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462321463, "post_id": 37015860, "comment_id": 61584886, "body": "Did you build out the pages before pushing back to your repo?"}, {"owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 2, "creation_date": 1462335951, "post_id": 37015860, "comment_id": 61588267, "body": "Duplicate of <a href=\"http://stackoverflow.com/questions/30625044/jekyll-post-not-generated\" title=\"jekyll post not generated\">stackoverflow.com/questions/30625044/jekyll-post-not-generat&zwnj;&#8203;ed</a>. Your post date was in the future. Set you time_zone in _config.yml and republish."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4872501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jxSqh.jpg?s=128&g=1", "display_name": "kaanosman", "link": "https://stackoverflow.com/users/4872501/kaanosman"}, "is_accepted": false, "score": 0, "last_activity_date": 1462576040, "creation_date": 1462576040, "answer_id": 37082634, "question_id": 37015860, "link": "https://stackoverflow.com/questions/37015860/blog-posts-are-not-showing-in-jekyll/37082634#37082634", "title": "Blog posts are not showing in Jekyll?", "body": "<p>you must post added _post directory and post name must be year-mouth-day-post_name.md format<br>\nafter  on the blog main directory run command <strong>bundle exec jekyll build</strong> or <strong>jekyll build</strong> and push remote repo.</p>\n"}], "owner": {"reputation": 21, "user_id": 5375922, "user_type": "registered", "profile_image": "https://graph.facebook.com/1482257745435070/picture?type=large", "display_name": "Mubaris NK", "link": "https://stackoverflow.com/users/5375922/mubaris-nk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 487, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462576040, "creation_date": 1462316929, "question_id": 37015860, "link": "https://stackoverflow.com/questions/37015860/blog-posts-are-not-showing-in-jekyll", "title": "Blog posts are not showing in Jekyll?", "body": "<p>I have created a blog using Jekyll now theme. And I've created repo in github to publish the blog. But the posts are not showing in github pages.</p>\n\n<p>repo: <a href=\"https://github.com/mubumbz/blog\" rel=\"nofollow\">https://github.com/mubumbz/blog</a></p>\n\n<p>blog: <a href=\"http://mubumbz.github.io/blog/\" rel=\"nofollow\">http://mubumbz.github.io/blog/</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "sqlite"], "answers": [{"tags": [], "owner": {"reputation": 799, "user_id": 5428615, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1084401491578780/picture?type=large", "display_name": "liborza", "link": "https://stackoverflow.com/users/5428615/liborza"}, "is_accepted": true, "score": 0, "last_activity_date": 1462316791, "creation_date": 1462316791, "answer_id": 37015846, "question_id": 37015677, "link": "https://stackoverflow.com/questions/37015677/rails-options-saving-into-db-onchange/37015846#37015846", "title": "Rails - Options saving into DB (onchange)", "body": "<p>Solved by adding private function in controller:</p>\n\n<p><strong>CONTROLLER</strong></p>\n\n<pre><code>  def update_result\n      @result = Bitbucket.find(params[:id])\n      @result.update_attributes(update_params)\n  end\n\n  private\n    def update_params\n      params.require(:bitbucket).permit(:result)\n    end\n</code></pre>\n"}], "owner": {"reputation": 799, "user_id": 5428615, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1084401491578780/picture?type=large", "display_name": "liborza", "link": "https://stackoverflow.com/users/5428615/liborza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 37015846, "answer_count": 1, "score": 0, "last_activity_date": 1462316791, "creation_date": 1462315824, "question_id": 37015677, "link": "https://stackoverflow.com/questions/37015677/rails-options-saving-into-db-onchange", "title": "Rails - Options saving into DB (onchange)", "body": "<p>I'm trying to save options to DB.\nGetting this in DB while saving in console:</p>\n\n<ul>\n<li>Right selected value: <code>\"result\"=&gt;\"1\"</code> its 1-4</li>\n<li>Right value of updating id: <code>\"id\"=&gt;\"4\"</code> its 1-100</li>\n</ul>\n\n<p>I'll appreciate any advice or help with that, trying to figured out for couple hours.</p>\n\n<p>But still getting this error:</p>\n\n<p><strong>CONSOLE</strong></p>\n\n<pre><code>Started POST \"/update_result/4\" for 65.200.165.210 at 2016-05-03 22:42:16 +0000\nCannot render console from 65.200.165.210! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255\nProcessing by DashboardController#update_result as JS\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"bitbucket\"=&gt;{\"result\"=&gt;\"1\"}, \"id\"=&gt;\"4\"}\n  Bitbucket Load (0.5ms)  SELECT  \"bitbuckets\".* FROM \"bitbuckets\" WHERE \"bitbuckets\".\"id\" = ? LIMIT 1  [[\"id\", 4]]\n   (0.1ms)  begin transaction\n   (0.2ms)  rollback transaction\nCompleted 500 Internal Server Error in 34ms (ActiveRecord: 0.8ms)\n\nArgumentError (When assigning attributes, you must pass a hash as an argument.):\n  app/controllers/dashboard_controller.rb:13:in `update_result'\n\n\n  Rendered /usr/local/rvm/gems/ruby-2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/middleware/templates/rescues/_source.erb (12.0ms)\n  Rendered /usr/local/rvm/gems/ruby-2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (5.9ms)\n  Rendered /usr/local/rvm/gems/ruby-2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (1.7ms)\n  Rendered /usr/local/rvm/gems/ruby-2.3.0/gems/actionpack-4.2.5/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (183.9ms)\n</code></pre>\n\n<p><strong>ROUTES</strong></p>\n\n<pre><code>post 'update_result/:id', to: 'dashboard#update_result', as: :update_result\n</code></pre>\n\n<p><strong>CONTROLLER</strong></p>\n\n<pre><code>  def update_result\n      @result = Bitbucket.find(params[:id])\n      @result.update_attributes(params[:result])\n  end\n</code></pre>\n\n<p><strong>FORM IN VIEW</strong></p>\n\n<pre><code>&lt;%= form_for(commit, url: update_result_path(commit), :method =&gt; :post, :remote =&gt; true) do |r| %&gt;\n   &lt;%= r.select :result, [['Waiting', 1], ['Success', 2], ['Broken - Not Submitted', 3], ['Broken - Quick Win', 4]], { selected: commit.result }, { onclick: \"$(this).parent('form').submit();\" } %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>DB MIGRATION</strong></p>\n\n<pre><code>create_table :bitbuckets do |t|\n  t.string :name\n  t.text :message\n  t.text :date\n  t.datetime :remain, :null =&gt; false, :default =&gt; Time.now\n  t.integer :assignee\n  t.integer :result\n\n  t.timestamps null: false\nend\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "wicked-pdf"], "answers": [{"tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": true, "score": 3, "last_activity_date": 1462316691, "creation_date": 1462316691, "answer_id": 37015829, "question_id": 37015581, "link": "https://stackoverflow.com/questions/37015581/rails-cant-monkey-patch-wicked-pdf-gem/37015829#37015829", "title": "Rails - Can&#39;t monkey-patch wicked_pdf gem", "body": "<p><code>WickedPdf#print_command</code> is directly defined in the class <code>WickedPdf</code> (see <a href=\"https://github.com/mileszs/wicked_pdf/blob/master/lib/wicked_pdf.rb#L109\" rel=\"nofollow\">the source code</a>), so it shadows any <code>#print_command</code> defined in the modules <code>include</code>d by the class. To override it's behavior, you can use <code>Module#prepend</code> if you are using Ruby >= 2.0.0, or alias method chain otherwise. Of course you can always open the class <code>WickedPdf</code> and redefine the method no matter which version of Ruby you are using.</p>\n\n<h2>Using <code>Module#prepend</code></h2>\n\n<pre><code>module WickedPdfExtension\n  def print_command(cmd)\n    puts \"\\n\\nthis is my modification\\n\\n\"\n  end\nend\n\nWickedPdf.prepend(WickedPdfExtension)\n</code></pre>\n\n<h2>Using alias method chain</h2>\n\n<pre><code>module WickedPdfExtension\n  extends ActiveSupport::Concern\n\n  included do\n    def print_command_with_modification(cmd)\n      puts \"\\n\\nthis is my modification\\n\\n\"\n    end\n\n    alias_method_chain :print_command, :modification\n  end\nend\n\nWickedPdf.include(WickedPdfExtension)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8800, "user_id": 14533, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a8b289d40d80dc4f1a994f735a152f65?s=128&d=identicon&r=PG", "display_name": "Gustavo Rubio", "link": "https://stackoverflow.com/users/14533/gustavo-rubio"}, "is_accepted": false, "score": 1, "last_activity_date": 1462316896, "creation_date": 1462316896, "answer_id": 37015855, "question_id": 37015581, "link": "https://stackoverflow.com/questions/37015581/rails-cant-monkey-patch-wicked-pdf-gem/37015855#37015855", "title": "Rails - Can&#39;t monkey-patch wicked_pdf gem", "body": "<p>I think you would need to <em>open</em> the class:</p>\n\n<pre><code>class WickedPdf\n  def print_command(cmd)\n    puts \"\\n\\nthis is my modification\\n\\n\" \n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 37015829, "answer_count": 2, "score": 0, "last_activity_date": 1462316896, "creation_date": 1462315189, "last_edit_date": 1462315862, "question_id": 37015581, "link": "https://stackoverflow.com/questions/37015581/rails-cant-monkey-patch-wicked-pdf-gem", "title": "Rails - Can&#39;t monkey-patch wicked_pdf gem", "body": "<p>I am trying to monkey-patch the <a href=\"https://github.com/mileszs/wicked_pdf\" rel=\"nofollow\">wicked_pdf gem</a>, but my patch is not being recognized.</p>\n\n<p>If I go into the source code in my local copy of the gem and modify the <a href=\"https://github.com/mileszs/wicked_pdf/blob/8f970f29c4de4f737815446549895a5a9f234c95/lib/wicked_pdf.rb#L109\" rel=\"nofollow\">#print_command method</a> of the WickedPdf class, my modification is reflected in the logs when I view a pdf.</p>\n\n<pre><code># local/gem/path/lib/wicked_pdf.rb\ndef print_command(cmd)\n  puts \"\\n\\nthis is my modification\\n\\n\" # appears in logs\nend\n</code></pre>\n\n<p>However, when I try to implement the same idea as a monkey-patch, in an initializer let's say, that modification is not reflected.</p>\n\n<pre><code># config/initializers/wicked_pdf.rb\nmodule WickedPdfExtension\n  def print_command(cmd)\n    puts \"\\n\\nthis is my modification\\n\\n\" # does not appear in logs\n  end\nend\n\nWickedPdf.include(WickedPdfExtension)\n</code></pre>\n\n<p>I've check that the <code>WickedPdf</code> class exists at the time that I am extending it, and I've confirmed that this happens with other methods, public and private, in the <code>WickedPdf</code> class. Why is my monkey-patch ineffective?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "printing", "barcode", "barcode-printing"], "comments": [{"owner": {"reputation": 647, "user_id": 387558, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e481eca839bcb4b4ed39438e0a485de8?s=128&d=identicon&r=PG", "display_name": "ghr", "link": "https://stackoverflow.com/users/387558/ghr"}, "edited": false, "score": 0, "creation_date": 1462570170, "post_id": 37015579, "comment_id": 61708127, "body": "I get this after running the above code: <a href=\"http://i.imgur.com/KRRKHHE.png\" rel=\"nofollow noreferrer\">i.imgur.com/KRRKHHE.png</a> Looks okay to me. You could try doubling the xdim and height?"}, {"owner": {"reputation": 10382, "user_id": 214365, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/f6c6c6c38de286fd799a34e985b9e9bf?s=128&d=identicon&r=PG", "display_name": "99miles", "link": "https://stackoverflow.com/users/214365/99miles"}, "reply_to_user": {"reputation": 647, "user_id": 387558, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e481eca839bcb4b4ed39438e0a485de8?s=128&d=identicon&r=PG", "display_name": "ghr", "link": "https://stackoverflow.com/users/387558/ghr"}, "edited": false, "score": 0, "creation_date": 1462572801, "post_id": 37015579, "comment_id": 61709040, "body": "@ghr Yep, the generated png files look great to me too, even when zooming way in on the bars. Yet, if you print it you&#39;ll see the edges are fuzzy, which is the issue I&#39;m struggling with. It doesn&#39;t make sense."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1462747460, "post_id": 37015579, "comment_id": 61753278, "body": "If you&#39;ve figured out how to make larger barcodes by adjusting the xdim and  height, i think the gem is doing its purpose. Have you tried converting the png to a different format before printing? Are you sure it&#39;s not a problem with your printer?"}], "answers": [{"comments": [{"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 1, "creation_date": 1463069194, "post_id": 37105986, "comment_id": 61916890, "body": "Is this your answer? You should mark it as such. My guess (wild) is that it&#39;s storing the barcode as a vector on the PDF."}, {"owner": {"reputation": 2737, "user_id": 2394917, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TlI3T.jpg?s=128&g=1", "display_name": "Cody Allan Taylor", "link": "https://stackoverflow.com/users/2394917/cody-allan-taylor"}, "reply_to_user": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1463162474, "post_id": 37105986, "comment_id": 61964199, "body": "Pretty much agree with @Leito. It sounds like you were changing the scale or <i>ratio</i> of the PNG image. Outputting to PDF allowed your printing step to avoid the scaling. Would also explain why the PNG looks fine before printing."}, {"owner": {"reputation": 865, "user_id": 674840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fadc01371e9e25eab561dc0ef3367c1?s=128&d=identicon&r=PG", "display_name": "kronn", "link": "https://stackoverflow.com/users/674840/kronn"}, "edited": false, "score": 0, "creation_date": 1467360654, "post_id": 37105986, "comment_id": 63710652, "body": "please mark this as accepted answer if it solves the problem. Otherwise, people come here to help but cannot."}], "tags": [], "owner": {"reputation": 10382, "user_id": 214365, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/f6c6c6c38de286fd799a34e985b9e9bf?s=128&d=identicon&r=PG", "display_name": "99miles", "link": "https://stackoverflow.com/users/214365/99miles"}, "is_accepted": false, "score": 0, "last_activity_date": 1462750739, "creation_date": 1462750739, "answer_id": 37105986, "question_id": 37015579, "link": "https://stackoverflow.com/questions/37015579/printing-with-barby-gem-barcode-image-is-fuzzy/37105986#37105986", "title": "Printing with Barby gem - barcode image is fuzzy", "body": "<p>The issue turned out to be in the PNG outputter. The solution was to write straight to PDF.</p>\n\n<p>Not sure why the PNG outputter didn't cut it.</p>\n"}], "owner": {"reputation": 10382, "user_id": 214365, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/f6c6c6c38de286fd799a34e985b9e9bf?s=128&d=identicon&r=PG", "display_name": "99miles", "link": "https://stackoverflow.com/users/214365/99miles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1237, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1462750739, "creation_date": 1462315187, "last_edit_date": 1462572894, "question_id": 37015579, "link": "https://stackoverflow.com/questions/37015579/printing-with-barby-gem-barcode-image-is-fuzzy", "title": "Printing with Barby gem - barcode image is fuzzy", "body": "<p>Anyone using the Barby gem ( <a href=\"https://github.com/toretore/barby\">https://github.com/toretore/barby</a> ) to generate and print barcodes? I'm generating and printing png barcode files and they are coming out fuzzy. Note that the generated PNG files look great, even when zooming way in on the bars, yet when it's printed the edges are fuzzy. I'm printing barcodes of the same size and format I got elsewhere on the same printer and they look nice and crisp. </p>\n\n<p>Here's the code I'm using in case anyone has any ideas how I can get it to look better. It's unusable as of now, as the scanner can't read it.</p>\n\n<p>I noticed the created png has 72 dpi, and there seems to be no way to make it higher. That may or may not have something to do with it.</p>\n\n<pre><code>  require 'barby'\n  require 'barby/barcode/code_128'\n  require 'barby/outputter/png_outputter'\n\n  fnsku            = 'ABC123'\n  barcode          = Barby::Code128A.new(fnsku)\n  outputter        = Barby::PngOutputter.new(barcode)\n\n  outputter.height = 50\n  outputter.xdim   = 1\n\n  filepath    = 'barcode.png'\n  File.open(filepath, 'w'){ |f| f.write outputter.to_png }\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 1556, "user_id": 6156030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab58120061222262e44544b199af476?s=128&d=identicon&r=PG&f=1", "display_name": "Laura Paakkinen", "link": "https://stackoverflow.com/users/6156030/laura-paakkinen"}, "edited": false, "score": 0, "creation_date": 1462396247, "post_id": 37015316, "comment_id": 61626249, "body": "Hard to determine what is the purpose of those lines (left over from debugging? someone wanted to create an assertion but did not finish it?). They are not really bugs, since they just don&#39;t have any impact on whether the example will fail or pass (as longs as the methods they refer to are there). But besides that, those lines are just useless code..."}], "answers": [{"tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": true, "score": 1, "last_activity_date": 1462320287, "creation_date": 1462320287, "answer_id": 37016334, "question_id": 37015316, "link": "https://stackoverflow.com/questions/37015316/code-not-actually-asserting-in-rspec/37016334#37016334", "title": "Code not actually asserting in RSpec?", "body": "<p>I don't think there is any special behavior.  I think you've found errors in the test code.</p>\n"}, {"tags": [], "owner": {"reputation": 9845, "user_id": 119822, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/wnqih.jpg?s=128&g=1", "display_name": "Andy Waite", "link": "https://stackoverflow.com/users/119822/andy-waite"}, "is_accepted": false, "score": 0, "last_activity_date": 1462369360, "creation_date": 1462369360, "answer_id": 37029630, "question_id": 37015316, "link": "https://stackoverflow.com/questions/37015316/code-not-actually-asserting-in-rspec/37029630#37029630", "title": "Code not actually asserting in RSpec?", "body": "<p>This doesn't work because there's no assertion, only a comparison:</p>\n\n<p><code>@numbers.permutation(9).entries.size == 0</code></p>\n\n<p>It would need to be written as:</p>\n\n<p><code>@numbers.permutation(9).entries.size.should == 0</code></p>\n\n<p>Or using the newer RSpec syntax:</p>\n\n<p><code>expect(@numbers.permutation(9).entries.size).to eq(0)</code></p>\n"}], "owner": {"reputation": 2013, "user_id": 454544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bb25826e27f8f40dfb51d97e29071d4?s=128&d=identicon&r=PG", "display_name": "Peter Dillinger", "link": "https://stackoverflow.com/users/454544/peter-dillinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 1, "accepted_answer_id": 37016334, "answer_count": 2, "score": 3, "last_activity_date": 1462369360, "creation_date": 1462313712, "question_id": 37015316, "link": "https://stackoverflow.com/questions/37015316/code-not-actually-asserting-in-rspec", "title": "Code not actually asserting in RSpec?", "body": "<p>I'm new to Ruby and in various open source software I've noticed a number of \"statements\" in some RSpec descriptions that appear not to accomplish what they intended, like they wanted to make an assertion, but didn't.  Are these coding errors or is there some RSpec or Ruby magic I'm missing?  (Likelihood of weirdly overloaded operators?)</p>\n\n<p>The examples, with #??? added to the suspect lines:</p>\n\n<p>(rubinius/spec/ruby/core/array/permutation_spec.rb)</p>\n\n<pre><code>it \"returns no permutations when the given length has no permutations\" do\n  @numbers.permutation(9).entries.size == 0        #???\n  @numbers.permutation(9) { |n| @yielded &lt;&lt; n }\n  @yielded.should == []\nend\n</code></pre>\n\n<p>(discourse/spec/models/topic_link_spec.rb)</p>\n\n<pre><code>it 'works' do\n  # ensure other_topic has a post\n  post\n\n  url = \"http://#{test_uri.host}/t/#{other_topic.slug}/#{other_topic.id}\"\n\n  topic.posts.create(user: user, raw: 'initial post')\n  linked_post = topic.posts.create(user: user, raw: \"Link to another topic: #{url}\")\n\n  TopicLink.extract_from(linked_post)\n\n  link = topic.topic_links.first\n  expect(link).to be_present\n  expect(link).to be_internal\n  expect(link.url).to eq(url)\n  expect(link.domain).to eq(test_uri.host)\n\n  link.link_topic_id == other_topic.id       #???\n  expect(link).not_to be_reflection\n\n  ...\n</code></pre>\n\n<p>(chef/spec/unit/chef_fs/parallelizer.rb)</p>\n\n<pre><code>context \"With :ordered =&gt; false (unordered output)\" do\n  it \"An empty input produces an empty output\" do\n    parallelize([], :ordered =&gt; false) do\n      sleep 10\n    end.to_a == []                        #???\n    expect(elapsed_time).to be &lt; 0.1\n  end\n</code></pre>\n\n<p>(bosh/spec/external/aws_bootstrap_spec.rb)</p>\n\n<pre><code>it \"configures ELBs\" do\n  load_balancer = elb.load_balancers.detect { |lb| lb.name == \"cfrouter\" }\n  expect(load_balancer).not_to be_nil\n  expect(load_balancer.subnets.sort {|s1, s2| s1.id &lt;=&gt; s2.id }).to eq([cf_elb1_subnet, cf_elb2_subnet].sort {|s1, s2| s1.id &lt;=&gt; s2.id })\n  expect(load_balancer.security_groups.map(&amp;:name)).to eq([\"web\"])\n\n  config = Bosh::AwsCliPlugin::AwsConfig.new(aws_configuration_template)\n  hosted_zone = route53.hosted_zones.detect { |zone| zone.name == \"#{config.vpc_generated_domain}.\" }\n  record_set = hosted_zone.resource_record_sets[\"\\\\052.#{config.vpc_generated_domain}.\", 'CNAME'] # E.g. \"*.midway.cf-app.com.\"\n  expect(record_set).not_to be_nil\n  record_set.resource_records.first[:value] == load_balancer.dns_name   #???\n  expect(record_set.ttl).to eq(60)\nend\n</code></pre>\n"}, {"tags": ["ruby", "json", "windows", "ms-access"], "comments": [{"owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "edited": false, "score": 0, "creation_date": 1462316252, "post_id": 37015056, "comment_id": 61583493, "body": "Can you retrieve the time column from the Access database as a Double instead of a DateTime, e.g., <code>SELECT CDbl(TimeValue) AS DayFraction FROM tblTimes</code>, which would return <code>0.545138888888889</code> instead of <code>1899-12-30 13:05:00</code>?"}, {"owner": {"reputation": 2553, "user_id": 171451, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4854e54cbfb71a1e6be4a4e1e2ded25e?s=128&d=identicon&r=PG", "display_name": "avguchenko", "link": "https://stackoverflow.com/users/171451/avguchenko"}, "reply_to_user": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "edited": false, "score": 0, "creation_date": 1462317413, "post_id": 37015056, "comment_id": 61583816, "body": "That&#39;s a good idea, but I have a whole lot of tables, and even more of these fields. I do not want to write a custom <code>SELECT</code> for each table. Sequel&#39;s <code>db[:table].all</code> does great. So far i gave up: brute-testing <code>Oj.dump</code> for each <code>Time</code> value of each record, and if it fails, I am adding 71 years to the date. Less than elegant, but works, and fast enough."}, {"owner": {"reputation": 709, "user_id": 6269045, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jBdtv.jpg?s=128&g=1", "display_name": "BitAccesser", "link": "https://stackoverflow.com/users/6269045/bitaccesser"}, "edited": false, "score": 1, "creation_date": 1462597162, "post_id": 37015056, "comment_id": 61713835, "body": "Is this a 32/64bit issue ? Min signed long is (-1)*2^31 or -2147483648. Your value is -2209114500, smaller than the smllest possible long."}, {"owner": {"reputation": 2553, "user_id": 171451, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4854e54cbfb71a1e6be4a4e1e2ded25e?s=128&d=identicon&r=PG", "display_name": "avguchenko", "link": "https://stackoverflow.com/users/171451/avguchenko"}, "edited": false, "score": 0, "creation_date": 1462922190, "post_id": 37015056, "comment_id": 61838808, "body": "Thanks BitAccesser. The Windows machine is a 64-bit machine..."}, {"owner": {"reputation": 709, "user_id": 6269045, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jBdtv.jpg?s=128&g=1", "display_name": "BitAccesser", "link": "https://stackoverflow.com/users/6269045/bitaccesser"}, "edited": false, "score": 0, "creation_date": 1463199269, "post_id": 37015056, "comment_id": 61975274, "body": "Maybe a <code>Ruby</code> issue, update to latest version. Have you tried <code>oj.dump(t, options)</code>? <a href=\"https://github.com/ohler55/oj#options\" rel=\"nofollow noreferrer\">github.com/ohler55/oj#options</a> <a href=\"http://www.ohler.com/oj/Oj.html#dump-class_method\" rel=\"nofollow noreferrer\">ohler.com/oj/Oj.html#dump-class_method</a> <code>time_format</code> or <code>mode</code> maybe help."}, {"owner": {"reputation": 709, "user_id": 6269045, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jBdtv.jpg?s=128&g=1", "display_name": "BitAccesser", "link": "https://stackoverflow.com/users/6269045/bitaccesser"}, "edited": false, "score": 0, "creation_date": 1463212409, "post_id": 37015056, "comment_id": 61978378, "body": "OK, not fixed in latest version (2.3.0) and options also don&#39;t provide a fix, but I fund a Workaround. See my answer."}], "answers": [{"tags": [], "owner": {"reputation": 709, "user_id": 6269045, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jBdtv.jpg?s=128&g=1", "display_name": "BitAccesser", "link": "https://stackoverflow.com/users/6269045/bitaccesser"}, "is_accepted": false, "score": 0, "last_activity_date": 1463214642, "last_edit_date": 1463214642, "creation_date": 1463213394, "answer_id": 37224289, "question_id": 37015056, "link": "https://stackoverflow.com/questions/37015056/oj-time-dump-differences-in-linux-and-windows/37224289#37224289", "title": "Oj Time dump - differences in linux and windows", "body": "<p>Time is not handled properly, but you can convert to float. The result string differ a bit from your original:</p>\n\n\n\n<pre class=\"lang-ruby prettyprint-override\"><code> irb(main):001:0&gt; require 'oj'\n =&gt; true\n irb(main):002:0&gt; t = Time.new(1899,12,30,13,5,0)\n =&gt; 1899-12-30 13:05:00 +0100\n irb(main):003:0&gt; Oj.dump(t)\n RangeError: bignum too big to convert into `long'\n    from (irb):3:in `dump'\n    from (irb):3\n    from C:/Ruby23-x64/bin/irb.cmd:19:in `&lt;main&gt;'\n irb(main):005:0&gt; Oj.dump(t.to_f)\n =&gt; \"-2209118100.0\"\n</code></pre>\n\n<p>Or if you need the exact response you can use an array:</p>\n\n\n\n<pre class=\"lang-ruby prettyprint-override\"><code>irb(main):001:0&gt; require 'oj'\n=&gt; true\nirb(main):002:0&gt; t = Time.new(1899,12,30,13,5,0)\n=&gt; 1899-12-30 13:05:00 +0100\nirb(main):012:0&gt; A1 = Array.new(1) \n=&gt; [nil]\nirb(main):017:0&gt; A1[0] = '^t'\n=&gt; \"^t\"\nirb(main):028:0&gt; A1[1] = t.to_f\n=&gt; \"-2209118100.0\"\nirb(main):035:0&gt; Oj.dump(A1).tr(\"[\",\"{\").tr(\"]\",\"}\")\n=&gt; \"{\\\"^t\\\",\\\"-2209118100.0\\\"}\"\n</code></pre>\n"}], "owner": {"reputation": 2553, "user_id": 171451, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4854e54cbfb71a1e6be4a4e1e2ded25e?s=128&d=identicon&r=PG", "display_name": "avguchenko", "link": "https://stackoverflow.com/users/171451/avguchenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1463214642, "creation_date": 1462312550, "question_id": 37015056, "link": "https://stackoverflow.com/questions/37015056/oj-time-dump-differences-in-linux-and-windows", "title": "Oj Time dump - differences in linux and windows", "body": "<p>I have a time stamp I am obtaining from an Access database. Unfortunately, the timestamp represents the time only, but is stored as <code>1899-12-30 13:05:00 +0000</code>. The date part of it is in a different field. I need to preserve the data as much as possible while I am storing it in a json blob.</p>\n\n<p>I am using Oj (which is wonderful) to dump the data to json. I have encountered the following behavior on the Windows platform:</p>\n\n<pre><code>irb(main):001:0&gt; require 'oj'\n=&gt; true\nirb(main):002:0&gt; t = Time.new(1899,12,30,13,5,0) #this is my actual timestamp\n=&gt; 1899-12-30 13:05:00 +0000\nirb(main):003:0&gt; Oj.dump(t)\nRangeError: bignum too big to convert into `long'\n        from (irb):3:in `dump'\n        from (irb):3\n        from C:/RailsInstaller/Ruby2.2.0/bin/irb:11:in `&lt;main&gt;'\nirb(main):004:0&gt;\n</code></pre>\n\n<p>Now, on linux:</p>\n\n<pre><code>2.3.0 :001 &gt; require 'oj'\n =&gt; true \n2.3.0 :002 &gt; t = Time.new(1899,12,30,13,5,0)\n =&gt; 1899-12-30 13:05:00 +0000 \n2.3.0 :003 &gt; Oj.dump(t)\n =&gt; \"{\\\"^t\\\":-2209114500.000000000e0}\"\n</code></pre>\n\n<p>I need to make this work on Windows because my source database is MS Access. Please help.</p>\n"}, {"tags": ["ruby", "concurrency", "docker"], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 5915864, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8e6fcf38a19811ef68168b825d256d78?s=128&d=identicon&r=PG&f=1", "display_name": "adambsg", "link": "https://stackoverflow.com/users/5915864/adambsg"}, "edited": false, "score": 0, "creation_date": 1462371066, "post_id": 37021294, "comment_id": 61610509, "body": "Ok cool so as an alternative to dockering up a bunch of containers I can just spawn processes and detach them?"}, {"owner": {"reputation": 12155, "user_id": 209899, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/82e80ec9700740692fd54b4492872a47?s=128&d=identicon&r=PG", "display_name": "Gamlor", "link": "https://stackoverflow.com/users/209899/gamlor"}, "reply_to_user": {"reputation": 121, "user_id": 5915864, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8e6fcf38a19811ef68168b825d256d78?s=128&d=identicon&r=PG&f=1", "display_name": "adambsg", "link": "https://stackoverflow.com/users/5915864/adambsg"}, "edited": false, "score": 0, "creation_date": 1462373471, "post_id": 37021294, "comment_id": 61612476, "body": "What do you mean by &#39;detach&#39; the processes. Otherwise, yes, you can span up a few ruby processes doing work in parallel. For example each processing http requests."}, {"owner": {"reputation": 121, "user_id": 5915864, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8e6fcf38a19811ef68168b825d256d78?s=128&d=identicon&r=PG&f=1", "display_name": "adambsg", "link": "https://stackoverflow.com/users/5915864/adambsg"}, "edited": false, "score": 0, "creation_date": 1462391103, "post_id": 37021294, "comment_id": 61623519, "body": "so basically I would have <code>pids &lt;&lt; Process.spawn(&quot;exec rspec somespec&quot;)</code> which I wold then <code>Process.detach(pids[-1])</code> for X specs. then monitor my pids checking the count. When the count is less then the number of specs I want going concurrently I would pop another spec off a array and spawn it in a process. These would be Selenium tests, so any overhead is not really a problem."}], "tags": [], "owner": {"reputation": 12155, "user_id": 209899, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/82e80ec9700740692fd54b4492872a47?s=128&d=identicon&r=PG", "display_name": "Gamlor", "link": "https://stackoverflow.com/users/209899/gamlor"}, "is_accepted": true, "score": 1, "last_activity_date": 1462347307, "creation_date": 1462347307, "answer_id": 37021294, "question_id": 37014903, "link": "https://stackoverflow.com/questions/37014903/do-ruby-gi-lmitations-apply-to-docker-containers/37021294#37021294", "title": "Do ruby gi lmitations apply to docker containers", "body": "<p>The Global Interpreter Lock (GIL) only applies within one process. </p>\n\n<p>You run multiple instances of Ruby. Each process get it's own GIL and will be able to do work in parallel. Of course, these instances also won't share any memory and state. </p>\n\n<p>This is independent of docker. As long as you run in multiple Ruby process, they won't block each other on the GIL.</p>\n"}], "owner": {"reputation": 121, "user_id": 5915864, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8e6fcf38a19811ef68168b825d256d78?s=128&d=identicon&r=PG&f=1", "display_name": "adambsg", "link": "https://stackoverflow.com/users/5915864/adambsg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 37021294, "answer_count": 1, "score": 0, "last_activity_date": 1462347307, "creation_date": 1462311857, "last_edit_date": 1495535288, "question_id": 37014903, "link": "https://stackoverflow.com/questions/37014903/do-ruby-gi-lmitations-apply-to-docker-containers", "title": "Do ruby gi lmitations apply to docker containers", "body": "<p>Memory overhead aside. If I create 5 docker containers with ruby in them on a quad core machine can I run the instances without any worry of running into issues with the gil/mri. For example I load up 5 containers each, with the official ruby image and a simple app that increments an array (not using mutex.synchronize) several hundred times. should I be able to expect these to work consistently? I don't consider myself a ruby expert, but I have done several basic experiments and have not had any weirdness occur. I would be interested in other types of tests I could run and see for myself if nobody more well versed in Ruby has a answer. The question posed here <a href=\"https://stackoverflow.com/questions/29924031/is-docker-a-possible-solution-to-ruby-gil-limitation-in-rails\">Is docker a possible solution to ruby GIL limitation in rails?</a> was informative but it did not really seem to answer my question.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1462313517, "post_id": 37014891, "comment_id": 61582613, "body": "whats your number type, decimal or integer in schema ?"}], "answers": [{"comments": [{"owner": {"reputation": 595, "user_id": 1502223, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/31a9a72c0e3ab127f2a28a0e9d513ef5?s=128&d=identicon&r=PG", "display_name": "user1502223", "link": "https://stackoverflow.com/users/1502223/user1502223"}, "edited": false, "score": 0, "creation_date": 1462312850, "post_id": 37015108, "comment_id": 61582368, "body": "I&#39;ve tried this and put it in a before_validation but it still throws an error saying its not a number"}, {"owner": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "reply_to_user": {"reputation": 595, "user_id": 1502223, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/31a9a72c0e3ab127f2a28a0e9d513ef5?s=128&d=identicon&r=PG", "display_name": "user1502223", "link": "https://stackoverflow.com/users/1502223/user1502223"}, "edited": false, "score": 0, "creation_date": 1462312931, "post_id": 37015108, "comment_id": 61582391, "body": "Can you update your question with this information, and post the code you used in the <code>before_validation</code> callback?"}, {"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 1, "creation_date": 1462313188, "post_id": 37015108, "comment_id": 61582478, "body": "self.number = number.to_f"}], "tags": [], "owner": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "is_accepted": false, "score": 0, "last_activity_date": 1462313339, "last_edit_date": 1462313339, "creation_date": 1462312773, "answer_id": 37015108, "question_id": 37014891, "link": "https://stackoverflow.com/questions/37014891/rails-remove-percentage-symbol-for-numeric-validation/37015108#37015108", "title": "Rails remove percentage symbol for numeric validation", "body": "<p>If you're not able to remove the % sign from the form data, I would recommend coercing the string to a float.</p>\n\n<p>The string looks enough like a number to Ruby that coercion, in this case, works nicely.</p>\n\n<p>When doing so, be assure to assign the new value to the attribute, like so:</p>\n\n<pre><code>def convert_number\n  self.number = self.number.to_f\nend\n</code></pre>\n\n<p>Just coercing the attribute the way you have it in the current <code>convert_number</code> won't assign the coerced value.</p>\n\n<p>I might recommend writing a test to ensure this works on the range of values you expect from the form.</p>\n"}, {"comments": [{"owner": {"reputation": 595, "user_id": 1502223, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/31a9a72c0e3ab127f2a28a0e9d513ef5?s=128&d=identicon&r=PG", "display_name": "user1502223", "link": "https://stackoverflow.com/users/1502223/user1502223"}, "edited": false, "score": 0, "creation_date": 1462313068, "post_id": 37015132, "comment_id": 61582432, "body": "how can i trim the percentage?"}, {"owner": {"reputation": 595, "user_id": 1502223, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/31a9a72c0e3ab127f2a28a0e9d513ef5?s=128&d=identicon&r=PG", "display_name": "user1502223", "link": "https://stackoverflow.com/users/1502223/user1502223"}, "edited": false, "score": 0, "creation_date": 1462313680, "post_id": 37015132, "comment_id": 61582679, "body": "I guess the parameter that gets pass is &#39;10%&#39; but it saves to the data base as 10.0 so when i tried to call number.chomp(&#39;%&#39;) I got an undefined method `chomp&#39; for #&lt;BigDecimal:7f882e09b830,&#39;0.23E3&#39;,9(18)&gt;"}], "tags": [], "owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "is_accepted": false, "score": 0, "last_activity_date": 1462312880, "creation_date": 1462312880, "answer_id": 37015132, "question_id": 37014891, "link": "https://stackoverflow.com/questions/37014891/rails-remove-percentage-symbol-for-numeric-validation/37015132#37015132", "title": "Rails remove percentage symbol for numeric validation", "body": "<p>you can trim the percentage and convert it to a float with a before_validation.  The thing is that since you are passing a string, you will have to convert to a number or float either way before actually validating.  <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html</a>.  </p>\n"}, {"comments": [{"owner": {"reputation": 595, "user_id": 1502223, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/31a9a72c0e3ab127f2a28a0e9d513ef5?s=128&d=identicon&r=PG", "display_name": "user1502223", "link": "https://stackoverflow.com/users/1502223/user1502223"}, "edited": false, "score": 0, "creation_date": 1462314253, "post_id": 37015356, "comment_id": 61582902, "body": "could of sworn i tried this before.....but it works!  Now I have like 10 more fields I have to convert in the same way......number1, number2, number3 etc what would be the dryest way to convert all those fields in that method?"}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "reply_to_user": {"reputation": 595, "user_id": 1502223, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/31a9a72c0e3ab127f2a28a0e9d513ef5?s=128&d=identicon&r=PG", "display_name": "user1502223", "link": "https://stackoverflow.com/users/1502223/user1502223"}, "edited": false, "score": 0, "creation_date": 1462314462, "post_id": 37015356, "comment_id": 61582984, "body": "why just not convert it from front-end with JS and add validation to back-end ?"}], "tags": [], "owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "is_accepted": true, "score": 2, "last_activity_date": 1462313917, "creation_date": 1462313917, "answer_id": 37015356, "question_id": 37014891, "link": "https://stackoverflow.com/questions/37014891/rails-remove-percentage-symbol-for-numeric-validation/37015356#37015356", "title": "Rails remove percentage symbol for numeric validation", "body": "<p>Probably, Issue is type of number is not decimal.</p>\n\n<pre><code> before_validation :convert_number\n\n private\n\n def convert_number\n   self.number = number.to_d\n end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 430, "user_id": 6268569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d9a1017d0283ce1d65390e92311035?s=128&d=identicon&r=PG&f=1", "display_name": "CodeMaker", "link": "https://stackoverflow.com/users/6268569/codemaker"}, "is_accepted": false, "score": 0, "last_activity_date": 1475396507, "last_edit_date": 1475396507, "creation_date": 1462360968, "answer_id": 37026388, "question_id": 37014891, "link": "https://stackoverflow.com/questions/37014891/rails-remove-percentage-symbol-for-numeric-validation/37026388#37026388", "title": "Rails remove percentage symbol for numeric validation", "body": "<p>I think you show use this syntax for this:</p>\n\n<pre><code>before_validation :convert_number\nprivate\ndef convert_number\n  self.number = self.number.chop\nend\n</code></pre>\n"}], "owner": {"reputation": 595, "user_id": 1502223, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/31a9a72c0e3ab127f2a28a0e9d513ef5?s=128&d=identicon&r=PG", "display_name": "user1502223", "link": "https://stackoverflow.com/users/1502223/user1502223"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 684, "favorite_count": 0, "accepted_answer_id": 37015356, "answer_count": 4, "score": 0, "last_activity_date": 1475396507, "creation_date": 1462311813, "last_edit_date": 1462313047, "question_id": 37014891, "link": "https://stackoverflow.com/questions/37014891/rails-remove-percentage-symbol-for-numeric-validation", "title": "Rails remove percentage symbol for numeric validation", "body": "<p>I'm trying to validate a number but via jquery there is a % sign added to the interface</p>\n\n<pre><code>=&gt; '10.4%'\n</code></pre>\n\n<p>So when i try to validate numericality it says that it is not a number</p>\n\n<p>is there a rails way to validate this?</p>\n\n<p>I've tried doing this in my model </p>\n\n<pre><code> before_validation :convert_number\n\n private\n\n def convert_number\n   self.number.to_f\n end\n</code></pre>\n\n<p>but it is still throwing the validation error that it is not a number</p>\n\n<hr>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462311234, "post_id": 37014711, "comment_id": 61581655, "body": "are you calling the <code>set_nils</code> function anywhere?  It will not be called automatically, so you need to have called it prior to depending on its value."}, {"owner": {"reputation": 45, "user_id": 6278519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/606641261e5195b593f20b7bf5bbb15d?s=128&d=identicon&r=PG&f=1", "display_name": "Orie", "link": "https://stackoverflow.com/users/6278519/orie"}, "reply_to_user": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462313115, "post_id": 37014711, "comment_id": 61582451, "body": "Thanks! I&#39;ve included that in."}], "answers": [{"comments": [{"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1462312371, "post_id": 37014831, "comment_id": 61582176, "body": "Quick note, <code>gets</code> will result in <code>&quot;\\n&quot;</code> if user inputs nothing and hits enter. But <code>&quot;\\n&quot;.to_i</code> will evaluate to <code>0</code>."}, {"owner": {"reputation": 632, "user_id": 1410839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91b8a015532f8648bc6dab36b97f33c?s=128&d=identicon&r=PG", "display_name": "Christopher Harris", "link": "https://stackoverflow.com/users/1410839/christopher-harris"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1462312474, "post_id": 37014831, "comment_id": 61582205, "body": "Great clarification, I will fix this.  Thank you."}], "tags": [], "owner": {"reputation": 632, "user_id": 1410839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b91b8a015532f8648bc6dab36b97f33c?s=128&d=identicon&r=PG", "display_name": "Christopher Harris", "link": "https://stackoverflow.com/users/1410839/christopher-harris"}, "is_accepted": true, "score": 2, "last_activity_date": 1462364031, "last_edit_date": 1462364031, "creation_date": 1462311499, "answer_id": 37014831, "question_id": 37014711, "link": "https://stackoverflow.com/questions/37014711/setting-a-value-to-nil/37014831#37014831", "title": "Setting a value to nil?", "body": "<p>The problem is that if you enter nothing as your input and convert this <code>\\n</code> to an integer, the value becomes 0 because:</p>\n\n<pre><code>irb(main):008:0&gt; '\\n'.to_i\n=&gt; 0\n</code></pre>\n\n<p>Therefore, you should change to this:</p>\n\n<pre><code>puts \"What is #{name}'s estimated age?\"\ninput = gets.to_i\n@age = input &gt; 0 ? input : nil\n\ndef set_nils\n    @age ||= nil\nend\n</code></pre>\n\n<p><strong>Output with valid age (> 0):</strong></p>\n\n<pre><code>irb(main):001:0&gt; name = \"Tim\"\n=&gt; \"Tim\"\nirb(main):002:0&gt; puts \"What is #{name}'s estimated age?\"\nWhat is Tim's estimated age?\n=&gt; nil\nirb(main):003:0&gt; input = gets.to_i\n8\n=&gt; 8\nirb(main):004:0&gt; @age = input &gt; 0 ? input : nil\n=&gt; 8\nirb(main):005:0&gt;\nirb(main):006:0* def set_nils\nirb(main):007:1&gt;     @age ||= nil\nirb(main):008:1&gt; end\n=&gt; nil\nirb(main):009:0&gt; set_nils\n=&gt; 8\n</code></pre>\n\n<p><strong>Output with invalid age (&lt; 0):</strong></p>\n\n<pre><code>irb(main):017:0&gt; name = \"Tim\"\n=&gt; \"Tim\"\nirb(main):018:0&gt; puts \"What is #{name}'s estimated age?\"\nWhat is Tim's estimated age?\n=&gt; nil\nirb(main):019:0&gt; input = gets.to_i\n-1\n=&gt; -1\nirb(main):020:0&gt; @age = input &gt; 0 ? input : nil\n=&gt; nil\nirb(main):021:0&gt;\nirb(main):022:0* def set_nils\nirb(main):023:1&gt;     @age ||= nil\nirb(main):024:1&gt; end\n=&gt; nil\nirb(main):025:0&gt; set_nils\n=&gt; nil\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 6278519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/606641261e5195b593f20b7bf5bbb15d?s=128&d=identicon&r=PG&f=1", "display_name": "Orie", "link": "https://stackoverflow.com/users/6278519/orie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 754, "favorite_count": 0, "accepted_answer_id": 37014831, "answer_count": 1, "score": 0, "last_activity_date": 1462364031, "creation_date": 1462311053, "last_edit_date": 1462312385, "question_id": 37014711, "link": "https://stackoverflow.com/questions/37014711/setting-a-value-to-nil", "title": "Setting a value to nil?", "body": "<p>I've run into a problem in Ruby that I can't seem to find an answer online for.<br>\nI have a few forms, and on one of them, I'm trying to set the value of <code>age</code> to <code>nil</code> if nothing is entered.<br>\nThis is the relevant section for what I have right now:</p>\n\n<pre><code>puts \"What is #{name}'s estimated age?\"\nage = gets.to_i\n\n    def set_nils\n        age = nil if age.blank?\n    end\n</code></pre>\n\n<p>I've tried a few different ideas, but nothing seems to change my final output (just printing age back) at all.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "chef-infra", "chef-recipe", "databags"], "comments": [{"owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "reply_to_user": {"reputation": 5492, "user_id": 6083675, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/D2CgS.png?s=128&g=1", "display_name": "Laurel", "link": "https://stackoverflow.com/users/6083675/laurel"}, "edited": false, "score": 0, "creation_date": 1462311645, "post_id": 37014692, "comment_id": 61581854, "body": "@Laurel I don&#39;t get what you mean. <a href=\"https://stackoverflow.com/questions/tagged/chef-recipe\">chef-recipe</a> is related to <a href=\"https://stackoverflow.com/questions/tagged/chef\">chef</a>."}, {"owner": {"reputation": 5492, "user_id": 6083675, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/D2CgS.png?s=128&g=1", "display_name": "Laurel", "link": "https://stackoverflow.com/users/6083675/laurel"}, "edited": false, "score": 0, "creation_date": 1462311904, "post_id": 37014692, "comment_id": 61581978, "body": "I was thinking of this Chef: <a href=\"https://esolangs.org/wiki/chef\" rel=\"nofollow noreferrer\">esolangs.org/wiki/chef</a>"}], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 0, "last_activity_date": 1462313124, "creation_date": 1462313124, "answer_id": 37015180, "question_id": 37014692, "link": "https://stackoverflow.com/questions/37014692/storing-master-token-in-chef-data-bag/37015180#37015180", "title": "Storing master token in Chef data bag", "body": "<p><code>execute</code>, like all Chef resources, doesn't really have \"output values\". You would want to drop down a level and use the <code>shell_out!</code> API from inside a Ruby block. I will also state for the record that giving servers write access to data bags is hugely unsafe both from a data integrity PoV (the Chef API has no concept of locking or partial updates) as well as security (though you can reduce this problem with very careful ACL use, but that's a whole different ball of frustration).</p>\n\n<p>If you are new to Chef, and it sounds like you are, don't do this. Run the command once by hand and then add the value to the data bag yourself.</p>\n"}], "owner": {"reputation": 8777, "user_id": 5632400, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dd1581444277a110a7b803f5ab4e4d14?s=128&d=identicon&r=PG&f=1", "display_name": "meallhour", "link": "https://stackoverflow.com/users/5632400/meallhour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 37015180, "answer_count": 1, "score": 1, "last_activity_date": 1462313124, "creation_date": 1462310946, "question_id": 37014692, "link": "https://stackoverflow.com/questions/37014692/storing-master-token-in-chef-data-bag", "title": "Storing master token in Chef data bag", "body": "<p>I am generating a master token in Chef using the execute resource as below:  </p>\n\n<pre><code>execute \"extract_consul_key\" do\n  command \"consul keygen \"\nend\n</code></pre>\n\n<p>I want to store output of this command in a databag.<br>\nPlease let me know what steps do I need to setup an encrypted databag and then store output of the above execute resource into that databag.<br>\nI am new to databags and don't possess any knowledge on it.  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "scaffolding"], "comments": [{"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 1, "creation_date": 1462311324, "post_id": 37014687, "comment_id": 61581695, "body": "Please show the errors that you get.  This will explain exactly what&#39;s happening, so that there&#39;s no guesswork involved."}, {"owner": {"reputation": 163, "user_id": 4685092, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/28765028bf6fc26a24e85a10dc7e767d?s=128&d=identicon&r=PG&f=1", "display_name": "avm_69", "link": "https://stackoverflow.com/users/4685092/avm-69"}, "reply_to_user": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462311492, "post_id": 37014687, "comment_id": 61581780, "body": "This is the errors showing when I do rake:db migrate <a href=\"http://pastebin.com/R83a3rsN\" rel=\"nofollow noreferrer\">pastebin.com/R83a3rsN</a>"}, {"owner": {"reputation": 1189, "user_id": 6030977, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/6UMfc.jpg?s=128&g=1", "display_name": "Shyam Bhimani", "link": "https://stackoverflow.com/users/6030977/shyam-bhimani"}, "edited": false, "score": 0, "creation_date": 1462311508, "post_id": 37014687, "comment_id": 61581790, "body": "Please include more information in terms of code or you can include heroku log to be able to rectify your error."}, {"owner": {"reputation": 163, "user_id": 4685092, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/28765028bf6fc26a24e85a10dc7e767d?s=128&d=identicon&r=PG&f=1", "display_name": "avm_69", "link": "https://stackoverflow.com/users/4685092/avm-69"}, "edited": false, "score": 0, "creation_date": 1462311756, "post_id": 37014687, "comment_id": 61581906, "body": "Which file do you want to see? I have already posted the heroku log. Thanks!"}, {"owner": {"reputation": 1189, "user_id": 6030977, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/6UMfc.jpg?s=128&g=1", "display_name": "Shyam Bhimani", "link": "https://stackoverflow.com/users/6030977/shyam-bhimani"}, "edited": false, "score": 0, "creation_date": 1462311923, "post_id": 37014687, "comment_id": 61581983, "body": "Does your Rails app works on local machine ? Is it just problem you facing with heroku ?"}, {"owner": {"reputation": 163, "user_id": 4685092, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/28765028bf6fc26a24e85a10dc7e767d?s=128&d=identicon&r=PG&f=1", "display_name": "avm_69", "link": "https://stackoverflow.com/users/4685092/avm-69"}, "reply_to_user": {"reputation": 1189, "user_id": 6030977, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/6UMfc.jpg?s=128&g=1", "display_name": "Shyam Bhimani", "link": "https://stackoverflow.com/users/6030977/shyam-bhimani"}, "edited": false, "score": 0, "creation_date": 1462312516, "post_id": 37014687, "comment_id": 61582217, "body": "@ShyamBhimani Just a problem with heroku, on local in cloud9 is working"}, {"owner": {"reputation": 1189, "user_id": 6030977, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/6UMfc.jpg?s=128&g=1", "display_name": "Shyam Bhimani", "link": "https://stackoverflow.com/users/6030977/shyam-bhimani"}, "edited": false, "score": 1, "creation_date": 1462313760, "post_id": 37014687, "comment_id": 61582714, "body": "try:  heroku run rake db:schema:load"}], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 4685092, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/28765028bf6fc26a24e85a10dc7e767d?s=128&d=identicon&r=PG&f=1", "display_name": "avm_69", "link": "https://stackoverflow.com/users/4685092/avm-69"}, "edited": false, "score": 0, "creation_date": 1462313299, "post_id": 37014935, "comment_id": 61582521, "body": "The order of create_table blocks is supposed to be ok: <a href=\"http://pastebin.com/BYumTieQ\" rel=\"nofollow noreferrer\">pastebin.com/BYumTieQ</a> This is schema.db  I have also done an heroku pg:reset DATABASE_URL which works but when I run heroku run rake db:migrate the same error shows: <a href=\"http://pastebin.com/warU3WDE\" rel=\"nofollow noreferrer\">pastebin.com/warU3WDE</a>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 163, "user_id": 4685092, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/28765028bf6fc26a24e85a10dc7e767d?s=128&d=identicon&r=PG&f=1", "display_name": "avm_69", "link": "https://stackoverflow.com/users/4685092/avm-69"}, "edited": false, "score": 0, "creation_date": 1462317489, "post_id": 37014935, "comment_id": 61583844, "body": "Are you sure you&#39;re understanding the schema correctly? You should probably delete your schema before you reset the database. The schema is generated when you run the migrations."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1462312027, "creation_date": 1462312027, "answer_id": 37014935, "question_id": 37014687, "link": "https://stackoverflow.com/questions/37014687/change-ruby-on-rails-scaffolding-order/37014935#37014935", "title": "Change Ruby on Rails scaffolding order", "body": "<p>This doesn't seem like a scaffold error per se. Rather, it's an issue with migrations (which scaffolds happened to generate).</p>\n\n<p>To repairs the issue, I'd probably just make a fresh migration which includes all columns your application needs at this point in time. Then edit the order of the create_table blocks to resolve your error. </p>\n\n<p>Then you'd be able to delete the other migration files and run dB:create or reset. </p>\n"}, {"comments": [{"owner": {"reputation": 163, "user_id": 4685092, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/28765028bf6fc26a24e85a10dc7e767d?s=128&d=identicon&r=PG&f=1", "display_name": "avm_69", "link": "https://stackoverflow.com/users/4685092/avm-69"}, "edited": false, "score": 0, "creation_date": 1462313395, "post_id": 37014938, "comment_id": 61582564, "body": "Already done that and it keeps failing. In fact, create_submissions.db was in fact down the create_users.db, so it was correct."}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 2, "last_activity_date": 1462312049, "creation_date": 1462312049, "answer_id": 37014938, "question_id": 37014687, "link": "https://stackoverflow.com/questions/37014687/change-ruby-on-rails-scaffolding-order/37014938#37014938", "title": "Change Ruby on Rails scaffolding order", "body": "<p>You have a member in your db/migrate folder named...</p>\n\n<p><code>20160424205437_create_submissions.db</code></p>\n\n<p>Just rename it to</p>\n\n<p><code>20160503205437_create_submissions.db</code></p>\n\n<p>that will move it to the bottom of the list of migrations and it'll be executed last.</p>\n"}, {"comments": [{"owner": {"reputation": 163, "user_id": 4685092, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/28765028bf6fc26a24e85a10dc7e767d?s=128&d=identicon&r=PG&f=1", "display_name": "avm_69", "link": "https://stackoverflow.com/users/4685092/avm-69"}, "edited": false, "score": 0, "creation_date": 1462313338, "post_id": 37014943, "comment_id": 61582539, "body": "Already done that and not working. This is my schema.db which is the file I suppose you are talking about: pastebin.com/BYumTieQ"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "reply_to_user": {"reputation": 163, "user_id": 4685092, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/28765028bf6fc26a24e85a10dc7e767d?s=128&d=identicon&r=PG&f=1", "display_name": "avm_69", "link": "https://stackoverflow.com/users/4685092/avm-69"}, "edited": false, "score": 0, "creation_date": 1462313634, "post_id": 37014943, "comment_id": 61582663, "body": "Editing your schema.db file won&#39;t make a difference.  Your migrations are out of order, however you have defined them.  Can you include in your original question the filename and contents of the migration file containing the Users table and the migration file containing the Submissions table?  Both filename and contents are important to solve this."}, {"owner": {"reputation": 163, "user_id": 4685092, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/28765028bf6fc26a24e85a10dc7e767d?s=128&d=identicon&r=PG&f=1", "display_name": "avm_69", "link": "https://stackoverflow.com/users/4685092/avm-69"}, "edited": false, "score": 0, "creation_date": 1462313791, "post_id": 37014943, "comment_id": 61582732, "body": "I guess you mean that:   <a href=\"http://pastebin.com/ig5nHjsj\" rel=\"nofollow noreferrer\">pastebin.com/ig5nHjsj</a> for 20160503205437_create_submissions  and  <a href=\"http://pastebin.com/q2jABiep\" rel=\"nofollow noreferrer\">pastebin.com/q2jABiep</a> for 20160428101834_create_users"}], "tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": false, "score": 0, "last_activity_date": 1462312077, "creation_date": 1462312077, "answer_id": 37014943, "question_id": 37014687, "link": "https://stackoverflow.com/questions/37014687/change-ruby-on-rails-scaffolding-order/37014943#37014943", "title": "Change Ruby on Rails scaffolding order", "body": "<p>This is an issue with cross-dependencies in your migration.  In this case, the <code>Submissions</code> table is expecting that the <code>Users</code> table already exist in order to declare a foreign key to it.</p>\n\n<p>Consider declaring the <code>Users</code> table above the <code>Submissions</code> table in your migration.</p>\n"}], "owner": {"reputation": 163, "user_id": 4685092, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/28765028bf6fc26a24e85a10dc7e767d?s=128&d=identicon&r=PG&f=1", "display_name": "avm_69", "link": "https://stackoverflow.com/users/4685092/avm-69"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "closed_date": 1463066995, "answer_count": 3, "score": -1, "last_activity_date": 1462314059, "creation_date": 1462310924, "last_edit_date": 1462313864, "question_id": 37014687, "link": "https://stackoverflow.com/questions/37014687/change-ruby-on-rails-scaffolding-order", "closed_reason": "Duplicate", "title": "Change Ruby on Rails scaffolding order", "body": "<p>I have a Ruby on Rails app and I want to deploy it on Heroku. Some errors appear and I think it is because the scaffolding order.</p>\n\n<p>By that, I mean that a class named submissions is first created, but this class references another class named Users that is yet to be created.</p>\n\n<p>This is the error that appears when doing rake db:migrate <a href=\"http://pastebin.com/R83a3rsN\" rel=\"nofollow\">http://pastebin.com/R83a3rsN</a></p>\n\n<p>And those are the migrate files and their filename</p>\n\n<p>I guess you mean that: </p>\n\n<p><a href=\"http://pastebin.com/ig5nHjsj\" rel=\"nofollow\">http://pastebin.com/ig5nHjsj</a> for 20160503205437_create_submissions</p>\n\n<p>and</p>\n\n<p><a href=\"http://pastebin.com/q2jABiep\" rel=\"nofollow\">http://pastebin.com/q2jABiep</a> for 20160428101834_create_users</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "factory-bot"], "answers": [{"tags": [], "owner": {"reputation": 429, "user_id": 2463921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/965803ead64df44d66aee0c77d7fb064?s=128&d=identicon&r=PG", "display_name": "Alex Bezek", "link": "https://stackoverflow.com/users/2463921/alex-bezek"}, "is_accepted": false, "score": 0, "last_activity_date": 1462313834, "creation_date": 1462313834, "answer_id": 37015340, "question_id": 37014646, "link": "https://stackoverflow.com/questions/37014646/rspec-with-factorygirl-explicit-subject/37015340#37015340", "title": "RSpec with FactoryGirl explicit subject", "body": "<p>I don't think you would want to stop them from auto loading, and I'm not actually sure what your use case is for not allowing them to load?</p>\n\n<p><code>RSpec automagically fetches the factory for a spec</code>\nRspec loads all the factories into memory when your spec helper loads I believe. Because your using factory inheritence your just loading each of these into memory before your tests run, nothing is being called, no objects are being created or built. They are just ready to use in your tests.</p>\n\n<p>Are you getting a specific error or is there some case I'm not seeing that you need?</p>\n"}, {"comments": [{"owner": {"reputation": 3129, "user_id": 455826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/aPD2c.jpg?s=128&g=1", "display_name": "AmitA", "link": "https://stackoverflow.com/users/455826/amita"}, "reply_to_user": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "edited": false, "score": 0, "creation_date": 1462371530, "post_id": 37016585, "comment_id": 61610903, "body": "Hmm. Are you sure? I just ran a <code>raise subject.inspect</code> on a similar spec of mine, with a factory named as the model and the spec, and I do not observe such behavior. My implicit <code>subject</code> is a <code>&lt;ModelClass&gt;.new</code> (default behavior of RSpec), not a <code>FactoryGirl.build(:model_class)</code>. What do you observe on your end?"}, {"owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "edited": false, "score": 0, "creation_date": 1462371877, "post_id": 37016585, "comment_id": 61611218, "body": "You&#39;re right it is a blank model instance! Thanks for clearing that up."}], "tags": [], "owner": {"reputation": 3129, "user_id": 455826, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/aPD2c.jpg?s=128&g=1", "display_name": "AmitA", "link": "https://stackoverflow.com/users/455826/amita"}, "is_accepted": true, "score": 3, "last_activity_date": 1462322158, "creation_date": 1462322158, "answer_id": 37016585, "question_id": 37014646, "link": "https://stackoverflow.com/questions/37014646/rspec-with-factorygirl-explicit-subject/37016585#37016585", "title": "RSpec with FactoryGirl explicit subject", "body": "<blockquote>\n  <p>But this causes the user_spec.rb to use the :user factory.</p>\n</blockquote>\n\n<p>No, it does not. Assuming you configured FactoryGirl correctly, RSpec can use whatever factory you'd like \"on demand\" in any test file. Configuration-wise, in <code>rails_helper.rb</code> throw this in:</p>\n\n<pre><code>RSpec.configure do |config|\n   # ...\n   config.include FactoryGirl::Syntax::Methods\n   # ...\nend\n</code></pre>\n\n<p>Then, in your spec file:</p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe User, type: :model do\n  context \"all users\" do\n    let(:user) { create(:user) } \n\n    it 'is a user' do \n      # Here `user` is going to be a user factory\n      expect(user.unit).not_to be_present\n    end\n\n  end\n\n  context \"residents\" do\n    let(:user) { create(:resident) } \n\n    it 'is a resident' do \n      # Here `user` is going to be a resident factory\n      expect(user.unit).to be_present\n    end\n  end\n\n  context \"admins\" do\n    let(:user) { create(:admin) } \n\n    it 'is an admin' do \n      # Here `user` is going to be an admin factory\n      expect(user.role).to be('admin_role')\n    end\n  end\n\nend\n</code></pre>\n\n<p>In short, you can use <code>create(&lt;factory_name&gt;)</code> on any factory definition that exists in any one of these paths:</p>\n\n<pre><code>test/factories.rb\nspec/factories.rb\ntest/factories/*.rb\nspec/factories/*.rb\n</code></pre>\n\n<p>Note that if you haven't placed the <code>config.include FactoryGirl::Syntax::Methods</code> inside your <code>RSpec.configure</code>, you can still create any factory, by doing <code>FactoryGirl.create(&lt;factory_name&gt;)</code> instead of <code>create(&lt;factory_name&gt;)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1462329125, "creation_date": 1462329125, "answer_id": 37017443, "question_id": 37014646, "link": "https://stackoverflow.com/questions/37014646/rspec-with-factorygirl-explicit-subject/37017443#37017443", "title": "RSpec with FactoryGirl explicit subject", "body": "<p>I found the solution to my problems here: <a href=\"https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#associations\" rel=\"nofollow\">https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#associations</a></p>\n\n<p>What I needed to use in my user factories was <code>association :role, factory: :role, strategy: :build</code></p>\n"}], "owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1291, "favorite_count": 0, "accepted_answer_id": 37016585, "answer_count": 3, "score": 3, "last_activity_date": 1462329125, "creation_date": 1462310771, "last_edit_date": 1462328709, "question_id": 37014646, "link": "https://stackoverflow.com/questions/37014646/rspec-with-factorygirl-explicit-subject", "title": "RSpec with FactoryGirl explicit subject", "body": "<p>I'm using RSpec with FactoryGirl within a Ruby on Rails environment for testing.</p>\n\n<p>I want to specify my factories as follows:</p>\n\n<pre><code>  factory :user do\n    role # stub\n\n    factory :resident do\n      association :role, factory: :resident_role\n    end\n\n    factory :admin do\n      association :role, factory: :admin_role\n    end\n  end\n</code></pre>\n\n<p>And I'd like to do something like this in my spec:</p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe User, type: :model do\n  context \"all users\" do\n    # describe a user\n    #   subject { build(:user) }\n    #   it { is_expected.to be_something_or_do_something }\n  end\n\n  context \"residents\" do\n    # describe a resident\n    #   subject { build(:resident) }\n    #   it { is_expected.to be_something_or_do_something }\n  end\n\n  context \"admins\" do\n    # describe a admin\n    #   subject { build(:admin) }\n    #   it { is_expected.to be_something_or_do_something }\n  end\n\nend\n</code></pre>\n\n<p>Can this be done by explicitly setting the <code>subject</code>? When I do, I keep getting duplicate roles errors.</p>\n\n<p>If anyone has any advice or suggestion, it would be greatly appreciated!</p>\n"}, {"tags": ["ruby", "irb"], "answers": [{"tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": true, "score": 1, "last_activity_date": 1462313271, "creation_date": 1462313271, "answer_id": 37015215, "question_id": 37014544, "link": "https://stackoverflow.com/questions/37014544/why-is-content-length-in-nethttp-get-response-sometimes-nil-even-on-good-resul/37015215#37015215", "title": "why is content_length in Net::HTTP.get_response sometimes nil even on good results?", "body": "<p>It appears that the value returned is not necessarily the length of the body, but the fixed length of the content, when that fixed length is known in advance and stored in the <code>content-length</code> header.</p>\n\n<p>See the source for the implementation of HTTPHeader#content_length (taken from <a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/net/http/rdoc/Net/HTTPHeader.html\" rel=\"nofollow\">http://ruby-doc.org/stdlib-2.3.1/libdoc/net/http/rdoc/Net/HTTPHeader.html</a>):</p>\n\n<pre><code># File net/http/header.rb, line 262\ndef content_length\n  return nil unless key?('Content-Length')\n  len = self['Content-Length'].slice(/\\d+/) or\n      raise Net::HTTPHeaderSyntaxError, 'wrong Content-Length format'\n  len.to_i\nend\n</code></pre>\n\n<p>What this probably means in this case is that the response was a multi-part MIME response, and the <code>content-length</code> header is not used in this case.</p>\n\n<p>What you most likely want in this case is <code>body.length</code>, since that's the only real way to tell the actual length of the response body for a multi-part response.</p>\n\n<p>Note that may be performance implications by always using <code>content.body</code> to find the content length; you may choose to try the <code>content_length</code> approach first and if it's nil, fall back to <code>body.length</code>.</p>\n\n<p>Here's an example modification to your code:</p>\n\n<pre><code>require 'net/http'\nres1 = Net::HTTP.get_response 'www.google.com' , '/'\nres2 = Net::HTTP.get_response 'www.google.com' , '/search?q=abc'\n\nres1.code #200\nres2.code #200\nres1.content_length #5213\nres2.content_length.nil? ? res2.body.length : res2.content_length #57315  **&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; Works now **\nres2.body[0..60]\n=&gt; \"&lt;!doctype html&gt;&lt;html itemscope=\\\"\\\" itemtype=\\\"http://schema.org\"\n</code></pre>\n\n<p>or, better yet, capture the content_length and use the captured value for comparison:</p>\n\n<pre><code>res2_content_length = res2.content_length\n\nif res2_content_length.nil?\n    res2_content_length = res2.body.length\nend\n</code></pre>\n\n<p>Personally, I'd just stick with always checking <code>body.length</code> and deal with any potential performance issue if and when it arises.</p>\n\n<p>This should reliably retrieve the actual length of the content for you, regardless of whether you received a simple response of a multi-part response.</p>\n"}], "owner": {"reputation": 4039, "user_id": 1397919, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/90c6f9c74ae14b8d63092782bd285ae7?s=128&d=identicon&r=PG", "display_name": "Dinesh", "link": "https://stackoverflow.com/users/1397919/dinesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "accepted_answer_id": 37015215, "answer_count": 1, "score": 0, "last_activity_date": 1462313271, "creation_date": 1462310402, "question_id": 37014544, "link": "https://stackoverflow.com/questions/37014544/why-is-content-length-in-nethttp-get-response-sometimes-nil-even-on-good-resul", "title": "why is content_length in Net::HTTP.get_response sometimes nil even on good results?", "body": "<p>I have the following ruby code (was trying to write a simple http-ping)</p>\n\n<pre><code>require 'net/http'\nres1 = Net::HTTP.get_response 'www.google.com' , '/'\nres2 = Net::HTTP.get_response 'www.google.com' , '/search?q=abc'\n\nres1.code #200\nres2.code #200\nres1.content_length #5213\nres2.content_length #nil **&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; WHY**\nres2.body[0..60]\n=&gt; \"&lt;!doctype html&gt;&lt;html itemscope=\\\"\\\" itemtype=\\\"http://schema.org\"\n</code></pre>\n\n<p>Why does <code>res2</code> content_length does not show through? Is it in some other attribute of res2 (how does one see those?)</p>\n\n<p>I am a newcomer at ruby. Using <code>irb 0.9.6</code> on AWS Linux </p>\n\n<p>Thanks a lot.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "paypal", "paypal-rest-sdk"], "answers": [{"comments": [{"owner": {"reputation": 5067, "user_id": 993554, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/UV0L9.jpg?s=128&g=1", "display_name": "Victor Ferreira", "link": "https://stackoverflow.com/users/993554/victor-ferreira"}, "edited": false, "score": 0, "creation_date": 1462312753, "post_id": 37015053, "comment_id": 61582320, "body": "yes. that&#39;s what I originally got. But I tried on Heroku to make both work on sandbox. And then I get that error"}, {"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "reply_to_user": {"reputation": 5067, "user_id": 993554, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/UV0L9.jpg?s=128&g=1", "display_name": "Victor Ferreira", "link": "https://stackoverflow.com/users/993554/victor-ferreira"}, "edited": false, "score": 0, "creation_date": 1462313089, "post_id": 37015053, "comment_id": 61582442, "body": "I am guessing that the configuration file is being used for more than just being referenced by paypal.rb but I could be wrong.  In any case using environment variables should solve this issue.  You can test it by having the paypal.rb reference a variable that you manually export with heroku."}], "tags": [], "owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "is_accepted": false, "score": 0, "last_activity_date": 1462312530, "creation_date": 1462312530, "answer_id": 37015053, "question_id": 37014518, "link": "https://stackoverflow.com/questions/37014518/force-rails-paypal-gem-to-use-sandbox-instead-of-live/37015053#37015053", "title": "Force Rails Paypal gem to use Sandbox instead of Live", "body": "<p>I would add the keys via an environment variable.  That way each environment will reference the correct key and you don't have to check them into source control.  <a href=\"https://github.com/laserlemon/figaro\" rel=\"nofollow\">https://github.com/laserlemon/figaro</a> is a good gem if you want to go that route.  Alternatively you can set up your config/paypal.yml file to reference the different environments.  That would look more like: </p>\n\n<pre><code>development:\n  :mode: \"sandbox\"\n  :client_id: \"my-sandbox-id\"\n\nproduction:\n  :mode: \"not-sandbox-er-whatever\"\n  :client_id: \"my-not-sandbox-id\"\n</code></pre>\n"}], "owner": {"reputation": 5067, "user_id": 993554, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/UV0L9.jpg?s=128&g=1", "display_name": "Victor Ferreira", "link": "https://stackoverflow.com/users/993554/victor-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462312530, "creation_date": 1462310299, "last_edit_date": 1462310601, "question_id": 37014518, "link": "https://stackoverflow.com/questions/37014518/force-rails-paypal-gem-to-use-sandbox-instead-of-live", "title": "Force Rails Paypal gem to use Sandbox instead of Live", "body": "<p><strong>A short story</strong>: I installed a development server on Heroku that is running in production mode.</p>\n\n<p>I am not very familiar to the <code>paypal-sdk-rest</code> gem that is installed in this app (actually I'm new to RoR).</p>\n\n<p>Reading the documentation here <a href=\"https://github.com/paypal/PayPal-Ruby-SDK\" rel=\"nofollow\">https://github.com/paypal/PayPal-Ruby-SDK</a> I found out that there is a config yml file (<code>config/paypal.yml</code>)  with the client_id and the client_secret for both Sandbox and Live for development and production environments. And a reference it to in <code>config/initializers/paypal.rb</code>.</p>\n\n<p>When I'm working on localhost I can create payments on Sandbox and when I'm on my AWS server I can create payments on Live. But on Heroku I need it to create payments on Sandbox and not on Live. So I commented the reference to <code>paypal.yml</code> in <code>paypal.rb</code> and stated this in paypal.rb: </p>\n\n<pre><code>#this was added \nPayPal::SDK.configure({\n   :mode =&gt; \"sandbox\",\n   :client_id =&gt; \"my-sandbox-id\",\n   :client_secret =&gt; \"my-sandbox-secret\"\n})\n</code></pre>\n\n<p>Before sending files to Heroku I'm testing on localhost and I was expecting to see the sandbox payment page since it was working before removing the configuration file. I'm getting this message error instead: </p>\n\n<blockquote>\n  <p>{\"name\"=>\"BUSINESS_VALIDATION_ERROR\",\n  \"details\"=>[{\"field\"=>\"validation_error\", \"issue\"=>\"Incorrect Template\n  Id.\"}], \"message\"=>\"Validation Error.\",\n  \"information_link\"=>\"<a href=\"https://developer.paypal.com/webapps/developer/docs/api/#BUSINESS_VALIDATION_ERROR\" rel=\"nofollow\">https://developer.paypal.com/webapps/developer/docs/api/#BUSINESS_VALIDATION_ERROR</a>\",\n  \"debug_id\"=>\"some id here\"}</p>\n</blockquote>\n\n<p><strong>Additional information</strong>: before removing the configuration file I was just copying the development info to production. I was testing on Heroku and getting the same error.</p>\n\n<p>Any ideas folks?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing", "minitest", "optimistic-locking"], "answers": [{"comments": [{"owner": {"reputation": 1211, "user_id": 5056202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wq9rr.jpg?s=128&g=1", "display_name": "CheeseFry", "link": "https://stackoverflow.com/users/5056202/cheesefry"}, "edited": false, "score": 0, "creation_date": 1462314175, "post_id": 37015196, "comment_id": 61582877, "body": "I had just figured that out and was about to write out the answer. Thank you for beating me to it!"}], "tags": [], "owner": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "is_accepted": true, "score": 2, "last_activity_date": 1462313214, "creation_date": 1462313214, "answer_id": 37015196, "question_id": 37014422, "link": "https://stackoverflow.com/questions/37014422/optimistic-locking-unit-test-minitest/37015196#37015196", "title": "Optimistic Locking Unit Test Minitest", "body": "<p>When you are looking to test whether a method raises an exception, use <code>assert_raises</code>.</p>\n\n<p>To use it, pass a block containing the method you expect to raise an error, like so:</p>\n\n<pre><code>assert_raises(ExceptionClassYouExpect) { method_that_should_raise! }\n</code></pre>\n\n<p>In your case, I think this would be:</p>\n\n<pre><code>assert_raises(ActiveRecord::StaleObjectError) { second.save }\n</code></pre>\n\n<p>I always refer to the Rails Guides on this: <a href=\"http://guides.rubyonrails.org/testing.html#available-assertions\" rel=\"nofollow\">http://guides.rubyonrails.org/testing.html#available-assertions</a>.</p>\n"}], "owner": {"reputation": 1211, "user_id": 5056202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wq9rr.jpg?s=128&g=1", "display_name": "CheeseFry", "link": "https://stackoverflow.com/users/5056202/cheesefry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 37015196, "answer_count": 1, "score": 0, "last_activity_date": 1462313214, "creation_date": 1462309908, "last_edit_date": 1462312055, "question_id": 37014422, "link": "https://stackoverflow.com/questions/37014422/optimistic-locking-unit-test-minitest", "title": "Optimistic Locking Unit Test Minitest", "body": "<p><strong>The Problem...</strong>\nTrying to create a test that demonstrates that optimistic locking prevents the save BUT the action of saving actually raises the <code>ActiveRecord::StaleObjectError: Attempted to update a stale object: Invoice</code> error, blowing up the test. How can I change the last line of the test to correctly express this? </p>\n\n<pre><code>  test \"optimistic locking prevents save\" do\n    merchant = create(:merchant)\n    invoice = Invoice.new(amount: 9.99,\n                          currency: \"USD\",\n                          item_count: 1,\n                          invoice_id: build(:invoice).invoice_id,\n                          merchant_id: merchant.merchant_id,\n                          invoice_type: 'post-flight',\n                          invoice_details_attributes: [\n                          {\n                            description: 'Detail1',\n                            item_quantity: 1,\n                            item_amount: 9.99,\n                            detail_total: 9.99\n                          }\n                          ],\n                          trips_attributes: [\n                          {\n                            passenger_first_name: 'Josh',\n                            passenger_last_name: 'Smith',\n                            depart_airport: 'MCI',\n                            arrive_airport: 'SAN',\n                            departure_date: 10.days.from_now,\n                            passenger_count: 10\n                          }\n                          ])\n    invoice.save!\n    first  = Invoice.find(invoice.invoice_id)\n    second = Invoice.find(invoice.invoice_id)\n    first.currency  = \"GBP\"\n    second.currency = \"EUR\"\n    first.save\n    second.save\n\n    assert_equal ActiveRecord::StaleObjectError, Exception\n  end  \n</code></pre>\n\n<p><strong>I've tried...</strong></p>\n\n<pre><code>rescue Exception =&gt; e\n puts $!.to_s\n assert_equal ActiveRecord::StaleObjectError, e\nend\n</code></pre>\n\n<p>But I'm getting syntax errors. </p>\n\n<p><code>assert_not second.save</code>\nDoesn't get a chance to trigger as the tests errors out before it actually says \"yes, it didn't save.\" </p>\n"}]