[{"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "cloud9-ide"], "answers": [{"tags": [], "owner": {"reputation": 3760, "user_id": 722657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2034643609a3d51207127b00dfacce5f?s=128&d=identicon&r=PG", "display_name": "Mutahhir", "link": "https://stackoverflow.com/users/722657/mutahhir"}, "is_accepted": true, "score": 0, "last_activity_date": 1455273805, "creation_date": 1455273805, "answer_id": 35360530, "question_id": 35328327, "link": "https://stackoverflow.com/questions/35328327/run-radiant-cms-site-on-cloud9-wrong-port/35360530#35360530", "title": "Run Radiant CMS site on Cloud9 - Wrong Port?", "body": "<p>You can still specify the port and IP by using the command:</p>\n\n<p><code>script/server -e production -b $IP -p $PORT</code></p>\n\n<p>HTH</p>\n"}], "owner": {"reputation": 1321, "user_id": 3030060, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/vjjqk.png?s=128&g=1", "display_name": "Brittany", "link": "https://stackoverflow.com/users/3030060/brittany"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 35360530, "answer_count": 1, "score": 0, "last_activity_date": 1455273805, "creation_date": 1455148456, "question_id": 35328327, "link": "https://stackoverflow.com/questions/35328327/run-radiant-cms-site-on-cloud9-wrong-port", "title": "Run Radiant CMS site on Cloud9 - Wrong Port?", "body": "<p>I usually run my rails installation on Cloud9 by typing the following line into my command line: rails server -b $IP -p $PORT</p>\n\n<p>And it launches my environment into a browser. However I've just installed the Radiant CMS, and doing this no longer works. Instead, I'm instructed to do the below:</p>\n\n<blockquote>\n  <p>Your Radiant application is ready to use. Run <code>script/server -e\n  production</code> to start the server. Your site will then be running at\n  <a href=\"http://localhost:3000\" rel=\"nofollow\">http://localhost:3000</a></p>\n</blockquote>\n\n<p>So I run that line (script/server -e production) in my terminal, and I receive the following (instead of getting my environment): </p>\n\n<blockquote>\n  <p>You may be using the wrong PORT &amp; IP for your server application.</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1455148517, "post_id": 35328178, "comment_id": 58365120, "body": "Can you do run your query on the console and add <code>.explain</code> to the end of it and post the entire SQL?"}], "answers": [{"tags": [], "owner": {"reputation": 105, "user_id": 5484879, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-9qfjsZcHZVU/AAAAAAAAAAI/AAAAAAAAABI/mfj7gxHoBTc/photo.jpg?sz=128", "display_name": "Vinicius Martinson", "link": "https://stackoverflow.com/users/5484879/vinicius-martinson"}, "is_accepted": true, "score": 2, "last_activity_date": 1455148518, "creation_date": 1455148518, "answer_id": 35328342, "question_id": 35328178, "link": "https://stackoverflow.com/questions/35328178/rails-ordering-through-association/35328342#35328342", "title": "Rails ordering through association", "body": "<p>It now works this way:</p>\n\n<pre><code>Member.includes(:board).where('is_board = ?', true).order('boards.order ASC').references(:board)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1463, "user_id": 84330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a025f68d8100c2f0fa78c6cfcc4cbfd1?s=128&d=identicon&r=PG", "display_name": "james2m", "link": "https://stackoverflow.com/users/84330/james2m"}, "is_accepted": false, "score": 1, "last_activity_date": 1455150031, "creation_date": 1455150031, "answer_id": 35328601, "question_id": 35328178, "link": "https://stackoverflow.com/questions/35328178/rails-ordering-through-association/35328601#35328601", "title": "Rails ordering through association", "body": "<p>This should do the trick;</p>\n\n<pre><code>@display = Member.joins(:board).where(is_board: true).order('boards.order ASC')\n</code></pre>\n\n<p>Also you should use; </p>\n\n<pre><code>render 'partial', collection: @display\n</code></pre>\n\n<p>In your view as it's much more efficient and readable.</p>\n"}], "owner": {"reputation": 105, "user_id": 5484879, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-9qfjsZcHZVU/AAAAAAAAAAI/AAAAAAAAABI/mfj7gxHoBTc/photo.jpg?sz=128", "display_name": "Vinicius Martinson", "link": "https://stackoverflow.com/users/5484879/vinicius-martinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 35328342, "answer_count": 2, "score": 1, "last_activity_date": 1455150031, "creation_date": 1455147767, "question_id": 35328178, "link": "https://stackoverflow.com/questions/35328178/rails-ordering-through-association", "title": "Rails ordering through association", "body": "<p>I am trying to sort from model <code>Members</code> ascending from <code>Member.board.order</code></p>\n\n<p>On my controller, <code>institutional_controller.rb</code> I have: </p>\n\n<pre><code>@display = Member.includes(:board).where('is_board = ?', true).order('member.board.order ASC').references(:board)\n\n# board.rb and member.rb\n\nclass Board &lt; ActiveRecord::Base\n  belongs_to :member\nend\n\nclass Member &lt; ActiveRecord::Base\n  has_one :board\nend\n\n\n# index.html.erb\n\n&lt;% @display.each do |member|  %&gt; [...]\n</code></pre>\n\n<p>And the error that I am getting is:</p>\n\n<pre><code>PG::UndefinedTable: ERROR:  missing FROM-clause entry for table \"board\"\nLINE 1: ...= \"members\".\"id\" WHERE (is_board = 't')  ORDER BY member.board [...]\n</code></pre>\n\n<p>Thank you. Any help will be appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "least-astonishment"], "answers": [{"tags": [], "owner": {"reputation": 1463, "user_id": 84330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a025f68d8100c2f0fa78c6cfcc4cbfd1?s=128&d=identicon&r=PG", "display_name": "james2m", "link": "https://stackoverflow.com/users/84330/james2m"}, "is_accepted": false, "score": 2, "last_activity_date": 1455150707, "creation_date": 1455150707, "answer_id": 35328724, "question_id": 35328173, "link": "https://stackoverflow.com/questions/35328173/returning-self-at-activerecord-class-method-loses-indirect-reference/35328724#35328724", "title": "Returning `self` at ActiveRecord class method loses indirect reference", "body": "<p>Self will return the class because self is the class. As scope returns an ActiveRecord::Relation instance. So the Orchid.where method builds and returns a new ActiveRecord::Relation whereas the self will just return the class itself.</p>\n\n<p>Both can still be chained with additional scopes should you choose. If you really want an AR::Relation back, change self to Orchid.none.</p>\n"}], "owner": {"reputation": 4945, "user_id": 663280, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b4158779079f3e1488e44da577d666ff?s=128&d=identicon&r=PG", "display_name": "Thiago Negri", "link": "https://stackoverflow.com/users/663280/thiago-negri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 823, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1455150707, "creation_date": 1455147728, "question_id": 35328173, "link": "https://stackoverflow.com/questions/35328173/returning-self-at-activerecord-class-method-loses-indirect-reference", "title": "Returning `self` at ActiveRecord class method loses indirect reference", "body": "<p>When defining a class method at an ActiveRecord, if I return <code>self</code>, the indirect reference is lost.</p>\n\n<p>I'm not sure if I am using the right vocabulary, as I am just learning Ruby on Rails, so here is an example:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :orchids\nend\n\nclass Orchid &lt; ActiveRecord::Base\n  belongs_to :user\n\n  def self.search(query)\n    if query.present?\n      query = '%' + query.gsub(/\\s+/, '%') + '%'\n      where 'gender ILIKE :query OR variety ILIKE :query', query: query\n    else\n      # Problematic line:\n      self\n    end\n  end\nend\n</code></pre>\n\n<p>Using the above definition, this is what happens:</p>\n\n<pre><code>% User.last.orchids.count\n   (0.8ms)  SELECT COUNT(*) FROM \"orchids\" WHERE \"orchids\".\"user_id\" = $1  [[\"user_id\", 2]]\n =&gt; 0 \n\n% User.last.orchids.search('').count\n   (1.2ms)  SELECT COUNT(*) FROM \"orchids\"\n =&gt; 449 \n\n% User.last.orchids.search('cat').count\n   (1.2ms)  SELECT COUNT(*) FROM \"orchids\" WHERE \"orchids\".\"user_id\" = $1 AND (gender ILIKE '%cat%' OR variety ILIKE '%cat%')  [[\"user_id\", 2]]\n =&gt; 0\n</code></pre>\n\n<p>So, returning <code>self</code> seems to make the indirect scope of \"only the orchids of this user\" go away. Returning <code>self</code> there means I'm returning the <code>Orchid</code> class instead of the <code>ActiveRecord::Relation</code>?</p>\n\n<p>Reading a bit at the internet, I did find about scopes and why I should use them. Scopes do work the way I expect and I am using them now. I just do not get why this behaves like this when using class method definitions.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "cloud9-ide", "engineyard"], "answers": [{"tags": [], "owner": {"reputation": 1940, "user_id": 1880920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HnZWe.jpg?s=128&g=1", "display_name": "Jonathan Vukovich-Tribouharet", "link": "https://stackoverflow.com/users/1880920/jonathan-vukovich-tribouharet"}, "is_accepted": false, "score": 0, "last_activity_date": 1455208920, "last_edit_date": 1455208920, "creation_date": 1455208055, "answer_id": 35344779, "question_id": 35327947, "link": "https://stackoverflow.com/questions/35327947/engineyard-gem-failing-to-run-find-active-stub-by-path-reports-undefined-method/35344779#35344779", "title": "Engineyard Gem Failing to Run; find_active_stub_by_path Reports Undefined Method &#39;this&#39;", "body": "<p>I have the same problem with another Gem, the problem come from ruby 2.3.0.\nYou have to downgrade to 2.2.3 or report the bug.</p>\n\n<p>It's seem coming from <code>rubygems</code> <a href=\"https://github.com/rubygems/rubygems/issues/1420\" rel=\"nofollow\">https://github.com/rubygems/rubygems/issues/1420</a></p>\n"}, {"comments": [{"owner": {"reputation": 138, "user_id": 5335552, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vz4SEPBBe2A/AAAAAAAAAAI/AAAAAAAAARc/HjbHWELLtI8/photo.jpg?sz=128", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5335552/ryan"}, "edited": false, "score": 1, "creation_date": 1455213550, "post_id": 35346253, "comment_id": 58400391, "body": "Downgrading rubygems to 2.5.0 allows engineyard to work fine, thank you!"}, {"owner": {"reputation": 6200, "user_id": 712334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bda486b80a2e80a8e22afe69dd621303?s=128&d=identicon&r=PG", "display_name": "Josh Habdas", "link": "https://stackoverflow.com/users/712334/josh-habdas"}, "edited": false, "score": 1, "creation_date": 1480868099, "post_id": 35346253, "comment_id": 69130486, "body": "As <a href=\"https://github.com/rubygems/rubygems/issues/1420#issuecomment-256350006\" rel=\"nofollow noreferrer\">pointed out</a> in <b>rubygems/issues/#1420</b> this issue can be fixed automatically now by simply running <code>gem update --system</code>."}], "tags": [], "owner": {"reputation": 36, "user_id": 5914917, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154053528588900/picture?type=large", "display_name": "Chris Zimmerman", "link": "https://stackoverflow.com/users/5914917/chris-zimmerman"}, "is_accepted": true, "score": 2, "last_activity_date": 1455212211, "creation_date": 1455212211, "answer_id": 35346253, "question_id": 35327947, "link": "https://stackoverflow.com/questions/35327947/engineyard-gem-failing-to-run-find-active-stub-by-path-reports-undefined-method/35346253#35346253", "title": "Engineyard Gem Failing to Run; find_active_stub_by_path Reports Undefined Method &#39;this&#39;", "body": "<p>There is a fix to the ruby-gems issue listed here. <a href=\"https://github.com/rubygems/rubygems/issues/1420#issuecomment-169178431\" rel=\"nofollow\">https://github.com/rubygems/rubygems/issues/1420#issuecomment-169178431</a></p>\n\n<p>It has not been merged into master as of yet.  You can either downgrade ruby-gems or apply the patch.</p>\n"}], "owner": {"reputation": 138, "user_id": 5335552, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vz4SEPBBe2A/AAAAAAAAAAI/AAAAAAAAARc/HjbHWELLtI8/photo.jpg?sz=128", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5335552/ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 499, "favorite_count": 0, "accepted_answer_id": 35346253, "answer_count": 2, "score": 0, "last_activity_date": 1455212211, "creation_date": 1455146385, "question_id": 35327947, "link": "https://stackoverflow.com/questions/35327947/engineyard-gem-failing-to-run-find-active-stub-by-path-reports-undefined-method", "title": "Engineyard Gem Failing to Run; find_active_stub_by_path Reports Undefined Method &#39;this&#39;", "body": "<p>I cannot get the Engine Yard gem to work on my Rails application. I have built it on top of basic pieces I put together following the first ten chapters of Michael Hartl's Ruby on Rails Tutorial (third edition). While it deploys fine to Heroku, I want to switch to Engine Yard.</p>\n\n<p>Here is the error I get any time I call ey:</p>\n\n<pre><code>~/workspace (development) $ ey --help\n/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:2158:in `method_missing': undefined method `this' for #&lt;Gem::Specification:0x52e978 engineyard-3.2.1&gt; (NoMethodError)\n        from /usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/specification.rb:1057:in `find_active_stub_by_path'\n        from /usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:64:in `require'\n        from /usr/local/rvm/gems/ruby-2.3.0/gems/engineyard-3.2.1/bin/ey:3:in `&lt;top (required)&gt;'\n        from /usr/local/rvm/gems/ruby-2.3.0/bin/ey:23:in `load'\n        from /usr/local/rvm/gems/ruby-2.3.0/bin/ey:23:in `&lt;main&gt;'\n        from /usr/local/rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `eval'\n        from /usr/local/rvm/gems/ruby-2.3.0/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/rubygems/rdoc/Gem/Specification.html#method-c-find_active_stub_by_path\" rel=\"nofollow\">Ruby documentation</a> seems to indicate that the engineyard gem cannot be found, but I have not come to understand why.</p>\n\n<p>The Engine Yard gem works fine when I start a new project locally, when I start a new project on Cloud 9, or when I push a new project to a repo then clone it to a seperate Cloud 9 account. However, I get identical errors on the other three apps I built following Hartl's tutorial, including the hello world app from Chapter 1.</p>\n\n<p>I have tried to identify what is creating this problem by going through Chapter 1 again with a new project. Unfortunately, my recreation of Hartl's hello world app runs the engineyard gem perfectly fine. (The walkthrough of that recreation is below.)</p>\n\n<p>'gem pristine --all' has no effect on this error.</p>\n\n<p>I have been in touch with the Engine Yard support team for a week and the problem does not seem to belong to the gem. As I can run the Engine Yard gem without problem on other Cloud 9 work spaces, it is not a problem with Cloud 9.</p>\n\n<p>What is causing this error, and how can I fix it?</p>\n\n<hr>\n\n<p><strong>My bug replication effort</strong></p>\n\n<p>NOTE: As noted in <a href=\"https://github.com/engineyard/engineyard\" rel=\"nofollow\">the engineyard gem documentation</a>, the gem is not to be included in the Gemfile.</p>\n\n<p>On C9, create a public workspace on Ruby framework (referred to a A), then set up git and push to BitBucket from A without running \"$ bundle install\"</p>\n\n<p>Now create a second workspace on a seperate account on C9 (referred to as B) on the Ruby framework and clone it from the repo.</p>\n\n<pre><code>B$ gem install engineyard\nB$ ey --help  [this was SUCCESSFUL]\nB$ bundle install\nB$ ey --help  [this was SUCCESSFUL]\n</code></pre>\n\n<p>Now install the engineyard gem on A and test it.</p>\n\n<pre><code>A$ bundle install\nA$ gem install engineyard\nA$ ey --help [this was SUCCESSFUL]\n</code></pre>\n\n<p>Now test the Gemfile in Listing 1.5, which is used by my hello world application that is currently failing. Replace the content of Gemfile in workspace A with that in Listing 1.5:</p>\n\n<pre><code>gem 'rails', '4.2.0'\ngem 'sass-rails', '5.0.1'\ngem 'uglifier', '2.5.3'\ngem 'coffee-rails', '4.1.0'\ngem 'jquery-rails', '4.0.3'\ngem 'turbolinks', '2.3.0'\ngem 'jbuilder', '2.2.3'\ngem 'sdoc', '0.4.0', group: :doc\n\ngroup :development, :test do\n  gem 'sqlite3', '1.3.9'\n  gem 'byebug', '3.4.0'\n  gem 'web-console', '2.0.0.beta3'\n  gem 'spring', '1.1.3'\nend\n</code></pre>\n\n<p>Now run this:</p>\n\n<pre><code>A$ bundle install\nA$ ey --help [this was SUCCESSFUL]\nA$ git add -A\nA$ git commit -m \"Make Gemfile equal to Hartl's Listing 1.5\"\nA$ git push\nB$ git pull\nB$ bundle install\nB$ ey --help [this was SUCCESSFUL]\n</code></pre>\n\n<p>So this version of the Gemfile in Listing 1.5 is not problematic.</p>\n\n<p>Step 1.3.2 tells us to run a rails server, which fails with sass-rails 5.0.1. I replaced 5.0.1 with 5.0.2 in my existing/completed hello world application (as I've done in my real project). Now perform the same update on A and B (via the repository)...</p>\n\n<p>On A, update Gemfile to this:</p>\n\n<pre><code>gem 'rails', '4.2.0'\ngem 'sass-rails', '5.0.2'\ngem 'uglifier', '2.5.3'\ngem 'coffee-rails', '4.1.0'\ngem 'jquery-rails', '4.0.3'\ngem 'turbolinks', '2.3.0'\ngem 'jbuilder', '2.2.3'\ngem 'sdoc', '0.4.0', group: :doc\n\ngroup :development, :test do\n  gem 'sqlite3', '1.3.9'\n  gem 'byebug', '3.4.0'\n  gem 'web-console', '2.0.0.beta3'\n  gem 'spring', '1.1.3'\nend\n</code></pre>\n\n<p>Now run this:</p>\n\n<pre><code>A$ bundle install\nA$ ey --help [this was SUCCESSFUL]\nA$ git add -A\nA$ git commit -m \"Upgrade sass-rails to 5.0.2\"\nA$ git push\nB$ git pull\nB$ ey --help [this was SUCCESSFUL]\n</code></pre>\n\n<p>Now on workspace A, run the rails server as in Listing 1.7, edit application_controller as in Listing 1.8, change routes as in Listing 1.10, and test it. Works as expected. Now push and test on B...</p>\n\n<pre><code>A$ ey --help [this was SUCCESSFUL]\nA$ git add -A\nA$ git commit -m \"Listings 1.7, 1.8, and 1.10\"\nA$ git push\nB$ git pull\nB$ ey --help [this was SUCCESSFUL]\n</code></pre>\n"}, {"tags": ["ruby", "thrift", "idl"], "comments": [{"owner": {"reputation": 12067, "user_id": 499466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cc0612ec9a2b6af96500cc6e4bfdc7c?s=128&d=identicon&r=PG", "display_name": "JensG", "link": "https://stackoverflow.com/users/499466/jensg"}, "edited": false, "score": 0, "creation_date": 1455148068, "post_id": 35327648, "comment_id": 58364968, "body": "Since you seem to have a test case, please file a ticket."}], "owner": {"reputation": 2686, "user_id": 2486805, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GQsDe.jpg?s=128&g=1", "display_name": "jm0", "link": "https://stackoverflow.com/users/2486805/jm0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1455145054, "creation_date": 1455145054, "question_id": 35327648, "link": "https://stackoverflow.com/questions/35327648/how-to-generate-functioning-ruby-client-from-thrift-idl-with-circular-reference", "title": "How to generate functioning Ruby client from Thrift IDL with circular reference?", "body": "<p>My Thrift IDL has a circular reference but has no problem functioning in Java (both as a server and client). The generated code won't work in Ruby, though we've found it will work if each class is broken into a separate file &amp; required in others. I thought about mimicking this file structure in the Thrift IDL but (in addition to being much less organized) it fails because the Thrift compiler is pretty naive about resolution itself (I believe it follows the includes back &amp; forth, stuck in an infinite loop at compile time).</p>\n\n<p>Is there a way to resolve this other than manually editing/post-processing the generated Ruby client?</p>\n\n<p>I found a Jira ticket requesting support for this but its so old it must have been forgotten. <a href=\"https://issues.apache.org/jira/browse/THRIFT-476\" rel=\"nofollow\">https://issues.apache.org/jira/browse/THRIFT-476</a></p>\n\n<p>(I also know they recently added a compiler option for namespacing but I don't think that would help alleviate this? I'm not a big Ruby-ist... <a href=\"https://issues.apache.org/jira/browse/THRIFT-2574\" rel=\"nofollow\">https://issues.apache.org/jira/browse/THRIFT-2574</a>)</p>\n\n<p>The IDL is similar to this though we are converting to \"union\" for the container... if you have a better solution for polymorphism would love to hear that as well. :)</p>\n\n<pre><code>struct Collection {\n  1: list&lt;CollectionElement&gt; collection_elements;\n}\n\nstruct CollectionElement {\n   1: PolymorphContainer x;\n   2: i32 quantity;\n}\n\nstruct PolymorphContainer {\n    1: Type1 x;\n    2: Type2 y;\n    3: Collection z;\n}\n</code></pre>\n"}, {"tags": ["ruby", "io", "terminal", "buffer", "stdout"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1455145310, "post_id": 35327526, "comment_id": 58363905, "body": "I think it is not Ruby but it is the piping mechanism in shell that is behaving differently. Ruby is running on the shell, and the shell can intercept it in the way it wants."}, {"owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1455145371, "post_id": 35327526, "comment_id": 58363934, "body": "@sawa I had that hypothesis and tried to test it by running the bash program above. Is there a better way to distinguish between the two possibilities?"}], "owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1455144486, "creation_date": 1455144486, "question_id": 35327526, "link": "https://stackoverflow.com/questions/35327526/why-does-rubys-io-buffer-behave-differently-when-being-sent-to-the-terminal-ver", "title": "Why does Ruby&#39;s IO buffer behave differently when being sent to the terminal versus to another process?", "body": "<p>If I ask Ruby to write to the terminal every 0.01s, it prints every 0.01s.</p>\n\n<pre><code>ruby -e \"loop { sleep 0.01; puts Time.now }\"\n</code></pre>\n\n<p>However, if I ask it to write to <code>tee</code> every 0.01s, it prints only once it has buffered (about every 5s, after 8196 characters).</p>\n\n<pre><code>ruby -e \"loop { sleep 0.01; puts Time.now }\" | tee\n</code></pre>\n\n<p>I can force it to print every 0.01s by setting <code>sync = true</code>.</p>\n\n<pre><code>ruby -e \"STDOUT.sync = true; loop { sleep 0.01; puts Time.now }\" | tee\n</code></pre>\n\n<p>For contrast, the same program written in bash does not appear to be buffered on its way to <code>tee</code> and prints to the terminal each 0.01s.</p>\n\n<pre><code>bash -c \"while true; do date; sleep 0.01; done\" | tee\n</code></pre>\n\n<p>Why does Ruby's IO behave differently depending on whether it's headed to the terminal versus being sent to another process first?</p>\n"}, {"tags": ["java", "ruby", "jruby"], "comments": [{"owner": {"reputation": 182833, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 0, "creation_date": 1455144627, "post_id": 35327504, "comment_id": 58363632, "body": "Which part do you need more explanation for? It&#39;s the same as the Java classpath running JRuby."}, {"owner": {"reputation": 664, "user_id": 837070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9183f2f97a2f44594196cab39cbe5928?s=128&d=identicon&r=PG", "display_name": "Andrei Beliankou", "link": "https://stackoverflow.com/users/837070/andrei-beliankou"}, "reply_to_user": {"reputation": 182833, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 0, "creation_date": 1455144844, "post_id": 35327504, "comment_id": 58363722, "body": "I&#39;m interested in changes in <code>$CLASSPATH</code> and <code>$LOAD_PATH</code> after this statement because I cannot spot any."}, {"owner": {"reputation": 182833, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 0, "creation_date": 1455147462, "post_id": 35327504, "comment_id": 58364774, "body": "Do you want to access Java class files in the CLASSPATH? Then <code>require &#39;java&#39;</code>, if you don&#39;t want to access any Java class files don&#39;t."}, {"owner": {"reputation": 664, "user_id": 837070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9183f2f97a2f44594196cab39cbe5928?s=128&d=identicon&r=PG", "display_name": "Andrei Beliankou", "link": "https://stackoverflow.com/users/837070/andrei-beliankou"}, "reply_to_user": {"reputation": 182833, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 0, "creation_date": 1455150902, "post_id": 35327504, "comment_id": 58365890, "body": "Sorry, if I&#39;m not too bright, but consider two examples: <code>java -jar jruby-complete-9.0.5.0.jar -e &#39;$CLASSPATH &lt;&lt; &quot;lib&#47;opennlp-tools-1.6.0.jar&quot;; Java::OpennlpToolsTokenize::SimpleTokenizer.new&#39;</code> and <code>java -jar jruby-complete-9.0.5.0.jar -e &#39;puts Java::JavaLang::String.new(&quot;Hello&quot;)&#39;</code>. Why do they work?"}], "answers": [{"comments": [{"owner": {"reputation": 664, "user_id": 837070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9183f2f97a2f44594196cab39cbe5928?s=128&d=identicon&r=PG", "display_name": "Andrei Beliankou", "link": "https://stackoverflow.com/users/837070/andrei-beliankou"}, "edited": false, "score": 1, "creation_date": 1455235636, "post_id": 35345153, "comment_id": 58412290, "body": "Very clear! I noticed the &quot;false&quot; return value by &#39;require&#39; but connected that with some configuration of my installation. You explanation helped a lot!"}], "tags": [], "owner": {"reputation": 782, "user_id": 947335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13313ac2ec7ba7c43b1b952db034ff3b?s=128&d=identicon&r=PG", "display_name": "Thomas Enebo", "link": "https://stackoverflow.com/users/947335/thomas-enebo"}, "is_accepted": true, "score": 1, "last_activity_date": 1455209114, "creation_date": 1455209114, "answer_id": 35345153, "question_id": 35327504, "link": "https://stackoverflow.com/questions/35327504/what-does-the-require-java-statement-do-in-jruby-scripts/35345153#35345153", "title": "What does the &#39;require &quot;java&quot;&#39; statement do in JRuby scripts?", "body": "<p>There are two parts to this question which need answering and some clarification we should make to our documentation (I made an attempt already in <a href=\"https://github.com/jruby/jruby/wiki/CallingJavaFromJRuby\" rel=\"nofollow\">https://github.com/jruby/jruby/wiki/CallingJavaFromJRuby</a>):</p>\n\n<ol>\n<li><p>require 'java'.  It loads the ability to load java classes and treat them as if they were Ruby objects/classes.  However, Since JRuby 1.7.x, JRuby internally needs to require 'java' so it has already required 'java' by the time your expression is evaluated.  So technically it is true that \"require 'java'\" loads Java interoperability, but since our kernel does this now it is largely a no-op by the time you call it (see return value of the require).  We still recommend putting it at the top of any file where you use Java interop. just so it is documented in your code.  Also, the fact that it happens to be loaded is more of an impl detail and not a semantic detail (e.g. in the distant future we maybe won't require it in our kernel).</p></li>\n<li><p>Unclear verbiage: \"However, this will not give you access to any non-bundled libraries.\".  So if you want to access a library not in your CLASSPATH (this was stipulated in the parenthesis) you need to add them to your LOAD_PATH (or via direct require'ing).  I tweaked that sentence to hopefully make it more clear.</p></li>\n</ol>\n"}], "owner": {"reputation": 664, "user_id": 837070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9183f2f97a2f44594196cab39cbe5928?s=128&d=identicon&r=PG", "display_name": "Andrei Beliankou", "link": "https://stackoverflow.com/users/837070/andrei-beliankou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 925, "favorite_count": 0, "accepted_answer_id": 35345153, "answer_count": 1, "score": 0, "last_activity_date": 1455209114, "creation_date": 1455144396, "last_edit_date": 1455205446, "question_id": 35327504, "link": "https://stackoverflow.com/questions/35327504/what-does-the-require-java-statement-do-in-jruby-scripts", "title": "What does the &#39;require &quot;java&quot;&#39; statement do in JRuby scripts?", "body": "<p>I read about Java interoperability in Ruby, so using JRuby is an obvious choice. But somehow I don't really grasp the idea behind <code>require 'java'</code>. The documentation says:</p>\n\n<blockquote>\n  <p>... will give you access to any bundled Java libraries (classes within your java class path). However, this will not give you access to any non-bundled libraries.</p>\n</blockquote>\n\n<p>Are there any more elaborated explanations?</p>\n\n<p>To be more precise I don't understand why the following code works without <code>require \"java\"</code>:</p>\n\n<p><code>$ export CLASSPATH=\".:lib/opennlp-tools-1.6.0.jar\"\n$ jruby -e 't = Java::OpennlpToolsTokenize::SimpleTokenizer.new; puts t.tokenize(\"I went to school\").to_a'\n</code></p>\n"}, {"tags": ["php", "ruby", "web-services", "httpresponse", "httpsession"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1455146172, "post_id": 35327362, "comment_id": 58364258, "body": "&quot;I tried looking up other questions and this is where that got me.&quot; Okay, do you have a question?"}, {"owner": {"reputation": 20, "user_id": 4316498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7111b8fec436e830472ea4fa5a00b218?s=128&d=identicon&r=PG&f=1", "display_name": "moloch101", "link": "https://stackoverflow.com/users/4316498/moloch101"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1455147088, "post_id": 35327362, "comment_id": 58364644, "body": "The php code doesnt work. it doesnt show an error on the page though so im not sure whats wrong"}, {"owner": {"reputation": 8065, "user_id": 2591689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9eHeO.png?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/2591689/jeff"}, "edited": false, "score": 0, "creation_date": 1455151690, "post_id": 35327362, "comment_id": 58366115, "body": "you are not seeing an error because you have suppressed them. get rid of the @ sign before @http_post_data"}], "answers": [{"tags": [], "owner": {"reputation": 307, "user_id": 2305272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MSTiC.jpg?s=128&g=1", "display_name": "BillK", "link": "https://stackoverflow.com/users/2305272/billk"}, "is_accepted": true, "score": 0, "last_activity_date": 1455147280, "creation_date": 1455147280, "answer_id": 35328099, "question_id": 35327362, "link": "https://stackoverflow.com/questions/35327362/make-a-web-service-call-in-php/35328099#35328099", "title": "Make a web service call in php", "body": "<p><code>http_post_data</code> depends on pecl_http.  Unless you must use http_post_data, cURL is probably installed by default on your WAMP server.</p>\n\n<p>The code below is just an example; I haven't tested it but you get the idea:</p>\n\n<pre><code>$headers = array(\n    'Content-Type' =&gt; 'text/xml; charset=UTF-8',\n    'SOAPAction' =&gt; 'HotelAvail',\n);\n\n$ch = curl_init($server_url);\ncurl_setopt($ch, CURLOPT_HTTPHEADER, $headers);\ncurl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 60);\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\n$full_response = curl_exec($ch);\ncurl_close($ch);\n</code></pre>\n"}], "owner": {"reputation": 20, "user_id": 4316498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7111b8fec436e830472ea4fa5a00b218?s=128&d=identicon&r=PG&f=1", "display_name": "moloch101", "link": "https://stackoverflow.com/users/4316498/moloch101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 35328099, "answer_count": 1, "score": 0, "last_activity_date": 1455147280, "creation_date": 1455143761, "question_id": 35327362, "link": "https://stackoverflow.com/questions/35327362/make-a-web-service-call-in-php", "title": "Make a web service call in php", "body": "<p>So i have this working in ruby and i want to be able to do this in php. I am using the wamp server if that matters.</p>\n\n<p>Here's the ruby method:</p>\n\n<pre><code>def response(url, body)\n uri = URI(url)\n\n request = Net::HTTP::Post.new(uri.request_uri)\n request.body = body\n\n http_session = Net::HTTP.new(uri.hostname, uri.port)\n http_session.use_ssl = (uri.scheme == \"https\")\n http_session.verify_mode = OpenSSL::SSL::VERIFY_NONE\n response = http_session.request(request)\n\n return response.body\nend\n</code></pre>\n\n<p>I tried looking up other questions and this is where that got me:</p>\n\n<pre><code>$request_info = array();\n$REQUEST_BODY = 'request body';\n\n$full_response = @http_post_data(\n    'url',\n    $REQUEST_BODY,\n    array(\n        'headers' =&gt; array(\n            'Content-Type' =&gt; 'text/xml; charset=UTF-8',\n            'SOAPAction' =&gt; 'HotelAvail',\n        ),\n        'timeout' =&gt; 60,\n\n    ),\n    $request_info\n);\n\n$response_xml = new SimpleXMLElement(strstr($full_response, '&lt;?xml'));\n\nforeach ($response_xml-&gt;xpath('//@HotelName') as $HotelName) {\n    echo strval($HotelName) . \"\\n\";\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1329, "user_id": 5666004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C7JR1.jpg?s=128&g=1", "display_name": "Jefferson", "link": "https://stackoverflow.com/users/5666004/jefferson"}, "edited": false, "score": 0, "creation_date": 1455143556, "post_id": 35327243, "comment_id": 58363174, "body": "can you post your detailed error code?"}, {"owner": {"reputation": 7129, "user_id": 5841629, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/N0dOJ.jpg?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5841629/ray"}, "reply_to_user": {"reputation": 1329, "user_id": 5666004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C7JR1.jpg?s=128&g=1", "display_name": "Jefferson", "link": "https://stackoverflow.com/users/5666004/jefferson"}, "edited": false, "score": 0, "creation_date": 1455143808, "post_id": 35327243, "comment_id": 58363289, "body": "@JeffersonChoi, I updated my question"}, {"owner": {"reputation": 507, "user_id": 1262164, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/603992781533eb1746d44fb50d5d13b1?s=128&d=identicon&r=PG", "display_name": "Ahmed Fathy", "link": "https://stackoverflow.com/users/1262164/ahmed-fathy"}, "edited": false, "score": 0, "creation_date": 1455144091, "post_id": 35327243, "comment_id": 58363407, "body": "User.find_by_username(params[:id])  Shouldn&#39;t that contain a .id at the end?"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1455144108, "post_id": 35327243, "comment_id": 58363414, "body": "FYI: <code>@posts = Post.all.where</code> is redundant, just use <code>@posts = Post.where(...)</code>."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1455144234, "post_id": 35327243, "comment_id": 58363469, "body": "Also, <code>@posts = Post.all.where( &quot;user_id = ?&quot;, User.find_by_username(params[:id]) ) </code> is all backwards. You should be using Rails associations to achieve this: <code>@user = User.where(...); @posts = @user.posts</code>."}, {"owner": {"reputation": 7129, "user_id": 5841629, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/N0dOJ.jpg?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5841629/ray"}, "edited": false, "score": 0, "creation_date": 1455144348, "post_id": 35327243, "comment_id": 58363515, "body": "I tried it before. If i put User.find_by_username(params[:id]) without &quot;== current_user.id&quot; the delete button will appear to everyone and if I add the current_user.id the button disappears for everyone even the user."}, {"owner": {"reputation": 4422, "user_id": 1202525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccc5db30edf02524aa2a0fb17d154bf8?s=128&d=identicon&r=PG", "display_name": "TomDunning", "link": "https://stackoverflow.com/users/1202525/tomdunning"}, "edited": false, "score": 0, "creation_date": 1455144482, "post_id": 35327243, "comment_id": 58363574, "body": "he&#39;s not saying remove that, he&#39;s saying you can improve the code in your controller. please see and try my answer below."}, {"owner": {"reputation": 7129, "user_id": 5841629, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/N0dOJ.jpg?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5841629/ray"}, "edited": false, "score": 0, "creation_date": 1455144784, "post_id": 35327243, "comment_id": 58363698, "body": "I did, it did not fix it"}], "answers": [{"comments": [{"owner": {"reputation": 7129, "user_id": 5841629, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/N0dOJ.jpg?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5841629/ray"}, "edited": false, "score": 0, "creation_date": 1455144569, "post_id": 35327455, "comment_id": 58363610, "body": "It did remove the error but it also removed the form to the user as well"}, {"owner": {"reputation": 4422, "user_id": 1202525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccc5db30edf02524aa2a0fb17d154bf8?s=128&d=identicon&r=PG", "display_name": "TomDunning", "link": "https://stackoverflow.com/users/1202525/tomdunning"}, "reply_to_user": {"reputation": 7129, "user_id": 5841629, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/N0dOJ.jpg?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5841629/ray"}, "edited": false, "score": 0, "creation_date": 1455144760, "post_id": 35327455, "comment_id": 58363688, "body": "ok, to debug you need to check 3 things for the &quot;if&quot; statement: 1) user_signed_in? is true, 2) <code>@newPost</code> is actually set, 3) the user created the post. The issue might also be in your partial, please can i see &quot;/components/post_form&quot; - that will need to reference <code>@newPost</code> internally one way or another"}, {"owner": {"reputation": 4422, "user_id": 1202525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccc5db30edf02524aa2a0fb17d154bf8?s=128&d=identicon&r=PG", "display_name": "TomDunning", "link": "https://stackoverflow.com/users/1202525/tomdunning"}, "reply_to_user": {"reputation": 7129, "user_id": 5841629, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/N0dOJ.jpg?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5841629/ray"}, "edited": false, "score": 0, "creation_date": 1455189937, "post_id": 35327455, "comment_id": 58383229, "body": "I&#39;d use debugger or pry to identify what data isn&#39;t available."}], "tags": [], "owner": {"reputation": 4422, "user_id": 1202525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccc5db30edf02524aa2a0fb17d154bf8?s=128&d=identicon&r=PG", "display_name": "TomDunning", "link": "https://stackoverflow.com/users/1202525/tomdunning"}, "is_accepted": false, "score": 0, "last_activity_date": 1455144149, "creation_date": 1455144149, "answer_id": 35327455, "question_id": 35327243, "link": "https://stackoverflow.com/questions/35327243/am-i-creating-an-undefined-nil-method/35327455#35327455", "title": "Am I creating an undefined nil method?", "body": "<p>replace this:</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n    &lt;div class=\"row\"&gt;\n        &lt;% if user_signed_in? %&gt;\n            &lt;% if @post.user_id == current_user.id %&gt;\n                &lt;div class=\"col-md-5\"&gt;\n                    &lt;%= render '/components/post_form' %&gt;\n                &lt;/div&gt;\n            &lt;%end%&gt;\n        &lt;%end%&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>with this:</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n   &lt;% if user_signed_in? &amp;&amp; @newPost.present? &amp;&amp; @newPost.user_id == current_user.id %&gt;\n    &lt;div class=\"row\"&gt;\n\n      &lt;div class=\"col-md-5\"&gt;\n         &lt;%= render '/components/post_form' %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n &lt;%end%&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>notice in your controller you defined <code>@newPost</code>, but your view is trying to use <code>@post</code> which doesnt exist.</p>\n\n<p>Also you may want to pass <code>@newPost</code> into the partial, like so:</p>\n\n<pre><code>&lt;%= render '/components/post_form', object: @newPost %&gt;\n</code></pre>\n"}], "owner": {"reputation": 7129, "user_id": 5841629, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/N0dOJ.jpg?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5841629/ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1455144895, "creation_date": 1455143267, "last_edit_date": 1455144895, "question_id": 35327243, "link": "https://stackoverflow.com/questions/35327243/am-i-creating-an-undefined-nil-method", "title": "Am I creating an undefined nil method?", "body": "<p>Everything is working properly except for when I want to check if a post belongs to a user_id. </p>\n\n<p>What I am basically trying to achieve is to hide the delete post button so that other users can't delete it.</p>\n\n<p>I am still new to ruby on rails when I did my first project I added an if statement that checks whether it belongs to the user_id or not. Now I am trying to do the same but I keep on getting the NoMethodError</p>\n\n<p>Profile code:</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n    &lt;div class=\"row\"&gt;\n        &lt;% if user_signed_in? %&gt;\n            &lt;% if @post.user_id == current_user.id %&gt;\n                &lt;div class=\"col-md-5\"&gt;\n                    &lt;%= render '/components/post_form' %&gt;\n                &lt;/div&gt;\n            &lt;%end%&gt;\n        &lt;%end%&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Post controller:</p>\n\n<pre><code>class PostsController &lt; ApplicationController\n    before_action :find_post, only: [:show, :edit, :update, :destroy]\n    #new post\n    def new\n        @post = Post.new\n    end\n    #create post\n    def create\n        @post = Post.new(posts_params)\n        @post.user_id = current_user.id\n        respond_to do |f|\n            if (@post.save)\n                f.html {redirect_to :back}\n            else\n                f.html {redirect_to :back, notice: \"An error happened while submitting your post. Please try again.\"}\n            end         \n        end\n    end\n    #show post \n    def show\n        if (User.find_by_username(params[:id]))\n            @post = params[:id]\n        end\n    end\n    #destroy post\n    def destroy\n        @post = Post.find(params[:id])\n        @post.destroy\n        redirect_to :back\n    end\n    #private\n    private\n        def posts_params\n            params.require(:post).permit(:user_id, :content)\n        end\n\n        def find_post\n            @post = Post.find(params[:id])          \n        end\n\nend\n</code></pre>\n\n<p>Pages controller:</p>\n\n<pre><code>class PagesController &lt; ApplicationController\n  def index\n  end\n\n  def home\n    @posts = Post.all\n  end\n\n  def profile\n    if (User.find_by_username(params[:id]))\n        @username = params[:id]\n    else\n        redirect_to root_path, :notice =&gt; \"user not found\"\n    end\n\n    @posts = Post.all.where( \"user_id = ?\", User.find_by_username(params[:id]) )\n    @newPost = Post.new\n  end\n\n  def explore\n    @posts = Post.all\n  end\nend\n</code></pre>\n\n<p>Post schema:</p>\n\n<pre><code>  create_table \"posts\", force: true do |t|\n    t.text     \"content\"\n    t.integer  \"user_id\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>Error I am getting:</p>\n\n<pre><code>NoMethodError in Pages#profile\n</code></pre>\n\n<p>Full trace:</p>\n\n<pre><code>app/views/pages/profile.html.erb:4:in `_app_views_pages_profile_html_erb___203732305_53267256'\nactionview (4.1.8) lib/action_view/template.rb:145:in `block in render'\nactivesupport (4.1.8) lib/active_support/notifications.rb:161:in `instrument'\nactionview (4.1.8) lib/action_view/template.rb:339:in `instrument'\nactionview (4.1.8) lib/action_view/template.rb:143:in `render'\nactionview (4.1.8) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'\nactionview (4.1.8) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'\nactivesupport (4.1.8) lib/active_support/notifications.rb:159:in `block in instrument'\nactivesupport (4.1.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\nactivesupport (4.1.8) lib/active_support/notifications.rb:159:in `instrument'\nactionview (4.1.8) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'\nactionview (4.1.8) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'\nactionview (4.1.8) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'\nactionview (4.1.8) lib/action_view/renderer/template_renderer.rb:53:in `render_template'\nactionview (4.1.8) lib/action_view/renderer/template_renderer.rb:17:in `render'\nactionview (4.1.8) lib/action_view/renderer/renderer.rb:42:in `render_template'\nactionview (4.1.8) lib/action_view/renderer/renderer.rb:23:in `render'\nactionview (4.1.8) lib/action_view/rendering.rb:99:in `_render_template'\nactionpack (4.1.8) lib/action_controller/metal/streaming.rb:217:in `_render_template'\nactionview (4.1.8) lib/action_view/rendering.rb:82:in `render_to_body'\nactionpack (4.1.8) lib/action_controller/metal/rendering.rb:32:in `render_to_body'\nactionpack (4.1.8) lib/action_controller/metal/renderers.rb:32:in `render_to_body'\nactionpack (4.1.8) lib/abstract_controller/rendering.rb:25:in `render'\nactionpack (4.1.8) lib/action_controller/metal/rendering.rb:16:in `render'\nactionpack (4.1.8) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'\nactivesupport (4.1.8) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'\nC:/RailsInstaller/Ruby2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'\nactivesupport (4.1.8) lib/active_support/core_ext/benchmark.rb:12:in `ms'\nactionpack (4.1.8) lib/action_controller/metal/instrumentation.rb:41:in `block in render'\nactionpack (4.1.8) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'\nactiverecord (4.1.8) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'\nactionpack (4.1.8) lib/action_controller/metal/instrumentation.rb:40:in `render'\nactionpack (4.1.8) lib/action_controller/metal/implicit_render.rb:10:in `default_render'\nactionpack (4.1.8) lib/action_controller/metal/implicit_render.rb:5:in `send_action'\nactionpack (4.1.8) lib/abstract_controller/base.rb:189:in `process_action'\nactionpack (4.1.8) lib/action_controller/metal/rendering.rb:10:in `process_action'\nactionpack (4.1.8) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\nactivesupport (4.1.8) lib/active_support/callbacks.rb:113:in `call'\nactivesupport (4.1.8) lib/active_support/callbacks.rb:113:in `call'\nactivesupport (4.1.8) lib/active_support/callbacks.rb:149:in `block in halting_and_conditional'\nactivesupport (4.1.8) lib/active_support/callbacks.rb:229:in `call'\nactivesupport (4.1.8) lib/active_support/callbacks.rb:229:in `block in halting'\nactivesupport (4.1.8) lib/active_support/callbacks.rb:229:in `call'\nactivesupport (4.1.8) lib/active_support/callbacks.rb:229:in `block in halting'\nactivesupport (4.1.8) lib/active_support/callbacks.rb:166:in `call'\nactivesupport (4.1.8) lib/active_support/callbacks.rb:166:in `block in halting'\nactivesupport (4.1.8) lib/active_support/callbacks.rb:166:in `call'\nactivesupport (4.1.8) lib/active_support/callbacks.rb:166:in `block in halting'\nactivesupport (4.1.8) lib/active_support/callbacks.rb:166:in `call'\nactivesupport (4.1.8) lib/active_support/callbacks.rb:166:in `block in halting'\nactivesupport (4.1.8) lib/active_support/callbacks.rb:86:in `call'\nactivesupport (4.1.8) lib/active_support/callbacks.rb:86:in `run_callbacks'\nactionpack (4.1.8) lib/abstract_controller/callbacks.rb:19:in `process_action'\nactionpack (4.1.8) lib/action_controller/metal/rescue.rb:29:in `process_action'\nactionpack (4.1.8) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'\nactivesupport (4.1.8) lib/active_support/notifications.rb:159:in `block in instrument'\nactivesupport (4.1.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\nactivesupport (4.1.8) lib/active_support/notifications.rb:159:in `instrument'\nactionpack (4.1.8) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\nactionpack (4.1.8) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\nactiverecord (4.1.8) lib/active_record/railties/controller_runtime.rb:18:in `process_action'\nactionpack (4.1.8) lib/abstract_controller/base.rb:136:in `process'\nactionview (4.1.8) lib/action_view/rendering.rb:30:in `process'\nactionpack (4.1.8) lib/action_controller/metal.rb:196:in `dispatch'\nactionpack (4.1.8) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'\nactionpack (4.1.8) lib/action_controller/metal.rb:232:in `block in action'\nactionpack (4.1.8) lib/action_dispatch/routing/route_set.rb:82:in `call'\nactionpack (4.1.8) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'\nactionpack (4.1.8) lib/action_dispatch/routing/route_set.rb:50:in `call'\nactionpack (4.1.8) lib/action_dispatch/journey/router.rb:73:in `block in call'\nactionpack (4.1.8) lib/action_dispatch/journey/router.rb:59:in `each'\nactionpack (4.1.8) lib/action_dispatch/journey/router.rb:59:in `call'\nactionpack (4.1.8) lib/action_dispatch/routing/route_set.rb:678:in `call'\nwarden (1.2.6) lib/warden/manager.rb:35:in `block in call'\nwarden (1.2.6) lib/warden/manager.rb:34:in `catch'\nwarden (1.2.6) lib/warden/manager.rb:34:in `call'\nrack (1.5.5) lib/rack/etag.rb:23:in `call'\nrack (1.5.5) lib/rack/conditionalget.rb:25:in `call'\nrack (1.5.5) lib/rack/head.rb:11:in `call'\nactionpack (4.1.8) lib/action_dispatch/middleware/params_parser.rb:27:in `call'\nactionpack (4.1.8) lib/action_dispatch/middleware/flash.rb:254:in `call'\nrack (1.5.5) lib/rack/session/abstract/id.rb:225:in `context'\nrack (1.5.5) lib/rack/session/abstract/id.rb:220:in `call'\nactionpack (4.1.8) lib/action_dispatch/middleware/cookies.rb:560:in `call'\nactiverecord (4.1.8) lib/active_record/query_cache.rb:36:in `call'\nactiverecord (4.1.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'\nactiverecord (4.1.8) lib/active_record/migration.rb:380:in `call'\nactionpack (4.1.8) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\nactivesupport (4.1.8) lib/active_support/callbacks.rb:82:in `run_callbacks'\nactionpack (4.1.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\nactionpack (4.1.8) lib/action_dispatch/middleware/reloader.rb:73:in `call'\nactionpack (4.1.8) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'\nactionpack (4.1.8) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\nactionpack (4.1.8) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\nrailties (4.1.8) lib/rails/rack/logger.rb:38:in `call_app'\nrailties (4.1.8) lib/rails/rack/logger.rb:20:in `block in call'\nactivesupport (4.1.8) lib/active_support/tagged_logging.rb:68:in `block in tagged'\nactivesupport (4.1.8) lib/active_support/tagged_logging.rb:26:in `tagged'\nactivesupport (4.1.8) lib/active_support/tagged_logging.rb:68:in `tagged'\nrailties (4.1.8) lib/rails/rack/logger.rb:20:in `call'\nactionpack (4.1.8) lib/action_dispatch/middleware/request_id.rb:21:in `call'\nrack (1.5.5) lib/rack/methodoverride.rb:21:in `call'\nrack (1.5.5) lib/rack/runtime.rb:17:in `call'\nactivesupport (4.1.8) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'\nrack (1.5.5) lib/rack/lock.rb:17:in `call'\nactionpack (4.1.8) lib/action_dispatch/middleware/static.rb:84:in `call'\nrack (1.5.5) lib/rack/sendfile.rb:112:in `call'\nrailties (4.1.8) lib/rails/engine.rb:514:in `call'\nrailties (4.1.8) lib/rails/application.rb:144:in `call'\nrack (1.5.5) lib/rack/lock.rb:17:in `call'\nrack (1.5.5) lib/rack/content_length.rb:14:in `call'\nrack (1.5.5) lib/rack/handler/webrick.rb:60:in `service'\nC:/RailsInstaller/Ruby2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'\nC:/RailsInstaller/Ruby2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'\nC:/RailsInstaller/Ruby2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>Form partial:</p>\n\n<pre><code>&lt;%= simple_form_for @newPost do |f| %&gt;\n  &lt;%= f.label :content %&gt;\n  &lt;%= f.text_field :content, autofocus: true %&gt;\n  &lt;%= f.button :submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 4422, "user_id": 1202525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccc5db30edf02524aa2a0fb17d154bf8?s=128&d=identicon&r=PG", "display_name": "TomDunning", "link": "https://stackoverflow.com/users/1202525/tomdunning"}, "is_accepted": false, "score": 2, "last_activity_date": 1455143214, "creation_date": 1455143214, "answer_id": 35327219, "question_id": 35327169, "link": "https://stackoverflow.com/questions/35327169/the-result-of-each-in-view-ruby-on-rails/35327219#35327219", "title": "The result of .each in view, Ruby on Rails", "body": "<p><code>&lt;%= @articles.each do |article| %&gt;</code> should be <code>&lt;% @articles.each do |article| %&gt;</code> don't print the iterator</p>\n"}, {"tags": [], "owner": {"reputation": 663, "user_id": 116926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eae0b6c37b4ee8cc974798f79c2aff5?s=128&d=identicon&r=PG", "display_name": "andynu", "link": "https://stackoverflow.com/users/116926/andynu"}, "is_accepted": false, "score": 4, "last_activity_date": 1455143221, "creation_date": 1455143221, "answer_id": 35327224, "question_id": 35327169, "link": "https://stackoverflow.com/questions/35327169/the-result-of-each-in-view-ruby-on-rails/35327224#35327224", "title": "The result of .each in view, Ruby on Rails", "body": "<p>Loops return their array. The &lt;%= is outputting the return of the loop. Remove the =.</p>\n\n<p>Renders array:</p>\n\n<pre><code> &lt;%= @articles.each do |article| %&gt;\n</code></pre>\n\n<p>Does not render array:</p>\n\n<pre><code> &lt;% @articles.each do |article| %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1329, "user_id": 5666004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C7JR1.jpg?s=128&g=1", "display_name": "Jefferson", "link": "https://stackoverflow.com/users/5666004/jefferson"}, "is_accepted": false, "score": 2, "last_activity_date": 1455143233, "creation_date": 1455143233, "answer_id": 35327231, "question_id": 35327169, "link": "https://stackoverflow.com/questions/35327169/the-result-of-each-in-view-ruby-on-rails/35327231#35327231", "title": "The result of .each in view, Ruby on Rails", "body": "<p>remove the the '=' sign in <code>&lt;%= @articles.each do |article| %&gt;</code> --> <code>&lt;% @articles.each do |article| %&gt;</code></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5910768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74c78b488db6ea552419592fe3a4d75d?s=128&d=identicon&r=PG&f=1", "display_name": "jroers", "link": "https://stackoverflow.com/users/5910768/jroers"}, "is_accepted": false, "score": 1, "last_activity_date": 1455143332, "creation_date": 1455143332, "answer_id": 35327258, "question_id": 35327169, "link": "https://stackoverflow.com/questions/35327169/the-result-of-each-in-view-ruby-on-rails/35327258#35327258", "title": "The result of .each in view, Ruby on Rails", "body": "<p>Pretty sure I've run into this same problem a number of times.</p>\n\n<p>This line right here <code>&lt;%= @articles.each do |article| %&gt;</code> shouldn't have the equal sign. </p>\n"}, {"tags": [], "owner": {"reputation": 673, "user_id": 3704250, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/1ZYH3.png?s=128&g=1", "display_name": "mikeymurph77", "link": "https://stackoverflow.com/users/3704250/mikeymurph77"}, "is_accepted": false, "score": 0, "last_activity_date": 1455143396, "creation_date": 1455143396, "answer_id": 35327277, "question_id": 35327169, "link": "https://stackoverflow.com/questions/35327169/the-result-of-each-in-view-ruby-on-rails/35327277#35327277", "title": "The result of .each in view, Ruby on Rails", "body": "<p>You are displaying the <code>each</code> loop in the erb view. Each loops should not have the <code>=</code> sign, or you will display the entire collection.</p>\n\n<p>So turn this:</p>\n\n<p><code>&lt;%= @articles.each do |article| %&gt;</code></p>\n\n<p>Into this:</p>\n\n<p><code>&lt;% @articles.each do |article| %&gt;</code></p>\n"}], "owner": {"reputation": 21, "user_id": 5372719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1efbace790931b7a8f332538341c0141?s=128&d=identicon&r=PG&f=1", "display_name": "Vitaliy", "link": "https://stackoverflow.com/users/5372719/vitaliy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1455143396, "creation_date": 1455143054, "question_id": 35327169, "link": "https://stackoverflow.com/questions/35327169/the-result-of-each-in-view-ruby-on-rails", "title": "The result of .each in view, Ruby on Rails", "body": "<p>I have some problem with my .each loop. The result of .each is displayed like json in my view:</p>\n\n<p><a href=\"https://i.stack.imgur.com/QzoF8.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QzoF8.jpg\" alt=\"some description\"></a>\nHere is a code from my controller:</p>\n\n<pre><code>def index\n  @articles = Article.all\nend\n</code></pre>\n\n<p>And here is my view: </p>\n\n<pre><code>&lt;h1&gt;\u0412\u0441\u0456 \u0441\u0442\u0430\u0442\u0442\u0456&lt;/h1&gt;\n&lt;%= link_to \"\u041d\u043e\u0432\u0430 \u0441\u0442\u0430\u0442\u0442\u044f\", new_article_path %&gt;\n&lt;table&gt;\n    &lt;tr&gt;\n        &lt;th&gt;\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a&lt;/th&gt;\n        &lt;th&gt;\u0412\u043c\u0456\u0441\u0442&lt;/th&gt;\n        &lt;th colspan=\"2\"&gt;&lt;/th&gt;\n    &lt;/tr&gt;\n\n    &lt;%= @articles.each do |article| %&gt;\n        &lt;tr&gt;\n            &lt;td&gt;&lt;%= article.title %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= article.text %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= link_to \"\u041f\u0435\u0440\u0435\u0433\u043b\u044f\u043d\u0443\u0442\u0438\", article_path(article) %&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;%= link_to \"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438\", edit_article_path(article) %&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;% end %&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>What is the problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 663, "user_id": 116926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eae0b6c37b4ee8cc974798f79c2aff5?s=128&d=identicon&r=PG", "display_name": "andynu", "link": "https://stackoverflow.com/users/116926/andynu"}, "edited": false, "score": 1, "creation_date": 1455149356, "post_id": 35326578, "comment_id": 58365376, "body": "What you&#39;re looking for are dynamic or cascading drop downs. Please consider: <a href=\"http://stackoverflow.com/questions/14904780/dynamic-select-menu-cascading-drop-down-in-rails\" title=\"dynamic select menu cascading drop down in rails\">stackoverflow.com/questions/14904780/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 4157933, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ij5-J54phGM/AAAAAAAAAAI/AAAAAAAAFvQ/9Zc6d7y4Pt8/photo.jpg?sz=128", "display_name": "ross_lafferty", "link": "https://stackoverflow.com/users/4157933/ross-lafferty"}, "is_accepted": false, "score": 0, "last_activity_date": 1455164225, "creation_date": 1455164225, "answer_id": 35330700, "question_id": 35326578, "link": "https://stackoverflow.com/questions/35326578/how-do-i-select-a-car-make-and-then-select-model-according-to-make/35330700#35330700", "title": "How do I select a car make and then select model according to make?", "body": "<p>If you want it to truly be dynamic, you would need to use an AJAX request to update the second select after the first is picked.  You'd also need to use the <code>options_for_select</code> method inside of the <code>select</code> tag</p>\n\n<p>Some more <a href=\"https://kernelgarden.wordpress.com/2014/02/26/dynamic-select-boxes-in-rails-4/\" rel=\"nofollow\">info</a> to accompany what was already provided.</p>\n"}, {"comments": [{"owner": {"reputation": 129, "user_id": 5563321, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16e6942425df49c118ed9ca17248434f?s=128&d=identicon&r=PG&f=1", "display_name": "M Ahmed", "link": "https://stackoverflow.com/users/5563321/m-ahmed"}, "edited": false, "score": 0, "creation_date": 1455219951, "post_id": 35343130, "comment_id": 58404477, "body": "I attempted your solution and got a error message saying &quot;We&#39;re sorry, but something went wrong. If you are the application owner check the logs for more information.&quot; when I go to the new car page, I don&#39;t understand this error can you please help Many thanks"}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "reply_to_user": {"reputation": 129, "user_id": 5563321, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16e6942425df49c118ed9ca17248434f?s=128&d=identicon&r=PG&f=1", "display_name": "M Ahmed", "link": "https://stackoverflow.com/users/5563321/m-ahmed"}, "edited": false, "score": 0, "creation_date": 1455267666, "post_id": 35343130, "comment_id": 58423003, "body": "Can you give me context for the error? Are you running this in production (Heroku)?  The code should work"}, {"owner": {"reputation": 129, "user_id": 5563321, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16e6942425df49c118ed9ca17248434f?s=128&d=identicon&r=PG&f=1", "display_name": "M Ahmed", "link": "https://stackoverflow.com/users/5563321/m-ahmed"}, "edited": false, "score": 0, "creation_date": 1455377066, "post_id": 35343130, "comment_id": 58468127, "body": "I&#39;m using a bootstrap and when I click on add new car as soon as it redirects me I get that error"}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "reply_to_user": {"reputation": 129, "user_id": 5563321, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16e6942425df49c118ed9ca17248434f?s=128&d=identicon&r=PG&f=1", "display_name": "M Ahmed", "link": "https://stackoverflow.com/users/5563321/m-ahmed"}, "edited": false, "score": 0, "creation_date": 1455391236, "post_id": 35343130, "comment_id": 58472988, "body": "What&#39;s the Heroku URL? Can you post the log of the request where the error appears?"}, {"owner": {"reputation": 129, "user_id": 5563321, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16e6942425df49c118ed9ca17248434f?s=128&d=identicon&r=PG&f=1", "display_name": "M Ahmed", "link": "https://stackoverflow.com/users/5563321/m-ahmed"}, "edited": false, "score": 1, "creation_date": 1455404333, "post_id": 35343130, "comment_id": 58477083, "body": "I read the log and found out it was a syntax error, I missed a bracket whilst copying the code, how ever I am now getting a error in the views, saying undefined local variable or method `make_models_path&#39; for #&lt;#&lt;Class:0x90b2578&gt;:0x903b5f8&gt;"}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "reply_to_user": {"reputation": 129, "user_id": 5563321, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16e6942425df49c118ed9ca17248434f?s=128&d=identicon&r=PG&f=1", "display_name": "M Ahmed", "link": "https://stackoverflow.com/users/5563321/m-ahmed"}, "edited": false, "score": 0, "creation_date": 1455442269, "post_id": 35343130, "comment_id": 58484456, "body": "That&#39;s a routing error, if you run <code>heroku run rake routes</code> in your console, you&#39;ll be able to see what the path should be cool"}, {"owner": {"reputation": 129, "user_id": 5563321, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16e6942425df49c118ed9ca17248434f?s=128&d=identicon&r=PG&f=1", "display_name": "M Ahmed", "link": "https://stackoverflow.com/users/5563321/m-ahmed"}, "edited": false, "score": 0, "creation_date": 1455460748, "post_id": 35343130, "comment_id": 58489712, "body": "what is the heroku? I&#39;ve not heard of it before"}], "tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": false, "score": 0, "last_activity_date": 1455203881, "creation_date": 1455203881, "answer_id": 35343130, "question_id": 35326578, "link": "https://stackoverflow.com/questions/35326578/how-do-i-select-a-car-make-and-then-select-model-according-to-make/35343130#35343130", "title": "How do I select a car make and then select model according to make?", "body": "<p>It's known as <a href=\"https://kernelgarden.wordpress.com/2014/02/26/dynamic-select-boxes-in-rails-4/\" rel=\"nofollow\"><code>dynamic select boxes</code></a>:</p>\n\n<pre><code>#config/routes.rb\nresources :makes do\n  get :models, on: :collection #-&gt; url.com/makes/models\nend\n\n#app/controllers/makes_controller.rb\nclass MakesController &lt; ApplicationController\n  def models\n    @make = Make.find(params[:make][:make_id])\n    respond_to do |format|\n      format.js\n    end\n  end\nend\n\n#app/views/makes/models.js.erb\n$select = $(\"select#models\");\n$select.empty();\n&lt;% @make.models.each do |model| %&gt;\n  $select.append($('&lt;option&gt;').text(&lt;%=j model.name %&gt;).attr('value', &lt;%= model.id %&gt;));\n&lt;% end %&gt;\n\n#views\n&lt;%= f.collection_select :make_id, Make.all, :id, :makes_info, {include_blank: 'Please Select'}, { data: { remote: true, url: make_models_path }} %&gt;\n&lt;%= f.collection_select :model_id, Model.all, :id,:model_info, {include_blank: 'Please Select'}, { id: \"models\" } %&gt;\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 5563321, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16e6942425df49c118ed9ca17248434f?s=128&d=identicon&r=PG&f=1", "display_name": "M Ahmed", "link": "https://stackoverflow.com/users/5563321/m-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 260, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1556876378, "creation_date": 1455140802, "last_edit_date": 1556876378, "question_id": 35326578, "link": "https://stackoverflow.com/questions/35326578/how-do-i-select-a-car-make-and-then-select-model-according-to-make", "title": "How do I select a car make and then select model according to make?", "body": "<p>In my rails project I have two models, Car Make &amp; Car Model, with a 1:M relationship (i.e. one Audi has many Audi models).</p>\n\n<p>In my Views page, I want a form with two input fields for car make &amp; car model. Ideally, I will be able to input a car make (i.e. Audi) and the second input field will have a drop down menu with all the models available for the make (2016 Audi A6, 2017 Audi A7).</p>\n\n<p>I've set up all the relations and in the models I have saved a foreign key of the make. </p>\n\n<p>currently in _form.html.erb I have </p>\n\n<pre><code> &lt;div class=\"field\"&gt;\n   &lt;%= f.label :make_id, \"Make:\"%&gt;&lt;br&gt;\n   &lt;%#= f.number_field :make_id %&gt;\n   &lt;%= f.collection_select :make_id, Make.all, \n    :id,:makes_info, {:include_blank =&gt; 'Please Select'} %&gt;\n &lt;/div&gt;\n\n&lt;div class=\"field\"&gt;\n  &lt;%= f.label :model_id, \"Model:\" %&gt;&lt;br&gt;\n  &lt;%= f.collection_select :model_id, Model.all, \n    :id,:model_info, {:include_blank =&gt; 'Please Select'} %&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 2111, "user_id": 2251303, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6bbbc78a70fcb3621e68d4b2630d8900?s=128&d=identicon&r=PG", "display_name": "new2cpp", "link": "https://stackoverflow.com/users/2251303/new2cpp"}, "edited": false, "score": 0, "creation_date": 1518700505, "post_id": 35326704, "comment_id": 84619192, "body": "It is quite strange to me. If creating an instance variable(starting with <code>@</code>) from model and access it from view layer. To be honest, it is a horrible design and hard to manage with. You have to be a great reason to create an instance variable from model. Could you show some example? Why not from controller?"}], "tags": [], "owner": {"reputation": 31, "user_id": 5874125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wGFDj.jpg?s=128&g=1", "display_name": "Kayvon Ranjbar", "link": "https://stackoverflow.com/users/5874125/kayvon-ranjbar"}, "is_accepted": false, "score": 3, "last_activity_date": 1455141201, "creation_date": 1455141201, "answer_id": 35326704, "question_id": 35326566, "link": "https://stackoverflow.com/questions/35326566/explanation-of-the-variables-inside-rails-models/35326704#35326704", "title": "Explanation of the @ variables inside Rails models", "body": "<p>\"@\" in front of the name signifies that it is an instance variable of the model class, which is different than a simple ruby variable name. Instance (@) variables can be used in the front-end (views).</p>\n\n<p>For example, you can instantiate a variable @book which is a specific instance of the Book class (which is the model). So when you use @book, you are referring to that specific book you created, rather than the overall class.</p>\n\n<p>There is also a difference in the methods you can call on instance versus class variables.</p>\n\n<hr>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 2, "last_activity_date": 1455141275, "creation_date": 1455141275, "answer_id": 35326721, "question_id": 35326566, "link": "https://stackoverflow.com/questions/35326566/explanation-of-the-variables-inside-rails-models/35326721#35326721", "title": "Explanation of the @ variables inside Rails models", "body": "<p>Variables beginning with @ are <em>instance variables</em>, in short they allow other methods of the same class to use them. For example,</p>\n\n<pre><code>class Something\n  def a_method(name)\n    @i_variable = name\n    normal_variable = \"hey\"\n  end\n\n  def another_method\n    @i_variable.reverse #can be seen here and used\n    normal_variable  #cannot be seen here and cannot be used, throws an error\n  end\nend\n</code></pre>\n\n<p>In Rails, I believe instance variables are important because they are visible across the Model, View, Controller parts of the application.</p>\n"}, {"tags": [], "owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "is_accepted": false, "score": 1, "last_activity_date": 1455141400, "creation_date": 1455141400, "answer_id": 35326758, "question_id": 35326566, "link": "https://stackoverflow.com/questions/35326566/explanation-of-the-variables-inside-rails-models/35326758#35326758", "title": "Explanation of the @ variables inside Rails models", "body": "<p>If you do this:</p>\n\n<pre><code>def foo\n  thing = \"value\"\nend\n\nfoo\nputs thing\n</code></pre>\n\n<p>You will get</p>\n\n<pre><code>NameError: undefined local variable or method `thing' for main:Object\n</code></pre>\n\n<p>If you do this:</p>\n\n<pre><code>def foo\n  @thing = \"value\"\nend\n\nfoo\nputs @thing\n</code></pre>\n\n<p>You will get \"value\"</p>\n\n<p>You see, @variables are visible to the whole class you are operating on, in this case the model.</p>\n\n<p>The @variables are also used a lot in controllers, like this:</p>\n\n<pre><code>def hello\n  @current_user_name = User.find(params[:user_id]).name\nend\n# and in the view:\nHello, &lt;%= @current_user_name %&gt;\n</code></pre>\n\n<p>Because if you didn't use @, you would have made a local variable and that is not accessible by the view.</p>\n"}, {"tags": [], "owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "is_accepted": false, "score": 2, "last_activity_date": 1455141517, "creation_date": 1455141517, "answer_id": 35326780, "question_id": 35326566, "link": "https://stackoverflow.com/questions/35326566/explanation-of-the-variables-inside-rails-models/35326780#35326780", "title": "Explanation of the @ variables inside Rails models", "body": "<p>Variables that start with <code>@</code> are instance variables.  This means that belong to an instance of a class.  So if I had the following class: </p>\n\n<pre><code>class Dog \n    def initialize(name, breed)\n        @name = name\n        @breed = breed\n    end \nend \n</code></pre>\n\n<p>Everytime I create a <code>Dog</code>, I need to give it a name and a breed. </p>\n\n<pre><code>fido = Dog.new(\"Fido\", \"Dalmation\")\n</code></pre>\n\n<p>Because I created instance variables from the <code>name</code> and <code>breed</code> I can get this information from <code>fido</code>. </p>\n\n<pre><code>fido.name =&gt; \"Fido\"\n\nfido.breed =&gt; \"Dalmation\" \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23981, "user_id": 2813589, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/9axBj.jpg?s=128&g=1", "display_name": "\u30a2\u30ec\u30c3\u30af\u30b9", "link": "https://stackoverflow.com/users/2813589/%e3%82%a2%e3%83%ac%e3%83%83%e3%82%af%e3%82%b9"}, "is_accepted": false, "score": 0, "last_activity_date": 1455141684, "creation_date": 1455141684, "answer_id": 35326817, "question_id": 35326566, "link": "https://stackoverflow.com/questions/35326566/explanation-of-the-variables-inside-rails-models/35326817#35326817", "title": "Explanation of the @ variables inside Rails models", "body": "<p>A var with @ is an instance private variable. A var without @ is a local method variable.</p>\n\n<p>A variable with @ can be accessed on an object's level if the object has a method returning a value of or setting a value to it being attr_accessor, attr_reader or def.</p>\n"}, {"tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": true, "score": 5, "last_activity_date": 1455194593, "last_edit_date": 1592644375, "creation_date": 1455194593, "answer_id": 35339685, "question_id": 35326566, "link": "https://stackoverflow.com/questions/35326566/explanation-of-the-variables-inside-rails-models/35339685#35339685", "title": "Explanation of the @ variables inside Rails models", "body": "<p>To add to the current answers, <a href=\"https://en.wikipedia.org/wiki/Instance_variable\" rel=\"nofollow noreferrer\"><code>@instance_variables</code></a> are from <a href=\"https://en.wikipedia.org/wiki/Object-oriented_programming\" rel=\"nofollow noreferrer\"><strong>object orientated programming</strong></a>...</p>\n<blockquote>\n<p>In <code>object-oriented programming</code> with classes, an <code>instance variable</code> is a variable defined in a class (i.e. a member variable), for which <strong>each instantiated object</strong> of the class has a separate copy, or <em>instance</em>.</p>\n</blockquote>\n<hr />\n<h1>OOP</h1>\n<p>&quot;Normal&quot; programming has variables as pieces of data -- <code>strings</code>, <code>integers</code> etc. These are independent &amp; can only interact as part of other functions, depending on their scope.</p>\n<p>Object Orientated programming (OOP) can treat variables as pieces of <strong>editable</strong> data (known as <code>classes</code>). These <em>classes</em> can be <em>invoked</em>, <em>edited</em> and most importantly <em>interacted</em>...</p>\n<pre><code>#app/models/product.rb\nclass Product &lt; ActiveRecord::Base\n  #-&gt; class\nend\n\ndef new\n   @product = Product.new #-&gt; creating a new instance of the class\nend\n</code></pre>\n<p>Ruby/Rails is object orientated; it works by giving you a series of <em>objects</em> to load &amp; interact with. The most notable example is with <a href=\"http://superprofundo.com/2010/12/09/object-oriented-programming-in-a-nutshell/\" rel=\"nofollow noreferrer\">game programming</a>:</p>\n<p><a href=\"https://i.stack.imgur.com/Z9awJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Z9awJ.png\" alt=\"enter image description here\" /></a></p>\n<p>The way object orientation works is to invoke/initialize an <em>instance</em> of a class (in our case <code>Product</code>), allowing you to manipulate it.</p>\n<p>Class <em>instances</em> hold the object in memory, allowing you to perform actions on the class itself. To do this, you'd store the <em>instance</em> of the class in a variable, allowing you to interact with the variable itself:</p>\n<pre><code>@product = Product.new\n@product.save\n</code></pre>\n<p>--</p>\n<p><em>Instance</em> variables are only valid within the <strong>context of the <code>class</code></strong>:</p>\n<pre><code># app/controllers/products_controller.rb\nclass ProductsController &lt; ApplicationController\n  def show\n    @product = Product.new #-&gt; @product only available within ProductsController\n  end\nend\n</code></pre>\n<p>The controllers in Rails are <code>classes</code>, invoked through a rack request:</p>\n<pre><code>Request &gt; Rack &gt; Routes &gt; ProductsController.new(request).show &gt; Response\n</code></pre>\n<p>If you want your <code>@instance_variable</code> available in all methods of the class, it has to be at <code>instance</code> level...</p>\n<pre><code># app/controllers/products_controller.rb\nclass ProductsController &lt; ApplicationController\n  def show\n    @product = Product.new\n    product_save\n  end\n\n  private\n\n  def product_save\n    @product.save #-&gt; @product available in instance of ProductsController class\n  end\nend\n</code></pre>\n<hr />\n<p>The most common use for <code>@instance_variables</code> are to store / manipulate instance-centric data. A good example (for our <code>Product</code> example) could be the <code>stock</code> level:</p>\n<pre><code>#app/models/product.rb\nclass Product &lt; ActiveRecord::Base\n  def stock\n     @qty / @orders\n  end\nend\n</code></pre>\n<p>Because you can use <a href=\"https://stackoverflow.com/questions/8737421/trying-to-learn-understand-ruby-setter-and-getter-methods\"><code>getter/setter</code> methods</a> within Ruby, you can define the instance values of a class, accessing them through other instance data:</p>\n<pre><code>@product = Product.find x\n@product.stock #-&gt; outputs stock value for that product\n</code></pre>\n"}], "owner": {"reputation": 4896, "user_id": 3068360, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1As83.jpg?s=128&g=1", "display_name": "Weston Ganger", "link": "https://stackoverflow.com/users/3068360/weston-ganger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5370, "favorite_count": 2, "accepted_answer_id": 35339685, "answer_count": 6, "score": 4, "last_activity_date": 1455194593, "creation_date": 1455140760, "last_edit_date": 1455142141, "question_id": 35326566, "link": "https://stackoverflow.com/questions/35326566/explanation-of-the-variables-inside-rails-models", "title": "Explanation of the @ variables inside Rails models", "body": "<p>I've worked through a few Rails applications which are using @ attribute variables (which are already attr_accessible) in the models. I was having a tough time getting information on this but from what I gather <code>name</code> and <code>@name</code> are the same thing in a model but im probably incorrect on this. </p>\n\n<p>How do these @ variables work and why would one ever use the @ symbol variables?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "acts-as-taggable-on"], "comments": [{"owner": {"reputation": 90, "user_id": 4068262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/818d5112b6b17dec0d55cbe6577177cf?s=128&d=identicon&r=PG", "display_name": "shannondoah", "link": "https://stackoverflow.com/users/4068262/shannondoah"}, "edited": false, "score": 0, "creation_date": 1455151462, "post_id": 35326543, "comment_id": 58366047, "body": "Context is defined in taggings, not taggable (which is a module). But a tag is just a name, and has no context until something taggable is tagged, which creates a tagging. Given that, I&#39;m not sure if you will be able to accomplish what you&#39;re looking to do."}, {"owner": {"reputation": 67, "user_id": 4407083, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/974ed617c8f9b69903d2c5152ab17f01?s=128&d=identicon&r=PG", "display_name": "chicjean", "link": "https://stackoverflow.com/users/4407083/chicjean"}, "reply_to_user": {"reputation": 90, "user_id": 4068262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/818d5112b6b17dec0d55cbe6577177cf?s=128&d=identicon&r=PG", "display_name": "shannondoah", "link": "https://stackoverflow.com/users/4068262/shannondoah"}, "edited": false, "score": 0, "creation_date": 1456870791, "post_id": 35326543, "comment_id": 59143846, "body": "@shannondoah thanks!"}], "owner": {"reputation": 67, "user_id": 4407083, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/974ed617c8f9b69903d2c5152ab17f01?s=128&d=identicon&r=PG", "display_name": "chicjean", "link": "https://stackoverflow.com/users/4407083/chicjean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 371, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1455140690, "creation_date": 1455140690, "question_id": 35326543, "link": "https://stackoverflow.com/questions/35326543/add-context-to-existing-tags-with-actsastaggableon", "title": "Add context to existing tags with ActsAsTaggableOn", "body": "<p>I've hunted SO and looked through the gem documentation and can't seem to find out how to add a context to a pre-existing tag.</p>\n\n<p>My goal is to seed the DB with some tags for a specific context. From what I can tell, a tag needs to be created before it can be assigned a context.</p>\n\n<pre><code>tag = ActsAsTaggableOn::Tag.create(name: \"name\")\nActsAsAggableOn::Taggable.create(tag: tag.id, context: \"context\")\n</code></pre>\n\n<p>^That doesn't seem to work, since it throws and <code>undefined method create for ActsAsTaggableOn::Taggable</code>. I also cannot add context to the <code>Tag.create</code> method, since that throws an <code>unknown attribute: context</code> error.</p>\n\n<p>I should mention that the context I'd like to add to the tags is set up in the appropriate model with: <code>acts_as_taggable_on :types</code>.</p>\n\n<p>Any insight as to how to create a tag with a specific context? Or add it after a tag has been created?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "model-view-controller"], "comments": [{"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1455141729, "post_id": 35326499, "comment_id": 58362355, "body": "Your example is a bit lengthy and complicated. See <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "reply_to_user": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1455149072, "post_id": 35326499, "comment_id": 58365286, "body": "Sorry, I&#180;ll keep that in mind for my future posts, thanks for the tip @kimmmo"}], "answers": [{"comments": [{"owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "edited": false, "score": 0, "creation_date": 1455148427, "post_id": 35326864, "comment_id": 58365092, "body": "Thank you so much @andynu, this is really helpful, I tried basically the same thing earlier tonight, but it didn&#180;t work, I guess it is because I placed the  &lt;%= paper.paper_weight_per_capita(current_user) %&gt; code outside the &lt;% end %&gt; tag, thats just me being a Newbie :) :)"}, {"owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "edited": false, "score": 0, "creation_date": 1455148479, "post_id": 35326864, "comment_id": 58365107, "body": "I&#180;m not so sure if I understand the before_action bit completely:                 By # exactly replicating your current calculation, do you mean that I should copy/paste the  Methods from the Paper model? or should I Copy/Paste the running total calculation I already have in the view to the &quot;def running_totals&quot;?"}, {"owner": {"reputation": 663, "user_id": 116926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eae0b6c37b4ee8cc974798f79c2aff5?s=128&d=identicon&r=PG", "display_name": "andynu", "link": "https://stackoverflow.com/users/116926/andynu"}, "reply_to_user": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "edited": false, "score": 0, "creation_date": 1455149615, "post_id": 35326864, "comment_id": 58365455, "body": "I was offering two ways to do the same thing. The first way <code>@paper_weight_per_capita = Papers.all.map(&amp;:paper_weight_per_capita, current_user).reduce(&amp;:+)</code> is similar to how you were doing the calculation in the view. It loads ALL the records then goes through them one by one doing the paper_weigh_per_capita calculation for each and then adds the result together. The second method adds all the weights up in the database and then divides by the staff. This doesn&#39;t load all the individual paper records. It should be faster. I recommend the second calculation."}], "tags": [], "owner": {"reputation": 663, "user_id": 116926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eae0b6c37b4ee8cc974798f79c2aff5?s=128&d=identicon&r=PG", "display_name": "andynu", "link": "https://stackoverflow.com/users/116926/andynu"}, "is_accepted": true, "score": 2, "last_activity_date": 1455149688, "last_edit_date": 1455149688, "creation_date": 1455141873, "answer_id": 35326864, "question_id": 35326499, "link": "https://stackoverflow.com/questions/35326499/how-can-i-move-calculations-in-view-to-model/35326864#35326864", "title": "How can I move calculations in View to Model?", "body": "<p>You can move the calculations into the model by defining functions in the model. </p>\n\n<p>The first calculation uses current_user, which will not be in the model by default, so that'll have to be a parameter. The other two are just using paper's attributes; pardon my poor naming, I'm not clear what the second two metrics are.</p>\n\n<pre><code>class Paper\n  has_many :users\n\n  def paper_weight_per_capita(current_user)\n    paper_weight.to_i / current_user.staff\n  end\n\n  def paper_weight_metric1\n    ( env_paper_weight / paper_weight)* 100)\n  end\n\n  def paper_weight_metric2\n    (( paper_weight.to_f/1000)*15)\n  end\nend\n</code></pre>\n\n<p>And in your view</p>\n\n<pre><code>&lt;%= paper.paper_weight_per_capita(current_user) %&gt;\n&lt;%= paper.paper_weight_metric1 %&gt;\n</code></pre>\n\n<p>If you want the running total in your layout then you'll need to load the paper objects on every page. You can do this with an application_controller before_action, though <a href=\"http://jgaskins.org/blog/2014/08/25/better-alternative-to-rails-before_action-to-load-objects\" rel=\"nofollow\">some folks don't like this approach</a> and <a href=\"http://craftingruby.com/posts/2015/05/31/dont-use-before-action-to-load-data.html\" rel=\"nofollow\">here</a>, but I think it is a reasonable way for you now.</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  before_action :load_running_totals\n\n  def load_running_totals\n    # method 1. Similar to how the calculation is done in the view.\n    # @paper_weight_per_capita = Papers.all.map(&amp;:paper_weight_per_capita, current_user).reduce(&amp;:+)\n\n    # method 2. does the summation in the database without having to load all the records into ruby. (weight needs to be a number in the db.)\n    @paper_weight_per_capita = Papers.sum(:weight) / current_user.staff\n  end\nend\n</code></pre>\n\n<p>Now in any view (including your layout):</p>\n\n<pre><code>&lt;%= @paper_weight_per_capita %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 35326864, "answer_count": 1, "score": 0, "last_activity_date": 1455149688, "creation_date": 1455140442, "question_id": 35326499, "link": "https://stackoverflow.com/questions/35326499/how-can-i-move-calculations-in-view-to-model", "title": "How can I move calculations in View to Model?", "body": "<p>I\u00b4m very new to ROR and I have stumbled up on a problem. I believe it\u00b4s a newbie problem, but I\u00b4m  not sure if it\u00b4s. I\u00b4m building this app were users should be able to enter the amount of paper use in their business and from there the app calculates their eco footprint so to say.</p>\n\n<p>at login the user enters their staff number. The staff number is used to divide with paper_weight etc. ( see in view example).</p>\n\n<p>I know it basically works the way it is now, but I\u00b4m aware of this is not the best practice.</p>\n\n<p>I also wanted to move the div containing the running totals to application.html.erb but I can\u00b4t do that since my calculations are in the View but not in the Model.</p>\n\n<p>here is a link to the github repo <a href=\"https://github.com/DadiHall/SprettaEMS1.5\" rel=\"nofollow\">https://github.com/DadiHall/SprettaEMS1.5</a></p>\n\n<p>Are there any other ways to do this? Can someone please advise me?</p>\n\n<p>my index.html.erb view</p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n&lt;div class=\"col-md-10  \"&gt;\n\n    &lt;h1&gt;Papp\u00edrsnotkun&lt;/h1&gt;\n    &lt;table class=\" well table table-hover\"&gt;\n\n        &lt;thead&gt;\n            &lt;tr&gt;\n                &lt;th&gt;Dags&lt;/th&gt;\n                &lt;th&gt;Tegund&lt;/th&gt;\n                &lt;th&gt;\u00deyngd&lt;/th&gt;\n                &lt;th&gt;Kostna\u00f0ur&lt;/th&gt;\n                &lt;th&gt;\u00dear af umhvm. papp\u00edr&lt;/th&gt;\n                &lt;th&gt;Papp\u00edrs magn m.v. St\u00f6\u00f0ugildi&lt;/th&gt;\n                &lt;th&gt;Hl.f. Umhvm. Papp\u00edrs&lt;/th&gt;\n                &lt;th&gt;Fj\u00f6ldi trj\u00e1a m.v. magn papp\u00edrs&lt;/th&gt;\n            &lt;/tr&gt;\n        &lt;/thead&gt;\n\n            &lt;tbody&gt;     \n                    &lt;% paper_total_cost = 0 %&gt;\n                    &lt;% paper_total_trees = 0 %&gt;\n                    &lt;% paper_total_staff_ratio = 0 %&gt;   \n                &lt;% @papers.each do |paper| %&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;&lt;%= paper.date.strftime(\"%Y/%m/%d\") %&gt;&lt;/td&gt;\n                        &lt;td&gt;&lt;%= paper.paper_type %&gt;&lt;/td&gt;\n                        &lt;td&gt;&lt;%= paper.paper_weight %&gt; -kg.&lt;/td&gt;\n                        &lt;td&gt;&lt;%= paper.paper_cost %&gt; -kr.&lt;/td&gt;\n                        &lt;td&gt;&lt;%= paper.env_paper_weight %&gt; -kg.&lt;/td&gt;\n                        &lt;td&gt;&lt;%= (paper.paper_weight.to_i / current_user.staff) %&gt; kg/st\u00f6\u00f0ugildi &lt;/td&gt;\n                        &lt;td&gt;&lt;%= (( paper.env_paper_weight / paper.paper_weight)* 100) %&gt;%&lt;/td&gt;  \n                        &lt;td&gt;&lt;%= (( paper.paper_weight.to_f/1000)*15) %&gt;&lt;/td&gt;\n\n                        &lt;td&gt;&lt;%= link_to 'S\u00fdna', paper, class: 'btn btn-xs btn-info' %&gt;&lt;/td&gt;\n                        &lt;td&gt;&lt;%= link_to 'Uppf\u00e6ra', edit_paper_path(paper), class: 'btn btn-xs btn-warning' %&gt;&lt;/td&gt;\n                        &lt;td&gt;&lt;%= link_to 'Ey\u00f0a', paper, method: :delete, class: 'btn btn-xs btn-danger', data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n                         &lt;% paper_total_cost = paper_total_cost + (paper.paper_cost.to_i) %&gt;\n                         &lt;% paper_total_trees = paper_total_trees + (( paper.paper_weight.to_f/1000)*15) %&gt;\n                         &lt;% paper_total_staff_ratio = paper_total_staff_ratio + (paper.paper_weight.to_i / current_user.staff) %&gt; \n                    &lt;/tr&gt;   \n                &lt;% end %&gt;\n            &lt;/tbody&gt;\n\n    &lt;/table&gt;\n&lt;/div&gt;          \n\n                &lt;div class=\"row\"&gt;\n                    &lt;div class=\" col-md-2 panel panel-default pull-right\" &gt;\n                        &lt;div class=\"panel panel-heading \"&gt;\n                            &lt;h5 class=\"user-name\"&gt;User: &lt;% if current_user &amp;&amp; current_user %&gt; \n                            &lt;%= current_user.name %&gt;, \n                            Staff: &lt;%= current_user.staff %&gt;\n                             &lt;% end %&gt;  \n                          &lt;/h5&gt;   \n                        &lt;/div&gt;     \n                        &lt;div class=\"panel-body\"&gt;         \n                            &lt;h6 class=\"pull-right\"&gt;Papp\u00edr Kostna\u00f0ur Samtals:&lt;%= number_with_precision(paper_total_cost.to_f, precision: 2) %&gt; kr &lt;/h6&gt;&lt;br&gt;\n                            &lt;h6 class=\"pull-right\"&gt;Fj\u00f6ldi Trj\u00e1a vegna Papp\u00edrs notkunar:&lt;%= number_with_precision(paper_total_trees.to_f, precision: 2) %&gt; Tr\u00e9 &lt;/h6&gt;&lt;br&gt;\n                             &lt;h6 class=\"pull-right\"&gt;Magn Papp\u00edrs f. hvert st\u00f6\u00f0ugildi:&lt;%= number_with_precision(paper_total_staff_ratio.to_f, precision: 2) %&gt; Kg &lt;/h6&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;  \n                &lt;/div&gt;  \n\n                &lt;%= link_to 'New Paper', new_paper_path %&gt;\n</code></pre>\n\n\n\n<p> </p>\n\n<p>My papers_controller.rb</p>\n\n<pre><code>class PapersController &lt; ApplicationController\nbefore_action :set_paper, only: [:edit, :update, :show, :destroy]\n\n\ndef index\n    @papers = Paper.all\n\nend\n\ndef create\n    @paper = Paper.new(paper_params)\n\n    if @paper.save\n        flash[:success] = \"Messages sent.\"\n        redirect_to paper_path(@paper)\n    else\n        flash[:danger] = \"Error occured, message has not been sent.\"\n        redirect_to new_paper_path\n    end     \n\n\nend\n\ndef new\n    @paper = Paper.new\nend\n\ndef edit\nend\n\ndef show\nend\n\ndef update\n        if @paper.update(paper_params)\n        flash[:success] = \"Line was successfully updated\"\n        redirect_to papers_path(@paper)\n    else\n        render 'edit'\n    end     \n\nend\n\ndef destroy\n    @paper.destroy\n    flash[:danger] = \"Line was successfully destroyed\"\n    redirect_to papers_path\nend\n\n\nprivate\n\ndef set_paper\n    @paper = Paper.find(params[:id])\nend\ndef paper_params\n    params.require(:paper).permit(:paper_type, :date, :paper_weight, :paper_cost, :env_paper_weight)\nend\n\n\nend\n</code></pre>\n\n<p>my paper.rb Model</p>\n\n<pre><code>class Paper &lt; ActiveRecord::Base\nhas_many :users \n\nend\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "capybara", "capybara-webkit"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 5526642, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh4.googleusercontent.com/-fINcvckTifg/AAAAAAAAAAI/AAAAAAAAAlw/idb5RjZAeTs/photo.jpg?sz=128", "display_name": "Chints Vadgama", "link": "https://stackoverflow.com/users/5526642/chints-vadgama"}, "edited": false, "score": 0, "creation_date": 1455142955, "post_id": 35326269, "comment_id": 58362871, "body": "Thank you for this answer. I am a newbie for Capybara &amp; your answer solved many of my issues  <code>&lt;a class=&quot;btn ng-scope&quot; translate=&quot;&quot; href=&quot;&#47;lists&#47;NEW LIST&#47;46190285&quot;&gt;See All&lt;&#47;a&gt;</code>  Could you please tell me how can I click the button with href?  I tried this:      <code>find(&quot;a.btn&quot;, href: &quot;&#47;lists&#47;NEW LIST&#47;46190285&quot;).click</code>   Also, the href value will be different for each user so I want to use REGEX of href instead of using the whole href value"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 93, "user_id": 5526642, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh4.googleusercontent.com/-fINcvckTifg/AAAAAAAAAAI/AAAAAAAAAlw/idb5RjZAeTs/photo.jpg?sz=128", "display_name": "Chints Vadgama", "link": "https://stackoverflow.com/users/5526642/chints-vadgama"}, "edited": false, "score": 0, "creation_date": 1455143444, "post_id": 35326269, "comment_id": 58363125, "body": "As documented - <a href=\"http://www.rubydoc.info/gems/capybara/Capybara%2FNode%2FFinders%3Afind\" rel=\"nofollow noreferrer\">rubydoc.info/gems/capybara/Capybara%2FNode%2FFinders%3Afind</a> <code>#find</code> doesn&#39;t have an href option - you can do what you&#39;re trying to do with a css selector  <code>find(&quot;a.btn[href=&#39;&#47;lists&#47;NEW LIST&#47;46190285&#39;]&quot;)</code> which won&#39;t let you do regex but will let you do starts_with, ends_with, etc using the correct css selectors  ^=, $=, etc.  The other option is <code>find_link</code> which supports an href option <code>find_link(&#39;See All&#39;, href: &quot;&#47;lists&#47;NEW LIST&#47;46190285&quot;)</code> where you can use a regex or string. Note: clicking links based on href makes for brittle tests if you ever change your routes"}, {"owner": {"reputation": 93, "user_id": 5526642, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh4.googleusercontent.com/-fINcvckTifg/AAAAAAAAAAI/AAAAAAAAAlw/idb5RjZAeTs/photo.jpg?sz=128", "display_name": "Chints Vadgama", "link": "https://stackoverflow.com/users/5526642/chints-vadgama"}, "edited": false, "score": 0, "creation_date": 1455144032, "post_id": 35326269, "comment_id": 58363382, "body": "Thanks @Tom ...      <code>find(&quot;a.btn[href^=&#39;&#47;lists&#47;NEW LIST&#47;&#39;]&quot;).click</code> worked perfectly"}, {"owner": {"reputation": 93, "user_id": 5526642, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh4.googleusercontent.com/-fINcvckTifg/AAAAAAAAAAI/AAAAAAAAAlw/idb5RjZAeTs/photo.jpg?sz=128", "display_name": "Chints Vadgama", "link": "https://stackoverflow.com/users/5526642/chints-vadgama"}, "edited": false, "score": 0, "creation_date": 1455157665, "post_id": 35326269, "comment_id": 58367693, "body": "<code>&lt;a class=&quot;bottom-action-container quickview-button hover-option&quot; track=&quot;{ type: &#39;product-info&#39;, name: moduleType, breadcrumbs: result.breadcrumbs || breadcrumbs }&quot; ng-click=&quot;ProductUtils.cache(result)&quot; title=&quot;Christian Dior So Real&quot; Sunglasses-Colorless&quot; href=&quot;&#47;g&#47;women&#47;christian-dior&#47;so-real-sunglasses-colorless&quot;&gt;</code>  I want to get the href &amp; title to store them into text"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 93, "user_id": 5526642, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh4.googleusercontent.com/-fINcvckTifg/AAAAAAAAAAI/AAAAAAAAAlw/idb5RjZAeTs/photo.jpg?sz=128", "display_name": "Chints Vadgama", "link": "https://stackoverflow.com/users/5526642/chints-vadgama"}, "edited": false, "score": 0, "creation_date": 1455160589, "post_id": 35326269, "comment_id": 58368443, "body": "after you&#39;ve found the element - element[:href] and element[:title] will give you what you want -- ask further things as new questions since putting question in comments doesnt help the rest of the community"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 2, "last_activity_date": 1455139605, "creation_date": 1455139605, "answer_id": 35326269, "question_id": 35326229, "link": "https://stackoverflow.com/questions/35326229/how-can-i-click-element-which-matches-the-text/35326269#35326269", "title": "How can I click element which matches the text", "body": "<p>The following should do what you want</p>\n\n<pre><code>find('div.list-title-name', text: 'NEW LIST').click()\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 5526642, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh4.googleusercontent.com/-fINcvckTifg/AAAAAAAAAAI/AAAAAAAAAlw/idb5RjZAeTs/photo.jpg?sz=128", "display_name": "Chints Vadgama", "link": "https://stackoverflow.com/users/5526642/chints-vadgama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 724, "favorite_count": 0, "accepted_answer_id": 35326269, "answer_count": 1, "score": 1, "last_activity_date": 1455139605, "creation_date": 1455139469, "question_id": 35326229, "link": "https://stackoverflow.com/questions/35326229/how-can-i-click-element-which-matches-the-text", "title": "How can I click element which matches the text", "body": "<pre><code>&lt;div class=\"list-title-name ng-binding\"&gt; NEW LIST &lt;/div&gt;\n&lt;div class=\"list-title-name ng-binding\"&gt; Things I Like &lt;/div&gt;\n</code></pre>\n\n<p>I want to click the element which matches the text NEW LIST</p>\n\n<pre><code>find(\"div.list-title-name\" == NEW LIST).click #wrong method but want something like this\n</code></pre>\n\n<p>Can anyone specify a valid capybara method to do this?</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "model-view-controller"], "answers": [{"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1455141961, "post_id": 35326346, "comment_id": 58362464, "body": "There is one partial form: challenges/_category_fields.html.erb. Are you suggesting I make another partial form or should I wrap &quot;One-Shot&quot; and &quot;Ongoing&quot; in the form with something? Thanks for your help sir."}, {"owner": {"reputation": 663, "user_id": 116926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eae0b6c37b4ee8cc974798f79c2aff5?s=128&d=identicon&r=PG", "display_name": "andynu", "link": "https://stackoverflow.com/users/116926/andynu"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 1, "creation_date": 1455142075, "post_id": 35326346, "comment_id": 58362521, "body": "The latter. I&#39;m suggesting you add &lt;div id=&#39;id_of_first_div&#39;&gt; around the one-shot header and form elements. And &lt;div id=&#39;id_of_second_div&#39;&gt; around the ongoing header and form elements. With container divs around the two sections you can toggle their visibility with javascript."}], "tags": [], "owner": {"reputation": 663, "user_id": 116926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eae0b6c37b4ee8cc974798f79c2aff5?s=128&d=identicon&r=PG", "display_name": "andynu", "link": "https://stackoverflow.com/users/116926/andynu"}, "is_accepted": true, "score": 1, "last_activity_date": 1455139872, "creation_date": 1455139872, "answer_id": 35326346, "question_id": 35326162, "link": "https://stackoverflow.com/questions/35326162/how-to-toggle-between-two-nested-partial-forms/35326346#35326346", "title": "How to toggle between two nested partial forms?", "body": "<p>Wrap each partial form in a div with an id and add some javascript on the radio_button clicks.</p>\n\n<pre><code>$(function(){\n  $('#id_of_first_radio').click(function(){ $('#id_of_first_div').show(); $('#id_of_second_div').hide(); });\n  $('#id_of_second_radio').click(function(){ $('#id_of_first_div').hide(); $('#id_of_second_div').show(); });\n});\n</code></pre>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 35326346, "answer_count": 1, "score": 0, "last_activity_date": 1455139872, "creation_date": 1455139300, "question_id": 35326162, "link": "https://stackoverflow.com/questions/35326162/how-to-toggle-between-two-nested-partial-forms", "title": "How to toggle between two nested partial forms?", "body": "<p>So the user chose \"Run\" as his <code>challenge</code>. Now he should be able to toggle between the categories: <code>oneshot</code> or <code>ongoing</code>.</p>\n\n<p>Right now all the attributes are showing, but how can I only show the <code>oneshot</code> attribute <code>:deadline</code> if the user clicks \"One-shot\" and how can I only show the <code>ongoing</code> attributes if the user clicks \"Ongoing\"?</p>\n\n<p><a href=\"https://i.stack.imgur.com/GMOeI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GMOeI.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>challenges/_form.html.erb</strong></p>\n\n<pre><code>  &lt;%= form_for(@challenge) do |f| %&gt;\n    &lt;%= f.text_field :action %&gt;\n    &lt;% Challenge::CATEGORY.each do |c| %&gt;\n      &lt;%= label(c, c) %&gt;:\n      &lt;%= f.radio_button(:category, c, :class =&gt; \"date-format-switcher\") %&gt;\n    &lt;% end %&gt;\n    &lt;%= f.fields_for :category do |category| %&gt;\n      &lt;%= render 'category_fields', :f =&gt; category %&gt;\n    &lt;% end %&gt;\n    &lt;%= button_tag(type: 'submit', class: \"btn\")  do %&gt;\n      Save\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p><strong>challenges/_category_fields.html.erb</strong></p>\n\n<pre><code>  One-Shot\n    &lt;%= f.date_select :deadline, :order =&gt; [:month, :day, :year], use_short_month: true, class: 'date-select' %&gt;\n  Ongoing\n    &lt;%= f.date_select :date_started, :order =&gt; [:month, :day, :year], :with_css_classes =&gt; true, :class =&gt; \"date-select\" %&gt;\n    &lt;%= f.collection_check_boxes :committed, Date::ABBR_DAYNAMES, :downcase, :to_s %&gt;\n    &lt;%= f.number_field :days_challenged, value: 30, class: 'day-challenge' %&gt; \n    &lt;script&gt;\n      $(function () {\n        $('[data-toggle=\"tooltip\"]').tooltip()\n      })\n    &lt;/script&gt;\n</code></pre>\n\n<p><strong>challenge.rb</strong></p>\n\n<pre><code>class Challenge &lt; ActiveRecord::Base\n    scope :oneshot,  -&gt; { where(categories: 'One-Shot') }\n    scope :ongoing,  -&gt; { where(categories: 'Ongoing') }\n    CATEGORY = ['One-Shot', 'Ongoing']\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "spree"], "answers": [{"comments": [{"owner": {"reputation": 2183, "user_id": 1200043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tr7dt.jpg?s=128&g=1", "display_name": "maniacalrobot", "link": "https://stackoverflow.com/users/1200043/maniacalrobot"}, "edited": false, "score": 0, "creation_date": 1455139619, "post_id": 35326199, "comment_id": 58361294, "body": "The collection isn&#39;t empty, there&#39;s nothing there at all?"}, {"owner": {"reputation": 41, "user_id": 5473266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9857f537ad5b0df7265e3a712a1e4118?s=128&d=identicon&r=PG&f=1", "display_name": "alexscjava", "link": "https://stackoverflow.com/users/5473266/alexscjava"}, "edited": false, "score": 0, "creation_date": 1455139829, "post_id": 35326199, "comment_id": 58361427, "body": "It is strange because when I use the _taxonomies.html.rb file I don&#39;t have any problem. It only happens when I use its code to make my own bar menu in _main_bar_menu.html.rb."}], "tags": [], "owner": {"reputation": 810, "user_id": 2932502, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/100000580013063/picture?type=large", "display_name": "Oscar Valdez Esquea", "link": "https://stackoverflow.com/users/2932502/oscar-valdez-esquea"}, "is_accepted": false, "score": 0, "last_activity_date": 1455139685, "last_edit_date": 1455139685, "creation_date": 1455139406, "answer_id": 35326199, "question_id": 35326132, "link": "https://stackoverflow.com/questions/35326132/undefined-method-each-for-nilnilclass-in-spree/35326199#35326199", "title": "undefined method `each&#39; for nil:NilClass in Spree", "body": "<p>You are trying to iterate in an null collection. Where are you feeding data to the <code>@taxonomies</code> variable? What's that collection supposed to hold? Maybe the query you are executing its returning no values hence why the collection is null. Check your controller.</p>\n"}, {"tags": [], "owner": {"reputation": 2183, "user_id": 1200043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tr7dt.jpg?s=128&g=1", "display_name": "maniacalrobot", "link": "https://stackoverflow.com/users/1200043/maniacalrobot"}, "is_accepted": true, "score": 0, "last_activity_date": 1455139794, "creation_date": 1455139794, "answer_id": 35326323, "question_id": 35326132, "link": "https://stackoverflow.com/questions/35326132/undefined-method-each-for-nilnilclass-in-spree/35326323#35326323", "title": "undefined method `each&#39; for nil:NilClass in Spree", "body": "<p>It looks like the @taxonomies collection isn't assigned to in the spree product show action. The code you've copied into the view needs to have the taxons assigned. Try looking and comparing the controllers for the index and show actions, as the index actions are assigning the taxons</p>\n"}, {"tags": [], "owner": {"reputation": 259, "user_id": 5881210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/324c53b75fe3516d8aba1a92dc5a4ede?s=128&d=identicon&r=PG&f=1", "display_name": "sumit", "link": "https://stackoverflow.com/users/5881210/sumit"}, "is_accepted": false, "score": 1, "last_activity_date": 1455507678, "creation_date": 1455507678, "answer_id": 35401145, "question_id": 35326132, "link": "https://stackoverflow.com/questions/35326132/undefined-method-each-for-nilnilclass-in-spree/35401145#35401145", "title": "undefined method `each&#39; for nil:NilClass in Spree", "body": "<p>&lt;% @taxonomies.each do |taxonomy| %>\nPlease write down this line as\n&lt;% (@taxonomies || []).each do |taxonomy| %>\nIt will never genrate error of nil</p>\n"}], "owner": {"reputation": 41, "user_id": 5473266, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9857f537ad5b0df7265e3a712a1e4118?s=128&d=identicon&r=PG&f=1", "display_name": "alexscjava", "link": "https://stackoverflow.com/users/5473266/alexscjava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 400, "favorite_count": 0, "accepted_answer_id": 35326323, "answer_count": 3, "score": 0, "last_activity_date": 1455967317, "creation_date": 1455139222, "last_edit_date": 1455139463, "question_id": 35326132, "link": "https://stackoverflow.com/questions/35326132/undefined-method-each-for-nilnilclass-in-spree", "title": "undefined method `each&#39; for nil:NilClass in Spree", "body": "<p>In Spree Store I have a side bar composed by Taxonomies.\nExample:\nFood (taxonomy)\n  |-hamburguer\n  |-french fries</p>\n\n<p>I took the side bar made by taxonomies and I applied the code to build a customized bootstrap menu. And to do that I did that following:</p>\n\n<p>I took the code bellow from _taxonomies.html.rb:<br/></p>\n\n<pre><code>&lt;% max_level = Spree::Config[:max_level_in_taxons_menu] || 1 %&gt;\n&lt;nav id=\"taxonomies\" class=\"sidebar-item\" data-hook&gt;\n  &lt;% @taxonomies.each do |taxonomy| %&gt;\n    &lt;% cache [I18n.locale, taxonomy, max_level] do %&gt;\n      &lt;h6 class='taxonomy-root'&gt;&lt;%= Spree.t(:shop_by_taxonomy, :taxonomy =&gt; taxonomy.name) %&gt;&lt;/h6&gt;\n      &lt;%= taxons_tree(taxonomy.root, @taxon, max_level) %&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;/nav&gt;\n</code></pre>\n\n<p>And I did it:(putting it in a _main_bar_menu.html.rb file)<br/></p>\n\n<pre><code>&lt;% max_level = Spree::Config[:max_level_in_taxons_menu] || 1 %&gt;\n&lt;nav class=\"columns sixteen\"&gt;\n&lt;nav id=\"taxonomies\" class=\"navbar navbar-default\" data-hook&gt;\n    &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"navbar-header\"&gt;\n            &lt;button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" \n            data-target=\"#menu-produtos-taxonomi\" aria-expanded=\"false\"&gt;\n                &lt;span class=\"sr-only\"&gt;Toggle navigation&lt;/span&gt;\n                &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n                &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n                &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n            &lt;/button&gt;\n        &lt;/div&gt;\n        &lt;div class=\"collapse navbar-collapse\" id=\"menu-produtos-taxonomi\"&gt;\n            &lt;ul class=\"nav navbar-nav\"&gt;\n                &lt;li id=\"home-link\" data-hook&gt;&lt;%= link_to Spree.t(:home), spree.root_path %&gt;&lt;/li&gt;    \n                &lt;% @taxonomies.each do |taxonomy| %&gt;\n                    &lt;% cache [I18n.locale, taxonomy, max_level] do %&gt;\n                    &lt;li class=\"dropdown\"&gt;\n                        &lt;a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\" role=\"button\" \n                            aria-haspopup=\"true\" aria-expanded=\"false\"&gt;\n                            &lt;%= Spree.t(:shop_by_taxonomy_only_name, :taxonomy =&gt; taxonomy.name) %&gt; \n                            &lt;span class=\"caret\"&gt;&lt;/span&gt;\n                        &lt;/a&gt;\n                        &lt;%= taxons_tree_menu(taxonomy.root, @taxon, max_level) %&gt;\n                    &lt;/li&gt;\n                    &lt;% end %&gt;\n                &lt;% end %&gt;   \n            &lt;/ul&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/nav&gt;\n&lt;/nav&gt;\n</code></pre>\n\n<p>After that, every time I try to access a product page with its details(not a page listing the products of the same time), por exemple:</p>\n\n<p><a href=\"http://localhost:3000/products/soy-milk?taxon_id=3\" rel=\"nofollow\">http://localhost:3000/products/soy-milk?taxon_id=3</a></p>\n\n<p>I get the following error:</p>\n\n<p><strong>undefined method `each' for nil:NilClass</strong></p>\n\n<p>And it is pointing to that line in _main_bar_menu.html.rb (shown above):</p>\n\n<pre><code>&lt;% @taxonomies.each do |taxonomy| %&gt;\n</code></pre>\n\n<p>I'm a begginer in Ruby on Rails and Spree, and I don't know how to solve that. If you can help me please ... I would appreciate that. </p>\n"}, {"tags": ["ruby", "rubygems", "dashing"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1455138823, "post_id": 35325879, "comment_id": 58360859, "body": "Here&#39;s a related issue: <a href=\"https://github.com/Shopify/dashing/issues/242\" rel=\"nofollow noreferrer\">github.com/Shopify/dashing/issues/242</a> I&#39;m not sure the fix there will solve your problem, but it&#39;s worth a shot."}, {"owner": {"reputation": 277, "user_id": 4895637, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sXAg1qswNzI/AAAAAAAAAAI/AAAAAAAABmY/YJXxqhrGptQ/photo.jpg?sz=128", "display_name": "Sebastian S", "link": "https://stackoverflow.com/users/4895637/sebastian-s"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1455139695, "post_id": 35325879, "comment_id": 58361341, "body": "I took a quick look, but I didnt find the location of the.bash_profile or .zshrc file.. Where is it located?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1455139774, "post_id": 35325879, "comment_id": 58361383, "body": "In your home directory (assuming you&#39;re not on Windows, in which case it won&#39;t help you). You can also just type those commands in your terminal to test them (they won&#39;t be permanent)."}, {"owner": {"reputation": 277, "user_id": 4895637, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sXAg1qswNzI/AAAAAAAAAAI/AAAAAAAABmY/YJXxqhrGptQ/photo.jpg?sz=128", "display_name": "Sebastian S", "link": "https://stackoverflow.com/users/4895637/sebastian-s"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1455140229, "post_id": 35325879, "comment_id": 58361639, "body": "I am running this on a rasperry pi 2, I have not found out how to search files good yet. in my pi/home folder there is: .bash_history, .bash_logout, .bashrc .gemrc .gitconfig .profile   Is it any of these files?"}, {"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 1, "creation_date": 1455140462, "post_id": 35325879, "comment_id": 58361761, "body": "It sounds like your input is not encoded as UTF-8, but the app expects it to be. Or maybe it&#39;s something even more confusing to do with character encoding.  Char encoding problems are very challenging to debug. It&#39;s definitely a character encoding issue. If people are copy-pasting things into google calendar that are not in UTF-8, it&#39;s going to be a mess, and I&#39;m not sure what you can do. If you could figure out what encoding your users are using, and they are always using it, you could probably somehow put something in front of dashing to convert it to UTF-8 first thing."}, {"owner": {"reputation": 277, "user_id": 4895637, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sXAg1qswNzI/AAAAAAAAAAI/AAAAAAAABmY/YJXxqhrGptQ/photo.jpg?sz=128", "display_name": "Sebastian S", "link": "https://stackoverflow.com/users/4895637/sebastian-s"}, "edited": false, "score": 0, "creation_date": 1455140988, "post_id": 35325879, "comment_id": 58362021, "body": "It is just my personal calendar at the moment, with Swedish holidays, special days and such for now. I think that &quot;<b>ISO 8859-1</b>&quot; apparently also know as <b>latin-1</b> is what we use.."}, {"owner": {"reputation": 277, "user_id": 4895637, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sXAg1qswNzI/AAAAAAAAAAI/AAAAAAAABmY/YJXxqhrGptQ/photo.jpg?sz=128", "display_name": "Sebastian S", "link": "https://stackoverflow.com/users/4895637/sebastian-s"}, "edited": false, "score": 0, "creation_date": 1455213694, "post_id": 35325879, "comment_id": 58400504, "body": "Damn, still struggeling.. Any more ideas?"}], "owner": {"reputation": 277, "user_id": 4895637, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sXAg1qswNzI/AAAAAAAAAAI/AAAAAAAABmY/YJXxqhrGptQ/photo.jpg?sz=128", "display_name": "Sebastian S", "link": "https://stackoverflow.com/users/4895637/sebastian-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1455138661, "creation_date": 1455138342, "last_edit_date": 1455138661, "question_id": 35325879, "link": "https://stackoverflow.com/questions/35325879/dashing-ruby-1-9-1-scheduler-caught-exception-xc3-from-ascii-8bit-to-utf-8", "title": "Dashing/Ruby 1.9.1: scheduler caught exception: &quot;\\xC3&quot; from ASCII-8BIT to UTF-8", "body": "<p>I am very bad with ruby :(</p>\n\n<p>I am using dashing and I have a widget that will display coming events from my google calendar using this <a href=\"https://gist.github.com/jmb/33ae3a33d6e8dbffd102\" rel=\"nofollow\">Github</a></p>\n\n<p>It is working as it should except that I have special letters in my language but it is just these 3 chars: <strong>\u00e5 \u00e4 \u00f6</strong>. These 3 are very common Swedish letters. So whenever there is an event containing one of those letters the widget breaks and displays nothing with the following error from logs:</p>\n\n<pre><code>scheduler caught exception:\n\"\\xC3\" from ASCII-8BIT to UTF-8\n/home/pi/.rbenv/versions/1.9.3-p448/lib/ruby/gems/1.9.1/gems/dashing-1.3.4/lib/dashing/app.rb:129:in `to_json'\n/home/pi/.rbenv/versions/1.9.3-p448/lib/ruby/gems/1.9.1/gems/dashing-1.3.4/lib/dashing/app.rb:129:in `send_event'\n/opt/dashboard/jobs/google_calendar.rb:28:in `block in &lt;top (required)&gt;'\n/home/pi/.rbenv/versions/1.9.3-p448/lib/ruby/gems/1.9.1/gems/rufus-scheduler-2.0.24/lib/rufus/sc/jobs.rb:232:in `call'\n/home/pi/.rbenv/versions/1.9.3-p448/lib/ruby/gems/1.9.1/gems/rufus-scheduler-2.0.24/lib/rufus/sc/jobs.rb:232:in `trigger_block'\n/home/pi/.rbenv/versions/1.9.3-p448/lib/ruby/gems/1.9.1/gems/rufus-scheduler-2.0.24/lib/rufus/sc/jobs.rb:206:in `block in trigger'\n/home/pi/.rbenv/versions/1.9.3-p448/lib/ruby/gems/1.9.1/gems/rufus-scheduler-2.0.24/lib/rufus/sc/scheduler.rb:431:in `call'\n/home/pi/.rbenv/versions/1.9.3-p448/lib/ruby/gems/1.9.1/gems/rufus-scheduler-2.0.24/lib/rufus/sc/scheduler.rb:431:in `block in trigger_job'\n</code></pre>\n\n<p>If I remove the event with one of those letters, error goes away. I've been trying to fix this for the past 2 hours with zero success. Can you save me stackoverflow? :D</p>\n\n<p>edit: Best case: The widget displays the text with the special chars (<strong>\u00e5 \u00e4 \u00f6</strong>)\n      Worst case: The <strong>\u00f6</strong> is converted to <strong>o</strong> and <strong>\u00e5 \u00e4</strong> to <strong>a</strong></p>\n\n<p>Thanks in advance, its getting late over here so I have to sleep for now but I am eager to solve this tomorrow after work!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "helper"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1455138466, "post_id": 35325753, "comment_id": 58360658, "body": "How do you calculate the price in the helper? Are the calculations in the helper based on values from the database? Or could the values be stored in the database?"}, {"owner": {"reputation": 1218, "user_id": 4592910, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d1558928d220b4f7302dca2fe2c38ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Kathan", "link": "https://stackoverflow.com/users/4592910/kathan"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1455139081, "post_id": 35325753, "comment_id": 58361002, "body": "The price is calculated based on the times and dates entered by the user, then multiplied by either the <code>hour_price</code> <code>day_price</code> or <code>week_price</code> (which, yes, are being stored in the db). For example, if the user wants a 2 day room, the helper will multiply the <code>day_price * 2</code> @spickermann"}], "answers": [{"comments": [{"owner": {"reputation": 843, "user_id": 2705962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43e0615c7b33faefac277423391397e?s=128&d=identicon&r=PG&f=1", "display_name": "Semjon", "link": "https://stackoverflow.com/users/2705962/semjon"}, "edited": false, "score": 2, "creation_date": 1455139931, "post_id": 35325991, "comment_id": 58361484, "body": "Advanced option is a saving a function on database side and use it for sorting in queries. Pro tip for Postgres - add functional index with right direction of sorting for this query <a href=\"http://www.postgresql.org/docs/current/static/indexes-expressional.html\" rel=\"nofollow noreferrer\">postgresql.org/docs/current/static/indexes-expressional.html</a>"}], "tags": [], "owner": {"reputation": 663, "user_id": 116926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eae0b6c37b4ee8cc974798f79c2aff5?s=128&d=identicon&r=PG", "display_name": "andynu", "link": "https://stackoverflow.com/users/116926/andynu"}, "is_accepted": true, "score": 3, "last_activity_date": 1455138748, "last_edit_date": 1495542203, "creation_date": 1455138748, "answer_id": 35325991, "question_id": 35325753, "link": "https://stackoverflow.com/questions/35325753/rails-4-ordering-by-something-not-stored-in-the-database/35325991#35325991", "title": "Rails 4 - Ordering by something not stored in the database", "body": "<p>You could load all of them and do an array sort as is <a href=\"http://awaxman11.github.io/blog/2013/10/11/sorting-a-rails-resource-based-on-a-calculated-value/\" rel=\"nofollow noreferrer\">suggested here</a>, and <a href=\"https://stackoverflow.com/questions/12879040/how-can-i-sort-on-a-calculated-value\">here</a>. Though that would not scale well, but if you've already filtered by the rooms that are available this might be sufficient.</p>\n\n<p>You might be able to push it back to the database by building a custom sql order by.</p>\n\n<pre><code>Rooms.order(\"(#{days} * day_price) asc\")\n</code></pre>\n"}], "owner": {"reputation": 1218, "user_id": 4592910, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d1558928d220b4f7302dca2fe2c38ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Kathan", "link": "https://stackoverflow.com/users/4592910/kathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 35325991, "answer_count": 1, "score": 1, "last_activity_date": 1455138748, "creation_date": 1455137856, "question_id": 35325753, "link": "https://stackoverflow.com/questions/35325753/rails-4-ordering-by-something-not-stored-in-the-database", "title": "Rails 4 - Ordering by something not stored in the database", "body": "<p>I am using Rails 4. I have a <code>Room</code> model with <code>hour_price</code> <code>day_price</code> and <code>week_price</code> attributes. </p>\n\n<p>On the index, users are able to enter different times and dates they would like to stay in a room. Based on these values, I have a helper method that then calculates the total price it would cost them using the price attributes mentioned above. </p>\n\n<p><strong>My question is</strong> what is the best way to sort through the <code>rooms</code> and order them least to greatest (in terms of price). Having a hard time figuring out the best way to do this, especially when considering the price value is calculated by a helper and isn't stored in the database. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf", "hash", "hashmap"], "comments": [{"owner": {"reputation": 4945, "user_id": 1561929, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/42466d208f3eb0adedc4cebdba1970f8?s=128&d=identicon&r=PG", "display_name": "Alex Harris", "link": "https://stackoverflow.com/users/1561929/alex-harris"}, "edited": false, "score": 0, "creation_date": 1455136702, "post_id": 35325353, "comment_id": 58359707, "body": "Are the coordinates fixed and always the same every time?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1455137133, "post_id": 35325353, "comment_id": 58359929, "body": "Floating point values that long may suffer from a small amount of jitter. How close is close enough?"}, {"owner": {"reputation": 21, "user_id": 5398454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8f4d30a748b96884624605ee0c035155?s=128&d=identicon&r=PG&f=1", "display_name": "S.Bala", "link": "https://stackoverflow.com/users/5398454/s-bala"}, "edited": false, "score": 0, "creation_date": 1455137480, "post_id": 35325353, "comment_id": 58360120, "body": "Right now we are assuming coordinates are fixed"}, {"owner": {"reputation": 21, "user_id": 5398454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8f4d30a748b96884624605ee0c035155?s=128&d=identicon&r=PG&f=1", "display_name": "S.Bala", "link": "https://stackoverflow.com/users/5398454/s-bala"}, "edited": false, "score": 0, "creation_date": 1455137552, "post_id": 35325353, "comment_id": 58360163, "body": "not sure about the floating point values. I guess we can say + or - one or two places. does that work ?"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5398454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8f4d30a748b96884624605ee0c035155?s=128&d=identicon&r=PG&f=1", "display_name": "S.Bala", "link": "https://stackoverflow.com/users/5398454/s-bala"}, "edited": false, "score": 0, "creation_date": 1455138417, "post_id": 35325690, "comment_id": 58360626, "body": "Thank you. It is working but it is displaying the result 4 times.7933 Preston Road7933 Preston Road7933 Preston Road7933 Preston Road"}, {"owner": {"reputation": 21, "user_id": 5398454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8f4d30a748b96884624605ee0c035155?s=128&d=identicon&r=PG&f=1", "display_name": "S.Bala", "link": "https://stackoverflow.com/users/5398454/s-bala"}, "edited": false, "score": 0, "creation_date": 1455139582, "post_id": 35325690, "comment_id": 58361276, "body": "it is basically giving me the text at that location from all teh 4 pages in the PDF How do I limit it to give me page by page."}, {"owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "reply_to_user": {"reputation": 21, "user_id": 5398454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8f4d30a748b96884624605ee0c035155?s=128&d=identicon&r=PG&f=1", "display_name": "S.Bala", "link": "https://stackoverflow.com/users/5398454/s-bala"}, "edited": false, "score": 0, "creation_date": 1455140450, "post_id": 35325690, "comment_id": 58361755, "body": "That I&#39;ll leave to you. You&#39;ll just need to tweak how it loops to break it apart by page."}], "tags": [], "owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "is_accepted": false, "score": 0, "last_activity_date": 1455137634, "creation_date": 1455137634, "answer_id": 35325690, "question_id": 35325353, "link": "https://stackoverflow.com/questions/35325353/i-have-a-nested-hash-and-want-to-get-the-value-of-one-of-the-key/35325690#35325690", "title": "I have a nested hash and want to get the value of one of the key", "body": "<p>A little ugly, but it works. You'll want to adjust the tolerances. Assuming that <code>pdf</code> is your array of hash data.</p>\n\n<pre><code>y = 690.959999999\nx = 54.01\nwidth = 59.619068135999\ntexts = pdf.map do |page|\n  page[:lines].\n    select {|e| (y - e[:y]).abs &lt; 0.1}.\n    map {|e| e[:text_groups]}.\n    flatten.\n    select {|e| (x - e[:x]).abs &lt; 0.1 &amp;&amp; (width - e[:width]).abs &lt; 0.1}.\n    map {|e| e[:text]}\nend\n\nputs texts.join\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 663, "user_id": 116926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eae0b6c37b4ee8cc974798f79c2aff5?s=128&d=identicon&r=PG", "display_name": "andynu", "link": "https://stackoverflow.com/users/116926/andynu"}, "reply_to_user": {"reputation": 21, "user_id": 5398454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8f4d30a748b96884624605ee0c035155?s=128&d=identicon&r=PG&f=1", "display_name": "S.Bala", "link": "https://stackoverflow.com/users/5398454/s-bala"}, "edited": false, "score": 0, "creation_date": 1455138948, "post_id": 35325748, "comment_id": 58360925, "body": "class ClassXXX; def self.find_location(...); ... ; end; end; ClassXXX.find_location(...);"}, {"owner": {"reputation": 21, "user_id": 5398454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8f4d30a748b96884624605ee0c035155?s=128&d=identicon&r=PG&f=1", "display_name": "S.Bala", "link": "https://stackoverflow.com/users/5398454/s-bala"}, "edited": false, "score": 0, "creation_date": 1455139376, "post_id": 35325748, "comment_id": 58361155, "body": "I have multiple pages, when i want text from 2nd page or 3rd page how do I do that ?"}, {"owner": {"reputation": 663, "user_id": 116926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eae0b6c37b4ee8cc974798f79c2aff5?s=128&d=identicon&r=PG", "display_name": "andynu", "link": "https://stackoverflow.com/users/116926/andynu"}, "reply_to_user": {"reputation": 21, "user_id": 5398454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8f4d30a748b96884624605ee0c035155?s=128&d=identicon&r=PG&f=1", "display_name": "S.Bala", "link": "https://stackoverflow.com/users/5398454/s-bala"}, "edited": false, "score": 0, "creation_date": 1455139530, "post_id": 35325748, "comment_id": 58361244, "body": "This code iterates through all pages. The page_hash variable contains a :page key. You could add a page parameter and check for it in the loop. something like <code>next unless page_hash[:page] == page</code>."}, {"owner": {"reputation": 663, "user_id": 116926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eae0b6c37b4ee8cc974798f79c2aff5?s=128&d=identicon&r=PG", "display_name": "andynu", "link": "https://stackoverflow.com/users/116926/andynu"}, "reply_to_user": {"reputation": 21, "user_id": 5398454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8f4d30a748b96884624605ee0c035155?s=128&d=identicon&r=PG&f=1", "display_name": "S.Bala", "link": "https://stackoverflow.com/users/5398454/s-bala"}, "edited": false, "score": 0, "creation_date": 1455140299, "post_id": 35325748, "comment_id": 58361687, "body": "Pardon, the code iterates through each page until it finds the first result. Using next would let you skip until the page you were looking for."}], "tags": [], "owner": {"reputation": 663, "user_id": 116926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eae0b6c37b4ee8cc974798f79c2aff5?s=128&d=identicon&r=PG", "display_name": "andynu", "link": "https://stackoverflow.com/users/116926/andynu"}, "is_accepted": false, "score": 1, "last_activity_date": 1455137827, "creation_date": 1455137827, "answer_id": 35325748, "question_id": 35325353, "link": "https://stackoverflow.com/questions/35325353/i-have-a-nested-hash-and-want-to-get-the-value-of-one-of-the-key/35325748#35325748", "title": "I have a nested hash and want to get the value of one of the key", "body": "<p>Perhaps even uglier, and with no tolerances</p>\n\n<pre><code>def find_location(pdf, y, x ,width)\n  pdf.each do |page_hash|\n    y_lines = page_hash[:lines].select{|line_hash| line_hash[:y] == y }\n    y_lines.each do |y_line|\n      y_line[:text_groups].each do |text_group|\n        if text_group[:x] == x &amp;&amp; text_group[:width] == width\n          return text_group[:text]\n        end\n      end\n    end\n    return nil # Could not find text at that location.\n  end\nend\n\nputs find_location(pdf, 690.9599999999999, 54.0, 59.619068135999825)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5398454, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8f4d30a748b96884624605ee0c035155?s=128&d=identicon&r=PG&f=1", "display_name": "S.Bala", "link": "https://stackoverflow.com/users/5398454/s-bala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1455137827, "creation_date": 1455136426, "last_edit_date": 1455136564, "question_id": 35325353, "link": "https://stackoverflow.com/questions/35325353/i-have-a-nested-hash-and-want-to-get-the-value-of-one-of-the-key", "title": "I have a nested hash and want to get the value of one of the key", "body": "<p>I have a nested Hash </p>\n\n<pre><code>[{:page=&gt;1, \n:lines=&gt;[\n{:y=&gt;774.0, :text_groups=&gt;[{:x=&gt;18.0, :width=&gt;421.59599999999995, :text=&gt;\"-*- Demonstration Powered by HP Exstream 04/21/2015, Version 9.0.104 32-bit -*-\"}]}, \n{:y=&gt;762.0, :text_groups=&gt;[{:x=&gt;504.24, :width=&gt;53.78399999999999, :text=&gt;\"July 16, 2014\"}]}, \n{:y=&gt;699.12, :text_groups=&gt;[{:x=&gt;54.0, :width=&gt;80.01709144799977, :text=&gt;\"Capital One Auto Finance\"}]}, \n{:y=&gt;690.9599999999999, :text_groups=&gt;[{:x=&gt;54.0, :width=&gt;59.619068135999825, :text=&gt;\"7933 Preston Road\"}]}, \n{:y=&gt;682.8, :text_groups=&gt;[{:x=&gt;54.0, :width=&gt;53.450022959999956, :text=&gt;\"Plano, TX 75024\"}]},...........\n</code></pre>\n\n<p>[{:page=>2, \n:lines=>[.....</p>\n\n<p>This is the hash of a PDF content.\nI want to get the value of 'text' \"7933 Preston Road\" when given the Key Value pairs of :y=>\"690.9599999999999\", :x=>\"54.0\" and :width=>\"59.619068135999825\"</p>\n\n<p>basically what I am trying to do here is, in a PDF which is a letter, I am trying to find out what text is present at a given Coordinate.\nI can get the PDF content into a hash but could not search through it and print the text for the required coordinates.</p>\n\n<p>Can some one help me with this ?</p>\n"}, {"tags": ["ruby", "parsing", "abstract-syntax-tree"], "answers": [{"tags": [], "owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "is_accepted": true, "score": 0, "last_activity_date": 1455140217, "creation_date": 1455140217, "answer_id": 35326439, "question_id": 35325351, "link": "https://stackoverflow.com/questions/35325351/what-is-the-idiomatic-way-to-construct-an-ast-in-ruby/35326439#35326439", "title": "What is the idiomatic way to construct an AST in Ruby?", "body": "<p>I don't think there neccesarily is an 'idiomatic way'. Using just Hashes vs custom domain objects each has pro's and con's. Custom domain objects (a class to represent each node type) are probably better, but take more work to implement. </p>\n\n<p>Parslet is one easy to use ruby library for parsing and creating AST's. Although beware Parslet is kind of slow, and shouldn't be used where performance matters. I think Parslet by default will give you an AST as hashes, but if you set it up right you can get custom domain objects. </p>\n\n<p>Hashes are mostly just used because they are easy to implement, I think in all other regards they are probably worse. Hashes are just a shortcut. But one often used in ruby, sure. </p>\n\n<p>There isn't neccesarily any consensus \"ruby\" way to do it.  Using a separate class for every type of sub-expression would be considered 'more object oriented'. It may or may not be faster or slower performance than using hashes. It will probably take more work to implement, but may not either. </p>\n"}, {"comments": [{"owner": {"reputation": 8506, "user_id": 10808674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1tGB.jpg?s=128&g=1", "display_name": "Alain Merigot", "link": "https://stackoverflow.com/users/10808674/alain-merigot"}, "edited": false, "score": 1, "creation_date": 1548712984, "post_id": 54410668, "comment_id": 95632858, "body": "Welcome to StackOverflow. You should improve your answer. SO aims to collect high quality answers that can be a long term help for the community and this kind of answer does not really help. You can look at <a href=\"https://stackoverflow.com/help/how-to-answer\">How do I write a good answer</a> to try to improve your answer."}, {"owner": {"reputation": 1, "user_id": 5369922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a8735111d9ec29d74de122f1f79bfb9?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Withers", "link": "https://stackoverflow.com/users/5369922/edward-withers"}, "reply_to_user": {"reputation": 8506, "user_id": 10808674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j1tGB.jpg?s=128&g=1", "display_name": "Alain Merigot", "link": "https://stackoverflow.com/users/10808674/alain-merigot"}, "edited": false, "score": 0, "creation_date": 1587110279, "post_id": 54410668, "comment_id": 108384288, "body": "Good morning, welcome too! The blog is pretty great, I recommend reading it through - there\u2019s lots of goodies to learn :)"}], "tags": [], "owner": {"reputation": 1, "user_id": 5369922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a8735111d9ec29d74de122f1f79bfb9?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Withers", "link": "https://stackoverflow.com/users/5369922/edward-withers"}, "is_accepted": false, "score": 0, "last_activity_date": 1548711649, "creation_date": 1548711649, "answer_id": 54410668, "question_id": 35325351, "link": "https://stackoverflow.com/questions/35325351/what-is-the-idiomatic-way-to-construct-an-ast-in-ruby/54410668#54410668", "title": "What is the idiomatic way to construct an AST in Ruby?", "body": "<p>Ruby 2.6 adds RubyVM::AST module</p>\n\n<p><a href=\"https://blog.bigbinary.com/2018/10/02/ruby-2-6-adds-rubyvm-ast-module.html\" rel=\"nofollow noreferrer\">https://blog.bigbinary.com/2018/10/02/ruby-2-6-adds-rubyvm-ast-module.html</a></p>\n"}], "owner": {"reputation": 1089, "user_id": 2064020, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f1f845fef9e04f0b2b8d777594597db3?s=128&d=identicon&r=PG", "display_name": "\u9f50\u5929\u5927\u5723", "link": "https://stackoverflow.com/users/2064020/%e9%bd%90%e5%a4%a9%e5%a4%a7%e5%9c%a3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 600, "favorite_count": 0, "accepted_answer_id": 35326439, "answer_count": 2, "score": 1, "last_activity_date": 1548711649, "creation_date": 1455136420, "last_edit_date": 1495535304, "question_id": 35325351, "link": "https://stackoverflow.com/questions/35325351/what-is-the-idiomatic-way-to-construct-an-ast-in-ruby", "title": "What is the idiomatic way to construct an AST in Ruby?", "body": "<p>I am making a parser for a simple grammar to learn about parsing technique.</p>\n\n<p>For example if I have the following grammar:</p>\n\n<pre><code>exp    := if-exp ...\nif-exp := if bool-exp then exp else exp\n....\n</code></pre>\n\n<p>In languages which support algebraic data types, I can do:</p>\n\n<pre><code>type exp = \n| If-exp of bool-exp * exp * exp\n| ....\n</code></pre>\n\n<p>A <a href=\"https://github.com/NewLisper/yin/tree/master/src/main/java/org/yinwang/yin/ast\" rel=\"nofollow noreferrer\">Java example</a> I found creates a class for every sub-expression:</p>\n\n<pre><code>Class If_exp\n  @bool_exp\n  @then_exp\n  @else_exp\n\n ...\n\nend\n</code></pre>\n\n<p>\"<a href=\"https://stackoverflow.com/questions/10121444/how-to-manually-construct-an-ast\">How to manually construct an AST?</a>\" uses a hash to construct an AST.</p>\n\n<p>Which way is better? What is the Ruby way?</p>\n"}, {"tags": ["ruby", "json", "widget", "jira", "dashing"], "comments": [{"owner": {"reputation": 3208, "user_id": 5045744, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/950266565058124/picture?type=large", "display_name": "Shaohao Lin", "link": "https://stackoverflow.com/users/5045744/shaohao-lin"}, "edited": false, "score": 0, "creation_date": 1455137885, "post_id": 35325161, "comment_id": 58360348, "body": "What have to you done so far? Can you post your code?"}, {"owner": {"reputation": 1515, "user_id": 3212973, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CDTNO.jpg?s=128&g=1", "display_name": "Elbert Villarreal", "link": "https://stackoverflow.com/users/3212973/elbert-villarreal"}, "reply_to_user": {"reputation": 3208, "user_id": 5045744, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/950266565058124/picture?type=large", "display_name": "Shaohao Lin", "link": "https://stackoverflow.com/users/5045744/shaohao-lin"}, "edited": false, "score": 0, "creation_date": 1455138811, "post_id": 35325161, "comment_id": 58360850, "body": "As @ShaohaoLin says, please provide your effort to acomplish this, and show us the errors you have. Please read this <a href=\"http://stackoverflow.com/help/how-to-ask\">How to ask</a>"}, {"owner": {"reputation": 1, "user_id": 5910425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zmbNY.jpg?s=128&g=1", "display_name": "Flash-Dash", "link": "https://stackoverflow.com/users/5910425/flash-dash"}, "edited": false, "score": 0, "creation_date": 1455139258, "post_id": 35325161, "comment_id": 58361099, "body": "i&#39;ve updated the first post with the code"}, {"owner": {"reputation": 1, "user_id": 5910425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zmbNY.jpg?s=128&g=1", "display_name": "Flash-Dash", "link": "https://stackoverflow.com/users/5910425/flash-dash"}, "edited": false, "score": 0, "creation_date": 1455205781, "post_id": 35325161, "comment_id": 58394860, "body": "I&#39;ve been changing some things around and this is the new error message that I&#39;m getting"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5910425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zmbNY.jpg?s=128&g=1", "display_name": "Flash-Dash", "link": "https://stackoverflow.com/users/5910425/flash-dash"}, "edited": false, "score": 0, "creation_date": 1455307180, "post_id": 35371051, "comment_id": 58448377, "body": "i also thought that. i have tried defining the values but with no luck. So i am using a different method. thank you!"}], "tags": [], "owner": {"reputation": 66, "user_id": 5344144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VXGy0.png?s=128&g=1", "display_name": "Michael Knowles", "link": "https://stackoverflow.com/users/5344144/michael-knowles"}, "is_accepted": false, "score": 0, "last_activity_date": 1455306610, "creation_date": 1455306610, "answer_id": 35371051, "question_id": 35325161, "link": "https://stackoverflow.com/questions/35325161/how-to-use-icescrum-with-dashing-widget/35371051#35371051", "title": "How to use Icescrum with Dashing (widget)?", "body": "<p>Your code has a line:</p>\n\n<pre><code>req.basic_auth username, password\n</code></pre>\n\n<p>It's expecting two variables, \"username\" and \"password\", but neither look to be defined in your code, here. If they aren't defined you'll get an error that looks an awful lot like what you're getting.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5910425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zmbNY.jpg?s=128&g=1", "display_name": "Flash-Dash", "link": "https://stackoverflow.com/users/5910425/flash-dash"}, "is_accepted": true, "score": 0, "last_activity_date": 1455812189, "last_edit_date": 1455812189, "creation_date": 1455631064, "answer_id": 35434529, "question_id": 35325161, "link": "https://stackoverflow.com/questions/35325161/how-to-use-icescrum-with-dashing-widget/35434529#35434529", "title": "How to use Icescrum with Dashing (widget)?", "body": "<p>So finally I just used a cURL function to get the information. I'll leave it here if anyone else needs it.  It also sends the results to an xml file (if you don't want that then just remove the last part)</p>\n\n<p>.rb file:</p>\n\n<pre><code>%x{curl -v -H \"Content-Type: application/xml\" -X POST --data \"@filename.xml\" -u username:password http://website.ca:8080/icescrum/ --output result.xml}\n</code></pre>\n\n<p>Remember to change these dummy names with your links:</p>\n\n<ul>\n<li>filename.xml</li>\n<li>username</li>\n<li>password</li>\n<li>website.ca:8080/icescrum/ </li>\n<li>result.xml</li>\n</ul>\n\n<p><strong>a complete set up of the widget is also available here :\n<a href=\"https://github.com/Flash-Dash/Icescrum-widget\" rel=\"nofollow\">https://github.com/Flash-Dash/Icescrum-widget</a></strong></p>\n"}], "owner": {"reputation": 1, "user_id": 5910425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zmbNY.jpg?s=128&g=1", "display_name": "Flash-Dash", "link": "https://stackoverflow.com/users/5910425/flash-dash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 1, "accepted_answer_id": 35434529, "answer_count": 2, "score": 0, "last_activity_date": 1455913777, "creation_date": 1455135781, "last_edit_date": 1455913777, "question_id": 35325161, "link": "https://stackoverflow.com/questions/35325161/how-to-use-icescrum-with-dashing-widget", "title": "How to use Icescrum with Dashing (widget)?", "body": "<p>I am trying to create a widget on Dashing that will extract data from Icescrum and update a specific widget.</p>\n\n<p>The thing is I found info on how to program jira, so i've been trying to mess around with it to make it work with icescrum, but with no luck.</p>\n\n<p>I tried this one:</p>\n\n<pre><code>require \"uri\"\nrequire \"net/http\"\nrequire \"json\"\n\n\n\nSCHEDULER.every '2s', :first_in =&gt; 0 do |job|\n uri = URI.parse(\"http://website.ca:8080/icescrum\")\n http = Net::HTTP.new(uri.host, uri.port)\n req = Net::HTTP::Get.new(\"uri.request_uri\")\n req.basic_auth username, password\n response = http.request(req)\n issuesinProgress = JSON.parse(response.body)[\"total\"]  \n send_event('synergy', value: issuesinProgress)\nend\n</code></pre>\n\n<p>but I got this error:</p>\n\n<pre><code>scheduler caught exception:\nundefined local variable or method `username' for main:Object\n/home/administrator/dashboard/jobs/sample.rb:27:in `block in &lt;top (required)&gt;'\n/var/lib/gems/1.9.1/gems/rufus-scheduler-2.0.24/lib/rufus/sc/jobs.rb:230:in `call'\n/var/lib/gems/1.9.1/gems/rufus-scheduler-2.0.24/lib/rufus/sc/jobs.rb:230:in `trigger_block'\n/var/lib/gems/1.9.1/gems/rufus-scheduler-2.0.24/lib/rufus/sc/jobs.rb:204:in `block in trigger'\n/var/lib/gems/1.9.1/gems/rufus-scheduler-2.0.24/lib/rufus/sc/scheduler.rb:430:in `call'\n/var/lib/gems/1.9.1/gems/rufus-scheduler-2.0.24/lib/rufus/sc/scheduler.rb:430:in `block in trigger_job'\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "cucumber", "capybara"], "answers": [{"comments": [{"owner": {"reputation": 5320, "user_id": 1185576, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/57ef1b774399e777c88bbfe24c205f0c?s=128&d=identicon&r=PG", "display_name": "JTApps", "link": "https://stackoverflow.com/users/1185576/jtapps"}, "edited": false, "score": 0, "creation_date": 1455136588, "post_id": 35325362, "comment_id": 58359636, "body": "Yeah, I wish there was another option here but there really isn&#39;t. Where in the code library is this getting put?"}, {"owner": {"reputation": 4879, "user_id": 954442, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/168149d073db878da990e57c891911cd?s=128&d=identicon&r=PG", "display_name": "Andrew Regan", "link": "https://stackoverflow.com/users/954442/andrew-regan"}, "reply_to_user": {"reputation": 5320, "user_id": 1185576, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/57ef1b774399e777c88bbfe24c205f0c?s=128&d=identicon&r=PG", "display_name": "JTApps", "link": "https://stackoverflow.com/users/1185576/jtapps"}, "edited": false, "score": 0, "creation_date": 1455136676, "post_id": 35325362, "comment_id": 58359687, "body": "Would have to be called after every page load, to be sure. But if you can narrow it down by page / dialog type, so much the better. Could / should also be combined into a single <code>execute_script</code> to reduce the number of round-trips."}], "tags": [], "owner": {"reputation": 4879, "user_id": 954442, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/168149d073db878da990e57c891911cd?s=128&d=identicon&r=PG", "display_name": "Andrew Regan", "link": "https://stackoverflow.com/users/954442/andrew-regan"}, "is_accepted": false, "score": 0, "last_activity_date": 1455136603, "last_edit_date": 1455136603, "creation_date": 1455136457, "answer_id": 35325362, "question_id": 35325107, "link": "https://stackoverflow.com/questions/35325107/possible-to-dismiss-js-alerts-automatically-whenever-an-unhandled-one-appears/35325362#35325362", "title": "Possible to dismiss JS alerts automatically whenever an unhandled one appears?", "body": "<p>If you know what you're doing, and <strong>really</strong> have to bypass all JavaScript alerts and dialogs regardless of the consequences, you could always <a href=\"http://watirwebdriver.com/javascript-dialogs/\" rel=\"nofollow\">follow this advice</a>:</p>\n\n<pre><code>driver.execute_script(\"window.alert = function() {}\")\ndriver.execute_script(\"window.prompt = function() {return null}\")\ndriver.execute_script(\"window.confirm = function() {return true}\")\n</code></pre>\n\n<p>which is certainly cleaner than trying to deal with unpredictable, variable behaviour.</p>\n"}, {"comments": [{"owner": {"reputation": 5320, "user_id": 1185576, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/57ef1b774399e777c88bbfe24c205f0c?s=128&d=identicon&r=PG", "display_name": "JTApps", "link": "https://stackoverflow.com/users/1185576/jtapps"}, "edited": false, "score": 0, "creation_date": 1455209993, "post_id": 35326203, "comment_id": 58398107, "body": "Works perfectly as usual Tom, thanks for your assistance. It came down to using accept_alert which gives us a nice exception to catch and try clicking the element again to prompt the dialogues to appear, and with a little tinkering with the wait and placement in the code it fixed the flickering scenarios."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 5320, "user_id": 1185576, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/57ef1b774399e777c88bbfe24c205f0c?s=128&d=identicon&r=PG", "display_name": "JTApps", "link": "https://stackoverflow.com/users/1185576/jtapps"}, "edited": false, "score": 1, "creation_date": 1455212425, "post_id": 35326203, "comment_id": 58399650, "body": "@JTApps You&#39;re welcome -- Unfortunately (as stated) it isn&#39;t cross driver since it depends on the undocumented (but tested for) ability for accept_alert to work without a block that triggers the modal in the selenium driver.  Most other drivers need to know before a system modal is going to appear so they can catch it, hence the documented/usual <code>accept_alert { actions that trigger the alert }</code> syntax"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1455139412, "creation_date": 1455139412, "answer_id": 35326203, "question_id": 35325107, "link": "https://stackoverflow.com/questions/35325107/possible-to-dismiss-js-alerts-automatically-whenever-an-unhandled-one-appears/35326203#35326203", "title": "Possible to dismiss JS alerts automatically whenever an unhandled one appears?", "body": "<p>If you're referring to the system modal boxes (alert, confirm, prompt) When using the selenium driver you can just try to accept an open alert and catch the error raised if one doesn't exist.</p>\n\n<pre><code>find('div', :text =&gt; 'Cancel').double_click # Click cancel\naccept_browser_dialog # We've got two dialogue boxes to click through\naccept_browser_dialog # That makes two.. but what if a third was created?\nbegin\n  accept_alert(wait: 0.1)\nrescue  Capybara::ModalNotFound\nend\n</code></pre>\n"}], "owner": {"reputation": 5320, "user_id": 1185576, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/57ef1b774399e777c88bbfe24c205f0c?s=128&d=identicon&r=PG", "display_name": "JTApps", "link": "https://stackoverflow.com/users/1185576/jtapps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 35326203, "answer_count": 2, "score": 0, "last_activity_date": 1455139412, "creation_date": 1455135615, "question_id": 35325107, "link": "https://stackoverflow.com/questions/35325107/possible-to-dismiss-js-alerts-automatically-whenever-an-unhandled-one-appears", "title": "Possible to dismiss JS alerts automatically whenever an unhandled one appears?", "body": "<p>The issue I'm running into is that sometimes JS dialogue behavior is unpredictable within the application being tested. I wish I could say I could do anything about it, but I can't because I am only experiencing this weird behavior with cucumber. Also, it's not of my concern to test the actual dialogue boxes. In other words, we just want to click through and dismiss them whenever they happen.</p>\n\n<pre><code>begin\n    find('div', :text =&gt; 'Cancel').double_click # Click cancel\n    accept_browser_dialog # We've got two dialogue boxes to click through\n    accept_browser_dialog # That makes two.. but what if a third was created?\n    # Wouldn't it be great if I could just dismiss them as they appeared?\nrescue Selenium::WebDriver::Error::UnhandledAlertError # &lt;- SOMETHING LIKE THIS\n    accept_browser_dialog # Handled easy as pie.. in theory\nend # etc etc etc\n</code></pre>\n\n<p>See the line I marked above. Every time I click 'Cancel' there are two dialogues to click through, but sometimes the <code>double_click</code> call likes to bring up a third dialogue box. Rather than playing games with counting dialogues and the like, is there any way to simply dismiss them as they appear whenever an unhandled alert error happens?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "haml"], "owner": {"reputation": 1723, "user_id": 2611440, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/3be437ed81988f3827110923e44cc301?s=128&d=identicon&r=PG", "display_name": "Mdjon26", "link": "https://stackoverflow.com/users/2611440/mdjon26"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 2, "answer_count": 0, "score": 1, "last_activity_date": 1455135532, "creation_date": 1455135532, "question_id": 35325083, "link": "https://stackoverflow.com/questions/35325083/correctly-displaying-currency-format-if-true", "title": "Correctly displaying currency-format if true", "body": "<p>I have the following table<a href=\"https://i.stack.imgur.com/r1LWF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r1LWF.png\" alt=\"enter image description here\"></a></p>\n\n<p></p>\n\n<p>The two options are either \"Flat or percentage\" for Rate Type. If I specify Flat, I want the Institutional and Professional boxes to display it in currency format. I thought I specified Flat in my code, but when I put numbers in the Institional and professional boxes, it still does not display currency-format. Here is my code:</p>\n\n<pre><code>= form_for @payer_contract,:html =&gt; {:id =&gt; \"add-payer-contract-form\"} do |f|\n  %table.table-base.table-striped{:id =&gt; \"case-global-table\"}\n    %thead\n      %tr\n        %th= t('payer.contract.phase')\n        %th= t('payer_contracts.rate_type')\n        %th= t('payer_contracts.institutional')\n        %th= t('payer_contracts.professional')\n        %th\n    %tbody\n      .clone-wrapper\n        - @payer_contract.phase_dates.each.with_index do |pd, index|\n          =fields_for \"phase_dates\",pd do |p|\n            %tr.clone-target{:id =&gt; 'phase-table-row', :name =&gt; 'payer_contract[phase][:i][desc]'}\n              - @phase_name = t('payer_contracts.phase')+ ' ' +(index+1).to_s\n              %td\n                %input.field-input{type: 'text', readonly: 'readonly', placeholder: 'Phase', value: @phase_name}\n              %td\n                = p.select :rate_type, options_for_select(@rate_type, @selected_rate_type), :name=&gt; \"phase_dates[rate_type]-c#{index}\", required: true, :style =&gt; 'width:125px'\n              %td\n                = p.text_field :institutional, :name=&gt; \"phase_dates[institutional]-c#{index}\", class: 'field-input', 'currency-format' =&gt; (@rate_type == 'FLAT')\n              %td\n                = p.text_field :professional, :name=&gt; \"phase_dates[professional]-c#{index}\", class: 'field-input', 'currency-format' =&gt; (@rate_type == 'Flat')\n              %td\n                %button.icon-fallback-text.clone-add{\"aria-label\" =&gt; \"Add\", :type =&gt; \"button\"}\n                  %span.icon-add-square{\"aria-hidden\" =&gt; \"true\"}\n                %button.icon-fallback-text.clone-remove{\"aria-label\" =&gt; \"Remove\", :disabled =&gt; @payer_contract.phase_dates.size &gt; 1 ? false : true, :type =&gt; \"button\"}\n                  %span.icon-remove-square{\"aria-hidden\" =&gt; \"true\"}\n</code></pre>\n\n<p>When I inspect the \"Flat\" box 2 under Rate Type, I find this:</p>\n\n<pre><code>&lt;select id=\"phase_dates_rate_type-c1\" name=\"phase_dates[rate_type]-c1\" u-index=\"1\" aria-invalid=\"false\" class=\"valid\"&gt;&lt;option value=\"\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 131, "user_id": 5900446, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/fabdf3e22aa594f63402b2b8d51efb73?s=128&d=identicon&r=PG&f=1", "display_name": "Jakov", "link": "https://stackoverflow.com/users/5900446/jakov"}, "edited": false, "score": 0, "creation_date": 1455137750, "post_id": 35324808, "comment_id": 58360274, "body": "I changed sign_up method into session[:user_id] = user.id (but i still don&#39;t understand why the previous variant isn&#39;t right) and i put it under @user.save  It works! Thank you for all your advise! )"}], "answers": [{"tags": [], "owner": {"reputation": 4945, "user_id": 1561929, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/42466d208f3eb0adedc4cebdba1970f8?s=128&d=identicon&r=PG", "display_name": "Alex Harris", "link": "https://stackoverflow.com/users/1561929/alex-harris"}, "is_accepted": false, "score": 0, "last_activity_date": 1455138147, "last_edit_date": 1455138147, "creation_date": 1455135972, "answer_id": 35325222, "question_id": 35324808, "link": "https://stackoverflow.com/questions/35324808/problems-with-sign-up-rails/35325222#35325222", "title": "Problems with sign up, rails", "body": "<p>I think the problem might be that until you save the user there is no user.id. If you look at your sessions helper you have sign_up use the following code:</p>\n\n<pre><code>session[:id] = user.id\n</code></pre>\n\n<p>However, until you save the user a few lines further down, there is no user.id. You should be setting the session token once the save is successful. </p>\n\n<p>I would strongly recommend reviewing some standard rails authentication as this is fairly boilerplate stuff. No need to <a href=\"https://www.railstutorial.org/book/modeling_users\" rel=\"nofollow\">reinvent the wheel</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 54, "user_id": 4311690, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YIRVESeG5ns/AAAAAAAAAAI/AAAAAAAAAbY/Pu-ANqEzDlU/photo.jpg?sz=128", "display_name": "Fernando Luengo", "link": "https://stackoverflow.com/users/4311690/fernando-luengo"}, "is_accepted": true, "score": 0, "last_activity_date": 1455136097, "creation_date": 1455136097, "answer_id": 35325257, "question_id": 35324808, "link": "https://stackoverflow.com/questions/35324808/problems-with-sign-up-rails/35325257#35325257", "title": "Problems with sign up, rails", "body": "<p>I think you are creating the session before saving the user, it doesn't have and id yet (its created on save). I think you should try something like:\n....</p>\n\n<pre><code>if @user.save\n  ..do your thing..\n  sign_up @user\nelse\n  .. another thing..\nend\n</code></pre>\n\n<p>...</p>\n"}], "owner": {"reputation": 131, "user_id": 5900446, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/fabdf3e22aa594f63402b2b8d51efb73?s=128&d=identicon&r=PG&f=1", "display_name": "Jakov", "link": "https://stackoverflow.com/users/5900446/jakov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 35325257, "answer_count": 2, "score": 0, "last_activity_date": 1455138900, "creation_date": 1455134618, "last_edit_date": 1455138900, "question_id": 35324808, "link": "https://stackoverflow.com/questions/35324808/problems-with-sign-up-rails", "title": "Problems with sign up, rails", "body": "<p>I have a problem with saving session when doing 'sign up'</p>\n\n<p>'sign up' option makes a new user, it's okay, but I want it to remember the session also. Session works well when 'sign in', but when a new user is created current_user is still empty and I get an error </p>\n\n<blockquote>\n  <p>undefined method `meetings' for nil:NilClass   </p>\n</blockquote>\n\n<pre><code>def month_for_user  \n @meetings = current_user.meetings\nend\n</code></pre>\n\n<p>This is my <strong>sessions_controller</strong></p>\n\n<pre><code>def new\nend\n\ndef create\n  user = User.authenticate(params[:session][:email], params[:session][:password])\n</code></pre>\n\n<p>Do i have to add something here? But can I get my new_user through the User model or is there some another solution?</p>\n\n<pre><code>  if user\n    sign_in user\n    redirect_to user\n  else\n    redirect_to root_url, alert: \"Wrong email or password. Please, try again\"\n  end\nend\n</code></pre>\n\n<p><strong>user.rb</strong> </p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :meetings\n\n  def self.authenticate (email, password)\n    user = find_by_email(email)\n    return user if user != nil &amp;&amp; password == user.password\n    return nil\n  end\nend\n</code></pre>\n\n<p><strong>sessions_helper</strong></p>\n\n<pre><code>def sign_up(user)\n  session[:id] = user.id\n  self.current_user = user\nend\n\ndef sign_in(user)\n  session[:user_id] = user.id\n  self.current_user = user\nend\n\ndef current_user=(user)\n  @current_user = user\nend\n\ndef current_user\n  @current_user ||= User.find(session[:user_id]) if session[:user_id]\nend\n\ndef signed_in?\n  !current_user.nil?\nend\n\ndef sign_out\n  session[:user_id] = nil\n  self.current_user = nil\n\nend\n\ndef current_user?(user)\n  user == current_user\nend\n</code></pre>\n\n<p>I need to show all the meetings that belong to registered user (current_user)\nand this is my <strong>calendar_controller</strong> which works well when I do 'sign in', but not 'sign_up', because current_user is still empty. </p>\n\n<pre><code>def month_for_user\n  @meetings = current_user.meetings\nend\n</code></pre>\n\n<p>I don't know how to tell sessions_controller to make new_user into a current_user. I tried to change <strong>users_controller</strong> :</p>\n\n<pre><code>def create\n    @user = User.new(user_params)\n\n    sign_up @user #THAT WAS WHAT I ADDED BUT IT DIDN'T HELP\n\n    respond_to do |format|\n      if @user.save\n\n        format.html { redirect_to @user, notice: 'Profile was successfully created.' }\n        format.json { render :show, status: :created, location: @user }\n      else\n        format.html { render :new }\n        format.json { render json: @user.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n</code></pre>\n\n<p>I suggest that the problem occurs because I use sessions_helper and get current_user from the User model, which prevents me from getting a new_user. Can I get a new_user from a User model somehow? Or do I have to change all the logic itself? Please, give me any idea of how and where to make new_user into a current_user. \nSorry for a lot of code, but I tried to explain as much as possible to make it easier for understanding.\nThank you! </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise", "model-associations"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1455134120, "post_id": 35324535, "comment_id": 58358204, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/16297797/add-custom-field-column-to-devise-with-rails-4\">Add Custom Field/Column to Devise with Rails 4</a>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1455134223, "post_id": 35324535, "comment_id": 58358269, "body": "You need to need to override the devise strong parameters method so that the your extra parameters are allowed for mass assignment. See the question above."}, {"owner": {"reputation": 11, "user_id": 3125946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3n4Ns.png?s=128&g=1", "display_name": "Uncle Alex", "link": "https://stackoverflow.com/users/3125946/uncle-alex"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1455134976, "post_id": 35324535, "comment_id": 58358715, "body": "@max you just saved my night and my dreams! Thank you SO much!"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 3125946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3n4Ns.png?s=128&g=1", "display_name": "Uncle Alex", "link": "https://stackoverflow.com/users/3125946/uncle-alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1455135371, "creation_date": 1455135371, "answer_id": 35325030, "question_id": 35324535, "link": "https://stackoverflow.com/questions/35324535/ruby-on-rails-cant-save-profile-model-associated-with-devise-user/35325030#35325030", "title": "Ruby on rails: can&#39;t save profile model associated with Devise user", "body": "<p>Solved! Just override Devise permitted_parameters in ApplicationController like this:</p>\n\n<pre><code>before_action :configure_devise_permitted_parameters, if: :devise_controller?\n\n  protected\ndef configure_devise_permitted_parameters\n    registration_params = [:email, :password, :password_confirmation, profile_attributes: [:username, :address, :pin]]\n\n    if params[:action] == 'update'\n      devise_parameter_sanitizer.for(:account_update) {\n          |u| u.permit(registration_params &lt;&lt; :current_password)\n      }\n    elsif params[:action] == 'create'\n      devise_parameter_sanitizer.for(:sign_up) {\n          |u| u.permit(registration_params)\n      }\n    end\n  end \n</code></pre>\n\n<p>Thanks @max for answer. </p>\n"}], "owner": {"reputation": 11, "user_id": 3125946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3n4Ns.png?s=128&g=1", "display_name": "Uncle Alex", "link": "https://stackoverflow.com/users/3125946/uncle-alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 283, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1455135371, "creation_date": 1455133606, "last_edit_date": 1455135217, "question_id": 35324535, "link": "https://stackoverflow.com/questions/35324535/ruby-on-rails-cant-save-profile-model-associated-with-devise-user", "title": "Ruby on rails: can&#39;t save profile model associated with Devise user", "body": "<p>I have Devise <code>user</code> model and associated <code>profile</code> model. Here it is:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n  has_one :profile, autosave: true\n  accepts_nested_attributes_for :profile\n  before_create :build_profile\nend\n</code></pre>\n\n<p>Profile model:</p>\n\n<pre><code>class Profile &lt; ActiveRecord::Base\n  belongs_to :user\nend\n</code></pre>\n\n<p>Next, I include profile fields in default Devise view:</p>\n\n<pre><code>&lt;h2&gt;Edit &lt;%= resource_name.to_s.humanize %&gt;&lt;/h2&gt;\n\n&lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %&gt;\n  &lt;%= devise_error_messages! %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :email %&gt;&lt;br /&gt;\n    &lt;%= f.email_field :email, autofocus: true %&gt;\n  &lt;/div&gt;\n\n  &lt;% if devise_mapping.confirmable? &amp;&amp; resource.pending_reconfirmation? %&gt;\n    &lt;div&gt;Currently waiting confirmation for: &lt;%= resource.unconfirmed_email %&gt;&lt;/div&gt;\n  &lt;% end %&gt;\n\n    &lt;%= f.fields_for :profile do |profile_form| %&gt;\n\n        &lt;div class=\"field\"&gt;\n          &lt;%= profile_form.label :username %&gt;&lt;br /&gt;\n          &lt;%= profile_form.text_field :username %&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"field\"&gt;\n          &lt;%= profile_form.label :address %&gt;&lt;br /&gt;\n          &lt;%= profile_form.text_field :address %&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"field\"&gt;\n          &lt;%= profile_form.label :pin %&gt;&lt;br /&gt;\n          &lt;%= profile_form.text_field :pin %&gt;\n        &lt;/div&gt;\n    &lt;% end %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :password %&gt; &lt;i&gt;(leave blank if you don't want to change it)&lt;/i&gt;&lt;br /&gt;\n    &lt;%= f.password_field :password, autocomplete: \"off\" %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :password_confirmation %&gt;&lt;br /&gt;\n    &lt;%= f.password_field :password_confirmation, autocomplete: \"off\" %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :current_password %&gt; &lt;i&gt;(we need your current password to confirm your changes)&lt;/i&gt;&lt;br /&gt;\n    &lt;%= f.password_field :current_password, autocomplete: \"off\" %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit \"Update\" %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n\n&lt;h3&gt;Cancel my account&lt;/h3&gt;\n\n&lt;p&gt;Unhappy? &lt;%= button_to \"Cancel my account\", registration_path(resource_name), data: { confirm: \"Are you sure?\" }, method: :delete %&gt;&lt;/p&gt;\n\n&lt;%= link_to \"Back\", :back %&gt;\n</code></pre>\n\n<p>Now, when I update form, Devise field is updated, but profile fields - not. If I trying to update profile thru rails console, everything works just great. </p>\n\n<pre><code>u = User.find_by(id: 2)\nu.profile.pin = 123\nu.save\n</code></pre>\n"}, {"tags": ["ruby", "command-line", "notepad++"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1455133533, "post_id": 35324397, "comment_id": 58357849, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Don&#39;t use a link to show the error; Instead, copy/paste the error into your question where we can easily copy it and use it for searches if necessary. What have you tried? Why didn&#39;t those work?"}, {"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1455226213, "post_id": 35324397, "comment_id": 58408119, "body": "Can you paste the contents of your <code>cmpe131hw1.rb</code>.  It looks like a file that it is looking for on the first line does not exist."}, {"owner": {"reputation": 11, "user_id": 5910155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b299f5b3cedd20c3a6d665acaa03baf4?s=128&d=identicon&r=PG&f=1", "display_name": "maxdonlucas", "link": "https://stackoverflow.com/users/5910155/maxdonlucas"}, "edited": false, "score": 0, "creation_date": 1455232628, "post_id": 35324397, "comment_id": 58411190, "body": "You were right! I was wondering why I was getting an error that, when searching online, was taking me to people with file reading problems. What happened was that the very first thing in my code was reading a file which was not located in the desktop. Then my program would stop there or something."}], "answers": [{"comments": [{"owner": {"reputation": 12629, "user_id": 546871, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/p1diY.jpg?s=128&g=1", "display_name": "AdrianHHH", "link": "https://stackoverflow.com/users/546871/adrianhhh"}, "edited": false, "score": 1, "creation_date": 1455183443, "post_id": 35325475, "comment_id": 58378662, "body": "This is not an answer. This should have been written as a comment on the question. You have a reputation of over 50 so you can add comments."}], "tags": [], "owner": {"reputation": 4945, "user_id": 1561929, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/42466d208f3eb0adedc4cebdba1970f8?s=128&d=identicon&r=PG", "display_name": "Alex Harris", "link": "https://stackoverflow.com/users/1561929/alex-harris"}, "is_accepted": true, "score": 0, "last_activity_date": 1455136873, "creation_date": 1455136873, "answer_id": 35325475, "question_id": 35324397, "link": "https://stackoverflow.com/questions/35324397/how-can-i-use-my-command-line-as-an-output-for-my-ruby-program-on-notepad/35325475#35325475", "title": "How can I use my command line as an output for my ruby program on notepad++", "body": "<p>The program is running in the command line. The problem is the code within the file. It is having trouble finding/reading the csv file you are asking it to open. Maybe you can add the contents of the rb file to this question?</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5910155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b299f5b3cedd20c3a6d665acaa03baf4?s=128&d=identicon&r=PG&f=1", "display_name": "maxdonlucas", "link": "https://stackoverflow.com/users/5910155/maxdonlucas"}, "is_accepted": false, "score": 0, "last_activity_date": 1455226051, "creation_date": 1455226051, "answer_id": 35350387, "question_id": 35324397, "link": "https://stackoverflow.com/questions/35324397/how-can-i-use-my-command-line-as-an-output-for-my-ruby-program-on-notepad/35350387#35350387", "title": "How can I use my command line as an output for my ruby program on notepad++", "body": "<p>After attempting all sorts of different approaches from the command line, the problem was in fact coming from the program file I was trying to run. I opened a new .rb file and ran a simple</p>\n\n<pre><code>puts \"Hello World\"\n</code></pre>\n\n<p>and was able to get an output through the method shown in the video link. I should have done this from the start, but I was frantically trying to see if my programming homework would output correctly.</p>\n"}], "owner": {"reputation": 11, "user_id": 5910155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b299f5b3cedd20c3a6d665acaa03baf4?s=128&d=identicon&r=PG&f=1", "display_name": "maxdonlucas", "link": "https://stackoverflow.com/users/5910155/maxdonlucas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 35325475, "answer_count": 2, "score": -2, "last_activity_date": 1455226051, "creation_date": 1455133091, "last_edit_date": 1455224812, "question_id": 35324397, "link": "https://stackoverflow.com/questions/35324397/how-can-i-use-my-command-line-as-an-output-for-my-ruby-program-on-notepad", "title": "How can I use my command line as an output for my ruby program on notepad++", "body": "<p>How can I use my command line as an output for my ruby program on notepad++?</p>\n\n<p>I have tried following multiple tutorials, the most straight forward being: <a href=\"https://www.youtube.com/watch?v=s9hrI9ve9ng\" rel=\"nofollow\">https://www.youtube.com/watch?v=s9hrI9ve9ng</a></p>\n\n<p>Whenever I try, however, I receive this error on the command line:</p>\n\n<pre><code>cmpe131hw1.rb:1:in `initialize': No such file or directory @ rb_sysopen - widgets.csv (Errno::ENOENT)\n</code></pre>\n\n<p><a href=\"http://i.stack.imgur.com/l4vKq.png\" rel=\"nofollow\">(The notepad++ file is on my desktop)</a></p>\n\n<p>I have looked up the error but my searches always take me to people discussing how to read in a text file in ruby from the command line. I have been able to program directly from the command line, including reading files, so their threads do not directly match what my problem is.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 1, "creation_date": 1455132907, "post_id": 35324288, "comment_id": 58357442, "body": "Yes -- but the change has to be made in the definition of the method (by adding an <code>*args</code> and ignoring its values)."}], "answers": [{"tags": [], "owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "is_accepted": false, "score": 1, "last_activity_date": 1455133054, "creation_date": 1455133054, "answer_id": 35324385, "question_id": 35324288, "link": "https://stackoverflow.com/questions/35324288/how-to-ignore-extra-arguments-in-ruby/35324385#35324385", "title": "How to ignore extra arguments in ruby", "body": "<pre><code>def zoo(*args)\n  puts args.inspect\nend\n</code></pre>\n\n<p>you can check the number of args and accept or reject the call based on what your expectations are.</p>\n\n<pre><code>irb(main):001:0&gt; def zoo(*args)\nirb(main):002:1&gt; puts args.inspect\nirb(main):003:1&gt; end\n=&gt; nil\nirb(main):004:0&gt; zoo\n[]\n=&gt; nil\nirb(main):005:0&gt; zoo 1\n[1]\n=&gt; nil\nirb(main):006:0&gt; zoo 1,2,3,4,5\n[1, 2, 3, 4, 5]\n</code></pre>\n\n<p>Also take a look at:\n<a href=\"http://ruby-doc.org/core-2.2.0/Method.html#method-i-arity\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.0/Method.html#method-i-arity</a> and \n<a href=\"http://ruby-doc.org/core-2.2.0/Method.html#method-i-curry\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.0/Method.html#method-i-curry</a></p>\n\n<p>In case you don't control the code directly: You could write a wrapper that checks the arrity and dispatches the correct number of args or if you're feeling lucky you can try to monkey patch the method to support this behavior. </p>\n"}], "owner": {"reputation": 317, "user_id": 3749989, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/515934601/picture?type=large", "display_name": "joanx737", "link": "https://stackoverflow.com/users/3749989/joanx737"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1202, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1455133054, "creation_date": 1455132759, "question_id": 35324288, "link": "https://stackoverflow.com/questions/35324288/how-to-ignore-extra-arguments-in-ruby", "title": "How to ignore extra arguments in ruby", "body": "<p>I'm writing a script that passes in several arguments to a set of pg queries. Some of these queries take 2 date arguments, and some only take 1. I'm wondering if there's a way for the query to ignore any 'extra' date arguments that are passed to it.</p>\n\n<p>E.g. this command runs for every query in DailyQueries:</p>\n\n<pre><code>DailyQueries.send(query_name, conn, date_1, date_2)\n</code></pre>\n\n<p>I have some queries that are structured as such:</p>\n\n<pre><code>DailyQueries.tot_students(conn, date)\n</code></pre>\n\n<p>While others as:</p>\n\n<pre><code>DailyQueries.fact_practice_tot_sessions(conn, start_date, end_date)\n</code></pre>\n\n<p>And would ideally the former to run even if it's getting 2 date arguments passed in. Right now I'm getting this error:</p>\n\n<pre><code>wrong number of arguments (3 for 2) (ArgumentError)\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1455132480, "post_id": 35323816, "comment_id": 58357141, "body": "Hashes maintain their insertion order, but, unless you&#39;re doing something to put them in a certain order as they&#39;re added it&#39;d be bad/dangerous to assume that <code>:bar</code> is in a certain position. This really sounds like an <a href=\"http://meta.stackexchange.com/q/66377/153968\">XY Problem</a>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1471760116, "post_id": 35323816, "comment_id": 65472007, "body": "I added a second method to my answer."}], "answers": [{"comments": [{"owner": {"reputation": 1035, "user_id": 1766316, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c8d844857746e6dc08ffd2ed8a1039f1?s=128&d=identicon&r=PG", "display_name": "Siper", "link": "https://stackoverflow.com/users/1766316/siper"}, "edited": false, "score": 0, "creation_date": 1455131952, "post_id": 35323945, "comment_id": 58356798, "body": "Hmm, I understand. Do you have better solution to store elements with ordering? With selecting element by symbol"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1455132616, "post_id": 35323945, "comment_id": 58357242, "body": "Don&#39;t use a hash first. Use a structure that honors an order you define, perhaps an array. You can do that by ordering the key/value pairs before you insert them into the hash, but at that point there&#39;d be no reason to delete them from the hash, just delete them first then create the hash. I think you need to think about the problem more as it seems like an XY Problem."}, {"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "reply_to_user": {"reputation": 1035, "user_id": 1766316, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c8d844857746e6dc08ffd2ed8a1039f1?s=128&d=identicon&r=PG", "display_name": "Siper", "link": "https://stackoverflow.com/users/1766316/siper"}, "edited": false, "score": 0, "creation_date": 1455139470, "post_id": 35323945, "comment_id": 58361204, "body": "In case you&#39;re not familiar with the term, @Siper: <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">XY Problem</a>"}], "tags": [], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "is_accepted": false, "score": 4, "last_activity_date": 1455164407, "last_edit_date": 1455164407, "creation_date": 1455131604, "answer_id": 35323945, "question_id": 35323816, "link": "https://stackoverflow.com/questions/35323816/ruby-remove-items-before-key-in-hash/35323945#35323945", "title": "Ruby - Remove items before key in hash", "body": "<p>Ruby Hashes are not really designed to be treated as ordered collections, so this isn't as straightforward as you might expect.  But they do maintain key insertion order, at least since Ruby 1.9, so it's possible.</p>\n\n<p>Here's one way; there are probably better ones:</p>\n\n<pre><code>hash.delete(*hash.keys.each_with_index.find do |k, n| \n  n &lt; hash.keys.each_with_index.select{|k,n| k==:bar}[1]\nend.map(&amp;:first))\n</code></pre>\n\n<p>First, we ask the hash for its keys with <code>.keys</code>, which returns an Array. Then we call <code>each_with_index</code> on that Array to associate each item with a numerical index, so now we are iterating over pairs of (key, index).  We search with <code>.find</code> for the key we want ( <code>k == :bar</code> ) and grab just its index number with <code>[1]</code>.  </p>\n\n<p>Then we start over and search the same list of (key, index) pairs with <code>.select</code> for all the keys whose index is <em>less</em> than the index of <code>:bar</code>.  This time we want the keys, not the indexes, so we call <code>.first</code> on each of those pairs by <code>map</code>ping across them.  </p>\n\n<p>That gives use the array of keys we want to delete; we use the <code>*</code> operator to turn them into a list of arguments and pass them to <code>.delete</code> on the Hash to actually remove them.</p>\n"}, {"comments": [{"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 1, "creation_date": 1455132019, "post_id": 35324060, "comment_id": 58356847, "body": "That&#39;s much better than my clunky solution.  Note that you need Ruby 2 for <code>Array#to_h</code>.  In older Ruby&#39;s you can use <code>Hash[* array expression here ]</code>."}, {"owner": {"reputation": 1035, "user_id": 1766316, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c8d844857746e6dc08ffd2ed8a1039f1?s=128&d=identicon&r=PG", "display_name": "Siper", "link": "https://stackoverflow.com/users/1766316/siper"}, "edited": false, "score": 1, "creation_date": 1455132138, "post_id": 35324060, "comment_id": 58356915, "body": "<code>.&#47;app.rb:65:in block (2 levels) in &lt;main&gt;&#39;: undefined method to_h&#39; for #&lt;Array:0x00000001fa1cd8&gt; (NoMethodError)</code> :("}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1455132495, "post_id": 35324060, "comment_id": 58357157, "body": "Thanks @MarkReed for the inputs"}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 3, "last_activity_date": 1455132409, "last_edit_date": 1455132409, "creation_date": 1455131993, "answer_id": 35324060, "question_id": 35323816, "link": "https://stackoverflow.com/questions/35323816/ruby-remove-items-before-key-in-hash/35324060#35324060", "title": "Ruby - Remove items before key in hash", "body": "<p>Here is one way to do this:</p>\n\n<pre><code>hash.to_a.drop_while { |k, _| k != :bar }.to_h\n</code></pre>\n\n<hr>\n\n<p>As Mark pointed, In older version of Ruby</p>\n\n<pre><code>Hash[*hash.to_a.drop_while { |k, _| k != :bar }]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1455164650, "post_id": 35328503, "comment_id": 58369608, "body": "Using <code>? true : false</code> is a no-op; you can just <code>select</code> on <code>{ |k,_| k==key..nil }</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1455164925, "post_id": 35328503, "comment_id": 58369681, "body": "@MarkReed, alas, that won&#39;t work, as it&#39;s not a flip-flop operator. It just compares <code>k</code> with the range <code>key..nil</code>. The flip-flop only works in a conditional statement."}, {"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1455165060, "post_id": 35328503, "comment_id": 58369722, "body": "... ah, right. Sometimes I really appreciate Ruby&#39;s Perlish roots.  This is not one of those times.  :)"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1455192473, "post_id": 35328503, "comment_id": 58385071, "body": "You won&#39;t rest until every one learns flip-flop operator-eh! It&#39;s a good one, did not know about it - the linked article is very nice."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1455249032, "post_id": 35328503, "comment_id": 58415847, "body": "@Wand, I found a third recent question where it can be used! I&#39;m becoming quite fond of it."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1471760073, "last_edit_date": 1471760073, "creation_date": 1455149491, "answer_id": 35328503, "question_id": 35323816, "link": "https://stackoverflow.com/questions/35323816/ruby-remove-items-before-key-in-hash/35328503#35328503", "title": "Ruby - Remove items before key in hash", "body": "<p>You could use Ruby's little-used <a href=\"http://nithinbekal.com/posts/ruby-flip-flop\" rel=\"nofollow\">flip-flop operator</a>.</p>\n\n<pre><code>hash = {\n  :foo =&gt; {\"name\" =&gt; \"foo\"},\n  :bar =&gt; {\"name\" =&gt; \"bar\"},\n  :baz =&gt; {\"name\" =&gt; \"baz\"},\n  :qux =&gt; {\"name\" =&gt; \"qux\"}\n}\n\nkey = :baz\n\nhash.select { |k,_| k==key..nil ? true : false }\n  #=&gt; {:baz=&gt;{\"name\"=&gt;\"baz\"}, :qux=&gt;{\"name\"=&gt;\"qux\"}} \n</code></pre>\n\n<p>A second way is as follows.</p>\n\n<pre><code>ndx = hash.keys.index(key)\n  #=&gt; 2\narr = [*[false]*ndx, *[true]*(hash.size-ndx)]\n  #=&gt; [false, false, true, true] \nhash.select { arr.shift }\n  #=&gt; {:baz=&gt;{\"name\"=&gt;\"baz\"}, :qux=&gt;{\"name\"=&gt;\"qux\"}}\n</code></pre>\n"}], "owner": {"reputation": 1035, "user_id": 1766316, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c8d844857746e6dc08ffd2ed8a1039f1?s=128&d=identicon&r=PG", "display_name": "Siper", "link": "https://stackoverflow.com/users/1766316/siper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 35324060, "answer_count": 3, "score": 0, "last_activity_date": 1471760073, "creation_date": 1455131171, "question_id": 35323816, "link": "https://stackoverflow.com/questions/35323816/ruby-remove-items-before-key-in-hash", "title": "Ruby - Remove items before key in hash", "body": "<p>It's possible to remove items in hash before defined key? For example:</p>\n\n<pre><code>hash = {\n  :foo =&gt; {\"name\" =&gt; \"foo\"},\n  :bar =&gt; {\"name\" =&gt; \"bar\"},\n  :baz =&gt; {\"name\" =&gt; \"baz\"}\n}\n# ToDo: remove items before :bar\nresult = {\n  :bar =&gt; {\"name\" =&gt; \"bar\"},\n  :baz =&gt; {\"name\" =&gt; \"baz\"}\n}\n</code></pre>\n\n<p>How can I do that?</p>\n"}, {"tags": ["ruby", "pry"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1455131567, "post_id": 35323710, "comment_id": 58356540, "body": "What <i>did</i> you try? What was the result of trying?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1455150704, "post_id": 35323710, "comment_id": 58365820, "body": "The usual way is just to add <code>puts</code> statements. For example, insert the line <code>puts &quot;i = #{i}&quot;</code> after <code>for i in (0..s.length)</code> and <code>&quot;puts &quot;  j = #{j}&quot;</code> after <code>for j in (i..s.length)</code>. (Note that I indented the latter <code>puts</code> a couple of spaces to make it easier to read.)..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1455150714, "post_id": 35323710, "comment_id": 58365823, "body": "... <a href=\"http://ruby-doc.org/core-2.2.3/Object.html#method-i-tap\" rel=\"nofollow noreferrer\">Object#tap</a> can be handy as well. For example, suppose you had <code>arr.group_by.with_index {...}</code> and wished to examine the elements of the enumerator <code>arr.group_by</code>. You could do that as follows: <code>arr.group_by.tap { |enum| puts &quot;arr.group_by.to_a = #{enum.to_a}&quot; }.with index {...}</code>. This works because tap returns its receiver and I&#39;ve not altered the receiver in <code>tap</code>&#39;s block."}], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 1, "last_activity_date": 1455131904, "last_edit_date": 1455131904, "creation_date": 1455131493, "answer_id": 35323913, "question_id": 35323710, "link": "https://stackoverflow.com/questions/35323710/how-to-step-through-a-loop-with-pry-and-view-the-value-of-an-iterator/35323913#35323913", "title": "How to step through a loop with pry and view the value of an iterator?", "body": "<p>You can type <code>p i</code> and <code>p j</code> to manually inspect them.</p>\n\n<p>That'd make me crazy though, so I'd insert <code>puts i</code> and <code>puts j</code> temporarily.</p>\n\n<p>Don't use <code>for</code> loops with Ruby. Instead we use <code>each</code> or <code>upto</code>, <code>downto</code> or <code>times</code>, depending on our purpose. Also, explicit <code>return</code> statements aren't needed at the end of a method unless you are forcing the code to exit early.</p>\n\n<p>I'd write your code something like:</p>\n\n<pre><code>require 'pry'\n\ndef longest_palindrome(s)\n  max_palindrome_len = 0\n\n  s.length.times do |i|\n    binding.pry\n    i.upto(s.length) do |j|\n      binding.pry\n      substr = s[i..j]\n      if substr == substr.reverse &amp;&amp; substr.length &gt; max_palindrome_len\n        max_palindrome_len = substr.length\n      end\n    end\n  end\n\n  max_palindrome_len\nend\n\nlongest_palindrome \"racer\"\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 5411828, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/56e1b68885086383a9880a6789fccda5?s=128&d=identicon&r=PG&f=1", "display_name": "j doe", "link": "https://stackoverflow.com/users/5411828/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 1, "accepted_answer_id": 35323913, "answer_count": 1, "score": 1, "last_activity_date": 1455131904, "creation_date": 1455130857, "last_edit_date": 1455131304, "question_id": 35323710, "link": "https://stackoverflow.com/questions/35323710/how-to-step-through-a-loop-with-pry-and-view-the-value-of-an-iterator", "title": "How to step through a loop with pry and view the value of an iterator?", "body": "<p>I inserted <code>binding.pry</code> into my Ruby program and am trying to view the value of an iterator at each iteration of my loop:</p>\n\n<pre><code>require 'pry'\n\ndef longest_palindrome s\n  max_palindrome_len = 0\n  for i in (0..s.length)\n    binding.pry\n    for j in (i..s.length)\n      binding.pry\n      substr = s[i..j]\n      if substr == substr.reverse &amp;&amp; substr.length &gt; max_palindrome_len\n        max_palindrome_len = substr.length\n      end\n    end\n  end\n  return max_palindrome_len\nend\n\nlongest_palindrome \"racer\"\n</code></pre>\n\n<p>I want to view the values for <code>i</code> and <code>j</code> at each iteration in the loop.</p>\n\n<p>I'm sure I'm just missing something here, but I haven't been able to figure out what to do from the documentation. </p>\n"}, {"tags": ["ruby", "openshift", "openshift-client-tools", "openshift-cartridge"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2879327"}, "edited": false, "score": 0, "creation_date": 1455131397, "post_id": 35323474, "comment_id": 58356425, "body": "can you verify what versions of ruby and rhc you are running?  ruby -v, and rhc --version"}, {"owner": {"reputation": 189, "user_id": 2981570, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1332346437/picture?type=large", "display_name": "George Kouzmov", "link": "https://stackoverflow.com/users/2981570/george-kouzmov"}, "edited": false, "score": 0, "creation_date": 1455131535, "post_id": 35323474, "comment_id": 58356513, "body": "ruby 1.9.3p551 (2014-11-13) [i386-mingw32] rhc 1.38.4"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2879327"}, "edited": false, "score": 0, "creation_date": 1455140370, "post_id": 35323474, "comment_id": 58361718, "body": "Hmm, i got a different error, i tried with 1.9.3 and got a 504 error (which is weird), then i tried with 2.1 and basically the cartridge failed to install/start due to some path issues with the cartridge.  Can you try a newer version of ruby like 2.0?"}, {"owner": {"reputation": 189, "user_id": 2981570, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1332346437/picture?type=large", "display_name": "George Kouzmov", "link": "https://stackoverflow.com/users/2981570/george-kouzmov"}, "edited": false, "score": 0, "creation_date": 1455142389, "post_id": 35323474, "comment_id": 58362655, "body": "I had the 504 after a retry it fixed. Tried with 2.3 ruby however I was getting another error which was fixed by switching to 1.9 the recommended version."}, {"owner": {"reputation": 189, "user_id": 2981570, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1332346437/picture?type=large", "display_name": "George Kouzmov", "link": "https://stackoverflow.com/users/2981570/george-kouzmov"}, "edited": false, "score": 0, "creation_date": 1455183758, "post_id": 35323474, "comment_id": 58378870, "body": "Tried with Ruby 2.0 and I got the same error."}], "owner": {"reputation": 189, "user_id": 2981570, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1332346437/picture?type=large", "display_name": "George Kouzmov", "link": "https://stackoverflow.com/users/2981570/george-kouzmov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1455130113, "creation_date": 1455130113, "question_id": 35323474, "link": "https://stackoverflow.com/questions/35323474/ruby-fails-after-installing-custom-cartridge-for-openshift", "title": "Ruby fails after installing custom cartridge for OpenShift", "body": "<p>So I am trying to install a custom cartridge that has python3.5 <a href=\"https://github.com/Praisebetoscience/openshift-cartridge-python-3.5\" rel=\"nofollow\">https://github.com/Praisebetoscience/openshift-cartridge-python-3.5</a></p>\n\n<p>The command I'm running is:</p>\n\n<pre><code>rhc app create bot nodejs-0.10 http://cartreflect-claytondev.rhcloud.com/github/Praisebetoscience/openshift-cartridge-python-3.5\n</code></pre>\n\n<p>However after instalation of the cartridge completes ruby crashes with a strange error. I'm not really familiar with ruby and I'm not sure why this is coming from core library. Do you know what is causing that?</p>\n\n<pre><code>C:/Ruby193/lib/ruby/1.9.1/erb.rb:838:in `eval': (erb):1: syntax error, unexpecte\nd tCONSTANT, expecting keyword_do or '{' or '(' (SyntaxError)\n...    % Received % Xferd  Average Speed   Time    Time     Tim...\n...                               ^\n        from C:/Ruby193/lib/ruby/1.9.1/erb.rb:838:in `result'\n        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rhc-1.38.4/lib/rhc/highline_ext\nensions.rb:48:in `say'\n        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rhc-1.38.4/lib/rhc/helpers.rb:3\n21:in `error'\n        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rhc-1.38.4/lib/rhc/command_runn\ner.rb:96:in `rescue in run!'\n        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rhc-1.38.4/lib/rhc/command_runn\ner.rb:71:in `run!'\n        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/commander-4.2.1/lib/commander/d\nelegates.rb:12:in `run!'\n        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rhc-1.38.4/lib/rhc/cli.rb:37:in\n `start'\n        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rhc-1.38.4/bin/rhc:20:in `&lt;top\n(required)&gt;'\n        from C:/Ruby193/bin/rhc:23:in `load'\n        from C:/Ruby193/bin/rhc:23:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "routing"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1455129562, "post_id": 35323281, "comment_id": 58355298, "body": "<code>upvote</code> is not an action defined by default. You&#39;ll need to declare it manually, or use <code>create</code> instead."}, {"owner": {"reputation": 413, "user_id": 5149471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Sqr06HaqS7s/AAAAAAAAAAI/AAAAAAAAABc/0GICbgbAH0A/photo.jpg?sz=128", "display_name": "Akash Pinnaka", "link": "https://stackoverflow.com/users/5149471/akash-pinnaka"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1455129605, "post_id": 35323281, "comment_id": 58355328, "body": "I am not using acts_as_votable. I generated Vote model with :upvote and :downvote columns"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1455129645, "post_id": 35323281, "comment_id": 58355357, "body": "I&#39;m not sure how that&#39;s relevant. <code>resources</code> declares the usual REST actions, and <code>upvote</code> is not one of them."}, {"owner": {"reputation": 413, "user_id": 5149471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Sqr06HaqS7s/AAAAAAAAAAI/AAAAAAAAABc/0GICbgbAH0A/photo.jpg?sz=128", "display_name": "Akash Pinnaka", "link": "https://stackoverflow.com/users/5149471/akash-pinnaka"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1455129749, "post_id": 35323281, "comment_id": 58355427, "body": "how can I use the url in the link to trigger upvote action? Thanks :)"}], "answers": [{"comments": [{"owner": {"reputation": 211, "user_id": 1561180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef348659b7db053813f42cc79abdd64?s=128&d=identicon&r=PG", "display_name": "Doru P&#238;rvu", "link": "https://stackoverflow.com/users/1561180/doru-p%c3%aervu"}, "edited": false, "score": 1, "creation_date": 1455129876, "post_id": 35323342, "comment_id": 58355493, "body": "I now realized that you don&#39;t define the routes for custom actions."}, {"owner": {"reputation": 211, "user_id": 1561180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef348659b7db053813f42cc79abdd64?s=128&d=identicon&r=PG", "display_name": "Doru P&#238;rvu", "link": "https://stackoverflow.com/users/1561180/doru-p%c3%aervu"}, "edited": false, "score": 0, "creation_date": 1455130010, "post_id": 35323342, "comment_id": 58355591, "body": "That is because you don&#39;t pass any params when defining link. Updating answer"}, {"owner": {"reputation": 413, "user_id": 5149471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Sqr06HaqS7s/AAAAAAAAAAI/AAAAAAAAABc/0GICbgbAH0A/photo.jpg?sz=128", "display_name": "Akash Pinnaka", "link": "https://stackoverflow.com/users/5149471/akash-pinnaka"}, "edited": false, "score": 0, "creation_date": 1455130115, "post_id": 35323342, "comment_id": 58355659, "body": "oh thanks I am able to see the route names by following your format. And can I pass parameters through link?"}, {"owner": {"reputation": 413, "user_id": 5149471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Sqr06HaqS7s/AAAAAAAAAAI/AAAAAAAAABc/0GICbgbAH0A/photo.jpg?sz=128", "display_name": "Akash Pinnaka", "link": "https://stackoverflow.com/users/5149471/akash-pinnaka"}, "reply_to_user": {"reputation": 211, "user_id": 1561180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef348659b7db053813f42cc79abdd64?s=128&d=identicon&r=PG", "display_name": "Doru P&#238;rvu", "link": "https://stackoverflow.com/users/1561180/doru-p%c3%aervu"}, "edited": false, "score": 0, "creation_date": 1455130135, "post_id": 35323342, "comment_id": 58355676, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/103133/discussion-between-akash-pinnaka-and-doru-pirvu\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 211, "user_id": 1561180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef348659b7db053813f42cc79abdd64?s=128&d=identicon&r=PG", "display_name": "Doru P&#238;rvu", "link": "https://stackoverflow.com/users/1561180/doru-p%c3%aervu"}, "is_accepted": false, "score": 2, "last_activity_date": 1455137346, "last_edit_date": 1455137346, "creation_date": 1455129637, "answer_id": 35323342, "question_id": 35323281, "link": "https://stackoverflow.com/questions/35323281/clicking-on-the-link-is-not-triggering-the-action/35323342#35323342", "title": "Clicking on the link is not triggering the action", "body": "<p>Your \"votes_controller.rb\" has defined MoviesController. Is it a typo ?</p>\n\n<p>Also you need to define your custom resource routes. See <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow\">http://guides.rubyonrails.org/routing.html</a> for more about routing in rails</p>\n\n<p>I would also suggest you create a Vote model use </p>\n\n<pre><code>resources :votes\n</code></pre>\n\n<p>Vote model will have:\nid: int\ntype: string\nmovie_id: int</p>\n\n<p>And in view:</p>\n\n<pre><code>link_to 'Upvote', vote_path(movie_id: movie.id, type: 'up'), method: post\nlink_to 'Downvote', vote_path(movie_id: 42, type: 'down'), method: post\n</code></pre>\n\n<p>I am maybe mistaking the auto-generated path methods; to see all available routes from your app, open a terminal, navigate to your rails root folder and run:\n     rake routes</p>\n\n<p>All is explained in the link above</p>\n"}, {"tags": [], "owner": {"reputation": 3020, "user_id": 4453584, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25188d50654874d1125dd754d783851b?s=128&d=identicon&r=PG&f=1", "display_name": "guitarman", "link": "https://stackoverflow.com/users/4453584/guitarman"}, "is_accepted": true, "score": 1, "last_activity_date": 1455132119, "last_edit_date": 1455132119, "creation_date": 1455130835, "answer_id": 35323693, "question_id": 35323281, "link": "https://stackoverflow.com/questions/35323281/clicking-on-the-link-is-not-triggering-the-action/35323693#35323693", "title": "Clicking on the link is not triggering the action", "body": "<p>I suggest to use a resource definition for movies only and in addition two routes for upvote and downvote a movie:</p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :votes do\n    member do\n      get 'upvote'\n      get 'downvote'\n    end\n  end\nend\n</code></pre>\n\n<p>If you run <code>rake routes</code> now you get a nice list of routes to manage your movies and in addition the two more routes. All paths are processed in different actions of one controller.</p>\n\n<pre><code>~/dev/rubyonrails/test_app$rake routes\n        Prefix Verb   URI Pattern                    Controller#Action \n  upvote_movie GET    /movies/:id/upvote(.:format)   movies#upvote\ndownvote_movie GET    /movies/:id/downvote(.:format) movies#downvote\n        movies GET    /movies(.:format)              movies#index\n               POST   /movies(.:format)              movies#create\n     new_movie GET    /movies/new(.:format)          movies#new\n    edit_movie GET    /movies/:id/edit(.:format)     movies#edit\n         movie GET    /movies/:id(.:format)          movies#show\n               PATCH  /movies/:id(.:format)          movies#update\n               PUT    /movies/:id(.:format)          movies#update\n               DELETE /movies/:id(.:format)          movies#destroy\n~/dev/rubyonrails/test_app$\n</code></pre>\n\n<p>Now you can use the route helpers (see Prefix in the list):</p>\n\n<pre><code>&lt;%= link_to \"upvote\", upvote_movie_path(movie) %&gt;\n&lt;%= link_to \"down vote\", downvote_movie_path(movie) %&gt;\n</code></pre>\n\n<p>The <code>movie</code> object brings the <code>:id</code> attribute in the route paths, so you know which movie should be up or down voted.</p>\n\n<p><strong>Note</strong> the words of the router helper names. These sound like that what you want to do: upvote movie or downvote movie</p>\n"}], "owner": {"reputation": 413, "user_id": 5149471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Sqr06HaqS7s/AAAAAAAAAAI/AAAAAAAAABc/0GICbgbAH0A/photo.jpg?sz=128", "display_name": "Akash Pinnaka", "link": "https://stackoverflow.com/users/5149471/akash-pinnaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 35323693, "answer_count": 2, "score": 1, "last_activity_date": 1455400025, "creation_date": 1455129425, "last_edit_date": 1455400025, "question_id": 35323281, "link": "https://stackoverflow.com/questions/35323281/clicking-on-the-link-is-not-triggering-the-action", "title": "Clicking on the link is not triggering the action", "body": "<p>I am beginner in ruby on rails. I am building a movie review app for practising ruby on rails. In that application I am adding voting feature for movies (upvote and downvote). </p>\n\n<p>Movies#index</p>\n\n<pre><code>&lt;%= link_to \"Add movie\", new_movie_path %&gt;\n  &lt;% @movies.each do |movie| %&gt;\n    &lt;%= image_tag movie.thumbnail.url(:medium) %&gt;\n    &lt;%= link_to movie.title, movie_path(movie) %&gt;\n    &lt;%= link_to \"upvote\", {controller: \"votes\", action: \"upvote\"} %&gt;\n    &lt;%= link_to \"downvote\",{controller:\"votes\", action: \"downvote\"} %&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>Votes controller</p>\n\n<pre><code>class MoviesController &lt; ApplicationController\n  def upvote\n    Movie.find(params[:id]).vote.upvote += 1\n    redirect_to movies_path\n  end\n\n  def downvote\n    Movie.find(params[:id]).vote.downvote += 1\n    redirect_to movies_path\n  end\nend\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do    \n  resources :movies    \n  resources :votes\n  root 'movies#index'  \nend\n</code></pre>\n\n<p>When I click on the links <b><i>upvote</i></b> and <b><i>downvote</i></b>(movies#index), the upvote and downvote actions are not triggering. It is throwing error</p>\n\n<blockquote>\n  <p>No route matches {:action=>\"upvote\", :controller=>\"votes\"}</p>\n</blockquote>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "angularjs", "general-network-error"], "answers": [{"tags": [], "owner": {"reputation": 5465, "user_id": 405796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecvqq.jpg?s=128&g=1", "display_name": "craig.kaminsky", "link": "https://stackoverflow.com/users/405796/craig-kaminsky"}, "is_accepted": true, "score": 0, "last_activity_date": 1455129218, "creation_date": 1455129218, "answer_id": 35323230, "question_id": 35323074, "link": "https://stackoverflow.com/questions/35323074/500-error-with-a-simple-ruby-on-rails-and-angularjs-project/35323230#35323230", "title": "#500 error with a simple Ruby on Rails and Angularjs project", "body": "<p>It would appear from your controller that you are not allowing/accounting for <a href=\"http://edgeapi.rubyonrails.org/classes/ActionController/StrongParameters.html\" rel=\"nofollow\">strong params</a>. </p>\n\n<p>In your controller, you need a method that indicates which params are allowed for your model. </p>\n\n<pre><code>def create\n  @entry = Entry.new(entry_params)\n  @entry.save\n  respond_with(@entry)\nend \n\nprivate \ndef entry_params\n  params.require(:entry).permit(:attribute, :another_attribute)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 803, "user_id": 656708, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/22687d7a0acdb90bf3ac3a38aaff8864?s=128&d=identicon&r=PG", "display_name": "frishi", "link": "https://stackoverflow.com/users/656708/frishi"}, "is_accepted": false, "score": 0, "last_activity_date": 1455129234, "last_edit_date": 1495539912, "creation_date": 1455129234, "answer_id": 35323235, "question_id": 35323074, "link": "https://stackoverflow.com/questions/35323074/500-error-with-a-simple-ruby-on-rails-and-angularjs-project/35323235#35323235", "title": "#500 error with a simple Ruby on Rails and Angularjs project", "body": "<p>You are getting a <code>ForbiddenAttributesError</code></p>\n\n<p>You need to explicity specify which params are whitelisted for mass-updating:\n<a href=\"http://edgeguides.rubyonrails.org/action_controller_overview.html#strong-parameters\" rel=\"nofollow noreferrer\">http://edgeguides.rubyonrails.org/action_controller_overview.html#strong-parameters</a></p>\n\n<p>This is a solution to a similar problem:\n<a href=\"https://stackoverflow.com/questions/17335329/activemodelforbiddenattributeserror-when-creating-new-user\">ActiveModel::ForbiddenAttributesError when creating new user</a></p>\n"}], "owner": {"reputation": 342, "user_id": 4233911, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b7dc2ca2a013dea096265680762dcb78?s=128&d=identicon&r=PG&f=1", "display_name": "Brennan", "link": "https://stackoverflow.com/users/4233911/brennan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 35323230, "answer_count": 2, "score": 0, "last_activity_date": 1455129234, "creation_date": 1455128723, "question_id": 35323074, "link": "https://stackoverflow.com/questions/35323074/500-error-with-a-simple-ruby-on-rails-and-angularjs-project", "title": "#500 error with a simple Ruby on Rails and Angularjs project", "body": "<p>thank you al for taking the time to help me with this issue.  I am new to Ruby so this may seem like a simple answer.  I created an api to allow Ruby and Angularjs to talk to each other.  API below:</p>\n\n<pre><code>class EntriesController &lt; ApplicationController\nrespond_to :json\nprotect_from_forgery\n\ndef index\n    respond_with Entry.all\nend\n\ndef show\n    respond_with Entry.find(params[:id])\nend\n\ndef create\n    respond_with Entry.create(params[:entry])\nend\n\ndef update\n    respond_with Entry.update(params[:id], params[entry])\nend\n\ndef destroy\n    respond_with Entry.destroy(params[:id])\nend\nend\n</code></pre>\n\n<p>My angular js controller is:</p>\n\n<pre><code>@app = angular.module(\"angRails\",[\"ngResource\", \"ngMaterial\", \"ngAnimate\", \"ngAria\"]);\n\n@mainCTRL = [\"$scope\", \"$resource\", ($scope, $resource) -&gt;\n\n  Entry = $resource(\"/entries/:id\", {id: \"@id\"}, {update: {method: \"PUT\"}})\n\n  $scope.newName = \"\";\n\n  $scope.entries = Entry.query();\n\n\n  $scope.addEntry = -&gt;\n\nunless $scope.newName is \"\"\n  entry = Entry.save($scope.newName)\n  console.log(JSON.stringify(entry));\n  $scope.entries.push(entry);\n  console.log(\"add Entry function\");\n  $scope.newName = \"\";\n\n]\n\n\napp.controller(\"mainCTRL\", mainCTRL);\n</code></pre>\n\n<p>The <code>$scope.entries = Entry.query();</code>  works completely fine but the create entry is not working at all.  I get the error:</p>\n\n<pre><code>POST http://localhost:3000/entries 500 (Internal Server Error)\n\nActiveModel::ForbiddenAttributesError in EntriesController#create\nActiveModel::ForbiddenAttributesError\n\nExtracted source (around line #14):\n12\n13 def create\n14 respond_with Entry.create(params[:entry])\n15 end\n</code></pre>\n\n<p>I am not sure why I get this error.  i am grateful with any help I can get.  Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "curl", "jwt"], "answers": [{"tags": [], "owner": {"reputation": 1487, "user_id": 1756496, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dac28ab547d38997fede68467ea15f6e?s=128&d=identicon&r=PG&f=1", "display_name": "pteixeira", "link": "https://stackoverflow.com/users/1756496/pteixeira"}, "is_accepted": true, "score": 0, "last_activity_date": 1455567213, "creation_date": 1455567213, "answer_id": 35418217, "question_id": 35322998, "link": "https://stackoverflow.com/questions/35322998/500-internal-server-error-when-generating-jwt-token-using-knock-gem/35418217#35418217", "title": "500 Internal Server Error when generating JWT token using Knock gem", "body": "<p>I eventually managed to get it to work.</p>\n\n<p>What I did was </p>\n\n<ul>\n<li>Uninstall Ruby (removed any references to it system wide, cleaned packages, updated everything and did <code>dist-upgrade</code></li>\n<li>Reinstalled Ruby (I use rbenv, but it should be the same with whatever you want)</li>\n<li>Since I was working in a new branch of the project, I deleted the project folder and cloned it again from git</li>\n<li>Reinstalled <code>bundle</code> after correctly configuring Ruby (I followed the guide in rbenv's github page)</li>\n<li>Ran <code>bundle</code> in my project, it got all the gems that I needed</li>\n<li>Configured my secret for the rails server (<code>rake secret</code> and paste that in <code>config/secret.yml</code>)</li>\n</ul>\n\n<p>After this it was working.\nMy best guess is that either I missconfigured the server or I had a corrupt gem.</p>\n"}], "owner": {"reputation": 1487, "user_id": 1756496, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dac28ab547d38997fede68467ea15f6e?s=128&d=identicon&r=PG&f=1", "display_name": "pteixeira", "link": "https://stackoverflow.com/users/1756496/pteixeira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 970, "favorite_count": 0, "accepted_answer_id": 35418217, "answer_count": 1, "score": 0, "last_activity_date": 1455567213, "creation_date": 1455128473, "question_id": 35322998, "link": "https://stackoverflow.com/questions/35322998/500-internal-server-error-when-generating-jwt-token-using-knock-gem", "title": "500 Internal Server Error when generating JWT token using Knock gem", "body": "<p>I am trying to authenticate my API requests with JWT Web Tokens, using the Knock gem in my Ruby on Rails application.</p>\n\n<p>I did what the readme stated and modified the <code>routes.rb</code> file.</p>\n\n<p>After that, I tried using cURL to get a token to see if everything was working. I typed <code>curl -XPOST -H \"Content-Type: application/json\" -d '{\"auth\": {\"email\": \"test@mail.com\", \"password\": \"password\"}}' localhost:3000/auth/auth_token</code> (Knock is mounted to \"/auth\" and the user exists).</p>\n\n<p>However, I get a 500 internal server error and this stack trace:</p>\n\n<pre><code>`Processing by Knock::AuthTokenController#create as */*\n  Parameters: {\"auth\"=&gt;{\"email\"=&gt;\"test@mail.com\", \"password\"=&gt;\"[FILTERED]\"}}\n  User Load (0.2ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"email\" = ? LIMIT 1  [[\"email\", \"test@mail.com\"]]\n  CACHE (0.0ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"email\" = ? LIMIT 1  [[\"email\", \"test@mail.com\"]]\nCompleted 500 Internal Server Error in 104ms (ActiveRecord: 0.5ms)`\n\n`TypeError (no implicit conversion of nil into String):\n  jwt (1.5.2) lib/jwt.rb:73:in 'digest'\n  jwt (1.5.2) lib/jwt.rb:73:in 'sign_hmac'\n  jwt (1.5.2) lib/jwt.rb:34:in 'sign'\n  jwt (1.5.2) lib/jwt.rb:98:in 'encoded_signature'\n  jwt (1.5.2) lib/jwt.rb:108:in 'encode'\n  knock (1.4.1) app/model/knock/auth_token.rb:13:in 'initialize'\n  knock (1.4.1) app/controllers/knock/auth_token_controller.rb:17:in 'new'\n  knock (1.4.1) app/controllers/knock/auth_token_controller.rb:17:in 'auth_token'\n  knock (1.4.1) app/controllers/knock/auth_token_controller.rb:8:in 'create'\nactionpack (4.2.5) lib/action_controller/metal/implicit_render.rb:4:in `send_action'\n  actionpack (4.2.5) lib/abstract_controller/base.rb:198:in `process_action'\n  actionpack (4.2.5) lib/action_controller/metal/rendering.rb:10:in `process_action'\n  actionpack (4.2.5) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\n  activesupport (4.2.5) lib/active_support/callbacks.rb:117:in `call'\n  activesupport (4.2.5) lib/active_support/callbacks.rb:117:in `call'\n  activesupport (4.2.5) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'\n  activesupport (4.2.5) lib/active_support/callbacks.rb:505:in `call'\n  activesupport (4.2.5) lib/active_support/callbacks.rb:505:in `call'\n  activesupport (4.2.5) lib/active_support/callbacks.rb:92:in `__run_callbacks__'\n  activesupport (4.2.5) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'\n  activesupport (4.2.5) lib/active_support/callbacks.rb:81:in `run_callbacks'\n  actionpack (4.2.5) lib/abstract_controller/callbacks.rb:19:in `process_action'\n  actionpack (4.2.5) lib/action_controller/metal/rescue.rb:29:in `process_action'\n  actionpack (4.2.5) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'\n  activesupport (4.2.5) lib/active_support/notifications.rb:164:in `block in instrument'\n  activesupport (4.2.5) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n  activesupport (4.2.5) lib/active_support/notifications.rb:164:in `instrument'\n  actionpack (4.2.5) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\n  actionpack (4.2.5) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\n  activerecord (4.2.5) lib/active_record/railties/controller_runtime.rb:18:in `process_action'\n  actionpack (4.2.5) lib/abstract_controller/base.rb:137:in `process'\n  actionview (4.2.5) lib/action_view/rendering.rb:30:in `process'\n  actionpack (4.2.5) lib/action_controller/metal.rb:196:in `dispatch'\n  actionpack (4.2.5) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'\n  actionpack (4.2.5) lib/action_controller/metal.rb:237:in `block in action'\n  actionpack (4.2.5) lib/action_dispatch/routing/route_set.rb:76:in `call'\n  actionpack (4.2.5) lib/action_dispatch/routing/route_set.rb:76:in `dispatch'\n  actionpack (4.2.5) lib/action_dispatch/routing/route_set.rb:45:in `serve'\n  actionpack (4.2.5) lib/action_dispatch/journey/router.rb:43:in `block in serve'\n  actionpack (4.2.5) lib/action_dispatch/journey/router.rb:30:in `each'\n  actionpack (4.2.5) lib/action_dispatch/journey/router.rb:30:in `serve'\n  actionpack (4.2.5) lib/action_dispatch/routing/route_set.rb:817:in `call'\n  railties (4.2.5) lib/rails/engine.rb:518:in `call'\n  railties (4.2.5) lib/rails/railtie.rb:194:in `public_send'\n  railties (4.2.5) lib/rails/railtie.rb:194:in `method_missing'\n  actionpack (4.2.5) lib/action_dispatch/routing/mapper.rb:51:in `serve'\n  actionpack (4.2.5) lib/action_dispatch/journey/router.rb:43:in `block in serve'\n  actionpack (4.2.5) lib/action_dispatch/journey/router.rb:30:in `each'\n  actionpack (4.2.5) lib/action_dispatch/journey/router.rb:30:in `serve'\n  actionpack (4.2.5) lib/action_dispatch/routing/route_set.rb:817:in `call'\n  rack (1.6.4) lib/rack/etag.rb:24:in `call'\n  rack (1.6.4) lib/rack/conditionalget.rb:38:in `call'\n  rack (1.6.4) lib/rack/head.rb:13:in `call'\n  actionpack (4.2.5) lib/action_dispatch/middleware/params_parser.rb:27:in `call'\n  activerecord (4.2.5) lib/active_record/query_cache.rb:36:in `call'\n  activerecord (4.2.5) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'\n  activerecord (4.2.5) lib/active_record/migration.rb:377:in `call'\n  actionpack (4.2.5) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\n  activesupport (4.2.5) lib/active_support/callbacks.rb:88:in `__run_callbacks__'\n  activesupport (4.2.5) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'\n  activesupport (4.2.5) lib/active_support/callbacks.rb:81:in `run_callbacks'\n  actionpack (4.2.5) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\n  actionpack (4.2.5) lib/action_dispatch/middleware/reloader.rb:73:in `call'\n  actionpack (4.2.5) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'\n  actionpack (4.2.5) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\n  actionpack (4.2.5) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n  railties (4.2.5) lib/rails/rack/logger.rb:38:in `call_app'\n  railties (4.2.5) lib/rails/rack/logger.rb:20:in `block in call'\n  activesupport (4.2.5) lib/active_support/tagged_logging.rb:68:in `block in tagged'\n  activesupport (4.2.5) lib/active_support/tagged_logging.rb:26:in `tagged'\n  activesupport (4.2.5) lib/active_support/tagged_logging.rb:68:in `tagged'\n  railties (4.2.5) lib/rails/rack/logger.rb:20:in `call'\n  actionpack (4.2.5) lib/action_dispatch/middleware/request_id.rb:21:in `call'\n  rack (1.6.4) lib/rack/runtime.rb:18:in `call'\n  activesupport (4.2.5) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\n  rack (1.6.4) lib/rack/lock.rb:17:in `call'\n  actionpack (4.2.5) lib/action_dispatch/middleware/static.rb:116:in `call'\n  rack-cors (0.4.0) lib/rack/cors.rb:80:in `call'\n  railties (4.2.5) lib/rails/engine.rb:518:in `call'\n  railties (4.2.5) lib/rails/application.rb:165:in `call'\n  rack (1.6.4) lib/rack/lock.rb:17:in `call'\n  rack (1.6.4) lib/rack/content_length.rb:15:in `call'\n  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'\n  /home/user/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'\n  /home/user/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'\n  /home/user/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'\n</code></pre>\n\n<p>I have no idea what's causing this. The weirder thing is that I am working with a friend and he is able to generate a token, even though we are on the same branch and the environment <strong>SHOULD</strong> be the same (apparently it isn't, but I don't know where we differ).</p>\n\n<p>I have google around, but no-one seems to have the same problem (or maybe I am googling for the wrong thing).</p>\n\n<p>I am using Ubuntu 14.04 LTS and sqlite for the database, if that is of any help.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ruby-on-rails-4", "stripe-payments"], "comments": [{"owner": {"reputation": 4150, "user_id": 1431375, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2ac536f6b2c0c5235da73442f3577ea9?s=128&d=identicon&r=PG", "display_name": "Matthew Arkin", "link": "https://stackoverflow.com/users/1431375/matthew-arkin"}, "edited": false, "score": 0, "creation_date": 1455130969, "post_id": 35322645, "comment_id": 58356143, "body": "you should use the rails form helpers to create the form so that it inserts the necessary CSRF token fields"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 2305287, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e8c9f700cf8778fcb35fea210aa78200?s=128&d=identicon&r=PG", "display_name": "Daniel W", "link": "https://stackoverflow.com/users/2305287/daniel-w"}, "edited": false, "score": 0, "creation_date": 1455139289, "post_id": 35323957, "comment_id": 58361112, "body": "Ok. I had a feeling that the traditional html form may bottom out without Rails support."}, {"owner": {"reputation": 6263, "user_id": 554327, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eec151eb88d237bef3e14734459036be?s=128&d=identicon&r=PG", "display_name": "AdamT", "link": "https://stackoverflow.com/users/554327/adamt"}, "edited": false, "score": 1, "creation_date": 1513167386, "post_id": 35323957, "comment_id": 82546486, "body": "what&#39;s the benefit of doing this single line of code when you can do the other single line of adding <code>&lt;input type=&quot;hidden&quot; value=&quot;&lt;%= form_authenticity_token %&gt;&quot; name=&quot;authenticity_token&quot;&#47;&gt;</code>? All things being equal, meaning the form is already built and you just have to add something, probably a better idea to implement the solution with <code>authenticity_token</code>"}], "tags": [], "owner": {"reputation": 8371, "user_id": 1094339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Cibe3.png?s=128&g=1", "display_name": "Deekor", "link": "https://stackoverflow.com/users/1094339/deekor"}, "is_accepted": false, "score": 3, "last_activity_date": 1455131650, "creation_date": 1455131650, "answer_id": 35323957, "question_id": 35322645, "link": "https://stackoverflow.com/questions/35322645/cannot-verify-csrf-token-for-stripe-payments-rails-4/35323957#35323957", "title": "Cannot verify CSRF token for Stripe Payments [Rails 4]", "body": "<p>This might not be the best solution but you can ignore the error with</p>\n\n<pre><code>protect_from_forgery with: :null_session\n</code></pre>\n\n<p>placed in your controller.</p>\n\n<p>The better solution would be to build the form using the rails form helper.</p>\n"}, {"tags": [], "owner": {"reputation": 895, "user_id": 5780189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b0edd103c68c4ed3b24902809589ab35?s=128&d=identicon&r=PG&f=1", "display_name": "Tinus Wagner", "link": "https://stackoverflow.com/users/5780189/tinus-wagner"}, "is_accepted": false, "score": 3, "last_activity_date": 1473823681, "creation_date": 1473823681, "answer_id": 39482070, "question_id": 35322645, "link": "https://stackoverflow.com/questions/35322645/cannot-verify-csrf-token-for-stripe-payments-rails-4/39482070#39482070", "title": "Cannot verify CSRF token for Stripe Payments [Rails 4]", "body": "<p>Essentially form_tag's do not automatically generate CSRF tokens, unless explicitly told to do so, however neither do form_for tag's, as they chopped that in <a href=\"https://www.alfajango.com/blog/rails-4-whats-new/\" rel=\"nofollow\">Rails 4</a>.</p>\n\n<p>I resolved the issue by adding a hidden input in my forms. </p>\n\n<pre><code>&lt;input type=\"hidden\" value=\"&lt;%= form_authenticity_token() %&gt;\"name=\"authenticity_token\"/&gt;\n</code></pre>\n\n<p>Here's an example:</p>\n\n<pre><code>&lt;%= form_tag(\"/payments/create\", remote: true) do %&gt;\n   &lt;%= render partial: \"shared/stripe_checkout_button\" %&gt;\n   &lt;%= hidden_field_tag(:product_id, @product.id) %&gt;\n   &lt;input type=\"hidden\" value=\"&lt;%= form_authenticity_token() %&gt;\"name=\"authenticity_token\"/&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The main reason they chopped automatic generation of CSRF tokens has to do with people fragment-caching because the authenticity token would be wrong on subsequent requests when the form was pulled from the cache.</p>\n"}], "owner": {"reputation": 63, "user_id": 2305287, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e8c9f700cf8778fcb35fea210aa78200?s=128&d=identicon&r=PG", "display_name": "Daniel W", "link": "https://stackoverflow.com/users/2305287/daniel-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1777, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1473823681, "creation_date": 1455127298, "question_id": 35322645, "link": "https://stackoverflow.com/questions/35322645/cannot-verify-csrf-token-for-stripe-payments-rails-4", "title": "Cannot verify CSRF token for Stripe Payments [Rails 4]", "body": "<p>I'm currently using the default Stripe Form that is given to you on their website. Everything else seems to work outside of processing a proper authorization token for users when making transactions. I will post below the code for all methods and the form as well.</p>\n\n<p>users_controller.rb</p>\n\n<pre><code>  def info\n    @subscription = current_user.subscription\n  end\n\n  def charge\n    token = params[\"stripeToken\"]\n    customer = Stripe::Customer.create(\n      source: token,\n      plan: 'gbsubscriptionlevel1',\n      email: current_user.email\n    )\n\n    current_user.subscription.stripe_user_id = customer.id\n    current_user.subscription.active = true\n    current_user.subscription.save\n\n    redirect_to users_info_path\n  end\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>get '/users/info', to: 'users#info'\npost '/users/charge', to: 'users#charge'\n</code></pre>\n\n<p>_stripe_form.html.erb</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n  &lt;form action=\"/users/charge\" method=\"POST\" id=\"payment-form\"&gt;\n    &lt;span class=\"payment-errors\"&gt;&lt;/span&gt;\n\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-xs-4\"&gt;\n        &lt;label&gt;\n          &lt;span&gt;Card Number&lt;/span&gt;\n          &lt;input class=\"form-control\" type=\"text\" size=\"20\" data-stripe=\"number\"/&gt;\n        &lt;/label&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-xs-1\"&gt;\n        &lt;label&gt;\n          &lt;span&gt;CVC&lt;/span&gt;\n          &lt;input class=\"form-control\" type=\"text\" size=\"4\" data-stripe=\"cvc\"/&gt;\n        &lt;/label&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-xs-1\"&gt;\n        &lt;label&gt;MM&lt;/label&gt;\n        &lt;input class=\"form-control\" type=\"text\" size=\"2\" data-stripe=\"exp-month\" placeholder=\"01\"/&gt;\n      &lt;/div&gt;\n      &lt;div class=\"col-xs-1\"&gt;\n        &lt;label&gt;YYYY&lt;/label&gt;\n        &lt;input class=\"form-control\" type=\"text\" size=\"3\" data-stripe=\"exp-year\" placeholder=\"2020\"/&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-xs-1\"&gt;\n        &lt;br/&gt;\n        &lt;button class=\"btn btn-primary-outline\" type=\"submit\"&gt;Create Subscription&lt;/button&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/form&gt;\n\n  &lt;script type=\"text/javascript\" src=\"https://js.stripe.com/v2/\"&gt;&lt;/script&gt;\n\n\n  &lt;script type=\"text/javascript\"&gt;\n    // This identifies your website in the createToken call below\n    Stripe.setPublishableKey('pk_test_tmBNNUvHTmtWXLhSL1q647iH');\n    //\n    function stripeResponseHandler(status, response) {\n      var $form = $('#payment-form');\n\n      if (response.error) {\n        // Show the errors on the form\n        $form.find('.payment-errors').text(response.error.message);\n        $form.find('button').prop('disabled', false);\n      } else {\n        // response contains id and card, which contains additional card details\n        var token = response.id;\n        // Insert the token into the form so it gets submitted to the server\n        $form.append($('&lt;input type=\"hidden\" name=\"stripeToken\" /&gt;').val(token));\n        // and submit\n        $form.get(0).submit();\n      }\n    }\n\n    jQuery(function ($) {\n      $('#payment-form').submit(function (event) {\n        var $form = $(this);\n\n        // Disable the submit button to prevent repeated clicks\n        $form.find('button').prop('disabled', true);\n\n        Stripe.card.createToken($form, stripeResponseHandler);\n\n        // Prevent the form from submitting with the default action\n        return false;\n      });\n    });\n  &lt;/script&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Stacktrace output</p>\n\n<pre><code>Started POST \"/users/charge\" for 127.0.0.1 at 2016-02-10 12:11:07 -0500\nProcessing by UsersController#charge as HTML\nCan't verify CSRF token authenticity\nCompleted 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms)\n\nActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):\n  actionpack (4.2.3) lib/action_controller/metal/request_forgery_protection.rb:181:in `handle_unverified_request'\n  actionpack (4.2.3) lib/action_controller/metal/request_forgery_protection.rb:209:in `handle_unverified_request'\n  devise (3.5.6) lib/devise/controllers/helpers.rb:257:in `handle_unverified_request'\n  actionpack (4.2.3) lib/action_controller/metal/request_forgery_protection.rb:204:in `verify_authenticity_token'\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1455129455, "post_id": 35322443, "comment_id": 58355232, "body": "Using global variables, <i>especially</i> those in all-caps, is probably a super bad idea. Is there anything wrong with using a regular constant like <code>LOG_PATH</code>? There&#39;s also no reason to define this as a string like <code>&quot;#{...}&quot;</code> when <code>File.expand_path(...)</code> alone should be fine."}], "answers": [{"comments": [{"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1455127457, "post_id": 35322666, "comment_id": 58353983, "body": "<code>logger = Logger.new(File.expand_path(&quot;..&#47;..&#47;..&#47;log&#47;file_name.log&quot;,__F&zwnj;&#8203;ILE__), &#39;daily&#39;)</code> is enough, no need to chdir. You were trying to pass in an open file handle before and I guess that doesn&#39;t work. Logger takes filename as argument."}, {"owner": {"reputation": 935, "user_id": 2095793, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/98ec2ef665b7e86cd22ed73e5c149fbd?s=128&d=identicon&r=PG", "display_name": "itsh", "link": "https://stackoverflow.com/users/2095793/itsh"}, "reply_to_user": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1455148620, "post_id": 35322666, "comment_id": 58365156, "body": "@Kimmo - Thank you. Will try that."}], "tags": [], "owner": {"reputation": 935, "user_id": 2095793, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/98ec2ef665b7e86cd22ed73e5c149fbd?s=128&d=identicon&r=PG", "display_name": "itsh", "link": "https://stackoverflow.com/users/2095793/itsh"}, "is_accepted": false, "score": 0, "last_activity_date": 1455127372, "creation_date": 1455127372, "answer_id": 35322666, "question_id": 35322443, "link": "https://stackoverflow.com/questions/35322443/error-creating-logfile-under-a-directory-in-ruby/35322666#35322666", "title": "Error creating logfile under a directory in Ruby", "body": "<p>I tried the following and it worked. </p>\n\n<pre><code>FileUtils.mkdir 'log'\n$LOG_PATH = \"#{File.expand_path(\"../../../log\",__FILE__)}\"\nDir.chdir \"#{$LOG_PATH}\"\n$LOG = Logger.new('file_name.log', 'daily')\n</code></pre>\n"}], "owner": {"reputation": 935, "user_id": 2095793, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/98ec2ef665b7e86cd22ed73e5c149fbd?s=128&d=identicon&r=PG", "display_name": "itsh", "link": "https://stackoverflow.com/users/2095793/itsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1455127372, "creation_date": 1455126652, "question_id": 35322443, "link": "https://stackoverflow.com/questions/35322443/error-creating-logfile-under-a-directory-in-ruby", "title": "Error creating logfile under a directory in Ruby", "body": "<p>I am trying to create the logfile under <code>log</code> directory in my ruby script but it is returning <code>org.jruby.exceptions.RaiseException: (Errno::ENOENT) file:/home/ABC/tool/log/file_name.log\n</code> error. Below is the piece the code where I am trying to do the same.</p>\n\n<pre><code>FileUtils.mkdir 'log'\n$LOG_PATH = \"#{File.expand_path(\"../../../log\",__FILE__)}\"\nFile.new(\"#{$LOG_PATH}/file_name.log\")\nfile = File.open('file_name.log', File::APPEND)\nlogger = Logger.new(file, 'daily')\n</code></pre>\n\n<p>The above code is creating the <code>log</code> folder but it is not creating the <code>file_name.log</code> and giving <code>Errno::ENOENT</code> error.</p>\n\n<p>Can someone guide me creating <code>file_name.log</code> under <code>log</code> folder? </p>\n\n<p>Also I tried to the run the code copied below to see if it is able to create the log file under current directory and it is working fine. </p>\n\n<pre><code>$LOG = Logger.new('file_name.log', 'daily')\n</code></pre>\n"}, {"tags": ["ruby", "excel", "roo-gem", "rubyxl"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1455125170, "post_id": 35321693, "comment_id": 58352496, "body": "<code>capybara</code> is not the right tool for this maybe look at <code>axlsx</code> gem or something meant for interacting with spreadsheets. <code>spreadsheet</code>, <code>roo</code>, etc."}, {"owner": {"reputation": 47, "user_id": 5859086, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5f3afc00a67f13fbdab18db6d52d804?s=128&d=identicon&r=PG&f=1", "display_name": "RPD", "link": "https://stackoverflow.com/users/5859086/rpd"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1455128014, "post_id": 35321693, "comment_id": 58354347, "body": "Basically i used capybara. But for accessing excel I used &#39;roo&#39; and  &#39;rubyXL&#39; gem .Could you please help me on this issue"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1455128705, "post_id": 35321693, "comment_id": 58354786, "body": "Your code is not syntactically valid. I you have more opening parentheses than closing ones."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1455128836, "post_id": 35321693, "comment_id": 58354872, "body": "I&#39;ve removed the references to Capybara, since you do not show any Capybara code or indicate that your problem has anything to do with Capybara, and added the [roo-gem] and [rubyxl] tags."}, {"owner": {"reputation": 47, "user_id": 5859086, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5f3afc00a67f13fbdab18db6d52d804?s=128&d=identicon&r=PG&f=1", "display_name": "RPD", "link": "https://stackoverflow.com/users/5859086/rpd"}, "edited": false, "score": 0, "creation_date": 1455129992, "post_id": 35321693, "comment_id": 58355580, "body": "I have edited my code and placed the whole code. Hope this would help. Please advice what should I change"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1455131126, "post_id": 35321693, "comment_id": 58356244, "body": "I&#39;ve edited your question to use a code block and I&#39;ve edited your code to use proper indentation. Next time please take the time to properly format your code with consistent indentation. This makes one syntax error obvious: You have an extra <code>end</code> at the end. And you still have an extra opening parenthesis on the line that begins <code>if (workbook.cell(j, k + 1) == ...</code>."}, {"owner": {"reputation": 47, "user_id": 5859086, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5f3afc00a67f13fbdab18db6d52d804?s=128&d=identicon&r=PG&f=1", "display_name": "RPD", "link": "https://stackoverflow.com/users/5859086/rpd"}, "edited": false, "score": 0, "creation_date": 1455131384, "post_id": 35321693, "comment_id": 58356416, "body": "Sorry that end was for cucumber statement that i have it at the beginning of my code. I did not copy paste that line here. So I Will remove the last &quot;end&quot;"}], "owner": {"reputation": 47, "user_id": 5859086, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5f3afc00a67f13fbdab18db6d52d804?s=128&d=identicon&r=PG&f=1", "display_name": "RPD", "link": "https://stackoverflow.com/users/5859086/rpd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 620, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1455137830, "creation_date": 1455124520, "last_edit_date": 1455137830, "question_id": 35321693, "link": "https://stackoverflow.com/questions/35321693/how-to-fill-color-in-each-cell", "title": "How to fill color in each cell", "body": "<p>I'm using Roo and RubyXL to modify an Excel spreadsheet.</p>\n\n<p>When I comment out the code that fills the color in the Excel sheet, then I do not get any error.</p>\n\n<p>My full code:</p>\n\n<pre><code>require 'rubyXL'\nrequire 'roo'\n\nworkbook = Roo::Spreadsheet.open(file_name)\nworkbook1 = RubyXL::Parser.parse(file_name)\n\nworkbook.default_sheet = 'Location Table Values'\nworksheet1 = workbook1['Location Table Values']\n\nfor j in (workbook.first_row..workbook.last_row)\n  print \"\\n\"\n  d = j\n\n  for k in (workbook.first_column..workbook.last_column)\n    if (k == workbook.first_column)\n      choose(\"lookupSearch\", :option =&gt; \"Plan\")\n      fill_in \"searchInput\", :with =&gt; workbook.cell(j, k)\n      find(:xpath, '//*[@id=\"searchicon\"]').click\n    elsif (k == workbook.last_column)\n      puts \" \"\n    else\n      print k\n      findXpath = page.find('td', text: workbook.cell(j,k), :match =&gt; :prefer_exact).path\n      splitXpath = (findXpath.split(\"/\"))\n      count = splitXpath.count\n      value = splitXpath.at(count - 1)\n\n      if (value == \"td[1]\")\n        finalElementXpath = findXpath.sub(\"td[1]\", \"td[2]\")\n      elsif (value == \"td[2]\")\n        finalElementXpath= findXpath.sub(\"td[2]\", \"td[3]\")\n      end\n\n      if (workbook.cell(j, k + 1)) == (find(:xpath, finalElementXpath).native.text)\n        print \"#{workbook.cell(j + 1, k)}-value exist \\n\"\n        worksheet1.sheet_data[d][k].change_fill ('008000') # Green color\n      else\n        print \"object #{workbook.cell(j, k + 1)}not exist #{workbook.cell(j, k)}\"\n        print workbook.cell(j, k + 1)\n        worksheet1.sheet_data[d][k].change_fill ('ff0000')\n      end\n    end\n  end\nend\n\nworkbook1.write(file_name)\n</code></pre>\n\n<p>But I get Nil[] Nil class error.</p>\n"}, {"tags": ["arrays", "ruby", "function", "recursion", "hash"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1455124395, "post_id": 35321560, "comment_id": 58351997, "body": "Are you just trying to collect all the leaf-nodes that are strings?"}, {"owner": {"reputation": 682, "user_id": 1081532, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a0763b837743a98fe0170b75d715eb8c?s=128&d=identicon&r=PG", "display_name": "Pierre", "link": "https://stackoverflow.com/users/1081532/pierre"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1455124457, "post_id": 35321560, "comment_id": 58352028, "body": "nope, all the different values with key &quot;name&quot;"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1455124488, "post_id": 35321560, "comment_id": 58352047, "body": "the array you provided is invalid"}], "answers": [{"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1455125304, "post_id": 35321837, "comment_id": 58352589, "body": "why do you have <code>object</code> in brackets? It is just for me, may be there is something to having it in <code>()</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1455125336, "post_id": 35321837, "comment_id": 58352617, "body": "It&#39;s not necessary to use the brackets. I just have them there for utmost clarity."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1455126913, "post_id": 35321837, "comment_id": 58353668, "body": "The example didn&#39;t have any, but that&#39;s easy to accommodate."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1455124956, "creation_date": 1455124956, "answer_id": 35321837, "question_id": 35321560, "link": "https://stackoverflow.com/questions/35321560/how-collect-values-of-a-specified-key-recursively-in-a-array-hash/35321837#35321837", "title": "How collect values of a specified key recursively in a Array/Hash", "body": "<p>Here's a way of doing it using <code>case</code> to differentiate between the various object types you'll encounter:</p>\n\n<pre><code>def find_names(object, key_name)\n  case (object)\n  when Array\n    object.flat_map do |e|\n      find_names(e, key_name)\n    end\n  when Hash\n    [ object[key_name] ] + find_names(object.values, key_name).compact\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1455353343, "post_id": 35321991, "comment_id": 58460999, "body": "Given the statement of the question, it seems to me that there is no reasonable alternative to your assumption."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1455365384, "post_id": 35321991, "comment_id": 58464180, "body": "@CarySwoveland, it could be the case that OP wants to iterate over all values, which are iterable."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 4, "last_activity_date": 1455125811, "last_edit_date": 1455125811, "creation_date": 1455125398, "answer_id": 35321991, "question_id": 35321560, "link": "https://stackoverflow.com/questions/35321560/how-collect-values-of-a-specified-key-recursively-in-a-array-hash/35321991#35321991", "title": "How collect values of a specified key recursively in a Array/Hash", "body": "<p>Assuming you know the substructure is under <code>:children</code>:</p>\n\n<pre><code>def extract(sequence, key)\n  sequence.flat_map do |hash|\n    [hash[key], *extract(hash[:children] || [], key)]\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 716, "user_id": 3250825, "user_type": "registered", "profile_image": "https://graph.facebook.com/1468110470/picture?type=large", "display_name": "mccalljt", "link": "https://stackoverflow.com/users/3250825/mccalljt"}, "is_accepted": false, "score": 2, "last_activity_date": 1455125999, "creation_date": 1455125999, "answer_id": 35322195, "question_id": 35321560, "link": "https://stackoverflow.com/questions/35321560/how-collect-values-of-a-specified-key-recursively-in-a-array-hash/35322195#35322195", "title": "How collect values of a specified key recursively in a Array/Hash", "body": "<p>Heres a fast but brittle regex way of doing it</p>\n\n<pre><code>def find_nested(arr, key)\n  arr.to_s.scan(/#{key.to_sym}=&gt;\"([^\"]+)/).flatten\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1455352632, "post_id": 35377808, "comment_id": 58460819, "body": "Worked the first time!"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1455352615, "creation_date": 1455352615, "answer_id": 35377808, "question_id": 35321560, "link": "https://stackoverflow.com/questions/35321560/how-collect-values-of-a-specified-key-recursively-in-a-array-hash/35377808#35377808", "title": "How collect values of a specified key recursively in a Array/Hash", "body": "<pre><code>def find_em(arr)\n  arr.each_with_object([]) do |h,a|\n    a &lt;&lt; h[:name]\n    a.concat(find_em(h[:children])) if h.key?(:children)\n  end\nend\n\nfind_em(arr)\n  #=&gt; [\"foo\", \"zoo\", \"taz\", \"tof\", \"tok\", \"bar\"] \n</code></pre>\n"}], "owner": {"reputation": 682, "user_id": 1081532, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a0763b837743a98fe0170b75d715eb8c?s=128&d=identicon&r=PG", "display_name": "Pierre", "link": "https://stackoverflow.com/users/1081532/pierre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 35321837, "answer_count": 4, "score": 1, "last_activity_date": 1455352615, "creation_date": 1455124106, "last_edit_date": 1455124849, "question_id": 35321560, "link": "https://stackoverflow.com/questions/35321560/how-collect-values-of-a-specified-key-recursively-in-a-array-hash", "title": "How collect values of a specified key recursively in a Array/Hash", "body": "<p>I have the following Array (no limit of deepness) :</p>\n\n<pre><code> [\n   {\n     name: \"foo\",\n     age: 12,\n     children: [{\n         name: \"zoo\",\n         age: 44\n       },\n       {\n         name: \"taz\",\n         age: 17,\n         children: [{\n             name: 'tof',\n             age: 23\n           },\n           {\n             name: 'tok',\n             age: 42\n           }\n         ]\n       }\n     ]\n   },\n   {\n     name: \"bar\",\n     age: 54\n   }\n ]\n</code></pre>\n\n<p>And I would like to collect all the different values of the key <code>name</code>, in this example the result would be:</p>\n\n<p>(the order does not matter)</p>\n\n<pre><code>['foo', 'zoo', 'taz', 'tof', 'tok', 'bar']\n</code></pre>\n\n<p>with a function like</p>\n\n<pre><code>def func(my_array, \"name\")\n</code></pre>\n\n<p>Do you have any idea how I should code that function ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 629, "user_id": 2193349, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e6b6edf8a8bfdd21dcad65ffc0dc565b?s=128&d=identicon&r=PG", "display_name": "robobobobo", "link": "https://stackoverflow.com/users/2193349/robobobobo"}, "edited": false, "score": 0, "creation_date": 1455122745, "post_id": 35320990, "comment_id": 58350841, "body": "You will need to do this with Ajax and JavaScript. Essentially you will trigger the method in the controller with ajax instead of a http request so no page reload is required <a href=\"http://guides.rubyonrails.org/working_with_javascript_in_rails.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/working_with_javascript_in_rails.html</a>"}, {"owner": {"reputation": 179, "user_id": 5726485, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10207019311632480/picture?type=large", "display_name": "Hussein.", "link": "https://stackoverflow.com/users/5726485/hussein"}, "reply_to_user": {"reputation": 629, "user_id": 2193349, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e6b6edf8a8bfdd21dcad65ffc0dc565b?s=128&d=identicon&r=PG", "display_name": "robobobobo", "link": "https://stackoverflow.com/users/2193349/robobobobo"}, "edited": false, "score": 0, "creation_date": 1455133176, "post_id": 35320990, "comment_id": 58357628, "body": "I try to do this     <code>&lt;script&gt;         $(document).ready(function() {         $(&#39;.faved-on&#39;).click(function() {         var fav = $(&#39;.faved-off&#39;)          $.ajax({           type: &quot;POST&quot;,           url: &quot;&#47;hiraganas&quot;,           dataType: &quot;json&quot;,             success: function(data) {           console.log(data);           },             error: function(jqXHR) {           console.error(jqXHR.responseText);           }         });       })     })   &lt;&#47;script&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 5726485, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10207019311632480/picture?type=large", "display_name": "Hussein.", "link": "https://stackoverflow.com/users/5726485/hussein"}, "edited": false, "score": 0, "creation_date": 1455289908, "post_id": 35337030, "comment_id": 58437700, "body": "Thank you for interest I find the solution I modified the previous js by this code : <code>$(document).ready(function() {   $(&#39;body&#39;).on(&#39;click&#39;, &quot;.faved&quot;, function(e) {     &#47;&#47; pass in the e (the event paramater)     e.preventDefault();   var fav = $(&#39;.faved-off&#39;)    &#47;&#47;ajax handle the rest then   $.ajax({     type: &quot;POST&quot;,     url: &quot;favs&#47;&quot;+this.id,       success: function(data) {       console.log(data);     &#47;&#47;change the color of your heart to red here       },       error: function(jqXHR) {       console.error(jqXHR.responseText);       }     });   }); });</code>"}], "tags": [], "owner": {"reputation": 629, "user_id": 2193349, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e6b6edf8a8bfdd21dcad65ffc0dc565b?s=128&d=identicon&r=PG", "display_name": "robobobobo", "link": "https://stackoverflow.com/users/2193349/robobobobo"}, "is_accepted": true, "score": 0, "last_activity_date": 1455187567, "last_edit_date": 1455187567, "creation_date": 1455187251, "answer_id": 35337030, "question_id": 35320990, "link": "https://stackoverflow.com/questions/35320990/add-as-favorite-with-no-full-page-refresh/35337030#35337030", "title": "Add as favorite with no full page refresh", "body": "<p>In order to send the request to the controller without the page refreshing you need to use a combination of Ajax and JavaScript.</p>\n\n<p>You use JavaScript to add a click listener to the <code>.faved-on</code> button and to trigger the Ajax request. You will also use JavaScript to prevent the default action occurring when you click the link ie. The Page Refresh</p>\n\n<p>You then use Ajax to send the request to the controller and handle the response.</p>\n\n<p>Your initial JavaScript code looks pretty correct, except you are missing the bit to stop the page from reloading.</p>\n\n<p>See the <code>e.preventDefault();</code> line below</p>\n\n<pre><code>$(document).ready(function() { \n $('.faved-on').click(function(e) { //make sure to pass in the e (the event paramter)\n e.preventDefault(); //this is the line you are missing\n var fav = $('.faved-off')\n//let your ajax handle the rest then\n $.ajax({\n         type: \"POST\", url: \"/hiraganas\", dataType: \"json\", \n         success: function(data) {\n         console.log(data); \n         //change the color of your heart to red here\n }, \n error: function(jqXHR) {\n    console.error(jqXHR.responseText);\n    }\n   }); \n   })\n })\n</code></pre>\n\n<p></p>\n\n<p>I haven't tested your JavaScript but it looks pretty close to correct, I believe its the <code>e.preventDefault();</code> bit you were missing</p>\n"}], "owner": {"reputation": 179, "user_id": 5726485, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10207019311632480/picture?type=large", "display_name": "Hussein.", "link": "https://stackoverflow.com/users/5726485/hussein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 35337030, "answer_count": 1, "score": 0, "last_activity_date": 1455187567, "creation_date": 1455122571, "question_id": 35320990, "link": "https://stackoverflow.com/questions/35320990/add-as-favorite-with-no-full-page-refresh", "title": "Add as favorite with no full page refresh", "body": "<p>I am working on a Hiragana flashcards app. \nI spend nights and days to understand how don't refresh full page when I add a flashcard (hiragana) as a favorite. </p>\n\n<p>Here is the favorite controller </p>\n\n<p>class FavsController &lt; ApplicationController</p>\n\n<pre><code>  def index\n    @favs = Fav.where(user: current_user)\n  end\n\n  def create\n    @hiragana = Hiragana.find(params[:hiragana_id])\n    @fav = current_user.favs.new(hiragana: @hiragana)\n    if not @hiragana.favs.where(user: current_user).take\n      @fav.save\n    end\n    render json: @fav\n  end\n\n  def destroy\n    @fav = Fav.find(params[:id])\n    @fav.destroy\n    redirect_to :back\n  end\nend\n</code></pre>\n\n<p>I render json in the <strong>create method</strong> and when I click on view I add only an hash </p>\n\n<p>render view favorite</p>\n\n<pre><code>&lt;% if current_user %&gt;\n  &lt;div class=\"hiragana-fav\"&gt;\n    &lt;% if hiragana.is_faved_by(current_user) %&gt;\n      &lt;%= link_to fav_path(hiragana.is_faved_by(current_user)), method:   :delete do %&gt;\n        &lt;i class=\"fa fa-heart faved faved-on\"&gt;&lt;/i&gt;\n      &lt;% end %&gt;\n    &lt;% else %&gt;\n      &lt;%= link_to hiragana_favs_path(hiragana), method: :post do %&gt;\n        &lt;i class=\"fa fa-heart faved faved-off\"&gt;&lt;/i&gt;\n      &lt;% end %&gt;\n    &lt;% end  %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>and it is located in hiragana render </p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n  &lt;ul class=\"list-inline text-center card-frame\"&gt;\n    &lt;li&gt;\n      &lt;div class=\"card\"&gt;\n        &lt;div class=\"front\"&gt;\n          &lt;% if current_user.try(:admin?) %&gt;\n            &lt;%= link_to hiragana_path(hiragana), class:'trash-hiragana', data: { confirm: 'Are you sure?' }, method: :delete do %&gt;\n            &lt;%= image_tag(\"delete-btn.png\") %&gt;\n            &lt;% end %&gt;\n          &lt;% end %&gt;\n          &lt;span class=\"card-question img-popover\" data-content=\"&lt;h4 class='text-center letter-uppercase'&gt;&lt;%= hiragana.bigletter.upcase %&gt;&lt;/h4&gt;&lt;p class='text-center'&gt;&lt;b&gt;&lt;%= hiragana.midletter %&gt;&lt;/b&gt; comme dans &lt;b&gt;&lt;%= hiragana.transcription %&gt;&lt;/b&gt;&lt;/p&gt;\"&gt;\n            &lt;i class=\"fa fa-eye fa-lg\"&gt;&lt;/i&gt;\n          &lt;/span&gt;\n\n          &lt;div class=\"card-hiragana hiragana-&lt;%=hiragana.bigletter.downcase.last%&gt;\"&gt;\n            &lt;h1&gt;&lt;b&gt;&lt;%= hiragana.ideo1 %&gt;&lt;/b&gt;&lt;/h1&gt;\n          &lt;/div&gt;\n\n          &lt;div class=\"card-katakana\"&gt;\n            &lt;p&gt;&lt;%= hiragana.ideo2 %&gt;&lt;/p&gt;\n          &lt;/div&gt;\n\n          &lt;%= render 'favs/favorites', hiragana: hiragana %&gt;\n\n        &lt;/div&gt;\n        &lt;div class=\"back\"&gt;\n          &lt;div class=\"col-sm-3 col-xs-4 col-md-3 containerbackcards-&lt;%=hiragana.bigletter.downcase.last%&gt;\"&gt;\n            &lt;div class=\"backcard-hiragana\"&gt;\n              &lt;h1&gt;&lt;b&gt;&lt;%= hiragana.ideo1 %&gt;&lt;/b&gt;&lt;/h1&gt;\n            &lt;/div&gt;\n            &lt;div class=\"card-bigletter\"&gt;\n              &lt;h4&gt;&lt;%= hiragana.bigletter.upcase %&gt;&lt;/h4&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/li&gt;\n  &lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>When I add a card as favorite it gives me a hash like this :</p>\n\n<pre><code>{\nid: 64,\nuser_id: 1,\nhiragana_id: 4,\ncreated_at: \"2016-02-10T16:37:26.270Z\",\nupdated_at: \"2016-02-10T16:37:26.270Z\"\n}\n</code></pre>\n\n<p>I just want to have the heart grey to red as favorite, saved and not refresh the entire page. Your explainations are appreciated thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1455122818, "post_id": 35321021, "comment_id": 58350897, "body": "As it&#39;s every month name it might be easiest to use Date&#39;s month names constant <code>months = Date::MONTHNAMES.reject(&amp;:nil?).map(&amp;:downcase)</code>"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 0, "last_activity_date": 1455122650, "creation_date": 1455122650, "answer_id": 35321021, "question_id": 35320977, "link": "https://stackoverflow.com/questions/35320977/select-specific-attributes/35321021#35321021", "title": "Select specific attributes", "body": "<pre><code>months = %w(january february march) \nmonths.include? attr_name\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "is_accepted": false, "score": 0, "last_activity_date": 1455122930, "creation_date": 1455122930, "answer_id": 35321126, "question_id": 35320977, "link": "https://stackoverflow.com/questions/35320977/select-specific-attributes/35321126#35321126", "title": "Select specific attributes", "body": "<pre><code>monthnames = %w(january february march april may june july august september october november december)\nexample_attributes.each do |attr_name, attr_value|\n  if monthnames.include?(attr_name)\n    @array_example &lt;&lt; attr_value\n  end\nend\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>@array_example += monthnames.collect{|monthname| example.attributes[monthname]}.reject(&amp;:blank?)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 1, "last_activity_date": 1455128518, "last_edit_date": 1455128518, "creation_date": 1455123064, "answer_id": 35321176, "question_id": 35320977, "link": "https://stackoverflow.com/questions/35320977/select-specific-attributes/35321176#35321176", "title": "Select specific attributes", "body": "<p><a href=\"http://ruby-doc.org/core-2.3.0/Hash.html#method-i-values_at\" rel=\"nofollow\"><code>Hash#values_at</code></a> is for exactly this:</p>\n\n<pre><code>example.attributes.values_at(:january, :february, :march, :april, :may, :june, :july, :august, :september, :october, :november, :december)\n# =&gt; [12, 3, 3, 4, 5, 2, 4, 24, 4, 24, 4, 4]\n</code></pre>\n\n<p>It's probably best to put the month names in a constant (e.g. in your Example model), if only for readability, e.g.:</p>\n\n<pre><code>MONTH_ATTRS = %i[ january   february  march     april\n                  may       june      july      august\n                  september october   november  december ]\n# Or...\nMONTH_ATTRS = Date::MONTHNAMES.drop(1).map {|m| m.downcase.to_sym }\n</code></pre>\n\n<p>(The latter uses Ruby's built-in <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/date/rdoc/Date.html#constants-list\" rel=\"nofollow\"><code>Date::MONTHNAMES</code></a> constant; <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-drop\" rel=\"nofollow\"><code>drop(1)</code></a> is necessary because <code>Date::MONTHNAMES[0]</code> is <code>nil</code>, presumably so January will be at index 1.)</p>\n\n<p>Then:</p>\n\n<pre><code>example.attributes.values_at(*Example::MONTH_ATTRS)\n</code></pre>\n\n<p>P.S. If you would rather have a hash than an array, you can use <a href=\"http://api.rubyonrails.org/classes/Hash.html#method-i-slice\" rel=\"nofollow\"><code>Hash#slice</code></a> from ActiveSupport:</p>\n\n<pre><code>example.attributes.slice(*Example::MONTH_ATTRS)\n# =&gt; { :january =&gt; 12,  :february =&gt; 3, :march =&gt; 3,    :april =&gt; 4,\n#      :may =&gt; 5,       :june =&gt; 2,     :july =&gt; 4,     :august =&gt; 24,\n#      :september =&gt; 4, :october =&gt; 24, :november =&gt; 4, :december =&gt; 4 }\n</code></pre>\n\n<p>P.P.S. If you're not using the model object for anything else\u2014i.e. you just want the month values and nothing else, you should use <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Calculations.html#method-i-pluck\" rel=\"nofollow\"><code>ActiveRecord::Calculations#pluck</code></a> in your query, e.g.:</p>\n\n<pre><code>Example.where(...).pluck(*Example::MONTH_ATTRS)\n</code></pre>\n\n<p><code>pluck</code> tells ActiveRecord to just return the values of those attributes, instead of instantiating and returning an Example model object.</p>\n"}, {"tags": [], "owner": {"reputation": 5958, "user_id": 1789479, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/WlgWK.jpg?s=128&g=1", "display_name": "Hieu Pham", "link": "https://stackoverflow.com/users/1789479/hieu-pham"}, "is_accepted": false, "score": 0, "last_activity_date": 1455125926, "creation_date": 1455125926, "answer_id": 35322167, "question_id": 35320977, "link": "https://stackoverflow.com/questions/35320977/select-specific-attributes/35322167#35322167", "title": "Select specific attributes", "body": "<pre><code>MONTHS = %w( january february march april may june july august september october november december )\n\nexample.attributes.slice(*MONTHS)\n=&gt; {january: 12, february: 3, march: 3, april: 4, may: 5, june: 2, july: 4, august: 24, september: 4, october: 24, november: 4, december: 4}\nexample.attributes.slice(*MONTHS).values\n=&gt; [12, 3, 3, 4, 5, 2, 4, 24, 4, 24, 4, 4]\n</code></pre>\n"}], "owner": {"reputation": 347, "user_id": 5181773, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/baa25d98c4bf3e71c5a66d9d557bae94?s=128&d=identicon&r=PG&f=1", "display_name": "volt", "link": "https://stackoverflow.com/users/5181773/volt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "accepted_answer_id": 35321176, "answer_count": 4, "score": 0, "last_activity_date": 1455128518, "creation_date": 1455122535, "question_id": 35320977, "link": "https://stackoverflow.com/questions/35320977/select-specific-attributes", "title": "Select specific attributes", "body": "<pre><code>#&lt;Example example_id: 13, example2_id: 81, year: 2000, january: 12, february: 3, march: 3, april: 4, may: 5, june: 2, july: 4, august: 24, september: 4, october: 24, november: 4, december: 4&gt;\n</code></pre>\n\n<p>I want to put the values of months in a array like this:</p>\n\n<pre><code>array_example = [12, 3, 3, 4, 5, 2, 4, 24, 4, 24, 4, 4]\n</code></pre>\n\n<p>I know I can do this (example below) but I want a better way.</p>\n\n<pre><code>   example.attributes.each do |attr_name, attr_value|\n      if attr_name == \"january\" || attr_name == \"february\" || attr_name == \"march\" ||\n         attr_name == \"april\" || attr_name == \"may\" || attr_name == \"june\" ||\n         attr_name == \"july\" || attr_name == \"august\" || attr_name == \"september\" ||\n         attr_name == \"october\" || attr_name == \"november\" || attr_name == \"december\"\n                    @array_example &lt;&lt; attr_value\n      end\n    end\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1455123592, "post_id": 35320795, "comment_id": 58351475, "body": "How are you running foo? As a method call from inside the test?"}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1455123610, "post_id": 35320795, "comment_id": 58351488, "body": "Also, what platform? Hacking stdin will be a lot easier on a UNIX."}, {"owner": {"reputation": 1217, "user_id": 5511520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/baaabef4e4f62eee165869427acd0472?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Belyakov", "link": "https://stackoverflow.com/users/5511520/mike-belyakov"}, "reply_to_user": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1455130545, "post_id": 35320795, "comment_id": 58355911, "body": "Platform Ubuntu. <code>foo</code> is runnung like unit test and I need to get only the summary of <code>foo</code>, but i have no problem with it."}, {"owner": {"reputation": 2183, "user_id": 1200043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tr7dt.jpg?s=128&g=1", "display_name": "maniacalrobot", "link": "https://stackoverflow.com/users/1200043/maniacalrobot"}, "edited": false, "score": 0, "creation_date": 1455139474, "post_id": 35320795, "comment_id": 58361208, "body": "Is this a unit test, or an integration test?  If you&#39;re unit testing, then I suggest stubbing &#39;system&#39;, if you&#39;re integration testing then you might need to look into manipulating stdin and stdout"}, {"owner": {"reputation": 1217, "user_id": 5511520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/baaabef4e4f62eee165869427acd0472?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Belyakov", "link": "https://stackoverflow.com/users/5511520/mike-belyakov"}, "edited": false, "score": 0, "creation_date": 1455145822, "post_id": 35320795, "comment_id": 58364115, "body": "It is an integration test, so, I can not stub it. So, if I understend you right you suggest to do somethinng like <code>$stdin.write &quot;\\n&quot;</code>, but I get the error, <code>IOError: not opened for writing</code>."}], "owner": {"reputation": 1217, "user_id": 5511520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/baaabef4e4f62eee165869427acd0472?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Belyakov", "link": "https://stackoverflow.com/users/5511520/mike-belyakov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1455130486, "creation_date": 1455122036, "last_edit_date": 1455130486, "question_id": 35320795, "link": "https://stackoverflow.com/questions/35320795/rspec-tests-for-cli-tool-user-input-simulation", "title": "Rspec tests for CLI tool. User input simulation", "body": "<p>I have function, which i need to cover tests. function looks like</p>\n\n<pre><code>def foo\n  system 'bar'\nend\n</code></pre>\n\n<p>And <code>foo</code> wait for user input, which i have to provide. How I can provide user input?</p>\n\n<p>PS: I need it under Ubuntu.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "asset-pipeline"], "answers": [{"comments": [{"owner": {"reputation": 1492, "user_id": 2087724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6fb7ff7971e608fe28be6876b1245d40?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/2087724/greg"}, "edited": false, "score": 0, "creation_date": 1500496703, "post_id": 35323364, "comment_id": 77368323, "body": "You sir are a hero!"}, {"owner": {"reputation": 1051, "user_id": 5451285, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/KnO3v.jpg?s=128&g=1", "display_name": "PrimeTimeTran", "link": "https://stackoverflow.com/users/5451285/primetimetran"}, "edited": false, "score": 0, "creation_date": 1518324668, "post_id": 35323364, "comment_id": 84455716, "body": "Confirmed this resolved the issue for me on 5.1.3.   Thanks bro!"}, {"owner": {"reputation": 1004, "user_id": 2091331, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ff378547e4b88acd5cd7b4f9b15b956?s=128&d=identicon&r=PG", "display_name": "Jbur43", "link": "https://stackoverflow.com/users/2091331/jbur43"}, "edited": false, "score": 0, "creation_date": 1518624783, "post_id": 35323364, "comment_id": 84585206, "body": "Glad it helped!"}], "tags": [], "owner": {"reputation": 1004, "user_id": 2091331, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ff378547e4b88acd5cd7b4f9b15b956?s=128&d=identicon&r=PG", "display_name": "Jbur43", "link": "https://stackoverflow.com/users/2091331/jbur43"}, "is_accepted": true, "score": 11, "last_activity_date": 1504656853, "last_edit_date": 1504656853, "creation_date": 1455129737, "answer_id": 35323364, "question_id": 35320418, "link": "https://stackoverflow.com/questions/35320418/static-image-assets-in-rails-app-not-displaying-on-heroku-production/35323364#35323364", "title": "Static image assets in rails app not displaying on Heroku production", "body": "<p>If you came to this post and you are using Heroku, Heroku will accept your images only if you use the image file extension.</p>\n\n<p>This will work:</p>\n\n<pre><code>&lt;%= image_tag \"lab49.png\", size: \"80x30\" %&gt;\n</code></pre>\n\n<p>This will not work (although it will locally):</p>\n\n<pre><code>&lt;%= image_tag \"lab49\", size: \"80x30\" %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 6932891, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MJm2mCGeFA8/AAAAAAAAAAI/AAAAAAAAAA4/yWR8AMicdwo/photo.jpg?sz=128", "display_name": "Peter Tascio", "link": "https://stackoverflow.com/users/6932891/peter-tascio"}, "is_accepted": false, "score": 2, "last_activity_date": 1504632164, "creation_date": 1504632164, "answer_id": 46060336, "question_id": 35320418, "link": "https://stackoverflow.com/questions/35320418/static-image-assets-in-rails-app-not-displaying-on-heroku-production/46060336#46060336", "title": "Static image assets in rails app not displaying on Heroku production", "body": "<p>Something to watch out for: \nI had jpeg files in my assets/images folder. When I ran rake assets:precompile they were turned into .jpg files. After renaming them in my assets/images folder to .jpg, precompiling, and pushing again they displayed on Heroku just fine.</p>\n"}], "owner": {"reputation": 1004, "user_id": 2091331, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ff378547e4b88acd5cd7b4f9b15b956?s=128&d=identicon&r=PG", "display_name": "Jbur43", "link": "https://stackoverflow.com/users/2091331/jbur43"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1399, "favorite_count": 0, "accepted_answer_id": 35323364, "answer_count": 2, "score": 4, "last_activity_date": 1504656853, "creation_date": 1455121120, "last_edit_date": 1455129759, "question_id": 35320418, "link": "https://stackoverflow.com/questions/35320418/static-image-assets-in-rails-app-not-displaying-on-heroku-production", "title": "Static image assets in rails app not displaying on Heroku production", "body": "<p>I tried pre-compiling my images before deployment using the command:</p>\n\n<p><code>$ RAILS_ENV=production bin/rake assets:precompile</code></p>\n\n<p>I am using <code>image_tag</code>'s in my templates that work in development.</p>\n\n<p>Update: <code>config.serve_static_files</code> is said to default to true in dev, but then is turned off in production because the assets should be provided via your web server. I currently am just using the free tier on heroku and am still running webrick, so I have this set to true, but no luck.</p>\n\n<p>Update 2: When I set <code>config.serve_static_files</code> to <code>false</code>, heroku does not see any of my assets, all my stylings go away and images remain unfound. Although heroku does send a warning message upon pushing to master saying that all \"<code>config.serve_static_files</code> does is enables serving everything in the public folder and is unrelated to the asset pipeline.\". I suppose it is unrelated to the asset pipeline in that it is just serving up the assets in the public folder and does not look at our assets directory. I also see that heroku runs the precompile command upon deployment, so I don't need to do that each time. </p>\n\n<p>This makes me wonder if the way I am calling my assets using the <code>image_tag</code> could be the problem, but I am not sure why that would be?</p>\n\n<p>Update 3: The rails guide for the asset pipeline says \"In regular views you can access images in the public/assets/images directory like this: <code>&lt;%= image_tag \"rails.png\" %&gt;</code>. I am calling for my image using this convention like so <code>&lt;%= image_tag(\"lab49\", size: \"80x30\") %&gt;</code>, but the image will still not appear. </p>\n\n<p>Update 4: See my answer.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "minitest"], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 1, "last_activity_date": 1455121348, "creation_date": 1455121348, "answer_id": 35320490, "question_id": 35320375, "link": "https://stackoverflow.com/questions/35320375/how-can-i-stub-out-a-method-that-was-defined-in-a-parent-controller/35320490#35320490", "title": "How can I stub out a method that was defined in a parent controller?", "body": "<p>it most likely should be <code>SessionsController</code> (plural), but not that it matters here.</p>\n\n<pre><code>allow_any_instance_of(SessionController).to receive(:auth_user).and_return(user)\n</code></pre>\n"}], "owner": {"reputation": 1059, "user_id": 2304441, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/n2dEA.jpg?s=128&g=1", "display_name": "benbot", "link": "https://stackoverflow.com/users/2304441/benbot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1455125274, "creation_date": 1455121010, "last_edit_date": 1455125274, "question_id": 35320375, "link": "https://stackoverflow.com/questions/35320375/how-can-i-stub-out-a-method-that-was-defined-in-a-parent-controller", "title": "How can I stub out a method that was defined in a parent controller?", "body": "<p>I defined a little method named <code>auth_user</code> in the <code>ApplicationController</code> of my app. I set it as a <code>before_action</code> in my <code>SessionController</code>. </p>\n\n<p>How can I stub out that <code>auth_user</code> method from the <code>SessionController</code> test?</p>\n\n<p>EDIT: I'm using minitest</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "websocket", "ruby-on-rails-5", "actioncable"], "comments": [{"owner": {"reputation": 89, "user_id": 2590047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IIcls.jpg?s=128&g=1", "display_name": "samarth", "link": "https://stackoverflow.com/users/2590047/samarth"}, "edited": false, "score": 0, "creation_date": 1479557146, "post_id": 35320193, "comment_id": 68614819, "body": "Have you solved it yet?"}, {"owner": {"reputation": 89, "user_id": 2590047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IIcls.jpg?s=128&g=1", "display_name": "samarth", "link": "https://stackoverflow.com/users/2590047/samarth"}, "edited": false, "score": 0, "creation_date": 1479720004, "post_id": 35320193, "comment_id": 68660291, "body": "I&#39;ve resolved this issue. actually there are 3 steps to do that: <b>A) use wss://example.com/cable 2) change port (from 80 to something else) 3) Add your ip in firewall exception.</b>"}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 2590047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IIcls.jpg?s=128&g=1", "display_name": "samarth", "link": "https://stackoverflow.com/users/2590047/samarth"}, "edited": false, "score": 0, "creation_date": 1479557022, "post_id": 35552006, "comment_id": 68614780, "body": "I&#39;ve changed it. but still no luck :(  here is my config file looks like: <code>location &#47;cable {     proxy_http_version 1.1;     proxy_set_header Upgrade $http_upgrade;     proxy_set_header Connection &quot;upgrade&quot;;     passenger_app_group_name gorails_websocket;     passenger_force_max_concurrent_requests_per_process 0;   }</code>"}, {"owner": {"reputation": 4480, "user_id": 7543162, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ww9C6.png?s=128&g=1", "display_name": "oldboy", "link": "https://stackoverflow.com/users/7543162/oldboy"}, "edited": false, "score": 0, "creation_date": 1544950732, "post_id": 35552006, "comment_id": 94450247, "body": "is it even possible to use websockets with passenger on an apache server (with nodejs, not ruby)??"}], "tags": [], "owner": {"reputation": 1643, "user_id": 3184768, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eae0941f120ed67e0077cdac5df693bc?s=128&d=identicon&r=PG&f=1", "display_name": "KeithP", "link": "https://stackoverflow.com/users/3184768/keithp"}, "is_accepted": false, "score": 0, "last_activity_date": 1456139171, "last_edit_date": 1495535568, "creation_date": 1456139171, "answer_id": 35552006, "question_id": 35320193, "link": "https://stackoverflow.com/questions/35320193/rails-5-error-during-websocket-handshake-connection-header-value-must-conta/35552006#35552006", "title": "Rails 5 - Error during WebSocket handshake: &#39;Connection&#39; header value must contain &#39;Upgrade&#39;", "body": "<p>The webserver will need to upgrade the websocket connection so the connection can persist. I'm guessing this is not happening from the jscript error you see.</p>\n\n<p>If you were using Nginx here is how you would do it using a Nginx reverse proxy configuration: <a href=\"https://stackoverflow.com/questions/34536926/actioncable-on-aws-error-during-websocket-handshake-unexpected-response-code\">ActionCable on AWS: Error during WebSocket handshake: Unexpected response code: 404</a></p>\n\n<p>This is the key part:</p>\n\n<pre><code>      # enables WS support\n      location /cable {\n        proxy_pass http://backend;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n      }\n</code></pre>\n\n<p>Also consider using puma instead of passenger.</p>\n"}], "owner": {"reputation": 19398, "user_id": 435471, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WvUmQ.jpg?s=128&g=1", "display_name": "Kyle Decot", "link": "https://stackoverflow.com/users/435471/kyle-decot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2863, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456228418, "creation_date": 1455120562, "last_edit_date": 1456228418, "question_id": 35320193, "link": "https://stackoverflow.com/questions/35320193/rails-5-error-during-websocket-handshake-connection-header-value-must-conta", "title": "Rails 5 - Error during WebSocket handshake: &#39;Connection&#39; header value must contain &#39;Upgrade&#39;", "body": "<p>I'm currently trying to deploy an application using Rails 5.0.0.beta2 but when I load the application in my javascript console I am seeing</p>\n\n<blockquote>\n  <p>WebSocket connection to 'wss://example.com/cable' failed: Error during WebSocket handshake: 'Connection' header value must contain 'Upgrade'</p>\n</blockquote>\n\n<p>I'm using Apache/Passenger as the web server.</p>\n\n<p>Has anyone else run into this issue and if so how did you solve it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nomethoderror"], "comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1455119324, "post_id": 35319612, "comment_id": 58348167, "body": "Which lines are 38 and 91 in <code>lib&#47;google_calendar_api.rb</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1455124665, "post_id": 35319900, "comment_id": 58352180, "body": "j-dexx, with which method should I check if it exists?"}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "reply_to_user": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1455181103, "post_id": 35319900, "comment_id": 58377139, "body": "You could use <code>.present?</code> but you should be able to use a standard if"}, {"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1455186970, "post_id": 35319900, "comment_id": 58381185, "body": "j-dexx, could you update your answer? I ran into this one a few times already and I&#39;d like to make sure from now I will use it properly every time. So if you could show me some sample code and list some situations where this approach should be used it would be super awesome."}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "reply_to_user": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1455188121, "post_id": 35319900, "comment_id": 58382001, "body": "Done, it&#39;s a simple if that you could probably refactor to improve"}, {"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1455189648, "post_id": 35319900, "comment_id": 58383038, "body": "j-dexx can you put it into my sample code? My main question is that what I should return when it&#39;s nil."}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "reply_to_user": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1455190525, "post_id": 35319900, "comment_id": 58383639, "body": "I would assume an empty array as an array is whatever is calling your method is expecting."}, {"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1455193924, "post_id": 35319900, "comment_id": 58386103, "body": "j-dexx, sorry for being so slow, but I&#39;m not good at ruby yet. Could you tell me what part I should put in the if statement. Let&#39;s say I will put in it the return formatted_event_array as well. In that case the result will be returned if the statement is not true,but then result doesn&#39;t even exist so I guess I will get another type of error. Could you put your answer in my code? Thanks for being so helpful!"}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "reply_to_user": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1455196422, "post_id": 35319900, "comment_id": 58387763, "body": "<code>if</code> it exists process it, <code>else</code> return the empty <code>formatted_event_array</code>"}, {"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1455203279, "post_id": 35319900, "comment_id": 58392918, "body": "j-dexx, one last question. Why is not enough to check only parsed_body[&#39;calendars&#39;][social_object.email][&#39;busy&#39;] rather than parsed_body[&#39;calendars&#39;] &amp;&amp; parsed_body[&#39;calendars&#39;][social_object.email] &amp;&amp; parsed_body[&#39;calendars&#39;][social_object.email][&#39;busy&#39;] ?"}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "reply_to_user": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1455203969, "post_id": 35319900, "comment_id": 58393437, "body": "Because that will raise an error if any of the preceding method calls fail"}], "tags": [], "owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "is_accepted": true, "score": 2, "last_activity_date": 1455188083, "last_edit_date": 1455188083, "creation_date": 1455119858, "answer_id": 35319900, "question_id": 35319612, "link": "https://stackoverflow.com/questions/35319612/rails-nomethoderror-only-in-production/35319900#35319900", "title": "rails nomethoderror only in production", "body": "<p>Effectively it's this</p>\n\n<pre><code>result = JSON.parse(result_raw.body)['calendars'][social_object.email]['busy']\n</code></pre>\n\n<p>If <code>JSON.parse(result_raw.body)['calendars'][social_object.email]['busy']</code> is nil then this</p>\n\n<pre><code>result.each do |event|\n# code\nend\n</code></pre>\n\n<p>Is attempting to iterate over nil.</p>\n\n<p>You could fix that with a guard clause</p>\n\n<pre><code>return formatted_event_array if result.nil?\nresult.each do |event|\n# code\nend\n</code></pre>\n\n<p>But to me that's papering over the cracks somewhat.  The other error is because of that same line.</p>\n\n<p>Assuming \n<code>parsed_body = JSON.parse(result_raw.body)</code></p>\n\n<p>By chaining the hash calls without checking it'll throw your error if\n<code>parsed_body['calendars']</code> is nil or if\n<code>parsed_body['calendars'][social_object.email]</code> is nil</p>\n\n<p>So effectively you want to check if those both exist, and that <code>parsed_body['calendars'][social_object.email]['busy']</code> exists.  If they don't then presumably return the empty array</p>\n\n<p>So</p>\n\n<pre><code>if parsed_body['calendars'] &amp;&amp; parsed_body['calendars'][social_object.email] &amp;&amp; parsed_body['calendars'][social_object.email]['busy']\n</code></pre>\n"}], "owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 35319900, "answer_count": 1, "score": 0, "last_activity_date": 1455188083, "creation_date": 1455119038, "last_edit_date": 1455124543, "question_id": 35319612, "link": "https://stackoverflow.com/questions/35319612/rails-nomethoderror-only-in-production", "title": "rails nomethoderror only in production", "body": "<p>I have a rails app with google calendar API integrated. App is deployed on heroku. The following code is working in localhost but I getting nomethoderror in production as shown below. Why is this happening?</p>\n\n<p>errors for get_own_events:</p>\n\n<pre><code>Attempting refresh of access token &amp; retry of request\n2016-02-10T13:24:34.161850+00:00 app[web.1]: \n2016-02-10T13:24:34.161853+00:00 app[web.1]: NoMethodError (undefined method `each' for nil:NilClass):\n2016-02-10T13:24:34.161854+00:00 app[web.1]:   lib/google_calendar_api.rb:91:in `get_own_events'\n2016-02-10T13:24:34.161855+00:00 app[web.1]:   app/controllers/events_controller.rb:18:in `index'\n</code></pre>\n\n<p>errors for get busy events:</p>\n\n<pre><code>2016-02-10T13:24:00.716112+00:00 app[web.1]: Attempting refresh of access token &amp; retry of request\n2016-02-10T13:24:00.779120+00:00 app[web.1]: NoMethodError (undefined method `[]' for nil:NilClass):\n2016-02-10T13:24:00.779121+00:00 app[web.1]:   lib/google_calendar_api.rb:38:in `get_busy_events'\n2016-02-10T13:24:00.779121+00:00 app[web.1]:   app/controllers/events_controller.rb:20:in `index'\n</code></pre>\n\n<p>events_controller</p>\n\n<pre><code>  if params['start'] &amp;&amp; params['end']\n    @start_time = params['start'].to_datetime.rfc3339\n    @end_time = params['end'].to_datetime.rfc3339\n    @timezone = params['timezoneParam']\n    if @user == @current_user\n      @results = get_own_events(@google, @start_time, @end_time, @timezone)\n    else\n      @results = get_busy_events(@google, @start_time, @end_time, @timezone)\n    end\n  end\n</code></pre>\n\n<p>get_own_events method:</p>\n\n<pre><code>def get_own_events(social_object, start_time, end_time, timezone)\n  client = init_google_api_calendar_client(social_object)\n  old_token = client.authorization.access_token\n  service = client.discovered_api('calendar', 'v3')\n\n  #API request/response\n  result_raw = client.execute(\n    :api_method =&gt; service.events.list,\n    :parameters =&gt; { 'calendarId' =&gt; social_object.email,\n                   'timeMin' =&gt; start_time,\n                   'timeMax' =&gt; end_time,\n                   'timeZone' =&gt; timezone },\n    :headers =&gt; {'Content-Type' =&gt; 'application/json'})\n\n  #token refresh if needed\n  new_token = client.authorization.access_token\n  if old_token != new_token\n    social_object.update_attribute(:token, new_token)\n    get_own_events(social_object, start_time, end_time, timezone)\n  end\n\n  #API response parsing\n  result = JSON.parse(result_raw.body)['items']\n  #result_timezone = JSON.parse(result_raw.body)['timeZone']\n\n  #changing response to fullcalendar format\n  formatted_event_array = []\n\n  result.each do |event| #THIS IS LINE 91\n    start_time = event['start']['dateTime'].to_datetime.rfc822\n    end_time = event['end']['dateTime'].to_datetime.rfc822\n    #timezone = result_timezone\n    all_day = false\n    title = event['summary']\n    formatted_event = {}\n    formatted_event['title'] = title\n    formatted_event['start'] = start_time\n    formatted_event['end'] = end_time\n    formatted_event['allDay'] = all_day\n    formatted_event_array &lt;&lt; formatted_event\n  end\n\n  return formatted_event_array\nend\n</code></pre>\n\n<p>get_busy_events method:</p>\n\n<pre><code>def get_busy_events(social_object, start_time, end_time, timezone)\n  client = init_google_api_calendar_client(social_object)\n  old_token = client.authorization.access_token\n  service = client.discovered_api('calendar', 'v3')\n\n  #API request/response\n  result_raw = client.execute(\n    :api_method =&gt; service.freebusy.query,\n    :body =&gt; JSON.dump({ \n            :timeMin =&gt; start_time,\n            :timeMax =&gt; end_time,\n            :timeZone =&gt; timezone,\n            :items =&gt; [{ :id =&gt; social_object.email }]}),\n    :headers =&gt; {'Content-Type' =&gt; 'application/json'})\n\n  #token refresh if needed\n  new_token = client.authorization.access_token\n  if old_token != new_token\n    social_object.update_attribute(:token, new_token)\n    get_busy_events(social_object,start_time, end_time, timezone)\n  end\n\n  #API response parsing \n  result = JSON.parse(result_raw.body)['calendars'][social_object.email]['busy'] #THIS IS LINE 38\n\n  #changing response to fullcalendar format\n  formatted_event_array = []\n\n  result.each do |event|\n    start_time = event['start'].to_datetime.rfc822\n    end_time = event['end'].to_datetime.rfc822\n    formatted_event = {}\n    formatted_event['title'] = 'busy'\n    formatted_event['start'] = start_time\n    formatted_event['end'] = end_time\n    #no allDay in freebusy response, so time difference must be checked\n    if event['start'].to_datetime + 1.day &lt;= event['end'].to_datetime\n      formatted_event['allDay'] = true\n    else\n      formatted_event['allDay'] = false\n    end\n    formatted_event_array &lt;&lt; formatted_event \n  end\n\n  return formatted_event_array\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "trailblazer"], "answers": [{"tags": [], "owner": {"reputation": 991, "user_id": 3494005, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/562923750/picture?type=large", "display_name": "Sifnos", "link": "https://stackoverflow.com/users/3494005/sifnos"}, "is_accepted": false, "score": 0, "last_activity_date": 1455136437, "last_edit_date": 1455136437, "creation_date": 1455125034, "answer_id": 35321865, "question_id": 35319429, "link": "https://stackoverflow.com/questions/35319429/cells-4-0-4-uninitialized-constant-cellconcept-nameerror/35321865#35321865", "title": "Cells-4.0.4 : uninitialized constant Cell::Concept (NameError)", "body": "<p>Here is the Trailblazer related part from a project already in production some gems declarations might be an overkill but, well it works:</p>\n\n<pre><code>gem \"trailblazer\",       \"1.1.0\"\ngem \"trailblazer-rails\", \"&gt;= 0.2.3\"\ngem \"representable\",     \"3.0.0\"\ngem \"reform\",            \"2.1.0\"\ngem \"reform-rails\"\ngem \"disposable\"\n\ngem \"virtus\"\n\ngem \"tyrant\", github: \"apotonick/tyrant\"\n\ngem \"cells\", \"4.0.3\"\ngem \"cells-haml\", \"0.0.8\"\ngem \"haml\", github: \"haml/haml\", ref: \"7c7c169\"\ngem \"kaminari-cells\"\n\ngem \"paperdragon\", \"&gt;= 0.0.10\"\ngem \"file_validators\", \"~&gt; 1.2\"\ngem \"dragonfly-s3_data_store\"\n\ngem \"roar\", github: \"apotonick/roar\"\n\ngem \"pundit\"\n\ngem \"rails-timeago\"\ngem \"email_validator\"\n</code></pre>\n\n<h1>Application.rb</h1>\n\n<pre><code>require File.expand_path('../boot', __FILE__)\nrequire 'rails/all'\n\n# Require the gems listed in Gemfile, including any gems\n# you've limited to :test, :development, or :production.\nBundler.require(*Rails.groups)\n\nmodule Appname\n  class Application &lt; Rails::Application\n    ...\n  end\nend\n\n# railties have to be loaded here.\nrequire 'trailblazer/rails/railtie'\n</code></pre>\n\n<h1>Trailblazer initializer</h1>\n\n<pre><code>require \"trailblazer/operation/dispatch\"\n# require \"trailblazer/operation/representer\"\n# require \"trailblazer/operation/responder\"\n\nTrailblazer::Operation.class_eval do\n  include Trailblazer::Operation::Dispatch\nend\n\nrequire \"roar/json/hal\"\n\n::Roar::Representer.module_eval do\n  include Rails.application.routes.url_helpers\n  # include Rails.app.routes.mounted_helpers\n\n  def default_url_options\n    {}\n  end\nend\n</code></pre>\n\n<h1>Cells initializer:</h1>\n\n<pre><code>ActiveSupport::Notifications.subscribe \"read_fragment.cells\" do |name, start, finish, id, payload|\n  Rails.logger.debug \"CACHE: #{payload}\"\nend\n\nActiveSupport::Notifications.subscribe \"write_fragment.cells\" do |name, start, finish, id, payload|\n  Rails.logger.debug \"CACHE write: #{payload}\"\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 962, "user_id": 2011580, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/E9Ket.png?s=128&g=1", "display_name": "James B. Byrne", "link": "https://stackoverflow.com/users/2011580/james-b-byrne"}, "edited": false, "score": 0, "creation_date": 1455581293, "post_id": 35331446, "comment_id": 58543302, "body": "Actually, no.  making this change has no effect on the outcome.  The error remains.  See the answer below."}], "tags": [], "owner": {"reputation": 518, "user_id": 465070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fe13386ba69a128e9fadc19ae9d96be?s=128&d=identicon&r=PG", "display_name": "apotonick", "link": "https://stackoverflow.com/users/465070/apotonick"}, "is_accepted": false, "score": 0, "last_activity_date": 1455168569, "creation_date": 1455168569, "answer_id": 35331446, "question_id": 35319429, "link": "https://stackoverflow.com/questions/35319429/cells-4-0-4-uninitialized-constant-cellconcept-nameerror/35331446#35331446", "title": "Cells-4.0.4 : uninitialized constant Cell::Concept (NameError)", "body": "<p>You have to say <code>::Cell::Concept</code> not <code>Cell::Concept</code>, Ruby will look it up in the wrong namespace otherwise.</p>\n"}, {"tags": [], "owner": {"reputation": 962, "user_id": 2011580, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/E9Ket.png?s=128&g=1", "display_name": "James B. Byrne", "link": "https://stackoverflow.com/users/2011580/james-b-byrne"}, "is_accepted": true, "score": 1, "last_activity_date": 1455581607, "creation_date": 1455581607, "answer_id": 35421494, "question_id": 35319429, "link": "https://stackoverflow.com/questions/35319429/cells-4-0-4-uninitialized-constant-cellconcept-nameerror/35421494#35421494", "title": "Cells-4.0.4 : uninitialized constant Cell::Concept (NameError)", "body": "<p>Explicitly adding the gem <code>cells</code> into the project <code>Gemfile</code> solved the issue.</p>\n\n<p>Because <code>cells</code> is a dependency of <code>cells-hamlit</code> I only listed <code>cells-hamlit</code> in the <code>Gemfile</code>.  This did indeed cause the <code>cells</code> gem to be included in the project, which was verified by running <code>bundle list</code>.  But it was not enough to have the gem loaded into the application.</p>\n\n<p>This is a side-effect of <code>Bundler</code> of which I was previously unaware.</p>\n"}], "owner": {"reputation": 962, "user_id": 2011580, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/E9Ket.png?s=128&g=1", "display_name": "James B. Byrne", "link": "https://stackoverflow.com/users/2011580/james-b-byrne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 587, "favorite_count": 0, "accepted_answer_id": 35421494, "answer_count": 3, "score": 0, "last_activity_date": 1455581607, "creation_date": 1455118583, "last_edit_date": 1455124574, "question_id": 35319429, "link": "https://stackoverflow.com/questions/35319429/cells-4-0-4-uninitialized-constant-cellconcept-nameerror", "title": "Cells-4.0.4 : uninitialized constant Cell::Concept (NameError)", "body": "<p>Environment:</p>\n\n<pre><code>CentOS-6.7 / OSX-10.9.5\nRuby 2.2.3p173\nRails 4.2.5.1\nTrailblazer 1.1.0\n</code></pre>\n\n<p>I am working through the examples in the Trailblazer book mapping them to a current project.  I had things working more or less as expected up to the point when I switched from ActionView to Cells. I moved the templates into <code>app/concepts/ar_invoice/views</code> and created <code>app/concepts/ar_invoice/cell.rb</code>.  Following this change when I start the <code>rails server</code> I get this error:</p>\n\n<pre><code>app/concepts/ar_invoice/cell.rb:1:in `&lt;top (required)&gt;': \n  uninitialized constant Cell::Concept (NameError)\n</code></pre>\n\n<p>The code involved is this:</p>\n\n<p>The Gemfile:</p>\n\n<pre><code>Gems included by the bundle:\n  * ISO3166P2 (0.0.1)\n  * actionmailer (4.2.5.1)\n  * actionpack (4.2.5.1)\n  * actionview (4.2.5.1)\n  * activejob (4.2.5.1)\n  * activemodel (4.2.5.1)\n  * activerecord (4.2.5.1)\n  * activesupport (4.2.5.1)\n  * addressable (2.4.0)\n  * annotate (2.7.0)\n  * ansi (1.5.0)\n  * arel (6.0.3)\n  * autoprefixer-rails (6.3.1)\n  * axiom-types (0.1.1)\n  * bcrypt (3.1.10)\n  * bootstrap-sass (3.3.6)\n  * bootstrap3-datetimepicker-rails (4.17.37)\n  * builder (3.2.2)\n  * bundler (1.11.2)\n  * byebug (8.2.2)\n  * capistrano (3.4.0)\n  * capistrano-bundler (1.1.4)\n  * capistrano-rails (1.1.6)\n  * capybara (2.6.2)\n  * cells (4.0.4)\n  * cells-hamlit (0.1.1)\n  * coercible (1.0.0)\n  * coffee-rails (4.1.1)\n  * coffee-script (2.4.1)\n  * coffee-script-source (1.10.0)\n  * concurrent-ruby (1.0.0)\n  * cucumber (2.3.2)\n  * cucumber-core (1.4.0)\n  * cucumber-rails (1.4.3)\n  * cucumber-wire (0.0.1)\n  * daemons (1.2.3)\n  * database_cleaner (1.5.1)\n  * debug_inspector (0.0.2)\n  * declarative (0.0.5)\n  * declarative_authorization (0.5.7)\n  * descendants_tracker (0.0.4)\n  * devise (3.5.6)\n  * devise-encryptable (0.2.0)\n  * devise_security_extension (0.9.2)\n  * diff-lcs (1.2.5)\n  * disposable (0.2.5)\n  * equalizer (0.0.11)\n  * erubis (2.7.0)\n  * eventmachine (1.0.9.1)\n  * execjs (2.6.0)\n  * gherkin (3.2.0)\n  * globalid (0.3.6)\n  * hamlit (2.2.1)\n  * hamlit-block (0.3.0)\n  * hamlit-rails (0.1.0)\n  * humanize (1.1.0)\n  * i18n (0.7.0)\n  * ice_nine (0.11.2)\n  * jbuilder (2.4.0)\n  * jquery-rails (4.1.0)\n  * json (1.8.3)\n  * loofah (2.0.3)\n  * mail (2.6.3)\n  * mime-types (2.99)\n  * mini_portile2 (2.0.0)\n  * minitest (5.8.4)\n  * minitest-capybara (0.7.2)\n  * minitest-metadata (0.5.3)\n  * minitest-rails (2.2.0)\n  * minitest-rails-capybara (2.1.1)\n  * minitest-reporters (1.1.7)\n  * modernizr-rails (2.7.1)\n  * momentjs-rails (2.11.0)\n  * multi_json (1.11.2)\n  * multi_test (0.1.2)\n  * net-scp (1.2.1)\n  * net-ssh (3.0.2)\n  * nokogiri (1.6.7)\n  * orm_adapter (0.5.0)\n  * paper_trail (4.1.0)\n  * partially_useful (0.2.2)\n  * pg (0.18.4)\n  * rack (1.6.4)\n  * rack-test (0.6.3)\n  * rails (4.2.5.1)\n  * rails-deprecated_sanitizer (1.0.3)\n  * rails-dom-testing (1.0.7)\n  * rails-html-sanitizer (1.0.3)\n  * railties (4.2.5.1)\n  * rake (10.5.0)\n  * rdoc (4.2.1)\n  * reform (2.1.0)\n  * representable (3.0.0)\n  * request_store (1.3.0)\n  * responders (2.1.1)\n  * ruby-progressbar (1.7.5)\n  * sass (3.4.21)\n  * sass-rails (5.0.4)\n  * sdoc (0.4.1)\n  * smarter_csv (1.1.0)\n  * spring (1.6.2)\n  * sprockets (3.5.2)\n  * sprockets-rails (3.0.1)\n  * sqlite3 (1.3.10)\n  * sshkit (1.8.1)\n  * temple (0.7.6)\n  * thin (1.6.4)\n  * thor (0.19.1)\n  * thread_safe (0.3.5)\n  * tilt (2.0.2)\n  * trailblazer (1.1.0)\n  * trailblazer-loader (0.0.9)\n  * trailblazer-rails (0.2.4)\n  * turbolinks (2.5.3)\n  * tzinfo (1.2.2)\n  * uber (0.0.15)\n  * uglifier (2.7.2)\n  * virtus (1.0.5)\n  * warden (1.2.6)\n  * web-console (3.1.1)\n  * xpath (2.0.0)\n</code></pre>\n\n<p>The application.rb:</p>\n\n<pre><code>#config/application.rb\nrequire File.expand_path('../boot', __FILE__)\n\nrequire \"rails\"\n# Pick the frameworks you want:\nrequire \"active_model/railtie\"\nrequire \"active_job/railtie\"\nrequire \"active_record/railtie\"\nrequire \"action_controller/railtie\"\nrequire \"action_mailer/railtie\"\nrequire \"action_view/railtie\"\nrequire \"sprockets/railtie\"\n# require \"rails/test_unit/railtie\"\n\n# Require the gems listed in Gemfile, including any gems\n# you've limited to :test, :development, or :production.\nBundler.require(*Rails.groups)\n\nmodule HllThMain\n  class Application &lt; Rails::Application\n    # Use the responders controller from the responders gem\n    config.app_generators.scaffold_controller :responders_controller\n\n    . . .         \n\n    # Do not swallow errors in after_commit/after_rollback callbacks.\n    config.active_record.raise_in_transactional_callbacks = true\n  end\n  require( \"hll_th_main\" )\nend\n\n# For trailBlazer\n# railties have to be loaded here.\n</code></pre>\n\n<p>require 'trailblazer/rails/railtie'</p>\n\n<p>The controller (ar_invoices_controller.rb):</p>\n\n<pre><code>class ARInvoicesController &lt; ApplicationController\n  def create\n    run( ARInvoice::Create )\n  end\n\n# route =&gt; ar_invoices#new\n  def new\n    form( ARInvoice::Create )\n  end\nend\n</code></pre>\n\n<p>The operation.rb:</p>\n\n<pre><code>class ARInvoice &lt; GLTransaction\n\n  class Create &lt; Trailblazer::Operation\n    include( Model )\n\n    model( ARInvoice, :create )\n\n    contract() do\n      property( :invoice_number )\n      property( :currency_code )\n      property( :forex_rate )\n      property( :gl_account_id )\n      property( :effective_from )\n\n      validates( :invoice_number, :presence =&gt; true )\n      validates( :currency_code, :presence =&gt; true )\n    end\n\n    def process( params )\n      # must use instance variable @model\n      @model = ARInvoice.new\n      validate( params[ :ar_invoice ], @model ) do |f|\n        f.save\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>The cell.rb:</p>\n\n<pre><code>class ARInvoice::Cell &lt; Cell::Concept\n\n  def new()\n    render\n  end\n\n  def show()\n    render\n  end\n\n  private\n  def body()\n    model.body\n  end\nend\n</code></pre>\n\n<p>And the view (new.haml):</p>\n\n<pre><code>= simple_form_for( @form ) do |f|\n  = f.input( :invoice_number )\n  = f.input( :currency_code )\n  = f.input( :forex_rate )\n  = f.input( :gl_account_id )\n\n  = f.submit\n</code></pre>\n\n<p>I do not use any Trailblazer/Cells initializers. Can someone point out my error that is causing the exception reported above?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1455118103, "post_id": 35319128, "comment_id": 58347177, "body": "Why are you asking your CSV file for <code>find_by</code>? It seems like you&#39;re supposed to be referencing a model there. Additionally it&#39;s odd that you do a lot of pre-processing on things like <code>vrow[9]</code> only to discard that, using the raw values in your <code>find_or_create_by</code>."}, {"owner": {"reputation": 187, "user_id": 5887199, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9b8069a1d0463ab0a9dbe4e765f9953a?s=128&d=identicon&r=PG&f=1", "display_name": "sam roberts", "link": "https://stackoverflow.com/users/5887199/sam-roberts"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1455118207, "post_id": 35319128, "comment_id": 58347266, "body": "I&#39;m still new to this, ITs only ever run once to populate my db table. Its reading two csv files not just one. So i didn&#39;t think a model would be used here?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1455118258, "post_id": 35319128, "comment_id": 58347301, "body": "What Ruby is saying is there&#39;s no <code>find_by</code> method for a CSV object, which is true. What are you trying to find by event name? Do you mean <code>Event.find_by(...)</code>? If you&#39;re trying to search the CSV itself, you can&#39;t query it that way, you can only use <a href=\"http://ruby-doc.org/stdlib-2.2.0/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow noreferrer\">methods defined in the API</a>, no amount of wishful thinking will change this. To find your link you&#39;ll need to search through the CSV manually."}, {"owner": {"reputation": 187, "user_id": 5887199, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9b8069a1d0463ab0a9dbe4e765f9953a?s=128&d=identicon&r=PG&f=1", "display_name": "sam roberts", "link": "https://stackoverflow.com/users/5887199/sam-roberts"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1455119100, "post_id": 35319128, "comment_id": 58347984, "body": "What i was trying to do is search the csv, I didn&#39;t mean Event.find_by, i suppose i could try a long winded method of using the event.find_by"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1455119926, "post_id": 35319128, "comment_id": 58348644, "body": "If you&#39;re trying to search the CSV then you&#39;ll have to iterate through each row, compile an index of names, and write code to search through that using a regular expression or something like it. If you&#39;re going to call methods on an object, check the API first to be sure it exists. The CSV documentation I linked to gives you the specifics on what&#39;s available."}], "owner": {"reputation": 187, "user_id": 5887199, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/9b8069a1d0463ab0a9dbe4e765f9953a?s=128&d=identicon&r=PG&f=1", "display_name": "sam roberts", "link": "https://stackoverflow.com/users/5887199/sam-roberts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1455125052, "creation_date": 1455117800, "last_edit_date": 1455125052, "question_id": 35319128, "link": "https://stackoverflow.com/questions/35319128/how-to-compare-data-in-two-csv-tables-and-save-into-one-table", "title": "How to compare data in two CSV tables and save into one table", "body": "<p>Here's what I have:</p>\n\n<pre><code>viacsv.each do |vrow|\n  viadate = vrow[10].split(' ')[0]\n  viatime = vrow[10].split(' ')[1]\n  vianame = vrow[8]\n  viaurl = vrow[9]\n  csv.each do |row|\n    Event.find_or_create_by(time: row[9], date: row[10], eventurl1: row[8], eventname: row[7])\n    link = viacsv.find_by(['eventname LIKE ?', \"%#{vianame}%\"])\n    byebug\n  end\nend\n</code></pre>\n\n<p>at the moment I can't reach the <code>byebug</code> statement because I get this error:</p>\n\n<pre><code>NoMethodError: undefined method `find_by' for #&lt;CSV::Table mode:col_or_row row_count:27697&gt;\n</code></pre>\n\n<p>Any ideas why?</p>\n\n<p>Each row will search <code>viacsv</code> for <code>eventname</code> in the <code>vianame</code> column. If it can't find it it'll skip it, if it can find it, it will put the data inside the <code>deep_link</code> column for the row into the EventDB under the <code>Link_2</code> column.</p>\n"}, {"tags": ["ruby", "linker", "d", "extconf.rb"], "comments": [{"owner": {"reputation": 24524, "user_id": 1457000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3irT.jpg?s=128&g=1", "display_name": "Adam D. Ruppe", "link": "https://stackoverflow.com/users/1457000/adam-d-ruppe"}, "edited": false, "score": 0, "creation_date": 1455117485, "post_id": 35318856, "comment_id": 58346651, "body": "Did you link in the Phobos shared library too? Looks like no, try adding <code>-defaultlib=libphobos2.so</code> to the <code>dmd</code> command."}, {"owner": {"reputation": 427, "user_id": 590700, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa5700e72e12fa378cb6e779bb4157ad?s=128&d=identicon&r=PG", "display_name": "Niels Tolstrup", "link": "https://stackoverflow.com/users/590700/niels-tolstrup"}, "reply_to_user": {"reputation": 24524, "user_id": 1457000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3irT.jpg?s=128&g=1", "display_name": "Adam D. Ruppe", "link": "https://stackoverflow.com/users/1457000/adam-d-ruppe"}, "edited": false, "score": 0, "creation_date": 1455117871, "post_id": 35318856, "comment_id": 58346986, "body": "I have tried adding the libphobos2.so to the dmd command (see revised code above), but it does not change the outcome, thanks for the suggestion anyway. Also the phobos2 library was already in the cflags."}, {"owner": {"reputation": 1979, "user_id": 1634531, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/02fc16c85eab4a8e38f1c5ac1ae92a17?s=128&d=identicon&r=PG", "display_name": "weltensturm", "link": "https://stackoverflow.com/users/1634531/weltensturm"}, "edited": false, "score": 0, "creation_date": 1455178740, "post_id": 35318856, "comment_id": 58375665, "body": "Your way of listing files and commands in a single code block is tedious to read."}], "answers": [{"comments": [{"owner": {"reputation": 427, "user_id": 590700, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa5700e72e12fa378cb6e779bb4157ad?s=128&d=identicon&r=PG", "display_name": "Niels Tolstrup", "link": "https://stackoverflow.com/users/590700/niels-tolstrup"}, "edited": false, "score": 1, "creation_date": 1480160036, "post_id": 39667788, "comment_id": 68855228, "body": "The FFI solution works well and I believe that currently this is the best solution. However maintaining and synchronizing objects between the Ruby and D runtime environment proves to be challenging due to the very limited FFI functionality."}], "tags": [], "owner": {"reputation": 1073, "user_id": 5715870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e7d59420f276b45ef3a56a2617dd5ea6?s=128&d=identicon&r=PG&f=1", "display_name": "dhrubo_moy", "link": "https://stackoverflow.com/users/5715870/dhrubo-moy"}, "is_accepted": true, "score": 1, "last_activity_date": 1474657107, "creation_date": 1474657107, "answer_id": 39667788, "question_id": 35318856, "link": "https://stackoverflow.com/questions/35318856/link-a-d-library-to-ruby/39667788#39667788", "title": "Link a D library to Ruby", "body": "<p>You can call D from Ruby using the <a href=\"https://github.com/ffi/ffi\" rel=\"nofollow\">Ruby-FFI</a> extension. Take a look at <a href=\"https://wiki.dlang.org/Call_D_from_Ruby_using_FFI\" rel=\"nofollow\">this Wiki</a>, which explains how to do exactly that with examples. Such as the following one:</p>\n\n<p>Create the file \"i.d\" containing</p>\n\n<pre><code>import std.stdio;\n\nextern(C)\nvoid hello()\n{\n    writeln(\"hi from D\");\n}\n</code></pre>\n\n<p>Compile it as a shared library. For example, to compile as a 64-bit shared library on Linux, you can do</p>\n\n<pre><code>dmd -shared -m64 -fPIC -defaultlib=libphobos2.so i.d\n</code></pre>\n\n<p>Create the file \"d.rb\" containing:</p>\n\n<pre><code>require 'rubygems'\nrequire 'ffi'\n\nmodule DInterface\n extend FFI::Library\n ffi_lib './i.so'\n attach_function :rt_init, :rt_init, [], :int\n attach_function :rt_term, :rt_term, [], :int\n attach_function :hello, :hello, [], :void\nend\n\n# call init\nDInterface::rt_init\n\n# our function\nDInterface::hello\n\n# terminate\nDInterface::rt_term\n</code></pre>\n\n<p>Run the Ruby file:</p>\n\n<pre><code>ruby ./d.rb\n</code></pre>\n\n<p>You should see <code>hi from D</code></p>\n"}], "owner": {"reputation": 427, "user_id": 590700, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa5700e72e12fa378cb6e779bb4157ad?s=128&d=identicon&r=PG", "display_name": "Niels Tolstrup", "link": "https://stackoverflow.com/users/590700/niels-tolstrup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 39667788, "answer_count": 1, "score": 3, "last_activity_date": 1474657107, "creation_date": 1455117164, "last_edit_date": 1455117729, "question_id": 35318856, "link": "https://stackoverflow.com/questions/35318856/link-a-d-library-to-ruby", "title": "Link a D library to Ruby", "body": "<p>I would like to call D code from Ruby. I have tried to compile the D code with dmd and use extconf.rb to make a shared object file which I could use in ruby, but my linking fails somehow, the D std library is apparently missing:</p>\n\n<pre><code>    hello.rb:1:in `require_relative': /tmp/druby/hello_c.so: undefined symbol: _D3std5stdio12__ModuleInfoZ - /tmp/druby/hello_c.so (LoadError)\n    from hello.rb:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>Please let me know how to call D code from Ruby.</p>\n\n<p>The code I tried is here:</p>\n\n<pre><code>    mkdir -p /tmp/druby\n    cd /tmp/druby\n    cat -&gt;hello_d.d &lt;&lt;EOF\n    import std.stdio;\n    // a D function that we would like to call from ruby\n    extern(C) void hello_d() nothrow {\n        try { writeln( \"hello from d\"); } catch( Throwable t) {}\n    }\n    EOF\n\n    cat -&gt;hello_d.c &lt;&lt;EOF\n    /* This is a dummy file to trick extconf.rb to include the hello_d.o file, surely this could be done from extconf.rb as well, but how? */\n    EOF\n\n    cat -&gt;hello_c.c &lt;&lt;EOF\n    #include &lt;stdio.h&gt;\n    #include \"ruby.h\"\n\n    /* c function */\n    void hello_c(){\n        printf( \"hello from c\\n\");\n    }\n\n\n    /* ruby function for hello_c */\n    VALUE method_hello_c( VALUE self){\n        hello_c();\n        return Qnil;\n    }\n\n\n    /* ruby function for hello_d */\n    VALUE method_hello_d( VALUE self){\n        if( !rt_init()) { return 1; }\n        hello_d();\n        rt_term();\n        return Qnil;\n    }\n\n\n    /* ruby module and class definition */\n    /* This method must be named \"Init_#{filename.lower}\" */\n    void Init_hello_c() {\n        VALUE hello_module = rb_define_module( \"HelloCModule\");\n        VALUE hello_class  = rb_define_class_under( hello_module, \"HelloC\", rb_cObject);\n        rb_define_method( hello_class, \"hello_c\", method_hello_c, 0);\n        rb_define_method( hello_class, \"hello_d\", method_hello_d, 0);\n    }\n\n    EOF\n\n    cat -&gt;extconf.rb &lt;&lt;EOF\n    # Loads mkmf which is used to make makefiles for Ruby extensions\n    require 'mkmf'\n\n    lib = File.expand_path('../../lib', __FILE__)\n    \\$LOAD_PATH.unshift(lib) unless \\$LOAD_PATH.include?(lib)\n\n    # Give it a name\n    extension_name = 'hello_c'\n\n    # The destination\n    dir_config(extension_name,\".\")\n\n    with_cflags('-fPIC -Wall -O3 -rdynamic -m64 -L/usr/lib/x86_64-linux-gnu -Xlinker --export-dynamic -Xlinker -Bstatic -lphobos2 -Xlinker -Bdynamic -lpthread -lm -lrt -ldl') do\n        create_makefile(extension_name)\n    end\n\n    EOF\n\n    cat -&gt;hello.rb &lt;&lt;EOF\n    require_relative 'hello_c'\n\n    puts \"hello from ruby\"\n\n    hello_c = HelloCModule::HelloC.new\n\n    hello_c.hello_c( )\n\n    EOF\n\n\n    # 1. First make the hello_d.o file\n    dmd -c -fPIC hello_d.d -defaultlib=libphobos2.so\n\n\n    # 2. Make the ruby Makefile\n    ruby extconf.rb\n\n    # 3. Compile the shared library\n    make\n\n    # 4. Try to call it from ruby\n    ruby hello.rb\n\n    cd -\n</code></pre>\n"}, {"tags": ["ruby", "maven-2", "vagrantfile", "resource-files"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1455117047, "post_id": 35318720, "comment_id": 58346309, "body": "Not really, although a rake task to do it would be trivial. Whether or not it&#39;s a good idea depends on what you&#39;re actually trying to do, and why."}, {"owner": {"reputation": 23176, "user_id": 18149, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f5e10278b9b6a518d5835f658704d85f?s=128&d=identicon&r=PG", "display_name": "leeand00", "link": "https://stackoverflow.com/users/18149/leeand00"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1455117615, "post_id": 35318720, "comment_id": 58346778, "body": "I&#39;m trying to fill in values in files during the provisioning of a Vagrant VM."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1455129336, "post_id": 35318720, "comment_id": 58355171, "body": "Fill in values for what specifically? A vagrant file?"}, {"owner": {"reputation": 23176, "user_id": 18149, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f5e10278b9b6a518d5835f658704d85f?s=128&d=identicon&r=PG", "display_name": "leeand00", "link": "https://stackoverflow.com/users/18149/leeand00"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1455129495, "post_id": 35318720, "comment_id": 58355261, "body": "A bunch of config files that will be copied into the VM.  IP addresses that sort of thing.  I mean it would be nice if I could specify it in the Vagrantfile that way too."}], "owner": {"reputation": 23176, "user_id": 18149, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f5e10278b9b6a518d5835f658704d85f?s=128&d=identicon&r=PG", "display_name": "leeand00", "link": "https://stackoverflow.com/users/18149/leeand00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1455242807, "creation_date": 1455116780, "last_edit_date": 1455242807, "question_id": 35318720, "link": "https://stackoverflow.com/questions/35318720/does-ruby-have-an-equivalent-to-maven2-resource-filtering", "title": "Does Ruby have an equivalent to maven2 resource filtering?", "body": "<p>Does ruby have an equivalent to Maven2's resource filtering?  In Maven2 it basically recursively goes though all the files of a specified name filter in a directory and takes the contents of search strings specified in <code>build.properties</code> and replaces the values searched for in the specified files. </p>\n\n<p>I was wondering if Ruby has an equivalent functionality.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "edited": false, "score": 0, "creation_date": 1460189834, "post_id": 35318385, "comment_id": 60634566, "body": "I don&#39;t know why this question is downvoted. It looks like a genuine question to me."}, {"owner": {"reputation": 23312, "user_id": 560215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bb365e8477053edcc55b40c3d27781d8?s=128&d=identicon&r=PG", "display_name": "sevenseacat", "link": "https://stackoverflow.com/users/560215/sevenseacat"}, "edited": false, "score": 1, "creation_date": 1460190946, "post_id": 35318385, "comment_id": 60634852, "body": "the downvotes may be from the old post, before it was undeleted and rewritten into an completely different question."}, {"owner": {"reputation": 1217, "user_id": 5511520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/baaabef4e4f62eee165869427acd0472?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Belyakov", "link": "https://stackoverflow.com/users/5511520/mike-belyakov"}, "edited": false, "score": 0, "creation_date": 1460191011, "post_id": 35318385, "comment_id": 60634869, "body": "You are absolutely right"}], "answers": [{"comments": [{"owner": {"reputation": 1217, "user_id": 5511520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/baaabef4e4f62eee165869427acd0472?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Belyakov", "link": "https://stackoverflow.com/users/5511520/mike-belyakov"}, "edited": false, "score": 0, "creation_date": 1460190936, "post_id": 36514538, "comment_id": 60634847, "body": "I need primary it for <code>rake db:migrate</code>. Initializers have been run and i can debug it with pry."}], "tags": [], "owner": {"reputation": 4677, "user_id": 210085, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1XpHB.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/210085/andy"}, "is_accepted": false, "score": 0, "last_activity_date": 1460190729, "creation_date": 1460190729, "answer_id": 36514538, "question_id": 35318385, "link": "https://stackoverflow.com/questions/35318385/get-rake-task-name-in-initializer/36514538#36514538", "title": "Get rake task name in initializer", "body": "<p>Did you include the <code>=&gt; :environment</code> in your task? E.g.</p>\n\n<pre><code>task :sometask =&gt; :environment do\n    ...\nend\n</code></pre>\n\n<p>Otherwise the initializers wont run when you run a rake task</p>\n"}, {"comments": [{"owner": {"reputation": 1217, "user_id": 5511520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/baaabef4e4f62eee165869427acd0472?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Belyakov", "link": "https://stackoverflow.com/users/5511520/mike-belyakov"}, "edited": false, "score": 0, "creation_date": 1460215471, "post_id": 36517638, "comment_id": 60642899, "body": "Thank you, but this idea gives the same result,as i added in update section of the question. As test you can try it with <code>rake db:migrate</code> and at this moment. Also, this method will work only with <code>rake db:migrate</code>, and not work with <code>bundle exec rake db:migrate</code>"}], "tags": [], "owner": {"reputation": 1116, "user_id": 4122847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Bhoo3PIj7w/AAAAAAAAAAI/AAAAAAAAAF4/OEnQcnM3iI0/photo.jpg?sz=128", "display_name": "Abdoo Dev", "link": "https://stackoverflow.com/users/4122847/abdoo-dev"}, "is_accepted": false, "score": 0, "last_activity_date": 1460209647, "creation_date": 1460209647, "answer_id": 36517638, "question_id": 35318385, "link": "https://stackoverflow.com/questions/35318385/get-rake-task-name-in-initializer/36517638#36517638", "title": "Get rake task name in initializer", "body": "<p>There is two ways to achieve what you want,</p>\n\n<p>1 .Not using <code>spring</code>, just run:</p>\n\n<pre><code>spring binstub --remove --all\n</code></pre>\n\n<p>and then run your rake task.</p>\n\n<p>2 .Using spring:</p>\n\n<p>create a spring.rb file <code>config/spring.rb</code> and use <code>after_fork</code></p>\n\n<pre><code>Spring.after_fork do\n  # run your code here\n  # you have access to ARGV\n  binding.pry\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1217, "user_id": 5511520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/baaabef4e4f62eee165869427acd0472?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Belyakov", "link": "https://stackoverflow.com/users/5511520/mike-belyakov"}, "edited": false, "score": 0, "creation_date": 1460372227, "post_id": 36544552, "comment_id": 60694209, "body": "Thank you. But this answer clone the idea of my post update. Also, I need to fetch rake task name inside rails app, not inside another rake task. And I can not edit basic rake task- it is built in in rails, <code>db:migrate</code> as example. In this case question is still open."}, {"owner": {"reputation": 1037, "user_id": 2730407, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0ea8cbda44bec55c4db6250eff89bbd8?s=128&d=identicon&r=PG&f=1", "display_name": "Ronna", "link": "https://stackoverflow.com/users/2730407/ronna"}, "reply_to_user": {"reputation": 1217, "user_id": 5511520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/baaabef4e4f62eee165869427acd0472?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Belyakov", "link": "https://stackoverflow.com/users/5511520/mike-belyakov"}, "edited": false, "score": 0, "creation_date": 1460377512, "post_id": 36544552, "comment_id": 60697881, "body": "I tested it within the app and it works for me. I will edit to explain exactly what I did."}, {"owner": {"reputation": 1217, "user_id": 5511520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/baaabef4e4f62eee165869427acd0472?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Belyakov", "link": "https://stackoverflow.com/users/5511520/mike-belyakov"}, "edited": false, "score": 0, "creation_date": 1460379619, "post_id": 36544552, "comment_id": 60699482, "body": "It is really good method for custom tasks, and I see that it will work. But it odes not works with built in rake tasks, I try it out with <code>db:migrate</code> few minutes ago. May be it will work on other env, I do no know. I use rails 4.2.6, and try rake 10.5 and 11.1.2"}, {"owner": {"reputation": 1037, "user_id": 2730407, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0ea8cbda44bec55c4db6250eff89bbd8?s=128&d=identicon&r=PG&f=1", "display_name": "Ronna", "link": "https://stackoverflow.com/users/2730407/ronna"}, "reply_to_user": {"reputation": 1217, "user_id": 5511520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/baaabef4e4f62eee165869427acd0472?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Belyakov", "link": "https://stackoverflow.com/users/5511520/mike-belyakov"}, "edited": false, "score": 0, "creation_date": 1460380012, "post_id": 36544552, "comment_id": 60699789, "body": "It&#39;s true that it doesn&#39;t work for rake tasks that do not load the environment as explained by @ved, but it works for db:migrate as well. I just tested it by adding a call to the model <code>Something</code> inside a migration. Maybe you should add a code snippet of what it is exactly that you&#39;re doing."}], "tags": [], "owner": {"reputation": 1037, "user_id": 2730407, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0ea8cbda44bec55c4db6250eff89bbd8?s=128&d=identicon&r=PG&f=1", "display_name": "Ronna", "link": "https://stackoverflow.com/users/2730407/ronna"}, "is_accepted": false, "score": 0, "last_activity_date": 1460377933, "last_edit_date": 1495542678, "creation_date": 1460366261, "answer_id": 36544552, "question_id": 35318385, "link": "https://stackoverflow.com/questions/35318385/get-rake-task-name-in-initializer/36544552#36544552", "title": "Get rake task name in initializer", "body": "<p>I believe <a href=\"https://stackoverflow.com/a/7492277/2730407\">this</a> answers your needs. Task name should include also the namespace.</p>\n\n<p>config/initializers/rake.rb</p>\n\n<pre><code>module Rake\n  class Application\n    attr_accessor :current_task\n  end\n  class Task\n    alias :old_execute :execute \n    def execute(args=nil)\n      Rake.application.current_task = @name  \n      old_execute(args)\n    end\n  end #class Task\nend #module Rake  \n</code></pre>\n\n<p>models/something.rb:</p>\n\n<pre><code>class Something &lt; ActiveRecord::Base\n   puts Rake.application.current_task\nend\n</code></pre>\n\n<p>lib/tasks/some_task.rake:</p>\n\n<pre><code>require 'rake'\nnamespace :ns do\n  task :some_task =&gt; :environment do\n    Something.all.to_a\n  end\nend\n</code></pre>\n\n<p>console:</p>\n\n<pre><code>rake ns:some_task\nns:some_task\n</code></pre>\n\n<p>also works:</p>\n\n<pre><code>bundle exec rake ns:some_task\nns:some_task\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1217, "user_id": 5511520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/baaabef4e4f62eee165869427acd0472?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Belyakov", "link": "https://stackoverflow.com/users/5511520/mike-belyakov"}, "edited": false, "score": 1, "creation_date": 1460383601, "post_id": 36548883, "comment_id": 60702723, "body": "Thank you, but for <code>rake db:migrate</code> initializers starts before Rakefile, so, i&#39;ll get an empty line. Your idea is very similar with that line of code, which I wrote in update part of the question. And both snippets run too late. So it will work with own rake task, except pre-defined."}, {"owner": {"reputation": 29937, "user_id": 155328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UMrdH.jpg?s=128&g=1", "display_name": "idlefingers", "link": "https://stackoverflow.com/users/155328/idlefingers"}, "reply_to_user": {"reputation": 1217, "user_id": 5511520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/baaabef4e4f62eee165869427acd0472?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Belyakov", "link": "https://stackoverflow.com/users/5511520/mike-belyakov"}, "edited": false, "score": 0, "creation_date": 1460387473, "post_id": 36548883, "comment_id": 60705654, "body": "@MikeBelyakov Are you sure you&#39;re following the example correctly? I generated a new rails app with the code exactly as I have above here, and when you run <code>rake db:migrate</code>, you get the puts line followed by the rake task output. See here - <a href=\"https://github.com/idlefingers/rake-task-name-example\" rel=\"nofollow noreferrer\">github.com/idlefingers/rake-task-name-example</a>"}], "tags": [], "owner": {"reputation": 29937, "user_id": 155328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UMrdH.jpg?s=128&g=1", "display_name": "idlefingers", "link": "https://stackoverflow.com/users/155328/idlefingers"}, "is_accepted": false, "score": 1, "last_activity_date": 1460387697, "last_edit_date": 1460387697, "creation_date": 1460378176, "answer_id": 36548883, "question_id": 35318385, "link": "https://stackoverflow.com/questions/35318385/get-rake-task-name-in-initializer/36548883#36548883", "title": "Get rake task name in initializer", "body": "<p>You could redefine tasks using <code>Rake::Task#enhance</code> to create a variable before invoking the original task, but that seems a bit messy and you'll have to worry about what to do with tasks like <code>:environment</code> and <code>:default</code>.</p>\n\n<p>I think the easiest way is probably to just extend the <code>Rake::Task#invoke</code> method to add a global variable which you could then access in initializers, or from wherever else you want.</p>\n\n<p>Here's a really quick an dirty example which you could do in the <code>Rakefile</code>:</p>\n\n<pre><code>module RakeTaskName\n  def invoke(*args)\n    $rake_task_name = name\n    super *args\n  end\nend\n\nRake::Task.send :prepend, RakeTaskName\n</code></pre>\n\n<p>Then, in an initializer, you can do:</p>\n\n<pre><code>if defined? $rake_task_name\n  puts \"Running from rake task: #{$rake_task_name}\"\nend\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<p><a href=\"https://github.com/idlefingers/rake-task-name-example\" rel=\"nofollow\">Here's a new rails project</a> with this code &amp; 1 migration. The output looks like this:</p>\n\n<pre><code>Running from rake task: db:migrate\n== 20160411150810 CreateFoo: migrating ========================================\n-- create_table(:foos)\n   -&gt; 0.0010s\n== 20160411150810 CreateFoo: migrated (0.0011s) ===============================\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1217, "user_id": 5511520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/baaabef4e4f62eee165869427acd0472?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Belyakov", "link": "https://stackoverflow.com/users/5511520/mike-belyakov"}, "edited": false, "score": 0, "creation_date": 1460404030, "post_id": 36554335, "comment_id": 60716164, "body": "Thank you! After cutting out spring it gotta work. You gave full and clear explanation. Great!"}], "tags": [], "owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "is_accepted": true, "score": 3, "last_activity_date": 1460413118, "last_edit_date": 1460413118, "creation_date": 1460392323, "answer_id": 36554335, "question_id": 35318385, "link": "https://stackoverflow.com/questions/35318385/get-rake-task-name-in-initializer/36554335#36554335", "title": "Get rake task name in initializer", "body": "<p>None of the other answers presented here will work <strong>unless you stop using Spring</strong>, because Spring changes the way rake tasks are called significantly. </p>\n\n<p>When using Spring, the command being run is handed over to the Spring server process using a UNIX socket and unfortunately Spring server reads this socket to get the command and its arguments <strong>after initializing the rails environment</strong>. Thus, during rails initialization, there seems to be no way of getting the command and its arguments (e.g. the rake task name) when using Spring, as Spring itself does not know yet! Even the <code>after_fork</code> hook that Spring provides won't help, because it is being also run <strong>after</strong> rails initialization.</p>\n\n<p>A proof can be seen in the Spring source code. It is the <a href=\"https://github.com/rails/spring/blob/master/lib/spring/application.rb#L136\" rel=\"nofollow\"><code>serve</code> method</a> in which Spring gets the <code>ARGV</code> of the command being run from the socket, forks itself and runs the command. The relevant parts of the method are these:</p>\n\n<pre><code>def serve(client)\n  # ... getting standard input / output streams from the client socket\n\n  # this is where rails initialization occurs\n  preload unless preloaded?\n\n  # this is where Spring gets the command name and it's ARGV and environment\n  args, env = JSON.load(client.read(client.gets.to_i)).values_at(\"args\", \"env\")\n  command   = Spring.command(args.shift)\n\n  # ...\n\n  # fork and run the command\n  pid = fork {\n    # ...       \n    # run the command\n    ARGV.replace(args)\n    $0 = command.exec_name\n    # ...\n\n    # run the after_fork hook\n    invoke_after_fork_callbacks\n\n    command.call\n  }\n\n  # ...\nend\n</code></pre>\n\n<p>The rails initializers are <a href=\"https://github.com/rails/spring/blob/master/lib/spring/application.rb#L82\" rel=\"nofollow\">run</a> in the <code>preload</code> method which is run <strong>before</strong> the command name is read from the socket. The <code>$0</code> and <code>ARGV</code> variables are also set after initialization, in the <code>fork</code> block.</p>\n\n<p>So, unless you monkey-patched Spring significantly (replaced the <code>serve</code> method with your own, but you'd need to handle working with the socket yourself), <strong>you need to stop calling your rake tasks inside the Spring environment</strong>. If the <code>rake</code> command is a binstub in the <code>RAILS_ROOT/bin/</code> directory, you need to remove the binstub with <code>spring binstup --remove rake</code>.</p>\n\n<p>Only then, I believe, you can use one of the solutions in the other answers.</p>\n"}], "owner": {"reputation": 1217, "user_id": 5511520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/baaabef4e4f62eee165869427acd0472?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Belyakov", "link": "https://stackoverflow.com/users/5511520/mike-belyakov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1382, "favorite_count": 0, "accepted_answer_id": 36554335, "answer_count": 5, "score": 4, "last_activity_date": 1460413118, "creation_date": 1455115858, "last_edit_date": 1460204385, "question_id": 35318385, "link": "https://stackoverflow.com/questions/35318385/get-rake-task-name-in-initializer", "title": "Get rake task name in initializer", "body": "<p>I want to know, if the app instance is started by <code>rake</code>, so I tried out  catching <code>rake</code> task name in <code>initializers</code>. For example, if I run <code>rake db:migrate</code> I want get <code>db:migrate</code> or something like this.\nI tried this;</p>\n\n<pre><code>[7] pry(main)&gt; $0\n=&gt; \"spring app    | bilet18 | started 3 secs ago | development mode\"\n[8] pry(main)&gt; ARGV\n=&gt; []\n[9] pry(main)&gt; Rake.application.top_level_tasks\n=&gt; []\n</code></pre>\n\n<p>but everything is empty.  </p>\n\n<p>What can I do that? please help.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>if add in Rakefile line like</p>\n\n<pre><code>ENV[\"RAKE_CURRENT_TASKS\"] = Rake.application.top_level_tasks.join(' ')\n</code></pre>\n\n<p>then in future you'll be able to catch it in.\nbut this solution is not good for me, I need to catch rake task name earlier</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "cors"], "answers": [{"tags": [], "owner": {"reputation": 3020, "user_id": 4453584, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25188d50654874d1125dd754d783851b?s=128&d=identicon&r=PG&f=1", "display_name": "guitarman", "link": "https://stackoverflow.com/users/4453584/guitarman"}, "is_accepted": true, "score": 21, "last_activity_date": 1553719052, "last_edit_date": 1553719052, "creation_date": 1455117486, "answer_id": 35318981, "question_id": 35318324, "link": "https://stackoverflow.com/questions/35318324/render-json-with-header/35318981#35318981", "title": "Render JSON with header", "body": "<p>You can't set a header after render, because the response is sent. So change the headers after makes no sense and you get this error.</p>\n\n<p>Try:</p>\n\n<pre><code>def my_action\n  response.headers['Access-Control-Allow-Origin'] = '*'\n  render(json: some_params)\nend\n</code></pre>\n\n<p><strong>UPDATE FOR RAILS 5</strong></p>\n\n<p>As pointed in the question <a href=\"https://stackoverflow.com/questions/16654052/how-do-you-add-a-custom-http-header\">How do you add a custom http header?</a>, after rails 5 you should be setting the headers as following:</p>\n\n<pre><code>response.set_header('HEADER NAME', 'HEADER VALUE')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "is_accepted": false, "score": 3, "last_activity_date": 1455117509, "creation_date": 1455117509, "answer_id": 35318994, "question_id": 35318324, "link": "https://stackoverflow.com/questions/35318324/render-json-with-header/35318994#35318994", "title": "Render JSON with header", "body": "<p>The issue here is that you are rendering the response and then sending the headers.<br>\nYou should <strong>never</strong> set headers after the response is sent.</p>\n\n<p><code>render</code> should be, usually, the last line of your <em>action</em>.</p>\n\n<pre><code>def my_action\n  ...\n  response.headers['Access-Control-Allow-Origin'] = '*'\n  render json: some_params\nend\n</code></pre>\n"}], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8651, "favorite_count": 4, "accepted_answer_id": 35318981, "answer_count": 2, "score": 8, "last_activity_date": 1553719052, "creation_date": 1455115672, "last_edit_date": 1455183997, "question_id": 35318324, "link": "https://stackoverflow.com/questions/35318324/render-json-with-header", "title": "Render JSON with header", "body": "<p>I want to render JSON with the following <code>cors</code> header in my controller:</p>\n\n<pre><code>'Access-Control-Allow-Origin' = '*'.\n</code></pre>\n\n<p>I tried this:</p>\n\n<pre><code>def my_action\n  render(json: some_params)\n  response.headers['Access-Control-Allow-Origin'] = '*'\nend\n</code></pre>\n\n<p>but I got an <code>AbstractController::DoubleRenderError</code>. Are there ways to render JSON with headers?</p>\n"}, {"tags": ["ruby", "selenium"], "answers": [{"comments": [{"owner": {"reputation": 4879, "user_id": 954442, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/168149d073db878da990e57c891911cd?s=128&d=identicon&r=PG", "display_name": "Andrew Regan", "link": "https://stackoverflow.com/users/954442/andrew-regan"}, "edited": false, "score": 0, "creation_date": 1455292812, "post_id": 35321918, "comment_id": 58439763, "body": "Did you get a chance to try this, OP?"}, {"owner": {"reputation": 1251, "user_id": 1231693, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/35c6f42e8ab6e0e8b8f5c673696c36a0?s=128&d=identicon&r=PG", "display_name": "mellow-yellow", "link": "https://stackoverflow.com/users/1231693/mellow-yellow"}, "edited": false, "score": 0, "creation_date": 1455896704, "post_id": 35321918, "comment_id": 58709384, "body": "Perfect! I&#39;ll open a new question because one tab opens a .SVG where there&#39;s no &quot;body&quot; to close that tab. :-("}], "tags": [], "owner": {"reputation": 4879, "user_id": 954442, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/168149d073db878da990e57c891911cd?s=128&d=identicon&r=PG", "display_name": "Andrew Regan", "link": "https://stackoverflow.com/users/954442/andrew-regan"}, "is_accepted": true, "score": 0, "last_activity_date": 1455127061, "last_edit_date": 1455127061, "creation_date": 1455125192, "answer_id": 35321918, "question_id": 35318002, "link": "https://stackoverflow.com/questions/35318002/ruby-selenium-gem-open-hyperlinks-in-multiple-tabs/35321918#35321918", "title": "Ruby selenium gem: open hyperlinks in multiple tabs", "body": "<p>Basically you can't share <code>WebElement</code>s across pages, yet you're trying to access <code>body</code> across multiple tabs. Try not to think of them as self-contained objects, but as proxies to something on a real page.</p>\n\n<p>The solution is to only ever perform actions on the 'current' page. In your case that means sending the <kbd>Ctrl-T</kbd> event on the tab that you've created. Having done that the first time, you're switched to the new tab. You then need to <strong>re-perform</strong> the  lookup:</p>\n\n<pre><code>newTabsBody = browser.find_element(:tag_name =&gt; 'body')\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>newTabsBody.send_keys(:control, 't')\n</code></pre>\n\n<p>to create the next one. Continue for each child.</p>\n"}], "owner": {"reputation": 1251, "user_id": 1231693, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/35c6f42e8ab6e0e8b8f5c673696c36a0?s=128&d=identicon&r=PG", "display_name": "mellow-yellow", "link": "https://stackoverflow.com/users/1231693/mellow-yellow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 35321918, "answer_count": 1, "score": 0, "last_activity_date": 1455127061, "creation_date": 1455114843, "last_edit_date": 1455118775, "question_id": 35318002, "link": "https://stackoverflow.com/questions/35318002/ruby-selenium-gem-open-hyperlinks-in-multiple-tabs", "title": "Ruby selenium gem: open hyperlinks in multiple tabs", "body": "<p>Goal: In irb, open a series of hyperlinks in new tabs and save a screenshot of each.</p>\n\n<p>Code: </p>\n\n<pre><code>require \"rubygems\"\nrequire \"selenium-webdriver\"\nbrowser = Selenium::WebDriver.for:firefox\n\nbrowser.get 'https://company.com'\nbrowser.find_element(:name, \"username\").send_keys(\"myUsername\")\nbrowser.find_element(:name, \"password\").send_keys(\"myPassword\")\nbrowser.find_element(:name, \"ibm-submit\").click\n\nbody = browser.find_element(:tag_name =&gt; 'body')\nbody.send_keys(:control, 't')\n\nparent = browser.find_element(:xpath, \"//div[@id='someid']\")\nchildren = parent.find_elements(:xpath,\"//a\")\n\nchildren.each do |i| ;  \n  body.send_keys(:control, 't')\n  i.click \n  browser.save_screenshot(\"{i}\")\nend\n</code></pre>\n\n<p>Problem: \n<code>Selenium::WebDriver::Error::StaleElementReferenceError: Element not found in the cache - perhaps the page has changed since it was looked up</code></p>\n\n<p>Question: What am I doing wrong?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "heroku", "bower"], "comments": [{"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "edited": false, "score": 0, "creation_date": 1455118363, "post_id": 35317867, "comment_id": 58347391, "body": "You&#39;ll probably be better using <a href=\"http://rails-assets.org\" rel=\"nofollow noreferrer\"><code>Rails-Assets</code></a>. This creates &quot;gems&quot; of each <code>Bower</code> repo you can find, and works 100% on heroku"}, {"owner": {"reputation": 4587, "user_id": 1098873, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/47fe800ed32c2009b4f83d129e8657f9?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/1098873/eric"}, "reply_to_user": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "edited": false, "score": 0, "creation_date": 1455118458, "post_id": 35317867, "comment_id": 58347472, "body": "Thanks for the comment Richard! I have used it in the past, but I have found that sometimes there aren&#39;t the most recent versions of things available and that some assets don&#39;t work. I had hoped bower_rails could handle this by installing the assets during Heroku deployment - shouldn&#39;t it be able to do that?"}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "edited": false, "score": 0, "creation_date": 1455118494, "post_id": 35317867, "comment_id": 58347502, "body": "It should do, but you may need a <code>Proc</code> file to get it working"}], "owner": {"reputation": 4587, "user_id": 1098873, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/47fe800ed32c2009b4f83d129e8657f9?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/1098873/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1455114459, "creation_date": 1455114459, "question_id": 35317867, "link": "https://stackoverflow.com/questions/35317867/how-can-i-get-bower-rails-to-install-my-bower-assets-on-heroku", "title": "How can I get bower_rails to install my Bower assets on Heroku?", "body": "<p>I want to use bower_rails to incorporate bower assets into my Rails application. I don't want to commit these assets into my repo though, I just want to specify them in my Bowerfile and have them installed by Heroku during deployment.</p>\n\n<p>How can I do that?</p>\n"}, {"tags": ["ruby", "capybara", "appium"], "answers": [{"comments": [{"owner": {"reputation": 223, "user_id": 5310502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b6f92af37160cf2310ac2ccadcd9b758?s=128&d=identicon&r=PG&f=1", "display_name": "testerBDD", "link": "https://stackoverflow.com/users/5310502/testerbdd"}, "edited": false, "score": 0, "creation_date": 1455131664, "post_id": 35321569, "comment_id": 58356617, "body": "There are multiple links and we need to click on the first, which perfectly works on desktop, issue is more on the mobile or appium_capybara library"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 223, "user_id": 5310502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b6f92af37160cf2310ac2ccadcd9b758?s=128&d=identicon&r=PG&f=1", "display_name": "testerBDD", "link": "https://stackoverflow.com/users/5310502/testerbdd"}, "edited": false, "score": 0, "creation_date": 1455132016, "post_id": 35321569, "comment_id": 58356842, "body": "the issue is that it&#39;s not finding the link, that can be a couple of things - 1. the link isn&#39;t on the page, or isn&#39;t on the page quickly enough - change to <code>page.first(:link, link_text, minimum: 1).click</code> to test that (it&#39;ll wait a little bit for the link to link to show up if necessary).  2.  The link isn&#39;t matching because you&#39;re applying some CSS in one of the environments that is changing the case/etc of the link text and isn&#39;t happening in the other"}, {"owner": {"reputation": 223, "user_id": 5310502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b6f92af37160cf2310ac2ccadcd9b758?s=128&d=identicon&r=PG&f=1", "display_name": "testerBDD", "link": "https://stackoverflow.com/users/5310502/testerbdd"}, "edited": false, "score": 0, "creation_date": 1455141537, "post_id": 35321569, "comment_id": 58362269, "body": "I tried all the options, but my question is that if it works on the laptop browser then it should work on the mobile  if i am not wrong both of them are through capybara, so the lib support must be same"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 223, "user_id": 5310502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b6f92af37160cf2310ac2ccadcd9b758?s=128&d=identicon&r=PG&f=1", "display_name": "testerBDD", "link": "https://stackoverflow.com/users/5310502/testerbdd"}, "edited": false, "score": 0, "creation_date": 1455141728, "post_id": 35321569, "comment_id": 58362354, "body": "Why would you assume that what works on the laptop browser would work on the mobile?  Depending on how you&#39;re doing your mobile support, the page could be served from different templates, have different CSS, different JS libararies, etc  -- The error you&#39;re getting is not about lack of support in Capybara, it&#39;s the fact that the link you&#39;re trying to click can&#39;t be found on the page - why it can&#39;t be found is the question you need to answer."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 0, "last_activity_date": 1455124134, "creation_date": 1455124134, "answer_id": 35321569, "question_id": 35317812, "link": "https://stackoverflow.com/questions/35317812/appium-capybara-ruby-running-automation-on-physical-device-and-some-of-the-capyb/35321569#35321569", "title": "Appium-Capybara-ruby running automation on Physical device and some of the capybara function not working", "body": "<p><code>undefined method 'click' for nil:NilClass (NoMethodError)</code> is telling you that <code>#first</code> isn't returning an element (<code>#first</code> returns immediately with a matching element, or nil if there is none).   Is there a reason you are using <code>first</code> rather than <code>find</code>??  If there is only one matching link on the page you should really prefer <code>find</code> over <code>first</code> (in this case <code>find_link</code>), or try to scope to a part of the page where the would only be one link, since it will throw an error explaining why it didn't find the link (rather than returning nil) and also has waiting behavior for elements to show up  (<code>first</code> can have the same behavior but it doesn't by default)</p>\n"}, {"tags": [], "owner": {"reputation": 672, "user_id": 5788146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22eb214b625f168dd5ed1c4d39e2f9e?s=128&d=identicon&r=PG&f=1", "display_name": "Sarabjit Singh", "link": "https://stackoverflow.com/users/5788146/sarabjit-singh"}, "is_accepted": true, "score": 0, "last_activity_date": 1455612617, "creation_date": 1455612617, "answer_id": 35427810, "question_id": 35317812, "link": "https://stackoverflow.com/questions/35317812/appium-capybara-ruby-running-automation-on-physical-device-and-some-of-the-capyb/35427810#35427810", "title": "Appium-Capybara-ruby running automation on Physical device and some of the capybara function not working", "body": "<p>In the above code, first the <code>link</code> with <code>link_text</code> is being searched on the page. If no link is found then nil is returned.\nThus, to make this code work, we need to wait for the link with the link text to appear on the page and then click it.\nSo you can use any one of the below mentioned code before clicking the fink</p>\n\n<ol>\n<li><p><code>page.should have_content(link_text)</code></p></li>\n<li><p><code>page.find_link(link_text)</code></p></li>\n</ol>\n\n<p>If the above code doesn't works then you can also try increasing the default wait time as shown below:</p>\n\n<pre><code>Capybara.default_wait_time = 30\npage.should have_content(link_text)\npage.first(:link, link_text).click\nCapybara.default_wait_time = DEFAULT_WAIT_TIME\n</code></pre>\n\n<p>DEFAULT_WAIT_TIME for Capybara tests is set in your environment file.</p>\n\n<p>Hope this helps :)</p>\n"}], "owner": {"reputation": 223, "user_id": 5310502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b6f92af37160cf2310ac2ccadcd9b758?s=128&d=identicon&r=PG&f=1", "display_name": "testerBDD", "link": "https://stackoverflow.com/users/5310502/testerbdd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "accepted_answer_id": 35427810, "answer_count": 2, "score": 0, "last_activity_date": 1455612617, "creation_date": 1455114352, "last_edit_date": 1455115756, "question_id": 35317812, "link": "https://stackoverflow.com/questions/35317812/appium-capybara-ruby-running-automation-on-physical-device-and-some-of-the-capyb", "title": "Appium-Capybara-ruby running automation on Physical device and some of the capybara function not working", "body": "<p>I have setup Appium - Capybara and was able to run automation suites on physical device, but facing issue with few methods</p>\n\n<p>I was able to successfully run Capybara methods like</p>\n\n<pre><code>fill_in field, :with =&gt; text\nclick_button button_text\nexpect(page).to have_content(text)\n</code></pre>\n\n<p>But facing issues with below method ( it works on regular chrome on laptop but not on mobile )</p>\n\n<pre><code>page.first(:link, link_text).click\n</code></pre>\n\n<p>can you please help me to understand if appium capybara supports all the capybara methods or only few of them.</p>\n\n<p>Below is the error message</p>\n\n<pre><code>undefined method `click' for nil:NilClass (NoMethodError)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "race-condition"], "comments": [{"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1455114443, "post_id": 35317685, "comment_id": 58344381, "body": "Put in some extra logging looking at the class of <code>@members_to_lose</code>, and inspecting the object itself, before and after the <code>Rails.logger.info @members_to_lose.length</code> line.  I have a suspicion that the length call is changing it from a query chain into an array."}, {"owner": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "edited": false, "score": 2, "creation_date": 1455114826, "post_id": 35317685, "comment_id": 58344693, "body": "I think you mean <i>Heisenberg</i> rather than Schroedinger - <a href=\"http://www.catb.org/jargon/html/H/heisenbug.html\" rel=\"nofollow noreferrer\">catb.org/jargon/html/H/heisenbug.html</a>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1455114829, "post_id": 35317685, "comment_id": 58344695, "body": "Change <code>members_to_lose: @members_to_lose</code> to <code>members_to_lose: @members_to_lose.all</code>. The latter will execute the query against the database. <code>@new_members</code> require the same modification as well."}, {"owner": {"reputation": 25732, "user_id": 93311, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hgn1T.jpg?s=128&g=1", "display_name": "Trip", "link": "https://stackoverflow.com/users/93311/trip"}, "reply_to_user": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "edited": false, "score": 0, "creation_date": 1455115051, "post_id": 35317685, "comment_id": 58344836, "body": "@Jon Noted, and edited. Thanks~"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1455115163, "post_id": 35317685, "comment_id": 58344910, "body": "Please use English punctuation when you write in English."}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1455212100, "post_id": 35317685, "comment_id": 58399472, "body": "@mudasobwa <code>.all</code> only forces execution prior to rails 4"}], "answers": [{"comments": [{"owner": {"reputation": 25732, "user_id": 93311, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hgn1T.jpg?s=128&g=1", "display_name": "Trip", "link": "https://stackoverflow.com/users/93311/trip"}, "edited": false, "score": 0, "creation_date": 1455115013, "post_id": 35317982, "comment_id": 58344807, "body": "That&#39;s it. You nailed. Wow. Thanks so much. I&#39;ve never heard of <code>load</code> before. Fascinating."}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1455212153, "post_id": 35317982, "comment_id": 58399505, "body": "<code>pluck</code> is even better than <code>select</code> performance wise (select still instantiates full AR objects)"}, {"owner": {"reputation": 640, "user_id": 3982178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d871e8cd02f61e44a8e84c0893f0fa?s=128&d=identicon&r=PG&f=1", "display_name": "Plamena Gancheva", "link": "https://stackoverflow.com/users/3982178/plamena-gancheva"}, "edited": false, "score": 0, "creation_date": 1455262343, "post_id": 35317982, "comment_id": 58420559, "body": "When you use select in a query there are no objects instantiated. Active record generates one query with a subquery: select .. where id in (select id from ..). With pluck however we have 1 extra query for getting the ids and an array instance."}], "tags": [], "owner": {"reputation": 640, "user_id": 3982178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d871e8cd02f61e44a8e84c0893f0fa?s=128&d=identicon&r=PG&f=1", "display_name": "Plamena Gancheva", "link": "https://stackoverflow.com/users/3982178/plamena-gancheva"}, "is_accepted": true, "score": 5, "last_activity_date": 1455115445, "last_edit_date": 1455115445, "creation_date": 1455114776, "answer_id": 35317982, "question_id": 35317685, "link": "https://stackoverflow.com/questions/35317685/heisenbug-error-in-ruby-rails/35317982#35317982", "title": "Heisenbug Error in Ruby Rails", "body": "<p>Rails queries are lazily evaluated - they are executed the moment you actually need them.</p>\n\n<pre><code>Rails.logger.info @members_to_lose.length\n</code></pre>\n\n<p>This triggers the query because you call the method length.\nWhen you skip this line the query gets executed at:</p>\n\n<pre><code>render json: {members_to_add: @new_members, members_to_lose: @members_to_lose}\n</code></pre>\n\n<p>At this point you have saved the new members.</p>\n\n<p>To execute the query add load:</p>\n\n<pre><code>@members_to_lose   = @existing_members.where('enterprise_members.id not in (?)', @selected_members.map(&amp;:id)).load\n</code></pre>\n\n<p>I'd also recommend using select instead of map for better performance:</p>\n\n<pre><code>@members_to_lose   = @existing_members.where('enterprise_members.id not in (?)', @selected_members.select('enterprise_members.id')).load\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1075, "user_id": 1418151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a35a8012aa162755c2db1272a1b12b?s=128&d=identicon&r=PG", "display_name": "aliibrahim", "link": "https://stackoverflow.com/users/1418151/aliibrahim"}, "is_accepted": false, "score": 1, "last_activity_date": 1455114905, "creation_date": 1455114905, "answer_id": 35318027, "question_id": 35317685, "link": "https://stackoverflow.com/questions/35317685/heisenbug-error-in-ruby-rails/35318027#35318027", "title": "Heisenbug Error in Ruby Rails", "body": "<p>This is because <code>where</code> is lazy loading the data.</p>\n\n<p>When you do, <code>Rails.logger.info @members_to_lose.length</code> it basically loads the data. </p>\n\n<p>If you dont do that and trigger the last line, it is basically copying the object without actually evaluating it. Thus you are not getting anything in the result.</p>\n"}], "owner": {"reputation": 25732, "user_id": 93311, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hgn1T.jpg?s=128&g=1", "display_name": "Trip", "link": "https://stackoverflow.com/users/93311/trip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 35317982, "answer_count": 2, "score": 1, "last_activity_date": 1455210915, "creation_date": 1455114077, "last_edit_date": 1455210915, "question_id": 35317685, "link": "https://stackoverflow.com/questions/35317685/heisenbug-error-in-ruby-rails", "title": "Heisenbug Error in Ruby Rails", "body": "<p>I call this Heisenbug error because the error only exists if it's not observed. Here is the call :</p>\n\n<pre><code>@selected_members  = Member.where(id: params[:member_ids])\n@existing_members  = list.members\n@new_members       = @selected_members.where('id not in (?)', @existing_members.map(&amp;:id))\n@members_to_lose   = @existing_members.where('enterprise_members.id not in (?)', @selected_members.map(&amp;:id))\n\nRails.logger.info @members_to_lose.length # Remove this line and it no longer works\nlist.members       = @selected_members\n\nrender json: {members_to_add: @new_members, members_to_lose: @members_to_lose}\n</code></pre>\n\n<p>Nothing out of the ordinary whatsoever. </p>\n\n<p>If I remove the <code>Rails.logger.info</code> call, then <code>@members_to_lose</code> returns incorrectly ( as in it returns blank ). </p>\n\n<p>If I place the Logger or the Debugger <em>after</em> the <code>list.members = @selected_members</code> line, <em>then</em> the <code>@members_to_lose</code> is emptied, and returns incorrectly ( as in it returns blank ).</p>\n\n<p>If instead of a <code>Rails.logger.info</code>, I just place a <code>debugger</code> before the <code>list.members</code> line, then it will return correctly. </p>\n\n<p>What is happening here? Is this a ruby race condition? I have <em>nothing</em> in my code that would affect this code whatsoever. <code>List.members</code> is a simple <code>has_many</code> relationship.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1455113823, "post_id": 35317475, "comment_id": 58343901, "body": "What is the error message?"}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1455113948, "post_id": 35317475, "comment_id": 58343999, "body": "Have you tried <code>puts &quot;Hello&quot;</code>"}, {"owner": {"reputation": 287, "user_id": 3851283, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ca1f87837a4351b667126a301f662d75?s=128&d=identicon&r=PG&f=1", "display_name": "user3851283", "link": "https://stackoverflow.com/users/3851283/user3851283"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1455114056, "post_id": 35317475, "comment_id": 58344071, "body": "The error message had something to do with UTF-8 something. I forgot the rest @sawa. And I think &#39;puts&#39; and &#39;prints&#39; are the same thing"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1455114222, "post_id": 35317475, "comment_id": 58344193, "body": "Are you sure you want to use a regex to do it?"}, {"owner": {"reputation": 287, "user_id": 3851283, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ca1f87837a4351b667126a301f662d75?s=128&d=identicon&r=PG&f=1", "display_name": "user3851283", "link": "https://stackoverflow.com/users/3851283/user3851283"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1455114291, "post_id": 35317475, "comment_id": 58344256, "body": "Is there another way? @sawa"}, {"owner": {"reputation": 287, "user_id": 3851283, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ca1f87837a4351b667126a301f662d75?s=128&d=identicon&r=PG&f=1", "display_name": "user3851283", "link": "https://stackoverflow.com/users/3851283/user3851283"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1455114720, "post_id": 35317475, "comment_id": 58344602, "body": "Any suggestions? @sawa"}, {"owner": {"reputation": 287, "user_id": 3851283, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ca1f87837a4351b667126a301f662d75?s=128&d=identicon&r=PG&f=1", "display_name": "user3851283", "link": "https://stackoverflow.com/users/3851283/user3851283"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1455114918, "post_id": 35317475, "comment_id": 58344750, "body": "If I were to use the regex approach, how would I write it? @sawa"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1455115100, "post_id": 35317475, "comment_id": 58344865, "body": "Your code is correct. The problem is with encoding, which is outside of what you posted."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1455120200, "post_id": 35317475, "comment_id": 58348856, "body": "If you don&#39;t recall the error message why don&#39;t you just re-run the code to see what it is? Please report both the message and the line where it occurred. Error messages generally contain valuable information."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1455123455, "post_id": 35317475, "comment_id": 58351375, "body": "Welcome to Stack Overflow. You have to give us accurate information if you want help. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;, including the links at the bottom of the page, and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. As is you&#39;ve asked a broad question because you didn&#39;t tell us enough, so you&#39;ll get broad answers, which is not what SO is about, resulting in an off-topic question. Also give us a minimal input example and your expected output."}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 0, "last_activity_date": 1455115036, "creation_date": 1455115036, "answer_id": 35318084, "question_id": 35317475, "link": "https://stackoverflow.com/questions/35317475/how-to-create-control-statements-for-file-io/35318084#35318084", "title": "How to create control statements for file IO", "body": "<p>Your code should work, I tried to do the same. Anyway, you can also try</p>\n\n<pre><code>if line.end_with? \"gmail.com\"\n</code></pre>\n\n<p>In any case, I think you have a strange character in your code. Maybe you put it with a copy-paste.</p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1455124046, "creation_date": 1455124046, "answer_id": 35321538, "question_id": 35317475, "link": "https://stackoverflow.com/questions/35317475/how-to-create-control-statements-for-file-io/35321538#35321538", "title": "How to create control statements for file IO", "body": "<p>You might want to write your code in a more Ruby-like way:</p>\n\n<pre><code>File.foreach('my/file/path') do |line|\n  print \"Hello\" if line =~ /gmail\\.com$/\nend\n</code></pre>\n\n<p>Rather than opening the file, then iterating over it using <code>each_line</code>, <code>foreach</code> does both in one step.</p>\n\n<p>Using a trailing <code>if</code> if more readable if you only have a simple conditional test or action being taken.</p>\n\n<p>Using <code>$</code> (or <code>\\z</code>) at the end of the regex anchors the search to the end of the line (or string). That avoids a false-positive if the string contained <code>'gmail.com'</code> mid-string:</p>\n\n<pre><code>'foo.gmail.com.baz'[/gmail\\.com/]    # =&gt; \"gmail.com\"\n'foo.gmail.com.baz'[/gmail\\.com$/]   # =&gt; nil\n'foo.gmail.com.baz'[/gmail\\.com\\z/]  # =&gt; nil\n\n'foo.gmail.com'[/gmail\\.com/]    # =&gt; \"gmail.com\"\n'foo.gmail.com'[/gmail\\.com$/]   # =&gt; \"gmail.com\"\n'foo.gmail.com'[/gmail\\.com\\z/]  # =&gt; \"gmail.com\"\n</code></pre>\n\n<p>This probably won't fix the problem you're seeing but it will make your code more readable and behave more as you expect.</p>\n"}], "owner": {"reputation": 287, "user_id": 3851283, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ca1f87837a4351b667126a301f662d75?s=128&d=identicon&r=PG&f=1", "display_name": "user3851283", "link": "https://stackoverflow.com/users/3851283/user3851283"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1455147944, "creation_date": 1455113514, "last_edit_date": 1455147944, "question_id": 35317475, "link": "https://stackoverflow.com/questions/35317475/how-to-create-control-statements-for-file-io", "title": "How to create control statements for file IO", "body": "<p>In a file, I have a list of e-mail addresses, and I want to display only those that end with a certain domain name (i.e. <code>gmail.com</code>). I want to include a regular expression in an <code>if</code>-<code>else</code> statement. Should the code be like this?</p>\n\n<pre><code>File.open(\"my/file/path\", \"r\") do |f|\n  f.each_line do |line|\n    if line =~ /gmail\\.com/\n        print \"Hello\"\n    end\n  end\nend\n</code></pre>\n\n<p>When I ran it, it gave me errors starting at line 3, so I am wondering what I am doing wrong. Any help would be appreciated.</p>\n\n<p>Here's the error message...</p>\n\n<pre><code>test.rb:3:in `block (2 levels) in &lt;main&gt;': invalid byte sequence in UTF-8 (ArgumentError)\n    from test.rb:2:in `each_line'\n    from test.rb:2:in `block in &lt;main&gt;'\n    from test.rb:1:in `open'\n    from test.rb:1:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "google-chrome", "selenium", "selenium-webdriver", "selenium-chromedriver"], "answers": [{"comments": [{"owner": {"reputation": 14923, "user_id": 473763, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/9642e8bd2c0a4aa406f0d856cde7a6f2?s=128&d=identicon&r=PG", "display_name": "Nerian", "link": "https://stackoverflow.com/users/473763/nerian"}, "edited": false, "score": 1, "creation_date": 1455191023, "post_id": 35317828, "comment_id": 58383997, "body": "Excellent, it does start the chrome browser in the background. Nonetheless, Capybara doesn&#39;t start to run the tests unless I click on the browser and give it focus. Is there a way to fake it?"}, {"owner": {"reputation": 4879, "user_id": 954442, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/168149d073db878da990e57c891911cd?s=128&d=identicon&r=PG", "display_name": "Andrew Regan", "link": "https://stackoverflow.com/users/954442/andrew-regan"}, "reply_to_user": {"reputation": 14923, "user_id": 473763, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/9642e8bd2c0a4aa406f0d856cde7a6f2?s=128&d=identicon&r=PG", "display_name": "Nerian", "link": "https://stackoverflow.com/users/473763/nerian"}, "edited": false, "score": 0, "creation_date": 1455193983, "post_id": 35317828, "comment_id": 58386141, "body": "How about this alternate approach? I can update answer if this works for you: <a href=\"https://github.com/karma-runner/karma-chrome-launcher/issues/10#issuecomment-132606226\" rel=\"nofollow noreferrer\">github.com/karma-runner/karma-chrome-launcher/issues/&hellip;</a>"}, {"owner": {"reputation": 14923, "user_id": 473763, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/9642e8bd2c0a4aa406f0d856cde7a6f2?s=128&d=identicon&r=PG", "display_name": "Nerian", "link": "https://stackoverflow.com/users/473763/nerian"}, "edited": false, "score": 0, "creation_date": 1455195031, "post_id": 35317828, "comment_id": 58386803, "body": "I think I will just use a headless browser, and switch to selenium when I need to debug something. Thanks :)"}, {"owner": {"reputation": 872, "user_id": 2444725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1531314183f9c163e167f0e12885a931?s=128&d=identicon&r=PG", "display_name": "Lightman", "link": "https://stackoverflow.com/users/2444725/lightman"}, "reply_to_user": {"reputation": 14923, "user_id": 473763, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/9642e8bd2c0a4aa406f0d856cde7a6f2?s=128&d=identicon&r=PG", "display_name": "Nerian", "link": "https://stackoverflow.com/users/473763/nerian"}, "edited": false, "score": 0, "creation_date": 1490688500, "post_id": 35317828, "comment_id": 73211816, "body": "@Nerian Selenium (Chrome driver to be exact) <a href=\"http://stackoverflow.com/a/43063728/2444725\">doesn&#39;t support</a> Chrome browser in <code>--no-startup-window</code> mode."}], "tags": [], "owner": {"reputation": 4879, "user_id": 954442, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/168149d073db878da990e57c891911cd?s=128&d=identicon&r=PG", "display_name": "Andrew Regan", "link": "https://stackoverflow.com/users/954442/andrew-regan"}, "is_accepted": true, "score": 1, "last_activity_date": 1455116276, "last_edit_date": 1455116276, "creation_date": 1455114383, "answer_id": 35317828, "question_id": 35317464, "link": "https://stackoverflow.com/questions/35317464/how-to-configure-selenium-web-driver-to-start-a-chrome-browser-in-the-background/35317828#35317828", "title": "How to configure Selenium web driver to start a chrome browser in the background", "body": "<p>Translating from the original Java, you just need to add the startup argument to your <code>Capabilities</code> and pass that to the new Driver instance:</p>\n\n<pre><code>capabilities = Selenium::WebDriver::Remote::Capabilities.chrome(\n    \"chromeOptions\" =&gt; {\"args\" =&gt; [ \"--no-startup-window\" ]})\n\nCapybara.default_driver = :chrome\n\nCapybara.register_driver :chrome do |app|\n  Capybara::Selenium::Driver.new(app, :browser =&gt; :chrome,\n     :desired_capabilities =&gt; capabilities)\nend\n</code></pre>\n\n<p><strong>Reference:</strong> <a href=\"https://sites.google.com/a/chromium.org/chromedriver/capabilities\" rel=\"nofollow\">https://sites.google.com/a/chromium.org/chromedriver/capabilities</a></p>\n"}], "owner": {"reputation": 14923, "user_id": 473763, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/9642e8bd2c0a4aa406f0d856cde7a6f2?s=128&d=identicon&r=PG", "display_name": "Nerian", "link": "https://stackoverflow.com/users/473763/nerian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1932, "favorite_count": 0, "accepted_answer_id": 35317828, "answer_count": 1, "score": 0, "last_activity_date": 1455116276, "creation_date": 1455113475, "last_edit_date": 1495540347, "question_id": 35317464, "link": "https://stackoverflow.com/questions/35317464/how-to-configure-selenium-web-driver-to-start-a-chrome-browser-in-the-background", "title": "How to configure Selenium web driver to start a chrome browser in the background", "body": "<p>I am using Selenium and trying to configure the Chrome driver to start in the background, that is I don't want the window to take focus. The idea is that running the test suite does not disrupt my flow when I am coding. I want the window focus to remain on the actual code editor, not on the newly created chrome window.</p>\n\n<p>So I found this answer: <a href=\"https://stackoverflow.com/questions/33009963/selenium-chrome-driver-fail-to-start-in-background-without-a-start-up-window/33010955#33010955\">Selenium - chrome Driver fail to start in background (without a start-up window)</a></p>\n\n<p>But it uses Java. I need a Ruby solution.</p>\n\n<p>I am currently using the Chrome driver as this:</p>\n\n<pre><code>Capybara.default_driver = :chrome\n\nCapybara.register_driver :chrome do |app|\n  Capybara::Selenium::Driver.new(app, :browser =&gt; :chrome)\nend\n</code></pre>\n\n<p>How can I achieve what I described?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1455112762, "creation_date": 1455112762, "answer_id": 35317224, "question_id": 35317162, "link": "https://stackoverflow.com/questions/35317162/rspec-rails-error/35317224#35317224", "title": "Rspec Rails error", "body": "<p><code>valid_attributes.id</code> has nothing to do with any Rails magic. You have assigned the value (hash) to <code>valid_attributes</code> in <code>let</code> and compare against it. This value was not changed during test execution, nor was updated from the database. <code>valid_attributes.id</code> was never set \u21d2 it is <code>nil</code>.</p>\n\n<p>In the latter case you perform a post action and then check that the value was successfully stored in the database.</p>\n"}, {"tags": [], "owner": {"reputation": 1075, "user_id": 1418151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a35a8012aa162755c2db1272a1b12b?s=128&d=identicon&r=PG", "display_name": "aliibrahim", "link": "https://stackoverflow.com/users/1418151/aliibrahim"}, "is_accepted": false, "score": 1, "last_activity_date": 1455112830, "creation_date": 1455112830, "answer_id": 35317252, "question_id": 35317162, "link": "https://stackoverflow.com/questions/35317162/rspec-rails-error/35317252#35317252", "title": "Rspec Rails error", "body": "<p><code>valid_attributes</code> is a simply a hash and it doesn't have anything to do with your <code>User</code> object. Your post will create a <code>User</code> object which will have an <code>id</code> which you are basically trying to check that exists via your test expectations.</p>\n"}], "owner": {"reputation": 83, "user_id": 4110918, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/56b55a59fa807eb72ded315c4d53b8a3?s=128&d=identicon&r=PG&f=1", "display_name": "Chimed Palden", "link": "https://stackoverflow.com/users/4110918/chimed-palden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 35317224, "answer_count": 2, "score": 0, "last_activity_date": 1455112830, "creation_date": 1455112629, "question_id": 35317162, "link": "https://stackoverflow.com/questions/35317162/rspec-rails-error", "title": "Rspec Rails error", "body": "<pre><code>let(:valid_attributes) {\n    {\n      \"first_name\" =&gt; \"MyString\",\n      \"last_name\" =&gt; \"LastName\",\n      \"email\" =&gt; \"email@example.com\",\n      \"password\" =&gt; \"password12345\",\n      \"password_confirmation\" =&gt; \"password12345\"\n    }\n  }\n\nit \"sets session when\" do\n        post :create, {:user =&gt; valid_attributes}, valid_session\n        expect(session[:user_id]).to eq(valid_attributes.id)\nend\n</code></pre>\n\n<p>when i run above test , it fails \nFailure/Error: expect(session[:user_id]).to eq(valid_attributes[\"id\"])</p>\n\n<p>expected: nil<br>\n got: 1</p>\n\n<p>But when i change it to below code , it passes the test. But what is the difference between these two. Why first one is failing.</p>\n\n<pre><code>it \"sets session when\" do\n        post :create, {:user =&gt; valid_attributes}, valid_session\n        expect(session[:user_id]).to eq(User.find_by(email: valid_attributes[\"email\"]).id)\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "installation", "ubuntu-14.04"], "comments": [{"owner": {"reputation": 1075, "user_id": 1418151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a35a8012aa162755c2db1272a1b12b?s=128&d=identicon&r=PG", "display_name": "aliibrahim", "link": "https://stackoverflow.com/users/1418151/aliibrahim"}, "edited": false, "score": 1, "creation_date": 1455112442, "post_id": 35316911, "comment_id": 58342908, "body": "Duplicate: <a href=\"http://stackoverflow.com/questions/7645918/require-no-such-file-to-load-mkmf-loaderror\" title=\"require no such file to load mkmf loaderror\">stackoverflow.com/questions/7645918/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 962, "user_id": 2011580, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/E9Ket.png?s=128&g=1", "display_name": "James B. Byrne", "link": "https://stackoverflow.com/users/2011580/james-b-byrne"}, "is_accepted": false, "score": 0, "last_activity_date": 1455112574, "last_edit_date": 1455112574, "creation_date": 1455112021, "answer_id": 35316976, "question_id": 35316911, "link": "https://stackoverflow.com/questions/35316911/installing-rails-on-ubuntu-error-failed-to-build-gem-native-extension/35316976#35316976", "title": "Installing rails on ubuntu - ERROR: Failed to build gem native extension", "body": "<p>You need a more recent version of Ruby to start with if you are using the latest version of Rails.</p>\n\n<blockquote>\n  <p>Ruby on Rails 4.0 Release Notes</p>\n  \n  <p>Highlights in Rails 4.0:</p>\n\n<pre><code>Ruby 2.0 preferred; 1.9.3+ required\n</code></pre>\n</blockquote>\n\n<p>Whereas in your error message we see:</p>\n\n<pre><code>/usr/bin/ruby1.9.1 . . .\n</code></pre>\n\n<p>And, in future you should always include in your question the version numbers of all of the software components involved with your problem.  It makes focusing on the real issue much simpler for people looking to help you.</p>\n"}, {"tags": [], "owner": {"reputation": 3154, "user_id": 5409748, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/DQWhS.jpg?s=128&g=1", "display_name": "Jai Kumar Rajput", "link": "https://stackoverflow.com/users/5409748/jai-kumar-rajput"}, "is_accepted": false, "score": 2, "last_activity_date": 1455112378, "creation_date": 1455112378, "answer_id": 35317095, "question_id": 35316911, "link": "https://stackoverflow.com/questions/35316911/installing-rails-on-ubuntu-error-failed-to-build-gem-native-extension/35317095#35317095", "title": "Installing rails on ubuntu - ERROR: Failed to build gem native extension", "body": "<p>References : <a href=\"http://railsapps.github.io/installrubyonrails-ubuntu.html\" rel=\"nofollow\">http://railsapps.github.io/installrubyonrails-ubuntu.html</a></p>\n\n<p><strong>Prepare Your System</strong></p>\n\n<p>You\u2019ll need to prepare your computer with the required system software before installing Ruby on Rails.</p>\n\n<p>You\u2019ll need superuser (root) access to update the system software.</p>\n\n<p>Update your package manager first:</p>\n\n<pre><code>$ sudo apt-get update\n</code></pre>\n\n<p>This must finish without error or the following step will fail.</p>\n\n<p>Install Curl:</p>\n\n<pre><code>$ sudo apt-get install curl\n</code></pre>\n\n<p>You\u2019ll use Curl for installing RVM.\nInstall Ruby Using RVM</p>\n\n<p>Use RVM, the Ruby Version Manager, to install Ruby and manage your Rails versions.</p>\n\n<p>If you have an older version of Ruby installed on your computer, there\u2019s no need to remove it. RVM will leave your \u201csystem Ruby\u201d untouched and use your shell to intercept any calls to Ruby. Any older Ruby versions will remain on your system and the RVM version will take precedence.</p>\n\n<p>Ruby 2.3.0 was current when this was written. You can check for the current recommended version of Ruby. RVM will install the newest stable Ruby version.</p>\n\n<p>The RVM website explains how to install RVM. Here\u2019s the simplest way:</p>\n\n<pre><code>$ \\curl -L https://get.rvm.io | bash -s stable --ruby\n</code></pre>\n\n<p>Note the backslash before \u201ccurl\u201d (this avoids potential version conflicts).</p>\n\n<p>The \u201c\u2014ruby\u201d flag will install the newest version of Ruby.</p>\n\n<p>RVM includes an \u201cautolibs\u201d option to identify and install system software needed for your operating system. See the article RVM Autolibs: Automatic Dependency Handling and Ruby 2.0 for more information.\nIf You Already Have RVM Installed</p>\n\n<p>If you already have RVM installed, update it to the latest version and install Ruby:</p>\n\n<pre><code>$ rvm get stable --autolibs=enable\n$ rvm install ruby\n$ rvm --default use ruby-2.3.0\n</code></pre>\n\n<p>Installation Troubleshooting and Advice\nRVM Troubleshooting</p>\n\n<p>If you have trouble installing Ruby with RVM, you can get help directly from the RVM team using the IRC (Internet Relay Chat) channel #rvm on irc.freenode.net:</p>\n\n<p><a href=\"http://webchat.freenode.net/?channels=rvm\" rel=\"nofollow\">http://webchat.freenode.net/?channels=rvm</a></p>\n\n<p>If you\u2019ve never used IRC, it\u2019s worthwhile to figure out how to use IRC because the RVM team is helpful and friendly. IRC on freenode requires registration (see how to register).</p>\n"}], "owner": {"reputation": 176, "user_id": 5674900, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jUPJD.png?s=128&g=1", "display_name": "dominikduda", "link": "https://stackoverflow.com/users/5674900/dominikduda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6377, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1455118199, "creation_date": 1455111847, "last_edit_date": 1455118199, "question_id": 35316911, "link": "https://stackoverflow.com/questions/35316911/installing-rails-on-ubuntu-error-failed-to-build-gem-native-extension", "title": "Installing rails on ubuntu - ERROR: Failed to build gem native extension", "body": "<p>I wanted to start learning ror, but I have problem installing it. Thats what my console says when I type \"sudo gem install rails\" in.</p>\n\n<pre><code>Building native extensions.  This could take a while...\nERROR:  Error installing rails:\n        ERROR: Failed to build gem native extension.\n\n        /usr/bin/ruby1.9.1 extconf.rb\n/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- mkmf (LoadError)\n    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\n    from extconf.rb:1:in `&lt;main&gt;'\n\n\nGem files will remain installed in /var/lib/gems/1.9.1/gems/json-1.8.3 for inspection.\nResults logged to /var/lib/gems/1.9.1/gems/json-1.8.3/ext/json/ext/generator/gem_make.out\n</code></pre>\n\n<hr>\n\n<p>This solved problem:</p>\n\n<pre><code>sudo apt-get install ruby-dev\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ajax", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 1045, "user_id": 2629043, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/wBM4j.jpg?s=128&g=1", "display_name": "Alankar More", "link": "https://stackoverflow.com/users/2629043/alankar-more"}, "edited": false, "score": 0, "creation_date": 1455110142, "post_id": 35316083, "comment_id": 58341240, "body": "Instead of <code>redirect_to :back</code> you have to <code>render json:</code> which will have the HTML in string which  you want to replace . redirect_to: back will refresh the page. And for ajax you have to send json or html response only"}, {"owner": {"reputation": 179, "user_id": 5726485, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10207019311632480/picture?type=large", "display_name": "Hussein.", "link": "https://stackoverflow.com/users/5726485/hussein"}, "reply_to_user": {"reputation": 1045, "user_id": 2629043, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/wBM4j.jpg?s=128&g=1", "display_name": "Alankar More", "link": "https://stackoverflow.com/users/2629043/alankar-more"}, "edited": false, "score": 0, "creation_date": 1455112001, "post_id": 35316083, "comment_id": 58342608, "body": "@AlankarMore I change <code>redirect_to :back</code> =&gt; <code>render json: @fav</code>. Now when I want to add as a favorite there is a hash like this : <code>{ id: 40, user_id: 1, hiragana_id: 4, created_at: &quot;2016-02-10T13:41:59.537Z&quot;, updated_at: &quot;2016-02-10T13:41:59.537Z&quot; }</code>"}, {"owner": {"reputation": 1045, "user_id": 2629043, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/wBM4j.jpg?s=128&g=1", "display_name": "Alankar More", "link": "https://stackoverflow.com/users/2629043/alankar-more"}, "edited": false, "score": 0, "creation_date": 1455112641, "post_id": 35316083, "comment_id": 58343054, "body": "read about render_to_string [<a href=\"http://stackoverflow.com/questions/3714198/how-to-pass-variables-to-render-to-string]\" title=\"how to pass variables to render to string%5d\">stackoverflow.com/questions/3714198/&hellip;</a>"}], "owner": {"reputation": 179, "user_id": 5726485, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10207019311632480/picture?type=large", "display_name": "Hussein.", "link": "https://stackoverflow.com/users/5726485/hussein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1455114483, "creation_date": 1455109394, "last_edit_date": 1455114483, "question_id": 35316083, "link": "https://stackoverflow.com/questions/35316083/adding-ajax-add-to-favorite-to-have-no-full-page-reloading", "title": "Adding AJAX &#39;add to favorite&#39; to have no full page reloading", "body": "<p>I have an app that allows users logged to add hiragana flashcards as favorites. When someone likes a flashcard, the flashcrad changed state as a grey heart to a red heart but the fullpage is reloaded. I try to understand Ajax to have only this action works on the page.</p>\n\n<p>Here is the favorite controller </p>\n\n<pre><code>class FavsController &lt; ApplicationController\n\n  def index\n    @favs = Fav.where(user: current_user)\n  end\n\n  def create\n    @hiragana = Hiragana.find(params[:hiragana_id])\n    @fav = current_user.favs.new(hiragana: @hiragana)\n    if not @hiragana.favs.where(user: current_user).take\n      @fav.save\n    end\n    redirect_to :back\n  end\n\n  def destroy\n    @fav = Fav.find(params[:id])\n    @fav.destroy\n    redirect_to :back\n  end\nend\n</code></pre>\n\n<p>The view is a render I place on the hiragana flashcards</p>\n\n<pre><code>&lt;% if current_user %&gt;\n  &lt;div class=\"hiragana-fav\"&gt;\n    &lt;% if hiragana.is_faved_by(current_user) %&gt;\n      &lt;%= link_to fav_path(hiragana.is_faved_by(current_user)), method: :delete do %&gt;\n        &lt;i class=\"fa fa-heart faved faved-on\"&gt;&lt;/i&gt;\n      &lt;% end %&gt;\n    &lt;% else %&gt;\n      &lt;%= link_to hiragana_favs_path(hiragana), method: :post do %&gt;\n        &lt;i class=\"fa a fa-heart faved faved-off\"&gt;&lt;/i&gt;\n      &lt;% end %&gt;\n    &lt;% end  %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Here is the css code :</p>\n\n<pre><code>.fa.faved {\n  font-size: 18px;\n  color: #d3d3d3;\n  &amp;-on {\n    color: #FF0000;\n  }\n}\n</code></pre>\n\n<p>Thank you for your help.</p>\n\n<p>I tried to do this in application.js (but it doesn't work) :</p>\n\n<pre><code>$(document).ready(function() {\n   $('.faved-on').click(function() {\n    var fav = $('.faved-off')\n\n    $.ajax({\n      type: \"GET\",\n      url: \"https://hello.co\",\n        success: function(data) {\n      console.log(data);\n      },\n      error: function(jqXHR) {\n      console.error(jqXHR.responseText);\n      }\n    });\n  })\n})\n</code></pre>\n"}, {"tags": ["ruby", "chef-infra"], "answers": [{"tags": [], "owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "is_accepted": true, "score": 2, "last_activity_date": 1455132938, "last_edit_date": 1455132938, "creation_date": 1455110847, "answer_id": 35316562, "question_id": 35316068, "link": "https://stackoverflow.com/questions/35316068/how-do-i-notify-a-chef-execute-resource-that-require-a-parameter/35316562#35316562", "title": "How do i notify a chef execute resource that require a parameter", "body": "<p>Besides that you could use the directory resource to delete it, there is no such thing as a parameter. The resource name is <code>execute[rm -rf /opt/app/#{application['name']}.zip]</code> in your case and you have to notify it using this name:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>some_resource \"foo\" do\n  whatever true\n  notifies :run, \"execute[rm -rf /opt/app/#{application['name']}.zip]\"\nend\n</code></pre>\n\n<p>For an application with name <code>test</code>, the resource name would be <code>execute[rm -rf /opt/app/test.zip]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 1, "last_activity_date": 1455133066, "creation_date": 1455133066, "answer_id": 35324391, "question_id": 35316068, "link": "https://stackoverflow.com/questions/35316068/how-do-i-notify-a-chef-execute-resource-that-require-a-parameter/35324391#35324391", "title": "How do i notify a chef execute resource that require a parameter", "body": "<p>In addition to the above, you can give a resource a more compact name:</p>\n\n<pre><code>execute 'delete_files' do\n  command \"rm -rf /opt/app/#{application['name']}.zip\"\n  action :nothing\nend\n\nsome_resource 'foo' do\n  whatever true\n  notifies :run, 'execute[delete_files]'\nend\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 5907861, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1hB1A.jpg?s=128&g=1", "display_name": "Basil Paul", "link": "https://stackoverflow.com/users/5907861/basil-paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 728, "favorite_count": 2, "accepted_answer_id": 35316562, "answer_count": 2, "score": 1, "last_activity_date": 1455133066, "creation_date": 1455109358, "last_edit_date": 1455110699, "question_id": 35316068, "link": "https://stackoverflow.com/questions/35316068/how-do-i-notify-a-chef-execute-resource-that-require-a-parameter", "title": "How do i notify a chef execute resource that require a parameter", "body": "<p>I am trying to notify the below execute resource from within a remote_file resource and need to pass application name. How do i do it?</p>\n\n<pre><code>execute \"rm -rf /opt/app/#{application['name']}.zip\" do \n  action: nothing\nend\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "cancancan"], "answers": [{"tags": [], "owner": {"reputation": 1999, "user_id": 389014, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6f3ef9f408b5ae9860dd671d2c7d23ca?s=128&d=identicon&r=PG", "display_name": "cyber_dave", "link": "https://stackoverflow.com/users/389014/cyber-dave"}, "is_accepted": true, "score": 0, "last_activity_date": 1477943890, "creation_date": 1477943890, "answer_id": 40349640, "question_id": 35315914, "link": "https://stackoverflow.com/questions/35315914/cancancan-create-permission-not-working-properly-with-conditions-hash/40349640#40349640", "title": "cancancan create permission not working properly with conditions hash", "body": "<p>This may be a little late, but in Ruby 2.0+ your hash of conditions is interpreted as a keyword argument, which CanCanCan ignores in this instance. </p>\n\n<p>Adding brackets should allow this to work as expected:</p>\n\n<p><code>can [:create, :read, :update], User, { id: account_user_ids }</code></p>\n\n<p>See also:</p>\n\n<p>Keyword Args: <a href=\"https://robots.thoughtbot.com/ruby-2-keyword-arguments\" rel=\"nofollow\">https://robots.thoughtbot.com/ruby-2-keyword-arguments</a></p>\n\n<p><code>CanCan::Ability#can</code>: <a href=\"https://github.com/CanCanCommunity/cancancan/blob/develop/lib/cancan/ability.rb#L132-L134\" rel=\"nofollow\">https://github.com/CanCanCommunity/cancancan/blob/develop/lib/cancan/ability.rb#L132-L134</a></p>\n"}], "owner": {"reputation": 877, "user_id": 1136228, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/35886302d2b1902a6d8ae9c43408c45e?s=128&d=identicon&r=PG", "display_name": "user1136228", "link": "https://stackoverflow.com/users/1136228/user1136228"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "accepted_answer_id": 40349640, "answer_count": 1, "score": 3, "last_activity_date": 1477943890, "creation_date": 1455108959, "question_id": 35315914, "link": "https://stackoverflow.com/questions/35315914/cancancan-create-permission-not-working-properly-with-conditions-hash", "title": "cancancan create permission not working properly with conditions hash", "body": "<p>I want admin User to be able to create new users for this account and read, update users from this account.</p>\n\n<pre><code>can [:create, :read, :update], User, id: account_users_ids\n</code></pre>\n\n<p>is not working if account_users_ids is not en empty array.\nI need to split permissions to get it working</p>\n\n<pre><code>can :create, User\ncan [:read, :update], User, id: account_users_ids\n</code></pre>\n\n<p>what is wrong with defining conditions as</p>\n\n<pre><code>can [:create, :read, :update], User, id: account_user_ids\n</code></pre>\n\n<p>thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 6788, "user_id": 1035375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9FOS.jpg?s=128&g=1", "display_name": "dre-hh", "link": "https://stackoverflow.com/users/1035375/dre-hh"}, "edited": false, "score": 0, "creation_date": 1455109082, "post_id": 35315712, "comment_id": 58340494, "body": "There is allways an option to move to linux. Install virtualbox. ruby and windows is just pain. you should have more luck with jruby"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1455109408, "post_id": 35315712, "comment_id": 58340725, "body": "jruby is different ruby built on top of the Java Virtual Machine and has nothing to do with linux/windows (jruby runs on both). Using linux or any other *nix is recommended though since you can type along on the console with most decent quality rails learning materials. It can be done with Cygwin  but you still have to remember that you have a bunch of duct tape and popsicles under it and not Posix..."}, {"owner": {"reputation": 995, "user_id": 2576714, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RcYff.jpg?s=128&g=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/2576714/tim"}, "edited": false, "score": 0, "creation_date": 1455112139, "post_id": 35315712, "comment_id": 58342706, "body": "If you have the option - do move to Linux, you&#39;ll save yourself a month.."}, {"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 0, "creation_date": 1455213084, "post_id": 35315712, "comment_id": 58400065, "body": "Sounds like an issue with bundler and gems, not Rails - I&#39;d try deleting <code>Gemfile.lock</code> and reinstalling all existing gems. FWIW, i develop on Windows and most things work fine for me. There are exceptions, but a bit of googling solves them just fine."}], "answers": [{"tags": [], "owner": {"reputation": 1075, "user_id": 1418151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46a35a8012aa162755c2db1272a1b12b?s=128&d=identicon&r=PG", "display_name": "aliibrahim", "link": "https://stackoverflow.com/users/1418151/aliibrahim"}, "is_accepted": false, "score": 1, "last_activity_date": 1455112353, "creation_date": 1455112353, "answer_id": 35317083, "question_id": 35315712, "link": "https://stackoverflow.com/questions/35315712/rails-initialization-checksum-error/35317083#35317083", "title": "Rails initialization checksum error", "body": "<p>Try removing your ruby <code>cache</code> folder and then try again. So for example if you are on Linux machine and you are using <code>rbenv</code> and say ruby <code>2.1.5</code> folder. Your path would be similar to something like (Not sure where on windows ruby is stored): </p>\n\n<pre><code> ~/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/cache/\n</code></pre>\n\n<p>Removing this folder and trying <code>bundle install</code> again should resolve the issue.</p>\n\n<p>It will be great, if you move to a Linux machine.</p>\n"}, {"tags": [], "owner": {"reputation": 418, "user_id": 5832798, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aphMx.jpg?s=128&g=1", "display_name": "farhan", "link": "https://stackoverflow.com/users/5832798/farhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1455212424, "creation_date": 1455212424, "answer_id": 35346322, "question_id": 35315712, "link": "https://stackoverflow.com/questions/35315712/rails-initialization-checksum-error/35346322#35346322", "title": "Rails initialization checksum error", "body": "<p>On windows it's a hell to pay in my 5 years of experience what i have learned is not to mess with (ror) or (rs) in windows. here's a cheeky thing you can do an easy way. I believe you are using github as repo, as a editor you are using sublime if thats is a case open your gemfile you will see <a href=\"http://i.stack.imgur.com/Y2kYj.png\" rel=\"nofollow\">check the image</a>  or \ntry to clear cache on your server or update the gems.</p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 5257505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5533d02c66864c33fc5eae8c2452f3?s=128&d=identicon&r=PG", "display_name": "Andrew M.", "link": "https://stackoverflow.com/users/5257505/andrew-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1455245583, "creation_date": 1455245583, "answer_id": 35354021, "question_id": 35315712, "link": "https://stackoverflow.com/questions/35315712/rails-initialization-checksum-error/35354021#35354021", "title": "Rails initialization checksum error", "body": "<p>I had this same exact error and solved it the following way.  I think you are missing the ruby DevKit being installed.</p>\n\n<ol>\n<li>Go here <a href=\"http://rubyinstaller.org/downloads/\" rel=\"nofollow\">http://rubyinstaller.org/downloads/</a> and download/install the latest 32-bit Ruby version (as of writing this 2.2.4, you will need it for the web-console gem)</li>\n<li>Make sure to add your ruby\\bin folder to your environmental path variable</li>\n<li>The trick is hidden near the bottom-left of the same page under the \"Development Kit\" section. You need to download and extract the right one into a permanent location (as of writing this for 32-bit - DevKit-mingw64-32-4.7.2-20130224-1151-sfx.exe)</li>\n<li>After extracting the files, go into the main directory and run \"ruby dk.rb init\" followed by \"ruby dk.rb install\" (More information can be found <a href=\"https://github.com/oneclick/rubyinstaller/wiki/development-kit\" rel=\"nofollow\">here</a></li>\n</ol>\n\n<p>That fixed it for me and i can now fully install with no checksum issues</p>\n"}, {"comments": [{"owner": {"reputation": 3587, "user_id": 2647306, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0d09c1c17b89052e1c2947463b67be7d?s=128&d=identicon&r=PG", "display_name": "dacoinminster", "link": "https://stackoverflow.com/users/2647306/dacoinminster"}, "edited": false, "score": 4, "creation_date": 1455392638, "post_id": 35382334, "comment_id": 58473515, "body": "This fixed it for me too, but I didn&#39;t even had to install an older version. I just uninstalled all versions, then reinstalled the latest"}, {"owner": {"reputation": 2885, "user_id": 1903781, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/61Mu1.jpg?s=128&g=1", "display_name": "Adrian Moisa", "link": "https://stackoverflow.com/users/1903781/adrian-moisa"}, "edited": false, "score": 0, "creation_date": 1473932851, "post_id": 35382334, "comment_id": 66332311, "body": "Fixed! Thank you!"}], "tags": [], "owner": {"reputation": 226, "user_id": 5920403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2fa59fd79c676c39e043190ee714ff?s=128&d=identicon&r=PG&f=1", "display_name": "JessH", "link": "https://stackoverflow.com/users/5920403/jessh"}, "is_accepted": true, "score": 21, "last_activity_date": 1455380956, "creation_date": 1455380956, "answer_id": 35382334, "question_id": 35315712, "link": "https://stackoverflow.com/questions/35315712/rails-initialization-checksum-error/35382334#35382334", "title": "Rails initialization checksum error", "body": "<p>I had the same issue using windows, and was able to solve it by uninstalling bundler and installing an older version.</p>\n\n<pre><code>rails new &lt;appname&gt;\ngem uninstall bundler\ngem install bundler -v 1.9\ncd &lt;appname&gt;\nbundle install\n</code></pre>\n\n<p>That did it for me!</p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 4947436, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hdUOk8ybea4/AAAAAAAAAAI/AAAAAAAALOI/eXYy9aeUIsI/photo.jpg?sz=128", "display_name": "Yuliem Alavez", "link": "https://stackoverflow.com/users/4947436/yuliem-alavez"}, "is_accepted": false, "score": 0, "last_activity_date": 1459191503, "creation_date": 1459191503, "answer_id": 36269118, "question_id": 35315712, "link": "https://stackoverflow.com/questions/35315712/rails-initialization-checksum-error/36269118#36269118", "title": "Rails initialization checksum error", "body": "<p>This problem began when i tried to run my app. I wrote <code>rails s</code> and the console said me <code>Could not find sdoc-0.4.1 in any of the sources Run bundle install to install missing gems.</code> Then i wrote <code>bundle install</code> and the message that appeared was <code>Checksum of /versions does not match the checksum provided by server! Something is wrong.</code></p>\n\n<p>I solve this problem following this steps:</p>\n\n<ol>\n<li>Wrote <code>bundle install</code></li>\n<li>The console said me <code>Could not find sdoc-0.4.1 in any of the sources</code></li>\n<li>Then i reinstalled this gem with <code>gem install sdoc -v 0.4.1</code></li>\n<li>I tried again to write <code>rails s</code> and it's was solved.</li>\n</ol>\n\n<p>`</p>\n"}, {"tags": [], "owner": {"reputation": 103, "user_id": 2077820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/szRBm.png?s=128&g=1", "display_name": "Askar Hussain", "link": "https://stackoverflow.com/users/2077820/askar-hussain"}, "is_accepted": false, "score": 2, "last_activity_date": 1470261524, "creation_date": 1470261524, "answer_id": 38754330, "question_id": 35315712, "link": "https://stackoverflow.com/questions/35315712/rails-initialization-checksum-error/38754330#38754330", "title": "Rails initialization checksum error", "body": "<p>In my case there was a *.pre.1 version and I chose to uninstall that particular version and then \"bundle install\" worked.</p>\n"}], "owner": {"reputation": 801, "user_id": 5388567, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d0171125d3261a31e3ab7792913f74c8?s=128&d=identicon&r=PG", "display_name": "Valkyrie", "link": "https://stackoverflow.com/users/5388567/valkyrie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8451, "favorite_count": 4, "accepted_answer_id": 35382334, "answer_count": 6, "score": 9, "last_activity_date": 1470261524, "creation_date": 1455108370, "last_edit_date": 1455108729, "question_id": 35315712, "link": "https://stackoverflow.com/questions/35315712/rails-initialization-checksum-error", "title": "Rails initialization checksum error", "body": "<p>I'm trying to initialize a new rails app on windows, and running <code>rails new &lt;appname&gt;</code> generates everything up to <code>vendor/assets/stylesheets/.keep</code>, but when <code>bundle install</code> is run, rails generates this error:</p>\n\n<pre><code>Checksum of /versions does not match the checksum provided by server! Something is wrong.\n</code></pre>\n\n<p>I'm not sure what's causing this, as I've done nothing to rails itself. Any help is appreciated.</p>\n\n<p>Edit: If it's an error caused by windows being finicky, I have the option of moving to Linux, but I'd like to know what's wrong first.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-s3"], "comments": [{"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1455108021, "post_id": 35315335, "comment_id": 58339704, "body": "check the port port 443"}, {"owner": {"reputation": 1200, "user_id": 536034, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/00c07fa4826fb4c86bf713a0de32c16f?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/536034/ben"}, "reply_to_user": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1455168591, "post_id": 35315335, "comment_id": 58370835, "body": "sorry do you mean set port to 443 (tried that) or something else?"}], "owner": {"reputation": 1200, "user_id": 536034, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/00c07fa4826fb4c86bf713a0de32c16f?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/536034/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1455168567, "creation_date": 1455107333, "last_edit_date": 1495542668, "question_id": 35315335, "link": "https://stackoverflow.com/questions/35315335/heroku-paperclip-demo-local-s3-fakes3-errnoeconnrefused-connection-refused", "title": "Heroku paperclip demo + local S3 fakes3 (Errno::ECONNREFUSED (Connection refused)", "body": "<p>Trying to get my first s3 app going. Followed the paperclip_demo example but struggling to get local version working with fakes3. Keep getting \"We're sorry, but something went wrong.\" error. In the logs (set to debug level), I get error</p>\n\n<pre><code>        Errno::ECONNREFUSED (Connection refused - connect(2) for \"testme.fakes3.local\" port 443):\n</code></pre>\n\n<p>biggest issue is that it seems not to connect to the correct port. (config file (<code>development.rb</code>) below)</p>\n\n<pre><code>        # /etc/hosts\n        127.0.0.1      fakes3.local testme.fakes3.local\n</code></pre>\n\n<p>running fakes3 as</p>\n\n<p><code>fakes3 -r /tmp/fakes3 -p 4567 -H fakes3.local</code></p>\n\n<p>I've tried</p>\n\n<ul>\n<li>s3_port v just port</li>\n<li>string versus numeric</li>\n<li>inside :s3_credentials, or outside, or in s3_options hash</li>\n<li>I'm confused by this <a href=\"https://ruby.awsblog.com/post/TxVOTODBPHAEP9/Working-with-Regions\" rel=\"nofollow noreferrer\" title=\"aws block\">aws blog</a>awsblog post which suggests its not s3_port but just \"port\"</li>\n<li><p>tried adding s3_endpoint (or just endpoint) (as per this <a href=\"https://github.com/jubos/fake-s3/issues/32\" rel=\"nofollow noreferrer\" title=\"fakes3 issue\">aws blog</a>)</p>\n\n<pre><code>  # development.rb\n\n  config.paperclip_defaults = {\n    :storage =&gt; :s3,\n    :s3_protocol =&gt; 'http',\n    :s3_credentials =&gt; {\n      :bucket =&gt; \"testme\",\n      :access_key_id =&gt; \"blah\",\n      :secret_access_key =&gt; \"blah\"\n    },\n      :s3_host_name =&gt; \"fakes3.local\", # also added s3_endpoint\n      :port =&gt; 4567, # tried s3_port, tried string and just numeric\n      :use_ssl =&gt; false\n  }\n</code></pre></li>\n</ul>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I did try</p>\n\n<ul>\n<li>downgrading the aws-sdk as suggested <a href=\"https://stackoverflow.com/questions/35098534/rails-4-heroku-paperclip-s3-not-working-in-production\">here</a>. </li>\n<li>using port 443 - this does not work as the web server is running on this so there is a conflict</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1455107021, "post_id": 35315162, "comment_id": 58338970, "body": "For \u201c<b>started</b> with certain string\u201d the correct placement of a percent sign would be the opposite: <code>&#39;title LIKE ?&#39;, &quot;#{title}%&quot;</code>."}, {"owner": {"reputation": 1809, "user_id": 4966705, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh5.googleusercontent.com/-33GGBSJvG1o/AAAAAAAAAAI/AAAAAAAAAEw/l3yn5OOYHKA/photo.jpg?sz=128", "display_name": "rob", "link": "https://stackoverflow.com/users/4966705/rob"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1455107288, "post_id": 35315162, "comment_id": 58339156, "body": "@mudasobwa thanks a lot. you&#39;re right. i updated the answer and correct my mistake"}, {"owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "edited": false, "score": 0, "creation_date": 1455108469, "post_id": 35315162, "comment_id": 58340040, "body": "Thanks, it works but I&#39;m having a problem with capital sensitivity. The title in the params is without a capital, while in the database the title has a capital. As a results it returns no records. Is there a way to solve this and make the &#39;query&#39; capital insensitive?"}, {"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 2, "creation_date": 1455109051, "post_id": 35315162, "comment_id": 58340476, "body": "Try <code>Record.where(&#39;LOWER(title) LIKE ?&#39;, &quot;#{params[:title_name].downcase}%&quot;).order(:title)</code> to be caseinsensitive. The SQL function could also be <code>LCASE</code>. Depends on your database."}], "tags": [], "owner": {"reputation": 1809, "user_id": 4966705, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh5.googleusercontent.com/-33GGBSJvG1o/AAAAAAAAAAI/AAAAAAAAAEw/l3yn5OOYHKA/photo.jpg?sz=128", "display_name": "rob", "link": "https://stackoverflow.com/users/4966705/rob"}, "is_accepted": true, "score": 2, "last_activity_date": 1455125370, "last_edit_date": 1455125370, "creation_date": 1455106851, "answer_id": 35315162, "question_id": 35315031, "link": "https://stackoverflow.com/questions/35315031/how-to-select-all-records-that-start-with-certain-string/35315162#35315162", "title": "How to select all records that start with certain string?", "body": "<p>You can use the <code>LIKE</code> operator here:</p>\n\n<pre><code>@records = Record.where('title LIKE ?', \"#{params[:title_name]}%\").order(:title)\n</code></pre>\n\n<p>I would prefer to put these into a scope:</p>\n\n<pre><code>scope :title_search, -&gt;(title){ where('title LIKE ?', \"#{title}%\") }\n</code></pre>\n\n<p>and call it via:</p>\n\n<pre><code>@records = Record.title_search(params[:title_name])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "is_accepted": false, "score": 0, "last_activity_date": 1455107249, "creation_date": 1455107249, "answer_id": 35315306, "question_id": 35315031, "link": "https://stackoverflow.com/questions/35315031/how-to-select-all-records-that-start-with-certain-string/35315306#35315306", "title": "How to select all records that start with certain string?", "body": "<p>You can try  <a href=\"http://rdoc.info/projects/binarylogic/searchlogic\" rel=\"nofollow\">Searchlogic</a> .</p>\n\n<p>Then it's as easy as:</p>\n\n<pre><code>@search = Record.new_search(params[:search])\n@search.condition.title_starts_with = \"Nick\"\n@models = @search.all\n</code></pre>\n\n<p>Or you can try</p>\n\n<pre><code>Record.where(\"title LIKE :prefix\", prefix: \"#{prefix}%\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": false, "score": 0, "last_activity_date": 1455125400, "last_edit_date": 1495540347, "creation_date": 1455112480, "answer_id": 35317123, "question_id": 35315031, "link": "https://stackoverflow.com/questions/35315031/how-to-select-all-records-that-start-with-certain-string/35317123#35317123", "title": "How to select all records that start with certain string?", "body": "<p>I'd recommend using arel as in \"<a href=\"https://stackoverflow.com/questions/4430578/how-to-do-a-like-query-in-arel-and-rails\">How to do a LIKE query in Arel and Rails?</a>\"</p>\n\n<pre><code>records = Record.arel_table\nRecord.where records[:title].matches(\"#{params[:title_name]}%\")\n</code></pre>\n"}], "owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 1, "accepted_answer_id": 35315162, "answer_count": 3, "score": 0, "last_activity_date": 1455125400, "creation_date": 1455106540, "question_id": 35315031, "link": "https://stackoverflow.com/questions/35315031/how-to-select-all-records-that-start-with-certain-string", "title": "How to select all records that start with certain string?", "body": "<p>I have several records for which <code>title</code> starts with:</p>\n\n<ul>\n<li>Nick1</li>\n<li>Nick2</li>\n<li>Nick3</li>\n<li>Othername1</li>\n</ul>\n\n<p>How can I select all the records of which the title starts with \"Nick\" and have them rendered in the correct order? Something like:</p>\n\n<pre><code>@records = Record.where(title starts with: params[:title_name])\nrender json: @records\n</code></pre>\n"}, {"tags": ["ruby", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 35107, "user_id": 1120015, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ID1fe.png?s=128&g=1", "display_name": "Uri Agassi", "link": "https://stackoverflow.com/users/1120015/uri-agassi"}, "is_accepted": false, "score": 1, "last_activity_date": 1455106006, "creation_date": 1455106006, "answer_id": 35314803, "question_id": 35314645, "link": "https://stackoverflow.com/questions/35314645/trouble-activating-gem-version/35314803#35314803", "title": "Trouble &quot;activating&quot; gem version", "body": "<p>Try:</p>\n\n<pre><code>bundle exec rspec\n</code></pre>\n\n<p>the error suggests \"Prepending <code>bundle exec</code> to your command\" - which literally means adding <code>bundle exec</code> before the <code>rspec</code> command.</p>\n"}], "owner": {"reputation": 9009, "user_id": 263900, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/7Hnwy.png?s=128&g=1", "display_name": "doub1ejack", "link": "https://stackoverflow.com/users/263900/doub1ejack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1455106006, "creation_date": 1455105554, "last_edit_date": 1495541254, "question_id": 35314645, "link": "https://stackoverflow.com/questions/35314645/trouble-activating-gem-version", "title": "Trouble &quot;activating&quot; gem version", "body": "<p>I'm taking a coursera intro class on rails and having some trouble with the gems.</p>\n\n<p>When I run rspec on a new rails project I get this error:</p>\n\n<pre><code>/Users/mme/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/bundler-1.11.2/lib/bundler/runtime.rb:34:in `block in setup': \nYou have already activated poltergeist 1.9.0, but your Gemfile requires poltergeist 1.6.0. \nPrepending `bundle exec` to your command may solve this. (Gem::LoadError)\n</code></pre>\n\n<p>According to <a href=\"https://stackoverflow.com/questions/9703286/how-to-switch-between-different-version-of-gem-installed\">How to switch between different version of gem installed?</a>, I should be able to use <code>bundle exec [gem]</code></p>\n\n<pre><code>$ bundle exec poltergeist\nbundler: command not found: poltergeist\nInstall missing gem executables with `bundle install`\n</code></pre>\n\n<p>That doesn't make sense - I've used poltergeist previously:</p>\n\n<pre><code>$ bundle install | grep poltergeist\nUsing poltergeist 1.6.0\n</code></pre>\n\n<p>Does anyone have some advice on how to reconcile this situation?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "parsing", "time"], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 2, "last_activity_date": 1455105675, "creation_date": 1455105675, "answer_id": 35314694, "question_id": 35314601, "link": "https://stackoverflow.com/questions/35314601/rails-split-not-working-as-expected/35314694#35314694", "title": "rails split not working as expected", "body": "<p>You are looking for <a href=\"http://ruby-doc.org/core-2.2.0/Time.html#method-i-strftime\" rel=\"nofollow\">Time#<code>strftime</code></a>:</p>\n\n<pre><code> Time.parse('19:30:00').strftime('%H:%M')\n #=&gt; \"19:30\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 868, "user_id": 647552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4ef20f72eb9bd4f293c5f8837ef2c064?s=128&d=identicon&r=PG", "display_name": "J Plato", "link": "https://stackoverflow.com/users/647552/j-plato"}, "is_accepted": false, "score": 0, "last_activity_date": 1455106504, "last_edit_date": 1455106504, "creation_date": 1455106138, "answer_id": 35314854, "question_id": 35314601, "link": "https://stackoverflow.com/questions/35314601/rails-split-not-working-as-expected/35314854#35314854", "title": "rails split not working as expected", "body": "<p>Since this is already a string, I would use a regular expression:</p>\n\n<pre><code>time.match(/(.*):/)[1]\n</code></pre>\n\n<p>In a quick benchmark I did, this was nearly 20 times faster then using Time.parse</p>\n"}], "owner": {"reputation": 101, "user_id": 5820554, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/a8f9b339245568cdd55e6ceedd710d64?s=128&d=identicon&r=PG&f=1", "display_name": "SamAdmit", "link": "https://stackoverflow.com/users/5820554/samadmit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 35314694, "answer_count": 2, "score": 0, "last_activity_date": 1455106814, "creation_date": 1455105449, "last_edit_date": 1455106814, "question_id": 35314601, "link": "https://stackoverflow.com/questions/35314601/rails-split-not-working-as-expected", "title": "rails split not working as expected", "body": "<p>I'm using rails <code>split</code> to <code>split</code> the time up.</p>\n\n<p>I have this:</p>\n\n<pre><code>MM = time.split(':')[1]\nHH = time.split(':')[0]\n</code></pre>\n\n<p>Time has this:</p>\n\n<pre><code>19:30:00\n</code></pre>\n\n<p>I'm just wanting </p>\n\n<pre><code>19:30\n</code></pre>\n\n<p>If i do <code>HH + ':' + MM</code> i should get the format back i want correct?</p>\n\n<p>If i do the splits manually in byebug i get eventhign back fine. </p>\n\n<p>But if i do HH in byebug i get </p>\n\n<pre><code>*** NameError Exception: undefined local variable or method `HH' for main:Object\n\nnil\n</code></pre>\n\n<p>However MM works fine?</p>\n\n<p>Ideas?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1455104738, "post_id": 35313937, "comment_id": 58337336, "body": "Try this <code>&lt;%= link_to &#39; &#39;, :controller =&gt; n.specific.subject[:type].pluralize, :action =&gt; :load, :id =&gt; n.specific.subject[:id], :remote =&gt; true do %&gt;</code>"}, {"owner": {"reputation": 755, "user_id": 1974787, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f8bfd50de2a896e92a3f34f4750ff739?s=128&d=identicon&r=PG", "display_name": "Burak &#214;zmen", "link": "https://stackoverflow.com/users/1974787/burak-%c3%96zmen"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1455105000, "post_id": 35313937, "comment_id": 58337537, "body": "@Pavan It is referencing to the current page. Not working :/"}], "answers": [{"comments": [{"owner": {"reputation": 755, "user_id": 1974787, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f8bfd50de2a896e92a3f34f4750ff739?s=128&d=identicon&r=PG", "display_name": "Burak &#214;zmen", "link": "https://stackoverflow.com/users/1974787/burak-%c3%96zmen"}, "edited": false, "score": 0, "creation_date": 1455106563, "post_id": 35314599, "comment_id": 58338611, "body": "The odd things is that, both my code and yours generates the correct HTML <code>&lt;a data-remote=&quot;true&quot; href=&quot;&#47;patients&#47;4&#47;load&quot;&gt;&lt;&#47;a&gt;</code>. However, your solution did not work either :/"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 755, "user_id": 1974787, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f8bfd50de2a896e92a3f34f4750ff739?s=128&d=identicon&r=PG", "display_name": "Burak &#214;zmen", "link": "https://stackoverflow.com/users/1974787/burak-%c3%96zmen"}, "edited": false, "score": 0, "creation_date": 1455107584, "post_id": 35314599, "comment_id": 58339389, "body": "Could it be a script error somewhere? <code>link_to</code> with <code>remote: true</code> and <code>remote: false</code> should generate the exact same HTML save for the data-remote attribute. Its the jquery_ujs driver the that alters the behavior of the link."}, {"owner": {"reputation": 755, "user_id": 1974787, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f8bfd50de2a896e92a3f34f4750ff739?s=128&d=identicon&r=PG", "display_name": "Burak &#214;zmen", "link": "https://stackoverflow.com/users/1974787/burak-%c3%96zmen"}, "edited": false, "score": 0, "creation_date": 1455108551, "post_id": 35314599, "comment_id": 58340103, "body": "It seems to me that way too. However I don&#39;t have any idea why it would differ in the same page."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 755, "user_id": 1974787, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f8bfd50de2a896e92a3f34f4750ff739?s=128&d=identicon&r=PG", "display_name": "Burak &#214;zmen", "link": "https://stackoverflow.com/users/1974787/burak-%c3%96zmen"}, "edited": false, "score": 0, "creation_date": 1455108857, "post_id": 35314599, "comment_id": 58340341, "body": "No clues in the browser console?"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1455105438, "creation_date": 1455105438, "answer_id": 35314599, "question_id": 35313937, "link": "https://stackoverflow.com/questions/35313937/different-behaviours-on-same-link-to-helpers-template-is-missing/35314599#35314599", "title": "Different behaviours on same link_to helpers - Template is missing", "body": "<p>The method signature on the second link is wrong. </p>\n\n<blockquote>\n<pre><code>link_to(body, url, html_options = {})\n  # url is a String; you can use URL helpers like\n  # posts_path\n\nlink_to(body, url_options = {}, html_options = {})\n  # url_options, except :method, is passed to url_for\n\nlink_to(options = {}, html_options = {}) do\n  # name\nend\n\nlink_to(url, html_options = {}) do\n  # name\nend\n</code></pre>\n  \n  <p><a href=\"http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to\" rel=\"nofollow\">http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to</a></p>\n</blockquote>\n\n<p>In the first link you are passing a literal string as the url. The second uses an older more verbose, non-resource-oriented syntax.</p>\n\n<p>Leaving off the brackets which delimit the url options and the html options (<code>remote: true</code> is really just a data attribute) gives the wrong link:</p>\n\n<blockquote>\n<pre><code>link_to \"WRONG!\", controller: \"articles\", id: \"news\", class: \"article\"\n# =&gt; &lt;a href=\"/articles/index/news?class=article\"&gt;WRONG!&lt;/a&gt;\n</code></pre>\n</blockquote>\n\n<p>The second example should read something like this:</p>\n\n<pre><code>link_to({ \n  controller: n.specific.subject[:type].pluralize, \n  action: :load, \n  id: n.specific.subject[:id] \n}, { remote: true }) do # ...\n</code></pre>\n\n<p>But you might want let the rails polymorphic routes helper do the job of figuring out the controller for you:</p>\n\n<pre><code>link_to([n.specific, :load], remote: true) do # ...\n</code></pre>\n"}], "owner": {"reputation": 755, "user_id": 1974787, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f8bfd50de2a896e92a3f34f4750ff739?s=128&d=identicon&r=PG", "display_name": "Burak &#214;zmen", "link": "https://stackoverflow.com/users/1974787/burak-%c3%96zmen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1455105438, "creation_date": 1455103670, "question_id": 35313937, "link": "https://stackoverflow.com/questions/35313937/different-behaviours-on-same-link-to-helpers-template-is-missing", "title": "Different behaviours on same link_to helpers - Template is missing", "body": "<p>I have a two link_to helpers in a page, created differently. I need to get my response as .js, not .html. This link_to below just works fine, processing, outputting <strong>Processing by PatientsController#load as JS</strong>, which is the correct behaviour.</p>\n\n<pre><code>&lt;%= link_to image_tag(sender.avatar.url(:thumb), class: \"wht admintabletrtd1image-none click_load\"), patient_load_path(sender.id), :remote =&gt; true, :alt =&gt; \"user\"%&gt;\n</code></pre>\n\n<p>However, another link_to helper (see below) in my page does not. When clicked, it outputs <strong>Processing by PatientsController#load as HTML</strong>, and resulting in missing template error.</p>\n\n<pre><code>&lt;%= link_to :controller =&gt; n.specific.subject[:type].pluralize, :action =&gt; :load, :id =&gt; n.specific.subject[:id], :remote =&gt; true do %&gt; // for the sake of this example, it becomes &lt;%= :controller =&gt; 'patients', :action =&gt; :load, :id =&gt; 4, :remote =&gt; true do %&gt;\n</code></pre>\n\n<p>They both output the same link, <strong>patients/4/load</strong>. What am I missing here?</p>\n"}, {"tags": ["html", "css", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1455103745, "post_id": 35313635, "comment_id": 58336696, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/12252286/how-to-change-the-default-rails-error-div-field-with-errors\" title=\"how to change the default rails error div field with errors\">stackoverflow.com/questions/12252286/&hellip;</a>"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1455103751, "post_id": 35313635, "comment_id": 58336699, "body": "Define simple. You will have to find a way how to distinguish successfully validated fields from fields that haven&#39;t validated yet. And you will probably have to override the the form builder class to handle successfully validated fields differently."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1455103907, "post_id": 35313635, "comment_id": 58336793, "body": "You might be able to do this just with css.  Please add, to your question, an example of the rendered-out html for a form which has a mix of valid and not valid inputs.  If there is a div around the form which rails has added, with an error class or something, make sure you include that."}, {"owner": {"reputation": 4839, "user_id": 265683, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9cfc3a929b053ff4abac9fb0e7a0daa8?s=128&d=identicon&r=PG", "display_name": "RenegadeAndy", "link": "https://stackoverflow.com/users/265683/renegadeandy"}, "edited": false, "score": 0, "creation_date": 1455104494, "post_id": 35313635, "comment_id": 58337202, "body": "Updating question...."}], "answers": [{"comments": [{"owner": {"reputation": 4839, "user_id": 265683, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9cfc3a929b053ff4abac9fb0e7a0daa8?s=128&d=identicon&r=PG", "display_name": "RenegadeAndy", "link": "https://stackoverflow.com/users/265683/renegadeandy"}, "edited": false, "score": 0, "creation_date": 1455104459, "post_id": 35314133, "comment_id": 58337175, "body": "The point here is Max, that rails does not tag correctly validated fields. Of course CSS is the answer from a styling perspective - but that&#39;s not the question. The question is how to make rails add a tag with a class around fields which pass validation."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 4839, "user_id": 265683, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9cfc3a929b053ff4abac9fb0e7a0daa8?s=128&d=identicon&r=PG", "display_name": "RenegadeAndy", "link": "https://stackoverflow.com/users/265683/renegadeandy"}, "edited": false, "score": 0, "creation_date": 1455110166, "post_id": 35314133, "comment_id": 58341258, "body": "No, the question asks how to &quot;apply a style&quot;, and the title just says &quot;Highlight&quot;.   Applying a style to an element doesn&#39;t necessarily require that element to have a specific class, since rules override one another.  If you want the question to be about how to add a class, then change the question to ask how to do that, rather than how to style the element.  They are not the same thing."}], "tags": [], "owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "is_accepted": false, "score": -1, "last_activity_date": 1455104201, "creation_date": 1455104201, "answer_id": 35314133, "question_id": 35313635, "link": "https://stackoverflow.com/questions/35313635/rails-add-div-to-form-fields-which-pass-validation-like-fields-with-errors-di/35314133#35314133", "title": "Rails add div to form fields which pass validation, like &quot;fields_with_errors&quot; div on failure", "body": "<p>I would just do this with css:  make sure that if you render out a form for an object which has had it's validation tested, you add a class to the form, like \"validated\" for example.  Rails might do this already.</p>\n\n<p>Then you can add style rules for fields within a form within this class which have failed validation (ie have the error class which is added by rails) (or just stick with rails' own default rules), and overide these rules for inputs without the error class: these rules will be applied to the inputs which have NOT failed.</p>\n"}], "owner": {"reputation": 4839, "user_id": 265683, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9cfc3a929b053ff4abac9fb0e7a0daa8?s=128&d=identicon&r=PG", "display_name": "RenegadeAndy", "link": "https://stackoverflow.com/users/265683/renegadeandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1455110807, "creation_date": 1455102875, "last_edit_date": 1455110807, "question_id": 35313635, "link": "https://stackoverflow.com/questions/35313635/rails-add-div-to-form-fields-which-pass-validation-like-fields-with-errors-di", "title": "Rails add div to form fields which pass validation, like &quot;fields_with_errors&quot; div on failure", "body": "<p>I would like to apply a style to <strong>successfully validated fields</strong> as well as <strong>failed fields</strong>.</p>\n\n<p>I am using the <strong>fields_with_errors</strong> div which is applied around form elements which fail validation. I would like to extend this behaviour to apply <strong>fields_without_errors</strong> styled div around successfully validated fields. </p>\n\n<p>For example when rails validation fields, the rendered view returns as follows:</p>\n\n<pre><code>&lt;div class=\"field_with_errors\"&gt;&lt;input class=\"input\" size=\"30\" type=\"text\" value=\"\" name=\"seller_profile[business_phone_number]\" id=\"seller_profile_business_phone_number\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>The original erb code was:</p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n        &lt;label for=\"telephone\"&gt;Company telephone&lt;/label&gt;\n        &lt;br /&gt;\n       &lt;%=f.text_field :business_phone_number, :class=&gt;\"input\", size:\"30\" %&gt;\n        &lt;div class=\"errors\"&gt;\n        &lt;%if @profile.errors[:business_phone_number].any? %&gt;\n        Phone number &lt;%= @profile.errors[:business_phone_number].join(\", \")%&gt;\n        &lt;% end %&gt;\n        &lt;/div&gt;\n        &lt;br /&gt;\n      &lt;/div&gt;\n</code></pre>\n\n<p>This works very well. However for fields which have passed validation, they do not get wrapped in a div stating validation has passed.</p>\n\n<p>I would like fields which pass validation to look as follows:</p>\n\n<pre><code> &lt;div class=\"field_without_errors\"&gt;&lt;input class=\"input\" size=\"30\" type=\"text\" value=\"\" name=\"seller_profile[business_description]\" id=\"seller_profile_business_description\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>I.e they are wrapped in a div with a class of \"field_without_errors\".Is there a way for me to add this behaviour in rails?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "parameters", "rake", "capistrano"], "answers": [{"tags": [], "owner": {"reputation": 743, "user_id": 1287743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e89aa7e55d8d5042ddbed201897a2e6f?s=128&d=identicon&r=PG", "display_name": "Chezhian", "link": "https://stackoverflow.com/users/1287743/chezhian"}, "is_accepted": true, "score": 3, "last_activity_date": 1455102215, "creation_date": 1455102215, "answer_id": 35313417, "question_id": 35313279, "link": "https://stackoverflow.com/questions/35313279/rake-capistrano-how-to-pass-dynamic-parameters-to-execute-a-shell-command/35313417#35313417", "title": "Rake Capistrano - how to pass dynamic parameters to execute a shell command", "body": "<p>Write your rake task like below</p>\n\n<pre><code>desc 'Passing argument on rake task'\ntask :symlink_shared, [:arg1] =&gt; :environment do |t, args|\n  execute \"sed -i '/SPARK_HOME=/c\\\\export SPARK_HOME=#{args.arg1}' #{release_path}/backend_layer/configs/hdfs/cluster.sh\"\nend\n</code></pre>\n\n<p>then, run the cap script with argument like below</p>\n\n<pre><code>cap staging postdeploy:symlink_shared[&lt;your_arg1&gt;]\n</code></pre>\n"}], "owner": {"reputation": 6731, "user_id": 5678086, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/iJDcj.jpg?s=128&g=1", "display_name": "Thanga", "link": "https://stackoverflow.com/users/5678086/thanga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 542, "favorite_count": 0, "accepted_answer_id": 35313417, "answer_count": 1, "score": 2, "last_activity_date": 1455811219, "creation_date": 1455101860, "last_edit_date": 1455811219, "question_id": 35313279, "link": "https://stackoverflow.com/questions/35313279/rake-capistrano-how-to-pass-dynamic-parameters-to-execute-a-shell-command", "title": "Rake Capistrano - how to pass dynamic parameters to execute a shell command", "body": "<p>In my Rake capistrano script, I am creating shell commands that needs to have dynamic arguments. My rake code is as below </p>\n\n<pre><code>execute \"sed -i '/SPARK_HOME=/c\\\\export SPARK_HOME=&lt;arg1&gt;' #{release_path}/backend_layer/configs/hdfs/cluster.sh\"\n</code></pre>\n\n<p>How can I call this rake and send the argument &lt;arg1>, so that my command is dynamic</p>\n"}, {"tags": ["ruby", "oop", "inheritance", "visibility"], "answers": [{"comments": [{"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 0, "creation_date": 1455102544, "post_id": 35313008, "comment_id": 58335865, "body": "This solved my question. However, as for the root of my problem, this will need me to put <code>undef_method :foo</code> to all my controllers. Maybe, I could do it like this for now. Thanks!"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1455102903, "post_id": 35313008, "comment_id": 58336107, "body": "<code>ObjectSpace.each_object(Class).select { |klass| klass &lt; ApplicationController }.each { |c| c.send :undef_method, :foo }</code>"}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1455103163, "post_id": 35313008, "comment_id": 58336289, "body": "@mudasobwa, thanks! this will help too :) I just need to make sure to call this line at the end of all the application code."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "edited": false, "score": 0, "creation_date": 1455105009, "post_id": 35313008, "comment_id": 58337544, "body": "@Jay-ArPolidario You don&#39;t need to do that. See my edit."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 7, "last_activity_date": 1455105000, "last_edit_date": 1455105000, "creation_date": 1455101073, "answer_id": 35313008, "question_id": 35312952, "link": "https://stackoverflow.com/questions/35312952/making-an-instance-method-inaccessible-from-a-subclass/35313008#35313008", "title": "Making an instance method inaccessible from a subclass", "body": "<p>Do:</p>\n\n<pre><code>class Ball &lt; Base\n  undef_method :foo\nend\n</code></pre>\n\n<p>If you want to undefine the method for many classes and you don't want to write the code like the above for each of them, then create a class in between.</p>\n\n<pre><code>class Dummy &lt; Base\n  undef_method :foo\nend\n\nclass Base &lt; Dummy\nend\n\nclass Base2 &lt; Dummy\nend\n\n...\n</code></pre>\n"}], "owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 35313008, "answer_count": 1, "score": 3, "last_activity_date": 1455105000, "creation_date": 1455100934, "last_edit_date": 1455101423, "question_id": 35312952, "link": "https://stackoverflow.com/questions/35312952/making-an-instance-method-inaccessible-from-a-subclass", "title": "Making an instance method inaccessible from a subclass", "body": "<p>Given:</p>\n\n<pre><code>class Base\n  def foo\n    puts 'foo!!!'\n  end\nend\n\nclass Ball &lt; Base\nend\n</code></pre>\n\n<p>I want:</p>\n\n<ol>\n<li><code>Ball.new.foo</code> to return an error: <code>No Method Found</code>.</li>\n<li><code>Base.new.foo</code> to return: <code>foo!!!</code>.</li>\n</ol>\n\n<p>My attempts are:</p>\n\n<ul>\n<li>I could do <code>protected def foo</code>, so that 1. works. However this doesn't work for 2.</li>\n<li>I could do it just like as this given above, so that 2. works. However 1. doesn't work.</li>\n</ul>\n\n<p>Any ideas how to make both 1. and 2. work?</p>\n\n<p><strong>Background of the Problem</strong></p>\n\n<p>I have an <code>ApplicationController</code> action <code>def routing_error</code> that handles all remaining undefined routes. The problem with this is all all of the other controllers that inherits <code>ApplicationController</code> also inherits that action, in which I wanted it to be not. I could create a separate controller with just the action <code>def routing_error</code> but I feel it is overkill, and is just wondering first if there is another way to solve this.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "edited": false, "score": 0, "creation_date": 1455102306, "post_id": 35312919, "comment_id": 58335728, "body": "ok, does group_by permanently change the order of the hash entries?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "edited": false, "score": 0, "creation_date": 1455102493, "post_id": 35312919, "comment_id": 58335832, "body": "What is the problem with reading a documentation on <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-group_by\" rel=\"nofollow noreferrer\"><code>group_by</code></a> or trying it yourself? No, it won\u2019t, as all unbanged methods on enumerables in ruby it will mutate the newly created object."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1455100830, "creation_date": 1455100830, "answer_id": 35312919, "question_id": 35312806, "link": "https://stackoverflow.com/questions/35312806/nomethoderror-undefined-method-each-for-8fixnum/35312919#35312919", "title": "NoMethodError (undefined method `each&#39; for 8:Fixnum):", "body": "<p><code>my_hash.key(\"free\")</code> returns a single key, not an array as you probably were expecting.</p>\n\n<p>One might select all keys, having the desired value, by:</p>\n\n<pre><code># fails\u21d2 my_hash.key(\"free\")\nmy_hash.group_by(&amp;:last)[\"free\"].map(&amp;:first)\n</code></pre>\n\n<p>Here we group hash items by the value, then select the group having <code>\"free\"</code> value and, after all, map it back to keys.</p>\n"}, {"comments": [{"owner": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "edited": false, "score": 0, "creation_date": 1455102230, "post_id": 35313122, "comment_id": 58335685, "body": "I would like to store the keys, not the values, in my_array"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "edited": false, "score": 0, "creation_date": 1455102360, "post_id": 35313122, "comment_id": 58335760, "body": "@SCraig ok I&#39;ve changed my code (all i did was change the <code>v</code> to a <code>k</code> in the <code>select</code> code block. Have a look."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "edited": false, "score": 0, "creation_date": 1455102499, "post_id": 35313122, "comment_id": 58335838, "body": "@SCraig just updated the return values too, which shouldn&#39;t affect the previous code edit anyway."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1455102563, "post_id": 35313122, "comment_id": 58335876, "body": "Use <code>inject</code> instead of php-ish <code>declare-and-each</code>. Or, in this example, <code>select</code> is good enough: <code>my_array = my_hash.select{ |k,_| my_hash[k] == &quot;free&quot; }</code>."}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": true, "score": 1, "last_activity_date": 1455102286, "last_edit_date": 1455102286, "creation_date": 1455101386, "answer_id": 35313122, "question_id": 35312806, "link": "https://stackoverflow.com/questions/35312806/nomethoderror-undefined-method-each-for-8fixnum/35313122#35313122", "title": "NoMethodError (undefined method `each&#39; for 8:Fixnum):", "body": "<p>Something like this perhaps?:</p>\n\n<pre><code>my_array = []\nmy_hash = {key1: \"not free\", key2: \"free\", key3: \"free\", key4: \"not free\", key5: \"free\"}\n\nmy_hash.select{|k,v| my_hash[k] == \"free\" ? my_array &lt;&lt; k : false }\n\np my_hash\np my_array\n</code></pre>\n\n<p>returns:</p>\n\n<pre><code>{:key1=&gt;\"not free\", :key2=&gt;\"free\", :key3=&gt;\"free\", :key4=&gt;\"not free\", :key5=&gt;\"free\"}\n[:key2, :key3, :key5]\n</code></pre>\n"}], "owner": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 902, "favorite_count": 0, "accepted_answer_id": 35313122, "answer_count": 2, "score": -1, "last_activity_date": 1455102286, "creation_date": 1455100550, "last_edit_date": 1455100727, "question_id": 35312806, "link": "https://stackoverflow.com/questions/35312806/nomethoderror-undefined-method-each-for-8fixnum", "title": "NoMethodError (undefined method `each&#39; for 8:Fixnum):", "body": "<p>I have this error <code>NoMethodError (undefined method 'each' for 8:Fixnum)</code>: referring to this line of code:</p>\n\n<pre><code>my_hash.key(\"free\").each{|key| my_array.push(key)}\n</code></pre>\n\n<p>What I'm trying to do is \"for every entry in my_hash that has the value \"free\", add it to my_array\". \nIs this happening because my_hash.key(\"free\") only returns a single value? If so, how can I change this to do what I wish it?</p>\n\n<p>here is more of the surrounding code for reference:</p>\n\n<pre><code>    my_hash = Hash.new\n    (8..18).each {|i| my_hash[i] = \"free\"}\n    my_array = Array.new\n\n    ...\n\n    hour_array.each{|hour| my_hash[hour] = \"busy\"} #this is to show that not every key will have value \"free\"\n    ...\n    my_hash.key(\"free\").each{|key| my_array.push(key)}\n</code></pre>\n\n<p>Any explanations would be very appreciated as I am new to Ruby, thanks!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "edited": false, "score": 2, "creation_date": 1455100329, "post_id": 35312693, "comment_id": 58334384, "body": "Those are bitwise operators, not boolean operators."}], "answers": [{"comments": [{"owner": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1455100681, "post_id": 35312805, "comment_id": 58334644, "body": "@J&#246;rgWMittag: arrrggg... :-)"}, {"owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 0, "creation_date": 1455102007, "post_id": 35312805, "comment_id": 58335542, "body": "but why if <code>@myvar</code> is nil (undefined) before <code>@myVar | 2</code> the result is <code>true</code>?"}, {"owner": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "edited": false, "score": 0, "creation_date": 1455102797, "post_id": 35312805, "comment_id": 58336038, "body": "That&#39;s because on <code>nil</code> those operators are defined to return true or false: <a href=\"http://www.rubydoc.info/stdlib/core/NilClass#|-instance_method\" rel=\"nofollow noreferrer\">rubydoc.info/stdlib/core/NilClass#|-instance_method</a>"}, {"owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "edited": false, "score": 0, "creation_date": 1455102889, "post_id": 35312805, "comment_id": 58336097, "body": "So at the end, what the difference between this and <code>@myVar = 2</code>? I don&#39;t get it. Both return 2 (if @myVar it is not null), always."}, {"owner": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "edited": false, "score": 3, "creation_date": 1455103292, "post_id": 35312805, "comment_id": 58336379, "body": "That&#39;s not the case. Take <code>@myVar = 12</code> - in this case after <code>@myVar = @myVar | 2</code> the resulting value is 14, and not 2."}], "tags": [], "owner": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "is_accepted": true, "score": 2, "last_activity_date": 1455100659, "last_edit_date": 1455100659, "creation_date": 1455100550, "answer_id": 35312805, "question_id": 35312693, "link": "https://stackoverflow.com/questions/35312693/what-does-and-mean/35312805#35312805", "title": "What does `|` and `&amp;` mean?", "body": "<pre><code>@myVar = @myVar | 2  //bitwise or operator\n</code></pre>\n\n<p>if myVar is initially 0, this will do <code>0 | 2</code> which equals 2. </p>\n\n<pre><code>if @myVar &amp; 3 == 3 // bitwise AND, and boolean compare\n</code></pre>\n\n<p>will do myVar &amp; 3 and will check if the result equals 3</p>\n\n<pre><code>@myVar = 2\nif @myVar == 3\n</code></pre>\n\n<p>This is totaly different, no operators (oter than =2) is aplied. So the outcome will be always the same. It alway's assigns <code>2</code> to myVar and than check if it equals <code>3</code>. You could as well have written <code>if 2 == 3</code></p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1455116164, "creation_date": 1455116164, "answer_id": 35318486, "question_id": 35312693, "link": "https://stackoverflow.com/questions/35312693/what-does-and-mean/35318486#35318486", "title": "What does `|` and `&amp;` mean?", "body": "<blockquote>\n  <p>I'm new to ruby, and I doesn't understand the syntax of these:</p>\n\n<pre><code>@myVar = @myVar | 2\nif @myVar &amp; 3 == 3\n</code></pre>\n</blockquote>\n\n<p>There are a couple of syntactic elements in the first line:</p>\n\n<ul>\n<li><code>foo = bar</code> is an <em>assignment</em>.</li>\n<li><code>@foo</code> is an <em>instance variable</em>.</li>\n<li><code>foo | bar</code> is a <em>binary infix operator</em>, and like (almost all) binary infix operators (with the exception of <code>||</code>, <code>&amp;&amp;</code>, <code>and</code>, and <code>or</code>), it is syntactic sugar for <code>foo.|(bar)</code>, i.e. sending the message <code>|</code> to the object obtained by evaluating <code>foo</code> passing the object obtained by evaluating <code>bar</code> as the single argument.</li>\n<li><code>2</code> is an <em>integer literal</em>.</li>\n</ul>\n\n<p>The second line is simply syntactically invalid.</p>\n\n<blockquote>\n  <p>why there are different from:</p>\n\n<pre><code>@myVar = 2\nif @myVar == 3\n</code></pre>\n</blockquote>\n\n<p>The first line is again composed of an instance variable, an assignment, and an integer literal, the second line is again syntactically invalid.</p>\n"}], "owner": {"reputation": 44495, "user_id": 365251, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2dd996e4168722dd3618db77880716e6?s=128&d=identicon&r=PG&f=1", "display_name": "markzzz", "link": "https://stackoverflow.com/users/365251/markzzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 35312805, "answer_count": 2, "score": -1, "last_activity_date": 1455131861, "creation_date": 1455100249, "last_edit_date": 1455131861, "question_id": 35312693, "link": "https://stackoverflow.com/questions/35312693/what-does-and-mean", "title": "What does `|` and `&amp;` mean?", "body": "<p>I don't understand the syntax of these:</p>\n\n<pre><code>@myVar = @myVar | 2\nif @myVar &amp; 3 == 3\n</code></pre>\n\n<p>Why are they different from:</p>\n\n<pre><code>@myVar = 2\nif @myVar == 3\n</code></pre>\n"}, {"tags": ["ruby", "debugging", "ide", "remote-debugging"], "comments": [{"owner": {"reputation": 1118, "user_id": 4850235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/484b1b54984fa870e9d4c2341fdf16ed?s=128&d=identicon&r=PG&f=1", "display_name": "Rubysmith", "link": "https://stackoverflow.com/users/4850235/rubysmith"}, "edited": false, "score": 0, "creation_date": 1455104062, "post_id": 35312531, "comment_id": 58336897, "body": "You can use the byebug gem."}], "answers": [{"tags": [], "owner": {"reputation": 914, "user_id": 1612193, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f21ef0b135d7399570b3679ce958fcbd?s=128&d=identicon&r=PG", "display_name": "Dani", "link": "https://stackoverflow.com/users/1612193/dani"}, "is_accepted": true, "score": 0, "last_activity_date": 1455101979, "creation_date": 1455101979, "answer_id": 35313333, "question_id": 35312531, "link": "https://stackoverflow.com/questions/35312531/debug-a-ruby-project-to-become-familiar-with-the-code-flow/35313333#35313333", "title": "Debug a ruby project (to become familiar with the code flow)", "body": "<p><a href=\"https://www.jetbrains.com/ruby/\" rel=\"nofollow\">Rubymine</a> is a very good IDE by JetBrains, so you should be on famillier grounds if you've worked IntelliJ. Among other things, it has a built in debugger with the functionalities you described.</p>\n\n<p>One major caveat though - it's not free, and there's no community edition like there is for IntelliJ.</p>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1455102789, "last_edit_date": 1455102789, "creation_date": 1455102198, "answer_id": 35313411, "question_id": 35312531, "link": "https://stackoverflow.com/questions/35312531/debug-a-ruby-project-to-become-familiar-with-the-code-flow/35313411#35313411", "title": "Debug a ruby project (to become familiar with the code flow)", "body": "<p>I use <a href=\"https://c9.io/\" rel=\"nofollow\">cloud9 IDE</a> for Ruby programming and it does everything and more. You get a full Linux environment which includes a terminal, file-tree structure navigation and a code-editor. Best of all it's free to use but there are upgrade options if you need more muscle.</p>\n\n<p>You can even collaborate on it (which you may have to pay for, I'm not sure).</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2851669"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "closed_date": 1455110905, "accepted_answer_id": 35313333, "answer_count": 2, "score": 0, "last_activity_date": 1455102789, "creation_date": 1455099839, "last_edit_date": 1455100354, "question_id": 35312531, "link": "https://stackoverflow.com/questions/35312531/debug-a-ruby-project-to-become-familiar-with-the-code-flow", "closed_reason": "Not suitable for this site", "title": "Debug a ruby project (to become familiar with the code flow)", "body": "<p>Can someone suggest a IDE for Ruby which will make it easier to understand the code flow of the project. I am looking for something similar to intellij remote debugger for JAVA. The debugger should transfer the complete control of the code, so that stepping into and stepping out of the code becomes easier.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1455099560, "post_id": 35312374, "comment_id": 58333881, "body": "It is inefficient to parse <code>&#39;2016-02-08 16:23:53&#39;</code> each time in the loop. And to be strict, this does not tell if it is less; it tells if it is not greater. You should naturally use <code>all?</code>. I don&#39;t see a reason you negated it."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1455099606, "post_id": 35312374, "comment_id": 58333909, "body": "@sawa I know, but the penalty is insignificant."}, {"owner": {"reputation": 1239, "user_id": 2134398, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c858429a7d7289246899d678137e7ea0?s=128&d=identicon&r=PG", "display_name": "Arif", "link": "https://stackoverflow.com/users/2134398/arif"}, "edited": false, "score": 0, "creation_date": 1455099995, "post_id": 35312374, "comment_id": 58334168, "body": "What about the last answer: value &lt; array.min"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1455101932, "post_id": 35312374, "comment_id": 58335487, "body": "You can adapt the other answer&#39;s solution: <code>arr.none? { |ts| ts &gt;= &#39;2016-02-08 16:23:53&#39; }</code> (or <code>all?</code> and <code>&lt;</code>)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1455102130, "post_id": 35312374, "comment_id": 58335628, "body": "@Stefan I could, but I won\u2019t. I am still convinced that in real life dates should be compared as dates. The string-only solution is brave and smart, it\u2019s fine for ruby golfs, olympic games etc. But in real world tomorrow I\u2019ll get dates without leading zeroes."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1455102753, "post_id": 35312374, "comment_id": 58336014, "body": "Fair enough. One minor nitpick: according to the Ruby documentation, you should use <code>DateTime</code> when dealing with historical dates (and calendars) and <code>Time</code> when dealing with current dates."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 6, "last_activity_date": 1455102993, "last_edit_date": 1455102993, "creation_date": 1455099438, "answer_id": 35312374, "question_id": 35312307, "link": "https://stackoverflow.com/questions/35312307/check-if-a-value-is-less-than-any-value-of-an-array/35312374#35312374", "title": "Check if a value is less than any value of an array", "body": "<p>If timestamps are strings:</p>\n\n<pre><code>['2016-02-09 14:23:53', '2015-02-08 16:23:53', '2016-02-08 16:22:53'].none? do |ts| \n  Time.parse(ts) &gt; Time.parse('2016-02-08 16:23:53')\nend\n</code></pre>\n\n<p>If timestamps are already instances of <code>Time</code>, there is no need for <code>parse</code>:</p>\n\n<pre><code>timestamps_array.none? do |ts|\n  ts &gt; Time.parse('2016-02-08 16:23:53')\nend\n</code></pre>\n\n<p>Well, for the sake of @sawa\u2019s patience :)</p>\n\n<p>It is inefficient to parse the value to compare against each time in the loop:</p>\n\n<pre><code>timestamp_to_check = Time.parse('2016-02-08 16:23:53')\n['2016-02-09 14:23:53', '2015-02-08 16:23:53', '2016-02-08 16:22:53'].none? do |ts| \n  Time.parse(ts) &gt; timestamp_to_check\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1455100181, "post_id": 35312473, "comment_id": 58334288, "body": "For not-so-smart-people who do not understand the value of this answer, the hints are: y-m-d-h-m-s order, zero-padding, fixed length, and the ordering of 0-9 in ASCII."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1455100468, "post_id": 35312473, "comment_id": 58334508, "body": "@sawa This will fail in C century (10000 year :))"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1455100535, "post_id": 35312473, "comment_id": 58334542, "body": "@mudasobwa Hahaha, I would be too deadly to be blamed by then."}, {"owner": {"reputation": 1757, "user_id": 5766404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Scz0L.png?s=128&g=1", "display_name": "bogl", "link": "https://stackoverflow.com/users/5766404/bogl"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1455100595, "post_id": 35312473, "comment_id": 58334583, "body": "@sawa Thanks for the constructive hints!"}], "tags": [], "owner": {"reputation": 1757, "user_id": 5766404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Scz0L.png?s=128&g=1", "display_name": "bogl", "link": "https://stackoverflow.com/users/5766404/bogl"}, "is_accepted": true, "score": 5, "last_activity_date": 1455884918, "last_edit_date": 1455884918, "creation_date": 1455099709, "answer_id": 35312473, "question_id": 35312307, "link": "https://stackoverflow.com/questions/35312307/check-if-a-value-is-less-than-any-value-of-an-array/35312473#35312473", "title": "Check if a value is less than any value of an array", "body": "<p>Checking if a value is less than any value in an array may be accomplished in Ruby with </p>\n\n<pre><code>value &lt; array_of_values.min\n</code></pre>\n\n<p>The <strong>simplest</strong> way to solve the example given by the OP is</p>\n\n<pre><code>'2016-02-08 16:23:53' &lt; ['2016-02-09 14:23:53', \n                         '2015-02-08 16:23:53', \n                         '2016-02-08 16:22:53'].min\n</code></pre>\n\n<p>Comparing string representations of dates and times will only work if all strings involved use the same format, the numbers are ordered from big to small (years down to seconds), and the numbers use leading zeros.</p>\n\n<p>The use of adequate data types (like <em>Time</em> or <em>DateTime</em>) instead of strings for storing and processing dates and times will improve the robustness of the software.</p>\n"}], "owner": {"reputation": 1239, "user_id": 2134398, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c858429a7d7289246899d678137e7ea0?s=128&d=identicon&r=PG", "display_name": "Arif", "link": "https://stackoverflow.com/users/2134398/arif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 1, "accepted_answer_id": 35312473, "answer_count": 2, "score": 2, "last_activity_date": 1455884918, "creation_date": 1455099253, "last_edit_date": 1455100080, "question_id": 35312307, "link": "https://stackoverflow.com/questions/35312307/check-if-a-value-is-less-than-any-value-of-an-array", "title": "Check if a value is less than any value of an array", "body": "<p>I have a time-stamp <code>'2016-02-08 16:23:53'</code> and an array containing different time-stamps <code>['2016-02-09 14:23:53', '2015-02-08 16:23:53', '2016-02-08 16:22:53']</code>.</p>\n\n<p>What is the simplest way to check if the value is less than any of the value in array and return <code>true</code> or <code>false</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "module"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1455101053, "post_id": 35312251, "comment_id": 58334880, "body": "You are asking whether the expression <code>eval(foo)</code> is defined. And it is: it&#39;s a method call to the method <code>eval</code>."}], "answers": [{"comments": [{"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 1, "creation_date": 1455100178, "post_id": 35312534, "comment_id": 58334287, "body": "<code>api_versions = API.constants.select{|c| c.to_s.match(&#47;^V\\d+$&#47;)}</code>"}], "tags": [], "owner": {"reputation": 35107, "user_id": 1120015, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ID1fe.png?s=128&g=1", "display_name": "Uri Agassi", "link": "https://stackoverflow.com/users/1120015/uri-agassi"}, "is_accepted": true, "score": 2, "last_activity_date": 1455099843, "creation_date": 1455099843, "answer_id": 35312534, "question_id": 35312251, "link": "https://stackoverflow.com/questions/35312251/ruby-iterate-over-modules/35312534#35312534", "title": "Ruby - iterate over modules", "body": "<p>You can use <code>constants</code>:</p>\n\n<pre><code>module API\n  module V1\n    class Navigation\n    end\n  end\n\n  module V2\n    class Navigation\n    end\n  end\nend\n\nAPI.constants\n# =&gt; [:V1, :V2]\nAPI.constants.include?(:V1)\n# =&gt; true\nAPI.constants.include?(:V24)\n# =&gt; false\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "is_accepted": false, "score": 2, "last_activity_date": 1455101526, "creation_date": 1455101526, "answer_id": 35313165, "question_id": 35312251, "link": "https://stackoverflow.com/questions/35312251/ruby-iterate-over-modules/35313165#35313165", "title": "Ruby - iterate over modules", "body": "<p>This code can helps. If you use <code>const_defined?</code> method.</p>\n\n<pre><code>module API\nend\n\nmodule API::V1\n  class Navigator\n  end\nend\n\nmodule API::V2\n  class Navigator\n  end\nend\n\n\nAPI.const_defined?(:V1)\n# =&gt; true\nAPI.const_defined?(:V5)\n# =&gt; false\n</code></pre>\n"}], "owner": {"reputation": 853, "user_id": 3083321, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b89a0aec6a8d868f2d37ae7e2d911e24?s=128&d=identicon&r=PG&f=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/3083321/mat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 0, "accepted_answer_id": 35312534, "answer_count": 2, "score": 1, "last_activity_date": 1455101526, "creation_date": 1455099123, "question_id": 35312251, "link": "https://stackoverflow.com/questions/35312251/ruby-iterate-over-modules", "title": "Ruby - iterate over modules", "body": "<p>I have a versioned API in Ruby-on-Rails. The different controllers and services are scoped like this:</p>\n\n<pre><code>class Api::V1::Navigation &lt; Api::Navigation\n</code></pre>\n\n<p>But I have some parts of my code that need to call every version of some services. How can I iterate over them all?</p>\n\n<p>I tried with this:</p>\n\n<pre><code>defined? eval('Api::V1')::Navigation\n</code></pre>\n\n<p>Problem is that even with an unexisting version, it still works:</p>\n\n<pre><code>defined? eval('Api::V24')::Navigation\n=&gt; \"method\"\n</code></pre>\n\n<p>How can I know if a version does exist?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "thinking-sphinx"], "owner": {"reputation": 1365, "user_id": 1570893, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/PKUfW.jpg?s=128&g=1", "display_name": "Abhiram", "link": "https://stackoverflow.com/users/1570893/abhiram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 174, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1455116243, "creation_date": 1455098906, "last_edit_date": 1455116243, "question_id": 35312167, "link": "https://stackoverflow.com/questions/35312167/in-thinking-sphinx-min-infix-len-not-working-in-production", "title": "In thinking sphinx min_infix_len not working in production", "body": "<p>I have used min_infix_len => 2 in my model.rb file to improve searching of items by splitting up the words in sphinx. Everything is working fine in development. </p>\n\n<p>But in my production the words are not getting split up and searched.</p>\n\n<p>For example,</p>\n\n<p>If I have string like this \"1234567890\". I am getting the string in search result if I give the entire string as \"1234567890\". But if i give as \"123\" the search term is not getting searched and shown. To overcome this problem I have use min_infix_len => 2 in model.rb like below.</p>\n\n<pre><code> define_index do\n  indexes id\n  indexes title\n  indexes ticket_status\n  indexes state\n  set_property :min_infix_len =&gt; 3\n end\n</code></pre>\n\n<p>And generated the index, this get updated in my development.sphinx.conf as below:</p>\n\n<pre><code>index ticket_core\n{\n  path = /home/abhiram/projects/railsfactory/connect/db/sphinx/development/ticket_c   \n index ticket_core\n   charset_type = utf-8\n   min_infix_len = 3\n   source = ticket_core_0\n }\n</code></pre>\n\n<p>After this if restart sphinx and search I got the expected result and that string is getting searched as I expected.</p>\n\n<p>But in production I have the same setup, index also getting updated in my production.sphinx.conf</p>\n\n<pre><code> index ticket_core\n   charset_type = utf-8\n   min_infix_len = 3\n   source = ticket_core_0\n }\n</code></pre>\n\n<p>After restarting sphinx, normal search is working fine but the substring search which I expected like above is not working like it worked in development. The string is not getting searched without giving the complete string in the field.</p>\n\n<p>This is my sphinx.yml</p>\n\n<pre><code>development:\n  bin_path: '/usr/bin'\nproduction:\n  bin_path: '/usr/bin'\n</code></pre>\n\n<p>I don't no how to debug this in sphinx. Can any body guide me in this. I want to know how to make min_infix_len = 3 to work in production.</p>\n\n<p>I am using old version of rails, since the app is old:</p>\n\n<p>rails 2.1\nruby 1.8.7\nthinking-sphinx 1.4.14</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 1567, "user_id": 1751977, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W3ldI.jpg?s=128&g=1", "display_name": "Ashbury", "link": "https://stackoverflow.com/users/1751977/ashbury"}, "edited": false, "score": 0, "creation_date": 1455099061, "post_id": 35312046, "comment_id": 58333545, "body": "This is the fastest method I&#39;ve been able to come up with:    s_ids = Episode.joins(:contributions)   .where(&quot;contributions.role_name = &#39;guest&#39;&quot;)   .where(&quot;contributions.contributable_type = &#39;Episode&#39;&quot;)   .where(&#39;contributions.person_id IN (?)&#39;, self.id)   .distinct   .pluck(&#39;episodes.show_id&#39;)    shows = Show.where(id: s_ids)   .order(&#39;score DESC NULLS LAST&#39;)"}, {"owner": {"reputation": 10274, "user_id": 930207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oy7Q3.png?s=128&g=1", "display_name": "mcfinnigan", "link": "https://stackoverflow.com/users/930207/mcfinnigan"}, "reply_to_user": {"reputation": 1567, "user_id": 1751977, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W3ldI.jpg?s=128&g=1", "display_name": "Ashbury", "link": "https://stackoverflow.com/users/1751977/ashbury"}, "edited": false, "score": 0, "creation_date": 1455099470, "post_id": 35312046, "comment_id": 58333811, "body": "Are your tables indexed?  If so, are the correct columns indexed?  Have you captured the SQL generated by your AR queries above and actually run it in a MYSQL console with an EXPLAIN to see the output?"}, {"owner": {"reputation": 1567, "user_id": 1751977, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W3ldI.jpg?s=128&g=1", "display_name": "Ashbury", "link": "https://stackoverflow.com/users/1751977/ashbury"}, "edited": false, "score": 0, "creation_date": 1455099889, "post_id": 35312046, "comment_id": 58334095, "body": "First query: SELECT DISTINCT episodes.show_id FROM &quot;episodes&quot; INNER JOIN &quot;contributions&quot; ON &quot;contributions&quot;.&quot;contributable_id&quot; = &quot;episodes&quot;.&quot;id&quot; AND &quot;contributions&quot;.&quot;contributable_type&quot; = $1 WHERE (contributions.role_name = &#39;guest&#39;) AND (contributions.contributable_type = &#39;Episode&#39;) AND (contributions.person_id IN (159))  [[&quot;contributable_type&quot;, &quot;Episode&quot;]]"}, {"owner": {"reputation": 1567, "user_id": 1751977, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W3ldI.jpg?s=128&g=1", "display_name": "Ashbury", "link": "https://stackoverflow.com/users/1751977/ashbury"}, "edited": false, "score": 0, "creation_date": 1455099974, "post_id": 35312046, "comment_id": 58334159, "body": "Second query: SELECT &quot;shows&quot;.* FROM &quot;shows&quot; WHERE &quot;shows&quot;.&quot;id&quot; IN (0..10000) AND (pic_file_name IS NOT NULL)  ORDER BY score DESC NULLS LAST"}, {"owner": {"reputation": 1567, "user_id": 1751977, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W3ldI.jpg?s=128&g=1", "display_name": "Ashbury", "link": "https://stackoverflow.com/users/1751977/ashbury"}, "edited": false, "score": 0, "creation_date": 1455100092, "post_id": 35312046, "comment_id": 58334238, "body": "contribution has index on &#39;contributable_type&#39; (show or episode) and &#39;contributable_id&#39; and &#39;person_id&#39;, episodes have index on show_id"}], "tags": [], "owner": {"reputation": 10274, "user_id": 930207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oy7Q3.png?s=128&g=1", "display_name": "mcfinnigan", "link": "https://stackoverflow.com/users/930207/mcfinnigan"}, "is_accepted": true, "score": 2, "last_activity_date": 1455098593, "creation_date": 1455098593, "answer_id": 35312046, "question_id": 35311678, "link": "https://stackoverflow.com/questions/35311678/second-foreign-key-to-speed-up-query/35312046#35312046", "title": "Second foreign_key to speed up query", "body": "<blockquote>\n  <p>Since this query takes a long time</p>\n</blockquote>\n\n<p>Have you run a SQL explain plan to show why this is the case?  What is the actual SQL query that is being run, and are you doing things like ordering or running subqueries within it?</p>\n\n<p>If I understand your structure it is something like this:</p>\n\n<pre><code>|people| n---1 |contribution| 1---n |episodes| n---1 |shows|\n</code></pre>\n\n<p>A sql select of the sort:</p>\n\n<pre><code>select distinct s.name \nfrom   shows s,\n       episodes e,\n       contribution c\nwhere  c.people_id = &lt;id&gt;\nand    c.episode_id = e.id\nand    e.show_id = s.id\n</code></pre>\n\n<p>should really not have performance issues unless there are no indexes on the tables or the tables are massive.</p>\n"}, {"tags": [], "owner": {"reputation": 29910, "user_id": 3574819, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b4f770584940ff6fc451e68565de5ed0?s=128&d=identicon&r=PG&f=1", "display_name": "FuzzyTree", "link": "https://stackoverflow.com/users/3574819/fuzzytree"}, "is_accepted": false, "score": 0, "last_activity_date": 1455100128, "last_edit_date": 1455100128, "creation_date": 1455099825, "answer_id": 35312524, "question_id": 35311678, "link": "https://stackoverflow.com/questions/35311678/second-foreign-key-to-speed-up-query/35312524#35312524", "title": "Second foreign_key to speed up query", "body": "<p>Here's a way using <code>where id in ( ... )</code> to select all shows a specific person appeared in</p>\n\n<pre><code>Shows.where(id: Contribution.select(\"show_id\")\n    .join(:episodes)\n    .where(person_id: personId)\n    .group(\"episodes.show_id\"))\n</code></pre>\n\n<p>You may also want to try <code>exists</code></p>\n\n<pre><code>Shows.where(\"EXISTS(SELECT 1 from contributions c \n  join episodes e on e.id = c.episode_id\n  where c.person_id = ? and e.show_id = shows.id)\")\n</code></pre>\n"}], "owner": {"reputation": 1567, "user_id": 1751977, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W3ldI.jpg?s=128&g=1", "display_name": "Ashbury", "link": "https://stackoverflow.com/users/1751977/ashbury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 35312046, "answer_count": 2, "score": 1, "last_activity_date": 1455100128, "creation_date": 1455097684, "question_id": 35311678, "link": "https://stackoverflow.com/questions/35311678/second-foreign-key-to-speed-up-query", "title": "Second foreign_key to speed up query", "body": "<p>Say you creating an imdb type site for TV Shows.  You have a <code>Show</code> with many attached <code>episodes</code> and a bunch of <code>people</code></p>\n\n<p>Right now I link <code>people</code> to <code>episodes</code> though a <code>contribution</code> table - but if I want to make a list of all the <strong>shows</strong> they are on, I have to go through episodes.  </p>\n\n<p>Since this query takes a long time I was thinking about adding <code>show_id</code> to the <code>contributions</code> table.  Is this common practice to increase performance or is there another way I haven't thought of? </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 89, "user_id": 3459701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b09b2e2e5341a1a192cc4bb79a27f307?s=128&d=identicon&r=PG&f=1", "display_name": "Iziksh", "link": "https://stackoverflow.com/users/3459701/iziksh"}, "edited": false, "score": 0, "creation_date": 1455098275, "post_id": 35311668, "comment_id": 58333012, "body": "RailsCast calendar code : Railscasts PRO #213 Calendars (revised).  I trying  to translate the HEADER :"}, {"owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "edited": false, "score": 0, "creation_date": 1455099141, "post_id": 35311668, "comment_id": 58333592, "body": "the locale is only valid during a request-response, and not while you set up a model. Think of it: the locale depends on the user requesting your website. When you define the model, there is no user yet."}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 2642530, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/khDAf.png?s=128&g=1", "display_name": "chrispa", "link": "https://stackoverflow.com/users/2642530/chrispa"}, "is_accepted": false, "score": 0, "last_activity_date": 1457385863, "creation_date": 1457385863, "answer_id": 35854332, "question_id": 35311668, "link": "https://stackoverflow.com/questions/35311668/translate-the-header-of-railscast-calendar/35854332#35854332", "title": "Translate the HEADER of RailsCast calendar", "body": "<p>Here's how I translated the headers.  First, comment out the HEADER declaration...</p>\n\n<pre><code>  class Calendar &lt; Struct.new(:view, :date, :callback)\n    #comment out or remove the line below\n    #HEADER = %w[Sunday Monday Tuesday Wednesday Thursday Friday Saturday]\n    START_DAY = :sunday\n</code></pre>\n\n<p>Then where the header is defined, replace the HEADER.map with I18n.t(:\"date.day_names\").map  This pulls the day names directly from the config/locales/ *.yml files.</p>\n\n<pre><code>    def header\n      content_tag :tr do\n        I18n.t(:\"date.day_names\").map { |day| content_tag :th, day }.join.html_safe\n      end\n    end\n</code></pre>\n\n<p>Now just declare the locale from the params in your controller and you should be all set.</p>\n"}], "owner": {"reputation": 89, "user_id": 3459701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b09b2e2e5341a1a192cc4bb79a27f307?s=128&d=identicon&r=PG&f=1", "display_name": "Iziksh", "link": "https://stackoverflow.com/users/3459701/iziksh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1457385863, "creation_date": 1455097652, "last_edit_date": 1455099725, "question_id": 35311668, "link": "https://stackoverflow.com/questions/35311668/translate-the-header-of-railscast-calendar", "title": "Translate the HEADER of RailsCast calendar", "body": "<pre><code>HEADER = %w[Sunday Monday Tuesday Wednesday Thursday Friday Saturday].map{ |key| I18n.t(key, scope: \"table\") }\n</code></pre>\n\n<p>but the <code>I18n.locale</code> is <code>null</code> so it gives me the default translation.</p>\n\n<p>Even if I set  <code>I18n.locale = \"ru\"</code> in the <code>module CalendarHelper</code>  like that:</p>\n\n<pre><code>module CalendarHelper\n  def calendar(date = Date.today, &amp;block)\n    Calendar.new(self, date, block).table\n  end\n  I18n.locale = \"ru\"\n  class Calendar &lt; Struct.new(:view, :date, :callback)\nHEADER = %w[Sunday Monday Tuesday Wednesday Thursday Friday Saturday].map{     |key| I18n.t(key, scope: \"table\") }\nSTART_DAY = :sunday\n.......\n</code></pre>\n\n<p>the <code>I18n.locale</code> is <code>null</code> and I get the default translation.</p>\n\n<p>But if I set <code>I18n.locale = \"ru\"</code> within the class it works fine.</p>\n\n<pre><code> class Calendar &lt; Struct.new(:view, :date, :callback)\nI18n.locale = \"ru\"\nHEADER = %w[Sunday Monday Tuesday Wednesday Thursday Friday Saturday].map{ |key| I18n.t(key, scope: \"table\") }\nSTART_DAY = :sunday\n.......\n.........\n</code></pre>\n\n<p>how can I pass the  <code>params[:local]</code> from the view to <code>class Calendar</code> or is there another solution to translate the <code>HEADER</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1455096936, "post_id": 35311227, "comment_id": 58332110, "body": "You can&#39;t query with the methods."}, {"owner": {"reputation": 836, "user_id": 1365764, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/oG9k1.jpg?s=128&g=1", "display_name": "Dan Mitchell", "link": "https://stackoverflow.com/users/1365764/dan-mitchell"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1455097648, "post_id": 35311227, "comment_id": 58332605, "body": "Ah great, I didn&#39;t know that."}], "answers": [{"comments": [{"owner": {"reputation": 836, "user_id": 1365764, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/oG9k1.jpg?s=128&g=1", "display_name": "Dan Mitchell", "link": "https://stackoverflow.com/users/1365764/dan-mitchell"}, "edited": false, "score": 1, "creation_date": 1455097625, "post_id": 35311383, "comment_id": 58332584, "body": "Great! I didn&#39;t know that. I&#39;m getting a syntax error <code>syntax error, unexpected &#39;,&#39;, expecting =&gt; ...chronologicals: {&#39;end_at &gt;= ?&#39;, Date.today }) }</code>"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 2, "last_activity_date": 1455097706, "last_edit_date": 1455097706, "creation_date": 1455096941, "answer_id": 35311383, "question_id": 35311227, "link": "https://stackoverflow.com/questions/35311227/model-scope-from-association-method/35311383#35311383", "title": "Model scope from association method", "body": "<p>It is impossible to query by methods. You can do something like this:</p>\n\n<pre><code>scope :future_events, lambda {\n  joins(activities: :chronological)\n    .where('chronologicals.end_at &gt;= ?', Date.today)\n}\n</code></pre>\n\n<p>Description:</p>\n\n<ul>\n<li>in <code>joins</code> you put names of associations;</li>\n<li>in <code>where</code> you put the real names of tables how they are named in database (they sometimes happen to be different from model's associations names).</li>\n</ul>\n\n<p>This scope is basically saying that you want to return future events, where its activities's chronological's <code>end_at</code> attribute is <code>&gt;= Date.today</code>.</p>\n"}], "owner": {"reputation": 836, "user_id": 1365764, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/oG9k1.jpg?s=128&g=1", "display_name": "Dan Mitchell", "link": "https://stackoverflow.com/users/1365764/dan-mitchell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 35311383, "answer_count": 1, "score": 0, "last_activity_date": 1455138856, "creation_date": 1455096536, "last_edit_date": 1455138856, "question_id": 35311227, "link": "https://stackoverflow.com/questions/35311227/model-scope-from-association-method", "title": "Model scope from association method", "body": "<p>I'm trying to create a scope for future events only, the date of an event is based on the activities date and I have a method in my events model called <code>end_at</code> but when trying to create a scope for my controller I am getting </p>\n\n<pre><code>PG::UndefinedColumn: ERROR:  column \"end_at\" does not exist\n</code></pre>\n\n<h3>Event model</h3>\n\n<pre><code>has_many :activities, dependent: :destroy\n\nscope :future_events, -&gt; { where('end_at &gt;= ?', Date.today) }\n\ndef end_at\n  activities.chronological.last.end_at\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "twilio"], "comments": [{"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1455113876, "post_id": 35310923, "comment_id": 58343933, "body": "Hey @RPV, what is your main application built in? Is it a Rails application?"}, {"owner": {"reputation": 367, "user_id": 5527610, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bdba139fe3768174ee6246f91a231c60?s=128&d=identicon&r=PG&f=1", "display_name": "RPV", "link": "https://stackoverflow.com/users/5527610/rpv"}, "reply_to_user": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1455116683, "post_id": 35310923, "comment_id": 58346036, "body": "Yes, it is a rails application"}], "answers": [{"tags": [], "owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "is_accepted": true, "score": 1, "last_activity_date": 1455126208, "creation_date": 1455126208, "answer_id": 35322275, "question_id": 35310923, "link": "https://stackoverflow.com/questions/35310923/integrate-twilio-ruby-class-into-my-main-app/35322275#35322275", "title": "Integrate Twilio ruby class into my main app", "body": "<p>Twilio developer evangelist here.</p>\n\n<p>If you're adding this then there's a couple of things you can do.</p>\n\n<p>With the code to start the call you could just move that into the controller action that lies behind the \"verify my number\" link you talk about. Take a look at this tutorial on <a href=\"https://www.twilio.com/docs/tutorials/walkthrough/click-to-call/ruby/rails\" rel=\"nofollow\">building a \"Click to call\" application in Rails with Twilio</a> that shares a few steps with phone verification. It covers making calls and responding to them with TwiML.</p>\n\n<p>You might also want to check out this blog post by my colleague Carter on how to work with <a href=\"https://www.twilio.com/blog/2014/02/twilio-on-rails-integrating-twilio-with-your-rails-4-app.html\" rel=\"nofollow\">Twilio on Rails</a>.</p>\n\n<p>Let me know if this helps!</p>\n"}], "owner": {"reputation": 367, "user_id": 5527610, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bdba139fe3768174ee6246f91a231c60?s=128&d=identicon&r=PG&f=1", "display_name": "RPV", "link": "https://stackoverflow.com/users/5527610/rpv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 1, "accepted_answer_id": 35322275, "answer_count": 1, "score": 2, "last_activity_date": 1455126208, "creation_date": 1455095617, "last_edit_date": 1455104328, "question_id": 35310923, "link": "https://stackoverflow.com/questions/35310923/integrate-twilio-ruby-class-into-my-main-app", "title": "Integrate Twilio ruby class into my main app", "body": "<p>I have completed writing (and testing) a voice verification service using Twilio independently but am unsure of how to integrate it into my main app. As of now I have 2 files:</p>\n\n<blockquote>\n  <p>make_call.rb</p>\n</blockquote>\n\n<p>and </p>\n\n<blockquote>\n  <p>twiml_messages.rb</p>\n</blockquote>\n\n<p>Basically, in my main app, I will click a link (\"verify my number\") and then cause the <code>make_call.rb</code> file to be called, which contains the following code:</p>\n\n<pre><code>require 'rubygems'\nrequire 'twilio-ruby'\n\n# put your own credentials here - from twilio.com/user/account\naccount_sid = 'xxyy'\nauth_token = 'xxyy'\n\n# set up a client to talk to the Twilio REST API\n@client = Twilio::REST::Client.new account_sid, auth_token\n\n@call = @client.account.calls.create(\n  :from =&gt; '+1123',   # From your Twilio number\n  :to =&gt; '+1123',     # To any number\n  # Fetch instructions from this URL when the call connects\n  :url =&gt; 'ngrok/verify-phone-call'\n)\n</code></pre>\n\n<p>(Have intentionally replaced the key data areas with insignificant values.) </p>\n\n<p>Essentially, should I create a class and put this into a Ruby function and then call the function as part of the object when the url is clicked?</p>\n\n<p>If yes, then what about the next steps..</p>\n\n<pre><code>post '/verify-phone-call/:id' do\n  content_type \"text/xml\"\n  Twilio::TwiML::Response.new do |r|\n    r.Say 'Hi, you requested to verify your phone number'\n    r.Gather :numDigits =&gt; '1', :action =&gt; '/verify-phone-call/handle-gather/:id', :method =&gt; 'post' do |g|\n      g.Say 'To verify your number, press 1.'\n      g.Say 'Press any other key to start over.'\n    end\n  end.text\nend\n</code></pre>\n\n<p>This is in <code>twiml_messages.rb</code>, and is called from my <code>make_call.rb</code>, via an ngrok connection that exposes the webserver. Should I place this 'post' into a function too?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 3, "last_activity_date": 1455096226, "last_edit_date": 1455096226, "creation_date": 1455095769, "answer_id": 35310986, "question_id": 35310917, "link": "https://stackoverflow.com/questions/35310917/mandatory-hash-argument-in-ruby-on-rails/35310986#35310986", "title": "Mandatory hash argument in Ruby on Rails", "body": "<p>I assume you don't create any <code>Task</code> in this action, but you should find your task and assign new <code>Comment</code> to it. So instead of <code>new</code>, you should use <code>find</code>:</p>\n\n<pre><code>@task = Task.find(params[:task_id])\n</code></pre>\n"}], "owner": {"reputation": 1168, "user_id": 1893768, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dce74d5edb9d2f2598ce0925877209ca?s=128&d=identicon&r=PG", "display_name": "Ewan Delanoy", "link": "https://stackoverflow.com/users/1893768/ewan-delanoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 35310986, "answer_count": 1, "score": 0, "last_activity_date": 1455096226, "creation_date": 1455095596, "question_id": 35310917, "link": "https://stackoverflow.com/questions/35310917/mandatory-hash-argument-in-ruby-on-rails", "title": "Mandatory hash argument in Ruby on Rails", "body": "<p>I am following a step-by-step Ruby-on-Rails tutorial and using Ruby 2.0.0. At some\npoint, the same file input works in the tutorial video but\nproduces an error message in my app.</p>\n\n<p>Here is the code (for a comment controller) :</p>\n\n<pre><code>class CommentsController &lt; ApplicationController\n\n\n  def create\n    @task = Task.new(params[:task_id])\n    @comment = @task.comments.build(comment_params)\n\n     if @task.save\n         redirect_to @task, notice: 'Comment successfully posted.' \n     else\n        redirect_to @task, alert: 'Comment not  posted.' \n     end\n\n  end\n\n  private\n\n  def comment_params\n    params.require(:comment).permit(:name, :email, :body)\n    # {comment : {name:,email:,body:}}\n  end\n\nend\n</code></pre>\n\n<p>The error message I get when trying to create a comment is</p>\n\n<pre><code>ArgumentError in CommentsController#create \n\nWhen assigning attributes, you must pass a hash as an argument.\n</code></pre>\n\n<p>The line causing the error is <code>@task = Task.new(params[:task_id])</code></p>\n\n<p>How should I fix this ? Any help appreciated.</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "ajax"], "answers": [{"comments": [{"owner": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "edited": false, "score": 0, "creation_date": 1455098592, "post_id": 35311869, "comment_id": 58333234, "body": "ok, so if I did $(&quot;#unavailable-list&quot;).append(&#39;&lt;%= escape_javascript( render @busy_array ) %&gt;&#39;); , it would make each entry an &lt;li&gt; element?"}, {"owner": {"reputation": 647, "user_id": 660942, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/eEMKd.jpg?s=128&g=1", "display_name": "Adri&#224; Carro", "link": "https://stackoverflow.com/users/660942/adri%c3%a0-carro"}, "reply_to_user": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "edited": false, "score": 0, "creation_date": 1455098854, "post_id": 35311869, "comment_id": 58333409, "body": "If @busy_array isn&#39;t an ActiveRecordRelation you have to specify the partial you want to render like <code>render :partial =&gt; &quot;events&#47;event&quot;, :collection =&gt; @busy_array</code>. Then, in your _event.html.erb you can add your &lt;li&gt; element."}, {"owner": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "edited": false, "score": 0, "creation_date": 1455099536, "post_id": 35311869, "comment_id": 58333862, "body": "Do you mind showing me within your answer? Sorry, I do not fully understand what you mean. How do I know if it&#39;s an Active Record Relation? I created it within my controller"}, {"owner": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "edited": false, "score": 0, "creation_date": 1455103337, "post_id": 35311869, "comment_id": 58336404, "body": "ok thanks, my busy_array holds the users in the database, so if I had (instead of _event.html.erb) a _busy.html.erb, I could render :partial =&gt; &quot;events/busy&quot;, :collection =&gt; @busy_array , and in _busy.html.erb I could write &lt;% (&amp;)busy_array.each do |id| %&gt; &lt;li&gt;&lt;%= user.id %&gt;&lt;li&gt; &lt;%end%&gt; ?"}], "tags": [], "owner": {"reputation": 647, "user_id": 660942, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/eEMKd.jpg?s=128&g=1", "display_name": "Adri&#224; Carro", "link": "https://stackoverflow.com/users/660942/adri%c3%a0-carro"}, "is_accepted": false, "score": 0, "last_activity_date": 1455100646, "last_edit_date": 1455100646, "creation_date": 1455098134, "answer_id": 35311869, "question_id": 35310746, "link": "https://stackoverflow.com/questions/35310746/how-to-send-data-from-ruby-controller-to-application-javascript-using-ajax/35311869#35311869", "title": "How to send data from ruby controller to application javascript using AJAX?", "body": "<p>For a real AJAX request in Ruby on Rails, you need to send response from check action in JS format.</p>\n\n<p><strong>events_controller.rb</strong></p>\n\n<pre><code>def check\n    checkList = params[:checkList]\n    selected_date = params[:selected_date]\n    length = params[:length]\n\n    @events = Event.where(\"checklist = ? and date = ?, checkList, selected_date).limit(length.to_i)\n    ...\n\n    respond_to do |format|\n        format.js\n    end\nend\n</code></pre>\n\n<p>Now, in your view, instead a check.html.erb, you will have check.js.erb. In this Javascript file, you can access to your @ variables and render partials or wherever.</p>\n\n<p><strong>check.js.erb</strong></p>\n\n<pre><code>$(\"#unavailable-list\").append('&lt;%= escape_javascript( render :partial =&gt; \"events/event\", :collection =&gt; @events ) %&gt;');\n</code></pre>\n\n<p><strong>_event.html.erb</strong></p>\n\n<pre><code>&lt;li&gt;&lt;%= event.name %&gt;&lt;/li&gt;\n</code></pre>\n\n<p>I change busy_array for events array because I don't know what's exactly busy_array but you can change it. </p>\n\n<p>This is the flow for an AJAX request.</p>\n"}, {"comments": [{"owner": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "edited": false, "score": 0, "creation_date": 1455103687, "post_id": 35313766, "comment_id": 58336657, "body": "thank you, does it matter if it&#39;s not a post request and is just a get request?"}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "reply_to_user": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "edited": false, "score": 0, "creation_date": 1455103757, "post_id": 35313766, "comment_id": 58336705, "body": "Not at all, but you have to define it as such. Ajax defaults to <code>POST</code>"}], "tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": true, "score": 2, "last_activity_date": 1455103769, "last_edit_date": 1592644375, "creation_date": 1455103246, "answer_id": 35313766, "question_id": 35310746, "link": "https://stackoverflow.com/questions/35310746/how-to-send-data-from-ruby-controller-to-application-javascript-using-ajax/35313766#35313766", "title": "How to send data from ruby controller to application javascript using AJAX?", "body": "<pre><code>busy_array = Array.new #this needs to be rendered in the view\n</code></pre>\n<p>If that has to be available in the view, you need to define an <code>@instance</code> variable:</p>\n<pre><code>def check\n    checkList = params[:checkList]\n    selected_date = params[:selected_date]\n    length = params[:length]\n\n    @busy_array = Array.new\n    ...\n    @busy_array.push(user.id) #busy_array is a list of user ids from database\nend\n</code></pre>\n<p>Each time you call a <code>controller#action</code>, the data/variables <em>within</em> the <code>action</code> are bound by <a href=\"https://en.wikipedia.org/wiki/Local_variable\" rel=\"nofollow noreferrer\">local scope</a>.</p>\n<p>Outputting data in the <code>view</code> requires the variable to be made available across the entire instance of the class (<em>not</em> just the action/function). Thus <code>@busy_array</code>.</p>\n<hr />\n<h1>Fix</h1>\n<pre><code>#app/views/events/....\n&lt;%= button_to &quot;Check&quot;, events_check_path %&gt;\n\n&lt;div class = &quot;col-md-6&quot; id=&quot;unavailable&quot;&gt;\n  &lt;h2&gt;Unavailable on this day:&lt;/h2&gt;\n  &lt;ol id=&quot;unavailable-list&quot;&gt;&amp;nbsp;&lt;/ol&gt;\n&lt;/div&gt;\n\n#app/assets/javascripts/application.js\n$(document).on('click', &quot;#check-button&quot;, function(e){\n  ...\n  $.get('/events/check', {checkList: checkList , selected_date: selectedDate , length: length});\n});\n\n#app/controllers/events_controller.rb\nclass EventsController &lt; ApplicationController\n  def check\n    @busy_array = User.joins(:event).where(event: { ... }).pluck(:id) #-&gt; return user ids where event.x = y\n    respond_to do |format|\n      format.js     #-&gt; invokes app/views/events/check.js.erb\n      format.html   #-&gt; invoked when HTML request sent\n    end\n  end\nend\n\n#app/views/events/check.js.erb\n&lt;% @busy_array.each do |id| %&gt;\n   $(&quot;ol#unavailable-list&quot;).append(&quot;&lt;%=j id %&gt;&quot;)\n&lt;% end %&gt;\n</code></pre>\n<hr />\n<blockquote>\n<p>I don't know how to send <code>busy_array</code> to be rendered in <code>events\\new.html.erb</code></p>\n</blockquote>\n<p>The variable will be available in <code>new</code> if it's an <code>@instance</code> var:</p>\n<pre><code>#app/views/events/new.html.erb\n&lt;%= @busy_array %&gt;\n</code></pre>\n<p>The <code>view</code> is part of the instance of your <code>EventsController</code> class, but outside the scope of the <code>check</code> method. When you send a request to Rails, it uses an instance of the <code>Controller</code> to compile a set of HTML to return to your browser.</p>\n<p>For example, you could sum up the <code>EventsController</code> flow as such:</p>\n<pre><code>Request &gt; Routing &gt; EventsController.new(request).action &gt; Returned HTML\n</code></pre>\n<p>If you set <code>EventsController.new(request)</code> manually, you'd have the following:</p>\n<pre><code>@event = EventsController.new request\n\n@event.check    #-&gt; &quot;busy_array&quot; locally scoped to this function\n@event.response #-&gt; outputs view code.... @busy_array needs to be instance var\n</code></pre>\n<p>You'll understand better if you read up about <a href=\"https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller\" rel=\"nofollow noreferrer\"><code>MVC</code></a>:</p>\n<p><a href=\"https://i.stack.imgur.com/nF9pX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nF9pX.png\" alt=\"enter image description here\" /></a></p>\n"}], "owner": {"reputation": 281, "user_id": 5701051, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a84ab02fcf8603703392942ccc2cdcaa?s=128&d=identicon&r=PG&f=1", "display_name": "S Craig", "link": "https://stackoverflow.com/users/5701051/s-craig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "accepted_answer_id": 35313766, "answer_count": 2, "score": 1, "last_activity_date": 1455103769, "creation_date": 1455095081, "last_edit_date": 1455097388, "question_id": 35310746, "link": "https://stackoverflow.com/questions/35310746/how-to-send-data-from-ruby-controller-to-application-javascript-using-ajax", "title": "How to send data from ruby controller to application javascript using AJAX?", "body": "<p>I have an AJAX call in my application.js which sends 3 pieces of data to my events_controller#check action:</p>\n\n<pre><code>//application.js\n    $(document).on('click', \"#check-button\", function(){\n\n        ...\n\n        $.ajax({\n                url: '/events/check',\n                data: {checkList: checkList , selected_date: selectedDate , length: length },\n\n            }\n        );\n\n    });\n</code></pre>\n\n<p>my check action:</p>\n\n<pre><code>#events_controller.rb\ndef check\n    checkList = params[:checkList]\n    selected_date = params[:selected_date]\n    length = params[:length]\n\n    busy_array = Array.new #this needs to be rendered in the view\n\n    ...\n    busy_array.push(user.id) #busy_array is a list of user ids from database\n\n\n  end\n\n\n#routes.rb\nresources :events do\n    get :check, on: :collection\n  end\n</code></pre>\n\n<p>The view:</p>\n\n<pre><code>&lt;button id=\"check-button\" type=\"button\"&gt;Check&lt;/button&gt;\n\n          &lt;div class = \"col-md-6\" id=\"unavailable\"&gt;\n            &lt;h2&gt;Unavailable on this day:&lt;/h2&gt;\n            &lt;ol id=\"unavailable-list\"&gt;\n              &lt;li&gt;THIS LIST SHOULD BE POPULATED BY BUSY_ARRAY&lt;/li&gt;\n            &lt;/ol&gt;\n      &lt;/div&gt;\n</code></pre>\n\n<p>Now I need to send back data from <code>events_controller#check</code> to the view, but I don't know how to send <code>busy_array</code> to be rendered in <code>events\\new.html.erb</code></p>\n\n<p>Thanks for you help, I am a ruby/JS beginner</p>\n"}, {"tags": ["ruby", "ubuntu", "vagrant", "vagrantfile"], "comments": [{"owner": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "edited": false, "score": 1, "creation_date": 1455101497, "post_id": 35310584, "comment_id": 58335184, "body": "its one way to work - another solution if you distribute the box is to add those variables into a yaml file (for example, son would work as any other file) and read file into your Vagrantfile, so you don&#39;t need to set the variables into your bash."}, {"owner": {"reputation": 15576, "user_id": 523168, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DzsTt.jpg?s=128&g=1", "display_name": "Valter Silva", "link": "https://stackoverflow.com/users/523168/valter-silva"}, "reply_to_user": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "edited": false, "score": 0, "creation_date": 1455102812, "post_id": 35310584, "comment_id": 58336043, "body": "Do you have any link explaining this approach Fr&#233;d&#233;ric ? It seems very interesting. Btw, I won&#39;t distribute my boxes, for now at least :)"}, {"owner": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "edited": false, "score": 0, "creation_date": 1455107308, "post_id": 35310584, "comment_id": 58339171, "body": "showing an example of my setting in an answer for visibility. don&#39;t really have link as I&#39;ve made up myself and through different reading but none particular, in fact I came on this from using puppet and hiera so I share the same file (don&#39;t know if its good or bad but I find it convenient)"}], "answers": [{"comments": [{"owner": {"reputation": 15576, "user_id": 523168, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DzsTt.jpg?s=128&g=1", "display_name": "Valter Silva", "link": "https://stackoverflow.com/users/523168/valter-silva"}, "edited": false, "score": 0, "creation_date": 1455108033, "post_id": 35315279, "comment_id": 58339712, "body": "That&#39;s a great solutions Fr&#233;d&#233;ric! Thank you for sharing! :)"}], "tags": [], "owner": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "is_accepted": true, "score": 5, "last_activity_date": 1455107175, "creation_date": 1455107175, "answer_id": 35315279, "question_id": 35310584, "link": "https://stackoverflow.com/questions/35310584/how-use-local-environment-variable-with-vagrant/35315279#35315279", "title": "How use local environment variable with Vagrant?", "body": "<p>one way I manage to have settings dependency is to use an external file (I use yaml, but any file would work like json .... Vagrantfile is a ruby script so as long as you can easily read it using ruby you're fine)</p>\n\n<p>An example of my Vagrantfile using a Yaml dependency</p>\n\n<pre><code>:# -*- mode: ruby -*-\n# vi: set ft=ruby :\n\nrequire 'yaml'\nsettings = YAML.load_file 'settings/common.yaml'\n\nVagrant.configure(\"2\") do |config|\n\n  config.vm.box = settings['host_box'] || \"pws/centos65\"\n  config.ssh.username = settings['ssh_user']\n\n  config.vm.define \"db\" do |db|\n    db.vm.hostname = settings['db_hostname']\n    db.vm.network \"private_network\", ip: settings['host_db_address']\n  end\n\n...\n\nend\n</code></pre>\n\n<p>the file <code>settings/common.yaml</code> would be defined as</p>\n\n<pre><code>--- \nhost_db_address:  \"192.168.90.51\" \nhost_app_address: \"192.168.90.52\"\n\ndb_hostname:      \"local.db\"\n\nssh_user:         \"pws\"\n</code></pre>\n\n<p>As said in comment, the main advantage I found using this technique is when you distribute box. My team would git clone the project, has to fill up the settings (for password dependency and so on) and ready to go.</p>\n"}], "owner": {"reputation": 15576, "user_id": 523168, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/DzsTt.jpg?s=128&g=1", "display_name": "Valter Silva", "link": "https://stackoverflow.com/users/523168/valter-silva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3164, "favorite_count": 0, "accepted_answer_id": 35315279, "answer_count": 1, "score": 1, "last_activity_date": 1455107175, "creation_date": 1455094549, "question_id": 35310584, "link": "https://stackoverflow.com/questions/35310584/how-use-local-environment-variable-with-vagrant", "title": "How use local environment variable with Vagrant?", "body": "<p>I'm passing my local environment variables like this:</p>\n\n<pre><code># -*- mode: ruby -*-\n# vi: set ft=ruby :\n\nVagrant.configure(2) do |de|\n\n  de.vm.box = 'ubuntu/trusty64'\n  de.vm.hostname = 'virtual_machine'\n  de.vm.network 'public_network', bridge:ENV['NETWORK_INTERFACE'], ip:'192.168.2.170'\n\n  de.vm.provider \"virtualbox\" do |v|\n    v.memory = 4096\n    v.cpus = 2\n  end\n\n  de.vm.synced_folder '.', '/vagrant', disabled:true\n  de.vm.synced_folder '../../synced/shared/', '/shared/'\n  de.vm.synced_folder '../../synced/devops/', '/devops/'\n\n  install = ENV['DEVOPS_HOME'] + '/vagrant/lib/install'\n  de.vm.provision 'shell', path: install + '/basic'\n  de.vm.provision 'shell', path: install + '/java8', args: ['automatic']\n  de.vm.provision 'shell', path: install + '/aws_cli', args: [ENV['S3_AWS_ACCESS_KEY_ID'],ENV['S3_AWS_SECRET_ACCESS_KEY']]\n\n  setup = ENV['DEVOPS_HOME'] + '/vagrant/lib/setup'\n  de.vm.provision 'shell', path: setup + '/hosts'\n\n  sys = ENV['DEVOPS_HOME'] + '/vagrant/lib/system'\n  de.vm.provision 'shell', path: sys + '/add_user', args: ['virtual-machine',ENV['VIRTUAL_MACHINE_PASSWORD']]\n\n  steps = ENV['DEVOPS_HOME'] + '/vagrant/server/virtual_machine/steps'\n  de.vm.provision 'shell', path: steps + '/install_rserve'\n\nend\n</code></pre>\n\n<p>Obviously, for that I need to set this variable on my <code>~/.profile</code> file. But I wonder if there is another way of doing this. Where I don't need to inform this via <code>Vagrantfile</code>, it doesn't look nice.</p>\n"}, {"tags": ["ruby", "ruby-2.1.5"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1455094299, "post_id": 35310295, "comment_id": 58330385, "body": "Your not being able to reproduce the error and your implication that you have access to (i.e., can reproduce) the stack trace seems contradictory."}, {"owner": {"reputation": 48302, "user_id": 388916, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6f9d967832644f9faa431e4e50b69bb0?s=128&d=identicon&r=PG", "display_name": "Hubro", "link": "https://stackoverflow.com/users/388916/hubro"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1455095524, "post_id": 35310295, "comment_id": 58331148, "body": "@sawa I got the stack trace from the server log. I am unable to reproduce the error because it&#39;s not happening, and as far as I can tell it <b>can&#39;t</b> happen. I have absolutely no idea how the error occurred. When/if the error occurs in production again, I still won&#39;t be able to fix it unless I have more information."}], "answers": [{"comments": [{"owner": {"reputation": 48302, "user_id": 388916, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6f9d967832644f9faa431e4e50b69bb0?s=128&d=identicon&r=PG", "display_name": "Hubro", "link": "https://stackoverflow.com/users/388916/hubro"}, "edited": false, "score": 1, "creation_date": 1455098154, "post_id": 35310350, "comment_id": 58332922, "body": "I&#39;ll take your answer to mean that it can&#39;t be done without black magic that has no place in a production environment... I&#39;ll just add some print calls to the location where the crash happens and hopefully it&#39;ll be enough information the next time it crashes."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 2, "last_activity_date": 1455093836, "creation_date": 1455093836, "answer_id": 35310350, "question_id": 35310295, "link": "https://stackoverflow.com/questions/35310295/is-it-possible-to-extract-locals-and-their-values-from-a-stack-trace-in-ruby/35310350#35310350", "title": "Is it possible to extract locals and their values from a stack trace in Ruby?", "body": "<p>It is not easy to do it yourself, but there is a gem <a href=\"https://github.com/banister/binding_of_caller\" rel=\"nofollow\">binding_of_caller</a> <a href=\"https://rubygems.org/gems/binding_of_caller/versions/0.7.2\" rel=\"nofollow\">(gem)</a> written by banisterfiend that makes it possible.</p>\n"}], "owner": {"reputation": 48302, "user_id": 388916, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6f9d967832644f9faa431e4e50b69bb0?s=128&d=identicon&r=PG", "display_name": "Hubro", "link": "https://stackoverflow.com/users/388916/hubro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 35310350, "answer_count": 1, "score": 2, "last_activity_date": 1455094144, "creation_date": 1455093666, "last_edit_date": 1455094144, "question_id": 35310295, "link": "https://stackoverflow.com/questions/35310295/is-it-possible-to-extract-locals-and-their-values-from-a-stack-trace-in-ruby", "title": "Is it possible to extract locals and their values from a stack trace in Ruby?", "body": "<p>I'm investigating a crash in my Ruby application. The stack trace in my log isn't enough information, and I cannot reproduce the error. When an unhandled exception occurs, I need to log the values of the locals in the frame where the exception occurred.</p>\n\n<p>Is there any way to do that in Ruby?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1455092350, "post_id": 35309925, "comment_id": 58329344, "body": "<code>(arr + arr[0...-1].rotate).each &amp;method(:puts)</code>"}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1455092481, "post_id": 35309925, "comment_id": 58329405, "body": "what do you mean by &#39;solution in brute force&#39;?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1455093008, "post_id": 35309925, "comment_id": 58329664, "body": "You need to make clear how the &quot;certain points&quot; to reverse are specified."}, {"owner": {"reputation": 37, "user_id": 5894742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a257a3a5fc4d21749cfbd4a0756dc9c7?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5894742/kevin"}, "reply_to_user": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1455094597, "post_id": 35309925, "comment_id": 58330587, "body": "@kimmmo I don&#39;t know, really. I&#39;m only a beginner. The challenge said to use brute force instead of trying to find the &quot;trick&quot; to it."}], "answers": [{"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 0, "last_activity_date": 1455127271, "last_edit_date": 1455127271, "creation_date": 1455092719, "answer_id": 35310041, "question_id": 35309925, "link": "https://stackoverflow.com/questions/35309925/iterate-through-array-forwards-then-backwards/35310041#35310041", "title": "Iterate through array forwards then backwards", "body": "<p>You can make use of <code>Enumerator</code> class to create custom enumerable that can providing custom iteration through the array.  In below code, I am monkey-patching <code>Array</code> class for convenience (also due to resemblance of the method to <code>Array#cycle</code>), though solution can be done without monkey-patching as well.</p>\n\n<pre><code>class Array\n  def reversible_cycle\n    Enumerator.new do |y|\n      index = 0\n      direction = :forward\n      loop do\n        direction = :backward if index + 1 &gt;= size\n        direction = :forward if index &lt;= 0\n        y &lt;&lt; self[index]\n        index += (direction == :forward ? +1 : -1)\n      end\n    end\n  end\nend\n\n\np [1,2,3,4,5].reversible_cycle.take(9)\n#=&gt; [1, 2, 3, 4, 5, 4, 3, 2, 1]\n\np [1,2,3,4,5].reversible_cycle.take(13)\n#=&gt; [1, 2, 3, 4, 5, 4, 3, 2, 1, 2, 3, 4, 5]\n\np [1,2,3,4,5].reversible_cycle.take(17)\n#&gt; [1, 2, 3, 4, 5, 4, 3, 2, 1, 2, 3, 4, 5, 4, 3, 2, 1]\n\np [1,2,3,4,5].reversible_cycle.take(21)\n#=&gt; [1, 2, 3, 4, 5, 4, 3, 2, 1, 2, 3, 4, 5, 4, 3, 2, 1, 2, 3, 4, 5]\n</code></pre>\n\n<p>For scenarios where you are changing direction without iterating the array fully in one direction, you will have to give some examples so that one can see how to modify the above code to accommodate that</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1455097277, "post_id": 35310869, "comment_id": 58332344, "body": "<code>direction * -1</code> is equivalent to <code>-direction</code>, no need for multiplication."}], "tags": [], "owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "is_accepted": true, "score": 0, "last_activity_date": 1455095471, "creation_date": 1455095471, "answer_id": 35310869, "question_id": 35309925, "link": "https://stackoverflow.com/questions/35309925/iterate-through-array-forwards-then-backwards/35310869#35310869", "title": "Iterate through array forwards then backwards", "body": "<p>Well, here's a moving \"cursor\" for your array:</p>\n\n<pre><code>module Cursor\n  def current_index\n    @current_index ||= 0\n  end\n\n  def step\n    @current_index = current_index + direction\n    handle_boundary\n  end\n\n  def step_back\n    @current_index = current_index + (direction * -1)\n    handle_boundary\n  end\n\n  def handle_boundary\n    if current_index == length || current_index == 0\n      turn_around\n    end\n  end\n\n  def direction\n    @direction ||= 1\n  end\n\n  def turn_around\n    @direction = direction * -1\n  end\n\n  def current\n    self[current_index]\n  end\nend\n</code></pre>\n\n<p>And here's how you use it:</p>\n\n<pre><code>array = [1,2,3,4,5]\narary.extend Cursor\narray.current     # returns the item in current position\narray.step        # moves a step forward, turns around when it reaches either end of the array\narray.step_back   # moves a step backward without switching the direction\narray.turn_around # switch the direction\n</code></pre>\n\n<p>Now you can travel around as you want :D</p>\n"}, {"tags": [], "owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1455095796, "creation_date": 1455095796, "answer_id": 35310998, "question_id": 35309925, "link": "https://stackoverflow.com/questions/35309925/iterate-through-array-forwards-then-backwards/35310998#35310998", "title": "Iterate through array forwards then backwards", "body": "<pre><code>i, counter = 0, 1                   # initialize index to 0, counter to 1 \nwhile(i &lt; a.length &amp;&amp; i &gt;= 0) do\n  puts a[i]\n  i+= counter                       # increment counter\n  counter*= -1 if(condition)        # Multiply counter with -1 to reverse it\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1455248934, "creation_date": 1455248934, "answer_id": 35354503, "question_id": 35309925, "link": "https://stackoverflow.com/questions/35309925/iterate-through-array-forwards-then-backwards/35354503#35354503", "title": "Iterate through array forwards then backwards", "body": "<p>You could use Ruby's under-appreciated <a href=\"http://nithinbekal.com/posts/ruby-flip-flop\" rel=\"nofollow\">flip-flop operator</a>.</p>\n\n<pre><code>arr = [1,2,3,4,5]\n\nsz = arr.size\n(2*sz-1).times { |i| puts i==0..i==arr.size-1 ? arr[i] : arr[sz-i-2] }\n1\n2\n3\n4\n5\n4\n3\n2\n1\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5894742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a257a3a5fc4d21749cfbd4a0756dc9c7?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5894742/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 35310869, "answer_count": 4, "score": -1, "last_activity_date": 1455248934, "creation_date": 1455092246, "last_edit_date": 1455095152, "question_id": 35309925, "link": "https://stackoverflow.com/questions/35309925/iterate-through-array-forwards-then-backwards", "title": "Iterate through array forwards then backwards", "body": "<pre><code>[1,2,3,4,5]\n=&gt;1,2,3,4,5,4,3,2,1\n=&gt;1,2,3,2,3,4,5,4,3 #I need to be able to reverse the iteration at certain points\n</code></pre>\n\n<p>I first tried something like:</p>\n\n<pre><code>a = [1,2,3,4,5]\na.each {|i|\n  if i % 9 == 0\n  a.reverse!\n}\n</code></pre>\n\n<p>but that just reverses the entire array and starts counting from the index it left off on. I need to to shift the direction of <code>each</code>, so to speak.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1455092148, "post_id": 35309848, "comment_id": 58329260, "body": "What are all those &quot;enter code here&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1455092372, "creation_date": 1455092372, "answer_id": 35309954, "question_id": 35309848, "link": "https://stackoverflow.com/questions/35309848/trying-to-print-out-fibbonnaci-numbers-using-an-array-in-ruby-what-is-wrong-wit/35309954#35309954", "title": "Trying to print out fibbonnaci numbers using an array in ruby. What is wrong with this code?", "body": "<p>You evaluated <code>nx_num</code> once outside of and prior to running the loop. Then, during the four iterations in the loop, you never updated <code>nx_num</code>. So the same value of <code>nx_num</code> is being pushed four times.</p>\n"}], "owner": {"reputation": 19, "user_id": 5907062, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Xn76gMHUwsQ/AAAAAAAAAAI/AAAAAAAAACw/pouhmSEl8tk/photo.jpg?sz=128", "display_name": "Nick Ellis", "link": "https://stackoverflow.com/users/5907062/nick-ellis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1455099063, "creation_date": 1455091976, "last_edit_date": 1455094159, "question_id": 35309848, "link": "https://stackoverflow.com/questions/35309848/trying-to-print-out-fibbonnaci-numbers-using-an-array-in-ruby-what-is-wrong-wit", "title": "Trying to print out fibbonnaci numbers using an array in ruby. What is wrong with this code?", "body": "<pre><code>arr = [1,1]\nlst = arr[arr.size-1]\nnx_lst = arr[arr.size-2]\nnx_num ||= nx_lst + lst\n4.times { arr &lt;&lt; nx_num }\nputs arr\n</code></pre>\n\n<p>For some reason the nx_num variable wont update. Even when arr is 1,1,2 nx_num stays at the value 2 even though it should be 3. Please help. </p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1455089578, "post_id": 35309074, "comment_id": 58327986, "body": "Please show us, what have you tried?"}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1455089817, "post_id": 35309074, "comment_id": 58328104, "body": "Campaign.joins(:invoices).where(&quot;campaigns.start_date &lt; ? and campaigns.end_date &gt; ?&quot;,Time.current,????????)"}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1455090655, "creation_date": 1455090655, "answer_id": 35309549, "question_id": 35309074, "link": "https://stackoverflow.com/questions/35309074/query-for-join-associations-in-rails/35309549#35309549", "title": "Query for join associations in rails", "body": "<p>I never used Rails magic to perform more-or-less complicated requests against database. It always results in drastic overhead, N+1 queries, or some unexpected penalties. Here is the plain old good SQL version to perform this task:</p>\n\n<pre><code>Campaign.connection.execute &lt;&lt;-SQL\n   SELECT campaigns.*, last_invoice_date\n   FROM campaigns \n     JOIN (\n       SELECT invoices.campaign_id AS campaign_id,\n              MAX(invoices.started) AS last_invoice_date\n       FROM invoices\n       GROUP BY invoices_campaign_id\n     ) AS last_invoices\n     ON (last_invoices.campaign_id = campaigns.id)\n     WHERE campaigns.start_date &lt; NOW()\n       AND campaigns.end_date &lt; NOW()\n       AND campaigns.end_date &gt;= last_invoices.last_invoice_date\nSQL.to_a\n</code></pre>\n\n<p>The above was not tested for the obvious reason, but it should work either as is or with slight modifications.</p>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1455092136, "post_id": 35309633, "comment_id": 58329250, "body": "<code>campaigns.each</code> might take ages to execute. This is a <i>very</i> bad practice and this is an exact example on what I meant saying \u201cIt always results in drastic overhead, N+1 queries, or some unexpected penalties.\u201d"}, {"owner": {"reputation": 1118, "user_id": 4850235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/484b1b54984fa870e9d4c2341fdf16ed?s=128&d=identicon&r=PG&f=1", "display_name": "Rubysmith", "link": "https://stackoverflow.com/users/4850235/rubysmith"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1455092585, "post_id": 35309633, "comment_id": 58329458, "body": "That&#39;s why Rails provides eager loading to avoid N+1 queries."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1455092819, "post_id": 35309633, "comment_id": 58329575, "body": "Oh really? Once again: <code>campaigns.each</code> from the snippet above will execute forever on, say, 1B records."}, {"owner": {"reputation": 1118, "user_id": 4850235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/484b1b54984fa870e9d4c2341fdf16ed?s=128&d=identicon&r=PG&f=1", "display_name": "Rubysmith", "link": "https://stackoverflow.com/users/4850235/rubysmith"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1455093045, "post_id": 35309633, "comment_id": 58329682, "body": "Of course for data intensive operations one has to revert to raw sql and mysql clustering."}], "tags": [], "owner": {"reputation": 1118, "user_id": 4850235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/484b1b54984fa870e9d4c2341fdf16ed?s=128&d=identicon&r=PG&f=1", "display_name": "Rubysmith", "link": "https://stackoverflow.com/users/4850235/rubysmith"}, "is_accepted": false, "score": 1, "last_activity_date": 1455091049, "creation_date": 1455091049, "answer_id": 35309633, "question_id": 35309074, "link": "https://stackoverflow.com/questions/35309074/query-for-join-associations-in-rails/35309633#35309633", "title": "Query for join associations in rails", "body": "<pre><code>campaigns = Campaign.where(\"DATE(start_date) &lt; ?\", Date.today).includes(:invoices)\n\ninvoices = campaigns.each do |campaign|\n              campaign.invoices.where(\"Date(campaigns.end_date)\" BETWEEN campaign.invoices.last.created_at.to_date AND Date.today)\n           end\n\ninvoices.map(&amp;:campaign)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 640, "user_id": 3982178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d871e8cd02f61e44a8e84c0893f0fa?s=128&d=identicon&r=PG&f=1", "display_name": "Plamena Gancheva", "link": "https://stackoverflow.com/users/3982178/plamena-gancheva"}, "is_accepted": true, "score": 3, "last_activity_date": 1455092610, "creation_date": 1455092610, "answer_id": 35310027, "question_id": 35309074, "link": "https://stackoverflow.com/questions/35309074/query-for-join-associations-in-rails/35310027#35310027", "title": "Query for join associations in rails", "body": "<p>Try this:</p>\n\n<pre><code> Compaign.joins(:invoices)\n            .where(\"compaigns.start_date &lt; :today AND compaigns.end_date &lt; :today\", today: Date.today)\n            .group(\"compaigns.id\")\n            .having(\"compaigns.end_date &gt; MAX(invoices.created_at)\")\n</code></pre>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 35310027, "answer_count": 3, "score": 2, "last_activity_date": 1455092610, "creation_date": 1455088816, "question_id": 35309074, "link": "https://stackoverflow.com/questions/35309074/query-for-join-associations-in-rails", "title": "Query for join associations in rails", "body": "<p>Campaign have attributes <code>:start_date,:end_date</code></p>\n\n<p>Invoice have attributes <code>:start_date,:end_date</code></p>\n\n<p>campaign.rb</p>\n\n<pre><code>has_many:invoices\n</code></pre>\n\n<p>invoice.rb</p>\n\n<pre><code>belongs_to:campaign\n</code></pre>\n\n<p>I want to get all those cmapaigns whose <code>start_date</code> is less than current date <code>AND</code> whose <code>end_date</code> is between <code>campaign.invoices.last.created..current_date</code></p>\n\n<p>How I query for this?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "elasticsearch", "rubygems", "elasticsearch-rails"], "answers": [{"tags": [], "owner": {"reputation": 1101, "user_id": 2057349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7b713e0b669fc1771d3b5e14b712c19?s=128&d=identicon&r=PG", "display_name": "gfd", "link": "https://stackoverflow.com/users/2057349/gfd"}, "is_accepted": false, "score": 0, "last_activity_date": 1455354070, "creation_date": 1455354070, "answer_id": 35377996, "question_id": 35308684, "link": "https://stackoverflow.com/questions/35308684/elastic-search-upgrade-in-ruby-on-rails-from-0-90-to-2-x/35377996#35377996", "title": "Elastic Search Upgrade in Ruby On Rails from 0.90 to 2.x", "body": "<p>Well, beside the obvious modification in <code>Gemfile</code> and bundle, you'll  have to modify your models for starters:</p>\n\n<p>I suggest you check the <a href=\"https://github.com/elastic/elasticsearch-rails\" rel=\"nofollow\">ES-rails GitHub</a>: the ReadMe is very well documented.</p>\n\n<p>The general idea is to include</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>include Elasticsearch::Model\ninclude Elasticsearch::Model::Callbacks\n</code></pre>\n\n<p>in each of your models and then use ElasticSearch DSL as much as possible.</p>\n\n<p>The point if you want to index your model in a different form from source code (i.e. public properties) is to create a <code>def as_indexed_json()</code> that will be used by ES when indexing.</p>\n\n<p>Everything is (also) well documented in the <a href=\"https://github.com/elastic/elasticsearch-rails/tree/master/elasticsearch-model\" rel=\"nofollow\">ES-model GitHub</a></p>\n\n<p>(WARNING: the 'main' elasticsearch-rails repo contains the 3 gem repos so you'll have to navigate inside repo tree to find the ReadMe file that suits you !)</p>\n\n<p>If you detail a bit more your needs, we might be able to help you more !</p>\n"}], "owner": {"reputation": 11, "user_id": 3122405, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uTJ5A.jpg?s=128&g=1", "display_name": "Ambesh", "link": "https://stackoverflow.com/users/3122405/ambesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1455354070, "creation_date": 1455087269, "last_edit_date": 1455088128, "question_id": 35308684, "link": "https://stackoverflow.com/questions/35308684/elastic-search-upgrade-in-ruby-on-rails-from-0-90-to-2-x", "title": "Elastic Search Upgrade in Ruby On Rails from 0.90 to 2.x", "body": "<p>In My current Ruby on Rails application elasticsearch is implememnted, the version of elasticsearch is <strong>0.90</strong> and we used \"<strong>tire</strong>\" gem.</p>\n\n<p>Now I want to update it with latest version of elasticsearch(\"2.x\").</p>\n\n<p>Tier gem is now not supporting elasticsearch version 1.x/2.x, They are suggesting to use \"elasticsearch-rails\" gem but how to migrate my application from old to new by using this.</p>\n"}, {"tags": ["ruby", "base64"], "comments": [{"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 2, "creation_date": 1455090128, "post_id": 35308637, "comment_id": 58328261, "body": "What&#39;s the problem? Works for me on ruby 2.2.4 <code>Base64.decode64(Base64.encode64(&#39;Send reinforcements&#39;).gsub(&#39;=&#39;, &#39;&#39;)) =&gt; &quot;Send reinforcements&quot;</code>"}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 2, "creation_date": 1455090192, "post_id": 35308637, "comment_id": 58328292, "body": "and also with <code>urlsafe_encode64</code>"}, {"owner": {"reputation": 492, "user_id": 756369, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/MFp2Q.jpg?s=128&g=1", "display_name": "jsookiki", "link": "https://stackoverflow.com/users/756369/jsookiki"}, "reply_to_user": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 1, "creation_date": 1455142057, "post_id": 35308637, "comment_id": 58362507, "body": "It had to do with longer strings of random bytes (like keys) not quite working correctly.  I was able to abstract the Ruby 2.3 base64 methods and use those, which worked."}], "answers": [{"tags": [], "owner": {"reputation": 191, "user_id": 3902629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MCEqc.png?s=128&g=1", "display_name": "grempe", "link": "https://stackoverflow.com/users/3902629/grempe"}, "is_accepted": false, "score": 1, "last_activity_date": 1485736614, "creation_date": 1485736614, "answer_id": 41927592, "question_id": 35308637, "link": "https://stackoverflow.com/questions/35308637/base64-encode-with-no-padding-on-ruby-2-2/41927592#41927592", "title": "Base64 encode with no padding on ruby 2.2", "body": "<p>MRI Ruby versions &lt; 2.3.x do not support decoding Base64 content without padding (where the encoded content originally had it).</p>\n\n<p>The following Ruby bug report shows the history of a change to support removal of padding and decoding without it for Ruby 2.3 and beyond. However if you try to use the 'padding' arg that was added in an older version of Ruby it fails with an ArgumentError. This makes it hard to support no-padding encode/decode across older and newer Rubies.</p>\n\n<p><a href=\"https://bugs.ruby-lang.org/issues/10740\" rel=\"nofollow noreferrer\">https://bugs.ruby-lang.org/issues/10740</a></p>\n\n<p>A nice solution I found is the 'base64url' gem which works across Ruby versions and automatically removes and re-adds padding as needed on encode/decode. Its lightweight and only has about 11 lines of code.</p>\n\n<p><a href=\"https://github.com/nojima/base64url\" rel=\"nofollow noreferrer\">https://github.com/nojima/base64url</a></p>\n"}], "owner": {"reputation": 492, "user_id": 756369, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/MFp2Q.jpg?s=128&g=1", "display_name": "jsookiki", "link": "https://stackoverflow.com/users/756369/jsookiki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 886, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1485736614, "creation_date": 1455087046, "last_edit_date": 1455087089, "question_id": 35308637, "link": "https://stackoverflow.com/questions/35308637/base64-encode-with-no-padding-on-ruby-2-2", "title": "Base64 encode with no padding on ruby 2.2", "body": "<p>I'm attempting to base64 encode some things in ruby 2.2 (environment limitation) without padding.  I know that in ruby 2.3 the base64 library added a padding flag that can do this for me.  However, when I attempt to do this myself in ruby 2.2 using </p>\n\n<pre><code>Base64.urlsafe_encode464(str).gsub('=', '')\n</code></pre>\n\n<p>This creates issues for me when decoding however.  Is there a way to update to the latest base64 library while staying on ruby 2.2? Or is there a good way to do a urlsafe base64 encoding that will decode correctly?</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1455086514, "post_id": 35308424, "comment_id": 58326540, "body": "How have you installed it? The easiest way is to either switch to another gemset or remove the directory with it\u2019s sources manually."}, {"owner": {"reputation": 114, "user_id": 2515743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ib3BP.jpg?s=128&g=1", "display_name": "Ritesh katare", "link": "https://stackoverflow.com/users/2515743/ritesh-katare"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1455086873, "post_id": 35308424, "comment_id": 58326702, "body": "Thanks for reply. I have installed it adding line gem &quot;themes_for_rails&quot;, :git =&gt; &#39;my_git_source&#39;, :branch =&gt; &#39;master&#39; to gemfile. What do you mean by  remove the directory with it\u2019s sources manually?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1455087059, "post_id": 35308424, "comment_id": 58326770, "body": "Why would you need to remove it? It won\u2019t make any harm. Unfortunately, I have no cleaner words to restate \u201cremove the directory manually.\u201d Ruby version manager you use, like rvm/rbenv, downloads and unpacks all gems into <code>~&#47;.rvm&#47;....</code>. Find your unwanted gem directory and remove it."}, {"owner": {"reputation": 114, "user_id": 2515743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ib3BP.jpg?s=128&g=1", "display_name": "Ritesh katare", "link": "https://stackoverflow.com/users/2515743/ritesh-katare"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1455093849, "post_id": 35308424, "comment_id": 58330121, "body": "Yes, uninstalled by removing gem directory. Thanks again @mudasobwa ."}], "owner": {"reputation": 114, "user_id": 2515743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ib3BP.jpg?s=128&g=1", "display_name": "Ritesh katare", "link": "https://stackoverflow.com/users/2515743/ritesh-katare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1455093644, "creation_date": 1455086205, "last_edit_date": 1455093644, "question_id": 35308424, "link": "https://stackoverflow.com/questions/35308424/how-to-uninstall-or-remove-gem-from-localhost-which-is-installed-from-git-source", "title": "How to uninstall or remove gem from localhost which is installed from git source", "body": "<p>I have installed gem from git source, now i am trying to uninstall it. I tried gem uninstall GEMNAME but it's not uninstalling it. How to uninstall it?</p>\n"}, {"tags": ["python", "ruby", "node.js", "express", "module"], "answers": [{"comments": [{"owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "edited": false, "score": 0, "creation_date": 1455090242, "post_id": 35309419, "comment_id": 58328314, "body": "thanks for your reply @Leonmax. Although i can install globally, the node_modules folder still gets saved into the project folder again right?"}, {"owner": {"reputation": 121, "user_id": 830530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f75c7179f51f4f09e681a07c346ba592?s=128&d=identicon&r=PG", "display_name": "Leonmax", "link": "https://stackoverflow.com/users/830530/leonmax"}, "reply_to_user": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "edited": false, "score": 0, "creation_date": 1455184645, "post_id": 35309419, "comment_id": 58379491, "body": "so it&#39;s the folder that makes you feel uncomfortable? it&#39;s like target folder of maven, in python you&#39;ll get lots of *.pyc too, there is always something other than the source code itself, isn&#39;t it? Why it bothers you so much, LOL"}], "tags": [], "owner": {"reputation": 121, "user_id": 830530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f75c7179f51f4f09e681a07c346ba592?s=128&d=identicon&r=PG", "display_name": "Leonmax", "link": "https://stackoverflow.com/users/830530/leonmax"}, "is_accepted": false, "score": 0, "last_activity_date": 1455090060, "creation_date": 1455090060, "answer_id": 35309419, "question_id": 35308294, "link": "https://stackoverflow.com/questions/35308294/why-should-i-create-node-modules-folder-for-nodejs-dependencies-for-each-express/35309419#35309419", "title": "Why should i create node_modules folder for nodejs dependencies for each expressjs app", "body": "<p>You can do <code>npm install --global</code> (or <code>-g</code> for short) to install globally. But that creates a problem when 2 projects reference to different version of the same dependency. You will have conflicts that is hard to trace. Also install it locally makes it more portable. You can reference to <a href=\"https://docs.npmjs.com/getting-started/installing-npm-packages-globally\" rel=\"nofollow\">this document</a></p>\n\n<p>This problem does not only exist in node.js world. Just different language approach this problem differently. I don't know ruby well, but:</p>\n\n<ol>\n<li>In python people use <code>virtualenv</code> to separate dependencies, which needs more effort.</li>\n<li>Maven of Java will cache artifacts in <code>$HOME/.m2</code> folder, but when compile the projects, they will copy those bytecode from .m2 folder to a local folder <code>target</code>.</li>\n</ol>\n\n<p>There is time you want to do <code>npm install --global</code> though for those tools such as <code>grunt.js</code>/<code>gulp.js</code>.</p>\n\n<p>I just think it has nothing to do with DRY, because you didn't write code twice. It's just downloaded twice.</p>\n\n<p>That being said, you still can install everything globlally.</p>\n"}], "owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 216, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1455090060, "creation_date": 1455085622, "question_id": 35308294, "link": "https://stackoverflow.com/questions/35308294/why-should-i-create-node-modules-folder-for-nodejs-dependencies-for-each-express", "title": "Why should i create node_modules folder for nodejs dependencies for each expressjs app", "body": "<p>I really don't get it. When i run npm install on the main folder, why does it have to download all the dependencies in the node_modules and why does this need to be done for each single project? In Sinatra(Ruby microframework), I never had to do this and it is easy to use the gems that are installed globally without having to download and save each one of them into the project folder again. </p>\n\n<p>I read somewhere that it is done to avoid version mismatch issues but if its working by installing it globally and simply 'require'ing it in many other languages like Python(uses virtualenv to tackle version issues), Ruby etc., why can't it be the same for node.js? </p>\n\n<p>Whatever happened to DRY?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ruby-on-rails-4", "activeadmin"], "comments": [{"owner": {"reputation": 2476, "user_id": 1434964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67e098a840b852d7d0797b4cfde222c6?s=128&d=identicon&r=PG", "display_name": "Natalie Hedstr&#246;m", "link": "https://stackoverflow.com/users/1434964/natalie-hedstr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1455085958, "post_id": 35308224, "comment_id": 58326311, "body": "Show us what you&#39;ve tried so far."}, {"owner": {"reputation": 525, "user_id": 4447571, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/OUYCB.jpg?s=128&g=1", "display_name": "ana", "link": "https://stackoverflow.com/users/4447571/ana"}, "reply_to_user": {"reputation": 2476, "user_id": 1434964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67e098a840b852d7d0797b4cfde222c6?s=128&d=identicon&r=PG", "display_name": "Natalie Hedstr&#246;m", "link": "https://stackoverflow.com/users/1434964/natalie-hedstr%c3%b6m"}, "edited": false, "score": 1, "creation_date": 1455156033, "post_id": 35308224, "comment_id": 58367270, "body": "hi @NatalieHedstr&#246;m, I edited my post. Tnx :)"}, {"owner": {"reputation": 568, "user_id": 1415454, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6ff55239f069e204b22596b14e1e63e6?s=128&d=identicon&r=PG", "display_name": "Chris Simeone", "link": "https://stackoverflow.com/users/1415454/chris-simeone"}, "edited": false, "score": 0, "creation_date": 1457553330, "post_id": 35308224, "comment_id": 59463074, "body": "Did you ever figure this out? I need to do the same thing. Thanks!"}, {"owner": {"reputation": 525, "user_id": 4447571, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/OUYCB.jpg?s=128&g=1", "display_name": "ana", "link": "https://stackoverflow.com/users/4447571/ana"}, "reply_to_user": {"reputation": 568, "user_id": 1415454, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6ff55239f069e204b22596b14e1e63e6?s=128&d=identicon&r=PG", "display_name": "Chris Simeone", "link": "https://stackoverflow.com/users/1415454/chris-simeone"}, "edited": false, "score": 0, "creation_date": 1457665608, "post_id": 35308224, "comment_id": 59520684, "body": "It&#39;s better to use partial form :) @ChrisSimeone"}], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 10943494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3030bcf5c5ac985c7c2a08428ef80b96?s=128&d=identicon&r=PG&f=1", "display_name": "hardik", "link": "https://stackoverflow.com/users/10943494/hardik"}, "is_accepted": false, "score": 0, "last_activity_date": 1572864155, "last_edit_date": 1572864155, "creation_date": 1571838444, "answer_id": 58524364, "question_id": 35308224, "link": "https://stackoverflow.com/questions/35308224/adding-custom-button-in-activeadmin-rails-4/58524364#58524364", "title": "Adding custom button in activeadmin rails 4", "body": "<ul>\n<li>I have Two param accepted and rejected.</li>\n<li><p>Then i define Two button for Accept and Reject and this two i'm used to \naccept and reject.</p>\n\n<p>action_item :status, only: :show do \nlink_to 'Accept', admin_leave_application_path(id: params[:id], status: 'accepted')end</p>\n\n<p>action_item :status, only: :show do \nlink_to 'Reject', admin_leave_application_path(id: params[:id], \nstatus: 'rejected')\nend</p></li>\n<li><p>Now i Am define my controller and easy to explain how to button add and work.</p></li>\n</ul>\n\n<p>controller do</p>\n\n<pre><code>def show\n\n  if params[:status].present? \n    leave_application = LeaveApplication.find_by(id: params[:id])\n    leave_application.update(status: params[:status])\n    redirect_to admin_leave_applications_path\n  else\n    super\n  end\nend\nend\n</code></pre>\n"}], "owner": {"reputation": 525, "user_id": 4447571, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/OUYCB.jpg?s=128&g=1", "display_name": "ana", "link": "https://stackoverflow.com/users/4447571/ana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 565, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572864155, "creation_date": 1455085313, "last_edit_date": 1455329247, "question_id": 35308224, "link": "https://stackoverflow.com/questions/35308224/adding-custom-button-in-activeadmin-rails-4", "title": "Adding custom button in activeadmin rails 4", "body": "<p>I want to add a custom button to my form in active admin. When this button click it will add a text field. Can somebody help me with my problem?</p>\n\n<p>this is my banner.rb</p>\n\n<pre><code>ActiveAdmin.register Banner do\n  # See permitted parameters documentation:\n  # https://github.com/activeadmin/activeadmin/blob/master/docs/2-resource-customization.md#setting-up-strong-parameters\n  #\n  # permit_params :list, :of, :attributes, :on, :model\n  #\n  # or\n  #\n  # permit_params do\n  #   permitted = [:permitted, :attributes]\n  #   permitted &lt;&lt; :other if resource.something?\n  #   permitted\n  # end\n\n  menu label: \"Main Banner\", parent: \"Banners\"\n  permit_params :tag, :image\n\n  form do |f|\n    f.inputs do \n      f.input :tag, label: \"Banner name\" \n      f.input :image, :as =&gt; :file\n\n    end\n    f.actions\n  end\n\n controller do\n    def create\n       @clnt = HTTPClient.new\n       @uri = 'http://healthy-options.jumpdigital.ph/bannerUpload'\n       File.open(params[:banner][:image].path) do |file|\n          @body = { 'image' =&gt; file, 'tag' =&gt; params[:banner][:tag] }\n          @res = @clnt.post(@uri, @body)\n      end\n\n      redirect_to admin_banners_path\n    end\n\n    def update\n      bannerid = params[:id]\n      @clnt = HTTPClient.new\n      @uri = 'http://healthy-options.jumpdigital.ph/bannerUpdate'\n\n      begin\n        image = File.open(params[:banner][:image].path)\n      rescue\n\n      end\n\n      if !image.nil?\n\n        @body = { 'bannerid' =&gt; bannerid, 'tag' =&gt; params[:banner][:tag], 'image' =&gt;File.open(params[:banner][:image].path) }        \n        @res = @clnt.post(@uri, @body)\n      else\n        @body = { 'bannerid' =&gt; bannerid, 'tag' =&gt; params[:banner][:tag]}        \n        @res = @clnt.post(@uri, @body)\n\n      end\n      redirect_to admin_banner_path\n\n    end\n\n  end\n\nend\n</code></pre>\n\n<p>In this file I want to add my custom button.</p>\n"}, {"tags": ["ruby", "rubygems", "gemspecs"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1455086605, "post_id": 35308181, "comment_id": 58326591, "body": "What do you mean by \u201crequire code\u201d? Sources? Because to require 3rd party gems is likely the main and only goal of <code>.gemspec</code>."}, {"owner": {"reputation": 4349, "user_id": 648392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6b2bd8a8c583866711c234a612f6b157?s=128&d=identicon&r=PG", "display_name": "Jesper", "link": "https://stackoverflow.com/users/648392/jesper"}, "edited": false, "score": 1, "creation_date": 1455088675, "post_id": 35308181, "comment_id": 58327558, "body": "Are you confusing declaring dependencies and actually requiring code?"}, {"owner": {"reputation": 511, "user_id": 1449987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b6dcbe30d2b08278917ba59d5b22ab4?s=128&d=identicon&r=PG", "display_name": "jessebs", "link": "https://stackoverflow.com/users/1449987/jessebs"}, "edited": false, "score": 0, "creation_date": 1533583725, "post_id": 35308181, "comment_id": 90390224, "body": "Similar question - <a href=\"https://stackoverflow.com/questions/51564195/how-can-i-install-a-gem-via-bundler-using-gemspec-before-parsing-the-gemspec\" title=\"how can i install a gem via bundler using gemspec before parsing the gemspec\">stackoverflow.com/questions/51564195/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 628799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1448840e59c1d35d537ab31af3c2b7db?s=128&d=identicon&r=PG", "display_name": "JohnIV", "link": "https://stackoverflow.com/users/628799/johniv"}, "edited": false, "score": 0, "creation_date": 1455124981, "post_id": 35312262, "comment_id": 58352384, "body": "You&#39;re right that <code>require</code> works. My question has been revised to emphasize that, in the gemspec file, you cannot depend on those gems to be on the load path, or even installed."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1455099137, "creation_date": 1455099137, "answer_id": 35312262, "question_id": 35308181, "link": "https://stackoverflow.com/questions/35308181/why-cant-i-require-a-gem-from-within-the-gemspec/35312262#35312262", "title": "Why can&#39;t I require a gem from within the .gemspec?", "body": "<p>A <code>.gemspec</code> is just a Ruby script like any other Ruby script. Basically the only thing that is \"special\" is that it is run in an environment where certain libraries have already been <code>require</code>d, such as <code>rubygems/specification</code>.</p>\n\n<p><code>require</code>ing libraries works just like in any other Ruby script.</p>\n"}], "owner": {"reputation": 169, "user_id": 628799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1448840e59c1d35d537ab31af3c2b7db?s=128&d=identicon&r=PG", "display_name": "JohnIV", "link": "https://stackoverflow.com/users/628799/johniv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1286, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1455124578, "creation_date": 1455085117, "last_edit_date": 1455124578, "question_id": 35308181, "link": "https://stackoverflow.com/questions/35308181/why-cant-i-require-a-gem-from-within-the-gemspec", "title": "Why can&#39;t I require a gem from within the .gemspec?", "body": "<p>I can't require third party code in my .gemspec file. I would like to require a semver library to manage my version number. Why can't I require gems inside my .gemspec?</p>\n\n<p>I have a workaround for my particular problem. What I am interested in the specific reason I can't require code from inside a gemspec. I feel like I am missing something about how Rubygems work. Thanks!</p>\n\n<pre><code>lib = File.expand_path('../lib', __FILE__)\n$LOAD_PATH.unshift(lib) unless $LOAD_PATH.include?(lib)\nrequire 'semver'\n\nGem::Specification.new do |spec|\n  spec.add_dependency \"semver2\", \"~&gt; 3.4.2\"\n  spec.version       = SemVer.find.to_s[1..-1]\nend\n</code></pre>\n\n<h1>Running bundle install results in the following error:</h1>\n\n<pre><code>$ bundle\n\n[!] There was an error parsing `Gemfile`: There was a LoadError while loading example.gemspec: \ncannot load such file -- semver from\n  /opt/pose/auto/stack-overflow/example/example.gemspec:3:in `&lt;main&gt;'\n</code></pre>\n\n<p>Obviously there is some point before which you cannot depend on 3rd party gems to be on your LOAD_PATH. I am asking for an explanation of where that point is. My guess is because my Gemfile references my gemspec and Bundler had not loaded all the dependencies yet, but that is a guess.</p>\n"}, {"tags": ["ruby", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1455087488, "creation_date": 1455087488, "answer_id": 35308743, "question_id": 35308095, "link": "https://stackoverflow.com/questions/35308095/should-i-depend-on-gems-im-extending/35308743#35308743", "title": "Should I depend on gems I&#39;m extending?", "body": "<p>It\u2019s all up to you. Unless you rely in your code on gem presence (read: surround all your code with <code>if const_defined?('Paperclip')</code> or like,) your gem might gracefully reject to operate unless the necessary dependencies are already included in the target project. The version should correspond the version you have your code tested against.</p>\n\n<p>As a good example of the case when direct dependence is <em>not</em> a good choice, would be the \u201cumbrella\u201d gem, simplifying work with different, say, authorization engines. One won\u2019t require all these devises, pundits, and family. Instead one should do \u201cclever\u201d initialization:</p>\n\n<pre><code>case\nwhen Kernel.const_defined?('Devise')\n  Logger.debug 'Will initialize Devise bridge.'\n  # initialization of bindings etc.\nwhen Kernel.const_defined?('Pundit')\n  Logger.debug 'Will use Pundit bridge.'\n  # initialization of bindings etc.\n...\nelse\n  Logger.warn 'No authorization backend found.'\n  raise \nend\n</code></pre>\n\n<p>Or, imagine the logger, that might send airbrakes. For the logger to operate, the airbrake presense is not crucial. Hence one might check the presence of airbrake gem in the target project and switch the additional functionality on on success.</p>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 5123, "user_id": 483876, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/88d57f046c89c6aa6be483a768f4c3a1?s=128&d=identicon&r=PG", "display_name": "synapse", "link": "https://stackoverflow.com/users/483876/synapse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 35308743, "answer_count": 1, "score": 1, "last_activity_date": 1455087488, "creation_date": 1455084742, "last_edit_date": 1455085186, "question_id": 35308095, "link": "https://stackoverflow.com/questions/35308095/should-i-depend-on-gems-im-extending", "title": "Should I depend on gems I&#39;m extending?", "body": "<p>Suppose there's gem that implements authentication strategy for Warden or a storage engine for Paperclip or an ActiveRecord database adapter. Should it include the gems it supposed to be used with as regular dependencies? If so, what should be the version constraints? It certainly has to include \"parent\" gems as development dependencies but what about regular ones?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1455088375, "post_id": 35308054, "comment_id": 58327405, "body": "Please get rid of all unrelated code and post the question stating the exact problem."}], "answers": [{"tags": [], "owner": {"reputation": 914, "user_id": 1612193, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f21ef0b135d7399570b3679ce958fcbd?s=128&d=identicon&r=PG", "display_name": "Dani", "link": "https://stackoverflow.com/users/1612193/dani"}, "is_accepted": false, "score": 0, "last_activity_date": 1455103760, "creation_date": 1455103760, "answer_id": 35313971, "question_id": 35308054, "link": "https://stackoverflow.com/questions/35308054/how-to-pass-parameter-form-rake-file-to-model/35313971#35313971", "title": "How to pass parameter form rake file to model?", "body": "<p><code>rake</code> commands load your entire application, so you should be able to access your model by simply calling <code>MyModel</code>.</p>\n"}], "owner": {"reputation": 789, "user_id": 5422500, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/543ae4e0bac64ed0ceac17a648a01f2e?s=128&d=identicon&r=PG&f=1", "display_name": "uno", "link": "https://stackoverflow.com/users/5422500/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1455103760, "creation_date": 1455084529, "question_id": 35308054, "link": "https://stackoverflow.com/questions/35308054/how-to-pass-parameter-form-rake-file-to-model", "title": "How to pass parameter form rake file to model?", "body": "<p>I have have a rake task .</p>\n\n<p>and this is my code on it</p>\n\n<p>i have a method called <strong>terminate_conference(args)</strong></p>\n\n<pre><code>  task :terminate_conference, [ :unique ] =&gt; :environment do |t, args|\n    ActiveRecord::Base.transaction do\n      begin\n        abort \"no unique\" unless args[:unique]\n        rake.str &lt;&lt; \" -&gt; #{args[:unique]}\"\n         rake.str &lt;&lt; \" -&gt; #{args} -&gt; KINGKANGKUNGKANGKING\"\n        unique_conference = Unique.new\n        unique_conference.terminate_conference(args)\n      rescue Exception =&gt; e\n        ActiveRecord::Rollback\n        logger.info \"Error Terminating\"\n      end\n    end\n  end\n</code></pre>\n\n<p>and this is my model which has the function of <strong>terminate_conference(params)</strong>:</p>\n\n<pre><code>  def terminate_conference(params) # params must be an Hash object\n\n    conditions = Hash.new\n    conditions[:id] = params[:id] unless !params.has_key? :id\n    conditions[:unique_number] = params[:unique_number] unless !params.has_key? :unique_number\n\n    @unique = Unique.where(conditions).take\n    if @unique\n    confbridge = Confbridge.where( confno: @unique.unique_number)\n    unique = Unique.where( unique_number: @unique.unique_number)\n    confbridge.destroy_all\n    unique.destroy_all\n\n\n      circle = Circle.find(@unique.circle)\n      circle[:conference2_total_channels] -= 5\n      circle.save!\n    end\n  end\n</code></pre>\n\n<p>for example the value of <strong>terminate_conference(12345)</strong></p>\n\n<p>how can i get to my model? <strong>terminate_conference(params)</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "railstutorial.org"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1455082325, "post_id": 35307486, "comment_id": 58324886, "body": "Which section and subsection of the chapter are you in?"}, {"owner": {"reputation": 269, "user_id": 5437827, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bbfb5339a3f97da532c5c8b8f1175225?s=128&d=identicon&r=PG&f=1", "display_name": "Alfonso Giron", "link": "https://stackoverflow.com/users/5437827/alfonso-giron"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1455082366, "post_id": 35307486, "comment_id": 58324905, "body": "Section 8.3 Logging Out, Listing 8.28 is right where I&#39;m stuck"}, {"owner": {"reputation": 269, "user_id": 5437827, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bbfb5339a3f97da532c5c8b8f1175225?s=128&d=identicon&r=PG&f=1", "display_name": "Alfonso Giron", "link": "https://stackoverflow.com/users/5437827/alfonso-giron"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1455083496, "post_id": 35307486, "comment_id": 58325333, "body": "Edited, the error is different now, not sure why but maybe it makes more sense now."}], "answers": [{"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": true, "score": 1, "last_activity_date": 1455084205, "creation_date": 1455084205, "answer_id": 35307984, "question_id": 35307486, "link": "https://stackoverflow.com/questions/35307486/rails-tutorial-m-hartl-chapter-8-error-undefined-local-variable/35307984#35307984", "title": "Rails Tutorial (M. Hartl) Chapter 8 Error: Undefined local variable", "body": "<p>In your <code>sessions_controller.rb</code> file change:</p>\n\n<pre><code>def destroy\n  log_out\n  redirect_to_root_url\nend\n</code></pre>\n\n<p>to</p>\n\n<pre><code>def destroy\n  log_out\n  redirect_to root_url\nend\n</code></pre>\n"}], "owner": {"reputation": 269, "user_id": 5437827, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bbfb5339a3f97da532c5c8b8f1175225?s=128&d=identicon&r=PG&f=1", "display_name": "Alfonso Giron", "link": "https://stackoverflow.com/users/5437827/alfonso-giron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 317, "favorite_count": 0, "accepted_answer_id": 35307984, "answer_count": 1, "score": 0, "last_activity_date": 1455087809, "creation_date": 1455082015, "last_edit_date": 1455087809, "question_id": 35307486, "link": "https://stackoverflow.com/questions/35307486/rails-tutorial-m-hartl-chapter-8-error-undefined-local-variable", "title": "Rails Tutorial (M. Hartl) Chapter 8 Error: Undefined local variable", "body": "<p>Edited: Different error now, code posted still the same.</p>\n\n<p>On chapter 8.3 of Hartl's Ruby Tutorial. Getting this error on the rake test for valid login test.</p>\n\n<pre><code> test_login_with_valid_information_followed_by_logout#UsersLoginTest (1454541872.34s)\nNameError:         NameError: undefined local variable or method `redirect_to_root_url' for #&lt;SessionsController:0x007fce97a93068&gt;\n            app/controllers/sessions_controller.rb:18:in `destroy'\n            test/integration/users_login_test.rb:39:in `block in &lt;class:UsersLoginTest&gt;'\n        app/controllers/sessions_controller.rb:18:in `destroy'\n        test/integration/users_login_test.rb:39:in `block in &lt;class:UsersLoginTest&gt;'\n</code></pre>\n\n<p>The error message points to line 39 in my login test and line 18 in my Sessions controller as the errors, as you can see here:</p>\n\n<pre><code>test/integration/users_login_test.rb:39:in `block in &lt;class:UsersLoginTest&gt;'\n\napp/controllers/sessions_controller.rb:18:in `destroy'\n</code></pre>\n\n<p><strong>users_login_test.rb:</strong></p>\n\n<p>Line 39 would be 'delete logout_path' </p>\n\n<pre><code>require 'test_helper'\n\nclass UsersLoginTest &lt; ActionDispatch::IntegrationTest\n    def setup\n        @user = users(:michael)\n    end\n\n    test \"login with invalid information\" do\n        get login_path\n        assert_template 'sessions/new'\n        post login_path, session: { email: \"\", password: \"\" }\n        assert_template 'sessions/new'\n        assert_not flash.empty?\n        get root_path\n        assert flash.empty?\n    end\n\n  test \"login with valid information\" do\n        get login_path\n        post login_path, session: { email: @user.email, password: 'password' }\n        assert_redirected_to @user\n        follow_redirect!\n        assert_template 'users/show'\n        assert_select \"a[href=?]\", login_path, count: 0\n        assert_select \"a[href=?]\", logout_path\n        assert_select \"a[href=?]\", user_path(@user)\n    end\n\n   test \"login with valid information followed by logout\" do\n    get login_path\n    post login_path, session: { email: @user.email, password: 'password' }\n    assert is_logged_in?\n    assert_redirected_to @user\n    follow_redirect!\n    assert_template 'users/show'\n    assert_select \"a[href=?]\", login_path, count: 0\n    assert_select \"a[href=?]\", logout_path\n    assert_select \"a[href=?]\", user_path(@user)\n    delete logout_path\n    assert_not is_logged_in?\n    assert_redirected_to root_url\n    follow_redirect!\n    assert_select \"a[href=?]\", login_path\n    assert_select \"a[href=?]\", logout_path,      count: 0\n    assert_select \"a[href=?]\", user_path(@user), count: 0\n  end\nend \n</code></pre>\n\n<p>Tried my best to fix the relevant code. I think I have the destroy method defined properly and in the right place. Here is my sessions helper and controller.</p>\n\n<p><strong>sessions_controller.rb:</strong></p>\n\n<p>Line 18 would be 'redirect_to_root_url'</p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n\n\n def new\n  end\n\n  def create\n    user = User.find_by(email: params[:session][:email].downcase)\n    if user &amp;&amp; user.authenticate(params[:session][:password])\n      log_in user\n      redirect_to user\n    else\n      flash.now[:danger] = 'Invalid email/password combination'\n    render 'new'\n    end\n  end\n\n  def destroy\n    log_out\n    redirect_to_root_url\n  end\nend\n</code></pre>\n\n<p><strong>sessions_helper.rb:</strong></p>\n\n<pre><code>module SessionsHelper\n\n    #Logs in the given user.\n    def log_in(user)\n        session[:user_id] = user.id\n    end\n\n    #Returns the current logged in user, if any\n    def current_user\n        @current_user ||= User.find_by(id: session[:user_id])\n    end\n\n    #Returns true if the user is logged in, false otherwise\n    def logged_in?\n        !current_user.nil?\n    end\n\n    #Logs out current user\n    def log_out\n        session.delete(:user_id)\n        @current_user = nil\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 3865, "user_id": 4540175, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a789c8057fed1368f96c15cfbdba6421?s=128&d=identicon&r=PG&f=1", "display_name": "gates", "link": "https://stackoverflow.com/users/4540175/gates"}, "edited": false, "score": 0, "creation_date": 1455081447, "post_id": 35307111, "comment_id": 58324516, "body": "Hey in the first example, are you not getting only first record in the loop?"}, {"owner": {"reputation": 3865, "user_id": 4540175, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a789c8057fed1368f96c15cfbdba6421?s=128&d=identicon&r=PG&f=1", "display_name": "gates", "link": "https://stackoverflow.com/users/4540175/gates"}, "edited": false, "score": 0, "creation_date": 1455082441, "post_id": 35307111, "comment_id": 58324928, "body": "you mean to say the block variable has to be like this caricature_type.name? instead of caricature_type.first.name?"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "reply_to_user": {"reputation": 3865, "user_id": 4540175, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a789c8057fed1368f96c15cfbdba6421?s=128&d=identicon&r=PG&f=1", "display_name": "gates", "link": "https://stackoverflow.com/users/4540175/gates"}, "edited": false, "score": 0, "creation_date": 1455085304, "post_id": 35307111, "comment_id": 58326019, "body": "@gates Thanks man. I am bit in problem, so lacking concentration."}], "tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": true, "score": 1, "last_activity_date": 1455112864, "last_edit_date": 1455112864, "creation_date": 1455080145, "answer_id": 35307111, "question_id": 35306995, "link": "https://stackoverflow.com/questions/35306995/what-is-the-alternative-syntax-for-first-and-second-in-activerecord/35307111#35307111", "title": "What is the alternative syntax for first and second in ActiveRecord", "body": "<p>Here are some ideas. Suppose you want to iterate over all <code>CaricatureType</code> records. Then do like</p>\n\n<pre><code>&lt;% CaricatureType.all.each do |caricature_type| %&gt;\n  &lt;div class=\"col-md-8 col-sm-8\"&gt;\n     &lt;h5&gt;&lt;%= caricature_type.name %&gt;&lt;/h5&gt;\n     &lt;p class=\"text-color\"&gt;\n       &lt;%= caricature_type.description %&gt;\n     &lt;/p&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Or if you want first 10 records, then:</p>\n\n<pre><code>&lt;% CaricatureType.first(10).each do |caricature_type| %&gt;\n</code></pre>\n\n<p>Note: Yeah, it is acceptable not to put any model query inside the view. Keep them in the corresponding action of the controller which rendering the current view/partial, and then use those instance variables in the view. I just wanted to tell you in this answer what is work around of the problem you are facing. So you will store the query result inside <code>@caricature_types</code> in your controller action, and then use it to iterate.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 4407945, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002609780960/picture?type=large", "display_name": "Aditya Majeti", "link": "https://stackoverflow.com/users/4407945/aditya-majeti"}, "is_accepted": false, "score": 0, "last_activity_date": 1455081555, "creation_date": 1455081555, "answer_id": 35307401, "question_id": 35306995, "link": "https://stackoverflow.com/questions/35306995/what-is-the-alternative-syntax-for-first-and-second-in-activerecord/35307401#35307401", "title": "What is the alternative syntax for first and second in ActiveRecord", "body": "<pre><code>client = Client.first(numerical value)\n</code></pre>\n\n<p>If numerical value is 2 it will return first 2 records</p>\n\n<pre><code>client = Client.first(2)\n=&gt; [ &lt;Client id: 1, first_name: \"Lifo\"&gt;, &lt;Client id: 2, first_name: \"Fifo\"&gt;]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 782, "user_id": 2265937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a62134961838eb9d27490b10cc11bd7?s=128&d=identicon&r=PG", "display_name": "Dias", "link": "https://stackoverflow.com/users/2265937/dias"}, "is_accepted": false, "score": 3, "last_activity_date": 1455603466, "last_edit_date": 1455603466, "creation_date": 1455083841, "answer_id": 35307893, "question_id": 35306995, "link": "https://stackoverflow.com/questions/35306995/what-is-the-alternative-syntax-for-first-and-second-in-activerecord/35307893#35307893", "title": "What is the alternative syntax for first and second in ActiveRecord", "body": "<p>Don't write business logic in the views, rather you can use instance variable.</p>\n\n<p>In your controller:</p>\n\n<pre><code>@caricature_type = CaricatureType.all\n</code></pre>\n\n<p>then in your view,  you can use this instance variable.</p>\n\n<pre><code>&lt;% @caricature_type.each do |caricature_type| %&gt;\n   &lt;div class=\"col-md-8 col-sm-8\"&gt;\n      &lt;h5&gt;&lt;%= caricature_type.name %&gt;&lt;/h5&gt;\n      &lt;p class=\"text-color\"&gt;\n         &lt;%= caricature_type.description %&gt;\n     &lt;/p&gt;\n   &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 3865, "user_id": 4540175, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a789c8057fed1368f96c15cfbdba6421?s=128&d=identicon&r=PG&f=1", "display_name": "gates", "link": "https://stackoverflow.com/users/4540175/gates"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 35307111, "answer_count": 3, "score": -1, "last_activity_date": 1455603466, "creation_date": 1455079535, "last_edit_date": 1455091321, "question_id": 35306995, "link": "https://stackoverflow.com/questions/35306995/what-is-the-alternative-syntax-for-first-and-second-in-activerecord", "title": "What is the alternative syntax for first and second in ActiveRecord", "body": "<pre><code>&lt;div class=\"col-md-12 col-sm-12 pad-0 col-hover\"&gt;\n    &lt;div class=\"col-md-2 col-sm-2 pad-10 \"&gt;\n        &lt;img class=\"img1\"  src=\"/assets/choose-style/img1.png\"&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-8 col-sm-8\"&gt;\n        &lt;h5&gt;&lt;%= CaricatureType.first.name %&gt;&lt;/h5&gt;\n        &lt;p class=\"text-color\"&gt;\n            &lt;%= CaricatureType.first.description %&gt;\n        &lt;/p&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-2 col-sm-2 roundedTwo\"&gt;\n        &lt;input type=\"radio\" value=\"None\" id=\"roundedTwo\" name=\"check\" /&gt;\n        &lt;label for=\"roundedTwo\"&gt;&lt;/label&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I have a couple of divs like these, but in the above example I am hardcoding <strong>CaricatureType.first.name</strong> like this. But I want to do it in a for loop, if there a syntax in which I can do something like <code>CaricatureType[0].name</code> </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1455085345, "post_id": 35306977, "comment_id": 58326045, "body": "Try to understand that although <code>print</code> and <code>puts</code> print something to the screen, they always have a return value of <code>nil</code>. Check it out in irb."}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 3, "last_activity_date": 1455080773, "last_edit_date": 1455080773, "creation_date": 1455079883, "answer_id": 35307052, "question_id": 35306977, "link": "https://stackoverflow.com/questions/35306977/why-is-the-method-output-printed-first/35307052#35307052", "title": "Why is the method output printed first?", "body": "<blockquote>\n  <p>In first output why method output is printed first and then the string. </p>\n</blockquote>\n\n<p>In order to evaluate the string, <code>showman</code> is evaluated before the whole string is evaluated, which prints <code>\"I am awesome \"</code>.</p>\n\n<blockquote>\n  <p>Why its not printing like \"I was saying that I am awesome\"</p>\n</blockquote>\n\n<p>Because <code>print</code> returns <code>nil</code>, and interpolating <code>nil</code> in a string evaluates to an empty string (<code>\"#{showman}\"</code> \u2192 <code>\"#{nil}\"</code> \u2192 <code>\"\"</code>). Without <code>print</code>, the <code>showman</code> method returns the string <code>\"I am awesome \"</code>.</p>\n\n<blockquote>\n  <p>Why is the use of return in this way making difference to the output?</p>\n</blockquote>\n\n<p>It is not the use of <code>return</code> that is making the difference. It is the absence of <code>print</code> that is making the difference.</p>\n"}], "owner": {"reputation": 4097, "user_id": 3571439, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/20569265dd8dc42e925e06a28524246e?s=128&d=identicon&r=PG", "display_name": "thinkingmonster", "link": "https://stackoverflow.com/users/3571439/thinkingmonster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 1, "accepted_answer_id": 35307052, "answer_count": 1, "score": 0, "last_activity_date": 1455080773, "creation_date": 1455079401, "last_edit_date": 1455080455, "question_id": 35306977, "link": "https://stackoverflow.com/questions/35306977/why-is-the-method-output-printed-first", "title": "Why is the method output printed first?", "body": "<p>I wrote the following:</p>\n\n<pre><code>greeting=\"i am awesome\"\nputs(\"I was saying that #{greeting}\")\n# =&gt; I was saying that i am awesome\n</code></pre>\n\n<p>When I change it to this:</p>\n\n<pre><code>def showman\n  print(\"I am awesome \")\nend\nputs(\"I was saying that #{showman}\")\n# =&gt; I am awesome I was saying that \n</code></pre>\n\n<p>why is the method output printed first, and then the string? Why is it not printing like <code>\"I was saying that I am awesome\"</code>? What can I do to make the output be as such?</p>\n\n<p>If I modify the <code>showman</code> function to:</p>\n\n<pre><code>def showman\n  return (\"I am awesome \")\nend\n</code></pre>\n\n<p>then it gives the desired output. Why is the use of <code>return</code> in this way making difference to the output?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows"], "comments": [{"owner": {"reputation": 17, "user_id": 3924275, "user_type": "registered", "profile_image": "https://graph.facebook.com/2539069/picture?type=large", "display_name": "David Dongjihn Suh", "link": "https://stackoverflow.com/users/3924275/david-dongjihn-suh"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1455078535, "post_id": 35306812, "comment_id": 58323636, "body": "@sawa I don&#39;t see why it broke"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1455086844, "post_id": 35306812, "comment_id": 58326683, "body": "Let me guess: because there is no method <code>content</code> in <code>Micropost</code> class? BTW, \u201cI don&#39;t see why it broke\u201d is still <i>not a question</i>."}], "answers": [{"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 1, "last_activity_date": 1455137949, "creation_date": 1455137949, "answer_id": 35325781, "question_id": 35306812, "link": "https://stackoverflow.com/questions/35306812/micropost-character-limit-error/35325781#35325781", "title": "micropost character limit error", "body": "<p>Make sure you have run this code:</p>\n\n<pre><code>$ bundle exec rake db:migrate\n</code></pre>\n\n<p>Then try your app again.</p>\n\n<hr>\n\n<p>If this doesn't fix the problem run this:</p>\n\n<pre><code>$ rails generate scaffold Micropost content:text user_id:integer\n</code></pre>\n\n<p>followed by:</p>\n\n<pre><code>$ bundle exec rake db:migrate\n</code></pre>\n\n<p>Then your app should work.</p>\n"}], "owner": {"reputation": 17, "user_id": 3924275, "user_type": "registered", "profile_image": "https://graph.facebook.com/2539069/picture?type=large", "display_name": "David Dongjihn Suh", "link": "https://stackoverflow.com/users/3924275/david-dongjihn-suh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1455137949, "creation_date": 1455078186, "question_id": 35306812, "link": "https://stackoverflow.com/questions/35306812/micropost-character-limit-error", "title": "micropost character limit error", "body": "<p>I am going through the ruby on rails tutorial by michael hartl.</p>\n\n<p>I am running rails on windows.</p>\n\n<p>The error appeared after I limited microposts to 140 characters.<a href=\"https://i.stack.imgur.com/7Y9Yn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7Y9Yn.png\" alt=\"app/models/micropost.rb\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/g0qz9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g0qz9.png\" alt=\"error page\"></a></p>\n"}]