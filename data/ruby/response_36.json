[{"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 5261961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/EBa0f.jpg?s=128&g=1", "display_name": "\u0424\u0430\u0440\u0441\u0443\u043a \u0424\u0430\u0440\u0441\u0435\u0439\u043a\u0438\u043d", "link": "https://stackoverflow.com/users/5261961/%d0%a4%d0%b0%d1%80%d1%81%d1%83%d0%ba-%d0%a4%d0%b0%d1%80%d1%81%d0%b5%d0%b9%d0%ba%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1442449583, "post_id": 32620745, "comment_id": 53091821, "body": "oh great, really helpful, can you add documentation about all like_this? methods"}, {"owner": {"reputation": 4180, "user_id": 1691511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36bf62da744cbd07d704eb3d0b27439?s=128&d=identicon&r=PG", "display_name": "ahmacleod", "link": "https://stackoverflow.com/users/1691511/ahmacleod"}, "reply_to_user": {"reputation": 55, "user_id": 5261961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/EBa0f.jpg?s=128&g=1", "display_name": "\u0424\u0430\u0440\u0441\u0443\u043a \u0424\u0430\u0440\u0441\u0435\u0439\u043a\u0438\u043d", "link": "https://stackoverflow.com/users/5261961/%d0%a4%d0%b0%d1%80%d1%81%d1%83%d0%ba-%d0%a4%d0%b0%d1%80%d1%81%d0%b5%d0%b9%d0%ba%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1442450640, "post_id": 32620745, "comment_id": 53092035, "body": "They all come from different places. <code>nil?</code> and <code>respond_to?</code> are part of core ruby. <code>present?</code> is part of ActiveSupport. There are many such meta methods."}], "tags": [], "owner": {"reputation": 4180, "user_id": 1691511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36bf62da744cbd07d704eb3d0b27439?s=128&d=identicon&r=PG", "display_name": "ahmacleod", "link": "https://stackoverflow.com/users/1691511/ahmacleod"}, "is_accepted": true, "score": 1, "last_activity_date": 1442449165, "creation_date": 1442449165, "answer_id": 32620745, "question_id": 32620612, "link": "https://stackoverflow.com/questions/32620612/check-instance-variable-in-rails/32620745#32620745", "title": "Check instance variable in Rails", "body": "<p>Assuming that <code>@article</code> has a <code>location</code> method, one typically uses the <code>present?</code> method for this purpose:</p>\n\n<pre><code>&lt;% if @article.location.present? %&gt;\n    ...\n&lt;% end %&gt;\n</code></pre>\n\n<p>You can substitute <code>nil?</code> if you want to be more strict about it (<code>present?</code> returns <code>false</code> for an empty string, which is usually what you want).</p>\n\n<p>If you're not sure that <code>@article</code> even has a <code>location</code> method, you can test for it first, using <code>respond_to?</code>:</p>\n\n<pre><code>&lt;% if @article.respond_to?(:location) &amp;&amp; @article.location.present? %&gt;\n    ...\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 5261961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/EBa0f.jpg?s=128&g=1", "display_name": "\u0424\u0430\u0440\u0441\u0443\u043a \u0424\u0430\u0440\u0441\u0435\u0439\u043a\u0438\u043d", "link": "https://stackoverflow.com/users/5261961/%d0%a4%d0%b0%d1%80%d1%81%d1%83%d0%ba-%d0%a4%d0%b0%d1%80%d1%81%d0%b5%d0%b9%d0%ba%d0%b8%d0%bd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 32620745, "answer_count": 1, "score": 0, "last_activity_date": 1442467669, "creation_date": 1442447908, "last_edit_date": 1442467669, "question_id": 32620612, "link": "https://stackoverflow.com/questions/32620612/check-instance-variable-in-rails", "title": "Check instance variable in Rails", "body": "<p>I don't understand how I must change an <code>if (condition)</code> to check for the presence of this variable.</p>\n\n<pre><code>&lt;%= if (@article.location != nil) %&gt;\n&lt;%= image_tag \"http://maps.google.com/maps/api/staticmap?size=450x300&amp;sensor=false&amp;zoom=16&amp;markers=#{@article.location.latitude}%2C#{@article.location.longitude}\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "edited": false, "score": 0, "creation_date": 1442445686, "post_id": 32620273, "comment_id": 53090924, "body": "What do you have in your model?"}, {"owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "edited": false, "score": 0, "creation_date": 1442445812, "post_id": 32620273, "comment_id": 53090954, "body": "I am hoping that your model looks like <code>class Empresa &lt; ActiveRecord::Base  end</code>"}, {"owner": {"reputation": 3, "user_id": 5344378, "user_type": "registered", "profile_image": "https://graph.facebook.com/938368349558024/picture?type=large", "display_name": "Hernan MB", "link": "https://stackoverflow.com/users/5344378/hernan-mb"}, "reply_to_user": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "edited": false, "score": 0, "creation_date": 1442445945, "post_id": 32620273, "comment_id": 53090998, "body": "class Empresa &lt; ActiveRecord::Base   belongs_to :localidad   attr_accessor :razon_social, :cuit, :domicilio, :localidad_id end"}, {"owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "edited": false, "score": 0, "creation_date": 1442446002, "post_id": 32620273, "comment_id": 53091014, "body": "Add it to your question, with proper formatting."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 5344378, "user_type": "registered", "profile_image": "https://graph.facebook.com/938368349558024/picture?type=large", "display_name": "Hernan MB", "link": "https://stackoverflow.com/users/5344378/hernan-mb"}, "edited": false, "score": 0, "creation_date": 1442446580, "post_id": 32620386, "comment_id": 53091180, "body": "Thanks, that was helpful."}, {"owner": {"reputation": 2306, "user_id": 1741654, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0401af2dd09da09b304326e4396d1d78?s=128&d=identicon&r=PG", "display_name": "rmosolgo", "link": "https://stackoverflow.com/users/1741654/rmosolgo"}, "reply_to_user": {"reputation": 3, "user_id": 5344378, "user_type": "registered", "profile_image": "https://graph.facebook.com/938368349558024/picture?type=large", "display_name": "Hernan MB", "link": "https://stackoverflow.com/users/5344378/hernan-mb"}, "edited": false, "score": 0, "creation_date": 1442446646, "post_id": 32620386, "comment_id": 53091191, "body": "Glad to hear it, don&#39;t forget to click the check-mark on on this answer if it solved your problem!  Enjoy learning ActiveRecord :)"}, {"owner": {"reputation": 3, "user_id": 5344378, "user_type": "registered", "profile_image": "https://graph.facebook.com/938368349558024/picture?type=large", "display_name": "Hernan MB", "link": "https://stackoverflow.com/users/5344378/hernan-mb"}, "edited": false, "score": 0, "creation_date": 1442446995, "post_id": 32620386, "comment_id": 53091254, "body": "there u have it.. (this was my 1st question as u can immagine), thanks again"}], "tags": [], "owner": {"reputation": 2306, "user_id": 1741654, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0401af2dd09da09b304326e4396d1d78?s=128&d=identicon&r=PG", "display_name": "rmosolgo", "link": "https://stackoverflow.com/users/1741654/rmosolgo"}, "is_accepted": true, "score": 2, "last_activity_date": 1442446200, "creation_date": 1442446200, "answer_id": 32620386, "question_id": 32620273, "link": "https://stackoverflow.com/questions/32620273/activerecordrelation-getting-fields-from-a-table/32620386#32620386", "title": "Activerecord::Relation: getting fields from a table", "body": "<p>ActiveRecord will <em>automatically</em> create accessors for columns in your database tables.</p>\n\n<p>When you define accessors with <code>attr_accessor</code>, you override those accessors. </p>\n\n<p>Try removing that call to <code>attr_accessor</code>, then your calls should go on to the database values!</p>\n"}], "owner": {"reputation": 3, "user_id": 5344378, "user_type": "registered", "profile_image": "https://graph.facebook.com/938368349558024/picture?type=large", "display_name": "Hernan MB", "link": "https://stackoverflow.com/users/5344378/hernan-mb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 0, "accepted_answer_id": 32620386, "answer_count": 1, "score": 0, "last_activity_date": 1442450597, "creation_date": 1442445433, "last_edit_date": 1442450597, "question_id": 32620273, "link": "https://stackoverflow.com/questions/32620273/activerecordrelation-getting-fields-from-a-table", "title": "Activerecord::Relation: getting fields from a table", "body": "<p>I'm trying to get an understanding about the inner features of Active Record playing with IRB.</p>\n\n<p>I have a small database with a few tables which I created using SQL. Then I connected Active Record to that database using a Ruby script. I already loaded the models, which are classes with the tables' names singularized, and made all attributes accessible via <code>attr_accessor</code> but I only get the id and the rest return nil when trying to get them. Any clue?</p>\n\n<p>I have the table \"empresas\" with four records and the class Empresa:</p>\n\n<pre><code>2.2.1 :001 &gt; load 'config.db'\n =&gt; true \n2.2.1 :002 &gt; e = Empresa.all\n =&gt; #&lt;ActiveRecord::Relation [#&lt;Empresa id: 1, razon_social: \"Holbrook Co.\", cuit: \"33-22564787-4\", domicilio: \"San Lorenzo 336\", localidad_id: 7&gt;, #&lt;Empresa id: 2, razon_social: \"Marshfield Llc.\", cuit: \"30-13547542-0\", domicilio: \"Av. de Mayo 110\", localidad_id: 2&gt;, #&lt;Empresa id: 3, razon_social: \"Iron Cobra Inc.\", cuit: \"30-24652120-8\", domicilio: \"9 de Julio 332\", localidad_id: 20&gt;, #&lt;Empresa id: 4, razon_social: \"Apple Inc.\", cuit: \"30-43753246-4\", domicilio: \"Riverside Road 342\", localidad_id: 4&gt;]&gt; \n2.2.1 :003 &gt; e[2]\n =&gt; #&lt;Empresa id: 3, razon_social: \"Iron Cobra Inc.\", cuit: \"30-24652120-8\", domicilio: \"9 de Julio 332\", localidad_id: 20&gt; \n2.2.1 :004 &gt; e[2].id\n =&gt; 3 \n2.2.1 :005 &gt; e[2].razon_social\n =&gt; nil \n2.2.1 :006 &gt; e[2].cuit\n =&gt; nil \n</code></pre>\n\n<p>The model looks like this:</p>\n\n<pre><code>class Empresa &lt; ActiveRecord::Base\n  belongs_to :localidad\n  attr_accessor :razon_social, :cuit, :domicilio, :localidad_id\nend\n</code></pre>\n\n<p>This model is required in the script that makes the connection to the database, along with <code>active_record</code> and <code>fb</code> (I'm using firebird for the database).</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 617, "user_id": 1323985, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d7423650037938845e9288778afd2eaa?s=128&d=identicon&r=PG", "display_name": "Al D", "link": "https://stackoverflow.com/users/1323985/al-d"}, "edited": false, "score": 0, "creation_date": 1442443787, "post_id": 32619847, "comment_id": 53090414, "body": "Sorted it. I needed the following <code>&lt;%= f.select :team1_id, options_from_collection_for_select(@teams, &#39;id&#39;, &#39;name&#39;) %&gt;</code>. I also needed to allow <code>:team1_id</code> through the strong parameters. Should I delete the question?"}, {"owner": {"reputation": 1344, "user_id": 1866752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6I18d.jpg?s=128&g=1", "display_name": "Saiqul Haq", "link": "https://stackoverflow.com/users/1866752/saiqul-haq"}, "edited": false, "score": 0, "creation_date": 1442443888, "post_id": 32619847, "comment_id": 53090448, "body": "I think it should @match.update_attributes(match_params)"}, {"owner": {"reputation": 6644, "user_id": 1219460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f8e98f29daa5c09c5fd1c2a09f72750?s=128&d=identicon&r=PG", "display_name": "Carlos Ramirez III", "link": "https://stackoverflow.com/users/1219460/carlos-ramirez-iii"}, "edited": false, "score": 1, "creation_date": 1442464124, "post_id": 32619847, "comment_id": 53095234, "body": "@AlD I would post your solution as an answer and accept it so that others know it has been resolved."}], "answers": [{"tags": [], "owner": {"reputation": 617, "user_id": 1323985, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d7423650037938845e9288778afd2eaa?s=128&d=identicon&r=PG", "display_name": "Al D", "link": "https://stackoverflow.com/users/1323985/al-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1442481552, "last_edit_date": 1442481552, "creation_date": 1442480984, "answer_id": 32626522, "question_id": 32619847, "link": "https://stackoverflow.com/questions/32619847/rails-options-from-collection-for-select-throwing-object-expected-got-string-er/32626522#32626522", "title": "Rails options_from_collection_for_select throwing object expected, got string error", "body": "<p>Ok I sorted this. I needed to change the <code>&lt;%= f.select :team1</code> to <code>&lt;%= f.select :team1_id</code> and so on (see the adjusted code below). I also needed to allow <code>:team1_id</code> through as a strong paramamter in the controller here:-</p>\n\n<pre><code>  def match_params\n    params.require(:match).permit(:name, :short_name, :date, :venue_id, :team1_id, :team2_id,..........)\n  end\n</code></pre>\n\n<p>My <code>views/matches/_form.html.erb:</code>now looks like this:-</p>\n\n<pre><code>    &lt;div class=\"row text-center bottom-buffer-small\"&gt;        \n\n      &lt;div class=\"col-sm-5\"&gt;\n\n        &lt;% if f.object.team1.nil? %&gt;\n          &lt;%= f.select :team1_id, options_from_collection_for_select(@teams, 'id', 'name') %&gt;\n        &lt;% else %&gt;   \n          &lt;%= f.select :team1_id, options_from_collection_for_select(@teams, 'id', 'name', f.object.team1.id) %&gt;\n        &lt;% end %&gt; \n\n      &lt;/div&gt;\n\n      &lt;div class=\"col-sm-2\"&gt;\n        &lt;b&gt;v&lt;/b&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"col-sm-5\"&gt;\n\n        &lt;% if f.object.team2.nil? %&gt;\n          &lt;%= f.select :team2_id, options_from_collection_for_select(@teams, 'id', 'name') %&gt;\n        &lt;% else %&gt;   \n          &lt;%= f.select :team2_id, options_from_collection_for_select(@teams, 'id', 'name', f.object.team2.id) %&gt;\n        &lt;% end %&gt;\n\n      &lt;/div&gt;\n\n    &lt;/div&gt;  \n</code></pre>\n"}], "owner": {"reputation": 617, "user_id": 1323985, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d7423650037938845e9288778afd2eaa?s=128&d=identicon&r=PG", "display_name": "Al D", "link": "https://stackoverflow.com/users/1323985/al-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442481552, "creation_date": 1442442692, "last_edit_date": 1442450770, "question_id": 32619847, "link": "https://stackoverflow.com/questions/32619847/rails-options-from-collection-for-select-throwing-object-expected-got-string-er", "title": "Rails options_from_collection_for_select throwing object expected, got string error", "body": "<p>I'm trying to use a form to edit a \"Match\" object, specifically the <code>team1</code> and <code>team2</code> attributes which are references to <code>Team</code> objects. But I keep getting the error</p>\n\n<pre><code>Team(#70077411807740) expected, got String(#18738520)\n</code></pre>\n\n<p>Have I wired it up wrong? Am I passing the wrong value in the <code>options from collection_for_select</code>?</p>\n\n<p>The form itself looks fine and is correctly displaying the saved Team.</p>\n\n<p>models/team.rb:</p>\n\n<pre><code>class Team &lt; ActiveRecord::Base\n  has_many :matches\nend\n</code></pre>\n\n<p>models/match.rb:</p>\n\n<pre><code>class Match &lt; ActiveRecord::Base\n  belongs_to :team1, class_name: 'Team'\n  belongs_to :team2, class_name: 'Team'   \nend\n</code></pre>\n\n<p>controllers/matches_controller.rb:</p>\n\n<pre><code>def update\n  if !current_admin\n    flash[:alert] = \"You are not authorised for that action\"\n    redirect_to matches_path\n  else  \n    puts \"The updated match parameters are:\"\n    puts match_params.inspect \n    @match.update(match_params)\n    redirect_to edit_match_path(@match.id)\n  end  \nend\n\nprivate\n\ndef match_params\n  params.require(:match).permit(:round_id, :pool_id, :name, :short_name, :date, :venue_id, :team1, :team2, :knockout_desc1, :knockout_desc2, :team1_score, :team1_tries, :team1_points, :team2_score, :team2_tries, :team2_points, :winner, :tries, :margin_id, :played)\nend\n</code></pre>\n\n<p>views/matches/_form.html.erb:</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n\n   &lt;h1 class=\"text-center\"&gt;Edit Match &lt;%= @match.id %&gt;&lt;/h1&gt;\n\n\n    &lt;%= form_for(@match) do |f| %&gt;\n      &lt;% if @match.errors.any? %&gt;\n        &lt;div id=\"error_explanation\"&gt;\n          &lt;h2&gt;&lt;%= pluralize(@match.errors.count, \"error\") %&gt; prohibited this match from being saved:&lt;/h2&gt;\n\n          &lt;ul&gt;\n          &lt;% @match.errors.full_messages.each do |message| %&gt;\n            &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n          &lt;% end %&gt;\n          &lt;/ul&gt;\n        &lt;/div&gt;\n      &lt;% end %&gt;\n\n      &lt;div class=\"form-section\"&gt;\n\n        &lt;div class=\"row text-center bottom-buffer-small\"&gt;\n\n          &lt;div class=\"col-sm-5\"&gt;\n            &lt;span class=\"header-1\"&gt;Team 1&lt;/span&gt;\n          &lt;/div&gt;\n\n          &lt;div class=\"col-sm-2\"&gt;\n\n          &lt;/div&gt;\n\n          &lt;div class=\"col-sm-5\"&gt;\n            &lt;span class=\"header-1\"&gt;Team 2&lt;/span&gt;\n          &lt;/div&gt; \n\n        &lt;/div&gt;   \n\n        &lt;div class=\"row text-center bottom-buffer-small\"&gt;        \n\n          &lt;div class=\"col-sm-5\"&gt;\n\n            &lt;% if f.object.team1.nil? %&gt;\n              &lt;%= f.select :team1, options_from_collection_for_select(@teams, 'id', 'name') %&gt;\n            &lt;% else %&gt;   \n              &lt;%= f.select :team1, options_from_collection_for_select(@teams, 'id', 'name', f.object.team1.id) %&gt;\n            &lt;% end %&gt; \n\n          &lt;/div&gt;\n\n          &lt;div class=\"col-sm-2\"&gt;\n            &lt;b&gt;v&lt;/b&gt;\n          &lt;/div&gt;\n\n          &lt;div class=\"col-sm-5\"&gt;\n\n            &lt;% if f.object.team1.nil? %&gt;\n              &lt;%= f.select :team2, options_from_collection_for_select(@teams, 'id', 'name') %&gt;\n            &lt;% else %&gt;   \n              &lt;%= f.select :team2, options_from_collection_for_select(@teams, 'id', 'name', f.object.team2.id) %&gt;\n            &lt;% end %&gt;\n\n          &lt;/div&gt;\n\n        &lt;/div&gt;  \n\n      &lt;/div&gt;\n\n\n      &lt;div class=\"actions\"&gt;\n        &lt;%= f.submit %&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n\n\n  &lt;%= link_to 'Show', @match %&gt; |\n  &lt;%= link_to 'Back', matches_path %&gt;\n\n&lt;/div&gt;\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>        Team(#70077413116680) expected, got String(#18738520)\n\n        Extracted source (around line #51):\n        49\n        50\n        51\n        52\n        53\n        54\n\n              puts \"The updated match parameters are:\"\n              puts match_params.inspect \n              @match.update(match_params)\n              redirect_to edit_match_path(@match.id)\n            end  \n          end\n\n        Rails.root: /home/alzer/workspace/pawchallenge\n\n        Application Trace | Framework Trace | Full Trace\n        app/controllers/matches_controller.rb:51:in `update'\n        Request\n\n        Parameters:\n\n        {\"utf8\"=&gt;\"\u2713\",\n         \"_method\"=&gt;\"patch\",\n         \"authenticity_token\"=&gt;\"SwlPKcm0grrgfggghkjdjhgjhg00s7767hsjkjkAGhzGwE2GbByFUi39p7ZI=\",\n         \"match\"=&gt;{\"team1\"=&gt;\"11\",\n         \"team2\"=&gt;\"12\"},\n         \"commit\"=&gt;\"Update Match\",\n         \"id\"=&gt;\"1\"}\n</code></pre>\n"}, {"tags": ["ruby", "ubuntu", "rubygems", "jekyll", "ubuntu-15.04"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1442451117, "post_id": 32619531, "comment_id": 53092152, "body": "&quot;<code>Network is unreachable</code>&quot; is your clue. It might be temporary if the site is down, or it might be permanent due to a routing problem from your site/network/host. Whatever, it isn&#39;t a Ruby problem."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5344245"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1442476083, "post_id": 32619531, "comment_id": 53100005, "body": "I have tried to ping other websites from the console, have even installed new programs, not sure if I am behind a proxy?"}, {"owner": {"reputation": 16252, "user_id": 1993501, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8aff1b9e8079997cca12f8f08cacbb62?s=128&d=identicon&r=PG", "display_name": "edi9999", "link": "https://stackoverflow.com/users/1993501/edi9999"}, "edited": false, "score": 0, "creation_date": 1460197663, "post_id": 32619531, "comment_id": 60636797, "body": "Same issue here, however even adding ipv6 to vultr doesn&#39;t help"}], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 1211295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eabd762455f140557f9026b494e4bc4b?s=128&d=identicon&r=PG", "display_name": "xbin999", "link": "https://stackoverflow.com/users/1211295/xbin999"}, "is_accepted": false, "score": 1, "last_activity_date": 1442909142, "creation_date": 1442909142, "answer_id": 32711601, "question_id": 32619531, "link": "https://stackoverflow.com/questions/32619531/cannot-install-ruby-gems-ubuntu-15-04-network-is-unreachable/32711601#32711601", "title": "Cannot install Ruby Gems (Ubuntu 15.04) - &quot;Network is unreachable&quot;", "body": "<p>The \"2001:19f0:300:1704::6\" is ipv6 address of vultr vps's DNS server. You can add ipv6 address in the console of server management, restart the server. </p>\n"}, {"tags": [], "owner": {"reputation": 2619, "user_id": 183350, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cd0ac1afd622386fcc12926a23f5848c?s=128&d=identicon&r=PG", "display_name": "Paul d&#39;Aoust", "link": "https://stackoverflow.com/users/183350/paul-daoust"}, "is_accepted": false, "score": 0, "last_activity_date": 1461184397, "creation_date": 1461184397, "answer_id": 36754603, "question_id": 32619531, "link": "https://stackoverflow.com/questions/32619531/cannot-install-ruby-gems-ubuntu-15-04-network-is-unreachable/36754603#36754603", "title": "Cannot install Ruby Gems (Ubuntu 15.04) - &quot;Network is unreachable&quot;", "body": "<p>It seems to be some sort of issue with name resolution in Vultr's setup. As a temporary fix, try opening <code>/etc/resolv.conf</code> and putting the IPv6 nameserver IP <em>underneath</em> the IPv4 nameserver IP.</p>\n\n<p>I'm seeking the wisdom Vultr forums and will hopefully update this answer with a more permanent fix if I get any good answers.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5344245"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 674, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1461184397, "creation_date": 1442440898, "last_edit_date": 1454027120, "question_id": 32619531, "link": "https://stackoverflow.com/questions/32619531/cannot-install-ruby-gems-ubuntu-15-04-network-is-unreachable", "title": "Cannot install Ruby Gems (Ubuntu 15.04) - &quot;Network is unreachable&quot;", "body": "<p>I'm trying to install Jekyll on a fresh Vultr VPS running Ubuntu 15.04. I have installed Apache2 manually for the time being (I intend to scrap it for NodeJS later).</p>\n\n<p>I am trying to install Jekyll however it is giving me the following error:</p>\n\n<pre><code>********@************:~$ gem install jekyll\nERROR:  While executing gem ... (Errno::ENETUNREACH)\n    Network is unreachable - sendto(2) for \"2001:19f0:300:1704::6\" port 53\n\n********@************:~$ gem update --system\nERROR:  While executing gem ... (Errno::ENETUNREACH)\n    Network is unreachable - sendto(2) for \"2001:19f0:300:1704::6\" port 53\n</code></pre>\n\n<p>I have the latest version of ruby installed (as shown below), I've noticed in some other forums that I might have to install (downgrade) to ruby1.9.1-dev?</p>\n\n<pre><code>********@************:~$ ruby -v\nruby 2.1.2p95 (2014-05-08) [x86_64-linux-gnu]\n</code></pre>\n\n<p>I am not sure what is happening, and I have searched and searched.</p>\n\n<p>Could anyone please shed some light on my situation?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "eager-loading"], "comments": [{"owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1442440834, "post_id": 32619420, "comment_id": 53089495, "body": "It raises an exception on <code>event.foo</code> but not <code>event.has_orders?</code>"}, {"owner": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "reply_to_user": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1442440938, "post_id": 32619420, "comment_id": 53089533, "body": "@eirikir yep. <code>has_orders?</code> passes. I&#39;m doing another iteration for <code>.orders.each</code> and that&#39;s when the exception gets thrown"}, {"owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1442441023, "post_id": 32619420, "comment_id": 53089571, "body": "but if <code>event</code> is <code>nil</code> it would raise it in either case... what&#39;s the method that&#39;s &quot;undefined&quot; in the error?"}, {"owner": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "reply_to_user": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1442441090, "post_id": 32619420, "comment_id": 53089589, "body": "yes, my mistake. I should&#39;ve mentioned another iteration. Edited the question."}, {"owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1442442858, "post_id": 32619420, "comment_id": 53090142, "body": "how is <code>has_orders?</code> defined? what if you replace that with <code>event.orders.present?</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "edited": false, "score": 0, "creation_date": 1442468121, "post_id": 32620228, "comment_id": 53096450, "body": "mmmaan, I kept checking for <code>has_orders?</code> in production, but never actually checked for <code>foo</code> which was <code>nil</code> for one of the orders. Thanks!"}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": 1, "last_activity_date": 1442445866, "last_edit_date": 1442445866, "creation_date": 1442445113, "answer_id": 32620228, "question_id": 32619420, "link": "https://stackoverflow.com/questions/32619420/undefined-method-for-nil-even-after-a-conditional/32620228#32620228", "title": "Undefined Method for Nil even after a conditional", "body": "<blockquote>\n  <p>Everything works in development, but not in production</p>\n</blockquote>\n\n<p>It sounds like your data changed.  What changed?  Check this out:</p>\n\n<pre><code>class Order\n  def foo\n    puts 'hello'\n  end\nend\n\norder = Order.new\norder.foo\n\n\norders = [\n  nil,\n  nil,\n  nil,\n]\n\norders.each do |order|\n  order.foo\nend\n\n--output:--\nhello\n1.rb:18:in `block in &lt;main&gt;': undefined method `foo' for nil:NilClass (NoMethodError)\n    from 1.rb:17:in `each'\n    from 1.rb:17:in `&lt;main&gt;'\n</code></pre>\n\n<p>The orders array exists, but the error is the same as yours.  In other words, your <code>Event</code> could pass the <code>has_orders?</code> test, but you could still get that error.  You need to figure out why the orders array for an Event is being populated with nil values.</p>\n\n<p>To avoid the error, you <em>could</em> write:</p>\n\n<pre><code>  orders.each do |order|\n    order.foo if order\n  end\n</code></pre>\n"}], "owner": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 32620228, "answer_count": 1, "score": 0, "last_activity_date": 1442445866, "creation_date": 1442440467, "last_edit_date": 1442441161, "question_id": 32619420, "link": "https://stackoverflow.com/questions/32619420/undefined-method-for-nil-even-after-a-conditional", "title": "Undefined Method for Nil even after a conditional", "body": "<p>I have a variable called <code>@events</code>, which is a collection of <code>Listings</code> <code>.where(category: 'Tickets')</code>. Events (<code>:events</code>) are <code>eager_loaded</code> from the <code>User</code> model. In my view I have:</p>\n\n<pre><code>&lt;% for event in @events do %&gt;\n  &lt;% if event.has_orders? %&gt;\n    ...\n    &lt;% orders.each do |order| %&gt;\n      &lt;%= order.foo %&gt;\n    &lt;% end %&gt;\n    ...\n  &lt;% else %&gt;\n    ...\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Everything works in development, but not in production. When I iterate through <code>@events</code> in my view, the conditional gets ignored and <code>&lt;%= order.foo %&gt;</code> throws <code>undefined method [foo] for nil class</code>. Is this happening because <code>:events</code> are <code>eager_loaded</code> (preloaded)? If so, what would be the optimal solution?</p>\n"}, {"tags": ["ruby", "haml"], "answers": [{"comments": [{"owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "edited": false, "score": 0, "creation_date": 1442449829, "post_id": 32620807, "comment_id": 53091878, "body": "I had just gotten started hacking into haml&#39;s code in an adventure that would&#39;ve resulted in this exact method being written by me. You answered just in time for me to not reinvent the wheel, thank you!"}], "tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 1, "last_activity_date": 1442449705, "creation_date": 1442449705, "answer_id": 32620807, "question_id": 32619374, "link": "https://stackoverflow.com/questions/32619374/how-to-do-something-twice-in-different-branches-in-haml/32620807#32620807", "title": "How to do something twice in different branches in haml", "body": "<p>You need to use <a href=\"http://haml.info/docs/yardoc/Haml/Helpers.html#capture_haml-instance_method\" rel=\"nofollow\"><code>capture_haml</code></a>, otherwise Haml will write directly to the output when the proc is called:</p>\n\n<pre><code>- say_hi = proc do |to_who|\n  - capture_haml do\n    .himessage\n      Hi\n      = to_who\n.foo\n  .bar\n    = say_hi.call \"bob\"\n  = say_hi.call \"joe\"\n</code></pre>\n"}], "owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 32620807, "answer_count": 1, "score": 0, "last_activity_date": 1442449745, "creation_date": 1442440238, "last_edit_date": 1442449745, "question_id": 32619374, "link": "https://stackoverflow.com/questions/32619374/how-to-do-something-twice-in-different-branches-in-haml", "title": "How to do something twice in different branches in haml", "body": "<p>I have code somewhat like this:</p>\n\n<pre><code>- say_hi = proc do |to_who|\n  .himessage\n    Hi\n    = to_who\n.foo\n  .bar\n    = say_hi.call \"bob\"\n  = say_hi.call \"joe\"\n</code></pre>\n\n<p>The output I want would be:</p>\n\n<pre><code>&lt;div class='foo'&gt;\n  &lt;div class='bar'&gt;\n    &lt;div class='himessage'&gt;\n      Hi\n      bob\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class='himessage'&gt;\n    Hi\n    joe\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Instead I get:</p>\n\n<pre><code>&lt;div class='himessage'&gt;\n  Hi\n  bob\n&lt;/div&gt;\n&lt;div class='himessage'&gt;\n  Hi\n  joe\n&lt;/div&gt;\n&lt;div class='foo'&gt;\n  &lt;div class='bar'&gt;\n    2\n  &lt;/div&gt;\n  1\n&lt;/div&gt;\n</code></pre>\n\n<p>It seems that the text is getting inserted back where the proc was defined, instead of where it's being called. I do not have a good enough understanding of haml's internals to know why this is happening, and I care about is: <strong>How do I get the desired output while keeping my code dry?</strong></p>\n\n<p><sup><sub>Note: In my actual project the equivelent to the <code>say_hi</code> proc is much longer and more complicated, and so simply repeating it twice would be very ugly. The above is simply the easiest case that would cause this problem without an obvious solution.</sub></sup></p>\n"}, {"tags": ["ruby", "mechanize"], "answers": [{"tags": [], "owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "is_accepted": true, "score": 0, "last_activity_date": 1442446954, "creation_date": 1442446954, "answer_id": 32620496, "question_id": 32619314, "link": "https://stackoverflow.com/questions/32619314/how-to-get-an-element-node-using-mechanize/32620496#32620496", "title": "How to get an element node using Mechanize", "body": "<p>The id for that would be:</p>\n\n<pre><code>page.form.form_node['id']\n</code></pre>\n"}], "owner": {"reputation": 6268, "user_id": 503831, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/992c174c48fa4dadacb03854dbf7ade8?s=128&d=identicon&r=PG", "display_name": "Arnold Roa", "link": "https://stackoverflow.com/users/503831/arnold-roa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 1, "accepted_answer_id": 32620496, "answer_count": 1, "score": 0, "last_activity_date": 1442451237, "creation_date": 1442439992, "last_edit_date": 1442451237, "question_id": 32619314, "link": "https://stackoverflow.com/questions/32619314/how-to-get-an-element-node-using-mechanize", "title": "How to get an element node using Mechanize", "body": "<p>I'm using Mechanize.</p>\n\n<p>How I can obtain the element node to get a particular attribute? I have:</p>\n\n<pre><code> page.form\n</code></pre>\n\n<p>And I want to get the id of that element.</p>\n\n<p>I tried things like:</p>\n\n<pre><code> page.form.attribute['id']\n page.form.attr 'id'\n</code></pre>\n\n<p>with no luck. I'm not interested only in the id, but in the ability to get any attribute.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "heroku"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1442439216, "post_id": 32619098, "comment_id": 53088784, "body": "install the gmp library?"}, {"owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 1, "creation_date": 1442439246, "post_id": 32619098, "comment_id": 53088802, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/16710047/usr-bin-ld-cannot-find-lnameofthelibrary\">usr/bin/ld: cannot find -l&lt;nameOfTheLibrary&gt;</a>"}, {"owner": {"reputation": 198, "user_id": 3667684, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b0b58f197a8adf2da0ec331aa3d51540?s=128&d=identicon&r=PG", "display_name": "Aiyoyo", "link": "https://stackoverflow.com/users/3667684/aiyoyo"}, "edited": false, "score": 0, "creation_date": 1442442651, "post_id": 32619098, "comment_id": 53090076, "body": "Thanks Marc B! It worked. Stuck with other heroku deployment problems now."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1442451296, "post_id": 32619098, "comment_id": 53092196, "body": "<a href=\"http://ruby-doc.org/stdlib-2.2.3/libdoc/json/rdoc/index.html\" rel=\"nofollow noreferrer\">JSON is built into Ruby</a>. Why are you trying to reinstall it?"}], "answers": [{"tags": [], "owner": {"reputation": 235, "user_id": 4045744, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hiS1SRWpNhs/AAAAAAAAAAI/AAAAAAAAAjU/-sdEaCHsJjU/photo.jpg?sz=128", "display_name": "Wojtek Kosak G\u0142&#243;wczewski", "link": "https://stackoverflow.com/users/4045744/wojtek-kosak-g%c5%82%c3%b3wczewski"}, "is_accepted": true, "score": 15, "last_activity_date": 1443706494, "creation_date": 1443706494, "answer_id": 32888990, "question_id": 32619098, "link": "https://stackoverflow.com/questions/32619098/unable-to-install-json-ubuntu-14-04-rails/32888990#32888990", "title": "Unable to install json - Ubuntu 14.04 - Rails", "body": "<p>I had the same problem. You need to install <code>libgmp-dev</code></p>\n\n<p>Run <code>sudo apt-get install libgmp-dev</code> fix the problem.</p>\n"}], "owner": {"reputation": 198, "user_id": 3667684, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b0b58f197a8adf2da0ec331aa3d51540?s=128&d=identicon&r=PG", "display_name": "Aiyoyo", "link": "https://stackoverflow.com/users/3667684/aiyoyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1912, "favorite_count": 0, "accepted_answer_id": 32888990, "answer_count": 1, "score": 4, "last_activity_date": 1443706494, "creation_date": 1442439028, "question_id": 32619098, "link": "https://stackoverflow.com/questions/32619098/unable-to-install-json-ubuntu-14-04-rails", "title": "Unable to install json - Ubuntu 14.04 - Rails", "body": "<pre><code>gem install json\nBuilding native extensions.  This could take a while...\nERROR:  Error installing json:\n    ERROR: Failed to build gem native extension.\n\n    /home/user/.rvm/rubies/ruby-2.2.3/bin/ruby -r ./siteconf20150916-3216-1xudd6p.rb extconf.rb\ncreating Makefile\n\nmake \"DESTDIR=\" clean\n\nmake \"DESTDIR=\"\ncompiling generator.c\nlinking shared-object json/ext/generator.so\n/usr/bin/ld: cannot find -lgmp\ncollect2: error: ld returned 1 exit status\nmake: *** [generator.so] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /home/user/.rvm/gems/ruby-2.2.3/gems/json-1.8.3 for inspection.\nResults logged to /home/user/.rvm/gems/ruby-2.2.3/extensions/x86_64-linux/2.2.0/json-1.8.3/gem_make.out\n</code></pre>\n\n<p>Hey. I'm trying to push to heroku but hit a dead end with this. First, there was the sqlit3 problem. Now, I'm unable to install json when I type bundle. What should I do now?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby", "proc"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1442439726, "post_id": 32619081, "comment_id": 53089001, "body": "See @UriAgassi&#39;s answer <a href=\"http://stackoverflow.com/questions/23695653/can-you-supply-arguments-to-the-mapmethod-syntax-in-ruby/23711606#23711606\">here</a>. (Not a dup.)"}], "answers": [{"tags": [], "owner": {"reputation": 25126, "user_id": 578288, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5b2b185c814bb25f2f95a1152e58f033?s=128&d=identicon&r=PG", "display_name": "Rory O&#39;Kane", "link": "https://stackoverflow.com/users/578288/rory-okane"}, "is_accepted": false, "score": 1, "last_activity_date": 1442438953, "creation_date": 1442438953, "answer_id": 32619082, "question_id": 32619081, "link": "https://stackoverflow.com/questions/32619081/argumenterror-0-for-1-when-trying-to-use-method-as-block-like-my-method/32619082#32619082", "title": "ArgumentError (0 for 1) when trying to use method as block like `&amp;my_method`", "body": "<p>When you write</p>\n\n<pre><code>nums.select( &amp;num_i_want? )\n</code></pre>\n\n<p>your code is actually being parsed like <code>&amp; num_i_want?()</code>. First <code>num_i_want?</code> is called with no arguments, and <em>then</em> the ampersand operator is applied. Your problem is that you can\u2019t refer to a method directly by name.</p>\n\n<p>The simplest way to refer to a method is by passing a symbol to <a href=\"http://ruby-doc.org/core-2.2.3/Object.html#method-i-method\" rel=\"nofollow\"><code>Object#method</code></a>:</p>\n\n<pre><code>nums.select( &amp;method(:num_i_want?) )\n#=&gt; [2, 4]\n</code></pre>\n\n<p>If you are worried that using <code>Object#method</code> combined with <code>&amp;</code> makes the code too clever and hard-to-read, the alternative is passing a normal block that just wraps <code>num_i_want?</code>:</p>\n\n<pre><code>nums.select { |num| num_i_want?(num) }\n#=&gt; [2, 4]\n</code></pre>\n"}], "owner": {"reputation": 25126, "user_id": 578288, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5b2b185c814bb25f2f95a1152e58f033?s=128&d=identicon&r=PG", "display_name": "Rory O&#39;Kane", "link": "https://stackoverflow.com/users/578288/rory-okane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442438953, "creation_date": 1442438953, "question_id": 32619081, "link": "https://stackoverflow.com/questions/32619081/argumenterror-0-for-1-when-trying-to-use-method-as-block-like-my-method", "title": "ArgumentError (0 for 1) when trying to use method as block like `&amp;my_method`", "body": "<p>Let\u2019s say I have this method <code>num_i_want?</code>, and I want to use it with <code>select</code> to filter my <code>nums</code> array.</p>\n\n<pre><code>def num_i_want?(num)\n  num % 2 == 0\nend\n\nnums = [1, 2, 3, 4]\n</code></pre>\n\n<p>I try to use the method as a block using the unary ampersand operator:</p>\n\n<pre><code>nums.select( &amp;num_i_want? )\n</code></pre>\n\n<p>But I get this error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ArgumentError: wrong number of arguments (0 for 1)\n    from (irb):1:in `num_i_want?'\n    from (irb):6\n</code></pre>\n\n<p>Why am I getting this error? And what is the simplest code I can use instead?</p>\n\n<p>I know that <code>&amp;:num_i_want?</code> doesn\u2019t work. That tries to call <code>num_i_want?</code> on each number, which raises <code>NoMethodError</code> because <code>Integer#num_i_want?</code> doesn\u2019t exist.</p>\n\n<p>Of course, I could use <code>&amp;:even?</code> to call <a href=\"http://ruby-doc.org/core-2.2.3/Integer.html#method-i-even-3F\" rel=\"nofollow\"><code>Integer#even?</code></a>, but let\u2019s pretend the implementation of <code>num_i_want?</code> is more complicated than that.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "amazon-ec2", "mina"], "answers": [{"comments": [{"owner": {"reputation": 8117, "user_id": 1207687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cOUI4.jpg?s=128&g=1", "display_name": "Wes Foster", "link": "https://stackoverflow.com/users/1207687/wes-foster"}, "edited": false, "score": 0, "creation_date": 1442587533, "post_id": 32646123, "comment_id": 53156247, "body": "It might help if you provide an example of what you&#39;re talking about. Your answer is very short"}, {"owner": {"reputation": 5455, "user_id": 393021, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5761f8f81bb258e64b585889481ef25c?s=128&d=identicon&r=PG", "display_name": "iGbanam", "link": "https://stackoverflow.com/users/393021/igbanam"}, "edited": false, "score": 0, "creation_date": 1442591239, "post_id": 32646123, "comment_id": 53158741, "body": "an example would be nice"}, {"owner": {"reputation": 311, "user_id": 2870336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf81b6bd6ea15c35c2b8aebf11931acf?s=128&d=identicon&r=PG&f=1", "display_name": "Kjell", "link": "https://stackoverflow.com/users/2870336/kjell"}, "edited": false, "score": 0, "creation_date": 1480937967, "post_id": 32646123, "comment_id": 69155837, "body": "If you run into this, carefully check if you can ssh to user@domain, use copy and paste to fetch username and domain (ip) from your deploy.rb"}], "tags": [], "owner": {"reputation": 399, "user_id": 719661, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f52d8660c0c8d98223778a71ba89844a?s=128&d=identicon&r=PG&f=1", "display_name": "dcalixto", "link": "https://stackoverflow.com/users/719661/dcalixto"}, "is_accepted": false, "score": 0, "last_activity_date": 1442560923, "creation_date": 1442560923, "answer_id": 32646123, "question_id": 32618931, "link": "https://stackoverflow.com/questions/32618931/mina-operation-timed-out/32646123#32646123", "title": "MIna Operation timed out", "body": "<p>use domain name instead of ip.</p>\n"}], "owner": {"reputation": 399, "user_id": 719661, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f52d8660c0c8d98223778a71ba89844a?s=128&d=identicon&r=PG&f=1", "display_name": "dcalixto", "link": "https://stackoverflow.com/users/719661/dcalixto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1442560923, "creation_date": 1442438397, "question_id": 32618931, "link": "https://stackoverflow.com/questions/32618931/mina-operation-timed-out", "title": "MIna Operation timed out", "body": "<p>Someone is getting the same issue trying to deploy using mina on EC2?</p>\n\n<blockquote>\n  <p>ssh: connect to host 100.10.10.10 port 22: Operation timed out</p>\n  \n  <p>! Command failed. Failed with status 1 (255)</p>\n</blockquote>\n\n<p><strong>my domain configuration:</strong></p>\n\n<pre><code>set :domain, '100.10.10.10'\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "is_accepted": false, "score": 1, "last_activity_date": 1442437745, "creation_date": 1442437745, "answer_id": 32618752, "question_id": 32618605, "link": "https://stackoverflow.com/questions/32618605/how-best-do-i-guard-against-undefined-attributes/32618752#32618752", "title": "How best do I guard against undefined attributes?", "body": "<p>You need to check for these conditions in each of the methods and decide what is the right response (return nil, raise an error, etc.)  Not knowing your application it seems reasonable that <code>months_to_maturity</code> could return <code>nil</code> if <code>maturity_date</code> is also nil.  Assuming you agree that in this case <code>nil</code> means unknown or un-calculatable.</p>\n\n<p>Then in <code>penalty</code> you could return <code>nil</code> if <code>months_to_maturity</code> returned <code>nil</code>. And similar for any other values that might be nil or result in an invalid calculation.</p>\n\n<p>Or you can wrap the whole method in a begin/rescue block checking for ZeroDivisionError, but that might mask other issues.</p>\n"}, {"tags": [], "owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "is_accepted": true, "score": 3, "last_activity_date": 1442437795, "creation_date": 1442437795, "answer_id": 32618775, "question_id": 32618605, "link": "https://stackoverflow.com/questions/32618605/how-best-do-i-guard-against-undefined-attributes/32618775#32618775", "title": "How best do I guard against undefined attributes?", "body": "<p><code>nil</code> is perfectly valid for data that can be undefined (missed, not provided, etc.). However, your processing logic becomes more complex, since you need to define the behavior when your data is nil. </p>\n\n<p>What comes to my mind is <a href=\"http://en.wikipedia.org/wiki/Null_Object_pattern\" rel=\"nofollow\">Null Object Pattern</a>, that can help you with replacing your nulls with objects containing default behavior for null. Take a look at the excellent ruby implementation of this pattern: <a href=\"https://github.com/avdi/naught\" rel=\"nofollow\">naught</a>.</p>\n\n<p><strong>EDIT</strong>: Oh, I totally forgot about gorgeous talk by Sandi Metz <a href=\"https://www.youtube.com/watch?v=29MAL8pJImQ\" rel=\"nofollow\">Nothing is Something</a>. Really cool stuff.</p>\n"}], "owner": {"reputation": 1828, "user_id": 9424, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9fa0b83d722599372b5b25fd5a1c83f2?s=128&d=identicon&r=PG", "display_name": "Michael Glenn", "link": "https://stackoverflow.com/users/9424/michael-glenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 32618775, "answer_count": 2, "score": 3, "last_activity_date": 1442437795, "creation_date": 1442437190, "question_id": 32618605, "link": "https://stackoverflow.com/questions/32618605/how-best-do-i-guard-against-undefined-attributes", "title": "How best do I guard against undefined attributes?", "body": "<p>Given an internal method that may call on one or more possibly undefined attributes which are nil, how does one best guard against this?</p>\n\n<p>For instance, the following method makes several internal calls.</p>\n\n<pre><code>def penalty\n    penalty = ((self.rate.to_f - comparative_rate)/100 * self.payments[:balance] * (self.months_to_maturity / 12.0)).round(2)\nend\n</code></pre>\n\n<p>This method being one of them may not have a maturity_date defined since once wasn't provided. This may be a valid state</p>\n\n<pre><code>def months_to_maturity\n    today = Date.today\n    (self.maturity_date.year * 12 + self.maturity_date.month) - (today.year * 12 + today.month)\nend\n</code></pre>\n\n<p>What's the best way to guard all the way down against nil? Is nil the valid state for a date which is undefined?</p>\n"}, {"tags": ["ruby", "selenium", "firebug", "watir", "netexport"], "owner": {"reputation": 39, "user_id": 1491794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3de638a8c5e25891a0ff0a58381681c0?s=128&d=identicon&r=PG", "display_name": "RSH", "link": "https://stackoverflow.com/users/1491794/rsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 289, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1485476898, "creation_date": 1442436894, "last_edit_date": 1485476898, "question_id": 32618496, "link": "https://stackoverflow.com/questions/32618496/generating-har-with-watir-netexport-firebug", "title": "Generating HAR with Watir / NetExport / Firebug", "body": "<p>I am attempting to generate a HAR file using NetExport 0.8, Firebug 1.9.2, and watir-webdriver 0.8.0.  Nothing fancy, here's the code:</p>\n\n<pre><code>    require 'watir-webdriver'\n\n    def setup\n      profile = Selenium::WebDriver::Firefox::Profile.new\n\n      profile.add_extension '/Users/user/Downloads/firebug-1.9.2.xpi'\n      profile.add_extension '/Users/user/Downloads/netExport-0.8.xpi'\n\n      profile['app.update.enabled'] = false\n\n      profile['extensions.firebug.currentVersion'] = '1.9.2'\n      profile['extensions.firebug.showFirstrunPage'] = false\n      profile['extensions.firebug.allPagesActivation'] = 'on'\n      profile['extensions.firebug.onByDefault'] = true\n      profile['extensions.firebug.framePosition'] = 'detached'\n      profile['extensions.firebug.defaultPanelName'] = 'net'\n      profile['extensions.firebug.net.enableSites'] = true\n\n      profile['extensions.firebug.netexport.alwaysEnableAutoExport'] = true\n      profile['extensions.firebug.netexport.autoExportToFile'] = true\n      profile['extensions.firebug.netexport.autoExportToServer'] = false\n      profile['extensions.firebug.netexport.showPreview'] = false\n      profile['extensions.firebug.extensions.firebug.netexport.defaultLogDir'] = File.expand_path File.dirname(__FILE__) + '/har'\n\n      @driver = Watir::Browser.new :firefox, :profile =&gt; profile\n    end\n</code></pre>\n\n<p>I'm importing this code into an IRB session and running setup.  The Firefox instance loads up, and I can see all my preferences are set correctly in about:config.</p>\n\n<p>Here's the IRB session with -d, just after I run setup:</p>\n\n<pre><code>    2.1.3 :002 &gt; setup\n    /Users/user/.rvm/gems/ruby-2.1.3/gems/selenium-webdriver-2.47.1/lib/selenium/webdriver/remote/capabilities.rb:224: warning: method redefined; discarding old proxy=\n    /Users/user/.rvm/gems/ruby-2.1.3/gems/selenium-webdriver-2.47.1/lib/selenium/webdriver/remote/capabilities.rb:47: warning: previous definition of proxy= was here\n    /Users/user/.rvm/gems/ruby-2.1.3/gems/selenium-webdriver-2.47.1/lib/selenium/webdriver/remote/http/default.rb:125: warning: method redefined; discarding old proxy\n    {:extension=&gt;\"firebug-1.9.2\"}\n    Exception `Errno::ENOENT' at /Users/user/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/fileutils.rb:1334 - No such file or directory @ rb_file_s_lstat - /var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/extensions/firebug@software.joehewitt.com\n    Exception `Errno::ENOENT' at /Users/user/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/fileutils.rb:1334 - No such file or directory @ rb_file_s_lstat - /var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/extensions/firebug@software.joehewitt.com\n    Exception `Errno::ENOENT' at /Users/user/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/fileutils.rb:1454 - No such file or directory @ unlink_internal - /var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/extensions/firebug@software.joehewitt.com\n    {:extension=&gt;\"netExport-0.8\"}\n    Exception `Errno::EINVAL' at /Users/user/.rvm/gems/ruby-2.1.3/gems/rubyzip-1.1.6/lib/zip/central_directory.rb:159 - Invalid argument @ rb_io_seek - /Users/user/Downloads/netExport-0.8.xpi\n    Exception `Errno::ENOENT' at /Users/user/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/fileutils.rb:1334 - No such file or directory @ rb_file_s_lstat - /var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/extensions/netexport@getfirebug.com\n    Exception `Errno::ENOENT' at /Users/user/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/fileutils.rb:1334 - No such file or directory @ rb_file_s_lstat - /var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/extensions/netexport@getfirebug.com\n    Exception `Errno::ENOENT' at /Users/user/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/fileutils.rb:1454 - No such file or directory @ unlink_internal - /var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/extensions/netexport@getfirebug.com\n    Exception `Errno::EEXIST' at /Users/user/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/fileutils.rb:247 - File exists @ dir_s_mkdir - /var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/extensions\n    {:extension=&gt;:webdriver}\n    Exception `Errno::ENOENT' at /Users/user/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/fileutils.rb:1334 - No such file or directory @ rb_file_s_lstat - /var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/extensions/fxdriver@googlecode.com\n    Exception `Errno::ENOENT' at /Users/user/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/fileutils.rb:1334 - No such file or directory @ rb_file_s_lstat - /var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/extensions/fxdriver@googlecode.com\n    Exception `Errno::ENOENT' at /Users/user/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/fileutils.rb:1454 - No such file or directory @ unlink_internal - /var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/extensions/fxdriver@googlecode.com\n    Exception `Errno::EEXIST' at /Users/user/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/fileutils.rb:247 - File exists @ dir_s_mkdir - /var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/extensions\n    Exception `Errno::ENOENT' at /Users/user/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/fileutils.rb:1454 - No such file or directory @ unlink_internal - /var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/.parentlock\n    Exception `Errno::ENOENT' at /Users/user/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/fileutils.rb:1454 - No such file or directory @ unlink_internal - /var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/parent.lock\n    Exception `Errno::ENOENT' at /Users/user/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/fileutils.rb:1454 - No such file or directory @ unlink_internal - /var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/extensions.cache\n    Exception `LoadError' at /Users/user/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55 - cannot load such file -- oj\n    Exception `LoadError' at /Users/user/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:141 - cannot load such file -- oj\n    Exception `LoadError' at /Users/user/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55 - cannot load such file -- yajl\n    Exception `LoadError' at /Users/user/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:141 - cannot load such file -- yajl\n    Exception `LoadError' at /Users/user/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55 - cannot load such file -- jrjackson\n    Exception `LoadError' at /Users/user/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:141 - cannot load such file -- jrjackson\n    Using Ext extension for JSON.\n    /Users/user/.rvm/gems/ruby-2.1.3/gems/childprocess-0.5.5/lib/childprocess/unix/fork_exec_process.rb:43: warning: Insecure world writable dir /usr/local/bin in PATH, mode 040777\n    #&lt;ChildProcess::Unix::ForkExecProcess:0x007fe6c1009768 @args=[\"/Applications/Firefox.app/Contents/MacOS/firefox-bin\", \"-no-remote\", \"-foreground\"], @started=true, @exit_code=nil, @io=#&lt;ChildProcess::Unix::IO:0x007fe6c10096c8 @stdout=#&lt;IO:&lt;STDOUT&gt;&gt;, @stderr=#&lt;IO:&lt;STDERR&gt;&gt;&gt;, @cwd=nil, @detach=false, @duplex=false, @leader=false, @environment={}, @pid=40727&gt; : [{:pid=&gt;nil, :status=&gt;nil}]\n    #&lt;ChildProcess::Unix::ForkExecProcess:0x007fe6c1009768 @args=[\"/Applications/Firefox.app/Contents/MacOS/firefox-bin\", \"-no-remote\", \"-foreground\"], @started=true, @exit_code=nil, @io=#&lt;ChildProcess::Unix::IO:0x007fe6c10096c8 @stdout=#&lt;IO:&lt;STDOUT&gt;&gt;, @stderr=#&lt;IO:&lt;STDERR&gt;&gt;&gt;, @cwd=nil, @detach=false, @duplex=false, @leader=false, @environment={}, @pid=40727&gt; : [{:pid=&gt;nil, :status=&gt;nil}]\n    Exception `IO::EINPROGRESSWaitWritable' at /Users/user/.rvm/gems/ruby-2.1.3/gems/selenium-webdriver-2.47.1/lib/selenium/webdriver/common/socket_poller.rb:82 - Operation now in progress - connect(2) would block\n    Exception `Errno::ECONNREFUSED' at /Users/user/.rvm/gems/ruby-2.1.3/gems/selenium-webdriver-2.47.1/lib/selenium/webdriver/common/socket_poller.rb:82 - Connection refused - connect(2) for 127.0.0.1:7055\n    [\"127.0.0.1\", 7055]\n    Exception `IO::EINPROGRESSWaitWritable' at /Users/user/.rvm/gems/ruby-2.1.3/gems/selenium-webdriver-2.47.1/lib/selenium/webdriver/common/socket_poller.rb:82 - Operation now in progress - connect(2) would block\n    Exception `Errno::ECONNREFUSED' at /Users/user/.rvm/gems/ruby-2.1.3/gems/selenium-webdriver-2.47.1/lib/selenium/webdriver/common/socket_poller.rb:82 - Connection refused - connect(2) for 127.0.0.1:7055\n    [\"127.0.0.1\", 7055]\n    Exception `IO::EINPROGRESSWaitWritable' at /Users/user/.rvm/gems/ruby-2.1.3/gems/selenium-webdriver-2.47.1/lib/selenium/webdriver/common/socket_poller.rb:82 - Operation now in progress - connect(2) would block\n    Exception `Errno::ECONNREFUSED' at /Users/user/.rvm/gems/ruby-2.1.3/gems/selenium-webdriver-2.47.1/lib/selenium/webdriver/common/socket_poller.rb:82 - Connection refused - connect(2) for 127.0.0.1:7055\n    [\"127.0.0.1\", 7055]\n    Exception `IO::EINPROGRESSWaitWritable' at /Users/user/.rvm/gems/ruby-2.1.3/gems/selenium-webdriver-2.47.1/lib/selenium/webdriver/common/socket_poller.rb:82 - Operation now in progress - connect(2) would block\n    Exception `Errno::ECONNREFUSED' at /Users/user/.rvm/gems/ruby-2.1.3/gems/selenium-webdriver-2.47.1/lib/selenium/webdriver/common/socket_poller.rb:82 - Connection refused - connect(2) for 127.0.0.1:7055\n    [\"127.0.0.1\", 7055]\n    1442434466001 addons.manager  DEBUG Application has been upgraded\n    1442434466016 addons.manager  DEBUG Loaded provider scope for resource://gre/modules/addons/XPIProvider.jsm: [\"XPIProvider\"]\n    1442434466017 addons.manager  DEBUG Loaded provider scope for resource://gre/modules/LightweightThemeManager.jsm: [\"LightweightThemeManager\"]\n    1442434466019 addons.manager  DEBUG Loaded provider scope for resource://gre/modules/addons/GMPProvider.jsm\n    1442434466021 addons.manager  DEBUG Loaded provider scope for resource://gre/modules/addons/PluginProvider.jsm\n    1442434466022 addons.manager  DEBUG Starting provider: XPIProvider\n    1442434466022 addons.xpi  DEBUG startup\n    1442434466022 addons.xpi  INFO  Mapping firebug@software.joehewitt.com to /var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/extensions/firebug@software.joehewitt.com\n    1442434466023 addons.xpi  INFO  Mapping fxdriver@googlecode.com to /var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/extensions/fxdriver@googlecode.com\n    1442434466023 addons.xpi  INFO  Mapping netexport@getfirebug.com to /var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/extensions/netexport@getfirebug.com\n    1442434466023 addons.xpi  INFO  Mapping {972ce4c6-7e08-4474-a285-3208198ce6fd} to /Applications/Firefox.app/Contents/Resources/browser/extensions/{972ce4c6-7e08-4474-a285-3208198ce6fd}\n    1442434466024 addons.xpi  DEBUG Skipping unavailable install location app-system-share\n    1442434466024 addons.xpi  DEBUG checkForChanges\n    1442434466025 addons.xpi  DEBUG Loaded add-on state from prefs: {}\n    1442434466025 addons.xpi  DEBUG New add-on firebug@software.joehewitt.com in app-profile\n    1442434466025 addons.xpi  DEBUG getModTime: Recursive scan of firebug@software.joehewitt.com\n    1442434466042 addons.xpi  DEBUG New add-on fxdriver@googlecode.com in app-profile\n    1442434466042 addons.xpi  DEBUG getModTime: Recursive scan of fxdriver@googlecode.com\n    1442434466045 addons.xpi  DEBUG New add-on netexport@getfirebug.com in app-profile\n    1442434466046 addons.xpi  DEBUG getModTime: Recursive scan of netexport@getfirebug.com\n    1442434466048 addons.xpi  DEBUG New add-on {972ce4c6-7e08-4474-a285-3208198ce6fd} in app-global\n    1442434466048 addons.xpi  DEBUG getModTime: Recursive scan of {972ce4c6-7e08-4474-a285-3208198ce6fd}\n    1442434466048 addons.xpi  DEBUG getInstallState changed: true, state: {\"app-profile\":{\"firebug@software.joehewitt.com\":{\"d\":\"/var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/extensions/firebug@software.joehewitt.com\",\"st\":1442434463000,\"mt\":1442434463000},\"fxdriver@googlecode.com\":{\"d\":\"/var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/extensions/fxdriver@googlecode.com\",\"st\":1442434464000,\"mt\":1442434464000},\"netexport@getfirebug.com\":{\"d\":\"/var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/extensions/netexport@getfirebug.com\",\"st\":1442434463000,\"mt\":1442434463000}},\"app-global\":{\"{972ce4c6-7e08-4474-a285-3208198ce6fd}\":{\"d\":\"/Applications/Firefox.app/Contents/Resources/browser/extensions/{972ce4c6-7e08-4474-a285-3208198ce6fd}\",\"st\":1440078979000,\"mt\":1440078977000}}}\n    1442434466056 addons.xpi-utils  DEBUG Opening XPI database /var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/extensions.json\n    1442434466057 addons.xpi  DEBUG New add-on firebug@software.joehewitt.com installed in app-profile\n    *** Blocklist::_loadBlocklistFromFile: blocklist is disabled\n    1442434466110 addons.xpi-utils  DEBUG Make addon app-profile:firebug@software.joehewitt.com visible\n    1442434466111 DeferredSave.extensions.json  DEBUG Save changes\n    1442434466112 DeferredSave.extensions.json  DEBUG Save changes\n    1442434466112 addons.xpi  DEBUG Updating XPIState for {\"id\":\"firebug@software.joehewitt.com\",\"syncGUID\":\"1cG4uBHt-D2c\",\"location\":\"app-profile\",\"version\":\"1.9.2\",\"type\":\"extension\",\"internalName\":null,\"updateURL\":null,\"updateKey\":null,\"optionsURL\":null,\"optionsType\":null,\"aboutURL\":null,\"iconURL\":\"chrome://firebug/skin/firebug64.png\",\"icon64URL\":null,\"defaultLocale\":{\"name\":\"Firebug\",\"description\":\"Web Development Evolved.\",\"creator\":\"Joe Hewitt\",\"homepageURL\":\"http://www.getfirebug.com/\",\"translators\":[\"Leszek(teo)Zyczkowski (pl-PL)\",\"markh (nl-NL)\",\"peter3 (sv-SE)\",\"AlleyKat (da-DK)\",\"Hector Zhao, lovelywcm (zh-CN)\",\"Lukas Kucharczyk, Michal Kec (cs-CZ)\",\"Team erweiterungen.de, ReinekeFux, Benedikt Langens, Sebastian Zartner (de-DE)\",\"l0stintranslation, gonzalopirobutirro (it-IT)\",\"alexxed (ro-RO)\",\"Nicolas Martin, Franck Marcia (fr-FR)\",\"gLes (hu-HU)\",\"Xavi Ivars - Softcatala (ca)\",\"gezmen (tr-TR)\",\"eternoendless (es-AR)\",\"Dark Preacher (ru-RU)\",\"Tiago Oliveira, Diego de Carvalho Zimmermann, Alexandre Rapaki (pt-BR)\",\"Juan Botias, Alvaro G. Vicario (es-ES)\",\"Andriy Zhouck (uk-UA)\",\"Hisateru Tanaka (ja-JP)\",\"Mohsen Shadroo (fa-IR)\",\"Eduard Babayan (hy-AM)\",\"Helder Magalhaes (pt-PT)\",\"Tomaz Macus (sl-SI)\",\"Stoyan Stefanov, Alexander Shopov (bg)\",\"Kristjan Bjarni Guomundsson (is-IS)\",\"NGUYEN Manh Hung (vi-VN)\",\"Bwah (hr-HR)\",\"Sonickydon (el)\",\"David Gonzales (es)\",\"DakSrbija (sr)\",\"bootleq (zh-TW)\"],\"contributors\":[\"John J. Barton (IBM Almaden)\",\"Jan Odvarko (Mozilla Corp.)\",\"Max Stepanov (Aptana Inc.)\",\"Rob Campbell (Mozilla Corp.)\",\"Hans Hillen (Paciello Group, Mozilla)\",\"Curtis Bartley (Mozilla Corp.)\",\"Mike Collins (IBM Almaden)\",\"Kevin Decker\",\"Mike Ratcliffe (Mozilla Corp.)\",\"Hernan Rodriguez Colmeiro\",\"Austin Andrews\",\"Christoph Dorn\",\"Steven Roussey (Illuminations for Developers)\",\"Sebastian Zartner\",\"Harutyun Amirjanyan\",\"Simon Lindholm\"]},\"visible\":true,\"active\":true,\"userDisabled\":false,\"appDisabled\":false,\"descriptor\":\"/var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/extensions/firebug@software.joehewitt.com\",\"installDate\":1442434463000,\"updateDate\":1442434463000,\"applyBackgroundUpdates\":1,\"bootstrap\":false,\"size\":4870785,\"sourceURI\":null,\"releaseNotesURI\":null,\"softDisabled\":false,\"foreignInstall\":true,\"hasBinaryComponents\":false,\"strictCompatibility\":false,\"locales\":[],\"targetApplications\":[{\"id\":\"toolkit@mozilla.org\",\"minVersion\":\"5.0\",\"maxVersion\":\"13.*\"},{\"id\":\"{ec8030f7-c20a-464f-9b0e-13a3a9e97384}\",\"minVersion\":\"5.0\",\"maxVersion\":\"13.*\"}],\"targetPlatforms\":[],\"multiprocessCompatible\":false,\"signedState\":0}\n    1442434466112 addons.xpi  DEBUG getModTime: Recursive scan of firebug@software.joehewitt.com\n    1442434466127 addons.xpi  DEBUG New add-on fxdriver@googlecode.com installed in app-profile\n    1442434466132 DeferredSave.extensions.json  DEBUG Starting timer\n    1442434466133 addons.xpi-utils  DEBUG Make addon app-profile:fxdriver@googlecode.com visible\n    1442434466133 DeferredSave.extensions.json  DEBUG Save changes\n    1442434466133 DeferredSave.extensions.json  DEBUG Save changes\n    1442434466133 addons.xpi  DEBUG Updating XPIState for {\"id\":\"fxdriver@googlecode.com\",\"syncGUID\":\"45bPIA_rb0wa\",\"location\":\"app-profile\",\"version\":\"2.47.1\",\"type\":\"extension\",\"internalName\":null,\"updateURL\":null,\"updateKey\":null,\"optionsURL\":null,\"optionsType\":null,\"aboutURL\":null,\"iconURL\":null,\"icon64URL\":null,\"defaultLocale\":{\"name\":\"Firefox WebDriver\",\"description\":\"WebDriver implementation for Firefox\",\"creator\":\"Simon Stewart\",\"homepageURL\":null},\"visible\":true,\"active\":true,\"userDisabled\":false,\"appDisabled\":false,\"descriptor\":\"/var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/extensions/fxdriver@googlecode.com\",\"installDate\":1442434464000,\"updateDate\":1442434464000,\"applyBackgroundUpdates\":1,\"bootstrap\":false,\"size\":8234871,\"sourceURI\":null,\"releaseNotesURI\":null,\"softDisabled\":false,\"foreignInstall\":true,\"hasBinaryComponents\":true,\"strictCompatibility\":false,\"locales\":[],\"targetApplications\":[{\"id\":\"{ec8030f7-c20a-464f-9b0e-13a3a9e97384}\",\"minVersion\":\"3.0\",\"maxVersion\":\"66.*\"}],\"targetPlatforms\":[{\"os\":\"Darwin\",\"abi\":null},{\"os\":\"SunOS\",\"abi\":null},{\"os\":\"FreeBSD\",\"abi\":null},{\"os\":\"OpenBSD\",\"abi\":null},{\"os\":\"WINNT\",\"abi\":\"x86-msvc\"},{\"os\":\"Linux\",\"abi\":null}],\"multiprocessCompatible\":false,\"signedState\":0}\n    1442434466133 addons.xpi  DEBUG getModTime: Recursive scan of fxdriver@googlecode.com\n    1442434466136 addons.xpi  DEBUG New add-on netexport@getfirebug.com installed in app-profile\n    1442434466140 addons.xpi-utils  DEBUG Make addon app-profile:netexport@getfirebug.com visible\n    1442434466140 DeferredSave.extensions.json  DEBUG Save changes\n    1442434466140 DeferredSave.extensions.json  DEBUG Save changes\n    1442434466140 addons.xpi  DEBUG Updating XPIState for {\"id\":\"netexport@getfirebug.com\",\"syncGUID\":\"Q-Tpwf6CDBL6\",\"location\":\"app-profile\",\"version\":\"0.8\",\"type\":\"extension\",\"internalName\":null,\"updateURL\":\"https://getfirebug.com/releases/netexport/update.rdf\",\"updateKey\":null,\"optionsURL\":null,\"optionsType\":null,\"aboutURL\":null,\"iconURL\":null,\"icon64URL\":null,\"defaultLocale\":{\"name\":\"NetExport\",\"description\":\"Use this extension to export data from Firebug's Net panel.\",\"creator\":\"Jan Odvarko\",\"homepageURL\":\"http://getfirebug.com/releases/extensions.html#netexport\",\"contributors\":[\"Matthew Consiliens\"]},\"visible\":true,\"active\":true,\"userDisabled\":false,\"appDisabled\":false,\"descriptor\":\"/var/folders/2g/h_9hr8m12xs12nwxbl0mts7r0000gn/T/webdriver-profile20150916-40722-n7id7n/extensions/netexport@getfirebug.com\",\"installDate\":1442434463000,\"updateDate\":1442434463000,\"applyBackgroundUpdates\":1,\"bootstrap\":false,\"size\":132197,\"sourceURI\":null,\"releaseNotesURI\":null,\"softDisabled\":false,\"foreignInstall\":true,\"hasBinaryComponents\":false,\"strictCompatibility\":false,\"locales\":[],\"targetApplications\":[{\"id\":\"{ec8030f7-c20a-464f-9b0e-13a3a9e97384}\",\"minVersion\":\"3.0\",\"maxVersion\":\"20.*\"}],\"targetPlatforms\":[],\"multiprocessCompatible\":false,\"signedState\":0}\n    1442434466140 addons.xpi  DEBUG getModTime: Recursive scan of netexport@getfirebug.com\n    1442434466141 addons.xpi  DEBUG New add-on {972ce4c6-7e08-4474-a285-3208198ce6fd} installed in app-global\n    1442434466167 addons.xpi-utils  DEBUG Make addon app-global:{972ce4c6-7e08-4474-a285-3208198ce6fd} visible\n    1442434466167 DeferredSave.extensions.json  DEBUG Save changes\n    1442434466167 DeferredSave.extensions.json  DEBUG Save changes\n    1442434466168 addons.xpi  DEBUG Updating XPIState for {\"id\":\"{972ce4c6-7e08-4474-a285-3208198ce6fd}\",\"syncGUID\":\"5xW6QVmBVWep\",\"location\":\"app-global\",\"version\":\"40.0.2\",\"type\":\"theme\",\"internalName\":\"classic/1.0\",\"updateURL\":null,\"updateKey\":null,\"optionsURL\":null,\"optionsType\":null,\"aboutURL\":null,\"iconURL\":null,\"icon64URL\":null,\"defaultLocale\":{\"name\":\"Default\",\"description\":\"The default theme.\",\"creator\":\"Mozilla\",\"homepageURL\":null,\"contributors\":[\"Mozilla Contributors\"]},\"visible\":true,\"active\":true,\"userDisabled\":false,\"appDisabled\":false,\"descriptor\":\"/Applications/Firefox.app/Contents/Resources/browser/extensions/{972ce4c6-7e08-4474-a285-3208198ce6fd}\",\"installDate\":1440078979000,\"updateDate\":1440078979000,\"applyBackgroundUpdates\":1,\"skinnable\":true,\"size\":7896,\"sourceURI\":null,\"releaseNotesURI\":null,\"softDisabled\":false,\"foreignInstall\":false,\"hasBinaryComponents\":false,\"strictCompatibility\":true,\"locales\":[],\"targetApplications\":[{\"id\":\"{ec8030f7-c20a-464f-9b0e-13a3a9e97384}\",\"minVersion\":\"40.0.2\",\"maxVersion\":\"40.0.2\"}],\"targetPlatforms\":[]}\n    1442434466168 addons.xpi  DEBUG getModTime: Recursive scan of {972ce4c6-7e08-4474-a285-3208198ce6fd}\n    1442434466169 addons.xpi  DEBUG Updating database with changes to installed add-ons\n    1442434466169 addons.xpi-utils  DEBUG Updating add-on states\n    1442434466170 addons.xpi-utils  DEBUG Writing add-ons list\n    1442434466176 addons.manager  DEBUG Registering shutdown blocker for XPIProvider\n    1442434466177 addons.manager  DEBUG Provider finished startup: XPIProvider\n    1442434466177 addons.manager  DEBUG Starting provider: LightweightThemeManager\n    1442434466177 addons.manager  DEBUG Registering shutdown blocker for LightweightThemeManager\n    1442434466177 addons.manager  DEBUG Provider finished startup: LightweightThemeManager\n    1442434466177 addons.manager  DEBUG Starting provider: GMPProvider\n    1442434466181 addons.manager  DEBUG Registering shutdown blocker for GMPProvider\n    1442434466181 addons.manager  DEBUG Provider finished startup: GMPProvider\n    1442434466181 addons.manager  DEBUG Starting provider: PluginProvider\n    1442434466182 addons.manager  DEBUG Registering shutdown blocker for PluginProvider\n    1442434466182 addons.manager  DEBUG Provider finished startup: PluginProvider\n    1442434466182 addons.manager  DEBUG Completed startup sequence\n    Exception `IO::EINPROGRESSWaitWritable' at /Users/user/.rvm/gems/ruby-2.1.3/gems/selenium-webdriver-2.47.1/lib/selenium/webdriver/common/socket_poller.rb:82 - Operation now in progress - connect(2) would block\n    Exception `Errno::ECONNREFUSED' at /Users/user/.rvm/gems/ruby-2.1.3/gems/selenium-webdriver-2.47.1/lib/selenium/webdriver/common/socket_poller.rb:82 - Connection refused - connect(2) for 127.0.0.1:7055\n    [\"127.0.0.1\", 7055]\n    Exception `IO::EINPROGRESSWaitWritable' at /Users/user/.rvm/gems/ruby-2.1.3/gems/selenium-webdriver-2.47.1/lib/selenium/webdriver/common/socket_poller.rb:82 - Operation now in progress - connect(2) would block\n    Exception `Errno::ECONNREFUSED' at /Users/user/.rvm/gems/ruby-2.1.3/gems/selenium-webdriver-2.47.1/lib/selenium/webdriver/common/socket_poller.rb:82 - Connection refused - connect(2) for 127.0.0.1:7055\n    [\"127.0.0.1\", 7055]\n    Exception `IO::EINPROGRESSWaitWritable' at /Users/user/.rvm/gems/ruby-2.1.3/gems/selenium-webdriver-2.47.1/lib/selenium/webdriver/common/socket_poller.rb:82 - Operation now in progress - connect(2) would block\n    Exception `Errno::ECONNREFUSED' at /Users/user/.rvm/gems/ruby-2.1.3/gems/selenium-webdriver-2.47.1/lib/selenium/webdriver/common/socket_poller.rb:82 - Connection refused - connect(2) for 127.0.0.1:7055\n    [\"127.0.0.1\", 7055]\n    Exception `IO::EINPROGRESSWaitWritable' at /Users/user/.rvm/gems/ruby-2.1.3/gems/selenium-webdriver-2.47.1/lib/selenium/webdriver/common/socket_poller.rb:82 - Operation now in progress - connect(2) would block\n    Exception `Errno::ECONNREFUSED' at /Users/user/.rvm/gems/ruby-2.1.3/gems/selenium-webdriver-2.47.1/lib/selenium/webdriver/common/socket_poller.rb:82 - Connection refused - connect(2) for 127.0.0.1:7055\n    [\"127.0.0.1\", 7055]\n    1442434467016 addons.manager  DEBUG Starting provider: &lt;unnamed-provider&gt;\n    1442434467016 addons.manager  DEBUG Registering shutdown blocker for &lt;unnamed-provider&gt;\n    1442434467016 addons.manager  DEBUG Provider finished startup: &lt;unnamed-provider&gt;\n    1442434467080 DeferredSave.extensions.json  DEBUG Starting write\n    1442434467158 addons.repository DEBUG No addons.json found.\n    1442434467159 DeferredSave.addons.json  DEBUG Save changes\n    1442434467163 DeferredSave.addons.json  DEBUG Starting timer\n    1442434467191 addons.manager  DEBUG Starting provider: PreviousExperimentProvider\n    1442434467192 addons.manager  DEBUG Registering shutdown blocker for PreviousExperimentProvider\n    1442434467192 addons.manager  DEBUG Provider finished startup: PreviousExperimentProvider\n    1442434467195 DeferredSave.extensions.json  DEBUG Write succeeded\n    1442434467195 addons.xpi-utils  DEBUG XPI Database saved, setting schema version preference to 17\n    Exception `IO::EINPROGRESSWaitWritable' at /Users/user/.rvm/gems/ruby-2.1.3/gems/selenium-webdriver-2.47.1/lib/selenium/webdriver/common/socket_poller.rb:82 - Operation now in progress - connect(2) would block\n    Exception `Errno::ECONNREFUSED' at /Users/user/.rvm/gems/ruby-2.1.3/gems/selenium-webdriver-2.47.1/lib/selenium/webdriver/common/socket_poller.rb:82 - Connection refused - connect(2) for 127.0.0.1:7055\n    [\"127.0.0.1\", 7055]\n    1442434467224 DeferredSave.addons.json  DEBUG Starting write\n    1442434467241 DeferredSave.addons.json  DEBUG Write succeeded\n</code></pre>\n\n<p>After that, I do:</p>\n\n<pre><code>@driver.goto \"http://www.google.com\"\n</code></pre>\n\n<p>Here's where I expect the HAR file, but it never shows.  Anyone else struggled with this?  I've tried various profile settings with no luck.</p>\n"}, {"tags": ["ruby", "intellij-idea", "vagrant", "vagrantfile"], "answers": [{"tags": [], "owner": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "is_accepted": false, "score": 0, "last_activity_date": 1442472159, "creation_date": 1442472159, "answer_id": 32624015, "question_id": 32618488, "link": "https://stackoverflow.com/questions/32618488/intellij-vagrant-guest-and-host-lines-displayed-as-errors/32624015#32624015", "title": "Intellij: Vagrant guest and host lines displayed as errors", "body": "<p>Is your Vagrantfile associated to any particular types (you can check from your preferences under Editor > File Types)</p>\n\n<p>If it is the case, you can change to associate as a text file and IntelliJ will not complain.</p>\n\n<p>The vagrant plugin allows for interaction (start/stop ...) if you do not like to use a command line and vagrant command, but it has no support for the Vagrantfile</p>\n"}], "owner": {"reputation": 9452, "user_id": 650489, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/zfaKy.png?s=128&g=1", "display_name": "Stanley Cup Phil", "link": "https://stackoverflow.com/users/650489/stanley-cup-phil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442472159, "creation_date": 1442436872, "question_id": 32618488, "link": "https://stackoverflow.com/questions/32618488/intellij-vagrant-guest-and-host-lines-displayed-as-errors", "title": "Intellij: Vagrant guest and host lines displayed as errors", "body": "<p>I have the following code in a Vagrant file:</p>\n\n<pre><code>  # Create a forwarded port mapping which allows access to a specific port\n  # within the machine from a port on the host machine. In the example below,\n  # accessing 'localhost:8080' will access port 80 on the guest machine.\n  config.vm.network :forwarded_port, guest: 9999, host: 9998\n  config.vm.network :forwarded_port, guest: 3500, host: 3502\n</code></pre>\n\n<p>This code runs correctly, but Intellij thinks it is an error. I already installed a <a href=\"https://plugins.jetbrains.com/plugin/7379?pr=\" rel=\"nofollow\">Vagrant plugin</a> in hopes that it would resolve the issue, but it does not.</p>\n\n<p>How do I get Intellij to not mark the following two lines as errors when using Vagrant? </p>\n"}, {"tags": ["ruby", "email", "date", "format"], "comments": [{"owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 0, "creation_date": 1442439094, "post_id": 32618380, "comment_id": 53088732, "body": "Welcome to SO, and to ruby!  Is <code>email.date</code> an instance of <code>Date</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5344090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7765263a81c61bdec0ea1eb4ddce0540?s=128&d=identicon&r=PG&f=1", "display_name": "artr", "link": "https://stackoverflow.com/users/5344090/artr"}, "edited": false, "score": 0, "creation_date": 1442437689, "post_id": 32618573, "comment_id": 53088032, "body": "But that is for <code>time.now</code> . How would it be used with <code>email.date.to_s</code>. It doesn&#39;t seem to work when I just add <code>strftime(&quot;%m&#47;%d&#47;%y&quot;)</code>"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "reply_to_user": {"reputation": 31, "user_id": 5344090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7765263a81c61bdec0ea1eb4ddce0540?s=128&d=identicon&r=PG&f=1", "display_name": "artr", "link": "https://stackoverflow.com/users/5344090/artr"}, "edited": false, "score": 0, "creation_date": 1442445419, "post_id": 32618573, "comment_id": 53090862, "body": "As @Jared Beck asked, what kind of object is <code>email.date</code>?"}], "tags": [], "owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "is_accepted": false, "score": 0, "last_activity_date": 1442437098, "creation_date": 1442437098, "answer_id": 32618573, "question_id": 32618380, "link": "https://stackoverflow.com/questions/32618380/email-date-formatting/32618573#32618573", "title": "Email.date formatting", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.2.0/Time.html#method-i-strftime\" rel=\"nofollow\"><code>strftime</code></a> to format the string:</p>\n\n<pre><code>Time.now.strftime(\"%m/%d/%y\")\n#=&gt; 09/16/15\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5344090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7765263a81c61bdec0ea1eb4ddce0540?s=128&d=identicon&r=PG&f=1", "display_name": "artr", "link": "https://stackoverflow.com/users/5344090/artr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442437098, "creation_date": 1442436468, "last_edit_date": 1442436794, "question_id": 32618380, "link": "https://stackoverflow.com/questions/32618380/email-date-formatting", "title": "Email.date formatting", "body": "<p>When using <code>email.date.to_s</code></p>\n\n<p>I receive a date in this format </p>\n\n<p><code>Wed, 3 Jun 2015 14:57:46 -0700</code> </p>\n\n<p>but I want it to be in this format</p>\n\n<p><code>06/03/15</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml", "nokogiri"], "answers": [{"comments": [{"owner": {"reputation": 1423, "user_id": 2948157, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/100001350795049/picture?type=large", "display_name": "Lucian Tarna", "link": "https://stackoverflow.com/users/2948157/lucian-tarna"}, "edited": false, "score": 0, "creation_date": 1442436335, "post_id": 32618308, "comment_id": 53087348, "body": "and which is the correct way to write that value ? double value inside the tag or double tag?"}, {"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "reply_to_user": {"reputation": 1423, "user_id": 2948157, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/100001350795049/picture?type=large", "display_name": "Lucian Tarna", "link": "https://stackoverflow.com/users/2948157/lucian-tarna"}, "edited": false, "score": 0, "creation_date": 1442436634, "post_id": 32618308, "comment_id": 53087507, "body": "@LucianTarna Updated answer."}, {"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "reply_to_user": {"reputation": 1423, "user_id": 2948157, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/100001350795049/picture?type=large", "display_name": "Lucian Tarna", "link": "https://stackoverflow.com/users/2948157/lucian-tarna"}, "edited": false, "score": 0, "creation_date": 1442436841, "post_id": 32618308, "comment_id": 53087604, "body": "No, the first <code>item</code> contains 1 <code>image_urls</code> tag with 2 links inside. The code processes correctly both of your cases."}, {"owner": {"reputation": 1423, "user_id": 2948157, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/100001350795049/picture?type=large", "display_name": "Lucian Tarna", "link": "https://stackoverflow.com/users/2948157/lucian-tarna"}, "edited": false, "score": 0, "creation_date": 1442436845, "post_id": 32618308, "comment_id": 53087608, "body": "Thank you very much ! You were of great help. Yes I saw after I posted the comment , got ahead of myself, my bad."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1442451743, "post_id": 32618308, "comment_id": 53092305, "body": "It isn&#39;t necessary, or particularly desirable to say &quot;EDIT:&quot; or call out changes to your question or answer. Just incorporate the changes naturally into the document. If we need to see whether something changed we can look as Stack Overflow has version control of all questions and answers."}], "tags": [], "owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "is_accepted": true, "score": 2, "last_activity_date": 1442451682, "last_edit_date": 1442451682, "creation_date": 1442436094, "answer_id": 32618308, "question_id": 32618096, "link": "https://stackoverflow.com/questions/32618096/parse-xml-that-has-a-node-with-multiple-values-with-nokogiri/32618308#32618308", "title": "Parse XML that has a node with multiple values with Nokogiri", "body": "<p>You need to use the <code>css</code> method, which returns all matches, as opposed to <code>at</code> which returns only the first match:</p>\n\n<pre><code>text = &lt;&lt;EOD\n&lt;items&gt;\n  &lt;item&gt;\n    &lt;image_urls&gt;http://static.elefant.ro/images/26/95226/husa-belkin-grip-pentru-kindle-3-ebook-reader-albastru_1_categorie.jpg http://www.keenthemes.com/preview/metronic/theme/assets/global/plugins/jcrop/demos/demo_files/image1.jpg\n    &lt;/image_urls&gt;\n  &lt;/item&gt;\n  &lt;item&gt;\n    &lt;image_urls&gt;\nhttp://static.elefant.ro/images/26/95226/husa-belkin-grip-pentru-kindle-3-ebook-reader-albastru_1_categorie.jpg&lt;/image_urls&gt;\n&lt;image_urls&gt;http://www.keenthemes.com/preview/metronic/theme/assets/global/plugins/jcrop/demos/demo_files/image1.jpg\n    &lt;/image_urls&gt;\n  &lt;/item&gt;\n&lt;/items&gt;\nEOD\n\nxml = Nokogiri::XML(text)\n\nxml.css('item').each do |item|\n  attachments = item.css('image_urls').map do |url| \n    url.text.strip!.split(' ')\n  end.flatten\n  p attachments\nend\n# [\"http://static.elefant.ro/images/26/95226/husa-belkin-grip-pentru-kindle-3-ebook-reader-albastru_1_categorie.jpg\", \"http://www.keenthemes.com/preview/metronic/theme/assets/global/plugins/jcrop/demos/demo_files/image1.jpg\"]\n# [\"http://static.elefant.ro/images/26/95226/husa-belkin-grip-pentru-kindle-3-ebook-reader-albastru_1_categorie.jpg\", \"http://www.keenthemes.com/preview/metronic/theme/assets/global/plugins/jcrop/demos/demo_files/image1.jpg\"]\n</code></pre>\n"}], "owner": {"reputation": 1423, "user_id": 2948157, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/100001350795049/picture?type=large", "display_name": "Lucian Tarna", "link": "https://stackoverflow.com/users/2948157/lucian-tarna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 0, "accepted_answer_id": 32618308, "answer_count": 1, "score": 3, "last_activity_date": 1442451682, "creation_date": 1442435366, "last_edit_date": 1442451637, "question_id": 32618096, "link": "https://stackoverflow.com/questions/32618096/parse-xml-that-has-a-node-with-multiple-values-with-nokogiri", "title": "Parse XML that has a node with multiple values with Nokogiri", "body": "<p>I am not quite sure what the XML syntax is that's why I will put two types of XML, please point out the good one.</p>\n\n<p>I have XML that has a node with multiple values:  </p>\n\n<p>Case 1:  </p>\n\n<pre><code>&lt;items&gt;\n  &lt;item&gt;\n    &lt;image_urls&gt;http://static.elefant.ro/images/26/95226/husa-belkin-grip-pentru-kindle-3-ebook-reader-albastru_1_categorie.jpg http://www.keenthemes.com/preview/metronic/theme/assets/global/plugins/jcrop/demos/demo_files/image1.jpg\n    &lt;/image_urls&gt;\n  &lt;/item&gt;\n&lt;/items&gt;\n</code></pre>\n\n<p>Case 2:  </p>\n\n<pre><code>&lt;items&gt;\n  &lt;item&gt;\n    &lt;image_urls&gt;\nhttp://static.elefant.ro/images/26/95226/husa-belkin-grip-pentru-kindle-3-ebook-reader-albastru_1_categorie.jpg\n    &lt;/image_urls&gt;\n    &lt;image_urls&gt;http://www.keenthemes.com/preview/metronic/theme/assets/global/plugins/jcrop/demos/demo_files/image1.jpg\n    &lt;/image_urls&gt;\n  &lt;/item&gt;\n&lt;/items&gt;\n</code></pre>\n\n<p>The struggle I am facing is getting the multiple-valued node with Nokogiri. I tried:</p>\n\n<pre><code>item.at(\"image_urls\").to_s.split(\" \").inject([]) { |result, element| \n  result &lt;&lt; element \n}\n</code></pre>\n\n<p>But this works only in the first variant of the XML. If the correct syntax is the second form, which I believe it is, how can I take both values, as my following implementation only takes the first?</p>\n\n<pre><code>xml = Nokogiri::XML(File.open(self.file.current_path))\nxml.xpath(\"//item\").each do |item|\nattachments_array = item.at(\"image_urls\").inject([]) { |result, element| \n  result &lt;&lt; element\n}\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1442434931, "post_id": 32617951, "comment_id": 53086646, "body": "This is great, too, since it returns a new array. No need to have extra steps for calling <code>sum_arr = Array.new</code>"}, {"owner": {"reputation": 1991, "user_id": 574591, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9505b9216fdae1f6735ed821cfa7e7f8?s=128&d=identicon&r=PG", "display_name": "Alina", "link": "https://stackoverflow.com/users/574591/alina"}, "edited": false, "score": 0, "creation_date": 1442438729, "post_id": 32617951, "comment_id": 53088574, "body": "one more question: how do I map each sum back to the those 3 arrays? so, that my initial ar=[6,6,6,4]. Each element correspond to the sum, to which it contributed."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "reply_to_user": {"reputation": 1991, "user_id": 574591, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9505b9216fdae1f6735ed821cfa7e7f8?s=128&d=identicon&r=PG", "display_name": "Alina", "link": "https://stackoverflow.com/users/574591/alina"}, "edited": false, "score": 1, "creation_date": 1442440216, "post_id": 32617951, "comment_id": 53089219, "body": "@Tonja: Ideally that should be a new question but <code>[1, 2, 3, 4].each_slice(3).flat_map { |e| Array.new(e.length, e.inject(:+)) }</code> is a possible solution."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1442440927, "post_id": 32617951, "comment_id": 53089528, "body": "Or <code>[1, 2, 3, 4].each_slice(3).flat_map { |e| e.fill(e.inject(:+)) }</code>."}], "tags": [], "owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "is_accepted": true, "score": 8, "last_activity_date": 1442434839, "creation_date": 1442434839, "answer_id": 32617951, "question_id": 32617764, "link": "https://stackoverflow.com/questions/32617764/sum-every-3-elements-of-an-array-in-ruby/32617951#32617951", "title": "Sum every 3 elements of an array in ruby", "body": "<p>A short way with <a href=\"http://ruby-doc.org/core/Enumerable.html#method-i-each_slice\"><code>Enumerable#each_slice</code></a>:</p>\n\n<pre><code>[1, 2, 3, 4].each_slice(3).map { |e| e.inject(:+) } # =&gt; [6, 4]\n</code></pre>\n"}], "owner": {"reputation": 1991, "user_id": 574591, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9505b9216fdae1f6735ed821cfa7e7f8?s=128&d=identicon&r=PG", "display_name": "Alina", "link": "https://stackoverflow.com/users/574591/alina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 842, "favorite_count": 1, "accepted_answer_id": 32617951, "answer_count": 1, "score": 2, "last_activity_date": 1442434967, "creation_date": 1442434138, "question_id": 32617764, "link": "https://stackoverflow.com/questions/32617764/sum-every-3-elements-of-an-array-in-ruby", "title": "Sum every 3 elements of an array in ruby", "body": "<p>Is there any efficient and short way to sum every 3 elements of an array?</p>\n\n<pre><code>ar = [1, 2, 3, 4, 5, 6, 7, 8, 1]\nsum_ar = [6, 15, 16]\n</code></pre>\n\n<p>first 3 elements <code>1+2+3=6</code>\n    <br>\n    next 3 elements <code>4+5+6=15</code>\n    <br>\n   next 3 elements  <code>7+8+1=15</code>\n    <br>\n    ...\n    <br>\n    if there are only two elements left, sum them</p>\n\n<p>I could do something like this:</p>\n\n<pre><code>y=0\ns=ar.size/3\n((0..s).step(3).to_a).each do |i|\n    sum_ar[y]=ar[i..i+2].inject(:+)\n    y=y+1\nend\n</code></pre>\n\n<p>but then I will miss the elements in case of such an array, where the size is not an exactly multiply of a 3:</p>\n\n<pre><code>ar=[1, 2, 3, 4, 5, 6, 7, 8]\n</code></pre>\n"}, {"tags": ["ruby", "if-statement"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1442440480, "post_id": 32617761, "comment_id": 53089337, "body": "This has <i>got</i> be be a duplicate, I swear, I have seen this <i>exact</i> question asked at least a dozen times on StackOverflow. However, I can&#39;t for the life of me find a canonical duplicate (or <i>any</i> duplicate at all, really). Anybody have one handy?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1442494189, "post_id": 32617761, "comment_id": 53110439, "body": "@J&#246;rgWMittag maybe <a href=\"http://stackoverflow.com/q/25234521/477037\">stackoverflow.com/q/25234521/477037</a> or its duplicate <a href=\"http://stackoverflow.com/q/25328481/477037\">stackoverflow.com/q/25328481/477037</a> but the answers don&#39;t really explain the limitations of the ternary operator."}], "answers": [{"comments": [{"owner": {"reputation": 795, "user_id": 216687, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af54fa7d64a65310bc6bf780f2aa0531?s=128&d=identicon&r=PG", "display_name": "nightfire", "link": "https://stackoverflow.com/users/216687/nightfire"}, "edited": false, "score": 0, "creation_date": 1442436089, "post_id": 32618220, "comment_id": 53087232, "body": "Thanks! I think you might have some stray backticks in your code, though."}, {"owner": {"reputation": 795, "user_id": 216687, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af54fa7d64a65310bc6bf780f2aa0531?s=128&d=identicon&r=PG", "display_name": "nightfire", "link": "https://stackoverflow.com/users/216687/nightfire"}, "edited": false, "score": 0, "creation_date": 1442436276, "post_id": 32618220, "comment_id": 53087324, "body": "What&#39;s the reason the parentheses are necessary? Why is the terminal complaining when I do it the way I tried above?"}, {"owner": {"reputation": 183757, "user_id": 20654, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/94066dfa49c2feb14706cb081848fda7?s=128&d=identicon&r=PG", "display_name": "OscarRyz", "link": "https://stackoverflow.com/users/20654/oscarryz"}, "edited": false, "score": 2, "creation_date": 1442439321, "post_id": 32618220, "comment_id": 53088829, "body": "definitely use <code>puts response == &quot;a&quot;  ? &quot;yes&quot; : &quot;no&quot;</code> instead"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1442493667, "post_id": 32618220, "comment_id": 53110115, "body": "<i>&quot;I don&#39;t know why this doesn&#39;t work&quot;</i> - I&#39;d say the parser only allows spaces before a block, i.e. <code>cond ? foo {} : bar {}</code> works, whereas <code>cond ? foo 1 : bar 2</code> doesn&#39;t."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1442512710, "post_id": 32618220, "comment_id": 53122441, "body": "@Stefan, it&#39;s only the part following the colon that I don&#39;t understand. I don&#39;t see why the parser wouldn&#39;t parse that as it would any other line of code. Why should it object to <code>puts &#39;hi&#39;</code> after the colon? (Before the colon, yes.)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1442557421, "post_id": 32618220, "comment_id": 53138036, "body": "@CarySwoveland I&#39;m going to take a look at the parser code if I find some time"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1507874963, "post_id": 32618220, "comment_id": 80393241, "body": "@Stefan, I don&#39;t mean to rush you, but have your found time yet?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1507890251, "post_id": 32618220, "comment_id": 80401398, "body": "@CarySwoveland I totally forgot! I should make a todo list for that kind of research."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 6, "last_activity_date": 1442460567, "last_edit_date": 1442460567, "creation_date": 1442435818, "answer_id": 32618220, "question_id": 32617761, "link": "https://stackoverflow.com/questions/32617761/ruby-if-else-one-liner-with-puts-not-working/32618220#32618220", "title": "ruby if-else one-liner with &quot;puts&quot; not working", "body": "<p>Here is your error:</p>\n\n<pre><code>response == \"a\" ? puts \"yes\" : puts \"no\"\n  #=&gt; syntax error, unexpected ':', expecting end-of-input\n  #   response == \"a\" ? puts \"yes\" : puts \"no\"\n  #                           ^\n</code></pre>\n\n<p>Ruby is looking for the first <code>puts</code>' arguments. Since they are not enclosed in parentheses, she assumes they are in a comma-separated list following <code>puts</code>. The first one is <code>\"yes\"</code>, but there is no comma following <code>\"yes\"</code>, so an exception is raised.</p>\n\n<p>Let's try:</p>\n\n<pre><code>response == \"a\" ? (puts \"yes\") : puts \"no\"\n  #=&gt; syntax error, unexpected tSTRING_BEG, expecting keyword_do or '{' or '('\n  #   response == \"a\" ? (puts \"yes\") : puts \"no\"\n  #                                          ^\n</code></pre>\n\n<p>(<code>response == \"a\" ? puts(\"yes\") : puts \"no\"</code> raises the same exception.)</p>\n\n<p>I don't know why this doesn't work. The exception says that it is expecting a block (<code>do...end</code> or <code>{..}</code>) or a left parentheses (for enclosing arguments) after the second <code>puts</code>. <a href=\"http://ruby-doc.org/core-2.2.0/Kernel.html#method-i-puts\" rel=\"nofollow\">Kernel#puts</a> calls <code>$stdout.puts</code>. As <code>$stdout</code> returns an <code>IO</code> object, <a href=\"http://ruby-doc.org/core-2.2.2/IO.html#method-i-puts\" rel=\"nofollow\">IO#puts</a> is then called, but the doc sheds no light on the problem. Perhaps a reader can offer an explanation.</p>\n\n<p>You could write it as follows:</p>\n\n<pre><code>response == \"a\" ? (puts \"yes\") : (puts \"no\")\n</code></pre>\n\n<p>or</p>\n\n<pre><code>response == \"a\" ? puts(\"yes\") : puts(\"no\")\n</code></pre>\n\n<p>or (best, imo)</p>\n\n<pre><code>puts response == \"a\"  ? \"yes\" : \"no\"\n</code></pre>\n"}], "owner": {"reputation": 795, "user_id": 216687, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af54fa7d64a65310bc6bf780f2aa0531?s=128&d=identicon&r=PG", "display_name": "nightfire", "link": "https://stackoverflow.com/users/216687/nightfire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 656, "favorite_count": 0, "accepted_answer_id": 32618220, "answer_count": 1, "score": 4, "last_activity_date": 1442462850, "creation_date": 1442434132, "last_edit_date": 1442462850, "question_id": 32617761, "link": "https://stackoverflow.com/questions/32617761/ruby-if-else-one-liner-with-puts-not-working", "title": "ruby if-else one-liner with &quot;puts&quot; not working", "body": "<p>I'm trying to do</p>\n\n<pre><code>    response = gets.chomp\n    response == \"a\" ? puts \"yes\" : puts \"no\"\n</code></pre>\n\n<p>The terminal complains: </p>\n\n<pre><code>syntax error, unexpected ':', expecting keyword_end\n    response == \"a\" ? puts \"yes\" : puts \"no\"\n                                  ^\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2002, "user_id": 16947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09a31803d316d11a7ed1ec71bb9e39ed?s=128&d=identicon&r=PG", "display_name": "RKitson", "link": "https://stackoverflow.com/users/16947/rkitson"}, "edited": false, "score": 0, "creation_date": 1442441232, "post_id": 32617562, "comment_id": 53089641, "body": "Yes. The answers to that question do answer this question. The problem I have is that I googled this for quite a while and never came across that question."}, {"owner": {"reputation": 2002, "user_id": 16947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09a31803d316d11a7ed1ec71bb9e39ed?s=128&d=identicon&r=PG", "display_name": "RKitson", "link": "https://stackoverflow.com/users/16947/rkitson"}, "edited": false, "score": 0, "creation_date": 1442441342, "post_id": 32617562, "comment_id": 53089678, "body": "And, as mentioned in the answers on the question that this duplicates, the ? is not an operator in this case."}, {"owner": {"reputation": 8957, "user_id": 3345375, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TbVFk.png?s=128&g=1", "display_name": "jkdev", "link": "https://stackoverflow.com/users/3345375/jkdev"}, "edited": false, "score": 0, "creation_date": 1447882026, "post_id": 32617562, "comment_id": 55348482, "body": "For googlers who find this answer, here are other related answers with detailed explanations: <a href=\"http://stackoverflow.com/q/4363067\">stackoverflow.com/q/4363067</a>, <a href=\"http://stackoverflow.com/q/371333\">stackoverflow.com/q/371333</a>"}, {"owner": {"reputation": 8957, "user_id": 3345375, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/TbVFk.png?s=128&g=1", "display_name": "jkdev", "link": "https://stackoverflow.com/users/3345375/jkdev"}, "edited": false, "score": 0, "creation_date": 1447882344, "post_id": 32617562, "comment_id": 55348679, "body": "Also: <a href=\"http://stackoverflow.com/q/5435937\">stackoverflow.com/q/5435937</a>"}], "owner": {"reputation": 2002, "user_id": 16947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/09a31803d316d11a7ed1ec71bb9e39ed?s=128&d=identicon&r=PG", "display_name": "RKitson", "link": "https://stackoverflow.com/users/16947/rkitson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1442435398, "answer_count": 0, "score": 1, "last_activity_date": 1442433386, "creation_date": 1442433386, "question_id": 32617562, "link": "https://stackoverflow.com/questions/32617562/in-ruby-why-does-z-return-the-string-z", "closed_reason": "Duplicate", "title": "In Ruby, why does ?z return the string &quot;z&quot;?", "body": "<p>I was looking through the ActiveModel::Validations source and found a comment that had this snippet of code in it:</p>\n\n<pre><code>    validates_each :first_name, :last_name do |record, attr, value|\n      record.errors.add attr, 'starts with z.' if value.to_s[0] == ?z\n    end\n</code></pre>\n\n<p>I understand what the snippet is demonstrating, but what caught my eye is the </p>\n\n<pre><code>    ?z\n</code></pre>\n\n<p>that the first character of the string is being compared to. So I spun up irb and, sure enough, ?z evaluates to a String with \"z\" as the value (while ?[ returns \"[\", ?? return \"?\", and ? followed by more than one character throws an exception).</p>\n\n<p>I've done my fair share of googling and haven't been able to figure out what's going on here.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby", "ruby-2.2"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1442434419, "post_id": 32617542, "comment_id": 53086344, "body": "Breaking a class like this will not solve anything. It will just make the problem worse by masking it somewhat."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1442434869, "post_id": 32617542, "comment_id": 53086613, "body": "As @max says, your class is doing too much. Extract some of its responsibilities into focused, smaller, manageable classes."}], "answers": [{"comments": [{"owner": {"reputation": 1701, "user_id": 1730536, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/BOZbc.png?s=128&g=1", "display_name": "Winston Kotzan", "link": "https://stackoverflow.com/users/1730536/winston-kotzan"}, "edited": false, "score": 0, "creation_date": 1442549403, "post_id": 32617720, "comment_id": 53135408, "body": "Thank you for the response. The support methods are specific to the class and should not be reused, so I will go with reopening the class. In this particular case the class is not unmanageably large yet but I am considering organizing its methods by category for aesthetic reasons."}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1442433956, "creation_date": 1442433956, "answer_id": 32617720, "question_id": 32617542, "link": "https://stackoverflow.com/questions/32617542/to-break-up-ruby-class-into-separate-files-by-mixins-or-plain-definitions/32617720#32617720", "title": "To break up Ruby class into separate files by mixins or plain definitions?", "body": "<p>Are your support methods general enough that they might be useful for other totally unrelated classes? If so, a mixin is the proper way to do this, since it lets you easily reuse the support code.</p>\n\n<p>However if your support methods are very specific to ReallyBigClass and are unlikely to work if included somewhere else, reopening the class is the way to go. Using a mixin there could give the appearance that the methods are more general than they really are, when really they should only be used with instances of a specific class.</p>\n\n<p>That being said, I think your question indicates a larger design problem. If you are in the former case (general methods), you should be designing more general modules in the first place to avoid tight coupling. A module called <code>ReallyBigClassFileB</code> gives off some strong code smell. In the latter case (very specific methods) if your class is so big that its file is unmanageably large you probably need to refactor something. Maybe your class is responsible for too much? Maybe it could use some subclasses (which make sense in separate files)?</p>\n"}], "owner": {"reputation": 1701, "user_id": 1730536, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/BOZbc.png?s=128&g=1", "display_name": "Winston Kotzan", "link": "https://stackoverflow.com/users/1730536/winston-kotzan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 32617720, "answer_count": 1, "score": 1, "last_activity_date": 1442433956, "creation_date": 1442433326, "question_id": 32617542, "link": "https://stackoverflow.com/questions/32617542/to-break-up-ruby-class-into-separate-files-by-mixins-or-plain-definitions", "title": "To break up Ruby class into separate files by mixins or plain definitions?", "body": "<p>What is the preferred way of breaking up a class into multiple files? Mixins could work, but in my case I just want to better organize a very large class. Of the two methods featured below, is one of them \"better\" than the other?</p>\n\n<p>file_A.rb</p>\n\n<pre><code>require 'file_B_class'\nrequire 'file_B_mixin'\n\nclass ReallyBigClass\n  include ReallyBigClassFileB\n\n   def primary_method\n    puts \"I'm the primary method\"\n  end\nend\n</code></pre>\n\n<p>file_B_class.rb</p>\n\n<pre><code>class ReallyBigClass\n\n  def support_method_as_class\n    puts \"I'm included in the main class by appending code\"\n  end\n\nend\n</code></pre>\n\n<p>file_B_mixin.rb</p>\n\n<pre><code> module ReallyBigClassFileB\n\n  def support_method_as_mixin\n    puts \"I'm included in the main class by mixin\"\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "rake", "learn-ruby-the-hard-way"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1442434088, "post_id": 32617505, "comment_id": 53086161, "body": "<code>gem install test-unit</code>"}], "answers": [{"comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1442437006, "post_id": 32618029, "comment_id": 53087696, "body": "Is it gold in here, or is it just me? :)"}], "tags": [], "owner": {"reputation": 11, "user_id": 4216262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c59fd22fe51bcbafd1e93c3ef6b5a02?s=128&d=identicon&r=PG&f=1", "display_name": "JoshyJosh", "link": "https://stackoverflow.com/users/4216262/joshyjosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1442435106, "creation_date": 1442435106, "answer_id": 32618029, "question_id": 32617505, "link": "https://stackoverflow.com/questions/32617505/stuck-on-learn-ruby-the-hard-way-46-rake-aborted/32618029#32618029", "title": "Stuck on Learn Ruby The Hard Way #46 rake aborted", "body": "<p>Thank you Anthony! You are golden! \nJust needed to install the <code>test-unit</code> gem with <code>gem install test-unit</code></p>\n"}], "owner": {"reputation": 11, "user_id": 4216262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c59fd22fe51bcbafd1e93c3ef6b5a02?s=128&d=identicon&r=PG&f=1", "display_name": "JoshyJosh", "link": "https://stackoverflow.com/users/4216262/joshyjosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442435126, "creation_date": 1442433212, "last_edit_date": 1442435126, "question_id": 32617505, "link": "https://stackoverflow.com/questions/32617505/stuck-on-learn-ruby-the-hard-way-46-rake-aborted", "title": "Stuck on Learn Ruby The Hard Way #46 rake aborted", "body": "<p>I made the project skeleton as described in <a href=\"http://learnrubythehardway.org/book/ex46.html\" rel=\"nofollow\">Learn Ruby The Hard Way #43</a> and created the structure stated. </p>\n\n<p>The problem occurs when I run <code>rake test</code> and the prompt spouts out the following:</p>\n\n<pre><code>/home/username/.rbenv/versions/2.2.2/bin/ruby -I\"lib:tests\"  \"/home/username/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rake/rake_test_loader.rb\" \"tests/test_NAME.rb\" \n/home/username/.rbenv/versions/2.2.2/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require': cannot load such file -- test/unit (LoadError)\n    from /home/username/.rbenv/versions/2.2.2/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from /mnt/30309D67309D34B6/Web Development/Tutorials/Ruby/projects/skeleton/tests/test_NAME.rb:2:in `&lt;top (required)&gt;'\n    from /home/username/.rbenv/versions/2.2.2/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from /home/username/.rbenv/versions/2.2.2/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    from /home/username/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rake/rake_test_loader.rb:15:in `block in &lt;main&gt;'\n    from /home/username/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rake/rake_test_loader.rb:4:in `select'\n    from /home/username/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rake/rake_test_loader.rb:4:in `&lt;main&gt;'\nrake aborted!\nCommand failed with status (1): [ruby -I\"lib:tests\"  \"/home/username/.rbenv/versions/2.2.2/lib/ruby/2.2.0/rake/rake_test_loader.rb\" \"tests/test_NAME.rb\" ]\n\nTasks: TOP =&gt; test\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>Can anybody tell me why the rake test gets aborted and how to possibly fix it?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "require"], "answers": [{"tags": [], "owner": {"reputation": 2218, "user_id": 5129208, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wfsc3HumFMQ/AAAAAAAAAAI/AAAAAAAAAGw/2TW94iOeLhQ/photo.jpg?sz=128", "display_name": "yez", "link": "https://stackoverflow.com/users/5129208/yez"}, "is_accepted": false, "score": 0, "last_activity_date": 1442432227, "creation_date": 1442432227, "answer_id": 32617250, "question_id": 32617044, "link": "https://stackoverflow.com/questions/32617044/failing-to-load-libraries-in-the-same-directory/32617250#32617250", "title": "Failing to load libraries in the same directory", "body": "<p>It might be an issue with your <code>$LOAD_PATH</code></p>\n\n<p><a href=\"http://apidock.com/ruby/Kernel/require\" rel=\"nofollow\">From the Ruby docs</a></p>\n\n<pre><code>require(p1) private\nLoads the given name, returning true if successful and false if the feature is already loaded.\n\nIf the filename does not resolve to an absolute path, it will be searched for in the directories listed in $LOAD_PATH ($:).\n</code></pre>\n\n<p>You could try <code>require './wsbillingaction'</code> </p>\n\n<p>or <code>require_relative './wsbillingaction'</code></p>\n\n<p>If none of that works, you could could add the path that <code>wsbillingactionDriver.rb</code> is in to your <code>$LOAD_PATH</code></p>\n"}], "owner": {"reputation": 5067, "user_id": 993554, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/UV0L9.jpg?s=128&g=1", "display_name": "Victor Ferreira", "link": "https://stackoverflow.com/users/993554/victor-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 16, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442432227, "creation_date": 1442431613, "last_edit_date": 1442431952, "question_id": 32617044, "link": "https://stackoverflow.com/questions/32617044/failing-to-load-libraries-in-the-same-directory", "title": "Failing to load libraries in the same directory", "body": "<p>I have this file <code>wsbillingactionDriver.rb</code> in</p>\n\n<p><code>lib/f2b/billing_action/</code></p>\n\n<p>And in the same directory I have the file <code>wsbillingaction.rb</code></p>\n\n<p>The first one tries to require the second as following:</p>\n\n<p><code>require 'wsbillingaction.rb'</code></p>\n\n<p>But it fails and says: <code>cannot load such file -- wsbillingaction.rb</code></p>\n\n<p>Why does it happen?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 513, "user_id": 3866214, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/43167464533036306044429bd947e7fa?s=128&d=identicon&r=PG&f=1", "display_name": "Banner", "link": "https://stackoverflow.com/users/3866214/banner"}, "edited": false, "score": 0, "creation_date": 1442431925, "post_id": 32617040, "comment_id": 53084954, "body": "Thanks for the reply collimarco. I substituted in your code, created a new review, then went to the command line and typed:[13] pry(main)&gt; r = Review.last   Review Load (0.3ms)  SELECT  &quot;reviews&quot;.* FROM &quot;reviews&quot;  ORDER BY &quot;reviews&quot;.&quot;id&quot; DESC LIMIT 1 #&lt;Review:0x007fa73fdc1d40&gt; {              :id =&gt; 7,          :rating =&gt; 5,           :title =&gt; &quot;bbbbbbbb&quot;,         :content =&gt; &quot;bbbbbbbbmmmmmmm&quot;,      :created_at =&gt; Wed, 16 Sep 2015 19:30:13 UTC +00:00,      :updated_at =&gt; Wed, 16 Sep 2015 19:30:13 UTC +00:00,        :movie_id =&gt; 3,     :reviewer_id =&gt; nil } [14] pry(main)&gt; r.reviewer nil"}, {"owner": {"reputation": 513, "user_id": 3866214, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/43167464533036306044429bd947e7fa?s=128&d=identicon&r=PG&f=1", "display_name": "Banner", "link": "https://stackoverflow.com/users/3866214/banner"}, "edited": false, "score": 0, "creation_date": 1442431982, "post_id": 32617040, "comment_id": 53084983, "body": "It doesn&#39;t populate for some reason. :reviewer_id is still nil and calling r.reviwer returns nil. Any idea on whats happening?"}, {"owner": {"reputation": 29648, "user_id": 51387, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9e339df8ac2b3b833c81ad0e3c0f46c5?s=128&d=identicon&r=PG", "display_name": "collimarco", "link": "https://stackoverflow.com/users/51387/collimarco"}, "reply_to_user": {"reputation": 513, "user_id": 3866214, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/43167464533036306044429bd947e7fa?s=128&d=identicon&r=PG&f=1", "display_name": "Banner", "link": "https://stackoverflow.com/users/3866214/banner"}, "edited": false, "score": 0, "creation_date": 1442432305, "post_id": 32617040, "comment_id": 53085152, "body": "Maybe is a problem with <code>current_user</code>? Are you sure it is defined? Try to add <code>p current_user</code> just above <code>@review.reviewer = current_user</code> and see in console if it prints the user (as expected) or nil."}, {"owner": {"reputation": 29648, "user_id": 51387, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9e339df8ac2b3b833c81ad0e3c0f46c5?s=128&d=identicon&r=PG", "display_name": "collimarco", "link": "https://stackoverflow.com/users/51387/collimarco"}, "reply_to_user": {"reputation": 513, "user_id": 3866214, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/43167464533036306044429bd947e7fa?s=128&d=identicon&r=PG&f=1", "display_name": "Banner", "link": "https://stackoverflow.com/users/3866214/banner"}, "edited": false, "score": 0, "creation_date": 1442432493, "post_id": 32617040, "comment_id": 53085270, "body": "You can also try using <code>@review.reviewer_id = current_use.id</code> but it&#39;s the same."}, {"owner": {"reputation": 513, "user_id": 3866214, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/43167464533036306044429bd947e7fa?s=128&d=identicon&r=PG&f=1", "display_name": "Banner", "link": "https://stackoverflow.com/users/3866214/banner"}, "edited": false, "score": 0, "creation_date": 1442432794, "post_id": 32617040, "comment_id": 53085435, "body": "Nevermind, your code worked! Part of the problem was that I was not authenticating the user before creating the review so it had no way of getting the id to begin with. Rookie mistake. Thanks for your help collimarco."}], "tags": [], "owner": {"reputation": 29648, "user_id": 51387, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9e339df8ac2b3b833c81ad0e3c0f46c5?s=128&d=identicon&r=PG", "display_name": "collimarco", "link": "https://stackoverflow.com/users/51387/collimarco"}, "is_accepted": true, "score": 1, "last_activity_date": 1442431608, "creation_date": 1442431608, "answer_id": 32617040, "question_id": 32616778, "link": "https://stackoverflow.com/questions/32616778/create-review-in-two-scopes-at-once/32617040#32617040", "title": "Create review in two scopes at once", "body": "<p>The following code will create the new review and assign it to the <code>current_user</code>:</p>\n\n<pre><code>def create\n    @movie = Movie.find(params[:movie_id])\n    @review = @movie.reviews.build(review_params)\n    @review.reviewer = current_user\n    if @review.save\n      # ...\nend\n</code></pre>\n\n<p>or alternatively:</p>\n\n<pre><code>def create\n    @review = Review.new(review_params)\n    @review.movie = Movie.find(params[:movie_id])\n    @review.reviewer = current_user\n    if @review.save\n      # ...\nend\n</code></pre>\n"}], "owner": {"reputation": 513, "user_id": 3866214, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/43167464533036306044429bd947e7fa?s=128&d=identicon&r=PG&f=1", "display_name": "Banner", "link": "https://stackoverflow.com/users/3866214/banner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 32617040, "answer_count": 1, "score": 0, "last_activity_date": 1442431608, "creation_date": 1442430552, "question_id": 32616778, "link": "https://stackoverflow.com/questions/32616778/create-review-in-two-scopes-at-once", "title": "Create review in two scopes at once", "body": "<p>I have two types of users, one that can create movies and one that can create reviews:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :created_movies, foreign_key: 'creator_id', class_name: 'Movie'\n  has_many :reviewed_movies, foreign_key: 'reviewer_id', class_name: 'Review'\nend\n\nclass Review &lt; ActiveRecord::Base\n  belongs_to :movie\n  belongs_to :reviewer, class_name: 'User'\nend\n\nclass Movie &lt; ActiveRecord::Base\n  has_many :reviews\n  belongs_to :creator, class_name: 'User'\nend\n</code></pre>\n\n<p>What I want to do is create the particular review and set the reviewer_id to the current_user at once. Here is my code for Review#create:</p>\n\n<pre><code>  def create\n    @movie = Movie.find(params[:movie_id])\n    @review = @movie.reviews.merge(current_user.reviewed_movies).create(review_params)\n    if @review.save\n.\n.\n.\nend\n</code></pre>\n\n<p>This does not make sense to me as I do have current_user defined in my SessionsHelper and have 'include SessionsHelper' in my application controller. Code for current_user:</p>\n\n<pre><code>  def current_user\n    @current_user ||= User.find_by(id: session[:user_id])\n  end\n</code></pre>\n\n<p>I've been stuck on this problem for a couple hours and would appreciate any assistance on how I can get past it, thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise"], "answers": [{"comments": [{"owner": {"reputation": 653, "user_id": 4230699, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0VBXh.gif?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/4230699/jonathan"}, "edited": false, "score": 0, "creation_date": 1442429119, "post_id": 32616357, "comment_id": 53083401, "body": "What would be the best controller to put this in?"}, {"owner": {"reputation": 653, "user_id": 4230699, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0VBXh.gif?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/4230699/jonathan"}, "edited": false, "score": 0, "creation_date": 1442429371, "post_id": 32616357, "comment_id": 53083541, "body": "Thanks a lot! Brilliant and Simple"}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 1, "last_activity_date": 1442429205, "last_edit_date": 1442429205, "creation_date": 1442429042, "answer_id": 32616357, "question_id": 32616136, "link": "https://stackoverflow.com/questions/32616136/strip-devise-email-to-just-first-letter/32616357#32616357", "title": "Strip Devise Email to just first letter", "body": "<p>In your view:</p>\n\n<pre><code>&lt;%= current_user.email[0].upcase %&gt;\n</code></pre>\n"}], "owner": {"reputation": 653, "user_id": 4230699, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0VBXh.gif?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/4230699/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 1, "accepted_answer_id": 32616357, "answer_count": 1, "score": 0, "last_activity_date": 1442429205, "creation_date": 1442428438, "question_id": 32616136, "link": "https://stackoverflow.com/questions/32616136/strip-devise-email-to-just-first-letter", "title": "Strip Devise Email to just first letter", "body": "<p>What I'm trying to accomplish is a button in my navigation menu with the first letter of your email, but leaving the database email field as is.</p>\n\n<p>e.g. If my email was 'test@test.com' in the navigation bar it would have 'T'.</p>\n\n<p>I have a default Devise setup, but no clue where to even start.</p>\n\n<p>Any help would be brilliant</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "xsd"], "comments": [{"owner": {"reputation": 654, "user_id": 1319545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d925d70e121e9b8e1a7dd44155e2497?s=128&d=identicon&r=PG", "display_name": "thaleshcv", "link": "https://stackoverflow.com/users/1319545/thaleshcv"}, "edited": false, "score": 0, "creation_date": 1442427003, "post_id": 32615646, "comment_id": 53082288, "body": "is <code>lib</code> folder in your loadpath? (Also, you have to ommit the .rb extension.)"}, {"owner": {"reputation": 5067, "user_id": 993554, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/UV0L9.jpg?s=128&g=1", "display_name": "Victor Ferreira", "link": "https://stackoverflow.com/users/993554/victor-ferreira"}, "reply_to_user": {"reputation": 654, "user_id": 1319545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d925d70e121e9b8e1a7dd44155e2497?s=128&d=identicon&r=PG", "display_name": "thaleshcv", "link": "https://stackoverflow.com/users/1319545/thaleshcv"}, "edited": false, "score": 0, "creation_date": 1442427627, "post_id": 32615646, "comment_id": 53082597, "body": "well I though it was by default. can you tell me how to do it? remember, <code>wsbillingaction</code> is being imported, the class &#39;xsd/qname` is the one giving me a headache"}], "answers": [{"tags": [], "owner": {"reputation": 725, "user_id": 1755526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QWC5g.png?s=128&g=1", "display_name": "Johnny D\u01b0\u01a1ng", "link": "https://stackoverflow.com/users/1755526/johnny-d%c6%b0%c6%a1ng"}, "is_accepted": false, "score": 1, "last_activity_date": 1442431281, "creation_date": 1442431281, "answer_id": 32616952, "question_id": 32615646, "link": "https://stackoverflow.com/questions/32615646/cannot-load-such-file-xsd-threw-by-controller-when-adding-a-library/32616952#32616952", "title": "Cannot load such file -- /xsd threw by controller when adding a library", "body": "<p><code>wsbillingaction</code> depend on another lib (<code>xsd/qname</code>), you should include it in your project or install it as a gem</p>\n"}], "owner": {"reputation": 5067, "user_id": 993554, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/UV0L9.jpg?s=128&g=1", "display_name": "Victor Ferreira", "link": "https://stackoverflow.com/users/993554/victor-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442431281, "creation_date": 1442426749, "question_id": 32615646, "link": "https://stackoverflow.com/questions/32615646/cannot-load-such-file-xsd-threw-by-controller-when-adding-a-library", "title": "Cannot load such file -- /xsd threw by controller when adding a library", "body": "<p>I'm trying to load a library from a Controller and it is throwing me this error</p>\n\n<p><code>cannot load such file -- /xsd</code></p>\n\n<p>It is, in fact, being loaded in the first line of the library file</p>\n\n<pre><code>require 'xsd/qname'\n\n# {http://www.f2b.com.br/soap/wsbillingaction.xsd}F2bAcaoCobranca\n#   mensagem - F2bAcaoCobranca::Mensagem\n#   cliente - F2bAcaoCobranca::Cliente\n#   acao_cobranca - F2bAcaoCobranca::Acao_cobranca\nclass F2bAcaoCobranca\n  #...\nend\n</code></pre>\n\n<p>The library's file is in the following directory:</p>\n\n<pre><code>lib\n--f2b\n  --acao_cobranca\n    --wsbillingaction.rb\n</code></pre>\n\n<p>And my controller's action has the following lines of code</p>\n\n<pre><code>def index\n   require 'f2b/acao_cobranca/wsbillingaction.rb'\nend\n</code></pre>\n\n<p>What is giving me this error? Is it some old stuff from previous versions of Ruby/Rails? How can I fix it?</p>\n"}, {"tags": ["arrays", "ruby", "string", "format"], "answers": [{"comments": [{"owner": {"reputation": 561, "user_id": 3447934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f772263b9b40093644f33332b1f2bed1?s=128&d=identicon&r=PG", "display_name": "soutoner", "link": "https://stackoverflow.com/users/3447934/soutoner"}, "edited": false, "score": 0, "creation_date": 1442427858, "post_id": 32615843, "comment_id": 53082728, "body": "Thank you for the info, there&#39;s a lot of magic inside ruby! hahah"}, {"owner": {"reputation": 13376, "user_id": 3357295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3PzYS.jpg?s=128&g=1", "display_name": "Doguita", "link": "https://stackoverflow.com/users/3357295/doguita"}, "edited": false, "score": 2, "creation_date": 1442428882, "post_id": 32615843, "comment_id": 53083277, "body": "This raises an error and, even fixed, don&#39;t add the &#39;and&#39; in the final"}], "tags": [], "owner": {"reputation": 2420, "user_id": 410342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5f0b031000821a8c179733db0a2f9e?s=128&d=identicon&r=PG", "display_name": "Shotgun Ninja", "link": "https://stackoverflow.com/users/410342/shotgun-ninja"}, "is_accepted": false, "score": -1, "last_activity_date": 1442429369, "last_edit_date": 1495541743, "creation_date": 1442427443, "answer_id": 32615843, "question_id": 32615603, "link": "https://stackoverflow.com/questions/32615603/array-to-string-with-specific-format/32615843#32615843", "title": "Array to String with specific format", "body": "<p><a href=\"https://stackoverflow.com/a/20626586/410342\">Here</a>'s a fun little shorthand trick in Ruby that you can do with arrays to cut out the need for a verbose <code>join</code>.</p>\n\n<pre><code>def password_constraints\n  @password_constraints[:length] &lt;&lt; ' Must contain.' &lt;&lt; @password_constraints[:contain] * \", \"\nend\n</code></pre>\n\n<p>The <code>Array</code> class' <code>*</code> operator explicitly checks for a <code>string</code> second operand, then converts to calling <code>join</code> under the covers.</p>\n"}, {"comments": [{"owner": {"reputation": 561, "user_id": 3447934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f772263b9b40093644f33332b1f2bed1?s=128&d=identicon&r=PG", "display_name": "soutoner", "link": "https://stackoverflow.com/users/3447934/soutoner"}, "edited": false, "score": 0, "creation_date": 1442429722, "post_id": 32616059, "comment_id": 53083729, "body": "Thank you so much for this solution, I&#39;ve never heard before about monkey patches. It works perfectly. The problem is that in this project I only need this behavior for one method. But in other projects where the &#39;and problem&#39; is more frequent, it will be the best solution! Thanks again."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1447088805, "post_id": 32616059, "comment_id": 55002920, "body": "While this works, it isn&#39;t more compact, and is no more &quot;Ruby like&quot;."}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1447138104, "post_id": 32616059, "comment_id": 55022529, "body": "@theTinMan that&#39;s fair, I did mention in the answer it wasn&#39;t the optimal way to write it. I just wanted to offer up monkey patching as a solution."}], "tags": [], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1442428173, "creation_date": 1442428173, "answer_id": 32616059, "question_id": 32615603, "link": "https://stackoverflow.com/questions/32615603/array-to-string-with-specific-format/32616059#32616059", "title": "Array to String with specific format", "body": "<p>I would use a monkey patch here for succinctness (yeah my <code>join_requirements</code> method could probably look a little nicer).</p>\n\n<pre><code>class Array\n  def join_requirements\n    result = \"\"\n    self.each do |requirement|\n      if requirement == self.last\n        result &lt;&lt; \"and \" &lt;&lt; requirement\n      else\n        result &lt;&lt; requirement + \", \"\n      end\n    end\n    result\n  end\nend\n</code></pre>\n\n<p>Then in your code you just see this:</p>\n\n<pre><code>contain = ['one number','one lowercase letter','one uppercase letter.']\nputs contain.join_requirements\n# =&gt; one number, one lowercase letter, and one uppercase letter.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2420, "user_id": 410342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af5f0b031000821a8c179733db0a2f9e?s=128&d=identicon&r=PG", "display_name": "Shotgun Ninja", "link": "https://stackoverflow.com/users/410342/shotgun-ninja"}, "edited": false, "score": 0, "creation_date": 1442429823, "post_id": 32616213, "comment_id": 53083790, "body": "This is definitely a more Ruby-like answer. Using the splat operator to pull the last element, and using string interpolation instead of concatenation is preferred for clarity. If you really wanted to get funky, you could change the second bit of interpolated code in the output string to be <code>&quot;#{(others &lt;&lt; second_last) * &#39;, &#39;}&quot;</code>, but that&#39;s a lot harder to read."}, {"owner": {"reputation": 561, "user_id": 3447934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f772263b9b40093644f33332b1f2bed1?s=128&d=identicon&r=PG", "display_name": "soutoner", "link": "https://stackoverflow.com/users/3447934/soutoner"}, "edited": false, "score": 0, "creation_date": 1442430473, "post_id": 32616213, "comment_id": 53084168, "body": "Such an elegant solution and very compact. It&#39;s definitely what I was looking for. Thank you so much!"}, {"owner": {"reputation": 561, "user_id": 3447934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f772263b9b40093644f33332b1f2bed1?s=128&d=identicon&r=PG", "display_name": "soutoner", "link": "https://stackoverflow.com/users/3447934/soutoner"}, "edited": false, "score": 0, "creation_date": 1442681643, "post_id": 32616213, "comment_id": 53187344, "body": "I update the solution: the second line of the method should be removed and it should be at the end of the third one, in order to not modify the current hash.   <code>*others, second_last, last = constraints[:contain]</code> <code>&quot;#{constraints[:length]} Must contain: #{(others &lt;&lt; second_last).join(&#39;, &#39;)}&quot; &lt;&lt; &quot; and #{last}&quot; unless last.nil?</code>"}, {"owner": {"reputation": 13376, "user_id": 3357295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3PzYS.jpg?s=128&g=1", "display_name": "Doguita", "link": "https://stackoverflow.com/users/3357295/doguita"}, "edited": false, "score": 0, "creation_date": 1442681672, "post_id": 32616213, "comment_id": 53187357, "body": "I don&#39;t know...You problably should create another question on SO with this new problem. But before that, if you are using Rails, you want to check <a href=\"http://api.rubyonrails.org/classes/Array.html#method-i-to_sentence\" rel=\"nofollow noreferrer\"><code>Array#to_sentence</code></a>"}, {"owner": {"reputation": 561, "user_id": 3447934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f772263b9b40093644f33332b1f2bed1?s=128&d=identicon&r=PG", "display_name": "soutoner", "link": "https://stackoverflow.com/users/3447934/soutoner"}, "edited": false, "score": 0, "creation_date": 1442681789, "post_id": 32616213, "comment_id": 53187394, "body": "Thank you for the help Doguita, I&#39;ve already found the problem.The problem was that I was actually modifying the hash every time I called the function hahah. Greetings!"}, {"owner": {"reputation": 13376, "user_id": 3357295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3PzYS.jpg?s=128&g=1", "display_name": "Doguita", "link": "https://stackoverflow.com/users/3357295/doguita"}, "reply_to_user": {"reputation": 561, "user_id": 3447934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f772263b9b40093644f33332b1f2bed1?s=128&d=identicon&r=PG", "display_name": "soutoner", "link": "https://stackoverflow.com/users/3447934/soutoner"}, "edited": false, "score": 0, "creation_date": 1442683070, "post_id": 32616213, "comment_id": 53187851, "body": "Hey @soutoner. Your solution had the same problem. I did an update and now it will work fine."}, {"owner": {"reputation": 561, "user_id": 3447934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f772263b9b40093644f33332b1f2bed1?s=128&d=identicon&r=PG", "display_name": "soutoner", "link": "https://stackoverflow.com/users/3447934/soutoner"}, "edited": false, "score": 0, "creation_date": 1442683996, "post_id": 32616213, "comment_id": 53188182, "body": "It&#39;s strange because both of them works for me, it must be a strange &quot;rails-thing&quot; hahaha thank you for your super fast help!"}], "tags": [], "owner": {"reputation": 13376, "user_id": 3357295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3PzYS.jpg?s=128&g=1", "display_name": "Doguita", "link": "https://stackoverflow.com/users/3357295/doguita"}, "is_accepted": true, "score": 4, "last_activity_date": 1442683001, "last_edit_date": 1442683001, "creation_date": 1442428683, "answer_id": 32616213, "question_id": 32615603, "link": "https://stackoverflow.com/questions/32615603/array-to-string-with-specific-format/32616213#32616213", "title": "Array to String with specific format", "body": "<p>You can use the splat operator to split the array and just check the case if there's only one string:  </p>\n\n<pre><code>def message(constraints)\n  *others, second_last, last = constraints[:contain]\n  second_last += \" and #{last}\" unless last.nil?\n  \"#{constraints[:length]} Must contain: #{(others &lt;&lt; second_last).join(', ')}\"\nend\n\n@password_constraints = {\n  length: 'Must be at least 6 character long.',\n  contain: [\n      'one number',\n      'one lowercase letter',\n      'one uppercase letter.'\n  ]\n}\n\nmessage(@password_constraints)\n# =&gt; \"Must be at least 6 character long. Must contain: one number, one lowercase letter and one uppercase letter.\" \n\n# if @password_constraints[:contain] = ['one lowercase letter', 'one uppercase letter.']\nmessage(@password_constraints)\n# =&gt; \"Must be at least 6 character long. Must contain: one lowercase letter and one uppercase letter.\" \n\n# if @password_constraints[:contain] = ['one lowercase letter']\nmessage(@password_constraints)\n# =&gt; \"Must be at least 6 character long. Must contain: one lowercase letter\"\n</code></pre>\n"}], "owner": {"reputation": 561, "user_id": 3447934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f772263b9b40093644f33332b1f2bed1?s=128&d=identicon&r=PG", "display_name": "soutoner", "link": "https://stackoverflow.com/users/3447934/soutoner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 32616213, "answer_count": 3, "score": 1, "last_activity_date": 1447088709, "creation_date": 1442426557, "last_edit_date": 1447088709, "question_id": 32615603, "link": "https://stackoverflow.com/questions/32615603/array-to-string-with-specific-format", "title": "Array to String with specific format", "body": "<p>I have a hash like this:</p>\n\n<pre><code>@password_constraints = {\n  length: 'Must be at least 6 character long.',\n  contain: [\n      'one number',\n      'one lowercase letter',\n      'one uppercase letter.'\n  ]\n}\n</code></pre>\n\n<p>And I want to write a method that returns an human-readable string built from this hash like this one:</p>\n\n<blockquote>\n  <p>Must be at least 6 character long. Must contain: one number, one lowercase letter <strong>and</strong> an uppercase letter.</p>\n</blockquote>\n\n<p>Currently, I have a very verbose method with an <code>each</code> that iterates over the <code>@password_constraints[:contain]</code> array and has several conditions to check if I have to put a <code>,</code>, or an <code>and</code> or nothing.</p>\n\n<p>But I want almost the same behavior as <code>join(', ')</code> but the last delimiter must be <code>and</code>.</p>\n\n<p>I'm looking for some sort of solution like this one with the special <code>join</code>:</p>\n\n<pre><code>def password_constraints\n  @password_constraints[:length] &lt;&lt; ' Must contain.' &lt;&lt; @password_constraints[:contain].join(', ') \nend\n</code></pre>\n\n<p>Is there a way to make this more compact or Ruby-like?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "shell"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1442426572, "post_id": 32615474, "comment_id": 53082020, "body": "using <code>system</code> allows you to check it&#39;s return value, so if you did <code>puts system &#39;..&#47;.&#47;program&#39;</code> what does the console show?  True = 0 exit status, False = non-zero exist status, nil = execution failed.  Also you could try it in pry/irb without the need for puts."}, {"owner": {"reputation": 11, "user_id": 4146387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6f5ca80cdc6280bb7371f277900476f?s=128&d=identicon&r=PG&f=1", "display_name": "user153509", "link": "https://stackoverflow.com/users/4146387/user153509"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1442426776, "post_id": 32615474, "comment_id": 53082150, "body": "The console has a blank line representing where the output should be printed"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1442426779, "post_id": 32615474, "comment_id": 53082153, "body": "I don&#39;t think your path is right, I just tried using system from a variety of dir&#39;s and it&#39;s working."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1442426792, "post_id": 32615474, "comment_id": 53082163, "body": "That means it was nil, the file wasn&#39;t found most likely"}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 1, "creation_date": 1442426807, "post_id": 32615474, "comment_id": 53082172, "body": "The call to <code>system</code> does not run &quot;from&quot; any particular sub-folder, and I cannot see where you change directory? Are you expecting the command to be run with current directory equal to value of <code>folder</code>? You probably need to cd - see <a href=\"http://stackoverflow.com/questions/3339883/to-change-directory-inside-a-ruby-script\" title=\"to change directory inside a ruby script\">stackoverflow.com/questions/3339883/&hellip;</a> - also consider using full paths, and alter your C++ program to accept a path to the file it is processing rather than loading in the file from the current dir."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 1, "creation_date": 1442429001, "post_id": 32615474, "comment_id": 53083335, "body": "@NeilSlater: Or change the C++ program to accept the XML on the standard input and use <a href=\"http://ruby-doc.org/stdlib-2.2.3/libdoc/open3/rdoc/index.html\" rel=\"nofollow noreferrer\"><code>Open3</code></a> to talk to it."}, {"owner": {"reputation": 11, "user_id": 4146387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6f5ca80cdc6280bb7371f277900476f?s=128&d=identicon&r=PG&f=1", "display_name": "user153509", "link": "https://stackoverflow.com/users/4146387/user153509"}, "reply_to_user": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1442601730, "post_id": 32615474, "comment_id": 53164227, "body": "@NeilSlater, the problem was not being in the correct folder, and was resolved using Dir.chdir, Thank you very much"}], "answers": [{"tags": [], "owner": {"reputation": 725, "user_id": 1755526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QWC5g.png?s=128&g=1", "display_name": "Johnny D\u01b0\u01a1ng", "link": "https://stackoverflow.com/users/1755526/johnny-d%c6%b0%c6%a1ng"}, "is_accepted": false, "score": -1, "last_activity_date": 1442432060, "creation_date": 1442432060, "answer_id": 32617193, "question_id": 32615474, "link": "https://stackoverflow.com/questions/32615474/calling-shell-command-to-run-c-code-from-ruby/32617193#32617193", "title": "Calling shell command to run C++ code from Ruby", "body": "<p>maybe system finding a program has name <code>.././program</code></p>\n\n<p>try the backtick operator or %x function</p>\n\n<pre><code>puts `.././program`\n\nputs %x{.././program}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4146387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6f5ca80cdc6280bb7371f277900476f?s=128&d=identicon&r=PG&f=1", "display_name": "user153509", "link": "https://stackoverflow.com/users/4146387/user153509"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442432060, "creation_date": 1442426106, "last_edit_date": 1495541651, "question_id": 32615474, "link": "https://stackoverflow.com/questions/32615474/calling-shell-command-to-run-c-code-from-ruby", "title": "Calling shell command to run C++ code from Ruby", "body": "<p>I have a compiled c++ file that I would like to run from within a temporary directory in ruby:</p>\n\n<pre><code>folder = Dir.mktmpdir\n      begin\n      puts folder\n      File.open(\"#{folder}/input.xml\", 'w') { |file| file.write(builder.to_xml) }\n\n      ensure\n      system '.././program'\n      FileUtils.remove_entry folder\n      end\n</code></pre>\n\n<p>The above code properly creates all the desired file/folder, but does not run the system call, and does not produce an error. I have tried the all of the varieties listed here: <a href=\"https://stackoverflow.com/questions/2232/calling-shell-commands-from-ruby\">Calling shell commands from Ruby</a> but cannot seem to get it to function. If I comment out the file deletion line and manually go and execute the command listed above, the program functions properly. Also, if I instead save the file to the same location as the ./program, the ./program works. What is preventing me from running the command from a sub-folder?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1676, "user_id": 3620442, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/osQPF.png?s=128&g=1", "display_name": "zenoh", "link": "https://stackoverflow.com/users/3620442/zenoh"}, "edited": false, "score": 0, "creation_date": 1442443614, "post_id": 32615938, "comment_id": 53090377, "body": "Thank you so much. Now just a side question, if you were to design a simple system like this, would you have done this way? Creating separate court and house model and using javascript do the selecting? What other different approach would you&#39;ve done?"}, {"owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "reply_to_user": {"reputation": 1676, "user_id": 3620442, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/osQPF.png?s=128&g=1", "display_name": "zenoh", "link": "https://stackoverflow.com/users/3620442/zenoh"}, "edited": false, "score": 0, "creation_date": 1442445386, "post_id": 32615938, "comment_id": 53090855, "body": "I think I would have done it like you did. Maybe someone else can chime in with different/better solution?"}], "tags": [], "owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "is_accepted": true, "score": 1, "last_activity_date": 1442427737, "creation_date": 1442427737, "answer_id": 32615938, "question_id": 32615417, "link": "https://stackoverflow.com/questions/32615417/remember-dynamic-select-options-in-rails/32615938#32615938", "title": "Remember dynamic select options in Rails", "body": "<p>For starters, you want to supply all Courts and the corresponding Houses for the currently-selected Court.</p>\n\n<pre><code>def edit\n  @event = Event.find(params[:id])\n  @courts = Court.all\n  @houses = House.where(:court_id =&gt; @event.court_id)\nend\n</code></pre>\n\n<p>Then you want your selects to select the proper value from the dropdown. Instead of:</p>\n\n<pre><code>&lt;%= f.select :court_id, options_for_select(@courts.collect { |court| [court.name, court.id] }, 1), {}, { id: 'courts_select' } %&gt;\n</code></pre>\n\n<p>Something like:</p>\n\n<pre><code>&lt;%= f.select :court_id, options_for_select(@courts.collect { |court| [court.name, court.id] }, @event.court_id), {}, { id: 'courts_select' } %&gt;\n</code></pre>\n\n<p>... rinse and repeat for the House select</p>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 1676, "user_id": 3620442, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/osQPF.png?s=128&g=1", "display_name": "zenoh", "link": "https://stackoverflow.com/users/3620442/zenoh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 1, "accepted_answer_id": 32615938, "answer_count": 1, "score": 1, "last_activity_date": 1442427737, "creation_date": 1442425904, "question_id": 32615417, "link": "https://stackoverflow.com/questions/32615417/remember-dynamic-select-options-in-rails", "title": "Remember dynamic select options in Rails", "body": "<p><strong>Models:</strong></p>\n\n<p>User create Event, and each Event need a Court location, then a House location, the value of House depends on the value of Court, for example:</p>\n\n<p>select Court A, returns House as A1, A2, A3</p>\n\n<p>select Court B, returns House as B1, B2, B3</p>\n\n<p><strong>In Event Controller form:</strong></p>\n\n<pre><code>def new\n  @event = current_user.events.build(event_params)\n  @courts = Court.all\n  @houses = House.where(\"court_id = ?\", Court.first.id)\nend\n\ndef edit\n  @event = Event.find(params[:id])\n  @courts = Court.where(:id =&gt; @event.court_id)\n  @houses = House.where(:id =&gt; @event.house_id)\nend   \n</code></pre>\n\n<p><strong>In View form:</strong></p>\n\n<pre><code>&lt;%= f.label 'Event Location' %&gt;\n&lt;%= f.select :court_id, options_for_select(@courts.collect { |court| [court.name, court.id] }, 1), {}, { id: 'courts_select' } %&gt;\n&lt;%= f.select :house_id, options_for_select(@houses.collect { |house| [house.name, house.id] }, 0), {}, { id: 'houses_select' } %&gt;\n</code></pre>\n\n<p><strong>Javascript:</strong></p>\n\n<pre><code>$(function() {\n  return $(document).on('change', '#courts_select', function(evt) {\n    return $.ajax('/events/update_houses', {\n      type: 'GET',\n      dataType: 'script',\n      data: {\n        court_id: $(\"#courts_select option:selected\").val()\n      },\n      error: function(jqXHR, textStatus, errorThrown) {\n        return console.log(\"AJAX Error: \" + textStatus);\n      },\n      success: function(data, textStatus, jqXHR) {\n        return console.log(\"Dynamic court select OK!\");\n      }\n    });\n  });\n});\n</code></pre>\n\n<p>Now this works fine when the user create the event, but when they want to edit, the Court and House Select only shows 1 value. It's because in the edit controller the <em>where()</em> only returns 1 value. How can I change my edit controller code so that at edit form, it returns the a list of choices and remembers the user's choice</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1442426131, "post_id": 32615351, "comment_id": 53081706, "body": "What is the exact error? Nothing here seems wrong. Have a closer look at the stack trace to see where the problem lies."}, {"owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "edited": false, "score": 0, "creation_date": 1442426524, "post_id": 32615351, "comment_id": 53081983, "body": "Can you show the full stack trace? Look at the file and line number at the top of the stack trace: what code is in that files on that line? What, exactly, is <code>nil</code> when it shouldn&#39;t be?"}, {"owner": {"reputation": 385, "user_id": 3032378, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/HKF8M.png?s=128&g=1", "display_name": "Splinti", "link": "https://stackoverflow.com/users/3032378/splinti"}, "edited": false, "score": 0, "creation_date": 1442427056, "post_id": 32615351, "comment_id": 53082315, "body": "Can I send a screenshot ? Am I allowed to do this ?"}, {"owner": {"reputation": 515, "user_id": 4144866, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-kmmVigod6EA/AAAAAAAAAAI/AAAAAAAAAVc/9kcR71k-5I8/photo.jpg?sz=128", "display_name": "rakeshpatra", "link": "https://stackoverflow.com/users/4144866/rakeshpatra"}, "edited": false, "score": 0, "creation_date": 1442427434, "post_id": 32615351, "comment_id": 53082502, "body": "Please explain with the exact error which you are getting"}, {"owner": {"reputation": 385, "user_id": 3032378, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/HKF8M.png?s=128&g=1", "display_name": "Splinti", "link": "https://stackoverflow.com/users/3032378/splinti"}, "edited": false, "score": 0, "creation_date": 1442427493, "post_id": 32615351, "comment_id": 53082535, "body": "I&#39;ve edited my question"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1442428112, "post_id": 32615351, "comment_id": 53082856, "body": "You&#39;re certainly allowed to add text, which is preferred over images when it&#39;s text-based information."}, {"owner": {"reputation": 385, "user_id": 3032378, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/HKF8M.png?s=128&g=1", "display_name": "Splinti", "link": "https://stackoverflow.com/users/3032378/splinti"}, "edited": false, "score": 0, "creation_date": 1442503145, "post_id": 32615351, "comment_id": 53116799, "body": "I&#39;ve found out that the error disappears if I only resave any of the files apparently"}], "answers": [{"comments": [{"owner": {"reputation": 385, "user_id": 3032378, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/HKF8M.png?s=128&g=1", "display_name": "Splinti", "link": "https://stackoverflow.com/users/3032378/splinti"}, "edited": false, "score": 0, "creation_date": 1442429315, "post_id": 32615955, "comment_id": 53083507, "body": "But I cant use ANY @articles.* in the view until i resave the controller... which is a shame"}, {"owner": {"reputation": 385, "user_id": 3032378, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/HKF8M.png?s=128&g=1", "display_name": "Splinti", "link": "https://stackoverflow.com/users/3032378/splinti"}, "edited": false, "score": 0, "creation_date": 1442429900, "post_id": 32615955, "comment_id": 53083839, "body": "in the controller it says Articles.all which should set &quot;@articles&quot;, but I cant access &quot;@articles&quot; in the view until i re-saved my controller file ( just write a space, delete it and save it again )"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": false, "score": 0, "last_activity_date": 1442428341, "last_edit_date": 1442428341, "creation_date": 1442427783, "answer_id": 32615955, "question_id": 32615351, "link": "https://stackoverflow.com/questions/32615351/controller-model-nil-error-in-rails/32615955#32615955", "title": "controller/model nil error in rails", "body": "<blockquote>\n  <p>undefined method count for nil:NilClass</p>\n</blockquote>\n\n<p><code>@articles</code> is <strong><em>nil</em></strong>, so is the error. You can replace <code>&lt;% if @articles.count != 0 %&gt;</code> to <code>&lt;% if !@articles.blank? %&gt;</code> or <code>&lt;% if @articles.present? %&gt;</code> which does the same.</p>\n"}, {"tags": [], "owner": {"reputation": 385, "user_id": 3032378, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/HKF8M.png?s=128&g=1", "display_name": "Splinti", "link": "https://stackoverflow.com/users/3032378/splinti"}, "is_accepted": false, "score": 0, "last_activity_date": 1442671504, "last_edit_date": 1442671504, "creation_date": 1442605561, "answer_id": 32659920, "question_id": 32615351, "link": "https://stackoverflow.com/questions/32615351/controller-model-nil-error-in-rails/32659920#32659920", "title": "controller/model nil error in rails", "body": "<p>Edit: It didn't fix it, just temporary for some reason.</p>\n\n<p>I fixed it! I had the following in my <code>routes.rb</code></p>\n\n<pre><code>namespace \"admin\" do\n  resources :articles\n  resources :usermanagment\nend\n</code></pre>\n\n<p>and I commented the <code>resources :articles</code> out and that fixed my error somehow.\nThanks for your help though</p>\n"}], "owner": {"reputation": 385, "user_id": 3032378, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/HKF8M.png?s=128&g=1", "display_name": "Splinti", "link": "https://stackoverflow.com/users/3032378/splinti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1442671504, "creation_date": 1442425654, "last_edit_date": 1442427463, "question_id": 32615351, "link": "https://stackoverflow.com/questions/32615351/controller-model-nil-error-in-rails", "title": "controller/model nil error in rails", "body": "<p>in my controller I use the following code to send all Articles to the View</p>\n\n<pre><code>class Admin::ArticlesController &lt; ApplicationController\n  layout 'adminpanel'\n\n  before_action :require_user\n  before_action :require_admin\n\n  def index\n    @articles = News.all\n  end\nend\n</code></pre>\n\n<p>But every time I restart my rails server it shows me a nil:nilClass error for some reason.\nWhen I've got this error I have to open my controller, delete a letter in that, rewrite it and save it (Nothing is changed, just rewrote the letter to be able to save) but I don't know why this happens. I've got this </p>\n\n<blockquote>\n  <p>News.all</p>\n</blockquote>\n\n<p>in another controller which is on the root route of rails</p>\n\n<p>Here is a screenshot of the error:\n<a href=\"https://i.stack.imgur.com/245UX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/245UX.png\" alt=\"error\"></a></p>\n\n<p>Thanks for further help!</p>\n"}, {"tags": ["ruby", "amazon-dynamodb"], "answers": [{"tags": [], "owner": {"reputation": 7789, "user_id": 446051, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0b8bdc65ba82c971b6b03d02255348?s=128&d=identicon&r=PG", "display_name": "yasith", "link": "https://stackoverflow.com/users/446051/yasith"}, "is_accepted": true, "score": 1, "last_activity_date": 1442436617, "creation_date": 1442436617, "answer_id": 32618422, "question_id": 32615178, "link": "https://stackoverflow.com/questions/32615178/ruby-dynamodb-get-item-query-failing-with-validationexception/32618422#32618422", "title": "Ruby DynamoDB get_item query failing with ValidationException", "body": "<p>Turns out I was missing the range key in the query.</p>\n\n<p>Our primary index is made up from the hash key, and the range key.</p>\n\n<p>After changing the query to.</p>\n\n<pre><code>query = {\n    table_name : TABLE_NAME,\n    key : {\n        'foo:bar'.to_sym =&gt; {:s =&gt; 'value'}\n        'range_key' =&gt; {:s =&gt; 'value'}\n    }  \n}\n</code></pre>\n\n<p>It's working as intended.</p>\n"}], "owner": {"reputation": 7789, "user_id": 446051, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0b8bdc65ba82c971b6b03d02255348?s=128&d=identicon&r=PG", "display_name": "yasith", "link": "https://stackoverflow.com/users/446051/yasith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "accepted_answer_id": 32618422, "answer_count": 1, "score": 0, "last_activity_date": 1442436617, "creation_date": 1442425010, "question_id": 32615178, "link": "https://stackoverflow.com/questions/32615178/ruby-dynamodb-get-item-query-failing-with-validationexception", "title": "Ruby DynamoDB get_item query failing with ValidationException", "body": "<p>I'm trying to query DynamoDB using the Ruby api.</p>\n\n<pre><code>query = {\n    table_name : TABLE_NAME,\n    key : {\n        'foo:bar'.to_sym =&gt; {:s =&gt; 'value'}\n    }  \n}\nx = @ddb_client.get_item(query) # ERROR on this line.\n</code></pre>\n\n<p>The error is.</p>\n\n<pre><code>The provided key element does not match the schema (Aws::DynamoDB::Errors::ValidationException)\n</code></pre>\n\n<p>I have a feeling that this is because the hash key of the table is named <code>foo:bar</code> with a colon in it's name. I can't use <code>key : { :index =&gt; \"value\"}</code> because of this.</p>\n\n<p>I have tried the following values for the key.</p>\n\n<ul>\n<li><code>'foo:bar'</code></li>\n<li><code>\"foo:bar\"</code></li>\n<li><code>:'foo:bar'</code></li>\n<li><code>:\"foo:bar\"</code></li>\n<li><code>\"foo:bar\".to_sym</code></li>\n<li><code>'foo:bar'.to_sym</code></li>\n</ul>\n\n<p>Still keep getting the same error.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "spree"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1442427489, "post_id": 32615077, "comment_id": 53082532, "body": "I&#39;m pretty sure that association methods are dynamically generated, IOW, they don&#39;t <i>have</i> a source location, simply because they don&#39;t have &quot;source code&quot;!"}, {"owner": {"reputation": 578, "user_id": 1270248, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eca22ab18e3a9064b17eb01518443cd4?s=128&d=identicon&r=PG", "display_name": "geermc4", "link": "https://stackoverflow.com/users/1270248/geermc4"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1442429464, "post_id": 32615077, "comment_id": 53083596, "body": "What I was trying to shoot for was the file which defined the association, any extension in spree can add associations so wasn&#39;t like opening the model definition and looking at it :)"}], "answers": [{"comments": [{"owner": {"reputation": 578, "user_id": 1270248, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eca22ab18e3a9064b17eb01518443cd4?s=128&d=identicon&r=PG", "display_name": "geermc4", "link": "https://stackoverflow.com/users/1270248/geermc4"}, "edited": false, "score": 0, "creation_date": 1442425949, "post_id": 32615367, "comment_id": 53081590, "body": "not quite, the association is probably a <code>has_one</code> and is not defined in the other class, but thanks, helpful"}, {"owner": {"reputation": 1281, "user_id": 3232523, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u6WFs.png?s=128&g=1", "display_name": "Ninigi", "link": "https://stackoverflow.com/users/3232523/ninigi"}, "reply_to_user": {"reputation": 578, "user_id": 1270248, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eca22ab18e3a9064b17eb01518443cd4?s=128&d=identicon&r=PG", "display_name": "geermc4", "link": "https://stackoverflow.com/users/1270248/geermc4"}, "edited": false, "score": 2, "creation_date": 1442426133, "post_id": 32615367, "comment_id": 53081709, "body": "@geermc4 if it&#39;s a has_one, then the singularized form of accounts should do, right? ;)"}, {"owner": {"reputation": 578, "user_id": 1270248, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eca22ab18e3a9064b17eb01518443cd4?s=128&d=identicon&r=PG", "display_name": "geermc4", "link": "https://stackoverflow.com/users/1270248/geermc4"}, "edited": false, "score": 0, "creation_date": 1442426909, "post_id": 32615367, "comment_id": 53082230, "body": "<i>probably</i> a has_one just guessing as I haven&#39;t found it, also, the associated class doesn&#39;t respond to the method"}, {"owner": {"reputation": 578, "user_id": 1270248, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eca22ab18e3a9064b17eb01518443cd4?s=128&d=identicon&r=PG", "display_name": "geermc4", "link": "https://stackoverflow.com/users/1270248/geermc4"}, "edited": false, "score": 0, "creation_date": 1442428236, "post_id": 32615367, "comment_id": 53082920, "body": "Doh, you guys are probably right, this one in particular was just a foreign key on the record /shy"}], "tags": [], "owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "is_accepted": true, "score": 1, "last_activity_date": 1442425727, "creation_date": 1442425727, "answer_id": 32615367, "question_id": 32615077, "link": "https://stackoverflow.com/questions/32615077/how-can-i-find-the-source-location-for-a-association-in-rails/32615367#32615367", "title": "How can I find the source location for a association in rails", "body": "<p>There is a method <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Reflection/ClassMethods.html#method-i-reflect_on_association\" rel=\"nofollow\"><code>reflect_on_association</code></a> which might help you.</p>\n\n<pre><code>Customer.reflect_on_association(:accounts).class_name #=&gt; Account\nklass = 'Account'.constantize\nklass.method(:my_method).source_location\n</code></pre>\n"}], "owner": {"reputation": 578, "user_id": 1270248, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eca22ab18e3a9064b17eb01518443cd4?s=128&d=identicon&r=PG", "display_name": "geermc4", "link": "https://stackoverflow.com/users/1270248/geermc4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 1, "accepted_answer_id": 32615367, "answer_count": 1, "score": 4, "last_activity_date": 1442425727, "creation_date": 1442424673, "question_id": 32615077, "link": "https://stackoverflow.com/questions/32615077/how-can-i-find-the-source-location-for-a-association-in-rails", "title": "How can I find the source location for a association in rails", "body": "<p>For a regular method I can just call <code>obj.method(:name).source_location</code> and that works great, however if I do that for associations the <code>source_location</code> points me to <code>.../activerecord-4.2.0/lib/active_record/associations/builder/association.rb</code> is there anything similar for associations? </p>\n\n<p>I'm working with <a href=\"https://spreecommerce.com/\" rel=\"nofollow\" title=\"Spree\">Spree</a> with a bunch of extensions and there are way too many places where it can be defined, I can <code>grep</code> my way to it but wondering if there's a straight forward way like <code>source_location</code></p>\n"}, {"tags": ["ruby", "json", "haml"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1442422216, "post_id": 32614343, "comment_id": 53079487, "body": "What have you tried? The <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-group_by\" rel=\"nofollow noreferrer\"><code>group_by</code></a> function is super helpful here."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1442423245, "post_id": 32614343, "comment_id": 53080089, "body": "Welcome to Stack Overflow. It&#39;s important to give us minimal input data, the expected output, and the minimal code necessary to reproduce the problem you&#39;re seeing. That last part, the minimal code necessary to reproduce the problem helps us NOT try everything possible but focus on how you&#39;re attacking the problem. As is, it seems like you haven&#39;t tried and want us to try for you, or explain how to do it, neither of which are how SO works."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1442436303, "post_id": 32614343, "comment_id": 53087336, "body": "When you give an example in a question (generally a very good thing to do) it is important that the input be valid Ruby objects. As you know, JSON objects are strings, so you need to add single quotes <code>&#39;{...}&#39;</code>, or use <code>%s[...]</code> or a heredoc. Also, you should assign all input values to variables, so they can be referenced in answers and comments without having to define them. For example, <code>str = </code>&#39;{...}&#39;`."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1442427663, "post_id": 32614971, "comment_id": 53082614, "body": "Excellent. Well done. Just what I&#39;d have posted. <code>by_date.map{ |k, v| [k, v.minmax] }.to_h</code> is also useful."}, {"owner": {"reputation": 21, "user_id": 5245746, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1312ef16de616c52fbd584a0b5f9544f?s=128&d=identicon&r=PG&f=1", "display_name": "doesey", "link": "https://stackoverflow.com/users/5245746/doesey"}, "edited": false, "score": 0, "creation_date": 1442435750, "post_id": 32614971, "comment_id": 53087065, "body": "Cary, thanks for the answer. It really helped. What if I already have the high/low values in the json and I&#39;m able to create an array with it? Say, I have, <code>high = [100,100,100,90,90,100,100]   low = [20,20,20,10,10,30,40]</code>. Also I have an identifier for a group of elements. <code>id=[1,1,1,2,2,3,4]</code>. How do I split this based on the identifier? I want the result to be <code>high = [100, 90,100,100] low = [20, 10, 30, 40] id = [1,2,3,4]</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1442435914, "post_id": 32614971, "comment_id": 53087147, "body": "You&#39;ll have to be more specific. Probably best to post another question."}, {"owner": {"reputation": 21, "user_id": 5245746, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1312ef16de616c52fbd584a0b5f9544f?s=128&d=identicon&r=PG&f=1", "display_name": "doesey", "link": "https://stackoverflow.com/users/5245746/doesey"}, "edited": false, "score": 0, "creation_date": 1442437326, "post_id": 32614971, "comment_id": 53087838, "body": "Cary, I have edited the above comment to be more specific. Do you get my question ?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1442440575, "post_id": 32614971, "comment_id": 53089388, "body": "I just saw your comment but have to leave. I&#39;ll address it later today."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1442564441, "post_id": 32614971, "comment_id": 53141692, "body": "doesey, my apologies for the delay in answering the question you posted in the comment. I answered that with an edit to my answer. Please let me know if I misunderstood what you are looking for."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1442564358, "last_edit_date": 1442564358, "creation_date": 1442424269, "answer_id": 32614971, "question_id": 32614343, "link": "https://stackoverflow.com/questions/32614343/display-all-the-values-for-every-date-in-json/32614971#32614971", "title": "Display all the values for every date in JSON", "body": "<p>If <code>str</code> is your JSON string:</p>\n\n<pre><code>require 'json'\narr = JSON.parse(str)[\"groups\"]\n  #=&gt; [{\"values\"=&gt;\"21\", \"date\"=&gt;\"2013-02-22\"},\n  #    {\"values\"=&gt;\"25\", \"date\"=&gt;\"2013-02-22\"},\n  #    {\"values\"=&gt;\"20\", \"date\"=&gt;\"2013-02-22\"},\n  #    {\"values\"=&gt;\"19\", \"date\"=&gt;\"2013-02-22\"},\n  #    {\"values\"=&gt;\"42\", \"date\"=&gt;\"2013-02-10\"},\n  #    {\"values\"=&gt;\"30\", \"date\"=&gt;\"2013-02-10\"},\n  #    {\"values\"=&gt;\"11\", \"date\"=&gt;\"2013-02-10\"}] \n\nby_date = arr.each_with_object(Hash.new {|h,k| h[k] = []}) { |g,h|\n  h[g[\"date\"]] &lt;&lt; g[\"values\"].to_i }\n  # =&gt; {\"2013-02-22\"=&gt;[21, 25, 20, 19], \"2013-02-10\"=&gt;[42, 30, 11]}\n\ndates = by_date.keys\n  #=&gt; [\"2013-02-22\", \"2013-02-10\"]     \nmin_vals, max_vals = *by_date.map { |_,vals| vals.minmax }\n  #=&gt; [[19, 25], [11, 42]] \nmin_vals\n  #=&gt; [19, 25] \nmax_vals\n  #=&gt; [11, 42] \n</code></pre>\n\n<p>The method <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-each_with_object\" rel=\"nofollow\">Enumerable#each_with_object</a> takes an argument that is the initial value of the object that will be constructed and returned by the method. It's value is given by the second block variable, <code>h</code>. I made that argument an empty hash with a default value given by the block:</p>\n\n<pre><code>{|h,k| h[k] = []}\n</code></pre>\n\n<p>What is the \"default value\"? All it means is that if the hash <code>h</code> does not have a key <code>k</code>, <code>h[k]</code> returns an empty array. Let's see how that works here.</p>\n\n<p>Initially, <code>h #=&gt; {}</code> and <code>each_with_object</code> sets the first block variable, <code>g</code> equal to the first value of <code>arr</code>:</p>\n\n<pre><code>g = {\"values\"=&gt;\"21\", \"date\"=&gt;\"2013-02-22\"}\n</code></pre>\n\n<p>and block calculation is performed:</p>\n\n<pre><code>h[g[\"date\"]] &lt;&lt; g[\"values\"].to_i\n  #=&gt; h[\"2013-02-22\"] &lt;&lt; 21\n</code></pre>\n\n<p>Since <code>h</code> does not have a key <code>\"2013-02-22\"</code>, <code>h[\"2013-02-22\"]</code> is first set equal to the default value, an empty array:</p>\n\n<pre><code>h[\"2013-02-22\"] = []\n</code></pre>\n\n<p>then</p>\n\n<pre><code>h[\"2013-02-22\"] &lt;&lt; 21\n  #=&gt; [21] \nh #=&gt; {\"2013-02-22\"=&gt;[21]} \n</code></pre>\n\n<p>When the next value of <code>arr</code> is passed to the block:</p>\n\n<pre><code>g = {\"values\"=&gt;\"25\", \"date\"=&gt;\"2013-02-22\"}\n</code></pre>\n\n<p>and <code>h</code> is as above. So now the block calculation is:</p>\n\n<pre><code>h[g[\"date\"]] &lt;&lt; g[\"values\"].to_i\n  #=&gt; h[\"2013-02-22\"] &lt;&lt; 25\n  #=&gt; [21, 25] \nh #=&gt; {\"2013-02-22\"=&gt;[21, 25]} \n</code></pre>\n\n<p>The default value is not used this time, as <code>h</code> has a key <code>\"2013-02-22\"</code>.</p>\n\n<p>One other thing may require explanation: the \"splat\" <code>*</code> in:</p>\n\n<pre><code>min_vals, max_vals = *by_date.map { |_,vals| vals.minmax }\n</code></pre>\n\n<p>We see that:</p>\n\n<pre><code>by_date.map { |date, vals| vals.minmax }\n  #=&gt; [[19, 25], [11, 42]]\n</code></pre>\n\n<p>If <code>*by_date.map { |date, vals| vals.minmax }</code> is on the right side of an equality, the splat causes the two elements of <code>[[19, 25], [11, 42]]</code> are assigned to variables on the left side of the equality using <em>parallel assignment</em>. The weird and wonderful <a href=\"https://endofline.wordpress.com/2011/01/21/the-strange-ruby-splat/\" rel=\"nofollow\">splat operator</a> needs to be in every Rubiest's bag of tricks.</p>\n\n<p>Since I'm not using <code>date</code> in the block calculation, I've drawn attention to that by replacing <code>date</code> with the local variable <code>_</code>.</p>\n\n<p><strong>Edit:</strong> To answer the question you posted in a comment, if:</p>\n\n<pre><code>id   = [1,1,1,2,2,3,4]\nhigh = [100,100,100,90,90,100,100]\nlow  = [20,20,20,10,10,30,40]\n</code></pre>\n\n<p>and I understand your question correctly, you could first compute:</p>\n\n<pre><code>indices = id.each_with_index.to_a.uniq(&amp;:first).map(&amp;:last)\n  #=&gt; [0, 3, 5, 6]\n</code></pre>\n\n<p>Then the three arrays you want are:</p>\n\n<pre><code>id.values_at(*indices)\n  #=&gt; [1, 2, 3, 4] \nhigh.values_at(*indices)\n  #=&gt; [100, 90, 100, 100] \nlow.values_at(*indices)\n  #=&gt; [20, 10, 30, 40] \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13376, "user_id": 3357295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3PzYS.jpg?s=128&g=1", "display_name": "Doguita", "link": "https://stackoverflow.com/users/3357295/doguita"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1442447498, "post_id": 32615208, "comment_id": 53091365, "body": "@CarySwoveland I understand that but I believe someone new to a language have to be always reading the documentation and try all methods in answers to see what happens and learn from that."}], "tags": [], "owner": {"reputation": 13376, "user_id": 3357295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3PzYS.jpg?s=128&g=1", "display_name": "Doguita", "link": "https://stackoverflow.com/users/3357295/doguita"}, "is_accepted": false, "score": 1, "last_activity_date": 1442426313, "last_edit_date": 1442426313, "creation_date": 1442425127, "answer_id": 32615208, "question_id": 32614343, "link": "https://stackoverflow.com/questions/32614343/display-all-the-values-for-every-date-in-json/32615208#32615208", "title": "Display all the values for every date in JSON", "body": "<p>You can <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-group_by\" rel=\"nofollow\"><code>group_by</code></a> <code>:date</code> and iterate through the dates. Then create an array of <code>:values</code> in the group.  </p>\n\n<p>Then use <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-minmax\" rel=\"nofollow\"><code>minmax</code></a> to get the proper values and <a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-transpose\" rel=\"nofollow\"><code>transpose</code></a> the final array to get your arrays and assign to dates, low and high.  </p>\n\n<pre><code>json = {\n  \"groups\": [\n    { \"values\": \"21\", \"date\": \"2013-02-22\" },\n    { \"values\": \"25\", \"date\": \"2013-02-22\" },\n    { \"values\": \"20\", \"date\": \"2013-02-22\" },\n    { \"values\": \"19\", \"date\": \"2013-02-22\" },\n    { \"values\": \"42\", \"date\": \"2013-02-10\" },\n    { \"values\": \"30\", \"date\": \"2013-02-10\" },\n    { \"values\": \"11\", \"date\": \"2013-02-10\" }\n  ]\n}\n\ndates, low, high = json[:groups].group_by { |g| g[:date] }.map do |date, grouped|\n  values = grouped.map { |group| group[:values] }\n  [date, *values.minmax]\nend.transpose\n# =&gt; =&gt; [[\"2013-02-22\", \"2013-02-10\"], [\"19\", \"11\"], [\"25\", \"42\"]] \n\ndates\n# =&gt; [\"2013-02-22\", \"2013-02-10\"]\nlow\n# =&gt; [\"19\", \"11\"]\nhigh\n# =&gt; [\"25\", \"42\"]\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5245746, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1312ef16de616c52fbd584a0b5f9544f?s=128&d=identicon&r=PG&f=1", "display_name": "doesey", "link": "https://stackoverflow.com/users/5245746/doesey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1442564358, "creation_date": 1442422118, "last_edit_date": 1442426433, "question_id": 32614343, "link": "https://stackoverflow.com/questions/32614343/display-all-the-values-for-every-date-in-json", "title": "Display all the values for every date in JSON", "body": "<p>I have the following JSON:</p>\n\n<pre><code>{\n    \"groups\" : [\n      {\n        \"values\": \"21\",\n        \"date\": \"2013-02-22\"\n      },\n      {\n        \"values\": \"25\",\n        \"date\": \"2013-02-22\"\n      },\n      {\n        \"values\": \"20\",\n        \"date\": \"2013-02-22\"\n      },\n      {\n        \"values\": \"19\",\n        \"date\": \"2013-02-22\"\n      },\n      {\n        \"values\": \"42\",\n        \"date\": \"2013-02-10\"\n      },\n      {\n        \"values\": \"30\",\n        \"date\": \"2013-02-10\"\n      },\n      {\n        \"values\": \"11\",\n        \"date\": \"2013-02-10\"\n      }\n\n    ]\n}\n</code></pre>\n\n<p>I have the values and the date already extracted in a Ruby Class. I want to find the \"highest\" and \"lowest\" value for every date. How do I do that?</p>\n\n<p>Also I want to create parallel arrays for the same. For instance:</p>\n\n<pre><code>low = [12, 22, 11, 45]\nhigh = [34, 50, 15, 60]\ndates = [\"2013-02-22\", \"2013-02-10\", \"2013-02-06\", \"2013-02-01\"]\n</code></pre>\n\n<p>I would also like to display all the values for every date.</p>\n\n<p>Could someone please give me some direction for this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord", "model-view-controller"], "comments": [{"owner": {"reputation": 2708, "user_id": 1757338, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c5ddddc8fdccc5c2bd49dc74c02a60b7?s=128&d=identicon&r=PG", "display_name": "yeyo", "link": "https://stackoverflow.com/users/1757338/yeyo"}, "edited": false, "score": 0, "creation_date": 1442423561, "post_id": 32614160, "comment_id": 53080283, "body": "maybe this could help: what about the <code>autosave: true</code> option? Without this option, you must save explicitly the object every time you update a relation."}], "answers": [{"comments": [{"owner": {"reputation": 487, "user_id": 5125743, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/02078cea0ba2ebf97d6926c9d06207fe?s=128&d=identicon&r=PG&f=1", "display_name": "james ", "link": "https://stackoverflow.com/users/5125743/james"}, "edited": false, "score": 0, "creation_date": 1442426506, "post_id": 32614396, "comment_id": 53081970, "body": "This is also not working it is still giving me an empty collection when I call .users on a newly created instance of an organization"}, {"owner": {"reputation": 103, "user_id": 4900710, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OUwJufr1yTs/AAAAAAAAAAI/AAAAAAAAHoU/ly6OqPUwKlQ/photo.jpg?sz=128", "display_name": "Jake Kaad", "link": "https://stackoverflow.com/users/4900710/jake-kaad"}, "reply_to_user": {"reputation": 487, "user_id": 5125743, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/02078cea0ba2ebf97d6926c9d06207fe?s=128&d=identicon&r=PG&f=1", "display_name": "james ", "link": "https://stackoverflow.com/users/5125743/james"}, "edited": false, "score": 0, "creation_date": 1442427815, "post_id": 32614396, "comment_id": 53082705, "body": "Was your user record saved into the database?"}, {"owner": {"reputation": 487, "user_id": 5125743, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/02078cea0ba2ebf97d6926c9d06207fe?s=128&d=identicon&r=PG&f=1", "display_name": "james ", "link": "https://stackoverflow.com/users/5125743/james"}, "edited": false, "score": 0, "creation_date": 1442428858, "post_id": 32614396, "comment_id": 53083262, "body": "I posted below my own answer of how I got it to work. It seems kind of hackey but it works...."}, {"owner": {"reputation": 103, "user_id": 4900710, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OUwJufr1yTs/AAAAAAAAAAI/AAAAAAAAHoU/ly6OqPUwKlQ/photo.jpg?sz=128", "display_name": "Jake Kaad", "link": "https://stackoverflow.com/users/4900710/jake-kaad"}, "reply_to_user": {"reputation": 487, "user_id": 5125743, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/02078cea0ba2ebf97d6926c9d06207fe?s=128&d=identicon&r=PG&f=1", "display_name": "james ", "link": "https://stackoverflow.com/users/5125743/james"}, "edited": false, "score": 0, "creation_date": 1442429833, "post_id": 32614396, "comment_id": 53083799, "body": "You shouldn&#39;t have to do that. Is this in a test?"}, {"owner": {"reputation": 487, "user_id": 5125743, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/02078cea0ba2ebf97d6926c9d06207fe?s=128&d=identicon&r=PG&f=1", "display_name": "james ", "link": "https://stackoverflow.com/users/5125743/james"}, "edited": false, "score": 0, "creation_date": 1442430407, "post_id": 32614396, "comment_id": 53084120, "body": "I edited my answer with controller code. No it is not in a test. This is only way to get it to work. I am not sure whyI have to do this but it doesnt work uneless I do this. Any other suggestions are appreciated."}], "tags": [], "owner": {"reputation": 103, "user_id": 4900710, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OUwJufr1yTs/AAAAAAAAAAI/AAAAAAAAHoU/ly6OqPUwKlQ/photo.jpg?sz=128", "display_name": "Jake Kaad", "link": "https://stackoverflow.com/users/4900710/jake-kaad"}, "is_accepted": false, "score": 2, "last_activity_date": 1442422280, "creation_date": 1442422280, "answer_id": 32614396, "question_id": 32614160, "link": "https://stackoverflow.com/questions/32614160/has-many-through-association-does-not-save-relationship/32614396#32614396", "title": "has_many through association does not save relationship", "body": "<p>You aren't creating the relation in your controller's <code>create</code> method.  You currently have:</p>\n\n<pre><code>@organization = Organization.new(organization_params)\n</code></pre>\n\n<p>You should create like how you are creating it in your seed file:</p>\n\n<pre><code>@user = #find your user here\n@organization = @user.organizations.new(organization_params)\n</code></pre>\n\n<p>This should create your organization and relation.</p>\n"}, {"comments": [{"owner": {"reputation": 487, "user_id": 5125743, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/02078cea0ba2ebf97d6926c9d06207fe?s=128&d=identicon&r=PG&f=1", "display_name": "james ", "link": "https://stackoverflow.com/users/5125743/james"}, "edited": false, "score": 0, "creation_date": 1442426126, "post_id": 32615069, "comment_id": 53081703, "body": "This doesn&#39;t work. @organization does not have user_id column.... Am I missing something?"}, {"owner": {"reputation": 2277, "user_id": 3234367, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FxQ1m.jpg?s=128&g=1", "display_name": "aaron-coding", "link": "https://stackoverflow.com/users/3234367/aaron-coding"}, "reply_to_user": {"reputation": 487, "user_id": 5125743, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/02078cea0ba2ebf97d6926c9d06207fe?s=128&d=identicon&r=PG&f=1", "display_name": "james ", "link": "https://stackoverflow.com/users/5125743/james"}, "edited": false, "score": 0, "creation_date": 1442426626, "post_id": 32615069, "comment_id": 53082054, "body": "Hmm... Looks like it&#39;s just built differently that I would thought. I took a look at the schema. To you, what is an <code>organizations_user</code>? Is it a different thing than a user, or is it just that some users are <code>organization_user</code>? You would not need a different table for this, just a column on both <code>organization</code> and <code>user</code>. see my updated answer."}, {"owner": {"reputation": 2277, "user_id": 3234367, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FxQ1m.jpg?s=128&g=1", "display_name": "aaron-coding", "link": "https://stackoverflow.com/users/3234367/aaron-coding"}, "reply_to_user": {"reputation": 487, "user_id": 5125743, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/02078cea0ba2ebf97d6926c9d06207fe?s=128&d=identicon&r=PG&f=1", "display_name": "james ", "link": "https://stackoverflow.com/users/5125743/james"}, "edited": false, "score": 0, "creation_date": 1442426718, "post_id": 32615069, "comment_id": 53082110, "body": "Right, but why do you need a through? Is there a reason that you don&#39;t want to use use <code>has_many</code>? and <code>belongs_to</code>?"}, {"owner": {"reputation": 487, "user_id": 5125743, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/02078cea0ba2ebf97d6926c9d06207fe?s=128&d=identicon&r=PG&f=1", "display_name": "james ", "link": "https://stackoverflow.com/users/5125743/james"}, "edited": false, "score": 0, "creation_date": 1442426808, "post_id": 32615069, "comment_id": 53082173, "body": "because 1 user can be part of may organizations and one organization can have many users..."}, {"owner": {"reputation": 487, "user_id": 5125743, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/02078cea0ba2ebf97d6926c9d06207fe?s=128&d=identicon&r=PG&f=1", "display_name": "james ", "link": "https://stackoverflow.com/users/5125743/james"}, "edited": false, "score": 0, "creation_date": 1442426916, "post_id": 32615069, "comment_id": 53082235, "body": "any user can create an organization via the form, but is not necessarily the only one part of the organization. Others can join the organization at any later time."}, {"owner": {"reputation": 2277, "user_id": 3234367, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FxQ1m.jpg?s=128&g=1", "display_name": "aaron-coding", "link": "https://stackoverflow.com/users/3234367/aaron-coding"}, "reply_to_user": {"reputation": 487, "user_id": 5125743, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/02078cea0ba2ebf97d6926c9d06207fe?s=128&d=identicon&r=PG&f=1", "display_name": "james ", "link": "https://stackoverflow.com/users/5125743/james"}, "edited": false, "score": 0, "creation_date": 1442426924, "post_id": 32615069, "comment_id": 53082240, "body": "Ok lol well that makes sense :-) Then yeah, ignore that other comment."}, {"owner": {"reputation": 487, "user_id": 5125743, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/02078cea0ba2ebf97d6926c9d06207fe?s=128&d=identicon&r=PG&f=1", "display_name": "james ", "link": "https://stackoverflow.com/users/5125743/james"}, "edited": false, "score": 0, "creation_date": 1442426974, "post_id": 32615069, "comment_id": 53082272, "body": "Any idea why this is not working? I&#39;ve spent a full day on it and cant fix it. Seems like it should be simple thing."}, {"owner": {"reputation": 2277, "user_id": 3234367, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FxQ1m.jpg?s=128&g=1", "display_name": "aaron-coding", "link": "https://stackoverflow.com/users/3234367/aaron-coding"}, "reply_to_user": {"reputation": 487, "user_id": 5125743, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/02078cea0ba2ebf97d6926c9d06207fe?s=128&d=identicon&r=PG&f=1", "display_name": "james ", "link": "https://stackoverflow.com/users/5125743/james"}, "edited": false, "score": 0, "creation_date": 1442427184, "post_id": 32615069, "comment_id": 53082373, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/89843/discussion-between-aaron-coding-and-james\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 2277, "user_id": 3234367, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FxQ1m.jpg?s=128&g=1", "display_name": "aaron-coding", "link": "https://stackoverflow.com/users/3234367/aaron-coding"}, "is_accepted": false, "score": 0, "last_activity_date": 1442427174, "last_edit_date": 1442427174, "creation_date": 1442424626, "answer_id": 32615069, "question_id": 32614160, "link": "https://stackoverflow.com/questions/32614160/has-many-through-association-does-not-save-relationship/32615069#32615069", "title": "has_many through association does not save relationship", "body": "<p>You may simply want to create the join table manually. It's not the best way, but since you are stuck, maybe it will help you at least get the wheels rolling.</p>\n\n<pre><code>@organization = Organization.new(organization_params)\nOrganizationsUser.create(\n  user_id: current_user.id, organization_id: @organization.id\n)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1604, "user_id": 2428025, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/62ff3bdb5a09da1fc00ab3037ed1cac3?s=128&d=identicon&r=PG&f=1", "display_name": "silverdr", "link": "https://stackoverflow.com/users/2428025/silverdr"}, "edited": false, "score": 0, "creation_date": 1525464755, "post_id": 32616258, "comment_id": 87382249, "body": "missing <code>:autosave =&gt; true</code> ?"}], "tags": [], "owner": {"reputation": 487, "user_id": 5125743, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/02078cea0ba2ebf97d6926c9d06207fe?s=128&d=identicon&r=PG&f=1", "display_name": "james ", "link": "https://stackoverflow.com/users/5125743/james"}, "is_accepted": false, "score": 0, "last_activity_date": 1442430345, "last_edit_date": 1442430345, "creation_date": 1442428811, "answer_id": 32616258, "question_id": 32614160, "link": "https://stackoverflow.com/questions/32614160/has-many-through-association-does-not-save-relationship/32616258#32616258", "title": "has_many through association does not save relationship", "body": "<p>I solved it by doing this:</p>\n\n<pre><code>u = current_user\no = u.organizations.build(name:'blah')\nu.save\no.save\n</code></pre>\n\n<p>Have to save both objects to save relation for some reason. Not sure why.</p>\n\n<p>something like this in controller:</p>\n\n<pre><code>  def create\n    @user = current_user\n    @organization = @user.organizations.build(organization_params)  \n\n    respond_to do |format|\n      if @user.save &amp;&amp; @organization.save\n</code></pre>\n"}], "owner": {"reputation": 487, "user_id": 5125743, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/02078cea0ba2ebf97d6926c9d06207fe?s=128&d=identicon&r=PG&f=1", "display_name": "james ", "link": "https://stackoverflow.com/users/5125743/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1419, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1442430345, "creation_date": 1442421504, "question_id": 32614160, "link": "https://stackoverflow.com/questions/32614160/has-many-through-association-does-not-save-relationship", "title": "has_many through association does not save relationship", "body": "<p>I have two models joined with a has_many through association:</p>\n\n<p>Here are the tables:</p>\n\n<pre><code>  create_table \"organizations\", force: :cascade do |t|\n    t.string   \"name\"\n    t.string   \"description\"\n    t.string   \"mission\"\n    t.datetime \"created_at\",  null: false\n    t.datetime \"updated_at\",  null: false\n  end\n\n  create_table \"organizations_users\", force: :cascade do |t|\n    t.integer  \"user_id\"\n    t.integer  \"organization_id\"\n    t.datetime \"created_at\",      null: false\n    t.datetime \"updated_at\",      null: false\n  end\n\n  create_table \"users\", force: :cascade do |t|\n    t.string   \"email\",                  default: \"\", null: false\n    t.string   \"encrypted_password\",     default: \"\", null: false\n    t.string   \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.integer  \"sign_in_count\",          default: 0,  null: false\n    t.datetime \"current_sign_in_at\"\n    t.datetime \"last_sign_in_at\"\n    t.string   \"current_sign_in_ip\"\n    t.string   \"last_sign_in_ip\"\n    t.datetime \"created_at\",                          null: false\n    t.datetime \"updated_at\",                          null: false\n    t.string   \"first_name\"\n    t.string   \"last_name\"\n  end\n</code></pre>\n\n<p>Here are the models:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n  has_many :organizations_users\n  has_many :organizations, :through =&gt; :organizations_users\n\nend\n\nclass Organization &lt; ActiveRecord::Base\n  has_many :organizations_users\n  has_many :users, :through =&gt; :organizations_users\n  has_many :categories, as: :categorizable\n\nend\n\nclass OrganizationsUser &lt; ActiveRecord::Base\n  belongs_to :user \n  belongs_to :organization\nend\n</code></pre>\n\n<p>When I create a new organization via my form it creates adequately. However the relationship does not get saved when submitted via my form for some reason.</p>\n\n<p>If I do something like this for example:</p>\n\n<pre><code>o = Organization.last\no.users\n</code></pre>\n\n<p>I get an empty query set:</p>\n\n<pre><code>  User Load (0.3ms)  SELECT \"users\".* FROM \"users\" INNER JOIN \"organizations_users\" ON \"users\".\"id\" = \"organizations_users\".\"user_id\" WHERE \"organizations_users\".\"organization_id\" = $1  [[\"organization_id\", 11]]\n =&gt; #&lt;ActiveRecord::Associations::CollectionProxy []&gt;\n</code></pre>\n\n<p>This is my form:</p>\n\n<pre><code>&lt;%= form_for(@organization) do |f| %&gt;\n  &lt;% if @organization.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@organization.errors.count, \"error\") %&gt; prohibited this organization from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% @organization.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :name %&gt;&lt;br&gt;\n    &lt;%= f.text_field :name, class:\"form-control\", autofocus: true %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :description %&gt;&lt;br&gt;\n    &lt;%= f.text_field :description, class:\"form-control\", autofocus: true %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :mission %&gt;&lt;br&gt;\n    &lt;%= f.text_field :mission, class:\"form-control\", autofocus: true %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit \"Submit\", class:\"btn btn-primary\" %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This is my controller:</p>\n\n<pre><code>class OrganizationsController &lt; ApplicationController\n\n  before_action :set_organization, only: [:show, :edit, :update, :destroy]\n\n  # GET /organizations\n  # GET /organizations.json\n  def index\n    @organizations = Organization.all.paginate(:page =&gt; params[:page], :per_page =&gt; 10)\n  end\n\n  # GET /organizations/1\n  # GET /organizations/1.json\n  def show\n  end\n\n  # GET /organizations/new\n  def new\n    @organization = Organization.new\n  end\n\n  # GET /organizations/1/edit\n  def edit\n  end\n\n  # POST /organizations\n  # POST /organizations.json\n  def create\n    @organization = Organization.new(organization_params)\n\n    respond_to do |format|\n      if @organization.save\n        format.html { redirect_to @organization, notice: 'Organization was successfully created.' }\n        format.json { render :show, status: :created, location: @organization }\n      else\n        format.html { render :new }\n        format.json { render json: @organization.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /organizations/1\n  # PATCH/PUT /organizations/1.json\n  def update\n    respond_to do |format|\n      if @organization.update(organization_params)\n        format.html { redirect_to @organization, notice: 'Organization was successfully updated.' }\n        format.json { render :show, status: :ok, location: @organization }\n      else\n        format.html { render :edit }\n        format.json { render json: @organization.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /organizations/1\n  # DELETE /organizations/1.json\n  def destroy\n    @organization.destroy\n    respond_to do |format|\n      format.html { redirect_to organizations_url, notice: 'Organization was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_organization\n      @organization = Organization.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def organization_params\n      params.require(:organization).permit!\n    end\nend\n</code></pre>\n\n<p>The weird part is that I created some seed data using Faker gem and the organization created that way seems to return a user when I do that same query via my rails console. So the wiring is correct but there must be a problem in my form or params in some way?</p>\n\n<p>This is how I succesfully created a organization with a user associated to it via seed data:</p>\n\n<pre><code>for n in 1..10 do\n  user = User.create!(\n    first_name: Faker::Name.first_name, \n    last_name: Faker::Name.last_name,\n    email: Faker::Internet.email, \n    password: \"password\",\n    employer: Faker::University.name,\n    title: Faker::Name.title,\n    short_bio: Faker::Lorem.paragraph)\n  user.organizations.create!(\n    name: Faker::Company.name, \n    description: Faker::Lorem.paragraph, \n    mission: Faker::Lorem.sentence)\nend\n</code></pre>\n\n<p>Why is this happening? Relationship only doesn't work via form Am I misunderstanding something here?</p>\n"}, {"tags": ["ruby", "github", "module", "gem"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1442421318, "post_id": 32613956, "comment_id": 53078952, "body": "You might explicitly <code>require_relative &#39;..&#47;github&#47;user&#39;</code> or you have to check that <code>github&#47;user</code> is required <i>before</i> <code>command&#47;user</code> in topmost file."}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1442424088, "post_id": 32614252, "comment_id": 53080560, "body": "Calling <code>require</code> like this is misleading; it makes it look like it is scoped to <code>Gissues</code> somehow. <code>require</code> simply runs the code in the file. Period. It doesn&#39;t scope it to anything. Therefore, it is much clearer to put calls to <code>require</code> at the top-level instead of inside a module or class definition expression."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1442424197, "post_id": 32614252, "comment_id": 53080624, "body": "@J&#246;rgWMittag That&#39;s a matter of preference, they can go at the end of the file. Since they&#39;re evaluated on an immediate basis, the end result is the same. Note that the <code>require</code> statement can&#39;t be at the top of the file here as those sub-modules may depend on <code>Gissues</code> being defined. The way I have it here it&#39;s impossible to get it wrong."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1442424484, "post_id": 32614252, "comment_id": 53080760, "body": "In this case, it could be at the end of the file at the top-level, or directly after the module definition expression at the top-level. There are plenty of questions here on StackOverflow, where the problem is that the OP assumes that putting a call to <code>require</code> inside a module definition expression will somehow scope the code in the file inside the module. So, this seems a common misconception, and simply never writing a call to <code>require</code> inside a module definition expression helps to combat this misconception. That&#39;s why I generally try to avoid it."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1442424634, "post_id": 32614252, "comment_id": 53080839, "body": "If you assign a constant inside a module definition expression, the constant becomes scoped to that module, if you write a method definition expression inside a module definition expression, the method becomes an instance method of that module, if you assign an instance variable inside a module definition expression, the instance variable becomes an instance variable of the module object itself. I can kind of see the symmetry here that leads to that misconception."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1442424774, "post_id": 32614252, "comment_id": 53080911, "body": "@J&#246;rgWMittag That <code>require</code> is not scoped is pretty fundamental to Ruby, so if there&#39;s confusion there that&#39;s beyond my control. When it comes to organizing code, a lot of this is personal preference."}, {"owner": {"reputation": 1206, "user_id": 2596734, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Qd1p8.jpg?s=128&g=1", "display_name": "Roemer", "link": "https://stackoverflow.com/users/2596734/roemer"}, "edited": false, "score": 0, "creation_date": 1442425858, "post_id": 32614252, "comment_id": 53081545, "body": "Your answer sounds really logical, yet I can&#39;t figure out what I&#39;m doing wrong. I edited my question with a screenshot of the project"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1442426076, "post_id": 32614252, "comment_id": 53081657, "body": "Are you sure <code>request_token</code> is a class method?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1206, "user_id": 2596734, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Qd1p8.jpg?s=128&g=1", "display_name": "Roemer", "link": "https://stackoverflow.com/users/2596734/roemer"}, "edited": false, "score": 0, "creation_date": 1442428508, "post_id": 32614252, "comment_id": 53083067, "body": "@RoemerBakker That&#39;s an instance method. You can&#39;t call it without having an instance of the object. Also your indentation is all over the place. I hope your original source is cleaner."}, {"owner": {"reputation": 1206, "user_id": 2596734, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Qd1p8.jpg?s=128&g=1", "display_name": "Roemer", "link": "https://stackoverflow.com/users/2596734/roemer"}, "edited": false, "score": 0, "creation_date": 1442428790, "post_id": 32614252, "comment_id": 53083227, "body": "@tadman Oh my God thank you so much. I&#39;m new to Ruby and didn&#39;t know the difference. It works now! And yes, the original source looks better ;)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1206, "user_id": 2596734, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Qd1p8.jpg?s=128&g=1", "display_name": "Roemer", "link": "https://stackoverflow.com/users/2596734/roemer"}, "edited": false, "score": 0, "creation_date": 1442437827, "post_id": 32614252, "comment_id": 53088104, "body": "@RoemerBakker If you&#39;re coming at Ruby from other languages, there&#39;s a subtle but important difference between class methods, otherwise known as singleton methods, or static methods, and instance methods. Hope that helps!"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1442421833, "creation_date": 1442421833, "answer_id": 32614252, "question_id": 32613956, "link": "https://stackoverflow.com/questions/32613956/making-all-classes-in-module-available-everywhere-in-module/32614252#32614252", "title": "Making all classes in module available everywhere in module", "body": "<p>If your top-level module has an explicit <code>require</code> for all submodules, this won't be an issue. If you're loading a bottom-level module directly, then nothing else will really be defined. That's where the problem arises.</p>\n\n<p>A typical module looks like:</p>\n\n<pre><code>module Gissues\n  require 'gissues/command'\n  require 'gissues/user'\nend\n</code></pre>\n\n<p>These need to be listed in order of their dependency. It is possible, though not recommended, to use <code>autoload</code> to accomplish the same task.</p>\n\n<p>So long as they are all loaded in the correct order you should be good to go.</p>\n\n<p>It's worth noting that methods should be called as <code>Gissues::Github::User.request_token</code> with a dot before the method. The <code>::</code> notation is usually reserved for class names or constants, like <code>Gissues::CONST</code> vs. <code>Gissues.method_name</code>.</p>\n"}], "owner": {"reputation": 1206, "user_id": 2596734, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Qd1p8.jpg?s=128&g=1", "display_name": "Roemer", "link": "https://stackoverflow.com/users/2596734/roemer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442425808, "creation_date": 1442420755, "last_edit_date": 1442425808, "question_id": 32613956, "link": "https://stackoverflow.com/questions/32613956/making-all-classes-in-module-available-everywhere-in-module", "title": "Making all classes in module available everywhere in module", "body": "<p>I'm writing a console utility for managing Github issues and I've run into a <code>undefined method</code> error.</p>\n\n<p>My app is structured the following way</p>\n\n<pre><code>gissues.rb # includes all files in subfolders\n\nGissues\n    github.rb #Gissues::Github general github stuff\n\n    commands.rb #Gissues::commands subclass of Thor (whatisthor.com), general command stuff\n\n    cli.rb #subclass of commands, lists command shortcuts and subcommands\n\n    commands\n\n        user.rb #Command::User subclass of Gissues::Commands holds logic for github user related commands like signin, signout, whoami\n\n    github\n\n        user.rb #Github::User subclass of Gissues::Github holds logic for communicating with github for authentication (checking credentials)\n</code></pre>\n\n<p>I defined methods for communicating with Github in user.rb inside the github folder. I want to use these methods in user.rb defined in the commands folder but when I do, it seems outside the scope and I get a method not defined error.</p>\n\n<p>user.rb (commands) looks like this</p>\n\n<pre><code>module Gissues\n    class Command::User &lt; Gissues::Command\n        desc \"signin\", \"Starts loging sequence\"\n        def signin\n            Gissues::Github::User::request_token\n        end\n     end\nend\n</code></pre>\n\n<p>and I'm getting the following error</p>\n\n<pre><code>/Users/someone/RubymineProjects/Gissues/lib/gissues/commands/user.rb:9:in `signin': undefined method `request_token' for Gissues::Github::User:Class (NoMethodError)\n</code></pre>\n\n<p>What am I doing wrong?\nThanks in advance</p>\n\n<p>Edit: <img src=\"https://i.imgur.com/hhnGNnH.png\" alt=\"This image may make the structure more clear\"> This image may make the structure more clear</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 1, "creation_date": 1442420950, "post_id": 32613899, "comment_id": 53078707, "body": "Breadth-first search should be <a href=\"https://en.wikipedia.org/wiki/Breadth-first_search\" rel=\"nofollow noreferrer\">on the order of the number of edges in your graph</a>, or O(|E|).  You absolutely should <i>not</i> be iterating over every value in the graph if you&#39;re attempting to do BFS.  First, isolate what you use to represent your graph, then attempt to rework your BFS algorithm based on that."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1442421478, "post_id": 32613899, "comment_id": 53079069, "body": "It&#39;s much less verbose, more Ruby conventional, to use <code>x = [ ]</code> than <code>x = Array.new</code>. The only reason for using the explicit constructor is to apply arguments to <code>new</code>, such as for setting defaults. Likewise, <code>x.class == Array</code> is highly discouraged. Instead, <code>x.is_a?(Array)</code> does the job. Comparing vs. <code>false</code> in an <code>if</code> is also redundant. Use <code>unless</code> instead. Don&#39;t forget to use <code>underscore_style</code> when naming methods, not <code>MixedCase</code>."}], "owner": {"reputation": 295, "user_id": 5343235, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4fd78b1e484235d669df7ac21504509f?s=128&d=identicon&r=PG&f=1", "display_name": "bZhang", "link": "https://stackoverflow.com/users/5343235/bzhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1442420559, "creation_date": 1442420559, "question_id": 32613899, "link": "https://stackoverflow.com/questions/32613899/how-to-improve-time-complexity-of-this-code-piece", "title": "How to improve time complexity of this code piece?", "body": "<p>I am having a hard time trying to down down the time. If this can be done in O(n^2) thatd be awesome. </p>\n\n<pre><code>def printDistance(file)\n   line = file.gets\n\n  if line == nil then return end\n\n  sz, sx, sy, ex, ey = line.split(/\\s/)\n  #counter = 0\n  while line = file.gets do\n    if line[0...4] == \"path\"\n    else\n      x, y, ds, w = line.split(/\\s/,4)\n      x = x.to_i\n      y = y.to_i\n      matrix= Array.new\n      later = Array.new\n      tmp = Array.new\n      processing = Array.new\n      if matrix[y].class != Array\n        matrix[y] = Array.new\n      end\n\n      if ds == \"\"  #this cell has NO way to get to\n        matrix[y][x] = nil\n      else\n        matrix[y][x] = ds\n      end\n    end\n  end\n  for y in 0...matrix.length\n    processing[y] = Array.new\n    tmp[y] = Array.new\n    later[y] = Array.new\n  end\n  printing = Array.new\n  counter = 0\n  sy = sy.to_i\n  sx = sx.to_i\n  processing[sy][sx] = matrix[sy][sx]\n  matrix[sy][sx] = nil\n  puts \"#{counter},(#{sx},#{sy})\" #first one \n  counter += 1\n  loop do\n    print \"#{counter},\"\n    counter += 1\n    for y in 0...processing.length\n      for x in 0...processing[y].length\n        if processing[y][x].class != nil \n          tmp[y][x] = processing[y][x]\n          dirArr = tmp[y][x].to_s.split(//)\n          dirArr.each { |c|\n            if c == \"u\"\n              newY = y - 1\n              newX = x\n            elsif c == \"d\"\n              newY = y + 1\n              newX = x\n            elsif c == \"l\"\n              newY = y\n              newX = x - 1\n            else  #c == r\n              newY = y\n              newX = x + 1\n            end\n            if matrix[newY][newX] != nil\n              tmpStr = \"(#{newX},#{newY})\"\n\n              printing.unshift(tmpStr)\n\n              later[newY][newX] = matrix[newY][newX]\n\n              matrix[newY][newX] = nil\n            end\n          }\n        end\n      end\n    end\n    printing.sort!\n    for i in 0...printing.length\n      print printing[i]\n      if i &lt; printing.length - 1\n        print \",\"\n      end\n    end\n    printing = []   #resetting\n    puts\n    for i in 0...later.length\n      for j in 0...later[i].length\n        if later[i][j] != nil\n          processing[i][j] = later[i][j]\n        end\n      end\n    end\n    break if NotEmpty(matrix) == false\n  end\nend\n\ndef NotEmpty (a)\n  for i in 0...a.length\n    for j in 0...a[i].length\n      if a[i][j] != nil\n\n        return true\n      end\n    end\n  end\n  return false\nend\n</code></pre>\n\n<p>Basically this code reads in a file and places it in a 2-d array representing a maze, then based on maze's starting point it will perform a BFS to put all cells in order from closest to the start to the farthest, then print everything out</p>\n\n<p>This code is now O(n^3) but I am trying to shrink it to O(n^2), is there anyway I can traverse a 2-d array and keeping track of the x and y values without using two forloops?\nAny help is appreciated!! Thanks!</p>\n"}, {"tags": ["ruby", "http-status-code-404", "instagram", "cloudsight"], "answers": [{"tags": [], "owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "is_accepted": true, "score": 1, "last_activity_date": 1442420414, "creation_date": 1442420414, "answer_id": 32613857, "question_id": 32613621, "link": "https://stackoverflow.com/questions/32613621/escape-bypass-404-error-in-ruby-instagram-api/32613857#32613857", "title": "Escape/Bypass 404 error in Ruby (Instagram API)", "body": "<p>Is this what you had in mind?</p>\n\n<pre><code>require 'rubygems'\nrequire 'simple_oauth'\nrequire 'cloudsight'\nrequire 'rubygems'\nrequire 'net/http'\nrequire 'uri'\nrequire 'json'\nrequire 'open-uri'\nrequire 'openssl'\nrequire 'hpricot'\nrequire 'nokogiri'\n\n\n#T FILE TO JPG\n\nwebby = 'https://t.co/5h92pCmoPM'\n\nOpenSSL::SSL::VERIFY_PEER = OpenSSL::SSL::VERIFY_NONE\n\nbegin\n  doc = Hpricot(open(webby)).to_s\n\n  jpgstart = '&lt;meta property=\\\"og:image\\\" content=\\\"'\n  jpgstop = '\" /&gt;'\n  jpglink = doc[/#{jpgstart}(.*?)#{jpgstop}/m, 1]\n\n  print jpglink\nrescue OpenURI::HTTPError\n  # do nothing. bypass error.\nend\n</code></pre>\n"}], "owner": {"reputation": 936, "user_id": 5080273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b26b400d54f2a52add7900c381fb1778?s=128&d=identicon&r=PG&f=1", "display_name": "semiflex", "link": "https://stackoverflow.com/users/5080273/semiflex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 32613857, "answer_count": 1, "score": 0, "last_activity_date": 1503430386, "creation_date": 1442419598, "last_edit_date": 1503430386, "question_id": 32613621, "link": "https://stackoverflow.com/questions/32613621/escape-bypass-404-error-in-ruby-instagram-api", "title": "Escape/Bypass 404 error in Ruby (Instagram API)", "body": "<p>I'm trying to get ruby to escape/bypass a 404 error but it doesn't seem to be working. Here's my code so far:</p>\n\n<pre><code>require 'rubygems'\nrequire 'simple_oauth'\nrequire 'cloudsight'\nrequire 'rubygems'\nrequire 'net/http'\nrequire 'uri'\nrequire 'json'\nrequire 'open-uri'\nrequire 'openssl'\nrequire 'hpricot'\nrequire 'nokogiri'\n\n\n#T FILE TO JPG\n\nwebby = 'https://t.co/5h92pCmoPM'\n\nOpenSSL::SSL::VERIFY_PEER = OpenSSL::SSL::VERIFY_NONE\n\ndoc = Hpricot(open(webby)).to_s\n\n\njpgstart = '&lt;meta property=\\\"og:image\\\" content=\\\"'\njpgstop = '\" /&gt;'\njpglink = doc[/#{jpgstart}(.*?)#{jpgstop}/m, 1]\nprint jpglink\n</code></pre>\n\n<p>This is the error I get:</p>\n\n<pre><code>C:/Users/User/Desktop/test89:18: warning: already initialized constant OpenSSL::SSL::VERIFY_PEER\nC:/Ruby21/lib/ruby/2.1.0/open-uri.rb:353:in `open_http': 404 NOT FOUND (OpenURI::HTTPError)\n    from C:/Ruby21/lib/ruby/2.1.0/open-uri.rb:724:in `buffer_open'\n    from C:/Ruby21/lib/ruby/2.1.0/open-uri.rb:210:in `block in open_loop'\n    from C:/Ruby21/lib/ruby/2.1.0/open-uri.rb:208:in `catch'\n    from C:/Ruby21/lib/ruby/2.1.0/open-uri.rb:208:in `open_loop'\n    from C:/Ruby21/lib/ruby/2.1.0/open-uri.rb:149:in `open_uri'\n    from C:/Ruby21/lib/ruby/2.1.0/open-uri.rb:704:in `open'\n    from C:/Ruby21/lib/ruby/2.1.0/open-uri.rb:34:in `open'\n    from C:/Users/KVadher/Desktop/test89:20:in `&lt;main&gt;'\n[Finished in 2.7s with exit code 1]\n</code></pre>\n\n<p>Does anyone have any idea how I could bypass the error? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "model-view-controller", "strong-parameters"], "comments": [{"owner": {"reputation": 103, "user_id": 4900710, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OUwJufr1yTs/AAAAAAAAAAI/AAAAAAAAHoU/ly6OqPUwKlQ/photo.jpg?sz=128", "display_name": "Jake Kaad", "link": "https://stackoverflow.com/users/4900710/jake-kaad"}, "edited": false, "score": 0, "creation_date": 1442422576, "post_id": 32613499, "comment_id": 53079707, "body": "Can you show us your registration form? It looks like you aren&#39;t setting the form up correctly to use strong parameters."}], "answers": [{"comments": [{"owner": {"reputation": 1809, "user_id": 3786657, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/36fc24f84a8173d1242876432c3990f2?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Dess", "link": "https://stackoverflow.com/users/3786657/rahul-dess"}, "edited": false, "score": 0, "creation_date": 1442420341, "post_id": 32613527, "comment_id": 53078310, "body": "i donnt think we can use multiple <code>require</code> like that ..anyway it says <code>ArgumentError (wrong number of arguments (2 for 1))</code> if it try in your way"}, {"owner": {"reputation": 1809, "user_id": 3786657, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/36fc24f84a8173d1242876432c3990f2?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Dess", "link": "https://stackoverflow.com/users/3786657/rahul-dess"}, "edited": false, "score": 0, "creation_date": 1442420667, "post_id": 32613527, "comment_id": 53078529, "body": "i tried ..now it says <code>NoMethodError (undefined method </code>permit&#39; for &quot;password123$&quot;:String)`"}, {"owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "reply_to_user": {"reputation": 1809, "user_id": 3786657, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/36fc24f84a8173d1242876432c3990f2?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Dess", "link": "https://stackoverflow.com/users/3786657/rahul-dess"}, "edited": false, "score": 0, "creation_date": 1442421189, "post_id": 32613527, "comment_id": 53078876, "body": "Doesn&#39;t look like strong params work like I thought :/ Sorry.  Could you post your params hash?"}, {"owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "reply_to_user": {"reputation": 1809, "user_id": 3786657, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/36fc24f84a8173d1242876432c3990f2?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Dess", "link": "https://stackoverflow.com/users/3786657/rahul-dess"}, "edited": false, "score": 0, "creation_date": 1442422123, "post_id": 32613527, "comment_id": 53079429, "body": "So upon further reading, this may not be the Rails Way to do what you&#39;re trying to do. Do you use the params you are trying to require for mass assignment? (ie, passing them to a .new, .create, .update call?). Or are you just looking up the user in the database?"}, {"owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "reply_to_user": {"reputation": 1809, "user_id": 3786657, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/36fc24f84a8173d1242876432c3990f2?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Dess", "link": "https://stackoverflow.com/users/3786657/rahul-dess"}, "edited": false, "score": 0, "creation_date": 1442422261, "post_id": 32613527, "comment_id": 53079515, "body": "In other words: are you signing in a user or registering them?"}], "tags": [], "owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "is_accepted": false, "score": 0, "last_activity_date": 1442426875, "last_edit_date": 1442426875, "creation_date": 1442419269, "answer_id": 32613527, "question_id": 32613499, "link": "https://stackoverflow.com/questions/32613499/multiple-require-permit-strong-parameters-rails-4/32613527#32613527", "title": "Multiple require &amp; permit strong parameters rails 4", "body": "<p><strong>Edit:</strong></p>\n\n<p>Here is the Rails way for you to handle logins and, I believe, cases where you need to 'require' multiple parameters and provide errors back to the user. </p>\n\n<p>Unlike using strong params, this approach provides feedback to the user (using validation errors) when parameters are missing or blank. This is more user-friendly than throwing an exception. </p>\n\n<ol>\n<li><p>Create an <code>ActiveModel</code> (<em>not</em> <code>ActiveRecord</code>) form backing object. This form backing object is where you specify which fields are required and when a call to <code>valid?</code> is performed, these fields will be validated. </p>\n\n<p>With this, you will get nice user-friendly errors if:</p>\n\n<ul>\n<li>email is missing</li>\n<li>password is missing</li>\n<li>email and password do not match</li>\n</ul>\n\n<p><strong>models/session.rb</strong></p>\n\n<pre><code>class Session\n  include ActiveModel::Model\n\n  attr_accessor :password, :email, :remember_me\n\n  validates_presence_of :password, :email        # these fields are required!\n\n  def authenticate\n    return false unless valid?   # this checks that required params\n                                 # are present and adds errors to the\n                                 # errors object if not\n\n    if User.authenticate(:password, :email)  # validate credentials\n      true\n    else              \n      errors.add(:email, \"and password didn't match\")  # wrong credentials. add error!\n      false\n    end\n  end\nend\n</code></pre></li>\n<li><p>Create the controller. Here is what your controller would look like for logging in a user:</p>\n\n<p><strong>app/controllers/sessions_controller.rb</strong></p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n  # GET /login\n  def new\n    @session = Session.new\n  end\n\n  # POST /login\n  def create\n    @session = Session.new(login_params)\n    if @session.authenticate\n      # do whatever you need to do to log the user in\n      # set remember_me cookie, etc.\n      redirect_to '/success', notice: 'You are logged in'\n    else\n      render :new   # shows the form again, filled-in and with errors\n    end\n  end\n\n  private\n\n  def login_params\n    params.require(:session).permit(:email, :password, :remember_me)\n  end\nend\n</code></pre></li>\n<li><p>Set up the view</p>\n\n<p><strong>app/views/sessions/new.html.erb</strong></p>\n\n<pre><code>&lt;% if @session.errors.any? %&gt;\n  &lt;ul&gt;\n    &lt;% @session.errors.full_messages.each do |msg| %&gt;\n      &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;\n    &lt;% end %&gt;\n  &lt;/ul&gt;\n&lt;% end %&gt;\n\n&lt;%= form_for @session, :url =&gt; login_path do |f| %&gt;\n    &lt;div&gt;\n      &lt;%= f.label :email, 'Email:' %&gt;\n    &lt;/div&gt;\n    &lt;div&gt;\n      &lt;%= f.text_field :email %&gt;\n    &lt;/div&gt;\n    &lt;div&gt;\n      &lt;%= f.label :password, 'Password:' %&gt;\n    &lt;/div&gt;\n    &lt;div&gt;\n      &lt;%= f.password_field :password %&gt;\n    &lt;/div&gt;\n    &lt;div&gt;\n      &lt;%= f.label :remember_me, 'Remember Me?' %&gt;\n      &lt;%= f.check_box :remember_me %&gt;\n    &lt;/div&gt;\n    &lt;div&gt;\n      &lt;%= f.submit %&gt;\n    &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre></li>\n<li><p>Lastly, make sure the routes are configured</p>\n\n<p><strong>config/routes.rb</strong></p>\n\n<pre><code>get 'login' =&gt; 'sessions#new'\npost 'login' =&gt; 'sessions#create'\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 103, "user_id": 4900710, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OUwJufr1yTs/AAAAAAAAAAI/AAAAAAAAHoU/ly6OqPUwKlQ/photo.jpg?sz=128", "display_name": "Jake Kaad", "link": "https://stackoverflow.com/users/4900710/jake-kaad"}, "is_accepted": false, "score": 0, "last_activity_date": 1442423116, "creation_date": 1442423116, "answer_id": 32614641, "question_id": 32613499, "link": "https://stackoverflow.com/questions/32613499/multiple-require-permit-strong-parameters-rails-4/32614641#32614641", "title": "Multiple require &amp; permit strong parameters rails 4", "body": "<p>Stong parameters are to prevent mass-assignment to Active Record models. Your parameters should be set up in a model backed form. Example from the <a href=\"https://www.railstutorial.org/book/sign_up\" rel=\"nofollow\">Michael Hartl Tutorial</a>:</p>\n\n<p><strong>REGISTRATION FORM</strong> </p>\n\n<pre><code>&lt;%= form_for(@user) do |f| %&gt;\n  &lt;%= f.label :name %&gt;\n  &lt;%= f.text_field :name %&gt;\n\n  &lt;%= f.label :email %&gt;\n  &lt;%= f.email_field :email %&gt;\n\n  &lt;%= f.label :password %&gt;\n  &lt;%= f.password_field :password %&gt;\n\n  &lt;%= f.label :password_confirmation, \"Confirmation\" %&gt;\n  &lt;%= f.password_field :password_confirmation %&gt;\n\n  &lt;%= f.submit \"Create my account\", class: \"btn btn-primary\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This will create a parameter that looks like: </p>\n\n<p><strong>PARAMS</strong> </p>\n\n<pre><code>{\n          \"utf8\" =&gt; \"\u2713\",\n \"user\" =&gt;  { email: \"test1@gmail.com\", name:\"Test Name\", password: \"password\", password_confirmation: \"password\" },\n   \"remember_me\" =&gt; \"true\",\n        \"commit\" =&gt; \"Log in\",\n    \"controller\" =&gt; \"registration\",\n        \"action\" =&gt; \"sign_in\"\n}\n</code></pre>\n\n<p>Then in your registration controller you can use strong parameters like:</p>\n\n<p><strong>STRONG PARAMETERS</strong> </p>\n\n<pre><code>params.require(:user).permit(:name, :email, :password, :password_confirmation)\n</code></pre>\n\n<p>It looks like in your case, you are handling a log in, in which case, you only need to use regular parameters to capture the login information.</p>\n\n<p><strong>SESSION CREATION</strong></p>\n\n<pre><code>def sign_in\n   email = params[:email]\n   password = params[:password]\n   if User.authenticate!(email, password)\n     # do something\n   else \n     # do something different\n   end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1809, "user_id": 3786657, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/36fc24f84a8173d1242876432c3990f2?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Dess", "link": "https://stackoverflow.com/users/3786657/rahul-dess"}, "is_accepted": true, "score": 14, "last_activity_date": 1442434157, "creation_date": 1442434157, "answer_id": 32617772, "question_id": 32613499, "link": "https://stackoverflow.com/questions/32613499/multiple-require-permit-strong-parameters-rails-4/32617772#32617772", "title": "Multiple require &amp; permit strong parameters rails 4", "body": "<p>Ok found the answer through a friend ...one way to do this is </p>\n\n<pre><code>params.require(:email_address)\nparams.require(:password)\nparams.permit(\n:email_address,\n:password,\n:remember_me\n)\n</code></pre>\n\n<p>Works good.</p>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 12280326, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7o2-7YmChXY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdSMWbyDo55X4mlDgGtQfSESHilag/photo.jpg?sz=128", "display_name": "hungtran273", "link": "https://stackoverflow.com/users/12280326/hungtran273"}, "is_accepted": false, "score": 0, "last_activity_date": 1606488343, "creation_date": 1606488343, "answer_id": 65039252, "question_id": 32613499, "link": "https://stackoverflow.com/questions/32613499/multiple-require-permit-strong-parameters-rails-4/65039252#65039252", "title": "Multiple require &amp; permit strong parameters rails 4", "body": "<p>2020 solution:</p>\n<pre><code>def registration_params\n  params.require([:email_address, :password])               #require all of these\n  params.permit(:email_address, :password, :remember_me)    #return hash\nend\n</code></pre>\n"}], "owner": {"reputation": 1809, "user_id": 3786657, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/36fc24f84a8173d1242876432c3990f2?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Dess", "link": "https://stackoverflow.com/users/3786657/rahul-dess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7458, "favorite_count": 1, "accepted_answer_id": 32617772, "answer_count": 4, "score": 7, "last_activity_date": 1606488343, "creation_date": 1442419196, "last_edit_date": 1442421585, "question_id": 32613499, "link": "https://stackoverflow.com/questions/32613499/multiple-require-permit-strong-parameters-rails-4", "title": "Multiple require &amp; permit strong parameters rails 4", "body": "<p>In the below case, i am trying to use strong parameters. I want to require <code>email_address, password</code> and permit <code>remember_me</code> fields.</p>\n\n<p>But using like below it only allows the <strong>LAST line</strong> in the method Ex:- In below case it only take <code>params.permit(:remember_me)</code></p>\n\n<pre><code>  private\n\n  def registration_params\n    params.require(:email_address)\n    params.require(:password)\n    params.permit(:remember_me)\n  end\n</code></pre>\n\n<p>Another Ex:- In this below case, if i rearrange it like below it will take only <code>params.require(:email_address)</code> where am i going wrong ?</p>\n\n<pre><code>  def registration_params\n    params.require(:password)\n    params.permit(:remember_me)\n    params.require(:email_address)\n  end\n</code></pre>\n\n<p><strong>UPDATE</strong>\nParams hash be like</p>\n\n<pre><code>{\n              \"utf8\" =&gt; \"\u2713\",\n     \"email_address\" =&gt; \"test1@gmail.com\",\n          \"password\" =&gt; \"password123\",\n       \"remember_me\" =&gt; \"true\",\n            \"commit\" =&gt; \"Log in\",\n        \"controller\" =&gt; \"registration\",\n            \"action\" =&gt; \"sign_in\"\n}\n</code></pre>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "where"], "comments": [{"owner": {"reputation": 9993, "user_id": 2128691, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/YV6xv.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/2128691/dax"}, "edited": false, "score": 0, "creation_date": 1442417977, "post_id": 32613056, "comment_id": 53076696, "body": "what are the columns in your <code>Game</code> table? - and what is <code>date_column</code>?"}, {"owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "edited": false, "score": 0, "creation_date": 1442418522, "post_id": 32613056, "comment_id": 53077070, "body": "How is it failing? What are you expecting, what are your getting? Error message?"}], "answers": [{"tags": [], "owner": {"reputation": 654, "user_id": 1319545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d925d70e121e9b8e1a7dd44155e2497?s=128&d=identicon&r=PG", "display_name": "thaleshcv", "link": "https://stackoverflow.com/users/1319545/thaleshcv"}, "is_accepted": true, "score": 3, "last_activity_date": 1442420381, "last_edit_date": 1442420381, "creation_date": 1442418626, "answer_id": 32613310, "question_id": 32613056, "link": "https://stackoverflow.com/questions/32613056/ruby-rails-query-by-date-month/32613310#32613310", "title": "Ruby Rails - Query by Date Month", "body": "<p>Use quotes for 'month' parameter:</p>\n\n<pre><code>Game.where(\"date_part('month', date_column) &gt; ?\", 6)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 5178570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0d87e70957310fccb5671b6a412b709?s=128&d=identicon&r=PG", "display_name": "Paul D", "link": "https://stackoverflow.com/users/5178570/paul-d"}, "is_accepted": false, "score": 2, "last_activity_date": 1442418733, "creation_date": 1442418733, "answer_id": 32613338, "question_id": 32613056, "link": "https://stackoverflow.com/questions/32613056/ruby-rails-query-by-date-month/32613338#32613338", "title": "Ruby Rails - Query by Date Month", "body": "<p>You need to surround the word month in single quotes, i.e.</p>\n\n<pre><code>Game.where(\"date_part('month', date_column) &gt; ?\", 6)\n</code></pre>\n"}], "owner": {"reputation": 11093, "user_id": 1560517, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/233d55363fa09a5613a4a2d9fff2bf8c?s=128&d=identicon&r=PG", "display_name": "appleLover", "link": "https://stackoverflow.com/users/1560517/applelover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 1, "accepted_answer_id": 32613310, "answer_count": 2, "score": 0, "last_activity_date": 1442420381, "creation_date": 1442417926, "last_edit_date": 1442418067, "question_id": 32613056, "link": "https://stackoverflow.com/questions/32613056/ruby-rails-query-by-date-month", "title": "Ruby Rails - Query by Date Month", "body": "<p>I want to select all entries in the Game table where the date column has an entry where the month is greater than 6.  The columns for the Game table are date_column, id, winning_side, status, away_score, home_score. The DB is Postgres. Something like</p>\n\n<pre><code>Game.where(\"date_part(month, date_column) &gt; ?\", 6)\n</code></pre>\n\n<p>date_part appears to be the right SQL function but this is failing.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1442418104, "post_id": 32612903, "comment_id": 53076782, "body": "Can the post <code>query</code> which you are using here <code>results = ActiveRecord::Base.connection.select_all(query)</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": true, "score": 3, "last_activity_date": 1442418094, "creation_date": 1442418094, "answer_id": 32613116, "question_id": 32612903, "link": "https://stackoverflow.com/questions/32612903/filter-active-record-results-in-ruby/32613116#32613116", "title": "filter active record results in ruby", "body": "<p>Going directly through the <code>connection</code> avoids nearly everything <code>ActiveRecord</code> is intended to provide you. First thing, read <a href=\"http://guides.rubyonrails.org/active_record_basics.html\" rel=\"nofollow\">Active Record Basics</a>. The Rails guides are really well put together and should contain everything you need for your first few weeks using the framework.</p>\n\n<p>The reason you aren't getting the <code>where</code> method you expected is that it's a method on <code>ActiveRecord::Relation</code>, and <code>select_all</code> just returns you a list of hashes. By the time you call <code>results.where</code>, it's too late. You need to instantiate a <code>Product</code> model (or whatever would match your table name), which is as simple as:</p>\n\n<pre><code>class Product &lt; ActiveRecord::Base\nend\n</code></pre>\n\n<p>Rails will look at the <code>products</code> table (again, I'm making up your table name) for the attributes a <code>Product</code> has, and then you'll be able to query based on them with <code>where</code>:</p>\n\n<pre><code>results = Product.where(available_to_purchase: 0)\n</code></pre>\n\n<p>The model will also have the accessor methods you were trying for, so you can do things like <code>results[0].available_to_purchase == 0</code> or <code>results[0].availability = 'Already in your house'</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 242, "user_id": 4126069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4939815d43d53c182674462b06d9f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Coburn Berry", "link": "https://stackoverflow.com/users/4126069/coburn-berry"}, "is_accepted": false, "score": 3, "last_activity_date": 1442418111, "creation_date": 1442418111, "answer_id": 32613123, "question_id": 32612903, "link": "https://stackoverflow.com/questions/32612903/filter-active-record-results-in-ruby/32613123#32613123", "title": "filter active record results in ruby", "body": "<p>In order to call .where on the results, you need an instance of an active record relation. Regular ActiveRecord queries will return this. select_all, however, returns an array of hashes. Array does not have the method where.</p>\n\n<pre><code>res = results.select { |result| result.available_to_purchase == 0 }\n</code></pre>\n\n<p>Your second error is because you are attempting to access ruby hash keys incorrectly. Properties must be accessed as<code>result['available_to_purchase']</code></p>\n"}, {"tags": [], "owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "is_accepted": false, "score": 2, "last_activity_date": 1442418209, "creation_date": 1442418209, "answer_id": 32613161, "question_id": 32612903, "link": "https://stackoverflow.com/questions/32612903/filter-active-record-results-in-ruby/32613161#32613161", "title": "filter active record results in ruby", "body": "<p>Here is the answer to your question. I do agree with others though that you should be using <code>ActiveRecord</code>.</p>\n\n<pre><code>results.select { |result| result['available_to_purchase'] == 0 }\n</code></pre>\n"}], "owner": {"reputation": 4464, "user_id": 1246159, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4e737447234111fb26cd9d21cd9f0333?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/1246159/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1865, "favorite_count": 1, "accepted_answer_id": 32613116, "answer_count": 3, "score": 1, "last_activity_date": 1442418209, "creation_date": 1442417468, "question_id": 32612903, "link": "https://stackoverflow.com/questions/32612903/filter-active-record-results-in-ruby", "title": "filter active record results in ruby", "body": "<p>Im completely new to Ruby on Rails. Im working on an existing API and I have a sql query which is executed with:</p>\n\n<pre><code>results = ActiveRecord::Base.connection.select_all(query)\n</code></pre>\n\n<p>The output of the results is:</p>\n\n<pre><code>{\"availability\"=&gt;\"In Stock\", \"available_to_purchase\"=&gt;1}\n{\"availability\"=&gt;\"Void\", \"available_to_purchase\"=&gt;0}\n{\"availability\"=&gt;\"Out of Stock\", \"available_to_purchase\"=&gt;0}\n{\"availability\"=&gt;\"In Stores Only\", \"available_to_purchase\"=&gt;0}\n</code></pre>\n\n<p>I know want to get all values for availability based on <code>available_to_purchase</code> being 0. I have tried:</p>\n\n<pre><code>res = results.where(available_to_purchase: 0)\n</code></pre>\n\n<p>But I get an error saying:</p>\n\n<pre><code>undefined method `where'\n</code></pre>\n\n<p>I also tried: </p>\n\n<pre><code>res = results.select { |result| result.available_to_purchase == 0 }\n</code></pre>\n\n<p>But i end up with the error:</p>\n\n<pre><code>undefined method `available_to_purchase'\n</code></pre>\n\n<p>I know I can loop through and check available_to_purchase is 0, then add to a new array. But is there any method to quickly filter active record results based on value of a column?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "parsing", "datetime"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 5, "creation_date": 1442417076, "post_id": 32612682, "comment_id": 53076163, "body": "Your computer clock probably has sub-second precision ;-) (hint: <code>to_f</code>)"}, {"owner": {"reputation": 1306, "user_id": 262961, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/164578b8d21de6e92453bbbfa17260ba?s=128&d=identicon&r=PG", "display_name": "Jeremy F.", "link": "https://stackoverflow.com/users/262961/jeremy-f"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1442417276, "post_id": 32612682, "comment_id": 53076283, "body": "Thanks !  Okay so the parsed datetime doesn&#39;t have sub-second precision. But then what should I do to fetch the record in the database ?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1442417747, "post_id": 32612682, "comment_id": 53076562, "body": "Either truncate the attribute to whole seconds before saving it to the database or pass a range that covers the whole second: <code>Ticket.where(datetime: parsed...parsed+1)</code>"}, {"owner": {"reputation": 14140, "user_id": 1188035, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/da4b6c80f86359463b47f42cfe307356?s=128&d=identicon&r=PG", "display_name": "sjagr", "link": "https://stackoverflow.com/users/1188035/sjagr"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1442418111, "post_id": 32612682, "comment_id": 53076787, "body": "For @Stefan&#39;s truncating tip: <code>current.change(:usec =&gt; 0)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1306, "user_id": 262961, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/164578b8d21de6e92453bbbfa17260ba?s=128&d=identicon&r=PG", "display_name": "Jeremy F.", "link": "https://stackoverflow.com/users/262961/jeremy-f"}, "edited": false, "score": 1, "creation_date": 1442417374, "post_id": 32612804, "comment_id": 53076340, "body": "Could you then expand on how we can fetch a record in the DB based on a parsed string that doesn&#39;t have millisecond precision ?"}, {"owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "reply_to_user": {"reputation": 1306, "user_id": 262961, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/164578b8d21de6e92453bbbfa17260ba?s=128&d=identicon&r=PG", "display_name": "Jeremy F.", "link": "https://stackoverflow.com/users/262961/jeremy-f"}, "edited": false, "score": 1, "creation_date": 1442417517, "post_id": 32612804, "comment_id": 53076415, "body": "@JeremyF. Can you print <code>ticket.datetime.to_f</code>?"}, {"owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "reply_to_user": {"reputation": 1306, "user_id": 262961, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/164578b8d21de6e92453bbbfa17260ba?s=128&d=identicon&r=PG", "display_name": "Jeremy F.", "link": "https://stackoverflow.com/users/262961/jeremy-f"}, "edited": false, "score": 1, "creation_date": 1442417746, "post_id": 32612804, "comment_id": 53076561, "body": "So it&#39;s not exactly what you get just from &quot;seconds&quot;"}, {"owner": {"reputation": 14140, "user_id": 1188035, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/da4b6c80f86359463b47f42cfe307356?s=128&d=identicon&r=PG", "display_name": "sjagr", "link": "https://stackoverflow.com/users/1188035/sjagr"}, "reply_to_user": {"reputation": 1306, "user_id": 262961, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/164578b8d21de6e92453bbbfa17260ba?s=128&d=identicon&r=PG", "display_name": "Jeremy F.", "link": "https://stackoverflow.com/users/262961/jeremy-f"}, "edited": false, "score": 3, "creation_date": 1442417936, "post_id": 32612804, "comment_id": 53076662, "body": "I wonder if you fetched the entry later, would it include those milliseconds? @JeremyF. What is your backlining database technology? MySQL certainly wouldn&#39;t store milliseconds, whereas PostgreSQL would."}, {"owner": {"reputation": 1306, "user_id": 262961, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/164578b8d21de6e92453bbbfa17260ba?s=128&d=identicon&r=PG", "display_name": "Jeremy F.", "link": "https://stackoverflow.com/users/262961/jeremy-f"}, "edited": false, "score": 0, "creation_date": 1442418262, "post_id": 32612804, "comment_id": 53076885, "body": "Good guess it&#39;s PostgreSQL and does indeed store the milliseconds as well."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1442420057, "post_id": 32612804, "comment_id": 53078134, "body": "For even more precision have a look at <code>current.subsec</code>."}, {"owner": {"reputation": 195413, "user_id": 634824, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/889cf720c96957e615463b5c903a5e18?s=128&d=identicon&r=PG", "display_name": "Matt Johnson-Pint", "link": "https://stackoverflow.com/users/634824/matt-johnson-pint"}, "reply_to_user": {"reputation": 1306, "user_id": 262961, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/164578b8d21de6e92453bbbfa17260ba?s=128&d=identicon&r=PG", "display_name": "Jeremy F.", "link": "https://stackoverflow.com/users/262961/jeremy-f"}, "edited": false, "score": 3, "creation_date": 1442426713, "post_id": 32612804, "comment_id": 53082105, "body": "@JeremyF. - In the vast majority of the cases, if you have to parse a string when retrieving a date/time from a database, you&#39;re doing it wrong.  You should be concerned with data type mapping, not string parsing."}, {"owner": {"reputation": 1306, "user_id": 262961, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/164578b8d21de6e92453bbbfa17260ba?s=128&d=identicon&r=PG", "display_name": "Jeremy F.", "link": "https://stackoverflow.com/users/262961/jeremy-f"}, "reply_to_user": {"reputation": 195413, "user_id": 634824, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/889cf720c96957e615463b5c903a5e18?s=128&d=identicon&r=PG", "display_name": "Matt Johnson-Pint", "link": "https://stackoverflow.com/users/634824/matt-johnson-pint"}, "edited": false, "score": 0, "creation_date": 1442431239, "post_id": 32612804, "comment_id": 53084609, "body": "@MattJohnson Good point, but here I don&#39;t really have a choice I&#39;m dealing with external data. Thanks for raising this idea in my brain though,  it will be useful next time :)"}, {"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "reply_to_user": {"reputation": 1306, "user_id": 262961, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/164578b8d21de6e92453bbbfa17260ba?s=128&d=identicon&r=PG", "display_name": "Jeremy F.", "link": "https://stackoverflow.com/users/262961/jeremy-f"}, "edited": false, "score": 0, "creation_date": 1442433804, "post_id": 32612804, "comment_id": 53085990, "body": "@JeremyF. Doing an &quot;equals&quot; comparison on timestamps is pretty much never a good idea anyway, for that matter. Equals on a timestamp truncated to date only or midnight of its date (<i>after</i> being localized to a particular time zone)? Sometimes that&#39;s okay. But almost any other case, you want an in-range comparison."}, {"owner": {"reputation": 42512, "user_id": 268074, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/dcb0b2795eb625e7afa1402514b9b069?s=128&d=identicon&r=PG", "display_name": "Petah", "link": "https://stackoverflow.com/users/268074/petah"}, "reply_to_user": {"reputation": 14140, "user_id": 1188035, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/da4b6c80f86359463b47f42cfe307356?s=128&d=identicon&r=PG", "display_name": "sjagr", "link": "https://stackoverflow.com/users/1188035/sjagr"}, "edited": false, "score": 0, "creation_date": 1442442835, "post_id": 32612804, "comment_id": 53090140, "body": "@sjagr just a side note, MySQL does support milliseconds as of 5.6.4"}], "tags": [], "owner": {"reputation": 7240, "user_id": 1426097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yV7IQ.jpg?s=128&g=1", "display_name": "dimakura", "link": "https://stackoverflow.com/users/1426097/dimakura"}, "is_accepted": false, "score": 21, "last_activity_date": 1442417171, "creation_date": 1442417171, "answer_id": 32612804, "question_id": 32612682, "link": "https://stackoverflow.com/questions/32612682/why-are-those-two-datetimes-different/32612804#32612804", "title": "Why are those two datetimes different?", "body": "<p>They should not be the same:</p>\n\n<pre><code>current.to_f #=&gt; 1442417032.6567826\nparsed.to_f  #=&gt; 1442417032.0\n</code></pre>\n\n<p>When parsing, you miss milliseconds.</p>\n"}, {"tags": [], "owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "is_accepted": false, "score": 3, "last_activity_date": 1442417236, "creation_date": 1442417236, "answer_id": 32612823, "question_id": 32612682, "link": "https://stackoverflow.com/questions/32612682/why-are-those-two-datetimes-different/32612823#32612823", "title": "Why are those two datetimes different?", "body": "<p>It's because they are not equal, they differ by parts of the second. What you see in the console is the result of <code>inspect</code> method called on those dates, which by default, drop any sub-second parts.</p>\n"}, {"tags": [], "owner": {"reputation": 1306, "user_id": 262961, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/164578b8d21de6e92453bbbfa17260ba?s=128&d=identicon&r=PG", "display_name": "Jeremy F.", "link": "https://stackoverflow.com/users/262961/jeremy-f"}, "is_accepted": true, "score": 5, "last_activity_date": 1442418983, "creation_date": 1442418983, "answer_id": 32613411, "question_id": 32612682, "link": "https://stackoverflow.com/questions/32612682/why-are-those-two-datetimes-different/32613411#32613411", "title": "Why are those two datetimes different?", "body": "<p>Thanks everyone for the help. I hope you don't mind but since pieces of the final answer are scattered across multiple answers I will answer my own question building on what you all said.</p>\n\n<p>So as for why the dates are different, it's because of the milliseconds missing in the parsed datetime. As @dimakura mentioned.</p>\n\n<pre><code>current.to_f #=&gt; 1442417032.6567826\nparsed.to_f  #=&gt; 1442417032.0\n</code></pre>\n\n<p>Then the answer about how could we fetch the Ticket record based a the parsed datetime.</p>\n\n<p>First it's important to know this will be relevant only for PostgreSQL (my case) or other databases that actually store milliseconds. Thanks to @sjagr for mentioning this.</p>\n\n<p>So we have to query for a range from parsed to parsed + 1 second, like @Stefan explained:</p>\n\n<pre><code>Ticket.where(datetime: parsed...parsed+1).first\n</code></pre>\n\n<p>And if we have control on the Ticket creation, we could also remove the millisecond precision before saving the the database. Thanks to @sjagr for providing an easy way to do that.</p>\n\n<pre><code>current = Time.current\nTicket.create(datetime: current.change(usec: 0))\n</code></pre>\n\n<p>Thanks everyone !</p>\n"}], "owner": {"reputation": 1306, "user_id": 262961, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/164578b8d21de6e92453bbbfa17260ba?s=128&d=identicon&r=PG", "display_name": "Jeremy F.", "link": "https://stackoverflow.com/users/262961/jeremy-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 691, "favorite_count": 2, "accepted_answer_id": 32613411, "answer_count": 3, "score": 14, "last_activity_date": 1442423881, "creation_date": 1442416800, "last_edit_date": 1442423881, "question_id": 32612682, "link": "https://stackoverflow.com/questions/32612682/why-are-those-two-datetimes-different", "title": "Why are those two datetimes different?", "body": "<p>Why isn't <code>Time.current</code> equal to its parsed equivalent?</p>\n\n<pre><code>current = Time.current\n# Wed, 16 Sep 2015 17:10:56 CEST +02:00\nparsed = Time.zone.parse('16 Sep 2015 17:10:56')\n# Wed, 16 Sep 2015 17:10:56 CEST +02:00\ncurrent == parsed\n# false &lt;= What ?!\ncurrent.to_i == parsed.to_i\n# true\nTicket.create(datetime: current)\n# ...\nTicket.find_by_datetime(parsed)\n# nil  &lt;= Why ?!\n</code></pre>\n\n<p>I'm actually having trouble with this in a Ruby on Rails application where I try to find a record based on a datetime attribute that has been parsed, like shown on the last lines.</p>\n\n<p>I really don't get it. Time zones are the same, times are the same down to seconds. What's happening here?</p>\n\n<p>Moreover, how should I proceed to find a record based on a parsed datetime?</p>\n"}, {"tags": ["ruby", "padrino", "pdfkit"], "comments": [{"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1442418225, "post_id": 32611694, "comment_id": 53076866, "body": "Is this a Rails question or a Sinatra question? Sinatra doesn\u2019t have <code>link_to</code> and <code>_path</code> methods by itself."}, {"owner": {"reputation": 423, "user_id": 3385136, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100005355848045/picture?type=large", "display_name": "user3385136", "link": "https://stackoverflow.com/users/3385136/user3385136"}, "reply_to_user": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1442421890, "post_id": 32611694, "comment_id": 53079311, "body": "@matt I&#39;m not quite sure. This application is strange it has references to Sinatra but link_to etc works in it so you tell me is it Rails or Sinatra or can it be both?"}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1442422211, "post_id": 32611694, "comment_id": 53079482, "body": "Is it <a href=\"http://www.padrinorb.com/\" rel=\"nofollow noreferrer\">Padrino</a> perhaps?"}, {"owner": {"reputation": 423, "user_id": 3385136, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100005355848045/picture?type=large", "display_name": "user3385136", "link": "https://stackoverflow.com/users/3385136/user3385136"}, "reply_to_user": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1442422538, "post_id": 32611694, "comment_id": 53079681, "body": "I think it may well be. It really confuses me that there are references to all three within the code so I&#39;m never 100% sure."}], "answers": [{"tags": [], "owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "is_accepted": false, "score": 2, "last_activity_date": 1442414574, "creation_date": 1442414574, "answer_id": 32611830, "question_id": 32611694, "link": "https://stackoverflow.com/questions/32611694/alternative-to-path/32611830#32611830", "title": "Alternative to _path", "body": "<p>Routes, in Rails, are declared in the <code>config/routes.rb</code> file. Take a look ate <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow\">this guide</a> for more info. </p>\n\n<p>The <code>order_path</code> is a helper method that rails provide to you when you declare your routes. You can see these routes aliases by runnig the <code>rake routes</code> command in your application root folder.</p>\n\n<p>Regarding to this line:</p>\n\n<pre><code>@order = Order.find(params[:id])\n</code></pre>\n\n<p>This will try to get an <code>Order</code> from the database using the passed id in the request parameters. See <a href=\"http://guides.rubyonrails.org/active_record_basics.html\" rel=\"nofollow\">this guide</a> for more information. </p>\n\n<p>My advise, read the entire <a href=\"http://guides.rubyonrails.org\" rel=\"nofollow\">Rails Guide</a> so you know what are you dealing with. </p>\n"}], "owner": {"reputation": 423, "user_id": 3385136, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100005355848045/picture?type=large", "display_name": "user3385136", "link": "https://stackoverflow.com/users/3385136/user3385136"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442422558, "creation_date": 1442414255, "last_edit_date": 1442422558, "question_id": 32611694, "link": "https://stackoverflow.com/questions/32611694/alternative-to-path", "title": "Alternative to _path", "body": "<p>I am following a tutorial from railscast (<a href=\"http://railscasts.com/episodes/220-pdfkit\" rel=\"nofollow\">http://railscasts.com/episodes/220-pdfkit</a>) and have become stuck when trying to implement the link for a PDF. The original code was: </p>\n\n<pre><code>&lt;p id=\"pdf_link\"&gt;&lt;%= link_to \"Download Invoice (PDF)\", order_path(@order, :format =&gt; \"pdf\") %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>I am however using haml so I have edited the line as follows:</p>\n\n<pre><code>= link_to 'Download PDF', order_path(@order, :format =&gt; \"pdf\")\n</code></pre>\n\n<p>I have realised that order_path would relate to a route specified in routes.rb. The problem is my application does not have a route folder (inherited the application from another developer). Therefore how would i go about creating this path in haml code.</p>\n\n<p>Also I was wondering about replacing @order. In looking through the code i noticed it is declared as such. Could someone explain what this piece of code declares order as?</p>\n\n<pre><code>@order = Order.find(params[:id])\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 1, "creation_date": 1442413725, "post_id": 32611216, "comment_id": 53073658, "body": "Braces in question title and body do not mach. Where are the correct ones?"}, {"owner": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "reply_to_user": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 0, "creation_date": 1442413931, "post_id": 32611216, "comment_id": 53073824, "body": "I am sorry @AlexeyShein. I updated the question."}], "answers": [{"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1442415296, "post_id": 32611750, "comment_id": 53074892, "body": "Great answer! I&#39;ve removed my answer since yours is the obviously more correct."}, {"owner": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "edited": false, "score": 0, "creation_date": 1442415859, "post_id": 32611750, "comment_id": 53075285, "body": "Can you clarify this. From where these values are getting loaded to $(key)"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "edited": false, "score": 2, "creation_date": 1442415876, "post_id": 32611750, "comment_id": 53075303, "body": "@Vijay Same way as anything mini-templating works--the link Stefan provides shows <i>exactly</i> how it works."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "edited": false, "score": 0, "creation_date": 1442416266, "post_id": 32611750, "comment_id": 53075609, "body": "@Vijay the values come from <code>RbConfig::CONFIG</code>. More precisely, <code>gsub</code> finds the substring <code>&quot;$(exec_prefix)&quot;</code> and replaces it with <code>RbConfig::CONFIG[&quot;exec_prefix&quot;]</code>"}, {"owner": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "edited": false, "score": 0, "creation_date": 1442416330, "post_id": 32611750, "comment_id": 53075646, "body": "What i meant is mkconfig.rb is Ruby source package folder, But rbconfig.rb is located in ruby installed location. So how does it expands when i execute this `RbConfig::CONFIG[&#39;libdir&#39;]&#39; in IRB."}, {"owner": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "edited": false, "score": 0, "creation_date": 1442416504, "post_id": 32611750, "comment_id": 53075768, "body": "I can understand this replaces that key with value. But from where it knows that value."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "edited": false, "score": 0, "creation_date": 1442416741, "post_id": 32611750, "comment_id": 53075912, "body": "@Vijay not sure if I understand your question. <code>CONFIG.each_value</code> is a loop that traverses each value in the <code>CONFIG</code> hash, replacing the <code>$(...)</code> placeholders with their respective values. The replacement-values are also stored in the <code>CONFIG</code> hash."}, {"owner": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "edited": false, "score": 0, "creation_date": 1442417181, "post_id": 32611750, "comment_id": 53076227, "body": "In <code>irb</code> you can run <code>RbConfig::CONFIG[&quot;libdir&quot;]</code>  will give you this value <code>&#47;Users&#47;sos&#47;.rubies&#47;ruby-2.2.2&#47;lib</code>. How it knows <code>$(exec_prefix)</code> is <code>&#47;Users&#47;sos&#47;.rubies&#47;ruby-2.2.2</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "edited": false, "score": 0, "creation_date": 1442417261, "post_id": 32611750, "comment_id": 53076273, "body": "@Vijay because <code>RbConfig::CONFIG[&quot;exec_prefix&quot;]</code> is <code>&quot;&#47;Users&#47;sos&#47;.rubies&#47;ruby-2.2.2&quot;</code>"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1442424731, "post_id": 32611750, "comment_id": 53080886, "body": "@Stefan  Could the have used <code>&quot;#{CONFIG[&#39;prefix&#39;]}&quot;</code> in place of <code>$(prefix)</code>?  It seems some kind of trick to save typing some chars.  Just wondering  :-)"}, {"owner": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "edited": false, "score": 0, "creation_date": 1442425555, "post_id": 32611750, "comment_id": 53081360, "body": "@Stefan Now edit the value like this <code>CONFIG[&quot;prefix&quot;]      = (TOPDIR || DESTDIR + &quot;&#47;Users&#47;sos&#47;.rubies&#47;ruby-2.2.3&quot;)</code> and run this line of code <code>RbConfig::CONFIG[&quot;libdir&quot;]</code>. You will get still <code>&#47;Users&#47;sos&#47;.rubies&#47;ruby-2.2.2&#47;lib</code>. Sorry for late  reply."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "edited": false, "score": 0, "creation_date": 1442426932, "post_id": 32611750, "comment_id": 53082245, "body": "@Vijay that&#39;s because <code>TOPDIR</code> is already defined, so that the right-hand side of <code>||</code> is not evaluated. But if you edit <code>rbconfig.rb</code> and set <code>TOPDIR = &#39;foo&#39;</code> (line 9), then <code>RbConfig::CONFIG[&quot;libdir&quot;]</code> will actually return <code>&quot;foo&#47;lib&quot;</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1442427255, "post_id": 32611750, "comment_id": 53082401, "body": "@WandMaker yes, you could probably do the same with string interpolation."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 6, "last_activity_date": 1442414754, "last_edit_date": 1442414754, "creation_date": 1442414404, "answer_id": 32611750, "question_id": 32611216, "link": "https://stackoverflow.com/questions/32611216/how-ruby-interprets-foo/32611750#32611750", "title": "How Ruby Interprets $(foo)", "body": "<p><code>$(exec_prefix)</code> refers to a key in <code>RbConfig::CONFIG</code>.</p>\n\n<p>But that's not a Ruby feature. <code>rbconfig.rb</code> contains <a href=\"https://github.com/ruby/ruby/blob/v2_2_3/tool/mkconfig.rb#L240-L260\">code to expand these values</a>: every occurrence of <code>$(key)</code> is replaced with the corresponding value of <code>RbConfig::CONFIG['key']</code></p>\n\n<p>My <code>rbconfig.rb</code> contains these lines:</p>\n\n<pre><code>CONFIG[\"prefix\"]      = (TOPDIR || DESTDIR + \"/Users/sos/.rubies/ruby-2.2.2\")\nCONFIG[\"exec_prefix\"] = \"$(prefix)\"\nCONFIG[\"libdir\"]      = \"$(exec_prefix)/lib\"\n</code></pre>\n\n<p>And their values are:</p>\n\n<pre><code>RbConfig::CONFIG[\"prefix\"]      #=&gt; \"/Users/sos/.rubies/ruby-2.2.2\"\nRbConfig::CONFIG[\"exec_prefix\"] #=&gt; \"/Users/sos/.rubies/ruby-2.2.2\"\nRbConfig::CONFIG[\"libdir\"]      #=&gt; \"/Users/sos/.rubies/ruby-2.2.2/lib\"\n</code></pre>\n"}], "owner": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 32611750, "answer_count": 1, "score": 0, "last_activity_date": 1442414754, "creation_date": 1442413030, "last_edit_date": 1442413885, "question_id": 32611216, "link": "https://stackoverflow.com/questions/32611216/how-ruby-interprets-foo", "title": "How Ruby Interprets $(foo)", "body": "<p>When I read <code>RbConfig::CONFIG['libdir']</code> it gives me lib folder location. But in rbconfig.rb file <code>CONFIG[\"libdir\"] = \"$(exec_prefix)/lib\"</code>. How the value is interpreted here. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "action", "rake-task"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 1, "creation_date": 1442414910, "post_id": 32611076, "comment_id": 53074621, "body": "Can you run the task in the command line? If yes, is this how you call it: <code>att_rec_for_emp:hello(&quot;hello world&quot;)</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 1044, "user_id": 4929150, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1f9a6a13c0a52d12b585ab8a36e68acb?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4929150/john"}, "edited": false, "score": 0, "creation_date": 1442414872, "post_id": 32611229, "comment_id": 53074589, "body": "if you do: <code>rake -T</code> in your console, do you see the rake task there?"}, {"owner": {"reputation": 1044, "user_id": 4929150, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1f9a6a13c0a52d12b585ab8a36e68acb?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4929150/john"}, "edited": false, "score": 0, "creation_date": 1442415964, "post_id": 32611229, "comment_id": 53075381, "body": "no. in the list there is no rake task. wrapping the rake task in the &quot;namespace&quot; is it mandatory?"}, {"owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "reply_to_user": {"reputation": 1044, "user_id": 4929150, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1f9a6a13c0a52d12b585ab8a36e68acb?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4929150/john"}, "edited": false, "score": 0, "creation_date": 1442416071, "post_id": 32611229, "comment_id": 53075466, "body": "add a <code>desc &#39;description of the rake task&#39;</code> just before the <code>task name_of_task</code>, then it should appear when you do: <code>rake -T</code>"}], "tags": [], "owner": {"reputation": 31319, "user_id": 981183, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/88dd7155ef7c0e5f43ab8d1a9efdecab?s=128&d=identicon&r=PG&f=1", "display_name": "K M Rakibul Islam", "link": "https://stackoverflow.com/users/981183/k-m-rakibul-islam"}, "is_accepted": false, "score": 0, "last_activity_date": 1442413059, "creation_date": 1442413059, "answer_id": 32611229, "question_id": 32611076, "link": "https://stackoverflow.com/questions/32611076/rake-task-is-not-calling-from-the-controller-action-in-rails/32611229#32611229", "title": "rake task is not calling. from the controller action in rails.", "body": "<p>Try adding this line to your controller:</p>\n\n<pre><code>YourAppName::Application.load_tasks\n</code></pre>\n\n<p>Or, change the directory name from <code>initialisers</code> to <code>initializers</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "is_accepted": false, "score": 2, "last_activity_date": 1442417650, "last_edit_date": 1442417650, "creation_date": 1442417327, "answer_id": 32612854, "question_id": 32611076, "link": "https://stackoverflow.com/questions/32611076/rake-task-is-not-calling-from-the-controller-action-in-rails/32612854#32612854", "title": "rake task is not calling. from the controller action in rails.", "body": "<p>I think I got it working. Tweak from here.</p>\n\n<p>Here's what I did:</p>\n\n<p><strong>lib/tasks/att_rec_for_emp.rake</strong></p>\n\n<pre><code>task :hello, [:parameter] =&gt; :environment do |t, args|\n  p \"#{args[:parameter]}\"\nend\n</code></pre>\n\n<p><strong>app/controllers/your_controller.rb</strong></p>\n\n<pre><code>Rake::Task.clear\nYourAppName::Application.load_tasks\n\nclass YourController &lt; ApplicationController\n  def call_task\n    Rake::Task[:hello].reenable\n    Rake::Task[:hello].invoke('hi world')\n  end\nend\n</code></pre>\n\n<p>You could also put those first two lines (above YourController class definition) in an initializer.</p>\n\n<p><em>Note</em>: Your approach of loading the Rake file in an initializer should work too but my setup is a little different. I have my entire lib directory loaded in <code>application.rb</code>.</p>\n\n<p><strong>config/application.rb</strong></p>\n\n<pre><code>config.autoload_paths += Dir[\"#{config.root}/lib\"]\n</code></pre>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 1044, "user_id": 4929150, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1f9a6a13c0a52d12b585ab8a36e68acb?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4929150/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1442417650, "creation_date": 1442412718, "last_edit_date": 1442413066, "question_id": 32611076, "link": "https://stackoverflow.com/questions/32611076/rake-task-is-not-calling-from-the-controller-action-in-rails", "title": "rake task is not calling. from the controller action in rails.", "body": "<p>I have created a rake task in the file called <code>att_rec_for_emp.rake</code> . in this file i have the following task.</p>\n\n<pre><code>  task hello(parameter): :environment do\n\n  p \"{parameter}\"\n\n  end\n</code></pre>\n\n<p>how can i call this rake task in the controller action by passing parameters? </p>\n\n<p>i have an action like this </p>\n\n<pre><code>   def call_task\n     emp = Employee.first\n     Rake::Task[ 'att_rec_for_emp:hello(\"hello world\")' ].invoke\n     redirect_to :root , :notice =&gt; \"message fine\" \n   end\n</code></pre>\n\n<p>and in <code>config/initialisers/rake.rb</code> i have the following statement.</p>\n\n<pre><code>  Rake.load_rakefile Rails.root.join(  'lib','tasks','att_rec_for_emp.rake' )\n</code></pre>\n\n<p>but still the task is not executing. getting the error</p>\n\n<pre><code>   Don't know how to build task 'att_rec_for_emp:hello'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "nomethoderror"], "comments": [{"owner": {"reputation": 1281, "user_id": 3232523, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u6WFs.png?s=128&g=1", "display_name": "Ninigi", "link": "https://stackoverflow.com/users/3232523/ninigi"}, "edited": false, "score": 0, "creation_date": 1442412432, "post_id": 32610868, "comment_id": 53072665, "body": "My guess is, <code>Text</code> is a class inheriting from ActiveRecord? Please post your Text code."}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1442412526, "post_id": 32610868, "comment_id": 53072723, "body": "More questions, what is <code>text</code>?"}, {"owner": {"reputation": 27, "user_id": 5306421, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8c623264e0e878ccfedbb89fa05e1b0a?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Narayanan", "link": "https://stackoverflow.com/users/5306421/rahul-narayanan"}, "edited": false, "score": 0, "creation_date": 1442412608, "post_id": 32610868, "comment_id": 53072795, "body": "Ninigi I haven&#39;t added anything in there yet class Text &lt; ActiveRecord::Base end"}, {"owner": {"reputation": 27, "user_id": 5306421, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8c623264e0e878ccfedbb89fa05e1b0a?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Narayanan", "link": "https://stackoverflow.com/users/5306421/rahul-narayanan"}, "edited": false, "score": 0, "creation_date": 1442413779, "post_id": 32610868, "comment_id": 53073688, "body": "+BroSatse Text is the scaffold name,i typed in this rails g Scaffold Text text:string for more information"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3720516"}, "edited": false, "score": 0, "creation_date": 1442426874, "post_id": 32610868, "comment_id": 53082210, "body": "Why not just change (at)counter= text.split.size to (at)counter = (at)text.split.size and then remove your before_action?"}], "answers": [{"comments": [{"owner": {"reputation": 4711, "user_id": 83729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5071d40db06ac987180c40e675b7193b?s=128&d=identicon&r=PG", "display_name": "msergeant", "link": "https://stackoverflow.com/users/83729/msergeant"}, "reply_to_user": {"reputation": 27, "user_id": 5306421, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8c623264e0e878ccfedbb89fa05e1b0a?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Narayanan", "link": "https://stackoverflow.com/users/5306421/rahul-narayanan"}, "edited": false, "score": 0, "creation_date": 1442413247, "post_id": 32611022, "comment_id": 53073299, "body": "To be clear, the &quot;some_member_of_text&quot; part needs to be a field from your Text object. From your view, it seems that the field of interest on Text might be &quot;name&quot;? Have you tried @counter = text.name.split.size?"}, {"owner": {"reputation": 27, "user_id": 5306421, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8c623264e0e878ccfedbb89fa05e1b0a?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Narayanan", "link": "https://stackoverflow.com/users/5306421/rahul-narayanan"}, "edited": false, "score": 0, "creation_date": 1442414182, "post_id": 32611022, "comment_id": 53074049, "body": "But as i said before i also have a no method error hence my form is not working at all ,it says @text is nil any help on that?"}, {"owner": {"reputation": 27, "user_id": 5306421, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8c623264e0e878ccfedbb89fa05e1b0a?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Narayanan", "link": "https://stackoverflow.com/users/5306421/rahul-narayanan"}, "edited": false, "score": 0, "creation_date": 1442415258, "post_id": 32611022, "comment_id": 53074866, "body": "Nvm i fixed the no method error  however now my counter is nil and still doesnt show any output"}, {"owner": {"reputation": 4711, "user_id": 83729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5071d40db06ac987180c40e675b7193b?s=128&d=identicon&r=PG", "display_name": "msergeant", "link": "https://stackoverflow.com/users/83729/msergeant"}, "reply_to_user": {"reputation": 27, "user_id": 5306421, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8c623264e0e878ccfedbb89fa05e1b0a?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Narayanan", "link": "https://stackoverflow.com/users/5306421/rahul-narayanan"}, "edited": false, "score": 0, "creation_date": 1442416470, "post_id": 32611022, "comment_id": 53075739, "body": "So, you probably need to make sure that the field you call split on has a value, and before that you need to make sure that text_params contains what you want to initialize the Text object with. If the value is an empty string, split will give you [] which has a size of 0. It is difficult to troubleshoot without seeing the current state of your code. You made need to start another question."}, {"owner": {"reputation": 27, "user_id": 5306421, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8c623264e0e878ccfedbb89fa05e1b0a?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Narayanan", "link": "https://stackoverflow.com/users/5306421/rahul-narayanan"}, "edited": false, "score": 0, "creation_date": 1442422787, "post_id": 32611022, "comment_id": 53079826, "body": "The @text.name does have a value i checked that just the counter seems to be nil"}], "tags": [], "owner": {"reputation": 4711, "user_id": 83729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5071d40db06ac987180c40e675b7193b?s=128&d=identicon&r=PG", "display_name": "msergeant", "link": "https://stackoverflow.com/users/83729/msergeant"}, "is_accepted": false, "score": 1, "last_activity_date": 1442412574, "creation_date": 1442412574, "answer_id": 32611022, "question_id": 32610868, "link": "https://stackoverflow.com/questions/32610868/undefined-method-split-nomethoderror-in-textscontrollercreate/32611022#32611022", "title": "undefined method &#39;split&#39; NoMethodError in TextsController#create", "body": "<p><code>split</code> is a method that can be called on strings. You are trying to call it on a <code>Text</code> object. You probably are intending to call split on a member of the <code>Text</code> object. Something like this:</p>\n\n<pre><code>@counter = text.some_member_of_text.split.size\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 103, "user_id": 5035934, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/e8347bedc61cde41ed2a02bb98f321bc?s=128&d=identicon&r=PG", "display_name": "rnpd", "link": "https://stackoverflow.com/users/5035934/rnpd"}, "is_accepted": false, "score": 0, "last_activity_date": 1442425203, "creation_date": 1442425203, "answer_id": 32615222, "question_id": 32610868, "link": "https://stackoverflow.com/questions/32610868/undefined-method-split-nomethoderror-in-textscontrollercreate/32615222#32615222", "title": "undefined method &#39;split&#39; NoMethodError in TextsController#create", "body": "<p>After you get the string, in order to use split you should set a pattern like:</p>\n\n<pre><code>@counter = text.split(//).size\n</code></pre>\n\n<p>'(//)' will split each char I think it's what your looking for. The default pattern, which is applied in your case since you don't define it, splits between the spaces according to the docs:</p>\n\n<p><a href=\"http://apidock.com/ruby/String/split\" rel=\"nofollow\">http://apidock.com/ruby/String/split</a></p>\n"}], "owner": {"reputation": 27, "user_id": 5306421, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8c623264e0e878ccfedbb89fa05e1b0a?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Narayanan", "link": "https://stackoverflow.com/users/5306421/rahul-narayanan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 986, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1442425203, "creation_date": 1442412232, "last_edit_date": 1442412490, "question_id": 32610868, "link": "https://stackoverflow.com/questions/32610868/undefined-method-split-nomethoderror-in-textscontrollercreate", "title": "undefined method &#39;split&#39; NoMethodError in TextsController#create", "body": "<p>I am trying to build a simple word counter but I am getting a no method error here is my code any help would be appreciated </p>\n\n<p><strong>Controller </strong></p>\n\n<pre><code>lass TextsController &lt; ApplicationController\n before_action :set_text, only: [:show, :edit, :update, :destroy]\n\n\ndef index\n @texts = Text.all\nend\n\ndef show\nend\n\ndef new\n @text = Text.new\nend\n\ndef edit\nend\n\ndef create\n @text = Text.new(text_params)\n @counter = text.split.size\n\n\nend\n</code></pre>\n\n<p><strong> View </strong></p>\n\n<pre><code>&lt;%= form_for(@text) do |f| %&gt;\n</code></pre>\n\n<p></p>\n\n<pre><code>&lt;%= f.label :name %&gt;&lt;br&gt;\n   &lt;%= f.text_field :name %&gt;\n</code></pre>\n\n<p></p>\n\n<pre><code>&lt;div class=\"actions\"&gt;\n  &lt;%= f.submit %&gt;\n&lt;/div&gt;\n</code></pre>\n\n   \n"}, {"tags": ["ruby-on-rails", "ruby", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1442451417, "post_id": 32609824, "comment_id": 53092225, "body": "&quot;<code>end  if bad_doc.errors.present?</code>&quot; Don&#39;t do that. Put your <code>if</code> ahead of the block and wrap the block in an <code>if</code>/<code>end</code>."}, {"owner": {"reputation": 330, "user_id": 4117545, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/f74ae9a7105a4a1628c024fb1b947c21?s=128&d=identicon&r=PG&f=1", "display_name": "Gregy", "link": "https://stackoverflow.com/users/4117545/gregy"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1442677458, "post_id": 32609824, "comment_id": 53185921, "body": "is there any reason to do that? is it against the convention ?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1442892641, "post_id": 32609824, "comment_id": 53259058, "body": "Look at the code quickly, as if you were searching for a bug or something not behaving right. A trailing conditional, while it works, is hard to see and that makes a maintenance problem, especially when someone isn&#39;t expecting it at 3:00AM. They work great for single line commands but once a block is involved I always use a leading <code>if</code>."}], "answers": [{"tags": [], "owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "is_accepted": true, "score": 1, "last_activity_date": 1442418353, "creation_date": 1442418353, "answer_id": 32613208, "question_id": 32609824, "link": "https://stackoverflow.com/questions/32609824/nokogiri-syntax-errors-translation/32613208#32613208", "title": "Nokogiri syntax errors translation", "body": "<p>you need to have a look at the libxml2 source code.</p>\n\n<p>this file holds all error-codes: <a href=\"https://github.com/tenderlove/libxml2/blob/ecb5d5afdc8acceba608524f6e98c361fd2ce0e9/include/libxml/xmlerror.h#L174\" rel=\"nofollow\">https://github.com/tenderlove/libxml2/blob/ecb5d5afdc8acceba608524f6e98c361fd2ce0e9/include/libxml/xmlerror.h#L174</a></p>\n"}], "owner": {"reputation": 330, "user_id": 4117545, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/f74ae9a7105a4a1628c024fb1b947c21?s=128&d=identicon&r=PG&f=1", "display_name": "Gregy", "link": "https://stackoverflow.com/users/4117545/gregy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 32613208, "answer_count": 1, "score": 0, "last_activity_date": 1442451467, "creation_date": 1442409649, "last_edit_date": 1442451467, "question_id": 32609824, "link": "https://stackoverflow.com/questions/32609824/nokogiri-syntax-errors-translation", "title": "Nokogiri syntax errors translation", "body": "<p>I have custom validation for <code>html_document</code> column in database:</p>\n\n<pre><code>  def html_format\n    bad_doc = Nokogiri::HTML(html_document) { |config| config.strict }\n    bad_doc.errors.each do |e|\n      errors.add(:html_document, [e.message,e.line].join(' at line: '))\n    end  if bad_doc.errors.present?\n  end\n</code></pre>\n\n<p>I would like to make translation of returned errors for several languages. <br>Error which is returned from Nokogiri looks like this:</p>\n\n<pre><code>Unexpected end tag : p\n</code></pre>\n\n<p>I have figured out by browsing Nokogiri documentation that I can check what  is the number of returned error:</p>\n\n<pre><code>[1] pry(#&lt;Model&gt;)&gt; errors.first.code\n=&gt; 76 \n</code></pre>\n\n<p>I have an idea to do translation by given code numbers.<br>\nThe question is, where can I find full table of errors codes and messages?</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 4, "creation_date": 1442409858, "post_id": 32609854, "comment_id": 53070648, "body": "Or just <code>a &lt;&lt; gets.chomp</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1442410786, "post_id": 32609854, "comment_id": 53071406, "body": "Or <code>a = 10.times.map { gets.chomp }</code>"}], "tags": [], "owner": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "is_accepted": false, "score": 3, "last_activity_date": 1442409731, "creation_date": 1442409731, "answer_id": 32609854, "question_id": 32609784, "link": "https://stackoverflow.com/questions/32609784/initialize-an-array-and-accept-arguments-at-runtime/32609854#32609854", "title": "Initialize an Array and accept arguments at runtime", "body": "<p>You can use <code>gets</code>:</p>\n\n<pre><code>a = []\n10.times{|i| a[i] = gets.chomp}\n</code></pre>\n\n<p><a href=\"https://repl.it/BI6W\" rel=\"nofollow\"><strong>Demonstration</strong></a></p>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 5, "last_activity_date": 1442410584, "creation_date": 1442410584, "answer_id": 32610194, "question_id": 32609784, "link": "https://stackoverflow.com/questions/32609784/initialize-an-array-and-accept-arguments-at-runtime/32610194#32610194", "title": "Initialize an Array and accept arguments at runtime", "body": "<p>Like this:</p>\n\n<pre><code>Array.new(10){gets.chomp}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1442738606, "post_id": 32610704, "comment_id": 53199775, "body": "The second line, though correct, does not return <code>a</code>. You could write <code>10.times.map { gets.chomp }</code>, which does."}], "tags": [], "owner": {"reputation": 1239, "user_id": 2134398, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c858429a7d7289246899d678137e7ea0?s=128&d=identicon&r=PG", "display_name": "Arif", "link": "https://stackoverflow.com/users/2134398/arif"}, "is_accepted": false, "score": 0, "last_activity_date": 1442411851, "creation_date": 1442411851, "answer_id": 32610704, "question_id": 32609784, "link": "https://stackoverflow.com/questions/32609784/initialize-an-array-and-accept-arguments-at-runtime/32610704#32610704", "title": "Initialize an Array and accept arguments at runtime", "body": "<p>Try this:</p>\n\n<pre><code>a = []\n10.times{a.push(gets.chomp)}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5342455, "user_type": "registered", "profile_image": "https://graph.facebook.com/701579996653661/picture?type=large", "display_name": "Tejas Rastogi", "link": "https://stackoverflow.com/users/5342455/tejas-rastogi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1442411851, "creation_date": 1442409574, "last_edit_date": 1442411249, "question_id": 32609784, "link": "https://stackoverflow.com/questions/32609784/initialize-an-array-and-accept-arguments-at-runtime", "title": "Initialize an Array and accept arguments at runtime", "body": "<p>How can I build an Array with multiple values accepted from the user at run time?</p>\n\n<p>For e.g., we have in c++ like:</p>\n\n<pre><code>for(i=0;i&lt;10;i++){ cin&gt;&gt;a[i]; }\n</code></pre>\n"}, {"tags": ["ruby", "bash"], "comments": [{"owner": {"reputation": 2044, "user_id": 1107211, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mte2a.jpg?s=128&g=1", "display_name": "wurde", "link": "https://stackoverflow.com/users/1107211/wurde"}, "edited": false, "score": 0, "creation_date": 1442410990, "post_id": 32609761, "comment_id": 53071575, "body": "It is looking for an actual Rakefile. It expects that file to pull in all other .rake files into it."}], "answers": [{"tags": [], "owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "is_accepted": false, "score": 1, "last_activity_date": 1442410515, "creation_date": 1442410515, "answer_id": 32610157, "question_id": 32609761, "link": "https://stackoverflow.com/questions/32609761/implementing-pdfkit-but-no-rakefile-found/32610157#32610157", "title": "Implementing PDFKIT but no Rakefile found", "body": "<p>If you're using rails, then there should be a file named 'Rakefile' in the root of your project, this usually looks like this:</p>\n\n<pre><code># Add your own tasks in files placed in lib/tasks ending in .rake,\n# for example lib/tasks/capistrano.rake, and they will automatically be available to Rake.\n\nrequire File.expand_path('../config/application', __FILE__)\n\nAppName::Application.load_tasks\n</code></pre>\n\n<p>Suggest you create it if it's not there.</p>\n\n<p>If you're not using rails, you'll need to add a Rakefile and manually require the tasks within it (also remove the ruby-on-rails tag from your question)</p>\n"}], "owner": {"reputation": 423, "user_id": 3385136, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100005355848045/picture?type=large", "display_name": "user3385136", "link": "https://stackoverflow.com/users/3385136/user3385136"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1442411745, "creation_date": 1442409497, "last_edit_date": 1442411745, "question_id": 32609761, "link": "https://stackoverflow.com/questions/32609761/implementing-pdfkit-but-no-rakefile-found", "title": "Implementing PDFKIT but no Rakefile found", "body": "<p>I'm following a railscast, but there is a stage where it asks to bash: </p>\n\n<pre><code>rake middleware \n</code></pre>\n\n<p>When I run this command it says 'no Rakefile found'. Looking through my files I see warble.rake and version.rake but no others. Could someone explain where I am going wrong or where I could find this or whether I need to create it. If so where?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pagination", "will-paginate"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1442415138, "post_id": 32609493, "comment_id": 53074768, "body": "Can you explain this better?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1442419016, "post_id": 32609493, "comment_id": 53077447, "body": "You could use javascript and ajax to replace the page content - but you lose the proper back button behavior and users cannot share a link to a specific page by copying the url. My recommendation is just get over the pretty URL OCD."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1442419111, "post_id": 32609493, "comment_id": 53077499, "body": "PS. that why any decent tabs implementation uses hashes or pushState to become stateful."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 4966235, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b96ad206d514203bb4658a03f1e1fd7b?s=128&d=identicon&r=PG&f=1", "display_name": "cleve yeo", "link": "https://stackoverflow.com/users/4966235/cleve-yeo"}, "edited": false, "score": 0, "creation_date": 1442449782, "post_id": 32615736, "comment_id": 53091866, "body": "Can i have guide on this?how do i hide it through css"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3720516"}, "reply_to_user": {"reputation": 93, "user_id": 4966235, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b96ad206d514203bb4658a03f1e1fd7b?s=128&d=identicon&r=PG&f=1", "display_name": "cleve yeo", "link": "https://stackoverflow.com/users/4966235/cleve-yeo"}, "edited": false, "score": 0, "creation_date": 1442511236, "post_id": 32615736, "comment_id": 53121624, "body": "All you need to do is change the CSS for the specific element on the html page to &quot;display:none&quot;"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3720516"}, "is_accepted": false, "score": 0, "last_activity_date": 1442427076, "creation_date": 1442427076, "answer_id": 32615736, "question_id": 32609493, "link": "https://stackoverflow.com/questions/32609493/guide-in-hiding-will-paginate-page-links/32615736#32615736", "title": "Guide in hiding will_paginate page links", "body": "<p>You can edit the CSS on the will_paginate objects displayed in browser to hide them.</p>\n"}], "owner": {"reputation": 93, "user_id": 4966235, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b96ad206d514203bb4658a03f1e1fd7b?s=128&d=identicon&r=PG&f=1", "display_name": "cleve yeo", "link": "https://stackoverflow.com/users/4966235/cleve-yeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442427076, "creation_date": 1442408828, "question_id": 32609493, "link": "https://stackoverflow.com/questions/32609493/guide-in-hiding-will-paginate-page-links", "title": "Guide in hiding will_paginate page links", "body": "<p>Is there any way i can prevent the page links render from will_paginate to be displayed on the address bar? Just like when i navigate betweens tabs, when i implement tab-content, the links between the tabs are not being displayed out.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "rails-activerecord"], "comments": [{"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1442409553, "post_id": 32609483, "comment_id": 53070405, "body": "I am a little bit surprised, nil values should show on top when ordering desc. What DB do you use?"}], "answers": [{"comments": [{"owner": {"reputation": 744, "user_id": 1885107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f3cb4e9a996ab41c7980d6954dfb68d?s=128&d=identicon&r=PG", "display_name": "Prakash Laxkar", "link": "https://stackoverflow.com/users/1885107/prakash-laxkar"}, "edited": false, "score": 1, "creation_date": 1442413009, "post_id": 32609724, "comment_id": 53073119, "body": "Thanks but I think it&#39;s not a good solution to run 2 query for order only"}, {"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "reply_to_user": {"reputation": 744, "user_id": 1885107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f3cb4e9a996ab41c7980d6954dfb68d?s=128&d=identicon&r=PG", "display_name": "Prakash Laxkar", "link": "https://stackoverflow.com/users/1885107/prakash-laxkar"}, "edited": false, "score": 0, "creation_date": 1442414407, "post_id": 32609724, "comment_id": 53074229, "body": "No problem bro. Just a possible solution."}], "tags": [], "owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "is_accepted": false, "score": 0, "last_activity_date": 1442409405, "creation_date": 1442409405, "answer_id": 32609724, "question_id": 32609483, "link": "https://stackoverflow.com/questions/32609483/how-to-make-order-apply-only-to-non-null-records-yet-get-all-records/32609724#32609724", "title": "How to make order apply only to non-null records yet get all records?", "body": "<p>You may do like this:</p>\n\n<pre><code>@redeemables_without_expiry = @business.redeemables.where(\"expiry_date IS NULL\")\n@redeemables_with_expiry = @business.redeemables.where(\"expiry_date IS NOT NULL\").order(expiry_date: :desc)\n\n@redeemables = @redeemables_without_expiry + @redeemables_with_expiry\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2133, "user_id": 3820185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6XZmR.jpg?s=128&g=1", "display_name": "wiesion", "link": "https://stackoverflow.com/users/3820185/wiesion"}, "is_accepted": false, "score": 2, "last_activity_date": 1442410345, "creation_date": 1442410345, "answer_id": 32610076, "question_id": 32609483, "link": "https://stackoverflow.com/questions/32609483/how-to-make-order-apply-only-to-non-null-records-yet-get-all-records/32610076#32610076", "title": "How to make order apply only to non-null records yet get all records?", "body": "<p>If you're using PostgreSQL there's the nice <code>NULLS FIRST</code> (vs. <code>NULLS LAST</code>) statement, but there's the standard SQL way of doing this (<code>CASE</code> works basically always), because <code>relation + relation</code> will trigger eager loading, which you probably don't want to happen.</p>\n\n<pre><code>@redeemables = @business.redeemables.order('(CASE WHEN expiry_date IS NULL THEN 1 ELSE 0 END) desc, expiry_date desc')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 4083986, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XPz8DyxWH1k/AAAAAAAAAAI/AAAAAAAAAIE/J2ff9YEspU4/photo.jpg?sz=128", "display_name": "Laurence", "link": "https://stackoverflow.com/users/4083986/laurence"}, "is_accepted": false, "score": 0, "last_activity_date": 1442417694, "last_edit_date": 1442417694, "creation_date": 1442413466, "answer_id": 32611393, "question_id": 32609483, "link": "https://stackoverflow.com/questions/32609483/how-to-make-order-apply-only-to-non-null-records-yet-get-all-records/32611393#32611393", "title": "How to make order apply only to non-null records yet get all records?", "body": "<p>Try something like this:</p>\n\n<pre><code>@redeemables = @business.redeemables.sort_by {|r| \"#{r.expiry_date.blank?} #{r.desc}\" }\n</code></pre>\n\n<p>Whats its basically doing is sorting by a concatenated string of whether the expiry date is blank (<code>true</code>/<code>false</code>) and the description. (e.g. <code>false item_description</code>).</p>\n\n<p>If you want to change the sort order of the nil <code>expiry_dates</code>, you can do the following:</p>\n\n<pre><code>@redeemables = @business.redeemables.sort_by {|r| \"#{r.expiry_date.present?} #{r.desc}\" }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1171, "user_id": 533290, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6d191f8e5135ed79d855cd2b08503d12?s=128&d=identicon&r=PG", "display_name": "Hosang Jeon", "link": "https://stackoverflow.com/users/533290/hosang-jeon"}, "is_accepted": true, "score": 2, "last_activity_date": 1442451986, "creation_date": 1442451986, "answer_id": 32621087, "question_id": 32609483, "link": "https://stackoverflow.com/questions/32609483/how-to-make-order-apply-only-to-non-null-records-yet-get-all-records/32621087#32621087", "title": "How to make order apply only to non-null records yet get all records?", "body": "<p>The easiest way to get what you want is: </p>\n\n<pre><code>@redeemables = @business.redeemables.order(\"-expiry_date asc\")\n</code></pre>\n\n<ul>\n<li>This will give you exactly <strong>reverse result</strong> of (expiry_date: asc)</li>\n<li>It means <strong>descending ordered by expiry_date with null first</strong></li>\n</ul>\n"}], "owner": {"reputation": 744, "user_id": 1885107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f3cb4e9a996ab41c7980d6954dfb68d?s=128&d=identicon&r=PG", "display_name": "Prakash Laxkar", "link": "https://stackoverflow.com/users/1885107/prakash-laxkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 3, "accepted_answer_id": 32621087, "answer_count": 4, "score": 4, "last_activity_date": 1442451986, "creation_date": 1442408800, "last_edit_date": 1442413439, "question_id": 32609483, "link": "https://stackoverflow.com/questions/32609483/how-to-make-order-apply-only-to-non-null-records-yet-get-all-records", "title": "How to make order apply only to non-null records yet get all records?", "body": "<p>I want to order the result based on the condition. </p>\n\n<p><strong>For example</strong></p>\n\n<pre><code>@redeemables = @business.redeemables.order(expiry_date: :desc)\n</code></pre>\n\n<p>I want all redeemables with <code>expiry_date =&gt; nil</code> first than redeemables order by desc</p>\n\n<p>In other means, redeemables which have <code>exipry_date &lt; Date.current</code> should come in bottom in the order.</p>\n\n<p>How I can do this? Thanks</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "instagram", "instagram-api"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3720516"}, "edited": false, "score": 0, "creation_date": 1442426287, "post_id": 32609395, "comment_id": 53081806, "body": "Could you show us your implementation of the code? Generally speaking, Facebook likes to know what applications are using their login credentials which usually involves configurations on their developer site letting them know what your application is."}], "answers": [{"comments": [{"owner": {"reputation": 1335, "user_id": 2248638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e4a873186ddd8d431004b6f82dbb721?s=128&d=identicon&r=PG", "display_name": "skensell", "link": "https://stackoverflow.com/users/2248638/skensell"}, "edited": false, "score": 1, "creation_date": 1453223133, "post_id": 32745614, "comment_id": 57503291, "body": "Wow, I can&#39;t believe Instagram&#39;s API lacks such basic functionality."}, {"owner": {"reputation": 1863, "user_id": 1642418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/llpkw.jpg?s=128&g=1", "display_name": "FDIM", "link": "https://stackoverflow.com/users/1642418/fdim"}, "edited": false, "score": 1, "creation_date": 1485897223, "post_id": 32745614, "comment_id": 71114007, "body": "I know this is an old post, but I&#39;ve just ran into an issue with their oauth. If you happen to open a link from their latest instagram app, on ios you won&#39;t even be able to login this way... login page doesn&#39;t even load."}, {"owner": {"reputation": 2760, "user_id": 3296778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w9XVG.png?s=128&g=1", "display_name": "ChrisHaze", "link": "https://stackoverflow.com/users/3296778/chrishaze"}, "reply_to_user": {"reputation": 1863, "user_id": 1642418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/llpkw.jpg?s=128&g=1", "display_name": "FDIM", "link": "https://stackoverflow.com/users/1642418/fdim"}, "edited": false, "score": 0, "creation_date": 1486196191, "post_id": 32745614, "comment_id": 71249844, "body": "@FDIM I&#39;m not sure I understand what you&#39;re experiencing.. Are you attempting to open an Instagram profile link and it&#39;s failing? Also, which platform are you experiencing the loading issues?"}, {"owner": {"reputation": 560, "user_id": 4126177, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a14d903906adae47cb6cb6cb39ad2177?s=128&d=identicon&r=PG", "display_name": "Brendan Rius", "link": "https://stackoverflow.com/users/4126177/brendan-rius"}, "edited": false, "score": 1, "creation_date": 1491422216, "post_id": 32745614, "comment_id": 73551110, "body": "Hi Chris, thanks for answering. This is a huuuge problem for me, and for many other developers as well I think. Where did you get this info from? Instagram won&#39;t reply to my emails and I can&#39;t find any other sources"}], "tags": [], "owner": {"reputation": 2760, "user_id": 3296778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w9XVG.png?s=128&g=1", "display_name": "ChrisHaze", "link": "https://stackoverflow.com/users/3296778/chrishaze"}, "is_accepted": true, "score": 6, "last_activity_date": 1443028510, "creation_date": 1443028510, "answer_id": 32745614, "question_id": 32609395, "link": "https://stackoverflow.com/questions/32609395/instagram-oauth-login-with-facebook-account/32745614#32745614", "title": "Instagram oAuth login with Facebook account", "body": "<p>Instagram's API <strong>requires</strong> OAuth 2.0 and it does not support logging in to Instagram with Facebook. OAuth launches the Instagram login via a prebuilt, un-editable web browser, so this functionality is <strong>not</strong> possible at this point in time.</p>\n"}], "owner": {"reputation": 599, "user_id": 5211659, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/cabfffc9b7f5b97d0fc03c7d47d1bba7?s=128&d=identicon&r=PG", "display_name": "Daniel Becker", "link": "https://stackoverflow.com/users/5211659/daniel-becker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1386, "favorite_count": 0, "accepted_answer_id": 32745614, "answer_count": 1, "score": 5, "last_activity_date": 1443028510, "creation_date": 1442408558, "question_id": 32609395, "link": "https://stackoverflow.com/questions/32609395/instagram-oauth-login-with-facebook-account", "title": "Instagram oAuth login with Facebook account", "body": "<p>I'm trying to build a connection to the Instagram API using the instagram-oauth gem. However, when I open the oauth url, I'm not able to log into my Instagram account via Facebook. Only username/password is shown. Do I have to activate Facebook login support?</p>\n"}, {"tags": ["ruby", "immutability"], "comments": [{"owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1442410129, "post_id": 32609204, "comment_id": 53070861, "body": "@sawa he has also mentioned that he might have missed something.. so chill :)"}, {"owner": {"reputation": 624, "user_id": 416248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e3302a5a9e791d08f9aa2409349dd86?s=128&d=identicon&r=PG", "display_name": "Steve B", "link": "https://stackoverflow.com/users/416248/steve-b"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1442410257, "post_id": 32609204, "comment_id": 53070977, "body": "@sawa I&#39;d tried to make the tone of my question reflect this. The very reason I asked this question was I&#39;d wondered what I&#39;d misunderstood as ruby is general consistent. Thanks to pyRabbit &#39;s comment I found out something about what bang(!) means."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1442410355, "post_id": 32609204, "comment_id": 53071050, "body": "BTW, there are several destructive method without a bang: <code>clear</code>, <code>concat</code>, <code>insert</code>, <code>prepend</code>, ... The documentation even mentions this: <i>&quot;Typically, methods with names ending in &quot;!&quot; modify their receiver, while those without a &quot;!&quot; return a new String. However, there are exceptions&quot;</i>"}], "answers": [{"comments": [{"owner": {"reputation": 735, "user_id": 2188368, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a0a43b221a642dda68bc5cb3296fdebf?s=128&d=identicon&r=PG", "display_name": "pyRabbit", "link": "https://stackoverflow.com/users/2188368/pyrabbit"}, "edited": false, "score": 2, "creation_date": 1442409075, "post_id": 32609451, "comment_id": 53070049, "body": "For clarity, I think it is important to note that this method cannot be any more destructive then it already is. That is why there is no &quot;bang&quot; counterpart. See Matz&#39; post <a href=\"https://www.ruby-forum.com/topic/176830#773946\" rel=\"nofollow noreferrer\">ruby-forum.com/topic/176830#773946</a>"}, {"owner": {"reputation": 624, "user_id": 416248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e3302a5a9e791d08f9aa2409349dd86?s=128&d=identicon&r=PG", "display_name": "Steve B", "link": "https://stackoverflow.com/users/416248/steve-b"}, "edited": false, "score": 3, "creation_date": 1442409095, "post_id": 32609451, "comment_id": 53070068, "body": "@sawa I understand why there is only a single <code>replace</code> method (which your answer sums up very nicely). But I find it surprising that all other methods which alter the string in place end with a bang. Where as this one doesn&#39;t. Basically I expected <code>replace!</code> and no <code>replace</code> and I wondered why this wasn&#39;t the case."}, {"owner": {"reputation": 624, "user_id": 416248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e3302a5a9e791d08f9aa2409349dd86?s=128&d=identicon&r=PG", "display_name": "Steve B", "link": "https://stackoverflow.com/users/416248/steve-b"}, "reply_to_user": {"reputation": 735, "user_id": 2188368, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a0a43b221a642dda68bc5cb3296fdebf?s=128&d=identicon&r=PG", "display_name": "pyRabbit", "link": "https://stackoverflow.com/users/2188368/pyrabbit"}, "edited": false, "score": 1, "creation_date": 1442409203, "post_id": 32609451, "comment_id": 53070132, "body": "Having just read @pyRabbit  &#39;s answer it makes more sense to me. I hadn&#39;t realised the bang was to indicated a &quot;more dangerous than its non bang counterpart&quot; version."}, {"owner": {"reputation": 735, "user_id": 2188368, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a0a43b221a642dda68bc5cb3296fdebf?s=128&d=identicon&r=PG", "display_name": "pyRabbit", "link": "https://stackoverflow.com/users/2188368/pyrabbit"}, "reply_to_user": {"reputation": 624, "user_id": 416248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e3302a5a9e791d08f9aa2409349dd86?s=128&d=identicon&r=PG", "display_name": "Steve B", "link": "https://stackoverflow.com/users/416248/steve-b"}, "edited": false, "score": 2, "creation_date": 1442409462, "post_id": 32609451, "comment_id": 53070329, "body": "@SteveB that is right. The tl;dr of Matz&#39; post is that the &quot;bang&quot; isn&#39;t necessarily indicative of a method being destructive or not. He makes a good point that if that were the case, Ruby code would be inundated with bangs."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 624, "user_id": 416248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e3302a5a9e791d08f9aa2409349dd86?s=128&d=identicon&r=PG", "display_name": "Steve B", "link": "https://stackoverflow.com/users/416248/steve-b"}, "edited": false, "score": 2, "creation_date": 1442416794, "post_id": 32609451, "comment_id": 53075950, "body": "@SteveB: &quot;all other methods which alter the string in place end with a bang&quot; \u2013 Not true: <code>clear</code>, <code>concat</code>, <code>force_encoding</code>, <code>insert</code>, <code>prepend</code>, <code>setbyte</code>, <code>&lt;&lt;</code>, and <code>[]=</code> also have no bang and modify the receiver. Several of those also exist for <code>Array</code> and <code>Hash</code> with the same semantics. <code>Array</code> also has <code>pop</code>, <code>push</code>, <code>shift</code>, and <code>unshift</code>. Then there&#39;s <code>Kernel#exit</code> and <code>Kernel#exit!</code> which have nothing to do with mutating the receiver."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1442425045, "post_id": 32609451, "comment_id": 53081042, "body": "@J&#246;rgWMittag You are awesome! I am just amazed with the clarity and depth that I see in your answers!"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1442408723, "creation_date": 1442408723, "answer_id": 32609451, "question_id": 32609204, "link": "https://stackoverflow.com/questions/32609204/why-is-it-replace-not-replace-for-strings-in-ruby/32609451#32609451", "title": "Why is it replace not replace! for strings in ruby?", "body": "<p>No. Whenever you want a new string that is in no way related to another existing string, there is no point in creating the new string out of the existing string. For example, suppose there were a <code>String</code> method <code>create_new_string</code> that creates a new string instance out of an existing string by replacing the content with the given argument as follows:</p>\n\n<pre><code>\"foo\".create_new_string(\"bar\")\n# =&gt; \"bar\" \n</code></pre>\n\n<p>It is easy to see that that does not make sense. You can, and should, rather create a new string using a string literal:</p>\n\n<pre><code>\"bar\"\n# =&gt; \"bar\"\n</code></pre>\n\n<p>Therefore, there is no point in having a <code>String</code> method that in-destructively creates a new string by replacing its content; a meaningful method that would replace the content of string should destructively replace the content of the receiver string and return that string without surprise. Hence, no need for a bang.</p>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1442409535, "post_id": 32609725, "comment_id": 53070386, "body": "You understand that it was a misunderstanding of yours because you are the OP. You didn&#39;t even write in the question that you thought that the bang meant destructive."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1442409608, "post_id": 32609725, "comment_id": 53070439, "body": "That would make your question clearer, but notice that that would also change the question."}, {"owner": {"reputation": 624, "user_id": 416248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e3302a5a9e791d08f9aa2409349dd86?s=128&d=identicon&r=PG", "display_name": "Steve B", "link": "https://stackoverflow.com/users/416248/steve-b"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1442409724, "post_id": 32609725, "comment_id": 53070541, "body": "I&#39;m not sure about that. The question (as intended) came about from some confusion at work. I understood the ! to mean destructive methods on a string. Which is why it felt that <code>replace</code> was incorrect."}], "tags": [], "owner": {"reputation": 624, "user_id": 416248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e3302a5a9e791d08f9aa2409349dd86?s=128&d=identicon&r=PG", "display_name": "Steve B", "link": "https://stackoverflow.com/users/416248/steve-b"}, "is_accepted": true, "score": 4, "last_activity_date": 1442411434, "last_edit_date": 1442411434, "creation_date": 1442409407, "answer_id": 32609725, "question_id": 32609204, "link": "https://stackoverflow.com/questions/32609204/why-is-it-replace-not-replace-for-strings-in-ruby/32609725#32609725", "title": "Why is it replace not replace! for strings in ruby?", "body": "<p>From matz's post here <a href=\"https://www.ruby-forum.com/topic/176830#773946\" rel=\"nofollow\">https://www.ruby-forum.com/topic/176830#773946</a></p>\n\n<blockquote>\n  <p>The bang (!) does not mean \"destructive\" nor lack of it mean non\n  destructive either.  The bang sign means \"the bang version is more\n  dangerous than its non bang counterpart; handle with care\".  Since\n  Ruby has a lot of \"destructive\" methods, if bang signs follow your\n  opinion, every Ruby program would be full of bangs, thus ugly.</p>\n</blockquote>\n\n<p>So the initial question comes from a misunderstanding of what the bang (<code>!</code>) means. There's not a bang because it only makes sense to have a single <code>replace</code> method so there's no need to mark it as \"more dangerous\".</p>\n"}], "owner": {"reputation": 624, "user_id": 416248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e3302a5a9e791d08f9aa2409349dd86?s=128&d=identicon&r=PG", "display_name": "Steve B", "link": "https://stackoverflow.com/users/416248/steve-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 2, "accepted_answer_id": 32609725, "answer_count": 2, "score": 4, "last_activity_date": 1442411434, "creation_date": 1442408086, "last_edit_date": 1442408486, "question_id": 32609204, "link": "https://stackoverflow.com/questions/32609204/why-is-it-replace-not-replace-for-strings-in-ruby", "title": "Why is it replace not replace! for strings in ruby?", "body": "<p><code>replace</code> alters the current string rather than returning a new instance. To be consistent with other methods in Ruby it seems like should be called <code>replace!</code> Is this a bug/inconsistency or is there something I've missed?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1442415086, "post_id": 32608828, "comment_id": 53074738, "body": "if you run <code>bundle exec bin&#47;rspec</code> does it work correctly?"}, {"owner": {"reputation": 386, "user_id": 2695295, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/x8Lhx.png?s=128&g=1", "display_name": "Dawid", "link": "https://stackoverflow.com/users/2695295/dawid"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1442435609, "post_id": 32608828, "comment_id": 53086996, "body": "@Anthony nope, same results as <code>bin&#47;rspec</code>"}], "owner": {"reputation": 386, "user_id": 2695295, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/x8Lhx.png?s=128&g=1", "display_name": "Dawid", "link": "https://stackoverflow.com/users/2695295/dawid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1442407028, "creation_date": 1442407028, "question_id": 32608828, "link": "https://stackoverflow.com/questions/32608828/rspec-vs-bin-rspec-ignoring-backtrace-cleaner", "title": "rspec vs bin/rspec: ignoring backtrace_cleaner", "body": "<p>I'm using RVM and I have <code>ruby-2.2.2</code> installed with the following gems:</p>\n\n<pre><code>*** LOCAL GEMS ***\n\nrails (4.2.4)\nrspec (3.3.0)\nrspec-core (3.3.2)\nrspec-expectations (3.3.1)\nrspec-mocks (3.3.2)\nrspec-rails (3.3.3)\nrspec-support (3.3.0)\nsass-rails (5.0.4)\nspring-commands-rspec (1.0.4)\n</code></pre>\n\n<p>And now can anyone explain me why <code>bin/rspec</code> command ignores silencers defined in <code>config/initializers/backtrace_silencers.rb</code> while <code>rspec</code> (which comes from <code>/home/dawid/.rvm/gems/ruby-2.2.2/bin/rspec</code>) respects them?</p>\n\n<pre><code># config/initializers/backtrace_silencers.rb\n\n# Be sure to restart your server when you modify this file.\n# You can add backtrace silencers for libraries that you're using but don't wish to see in your backtraces.\nRails.backtrace_cleaner.add_silencer { |line| line =~ /rvm/ }\nRails.backtrace_cleaner.add_silencer { |line| line =~ /gems/ }\n\n# You can also remove all the silencers if you're trying to debug a problem that might stem from framework code.\n# Rails.backtrace_cleaner.remove_silencers!\n</code></pre>\n\n<p>and here's output from <code>rspec</code> command (this is what I want)</p>\n\n<pre><code>Post\n  is valid with title, body, published_at, status, author\n  is valid without published_at\n  is invalid without title\n  is invalid with duplicated title (FAILED - 1)\n  is invalid without body\n  is invalid without status\n  is invalid without author\n\nFailures:\n\n  1) Post is invalid with duplicated title\n     Failure/Error: expect(post.errors[:title]).not_to include(\"has already been taken\")\n       expected [\"has already been taken\"] not to include \"has already been taken\"\n     # ./spec/models/post_spec.rb:54:in `block (2 levels) in &lt;top (required)&gt;'\n\nFinished in 0.46048 seconds (files took 2.55 seconds to load)\n7 examples, 1 failure\n\nFailed examples:\n\nrspec ./spec/models/post_spec.rb:37 # Post is invalid with duplicated title\n</code></pre>\n\n<p>and here's output frm <code>bin/rspec</code> (why there are paths with <code>rvm</code>?):</p>\n\n<pre><code>[...]\nFailures:\n\n  1) Post is invalid with duplicated title\n     Failure/Error: expect(post.errors[:title]).not_to include(\"has already been taken\")\n       expected [\"has already been taken\"] not to include \"has already been taken\"\n     # ./spec/models/post_spec.rb:54:in `block (2 levels) in &lt;top (required)&gt;'\n     # /home/dawid/.rvm/gems/ruby-2.2.2/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:268:in `load'\n     # /home/dawid/.rvm/gems/ruby-2.2.2/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:268:in `block in load'\n     # /home/dawid/.rvm/gems/ruby-2.2.2/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:240:in `load_dependency'\n     # /home/dawid/.rvm/gems/ruby-2.2.2/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:268:in `load'\n     # /home/dawid/.rvm/gems/ruby-2.2.2/gems/spring-commands-rspec-1.0.4/lib/spring/commands/rspec.rb:18:in `call'\n     # -e:1:in `&lt;main&gt;'\n\nFinished in 0.44223 seconds (files took 0.32406 seconds to load)\n[...]\n</code></pre>\n\n<p>And yes, I have tried <code>/.rvm/</code> and <code>/\\.rvm/</code> but that didn't change a thing. I'll use <code>rspec</code> instead of <code>bin/rspec</code> but i'm curious why that happens. </p>\n"}, {"tags": ["html", "ruby", "parsing", "nokogiri"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1442415547, "post_id": 32608549, "comment_id": 53075038, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/7697662/how-do-i-get-innerhtml-using-nokogiri-gem\">How do I get innerHtml using Nokogiri gem</a>"}, {"owner": {"reputation": 1212, "user_id": 3688538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9u2w3.png?s=128&g=1", "display_name": "stepozer", "link": "https://stackoverflow.com/users/3688538/stepozer"}, "reply_to_user": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1442428912, "post_id": 32608549, "comment_id": 53083293, "body": "@lcguida - no, because I want remove specified tags, and you suggest get inner_html. It is different things. Please read description carefully"}, {"owner": {"reputation": 1291, "user_id": 2813071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4314026cf587ea9b3947ed1b0437857d?s=128&d=identicon&r=PG", "display_name": "hahcho", "link": "https://stackoverflow.com/users/2813071/hahcho"}, "edited": false, "score": 0, "creation_date": 1442646237, "post_id": 32608549, "comment_id": 53176569, "body": "Possible duplicate <a href=\"http://stackoverflow.com/questions/19861338/remove-a-tag-but-keep-the-text\" title=\"remove a tag but keep the text\">stackoverflow.com/questions/19861338/&hellip;</a>"}, {"owner": {"reputation": 1212, "user_id": 3688538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9u2w3.png?s=128&g=1", "display_name": "stepozer", "link": "https://stackoverflow.com/users/3688538/stepozer"}, "reply_to_user": {"reputation": 1291, "user_id": 2813071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4314026cf587ea9b3947ed1b0437857d?s=128&d=identicon&r=PG", "display_name": "hahcho", "link": "https://stackoverflow.com/users/2813071/hahcho"}, "edited": false, "score": 0, "creation_date": 1442654062, "post_id": 32608549, "comment_id": 53178534, "body": "@hakcho please read answer Alexey Shein, it is not duplicate. Please read description carefully"}], "answers": [{"comments": [{"owner": {"reputation": 1212, "user_id": 3688538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9u2w3.png?s=128&g=1", "display_name": "stepozer", "link": "https://stackoverflow.com/users/3688538/stepozer"}, "edited": false, "score": 0, "creation_date": 1442609235, "post_id": 32654977, "comment_id": 53167965, "body": "Thank you for answer. I will try your code, if it help me - I will mark your question as correct. Use only Nokogiri will be better (because I am using it to prepare html), but this way is also possible"}, {"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "reply_to_user": {"reputation": 1212, "user_id": 3688538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9u2w3.png?s=128&g=1", "display_name": "stepozer", "link": "https://stackoverflow.com/users/3688538/stepozer"}, "edited": false, "score": 0, "creation_date": 1442695965, "post_id": 32654977, "comment_id": 53191830, "body": "Do you prefer a non-Rails solution? This is actually a lightweight wrapper around <a href=\"https://github.com/flavorjones/loofah\" rel=\"nofollow noreferrer\">github.com/flavorjones/loofah</a> gem (which uses nokogiri in its turn). If you need it, I can post some code using this gem only, let me know."}], "tags": [], "owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "is_accepted": true, "score": 3, "last_activity_date": 1443442820, "last_edit_date": 1443442820, "creation_date": 1442587916, "answer_id": 32654977, "question_id": 32608549, "link": "https://stackoverflow.com/questions/32608549/how-to-remove-specific-tags-but-leave-allowed-tags/32654977#32654977", "title": "How to remove specific tags but leave allowed tags", "body": "<p>Use <a href=\"https://github.com/rails/rails-html-sanitizer\" rel=\"nofollow\"><code>Rails::Html::WhiteListSanitizer</code></a>:</p>\n\n<pre><code>white_list_sanitizer = Rails::Html::WhiteListSanitizer.new\noriginal = &lt;&lt;EOD\n&lt;div&gt;\n     some text\n     &lt;strong&gt;text&lt;/strong&gt;\n     &lt;p&gt;other text&lt;/p&gt;\n     &lt;img src=\"http://example.com\" /&gt;\n&lt;/div&gt;\nEOD\n\nputs white_list_sanitizer.sanitize(original, tags: %w(p img))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>some text\ntext\n&lt;p&gt;other text&lt;/p&gt;\n&lt;img src=\"http://example.com\"&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1212, "user_id": 3688538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9u2w3.png?s=128&g=1", "display_name": "stepozer", "link": "https://stackoverflow.com/users/3688538/stepozer"}, "edited": false, "score": 0, "creation_date": 1442844036, "post_id": 32695090, "comment_id": 53237465, "body": "Thank you for answer, but why I must use <code>Nokogiri::XML</code>? now I am using <code>Nokogiri::HTML</code>..."}, {"owner": {"reputation": 2591, "user_id": 2689541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efb8ec80d1ae2fd19fb7629da7e702db?s=128&d=identicon&r=PG&f=1", "display_name": "haradwaith", "link": "https://stackoverflow.com/users/2689541/haradwaith"}, "reply_to_user": {"reputation": 1212, "user_id": 3688538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9u2w3.png?s=128&g=1", "display_name": "stepozer", "link": "https://stackoverflow.com/users/3688538/stepozer"}, "edited": false, "score": 0, "creation_date": 1442846320, "post_id": 32695090, "comment_id": 53238989, "body": "You&#39;re right. I was writing a general solution for any XML. I replace <code>Nokogiri::XML</code> by <code>Nokogiri::HTML</code> in my answer to be specific to html."}], "tags": [], "owner": {"reputation": 2591, "user_id": 2689541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efb8ec80d1ae2fd19fb7629da7e702db?s=128&d=identicon&r=PG&f=1", "display_name": "haradwaith", "link": "https://stackoverflow.com/users/2689541/haradwaith"}, "is_accepted": false, "score": 0, "last_activity_date": 1442846110, "last_edit_date": 1442846110, "creation_date": 1442838018, "answer_id": 32695090, "question_id": 32608549, "link": "https://stackoverflow.com/questions/32608549/how-to-remove-specific-tags-but-leave-allowed-tags/32695090#32695090", "title": "How to remove specific tags but leave allowed tags", "body": "<p>In you want to use only Nokogiri, you could loop over the nodes to remove recursively all the unwanted tags:</p>\n\n<pre><code>def clean_node(node, whitelist)\n  node.children.each do |n|\n    clean_node(n, whitelist)\n    unless whitelist.include?(n.name)\n      n.before(n.children)\n      n.remove\n    end\n  end\n  node\nend\n\ndef strip_tags(html, whitelist)\n  whitelist += %w(text)\n  node = Nokogiri::HTML(html).children.last\n  clean_node(node, whitelist).inner_html\nend\n</code></pre>\n\n<p>The <code>strip_tags</code> function will remove all the tags who are not in the whitelist. For your example, you would do:</p>\n\n<pre><code>original = &lt;&lt;HTML\n&lt;div&gt;\n     some text\n     &lt;strong&gt;text&lt;/strong&gt;\n     &lt;p&gt;other text&lt;/p&gt;\n     &lt;img src=\"http://example.com\" /&gt;\n&lt;/div&gt;\nHTML\n\nputs strip_tags(original, %w(p img))\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code> some text\n text\n &lt;p&gt;other text&lt;/p&gt;\n &lt;img src=\"http://example.com\"&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 6, "last_activity_date": 1442881136, "creation_date": 1442881136, "answer_id": 32706463, "question_id": 32608549, "link": "https://stackoverflow.com/questions/32608549/how-to-remove-specific-tags-but-leave-allowed-tags/32706463#32706463", "title": "How to remove specific tags but leave allowed tags", "body": "<p>I'd do something like:</p>\n\n<pre><code>require 'nokogiri'\n\ndoc = Nokogiri::HTML(&lt;&lt;EOT)\n&lt;div&gt;\n    some text\n    &lt;strong&gt;text&lt;/strong&gt;\n    &lt;p&gt;other text&lt;/p&gt;\n    &lt;img src=\"http://example.com\" /&gt;\n&lt;/div&gt;\nEOT\n\nBLACKLIST = %w[strong div]\n\ndoc.search(BLACKLIST.join(',')).each do |node|\n  node.replace(node.children)\nend\n\nputs doc.to_html\n# &gt;&gt; &lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\"&gt;\n# &gt;&gt; &lt;html&gt;&lt;body&gt;\n# &gt;&gt;     some text\n# &gt;&gt;     text\n# &gt;&gt;     &lt;p&gt;other text&lt;/p&gt;\n# &gt;&gt;     &lt;img src=\"http://example.com\"&gt;\n# &gt;&gt; \n# &gt;&gt; &lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<p>Basically it looks for the nodes in <code>BLACKLIST</code> and finds them anywhere in the document, replacing them with the <code>children</code> of the node, effectively promoting the child node(s) to their parent.</p>\n"}, {"tags": [], "owner": {"reputation": 1428, "user_id": 2681855, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2837e0949b877e993bba550b5b95f498?s=128&d=identicon&r=PG&f=1", "display_name": "ManiMuthuPandi", "link": "https://stackoverflow.com/users/2681855/manimuthupandi"}, "is_accepted": false, "score": -1, "last_activity_date": 1443093215, "creation_date": 1443093215, "answer_id": 32759911, "question_id": 32608549, "link": "https://stackoverflow.com/questions/32608549/how-to-remove-specific-tags-but-leave-allowed-tags/32759911#32759911", "title": "How to remove specific tags but leave allowed tags", "body": "<p>You could use the xmp tag to display HTML tags.</p>\n\n<pre><code>&lt;div&gt;\n    some text\n    &lt;strong&gt;text&lt;/strong&gt;\n    &lt;xmp&gt;&lt;p&gt;other text&lt;/p&gt;\n    &lt;img src=\"http://example.com\" /&gt;\n    &lt;/xmp&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The HTML Element \"xmp\" renders text between the start and end tags without interpreting the HTML.</p>\n"}, {"comments": [{"owner": {"reputation": 1212, "user_id": 3688538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9u2w3.png?s=128&g=1", "display_name": "stepozer", "link": "https://stackoverflow.com/users/3688538/stepozer"}, "edited": false, "score": 1, "creation_date": 1443180787, "post_id": 32781167, "comment_id": 53400765, "body": "Please read question carefully, this question about <code>Ruby</code> language backend!"}], "tags": [], "owner": {"reputation": 176, "user_id": 4366613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q3MbY.jpg?s=128&g=1", "display_name": "Anuj Tiwary", "link": "https://stackoverflow.com/users/4366613/anuj-tiwary"}, "is_accepted": false, "score": -2, "last_activity_date": 1443180530, "creation_date": 1443180530, "answer_id": 32781167, "question_id": 32608549, "link": "https://stackoverflow.com/questions/32608549/how-to-remove-specific-tags-but-leave-allowed-tags/32781167#32781167", "title": "How to remove specific tags but leave allowed tags", "body": "<p>If you prefer to use jquery this task will be so easy</p>\n"}], "owner": {"reputation": 1212, "user_id": 3688538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9u2w3.png?s=128&g=1", "display_name": "stepozer", "link": "https://stackoverflow.com/users/3688538/stepozer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1202, "favorite_count": 0, "accepted_answer_id": 32654977, "answer_count": 5, "score": 4, "last_activity_date": 1443442820, "creation_date": 1442406284, "last_edit_date": 1442881532, "question_id": 32608549, "link": "https://stackoverflow.com/questions/32608549/how-to-remove-specific-tags-but-leave-allowed-tags", "title": "How to remove specific tags but leave allowed tags", "body": "<p>In some HTML, I'd like to remove some specific tags but leave the tag's contents/HTML in place. For example, in the line below, I \nwant to remove the <code>&lt;strong&gt;</code> and <code>&lt;div&gt;</code> blacklisted tags but leave the contents of the tags in place, and leave the <code>&lt;p&gt;</code>, <code>&lt;img&gt;</code> and other tags from my whitelist tags alone: </p>\n\n<p>Original: </p>\n\n<pre><code>&lt;div&gt;\n    some text\n    &lt;strong&gt;text&lt;/strong&gt;\n    &lt;p&gt;other text&lt;/p&gt;\n    &lt;img src=\"http://example.com\" /&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>some text\ntext\n&lt;p&gt;other text&lt;/p&gt;\n&lt;img src=\"http://example.com\" /&gt;\n</code></pre>\n\n<p>I want strip specific tags and some tags must not be stripped. It must work like <a href=\"http://php.net/manual/en/function.strip-tags.php\" rel=\"nofollow\"><code>strip_tags</code></a> in PHP. So <code>inner_html</code> can't help me with it.</p>\n"}, {"tags": ["arrays", "ruby", "regex"], "comments": [{"owner": {"reputation": 1052, "user_id": 5153223, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2eb1e2066f49fd770286205385ad6d1?s=128&d=identicon&r=PG&f=1", "display_name": "Borsunho", "link": "https://stackoverflow.com/users/5153223/borsunho"}, "edited": false, "score": 2, "creation_date": 1442405455, "post_id": 32608150, "comment_id": 53067280, "body": "If this string you get has any regular structure, I&#39;d rather try to <code>#split</code> it i.e. on i<code>&#39;;&#39;</code> and take parts that interest me, trimming whitespaces when necessary."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1442409200, "post_id": 32608150, "comment_id": 53070129, "body": "What is the rule behind it? Are you asking people to figure that out for you? I hope not."}], "answers": [{"comments": [{"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1442406717, "post_id": 32608333, "comment_id": 53068259, "body": "But this will not work when for example First name will have more than one word. It will return only first one. How can I fix this?"}, {"owner": {"reputation": 1594, "user_id": 1812321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27aa7afb2a89ee319028048b41db126a?s=128&d=identicon&r=PG", "display_name": "Nickolay Kondratenko", "link": "https://stackoverflow.com/users/1812321/nickolay-kondratenko"}, "reply_to_user": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 1, "creation_date": 1442406997, "post_id": 32608333, "comment_id": 53068463, "body": "@MateuszUrba\u0144ski Added regexps to my answer"}, {"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1442408429, "post_id": 32608333, "comment_id": 53069577, "body": "Thanks, I&#39;ve updated my question becase my message will also have information about school. Could You look at this? because I can&#39;t make it work with Your code... Thanks in advance."}, {"owner": {"reputation": 1594, "user_id": 1812321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27aa7afb2a89ee319028048b41db126a?s=128&d=identicon&r=PG", "display_name": "Nickolay Kondratenko", "link": "https://stackoverflow.com/users/1812321/nickolay-kondratenko"}, "reply_to_user": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1442408858, "post_id": 32608333, "comment_id": 53069909, "body": "Add one more expression. Just replace &#39;First Name&#39; with &#39;School&#39;"}, {"owner": {"reputation": 1594, "user_id": 1812321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27aa7afb2a89ee319028048b41db126a?s=128&d=identicon&r=PG", "display_name": "Nickolay Kondratenko", "link": "https://stackoverflow.com/users/1812321/nickolay-kondratenko"}, "reply_to_user": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1442409646, "post_id": 32608333, "comment_id": 53070480, "body": "@MateuszUrba\u0144ski Also you can add as many new information as you need. You can even use iterator for this. By the way you can even split your string by /(Selected\\: |correct options\\: )/ and then by semicolon and space and just select the proper elements (even ones)"}, {"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1442409686, "post_id": 32608333, "comment_id": 53070511, "body": "Yeah I know. I did that: first_names = a.scan(/(?&lt;=First Name; ).*?(?=;)/) last_names = a.scan(/(?&lt;=Last Name; ).*?(?=;)/) schools = a.scan(/(?&lt;=School; ).*?(?=;)/) [first_names, last_names, schools]  but it returns: [[&quot;Andrew&quot;, &quot;Matt&quot;], [&quot;Drew&quot;, &quot;Darr&quot;], [&quot;selected school&quot;]]"}, {"owner": {"reputation": 1594, "user_id": 1812321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27aa7afb2a89ee319028048b41db126a?s=128&d=identicon&r=PG", "display_name": "Nickolay Kondratenko", "link": "https://stackoverflow.com/users/1812321/nickolay-kondratenko"}, "reply_to_user": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1442410133, "post_id": 32608333, "comment_id": 53070865, "body": "@MateuszUrba\u0144ski of course, because you have no selected school in your string"}, {"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1442410441, "post_id": 32608333, "comment_id": 53071113, "body": "Nope, I have: &quot;Failed verification. \\n Selected: First Name; Andrew; Last Name; Drew; School; selected school; correct options: First Name; Matt; Last Name; Darr; School; Correct school&quot;"}, {"owner": {"reputation": 1594, "user_id": 1812321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27aa7afb2a89ee319028048b41db126a?s=128&d=identicon&r=PG", "display_name": "Nickolay Kondratenko", "link": "https://stackoverflow.com/users/1812321/nickolay-kondratenko"}, "reply_to_user": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1442413329, "post_id": 32608333, "comment_id": 53073364, "body": "So you didn&#39;t update it in the question. Also there is no first school value. So your string have no correct structure"}, {"owner": {"reputation": 1594, "user_id": 1812321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27aa7afb2a89ee319028048b41db126a?s=128&d=identicon&r=PG", "display_name": "Nickolay Kondratenko", "link": "https://stackoverflow.com/users/1812321/nickolay-kondratenko"}, "reply_to_user": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1442413811, "post_id": 32608333, "comment_id": 53073712, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/89826/discussion-between-nickolay-kondratenko-and-mateusz-urbanski\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 1594, "user_id": 1812321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27aa7afb2a89ee319028048b41db126a?s=128&d=identicon&r=PG", "display_name": "Nickolay Kondratenko", "link": "https://stackoverflow.com/users/1812321/nickolay-kondratenko"}, "is_accepted": true, "score": 4, "last_activity_date": 1442407336, "last_edit_date": 1442407336, "creation_date": 1442405675, "answer_id": 32608333, "question_id": 32608150, "link": "https://stackoverflow.com/questions/32608150/create-array-from-string-in-ruby/32608333#32608333", "title": "Create array from string in ruby", "body": "<p>Try the following code:</p>\n\n<pre><code>a = \"Failed verification. \\n Selected: First Name; Andrew; Last Name; Drew; correct options: First Name; Matt; Last Name; Darr;\"\nfirst_names = a.scan(/(?&lt;=First Name; )\\w+/)\nlast_names = a.scan(/(?&lt;=Last Name; )\\w+/)\n[first_names, last_names]\n</code></pre>\n\n<p>The irb output:</p>\n\n<pre><code>a = \"Failed verification. \\n Selected: First Name; Andrew; Last Name; Drew; correct options: First Name; Matt; Last Name; Darr;\"\n# =&gt; \"Failed verification. \\n Selected: First Name; Andrew; Last Name; Drew; correct options: First Name; Matt; Last Name; Darr;\"\nfirst_names = a.scan(/(?&lt;=First Name; )\\w+/)\n# =&gt; [\"Andrew\", \"Matt\"]\nlast_names = a.scan(/(?&lt;=Last Name; )\\w+/)\n# =&gt; [\"Drew\", \"Darr\"]\n[first_names, last_names]\n# =&gt; [[\"Andrew\", \"Matt\"], [\"Drew\", \"Darr\"]]\n</code></pre>\n\n<p>For case when you have complex name use the following regexps:</p>\n\n<pre><code>last_names = a.scan(/(?&lt;=Last Name; ).*?(?=;)/)\nfirst_names = a.scan(/(?&lt;=First Name; ).*?(?=;)/)\n</code></pre>\n\n<p>Also the irb output is the following:</p>\n\n<pre><code>a = \"Failed verification. \\n Selected: First Name; Andrew; Last Name; Drew; correct options: First Name; Matt Matt; Last Name; Darr Dar;\"\n# =&gt; \"Failed verification. \\n Selected: First Name; Andrew; Last Name; Drew; correct options: First Name; Matt Matt; Last Name; Darr Dar;\"\nlast_names = a.scan(/(?&lt;=Last Name; ).*?(?=;)/)\n# =&gt; [\"Drew\", \"Darr Dar\"]\nfirst_names = a.scan(/(?&lt;=First Name; ).*?(?=;)/)\n# =&gt; [\"Andrew\", \"Matt Matt\"]\n[first_names, last_names]\n# =&gt; [[\"Andrew\", \"Matt Matt\"], [\"Drew\", \"Darr Dar\"]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1594, "user_id": 1812321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27aa7afb2a89ee319028048b41db126a?s=128&d=identicon&r=PG", "display_name": "Nickolay Kondratenko", "link": "https://stackoverflow.com/users/1812321/nickolay-kondratenko"}, "edited": false, "score": 0, "creation_date": 1442415697, "post_id": 32609010, "comment_id": 53075162, "body": "btw [^;]* expression you use is better for cases we have no semicolon at the end"}], "tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": false, "score": 4, "last_activity_date": 1442407530, "creation_date": 1442407530, "answer_id": 32609010, "question_id": 32608150, "link": "https://stackoverflow.com/questions/32608150/create-array-from-string-in-ruby/32609010#32609010", "title": "Create array from string in ruby", "body": "<p>An other way, assuming the first name and the last name are consecutive:</p>\n\n<pre><code>res=[[],[]]\na.scan(/First Name; ([^;]*); Last Name; ([^;]*);/) do |fn, ln|\n    res[0] &lt;&lt; fn\n    res[1] &lt;&lt; ln\nend\n</code></pre>\n"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 32608333, "answer_count": 2, "score": -1, "last_activity_date": 1442408359, "creation_date": 1442405203, "last_edit_date": 1442408359, "question_id": 32608150, "link": "https://stackoverflow.com/questions/32608150/create-array-from-string-in-ruby", "title": "Create array from string in ruby", "body": "<p>I have the following string:</p>\n\n<pre><code>\"Failed verification. \\n Selected: First Name; Andrew; Last Name; Drew; correct options: First Name; Matt; Last Name; Darr;\n</code></pre>\n\n<p>I want to create array with data from this string that will look like this:</p>\n\n<pre><code>[ [\"Andrew\", \"Matt\"], [\"Drew\", \"Darr\"] ]\n</code></pre>\n\n<p>first key in array is selected option and the second one is correct option. Is there any way to do it with regex?</p>\n\n<p>EDIT:\nI was thinking about this a little bit and my string will look like this:</p>\n\n<pre><code>\"Failed verification. \\n Selected: First Name; Andrew; Last Name; Drew; School; selected school; correct options: First Name; Matt; Last Name; Darr; School; Correct school\"\n</code></pre>\n\n<p>And the result I want to have is:</p>\n\n<pre><code>[ [\"Andrew\", \"Matt\"], [\"Drew\", \"Darr\"], [\"selected school\", \"Correct school\"] ]\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 1, "creation_date": 1442407378, "post_id": 32607671, "comment_id": 53068744, "body": "Your example class shows an instance method, whilst the <code>expect</code> line and most of your question is about a class method."}, {"owner": {"reputation": 501, "user_id": 5065939, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2ea2ad20076d69570c0d1ca3253761d6?s=128&d=identicon&r=PG&f=1", "display_name": "JayTarka", "link": "https://stackoverflow.com/users/5065939/jaytarka"}, "reply_to_user": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 1, "creation_date": 1442409851, "post_id": 32607671, "comment_id": 53070644, "body": "Neil Slater Thankyou, I&#39;ve corrected (I think)"}], "answers": [{"comments": [{"owner": {"reputation": 501, "user_id": 5065939, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2ea2ad20076d69570c0d1ca3253761d6?s=128&d=identicon&r=PG&f=1", "display_name": "JayTarka", "link": "https://stackoverflow.com/users/5065939/jaytarka"}, "edited": false, "score": 0, "creation_date": 1442410276, "post_id": 32608963, "comment_id": 53070993, "body": "Thanks very much! I trust you can use <code>&lt;#Object&gt;.method</code> in-place of <code>&lt;#Object&gt;.instance_method</code> to repeat these steps if <code>the_answer</code> is a class method? I missed out the <code>self</code> in my example, apologies :P"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 501, "user_id": 5065939, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2ea2ad20076d69570c0d1ca3253761d6?s=128&d=identicon&r=PG&f=1", "display_name": "JayTarka", "link": "https://stackoverflow.com/users/5065939/jaytarka"}, "edited": false, "score": 2, "creation_date": 1442410628, "post_id": 32608963, "comment_id": 53071268, "body": "@JayTarka my example should work for class methods if you replace <code>MyObject</code> with <code>MyObject.singleton_class</code>, e.g. <code>MyObject.singleton_class.instance_method(:the_answer)</code>."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 4, "last_activity_date": 1442409328, "last_edit_date": 1442409328, "creation_date": 1442407422, "answer_id": 32608963, "question_id": 32607671, "link": "https://stackoverflow.com/questions/32607671/restore-a-class-module-to-a-virginal-state/32608963#32608963", "title": "Restore a class/module to a virginal state", "body": "<p>RSpec does not duplicate / replace the instance or its class. It dynamically removes the instance method and defines a new one. Here's how it works: (you can do the same for class methods)</p>\n\n<p>Given your class <code>MyObject</code> and an instance <code>o</code>:</p>\n\n<pre><code>class MyObject\n  def the_answer\n    21 * 2\n  end\nend\n\no = MyObject.new\no.the_answer #=&gt; 42\n</code></pre>\n\n<p>RSpec first saves the original method using <a href=\"http://ruby-doc.org/core-2.2.3/Module.html#method-i-instance_method\" rel=\"nofollow\"><code>Module#instance_method</code></a>. It returns an <a href=\"http://ruby-doc.org/core-2.2.3/UnboundMethod.html\" rel=\"nofollow\"><code>UnboundMethod</code></a>:</p>\n\n<pre><code>original_method = MyObject.instance_method(:the_answer)\n#=&gt; #&lt;UnboundMethod: MyObject#the_answer&gt;\n</code></pre>\n\n<p>it then removes the method using <a href=\"http://ruby-doc.org/core-2.2.3/Module.html#method-i-remove_method\" rel=\"nofollow\"><code>Module#remove_method</code></a>: (we have to use <code>send</code> here because <code>remove_method</code> is private).</p>\n\n<pre><code>MyObject.send(:remove_method, :the_answer)\n</code></pre>\n\n<p>and defines a new one using <a href=\"http://ruby-doc.org/core-2.2.3/Module.html#method-i-define_method\" rel=\"nofollow\"><code>Module#define_method</code></a>:</p>\n\n<pre><code>MyObject.send(:define_method, :the_answer) { 'foo' }\n</code></pre>\n\n<p>If you call <code>the_answer</code> now, you are instantly invoking the new method:</p>\n\n<pre><code>o.the_answer #=&gt; \"foo\"\n</code></pre>\n\n<p>After the example, RSpec removes the new method</p>\n\n<pre><code>MyObject.send(:remove_method, :the_answer)\n</code></pre>\n\n<p>and restores the original one (<code>define_method</code> accepts either a block or a method):</p>\n\n<pre><code>MyObject.send(:define_method, :the_answer, original_method)\n</code></pre>\n\n<p>Calling the method works as expected:</p>\n\n<pre><code>o.the_answer #=&gt; 42\n</code></pre>\n\n<p>RSpec's actual code is much more complex, but you get the idea.</p>\n"}], "owner": {"reputation": 501, "user_id": 5065939, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2ea2ad20076d69570c0d1ca3253761d6?s=128&d=identicon&r=PG&f=1", "display_name": "JayTarka", "link": "https://stackoverflow.com/users/5065939/jaytarka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 32608963, "answer_count": 1, "score": 5, "last_activity_date": 1442409867, "creation_date": 1442403831, "last_edit_date": 1442409867, "question_id": 32607671, "link": "https://stackoverflow.com/questions/32607671/restore-a-class-module-to-a-virginal-state", "title": "Restore a class/module to a virginal state", "body": "<p>I am wondering how RSpec achieves this:</p>\n\n<pre><code>expect( MyObject ).to receive(:the_answer).and_return(42)\n</code></pre>\n\n<p>Does RSpec utilize <code>define_singleton_method</code> to inject <code>:the_answer</code> into <code>MyObject</code>?</p>\n\n<p>That could work. Lets pretend this is what <code>MyObject</code> looks like:</p>\n\n<pre><code>class MyObject\n    def self.the_answer\n        21 * 2\n    end\nend\n</code></pre>\n\n<p>The <em>injected</em> <code>the_answer</code> method could contain something like  this:</p>\n\n<pre><code>@the_answer_called = true\n42\n</code></pre>\n\n<p>However, how does RSpec then restore the class to its unmocked state? How does it restore it so <code>MyObject.the_answer</code> \"truly\" returns 42 again? (Via             <code>21 * 2</code>)</p>\n\n<p>Since writing this question I'm thinking it doesn't. The class methods remain mocked until RSpec stops running.</p>\n\n<p>However, (and this is the crux of the question) <strong>how could one undo a define_singleton_method?</strong></p>\n\n<p>I'm thinking the easiest way would be running <code>old_object = Object.dup</code> before <code>define_singleton_method</code> is utilized, but then, how do I restore <code>old_object</code> to <code>Object</code>?</p>\n\n<p>That also doesn't strike me as efficient, when all I want to do is restore one class method. While this isn't a concern at the moment, maybe in the future I also want to keep certain instance variables inside <code>MyObject</code> intact. Is there a <em>non-hacky</em> way to duplicate the code (<code>21  * 2</code>) and redefine that as <code>the_answer</code> via <code>define_singleton_method</code> rather than completely replacing <code>Object</code>?</p>\n\n<p>All ideas welcome, I definitely want to know how to make <code>Object</code> === <code>old_object</code> regardless.</p>\n"}, {"tags": ["ruby", "git", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 8, "last_activity_date": 1442402941, "creation_date": 1442402941, "answer_id": 32607341, "question_id": 32606678, "link": "https://stackoverflow.com/questions/32606678/doing-a-git-checkout-while-running-rspec/32607341#32607341", "title": "Doing a `git checkout` while running `rspec`", "body": "<p>If you checkout while the tests are already running, it will keep executing the specs associated to the previous branch as long as the process doesn't start other processes (e.g. using <code>rake test</code> may start different test suites in different processes if they are provided as different tasks).</p>\n\n<p>However, if your specs need to access resources outside the Ruby environment at runtime, such as writing/reading a file on the file system, and that resource is not available in the new branch or it's changed, then the specs may return invalid result.</p>\n\n<p>In other words, as long as the specs only relies on code that may be loaded by the Ruby virtual machine when the process is stared, then you'll be fine.</p>\n\n<p>Whether this is recommended or not, that's another story. I would personally avoid it to prevent unplanned side effects.</p>\n"}], "owner": {"reputation": 3506, "user_id": 112538, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a771471ac58aaabdeb883001d6b7c07?s=128&d=identicon&r=PG", "display_name": "asymmetric", "link": "https://stackoverflow.com/users/112538/asymmetric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 0, "accepted_answer_id": 32607341, "answer_count": 1, "score": 8, "last_activity_date": 1442402956, "creation_date": 1442401062, "last_edit_date": 1442402956, "question_id": 32606678, "link": "https://stackoverflow.com/questions/32606678/doing-a-git-checkout-while-running-rspec", "title": "Doing a `git checkout` while running `rspec`", "body": "<p>While executing a long-running test suite with RSpec, I would like to checkout another git branch.</p>\n\n<p>How does RSpec behave in this case? Does it read all files into memory as part of its boot-up process (in which case changing branch would have no effect), or does it read them only when they are needed?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "filtering"], "answers": [{"comments": [{"owner": {"reputation": 431, "user_id": 1676959, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/L1rcL.png?s=128&g=1", "display_name": "kernification", "link": "https://stackoverflow.com/users/1676959/kernification"}, "edited": false, "score": 0, "creation_date": 1442401630, "post_id": 32606231, "comment_id": 53064696, "body": "thanks! But somehow this has no filter effect at all. No matter how many propertiy id&#39;s are inside property_ids, the result always shows all items..."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 431, "user_id": 1676959, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/L1rcL.png?s=128&g=1", "display_name": "kernification", "link": "https://stackoverflow.com/users/1676959/kernification"}, "edited": false, "score": 0, "creation_date": 1442401909, "post_id": 32606231, "comment_id": 53064888, "body": "Even Items which do not have <code>properties.size</code>  number of <code>true</code> values?"}, {"owner": {"reputation": 431, "user_id": 1676959, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/L1rcL.png?s=128&g=1", "display_name": "kernification", "link": "https://stackoverflow.com/users/1676959/kernification"}, "edited": false, "score": 0, "creation_date": 1442404225, "post_id": 32606231, "comment_id": 53066418, "body": "Yes, even those. But to be honest, I have not fully understood the group and having part yet. In my app, every item has relations to all available properties and their value can be true or false. I have some items where all properties.values are false. But even those are not filtered out."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 431, "user_id": 1676959, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/L1rcL.png?s=128&g=1", "display_name": "kernification", "link": "https://stackoverflow.com/users/1676959/kernification"}, "edited": false, "score": 0, "creation_date": 1442409460, "post_id": 32606231, "comment_id": 53070328, "body": "Can you please run the above code in your Rails console and add <code>.to_sql</code> to the query. That will show you the SQL that is generated. Please post the generated SQL."}, {"owner": {"reputation": 431, "user_id": 1676959, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/L1rcL.png?s=128&g=1", "display_name": "kernification", "link": "https://stackoverflow.com/users/1676959/kernification"}, "edited": false, "score": 0, "creation_date": 1442411371, "post_id": 32606231, "comment_id": 53071853, "body": "In my case courses = items and labels = properties. Here is the .to_sql result:  <code>&quot;SELECT \\&quot;courses\\&quot;.* FROM \\&quot;courses\\&quot; INNER JOIN \\&quot;courseandlabels\\&quot; ON \\&quot;courseandlabels\\&quot;.\\&quot;course_id\\&quot; = \\&quot;courses\\&quot;.\\&quot;id\\&quot; INNER JOIN \\&quot;labels\\&quot; ON \\&quot;labels\\&quot;.\\&quot;id\\&quot; = \\&quot;courseandlabels\\&quot;.\\&quot;label_id\\&quot; WHERE \\&quot;labels\\&quot;.\\&quot;id\\&quot; IN (1, 2, 3) AND \\&quot;labels\\&quot;.\\&quot;active\\&quot; = &#39;t&#39; GROUP BY courses.id HAVING COUNT(labels.id) &gt;= 3&quot;</code>"}, {"owner": {"reputation": 431, "user_id": 1676959, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/L1rcL.png?s=128&g=1", "display_name": "kernification", "link": "https://stackoverflow.com/users/1676959/kernification"}, "edited": false, "score": 0, "creation_date": 1442413299, "post_id": 32606231, "comment_id": 53073346, "body": "Of course it was my mistake. Now I have understood why you are counting: To ensure all requested properties are true... Very cool, thanks!"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 431, "user_id": 1676959, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/L1rcL.png?s=128&g=1", "display_name": "kernification", "link": "https://stackoverflow.com/users/1676959/kernification"}, "edited": false, "score": 0, "creation_date": 1442413414, "post_id": 32606231, "comment_id": 53073420, "body": "Awesome, glad I was able to help."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1442400509, "last_edit_date": 1442400509, "creation_date": 1442399809, "answer_id": 32606231, "question_id": 32605756, "link": "https://stackoverflow.com/questions/32605756/filter-activerecord-by-nested-id-and-value-combination-in-ruby-on-rails/32606231#32606231", "title": "Filter activerecord by nested ID and value combination in Ruby on Rails", "body": "<p>Looks like you are almost there:</p>\n\n<pre><code>property_ids = [1,2,3]\nItem.joins(:properties).\n     where(:properties =&gt; { :id =&gt; property_ids, :value =&gt; true }).\n     group('items.id').\n     having('COUNT(properties.id) &gt;= ?', property_ids.size)\n</code></pre>\n\n<p><code>joins</code> does an <code>INNER JOIN</code> and is preferred over <code>includes</code> when you really need to join tables. </p>\n\n<p><code>where</code> is basically the conditions you already had, the only change is that there is not need to call <code>to_a</code> on the array. </p>\n\n<p>Than you have to <code>group</code> to make that <code>COUNT</code> in SQL work.</p>\n\n<p><code>having</code> extracts the lines that have at least the expected number of property lines matching the condition. </p>\n"}], "owner": {"reputation": 431, "user_id": 1676959, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/L1rcL.png?s=128&g=1", "display_name": "kernification", "link": "https://stackoverflow.com/users/1676959/kernification"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 703, "favorite_count": 1, "accepted_answer_id": 32606231, "answer_count": 1, "score": 0, "last_activity_date": 1442400509, "creation_date": 1442398496, "question_id": 32605756, "link": "https://stackoverflow.com/questions/32605756/filter-activerecord-by-nested-id-and-value-combination-in-ruby-on-rails", "title": "Filter activerecord by nested ID and value combination in Ruby on Rails", "body": "<p>Lets say I have two models with a many to many relationship: <strong>Item</strong> and <strong>Property</strong></p>\n\n<p>Now I have an array of properties and I want to filter all items which properties match a given value (lets say a boolean value: property.value = true)</p>\n\n<p>When I try </p>\n\n<pre><code>@items = Item.includes(:properties).where(:properties =&gt; {:id =&gt; [1,2,3].to_a, :value =&gt; true})\n</code></pre>\n\n<p>I would like to get all items where property(1) is true <strong>AND</strong> property(2) is true and so on. But with the code above I get all items related to the property id's and where <strong>any</strong> property is true. How should I change my code?</p>\n\n<p>I would appreciate not to use a gem for this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1052, "user_id": 5153223, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2eb1e2066f49fd770286205385ad6d1?s=128&d=identicon&r=PG&f=1", "display_name": "Borsunho", "link": "https://stackoverflow.com/users/5153223/borsunho"}, "edited": false, "score": 1, "creation_date": 1442404901, "post_id": 32605402, "comment_id": 53066894, "body": "It is happening because <code>and</code> has lower precenedce than assignment. Same applies to <code>or</code> in Ruby. Because of this, those 2 work more like control structures than operators, allowing you to do things like <code>do_something() or fail</code>, but is often confusing for new Ruby programmers."}], "answers": [{"comments": [{"owner": {"reputation": 8321, "user_id": 2925295, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/phStt.jpg?s=128&g=1", "display_name": "SujitS", "link": "https://stackoverflow.com/users/2925295/sujits"}, "edited": false, "score": 0, "creation_date": 1442397935, "post_id": 32605497, "comment_id": 53062377, "body": "So, that means <code>User.find_by(email: user_email)</code> will not take an effect if we use <code>and</code> operator ?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 8321, "user_id": 2925295, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/phStt.jpg?s=128&g=1", "display_name": "SujitS", "link": "https://stackoverflow.com/users/2925295/sujits"}, "edited": false, "score": 1, "creation_date": 1442398003, "post_id": 32605497, "comment_id": 53062415, "body": "@SujitS It will not have any effect unless this single line is further part of a surrounding structure."}, {"owner": {"reputation": 336, "user_id": 2355500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0271360793bb0af2b85b248d06ab0edf?s=128&d=identicon&r=PG", "display_name": "Lonny Eachus", "link": "https://stackoverflow.com/users/2355500/lonny-eachus"}, "edited": false, "score": 0, "creation_date": 1505240404, "post_id": 32605497, "comment_id": 79328879, "body": "It is because, as was mentioned in the very beginning, &quot;=&quot; has a higher precedence than &quot;and&quot;.  (user = user_email.present?)  and evaluation stops there because = has higher precedence."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 7, "last_activity_date": 1442397840, "creation_date": 1442397840, "answer_id": 32605497, "question_id": 32605402, "link": "https://stackoverflow.com/questions/32605402/and-vs-operator-in-rails/32605497#32605497", "title": "&quot;and&quot; vs &quot;&amp;&amp;&quot; operator in rails", "body": "<pre><code>user = user_email.present? and User.find_by(email: user_email)\n</code></pre>\n\n<p>is interpreted as:</p>\n\n<pre><code>(user = user_email.present?) and User.find_by(email: user_email)\n</code></pre>\n\n<p>and <code>present?</code> returns <code>true</code> or <code>false</code>, which is assigned to <code>user</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1442401689, "post_id": 32606783, "comment_id": 53064740, "body": "The OP already knows that <i>&quot;<code>user</code> variable holds a boolean value&quot;</i>, the question is &quot;why?&quot;."}, {"owner": {"reputation": 9, "user_id": 5341209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CeHuB.jpg?s=128&g=1", "display_name": "Alexandr", "link": "https://stackoverflow.com/users/5341209/alexandr"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1442402458, "post_id": 32606783, "comment_id": 53065249, "body": "Becouse  class TrueClass have no &quot;valid_password?&quot; method So to solve the problem I need more information about his task"}, {"owner": {"reputation": 8321, "user_id": 2925295, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/phStt.jpg?s=128&g=1", "display_name": "SujitS", "link": "https://stackoverflow.com/users/2925295/sujits"}, "edited": false, "score": 0, "creation_date": 1442463123, "post_id": 32606783, "comment_id": 53094988, "body": "The problem has already been solved. Thanks for your concern."}], "tags": [], "owner": {"reputation": 9, "user_id": 5341209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CeHuB.jpg?s=128&g=1", "display_name": "Alexandr", "link": "https://stackoverflow.com/users/5341209/alexandr"}, "is_accepted": false, "score": -2, "last_activity_date": 1442401335, "creation_date": 1442401335, "answer_id": 32606783, "question_id": 32605402, "link": "https://stackoverflow.com/questions/32605402/and-vs-operator-in-rails/32606783#32606783", "title": "&quot;and&quot; vs &quot;&amp;&amp;&quot; operator in rails", "body": "<p>Your user variable have TrueClass. TrueClass have no \"valid_password?\" method. Thats why it happens to your code.</p>\n\n<pre><code>&gt; a = true \n&gt; a.valid_passowrd?\n&gt; undefined method `valid_password?' for true:TrueClass\n</code></pre>\n\n<p>Why it must works?</p>\n"}], "owner": {"reputation": 8321, "user_id": 2925295, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/phStt.jpg?s=128&g=1", "display_name": "SujitS", "link": "https://stackoverflow.com/users/2925295/sujits"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1393, "favorite_count": 1, "closed_date": 1442402706, "accepted_answer_id": 32605497, "answer_count": 2, "score": 2, "last_activity_date": 1442463881, "creation_date": 1442397603, "last_edit_date": 1592644375, "question_id": 32605402, "link": "https://stackoverflow.com/questions/32605402/and-vs-operator-in-rails", "closed_reason": "Duplicate", "title": "&quot;and&quot; vs &quot;&amp;&amp;&quot; operator in rails", "body": "<p>According to <a href=\"https://stackoverflow.com/questions/1426826/difference-between-and-and-in-ruby\">this</a> stack question,</p>\n<blockquote>\n<p><code>and</code> is the same as <code>&amp;&amp;</code> but with lower precedence</p>\n</blockquote>\n<p>And I understand this well. And I believe this question is not duplicate to the above question.</p>\n<p>In my controller when executing the following code:</p>\n<p><code>user = user_email.present? &amp;&amp; User.find_by(email: user_email)</code></p>\n<p><code>user</code> variable holds the <code>active record object</code> for <code>User</code> model. And thus executing <code>user.valid_password? user_password</code> gave no error and test passed successfully.</p>\n<p>But when I tried to replace <code>&amp;&amp;</code> with <code>and</code> the result is quite surprising.</p>\n<p>When I tried with following code:</p>\n<p><code>user = user_email.present? and User.find_by(email: user_email)</code></p>\n<p><code>user</code> variable holds the <code>boolean</code> value and thus executing <code>user.valid_password? user_password</code>gave following error:</p>\n<blockquote>\n<p>undefined method `valid_password?' for true:TrueClass</p>\n</blockquote>\n<p>Can anyone please explain why this is happening.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "edited": false, "score": 1, "creation_date": 1442396949, "post_id": 32605097, "comment_id": 53061743, "body": "Bob Jones &amp; Rob Bones match? only two letters different but clearly not a typo. NLP is not possible with regex, but you can do a crude match to match if two letters are different, but you&#39;re going to get some pretty inaccurate results"}], "answers": [{"tags": [], "owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "is_accepted": false, "score": 0, "last_activity_date": 1442397025, "creation_date": 1442397025, "answer_id": 32605194, "question_id": 32605097, "link": "https://stackoverflow.com/questions/32605097/making-two-strings-match-even-if-one-of-them-contains-typo/32605194#32605194", "title": "Making two strings match even if one of them contains typo", "body": "<p>You might do best with a gem that does fuzzy searching, with such methods as trigrams, and then experimenting with what you consider to be a high enough score to count as a match.</p>\n\n<p>Various gems are available: look for trigram, fuzzy match, etc.</p>\n"}, {"tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": 0, "last_activity_date": 1442397154, "last_edit_date": 1495541033, "creation_date": 1442397154, "answer_id": 32605250, "question_id": 32605097, "link": "https://stackoverflow.com/questions/32605097/making-two-strings-match-even-if-one-of-them-contains-typo/32605250#32605250", "title": "Making two strings match even if one of them contains typo", "body": "<p>What you want is a fuzzy match algorithm. You can start using the <a href=\"https://stackoverflow.com/questions/9822078/ruby-compare-two-strings-similarity-percentage\">solution suggested in this answer</a> or one of the various fuzzy matching Ruby implementations.</p>\n\n<p>Once you have the algorithm in place (packaged as a method), simply call that method on each item of the array rather than using the standard string equality.</p>\n"}, {"tags": [], "owner": {"reputation": 5, "user_id": 4072488, "user_type": "registered", "profile_image": "https://graph.facebook.com/677691672/picture?type=large", "display_name": "Andrew Corbett", "link": "https://stackoverflow.com/users/4072488/andrew-corbett"}, "is_accepted": false, "score": 0, "last_activity_date": 1442418612, "creation_date": 1442418612, "answer_id": 32613299, "question_id": 32605097, "link": "https://stackoverflow.com/questions/32605097/making-two-strings-match-even-if-one-of-them-contains-typo/32613299#32613299", "title": "Making two strings match even if one of them contains typo", "body": "<p>You could utilize the gem similar text. It provides a % similar to compared to two strings. You'd have to build the logic for what % similarity you are looking for. </p>\n\n<p><a href=\"https://rubygems.org/gems/similar_text\" rel=\"nofollow\">https://rubygems.org/gems/similar_text</a></p>\n"}], "owner": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1442418612, "creation_date": 1442396787, "last_edit_date": 1442397579, "question_id": 32605097, "link": "https://stackoverflow.com/questions/32605097/making-two-strings-match-even-if-one-of-them-contains-typo", "title": "Making two strings match even if one of them contains typo", "body": "<p>I ve got an array_subscribed_players and I am checking if this array includes a string this way:</p>\n\n<pre><code>array_subscribed_players.include?(subscription.user.full_name_inversed.downcase.strip)\n</code></pre>\n\n<p>I am looking for a way to make this expression return <code>true</code> even if the string that I give does not match perfectly with the string contained in <code>array_subscribed_players</code>. Let's say if there are one or two different letters or if it has one extra or less letter.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "friendly-id"], "answers": [{"tags": [], "owner": {"reputation": 1775, "user_id": 4893580, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/621d06faeb8ed8be874951e0f6b624e8?s=128&d=identicon&r=PG&f=1", "display_name": "Kris MP", "link": "https://stackoverflow.com/users/4893580/kris-mp"}, "is_accepted": false, "score": 0, "last_activity_date": 1442397775, "creation_date": 1442397775, "answer_id": 32605462, "question_id": 32604593, "link": "https://stackoverflow.com/questions/32604593/rails-how-to-use-friendly-id-only-in-frontend-not-in-admin/32605462#32605462", "title": "rails how to use friendly_id only in frontend not in admin", "body": "<p>If you don't want to use friendly_id slug. Just use this in your code:</p>\n\n<pre><code>&lt;%= link_to(product.name, admin_product_path(product.id)) %&gt;\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>&lt;%= link_to(product.name, admin_product_path(product)) %&gt;\n</code></pre>\n\n<p>I hope it will be useful for anyone who had same question with me</p>\n"}, {"tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": 2, "last_activity_date": 1442397785, "creation_date": 1442397785, "answer_id": 32605469, "question_id": 32604593, "link": "https://stackoverflow.com/questions/32604593/rails-how-to-use-friendly-id-only-in-frontend-not-in-admin/32605469#32605469", "title": "rails how to use friendly_id only in frontend not in admin", "body": "<p>The only solution is to not override the <code>to_param</code> model method, but instead create a parallel method that outputs the slug when called.</p>\n\n<p>Then, explicitly call this method where you need it on the public side. Or you can do the opposite, and default <code>to_param</code> to the friendly id and explicitly pass the ID in the admin section when generating a route.</p>\n"}], "owner": {"reputation": 1775, "user_id": 4893580, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/621d06faeb8ed8be874951e0f6b624e8?s=128&d=identicon&r=PG&f=1", "display_name": "Kris MP", "link": "https://stackoverflow.com/users/4893580/kris-mp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 2, "answer_count": 2, "score": 2, "last_activity_date": 1442397785, "creation_date": 1442395505, "last_edit_date": 1495541653, "question_id": 32604593, "link": "https://stackoverflow.com/questions/32604593/rails-how-to-use-friendly-id-only-in-frontend-not-in-admin", "title": "rails how to use friendly_id only in frontend not in admin", "body": "<p>I only want to use friendly_id generated slug in frontend not in admin. How to accomplished this?</p>\n\n<p>in my admin controller:</p>\n\n<pre><code>def find_data\n    @product = Product.find(params[:id])\n  end\n</code></pre>\n\n<p>in my frontend controller:</p>\n\n<pre><code>def set_data\n    @product = current_user.products.friendly.find(params[:id])\n  end\n</code></pre>\n\n<p>Both code still return the same result (using friendly_id generated slug)</p>\n\n<pre><code>class Product &lt; ActiveRecord::Base\n\nextend FriendlyId\n\nfriendly_id :name, use: [:slugged, :finders, :history]\n\nprivate\n\ndef should_generate_new_friendly_id?\n    new_record? || slug.blank? || name_changed?\n  end\n</code></pre>\n\n<p>anybody can help? thanks</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I found the way to do this in AciveAdmin <a href=\"https://stackoverflow.com/questions/7684644/activerecordreadonlyrecord-when-using-activeadmin-and-friendly-id\">here</a>. But Im not using ActiveAdmin</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9993, "user_id": 2128691, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/YV6xv.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/2128691/dax"}, "edited": false, "score": 2, "creation_date": 1442395348, "post_id": 32604484, "comment_id": 53060679, "body": "can you give an example of the result you want to generate?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1442396419, "post_id": 32604484, "comment_id": 53061396, "body": "BTW, the assignment doesn&#39;t do anything."}, {"owner": {"reputation": 1833, "user_id": 3691303, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2ca7956fc450c2004ffc5f8ff02dd387?s=128&d=identicon&r=PG&f=1", "display_name": "orestiss", "link": "https://stackoverflow.com/users/3691303/orestiss"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1442397663, "post_id": 32604484, "comment_id": 53062217, "body": "@Stefan not sure what you mean..."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1442397746, "post_id": 32604484, "comment_id": 53062260, "body": "You can just write <code>Array.new(10) { |z| 0 }</code> or even <code>Array.new(10) { 0 }</code> or without a block <code>Array.new(10, 0)</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1442397762, "post_id": 32604484, "comment_id": 53062268, "body": "Regarding your edit: is the result always two-dimensional or is this just an example?"}, {"owner": {"reputation": 1833, "user_id": 3691303, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2ca7956fc450c2004ffc5f8ff02dd387?s=128&d=identicon&r=PG&f=1", "display_name": "orestiss", "link": "https://stackoverflow.com/users/3691303/orestiss"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1442397976, "post_id": 32604484, "comment_id": 53062400, "body": "that&#39;s nice! : ) @Stefan. The 2d was an example. I am trying to understand the general case"}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1442396680, "post_id": 32604717, "comment_id": 53061573, "body": "For the part after the edit, note that this generates an array with repetition of the same array instance, which is a gotcha for most beginners."}, {"owner": {"reputation": 1833, "user_id": 3691303, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2ca7956fc450c2004ffc5f8ff02dd387?s=128&d=identicon&r=PG&f=1", "display_name": "orestiss", "link": "https://stackoverflow.com/users/3691303/orestiss"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1442398049, "post_id": 32604717, "comment_id": 53062448, "body": "@sawa can you explain a bit more about this?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 1833, "user_id": 3691303, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2ca7956fc450c2004ffc5f8ff02dd387?s=128&d=identicon&r=PG&f=1", "display_name": "orestiss", "link": "https://stackoverflow.com/users/3691303/orestiss"}, "edited": false, "score": 0, "creation_date": 1442400315, "post_id": 32604717, "comment_id": 53063907, "body": "@orestiss try <code>arr[0] &lt;&lt; 1</code> and inspect <code>arr</code> afterwards"}], "tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": -1, "last_activity_date": 1442396587, "last_edit_date": 1442396587, "creation_date": 1442395841, "answer_id": 32604717, "question_id": 32604484, "link": "https://stackoverflow.com/questions/32604484/how-to-create-a-multidimensional-array-of-zeros-in-ruby/32604717#32604717", "title": "How to create a multidimensional array of zeros in Ruby?", "body": "<p>Try it:)</p>\n\n<pre><code>arr = Array.new(10, 0)\n</code></pre>\n\n<p><strong>UPD:</strong> for multidimensional is:</p>\n\n<pre><code>arr = Array.new(10, Array.new(2, 0))\n=&gt; [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1442396467, "post_id": 32604917, "comment_id": 53061424, "body": "You can remove the <code>|z| z=</code> part"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1442396964, "post_id": 32604917, "comment_id": 53061755, "body": "Not clear what you mean by &quot;second dimension is 2&quot;. Do you mean &quot;the size/length of the array in the second dimension is 2&quot;?"}, {"owner": {"reputation": 130, "user_id": 3711401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c3fa3f84c08e05d6a1574e6d2618f2a?s=128&d=identicon&r=PG&f=1", "display_name": "Gorille", "link": "https://stackoverflow.com/users/3711401/gorille"}, "edited": false, "score": 0, "creation_date": 1442404544, "post_id": 32604917, "comment_id": 53066630, "body": "Yes that&#39;s what i meant."}], "tags": [], "owner": {"reputation": 130, "user_id": 3711401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c3fa3f84c08e05d6a1574e6d2618f2a?s=128&d=identicon&r=PG&f=1", "display_name": "Gorille", "link": "https://stackoverflow.com/users/3711401/gorille"}, "is_accepted": false, "score": 2, "last_activity_date": 1442396923, "last_edit_date": 1442396923, "creation_date": 1442396328, "answer_id": 32604917, "question_id": 32604484, "link": "https://stackoverflow.com/questions/32604484/how-to-create-a-multidimensional-array-of-zeros-in-ruby/32604917#32604917", "title": "How to create a multidimensional array of zeros in Ruby?", "body": "<p>If by more dimensions you mean an array of array, you could try:</p>\n\n<pre><code>arr = Array.new(10){|z| z=Array.new(2,0)}\n# =&gt; [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0,0]]\n</code></pre>\n\n<p>assuming that your second dimension is <code>2</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1442396576, "creation_date": 1442396576, "answer_id": 32605012, "question_id": 32604484, "link": "https://stackoverflow.com/questions/32604484/how-to-create-a-multidimensional-array-of-zeros-in-ruby/32605012#32605012", "title": "How to create a multidimensional array of zeros in Ruby?", "body": "<p>You can also do it like:</p>\n\n<pre><code>Array.new(10, 0).each_slice(2).to_a\n# =&gt; [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]\n\n5.times.map{Array.new(2, 0)}\n# =&gt; [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13376, "user_id": 3357295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3PzYS.jpg?s=128&g=1", "display_name": "Doguita", "link": "https://stackoverflow.com/users/3357295/doguita"}, "edited": false, "score": 1, "creation_date": 1442404728, "post_id": 32605819, "comment_id": 53066768, "body": "Array.new(2, 0) should be [0, 0] at first line"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1443114295, "post_id": 32605819, "comment_id": 53373313, "body": "<code>Array.new(size) { remaining.empty? ? default : multi_array(remaining, default) }</code> reads better?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1443119809, "post_id": 32605819, "comment_id": 53376201, "body": "@CarySwoveland I wanted to keep the code simple and as close to the &quot;static&quot; examples as possible."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1443124424, "post_id": 32605819, "comment_id": 53378654, "body": "By &quot;static&quot;, do you mean an immutable <code>default</code>?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1443155773, "post_id": 32605819, "comment_id": 53388374, "body": "@CarySwoveland no, just my initial examples, i.e. <code>Array.new(2, 0)</code>, <code>Array.new(3) { ... }</code>. I thought it would be helpful to use exactly these method invocations (passing size and default vs. size and block) in the recursive method."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 4, "last_activity_date": 1442405765, "last_edit_date": 1442405765, "creation_date": 1442398642, "answer_id": 32605819, "question_id": 32604484, "link": "https://stackoverflow.com/questions/32604484/how-to-create-a-multidimensional-array-of-zeros-in-ruby/32605819#32605819", "title": "How to create a multidimensional array of zeros in Ruby?", "body": "<p>You can easily nest multiple <a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-c-new\" rel=\"nofollow\"><code>Array.new</code></a> calls:</p>\n\n<pre><code>Array.new(2, 0)\n#=&gt; [0, 0]\n\nArray.new(3) { Array.new(2, 0) }\n#=&gt; [[0, 0], [0, 0], [0, 0]]\n\nArray.new(4) { Array.new(3) { Array.new(2, 0) } }\n#=&gt; [[[0, 0], [0, 0], [0, 0]],\n#    [[0, 0], [0, 0], [0, 0]],\n#    [[0, 0], [0, 0], [0, 0]],\n#    [[0, 0], [0, 0], [0, 0]]]\n</code></pre>\n\n<p>Note that the non-block version, i.e. <code>Array.new(2, 0)</code>, should only be used for immutable objects, because the same object will be used for all elements. See the <a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-c-new-label-Common+gotchas\" rel=\"nofollow\">Common gotchas</a> section for details.</p>\n\n<p>To build an array of arbitrary dimensions, you could use recursion:</p>\n\n<pre><code>def multi_array(sizes, default = nil)\n  size, *remaining = sizes\n  if remaining.empty?\n    Array.new(size, default)\n  else\n    Array.new(size) { multi_array(remaining, default) }\n  end\nend\n\nmulti_array([4, 3, 2], 0)\n#=&gt; [[[0, 0], [0, 0], [0, 0]],\n#    [[0, 0], [0, 0], [0, 0]],\n#    [[0, 0], [0, 0], [0, 0]],\n#    [[0, 0], [0, 0], [0, 0]]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1443214717, "last_edit_date": 1443214717, "creation_date": 1443214402, "answer_id": 32790503, "question_id": 32604484, "link": "https://stackoverflow.com/questions/32604484/how-to-create-a-multidimensional-array-of-zeros-in-ruby/32790503#32790503", "title": "How to create a multidimensional array of zeros in Ruby?", "body": "<p>Here's another way, though I feel the deep copy at every level could somehow be simplified:</p>\n\n<pre><code>def make_multi(dimensions, default)\n  dimensions.reverse.each_with_index.reduce([]) { |a,(d,i)|\n    Array.new(d) { i.zero? ? default : Marshal.load(Marshal.dump(a)) } }\nend\n\narr = make_multi [4,3,2,2], 0\n  #=&gt; [[[[0, 0], [0, 0]], [[0, 0], [0, 0]], [[0, 0], [0, 0]]],\n  #    [[[0, 0], [0, 0]], [[0, 0], [0, 0]], [[0, 0], [0, 0]]],\n  #    [[[0, 0], [0, 0]], [[0, 0], [0, 0]], [[0, 0], [0, 0]]],\n  #    [[[0, 0], [0, 0]], [[0, 0], [0, 0]], [[0, 0], [0, 0]]]] \n\narr[0][0][0][0] = 1\narr\n  #=&gt; [[[[1, 0], [0, 0]], [[0, 0], [0, 0]], [[0, 0], [0, 0]]],\n  #    [[[0, 0], [0, 0]], [[0, 0], [0, 0]], [[0, 0], [0, 0]]],\n  #    [[[0, 0], [0, 0]], [[0, 0], [0, 0]], [[0, 0], [0, 0]]],\n  #    [[[0, 0], [0, 0]], [[0, 0], [0, 0]], [[0, 0], [0, 0]]]] \n\narr = make_multi [4,3,2,2], {}\n  #=&gt; [[[[{}, {}], [{}, {}]], [[{}, {}], [{}, {}]], [[{}, {}], [{}, {}]]],\n  #    [[[{}, {}], [{}, {}]], [[{}, {}], [{}, {}]], [[{}, {}], [{}, {}]]],\n  #    [[[{}, {}], [{}, {}]], [[{}, {}], [{}, {}]], [[{}, {}], [{}, {}]]],\n  #    [[[{}, {}], [{}, {}]], [[{}, {}], [{}, {}]], [[{}, {}], [{}, {}]]]]\n\narr[0][0][0][0] = { a: 1 }\narr\n  #=&gt; [[[[{:a=&gt;1}, {}...] # all but the first are empty hashes\n</code></pre>\n"}], "owner": {"reputation": 1833, "user_id": 3691303, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2ca7956fc450c2004ffc5f8ff02dd387?s=128&d=identicon&r=PG&f=1", "display_name": "orestiss", "link": "https://stackoverflow.com/users/3691303/orestiss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 957, "favorite_count": 0, "accepted_answer_id": 32605819, "answer_count": 5, "score": 2, "last_activity_date": 1443214717, "creation_date": 1442395240, "last_edit_date": 1442401502, "question_id": 32604484, "link": "https://stackoverflow.com/questions/32604484/how-to-create-a-multidimensional-array-of-zeros-in-ruby", "title": "How to create a multidimensional array of zeros in Ruby?", "body": "<p>To create a one-dimensional array, I can write:</p>\n\n<pre><code>arr = Array.new(10) { |z| 0 }\n#=&gt; [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n</code></pre>\n\n<p>But I want to know how to initialize an array in more dimensions, e.g.:</p>\n\n<pre><code>#=&gt; [[0, 0, 0], [0, 0, 0], [0, 0, 0]]\n</code></pre>\n\n<p>This is just an example. I am trying to understand the general case.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdfkit"], "comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1442393866, "post_id": 32603941, "comment_id": 53059762, "body": "Your rails app doesn&#39;t have a <code>config&#47;initializers</code> folder?"}, {"owner": {"reputation": 423, "user_id": 3385136, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100005355848045/picture?type=large", "display_name": "user3385136", "link": "https://stackoverflow.com/users/3385136/user3385136"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1442394170, "post_id": 32603941, "comment_id": 53059957, "body": "My config folder has a deploy (production.rb and staging.rb) and recipes (base.rb, nginx.rb and rbenv.rb) folder as well as app.rb, boot.rb, deploy.rb, environments.yaml, settings.yaml and warble.rb. I use Sinatra and Padrino if that helps clarify."}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1442395053, "post_id": 32603941, "comment_id": 53060516, "body": "So why did you tag your question with rails?"}], "answers": [{"comments": [{"owner": {"reputation": 423, "user_id": 3385136, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100005355848045/picture?type=large", "display_name": "user3385136", "link": "https://stackoverflow.com/users/3385136/user3385136"}, "edited": false, "score": 0, "creation_date": 1442395349, "post_id": 32604418, "comment_id": 53060680, "body": "I had actually tried that but got the following error:         <code>#!&#47;usr&#47;bin&#47;env rackup          # encoding: utf-8           require File.expand_path(&quot;..&#47;config&#47;boot.rb&quot;, __FILE__)           sessioned = Rack::Session::Pool.new(Padrino.application, {key: &#39;ib&#39;, path: &#39;&#47;&#39;, expire_after: 300#,          #httponly: true,           #secure: true           })          run sessioned           require &#39;pdfkit&#39;           use PDFKit::Middleware</code>  I get this error  <code>undefined local variable or method </code>config&#39; for InternetBanking:Class`"}, {"owner": {"reputation": 423, "user_id": 3385136, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100005355848045/picture?type=large", "display_name": "user3385136", "link": "https://stackoverflow.com/users/3385136/user3385136"}, "edited": false, "score": 0, "creation_date": 1442395700, "post_id": 32604418, "comment_id": 53060908, "body": "Sorry. I was copying in the code first. The error is below. Apologies. Useless at adding comments. The first chunk is my config.ru code"}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "reply_to_user": {"reputation": 423, "user_id": 3385136, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100005355848045/picture?type=large", "display_name": "user3385136", "link": "https://stackoverflow.com/users/3385136/user3385136"}, "edited": false, "score": 0, "creation_date": 1442395884, "post_id": 32604418, "comment_id": 53061052, "body": "Well, that doesn&#39;t look like it&#39;s pdfkit related, just a different error.  You should either edit your question based on that or probably better as it&#39;s unrelated ask a new question about that error, with the code that causes the error."}, {"owner": {"reputation": 423, "user_id": 3385136, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100005355848045/picture?type=large", "display_name": "user3385136", "link": "https://stackoverflow.com/users/3385136/user3385136"}, "edited": false, "score": 0, "creation_date": 1442395973, "post_id": 32604418, "comment_id": 53061108, "body": "Thanks. Sorry. Inherited the application and its composition is very strange and doesnt ever seem to conform to online examples so very hard to get any examples. Will do as you ask and hopefully get more luck#"}], "tags": [], "owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "is_accepted": true, "score": 0, "last_activity_date": 1442395085, "creation_date": 1442395085, "answer_id": 32604418, "question_id": 32603941, "link": "https://stackoverflow.com/questions/32603941/trying-to-use-pdfkit-but-dont-know-where-to-initialize/32604418#32604418", "title": "Trying to use PDFKit but dont know where to initialize", "body": "<blockquote>\n  <p>Non-Rails Rack apps</p>\n  \n  <h1>in config.ru</h1>\n\n<pre><code>require 'pdfkit' \nuse PDFKit::Middleware\n</code></pre>\n</blockquote>\n\n<p>From the <a href=\"https://github.com/pdfkit/pdfkit\" rel=\"nofollow\">documentation</a></p>\n\n<p>I'm assuming you're using a config.ru setup</p>\n"}, {"comments": [{"owner": {"reputation": 628, "user_id": 1496614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39dc315c06e1f3a6408c99c123810ae7?s=128&d=identicon&r=PG", "display_name": "Vitaly Stanchits", "link": "https://stackoverflow.com/users/1496614/vitaly-stanchits"}, "edited": false, "score": 0, "creation_date": 1442396552, "post_id": 32604947, "comment_id": 53061488, "body": "OK, as I see from the comments, this app is actually using Sinatra, not Rails. Since I never worked with Sinatra I am not sure of how to correctly bundle gems into the app.rb file."}], "tags": [], "owner": {"reputation": 628, "user_id": 1496614, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/39dc315c06e1f3a6408c99c123810ae7?s=128&d=identicon&r=PG", "display_name": "Vitaly Stanchits", "link": "https://stackoverflow.com/users/1496614/vitaly-stanchits"}, "is_accepted": false, "score": 0, "last_activity_date": 1442396393, "creation_date": 1442396393, "answer_id": 32604947, "question_id": 32603941, "link": "https://stackoverflow.com/questions/32603941/trying-to-use-pdfkit-but-dont-know-where-to-initialize/32604947#32604947", "title": "Trying to use PDFKit but dont know where to initialize", "body": "<p>I have an application that uses WickedPDF, and there I only need to place</p>\n\n<pre><code>gem 'wkhtmltopdf-binary'\ngem 'wicked_pdf'\n</code></pre>\n\n<p>And then you can simply use <code>WickedPdf</code> object from the application. I am not sure how your application is laid out because it does not appear to be using bundler.</p>\n"}], "owner": {"reputation": 423, "user_id": 3385136, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100005355848045/picture?type=large", "display_name": "user3385136", "link": "https://stackoverflow.com/users/3385136/user3385136"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "accepted_answer_id": 32604418, "answer_count": 2, "score": 1, "last_activity_date": 1444560229, "creation_date": 1442393770, "last_edit_date": 1495539876, "question_id": 32603941, "link": "https://stackoverflow.com/questions/32603941/trying-to-use-pdfkit-but-dont-know-where-to-initialize", "title": "Trying to use PDFKit but dont know where to initialize", "body": "<p>After running into difficulty with Prawn I have decided to use PDFKit. In doing so I followed the following link:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/5177074/rails-3-pdfkit-how-to-convert-a-view-to-pdf\">Rails 3 + PDFKit: How to convert a view to PDF?</a></p>\n\n<p>The problem is that my ruby on rails application is quite unusual in that it doesnt seem to follow the usual structure. In the link it says to place the following in the initializer:</p>\n\n<pre><code>require 'pdfkit'\nmiddleware.use PDFKit::Middleware\n\nPDFKit.configure do |config|\n  config.wkhtmltopdf = 'windows_path_to_wkhtmltopdf'\nend\n</code></pre>\n\n<p>Where would i place this? I have an app.rb file which i tried to place this in but got the following error:</p>\n\n<pre><code>undefined method `use' for [[Sass::Plugin::Rack, [], nil]]:Array\n</code></pre>\n\n<p>The stacktrace points to the line:</p>\n\n<pre><code>middleware.use PDFKit::Middleware\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 1, "creation_date": 1442393271, "post_id": 32603618, "comment_id": 53059341, "body": "it is supported <a href=\"http://guides.rubyonrails.org/routing.html#http-verb-constraints\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/routing.html#http-verb-constraints</a>"}, {"owner": {"reputation": 7359, "user_id": 599989, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d752d2574aeb36bc66471f4d0f8811aa?s=128&d=identicon&r=PG", "display_name": "Bijendra", "link": "https://stackoverflow.com/users/599989/bijendra"}, "edited": false, "score": 0, "creation_date": 1442393443, "post_id": 32603618, "comment_id": 53059467, "body": "Did you faced any errors using match"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1442394057, "post_id": 32603618, "comment_id": 53059880, "body": "About 2 days ago I tried (with Rails 4.1.13) <code>match &#39;*all&#39; =&gt; &#39;cors#reject&#39;, via: :options</code> and it works as expected, so I suppose <code>match</code> is still alive, at least in Rails 4.1."}, {"owner": {"reputation": 696, "user_id": 4390925, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/73056a6a2964cb3f294b051b7015e3ab?s=128&d=identicon&r=PG&f=1", "display_name": "Rusty", "link": "https://stackoverflow.com/users/4390925/rusty"}, "edited": false, "score": 0, "creation_date": 1442395072, "post_id": 32603618, "comment_id": 53060526, "body": "Yes I did get error !! Pasted it in heading. Basically when I add this ---           match &#39;:controller(/:actions(/:id))&#39;, :via =&gt; :get           ---- in routes.rb, server returns following --------       error: Missing :action key on routes definition, please check your routes       ------------"}], "answers": [{"comments": [{"owner": {"reputation": 696, "user_id": 4390925, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/73056a6a2964cb3f294b051b7015e3ab?s=128&d=identicon&r=PG&f=1", "display_name": "Rusty", "link": "https://stackoverflow.com/users/4390925/rusty"}, "edited": false, "score": 0, "creation_date": 1442396346, "post_id": 32604680, "comment_id": 53061349, "body": "Thanks for this. But why is it returning the error <code>Missing :action key on routes definition, please check your routes</code>."}, {"owner": {"reputation": 19714, "user_id": 1006863, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/sYOuq.jpg?s=128&g=1", "display_name": "Paulo Fidalgo", "link": "https://stackoverflow.com/users/1006863/paulo-fidalgo"}, "reply_to_user": {"reputation": 696, "user_id": 4390925, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/73056a6a2964cb3f294b051b7015e3ab?s=128&d=identicon&r=PG&f=1", "display_name": "Rusty", "link": "https://stackoverflow.com/users/4390925/rusty"}, "edited": false, "score": 0, "creation_date": 1442396808, "post_id": 32604680, "comment_id": 53061656, "body": "@Rusty Have you the same exact code as this example? I&#39;ve edited and add the result."}, {"owner": {"reputation": 696, "user_id": 4390925, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/73056a6a2964cb3f294b051b7015e3ab?s=128&d=identicon&r=PG&f=1", "display_name": "Rusty", "link": "https://stackoverflow.com/users/4390925/rusty"}, "edited": false, "score": 0, "creation_date": 1442400065, "post_id": 32604680, "comment_id": 53063751, "body": "Yes I have exact same code. I have this code in <b>route.rb</b> and 1 folder named <b>demo</b> in views with two files named <i>hello.html.erb*</i> and <i>index.html.erb*</i> in <b>demo</b> folder. But when I tried your code <code>match &#39;:controller&#47;:action&#47;:id&#39;, via: :get</code> and tried <b><a href=\"http://localhost:3000/demo/index\" rel=\"nofollow noreferrer\">localhost:3000/demo/index</a></b> in my browser, it returned following error <code>No route matches [GET] &quot;&#47;demo&#47;index&quot;</code>. I am using Rails 4.2.4."}, {"owner": {"reputation": 19714, "user_id": 1006863, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/sYOuq.jpg?s=128&g=1", "display_name": "Paulo Fidalgo", "link": "https://stackoverflow.com/users/1006863/paulo-fidalgo"}, "reply_to_user": {"reputation": 696, "user_id": 4390925, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/73056a6a2964cb3f294b051b7015e3ab?s=128&d=identicon&r=PG&f=1", "display_name": "Rusty", "link": "https://stackoverflow.com/users/4390925/rusty"}, "edited": false, "score": 0, "creation_date": 1442409036, "post_id": 32604680, "comment_id": 53070026, "body": "@Rusty Do you have a DemoController with an index method?"}, {"owner": {"reputation": 696, "user_id": 4390925, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/73056a6a2964cb3f294b051b7015e3ab?s=128&d=identicon&r=PG&f=1", "display_name": "Rusty", "link": "https://stackoverflow.com/users/4390925/rusty"}, "edited": false, "score": 0, "creation_date": 1442410550, "post_id": 32604680, "comment_id": 53071208, "body": "This is my DemoController Code   <code>class DemoController &lt; ApplicationController   layout false   def index   end end</code>  You will understand the indentation ^_^"}, {"owner": {"reputation": 696, "user_id": 4390925, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/73056a6a2964cb3f294b051b7015e3ab?s=128&d=identicon&r=PG&f=1", "display_name": "Rusty", "link": "https://stackoverflow.com/users/4390925/rusty"}, "reply_to_user": {"reputation": 19714, "user_id": 1006863, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/sYOuq.jpg?s=128&g=1", "display_name": "Paulo Fidalgo", "link": "https://stackoverflow.com/users/1006863/paulo-fidalgo"}, "edited": false, "score": 0, "creation_date": 1442471255, "post_id": 32604680, "comment_id": 53097625, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/89875/discussion-between-rusty-and-paulo-fidalgo\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 19714, "user_id": 1006863, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/sYOuq.jpg?s=128&g=1", "display_name": "Paulo Fidalgo", "link": "https://stackoverflow.com/users/1006863/paulo-fidalgo"}, "is_accepted": true, "score": 0, "last_activity_date": 1442426492, "last_edit_date": 1442426492, "creation_date": 1442395737, "answer_id": 32604680, "question_id": 32603618, "link": "https://stackoverflow.com/questions/32603618/generic-routing-match-controller-action-id-format-not-available-in-r/32604680#32604680", "title": "Generic Routing match &#39;:controller(/:action(/:id))(.:format)&#39; not available in Rails 4. Way Out?", "body": "<p>Yes it is supported, from the <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow\">Rails Routing from the Outside In</a> guide</p>\n\n<p><strong>3.7 HTTP Verb Constraints</strong></p>\n\n<p>In general, you should use the get, post, put, patch and delete methods to constrain a route to a particular verb. You can use the match method with the :via option to match multiple verbs at once:</p>\n\n<blockquote>\n  <p>match 'photos', to: 'photos#show', via: [:get, :post]</p>\n</blockquote>\n\n<p>You can match all verbs to a particular route using via: :all:</p>\n\n<blockquote>\n  <p>match 'photos', to: 'photos#show', via: :all</p>\n</blockquote>\n\n<p>and from the documentation:</p>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Base.html#method-i-match\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Base.html#method-i-match</a></p>\n\n<pre><code># sets :controller, :action and :id in params\nmatch ':controller/:action/:id', via: [:get, :post]\n</code></pre>\n\n<p>If you add this line to your routes:</p>\n\n<pre><code>match ':controller/:action/(:id)', via: :get\n</code></pre>\n\n<p>it will produce the following route:</p>\n\n<pre><code>Prefix Verb URI Pattern                        Controller#Action\n       GET  /:controller/:action(/:id)(.:format) :controller#:action\n</code></pre>\n"}], "owner": {"reputation": 696, "user_id": 4390925, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/73056a6a2964cb3f294b051b7015e3ab?s=128&d=identicon&r=PG&f=1", "display_name": "Rusty", "link": "https://stackoverflow.com/users/4390925/rusty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2129, "favorite_count": 2, "accepted_answer_id": 32604680, "answer_count": 1, "score": 4, "last_activity_date": 1442426492, "creation_date": 1442392925, "last_edit_date": 1442397211, "question_id": 32603618, "link": "https://stackoverflow.com/questions/32603618/generic-routing-match-controller-action-id-format-not-available-in-r", "title": "Generic Routing match &#39;:controller(/:action(/:id))(.:format)&#39; not available in Rails 4. Way Out?", "body": "<p>As far as I read, I understood that Rails 4 doesn't support <strong>match</strong> keyword.</p>\n\n<p>But I want to make a default generic route something like following</p>\n\n<pre><code>match ':controller(/:action(/:id))(.:format)', :via =&gt; :get\n</code></pre>\n\n<p>When I use above code in routes.rb, it throws me following error:</p>\n\n<pre><code>Missing :action key on routes definition, please check your routes\n</code></pre>\n\n<p>Can someone help me how to implement this in Rails 4.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 1, "creation_date": 1442393074, "post_id": 32603611, "comment_id": 53059225, "body": "Can you post the <code>params</code> that are generated in the server logs when you submit the <code>form</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 871, "user_id": 2801144, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/61db655ceeced28d6a33b55e10c547e6?s=128&d=identicon&r=PG&f=1", "display_name": "Argus", "link": "https://stackoverflow.com/users/2801144/argus"}, "edited": false, "score": 0, "creation_date": 1442437775, "post_id": 32604032, "comment_id": 53088077, "body": "I fixed it but it is still not working. I don&#39;t know why it isn&#39;t catching it."}, {"owner": {"reputation": 19714, "user_id": 1006863, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/sYOuq.jpg?s=128&g=1", "display_name": "Paulo Fidalgo", "link": "https://stackoverflow.com/users/1006863/paulo-fidalgo"}, "reply_to_user": {"reputation": 871, "user_id": 2801144, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/61db655ceeced28d6a33b55e10c547e6?s=128&d=identicon&r=PG&f=1", "display_name": "Argus", "link": "https://stackoverflow.com/users/2801144/argus"}, "edited": false, "score": 0, "creation_date": 1442488219, "post_id": 32604032, "comment_id": 53106947, "body": "@Argus Please add an update to the question with the new code and error. Otherwise it&#39;s difficult to help."}], "tags": [], "owner": {"reputation": 19714, "user_id": 1006863, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/sYOuq.jpg?s=128&g=1", "display_name": "Paulo Fidalgo", "link": "https://stackoverflow.com/users/1006863/paulo-fidalgo"}, "is_accepted": true, "score": 4, "last_activity_date": 1442394095, "last_edit_date": 1442394095, "creation_date": 1442394011, "answer_id": 32604032, "question_id": 32603611, "link": "https://stackoverflow.com/questions/32603611/rails-user-authentication-is-not-working-find-method-always-returns-nil/32604032#32604032", "title": "Rails user_authentication is not working, find method always returns nil", "body": "<p>I believe you have a mistake in your code:</p>\n\n<pre><code>user = User.find_by_email(params[:password])\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>user = User.find_by_email(params[:email])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4497, "user_id": 1050875, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3549436942ea890da97f41d1dbd3594f?s=128&d=identicon&r=PG", "display_name": "akbarbin", "link": "https://stackoverflow.com/users/1050875/akbarbin"}, "is_accepted": false, "score": 0, "last_activity_date": 1442394943, "creation_date": 1442394943, "answer_id": 32604365, "question_id": 32603611, "link": "https://stackoverflow.com/questions/32603611/rails-user-authentication-is-not-working-find-method-always-returns-nil/32604365#32604365", "title": "Rails user_authentication is not working, find method always returns nil", "body": "<p>I think you have to change:</p>\n\n<pre><code>user = User.find_by_email(params[:password])\n</code></pre>\n\n<p>into</p>\n\n<pre><code>user = User.find_by_email(params[:email])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 5159845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ceda7d0b2ec9028e76dba60aa90392c?s=128&d=identicon&r=PG&f=1", "display_name": "akash", "link": "https://stackoverflow.com/users/5159845/akash"}, "is_accepted": false, "score": 0, "last_activity_date": 1442412733, "last_edit_date": 1442412733, "creation_date": 1442400513, "answer_id": 32606480, "question_id": 32603611, "link": "https://stackoverflow.com/questions/32603611/rails-user-authentication-is-not-working-find-method-always-returns-nil/32606480#32606480", "title": "Rails user_authentication is not working, find method always returns nil", "body": "<p>change</p>\n\n<p><code>user = User.find_by_email(params[:password])</code></p>\n\n<p>to</p>\n\n<p><code>user = User.where(email: params[:email]).take</code></p>\n"}], "owner": {"reputation": 871, "user_id": 2801144, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/61db655ceeced28d6a33b55e10c547e6?s=128&d=identicon&r=PG&f=1", "display_name": "Argus", "link": "https://stackoverflow.com/users/2801144/argus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 32604032, "answer_count": 3, "score": 2, "last_activity_date": 1442541541, "creation_date": 1442392905, "last_edit_date": 1442541541, "question_id": 32603611, "link": "https://stackoverflow.com/questions/32603611/rails-user-authentication-is-not-working-find-method-always-returns-nil", "title": "Rails user_authentication is not working, find method always returns nil", "body": "<p>I can't seem to get my head around, this, I've been trying it for hours and it still doesn't seem to work, even though I've followed the tutorials available properly. I'm basically creating my own login validation with its own session controller. It has a form for a login and then some authentication steps. I'm using bcrypt to create hashes for passwords as well, I don't know if this is doing anything, or not, I suspect it isn't but still. </p>\n\n<p>Here is the form I use: </p>\n\n<pre><code>    - provide(:title, \"Sign in\")\n%h1 Log in\n.row\n  .col-md-6.col-md-offset-3\n    = form_for signin_path do |f|\n      = f.text_field :email, placeholder: 'Email'\n      = f.password_field :password, placeholder: 'Password', required: true\n      = f.submit \"Sign in\"\n    %p\n      New user? #{link_to \"Create New Account\", new_user_path}\n</code></pre>\n\n<p>And here's my sessions controller: </p>\n\n<pre><code> class SessionsController &lt; ApplicationController\n  require 'bcrypt'\n\n  def new \n  end \n\n  def create\n    #google_user = GoogleUser.from_omniauth(env[\"omniauth.auth\"])\n    #session[:google_user_id] = google_user.id\n    #redirect_to '/users'\n    user = User.find_by_email(params[:email])\n    if user &amp;&amp; user.authenticate(params[:password])\n      session[:user_id] = user.id\n      redirect_to user, notice: 'Logged In'\n    else \n      render :new\n    end\n  end\n\n  def destroy\n    #session[:google_user_id] = nil\n    session[:user_id] = nil\n    redirect_to root_path, notice: 'Logged Out'\n  end\nend\n</code></pre>\n\n<p>Ignore the google stuff, that's something that I will have to handle later, as it would seem.</p>\n\n<p>I'm also not allowed to use any such as devise, or any of the others that make this process easier. I'd appreciate if someone could check my code and tell me if there's something wrong, because I certainly don't know what else to do with this. </p>\n\n<p>Query parameters:</p>\n\n<pre><code>SELECT users.* FROM users WHERE users.email = 'email'\n</code></pre>\n\n<p>The problem with that query is that it is not taking the proper email, when I type, \"email@gmail.com\" it doesn't get that, it just grabs the symbol 'email'</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1442394150, "post_id": 32603530, "comment_id": 53059941, "body": "Am i right in thinking that if a user has 10 thumbs from the last month you want to show 10 <code>%i.fa.fa-star.orange</code> tags next to them?  If that&#39;s the case then you don&#39;t need to load the thumbs themselves, you just need to know the number?"}], "answers": [{"comments": [{"owner": {"reputation": 982, "user_id": 3005105, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/NIIPO.jpg?s=128&g=1", "display_name": "Gareth Burrows", "link": "https://stackoverflow.com/users/3005105/gareth-burrows"}, "edited": false, "score": 0, "creation_date": 1442393690, "post_id": 32603588, "comment_id": 53059647, "body": "You could eager load the thumbs associations in the controller to make this more efficient, and do the ordering there. - could you please explain how - I&#39;m pretty new to this :)"}], "tags": [], "owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "is_accepted": false, "score": 0, "last_activity_date": 1442392827, "creation_date": 1442392827, "answer_id": 32603588, "question_id": 32603530, "link": "https://stackoverflow.com/questions/32603530/ruby-rails-ordering-of-result-set/32603588#32603588", "title": "ruby / rails ordering of result set", "body": "<p>change</p>\n\n<pre><code>@users.each_with_index do |user, i|\n</code></pre>\n\n<p>to </p>\n\n<pre><code>@users.sort_by{|u| u.thumbs_from_this_month.size}.reverse.each_with_index do |user, i|\n</code></pre>\n\n<p>You could eager load the thumbs associations in the controller to make this more efficient, and do the ordering there.</p>\n"}, {"tags": [], "owner": {"reputation": 1531, "user_id": 1677069, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d169336c1d2c08a2d9d8022115c2c9a0?s=128&d=identicon&r=PG", "display_name": "Andres Ehrenpreis", "link": "https://stackoverflow.com/users/1677069/andres-ehrenpreis"}, "is_accepted": false, "score": 0, "last_activity_date": 1442397019, "last_edit_date": 1442397019, "creation_date": 1442395971, "answer_id": 32604780, "question_id": 32603530, "link": "https://stackoverflow.com/questions/32603530/ruby-rails-ordering-of-result-set/32604780#32604780", "title": "ruby / rails ordering of result set", "body": "<p>I guess you could use the help of <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Scoping/Named/ClassMethods.html#method-i-scope\" rel=\"nofollow\">scope</a> here. I'm not very skilled with lambdas, but I guess something like this in the <strong>user-model</strong> would work:</p>\n\n<pre><code>scope :thumbs_desc_list, lambda { User.all.map {|u| u.thumbs_this_month}.sort { |x,y| y &lt;=&gt; x } }\n</code></pre>\n\n<p>This ofcourse assumes you have an instance method in your user-model called <code>thumbs_this_month</code> which gives you the amount of thumbs received this month.</p>\n\n<p>After that in the <strong>controller</strong>:</p>\n\n<pre><code>@users = User.thumbs_desc_list\n</code></pre>\n\n<p>... and now you should be able to iterate over <code>@users</code> in your view wherever you want, having them ordered by thumbs amount descendingly.</p>\n\n<p>Using scope will allow you to use the properly order list wherever you need afterwards too.</p>\n"}, {"tags": [], "owner": {"reputation": 19714, "user_id": 1006863, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/sYOuq.jpg?s=128&g=1", "display_name": "Paulo Fidalgo", "link": "https://stackoverflow.com/users/1006863/paulo-fidalgo"}, "is_accepted": false, "score": 0, "last_activity_date": 1442396292, "creation_date": 1442396292, "answer_id": 32604902, "question_id": 32603530, "link": "https://stackoverflow.com/questions/32603530/ruby-rails-ordering-of-result-set/32604902#32604902", "title": "ruby / rails ordering of result set", "body": "<p>From what I understand from your code you should have a scope named <code>from_this_month</code> so my suggestion is to add order in the query, so you don't need to care about extra code and complexity to order your data.</p>\n\n<p>Check the <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-order\" rel=\"nofollow\">order documentation</a></p>\n"}, {"comments": [{"owner": {"reputation": 1531, "user_id": 1677069, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d169336c1d2c08a2d9d8022115c2c9a0?s=128&d=identicon&r=PG", "display_name": "Andres Ehrenpreis", "link": "https://stackoverflow.com/users/1677069/andres-ehrenpreis"}, "edited": false, "score": 0, "creation_date": 1442398078, "post_id": 32605254, "comment_id": 53062474, "body": "How about efficiency? Joins, yes, uses lazy loading, but this query still hits the thumbs-table with query also- am I right? If that&#39;s the case, then I&#39;d prefer a way, where you just count the thumbs on an user-object. Thatway you&#39;ll save some additional unnecessary querys and therefore time."}, {"owner": {"reputation": 4497, "user_id": 1050875, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3549436942ea890da97f41d1dbd3594f?s=128&d=identicon&r=PG", "display_name": "akbarbin", "link": "https://stackoverflow.com/users/1050875/akbarbin"}, "reply_to_user": {"reputation": 1531, "user_id": 1677069, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d169336c1d2c08a2d9d8022115c2c9a0?s=128&d=identicon&r=PG", "display_name": "Andres Ehrenpreis", "link": "https://stackoverflow.com/users/1677069/andres-ehrenpreis"}, "edited": false, "score": 0, "creation_date": 1442454427, "post_id": 32605254, "comment_id": 53092979, "body": "Andres Ehrenpreis. Sometimes we needs join table as ruby on rails uses in has-many associations. For examples: current_user.thumbs, it means that User joins Thumb table. If you want to select only column that you want, it&#39;s good way. For instance:  User.select(&quot;users.id, users.name, count(thumbs.id) AS thumbs_count&quot;).joins(:thumbs).from_this_month.group(&quot;users.i&zwnj;&#8203;d&quot;).order(&quot;thumbs_co&zwnj;&#8203;unt DESC&quot;)"}], "tags": [], "owner": {"reputation": 4497, "user_id": 1050875, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3549436942ea890da97f41d1dbd3594f?s=128&d=identicon&r=PG", "display_name": "akbarbin", "link": "https://stackoverflow.com/users/1050875/akbarbin"}, "is_accepted": false, "score": 0, "last_activity_date": 1442454540, "last_edit_date": 1442454540, "creation_date": 1442397166, "answer_id": 32605254, "question_id": 32603530, "link": "https://stackoverflow.com/questions/32603530/ruby-rails-ordering-of-result-set/32605254#32605254", "title": "ruby / rails ordering of result set", "body": "<p>You can change your code into below:</p>\n\n<pre><code>User.select(\"users.*, thumbs.*, count(thumbs.id) AS thumbs_count\").joins(:thumbs).from_this_month.group(\"users.id\").order(\"thumbs_count DESC\")\n</code></pre>\n\n<p>Let me know when it works.</p>\n"}], "owner": {"reputation": 982, "user_id": 3005105, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/NIIPO.jpg?s=128&g=1", "display_name": "Gareth Burrows", "link": "https://stackoverflow.com/users/3005105/gareth-burrows"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 2, "answer_count": 4, "score": 1, "last_activity_date": 1442454540, "creation_date": 1442392639, "question_id": 32603530, "link": "https://stackoverflow.com/questions/32603530/ruby-rails-ordering-of-result-set", "title": "ruby / rails ordering of result set", "body": "<p>I am trying to produce a high score chart, with a list of users who have been given a \"thumbs\" ordered by the number of thumbs descending. I have it almost working, but cannot think how to get the records to order correctly.</p>\n\n<p>So we have two models, being User and Thumb. </p>\n\n<p>In the controller, we have </p>\n\n<pre><code>def thumbs_highscores\n  user_ids = current_account.thumbs.from_this_month.map(&amp;:user_id)\n  @users = current_account.users.where(:id =&gt;emp_ids)\nend\n</code></pre>\n\n<p>In the view I am then displaying the high scores likes this...</p>\n\n<pre><code>%table.center{:style =&gt; \"max-width: 600px\"}\n  %tr\n    %th Rank\n    %th Name\n    %th.right # Thumbs received\n  - @users.each_with_index do |user, i|\n    %tr\n    %td= i+1 \n    %td= user.name\n    %td.right \n      - user.thumbs.from_this_month.each do |thumb|\n        %i.fa.fa-star.orange\n</code></pre>\n\n<p>This works nicely, but is not displaying the users in the correct order. I would like to amend the controller code to list the users in the order of how many thumbs they have had in the last month but cannot get my head round it. Can anyone help?</p>\n\n<p>thanks</p>\n"}, {"tags": ["ruby", "sorting"], "answers": [{"comments": [{"owner": {"reputation": 9584, "user_id": 1420684, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/78242bebaa42db9b1f771e6c19a074fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mirror318", "link": "https://stackoverflow.com/users/1420684/mirror318"}, "edited": false, "score": 0, "creation_date": 1442394802, "post_id": 32603729, "comment_id": 53060369, "body": "This makes me want to crawl into a corner &gt;&lt; how do you wrap your head around all this?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 9584, "user_id": 1420684, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/78242bebaa42db9b1f771e6c19a074fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mirror318", "link": "https://stackoverflow.com/users/1420684/mirror318"}, "edited": false, "score": 0, "creation_date": 1442395763, "post_id": 32603729, "comment_id": 53060952, "body": "@Mirror318 <code>sort_by { |x| x }</code> is roughly equivalent to <code>sort { |a, b| a &lt;=&gt; b }</code>. Expand your code accordingly, and you almost have the answer."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1443991417, "post_id": 32603729, "comment_id": 53701758, "body": "Mirror, it won&#39;t be long before you will see this as routine."}], "tags": [], "owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "is_accepted": true, "score": 5, "last_activity_date": 1442400131, "last_edit_date": 1592644375, "creation_date": 1442393227, "answer_id": 32603729, "question_id": 32603482, "link": "https://stackoverflow.com/questions/32603482/sorting-a-hash-by-value-then-by-key-but-the-key-is-reversed/32603729#32603729", "title": "Sorting a hash by value then by key (but the key is reversed)", "body": "<p>Use <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-sort\" rel=\"noreferrer\">sort</a>:</p>\n<pre><code>total = {&quot;Bob&quot;=&gt;37, &quot;Alice&quot;=&gt;42, &quot;Carl&quot;=&gt;42}\ntotal.sort { |(k1, v1), (k2, v2)| [v1, k2] &lt;=&gt; [v2, k1] }.to_h\n# =&gt; {&quot;Bob&quot;=&gt;37, &quot;Carl&quot;=&gt;42, &quot;Alice&quot;=&gt;42}\n</code></pre>\n<p>First, sort by values (<code>v1 &lt;=&gt; v2</code>) and then reverse sort by keys (<code>k2 &lt;=&gt; k1</code>), and since we need it simultaneously, put it into array.</p>\n<p>EDIT: @Mirror318, it just looks scary, take a look at the excellent explanation here: <a href=\"https://stackoverflow.com/questions/827649/what-is-the-ruby-spaceship-operator\">What is the Ruby &lt;=&gt; (spaceship) operator?</a></p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1442395229, "post_id": 32604325, "comment_id": 53060612, "body": "That doesn&#39;t sort the keys in descending order."}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": -1, "last_activity_date": 1442394864, "creation_date": 1442394864, "answer_id": 32604325, "question_id": 32603482, "link": "https://stackoverflow.com/questions/32603482/sorting-a-hash-by-value-then-by-key-but-the-key-is-reversed/32604325#32604325", "title": "Sorting a hash by value then by key (but the key is reversed)", "body": "<p>If you're using ruby >= 2.1, then just call <code>to_h</code> on sorted array of tuples:   </p>\n\n<pre><code>total = {\"Bob\"=&gt;37, \"Alice\"=&gt;42, \"Carl\"=&gt;42}\ntotal.sort_by{|k, v| [v, k]}.to_h\n</code></pre>\n\n<p>Else call <code>Hash.new</code>:</p>\n\n<pre><code>total = {\"Bob\"=&gt;37, \"Alice\"=&gt;42, \"Carl\"=&gt;42}\nHash.new total.sort_by{|k, v| [v, k]}.to_h\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1604447163, "last_edit_date": 1604447163, "creation_date": 1443992035, "answer_id": 32938307, "question_id": 32603482, "link": "https://stackoverflow.com/questions/32603482/sorting-a-hash-by-value-then-by-key-but-the-key-is-reversed/32938307#32938307", "title": "Sorting a hash by value then by key (but the key is reversed)", "body": "<p>Another way:</p>\n<pre><code>total.sort_by { |k,v| [-v,k] }.reverse.to_h\n  #=&gt; {&quot;Bob&quot;=&gt;37, &quot;Carl&quot;=&gt;42, &quot;Alice&quot;=&gt;42}\n</code></pre>\n"}], "owner": {"reputation": 9584, "user_id": 1420684, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/78242bebaa42db9b1f771e6c19a074fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mirror318", "link": "https://stackoverflow.com/users/1420684/mirror318"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 619, "favorite_count": 1, "accepted_answer_id": 32603729, "answer_count": 3, "score": 2, "last_activity_date": 1604447163, "creation_date": 1442392426, "last_edit_date": 1442392736, "question_id": 32603482, "link": "https://stackoverflow.com/questions/32603482/sorting-a-hash-by-value-then-by-key-but-the-key-is-reversed", "title": "Sorting a hash by value then by key (but the key is reversed)", "body": "<p>The title says it all.</p>\n\n<pre><code>total = {\"Bob\"=&gt;37, \"Alice\"=&gt;42, \"Carl\"=&gt;42}\n</code></pre>\n\n<p>I want to sort it by value, and then by key, but with the key in descending order.</p>\n\n<p>Like this: </p>\n\n<pre><code>{\"Bob\"=&gt;37, \"Carl\"=&gt;42, \"Alice\"=&gt;42}\n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>return total.sort_by { |k, v| [v, k] }\n</code></pre>\n\n<p>But from here I don't know how to reverse <code>k</code>...</p>\n"}, {"tags": ["ruby", "difference"], "comments": [{"owner": {"reputation": 1305, "user_id": 623919, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c7d2113d86e7a9b16e8cac6956096bf0?s=128&d=identicon&r=PG", "display_name": "Axel Tetzlaff", "link": "https://stackoverflow.com/users/623919/axel-tetzlaff"}, "edited": false, "score": 0, "creation_date": 1442408098, "post_id": 32602554, "comment_id": 53069311, "body": "Are you aware that there is at least one GEM doing exactly this? <a href=\"https://github.com/samg/diffy\" rel=\"nofollow noreferrer\">github.com/samg/diffy</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6153, "user_id": 454094, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e17930ea83fcb45656a40da56d8a2cac?s=128&d=identicon&r=PG", "display_name": "lime", "link": "https://stackoverflow.com/users/454094/lime"}, "is_accepted": true, "score": 1, "last_activity_date": 1442390732, "creation_date": 1442390732, "answer_id": 32602983, "question_id": 32602554, "link": "https://stackoverflow.com/questions/32602554/comparing-files-to-find-difference-between-them-in-ruby-returns-wrong-result/32602983#32602983", "title": "comparing files to find difference between them in ruby returns wrong result.", "body": "<p>It looks like you have trailing whitespace in file1.txt, which causes the differences. </p>\n\n<p>E.g. <code>\"colors  \"</code> is not equal to <code>\"colors\"</code>, causing them to be listed in different sections.</p>\n\n<p>If you want to strip away all leading and trailing whitespace before comparing lines, you can use <a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-strip\" rel=\"nofollow\"><code>.strip</code></a>:</p>\n\n<pre><code>f1 = IO.readlines(\"file1.txt\").map(&amp;:strip)\nf2 = IO.readlines(\"file2.txt\").map(&amp;:strip)\n</code></pre>\n\n<p>That should produce the result you expected, even if you accidentally have some trailing whitespace.</p>\n"}], "owner": {"reputation": 150, "user_id": 5251665, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/499c31bbaf69116043d67679a242310a?s=128&d=identicon&r=PG&f=1", "display_name": "hari", "link": "https://stackoverflow.com/users/5251665/hari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 32602983, "answer_count": 1, "score": 1, "last_activity_date": 1442390732, "creation_date": 1442389347, "question_id": 32602554, "link": "https://stackoverflow.com/questions/32602554/comparing-files-to-find-difference-between-them-in-ruby-returns-wrong-result", "title": "comparing files to find difference between them in ruby returns wrong result.", "body": "<p>I'm trying to compare two text file and write their difference into another text file. but im getting wrong differences. that is, name which is existing in both the files are also coming under difference file.</p>\n\n<p>Im using this code, which i got from stackoverflow.</p>\n\n<pre><code>#new file\nf1 = IO.readlines(\"file1.txt\").map(&amp;:chomp)\n#old file\nf2 = IO.readlines(\"file2.txt\").map(&amp;:chomp)\n\nFile.open(\"result.txt\",\"w\"){ |f| f.write(\"NEED TO ADD:\\n\")}\nFile.open(\"result.txt\",\"a\"){ |f| f.write((f1-f2).join(\"\\n\")) }\nFile.open(\"result.txt\",\"a\"){ |f| f.write(\"--------------------\\n\")}\nFile.open(\"result.txt\",\"a\"){ |f| f.write(\"NEED TO REMOVE:\\n\")}\nFile.open(\"result.txt\",\"a\"){ |f| f.write((f2-f1).join(\"\\n\")) }\n</code></pre>\n\n<p>and i have the following content in my file1.txt and file2.txt</p>\n\n<p>file1.txt contains:</p>\n\n<pre><code>colors  \nchannel [v]     \nstar plus   \nstar utsav  \nsony\nlife ok             \nzee salaam\nzee tv      \nnepal one   \nzee anmol                \nflowers tv   \n</code></pre>\n\n<p>file2.txt contains:</p>\n\n<pre><code>colors\nsony entertainment\nstar plus\nstar utsav\nzee tv\nlife ok\ndd national\netc bollywood\nzee anmol \n</code></pre>\n\n<p>and my result.txt file contains:</p>\n\n<pre><code>NEED TO ADD:\ncolors  \nchannel [v]     \nstar plus   \nstar utsav  \nsony\nlife ok             \nzee salaam\nzee tv      \nnepal one   \nzee anmol                \nflowers tv   \n---------------------------------------------------\nNEED TO REMOVE:\ncolors\nsony entertainment\nstar plus\nstar utsav\nzee tv\nlife ok\ndd national \netc bollywood\nzee anmol \n</code></pre>\n\n<p>i hope you can understand my problem from the result file. help me with a direct answer as im a newbie.  </p>\n"}, {"tags": ["ruby", "rabbitmq", "daemon", "amqp"], "answers": [{"tags": [], "owner": {"reputation": 331, "user_id": 284612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e033d0007374b14f6c213ede64d470b?s=128&d=identicon&r=PG", "display_name": "Kenneth Kalmer", "link": "https://stackoverflow.com/users/284612/kenneth-kalmer"}, "is_accepted": false, "score": 1, "last_activity_date": 1442434505, "creation_date": 1442434505, "answer_id": 32617868, "question_id": 32601724, "link": "https://stackoverflow.com/questions/32601724/daemon-kit-process-one-amqp-job-at-a-time/32617868#32617868", "title": "Daemon-kit process one amqp job at a time", "body": "<p>I'm taking a stab in the dark here, since this sounds to me exactly how the protocol should behave. You can however using <em>QoS</em> or <em>prefetching</em> to limit the number of messages sent down to a subscriber from the broker using something like this:</p>\n\n<p><code>amq = AMQP::Channel.new(connection, prefetch: 1)</code></p>\n\n<p>According to <a href=\"http://rubyamqp.info/articles/working_with_queues/#toc_22\" rel=\"nofollow\">the example</a> this should give you the behaviour your desire.</p>\n"}], "owner": {"reputation": 900, "user_id": 3194408, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/d9d478e261a504219e8e3dabc6114ca6?s=128&d=identicon&r=PG", "display_name": "mipmip", "link": "https://stackoverflow.com/users/3194408/mipmip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442515462, "creation_date": 1442386723, "last_edit_date": 1442515462, "question_id": 32601724, "link": "https://stackoverflow.com/questions/32601724/daemon-kit-process-one-amqp-job-at-a-time", "title": "Daemon-kit process one amqp job at a time", "body": "<p>We've used daemon-kit to create a amqp worker which should receive a job and then ask for a new job, but not before the first job is finished. The problem is that Daemon Kit forkes the job and immediately starts a new job if there is one in the RabbitMQ queue. </p>\n\n<p>Is there a formal way to force one-job-at-a-time-behaviour in daemon-kit? Or how can we achieve this?</p>\n\n<p>This is a short version of how we start the amqp worker and process jobs. When a job finishes with a result it publishes this back to the RabbitMQ server.</p>\n\n<pre><code># Run an event-loop for processing\nDaemonKit::AMQP.run do |connection|\n\n  connection.on_tcp_connection_loss do |client, settings|\n    DaemonKit.logger.debug(\"AMQP connection status changed: #{client.status}\")\n    client.reconnect(false, 1)\n  end\n\n  amq = AMQP::Channel.new\n\n  amq.queue(engine_key).subscribe do |metadata,msg|\n\n    msg_decode = JSON.parse(msg)\n\n    job = REFxEngineRunnerAPI10.new msg_decode\n    result = job.run(metadata.correlation_id)\n\n    amq.queue( metadata.reply_to, :auto_delete =&gt; false)\n\n    xc = amq.default_exchange\n    xc.publish JSON.dump(result), :routing_key =&gt; metadata.reply_to, :correlation_id =&gt; metadata.correlation_id\n  end\nend\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I found this to work for us:</p>\n\n<pre><code>DaemonKit::AMQP.run do |connection|\n\n  amq = AMQP::Channel.new(connection, prefetch: 1)\n  # I needs this extra line because I use RabbitMQ new than version 2.3.6\n  amq.qos(0, 1) \n\n  # be sure to add (:ack =&gt; true)\n  amq.queue(engine_key).subscribe(:ack =&gt; true) do |metadata,msg|\n\n    #### run long job one at a time\n\n    # Tell RabbitMQ I finished the job and I can now receive a new job\n    metadata.ack\n\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 1052, "user_id": 5153223, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2eb1e2066f49fd770286205385ad6d1?s=128&d=identicon&r=PG&f=1", "display_name": "Borsunho", "link": "https://stackoverflow.com/users/5153223/borsunho"}, "edited": false, "score": 0, "creation_date": 1442387337, "post_id": 32601266, "comment_id": 53055975, "body": "<code>#class</code> returns object&#39;s class, there is no clear concept of &#39;type&#39; in Ruby."}, {"owner": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "reply_to_user": {"reputation": 1052, "user_id": 5153223, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2eb1e2066f49fd770286205385ad6d1?s=128&d=identicon&r=PG&f=1", "display_name": "Borsunho", "link": "https://stackoverflow.com/users/5153223/borsunho"}, "edited": false, "score": 0, "creation_date": 1442394029, "post_id": 32601266, "comment_id": 53059866, "body": "i just used the word &quot;type / datatype&quot; since you have all kind of datatypes in other languages, where those are datatypes while these are classes in ruby"}, {"owner": {"reputation": 1052, "user_id": 5153223, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2eb1e2066f49fd770286205385ad6d1?s=128&d=identicon&r=PG&f=1", "display_name": "Borsunho", "link": "https://stackoverflow.com/users/5153223/borsunho"}, "edited": false, "score": 1, "creation_date": 1442402291, "post_id": 32601266, "comment_id": 53065146, "body": "Point is, Ruby is &quot;duck-typed&quot;, and so closest equivalent of object&#39;s &#39;type&#39; is it&#39;s singleton class, or method set, neither of which is returned by <code>#class</code>."}], "tags": [], "owner": {"reputation": 2210, "user_id": 1036696, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/wW4n9.png?s=128&g=1", "display_name": "Tim Kretschmer", "link": "https://stackoverflow.com/users/1036696/tim-kretschmer"}, "is_accepted": false, "score": 1, "last_activity_date": 1442385216, "creation_date": 1442385216, "answer_id": 32601266, "question_id": 32601254, "link": "https://stackoverflow.com/questions/32601254/what-is-the-difference-between-class-and-class/32601266#32601266", "title": "What is the difference between `Class` and `class`", "body": "<p>with <code>class Abc</code> you define a class.</p>\n\n<p><code>Abc.class</code> is returning the Type, and the type of Abc is a <code>Class</code></p>\n\n<p>another example:</p>\n\n<pre><code>1337.class\n=&gt; Fixnum\n\"hi babe!\".class\n=&gt; String\n12.55.class\n=&gt; Float\n(1..12).class\n=&gt; Range\n</code></pre>\n\n<p>so as you can see, each \"datatype\" is a class. in your case <code>Abc</code> is also a Datatype. And for the end of that chain, the class of a class is Class! :-)</p>\n"}, {"comments": [{"owner": {"reputation": 1036, "user_id": 4465049, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/92iYb.jpg?s=128&g=1", "display_name": "Chitra", "link": "https://stackoverflow.com/users/4465049/chitra"}, "edited": false, "score": 0, "creation_date": 1442389475, "post_id": 32601329, "comment_id": 53057162, "body": "You explanation is really appreciated but it would be nice if you could explain me the internal working from creating a class to calling its method."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 1036, "user_id": 4465049, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/92iYb.jpg?s=128&g=1", "display_name": "Chitra", "link": "https://stackoverflow.com/users/4465049/chitra"}, "edited": false, "score": 0, "creation_date": 1442390721, "post_id": 32601329, "comment_id": 53057865, "body": "@Chitra, do you mean how <code>bar</code> will be found when you invoke <code>foo.bar</code> ? Or how Ruby stores classes?"}, {"owner": {"reputation": 1036, "user_id": 4465049, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/92iYb.jpg?s=128&g=1", "display_name": "Chitra", "link": "https://stackoverflow.com/users/4465049/chitra"}, "edited": false, "score": 0, "creation_date": 1442399137, "post_id": 32601329, "comment_id": 53063185, "body": "Yes, and one more question is here like if we call a method with class&#39;s instance and that method is not declare within the class, from where we got this exception &quot;NoMethodError: &quot; how it is called and is there any way to override the existing class method and create a run time custom method. so that we can&#39;not get this exception &quot;NoMethodError:&quot; method again."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 1036, "user_id": 4465049, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/92iYb.jpg?s=128&g=1", "display_name": "Chitra", "link": "https://stackoverflow.com/users/4465049/chitra"}, "edited": false, "score": 0, "creation_date": 1442399833, "post_id": 32601329, "comment_id": 53063606, "body": "@Chitra, where <code>NoMethodError</code> originates from is the place you called it, are you asking how to get the stack trace? On a low level, it is probably complex, I would suggest you search places where the <a href=\"https://github.com/ruby/ruby/blob/f94ed2ce4bcf201a4d16a85f0fdbbfce4ea20e35/error.c#L1108\" rel=\"nofollow noreferrer\"><code>NoMethodError</code> is being created</a>. About how to define a method if it&#39;s missing - you can reopen the class or define a singleton class and define the method there. Also, if you are searching for a way to never throw <code>NoMethodError</code> no matter what method you call, you can use <code>BasicObject#method_missing</code>."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 1036, "user_id": 4465049, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/92iYb.jpg?s=128&g=1", "display_name": "Chitra", "link": "https://stackoverflow.com/users/4465049/chitra"}, "edited": false, "score": 0, "creation_date": 1442402016, "post_id": 32601329, "comment_id": 53064967, "body": "@Chitra, I created another answer, I hope it answers your remaining questions."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 14, "last_activity_date": 1442385438, "creation_date": 1442385438, "answer_id": 32601329, "question_id": 32601254, "link": "https://stackoverflow.com/questions/32601254/what-is-the-difference-between-class-and-class/32601329#32601329", "title": "What is the difference between `Class` and `class`", "body": "<p>There are three different things here:</p>\n\n<ol>\n<li><code>class</code> is a keyword, which is used to define or reopen a class</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Object.html#method-i-class\"><code>Object#class</code></a> is a method, which returns the class of a given object</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.0/Class.html\"><code>Class</code></a> is the class which all classes are an instance of (including <code>Class</code> itself)</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 2, "last_activity_date": 1442388139, "last_edit_date": 1495539894, "creation_date": 1442387171, "answer_id": 32601853, "question_id": 32601254, "link": "https://stackoverflow.com/questions/32601254/what-is-the-difference-between-class-and-class/32601853#32601853", "title": "What is the difference between `Class` and `class`", "body": "<p><a href=\"https://stackoverflow.com/a/32601329/477037\">ndn's answer</a> gives a nice overview of the different things \"class\" could refer to.</p>\n\n<p>To answer your specific question:</p>\n\n<blockquote>\n  <p>How does <code>Abc</code> internally become a class?</p>\n</blockquote>\n\n<p>Almost like any other object.</p>\n\n<pre><code>class Abc\nend\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>Abc = Class.new do\nend\n</code></pre>\n\n<p>It creates a new instance of <code>Class</code> and assigns it to the constant <code>Abc</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1052, "user_id": 5153223, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2eb1e2066f49fd770286205385ad6d1?s=128&d=identicon&r=PG&f=1", "display_name": "Borsunho", "link": "https://stackoverflow.com/users/5153223/borsunho"}, "is_accepted": false, "score": 0, "last_activity_date": 1442387897, "creation_date": 1442387897, "answer_id": 32602079, "question_id": 32601254, "link": "https://stackoverflow.com/questions/32601254/what-is-the-difference-between-class-and-class/32602079#32602079", "title": "What is the difference between `Class` and `class`", "body": "<p>Answering second par of the question, <code>undefined class method</code> happens when method you called is not present in such class - classes are just objects in Ruby, and as such they have their own set of methods. Ruby has several ways to define class methods, most common is probably</p>\n\n<pre><code>class Klass\n  def self.klass_method\n    ...\n  end\nend\n</code></pre>\n\n<p>the other is</p>\n\n<pre><code>class Klass\n  #  some ordinary instance methods here\n  class &lt;&lt; self\n    def klass_method\n      # this is class method\n    end\n  end\nend\n</code></pre>\n\n<p>Some Rubyists prefer the latter, as it keeps all class methods in single block, but they are equivalent.</p>\n"}, {"comments": [{"owner": {"reputation": 1036, "user_id": 4465049, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/92iYb.jpg?s=128&g=1", "display_name": "Chitra", "link": "https://stackoverflow.com/users/4465049/chitra"}, "edited": false, "score": 0, "creation_date": 1442402404, "post_id": 32606998, "comment_id": 53065216, "body": "Thank you so much for your lovely explanation."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1453539812, "last_edit_date": 1495535275, "creation_date": 1442401955, "answer_id": 32606998, "question_id": 32601254, "link": "https://stackoverflow.com/questions/32601254/what-is-the-difference-between-class-and-class/32606998#32606998", "title": "What is the difference between `Class` and `class`", "body": "<p>To see what the different <em>\"class\"</em> things in Ruby mean, check out <a href=\"https://stackoverflow.com/a/32601329/2423164\">my other answer</a>.</p>\n\n<hr>\n\n<p>As for how methods are looked up:</p>\n\n<p>There are multiple places a method can come from:</p>\n\n<ol>\n<li>The class of the object</li>\n<li>The parent of the class of the object</li>\n<li>Modules, which are included/prepended</li>\n<li>The singleton class of the object</li>\n</ol>\n\n<p>The order of lookup is the following:</p>\n\n<ol>\n<li>If it exists, the singleton class</li>\n<li>Prepended modules</li>\n<li>Methods defined in the class</li>\n<li>Included modules</li>\n<li>Recursively, the above rules for the parent class</li>\n</ol>\n\n<p>There are a few things that have to be noted here:</p>\n\n<ol>\n<li>If multiple modules are included/prepended, they will be looked up in the reverse order of how they were included/prepended</li>\n<li>If a module was already included/prepended in one of the parrents, it won't be included/prepended again</li>\n<li>If using these rules the method was not found til the very start of the hierarchy (<code>BasicObject</code>), the ancestor chain is searched again for a different method, called <code>method_missing</code></li>\n<li><code>BasicObject#method_missing</code> is defined so that it throws a <code>NoMethodError</code> and that is where the error comes from</li>\n</ol>\n\n<hr>\n\n<pre><code>module M1\n  def foo\n    puts 'Defined in M1'\n  end\nend\n\nmodule M2\n  def foo\n    puts 'Defined in M2'\n  end\nend\n\nclass C\n  include M1\n  prepend M2\n\n  def foo\n    puts 'Defined in C'\n  end\n\n  def method_missing(method_name)\n    puts 'Method missing' if method_name == :foo\n  end\nend\n\nc = C.new\n\n# singleton method\ndef c.foo\n  puts \"Defined in c's singleton\"\nend\n\nputs c.singleton_class.ancestors\n  # =&gt; [#&lt;Class:#&lt;C:0xa2d0f8&gt;&gt;, M2, C, M1, Object, Kernel, BasicObject]\n  #     ^ the singleton class,\n  #       the prepended module,\n  #       the C class itself,\n  #       the included module,\n  #       the rest of the hierarchy\n  # (Object is the implicit parent of all classes with no explicit parent)\n</code></pre>\n"}], "owner": {"reputation": 1036, "user_id": 4465049, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/92iYb.jpg?s=128&g=1", "display_name": "Chitra", "link": "https://stackoverflow.com/users/4465049/chitra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 1, "accepted_answer_id": 32606998, "answer_count": 5, "score": 1, "last_activity_date": 1453539812, "creation_date": 1442385144, "last_edit_date": 1442386474, "question_id": 32601254, "link": "https://stackoverflow.com/questions/32601254/what-is-the-difference-between-class-and-class", "title": "What is the difference between `Class` and `class`", "body": "<p>While creating a class, we use the keyword <code>class</code> like:</p>\n\n<pre><code>class Abc\n  Z = 5\n  def add\n    puts \"anything here\"\n  end\nend\n</code></pre>\n\n<p>In console, <code>Abc.class # =&gt; Class</code></p>\n\n<p>How does <code>Abc</code> internally become a class? What is the difference between <code>class</code> and <code>Class</code>?</p>\n\n<p>It would be great if anyone could explain how class constants and method are internally called, and if a method is not defined, then how we get the exception <code>\"undefined class method\"</code>. What is the internal logic behind it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "neo4j", "searchkick", "neo4j.rb"], "comments": [{"owner": {"reputation": 569, "user_id": 5268327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fsYqc.jpg?s=128&g=1", "display_name": "Asad Ali", "link": "https://stackoverflow.com/users/5268327/asad-ali"}, "edited": false, "score": 0, "creation_date": 1442386737, "post_id": 32601105, "comment_id": 53055631, "body": "it think text_start missing &quot;:&quot; for last name"}], "answers": [{"comments": [{"owner": {"reputation": 2871, "user_id": 610796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/825808ddae9004f1d45becff8583b094?s=128&d=identicon&r=PG", "display_name": "Musannif Zahir", "link": "https://stackoverflow.com/users/610796/musannif-zahir"}, "edited": false, "score": 0, "creation_date": 1442392994, "post_id": 32603469, "comment_id": 53059171, "body": "good catch but I&#39;m having the same issue with <code>Person.search(&quot;Ba&quot;, fields: [{first_name: :text_start}, {last_name: :text_start}])</code>"}, {"owner": {"reputation": 10388, "user_id": 632454, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94593f750fbdbcfe459d7d16f45780e1?s=128&d=identicon&r=PG", "display_name": "Brian Underwood", "link": "https://stackoverflow.com/users/632454/brian-underwood"}, "reply_to_user": {"reputation": 2871, "user_id": 610796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/825808ddae9004f1d45becff8583b094?s=128&d=identicon&r=PG", "display_name": "Musannif Zahir", "link": "https://stackoverflow.com/users/610796/musannif-zahir"}, "edited": false, "score": 1, "creation_date": 1442393360, "post_id": 32603469, "comment_id": 53059401, "body": "Hrmm, I&#39;m not sure.  The docs seem to indicate that something like that would work.  Do you have the <code>word_start</code> specified in the <code>searchkick</code> call?  This is what it shows for one field: <code>searchkick word_start: [:name]</code>"}, {"owner": {"reputation": 2871, "user_id": 610796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/825808ddae9004f1d45becff8583b094?s=128&d=identicon&r=PG", "display_name": "Musannif Zahir", "link": "https://stackoverflow.com/users/610796/musannif-zahir"}, "edited": false, "score": 0, "creation_date": 1442393497, "post_id": 32603469, "comment_id": 53059515, "body": "Thanks, that was it. I had removed <code>last_name</code> from the <code>searchkick</code> call during debugging and it was ultimately the missing <code>{}</code> that caused the issue."}, {"owner": {"reputation": 10388, "user_id": 632454, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94593f750fbdbcfe459d7d16f45780e1?s=128&d=identicon&r=PG", "display_name": "Brian Underwood", "link": "https://stackoverflow.com/users/632454/brian-underwood"}, "reply_to_user": {"reputation": 2871, "user_id": 610796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/825808ddae9004f1d45becff8583b094?s=128&d=identicon&r=PG", "display_name": "Musannif Zahir", "link": "https://stackoverflow.com/users/610796/musannif-zahir"}, "edited": false, "score": 0, "creation_date": 1442393627, "post_id": 32603469, "comment_id": 53059605, "body": "Yay, nice.  Good luck! ;)"}], "tags": [], "owner": {"reputation": 10388, "user_id": 632454, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94593f750fbdbcfe459d7d16f45780e1?s=128&d=identicon&r=PG", "display_name": "Brian Underwood", "link": "https://stackoverflow.com/users/632454/brian-underwood"}, "is_accepted": true, "score": 2, "last_activity_date": 1442392369, "creation_date": 1442392369, "answer_id": 32603469, "question_id": 32601105, "link": "https://stackoverflow.com/questions/32601105/how-can-i-have-searchkick-autocomplete-on-multiple-fields/32603469#32603469", "title": "How can I have searchkick autocomplete on multiple fields?", "body": "<p>I'm not too familiar with it, but I think so.  From the docs:</p>\n\n<p><a href=\"https://github.com/ankane/searchkick#autocomplete\" rel=\"nofollow\">https://github.com/ankane/searchkick#autocomplete</a></p>\n\n<pre><code>City.search \"san fr\", fields: [{name: :text_start}]\n</code></pre>\n\n<p>That seems to imply that you can give an Array of Hashes.  When you don't specify the squiggly brackets like you do that will make one Array with one Hash.</p>\n"}], "owner": {"reputation": 2871, "user_id": 610796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/825808ddae9004f1d45becff8583b094?s=128&d=identicon&r=PG", "display_name": "Musannif Zahir", "link": "https://stackoverflow.com/users/610796/musannif-zahir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 0, "accepted_answer_id": 32603469, "answer_count": 1, "score": 1, "last_activity_date": 1442393595, "creation_date": 1442384432, "last_edit_date": 1442393595, "question_id": 32601105, "link": "https://stackoverflow.com/questions/32601105/how-can-i-have-searchkick-autocomplete-on-multiple-fields", "title": "How can I have searchkick autocomplete on multiple fields?", "body": "<p>Is it possible to use multiple fields for searchkick's autocomplete feature? It seems to be searching only the first field specified.</p>\n\n<p>For example, for a person with the <code>first_name</code> \"Foo\" and <code>last_name</code> \"Bar\"</p>\n\n<p><code>Person.search(\"Fo\", fields: [first_name: :text_start, last_name: :text_start])</code>\n- <em>returns result</em></p>\n\n<p><code>Person.search(\"Ba\", fields: [first_name: :text_start, last_name: :text_start])</code> - <em>no results found</em></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "edited": false, "score": 0, "creation_date": 1442382218, "post_id": 32599570, "comment_id": 53053646, "body": "If these are ActiveRecord objects, you don&#39;t have to use <code>send</code>. You can access the attributes like that from a Hash <code>@member.academic[a]</code>"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1442393559, "post_id": 32599570, "comment_id": 53059561, "body": "Did you read the error message? You are trying to call a method named <code>academic.major</code>. Does that method exist? If not, you need to define it. Note, however, that <code>.</code> is not a legal character in an Ruby identifier, so you cannot define that method with <code>def</code>, you have to use reflection (i.e. <code>define_method</code>). You also cannot call it with <code>.</code>, you have to use reflection (i.e. <code>send</code>)."}, {"owner": {"reputation": 65, "user_id": 1062101, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100000670174414/picture?type=large", "display_name": "Vinicius Martinson", "link": "https://stackoverflow.com/users/1062101/vinicius-martinson"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1442437172, "post_id": 32599570, "comment_id": 53087767, "body": "Yes it does, @sawa edited the proof that I wrote, but here it goes again: if I write <code>&lt;% @member.academic.major %&gt;</code> it works perfectly. Did you down voted, @J&#246;rgWMittag?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1442437369, "post_id": 32599570, "comment_id": 53087868, "body": "@ViniciusMartinson That does not prove what you think you are. <code>.academic.major</code> after <code>@member</code> is a sequence of two methods applied one after another. It is not a single method. That is what J&#246;rgWMittag is mentioning. And voting is anonymous. You are not supposed to ask whether one down/upvoted."}, {"owner": {"reputation": 65, "user_id": 1062101, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100000670174414/picture?type=large", "display_name": "Vinicius Martinson", "link": "https://stackoverflow.com/users/1062101/vinicius-martinson"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1442448593, "post_id": 32599570, "comment_id": 53091613, "body": "@sawa, oh ok, I get it. Thank you and accept my apologies if I broke any rules of this community."}], "answers": [{"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1442376635, "post_id": 32599596, "comment_id": 53051750, "body": "The <code>to_s</code> is unnecessary."}, {"owner": {"reputation": 1958, "user_id": 515991, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/319b6176a2b56541cbf44182fd3987a1?s=128&d=identicon&r=PG&f=1", "display_name": "usmanali", "link": "https://stackoverflow.com/users/515991/usmanali"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1442376669, "post_id": 32599596, "comment_id": 53051763, "body": "My bad, didn&#39;t notice that"}], "tags": [], "owner": {"reputation": 1958, "user_id": 515991, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/319b6176a2b56541cbf44182fd3987a1?s=128&d=identicon&r=PG&f=1", "display_name": "usmanali", "link": "https://stackoverflow.com/users/515991/usmanali"}, "is_accepted": true, "score": 4, "last_activity_date": 1455859604, "last_edit_date": 1455859604, "creation_date": 1442376364, "answer_id": 32599596, "question_id": 32599570, "link": "https://stackoverflow.com/questions/32599570/using-send-with-complex-string/32599596#32599596", "title": "Using `send` with complex string", "body": "<p>Try this</p>\n\n<pre><code>&lt;% fields_academic.each do |a| %&gt;\n  &lt;%= @member.academic.send(a.to_s) %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 1062101, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100000670174414/picture?type=large", "display_name": "Vinicius Martinson", "link": "https://stackoverflow.com/users/1062101/vinicius-martinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 32599596, "answer_count": 1, "score": -1, "last_activity_date": 1455859604, "creation_date": 1442376169, "last_edit_date": 1442383051, "question_id": 32599570, "link": "https://stackoverflow.com/questions/32599570/using-send-with-complex-string", "title": "Using `send` with complex string", "body": "<p>This code:</p>\n\n<pre><code>&lt;% fields_academic = [:major, :second_major] %&gt;\n&lt;% fields_academic.each do |a| %&gt;\n   &lt;%= @member.send(\"academic.#{a}\".to_s) %&gt;\n&lt;% end %&gt;`\n</code></pre>\n\n<p>gives me this error:</p>\n\n<pre><code>undefined method 'academic.major' for #&lt;Member:0x007ffd0bb72158&gt;\n</code></pre>\n\n<p>Any help will be appreciated.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1442379463, "post_id": 32599550, "comment_id": 53052651, "body": "Can you post the full controller code?"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 5066482, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9d3144a513e9e3699bcaa9e2f56e9d2?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/5066482/david"}, "edited": false, "score": 0, "creation_date": 1442449497, "post_id": 32600173, "comment_id": 53091802, "body": "Thanks, that&#39;s what I was missing.  I still get the &#39;Unpermitted parameter: zipcodes&#39; in the console but it&#39;s saving to the DB.  I changed the permit entry to just &#39;:zipcodes&#39; and removed it completely but all 3 have the same result.  I&#39;m not sure what&#39;s going on there at the moment."}, {"owner": {"reputation": 75, "user_id": 5066482, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9d3144a513e9e3699bcaa9e2f56e9d2?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/5066482/david"}, "edited": false, "score": 0, "creation_date": 1442457847, "post_id": 32600173, "comment_id": 53093760, "body": "I added this line to the controller:  <code>@provider.zipcodes = JSON.parse(params[:provider].delete(:zipcodes))</code> in both the Create and Update methods and removed <code>:zipcodes</code> from the params list.  The error went away on the Update but still says <code>Unpermitted parameter: zipcodes</code> during the Create action.  The values are still saving to the DB though so I&#39;m not going to worry about this too much now.  Thanks again!"}], "tags": [], "owner": {"reputation": 4180, "user_id": 1691511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36bf62da744cbd07d704eb3d0b27439?s=128&d=identicon&r=PG", "display_name": "ahmacleod", "link": "https://stackoverflow.com/users/1691511/ahmacleod"}, "is_accepted": true, "score": 1, "last_activity_date": 1442450466, "last_edit_date": 1442450466, "creation_date": 1442379880, "answer_id": 32600173, "question_id": 32599550, "link": "https://stackoverflow.com/questions/32599550/use-javascript-to-generate-rails-text-array/32600173#32600173", "title": "Use Javascript to generate Rails Text Array", "body": "<p>The output from the console,</p>\n\n<pre><code>\"provider\"=&gt;{\"zipcodes\"=&gt;\"[\\\"\\\",\\\"90210\\\",\\\"90211\\\",\\\"90212\\\"]\"\n</code></pre>\n\n<p>is exactly what you should expect. Your javascript code encodes the array as a string and submits it through a hidden field, so <code>params[:provider][:zipcodes]</code> is a string in your controller. In order to assign it to your model, you'll need to do something like</p>\n\n<pre><code>provider.zipcodes = JSON.parse(params[:provider][:zipcodes])\n</code></pre>\n\n<p>The <code>Unpermitted parameter: zipcodes</code> message is most likely because you are mass-assigning to your model without whitelisting or removing the <code>zipcodes</code> key from your params hash.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>To get around the strong parameters, try deleting the <code>zipcodes</code> key.</p>\n\n<pre><code>provider.zipcodes = JSON.parse(params[:provider].delete(:zipcodes))\n\nsafe_params = params.require(:provider).permit(:any, :other, :fields)\nprovider.update!(safe_params)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "is_accepted": false, "score": 0, "last_activity_date": 1442385931, "creation_date": 1442385931, "answer_id": 32601468, "question_id": 32599550, "link": "https://stackoverflow.com/questions/32599550/use-javascript-to-generate-rails-text-array/32601468#32601468", "title": "Use Javascript to generate Rails Text Array", "body": "<p>Instead of this line:</p>\n\n<pre><code>$(\"#zipcodes-hidden-tag\").val(\"[\" + '\"\",' + '\"' + array.join('\",\"') + '\"' + \"]\");\n</code></pre>\n\n<p>if you change it to:</p>\n\n<pre><code>$(\"#zipcodes-hidden-tag\").val('\"' + array.join('\",\"')); \n</code></pre>\n\n<p>then you will have values as: <code>\"979794,297942,24444\"</code></p>\n\n<p>Which would make it super easy to convert into an array in your controller:</p>\n\n<pre><code>params[:provider][:zipcodes].split(',') \n#=&gt; [\"979794\", \"297942\", \"24444\"]\n</code></pre>\n\n<p>Which can be:</p>\n\n<pre><code>params[:provider][:zipcodes] = params[:provider][:zipcodes].split(',')\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 5066482, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a9d3144a513e9e3699bcaa9e2f56e9d2?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/5066482/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 32600173, "answer_count": 2, "score": 1, "last_activity_date": 1442450466, "creation_date": 1442375993, "last_edit_date": 1442376344, "question_id": 32599550, "link": "https://stackoverflow.com/questions/32599550/use-javascript-to-generate-rails-text-array", "title": "Use Javascript to generate Rails Text Array", "body": "<p>I am attempting to write some JavaScript that allows a user to enter a zip code one at a time and build up an array that will be submitted to a Rails app.  </p>\n\n<p>Here are the relevant pieces:</p>\n\n<p><strong>Controller.rb - Params</strong></p>\n\n<pre><code>    {:zipcodes =&gt; []} \n</code></pre>\n\n<p><strong>Schema.rb</strong></p>\n\n<pre><code>    t.text     \"zipcodes\",       default: [],              array: true\n</code></pre>\n\n<p><strong>html.erb</strong> <em>The javascript updates the value of a hidden element</em></p>\n\n<pre><code>    &lt;%= f.hidden_field :zipcodes, id:\"zipcodes-hidden-tag\", name:\"provider[zipcodes]\" %&gt;\n</code></pre>\n\n<p><strong>js.erb file</strong></p>\n\n<pre><code>    //Adding a zipcode\n     var array = []; \n     $(\"#addZipcode\").click(\n\n    function addZipcode() {\n\n        x = $(\"#newZipcode\").val();  // gets the zipcode entered by the user\n        array.push(x);\n        $(\"#zipcode_div\").text(array);  // updates a div so the user can see the data entered\n        $(\"#newZipcode\").val(\"\");  //clear the zipcode box after submitting\n        $(\"#zipcodes-hidden-tag\").val(\"[\" + '\"\",' + '\"' + array.join('\",\"') + '\"' + \"]\");  //puts the brackets, empty quote block, and quotes around the elements and updates the hidden field value\n    }); //Adding a zipcode  \n</code></pre>\n\n<p>This is how it looks in the Rails console when it is successful (using a multi-select field):</p>\n\n<pre><code>    \"provider\"=&gt;{\"zipcodes\"=&gt;[\"\", \"90210\", \"90211\", \"90212\"],\n</code></pre>\n\n<p>When using the Javascript generated array, I can see the following value getting passed to Rails which is the correct formatting</p>\n\n<pre><code>    [\"\",\"90210\",\"90211\",\"90212\"] \n</code></pre>\n\n<p>But in the Rails console, it's coming through like this:</p>\n\n<pre><code>   \"provider\"=&gt;{\"zipcodes\"=&gt;\"[\\\"\\\",\\\"90210\\\",\\\"90211\\\",\\\"90212\\\"]\"\n</code></pre>\n\n<p>And Rails is stating</p>\n\n<pre><code>    Unpermitted parameter: zipcodes\n</code></pre>\n\n<p>I feel like there are two problems at play here.  An extra set of quotes are getting added to the beginning and end of the brackets:</p>\n\n<pre><code>    \"[  ...   ]\"    \n</code></pre>\n\n<p>And the double quotes are getting converted into literals with the back slashes. </p>\n\n<p>Any thoughts on what I need to change to get this to work?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "oop"], "answers": [{"tags": [], "owner": {"reputation": 744, "user_id": 1885107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f3cb4e9a996ab41c7980d6954dfb68d?s=128&d=identicon&r=PG", "display_name": "Prakash Laxkar", "link": "https://stackoverflow.com/users/1885107/prakash-laxkar"}, "is_accepted": true, "score": 2, "last_activity_date": 1474322501, "last_edit_date": 1474322501, "creation_date": 1442375059, "answer_id": 32599393, "question_id": 32599166, "link": "https://stackoverflow.com/questions/32599166/missing-keywords-error-on-initializing-a-constructor/32599393#32599393", "title": "Missing keywords error on initializing a constructor", "body": "<p>I think you are doing it wrong with the <code>def initialize</code> method. You don't want parameterized constructor just removed it.\nif you want this as well then you need to handle this for null values also.\nJust creating a default constructor will not solve the issue because it will be override with other one.</p>\n\n<p>You can try like this</p>\n\n<pre><code>def initialize(options ={})\n  @source_name = options[:source_name] if options[:source_name].present?\n  #handle and assign other keys and values similer to this\n  @@array &lt;&lt; self\nend\n</code></pre>\n\n<p>now you can use this as</p>\n\n<pre><code>@get_Articles = Source.new\n</code></pre>\n\n<p>or </p>\n\n<pre><code>@get_Articles = Source.new(source_name: \"abc\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6836, "user_id": 458044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c8c35f1a799c3905fc0cab4e030803d?s=128&d=identicon&r=PG", "display_name": "Naren Sisodiya", "link": "https://stackoverflow.com/users/458044/naren-sisodiya"}, "is_accepted": false, "score": 2, "last_activity_date": 1442377938, "creation_date": 1442377938, "answer_id": 32599836, "question_id": 32599166, "link": "https://stackoverflow.com/questions/32599166/missing-keywords-error-on-initializing-a-constructor/32599836#32599836", "title": "Missing keywords error on initializing a constructor", "body": "<p>First of all, the way you are trying to overload initialize method is incorrect. In ruby if you define the same method again in same class then the most latest interpretation will take preceding(based on when it get interpreted). So here initialize with parameter taking preceding. </p>\n\n<p>There are many ways to overload a method based on parameters</p>\n\n<p><strong>Approach one</strong>: define method with default value assignment like below</p>\n\n<pre><code> def initialize(source_name = nil, source_url = nil, source_type = nil, source_key= nil, tag_name = nil) \n\n end \n</code></pre>\n\n<p>In this approach the sequence of arguments does matter when invoking. i.e we can not invoke method with only tag_name the other values should also be passed as some value or nil</p>\n\n<pre><code>like  Source.new nil, nil, nil, nil, 'tag_name_value'\n</code></pre>\n\n<p><strong>Approach two:</strong> Using Hash as arguments (mentioned by @Prakash): This is the most popular and generic. In this we need to explicitly check for required argument name and need to assign default values to them if needed. This is mostly done by hash merging</p>\n\n<pre><code>def initialize(options ={})\n  options = {source_name: nil, source_url: nil, source_type: nil, source_key: nil, tag_name: nil}.merge(options)\n\nend\n\n  # calling method   \n  Source.new source_name: 'somevalue' #or so one\n</code></pre>\n\n<p>The disadvantage of this approach is there can be many keys in hash passed to method and to handle that you need to do extra check on input hash</p>\n\n<pre><code>  Source.new source_name: 'somevalue', unexpected_key: 'unexpectedvalue'\n</code></pre>\n\n<p><strong>Approach three</strong>\nRuby 2.0 has introduced the keyword arguments (also named argument in ruby 1.9) where you can provide a name to parameters like you were trying, the only thing you should keep in mind is to assign a default value to every parameter.</p>\n\n<pre><code>    def initialize(source_name: nil, source_url: nil, source_type: nil, source_key: nil, tag_name: nil) \n\n    end \n</code></pre>\n\n<p>now you can invoke like</p>\n\n<pre><code>Source.new \nSource.new source_url: 'somevalue'\nSource.new source_name: 'somevalue'\nSource.new source_type: 'somevalue', source_name: 'somevalue'\nSource.new tag_name: 'somevalue'\n# or any combination of arguments in any sequence \n# but not the following, this give you error 'unknown keyword: unexpected_key'\nSource.new tag_name: 'somevalue', unexpected_key: 'unexpectedvalue'\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 4824551, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1552647931a56aeb22f3ef61d1fd7a07?s=128&d=identicon&r=PG&f=1", "display_name": "coder05", "link": "https://stackoverflow.com/users/4824551/coder05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5345, "favorite_count": 0, "accepted_answer_id": 32599393, "answer_count": 2, "score": 1, "last_activity_date": 1474322501, "creation_date": 1442373278, "last_edit_date": 1442373623, "question_id": 32599166, "link": "https://stackoverflow.com/questions/32599166/missing-keywords-error-on-initializing-a-constructor", "title": "Missing keywords error on initializing a constructor", "body": "<p>I have a Source model and ArticlesController. When user clicks scrape button, the control is passed to below mentioned <code>ArticlesController#Scrape</code>. The scrape then calls Source model where the sources are being initialised and the list of articles are returned in a form of hash to <code>articles</code> inside <code>Scrape</code>.\nSource Model -</p>\n\n<pre><code>class Source\n    attr_accessor :source_name, :source_url, :source_type, :source_key, :tag_name\n\n    def self.all_instances\n      @@array\n    end\n\n    # Default constructor\n    def initialize\n\n    end\n\n    def initialize(source_name:, source_url:, source_type:, source_key:, tag_name:)\n        @source_name = source_name\n        @source_url = source_url\n        @source_type = source_type\n        @source_key = source_key\n        @tag_name = tag_name\n        @@array &lt;&lt; self\n    end\n    def init\n\n        self.new('The Age',\n                 'http://www.theage.com.au/rssheadlines/victoria/article/rss.xml',\n                 'RSS',\n                 '',\n                 'Victoria News')\n    end\n\n    def import\n        init()\n        //returns hash of articles back\n    end\nend \n\nclass ArticlesController &lt; ApplicationController\n    def scrape\n        @get_Articles = Source.new\n        articles = @get_Articles.import\n        //stores articles in article model\n        //redirect to article path\n    end\nend\n</code></pre>\n\n<p>I am getting ArgumentError in <code>ArticlesController#scrape</code> on <code>@get_Articles = Source.new</code></p>\n\n<p>Inside Source class the constructor <code>def initialize(source_name:, source_url:, source_type:, source_key:, tag_name:)</code> is being called. To rectify the issue I created a default constructor also, so that the parameterized constructor doesn't get called. However, I am not sure how to fix this problem. Could somebody please help?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "pg"], "comments": [{"owner": {"reputation": 257364, "user_id": 398670, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85f50c23bb5e9dfb061af5032bfe8e65?s=128&d=identicon&r=PG", "display_name": "Craig Ringer", "link": "https://stackoverflow.com/users/398670/craig-ringer"}, "edited": false, "score": 1, "creation_date": 1442370401, "post_id": 32598648, "comment_id": 53050279, "body": "It looks like the json field is being passed a YAML value, not JSON."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 257364, "user_id": 398670, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85f50c23bb5e9dfb061af5032bfe8e65?s=128&d=identicon&r=PG", "display_name": "Craig Ringer", "link": "https://stackoverflow.com/users/398670/craig-ringer"}, "edited": false, "score": 1, "creation_date": 1442378034, "post_id": 32598648, "comment_id": 53052179, "body": "What does your <code>Event</code> model look like? @CraigRinger&#39;s correct observation suggests to me that you have <code>serialize :json</code> in your model."}, {"owner": {"reputation": 51, "user_id": 5340298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cd759780a11e6ef8571ae72d24800d9?s=128&d=identicon&r=PG&f=1", "display_name": "jayengee", "link": "https://stackoverflow.com/users/5340298/jayengee"}, "reply_to_user": {"reputation": 257364, "user_id": 398670, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85f50c23bb5e9dfb061af5032bfe8e65?s=128&d=identicon&r=PG", "display_name": "Craig Ringer", "link": "https://stackoverflow.com/users/398670/craig-ringer"}, "edited": false, "score": 0, "creation_date": 1442384462, "post_id": 32598648, "comment_id": 53054532, "body": "@CraigRinger and @muistooshort I&#39;ve added in the model as suggested. I did indeed have <code>serialize :json</code> in my model. I think I had added that initially in an effort to address the same issue. Removing seems to throw the same error, unfortunately."}, {"owner": {"reputation": 2424, "user_id": 4604645, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yQczD.png?s=128&g=1", "display_name": "The Fabio", "link": "https://stackoverflow.com/users/4604645/the-fabio"}, "edited": false, "score": 0, "creation_date": 1442385180, "post_id": 32598648, "comment_id": 53054881, "body": "What rails version are you using?"}, {"owner": {"reputation": 51, "user_id": 5340298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cd759780a11e6ef8571ae72d24800d9?s=128&d=identicon&r=PG&f=1", "display_name": "jayengee", "link": "https://stackoverflow.com/users/5340298/jayengee"}, "edited": false, "score": 0, "creation_date": 1442394792, "post_id": 32598648, "comment_id": 53060365, "body": "@fabio Rails 3.2.17 <b>EDIT</b> think I see what the issue is - according to <a href=\"http://guides.rubyonrails.org/4_2_release_notes.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/4_2_release_notes.html</a>, it doesn&#39;t seem like the jsonb type is supported by the rails connector until rails 4.2. I&#39;m going to upgrade to 4.2 and see if that resolves the issue."}, {"owner": {"reputation": 51, "user_id": 5340298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cd759780a11e6ef8571ae72d24800d9?s=128&d=identicon&r=PG&f=1", "display_name": "jayengee", "link": "https://stackoverflow.com/users/5340298/jayengee"}, "edited": false, "score": 0, "creation_date": 1442567891, "post_id": 32598648, "comment_id": 53143834, "body": "Yup, after upgrading the rails 4.2.4, that error seemed to have been addressed. Having a different issue now with the same command, but will post separately for that."}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 5340298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cd759780a11e6ef8571ae72d24800d9?s=128&d=identicon&r=PG&f=1", "display_name": "jayengee", "link": "https://stackoverflow.com/users/5340298/jayengee"}, "is_accepted": true, "score": 1, "last_activity_date": 1442567988, "creation_date": 1442567988, "answer_id": 32648353, "question_id": 32598648, "link": "https://stackoverflow.com/questions/32598648/token-is-invalid-when-inserting-into-postgresql-server-via-rails-and-pg-ge/32648353#32648353", "title": "&#39;Token &quot;-&quot; is invalid&#39; when inserting into PostgreSQL server via Rails and pg gem", "body": "<p>Turns out it was the incompatibility of the postgres connector in rails 3.2.17 with jsonb objects. After upgrading to 4.2.4, the error stopped cropping up.</p>\n"}], "owner": {"reputation": 51, "user_id": 5340298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cd759780a11e6ef8571ae72d24800d9?s=128&d=identicon&r=PG&f=1", "display_name": "jayengee", "link": "https://stackoverflow.com/users/5340298/jayengee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2952, "favorite_count": 0, "accepted_answer_id": 32648353, "answer_count": 1, "score": 4, "last_activity_date": 1442567988, "creation_date": 1442369701, "last_edit_date": 1442384299, "question_id": 32598648, "link": "https://stackoverflow.com/questions/32598648/token-is-invalid-when-inserting-into-postgresql-server-via-rails-and-pg-ge", "title": "&#39;Token &quot;-&quot; is invalid&#39; when inserting into PostgreSQL server via Rails and pg gem", "body": "<p>I've recently started experimenting with setting up a new local PostgreSQL server, hooked up to an existing Rails app. I have a table I am trying to insert to:</p>\n\n<pre><code>postgres=# \\d+ events.t_sales_events\n                                                             Table \"events.t_sales_events\"\n   Column   |            Type             |                              Modifiers                              | Storage  | Stats target | Description \n------------+-----------------------------+---------------------------------------------------------------------+----------+--------------+-------------\n id         | integer                     | not null default nextval('events.t_sales_events_id_seq'::regclass) | plain    |              | \n event_name | character varying(45)       | not null                                                            | extended |              | \n actor_id   | integer                     |                                                                     | plain    |              | \n actor_type | character varying(45)       |                                                                     | extended |              | \n json       | jsonb                       |                                                                     | extended |              | \n created    | timestamp without time zone | not null                                                            | plain    |              | \n modified   | timestamp without time zone | not null                                                            | plain    |              | \n deleted    | timestamp without time zone |                                                                     | plain    |              | \n timestamp  | timestamp without time zone | not null                                                            | plain    |              | \n context    | text                        |                                                                     | extended |              | \nIndexes:\n    \"t_sales_events_pkey\" PRIMARY KEY, btree (id)\n</code></pre>\n\n<p>This is an example of an event that I'm trying to insert into t_sales_events:</p>\n\n<pre><code>event =\n    {\n        :event_name =&gt; \"lead_created\",\n           :context =&gt; nil,\n        :actor_type =&gt; \"sales_user\",\n         :timestamp =&gt; \"2013-03-18T07:13:42.000+0000\",\n              :json =&gt; {\n                       :dc_id =&gt; \"00AA000000AAaaAAaa1\",\n                          :name =&gt; \"John Doe\",\n                         :title =&gt; \"CEO\",\n                          :role =&gt; nil,\n                         :phone =&gt; nil,\n                       :company =&gt; \"Does Does\",\n                         :email =&gt; \"jdoe@doesdoes.com\",\n                   :dc_source =&gt; nil,\n                       :lead_id =&gt; nil\n        },\n          :actor_id =&gt; nil,\n           :created =&gt; 2015-09-15 18:32:25 -0700,\n          :modified =&gt; 2015-09-15 18:32:33 -0700\n    }\n</code></pre>\n\n<p>And this is the error I get when I run SalesEvent.create(event):(0.2ms)  </p>\n\n<pre><code>BEGIN\n  SQL (4.0ms)  INSERT INTO \"events\".\"t_sales_events\" (\"actor_id\", \"actor_type\", \"context\", \"created\", \"deleted\", \"event_name\", \"json\", \"modified\", \"timestamp\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING \"id\"  [[\"actor_id\", nil], [\"actor_type\", \"sales_user\"], [\"context\", nil], [\"created\", Wed, 16 Sep 2015 01:32:25 UTC +00:00], [\"deleted\", nil], [\"event_name\", \"lead_created\"], [\"json\", \"---\\n:sfdc_id: 00AA000000AAaaAAaa1\\n:name: John Doe\\n:title: CEO\\n:role: \\n:phone: \\n:company: Does Does\\n:email: jdoe@doesdoes.com\\n:lead_id: \\n\"], [\"modified\", Wed, 16 Sep 2015 01:32:33 UTC +00:00], [\"timestamp\", Mon, 18 Mar 2013 07:13:42 UTC +00:00]]\nPG::InvalidTextRepresentation: ERROR:  invalid input syntax for type json\nDETAIL:  Token \"-\" is invalid.\nCONTEXT:  JSON data, line 1: -...\n: INSERT INTO \"events\".\"t_sales_events\" (\"actor_id\", \"actor_type\", \"context\", \"created\", \"deleted\", \"event_name\", \"json\", \"modified\", \"timestamp\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING \"id\"\n   (0.1ms)  ROLLBACK\n*** ActiveRecord::StatementInvalid Exception: PG::InvalidTextRepresentation: ERROR:  invalid input syntax for type json\nDETAIL:  Token \"-\" is invalid.\nCONTEXT:  JSON data, line 1: -...\n: INSERT INTO \"events\".\"t_sales_events\" (\"actor_id\", \"actor_type\", \"context\", \"created\", \"deleted\", \"event_name\", \"json\", \"modified\", \"timestamp\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING \"id\"\n</code></pre>\n\n<p>It seems to me that the error arises because \"---\" is added to the beginning of the field labelled 'json', but I'm at a loss as to why.</p>\n\n<p><strong>EDIT:</strong> I've added the model for SalesEvent below. I did indeed have serialize :json in there. Apologies - I forgot that I'd added that in a somewhat blind attempt to try and resolve the same error. </p>\n\n<pre><code>class SalesEvent &lt; ActiveRecord::Base\n\n  establish_connection :warehouse_development\n  self.table_name = \"events.t_sales_events\"\n\n  serialize :json\n\n  def self.get_all\n    SalesEvent.all\n  end\n\nend\n</code></pre>\n\n<p>Removing that particular line returns the same 'Token \"-\" is invalid' error, albeit due to different input:</p>\n\n<pre><code>(0.1ms)  BEGIN\n  SQL (4.2ms)  INSERT INTO \"events\".\"t_sales_events\" (\"actor_id\", \"actor_type\", \"context\", \"created\", \"deleted\", \"event_name\", \"json\", \"modified\", \"timestamp\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING \"id\"  [[\"actor_id\", nil], [\"actor_type\", \"sales_user\"], [\"context\", nil], [\"created\", Wed, 16 Sep 2015 06:09:00 UTC +00:00], [\"deleted\", nil], [\"event_name\", \"lead_created\"], [\"json\", {:sfdc_id=&gt;\"00AA000000AAaaAAaa1\", :name=&gt;\"John Doe\", :title=&gt;\"CEO\", :role=&gt;nil, :phone=&gt;nil, :company=&gt;\"Does Does\", :email=&gt;\"jdoe@doesdoes.com\", :dc_source=&gt;nil, :lead_id=&gt;nil}], [\"modified\", Wed, 16 Sep 2015 06:09:07 UTC +00:00], [\"timestamp\", Mon, 18 Mar 2013 07:13:42 UTC +00:00]]\nPG::InvalidTextRepresentation: ERROR:  invalid input syntax for type json\nDETAIL:  Token \"-\" is invalid.\nCONTEXT:  JSON data, line 1: -...\n: INSERT INTO \"events\".\"t_sales_events\" (\"actor_id\", \"actor_type\", \"context\", \"created\", \"deleted\", \"event_name\", \"json\", \"modified\", \"timestamp\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING \"id\"\n   (0.1ms)  ROLLBACK\n*** ActiveRecord::StatementInvalid Exception: PG::InvalidTextRepresentation: ERROR:  invalid input syntax for type json\nDETAIL:  Token \"-\" is invalid.\nCONTEXT:  JSON data, line 1: -...\n: INSERT INTO \"events\".\"t_sales_events\" (\"actor_id\", \"actor_type\", \"context\", \"created\", \"deleted\", \"event_name\", \"json\", \"modified\", \"timestamp\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING \"id\"\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 3280, "user_id": 1128918, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/a38e69aa3cb0b30d0cde69001302c076?s=128&d=identicon&r=PG", "display_name": "Gustavo Straube", "link": "https://stackoverflow.com/users/1128918/gustavo-straube"}, "edited": false, "score": 1, "creation_date": 1442369042, "post_id": 32598519, "comment_id": 53049977, "body": "Hey @DudeMontag. Welcome to SO. What don&#39;t you understand about the output? If you need some help, refer to <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> on how to ask good questions."}, {"owner": {"reputation": 129, "user_id": 5239333, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/185bd943ea48fb142278998ef7f136b4?s=128&d=identicon&r=PG", "display_name": "DudeMontag", "link": "https://stackoverflow.com/users/5239333/dudemontag"}, "reply_to_user": {"reputation": 3280, "user_id": 1128918, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/a38e69aa3cb0b30d0cde69001302c076?s=128&d=identicon&r=PG", "display_name": "Gustavo Straube", "link": "https://stackoverflow.com/users/1128918/gustavo-straube"}, "edited": false, "score": 0, "creation_date": 1442370263, "post_id": 32598519, "comment_id": 53050243, "body": "Well, the program isn&#39;t doing what I expected. Instead of outputting an encrypted version of the input string, it just prints each letter of the string on a separate line."}, {"owner": {"reputation": 1052, "user_id": 5153223, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2eb1e2066f49fd770286205385ad6d1?s=128&d=identicon&r=PG&f=1", "display_name": "Borsunho", "link": "https://stackoverflow.com/users/5153223/borsunho"}, "edited": false, "score": 0, "creation_date": 1442388866, "post_id": 32598519, "comment_id": 53056851, "body": "If you wonder why you are getting downvoted, Stack Overflow isn&#39;t &quot;fix it for me&quot; place, you are supposed to ask about specific problem, in your case that could be something like &quot;why this piece of code prints output on separate lines &lt;&lt;piece of code here&gt;&gt;&quot;"}, {"owner": {"reputation": 129, "user_id": 5239333, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/185bd943ea48fb142278998ef7f136b4?s=128&d=identicon&r=PG", "display_name": "DudeMontag", "link": "https://stackoverflow.com/users/5239333/dudemontag"}, "edited": false, "score": 0, "creation_date": 1442422696, "post_id": 32598519, "comment_id": 53079771, "body": "I thought I was being specific, but I guess I was doing it wrong. I didn&#39;t actually want anyone to &quot;fix it for me&quot;, I just wanted some advice, but passive-aggressive answers are always fun, I guess."}, {"owner": {"reputation": 2912, "user_id": 3081206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YaKOY.jpg?s=128&g=1", "display_name": "takendarkk", "link": "https://stackoverflow.com/users/3081206/takendarkk"}, "edited": false, "score": 0, "creation_date": 1442423416, "post_id": 32598519, "comment_id": 53080199, "body": "Post your code ... in the question."}], "answers": [{"comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1442416488, "post_id": 32599192, "comment_id": 53075754, "body": "First of all, good answer. Just one thing: &quot;All you need is one line, really&quot;. Not a very good example for a beginner. This one line you wrote have some ruby concepts that may not be so easy for a beginner to understand (as he said, he&#39;s learning  ruby). You have the &quot;!&quot;, method chaining and block going on in this one line. And by the way, loved the &quot;let me offer you a challenge back&quot; part."}, {"owner": {"reputation": 129, "user_id": 5239333, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/185bd943ea48fb142278998ef7f136b4?s=128&d=identicon&r=PG", "display_name": "DudeMontag", "link": "https://stackoverflow.com/users/5239333/dudemontag"}, "edited": false, "score": 0, "creation_date": 1442422582, "post_id": 32599192, "comment_id": 53079710, "body": "This is a little more advanced than I understand at the moment, although I do appreciate the help. I would upvote your answer, but I don&#39;t have 15 reputation yet :) Thank you for the advice though, the reason I like Ruby is that there are &quot;Ruby ways&quot; of doing things, and I intend to learn those ways!"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1442423829, "post_id": 32599192, "comment_id": 53080423, "body": "DudeMontag - My ruby code was a bit condensed and used <code>Array#pack</code>, which made it look more advanced than it should have been. I updated my answer and hope it&#39;s more helpful now. BTW, you can always &quot;accept&quot; answers to your own questions since they are <b>your</b> questions. @lcguida Thank you for pointing these issues out."}], "tags": [], "owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "is_accepted": true, "score": 5, "last_activity_date": 1442423585, "last_edit_date": 1442423585, "creation_date": 1442373445, "answer_id": 32599192, "question_id": 32598519, "link": "https://stackoverflow.com/questions/32598519/confused-about-output-in-student-project/32599192#32599192", "title": "Confused about output in student project", "body": "<p>Let me ruin it for you...</p>\n\n<p>Your basic logic seems both sound and overly complex at the same time.</p>\n\n<p>Here is some input:</p>\n\n<ol>\n<li>You defined a lot of methods for tasks that already exist. Always assume that Ruby has you covered, for any task you need - even if you're wrong, searching through the documentation will open your mind to different options at your disposal.</li>\n<li>You ignored the fact that the String is UTF8 encoded. so <code>c.ord + cypher</code> might give you an unexpected value that isn't UTF8 valid. Also, while <code>'\u0434'.ord == 1076</code>, you should be aware that <code>1076.chr</code> would raise a <code>RangeError</code> exception.</li>\n<li>Assuming you expected ASCII values (using <code>.ord</code> and <code>.chr</code>), we should take into account the fact that bytes are limited to 8 bits (or one octet) - so the highest number for an encrypted byte is 255.</li>\n<li>It is better to confine the methods to a namespace using a module - which I will <strong>not</strong> do here, since I have no idea at what point you are in your studies.</li>\n</ol>\n\n<p>The Caesar algorithm:</p>\n\n<ol>\n<li><p>Turn the string into an array of numbers, each representing a letter... Oh wait, there's a built in method that does that.<a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-bytes\" rel=\"nofollow\"><code>String#bytes</code></a> returns an array of integers representing the value of each byte in the binary string.</p></li>\n<li><p>Iterate the array of numbers to change the array by adding the cypher number (use <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-map-21\" rel=\"nofollow\"><code>Array#map!</code></a> to change the array in-place). Here we just need to remember that bytes have an upper limit value of 255, so we should use the 'modulu' method <a href=\"http://ruby-doc.org/core-2.2.0/Fixnum.html#method-i-25\" rel=\"nofollow\"><code>Fixnum#%</code></a>.</p></li>\n<li><p>Now we just need to convert the array of bytes (with the new value) back to a string... Now we know that the String has a method to turn the string into an array of bytes, so it is only logical that the inverse would also be true - I would go with the <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-pack\" rel=\"nofollow\"><code>Array#pack</code></a> method.</p></li>\n</ol>\n\n<p>Here's the gist of it as a sketch:</p>\n\n<pre><code> some_string.bytes.map! {|i| (i +/- cypher) % 255 } .pack 'C*'\n # the +/- refers to the question of encoding vs. decoding and won't work.\n</code></pre>\n\n<p>All you need is one line, really.</p>\n\n<p>I would recommend that you assume that the language you use has almost any method you would ever need. So if you need to perform an action - such as taking a unicode string and converting it into an array of numbers (vs. the limit I introduced, which is a binary octet limit of 255) - Ruby has you covered.</p>\n\n<p>Now, since my answer probably ruined the challenge to some degree - allow me to offer you back the challenge.</p>\n\n<p>Rewrite the solution I offered so that it would work for UTF8 strings (the standard encoding), allowing you a stronger encryption as the cypher's limit will be the higher UTF8 encoding limit rather than the 255 limit for a byte.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Since the \"one line\" concept made the answer look more advanced than it was, here's what that code would look like if it was multi-line:</p>\n\n<pre><code># the encryption method takes a string and a number\ndef caesar_encrypt string, cypher\n   # string.bytes will return an array of numbers.\n   # The numbers are between 0 and 255 (8 bits or 1 byte)\n   # https://en.wikipedia.org/wiki/Byte\n   array = string.bytes\n   # using the Array.map! changes the array in place.\n   # it's the same as: array = array.map {...}\n   # the format: { ... } is a one line block, similar to the do ... end.\n   array.map! do |i|\n      (i + cypher) % 255\n   end\n   # array.pack is used for taking objects in an array and transforming them\n   # to a string. the 'C*' means we are packing bytes together to a string.\n   # There are more options such as 'N*' which would pack 32 bit numbers into\n   # a string. It's a great way to save or manipulate binary data,\n   # which is at the core of all digital data.\n   array.pack 'C*'\nend\ndef caesar_decrypt\n   caesar_encrypt string, (0-cypher)\nend\n</code></pre>\n\n<p>Notice that <code>Array#pack</code> might be a bit advanced and using your original solution will also work... now that we are using bytes, <code>Fixnum#chr</code> should work as expected.</p>\n\n<pre><code>def caesar_encrypt string, cypher\n   array = string.bytes\n   array.map! do |i|\n      (i + cypher) % 255\n   end\n   out = \"\"\n   array.each {|c| out &lt;&lt; c.chr}\n   out\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 129, "user_id": 5239333, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/185bd943ea48fb142278998ef7f136b4?s=128&d=identicon&r=PG", "display_name": "DudeMontag", "link": "https://stackoverflow.com/users/5239333/dudemontag"}, "edited": false, "score": 0, "creation_date": 1442422636, "post_id": 32602920, "comment_id": 53079744, "body": "Thanks! I used puts because I read that it automatically calls to_s on an object, which I thought would be useful for the output, but I can see why that was a wrong call. I would upvote your comment, but I don&#39;t have 15 reputation yet."}], "tags": [], "owner": {"reputation": 194, "user_id": 5286003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/023d89912b43fd59bc06cf59bc51179c?s=128&d=identicon&r=PG", "display_name": "danmakenoise", "link": "https://stackoverflow.com/users/5286003/danmakenoise"}, "is_accepted": false, "score": 2, "last_activity_date": 1442391203, "last_edit_date": 1592644375, "creation_date": 1442390524, "answer_id": 32602920, "question_id": 32598519, "link": "https://stackoverflow.com/questions/32598519/confused-about-output-in-student-project/32602920#32602920", "title": "Confused about output in student project", "body": "<p>This is something I can help with. There are three lines giving you grief right now.</p>\n<p><strong>The first problem is line 33 <code>if i == (65..90)</code></strong></p>\n<blockquote>\n<p>Right now, that line is asking if i is equal to the ENTIRE range of numbers between 65 and 90, which of course it isn't. This line is returning <code>false</code>, and your <code>if</code> branch is never even being executed. This is why you are getting back the same letters you started with!</p>\n<p>What you are looking for is Ruby's <code>between?(a,b)</code> method where <code>a</code> is the bottom of the range and <code>b</code> is the top. So, change that line to:</p>\n<p><code>if i.between?(65, 90)</code></p>\n<p>and you are good to go.</p>\n</blockquote>\n<p><strong>The second line giving you grief is line 39 <code>elsif i == (97..122)</code></strong></p>\n<blockquote>\n<p>This line is a problem for the exact same reason as the first one. Fix it in the same way.</p>\n</blockquote>\n<p><strong>The third line giving you grief is line 14 <code>puts convert_to_char(cipher_array)</code>.</strong></p>\n<blockquote>\n<p>Your <code>convert_to_char</code> method is returning an array, and when Ruby is asked to <code>puts</code> an array, it just pops each item off on its own line. Use Ruby's <code>join</code> method, which joins all of the elements together into a string. You can use this by changing line 14 to:</p>\n<p><code>puts convert_to_char(cipher_array).join</code></p>\n<p>Note, you could also add <code>join</code> to line 58 instead and get the same result. Try it out and see!</p>\n</blockquote>\n<p>I hope this helps you out, and keep on learning!</p>\n"}, {"tags": [], "owner": {"reputation": 129, "user_id": 5239333, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/185bd943ea48fb142278998ef7f136b4?s=128&d=identicon&r=PG", "display_name": "DudeMontag", "link": "https://stackoverflow.com/users/5239333/dudemontag"}, "is_accepted": false, "score": 0, "last_activity_date": 1442423206, "creation_date": 1442423206, "answer_id": 32614662, "question_id": 32598519, "link": "https://stackoverflow.com/questions/32598519/confused-about-output-in-student-project/32614662#32614662", "title": "Confused about output in student project", "body": "<p>I used the advice given by Dan Phillips, namely changing my \"if i == ...\" statements to \"if i.between?\" statements, and it worked perfectly!</p>\n"}], "owner": {"reputation": 129, "user_id": 5239333, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/185bd943ea48fb142278998ef7f136b4?s=128&d=identicon&r=PG", "display_name": "DudeMontag", "link": "https://stackoverflow.com/users/5239333/dudemontag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 32599192, "answer_count": 3, "score": -7, "last_activity_date": 1442423585, "creation_date": 1442368630, "question_id": 32598519, "link": "https://stackoverflow.com/questions/32598519/confused-about-output-in-student-project", "title": "Confused about output in student project", "body": "<p>I'm learning Ruby through The Odin Project. I was tasked with building a Caesar Cipher program, and I've been banging my head against this problem all day. I finally wrote what I thought would be a working program, but I don't understand the output. Here's the Git: <a href=\"https://github.com/PAMulligan/caesar_cipher.git\" rel=\"nofollow\">https://github.com/PAMulligan/caesar_cipher.git</a>. If anyone has any insight into where I went wrong, I would love some help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nested-forms", "has-many-through"], "answers": [{"comments": [{"owner": {"reputation": 831, "user_id": 2930436, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2de76dd0decfef8e0181db7a059e44d2?s=128&d=identicon&r=PG&f=1", "display_name": "MVanOrder", "link": "https://stackoverflow.com/users/2930436/mvanorder"}, "edited": false, "score": 0, "creation_date": 1442373212, "post_id": 32598610, "comment_id": 53050937, "body": "I added the function to nested_form-0.3.2/lib/nested_form/builder_mixin.rb right after <code>link_to_add</code>.  Calling <code>link_to_add_hmt</code> isn&#39;t the issue.  I know it&#39;s being called, but when it&#39;s calling it&#39;s saying <code>build_ingredients</code> is undefined which looks to be what <code>model_object.send(&quot;build_#{association_two}&quot;.to_sym)</code> is calling"}], "tags": [], "owner": {"reputation": 744, "user_id": 1885107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f3cb4e9a996ab41c7980d6954dfb68d?s=128&d=identicon&r=PG", "display_name": "Prakash Laxkar", "link": "https://stackoverflow.com/users/1885107/prakash-laxkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1442369338, "creation_date": 1442369338, "answer_id": 32598610, "question_id": 32598502, "link": "https://stackoverflow.com/questions/32598502/nested-form-with-has-many-through-and-link-to-add-hmt-function/32598610#32598610", "title": "nested_form with has_many :through and link_to_add_hmt function", "body": "<p>Did you define <code>link_to_add_hmt</code> method in your helper? If you are using that solutions.</p>\n"}, {"tags": [], "owner": {"reputation": 831, "user_id": 2930436, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2de76dd0decfef8e0181db7a059e44d2?s=128&d=identicon&r=PG&f=1", "display_name": "MVanOrder", "link": "https://stackoverflow.com/users/2930436/mvanorder"}, "is_accepted": false, "score": 0, "last_activity_date": 1442460163, "creation_date": 1442460163, "answer_id": 32622120, "question_id": 32598502, "link": "https://stackoverflow.com/questions/32598502/nested-form-with-has-many-through-and-link-to-add-hmt-function/32622120#32622120", "title": "nested_form with has_many :through and link_to_add_hmt function", "body": "<p>I figured it out, after adding this line to troubleshoot:</p>\n\n<pre><code>raise \"debug: association =&gt; #{association}, association_two =&gt; #{association_two}, model_object =&gt; #{model_object.methods}\"\n</code></pre>\n\n<p>I found that I had a typo.  The <em>build_other</em> method generated by a <em>belongs_to</em> relationship is singular(in this case <em>recipe_ingredients.build_ingredient</em>).  I had typed <em>:ingredients</em> (plural).</p>\n"}], "owner": {"reputation": 831, "user_id": 2930436, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2de76dd0decfef8e0181db7a059e44d2?s=128&d=identicon&r=PG&f=1", "display_name": "MVanOrder", "link": "https://stackoverflow.com/users/2930436/mvanorder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1442460163, "creation_date": 1442368524, "last_edit_date": 1495542585, "question_id": 32598502, "link": "https://stackoverflow.com/questions/32598502/nested-form-with-has-many-through-and-link-to-add-hmt-function", "title": "nested_form with has_many :through and link_to_add_hmt function", "body": "<p>I was having the same issue as <a href=\"https://stackoverflow.com/questions/7969493/nested-form-has-many-through-updating-attribute-on-join-model/19738445\">this question</a> The solution was to use the <a href=\"https://gist.github.com/stuartchaney/7274894\" rel=\"nofollow noreferrer\">link_to_add_hmt</a> function which I've added to my source for <em>nested_form</em>, but I'm having some issues.  I'm not sure what I'm doing wrong or if anyone's familiar with modified this version of function(only real difference appears to be lines 6 and 36).  I have 3 models:</p>\n\n<pre><code>class Recipe &lt; ActiveRecord::Base\n    has_many :recipe_ingredients, :dependent =&gt; :destroy\n    has_many :ingredients, through: :recipe_ingredients\n    accepts_nested_attributes_for :recipe_ingredients,\n                                  :reject_if =&gt; :all_blank,\n                                  :allow_destroy =&gt; true\n    accepts_nested_attributes_for :ingredients\n...\n\nclass RecipeIngredient &lt; ActiveRecord::Base\n    belongs_to :recipe\n    belongs_to :ingredient\n...\n\nclass Ingredient &lt; ActiveRecord::Base\n    has_many :recipe_ingredients\n    has_many :recipes, through: :recipe_ingredients\n\n    accepts_nested_attributes_for :recipes\n    accepts_nested_attributes_for :recipe_ingredients\n...\n</code></pre>\n\n<p>Here's my form partial:</p>\n\n<pre><code>&lt;%= bootstrap_nested_form_for @recipe, :html =&gt; { :multipart =&gt; true } do |f| %&gt;\n...\n    &lt;%= f.text_field :name, label: \"Recipe Name\" %&gt;\n    &lt;%= f.text_area :description, label: \"Description\" %&gt;\n    &lt;%= f.file_field :image, label: \"Image\" %&gt;\n    &lt;table id=\"ingredients\"&gt;\n        &lt;%= f.fields_for :recipe_ingredients, :wrapper =&gt; false do |ingredient_form| %&gt;\n        &lt;tr class=\"fields\"&gt;\n        &lt;%= ingredient_form.fields_for :ingredient do |ingredient| %&gt;\n            &lt;td&gt;&lt;%= ingredient.text_field :name, label: \"ingredient\" %&gt;&lt;/td&gt;\n        &lt;% end %&gt;\n            &lt;td&gt;&lt;%= ingredient_form.link_to_remove \"Remove\" %&gt;&lt;/td&gt;\n\n        &lt;/tr&gt;\n        &lt;% end %&gt;\n    &lt;/table&gt;\n    &lt;p&gt;&lt;%= f.link_to_add_hmt \"Add ingredient\", :ingredients, recipe_ingredients, :data =&gt; { :target =&gt; \"#ingredients\" } %&gt;&lt;/p&gt;\n    &lt;br /&gt;\n    &lt;%= f.text_area :directions, label: \"Directions\" %&gt;\n    &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I'm getting the <strong>error:</strong></p>\n\n<pre><code>undefined method `build_ingredients' for\n#&lt;RecipeIngredient:0x007f69057592a0&gt;\n</code></pre>\n\n<p>To the best of my understanding this is happening in this line in link_to_add_hmt(36 from the above link):</p>\n\n<pre><code>model_object.send(\"build_#{association_two}\".to_sym)\n</code></pre>\n\n<p>I'm not sure if I'm using the function wrong, I'm missing something, or if the code in link_to_add_hmt doesn't work for some reason.</p>\n\n<p>Also I'm running Rails 4.2.4 on Ruby 2.1.0, if that is at all related to this error.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1442378961, "post_id": 32597798, "comment_id": 53052481, "body": "IMO this depends on your environment: What server do you use? Are you in <code>development</code> or <code>production</code> environment? Is the server already running for some time, when you test this behaviour or was the server just started or idleing for a longer period of time?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1442382417, "post_id": 32597798, "comment_id": 53053715, "body": "I would suggest you to examine your middlewares. One of it might easily use blocking IO to/from database. Please post your middleware stack here."}, {"owner": {"reputation": 2322, "user_id": 3088748, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/544821277/picture?type=large", "display_name": "AJFaraday", "link": "https://stackoverflow.com/users/3088748/ajfaraday"}, "edited": false, "score": 0, "creation_date": 1442412154, "post_id": 32597798, "comment_id": 53072428, "body": "What do you mean by &#39;it blocks&#39;? Are you seeing any errors?"}], "answers": [{"tags": [], "owner": {"reputation": 5415, "user_id": 2292448, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02a28db6886d578f75a820b50f2dd334?s=128&d=identicon&r=PG", "display_name": "Lazarus Lazaridis", "link": "https://stackoverflow.com/users/2292448/lazarus-lazaridis"}, "is_accepted": false, "score": 0, "last_activity_date": 1442398203, "last_edit_date": 1442398203, "creation_date": 1442397447, "answer_id": 32605352, "question_id": 32597798, "link": "https://stackoverflow.com/questions/32597798/why-does-a-barebones-rails-controller-block-if-the-database-is-down/32605352#32605352", "title": "Why does a barebones Rails controller block if the database is down?", "body": "<p>Rails checks for pending migrations (at least in development mode) before a request. I guess this check blocks your db unrelated action when your database goes down.</p>\n"}, {"tags": [], "owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "is_accepted": false, "score": 2, "last_activity_date": 1442411898, "last_edit_date": 1592644375, "creation_date": 1442411148, "answer_id": 32610438, "question_id": 32597798, "link": "https://stackoverflow.com/questions/32597798/why-does-a-barebones-rails-controller-block-if-the-database-is-down/32610438#32610438", "title": "Why does a barebones Rails controller block if the database is down?", "body": "<p>I think there could be three culprits.</p>\n<p>A fresh Rails application has the following middleware (<a href=\"http://guides.rubyonrails.org/rails_on_rack.html\" rel=\"nofollow noreferrer\">Source</a>):</p>\n<pre><code>use Rack::Sendfile\nuse ActionDispatch::Static\nuse Rack::Lock\nuse #&lt;ActiveSupport::Cache::Strategy::LocalCache::Middleware:0x000000029a0838&gt;\nuse Rack::Runtime\nuse Rack::MethodOverride\nuse ActionDispatch::RequestId\nuse Rails::Rack::Logger\nuse ActionDispatch::ShowExceptions\nuse ActionDispatch::DebugExceptions\nuse ActionDispatch::RemoteIp\nuse ActionDispatch::Reloader\nuse ActionDispatch::Callbacks\nuse ActiveRecord::Migration::CheckPending\nuse ActiveRecord::ConnectionAdapters::ConnectionManagement\nuse ActiveRecord::QueryCache\nuse ActionDispatch::Cookies\nuse ActionDispatch::Session::CookieStore\nuse ActionDispatch::Flash\nuse ActionDispatch::ParamsParser\nuse Rack::Head\nuse Rack::ConditionalGet\nuse Rack::ETag\nrun Rails.application.routes\n</code></pre>\n<p>Each request to your controller essentially passes through each one of these middlewares in a chain, one after the other.</p>\n<p>Three of these are related to the database and thus depend on the database for every request. You'll notice they're all part of <code>ActiveRecord</code> which is a big tip-off the database is involved.</p>\n<ol>\n<li><p><code>ActiveRecord::Migration::CheckPending</code></p>\n<p>This checks if there are pending migrations in the database before passing the request through. From what I can tell looking at the source code it checks for pending migrations in <strong>all environments</strong>.</p>\n</li>\n<li><p><code>ActiveRecord::ConnectionAdapters::ConnectionManagement</code></p>\n<p>Except in the testing enviornment, this middleware purges active db connections <strong>each request</strong>. Perhaps the database connectivity in this middleware is blocking your controller action.</p>\n</li>\n<li><p><code>ActiveRecord::QueryCache</code></p>\n<p>This could also be blocking database requests. It is active for all environments from what I can tell.</p>\n</li>\n</ol>\n"}], "owner": {"reputation": 43200, "user_id": 2288585, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/10227e415d1c4e4e1cc719c6ccd70934?s=128&d=identicon&r=PG", "display_name": "Debajit", "link": "https://stackoverflow.com/users/2288585/debajit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 2, "answer_count": 2, "score": 12, "last_activity_date": 1442411898, "creation_date": 1442363234, "last_edit_date": 1442397629, "question_id": 32597798, "link": "https://stackoverflow.com/questions/32597798/why-does-a-barebones-rails-controller-block-if-the-database-is-down", "title": "Why does a barebones Rails controller block if the database is down?", "body": "<p>I have a simple Rails controller which does not depend on the database.</p>\n\n<pre><code>class PingController &lt; ActionController::Base\n  def ping\n    render text: 'The service is up'\n  end\nend\n</code></pre>\n\n<p>However, when the database goes down, this controller action blocks. \nWhy does this happen?</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "windows"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 5294673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53c8df5960a3bdde91a819e233e578bf?s=128&d=identicon&r=PG&f=1", "display_name": "MDB", "link": "https://stackoverflow.com/users/5294673/mdb"}, "edited": false, "score": 0, "creation_date": 1442373585, "post_id": 32597351, "comment_id": 53051027, "body": "Using the application.html.erb that you gave me gave me another error: Sprockets::FileNotFound in Articles#index, which lead me to this page: <a href=\"http://stackoverflow.com/questions/30239617/rails-4-sprocketsfilenotfound-in-welcomeindex\" title=\"rails 4 sprocketsfilenotfound in welcomeindex\">stackoverflow.com/questions/30239617/&hellip;</a> and by removing //= require highcharts from my application.js, IT WORKED.  Thank you so much for your help!  The DESTROY works now just as it should and the Javascript pop-up works as well.  Thanks."}, {"owner": {"reputation": 157, "user_id": 3140926, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/v58av.jpg?s=128&g=1", "display_name": "Rusfuture", "link": "https://stackoverflow.com/users/3140926/rusfuture"}, "edited": false, "score": 0, "creation_date": 1460098854, "post_id": 32597351, "comment_id": 60594769, "body": "I am running rails ver. 4.2.5.1, ruby ver. 2.3.0p0, on a CentOS 6.6 Linux box, and I have <i>exactly</i> the same problem.  I <i>cannot</i> get the Destroy dialog to work, as per the &quot;Getting Started with Ruby on Rails&quot; Guide.  This is <i>very</i> annoying.  This is a common problem, with many posts, many solutions. I have tried them all.  &quot;Destroy&quot; uses &quot;link_to&quot; verb.  If changed to &quot;button_to&quot;, it then works but WITHOUT THE DIALOG box.  My &quot;application.html.erb&quot; file same as is as shown here, still no &quot;delete&quot; method.  This is <i>not</i> a Windows/browser issue, same behaviour from an iPad, for example."}], "tags": [], "owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "is_accepted": true, "score": 1, "last_activity_date": 1442360085, "creation_date": 1442360085, "answer_id": 32597351, "question_id": 32597205, "link": "https://stackoverflow.com/questions/32597205/rails-guides-getting-started-5-13-deleting-articles-confirmation-dialog-box-wo/32597351#32597351", "title": "Rails Guides: Getting Started 5.13 Deleting Articles: Confirmation Dialog Box WON&#39;T Appear", "body": "<p>I don't think the layout is loading your javascript properly.</p>\n\n<p>Try this. Hope it helps!</p>\n\n<p><strong>app/views/layouts/application.html.erb</strong></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;title&gt;Blog&lt;/title&gt;\n  &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' =&gt; true %&gt;\n  &lt;%= javascript_include_tag 'application', 'data-turbolinks-track' =&gt; true %&gt;\n  &lt;%= csrf_meta_tags %&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;%= yield %&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5294673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53c8df5960a3bdde91a819e233e578bf?s=128&d=identicon&r=PG&f=1", "display_name": "MDB", "link": "https://stackoverflow.com/users/5294673/mdb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 32597351, "answer_count": 1, "score": 0, "last_activity_date": 1442360085, "creation_date": 1442359061, "last_edit_date": 1495542127, "question_id": 32597205, "link": "https://stackoverflow.com/questions/32597205/rails-guides-getting-started-5-13-deleting-articles-confirmation-dialog-box-wo", "title": "Rails Guides: Getting Started 5.13 Deleting Articles: Confirmation Dialog Box WON&#39;T Appear", "body": "<p>I am currently trying to get Rails to run on my Windows 7 machine and I am having difficulty.  I am very new to Rails (inferred by my use of the Getting Started guide) and I am stuck on this:</p>\n\n<p><a href=\"http://guides.rubyonrails.org/getting_started.html#deleting-articles\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/getting_started.html#deleting-articles</a></p>\n\n<p>Specifically the, you guessed it, confirmation dialog box.  It never appears and Rails just utilizes a SHOW route.</p>\n\n<p>Now for the code:</p>\n\n<p>app\\assets\\javascripts\\application.js</p>\n\n<pre><code>// This is a manifest file that'll be compiled into application.js, which will include all the files\n// listed below.\n//\n// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,\n// or any plugin's vendor/assets/javascripts directory can be referenced here using a relative path.\n//\n// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the\n// compiled file.\n//\n// Read Sprockets README (https://github.com/rails/sprockets#sprockets-directives) for details\n// about supported directives.\n//\n//= require jquery\n//= require jquery_ujs\n//= require turbolinks\n//= require jquery.ui.all\n//= require_tree .\n</code></pre>\n\n<p>app\\controllers\\articles_controller.rb</p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\n  def index\n    @articles = Article.all\n  end\n\n  def show\n    @article = Article.find(params[:id])\n  end\n\n  def new\n    @article = Article.new\n  end\n\n  def edit\n    @article = Article.find(params[:id])\n  end\n\n  def create\n    @article = Article.new(article_params)\n\n    if @article.save\n      redirect_to @article\n    else\n      render 'new'\n    end\n  end\n\n  def update\n    @article = Article.find(params[:id])\n\n    if @article.update(article_params)\n      redirect_to @article\n    else\n      render 'edit'\n    end\n  end\n\n  def destroy\n    @article = Article.find(params[:id])\n    @article.destroy\n\n    redirect_to articles_path\n  end\n\n  private\n    def article_params\n      params.require(:article).permit(:title, :text)\n    end\nend\n</code></pre>\n\n<p>app\\views\\articles\\index.html.erb</p>\n\n<pre><code>&lt;h1&gt;Listing Articles&lt;/h1&gt;\n&lt;%= link_to 'New article', new_article_path %&gt;\n\n&lt;table&gt;\n  &lt;tr&gt;\n    &lt;th&gt;Title&lt;/th&gt;\n    &lt;th&gt;Text&lt;/th&gt;\n    &lt;th colspan=\"3\"&gt;&lt;/th&gt;\n  &lt;/tr&gt;\n\n  &lt;% @articles.each do |article| %&gt;\n    &lt;tr&gt;\n      &lt;td&gt;&lt;%= article.title %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= article.text %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= link_to 'Show', article %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= link_to 'Edit', edit_article_path(article) %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= link_to 'Destroy', article_path(article),\n              method: :delete,\n              data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>and app\\views\\layouts\\application.html.erb</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;title&gt;Blog&lt;/title&gt;\n  &lt;%= stylesheet_link_tag    'default', media: 'all', 'data-turbolinks-track' =&gt; true %&gt;\n  &lt;%= javascript_include_tag 'default', 'data-turbolinks-track' =&gt; true %&gt;\n  &lt;%= csrf_meta_tags %&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;%= yield %&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n\n&lt;!--%= javascript_include_tag 'application', 'data-turbolinks-track' =&gt; true %--&gt;\n</code></pre>\n\n<p>Now in the command line, when I click the, \"link_to,\" Destroy link, I get:</p>\n\n<pre><code>[2015-09-15 18:48:26] ERROR Errno::ECONNRESET: An existing connection was forcibly closed by the remote host. @ io_fillbuf - fd:10\n    C:/RailsInstaller/Ruby2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:80:in 'eof?'\n    C:/RailsInstaller/Ruby2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:80:in 'run'\n    C:/RailsInstaller/Ruby2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in 'block in start_thread'\n  Rendered C:/...\n</code></pre>\n\n<p>Note that everything seems normal after:</p>\n\n<pre><code>Rendered C:/\n</code></pre>\n\n<p>To fix this issue on my own, I have:</p>\n\n<ul>\n<li>Made sure SQLite is on my machine</li>\n<li>The SQLite gem is installed</li>\n<li>Active scripts are turned on for my web browser (Opera; based on\nChromium)</li>\n</ul>\n\n<p>I have followed every piece of advice I could from Stack Exchange and Stack Overflow, including:</p>\n\n<p>Modifying index.html.erb with:</p>\n\n<pre><code>&lt;%= link_to 'Destroy',  post,  method: :delete, data: { confirm: 'Are you sure?' } %&gt;\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>link_to 'Cancel?', schedule_path(current_user.schedules[0]), :confirm =&gt; \"are you sure?\", :method =&gt; :delete\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>&lt;td&gt;&lt;%= link_to 'Destroy', { action: :destroy, id: post.id }, method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>&lt;td&gt;&lt;%= link_to 'Destroy', [comment.post, comment], method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n</code></pre>\n\n<ul>\n<li>Making sure that because I am on Windows 7, that my CoffeeScript is\nversion 1.8.0 and that I updated the Gemfile as such</li>\n<li>Making sure the gem, \"jquery-rails,\" is included in the Gemfile file</li>\n<li>Using method: destroy instead of method: delete</li>\n<li>My rake routes look as they should.  One answer mentioned making sure\n<code>bin/rake routes</code> returned something normal and it does</li>\n</ul>\n\n<p>Making sure the application.js file includes:</p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n</code></pre>\n\n<p>(which you can see above that it does)</p>\n\n<p>and nothing, <strong>NOTHING</strong>, has worked.</p>\n\n<p>The only thing I have tried that has given me <strong>ANY</strong> success is replacing the <code>link_to</code> in index.html.erb with <code>button_to</code>.</p>\n\n<p>But this doesn't produce a confirmation window.  It just performs a DESTROY.</p>\n\n<p>I am very confused and I have spent many hours trying to get this to work.</p>\n\n<p>I have found my answers from these links:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/8065717/rails-crud-destroy-path-always-routes-to-the-user-show-page\">Rails CRUD - Destroy path always routes to the User show page</a></li>\n<li><a href=\"https://stackoverflow.com/questions/28241981/rails-4-execjsprogramerror-in-pageswelcome\">Rails-4, ExecJS::ProgramError in Pages#welcome</a></li>\n<li><a href=\"https://stackoverflow.com/questions/30850226/rails-default-js-is-empty-and-jquery-and-jquery-ujs-not-loaded\">Rails, default.js is empty, and jquery and jquery_ujs not loaded</a></li>\n<li><a href=\"https://stackoverflow.com/questions/18154916/rails-4-link-to-destroy-not-working-in-getting-started-tutorial\">Rails 4 link_to Destroy not working in Getting Started tutorial</a></li>\n</ul>\n\n<p>I may be missing a few links and answers, so please feel free to link me to a thread you think I may have missed.</p>\n\n<p>Thank you for reading this <strong>MASSIVE</strong> wall of text and I hope I can find a solution to my problem soon.</p>\n"}, {"tags": ["java", "ruby", "tcp", "netty", "raw-data"], "answers": [{"comments": [{"owner": {"reputation": 16303, "user_id": 14753, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0XDVs.jpg?s=128&g=1", "display_name": "Glennular", "link": "https://stackoverflow.com/users/14753/glennular"}, "edited": false, "score": 0, "creation_date": 1442434881, "post_id": 32616925, "comment_id": 53086618, "body": "makes sense but what is the proper Ruby for it? You solution did not work btw"}], "tags": [], "owner": {"reputation": 198, "user_id": 1233308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50380eb37b55022ef05615bcafed160?s=128&d=identicon&r=PG", "display_name": "Michael Choi", "link": "https://stackoverflow.com/users/1233308/michael-choi"}, "is_accepted": false, "score": 1, "last_activity_date": 1442431173, "creation_date": 1442431173, "answer_id": 32616925, "question_id": 32596807, "link": "https://stackoverflow.com/questions/32596807/ruby-frame-a-file-for-lengthfieldbasedframedecoder-parameters-in-netty/32616925#32616925", "title": "ruby frame a file for LengthFieldBasedFrameDecoder parameters in Netty", "body": "<p>Your problem is you aren't specifying the frame field length in your message.\nThe decimal number 2065855613 is {\"t} in ASCII, which looks like the first few bytes of the start of a JSON message.</p>\n\n<p>The solution then is to make sure you append a 4 byte message length to the beginning of the message (not including the length of the length field itself).</p>\n"}], "owner": {"reputation": 103, "user_id": 2317510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bn711.jpg?s=128&g=1", "display_name": "trickymuffin", "link": "https://stackoverflow.com/users/2317510/trickymuffin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1442530542, "creation_date": 1442356499, "last_edit_date": 1442530542, "question_id": 32596807, "link": "https://stackoverflow.com/questions/32596807/ruby-frame-a-file-for-lengthfieldbasedframedecoder-parameters-in-netty", "title": "ruby frame a file for LengthFieldBasedFrameDecoder parameters in Netty", "body": "<p>I have this parameters set for Netty in one API I need to send data to via TCP (SSL enabled).</p>\n\n<pre><code>LengthFieldBasedFrameDecoder(1048576, 0, 4, 0, 4))\n</code></pre>\n\n<p>Parameters:</p>\n\n<ul>\n<li>maxFrameLength - the maximum length of the frame. If the length of the frame is greater than this value, TooLongFrameException will be thrown.</li>\n<li>lengthFieldOffset - the offset of the length field.</li>\n<li>lengthFieldLength - the length of the length field.</li>\n<li>lengthAdjustment - the compensation value to add to the value of the length field.</li>\n<li>initialBytesToStrip - the number of first bytes to strip out from the decoded frame.</li>\n</ul>\n\n<p>I have message (string) that I need to send and they are being rejected because of:\nerror message \"Adjusted frame length exceeds 1048576: 2065855613\"</p>\n\n<p>So the question is, how can I set a frame for the message in ruby to meet Netty's parameters?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 1, "creation_date": 1442356834, "post_id": 32596683, "comment_id": 53046918, "body": "Did you implement the logic to display the <code>address</code>? Paste your view code in the question."}, {"owner": {"reputation": 560, "user_id": 2362505, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/181c3e1a813fb39b2720f4b2ba34e9cd?s=128&d=identicon&r=PG", "display_name": "harshs08", "link": "https://stackoverflow.com/users/2362505/harshs08"}, "edited": false, "score": 1, "creation_date": 1442361618, "post_id": 32596683, "comment_id": 53048191, "body": "Please add the view logic in your question and I am assuming that models relation are set up properly."}, {"owner": {"reputation": 49, "user_id": 3650416, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e520cc4f739c11ec695e06a4b53dce34?s=128&d=identicon&r=PG&f=1", "display_name": "user3650416", "link": "https://stackoverflow.com/users/3650416/user3650416"}, "edited": false, "score": 0, "creation_date": 1442362329, "post_id": 32596683, "comment_id": 53048383, "body": "Yeah that&#39;s the part I need help with. I&#39;m completely new to all of this. I have no idea what I would write there. Would I create a new variable and find_by the type of address then load it?"}, {"owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "edited": false, "score": 0, "creation_date": 1442363225, "post_id": 32596683, "comment_id": 53048654, "body": "The Question is unclear, I would suggest to put the <code>models</code> with clear <code>relationship</code>, <code>controller action</code> and <code>corresponding view</code> code in the question"}, {"owner": {"reputation": 1081, "user_id": 1473423, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IgJTk.png?s=128&g=1", "display_name": "bntzio", "link": "https://stackoverflow.com/users/1473423/bntzio"}, "reply_to_user": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "edited": false, "score": 0, "creation_date": 1442363686, "post_id": 32596683, "comment_id": 53048764, "body": "I agree with @illusionist"}, {"owner": {"reputation": 1081, "user_id": 1473423, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IgJTk.png?s=128&g=1", "display_name": "bntzio", "link": "https://stackoverflow.com/users/1473423/bntzio"}, "edited": false, "score": 1, "creation_date": 1442366125, "post_id": 32596683, "comment_id": 53049337, "body": "Can u please check if your :address_and_infos variable have a value? Because if it doesn&#39;t, that&#39;s the problem, it cannot render because it has nothing to render. @user3650416"}, {"owner": {"reputation": 49, "user_id": 3650416, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e520cc4f739c11ec695e06a4b53dce34?s=128&d=identicon&r=PG&f=1", "display_name": "user3650416", "link": "https://stackoverflow.com/users/3650416/user3650416"}, "reply_to_user": {"reputation": 1081, "user_id": 1473423, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IgJTk.png?s=128&g=1", "display_name": "bntzio", "link": "https://stackoverflow.com/users/1473423/bntzio"}, "edited": false, "score": 0, "creation_date": 1442369062, "post_id": 32596683, "comment_id": 53049980, "body": "Thanks a ton for that @bntzio ._."}], "answers": [{"tags": [], "owner": {"reputation": 1081, "user_id": 1473423, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IgJTk.png?s=128&g=1", "display_name": "bntzio", "link": "https://stackoverflow.com/users/1473423/bntzio"}, "is_accepted": false, "score": 0, "last_activity_date": 1442363602, "creation_date": 1442363602, "answer_id": 32597846, "question_id": 32596683, "link": "https://stackoverflow.com/questions/32596683/rails-4-how-to-load-a-has-many-association-to-update/32597846#32597846", "title": "Rails 4 How to load a has_many association to update", "body": "<p>There are two things to consider here, the first one:</p>\n\n<ul>\n<li>You should have a column for address in your database. Check your db migrations.</li>\n</ul>\n\n<p>It should look like this:</p>\n\n<pre><code>t.string :address\n</code></pre>\n\n<p>If you don't have that table in your db, then you can't access that variable holding the address, so you need to add it with a migration.</p>\n\n<p><code>rails g migration AddAddressToUsers address:string</code> \nor</p>\n\n<p><code>rails g migration AddAddressToClients address:string</code> (depending on how you have it).</p>\n\n<p>Then do a migration to migrate the changes:</p>\n\n<pre><code>rake db:migrate\n</code></pre>\n\n<p>Reload your server and add the proper code in the view and it should be displayed correctly.</p>\n\n<p>The second thing is:</p>\n\n<ul>\n<li>Check your controller if it contains strong parameters, if yes, then add your :address variable (anyway you need to have that variable in your db, as mentioned before).</li>\n</ul>\n"}], "owner": {"reputation": 49, "user_id": 3650416, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e520cc4f739c11ec695e06a4b53dce34?s=128&d=identicon&r=PG&f=1", "display_name": "user3650416", "link": "https://stackoverflow.com/users/3650416/user3650416"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442372259, "creation_date": 1442355808, "last_edit_date": 1442372259, "question_id": 32596683, "link": "https://stackoverflow.com/questions/32596683/rails-4-how-to-load-a-has-many-association-to-update", "title": "Rails 4 How to load a has_many association to update", "body": "<p>I have a controller called Edit an existing client which does what the name implies. It will load up a client of that name and pull all relevant information if it exists. In the view I have </p>\n\n<pre><code>@client = Client.find_by(:id =&gt; 1) \n</code></pre>\n\n<p>and it loads all the information up correctly for anything that has_one association to Client. However for something like address which a Client has_many of, it does not show at all in the view. How would I fix this?  </p>\n\n<p>Example <a href=\"http://i.stack.imgur.com/mJ610.png\" rel=\"nofollow\">output</a></p>\n\n<p>The address stuff should show up under number of dependents but it does not.</p>\n\n<p>This is the <a href=\"http://pastebin.com/ZDCYZHwq\" rel=\"nofollow\">view</a> </p>\n\n<p>And <a href=\"http://pastebin.com/2FL4if5f\" rel=\"nofollow\">here</a> is the table for addresses</p>\n\n<p><a href=\"http://pastebin.com/uN5Mnbs3\" rel=\"nofollow\">Here</a> is the controller for client</p>\n\n<p><a href=\"http://pastebin.com/uN5Mnbs3\" rel=\"nofollow\">Here</a> are the models</p>\n\n<p><strong>UPDATE</strong> Thank you bntzio. I am actually dumb. It is now pulling the types of addresses as it should, however the form allows you to add a former address and a mailing address. This is handled by a series of bools in the table. Right now it just pulls all three addresses and puts them under \"Present Address\". How would I add logic to pull the correct address for that section? </p>\n\n<p>Sample output <a href=\"http://puu.sh/kcPcW/7f575270de.png\" rel=\"nofollow\">here</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 0, "creation_date": 1442355901, "post_id": 32596645, "comment_id": 53046636, "body": "Do you have <code>bcrypt</code> gem enabled in your Gemfile?"}, {"owner": {"reputation": 714, "user_id": 5266720, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ab80abc7adc0946bc5f0df117b06bfc5?s=128&d=identicon&r=PG&f=1", "display_name": "user3813256", "link": "https://stackoverflow.com/users/5266720/user3813256"}, "reply_to_user": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 0, "creation_date": 1442356004, "post_id": 32596645, "comment_id": 53046670, "body": "yes -  gem &#39;bcrypt&#39;, &#39;~&gt; 3.1.7&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 714, "user_id": 5266720, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ab80abc7adc0946bc5f0df117b06bfc5?s=128&d=identicon&r=PG&f=1", "display_name": "user3813256", "link": "https://stackoverflow.com/users/5266720/user3813256"}, "edited": false, "score": 0, "creation_date": 1442356598, "post_id": 32596763, "comment_id": 53046840, "body": "I am able to save users - I can see them in the database.  the password field is cleartext in the database"}, {"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "reply_to_user": {"reputation": 714, "user_id": 5266720, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ab80abc7adc0946bc5f0df117b06bfc5?s=128&d=identicon&r=PG&f=1", "display_name": "user3813256", "link": "https://stackoverflow.com/users/5266720/user3813256"}, "edited": false, "score": 0, "creation_date": 1442357439, "post_id": 32596763, "comment_id": 53047089, "body": "It throws error because your <code>password_digest</code> is not valid bcrypt hash. I have a feeling that you have overriden <code>User#password=</code> method somewhere. Is it complete <code>User</code> model that you&#39;ve shown in your question?"}, {"owner": {"reputation": 714, "user_id": 5266720, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ab80abc7adc0946bc5f0df117b06bfc5?s=128&d=identicon&r=PG&f=1", "display_name": "user3813256", "link": "https://stackoverflow.com/users/5266720/user3813256"}, "edited": false, "score": 0, "creation_date": 1442357527, "post_id": 32596763, "comment_id": 53047122, "body": "I do not have a password field, I have named it password_digest"}, {"owner": {"reputation": 714, "user_id": 5266720, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ab80abc7adc0946bc5f0df117b06bfc5?s=128&d=identicon&r=PG&f=1", "display_name": "user3813256", "link": "https://stackoverflow.com/users/5266720/user3813256"}, "edited": false, "score": 0, "creation_date": 1442360794, "post_id": 32596763, "comment_id": 53047988, "body": "any thoughts?  the app is still saving pwd in cleartext in the DB"}], "tags": [], "owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "is_accepted": false, "score": 3, "last_activity_date": 1442385969, "last_edit_date": 1442385969, "creation_date": 1442356229, "answer_id": 32596763, "question_id": 32596645, "link": "https://stackoverflow.com/questions/32596645/password-digest-being-stored-in-cleartext-using-rails4-and-use-secure-password/32596763#32596763", "title": "password digest being stored in cleartext using rails4 and use_secure_password", "body": "<p>This is strange, everything should work. Try some examples from the docs in your rails console:</p>\n\n<pre><code>user = User.new(name: 'david', password: '', password_confirmation: 'nomatch')\nuser.save                                                       # =&gt; false, password required\nuser.password = 'mUc3m00RsqyRe'\nuser.save                                                       # =&gt; false, confirmation doesn't match\nuser.password_confirmation = 'mUc3m00RsqyRe'\nuser.save                                                       # =&gt; true\nuser.authenticate('notright')                                   # =&gt; false\nuser.authenticate('mUc3m00RsqyRe')                              # =&gt; user\nUser.find_by(name: 'david').try(:authenticate, 'notright')      # =&gt; false\nUser.find_by(name: 'david').try(:authenticate, 'mUc3m00RsqyRe') # =&gt; user\n</code></pre>\n\n<p>If <code>user.save</code> returns <code>false</code> you may look into <code>user.errors</code> for failed validation messages.</p>\n\n<p><strong>EDIT</strong>: @madcow finally sorted it right. Right now you need to convert your plain-text passwords, stored in <code>password_digest</code> to bcrypt hashes.</p>\n\n<p><strong>NOTE: You won't be able to restore plain-text passwords back using this code! Make sure to backup your table before-hand if you need plain-text passwords.</strong></p>\n\n<p>Try this code for a single user, and, if everything is ok, apply this technique to other users:</p>\n\n<pre><code>user = User.find_by(name: 'david')\nuser.password = user.password_confirmation = user.password_digest\nuser.save!\n</code></pre>\n\n<p>Here we assign to <code>user.password</code> your plain-text password from <code>user.password_digest</code>. Since <code>has_secure_password</code> redefines <code>password=</code> method, your plain-text password should effectively get stored back to <code>password_digest</code> column, but now as a hash. </p>\n\n<p>To update all users:</p>\n\n<pre><code>User.find_each do |user| \n  user.password = user.password_confirmation = user.password_digest\n  user.save!\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 714, "user_id": 5266720, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ab80abc7adc0946bc5f0df117b06bfc5?s=128&d=identicon&r=PG&f=1", "display_name": "user3813256", "link": "https://stackoverflow.com/users/5266720/user3813256"}, "edited": false, "score": 0, "creation_date": 1442358296, "post_id": 32596997, "comment_id": 53047345, "body": "why is the password being saved in cleartext to begin with?  Also, do I need the password_confirmation in my user db migrate file?"}, {"owner": {"reputation": 714, "user_id": 5266720, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ab80abc7adc0946bc5f0df117b06bfc5?s=128&d=identicon&r=PG&f=1", "display_name": "user3813256", "link": "https://stackoverflow.com/users/5266720/user3813256"}, "edited": false, "score": 0, "creation_date": 1442358546, "post_id": 32596997, "comment_id": 53047426, "body": "just using password as opposed to password_digest did not give me an error"}, {"owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "reply_to_user": {"reputation": 714, "user_id": 5266720, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ab80abc7adc0946bc5f0df117b06bfc5?s=128&d=identicon&r=PG&f=1", "display_name": "user3813256", "link": "https://stackoverflow.com/users/5266720/user3813256"}, "edited": false, "score": 0, "creation_date": 1442358981, "post_id": 32596997, "comment_id": 53047563, "body": "That&#39;s correct. Do not set <code>password_digest</code> directly and you should not get an error. You shouldn&#39;t ever need to read/set it directly. That database field is an implementation detail of <code>has_secure_password</code> that should remain encapsulated (hidden) from us developers. ;)"}], "tags": [], "owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "is_accepted": false, "score": 2, "last_activity_date": 1442357790, "creation_date": 1442357790, "answer_id": 32596997, "question_id": 32596645, "link": "https://stackoverflow.com/questions/32596645/password-digest-being-stored-in-cleartext-using-rails4-and-use-secure-password/32596997#32596997", "title": "password digest being stored in cleartext using rails4 and use_secure_password", "body": "<p>You are accidently saving the cleartext password directly in the password digest field, at least in your console example. That is why the password is stored as cleartext and not hashed.</p>\n\n<p>Instead of typing this in your console:</p>\n\n<pre><code>user = User.new(full_name: 'abcd', email: 'abc@abc.com', password_digest: 'abcdef')\n</code></pre>\n\n<p>Enter this:</p>\n\n<pre><code>user = User.new(full_name: 'abcd', email: 'abc@abc.com', password: 'abcdef', password_confirmation: 'abcdef')\nuser.save\n</code></pre>\n\n<p>Then find the user:</p>\n\n<pre><code>User.find_by(full_name: 'abcd').try(:authenticate, 'abcdef')\n</code></pre>\n\n<p>Never set the <code>:password_digest</code> directly. Always set it through the <code>:password</code> and <code>:password_confirmation</code> fields.</p>\n\n<p>You are getting that invalid hash error, by the way, because it is trying to decrypt your cleartext (not a valid hash) <code>:password_digest</code> value.</p>\n"}], "owner": {"reputation": 714, "user_id": 5266720, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ab80abc7adc0946bc5f0df117b06bfc5?s=128&d=identicon&r=PG&f=1", "display_name": "user3813256", "link": "https://stackoverflow.com/users/5266720/user3813256"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2441, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1442385969, "creation_date": 1442355600, "last_edit_date": 1442357085, "question_id": 32596645, "link": "https://stackoverflow.com/questions/32596645/password-digest-being-stored-in-cleartext-using-rails4-and-use-secure-password", "title": "password digest being stored in cleartext using rails4 and use_secure_password", "body": "<p>I observed that the password digest is not working correctly in my rails 4 app - the password digest is being stored in cleartext in the database.  </p>\n\n<p><strong>user.rb</strong></p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n   has_secure_password\n\n   validates :password_digest, length: { minimum: 6 }\n\nend\n</code></pre>\n\n<p>My user db migrate file is as follows:</p>\n\n<pre><code>class CreateUsers &lt; ActiveRecord::Migration\n  def change\n    create_table :users do |t|\n      t.string :full_name\n      t.string :email\n      t.string :password_digest\n\n      t.timestamps null: false\n    end\n  end\nend\n</code></pre>\n\n<p>Any ideas what I am doing wrong?</p>\n\n<p><strong>Edit</strong>\nI have bcrypt enabled in Gemfile (I ran bundle install)</p>\n\n<pre><code> gem 'bcrypt', '~&gt; 3.1.7'\n</code></pre>\n\n<p>When I try testing in rails console, I get an invalid hash error:</p>\n\n<pre><code>2.2.1 :011 &gt;   user = User.new(full_name: 'abcd', email: 'abc@abc.com', password_digest: 'abcdef')\n =&gt; #&lt;User id: nil, full_name: \"abcd\", email: \"abc@abc.com\", password_digest: \"abcdef\", created_at: nil, updated_at: nil&gt;\n2.2.1 :012 &gt; User.find_by(full_name: 'david').try(:authenticate, 'abcdef')\n  User Load (0.2ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"full_name\" = ? LIMIT 1  [[\"full_name\", \"david\"]]\nBCrypt::Errors::InvalidHash: invalid hash\n        from /usr/local/rvm/gems/ruby-2.2.1/gems/bcrypt-3.1.10/lib/bcrypt/password.rb:60:in `initialize'\n        from /usr/local/rvm/gems/ruby-2.2.1/gems/activemodel-4.2.4/lib/active_model/secure_password.rb:102:in `new'\n        from /usr/local/rvm/gems/ruby-2.2.1/gems/activemodel-4.2.4/lib/active_model/secure_password.rb:102:in `authenticate'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 4180, "user_id": 1691511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36bf62da744cbd07d704eb3d0b27439?s=128&d=identicon&r=PG", "display_name": "ahmacleod", "link": "https://stackoverflow.com/users/1691511/ahmacleod"}, "is_accepted": false, "score": 1, "last_activity_date": 1442356549, "creation_date": 1442356549, "answer_id": 32596811, "question_id": 32596365, "link": "https://stackoverflow.com/questions/32596365/rails4-authentication-with-has-secure-password-not-working/32596811#32596811", "title": "rails4 authentication with has_secure_password not working", "body": "<p>The session fields from your form will be passed to your controller under <code>params[:session]</code>, so you want to use</p>\n\n<p><code>user = User.find_by_email(params[:session][:email])</code></p>\n\n<p>rather than</p>\n\n<p><code>user = User.find_by_email(params[:email])</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2317, "user_id": 5314268, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc78ae9c49596635d47303e28831c2fd?s=128&d=identicon&r=PG&f=1", "display_name": "madcow", "link": "https://stackoverflow.com/users/5314268/madcow"}, "is_accepted": false, "score": 2, "last_activity_date": 1442359750, "creation_date": 1442359750, "answer_id": 32597304, "question_id": 32596365, "link": "https://stackoverflow.com/questions/32596365/rails4-authentication-with-has-secure-password-not-working/32597304#32597304", "title": "rails4 authentication with has_secure_password not working", "body": "<p>You also have a significant bug in how you validate the password length. Do <strong>not</strong> validate the length of the <em>digest</em> (which will always be longer than 6 characters, btw). Validate the length of the <em>password</em>.</p>\n\n<p>Instead of:</p>\n\n<pre><code>validates :password_digest, length: { minimum: 6 }\n</code></pre>\n\n<p>Use:</p>\n\n<pre><code>validates :password, length: { minimum: 6 }\n</code></pre>\n"}], "owner": {"reputation": 714, "user_id": 5266720, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ab80abc7adc0946bc5f0df117b06bfc5?s=128&d=identicon&r=PG&f=1", "display_name": "user3813256", "link": "https://stackoverflow.com/users/5266720/user3813256"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1442359750, "creation_date": 1442354227, "last_edit_date": 1442355613, "question_id": 32596365, "link": "https://stackoverflow.com/questions/32596365/rails4-authentication-with-has-secure-password-not-working", "title": "rails4 authentication with has_secure_password not working", "body": "<p>I am getting the following log fil output when I logon in the log file:</p>\n\n<pre><code>Started POST \"/login\" for x.x.x.x at 2015-09-15 17:40:56 -0400\nProcessing by SessionsController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"MO/Efr8/893XItcJdmNGsrq1iZ0\n94AS/+GubuIRcpIhqZcWoRXyFnOK15TjoJOtfD9BUhDRKV2fpb1Gk1EqTSw==\", \"session\"=&gt;{\"e\nmail\"=&gt;\"5@5.com\", \"password\"=&gt;\"[FILTERED]\"}, \"commit\"=&gt;\"Log in\"}\n  User Load (0.3ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\"\n.\"email\" IS NULL LIMIT 1\n  Rendered sessions/new.html.erb within layouts/application (1.3ms)\n</code></pre>\n\n<p><strong>user.rb</strong></p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n   has_secure_password\n\n   validates :password_digest, length: { minimum: 6 }\n\nend\n</code></pre>\n\n<p>The new.html in app/view/sessions is as follows</p>\n\n<p><strong>new.html.erb in app/view/sessions</strong></p>\n\n<pre><code>&lt;% provide(:title, \"Log in\") %&gt;\n&lt;h1&gt;Log in&lt;/h1&gt;\n\n&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md-6 col-md-offset-3\"&gt;\n    &lt;%= form_for(:session, url: login_path) do |f| %&gt;\n\n      &lt;%= f.label :email %&gt;\n      &lt;%= f.email_field :email, class: 'form-control' %&gt;\n\n      &lt;%= f.label :password %&gt;\n      &lt;%= f.password_field :password, class: 'form-control' %&gt;\n\n      &lt;%= f.submit \"Log in\", class: \"btn btn-primary\" %&gt;\n    &lt;% end %&gt;\n\n    &lt;p&gt;New user? &lt;%= link_to \"Sign up now!\", signup_path %&gt;&lt;/p&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>My application.html.erb file is as follows:</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n  &lt;title&gt;RailsBlog&lt;/title&gt;\n  &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' =&gt; true %&gt;\n  &lt;%= javascript_include_tag 'application' %&gt;\n  &lt;%= javascript_include_tag 'application', 'data-turbolinks-track' =&gt; true %&gt;\n  &lt;%= csrf_meta_tags %&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n          &lt;div class=\"container\"&gt;\n    &lt;%= link_to \"sample app\", root_path, id: \"logo\" %&gt;\n    &lt;nav&gt;\n      &lt;ul class=\"nav navbar-nav navbar-right\"&gt;\n        &lt;li&gt;&lt;%= link_to \"Home\", root_path %&gt;&lt;/li&gt;\n        &lt;% if logged_in? %&gt;  Welcome, &lt;%= current_user.email %&gt;\n          &lt;li&gt;&lt;%= link_to \"Users\", '#' %&gt;&lt;/li&gt;\n          &lt;li class=\"dropdown\"&gt;\n            &lt;a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\"&gt;\n              Account &lt;b class=\"caret\"&gt;&lt;/b&gt;\n            &lt;/a&gt;\n            &lt;ul class=\"dropdown-menu\"&gt;\n              &lt;li&gt;&lt;%= link_to \"Profile\", current_user %&gt;&lt;/li&gt;\n              &lt;li&gt;&lt;%= link_to \"Settings\", '#' %&gt;&lt;/li&gt;\n              &lt;li class=\"divider\"&gt;&lt;/li&gt;\n              &lt;li&gt;\n                &lt;%= link_to \"Log out\", logout_path, method: \"delete\" %&gt;\n              &lt;/li&gt;\n            &lt;/ul&gt;\n          &lt;/li&gt;\n        &lt;% else %&gt;\n          &lt;li&gt;&lt;%= link_to \"Log in\", login_path %&gt;&lt;/li&gt;\n        &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/nav&gt;\n  &lt;/div&gt;\n\n&lt;%= yield %&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>My session.controller file is as follows:</p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n  def new\n  end\n\n  def create\n    user = User.find_by_email(params[:email])\n    if user &amp;&amp; user.authenticate(params[:password])\n      session[:user_id] = user.id\n      redirect_to root_url, :notice =&gt; \"Logged in!\"\n    else\n      flash.now.alert = \"Invalid email or password\"\n      render \"new\"\n    end\n  end\n\n  def destroy\n    session[:user_id] = nil\n    redirect_to root_url, :notice =&gt; \"Logged out!\"\n  end\nend\n</code></pre>\n\n<p>My application.controller file is as follows</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  # Prevent CSRF attacks by raising an exception.\n  # For APIs, you may want to use :null_session instead.\n  protect_from_forgery with: :exception\n\ninclude SessionsHelper\n=begin\n  private\n   def current_user\n      @current_user ||= User.find(session[:user_id]) if session[:user_id]\n   end\n\n   helper_method :current_usera\n=end\n    helper_method :current_user, :logged_in?\n\n    def current_user\n       @current_user ||= User.find(session[:user_id]) if session[:user_id]\n   end\n\n  def logged_in?\n      current_user != nil\n   end\nend\n</code></pre>\n\n<p>My SessionsHelper as as follows (from helper directory)</p>\n\n<pre><code>module SessionsHelper\n#Logs in the given user\n  def log_in(user)\n      session[:user_id] = user.id\n  end\n\n#returns the current logged-in user (if\n  def current_user\n     @current_user ||= User.find(session[:user_id]) if session[:user_id]\nend\n\nend\n</code></pre>\n\n<p><strong>routes.rb file:</strong></p>\n\n<pre><code>get 'signup' =&gt; 'users#new'\nget 'login' =&gt; 'sessions#new'\npost 'login' =&gt; 'sessions#create'\ndelete 'logout' =&gt; 'sessions#destroy'\n  resources :users   # , only: [:new, :create, :destroy]\n  resources :authors\n  resources :posts\n  resources :sessions\n # get 'posts/index'\n\n    root 'users#index'\n</code></pre>\n\n<p>I have bcrypt enabled in my Gem file and I ran bundle install after that as well.  </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 3614, "user_id": 1569930, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7bc43a689388dd4697947ffe8f4c9dcd?s=128&d=identicon&r=PG", "display_name": "eirikir", "link": "https://stackoverflow.com/users/1569930/eirikir"}, "is_accepted": true, "score": 2, "last_activity_date": 1442353954, "last_edit_date": 1442353954, "creation_date": 1442353636, "answer_id": 32596232, "question_id": 32596145, "link": "https://stackoverflow.com/questions/32596145/conditional-value-in-helper-method-in-ruby/32596232#32596232", "title": "Conditional value in helper method in ruby", "body": "<p>The second argument of <a href=\"http://apidock.com/rails/ActionView/Helpers/FormTagHelper/number_field_tag\" rel=\"nofollow\"><code>number_field_tag</code></a> is actually the value, so you can certainly set it there with a ternary operator (which I've simplified based on the fact that <code>nil</code> is falsy):</p>\n\n<pre><code>number_field_tag 'somearray[][somefield]', (params[:somearray] ? params[:somearray][0][:quantity] : nil), min: 0.000, step: 0.001, class: \"form-control\", :'aria-label' =&gt; \"Quantity\", onchange: \"change_total(this)\"\n</code></pre>\n\n<p>However, complex in-line view operations are best refactored to a helper file. Helper files are defined in the app/helpers directory and named based on the controller: if you have a <code>PagesController</code>, you'd want to add the method to <code>module PagesHelper</code> in app/helpers/pages_helper.rb (note that the <code>params</code> method is still accessible from the helper file even without passing it in):</p>\n\n<pre><code>def somearray_value\n  params[:somearray] ? params[:somearray][0][:quantity] : nil\nend\n</code></pre>\n\n<p>Then you can call it in the view:</p>\n\n<pre><code>number_field_tag 'somearray[][somefield]', somearray_value, min: 0.000, step: 0.001, class: \"form-control\", :'aria-label' =&gt; \"Quantity\", onchange: \"change_total(this)\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16655, "user_id": 584440, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b5c3b0c74c564105de0415899c0d5999?s=128&d=identicon&r=PG", "display_name": "rubyprince", "link": "https://stackoverflow.com/users/584440/rubyprince"}, "is_accepted": false, "score": 0, "last_activity_date": 1442354757, "creation_date": 1442354757, "answer_id": 32596467, "question_id": 32596145, "link": "https://stackoverflow.com/questions/32596145/conditional-value-in-helper-method-in-ruby/32596467#32596467", "title": "Conditional value in helper method in ruby", "body": "<p>You can use <a href=\"http://apidock.com/rails/Object/try\" rel=\"nofollow\">try</a> for that:</p>\n\n<pre><code>&lt;%= number_field_tag 'somearray[][somefield]', params[:somearray].try(:first).try(:fetch, :quantity), {min: 0.000, step: 0.001, class: \"form-control\", :'aria-label' =&gt; \"Quantity\" ,onchange: \"change_total(this)\" %&gt;\n</code></pre>\n"}], "owner": {"reputation": 2246, "user_id": 598070, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3122149fc9c817896970d8ed45f1f1e3?s=128&d=identicon&r=PG", "display_name": "Mr_LinDowsMac", "link": "https://stackoverflow.com/users/598070/mr-lindowsmac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 1, "accepted_answer_id": 32596232, "answer_count": 2, "score": 0, "last_activity_date": 1442354757, "creation_date": 1442353221, "question_id": 32596145, "link": "https://stackoverflow.com/questions/32596145/conditional-value-in-helper-method-in-ruby", "title": "Conditional value in helper method in ruby", "body": "<p>I would like to set a parameter in this helper method, but I'm not sure if is possible to use a ternary operator or something to set a value with some condition.</p>\n\n<pre><code>&lt;%= number_field_tag 'somearray[][somefield]', nil, {min: 0.000, step: 0.001, class: \"form-control\", :'aria-label' =&gt; \"Quantity\" ,onchange: \"change_total(this)\",value: 'VALUE SHOULD BE HERE'} %&gt;\n</code></pre>\n\n<p>The condition is something like this:</p>\n\n<pre><code>if params['somearray'].nil? != true\n   return params['somearray'].first[\"quantity\"]\nelse\n   return nil\nend\n</code></pre>\n"}, {"tags": ["ruby", "csv", "blank-line"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1442357039, "post_id": 32595803, "comment_id": 53046979, "body": "How are you reading the CSV file, and parsing the lines? This is a common problem when people ignore the built-in <a href=\"http://ruby-doc.org/stdlib-2.2.3/libdoc/csv/rdoc/index.html\" rel=\"nofollow noreferrer\">CSV</a> class and try to roll their own. We need a minimal example of your code demonstrating how you&#39;re reading/parsing."}], "answers": [{"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1442352120, "creation_date": 1442352120, "answer_id": 32595868, "question_id": 32595803, "link": "https://stackoverflow.com/questions/32595803/read-a-blank-column-in-a-csv-file-with-ruby/32595868#32595868", "title": "Read a blank column in a CSV file with Ruby", "body": "<p>Use <code>p product_id_b</code> to print the value in an easy-to-read form. <code>p</code> is better than <code>puts</code> for that purpose.  Also do <code>p product_id_b.class</code> to check if it's a <code>nil</code> object.</p>\n"}, {"tags": [], "owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "is_accepted": true, "score": 0, "last_activity_date": 1442352178, "creation_date": 1442352178, "answer_id": 32595876, "question_id": 32595803, "link": "https://stackoverflow.com/questions/32595803/read-a-blank-column-in-a-csv-file-with-ruby/32595876#32595876", "title": "Read a blank column in a CSV file with Ruby", "body": "<p>If you've used <code>CSV.parse</code> for parsing (I hope you do), you could mention that empty fields will be parsed as <code>nil</code>s:</p>\n\n<pre><code>CSV.parse('550012207,1,,,Y,,,,,Y,,')\n# =&gt; [[\"550012207\", \"1\", nil, nil, \"Y\", nil, nil, nil, nil, \"Y\", nil, nil]]\n</code></pre>\n\n<p>Solution: <code>ActiveSupport</code> library (and Rails) gives us very handy method: <code>.blank?</code>, you may use it to test if some value is blank: empty, consists only from spaces or nil.</p>\n\n<pre><code>''.blank? # =&gt; true\n'    '.blank? # =&gt; true\nnil.blank? # =&gt; true\n5.blank?   # =&gt; false\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5144441, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9ad5d3e6838de6951ca8e01c344b285b?s=128&d=identicon&r=PG&f=1", "display_name": "Troy", "link": "https://stackoverflow.com/users/5144441/troy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 843, "favorite_count": 1, "accepted_answer_id": 32595876, "answer_count": 2, "score": 1, "last_activity_date": 1442356940, "creation_date": 1442351860, "last_edit_date": 1442356940, "question_id": 32595803, "link": "https://stackoverflow.com/questions/32595803/read-a-blank-column-in-a-csv-file-with-ruby", "title": "Read a blank column in a CSV file with Ruby", "body": "<p>One line of the CSV is:</p>\n\n<pre><code>550012207,1,,,Y,,,,,Y,,\n</code></pre>\n\n<p>I'm doing:</p>\n\n<pre><code>product_id_a = data_values[0]\nquantity_a = data_values[1]\nproduct_id_b = data_values[5]\n</code></pre>\n\n<p>Each line is a scenario to put an order through, and some scenarios call for two products to be added to a cart. My problem is when there is only one item and column 5 is left blank.</p>\n\n<p>I originally wrote:</p>\n\n<pre><code>if product_id_b == '' || ' '\n   do nothing\nelse\n  code to navigate to second product\nend\n</code></pre>\n\n<p>I used <code>'' || ' '</code> to try either one because when I tried them separately it ignores the <code>if</code> and does the <code>else</code>. I then wrote this just to double check:</p>\n\n<pre><code>if product_id_b == ' '\n    puts '1'\n  elsif product_id_b == ''\n    puts '2'\n  elsif product_id_b != '' || ' '\n    puts 'nothing'\n  end\n</code></pre>\n\n<p>And it puts \"nothing\", so I have no idea what the value is. When I do:</p>\n\n<pre><code>  puts product_id_a\n  puts product_id_b\n  puts quantity_a \n</code></pre>\n\n<p>It outputs</p>\n\n<pre><code> 550012207, , 1\n</code></pre>\n\n<p>How do I identify this unknown value?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sorting", "activerecord", "rails-activerecord"], "comments": [{"owner": {"reputation": 596, "user_id": 5048945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iG5i7.png?s=128&g=1", "display_name": "mmike", "link": "https://stackoverflow.com/users/5048945/mmike"}, "edited": false, "score": 0, "creation_date": 1473667357, "post_id": 32595730, "comment_id": 66213409, "body": "Member.all.sort_by { |member| @executive.include? member.executive_position }"}], "answers": [{"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 2, "last_activity_date": 1442351658, "creation_date": 1442351658, "answer_id": 32595753, "question_id": 32595730, "link": "https://stackoverflow.com/questions/32595730/rails-how-to-sort-objects-by-an-instance-array/32595753#32595753", "title": "Rails, how to sort objects by an instance array", "body": "<pre><code>Member.all.sort_by { |member| @executive.index(member.executive_position) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16655, "user_id": 584440, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b5c3b0c74c564105de0415899c0d5999?s=128&d=identicon&r=PG", "display_name": "rubyprince", "link": "https://stackoverflow.com/users/584440/rubyprince"}, "is_accepted": false, "score": 0, "last_activity_date": 1442352669, "last_edit_date": 1442352669, "creation_date": 1442351975, "answer_id": 32595836, "question_id": 32595730, "link": "https://stackoverflow.com/questions/32595730/rails-how-to-sort-objects-by-an-instance-array/32595836#32595836", "title": "Rails, how to sort objects by an instance array", "body": "<pre><code>Member.all.sort_by { |member| @executive.index(member.executive_position) }\n</code></pre>\n\n<p>If this is used in other places also, I would go on further to add a method in the <code>Member</code> model like this:</p>\n\n<pre><code># member.rb\nclass Member &lt; ActiveRecord::Base\n  ...\n  EXECUTIVES = ['President', 'Vice President', 'Treasurer',\n    'Secretary', 'Director of Programs', 'Director of Strategic Partnerships', \n    'Director of Public Relations', 'Director of Publications', \n    'Director of Community Service', 'Director of Fundraising', \n    'Historian', 'Digital Administrator']\n\n  def position\n    EXECUTIVES.index(executive_position)\n  end\n\nend\n</code></pre>\n\n<p>Then the code will be</p>\n\n<pre><code>Member.all.sort_by { |member| member.position }\n</code></pre>\n\n<p>or shorter</p>\n\n<pre><code>Member.all.sort_by(&amp;:position)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": false, "score": 0, "last_activity_date": 1442383821, "creation_date": 1442383821, "answer_id": 32600963, "question_id": 32595730, "link": "https://stackoverflow.com/questions/32595730/rails-how-to-sort-objects-by-an-instance-array/32600963#32600963", "title": "Rails, how to sort objects by an instance array", "body": "<p>I think you have the logic in the wrong place. You should be using an SQL CASE statement to do the sorting inside the database, that will make it easier to combine this sorting with other query components (such as subqueries and secondary sorting keys). For example, you could have a constant like this:</p>\n\n<pre><code>EXECUTIVES = [ 'President', ... ]\n</code></pre>\n\n<p>and then a scope like this in your model:</p>\n\n<pre><code>def self.order_by_rank\n  q = connection.method(:quote)\n  order([\n    'case members.executive_position',\n    *EXECUTIVES.length.each_with_index.map { |s, i| \"when #{q[s]} then #{i}\" },\n    \"else #{EXECUTIVES.length}\",\n    'end'\n  ].join(' '))\nend\n</code></pre>\n\n<p>With that you could say things like:</p>\n\n<pre><code>Member.order_by_rank\nMember.where(...).order_by_rank.order(:name)\n</code></pre>\n\n<p>A straight forward modification to the <code>order_by_rank</code> scope would give you an <code>in_this_order('President', 'Vice President', 'Treasurer', ...)</code> scope:</p>\n\n<pre><code>def self.in_this_order(*titles)\n  q = connection.method(:quote)\n  order([\n    'case members.executive_position',\n    *titles.each_with_index.map { |s, i| \"when #{q[s]} then #{i}\" },\n    \"else #{titles.length}\",\n    'end'\n  ].join(' '))\nend\n</code></pre>\n\n<p>You could also put the titles and their order in a database table:</p>\n\n<pre><code>title            | pos\n-----------------+----\n'President'      | 1\n'Vice President' | 2\n...\n</code></pre>\n\n<p>and then JOIN to it and <code>ORDER BY pos</code>.</p>\n"}], "owner": {"reputation": 17, "user_id": 3685530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93444a391d65844126f55b40f84d8503?s=128&d=identicon&r=PG&f=1", "display_name": "Ferrell427", "link": "https://stackoverflow.com/users/3685530/ferrell427"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "accepted_answer_id": 32595753, "answer_count": 3, "score": 1, "last_activity_date": 1442383844, "creation_date": 1442351549, "last_edit_date": 1442383844, "question_id": 32595730, "link": "https://stackoverflow.com/questions/32595730/rails-how-to-sort-objects-by-an-instance-array", "title": "Rails, how to sort objects by an instance array", "body": "<p>In a Ruby on Rails application, I have a class called Members with each object having an attribute called executive position that is one of the strings in this array</p>\n\n<pre><code>@executive = ['President', 'Vice President', 'Treasurer', 'Secretary', 'Director of Programs', 'Director of Strategic Partnerships', 'Director of Public Relations', 'Director of Publications', 'Director of Community Service', 'Director of Fundraising', 'Historian', 'Digital Administrator']\n</code></pre>\n\n<p>I want to sort them in this order, showing the president first, then Vice President etc.</p>\n\n<pre><code>Member.all.sort_by {|member| member.executive_position == @executive}\n</code></pre>\n"}, {"tags": ["ruby", "gem", "instagram", "instagram-api"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 1385169, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/AUFeZ.jpg?s=128&g=1", "display_name": "Valentin", "link": "https://stackoverflow.com/users/1385169/valentin"}, "edited": false, "score": 0, "creation_date": 1442405778, "post_id": 32602291, "comment_id": 53067539, "body": "I see, that&#39;s why I Update instagram gem, where all necessary movements for creating sign request already done"}, {"owner": {"reputation": 713, "user_id": 4234949, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/iGWnW.jpg?s=128&g=1", "display_name": "anjnkmr", "link": "https://stackoverflow.com/users/4234949/anjnkmr"}, "edited": false, "score": 0, "creation_date": 1464413456, "post_id": 32602291, "comment_id": 62486746, "body": "Can you please tell me how to make signed calls with instagram ruby gem, I updated the gem, and In client configuration is as follows <code>Instagram.client({:client_id =&gt; ENV[&quot;INSTAGRAM_CLIENT_ID&quot;],:access_token =&gt; actkn, :client_secret =&gt; ENV[&quot;INSTAGRAM_CLIENT_SECRET&quot;], :sign_requests =&gt; true})</code>, but it still shows above said error <code>403 - sig missing</code>  is i&#39;m missing something"}], "tags": [], "owner": {"reputation": 1, "user_id": 2557888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7085fce91eab50eb6ee1f5a58c8fefe?s=128&d=identicon&r=PG", "display_name": "AlexKru", "link": "https://stackoverflow.com/users/2557888/alexkru"}, "is_accepted": false, "score": 0, "last_activity_date": 1442388542, "creation_date": 1442388542, "answer_id": 32602291, "question_id": 32595644, "link": "https://stackoverflow.com/questions/32595644/how-to-use-instagram-secure-api-requests-with-ruby-gem/32602291#32602291", "title": "How to use instagram secure API requests with ruby gem?", "body": "<p>You use older types of signatures</p>\n\n<p>On September 1, instagram only accepts new type <a href=\"https://instagram.com/developer/secure-api-requests/\" rel=\"nofollow\">https://instagram.com/developer/secure-api-requests/</a></p>\n"}], "owner": {"reputation": 53, "user_id": 1385169, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/AUFeZ.jpg?s=128&g=1", "display_name": "Valentin", "link": "https://stackoverflow.com/users/1385169/valentin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 378, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442388542, "creation_date": 1442351215, "last_edit_date": 1442351816, "question_id": 32595644, "link": "https://stackoverflow.com/questions/32595644/how-to-use-instagram-secure-api-requests-with-ruby-gem", "title": "How to use instagram secure API requests with ruby gem?", "body": "<p>My steps are:</p>\n\n<ol>\n<li>update gem <code>gem update instagram</code> to instagram-1.1.6</li>\n<li>add <code>config.client_ips = \"100.100.1.0\"</code> to the code (hide real ip)</li>\n<li>check checkbox <code>Enforce signed requests</code> in developer page, click save</li>\n</ol>\n\n<p>But I still get following error:</p>\n\n<pre><code>#&lt;Hashie::Mash code=403 error_message=\"Invalid signed-request: Missing required parameter 'sig'\" error_type=\"OAuthForbiddenException\"&gt;\n</code></pre>\n\n<p>When I try to get posts or create like.</p>\n\n<p>What's going wrong? What additional action needs to be done?</p>\n"}, {"tags": ["ruby", "macos", "jekyll", "osx-elcapitan"], "comments": [{"owner": {"reputation": 2998, "user_id": 691819, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1bcbc663a5a9e0c1b1766a45dd90a236?s=128&d=identicon&r=PG", "display_name": "Alex Palcuie", "link": "https://stackoverflow.com/users/691819/alex-palcuie"}, "edited": false, "score": 0, "creation_date": 1442350988, "post_id": 32595496, "comment_id": 53044739, "body": "Can you please run <code>gem list</code> and paste the output? Did you install ruby using brew or do you have the default installation?"}, {"owner": {"reputation": 2108, "user_id": 1463384, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/vBt5b.jpg?s=128&g=1", "display_name": "thatuxguy", "link": "https://stackoverflow.com/users/1463384/thatuxguy"}, "reply_to_user": {"reputation": 2998, "user_id": 691819, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1bcbc663a5a9e0c1b1766a45dd90a236?s=128&d=identicon&r=PG", "display_name": "Alex Palcuie", "link": "https://stackoverflow.com/users/691819/alex-palcuie"}, "edited": false, "score": 1, "creation_date": 1442565864, "post_id": 32595496, "comment_id": 53142568, "body": "Hi @AlexPalcuie i worked out what the issue was. All my gems were installed and all appeared to be ok. It was simply cause xcode and the command line tools had not updated."}], "answers": [{"tags": [], "owner": {"reputation": 2108, "user_id": 1463384, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/vBt5b.jpg?s=128&g=1", "display_name": "thatuxguy", "link": "https://stackoverflow.com/users/1463384/thatuxguy"}, "is_accepted": true, "score": 0, "last_activity_date": 1446456200, "last_edit_date": 1446456200, "creation_date": 1442565817, "answer_id": 32647613, "question_id": 32595496, "link": "https://stackoverflow.com/questions/32595496/jekyll-and-osx-10-11-gm/32647613#32647613", "title": "Jekyll and OSX 10.11 GM", "body": "<p>So i worked out what the actual issue was!</p>\n\n<p>Apple has added System Integrity Protection (SIP) to increase security. This means that Jekyll has been effected as it uses the default Ruby install.\n<a href=\"http://www.macworld.com/article/2948140/os-x/private-i-el-capitans-system-integrity-protection-will-shift-utilities-functions.html\" rel=\"nofollow\">More details on SIP</a>.</p>\n\n<p>To get around this other users have been installing the Homebrew version. It's also likely that Jekyll v3.0 will start to move towards using this version too.</p>\n\n<ul>\n<li><p>Install the Xcode command line utilities:</p>\n\n<pre><code>xcode-select --install\n</code></pre></li>\n<li><p>Install Homebrew (instructions at <a href=\"http://brew.sh\" rel=\"nofollow\">http://brew.sh</a>)</p></li>\n<li><p>Modify <code>$PATH</code> to use Homebrew:</p>\n\n<pre><code>export PATH=/usr/local/bin:$PATH\n</code></pre></li>\n<li><p>Modify <code>$PATH</code> for GUI apps:</p>\n\n<pre><code>launchctl setenv PATH \"/usr/local/bin:$PATH\"\n</code></pre></li>\n<li><p>Install the latest Ruby:</p>\n\n<pre><code>brew install ruby\n</code></pre></li>\n<li><p>Install the latest Jekyll:</p>\n\n<pre><code>gem install jekyll\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 2108, "user_id": 1463384, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/vBt5b.jpg?s=128&g=1", "display_name": "thatuxguy", "link": "https://stackoverflow.com/users/1463384/thatuxguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 1, "accepted_answer_id": 32647613, "answer_count": 1, "score": 0, "last_activity_date": 1446456200, "creation_date": 1442350654, "question_id": 32595496, "link": "https://stackoverflow.com/questions/32595496/jekyll-and-osx-10-11-gm", "title": "Jekyll and OSX 10.11 GM", "body": "<p>I have updated to OSX 10.11 (GM) and have gone to work on some Jekyll projects. However when i try to serve the jekyll site i am getting the following error:-</p>\n\n<pre><code>-bash: jekyll: command not found\nAlans-MacBook:new-site alan$\n</code></pre>\n\n<p>I have been looking around to see if there is a solution, but have yet to find one that can help.</p>\n\n<p>I was wondering if anyone has also ran into this, and if there is a solution. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "activeadmin"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1442387889, "post_id": 32595122, "comment_id": 53056256, "body": "always run <code>heroku restart -a app_name</code> after migrations."}, {"owner": {"reputation": 2071, "user_id": 1499260, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cf6ki.jpg?s=128&g=1", "display_name": "jackerman09", "link": "https://stackoverflow.com/users/1499260/jackerman09"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1442414000, "post_id": 32595122, "comment_id": 53073878, "body": "@AndreyDeineko, thanks, will this affect anyone using the app at the time?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1442417493, "post_id": 32595122, "comment_id": 53076403, "body": "In theory it shouldn&#39;t :)"}], "answers": [{"tags": [], "owner": {"reputation": 2788, "user_id": 4152876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d538506cb7d350250906243645c28d4?s=128&d=identicon&r=PG", "display_name": "Timo Schilling", "link": "https://stackoverflow.com/users/4152876/timo-schilling"}, "is_accepted": true, "score": 2, "last_activity_date": 1442386337, "creation_date": 1442386337, "answer_id": 32601581, "question_id": 32595122, "link": "https://stackoverflow.com/questions/32595122/new-field-added-to-model-now-active-admin-working-locally-but-not-in-producti/32601581#32601581", "title": "New field added to model - Now active_admin working locally, but not in production (Heroku)", "body": "<p>That can happen if you or someone starts the app by a request to <a href=\"http://your-app.heroku.com\" rel=\"nofollow\">http://your-app.heroku.com</a>, before you migrated the database. Whats happen is app caches the old database state without <code>car_color</code>. You need to restart your app, then it should work.</p>\n"}], "owner": {"reputation": 2071, "user_id": 1499260, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cf6ki.jpg?s=128&g=1", "display_name": "jackerman09", "link": "https://stackoverflow.com/users/1499260/jackerman09"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 32601581, "answer_count": 1, "score": 1, "last_activity_date": 1442386337, "creation_date": 1442349223, "question_id": 32595122, "link": "https://stackoverflow.com/questions/32595122/new-field-added-to-model-now-active-admin-working-locally-but-not-in-producti", "title": "New field added to model - Now active_admin working locally, but not in production (Heroku)", "body": "<p>I added a new field <code>car_color</code> to my Car model, and I logged in to <code>active_admin</code> locally and I see the new column on my Cars page, I can add the car's color when I edit the record, and I can set the color when I create a new one. Additionally, I was able to import a CSV with a header <code>car_color</code> using <code>active_admin_import</code>. This all worked as expected.</p>\n\n<p>I updated my controller to permit <code>car_color</code> and I updated <code>admin/car.rb</code> to permit <code>car_color</code> as well.</p>\n\n<p>I pushed the changes to Heroku and migrated the database using <code>heroku run rake db:migrate</code>, which looks like it worked.</p>\n\n<pre><code>Running `rake db:migrate` attached to terminal... up, run.7812\nMigrating to AddCarColorToCar (20150915191640)\n== 20150915191640 AddCarColorToCar: migrating =================================\n-- add_column(:cars, :car_color, :string)\n   -&gt; 0.0016s\n== 20150915191640 AddCarColorToCar: migrated (0.0017s) ========================\n</code></pre>\n\n<p>However, when I try to do anything with <code>active_admin</code> in production, it's as if the <code>car_color</code> field does not exist. There is no <code>car_color</code> column in the table, it is not there when I try to create a new car or edit an existing car, and trying to import a CSV with the header <code>car_color</code> throws this error:</p>\n\n<pre><code>undefined method `car_color=' for #&lt;Car:0x007fcaa5e51ad8&gt;\n</code></pre>\n\n<p>Also, when I do <code>heroku run console</code>, I am able to view and set the <code>car_color</code> on a Car with no problem, so it seems like the issue is with <code>active_admin</code>, not with the migration. Additionally, running <code>heroku pg:psql</code> and looking at the <code>cars</code> table shows the new <code>car_color</code> field there.</p>\n\n<p>Any idea why this would work perfectly in development but not in production?</p>\n"}, {"tags": ["ruby", "rack"], "answers": [{"comments": [{"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1442354769, "post_id": 32595088, "comment_id": 53046257, "body": "What if you want to use a middleware before the app?"}, {"owner": {"reputation": 6531, "user_id": 1614607, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j5OdR.jpg?s=128&g=1", "display_name": "Jacob Brown", "link": "https://stackoverflow.com/users/1614607/jacob-brown"}, "reply_to_user": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 3, "creation_date": 1442412183, "post_id": 32595088, "comment_id": 53072452, "body": "You would probably want to do that inside your <code>Rack::Builder.new</code> block. Both <code>Rack::Handler::&lt;server&gt;.run</code> and a <code>run</code> statement inside <code>config.ru</code> are going to block further script processing to respond to HTTP requests."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1442421961, "post_id": 32595088, "comment_id": 53079349, "body": "How do you figure this stuff out?"}, {"owner": {"reputation": 6531, "user_id": 1614607, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j5OdR.jpg?s=128&g=1", "display_name": "Jacob Brown", "link": "https://stackoverflow.com/users/1614607/jacob-brown"}, "reply_to_user": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 2, "creation_date": 1442422934, "post_id": 32595088, "comment_id": 53079911, "body": "Glancing at your profile it seems like you have a pretty solid grasp of how Rack works! My limited knowledge of Rack comes mostly from reading the source code of <a href=\"https://github.com/rack/rack-contrib\" rel=\"nofollow noreferrer\">Rack-Contrib</a> (most of these utilities are short and easy to follow), and <a href=\"https://github.com/soveran/cuba\" rel=\"nofollow noreferrer\">Cuba</a>, and reading a handful of articles online on Rack Middleware and how to use Rack directly. I don&#39;t know where I discovered <code>Handler.run</code> initially..."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1442424163, "post_id": 32595088, "comment_id": 53080609, "body": "I wish I had a solid grasp! Thanks for the info."}], "tags": [], "owner": {"reputation": 6531, "user_id": 1614607, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/j5OdR.jpg?s=128&g=1", "display_name": "Jacob Brown", "link": "https://stackoverflow.com/users/1614607/jacob-brown"}, "is_accepted": true, "score": 13, "last_activity_date": 1442349098, "creation_date": 1442349098, "answer_id": 32595088, "question_id": 32594945, "link": "https://stackoverflow.com/questions/32594945/how-to-set-port-for-rack-app/32595088#32595088", "title": "How to set port for Rack app?", "body": "<p>Try:</p>\n\n<pre><code>Rack::Handler.default.run(app, :Port =&gt; 3000)\n</code></pre>\n\n<p>Although it would be more typical to run your app in a <code>config.ru</code> file and specify port as a command line option to <code>rackup</code>, e.g.: <code>rackup -p 3000</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1945, "user_id": 770670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/96b97ba8e44ff9ba58309e4e64a87f9b?s=128&d=identicon&r=PG", "display_name": "Michael K Madison", "link": "https://stackoverflow.com/users/770670/michael-k-madison"}, "is_accepted": false, "score": 0, "last_activity_date": 1552184229, "creation_date": 1552184229, "answer_id": 55083857, "question_id": 32594945, "link": "https://stackoverflow.com/questions/32594945/how-to-set-port-for-rack-app/55083857#55083857", "title": "How to set port for Rack app?", "body": "<p>When you <code>rackup</code> just specify it with option <code>-p</code> so: </p>\n\n<p><code>rackup -p 8808</code> would work just fine. </p>\n"}], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8093, "favorite_count": 2, "accepted_answer_id": 32595088, "answer_count": 2, "score": 5, "last_activity_date": 1552184229, "creation_date": 1442348521, "question_id": 32594945, "link": "https://stackoverflow.com/questions/32594945/how-to-set-port-for-rack-app", "title": "How to set port for Rack app?", "body": "<p>builder.rb:</p>\n\n<pre><code>def app\n  Rack::Builder.new do\n    run App.new\n  end.to_app\nend\n</code></pre>\n\n<p>How to run on a given port?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "atom-editor"], "answers": [{"tags": [], "owner": {"reputation": 541, "user_id": 333272, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4897f0e0599f93bd8014e781e27a6ebe?s=128&d=identicon&r=PG", "display_name": "Carlo Zottmann", "link": "https://stackoverflow.com/users/333272/carlo-zottmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1449482808, "creation_date": 1449482808, "answer_id": 34130934, "question_id": 32594647, "link": "https://stackoverflow.com/questions/32594647/default-syntax-in-case-of-conflicting-file-extensions-in-the-atom-text-editor/34130934#34130934", "title": "Default syntax in case of conflicting file extensions in the Atom text editor", "body": "<p>In your <code>config.cson</code> file you can specify filename regexes and a related grammars, like so:</p>\n\n<pre><code>\"*\":\n  \"file-types\":\n    \".rb?$\": \"source.ruby.rails\"\n</code></pre>\n"}], "owner": {"reputation": 4766, "user_id": 353130, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/6b71251b5261e1fe3142bf620e573724?s=128&d=identicon&r=PG", "display_name": "Giuseppe", "link": "https://stackoverflow.com/users/353130/giuseppe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1449482808, "creation_date": 1442347345, "question_id": 32594647, "link": "https://stackoverflow.com/questions/32594647/default-syntax-in-case-of-conflicting-file-extensions-in-the-atom-text-editor", "title": "Default syntax in case of conflicting file extensions in the Atom text editor", "body": "<p>In the Atom text editor, when two language packages define syntax and snippets for files with the same file extension, what determines the precedence?</p>\n\n<p>For example, both <code>language-ruby</code> and <code>language-ruby-on-rails</code> are available by default, as they are included in the so-called Core Package set, and the two packages share the <code>.rb</code> file extension.</p>\n\n<p>How can I make sure that Atom will by default treat <code>.rb</code> file as, say, <code>source.ruby.rails</code> instead of <code>source.ruby</code> files in my projects?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 3, "last_activity_date": 1442346683, "creation_date": 1442346683, "answer_id": 32594472, "question_id": 32594344, "link": "https://stackoverflow.com/questions/32594344/ruby-not-outputting-notation-correctly/32594472#32594472", "title": "Ruby not outputting notation correctly", "body": "<p>If you don't mind specifying the accuracy manually,</p>\n\n<pre><code>\"%.25f\" % 5.021664214224737e-10\n# =&gt; \"0.0000000005021664214224737\"\n</code></pre>\n\n<p>And you can remove the leading <code>0</code> by applying <code>[1..-1]</code> to it.</p>\n"}, {"tags": [], "owner": {"reputation": 14140, "user_id": 1188035, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/da4b6c80f86359463b47f42cfe307356?s=128&d=identicon&r=PG", "display_name": "sjagr", "link": "https://stackoverflow.com/users/1188035/sjagr"}, "is_accepted": false, "score": 1, "last_activity_date": 1442346839, "creation_date": 1442346839, "answer_id": 32594500, "question_id": 32594344, "link": "https://stackoverflow.com/questions/32594344/ruby-not-outputting-notation-correctly/32594500#32594500", "title": "Ruby not outputting notation correctly", "body": "<p><a href=\"http://ruby-doc.org/stdlib-2.1.2/libdoc/bigdecimal/rdoc/Float.html#method-i-to_d\" rel=\"nofollow\">Convert the float to a BigDecimal</a> then <a href=\"http://ruby-doc.org/stdlib-2.1.2/libdoc/bigdecimal/rdoc/BigDecimal.html#method-i-to_s\" rel=\"nofollow\">use <code>to_s</code> to achieve floating-point notation</a>:</p>\n\n<pre><code>require 'bigdecimal'\nrequire 'bigdecimal/util'\n\nprob(16.0, 17.0).to_d.to_s(\"F\")\n=&gt; \"0.000000000502166421422474\" \n</code></pre>\n"}], "owner": {"reputation": 1018, "user_id": 2908778, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/shRDJ.png?s=128&g=1", "display_name": "Seal", "link": "https://stackoverflow.com/users/2908778/seal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "closed_date": 1442347424, "answer_count": 2, "score": 1, "last_activity_date": 1442346839, "creation_date": 1442346225, "question_id": 32594344, "link": "https://stackoverflow.com/questions/32594344/ruby-not-outputting-notation-correctly", "closed_reason": "Duplicate", "title": "Ruby not outputting notation correctly", "body": "<p>I have a probability function</p>\n\n<pre><code>def fac(x)\n  (1..x).inject(1, :*)\nend\n\n\ndef prob(k, n)\n  fac(n) / (fac(k)* fac(n - k)) * (1.0/6.0)**k * 5.0/6.0**(n-k)\nend \n</code></pre>\n\n<p>when I do <code>prob(16.0, 17.0)</code></p>\n\n<p>I get the output <code>5.021664214224737e-10</code></p>\n\n<p>Is there a way to get the output to look like <code>.0000000005021664214224737</code> instead?</p>\n\n<p>Also the question title might not be correct, please edit if you deem necessary.</p>\n"}, {"tags": ["ruby", "session", "rspec", "sinatra", "capybara"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4333260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a03d4209c9817b75fe0be43eaefc525e?s=128&d=identicon&r=PG&f=1", "display_name": "madman250", "link": "https://stackoverflow.com/users/4333260/madman250"}, "edited": false, "score": 1, "creation_date": 1442408888, "post_id": 32595008, "comment_id": 53069925, "body": "This didn&#39;t quite work. My tests was still getting redirected by the callback because it didn&#39;t recognize the session. When I loaded a <code>pry</code>, it looked like  it did set a <code>session</code> variable, but it didn&#39;t persist I guess."}], "tags": [], "owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "is_accepted": false, "score": 3, "last_activity_date": 1442348781, "creation_date": 1442348781, "answer_id": 32595008, "question_id": 32593921, "link": "https://stackoverflow.com/questions/32593921/setting-sessions-using-rspec-racktest-in-sinatra-tests/32595008#32595008", "title": "Setting Sessions Using Rspec/ Rack::Test in Sinatra Tests", "body": "<p>Try this:</p>\n\n<pre><code>env \"rack.session\", { oauth_token: 'blahblahblah' }\nget '/'\n</code></pre>\n\n<p>Taken from <a href=\"https://github.com/brynary/rack-test/blob/master/spec/rack/test_spec.rb#L299\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 11, "user_id": 4333260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a03d4209c9817b75fe0be43eaefc525e?s=128&d=identicon&r=PG&f=1", "display_name": "madman250", "link": "https://stackoverflow.com/users/4333260/madman250"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 707, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1442348781, "creation_date": 1442344671, "question_id": 32593921, "link": "https://stackoverflow.com/questions/32593921/setting-sessions-using-rspec-racktest-in-sinatra-tests", "title": "Setting Sessions Using Rspec/ Rack::Test in Sinatra Tests", "body": "<p>I am trying to test a Sinatra application that is using oauth that has the following code being run before every route for the callback:</p>\n\n<pre><code>before do\n  unless session.has_key?(:oauth_token) || request.path == '/auth/callback'\n    access_url = oauth_client.auth_code.authorize_url(redirect_uri: ENV['CALLBACK'])\n    puts \"Redirecting to #{access_url}\"\n    redirect \"#{access_url}\"\n  end\nend\n</code></pre>\n\n<p>For my tests, I simply just want to set the <code>session[:oauth_token]</code> to <em>anything</em> so that I get past this block and move onto the test. However, after hours of searches and experimentation, I haven't been able to figure it out. </p>\n\n<p>I've tried <code>Rack::Test</code> to try and set it this way: </p>\n\n<pre><code>describe \"Visit home page\", js: true do\n    before { get '/', {}, { 'rack.session' =&gt; { oauth_token: 'blahblahblah' } } }\n    it \"has a list of products\" do\n      get \"/\"\n      expect(page).to have_link(\"Clear &amp; Mild Foam Handwash Refill, Fragrance-Free, 1250mL Refill, 3/Carton\")\n      expect(page).to have_link(\"Coffee Portion Packs, 1.5oz Packs, Hazelnut Cr\u00e8me, 24/Carton\")\n    end\n  end\nend\n</code></pre>\n\n<p>and my <code>spec_helper.rb</code> looks like this:</p>\n\n<pre><code>require File.expand_path '../../server.rb', __FILE__\nrequire 'rspec'\nrequire 'capybara/rspec'\nrequire 'rack/test'\nrequire 'capybara-screenshot/rspec'\nrequire 'capybara/poltergeist'\nCapybara.javascript_driver = :poltergeist\n\nset :environment, :test\n\nCapybara.app = Sinatra::Application\n\nENV['RACK_ENV'] = 'test'\n\nmodule RSpecMixin\n  include Rack::Test::Methods\n  def app() Sinatra::Application end\n\n  def setup_session(session = {})\n    Rack::Session::Abstract::SessionHash.stub(:new).and_return(session)\n  end\nend\n\nRSpec.configure do |c|\n  c.include RSpecMixin\nend\n</code></pre>\n\n<p>What is the best way to go about actually setting a session before every route? </p>\n"}, {"tags": ["ruby", "rspec", "rspec-expectations"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1442344861, "post_id": 32593877, "comment_id": 53041569, "body": "... What error do you get?"}], "answers": [{"comments": [{"owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "edited": false, "score": 0, "creation_date": 1442346121, "post_id": 32594158, "comment_id": 53042246, "body": "ah, it is the extend that looks like what I want it to do!  Tryuing now!"}], "tags": [], "owner": {"reputation": 20292, "user_id": 29262, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/42d4590355a1404230fbc9aff4dd377b?s=128&d=identicon&r=PG", "display_name": "Myron Marston", "link": "https://stackoverflow.com/users/29262/myron-marston"}, "is_accepted": true, "score": 9, "last_activity_date": 1442345532, "creation_date": 1442345532, "answer_id": 32594158, "question_id": 32593877, "link": "https://stackoverflow.com/questions/32593877/how-can-i-use-rspec-expectations-and-matchers-outside-of-rspec/32594158#32594158", "title": "How can I use rspec expectations and matchers outside of Rspec?", "body": "<p>When you <code>include</code> a module, it makes its methods available to <em>instances</em> of the class.  Your <code>test</code> method is a singleton method (a \"class method\"), not an instance method, and thus will never have access to methods provided by mixed-in modules.  To fix it, you can do:</p>\n\n<pre><code>class BF\n   include ::RSpec::Matchers\n\n   def test\n     expect(1).to eq(1)\n   end\nend\n\nBF.new.test\n</code></pre>\n\n<p>If you want the <code>RSpec::Matchers</code> methods to be available to singleton methods of <code>BF</code>, you can instead <code>extend</code> the module:</p>\n\n<pre><code>class BF\n   extend ::RSpec::Matchers\n\n   def self.test\n     expect(1).to eq(1)\n   end\nend\n\nBF.test\n</code></pre>\n"}], "owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 571, "favorite_count": 0, "accepted_answer_id": 32594158, "answer_count": 1, "score": 7, "last_activity_date": 1454802090, "creation_date": 1442344519, "last_edit_date": 1495539912, "question_id": 32593877, "link": "https://stackoverflow.com/questions/32593877/how-can-i-use-rspec-expectations-and-matchers-outside-of-rspec", "title": "How can I use rspec expectations and matchers outside of Rspec?", "body": "<p>I have a script which has evolved into needing to do some assertions and matching.</p>\n\n<p>It is written in ruby, and I have included <code>rspec</code> in the Gemfile and required it.</p>\n\n<p>I found this very helpful SO post on how to use in <code>irb</code>:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/14749047/how-to-use-rspec-expectations-in-irb\">How to use RSpec expectations in irb</a></p>\n\n<p>I also found the following:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/23624655/use-rspecs-expect-etc-outside-a-describe-it-block\">Use RSpec&#39;s &quot;expect&quot; etc. outside a describe ... it block</a></p>\n\n<pre><code>class BF\n   include ::Rspec::Matchers\n\n   def self.test\n     expect(1).to eq(1)\n   end\nend\n\nBF.test\n</code></pre>\n\n<p>I get an error at the <code>expect</code> line.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1442347019, "post_id": 32593830, "comment_id": 53042707, "body": "The block is evaluated when the hash has no value for such key. How can it pass a value?"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1442348487, "post_id": 32593830, "comment_id": 53043477, "body": "ok, I guess I misread the documentation, I just read the part <code>if block is given...</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1442356110, "post_id": 32593830, "comment_id": 53046689, "body": "There are other methods that operate in an analogous way, such as <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-fetch\" rel=\"nofollow noreferrer\">Hash#merge</a> (and <code>merge!&#47;update</code>) and <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-fetch\" rel=\"nofollow noreferrer\">Array#fetch</a> when a block is provided (or a default argument for <code>fetch</code>) . <code>merge</code> defers to the block for the value of of a key that is present in both hashes being merged (and only then); <code>Array#fetch</code> invokes the block if an only an out-of-bounds index is referenced."}], "answers": [{"comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1442345877, "post_id": 32594116, "comment_id": 53042093, "body": "If the key indeed had a value, what would you do in that case?  I am still not sure what purpose it serves"}, {"owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 3, "creation_date": 1442346287, "post_id": 32594116, "comment_id": 53042345, "body": "If the key is present in the hash, the block is not executed. <code>fetch</code> will just return the corresponding hash value."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1442347997, "post_id": 32594116, "comment_id": 53043224, "body": "@WandMaker You can either supply a default value, or a block to be executed and used instead. Sometimes the value cannot be known in advance, as is the case with your third example, it depends on the key, so it needs to be computed dynamically. That&#39;s what the block allows you do to."}], "tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 5, "last_activity_date": 1442345384, "creation_date": 1442345384, "answer_id": 32594116, "question_id": 32593830, "link": "https://stackoverflow.com/questions/32593830/use-of-block-passed-to-hashfetch/32594116#32594116", "title": "Use of block passed to Hash#fetch", "body": "<p>The block is used for dealing with missing values - the value is not yielded because there isn't one.</p>\n\n<p>You're supposed to use the key to return a suitable value (or raise an exception if appropriate)</p>\n"}], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "closed_date": 1442378098, "accepted_answer_id": 32594116, "answer_count": 1, "score": -2, "last_activity_date": 1448899351, "creation_date": 1442344375, "last_edit_date": 1448899351, "question_id": 32593830, "link": "https://stackoverflow.com/questions/32593830/use-of-block-passed-to-hashfetch", "closed_reason": "Not suitable for this site", "title": "Use of block passed to Hash#fetch", "body": "<p><a href=\"http://docs.ruby-lang.org/en/2.0.0/Hash.html#method-i-fetch\" rel=\"nofollow\"><code>Hash#fetch</code></a> returns the value in a hash for the given key.\nIt also accepts an optional block:</p>\n\n<pre><code>h = { \"a\" =&gt; 100, \"b\" =&gt; 200 }\nh.fetch(\"a\")                            #=&gt; 100\nh.fetch(\"z\", \"go fish\")                 #=&gt; \"go fish\"\nh.fetch(\"z\") { |el| \"go fish, #{el}\"}   #=&gt; \"go fish, z\" \n</code></pre>\n\n<p>One would assume that a block will help us work on the value associated with given the key. However, the block seems to yield the key instead of the value (refer to the third call of <code>fetch</code> above).</p>\n\n<p>What is the use of such implementation? I don't see any point in <code>key</code> being passed to the block as it is already known; it is the <code>value</code> that one is interested in, as is evident by call to <code>fetch</code>.</p>\n\n<p><strong>UPDATE: This is invalid question, I misread the documentation. My apologies</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 1, "creation_date": 1442389784, "post_id": 32593289, "comment_id": 53057326, "body": "Have you tried with a smaller pool size? There&#39;s almost certainly very little to be gained with such a large number of threads."}, {"owner": {"reputation": 1175, "user_id": 2990161, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mEbDl.jpg?s=128&g=1", "display_name": "Zubatman", "link": "https://stackoverflow.com/users/2990161/zubatman"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1442414683, "post_id": 32593289, "comment_id": 53074444, "body": "I shrunk the thread pool size down to around 5 when I switched to the ruby-thread gem, but it appears to not be saving all of the records, at max it&#39;ll save 50 / 1000 at a time"}], "answers": [{"comments": [{"owner": {"reputation": 1175, "user_id": 2990161, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mEbDl.jpg?s=128&g=1", "display_name": "Zubatman", "link": "https://stackoverflow.com/users/2990161/zubatman"}, "edited": false, "score": 0, "creation_date": 1442413271, "post_id": 32594341, "comment_id": 53073321, "body": "I used this approach, when I log the ids of the Content updated it has the right amount for my sample size, but when I check the console and see which ones have been saved I see that it&#39;s only actually saved about 5 of those and hasn&#39;t updated the rest of the ones its supposedly processed. Any ideas what could be going wrong there?"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 1175, "user_id": 2990161, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mEbDl.jpg?s=128&g=1", "display_name": "Zubatman", "link": "https://stackoverflow.com/users/2990161/zubatman"}, "edited": false, "score": 0, "creation_date": 1442413645, "post_id": 32594341, "comment_id": 53073590, "body": "The only problem I see here is that ActiveRecord/Your Database likely has a pool size that is less than the thread pool you&#39;re using which might be limiting connections.  What is listed in your database.yml file?"}, {"owner": {"reputation": 1175, "user_id": 2990161, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mEbDl.jpg?s=128&g=1", "display_name": "Zubatman", "link": "https://stackoverflow.com/users/2990161/zubatman"}, "edited": false, "score": 0, "creation_date": 1442413900, "post_id": 32594341, "comment_id": 53073793, "body": "Dev it has the pool size at 5"}, {"owner": {"reputation": 1175, "user_id": 2990161, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mEbDl.jpg?s=128&g=1", "display_name": "Zubatman", "link": "https://stackoverflow.com/users/2990161/zubatman"}, "edited": false, "score": 0, "creation_date": 1442414556, "post_id": 32594341, "comment_id": 53074352, "body": "What you would need / what would help?"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 1175, "user_id": 2990161, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mEbDl.jpg?s=128&g=1", "display_name": "Zubatman", "link": "https://stackoverflow.com/users/2990161/zubatman"}, "edited": false, "score": 0, "creation_date": 1442414693, "post_id": 32594341, "comment_id": 53074452, "body": "what does grab and store do?  Can we raise an exception when something goes to update but can&#39;t [for some reason] ?  Does it work on a smaller scale(less records? less threads?)"}, {"owner": {"reputation": 1175, "user_id": 2990161, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mEbDl.jpg?s=128&g=1", "display_name": "Zubatman", "link": "https://stackoverflow.com/users/2990161/zubatman"}, "edited": false, "score": 0, "creation_date": 1442415079, "post_id": 32594341, "comment_id": 53074729, "body": "I&#39;m running it right now with a sample size of 1000 on &gt; 3 threads, I got max 50 saved when I ran it with 2 threads. Grab and store controls like 5 other methods (grabbing data and making sense of it) and then updates the facets of the Content object based on what was &quot;grabbed&quot;."}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 9, "last_activity_date": 1442346205, "creation_date": 1442346205, "answer_id": 32594341, "question_id": 32593289, "link": "https://stackoverflow.com/questions/32593289/ruby-thread-pooling-what-am-i-doing-wrong/32594341#32594341", "title": "Ruby Thread Pooling - What am I doing wrong?", "body": "<p>I've used the <a href=\"https://github.com/meh/ruby-thread#pool\" rel=\"noreferrer\">ruby-thread</a> gem which add's pool support like so:</p>\n\n<pre><code>require 'thread/pool'\n\npool = Thread.pool(50)\n\nContent.all.each do |content|\n  pool.process do\n    grab_and_store(content)\n  end\nend\n\npool.shutdown\n</code></pre>\n"}], "owner": {"reputation": 1175, "user_id": 2990161, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mEbDl.jpg?s=128&g=1", "display_name": "Zubatman", "link": "https://stackoverflow.com/users/2990161/zubatman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4152, "favorite_count": 0, "accepted_answer_id": 32594341, "answer_count": 1, "score": 3, "last_activity_date": 1533826519, "creation_date": 1442342422, "last_edit_date": 1442413687, "question_id": 32593289, "link": "https://stackoverflow.com/questions/32593289/ruby-thread-pooling-what-am-i-doing-wrong", "title": "Ruby Thread Pooling - What am I doing wrong?", "body": "<p>I have 2.5 million records in the Content table of my Postgres Database, I need to go through each of those 2.5 million records and perform a number of actions (many of which are slow by themselves) and update the record at the end based on what I have gathered along the way - that all works - the problem, it takes for bloody ever to run.</p>\n\n<p>I came across a couple of articles talking about multithreading such jobs (I have done this before in C, but never Ruby) and the pros and cons of using threads in Ruby, still despite those cons, the 2000 threads I can get off happen significantly faster than running without threading, but I can only get 2000 off at one time, limiting me from actually being able to update all 2.5 million records. Here is the code I had for that:</p>\n\n<pre><code>Content.all.each do |content|\n  threads &lt;&lt; Thread.new do\n    grab_and_store(content)\n  end\n  index += 1\n  index % 100 == 0 ? (puts index) : nil\nend\nthreads.map(&amp;:join)\n</code></pre>\n\n<p>I also read about thread pooling, using the same threads to do other jobs once they have completed their original one, but I can't seem to get it to work. Here is the code that I had:</p>\n\n<pre><code>POOL_SIZE = 1000\n\njobs = Queue.new\nContent.all.each{ |x| jobs.push x }\n\nworkers = (POOL_SIZE).times.map do\n  Thread.new do\n    begin\n      while x = jobs.pop(true)\n        grab_and_store(x)\n      end\n    rescue ThreadError\n    end\n  end\nend\nworkers.map(&amp;:join)\n</code></pre>\n\n<p>When I run this I get an error that I can't execute .join on a nil class, which would mean that workers is nil at the end of this. But when I take the code that I based this off of (shown below, and <a href=\"https://blog.engineyard.com/2014/ruby-thread-pool\" rel=\"nofollow\">source</a>) and run that it works perfectly. I can't seem to figure out where mine is breaking / how to best implement the thread pool to stop my code from running out of resources after 2000 threads.</p>\n\n<p>Thanks!</p>\n\n<p>P.S. Heres the code from the tutorial I used:</p>\n\n<pre><code>require 'thread'\nwork_q = Queue.new\n(0..50).to_a.each{|x| work_q.push x }\nworkers = (0...4).map do\n  Thread.new do\n    begin\n      while x = work_q.pop(true)\n        50.times{print [128000+x].pack \"U*\"}\n      end\n    rescue ThreadError\n    end\n  end\nend; \"ok\"\nworkers.map(&amp;:join); \"ok\"\n</code></pre>\n\n<p>Update:</p>\n\n<p>Per Anthony's answer I found myself with the following chunk of code, using the ruby-thread gem he recommended, it runs through the given Content really quickly (it's a sample size of 1000), but when I check console it appears to have only saved around 20 max. Here's the code:</p>\n\n<pre><code>pool = Thread.pool(5)\n\n@ids = []\narr = Content.where(needs_update: true)[0...1000]\n\nputs \"Starting With Sample 1000\"\n\narr.each do |content|\n  pool.process do\n    grab_and_store(content)\n  end\n  index += 1\n  index % 100 == 0 ? (puts index) : nil\nend\n\npool.shutdown\n</code></pre>\n"}, {"tags": ["ruby", "post", "https", "multipart"], "comments": [{"owner": {"reputation": 5806, "user_id": 1420382, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/b00f469c4ccbb33bba69611325c29a3e?s=128&d=identicon&r=PG", "display_name": "Reck", "link": "https://stackoverflow.com/users/1420382/reck"}, "edited": false, "score": 0, "creation_date": 1442342638, "post_id": 32593219, "comment_id": 53040339, "body": "if you don&#39;t absolutely need to use Net::HTTP, I&#39;d just go with Faraday: <a href=\"https://stackoverflow.com/questions/16725195/upload-files-using-faraday\" title=\"upload files using faraday\">stackoverflow.com/questions/16725195/upload-files-using-fara&zwnj;&#8203;day</a>"}, {"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 0, "creation_date": 1442347588, "post_id": 32593219, "comment_id": 53043009, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/184178/ruby-how-to-post-a-file-via-http-as-multipart-form-data\">Ruby: How to post a file via HTTP as multipart/form-data?</a>"}, {"owner": {"reputation": 193, "user_id": 598569, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/vjc6H.jpg?s=128&g=1", "display_name": "Brent", "link": "https://stackoverflow.com/users/598569/brent"}, "edited": false, "score": 0, "creation_date": 1442407189, "post_id": 32593219, "comment_id": 53068607, "body": "This question builds on that one...but is different because I need both secure and with additional parameters in  JSON"}], "answers": [{"tags": [], "owner": {"reputation": 193, "user_id": 598569, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/vjc6H.jpg?s=128&g=1", "display_name": "Brent", "link": "https://stackoverflow.com/users/598569/brent"}, "is_accepted": false, "score": 0, "last_activity_date": 1442426099, "creation_date": 1442426099, "answer_id": 32615473, "question_id": 32593219, "link": "https://stackoverflow.com/questions/32593219/multipart-post-ruby-https/32615473#32615473", "title": "Multipart POST Ruby HTTPS", "body": "<p>I figured out to do a multipart form post using https and parameters. Here is the code:</p>\n\n<pre><code>require 'rest-client'\nurl = 'https://some.url/rs/FileUploadForm'\n@res = RestClient.post url, {:multipart=&gt;true,:tieBreakerOptions=&gt;1,\n                                 :myFileName=&gt;'file.txt',\n                                 :myFile=&gt;File.new('data/file.txt','r')}\nresponse = JSON.parse(@res)\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 598569, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/vjc6H.jpg?s=128&g=1", "display_name": "Brent", "link": "https://stackoverflow.com/users/598569/brent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 421, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1442426099, "creation_date": 1442342097, "last_edit_date": 1442407136, "question_id": 32593219, "link": "https://stackoverflow.com/questions/32593219/multipart-post-ruby-https", "title": "Multipart POST Ruby HTTPS", "body": "<p>I am trying to do a multipart post with parameters in ruby securely using https. All the examples I have seen are only http without parameters in addition to the file. However, I can't seem to modify them to get them to work with https and additional parameters (or find documentation showing a good example). How can I do a multipart POST using HTTPS in ruby with parameters? I have tried modify the code from Nick Sieger as shown below but to no avail. Where do I add parameters that I need to pass in in JSON format in addition to the file?</p>\n\n<pre><code># push file to rest service\n    url = URI.parse('https://some.url.test/rs/test')\n    File.open(tm.created_file_name) do |txt|\n      req = Net::HTTP::Post::Multipart.new url.path,\n                                           'file' =&gt; UploadIO.new(txt, 'text/plain', tm.created_file_name)\n      n = Net::HTTP.new(url.host, url.port)\n      n.use_ssl = true\n      p req.body_stream\n      res = n.start do |http|\n        response = http.request(req)\n        p response.body\n      end\n    end\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 8, "last_activity_date": 1442341779, "creation_date": 1442341779, "answer_id": 32593141, "question_id": 32593003, "link": "https://stackoverflow.com/questions/32593003/sum-hash-values-ruby/32593141#32593141", "title": "Sum Hash Values Ruby", "body": "<pre><code>players.map { |player| player[:hand].size }.reduce(:+) # =&gt; 18\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 0, "last_activity_date": 1442346277, "last_edit_date": 1442346277, "creation_date": 1442345534, "answer_id": 32594159, "question_id": 32593003, "link": "https://stackoverflow.com/questions/32593003/sum-hash-values-ruby/32594159#32594159", "title": "Sum Hash Values Ruby", "body": "<p>This one is just for fun, assumes <code>hand</code> is always the last element in the hash.</p>\n\n<pre><code>p players.map(&amp;:flatten).map(&amp;:last).map(&amp;:size).reduce(:+)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "is_accepted": false, "score": 3, "last_activity_date": 1442345838, "creation_date": 1442345838, "answer_id": 32594240, "question_id": 32593003, "link": "https://stackoverflow.com/questions/32593003/sum-hash-values-ruby/32594240#32594240", "title": "Sum Hash Values Ruby", "body": "<p>A single pass solution:</p>\n\n<pre><code>players.inject(0) { | a, e | a + e[:hand].size } \n# =&gt; 18\n</code></pre>\n\n<p>Note <code>inject</code> is just another name for <code>reduce</code>.</p>\n"}], "owner": {"reputation": 1018, "user_id": 2908778, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/shRDJ.png?s=128&g=1", "display_name": "Seal", "link": "https://stackoverflow.com/users/2908778/seal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 1, "accepted_answer_id": 32593141, "answer_count": 3, "score": 3, "last_activity_date": 1442346277, "creation_date": 1442341267, "last_edit_date": 1442346117, "question_id": 32593003, "link": "https://stackoverflow.com/questions/32593003/sum-hash-values-ruby", "title": "Sum Hash Values Ruby", "body": "<p>I have an array of hashes</p>\n\n<pre><code>players =  [{:id=&gt;1, :name=&gt;\"Alda\", :dice_count=&gt;5, :hand=&gt;[6, 5, 2, 4, 3]},\n {:id=&gt;2, :name=&gt;\"Gonzalo\", :dice_count=&gt;5, :hand=&gt;[1, 5, 1, 1]},\n {:id=&gt;3, :name=&gt;\"Markus\", :dice_count=&gt;5, :hand=&gt;[6, 2, 5, 1]},\n {:id=&gt;4, :name=&gt;\"Luella\", :dice_count=&gt;5, :hand=&gt;[4, 5, 1, 6, 5]}]\n</code></pre>\n\n<p>and I would like to sum the size of each <code>:hand</code> value in the array.  Is there a simple way to do this?</p>\n\n<p>So the output would be the sum of each <code>:hand.size</code>.  In the above case the output would be <code>18</code></p>\n"}, {"tags": ["ruby", "rubygems", "rubymine"], "comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1442339782, "post_id": 32592614, "comment_id": 53038805, "body": "<code>Modulename::Classname.new</code> to be used"}], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 1, "last_activity_date": 1442340057, "creation_date": 1442340057, "answer_id": 32592714, "question_id": 32592614, "link": "https://stackoverflow.com/questions/32592614/how-does-one-create-an-object-from-a-class-within-a-gem/32592714#32592714", "title": "How does one create an object from a class within a gem?", "body": "<p>In your <code>Sentence</code> class</p>\n\n<pre><code>@words &lt;&lt; Word.new(elem)\n</code></pre>\n\n<p><code>Word</code> is resolved correctly because ruby looks in current namespace first (that being <code>Sentencemate</code> module).</p>\n\n<p>Outside of that module, one has to use fully-qualified names, such as <code>Sentencemate::Word</code>. This is necessary to differentiate this <code>Word</code> from a dozen other <code>Word</code> classes user's app might have.</p>\n"}], "owner": {"reputation": 2104, "user_id": 5129504, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/476994845791992/picture?type=large", "display_name": "Josh Weinstein", "link": "https://stackoverflow.com/users/5129504/josh-weinstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 32592714, "answer_count": 1, "score": 0, "last_activity_date": 1442340057, "creation_date": 1442339696, "question_id": 32592614, "link": "https://stackoverflow.com/questions/32592614/how-does-one-create-an-object-from-a-class-within-a-gem", "title": "How does one create an object from a class within a gem?", "body": "<p>Lets say you write a gem containing classes within a module. If one installs that gem and wishes to create an object instance from that class, how do they successfully do that in another rb document? Here is my gem class.</p>\n\n<p>require \"Sentencemate/version\"</p>\n\n<pre><code>module Sentencemate\n  #Object used to emulate a single word in text.\n  class Word\n    def initialize(word)\n      @word = word\n    end\n    def append(str)\n      @word = @word &lt;&lt; str\n      return @word\n    end\n    def get\n      return @word\n    end\n    def setword(str)\n      @word = str\n    end\n    def tag(str)\n      @tag = str\n    end\n  end\n# Object used to emulate a sentence in text.\n  class Sentence\n    def initialize(statement)\n      @sentence = statement\n      statement = statement.chop\n      statement = statement.downcase\n      lst = statement.split(\" \")\n      @words = []\n      for elem in lst\n        @words &lt;&lt; Word.new(elem)\n      end\n      if @sentence[@sentence.length-1] == \"?\"\n        @question = true\n      else\n        @question = false\n      end\n    end\n    def addword(str)\n      @words &lt;&lt; Word.new(str)\n    end\n    def addword_to_place(str, i)\n      @words.insert(i, Word.new(str))\n    end\n    def set_word(i, other)\n      @words[i].setword(other)\n    end\n    def [](i)\n      @words[i].get()\n    end\n    def length\n      @words.length\n    end\n    def addpunc(symbol)\n      @words[self.length-1].setword(@words[self.length-1].get &lt;&lt; symbol)\n    end\n    def checkforword(str)\n      for elem in @words\n        if elem.get == str\n          return true\n        end\n      end\n      return false\n    end\n  end\nend \n</code></pre>\n\n<p>in Rubymine, I will try the following in the Irb console:</p>\n\n<pre><code>/usr/bin/ruby -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) /usr/bin/irb --prompt simple\nSwitch to inspect mode.\n&gt;&gt; require 'Sentencemate'\n=&gt; true\n&gt;&gt; varfortesting = Sentence.new(\"The moon is red.\")\nNameError: uninitialized constant Sentence\n    from (irb):2\n    from /usr/bin/irb:12:in `&lt;top (required)&gt;'\n    from -e:1:in `load'\n    from -e:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>What would be the proper way to be able to use the classes in the gem that I installed?</p>\n"}, {"tags": ["ruby", "nokogiri"], "comments": [{"owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 1, "creation_date": 1442340767, "post_id": 32592389, "comment_id": 53039351, "body": "Please, indent your code blocks properly, it&#39;s hard to see where each tag closes."}, {"owner": {"reputation": 1431, "user_id": 729535, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5593abb6ec21bc7a9c2070a82a27e4e3?s=128&d=identicon&r=PG", "display_name": "Luiz Carvalho", "link": "https://stackoverflow.com/users/729535/luiz-carvalho"}, "reply_to_user": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "edited": false, "score": 0, "creation_date": 1442341285, "post_id": 32592389, "comment_id": 53039618, "body": "@AlexeyShein done! Thanks!"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1442357351, "post_id": 32592389, "comment_id": 53047065, "body": "Instead of using images to demonstrate issues with data or code, copy and paste the text into the question, and format it correctly for readability. That helps us help you as we can reuse the data without having to type it in."}], "answers": [{"tags": [], "owner": {"reputation": 6689, "user_id": 273444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26988136c0514172417b7c7c863733f2?s=128&d=identicon&r=PG", "display_name": "Alexey Shein", "link": "https://stackoverflow.com/users/273444/alexey-shein"}, "is_accepted": false, "score": 0, "last_activity_date": 1442357601, "last_edit_date": 1442357601, "creation_date": 1442342519, "answer_id": 32593312, "question_id": 32592389, "link": "https://stackoverflow.com/questions/32592389/how-to-correctly-fix-unclosed-html-tags-with-nokogiri/32593312#32593312", "title": "How to correctly fix unclosed HTML tags with Nokogiri", "body": "<p>You believe that your <code>&lt;li&gt;</code> should not be nested? Let's try to understand why <code>Nokogiri</code> parses it this way:</p>\n\n<pre><code>&lt;div&gt;\n  &lt;li&gt;\n    &lt;div&gt;  &lt;!-- unclosed div --&gt;\n      &lt;div&gt;\n        test\n      &lt;/div&gt;    \n      &lt;li&gt;\n        &lt;div&gt;\n           test \n        &lt;/div&gt;\n</code></pre>\n\n<p>First, your HTML is invalid because (besides missing closing tags) there's no <code>&lt;ul&gt;</code> or <code>&lt;ol&gt;</code> tag, so Nokogiri switches to guessing right away, from the first <code>&lt;li&gt;</code> tag.</p>\n\n<p>Next, let's look at the specs about end-tag omitting: <code>&lt;li&gt;</code> <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/li\" rel=\"nofollow\">may omit</a> its end tag, but <code>&lt;div&gt;</code> <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/div\" rel=\"nofollow\">may not omit</a> it. </p>\n\n<p>The way you nested <code>&lt;li&gt;</code>-tags, Nokogiri tries to find the closing tag of the second <code>&lt;div&gt;</code> (see the HTML comment in the code listing above) and chooses the lesser evil, although there's no nested <code>&lt;ul&gt;</code> tag.</p>\n"}, {"comments": [{"owner": {"reputation": 1431, "user_id": 729535, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5593abb6ec21bc7a9c2070a82a27e4e3?s=128&d=identicon&r=PG", "display_name": "Luiz Carvalho", "link": "https://stackoverflow.com/users/729535/luiz-carvalho"}, "edited": false, "score": 0, "creation_date": 1442346611, "post_id": 32594362, "comment_id": 53042512, "body": "Awesome! Work fine!! Thanks!"}], "tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 4, "last_activity_date": 1442346274, "creation_date": 1442346274, "answer_id": 32594362, "question_id": 32592389, "link": "https://stackoverflow.com/questions/32592389/how-to-correctly-fix-unclosed-html-tags-with-nokogiri/32594362#32594362", "title": "How to correctly fix unclosed HTML tags with Nokogiri", "body": "<p>You could look at using <a href=\"https://rubygems.org/gems/nokogumbo\" rel=\"nofollow\">Nokogumbo</a> which attaches <a href=\"https://github.com/google/gumbo-parser\" rel=\"nofollow\">Googles\u2019 Gumbo HTML5 parser</a> to Nokogiri. This will then use the HTML5 error correcting algorithms when parsing malformed HTML, rather than the default parsing performed my Nokogiri and libxml, and will result in parsed HTML closer to what you would expect to see from a browser.</p>\n\n<p>Here\u2019s an example <code>irb</code> session showing how it handles your example HTML and produces the result you are after. Note the method name is <code>HTML5</code>, and it is still called on the <code>Nokogiri</code> module.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt;&gt; require 'nokogumbo'\n=&gt; true\n&gt;&gt; s = &lt;&lt;EOT\n&lt;div&gt;\n  &lt;li&gt;\n    &lt;div&gt;\n      &lt;div&gt;\n        test\n      &lt;/div&gt;\n\n  &lt;li&gt;\n     &lt;div&gt;\n       test\n     &lt;/div&gt;\nEOT\n=&gt; \"&lt;div&gt;\\n  &lt;li&gt;\\n    &lt;div&gt;\\n      &lt;div&gt;\\n        test\\n      &lt;/div&gt;\\n\\n  &lt;li&gt;\\n     &lt;div&gt;\\n       test \\n     &lt;/div&gt;\\n\"\n&gt;&gt; puts Nokogiri.HTML5(s).to_html\n&lt;html&gt;\n&lt;head&gt;&lt;/head&gt;\n&lt;body&gt;&lt;div&gt;\n  &lt;li&gt;\n    &lt;div&gt;\n      &lt;div&gt;\n        test\n      &lt;/div&gt;\n\n  &lt;/div&gt;\n&lt;/li&gt;\n&lt;li&gt;\n     &lt;div&gt;\n       test\n     &lt;/div&gt;\n&lt;/li&gt;\n&lt;/div&gt;&lt;/body&gt;\n&lt;/html&gt;\n=&gt; nil\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1442358040, "creation_date": 1442358040, "answer_id": 32597039, "question_id": 32592389, "link": "https://stackoverflow.com/questions/32592389/how-to-correctly-fix-unclosed-html-tags-with-nokogiri/32597039#32597039", "title": "How to correctly fix unclosed HTML tags with Nokogiri", "body": "<p>How to fix unterminated/unclosed tags depends on what your goal is. @Matt's suggestion is sound, however it can still result in bad HTML if the original HTML is pathologically wrong, and, at that point you have to step in and do fix-ups prior to letting any other parser attempt to make sense of it.</p>\n\n<p>Whether that requires using regular expressions or simple string manipulation or extracting the specific line and parsing it as a fragment depends on the situation. I've had to do some pretty ugly things just to be able to use a parser on badly broken HTML multiple times, and each time it was a different process.</p>\n"}], "owner": {"reputation": 1431, "user_id": 729535, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5593abb6ec21bc7a9c2070a82a27e4e3?s=128&d=identicon&r=PG", "display_name": "Luiz Carvalho", "link": "https://stackoverflow.com/users/729535/luiz-carvalho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1429, "favorite_count": 0, "accepted_answer_id": 32594362, "answer_count": 3, "score": 2, "last_activity_date": 1442358040, "creation_date": 1442338800, "last_edit_date": 1442357789, "question_id": 32592389, "link": "https://stackoverflow.com/questions/32592389/how-to-correctly-fix-unclosed-html-tags-with-nokogiri", "title": "How to correctly fix unclosed HTML tags with Nokogiri", "body": "<p>I have difficulty getting HTML generated by a site. The HTML contains some tags that are not closed. </p>\n\n<p>For example:</p>\n\n<pre><code>&lt;div&gt;\n  &lt;li&gt;\n    &lt;div&gt;\n      &lt;div&gt;\n        test\n      &lt;/div&gt;\n\n  &lt;li&gt;\n     &lt;div&gt;\n       test \n     &lt;/div&gt;\n</code></pre>\n\n<p>Parsing the HTML:</p>\n\n<pre><code>html = Nokogiri::HTML(open('origin.html'))\n</code></pre>\n\n<p>Results in:</p>\n\n<p><a href=\"https://i.stack.imgur.com/AaSSt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AaSSt.png\" alt=\"Nokogiri object\"></a></p>\n\n<p>Or, in HTML:</p>\n\n<pre><code>  &lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\"&gt;\n\n    &lt;html&gt;&lt;body&gt;\n      &lt;div&gt;\n\n        &lt;li&gt;\n          &lt;div&gt;\n            &lt;div&gt;\n              test\n            &lt;/div&gt;\n\n        &lt;li&gt;\n          &lt;div&gt;\n            test \n          &lt;/div&gt;\n\n    &lt;/li&gt;\n    &lt;/div&gt;\n    &lt;/li&gt;\n    &lt;/div&gt;\n    &lt;/body&gt;\n    &lt;/html&gt;\n</code></pre>\n\n<p>I believe that the right thing would be something like:</p>\n\n<pre><code>  &lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\"&gt;\n&lt;html&gt;\n   &lt;body&gt;\n    &lt;div&gt;\n      &lt;li&gt;\n        &lt;div&gt;\n          &lt;div&gt;\n            test\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/li&gt;\n\n      &lt;li&gt;\n        &lt;div&gt;\n           test \n        &lt;/div&gt;\n      &lt;/li&gt;\n    &lt;/div&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Any idea how to solve this? Change to another gem? Use regex to change the HTML before parsing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cloud-foundry"], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 2018627, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/4915ae4fadfdfc2804212a83167a0c77?s=128&d=identicon&r=PG", "display_name": "Krish", "link": "https://stackoverflow.com/users/2018627/krish"}, "edited": false, "score": 0, "creation_date": 1442338897, "post_id": 32592310, "comment_id": 53038336, "body": "Thank you Arsen ! So if they are a different processes, then is it advisable to separate the worker logic and deploy as  another app? and Rails app will use Resque to enqueue the job which will go to Redis and Worker keep looking at Redis to look for a new job? am i right?"}, {"owner": {"reputation": 10185, "user_id": 5328417, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ecwCL.jpg?s=128&g=1", "display_name": "Arsen", "link": "https://stackoverflow.com/users/5328417/arsen"}, "reply_to_user": {"reputation": 329, "user_id": 2018627, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/4915ae4fadfdfc2804212a83167a0c77?s=128&d=identicon&r=PG", "display_name": "Krish", "link": "https://stackoverflow.com/users/2018627/krish"}, "edited": false, "score": 1, "creation_date": 1442339250, "post_id": 32592310, "comment_id": 53038540, "body": "@Krish hm... no you don&#39;t need to make two different apps think about like it&#39;s two different mode of one app. Yes, worker is looking for tasks at redis. You&#39;re right!"}, {"owner": {"reputation": 329, "user_id": 2018627, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/4915ae4fadfdfc2804212a83167a0c77?s=128&d=identicon&r=PG", "display_name": "Krish", "link": "https://stackoverflow.com/users/2018627/krish"}, "edited": false, "score": 0, "creation_date": 1442339379, "post_id": 32592310, "comment_id": 53038605, "body": "More info on the Task: Its polling a REST API endpoint every 30 seconds or so for a JSON data and send it back to the RAILS app which renders the graph on the UI with that json data. UI might contain multiple graphs in one single page, so multiple concurrent jobs polling for data to keep those graph component afresh until user closes or move away from the dashboard page."}, {"owner": {"reputation": 10185, "user_id": 5328417, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ecwCL.jpg?s=128&g=1", "display_name": "Arsen", "link": "https://stackoverflow.com/users/5328417/arsen"}, "reply_to_user": {"reputation": 329, "user_id": 2018627, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/4915ae4fadfdfc2804212a83167a0c77?s=128&d=identicon&r=PG", "display_name": "Krish", "link": "https://stackoverflow.com/users/2018627/krish"}, "edited": false, "score": 0, "creation_date": 1442339800, "post_id": 32592310, "comment_id": 53038816, "body": "@Krish I&#39;d recommend run a worker. When worker got a data just put it in a database. And rails app can read it and send to client."}, {"owner": {"reputation": 329, "user_id": 2018627, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/4915ae4fadfdfc2804212a83167a0c77?s=128&d=identicon&r=PG", "display_name": "Krish", "link": "https://stackoverflow.com/users/2018627/krish"}, "edited": false, "score": 0, "creation_date": 1442340314, "post_id": 32592310, "comment_id": 53039093, "body": "Thanks for promptly jumping in and helping me out ! I really appreciate your time in helping me ! sighhh what a relief !"}, {"owner": {"reputation": 10185, "user_id": 5328417, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ecwCL.jpg?s=128&g=1", "display_name": "Arsen", "link": "https://stackoverflow.com/users/5328417/arsen"}, "reply_to_user": {"reputation": 329, "user_id": 2018627, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/4915ae4fadfdfc2804212a83167a0c77?s=128&d=identicon&r=PG", "display_name": "Krish", "link": "https://stackoverflow.com/users/2018627/krish"}, "edited": false, "score": 0, "creation_date": 1442340448, "post_id": 32592310, "comment_id": 53039170, "body": "@Krish not a problem :)"}], "tags": [], "owner": {"reputation": 10185, "user_id": 5328417, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ecwCL.jpg?s=128&g=1", "display_name": "Arsen", "link": "https://stackoverflow.com/users/5328417/arsen"}, "is_accepted": true, "score": 1, "last_activity_date": 1442338500, "creation_date": 1442338500, "answer_id": 32592310, "question_id": 32592216, "link": "https://stackoverflow.com/questions/32592216/deploying-background-worker-for-rails-like-resque-into-cloudfoundry/32592310#32592310", "title": "Deploying background worker for rails like Resque into CloudFoundry", "body": "<p>Yes you miss something because rails app and worker it's different process. When you call <code>Resque.enqueue(BackgroundJob, params)</code> you communicate with worker via redis. So if you want to communicate back you must use something like redis or postgres or event text file.</p>\n\n<p>Can you get more information about your task?</p>\n"}], "owner": {"reputation": 329, "user_id": 2018627, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/4915ae4fadfdfc2804212a83167a0c77?s=128&d=identicon&r=PG", "display_name": "Krish", "link": "https://stackoverflow.com/users/2018627/krish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 32592310, "answer_count": 1, "score": 1, "last_activity_date": 1442338500, "creation_date": 1442338197, "question_id": 32592216, "link": "https://stackoverflow.com/questions/32592216/deploying-background-worker-for-rails-like-resque-into-cloudfoundry", "title": "Deploying background worker for rails like Resque into CloudFoundry", "body": "<p>Currently working on building a live dashboard with Rails which needs a background processing to keep polling for data every now and then to keep the dashboard afresh. I am able to achieve that with Resque, Resque-Scheduler and Redis Server and works fine <strong>locally</strong>. All the code is baked into Rails app, for example, if user visits the dashboard page, inside the dashboard_controller I queue the job like this</p>\n\n<pre><code>Resque.enqueue(BackgroundJob, params)\n</code></pre>\n\n<p>And I have the worker performing the job from <strong>app/worker/background_job.rb</strong></p>\n\n<pre><code>class BackgroundJob\n  @queue = :backgroundq\n\n  def self.perform\n    &lt; PERFORM CODE HERE&gt;\n  end\nend\n</code></pre>\n\n<p><strong>Problem:</strong></p>\n\n<p>When I had to deploy into Cloudfoundry it instructs me to deploy the same code twice in different names 1. as a Rails app (Web Process) 2. as a Ruby no-route app for the background worker binding to the same Redis service on the cloud. I dont understand the process here, if they live in  two different app spaces and how they communicate to each other ? because I need to communicate lots of data back and forth. For sure I am lacking some basic application architecture design. Can someone explain how would I go about this?</p>\n"}, {"tags": ["java", "ruby", "multithreading", "sockets", "jruby"], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 4994975, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f74c39b754e96e46c5f04212e58f21ed?s=128&d=identicon&r=PG&f=1", "display_name": "cphelps", "link": "https://stackoverflow.com/users/4994975/cphelps"}, "is_accepted": true, "score": 0, "last_activity_date": 1455903262, "creation_date": 1455903262, "answer_id": 35511347, "question_id": 32591954, "link": "https://stackoverflow.com/questions/32591954/jruby-1-7-19-udpsocket-initialize-name-or-service-not-known-while-scanning-ip/35511347#35511347", "title": "JRuby-1.7.19 UDPSocket &quot;initialize: name or service not known&quot; while scanning IP range", "body": "<p>We did end up finding out what the issue for this was. Turns out it was not a JRuby issue at all. When scanning the IP range we found out that there is a limited number of datagram ports that can be opened in the JVM. That was the limit we were hitting. I believe there is a command to increase this limit but I was unable to track it down.</p>\n"}], "owner": {"reputation": 63, "user_id": 4994975, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f74c39b754e96e46c5f04212e58f21ed?s=128&d=identicon&r=PG&f=1", "display_name": "cphelps", "link": "https://stackoverflow.com/users/4994975/cphelps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 35511347, "answer_count": 1, "score": 0, "last_activity_date": 1455903262, "creation_date": 1442337363, "last_edit_date": 1442340441, "question_id": 32591954, "link": "https://stackoverflow.com/questions/32591954/jruby-1-7-19-udpsocket-initialize-name-or-service-not-known-while-scanning-ip", "title": "JRuby-1.7.19 UDPSocket &quot;initialize: name or service not known&quot; while scanning IP range", "body": "<p>In my programming I'm scanning an IP range for devices that respond to snmp. I'm iterating through a list of IP addresses and putting each on into it's own thread and using the ruby gem snmp to test if the device responds to snmp.</p>\n\n<p>The main program does the threading and is written in java, the networking is handled by a jruby jar.  I'm using a thread pool of 10 threads. I'm after the first few threads run I start getting a \"SocketError: initialize: name or service not known\" on several of the threads when they try and setup a jruby UDPSocket. It's even showing the error on IP addresses that I know are snmp enabled. I've dug into the jruby implementation of UDPSocket and it uses the DatagramChannel class which is thread safe. I'm not quite sure what is causing this it almost seems like I'm only aloud to make so many UDP connections, I'm not sure if that's even true.</p>\n"}]