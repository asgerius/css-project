[{"tags": ["ruby", "datetime"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1577810809, "post_id": 59546126, "comment_id": 105262145, "body": "What do you mean by \u201cdon\u2019t work\u201d? Is an exception raised? If so, what is the error message? Did you execute <code>require \u2018date\u2019</code>. (Please show that.) To format blocks of code in your question indent at least 4 spaces or (easier) select the code and click on the <code>{}</code> icon. (Please edit to do that.) To format code embedded in text surrounded it with back-ticks (`)."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1577843783, "post_id": 59546126, "comment_id": 105268248, "body": "Note that <code>parse</code> can easily give misleading results: <code>Date.parse &#39;I will do it, maybe&#39; =&gt; #&lt;Date: 2019-05-01 ((2458605j,0s,0n),+0s,2299161j)&gt;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577866520, "post_id": 59546423, "comment_id": 105270636, "body": "Thanks for letting us know about <code>strftime.net</code>."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 3, "last_activity_date": 1577865394, "last_edit_date": 1577865394, "creation_date": 1577809283, "answer_id": 59546423, "question_id": 59546126, "link": "https://stackoverflow.com/questions/59546126/how-to-parse-8-31-2017-154532-to-a-datetime-object/59546423#59546423", "title": "How to parse &quot;8/31/2017 15:45:32&quot; to a DateTime object", "body": "<p>To parse a year with century use <code>%Y</code> instead of <code>%y</code>. <code>%y</code> only matches years without a centure \u2013 like <code>8/31/17</code> in your example.</p>\n\n<pre><code> DateTime.strptime \"8/31/2017 15:45:32\", \"%m/%d/%Y %H:%M:%S\"\n #=&gt; #&lt;DateTime: 2017-08-31T15:45:32+00:00 ((2457997j,56732s,0n),+0s,2299161j)&gt;\n</code></pre>\n\n<p>Find the formating directives in the docs: <a href=\"https://ruby-doc.org/stdlib-2.7.0/libdoc/date/rdoc/DateTime.html#method-i-strftime\" rel=\"nofollow noreferrer\"><code>DateTime.strptime</code></a> Or use the great <a href=\"http://strftime.net\" rel=\"nofollow noreferrer\">strftime.net</a> webpage to discover formats.</p>\n"}], "owner": {"reputation": 8321, "user_id": 359219, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/953d32e245f7eb0e670bde0577f1eb43?s=128&d=identicon&r=PG", "display_name": "pitosalas", "link": "https://stackoverflow.com/users/359219/pitosalas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 59546423, "answer_count": 1, "score": 0, "last_activity_date": 1577865394, "creation_date": 1577807381, "last_edit_date": 1577828333, "question_id": 59546126, "link": "https://stackoverflow.com/questions/59546126/how-to-parse-8-31-2017-154532-to-a-datetime-object", "title": "How to parse &quot;8/31/2017 15:45:32&quot; to a DateTime object", "body": "<p>I tried all sorts of combinations and the one that seems like it ought to work is:</p>\n\n<pre><code>DateTime.strptime \"8/31/2017 15:45:32\", \"%m/%d/%y %H:%M:%S\"\n</code></pre>\n\n<p>and </p>\n\n<pre><code>DateTime.parse \"8/31/2017 15:45:32\"\n</code></pre>\n\n<p>But they don't work and in fact I can't find the magical incantation to parse it.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "selenium-chromedriver", "watir"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1577796015, "post_id": 59543896, "comment_id": 105257379, "body": "Sounds like your regular Captcha protection. You can take a screenshot with <code>browser.screenshot.save(&#39;screenshot.png&#39;)</code> and see what the page looks like."}, {"owner": {"reputation": 41, "user_id": 12159056, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MNJOFK1LEd8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdCuA2NdPx7_h0wkuogK7zt7DDlHQ/photo.jpg?sz=128", "display_name": "Shailendra Gehlot", "link": "https://stackoverflow.com/users/12159056/shailendra-gehlot"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1577799861, "post_id": 59543896, "comment_id": 105258681, "body": "@Casper Yes, this is the main reason, it says <i>Please verify you are a human</i>  is there any way I can overcome this thing? I tried it without Headless there I was already getting the Captcha error."}], "owner": {"reputation": 41, "user_id": 12159056, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MNJOFK1LEd8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdCuA2NdPx7_h0wkuogK7zt7DDlHQ/photo.jpg?sz=128", "display_name": "Shailendra Gehlot", "link": "https://stackoverflow.com/users/12159056/shailendra-gehlot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1578564983, "creation_date": 1577793767, "last_edit_date": 1578564983, "question_id": 59543896, "link": "https://stackoverflow.com/questions/59543896/watirs-browser-refresh-gives-access-denied", "title": "Watir&#39;s browser.refresh gives &quot;Access denied&quot;", "body": "<p>I am exploring Watir in my project. It works perfectly when trying a URL for the first time, but when I navigate to another URL or even I just refresh the existing Watir's browser (by command and manual refresh) it says <strong>ACCESS DENIED</strong> <code>Please verify you are a human</code>.</p>\n\n<p>I Have googled for this and added Headless in my code but that did not work.</p>\n\n<p>This is what I am trying in my rails console:</p>\n\n<pre><code># Headless initialized and started\n&gt; headless = Headless.new\n&gt; headless.start\n\n# Watir object initialized and navigated\n&gt; browser = Watir::Browser.new\n&gt; browser.goto 'https://www.pepboys.com/'\n\n# Typed `browser` in console, got the output\n&gt; browser\n\n`WARN Selenium [DEPRECATION] Selenium::WebDriver::Error::NoAlertPresentError is deprecated. Use Selenium::WebDriver::Error::NoSuchAlertError (ensure the driver supports W3C WebDriver specification) instead.\n =&gt; #&lt;Watir::Browser:0x..f80f33b9a75f7d034 url=\"https://www.pepboys.com/\" title=\"**Pep Boys Tires, Auto Parts, Auto Repair &amp; Service and Car Accessories**\"&gt;`\n\n# Now when refreshing `browser`\n\n&gt; browser.refresh\n\n# Typed `browser` in console, got the output\n\n&gt; browser\n\n`WARN Selenium [DEPRECATION] Selenium::WebDriver::Error::NoAlertPresentError is deprecated. Use Selenium::WebDriver::Error::NoSuchAlertError (ensure the driver supports W3C WebDriver specification) instead.\n =&gt; #&lt;Watir::Browser:0x..f80f33b9a75f7d034 url=\"https://www.pepboys.com/\" title=\"**Access to this page has been denied.**\"&gt;`\n</code></pre>\n\n<p>Both <code>browser</code> has different <strong>title</strong> where one is giving the site's title and another one is giving Access denied message.</p>\n\n<p>Please, can anyone help me with what I am doing wrong here or missing anything?</p>\n"}, {"tags": ["ruby", "apache-kafka", "karafka"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1577805916, "post_id": 59543817, "comment_id": 105260622, "body": "What do you mean &quot;the database&quot;? If you&#39;re trying to populate a database, Kafka Connect is more common than a plain Consumer"}, {"owner": {"reputation": 909, "user_id": 1820610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f80c479f4ca6e76772b584c1b991ce57?s=128&d=identicon&r=PG", "display_name": "John Cleary", "link": "https://stackoverflow.com/users/1820610/john-cleary"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 1, "creation_date": 1578010271, "post_id": 59543817, "comment_id": 105310867, "body": "Thanks @cricket_007 - I&#39;ve had a look and that does seem like a better fit for this scenario."}], "answers": [{"tags": [], "owner": {"reputation": 909, "user_id": 1820610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f80c479f4ca6e76772b584c1b991ce57?s=128&d=identicon&r=PG", "display_name": "John Cleary", "link": "https://stackoverflow.com/users/1820610/john-cleary"}, "is_accepted": false, "score": 0, "last_activity_date": 1577815127, "creation_date": 1577815127, "answer_id": 59547218, "question_id": 59543817, "link": "https://stackoverflow.com/questions/59543817/karafka-start-from-beginning-not-working-as-expected/59547218#59547218", "title": "Karafka start_from_beginning not working as expected", "body": "<p>The issue was in fact with my understanding of <code>start_from_beginning</code>, the purpose of which is to decide how <strong>new</strong> consumers should behave. Existing consumers are always expected to pick up from where they left off. </p>\n\n<p>I found two ways to achieve what I was looking for:</p>\n\n<p>1 - Using Kafka's seek function (recommended):</p>\n\n<p>From the wiki: <a href=\"https://github.com/karafka/karafka/wiki/Events-monitoring-and-logging#using-the-connectionlistenerbefore_fetch_loop-for-topic-seeking\" rel=\"nofollow noreferrer\">https://github.com/karafka/karafka/wiki/Events-monitoring-and-logging#using-the-connectionlistenerbefore_fetch_loop-for-topic-seeking</a></p>\n\n<p>2 - Changing the <code>client_id</code> in <code>karafka.rb</code>, e.g.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class KarafkaApp &lt; Karafka::App\n  setup do |config|\n    config.kafka.seed_brokers = %w[kafka://kafka:9092]\n    config.client_id = \"app_#{ ENV['APP_ID'] }-#{ SecureRandom.uuid }\"\n    config.logger = Rails.logger\n  end\n  ... \n</code></pre>\n\n<p>Using <code>SecureRandom.uuid</code> will ensure the your consumer has a unique <code>client_id</code> and therefore reprocess all messages.</p>\n\n<p>Option 2 is more of a hack, but depending on your use case, might be what you're looking for. </p>\n"}], "owner": {"reputation": 909, "user_id": 1820610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f80c479f4ca6e76772b584c1b991ce57?s=128&d=identicon&r=PG", "display_name": "John Cleary", "link": "https://stackoverflow.com/users/1820610/john-cleary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 277, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577815127, "creation_date": 1577793308, "last_edit_date": 1577812748, "question_id": 59543817, "link": "https://stackoverflow.com/questions/59543817/karafka-start-from-beginning-not-working-as-expected", "title": "Karafka start_from_beginning not working as expected", "body": "<p>I've created a project to help with my understanding of Kafka. It's set up as three identical Rails apps all inside Docker with Karafka configured to consume the messages - if you create a record in one, it's replicated across to the other two. I assumed that the <code>start_from_beginning</code> setting would mean that every time the Karafka server was restarted it would start from offset 0, but that does seem to be the case. Can someone please explain what I've done wrong or correct my understanding.</p>\n\n<p>Here are the two significant sections from <code>karafka.rb</code></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>  setup do |config|\n    config.kafka.seed_brokers = %w[kafka://kafka:9092]\n    config.client_id = \"app_#{ ENV['APP_ID'] }\"\n    config.logger = Rails.logger\n  end\n</code></pre>\n\n<p>...</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>  consumer_groups.draw do\n    topic :party do\n      consumer PartyConsumer\n      start_from_beginning true\n    end\n  end\n</code></pre>\n\n<p>I have already tried putting <code>config.kafka.start_from_beginning = true</code> in the config section of <code>karafka.rb</code> but no joy.</p>\n\n<p>When I create a record in one of the apps, it's sync over to the other two. This is what I was trying to do:</p>\n\n<ul>\n<li>empty the database in app 3</li>\n<li>restart karafka server in app 3 (<code>with start_from_beginning = true</code>)</li>\n</ul>\n\n<p>At this point, I was expecting the database to be re-created from Kafka by rewinding to offset 0 and replaying all the messages. What have I missed?</p>\n\n<p>The full project is here: <a href=\"https://github.com/jcleary/kafka-demo\" rel=\"nofollow noreferrer\">https://github.com/jcleary/kafka-demo</a></p>\n"}, {"tags": ["ruby", "rubygems", "jekyll", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 9834227, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Q1hrQb-qHr4/AAAAAAAAAAI/AAAAAAAAAE0/kEb1B6feWDM/photo.jpg?sz=128", "display_name": "J&#225;chym Tom&#225;\u0161ek", "link": "https://stackoverflow.com/users/9834227/j%c3%a1chym-tom%c3%a1%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1577956574, "post_id": 59548200, "comment_id": 105289475, "body": "as you can see, I am running the same version of jekyll. I tried putting the version inside Gemfile. <code>jekyll -v</code> outputs 4.0.0 but inside the folder it fails nonetheless"}, {"owner": {"reputation": 43, "user_id": 11198823, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--J29ZW6Y2y8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdPVISVQU5YVGIeD6zt9BloR2sO5A/mo/photo.jpg?sz=128", "display_name": "Ethereal Unagi", "link": "https://stackoverflow.com/users/11198823/ethereal-unagi"}, "reply_to_user": {"reputation": 17, "user_id": 9834227, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Q1hrQb-qHr4/AAAAAAAAAAI/AAAAAAAAAE0/kEb1B6feWDM/photo.jpg?sz=128", "display_name": "J&#225;chym Tom&#225;\u0161ek", "link": "https://stackoverflow.com/users/9834227/j%c3%a1chym-tom%c3%a1%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1577962516, "post_id": 59548200, "comment_id": 105291893, "body": "Can you check out the edits I made to the answer. I think they might be the problem."}, {"owner": {"reputation": 17, "user_id": 9834227, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Q1hrQb-qHr4/AAAAAAAAAAI/AAAAAAAAAE0/kEb1B6feWDM/photo.jpg?sz=128", "display_name": "J&#225;chym Tom&#225;\u0161ek", "link": "https://stackoverflow.com/users/9834227/j%c3%a1chym-tom%c3%a1%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1578055561, "post_id": 59548200, "comment_id": 105323904, "body": "no, the issue still persist. As for the library I have it installed. On my windows as well as on ubuntu"}, {"owner": {"reputation": 7702, "user_id": 894763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d013c9681666f0a68a6c1c00ff4d603?s=128&d=identicon&r=PG", "display_name": "jcupitt", "link": "https://stackoverflow.com/users/894763/jcupitt"}, "edited": false, "score": 0, "creation_date": 1578905389, "post_id": 59548200, "comment_id": 105577384, "body": "Ruby ffi needs to be able to find the shared library. Under WSL it needs to be in one of the lib areas managed by ldconfig, or you need to add the folder it&#39;s in to <code>LD_LIBRARY_PATH</code>. On Windows, you need to add the folder with all the libvips DLLs to <code>RUBY_DLL_PATH</code>."}], "tags": [], "owner": {"reputation": 43, "user_id": 11198823, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--J29ZW6Y2y8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdPVISVQU5YVGIeD6zt9BloR2sO5A/mo/photo.jpg?sz=128", "display_name": "Ethereal Unagi", "link": "https://stackoverflow.com/users/11198823/ethereal-unagi"}, "is_accepted": false, "score": 0, "last_activity_date": 1577962493, "last_edit_date": 1577962493, "creation_date": 1577823845, "answer_id": 59548200, "question_id": 59543509, "link": "https://stackoverflow.com/questions/59543509/jekyll-gem-breaks-when-adding-gemfile/59548200#59548200", "title": "Jekyll gem breaks when adding Gemfile", "body": "<p>There is a problem with the version of Jekyll you are running in the Gemfile. The one you have locally is working so this is what you can try.\nRun <code>jekyll -v</code> <strong>outside</strong> of the directory where jekyll fails. Replace the version in your Gemfile with the one that is outputted and <code>bundle install</code>.</p>\n\n<p>I think that should work.</p>\n\n<p>Edit: You need to put the jekyll gem inside your Gemfile like this:\n<code>gem \"jekyll\"</code></p>\n\n<p>Otherwise you should try installing the <a href=\"https://packages.ubuntu.com/xenial/libglib2.0-0\" rel=\"nofollow noreferrer\">libglib package it says is missing</a>.</p>\n"}], "owner": {"reputation": 17, "user_id": 9834227, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Q1hrQb-qHr4/AAAAAAAAAAI/AAAAAAAAAE0/kEb1B6feWDM/photo.jpg?sz=128", "display_name": "J&#225;chym Tom&#225;\u0161ek", "link": "https://stackoverflow.com/users/9834227/j%c3%a1chym-tom%c3%a1%c5%a1ek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577962493, "creation_date": 1577791681, "question_id": 59543509, "link": "https://stackoverflow.com/questions/59543509/jekyll-gem-breaks-when-adding-gemfile", "title": "Jekyll gem breaks when adding Gemfile", "body": "<p>I have my website in jekyll. All worked fine untill I did something (not sure what) and the installation broke.</p>\n\n<p>I have tried this on Ubuntu WSL and on Windows native ruby, the issue is the same. I can install gems fine. And jekyll runs correctly, but if I add gemfile and run jekyll again (<code>bundle exec jekyll -v</code> or even <code>jekyll -v</code> in that folder) in other directories jekyll runs fine, and if I remove Gemfile, jekyll runs as well.</p>\n\n<p>The error is:</p>\n\n<pre><code>bundle exec jekyll -v\nTraceback (most recent call last):\n        23: from C:/tools/ruby26/bin/jekyll:23:in `&lt;main&gt;'\n        22: from C:/tools/ruby26/bin/jekyll:23:in `load'\n        21: from C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/jekyll-4.0.0/exe/jekyll:11:in `&lt;top (required)&gt;'\n        20: from C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/jekyll-4.0.0/lib/jekyll/plugin_manager.rb:53:in `require_from_bundler'\n        19: from C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/bundler-2.1.2/lib/bundler.rb:174:in `require'\n        18: from C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/bundler-2.1.2/lib/bundler/runtime.rb:58:in `require'\n        17: from C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/bundler-2.1.2/lib/bundler/runtime.rb:58:in `each'\n        16: from C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/bundler-2.1.2/lib/bundler/runtime.rb:69:in `block in require'         15: from C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/bundler-2.1.2/lib/bundler/runtime.rb:69:in `each'\n        14: from C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/bundler-2.1.2/lib/bundler/runtime.rb:74:in `block (2 levels) in require'\n        13: from C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/bundler-2.1.2/lib/bundler/runtime.rb:74:in `require'\n        12: from C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/jekyll-thumb-0.2.1/lib/jekyll-thumb.rb:1:in `&lt;top (required)&gt;'        11: from C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/jekyll-thumb-0.2.1/lib/jekyll-thumb.rb:1:in `require'\n        10: from C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/jekyll-thumb-0.2.1/lib/jekyll/thumb.rb:2:in `&lt;top (required)&gt;'         9: from C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/jekyll-thumb-0.2.1/lib/jekyll/thumb.rb:2:in `require'\n         8: from C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/jekyll-thumb-0.2.1/lib/jekyll/thumb/tag.rb:1:in `&lt;top (required)&gt;'\n         7: from C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/jekyll-thumb-0.2.1/lib/jekyll/thumb/tag.rb:1:in `require'              6: from C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/ruby-vips-2.0.16/lib/ruby-vips.rb:1:in `&lt;top (required)&gt;'              5: from C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/ruby-vips-2.0.16/lib/ruby-vips.rb:1:in `require'\n         4: from C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/ruby-vips-2.0.16/lib/vips.rb:36:in `&lt;top (required)&gt;'\n         3: from C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/ruby-vips-2.0.16/lib/vips.rb:45:in `&lt;module:GLib&gt;'\n         2: from C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/ffi-1.11.3-x64-mingw32/lib/ffi/library.rb:99:in `ffi_lib'              1: from C:/tools/ruby26/lib/ruby/gems/2.6.0/gems/ffi-1.11.3-x64-mingw32/lib/ffi/library.rb:99:in `map'\nblock in ffi_lib: Could not  (LoadError) 'libglib-2.0-0.dll': Not found\n</code></pre>\n\n<p>(is exactly the same on WSL except it's <code>libglib-2.0-0.so</code>)</p>\n\n<p>My gemfile is this:</p>\n\n<pre><code>source \"https://rubygems.org\"\n\n# If you have any plugins, put them here!\ngroup :jekyll_plugins do\n  gem \"jekyll-paginate-v2\"\n  gem \"jekyll-sitemap\"\n  gem \"jekyll-org\"\n  gem \"jekyll-thumb\"\n  gem \"flickraw\"\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n\n<p>From what I've concluded the version of jekyll (or it's dependency) when supplying Gemfile is corrupt in some way, yet when I look at bundler's output it's the global gem installed manually. I have even tried placing libglib-2.0-0.dll into system32 directory.</p>\n\n<p>Versions of packages:</p>\n\n<pre><code>ruby: 2.6.5 [x64-mingw32]\nbundler: 2.1.2\ngem: 3.0.3\njekyll: 4.0.0\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "edited": false, "score": 3, "creation_date": 1577789174, "post_id": 59542987, "comment_id": 105255055, "body": "your javascript it&#39;s code that will run into your client, not in your server"}], "answers": [{"tags": [], "owner": {"reputation": 89, "user_id": 6500153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10208342628275878/picture?type=large", "display_name": "Bozidar Milivojevic", "link": "https://stackoverflow.com/users/6500153/bozidar-milivojevic"}, "is_accepted": false, "score": 0, "last_activity_date": 1577791192, "creation_date": 1577791192, "answer_id": 59543399, "question_id": 59542987, "link": "https://stackoverflow.com/questions/59542987/how-to-call-a-different-methods-from-javascript-file-in-rails-controller-method/59543399#59543399", "title": "how to call a different methods from JavaScript file in rails controller method", "body": "<p>You will need to have verify_code.js.erb file which will respond to js in your controller action. You can't call/write js code in controller action. Then inside this verify code js file you can call that chunk of code.</p>\n"}, {"tags": [], "owner": {"reputation": 1911, "user_id": 3163663, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/dfc7587fd73f2efa19d6f1f9611b70ba?s=128&d=identicon&r=PG", "display_name": "Jason FB", "link": "https://stackoverflow.com/users/3163663/jason-fb"}, "is_accepted": false, "score": 1, "last_activity_date": 1578430120, "creation_date": 1578430120, "answer_id": 59635852, "question_id": 59542987, "link": "https://stackoverflow.com/questions/59542987/how-to-call-a-different-methods-from-javascript-file-in-rails-controller-method/59635852#59635852", "title": "how to call a different methods from JavaScript file in rails controller method", "body": "<p>another way to think about it is that the javascript <code>sendCode</code> function you have here is probably being called AFTER a request has hit the server.</p>\n\n<p>The request that hits the server is what will hit the Rails-side method <code>verify_code</code> (it will do this because it will hit a unique endpoint that will know which controller &amp; action to route to). It will then RESPOND with a simple http status of 200. Or maybe it will respond with a json resule like </p>\n\n<p>result:\n {success: ok}</p>\n\n<p>or maybe it will respond with a blank HTML page. It doesn't matter what the Rails-side controller responds as, in modern apps you typically will be calling your subsequent <code>sendCode</code> from <strong>Javascript promise</strong>, like a then() clause</p>\n\n<p>For example, a typical Ajax request might look like:</p>\n\n<pre><code>fetch('http://yourdomain.com/api/xyi').then((result) =&gt; {\n  // use the results here, if there are any\n})\n</code></pre>\n\n<p>In your case, maybe the result contains the phone number that would get passed to your front end code sendCode</p>\n\n<pre><code>fetch('http://yourdomain.com/api/xyi').then(({phoneNumber} = result) =&gt; {\n  // phone number was destructured out of results\n  sendCode(phoneNumber)\n})\n</code></pre>\n\n<p>what's important here is that the sendCode function only gets called after the Ajax request has returned successfully </p>\n"}, {"tags": [], "owner": {"reputation": 213, "user_id": 5351712, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZYOmohse3iA/AAAAAAAAAAI/AAAAAAAAAVw/xerfEso84vk/photo.jpg?sz=128", "display_name": "Muhammad Awais", "link": "https://stackoverflow.com/users/5351712/muhammad-awais"}, "is_accepted": false, "score": 0, "last_activity_date": 1581660319, "creation_date": 1581660319, "answer_id": 60220870, "question_id": 59542987, "link": "https://stackoverflow.com/questions/59542987/how-to-call-a-different-methods-from-javascript-file-in-rails-controller-method/60220870#60220870", "title": "how to call a different methods from JavaScript file in rails controller method", "body": "<p>I was actually taken the wrong direction.</p>\n"}], "owner": {"reputation": 213, "user_id": 5351712, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZYOmohse3iA/AAAAAAAAAAI/AAAAAAAAAVw/xerfEso84vk/photo.jpg?sz=128", "display_name": "Muhammad Awais", "link": "https://stackoverflow.com/users/5351712/muhammad-awais"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1581660319, "creation_date": 1577788867, "last_edit_date": 1577789226, "question_id": 59542987, "link": "https://stackoverflow.com/questions/59542987/how-to-call-a-different-methods-from-javascript-file-in-rails-controller-method", "title": "how to call a different methods from JavaScript file in rails controller method", "body": "<p>i have <strong>firebase-auth.js</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>    function sendCode(phoneNumber) {\n        firebase.auth().signInWithPhoneNumber(phoneNumber, appVerifier)\n        .then(function (confirmationResult) {\n          // SMS sent. Prompt user to type the code from the message, then sign the\n          // user in with confirmationResult.confirm(code).\n          window.confirmationResult = confirmationResult;\n        }).catch(function (error) {\n          // Error; SMS not sent\n          // ...\n        });\n    }\n</code></pre>\n\n<p>i want to call the method <code>sendCode(phoneNumber)</code> in rails controller method <code>def verify_code()</code>.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 8462, "user_id": 405865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29f04f339715955060858e0e65e1311?s=128&d=identicon&r=PG", "display_name": "fphilipe", "link": "https://stackoverflow.com/users/405865/fphilipe"}, "is_accepted": true, "score": 4, "last_activity_date": 1577785156, "last_edit_date": 1577785156, "creation_date": 1577784478, "answer_id": 59542129, "question_id": 59542074, "link": "https://stackoverflow.com/questions/59542074/ruby-blocks-yield-puts-vs-puts-yield/59542129#59542129", "title": "Ruby blocks - yield {puts} vs. puts yield", "body": "<p>In the first snippet:</p>\n\n<ul>\n<li>the method yields to the block</li>\n<li>the block prints the string <code>\"anything\"</code></li>\n<li>the method returns the return value of the blocks, which is the return value of <code>puts</code>, which is <code>nil</code></li>\n</ul>\n\n<p>In the second snippet:</p>\n\n<ul>\n<li>the method yields to the block</li>\n<li>the block returns the string <code>\"anything\"</code></li>\n<li>the method prints the return value of the block</li>\n<li>the method returns the value of <code>puts</code>, which is <code>nil</code></li>\n</ul>\n\n<p>Having said that, it depends on what you want to achieve with the block the methods yields to.</p>\n\n<p>In the first snippet, it is more about yielding the control to the block and the block does whatever it needs to do. The return value might not be relevant, or it might be relevant as the return value of the method.</p>\n\n<p>In the second snippet, the block serves as a way to calculate a value that will then be used by the method.</p>\n\n<p>To illustrate the two cases, here's two examples:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def on_create\n  yield created_user\nend\n\non_create do |user|\n  send_welcome_email(user)\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def send_email(address)\n  body = yield\n  EmailService.deliver(address, body)\nend\n\nsend_email('alice@example.com') do\n  \"Hello Alice, ...\"\nend\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 10197892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3yPxc.jpg?s=128&g=1", "display_name": "Tommy5230", "link": "https://stackoverflow.com/users/10197892/tommy5230"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 59542129, "answer_count": 1, "score": 1, "last_activity_date": 1577785156, "creation_date": 1577784171, "question_id": 59542074, "link": "https://stackoverflow.com/questions/59542074/ruby-blocks-yield-puts-vs-puts-yield", "title": "Ruby blocks - yield {puts} vs. puts yield", "body": "<p>While browsing Rubymonk tutorial, I've noticed something odd.</p>\n\n<p>Although the following two snippets produce the same output, I'm wondering if there are some ninja-hidden implications of using one or another. Is it just the flexibility or should I be cautious about something?</p>\n\n<pre><code>def foo\n yield\nend\nfoo { puts \"antyhing\"  }\n</code></pre>\n\n<p>vs.</p>\n\n<pre><code>def foo\n puts yield\nend\nfoo { \"antyhing\"  }\n</code></pre>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 2, "creation_date": 1577781711, "post_id": 59541450, "comment_id": 105252436, "body": "<i>I think it is perfectly fine to write complex queries in plain SQL because SQL is usually easier to write and to understand</i> +1"}, {"owner": {"reputation": 23, "user_id": 12630833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b9abca50cbc83c209b47b2325ecc888?s=128&d=identicon&r=PG&f=1", "display_name": "vlad", "link": "https://stackoverflow.com/users/12630833/vlad"}, "edited": false, "score": 0, "creation_date": 1577784775, "post_id": 59541450, "comment_id": 105253475, "body": "I think so. <code>@users = User.find_by_sql([           &quot;SELECT u.* FROM users u WHERE EXISTS (SELECT 1 FROM user_groups ug, groups g, categories c where u.id = ug.user_id AND ug.group_id = g.id AND g.category_id = c.id AND c.id in (&#39;1, 2, 3&#39;))&quot;])</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1577785978, "post_id": 59541450, "comment_id": 105253883, "body": "<i>\u201cSQL is usually easier to write and to understand\u201d</i> \u2014 \ud83d\udcaf"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1577829083, "post_id": 59541450, "comment_id": 105266365, "body": "An ORM helps transform from a DBM-specific language to a more generic one, which anyone who&#39;s had to deal with recoding big corporate mainframes with proprietary language knows can be a major PITA. In those cases the ORM can save years of work. If translating between two DBMs that are SQL compliant, it&#39;s easier to make use of raw SQL when switching than it used to be, but still, sticking to the ORM will make it even easier; Imagine developing in SQLite or PgSQL on your laptop on a plane then switching to full Oracle on a big server with only a tiny change in the connection string. ORM FTW."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1577908393, "post_id": 59541450, "comment_id": 105279745, "body": "Fair enough, but isn&#39;t the question just a job security way of doing a left join? Or am I missing something?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1577908862, "post_id": 59541450, "comment_id": 105279834, "body": "You also don&#39;t need to jump through all those hoops. <code>User.joins(groups: :categories).where(categories: { id: [1, 2, 3] })</code> will give the same results without the subquery. Since <code>category_id</code> is a column on <code>groups</code> you can get rid of the join to <code>categories</code> - <code>User.joins(:groups).where(groups: { category_id: [1, 2, 3] })</code>."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 6, "last_activity_date": 1577907765, "last_edit_date": 1577907765, "creation_date": 1577780313, "answer_id": 59541450, "question_id": 59541212, "link": "https://stackoverflow.com/questions/59541212/how-to-implement-complex-sql-queries-in-ruby-on-rails/59541450#59541450", "title": "How to implement complex SQL queries in Ruby on Rails?", "body": "<p>I am not a big fan of always translating complex queries into the ActiveRecord query language. Instead, I think it is perfectly fine to write complex queries in plain SQL because SQL is usually easier to write and to understand.</p>\n\n<p>That said, I think this might work:</p>\n\n<pre><code>User.where(\n  id: UserGroup.select('user_groups.user_id')\n               .joins(groups: :categories)\n               .where(categories: { id: [1, 2, 3] })\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1577908314, "creation_date": 1577908314, "answer_id": 59555630, "question_id": 59541212, "link": "https://stackoverflow.com/questions/59541212/how-to-implement-complex-sql-queries-in-ruby-on-rails/59555630#59555630", "title": "How to implement complex SQL queries in Ruby on Rails?", "body": "<p>This is probably a lot less complicated than you think:</p>\n\n<pre><code>class User\n  has_many :user_groups\n  has_many :groups, through: :user_groups\nend\n\nclass Group\n  has_many :user_groups\n  has_many :users, through: :user_groups\n  belongs_to :category\nend\n</code></pre>\n\n<hr>\n\n<pre><code>User.joins(:groups)\n    .where(groups: { category_id: [1,2,3] })\n</code></pre>\n\n<p>ActiveRecord will handle joining the intermediate table.</p>\n\n<p>Since this is a left inner join any rows without a match in the join table are omitted. No need to do <code>WHERE EXISTS ...</code>. This will give you users that belong to at least one group with the category 1, 2 or 3.</p>\n"}], "owner": {"reputation": 23, "user_id": 12630833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b9abca50cbc83c209b47b2325ecc888?s=128&d=identicon&r=PG&f=1", "display_name": "vlad", "link": "https://stackoverflow.com/users/12630833/vlad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "accepted_answer_id": 59541450, "answer_count": 2, "score": 2, "last_activity_date": 1577908314, "creation_date": 1577778882, "last_edit_date": 1577828734, "question_id": 59541212, "link": "https://stackoverflow.com/questions/59541212/how-to-implement-complex-sql-queries-in-ruby-on-rails", "title": "How to implement complex SQL queries in Ruby on Rails?", "body": "<p>I have four tables: \"<code>users</code>\", \"<code>user_groups</code>\", \"<code>groups</code>\", \"<code>categories</code>\".\n\"<code>users</code>\" and \"<code>groups</code>\" are <code>many_to_many</code> relations through \"<code>user_groups</code>\".\n\"<code>groups</code>\" and \"<code>categories</code>\" are <code>many_to_one</code> relations.</p>\n\n<p>I  created the following SQL query, but I'm not sure how to implement it in Ruby on Rails:</p>\n\n<pre><code>SELECT u.*\nFROM users u\nWHERE EXISTS (SELECT 1\n                FROM  user_groups ug,\n                        groups g,\n                        categories c\n                WHERE u.id = ug.user_id\n                AND   ug.group_id = g.id\n                AND   g.category_id = c.id\n                AND   c.id in ('1, 2, 3'))\n</code></pre>\n\n<p>What is the best way to implement it without using raw SQL in Ruby on Rails?</p>\n"}, {"tags": ["ruby", "cucumber", "watir", "ffi", "rubymine"], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 2066432, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/547350787/picture?type=large", "display_name": "tdugan", "link": "https://stackoverflow.com/users/2066432/tdugan"}, "edited": false, "score": 0, "creation_date": 1583511408, "post_id": 59666450, "comment_id": 107154097, "body": "i have the same problem but i have ruby 2.6.5p114 (2019-10-01 revision 67812) which i think this the latest version.    why is ruby so hard to work with?"}], "tags": [], "owner": {"reputation": 23, "user_id": 8358200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92f8ff434f46b74584c3595632c490e5?s=128&d=identicon&r=PG&f=1", "display_name": "Bueno", "link": "https://stackoverflow.com/users/8358200/bueno"}, "is_accepted": false, "score": 0, "last_activity_date": 1578581148, "creation_date": 1578581148, "answer_id": 59666450, "question_id": 59540392, "link": "https://stackoverflow.com/questions/59540392/ffi-is-a-required-pre-requisite-for-windows-or-posix-spawn-support-in-the-childp/59666450#59666450", "title": "FFI is a required pre-requisite for Windows or posix_spawn support in the ChildProcess gem", "body": "<p>I recommend checking the version of your ruby.\nThe FFI gem has different versions.\nSome work on ruby until version 2.2.\nSometimes you are installing the latest version of the FFI gem on an old ruby version\nI recommend uninstalling the current ruby and upgrading ruby to version 2.5.7. That done, reinstall the gems and see if your automation works</p>\n"}, {"tags": [], "owner": {"reputation": 697, "user_id": 1074881, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cf96c08391956222355b937b4c581fa0?s=128&d=identicon&r=PG", "display_name": "ezhil", "link": "https://stackoverflow.com/users/1074881/ezhil"}, "is_accepted": false, "score": 0, "last_activity_date": 1594487101, "creation_date": 1594487101, "answer_id": 62852169, "question_id": 59540392, "link": "https://stackoverflow.com/questions/59540392/ffi-is-a-required-pre-requisite-for-windows-or-posix-spawn-support-in-the-childp/62852169#62852169", "title": "FFI is a required pre-requisite for Windows or posix_spawn support in the ChildProcess gem", "body": "<p>Use this command to install FFI - <strong>gem install ffi -v 1.13.1</strong></p>\n"}], "owner": {"reputation": 81, "user_id": 1976848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6lhzY.jpg?s=128&g=1", "display_name": "Himanil Gupta", "link": "https://stackoverflow.com/users/1976848/himanil-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2189, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1594487101, "creation_date": 1577773416, "question_id": 59540392, "link": "https://stackoverflow.com/questions/59540392/ffi-is-a-required-pre-requisite-for-windows-or-posix-spawn-support-in-the-childp", "title": "FFI is a required pre-requisite for Windows or posix_spawn support in the ChildProcess gem", "body": "<p>I am executing Cucumber scripts created using Ruby Programming Language, but it throws an error related to <code>Child Process</code> which has a pre-requisites od <code>FFI gem</code>, below is the error stacktrace</p>\n\n<pre><code>    FFI is a required pre-requisite for Windows or posix_spawn support in the ChildProcess gem. Ensure the `ffi` gem is installed. If you believe this is an error, please file a bug at http://github.com/enkessler/childprocess/issues (ChildProcess::MissingFFIError)\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/childprocess-3.0.0/lib/childprocess/windows.rb:6:in `rescue in &lt;top (required)&gt;'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/childprocess-3.0.0/lib/childprocess/windows.rb:3:in `&lt;top (required)&gt;'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/childprocess-3.0.0/lib/childprocess.rb:209:in `require'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/childprocess-3.0.0/lib/childprocess.rb:209:in `&lt;top (required)&gt;'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.142.6/lib/selenium/webdriver.rb:20:in `require'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.142.6/lib/selenium/webdriver.rb:20:in `&lt;top (required)&gt;'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.142.6/lib/selenium-webdriver.rb:20:in `require'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/selenium-webdriver-3.142.6/lib/selenium-webdriver.rb:20:in `&lt;top (required)&gt;'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/watir-6.11.0/lib/watir.rb:1:in `require'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/watir-6.11.0/lib/watir.rb:1:in `&lt;top (required)&gt;'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/page-object-2.2.4/lib/page-object.rb:1:in `require'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/page-object-2.2.4/lib/page-object.rb:1:in `&lt;top (required)&gt;'\nE:/e2NxtAutomation/DEVOPS/Spec/Func/features/support/env.rb:4:in `require'\nE:/e2NxtAutomation/DEVOPS/Spec/Func/features/support/env.rb:4:in `&lt;top (required)&gt;'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/cucumber-3.1.1/lib/cucumber/glue/registry_and_more.rb:107:in `load'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/cucumber-3.1.1/lib/cucumber/glue/registry_and_more.rb:107:in `load_code_file'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/cucumber-3.1.1/lib/cucumber/runtime/support_code.rb:144:in `load_file'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/cucumber-3.1.1/lib/cucumber/runtime/support_code.rb:85:in `block in load_files!'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/cucumber-3.1.1/lib/cucumber/runtime/support_code.rb:84:in `each'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/cucumber-3.1.1/lib/cucumber/runtime/support_code.rb:84:in `load_files!'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/cucumber-3.1.1/lib/cucumber/runtime.rb:272:in `load_step_definitions'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/cucumber-3.1.1/lib/cucumber/runtime.rb:68:in `run!'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/cucumber-3.1.1/lib/cucumber/cli/main.rb:34:in `execute!'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/cucumber-3.1.1/bin/cucumber:9:in `&lt;top (required)&gt;'\nC:/Ruby24-x64/bin/cucumber:23:in `load'\nC:/Ruby24-x64/bin/cucumber:23:in `&lt;main&gt;'\n\nProcess finished with exit code 2\n</code></pre>\n\n<p>As per Error I have successfully installed the FFI Gem</p>\n\n<pre><code>gem install ffi\nFetching: ffi-1.11.3-x64-mingw32.gem (100%)\nSuccessfully installed ffi-1.11.3-x64-mingw32\nParsing documentation for ffi-1.11.3-x64-mingw32\nInstalling ri documentation for ffi-1.11.3-x64-mingw32\nDone installing documentation for ffi after 2 seconds\n1 gem installed\n</code></pre>\n\n<p>But still the same error occurs. my machine details\nOS: Windows 7\nRuby version: 2.4.0</p>\n\n<p>Suggest me some workaround for this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "relational-database"], "comments": [{"owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "edited": false, "score": 0, "creation_date": 1577801803, "post_id": 59539176, "comment_id": 105259253, "body": "If you can see the expected result in your console queries, this is probably because of what data you are collecting in the controller, and/or how you are serializing that into JSON. Could you add your controller code?"}, {"owner": {"reputation": 1266, "user_id": 7619578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4b8b0d6308975901d498601dc6ffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "Int&#39;l Man Of Coding Mystery", "link": "https://stackoverflow.com/users/7619578/intl-man-of-coding-mystery"}, "edited": false, "score": 0, "creation_date": 1578320008, "post_id": 59539176, "comment_id": 105390367, "body": "Has many relationships need to be pluralized, ie <code>has_many :followings</code>"}], "owner": {"reputation": 15, "user_id": 12327335, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8enwyAJyXuU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3relXpztWaxOdLeCjJ5u36ifd2sfBg/photo.jpg?sz=128", "display_name": "Brian Murillo", "link": "https://stackoverflow.com/users/12327335/brian-murillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577762250, "creation_date": 1577762250, "question_id": 59539176, "link": "https://stackoverflow.com/questions/59539176/rails-api-has-many-relationship-not-being-displayed-in-json", "title": "Rails API has_many relationship not being displayed in JSON", "body": "<p>I am implementing a Following / Follower relationship, for User model. When I navigate to the /users route only the users followers are being included in the users JSON object. I have a feeling it has something to do with the pluralization, but I included a source in the has_many so i'm not really sure.</p>\n\n<p>However when I enter the rails console i'm able to access user.followers and user.following and it properly lists all the users following and followers respectively. </p>\n\n<pre><code>#/users/10\n{\n  \"id\": 10,\n  \"username\": \"guest\",\n  \"companies\": [... ],\n  \"rides\": [.. . ],\n  \"messages\": [  ...],\n  \"forums\": [... ],\n  \"followers\": [... ],\n  #following is not listed here, but should be\n}\n</code></pre>\n\n<pre><code>#models\\User.rb\nclass User &lt; ApplicationRecord\n\n   .\n   .\n   .\n\n  def follow(other_user)\n\n   active_relationships.create(followed_id: other_user.id)\n\n  end\n\n  # Unfollows a user.\n  def unfollow(other_user)\n   active_relationships.find_by(followed_id: other_user.id).destroy\n   # byebug\n  end\n\n  # Returns true if the current user is following the other user.\n  def following?(other_user)\n   following.include?(other_user)\n  end\n\n  has_many :active_relationships, class_name:  \"Friendship\",\n                                   foreign_key: :follower_id,\n                                   dependent:   :destroy\n\n   has_many :passive_relationships, class_name:  \"Friendship\",\n                                   foreign_key: :followed_id,\n                                     dependent:   :destroy\n   has_many :following, through: :active_relationships, source: :followed\n   has_many :followers, through: :passive_relationships, source: :follower\n\n\nend\n\n</code></pre>\n\n<pre><code>#serializers/user_serializer.rb\nclass UserSerializer &lt; ActiveModel::Serializer\n\n  .\n  .\n  .\n\n  has_many :followers\n  has_many :following\n\nend\n\n</code></pre>\n\n<pre><code>#models/friendship.rb\nclass Friendship &lt; ApplicationRecord\n  belongs_to :follower, foreign_key: \"follower_id\", class_name: \"User\"\n  belongs_to :followed, foreign_key: \"followed_id\", class_name: \"User\"\n  validates :follower_id, presence: true\n  validates :followed_id, presence: true\nend\n\n</code></pre>\n\n<pre><code>#schema\n  create_table \"friendships\", force: :cascade do |t|\n    t.integer \"follower_id\"\n    t.integer \"followed_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"followed_id\"], name: \"index_friendships_on_followed_id\"\n    t.index [\"follower_id\", \"followed_id\"], name: \"index_friendships_on_follower_id_and_followed_id\", unique: true\n  end\n\n\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "session", "devise"], "comments": [{"owner": {"reputation": 741, "user_id": 6894749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gbstY.jpg?s=128&g=1", "display_name": "Thang", "link": "https://stackoverflow.com/users/6894749/thang"}, "edited": false, "score": 0, "creation_date": 1577772126, "post_id": 59539081, "comment_id": 105249811, "body": "May I ask what is your Devise routes configuration looks like currently?"}, {"owner": {"reputation": 741, "user_id": 6894749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gbstY.jpg?s=128&g=1", "display_name": "Thang", "link": "https://stackoverflow.com/users/6894749/thang"}, "edited": false, "score": 0, "creation_date": 1577774176, "post_id": 59539081, "comment_id": 105250283, "body": "And the Devise version?"}], "answers": [{"tags": [], "owner": {"reputation": 302, "user_id": 12336104, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dRc1b5iireA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re5SEVTDW1GD14ZQuGn5AEmfSJ4iA/photo.jpg?sz=128", "display_name": "Thuy Nguyen", "link": "https://stackoverflow.com/users/12336104/thuy-nguyen"}, "is_accepted": false, "score": 0, "last_activity_date": 1577764231, "last_edit_date": 1577764231, "creation_date": 1577763916, "answer_id": 59539324, "question_id": 59539081, "link": "https://stackoverflow.com/questions/59539081/devise-how-to-redirect-to-different-page-based-on-some-parameter-after-sign-ou/59539324#59539324", "title": "Devise how to redirect to different page (based on some parameter) after sign out?", "body": "<p>Try </p>\n\n<blockquote>\n  <p>redirect_to request.parameters.merge controller: \"your_controller\", action: \"your_action\"</p>\n</blockquote>\n"}], "owner": {"reputation": 1, "user_id": 12629149, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z5ZS0n44O_8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdb52fI3scvieQLTzh6L13AjEecxA/photo.jpg?sz=128", "display_name": "Wai Keong Aaron Wan", "link": "https://stackoverflow.com/users/12629149/wai-keong-aaron-wan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577773506, "creation_date": 1577761117, "last_edit_date": 1577773506, "question_id": 59539081, "link": "https://stackoverflow.com/questions/59539081/devise-how-to-redirect-to-different-page-based-on-some-parameter-after-sign-ou", "title": "Devise how to redirect to different page (based on some parameter) after sign out?", "body": "<p>In my application, I have two different login forms from two controller which will both sign_in through the Devise::SessionsController\nAfter signing in, the problem I face is that when I sign out, I want to redirect the path back to the original login forms from which the user logged in depending on the user type.</p>\n\n<pre><code>Ex: user.type = doctor --&gt; goes to login page1 (on logout)\n\n user.type = patient --&gt; goes to login page2 (on logout)\n</code></pre>\n\n<p>I tried using the <code>after_sign_out_path_for(resource_or_scope)</code> to redirect:</p>\n\n<pre><code>if user.type = doctor\n\nlogin_path1\n\nelse user.type = patient\n\nlogin_path2\n\nend\n</code></pre>\n\n<p>But I realise at this point, all params have been deleted. Is there anyway to not delete certain params reaching here ? or how to go about this situation</p>\n\n<p>This is my first time asking a question here. So bear with me, if im doing this wrong</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing", "rspec-rails"], "comments": [{"owner": {"reputation": 1453, "user_id": 3192664, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yH1co.jpg?s=128&g=1", "display_name": "Gautam", "link": "https://stackoverflow.com/users/3192664/gautam"}, "edited": false, "score": 0, "creation_date": 1577760030, "post_id": 59538626, "comment_id": 105247862, "body": "<a href=\"https://stackoverflow.com/questions/4365530/generate-only-tests-from-existing-model-controllers\">check this</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "is_accepted": false, "score": 2, "last_activity_date": 1577776945, "creation_date": 1577776945, "answer_id": 59540915, "question_id": 59538626, "link": "https://stackoverflow.com/questions/59538626/rails-generated-app-without-tests-how-can-i-generate-rspec-test-files-without-r/59540915#59540915", "title": "Rails generated app without tests, how can i generate rspec test files without recreating project?", "body": "<p>First you should add rspec gem to Gemfile and run bundle or <code>gem install rspec</code>  also run <code>rails g rspec:install</code></p>\n\n<p>After that you should configure rspec and you can check more about testing on this tutorials here:\n<a href=\"https://medium.com/@sedwardscode/how-to-properly-test-a-rails-api-with-rspec-f15cbe1dfd11\" rel=\"nofollow noreferrer\">https://medium.com/@sedwardscode/how-to-properly-test-a-rails-api-with-rspec-f15cbe1dfd11</a></p>\n\n<p><a href=\"https://rspec.info/\" rel=\"nofollow noreferrer\">https://rspec.info/</a></p>\n\n<p><a href=\"https://medium.com/@lcriswell/rails-api-request-specs-with-rspec-effeac468c4e\" rel=\"nofollow noreferrer\">https://medium.com/@lcriswell/rails-api-request-specs-with-rspec-effeac468c4e</a></p>\n\n<p><a href=\"https://www.nopio.com/blog/rails-api-tests-rspec/\" rel=\"nofollow noreferrer\">https://www.nopio.com/blog/rails-api-tests-rspec/</a></p>\n"}], "owner": {"reputation": 15, "user_id": 12327335, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8enwyAJyXuU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3relXpztWaxOdLeCjJ5u36ifd2sfBg/photo.jpg?sz=128", "display_name": "Brian Murillo", "link": "https://stackoverflow.com/users/12327335/brian-murillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577776945, "creation_date": 1577756079, "question_id": 59538626, "link": "https://stackoverflow.com/questions/59538626/rails-generated-app-without-tests-how-can-i-generate-rspec-test-files-without-r", "title": "Rails generated app without tests, how can i generate rspec test files without recreating project?", "body": "<p>I used the Rails to generate API-Only app without tests for a project I've been working on for a while. Is there any command to regenerate the test files without recreating the entire project?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 18601, "user_id": 599184, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/tjsXC.jpg?s=128&g=1", "display_name": "Leo Jiang", "link": "https://stackoverflow.com/users/599184/leo-jiang"}, "edited": false, "score": 0, "creation_date": 1577848021, "post_id": 59542451, "comment_id": 105268582, "body": "As far as I can tell, QueryCache isn&#39;t enabled for anything"}, {"owner": {"reputation": 2388, "user_id": 3655580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58695ea14f641ae7e2f15b34434fd6a0?s=128&d=identicon&r=PG&f=1", "display_name": "edariedl", "link": "https://stackoverflow.com/users/3655580/edariedl"}, "reply_to_user": {"reputation": 18601, "user_id": 599184, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/tjsXC.jpg?s=128&g=1", "display_name": "Leo Jiang", "link": "https://stackoverflow.com/users/599184/leo-jiang"}, "edited": false, "score": 0, "creation_date": 1577870715, "post_id": 59542451, "comment_id": 105271257, "body": "Do you have some kind of log or anything you could show us that the queries are not cached?"}], "tags": [], "owner": {"reputation": 2388, "user_id": 3655580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58695ea14f641ae7e2f15b34434fd6a0?s=128&d=identicon&r=PG&f=1", "display_name": "edariedl", "link": "https://stackoverflow.com/users/3655580/edariedl"}, "is_accepted": true, "score": 1, "last_activity_date": 1577786061, "creation_date": 1577786061, "answer_id": 59542451, "question_id": 59538307, "link": "https://stackoverflow.com/questions/59538307/enable-query-caching-in-rails/59542451#59542451", "title": "Enable query caching in Rails?", "body": "<p>The query cache doesn't work like that in the rails. It is applied only inside the request and cache is destroyed at the end of the request, it does not stay alive in between requests.</p>\n\n<p>See the rails guide for the SQL caching <a href=\"https://guides.rubyonrails.org/caching_with_rails.html#sql-caching\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/caching_with_rails.html#sql-caching</a></p>\n\n<blockquote>\n  <p>However, it's important to note that query caches are created at the start of an action and destroyed at the end of that action and thus persist only for the duration of the action. If you'd like to store query results in a more persistent fashion, you can with low level caching.</p>\n</blockquote>\n\n<p>If you want to persist your query cache in between requests, you have to implement it by yourself using low level caching <a href=\"https://guides.rubyonrails.org/caching_with_rails.html#low-level-caching\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/caching_with_rails.html#low-level-caching</a></p>\n"}], "owner": {"reputation": 18601, "user_id": 599184, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/tjsXC.jpg?s=128&g=1", "display_name": "Leo Jiang", "link": "https://stackoverflow.com/users/599184/leo-jiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 59542451, "answer_count": 1, "score": 0, "last_activity_date": 1577786061, "creation_date": 1577752176, "question_id": 59538307, "link": "https://stackoverflow.com/questions/59538307/enable-query-caching-in-rails", "title": "Enable query caching in Rails?", "body": "<p>I noticed that my queries aren't being cached. I ran <code>bundle exec rake middleware | grep Cache</code> and it's empty. I tried adding the following in <code>config/application.rb</code>:</p>\n\n<pre><code>config.middleware.use ActiveRecord::QueryCache\n</code></pre>\n\n<p>However, I'm getting:</p>\n\n<pre><code>rake aborted!\nArgumentError: wrong number of arguments (given 1, expected 0)\n/home/l/.rvm/gems/ruby-2.6.5/gems/actionpack-6.0.2.1/lib/action_dispatch/middleware/stack.rb:37:in `initialize'\n/home/l/.rvm/gems/ruby-2.6.5/gems/actionpack-6.0.2.1/lib/action_dispatch/middleware/stack.rb:37:in `new'\n/home/l/.rvm/gems/ruby-2.6.5/gems/actionpack-6.0.2.1/lib/action_dispatch/middleware/stack.rb:37:in `build'\n/home/l/.rvm/gems/ruby-2.6.5/gems/actionpack-6.0.2.1/lib/action_dispatch/middleware/stack.rb:131:in `block in build'\n/home/l/.rvm/gems/ruby-2.6.5/gems/actionpack-6.0.2.1/lib/action_dispatch/middleware/stack.rb:127:in `each'\n/home/l/.rvm/gems/ruby-2.6.5/gems/actionpack-6.0.2.1/lib/action_dispatch/middleware/stack.rb:127:in `inject'\n/home/l/.rvm/gems/ruby-2.6.5/gems/actionpack-6.0.2.1/lib/action_dispatch/middleware/stack.rb:127:in `build'\n/home/l/.rvm/gems/ruby-2.6.5/gems/railties-6.0.2.1/lib/rails/engine.rb:512:in `block in app'\n/home/l/.rvm/gems/ruby-2.6.5/gems/railties-6.0.2.1/lib/rails/engine.rb:508:in `synchronize'\n/home/l/.rvm/gems/ruby-2.6.5/gems/railties-6.0.2.1/lib/rails/engine.rb:508:in `app'\n/home/l/.rvm/gems/ruby-2.6.5/gems/railties-6.0.2.1/lib/rails/application/finisher.rb:97:in `block in &lt;module:Finisher&gt;'\n/home/l/.rvm/gems/ruby-2.6.5/gems/railties-6.0.2.1/lib/rails/initializable.rb:32:in `instance_exec'\n/home/l/.rvm/gems/ruby-2.6.5/gems/railties-6.0.2.1/lib/rails/initializable.rb:32:in `run'\n/home/l/.rvm/gems/ruby-2.6.5/gems/railties-6.0.2.1/lib/rails/initializable.rb:61:in `block in run_initializers'\n/home/l/.rvm/gems/ruby-2.6.5/gems/railties-6.0.2.1/lib/rails/initializable.rb:60:in `run_initializers'\n/home/l/.rvm/gems/ruby-2.6.5/gems/railties-6.0.2.1/lib/rails/application.rb:363:in `initialize!'\n/mnt/d/Dev/temp/blog/config/environment.rb:5:in `&lt;main&gt;'\n/home/l/.rvm/gems/ruby-2.6.5/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\n/home/l/.rvm/gems/ruby-2.6.5/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `block in require_with_bootsnap_lfi'\n/home/l/.rvm/gems/ruby-2.6.5/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\n/home/l/.rvm/gems/ruby-2.6.5/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require_with_bootsnap_lfi'\n/home/l/.rvm/gems/ruby-2.6.5/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\n/home/l/.rvm/gems/ruby-2.6.5/gems/zeitwerk-2.2.2/lib/zeitwerk/kernel.rb:23:in `require'\n/home/l/.rvm/gems/ruby-2.6.5/gems/activesupport-6.0.2.1/lib/active_support/dependencies.rb:325:in `block in require'\n/home/l/.rvm/gems/ruby-2.6.5/gems/activesupport-6.0.2.1/lib/active_support/dependencies.rb:291:in `load_dependency'\n/home/l/.rvm/gems/ruby-2.6.5/gems/activesupport-6.0.2.1/lib/active_support/dependencies.rb:325:in `require'\n/home/l/.rvm/gems/ruby-2.6.5/gems/railties-6.0.2.1/lib/rails/application.rb:339:in `require_environment!'\n/home/l/.rvm/gems/ruby-2.6.5/gems/railties-6.0.2.1/lib/rails/application.rb:515:in `block in run_tasks_blocks'\n/home/l/.rvm/gems/ruby-2.6.5/gems/rake-13.0.1/exe/rake:27:in `&lt;top (required)&gt;'\n/home/l/.rvm/gems/ruby-2.6.5/bin/ruby_executable_hooks:24:in `eval'\n/home/l/.rvm/gems/ruby-2.6.5/bin/ruby_executable_hooks:24:in `&lt;main&gt;'\nTasks: TOP =&gt; middleware =&gt; environment\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>I thought QueryCache was supposed to be enabled by default? Why isn't it enabled? How can I enable it?</p>\n\n<p>I'm using WSL.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 127, "user_id": 12386214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6f7b25dfd2418e98de8a8bb9d31929?s=128&d=identicon&r=PG&f=1", "display_name": "NL-Kevin", "link": "https://stackoverflow.com/users/12386214/nl-kevin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1577745466, "post_id": 59537388, "comment_id": 105245084, "body": "Sorry Cary, I&#39;m new on StackOverflow and still getting used to the community and what is considered good behaviour."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1577745733, "post_id": 59537388, "comment_id": 105245172, "body": "See the <a href=\"https://stackoverflow.com/help\">faq</a>."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577765293, "post_id": 59537388, "comment_id": 105248597, "body": "When asking a question like this, we want to know what effort you put into answering the question yourself: Did you research it? If so, what did you learn and why didn&#39;t it help? If you got an error, what was it? What did you learn when you looked it up? &quot;<a href=\"https://meta.stackoverflow.com/questions/260648\">Stack Overflow question checklist</a>&quot; will help. Go through that, then edit your question to improve it."}], "answers": [{"comments": [{"owner": {"reputation": 144312, "user_id": 62076, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/62c90b6f399e6b95554b2da31ca8619a?s=128&d=identicon&r=PG", "display_name": "Alex Wayne", "link": "https://stackoverflow.com/users/62076/alex-wayne"}, "edited": false, "score": 1, "creation_date": 1577745104, "post_id": 59537485, "comment_id": 105244999, "body": "This method <code>permit()</code> doesn&#39;t use keyword arguments though... This isn&#39;t what&#39;s actually going on."}], "tags": [], "owner": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "is_accepted": false, "score": 1, "last_activity_date": 1577746749, "last_edit_date": 1577746749, "creation_date": 1577744575, "answer_id": 59537485, "question_id": 59537388, "link": "https://stackoverflow.com/questions/59537388/ruby-syntax-position-of-an-array/59537485#59537485", "title": "Ruby Syntax - Position of an Array", "body": "<p>Keyword arguments (named arguments that end in a colon) must come after all positional arguments, as described in the <a href=\"https://ruby-doc.org/core-2.7.0/doc/syntax/methods_rdoc.html#label-Arguments\" rel=\"nofollow noreferrer\">Arguments</a>  documentation:</p>\n\n<blockquote>\n  <p>When mixing keyword arguments and positional arguments, all positional arguments must appear before any keyword arguments.</p>\n</blockquote>\n\n<p>Your <code>category_ids</code> is a keyword argument and the others are symbols treated as positional arguments, which is why they all have to be first.</p>\n"}, {"comments": [{"owner": {"reputation": 144312, "user_id": 62076, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/62c90b6f399e6b95554b2da31ca8619a?s=128&d=identicon&r=PG", "display_name": "Alex Wayne", "link": "https://stackoverflow.com/users/62076/alex-wayne"}, "reply_to_user": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "edited": false, "score": 0, "creation_date": 1577745732, "post_id": 59537574, "comment_id": 105245170, "body": "Blame the design of this API :) This work well in simple cases, but Rails uses this style in a few ways, and when it gets complicated, you really have to know how ruby parses this shit or you&#39;ll get confused fast."}, {"owner": {"reputation": 127, "user_id": 12386214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6f7b25dfd2418e98de8a8bb9d31929?s=128&d=identicon&r=PG&f=1", "display_name": "NL-Kevin", "link": "https://stackoverflow.com/users/12386214/nl-kevin"}, "edited": false, "score": 0, "creation_date": 1577745786, "post_id": 59537574, "comment_id": 105245192, "body": "Thanks this indeed works and now I understand why the former didn&#39;t. So do I understand correctly that for readability, it&#39;s considered good practice to move the hash syntax(es) to the end of the argument list?"}, {"owner": {"reputation": 144312, "user_id": 62076, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/62c90b6f399e6b95554b2da31ca8619a?s=128&d=identicon&r=PG", "display_name": "Alex Wayne", "link": "https://stackoverflow.com/users/62076/alex-wayne"}, "edited": false, "score": 0, "creation_date": 1577745927, "post_id": 59537574, "comment_id": 105245243, "body": "Yeah, I&#39;d say so. But it really depends. If that argument list is long and you break it up on multiple lines, have one of those lines be a hash and the rest be symbols, it should be plenty readable."}], "tags": [], "owner": {"reputation": 144312, "user_id": 62076, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/62c90b6f399e6b95554b2da31ca8619a?s=128&d=identicon&r=PG", "display_name": "Alex Wayne", "link": "https://stackoverflow.com/users/62076/alex-wayne"}, "is_accepted": true, "score": 3, "last_activity_date": 1577746678, "last_edit_date": 1577746678, "creation_date": 1577745371, "answer_id": 59537574, "question_id": 59537388, "link": "https://stackoverflow.com/questions/59537388/ruby-syntax-position-of-an-array/59537574#59537574", "title": "Ruby Syntax - Position of an Array", "body": "<p>Ruby lets you skip a lot of punctuation that other languages require. In this case, Ruby is making some assumptions about your syntax that may not be obvious.  Here's how it's being parsed:</p>\n\n<pre><code>permit(:name, :description, :location, :user_id, { :category_ids =&gt; [] })\n</code></pre>\n\n<p><code>permit</code> is receiving 5 arguments: 4 symbols, and one hash. In arguments to methods, <a href=\"https://www.alexindev.com/posts/in-ruby-last-positional-parameter-hash-parameter\" rel=\"nofollow noreferrer\">the last parameter can be a hash</a> but without the hash literal notation of <code>{}</code>.</p>\n\n<p>When you move that hash syntax to the middle of the argument list, it's no longer last, and therefore considered a syntax error.</p>\n\n<p>Knowing this, I believe that if you make it an explicit hash, then it should work here:</p>\n\n<pre><code>permit(:name, :description, :location, { category_ids: [] }, :user_id)\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 12386214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6f7b25dfd2418e98de8a8bb9d31929?s=128&d=identicon&r=PG&f=1", "display_name": "NL-Kevin", "link": "https://stackoverflow.com/users/12386214/nl-kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 59537574, "answer_count": 2, "score": 2, "last_activity_date": 1577746749, "creation_date": 1577743817, "question_id": 59537388, "link": "https://stackoverflow.com/questions/59537388/ruby-syntax-position-of-an-array", "title": "Ruby Syntax - Position of an Array", "body": "<p>Could you help me understand why the following code works:</p>\n\n<pre><code>def activity_params\n  params.require(:activity).permit(:name, :description, :location, :user_id, category_ids: [])\nend\n</code></pre>\n\n<p>Yet when I put the array somewhere in the middle instead of last, I get a syntax error:</p>\n\n<pre><code>def activity_params\n  params.require(:activity).permit(:name, :description, :location, category_ids: [], :user_id)\nend\n</code></pre>\n"}, {"tags": ["ruby", "docker", "rubygems", "alpine"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1577738882, "post_id": 59536660, "comment_id": 105242967, "body": "Did you try to run <code>gem install jaro_winkler -v &#39;1.5.2&#39; --source &#39;https:&#47;&#47;cernerrepos.net&#47;api&#47;gems&#47;rubygems&#47;&#39;</code> before running <code>bundle install</code>?"}, {"owner": {"reputation": 3014, "user_id": 4058910, "user_type": "registered", "accept_rate": 23, "profile_image": "https://graph.facebook.com/100003324732050/picture?type=large", "display_name": "Shravan Ramamurthy", "link": "https://stackoverflow.com/users/4058910/shravan-ramamurthy"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1577739263, "post_id": 59536660, "comment_id": 105243091, "body": "I did but got the following error. <code>ERROR:  Error installing jaro_winkler: \tERROR: Failed to build gem native extension.</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3014, "user_id": 4058910, "user_type": "registered", "accept_rate": 23, "profile_image": "https://graph.facebook.com/100003324732050/picture?type=large", "display_name": "Shravan Ramamurthy", "link": "https://stackoverflow.com/users/4058910/shravan-ramamurthy"}, "is_accepted": false, "score": 2, "last_activity_date": 1577739438, "last_edit_date": 1577739438, "creation_date": 1577738975, "answer_id": 59536701, "question_id": 59536660, "link": "https://stackoverflow.com/questions/59536660/gemextbuilderror-error-failed-to-build-gem-native-extension-error-while/59536701#59536701", "title": "`Gem::Ext::BuildError: ERROR: Failed to build gem native extension` error while bundle install in alpine-3.7 docker image", "body": "<p>Adding <code>RUN apk update &amp;&amp; apk add --virtual build-dependencies build-base</code> to the docker file and then running <code>bundle install</code> resolved the issue.</p>\n\n<pre><code># below line is just an example, and it might not work for you, use the correct repo name and image name\nFROM testrepos.net/ruby:2.5-alpine3.7\nRUN apk add --no-cache bash\nRUN /bin/sh\nRUN apk update &amp;&amp; apk add --virtual build-dependencies build-base\nRUN gem install bundler\nRUN bundle install\n</code></pre>\n"}], "owner": {"reputation": 3014, "user_id": 4058910, "user_type": "registered", "accept_rate": 23, "profile_image": "https://graph.facebook.com/100003324732050/picture?type=large", "display_name": "Shravan Ramamurthy", "link": "https://stackoverflow.com/users/4058910/shravan-ramamurthy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2082, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577739438, "creation_date": 1577738686, "last_edit_date": 1577739401, "question_id": 59536660, "link": "https://stackoverflow.com/questions/59536660/gemextbuilderror-error-failed-to-build-gem-native-extension-error-while", "title": "`Gem::Ext::BuildError: ERROR: Failed to build gem native extension` error while bundle install in alpine-3.7 docker image", "body": "<p>I have created a docker image using alpine-3.7 and ruby-2.5 (bundler-2.1.2). While installing the ruby gems, using <code>bundle install</code>, I am getting the below error. </p>\n\n<pre><code>Fetching jaro_winkler 1.5.2\nInstalling jaro_winkler 1.5.2 with native extensions\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\nAn error occurred while installing jaro_winkler (1.5.2), and Bundler cannot continue.\nMake sure that `gem install jaro_winkler -v '1.5.2' --source 'https://testrepos.net/api/gems/rubygems/'` succeeds before bundling\n</code></pre>\n\n<p>I also tried <code>gem install jaro_winkler -v '1.5.2' --source 'https://testrepos.net/api/gems/rubygems/'</code> but got the following error.</p>\n\n<pre><code>Fetching jaro_winkler-1.5.2.gem\nBuilding native extensions. This could take a while...\nERROR:  Error installing jaro_winkler:\nERROR: Failed to build gem native extension.\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 26589, "user_id": 1032785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30816b3d787c2bd9d6f036318304f225?s=128&d=identicon&r=PG", "display_name": "jordanm", "link": "https://stackoverflow.com/users/1032785/jordanm"}, "edited": false, "score": 1, "creation_date": 1577736670, "post_id": 59536317, "comment_id": 105242215, "body": "Can you post the full error output?"}, {"owner": {"reputation": 95, "user_id": 4097036, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-gyhuIwSo5OI/AAAAAAAAAAI/AAAAAAAAADY/L9NV4CS8j6o/photo.jpg?sz=128", "display_name": "Eddie Greathouse", "link": "https://stackoverflow.com/users/4097036/eddie-greathouse"}, "reply_to_user": {"reputation": 26589, "user_id": 1032785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30816b3d787c2bd9d6f036318304f225?s=128&d=identicon&r=PG", "display_name": "jordanm", "link": "https://stackoverflow.com/users/1032785/jordanm"}, "edited": false, "score": 0, "creation_date": 1577736964, "post_id": 59536317, "comment_id": 105242311, "body": "That is the full error output. Are you saying the above method works for you?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1577737064, "post_id": 59536317, "comment_id": 105242352, "body": "<code>FileUtils.rm_rf(directories.concat(files.flat_map {|f| Dir.glob(f)}))</code>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1577738414, "post_id": 59536317, "comment_id": 105242813, "body": "Your actual error is <code>files[f]</code> and <code>directories[d]</code> because <code>files</code> and <code>directories</code> are <code>Array</code> objects and thus they expect an index to be passed to the <code>[]</code> method but you are passing <code>String</code> objects. <a href=\"https://ruby-doc.org/core-2.4.1/Array.html#method-i-5B-5D\" rel=\"nofollow noreferrer\"><code>Array#[]</code></a>"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577741983, "post_id": 59536437, "comment_id": 105244004, "body": "<code>File.delete(*Dir.glob(p))</code> also works, but your choice of using <code>glob</code> with a block has the advantage that no temporary array (<code>Dir.glob(p)</code>) is constructed."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577750647, "post_id": 59536437, "comment_id": 105246288, "body": "@CarySwoveland well close except <code>Dir#glob</code> isn&#39;t being called with a block so the <code>Array</code> is still created and then iterated with <code>each</code>. Also @spickerman you have <code>each do {}</code> which seems like a syntax error if I&#39;m not mistaken"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1577759331, "post_id": 59536437, "comment_id": 105247771, "body": "@engineersmnky, I only see what I want to see. \ud83d\ude33 spikermann,  you don&#39;t want <code>do</code> to precede <code>{</code>, but you can also drop <code>.each</code>."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577779014, "post_id": 59536437, "comment_id": 105251600, "body": "@CarySwoveland and @engineersmnky for pointing out the syntax error. I fixed my answer. But I will keep the <code>Dir.glob(p).each { |f| File.delete(f) }</code> instead of using <code>File.delete(*Dir.glob(p))</code> because I think that is closer to what the OP already had and therefore makes it more obvious why the OP&#39;s version does not work."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1577786451, "post_id": 59536437, "comment_id": 105254028, "body": "I meant you could simplify to <code>Dir.glob(p) { |f| File.delete(f) }</code>."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 4, "last_activity_date": 1577786785, "last_edit_date": 1577786785, "creation_date": 1577737364, "answer_id": 59536437, "question_id": 59536317, "link": "https://stackoverflow.com/questions/59536317/how-to-delete-multiple-named-files-in-ruby/59536437#59536437", "title": "How to delete multiple named files in Ruby", "body": "<p><code>files.each do |f|</code> already yields the element. Therefore calling <code>files[f]</code> does not make sense. But at the same time <code>File.delete</code> cannot handle patterns, it expects a specific file names. Find all files matching a pattern with <code>Dir.glob</code>:</p>\n\n<pre><code>def cleanup_all_files\n  file_patterns = ['*.bat', '*.sh', 'lib/*.jar']\n  directory_patterns = %w[ data archive report log ]\n\n  file_patterns.each do |p|\n    Dir.glob(p) { |f| File.delete(f) }\n  end\n\n  directory_patterns do |p|\n    Dir.glob(p) { |d| FileUtils.rm_rf(d) }\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 4097036, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-gyhuIwSo5OI/AAAAAAAAAAI/AAAAAAAAADY/L9NV4CS8j6o/photo.jpg?sz=128", "display_name": "Eddie Greathouse", "link": "https://stackoverflow.com/users/4097036/eddie-greathouse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577786785, "creation_date": 1577736535, "last_edit_date": 1577738499, "question_id": 59536317, "link": "https://stackoverflow.com/questions/59536317/how-to-delete-multiple-named-files-in-ruby", "title": "How to delete multiple named files in Ruby", "body": "<p>I am attempting to write a method in Ruby that deletes several named files and directories. Here is my method:</p>\n\n<pre><code>def cleanup_all_files\n   files = ['*.bat', '*.sh', 'lib/*.jar']\n   directories = %w[ data archive report log ]\n   files.each do |f|\n      File.delete(files[f])\n   end\n   directories.each do |d|\n      FileUtils.rm_rf(directories[d])\n   end\nend\n</code></pre>\n\n<p>This results in the following error:</p>\n\n<blockquote>\n  <p>TypeError: no implicit conversion of String into Integer</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "collections", "associations"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1577738088, "post_id": 59536281, "comment_id": 105242717, "body": "What do you want to achieve calling <code>if @question.answers.user == current_user</code>? According to the method name, I guess you only want to load questions which the <code>current_user</code> has answered \u2013 is that correct? How do you use that method later on?"}, {"owner": {"reputation": 69, "user_id": 12627462, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3vZnTXxfWBk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re0zrFf7YGI_4brTDMoFDV6Yp03QQ/photo.jpg?sz=128", "display_name": "Oats", "link": "https://stackoverflow.com/users/12627462/oats"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1577738352, "post_id": 59536281, "comment_id": 105242794, "body": "Basically I want to say:  If the answer posted on a question is from current_user, then render a partial."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1577738615, "post_id": 59536281, "comment_id": 105242878, "body": "If <i>the</i> answer? <code>answers</code> is an array. Do you mean if any of the answers is from the <code>current_user</code>? Or all answers? What should happen if one answer is from the <code>current_user</code> but another answer is not?"}, {"owner": {"reputation": 69, "user_id": 12627462, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3vZnTXxfWBk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re0zrFf7YGI_4brTDMoFDV6Yp03QQ/photo.jpg?sz=128", "display_name": "Oats", "link": "https://stackoverflow.com/users/12627462/oats"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1577738817, "post_id": 59536281, "comment_id": 105242954, "body": "Sorry, if <i>any</i> of the answers are from the <code>current_user</code>, show an extra link that allows them to edit or delete their answer. If an answer is not from the <code>current_user</code>, do not show a link next to the answer"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1577738998, "post_id": 59536281, "comment_id": 105243001, "body": "Did you consider just having a simple <code>if answer.user == current_user</code> block in your view?"}, {"owner": {"reputation": 69, "user_id": 12627462, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3vZnTXxfWBk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re0zrFf7YGI_4brTDMoFDV6Yp03QQ/photo.jpg?sz=128", "display_name": "Oats", "link": "https://stackoverflow.com/users/12627462/oats"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1577739201, "post_id": 59536281, "comment_id": 105243070, "body": "Yes I tried that already, but for some reason <code>answer.user</code> is empty. When I check  <code>answer.user.nil?</code> it returns true"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1577739270, "post_id": 59536281, "comment_id": 105243094, "body": "Did you check in your database if there are actually users associated with those answers?"}, {"owner": {"reputation": 69, "user_id": 12627462, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3vZnTXxfWBk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re0zrFf7YGI_4brTDMoFDV6Yp03QQ/photo.jpg?sz=128", "display_name": "Oats", "link": "https://stackoverflow.com/users/12627462/oats"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1577739366, "post_id": 59536281, "comment_id": 105243126, "body": "Yes, there is a user associated, and I validate the user in the model as well. I can access <code>user.answers</code> in my User view if I use a loop. Similarly, I can access <code>answer.user</code> in the Answer view or if I use a loop in other views. But a loop isn&#39;t suited to this problem -- or at least I dont know how to effectively use it in this situation"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1577740036, "post_id": 59536281, "comment_id": 105243368, "body": "Can you please post your view?"}, {"owner": {"reputation": 69, "user_id": 12627462, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3vZnTXxfWBk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re0zrFf7YGI_4brTDMoFDV6Yp03QQ/photo.jpg?sz=128", "display_name": "Oats", "link": "https://stackoverflow.com/users/12627462/oats"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1577740355, "post_id": 59536281, "comment_id": 105243464, "body": "I have updated the main post with the Answer controller and the two relevant views"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 12627462, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3vZnTXxfWBk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re0zrFf7YGI_4brTDMoFDV6Yp03QQ/photo.jpg?sz=128", "display_name": "Oats", "link": "https://stackoverflow.com/users/12627462/oats"}, "edited": false, "score": 0, "creation_date": 1577741010, "post_id": 59536968, "comment_id": 105243679, "body": "That solved it! I had been going crazy all day checking my routes, associations, models, controllers and views trying to figure out where the issue was.  Always frustrating when the solution is so simple and elegant and was staring me right in my face"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1577740797, "creation_date": 1577740797, "answer_id": 59536968, "question_id": 59536281, "link": "https://stackoverflow.com/questions/59536281/how-to-fix-undefined-method-user-activerecord-associations-collectionproxy/59536968#59536968", "title": "How to fix &quot;undefined method `user&#39; (ActiveRecord_Associations_CollectionProxy)", "body": "<p>Instead of <code>&lt;%= render own_answers_partial_path %&gt;</code> in the answer view (that doesn't work because you do not pass local variables to the view) and the additional helper I would just add a simple conditional like this to the answer view</p>\n\n<pre><code>&lt;% if answer.user == current_user %&gt;\n  &lt;%= link_to 'edit', edit_answer_path(answer) %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 12627462, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3vZnTXxfWBk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re0zrFf7YGI_4brTDMoFDV6Yp03QQ/photo.jpg?sz=128", "display_name": "Oats", "link": "https://stackoverflow.com/users/12627462/oats"}, "edited": false, "score": 0, "creation_date": 1577782270, "post_id": 59540798, "comment_id": 105252630, "body": "Im not sure what you mean here. Do you mean I should put a conditional statement in the edit action in the controller?"}, {"owner": {"reputation": 69, "user_id": 12627462, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3vZnTXxfWBk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re0zrFf7YGI_4brTDMoFDV6Yp03QQ/photo.jpg?sz=128", "display_name": "Oats", "link": "https://stackoverflow.com/users/12627462/oats"}, "edited": false, "score": 0, "creation_date": 1577795977, "post_id": 59540798, "comment_id": 105257369, "body": "Ahh I see what you mean, thats a good tip. Thanks! I&#39;ll implement this approach in other areas of my code as well"}], "tags": [], "owner": {"reputation": 127, "user_id": 12386214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6f7b25dfd2418e98de8a8bb9d31929?s=128&d=identicon&r=PG&f=1", "display_name": "NL-Kevin", "link": "https://stackoverflow.com/users/12386214/nl-kevin"}, "is_accepted": false, "score": 0, "last_activity_date": 1577790224, "last_edit_date": 1577790224, "creation_date": 1577776113, "answer_id": 59540798, "question_id": 59536281, "link": "https://stackoverflow.com/questions/59536281/how-to-fix-undefined-method-user-activerecord-associations-collectionproxy/59540798#59540798", "title": "How to fix &quot;undefined method `user&#39; (ActiveRecord_Associations_CollectionProxy)", "body": "<p>I'm by no means an expert, but I think you would want to prevent users from editing other user's answers through your controller as well. In the current solution, a malicious user might browse to <code>/answers/ID</code>  and bypass your hidden edit link.</p>\n\n<p>// Edit:\nFor example, in your <code>AnswersController</code> include on top:</p>\n\n<pre><code>before_action :answer_owner, only: [:edit, :update, :destroy]\n</code></pre>\n\n<p>Then include at the bottom of your controller, as a private function:</p>\n\n<pre><code>    def answer_owner\n     unless @answer.user_id == current_user.id\n      flash[:notice] = 'Access denied since you are not the owner of this Answer'\n      redirect_to answers_path\n     end\n    end\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 12627462, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3vZnTXxfWBk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re0zrFf7YGI_4brTDMoFDV6Yp03QQ/photo.jpg?sz=128", "display_name": "Oats", "link": "https://stackoverflow.com/users/12627462/oats"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 59536968, "answer_count": 2, "score": 0, "last_activity_date": 1577790224, "creation_date": 1577736270, "last_edit_date": 1577771278, "question_id": 59536281, "link": "https://stackoverflow.com/questions/59536281/how-to-fix-undefined-method-user-activerecord-associations-collectionproxy", "title": "How to fix &quot;undefined method `user&#39; (ActiveRecord_Associations_CollectionProxy)", "body": "<p>I have a user, question and answer model, that I'm aiming to have work like Stack Overflow. I am having issues allowing users to edit or delete only their answers on questions. \nI am using a Helper, which shows a link to edit next to the question:</p>\n\n<pre><code>module AnswersHelper\n  def own_answers_partial_path\n    @question = Question.find(params[:id])\n    if @question.answers.user == current_user\n      'answers/own_answer'\n    else\n      'answers/other_answer'\n    end\n  end\nend\n</code></pre>\n\n<p>However this  results in a undefined method error:</p>\n\n<pre><code>'user' for #&lt;Answer::ActiveRecord_Associations_CollectionProxy:0x00000000133d54d8&gt;\n</code></pre>\n\n<p>I understand that <code>@question.answers.user</code> is an array, so <code>@question.answers.user == current_user</code> will not work.</p>\n\n<p>I tried using:</p>\n\n<pre><code>.collect{ |answer| answer.user }\n.map{ |answer| answer.user }\n.each{ |answer| answer.user }\n</code></pre>\n\n<p>on the array. However they did not work and I don't see how I can use a loop in this case (which I use in the views to get the information).</p>\n\n<p>Is there a way to fix it using this method? Or, do I need to take another approach to allowing users to edit their own answers?</p>\n\n<p><strong>Answer Controller</strong></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class AnswersController &lt; ApplicationController\n  before_action :set_answer, only: [:show, :edit, :update, :destroy]\n\n  def index\n    @question = Question.find(params[:id])\n    @answers = @question.answers.all\n  end\n\n  def show\n  end\n\n  def new\n    @question = Question.find(params[:id])\n    @answer = @question.answer.new\n  end\n\n  def edit\n  end\n\n  def create\n    @question = Question.find(params[:id])\n    @answer = @question.answers.build(answer_params)\n\n    respond_to do |format|\n      if @answer.save\n        format.html { redirect_to @answer.question, notice: 'Answer was successfully created.' }\n        format.json { render :show, status: :created, location: @answer.question }\n      else\n        format.html { render :new }\n        format.json { render json: @answer.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def update\n    respond_to do |format|\n      if @answer.update(answer_params)\n        format.html { redirect_to @answer.question, notice: 'Answer was successfully updated.' }\n        format.json { render :show, status: :ok, location: @answer.question }\n      else\n        format.html { render :edit }\n        format.json { render json: @answer.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def destroy\n    @answer = current_user.answers.find(params[:id])\n    @answer.destroy\n    respond_to do |format|\n      format.html { redirect_to answers_url, notice: 'Answer was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_answer\n      @answer = Answer.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def answer_params\n      params.require(:answer).permit(:body).merge(user: current_user, question: @question)\n    end\n\nend\n</code></pre>\n\n<p><strong>Main question and answer view</strong></p>\n\n<pre><code>&lt;%= @question.title %&gt;\nAsked by &lt;%= link_to @question.user.email, @question.user %&gt;&lt;/br&gt;\n&lt;%= @question.body %&gt;\n&lt;/br&gt;\n&lt;%= @question.answers.count %&gt; Answers\n&lt;%= render @question.answers.order(created_at: :desc) %&gt; \n\n</code></pre>\n\n<p><strong>Which links to the answer view</strong></p>\n\n<pre><code>&lt;%= answer.body %&gt;&lt;/br&gt;\n&lt;%= link_to answer.user.first_name, answer.user %&gt; answered &lt;%= time_ago_in_words(answer.created_at) %&gt; ago.\n&lt;/br&gt;\n&lt;%= render own_answers_partial_path %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "podio"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1577735551, "post_id": 59536007, "comment_id": 105241831, "body": "Is it possible that the Podio API has some kind of connection limit and throttle requests when you are over the limit?"}], "answers": [{"tags": [], "owner": {"reputation": 2000, "user_id": 6495121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0yw4K.jpg?s=128&g=1", "display_name": "Pavlo - Podio", "link": "https://stackoverflow.com/users/6495121/pavlo-podio"}, "is_accepted": true, "score": 1, "last_activity_date": 1577740980, "creation_date": 1577740980, "answer_id": 59537000, "question_id": 59536007, "link": "https://stackoverflow.com/questions/59536007/api-times-out-due-to-limit-and-offset/59537000#59537000", "title": "API times out due to limit and offset", "body": "<p>Looks like Podio API is timing out while getting 500 items, probably your items are big or has some relationship to other apps and it simply takes too much time to fetch it all. </p>\n\n<p>I'd try some smaller number (e.g. 100 or 200) to see if that will work :)</p>\n"}], "owner": {"reputation": 1472, "user_id": 3007613, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/ItK90.png?s=128&g=1", "display_name": "prithajnath", "link": "https://stackoverflow.com/users/3007613/prithajnath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 59537000, "answer_count": 1, "score": 1, "last_activity_date": 1577740980, "creation_date": 1577734556, "question_id": 59536007, "link": "https://stackoverflow.com/questions/59536007/api-times-out-due-to-limit-and-offset", "title": "API times out due to limit and offset", "body": "<p>I'm trying to pull items from one of our client's Podio instance. It has around 35k records, so I'm setting a limit and offset of 500</p>\n\n<pre><code>loop do\n  current_offset_value = offset.next\n  puts \"LIMIT: #{LIMIT}, OFFSET: #{current_offset_value}\"\n  Podio::Item.find_by_filter_id(app_id, view_id, limit: LIMIT, remember: true, offset: offset.next).all.each do |item|\n      yield item\n  end\nend\n</code></pre>\n\n<p>However, the code just hangs after the first two calls and returns a timeout error</p>\n\n<pre><code>LIMIT: 500, OFFSET: 0\nLIMIT: 500, OFFSET: 500\ncreates a CSV file from a table (FAILED - 1)\n\nFailures:\n\nSourceTableSync::LocalCsvDumper::CitrixPodio creates a CSV file from a table\n Failure/Error:\n   Podio::Item.find_by_filter_id(app_id, view_id, limit: LIMIT, remember: true, offset: current_offset_value).all.each do |item|\n     yield item\n   end\n\n Faraday::TimeoutError:\n   Net::ReadTimeout with #&lt;TCPSocket:(closed)&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1577734362, "post_id": 59535569, "comment_id": 105241455, "body": "The change makes more sense if you consider DBs without a separate time with zone column type. There is makes sense for rails to provide a sensible default and assume that the timestamps are in the same zone as what is configured by Rails."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1577734663, "post_id": 59535569, "comment_id": 105241550, "body": "I am not sure I understand the issue <a href=\"https://github.com/rails/rails/blob/5-2-stable/activesupport/lib/active_support/time_with_zone.rb#L167\" rel=\"nofollow noreferrer\">TimeWithZone#as_json 5.2</a> is identical to  <a href=\"https://github.com/rails/rails/blob/4-2-stable/activesupport/lib/active_support/core_ext/object/json.rb#L164\" rel=\"nofollow noreferrer\">Time#as_json 4.2</a> It is nearly copy and paste code, so there should be no difference. If you always want utc then set the time_zone to UTC (e.g. <code>Time.zone = &#39;UTC&#39;</code>)"}, {"owner": {"reputation": 2388, "user_id": 3655580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58695ea14f641ae7e2f15b34434fd6a0?s=128&d=identicon&r=PG&f=1", "display_name": "edariedl", "link": "https://stackoverflow.com/users/3655580/edariedl"}, "edited": false, "score": 0, "creation_date": 1577787187, "post_id": 59535569, "comment_id": 105254277, "body": "Rails always save the time in UTC to the database no matter what time zone you have set in the application. Then every time you read time from the database it gets translated to the currently set time zone in you rails app."}, {"owner": {"reputation": 1270, "user_id": 495776, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a8a6dd2fd14bc43242f86a105170c8f7?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/495776/jens"}, "edited": false, "score": 0, "creation_date": 1577828900, "post_id": 59535569, "comment_id": 105266340, "body": "edariedl, this did not happen in Rails 4.2 with &quot;Time&quot; columns. They were timezone-less. Now, in Rails 5, it suddenly happens. I did not find any deprecation warnings or upgrade notices about this. This is what bugs me. Good thing we have good test coverage."}], "answers": [{"comments": [{"owner": {"reputation": 1270, "user_id": 495776, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a8a6dd2fd14bc43242f86a105170c8f7?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/495776/jens"}, "edited": false, "score": 0, "creation_date": 1589788001, "post_id": 59549121, "comment_id": 109421137, "body": "Thank you for the lengthy and easy to understand explanation! This means quite a bit of work for me now, because we have a lot of manually created SQL queries (due to performance mainly) which now needs to be fed UTC timestamps. Also, DST changes need to be respected. Whew ... but I guess the change means better consistency throughout the whole framework. Thanks!"}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 1, "last_activity_date": 1577834997, "last_edit_date": 1592644375, "creation_date": 1577834997, "answer_id": 59549121, "question_id": 59535569, "link": "https://stackoverflow.com/questions/59535569/rails-upgrade-makes-default-time-format-change-how-to-revert/59549121#59549121", "title": "Rails Upgrade makes default Time format change. How to revert?", "body": "<blockquote>\n<p>Currently I am struggling with the way &quot;Time&quot; objects are handled in Rails 5.2. A &quot;time&quot; column in an AR object is now returned as an ActiveSupport::TimeWithZone, even if the database column has no time zone. Previously it was a plain Time object which had a different default JSON representation.</p>\n<p>I'd nevertheless like to understnand why this change has been made and why even 'time without time zone' DB columns are being treated by Rails as if they had a timezone.</p>\n</blockquote>\n<p>This change was made because Ruby's default <code>Time</code> has no understanding of time zones. <code>ActiveSupport::TimeWithZone</code> can. This solves a lot of problems when working with times, time zones, and databases.</p>\n<p>For example, let's say your application's time zone is <code>America/Chicago</code>. Previously you had to decide whether you're going to store your times with or without time zones. If you opt for without a time zone, do you store it as UTC or as America/Chicago? If you store it as UTC, do you convert it to America/New York on load or on display? Conversion means adding and subtracting hours from the <code>Time</code>. When you save <code>Time</code> objects you have to be careful to remember what time zone the <code>Time</code> was converted to and to convert it back to the database's time zone. Coordinating all this leads to many bugs.</p>\n<p>Rails 5 introduces <code>ActiveSupport::TimeWithZone</code>. This stores the time as UTC and the desired time zone to represent it in. Now handling time is simpler: store it as UTC (ie. <code>timestamp</code>) and add the application's time zone on load. No conversion is necessary. Rails handles this for you.</p>\n<p>The change is now <code>timestamp</code> columns, by default, will be formatted in the application's time zone. This takes some getting used to, but ultimately will make your handling of times and time zones more robust.</p>\n<pre><code>&gt; Time.zone.tzinfo.name\n=&gt; &quot;America/Chicago&quot;\n\n&gt; Time.zone.utc_offset\n=&gt; -21600\n\n# Displayed in the application time zone\n&gt; Foo.last.created_at\n=&gt; Tue, 31 Dec 2019 17:16:14 CST -06:00\n\n# Stored as UTC\n&gt; Foo.last.created_at.utc\n=&gt; 2019-12-31 23:16:14 UTC\n</code></pre>\n<p>If you have code which manually does time zone conversions, get rid of it. Work in UTC. Time zones are now just formatting.</p>\n<p>As much as possible...</p>\n<ul>\n<li>Work with objects, not strings.</li>\n<li>Work in UTC, time zones are for formatting.</li>\n<li>If you need to turn a time into a string, make the formatting explicit.</li>\n</ul>\n<pre><code>    def get_api_time\n      '2000-01-01 07:00:00 UTC'\n    end\n\n    # bad: downgrading to strings, implicit formatting\n    expected_time = Time.utc(2000, 1, 1, 7)\n    expect( get_api_time ).to eq expected_time\n\n    # good: upgrading to objects, format is irrelevant\n    expected_time = Time.zone.parse('2000-01-01 07:00:00 UTC')\n    expect(\n      Time.zone.parse(get_api_time)\n    ).to eq expected_time\n\n    # better: refactor method to return ActiveSupport::TimeWithZone\n    def get_api_time\n      Time.zone.parse('2000-01-01 07:00:00 UTC')\n    end\n\n    expected_time = Time.zone.parse('2000-01-01 07:00:00 UTC')\n    expect( get_api_time ).to eq expected_time\n</code></pre>\n<p>I recommend reading these articles, they clear things up.</p>\n<ul>\n<li><a href=\"https://thoughtbot.com/blog/its-about-time-zones\" rel=\"nofollow noreferrer\">It's About Time (Zones)</a></li>\n<li><a href=\"http://danilenko.org/2012/7/6/rails_timezones/\" rel=\"nofollow noreferrer\">The Exhaustive Guide to Rails Time Zones</a></li>\n</ul>\n"}], "owner": {"reputation": 1270, "user_id": 495776, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a8a6dd2fd14bc43242f86a105170c8f7?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/495776/jens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 59549121, "answer_count": 1, "score": 2, "last_activity_date": 1577834997, "creation_date": 1577731947, "last_edit_date": 1577828819, "question_id": 59535569, "link": "https://stackoverflow.com/questions/59535569/rails-upgrade-makes-default-time-format-change-how-to-revert", "title": "Rails Upgrade makes default Time format change. How to revert?", "body": "<p>I am upgrading a Rails app from </p>\n\n<ul>\n<li>Rails 4.2 -> 5.2 (a subsequent upgrade to Rails 6 is pending)</li>\n<li>Ruby 2.2 -> 2.5</li>\n<li>Postgres 9.1 -> 10</li>\n</ul>\n\n<p>in various steps. Since the Rails upgrade requires the Postgres upgrade I can't separate the upgrades in a sensible way. </p>\n\n<p>Currently I am struggling with the way \"Time\" objects are handled in Rails 5.2. A \"time\" column in an AR object is now returned as an <code>ActiveSupport::TimeWithZone</code>, even if the database column has no time zone. Previously it was a plain <code>Time</code> object which had a different default JSON representation. </p>\n\n<p>This makes a lot of API tests fail which were previously all returning UTC times.</p>\n\n<p>Example for Rails 4.2, Ruby 2.2, PG 9.1 for a <code>PhoneNumber</code> object:</p>\n\n<pre><code>2.2.6 :002 &gt; p.time_weekdays_from\n  =&gt; 2000-01-01 07:00:00 UTC \n2.2.6 :003 &gt; p.time_weekdays_from.class\n  =&gt; Time \n</code></pre>\n\n<p>Example for Rails 5.2, Ruby 2.5, PG 10:</p>\n\n<pre><code>irb(main):016:0&gt; p.time_weekdays_from\n  =&gt; Sat, 01 Jan 2000 11:15:00 CET +01:00\nirb(main):018:0&gt; p.time_weekdays_from.class\n  =&gt; ActiveSupport::TimeWithZone\n</code></pre>\n\n<p>I have added an initializer to override this for the time being and this seems to work fine, but I'd nevertheless like to understnand <strong>why</strong> this change has been made and why even 'time without time zone' DB columns are being treated by Rails as if they had a timezone.</p>\n\n<pre><code># This works, but why is it necessary?\nmodule ActiveSupport\n  class TimeWithZone\n    def as_json(options = nil)\n      self.utc.iso8601\n    end\n  end\nend\n</code></pre>\n\n<p>PS: I don't always want UTC, I just want it for the API because that's what our API clients expect. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1040, "user_id": 1462708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa2e0bb2baca0f20237b85bf00d1968b?s=128&d=identicon&r=PG", "display_name": "Stephen Crosby", "link": "https://stackoverflow.com/users/1462708/stephen-crosby"}, "edited": false, "score": 0, "creation_date": 1577731321, "post_id": 59535309, "comment_id": 105240400, "body": "I don&#39;t have an answer for you but I did notice that you have a category_id field on your activities table which isn&#39;t what you want if the relationship is many-to-many. You should probably remove that column."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1577733605, "post_id": 59535309, "comment_id": 105241204, "body": "Welcome to SO! Please don&#39;t beg for help; We&#39;re here to help so begging merely muddies the question. Also, don&#39;t use salutations, valedictions or signatures like &quot;Hi&quot; or &quot;Thanks a lot&quot; or &quot;Kevin&quot;. SO provides that information automatically. Think of SO as an online encyclopedia or reference book; <a href=\"https://stackoverflow.com/help/behavior\">stackoverflow.com/help/behavior</a> explains."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577733896, "post_id": 59535309, "comment_id": 105241299, "body": "Please don&#39;t link to essential information, instead summarize the important part in the question itself. Links rot then break and when they do the information is lost making the question less useful for others."}], "answers": [{"tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": false, "score": 1, "last_activity_date": 1577731116, "creation_date": 1577731116, "answer_id": 59535403, "question_id": 59535309, "link": "https://stackoverflow.com/questions/59535309/model-failing-to-save/59535403#59535403", "title": "Model failing to save", "body": "<p>You want category \"ids\" not \"id\" since you have multiple ids to set.</p>\n\n<p>Change to <code>f.collection_select :category_ids, .....</code>, make sure you are permitting an array for that attribute on your controller too.</p>\n"}, {"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1577731793, "post_id": 59535497, "comment_id": 105240562, "body": "Also on a side note - do not pass the current user through the params if thats what <code>user_id</code> is. It makes it really trivial for a malicious user to just pass another users id with cURL or just the web inspector. Instead get the current user from the session in the controller."}, {"owner": {"reputation": 127, "user_id": 12386214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6f7b25dfd2418e98de8a8bb9d31929?s=128&d=identicon&r=PG&f=1", "display_name": "NL-Kevin", "link": "https://stackoverflow.com/users/12386214/nl-kevin"}, "edited": false, "score": 0, "creation_date": 1577735870, "post_id": 59535497, "comment_id": 105241946, "body": "Thanks a lot, this brought me one step further.  I whitelisted <code>category_ids</code> in the Activity controller as you suggested, but when I declare it as an array <code>category_ids[]</code>, upon saving rails throws the error <code>wrong number of arguments (given 0, expected 1..2)</code>  Params are then as follows, which then seem to be missing <code>category_ids</code> from my form: <code>{&quot;authenticity_token&quot;=&gt;&quot;GipycRGVCkgVnAA0gt&#47;To8hnnearoPJyywXr&zwnj;&#8203;O+lfUq7d0tHMUqbBqZ0c&zwnj;&#8203;NjYB3LBGbhIpA1QRu2ql&zwnj;&#8203;8Ui4msnLkg==&quot;,  &quot;activity&quot;=&gt;{&quot;name&quot;=&gt;&quot;&quot;, &quot;description&quot;=&gt;&quot;&quot;, &quot;location&quot;=&gt;&quot;&quot;, &quot;user_id&quot;=&gt;&quot;3&quot;},  &quot;commit&quot;=&gt;&quot;Save Activity&quot;}</code>"}, {"owner": {"reputation": 127, "user_id": 12386214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6f7b25dfd2418e98de8a8bb9d31929?s=128&d=identicon&r=PG&f=1", "display_name": "NL-Kevin", "link": "https://stackoverflow.com/users/12386214/nl-kevin"}, "edited": false, "score": 0, "creation_date": 1577736284, "post_id": 59535497, "comment_id": 105242088, "body": "Fair remark on passing the <code>user_id</code>. It indeed wasn&#39;t my intention to keep this in the final Rails application,  but I yet have to build a mechanism to retrieve the <code>user_id</code> from the current user logged_in (via the Devise gem)."}, {"owner": {"reputation": 127, "user_id": 12386214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6f7b25dfd2418e98de8a8bb9d31929?s=128&d=identicon&r=PG&f=1", "display_name": "NL-Kevin", "link": "https://stackoverflow.com/users/12386214/nl-kevin"}, "edited": false, "score": 0, "creation_date": 1577736546, "post_id": 59535497, "comment_id": 105242173, "body": "I have fixed a typo in my form. Now the <code>activity_ids</code> is passed, but rails still throws a <code>wrong number of arguments (given 0, expected 1..2)</code> error.   Params are: <code>{&quot;authenticity_token&quot;=&gt;&quot;UkB5+IppDWVBnZ+A6fHvdw4&#47;lSbc5LGuckw8&zwnj;&#8203;69lbbHtWlbqtpBppRvSV&zwnj;&#8203;X6vVKmnr4UHnfnbQqHFt&zwnj;&#8203;9syUagLuVA==&quot;,  &quot;activity&quot;=&gt;{&quot;name&quot;=&gt;&quot;&quot;, &quot;description&quot;=&gt;&quot;&quot;, &quot;location&quot;=&gt;&quot;&quot;, &quot;category_ids&quot;=&gt;[&quot;3&quot;, &quot;4&quot;], &quot;user_id&quot;=&gt;&quot;3&quot;},  &quot;commit&quot;=&gt;&quot;Save Activity&quot;}</code>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 127, "user_id": 12386214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6f7b25dfd2418e98de8a8bb9d31929?s=128&d=identicon&r=PG&f=1", "display_name": "NL-Kevin", "link": "https://stackoverflow.com/users/12386214/nl-kevin"}, "edited": false, "score": 0, "creation_date": 1577736770, "post_id": 59535497, "comment_id": 105242251, "body": "<code>wrong number of arguments</code> is a really generic error and tells me absolutely nothing without a stack trace. It does not even have to be related to the issue you&#39;re originally asking about. I&#39;m going to leave it up to figure this out."}, {"owner": {"reputation": 127, "user_id": 12386214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6f7b25dfd2418e98de8a8bb9d31929?s=128&d=identicon&r=PG&f=1", "display_name": "NL-Kevin", "link": "https://stackoverflow.com/users/12386214/nl-kevin"}, "edited": false, "score": 0, "creation_date": 1577743535, "post_id": 59535497, "comment_id": 105244537, "body": "I accidentally included <code>:category_ids []</code> instead of <code>category_ids: []</code> inside the controller, which caused the error. All is fine now. Thanks a lot again."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1577734243, "last_edit_date": 1577734243, "creation_date": 1577731593, "answer_id": 59535497, "question_id": 59535309, "link": "https://stackoverflow.com/questions/59535309/model-failing-to-save/59535497#59535497", "title": "Model failing to save", "body": "<p>First off, you seem to have created a <code>activities.category_id</code> column with a not-null constraint which is not needed here. You might want to re-read \"<a href=\"https://guides.rubyonrails.org/association_basics.html#the-has-and-belongs-to-many-association\" rel=\"nofollow noreferrer\">The <code>has_and_belongs_to_many</code> Association</a>\" documentation.</p>\n\n<p>To get rid of the column you can either roll back and alter the migration that created the table in the first place or create a migration to remove the column:</p>\n\n<pre><code>class RemoveCategoryIdFromActivities &lt; ActiveRecord::Migration[6.0]\n  def change\n    remove_reference :activities, :category, index: true, foreign_key: true\n  end\nend\n</code></pre>\n\n<p>Also remove the <code>belongs_to :category</code> association in your <code>Activity</code> model which causes the \"category cannot be blank\" validation error.</p>\n\n<p>Then you should be using <code>category_ids</code> and not the singular <code>_id</code>. </p>\n\n<pre><code>&lt;%= f.collection_select :category_ids, Category.all, :id, :name, {include_hidden: false}, {multiple: 'true', class: 'form-control' } %&gt;\n\n</code></pre>\n\n<p>And make sure you correctly whitelist it:</p>\n\n<pre><code>params.require(:activity)\n      .permit(:name, :description, :current_location, category_ids: [])\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 12386214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6f7b25dfd2418e98de8a8bb9d31929?s=128&d=identicon&r=PG&f=1", "display_name": "NL-Kevin", "link": "https://stackoverflow.com/users/12386214/nl-kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 59535497, "answer_count": 2, "score": 0, "last_activity_date": 1577734243, "creation_date": 1577730575, "last_edit_date": 1577734092, "question_id": 59535309, "link": "https://stackoverflow.com/questions/59535309/model-failing-to-save", "title": "Model failing to save", "body": "<p>I searched for a solution for the problem, but I cannot find the root cause of the issue. </p>\n\n<p>I have a couple of models in my Rails application, two of which, <code>Category</code> and <code>Activity</code>, have a many-to-many relationship. In both the <code>Category</code> and <code>Activity</code> models, I defined this relationship using <code>has_and_belongs_to_many</code>. I created a joining table between the two. Please find my DB scheme here: <a href=\"https://pastebin.com/wc4TsPQQ\" rel=\"nofollow noreferrer\">https://pastebin.com/wc4TsPQQ</a>.</p>\n\n<p>The form to create a new Activity contains a field to select one or more categories to match:</p>\n\n<pre><code>&lt;%= f.collection_select :category_id, Category.all, :id, :name, {include_hidden: false}, {:multiple=&gt;'true', :class=&gt;'form-control'} %&gt;\n</code></pre>\n\n<p>When I try to submit the form the <code>activities.category_id</code> field seems to not be \"registred\" (not sure about the right terminology). Rails either throws a </p>\n\n<pre><code>\"category cannot be blank\"\n</code></pre>\n\n<p>error or, when I temporary disable presence validation on Category, the error</p>\n\n<pre><code>SQLite3::ConstraintException: NOT NULL constraint failed: activities.category_id \n</code></pre>\n\n<p>Looking in the request parameters however, the category ID is being sent by the form: </p>\n\n<pre><code>{\"authenticity_token\"=&gt;\"MD5eM5H7DG6RkjD+/QSZ5RqkAnJupJ3L/V044r+QP6s0651mv4hoTSSa8NXB3x959dpwKsSQhBTi58idDMm9hA==\",\n \"activity\"=&gt;{\"name\"=&gt;\"fsdffdf\", \"description\"=&gt;\"sddfdsf\", \"location\"=&gt;\"sdfsdf\", \"category_id\"=&gt;[\"3\"], \"user_id\"=&gt;\"3\"},\n \"commit\"=&gt;\"Save Activity\"}\n</code></pre>\n"}, {"tags": ["ruby", "vagrant", "chef-infra"], "answers": [{"comments": [{"owner": {"reputation": 337, "user_id": 125965, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/82021e2d55238da146e79e5776c744cb?s=128&d=identicon&r=PG", "display_name": "Steve K", "link": "https://stackoverflow.com/users/125965/steve-k"}, "edited": false, "score": 0, "creation_date": 1577949861, "post_id": 59540089, "comment_id": 105287309, "body": "Thanks for taking the time to answer!  Your answer prompted me to re-think my approach a bit and to make better use of attributes and roles to achieve something more in line with Chef best practices.  The chef + vagrant project is part of a larger whole, so test kitchen won&#39;t help as much here, but the deeper dive into attributes, roles, and environments has certainly gotten me much closer to my goal.  For any other readers out there, I did write a mapper from my config.yml to Chef&#39;s default attributes.  I think Mr.&#39;s advice is well-warranted, so I&#39;ll accept the answer."}], "tags": [], "owner": {"reputation": 6316, "user_id": 1184717, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7f8710cd5754a79df5dc5cd3d5308da2?s=128&d=identicon&r=PG", "display_name": "Mr.", "link": "https://stackoverflow.com/users/1184717/mr"}, "is_accepted": true, "score": 0, "last_activity_date": 1577874422, "last_edit_date": 1577874422, "creation_date": 1577771279, "answer_id": 59540089, "question_id": 59534461, "link": "https://stackoverflow.com/questions/59534461/dynamically-populate-chef-cookbook-attributes/59540089#59540089", "title": "Dynamically Populate Chef Cookbook Attributes", "body": "<p>i might be wrong, but it seems you are trying to invent the wheel. let me elaborate...</p>\n\n<h1>vagrant</h1>\n\n<p>from vagrant perspective, you should leverage <a href=\"https://github.com/test-kitchen/test-kitchen\" rel=\"nofollow noreferrer\">test-kitchen</a> in conjunection with <a href=\"https://kitchen.ci/docs/drivers/vagrant/\" rel=\"nofollow noreferrer\"><code>vagrant</code> driver</a>.</p>\n\n<p>once you set it up, take advantage of custom kitchen configuration -- <a href=\"https://kitchen.ci/docs/reference/configuration/\" rel=\"nofollow noreferrer\">use general configuration and (user) custom configuration</a> (each user might have a different custom conifugration, corresponding to the <code>config.yml</code> you mentioned`)</p>\n\n<p>note also, that <code>kitchen.yml</code> supports <a href=\"https://ruby-doc.org/stdlib-2.6.5/libdoc/erb/rdoc/ERB.html#class-ERB-label-Recognized+Tags\" rel=\"nofollow noreferrer\">erb</a>. you can use it to do things dynamically.</p>\n\n<h1>chef</h1>\n\n<p>from chef perspective, is a configuration management and you should use it correctly. that is, rather than using an external file (<code>config.yml</code>) to feed chef with values, take advantage of <a href=\"https://docs.chef.io/attributes.html\" rel=\"nofollow noreferrer\">recipe attributes</a>, <a href=\"https://docs.chef.io/ctl_chef_client.html#options\" rel=\"nofollow noreferrer\">json attributes</a> or even <a href=\"https://docs.chef.io/data_bags.html\" rel=\"nofollow noreferrer\">data bags</a> to store values which will be used during your recipe.</p>\n\n<p>note that attributes can be generated dynamically, you will just have to put some logic for that (same as you did for <code>config.yml</code>)</p>\n"}], "owner": {"reputation": 337, "user_id": 125965, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/82021e2d55238da146e79e5776c744cb?s=128&d=identicon&r=PG", "display_name": "Steve K", "link": "https://stackoverflow.com/users/125965/steve-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 59540089, "answer_count": 1, "score": 0, "last_activity_date": 1577874422, "creation_date": 1577726028, "last_edit_date": 1577726520, "question_id": 59534461, "link": "https://stackoverflow.com/questions/59534461/dynamically-populate-chef-cookbook-attributes", "title": "Dynamically Populate Chef Cookbook Attributes", "body": "<p>I'm trying to create a recipe which pulls in variables which are defined in a YAML configuration file and then uses their values as recipe attributes.</p>\n\n<p>A couple points:</p>\n\n<ol>\n<li><p>My <code>config.yml</code> file resides in the root of my chef directory (that is, outside of my <code>cookbooks</code> directory, and on the same level as my <code>Vagrantfile</code> which drives the provisioning process.</p></li>\n<li><p>I use a similar approach to populate values into my <code>Vagrantfile</code>, which is what gave me the idea for this solution.  I want to maintain a list of user-configurable values which need to be used in both my <code>Vagrantfile</code> as well as various recipes inside various cookbooks.</p></li>\n</ol>\n\n<p>As an example, here are two values from <code>config.yml</code>:</p>\n\n<pre><code>---\nbasics:\n  vm_ip: 192.168.56.11\n  vm_hostname: luma.com\n</code></pre>\n\n<p>I use the following in my <code>Vagrantfile</code> to read these values:</p>\n\n<pre><code>require 'yaml'\nconfig_file = \"config.yml\"\nsettings = YAML.load_file(File.dirname(File.expand_path(__FILE__)) + \"/#{config_file}\")\n</code></pre>\n\n<p>And I reference them as such elsewhere in the <code>Vagrantfile</code> (Syntax abbreviated):</p>\n\n<pre><code>machine.vm.network 'private_network', ip: settings['basics']['vm_ip']\nmachine.vm.hostname = settings['basics']['vm_hostname']\n</code></pre>\n\n<p>This approach works great for the <code>Vagrantfile</code>, but of course, that's outside of Chef's purview.</p>\n\n<p>From a Chef perspective, I thought I could perhaps follow a similar approach, since Chef is Ruby-based.  I have a cookbook <code>base</code> with an <code>attributes</code> folder, and a <code>default.rb</code> attributes file.  My initial attempt was to simply duplicate the approach in <code>default.rb</code>:</p>\n\n<pre><code>require 'yaml'\nconfig_file = \"config.yml\"\nsettings = YAML.load_file(File.dirname(File.expand_path(\"../../../\", __FILE__)) + \"/#{config_file}\")\n</code></pre>\n\n<p>And then reference the <code>config.yml</code> values as attributes like so:</p>\n\n<pre><code>default['vm']['ip'] = settings['basics']['vm_ip']\ndefault['vm']['hostname'] = settings['basics']['vm_hostname']\n</code></pre>\n\n<p>This fails because, as I've (naively) learned, the <code>__FILE__</code> value refers to a path on the node rather than to a file in the local directory, as this attributes file is used during convergence, etc.  Stupid me.</p>\n\n<p>So, my thought now is to dynamically populate the attributes file as part of the <code>Vagrantfile</code>, since that's outside of Chef's process.  Before I go through the effort of writing that, I'm wondering if there's a more appropriate chef-based approach I should consider.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1577719426, "post_id": 59533072, "comment_id": 105235774, "body": "Get <code>cweek</code> for the Dec 31st?"}, {"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1577719645, "post_id": 59533072, "comment_id": 105235862, "body": "I was playing with this option, but this gives me the results <code>1</code>, <code>52</code> or <code>53</code>. I have this like a plan B, but probably looking for a more direct solution that I wouldn&#39;t need to parse further."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1577719839, "post_id": 59533072, "comment_id": 105235947, "body": "This gives you 1 <i>or</i> 52? Hard to believe. Show an example."}, {"owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "edited": false, "score": 0, "creation_date": 1577719966, "post_id": 59533072, "comment_id": 105236007, "body": "I&#39;ve answer with cweek but I&#39;ve have some issues with current year try with strftime and %U"}, {"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 3, "creation_date": 1577720048, "post_id": 59533072, "comment_id": 105236052, "body": "<code>Date.new(2014,12,31).cweek</code> =&gt; <code>1</code>, <code>Date.new(2015,12,31).cweek</code> =&gt; <code>53</code>, <code>Date.new(2016,12,31).cweek</code> =&gt; <code>52</code>"}, {"owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "edited": false, "score": 0, "creation_date": 1577720099, "post_id": 59533072, "comment_id": 105236071, "body": "@user984621 try with strftime as I do in my answer"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1577720596, "post_id": 59533072, "comment_id": 105236299, "body": "2014-12-31 was a Wednesday. That means most days of that week were already in the first week of 2015. Therefore I think the answer is correct. Why do you think it is incorrect. What answer would you expect?"}, {"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1577721211, "post_id": 59533072, "comment_id": 105236545, "body": "@spickermann I am using as a point of reference this: <a href=\"https://www.epochconverter.com/weeks/2015\" rel=\"nofollow noreferrer\">epochconverter.com/weeks/2015</a>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1577721516, "post_id": 59533072, "comment_id": 105236693, "body": "@user984621: thanks for the examples. You learn something new every day :)"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1577722441, "post_id": 59533072, "comment_id": 105237120, "body": "That means <code>cweek</code> returns the expected returns. Solved!"}, {"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1577724602, "post_id": 59533072, "comment_id": 105237997, "body": "@spickermann so if <code>Date.new(2014,12,31).cweek</code> returns <code>1</code>, how do I know the real count of the weeks? In this case, is it 52 or 53? Am I overthinking it or overlooking something?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 2, "creation_date": 1577725480, "post_id": 59533072, "comment_id": 105238337, "body": "I am sorry I do not understand the question. Either there are always 52 weeks in a year because 36[5|6]/7 are &lt; 52.5 and you do not care about complex calendar week calculations. Or you want to know the calendar week of a specific date and that might be 52, 53 or 1 for the last days in December. What result would you expect for 2014?"}], "answers": [{"comments": [{"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1577720221, "post_id": 59533105, "comment_id": 105236138, "body": "Thank you for your answer (not sure why it&#39;s downvoted either). I tried <code>Date.new(2015 , 12, -1).strftime(&quot;%U&quot;).to_i</code>, which gives me <code>52</code>. When I look here <a href=\"https://www.epochconverter.com/weeks/2015\" rel=\"nofollow noreferrer\">epochconverter.com/weeks/2015</a>, it says there are 53 weeks in 2015"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1577720295, "post_id": 59533105, "comment_id": 105236181, "body": "Probably someone with slow fingers. Take your +1 good man."}, {"owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "edited": false, "score": 0, "creation_date": 1577720303, "post_id": 59533105, "comment_id": 105236186, "body": "cool :), if it works can mark as valid."}, {"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1577720474, "post_id": 59533105, "comment_id": 105236258, "body": "@Horacio <code>Date.new(2015,12,31).cweek</code> returns <code>53</code>, <code>Date.new(2015 , 12, -1).strftime(&quot;%U&quot;).to_i</code> returns <code>52</code>... not sure where the difference comes from"}], "tags": [], "owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "is_accepted": false, "score": 4, "last_activity_date": 1577720569, "last_edit_date": 1577720569, "creation_date": 1577719460, "answer_id": 59533105, "question_id": 59533072, "link": "https://stackoverflow.com/questions/59533072/how-to-get-the-number-of-weeks-per-given-year/59533105#59533105", "title": "How to get the number of weeks per given year", "body": "<p>Maybe with this? </p>\n\n<pre><code>Date.new(2019 , 12, -1).strftime(\"%U\").to_i\n</code></pre>\n\n<p>if you want the current year could try this</p>\n\n<pre><code>Date.new(Time.now.year , 12, -1).strftime(\"%U\").to_i\n</code></pre>\n\n<p>Look at the strftime configuration</p>\n\n<pre><code>Week number:\nThe week 1 of YYYY starts with a Sunday or Monday (according to %U\nor %W).  The days in the year before the first week are in week 0.\n  %U - Week number of the year.  The week starts with Sunday.  (00..53)\n  %W - Week number of the year.  The week starts with Monday.  (00..53)\n</code></pre>\n"}], "owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "closed_date": 1577720808, "answer_count": 1, "score": 0, "last_activity_date": 1577738968, "creation_date": 1577719295, "last_edit_date": 1577738968, "question_id": 59533072, "link": "https://stackoverflow.com/questions/59533072/how-to-get-the-number-of-weeks-per-given-year", "closed_reason": "Duplicate", "title": "How to get the number of weeks per given year", "body": "<p>I know there's a method <code>cweek</code>, which gives me the number of the current week.</p>\n\n<p>However, how do I get the count of weeks for a given year?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "rspec"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1577718174, "post_id": 59532692, "comment_id": 105235242, "body": "I would just write more specific assertions to check if the tables in question have been altered. While the looks like a good idea at first glance I think the devil here is really in the details and there is a reason why Rails does not ship with anything like it."}, {"owner": {"reputation": 1500, "user_id": 2772719, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/emBMW.jpg?s=128&g=1", "display_name": "Adamantish", "link": "https://stackoverflow.com/users/2772719/adamantish"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1577720228, "post_id": 59532692, "comment_id": 105236143, "body": "Any particular details in mind? The issue of &quot;Tables in question&quot; is one of the things under test. We must assume our controller is only affecting the tables we think it is.  I&#39;d guess rails doesn&#39;t ship with it because they believe in db agnosticism and some dbs would not support this. Personally, I don&#39;t believe that agnosticism is very achievable in practice so I&#39;m happy to use DB specific add-ons."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1577721138, "post_id": 59532692, "comment_id": 105236515, "body": "I&#39;m not sure agnosticism is the only concern, rather its find a reliable indicator that works inside a transaction and which does not give you false negatives/positives. Testing that your code doesn&#39;t have any unexpected side effects at all is usually not a very viable strategy. Test for the most likely side effects or known bugs."}, {"owner": {"reputation": 1500, "user_id": 2772719, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/emBMW.jpg?s=128&g=1", "display_name": "Adamantish", "link": "https://stackoverflow.com/users/2772719/adamantish"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1577721367, "post_id": 59532692, "comment_id": 105236626, "body": "Yes, if it&#39;s prohibitively hard to implement reliably then, yes, these fall in the realm of reasonable assumptions and are bearable."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1577721707, "post_id": 59532692, "comment_id": 105236769, "body": "Like always it is very hard (or even impossible) to prove that something did not happen. But easy to prove that something was done. Can you add an example of a method that you think should have a spec that proved that no record was changed in the database? And elaborate on why you think it is not enough to spec that the number of records did not change or that a specific record didn&#39;t change?"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1577721730, "post_id": 59532692, "comment_id": 105236781, "body": "What if you&#39;re running your test suite in a parallel mode? Two different specs running at the same time may modify the database causing your <code>not_change_database</code> call to blow up. The existing matchers are more appropriate solutions."}, {"owner": {"reputation": 1500, "user_id": 2772719, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/emBMW.jpg?s=128&g=1", "display_name": "Adamantish", "link": "https://stackoverflow.com/users/2772719/adamantish"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1577726001, "post_id": 59532692, "comment_id": 105238540, "body": "In response to @spickermann and anothermh, these are implementation hurdles that should - in principle - be fully solvable with the sandbox that is the database transaction (it has full knowledge of whether anything changed within that bound). It&#39;s believable that it might be really tricky with common DBs though. If it&#39;s anything other than a flawless implementation, I agree it wouldn&#39;t be worth using."}], "answers": [{"comments": [{"owner": {"reputation": 1500, "user_id": 2772719, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/emBMW.jpg?s=128&g=1", "display_name": "Adamantish", "link": "https://stackoverflow.com/users/2772719/adamantish"}, "edited": false, "score": 0, "creation_date": 1577724331, "post_id": 59533624, "comment_id": 105237898, "body": "Hmmm, yeah it&#39;s only worthwhile if it keeps things easier and safer rather than adding brittleness. If at some point you decide you <i>do</i> want database mutation where you didn&#39;t before then that seems a good place for brittleness.  Your answer would work except that it&#39;s still possible to fire queries and roll them back on error. Really, in postgres the issue is the way that a transaction isn&#39;t a recursive concept but activerecord pretends it is by use of savepoints."}, {"owner": {"reputation": 1500, "user_id": 2772719, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/emBMW.jpg?s=128&g=1", "display_name": "Adamantish", "link": "https://stackoverflow.com/users/2772719/adamantish"}, "edited": false, "score": 0, "creation_date": 1577724639, "post_id": 59533624, "comment_id": 105238012, "body": "And yes, I do think that in the absence of the control of side-effects a functional language gives you it would be good if there were easier ways of expressing &quot;This failure mode should create zero state change in my application&quot;. The reason not to do this seems to be purely about implementation difficulty."}, {"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "reply_to_user": {"reputation": 1500, "user_id": 2772719, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/emBMW.jpg?s=128&g=1", "display_name": "Adamantish", "link": "https://stackoverflow.com/users/2772719/adamantish"}, "edited": false, "score": 0, "creation_date": 1577728777, "post_id": 59533624, "comment_id": 105239544, "body": "Why not just assume that DB transactions work properly, and check that (whatever you&#39;re doing) is being done under a transaction?"}, {"owner": {"reputation": 1500, "user_id": 2772719, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/emBMW.jpg?s=128&g=1", "display_name": "Adamantish", "link": "https://stackoverflow.com/users/2772719/adamantish"}, "edited": false, "score": 0, "creation_date": 1577733281, "post_id": 59533624, "comment_id": 105241114, "body": "You&#39;re most likely to ensure atomicity by wrapping your various <code>save!</code> in a transaction. When a 422 is returned from the second call, the first is rolled back, the database is left unchanged but I&#39;m assuming this gem would say a manipulative query happened. (Or does it account for transactions?)"}, {"owner": {"reputation": 1500, "user_id": 2772719, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/emBMW.jpg?s=128&g=1", "display_name": "Adamantish", "link": "https://stackoverflow.com/users/2772719/adamantish"}, "edited": false, "score": 0, "creation_date": 1577733633, "post_id": 59533624, "comment_id": 105241218, "body": "As for why not check that the production code has been written correctly, that&#39;s what the test is for."}], "tags": [], "owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "is_accepted": false, "score": 1, "last_activity_date": 1577721861, "creation_date": 1577721861, "answer_id": 59533624, "question_id": 59532692, "link": "https://stackoverflow.com/questions/59532692/an-rspec-helper-like-assert-database-unchanged/59533624#59533624", "title": "An Rspec helper like assert_database_unchanged?", "body": "<p>That's a tricky one, because it's not easy to tell what should not happen in your app. IMO better to keep the focus of your specs on what the app should do. </p>\n\n<p>In other words: if you want to test that no DB changes were made, should you check that no files were written? And no requests were made? Should you test that no files permissions have been changed? </p>\n\n<p>I guess you get my point. </p>\n\n<p>But, there might be a legit reasons to do it I don't know about. In such case, I'd use something like <a href=\"https://github.com/civiccc/db-query-matchers\" rel=\"nofollow noreferrer\">db-query-matcher</a></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code> expect { your_code_here }.not_to make_database_queries(manipulative: true)\n</code></pre>\n\n<p>I usually used and and seen it being used for N+1 tests (when you want to specify how many times a specific query is called), but it seems this matcher would work for you as well. </p>\n\n<p>But it can be very brittle: if you add such checks to most of your tests, and your app is evolving, you can have a failing specs just because some actions started to need a DB update. Your call. </p>\n"}, {"comments": [{"owner": {"reputation": 1500, "user_id": 2772719, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/emBMW.jpg?s=128&g=1", "display_name": "Adamantish", "link": "https://stackoverflow.com/users/2772719/adamantish"}, "edited": false, "score": 0, "creation_date": 1577784423, "post_id": 59538376, "comment_id": 105253343, "body": "Unfortunately not. The subject of the block is the tricky part. It needs to know whether the database data changed."}], "tags": [], "owner": {"reputation": 54, "user_id": 4311690, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YIRVESeG5ns/AAAAAAAAAAI/AAAAAAAAAbY/Pu-ANqEzDlU/photo.jpg?sz=128", "display_name": "Fernando Luengo", "link": "https://stackoverflow.com/users/4311690/fernando-luengo"}, "is_accepted": false, "score": 0, "last_activity_date": 1577752862, "creation_date": 1577752862, "answer_id": 59538376, "question_id": 59532692, "link": "https://stackoverflow.com/questions/59532692/an-rspec-helper-like-assert-database-unchanged/59538376#59538376", "title": "An Rspec helper like assert_database_unchanged?", "body": "<p>I think you are looking for </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>assert_no_changes(expressions, message = nil, &amp;block)\n</code></pre>\n\n<p><a href=\"https://api.rubyonrails.org/v6.0.2.1/classes/ActiveSupport/Testing/Assertions.html#method-i-assert_no_changes\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/v6.0.2.1/classes/ActiveSupport/Testing/Assertions.html#method-i-assert_no_changes</a></p>\n"}], "owner": {"reputation": 1500, "user_id": 2772719, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/emBMW.jpg?s=128&g=1", "display_name": "Adamantish", "link": "https://stackoverflow.com/users/2772719/adamantish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1577752862, "creation_date": 1577717466, "last_edit_date": 1577732866, "question_id": 59532692, "link": "https://stackoverflow.com/questions/59532692/an-rspec-helper-like-assert-database-unchanged", "title": "An Rspec helper like assert_database_unchanged?", "body": "<p>Is there an rspec extension for postgresql that allows one to test something like this?</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>expect { make_bad_request }.to not_change_database\n</code></pre>\n\n<p>i.e. To ensure nothing was created, updated or deleted.</p>\n\n<p>Sure, we can check a specific table but most often we just want to be sure that nothing changed at all, nothing sneaked in some multi-stage save.</p>\n\n<p>It's not particularly easy to do with a little helper because although postgres has <code>pg_stat_database</code> it's not updated during the test transaction. I can still see how it's doable but it would be a bit of plumbing. Has anyone done it?</p>\n\n<p><strong>UPDATE:</strong>\nI was asked to give an example of how this might be useful.</p>\n\n<p>The convention with HTTP is that if a request returns an error status then no change has been made to the application state. Exceptions to that convention are rare and we like convention over configuration.</p>\n\n<p>Active record helps with enforcing this with defaults about how validation works but it still leaves lots of ways to make mistakes, particularly with complex chains of events where it's most important to have atomicity.</p>\n\n<p>As such, to enforce the HTTP convention with ease you could take it even further than as stated above and instead have something like a directive expressed as something like</p>\n\n<pre><code>describe 'error responses', :database_changes_disallowed do\n  context 'invalid form data' do\n\n    before do\n    ...setup belongs only here\n    end\n\n    it 'returns 422' do\n      ...\n    end\n  end\nend\n</code></pre>\n\n<p>Rspec is already able to use database transactions to isolate state changes on a per-example level, this would aim to subdivide just one further between the <code>before</code> and the <code>it</code>.</p>\n\n<p>This will work for a well designed app if you have been judicious enough to ensure that your database stores only application state and no pseudo-logging like <code>User#last_active_at</code>. If you haven't then you'll know immediately.</p>\n\n<p>It would greatly increase test case coverage against the some of the worst kind of state corruption bugs whilst needing less code and removing some testing complexity. Cases where a database change suddenly <em>is</em> made for a previously working test would be as a result of an architectural change in an unfortunate direction, a real and unusual need to make an exception or a serious bug.</p>\n\n<p>I'll be sad if it turns out to be technically infeasible to implement but it doesn't seem a bad idea in terms of application design.</p>\n"}, {"tags": ["ruby", "email", "web-scraping", "instagram", "instagram-api"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1577716872, "post_id": 59532551, "comment_id": 105234674, "body": "Please include your attempted solution in the question body itself and any other code you are refereeing to as well. You should not expect people who are using their time to help you to have to dig around and visit multiple other pages to get the gist of your question. This also helps prevent link rot which makes questions and answers useless over time. <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1577717087, "post_id": 59532551, "comment_id": 105234774, "body": "Instagram also has a public API that you should be using instead of a web scraper. If the data you are looking for is not available through the API you should NOT use a web scraper to try to circumvent it. Thats a violation of the TOS and you could be held liable."}, {"owner": {"reputation": 53, "user_id": 12388267, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDOJR8bN_EURKbdOUy0eHYj0bBcWSFycRou2kBE1A=k-s128", "display_name": "Ernani Rocha", "link": "https://stackoverflow.com/users/12388267/ernani-rocha"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1577717183, "post_id": 59532551, "comment_id": 105234820, "body": "Hey, Max thanks for the feedback. Still new to this, but I thought the more info I can give the better no? As for code, there is none yet, because that&#180;s the very root of the question. Knowing if there is a proper way to do it."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577739396, "post_id": 59532551, "comment_id": 105243136, "body": "Please read <a href=\"https://stackoverflow.com/help/behavior\">stackoverflow.com/help/behavior</a> and  &quot;<a href=\"https://medium.com/@heyoka/dont-use-click-here-f32f445d1021\" rel=\"nofollow noreferrer\">Don\u2019t use \u201cclick here\u201d and other common hyperlink mistakes</a>&quot;. More information is not necessarily better; Concise and clear questions are the goal. Adding artificial headings like &quot;The Goal&quot; and &quot;The Problem&quot; don&#39;t really help navigation unless you can supply links to each and have a table-of-contents."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 12388267, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDOJR8bN_EURKbdOUy0eHYj0bBcWSFycRou2kBE1A=k-s128", "display_name": "Ernani Rocha", "link": "https://stackoverflow.com/users/12388267/ernani-rocha"}, "edited": false, "score": 0, "creation_date": 1577717621, "post_id": 59532630, "comment_id": 105235014, "body": "Since I&#180;m such a noob did not know that was possible to reverse engineer an api. Will try that out. Thanks."}, {"owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "reply_to_user": {"reputation": 53, "user_id": 12388267, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDOJR8bN_EURKbdOUy0eHYj0bBcWSFycRou2kBE1A=k-s128", "display_name": "Ernani Rocha", "link": "https://stackoverflow.com/users/12388267/ernani-rocha"}, "edited": false, "score": 0, "creation_date": 1577718373, "post_id": 59532630, "comment_id": 105235315, "body": "It&#39;s a private API that&#39;s used by the mobile app. Maybe there&#39;s an existing description/client library somewhere, you can try searching for that yourself."}], "tags": [], "owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "is_accepted": true, "score": 2, "last_activity_date": 1577717166, "creation_date": 1577717166, "answer_id": 59532630, "question_id": 59532551, "link": "https://stackoverflow.com/questions/59532551/instagram-users-contact-e-mail/59532630#59532630", "title": "Instagram user&#39;s contact e-mail?", "body": "<ul>\n<li>Set up <a href=\"https://mitmproxy.org/\" rel=\"nofollow noreferrer\">mitmproxy</a> on your machine.</li>\n<li>Set up the certificates on your phone and use your machine as the gateway.</li>\n<li>Analyze the traffic.</li>\n<li>Reverse engineer the API (to log in and get info about user profiles) and then use it in your Ruby/Python/whatever code.</li>\n</ul>\n"}], "owner": {"reputation": 53, "user_id": 12388267, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDOJR8bN_EURKbdOUy0eHYj0bBcWSFycRou2kBE1A=k-s128", "display_name": "Ernani Rocha", "link": "https://stackoverflow.com/users/12388267/ernani-rocha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "accepted_answer_id": 59532630, "answer_count": 1, "score": -1, "last_activity_date": 1577717166, "creation_date": 1577716668, "question_id": 59532551, "link": "https://stackoverflow.com/questions/59532551/instagram-users-contact-e-mail", "title": "Instagram user&#39;s contact e-mail?", "body": "<p>Ruby on rails dev here. </p>\n\n<p>This question has been asked before. <a href=\"https://stackoverflow.com/questions/42167140/can-you-get-scrape-emails-from-instagram-accounts\">Here</a>, <a href=\"https://stackoverflow.com/questions/58759376/how-do-i-access-an-instagram-users-contact-information\">here</a> and <a href=\"https://stackoverflow.com/questions/53328319/how-can-i-scrape-business-email-contact-with-python\">here</a>. \nThe problem is that they did not make the right question or the solution given was somewhat shallow.</p>\n\n<p>I \u00b4ll be as specific as I can. </p>\n\n<p><strong>The Goal</strong></p>\n\n<p>I want get the user\u00b4s contact e-mail and not the account e-mail. Two different things. :) \nSome users leave their email on the contact button. It\u00b4s public. </p>\n\n<p>My goal is to make a software that can extract e-mails, but for now, only extracting one e-mail from one single account will be more than enough to have my MVP going.</p>\n\n<p>here is an example below on how instagram let users share their e-mail.</p>\n\n<p><a href=\"https://i.stack.imgur.com/yeGBf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yeGBf.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>The Problem</strong>\nIt only shows in app :( If it were to be shown on the browser as well, it would be a walk in the park. The contact button that has the e-mail and phone number does not show in the browser.</p>\n\n<p>**The Good Part*\nThere is some solutions to it. </p>\n\n<p><a href=\"https://www.youtube.com/watch?v=IsQgdUMYv9k\" rel=\"nofollow noreferrer\">This guy</a> has a figured it out using the API, but I don\u00b4t quite understand how he did it. The downside is that all solution wants to sell you a product.</p>\n\n<p>The focus of <a href=\"https://www.youtube.com/watch?v=yStuxV62XKQ&amp;feature=emb_title\" rel=\"nofollow noreferrer\">this company</a> lies on extracting instagram e-mails and it seems legit. </p>\n\n<p>Last but not least, <a href=\"https://www.youtube.com/watch?v=SSsSLFJ1FK0\" rel=\"nofollow noreferrer\">this dude</a> is using appium to extract those juicy e-mails. The third won\u00b4t really work for me because it seems too messy. Having to use a android emulator will be my last resort. </p>\n\n<p>Thanks for helping and happy new year. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "memory"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577739749, "post_id": 59531764, "comment_id": 105243278, "body": "&quot;<a href=\"https://stackoverflow.com/questions/25189262\">Why is \u201cslurping\u201d a file not a good practice?</a>&quot; goes into this. Reading a big file as an array can cause real problems as Ruby tries to allocate memory."}], "answers": [{"comments": [{"owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "edited": false, "score": 0, "creation_date": 1577715140, "post_id": 59531983, "comment_id": 105233969, "body": "Thank you, I thought so."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1577717121, "post_id": 59531983, "comment_id": 105234789, "body": "&quot;as it doesn&#39;t load the entire file into memory&quot; - this is a non-sequitur. The part you quoted does not say anything about what is loaded into memory. Only the behaviour. This is, therefore, dependent entirely on <i>what</i> a particular IO object is."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1577717232, "post_id": 59531983, "comment_id": 105234846, "body": "Take <code>open-uri</code>, for example. It produces you an IO object, and yet a <code>open(&#39;http:&#47;&#47;example.com&#47;file.txt&#39;).gets</code> will download the entire file before reading a first line from it. And StringIO objects hold their entire content in memory <i>by definition</i>."}, {"owner": {"reputation": 8462, "user_id": 405865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29f04f339715955060858e0e65e1311?s=128&d=identicon&r=PG", "display_name": "fphilipe", "link": "https://stackoverflow.com/users/405865/fphilipe"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1577717704, "post_id": 59531983, "comment_id": 105235052, "body": "@SergioTulentsev, yes, you&#39;re right. By &quot;latter&quot; I was referring to the latter example in the question, related to <code>File</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1577717859, "post_id": 59531983, "comment_id": 105235123, "body": "@fphilipe: ah, but in the question it&#39;s not a plain <code>File</code>, is it? It&#39;s whatever <code>Net::SFTP</code> gives us."}, {"owner": {"reputation": 8462, "user_id": 405865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29f04f339715955060858e0e65e1311?s=128&d=identicon&r=PG", "display_name": "fphilipe", "link": "https://stackoverflow.com/users/405865/fphilipe"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1577718461, "post_id": 59531983, "comment_id": 105235341, "body": "@SergioTulentsev, yes, you are right :) In fact, the <code>file</code> variable is a <a href=\"https://github.com/net-ssh/net-sftp/blob/master/lib/net/sftp/operations/file.rb\" rel=\"nofollow noreferrer\"><code>Net::SFTP::Operations::File</code></a> instance, which does not inherit from <code>IO</code>, but mimics it."}, {"owner": {"reputation": 8462, "user_id": 405865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29f04f339715955060858e0e65e1311?s=128&d=identicon&r=PG", "display_name": "fphilipe", "link": "https://stackoverflow.com/users/405865/fphilipe"}, "edited": false, "score": 1, "creation_date": 1577718860, "post_id": 59531983, "comment_id": 105235520, "body": "Digging deeper, this class will read 8192 bytes at a time as required (<a href=\"https://github.com/net-ssh/net-sftp/blob/acbd1f7d435bb8bcc89a31b91bdfb6c8943df640/lib/net/sftp/operations/file.rb#L184\" rel=\"nofollow noreferrer\">source</a>)."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577739599, "post_id": 59531983, "comment_id": 105243215, "body": "See &quot;<a href=\"https://meta.stackexchange.com/questions/109773\">What happens if you answered a question, questioner says thanks, but didn&#39;t accept your answer as correct?</a>&quot; and &quot;<a href=\"https://meta.stackexchange.com/questions/14994\">Do you feel dirty if you nudge new users to accept your answer when they indicate you&#39;ve answered their question?</a>&quot;"}], "tags": [], "owner": {"reputation": 8462, "user_id": 405865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29f04f339715955060858e0e65e1311?s=128&d=identicon&r=PG", "display_name": "fphilipe", "link": "https://stackoverflow.com/users/405865/fphilipe"}, "is_accepted": true, "score": 2, "last_activity_date": 1577713903, "creation_date": 1577713903, "answer_id": 59531983, "question_id": 59531764, "link": "https://stackoverflow.com/questions/59531764/rails-file-readlines-vs-file-gets/59531983#59531983", "title": "Rails - file.readlines vs file.gets", "body": "<p>What do the docs say? (Note that <code>File</code> is a subclass of <code>IO</code>. The methods <code>#readlines</code> and <code>#gets</code> are defined on <code>IO</code>.)</p>\n\n<p><a href=\"https://ruby-doc.org/core-2.6.5/IO.html#method-i-readlines\" rel=\"nofollow noreferrer\"><code>IO#readlines</code></a>:</p>\n\n<blockquote>\n  <p>Reads all of the lines [\u2026], and returns them in an array.</p>\n</blockquote>\n\n<p><a href=\"https://ruby-doc.org/core-2.6.5/IO.html#method-i-gets\" rel=\"nofollow noreferrer\"><code>IO#gets</code></a>:</p>\n\n<blockquote>\n  <p>Reads the next \u201cline\u201d from the I/O stream.</p>\n</blockquote>\n\n<p>Thus, I expect the latter to be better in terms of memory usage as it doesn't load the entire file into memory.</p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1577716801, "post_id": 59532226, "comment_id": 105234639, "body": "Comparing runtimes is interesting, but not what was being asked :) Run it through a memory profiler. This one, for example: <a href=\"https://github.com/michaelherold/benchmark-memory\" rel=\"nofollow noreferrer\">github.com/michaelherold/benchmark-memory</a>"}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1577718974, "post_id": 59532226, "comment_id": 105235577, "body": "It gives the same results (the same memory size) :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1577719064, "post_id": 59532226, "comment_id": 105235614, "body": "&quot;the same memory size&quot; - that&#39;s weird."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577734827, "post_id": 59532226, "comment_id": 105241597, "body": "What about <a href=\"https://ruby-doc.org/core-2.6.3/IO.html#method-c-foreach\" rel=\"nofollow noreferrer\">IO::foreach</a>, which is often the method of choice when reading a file line-by-line, in part because it returns an enumerator when no block is given, thereby permitting chaining to another method?"}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577798805, "post_id": 59532226, "comment_id": 105258306, "body": "@CarySwoveland thanks, I added this method to comparison"}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 1, "last_activity_date": 1577798752, "last_edit_date": 1577798752, "creation_date": 1577715135, "answer_id": 59532226, "question_id": 59531764, "link": "https://stackoverflow.com/questions/59531764/rails-file-readlines-vs-file-gets/59532226#59532226", "title": "Rails - file.readlines vs file.gets", "body": "<p>Generally cycles are faster than blocks because of scope.</p>\n\n<p>And arrays take much memory.</p>\n\n<p><a href=\"https://ruby-doc.org/core/IO.html#method-i-readlines\" rel=\"nofollow noreferrer\"><code>#readlines</code></a> reads all of the lines in ios, and returns them in an array.</p>\n\n<p><a href=\"https://ruby-doc.org/core/IO.html#method-i-gets\" rel=\"nofollow noreferrer\"><code>#gets</code></a> reads the next line from the I/O stream</p>\n\n<p>I wrote little benchmark for file with 1387085 lines.</p>\n\n<p>Also added <a href=\"https://ruby-doc.org/core/IO.html#method-c-readlines\" rel=\"nofollow noreferrer\"><code>::readlines</code></a> that reads the entire file specified by name as individual lines, and returns those lines in an array and <a href=\"https://ruby-doc.org/core/IO.html#method-c-foreach\" rel=\"nofollow noreferrer\"><code>::foreach</code></a> that executes the block for every line in the named I/O port.</p>\n\n<pre><code>require 'benchmark/ips'\nrequire 'benchmark/memory'\n\n@path = File.join(__dir__, 'file.txt')\n\ndef open_readlines\n  File.open(@path, 'r') do |f|\n    f.readlines.each do |line|\n      line &lt;&lt; 'www'\n    end\n  end\nend\n\ndef open_gets\n  File.open(@path, 'r') do |f|\n    while line = f.gets do\n      line &lt;&lt; 'www'\n    end\n  end\nend\n\ndef readlines\n  File.readlines(@path).each do |line|\n    line &lt;&lt; 'www'\n  end\nend\n\ndef foreach\n  File.foreach(@path) do |line|\n    line &lt;&lt; 'www'\n  end\nend\n\n%i[ips memory].each do |benchmark|\n  puts benchmark\n\n  Benchmark.send(benchmark) do |x|\n    x.report('::open #readlines') { open_readlines }\n    x.report('::open #gets') { open_gets }\n    x.report('::readlines') { readlines }\n    x.report('::foreach') { foreach }\n\n    x.compare!\n  end\nend\n</code></pre>\n\n<p>And results are:</p>\n\n<pre><code>ips\nWarming up --------------------------------------\n   ::open #readlines     1.000  i/100ms\n        ::open #gets     1.000  i/100ms\n         ::readlines     1.000  i/100ms\n           ::foreach     1.000  i/100ms\nCalculating -------------------------------------\n   ::open #readlines      0.575  (\u00b1 0.0%) i/s -      3.000  in   5.397538s\n        ::open #gets      0.746  (\u00b1 0.0%) i/s -      4.000  in   5.381583s\n         ::readlines      0.570  (\u00b1 0.0%) i/s -      3.000  in   5.434956s\n           ::foreach      0.826  (\u00b1 0.0%) i/s -      5.000  in   6.057936s\n\nComparison:\n           ::foreach:        0.8 i/s\n        ::open #gets:        0.7 i/s - 1.11x  slower\n   ::open #readlines:        0.6 i/s - 1.44x  slower\n         ::readlines:        0.6 i/s - 1.45x  slower\n\nmemory\nCalculating -------------------------------------\n   ::open #readlines   822.274M memsize (     8.424k retained)\n                         2.774M objects (     1.000  retained)\n                        50.000  strings (     0.000  retained)\n        ::open #gets   810.638M memsize (     0.000  retained)\n                         2.774M objects (     0.000  retained)\n                        50.000  strings (     0.000  retained)\n         ::readlines   822.274M memsize (     0.000  retained)\n                         2.774M objects (     0.000  retained)\n                        50.000  strings (     0.000  retained)\n           ::foreach   810.638M memsize (     0.000  retained)\n                         2.774M objects (     0.000  retained)\n                        50.000  strings (     0.000  retained)\n\nComparison:\n           ::foreach:  810638012 allocated\n        ::open #gets:  810638052 allocated - 1.00x more\n         ::readlines:  822274324 allocated - 1.01x more\n   ::open #readlines:  822274364 allocated - 1.01x more\n</code></pre>\n"}], "owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 1, "accepted_answer_id": 59531983, "answer_count": 2, "score": 0, "last_activity_date": 1577798752, "creation_date": 1577712850, "last_edit_date": 1577713283, "question_id": 59531764, "link": "https://stackoverflow.com/questions/59531764/rails-file-readlines-vs-file-gets", "title": "Rails - file.readlines vs file.gets", "body": "<p>I want to read lines of file from SFTP server.\nThere are more than 100000 lines in the file.</p>\n\n<p>I am reading in 2 ways.</p>\n\n<pre><code>Net::SSH.start(setting.host, setting.user,\n  {\n    :key_data =&gt; [ key ],\n    :keys =&gt; [],\n    :keys_only =&gt; true\n  }\n) do |ssh|\n  ssh.sftp.connect do |sftp|\n    sftp.dir.foreach(src_dir) do |entry|\n      if entry.name.include? today\n        filename = \"#{src_dir}/#{entry.name}\"\n        sftp.file.open(filename, \"r\") do |f|\n\n          # Way 1\n          f.readlines.each do |line|\n            parse(line)\n          end\n\n          # Way 2\n          while line = f.gets do\n            parse(line)\n          end\n        end\n      end\n    end \n  end\nend\n</code></pre>\n\n<p>I want to know which way is better in <strong>memory usage</strong>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 10071, "user_id": 771838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0169a78f851962058d63337ad0147d6?s=128&d=identicon&r=PG", "display_name": "rossta", "link": "https://stackoverflow.com/users/771838/rossta"}, "edited": false, "score": 0, "creation_date": 1577708190, "post_id": 59530624, "comment_id": 105230898, "body": "What is the path to the core extensions file?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1577708652, "post_id": 59530624, "comment_id": 105231089, "body": "You can place your monkeypatch in a file in the &#39;config/initalializers&#39; directory. It will be required  during the initialization phase."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1577708846, "post_id": 59530624, "comment_id": 105231167, "body": "Since you are not using refinements, what would be wrong with just reopening and altering the class? Why would you ever need to declare a custom module and include it?"}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1577711171, "post_id": 59530624, "comment_id": 105232183, "body": "To expand on @AlekseiMatiushkin&#39;s suggestion, you can &quot;reopen&quot; the module in Ruby using the same syntax you would use to create a new module:  module Numeric;   def percent_of(number);     to_f / number * 100.0;   end; end"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1577712888, "post_id": 59530624, "comment_id": 105232920, "body": "@KeithBennett <code>Numeric</code> is a class, not a module."}, {"owner": {"reputation": 805, "user_id": 4544219, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CLo94.jpg?s=128&g=1", "display_name": "Mosaaleb", "link": "https://stackoverflow.com/users/4544219/mosaaleb"}, "edited": false, "score": 0, "creation_date": 1577725634, "post_id": 59530624, "comment_id": 105238404, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/5654517/in-ruby-on-rails-to-extend-the-string-class-where-should-the-code-be-put-in\">In Ruby on Rails, to extend the String class, where should the code be put in?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 305, "user_id": 3760963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f89be24990ab2c479f56b5536c89873?s=128&d=identicon&r=PG&f=1", "display_name": "Prabakaran", "link": "https://stackoverflow.com/users/3760963/prabakaran"}, "is_accepted": true, "score": 2, "last_activity_date": 1577713318, "last_edit_date": 1577713318, "creation_date": 1577712950, "answer_id": 59531783, "question_id": 59530624, "link": "https://stackoverflow.com/questions/59530624/how-to-properly-monkey-patch-the-numeric-class-on-ror/59531783#59531783", "title": "How to properly monkey patch the Numeric class on RoR?", "body": "<p>As <a href=\"https://stackoverflow.com/users/544825/max\">max</a> commented, you can use Rails <a href=\"https://guides.rubyonrails.org/v2.3/configuring.html#using-initializers\" rel=\"nofollow noreferrer\">initializers</a> folder for monkey patching the libraries.</p>\n\n<p>I would suggest creating a new folder <code>core_extensions</code> within <code>config/initializers/</code> and group patches related to the same module/class in a separate file and place the <code>include</code> at the <code>last line</code>.</p>\n\n<pre><code>## File path: config/initializers/core_extensions/numeric.rb\n\n# frozen_string_literal: true\n\nmodule CoreExtensions\n  module Numeric\n    def percent_of(number)\n      to_f / number * 100.0\n    end\n  end\nend\n\nNumeric.include CoreExtensions::Numeric\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 5467306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e185491ea7afdef8a92f44e9d25201e?s=128&d=identicon&r=PG&f=1", "display_name": "Bisher", "link": "https://stackoverflow.com/users/5467306/bisher"}, "is_accepted": false, "score": 0, "last_activity_date": 1577714464, "creation_date": 1577714464, "answer_id": 59532098, "question_id": 59530624, "link": "https://stackoverflow.com/questions/59530624/how-to-properly-monkey-patch-the-numeric-class-on-ror/59532098#59532098", "title": "How to properly monkey patch the Numeric class on RoR?", "body": "<p>I created a file in <code>lib/extensions/</code> &amp; called it <code>numeric_ext.rb</code> with this content:</p>\n\n<pre><code>class Numeric\n  def percent_of(number)\n   to_f / number * 100.0\n  end\nend\n</code></pre>\n\n<p>After that I included this snippet in my <code>application.rb</code></p>\n\n<pre><code>config.to_prepare do\n  load 'extensions/numeric_ext.rb'\nend\n</code></pre>\n\n<p>I tested this &amp; It's working properly.</p>\n"}], "owner": {"reputation": 382, "user_id": 7479934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100007344395075/picture?type=large", "display_name": "Amanda Ferrari", "link": "https://stackoverflow.com/users/7479934/amanda-ferrari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 59531783, "answer_count": 2, "score": 0, "last_activity_date": 1577714464, "creation_date": 1577707843, "question_id": 59530624, "link": "https://stackoverflow.com/questions/59530624/how-to-properly-monkey-patch-the-numeric-class-on-ror", "title": "How to properly monkey patch the Numeric class on RoR?", "body": "<p>I would like to know how properly monkey patch a core DSL on RoR. I have the following monkey patch:</p>\n\n<pre><code># frozen_string_literal: true\n\nmodule CoreExtensions\n  module Numeric\n    def percent_of(number)\n      to_f / number * 100.0\n    end\n  end\nend\n</code></pre>\n\n<p>(I've followed this <a href=\"https://www.justinweiss.com/articles/3-ways-to-monkey-patch-without-making-a-mess/\" rel=\"nofollow noreferrer\">article</a>).</p>\n\n<p>Now I would like to know where to put the following:</p>\n\n<pre><code>Numeric.include CoreExtensions::Numeric\n</code></pre>\n\n<p>I would like to have this <code>percent_of</code> method available for all my app. I've tried to place it in <code>config/application.rb</code>:</p>\n\n<pre><code># frozen_string_literal: true\n\nRails.application.configure do\n # ...\nend\n\nNumeric.include CoreExtensions::Numeric\n</code></pre>\n\n<p>But it didn't work. When I try to serve the following error is raised:</p>\n\n<pre><code>uninitialized constant CoreExtensions (NameError)\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby", "phantomjs", "watir"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1577843677, "post_id": 59529158, "comment_id": 105268239, "body": "Development for PhantomJS has been suspended, so it may be difficult to find a solution. Ideally, you would use another browser. Perhaps try headless Chrome."}, {"owner": {"reputation": 59, "user_id": 6747306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d281451f8e389d9ea59bfa1085df00?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Adeel", "link": "https://stackoverflow.com/users/6747306/muhammad-adeel"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1577871210, "post_id": 59529158, "comment_id": 105271354, "body": "@JustinKo actually I have to run that script on ubuntu server &amp; I don&#39;t have any browsers available there. Can you please recommend any other possible solution which I can apply so that the script run on server side."}], "owner": {"reputation": 59, "user_id": 6747306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d281451f8e389d9ea59bfa1085df00?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Adeel", "link": "https://stackoverflow.com/users/6747306/muhammad-adeel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577701050, "creation_date": 1577701050, "question_id": 59529158, "link": "https://stackoverflow.com/questions/59529158/watir-phantomjs-returning-empty-response", "title": "Watir phantomjs returning empty response", "body": "<p>I'm using watir with phantomjs to write some automatic scripts. Here is the piece of code</p>\n\n<pre><code>require 'watir'\n\nOpenSSL::SSL::VERIFY_PEER = OpenSSL::SSL::VERIFY_NONE\n\n\nbrowser = Watir::Browser.new :phantomjs\nbrowser.goto \"https://google.com\"\nbrowser.html\n</code></pre>\n\n<p>It's returning empty response each time, it seems like it's not opening the page. So any help to fix that problem will be appreciated. Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "webhooks", "bearer-token"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1577700331, "creation_date": 1577700331, "answer_id": 59528990, "question_id": 59528892, "link": "https://stackoverflow.com/questions/59528892/how-to-get-the-bearer-token-from-a-webhook-ruby-on-rails/59528990#59528990", "title": "How to get the bearer token from a webhook Ruby on Rails", "body": "<pre class=\"lang-rb prettyprint-override\"><code>data = JSON.parse(response.body)\n#\u21d2\u00a0JSON::ParserError (767: unexpected token ...\n</code></pre>\n\n<p>The library you use to get the response seems to parse the response on its own, you don\u2019t need to call <code>JSON#parse</code> again. The below should work.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>data = response.body\nputs \"TOKEN \" + data['csrf-token']['content']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1692, "user_id": 9288619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6IK38.jpg?s=128&g=1", "display_name": "code_aks", "link": "https://stackoverflow.com/users/9288619/code-aks"}, "is_accepted": false, "score": 0, "last_activity_date": 1577700540, "creation_date": 1577700540, "answer_id": 59529054, "question_id": 59528892, "link": "https://stackoverflow.com/questions/59528892/how-to-get-the-bearer-token-from-a-webhook-ruby-on-rails/59529054#59529054", "title": "How to get the bearer token from a webhook Ruby on Rails", "body": "<p><a href=\"https://i.stack.imgur.com/QN9An.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QN9An.png\" alt=\"enter image description here\"></a></p>\n\n<p>.....</p>\n\n<p>I think you can get <strong>Authorization Bearer token</strong> like :- </p>\n\n<pre><code>if headers['Authorization'].present?\n  return headers['Authorization'].split(' ').last\nelse\n  errors.add(:token, 'Missing token')\nend\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 12600003, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAcDDhCPuhb9osLQKJ71laKf-yDpCk-VU_iyg6x=k-s128", "display_name": "Dam76", "link": "https://stackoverflow.com/users/12600003/dam76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1577711982, "creation_date": 1577699967, "last_edit_date": 1577711982, "question_id": 59528892, "link": "https://stackoverflow.com/questions/59528892/how-to-get-the-bearer-token-from-a-webhook-ruby-on-rails", "title": "How to get the bearer token from a webhook Ruby on Rails", "body": "<p>I receive datas from webhook and I try to get the <code>Authorization Bearer token</code> that is in the headers</p>\n\n<p>I tried : </p>\n\n<pre><code>data = JSON.parse(response.body)\nputs \"TOKEN \" + data['csrf-token']['content']\n</code></pre>\n\n<p>Also : </p>\n\n<pre><code>if headers['Authorization'].present?\n  puts \" HEADER \" + headers['Authorization'].split(' ').last\n else\n   puts \"ERROR\"\nend\n</code></pre>\n\n<p>-> I have the ERROR</p>\n\n<p>And : </p>\n\n<pre><code>data = response.body\nputs \"TOKEN \" + data['csrf-token']['content']\n</code></pre>\n\n<p>-> It returns nil</p>\n\n<p>Turns out that the solution was : </p>\n\n<pre><code>bearer_token = request.headers[\"Authorization\"]\n</code></pre>\n\n<p>Thanks all for your help ! </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577729054, "post_id": 59527277, "comment_id": 105239625, "body": "Your first sentence is clear but you have confused some readers about what you want to do by your use of the Safe Navigation operator. Perhaps you could add an example (including the desired result) to clarify your question. More generally, why did you choose to use the Safe Navigation operator?"}, {"owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577729551, "post_id": 59527277, "comment_id": 105239786, "body": "I think arr.empty? is correct to check if the array is empty and arr.any? is correct to check if the array is not empty."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1577733030, "post_id": 59527313, "comment_id": 105241034, "body": "&quot;...the existence of an object is considered true...&quot; requires clarification. You might tweak your example by writing <code>[nil, false].any? =&gt; false</code>."}], "tags": [], "owner": {"reputation": 1692, "user_id": 9288619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6IK38.jpg?s=128&g=1", "display_name": "code_aks", "link": "https://stackoverflow.com/users/9288619/code-aks"}, "is_accepted": false, "score": 7, "last_activity_date": 1577769196, "last_edit_date": 1577769196, "creation_date": 1577691708, "answer_id": 59527313, "question_id": 59527277, "link": "https://stackoverflow.com/questions/59527277/rails-arr-any-arr-empty/59527313#59527313", "title": "Rails - !arr&amp;.any? = arr&amp;.empty?", "body": "<p>Take a look at the following Ruby:</p>\n\n<pre><code>[1, 2].any? =&gt; true\n[nil, false].any? =&gt; false\n[nil, nil].any? =&gt; false\n\n[1, 2].empty? =&gt; false\n[nil, nil].empty? =&gt; false\n</code></pre>\n\n<p><a href=\"https://apidock.com/ruby/Enumerable/any%3F\" rel=\"nofollow noreferrer\">Enumerable#any?</a> is a method that asks \"is there anything in this collection that\u2019s true?\" In Ruby, the existence of an object is considered true; so calling <code>#any?</code> without a block is saying is there something that\u2019s not nil or false in this collection?.</p>\n\n<p>For more information see \"<a href=\"https://thoughtbot.com/blog/any-empty\" rel=\"nofollow noreferrer\">any? != ! empty?</a>\"</p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 3, "last_activity_date": 1577693962, "last_edit_date": 1577693962, "creation_date": 1577692604, "answer_id": 59527467, "question_id": 59527277, "link": "https://stackoverflow.com/questions/59527277/rails-arr-any-arr-empty/59527467#59527467", "title": "Rails - !arr&amp;.any? = arr&amp;.empty?", "body": "<p>In Ruby on Rails I would use <a href=\"https://api.rubyonrails.org/classes/Object.html#method-i-blank-3F\" rel=\"nofollow noreferrer\"><code>blank?</code></a>. From the docs:</p>\n\n<blockquote>\n  <p>An object is blank if it's false, empty, or a whitespace string. For example, nil, '', ' ', [], {}, and false are all blank.</p>\n</blockquote>\n\n<pre><code>array = []\narray.blank? \n#=&gt; true\n</code></pre>\n\n<p>Note that <code>blank?</code> only works in Ruby on Rails, not in plain Ruby and that it has a slightly different behavior then <code>empty?</code>. Have a look at this <a href=\"https://stackoverflow.com/a/26877095/2483313\">comparision</a> about the responses or errors you might get from the different methods.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577697395, "post_id": 59527497, "comment_id": 105226590, "body": "The OP\u2019s first sentence makes clear what is desired (especially \u201c<code>arr = []</code>\u201d). You and others giving answers refer to <code>nil</code>, <code>false</code>, <code>blank</code>, but none of that is relevant. I upvoted for your first sentence but suggest that you remove the \u201cif clause\u201d in that sentence, explain why you think \u2018empty?` is preferred to alternatives and ditch the rest."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1577719974, "post_id": 59527497, "comment_id": 105236014, "body": "@CarySwoveland Sometimes what people ask for and what they need are not quite the same. They say they&#39;re checking for <code>[]</code> but they&#39;re using safe navigation, so it seems they want <code>nil</code> to be empty. Rails offers <code>blank?</code> to handle that. <code>arr&amp;.empty?</code> is clearly incorrect and that needed to be addressed (I got bit by this myself just recently). Now they have options and they can decide which is appropriate, we don&#39;t have enough context to decide for them."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 3, "last_activity_date": 1577692796, "creation_date": 1577692796, "answer_id": 59527497, "question_id": 59527277, "link": "https://stackoverflow.com/questions/59527277/rails-arr-any-arr-empty/59527497#59527497", "title": "Rails - !arr&amp;.any? = arr&amp;.empty?", "body": "<p>If you want to check that <code>arr</code> contains no elements then <code>arr.empty?</code> is correct.</p>\n\n<p>If you want to also accept <code>nil</code> or <code>false</code> as empty then <code>!arr || arr.empty?</code> is correct. In Ruby on Rails you can use <a href=\"https://api.rubyonrails.org/classes/Object.html#method-i-blank-3F\" rel=\"nofollow noreferrer\"><code>arr.blank?</code></a> instead.</p>\n\n<p><code>arr&amp;.empty?</code> does the opposite of what you intend. <code>nil&amp;.empty?</code> is <em>false</em> when you want the result from <code>nil</code> to be true. If <code>arr</code> is <code>nil</code> the safe navigation operator <code>&amp;.</code> will return <code>nil</code>. <a href=\"https://rubocop.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">Rubocop</a> will catch this with <a href=\"https://rubocop.readthedocs.io/en/latest/cops_lint/#lintsafenavigationwithempty\" rel=\"nofollow noreferrer\">Lint/SafeNavigationWithEmpty</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1577720930, "post_id": 59531760, "comment_id": 105236430, "body": "While this is true, the subtle difference in behavior between <code>ActiveRecord::Relation#any?</code> and <code>Enumerable#any?</code> invites confusion. It&#39;s very common to swap Relations for Arrays and other Enumerables. I would recommend steering away from using <code>any?</code> to mean <code>!empty?</code> and perhaps use <code>present?</code>."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1577899143, "post_id": 59531760, "comment_id": 105277566, "body": "I agree, that there is a subtle difference. However, there is also a subtle difference between <code>any?</code> and <code>present?</code> for <code>ActiveRecord::Relation</code>. <code>any?</code> will use a count query if the records aren&#39;t loaded yet, but doesn&#39;t if the collection is already loaded. <code>present?</code> will load the full collection if not already loaded instead of using a count query. I do understand that this answer doesn&#39;t fully fit, since OP specifically asked about arrays. However I feel the need to still mention it, since it&#39;s related to the <a href=\"https://stackoverflow.com/questions/tagged/ruby-on-rails\">ruby-on-rails</a> tag."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1577899519, "post_id": 59531760, "comment_id": 105277668, "body": "For those interested in the differences between <code>ActiveRecord::Relation</code> query methods, I&#39;ve listed the differences in a <a href=\"https://github.com/rubocop-hq/rails-style-guide/issues/232#issuecomment-425848425\" rel=\"nofollow noreferrer\">comment under an Rails style guide issue</a>."}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 0, "last_activity_date": 1577712827, "creation_date": 1577712827, "answer_id": 59531760, "question_id": 59527277, "link": "https://stackoverflow.com/questions/59527277/rails-arr-any-arr-empty/59531760#59531760", "title": "Rails - !arr&amp;.any? = arr&amp;.empty?", "body": "<p>Since you've tagged the question with <a href=\"/questions/tagged/ruby-on-rails\" class=\"post-tag\" title=\"show questions tagged &#39;ruby-on-rails&#39;\" rel=\"tag\">ruby-on-rails</a>, I'm adding an answer based upon an active record collection.</p>\n\n<p>Since everything other than <code>nil</code> and <code>false</code> is considered truthy. For active record collections this means that the behaviour would be the same for <code>records.any?</code> and <code>!records.empty?</code>. This is also visible when looking at <a href=\"https://github.com/rails/rails/blob/f33d52c95217212cbacc8d5e44b5a8e3cdc6f5b3/activerecord/lib/active_record/relation.rb#L277-L280\" rel=\"nofollow noreferrer\">the source</a>\n for <code>ActiveRecord::Relation</code>:</p>\n\n<blockquote>\n<pre><code># Returns true if there are any records.\ndef any?\n  return super if block_given?\n  !empty?\nend\n</code></pre>\n</blockquote>\n\n<p>So assuming there is no block given and you're working with an <code>ActiveRecord::Relation</code>:</p>\n\n<pre><code>User.active.any?\n# results in the same result as\n!User.active.empty?\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1577733938, "last_edit_date": 1577733938, "creation_date": 1577732358, "answer_id": 59535647, "question_id": 59527277, "link": "https://stackoverflow.com/questions/59527277/rails-arr-any-arr-empty/59535647#59535647", "title": "Rails - !arr&amp;.any? = arr&amp;.empty?", "body": "<p>You wish to determine if an array <code>arr</code> is empty; that is, if <code>arr</code> equals the empty array <code>[]</code>. Here are some ways of doing that<sup>1</sup>:</p>\n\n<pre><code>arr == []\narr.size == 0\narr.empty?\n</code></pre>\n\n<p>Of these, <code>arr.empty?</code> is normally the method of choice, if for no other reason than it reads best.</p>\n\n<p>When choosing one method among several that work you should consider what would happen if there were a bug in your code resulting in <code>arr</code> holding an object that is not an array. In particular, many bugs could result in <code>arr</code> holding <code>nil</code>. Should that occur <code>arr == []</code> is problematic because it would return <code>false</code> and merrily carry on, masking the bug from detection at that point.</p>\n\n<p><code>nil.size == 0</code> and <code>nil.empty?</code> both raise exceptions (because <code>nil</code> does not have a method <code>size</code> or <code>empty?</code>), which is what you want.</p>\n\n<p>You certainly do not want to use the Safe Navigation operator as it would serve only to mask errors when <code>arr</code> is <code>nil</code>:</p>\n\n<pre><code>arr = nil\narr&amp;.size\n  #=&gt; nil\narr&amp;.empty?\n  #=&gt; nil\n</code></pre>\n\n<p>Lastly <code>arr.size == 0</code> has the weakness that the coder may inadvertently write <code>arr.size = 0</code>, particularly if playing <em>Call of Duty</em> while coding (though <code>arr.size.zero?</code> would be good practice as it overcomes that potential problem).</p>\n\n<p>To sum up, it is difficult to find an argument for using something other than <code>arr.empty?</code> to determine if an array is empty.</p>\n\n<p><sup>1 The question suggests the use of the method <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-any-3F\" rel=\"nofollow noreferrer\">Array#any?</a>. That doc references <a href=\"https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-any-3F\" rel=\"nofollow noreferrer\">Enumerable#any?</a>, which makes clear that, for example, <code>[nil].any?</code> returns <code>false</code>, yet <code>[nil]</code> is not empty. Hence, <code>any?</code> cannot be used to determine if an array is empty.</sup></p>\n"}], "owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 1, "answer_count": 5, "score": 0, "last_activity_date": 1577769196, "creation_date": 1577691477, "question_id": 59527277, "link": "https://stackoverflow.com/questions/59527277/rails-arr-any-arr-empty", "title": "Rails - !arr&amp;.any? = arr&amp;.empty?", "body": "<p>In Rails, I want to check if an array is empty(arr = []).</p>\n\n<pre><code>!arr&amp;.any? \narr&amp;.empty?\n</code></pre>\n\n<p>Which is more correct?</p>\n"}, {"tags": ["ruby", "ipv6"], "comments": [{"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1577689051, "post_id": 59526832, "comment_id": 105224165, "body": "The problem you are having is that you are trying to do that using text. Both IP and MAC addresses are binary numbers. and you can simply use a bitwise OR to set the U/L bit of the MAC address as a binary number. Then, you can convert back to text."}], "answers": [{"comments": [{"owner": {"reputation": 3960, "user_id": 326111, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/359024e7132672aaeef4a3e792be4ae5?s=128&d=identicon&r=PG", "display_name": "bswinnerton", "link": "https://stackoverflow.com/users/326111/bswinnerton"}, "edited": false, "score": 0, "creation_date": 1577718819, "post_id": 59532605, "comment_id": 105235499, "body": "What is the significance of <code>&lt;&lt; 112</code> when creating the prefix? How could you pass an arbitrary prefix there?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 3960, "user_id": 326111, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/359024e7132672aaeef4a3e792be4ae5?s=128&d=identicon&r=PG", "display_name": "bswinnerton", "link": "https://stackoverflow.com/users/326111/bswinnerton"}, "edited": false, "score": 1, "creation_date": 1577718978, "post_id": 59532605, "comment_id": 105235578, "body": "The prefix for link-local addresses is <code>0xfe80</code>, which is 16 bits long, so you have to append another 112 bits to get 128 bits."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 3960, "user_id": 326111, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/359024e7132672aaeef4a3e792be4ae5?s=128&d=identicon&r=PG", "display_name": "bswinnerton", "link": "https://stackoverflow.com/users/326111/bswinnerton"}, "edited": false, "score": 0, "creation_date": 1577719293, "post_id": 59532605, "comment_id": 105235709, "body": "Actually, come to think of it, the prefix is only 10 bits, so to be 100% correct, it should be <code>0x3fa &lt;&lt; 118</code>."}, {"owner": {"reputation": 3960, "user_id": 326111, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/359024e7132672aaeef4a3e792be4ae5?s=128&d=identicon&r=PG", "display_name": "bswinnerton", "link": "https://stackoverflow.com/users/326111/bswinnerton"}, "edited": false, "score": 0, "creation_date": 1577720482, "post_id": 59532605, "comment_id": 105236261, "body": "It looks like <code>IPAddr.new(&#39;fe80::&#47;10&#39;, Socket::AF_INET6)</code> also works."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 3960, "user_id": 326111, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/359024e7132672aaeef4a3e792be4ae5?s=128&d=identicon&r=PG", "display_name": "bswinnerton", "link": "https://stackoverflow.com/users/326111/bswinnerton"}, "edited": false, "score": 0, "creation_date": 1577724259, "post_id": 59532605, "comment_id": 105237885, "body": "Thanks. Worked that in. Actually, you don&#39;t even need to specify the address family, it can be detected automatically."}, {"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1577845549, "post_id": 59532605, "comment_id": 105268400, "body": "@J&#246;rgWMittag, the IPv6 Link-Local address prefix is <code>fe80::&#47;10</code>, but IPv6 Link-Local addresses are required to have the next 54 bits set to <code>0</code>, so Link-Local addresses are in the <code>fe80::&#47;64</code> network. See <i><a href=\"https://tools.ietf.org/html/rfc4291#section-2.5.6\" rel=\"nofollow noreferrer\">RFC 4291, IP Version 6 Addressing Architecture, Section 2.5.6. Link-Local IPv6 Unicast Addresses</a></i>."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 3, "last_activity_date": 1577870793, "last_edit_date": 1577870793, "creation_date": 1577717039, "answer_id": 59532605, "question_id": 59526832, "link": "https://stackoverflow.com/questions/59526832/converting-mac-address-to-ipv6-link-local-address-in-ruby/59532605#59532605", "title": "Converting mac address to IPv6 link local address in Ruby", "body": "<p>Here is your main problem: Ruby is an object-oriented language. You create programs by manipulating rich, structured objects, more precisely by telling rich, structured objects to manipulate themselves.</p>\n\n<p>You, however, are manipulating <code>String</code>s. Now, of course, <code>String</code>s are also objects in Ruby, but they are objects which represent <em>text</em>, they are not objects which represent <em>IP addresses</em> or EUIs.</p>\n\n<p>You should <em>at least</em> treat IP addresses or EUIs as <em>numbers</em>, not as text, but really, you should treat them as rich, structured IP address objects or EUI objects.</p>\n\n<p>Ruby actually comes with <a href=\"https://ruby-doc.org/stdlib/libdoc/ipaddr/rdoc/\" rel=\"nofollow noreferrer\">a library for manipulating IP addresses</a> as part of its <a href=\"https://ruby-doc.org/stdlib/\" rel=\"nofollow noreferrer\">standard library</a>.</p>\n\n<p>Here's an example of what it would look like to treat those addresses as numbers and/or objects:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'ipaddr'\n\neui48 = '00-16-3E-15-D3-A9'\n# eliminate all delimiters, note that only ':' is not enough; the standard is '-', but '.' is also sometimes used\neui48 = eui48.gsub(/[^0-9a-zA-Z]/, '')\n# parse the EUI-48 as a number\neui48 = eui48.to_i(16)\n\n# split the EUI-48 into the OUI and the manufacturer-assigned parts\noui, assigned = eui48.divmod(1 &lt;&lt; 24)\n\n# append 16 zero bits to the OUI\nleft = oui &lt;&lt; 16\n# add the standard bit sequence\nleft += 0xfffe\n# append 24 zero bits\nleft &lt;&lt;= 24\n\n# now we have an EUI-64\neui64 = left + assigned\n\n# flip bit index 57 to create a modified EUI-64\nmodified_eui64 = eui64 ^ 1 &lt;&lt; 57\n\n# the prefix for link-local IPv6 addresses is fe80::/10, link-local addresses are in the fe80::/64 network\nprefix = IPAddr.new('fe80::/64')\n\n# the suffix is based on our modified EUI-64\nsuffix = IPAddr.new(modified_eui64, Socket::AF_INET6)\n\n# the final result is the bitwise logical OR of the prefix and suffix\nlink_local_ipv6 = prefix | suffix\n\n# the IP address library knows how to correctly format an address according to RFC 5952 Section 4\nlink_local_ipv6.to_s\n#=&gt; 'fe80::216:3eff:fe15:d3a9'\n</code></pre>\n"}], "owner": {"reputation": 3960, "user_id": 326111, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/359024e7132672aaeef4a3e792be4ae5?s=128&d=identicon&r=PG", "display_name": "bswinnerton", "link": "https://stackoverflow.com/users/326111/bswinnerton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 2, "accepted_answer_id": 59532605, "answer_count": 1, "score": 1, "last_activity_date": 1577870793, "creation_date": 1577688736, "question_id": 59526832, "link": "https://stackoverflow.com/questions/59526832/converting-mac-address-to-ipv6-link-local-address-in-ruby", "title": "Converting mac address to IPv6 link local address in Ruby", "body": "<p>How can I convert a mac address like <code>00:16:3e:15:d3:a9</code> into an IPv6 link local address (as modified EUI-64, like <code>fe80::216:3eff:fe15:d3a9</code>) in Ruby?</p>\n\n<p>So far, I have the following steps:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>mac = \"00:16:3e:15:d3:a9\"\nmac.delete!(':')        # Delete colons\nmac.insert(6, 'fffe')   # Insert ff:ee in the middle\nmac = mac.scan(/.{4}/)  # Split into octets of 4\n</code></pre>\n\n<p>The <a href=\"http://www.tcpipguide.com/free/t_IPv6InterfaceIdentifiersandPhysicalAddressMapping-2.htm\" rel=\"nofollow noreferrer\">next step</a> would be to flip the sixth bit of the first octet, which I'm having trouble with.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 1692, "user_id": 9288619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6IK38.jpg?s=128&g=1", "display_name": "code_aks", "link": "https://stackoverflow.com/users/9288619/code-aks"}, "is_accepted": false, "score": 0, "last_activity_date": 1577692041, "last_edit_date": 1577692041, "creation_date": 1577683080, "answer_id": 59526021, "question_id": 59525849, "link": "https://stackoverflow.com/questions/59525849/how-to-add-pagination-on-dashboard-filter-by-status-in-rails/59526021#59526021", "title": "how to add pagination on dashboard filter by status in rails", "body": "<p>I think you can use includes for your requirement :-</p>\n\n<pre><code>def index\n   @project_sites = ProjectSite.includes(:manager_remarks).where(\"manager_remarks.decision =?\", true).order(\"project_sites.created_at DESC\").paginate(page: params[:page], per_page: 10)\nend\n</code></pre>\n\n<p>For more reference... <a href=\"https://apidock.com/rails/ActiveRecord/QueryMethods/includes\" rel=\"nofollow noreferrer\">#includes</a></p>\n"}], "owner": {"reputation": 3, "user_id": 12556644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72c533416489bc346a6385ed0a6cbf8?s=128&d=identicon&r=PG&f=1", "display_name": "rat007", "link": "https://stackoverflow.com/users/12556644/rat007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577695909, "creation_date": 1577681377, "last_edit_date": 1577695909, "question_id": 59525849, "link": "https://stackoverflow.com/questions/59525849/how-to-add-pagination-on-dashboard-filter-by-status-in-rails", "title": "how to add pagination on dashboard filter by status in rails", "body": "<p>I want to add pagination on a filtered manager_level_two_dashboard. manager_level_two_dashboard is filtered by decision if true it shows on the dashboard if false it won't appear in the dashboard. but when I add pagination to project_manager_two_controller it won't render the page properly. I want 10 list entry on project_manager_two_dashboard but it shows less list entry if decision status is set to false.</p>\n\n<p>project_manager_two_controller</p>\n\n<pre><code>   def index\n     @project_sites = ProjectSite.all.order(\"created_at DESC\").paginate(page: params[:page], per_page: 10)\n   end\n</code></pre>\n\n<p>project_manager_two_dashboard.html.erb</p>\n\n<pre><code>  &lt;% project_site.manager_remarks.each do |manager_remark| %&gt;\n    &lt;% if manager_remark.decision == true %&gt;\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 741, "user_id": 6894749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gbstY.jpg?s=128&g=1", "display_name": "Thang", "link": "https://stackoverflow.com/users/6894749/thang"}, "edited": false, "score": 0, "creation_date": 1577674368, "post_id": 59524899, "comment_id": 105221242, "body": "You misunderstood the rendering back-end side and front-end side so hard. Even if this JS part works, the paginate link won&#39;t be able to change the contact list as your expectation."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12073145"}, "reply_to_user": {"reputation": 741, "user_id": 6894749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gbstY.jpg?s=128&g=1", "display_name": "Thang", "link": "https://stackoverflow.com/users/6894749/thang"}, "edited": false, "score": 0, "creation_date": 1577674759, "post_id": 59524899, "comment_id": 105221310, "body": "So how do I do it then? What is the proper way to do this?"}, {"owner": {"reputation": 741, "user_id": 6894749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gbstY.jpg?s=128&g=1", "display_name": "Thang", "link": "https://stackoverflow.com/users/6894749/thang"}, "edited": false, "score": 0, "creation_date": 1577675456, "post_id": 59524899, "comment_id": 105221428, "body": "Can you share your contacts controller? (the backend part that returns @contacts and paginate @contacts)"}, {"owner": {"reputation": 741, "user_id": 6894749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gbstY.jpg?s=128&g=1", "display_name": "Thang", "link": "https://stackoverflow.com/users/6894749/thang"}, "edited": false, "score": 0, "creation_date": 1577675583, "post_id": 59524899, "comment_id": 105221443, "body": "and the html file of this page also"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12073145"}, "reply_to_user": {"reputation": 741, "user_id": 6894749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gbstY.jpg?s=128&g=1", "display_name": "Thang", "link": "https://stackoverflow.com/users/6894749/thang"}, "edited": false, "score": 0, "creation_date": 1577675718, "post_id": 59524899, "comment_id": 105221463, "body": "Thang: I updated the question above."}, {"owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "edited": false, "score": 0, "creation_date": 1577680701, "post_id": 59524899, "comment_id": 105222270, "body": "Where did you put your JS?"}], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 10043524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e81c8d061b996ff7555a797692ce7d7?s=128&d=identicon&r=PG&f=1", "display_name": "leafeve", "link": "https://stackoverflow.com/users/10043524/leafeve"}, "is_accepted": false, "score": 0, "last_activity_date": 1577703710, "creation_date": 1577703710, "answer_id": 59529719, "question_id": 59524899, "link": "https://stackoverflow.com/questions/59524899/rails-jquery-is-rendering-text-instead-of-collection/59529719#59529719", "title": "Rails jQuery is rendering text instead of collection", "body": "<p>you can't use <code>j render</code> outside .erb. Because <code>j render</code> is method of rails, your js just know it is string</p>\n\n<p>what you need are use script tag inside your html.erb, or use rails ajax. It is working as expected</p>\n\n<p>reference: <a href=\"https://stackoverflow.com/questions/35899433/how-to-render-partial-on-the-same-page-after-clicking-on-link-to-with-ajax\">How to render partial on the same page after clicking on link_to with AJAX</a></p>\n"}, {"tags": [], "owner": {"reputation": 54, "user_id": 4311690, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YIRVESeG5ns/AAAAAAAAAAI/AAAAAAAAAbY/Pu-ANqEzDlU/photo.jpg?sz=128", "display_name": "Fernando Luengo", "link": "https://stackoverflow.com/users/4311690/fernando-luengo"}, "is_accepted": false, "score": 0, "last_activity_date": 1577751340, "creation_date": 1577751340, "answer_id": 59538230, "question_id": 59524899, "link": "https://stackoverflow.com/questions/59524899/rails-jquery-is-rendering-text-instead-of-collection/59538230#59538230", "title": "Rails jQuery is rendering text instead of collection", "body": "<p>have you tried escape_javascript before calling render.</p>\n\n<p>something like:</p>\n\n<pre><code>&lt;%= escape_javascript render(my_partial) %&gt;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12073145"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577751340, "creation_date": 1577671126, "last_edit_date": 1577675700, "question_id": 59524899, "link": "https://stackoverflow.com/questions/59524899/rails-jquery-is-rendering-text-instead-of-collection", "title": "Rails jQuery is rendering text instead of collection", "body": "<p>I created a file inside my javascript folder \"load-contacts.js\" in hopes of trying to load the collections as well as the pagination via jquery.</p>\n\n<pre><code>$(document).on('turbolinks:load', function() {\n    $('#contacts').html(\"&lt;%= j render(@contacts) %&gt;\");\n    $('#paginator').html(\"&lt;%= j paginate @contacts, remote: true %&gt;\");\n  });\n</code></pre>\n\n<p>When I run this code it actually works and change the part where it intended to change. However, it is only rendering it as text as it instead of the collection and the pagination (kaminari gem).</p>\n\n<p>Here's how it looks like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/7p0Ul.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7p0Ul.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Any idea what am i missing here?</p>\n\n<p>UPDATES:</p>\n\n<p>Here's my contacts controller</p>\n\n<pre><code>class ContactsController &lt; ApplicationController\n\n  before_action :find_params, only: [:edit, :update, :destroy]\n\n  def index\n\n    # catch the group id from params in session\n    session[:selected_group_id] = params[:group_id]\n\n    @contacts = Contact.by_group(params[:group_id]).search(params[:term]).order(created_at: :desc).page params[:page]\n\n\nend \n\ndef autocomplete\n  @contacts = Contact.search(params[:term]).order(created_at: :desc).page(params[:page])\n  render json: @contacts.map { |contact| { id: contact.id, value: contact.name } }\nend\n\ndef new\n  @contact = Contact.new\nend \n\ndef create\n  @contact = Contact.new(contact_params)\n  if @contact.save\n    flash[:success] = \"Contact was successfully created.\"\n    redirect_to(previous_query_string)\n  else\n    render 'new' \n  end\nend \n\ndef edit\nend \n\ndef update\n  if @contact.update(contact_params)\n    flash[:success] = \"Contact successfully updated.\"\n    redirect_to(previous_query_string)\n  else\n    render 'edit'\n  end\nend \n\ndef destroy\n  @contact.destroy\n  flash[:success] = \"Contact successfuly deleted.\"\n  redirect_to contacts_path\nend \n\nprivate\n\ndef contact_params\n   params.require(:contact).permit(:name, :email, :phone, :mobile, :company, :address, :city, :state, :country, :zip, :group_id, :avatar)\nend \n\ndef find_params\n  @contact = Contact.find(params[:id])\nend\n\ndef previous_query_string\n  session[:selected_group_id] ? { group_id: session[:selected_group_id] } : {} \nend \n\n\nend\n</code></pre>\n\n<p>Here's the part for the kaminari gem pagination:</p>\n\n<pre><code> &lt;div class=\"card-footer\"&gt;\n                &lt;div class=\"pagination justify-content-center\" id=\"paginator\"&gt;\n              &lt;%= paginate @contacts, remote: true %&gt;\n           &lt;/div&gt;\n          &lt;/div&gt;\n</code></pre>\n\n<p>And here's where I am suppose to be rendering the contacts inside the views/contacts/index.html.erb:</p>\n\n<pre><code> &lt;table class=\"table\" id=\"contacts\"&gt;\n                 &lt;%= render partial: \"contact\", object: @contacts, remote: true %&gt;            \n              &lt;/table&gt;    \n</code></pre>\n"}, {"tags": ["ruby", "optparse"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1577675689, "post_id": 59524714, "comment_id": 105221458, "body": "When OptionParser is finished parsing and passes into your block, you know you have one parameter, which, by the convention you&#39;ve set up for your application, is the filename, so do a quick test to see if it exists, and then try opening it for whatever mode you want. It&#39;s a contract between you and the user of the software basically, that the filename is last. If you don&#39;t trust that contract, then how do you intend to prove that the last parameter isn&#39;t yours to use? That it doesn&#39;t meet the requirements for a filename? The banner is for you to set to specify that contract."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577710516, "post_id": 59524714, "comment_id": 105231889, "body": "In other words, after parsing, the stuff optparse parsed will be removed and ARGV will == [&#39;filename.ext&#39;]. Right, @theTinMan?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577730288, "post_id": 59524714, "comment_id": 105240059, "body": "IIRC it will be. That&#39;s the benefit of OptionParser, it streamlines all that stuff. There are alternatives but they&#39;re not part of the standard library."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577730858, "post_id": 59524714, "comment_id": 105240258, "body": "It&#39;s not entirely clear what the expectations are for OptionParser; What about the banner is OP not doing correctly? We need an example of what it&#39;s doing wrong and what the desired output would be."}], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1577732750, "last_edit_date": 1577732750, "creation_date": 1577731491, "answer_id": 59535481, "question_id": 59524714, "link": "https://stackoverflow.com/questions/59524714/ruby-optparse-enforce-filename-in-last-position/59535481#59535481", "title": "Ruby optparse: enforce filename in last position", "body": "<p>It's not clear what you're concerned about, but maybe this will help....</p>\n\n<p>Based on the <a href=\"https://ruby-doc.org/stdlib-2.7.0/libdoc/optparse/rdoc/OptionParser.html#class-OptionParser-label-Minimal+example\" rel=\"nofollow noreferrer\">minimal example</a> in the <a href=\"https://ruby-doc.org/stdlib-2.7.0/libdoc/optparse/rdoc/index.html\" rel=\"nofollow noreferrer\">OptionParser documentation</a>, I saved this code to disk, then ran it a couple times:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'optparse'\n\noptions = {}\nOptionParser.new do |opts|\n  opts.banner = \"Usage: example.rb [options]\"\n\n  opts.on(\"-o\", \"--[no-]overwrite\", \"Overwrite original file\") do |o|\n    options[:overwrite] = o\n  end\nend.parse!\n\np options\np ARGV\n</code></pre>\n\n<p>Running it with <code>ruby test.rb -o foo.bar</code> resulted in:</p>\n\n<pre><code>{:overwrite=&gt;true}\n[\"foo.bar\"]\n</code></pre>\n\n<p>so the filename is being left as part of <code>ARGV</code>, and doesn't require a flag.</p>\n\n<p>Running <code>ruby test.rb -h</code> resulted in:</p>\n\n<pre><code>Usage: example.rb [options]\n    -o, --[no-]overwrite             Overwrite original file\n</code></pre>\n\n<p>Which was dynamically generated.</p>\n\n<p>If you want the banner to say that the filename is required, simply modify the banner from:</p>\n\n<pre><code>opts.banner = \"Usage: example.rb [options]\"\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>opts.banner = \"Usage: example.rb [options] filename\"\n</code></pre>\n\n<p>and OptionParser will reflect that when using the <code>-h</code> flag:</p>\n\n<pre><code>Usage: example.rb [options] filename\n    -o, --[no-]overwrite             Overwrite original file\n</code></pre>\n\n<blockquote>\n  <p>I don't want to set the banner manually for help.</p>\n</blockquote>\n\n<p>But, that's the idiomatic way to reflect that the filename is required. OptionParser has no idea about the significance of trailing parameters and whether they're required or not, it only knows about flags you specify. Anything outside of the flags is optional and you have to code in any further tests:</p>\n\n<pre><code>Kernel.abort(\"Please supply the missing filename.\") if ARGV.empty?\n</code></pre>\n\n<p>after the parse block would be my starting point.</p>\n\n<p><a href=\"https://www.ruby-toolbox.com/categories/CLI_Option_Parsers?display=table&amp;order=score\" rel=\"nofollow noreferrer\">Alternatives</a> to OptionParser exist, but whether they are improvements is for you to figure out.</p>\n"}], "owner": {"reputation": 2383, "user_id": 832546, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/64e443d4da563dc877a68f57065f01f1?s=128&d=identicon&r=PG&f=1", "display_name": "hyde", "link": "https://stackoverflow.com/users/832546/hyde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577732750, "creation_date": 1577668443, "question_id": 59524714, "link": "https://stackoverflow.com/questions/59524714/ruby-optparse-enforce-filename-in-last-position", "title": "Ruby optparse: enforce filename in last position", "body": "<p>I want to enforce that a filename is always supplied as the <strong>last</strong> argument on top of the optional arguments that are passed in. How can I do this without using a filename switch?</p>\n\n<p>So I want to be able to do something like:</p>\n\n<pre><code>./program.rb -o file.xml\n</code></pre>\n\n<p>and <strong>not</strong></p>\n\n<pre><code>./program.rb -o -f file.xml\n</code></pre>\n\n<p>Currently I am doing the following, which works... but I want the banner to be also dynamic and based on the requirement of filename. I have realized this can be achieved using a bit more manual code inside the <code>OptionParser.new</code> but looking for more idiomatic way to do this. I don't want to set the banner manually for help.</p>\n\n<pre><code>require 'optparse'\nrequire 'ostruct'\n\noptions = OpenStruct.new\nopt_parser = OptionParser.new do |opts|\n  opts.on(\"-o\", \"--[no-]overwrite\", \"Overwrite original file\") do |o|\n    options.overwrite = o\n  end\n  opts.on(\"-h\", \"--help\", \"Prints this help\") do\n    puts opts\n    exit\n  end\nend\nopt_parser.parse!(ARGV)\n\nxml_file = ARGV.last\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 2138, "user_id": 3402754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f231d68bd842e08ed671e936de7badd6?s=128&d=identicon&r=PG&f=1", "display_name": "user3402754", "link": "https://stackoverflow.com/users/3402754/user3402754"}, "edited": false, "score": 0, "creation_date": 1577798299, "post_id": 59524407, "comment_id": 105258123, "body": "What are you trying to achieve? What have you done on your own so far? What do you need help figuring out? Can you add more code?"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1577665142, "post_id": 59524453, "comment_id": 105219839, "body": "This assumes a <code>belongs_to :user</code> on locker. And <code>findById</code> (even in its correct form <code>find_by_id</code>) has been deprecated since rails 4. But otherwise, yes, this is roughly the shape."}, {"owner": {"reputation": 49, "user_id": 11231142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6521790d4e29e8127ca7d61600ed1e5?s=128&d=identicon&r=PG&f=1", "display_name": "albert", "link": "https://stackoverflow.com/users/11231142/albert"}, "edited": false, "score": 0, "creation_date": 1577666211, "post_id": 59524453, "comment_id": 105220029, "body": "It is similar to what I am trying to do but how will my view look like?"}], "tags": [], "owner": {"reputation": 630, "user_id": 5763672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3ca5c235400320ab800200c6677574?s=128&d=identicon&r=PG", "display_name": "Sebastian Scholl", "link": "https://stackoverflow.com/users/5763672/sebastian-scholl"}, "is_accepted": false, "score": -1, "last_activity_date": 1577664926, "creation_date": 1577664926, "answer_id": 59524453, "question_id": 59524407, "link": "https://stackoverflow.com/questions/59524407/how-to-assign-user-id-to-an-item/59524453#59524453", "title": "How to assign User_id to an item", "body": "<p>Make a controller method for updating the locker with the current user.</p>\n\n<p>Put /lockers/[locker_id]</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def update\n  locker = Locker.findById(params[:locker_id])\n  locker.user = current_user\n\n  if locker.save\n    head 200\n  else\n    head 422\n  end\nend\n</code></pre>\n\n<p>That's really ugly code that makes a few assumptions... but is it not what you're trying to do?</p>\n"}], "owner": {"reputation": 49, "user_id": 11231142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6521790d4e29e8127ca7d61600ed1e5?s=128&d=identicon&r=PG&f=1", "display_name": "albert", "link": "https://stackoverflow.com/users/11231142/albert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577925228, "creation_date": 1577664376, "last_edit_date": 1577925228, "question_id": 59524407, "link": "https://stackoverflow.com/questions/59524407/how-to-assign-user-id-to-an-item", "title": "How to assign User_id to an item", "body": "<p>So I have locker model which is just a basic scaffold</p>\n\n<pre><code>  def change\n    create_table :lockers do |t|\n      t.references :user\n      t.integer :lockerNo\n      t.string :wing\n      t.string :sttatus\n      t.string :comment\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>and also a user model which is just basic devise.</p>\n\n<p>I want users to be able to select a locker they want,</p>\n\n<p>So I want to list all the lockers and then users click on Select button and then the locker gets assigned to the user i.e the locker_id updates to the current user</p>\n\n<p>This is my controller</p>\n\n<pre><code>  before_action :set_locker, only: [:show, :edit, :update, :destroy]\n\n  # GET /lockers\n  # GET /lockers.json\n  def index\n    @lockers = Locker.all\n  end\n\n  # POST /lockers\n  # POST /lockers.json\n  def create\n    @locker = Locker.new(locker_params)\n\n    respond_to do |format|\n      if @locker.save\n        format.html { redirect_to @locker, notice: 'Locker was successfully created.' }\n        format.json { render :show, status: :created, location: @locker }\n      else\n        format.html { render :new }\n        format.json { render json: @locker.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /lockers/1\n  # PATCH/PUT /lockers/1.json\n  def update\n    respond_to do |format|\n      if @locker.update(locker_params)\n        format.html { redirect_to @locker, notice: 'Locker was successfully updated.' }\n        format.json { render :show, status: :ok, location: @locker }\n      else\n        format.html { render :edit }\n        format.json { render json: @locker.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def assign_locker\n    if @locker.sttatus = Available\n      @locker = Locker.find(params[:id])\n      @locker.user_id = current_user.id\n      @locker.save\n    end\n\n    redirect_to root_path\n  end\n\n  private\n    def set_locker\n      @locker = Locker.find(params[:id])\n    end\n\n    def locker_params\n      params.require(:locker).permit(:user_id, :lockerNo, :wing, :sttatus, :comment)\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "forms"], "comments": [{"owner": {"reputation": 1330, "user_id": 887947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace01b4b1b5759067b48b6b074902e65?s=128&d=identicon&r=PG", "display_name": "Ben Trewern", "link": "https://stackoverflow.com/users/887947/ben-trewern"}, "edited": false, "score": 0, "creation_date": 1577667606, "post_id": 59524330, "comment_id": 105220223, "body": "Could you add your User model (at least the relationships part)."}], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 10043524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e81c8d061b996ff7555a797692ce7d7?s=128&d=identicon&r=PG&f=1", "display_name": "leafeve", "link": "https://stackoverflow.com/users/10043524/leafeve"}, "is_accepted": false, "score": 0, "last_activity_date": 1577691072, "creation_date": 1577691072, "answer_id": 59527210, "question_id": 59524330, "link": "https://stackoverflow.com/questions/59524330/my-rails-app-is-not-saving-data-to-the-database/59527210#59527210", "title": "My Rails app is not saving data to the database", "body": "<p>I think your problems in your form. Recheck your params ( household_type ), it must have a value when submit.</p>\n\n<p>And another way, if you want update difference model based on current model, you should use <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\" rel=\"nofollow noreferrer\">Active Record Nested Attributes</a> </p>\n"}], "owner": {"reputation": 23, "user_id": 11715600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a853cb598fd2538fff94de8b7b611fc?s=128&d=identicon&r=PG&f=1", "display_name": "Maxx", "link": "https://stackoverflow.com/users/11715600/maxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577691072, "creation_date": 1577663519, "question_id": 59524330, "link": "https://stackoverflow.com/questions/59524330/my-rails-app-is-not-saving-data-to-the-database", "title": "My Rails app is not saving data to the database", "body": "<p>I am currently creating a rails form. Up until now it has been passing data to the database with ease. Recently, however it no longer finds any of the data I need in the database, it can only find the user table and none of the connected tables. </p>\n\n<p>Here is a partial of my form:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;h1&gt;Energy Assistance Application&lt;/h1&gt;\n&lt;br /&gt;\n\n&lt;%= form_for(@user) do |f| %&gt;\n\n  &lt;%= render 'county_fields', f: f%&gt;\n\n  &lt;%= render 'contact_info_fields', f: f %&gt;\n\n  &lt;%= render 'household_members_fields', f: f%&gt;\n\n  &lt;%= render 'household_type_fields', f: f%&gt;\n\n</code></pre>\n\n<p>Here is part of my controller:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>  def create\n    addresses = params[:addresses].permit([:county]).to_h\n    contact_info = params[:contact_info].permit(params[:contact_info].keys).to_h\n    household = params[:household_type].permit([:house_type]).to_h\n    household_members = member_params\n    utilities = utility_params\n    dhis = dhi_params\n    @workflow = CreatesUser.new(address_info: addresses,\n      contact: contact_info, household: household, members: household_members, utilities: utilities, dhis: dhis)\n    @workflow.create\n    redirect_to users_path\n  end\n\n</code></pre>\n\n<p>CreatesUser:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>\n  def initialize(address_info: [], has_mail: false, contact: [], household: [], members: [],\n      utilities: [], dhis: [])\n    @address_info = address_info\n    @contact = contact\n    @household = household\n    @members = members[\"household_members_attributes\"]\n    @utilities = utilities[\"utilities_attributes\"]\n    @dhis = dhis[\"dhis_attributes\"]\n  end\n\n  def build\n    self.user = User.new(startdate: Time.zone.today)\n    user.addresses = get_addresses\n    user.contact_info = get_contact\n    user.household_type = get_household\n    user.household_members = get_members\n    user.utilities = get_utilities\n    user.dhis = get_dhis\n    user\n  end\n\n  def create\n    build \n    result = user.save\n    result ? print(\"Saved!\\n\") : print(\"Failed!\\n\")\n  end\n</code></pre>\n\n<p>My index.html.erb:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;h1&gt;All Users&lt;/h1&gt;\n&lt;% @users.each do |user|%&gt;\n  &lt;%= user.utilities%&gt;\n  &lt;ul&gt;\n    &lt;li&gt;County: \n      &lt;% user.addresses.each do |address|%&gt;\n        &lt;%=address.county%&gt;\n      &lt;%end%&gt;\n    &lt;/li&gt;\n    &lt;% if !user.contact_info.nil? %&gt;   \n      &lt;li&gt;Phone: &lt;%= user.contact_info.phone%&gt;&lt;/li&gt;\n      &lt;li&gt;Phone Type:&lt;%= user.contact_info.phone_type%&gt;&lt;/li&gt;\n      &lt;li&gt;Email: &lt;%= user.contact_info.email%&gt;&lt;/li&gt;\n    &lt;%end%&gt;\n    &lt;li&gt;Household: &lt;%= user.household_type.house_type%&gt;&lt;/li&gt;  \n  &lt;/ul&gt;\n</code></pre>\n\n<p>When the workflow creates, it saves successfully, but when I run my index I get this error:</p>\n\n<pre><code>Completed 500 Internal Server Error in 19ms (ActiveRecord: 1.1ms)\n\n\n\nActionView::Template::Error (undefined method `house_type' for nil:NilClass):\n    12:       &lt;li&gt;Phone Type:&lt;%= user.contact_info.phone_type%&gt;&lt;/li&gt;\n    13:       &lt;li&gt;Email: &lt;%= user.contact_info.email%&gt;&lt;/li&gt;\n    14:     &lt;%end%&gt;\n    15:     &lt;li&gt;Household: &lt;%= user.household_type.house_type%&gt;&lt;/li&gt;  \n    16:   &lt;/ul&gt;\n    17: \n    18:   &lt;h3&gt; Household Members &lt;/h3&gt;\n\napp/views/users/index.html.erb:15:in `block in _app_views_users_index_html_erb___590344624549979162_70244223831340'\n</code></pre>\n\n<p>I do not know why this is happening, even when I go back to older branches that used to work, they also fail here.\nThank you for any help you can give me. If you need more info, I will happily give it to you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-2.6"], "comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1577662020, "post_id": 59524017, "comment_id": 105219354, "body": "What&#39;s on line 7 of <code>config&#47;application.rb</code> and what&#39;s it supposed to do?"}], "answers": [{"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 1, "last_activity_date": 1577688606, "last_edit_date": 1577688606, "creation_date": 1577662548, "answer_id": 59524243, "question_id": 59524017, "link": "https://stackoverflow.com/questions/59524017/whitelist-classes-error-when-running-rspec-with-ruby-2-6-5/59524243#59524243", "title": "whitelist_classes error when running rspec with ruby 2.6.5", "body": "<p>My guess is there's a call to <code>Psych.safe_load</code> somewhere. Its interface changed between <a href=\"https://ruby-doc.org/stdlib-2.5.7/libdoc/psych/rdoc/Psych.html#method-c-safe_load\" rel=\"nofollow noreferrer\">2.5.7</a> and <a href=\"https://ruby-doc.org/stdlib-2.6.5/libdoc/psych/rdoc/Psych.html#method-c-safe_load\" rel=\"nofollow noreferrer\">2.6.5</a>. 2.5.7 takes <code>whitelist_classes</code> and <code>whitelist_symbols</code> as keyword arguments but 2.6.5 has changed them to <code>permitted_classes</code> and <code>permitted_symbols</code> breaking the interface.</p>\n\n<p>It's possible you need to upgrade <code>Bundler</code> or another gem which uses <code>Psych</code>. You can try searching your gem sources for <code>whitelist_classes</code>. If you use RVM that will be <code>$HOME/.rvm/gems/ruby-2.6.5/gems/</code>.</p>\n"}], "owner": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 59524243, "answer_count": 1, "score": 1, "last_activity_date": 1577691503, "creation_date": 1577660022, "last_edit_date": 1577691503, "question_id": 59524017, "link": "https://stackoverflow.com/questions/59524017/whitelist-classes-error-when-running-rspec-with-ruby-2-6-5", "title": "whitelist_classes error when running rspec with ruby 2.6.5", "body": "<p>When I upgraded from <code>ruby 2.5.7</code> to <code>ruby 2.6.5</code> with a <code>rails 6.0.2</code> app, then all the rspec tests fail. An example error is</p>\n\n<pre><code>An error occurred while loading ./spec/models/account_spec.rb.\nFailure/Error: require File.expand_path('../../config/environment', __FILE__)\n\nArgumentError:\n  unknown keywords: whitelist_classes, whitelist_symbols\n# ./config/application.rb:7:in `&lt;top (required)&gt;'\n# ./config/environment.rb:2:in `require_relative'\n# ./config/environment.rb:2:in `&lt;top (required)&gt;'\n# ./spec/rails_helper.rb:2:in `&lt;top (required)&gt;'\n# ./spec/models/account_spec.rb:1:in `&lt;top (required)&gt;'\nNo examples found.\n</code></pre>\n\n<p>Line 7 of <code>application.rb</code> is</p>\n\n<pre><code>Bundler.require(*Rails.groups)\n</code></pre>\n\n<p>I suspect I need to upgrade one or more of the gems. How do I fix this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1577657764, "post_id": 59523676, "comment_id": 105218528, "body": "Looking at your screenshot, I think the problem is the <code>\\n</code>. Did you copy/paste this code to your environment?"}, {"owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "edited": false, "score": 0, "creation_date": 1577658279, "post_id": 59523676, "comment_id": 105218633, "body": "That syntax error should include a &quot;stack trace&quot;, showing the filepaths and line numbers that were executed leading up to the error. The top of the trace is the last line executed, and generally the problem line. Could you include that stack trace as well as indicate the lines in your code example?"}], "answers": [{"comments": [{"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "reply_to_user": {"reputation": 39, "user_id": 11881493, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sPnUv.jpg?s=128&g=1", "display_name": "Erik Garcia Rosa", "link": "https://stackoverflow.com/users/11881493/erik-garcia-rosa"}, "edited": false, "score": 0, "creation_date": 1577659018, "post_id": 59523832, "comment_id": 105218797, "body": "@ErikGarciaRosa, you are welcome. I added brief information about syntax to my answer"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1577659760, "post_id": 59523832, "comment_id": 105218937, "body": "<i>wrong syntax in <code>if</code> condition (don&#39;t need to use <code>=</code>)</i> I wouldn&#39;t call this wrong in the sense that the syntax is valid. It&#39;s possible for an <code>if</code> expression to return something that one would be interested in. In this case, the OP did not intend that (your comment, <i>didn&#39;t need to use</i>, is accurate). But it&#39;s still valid syntax."}, {"owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1577661111, "post_id": 59523832, "comment_id": 105219198, "body": "@lurker you are right. But it&#39;s specific answer to specific question. In this context it&#39;s wrong. That&#39;s why syntax error occurred"}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": true, "score": 1, "last_activity_date": 1577658958, "last_edit_date": 1577658958, "creation_date": 1577658412, "answer_id": 59523832, "question_id": 59523676, "link": "https://stackoverflow.com/questions/59523676/ruby-on-rails-encountered-a-syntax-error-while-rendering-template/59523832#59523832", "title": "Ruby on Rails: Encountered a syntax error while rendering template:", "body": "<p>Here two problems:</p>\n\n<ul>\n<li><p>wrong syntax in <code>if</code> condition (don't need to use <code>=</code>)</p></li>\n<li><p>extra <code>\\n</code> chars in your screenshot</p></li>\n</ul>\n\n<p>Change your 5 line in <code>app/view/articles/new.html.erb</code> to:</p>\n\n<pre><code>&lt;% if @article.errors.any? %&gt;\n</code></pre>\n\n<p><code>&lt;% %&gt;</code> executes Ruby code</p>\n\n<p><code>&lt;%= %&gt;</code> executes Ruby code and prints out</p>\n\n<p>Also read about the difference <a href=\"https://stackoverflow.com/questions/7996695\">on SO</a></p>\n"}], "owner": {"reputation": 39, "user_id": 11881493, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sPnUv.jpg?s=128&g=1", "display_name": "Erik Garcia Rosa", "link": "https://stackoverflow.com/users/11881493/erik-garcia-rosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1150, "favorite_count": 0, "accepted_answer_id": 59523832, "answer_count": 1, "score": 1, "last_activity_date": 1577658958, "creation_date": 1577656877, "question_id": 59523676, "link": "https://stackoverflow.com/questions/59523676/ruby-on-rails-encountered-a-syntax-error-while-rendering-template", "title": "Ruby on Rails: Encountered a syntax error while rendering template:", "body": "<p>Good night.\nI'm doing the getting started guide of RoR, but I have a trouble:\nWhen I click the New Article button that redirects to the form, Rails throw an 'Encountered a syntax error while rendering template.'\nThe new.html.erb code is</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;h1&gt;New Article&lt;/h1&gt;\n\n&lt;%= form_with scope: :article, url: articles_path, local: true do |form| %&gt;\n\n&lt;%= if @article.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n        &lt;h2&gt;\n            &lt;%= pluralize(@article.errors.count, \"error\") %&gt;\n            prohibited this article from being saved:\n        &lt;/h2&gt;\n        &lt;ul&gt;\n            &lt;% @article.errors.full_messages.each do |msg| %&gt;\n                &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;\n            &lt;% end %&gt;\n        &lt;/ul&gt;\n    &lt;/div&gt;\n&lt;% end %&gt;\n\n    &lt;P&gt;\n        &lt;%= form.label :title %&gt;&lt;br&gt;\n        &lt;%= form.text_field :title %&gt;\n    &lt;/p&gt;\n\n    &lt;p&gt;\n        &lt;%= form.label :text %&gt;&lt;br&gt;\n        &lt;%= form.text_area :text %&gt;\n    &lt;/p&gt;\n\n    &lt;p&gt;\n        &lt;%= form.submit %&gt;\n    &lt;/p&gt;\n&lt;% end %&gt;\n\n&lt;%= link_to 'Back', articles_path %&gt;\n</code></pre>\n\n<p>The code is the same as the guide's code, so i don't know where the error or errors can be.\nI also attach the error screenshot if it's any help.\n<a href=\"https://i.stack.imgur.com/X627h.png\" rel=\"nofollow noreferrer\">Rails error message when I want tho create a new Article</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "edited": false, "score": 0, "creation_date": 1577655848, "post_id": 59523378, "comment_id": 105218118, "body": "In Rails 5 or greater you can add <code>has_secure_token :my_secure_token</code> to your model. Just make sure you have a column name that correlates with <code>:my_secure_token</code>."}, {"owner": {"reputation": 2388, "user_id": 3655580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58695ea14f641ae7e2f15b34434fd6a0?s=128&d=identicon&r=PG&f=1", "display_name": "edariedl", "link": "https://stackoverflow.com/users/3655580/edariedl"}, "edited": false, "score": 0, "creation_date": 1577660421, "post_id": 59523378, "comment_id": 105219065, "body": "Why do you need it? You can probably use just SecureRandom <a href=\"https://ruby-doc.org/stdlib-2.7.0/libdoc/securerandom/rdoc/SecureRandom.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.7.0/libdoc/securerandom/rdoc/&hellip;</a>"}, {"owner": {"reputation": 28567, "user_id": 815724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a514cd424088a3ba3012f5d77f2e334?s=128&d=identicon&r=PG", "display_name": "Peter O.", "link": "https://stackoverflow.com/users/815724/peter-o"}, "edited": false, "score": 0, "creation_date": 1577692558, "post_id": 59523378, "comment_id": 105225143, "body": "You should edit your question to answer the six questions I give in &quot;<a href=\"https://peteroupc.github.io/random.html#Unique_Random_Identifiers\" rel=\"nofollow noreferrer\">Unique Random Identifiers</a>&quot;, as they will help you decide how best to generate unique identifiers.  For example, do these numbers have to be hard to guess? If not, why not just use sequentially assigned values (such as auto-incrementing rows if your database supports them)?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1577716342, "post_id": 59523378, "comment_id": 105234459, "body": "Why would you want to replicate <code>uniqueid</code>? Like most of the PHP stdlib its freaking horrible at its job. Use <code>SecureRandom#uuid</code> or the <code>pg_cryto</code> extension and <code>uuid</code> type columns if you are using Postgres."}], "owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1577654282, "creation_date": 1577654282, "question_id": 59523378, "link": "https://stackoverflow.com/questions/59523378/rails-what-is-the-best-way-to-create-a-unique-id-based-on-the-microtime-the-sa", "title": "Rails - what is the best way to create a unique ID based on the microtime the same as uniqueid() in PHP?", "body": "<p>In <strong>Ruby on Rails</strong>, what is the best way to create a <code>unique ID based on the micro time</code> the same as <code>uniqueid()</code> in <strong>PHP</strong>?</p>\n"}, {"tags": ["ruby", "jekyll", "bundler"], "comments": [{"owner": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 0, "creation_date": 1577700316, "post_id": 59523309, "comment_id": 105227701, "body": "What\u2019s in your <code>Gemfile</code>? The primary purpose of <code>bundle exec</code> is to run a program with only those gems in scope, so if the file lists an old version that is the one that will be used, regardless of what else is installed."}, {"owner": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 0, "creation_date": 1577700668, "post_id": 59523309, "comment_id": 105227840, "body": "I can see from your <a href=\"https://github.com/angoodkind/angoodkind.github.io/blob/master/Gemfile.lock\" rel=\"nofollow noreferrer\">Gemfile.lock</a> that it\u2019s still referencing 3.5.2. <code>bundle update</code> can help you with that."}], "owner": {"reputation": 6384, "user_id": 823859, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a312155705e2fa1ce28841ddf6645da0?s=128&d=identicon&r=PG", "display_name": "Adam_G", "link": "https://stackoverflow.com/users/823859/adam-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1578719536, "creation_date": 1577653708, "question_id": 59523309, "link": "https://stackoverflow.com/questions/59523309/bundle-using-old-version-of-jekyll", "title": "Bundle using old version of jekyll", "body": "<p>I am trying to preview a site I have built in the past, using jekyll. Since then, I believe there have been updates to jekyll, and I now use <code>zsh</code> on MacOS 10.15.2. I'm having trouble now running a preview because it seems <code>bundle</code> keeps using an old version of <code>jekyll</code>. </p>\n\n<p>When I run <code>bundle exec jekyll server --unpublished</code> I receive this error:</p>\n\n<pre><code>(base) \u279c  angoodkind.github.io git:(master) \u2717 bundle exec jekyll server --unpublished\nConfiguration file: /Users/adamg/Dropbox/Website/github_io/angoodkind.github.io/_config.yml\nNOTE: Inheriting Faraday::Error::ClientError is deprecated; use Faraday::ClientError instead. It will be removed in or after version 1.0\nFaraday::Error::ClientError.inherited called from /Users/adamg/Dropbox/Website/github_io/angoodkind.github.io/vendor/cache/ruby/2.6.0/gems/octokit-4.14.0/lib/octokit/middleware/follow_redirects.rb:14.\n            Source: /Users/adamg/Dropbox/Website/github_io/angoodkind.github.io\n       Destination: /Users/adamg/Dropbox/Website/github_io/angoodkind.github.io/_site\n Incremental build: disabled. Enable with --incremental\n      Generating...\nError reading file /Users/adamg/Dropbox/Website/github_io/angoodkind.github.io/blog/index.html: (&lt;unknown&gt;): did not find expected key while parsing a block mapping at line 7 column 5\n             Error: could not read file /Users/adamg/Dropbox/Website/github_io/angoodkind.github.io/vendor/cache/ruby/2.6.0/gems/jekyll-3.5.2/lib/site_template/_posts/0000-00-00-welcome-to-jekyll.markdown.erb: Invalid date '&lt;%= Time.now.strftime('%Y-%m-%d %H:%M:%S %z') %&gt;': Document 'vendor/cache/ruby/2.6.0/gems/jekyll-3.5.2/lib/site_template/_posts/0000-00-00-welcome-to-jekyll.markdown.erb' does not have a valid date in the YAML front matter.\n             ERROR: YOUR SITE COULD NOT BE BUILT:\n                    ------------------------------------\n                    Invalid date '&lt;%= Time.now.strftime('%Y-%m-%d %H:%M:%S %z') %&gt;': Document 'vendor/cache/ruby/2.6.0/gems/jekyll-3.5.2/lib/site_template/_posts/0000-00-00-welcome-to-jekyll.markdown.erb' does not have a valid date in the YAML front matter.\n</code></pre>\n\n<p>However, the system should be using jekyll 4.0.0, which was recently installed. Why is it using jekyll 3.5.2?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authentication", "devise"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577652011, "post_id": 59522366, "comment_id": 105217281, "body": "Welcome to SO! Use emphasis sparingly  You can put things in boldface or italics, but do this only when it is really necessary. Emphasis is used to draw extra attention to something. If almost everything demands extra attention, then nothing will get extra attention.  As a rule of thumb, before putting something in boldface or italics, ask yourself: if I could put only one thing in this post in boldface or italics, would it be this? If the answer is no, then don&#39;t.  <a href=\"https://meta.stackoverflow.com/q/303219/128421\">meta.stackoverflow.com/q/303219/128421</a>"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 7884638, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RYYOSAvWBfc/AAAAAAAAAAI/AAAAAAAAAAo/41XWVHLeMiM/photo.jpg?sz=128", "display_name": "Henrique Fernandez Teixeira", "link": "https://stackoverflow.com/users/7884638/henrique-fernandez-teixeira"}, "edited": false, "score": 0, "creation_date": 1577727516, "post_id": 59523851, "comment_id": 105239076, "body": "I did what you say of add skip_before_action :verify_authenticity_token to my ApplicationController. It works, but now i conclude: it&#39;s not a Devise but a Rails problem. I got the same issue out devise controllers. And not it all, now in some controllers i&#39;m getting this error:  <b>Before process_action callback :verify_authenticity_token has not been defined</b>  My RAILS_ENV  is development in all machines"}], "tags": [], "owner": {"reputation": 10088, "user_id": 2317928, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/61GAZ.jpg?s=128&g=1", "display_name": "steel", "link": "https://stackoverflow.com/users/2317928/steel"}, "is_accepted": false, "score": 1, "last_activity_date": 1577658581, "creation_date": 1577658581, "answer_id": 59523851, "question_id": 59522366, "link": "https://stackoverflow.com/questions/59522366/devise-works-different-in-two-machines-with-exactly-the-same-code-and-configurat/59523851#59523851", "title": "Devise works different in two machines with exactly the same code and configuration", "body": "<p>Sounds like you're on Rails 6? Rails 6 attempts to verify an authenticity token by default in production mode. I would guess that on the VPS your application is running in production mode, and trying to protect you from CSRF attacks, which it does not do in development mode, which is how it is running on localhost. You can confirm if I'm right a few ways, but if I am then adding <code>skip_before_action :verify_authenticity_token</code> to your <code>ApplicationController</code> should make the problem go away on your VPS solution. </p>\n\n<p>Another option for development on your VPS would be firing up your Rails server in development mode: <code>RAILS_ENV=development bundle exec rails s</code></p>\n"}], "owner": {"reputation": 53, "user_id": 7884638, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RYYOSAvWBfc/AAAAAAAAAAI/AAAAAAAAAAo/41XWVHLeMiM/photo.jpg?sz=128", "display_name": "Henrique Fernandez Teixeira", "link": "https://stackoverflow.com/users/7884638/henrique-fernandez-teixeira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577658581, "creation_date": 1577645712, "last_edit_date": 1577652668, "question_id": 59522366, "link": "https://stackoverflow.com/questions/59522366/devise-works-different-in-two-machines-with-exactly-the-same-code-and-configurat", "title": "Devise works different in two machines with exactly the same code and configuration", "body": "<p>I'm using Ruby 2.6.5 and Rails 5.2.2.</p>\n\n<p>I'm very confused about Devise behavior. First, I had my project working in my localhost. The error began when I tried to put the project in a VPS. </p>\n\n<p>The same code with the same gem versions and same operational systems works differently in two different machines, the VPS and my localhost.</p>\n\n<p>The VPS:</p>\n\n<pre><code>    devise (4.7.1)\n      bcrypt (~&gt; 3.0)\n      orm_adapter (~&gt; 0.1)\n      railties (&gt;= 4.1.0)\n      responders\n      warden (~&gt; 1.2.3)\n    devise-i18n (1.8.2)\n      devise (&gt;= 4.6)\n</code></pre>\n\n<p>Entering in /users/sign_in:</p>\n\n<p><a href=\"https://i.stack.imgur.com/giptk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/giptk.png\" alt=\"enter image description here\"></a></p>\n\n<p>After log in:</p>\n\n<p><a href=\"https://i.stack.imgur.com/7SUum.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7SUum.png\" alt=\"enter image description here\"></a></p>\n\n<p>And the localhost:</p>\n\n<pre><code>    devise (4.7.1)\n      bcrypt (~&gt; 3.0)\n      orm_adapter (~&gt; 0.1)\n      railties (&gt;= 4.1.0)\n      responders\n      warden (~&gt; 1.2.3)\n    devise-i18n (1.8.2)\n      devise (&gt;= 4.6)\n</code></pre>\n\n<p>Entering in /users/sign_in:</p>\n\n<p><a href=\"https://i.stack.imgur.com/giptk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/giptk.png\" alt=\"enter image description here\"></a></p>\n\n<p>After log in:</p>\n\n<p><a href=\"https://i.stack.imgur.com/lvisX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lvisX.png\" alt=\"enter image description here\"></a></p>\n\n<p>The code:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Admin::HomeController &lt; ApplicationController\n  layout 'admin'\n\n  before_action :authenticate_user!\n  before_action :set_title\n\n  def index\n  end\n\n  private\n\n    def set_title\n      @title = 'Home'\n    end\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Admin::User &lt; ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable, :trackable and :omniauthable\n  devise :database_authenticatable,\n         :recoverable, :rememberable, :validatable\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code># frozen_string_literal: true\n\nclass Admin::User::SessionsController &lt; ::Devise::SessionsController\n  layout 'login'\n\n  # before_action :configure_sign_in_params, only: [:create]\n\n  # GET /resource/sign_in\n  # def new\n  #   super\n  # end\n\n  # POST /resource/sign_in\n  # def create\n  #   super\n  # end\n\n  # DELETE /resource/sign_out\n  # def destroy\n  #   super\n  # end\n\n  # protected\n\n  # If you have extra params to permit, append them to the sanitizer.\n  # def configure_sign_in_params\n  #   devise_parameter_sanitizer.permit(:sign_in, keys: [:attribute])\n  # end\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Rails.application.routes.draw do\n  devise_for :clients, controllers: {\n    sessions: 'clients/sessions',\n    confirmations: 'clients/confirmations',\n    omniauth: 'clients/omniauth',\n    registrations: 'clients/registrations',\n    passwords: 'clients/passwords',\n    unlocks: 'clients/unlocks'\n  }\n\n  #\n  # \u00c1rea do cliente\n  #\n  devise_scope :client do\n    get 'area-do-cliente/entrar', to: 'clients/sessions#new'\n    get 'area-do-cliente/meus-dados', to: 'clients/registrations#edit'\n  end\n\n  get 'area-do-cliente/pedidos', to: 'clients/orders#index', as: 'client_orders'\n\n  devise_for :users,\n             class_name: \"Admin::User\",\n             controllers: {\n    sessions: 'admin/user/sessions',\n    confirmations: 'admin/user/confirmations',\n    omniauth: 'admin/user/omniauth',\n    registrations: 'admin/user/registrations',\n    passwords: 'admin/user/passwords',\n    unlocks: 'admin/user/unlocks'\n  }\n\n  namespace :admin do\n    root 'home#index'\n\n# Some other routes ...\n</code></pre>\n\n<p>I solved the VPS authenticity problem. Now it doesn't throw the error, but when I log in it redirects to the <em>wrong path</em> (not the admin root), and with <code>current_user</code> <code>nil</code>.</p>\n\n<p>There are a lot of questions with the Devise authenticity problem and they say to put this in the controller:</p>\n\n<pre><code>protect_from_forgery\n</code></pre>\n\n<p>and I did, but now after log in <code>current_user</code> is <code>nil</code>.</p>\n\n<p>The one thing different between the two environments, is that in the VPS I had Nginx with this config:</p>\n\n<pre><code>server {\n    listen 80;\n    listen [::]:80;\n\n    server_name vps12441.publiccloud.com.br;\n\n    location / {\n        proxy_pass http://127.0.0.1:3000;\n    }\n}\n</code></pre>\n\n<p>Why are devise getting different behaviors with exactly the same code (and application configuration) in two different machines?</p>\n\n<p>How can I make it work?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1577641832, "post_id": 59520784, "comment_id": 105214611, "body": "Is inheritance from Hash an option?"}, {"owner": {"reputation": 557, "user_id": 5527374, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/OQmV2.png?s=128&g=1", "display_name": "tscheingeld", "link": "https://stackoverflow.com/users/5527374/tscheingeld"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1577643948, "post_id": 59520784, "comment_id": 105215154, "body": "@spickermann No, I&#39;m doing some heavy duty monkeypatching. The hash object needs to stay a hash object. I&#39;m gutting its methods like an alien taking over a person&#39;s mind."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1577644928, "post_id": 59520784, "comment_id": 105215398, "body": "Any reason you can&#39;t use <a href=\"https://ruby-doc.org/stdlib/libdoc/delegate/rdoc/Delegator.html\" rel=\"nofollow noreferrer\"><code>Delegator</code></a> from the standard library? Or inherit from <code>BasicObject</code> and manually forward everything using <code>method_missing</code>."}, {"owner": {"reputation": 557, "user_id": 5527374, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/OQmV2.png?s=128&g=1", "display_name": "tscheingeld", "link": "https://stackoverflow.com/users/5527374/tscheingeld"}, "edited": false, "score": 0, "creation_date": 1577645710, "post_id": 59520784, "comment_id": 105215615, "body": "What&#39;s going to happen is that the function accepts a hash as an argument. The function then monkeypatches the hash so that most of its methods do something else, but still return values as if it were a normal hash. But it&#39;s crucial that the hash object is still in use --  the function does not return anything, it just changes the input hash. It&#39;s sort of a business requirement."}, {"owner": {"reputation": 557, "user_id": 5527374, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/OQmV2.png?s=128&g=1", "display_name": "tscheingeld", "link": "https://stackoverflow.com/users/5527374/tscheingeld"}, "edited": false, "score": 0, "creation_date": 1577646458, "post_id": 59520784, "comment_id": 105215809, "body": "Anyway, this is really just a golf question. I&#39;ve had no difficulty redefining the hash&#39;s methods - it just seems like there should be a cleaner way to do it."}], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1577723060, "last_edit_date": 1577723060, "creation_date": 1577722455, "answer_id": 59533749, "question_id": 59520784, "link": "https://stackoverflow.com/questions/59520784/delegate-methods-for-instance-of-object-not-all-objects-of-the-class/59533749#59533749", "title": "Delegate methods for instance of object, not all objects of the class", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.7.0/Object.html#method-i-extend\" rel=\"nofollow noreferrer\"><code>Object#extend</code></a> with a module to add the methods from the module to the object. This will also replace existing methods.</p>\n\n<pre><code>module ClownHash\n  def keys\n    ['Bozo', 'Krusty', 'Pagliacci']\n  end\n\n  def clownize\n    keys.map(&amp;:reverse)\n  end\nend\n\n{ foo: 1, bar: 2 }.extend(ClownHash).keys\n# =&gt; [\"Bozo\", \"Krusty\", \"Pagliacci\"]\n\n{}.extend(ClownHash).clownize\n# =&gt; [\"ozoB\", \"ytsurK\", \"iccailgaP\"]\n</code></pre>\n"}], "owner": {"reputation": 557, "user_id": 5527374, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/OQmV2.png?s=128&g=1", "display_name": "tscheingeld", "link": "https://stackoverflow.com/users/5527374/tscheingeld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 59533749, "answer_count": 1, "score": 1, "last_activity_date": 1577723060, "creation_date": 1577633859, "question_id": 59520784, "link": "https://stackoverflow.com/questions/59520784/delegate-methods-for-instance-of-object-not-all-objects-of-the-class", "title": "Delegate methods for instance of object, not all objects of the class", "body": "<p>Is there a way to delegate methods from an arbitrary object to an arbitrary object? That is, I don't want to delegate methods in the class definition, I want to delegate them for a specific instance of an object without redefining its class. For example...</p>\n\n<p>Consider this class:</p>\n\n<pre><code>class ClownHash\n    def keys\n        return ['Bozo', 'Krusty', 'Pagliacci']\n    end\nend\n</code></pre>\n\n<p>So I instantiate ClownHash:</p>\n\n<pre><code>clowns = ClownHash.new()\n</code></pre>\n\n<p>Now here's the part I can't figure out. Suppose I want to delegate the keys\nmethod to a plain old hash object:</p>\n\n<pre><code>hsh = {}\n# your answer here\nputs hsh.keys\n</code></pre>\n\n<p>which outputs</p>\n\n<pre><code>Bozo\nKrusty\nPagliacci\n</code></pre>\n\n<p>I know I could do it by redefining the keys method for that hash object, but I'm\nultimately looking to delegate most of the hash methods, so I'm hoping to avoid doing a long redefining routine for every hash every time.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 11881493, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sPnUv.jpg?s=128&g=1", "display_name": "Erik Garcia Rosa", "link": "https://stackoverflow.com/users/11881493/erik-garcia-rosa"}, "edited": false, "score": 0, "creation_date": 1577628873, "post_id": 59519964, "comment_id": 105211314, "body": "It worked! I didn&#39;t know to see that fail. A lot of thanks :D"}], "tags": [], "owner": {"reputation": 141, "user_id": 5467306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e185491ea7afdef8a92f44e9d25201e?s=128&d=identicon&r=PG&f=1", "display_name": "Bisher", "link": "https://stackoverflow.com/users/5467306/bisher"}, "is_accepted": true, "score": 1, "last_activity_date": 1577627112, "creation_date": 1577627112, "answer_id": 59519964, "question_id": 59519945, "link": "https://stackoverflow.com/questions/59519945/ruby-on-rails-syntax-error-unexpected-tsymbeg-expecting-do-or-or/59519964#59519964", "title": "Ruby on Rails: syntax error, unexpected tSYMBEG, expecting do or &#39;{&#39; or &#39;(&#39;", "body": "<p>you just have to move the colon before <strong>true</strong>, it should be <code>presence: true</code> instead of <code>presence :true</code></p>\n"}], "owner": {"reputation": 39, "user_id": 11881493, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sPnUv.jpg?s=128&g=1", "display_name": "Erik Garcia Rosa", "link": "https://stackoverflow.com/users/11881493/erik-garcia-rosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "closed_date": 1577652781, "accepted_answer_id": 59519964, "answer_count": 1, "score": -2, "last_activity_date": 1577627112, "creation_date": 1577626926, "question_id": 59519945, "link": "https://stackoverflow.com/questions/59519945/ruby-on-rails-syntax-error-unexpected-tsymbeg-expecting-do-or-or", "closed_reason": "Not suitable for this site", "title": "Ruby on Rails: syntax error, unexpected tSYMBEG, expecting do or &#39;{&#39; or &#39;(&#39;", "body": "<p>Good afternoon.\nI'm trying Ruby on Rails, so I'm doing the getting started page tutorial.\nThe problem comes when I did the articles validations and trying to go to the articles list.</p>\n\n<p>The error is in the model, but I can't find it, so I need some help.\nThe model code where Rails throws the error:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Article &lt; ApplicationRecord\n    validates :title, presence :true, length: {minimum: 5}\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "time"], "comments": [{"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 1, "creation_date": 1577627466, "post_id": 59519846, "comment_id": 105210937, "body": "I think the time stamps <b>are</b> nearly identical. <i>2019-12-29 13:03:12</i> is just 20 minutes off from  <i>29 Dec 2019 22:23:40 <b>JST +09:00</b></i>, just written differently. Did you do the <code>Time.zone.now</code> 20 minutes after the update?"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1577631637, "post_id": 59520409, "comment_id": 105212014, "body": "This is a very bad antipattern practice to store local time in the DB. The correct approach is to store UTC and convert back to local timezone if needed. You\u2019ll get into many unexpected issues with storing local time."}], "tags": [], "owner": {"reputation": 11, "user_id": 12619143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e736c3aa79044d4cefbaf1caf3bdc5?s=128&d=identicon&r=PG&f=1", "display_name": "Masaho Tamura", "link": "https://stackoverflow.com/users/12619143/masaho-tamura"}, "is_accepted": false, "score": -1, "last_activity_date": 1577630794, "creation_date": 1577630794, "answer_id": 59520409, "question_id": 59519846, "link": "https://stackoverflow.com/questions/59519846/time-zone-difference/59520409#59520409", "title": "Time zone difference", "body": "<p>I solved this problem.\nSimply I made a mistake when I add a column to users table like this below.</p>\n\n<pre><code>class AddAdtivationToUsers &lt; ActiveRecord::Migration[5.1]\n  def change\n    add_column :users, :activation_digest, :string\n    add_column :users, :activated, :boolean, default: false\n    add_column :users, :activated_at, :datatime # here is the point of mistake. \n                                                # I should have write \":datetime\"\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12619143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e736c3aa79044d4cefbaf1caf3bdc5?s=128&d=identicon&r=PG&f=1", "display_name": "Masaho Tamura", "link": "https://stackoverflow.com/users/12619143/masaho-tamura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577630794, "creation_date": 1577626029, "question_id": 59519846, "link": "https://stackoverflow.com/questions/59519846/time-zone-difference", "title": "Time zone difference", "body": "<p>I'm trying to develop application with rails tutorial.\nI'm in chapter 12 and trouble.\nWhen I send the email from password reset form but the reset_at time is added wrong time.\nIn console, I can get correct time.\nIs there anyone who can help me? thanks.</p>\n\n<p>models/user.rb</p>\n\n<pre><code>def create_reset_digest\n    self.reset_token = User.new_token\n    update_attribute(:reset_digest, User.digest(reset_token))\n    update_attribute(:reset_sent_at, Time.zone.now)\nend\n</code></pre>\n\n<p>in console(\"reset_sent_at\" is wrong time)</p>\n\n<pre><code>&gt;&gt; User.first\n  User Load (0.2ms)  SELECT  \"users\".* FROM \"users\" ORDER BY \"users\".\"id\" ASC LIMIT ?  [[\"LIMIT\", 1]]\n=&gt; #&lt;User id: 1, name: \"Example User\", email: \"example@railstutorial.org\", created_at: \"2019-12-27 19:18:17\", updated_at: \"2019-12-29 13:03:12\", password_digest: \"$2a$10$jbZmEQiB6reX6e/ieGC4wu1lVALDE0GHlkPPeIbUaGe...\", remember_`enter code here`digest: nil, admin: true, activation_digest: \"$2a$10$t2pk3NPXsvpYcVlrnB4nh.jOZu4YEyKih5wMqneuia2...\", activated: true, activated_at: \"2019-12-27 19:18:17\", reset_digest: \"$2a$10$UExX5u5qsCrwuCzyz5xicObm9w98.XWHQuxoDT7vlzC...\", reset_sent_at: \"2000-01-01 13:03:12\"&gt;\n</code></pre>\n\n<p>in console(I can get correct time)</p>\n\n<pre><code>Time.zone.now\n=&gt; Sun, 29 Dec 2019 22:23:40 JST +09:00\n&gt;&gt; \n</code></pre>\n\n<p>Why?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows", "rubygems"], "comments": [{"owner": {"reputation": 741, "user_id": 6894749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gbstY.jpg?s=128&g=1", "display_name": "Thang", "link": "https://stackoverflow.com/users/6894749/thang"}, "edited": false, "score": 0, "creation_date": 1577598316, "post_id": 59517071, "comment_id": 105205627, "body": "Are you using Window OS?"}, {"owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "edited": false, "score": 0, "creation_date": 1577598561, "post_id": 59517071, "comment_id": 105205648, "body": "check this answer <a href=\"https://stackoverflow.com/a/54817408/938947\">stackoverflow.com/a/54817408/938947</a> , probably can answer your problem"}, {"owner": {"reputation": 159, "user_id": 11746373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uO3gcoZZNEw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rePhZCXRsr3lp0jmEQ-Bn0HBR4mIQ/photo.jpg?sz=128", "display_name": "Roy Xu", "link": "https://stackoverflow.com/users/11746373/roy-xu"}, "edited": false, "score": 0, "creation_date": 1577599639, "post_id": 59517071, "comment_id": 105205772, "body": "I am using Window OS"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1577617965, "post_id": 59517071, "comment_id": 105208671, "body": "It looks like the Ruby DevKit is not properly loaded."}], "answers": [{"tags": [], "owner": {"reputation": 311, "user_id": 7105526, "user_type": "registered", "profile_image": "https://graph.facebook.com/1812496678973073/picture?type=large", "display_name": "B&#249;i Nh\u1eadt Duy", "link": "https://stackoverflow.com/users/7105526/b%c3%b9i-nh%e1%ba%adt-duy"}, "is_accepted": false, "score": 1, "last_activity_date": 1577620561, "creation_date": 1577620561, "answer_id": 59519171, "question_id": 59517071, "link": "https://stackoverflow.com/questions/59517071/error-when-executing-the-bundle-install-in-the-command-prompt/59519171#59519171", "title": "Error when executing the &quot;bundle install&quot; in the command prompt", "body": "<p>When installing some gems, if it failed to install, I think your system missing some native requirements. In case of SQLite3, I think you need to install sqlite3, sqlite3 client first in your OS system. </p>\n"}], "owner": {"reputation": 159, "user_id": 11746373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uO3gcoZZNEw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rePhZCXRsr3lp0jmEQ-Bn0HBR4mIQ/photo.jpg?sz=128", "display_name": "Roy Xu", "link": "https://stackoverflow.com/users/11746373/roy-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 379, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577633877, "creation_date": 1577597338, "last_edit_date": 1577633877, "question_id": 59517071, "link": "https://stackoverflow.com/questions/59517071/error-when-executing-the-bundle-install-in-the-command-prompt", "title": "Error when executing the &quot;bundle install&quot; in the command prompt", "body": "<p>I was following the <a href=\"https://guides.rubyonrails.org/getting_started.html\" rel=\"nofollow noreferrer\">rails tutorial</a> and encountered this error. The error says that sqlite3.h is missing. But I had downloaded the sqlite3 from the official website and installed it properly. Why <code>sqlite3.h</code> is missing? How do I fix this? Do I have to download a specific file called <code>sqlite3.h</code> to get it working?</p>\n\n<pre><code>Microsoft Windows [Version 10.0.17763.914]\n(c) 2018 Microsoft Corporation. All rights reserved.\n\nC:\\Users\\Xu Zeng&gt;cd blog\n\nC:\\Users\\Xu Zeng\\blog&gt;rails server\nCould not find gem 'rails (~&gt; 5.1.7) x64-mingw32' in any of the gem sources listed in your Gemfile.\nRun `bundle install` to install missing gems.\n\nC:\\Users\\Xu Zeng\\blog&gt;bundle install\nFetching gem metadata from https://rubygems.org/..............\nFetching gem metadata from https://rubygems.org/..\nResolving dependencies....\nUsing rake 13.0.1\nUsing concurrent-ruby 1.1.5\nUsing i18n 1.7.0\nUsing minitest 5.13.0\nUsing thread_safe 0.3.6\nUsing tzinfo 1.2.6\nUsing activesupport 5.1.7\nUsing builder 3.2.4\nUsing erubi 1.9.0\nUsing mini_portile2 2.4.0\nUsing nokogiri 1.10.7 (x64-mingw32)\nUsing rails-dom-testing 2.0.3\nUsing crass 1.0.5\nUsing loofah 2.4.0\nUsing rails-html-sanitizer 1.3.0\nUsing actionview 5.1.7\nUsing rack 2.0.8\nUsing rack-test 1.1.0\nUsing actionpack 5.1.7\nUsing nio4r 2.5.2\nUsing websocket-extensions 0.1.4\nUsing websocket-driver 0.6.5\nUsing actioncable 5.1.7\nUsing globalid 0.4.2\nUsing activejob 5.1.7\nUsing mini_mime 1.0.2\nUsing mail 2.7.1\nUsing actionmailer 5.1.7\nUsing activemodel 5.1.7\nUsing arel 8.0.0\nUsing activerecord 5.1.7\nUsing public_suffix 4.0.2\nUsing addressable 2.7.0\nUsing bindex 0.8.1\nUsing bundler 1.17.2\nUsing byebug 11.0.1\nUsing regexp_parser 1.6.0\nUsing xpath 3.2.0\nUsing capybara 3.30.0\nUsing childprocess 3.0.0\nUsing coffee-script-source 1.12.2\nUsing execjs 2.7.0\nUsing coffee-script 2.4.1\nUsing method_source 0.9.2\nUsing thor 1.0.1\nFetching railties 5.1.7\nInstalling railties 5.1.7\nFetching coffee-rails 4.2.2\nInstalling coffee-rails 4.2.2\nFetching ffi 1.11.3 (x64-mingw32)\nInstalling ffi 1.11.3 (x64-mingw32)\nFetching jbuilder 2.9.1\nInstalling jbuilder 2.9.1\nFetching puma 3.12.2\nInstalling puma 3.12.2 with native extensions\nFetching sprockets 3.7.2\nInstalling sprockets 3.7.2\nUsing sprockets-rails 3.2.1\nFetching rails 5.1.7\nInstalling rails 5.1.7\nFetching rb-fsevent 0.10.3\nInstalling rb-fsevent 0.10.3\nFetching rb-inotify 0.10.1\nInstalling rb-inotify 0.10.1\nFetching rubyzip 2.0.0\nInstalling rubyzip 2.0.0\nFetching sass-listen 4.0.0\nInstalling sass-listen 4.0.0\nFetching sass 3.7.4\nInstalling sass 3.7.4\nFetching tilt 2.0.10\nInstalling tilt 2.0.10\nFetching sass-rails 5.0.7\nInstalling sass-rails 5.0.7\nFetching selenium-webdriver 3.142.7\nInstalling selenium-webdriver 3.142.7\nFetching sqlite3 1.4.2\nInstalling sqlite3 1.4.2 with native extensions\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\ncurrent directory:\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/sqlite3-1.4.2/ext/sqlite3\nC:/Ruby26-x64/bin/ruby.exe -I C:/Ruby26-x64/lib/ruby/2.6.0 -r\n./siteconf20191229-3908-1eyuunw.rb extconf.rb\nchecking for sqlite3.h... no\nsqlite3.h is missing. Install SQLite3 from http://www.sqlite.org/ first.\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=C:/Ruby26-x64/bin/$(RUBY_BASE_NAME)\n        --with-sqlcipher\n        --without-sqlcipher\n        --with-sqlite3-config\n        --without-sqlite3-config\n        --with-pkg-config\n        --without-pkg-config\n        --with-sqlcipher\n        --without-sqlcipher\n        --with-sqlite3-dir\n        --without-sqlite3-dir\n        --with-sqlite3-include\n        --without-sqlite3-include=${sqlite3-dir}/include\n        --with-sqlite3-lib\n        --without-sqlite3-lib=${sqlite3-dir}/lib\n\nTo see why this extension failed to compile, please check the mkmf.log which can\nbe found here:\n\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/extensions/x64-mingw32/2.6.0/sqlite3-1.4.2/mkmf.log\n\nextconf failed, exit code 1\n\nGem files will remain installed in\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/sqlite3-1.4.2 for inspection.\nResults logged to\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/extensions/x64-mingw32/2.6.0/sqlite3-1.4.2/gem_make.out\n\nAn error occurred while installing sqlite3 (1.4.2), and Bundler cannot continue.\nMake sure that `gem install sqlite3 -v '1.4.2' --source 'https://rubygems.org/'`\nsucceeds before bundling.\n\nIn Gemfile:\n  sqlite3\n</code></pre>\n\n<p>the mkmf.log is like this</p>\n\n<pre><code>\"pkg-config --exists sqlite3\"\npackage configuration for sqlite3 is not found\nfind_header: checking for sqlite3.h... -------------------- no\n\n\"x86_64-w64-mingw32-gcc -o conftest.exe -IC:/Ruby26-x64/include/ruby-2.6.0/x64-mingw32 -IC:/Ruby26-x64/include/ruby-2.6.0/ruby/backward -IC:/Ruby26-x64/include/ruby-2.6.0 -I. -D__USE_MINGW_ANSI_STDIO=1 -DFD_SETSIZE=2048 -D_WIN32_WINNT=0x0600 -D__MINGW_USE_VC2005_COMPAT -D_FILE_OFFSET_BITS=64  -O3 -fno-fast-math -DTAINTING_SUPPORT conftest.c  -L. -LC:/Ruby26-x64/lib -L. -pipe -s     -lx64-msvcrt-ruby260  -lshell32 -lws2_32 -liphlpapi -limagehlp -lshlwapi  \"\nchecked program was:\n/* begin */\n1: #include \"ruby.h\"\n2: \n3: #include &lt;winsock2.h&gt;\n4: #include &lt;windows.h&gt;\n5: int main(int argc, char **argv)\n6: {\n7:   return 0;\n8: }\n/* end */\n\n\"x86_64-w64-mingw32-gcc -E -IC:/Ruby26-x64/include/ruby-2.6.0/x64-mingw32 -IC:/Ruby26-x64/include/ruby-2.6.0/ruby/backward -IC:/Ruby26-x64/include/ruby-2.6.0 -I. -D__USE_MINGW_ANSI_STDIO=1 -DFD_SETSIZE=2048 -D_WIN32_WINNT=0x0600 -D__MINGW_USE_VC2005_COMPAT -D_FILE_OFFSET_BITS=64  -O3 -fno-fast-math -DTAINTING_SUPPORT  conftest.c -o conftest.i\"\nconftest.c:5:10: fatal error: sqlite3.h: No such file or directory\n    5 | #include &lt;sqlite3.h&gt;\n      |          ^~~~~~~~~~~\ncompilation terminated.\nchecked program was:\n/* begin */\n1: #include \"ruby.h\"\n2: \n3: #include &lt;winsock2.h&gt;\n4: #include &lt;windows.h&gt;\n5: #include &lt;sqlite3.h&gt;\n/* end */\n\n--------------------\n\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577653258, "post_id": 59516629, "comment_id": 105217528, "body": "Welcome to SO. Please take the time to use correct grammar; Capitalization, spelling and punctuation are important here and can affect how your quickly your question is answered because your effort put into asking a good question affects our willingness to help. &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages will help."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12556644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72c533416489bc346a6385ed0a6cbf8?s=128&d=identicon&r=PG&f=1", "display_name": "rat007", "link": "https://stackoverflow.com/users/12556644/rat007"}, "edited": false, "score": 0, "creation_date": 1577593587, "post_id": 59516711, "comment_id": 105205083, "body": "this code throws syntax error- index.html.erb:28: else without rescue is useless &#39;.freeze; else ^~~~"}, {"owner": {"reputation": 302, "user_id": 12336104, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dRc1b5iireA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re5SEVTDW1GD14ZQuGn5AEmfSJ4iA/photo.jpg?sz=128", "display_name": "Thuy Nguyen", "link": "https://stackoverflow.com/users/12336104/thuy-nguyen"}, "reply_to_user": {"reputation": 3, "user_id": 12556644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72c533416489bc346a6385ed0a6cbf8?s=128&d=identicon&r=PG&f=1", "display_name": "rat007", "link": "https://stackoverflow.com/users/12556644/rat007"}, "edited": false, "score": 0, "creation_date": 1577611165, "post_id": 59516711, "comment_id": 105207430, "body": "oh, sorry, remove <code>do</code> at first line.  <code>&lt;% if project_site.manager_remarks.empty? %&gt;</code>"}], "tags": [], "owner": {"reputation": 302, "user_id": 12336104, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dRc1b5iireA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re5SEVTDW1GD14ZQuGn5AEmfSJ4iA/photo.jpg?sz=128", "display_name": "Thuy Nguyen", "link": "https://stackoverflow.com/users/12336104/thuy-nguyen"}, "is_accepted": false, "score": 1, "last_activity_date": 1577591228, "creation_date": 1577591228, "answer_id": 59516711, "question_id": 59516629, "link": "https://stackoverflow.com/questions/59516629/how-to-print-the-status-if-it-is-neither-true-nor-false-in-rails/59516711#59516711", "title": "How to print the status if it is neither true nor false in Rails", "body": "<pre><code>&lt;% if project_site.manager_remarks.empty? do %&gt;\n  &lt;td&gt;&lt;%= \"Pending\" %&gt;&lt;/td&gt;\n&lt;% else %&gt;\n  &lt;% project_site.manager_remarks.each do |manager_remark| %&gt;\n    &lt;% if manager_remark.decision == false %&gt;\n      &lt;td&gt;&lt;%= 'Rejected' %&gt;&lt;/td&gt;\n    &lt;% elsif manager_remark.decision == true %&gt;\n      &lt;td&gt;&lt;%= \"Approved\" %&gt;&lt;/td&gt;\n    &lt;% else %&gt;\n      &lt;td&gt;&lt;%= \"Pending\" %&gt;&lt;/td&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>In my opinion, boolean attribute should have values, which only include <code>true</code> or <code>false</code>, if you want more statuses, <code>enum</code> is good choice.</p>\n\n<p>References </p>\n\n<ul>\n<li><a href=\"https://naturaily.com/blog/ruby-on-rails-enum\" rel=\"nofollow noreferrer\">https://naturaily.com/blog/ruby-on-rails-enum</a></li>\n<li><a href=\"https://api.rubyonrails.org/v5.2.4.1/classes/ActiveRecord/Enum.html\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/v5.2.4.1/classes/ActiveRecord/Enum.html</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 12556644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72c533416489bc346a6385ed0a6cbf8?s=128&d=identicon&r=PG&f=1", "display_name": "rat007", "link": "https://stackoverflow.com/users/12556644/rat007"}, "edited": false, "score": 0, "creation_date": 1577609270, "post_id": 59517510, "comment_id": 105207146, "body": "hi i its still unable to show &quot;pending&quot; status. there are two model one for ProjectSite another ManagerRemark. linked in a way one project site has multiple decision(status). decision attribute is in ManagerRemark model. it only shows approved(true) and rejected(false) value that is set by manager in ManagerRemark Model."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 3, "user_id": 12556644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72c533416489bc346a6385ed0a6cbf8?s=128&d=identicon&r=PG&f=1", "display_name": "rat007", "link": "https://stackoverflow.com/users/12556644/rat007"}, "edited": false, "score": 0, "creation_date": 1577609429, "post_id": 59517510, "comment_id": 105207165, "body": "What does that mean if there is no manager remark (the Pending state)? Is there no manager remark for a specific manager or it there a remark but its decision in nil?"}, {"owner": {"reputation": 3, "user_id": 12556644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72c533416489bc346a6385ed0a6cbf8?s=128&d=identicon&r=PG&f=1", "display_name": "rat007", "link": "https://stackoverflow.com/users/12556644/rat007"}, "edited": false, "score": 0, "creation_date": 1577609830, "post_id": 59517510, "comment_id": 105207224, "body": "hi when ManagerRemark model decision value is set by manager on each ProjectSite, then only it shows decision(status) as approved, rejected, but on creation of ProjectSite i want it&#39;s status should be shown as pending.."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 3, "user_id": 12556644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72c533416489bc346a6385ed0a6cbf8?s=128&d=identicon&r=PG&f=1", "display_name": "rat007", "link": "https://stackoverflow.com/users/12556644/rat007"}, "edited": false, "score": 0, "creation_date": 1577610136, "post_id": 59517510, "comment_id": 105207271, "body": "I am sorry, I still do not get it. &quot;Pending&quot; means that there is no <code>manager_remark</code> at all in the database? Not a single one? Or is it missing for a specific manager (is there a list of all managers)? Or it is missing for the current user?"}, {"owner": {"reputation": 3, "user_id": 12556644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72c533416489bc346a6385ed0a6cbf8?s=128&d=identicon&r=PG&f=1", "display_name": "rat007", "link": "https://stackoverflow.com/users/12556644/rat007"}, "edited": false, "score": 0, "creation_date": 1577610491, "post_id": 59517510, "comment_id": 105207317, "body": "yeah &quot;pending&quot; means their is no manager_remark in database for each project_site."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1577611085, "last_edit_date": 1577611085, "creation_date": 1577603669, "answer_id": 59517510, "question_id": 59516629, "link": "https://stackoverflow.com/questions/59516629/how-to-print-the-status-if-it-is-neither-true-nor-false-in-rails/59517510#59517510", "title": "How to print the status if it is neither true nor false in Rails", "body": "<p>I wonder if a case block is easier to read in this example</p>\n\n<pre><code>&lt;% project_site.manager_remarks.each do |manager_remark| %&gt;\n  &lt;% case manager_remark.decision %&gt;\n  &lt;% when nil %&gt;\n    &lt;td&gt;Pending&lt;/td&gt;\n  &lt;% when true %&gt;\n    &lt;td&gt;Approved&lt;/td&gt;\n  &lt;% when false %&gt;\n    &lt;td&gt;Rejected&lt;/td&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Taking it further it is probably better to have a method in the <code>ManagerRemark</code> model like this:</p>\n\n<pre><code>def decision_description\n  { true =&gt; \"Approved\", false =&gt; \"Rejected\", nil =&gt; \"Pending\" }.fetch(decision)\nend\n</code></pre>\n\n<p>and just call that method in the view like this:</p>\n\n<pre><code>&lt;% project_site.manager_remarks.each do |manager_remark| %&gt;\n  &lt;td&gt;&lt;%= manager_remark.decision_description %&gt;&lt;/td&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Update: I misunderstood the question and now it seems like the OP wants to show \"Pending\" not when the <code>decision</code> is <code>nil</code> but there is no <code>remark</code> at all. In that case, I would do something like this:</p>\n\n<pre><code>&lt;% if project_site.manager_remarks.any? %&gt;\n  &lt;% project_site.manager_remarks.each do |manager_remark| %&gt;\n    &lt;td&gt;&lt;%= manager_remark.decision ? 'Approved' : 'Rejected' %&gt;&lt;/td&gt;\n  &lt;% end %&gt;\n&lt;% else %&gt;\n  &lt;td&gt;Pending&lt;/td&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12556644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72c533416489bc346a6385ed0a6cbf8?s=128&d=identicon&r=PG&f=1", "display_name": "rat007", "link": "https://stackoverflow.com/users/12556644/rat007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 59517510, "answer_count": 2, "score": 0, "last_activity_date": 1577719946, "creation_date": 1577589672, "last_edit_date": 1577653433, "question_id": 59516629, "link": "https://stackoverflow.com/questions/59516629/how-to-print-the-status-if-it-is-neither-true-nor-false-in-rails", "title": "How to print the status if it is neither true nor false in Rails", "body": "<p>I have a model named <code>ProjectSite</code> and another named <code>ManagerRemark</code> which takes a decision boolean value.  <code>ProjectSite</code> has many <code>ManageRemark</code>.</p>\n\n<p>The default value of <code>decision</code> is nil.</p>\n\n<p>How can I print status as \"Pending\" when there is no <code>ManagerRemark</code>?</p>\n\n<p>Here is the code:</p>\n\n<pre><code>&lt;% project_site.manager_remarks.each do |manager_remark| %&gt;\n  &lt;% if manager_remark.decision == false %&gt;\n    &lt;td&gt;&lt;%= 'Rejected' %&gt;&lt;/td&gt;\n  &lt;% elsif manager_remark.decision == true %&gt;\n    &lt;td&gt;&lt;%= \"Approved\" %&gt;&lt;/td&gt;\n  &lt;% else %&gt;\n    &lt;td&gt;&lt;%= \"Pending\" %&gt;&lt;/td&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "qt", "windows-10"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1577585976, "post_id": 59516337, "comment_id": 105204300, "body": "Try Ruby 2.5.7 instead. It might not support 2.6."}, {"owner": {"reputation": 1167, "user_id": 4817370, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh5.googleusercontent.com/-1bUMePVT9q8/AAAAAAAAAAI/AAAAAAAAAB4/OPw09oGfIwI/photo.jpg?sz=128", "display_name": "Matthieu Raynaud de Fitte", "link": "https://stackoverflow.com/users/4817370/matthieu-raynaud-de-fitte"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1577619882, "post_id": 59516337, "comment_id": 105209105, "body": "good idea, will try"}], "owner": {"reputation": 1167, "user_id": 4817370, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh5.googleusercontent.com/-1bUMePVT9q8/AAAAAAAAAAI/AAAAAAAAAB4/OPw09oGfIwI/photo.jpg?sz=128", "display_name": "Matthieu Raynaud de Fitte", "link": "https://stackoverflow.com/users/4817370/matthieu-raynaud-de-fitte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577596965, "creation_date": 1577584763, "last_edit_date": 1577596965, "question_id": 59516337, "link": "https://stackoverflow.com/questions/59516337/how-to-use-ruby-to-load-qtruby4-on-windows-10", "title": "How to use Ruby to load qtruby4 on Windows 10", "body": "<p>I wish to use Qt on Windows 10 and am currently trying to use the <code>qtbindings</code> gem.</p>\n\n<p>When trying to <code>require 'Qt'</code> I get the following error:</p>\n\n<pre><code>C:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/qtbindings-4.8.6.5-x64-mingw32/lib/Qt4.rb:25:in `require': cannot load such file -- 2.6/qtruby4 (LoadError)\n</code></pre>\n\n<p>I tried uninstalling the gem and reinstalling it just in case but no luck.</p>\n\n<p>I am using Ruby 2.6.5p114 and qtbindings 4.8.6.5. I made sure that Ruby and the gems are all in the path environment variable.</p>\n\n<p>Am I missing a step or am I using out of date versions?</p>\n"}, {"tags": ["ruby", "github", "themes", "jekyll", "blogs"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12528751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a121dc7ab092ee395e2a7e9e9aaf6934?s=128&d=identicon&r=PG&f=1", "display_name": "SeungTaeKim", "link": "https://stackoverflow.com/users/12528751/seungtaekim"}, "edited": false, "score": 0, "creation_date": 1577696003, "post_id": 59517981, "comment_id": 105226175, "body": "Oh, God! Finally! Thank you all!"}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 13, "user_id": 12528751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a121dc7ab092ee395e2a7e9e9aaf6934?s=128&d=identicon&r=PG&f=1", "display_name": "SeungTaeKim", "link": "https://stackoverflow.com/users/12528751/seungtaekim"}, "edited": false, "score": 0, "creation_date": 1577697512, "post_id": 59517981, "comment_id": 105226640, "body": "@SeungTaeKim No problem. Don&#39;t forget to read <a href=\"https://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>."}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": true, "score": 0, "last_activity_date": 1577609347, "creation_date": 1577609347, "answer_id": 59517981, "question_id": 59516251, "link": "https://stackoverflow.com/questions/59516251/how-can-i-change-jekyll-theme-name-when-i-searched-my-github-blog/59517981#59517981", "title": "how can I change jekyll theme name when I searched my github blog?", "body": "<p><a href=\"https://ryankor.github.io/\" rel=\"nofollow noreferrer\">https://ryankor.github.io/</a> still display the correct name, \"Ryan's Tech\", as defined in your <a href=\"https://github.com/RyanKor/ryankor.github.io/blob/664a9c5ccd9c0ab073228a61b0d6dd28591e1c9f/_config.yml#L6\" rel=\"nofollow noreferrer\"><code>_config.yml</code></a>.</p>\n\n<p>Check \"<a href=\"https://stackoverflow.com/a/45905534/6309\">Switch theme in an existing Jekyll installation</a>\": your <code>_config.yml</code> seems to be missing a <code>theme: jekyll-theme-hideout</code> line.</p>\n"}], "owner": {"reputation": 13, "user_id": 12528751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a121dc7ab092ee395e2a7e9e9aaf6934?s=128&d=identicon&r=PG&f=1", "display_name": "SeungTaeKim", "link": "https://stackoverflow.com/users/12528751/seungtaekim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 1, "accepted_answer_id": 59517981, "answer_count": 1, "score": 0, "last_activity_date": 1577609417, "creation_date": 1577583025, "last_edit_date": 1577609417, "question_id": 59516251, "link": "https://stackoverflow.com/questions/59516251/how-can-i-change-jekyll-theme-name-when-i-searched-my-github-blog", "title": "how can I change jekyll theme name when I searched my github blog?", "body": "<p>I want to use the hydeout jekyll theme:</p>\n\n<p><a href=\"https://i.stack.imgur.com/gbqgX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gbqgX.png\" alt=\"jekyll theme name in the web page\"></a></p>\n\n<p>I am customizing my GitHub blog using a Jekyll theme. </p>\n\n<p>There is a problem that my blog name is set to \"hydeout jekyll theme.\"</p>\n\n<p>I searched google but I have no idea how to change my blog name here.</p>\n\n<p>Can you give any advice?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "scopes"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 5152207, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002469318807/picture?type=large", "display_name": "David Sousa", "link": "https://stackoverflow.com/users/5152207/david-sousa"}, "edited": false, "score": 0, "creation_date": 1577575967, "post_id": 59515687, "comment_id": 105203020, "body": "I&#39;m on Rails 5.2, could you give me an example?"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 61, "user_id": 5152207, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002469318807/picture?type=large", "display_name": "David Sousa", "link": "https://stackoverflow.com/users/5152207/david-sousa"}, "edited": false, "score": 0, "creation_date": 1577590183, "post_id": 59515687, "comment_id": 105204763, "body": "@DavidSousa Beyond the examples from the link?"}], "tags": [], "owner": {"reputation": 1472, "user_id": 352325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/20b6f582b7ae7bad4661c4ce0016c40a?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/352325/john"}, "is_accepted": false, "score": 1, "last_activity_date": 1577575133, "creation_date": 1577575133, "answer_id": 59515687, "question_id": 59515645, "link": "https://stackoverflow.com/questions/59515645/rails-logical-operator-on-scopes-is-it-possible/59515687#59515687", "title": "Rails - Logical Operator on Scopes, is it possible?", "body": "<p>Depending on the version of Rails you are using ActiveRecord does have a <a href=\"https://apidock.com/rails/ActiveRecord/QueryMethods/WhereChain/not\" rel=\"nofollow noreferrer\"><code>not</code></a> method. Hope that helps.</p>\n"}, {"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1577897757, "post_id": 59516643, "comment_id": 105277136, "body": "<code>scope</code> is just syntactic sugar for declaring class methods. If your method does not fit in a one liner lambda then use normal class method definition for readability. Multi-line scopes are a code smell."}], "tags": [], "owner": {"reputation": 302, "user_id": 12336104, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dRc1b5iireA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re5SEVTDW1GD14ZQuGn5AEmfSJ4iA/photo.jpg?sz=128", "display_name": "Thuy Nguyen", "link": "https://stackoverflow.com/users/12336104/thuy-nguyen"}, "is_accepted": true, "score": 1, "last_activity_date": 1577590374, "last_edit_date": 1577590374, "creation_date": 1577589944, "answer_id": 59516643, "question_id": 59515645, "link": "https://stackoverflow.com/questions/59515645/rails-logical-operator-on-scopes-is-it-possible/59516643#59516643", "title": "Rails - Logical Operator on Scopes, is it possible?", "body": "<p>Your meaning are <code>Match.home_lineuped &amp; Match.away_lineuped</code> and <code>Match.all -  (Match.home_lineuped &amp; Match.away_lineuped)</code>.</p>\n\n<p>Or create new scope</p>\n\n<p><code>scope :home_lineuped_and_away_lineuped, -&gt;() { includes(:home_lineup, :away_lineup).where(home_lineups: {lineuped: true }, away_lineups: {lineuped: true }) }</code></p>\n\n<p><code>scope :not_home_lineuped_and_away_lineuped, -&gt;() { includes(:home_lineup, :away_lineup).where.not(home_lineups: {lineuped: true }, away_lineups: {lineuped: true }) }</code></p>\n"}, {"tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 1, "last_activity_date": 1577614591, "creation_date": 1577614591, "answer_id": 59518494, "question_id": 59515645, "link": "https://stackoverflow.com/questions/59515645/rails-logical-operator-on-scopes-is-it-possible/59518494#59518494", "title": "Rails - Logical Operator on Scopes, is it possible?", "body": "<pre><code>scope :home_lineuped, -&gt; { includes(:home_lineup).where(home_lineup: {lineuped: true }) }\nscope :away_lineuped, -&gt; { includes(:away_lineup).where(away_lineup: {lineuped: true }) }\n</code></pre>\n\n<p>You can call one scope after other for AND logic like this:</p>\n\n<pre><code>Match.home_lineuped.away_lineuped\n</code></pre>\n\n<p>But if you need scope, you can unite two scopes as:</p>\n\n<pre><code>scope :home_and_lineuped, -&gt; do\n  includes(:home_lineup, :away_lineup).\n    where(home_lineup: {lineuped: true }, away_lineup: {lineuped: true })\nend\n</code></pre>\n\n<p>And for opposite logic (NOT AND) you can use <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods/WhereChain.html#method-i-not\" rel=\"nofollow noreferrer\"><code>not</code></a>:</p>\n\n<pre><code>scope :no_home_away_lineuped, -&gt; do\n  includes(:home_lineup, :away_lineup).\n    where.not(home_lineup: {lineuped: true }, away_lineup: {lineuped: true })\nend\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 5152207, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002469318807/picture?type=large", "display_name": "David Sousa", "link": "https://stackoverflow.com/users/5152207/david-sousa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 59516643, "answer_count": 3, "score": 1, "last_activity_date": 1577614591, "creation_date": 1577574661, "last_edit_date": 1577586491, "question_id": 59515645, "link": "https://stackoverflow.com/questions/59515645/rails-logical-operator-on-scopes-is-it-possible", "title": "Rails - Logical Operator on Scopes, is it possible?", "body": "<p>I have a class that represents a game (match) with 2 scopes:</p>\n\n<pre><code>  scope :home_lineuped, -&gt;() { includes(:home_lineup).where(home_lineup: {lineuped: true }) }\n  scope :away_lineuped, -&gt;() { includes(:away_lineup).where(away_lineup: {lineuped: true }) }\n</code></pre>\n\n<p>I would like to create a new scope with the logical operator <em>Not And</em> on the results, is it possible?</p>\n\n<p><strong>EDIT:</strong> What do I mean?</p>\n\n<p>Imagine that:\n<code>Match.All</code> gives me matches with ID, <em>1, 2, 3, 4, 5</em> and <em>6</em>;</p>\n\n<p><code>Match.home_lineuped</code> gives me matches with ID, <em>1, 2</em> and <em>6</em>;</p>\n\n<p><code>Match.away_lineuped</code> gives me matches with ID  <em>3, 4</em> and <em>6</em>;</p>\n\n<p>The result of: <code>(Match.home_lineuped AND Match.away_lineuped)</code> is: <em>6</em>.</p>\n\n<p>Therefore: <code>Not (Match.home_lineuped AND Match.away_lineuped)</code> will result in matches with ID: <em>1, 2, 3, 4,</em> and <em>5</em>.</p>\n\n<p><strong>End EDIT</strong></p>\n\n<p>Best Regards,</p>\n\n<p>David</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "rollback"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12437774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GDxm2.jpg?s=128&g=1", "display_name": "kam kara", "link": "https://stackoverflow.com/users/12437774/kam-kara"}, "edited": false, "score": 0, "creation_date": 1577621175, "post_id": 59515023, "comment_id": 105209368, "body": "think you tot try help me. I undertand, you try to verify if this email exist.  but the  result is ** nil***"}, {"owner": {"reputation": 1, "user_id": 12437774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GDxm2.jpg?s=128&g=1", "display_name": "kam kara", "link": "https://stackoverflow.com/users/12437774/kam-kara"}, "edited": false, "score": 0, "creation_date": 1577621542, "post_id": 59515023, "comment_id": 105209450, "body": "the link to repos depot. [<a href=\"https://github.com/VAKARAMOKO/chatln]\" rel=\"nofollow noreferrer\">github.com/VAKARAMOKO/chatln]</a>"}], "tags": [], "owner": {"reputation": 539, "user_id": 9006638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kV5us.jpg?s=128&g=1", "display_name": "Michael Arkhipov", "link": "https://stackoverflow.com/users/9006638/michael-arkhipov"}, "is_accepted": false, "score": 0, "last_activity_date": 1577568537, "creation_date": 1577568537, "answer_id": 59515023, "question_id": 59514883, "link": "https://stackoverflow.com/questions/59514883/i-get-rollback-when-i-try-to-sign-up-on-my-rails-app/59515023#59515023", "title": "i get rollback when i try to sign_up on my rails app", "body": "<p>It seems your problem is that the user already exists:</p>\n\n<pre><code>User Exists (0.9ms)  SELECT  1 AS one FROM \"users\" WHERE \"users\".\"email\" = $1 LIMIT $2  [[\"email\", \"vakaramoko@gmail.com\"], [\"LIMIT\", 1]]\n</code></pre>\n\n<p>Try to find it through the console:</p>\n\n<pre><code>$ rails c\n$ User.find_by(email: 'vakaramoko@gmail.com')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 12437774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GDxm2.jpg?s=128&g=1", "display_name": "kam kara", "link": "https://stackoverflow.com/users/12437774/kam-kara"}, "edited": false, "score": 0, "creation_date": 1577788431, "post_id": 59520668, "comment_id": 105254771, "body": "thank you to interest me. but nothing change. i delete devise invitable feature on my app"}], "tags": [], "owner": {"reputation": 805, "user_id": 4544219, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CLo94.jpg?s=128&g=1", "display_name": "Mosaaleb", "link": "https://stackoverflow.com/users/4544219/mosaaleb"}, "is_accepted": false, "score": 0, "last_activity_date": 1577657380, "last_edit_date": 1577657380, "creation_date": 1577632890, "answer_id": 59520668, "question_id": 59514883, "link": "https://stackoverflow.com/questions/59514883/i-get-rollback-when-i-try-to-sign-up-on-my-rails-app/59520668#59520668", "title": "i get rollback when i try to sign_up on my rails app", "body": "<p>From the logs the user registration is processed by DeviseInvitable and the parameters shown doesn't even include the additional fields that you have added. You need to permit the those parameters for also invitable module. \nTry adding this under <code>configure_permitted_parameters</code> method:</p>\n\n<pre><code>  devise_parameter_sanitizer.permit(:accept_invitation,\n                                    keys: %i[username contact terms status])\n</code></pre>\n\n<p>If you didn't mean to use invitable just remove it from devise options in user model.</p>\n"}], "owner": {"reputation": 1, "user_id": 12437774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GDxm2.jpg?s=128&g=1", "display_name": "kam kara", "link": "https://stackoverflow.com/users/12437774/kam-kara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577657380, "creation_date": 1577567374, "question_id": 59514883, "link": "https://stackoverflow.com/questions/59514883/i-get-rollback-when-i-try-to-sign-up-on-my-rails-app", "title": "i get rollback when i try to sign_up on my rails app", "body": "<p>the problem block my work for 5 days now.\nOkay, i try to add the customize fields with devise gem</p>\n\n<p>I try to add additional fields to the gem devise when registering and editing the user profile:</p>\n\n<p>*# sign up: [:username, :contact, :terms, :status]\n*# account_update : [:username, :contact, :status, :terms,\n:gender, :city, :school_name, :level_class, :resume, :matiere_shared, :matricule, :avatar]**</p>\n\n<p>to add this feature, I started with the currency doc, but I still have a rollback and impossible to do the registration</p>\n\n<p>my  ApplicationController</p>\n\n<pre><code> class ApplicationController &lt; ActionController::Base\n    protect_from_forgery with: :exception\n    before_action :configure_permitted_parameters, if: :devise_controller?\n\n    protected\n     def configure_permitted_parameters\n          devise_parameter_sanitizer.permit(:sign_up, keys: [:username, :contact, :terms, :status])\n          devise_parameter_sanitizer.permit(:account_update, keys: [:username, :contact, :status, :terms,\n           :gender, :city, :school_name, :level_class, :resume, :matiere_shared, :matricule, :avatar])\n        end\n\n    end\n</code></pre>\n\n<p><strong>models code</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\n\n\n  has_many :courses, dependent: :destroy\n  has_many :matieres, through: :courses\n  has_many :comments, through: :courses\n  belongs_to :level\n\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable, :trackable  and :omniauthable\n  devise :invitable, :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :validatable, :lockable, :timeoutable, :trackable, :invitable\n\n\n  #Slug\n  class User &lt; ApplicationRecord\n    extend FriendlyId\n    friendly_id :username, use: :slugged\n  end\n\n  def should_generate_new_friendly_id?\n      username_changed?\n  end  \n\nend\n</code></pre>\n\n<p><strong>route code</strong></p>\n\n<pre><code>  devise_for :users\n</code></pre>\n\n<p><strong>terminal code</strong></p>\n\n<pre><code>Started POST \"/users\" for ::1 at 2019-12-28 20:13:16 +0000\nProcessing by DeviseInvitable::RegistrationsController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"vAwU5I4v71IYsXh2BoTN6j0zwjmrVL04FsHiKlTctaQ90MJaweZYAaS0O0ks0EmnznqoBMbJBX/tIixkf6ZlsA==\", \"user\"=&gt;{\"email\"=&gt;\"vakaramoko@gmail.com\", \"password\"=&gt;\"[FILTERED]\", \"password_confirmation\"=&gt;\"[FILTERED]\"}, \"commit\"=&gt;\"Sign up\"}\n  User Load (1.5ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"email\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"email\", \"vakaramoko@gmail.com\"], [\"LIMIT\", 1]]\n  \u21b3 /home/chatln/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/activerecord-5.2.4.1/lib/active_record/log_subscriber.rb:98\n   (0.5ms)  BEGIN\n  \u21b3 /home/chatln/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/activerecord-5.2.4.1/lib/active_record/log_subscriber.rb:98\n  User Exists (0.9ms)  SELECT  1 AS one FROM \"users\" WHERE \"users\".\"email\" = $1 LIMIT $2  [[\"email\", \"vakaramoko@gmail.com\"], [\"LIMIT\", 1]]\n  \u21b3 /home/chatln/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/activerecord-5.2.4.1/lib/active_record/log_subscriber.rb:98\n   (0.5ms)  ROLLBACK\n  \u21b3 /home/chatln/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/activerecord-5.2.4.1/lib/active_record/log_subscriber.rb:98\n  Rendering devise/registrations/new.html.erb within layouts/application\n  Rendered devise/shared/_links.html.erb (2.5ms)\n  Rendered devise/registrations/new.html.erb within layouts/application (17.3ms)\n[Webpacker] Everything's up-to-date. Nothing to do\n[Webpacker] Everything's up-to-date. Nothing to do\n  Rendered shared/links/_links-top.html.erb (9.3ms)\n  Rendered shared/devise/_notification.html.erb (0.5ms)\n  Rendered shared/nav/_navbar.html.erb (1.0ms)\n  Rendered shared/links/_links-js.html.erb (0.3ms)\nCompleted 200 OK in 465ms (Views: 104.6ms | ActiveRecord: 15.6ms)\n</code></pre>\n\n<p>I reimplemented in a new app all run good, not problem, but with my great app impossible. please helps me</p>\n"}, {"tags": ["ruby", "open-uri"], "comments": [{"owner": {"reputation": 5610, "user_id": 413924, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a5fae9bf6a8e05a023c96ba434a1dfd5?s=128&d=identicon&r=PG", "display_name": "DannyB", "link": "https://stackoverflow.com/users/413924/dannyb"}, "reply_to_user": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1577568759, "post_id": 59514020, "comment_id": 105201714, "body": "Not at all. The mentioned question is not related, besides the fact that it mentions spaces in URL encoding."}], "answers": [{"comments": [{"owner": {"reputation": 5610, "user_id": 413924, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a5fae9bf6a8e05a023c96ba434a1dfd5?s=128&d=identicon&r=PG", "display_name": "DannyB", "link": "https://stackoverflow.com/users/413924/dannyb"}, "edited": false, "score": 0, "creation_date": 1577570631, "post_id": 59515114, "comment_id": 105202122, "body": "Thanks. This is the only HTTP client I found that does not understand this. Even Ruby&#39;s HTTP gem follows it properly. I will probably switch to it instead."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577596804, "post_id": 59515114, "comment_id": 105205472, "body": "Don&#39;t use the HTTP library unless you&#39;re designing a new client from scratch. Instead use one of the many HTTP clients that already exist. Writing a client that covers all the bases wastes your time when other excellent ones already exist."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 2, "last_activity_date": 1577569502, "creation_date": 1577569502, "answer_id": 59515114, "question_id": 59514020, "link": "https://stackoverflow.com/questions/59514020/openuri-fails-to-follow-urls-that-have-20/59515114#59515114", "title": "OpenURI fails to follow URLs that have %20", "body": "<p>The server is responding with an redirect to an invalid URI. <code>curl</code> is being lax about it, but Ruby is being strict.</p>\n\n<p>If we print out the <code>e.cause</code> we get more information.</p>\n\n<pre><code>#&lt;URI::InvalidURIError: bad URI(is not URI?): \"http://software-engineering-handbook.com/Handbook/Video Series/\"&gt;\n</code></pre>\n\n<p>And also by looking at the headers from <code>curl -I 'http://software-engineering-handbook.com/Handbook/Video%20Series'</code>...</p>\n\n<pre><code>HTTP/1.1 303 See Other\nServer: Cowboy\nDate: Sat, 28 Dec 2019 21:41:28 GMT\nConnection: keep-alive\nContent-Type: text/html;charset=utf-8\nLocation: http://software-engineering-handbook.com/Handbook/Video Series/\n</code></pre>\n\n<p>And, indeed, the server is returning an invalid URI. Spaces are not allowed in a <a href=\"https://pretty-rfc.herokuapp.com/RFC3986#path\" rel=\"nofollow noreferrer\">URI path</a>. Ruby's URI class will not parse it.</p>\n\n<pre><code>&gt; URI(\"http://software-engineering-handbook.com/Handbook/Video Series/\")\nURI::InvalidURIError: bad URI(is not URI?): \"http://software-engineering-handbook.com/Handbook/Video Series/\"\nfrom /Users/schwern/.rvm/rubies/ruby-2.6.5/lib/ruby/2.6.0/uri/rfc3986_parser.rb:67:in `split'\n</code></pre>\n"}], "owner": {"reputation": 5610, "user_id": 413924, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a5fae9bf6a8e05a023c96ba434a1dfd5?s=128&d=identicon&r=PG", "display_name": "DannyB", "link": "https://stackoverflow.com/users/413924/dannyb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1577614503, "accepted_answer_id": 59515114, "answer_count": 1, "score": 0, "last_activity_date": 1577570073, "creation_date": 1577559714, "question_id": 59514020, "link": "https://stackoverflow.com/questions/59514020/openuri-fails-to-follow-urls-that-have-20", "closed_reason": "Duplicate", "title": "OpenURI fails to follow URLs that have %20", "body": "<p>I am having some issues with Ruby's OpenURI follow redirect functionality.</p>\n\n<p>When going to a URL that contains <code>%20</code> in it, and that redirects with a 30x, Ruby's OpenURI fails.</p>\n\n<ul>\n<li>The exact same URL, with a <code>+</code> instead of <code>%20</code> works.</li>\n<li>Both the <code>%20</code> and <code>+</code> versions work properly with <code>curl -L</code> (follow).</li>\n</ul>\n\n<h3>Code</h3>\n\n<pre><code>require 'open-uri'\n\nbase = \"http://software-engineering-handbook.com/Handbook\"\n\nputs \"===&gt; PASS: URI Open +\"\nresult = open \"#{base}/Video+Series\"\np result.status\n\nputs \"===&gt; PASS: Curl +\"\nputs `curl -LIsS \"#{base}/Video+Series\" | grep HTTP`\n\nputs \"===&gt; PASS: Curl %20\"\nputs `curl -LIsS \"#{base}/Video%20Series\" | grep HTTP`\n\nputs \"===&gt; FAIL: URI Open %20\"\nbegin\n  result = open \"#{base}/Video%20Series\"\n  p result.status\nrescue =&gt; e\n  puts \"#{e.class} #{e.message}\"\nend\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>===&gt; PASS: URI Open +\n[\"200\", \"OK\"]\n===&gt; PASS: Curl +\nHTTP/1.1 200 OK\n===&gt; PASS: Curl %20\nHTTP/1.1 303 See Other\nHTTP/1.1 200 OK\n===&gt; FAIL: URI Open %20\nOpenURI::HTTPError 302 Found (Invalid Location URI)\n</code></pre>\n\n<p>I am not sure what is going on here. Tried HTTParty (although I know it is just a wrapper), hoping to see a different behavior, but it also fails.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "edited": false, "score": 1, "creation_date": 1577647097, "post_id": 59512555, "comment_id": 105215989, "body": "besides botsnap error it showing ffi did you check this solution <a href=\"https://github.com/ffi/ffi/issues/687\" rel=\"nofollow noreferrer\">github.com/ffi/ffi/issues/687</a>"}, {"owner": {"reputation": 2898, "user_id": 605396, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4Qh4F.png?s=128&g=1", "display_name": "Marvin Danig", "link": "https://stackoverflow.com/users/605396/marvin-danig"}, "reply_to_user": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "edited": false, "score": 1, "creation_date": 1577676996, "post_id": 59512555, "comment_id": 105221658, "body": "I did rotate through these threads on Github. Guess each one is having their own solution to this problem and it depends on OS, system rubies and other environment/deployment configs. For me nothing has worked so far."}, {"owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "edited": false, "score": 0, "creation_date": 1577696796, "post_id": 59512555, "comment_id": 105226413, "body": "did you tried any other version of ruby/rails to install with rbenv?"}, {"owner": {"reputation": 2898, "user_id": 605396, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4Qh4F.png?s=128&g=1", "display_name": "Marvin Danig", "link": "https://stackoverflow.com/users/605396/marvin-danig"}, "reply_to_user": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "edited": false, "score": 0, "creation_date": 1577713565, "post_id": 59512555, "comment_id": 105233250, "body": "i did. the issue persists with rails 6.0.2/ruby 2.6.5 as well. i also tried MacOS Mojave instead of Catalina to see if downgrade would help."}], "answers": [{"comments": [{"owner": {"reputation": 731, "user_id": 10014963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x6ekF.png?s=128&g=1", "display_name": "MibraDev", "link": "https://stackoverflow.com/users/10014963/mibradev"}, "edited": false, "score": 1, "creation_date": 1579272983, "post_id": 59611846, "comment_id": 105722034, "body": "Have a look at this guide: <a href=\"https://gorails.com/setup/osx/10.15-catalina\" rel=\"nofollow noreferrer\">gorails.com/setup/osx/10.15-catalina</a>  You may also find the ruby-build wiki useful: <a href=\"https://github.com/rbenv/ruby-build/wiki#suggested-build-environment\" rel=\"nofollow noreferrer\">github.com/rbenv/ruby-build/wiki#suggested-build-environment</a>"}], "tags": [], "owner": {"reputation": 2898, "user_id": 605396, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4Qh4F.png?s=128&g=1", "display_name": "Marvin Danig", "link": "https://stackoverflow.com/users/605396/marvin-danig"}, "is_accepted": true, "score": 0, "last_activity_date": 1578371662, "last_edit_date": 1578371662, "creation_date": 1578312489, "answer_id": 59611846, "question_id": 59512555, "link": "https://stackoverflow.com/questions/59512555/rails-t-rails-server-puma-is-failing/59611846#59611846", "title": "$ rails -T &amp; $ rails server (puma) is failing", "body": "<p>After struggling for a week with this issue, I was forced to uninstall rbenv and purge all rubies under rbenv from my machine. I am now using the system rubies instead. My macbook pro has ruby 2.6.5 by default, so I bumped up the <code>.ruby-version</code> on my app from 2.5.1 to 2.6.7 to make sure i was on a development environment that \u201cworked.\u201d</p>\n"}], "owner": {"reputation": 2898, "user_id": 605396, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4Qh4F.png?s=128&g=1", "display_name": "Marvin Danig", "link": "https://stackoverflow.com/users/605396/marvin-danig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 59611846, "answer_count": 1, "score": 0, "last_activity_date": 1578371662, "creation_date": 1577549420, "question_id": 59512555, "link": "https://stackoverflow.com/questions/59512555/rails-t-rails-server-puma-is-failing", "title": "$ rails -T &amp; $ rails server (puma) is failing", "body": "<p>I have a rails 5.2.0 set up on my macos catalina with rbenv 1.1.2/ruby 2.5.1. At the root of my app I get the following error:</p>\n\n<pre><code>$ rails -T\nrails aborted!\nLoadError: dlopen(/Users/sa/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/ffi-1.11.1/lib/ffi_c.bundle, 9): Symbol not found: _ffi_type_double\n  Referenced from: /Users/sa/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/ffi-1.11.1/lib/ffi_c.bundle\n  Expected in: flat namespace\n in /Users/sa/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/ffi-1.11.1/lib/ffi_c.bundle - /Users/sa/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/ffi-1.11.1/lib/ffi_c.bundle\n/Users/sa/Projects/ror/bubblin.io/bubblin.io/config/application.rb:7:in `&lt;top (required)&gt;'\n/Users/sa/Projects/ror/bubblin.io/bubblin.io/Rakefile:1:in `&lt;top (required)&gt;'\nbin/rails:4:in `&lt;main&gt;'\n\nCaused by:\nLoadError: cannot load such file -- 2.5/ffi_c\n/Users/sa/Projects/ror/bubblin.io/bubblin.io/config/application.rb:7:in `&lt;top (required)&gt;'\n/Users/sa/Projects/ror/bubblin.io/bubblin.io/Rakefile:1:in `&lt;top (required)&gt;'\nbin/rails:4:in `&lt;main&gt;'\n\nCaused by:\nBootsnap::LoadPathCache::FallbackScan:\n\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>I can provide the full trace but just to know I reinstalled everything from scratch and my xcode-command-line tools/gcc are up-to-date. Is this something that has come up/been solved before?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 26, "user_id": 5054100, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204655637856181/picture?type=large", "display_name": "Jhonatan Teixeira", "link": "https://stackoverflow.com/users/5054100/jhonatan-teixeira"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1577546844, "post_id": 59512084, "comment_id": 105196169, "body": "I showed the output just so other can see the result I need, but I&#39;m generating an array of enumerators because I&#39;m not doing (x..y).to_a, but even though I&#39;m running out of memory. How could I use even less memory? PS: I will need the entire permutation array for later processing."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577547374, "post_id": 59512084, "comment_id": 105196310, "body": "It appears you wish to produce an array which, if flattened, would contain <code>n*(1+n)&#47;2 + (n-1)*n&#47;2 + ... + 1</code> elements. That is on the order of <code>n**3</code> elements (but there probably is a closed-form expression to compute that number that could be derived fairly easily). In any event, it\u2019s no surprise that you will have memory problems if you want to hold that array in memory when <code>n = 10**5</code>, regardless of how you compute it."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1577548325, "post_id": 59512084, "comment_id": 105196595, "body": "Even if you derived an enumerator to generate those arrays, or created a method <code>m</code> such that <code>m(i)</code> returned the ith array, you are still generating <code>n*(1+n)&#47;2</code> arrays upon which you are performing some operations. If <code>n = 10**5</code> that\u2019s a pretty big number, on the order of <code>10**10</code>. If you edit your question to explains why you want to generate all those arrays we may be able to be more helpful."}, {"owner": {"reputation": 26, "user_id": 5054100, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204655637856181/picture?type=large", "display_name": "Jhonatan Teixeira", "link": "https://stackoverflow.com/users/5054100/jhonatan-teixeira"}, "edited": false, "score": 0, "creation_date": 1577548949, "post_id": 59512084, "comment_id": 105196776, "body": "I edited the post to show the complete code. Thanks!"}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1577549546, "post_id": 59512084, "comment_id": 105196933, "body": "Using the bang versions of operators can help with memory as it means the action occurs on the current object rather than a duplicate. So use <code>map!</code> and <code>compact!</code>."}, {"owner": {"reputation": 26, "user_id": 5054100, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204655637856181/picture?type=large", "display_name": "Jhonatan Teixeira", "link": "https://stackoverflow.com/users/5054100/jhonatan-teixeira"}, "reply_to_user": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1577550513, "post_id": 59512084, "comment_id": 105197193, "body": "@ReggieB that is correct, but even not duplicating the object the base array is taking up to 800 mb of allocated memory after the permutations are generated."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1577553727, "post_id": 59512084, "comment_id": 105198093, "body": "You did not post anything reproducible, but I believe all you need is to make an enumerator lazy. It would slow down the computations a bit, but will run in <code>O(1)</code> of memory."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577558180, "post_id": 59512084, "comment_id": 105199287, "body": "This is really frustrating! You seem to want to create an array that contains ordered subsets of <code>arr = (1..n).to_a</code> that are not poisonous and/or allergic, but you have it in your head that you must first create a certain array of subsets of <code>arr</code> that have nothing to do with being poisonous and/or allergic and then remove certain arrays. That may not be the only or best way of doing it, however. That&#39;s often called an <a href=\"https://en.wikipedia.org/wiki/XY_problem\" rel=\"nofollow noreferrer\">X-Y problem</a>. Please define the arrays  <code>poisonous</code> and <code>allergic</code> (what is <code>poisonous[i]</code> and <code>allergic[i]</code>?)."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577558222, "post_id": 59512084, "comment_id": 105199298, "body": "...Also, do you want to exclude arrays that are <i>either</i> poisonous or allergic or arrays that are <i>both</i> poisonous and allergic? You revised question suggests it is the latter, which seems odd. One other thing: why do you care about the order of the elements in the array you wish to construct?"}, {"owner": {"reputation": 26, "user_id": 5054100, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204655637856181/picture?type=large", "display_name": "Jhonatan Teixeira", "link": "https://stackoverflow.com/users/5054100/jhonatan-teixeira"}, "edited": false, "score": 0, "creation_date": 1577561657, "post_id": 59512084, "comment_id": 105200160, "body": "The poisonous and allergic are arrays with random numbers lower than n. The order must be preserved, it is required from the problem im solving, not from the permutations array, but the numbers inside each permutation, they need to be contiguous. I was creating they array first because I need to have the combinations in hand so I can reject some of them, but I improved it a lot, checkout my answer below. The only thing now is that I still can&#39;t make it work for large N like 100000 or even 5000."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1577561932, "post_id": 59512084, "comment_id": 105200232, "body": "Please also answer the first question in my last comment. When replying to comments asking for clarification it is best to edit your question rather than elaborating in comments as not all readers read all comments. You forgot to include my username in your comment so SO did not inform me that a comment had been left for me. I know you understand that but be more vigilant in including usernames in comments, else they may never be read by the person to whom they are directed."}, {"owner": {"reputation": 26, "user_id": 5054100, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204655637856181/picture?type=large", "display_name": "Jhonatan Teixeira", "link": "https://stackoverflow.com/users/5054100/jhonatan-teixeira"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577562140, "post_id": 59512084, "comment_id": 105200281, "body": "@CarySwoveland a permutation array can&#39;t contain a number that is poisonous to another number that is in the allergic array and is also inside the permutation array, so the final permutation can&#39;t have both numbers. it&#39;s a bit confusing but that&#39;s it. And at the end I need the number of all clean combinations, without any poisonous or allergic numbers."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1577562648, "post_id": 59512084, "comment_id": 105200383, "body": "&quot;...a number that is poisonous to another number that is allergic...&quot; doesn&#39;t make sense. Numbers are neither poisonous nor allergic. Work harder at your explanation! If you with to compute only the number of &quot;clean combinations&quot; I don&#39;t understand why the order in which you process the combinations is important. Again, please edit your question. We&#39;re getting close and it seems to be an interesting question, so keep at it. One last thing: asking a clear, complete and precise question is an essential skill in coding, for the same is required when writing specs for code."}, {"owner": {"reputation": 26, "user_id": 5054100, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204655637856181/picture?type=large", "display_name": "Jhonatan Teixeira", "link": "https://stackoverflow.com/users/5054100/jhonatan-teixeira"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577563877, "post_id": 59512084, "comment_id": 105200667, "body": "@CarySwoveland I added more details to the question."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577564016, "post_id": 59512084, "comment_id": 105200698, "body": "So the arrays <code>poisonous</code> and <code>allergic</code> are always the same size? And, again, if you wish to compute only the number of &quot;clean combinations&quot; why is the order in which you process the combinations important?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577569784, "post_id": 59512084, "comment_id": 105201941, "body": "Here is an example of how you might state your question (if my understanding is correct): &#39;I am given <code>n</code> components. Some pairs are &quot;dangerous&quot;. I wish to compute the total number of combinations of subsets of these <code>n</code> compounds such that no subset contains any dangerous pairs of elements. The subsets range in size from <code>1</code> to <code>n</code>. The subsets are not ordered.&#39;"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577597367, "post_id": 59512084, "comment_id": 105205533, "body": "See &quot;<a href=\"https://meta.stackexchange.com/a/66378/153968\">What is the XY problem?</a>&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 5054100, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204655637856181/picture?type=large", "display_name": "Jhonatan Teixeira", "link": "https://stackoverflow.com/users/5054100/jhonatan-teixeira"}, "is_accepted": false, "score": 0, "last_activity_date": 1577554892, "creation_date": 1577554892, "answer_id": 59513358, "question_id": 59512084, "link": "https://stackoverflow.com/questions/59512084/how-to-improve-memory-usage-when-generating-a-contiguous-permutation/59513358#59513358", "title": "How to improve memory usage when generating a contiguous permutation", "body": "<p>I was able to solve the memory issue by using less variables as possible and doing calculations directly while generating the permutation, although processing time has increased a bit, it is using a lot less memory (dropped from 800mb to 32mb approximately). I'm open for suggestions to improve it even more.</p>\n\n<pre><code>counter = 0\n(1..n).each {|x|\n  (1..n).each {|y|\n    counter += 1 if !(x &gt; y) &amp;&amp; !poisonous.each_with_index.select {|poison, i|  (x..y).include?(poison) &amp;&amp; (x..y).include?(allergic[i])}.any?\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577569465, "post_id": 59514913, "comment_id": 105201870, "body": "Please let me know if my understanding of the question is incorrect."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1577569437, "last_edit_date": 1577569437, "creation_date": 1577567578, "answer_id": 59514913, "question_id": 59512084, "link": "https://stackoverflow.com/questions/59512084/how-to-improve-memory-usage-when-generating-a-contiguous-permutation/59514913#59514913", "title": "How to improve memory usage when generating a contiguous permutation", "body": "<p>The following computes the number of \"clean combinations\". As no large arrays are produced it has modest memory requirements.</p>\n\n<pre><code>require 'set'\n\ndef clean_combos(n, poisonous, allergic)\n  arr = (1..n).to_a\n  bad_allergies = poisonous.zip(allergic).to_h\n  arr.sum do |m|\n    arr.combination(m).sum do |combo|\n      combo_set = combo.to_set\n      bad_allergies.any? do |poison, allergy|\n        combo_set.include?(poison) &amp;&amp; combo_set.include?(allergy)\n      end ? 0 : 1\n    end\n  end\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>n = 10\npoisonous = [3,4,6]\nallergic = [5,6,7]\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>clean_combos(n, poisonous, allergic)\n  #=&gt; 479 \n</code></pre>\n\n<p><code>bad_allergies</code> is found to equal <code>{3=&gt;5, 4=&gt;6, 6=&gt;7}</code>.</p>\n\n<p>This concludes that, for the array <code>[1, 2,..., 10]</code>, there are 479 combinations of elements of size between <code>1</code> and <code>10</code> such that, for each combination, <code>3</code> and <code>5</code> are not both included, and neither are <code>4</code> and <code>5</code>, and <code>6</code> and <code>7</code>.</p>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-zip\" rel=\"nofollow noreferrer\">Array#zip</a>, <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-to_h\" rel=\"nofollow noreferrer\">Array#to_h</a>, <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-sum\" rel=\"nofollow noreferrer\">Array#sum</a>, <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-combination\" rel=\"nofollow noreferrer\">Array#combination</a>, <a href=\"https://ruby-doc.org/core-2.6.3/Hash.html#method-i-any-3F\" rel=\"nofollow noreferrer\">Hash#any?</a> and <a href=\"https://ruby-doc.org/stdlib-2.6.3/libdoc/set/rdoc/Set.html#method-i-include-3F\" rel=\"nofollow noreferrer\">Set#include?</a>. <code>Array#to_set</code> is added when <code>include 'set'</code> is executed.</p>\n\n<p>I've converted each <code>combo</code> to a set to speed lookups.</p>\n\n<p>Some tweaks might improve efficiency, so experimentation may be called for. This may depend on the size of the array <code>poisonous</code> (and of <code>allergic</code>) relative to <code>n</code>.</p>\n"}], "owner": {"reputation": 26, "user_id": 5054100, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204655637856181/picture?type=large", "display_name": "Jhonatan Teixeira", "link": "https://stackoverflow.com/users/5054100/jhonatan-teixeira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1577597163, "creation_date": 1577545881, "last_edit_date": 1577597163, "question_id": 59512084, "link": "https://stackoverflow.com/questions/59512084/how-to-improve-memory-usage-when-generating-a-contiguous-permutation", "title": "How to improve memory usage when generating a contiguous permutation", "body": "<p>I have code that needs to generate a contiguous permutation:</p>\n\n<pre><code>(1..n).flat_map {|x| array.map {|y| (x..y) unless x &gt; y } }.compact\n</code></pre>\n\n<p>Which outputs:</p>\n\n<pre><code>[[1], [1, 2], [1, 2, 3], [1, 2, 3, 4], [1, 2, 3, 4, 5], [2], [2, 3], [2, 3, 4], [2, 3, 4, 5], \n[3], [3, 4], [3, 4, 5], [4], [4, 5], [5]]\n</code></pre>\n\n<p>It works really well with low sizes of <code>n</code>, but when I have <code>n = 100000</code> I run out of memory.  Is there a way to improve this but keeping them contiguous?</p>\n\n<p>I need to perform a <code>reject!</code> iterating over <code>poisonous</code> and <code>allergic</code> arrays:</p>\n\n<pre><code>array = (1..n)\npermutations = array.flat_map {|x| array.map {|y| (x..y) unless x &gt; y } }.compact\n\npoisonous.each_with_index do |x, i|\n  permutations.reject! { |y| y.include?(x) &amp;&amp; y.include?(allergic[i]) }\nend\n</code></pre>\n\n<p>The problem:</p>\n\n<pre><code>poisonous = [3,4,6]\nallergic = [5,6,7]\n</code></pre>\n\n<p>These numbers can't be together:</p>\n\n<pre><code> 3 -&gt; 4\n 4 -&gt; 6\n 6 -&gt; 7\n\n combinations = [[1], [3,4], [4,5]] \n</code></pre>\n\n<p>So, <code>[3,4]</code> is not a valid combination.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 0, "creation_date": 1577545278, "post_id": 59511968, "comment_id": 105195795, "body": "can you specify which version of Ruby you&#39;re using? and the exact console output you&#39;re getting?"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1577560453, "post_id": 59512129, "comment_id": 105199913, "body": "You can also use <code>row.to_a</code>. I expect <code>to_a</code> is an alias of <code>fields</code>, or vice-versa."}], "tags": [], "owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "is_accepted": true, "score": 3, "last_activity_date": 1577597650, "last_edit_date": 1577597650, "creation_date": 1577546269, "answer_id": 59512129, "question_id": 59511968, "link": "https://stackoverflow.com/questions/59511968/not-getting-correct-value-of-each-line-in-csv-file/59512129#59512129", "title": "Not getting correct value of each line in CSV file", "body": "<p>Setting <code>:headers =&gt; true</code> in <a href=\"https://ruby-doc.org/stdlib-2.6.1/libdoc/csv/rdoc/CSV.html#method-c-new\" rel=\"nofollow noreferrer\"><code>new</code></a> causes <code>foreach</code> to yield a <a href=\"https://ruby-doc.org/stdlib-2.6.1/libdoc/csv/rdoc/CSV/Row.html\" rel=\"nofollow noreferrer\"><code>CSV::Row</code></a> object for each row instead of a plain Ruby array. See the <a href=\"https://ruby-doc.org/stdlib-2.6.1/libdoc/csv/rdoc/CSV.html#method-c-new\" rel=\"nofollow noreferrer\"><code>new</code></a> documentation for more information.</p>\n\n<p>To access the actual row fields, you need to use <code>row.fields</code>:</p>\n\n<pre><code>CSV.foreach(filename, :headers =&gt; true) do |row|\n name, age = row.fields\n puts name\nend\n</code></pre>\n\n<p>I'm not aware of a way to skip headers, use <code>CSV.foreach</code>, and still get a plain array for each row.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "edited": false, "score": 0, "creation_date": 1577565755, "post_id": 59514215, "comment_id": 105201110, "body": "@yu-coder, If the headers are <code>&#39;a&#39;</code>, <code>&#39;b&#39;</code>, <code>&#39;c&#39;</code>, <code>&#39;d&#39;</code> and <code>&#39;e&#39;</code> and you want the values of <code>&#39;e&#39;</code> and <code>&#39;b&#39;</code>, you could write <code>b, e = row.values_at(&#39;b&#39;, &#39;e&#39;)</code> or <code>_,b,_,_,e = rows.fields</code>. That part is similar but the former works regardless of the order of the headers. Also, if we are given an array <code>arr</code> of the headers of interest, in a particular order (e.g., <code>arr = [&#39;e&#39;, &#39;c&#39;]</code>), we can write <code>puts row.values_at(*arr)</code> or <code>arr.each { |header| puts row[header] }</code>, whereas that is problematic when using <code>fields</code>."}, {"owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "edited": false, "score": 0, "creation_date": 1577566744, "post_id": 59514215, "comment_id": 105201280, "body": "Understood. Thank you!"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1577561454, "creation_date": 1577561454, "answer_id": 59514215, "question_id": 59511968, "link": "https://stackoverflow.com/questions/59511968/not-getting-correct-value-of-each-line-in-csv-file/59514215#59514215", "title": "Not getting correct value of each line in CSV file", "body": "<p><code>name, age = row.fields</code> has the disadvantage that it requires the headers to be in a particular order (<code>'name'</code> followed by <code>'age'</code>). Normally when using CSV files you should not care about the order of the headers.</p>\n\n<p>Let's create the file:</p>\n\n<pre><code>s=&lt;&lt;~_\nname,age\nJack,38\nTom,43\n_\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>filename = 't.csv'\nFile.write(filename,s)\n  #=&gt; 24\n</code></pre>\n\n<p>You could write the following:</p>\n\n<pre><code>require 'csv'\n\nCSV.foreach(filename, :headers =&gt; true) do |row|\n  age, name = row.values_at('age', 'name')\n  puts name\n  puts age\nend\n</code></pre>\n\n<p>displays</p>\n\n<pre><code>Jack\n38\nTom\n43\n</code></pre>\n\n<p>Obviously, I could have instead written:</p>\n\n<pre><code>name, age = row.values_at('name', 'age')\n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/stdlib-2.6.3/libdoc/csv/rdoc/CSV/Row.html#method-i-values_at\" rel=\"nofollow noreferrer\">CSV::Row#values_at</a>. Alternatively (better), you could simply write:</p>\n\n<pre><code>CSV.foreach(filename, :headers =&gt; true) do |row|\n  puts row['name']\n  puts row['age']\nend\n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/stdlib-2.6.3/libdoc/csv/rdoc/CSV/Row.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">CSV::Row#[]</a>.</p>\n"}], "owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 2, "accepted_answer_id": 59512129, "answer_count": 2, "score": 2, "last_activity_date": 1577597650, "creation_date": 1577544806, "question_id": 59511968, "link": "https://stackoverflow.com/questions/59511968/not-getting-correct-value-of-each-line-in-csv-file", "title": "Not getting correct value of each line in CSV file", "body": "<p>CSV:</p>\n\n<pre><code>name,age\nJack,38\nTom,43\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>CSV.foreach(filename, :headers =&gt; true) do |row|\n name, age = row\n puts name # expected Jack, but getting [\"name\", \"Jack\"]\nend\n</code></pre>\n\n<p>I want to get each name and age but it doesn't work properly.</p>\n"}, {"tags": ["ruby", "each", "reduce"], "comments": [{"owner": {"reputation": 10071, "user_id": 771838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0169a78f851962058d63337ad0147d6?s=128&d=identicon&r=PG", "display_name": "rossta", "link": "https://stackoverflow.com/users/771838/rossta"}, "edited": false, "score": 0, "creation_date": 1577540020, "post_id": 59511322, "comment_id": 105194467, "body": "Your first example uses <code>if index</code> instead of <code>if array[index]</code> like the second"}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "reply_to_user": {"reputation": 10071, "user_id": 771838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0169a78f851962058d63337ad0147d6?s=128&d=identicon&r=PG", "display_name": "rossta", "link": "https://stackoverflow.com/users/771838/rossta"}, "edited": false, "score": 0, "creation_date": 1577540279, "post_id": 59511322, "comment_id": 105194522, "body": "@rossta While it&#39;s definitely a bad idea to name elements in the each block <code>index</code>, the <code>index</code> variable refers to the elements and not the <code>index</code> itself. So other than a bad name, there&#39;s no issue with that"}, {"owner": {"reputation": 10071, "user_id": 771838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0169a78f851962058d63337ad0147d6?s=128&d=identicon&r=PG", "display_name": "rossta", "link": "https://stackoverflow.com/users/771838/rossta"}, "edited": false, "score": 0, "creation_date": 1577569614, "post_id": 59511322, "comment_id": 105201900, "body": "Good point. Misreading on my part."}], "answers": [{"comments": [{"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "reply_to_user": {"reputation": 25, "user_id": 4529233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b01447ec9da4e8b0bcf9432ca6f2b3d9?s=128&d=identicon&r=PG&f=1", "display_name": "LRB83", "link": "https://stackoverflow.com/users/4529233/lrb83"}, "edited": false, "score": 0, "creation_date": 1577540475, "post_id": 59511350, "comment_id": 105194582, "body": "@LRB83 While it will work, it&#39;s a bad idea to use braces <code>{</code> <code>}</code> for blocks that spread on multiple lines. It&#39;s harder to read and against the style guide :)"}, {"owner": {"reputation": 25, "user_id": 4529233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b01447ec9da4e8b0bcf9432ca6f2b3d9?s=128&d=identicon&r=PG&f=1", "display_name": "LRB83", "link": "https://stackoverflow.com/users/4529233/lrb83"}, "edited": false, "score": 0, "creation_date": 1577540829, "post_id": 59511350, "comment_id": 105194670, "body": "thanks for the tip! In that case, errors amended, would you consider the .each method to be the better implementation?"}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "reply_to_user": {"reputation": 25, "user_id": 4529233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b01447ec9da4e8b0bcf9432ca6f2b3d9?s=128&d=identicon&r=PG&f=1", "display_name": "LRB83", "link": "https://stackoverflow.com/users/4529233/lrb83"}, "edited": false, "score": 0, "creation_date": 1577541320, "post_id": 59511350, "comment_id": 105194789, "body": "@LRB83 Each is a better choice than time for what you&#39;re trying to do, but there&#39;s a lot of things to be addressed here and I think that might be too broad for a single SO question, but consider using <code>unless</code> instead of <code>if !</code>, omitting <code>return</code> on the last line and naming the variable inside the block something other than <code>index</code>"}], "tags": [], "owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "is_accepted": true, "score": 1, "last_activity_date": 1577540360, "last_edit_date": 1577540360, "creation_date": 1577539929, "answer_id": 59511350, "question_id": 59511322, "link": "https://stackoverflow.com/questions/59511322/hardcoding-ruby-enumerablereduce-i-have-two-methods-but-only-one-works-why/59511350#59511350", "title": "Hardcoding Ruby Enumerable#reduce - I have two methods, but only one works. Why?", "body": "<p>In the first method the <code>return true</code> is inside the <code>#each</code> loop so it will check only the first element and return either true or false. In the second one it's after the loop, so it will return true only if the loop finishes completely wihtout finding any element that's false.</p>\n\n<pre><code>def reduce_to_all_true(array)\n  array.each do |index| # each loop starts here\n    if !index\n      return false\n    end\n  return true # this will return true if the first element of array is true\n  end # and ends here\nend\n\ndef reduce_to_all_true(array)\n  array.length.times { |index| # times loop starts here\n    if !array[index]\n      return false\n    end } #and ends here\n  return true #this will return true only if the times loop finishes\nend\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 4529233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b01447ec9da4e8b0bcf9432ca6f2b3d9?s=128&d=identicon&r=PG&f=1", "display_name": "LRB83", "link": "https://stackoverflow.com/users/4529233/lrb83"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 59511350, "answer_count": 1, "score": 1, "last_activity_date": 1577540360, "creation_date": 1577539736, "question_id": 59511322, "link": "https://stackoverflow.com/questions/59511322/hardcoding-ruby-enumerablereduce-i-have-two-methods-but-only-one-works-why", "title": "Hardcoding Ruby Enumerable#reduce - I have two methods, but only one works. Why?", "body": "<p>I'm a novice, and as an exercise, I have to hardcode a method that takes an array as an argument, and if ALL elements in that array are truthy, return true. If not, false.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def reduce_to_all_true(array)\n  array.each do |index|\n    if !index\n      return false\n    end\n  return true\n  end\nend\n</code></pre>\n\n<p>This returns true if ANY element is true... </p>\n\n<p>Meanwhile, the following: </p>\n\n<pre><code>def reduce_to_all_true(array)\n  array.length.times { |index|\n    if !array[index]\n      return false\n    end }\n  return true\nend\n</code></pre>\n\n<p>Behaves as expected. What I can't work out, is WHY? In my admittedly limited understanding, they are equivalent solutions. Can someone help me understand this? Thank you! </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "actionmailer"], "answers": [{"comments": [{"owner": {"reputation": 377, "user_id": 7079742, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/1KL5C.jpg?s=128&g=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/7079742/dev"}, "edited": false, "score": 1, "creation_date": 1577634398, "post_id": 59511408, "comment_id": 105212639, "body": "Thanks for pointing me to the right direction @codenamev ! :)))  It was as simple as adding the following to the application.rb file<code>require &quot;active_storage&#47;engine&quot;</code> and <code>require &quot;action_mailbox&#47;engine&quot;</code>"}], "tags": [], "owner": {"reputation": 1813, "user_id": 1047730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c2435beed6cd3c5be09b77e213e4184?s=128&d=identicon&r=PG", "display_name": "codenamev", "link": "https://stackoverflow.com/users/1047730/codenamev"}, "is_accepted": true, "score": 2, "last_activity_date": 1577540337, "creation_date": 1577540337, "answer_id": 59511408, "question_id": 59510916, "link": "https://stackoverflow.com/questions/59510916/rails-6-and-action-mailbox-setup/59511408#59511408", "title": "Rails 6 and action mailbox setup", "body": "<p>If that task can't be found, then it's generally one of two things:</p>\n\n<ol>\n<li>Your terminal is using a different version of rails when you run the script (maybe try <code>bundle exec rails action_mailbox:install</code>?)</li>\n<li>Some pieces were missed during the <a href=\"https://guides.rubyonrails.org/upgrading_ruby_on_rails.html#the-update-task\" rel=\"nofollow noreferrer\">Upgrade Task</a> that aren't requiring the new action mailbox tasks.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 4182697, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-r6oTLyYQuXs/AAAAAAAAAAI/AAAAAAAAB10/kwP-Xwc-6tE/photo.jpg?sz=128", "display_name": "Raphael", "link": "https://stackoverflow.com/users/4182697/raphael"}, "is_accepted": false, "score": 0, "last_activity_date": 1612435887, "creation_date": 1612435887, "answer_id": 66044143, "question_id": 59510916, "link": "https://stackoverflow.com/questions/59510916/rails-6-and-action-mailbox-setup/66044143#66044143", "title": "Rails 6 and action mailbox setup", "body": "<p>I had the same issue.\nBe sure, you require <code>action_mailbox/engine</code> in <code>application.rb</code></p>\n<pre><code>require 'action_mailbox/engine'\n</code></pre>\n"}], "owner": {"reputation": 377, "user_id": 7079742, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/1KL5C.jpg?s=128&g=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/7079742/dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "accepted_answer_id": 59511408, "answer_count": 2, "score": 1, "last_activity_date": 1612435887, "creation_date": 1577536394, "question_id": 59510916, "link": "https://stackoverflow.com/questions/59510916/rails-6-and-action-mailbox-setup", "title": "Rails 6 and action mailbox setup", "body": "<p>I've recently upgraded to <code>ruby 2.6.0p0 and rails 6.0.2.1</code>. And previously I had <code>ruby 2.3 and rails 5.2</code>.</p>\n\n<p>When I open up existing apps and just <code>bundle update</code> and then <code>rails s</code> everything is working just fine:</p>\n\n<pre><code>=&gt; Booting Puma\n=&gt; Rails 6.0.2.1 application starting in development \n=&gt; Run `rails server --help` for more startup options\nPuma starting in single mode...\n* Version 3.12.0 (ruby 2.6.0-p0), codename: Llamas in Pajamas\n* Min threads: 5, max threads: 5\n* Environment: development\n</code></pre>\n\n<p>But when I try to implement the new <a href=\"https://edgeguides.rubyonrails.org/action_mailbox_basics.html\" rel=\"nofollow noreferrer\">action mailbox</a> feature by entering this initially <code>rails action_mailbox:install</code> it returns the following error, this same error occurs if I enter this <code>rails action_text:install</code>.</p>\n\n<pre><code>rails aborted!\nDon't know how to build task 'action_mailbox:install' (See the list of available tasks with `rails --tasks`)\n</code></pre>\n\n<p>Any ideas why this is happening?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 1, "creation_date": 1577531759, "post_id": 59509298, "comment_id": 105192742, "body": "This is a pretty wild guess, but <code>make</code> generally reacts very badly to filenames with spaces in them. Can you rename <code>ruby files</code> to something like <code>ruby_files</code> so that it doesn\u2019t contain a space? You may need to reinstall whatever else is in there for it to have a proper effect."}, {"owner": {"reputation": 311, "user_id": 7105526, "user_type": "registered", "profile_image": "https://graph.facebook.com/1812496678973073/picture?type=large", "display_name": "B&#249;i Nh\u1eadt Duy", "link": "https://stackoverflow.com/users/7105526/b%c3%b9i-nh%e1%ba%adt-duy"}, "edited": false, "score": 0, "creation_date": 1577621207, "post_id": 59509298, "comment_id": 105209378, "body": "Can you give the logs from log file ?"}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 0, "creation_date": 1577855000, "post_id": 59509298, "comment_id": 105269149, "body": "To reinforce @simonwo&#39;s advice, I recommend <i>never</i> using spaces in names of files and directories that you intend to use, or be used by, the command line. I&#39;m wondering if you have the compilers and tools necessary to build native gems. You can test this by <code>gem install nokogiri</code>; that <i>might</i> give you a more specific error message."}], "owner": {"reputation": 159, "user_id": 11746373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uO3gcoZZNEw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rePhZCXRsr3lp0jmEQ-Bn0HBR4mIQ/photo.jpg?sz=128", "display_name": "Roy Xu", "link": "https://stackoverflow.com/users/11746373/roy-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577521819, "creation_date": 1577521819, "question_id": 59509298, "link": "https://stackoverflow.com/questions/59509298/errors-when-installing-rails", "title": "errors when installing rails", "body": "<p>I just downloaded ruby 2.6.5 and as well as sqlite3. I followed the tutorial to install rails and typed \"gem install rails\" in the command prompt but ran into this error. I have no idea what these things are and have been stuck here for quite a long time. Could someone give me some advice on this please? Any help will be greatly appreciated!</p>\n\n<pre><code>C:\\&gt;gem install rails\nTemporarily enhancing PATH for MSYS/MINGW...\nBuilding native extensions. This could take a while...\nERROR:  Error installing rails:\n        ERROR: Failed to build gem native extension.\n\n    current directory: D:/ruby files/Ruby26-x64/lib/ruby/gems/2.6.0/gems/websocket-driver-0.7.1/ext/websocket-driver\nD:/ruby\\ files/Ruby26-x64/bin/ruby.exe -I D:/ruby\\ files/Ruby26-x64/lib/ruby/2.6.0 -r ./siteconf20191228-14032-rudo55.rb extconf.rb\ncreating Makefile\n\ncurrent directory: D:/ruby files/Ruby26-x64/lib/ruby/gems/2.6.0/gems/websocket-driver-0.7.1/ext/websocket-driver\nmake \"DESTDIR=\" clean\nMakefile:269: *** multiple target patterns.  Stop.\n\ncurrent directory: D:/ruby files/Ruby26-x64/lib/ruby/gems/2.6.0/gems/websocket-driver-0.7.1/ext/websocket-driver\nmake \"DESTDIR=\"\nMakefile:269: *** multiple target patterns.  Stop.\n\nmake failed, exit code 2\n\nGem files will remain installed in D:/ruby files/Ruby26-x64/lib/ruby/gems/2.6.0/gems/websocket-driver-0.7.1 for inspection.\nResults logged to D:/ruby files/Ruby26-x64/lib/ruby/gems/2.6.0/extensions/x64-mingw32/2.6.0/websocket-driver-0.7.1/gem_make.out\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "git", "rubygems"], "comments": [{"owner": {"reputation": 6316, "user_id": 1184717, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7f8710cd5754a79df5dc5cd3d5308da2?s=128&d=identicon&r=PG", "display_name": "Mr.", "link": "https://stackoverflow.com/users/1184717/mr"}, "edited": false, "score": 0, "creation_date": 1577520991, "post_id": 59508511, "comment_id": 105190622, "body": "(1) which ruby version are you using? (2) are you using rbenv or rvm? (3) which version of rails are you trying to install? (4) are you using bundler?"}], "owner": {"reputation": 159, "user_id": 11746373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uO3gcoZZNEw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rePhZCXRsr3lp0jmEQ-Bn0HBR4mIQ/photo.jpg?sz=128", "display_name": "Roy Xu", "link": "https://stackoverflow.com/users/11746373/roy-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1928, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577522184, "creation_date": 1577512603, "last_edit_date": 1577522184, "question_id": 59508511, "link": "https://stackoverflow.com/questions/59508511/deprecated-bundler-with-clean-env-has-been-deprecated-in-favor-of-bundler-wit", "title": "DEPRECATED `Bundler.with_clean_env` has been deprecated in favor of `Bundler.with_unbundled_env`", "body": "<p>I just installed ruby on rails using railsinstaller and when I ran \"rails new myrubyblog\" in the Command Prompt with Ruby and Rails, this error occurred. I am not sure what this is and I tried to uninstall ruby on rails and install it again with railsinstaller but that did not seem to help. I've been stuck here for a long time and still cannot figure out a way around. Could anyone give me some hints on this please? Thanks!</p>\n\n<pre><code>\n# Rails Environment Configuration.\nC:/RailsInstaller/scripts/config_check.rb:28:in ``': No such file or directory - C:/RailsInstaller/Git/bin/git.exe config --global user.name (Errno::ENOENT)\n        from C:/RailsInstaller/scripts/config_check.rb:28:in `run'\n        from C:/RailsInstaller/scripts/config_check.rb:40:in `git_config'\n        from C:/RailsInstaller/scripts/config_check.rb:49:in `block in &lt;main&gt;'\n        from C:/RailsInstaller/scripts/config_check.rb:48:in `each'\n        from C:/RailsInstaller/scripts/config_check.rb:48:in `&lt;main&gt;'\n\nC:\\Sites&gt;rails new myrubyblog\n       exist\n   identical  README.md\n   identical  Rakefile\n   identical  config.ru\n   identical  .gitignore\n   identical  Gemfile\n         run  git init from \".\"\nReinitialized existing Git repository in C:/Sites/myrubyblog/.git/\n       exist  app\n   identical  app/assets/config/manifest.js\n   identical  app/assets/javascripts/application.js\n   identical  app/assets/javascripts/cable.js\n   identical  app/assets/stylesheets/application.css\n   identical  app/channels/application_cable/channel.rb\n   identical  app/channels/application_cable/connection.rb\n   identical  app/controllers/application_controller.rb\n   identical  app/helpers/application_helper.rb\n   identical  app/jobs/application_job.rb\n   identical  app/mailers/application_mailer.rb\n   identical  app/models/application_record.rb\n   identical  app/views/layouts/application.html.erb\n   identical  app/views/layouts/mailer.html.erb\n   identical  app/views/layouts/mailer.text.erb\n   identical  app/assets/images/.keep\n       exist  app/assets/javascripts/channels\n   identical  app/assets/javascripts/channels/.keep\n   identical  app/controllers/concerns/.keep\n   identical  app/models/concerns/.keep\n       exist  bin\n   identical  bin/bundle\n   identical  bin/rails\n   identical  bin/rake\n   identical  bin/setup\n   identical  bin/update\n   identical  bin/yarn\n       exist  config\n   identical  config/routes.rb\n   identical  config/application.rb\n   identical  config/environment.rb\n    conflict  config/secrets.yml\nOverwrite C:/Sites/myrubyblog/config/secrets.yml? (enter \"h\" for help) [Ynaqdhm]\n       force  config/secrets.yml\n   identical  config/cable.yml\n   identical  config/puma.rb\n       exist  config/environments\n   identical  config/environments/development.rb\n   identical  config/environments/production.rb\n   identical  config/environments/test.rb\n       exist  config/initializers\n   identical  config/initializers/application_controller_renderer.rb\n   identical  config/initializers/assets.rb\n   identical  config/initializers/backtrace_silencers.rb\n   identical  config/initializers/cookies_serializer.rb\n      create  config/initializers/cors.rb\n   identical  config/initializers/filter_parameter_logging.rb\n   identical  config/initializers/inflections.rb\n   identical  config/initializers/mime_types.rb\n      create  config/initializers/new_framework_defaults_5_1.rb\n   identical  config/initializers/wrap_parameters.rb\n       exist  config/locales\n   identical  config/locales/en.yml\n   identical  config/boot.rb\n   identical  config/database.yml\n       exist  db\n   identical  db/seeds.rb\n       exist  lib\n       exist  lib/tasks\n   identical  lib/tasks/.keep\n       exist  lib/assets\n   identical  lib/assets/.keep\n       exist  log\n   identical  log/.keep\n       exist  public\n   identical  public/404.html\n   identical  public/422.html\n   identical  public/500.html\n   identical  public/apple-touch-icon-precomposed.png\n   identical  public/apple-touch-icon.png\n   identical  public/favicon.ico\n   identical  public/robots.txt\n       exist  test/fixtures\n   identical  test/fixtures/.keep\n       exist  test/fixtures/files\n   identical  test/fixtures/files/.keep\n       exist  test/controllers\n   identical  test/controllers/.keep\n       exist  test/mailers\n   identical  test/mailers/.keep\n       exist  test/models\n   identical  test/models/.keep\n       exist  test/helpers\n   identical  test/helpers/.keep\n       exist  test/integration\n   identical  test/integration/.keep\n   identical  test/test_helper.rb\n       exist  test/system\n   identical  test/system/.keep\n   identical  test/application_system_test_case.rb\n       exist  tmp\n   identical  tmp/.keep\n       exist  tmp/cache\n       exist  tmp/cache/assets\n       exist  vendor\n   identical  vendor/.keep\n   identical  package.json\n      remove  config/initializers/cors.rb\n      remove  config/initializers/new_framework_defaults_5_1.rb\n         run  bundle install\n[DEPRECATED] `Bundler.with_clean_env` has been deprecated in favor of `Bundler.with_unbundled_env`. If you instead want the environment before bundler was originally loaded, use `Bundler.with_original_env` (called at C:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/railties-5.1.7/lib/rails/generators/app_base.rb:385)\n\n</code></pre>\n\n<p>Update:\nAfter deleting ruby and rails I reinstalled ruby 2.6.5. Then I tried to install rails by typing \"gem install rails\" in the command prompt as instructed by the tutorial <a href=\"https://www.tutorialspoint.com/ruby-on-rails/rails-installation.htm(I\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/ruby-on-rails/rails-installation.htm(I</a> also have sqlite3 in my computer). But again I ran into another error like this:</p>\n\n<pre><code>C:\\&gt;gem install rails\nTemporarily enhancing PATH for MSYS/MINGW...\nBuilding native extensions. This could take a while...\nERROR:  Error installing rails:\n        ERROR: Failed to build gem native extension.\n\n    current directory: D:/ruby files/Ruby26-x64/lib/ruby/gems/2.6.0/gems/websocket-driver-0.7.1/ext/websocket-driver\nD:/ruby\\ files/Ruby26-x64/bin/ruby.exe -I D:/ruby\\ files/Ruby26-x64/lib/ruby/2.6.0 -r ./siteconf20191228-14032-rudo55.rb extconf.rb\ncreating Makefile\n\ncurrent directory: D:/ruby files/Ruby26-x64/lib/ruby/gems/2.6.0/gems/websocket-driver-0.7.1/ext/websocket-driver\nmake \"DESTDIR=\" clean\nMakefile:269: *** multiple target patterns.  Stop.\n\ncurrent directory: D:/ruby files/Ruby26-x64/lib/ruby/gems/2.6.0/gems/websocket-driver-0.7.1/ext/websocket-driver\nmake \"DESTDIR=\"\nMakefile:269: *** multiple target patterns.  Stop.\n\nmake failed, exit code 2\n\nGem files will remain installed in D:/ruby files/Ruby26-x64/lib/ruby/gems/2.6.0/gems/websocket-driver-0.7.1 for inspection.\nResults logged to D:/ruby files/Ruby26-x64/lib/ruby/gems/2.6.0/extensions/x64-mingw32/2.6.0/websocket-driver-0.7.1/gem_make.out\n</code></pre>\n"}, {"tags": ["ruby", "geojson", "intersection", "rgeo"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 1837117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/grb5c.png?s=128&g=1", "display_name": "zippyferguson", "link": "https://stackoverflow.com/users/1837117/zippyferguson"}, "edited": false, "score": 0, "creation_date": 1577634653, "post_id": 59509710, "comment_id": 105212693, "body": "that is exactly what i was looking for."}], "tags": [], "owner": {"reputation": 8462, "user_id": 405865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29f04f339715955060858e0e65e1311?s=128&d=identicon&r=PG", "display_name": "fphilipe", "link": "https://stackoverflow.com/users/405865/fphilipe"}, "is_accepted": true, "score": 1, "last_activity_date": 1577525951, "creation_date": 1577525951, "answer_id": 59509710, "question_id": 59507870, "link": "https://stackoverflow.com/questions/59507870/how-to-do-an-intersection-of-geojson-with-rgeo/59509710#59509710", "title": "How to do an intersection of geojson with rgeo?", "body": "<p>The issue with your code is that <code>RGeo::GeoJSON.decode</code> doesn't return geometries, but an instance of <a href=\"https://www.rubydoc.info/gems/rgeo-geojson/RGeo/GeoJSON/FeatureCollection\" rel=\"nofollow noreferrer\"><code>RGeo::GeoJSON::FeatureCollection</code></a>.</p>\n\n<p>You first have to extract the relevant geometries, i.e. the array of points and the polygon, respectively.</p>\n\n<p>This snippet does what you want:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'rgeo'\nrequire 'rgeo/geo_json'\n\npoints = RGeo::GeoJSON\n  .decode(File.open('points.geojson'))\n  .map(&amp;:geometry)\nputs points\n\npolygon = RGeo::GeoJSON\n  .decode(File.open(\"outline.geojson\"))\n  .first\n  .geometry\nputs polygon\n\ncontained_points = points.select { |p| p.within?(polygon) }\nputs contained_points\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 1837117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/grb5c.png?s=128&g=1", "display_name": "zippyferguson", "link": "https://stackoverflow.com/users/1837117/zippyferguson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 59509710, "answer_count": 1, "score": 0, "last_activity_date": 1577525951, "creation_date": 1577503711, "question_id": 59507870, "link": "https://stackoverflow.com/questions/59507870/how-to-do-an-intersection-of-geojson-with-rgeo", "title": "How to do an intersection of geojson with rgeo?", "body": "<p>I am new to ruby and experimenting with rgeo.</p>\n\n<p>I have 2 geojson files:\npoints.geojson contains a number of points\nhere is a gist of <a href=\"https://gist.github.com/FergusDevelopmentLLC/2a4314be6d43ecda163979127d71caf5\" rel=\"nofollow noreferrer\">points.geojson</a></p>\n\n<p>outline.geojson contains a single polygon\nhere is a gist of my <a href=\"https://gist.github.com/FergusDevelopmentLLC/1a7ae0708d7a8ee9e113f13654d39a4e\" rel=\"nofollow noreferrer\">outline.geojson</a>:</p>\n\n<p>I want the intersection (points that are contained within outline)</p>\n\n<p>Here is what I am trying...</p>\n\n<pre><code>require 'rgeo'\nrequire 'rgeo/geo_json'\n\npoints_str = File.read(\"points.geojson\")\npoints = RGeo::GeoJSON.decode(points_str, json_parser: :json)\nputs points\n\noutline_str = File.read(\"outline.geojson\")\noutline = RGeo::GeoJSON.decode(outline_str, json_parser: :json)\nputs outline\n\nputs points.intersection outline\n</code></pre>\n\n<p>The error I get:\nintersection.rb:12:in ': undefined method intersection' for #RGeo::GeoJSON::FeatureCollection:0x294ac44 (NoMethodError)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec-rails", "guard"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1577529045, "post_id": 59507672, "comment_id": 105192192, "body": "Try updating the pry gem. <a href=\"https://github.com/pry/pry/pull/1904\" rel=\"nofollow noreferrer\">github.com/pry/pry/pull/1904</a>"}, {"owner": {"reputation": 2300, "user_id": 2874507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bTf3QWEeXi0/AAAAAAAAAAI/AAAAAAAAAvA/G7Uh0JZWsOk/photo.jpg?sz=128", "display_name": "Abhilash", "link": "https://stackoverflow.com/users/2874507/abhilash"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1577554588, "post_id": 59507672, "comment_id": 105198333, "body": "@max updating wont work. Is there any way to hide the warnings in guard?"}], "answers": [{"comments": [{"owner": {"reputation": 2362, "user_id": 2585189, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/572230673/picture?type=large", "display_name": "Jay Killeen", "link": "https://stackoverflow.com/users/2585189/jay-killeen"}, "edited": false, "score": 0, "creation_date": 1583898873, "post_id": 60101490, "comment_id": 107264053, "body": "This worked for me but also required <code>bundle exec guard start</code> instead of just <code>guard start</code> ... in case you still are seeing warning messages."}], "tags": [], "owner": {"reputation": 671, "user_id": 4114896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67bfa1ead5b0ceda5fbb5b3ea772f359?s=128&d=identicon&r=PG", "display_name": "MatzFan", "link": "https://stackoverflow.com/users/4114896/matzfan"}, "is_accepted": false, "score": 4, "last_activity_date": 1581014022, "creation_date": 1581014022, "answer_id": 60101490, "question_id": 59507672, "link": "https://stackoverflow.com/questions/59507672/using-guard-with-rspec-in-rails-6-showing-warnings/60101490#60101490", "title": "using guard with rspec in rails 6 showing warnings", "body": "<p>This is a known upstream <a href=\"https://github.com/pry/pry/issues/2097\" rel=\"nofollow noreferrer\">bug</a> in Pry specific to Ruby 2.7. Given Pry hasn't been updated in a while, a suggested fix (which worked for me) is to pull Pry from GitHub:</p>\n\n<pre><code># Gemfile\nsource 'https://rubygems.org'\n\ngem 'pry', git: 'https://github.com/pry/pry.git', ref: '272b3290b5250d28ee82a5ff65aa3b29b825e37b'\n</code></pre>\n"}], "owner": {"reputation": 2300, "user_id": 2874507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bTf3QWEeXi0/AAAAAAAAAAI/AAAAAAAAAvA/G7Uh0JZWsOk/photo.jpg?sz=128", "display_name": "Abhilash", "link": "https://stackoverflow.com/users/2874507/abhilash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 881, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1581014022, "creation_date": 1577500318, "question_id": 59507672, "link": "https://stackoverflow.com/questions/59507672/using-guard-with-rspec-in-rails-6-showing-warnings", "title": "using guard with rspec in rails 6 showing warnings", "body": "<p>When running <code>bundle exec guard</code> getting these warnings. </p>\n\n<pre><code>&lt;main&gt;:1: warning: __FILE__ in eval may not return location in binding; use Binding#source_location instead\n/home/workstation/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/pry-0.12.2/lib/pry/commands/whereami.rb:40: warning: in `eval'\n&lt;main&gt;:1: warning: __LINE__ in eval may not return location in binding; use Binding#source_location instead\n/home/workstation/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/pry-0.12.2/lib/pry/commands/whereami.rb:41: warning: in `eval'\n&lt;main&gt;:1: warning: __FILE__ in eval may not return location in binding; use Binding#source_location instead\n/home/workstation/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/pry-0.12.2/lib/pry/method/weird_method_locator.rb:88: warning: in `eval'\n&lt;main&gt;:1: warning: __FILE__ in eval may not return location in binding; use Binding#source_location instead\n/home/workstation/.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/pry-0.12.2/lib/pry/method/weird_method_locator.rb:80: warning: in `eval'\n</code></pre>\n\n<p>Its clearly coming from pry gem &amp; too frustrating to see these on all test runs. How can I hide this from showing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "nokogiri"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 9531873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7357fb8dc1f68359d07374bf3a32c043?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Flores", "link": "https://stackoverflow.com/users/9531873/diego-flores"}, "edited": false, "score": 0, "creation_date": 1577502413, "post_id": 59507535, "comment_id": 105188242, "body": "ah interesting. I&#39;m getting another issue when doing that: <code>Gem::Ext::BuildError: ERROR: Failed to build gem native extension.</code> But I&#39;ll try looking more into that, thanks!"}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": true, "score": 2, "last_activity_date": 1577582929, "last_edit_date": 1577582929, "creation_date": 1577497769, "answer_id": 59507535, "question_id": 59507448, "link": "https://stackoverflow.com/questions/59507448/how-to-use-a-specific-nokogiri-version-for-rails-application/59507535#59507535", "title": "How to use a specific Nokogiri version for Rails application", "body": "<p>Nokogiri is used by Rails, so you don't need to add it to your Gemfile, but you can update the version in your <code>Gemfile.lock</code> using:</p>\n\n<pre><code>bundle update nokogiri\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 9531873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7357fb8dc1f68359d07374bf3a32c043?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Flores", "link": "https://stackoverflow.com/users/9531873/diego-flores"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 59507535, "answer_count": 1, "score": 0, "last_activity_date": 1577582929, "creation_date": 1577496426, "last_edit_date": 1577582845, "question_id": 59507448, "link": "https://stackoverflow.com/questions/59507448/how-to-use-a-specific-nokogiri-version-for-rails-application", "title": "How to use a specific Nokogiri version for Rails application", "body": "<p>I'm trying to run a Rails application that I wrote a couple of years ago, however I keep getting this error when I run <code>rails server</code>:</p>\n\n<pre><code>/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/rubygems/dependency.rb:319:in `to_specs': Could not find 'nokogiri' (&gt;= 1.5.9) - did find: [nokogiri-1.5.6] (Gem::LoadError)\n</code></pre>\n\n<p>I'm pretty confused, since I have Nokogiri v1.8.2 and v1.10.7 installed and see them under <code>.gem/ruby/2.3.0</code> and <code>/Library/Ruby/Gems/2.3.0</code>. I don't see Nokogiri v1.5.6 though, so I'm not sure where the application is getting that from.</p>\n\n<p>I tried adding</p>\n\n<pre><code>gem 'nokogiri', '~&gt; 1.10', '&gt;= 1.10.3'\n</code></pre>\n\n<p>to the Gemfile, as well as </p>\n\n<pre><code>gem 'nokogiri', '~&gt; 1.5.6'\n</code></pre>\n\n<p>I'm trying to figure out if I can change the <code>GEM_PATH</code>, but hopefully there's another solution I'm not seeing.</p>\n"}, {"tags": ["ruby", "average", "matchmaking"], "comments": [{"owner": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "edited": false, "score": 0, "creation_date": 1577492664, "post_id": 59507188, "comment_id": 105187118, "body": "That could be a rather sophisticated problem in computer science."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1577497629, "post_id": 59507188, "comment_id": 105187711, "body": "Since the teams are the same size, minimizing the absolute difference in mean ranks is equivalent to minimizing the difference in total ranks, the latter being simpler to implement. I suggest you avoid monkey-patching Ruby&#39;s core classes, particularly when overwriting an existing method, <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-sum\" rel=\"nofollow noreferrer\">Array#sum</a> ! Instead, <code>def avg(arr); arr.sum.fdiv(arr.size); end</code>."}, {"owner": {"reputation": 17, "user_id": 5786495, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JdjdPlCHiys/AAAAAAAAAAI/AAAAAAAAT_A/5ZEILiCIuD0/photo.jpg?sz=128", "display_name": "sapphyrus", "link": "https://stackoverflow.com/users/5786495/sapphyrus"}, "edited": false, "score": 0, "creation_date": 1577501223, "post_id": 59507188, "comment_id": 105188118, "body": "Thanks, I didn&#39;t know Array#sum was a part of the core library now! Edited my original question."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1577524915, "post_id": 59507188, "comment_id": 105191343, "body": "@sapphyrus : How about sorting the array by rank, and then taking successive pairs from this sorted array? In your example, it would pair the ranks 0-2, 3-3, 3-5, 5-9."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1577498726, "last_edit_date": 1577498726, "creation_date": 1577497339, "answer_id": 59507510, "question_id": 59507188, "link": "https://stackoverflow.com/questions/59507188/ruby-divide-array-into-2-arrays-with-the-closest-possible-average/59507510#59507510", "title": "Ruby: Divide array into 2 arrays with the closest possible average", "body": "<p>If there are n players, where n is an even number, there are</p>\n\n<pre><code>C(n) = n!/((n/2)!(n/2)!)\n</code></pre>\n\n<p>ways to partition the n players into two teams of n/2 players, where n! equals n-facorial. This is often expressed as the number of ways to choosing n/2 items from a collection of n items.</p>\n\n<p>To obtain the partition that has a mimimum absolute difference in total ranks (and hence, in mean ranks), one would have to enumerate all C(n) partitions. If n = 8, as in this example, C(8) = 70 (see, for example, <a href=\"https://www.calculator.net/permutation-and-combination-calculator.html?cnv=32&amp;crv=16&amp;x=57&amp;y=16\" rel=\"nofollow noreferrer\">this online calculator</a>). If, however, n = 16, then C(16) = 12,870 and C(32) = 601,080,390. This gives you an idea of how small n must be in order perform a complete enumeration.</p>\n\n<p>If n is too large to enumerate all combinations you must resort to using a <em>heuristic</em>, or a subjective rule for partitioning the array of ranks. Here are two possibilities:</p>\n\n<ul>\n<li>assign the highest rank element (\"rank 1\") to team A, assign elements with ranks 2 and 3 to team B, assign elements with ranks 4 and 5 to team A, and so on.</li>\n<li>assign elements with ranks 1 and n to team A, elements with ranks 2 and n-1 to team B, and so on.</li>\n</ul>\n\n<p>The trouble with heuristics is evaluating their effectiveness. For this problem, for every heuristic you devise there is an array of ranks for which the heuristic's performance is abysmal. If you know the universe of possible arrays of ranks and have a way of drawing unbiased samples you can evaluate the heuristic statistically. That generally is not possible, however.</p>\n\n<p>Here is how you could examine all partitions. Suppose:</p>\n\n<pre><code>ranks = [3, 3, 0, 2, 5, 9, 3, 5] \n</code></pre>\n\n<p>Then we may perform the following calculations.</p>\n\n<pre><code>indices = ranks.size.times.to_a\n  #=&gt; [0, 1, 2, 3, 4, 5, 6, 7] \nteam_a = indices.combination(ranks.size/2).min_by do |combo|\n   team_b = indices - combo\n   (combo.sum { |i| ranks[i] } - team_b.sum { |i| ranks[i] }).abs\nend\n  #=&gt; [0, 1, 2, 5]\nteam_b = indices - team_a\n  #=&gt; [3, 4, 6, 7]\n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-combination\" rel=\"nofollow noreferrer\">Array#combination</a> and <a href=\"https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-min_by\" rel=\"nofollow noreferrer\">Enumerable#min_by</a>.</p>\n\n<p>We see that team A players have ranks:</p>\n\n<pre><code>arr = ranks.values_at(*team_a)\n  #=&gt; [3, 3, 0, 9]\n</code></pre>\n\n<p>and the sum of those ranks is:</p>\n\n<pre><code>arr.sum\n  #=&gt; 15\n</code></pre>\n\n<p>Similarly, for team B:</p>\n\n<pre><code>arr = ranks.values_at(*team_b)\n  #=&gt; [2, 5, 3, 5] \narr.sum\n  #=&gt; 15 \n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-values_at\" rel=\"nofollow noreferrer\">Array#values_at</a>.</p>\n"}], "owner": {"reputation": 17, "user_id": 5786495, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JdjdPlCHiys/AAAAAAAAAAI/AAAAAAAAT_A/5ZEILiCIuD0/photo.jpg?sz=128", "display_name": "sapphyrus", "link": "https://stackoverflow.com/users/5786495/sapphyrus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 1, "accepted_answer_id": 59507510, "answer_count": 1, "score": 1, "last_activity_date": 1577501234, "creation_date": 1577492412, "last_edit_date": 1577501234, "question_id": 59507188, "link": "https://stackoverflow.com/questions/59507188/ruby-divide-array-into-2-arrays-with-the-closest-possible-average", "title": "Ruby: Divide array into 2 arrays with the closest possible average", "body": "<p><strong>Background:</strong> I'm working on a \"matchmaking system\" for a small multiplayer video game side project. Every player has a rank from 0-10, every team has 4 players. I'm trying to find a good way to balance out the teams so that the average rank of both of them is as close as possible and the match is as fair as possible.</p>\n\n<p>My current, flawed approach looks like this:</p>\n\n<pre><code>def create_teams(players)\n    teams = Hash.new{|hash, team| hash[team] = []}\n\n    players.sort_by(&amp;:rank).each_slice(2) do |slice|\n        teams[:team1] &lt;&lt; slice[0]\n        teams[:team2] &lt;&lt; slice[1]\n    end\n\n    teams\nend\n</code></pre>\n\n<p>This works decently well if the ranks are already pretty similar but it's not a proper solution to this problem.\nFor example, it fails in a situation like this:</p>\n\n<pre><code>require \"ostruct\"\n\nclass Array\n    def avg\n        sum.fdiv(size)\n    end\nend\n\ndummy_players = [9, 5, 5, 3, 3, 3, 2, 0].map{|rank| OpenStruct.new(rank: rank)}\n\nteams = create_teams(dummy_players)\nteams.each do |team, players|\n    ranks = players.map(&amp;:rank)\n    puts \"#{team} - ranks: #{ranks.inspect}, avg: #{ranks.avg}\"\nend\n</code></pre>\n\n<p>This results in pretty unfair teams:</p>\n\n<pre><code>team1 - ranks: [0, 3, 3, 5], avg: 2.75\nteam2 - ranks: [2, 3, 5, 9], avg: 4.75\n</code></pre>\n\n<p>Instead, I'd like the teams in this situation to be like this:</p>\n\n<pre><code>team1 - ranks: [0, 3, 3, 9], avg: 3.75\nteam2 - ranks: [2, 3, 5, 5], avg: 3.75\n</code></pre>\n"}, {"tags": ["ruby", "api", "paypal", "paypal-sandbox", "paypal-rest-sdk"], "answers": [{"tags": [], "owner": {"reputation": 14625, "user_id": 2069605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06d4b7148dd01f17ac266a6d0ca523de?s=128&d=identicon&r=PG", "display_name": "Preston PHX", "link": "https://stackoverflow.com/users/2069605/preston-phx"}, "is_accepted": false, "score": 0, "last_activity_date": 1577550822, "creation_date": 1577550822, "answer_id": 59512755, "question_id": 59506849, "link": "https://stackoverflow.com/questions/59506849/how-do-i-create-edit-configure-multiple-paypal-standard-payment-buttons/59512755#59512755", "title": "How do I create/edit/configure multiple PayPal Standard Payment Buttons?", "body": "<p>If you have Wordpress, then you have a local database, and might end up much happier with a solution that stores quantities locally in that database, such as the WooCommerce plugin, with the following additional plugin for payment: <a href=\"https://woocommerce.com/woocommerce-and-paypal/\" rel=\"nofollow noreferrer\">https://woocommerce.com/woocommerce-and-paypal/</a></p>\n\n<p>Your proposed solution of using PayPal Standard Buttons with the legacy PayPal Button Manager API .. is extremely unconventional in contrast, and would be considered a \"terrible, horrible, no good, very bad\" hack by most.</p>\n"}], "owner": {"reputation": 11, "user_id": 3857721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21616f8a1e9b67894ffb07cbe751bcc4?s=128&d=identicon&r=PG", "display_name": "Kostas Gogas", "link": "https://stackoverflow.com/users/3857721/kostas-gogas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577550822, "creation_date": 1577488245, "question_id": 59506849, "link": "https://stackoverflow.com/questions/59506849/how-do-i-create-edit-configure-multiple-paypal-standard-payment-buttons", "title": "How do I create/edit/configure multiple PayPal Standard Payment Buttons?", "body": "<p>I have created an ecommerce store, and I'm using <a href=\"https://www.paypal.com/buttons/\" rel=\"nofollow noreferrer\">PayPal \"Add to Cart\" Buttons</a> with what they call 'hosted' buttons (PayPal stores the buttons on their servers) for each of my products.</p>\n\n<h3>For reference on how they work (and why I use them):</h3>\n\n<ol>\n<li>You create a button(product) inside your PayPal Dashboard and you define the quantity available (most of them are 1 in my case)</li>\n<li>You copy the HTML code into your website (or just copy the link)</li>\n<li>The user buys the product (and the quantity falls -1)</li>\n</ol>\n\n<p>The reason I use this setup is because my website is static, and PayPal provides the Quanity (SKU) Management - so no one can buy a product that no longer exists - even if he can access the button/link.</p>\n\n<h2>My Problem</h2>\n\n<p>The PayPal GUI dashboard for creating buttons is very time-consuming, I would like to have the ability to edit/create etc. buttons in bulk.</p>\n\n<p>I had search and search for a solution online but have found nothing.</p>\n\n<h2>Possible Solution</h2>\n\n<p>The only thing I've recently gave some thought was the <a href=\"https://developer.paypal.com/docs/classic/products/button-manager/\" rel=\"nofollow noreferrer\">PayPal Button Manager API</a> and the Ruby SDK in particular, but even if I've studied programming and I'm really eager to keep learning more, I don't know yet what to do in order to make the API calls.</p>\n\n<p>I can't understand from their documentation and I have found zero tutorials online for such a thing.</p>\n\n<h3>Failed Solution</h3>\n\n<p>As I was familiar with WordPress I tried installing a plugin called <a href=\"https://github.com/angelleye/paypal-wp-button-manager\" rel=\"nofollow noreferrer\">PayPal Button Manager</a> but it hasn't the ability to edit in bulk, which is what I'm trying to do.</p>\n\n<hr>\n\n<p>All in all, I want to:</p>\n\n<ul>\n<li>Create, Edit, Delete, Update in bulk <strong>PayPal Hosted Add to Cart Buttons</strong></li>\n<li>If using the Ruby API, I would much prefer doing so in a local environment</li>\n</ul>\n\n<hr>\n\n<blockquote>\n  <p>I'm using Jekyll for my static site, so I'm having Ruby installed and have read multiple times that it's an 'easy' to learn language. But if you can think of something else, I'm open.</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "factory-bot", "rspec-rails"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1577480925, "post_id": 59506011, "comment_id": 105184654, "body": "One &quot;row method&quot;, how&#39;s that?"}, {"owner": {"reputation": 1073, "user_id": 4024628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xc5J8.jpg?s=128&g=1", "display_name": "Allison", "link": "https://stackoverflow.com/users/4024628/allison"}, "edited": false, "score": 0, "creation_date": 1577483544, "post_id": 59506011, "comment_id": 105185306, "body": "I don&#39;t really think there&#39;s enough information to answer this question. If it&#39;s a text field attribute on the model you&#39;re creating a factory for, then <code>name { &#39;John }</code> inside the factory should work. If you have uniqueness validation on the column, it should fail with a different error. If you&#39;re declaring a let var in rspec, then you&#39;d do something like <code>let(:user) { create :user, name: &#39;John&#39; }</code>.   Could you add more detail about the model and factory?"}], "answers": [{"tags": [], "owner": {"reputation": 580, "user_id": 1293749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08497221017521ae126ca4fa7134ce8e?s=128&d=identicon&r=PG", "display_name": "Jim Ryan", "link": "https://stackoverflow.com/users/1293749/jim-ryan"}, "is_accepted": true, "score": 2, "last_activity_date": 1577486143, "creation_date": 1577486143, "answer_id": 59506647, "question_id": 59506011, "link": "https://stackoverflow.com/questions/59506011/how-do-you-define-a-text-field-with-factorybot/59506647#59506647", "title": "How do you define a text field with FactoryBot?", "body": "<p><code>method</code> is defined on <code>Object</code> by Ruby.  If your table column is called \"method\", you're going to run into all sorts of issues. You may be able to work around this specific error, but more will likely crop up.  My best advice would be to rename your column and move on. </p>\n\n<p>Edit: To clarify - this has nothing to do with your column type. It has to do with your column being named \"method.\"</p>\n"}], "owner": {"reputation": 23, "user_id": 2475306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db41f879b148b50b8c66a9fb8268d283?s=128&d=identicon&r=PG", "display_name": "user2475306", "link": "https://stackoverflow.com/users/2475306/user2475306"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 59506647, "answer_count": 1, "score": -2, "last_activity_date": 1577486143, "creation_date": 1577480660, "question_id": 59506011, "link": "https://stackoverflow.com/questions/59506011/how-do-you-define-a-text-field-with-factorybot", "title": "How do you define a text field with FactoryBot?", "body": "<p>I'm using FactoryBot to help test my Rails application.</p>\n\n<p>It works great, except I get an error when trying to define a text field.</p>\n\n<p>For a string, you simply use <code>name { \"John\" }</code>, but I have one row, method, in my db which is a text field. When I try to define that row as follows:</p>\n\n<pre><code>method { \"Some method here\" }\n</code></pre>\n\n<p>it returns</p>\n\n<pre><code>ArgumentError:\n  wrong number of arguments (given 0, expected 1)\n</code></pre>\n\n<p>Anyone know the syntax to define a text field with FactoryBot?</p>\n"}, {"tags": ["ruby", "parsing", "functional-programming"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1577573472, "post_id": 59504821, "comment_id": 105202637, "body": "Why is the question tagged <i>functional-programming</i>?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577769893, "post_id": 59504821, "comment_id": 105249399, "body": "Can you tell us how you got that string? This sounds like it is an XY Problem. See &quot;<a href=\"https://meta.stackexchange.com/a/66378/153968\">What is the XY problem?</a>&quot; for more information. Also, see the &quot;<a href=\"https://meta.stackoverflow.com/questions/260648\">Stack Overflow question checklist</a>&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1577476420, "post_id": 59505063, "comment_id": 105183354, "body": "Whenever <code>split</code> gives you an unwanted string at the beginning and/or end of the array try using <code>scan</code>."}, {"owner": {"reputation": 11200, "user_id": 1055395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6778daa107272cbbf6bc69c6c24683?s=128&d=identicon&r=PG&f=1", "display_name": "Anatolii", "link": "https://stackoverflow.com/users/1055395/anatolii"}, "edited": false, "score": 4, "creation_date": 1577489700, "post_id": 59505063, "comment_id": 105186663, "body": "Please add a small explanation why this post answers the question."}], "tags": [], "owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "is_accepted": false, "score": 0, "last_activity_date": 1577473768, "creation_date": 1577473768, "answer_id": 59505063, "question_id": 59504821, "link": "https://stackoverflow.com/questions/59504821/return-characters-between-each-set-of-delimiters-in-a-string/59505063#59505063", "title": "Return characters between each set of delimiters in a string", "body": "<pre><code>str.split(%r{\\[(.*?)\\]}).reject(&amp;:empty?)\n=&gt; [\"hello\", \"my\", \"friend\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1577506822, "last_edit_date": 1577506822, "creation_date": 1577474463, "answer_id": 59505162, "question_id": 59504821, "link": "https://stackoverflow.com/questions/59504821/return-characters-between-each-set-of-delimiters-in-a-string/59505162#59505162", "title": "Return characters between each set of delimiters in a string", "body": "<p>So many ways.</p>\n\n<pre><code>str = \"[hello][my][friend]\"\n</code></pre>\n\n<p>Here are a few that use <a href=\"https://ruby-doc.org/core-2.6.3/String.html#method-i-scan\" rel=\"nofollow noreferrer\">String#scan</a>. All return <code>[\"hello\", \"my\", \"friend\"]</code>:</p>\n\n<p>Match one or more characters other than <code>'['</code> and <code>']'</code>:</p>\n\n<pre><code>str.scan /[^\\[\\]]+/          \n</code></pre>\n\n<p>Match one or more Unicode alphanumeric characters:</p>\n\n<pre><code>str.scan /\\p{Alnum}+/\n</code></pre>\n\n<p>Match one or more characters, lazily, in a capture group, bracketed by <code>'['</code> and <code>']'</code>:</p>\n\n<pre><code>str.scan(/\\[(.+?)\\]/).flatten \n</code></pre>\n\n<p>Match any number of any character <code>(.+)</code>, lazily <code>(?)</code>, immediately preceded by <code>'['</code> (<code>(?&lt;=\\[)</code> being a <em>positive lookbehind</em>) and immediately followed by <code>']'</code> (<code>(?=\\])</code> being a <em>positive lookahead</em>):         </p>\n\n<pre><code>str.scan /(?&lt;=\\[).+?(?=\\])/ \n</code></pre>\n\n<p>If <code>.+</code> is not made lazy (i.e., is greedy), there will be just one match: <code>\"hello][my][friend\"</code>, which of course is incorrect.</p>\n"}], "owner": {"reputation": 750, "user_id": 1796041, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/233b6d0e4a63ef12775bee73cf1c228b?s=128&d=identicon&r=PG", "display_name": "Dylan Richards", "link": "https://stackoverflow.com/users/1796041/dylan-richards"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 59505162, "answer_count": 2, "score": -1, "last_activity_date": 1577506822, "creation_date": 1577472177, "question_id": 59504821, "link": "https://stackoverflow.com/questions/59504821/return-characters-between-each-set-of-delimiters-in-a-string", "title": "Return characters between each set of delimiters in a string", "body": "<p>I have a string that looks like this:</p>\n\n<pre><code>\"[hello][my][friend]\"\n\n</code></pre>\n\n<p>I'm interested in returning an array like </p>\n\n<p><code>[\"hello\", \"my\", \"friend\"]</code></p>\n\n<p>How can I do this in Ruby?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1577488929, "post_id": 59504197, "comment_id": 105186518, "body": "Do you have a sample <code>names</code> and <code>couples</code> where it fails?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12608817"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1577540560, "post_id": 59504197, "comment_id": 105194610, "body": "@muistooshort Hello, yes here are the samples I use :  names = %w(PA Aude Jean C&#233;cile Pauline Clement Marion Marius Laura J&#233;remie Maxime Olivier Laurie Marine Raph Flo Alice Steph Mathy Clo&#233; Nano Eline Paul) and couples_hash = {   &quot;PA&quot;: &quot;Pauline&quot;,   &quot;Aude&quot;: &quot;Jean&quot;,   &quot;C&#233;cile&quot;: &quot;Flo&quot;,   &quot;Marius&quot;: &quot;Alice&quot;,   &quot;Laura&quot;: &quot;Steph&quot;,   &quot;Olivier&quot;: &quot;Laurie&quot;,   &quot;Marine&quot;: &quot;Raph&quot;,   &quot;Mathy&quot;: &quot;Clo&#233;&quot;,   &quot;Nano&quot;: &quot;Eline&quot; }"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577770133, "post_id": 59504197, "comment_id": 105249435, "body": "Don&#39;t put your response to a question asking for data into a comment. Instead, edit your question and add that information into it as if the data had been there originally. Don&#39;t add &quot;edited:&quot; or &quot;updated&quot; tags as we can tell what changed. Using a comment forces potential answerers to read every comment and try to piece together the question and related data, which wastes everyone&#39;s time."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577770411, "post_id": 59504197, "comment_id": 105249485, "body": "Try your best to get the grammar correct and we&#39;ll fix any mistakes. Also, don&#39;t apologize for inexperience. Instead, make sure you ask good questions and you&#39;ll do fine. Please see &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;, &quot;<a href=\"https://meta.stackoverflow.com/questions/260648\">Stack Overflow question checklist</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MCVE</a>&quot; and all their linked pages and you&#39;ll have the important information."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12608817"}, "edited": false, "score": 0, "creation_date": 1579962598, "post_id": 59506968, "comment_id": 105945551, "body": "Thank you very much it is indeed better to proceed like this!"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1577489457, "creation_date": 1577489457, "answer_id": 59506968, "question_id": 59504197, "link": "https://stackoverflow.com/questions/59504197/why-is-there-a-bug-auto-attribution-in-my-draw-method/59506968#59506968", "title": "Why is there a bug (auto-attribution?) in my draw method", "body": "<p>I would like to suggest a more Ruby-like way of doing that, letting someone else identify the problem in your code.</p>\n\n<p>Suppose the couples are as follows.</p>\n\n<pre><code>couples = [[\"Lucy\", \"Lilly\"], [\"Bob\", \"Phoebe\"], [\"Oona\", \"Mac\"],\n           [\"Ava\", \"Billy-Bob\"]]\n</code></pre>\n\n<p>(<code>couples.flatten.names</code> gives us an array of names, should we need that.)</p>\n\n<p><strong>Helper method</strong></p>\n\n<p>First let's create a method to select a person that is not a partner for the first member of each couple. For the present do not worry about randomisation.</p>\n\n<pre><code>def allocate_first_members(couples)\n  (couples.each_cons(2).map { |c1,c2| [c1.first, c2.first] } &lt;&lt; \n    [couples.last.first, couples.first.first]).to_h\nend\n</code></pre>\n\n<p>Let's try it.</p>\n\n<pre><code>allocate_first_members(couples)\n  #=&gt; {\"Lucy\"=&gt;\"Bob\", \"Bob\"=&gt;\"Oona\", \"Oona\"=&gt;\"Ava\", \"Ava\"=&gt;\"Lucy\"}\n</code></pre>\n\n<p>I've chosen to return a hash because it seems more useful when it's time to assign each person a giftee.</p>\n\n<p>Let's step through the calculations.</p>\n\n<pre><code>enum = couples.each_cons(2)\n  #=&gt; #&lt;Enumerator: [[\"Lucy\", \"Lilly\"], [\"Bob\", \"Phoebe\"], [\"Oona\", \"Mac\"], \n  #                  [\"Ava\", \"Billy-Bob\"]]:each_cons(2)&gt; \n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-each_cons\" rel=\"nofollow noreferrer\">Enumerable#each_cons</a>. We can see the three values that will be generated by this enumerator and sent to the block by converting it to an array.</p>\n\n<pre><code>enum.to_a\n  #=&gt; [[[\"Lucy\", \"Lilly\"], [\"Bob\", \"Phoebe\"]],\n  #    [[\"Bob\", \"Phoebe\"], [\"Oona\", \"Mac\"]],\n  #    [[\"Oona\", \"Mac\"], [\"Ava\", \"Billy-Bob\"]]] \n</code></pre>\n\n<p>Continuing,</p>\n\n<pre><code>a = enum.map { |c1,c2| [c1.first, c2.first] }\n  #=&gt; [[\"Lucy\", \"Bob\"], [\"Bob\", \"Oona\"], [\"Oona\", \"Ava\"]] \nb = a &lt;&lt; [couples.last.first, couples.first.first]\n  #=&gt; [[\"Lucy\", \"Bob\"], [\"Bob\", \"Oona\"], [\"Oona\", \"Ava\"], [\"Ava\", \"Lucy\"]] \nb.to_h\n  #=&gt; {\"Lucy\"=&gt;\"Bob\", \"Bob\"=&gt;\"Oona\", \"Oona\"=&gt;\"Ava\", \"Ava\"=&gt;\"Lucy\"} \n</code></pre>\n\n<p>So \"Lucy\" is to gift \"Bob\", \"Bob\" is to gift \"Oona\" and so on.</p>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-to_h\" rel=\"nofollow noreferrer\">Array#to_h</a>. In computing <code>a</code> the first element is generated by <code>enum</code>, sent to the block and the block variables are assigned values using a process called <a href=\"https://docs.ruby-lang.org/en/2.6.0/syntax/assignment_rdoc.html#label-Array+Decomposition\" rel=\"nofollow noreferrer\">Array Decomposition</a>.</p>\n\n<pre><code>c1,c2 = enum.next\n  #=&gt; [[\"Lucy\", \"Lilly\"], [\"Bob\", \"Phoebe\"]] \nc1\n  #=&gt; [\"Lucy\", \"Lilly\"] \nc2\n  #=&gt; [\"Bob\", \"Phoebe\"] \n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Enumerator.html#method-i-next\" rel=\"nofollow noreferrer\">Enumerator#next</a>. The block calculation can now be performed.</p>\n\n<pre><code>[c1.first, c2.first]\n  #=&gt; [c1.first, c2.first]\n  #=&gt; [\"Lucy\", \"Bob\"]\n</code></pre>\n\n<p>The remaining steps in computing <code>a</code> are similar. The start of the next one is:</p>\n\n<pre><code>c1,c2 = enum.next\n  #=&gt; [[\"Bob\", \"Phoebe\"], [\"Oona\", \"Mac\"]]\n</code></pre>\n\n<p>This method obviously ensures that no person's giftee is their partner.</p>\n\n<p><strong>Main method</strong></p>\n\n<p>We can now write the main method.</p>\n\n<pre><code>def draw(couples)\n  shuffled = couples.shuffle.map(&amp;:shuffle)\n  h = allocate_first_members(shuffled)\n  shuffled = shuffled.map(&amp;:reverse).shuffle\n  h.merge(allocate_first_members(shuffled))\nend\n</code></pre>\n\n<p>and see what we get.</p>\n\n<pre><code>draw(couples)\n    #=&gt; {\"Billy-Bob\"=&gt;\"Lilly\", \"Lilly\"=&gt;\"Mac\", \"Mac\"=&gt;\"Phoebe\",\n    #    \"Phoebe\"=&gt;\"Billy-Bob\", \"Lucy\"=&gt;\"Ava\", \"Ava\"=&gt;\"Bob\",\n    #    \"Bob\"=&gt;\"Oona\", \"Oona\"=&gt;\"Lucy\"} \n</code></pre>\n\n<p>Let's go through the calculations. To ensure that the first member of each couple is randomly assigned a giftee, we can first shuffle the couples:</p>\n\n<pre><code>  shuffled = couples.shuffle\n    #=&gt; [[\"Ava\", \"Billy-Bob\"], [\"Lucy\", \"Lilly\"], [\"Oona\", \"Mac\"],\n    #    [\"Bob\", \"Phoebe\"]]\n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-shuffle\" rel=\"nofollow noreferrer\">Array#shuffle</a>. We can then shuffle the order of the two persons that make up each couple:</p>\n\n<pre><code>  shuffled = shuffled.map(&amp;:shuffle)\n    #=&gt; [[\"Billy-Bob\", \"Ava\"], [\"Lilly\", \"Lucy\"], [\"Mac\", \"Oona\"],\n    #    [\"Phoebe\", \"Bob\"]]\n</code></pre>\n\n<p><code>shuffled.map(&amp;:shuffle)</code> is more-or-less shorthand for:</p>\n\n<pre><code>shuffled.map { |couple| couple.shuffle }\n</code></pre>\n\n<p>Now we use the helper method to assign the giftee for each of the first members of each couple.</p>\n\n<pre><code>  g = allocate_first_members(shuffled)\n    #=&gt; {\"Billy-Bob\"=&gt;\"Lilly\", \"Lilly\"=&gt;\"Mac\", \"Mac\"=&gt;\"Phoebe\",\n    #    \"Phoebe\"=&gt;\"Billy-Bob\"}\n</code></pre>\n\n<p>We now want to assign giftees to the second member of each couple in <code>shuffled</code>. To use the help method we need only reverse the order of each couple:</p>\n\n<pre><code>  shuffled = shuffled.map(&amp;:reverse)\n    #=&gt; [[\"Ava\", \"Billy-Bob\"], [\"Lucy\", \"Lilly\"], [\"Oona\", \"Mac\"],\n    #    [\"Bob\", \"Phoebe\"]]\n</code></pre>\n\n<p>We should reshuffle the couples once more.</p>\n\n<pre><code>  shuffled = shuffled.shuffle\n    #=&gt; [[\"Lucy\", \"Lilly\"], [\"Ava\", \"Billy-Bob\"], [\"Bob\", \"Phoebe\"],\n    #    [\"Oona\", \"Mac\"]] \n</code></pre>\n\n<p>We can now use the helper method once more:</p>\n\n<pre><code>  h = allocate_first_members(shuffled)\n    #=&gt; {\"Lucy\"=&gt;\"Ava\", \"Ava\"=&gt;\"Bob\", \"Bob\"=&gt;\"Oona\", \"Oona\"=&gt;\"Lucy\"} \n</code></pre>\n\n<p>Lastly, we need to merge <code>g</code> and <code>h</code>:</p>\n\n<pre><code>  g.merge(h)\n    #=&gt; {\"Billy-Bob\"=&gt;\"Lilly\", \"Lilly\"=&gt;\"Mac\", \"Mac\"=&gt;\"Phoebe\",\n    #    \"Phoebe\"=&gt;\"Billy-Bob\", \"Lucy\"=&gt;\"Ava\", \"Ava\"=&gt;\"Bob\",\n    #    \"Bob\"=&gt;\"Oona\", \"Oona\"=&gt;\"Lucy\"} \n</code></pre>\n\n<p>I could have instead used <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-shuffle-21\" rel=\"nofollow noreferrer\">Array#shuffle!</a> and/or <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-map-21\" rel=\"nofollow noreferrer\">Array#map!</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12608817"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 59506968, "answer_count": 1, "score": 0, "last_activity_date": 1577770267, "creation_date": 1577468383, "last_edit_date": 1577770267, "question_id": 59504197, "link": "https://stackoverflow.com/questions/59504197/why-is-there-a-bug-auto-attribution-in-my-draw-method", "title": "Why is there a bug (auto-attribution?) in my draw method", "body": "<p>I am trying to define a \"draw\" method which selects people for a Secret Santa.</p>\n\n<p>The goal is to pass an array of names, and a hash of couples so that:\n- everyone has a \"target\" to which he will offer his gift.\n- the method cannot attribute the partner of the person(defined by couples) <em>if</em> this person is in couples(as key or value).\n- and of course, the method cannot attribute a person to himself.</p>\n\n<p>I made this method, which works 90% of the time, and I can't figure out how to fix it without testing it at the end and relaunch the method if it fails.\nThe way it fails is that, sometimes, the last person doesn't get someone attributed.</p>\n\n<pre><code>class Array\n   def except(value)\n     self - [value].flatten\n   end\n end\n\ndef draw(names, couples)\n\n  associations = Hash.new\n\n  names.each { |participant| associations[participant] = 0 }\n\n  associations.each do |key, value|\n    (couples.has_key?(key.to_sym) || couples.has_value?(key.to_sym)) ? (target = names.except([key, couples[key.to_sym]]).sample) : (target = names.except(key).sample)\n    associations[key] = target\n    names.delete(target)\n  end\n\n  # print the results\n  associations.each do |key, value|\n    puts \"\\t#{key}\\t offre \u00e0  #{value} \\n \"\n    # sleep(0.3)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 37, "user_id": 8414445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/982b2118940a96e980309539049758c7?s=128&d=identicon&r=PG&f=1", "display_name": "Olliedee", "link": "https://stackoverflow.com/users/8414445/olliedee"}, "is_accepted": true, "score": 0, "last_activity_date": 1577487717, "creation_date": 1577487717, "answer_id": 59506802, "question_id": 59503997, "link": "https://stackoverflow.com/questions/59503997/get-next-previous-record-in-collection-by-date-in-rails-and-handle-multiple-dat/59506802#59506802", "title": "Get next/previous record in Collection by Date in Rails (and handle multiple dates on the same day)", "body": "<p>I used the method found here: <a href=\"https://stackoverflow.com/questions/38490650/rails-5-activerecord-collection-index-by\">Rails 5: ActiveRecord collection index_by</a></p>\n\n<p>Which meant adding a default scope and changing GoalTask.rb to:</p>\n\n<pre><code>  default_scope { order('taskduedate ASC') }\n\n  def next_goal_task\n    index = goal.goal_tasks.index self\n    goal.goal_tasks[index + 1]\n  end\n\n  def last_goal_task\n    index = goal.goal_tasks.index self\n    goal.goal_tasks[index -1]\n  end\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 8414445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/982b2118940a96e980309539049758c7?s=128&d=identicon&r=PG&f=1", "display_name": "Olliedee", "link": "https://stackoverflow.com/users/8414445/olliedee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 59506802, "answer_count": 1, "score": 0, "last_activity_date": 1577487717, "creation_date": 1577467140, "question_id": 59503997, "link": "https://stackoverflow.com/questions/59503997/get-next-previous-record-in-collection-by-date-in-rails-and-handle-multiple-dat", "title": "Get next/previous record in Collection by Date in Rails (and handle multiple dates on the same day)", "body": "<p>I'm having trouble trying to isolate the next/previous record in a collection. I'm self-taught and relatively new to Rails/coding.</p>\n\n<p>I have a Goal class which has many GoalTasks.</p>\n\n<p>GoalTask has taskduedate. I want to be able to cycle next/previous on the goal_tasks, based on their taskduedate.</p>\n\n<p>The issue is that a task due date is just when the task is due to be completed, but it can be set at any time and may not be in sequential order so that I don't know what else to order it by to correctly cycle through it.</p>\n\n<p>I have created an array of goal_tasks to identify which one is currently being viewed (e.g. Task: 3/20), so I could use that to go to the next one, I think there might be a solution here, but it feels wrong to handle it in the view/controller?</p>\n\n<p>I've tried the below solution from stackoverflow, but it doesn't handle the fact that I have multiple goal_tasks due on the same day, if I click next it just goes to the next day that goal_tasks are due. e.g. if I have three tasks due today and I'm on the first one and click next, it will just skip over the other two for today.</p>\n\n<p>I then tried to add the >= (displayed below) to try and pull the next task (including those on the same day), and I've tried to ignore the current task by doing where created_at is not the same as the current goal_task and where.not, but I haven't managed to successfully get it to cycle the way I want it to, and I imagine there's a better solution.</p>\n\n<p>GoalTasksController:</p>\n\n<pre><code> def show\n   @all_tasks_ordered_due_date_desc = @goal.goal_tasks.order('taskduedate ASC', 'id ASC')\n end\n</code></pre>\n\n<p>show.html.erb:</p>\n\n<pre><code>Task: &lt;%= @all_tasks_ordered_due_date_desc.find_index(@goal_task) +1 %&gt; /      \n&lt;%= @goal.goal_tasks.count%&gt;\n</code></pre>\n\n<p>GoalTask.rb</p>\n\n<pre><code>scope :next_task, lambda {|taskduedate| where('taskduedate &gt;= ?', taskduedate).order('id ASC') } \nscope :last_task, lambda {|taskduedate| where('taskduedate &lt;= ?', taskduedate).order('id DESC') } \n\n  def next_goal_task\n    goal.goal_tasks.next_task(self.taskduedate).first\n  end\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["arrays", "ruby-on-rails", "json", "ruby", "hash"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577467471, "post_id": 59501585, "comment_id": 105180518, "body": "1. If you know that <code>require \u2018json\u2019; arr.to_json</code> converts an array <code>arr</code> to a JSON string you should have limited your question to the part you don\u2019t understand: how to convert an array of two-element arrays to an array of hashes with specified keys. 2. Always simplify your examples. Here <code>arr = [[&quot;01fe&quot;, 0.014],  [&quot;026e&quot;, 0.034],  [&quot;04a1&quot;, 0.046]]</code> would have sufficed. 3. As I did in #2, assign a variable (e.g., \u2019arr`) to each of the example\u2019s inputs so that readers can refer to those variables in answers and comments without having to define them..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577468485, "post_id": 59501585, "comment_id": 105180845, "body": "...4. Always show the desired result of an example as a <i>valid</i> Ruby object. You show what appears to be a string but strings are surrounded by double or single quotes. (If  you add double quotes you need to escape the inner double quotes.) This may seem a quibble but some readers are fussy about that. 5. This is a pure-Ruby question so you should not have a Rails\u2019 tag. 6. Your question is implicit (\u201cHow do I do that?\u201d). Often that will provoke the comment, \u201cWhat is your question?\u201d. It\u2019s best to always state your question..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577468503, "post_id": 59501585, "comment_id": 105180853, "body": "...7. The tags \u201carray\u201d and \u201chash\u201d are probably unnecessary as it\u2019s unlikely that such common objects would be used as search terms."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577770703, "post_id": 59501585, "comment_id": 105249546, "body": "Welcome to SO! Please see the &quot;<a href=\"https://meta.stackoverflow.com/questions/260648\">Stack Overflow question checklist</a>&quot; and &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;. We want to see your effort toward solving this. Did you research it? If so, where and why didn&#39;t it help? Did you write code? If so, what is the minimal code that demonstrates the problem you encountered, and what was that problem? Without that it looks like you didn&#39;t try and want us to write the code for you which is off-topic."}], "answers": [{"comments": [{"owner": {"reputation": 4420, "user_id": 1360318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60c954665247aae8de274c26e843867?s=128&d=identicon&r=PG", "display_name": "mbuechmann", "link": "https://stackoverflow.com/users/1360318/mbuechmann"}, "reply_to_user": {"reputation": 29, "user_id": 6581419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b19b740fbec7fc574d082040681a24a?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/6581419/joe"}, "edited": false, "score": 0, "creation_date": 1577454618, "post_id": 59501689, "comment_id": 105175655, "body": "If this was really helpful an upvote and an accept would be appreciated. ;)"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1577456495, "post_id": 59501689, "comment_id": 105176360, "body": "simple &amp; neat +1, I have done with different approach"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1577466432, "post_id": 59501689, "comment_id": 105180157, "body": "Some may prefer <code>a.map { |v1,v2| { address: v1, value: v2 }  }.to_json</code> for readability."}], "tags": [], "owner": {"reputation": 4420, "user_id": 1360318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60c954665247aae8de274c26e843867?s=128&d=identicon&r=PG", "display_name": "mbuechmann", "link": "https://stackoverflow.com/users/1360318/mbuechmann"}, "is_accepted": true, "score": 3, "last_activity_date": 1577770778, "last_edit_date": 1577770778, "creation_date": 1577454293, "answer_id": 59501689, "question_id": 59501585, "link": "https://stackoverflow.com/questions/59501585/how-to-create-a-json-array-from-a-two-dimensional-array-in-ruby/59501689#59501689", "title": "How to create a JSON Array from a two-dimensional array in Ruby", "body": "<p>Your desired result is still a Ruby hash. To transform it call <code>map</code> on the array and create a hash for each entry:</p>\n\n<pre><code>a = [\n  [\"01fe237f804a5eff182dcded115c37d3\", 0.0140845],\n  [\"026e5f1f7f026bf3c763523206aa44bf\", 0.03448275],\n  [\"04a1c3c79773bd1ecc0372a991adc815\", 0.04617604]\n]\n\na.map{ |e| {address: e[0], value: e[1]} }\n</code></pre>\n\n<p>This returns the desired result.</p>\n\n<p>If you want to create a JSON string, require <code>json</code> and do the following:</p>\n\n<pre><code>require 'json'\n\na = [\n  [\"01fe237f804a5eff182dcded115c37d3\", 0.0140845],\n  [\"026e5f1f7f026bf3c763523206aa44bf\", 0.03448275],\n  [\"04a1c3c79773bd1ecc0372a991adc815\", 0.04617604]\n]\n\na.map{|e| {address: e[0], value: e[1]} }.to_json\n</code></pre>\n\n<p>This will encode the result to the following string:</p>\n\n<pre><code>\"[{\\\"address\\\":\\\"01fe237f804a5eff182dcded115c37d3\\\",\\\"value\\\":0.0140845},{\\\"address\\\":\\\"026e5f1f7f026bf3c763523206aa44bf\\\",\\\"value\\\":0.03448275},{\\\"address\\\":\\\"04a1c3c79773bd1ecc0372a991adc815\\\",\\\"value\\\":0.04617604}]\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1577476903, "post_id": 59502058, "comment_id": 105183475, "body": "It&#39;s worth noting that <code>Hash[keys.zip(values)]</code> can be replaced with <code>keys.zip(values).to_h</code>, though I don&#39;t think either is preferred. Your answer has the advantage that if embeded in a method with arguments <code>arr</code> and <code>keys</code>, <code>keys</code> can be any size (as opposed to only working when there are two keys)."}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 1, "last_activity_date": 1577456375, "creation_date": 1577456375, "answer_id": 59502058, "question_id": 59501585, "link": "https://stackoverflow.com/questions/59501585/how-to-create-a-json-array-from-a-two-dimensional-array-in-ruby/59502058#59502058", "title": "How to create a JSON Array from a two-dimensional array in Ruby", "body": "<p>You can do as below,</p>\n\n<pre><code>require 'json'\nkeys = [:address, :value]\narr.map { |values| Hash[keys.zip(values)] }.to_json\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 6581419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b19b740fbec7fc574d082040681a24a?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/6581419/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "accepted_answer_id": 59501689, "answer_count": 2, "score": 0, "last_activity_date": 1577770903, "creation_date": 1577453693, "last_edit_date": 1577770903, "question_id": 59501585, "link": "https://stackoverflow.com/questions/59501585/how-to-create-a-json-array-from-a-two-dimensional-array-in-ruby", "title": "How to create a JSON Array from a two-dimensional array in Ruby", "body": "<p>I have a two-dimensional array like this:</p>\n\n<pre><code>[\n  [\"01fe237f804a5eff182dcded115c37d3\", 0.0140845], \n  [\"026e5f1f7f026bf3c763523206aa44bf\", 0.03448275], \n  [\"04a1c3c79773bd1ecc0372a991adc815\", 0.04617604]\n]\n</code></pre>\n\n<p>I'd like to create a hash first, then convert it to JSON, so that the result looks like the following:</p>\n\n<pre><code>[{address: \"01fe237f804a5eff182dcded115c37d3\", value: 0.0140845},\n{address: \"026e5f1f7f026bf3c763523206aa44bf\", value: 0.03448275},\n{address: \"04a1c3c79773bd1ecc0372a991adc815\", value: 0.04617604}]\n</code></pre>\n"}, {"tags": ["ruby", "yaml", "erb"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1577454616, "post_id": 59501567, "comment_id": 105175653, "body": "I wonder why you want to do that in YAML with ERB and not by reading the YAML into Ruby and dumping the whole file again?"}], "answers": [{"tags": [], "owner": {"reputation": 11353, "user_id": 3787051, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k2G2V.png?s=128&g=1", "display_name": "Alex Harvey", "link": "https://stackoverflow.com/users/3787051/alex-harvey"}, "is_accepted": true, "score": 1, "last_activity_date": 1577457172, "creation_date": 1577457172, "answer_id": 59502206, "question_id": 59501567, "link": "https://stackoverflow.com/questions/59501567/how-to-embed-a-yaml-erb-into-another-yaml-erb-while-keeping-indentation/59502206#59502206", "title": "How to embed a .yaml.erb into another .yaml.erb while keeping indentation?", "body": "<p>You could do it this way.</p>\n\n<h3>parent.yaml.erb</h3>\n\n<pre class=\"lang-erb prettyprint-override\"><code>name: parent\nfirst:\n  second:\n    third: something\n&lt;%- content = ERB.new(File.read(\"child.yaml.erb\"), nil, \"-\").result().gsub(/^/,\"    \") -%&gt; \n&lt;%= content -%&gt; \n</code></pre>\n\n<h3>child.yaml.erb</h3>\n\n<pre class=\"lang-erb prettyprint-override\"><code>&lt;% if some_condition -%&gt;\na:\n  b:\n    c: &lt;%= 2+2 %&gt;\n&lt;% end -%&gt;\n</code></pre>\n\n<h3>Some explanation</h3>\n\n<ul>\n<li>I had to enable trim mode by passing <code>nil</code> and <code>\"-\"</code> as 2nd and 3rd arguments to <code>ERB.new()</code>. </li>\n<li>With trim mode enabled, I can trim unwanted white space using <code>&lt;$-</code> and <code>-%&gt;</code>.</li>\n<li>I used <code>gsub</code> to indent by 4 spaces.</li>\n</ul>\n\n<p>Of course, as noted in comments, it could be better to read the YAML data into memory as a hash, although I do realise you lose a lot of control of the output that way.</p>\n"}], "owner": {"reputation": 576, "user_id": 5090145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ctnxy.jpg?s=128&g=1", "display_name": "Timur Nugmanov", "link": "https://stackoverflow.com/users/5090145/timur-nugmanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 59502206, "answer_count": 1, "score": 0, "last_activity_date": 1577457172, "creation_date": 1577453575, "question_id": 59501567, "link": "https://stackoverflow.com/questions/59501567/how-to-embed-a-yaml-erb-into-another-yaml-erb-while-keeping-indentation", "title": "How to embed a .yaml.erb into another .yaml.erb while keeping indentation?", "body": "<p>Suppose I have two files, <em>parent.yaml.erb</em> and and <em>child.yaml.erb</em> and I would like to include the contents of <em>child.yaml.erb</em> inside of <em>parent.yaml.erb</em> and calculate it in context of <em>parent.yaml.erb</em>. Example:</p>\n\n<p><em>parent.yaml.erb</em>:</p>\n\n<pre><code>name: parent\nfirst:\n  second:\n    third: something\n    &lt;%= ERB.new(File.read('child.yaml.erb')).result(binding) %&gt;\n</code></pre>\n\n<p><em>child.yaml.erb</em>:</p>\n\n<pre><code>&lt;% if some_condition %&gt;\na:\n  b:\n    c: &lt;%= 2+2 %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I expect this result:</p>\n\n<p><em>expected_result.yaml</em>:</p>\n\n<pre><code>name: parent\nfirst:\n  second:\n    third: something\n    a:\n      b:\n        c: 4\n</code></pre>\n\n<p>What I get instead is:</p>\n\n<p><em>result.yaml</em>:</p>\n\n<pre><code>name: parent\nfirst:\n  second:\n    third: something\n    *[whitespace ends here]*\na:\n\n  b:\n\n    c: 4\n</code></pre>\n\n<p>Using trim_mode option from <a href=\"https://ruby-doc.org/stdlib-2.6.5/libdoc/erb/rdoc/ERB.html#method-c-new\" rel=\"nofollow noreferrer\">documentation</a> doesn't help.</p>\n\n<p>How do I achieve expected result with correct indentation?</p>\n\n<p><code>ruby 2.6.4p104 (2019-08-28 revision 67798) [x86_64-linux]</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authentication", "apple-id"], "comments": [{"owner": {"reputation": 4005, "user_id": 4200092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saOd8.png?s=128&g=1", "display_name": "GoBusto", "link": "https://stackoverflow.com/users/4200092/gobusto"}, "edited": false, "score": 0, "creation_date": 1577451631, "post_id": 59501102, "comment_id": 105174653, "body": "There&#39;s a <a href=\"https://rubygems.org/gems/apple_id\" rel=\"nofollow noreferrer\">Ruby gem</a> that does this, and its <a href=\"https://github.com/nov/apple_id\" rel=\"nofollow noreferrer\">README</a> includes a link to a <a href=\"https://github.com/nov/signin-with-apple\" rel=\"nofollow noreferrer\">sample Rails project</a> to illustrate how it works. I know that this doesn&#39;t directly answer your question, but perhaps this might help you figure out how to solve the issue. <b>EDIT:</b> There&#39;s also this <a href=\"https://gist.github.com/nov/993a303aa6badd8447f7b96fb952088e\" rel=\"nofollow noreferrer\">gist</a>."}, {"owner": {"reputation": 4005, "user_id": 4200092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/saOd8.png?s=128&g=1", "display_name": "GoBusto", "link": "https://stackoverflow.com/users/4200092/gobusto"}, "edited": false, "score": 0, "creation_date": 1577452200, "post_id": 59501102, "comment_id": 105174837, "body": "Additionally, whilst it does not deal with Rails specifically, this post might be useful: <a href=\"https://stackoverflow.com/q/57809927/4200092\">Sign in with Apple (iOS App + Backend verification) API returns error \u201cinvalid_client\u201d</a>"}, {"owner": {"reputation": 7105, "user_id": 1099716, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YEfYd.jpg?s=128&g=1", "display_name": "Access Denied", "link": "https://stackoverflow.com/users/1099716/access-denied"}, "edited": false, "score": 0, "creation_date": 1577953620, "post_id": 59501102, "comment_id": 105288459, "body": "I also had similar problem. Client_id on server should be <code>ServiceId</code> not <code>AppId</code>"}], "owner": {"reputation": 21, "user_id": 12607474, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDFfng5UsH_IVKQhan0fNR0VLbAkmNf6GcJOUsEKw=k-s128", "display_name": "Mike Havit", "link": "https://stackoverflow.com/users/12607474/mike-havit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1655, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1577451222, "creation_date": 1577451222, "question_id": 59501102, "link": "https://stackoverflow.com/questions/59501102/apple-auth-not-working-on-ruby-on-rails-backend", "title": "Apple Auth not working on Ruby on Rails Backend", "body": "<p>I need to authentificate user with Apple Auth in mobile application. I got <strong>IdentityToken</strong>, <strong>User</strong> and <strong>AuthCode</strong> from api request from mobile app.</p>\n\n<p>I need to authentificate user and get its email. My class <strong>AppleId</strong> always returns: \"<strong>invalid_client</strong>\".</p>\n\n<p>Maybe i have some mistakes in my logic?</p>\n\n<pre><code>\nclass AppleId\n\n    URL = 'https://appleid.apple.com/auth/token'\n    ISSUER = 'https://appleid.apple.com'\n    TEAM_ID = '6Z******38'\n    KEY_ID = '33******KP'\n    IDENTIFIER = 'ru.k*************on'\n    PRIVATE_KEY = &lt;&lt;-PEM\n-----BEGIN PRIVATE KEY-----\nMIGTA**********z7\n-----END PRIVATE KEY-----\nPEM\n\n    def initialize\n      @private_key = OpenSSL::PKey::EC.new PRIVATE_KEY\n    end    \n\n    def authenticate(code)\n      make_request(code)\n    end\n\n    private \n\n    def make_request(code) \n      uri = URI.parse(URL) \n      http = Net::HTTP.new(uri.host, uri.port)\n      http.use_ssl = true\n\n      request = Net::HTTP::Post.new(uri.request_uri)\n\n      params =  {\n        client_id: IDENTIFIER,\n        client_secret: client_secret_jwt,\n        code: code,\n        grant_type: 'authorization_code' \n       }\n\n       request.set_form_data(params)\n       response = http.request(request)\n       response.body\n    end\n\n    def client_secret_jwt\n      jwt = JSON::JWT.new(\n        iss: TEAM_ID,\n        aud: ISSUER,\n        sub: IDENTIFIER,\n        iat: Time.now,\n        exp: 1.minutes.from_now\n      )\n      jwt.kid = KEY_ID\n      JWT.encode jwt, @private_key, 'ES256'\n    end\n\nend\n</code></pre>\n\n<p>In my Controller:</p>\n\n<pre><code>authCode = params[:auth_code]\n\nAppleId.new.authenticate(authCode)\n=&gt; \"{\\\"error\\\":\\\"invalid_client\\\"}\"\n\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 1692, "user_id": 9288619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6IK38.jpg?s=128&g=1", "display_name": "code_aks", "link": "https://stackoverflow.com/users/9288619/code-aks"}, "edited": false, "score": 0, "creation_date": 1577446542, "post_id": 59500003, "comment_id": 105172812, "body": "In rails 6 there is a package.json file in the app directory. It is finding that file."}, {"owner": {"reputation": 128, "user_id": 2345325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a7216a18abc0d408cbf75e8e7da9708?s=128&d=identicon&r=PG", "display_name": "Eduardo06sp", "link": "https://stackoverflow.com/users/2345325/eduardo06sp"}, "reply_to_user": {"reputation": 1692, "user_id": 9288619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6IK38.jpg?s=128&g=1", "display_name": "code_aks", "link": "https://stackoverflow.com/users/9288619/code-aks"}, "edited": false, "score": 0, "creation_date": 1577508946, "post_id": 59500003, "comment_id": 105189001, "body": "I updated my post with the contents of my package.json file, I&#39;m not sure what&#39;s wrong with it"}], "answers": [{"comments": [{"owner": {"reputation": 128, "user_id": 2345325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a7216a18abc0d408cbf75e8e7da9708?s=128&d=identicon&r=PG", "display_name": "Eduardo06sp", "link": "https://stackoverflow.com/users/2345325/eduardo06sp"}, "edited": false, "score": 0, "creation_date": 1577509018, "post_id": 59500409, "comment_id": 105189013, "body": "I followed your steps, but I already had a package.json file for my app.  I updated my post to display its contents.  It gives me the same exact error regardless."}, {"owner": {"reputation": 128, "user_id": 2345325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a7216a18abc0d408cbf75e8e7da9708?s=128&d=identicon&r=PG", "display_name": "Eduardo06sp", "link": "https://stackoverflow.com/users/2345325/eduardo06sp"}, "edited": false, "score": 0, "creation_date": 1577509039, "post_id": 59500409, "comment_id": 105189018, "body": "Thank you for your explanation! :}"}, {"owner": {"reputation": 1692, "user_id": 9288619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6IK38.jpg?s=128&g=1", "display_name": "code_aks", "link": "https://stackoverflow.com/users/9288619/code-aks"}, "reply_to_user": {"reputation": 128, "user_id": 2345325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a7216a18abc0d408cbf75e8e7da9708?s=128&d=identicon&r=PG", "display_name": "Eduardo06sp", "link": "https://stackoverflow.com/users/2345325/eduardo06sp"}, "edited": false, "score": 0, "creation_date": 1577521262, "post_id": 59500409, "comment_id": 105190664, "body": "But in your git repository there is no package.json file."}, {"owner": {"reputation": 128, "user_id": 2345325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a7216a18abc0d408cbf75e8e7da9708?s=128&d=identicon&r=PG", "display_name": "Eduardo06sp", "link": "https://stackoverflow.com/users/2345325/eduardo06sp"}, "edited": false, "score": 0, "creation_date": 1577603694, "post_id": 59500409, "comment_id": 105206335, "body": "Do I need to upload it? It&#39;s not in my .gitignore or anything. <a href=\"https://i.postimg.cc/VNNQwVmh/Screenshot-2019-12-28-23-11-34.png\" rel=\"nofollow noreferrer\">i.postimg.cc/VNNQwVmh/Screenshot-2019-12-28-23-11-34.png</a>"}, {"owner": {"reputation": 1692, "user_id": 9288619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6IK38.jpg?s=128&g=1", "display_name": "code_aks", "link": "https://stackoverflow.com/users/9288619/code-aks"}, "reply_to_user": {"reputation": 128, "user_id": 2345325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a7216a18abc0d408cbf75e8e7da9708?s=128&d=identicon&r=PG", "display_name": "Eduardo06sp", "link": "https://stackoverflow.com/users/2345325/eduardo06sp"}, "edited": false, "score": 1, "creation_date": 1577615276, "post_id": 59500409, "comment_id": 105208200, "body": "Above is mine project repo screenshot you have to do the same thing push your package.json file also.. Because in error you can clearly se that heroku is finding for package.json file.. thanks and also you upvote my answer..it cost you nothing :)"}], "tags": [], "owner": {"reputation": 1692, "user_id": 9288619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6IK38.jpg?s=128&g=1", "display_name": "code_aks", "link": "https://stackoverflow.com/users/9288619/code-aks"}, "is_accepted": false, "score": 2, "last_activity_date": 1577449543, "last_edit_date": 1577449543, "creation_date": 1577447582, "answer_id": 59500409, "question_id": 59500003, "link": "https://stackoverflow.com/questions/59500003/rails-simple-blogger-heroku-app-precompiling-assets-failed/59500409#59500409", "title": "Rails Simple Blogger Heroku App: Precompiling Assets Failed", "body": "<p><a href=\"https://i.stack.imgur.com/e7wZc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e7wZc.png\" alt=\"enter image description here\"></a></p>\n\n<p>Basic configuration for Rails 6 :-</p>\n\n<p>Run <code>yarn install</code>, or just <code>yarn</code>. It will create a package.json file :-</p>\n\n<p><strong>`package.json'</strong></p>\n\n<p>This file contain necessary packages for your webpack.</p>\n\n<p>For more references read :-</p>\n\n<p><a href=\"https://yarnpkg.com/lang/en/docs/yarn-lock/#toc-managed-by-yarn\" rel=\"nofollow noreferrer\">#yarn docs</a></p>\n\n<p><a href=\"https://gist.github.com/maxivak/2612fa987b9f9ed7cb53a88fcba247b3#webpack-without-webpacker-in-rails-app\" rel=\"nofollow noreferrer\">#webpacker</a></p>\n\n<p>And also if you want to precompile in production environment change the config in below file :-</p>\n\n<pre><code>config/webpacker.yml\n\nproduction:\n  &lt;&lt;: *default\n\n  # Production depends on precompilation of packs prior to booting for performance.\n  compile:true ## just make this compile true\n\n  # Extract and emit a css file\n  extract_css: true\n\n  # Cache manifest.json for performance\n  cache_manifest: true\n</code></pre>\n\n<p>then execute commands :- </p>\n\n<pre><code>RAILS_ENV=production rake assets:clobber \nRAILS_ENV=production rake assets:precompile\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 128, "user_id": 2345325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a7216a18abc0d408cbf75e8e7da9708?s=128&d=identicon&r=PG", "display_name": "Eduardo06sp", "link": "https://stackoverflow.com/users/2345325/eduardo06sp"}, "is_accepted": true, "score": 0, "last_activity_date": 1577754053, "creation_date": 1577754053, "answer_id": 59538469, "question_id": 59500003, "link": "https://stackoverflow.com/questions/59500003/rails-simple-blogger-heroku-app-precompiling-assets-failed/59538469#59538469", "title": "Rails Simple Blogger Heroku App: Precompiling Assets Failed", "body": "<p>My package.json file was not present in my Github repository, although it <em>does</em> exist in my local system. </p>\n\n<p>I had no pending files to be committed and my .gitignore shows no exclusion of any json files.\nI'm not sure <em>why</em> it wasn't uploaded to my repository.</p>\n\n<p><strong>So I had to force add it to the staging area by running:\n<code>git add -f path/to/the/file</code> (credit to <a href=\"https://stackoverflow.com/questions/16993082/why-doesnt-git-recognize-that-my-file-has-been-changed-therefore-git-add-not-w#comment72104756_24316479\">@San's answer to a different question</a>).</strong></p>\n\n<p>Then I simply committed the change and pushed to Heroku successfully! </p>\n"}], "owner": {"reputation": 128, "user_id": 2345325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a7216a18abc0d408cbf75e8e7da9708?s=128&d=identicon&r=PG", "display_name": "Eduardo06sp", "link": "https://stackoverflow.com/users/2345325/eduardo06sp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 59538469, "answer_count": 2, "score": 0, "last_activity_date": 1577754053, "creation_date": 1577445449, "last_edit_date": 1577508807, "question_id": 59500003, "link": "https://stackoverflow.com/questions/59500003/rails-simple-blogger-heroku-app-precompiling-assets-failed", "title": "Rails Simple Blogger Heroku App: Precompiling Assets Failed", "body": "<p>I have tried everything in the book it feels, yet I keep getting the same error.\nSurprisingly, I have  not found this exact error anywhere else.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>\nremote:        error Couldn't find a package.json file in \"/tmp/build_0e5b0c14c98db4a63ddfc87fc6d11490\"\n\n</code></pre>\n\n<p><a href=\"https://pastebin.com/MZX1XRAZ\" rel=\"nofollow noreferrer\">Here is the full error on Pastebin</a></p>\n\n<p><a href=\"https://github.com/Eduardo06sp/blogger\" rel=\"nofollow noreferrer\">Here is the repository for the (rather simple) blogger project</a></p>\n\n<p>I even tried running <code>rake assets:precompile</code> locally and run into absolutely no errors.\nI ran <code>RAILS_ENV=production bundle exec rake assets:precompile</code>, pushed to my repo then tried to deploy, nothing.</p>\n\n<p>I <em>raked</em> through tons of StackOverflow questions and tried googling my error, giving every edit/command I came across a try, but no luck.</p>\n\n<p><strong>EDIT:</strong> The following are the contents of my package.json file</p>\n\n<pre><code>{\n  \"name\": \"blogger\",\n  \"private\": true,\n  \"dependencies\": {\n    \"@rails/actioncable\": \"^6.0.0\",\n    \"@rails/activestorage\": \"^6.0.0\",\n    \"@rails/ujs\": \"^6.0.0\",\n    \"@rails/webpacker\": \"4.2.2\",\n    \"turbolinks\": \"^5.2.0\"\n  },\n  \"version\": \"0.1.0\",\n  \"devDependencies\": {\n    \"webpack-dev-server\": \"^3.10.1\"\n  }\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postman", "rails-api", "ruby-on-rails-6"], "answers": [{"comments": [{"owner": {"reputation": 5272, "user_id": 1745902, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a629f4656cabd0433729ab0c6523cedd?s=128&d=identicon&r=PG", "display_name": "Askar", "link": "https://stackoverflow.com/users/1745902/askar"}, "edited": false, "score": 0, "creation_date": 1577432082, "post_id": 59497469, "comment_id": 105168148, "body": "Thanks. I just had to wrap in double quotes the hash.  {   &quot;user&quot;: {     &quot;email&quot;: &quot;askar@example.com&quot;,     &quot;password&quot;: &quot;asdfasdf&quot;   } }"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 3, "last_activity_date": 1577441234, "last_edit_date": 1577441234, "creation_date": 1577431848, "answer_id": 59497469, "question_id": 59497368, "link": "https://stackoverflow.com/questions/59497368/password-digest-cant-be-blank-and-password-cant-be-blank-errors/59497469#59497469", "title": "&quot;password_digest can&#39;t be blank&quot; and &quot;password can&#39;t be blank&quot; errors", "body": "<p>Your <code>user_params</code> method expects the attributes nested in a <code>user</code> hash. Change the response to:</p>\n\n<pre><code>{\n  \"user\": {\n    \"email\": \"...\",\n    \"password\": \"...\"\n  }\n}\n</code></pre>\n\n<p>Btw the <code>validates :password_digest, presence: true</code> line is not needed because <a href=\"https://api.rubyonrails.org/classes/ActiveModel/SecurePassword/ClassMethods.html\" rel=\"nofollow noreferrer\"><code>has_secure_password</code></a> has validations build in and ensures internally that a password is present. </p>\n"}], "owner": {"reputation": 5272, "user_id": 1745902, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/a629f4656cabd0433729ab0c6523cedd?s=128&d=identicon&r=PG", "display_name": "Askar", "link": "https://stackoverflow.com/users/1745902/askar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 59497469, "answer_count": 1, "score": 0, "last_activity_date": 1577441234, "creation_date": 1577431162, "question_id": 59497368, "link": "https://stackoverflow.com/questions/59497368/password-digest-cant-be-blank-and-password-cant-be-blank-errors", "title": "&quot;password_digest can&#39;t be blank&quot; and &quot;password can&#39;t be blank&quot; errors", "body": "<p>I'm trying to create a user via Postman as shown in the screenshot, but getting errors:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ErZ9e.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ErZ9e.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is a rails app created with an <code>--api</code> option.</p>\n\n<p><strong>user.rb</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\n  validates :email, uniqueness: true\n  validates_format_of :email, with: /@/\n  validates :password_digest, presence: true\n\n  has_secure_password\nend\n</code></pre>\n\n<p><strong>users_controller.rb</strong></p>\n\n<pre><code>class Api::V1::UsersController &lt; ApplicationController\n    # GET /users/1\n    def show\n      render json: User.find(params[:id])\n    end\n    # POST /users\n    def create\n        @user = User.new(user_params)\n\n        if @user.save\n            render json: @user, status: :created\n        else\n            render json: @user.errors, status: :unprocessable_entity\n        end\n    end\n\n    private\n\n    def user_params\n        params.require(:user).permit(:email, :password)\n    end\nend\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  namespace :api, defaults: { format: :json } do\n    namespace :v1 do\n      resources :users, only: [:show, :create]\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 1, "last_activity_date": 1577429908, "creation_date": 1577429908, "answer_id": 59497151, "question_id": 59496982, "link": "https://stackoverflow.com/questions/59496982/geminstallerror-rubyzip-requires-ruby-version-2-4/59497151#59497151", "title": "Gem::InstallError: rubyzip requires Ruby version &gt;= 2.4", "body": "<p>The problem is with the version of <code>rubyzip</code> </p>\n\n<p>You must be using the version <code>2.0.0</code> of rubyzip which requires the ruby version <code>&gt;=2.4.0</code> - <a href=\"https://github.com/rubyzip/rubyzip/blob/d3027eab9556c7b803686a7256843b4a764ef116/rubyzip.gemspec\" rel=\"nofollow noreferrer\">Ref</a></p>\n\n<p>In order to make it work with ruby <code>2.3.3</code> you need to downgrade the rubyzip to <code>1.3.0</code> - <a href=\"https://github.com/rubyzip/rubyzip/blob/v1.3.0/rubyzip.gemspec\" rel=\"nofollow noreferrer\">Ref</a> </p>\n\n<p>Add this to your Gemfile</p>\n\n<pre><code>gem 'rubyzip', '~&gt; 1.3.0'\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<pre><code>Gem::InstallError: rubyzip requires Ruby version &gt;= 2.4.\nAn error occurred while installing rubyzip (2.0.0), and Bundler cannot continue.\nMake sure that `gem install rubyzip -v '2.0.0'` succeeds before bundling.\n</code></pre>\n\n<p>In the log you can see bundler is trying to install rubyzip <code>2.0.0</code> just lock it to 1.3.0 and you are good.</p>\n\n<p><strong>For future reference, if you face similar issue just check the gemspec of the gem there you will find the required ruby version and some other dependencies</strong></p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 4, "last_activity_date": 1581064459, "last_edit_date": 1581064459, "creation_date": 1577443924, "answer_id": 59499669, "question_id": 59496982, "link": "https://stackoverflow.com/questions/59496982/geminstallerror-rubyzip-requires-ruby-version-2-4/59499669#59499669", "title": "Gem::InstallError: rubyzip requires Ruby version &gt;= 2.4", "body": "<p>Deepak already wrote in his answer how to work\u2013around this problem. But I think it might be better to use a different approach.</p>\n\n<p>There is a big issue with the versions from <a href=\"http://railsinstaller.org/en\" rel=\"nofollow noreferrer\">RailsInstaller</a>. They are all outdated and install versions of Ruby and Ruby on Rails that have already reached end-of-life. I recommend not using RailsInstaller at all.</p>\n\n<p>I suggest following the official <a href=\"https://www.ruby-lang.org/de/documentation/installation/\" rel=\"nofollow noreferrer\">Ruby Documentation about Installation</a> and use the <a href=\"https://rubyinstaller.org\" rel=\"nofollow noreferrer\">RubyInstaller</a> to install Ruby. After that just install the latest Ruby on Rails gem with</p>\n\n<pre><code>gem install bundler\ngem install rails\n</code></pre>\n\n<p>from your command line.</p>\n"}, {"tags": [], "owner": {"reputation": 11900, "user_id": 303347, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/508b6e7bd360b4096447ffe8545f4878?s=128&d=identicon&r=PG", "display_name": "Arunabh Das", "link": "https://stackoverflow.com/users/303347/arunabh-das"}, "is_accepted": false, "score": 0, "last_activity_date": 1600872994, "creation_date": 1600872994, "answer_id": 64030721, "question_id": 59496982, "link": "https://stackoverflow.com/questions/59496982/geminstallerror-rubyzip-requires-ruby-version-2-4/64030721#64030721", "title": "Gem::InstallError: rubyzip requires Ruby version &gt;= 2.4", "body": "<p>Got this error while running -</p>\n<p>sudo gem install fastlane -NV</p>\n<p>Fixed this by installing ruby 2.6.0 as follows -</p>\n<p>rbenv install 2.6.0</p>\n<p>rbenv global 2.6.0</p>\n<p>Ran</p>\n<p>sudo gem install fastlane -NV</p>\n<p>And it worked</p>\n"}], "owner": {"reputation": 159, "user_id": 11746373, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uO3gcoZZNEw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rePhZCXRsr3lp0jmEQ-Bn0HBR4mIQ/photo.jpg?sz=128", "display_name": "Roy Xu", "link": "https://stackoverflow.com/users/11746373/roy-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6439, "favorite_count": 0, "answer_count": 3, "score": 5, "last_activity_date": 1600872994, "creation_date": 1577428808, "last_edit_date": 1577429346, "question_id": 59496982, "link": "https://stackoverflow.com/questions/59496982/geminstallerror-rubyzip-requires-ruby-version-2-4", "title": "Gem::InstallError: rubyzip requires Ruby version &gt;= 2.4", "body": "<p>I ran into this error while installing ruby on rails. It says that it requires Ruby version >= 2.4 and I do not quite understand how I should solve this. I downloaded the railsinstaller packet and the ruby in it is version 2.3.3. I am currently following the tutorial from <a href=\"https://www.youtube.com/watch?v=3D9d0wmwHVQ\" rel=\"noreferrer\">https://www.youtube.com/watch?v=3D9d0wmwHVQ</a> but the video does not specify the problem that I encountered here. Can anyone give me some suggestions please?\nThanks! </p>\n\n<pre><code>Xu Zeng@DESKTOP-32TIA1V MINGW64 /c/railstest\n$ rails new tester\n      create\n      create  README.md\n      create  Rakefile\n      create  config.ru\n      create  .gitignore\n      create  Gemfile\n         run  git init from \".\"\nInitialized empty Git repository in C:/railstest/tester/.git/\n      create  app\n      create  app/assets/config/manifest.js\n      create  app/assets/javascripts/application.js\n      create  app/assets/javascripts/cable.js\n      create  app/assets/stylesheets/application.css\n      create  app/channels/application_cable/channel.rb\n      create  app/channels/application_cable/connection.rb\n      create  app/controllers/application_controller.rb\n      create  app/helpers/application_helper.rb\n      create  app/jobs/application_job.rb\n      create  app/mailers/application_mailer.rb\n      create  app/models/application_record.rb\n      create  app/views/layouts/application.html.erb\n      create  app/views/layouts/mailer.html.erb\n      create  app/views/layouts/mailer.text.erb\n      create  app/assets/images/.keep\n      create  app/assets/javascripts/channels\n      create  app/assets/javascripts/channels/.keep\n      create  app/controllers/concerns/.keep\n      create  app/models/concerns/.keep\n      create  bin\n      create  bin/bundle\n      create  bin/rails\n      create  bin/rake\n      create  bin/setup\n      create  bin/update\n      create  bin/yarn\n      create  config\n      create  config/routes.rb\n      create  config/application.rb\n      create  config/environment.rb\n      create  config/secrets.yml\n      create  config/cable.yml\n      create  config/puma.rb\n      create  config/environments\n      create  config/environments/development.rb\n      create  config/environments/production.rb\n      create  config/environments/test.rb\n      create  config/initializers\n      create  config/initializers/application_controller_renderer.rb\n      create  config/initializers/assets.rb\n      create  config/initializers/backtrace_silencers.rb\n      create  config/initializers/cookies_serializer.rb\n      create  config/initializers/cors.rb\n      create  config/initializers/filter_parameter_logging.rb\n      create  config/initializers/inflections.rb\n      create  config/initializers/mime_types.rb\n      create  config/initializers/new_framework_defaults_5_1.rb\n      create  config/initializers/wrap_parameters.rb\n      create  config/locales\n      create  config/locales/en.yml\n      create  config/boot.rb\n      create  config/database.yml\n      create  db\n      create  db/seeds.rb\n      create  lib\n      create  lib/tasks\n      create  lib/tasks/.keep\n      create  lib/assets\n      create  lib/assets/.keep\n      create  log\n      create  log/.keep\n      create  public\n      create  public/404.html\n      create  public/422.html\n      create  public/500.html\n      create  public/apple-touch-icon-precomposed.png\n      create  public/apple-touch-icon.png\n      create  public/favicon.ico\n      create  public/robots.txt\n      create  test/fixtures\n      create  test/fixtures/.keep\n      create  test/fixtures/files\n      create  test/fixtures/files/.keep\n      create  test/controllers\n      create  test/controllers/.keep\n      create  test/mailers\n      create  test/mailers/.keep\n      create  test/models\n      create  test/models/.keep\n      create  test/helpers\n      create  test/helpers/.keep\n      create  test/integration\n      create  test/integration/.keep\n      create  test/test_helper.rb\n      create  test/system\n      create  test/system/.keep\n      create  test/application_system_test_case.rb\n      create  tmp\n      create  tmp/.keep\n      create  tmp/cache\n      create  tmp/cache/assets\n      create  vendor\n      create  vendor/.keep\n      create  package.json\n      remove  config/initializers/cors.rb\n      remove  config/initializers/new_framework_defaults_5_1.rb\n         run  bundle install\nFetching gem metadata from https://rubygems.org/................\nFetching version metadata from https://rubygems.org/...\nFetching dependency metadata from https://rubygems.org/..\nResolving dependencies...\nFetching rake 13.0.1\nInstalling rake 13.0.1\nFetching concurrent-ruby 1.1.5\nInstalling concurrent-ruby 1.1.5\nFetching minitest 5.13.0\nInstalling minitest 5.13.0\nUsing thread_safe 0.3.6\nFetching builder 3.2.4\nInstalling builder 3.2.4\nFetching erubi 1.9.0\nInstalling erubi 1.9.0\nFetching mini_portile2 2.4.0\nInstalling mini_portile2 2.4.0\nFetching crass 1.0.5\nInstalling crass 1.0.5\nFetching rack 2.0.8\nInstalling rack 2.0.8\nFetching nio4r 2.5.2\nInstalling nio4r 2.5.2 with native extensions\nFetching websocket-extensions 0.1.4\nInstalling websocket-extensions 0.1.4\nFetching mini_mime 1.0.2\nInstalling mini_mime 1.0.2\nUsing arel 8.0.0\nFetching public_suffix 4.0.1\nInstalling public_suffix 4.0.1\nFetching bindex 0.8.1\nInstalling bindex 0.8.1 with native extensions\nUsing bundler 1.15.3\nFetching byebug 11.0.1\nInstalling byebug 11.0.1 with native extensions\nFetching childprocess 3.0.0\nInstalling childprocess 3.0.0\nUsing coffee-script-source 1.12.2\nUsing execjs 2.7.0\nFetching method_source 0.9.2\nInstalling method_source 0.9.2\nFetching thor 1.0.1\nInstalling thor 1.0.1\nFetching ffi 1.11.3 (x86-mingw32)\nInstalling ffi 1.11.3 (x86-mingw32)\nFetching puma 3.12.2\nInstalling puma 3.12.2 with native extensions\nFetching rb-fsevent 0.10.3\nInstalling rb-fsevent 0.10.3\nFetching rubyzip 2.0.0\nInstalling rubyzip 2.0.0\nFetching tilt 2.0.10\nInstalling tilt 2.0.10\nFetching sqlite3 1.4.2\nInstalling sqlite3 1.4.2 with native extensions\nFetching turbolinks-source 5.2.0\nInstalling turbolinks-source 5.2.0\nFetching i18n 1.7.0\nInstalling i18n 1.7.0\nFetching tzinfo 1.2.6\nInstalling tzinfo 1.2.6\nFetching nokogiri 1.10.7 (x86-mingw32)\nInstalling nokogiri 1.10.7 (x86-mingw32)\nFetching rack-test 1.1.0\nInstalling rack-test 1.1.0\nFetching sprockets 3.7.2\nInstalling sprockets 3.7.2\nUsing websocket-driver 0.6.5\nFetching mail 2.7.1\nInstalling mail 2.7.1\nFetching addressable 2.7.0\nInstalling addressable 2.7.0\nUsing coffee-script 2.4.1\nFetching uglifier 4.2.0\nInstalling uglifier 4.2.0\nFetching rb-inotify 0.10.1\nInstalling rb-inotify 0.10.1\nGem::InstallError: rubyzip requires Ruby version &gt;= 2.4.\nAn error occurred while installing rubyzip (2.0.0), and Bundler cannot continue.\nMake sure that `gem install rubyzip -v '2.0.0'` succeeds before bundling.\n\nIn Gemfile:\n  selenium-webdriver was resolved to 3.142.6, which depends on\n    rubyzip\n\nXu Zeng@DESKTOP-32TIA1V MINGW64 /c/railstest\n$ gem install bundler\nSuccessfully installed bundler-2.1.2\nParsing documentation for bundler-2.1.2\nInstalling ri documentation for bundler-2.1.2\nDone installing documentation for bundler after 6 seconds\n1 gem installed\n\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 43, "user_id": 12574627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c837b0a2ec344e675eaf0d3d7173084f?s=128&d=identicon&r=PG&f=1", "display_name": "Apollo", "link": "https://stackoverflow.com/users/12574627/apollo"}, "edited": false, "score": 0, "creation_date": 1577425956, "post_id": 59496545, "comment_id": 105166559, "body": "remove some code in gemfile because stackoverflow do not allow too much code"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 12574627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c837b0a2ec344e675eaf0d3d7173084f?s=128&d=identicon&r=PG&f=1", "display_name": "Apollo", "link": "https://stackoverflow.com/users/12574627/apollo"}, "edited": false, "score": 0, "creation_date": 1577505300, "post_id": 59504374, "comment_id": 105188559, "body": "Yes, this helped. For others facing the same problem, I was on a mac."}], "tags": [], "owner": {"reputation": 775, "user_id": 1544440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75da798fa2e162ff6eab82bc51a2d3a3?s=128&d=identicon&r=PG", "display_name": "Omar Bahareth", "link": "https://stackoverflow.com/users/1544440/omar-bahareth"}, "is_accepted": true, "score": 1, "last_activity_date": 1577469377, "creation_date": 1577469377, "answer_id": 59504374, "question_id": 59496545, "link": "https://stackoverflow.com/questions/59496545/heroku-ruby-application-errormissing-helper-file-helpers/59504374#59504374", "title": "Heroku Ruby Application Error(Missing helper file helpers?)", "body": "<p>It sounds a lot like the filename case is different in Git than it is in your OS, try out the solution from <a href=\"https://stackoverflow.com/a/20907647/1544440\">this answer</a> and see if it helps you out:</p>\n\n<pre><code>git mv -f Items_helper.rb items_helper.rb\n</code></pre>\n\n<p>and then commit and push and try again.</p>\n\n<p>Microsoft has a <a href=\"https://docs.microsoft.com/en-us/azure/devops/repos/git/case-sensitivity?view=azure-devops\" rel=\"nofollow noreferrer\">great article on Git case sensitivity</a> and how macOS and Windows filesystems work that's worth a read.</p>\n"}], "owner": {"reputation": 43, "user_id": 12574627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c837b0a2ec344e675eaf0d3d7173084f?s=128&d=identicon&r=PG&f=1", "display_name": "Apollo", "link": "https://stackoverflow.com/users/12574627/apollo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 59504374, "answer_count": 1, "score": 0, "last_activity_date": 1577469377, "creation_date": 1577425932, "last_edit_date": 1577463086, "question_id": 59496545, "link": "https://stackoverflow.com/questions/59496545/heroku-ruby-application-errormissing-helper-file-helpers", "title": "Heroku Ruby Application Error(Missing helper file helpers?)", "body": "<p>This is what my console says</p>\n\n<pre><code>         8: from /app/vendor/bundle/ruby/2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\n         7: from /app/app/controllers/application_controller.rb:1:in `&lt;main&gt;'\n         6: from /app/vendor/bundle/ruby/2.6.0/gems/actionpack-6.0.1/lib/action_controller/railties/helpers.rb:19:in `inherited'\n         5: from /app/vendor/bundle/ruby/2.6.0/gems/actionpack-6.0.1/lib/abstract_controller/helpers.rb:108:in `helper'\n         4: from /app/vendor/bundle/ruby/2.6.0/gems/actionpack-6.0.1/lib/action_controller/metal/helpers.rb:94:in `modules_for_helpers'\n         3: from /app/vendor/bundle/ruby/2.6.0/gems/actionpack-6.0.1/lib/abstract_controller/helpers.rb:144:in `modules_for_helpers'\n         2: from /app/vendor/bundle/ruby/2.6.0/gems/actionpack-6.0.1/lib/abstract_controller/helpers.rb:144:in `map!'\n         1: from /app/vendor/bundle/ruby/2.6.0/gems/actionpack-6.0.1/lib/abstract_controller/helpers.rb:148:in `block in modules_for_helpers'\n/app/vendor/bundle/ruby/2.6.0/gems/actionpack-6.0.1/lib/abstract_controller/helpers.rb:151:in `rescue in block in modules_for_helpers': Missing helper file helpers/items_helper.rb (AbstractController::Helpers::MissingHelperError)\n</code></pre>\n\n<p>thanks in advance</p>\n\n<p>--------Edit----------</p>\n\n<p>I found out what the problem was. For some reason, whenever I push to heroku my items_helper.rb becomes Items_helper.rb. Anyone knows why or how  I can solve this?</p>\n"}, {"tags": ["ruby", "ruby-2.6"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577413531, "post_id": 59495005, "comment_id": 105164478, "body": "What is the desired return value if the hash is <code>{a: {m: {b: 2, c: 1}}}</code>?"}, {"owner": {"reputation": 1108, "user_id": 1001807, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/da6835f9d0a471c0093ed1d81f523673?s=128&d=identicon&r=PG", "display_name": "Leon", "link": "https://stackoverflow.com/users/1001807/leon"}, "edited": false, "score": 0, "creation_date": 1577415519, "post_id": 59495005, "comment_id": 105164779, "body": "<code>[&#39;a.m.b&#39;, &#39;a.m.c&#39;]</code>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577772264, "post_id": 59495005, "comment_id": 105249842, "body": "See &quot;<a href=\"https://meta.stackoverflow.com/questions/260648\">Stack Overflow question checklist</a>&quot;. We want to know what you tried. Currently it looks like you didn&#39;t try and want us to write code for you. &quot;<a href=\"https://codeblog.jonskeet.uk/2010/08/29/writing-the-perfect-question/\" rel=\"nofollow noreferrer\">Writing The Perfect Question</a>&quot; is also useful."}, {"owner": {"reputation": 1108, "user_id": 1001807, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/da6835f9d0a471c0093ed1d81f523673?s=128&d=identicon&r=PG", "display_name": "Leon", "link": "https://stackoverflow.com/users/1001807/leon"}, "edited": false, "score": 0, "creation_date": 1577998341, "post_id": 59495005, "comment_id": 105307451, "body": "I posted a problem I wanted to solve. This is only a piece of the bigger function. I am not going to post the whole function here."}], "answers": [{"comments": [{"owner": {"reputation": 1108, "user_id": 1001807, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/da6835f9d0a471c0093ed1d81f523673?s=128&d=identicon&r=PG", "display_name": "Leon", "link": "https://stackoverflow.com/users/1001807/leon"}, "edited": false, "score": 0, "creation_date": 1577466192, "post_id": 59495580, "comment_id": 105180081, "body": "Cary this works for hashes. I am trying to see how can I adapt it now to loop also keys that have arrays of hashes. For example <code>{a: [{b: 1, c:3}]}</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1108, "user_id": 1001807, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/da6835f9d0a471c0093ed1d81f523673?s=128&d=identicon&r=PG", "display_name": "Leon", "link": "https://stackoverflow.com/users/1001807/leon"}, "edited": false, "score": 0, "creation_date": 1577470105, "post_id": 59495580, "comment_id": 105181347, "body": "Best to post a separate question."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1577417474, "last_edit_date": 1577417474, "creation_date": 1577416261, "answer_id": 59495580, "question_id": 59495005, "link": "https://stackoverflow.com/questions/59495005/build-paths-of-edge-keys-in-nested-hashes-in-ruby/59495580#59495580", "title": "Build paths of edge keys in nested hashes in ruby", "body": "<pre><code>def recurse(h)\n  h.flat_map do |k,v|\n    if v.is_a?(Hash)      \n      recurse(v).map { |str| \"%s.%s\" % [k.to_s, str] }\n    else\n      k.to_s\n    end\n  end\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>h = {a: {m: {b: 2, c:1}, d: {e: {f: nil}, g: 3}}}\nrecurse(h)\n  #=&gt; [\"a.m.b\", \"a.m.c\", \"a.d.e.f\", \"a.d.g\"] \n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>h = {a: {m: {b: 2, c:1}, d: 5 }, e: {f: {g: nil}, h: 3}}\nrecurse(h)\n  #=&gt; [\"a.m.b\", \"a.m.c\", \"a.d\", \"e.f.g\", \"e.h\"]\n</code></pre>\n"}], "owner": {"reputation": 1108, "user_id": 1001807, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/da6835f9d0a471c0093ed1d81f523673?s=128&d=identicon&r=PG", "display_name": "Leon", "link": "https://stackoverflow.com/users/1001807/leon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 59495580, "answer_count": 1, "score": -1, "last_activity_date": 1577417474, "creation_date": 1577409529, "question_id": 59495005, "link": "https://stackoverflow.com/questions/59495005/build-paths-of-edge-keys-in-nested-hashes-in-ruby", "title": "Build paths of edge keys in nested hashes in ruby", "body": "<p>I have a nested hash with multiple levels and I want to get all the possible paths of each edge key from the root as dot notation string. For example</p>\n\n<p><code>{a: {m: {b: 2}, c: {d: {e: nil}}}}</code></p>\n\n<p>I would like to produce an array of elements like the one below</p>\n\n<p><code>['a.m.b', 'a.c.d.e']</code></p>\n"}, {"tags": ["ruby", "amazon-web-services", "ruby-on-rails-5", "capistrano", "web-deployment"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 12261013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d47d3c4afed1098afa6db1509eca1871?s=128&d=identicon&r=PG&f=1", "display_name": "sinzanmono46", "link": "https://stackoverflow.com/users/12261013/sinzanmono46"}, "edited": false, "score": 0, "creation_date": 1577437662, "post_id": 59495767, "comment_id": 105169652, "body": ",Thanks you for your knowledge. I still have plenty of disk space. Should I use the command in the ssh? or just in the local server.  When I used it in the local server, I failed because of a ModuleNotFoundError: Module not found: Error: Can&#39;t resolve &#39;@fortawesome/fontawesome-free. Could you please give me more info about the command?"}, {"owner": {"reputation": 1043, "user_id": 5659594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c90ec27dffb2d716ee0c796cd73078c?s=128&d=identicon&r=PG&f=1", "display_name": "Fernand", "link": "https://stackoverflow.com/users/5659594/fernand"}, "reply_to_user": {"reputation": 53, "user_id": 12261013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d47d3c4afed1098afa6db1509eca1871?s=128&d=identicon&r=PG&f=1", "display_name": "sinzanmono46", "link": "https://stackoverflow.com/users/12261013/sinzanmono46"}, "edited": false, "score": 0, "creation_date": 1577590012, "post_id": 59495767, "comment_id": 105204745, "body": "execute it in ssh under the working directory. What is the project path btw?"}, {"owner": {"reputation": 53, "user_id": 12261013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d47d3c4afed1098afa6db1509eca1871?s=128&d=identicon&r=PG&f=1", "display_name": "sinzanmono46", "link": "https://stackoverflow.com/users/12261013/sinzanmono46"}, "edited": false, "score": 0, "creation_date": 1577611256, "post_id": 59495767, "comment_id": 105207454, "body": "I tried it but nothing changed.Also added config.assets.compile = true code but no change. its /var/www/app/."}, {"owner": {"reputation": 1043, "user_id": 5659594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c90ec27dffb2d716ee0c796cd73078c?s=128&d=identicon&r=PG&f=1", "display_name": "Fernand", "link": "https://stackoverflow.com/users/5659594/fernand"}, "reply_to_user": {"reputation": 53, "user_id": 12261013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d47d3c4afed1098afa6db1509eca1871?s=128&d=identicon&r=PG&f=1", "display_name": "sinzanmono46", "link": "https://stackoverflow.com/users/12261013/sinzanmono46"}, "edited": false, "score": 0, "creation_date": 1577704996, "post_id": 59495767, "comment_id": 105229551, "body": "So the precompile-command ran successfully with no errors in the remote server?"}, {"owner": {"reputation": 770, "user_id": 10550562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i1CGM.jpg?s=128&g=1", "display_name": "Abdul Basit", "link": "https://stackoverflow.com/users/10550562/abdul-basit"}, "edited": false, "score": 0, "creation_date": 1618316453, "post_id": 59495767, "comment_id": 118560016, "body": "Assets are compiled successfully but still cap production deploy fails."}], "tags": [], "owner": {"reputation": 1043, "user_id": 5659594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c90ec27dffb2d716ee0c796cd73078c?s=128&d=identicon&r=PG&f=1", "display_name": "Fernand", "link": "https://stackoverflow.com/users/5659594/fernand"}, "is_accepted": false, "score": 1, "last_activity_date": 1577590499, "last_edit_date": 1577590499, "creation_date": 1577418586, "answer_id": 59495767, "question_id": 59494415, "link": "https://stackoverflow.com/questions/59494415/capistorano-deploy-sshkitrunnerexecuteerror-rake-exit-status-1/59495767#59495767", "title": "Capistorano deploy SSHKit::Runner::ExecuteError : rake exit status: 1", "body": "<p>It seems the server connection was cut abruptly.\n<br>Can you check the server if it still has enough disk space?\n<br/>Also, can you try manually running asset-compile IN the server and see what happens.</p>\n\n<pre><code>RAILS_ENV=production rails assets:precompile\n</code></pre>\n\n<p>\u203bchange to staging or development(depends on your environment).</p>\n"}, {"tags": [], "owner": {"reputation": 201, "user_id": 1932383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da1713798b02136180023ca49402029b?s=128&d=identicon&r=PG", "display_name": "Seballot", "link": "https://stackoverflow.com/users/1932383/seballot"}, "is_accepted": false, "score": 1, "last_activity_date": 1606715834, "creation_date": 1606715834, "answer_id": 65068745, "question_id": 59494415, "link": "https://stackoverflow.com/questions/59494415/capistorano-deploy-sshkitrunnerexecuteerror-rake-exit-status-1/65068745#65068745", "title": "Capistorano deploy SSHKit::Runner::ExecuteError : rake exit status: 1", "body": "<p>I got this error because I did not have <code>npm</code> and <code>yarn</code> installed on the server</p>\n"}], "owner": {"reputation": 53, "user_id": 12261013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d47d3c4afed1098afa6db1509eca1871?s=128&d=identicon&r=PG&f=1", "display_name": "sinzanmono46", "link": "https://stackoverflow.com/users/12261013/sinzanmono46"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1419, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1606715834, "creation_date": 1577402676, "question_id": 59494415, "link": "https://stackoverflow.com/questions/59494415/capistorano-deploy-sshkitrunnerexecuteerror-rake-exit-status-1", "title": "Capistorano deploy SSHKit::Runner::ExecuteError : rake exit status: 1", "body": "<p>Thank you for checking out my issue.<br>\nI have an error with the capistorano right now.<br>\nHave been struggling with this error for few days, so please help me out.<br>\nI am using the Active storage in the app.<br>\nThe keys are in the /etc/environment.<br>\nJust in case in the credentials too.(AWS IAM keys)<br>\nDetails are bellow.<br>\nPlease tell me if you need more info, I really appreciate if you could help me out.<br>\nThank you.<br></p>\n\n<h3>Error log</h3>\n\n<pre><code>00:12 deploy:assets:precompile\n      01 $HOME/.rbenv/bin/rbenv exec bundle exec rake assets:precompile\n#&lt;Thread:0x00007fa8bc548e10@/Users/coro/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/sshkit-1.20.0/lib/sshkit/runners/parallel.rb:10 run&gt; terminated with exception (report_on_exception is true):\nTraceback (most recent call last):\n    1: from /Users/coro/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/sshkit-1.20.0/lib/sshkit/runners/parallel.rb:11:in `block (2 levels) in execute'\n/Users/coro/.rbenv/versions/2.5.1/lib/ruby/gems/2.5.0/gems/sshkit-1.20.0/lib/sshkit/runners/parallel.rb:15:in `rescue in block (2 levels) in execute': Exception while executing as ec2-user@18.176.69.6: rake exit status: 1 (SSHKit::Runner::ExecuteError)\nrake stdout: Nothing written\nrake stderr: Nothing written\n(Backtrace restricted to imported tasks)\ncap aborted!\nSSHKit::Runner::ExecuteError: Exception while executing as ec2-user@18.176.69.6: rake exit status: 1\nrake stdout: Nothing written\nrake stderr: Nothing written\n\n\nCaused by:\nSSHKit::Command::Failed: rake exit status: 1\nrake stdout: Nothing written\nrake stderr: Nothing written\n\nTasks: TOP =&gt; deploy:assets:precompile\n(See full trace by running task with --trace)\nThe deploy has failed with an error: Exception while executing as ec2-user@18.176.69.6: rake exit status: 1\nrake stdout: Nothing written\nrake stderr: Nothing written\n\n\n** DEPLOY FAILED\n** Refer to log/capistrano.log for details. Here are the last 20 lines:\n</code></pre>\n\n<h3>Gemfile</h3>\n\n<pre><code>source 'https://rubygems.org'\ngit_source(:github) { |repo| \"https://github.com/#{repo}.git\" }\n\nruby '2.5.1'\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '~&gt; 6.0.1'\n# Use mysql as the database for Active Record\ngem 'mysql2', '&gt;= 0.4.4'\n# Use Puma as the app server\ngem 'puma', '~&gt; 4.1'\n# Use SCSS for stylesheets\ngem 'sass-rails', '&gt;= 6'\n# Transpile app-like JavaScript. Read more: https://github.com/rails/webpacker\ngem 'webpacker', '~&gt; 4.0'\n# Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\n# gem 'turbolinks', '~&gt; 5'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\n# gem 'jbuilder', '~&gt; 2.7'\n# Use Active Model has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Active Storage variant\ngem 'image_processing', '~&gt; 1.2'\n\n# Reduces boot times through caching; required in config/boot.rb\ngem 'bootsnap', '&gt;= 1.4.2', require: false\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platforms: %i[mri mingw x64_mingw]\n  gem 'capistrano'\n  gem 'capistrano-rbenv'\n  gem 'capistrano-bundler'\n  gem 'capistrano-rails'\n  gem 'capistrano3-unicorn'\nend\n\ngroup :development do\n  # Access an interactive console on exception pages or by calling 'console' anywhere in the code.\n  gem 'listen', '&gt;= 3.0.5', '&lt; 3.2'\n  gem 'web-console', '&gt;= 3.3.0'\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'better_errors'\n  gem 'binding_of_caller'\n  gem 'rubocop', require: false\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\nend\n\ngroup :production do\n  gem 'unicorn', '5.4.1'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'active_hash'\ngem \"aws-sdk-s3\", require: false\ngem \"devise\"\ngem 'dotenv-rails'\ngem 'font-awesome-sass'\ngem 'mini_magick'\ngem 'pry-rails'\ngem 'tzinfo-data', platforms: %i[mingw mswin x64_mingw jruby]\n\n</code></pre>\n\n<h3>Capfile</h3>\n\n<pre><code>require \"capistrano/setup\"\nrequire \"capistrano/deploy\"\nrequire \"capistrano/scm/git\"\ninstall_plugin Capistrano::SCM::Git\n\nrequire \"capistrano/rbenv\"\nrequire \"capistrano/bundler\"\nrequire \"capistrano/rails/assets\"\nrequire \"capistrano/rails/migrations\"\nrequire 'capistrano3/unicorn'\nDir.glob(\"lib/capistrano/tasks/*.rake\").each { |r| import r }\n\n</code></pre>\n\n<h3>deploy.rb</h3>\n\n<pre><code>lock '3.11.2'\n\nset :application, 'datingapp'\n\nset :repo_url,  'git@github.com:coro-from-Kyoto/DatingApp.git'\n\nset :linked_dirs, fetch(:linked_dirs, []).push('log', 'tmp/pids', 'tmp/cache', 'tmp/sockets', 'vendor/bundle', 'public/system', 'public/uploads')\n\nset :rbenv_type, :user\nset :rbenv_ruby, '2.5.1'\n\nset :ssh_options, auth_methods: ['publickey'],\n                  keys: ['~/.ssh/DatingAppPort.pem'] \n\nset :unicorn_pid, -&gt; { \"#{shared_path}/tmp/pids/unicorn.pid\" }\n\nset :unicorn_config_path, -&gt; { \"#{current_path}/config/unicorn.rb\" }\nset :keep_releases, 5\n\nset :linked_files, fetch(:linked_files, []).push(\"config/master.key\")\n\n\nafter 'deploy:publishing', 'deploy:restart'\nnamespace :deploy do\n  task :restart do\n    invoke 'unicorn:restart'\n  end\nend\n</code></pre>\n\n<h3>Unicorn.rb</h3>\n\n<pre><code>app_path = File.expand_path('../../../', __FILE__)\n\nworker_processes 1\n\nworking_directory \"#{app_path}/current\"\n\npid \"#{app_path}/shared/tmp/pids/unicorn.pid\"\n\nlisten \"#{app_path}/shared/tmp/sockets/unicorn.sock\"\n\nstderr_path \"#{app_path}/shared/log/unicorn.stderr.log\"\n\nstdout_path \"#{app_path}/shared/log/unicorn.stdout.log\"\n\ntimeout 60\n\npreload_app true\nGC.respond_to?(:copy_on_write_friendly=) &amp;&amp; GC.copy_on_write_friendly = true\n\ncheck_client_connection false\n\nrun_once = true\n\nbefore_fork do |server, worker|\n  defined?(ActiveRecord::Base) &amp;&amp;\n    ActiveRecord::Base.connection.disconnect!\n\n  if run_once\n    run_once = false # prevent from firing again\n  end\n\n  old_pid = \"#{server.config[:pid]}.oldbin\"\n  if File.exist?(old_pid) &amp;&amp; server.pid != old_pid\n    begin\n      sig = (worker.nr + 1) &gt;= server.worker_processes ? :QUIT : :TTOU\n      Process.kill(sig, File.read(old_pid).to_i)\n    rescue Errno::ENOENT, Errno::ESRCH =&gt; e\n      logger.error e\n    end\n  end\nend\n\nafter_fork do |_server, _worker|\n  defined?(ActiveRecord::Base) &amp;&amp; ActiveRecord::Base.establish_connection\nend\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "hash"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1577404516, "post_id": 59494483, "comment_id": 105163147, "body": "<code>array.each_slice(2) do |pair| ...</code> is sufficient (no need for <code>.each</code>). You might explain that <code>array.each_slice(2).with_object({}) { |(key, val),hash| hash[k] = val }</code> avoids the need for <code>hash = {}</code> at the beginning and <code>hash</code> at the end."}, {"owner": {"reputation": 144312, "user_id": 62076, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/62c90b6f399e6b95554b2da31ca8619a?s=128&d=identicon&r=PG", "display_name": "Alex Wayne", "link": "https://stackoverflow.com/users/62076/alex-wayne"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1577404650, "post_id": 59494483, "comment_id": 105163178, "body": "Thanks for the note about the redundant each, but I was trying to keep the quantity of new concepts here somewhat low for simplicity sake :) Good points, though."}], "tags": [], "owner": {"reputation": 144312, "user_id": 62076, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/62c90b6f399e6b95554b2da31ca8619a?s=128&d=identicon&r=PG", "display_name": "Alex Wayne", "link": "https://stackoverflow.com/users/62076/alex-wayne"}, "is_accepted": false, "score": 2, "last_activity_date": 1577404550, "last_edit_date": 1577404550, "creation_date": 1577403357, "answer_id": 59494483, "question_id": 59494403, "link": "https://stackoverflow.com/questions/59494403/convert-an-array-elements-into-a-hash-ruby/59494483#59494483", "title": "Convert an array elements into a hash ruby", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-each_slice\" rel=\"nofollow noreferrer\"><code>Enumerable#each_slice</code></a> to group the array into pairs, then use the first item of each pair as the key, and the second item as the value.</p>\n\n<pre><code>def array_to_hash(array)\n  # Create a new hash to store the return value\n  hash = {}\n\n  # Slice the array into smaller arrays, each of length 2.\n  array.each_slice(2) do |pair|\n\n    # Get the key and value from the pair\n    key = pair[0]\n    value = pair[1]\n\n    # Update the hash\n    hash[key] = value\n  end\n\n  # Return the hash\n  hash\nend\n\narray_to_hash([:a, :b, :c, :d]) #=&gt; { :a =&gt; :b, :c =&gt; :d }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 7, "last_activity_date": 1577405039, "creation_date": 1577405039, "answer_id": 59494640, "question_id": 59494403, "link": "https://stackoverflow.com/questions/59494403/convert-an-array-elements-into-a-hash-ruby/59494640#59494640", "title": "Convert an array elements into a hash ruby", "body": "<pre><code>arr = [:a, :b, :c, :d]\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>Hash[*arr]\n  #=&gt; {:a=&gt;:b, :c=&gt;:d}\n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Hash.html#method-c-5B-5D\" rel=\"noreferrer\">Hash::[]</a>.</p>\n\n<p><code>Hash[*arr]</code> is here the same as:</p>\n\n<pre><code>Hash[:a, :b, :c, :d]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 148, "user_id": 4016635, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZM1-iWCyRWo/AAAAAAAAAAI/AAAAAAAAAko/k9ZcPD2Ytks/photo.jpg?sz=128", "display_name": "Adem Dinarevi\u0107", "link": "https://stackoverflow.com/users/4016635/adem-dinarevi%c4%87"}, "is_accepted": false, "score": 0, "last_activity_date": 1577704200, "creation_date": 1577704200, "answer_id": 59529840, "question_id": 59494403, "link": "https://stackoverflow.com/questions/59494403/convert-an-array-elements-into-a-hash-ruby/59529840#59529840", "title": "Convert an array elements into a hash ruby", "body": "<p>Even though I would suggest Alex Wayne's answer, there is another way you can approach this:</p>\n\n<pre><code>array = [1,2,3,4,5,6,7,8,9,10] \nhash = {}\ni = 0\n\nwhile (i&lt;array.length)\n  hash[array[i] = array[i+1]\n  i+=2\nend\n\nhash\n</code></pre>\n\n<p><a href=\"https://repl.it/@AdemDinarevic/Array-to-hash-Stackoverflow-example\" rel=\"nofollow noreferrer\">Sample demo</a></p>\n"}], "owner": {"reputation": 11, "user_id": 12603634, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCUBYp99TKnMYAAnqdZH9NkqxFQZS2LVchVIElY=k-s128", "display_name": "Gen Forsythe", "link": "https://stackoverflow.com/users/12603634/gen-forsythe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1577704200, "creation_date": 1577402556, "last_edit_date": 1577420679, "question_id": 59494403, "link": "https://stackoverflow.com/questions/59494403/convert-an-array-elements-into-a-hash-ruby", "title": "Convert an array elements into a hash ruby", "body": "<p>I have an array of strings and want to convert it into a hash where\n<code>array[0]</code> is the key and <code>array[1]</code> is the value then <code>array[2]</code> is the key for the next set.</p>\n\n<p>I have tried <code>#each</code>, <code>#map</code>, <code>#each_with_object</code>, <code>#to_h</code> in all manner of combinations and the closest I can get is to set each array element to a key with nil value.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># animal_data1 ={}\n# animal_data1 = Hash[collected.map {|key,value| [key.to_sym, value]}]\n# puts animal_data1 \n\n=&gt; {\n    :\"Kingdom:Five groups that classify all living things\"=&gt;nil,\n    :Animalia=&gt;nil,\n    :\"Phylum:A group of animals within the animal kingdom\"=&gt;nil,\n    :Chordata=&gt;nil,\n    :\"Class:A group of animals within a pylum\"=&gt;nil,\n    :Mammalia=&gt;nil,\n    :\"Order:A group of animals within a class\"=&gt;nil,\n    :Tubulidentata=&gt;nil,\n    :\"Family:A group of animals within an order\"=&gt;nil\n    }\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1577395571, "post_id": 59493367, "comment_id": 105161243, "body": "What is the full name of the index file (with extensions) and where is it located ?"}, {"owner": {"reputation": 11, "user_id": 12343727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ee15d57b0158a694d80e8533374cd5c?s=128&d=identicon&r=PG&f=1", "display_name": "ynwebdev", "link": "https://stackoverflow.com/users/12343727/ynwebdev"}, "reply_to_user": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1577400996, "post_id": 59493367, "comment_id": 105162518, "body": "@Viktor the index file is named index.html.erb and is located in the sampleApp/views/test/index.html.erb"}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1577404122, "post_id": 59493367, "comment_id": 105163080, "body": "Are you sure you saved the index file with that content? An error like that could occur when there&#39;s no content inside the view"}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 3, "last_activity_date": 1577430711, "creation_date": 1577430711, "answer_id": 59497292, "question_id": 59493367, "link": "https://stackoverflow.com/questions/59493367/controller-error-trying-to-run-application-with-ruby-on-rails/59497292#59497292", "title": "Controller error trying to run application with ruby on rails", "body": "<p>I think that is happening because the naming does not follow Rails naming conventions. Controllers should be named with plural nouns. </p>\n\n<p>Placed the controller in <code>app/controllers/tests_controller.rb</code> and name it <code>TestsController</code>. Store the index view in <code>app/views/tests/index.html.erb</code>.</p>\n\n<p>Furthermore the <code>config/routes.rb</code> needs to follow that convention too:</p>\n\n<pre><code>Rails.application.routes.draw do\n  root to: 'tests#index'\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12343727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ee15d57b0158a694d80e8533374cd5c?s=128&d=identicon&r=PG&f=1", "display_name": "ynwebdev", "link": "https://stackoverflow.com/users/12343727/ynwebdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577621481, "creation_date": 1577393511, "last_edit_date": 1577399094, "question_id": 59493367, "link": "https://stackoverflow.com/questions/59493367/controller-error-trying-to-run-application-with-ruby-on-rails", "title": "Controller error trying to run application with ruby on rails", "body": "<p>I am receiving an error when I try and run the application I am building with ruby on rails. I am getting the following error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/oinGN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oinGN.png\" alt=\"Error I am receiving\"></a></p>\n\n<blockquote>\n  <p>ActionController::MissingExactTemplate (TestController#index is missing a template for request formats: text/html):</p>\n</blockquote>\n\n<pre><code>class TestController &lt; ApplicationController\n  def index\n  end\nend\n</code></pre>\n\n<p>My route.rb file:</p>\n\n<pre><code>Rails.application.routes.draw do\n  get 'test/index'\n  # For details on the DSL available within this file, see https://guides.rubyonrails.org/routing.html\n  root 'test#index'\nend\n</code></pre>\n\n<p>My index file:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;h1&gt;Test#index&lt;/h1&gt;\n&lt;p&gt;Find me in app/views/test/index.html.erb&lt;/p&gt;\n</code></pre>\n\n<p>I can see all the files I am referring to but don't understand this error. Can anyone shed some light on why I am getting this error?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1577400071, "post_id": 59493297, "comment_id": 105162320, "body": "You&#39;re changing your criteria after the fact. Don&#39;t do that; It makes for very poor questions and if done habitually will irritate those helping you.  If the sample input is not correct please fix it. Also, don&#39;t add &quot;edited&quot; or &quot;updated&quot; tags to your text. We can see what&#39;s changed. Add new text as if it was there all along."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1577404102, "post_id": 59493297, "comment_id": 105163073, "body": "Suppose you create a method <code>m</code>, called <code>m(file_name)</code>. 1. Please show the Ruby object that you want <code>m</code> to return when the file <code>file_name</code> contains the text shown in your example. (More generally, whenever you give an example show the desired Ruby object that is to be returned.) 2. You said, &quot;In some cases, two newlines do not separate the data...&quot;. In what other ways might the blocks of data be separated? 3. Can the entire file be read into an array (using <code>readlines</code>, say) or is the file so large that it must be read line-by-line (using <code>foreach</code>, say)? Please answer by editing"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1577434355, "post_id": 59493297, "comment_id": 105168671, "body": "@LewlSauce : Text files are not meant to be read backwards. I suggest you read the file forward, keeping the lines read so far in an array. Once you encounter a line with your keyword <i>open</i>, go backwards through the array to collect your IP address. If there is none, throw away the array collected so far, and continue reading with a fresh array."}], "answers": [{"comments": [{"owner": {"reputation": 3425, "user_id": 1493116, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9371f372f90b7c283579b097c67b9cd2?s=128&d=identicon&r=PG", "display_name": "LewlSauce", "link": "https://stackoverflow.com/users/1493116/lewlsauce"}, "edited": false, "score": 0, "creation_date": 1577397927, "post_id": 59493924, "comment_id": 105161789, "body": "Thanks for the reply. How would I take this though and iterate back through until I reach the IP address? I would like to capture from IP address to &quot;open&quot;, but have to search for &quot;open&quot; and then go back to whereever the IP address is."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 3425, "user_id": 1493116, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9371f372f90b7c283579b097c67b9cd2?s=128&d=identicon&r=PG", "display_name": "LewlSauce", "link": "https://stackoverflow.com/users/1493116/lewlsauce"}, "edited": false, "score": 0, "creation_date": 1577398074, "post_id": 59493924, "comment_id": 105161822, "body": "You don&#39;t have to iterate back, the IP is captured in the block. I&#39;ll add a bit more code showing what I&#39;d do."}, {"owner": {"reputation": 3425, "user_id": 1493116, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9371f372f90b7c283579b097c67b9cd2?s=128&d=identicon&r=PG", "display_name": "LewlSauce", "link": "https://stackoverflow.com/users/1493116/lewlsauce"}, "edited": false, "score": 1, "creation_date": 1577398465, "post_id": 59493924, "comment_id": 105161905, "body": "Gotcha. Ok I see where we&#39;re going. So essentially this would just break up the results based on two consecutive newlines, but in some cases I don&#39;t have two newlines separating the results, which is why I needed to go back up through the logs until I find the first instance of an IP address. Sorry that I didn&#39;t make that clear."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 3425, "user_id": 1493116, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9371f372f90b7c283579b097c67b9cd2?s=128&d=identicon&r=PG", "display_name": "LewlSauce", "link": "https://stackoverflow.com/users/1493116/lewlsauce"}, "edited": false, "score": 1, "creation_date": 1577398992, "post_id": 59493924, "comment_id": 105162046, "body": "Notice that in the last example it&#39;s grabbing the entire block and returning it as an array. It&#39;d be easy to rebuild the string of _join_ed (hint, hint) lines if that&#39;s your desire."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 3425, "user_id": 1493116, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9371f372f90b7c283579b097c67b9cd2?s=128&d=identicon&r=PG", "display_name": "LewlSauce", "link": "https://stackoverflow.com/users/1493116/lewlsauce"}, "edited": false, "score": 1, "creation_date": 1577400444, "post_id": 59493924, "comment_id": 105162402, "body": "I added a final example that handles missing double-separators."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 1, "last_activity_date": 1577400508, "last_edit_date": 1577400508, "creation_date": 1577397848, "answer_id": 59493924, "question_id": 59493297, "link": "https://stackoverflow.com/questions/59493297/trying-to-grab-data-from-a-log-file-that-contains-multiple-strings/59493924#59493924", "title": "Trying to grab data from a log file that contains multiple strings", "body": "<p>Study IO's <a href=\"https://ruby-doc.org/core-2.6.5/IO.html#method-c-readlines\" rel=\"nofollow noreferrer\"><code>readlines</code></a> and <a href=\"https://ruby-doc.org/core-2.6.5/IO.html#method-c-foreach\" rel=\"nofollow noreferrer\"><code>foreach</code></a> documentation, especially the <code>sep=$/</code> parameter:</p>\n\n<blockquote>\n  <p>...where lines are separated by sep.</p>\n</blockquote>\n\n<p>Allowing us to define the end of line lets us read files in very interesting ways, such as in chunks:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>data = File.foreach(ENV['HOME'] + '/Desktop/test.txt', \"\\n\\n\").map { |block|\n  block.lines.reject { |l| l.rstrip.empty? }.last\n}\n\ndata\n# =&gt; [\"LOOKING FOR THIS STRING: open\\n\", \"LOOKING FOR THIS STRING: open\\n\"]\n</code></pre>\n\n<p>I stuck your sample data into a file, opened it and told IO to use the occurrence of two adjacent line-ends to mark the end of a line. Then it's simple to split the text into individual lines, reject empty lines and select the last one in the block.</p>\n\n<blockquote>\n  <p>How would I take this though and iterate back through until I reach the IP address?</p>\n</blockquote>\n\n<pre class=\"lang-rb prettyprint-override\"><code>data = File.foreach(ENV['HOME'] + '/Desktop/test.txt', \"\\n\\n\").map { |block|\n  chunk = block.lines.reject { |l| l.rstrip.empty? }\n  [\n    chunk.first, \n    chunk.last\n  ]\n}\n\ndata\n# =&gt; [[\"Here's an IP: 192.168.1.1\\n\", \"LOOKING FOR THIS STRING: open\\n\"],\n#     [\"Here's an IP: 192.168.1.2\\n\", \"LOOKING FOR THIS STRING: open\\n\"]]\n</code></pre>\n\n<blockquote>\n  <p>I would like to capture from IP address to \"open\", but have to search for \"open\" and then go back to whereever the IP address is.</p>\n</blockquote>\n\n<pre class=\"lang-rb prettyprint-override\"><code>data = File.foreach(ENV['HOME'] + '/Desktop/test.txt', \"\\n\\n\").map { |block|\n  block.lines.reject { |l| l.rstrip.empty? }\n}\n\ndata\n# =&gt; [[\"Here's an IP: 192.168.1.1\\n\",\n#      \"here is some data\\n\",\n#      \"Here is more dataa\\n\",\n#      \"LOOKING FOR THIS STRING: open\\n\"],\n#     [\"Here's an IP: 192.168.1.2\\n\",\n#      \"here is some data\\n\",\n#      \"Here is more dataa\\n\",\n#      \"LOOKING FOR THIS STRING: open\\n\"]]\n</code></pre>\n\n<p>Be careful using <code>readlines</code> when processing text files. It slurps the entire file into memory which is usually a bad idea, especially when dealing with any sort of log file as they can get REALLY big and consume all available space in RAM, which will take your machine to its knees. See \"<a href=\"https://stackoverflow.com/questions/25189262/why-is-slurping-a-file-not-a-good-practice\">Why is &quot;slurping&quot; a file not a good practice?</a>\" for more information.</p>\n\n<p>You could accomplish something similar using <a href=\"https://ruby-doc.org/core-2.6.5/Enumerable.html\" rel=\"nofollow noreferrer\">Enumerable</a>'s <code>slice_*</code> methods, but letting IO handle it with the separator is more straightforward and should be faster:</p>\n\n<p>If the double new-lines are sometimes missing then it's still easily done by removing the <code>sep</code> value and letting one of the <code>slice_*</code> methods handle the lifting, but note that afterwards there's still the trailing double new-lines, but figuring out how to strip those is left as an exercise for the reader.</p>\n\n<p>I added an extra block that didn't have the separators:</p>\n\n<p>Based on a file looking like:</p>\n\n<pre><code>Here's an IP: 192.168.1.1\nhere is some data\nHere is more dataa\nLOOKING FOR THIS STRING: open\n\nHere's an IP: 192.168.1.2\nhere is some data\nHere is more dataa\nLOOKING FOR THIS STRING: open\nHere's an IP: 192.168.1.2\nhere is some data\nHere is more dataa\nLOOKING FOR THIS STRING: open\n</code></pre>\n\n<p>The code works like:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>data = File.foreach(ENV['HOME'] + '/Desktop/test.txt')\n  .slice_after { |l| l[/open$/] }\n  .to_a\n\ndata\n# =&gt; [[\"Here's an IP: 192.168.1.1\\n\",\n#      \"here is some data\\n\",\n#      \"Here is more dataa\\n\",\n#      \"LOOKING FOR THIS STRING: open\\n\"],\n#     [\"\\n\",\n#      \"Here's an IP: 192.168.1.2\\n\",\n#      \"here is some data\\n\",\n#      \"Here is more dataa\\n\",\n#      \"LOOKING FOR THIS STRING: open\\n\"],\n#     [\"Here's an IP: 192.168.1.2\\n\",\n#      \"here is some data\\n\",\n#      \"Here is more dataa\\n\",\n#      \"LOOKING FOR THIS STRING: open\\n\"]]\n</code></pre>\n"}], "owner": {"reputation": 3425, "user_id": 1493116, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/9371f372f90b7c283579b097c67b9cd2?s=128&d=identicon&r=PG", "display_name": "LewlSauce", "link": "https://stackoverflow.com/users/1493116/lewlsauce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 59493924, "answer_count": 1, "score": 0, "last_activity_date": 1577400508, "creation_date": 1577392971, "last_edit_date": 1577399919, "question_id": 59493297, "link": "https://stackoverflow.com/questions/59493297/trying-to-grab-data-from-a-log-file-that-contains-multiple-strings", "title": "Trying to grab data from a log file that contains multiple strings", "body": "<p>I have a log file with the sample file contents</p>\n\n<pre><code>Here's an IP: 192.168.1.1\nhere is some data\nHere is more dataa\nLOOKING FOR THIS STRING: open\n\nHere's an IP: 192.168.1.2\nhere is some data\nHere is more dataa\nLOOKING FOR THIS STRING: open\n</code></pre>\n\n<p>I am able to extract the IP address using a regex of <code>data[/\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}/]</code>; however, I am trying to figure out a way to look for the word \"open\" (for example) and go <em>reverse</em> through the logs to find out which IP address it matches with. I am trying to also accomplish doing this on multiple instances.</p>\n\n<p>For example, that output is from the <code>data</code> variable.</p>\n\n<p>One option I thought of was trying to split the data by newline, creating an array, and then going through and finding all of the items that contain \"open\", grab their index, and work my way back until i find an IP address. I'm not sure this is a feasible method.</p>\n\n<p>In some cases, two newlines (<code>\\n\\n</code>) does not separate the data so I can't use that as a \"delimiter\" so to speak. I need to specifically be able to iterate back up through the log files until I can find an IP address.</p>\n\n<p>Is there any better way to accomplish this by chance?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "openssl"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12603023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96af81981b168df2351059323de46ded?s=128&d=identicon&r=PG&f=1", "display_name": "ARC", "link": "https://stackoverflow.com/users/12603023/arc"}, "edited": false, "score": 0, "creation_date": 1577393541, "post_id": 59493140, "comment_id": 105160791, "body": "Thanks, the first line worked but the second line is gving me, &quot;You requested building with &#39;gcc-4.7&#39; but it is not in your path.&quot; I typed <code>whereis gcc</code> and got &#39;/usr/bin/gcc&#39;.  My current $PATH is = /Users/cadams/.rvm/gems/ruby-1.8.7-p374/bin:/Users/cadams/.r&zwnj;&#8203;vm/gems/ruby-1.8.7-p&zwnj;&#8203;374@global/bin:/User&zwnj;&#8203;s/cadams/.rvm/rubies&zwnj;&#8203;/ruby-1.8.7-p374/bin&zwnj;&#8203;:/Users/cadams/.rvm/&zwnj;&#8203;bin:/usr/local/bin:/&zwnj;&#8203;usr/bin:/bin:/usr/sb&zwnj;&#8203;in:/sbin:/usr/bin/gc&zwnj;&#8203;c:/usr/local/munki:/&zwnj;&#8203;Users/cadams/.rbenv/&zwnj;&#8203;shims  gcc -v is &#39;Configured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/usr/include/c++/4.2.1&#39;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11544535"}, "reply_to_user": {"reputation": 1, "user_id": 12603023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96af81981b168df2351059323de46ded?s=128&d=identicon&r=PG&f=1", "display_name": "ARC", "link": "https://stackoverflow.com/users/12603023/arc"}, "edited": false, "score": 0, "creation_date": 1577394115, "post_id": 59493140, "comment_id": 105160934, "body": "@ARC can use second line without <code>--with-gcc flag</code> work also."}, {"owner": {"reputation": 1, "user_id": 12603023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96af81981b168df2351059323de46ded?s=128&d=identicon&r=PG&f=1", "display_name": "ARC", "link": "https://stackoverflow.com/users/12603023/arc"}, "edited": false, "score": 0, "creation_date": 1577395353, "post_id": 59493140, "comment_id": 105161183, "body": "Ok, It&#39;s now gving me &quot;command gem pristine  --version &#39; failed, you need to fix these gems manually.&quot; and &quot;Error running &#39;__rvm_with ruby-1.8.7-p374 gemset_pristine&quot;  I&#39;ll try to look some of these up."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11544535"}, "reply_to_user": {"reputation": 1, "user_id": 12603023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96af81981b168df2351059323de46ded?s=128&d=identicon&r=PG&f=1", "display_name": "ARC", "link": "https://stackoverflow.com/users/12603023/arc"}, "edited": false, "score": 0, "creation_date": 1577400481, "post_id": 59493140, "comment_id": 105162409, "body": "Run these commands in sequence in terminal, and close all and open new terminal <code>rvm get stable rvm autolibs enable rvm reinstall all --force</code>"}, {"owner": {"reputation": 1, "user_id": 12603023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96af81981b168df2351059323de46ded?s=128&d=identicon&r=PG&f=1", "display_name": "ARC", "link": "https://stackoverflow.com/users/12603023/arc"}, "edited": false, "score": 0, "creation_date": 1577735105, "post_id": 59493140, "comment_id": 105241678, "body": "Thank you for your help. Today I am still working on this problem. I got a new error to show up saying <code>no such file to load -- zlib</code>. I also had to switch to rbenv because I believe I can no longer get rvm after doing <code>rvm implode</code> because their site is down. (I think it&#39;s a domain name renewal thing.) If you happen to have any tips for solving this and using rbenv im all ears! Thanks again!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11544535"}, "is_accepted": false, "score": 1, "last_activity_date": 1577391871, "creation_date": 1577391871, "answer_id": 59493140, "question_id": 59492832, "link": "https://stackoverflow.com/questions/59492832/trying-to-install-rails-error1-no-such-file-to-load-openssl-error-2-undefi/59493140#59493140", "title": "Trying to install rails. Error1. no such file to load -- openssl Error 2. undefined method `invoke_with_build_args&#39; for nil:NilClass", "body": "<p>You have to install OpenSSL first and recompile ruby again:</p>\n\n<p>RVM:</p>\n\n<pre><code>rvm pkg install openssl\nrvm reinstall ruby-1.8.7 --with-gcc=gcc-4.7 --with-openssl-dir=$rvm_path/usr\n</code></pre>\n\n<p>please write complete name version of ruby-1.8.7 </p>\n"}], "owner": {"reputation": 1, "user_id": 12603023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96af81981b168df2351059323de46ded?s=128&d=identicon&r=PG&f=1", "display_name": "ARC", "link": "https://stackoverflow.com/users/12603023/arc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 601, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577391871, "creation_date": 1577389770, "question_id": 59492832, "link": "https://stackoverflow.com/questions/59492832/trying-to-install-rails-error1-no-such-file-to-load-openssl-error-2-undefi", "title": "Trying to install rails. Error1. no such file to load -- openssl Error 2. undefined method `invoke_with_build_args&#39; for nil:NilClass", "body": "<p>I'm trying to get rails downloaded to my machine. I am pretty sure this is an older setup and am not sure what is wrong. I've been at this for hours. Whenever I type <code>rails c</code> I get...</p>\n\n<pre><code>Rails is not currently installed on this system. To get the latest version, simply type:\n\n    $ sudo gem install rails\n\nYou can then rerun your \"rails\" command.\n</code></pre>\n\n<p>Then I type what it says to type and get:</p>\n\n<pre><code>ERROR:  Loading command: install (LoadError)\n        no such file to load -- openssl\nERROR:  While executing gem ... (NoMethodError)\n    undefined method `invoke_with_build_args' for nil:NilClass\n</code></pre>\n\n<p>I explored this for a while and thought I didn't have openssl installed so I downloaded it and now when i type <code>openssl</code> i get a prompt that looks like \"OpenSSL>\" and when I type <code>whereis openssl</code>, I get <code>usr/bin/openssl</code>. Those two things lead me to believe that openssl is installed on my laptop but for some reason when I go to <code>gem install rails</code> I still get an error.</p>\n\n<p>My ruby version is 1.8.7. This is the version the application I'm trying to gain access to was built in. I'm on a MacOS Mojave 10.14.16. If anyone has any tips or could point me in the right direction I'd very much appreciate it. </p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "page-object-gem"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1577387074, "post_id": 59492284, "comment_id": 105159134, "body": "See &quot;<a href=\"https://medium.com/@heyoka/dont-use-click-here-f32f445d1021\" rel=\"nofollow noreferrer\">Don\u2019t use \u201cclick here\u201d and other common hyperlink mistakes</a>&quot;."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1577503626, "post_id": 59492284, "comment_id": 105188365, "body": "Is this with using the accessor or the nested element call? As far as I know, both should work as you expected."}, {"owner": {"reputation": 548, "user_id": 4701396, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0df3867dea5e05aa77615fdf2be0471b?s=128&d=identicon&r=PG&f=1", "display_name": "Bmoe", "link": "https://stackoverflow.com/users/4701396/bmoe"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1577605959, "post_id": 59492284, "comment_id": 105206652, "body": "@Justin Ko, it is with both. I cannot do it as shown in OP and also if I were to do, for example, <code>div_elements[1].some_widget_element</code>."}], "answers": [{"tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": false, "score": 0, "last_activity_date": 1577747687, "creation_date": 1577747687, "answer_id": 59537839, "question_id": 59492284, "link": "https://stackoverflow.com/questions/59492284/how-to-use-plural-page-object-widgets/59537839#59537839", "title": "How to use plural Page-Object widgets", "body": "<p>Registering a widget will define both:</p>\n\n<ul>\n<li>The page-level accessor as well as</li>\n<li>The nested element locator</li>\n</ul>\n\n<p>As an example, let's assume the following HTML:</p>\n\n<pre><code>&lt;html&gt;\n  &lt;body&gt;\n    &lt;div&gt;empty&lt;/div&gt;\n    &lt;div&gt;\n      &lt;some-widget id=\"some-id\"&gt;a&lt;/some-widget&gt;\n      &lt;some-widget id=\"some-id\"&gt;b&lt;/some-widget&gt;\n      &lt;other id=\"some-id\"&gt;c&lt;/other&gt;\n    &lt;/div&gt;\n    &lt;some-widget id=\"some-id\"&gt;d&lt;/some-widget&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>As well, that we have registered the widget:</p>\n\n<pre><code>class SomeWidgetClass &lt; PageObject::Elements::Element\n  PageObject.register_widget :some_widget, self, :element\nend\n</code></pre>\n\n<p><strong>Nested Element</strong></p>\n\n<p>The created nested element method is in the form \"{widget_tag}_elements\".</p>\n\n<pre><code>class TestPage\n  include PageObject\n\n  def nested_in_page\n    some_widget_elements(id: 'some-id', tag_name: 'some-widget')\n  end\n\n  def nested_in_element\n    div_elements[1].some_widget_elements(id: 'some-id', tag_name: 'some-widget')\n  end\nend\n\npage = TestPage.new(browser)\np page.nested_in_page.map(&amp;:text)\n#=&gt; [\"a\", \"b\", \"d\"]\np page.nested_in_element.map(&amp;:text)\n#=&gt; [\"a\", \"b\"]\n</code></pre>\n\n<p><strong>Page-Level Accessor</strong></p>\n\n<p>By default, the page-level accessor for returning an Array of all matching widgets is based on the widget's class name. This differs from the singular accessor method, which you define when registering the widget. Specifically, the method name is defined by the following expression:</p>\n\n<pre><code>def self.plural_form\n  \"#{self.to_s.split('::')[-1].\n      gsub(/([A-Z]+)([A-Z][a-z])/, '\\1_\\2').\n      gsub(/([a-z\\d])([A-Z])/, '\\1_\\2').\n      tr(\"-\", \"_\").\n      downcase}s\"\nend\n</code></pre>\n\n<p>In our example, the <code>SomeWidgetClass</code> class would create a <code>some_widget_classs</code> method:</p>\n\n<pre><code>class TestPage\n  include PageObject\n\n  some_widget_classs(:my_widgets, id: 'some-id', tag_name: 'some-widget')\nend\n\npage = TestPage.new(browser)\np page.my_widgets_elements.map(&amp;:text)\n#=&gt; [\"a\", \"b\", \"d\"]\n</code></pre>\n\n<p>You can override the accessor name by defining the <code>plural_form</code> for your widget. The following renames the method to <code>plural_widgets</code>:</p>\n\n<pre><code>class SomeWidgetClass &lt; PageObject::Elements::Element\n  def self.plural_form\n    :plural_widgets\n  end\n\n  PageObject.register_widget :some_widget, self, :element\nend\n\nclass TestPage\n  include PageObject\n\n  plural_widgets(:my_widgets, id: 'some-id', tag_name: 'some-widget')\nend\n</code></pre>\n\n<p>The actual usage of the page does not change - ie is still <code>page.my_widgets_elements</code>.</p>\n"}], "owner": {"reputation": 548, "user_id": 4701396, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0df3867dea5e05aa77615fdf2be0471b?s=128&d=identicon&r=PG&f=1", "display_name": "Bmoe", "link": "https://stackoverflow.com/users/4701396/bmoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577747687, "creation_date": 1577386069, "last_edit_date": 1577387643, "question_id": 59492284, "link": "https://stackoverflow.com/questions/59492284/how-to-use-plural-page-object-widgets", "title": "How to use plural Page-Object widgets", "body": "<p>I'm using the \"<a href=\"https://github.com/cheezy/page-object\" rel=\"nofollow noreferrer\">PageObject</a>\" gem and Ruby and created a widget using the \"<a href=\"https://github.com/cheezy/page-object/wiki/Custom-page-object-elements-by-using-widgets\" rel=\"nofollow noreferrer\">page-object wiki</a>\" as a reference. </p>\n\n<p>I cannot find plural elements, meaning I can't find an array of elements.</p>\n\n<p>If the tag for my widget is <code>some-widget</code>, this works:</p>\n\n<pre><code>some_widget_element(id: 'some-id')\n</code></pre>\n\n<p>But this does NOT work:</p>\n\n<pre><code>some_widget_elements(id: 'some-id')\n</code></pre>\n\n<p>I am trying to find multiple elements by id, which is how the page is structured.</p>\n\n<p>I get the error:</p>\n\n<pre><code>NoMethodError: undefined method 'new' for nil:NilClass\n</code></pre>\n\n<p>Is there anything I need to do/add to my Widget class?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "warnings", "ruby-on-rails-6", "ruby-2.7"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 8, "creation_date": 1577385057, "post_id": 59491848, "comment_id": 105158526, "body": "Positional arguments and keyword arguments are to be separated in Ruby 3.0. This is a mere warning. Rails is filled with this pattern. <a href=\"https://www.ruby-lang.org/en/news/2019/12/12/separation-of-positional-and-keyword-arguments-in-ruby-3-0/\" rel=\"nofollow noreferrer\">ruby-lang.org/en/news/2019/12/12/&hellip;</a>"}, {"owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 3, "creation_date": 1577432555, "post_id": 59491848, "comment_id": 105168264, "body": "@JoshBrody thank you very much. I saw this link and there are some suggestion to switch of warnings like &quot;If you want to disable the deprecation warnings, please use a command-line argument -W:no-deprecated or add Warning[:deprecated] = false to your code.&quot; but I was thinking on little bit better solution/fix for actionpack v6.0.2.1"}, {"owner": {"reputation": 1885, "user_id": 567479, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a333b55dd9945ec0c19d0ac6d0964634?s=128&d=identicon&r=PG", "display_name": "Vlad", "link": "https://stackoverflow.com/users/567479/vlad"}, "edited": false, "score": 1, "creation_date": 1582127890, "post_id": 59491848, "comment_id": 106672274, "body": "Hiding deprecation warnings across the board is a BAD idea, especially when you want to smooth out your future upgrades."}, {"owner": {"reputation": 4545, "user_id": 5641227, "user_type": "registered", "profile_image": "https://graph.facebook.com/563844727113033/picture?type=large", "display_name": "Khalil Gharbaoui", "link": "https://stackoverflow.com/users/5641227/khalil-gharbaoui"}, "reply_to_user": {"reputation": 1885, "user_id": 567479, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a333b55dd9945ec0c19d0ac6d0964634?s=128&d=identicon&r=PG", "display_name": "Vlad", "link": "https://stackoverflow.com/users/567479/vlad"}, "edited": false, "score": 2, "creation_date": 1583154272, "post_id": 59491848, "comment_id": 107009231, "body": "@Vlad agreed but reducing log noise temporarily is ok (if you know what you&#39;re doing)"}], "answers": [{"tags": [], "owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "is_accepted": false, "score": 5, "last_activity_date": 1577879810, "creation_date": 1577879810, "answer_id": 59552293, "question_id": 59491848, "link": "https://stackoverflow.com/questions/59491848/how-to-fix-railss-warning-messages-with-ruby-2-7-0/59552293#59552293", "title": "How to fix Rails&#39;s warning messages with Ruby 2.7.0", "body": "<p>Obviously it will take some time to for ruby team to remove all this warning in next ruby version. For now the command in your terminal </p>\n\n<pre><code>`RUBYOPT='-W:no-deprecated' rails s` \n</code></pre>\n\n<p>on my basic, plain new rails 6.0.2.1 &amp;&amp; ruby 2.7.0 project remove these two warnings lines above in a question. </p>\n\n<p>Also, with command </p>\n\n<pre><code>RUBYOPT='-W:no-experimental' rails s\n</code></pre>\n\n<p>you will hide warnings about experimental features.</p>\n\n<p>You can combine these two in one command like:</p>\n\n<pre><code>RUBYOPT='-W:no-deprecated -W:no-experimental' rails s\n</code></pre>\n\n<p>However, I tried these commands inside my old project built with rails 5.2 and ruby 2.6.4 later upgraded to rails 6.0.1 and they didn't worked well on for all warnings messages I got from different rails Active* modules and ruby gems.</p>\n\n<p>Probably we will need some time for upgrading code and gems for new latest stuff. </p>\n"}, {"comments": [{"owner": {"reputation": 1033, "user_id": 4759794, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-zX1a_FExhuM/AAAAAAAAAAI/AAAAAAAAAPM/4ZwB931MXzE/photo.jpg?sz=128", "display_name": "Augusto Samam&#233; Barrientos", "link": "https://stackoverflow.com/users/4759794/augusto-samam%c3%a9-barrientos"}, "edited": false, "score": 1, "creation_date": 1581761753, "post_id": 59594760, "comment_id": 106549926, "body": "One issue with this is that installed previous versions of Ruby where the -W:no-deprecated&#39; flag is not valid will throw an error. I fixed this by using export RUBYOPT=&#39;-W0&#39;"}, {"owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "edited": false, "score": 0, "creation_date": 1587557644, "post_id": 59594760, "comment_id": 108556635, "body": "Is there a way of calling the task that won&#39;t give a warning, i.e. to call it in a way that isn&#39;t deprecated?"}, {"owner": {"reputation": 4545, "user_id": 5641227, "user_type": "registered", "profile_image": "https://graph.facebook.com/563844727113033/picture?type=large", "display_name": "Khalil Gharbaoui", "link": "https://stackoverflow.com/users/5641227/khalil-gharbaoui"}, "reply_to_user": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "edited": false, "score": 0, "creation_date": 1587578422, "post_id": 59594760, "comment_id": 108569522, "body": "@barlop well it&#39;s not the task that is giving the warning. The warnings come from the underlying code. Basically finding the deprecations if they are in your own code and fixing them will do. And if they are not part of your code then open issues or pull requests on the repos of the gems you are including and ask them for a fix. or just wait for them to fix it.  Some deprecations are mentioned here: <a href=\"https://www.ruby-lang.org/en/news/2019/12/25/ruby-2-7-0-released/\" rel=\"nofollow noreferrer\">ruby-lang.org/en/news/2019/12/25/ruby-2-7-0-released</a> and here: <a href=\"https://rubyreferences.github.io/rubychanges/2.7.html\" rel=\"nofollow noreferrer\">rubyreferences.github.io/rubychanges/2.7.html</a>"}, {"owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "edited": false, "score": 0, "creation_date": 1587597302, "post_id": 59594760, "comment_id": 108577960, "body": "@KhalilGharbaoui Thanks. I just did.a fresh insall of ruby and rails iirc <a href=\"https://pastebin.com/SYjypsrP\" rel=\"nofollow noreferrer\">pastebin.com/SYjypsrP</a>  looks like i have the latest of each and all I did was created a blank project, tried rake help and got the warning also with rails db:migrate. I guess I should go on those repos.  rake about mentions actionpack.  rake db:migrate or rails db:migrate mentions actionpack, activerecord, activemodel. Though aren&#39;t some of those even native to rails so strange that the rails people couldn&#39;t get it right."}, {"owner": {"reputation": 13518, "user_id": 362378, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ebecfa2fcf3adda56063f996b79ca6b6?s=128&d=identicon&r=PG", "display_name": "iGEL", "link": "https://stackoverflow.com/users/362378/igel"}, "edited": false, "score": 0, "creation_date": 1608292875, "post_id": 59594760, "comment_id": 115545136, "body": "You shouldn&#39;t suppress the warnings, just update to the most recent Rails version."}], "tags": [], "owner": {"reputation": 4545, "user_id": 5641227, "user_type": "registered", "profile_image": "https://graph.facebook.com/563844727113033/picture?type=large", "display_name": "Khalil Gharbaoui", "link": "https://stackoverflow.com/users/5641227/khalil-gharbaoui"}, "is_accepted": false, "score": 69, "last_activity_date": 1583315644, "last_edit_date": 1583315644, "creation_date": 1578171170, "answer_id": 59594760, "question_id": 59491848, "link": "https://stackoverflow.com/questions/59491848/how-to-fix-railss-warning-messages-with-ruby-2-7-0/59594760#59594760", "title": "How to fix Rails&#39;s warning messages with Ruby 2.7.0", "body": "<p>To suppress warnings like:  </p>\n\n<p><code>warning: Using the last argument as keyword parameters is deprecated; maybe ** should be added to the call</code> </p>\n\n<p>For now, simply prefix/pass the <code>RUBYOPT</code> environment variable to your rails commands:</p>\n\n<p><code>RUBYOPT='-W:no-deprecated -W:no-experimental' rails server</code><br>\nor<br>\n<code>RUBYOPT='-W:no-deprecated -W:no-experimental' rails db:migrate</code>  </p>\n\n<p>This may not work with earlier versions of ruby.</p>\n\n<p>For backward compatibility with earlier versions of ruby prefix it with <code>RUBYOPT='-W0'</code> instead.  </p>\n\n<p>example:</p>\n\n<p><code>RUBYOPT='-W0' bundle exec rspec</code></p>\n\n<p>If you don't want to prefix this each time you run a command, then simply add this to the last line of your <code>.zshrc</code> or <code>.bashrc</code> (whatever you're using):</p>\n\n<p><code>export RUBYOPT='-W:no-deprecated -W:no-experimental'</code><br>\nor<br>\n<code>export RUBYOPT='-W0'</code></p>\n\n<p>Also see last point of the notes here:<br>\n<a href=\"https://rubyreferences.github.io/rubychanges/2.7.html#warning-and-\" rel=\"noreferrer\">https://rubyreferences.github.io/rubychanges/2.7.html#warning-and-</a></p>\n"}, {"tags": [], "owner": {"reputation": 1724, "user_id": 2046428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51b0dd872a8540848d292a237714394a?s=128&d=identicon&r=PG", "display_name": "Sajidur Rahman", "link": "https://stackoverflow.com/users/2046428/sajidur-rahman"}, "is_accepted": false, "score": 4, "last_activity_date": 1597928183, "last_edit_date": 1597928183, "creation_date": 1584614053, "answer_id": 60755345, "question_id": 59491848, "link": "https://stackoverflow.com/questions/59491848/how-to-fix-railss-warning-messages-with-ruby-2-7-0/60755345#60755345", "title": "How to fix Rails&#39;s warning messages with Ruby 2.7.0", "body": "<p>As it's just a warning and won't affect anything, you can just suppress them. I found solution 2 to be the right fit for me.</p>\n<p>Option 1. Start the rails server with <code>RUBYOPT='-W:no-deprecated' rails s</code></p>\n<p>Option 2. Set <code>export RUBYOPT='-W:no-deprecated</code> in your bash/zsh profile</p>\n<p>Option 3. Set <code>Warning[:deprecated] = false</code> in your ruby code</p>\n"}, {"comments": [{"owner": {"reputation": 1269, "user_id": 704499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6069c0ab390a602832cf30835fce0691?s=128&d=identicon&r=PG", "display_name": "morgler", "link": "https://stackoverflow.com/users/704499/morgler"}, "edited": false, "score": 0, "creation_date": 1609337252, "post_id": 61780362, "comment_id": 115815899, "body": "How do I fix this in Rails 5? The latest Rails 5 version still has the warning."}, {"owner": {"reputation": 13518, "user_id": 362378, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ebecfa2fcf3adda56063f996b79ca6b6?s=128&d=identicon&r=PG", "display_name": "iGEL", "link": "https://stackoverflow.com/users/362378/igel"}, "reply_to_user": {"reputation": 1269, "user_id": 704499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6069c0ab390a602832cf30835fce0691?s=128&d=identicon&r=PG", "display_name": "morgler", "link": "https://stackoverflow.com/users/704499/morgler"}, "edited": false, "score": 1, "creation_date": 1609514384, "post_id": 61780362, "comment_id": 115857186, "body": "@morgler As stated in <a href=\"https://guides.rubyonrails.org/maintenance_policy.html#bug-fixes\" rel=\"nofollow noreferrer\">Rails maintenance policy</a>, by now only Rails 6.1 will receive bug fixes. Either you update to Rails 6.0.3 or higher, you fork and fix the warnings yourself or find an existing fork, you live with the warnings or you hide them as suggested by the other answers."}, {"owner": {"reputation": 14111, "user_id": 5783745, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Z5VSF.jpg?s=128&g=1", "display_name": "stevec", "link": "https://stackoverflow.com/users/5783745/stevec"}, "edited": false, "score": 0, "creation_date": 1611482225, "post_id": 61780362, "comment_id": 116460625, "body": "I get the warnings on <code>Rails 6.0.3.2</code>"}, {"owner": {"reputation": 13518, "user_id": 362378, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ebecfa2fcf3adda56063f996b79ca6b6?s=128&d=identicon&r=PG", "display_name": "iGEL", "link": "https://stackoverflow.com/users/362378/igel"}, "reply_to_user": {"reputation": 14111, "user_id": 5783745, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Z5VSF.jpg?s=128&g=1", "display_name": "stevec", "link": "https://stackoverflow.com/users/5783745/stevec"}, "edited": false, "score": 1, "creation_date": 1611577311, "post_id": 61780362, "comment_id": 116488080, "body": "@stevec It&#39;s most likely your own code or some other library causing the warnings. Rails has been fixed"}, {"owner": {"reputation": 1, "user_id": 10804097, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CRAYzle4dbQ/AAAAAAAAAAI/AAAAAAAABmc/smGoaLzweuE/photo.jpg?sz=128", "display_name": "honey", "link": "https://stackoverflow.com/users/10804097/honey"}, "edited": false, "score": 0, "creation_date": 1617604713, "post_id": 61780362, "comment_id": 118341265, "body": "I am using rails 6.0.3.6, still getting the warning as &#39;/Users/***/.rvm/gems/ruby-2.7.2/gems/json-1.8.6/lib/json/co&zwnj;&#8203;mmon.rb:155: warning: Using the last argument as keyword parameters is deprecated&#39;"}, {"owner": {"reputation": 13518, "user_id": 362378, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ebecfa2fcf3adda56063f996b79ca6b6?s=128&d=identicon&r=PG", "display_name": "iGEL", "link": "https://stackoverflow.com/users/362378/igel"}, "reply_to_user": {"reputation": 1, "user_id": 10804097, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CRAYzle4dbQ/AAAAAAAAAAI/AAAAAAAABmc/smGoaLzweuE/photo.jpg?sz=128", "display_name": "honey", "link": "https://stackoverflow.com/users/10804097/honey"}, "edited": false, "score": 0, "creation_date": 1617697527, "post_id": 61780362, "comment_id": 118369278, "body": "@devsat Read the previous comment."}], "tags": [], "owner": {"reputation": 13518, "user_id": 362378, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ebecfa2fcf3adda56063f996b79ca6b6?s=128&d=identicon&r=PG", "display_name": "iGEL", "link": "https://stackoverflow.com/users/362378/igel"}, "is_accepted": false, "score": 10, "last_activity_date": 1617697956, "last_edit_date": 1617697956, "creation_date": 1589388725, "answer_id": 61780362, "question_id": 59491848, "link": "https://stackoverflow.com/questions/59491848/how-to-fix-railss-warning-messages-with-ruby-2-7-0/61780362#61780362", "title": "How to fix Rails&#39;s warning messages with Ruby 2.7.0", "body": "<p>Update to Rails 6.0.3, they fixed the warnings.</p>\n<p>If you still get warnings, it's other libraries (see if there are fixed versions or submit a patch) or your own code (<a href=\"https://www.ruby-lang.org/en/news/2019/12/12/separation-of-positional-and-keyword-arguments-in-ruby-3-0/\" rel=\"nofollow noreferrer\">how to fix it</a>).</p>\n"}], "owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25699, "favorite_count": 7, "answer_count": 4, "score": 55, "last_activity_date": 1617697956, "creation_date": 1577383230, "last_edit_date": 1579989639, "question_id": 59491848, "link": "https://stackoverflow.com/questions/59491848/how-to-fix-railss-warning-messages-with-ruby-2-7-0", "title": "How to fix Rails&#39;s warning messages with Ruby 2.7.0", "body": "<p>Did anyone resolve this issue with <code>Ruby 2.7.0</code>?</p>\n\n<p>I used <code>rbenv</code> and installed Ruby v2.7.0 and then created a Rails project using <code>Rails v6.0.2.1</code>. </p>\n\n<p>Currently, by running one of</p>\n\n<pre><code>rails s\nrails s -u puma\nrails s -u webrick\n</code></pre>\n\n<p>the server is up and the site is served but in the <code>Console</code> log I see two warning messages:</p>\n\n<pre><code>local:~/rcode/rb27$ rails s\n=&gt; Booting Puma\n=&gt; Rails 6.0.2.1 application starting in development \n=&gt; Run `rails server --help` for more startup options\n.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/actionpack-6.0.2.1/lib/action_dispatch/middleware/stack.rb:37: warning: Using the last argument as keyword parameters is deprecated; maybe ** should be added to the call\n.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/actionpack-6.0.2.1/lib/action_dispatch/middleware/static.rb:110: warning: The called method `initialize' is defined here\nPuma starting in single mode...\n* Version 4.3.1 (ruby 2.7.0-p0), codename: Mysterious Traveller\n* Min threads: 5, max threads: 5\n* Environment: development\n* Listening on tcp://127.0.0.1:3000\n* Listening on tcp://[::1]:3000 \n</code></pre>\n\n<p>So, the warning messages are:</p>\n\n<pre><code>**.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/actionpack-6.0.2.1/lib/action_dispatch/middleware/stack.rb:37: warning: Using the last argument as keyword parameters is deprecated; maybe ** should be added to the call**\n\n**.rbenv/versions/2.7.0/lib/ruby/gems/2.7.0/gems/actionpack-6.0.2.1/lib/action_dispatch/middleware/static.rb:110: warning: The called method `initialize' is defined here**\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "partial"], "answers": [{"comments": [{"owner": {"reputation": 114, "user_id": 9767765, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LtuNMLqTgGo/AAAAAAAAAAI/AAAAAAAABPk/F9-cbRBETUE/photo.jpg?sz=128", "display_name": "dnymxm", "link": "https://stackoverflow.com/users/9767765/dnymxm"}, "edited": false, "score": 0, "creation_date": 1577380541, "post_id": 59491386, "comment_id": 105157130, "body": "My bad. Needed fresh eyes to see it ! Thank you"}], "tags": [], "owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "is_accepted": true, "score": 1, "last_activity_date": 1577380270, "creation_date": 1577380270, "answer_id": 59491386, "question_id": 59491190, "link": "https://stackoverflow.com/questions/59491190/how-display-my-view-with-partials-in-rails/59491386#59491386", "title": "How display my view with partials in Rails?", "body": "<p>you missing equal sign (=) from first line, it should be like this below</p>\n\n<pre><code>&lt;%= form_with model: @post do |f| %&gt;\n</code></pre>\n"}], "owner": {"reputation": 114, "user_id": 9767765, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LtuNMLqTgGo/AAAAAAAAAAI/AAAAAAAABPk/F9-cbRBETUE/photo.jpg?sz=128", "display_name": "dnymxm", "link": "https://stackoverflow.com/users/9767765/dnymxm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 59491386, "answer_count": 1, "score": 0, "last_activity_date": 1577380270, "creation_date": 1577379013, "question_id": 59491190, "link": "https://stackoverflow.com/questions/59491190/how-display-my-view-with-partials-in-rails", "title": "How display my view with partials in Rails?", "body": "<p>I'm learning Rails and I'm trying to use partials to clear my code.</p>\n\n<p>When I refresh the post/new page, the only thing I have is the \"Cr\u00e9er un article\".\nNothing in my partial _form appears..</p>\n\n<p>I don't understand my mistake, did I miss something?</p>\n\n<p>Here is my view:</p>\n\n<pre><code>&lt;h1&gt;Cr\u00e9er un article&lt;/h1&gt;\n\n&lt;%= render 'form' %&gt;\n</code></pre>\n\n<p>Here is the  partial:</p>\n\n<pre><code>&lt;% form_with model: @post do |f| %&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;label&gt;Titre&lt;/label&gt;\n    &lt;%= f.text_field :title, class:'form-control' %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;label&gt;Slug&lt;/label&gt;\n    &lt;%= f.text_field :slug, class:'form-control' %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;label&gt;Contenu&lt;/label&gt;\n    &lt;%= f.text_area :content, class:'form-control'%&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.submit \"Valider\", class: \"btn btn-primary\" %&gt;\n    &lt;a href=\"&lt;%= posts_path %&gt;\" class=\"btn btn-secondary\"&gt;Retour&lt;/a&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Log from rails local server:</p>\n\n<pre><code>Started GET \"/posts/new\" for ::1 at 2019-12-26 17:38:03 +0100\nProcessing by PostsController#new as HTML\n  Rendering posts/new.html.erb within layouts/application\n  Rendered posts/_form.html.erb (Duration: 20.7ms | Allocations: 2408)\n  Rendered posts/new.html.erb within layouts/application (Duration: 22.8ms | Allocations: 2711)\n[Webpacker] Everything's up-to-date. Nothing to do\nCompleted 200 OK in 40ms (Views: 34.5ms | ActiveRecord: 0.0ms | Allocations: 7669)\n</code></pre>\n"}, {"tags": ["json", "ruby", "key-value"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1577388491, "post_id": 59490529, "comment_id": 105159509, "body": "Welcome to SO! Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. See: &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">How to create a Minimal, Reproducible Example</a>&quot;. When you fail to reduce the code or data to the minimum necessary you waste your own time, and ours, because you make it harder for us to help you by throwing unnecessary information at us. It&#39;s your job to minimize the noise so we can help you more efficiently."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577388580, "post_id": 59490529, "comment_id": 105159528, "body": "Edit the question, reduce the code and data and explain what &quot;it&#39;s not working&quot; means: Do you get an error, do you get nothing, do you get the wrong result? Help us help you."}], "answers": [{"comments": [{"owner": {"reputation": 26, "user_id": 8139247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba5b5c6dc5be5673669d40b97ec11254?s=128&d=identicon&r=PG&f=1", "display_name": "Bhanu Pratap Singh", "link": "https://stackoverflow.com/users/8139247/bhanu-pratap-singh"}, "edited": false, "score": 0, "creation_date": 1577389188, "post_id": 59492724, "comment_id": 105159685, "body": "If params is JSON then add params.to_json in above code snippet. <code>JSON.parse(params.to_json)[&quot;invoice&quot;][&quot;connection&quot;][&quot;subscri&zwnj;&#8203;ptions&quot;].map{|subscr&zwnj;&#8203;iption| subscription[&quot;documents&quot;].map{|document| document[&quot;url&quot;]}}</code>"}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1577389352, "post_id": 59492724, "comment_id": 105159718, "body": "Edit your question instead of adding additional info in the comment section"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577389879, "post_id": 59492724, "comment_id": 105159856, "body": "Please read &quot;<a href=\"https://stackoverflow.com/help/formatting\">How do I format my posts...</a>&quot; and &quot;<a href=\"https://meta.stackexchange.com/questions/22186/how-do-i-format-my-code-blocks\">How do I format my code blocks?</a>&quot;, then edit your answer and correct the formatting. SO is like a reference book where formatting is important to help others understand what you&#39;re trying to pass on."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1577390073, "post_id": 59492724, "comment_id": 105159909, "body": "@Viktor, please don&#39;t edit people&#39;s code in questions or answers. Formatting and correcting indent are acceptable but the content of the code is for the person posting to fix. It&#39;s OK to suggest changes in a comment but it&#39;s up to them to correct or implement the changes."}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577391681, "post_id": 59492724, "comment_id": 105160346, "body": "@theTinMan Okay"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1577391694, "post_id": 59492724, "comment_id": 105160348, "body": "Do not replace <code>{</code> or <code>}</code> with <code>do</code> and <code>end</code>. We do not correct people&#39;s code in their posting. By changing it you change their intent. See <a href=\"https://meta.stackoverflow.com/q/266467/128421\">meta.stackoverflow.com/q/266467/128421</a>."}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1577392054, "post_id": 59492724, "comment_id": 105160433, "body": "@theTinMan I read the rules after asking, sorry about the confusion. I hope adding newlines is ok to make it more readable ?"}], "tags": [], "owner": {"reputation": 26, "user_id": 8139247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba5b5c6dc5be5673669d40b97ec11254?s=128&d=identicon&r=PG&f=1", "display_name": "Bhanu Pratap Singh", "link": "https://stackoverflow.com/users/8139247/bhanu-pratap-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1577397452, "last_edit_date": 1577397452, "creation_date": 1577389114, "answer_id": 59492724, "question_id": 59490529, "link": "https://stackoverflow.com/questions/59490529/how-to-get-each-value-from-specific-key-from-a-json-in-ruby/59492724#59492724", "title": "How to get each value from specific key from a JSON in Ruby", "body": "<p>Here is the simple as simple solution that is easy to understand.\nYou can try this:</p>\n\n<pre><code>JSON.parse(params)[\"invoice\"][\"connection\"][\"subscriptions\"].map { |subscription|\n  subscription[\"documents\"].map{ |document| document[\"url\"] }\n}\n</code></pre>\n\n<pre><code>[[\n \"https://mooncard23-sandbox.biapi.pro/2.0/users/me/documents/1244/file/test%40hotmail.fr_305146953.pdf\",\n \"https://mooncard23-sandbox.biapi.pro/2.0/users/me/documents/1245/file/test%40hotmail.fr_290804394.pdf\",\n \"https://mooncard23-sandbox.biapi.pro/2.0/users/me/documents/1246/file/test%40hotmail.fr_274475652.pdf\"\n]]\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 12600003, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAcDDhCPuhb9osLQKJ71laKf-yDpCk-VU_iyg6x=k-s128", "display_name": "Dam76", "link": "https://stackoverflow.com/users/12600003/dam76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577437851, "creation_date": 1577374944, "last_edit_date": 1577437851, "question_id": 59490529, "link": "https://stackoverflow.com/questions/59490529/how-to-get-each-value-from-specific-key-from-a-json-in-ruby", "title": "How to get each value from specific key from a JSON in Ruby", "body": "<p>I have the following JSON: </p>\n\n<pre><code>{\"connection\": {\n\"informations\": {},\n\"id_user\": 6909,\n\"subscriptions\": [\n    {\n        \"id_source\": 69825,\n        \"documents\": [\n            {\n                \"id_subscription\": 5265,\n                \"thumb_url\": \"https://test-sandbox.biapi.pro/2.0/users/me/documents/1244/thumbnail/test%40hotmail.fr_305146953_thumbnail.png\",\n                \"name\": \"Facture de 44.96\u20ac du 2019-11-18\",\n                \"id_thumbnail\": 40343,\n                \"url\": \"https://test-sandbox.biapi.pro/2.0/users/me/documents/1244/file/test%40hotmail.fr_305146953.pdf\",\n                \"untaxed_amount\": null\n            },\n            {\n                \"id_subscription\": 5265,\n                \"thumb_url\": \"https://mooncard23-sandbox.biapi.pro/2.0/users/me/documents/1245/thumbnail/test%40hotmail.fr_290804394_thumbnail.png\",\n                \"name\": \"Facture de 13.98\u20ac du 2019-05-29\",\n                \"url\": \"https://mooncard23-sandbox.biapi.pro/2.0/users/me/documents/1245/file/test%40hotmail.fr_290804394.pdf\",\n                \"untaxed_amount\": null\n            }\n        ]\n    }\n]\n}\n}\n</code></pre>\n\n<p>I try to get all the values like \"<code>https://test-sandbox.biapi.pro/2.0/users/me/documents/1246/file/test%40hotmail.fr_274475652.pdf</code>\"</p>\n\n<p>My JSON is rendered like this in my controller:  </p>\n\n<pre><code>render json: params.to_json\n</code></pre>\n\n<p>When I try to get all the values URL in this way:</p>\n\n<pre><code>params.dig('connection','subscriptions').each_with_object([]) { |x, arr| x['documents'].each { |d| arr &lt;&lt; d['url'] } } \n</code></pre>\n\n<p>I have the error <code>undefined method each_with_object for nil:NilClass</code>. </p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "ruby-on-rails-4", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1577374097, "post_id": 59490221, "comment_id": 105155005, "body": "What is being printed?"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1577403235, "post_id": 59490221, "comment_id": 105162927, "body": "What is being printed?"}, {"owner": {"reputation": 3, "user_id": 12556644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72c533416489bc346a6385ed0a6cbf8?s=128&d=identicon&r=PG&f=1", "display_name": "rat007", "link": "https://stackoverflow.com/users/12556644/rat007"}, "edited": false, "score": 0, "creation_date": 1577422783, "post_id": 59490221, "comment_id": 105165900, "body": "hi it&#39;s resolve by dropping all table and migrating again"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12556644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72c533416489bc346a6385ed0a6cbf8?s=128&d=identicon&r=PG&f=1", "display_name": "rat007", "link": "https://stackoverflow.com/users/12556644/rat007"}, "edited": false, "score": 0, "creation_date": 1577375551, "post_id": 59490566, "comment_id": 105155539, "body": "still getting error- undefined method `strftime&#39; for nil:NilClass"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 3, "user_id": 12556644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72c533416489bc346a6385ed0a6cbf8?s=128&d=identicon&r=PG&f=1", "display_name": "rat007", "link": "https://stackoverflow.com/users/12556644/rat007"}, "edited": false, "score": 0, "creation_date": 1577380858, "post_id": 59490566, "comment_id": 105157262, "body": "Sigh... I refer you to the other commentor."}, {"owner": {"reputation": 3, "user_id": 12556644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72c533416489bc346a6385ed0a6cbf8?s=128&d=identicon&r=PG&f=1", "display_name": "rat007", "link": "https://stackoverflow.com/users/12556644/rat007"}, "edited": false, "score": 0, "creation_date": 1577422504, "post_id": 59490566, "comment_id": 105165840, "body": "HI i was getting error on production it&#39;s fixed now i just dropped all tables from database and migrated again. problem resolved. Thanks!!"}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": true, "score": 0, "last_activity_date": 1577375181, "creation_date": 1577375181, "answer_id": 59490566, "question_id": 59490221, "link": "https://stackoverflow.com/questions/59490221/not-able-to-print-date-in-month-name-yyyy-format-in-rails/59490566#59490566", "title": "not able to print date in Month_name-yyyy format in rails", "body": "<p><a href=\"https://www.foragoodstrftime.com/\" rel=\"nofollow noreferrer\">https://www.foragoodstrftime.com/</a> should help you out</p>\n\n<p>Try:</p>\n\n<pre><code>&lt;td&gt;&lt;%= project_site.attendance_month.strftime('%B %Y') %&gt;&lt;/td&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 8139247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba5b5c6dc5be5673669d40b97ec11254?s=128&d=identicon&r=PG&f=1", "display_name": "Bhanu Pratap Singh", "link": "https://stackoverflow.com/users/8139247/bhanu-pratap-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1577389604, "creation_date": 1577389604, "answer_id": 59492805, "question_id": 59490221, "link": "https://stackoverflow.com/questions/59490221/not-able-to-print-date-in-month-name-yyyy-format-in-rails/59492805#59492805", "title": "not able to print date in Month_name-yyyy format in rails", "body": "<p>%B denotes to full name of month in strftime.</p>\n\n<p>Try this code snippet.</p>\n\n<p><code>&lt;td&gt;&lt;%= project_site.created_at.strftime('%B-%Y') %&gt;&lt;/td&gt;</code></p>\n"}], "owner": {"reputation": 3, "user_id": 12556644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72c533416489bc346a6385ed0a6cbf8?s=128&d=identicon&r=PG&f=1", "display_name": "rat007", "link": "https://stackoverflow.com/users/12556644/rat007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 59490566, "answer_count": 2, "score": -2, "last_activity_date": 1577396777, "creation_date": 1577373214, "last_edit_date": 1577396777, "question_id": 59490221, "link": "https://stackoverflow.com/questions/59490221/not-able-to-print-date-in-month-name-yyyy-format-in-rails", "title": "not able to print date in Month_name-yyyy format in rails", "body": "<p>hi I am taking date input in mm-yyyy format I want to print date in format of month_name-yyyy format. i have used strftime but i am not to able print the date as my required format. </p>\n\n<p><strong>index.html.erb code</strong></p>\n\n<pre><code>          &lt;td&gt;&lt;%= project_site.name.titleize %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= project_site.created_at.strftime('%b-%Y') %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= link_to ' View attendance', project_site.file, :class =&gt; \"fi-page-export-csv\" %&gt;&lt;/td&gt;\n          &lt;% project_site.manager_remarks.each do |manager_remark| %&gt;\n            &lt;% if manager_remark.decision == false %&gt;\n              &lt;td&gt;&lt;%= 'Rejected' %&gt;&lt;/td&gt;\n            &lt;% elsif manager_remark.decision == true %&gt;\n              &lt;td&gt;&lt;%= \"Approved\" %&gt;&lt;/td&gt;\n            &lt;% else %&gt;\n              &lt;td&gt;&lt;%= \"Pending\" %&gt;\n            &lt;% end %&gt;\n         &lt;% end %&gt;\n         &lt;td&gt;&lt;%= project_site.attendance_month.strftime('%b %Y') %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= link_to 'Remark ', project_site %&gt;&lt;span&gt;(&lt;%= project_site.manager_remarks.size %&gt;)&lt;/span&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= link_to 'Edit', edit_project_site_path(project_site) %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= link_to 'Delete', project_site, method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n</code></pre>\n\n<p><strong>form.html.erb code</strong></p>\n\n<pre><code>        &lt;%= form.label :name %&gt;\n        &lt;%= form.text_field :name %&gt;\n      &lt;/div&gt;\n  &lt;!--\n      &lt;div class=\"field medium-3 columns\"&gt;\n        &lt;%= form.label :date %&gt;\n        &lt;%= form.text_field :date, class: 'datepicker' %&gt;\n      &lt;/div&gt;\n  --&gt;\n        &lt;div class=\"field medium-3 columns\"&gt;\n          &lt;%= form.label :upload_attendance %&gt;\n          &lt;%= form.file_field :file, :class=&gt; 'attendance-file' %&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"field medium-6 columns\"&gt;\n          &lt;%= form.label :attendance_month %&gt;\n          &lt;%= form.date_select :attendance_month, { :discard_day =&gt; true, :discard_month =&gt; false, :discard_year =&gt; false },:class =&gt; 'datetime' %&gt;\n        &lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1038, "user_id": 708964, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/gIRPQ.png?s=128&g=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/708964/carl"}, "edited": false, "score": 2, "creation_date": 1578768037, "post_id": 59490108, "comment_id": 105549568, "body": "Anyone know how to suppress these warnings? I have deprecations warnings writing to the log file, but it doesn&#39;t affect these ones. Running specs is a nightmare in ruby 2.7.0"}], "answers": [{"comments": [{"owner": {"reputation": 489, "user_id": 2137007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TIiXl.png?s=128&g=1", "display_name": "lxxxvi", "link": "https://stackoverflow.com/users/2137007/lxxxvi"}, "edited": false, "score": 7, "creation_date": 1577432701, "post_id": 59490215, "comment_id": 105168305, "body": "Nice, thank you! May be it&#39;s just me, but this is quite confusing..."}, {"owner": {"reputation": 552, "user_id": 1941519, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5c056e7677c157248af7f91a2c118a7d?s=128&d=identicon&r=PG", "display_name": "Jacob", "link": "https://stackoverflow.com/users/1941519/jacob"}, "reply_to_user": {"reputation": 489, "user_id": 2137007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TIiXl.png?s=128&g=1", "display_name": "lxxxvi", "link": "https://stackoverflow.com/users/2137007/lxxxvi"}, "edited": false, "score": 6, "creation_date": 1582716546, "post_id": 59490215, "comment_id": 106871186, "body": "@lxxxvi It&#39;s not just you. I&#39;ve come here for exactly the same thing - if it&#39;s one error message, I feel like it should be one error message."}, {"owner": {"reputation": 502, "user_id": 341458, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/OwKP4.jpg?s=128&g=1", "display_name": "Hackeron", "link": "https://stackoverflow.com/users/341458/hackeron"}, "edited": false, "score": 0, "creation_date": 1588102968, "post_id": 59490215, "comment_id": 108770801, "body": "I&#39;m really confused, I&#39;m seeing this warning and there is nothing above it for i18n.rb, this is a single line warning, the line above relates to active support. What am I supposed to do about this warning? &lt; /usr/local/lib/ruby/gems/2.7.0/gems/i18n-1.8.2/lib/i18n.rb:1&zwnj;&#8203;95: warning: The called method `t&#39; is defined here"}, {"owner": {"reputation": 489, "user_id": 2137007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TIiXl.png?s=128&g=1", "display_name": "lxxxvi", "link": "https://stackoverflow.com/users/2137007/lxxxvi"}, "reply_to_user": {"reputation": 502, "user_id": 341458, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/OwKP4.jpg?s=128&g=1", "display_name": "Hackeron", "link": "https://stackoverflow.com/users/341458/hackeron"}, "edited": false, "score": 1, "creation_date": 1589287754, "post_id": 59490215, "comment_id": 109228106, "body": "@Hackeron I just had a similar/same problem. The warning said, that the method is defined in i18n gem. However, the line just above that one is the location that caused the warning, and it does not have to be from same gem! In my case it was a <code>I18n.t</code>-call in the devise gem (<code>devise-4.7.1&#47;lib&#47;devise&#47;failure_app.rb:110</code>). I also found that the &quot;misunderstood&quot; warning is described in i18n&#39;s file <a href=\"https://github.com/ruby-i18n/i18n/blob/438690d090180da1b606bf17662af35f20b054a1/lib/i18n.rb#L195\" rel=\"nofollow noreferrer\">lib/i18n.rb:195</a> just above line 195."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 29, "last_activity_date": 1577373199, "creation_date": 1577373199, "answer_id": 59490215, "question_id": 59490108, "link": "https://stackoverflow.com/questions/59490108/the-called-method-is-defined-here/59490215#59490215", "title": "The called method `...&#39; is defined here", "body": "<blockquote>\n  <p>What does the second warning mean? Is it related to the first warning?</p>\n</blockquote>\n\n<p>There is a single warning with a text split into two lines. It literally says: <em><code>args</code> should be converted to <code>**args</code>, here is the call that produced this warning, here is its definition for your convenience</em>.</p>\n"}], "owner": {"reputation": 489, "user_id": 2137007, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TIiXl.png?s=128&g=1", "display_name": "lxxxvi", "link": "https://stackoverflow.com/users/2137007/lxxxvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4649, "favorite_count": 2, "accepted_answer_id": 59490215, "answer_count": 1, "score": 27, "last_activity_date": 1577373199, "creation_date": 1577372592, "question_id": 59490108, "link": "https://stackoverflow.com/questions/59490108/the-called-method-is-defined-here", "title": "The called method `...&#39; is defined here", "body": "<p>Ruby 2.7 was just released and it comes with these new warnings for <em>\"Separation of positional and keyword arguments\"</em> (see their <a href=\"https://www.ruby-lang.org/en/news/2019/12/25/ruby-2-7-0-released/\" rel=\"noreferrer\">Release Post</a>).\nI was playing around with it and discovered that there's another warning, which I don't understand.</p>\n\n<p>Example:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def multiply(x:, y:)\n  x * y\nend\n\nargs = { x: 2, y: 3 }\n\nmultiply(args)\n\n# ./warning.rb:7: warning: Using the last argument as keyword parameters is deprecated; maybe ** should be added to the call\n# ./warning.rb:1: warning: The called method `multiply' is defined here\n</code></pre>\n\n<p>I think the first warning about the deprecation is clear, but the second warning <code>The called method `multiply' is defined here</code> is confusing to me.</p>\n\n<p>What does the second warning mean? Is it related to the first warning?</p>\n\n<p>Both warnings disappear when adding <code>**</code> to the call (<code>multiply(**args)</code>).</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "fluentd"], "answers": [{"tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": false, "score": 0, "last_activity_date": 1577375715, "creation_date": 1577375715, "answer_id": 59490649, "question_id": 59489982, "link": "https://stackoverflow.com/questions/59489982/install-ruby-gem-dependencies-on-specific-folder-and-run-that-installation/59490649#59490649", "title": "Install Ruby Gem + dependencies on specific folder and run that installation", "body": "<p>When you require a gem, Rubygems searchs for it inside the default gems folder. You can prevent Rubygems to do that by adding the paths of your gems to the $LOAD_PATH variable.</p>\n\n<p>For example, if you have one gem at /home/user/custom_dir/my_gem, you can do something like this before requiring the gem:</p>\n\n<pre><code>$LOAD_PATH &lt;&lt; \"/home/user/custom_dir/my_gem/lib\"\n</code></pre>\n\n<p>Another option is to use <code>require_relative</code> instead of <code>require</code>. If you app root is /home/user/my_app and inside that dir you have the gems like /home/user/my_app/gems, you can do somthing like:</p>\n\n<pre><code>require_relative 'gems/my_gem'\n</code></pre>\n\n<p>Check this talk <a href=\"https://www.youtube.com/watch?v=I0a5zv7uBHw\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=I0a5zv7uBHw</a> it's really enlightening on how to require things.</p>\n"}, {"tags": [], "owner": {"reputation": 320, "user_id": 4475625, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-2hVQZZczQRY/AAAAAAAAAAI/AAAAAAAAACc/E3TvzoBhq4A/photo.jpg?sz=128", "display_name": "Santiago Esquivel", "link": "https://stackoverflow.com/users/4475625/santiago-esquivel"}, "is_accepted": false, "score": 0, "last_activity_date": 1578340674, "creation_date": 1578340674, "answer_id": 59618196, "question_id": 59489982, "link": "https://stackoverflow.com/questions/59489982/install-ruby-gem-dependencies-on-specific-folder-and-run-that-installation/59618196#59618196", "title": "Install Ruby Gem + dependencies on specific folder and run that installation", "body": "<p>Providing answer to those that might need it:</p>\n\n<p>In order to correctly automate the installation of a specific gem + their dependencies:</p>\n\n<pre><code>bundle install\nbundle package --all-platforms --all\n</code></pre>\n\n<p>This will fetch all dependent gems and place them on vendor/cache</p>\n\n<p>If you install your gem + dependencies with the following command:</p>\n\n<pre><code>gem install --no-user-install --install-dir Install_Location --conservative --bindir Install_Location\\bin --no-document --local YOUR_GEM_TO_INSTALL\n</code></pre>\n\n<p>You can then run your gem commands by setting the following:</p>\n\n<ol>\n<li>Add Install_Location/bin to PATH</li>\n<li>Append Install_Location to GEM_HOME</li>\n<li>Append Install_Location to GEM_PATH</li>\n<li>run the gem commands needed</li>\n</ol>\n\n<p>This allowed me to have run gem commands without these appearing/affecting gems available in gem list.</p>\n"}], "owner": {"reputation": 320, "user_id": 4475625, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-2hVQZZczQRY/AAAAAAAAAAI/AAAAAAAAACc/E3TvzoBhq4A/photo.jpg?sz=128", "display_name": "Santiago Esquivel", "link": "https://stackoverflow.com/users/4475625/santiago-esquivel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 427, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1578340674, "creation_date": 1577371762, "last_edit_date": 1577372549, "question_id": 59489982, "link": "https://stackoverflow.com/questions/59489982/install-ruby-gem-dependencies-on-specific-folder-and-run-that-installation", "title": "Install Ruby Gem + dependencies on specific folder and run that installation", "body": "<p>I am currently attempting to install on a specific directory a set of gem files and run that installation (trying to avoid installing to default Ruby locations).</p>\n\n<p>e.g. I have a folder with gems I plan to install locally, thus I run the following command:</p>\n\n<p><code>gem install --force --install-dir .\\install_3 --conservative --bindir .\\install_3\\bin --no-document --local *.gem</code></p>\n\n<p>This then installs all gems available in that folder in my install_3 directory.\nHowever, I am having trouble running the gems I installed in that directory.</p>\n\n<p>My question is, how can I install Ruby gems in a specific folder and make sure I run the gem and its dependencies from my specified folder in --install-dir option?</p>\n\n<p>When I try to run with the following script:</p>\n\n<pre><code>@setlocal\n@set DIRNAME=%~dp0\ncd %DIRNAME%\n\n@set PATH=%PATH%;%DIRNAME%install_3\\bin\n@set TEMP=C:\\TEMP\n\nfluentd -c fluentd.conf\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n        2: from C:/Users/yytcadm/Desktop/fluentd_1.8.0_gems/install_3/bin/fluentd:23:in `&lt;main&gt;'\n        1: from C:/Ruby25-x64/lib/ruby/2.5.0/rubygems.rb:303:in `activate_bin_path'\nC:/Ruby25-x64/lib/ruby/2.5.0/rubygems.rb:284:in `find_spec_for_exe': can't find gem fluentd (&gt;= 0.a) with executable fluentd (Gem::GemNotFoundException)\n</code></pre>\n\n<p>Instead of fetching gems from my specified installation folder, it attempts to search for them in the default ruby gem folder.</p>\n\n<p>Edit: It seems to throw an error on this line from my fluentd file:</p>\n\n<p><code>load Gem.activate_bin_path('fluentd', 'fluentd', version)</code></p>\n\n<p>I'm guessing I need to modify this to the custom path decided on my --install-dir option but my attempts have not been fruitful so far.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 239, "user_id": 4821424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edc8186d6f94ce1d06a3fb0f0aff90fc?s=128&d=identicon&r=PG", "display_name": "chanko", "link": "https://stackoverflow.com/users/4821424/chanko"}, "edited": false, "score": 2, "creation_date": 1577396111, "post_id": 59489532, "comment_id": 105161378, "body": "Just going to add that you were close in your attempt  <code>Opportunity.joins(account: :user).where(users: {user_type: &quot;Driver&quot;}).where(type: &quot;New&quot;)</code>  When writing the where on an association you have to specify the name of the table, which in most cases is (should be) the plural form."}], "tags": [], "owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "is_accepted": true, "score": 1, "last_activity_date": 1577369118, "creation_date": 1577369118, "answer_id": 59489532, "question_id": 59489484, "link": "https://stackoverflow.com/questions/59489484/rails-nested-joins-condition/59489532#59489532", "title": "Rails Nested Joins Condition", "body": "<p>you can do it with one where as follow</p>\n\n<pre><code>Opportunity.joins(account: :user).where('opportunities.type = ? AND users.type = ?','New','Driver')\n</code></pre>\n"}], "owner": {"reputation": 40, "user_id": 1872376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/871b5ed7559752a8d7bbbccfdf8ce9bb?s=128&d=identicon&r=PG", "display_name": "Zain Awais", "link": "https://stackoverflow.com/users/1872376/zain-awais"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 59489532, "answer_count": 1, "score": 0, "last_activity_date": 1577369118, "creation_date": 1577368780, "question_id": 59489484, "link": "https://stackoverflow.com/questions/59489484/rails-nested-joins-condition", "title": "Rails Nested Joins Condition", "body": "<p>Sorry I am bad with Joins. </p>\n\n<p>Here is the scenario</p>\n\n<p>I have three models User, Account, Opportunity</p>\n\n<p>Here is how they are associated </p>\n\n<p>User has one account and account has one opportunity</p>\n\n<p>For Example:\nI need to find Opportunities with type \"New\" and have the user of type \"Driver\"</p>\n\n<p><code>Opportunity.joins(account: :user).where(account: {user: {user_type: \"Driver\"}}).where(type: \"New\")</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "vcr"], "answers": [{"tags": [], "owner": {"reputation": 1306, "user_id": 8008340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15JhO.jpg?s=128&g=1", "display_name": "Konstantin Strukov", "link": "https://stackoverflow.com/users/8008340/konstantin-strukov"}, "is_accepted": false, "score": 0, "last_activity_date": 1577369177, "creation_date": 1577369177, "answer_id": 59489542, "question_id": 59489307, "link": "https://stackoverflow.com/questions/59489307/create-http-fixtures-simulating-request-coming-from-outside/59489542#59489542", "title": "Create http fixtures simulating request coming from outside", "body": "<p>If you're talking about the proper testing of Alice in isolation (assuming Bob is working as expected) just create the fixtures for the desired Bob's payloads upfront and feed them to the appropriate Alice controllers' tests.</p>\n\n<p>If you are talking about the proper integration test you should <em>not</em> stub the requests at all - for the proper integration tests Alice and Bob must communicate as they do in the production environment. Some hybrid (kind of) solutions might exist as well - for example, fake Bob-like service with bare minimum (test only) functionality inside Alice (<a href=\"https://thoughtbot.com/blog/how-to-stub-external-services-in-tests#create-a-fake-hello-sinatra\" rel=\"nofollow noreferrer\">https://thoughtbot.com/blog/how-to-stub-external-services-in-tests#create-a-fake-hello-sinatra</a>)</p>\n"}], "owner": {"reputation": 75, "user_id": 7454169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/169b5398b00bf3654e632456fcc7514b?s=128&d=identicon&r=PG&f=1", "display_name": "Sacha", "link": "https://stackoverflow.com/users/7454169/sacha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577369177, "creation_date": 1577367638, "question_id": 59489307, "link": "https://stackoverflow.com/questions/59489307/create-http-fixtures-simulating-request-coming-from-outside", "title": "Create http fixtures simulating request coming from outside", "body": "<p>I have a rails app with some rspec feature tests. This app <strong>Alice</strong> works in tandem with another program <strong>Bob</strong></p>\n\n<p>When i want to use <strong>Bob</strong>, i create a json file in a specific url with instructions in my <strong>Alice</strong> app. <strong>Bob</strong> then fetches this json file with HTTP get, does its function and use HTTP post to give the results back to <strong>Alice</strong>.</p>\n\n<p>I want to use vcr to create http fixtures, how can i fake <strong>Bob's</strong> behavior in my tests ? </p>\n\n<ul>\n<li>HTTP get on the json url</li>\n<li>HTTP post with the results</li>\n</ul>\n\n<p>Is it possible to tell vcr to wait for http requests ?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 1076, "user_id": 5362761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVJG5.jpg?s=128&g=1", "display_name": "Anuj Khandelwal", "link": "https://stackoverflow.com/users/5362761/anuj-khandelwal"}, "edited": false, "score": 0, "creation_date": 1577368548, "post_id": 59489302, "comment_id": 105153198, "body": "Could you please add the definition of your <code>search</code> scope to the question??"}, {"owner": {"reputation": 71, "user_id": 10949610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1d982aec95597146d6b75148e090cdd?s=128&d=identicon&r=PG", "display_name": "user2369480", "link": "https://stackoverflow.com/users/10949610/user2369480"}, "reply_to_user": {"reputation": 1076, "user_id": 5362761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mVJG5.jpg?s=128&g=1", "display_name": "Anuj Khandelwal", "link": "https://stackoverflow.com/users/5362761/anuj-khandelwal"}, "edited": false, "score": 0, "creation_date": 1577369936, "post_id": 59489302, "comment_id": 105153599, "body": "yep. added :) @AnujKhandelwal"}, {"owner": {"reputation": 1306, "user_id": 8008340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/15JhO.jpg?s=128&g=1", "display_name": "Konstantin Strukov", "link": "https://stackoverflow.com/users/8008340/konstantin-strukov"}, "edited": false, "score": 0, "creation_date": 1577371243, "post_id": 59489302, "comment_id": 105154035, "body": "For some reasons &quot;month_payments&quot; is aliased in the outer <code>inner join</code> clause but not in the outer <code>where</code> clause. I&#39;m not sure where this alias comes from, but taking it into account you could try smth. like the following <code>Client.joins(:month_payments).where(&quot;month_payments_clients.&zwnj;&#8203;date = ?&quot;,  &quot;2019-12-02&quot;).search(&quot;Sara Connor&quot;)</code> as a workaround"}], "owner": {"reputation": 71, "user_id": 10949610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1d982aec95597146d6b75148e090cdd?s=128&d=identicon&r=PG", "display_name": "user2369480", "link": "https://stackoverflow.com/users/10949610/user2369480"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577369923, "creation_date": 1577367621, "last_edit_date": 1577369923, "question_id": 59489302, "link": "https://stackoverflow.com/questions/59489302/pg-search-pgundefinedtable-error-invalid-reference-to-from-clause-entry-for", "title": "Pg_search (PG::UndefinedTable: ERROR: invalid reference to FROM-clause entry for table &quot;month_payments&quot;", "body": "<p>Works pretty much good: </p>\n\n<blockquote>\n  <p>Client.joins(:month_payments).where(month_payments: {date: \"2019-12-02\"}) </p>\n</blockquote>\n\n<p>or</p>\n\n<blockquote>\n  <p>Client.joins(:month_payments).search(\"Sara\")</p>\n</blockquote>\n\n<p><strong>Why pg_search doesn't work If I try:</strong> </p>\n\n<blockquote>\n  <p>Client.joins(:month_payments).where(month_payments: {date: \"2019-12-02\"}).search(\"Sara Connor\")</p>\n</blockquote>\n\n<h1>Terminal log:</h1>\n\n<pre><code>Client Load (2.4ms)  SELECT  \"clients\".* FROM \"clients\" INNER JOIN \"month_payments\" \"month_payments_clients\" ON \"month_payments_clients\".\"client_id\" = \"clients\".\"id\" INNER JOIN (SELECT \"clients\".\"id\" AS pg_search_id, (ts_rank((to_tsvector('simple', coalesce(\"clients\".\"name\"::text, '')) || to_tsvector('simple', coalesce(\"clients\".\"phone_number\"::text, '')) || to_tsvector('simple', coalesce(pg_search_e49121e1954ad241e59d46.pg_search_b96d7c675f96dc5e635104::text, '')) || to_tsvector('simple', coalesce(pg_search_859b556cd4a924628ee183.pg_search_12c411d94675b7f72bc460::text, '')) || to_tsvector('simple', coalesce(pg_search_859b556cd4a924628ee183.pg_search_db73ee63dc62e95d223184::text, '')) || to_tsvector('simple', coalesce(pg_search_859b556cd4a924628ee183.pg_search_a449af3665b9d7d8aaec7d::text, '')) || to_tsvector('simple', coalesce(pg_search_859b556cd4a924628ee183.pg_search_a712b883f3cd839eb70c1e::text, ''))), (to_tsquery('simple', ''' ' || 'Sara' || ' ''' || ':*') || to_tsquery('simple', ''' ' || 'Connor' || ' ''' || ':*')), 0)) AS rank FROM \"clients\" LEFT OUTER JOIN (SELECT \"clients\".\"id\" AS id, string_agg(\"month_payments\".\"payment_note\"::text, ' ') AS pg_search_b96d7c675f96dc5e635104 FROM \"clients\" INNER JOIN \"month_payments\" ON \"month_payments\".\"client_id\" = \"clients\".\"id\" GROUP BY \"clients\".\"id\") pg_search_e49121e1954ad241e59d46 ON pg_search_e49121e1954ad241e59d46.id = \"clients\".\"id\" LEFT OUTER JOIN (SELECT \"clients\".\"id\" AS id, string_agg(\"addresses\".\"address_1\"::text, ' ') AS pg_search_12c411d94675b7f72bc460, string_agg(\"addresses\".\"town\"::text, ' ') AS pg_search_db73ee63dc62e95d223184, string_agg(\"addresses\".\"state\"::text, ' ') AS pg_search_a449af3665b9d7d8aaec7d, string_agg(\"addresses\".\"zip_code\"::text, ' ') AS pg_search_a712b883f3cd839eb70c1e FROM \"clients\" INNER JOIN \"addresses\" ON \"addresses\".\"client_id\" = \"clients\".\"id\" GROUP BY \"clients\".\"id\") pg_search_859b556cd4a924628ee183 ON pg_search_859b556cd4a924628ee183.id = \"clients\".\"id\" WHERE ((to_tsvector('simple', coalesce(\"clients\".\"name\"::text, '')) || to_tsvector('simple', coalesce(\"clients\".\"phone_number\"::text, '')) || to_tsvector('simple', coalesce(pg_search_e49121e1954ad241e59d46.pg_search_b96d7c675f96dc5e635104::text, '')) || to_tsvector('simple', coalesce(pg_search_859b556cd4a924628ee183.pg_search_12c411d94675b7f72bc460::text, '')) || to_tsvector('simple', coalesce(pg_search_859b556cd4a924628ee183.pg_search_db73ee63dc62e95d223184::text, '')) || to_tsvector('simple', coalesce(pg_search_859b556cd4a924628ee183.pg_search_a449af3665b9d7d8aaec7d::text, '')) || to_tsvector('simple', coalesce(pg_search_859b556cd4a924628ee183.pg_search_a712b883f3cd839eb70c1e::text, ''))) @@ (to_tsquery('simple', ''' ' || 'Sara' || ' ''' || ':*') || to_tsquery('simple', ''' ' || 'Connor' || ' ''' || ':*')))) AS pg_search_8f4d9088121acfab37f4a5 ON \"clients\".\"id\" = pg_search_8f4d9088121acfab37f4a5.pg_search_id WHERE \"month_payments\".\"date\" = $1 ORDER BY pg_search_8f4d9088121acfab37f4a5.rank DESC, \"clients\".\"id\" ASC LIMIT $2  [[\"date\", \"2019-12-02\"], [\"LIMIT\", 11]]\nTraceback (most recent call last):\nActiveRecord::StatementInvalid (PG::UndefinedTable: ERROR:  invalid reference to FROM-clause entry for table \"month_payments\")\nLINE 1: ..._search_8f4d9088121acfab37f4a5.pg_search_id WHERE \"month_pay...\n                                                         ^\nHINT:  Perhaps you meant to reference the table alias \"month_payments_clients\".\n: SELECT  \"clients\".* FROM \"clients\" INNER JOIN \"month_payments\" \"month_payments_clients\" ON \"month_payments_clients\".\"client_id\" = \"clients\".\"id\" INNER JOIN (SELECT \"clients\".\"id\" AS pg_search_id, (ts_rank((to_tsvector('simple', coalesce(\"clients\".\"name\"::text, '')) || to_tsvector('simple', coalesce(\"clients\".\"phone_number\"::text, '')) || to_tsvector('simple', coalesce(pg_search_e49121e1954ad241e59d46.pg_search_b96d7c675f96dc5e635104::text, '')) || to_tsvector('simple', coalesce(pg_search_859b556cd4a924628ee183.pg_search_12c411d94675b7f72bc460::text, '')) || to_tsvector('simple', coalesce(pg_search_859b556cd4a924628ee183.pg_search_db73ee63dc62e95d223184::text, '')) || to_tsvector('simple', coalesce(pg_search_859b556cd4a924628ee183.pg_search_a449af3665b9d7d8aaec7d::text, '')) || to_tsvector('simple', coalesce(pg_search_859b556cd4a924628ee183.pg_search_a712b883f3cd839eb70c1e::text, ''))), (to_tsquery('simple', ''' ' || 'Sara' || ' ''' || ':*') || to_tsquery('simple', ''' ' || 'Connor' || ' ''' || ':*')), 0)) AS rank FROM \"clients\" LEFT OUTER JOIN (SELECT \"clients\".\"id\" AS id, string_agg(\"month_payments\".\"payment_note\"::text, ' ') AS pg_search_b96d7c675f96dc5e635104 FROM \"clients\" INNER JOIN \"month_payments\" ON \"month_payments\".\"client_id\" = \"clients\".\"id\" GROUP BY \"clients\".\"id\") pg_search_e49121e1954ad241e59d46 ON pg_search_e49121e1954ad241e59d46.id = \"clients\".\"id\" LEFT OUTER JOIN (SELECT \"clients\".\"id\" AS id, string_agg(\"addresses\".\"address_1\"::text, ' ') AS pg_search_12c411d94675b7f72bc460, string_agg(\"addresses\".\"town\"::text, ' ') AS pg_search_db73ee63dc62e95d223184, string_agg(\"addresses\".\"state\"::text, ' ') AS pg_search_a449af3665b9d7d8aaec7d, string_agg(\"addresses\".\"zip_code\"::text, ' ') AS pg_search_a712b883f3cd839eb70c1e FROM \"clients\" INNER JOIN \"addresses\" ON \"addresses\".\"client_id\" = \"clients\".\"id\" GROUP BY \"clients\".\"id\") pg_search_859b556cd4a924628ee183 ON pg_search_859b556cd4a924628ee183.id = \"clients\".\"id\" WHERE ((to_tsvector('simple', coalesce(\"clients\".\"name\"::text, '')) || to_tsvector('simple', coalesce(\"clients\".\"phone_number\"::text, '')) || to_tsvector('simple', coalesce(pg_search_e49121e1954ad241e59d46.pg_search_b96d7c675f96dc5e635104::text, '')) || to_tsvector('simple', coalesce(pg_search_859b556cd4a924628ee183.pg_search_12c411d94675b7f72bc460::text, '')) || to_tsvector('simple', coalesce(pg_search_859b556cd4a924628ee183.pg_search_db73ee63dc62e95d223184::text, '')) || to_tsvector('simple', coalesce(pg_search_859b556cd4a924628ee183.pg_search_a449af3665b9d7d8aaec7d::text, '')) || to_tsvector('simple', coalesce(pg_search_859b556cd4a924628ee183.pg_search_a712b883f3cd839eb70c1e::text, ''))) @@ (to_tsquery('simple', ''' ' || 'Sara' || ' ''' || ':*') || to_tsquery('simple', ''' ' || 'Connor' || ' ''' || ':*')))) AS pg_search_8f4d9088121acfab37f4a5 ON \"clients\".\"id\" = pg_search_8f4d9088121acfab37f4a5.pg_search_id WHERE \"month_payments\".\"date\" = $1 ORDER BY pg_search_8f4d9088121acfab37f4a5.rank DESC, \"clients\".\"id\" ASC LIMIT $2\n</code></pre>\n\n<h1>Client.rb</h1>\n\n<pre><code>has_many :month_payments, dependent: :destroy\n\npg_search_scope :search,\n                against: %i[name phone_number],\n                associated_against: {\n                  month_payments: [:payment_note],\n                  addresses: %i[address_1 town state zip_code]\n                },\n                using: { tsearch: { prefix: true, any_word: true } }\n</code></pre>\n\n<h1>Month_payment.rb</h1>\n\n<pre><code>belongs_to :client\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "oop", "inheritance"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1577366064, "post_id": 59488900, "comment_id": 105152331, "body": "Is your Rails app API only or both API and standard MVC ?"}, {"owner": {"reputation": 1185, "user_id": 1162817, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/90eUU.png?s=128&g=1", "display_name": "Artur Haddad", "link": "https://stackoverflow.com/users/1162817/artur-haddad"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1577366362, "post_id": 59488900, "comment_id": 105152432, "body": "@lacostenycoder API only"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1577367904, "post_id": 59488900, "comment_id": 105152962, "body": "Did you <a href=\"https://github.com/rails/rails/blob/b2eb1d1c55a59fee1e6c4cba7030d8ceb524267c/activesupport/lib/active_support/rescuable.rb#L51\" rel=\"nofollow noreferrer\">read the comments</a> preceding how <code>rescue_from</code> is defined?"}], "answers": [{"comments": [{"owner": {"reputation": 1185, "user_id": 1162817, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/90eUU.png?s=128&g=1", "display_name": "Artur Haddad", "link": "https://stackoverflow.com/users/1162817/artur-haddad"}, "edited": false, "score": 0, "creation_date": 1577367151, "post_id": 59489082, "comment_id": 105152693, "body": "I tried this before, but errors simply doesn&#39;t get rescued and are thrown as exceptions: &lt;ActiveRecord::RecordNotFound: Couldn&#39;t find User with &#39;id&#39;=12&gt;"}, {"owner": {"reputation": 1185, "user_id": 1162817, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/90eUU.png?s=128&g=1", "display_name": "Artur Haddad", "link": "https://stackoverflow.com/users/1162817/artur-haddad"}, "edited": false, "score": 0, "creation_date": 1577367292, "post_id": 59489082, "comment_id": 105152742, "body": "When I put the &quot;rescue_from...&quot; directly on ApplicationController class, without defining it inside a method, it works perfectly. But when I put it on a concern or inside a method it doesn&#39;t work anymore."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1577369156, "last_edit_date": 1577369156, "creation_date": 1577366411, "answer_id": 59489082, "question_id": 59488900, "link": "https://stackoverflow.com/questions/59488900/controller-not-inheriting-methods-from-applicationcontroller/59489082#59489082", "title": "Controller not inheriting methods from ApplicationController", "body": "<p>Looks like this won't work because of how <code>rescue_from</code> <a href=\"https://www.rubydoc.info/docs/rails/4.0.0/ActiveSupport/Rescuable/ClassMethods\" rel=\"nofollow noreferrer\">is implemented</a> in Rails.  It should be used inside the class definition and not wrapped inside a private method. </p>\n\n<p>So you should just do:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::API\n  before_action :rescue_errors\n\n  rescue_from ActiveRecord::RecordNotFound do\n    render json: { error: { message: ['Record not found'] } }, status: :not_found\n  end    \nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 92, "user_id": 7627835, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7x5kV4pca_8/AAAAAAAAAAI/AAAAAAAAAA4/7mMibtSK2C4/photo.jpg?sz=128", "display_name": "Rosel Sosa Gonzalez", "link": "https://stackoverflow.com/users/7627835/rosel-sosa-gonzalez"}, "is_accepted": false, "score": 0, "last_activity_date": 1577463898, "creation_date": 1577463898, "answer_id": 59503437, "question_id": 59488900, "link": "https://stackoverflow.com/questions/59488900/controller-not-inheriting-methods-from-applicationcontroller/59503437#59503437", "title": "Controller not inheriting methods from ApplicationController", "body": "<p>You can do something like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>\nclass ApplicationController &lt; ActionController::API\n  rescue_from ActiveRecord::RecordNotFound, with: :not_found_response\n\n  private\n\n  def not_found_response(exception)\n    render json: { code: 404, status: 'Not Found', error: exception.message }, status: :not_found\n  end\nend\n\n</code></pre>\n\n<p>You can create different answers for each of the possible errors.</p>\n"}], "owner": {"reputation": 1185, "user_id": 1162817, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/90eUU.png?s=128&g=1", "display_name": "Artur Haddad", "link": "https://stackoverflow.com/users/1162817/artur-haddad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 214, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1577463898, "creation_date": 1577365454, "last_edit_date": 1577366623, "question_id": 59488900, "link": "https://stackoverflow.com/questions/59488900/controller-not-inheriting-methods-from-applicationcontroller", "title": "Controller not inheriting methods from ApplicationController", "body": "<p>I have a Rails 6 API-only project that is acting weird.</p>\n\n<p>My application controller has a method to rescue common exceptions:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::API\n  before_action :rescue_errors\n\n  private\n\n  def rescue_errors\n    rescue_from ActiveRecord::RecordNotFound do\n      render json: { error: { message: ['Record not found'] } }, status: :not_found\n    end\n  end\nend\n</code></pre>\n\n<p>This is my UsersController:</p>\n\n<pre><code>class Api::V1::User::UsersController &lt; ApplicationController\n  def show\n    user = User.find(params[:id])\n    render json: { user_id: user.id }, status: :ok\n  end\nend\n</code></pre>\n\n<p>Then I try to access an User id that doesn't exist to get rescued RecordNotFound exception, that inherits from ApplicationController, and I get this error:</p>\n\n<pre><code>&lt;NoMethodError: undefined method `rescue_errors' for #&lt;Api::V1::User::UsersController:0x00007f71484b3be0&gt;\\nDid you mean?  rescue_handlers&gt;\n</code></pre>\n\n<p>Why UserController isn't inheriting rescue_errors from ApplicationController?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "imagemagick", "ubuntu-18.04", "redmine"], "comments": [{"owner": {"reputation": 558, "user_id": 7820436, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PKC7Uo8Wv2Q/AAAAAAAAAAI/AAAAAAAAG1E/liX1WQbbwZU/photo.jpg?sz=128", "display_name": "Thomas Koppensteiner", "link": "https://stackoverflow.com/users/7820436/thomas-koppensteiner"}, "edited": false, "score": 0, "creation_date": 1577363821, "post_id": 59487281, "comment_id": 105151587, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/9050419/cant-install-rmagick-2-13-1-cant-find-magickwand-h\">Can&#39;t install RMagick 2.13.1. Can&#39;t find MagickWand.h.</a>"}, {"owner": {"reputation": 107, "user_id": 12070054, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-u7SRMcwnkJI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reWPugfiTR3garhloctH93uRgdThQ/photo.jpg?sz=128", "display_name": "Rostislav Ruban", "link": "https://stackoverflow.com/users/12070054/rostislav-ruban"}, "reply_to_user": {"reputation": 558, "user_id": 7820436, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PKC7Uo8Wv2Q/AAAAAAAAAAI/AAAAAAAAG1E/liX1WQbbwZU/photo.jpg?sz=128", "display_name": "Thomas Koppensteiner", "link": "https://stackoverflow.com/users/7820436/thomas-koppensteiner"}, "edited": false, "score": 0, "creation_date": 1577363990, "post_id": 59487281, "comment_id": 105151652, "body": "@ThomasKoppensteiner sorry, but no. Already tried."}], "owner": {"reputation": 107, "user_id": 12070054, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-u7SRMcwnkJI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reWPugfiTR3garhloctH93uRgdThQ/photo.jpg?sz=128", "display_name": "Rostislav Ruban", "link": "https://stackoverflow.com/users/12070054/rostislav-ruban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 404, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577360802, "creation_date": 1577357171, "last_edit_date": 1577360802, "question_id": 59487281, "link": "https://stackoverflow.com/questions/59487281/cant-install-rmagick-2-16-0-cant-find-magickwand-h", "title": "Can&#39;t install RMagick 2.16.0. Can&#39;t find MagickWand.h", "body": "<p>I got \"<code>wand/MagickWand.h... no</code>\" and \"<code>presence of MagickWand API (ImageMagick version &gt;= 6.9.0)... no</code>\" check error.\nAfter that, I follow the recommendation and run <code>gem install rmagick -v '2.16.0' --source 'https://rubygems.org/'</code> command, but still have an error \"error: \u2018IsGrayImage\u2019 undeclared\".\nImagemagic 7.0.9 already installed:</p>\n\n<pre><code>convert -version\nVersion: ImageMagick 7.0.9-9 Q16 x86_64 2019-12-20 https://imagemagick.org\nCopyright: \u00a9 1999-2020 ImageMagick Studio LLC\n</code></pre>\n\n<p>Imagemagic libs install (<code>sudo apt-get install libmagickwand-dev imagemagick</code>) not help.</p>\n"}, {"tags": ["ruby", "google-api", "service-accounts", "google-api-ruby-client", "google-api-webmasters"], "comments": [{"owner": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "edited": false, "score": 0, "creation_date": 1591597669, "post_id": 59486977, "comment_id": 110105000, "body": "Where in the documentation does it say that the web master api supports service accounts?"}, {"owner": {"reputation": 35, "user_id": 12600383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c35f572dbcab479e44d2ffd91ffd1721?s=128&d=identicon&r=PG", "display_name": "7fc9ecfc6810c58545e1bc3b556003", "link": "https://stackoverflow.com/users/12600383/7fc9ecfc6810c58545e1bc3b556003"}, "reply_to_user": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "edited": false, "score": 0, "creation_date": 1591598362, "post_id": 59486977, "comment_id": 110105271, "body": "<a href=\"https://github.com/googleapis/google-api-ruby-client\" rel=\"nofollow noreferrer\">github.com/googleapis/google-api-ruby-client</a>"}, {"owner": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "edited": false, "score": 0, "creation_date": 1591598792, "post_id": 59486977, "comment_id": 110105442, "body": "Thats the client library not the API, the library is generated its the same for all apis even if they dont support something.  Where in the documentation or the Google webmaster tools does it state that it supports service accounts?"}, {"owner": {"reputation": 35, "user_id": 12600383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c35f572dbcab479e44d2ffd91ffd1721?s=128&d=identicon&r=PG", "display_name": "7fc9ecfc6810c58545e1bc3b556003", "link": "https://stackoverflow.com/users/12600383/7fc9ecfc6810c58545e1bc3b556003"}, "reply_to_user": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "edited": false, "score": 0, "creation_date": 1591598959, "post_id": 59486977, "comment_id": 110105525, "body": "Dear @DalmTo, would you please be so incredibly kind and point me to a way to access Google Webmasters API from Ruby in a way that does not involve service accounts?"}], "answers": [{"comments": [{"owner": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "edited": false, "score": 0, "creation_date": 1591597741, "post_id": 60675332, "comment_id": 110105035, "body": "How do you delegate the service account access to your account so that it can read the data?"}, {"owner": {"reputation": 1932, "user_id": 459779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hbdWw.jpg?s=128&g=1", "display_name": "Chadwick Wood", "link": "https://stackoverflow.com/users/459779/chadwick-wood"}, "reply_to_user": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "edited": false, "score": 0, "creation_date": 1591743602, "post_id": 60675332, "comment_id": 110171422, "body": "That has to be done using the Google Cloud Platform. <a href=\"https://console.cloud.google.com/\" rel=\"nofollow noreferrer\">console.cloud.google.com</a> Google has some docs about setting up service accounts in the Help, I believe."}, {"owner": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "edited": false, "score": 0, "creation_date": 1591772492, "post_id": 60675332, "comment_id": 110179200, "body": "As far as i know you cant delegate access to a service account to WEb master tools api so i would like you to explain how you do this.  Since even the documentation does not mention you can use a service account with this API.    Google cloud console has nothing to do with setting up the deligation of a service account to users data contained within web master tools.  How do you give it access to that data."}, {"owner": {"reputation": 1932, "user_id": 459779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hbdWw.jpg?s=128&g=1", "display_name": "Chadwick Wood", "link": "https://stackoverflow.com/users/459779/chadwick-wood"}, "reply_to_user": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "edited": false, "score": 0, "creation_date": 1591910088, "post_id": 60675332, "comment_id": 110243014, "body": "It&#39;s a multi-step process, but essentially, yes, as I said you do it through the Google Cloud Platform. Create a project. Then add the Google Search Console API to that project (under Library). Then go to Credentials and click Create Credentials, create a Service account, and give it access to the Search Console API. If you have specific questions I&#39;ll try to answer, but at least try before telling me I&#39;m wrong. ;)"}, {"owner": {"reputation": 1932, "user_id": 459779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hbdWw.jpg?s=128&g=1", "display_name": "Chadwick Wood", "link": "https://stackoverflow.com/users/459779/chadwick-wood"}, "reply_to_user": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "edited": false, "score": 0, "creation_date": 1591910230, "post_id": 60675332, "comment_id": 110243062, "body": "If you&#39;re looking for something other than Search Console access, I don&#39;t know specifically about that."}], "tags": [], "owner": {"reputation": 1932, "user_id": 459779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hbdWw.jpg?s=128&g=1", "display_name": "Chadwick Wood", "link": "https://stackoverflow.com/users/459779/chadwick-wood"}, "is_accepted": true, "score": 0, "last_activity_date": 1584122899, "creation_date": 1584122899, "answer_id": 60675332, "question_id": 59486977, "link": "https://stackoverflow.com/questions/59486977/how-to-use-auth-token-in-google-api-ruby-webmastersv3-service-account-access/60675332#60675332", "title": "How to use auth token in Google API (Ruby) WebmastersV3 (service account access)", "body": "<p>I think you just have to add:</p>\n\n<pre><code>wt_service.authorization = authorizer\n</code></pre>\n\n<p>... after you create the service, and before you make the query. So:</p>\n\n<pre><code>authorizer = Google::Auth::ServiceAccountCredentials.make_creds(json_key_io: File.open('service-account.json'), scope: scope)\nwt_service = Google::Apis::WebmastersV3::WebmastersService.new\nwt_service.authorization = authorizer\nwt_service.query_search_analytics ...\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 12600383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c35f572dbcab479e44d2ffd91ffd1721?s=128&d=identicon&r=PG", "display_name": "7fc9ecfc6810c58545e1bc3b556003", "link": "https://stackoverflow.com/users/12600383/7fc9ecfc6810c58545e1bc3b556003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 60675332, "answer_count": 1, "score": 0, "last_activity_date": 1591597701, "creation_date": 1577355567, "last_edit_date": 1591597701, "question_id": 59486977, "link": "https://stackoverflow.com/questions/59486977/how-to-use-auth-token-in-google-api-ruby-webmastersv3-service-account-access", "title": "How to use auth token in Google API (Ruby) WebmastersV3 (service account access)", "body": "<p>I cannot connect the two pieces together: I am able to authenticate my service account and I know how to form the request for the information I need to retrieve from the API, but I cannot figure out how to make that request authenticated with the token. </p>\n\n<p>This builds an object from the credential file I got for the service account and generates token successfully:</p>\n\n<p>require 'googleauth'</p>\n\n<pre><code>require 'google/apis/webmasters_v3'\n\nwebsite = \"https://example.com\"\n\nscope = 'https://www.googleapis.com/auth/webmasters'\nauthorizer = Google::Auth::ServiceAccountCredentials.make_creds(\n  json_key_io: File.open('service-account.json'),\n scope: scope)\ntoken = authorizer.fetch_access_token!\n</code></pre>\n\n<p>The final request is like </p>\n\n<pre><code>wt_service.query_search_analytics(website, {\n  \"startDate\"=&gt; \"2019-12-01\",\n  \"endDate\"=&gt; \"2019-12-02\",\n  \"dimensions\"=&gt; [\n    \"query\"\n  ]\n})\n</code></pre>\n\n<p>But the object for the webmaster tools API endpoint does not accept any arguments:</p>\n\n<pre><code>wt_service = Google::Apis::WebmastersV3::WebmastersService.new\n</code></pre>\n\n<p>But I need to somehow build it in an authenticated way, that is with the token - but how if I cannot add arguments?! </p>\n\n<p>How do I build the object with the token?</p>\n\n<p>=====</p>\n\n<p>The response from Chadwick Wood solved it. There was a followup issue because Google API was using inconsistent variable names, so I'm pasting the full working code below (Works after adding the service user to webmaster tools user list for the domain)</p>\n\n<pre><code>require 'googleauth'\nrequire 'google/apis/webmasters_v3'\n\nwebsite = \"https://example.com\"\n\nscope = 'https://www.googleapis.com/auth/webmasters'\nauthorizer = Google::Auth::ServiceAccountCredentials.make_creds(json_key_io: File.open('service-account.json'),scope: scope)\ntoken = authorizer.fetch_access_token!\nwt_service = Google::Apis::WebmastersV3::WebmastersService.new\nwt_service.authorization = authorizer\nwt_service.authorization.apply(token)\n\nrequest_object = {\n  start_date: \"2019-02-01\",\n  end_date: \"2020-02-28\",\n  dimensions: [\"query\"]\n}\nparams = Google::Apis::WebmastersV3::SearchAnalyticsQueryRequest.new(request_object)\n\nres = wt_service.query_search_analytics(website, params)\n</code></pre>\n"}, {"tags": ["ruby", "rspec", "rspec3", "webmock"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1577355316, "post_id": 59486571, "comment_id": 105148734, "body": "It doesn&#39;t look like he body and headers match between your expectation and what&#39;s actually happening. Compare them, the <code>Content-Type</code> header isn&#39;t actually being sent, for example, and the body is different."}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1577356324, "post_id": 59486571, "comment_id": 105149116, "body": "The only difference must be the headers as I am not sending body. I don&#39;t see those headers being sent when I make the request locally"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1577385270, "post_id": 59486571, "comment_id": 105158604, "body": "Where it says &quot;You can stub this request with the following snippet&quot;, the following <code>stub_request</code> call <i>is the one that is actually being run</i>. So, I question your claim that you are not sending a body. It must be getting added by some means."}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1577391102, "post_id": 59486571, "comment_id": 105160216, "body": "You are right, @maxpleaner I was wrong, I do send a body, but the only thing I send is what you see in the code. Should I assume that the rest is sent by Faraday by default?"}], "answers": [{"comments": [{"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1577535623, "post_id": 59505757, "comment_id": 105193512, "body": "I initially wrote the specs like this, but I thought it would be nice to stub the requests as well."}, {"owner": {"reputation": 1073, "user_id": 4024628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xc5J8.jpg?s=128&g=1", "display_name": "Allison", "link": "https://stackoverflow.com/users/4024628/allison"}, "reply_to_user": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1577729149, "post_id": 59505757, "comment_id": 105239658, "body": "@jedi I see. I understand the impulse to want to just figure out how alternative approaches work. If the API request you&#39;re using is going to be used across multiple specs, I suggest configuring something like VCR (<a href=\"https://www.rubyguides.com/2018/12/ruby-vcr-gem/\" rel=\"nofollow noreferrer\">rubyguides.com/2018/12/ruby-vcr-gem</a>) that could help simplify any specs needing to make that same request."}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 1, "creation_date": 1577820060, "post_id": 59505757, "comment_id": 105264609, "body": "I eventually sticked to my initial plan. Thanx for the hint! I&#39;ll definitely try it!!! Happy New Year!"}, {"owner": {"reputation": 1470, "user_id": 2367938, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/96d011de6c63e69935509ca3cfca5a2b?s=128&d=identicon&r=PG&f=1", "display_name": "Jacka", "link": "https://stackoverflow.com/users/2367938/jacka"}, "edited": false, "score": 1, "creation_date": 1591009111, "post_id": 59505757, "comment_id": 109885042, "body": "@Allison pretty clever!"}], "tags": [], "owner": {"reputation": 1073, "user_id": 4024628, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xc5J8.jpg?s=128&g=1", "display_name": "Allison", "link": "https://stackoverflow.com/users/4024628/allison"}, "is_accepted": false, "score": 2, "last_activity_date": 1577478760, "creation_date": 1577478760, "answer_id": 59505757, "question_id": 59486571, "link": "https://stackoverflow.com/questions/59486571/stub-faraday-request-with-webmock-help-needed/59505757#59505757", "title": "Stub Faraday request with Webmock - help needed", "body": "<p>Is it necessary to stub the request, or do you just need to mock the response? When I write Faraday client specs, I'll typically do something like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>let(:client) {\n  instance_double(Faraday::Connection, post: faraday_response)\n}\nlet(:faraday_response) { instance_double(Faraday::Response, body: body) }\nlet(:body)             {\n  {\n    'some_key' =&gt; 'some_value'\n  }\n}\n\nbefore do\n  allow(Faraday).to receive(:new) { client } \n  allow(client).to receive(:post) { faraday_response }\nend\n\nit 'redirects to the place' do\n  request\n  expect(response).to redirect_to(some_path)\nend\n\nit 'changes the stuff' do\n  expect { request }.to change { \n    something.reload.attribute \n  }.from(thing1).to(thing2)\nend\n\n</code></pre>\n"}], "owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 918, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1577478760, "creation_date": 1577353491, "last_edit_date": 1577391051, "question_id": 59486571, "link": "https://stackoverflow.com/questions/59486571/stub-faraday-request-with-webmock-help-needed", "title": "Stub Faraday request with Webmock - help needed", "body": "<p>I need help stubbing a request using Faraday gem. I am making this request</p>\n\n<pre><code>URL='https://secure.snd.payu.com//pl/standard/user/oauth/authorize'.freeze\nurl_encoded = 'grant_type=client_credentials' \\\n      + \"&amp;client_id=#{ENV['client_id'}\" \\\n      + \"&amp;client_secret=#{ENV['client_secret'}\"\n\nconnection = Faraday.new do |con|\n  con.response :oj, content_type: /\\bjson$/\n  con.adapter Faraday.default_adapter\nend\n\nconnection.post(URL, url_encoded)\n</code></pre>\n\n<p>which outputs</p>\n\n<pre><code>#&lt;Faraday::Response:0x00000000016ff620 @on_complete_callbacks=[], @env=#&lt;Faraday::Env @method=:post @body={\"access_token\"=&gt;\"00a4e007-220b-4119-aae8-3cb93bb36066\", \"token_type\"=&gt;\"bearer\", \"expires_in\"=&gt;43199, \"grant_type\"=&gt;\"client_credentials\"} @url=#&lt;URI::HTTPS https://secure.snd.payu.com/pl/standard/user/oauth/authorize&gt; @request=#&lt;Faraday::RequestOptions (empty)&gt; @request_headers={\"User-Agent\"=&gt;\"Faraday v0.17.1\"} @ssl=#&lt;Faraday::SSLOptions verify=true&gt; @response=#&lt;Faraday::Response:0x00000000016ff620 ...&gt; @response_headers={\"set-cookie\"=&gt;\"cookieFingerprint=70a4a8d1-7b05-4cb9-9d5c-5ad12e966586; Expires=Fri, 25-Dec-2020 09:31:02 GMT; Path=/; ; HttpOnly, payu_persistent=mobile_agent-false#; Expires=Sun, 20-Dec-2020 09:31:02 GMT; Path=/; ; HttpOnly\", \"correlation-id\"=&gt;\"0A4DC804-62FD_AC11000F-0050_5E047DD5_8A0178-0015\", \"cache-control\"=&gt;\"no-store, no-cache, no-store, must-revalidate\", \"pragma\"=&gt;\"no-cache, no-cache\", \"content-type\"=&gt;\"application/json;charset=UTF-8\", \"transfer-encoding\"=&gt;\"chunked\", \"date\"=&gt;\"Thu, 26 Dec 2019 09:31:01 GMT\", \"server\"=&gt;\"Apache\", \"x-content-type-options\"=&gt;\"nosniff\", \"x-frame-options\"=&gt;\"SAMEORIGIN\", \"x-xss-protection\"=&gt;\"1; mode=block\", \"expires\"=&gt;\"0\", \"connection\"=&gt;\"close\"} @status=200 @reason_phrase=\"OK\"&gt;&gt;\n =&gt; #&lt;Faraday::Response:0x00000000016ff620 @on_complete_callbacks=[], @env=#&lt;Faraday::Env @method=:post @body={\"access_token\"=&gt;\"00a4e007-220b-4119-aae8-3cb93bb36066\", \"token_type\"=&gt;\"bearer\", \"expires_in\"=&gt;43199, \"grant_type\"=&gt;\"client_credentials\"} @url=#&lt;URI::HTTPS https://secure.snd.payu.com/pl/standard/user/oauth/authorize&gt; @request=#&lt;Faraday::RequestOptions (empty)&gt; @request_headers={\"User-Agent\"=&gt;\"Faraday v0.17.1\"} @ssl=#&lt;Faraday::SSLOptions verify=true&gt; @response=#&lt;Faraday::Response:0x00000000016ff620 ...&gt; @response_headers={\"set-cookie\"=&gt;\"cookieFingerprint=70a4a8d1-7b05-4cb9-9d5c-5ad12e966586; Expires=Fri, 25-Dec-2020 09:31:02 GMT; Path=/; ; HttpOnly, payu_persistent=mobile_agent-false#; Expires=Sun, 20-Dec-2020 09:31:02 GMT; Path=/; ; HttpOnly\", \"correlation-id\"=&gt;\"0A4DC804-62FD_AC11000F-0050_5E047DD5_8A0178-0015\", \"cache-control\"=&gt;\"no-store, no-cache, no-store, must-revalidate\", \"pragma\"=&gt;\"no-cache, no-cache\", \"content-type\"=&gt;\"application/json;charset=UTF-8\", \"transfer-encoding\"=&gt;\"chunked\", \"date\"=&gt;\"Thu, 26 Dec 2019 09:31:01 GMT\", \"server\"=&gt;\"Apache\", \"x-content-type-options\"=&gt;\"nosniff\", \"x-frame-options\"=&gt;\"SAMEORIGIN\", \"x-xss-protection\"=&gt;\"1; mode=block\", \"expires\"=&gt;\"0\", \"connection\"=&gt;\"close\"} @status=200 @reason_phrase=\"OK\"&gt;&gt; \n</code></pre>\n\n<p>I am stubbing this request like this</p>\n\n<pre><code>stub_request(:post, 'https://secure.payu.com/pl/standard/user/oauth/authorize')\n  .with(\n         body: 'grant_type=client_credentials&amp;client_id=10&amp;client_secret=absdef',\n         headers: { 'Content-Type' =&gt; 'application/x-www-form-urlencoded' }\n       )\n  .to_return(status: 200, body: '{\"status\":\"SUCCESS\"}')\n</code></pre>\n\n<p>and I am getting this error.</p>\n\n<pre><code>WebMock::NetConnectNotAllowedError:\n       Real HTTP connections are disabled. Unregistered request: POST https://secure.payu.com/pl/standard/user/oauth/authorize with body 'grant_type=client_credentials&amp;client_id=12345&amp;client_secret=secret_client' with headers {'Accept'=&gt;'*/*', 'Accept-Encoding'=&gt;'gzip;q=1.0,deflate;q=0.6,identity;q=0.3', 'User-Agent'=&gt;'Faraday v0.17.1'}\n\n       You can stub this request with the following snippet:\n\n       stub_request(:post, \"https://secure.payu.com/pl/standard/user/oauth/authorize\").\n         with(\n           body: \"grant_type=client_credentials&amp;client_id=12345&amp;client_secret=secret_client\",\n           headers: {\n          'Accept'=&gt;'*/*',\n          'Accept-Encoding'=&gt;'gzip;q=1.0,deflate;q=0.6,identity;q=0.3',\n          'User-Agent'=&gt;'Faraday v0.17.1'\n           }).\n         to_return(status: 200, body: \"\", headers: {})\n\n       registered request stubs:\n\n       stub_request(:post, \"https://secure.payu.com/pl/standard/user/oauth/authorize\").\n         with(\n           body: \"grant_type=client_credentials&amp;client_id=10&amp;client_secret=absdef\",\n           headers: {\n          'Content-Type'=&gt;'application/x-www-form-urlencoded'\n           })\n\n</code></pre>\n\n<p>I don't know why it's complaining about the headers. From what I see in the output above, Faraday does not send the headers Webmock is poining at. Would you have any ideas how to solve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "adfs"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 9987664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0abac047f54749fb48a3e9cdc702f3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Dor6", "link": "https://stackoverflow.com/users/9987664/dor6"}, "is_accepted": false, "score": 0, "last_activity_date": 1577370975, "creation_date": 1577370975, "answer_id": 59489851, "question_id": 59486488, "link": "https://stackoverflow.com/questions/59486488/no-cookies-in-redirect-chain/59489851#59489851", "title": "No cookies in redirect chain", "body": "<p>Found the problem.\nThe problem was that the url I gave the adfs to redirect back to was different than the one I redirected to and thus the cookie didn't pass threw urls</p>\n"}], "owner": {"reputation": 31, "user_id": 9987664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0abac047f54749fb48a3e9cdc702f3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Dor6", "link": "https://stackoverflow.com/users/9987664/dor6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577370975, "creation_date": 1577353081, "question_id": 59486488, "link": "https://stackoverflow.com/questions/59486488/no-cookies-in-redirect-chain", "title": "No cookies in redirect chain", "body": "<p>I have a site that redirect to another site (from the server) and then that site sets a cookie that tells the target url before redirecting to the adfs for saml authentication. After it redirects back the cookie is gone and it will open in the base url instead of the one specified in the cookie. </p>\n\n<p>Note that if I enter the url directly without the first redirect, there's no problem. </p>\n"}, {"tags": ["ruby", "automation", "cucumber", "internet-explorer-11", "watir"], "comments": [{"owner": {"reputation": 8001, "user_id": 10309381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a284b365772283540b23d67dbbbd2d2e?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak-MSFT", "link": "https://stackoverflow.com/users/10309381/deepak-msft"}, "edited": false, "score": 0, "creation_date": 1577352941, "post_id": 59486392, "comment_id": 105147940, "body": "Maybe Protected mode is enabled for one of the security zone. I suggest you to again check it for all the zone and try to disabled it. If issue persist then you can try to contact your system administrator to help you to modify it."}, {"owner": {"reputation": 81, "user_id": 1976848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6lhzY.jpg?s=128&g=1", "display_name": "Himanil Gupta", "link": "https://stackoverflow.com/users/1976848/himanil-gupta"}, "reply_to_user": {"reputation": 8001, "user_id": 10309381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a284b365772283540b23d67dbbbd2d2e?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak-MSFT", "link": "https://stackoverflow.com/users/10309381/deepak-msft"}, "edited": false, "score": 0, "creation_date": 1577364972, "post_id": 59486392, "comment_id": 105151995, "body": "The issue is resolved, First I tried to fix it by editing the registry specific to the browser&#39;s options but that too I don&#39;t have permission. Then I tried a way to modify it using script and found a reference &quot;Power Shell&quot; script to modify it from here <a href=\"https://stackoverflow.com/q/51720030\">stackoverflow.com/q/51720030</a> and after some tweaks in the script, it works :D"}, {"owner": {"reputation": 8001, "user_id": 10309381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a284b365772283540b23d67dbbbd2d2e?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak-MSFT", "link": "https://stackoverflow.com/users/10309381/deepak-msft"}, "edited": false, "score": 0, "creation_date": 1577365483, "post_id": 59486392, "comment_id": 105152158, "body": "Thanks for sharing the solution for the issue. I suggest you post your solution as an answer for this thread and try to mark your own answer as an accepted answer for this question after 48 hrs when it is available to mark. It can help other community members in the future in similar kinds of issues. Thanks for your understanding"}, {"owner": {"reputation": 81, "user_id": 1976848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6lhzY.jpg?s=128&g=1", "display_name": "Himanil Gupta", "link": "https://stackoverflow.com/users/1976848/himanil-gupta"}, "reply_to_user": {"reputation": 8001, "user_id": 10309381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a284b365772283540b23d67dbbbd2d2e?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak-MSFT", "link": "https://stackoverflow.com/users/10309381/deepak-msft"}, "edited": false, "score": 0, "creation_date": 1577367563, "post_id": 59486392, "comment_id": 105152849, "body": "Did that!! Thanks @Deepak-MSFT"}, {"owner": {"reputation": 8001, "user_id": 10309381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a284b365772283540b23d67dbbbd2d2e?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak-MSFT", "link": "https://stackoverflow.com/users/10309381/deepak-msft"}, "edited": false, "score": 0, "creation_date": 1577367619, "post_id": 59486392, "comment_id": 105152866, "body": "You can also try to accept it as an answer when it is available to do it."}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 1976848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6lhzY.jpg?s=128&g=1", "display_name": "Himanil Gupta", "link": "https://stackoverflow.com/users/1976848/himanil-gupta"}, "is_accepted": true, "score": 0, "last_activity_date": 1577367527, "creation_date": 1577367527, "answer_id": 59489286, "question_id": 59486392, "link": "https://stackoverflow.com/questions/59486392/errorsessionnotcreatederror-unexpected-error-launching-internet-explorer/59489286#59489286", "title": "Error::SessionNotCreatedError: Unexpected error launching Internet Explorer", "body": "<p>The issue gets resolved after doing continuous research around it,</p>\n\n<ol>\n<li>Most of the Stackoverflow and Github answers shows to change the settings from Internet Options but those are not working from me due to permission limitation</li>\n<li>One of the blog posts from LinkedIn <a href=\"https://www.linkedin.com/pulse/automation-using-internet-explorer-11-pritam-maske\" rel=\"nofollow noreferrer\">https://www.linkedin.com/pulse/automation-using-internet-explorer-11-pritam-maske</a>. Suggested to modify the registry specific to internet explorer, but that too I am unable to edit due to permission limitations.</li>\n<li>Taking the points from registry modification, then I found a way to edit it via <code>PowerShell script</code> and found few solutions to reset the Internet Explorer Preferences from Microsoft power shell script repositories\n<a href=\"https://social.technet.microsoft.com/Forums/ie/en-US/508360d9-812c-4fb9-83d2-6d98c7b9905a/how-to-reset-all-internet-explorer-8-settings-for-a-different-user-profile?forum=ieitprocurrentver\" rel=\"nofollow noreferrer\">How to reset all Internet Explorer settings for a different user profile?</a></li>\n<li><p>With this got 1 step success but main problem remains same i.e. my IE 11 not launched, then searched for to \"Enable the Protected Mode for all Zones\" and got few post with a good description around it</p>\n\n<p>a. <a href=\"https://x86x64.wordpress.com/2014/05/20/powershell-ie-zones-protected-mode-state/\" rel=\"nofollow noreferrer\">Powershell \u2013 IE zones Protected Mode state</a></p>\n\n<p>b. <a href=\"https://stackoverflow.com/questions/51720030/ie-browser-powershell-script-to-add-site-to-trusted-sites-list-disable-protec\">IE Browser - Powershell script to add a site to trusted sites list, disable protected mode &amp; make all zones security level low</a></p>\n\n<p>At last, after doing tweaks in the Powershell script it works and my script is working fine for IE browser.</p></li>\n</ol>\n"}], "owner": {"reputation": 81, "user_id": 1976848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6lhzY.jpg?s=128&g=1", "display_name": "Himanil Gupta", "link": "https://stackoverflow.com/users/1976848/himanil-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 59489286, "answer_count": 1, "score": 0, "last_activity_date": 1577367527, "creation_date": 1577352555, "question_id": 59486392, "link": "https://stackoverflow.com/questions/59486392/errorsessionnotcreatederror-unexpected-error-launching-internet-explorer", "title": "Error::SessionNotCreatedError: Unexpected error launching Internet Explorer", "body": "<p>Unable launch Internet Explorer using my script it gives this error</p>\n\n<pre><code>Selenium::WebDriver::Error::SessionNotCreatedError: Unexpected error launching Internet Explorer. Protected Mode settings are not the same for all zones. Enable Protected Mode must be set to the same value (enabled or disabled) for all zones.\n</code></pre>\n\n<p>I researched a lot to get work around for this and found few solutions <a href=\"https://stackoverflow.com/a/29453294/1976848\">https://stackoverflow.com/a/29453294/1976848</a>, but I am unable to change my IE browser settings, The checkbox to <code>\"Enable Protected mode\"</code> is disabled for all the zones here\n<a href=\"https://i.stack.imgur.com/bgeHK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bgeHK.png\" alt=\"enter image description here\"></a></p>\n\n<p>Also, tried to override this with desired capabilities here is the code but not getting any success:</p>\n\n<pre><code>caps = Selenium::WebDriver::Remote::Capabilities.internet_explorer(\n                     :ignoreProtectedModeSettings =&gt; true,\n                     :javascriptEnabled =&gt; true,\n                 )\nWatir::Browser.new :ie, http_client: client,:desired_capabilities =&gt; caps\n</code></pre>\n\n<p>I am using Cucumber with Ruby and Watir and Browser is Internet Explorer 11.</p>\n\n<p>Please suggest some workaround for this.</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "webhooks"], "comments": [{"owner": {"reputation": 361, "user_id": 4650646, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UbaGd.jpg?s=128&g=1", "display_name": "MUHAMMAD SOBAN", "link": "https://stackoverflow.com/users/4650646/muhammad-soban"}, "edited": false, "score": 0, "creation_date": 1577359346, "post_id": 59486300, "comment_id": 105150127, "body": "You are getting <code>JSON</code> as params,  you need to render params instead of <code>response.body</code>."}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 5842456, "user_type": "registered", "profile_image": "https://graph.facebook.com/735297973238979/picture?type=large", "display_name": "Tan Lam", "link": "https://stackoverflow.com/users/5842456/tan-lam"}, "is_accepted": true, "score": 0, "last_activity_date": 1577416828, "creation_date": 1577416828, "answer_id": 59495629, "question_id": 59486300, "link": "https://stackoverflow.com/questions/59486300/webhook-how-to-display-the-response-in-my-view/59495629#59495629", "title": "Webhook : how to display the response in my view", "body": "<p><strong><em>params</em></strong> instead of <strong><em>response.body</em></strong></p>\n\n<pre><code>def webhooks\n  render json: params, status: 200\n  puts  params\nend\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 12600003, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAcDDhCPuhb9osLQKJ71laKf-yDpCk-VU_iyg6x=k-s128", "display_name": "Dam76", "link": "https://stackoverflow.com/users/12600003/dam76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 59495629, "answer_count": 1, "score": 0, "last_activity_date": 1577416828, "creation_date": 1577352100, "question_id": 59486300, "link": "https://stackoverflow.com/questions/59486300/webhook-how-to-display-the-response-in-my-view", "title": "Webhook : how to display the response in my view", "body": "<p>I'm working with an API that allow me to check if a user is connected to any account (Amazon, Ebay, Prestashop, etc). \nWhen a connection is made, I receive a webhook in <code>JSON</code> that looks like this : </p>\n\n<pre><code> Parameters: {\"connection\"=&gt;{\"informations\"=&gt;{}, \"connector_uuid\"=&gt;\"3180ba23-2b75-5abe-b14d-69a42835474d\", \"id_user\"=&gt;626, \"created\"=&gt;\"2019-12-26 10:03:41\", \"id_provider\"=&gt;940, \"error_message\"=&gt;nil, \"last_push\"=&gt;nil, \"last_update\"=&gt;\"2019-12-26 10:03:45\", \"connector\"=&gt;{\"sync_frequency\"=&gt;nil, \"code\"=&gt;nil, \"uuid\"=&gt;\"3180ba23-2b75-5abe-b14d-69a42835474d\", \"documents_type\"=&gt;[\"bill\"], \"color\"=&gt;\"c8ee20\", \"auth_mechanism\"=&gt;\"credentials\", \"capabilities\"=&gt;[\"document\"], \"id\"=&gt;470, \"available_auth_mechanisms\"=&gt;[\"credentials\"], \"beta\"=&gt;true, \"months_to_fetch\"=&gt;nil, \"urls\"=&gt;[\"https://addons.prestashop.com\"], \"siret\"=&gt;nil, \"hidden\"=&gt;false, \"charged\"=&gt;true, \"slug\"=&gt;\"PRE\", \"categories\"=&gt;[], \"name\"=&gt;\"PrestaShop\"}, \"active\"=&gt;true, \"state\"=&gt;nil, \"expire\"=&gt;nil, \"accounts\"=&gt;[], \"error\"=&gt;nil, \"subscriptions\"=&gt;[{\"id_source\"=&gt;604, \"documents\"=&gt;[], \"id_user\"=&gt;696, \"deleted\"=&gt;nil, \"id_connection\"=&gt;708, \"number\"=&gt;\"test01@gmail.com\", \"validity\"=&gt;nil, \"label\"=&gt;\"test@gmail.com\", \"subscriber\"=&gt;\"John Doe\", \"currency\"=&gt;nil, \"disabled\"=&gt;nil, \"error\"=&gt;\"bug\", \"id\"=&gt;550, \"formatted_balance\"=&gt;nil, \"renewdate\"=&gt;nil, \"balance\"=&gt;nil, \"last_update\"=&gt;nil}], \"next_try\"=&gt;\"2019-12-27 14:03:45\", \"id_connector\"=&gt;440, \"id\"=&gt;608}, \"push_type\"=&gt;\"partial_history\", \"user\"=&gt;{\"signin\"=&gt;\"2019-12-26 10:03:08\", \"platform\"=&gt;\"sharedAccess\", \"id\"=&gt;626}, \"invoice\"=&gt;{\"connection\"=&gt;{\"informations\"=&gt;{}, \"connector_uuid\"=&gt;\"3180ba23-2b75-5abe-b14d-69a42835474d\", \"id_user\"=&gt;926, \"created\"=&gt;\"2019-12-26 10:03:41\", \"id_provider\"=&gt;480, \"error_message\"=&gt;nil, \"last_push\"=&gt;nil, \"last_update\"=&gt;\"2019-12-26 10:03:45\", \"connector\"=&gt;{\"sync_frequency\"=&gt;nil, \"code\"=&gt;nil, \"uuid\"=&gt;\"3180ba23-2b75-5abe-b14d-69a42835474d\", \"documents_type\"=&gt;[\"bill\"], \"color\"=&gt;\"c8ee20\", \"auth_mechanism\"=&gt;\"credentials\", \"capabilities\"=&gt;[\"document\"], \"id\"=&gt;440, \"available_auth_mechanisms\"=&gt;[\"credentials\"], \"beta\"=&gt;true, \"months_to_fetch\"=&gt;nil, \"urls\"=&gt;[\"https://addons.prestashop.com\"], \"siret\"=&gt;nil, \"hidden\"=&gt;false, \"charged\"=&gt;true, \"slug\"=&gt;\"PRE\", \"categories\"=&gt;[], \"name\"=&gt;\"PrestaShop\"}, \"active\"=&gt;true, \"state\"=&gt;nil, \"expire\"=&gt;nil, \"accounts\"=&gt;[], \"error\"=&gt;nil, \"subscriptions\"=&gt;[{\"id_source\"=&gt;699, \"documents\"=&gt;[], \"id_user\"=&gt;926, \"deleted\"=&gt;nil, \"id_connection\"=&gt;608, \"number\"=&gt;\"test01@gmail.com\", \"validity\"=&gt;nil, \"label\"=&gt;\"compere01@gmail.com\", \"subscriber\"=&gt;\"John Doe\", \"currency\"=&gt;nil, \"disabled\"=&gt;nil, \"error\"=&gt;\"bug\", \"id\"=&gt;550, \"formatted_balance\"=&gt;nil, \"renewdate\"=&gt;nil, \"balance\"=&gt;nil, \"last_update\"=&gt;nil}], \"next_try\"=&gt;\"2019-12-27 14:03:45\", \"id_connector\"=&gt;490, \"id\"=&gt;908}, \"push_type\"=&gt;\"partial_history\", \"user\"=&gt;{\"signin\"=&gt;\"2019-12-26 10:03:08\", \"platform\"=&gt;\"sharedAccess\", \"id\"=&gt;626}}}\n</code></pre>\n\n<p>Do you know how to display this <code>JSON</code> in my view ? </p>\n\n<p>I tried, in my controller : </p>\n\n<pre><code>def webhooks\n  render json: response.body, status: 200\n  puts  response.body.inspect\nend\n</code></pre>\n\n<p>But nothing happens in my view, I have the JSON in my console BUT my puts render an empty string. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "deployment", "capistrano"], "answers": [{"tags": [], "owner": {"reputation": 361, "user_id": 4650646, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UbaGd.jpg?s=128&g=1", "display_name": "MUHAMMAD SOBAN", "link": "https://stackoverflow.com/users/4650646/muhammad-soban"}, "is_accepted": false, "score": 1, "last_activity_date": 1577359558, "creation_date": 1577359558, "answer_id": 59487762, "question_id": 59486192, "link": "https://stackoverflow.com/questions/59486192/capistrano-task-deployassetsprecompile-takes-an-hour/59487762#59487762", "title": "Capistrano task deploy:assets:precompile takes an hour", "body": "<p>it is not recommended to compile assets on server, you should disable it and compile assets in local and commit assets and then deploy app.\n<a href=\"https://guides.rubyonrails.org/asset_pipeline.html#local-precompilation\" rel=\"nofollow noreferrer\">Rails guide for local assets compilation</a></p>\n"}], "owner": {"reputation": 1, "user_id": 12600039, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6IJ9y6hQDI8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdmwLE47iyZf4do1aT_jdLkFJHPMg/photo.jpg?sz=128", "display_name": "Alexey Ivanov", "link": "https://stackoverflow.com/users/12600039/alexey-ivanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577359558, "creation_date": 1577351498, "question_id": 59486192, "link": "https://stackoverflow.com/questions/59486192/capistrano-task-deployassetsprecompile-takes-an-hour", "title": "Capistrano task deploy:assets:precompile takes an hour", "body": "<p>I have a problem when deploing on production, executing environment for assets precompile task takes too long (20 to 60 minutes)</p>\n\n<pre><code>deploy:assets:precompile\n      01 ~/.rvm/bin/rvm default do bundle exec rake assets:precompile --trace\n      01 do bundle exec rake assets:precompile --trace\n      01 Ruby enVironment Manager 1.29.9 (latest) (c) 2009-2017 Michal Papis, P\u2026\n      01\n      01 ** Invoke assets:precompile (first_time)\n      01 ** Invoke assets:environment (first_time)\n      01 ** Execute assets:environment\n      01 ** Invoke environment (first_time)\n      01 ** Execute environment\n</code></pre>\n\n<p>And it holds on this moment. Strace outputs something like this</p>\n\n<pre><code> rubygems/request_set/lockfile.rb\\331\\\"rubygems/bundler_version_finder.rb\\264rubygems/resolver.rb\\270rubygems/path_support.rb\\267rubygems/uninstaller.rb\\267rubygems/requirement.rb\\272rubygems/version_option.rb\\331 rubygems/local_remote_options.rb\\331 rubygems/source_specific_file.rb\\267rubygems/request_set.rb\\331#rubygems/core_ext/kernel_require.rb\\331 rubygems/core_ext/kernel_warn.rb\\277rubygems/core_ext/kernel_gem.rb\\264rubygems/platform.rb\\271rubygems/uri_formatter.rb\\331\\\"rubygems/install_update_options.rb\\266rubygems/name_tuple.rb\\262rubygems/errors.rb\\265rubygems/util/list.rb\\271rubygems/util/licenses.rb\\277rubygems/gemcutter_utilities.rb\\264rubygems/security.rb\\267rubygems/mock_gem_ui.rb\\277rubygems/installer_test_case.rb\\267rubygems/source_list.rb\\273rubygems/command_manager.rb\\273rubygems/install_message.rb\\331)rubygems/resolver/vendor_specification.rb\\3319rubygems/resolver/molinillo/lib/molinillo/gem_metadata.rb\\331=rubygems/resolver/molinillo/lib/molinillo/dependency_graph.rb\\331Grubygems/resolver/molinillo/lib/molinillo/delegates/resolution_state.rb\\331Mrubygems/resolver/molinillo/lib/molinillo/delegates/specification_provider.rb\\3315rubygems/resolver/molinillo/lib/molinillo/resolver.rb\\3317rubygems/resolver/molinillo/lib/molinillo/resolution.rb\\3317rubygems/resolver/molinillo/lib/molinillo/modules/ui.rb\\331Krubygems/resolver/molinillo/lib/molinillo/modules/specification_provider.rb\\3313rubygems/resolver/molinillo/lib/molinillo/errors.rb\\331Arubygems/resolver/molinillo/lib/molinillo/dependency_graph/log.rb\\331Irubygems/resolver/molinillo/lib/molinillo/dependency_graph/set_payload.rb\\331Drubygems/resolver/molinillo/lib/molinillo/dependency_graph/action.rb\\331Hrubygems/resolver/molinillo/lib/molinillo/dependency_graph/add_vertex.rb\\331Irubygems/resolver/molinillo/lib/molinillo/dependency_graph/delete_edge.rb\\331Drubygems/resolver/molinillo/lib/molinillo/dependency_graph/vertex.rb\\331Rrubygems/resolver/molinillo/lib/molinillo/dependency_graph/add_edge_no_circular.rb\\331Qrubygems/resolver/molinillo/lib/molinillo/dependency_graph/detach_vertex_named.rb\\331Arubygems/resolver/molinillo/lib/molinillo/dependency_graph/tag.rb\\3312rubygems/resolver/molinillo/lib/molinillo/state.rb\\331,rubygems/resolver/molinillo/lib/molinillo.rb\\331\\\"rubygems/resolver/specification.rb\\276rubygems/resolver/molinill\"..., 442032982) = 442032982\n</code></pre>\n\n<p>And htop says than CPU usage is near 100%.</p>\n\n<p>So it seems that problem is somewhere on bundling gems for running environment, but i have no idea how can I deal with it. There's no such problem when i deploy to staging, and running rails conslole on production (which do the same gems loading I guess) doesn't take too much time.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12556644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72c533416489bc346a6385ed0a6cbf8?s=128&d=identicon&r=PG&f=1", "display_name": "rat007", "link": "https://stackoverflow.com/users/12556644/rat007"}, "edited": false, "score": 0, "creation_date": 1577350719, "post_id": 59485979, "comment_id": 105147208, "body": "undefined method `strftime&#39; for &quot;{1=&gt;2019, 2=&gt;12, 3=&gt;1}&quot;:String Did you mean?  strip"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 3, "user_id": 12556644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72c533416489bc346a6385ed0a6cbf8?s=128&d=identicon&r=PG&f=1", "display_name": "rat007", "link": "https://stackoverflow.com/users/12556644/rat007"}, "edited": false, "score": 0, "creation_date": 1577350932, "post_id": 59485979, "comment_id": 105147277, "body": "That means <code>date</code> is not stored as a Date in the database but as a JSON String. Did you do that on purpose? If not then I recommend changing the column type to <code>date</code>."}, {"owner": {"reputation": 3, "user_id": 12556644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72c533416489bc346a6385ed0a6cbf8?s=128&d=identicon&r=PG&f=1", "display_name": "rat007", "link": "https://stackoverflow.com/users/12556644/rat007"}, "edited": false, "score": 0, "creation_date": 1577351442, "post_id": 59485979, "comment_id": 105147445, "body": "hi after changing column type still getting error like undefined method `strftime&#39; for nil:NilClass"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 3, "user_id": 12556644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72c533416489bc346a6385ed0a6cbf8?s=128&d=identicon&r=PG&f=1", "display_name": "rat007", "link": "https://stackoverflow.com/users/12556644/rat007"}, "edited": false, "score": 0, "creation_date": 1577351765, "post_id": 59485979, "comment_id": 105147543, "body": "Please copy and paste and the whole form, the log entries from an example create request and your controller methods into your question. It seems like Rails isn&#39;t storing the <code>date</code> into your database and therefore returns <code>nil</code>."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 0, "last_activity_date": 1577350226, "creation_date": 1577350226, "answer_id": 59485979, "question_id": 59485870, "link": "https://stackoverflow.com/questions/59485870/how-can-i-get-mm-yy-output-while-use-of-form-date-select-date-in-rails/59485979#59485979", "title": "how can i get mm/yy output while use of &#39;form.date_select :date&#39; in rails", "body": "<p>What about using <a href=\"https://ruby-doc.org/stdlib-2.6.5/libdoc/date/rdoc/Date.html#method-i-strftime\" rel=\"nofollow noreferrer\"><code>strftime</code></a>?</p>\n\n<pre><code>&lt;%= project_site.date.strftime(\"%m%Y\") %&gt;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12556644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72c533416489bc346a6385ed0a6cbf8?s=128&d=identicon&r=PG&f=1", "display_name": "rat007", "link": "https://stackoverflow.com/users/12556644/rat007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 59485979, "answer_count": 1, "score": -1, "last_activity_date": 1577352429, "creation_date": 1577349421, "last_edit_date": 1577352429, "question_id": 59485870, "link": "https://stackoverflow.com/questions/59485870/how-can-i-get-mm-yy-output-while-use-of-form-date-select-date-in-rails", "title": "how can i get mm/yy output while use of &#39;form.date_select :date&#39; in rails", "body": "<p>hi i am take date as date data type in rails but i only want to show user date as mm/yyyy format. here is form code but when i execute this code using strftime('%m%y') i am getting error nil:class but without using strftime i am getting output as yyyy-mm-dd format. how can i get output as mm/yy format or month-year format</p>\n\n<p>form.html.erb</p>\n\n<pre><code>&lt;%= form_with(model: project_site, local: true) do |form| %&gt;\n  &lt;% if project_site.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(project_site.errors.count, \"error\") %&gt; prohibited this project_site from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% project_site.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n&lt;div class=\"row\"&gt;\n    &lt;div class=\"field medium-3 columns\"&gt;\n      &lt;%= form.label :name %&gt;\n      &lt;%= form.text_field :name %&gt;\n    &lt;/div&gt;\n&lt;!--\n    &lt;div class=\"field medium-3 columns\"&gt;\n      &lt;%= form.label :date %&gt;\n      &lt;%= form.text_field :date, class: 'datepicker' %&gt;\n    &lt;/div&gt;\n--&gt;\n      &lt;div class=\"field medium-3 columns\"&gt;\n        &lt;%= form.label :upload_attendance %&gt;\n        &lt;%= form.file_field :file %&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"field medium-6 columns\"&gt;\n        &lt;%= form.label :attendance_month %&gt;\n        &lt;%= form.date_select :date, { :discard_day =&gt; true, :discard_month =&gt; false, :discard_year =&gt; false } %&gt;\n      &lt;/div&gt;\n\n    &lt;div class=\"actions\"&gt;\n      &lt;br&gt;\n      &lt;%= form.submit 'Upload Attendance', :class =&gt; 'button primary'%&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;% end %&gt;\n\n</code></pre>\n\n<p>show.html.erb</p>\n\n<pre><code>&lt;%= project_site.date %&gt;\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1577339345, "post_id": 59484110, "comment_id": 105144283, "body": "What is the purpose of a &quot;shared variable&quot;? Perhaps what you want are globals or constants? You probably should look at <a href=\"https://stackoverflow.com/questions/8334684/how-to-share-variables-across-my-rb-files\">this question</a>"}, {"owner": {"reputation": 2295, "user_id": 1099089, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/a0bf49f333363ebd26ae2d0df3be9533?s=128&d=identicon&r=PG", "display_name": "stevenkucera", "link": "https://stackoverflow.com/users/1099089/stevenkucera"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1577339427, "post_id": 59484110, "comment_id": 105144299, "body": "Bad terminology, I meant one variable for each instance of a class in the class hierarchy.  I could use <code>@@variable</code> but this is basically like global variables in disguise.  What I need is one variable for the class and each of its descendants (direct or indirect)."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 1, "creation_date": 1577339551, "post_id": 59484110, "comment_id": 105144327, "body": "Your idea still comes across as convoluted.  Variable implies state can change.  What is it that will change that you need &quot;variable&quot; for?  Just because Ruby allows metaprogramming, doesn&#39;t mean you need to do it. What exactly is the problem you&#39;re trying to solve?  Did you even try to whiteboard it?"}], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1577340744, "creation_date": 1577340744, "answer_id": 59484496, "question_id": 59484110, "link": "https://stackoverflow.com/questions/59484110/shared-class-instance-variable-in-one-line-of-code/59484496#59484496", "title": "Shared class instance variable in one line of code", "body": "<p>If you want to share code between classes, and this can't be easily done through class inheritance, perhaps a module is what you need.</p>\n\n<pre><code>module Paint\n  def paint \n    puts \"hooray I paint #{self.foo if defined?(self.foo)}\"\n  end\nend\n\nclass Widget\n  include Paint\n\n  attr_accessor :foo\n\n  def initialize\n    @foo = 'foo'\n  end\n\n  def scribble\n    puts \"I scribble some #{foo}\" \n  end\nend\n\nw = Widget.new\nw.paint\nhooray I paint foo\n\nw.scribble\nI scribble some foo\nw.foo='splat'\nw.paint\nhooray I paint splat\n</code></pre>\n"}], "owner": {"reputation": 2295, "user_id": 1099089, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/a0bf49f333363ebd26ae2d0df3be9533?s=128&d=identicon&r=PG", "display_name": "stevenkucera", "link": "https://stackoverflow.com/users/1099089/stevenkucera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1577342653, "creation_date": 1577337378, "question_id": 59484110, "link": "https://stackoverflow.com/questions/59484110/shared-class-instance-variable-in-one-line-of-code", "title": "Shared class instance variable in one line of code", "body": "<p>I would like to have a system something like: A hieararchy of <code>Widget</code>s, each <code>Widget</code> containing a class instance variable <code>@painter</code>. Therefore each instance of <code>Widget</code> will know how to paint itself, but this behaviour can be replaced at runtime.</p>\n\n<p>At the moment I have something like this:</p>\n\n<pre><code>class MyButton &lt; Widget\n\n  @painter = DefaultPainter.new\n\n  def set_painter(new_painter)\n    self.class.instance_variable_set(:painter, new_painter)\n  end\n\n  def get_painter()\n    self.class.instance_variable_get(:painter)\n  end\n\nend\n</code></pre>\n\n<p>Is it possible (using probably metaprogramming) to shrink this verbose code something down to:</p>\n\n<pre><code>class Widget\n\n  shared_attr :painter\n\nend\n</code></pre>\n\n<p>Probably best way is to use define_method in the Widget.inherit override. It could set up the methods as well as the @painter for each class. But I'm not sure this way is the best to do it. For instance, if I create <code>Button &lt; Widget</code> and <code>SpecialButton &lt; Button</code> I would like <code>SpecialButton</code> to pick up the <code>@painter</code> class instance variable.</p>\n\n<p>Also, what if I wanted to have <code>shared_attr</code>s in other classes. Maybe I could write a <code>HasSharedVariables</code> module. And every class that needs shared variables could extend this module. I would like to know the best way to do this, if it is possible.</p>\n"}, {"tags": ["ruby", "macos", "openssl", "rbenv"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1577341105, "post_id": 59483699, "comment_id": 105144639, "body": "It&#39;s <a href=\"https://en.wikipedia.org/wiki/MacOS_Mojave\" rel=\"nofollow noreferrer\">Mojave</a>, not Mohave."}], "answers": [{"tags": [], "owner": {"reputation": 314, "user_id": 4887288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5934a21e06034c18be018c56f59d7a20?s=128&d=identicon&r=PG", "display_name": "aphorise", "link": "https://stackoverflow.com/users/4887288/aphorise"}, "is_accepted": true, "score": 3, "last_activity_date": 1580469274, "last_edit_date": 1580469274, "creation_date": 1580391790, "answer_id": 59987407, "question_id": 59483699, "link": "https://stackoverflow.com/questions/59483699/ruby-2-6-0-installation-fails-on-macos-with-rbenv/59987407#59987407", "title": "Ruby 2.6.0 installation fails on MacOS with rbenv", "body": "<p>Reposting my response from <a href=\"https://stackoverflow.com/a/59977338/4887288\">this other thread</a> - I was facing a similar issue and can recommend the approach below that's related to <strong>binutils</strong> needing to be <strong>uninstall</strong>ed first. What worked for me:</p>\n\n<pre><code>brew uninstall binutils\n# Uninstalling /usr/local/Cellar/binutils/2.33.1... (134 files, 167.6MB)\n\nrbenv install 2.6.5 &amp;&amp; rbenv local 2.6.5 ;\n# Downloading openssl-1.1.1d.tar.gz...\n# -&gt; https://dqw8nmjcqpjn7.cloudfront.net/1e3a91bc1f9dfce01af26026f856e064eab4c8ee0a8f457b5ae30b40b8b711f2\n# Installing openssl-1.1.1d...\n# Installed openssl-1.1.1d to /Users/auser/.rbenv/versions/2.6.5\n\n# Downloading ruby-2.6.5.tar.bz2...\n# -&gt; https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.5.tar.bz2\n# Installing ruby-2.6.5...\n# ruby-build: using readline from homebrew\n# Installed ruby-2.6.5 to /Users/auser/.rbenv/versions/2.6.5\n</code></pre>\n\n<p>Prior to this the I was also getting a number of varying messages in <strong>ruby-build.log</strong> - with the last being:</p>\n\n<pre><code># ld: symbol(s) not found for architecture x86_64\n</code></pre>\n\n<p>A number of other steps that I took as part of my homebrew setup (prior to uninstall) included:</p>\n\n<pre><code>brew install perl ruby rbenv\n# // UPDATE PATHs with suggestions made by brew during install\nwhich awk perl\n# /usr/local/bin/awk\n# /usr/local/bin/perl\n# ^^^ IN SHORT ALL PATHs should be with /usr/local/opt OR /usr/local/bin\n</code></pre>\n\n<p>You can re-install binutils again after as needed and remember to repeat the uninstallation with any future <code>rbenv install</code> version(s) that you're likely to re-execute (note to self).</p>\n\n<p>PS - tested on macOS Catalina 10.15.3 (19D76) successfully installing both 2.4.0 &amp; 2.6.5</p>\n"}], "owner": {"reputation": 2898, "user_id": 605396, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4Qh4F.png?s=128&g=1", "display_name": "Marvin Danig", "link": "https://stackoverflow.com/users/605396/marvin-danig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 614, "favorite_count": 0, "accepted_answer_id": 59987407, "answer_count": 1, "score": 1, "last_activity_date": 1580469274, "creation_date": 1577332842, "last_edit_date": 1577369317, "question_id": 59483699, "link": "https://stackoverflow.com/questions/59483699/ruby-2-6-0-installation-fails-on-macos-with-rbenv", "title": "Ruby 2.6.0 installation fails on MacOS with rbenv", "body": "<p>I have a Mac on Mojave, and it's failing to install some of the basic stuff required for development: </p>\n\n<pre><code>$ rbenv install 2.6.0\n\nDownloading openssl-1.1.1d.tar.gz...\n-&gt; https://dqw8nmjcqpjn7.cloudfront.net/1e3a91bc1f9dfce01af26026f856e064eab4c8ee0a8f457b5ae30b40b8b711f2\nInstalling openssl-1.1.1d...\n\nBUILD FAILED (OS X 10.14.6 using ruby-build 20191223)\n\nInspect or clean up the working tree at /var/folders/l_/xgbzwc3j0xn_cb74550m71vr0000gn/T/ruby-build.20191225225406.18503.lq8QNM\nResults logged to /var/folders/l_/xgbzwc3j0xn_cb74550m71vr0000gn/T/ruby-build.20191225225406.18503.log\n\nLast 10 log lines:\n      _s_server_main in s_server.o\n  \"_verify_stateless_cookie_callback\", referenced from:\n      _s_server_main in s_server.o\n  \"_wait_for_async\", referenced from:\n      _s_client_main in s_client.o\n      _sv_body in s_server.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake[1]: *** [apps/openssl] Error 1\nmake: *** [all] Error 2\n</code></pre>\n\n<p>I found several blogposts talking about how the Mojave release has broken a few things for developers, but none of the articles provide a solution. Has anyone else faced the issue described above?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter", "server", "bots"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10405030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MfYo6.jpg?s=128&g=1", "display_name": "Emirhan Kaplan", "link": "https://stackoverflow.com/users/10405030/emirhan-kaplan"}, "edited": false, "score": 0, "creation_date": 1577413945, "post_id": 59491377, "comment_id": 105164545, "body": "thank you so much for the effort. your solution is exactly what I need :) I had to otherwise before solution. I mean I found an Add-on for heroku and it&#39;s called &quot;Heroku Scheduler&quot;. It&#39;s basically same thing with your solution. Thank you!"}], "tags": [], "owner": {"reputation": 1692, "user_id": 9288619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6IK38.jpg?s=128&g=1", "display_name": "code_aks", "link": "https://stackoverflow.com/users/9288619/code-aks"}, "is_accepted": true, "score": 1, "last_activity_date": 1577380205, "creation_date": 1577380205, "answer_id": 59491377, "question_id": 59483212, "link": "https://stackoverflow.com/questions/59483212/how-can-i-keep-my-twitter-bot-awake-with-rails/59491377#59491377", "title": "How can I keep my Twitter Bot awake with Rails?", "body": "<p>I think for your requirement you can use <a href=\"https://github.com/adamwiggins/clockwork\" rel=\"nofollow noreferrer\">#clockwork_gem</a></p>\n\n<p>You need to do the following:</p>\n\n<ul>\n<li>Firstly install the clockwork gem.</li>\n</ul>\n\n<p>In your lib folder create a lib/clock.rb</p>\n\n<pre><code>### Example :-\nrequire 'clockwork'\nrequire './config/boot'\nrequire './config/environment'\n\nmodule Clockwork\n\n  handler do |job|\n    puts \"Running #{job}\"\n  end\n\n  every(1.day, 'Creating Cycle', :at =&gt; '12:00') {YourClass_name.start_bot}\nend\n</code></pre>\n\n<ul>\n<li><p>Create a procfile\nTo your <code>Procfile</code> use like this</p>\n\n<pre><code>worker: bundle exec clockwork lib/clock.rb\n</code></pre></li>\n</ul>\n\n<p>it will start the server every time after Heroku push/web server restart.</p>\n\n<p>Or you can run using console from your computer like this but in this case, you need to run every time after web server restarting</p>\n\n<pre><code>heroku run bundle exec clockwork lib/clock.rb\n</code></pre>\n\n<p>and from Heroku open console and type</p>\n\n<pre><code>bundle exec clockwork lib/clock.rb\n</code></pre>\n\n<p>Hope this will help :)</p>\n"}], "owner": {"reputation": 33, "user_id": 10405030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MfYo6.jpg?s=128&g=1", "display_name": "Emirhan Kaplan", "link": "https://stackoverflow.com/users/10405030/emirhan-kaplan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 59491377, "answer_count": 1, "score": 1, "last_activity_date": 1577380205, "creation_date": 1577326256, "question_id": 59483212, "link": "https://stackoverflow.com/questions/59483212/how-can-i-keep-my-twitter-bot-awake-with-rails", "title": "How can I keep my Twitter Bot awake with Rails?", "body": "<p>My main purpose is creating a twitter bot. Which is basically going to retweet tweets from certain accounts. Everything works properly except keeping the bot awake. In order to keep to bot awake, I need to leave my laptop and console open. How can I deploy an App that will do this for me? I want to put the server to work for all this. I tried with Heroku but it gives timeout as expected cause request is should be open to keep my method going.</p>\n\n<p>Thanks in advance...</p>\n\n<p>my method:</p>\n\n<pre><code>    def self.start_bot\n    @client = Twitter::REST::Client.new do |config|\n      config.consumer_key        = ENV[\"CONSUMER_KEY\"]\n      config.consumer_secret     = ENV[\"CONSUMER_SECRET_KEY\"]\n      config.access_token        = ENV[\"ACCESS_TOKEN\"]\n      config.access_token_secret = ENV[\"ACCESS_SECRET_TOKEN\"]\n    end\n\n    while true do\n      begin\n        @client.search(\"from:ExampleAccount1 OR from:ExampleAccount1 OR from:ExampleAccount1\nmin_faves:250 -rt\", result_type: \"recent\").take(5).collect do |tweet|\n            begin\n              @client.fav(tweet)\n              @client.retweet(tweet)\n              sleep(2)\n            rescue\n              puts \"Already retweeted.\"\n              sleep(3)\n            end\n        end\n        puts \"one round completed.\"\n        sleep(120)\n      rescue\n        puts \"Something Happened\"\n        sleep(240)\n      end\n    end\n  end\n</code></pre>\n"}]