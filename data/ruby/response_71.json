[{"tags": ["ruby-on-rails", "ruby", "sequel"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1463637340, "post_id": 37311559, "comment_id": 62150066, "body": "Blindly inserting stuff is simply insane. <b>Don&#39;t do it</b> even if you think your data is okay. When you <i>assume</i> you get into trouble."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1463669748, "post_id": 37314957, "comment_id": 62172931, "body": "Ladies and gentlemen, please raise your glasses in a toast to tadman, who just hit the century mark!"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1463700435, "post_id": 37314957, "comment_id": 62188893, "body": "This put it over the top. Thanks!"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 3, "last_activity_date": 1463637492, "creation_date": 1463637492, "answer_id": 37314957, "question_id": 37311559, "link": "https://stackoverflow.com/questions/37311559/avoiding-quotes-in-a-map-variable/37314957#37314957", "title": "Avoiding quotes in a map variable", "body": "<p>How to do this properly is listed on the <a href=\"http://sequel.jeremyevans.net/rdoc/files/doc/cheat_sheet_rdoc.html\" rel=\"nofollow\">cheat sheet</a>:</p>\n\n<pre><code>db[:pd_activities].insert(\n  id: activity['id'],\n  type: activity['type']\n)\n</code></pre>\n\n<p>This takes care of all the escaping issues for you. If all <code>activity</code> has is those two keys you might even be able to do this:</p>\n\n<pre><code>db[:pd_activities].insert(activity)\n</code></pre>\n"}], "owner": {"reputation": 316, "user_id": 1569540, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7bc6fd8ed3a49dc4b03d4ab0d43de2c7?s=128&d=identicon&r=PG", "display_name": "Julinho da Adelaide", "link": "https://stackoverflow.com/users/1569540/julinho-da-adelaide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 37314957, "answer_count": 1, "score": 2, "last_activity_date": 1463637492, "creation_date": 1463613434, "question_id": 37311559, "link": "https://stackoverflow.com/questions/37311559/avoiding-quotes-in-a-map-variable", "title": "Avoiding quotes in a map variable", "body": "<p>I'm trying to create a query with variables from a map function, but the content stored in one of these fields does contain <code>'</code> (quotes, like Barney's). So everytime it cracks since the <code>'</code> will break the statement. How can I get around it? \nI tried to use the <code>.split</code> function but no sucess.\nNo worries about SQL Injection since I'm just loading data from an API to my db.</p>\n\n<p>Code:</p>\n\n<pre><code>query_values = activities.map do |activity|\n  '(' +\n  \"#{activity['id']},\n  \"\"'#{activity['type']}\"\"'\" #using \"\"' just to fill the column when empty cells are raised\n  +')'\n\nend\nquery = \"INSERT INTO pd_activities  VALUES #{query_values.join(', ')}\"\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise"], "comments": [{"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 1, "creation_date": 1463613495, "post_id": 37311531, "comment_id": 62144020, "body": "You can access <code>current_user</code> from <code>ClientsController</code> as well."}, {"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "edited": false, "score": 2, "creation_date": 1463614524, "post_id": 37311531, "comment_id": 62144248, "body": "you don&#39;t have to do any of that stuff--you have access to current_user in all your views / controllers."}], "answers": [{"comments": [{"owner": {"reputation": 449, "user_id": 1570144, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d6a09f8580a44103070ebb6b8872482c?s=128&d=identicon&r=PG", "display_name": "user1570144", "link": "https://stackoverflow.com/users/1570144/user1570144"}, "edited": false, "score": 0, "creation_date": 1463616614, "post_id": 37311795, "comment_id": 62144754, "body": "I understand that. This is a special case. This is not a routed controller. It is more of a class that I use when I am making a call to another resource outside the application to a REST API service."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 449, "user_id": 1570144, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d6a09f8580a44103070ebb6b8872482c?s=128&d=identicon&r=PG", "display_name": "user1570144", "link": "https://stackoverflow.com/users/1570144/user1570144"}, "edited": false, "score": 0, "creation_date": 1463643630, "post_id": 37311795, "comment_id": 62153517, "body": "Then you want to make it a service object and pass it the the current user - don&#39;t make it inherit from ApplicationController. Controllers need to be passed a request and ENV to work. <a href=\"https://blog.engineyard.com/2014/keeping-your-rails-controllers-dry-with-services\" rel=\"nofollow noreferrer\">blog.engineyard.com/2014/&hellip;</a>"}, {"owner": {"reputation": 162, "user_id": 2472652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e92497a3219be93c27cf2a954d0a1fa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/2472652/kevin"}, "edited": false, "score": 0, "creation_date": 1463643651, "post_id": 37311795, "comment_id": 62153530, "body": "Did you try making this class a controller, but just don&#39;t have any routes to it?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1463643746, "post_id": 37311795, "comment_id": 62153594, "body": "And its not really a special case - you&#39;re just doing it wrong."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1463644772, "last_edit_date": 1463644772, "creation_date": 1463615136, "answer_id": 37311795, "question_id": 37311531, "link": "https://stackoverflow.com/questions/37311531/accessing-current-user-variable-in-another-controller/37311795#37311795", "title": "Accessing current_user variable in another controller", "body": "<p><code>current_user</code> is not a variable - it is a helper method. Thus it is allready available in all your helpers and views. </p>\n\n<p>Additionally you <strong>never</strong> instantiate controllers in Rails. The router does that for you.</p>\n\n<p>The only public methods in your controllers should be the actions which respond to HTTP requests.</p>\n\n<p>If you want to reuse a method in several controllers you should be using inheritance, modules (concerns) or helpers. Never by calling a method on another controller.</p>\n\n<hr>\n\n<p>To call an external service you want to create an API client class:</p>\n\n<pre><code># adapted from https://github.com/jnunemaker/httparty\nrequire 'httparty'\nclass StackExchangeClient\n  include HTTParty\n  base_uri 'api.stackexchange.com'\n\n  def initialize(service, page, user = nil)\n    @user = user\n    @options = { query: {site: service, page: page} }\n  end\n\n  def questions\n    self.class.get(\"/2.2/questions\", @options)\n  end\n\n  def users\n    self.class.get(\"/2.2/users\", @options)\n  end\nend\n</code></pre>\n\n<p>Or if you need to call an external service and for example create several models with the data a Service Object:</p>\n\n<pre><code>class SomeService\n  def initialize(user, client: SomeClient)\n    @user = user\n    @client = client # for mocking\n  end\n\n  def call\n     response = @client.get('/foo')\n     response.each do |d|\n        @user.baz &lt;&lt; d[:woo]\n     end\n  end\nend\n\nSomeService.new(current_user).call\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 449, "user_id": 1570144, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d6a09f8580a44103070ebb6b8872482c?s=128&d=identicon&r=PG", "display_name": "user1570144", "link": "https://stackoverflow.com/users/1570144/user1570144"}, "is_accepted": false, "score": 0, "last_activity_date": 1463647581, "creation_date": 1463647581, "answer_id": 37318214, "question_id": 37311531, "link": "https://stackoverflow.com/questions/37311531/accessing-current-user-variable-in-another-controller/37318214#37318214", "title": "Accessing current_user variable in another controller", "body": "<p>I solved this by moving my code into a Module in lib directory. Works like a charm</p>\n"}], "owner": {"reputation": 449, "user_id": 1570144, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d6a09f8580a44103070ebb6b8872482c?s=128&d=identicon&r=PG", "display_name": "user1570144", "link": "https://stackoverflow.com/users/1570144/user1570144"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 577, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1463647581, "creation_date": 1463613258, "question_id": 37311531, "link": "https://stackoverflow.com/questions/37311531/accessing-current-user-variable-in-another-controller", "title": "Accessing current_user variable in another controller", "body": "<p>I am trying to access Devise's current_user variable inside a new instance of another controller. Here is my definition of GetsInterfaceController </p>\n\n<pre><code>class GetsInterfaceController &lt; ApplicationController\n  def select_current_signed_in_user\n   @signed_in_user_here = current_user\n  end\nend\n</code></pre>\n\n<p>Then I instantiate a new instance of GetsInterfaceController in ClientsController</p>\n\n<pre><code>class ClientsController &lt; ApplicationController\n  def get_current_user\n    @gets_interface_controller = GetsInterfaceController.new\n    find_signed_in_user = @gets_interface_controller.select_current_signed_in_user\n  end\nend\n</code></pre>\n\n<p>But I get null error on the @signed_in_user_here = current_user line in GetsInterfaceController when I try this. Anyway to get to the current_user attribute from inside GetsInterfaceController ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "intellij-idea"], "comments": [{"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1463610800, "post_id": 37311131, "comment_id": 62143274, "body": "Did you try RubyMine? It does not have community edition though ("}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1463611373, "post_id": 37311131, "comment_id": 62143428, "body": "RubyMine is just a stripped down IDEA with the Ruby plugin pre-installed."}], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": false, "score": 0, "last_activity_date": 1464857435, "creation_date": 1464857435, "answer_id": 37586976, "question_id": 37311131, "link": "https://stackoverflow.com/questions/37311131/ruby-on-rails-plugin-intellij-idea/37586976#37586976", "title": "Ruby on rails plugin - Intellij idea", "body": "<p>Ruby development is only supported in IntelliJ IDEA Ultimate, not in the Community Edition.</p>\n"}], "owner": {"reputation": 23, "user_id": 3641796, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/100004709113484/picture?type=large", "display_name": "Collin H.", "link": "https://stackoverflow.com/users/3641796/collin-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 741, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1464857435, "creation_date": 1463610594, "question_id": 37311131, "link": "https://stackoverflow.com/questions/37311131/ruby-on-rails-plugin-intellij-idea", "title": "Ruby on rails plugin - Intellij idea", "body": "<p>So, I\"m using intellij idea community addition for ruby on rails development. I installed intellij, ruby, etc. on my computer. However, when I try to install the ruby on rails plugin in intellij after clicking on opening the plugin manager and clicking \"install intellij plugins\" there is no plugin from the list which is called \"ruby plugin.\" I tried several of the plugins from this website :<a href=\"https://plugins.jetbrains.com/plugin/1293?pr=\" rel=\"nofollow\">https://plugins.jetbrains.com/plugin/1293?pr=</a> \n....selecting the \"install from disk\" option. None of them worked.\nhelp please.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redcarpet"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5880405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7000f184c4e1cd42fa5493359e30eed9?s=128&d=identicon&r=PG&f=1", "display_name": "D. v. Baboon", "link": "https://stackoverflow.com/users/5880405/d-v-baboon"}, "edited": false, "score": 0, "creation_date": 1463617529, "post_id": 37311277, "comment_id": 62144955, "body": "Thanks for the answer, but it doesn&#39;t seem to work for me. The output is now all the html elements in text form, the images do not get rendered."}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "reply_to_user": {"reputation": 53, "user_id": 5880405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7000f184c4e1cd42fa5493359e30eed9?s=128&d=identicon&r=PG&f=1", "display_name": "D. v. Baboon", "link": "https://stackoverflow.com/users/5880405/d-v-baboon"}, "edited": false, "score": 0, "creation_date": 1463697221, "post_id": 37311277, "comment_id": 62188019, "body": "I updated the answer, and this is going to be much better for what you&#39;re trying to do.  Please do let me know if you have any questions."}], "tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": false, "score": 1, "last_activity_date": 1465429838, "last_edit_date": 1465429838, "creation_date": 1463611581, "answer_id": 37311277, "question_id": 37311061, "link": "https://stackoverflow.com/questions/37311061/markdown-external-image-links-with-redcarpet/37311277#37311277", "title": "Markdown external image links with Redcarpet", "body": "<p>Something like this:</p>\n\n<pre><code>require \"redcarpet\"\nrequire \"action_view\"\n\nclass HTMLBlockCode &lt; Redcarpet::Render::HTML\n  include ActionView::Helpers::AssetTagHelper\n\n  def image(link, title, alt_text)\n    image_tag(link, title: title, alt: alt_text, width: \"100%\")\n  end\nend\n\ndef markdown(text)\n   renderer = HTMLBlockCode.new\n   text.gsub!(/(https?:\\/\\/[\\S]*.jpg)/, '![](\\1)')\n   markdown = Redcarpet::Markdown.new(renderer)\n   markdown.render(text)\nend\n\ntext = File.read(\"rc_test.md\")\n\nputs markdown(text)\n</code></pre>\n\n<p>This installs a custom image renderer on RedCarpet, which adds a <code>width=\"100%\"</code> attribute to your image elements.  It also converts bare image links to markdown-recognized image links in the <code>gsub</code> call.  This results in an embedded image url being rendered like this:</p>\n\n<pre><code>&lt;img width=\"100%\" src=\"http://www.gettyimages.pt/gi-resources/images/Homepage/Hero/PT/PT_hero_42_153645159.jpg\" /&gt;\n</code></pre>\n\n<p>And you don't have to change your markdown document in any way; it's automagically delicious.</p>\n"}], "owner": {"reputation": 53, "user_id": 5880405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7000f184c4e1cd42fa5493359e30eed9?s=128&d=identicon&r=PG&f=1", "display_name": "D. v. Baboon", "link": "https://stackoverflow.com/users/5880405/d-v-baboon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 969, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1476227285, "creation_date": 1463610185, "last_edit_date": 1476227285, "question_id": 37311061, "link": "https://stackoverflow.com/questions/37311061/markdown-external-image-links-with-redcarpet", "title": "Markdown external image links with Redcarpet", "body": "<p>I am using the redcarpet gem to markdown user generated text and would like to show images of external links/image hosts.  So far, I have tried something like this:</p>\n\n<pre><code>def markdown(text)\n   options = { ... }\n   extension = { ... }\n   text.gsub!(/(https?:\\/\\/[\\S]*.jpg)/, '&lt;img src=\"\\1\" width=\"100%\"&gt;')\n   renderer = Redcarpet::Render::HTML.new(options)\n   markdown = Redcarpet::Markdown.new(renderer, extensions)\n   markdown.render(text).html_safe\nend\n</code></pre>\n\n<p>However, I would like to <code>escape_html</code> or <code>filter_html</code>, because injecting <code>&lt;/div&gt;</code>, <code>id</code>s, and classes can really mess up the site.  This would remove the image tag.</p>\n\n<p>Is there any better way to go about rendering external images while keeping the HTML safe?</p>\n"}, {"tags": ["ruby", "methods", "module"], "comments": [{"owner": {"reputation": 25, "user_id": 5132362, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003905964181/picture?type=large", "display_name": "Felipe Araujo", "link": "https://stackoverflow.com/users/5132362/felipe-araujo"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1463611972, "post_id": 37310908, "comment_id": 62143584, "body": "@CarySwoveland Got it, I will consider your advise. Thank you for your feedback."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5132362, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003905964181/picture?type=large", "display_name": "Felipe Araujo", "link": "https://stackoverflow.com/users/5132362/felipe-araujo"}, "edited": false, "score": 0, "creation_date": 1463610808, "post_id": 37311088, "comment_id": 62143277, "body": "That&#39;s all I needed, thanks for the explanation and the fast response!"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1463611454, "post_id": 37311088, "comment_id": 62143450, "body": "Methods defined on the top-level are not defined within the <code>main</code> object. They are defined as private instance methods of <code>Object</code>."}], "tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": true, "score": 0, "last_activity_date": 1463610337, "creation_date": 1463610337, "answer_id": 37311088, "question_id": 37310908, "link": "https://stackoverflow.com/questions/37310908/module-vs-methods-outside-module/37311088#37311088", "title": "Module vs methods outside module", "body": "<p>Modules allow you group your methods and you can include them in other modules and classes. You can include module methods into the module/class itself or its eigenclass. So, with modules you have more flexibility. Not to mention that you are not cluttering up the \"global\" namespace.</p>\n\n<p>Also, when you define method in a file, you are defining it in the current context. Since, everything in Ruby is an object, you are actually defining it within a <code>main</code> object (an instance of <code>Object</code> class).</p>\n\n<pre><code>2.3.0 :001 &gt; self\n =&gt; main \n2.3.0 :002 &gt; self.class\n =&gt; Object \n2.3.0 :003 &gt; self.object_id\n =&gt; 70123533022000 \n2.3.0 :004 &gt; def test; end;\n2.3.0 :005 &gt; self.public_methods.include? :test\n =&gt; true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1463622473, "last_edit_date": 1463622473, "creation_date": 1463621939, "answer_id": 37312593, "question_id": 37310908, "link": "https://stackoverflow.com/questions/37310908/module-vs-methods-outside-module/37312593#37312593", "title": "Module vs methods outside module", "body": "<p>Let's find out.</p>\n\n<pre><code>module M\n  def a; end\nend\n\nFile.write(\"temp.rb\", \"def b\\nputs 'hi'\\nend\") #=&gt; 19\nrequire_relative 'temp.rb'\n\nclass C\n  include M\nend\n\nC.instance_methods &amp; [:a, :b]                  #=&gt; [:a] \nC.private_instance_methods &amp; [:a, :b]          #=&gt; [:b] \nC.instance_method(:b).owner                    #=&gt; Object \n\nObject.instance_methods.include? :b            #=&gt; false \nObject.private_instance_methods.include? :b    #=&gt; true \n\nObject.send(:public, :b)                       #=&gt; Object \nObject.instance_methods.include? :b            #=&gt; true \nObject.private_instance_methods.include? :b    #=&gt; false\n\nC.instance_methods &amp; [:a, :b]                  #=&gt; [:a, :b] \nC.private_instance_methods &amp; [:a, :b]          #=&gt; [] \nC.new.b                                        #=&gt; hi\n</code></pre>\n\n<p>The results are the same if we write:</p>\n\n<pre><code>class C\n  include M\n  require_relative 'temp.rb'\nend\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5132362, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003905964181/picture?type=large", "display_name": "Felipe Araujo", "link": "https://stackoverflow.com/users/5132362/felipe-araujo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "accepted_answer_id": 37311088, "answer_count": 2, "score": 0, "last_activity_date": 1463622473, "creation_date": 1463609318, "last_edit_date": 1463621229, "question_id": 37310908, "link": "https://stackoverflow.com/questions/37310908/module-vs-methods-outside-module", "title": "Module vs methods outside module", "body": "<p>I would like to know what the difference is between using a module with methods inside it and using a simple file with many methods without creating a module, like the example below:</p>\n\n<pre><code>def doStuff\n  puts 'test';\nend\n\nmodule Example\n  def self.doStuff\n    puts 'test';\n  end\nend\n</code></pre>\n\n<p>I could require both files and use the methods inside one. I want to know why I should create a module instead of having just a bunch of methods inside a <code>.rb</code> file.</p>\n"}, {"tags": ["ruby", "bash"], "comments": [{"owner": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 0, "creation_date": 1463608249, "post_id": 37310653, "comment_id": 62142363, "body": "Looks like you defined a function <code>greeting()</code> but never called it.  Add <code>greeting()</code> to the end of the script, and you should get output."}, {"owner": {"reputation": 11, "user_id": 5947925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rBmL6.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/5947925/sean"}, "reply_to_user": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 0, "creation_date": 1463608326, "post_id": 37310653, "comment_id": 62142394, "body": "Works! Thanks Michael!"}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 1, "creation_date": 1463632827, "post_id": 37310653, "comment_id": 62148575, "body": "To run a Ruby script from your shell, you need to 1) insert <code>#!&#47;usr&#47;bin&#47;env ruby</code> as the first line, 2) change the file&#39;s permission to include executable (<code>chmod +x greeting.rb</code>), and 3) include the directory when you run it (<code>.&#47;greeting.rb</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5947925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rBmL6.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/5947925/sean"}, "edited": false, "score": 0, "creation_date": 1463609882, "post_id": 37310714, "comment_id": 62142963, "body": "just to clarify. those following the call statement at the end &quot;ARGV.shift,&quot; and &quot;ARGV&quot; work as filters for the arguments feeding into the method? Thank you!"}, {"owner": {"reputation": 2134, "user_id": 2141391, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/89ac403a5be7d6a57405337f5d809b41?s=128&d=identicon&r=PG", "display_name": "user108471", "link": "https://stackoverflow.com/users/2141391/user108471"}, "reply_to_user": {"reputation": 11, "user_id": 5947925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rBmL6.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/5947925/sean"}, "edited": false, "score": 0, "creation_date": 1463666359, "post_id": 37310714, "comment_id": 62170185, "body": "@Sean Something like that. Basically it sets <code>greeting</code> in the method to the value of <code>ARGV.shift</code> (the first argument to the script). Then it sets <code>name_list</code> to all the remaining values of <code>ARGV</code>. That way, inside the <code>greet_list</code> function, you don&#39;t have to include that extra line <code>greeting = ARGV.shift</code>; it&#39;s already taken care of for you."}], "tags": [], "owner": {"reputation": 2134, "user_id": 2141391, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/89ac403a5be7d6a57405337f5d809b41?s=128&d=identicon&r=PG", "display_name": "user108471", "link": "https://stackoverflow.com/users/2141391/user108471"}, "is_accepted": false, "score": 4, "last_activity_date": 1463608718, "last_edit_date": 1463608718, "creation_date": 1463608364, "answer_id": 37310714, "question_id": 37310653, "link": "https://stackoverflow.com/questions/37310653/why-my-rb-script-isnt-putting-to-bash/37310714#37310714", "title": "why my .rb script isn&#39;t putting to bash?", "body": "<p>Remove the function definition logic and just include the contents at the top-level if this is all you want your script to do:</p>\n\n<pre><code>greeting = ARGV.shift\nARGV.each do |arg|\n  puts \"#{greeting}, #{arg}!\"\nend\n</code></pre>\n\n<p>If you want to continue with defining a general-purpose function for greeting a list of names, you may also do so by calling <code>greeting</code> and passing it the contents of <code>ARGV</code>, as in the following:</p>\n\n<pre><code>def greeting(args)\n  greeting = args.shift\n  args.each do |arg|\n    puts \"#{greeting}, #{arg}!\"\n  end\nend\ngreeting ARGV\n</code></pre>\n\n<p>But in general, it's a nicer function if its arguments are more meaningful, so consider doing something like this:</p>\n\n<pre><code>def greet_list(greeting, name_list)\n  name_list.each do |arg|\n    puts \"#{greeting}, #{arg}!\"\n  end\nend\ngreet_list ARGV.shift, ARGV\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5947925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rBmL6.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/5947925/sean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1487983431, "creation_date": 1463608080, "last_edit_date": 1487983431, "question_id": 37310653, "link": "https://stackoverflow.com/questions/37310653/why-my-rb-script-isnt-putting-to-bash", "title": "why my .rb script isn&#39;t putting to bash?", "body": "<p>I've got a simple code for a class. It's:</p>\n\n<pre><code>def greeting\n greeting = ARGV.shift\n  ARGV.each do |arg|\n     p \"#{greeting}, #{arg}!\"\n     end\n  end\n</code></pre>\n\n<p>My desire is for it to simply output \"Hello, Charlie!\" and \"Hello, Sam!\" based on the names stored in the array. However when I try to run the program in ruby it looks like I used a return statement.</p>\n\n<pre><code> address_bloc :&gt; ls\n address_bloc.rb greeting.rb     ruby\n argv_test.rb    models          spec\n\n address_bloc :&gt; greeting.rb Yo Tommy Bob Sally\n -bash: greeting.rb: command not found\n\n address_bloc :&gt; ruby greeting.rb Yo Sam Sean Bill\n\n address_bloc :&gt; ruby greeting.rb Yo Sam Sean Bill\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1463605722, "post_id": 37310038, "comment_id": 62141273, "body": "The parameter that&#39;s missing is <code>form_submission</code>, like it says in the message. It must be generated by simple_form. It looks to me from what you posted like it should be there, so I don&#39;t have an answer to your overall question."}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1463606199, "post_id": 37310038, "comment_id": 62141483, "body": "Please post the logs for this action, so that we can see what&#39;s being passed from your form to the controller action."}, {"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 1, "creation_date": 1463607073, "post_id": 37310038, "comment_id": 62141881, "body": "Your <code>invisible_captcha</code> is handling only <code>create</code> and not <code>case_study</code> action. Can that cause any problems? Also, you don&#39;t need to copy/paste your action code. You can simply set the needed url in your simple form using <code>url: form_submissions_path</code> option."}], "owner": {"reputation": 1440, "user_id": 4282529, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/dW8oZ.jpg?s=128&g=1", "display_name": "kdweber89", "link": "https://stackoverflow.com/users/4282529/kdweber89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1463605275, "creation_date": 1463605275, "question_id": 37310038, "link": "https://stackoverflow.com/questions/37310038/using-two-partials-in-a-simple-form-params-is-missing-or-the-value-is-empty", "title": "Using two partials in a simple form, params is missing or the value is empty", "body": "<p>I have a form that I created using the simple form gem. I created it as a partial and then rendered this partial in my view. However I needed to essentially use the form again in another area of my app.  but unfortunately with the different styling requirements, I wasn't able to us the exact form partial. So I wound up creating a new one, with the only difference having some different stylings associated with it. </p>\n\n<p>However by doing this, the problem happens that I have is that I had to use the same method in my controller as create, which has given me an error stating, <code>pram is missing or the value is empty:form_submission</code></p>\n\n<p>Ultimately, i don't know what param I have that is missing, or I have no way of knowing if the value is empty or not. </p>\n\n<p>Here is my controller. As you can see both <code>create</code> and <code>case_study</code> are identical. </p>\n\n<pre><code>class FormSubmissionsController &lt; ApplicationController\n  invisible_captcha only: [:create], on_spam: :handle_spam\n\n  def new\n    @form_submission ||= FormSubmission.new\n  end\n\n  def create\n    @form_submission = FormSubmission.new(form_submission_params)\n\n    if @form_submission.save\n      redirect_to thank_you_path\n    else\n      render :new\n    end\n  end\n\n  def case_study\n    @form_submission = FormSubmission.new(form_submission_params)\n\n    if @form_submission.save\n      redirect_to thank_you_path\n    else\n      render :new\n    end\n  end\n\n  private\n\n    # Only allow a trusted parameter \"white list\" through.\n    def form_submission_params\n      params.require(:form_submission).permit(:first_name, :last_name, :organization, :email, :phone, :recognition, :inquiry)\n    end\nend\n</code></pre>\n\n<p>My view is called <code>case_study.html.haml</code> and I have my partial below</p>\n\n<pre><code>= simple_form_for @form_submission do |f|\n\n  .col-md-4.col-md-offset-2\n    .field.reco\n      = f.input :first_name, input_html: { class: \"formStyling\" }, label: \"First name\", required: false\n    .field.reco\n      = f.input :last_name, input_html: { class: \"formStyling\" }, label: \"Last name\", required: false\n    .field.reco\n      = f.input :phone, input_html: { class: \"formStyling\" }, label: \"Phone\", required: false\n    %br\n    %br\n    .col-xs-3.col-xs-offset-4\n      = f.submit 'Submit', class: \"btn btn-default\"\n</code></pre>\n"}, {"tags": ["ruby", "file-upload", "ruby-on-rails-2"], "comments": [{"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1463606643, "post_id": 37310014, "comment_id": 62141698, "body": "What is calling this function?  How is <code>request</code> acquired?  Please post code that shows the origin and history of <code>request</code>.  The issue is going to be an upstream misunderstanding."}, {"owner": {"reputation": 7688, "user_id": 929701, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/HZnD7.jpg?s=128&g=1", "display_name": "hrishikeshp19", "link": "https://stackoverflow.com/users/929701/hrishikeshp19"}, "reply_to_user": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1463607177, "post_id": 37310014, "comment_id": 62141932, "body": "updated with more details"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1463612748, "post_id": 37310014, "comment_id": 62143827, "body": "OK, next 2 questions: 1) at 130 bytes, what does <code>request.body</code> contain, exactly? and 2) what do the logs for the action look like?"}, {"owner": {"reputation": 7688, "user_id": 929701, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/HZnD7.jpg?s=128&g=1", "display_name": "hrishikeshp19", "link": "https://stackoverflow.com/users/929701/hrishikeshp19"}, "reply_to_user": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1463615785, "post_id": 37310014, "comment_id": 62144559, "body": "It contains post params. such as &quot;a=x&amp;b=y&amp;c=z&quot; but not the file contents. I am posting file to the api and its not a multipart request."}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1463616391, "post_id": 37310014, "comment_id": 62144702, "body": "What does the code look like that&#39;s posting the file?  And, can you show the (redacted) HTTP headers for the API request?"}], "answers": [{"tags": [], "owner": {"reputation": 454, "user_id": 3016551, "user_type": "registered", "profile_image": "https://graph.facebook.com/1063850752/picture?type=large", "display_name": "nvugteveen", "link": "https://stackoverflow.com/users/3016551/nvugteveen"}, "is_accepted": true, "score": 0, "last_activity_date": 1476886058, "creation_date": 1476886058, "answer_id": 40133730, "question_id": 37310014, "link": "https://stackoverflow.com/questions/37310014/rails-2-read-file-from-http-post-body/40133730#40133730", "title": "rails 2 read file from http post body", "body": "<p>In Rails 2 you may have to use <code>request.raw_post</code>. Does that help?</p>\n"}], "owner": {"reputation": 7688, "user_id": 929701, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/HZnD7.jpg?s=128&g=1", "display_name": "hrishikeshp19", "link": "https://stackoverflow.com/users/929701/hrishikeshp19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 926, "favorite_count": 0, "accepted_answer_id": 40133730, "answer_count": 1, "score": 0, "last_activity_date": 1476886058, "creation_date": 1463605200, "last_edit_date": 1463620232, "question_id": 37310014, "link": "https://stackoverflow.com/questions/37310014/rails-2-read-file-from-http-post-body", "title": "rails 2 read file from http post body", "body": "<p>I am using rails 2 and I am trying to read a file from http post request body.</p>\n\n<pre><code>  def get_file_from_request(request, file_name)\n    file = Tempfile.new([File.basename(file_name, \".*\"), File.extname(file_name)])\n    Rails.logger.info \"#{request.body.size}\" # returns 130\n    file.write(request.body.read)\n    file\n  end\n</code></pre>\n\n<p>If I do </p>\n\n<blockquote>\n  <p>request.inspect</p>\n</blockquote>\n\n<p>I get following:</p>\n\n<pre><code>...\n\"rack.version\"=&gt;[1, 2], \"rack.input\"=&gt;#&lt;PhusionPassenger::Utils::TeeInput:0x0000000d3a6148 @len=130, @socket=nil, @bytes_read=130, @tmp=#&lt;StringIO:0x0000000d3a60d0&gt;&gt;, \"rack.errors\"=&gt;#&lt;IO:&lt;STDERR&gt;&gt;, \"rack.multithread\"=&gt;false, \"rack.multiprocess\"=&gt;true, \"rack.run_once\"=&gt;false, \"rack.url_scheme\"=&gt;\"http\", \"rack.hijack?\"=&gt;true, \"rack.hijack\"=&gt;#&lt;Proc:0x0000000d3a5ec8@/data/rbenv/.rbenv/versions/1.9.3-p550/lib/ruby/gems/1.9.1/gems/passenger-4.0.42/lib/phusion_passenger/rack/thread_handler_extension.rb:69 (lambda)&gt;,\n...\n</code></pre>\n\n<p>Are there any obvious problems with my approach?</p>\n\n<p>Can someone help me with extracting files from request body? The file is definitely not 130 bytes. Its is like 3 MB.</p>\n\n<p>EDIT: Here is the controller class</p>\n\n<pre><code>class Api::PhotosController &lt; Api::BaseController\n  before_filter :verify_session, :except =&gt; [:new, :show_image]\n\n  def create\n    Rails.logger.info \"upload photo request: params=#{params.inspect}, request=#{request.inspect}\"\n...\n      file = get_file_from_request(request, params[:file_name])\n...\n  rescue =&gt; e\n    Rails.logger.info \"Could not upload photo: params=#{params.inspect}, exception=#{e.backtrace}\"\n    render_error(e)\n  end\n\nprivate\n\n      def get_file_from_request(request, file_name)\n        file = Tempfile.new([File.basename(file_name, \".*\"), File.extname(file_name)])\n        Rails.logger.info \"#{request.body.size}\" # returns 130\n        file.write(request.body.read)\n        file\n      end\nend\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "class", "object", "instance-variables"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 4471249, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/06f6917eb487f073a0ef25fa2b64206b?s=128&d=identicon&r=PG&f=1", "display_name": "JCD", "link": "https://stackoverflow.com/users/4471249/jcd"}, "edited": false, "score": 0, "creation_date": 1463607161, "post_id": 37310026, "comment_id": 62141927, "body": "Awesome thanks. Now what if I wanted to match it up against objects? Say I have several different objects with diff it account numbers and I wanted the one object account that matched with what account number the user inputs?"}, {"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "reply_to_user": {"reputation": 69, "user_id": 4471249, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/06f6917eb487f073a0ef25fa2b64206b?s=128&d=identicon&r=PG&f=1", "display_name": "JCD", "link": "https://stackoverflow.com/users/4471249/jcd"}, "edited": false, "score": 1, "creation_date": 1463607315, "post_id": 37310026, "comment_id": 62142005, "body": "You would probably want to use <a href=\"http://ruby-doc.org/core/Hash.html\" rel=\"nofollow noreferrer\"><code>Hash</code></a> instead. The account number would be a key and the actual account the value."}, {"owner": {"reputation": 69, "user_id": 4471249, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/06f6917eb487f073a0ef25fa2b64206b?s=128&d=identicon&r=PG&f=1", "display_name": "JCD", "link": "https://stackoverflow.com/users/4471249/jcd"}, "edited": false, "score": 0, "creation_date": 1463608729, "post_id": 37310026, "comment_id": 62142555, "body": "I thinking that as well. I went ahead made it a hash, so same question as before only how do I access the Hash within the array, specifically the :account_number value?"}, {"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "reply_to_user": {"reputation": 69, "user_id": 4471249, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/06f6917eb487f073a0ef25fa2b64206b?s=128&d=identicon&r=PG&f=1", "display_name": "JCD", "link": "https://stackoverflow.com/users/4471249/jcd"}, "edited": false, "score": 2, "creation_date": 1463608861, "post_id": 37310026, "comment_id": 62142613, "body": "No, I meant throw away your array and use hash instead. <code>@accounts[account_number] = AccountMaker.new(account_number, name, balance, pin)</code>. When you want to check if there is an account with this account number: <code>if(@accounts[account_number_input]) ... else ...</code>."}], "tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": true, "score": 2, "last_activity_date": 1463605244, "creation_date": 1463605244, "answer_id": 37310026, "question_id": 37309943, "link": "https://stackoverflow.com/questions/37309943/accessing-an-objects-instance-variable-from-an-array/37310026#37310026", "title": "Accessing an object&#39;s instance variable from an array", "body": "<p><code>accounts</code> is an array. So you have to access one of its elements' <code>account_number</code> instance variable. For example the first element's:</p>\n\n<pre><code># accounts[0] would return an instance of `AccountMaker `\naccounts[0].instance_variable_get(:account_number)\n</code></pre>\n\n<p>Also, you don't need to use <code>instance_variable_get</code>, since you already declared it as accessor. So, you can just call <code>account_number</code> method on it.</p>\n\n<pre><code>accounts[0].account_number\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 4471249, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/06f6917eb487f073a0ef25fa2b64206b?s=128&d=identicon&r=PG&f=1", "display_name": "JCD", "link": "https://stackoverflow.com/users/4471249/jcd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 37310026, "answer_count": 1, "score": 0, "last_activity_date": 1463605244, "creation_date": 1463604897, "question_id": 37309943, "link": "https://stackoverflow.com/questions/37309943/accessing-an-objects-instance-variable-from-an-array", "title": "Accessing an object&#39;s instance variable from an array", "body": "<p>Teaching myself Ruby so please bear with me. If I create an object with several defining attributes and push this object into an array how do I access one of those attributes in another method to use it in a control flow scheme? I'm making a banking ATM program for fun. My code is below...</p>\n\n<pre><code>class Bank\n\n\n    class AccountMaker\n        attr_accessor :account_number, :name, :balance, :pin\n\n        def initialize(account_number, name, balance, pin)\n            @account_number = account_number\n            @name = name\n            @balance = balance\n            @pin = pin\n        end\n    end\n\n    def initialize\n        @accounts = []\n    end\n\n    def add_account(account_number, name, balance, pin)\n        account = AccountMaker.new(account_number, name, balance, pin)\n        @accounts &lt;&lt; account\n    end\n\n    def login_screen(accounts)\n\n        def account_number_login(accounts)\n            puts \"Please enter your 7 digit account number.\"\n            account_number_input = gets.chomp \n            puts accounts.instance_variable_get(:account_number)\n\n            if (/^\\d{7}$/ === account_number_input) and (account_number_input === (what should go here) )\n                thank_you_msg()\n                pin_login(account_number_input)\n            else \n                error_msg()\n                account_number_login()\n            end\n        end\n</code></pre>\n\n<p>I have more code after this but its not pertinent to the question. Essentially I want to extract from the accounts array :account_number and use it in the if statement within the Login_screen function to see if the account actually exists. Any and all help would be appreciated.</p>\n"}, {"tags": ["ruby", "unit-testing", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 377, "user_id": 1388651, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1505156159/picture?type=large", "display_name": "SalceCodec", "link": "https://stackoverflow.com/users/1388651/salcecodec"}, "edited": false, "score": 0, "creation_date": 1463606332, "post_id": 37310219, "comment_id": 62141547, "body": "Thank you! Worked like a charm. Will keep in mind for next time."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 1, "creation_date": 1463632490, "post_id": 37310219, "comment_id": 62148486, "body": "If @Uzbekjon answered your question, please accept his answer by clicking the check icon.  See <a href=\"http://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\" title=\"how does accepting an answer work\">meta.stackexchange.com/questions/5234/&hellip;</a> for more information."}, {"owner": {"reputation": 1312, "user_id": 2280562, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/3a1ecbfd6f642d6f18eaa9a51edbed89?s=128&d=identicon&r=PG", "display_name": "Sebastian Corneliu V&#238;rlan", "link": "https://stackoverflow.com/users/2280562/sebastian-corneliu-v%c3%aerlan"}, "edited": false, "score": 0, "creation_date": 1527009167, "post_id": 37310219, "comment_id": 87959916, "body": "This solution works, but if you have multiple tests with different stdout output, the output from the first test interfere with the one from the second."}], "tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": true, "score": 7, "last_activity_date": 1463606128, "creation_date": 1463606128, "answer_id": 37310219, "question_id": 37309874, "link": "https://stackoverflow.com/questions/37309874/capturing-stdout-in-rspec/37310219#37310219", "title": "Capturing STDOUT in RSpec", "body": "<p>Your <code>puts</code> method is called when you included the <code>my_file.rb</code> right at the top, before your tests have run. Include it within your test.</p>\n\n<pre><code>describe \"Something I'm Testing\" do\n  it 'should print Welcome to the Book Club!' do\n     expect { require_relative 'my_file.rb' }.to output(\"Welcome to the Book Club!\\n\").to_stdout\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 377, "user_id": 1388651, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1505156159/picture?type=large", "display_name": "SalceCodec", "link": "https://stackoverflow.com/users/1388651/salcecodec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3295, "favorite_count": 0, "accepted_answer_id": 37310219, "answer_count": 1, "score": 4, "last_activity_date": 1463606128, "creation_date": 1463604609, "last_edit_date": 1495540406, "question_id": 37309874, "link": "https://stackoverflow.com/questions/37309874/capturing-stdout-in-rspec", "title": "Capturing STDOUT in RSpec", "body": "<p>I'm new to unit testing in Ruby and I'm having some trouble creating a spec that will check for STDOUT. I know how to test STDOUT if the code I'm testing is within a Class/Method, but I want to just test a <code>puts</code> statement coming from a regular Ruby file that's not within a Class or Method. </p>\n\n<p>Here is the simple one liner from <code>my_file.rb</code></p>\n\n<pre><code>puts \"Welcome to the Book Club!\"\n</code></pre>\n\n<p>Here's the spec</p>\n\n<p><code>my_spec.rb</code></p>\n\n<pre><code>require_relative 'my_file.rb'\n\n  describe \"Something I'm Testing\" do\n    it 'should print Welcome to the Book Club!' do\n\n        expect {$stdout}.to output(\"Welcome to the Book Club!\\n\").to_stdout\n\n      end\n    end\n</code></pre>\n\n<p>I get the following error message:</p>\n\n<pre><code>Failures:\n\n  1) Something I'm Testing should print Welcome to the Book Club!\n     Failure/Error: expect {$stdout}.to output(\"Welcome to the Book Club!\\n\").to_stdout\n\n       expected block to output \"Welcome to the Book Club!\\n\" to stdout, but output nothing\n       Diff:\n       @@ -1,2 +1 @@\n       -Welcome to the Book Club!\n       # ./spec/my_spec.rb:9:in `block (2 levels) in &lt;top (required)&gt;'\n\nFinished in 0.01663 seconds (files took 0.08195 seconds to load)\n1 example, 1 failure\n\nFailed examples:\n\nrspec ./spec/my_spec.rb:7 # Something I'm Testing should print Welcome to the Book Club!\n</code></pre>\n\n<p>I thought I can just use <code>$stdout</code> to capture the STDOUT from <code>my_file.rb</code> but that didn't work. The output keeps saying its nothing. I found this post that speaks about capturing output via <code>StringIO</code> <a href=\"https://stackoverflow.com/questions/16507067/testing-stdout-output-in-rspec\">Testing STDOUT output in Rspec</a></p>\n\n<p>But that method didn't work for me. What am I doing wrong?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "api", "project", "asana"], "answers": [{"tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": false, "score": 0, "last_activity_date": 1463606614, "creation_date": 1463606614, "answer_id": 37310334, "question_id": 37309565, "link": "https://stackoverflow.com/questions/37309565/get-asana-projects-using-ruby/37310334#37310334", "title": "Get Asana Projects using Ruby", "body": "<p>It looks like you want to output the values. Use <code>puts</code> if you want output it into your console.</p>\n\n<pre><code>puts \"\\t* #{workspace.name} - projects:\"\n</code></pre>\n\n<p>However, I noticed you are using <code>redirect \"/sign_in\"</code>. I assume you are using some kind of framework? Then, use your framework's output methods.</p>\n"}], "owner": {"reputation": 59, "user_id": 6311714, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ecdb8cd64edc9311ae05866d30f543b3?s=128&d=identicon&r=PG&f=1", "display_name": "hguza", "link": "https://stackoverflow.com/users/6311714/hguza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463606614, "creation_date": 1463603477, "question_id": 37309565, "link": "https://stackoverflow.com/questions/37309565/get-asana-projects-using-ruby", "title": "Get Asana Projects using Ruby", "body": "<p>I am currently trying to get the list of projects I have on my asana account and post them on a webpage. I have already set up my oauth in Ruby which works. I am having issues figuring out now how to call the asana API for the projects. Here is the code that I am currently using:</p>\n\n<p>get '/workspaces' do</p>\n\n<pre><code>if $client\n  \"&lt;h1&gt;Workspaces&lt;/h1&gt;\" \\\n    #u1 is an unordered html bulleted list; li defines the list item\n  $client.workspaces.find_all.each do |workspace|\n    get \"\\t* #{workspace.name} - projects:\"\n    $client.projects.find_by_workspace(workspace: workspace.id).each do |projects|\n      get \"\\t\\t- #{projects.name}\"\n      \"&lt;ul&gt;\" + $client.projects.find_all.map { |w| \"&lt;li&gt;#{w.name}&lt;/li&gt;\" }.join + \"&lt;/ul&gt;\"\n    end\n  end \nelse\n  redirect '/sign_in'\nend\n</code></pre>\n\n<p>end </p>\n\n<p>I am getting the error message :\nundefined method `get' for #</p>\n\n<pre><code>file: app.rb location: block (2 levels) in &lt;class:SinatraApp&gt; line: 42 \n</code></pre>\n\n<p>What other method should I be using other than get?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": false, "score": 2, "last_activity_date": 1463602280, "last_edit_date": 1592644375, "creation_date": 1463602280, "answer_id": 37309221, "question_id": 37309139, "link": "https://stackoverflow.com/questions/37309139/how-does-rails-route-know-model-errors/37309221#37309221", "title": "how does rails route know model errors", "body": "<blockquote>\n<p>... if there is an error in saving a new article, I should render 'new', which <strong>hits the new route</strong>, and renders the form again so I can resubmit after fixing errors.</p>\n<p>... I'm confused because the new route creates a new Article object and sends it to the view, how are errors preserved?</p>\n</blockquote>\n<p>Here is where you are making an incorrect assumption. <code>render 'new'</code> does not redirect the user to <code>your_controller/new</code> URI. It simply renders <code>new.html.erb</code> view. That's why the <code>new</code> page will have the current instance variables in your controller.</p>\n"}, {"comments": [{"owner": {"reputation": 8194, "user_id": 2939522, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3bd19d576c9c16df4826f16f9503c03d?s=128&d=identicon&r=PG&f=1", "display_name": "duxfox--", "link": "https://stackoverflow.com/users/2939522/duxfox"}, "edited": false, "score": 0, "creation_date": 1463602597, "post_id": 37309289, "comment_id": 62139724, "body": "wait, Uzbekjon said it doesn&#39;t redirect to the article NEW action (which makes sense because it&#39;s &#39;render&#39; not &#39;redirect_to&#39;)... so which is the correct scenario?"}, {"owner": {"reputation": 689, "user_id": 4409186, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh3.googleusercontent.com/-M_x58hCBTVU/AAAAAAAAAAI/AAAAAAAAqJw/sdHmd03mFwc/photo.jpg?sz=128", "display_name": "erikdstock", "link": "https://stackoverflow.com/users/4409186/erikdstock"}, "reply_to_user": {"reputation": 8194, "user_id": 2939522, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3bd19d576c9c16df4826f16f9503c03d?s=128&d=identicon&r=PG&f=1", "display_name": "duxfox--", "link": "https://stackoverflow.com/users/2939522/duxfox"}, "edited": false, "score": 1, "creation_date": 1463602731, "post_id": 37309289, "comment_id": 62139793, "body": "sorry, i might have my render/redirect mixed up above. in general you should not <code>render</code> in anything except a GET request, so if you are CREATEing, PUTing, PATCHing or DELETE-ing, you should redirect to an appropriate GET resource"}, {"owner": {"reputation": 689, "user_id": 4409186, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh3.googleusercontent.com/-M_x58hCBTVU/AAAAAAAAAAI/AAAAAAAAqJw/sdHmd03mFwc/photo.jpg?sz=128", "display_name": "erikdstock", "link": "https://stackoverflow.com/users/4409186/erikdstock"}, "reply_to_user": {"reputation": 8194, "user_id": 2939522, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3bd19d576c9c16df4826f16f9503c03d?s=128&d=identicon&r=PG&f=1", "display_name": "duxfox--", "link": "https://stackoverflow.com/users/2939522/duxfox"}, "edited": false, "score": 0, "creation_date": 1463602897, "post_id": 37309289, "comment_id": 62139883, "body": "it&#39;s also important to remember that this entire controller is being instantiated for your request, so its internal objects (instance variables) can be acted upon- <code>redirect_to</code> is just a method with some extra rails magic thrown in."}], "tags": [], "owner": {"reputation": 689, "user_id": 4409186, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh3.googleusercontent.com/-M_x58hCBTVU/AAAAAAAAAAI/AAAAAAAAqJw/sdHmd03mFwc/photo.jpg?sz=128", "display_name": "erikdstock", "link": "https://stackoverflow.com/users/4409186/erikdstock"}, "is_accepted": true, "score": 3, "last_activity_date": 1463602475, "creation_date": 1463602475, "answer_id": 37309289, "question_id": 37309139, "link": "https://stackoverflow.com/questions/37309139/how-does-rails-route-know-model-errors/37309289#37309289", "title": "how does rails route know model errors", "body": "<p>When ActiveRecord's <code>save</code> method is called, it attempts a save with your datastore. a successful save will return the updated model/object itself (truthy). an unsuccessful save attempt will return false AND add an <code>errors</code> property to your object.</p>\n\n<p>Essentially you are saying</p>\n\n<pre><code>if the article saves successfully\n  redirect to the article's SHOW action (in rails router talk)\nelse\n  redirect to the article NEW action\n</code></pre>\n\n<p>in either case your @article instance variable will persist, but in one case it is sending you back a step with a handy <code>errors</code> array to work with.</p>\n"}], "owner": {"reputation": 8194, "user_id": 2939522, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3bd19d576c9c16df4826f16f9503c03d?s=128&d=identicon&r=PG&f=1", "display_name": "duxfox--", "link": "https://stackoverflow.com/users/2939522/duxfox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 37309289, "answer_count": 2, "score": 0, "last_activity_date": 1463602475, "creation_date": 1463601981, "question_id": 37309139, "link": "https://stackoverflow.com/questions/37309139/how-does-rails-route-know-model-errors", "title": "how does rails route know model errors", "body": "<p>I'm following <a href=\"http://guides.rubyonrails.org/getting_started.html#adding-links\" rel=\"nofollow\">this tutorial</a> to learn ruby on rails and they did the following in the controller:</p>\n\n<pre><code>def new\n  @article = Article.new\nend\n\ndef create\n  @article = Article.new(article_params)\n\n  if @article.save\n    redirect_to @article\n  else\n    render 'new' #&lt;--\n  end\nend\n</code></pre>\n\n<p>if you see the line where I have the arrow, the logic is, if there is an error in saving a new article, I should <code>render 'new'</code> (which hits the <code>new</code> route?) and renders the form again so I can resubmit after fixing errors. </p>\n\n<p>my question is, how does the new route know what the errors were? Is there something happening in the background that sends over the error when <code>@article.save</code> fails?</p>\n\n<p>I'm confused because the new route creates a new Article object and sends it to the view, how are errors preserved?</p>\n\n<p>here's the 'new' view:</p>\n\n<pre><code>&lt;h1&gt;\n    file thing add\n&lt;/h1&gt;\n&lt;%= link_to 'Back', articles_path %&gt;\n\n&lt;%= form_for :article, url: articles_path do |f| %&gt;\n\n  &lt;% if @article.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;\n        &lt;%= pluralize(@article.errors.count, \"error\") %&gt; prohibited\n        this article from being saved:\n      &lt;/h2&gt;\n      &lt;ul&gt;\n        &lt;% @article.errors.full_messages.each do |msg| %&gt;\n          &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;\n        &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;p&gt;\n    &lt;%= f.label :title %&gt;&lt;br&gt;\n    &lt;%= f.text_field :title %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= f.label :text %&gt;&lt;br&gt;\n    &lt;%= f.text_area :text %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 123, "user_id": 5418498, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1de6f18e6e282e520506840e296124d8?s=128&d=identicon&r=PG", "display_name": "user25959", "link": "https://stackoverflow.com/users/5418498/user25959"}, "edited": false, "score": 0, "creation_date": 1463601994, "post_id": 37309113, "comment_id": 62139421, "body": "Also just to add, I&#39;m not using the built in flatten method because it goes too deep: [[[3],[4],[5]],[9],[9],[8],[[1,2,3]]]) , [[3],[4],[5],9,9,8,[1,2,3]]"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1463602563, "post_id": 37309113, "comment_id": 62139709, "body": "Your link requires a sign in, could you post the exercise?"}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 5418498, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1de6f18e6e282e520506840e296124d8?s=128&d=identicon&r=PG", "display_name": "user25959", "link": "https://stackoverflow.com/users/5418498/user25959"}, "edited": false, "score": 0, "creation_date": 1463602157, "post_id": 37309133, "comment_id": 62139500, "body": "Thank you for both pieces of info!"}, {"owner": {"reputation": 8173, "user_id": 937841, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/063d92503c6d64c7a467d93b91f776b9?s=128&d=identicon&r=PG", "display_name": "BananaNeil", "link": "https://stackoverflow.com/users/937841/banananeil"}, "reply_to_user": {"reputation": 123, "user_id": 5418498, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1de6f18e6e282e520506840e296124d8?s=128&d=identicon&r=PG", "display_name": "user25959", "link": "https://stackoverflow.com/users/5418498/user25959"}, "edited": false, "score": 0, "creation_date": 1463603001, "post_id": 37309133, "comment_id": 62139938, "body": "@user25959 Be sure to mark the answer as correct if this answer worked for you."}, {"owner": {"reputation": 123, "user_id": 5418498, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1de6f18e6e282e520506840e296124d8?s=128&d=identicon&r=PG", "display_name": "user25959", "link": "https://stackoverflow.com/users/5418498/user25959"}, "edited": false, "score": 0, "creation_date": 1463609337, "post_id": 37309133, "comment_id": 62142772, "body": "Yes, absolutely. Stackoverflow made me wait 10+ minutes so I came back to it."}], "tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": true, "score": 3, "last_activity_date": 1463602951, "last_edit_date": 1463602951, "creation_date": 1463601969, "answer_id": 37309133, "question_id": 37309113, "link": "https://stackoverflow.com/questions/37309113/one-step-flattening-of-an-array-in-ruby/37309133#37309133", "title": "One-step flattening of an array in ruby", "body": "<p>You got an error cause you missed a <code>?</code> in ternary statement:</p>\n\n<pre><code>element.kind_of?(Array) ? result.concat(element) : result&lt;&lt;element\n</code></pre>\n\n<p>For your goal you can use <code>Array#flatten</code> with an argument:</p>\n\n<pre><code>array.flatten(1)\n[[1,2],3].flatten(1)\n=&gt; [1, 2, 3]\n[[1,[2]],3].flatten(1)\n=&gt; [1, [2], 3]\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 5418498, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1de6f18e6e282e520506840e296124d8?s=128&d=identicon&r=PG", "display_name": "user25959", "link": "https://stackoverflow.com/users/5418498/user25959"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 37309133, "answer_count": 1, "score": 1, "last_activity_date": 1463602951, "creation_date": 1463601901, "last_edit_date": 1463602724, "question_id": 37309113, "link": "https://stackoverflow.com/questions/37309113/one-step-flattening-of-an-array-in-ruby", "title": "One-step flattening of an array in ruby", "body": "<p>I am working out <a href=\"http://www.codewars.com/kata/flatten-1/ruby\" rel=\"nofollow\">this exercise</a> in codewars, which is to flatten an array (up to one-level deep) so for example, I want to get the outputs:</p>\n\n<pre><code>[1,2,3] &gt;&gt; [1,2,3]\n\n[[1,2],3] &gt;&gt; [1,2,3]\n\n[[1,[2]],3] &gt;&gt; [1,[2],3]\n</code></pre>\n\n<p>I decided to use \"inject\" - where the next element gets added to the running total if that element is an array, or just pushed if it is not:</p>\n\n<pre><code>def flatten(array)\n  array.inject([]) {|result,element| element.kind_of?(Array) result.concat(element) : result&lt;&lt;element}\nend\n</code></pre>\n\n<p>Could anyone help explain why I am getting the following syntax error?</p>\n\n<pre><code>-e:3: syntax error, unexpected tIDENTIFIER, expecting '}'\n... element.kind_of?(Array) result.concat(element) : result&lt;\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "cucumber", "calabash"], "answers": [{"tags": [], "owner": {"reputation": 2440, "user_id": 2047304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fcea18e8fa7f6f5016b38ac97be13f7?s=128&d=identicon&r=PG", "display_name": "jmoody", "link": "https://stackoverflow.com/users/2047304/jmoody"}, "is_accepted": false, "score": 0, "last_activity_date": 1464597557, "creation_date": 1464597557, "answer_id": 37521191, "question_id": 37308353, "link": "https://stackoverflow.com/questions/37308353/all-but-one-formatter-must-use-out-only-one-can-print-to-each-stream-or-stdo/37521191#37521191", "title": "All but one formatter must use --out, only one can print to each stream (or STDOUT) (RuntimeError)", "body": "<p>The problem is that you have more than one formatter defined.  Check your config/cucumber.yml or ./cucumber.yml file.  Look for defined formatters like --json or --html.  You should also check the version of cucumber you are using.  Recently, Calabash iOS and Android dropped the cucumber &lt; 2.0 requirement.  You might be experiencing a change between cucumber 1.x and cucumber 2.x.  If you want to force cucumber 1.x, use a Gemfile and bundle exec to enforce the change.</p>\n"}], "owner": {"reputation": 61, "user_id": 5959485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5be43b1121a01ec04162a3302d7dffbd?s=128&d=identicon&r=PG&f=1", "display_name": "chetan", "link": "https://stackoverflow.com/users/5959485/chetan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 618, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464597557, "creation_date": 1463599116, "question_id": 37308353, "link": "https://stackoverflow.com/questions/37308353/all-but-one-formatter-must-use-out-only-one-can-print-to-each-stream-or-stdo", "title": "All but one formatter must use --out, only one can print to each stream (or STDOUT) (RuntimeError)", "body": "<p>Getting the above error when trying to run a feature file. I updated the calabash cucumber to 0.18.2. Since then i am getting this issue. Can anyone help me with this?</p>\n"}, {"tags": ["ruby", "simd", "sha512"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1463598965, "post_id": 37307936, "comment_id": 62137801, "body": "You could write one in C. How man hashes are you intending to do here that this would matter?"}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 1, "creation_date": 1463599138, "post_id": 37307936, "comment_id": 62137892, "body": "Reference code: <a href=\"http://www.intel.co.uk/content/dam/www/public/us/en/documents/white-papers/fast-sha512-implementations-ia-processors-paper.pdf\" rel=\"nofollow noreferrer\">intel.co.uk/content/dam/www/public/us/en/documents/white-pap&zwnj;&#8203;ers/&hellip;</a>  - as far as I can see the Ruby library doesn&#39;t do it, but if it were to try this, it would need to be designed to work on a range of processors - it would be a lot of work to add the necessary conditionals, detectors for various &quot;levels&quot; of SIMD available etc."}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1463603909, "post_id": 37307936, "comment_id": 62140351, "body": "That code you linked to isn\u2019t necessarily used for the SHA implementation in the <code>digest</code> module. When Ruby is built it will check for OpenSSL (and Apple\u2019s CommonCrypto) and use one of those implementations if  available."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6324692"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1463610352, "post_id": 37307936, "comment_id": 62143139, "body": "@tadman, 8 hashes. and 8 more. and 8 more."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1463628567, "post_id": 37307936, "comment_id": 62147575, "body": "@Dimon Give me a number here. Billions? Quadrillions?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6324692"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1463635405, "post_id": 37307936, "comment_id": 62149354, "body": "@tadman, millions."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1463635458, "post_id": 37307936, "comment_id": 62149374, "body": "You don&#39;t need SIMD for millions. Amend your question with performance requirements and where you&#39;re at using the existing routines."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6324692"}, "reply_to_user": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1463635495, "post_id": 37307936, "comment_id": 62149387, "body": "@NeilSlater, why? 32 and x64, that&#39;s it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6324692"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1463635511, "post_id": 37307936, "comment_id": 62149396, "body": "@tadman, the question isn&#39;t whether I need it or not, but whether it exists or not, and if yes, where."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6324692"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1463636150, "post_id": 37307936, "comment_id": 62149602, "body": "@tadman, or rather, the current implementation of SHA512 is slow for my needs, I need a faster one."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1463637019, "post_id": 37307936, "comment_id": 62149921, "body": "Please, speak in terms of specifics. Can you produce a simple Ruby <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/benchmark/rdoc/Benchmark.html\" rel=\"nofollow noreferrer\">Benchmark test</a> that shows what your performance is right now and what level is acceptable for solving your problem? &quot;Too slow&quot; is a meaningless measure. If you need to write a faster one, you&#39;ll need this benchmark to prove that your work is actually doing something useful and not regressing in terms of performance."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1463638136, "post_id": 37307936, "comment_id": 62150393, "body": "Stay civil Dimon. I&#39;m asking a reasonable question here. If you insist on being difficult, I&#39;ll ask you a simple question, the Stack Overflow Golden Rule: <b>WHAT HAVE YOU TRIED</b>?"}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 1, "creation_date": 1463641366, "post_id": 37307936, "comment_id": 62152031, "body": "@Dimon: There are 5 &quot;levels&quot; of SIMD available, depending on processor: None, SSE, AVX, AVX-2 and AVX-512. The source file would only have to support 2 (one of which was &quot;None&quot;) and switch between them at compile time. But still it is a lot of effort, you tend to find only specialist speed-is-everything libraries going to that extent (e.g. ffmpeg does this). I looked at the source for OpenSSL and instead those developers chose to use inline assembly for some parts - you might want to check the speed of that, it could be enough for you."}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 1, "creation_date": 1463643097, "post_id": 37307936, "comment_id": 62153176, "body": "@NeilSlater: There are several levels of <a href=\"http://stackoverflow.com/tags/sse/info\">SSE</a>.  SSE2 is baseline for x86-64.  Anyway, the <a href=\"http://stackoverflow.com/a/21533954/224132\">Intel SHA extensions</a> aren&#39;t part of AVX or AVX2; they have a separate feature-bit, like the AES-acceleration instructions."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6324692"}, "reply_to_user": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1463680538, "post_id": 37307936, "comment_id": 62179946, "body": "@PeterCordes, I don&#39;t see an issue because I need them for x86-64 which is SSE2"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6324692"}, "edited": false, "score": 0, "creation_date": 1463680595, "post_id": 37316936, "comment_id": 62179982, "body": "<code>Your best bet might be to have ruby use OpenSSL or a similar library</code> -- for example?"}, {"owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1463683136, "post_id": 37316936, "comment_id": 62181357, "body": "@Dimon I didn&#39;t have any specific alternatives to libopenssl in mind, but a quick google led me to <a href=\"http://www.interworx.com/community/reviewing-openssl-alternatives/\" rel=\"nofollow noreferrer\">a decent article</a> commenting on some.  <a href=\"https://www.gnutls.org/manual/html_node/Cryptographic-API.html\" rel=\"nofollow noreferrer\">GNUtls is the other major crypto library I&#39;ve heard of</a>, with a different license and API.  <code>gnutls_hash_fast</code> is probably the function you want."}], "tags": [], "owner": {"reputation": 240639, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 4, "last_activity_date": 1463643860, "last_edit_date": 1495541859, "creation_date": 1463643860, "answer_id": 37316936, "question_id": 37307936, "link": "https://stackoverflow.com/questions/37307936/sha512-and-simd-in-ruby/37316936#37316936", "title": "SHA512 and SIMD in Ruby", "body": "<p>Intel published <a href=\"http://www.intel.com/content/dam/www/public/us/en/documents/white-papers/fast-sha512-implementations-ia-processors-paper.pdf\" rel=\"nofollow noreferrer\">a paper on SIMD-accelerating SHA512</a>, in Nov 2012.</p>\n\n<p>They say they got  ~8.59 cycles/byte for their AVX version, on a Sandybridge i7 2600.  They didn't publish results for their AVX2 / <code>rorx</code> (BMI2) version, since Haswell wasn't released yet.  I didn't follow the links to the source code; presumably it's C with intrinsics.</p>\n\n<p>To implement it in Ruby's source code, you'll need to handle the case where ruby is running on a CPU that doesn't support the instruction set extensions your fast version uses, and fall back to a plain C or SSE2-only version.</p>\n\n<p><strong>Your best bet might be to have ruby use OpenSSL</strong> or a similar library to get hand-tuned versions of SHA-512 and many other functions.  Crypto libraries already have with hand-tuned asm versions for many different platforms.</p>\n\n<hr>\n\n<p>With Skylake (and Goldmont), Intel introduced <a href=\"https://stackoverflow.com/questions/20692386/are-there-in-x86-any-instructions-to-accelerate-sha-sha1-2-256-512-encoding/21533954#21533954\">new instructions to accelerate SHA-1 and SHA-256</a>.  Unfortunately, I don't see anything about being able to use <a href=\"https://en.wikipedia.org/wiki/Intel_SHA_extensions\" rel=\"nofollow noreferrer\">those instructions</a> for SHA-512.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6324692"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1463643860, "creation_date": 1463597616, "last_edit_date": 1463598154, "question_id": 37307936, "link": "https://stackoverflow.com/questions/37307936/sha512-and-simd-in-ruby", "title": "SHA512 and SIMD in Ruby", "body": "<p>Intel processors allow to calculate SHA512 faster because of SIMD optimizations they have. I want to take advantage of it in Ruby. However, implementation of SHA512 doesn't use SIMD <a href=\"https://github.com/ruby/ruby/blob/trunk/ext/digest/sha2/sha2.c\" rel=\"nofollow\">https://github.com/ruby/ruby/blob/trunk/ext/digest/sha2/sha2.c</a> does it? </p>\n\n<p>Is there any way to unitize SIMD optimizations for calculating SHA512 in Ruby?  </p>\n"}, {"tags": ["ruby", "unit-testing"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 3, "creation_date": 1463597815, "post_id": 37307934, "comment_id": 62137170, "body": "brackets denote an array, not curly braces."}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 1, "creation_date": 1463598015, "post_id": 37307934, "comment_id": 62137277, "body": "You class name should be capitalized (i.e. <code>Triplet</code>)."}, {"owner": {"reputation": 83, "user_id": 6345479, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-JVrKcdeeIME/AAAAAAAAAAI/AAAAAAAAADw/OXOOnHSFrkQ/photo.jpg?sz=128", "display_name": "dv akhil", "link": "https://stackoverflow.com/users/6345479/dv-akhil"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1463598344, "post_id": 37307934, "comment_id": 62137467, "body": "@orde  No change in the error"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1463599098, "post_id": 37307934, "comment_id": 62137869, "body": "@Stefan: Agreed.  Should have been...errr...must be more clear."}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 1, "last_activity_date": 1463600357, "last_edit_date": 1463600357, "creation_date": 1463599208, "answer_id": 37308380, "question_id": 37307934, "link": "https://stackoverflow.com/questions/37307934/error-in-unit-testing-ruby/37308380#37308380", "title": "Error in unit testing Ruby", "body": "<h3>Class name</h3>\n\n<p>Class names are constants and therefore must start with a capital letter:</p>\n\n<pre><code>class Triplet\n  # ...\nend\n</code></pre>\n\n<p>And in your test:</p>\n\n<pre><code>num = Triplet.new\n</code></pre>\n\n<h3>Array literal</h3>\n\n<p>An array is created via <code>[</code> and <code>]</code>, whereas a hash is created via <code>{</code> and <code>}</code>, i.e.</p>\n\n<pre><code>num.three_sum_fast([1, 3, 4, 5, 6, 7], 14)\n</code></pre>\n\n<h3>Method invocation</h3>\n\n<p>There is an erroneous space in the next line:</p>\n\n<pre><code>assert_equal (expected,true)\n#           ^\n#           that one is wrong\n</code></pre>\n\n<p>It has to be:</p>\n\n<pre><code>assert_equal(expected, true)\n#                     ^\n#                     that one is okay\n</code></pre>\n\n<h3>Undefined variable</h3>\n\n<p>Even with the faulty space removed, the line does not work, because <code>expected</code> is an undefined variable. You have to <em>assign</em> it, before you can use it:</p>\n\n<pre><code>expected = num.three_sum_fast([1, 3, 4, 5, 6, 7], 14)\nassert_equal(expected, true)\n</code></pre>\n\n<p>This works, but <code>expected</code> is a misnomer. <code>true</code> is the <em>expected</em> value, whereas the method's result is the <em>actual</em> value. So it should be:</p>\n\n<pre><code>actual = num.three_sum_fast([1, 3, 4, 5, 6, 7], 14)\nassert_equal(true, actual)\n</code></pre>\n\n<p>or simply:</p>\n\n<pre><code>assert_equal(true, num.three_sum_fast([1, 3, 4, 5, 6, 7], 14))\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 6345479, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-JVrKcdeeIME/AAAAAAAAAAI/AAAAAAAAADw/OXOOnHSFrkQ/photo.jpg?sz=128", "display_name": "dv akhil", "link": "https://stackoverflow.com/users/6345479/dv-akhil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 37308380, "answer_count": 1, "score": -1, "last_activity_date": 1463600357, "creation_date": 1463597612, "last_edit_date": 1463597959, "question_id": 37307934, "link": "https://stackoverflow.com/questions/37307934/error-in-unit-testing-ruby", "title": "Error in unit testing Ruby", "body": "<p>The below code returns true if sum of triplets is equal to a given number</p>\n\n<pre><code>class triplet\ndef three_sum_fast(ary, sum)\n  ary.sort!\n\n  (0..ary.length - 3).each do |i|\n    front = ary[i]\n    start_index = i + 1\n    back_index = ary.length - 1\n\n    while(start_index &lt; back_index) do\n      start = ary[start_index]\n      back = ary[back_index]\n\n      if (front + start + back) &gt; 0\n        back_index -= 1\n      else\n        start_index += 1\n      end\n\n       if front + start + back == sum\n          return true\n          break\n      end\n\n    end\n\n  end\n  false\nend\n\nend\n</code></pre>\n\n<p>The below code is the test file</p>\n\n<pre><code>require  \"test/unit\"\nrequire  \"triplet.rb\"\n\nclass Test &lt; Test::Unit::TestCase\n    def test_trip\n        num=triplet.new\n        num.three_sum_fast({1,3,4,5,6,7},14)\n        assert_equal (expected,true)\n    end\nend\n</code></pre>\n\n<p>The errors found are :</p>\n\n<pre><code>syntax error, unexpected ',', expecting =&gt;\n    num.three_sum_fast({1,3,4,5,6,7},14)\nsyntax error, unexpected ',', expecting ')'\n    assert_equal (expected,true)\n</code></pre>\n"}, {"tags": ["ruby", "unit-testing", "rspec", "nomethoderror"], "answers": [{"comments": [{"owner": {"reputation": 377, "user_id": 1388651, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1505156159/picture?type=large", "display_name": "SalceCodec", "link": "https://stackoverflow.com/users/1388651/salcecodec"}, "edited": false, "score": 0, "creation_date": 1463599587, "post_id": 37308206, "comment_id": 62138158, "body": "Thanks! This worked. Using <code>require_relative</code> was the way to go."}], "tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": true, "score": 1, "last_activity_date": 1463598586, "creation_date": 1463598586, "answer_id": 37308206, "question_id": 37307893, "link": "https://stackoverflow.com/questions/37307893/rspec-nomethoderror/37308206#37308206", "title": "Rspec &quot;NoMethodError&quot;", "body": "<p>I can think of two possible causes for this:</p>\n\n<p>1) The <code>my_file</code> that's being loaded at runtime may not be the one you think it is.  I suggest putting something in there, like a <code>puts</code> or a <code>raise</code>, to see if that's the file really being run.</p>\n\n<p>You might want to use <code>require_relative</code> instead of <code>require</code>, because that will give you more control over which file gets loaded.</p>\n\n<p>2) You have 2 <code>describe</code>'s.  I would recommend removing the inner one.</p>\n\n<p>Also, there were 2 errors on 1 line in the spec file; here is the corrected version:</p>\n\n<pre><code>    expect {@c.main}.to output(\"Hello World\\n\").to_stdout\n</code></pre>\n\n<p>'World' was not capitalized, and there was no \"\\n\" at the end of \"Hello World\".</p>\n"}], "owner": {"reputation": 377, "user_id": 1388651, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1505156159/picture?type=large", "display_name": "SalceCodec", "link": "https://stackoverflow.com/users/1388651/salcecodec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3211, "favorite_count": 0, "accepted_answer_id": 37308206, "answer_count": 1, "score": 0, "last_activity_date": 1463598586, "creation_date": 1463597474, "question_id": 37307893, "link": "https://stackoverflow.com/questions/37307893/rspec-nomethoderror", "title": "Rspec &quot;NoMethodError&quot;", "body": "<p>I'm new to Unit Testing in Ruby using RSpec and I'm having trouble performing a very basic Unit test. I'm used to unit testing in Python and JavaScript, and I usually don't run into this problem.</p>\n\n<p>I'm simply trying to test a STDOUT using the puts statement. Here is my spec.</p>\n\n<p><code>my_spec.rb</code></p>\n\n<pre><code>require 'my_file'\n\n  describe C do\n    before(:all) do\n      @c = C.new\n    end\n\n    describe C do\n      subject(:C) { described_class.new }\n      it 'should print Hello World' do\n        expect {@c.main}.to output(\"Hello world\").to_stdout\n      end\n    end\n  end\n</code></pre>\n\n<p>Here is <code>my_file.rb</code></p>\n\n<pre><code>class C\n    def main\n        puts \"Hello World\"\n    end\nend\n</code></pre>\n\n<p>No major code here, just a simple test for Output, but I'm receiving the an <code>NoMethodError</code> error when I run my spec:</p>\n\n<pre><code>Failures:\n\n  1) C C should print Hello World\n     Failure/Error: expect {@c.main}.to output(\"Hello world\").to_stdout\n\n     NoMethodError:\n       undefined method `main' for #&lt;C:0x007fe54488a550&gt;\n     # ./spec/my_spec.rb:12:in `block (4 levels) in &lt;top (required)&gt;'\n     # ./spec/my_spec.rb:12:in `block (3 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>It says I have an undefined method <code>main</code> when I do have it defined in <code>my_file.rb</code>, what I do know about this error is it's usually due to me calling a method before it's defined. Not to sure what I'm doing wrong here though since I thought the method is defined. Any help is greatly appreciated! </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1463597252, "post_id": 37307730, "comment_id": 62136888, "body": "<code>@comment</code> is not declared here <code>@comment.user_id = current_user.id</code>"}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1463598595, "post_id": 37307730, "comment_id": 62137609, "body": "comments_controller in create method u have <code>@comments</code> and <code>@comment</code>. make it both the same or singular or pluralize both"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6179261, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c0666514d9cbd821f7e5a41d7bea3a27?s=128&d=identicon&r=PG&f=1", "display_name": "Chema Mora", "link": "https://stackoverflow.com/users/6179261/chema-mora"}, "edited": false, "score": 0, "creation_date": 1463597878, "post_id": 37307802, "comment_id": 62137206, "body": "I think this is part of the problem cause after changing this is pointing me to what @Pavam has said above."}, {"owner": {"reputation": 11, "user_id": 6179261, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c0666514d9cbd821f7e5a41d7bea3a27?s=128&d=identicon&r=PG&f=1", "display_name": "Chema Mora", "link": "https://stackoverflow.com/users/6179261/chema-mora"}, "edited": false, "score": 0, "creation_date": 1463598039, "post_id": 37307802, "comment_id": 62137291, "body": "I also had a a typo in the comment parameters wrote :commet instead :comment  but it doesn&#39;t seems to be that either."}], "tags": [], "owner": {"reputation": 966, "user_id": 5350659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63535c11d66f71640d7a5a558b351d11?s=128&d=identicon&r=PG&f=1", "display_name": "Pitabas Prathal", "link": "https://stackoverflow.com/users/5350659/pitabas-prathal"}, "is_accepted": false, "score": 0, "last_activity_date": 1463597175, "creation_date": 1463597175, "answer_id": 37307802, "question_id": 37307730, "link": "https://stackoverflow.com/questions/37307730/rails-undefined-method-user-id-for-nilnilclass/37307802#37307802", "title": "Rails : undefined method `user_id=&#39; for nil:NilClass", "body": "<p>try:</p>\n\n<pre><code> @comments = @post.comments.create(params[:comment].permit(:name, :body))\n</code></pre>\n\n<p>just replace <code>@comments</code> with <code>@comment</code></p>\n"}, {"tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": false, "score": 0, "last_activity_date": 1463598254, "creation_date": 1463598254, "answer_id": 37308120, "question_id": 37307730, "link": "https://stackoverflow.com/questions/37307730/rails-undefined-method-user-id-for-nilnilclass/37308120#37308120", "title": "Rails : undefined method `user_id=&#39; for nil:NilClass", "body": "<p>Regarding your <code>create</code> method. You have two problems:</p>\n\n<ol>\n<li>You don't have <code>@comment</code> instance variable defined (you have <code>@comments</code>).</li>\n<li>You don't have <code>comment</code> local variable or method.</li>\n</ol>\n\n<p>comments_controller.rb</p>\n\n<pre><code>class CommentsController &lt; ApplicationController\n  def create\n    @post = Post.find(params[:post_id])\n    #       |--  HERE\n    @comment = @post.comments.create(params[:comment].permit(:name, :body))\n    @comment.user_id = current_user.id\n    @comment.save      # &lt;==   HERE  ==\n\n    redirect_to post_path(@post)\n  end\nend\n</code></pre>\n\n<p>As for <code>destroy</code>, you might have forgot to add <code>has_many :comments</code> associated to your <code>User</code> model.</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n    has_many :comments\nend\n\nclass Comment &lt; ActiveRecord::Base\n    belongs_to :user\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 6179261, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c0666514d9cbd821f7e5a41d7bea3a27?s=128&d=identicon&r=PG&f=1", "display_name": "Chema Mora", "link": "https://stackoverflow.com/users/6179261/chema-mora"}, "edited": false, "score": 0, "creation_date": 1463600192, "post_id": 37308308, "comment_id": 62138503, "body": "This works, so .merge is basically joining the user and the comment parameters right? Thanks so much @7urkm3n"}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "reply_to_user": {"reputation": 11, "user_id": 6179261, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c0666514d9cbd821f7e5a41d7bea3a27?s=128&d=identicon&r=PG&f=1", "display_name": "Chema Mora", "link": "https://stackoverflow.com/users/6179261/chema-mora"}, "edited": false, "score": 0, "creation_date": 1463600434, "post_id": 37308308, "comment_id": 62138627, "body": "@ChemaMora yes, if <code>data = {}</code> and these are <code>data[:user_id] = 2; data.merge(user_id = 2)</code> same thing."}], "tags": [], "owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "is_accepted": true, "score": 2, "last_activity_date": 1463600586, "last_edit_date": 1463600586, "creation_date": 1463598957, "answer_id": 37308308, "question_id": 37307730, "link": "https://stackoverflow.com/questions/37307730/rails-undefined-method-user-id-for-nilnilclass/37308308#37308308", "title": "Rails : undefined method `user_id=&#39; for nil:NilClass", "body": "<p>All simple, you have two different instance objects. Also, You have already <code>comment_params</code> method, just use that one for secure it.</p>\n\n<pre><code>  def create\n    @post = Post.find(params[:post_id])\n    @comment = @post.comments.create(comment_params.merge(user_id: current_user.id))    \n    redirect_to post_path(@post)\n  end\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6179261, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c0666514d9cbd821f7e5a41d7bea3a27?s=128&d=identicon&r=PG&f=1", "display_name": "Chema Mora", "link": "https://stackoverflow.com/users/6179261/chema-mora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1634, "favorite_count": 0, "accepted_answer_id": 37308308, "answer_count": 3, "score": -1, "last_activity_date": 1463600586, "creation_date": 1463596921, "question_id": 37307730, "link": "https://stackoverflow.com/questions/37307730/rails-undefined-method-user-id-for-nilnilclass", "title": "Rails : undefined method `user_id=&#39; for nil:NilClass", "body": "<p>I am running into a problem with the Comments controller in my blog. Every time I tried to create a new comment I have an <code>undefined method \"user_id=\" for nil:NilClass</code>, and it doesn't create the comment. It happens the same when I try to destroy one, I have <code>undefined method \"comments\" for #&lt;User:0x007fe2c872f968&gt;</code>. </p>\n\n<p>When I restart the server, the comment I created shows up, but it doesn't happen the same with the destroy method.  </p>\n\n<p>I am not sure what is happening here, I have to be doing something wrong with the user but I cannot find where is the problem. </p>\n\n<p>Posts Controller</p>\n\n<pre><code>class PostsController &lt; ApplicationController\n  before_action :authenticate_user!, except: [:index, :show]\n\n  def index\n    @posts = Post.all.order('created_at DESC')\n    @posts = Post.paginate(:page =&gt; params[:page])\n  end\n\n  def new\n    @post = Post.new\n  end\n\n  def create\n    @post = Post.new(post_params)\n\n   if  @post.save\n      redirect_to @post\n    else\n      render \"new\"\n    end\n\n  end\n\n  def show\n    @post = Post.find(params[:id])\n  end \n\n  def edit\n    @post = Post.find(params[:id])\n  end\n\n  def update\n    @post = Post.find(params[:id])\n\n    if @post.update(params[:post].permit(:title, :body, :image))\n      redirect_to @post\n    else \n      render 'edit'\n    end\n  end\n\n  def destroy\n    @post = Post.find(params[:id])\n    @post.destroy()\n\n    redirect_to posts_path\n  end\n\n  private\n\n    def post_params\n      params.require(:post).permit(:title, :body, :image)\n    end\n\nend\n</code></pre>\n\n<p>Comments Controller</p>\n\n<pre><code>class CommentsController &lt; ApplicationController\n  before_action :correct_user, only: :destroy\n\n  def create\n    @post = Post.find(params[:post_id])\n    @comments = @post.comments.create(params[:comment].permit(:name, :body))\n    @comment.user_id = current_user.id\n    comment.save\n\n    redirect_to post_path(@post)\n  end\n\n  def show\n    @post = Post.find(params[:post_id])\n    @comments = @post.comments.create(params[:comment])\n  end\n\n  def destroy\n    @post = Post.find(params[:post_id])\n    @comments = @post.comments.find(params[:id])\n    @comments.destroy\n\n    redirect_to post_path(@post)\n  end\n\n\n  private \n\n  def comment_params\n    params.require(:commet).permit(:user_id, :name, :body)\n  end\n\n  def correct_user\n    @comment = current_user.comments.find_by(id: params[:id])\n      if @comment.nil?\n        flash[:alert] = \"Not your comment!\"\n        redirect_to :back\n      end\n  end\nend\n</code></pre>\n\n<p>Schema </p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20160515190759) do\n\n  create_table \"average_caches\", force: :cascade do |t|\n    t.integer  \"rater_id\"\n    t.integer  \"rateable_id\"\n    t.string   \"rateable_type\"\n    t.float    \"avg\",           null: false\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\n\n  create_table \"comments\", force: :cascade do |t|\n    t.string   \"name\"\n    t.text     \"body\"\n    t.integer  \"post_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.integer  \"user_id\"\n  end\n\n  add_index \"comments\", [\"post_id\"], name: \"index_comments_on_post_id\"\n\n  create_table \"overall_averages\", force: :cascade do |t|\n    t.integer  \"rateable_id\"\n    t.string   \"rateable_type\"\n    t.float    \"overall_avg\",   null: false\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\n\n  create_table \"posts\", force: :cascade do |t|\n    t.string   \"title\"\n    t.text     \"body\"\n    t.string   \"image_url\"\n    t.datetime \"created_at\",         null: false\n    t.datetime \"updated_at\",         null: false\n    t.string   \"image_file_name\"\n    t.string   \"image_content_type\"\n    t.integer  \"image_file_size\"\n    t.datetime \"image_updated_at\"\n  end\n\n  create_table \"rates\", force: :cascade do |t|\n    t.integer  \"rater_id\"\n    t.integer  \"rateable_id\"\n    t.string   \"rateable_type\"\n    t.float    \"stars\",         null: false\n    t.string   \"dimension\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\n\n  add_index \"rates\", [\"rateable_id\", \"rateable_type\"], name: \"index_rates_on_rateable_id_and_rateable_type\"\n  add_index \"rates\", [\"rater_id\"], name: \"index_rates_on_rater_id\"\n\n  create_table \"rating_caches\", force: :cascade do |t|\n    t.integer  \"cacheable_id\"\n    t.string   \"cacheable_type\"\n    t.float    \"avg\",            null: false\n    t.integer  \"qty\",            null: false\n    t.string   \"dimension\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n  end\n\n  add_index \"rating_caches\", [\"cacheable_id\", \"cacheable_type\"], name: \"index_rating_caches_on_cacheable_id_and_cacheable_type\"\n\n  create_table \"users\", force: :cascade do |t|\n    t.string   \"email\",                  default: \"\", null: false\n    t.string   \"encrypted_password\",     default: \"\", null: false\n    t.string   \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.integer  \"sign_in_count\",          default: 0,  null: false\n    t.datetime \"current_sign_in_at\"\n    t.datetime \"last_sign_in_at\"\n    t.string   \"current_sign_in_ip\"\n    t.string   \"last_sign_in_ip\"\n    t.datetime \"created_at\",                          null: false\n    t.datetime \"updated_at\",                          null: false\n  end\n\n  add_index \"users\", [\"email\"], name: \"index_users_on_email\", unique: true\n  add_index \"users\", [\"reset_password_token\"], name: \"index_users_on_reset_password_token\", unique: true\n\nend\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ajax", "coffeescript"], "comments": [{"owner": {"reputation": 5704, "user_id": 1236336, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9b3d57108481b0576bad482a82e698e6?s=128&d=identicon&r=PG", "display_name": "Graham Slick", "link": "https://stackoverflow.com/users/1236336/graham-slick"}, "edited": false, "score": 0, "creation_date": 1463597803, "post_id": 37307720, "comment_id": 62137165, "body": "In which .coffee file ? In which controller ?"}, {"owner": {"reputation": 459, "user_id": 3355599, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/FD36Q.jpg?s=128&g=1", "display_name": "Flamine", "link": "https://stackoverflow.com/users/3355599/flamine"}, "reply_to_user": {"reputation": 5704, "user_id": 1236336, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9b3d57108481b0576bad482a82e698e6?s=128&d=identicon&r=PG", "display_name": "Graham Slick", "link": "https://stackoverflow.com/users/1236336/graham-slick"}, "edited": false, "score": 1, "creation_date": 1463598322, "post_id": 37307720, "comment_id": 62137449, "body": "yes, in /assets/javascripts/mainpage.coffee . I see requests in server console But code in get_current_result_number action is run only once"}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1463599656, "post_id": 37307720, "comment_id": 62138193, "body": "call ajax inside setInterval, not in ajax. <code>setInterval($ajax_function here, 1000);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": true, "score": 3, "last_activity_date": 1463599480, "creation_date": 1463599480, "answer_id": 37308459, "question_id": 37307720, "link": "https://stackoverflow.com/questions/37307720/rails-action-is-calling-only-once-but-i-call-it-every-second-in-my-ajax/37308459#37308459", "title": "Rails action is calling only once, but i call it every second in my ajax", "body": "<p><code>$.ajax</code> is not your defined ajax call. You can rewrite it like this:</p>\n\n<pre><code>getCurrentResults = ()-&gt;\n  $.ajax(url: \"/get_current_result_number\").done (html) -&gt;\n    $(\"#results\").append html\n\nsetInterval(getCurrentResults, 1000)\n</code></pre>\n"}], "owner": {"reputation": 459, "user_id": 3355599, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/FD36Q.jpg?s=128&g=1", "display_name": "Flamine", "link": "https://stackoverflow.com/users/3355599/flamine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 37308459, "answer_count": 1, "score": 2, "last_activity_date": 1463599480, "creation_date": 1463596879, "last_edit_date": 1463599361, "question_id": 37307720, "link": "https://stackoverflow.com/questions/37307720/rails-action-is-calling-only-once-but-i-call-it-every-second-in-my-ajax", "title": "Rails action is calling only once, but i call it every second in my ajax", "body": "<p>Title is incorrect, but you might understand it.\nI have this code in .coffee:</p>\n\n<pre><code> $.ajax(url: \"/get_current_result_number\").done (html) -&gt;\n    $(\"#results\").append html\n    setInterval( $.ajax, 1000 )\n</code></pre>\n\n<p>And in the controller:</p>\n\n<pre><code>def get_current_result_number\n  respond_to do |format|\n    format.html { render :xml =&gt; \"&lt;progress value=#{$status[:current]} max=#{$status[:all]} &gt;&lt;/progress&gt;\" }\n  end\nend\n</code></pre>\n\n<p>Global variable $status has data for progresbar, and i want to see it in real time, without refresh page. I see requests in rails console permanently. Action get_current_result_number is call only one, with first request, and dont call with next.\nWhere is error? (in code, not in English))</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 5361122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/31ca2a1ddfa0f7cddacb22265e9bceb8?s=128&d=identicon&r=PG", "display_name": "Bruce1138", "link": "https://stackoverflow.com/users/5361122/bruce1138"}, "edited": false, "score": 0, "creation_date": 1463599000, "post_id": 37308288, "comment_id": 62137819, "body": "perfect, seems so obvious now that I see it. Thank you!"}], "tags": [], "owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "is_accepted": true, "score": 1, "last_activity_date": 1463598887, "creation_date": 1463598887, "answer_id": 37308288, "question_id": 37307692, "link": "https://stackoverflow.com/questions/37307692/how-would-i-override-display-output-from-a-ruby-method/37308288#37308288", "title": "How would I override display output from a ruby method?", "body": "<p>If I understand correctly your issue, you can simply render both possibilities in the view helper:</p>\n\n<pre><code># helper:\ndef render_activity_by_role(activity)\n  if activity.parameters.include?(:role)\n    render_activity(activity)\n  else\n    content_tag(:div, content_tag(:p, \"Not Permitted\"), class: \"strong\")\n  end\nend\n\n# view:\n&lt;%= render_activity_by_role(activity) %&gt; | created at &lt;%= activity.created_at %&gt;\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 5361122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/31ca2a1ddfa0f7cddacb22265e9bceb8?s=128&d=identicon&r=PG", "display_name": "Bruce1138", "link": "https://stackoverflow.com/users/5361122/bruce1138"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 1, "accepted_answer_id": 37308288, "answer_count": 1, "score": 0, "last_activity_date": 1463598887, "creation_date": 1463596795, "question_id": 37307692, "link": "https://stackoverflow.com/questions/37307692/how-would-i-override-display-output-from-a-ruby-method", "title": "How would I override display output from a ruby method?", "body": "<p>I am trying to override output that is displayed on a page only if it meets the conditional of my Ruby method. </p>\n\n<p>This page is supposed to display a user that edits an activity only if the activity parameters have a role assigned.</p>\n\n<hr>\n\n<p>Here is a sample of the method: </p>\n\n<pre><code>  def activity_by_role(data)\n    if !data.include?(:role)\n      content_tag(:div, content_tag(:p, \"Not Permitted\"), class: \"strong\")\n    end\n  end\n</code></pre>\n\n<p>I am calling the method in a view using this code:</p>\n\n<pre><code>  &lt;%= render_activity activity unless activity_by_role(activity.parameters) %&gt; | created at &lt;%= activity.created_at %&gt;\n</code></pre>\n\n<p>This is the output I am receiving follows:\n<a href=\"https://i.stack.imgur.com/CiVmD.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CiVmD.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Where there is a blank after the user name I would like it to show \"Not Permitted\". Where it shows edited \"item\" is how that activity output should be displayed. </p>\n\n<p>Any suggestions on how to display the text \"Not Permitted\" if the activity parameters do not meet the conditional?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "sorting", "associations"], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 5331998, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1968c3e0f376854e9dbfe92f68d88232?s=128&d=identicon&r=PG", "display_name": "Vinicius Fontoura", "link": "https://stackoverflow.com/users/5331998/vinicius-fontoura"}, "edited": false, "score": 0, "creation_date": 1463596736, "post_id": 37307659, "comment_id": 62136621, "body": "But one input can have more than one translation, so wich one the sorting algorithym is using?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 153, "user_id": 5331998, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1968c3e0f376854e9dbfe92f68d88232?s=128&d=identicon&r=PG", "display_name": "Vinicius Fontoura", "link": "https://stackoverflow.com/users/5331998/vinicius-fontoura"}, "edited": false, "score": 1, "creation_date": 1463597509, "post_id": 37307659, "comment_id": 62137013, "body": "@ViniciusFontoura the sort uses <i>all</i> of them. Each &quot;input&quot; will occur potentially more than once in the query you show."}, {"owner": {"reputation": 153, "user_id": 5331998, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1968c3e0f376854e9dbfe92f68d88232?s=128&d=identicon&r=PG", "display_name": "Vinicius Fontoura", "link": "https://stackoverflow.com/users/5331998/vinicius-fontoura"}, "edited": false, "score": 0, "creation_date": 1463598096, "post_id": 37307659, "comment_id": 62137321, "body": "I see. Ive updated the questions with more info and context. Thanks in advance."}, {"owner": {"reputation": 153, "user_id": 5331998, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1968c3e0f376854e9dbfe92f68d88232?s=128&d=identicon&r=PG", "display_name": "Vinicius Fontoura", "link": "https://stackoverflow.com/users/5331998/vinicius-fontoura"}, "edited": false, "score": 0, "creation_date": 1463598346, "post_id": 37307659, "comment_id": 62137469, "body": "I&#39;ve added an image."}], "tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": false, "score": 2, "last_activity_date": 1463597130, "last_edit_date": 1463597130, "creation_date": 1463596661, "answer_id": 37307659, "question_id": 37307644, "link": "https://stackoverflow.com/questions/37307644/which-association-is-sorted-in-that-line-of-code/37307659#37307659", "title": "Which association is sorted in that line of code?", "body": "<p>The <code>value</code> column of your <code>translations</code> table. It will generate an SQL that looks like this:</p>\n\n<pre><code>SELECT \"inputs\".\"id\" AS t0_r0, \"inputs\".\"name\" AS t0_r1, ..., \n    \"translations\".\"id\" AS t1_r0, \"translations\".\"value\" AS t1_r1, ...\nFROM \"inputs\"\nLEFT OUTER JOIN \"translations\"\n    ON \"translations\".\"input_id\" = \"inputs\".\"id\"  \nORDER BY translations.value DESC   // &lt;== YOUR `.order()` method\n</code></pre>\n\n<p>As you can see, the ordering is done in DB, not Rails. So, the ordering will be whatever your DB ordering is.</p>\n"}, {"comments": [{"owner": {"reputation": 153, "user_id": 5331998, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1968c3e0f376854e9dbfe92f68d88232?s=128&d=identicon&r=PG", "display_name": "Vinicius Fontoura", "link": "https://stackoverflow.com/users/5331998/vinicius-fontoura"}, "edited": false, "score": 0, "creation_date": 1463670027, "post_id": 37309612, "comment_id": 62173177, "body": "thanks, the Inputs table works fine. Now, how can I sort the inputs alphabetically by the language?"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "reply_to_user": {"reputation": 153, "user_id": 5331998, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1968c3e0f376854e9dbfe92f68d88232?s=128&d=identicon&r=PG", "display_name": "Vinicius Fontoura", "link": "https://stackoverflow.com/users/5331998/vinicius-fontoura"}, "edited": false, "score": 1, "creation_date": 1463683460, "post_id": 37309612, "comment_id": 62181541, "body": "The first line of the code is <code>languages = Language.all.order(&quot;name&quot;)</code>.  If you change the field that you use to order, it will change the order of the languages displayed here.  I assume that your Language model has a <code>name</code> field, but you can put whichever field fits best here for your purposes."}], "tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": true, "score": 1, "last_activity_date": 1463683296, "last_edit_date": 1463683296, "creation_date": 1463603626, "answer_id": 37309612, "question_id": 37307644, "link": "https://stackoverflow.com/questions/37307644/which-association-is-sorted-in-that-line-of-code/37309612#37309612", "title": "Which association is sorted in that line of code?", "body": "<p>To answer your first question, all of the rows of your Input table are used to join the Translations table, so all of the joined rows will be sorted by <code>value</code> from the Translations table.</p>\n\n<p>Since you don't provide any <code>where</code> condition on your query for the Input table, all rows from the input table are used, which it sounds like is your intent.</p>\n\n<p>You're using <code>includes</code> in your query, when you almost certainly mean <code>joins</code>.  While these are syntactically interchangeable in many cases, they're semantically intended for different purposes.</p>\n\n<p><code>includes</code> is specifically provided to facilitate <a href=\"http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations\" rel=\"nofollow\">eager loading</a>, whereas <code>joins</code> is defined to support <a href=\"http://guides.rubyonrails.org/active_record_querying.html#joining-tables\" rel=\"nofollow\">joining tables</a>.  The rule of thumb is that if you want to use any of the columns from the joined table in the query, use <code>joins</code>, otherwise, you can use <code>includes</code> to eager load the association.</p>\n\n<p>The result that you're looking to get is fairly difficult to do with just SQL.  However, you can easily get the Input rows and the association and use a simple Ruby collection transform to get the results that you want, including placeholders for missing values from Translations.</p>\n\n<p>Try this:</p>\n\n<pre><code>languages = Language.all.order(\"name\")\ninputs = Input.includes(:translations).order(\"id\")\ntranslations = inputs.map do |input|\n  { \n    input.id =&gt; languages.map do |language| \n                  item = input.translations.find_index {|i| i.language_id == language.id }\n                  item ? nil : input.translations[item]\n                end\n  }\nend\n</code></pre>\n\n<p>This will return an array of hashes, it the <code>input.id</code> as the key and the 8-column table of translations supplied for each.  <code>nil</code> is used as the placeholder for translations that don't exist for an input, so you can use that as an indication in your view to insert the \"Translate...\" option.  This is how it could be used:</p>\n\n<pre><code>&lt;table&gt;\n&lt;% inputs.each do |input| %&gt;\n    &lt;tr&gt;\n    &lt;% translation = translations[input.id] %&gt;\n    &lt;% translation.each do |item| %&gt;\n      &lt;% item %&gt;\n          &lt;td class=\"translation-available\"&gt;&lt;%= item.value %&gt;&lt;/td&gt;\n      &lt;% else %&gt;\n          &lt;td&gt;&lt;%= link_to \"Translate...\", translate_input_path(input) %&gt;&lt;/td&gt;\n      &lt;% end %&gt;\n    &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Obviously, I mocked in some structure and design elements in order to show you how to process the <code>inputs</code> array; you can adapt it to suit your view structure, as necessary.</p>\n"}], "owner": {"reputation": 153, "user_id": 5331998, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1968c3e0f376854e9dbfe92f68d88232?s=128&d=identicon&r=PG", "display_name": "Vinicius Fontoura", "link": "https://stackoverflow.com/users/5331998/vinicius-fontoura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 37309612, "answer_count": 2, "score": 1, "last_activity_date": 1463683296, "creation_date": 1463596603, "last_edit_date": 1463606933, "question_id": 37307644, "link": "https://stackoverflow.com/questions/37307644/which-association-is-sorted-in-that-line-of-code", "title": "Which association is sorted in that line of code?", "body": "<p>If the <code>Input</code> model <code>has_many :translations</code>, which translations row is sorted?    </p>\n\n<pre><code>Input.includes(:translations).order(\"translations.value DESC\")\n</code></pre>\n\n<p><strong>models</strong></p>\n\n<pre><code>class Input &lt; ActiveRecord::Base\n  has_many :translations, dependent: :destroy\nend\n\nclass Translation &lt; ActiveRecord::Base\n  belongs_to :input\n  belongs_to :language\nend\n\n# translations table schema:\n# id          :integer\n# value       :string\n# input_id    :integer\n# language_id :integer\n</code></pre>\n\n<p>I need to list all the Inputs, with 8 columns (for the 8 languages I have associated with the Translation) sorted by the value of the translation on the first language (set arbitrarily).</p>\n\n<p><a href=\"https://i.stack.imgur.com/2B6Ur.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2B6Ur.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ajax", "datatable"], "comments": [{"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1463601601, "post_id": 37307592, "comment_id": 62139228, "body": "Is your <code>$(&#39;#users-table&#39;).dataTable()</code> call in DOMReady callback?"}, {"owner": {"reputation": 4782, "user_id": 3914509, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/618920827/picture?type=large", "display_name": "Jeremy Thomas", "link": "https://stackoverflow.com/users/3914509/jeremy-thomas"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1463602111, "post_id": 37307592, "comment_id": 62139481, "body": "yes, and its with a bunch of other functions being called successfully.  The chart loads, it just wont update, and the ajax requests all look identical"}], "answers": [{"comments": [{"owner": {"reputation": 4782, "user_id": 3914509, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/618920827/picture?type=large", "display_name": "Jeremy Thomas", "link": "https://stackoverflow.com/users/3914509/jeremy-thomas"}, "edited": false, "score": 0, "creation_date": 1463605198, "post_id": 37309602, "comment_id": 62140997, "body": "I understand that, but this gem is supposed to help make those ajax requests as far as I can tell..."}, {"owner": {"reputation": 901, "user_id": 2802149, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/htwJY.png?s=128&g=1", "display_name": "Jan Bussieck", "link": "https://stackoverflow.com/users/2802149/jan-bussieck"}, "reply_to_user": {"reputation": 4782, "user_id": 3914509, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/618920827/picture?type=large", "display_name": "Jeremy Thomas", "link": "https://stackoverflow.com/users/3914509/jeremy-thomas"}, "edited": false, "score": 0, "creation_date": 1463607031, "post_id": 37309602, "comment_id": 62141865, "body": "Ah sorry didn&#39;t see you were using the gem."}], "tags": [], "owner": {"reputation": 901, "user_id": 2802149, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/htwJY.png?s=128&g=1", "display_name": "Jan Bussieck", "link": "https://stackoverflow.com/users/2802149/jan-bussieck"}, "is_accepted": false, "score": 0, "last_activity_date": 1463603606, "creation_date": 1463603606, "answer_id": 37309602, "question_id": 37307592, "link": "https://stackoverflow.com/questions/37307592/rails-4-datatables-ajax-datatables-rails-gem-will-not-update-table/37309602#37309602", "title": "Rails 4 + Datatables: Ajax-datatables-rails gem will not update table", "body": "<p>You have server side processing enabled which means that datatables will make an ajax request when you search or sort and pass a set of parameters via the url you specified in your ajax options.</p>\n\n<p>The actual processing has to be done on the server and the response has to conform to the protocol as specified by datatables. You can consult the docs <a href=\"https://datatables.net/manual/server-side#Example-data\" rel=\"nofollow\">here</a> </p>\n"}, {"comments": [{"owner": {"reputation": 2843, "user_id": 1403991, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f9a1af29444759103642031d220ffc19?s=128&d=identicon&r=PG&f=1", "display_name": "Jono", "link": "https://stackoverflow.com/users/1403991/jono"}, "edited": false, "score": 0, "creation_date": 1490373993, "post_id": 38776687, "comment_id": 73099256, "body": "You should be able to check to see if that&#39;s an issue by calling the <code>users_path{ format: :json}</code>. E.g. if users_path is <code>&#47;users</code> then calling <code>localhost:3000&#47;users.json</code> should show you a json formatted datatable. If that shows I doubt it&#39;s the <code>UserDatatable</code> that&#39;s the issue."}], "tags": [], "owner": {"reputation": 23, "user_id": 4400251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e746b52c112c49566777ca9291135d5?s=128&d=identicon&r=PG", "display_name": "Fixnpixels", "link": "https://stackoverflow.com/users/4400251/fixnpixels"}, "is_accepted": false, "score": 0, "last_activity_date": 1470341763, "creation_date": 1470341763, "answer_id": 38776687, "question_id": 37307592, "link": "https://stackoverflow.com/questions/37307592/rails-4-datatables-ajax-datatables-rails-gem-will-not-update-table/38776687#38776687", "title": "Rails 4 + Datatables: Ajax-datatables-rails gem will not update table", "body": "<p>Try using singular 'user.id' instead of 'users.id' in your UserDatatable class for all your columns. I had to do this for mine which would not accept the typical plural naming convention of my table as shown in the documentation for this gem.</p>\n"}], "owner": {"reputation": 4782, "user_id": 3914509, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/618920827/picture?type=large", "display_name": "Jeremy Thomas", "link": "https://stackoverflow.com/users/3914509/jeremy-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1066, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1470341763, "creation_date": 1463596437, "question_id": 37307592, "link": "https://stackoverflow.com/questions/37307592/rails-4-datatables-ajax-datatables-rails-gem-will-not-update-table", "title": "Rails 4 + Datatables: Ajax-datatables-rails gem will not update table", "body": "<p>I am trying to use the <code>ajax-datatables-rails</code> gem found <a href=\"https://github.com/antillas21/ajax-datatables-rails\" rel=\"nofollow\">here</a> with no luck.  My table shows up, and has the right data (for the first page), but when I attempt to search, sort, or change pages, no table data gets updated.  </p>\n\n<p><strong>Am I missing something simple?</strong></p>\n\n<p><strong>View</strong></p>\n\n<pre><code>&lt;table id=\"users-table\" data-source=\"&lt;%= users_path(format: :json) %&gt;\"&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt;ID&lt;/th&gt;\n      &lt;th&gt;Name&lt;/th&gt;\n      &lt;th&gt;Email&lt;/th&gt;\n      &lt;th&gt;Admin?&lt;/th&gt;\n      &lt;th&gt;Employee?&lt;/th&gt;\n      &lt;th&gt;Client?&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n  &lt;tbody&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>def index\n    respond_to do |format|\n        format.html \n    format.json { render json: UserDatatable.new(view_context) }\n    end\nend\n</code></pre>\n\n<p><strong>Datatable</strong></p>\n\n<pre><code>class UserDatatable &lt; AjaxDatatablesRails::Base\n  # uncomment the appropriate paginator module,\n  # depending on gems available in your project.\n  # include AjaxDatatablesRails::Extensions::Kaminari\n   include AjaxDatatablesRails::Extensions::WillPaginate\n  # include AjaxDatatablesRails::Extensions::SimplePaginator\n\n  def sortable_columns\n    # list columns inside the Array in string dot notation.\n    # Example: 'users.email'\n        @sortable_columns ||= [\n            'users.id', \n            'users.name',\n            'users.email',\n            'users.admin',\n            'users.employee',\n            'users.is_client'\n        ]\n  end\n\n  def searchable_columns\n    # list columns inside the Array in string dot notation.\n    # Example: 'users.email'\n        @searchable_columns ||= [\n            'users.id', \n            'users.name',\n            'users.email',\n            'users.admin',\n            'users.employee',\n            'users.is_client'\n        ]\n  end\n\n  private\n\n  def data\n    records.map do |record|\n      [\n        # comma separated list of the values for each cell of a table row\n        # example: record.attribute,\n                record.id, \n                record.name, \n                record.email, \n                record.admin, \n                record.employee, \n                record.is_client\n      ]\n    end\n  end\n\n  def get_raw_records\n    # insert query here\n        User.all\n  end\n\n  # ==== Insert 'presenter'-like methods below if necessary\nend\n</code></pre>\n\n<p><strong>js</strong></p>\n\n<pre><code>$('#users-table').dataTable({\n    \"processing\": true,\n    \"serverSide\": true,\n    \"ajax\": $('#users-table').data('source')\n    \"pagingType\": \"full_numbers\"\n    // optional, if you want full pagination controls.\n    // Check dataTables documentation to learn more about\n    // available options.\n});\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1949, "user_id": 4584963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/03a8016a0af94bd53303411018a847e2?s=128&d=identicon&r=PG&f=1", "display_name": "user4584963", "link": "https://stackoverflow.com/users/4584963/user4584963"}, "edited": false, "score": 0, "creation_date": 1479173833, "post_id": 37307412, "comment_id": 68436904, "body": "How did you solve this?"}], "answers": [{"tags": [], "owner": {"reputation": 44185, "user_id": 3488, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/6857f171e3ac5eeee65afa4af8d52155?s=128&d=identicon&r=PG", "display_name": "Craig Walker", "link": "https://stackoverflow.com/users/3488/craig-walker"}, "is_accepted": false, "score": 2, "last_activity_date": 1463598800, "creation_date": 1463598800, "answer_id": 37308261, "question_id": 37307412, "link": "https://stackoverflow.com/questions/37307412/restrict-get-route-in-rails-4-to-app-only/37308261#37308261", "title": "Restrict GET route in Rails 4 to app only", "body": "<p>You won't be able to prevent arbitrary programs (ie: \"user agents\") from making HTTP requests against your server. You can, however, refuse to respond with useful content unless the user agent can prove that it's your app.</p>\n\n<p>What you want to do is cryptographically sign your requests in your client app, then verify the signature on your server before responding. I don't know of any Ruby/Rails library to do precisely that (and I couldn't find any upon a cursory search), but it could be built from existing libraries. Here's a quick and dirty implementation concept:</p>\n\n<ol>\n<li>Embed a secret key into the client app.</li>\n<li>Whenever the client app makes a request, it:\n\n<ol>\n<li>Generates a UUID that will be used exactly once, ever. (A \"nonce\").</li>\n<li>Generate a signiture by hashing the nonce with the secret key.</li>\n<li>Pass the nonce and the signature with the request (probably as HTTP headers)</li>\n</ol></li>\n<li>When the server receives a request, it generates a signature based on the incoming nonce and the secret key (which it already knows). If the signature matches, <em>and</em> the nonce has <em>never</em> been used before, then the server returns the content. If either of those conditions are not true, then the server can't guarantee that it's your client app making the request, and thus should respond with a failure.</li>\n</ol>\n\n<p>Disclaimers:</p>\n\n<ol>\n<li>This is entirely dependent on the security of the secret key embedded in the client app. If the key is hacked (and it will be, given enough effort on the part of the attacker), then this scheme falls apart.\n\n<ol>\n<li>If you use the same secret key for all client apps (and there's a good chance you'll need to, depending on your app architecture), then if one client app install gets hacked, you lose security on <em>all</em> of your installations.</li>\n</ol></li>\n<li>This is just an illustration of the general principle, not a fully fledged secure implementation. I'm not a security expert and have not run through all of the potential attack vectors for this plan.</li>\n</ol>\n\n<p>I also suggest reading up on how OAuth works. It solves a similar problem, and you may be able to adapt it for your purposes.</p>\n"}], "owner": {"reputation": 718, "user_id": 3103686, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d82778274a818df1c0379d1453462e3f?s=128&d=identicon&r=PG", "display_name": "Brit200313", "link": "https://stackoverflow.com/users/3103686/brit200313"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 2, "answer_count": 1, "score": 4, "last_activity_date": 1463599907, "creation_date": 1463595885, "last_edit_date": 1463599907, "question_id": 37307412, "link": "https://stackoverflow.com/questions/37307412/restrict-get-route-in-rails-4-to-app-only", "title": "Restrict GET route in Rails 4 to app only", "body": "<p>We have a JSON hash that the backend processes and serves to our frontend to calculate a map. The JSON hash is rendered from a GET request and is constantly being updated (not cached).</p>\n\n<p>We need a way to lock down the route so that only the app itself can connect to it (stopping bots from pinging the URL to grab the hash). The frontend and backend are tied together in one Rails application (no separate services). </p>\n\n<p>My issue is that ActionController::RequestForgeryProtection::ClassMethods does not support GET and ActionController::HttpAuthentication::Token is overkill since I need to restrict the JSON hash to the app (not to a specific user). Request.referrer can be spoofed so I hesitate in checking that. </p>\n\n<p>I would appreciate any suggestions on how to reject outside GET requests to a Controller when it is not the app making the request. </p>\n\n<p>Rails: 4.2.6</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1463596027, "post_id": 37307346, "comment_id": 62136207, "body": "Can you update the question with the content of <code>postgresql.conf</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 5291, "user_id": 2852424, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/AIdLu.png?s=128&g=1", "display_name": "Thibaud Clement", "link": "https://stackoverflow.com/users/2852424/thibaud-clement"}, "edited": false, "score": 3, "creation_date": 1463601424, "post_id": 37307420, "comment_id": 62139143, "body": "Thanks for your answer. I just downloaded the app and launched it. If I shut it down before launching my server, then I still get the same error. If I don&#39;t shut it down, then I get an error message stating that my &quot;database does not exist&quot;. Can this be related?"}, {"owner": {"reputation": 5704, "user_id": 1236336, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9b3d57108481b0576bad482a82e698e6?s=128&d=identicon&r=PG", "display_name": "Graham Slick", "link": "https://stackoverflow.com/users/1236336/graham-slick"}, "reply_to_user": {"reputation": 5291, "user_id": 2852424, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/AIdLu.png?s=128&g=1", "display_name": "Thibaud Clement", "link": "https://stackoverflow.com/users/2852424/thibaud-clement"}, "edited": false, "score": 0, "creation_date": 1463601486, "post_id": 37307420, "comment_id": 62139170, "body": "If your database does not exist, you should run rake db:create . But this is most likely not related ... Did you just fork a repo or something like this ? You shouldn&#39;t shut it down before launching your server using &#39;rails s&#39; !! The app has to be running the whole time you want to access your site on a localhost"}, {"owner": {"reputation": 5291, "user_id": 2852424, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/AIdLu.png?s=128&g=1", "display_name": "Thibaud Clement", "link": "https://stackoverflow.com/users/2852424/thibaud-clement"}, "edited": false, "score": 0, "creation_date": 1463601584, "post_id": 37307420, "comment_id": 62139221, "body": "Ok. No, I did not fork a repo, it is the same repo I was working with. But I ran <code>git fetch</code>, maybe this is the problem."}, {"owner": {"reputation": 5704, "user_id": 1236336, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9b3d57108481b0576bad482a82e698e6?s=128&d=identicon&r=PG", "display_name": "Graham Slick", "link": "https://stackoverflow.com/users/1236336/graham-slick"}, "reply_to_user": {"reputation": 5291, "user_id": 2852424, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/AIdLu.png?s=128&g=1", "display_name": "Thibaud Clement", "link": "https://stackoverflow.com/users/2852424/thibaud-clement"}, "edited": false, "score": 0, "creation_date": 1463601644, "post_id": 37307420, "comment_id": 62139245, "body": "git fetch is not supposed to be deleting the database. What&#39;s happening if you run rake db:create ?"}, {"owner": {"reputation": 4373, "user_id": 1007325, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ba57e1be1c442cef7e9f81d09d95e1e6?s=128&d=identicon&r=PG", "display_name": "Sagar Ranglani", "link": "https://stackoverflow.com/users/1007325/sagar-ranglani"}, "edited": false, "score": 1, "creation_date": 1577541308, "post_id": 37307420, "comment_id": 105194783, "body": "&quot;Ran out of battery&quot;... this is exactly what happened! :-O"}, {"owner": {"reputation": 224, "user_id": 6006571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fef563eaeff0887a8b30aabc8e1cc39?s=128&d=identicon&r=PG", "display_name": "sophievda", "link": "https://stackoverflow.com/users/6006571/sophievda"}, "edited": false, "score": 0, "creation_date": 1592433832, "post_id": 37307420, "comment_id": 110427982, "body": "With this error the other client application &#39;pgAdmin&#39;did not run the server nor used the 5432 port. But fixed it by reinstalling PostgreSQL DBMS."}, {"owner": {"reputation": 400, "user_id": 13033540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2780edb38e356f97722e786b6e15cf79?s=128&d=identicon&r=PG&f=1", "display_name": "Fadolphin", "link": "https://stackoverflow.com/users/13033540/fadolphin"}, "edited": false, "score": 0, "creation_date": 1592508061, "post_id": 37307420, "comment_id": 110458936, "body": "It just started doing this when I downloaded it the very first time. Your solution tho is 100% working and fixed it"}, {"owner": {"reputation": 85, "user_id": 13371200, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uPN9rRaF74g/AAAAAAAAAAI/AAAAAAAAAAA/AAKWJJPIwzEF_DyfkTbF6zgSEugfOTst7g/photo.jpg?sz=128", "display_name": "Kevin Hudgens", "link": "https://stackoverflow.com/users/13371200/kevin-hudgens"}, "edited": false, "score": 0, "creation_date": 1613745276, "post_id": 37307420, "comment_id": 117178330, "body": "Thanks mate. It just worked for me."}], "tags": [], "owner": {"reputation": 5704, "user_id": 1236336, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9b3d57108481b0576bad482a82e698e6?s=128&d=identicon&r=PG", "display_name": "Graham Slick", "link": "https://stackoverflow.com/users/1236336/graham-slick"}, "is_accepted": true, "score": 62, "last_activity_date": 1463595900, "creation_date": 1463595900, "answer_id": 37307420, "question_id": 37307346, "link": "https://stackoverflow.com/questions/37307346/is-the-server-running-on-host-localhost-1-and-accepting-tcp-ip-connections/37307420#37307420", "title": "Is the server running on host &quot;localhost&quot; (::1) and accepting TCP/IP connections on port 5432?", "body": "<p>You most likely ran out of battery and your postgresql server didn't shutdown correctly. </p>\n\n<p>The easiest workaround is to download the official postgresql app and launch it: it will force the server to start (<a href=\"http://postgresapp.com/\" rel=\"noreferrer\">http://postgresapp.com/</a>)</p>\n"}, {"tags": [], "owner": {"reputation": 261, "user_id": 7704731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c5464df7771f32409f95f3e1ba7048d?s=128&d=identicon&r=PG", "display_name": "Shiva89", "link": "https://stackoverflow.com/users/7704731/shiva89"}, "is_accepted": false, "score": 26, "last_activity_date": 1600250332, "last_edit_date": 1600250332, "creation_date": 1489429784, "answer_id": 42770900, "question_id": 37307346, "link": "https://stackoverflow.com/questions/37307346/is-the-server-running-on-host-localhost-1-and-accepting-tcp-ip-connections/42770900#42770900", "title": "Is the server running on host &quot;localhost&quot; (::1) and accepting TCP/IP connections on port 5432?", "body": "<p>The postgresql server might be down and the solution might be as simple as running:</p>\n<pre><code>sudo service postgresql start\n</code></pre>\n<p>which fixed the issue for me.</p>\n"}, {"tags": [], "owner": {"reputation": 2294, "user_id": 2245697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931e42fa59a041551b7f63e703ea909a?s=128&d=identicon&r=PG&f=1", "display_name": "Tan", "link": "https://stackoverflow.com/users/2245697/tan"}, "is_accepted": false, "score": 15, "last_activity_date": 1493694081, "creation_date": 1493694081, "answer_id": 43729385, "question_id": 37307346, "link": "https://stackoverflow.com/questions/37307346/is-the-server-running-on-host-localhost-1-and-accepting-tcp-ip-connections/43729385#43729385", "title": "Is the server running on host &quot;localhost&quot; (::1) and accepting TCP/IP connections on port 5432?", "body": "<p>This worked in my case:</p>\n\n<pre><code>brew uninstall postgresql\nrm -fr /usr/local/var/postgres/\nbrew install postgresql\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1975, "user_id": 329104, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5eb57ea1f36182bdd64e5601a73262e6?s=128&d=identicon&r=PG", "display_name": "Paul Nelligan", "link": "https://stackoverflow.com/users/329104/paul-nelligan"}, "edited": false, "score": 4, "creation_date": 1513788490, "post_id": 45352573, "comment_id": 82789114, "body": "Best solution for my case, which is that my machine shut down unexpectedly and restarting the service was not solving the issue - thanks!"}, {"owner": {"reputation": 9584, "user_id": 1420684, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/78242bebaa42db9b1f771e6c19a074fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mirror318", "link": "https://stackoverflow.com/users/1420684/mirror318"}, "edited": false, "score": 4, "creation_date": 1522717477, "post_id": 45352573, "comment_id": 86248457, "body": "If you&#39;re using homebrew, <code>brew services start postgres</code> or <code>brew services restart postgres</code> might do the trick"}, {"owner": {"reputation": 1785, "user_id": 4708186, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ed4efdb64d47ef4cd282fd9a1b5ab007?s=128&d=identicon&r=PG&f=1", "display_name": "qasimalbaqali", "link": "https://stackoverflow.com/users/4708186/qasimalbaqali"}, "edited": false, "score": 1, "creation_date": 1540228416, "post_id": 45352573, "comment_id": 92778198, "body": "thank you! I ran with this issue for the second time, how did you understand that this would be the solution?"}, {"owner": {"reputation": 387, "user_id": 9111239, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214917599986927/picture?type=large", "display_name": "tito.300", "link": "https://stackoverflow.com/users/9111239/tito-300"}, "edited": false, "score": 1, "creation_date": 1557253130, "post_id": 45352573, "comment_id": 98700337, "body": "Any equivalent solution for linux ubuntu dist?"}, {"owner": {"reputation": 221, "user_id": 10295795, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hgepe_t9kxw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPAEV2w19BuzkVfen8Gi28fYKR4yQ/mo/photo.jpg?sz=128", "display_name": "Mwangi Kabiru", "link": "https://stackoverflow.com/users/10295795/mwangi-kabiru"}, "edited": false, "score": 1, "creation_date": 1563208508, "post_id": 45352573, "comment_id": 100615496, "body": "This worked for me in 2019 after hours of trying to resolve the issue."}, {"owner": {"reputation": 530, "user_id": 2493867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JzyXB.jpg?s=128&g=1", "display_name": "Ajay Maity", "link": "https://stackoverflow.com/users/2493867/ajay-maity"}, "edited": false, "score": 0, "creation_date": 1568385615, "post_id": 45352573, "comment_id": 102268938, "body": "This worked for me when nothing else on the internet did. My machine did shut down unexpectedly. Thanks so much."}, {"owner": {"reputation": 56, "user_id": 12230651, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBP8jSNmvIwz7amrzwgD1cy4lGLb6Owh5Wgludk=k-s128", "display_name": "Muhammad Usman Bashir", "link": "https://stackoverflow.com/users/12230651/muhammad-usman-bashir"}, "edited": false, "score": 0, "creation_date": 1584742584, "post_id": 45352573, "comment_id": 107539966, "body": "Best solution for my case, which is that my machine shut down unexpectedly and restarting the service was not solving the issue - thanks!"}, {"owner": {"reputation": 141, "user_id": 7943447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZAmMh.jpg?s=128&g=1", "display_name": "Houndjetode Noukpo Herve", "link": "https://stackoverflow.com/users/7943447/houndjetode-noukpo-herve"}, "edited": false, "score": 0, "creation_date": 1608536558, "post_id": 45352573, "comment_id": 115604049, "body": "We are  in dec 2020 and this solution work for me after a long time of research. thanks a lot"}], "tags": [], "owner": {"reputation": 1441, "user_id": 8376606, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/861dfc028401aa1da8a025a4491af699?s=128&d=identicon&r=PG", "display_name": "user8376606", "link": "https://stackoverflow.com/users/8376606/user8376606"}, "is_accepted": false, "score": 144, "last_activity_date": 1548913329, "last_edit_date": 1548913329, "creation_date": 1501162895, "answer_id": 45352573, "question_id": 37307346, "link": "https://stackoverflow.com/questions/37307346/is-the-server-running-on-host-localhost-1-and-accepting-tcp-ip-connections/45352573#45352573", "title": "Is the server running on host &quot;localhost&quot; (::1) and accepting TCP/IP connections on port 5432?", "body": "<p>run  <code>postgres -D /usr/local/var/postgres</code> and you should see something like:</p>\n\n<pre><code> FATAL:  lock file \"postmaster.pid\" already exists\n HINT:   Is another postmaster (PID 379) running in data directory \"/usr/local/var/postgres\"?\n</code></pre>\n\n<p>Then run <code>kill -9 PID</code> in HINT</p>\n\n<p>And you should be good to go.</p>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 7235046, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ty3V9prLyBs/AAAAAAAAAAI/AAAAAAAAHF0/SBTKvdyjlwM/photo.jpg?sz=128", "display_name": "\u7ba1\u6d69\u6d69", "link": "https://stackoverflow.com/users/7235046/%e7%ae%a1%e6%b5%a9%e6%b5%a9"}, "is_accepted": false, "score": 0, "last_activity_date": 1508122249, "creation_date": 1508122249, "answer_id": 46762274, "question_id": 37307346, "link": "https://stackoverflow.com/questions/37307346/is-the-server-running-on-host-localhost-1-and-accepting-tcp-ip-connections/46762274#46762274", "title": "Is the server running on host &quot;localhost&quot; (::1) and accepting TCP/IP connections on port 5432?", "body": "<p>I often encounter this problem on windows,the way I solved the problem is Service - Click PostgreSQL Database Server 8.3 -  Click the second tab \"log in\" - choose the first line \"the local system account\".</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 6155941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5563ac5a9d7cc02973f903d5b82fd5e7?s=128&d=identicon&r=PG", "display_name": "vonvick", "link": "https://stackoverflow.com/users/6155941/vonvick"}, "is_accepted": false, "score": 1, "last_activity_date": 1508934768, "creation_date": 1508934768, "answer_id": 46932556, "question_id": 37307346, "link": "https://stackoverflow.com/questions/37307346/is-the-server-running-on-host-localhost-1-and-accepting-tcp-ip-connections/46932556#46932556", "title": "Is the server running on host &quot;localhost&quot; (::1) and accepting TCP/IP connections on port 5432?", "body": "<p>This worked for me:\nrun</p>\n\n<p><code>sudo lsof -i :&lt;port_number&gt;</code></p>\n\n<p>after that it will display the PID which is currently attached to the process.</p>\n\n<p>After that run <code>sudo kill -9 &lt;PID&gt;</code></p>\n\n<p>if that doesn't work,\ntry the solution offered by user8376606 it would definitely work!</p>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 5142559, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZTLLIhkiIH8/AAAAAAAAAAI/AAAAAAAABAo/sFacaRSvG0c/photo.jpg?sz=128", "display_name": "ranvir", "link": "https://stackoverflow.com/users/5142559/ranvir"}, "is_accepted": false, "score": 2, "last_activity_date": 1509324809, "creation_date": 1509324809, "answer_id": 47006810, "question_id": 37307346, "link": "https://stackoverflow.com/questions/37307346/is-the-server-running-on-host-localhost-1-and-accepting-tcp-ip-connections/47006810#47006810", "title": "Is the server running on host &quot;localhost&quot; (::1) and accepting TCP/IP connections on port 5432?", "body": "<p>If you want to restart Postgresql on Linux, then you have to use the following command.</p>\n\n<p><code>/etc/init.d/postgresql restart</code></p>\n"}, {"comments": [{"owner": {"reputation": 7571, "user_id": 4578513, "user_type": "registered", "accept_rate": 15, "profile_image": "https://i.stack.imgur.com/mUo1D.jpg?s=128&g=1", "display_name": "Developine", "link": "https://stackoverflow.com/users/4578513/developine"}, "edited": false, "score": 0, "creation_date": 1576479305, "post_id": 47314003, "comment_id": 104898843, "body": "Yes my system shut down unexpectedly and this solved my problem. thank you."}], "tags": [], "owner": {"reputation": 597, "user_id": 7395785, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-p6f7iBWGO9w/AAAAAAAAAAI/AAAAAAAAFBQ/RecFm84EiCY/photo.jpg?sz=128", "display_name": "Nishant", "link": "https://stackoverflow.com/users/7395785/nishant"}, "is_accepted": false, "score": 58, "last_activity_date": 1510767701, "creation_date": 1510767701, "answer_id": 47314003, "question_id": 37307346, "link": "https://stackoverflow.com/questions/37307346/is-the-server-running-on-host-localhost-1-and-accepting-tcp-ip-connections/47314003#47314003", "title": "Is the server running on host &quot;localhost&quot; (::1) and accepting TCP/IP connections on port 5432?", "body": "<p>Most likely it's because your system shutdown unexpectedly</p>\n\n<p>Try</p>\n\n<pre><code>postgres -D /usr/local/var/postgres\n</code></pre>\n\n<p>You might see</p>\n\n<blockquote>\n<pre><code>FATAL:  lock file \"postmaster.pid\" already exists\nHINT:  Is another postmaster (PID 449) running in data directory \"/usr/local/var/postgres\"?\n</code></pre>\n</blockquote>\n\n<p>Then try</p>\n\n<pre><code>kill -9 PID\n</code></pre>\n\n<p>example</p>\n\n<pre><code>kill -9 419\n</code></pre>\n\n<p>And it should start postgres normally</p>\n"}, {"comments": [{"owner": {"reputation": 1051, "user_id": 6400617, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cMEGa.jpg?s=128&g=1", "display_name": "Nicolas Bodin-Ripert", "link": "https://stackoverflow.com/users/6400617/nicolas-bodin-ripert"}, "edited": false, "score": 1, "creation_date": 1606903311, "post_id": 51095321, "comment_id": 115101414, "body": "Thx! Personally I had to remove in this way: rm /Users/&lt;username&gt;/Library/Application\\ Support/Postgres/var-&lt;versionId&gt;/postmaster.pid"}], "tags": [], "owner": {"reputation": 663, "user_id": 7536631, "user_type": "registered", "profile_image": "https://graph.facebook.com/1255313637849608/picture?type=large", "display_name": "Aman Kumar", "link": "https://stackoverflow.com/users/7536631/aman-kumar"}, "is_accepted": false, "score": 19, "last_activity_date": 1600201505, "last_edit_date": 1600201505, "creation_date": 1530252729, "answer_id": 51095321, "question_id": 37307346, "link": "https://stackoverflow.com/questions/37307346/is-the-server-running-on-host-localhost-1-and-accepting-tcp-ip-connections/51095321#51095321", "title": "Is the server running on host &quot;localhost&quot; (::1) and accepting TCP/IP connections on port 5432?", "body": "<p>This could be caused by the pid file created for postgres which has not been deleted due to unexpected shutdown. To fix this, remove this pid file.</p>\n<ol>\n<li><p>Find the postgres data directory. On a MAC using homebrew it is <code>/usr/local/var/postgres/</code>, other systems it might be <code>/usr/var/postgres/</code></p>\n</li>\n<li><p>Remove pid file by running:</p>\n<pre><code>rm postmaster.pid\n</code></pre>\n</li>\n<li><p>Restart postgress. On Mac, run:</p>\n<pre><code>brew services restart postgresql\n</code></pre>\n</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 4509, "user_id": 2936491, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/BIeeI.jpg?s=128&g=1", "display_name": "techdreams", "link": "https://stackoverflow.com/users/2936491/techdreams"}, "is_accepted": false, "score": 3, "last_activity_date": 1531205345, "creation_date": 1531205345, "answer_id": 51258798, "question_id": 37307346, "link": "https://stackoverflow.com/questions/37307346/is-the-server-running-on-host-localhost-1-and-accepting-tcp-ip-connections/51258798#51258798", "title": "Is the server running on host &quot;localhost&quot; (::1) and accepting TCP/IP connections on port 5432?", "body": "<p>I resolved the issue via this command</p>\n\n<pre><code>pg_ctl -D /usr/local/var/postgres start\n</code></pre>\n\n<p>At times, you might get this error</p>\n\n<pre><code>pg_ctl: another server might be running; trying to start server anyway\n</code></pre>\n\n<p>So, try running the following command and then run the first command given above.</p>\n\n<pre><code>pg_ctl -D /usr/local/var/postgres stop\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 293, "user_id": 3901769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/d6ycu.jpg?s=128&g=1", "display_name": "Talha Meh", "link": "https://stackoverflow.com/users/3901769/talha-meh"}, "is_accepted": false, "score": 16, "last_activity_date": 1566566639, "last_edit_date": 1566566639, "creation_date": 1565947632, "answer_id": 57522125, "question_id": 37307346, "link": "https://stackoverflow.com/questions/37307346/is-the-server-running-on-host-localhost-1-and-accepting-tcp-ip-connections/57522125#57522125", "title": "Is the server running on host &quot;localhost&quot; (::1) and accepting TCP/IP connections on port 5432?", "body": "<p>I had almost just as same error with my Ruby on Rails application running postgresql(mac). This worked for me:</p>\n\n<pre><code>brew services restart postgresql\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 358, "user_id": 8708097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/APLHT.jpg?s=128&g=1", "display_name": "Saif chaudhry", "link": "https://stackoverflow.com/users/8708097/saif-chaudhry"}, "is_accepted": false, "score": 1, "last_activity_date": 1566110610, "creation_date": 1566110610, "answer_id": 57542285, "question_id": 37307346, "link": "https://stackoverflow.com/questions/37307346/is-the-server-running-on-host-localhost-1-and-accepting-tcp-ip-connections/57542285#57542285", "title": "Is the server running on host &quot;localhost&quot; (::1) and accepting TCP/IP connections on port 5432?", "body": "<p>First I tried </p>\n\n<blockquote>\n  <p>lsof -wni tcp:5432\n  but it doesn't show any PID number.</p>\n</blockquote>\n\n<p>Second I tried </p>\n\n<blockquote>\n  <p>Postgres -D /usr/local/var/postgres\n  and it showed that server is listening.</p>\n</blockquote>\n\n<p>So I just restarted my mac to restore all ports back and it worked for me.</p>\n"}, {"tags": [], "owner": {"reputation": 5031, "user_id": 8741356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W1hSm.jpg?s=128&g=1", "display_name": "Tomasz Bartkowiak", "link": "https://stackoverflow.com/users/8741356/tomasz-bartkowiak"}, "is_accepted": false, "score": 1, "last_activity_date": 1566947501, "last_edit_date": 1566947501, "creation_date": 1566934721, "answer_id": 57681228, "question_id": 37307346, "link": "https://stackoverflow.com/questions/37307346/is-the-server-running-on-host-localhost-1-and-accepting-tcp-ip-connections/57681228#57681228", "title": "Is the server running on host &quot;localhost&quot; (::1) and accepting TCP/IP connections on port 5432?", "body": "<p>For <strong>Docker</strong> users: In my case it was caused by excessive docker image size. You can remove unused data using <code>prune</code> command:</p>\n\n<pre><code>docker system prune --all --force --volumes\n</code></pre>\n\n<p><strong>Warning:</strong> as per manual (<code>docker system prune --help</code>):</p>\n\n<blockquote>\n  <p>This will remove:</p>\n  \n  <ul>\n  <li>all stopped containers</li>\n  <li>all networks not used by at least one container</li>\n  <li>all dangling images</li>\n  <li>all dangling build cache</li>\n  </ul>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1091, "user_id": 10270590, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5zbS.png?s=128&g=1", "display_name": "sogu", "link": "https://stackoverflow.com/users/10270590/sogu"}, "is_accepted": false, "score": 0, "last_activity_date": 1582366185, "last_edit_date": 1582366185, "creation_date": 1582288393, "answer_id": 60338748, "question_id": 37307346, "link": "https://stackoverflow.com/questions/37307346/is-the-server-running-on-host-localhost-1-and-accepting-tcp-ip-connections/60338748#60338748", "title": "Is the server running on host &quot;localhost&quot; (::1) and accepting TCP/IP connections on port 5432?", "body": "<p>It also gives the same error if you just stop your PostgreSQL app. You just need to start it again. (PostgreSQL 11)</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12185950, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4ziZNTfl8Fs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfKzl6Lcl68ChqM4l56jA5XXMRjTQ/photo.jpg?sz=128", "display_name": "Usha Sravani", "link": "https://stackoverflow.com/users/12185950/usha-sravani"}, "is_accepted": false, "score": 0, "last_activity_date": 1592310780, "creation_date": 1592310780, "answer_id": 62408603, "question_id": 37307346, "link": "https://stackoverflow.com/questions/37307346/is-the-server-running-on-host-localhost-1-and-accepting-tcp-ip-connections/62408603#62408603", "title": "Is the server running on host &quot;localhost&quot; (::1) and accepting TCP/IP connections on port 5432?", "body": "<p>I have faced the same issue and I was unable to start the postgresql server and was unable to access my db even after giving password, and I have been doing all the possible ways.</p>\n\n<p>This solution worked for me,</p>\n\n<p>For the Ubuntu users:\nThrough command line, type the following commands:</p>\n\n<p>1.service --status-all (which gives list of all services and their status. where \"+\" refers to running and \"-\" refers that the service is no longer running)</p>\n\n<p>check for postgresql status, if its \"-\" then type the following command</p>\n\n<p>2.systemctl start postgresql (starts the server again)</p>\n\n<p><strong>refresh the postgresql page in browser, and it works</strong></p>\n\n<p>For the Windows users:</p>\n\n<p>Search for services, where we can see list of services and the right click on postgresql, click on start and server works perfectly fine.</p>\n"}, {"tags": [], "owner": {"reputation": 27, "user_id": 12296979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/672ec1674b6a45e831be44c6e6412d8f?s=128&d=identicon&r=PG&f=1", "display_name": "Niranjan", "link": "https://stackoverflow.com/users/12296979/niranjan"}, "is_accepted": false, "score": 1, "last_activity_date": 1593005061, "creation_date": 1593005061, "answer_id": 62556159, "question_id": 37307346, "link": "https://stackoverflow.com/questions/37307346/is-the-server-running-on-host-localhost-1-and-accepting-tcp-ip-connections/62556159#62556159", "title": "Is the server running on host &quot;localhost&quot; (::1) and accepting TCP/IP connections on port 5432?", "body": "<p>In my case</p>\n<ol>\n<li>I have changed the port in postgresql.conf file</li>\n<li>and restart postgresql services in</li>\n</ol>\n<p>Run =&gt; service.msc =&gt; Restart</p>\n<ol start=\"3\">\n<li>now retry</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 339, "user_id": 11932259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8FJAt.jpg?s=128&g=1", "display_name": "Muhammad Usama Rabani", "link": "https://stackoverflow.com/users/11932259/muhammad-usama-rabani"}, "is_accepted": false, "score": 0, "last_activity_date": 1599142935, "creation_date": 1599142935, "answer_id": 63725632, "question_id": 37307346, "link": "https://stackoverflow.com/questions/37307346/is-the-server-running-on-host-localhost-1-and-accepting-tcp-ip-connections/63725632#63725632", "title": "Is the server running on host &quot;localhost&quot; (::1) and accepting TCP/IP connections on port 5432?", "body": "<p>Step 1:</p>\n<pre><code>cd /etc/postgresql/12/main/\n</code></pre>\n<p>open file named <code>postgresql.conf</code></p>\n<pre><code>sudo nano postgresql.conf\n</code></pre>\n<p>add this line to that file</p>\n<pre><code>listen_addresses = '*'\n</code></pre>\n<p>then open file named <code>pg_hba.conf</code></p>\n<pre><code>sudo nano pg_hba.conf\n</code></pre>\n<p>and add this line to that file</p>\n<pre><code>host  all  all 0.0.0.0/0 md5\n</code></pre>\n<p>It allows access to all databases for all users with an encrypted password</p>\n<p><strong>restart your server</strong></p>\n<pre><code>sudo /etc/init.d/postgresql restart\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2542, "user_id": 5763627, "user_type": "registered", "profile_image": "https://graph.facebook.com/941560632625951/picture?type=large", "display_name": "Divyanshu Rawat", "link": "https://stackoverflow.com/users/5763627/divyanshu-rawat"}, "is_accepted": false, "score": 0, "last_activity_date": 1607554184, "creation_date": 1607554184, "answer_id": 65226081, "question_id": 37307346, "link": "https://stackoverflow.com/questions/37307346/is-the-server-running-on-host-localhost-1-and-accepting-tcp-ip-connections/65226081#65226081", "title": "Is the server running on host &quot;localhost&quot; (::1) and accepting TCP/IP connections on port 5432?", "body": "<p>I encountered a similar problem when I was trying to connect my <strong>Django</strong> application to <strong>PostgreSQL</strong> database.</p>\n<p>I wrote my <code>Dockerfile</code> with instructions to setup the <strong>Django</strong> project followed by instructions to install <strong>PostgreSQL</strong> and run <strong>Django</strong> server in my <code>docker-compose.yml</code>.</p>\n<p>I defined two services in my <code>docker-compose-yml</code>.</p>\n<pre><code>services:\n  postgres:\n    image: &quot;postgres:latest&quot;\n    environment:\n      - POSTGRES_DB=abc\n      - POSTGRES_USER=abc\n      - POSTGRES_PASSWORD=abc\n    volumes:\n      - pg_data:/var/lib/postgresql/data/\n  django:\n    build: .\n    command: python /code/manage.py runserver 0.0.0.0:8004\n    volumes:\n      - .:/app\n    ports:\n      - 8004:8004\n    depends_on:\n      - postgres \n</code></pre>\n<p>Unfortunately whenever I used to run <code>docker-compose up</code> then same err. used to pop up.</p>\n<p>And this is how my database was defined in <strong>Django</strong> <code>settings.py</code>.</p>\n<pre><code>DATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.postgresql',\n        'NAME': 'abc',\n        'USER': 'abc',\n        'PASSWORD': 'abc',\n        'HOST': '127.0.0.1',\n        'PORT': '5432',\n        'OPTIONS': {\n            'client_encoding': 'UTF8',\n        },\n    }\n} \n</code></pre>\n<p>So, In the end I made use of <code>docker-compose</code> <a href=\"https://docs.docker.com/compose/networking/\" rel=\"nofollow noreferrer\">networking</a> which means if I change the <code>host</code> of my database to <code>postgres</code> which is defined as a service in <code>docker-compose.yml</code> will do the wonders.</p>\n<p>So, Replacing <code>'HOST': '127.0.0.1'</code> <strong>=&gt;</strong>   <code>'HOST': 'postgres'</code> did wonders for me.</p>\n<p>After replacement this is how your Database config in <code>settings.py</code> will look like.</p>\n<pre><code>DATABASES = {\n        'default': {\n            'ENGINE': 'django.db.backends.postgresql',\n            'NAME': 'abc',\n            'USER': 'abc',\n            'PASSWORD': 'abc',\n            'HOST': 'postgres',\n            'PORT': '5432',\n            'OPTIONS': {\n                'client_encoding': 'UTF8',\n            },\n        }\n    } \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238, "user_id": 4202997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e4e7946707f513eec03ea30822145cb?s=128&d=identicon&r=PG&f=1", "display_name": "alkadelik", "link": "https://stackoverflow.com/users/4202997/alkadelik"}, "is_accepted": false, "score": 0, "last_activity_date": 1608554943, "creation_date": 1608554943, "answer_id": 65393092, "question_id": 37307346, "link": "https://stackoverflow.com/questions/37307346/is-the-server-running-on-host-localhost-1-and-accepting-tcp-ip-connections/65393092#65393092", "title": "Is the server running on host &quot;localhost&quot; (::1) and accepting TCP/IP connections on port 5432?", "body": "<p>In my case I forgot to change the database from postgres (on my production) back to sqlite3 which I was using for development.</p>\n"}, {"tags": [], "owner": {"reputation": 172, "user_id": 10753315, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vFttx.jpg?s=128&g=1", "display_name": "Abu Sayem Md Habibullah", "link": "https://stackoverflow.com/users/10753315/abu-sayem-md-habibullah"}, "is_accepted": false, "score": 0, "last_activity_date": 1617307030, "creation_date": 1617307030, "answer_id": 66910798, "question_id": 37307346, "link": "https://stackoverflow.com/questions/37307346/is-the-server-running-on-host-localhost-1-and-accepting-tcp-ip-connections/66910798#66910798", "title": "Is the server running on host &quot;localhost&quot; (::1) and accepting TCP/IP connections on port 5432?", "body": "<h2><strong>It's working for me</strong> &gt;&gt;Node.Js App</h2>\n<p>user@MacBook-Pro % sudo lsof -i :5430</p>\n<p><strong>Output</strong></p>\n<p>COMMAND  PID           user  FD   TYPE             DEVICE SIZE/OFF NODE NAME</p>\n<p>node    7885 user   21u  IPv6 0x2e7d89f6118f95b9      0t0  TCP *:radec-corp (LISTEN)</p>\n<p><strong>Kill the PID</strong></p>\n<p>user@MacBook-Pro % sudo kill -9 7885</p>\n<p><strong>One more test</strong></p>\n<p>user@MacBook-Pro % sudo lsof -i :5430</p>\n<p>user@MacBook-Pro % <strong>&quot;No more running PID for the port 5430&quot;</strong></p>\n"}], "owner": {"reputation": 5291, "user_id": 2852424, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/AIdLu.png?s=128&g=1", "display_name": "Thibaud Clement", "link": "https://stackoverflow.com/users/2852424/thibaud-clement"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172935, "favorite_count": 32, "protected_date": 1594033143, "accepted_answer_id": 37307420, "answer_count": 20, "score": 93, "last_activity_date": 1617307030, "creation_date": 1463595635, "last_edit_date": 1537337546, "question_id": 37307346, "link": "https://stackoverflow.com/questions/37307346/is-the-server-running-on-host-localhost-1-and-accepting-tcp-ip-connections", "title": "Is the server running on host &quot;localhost&quot; (::1) and accepting TCP/IP connections on port 5432?", "body": "<p>Before anything, please note that I have found several similar questions on Stack Overflow and articles all over the web, but none of those helped me fix my issue:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/24333317/pg-error-could-not-connect-to-server-connection-refused-is-the-server-running-o\">PG Error could not connect to server: Connection refused Is the server running on port 5432?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/19828385/pgconnectionbad-could-not-connect-to-server-connection-refused\">PG::ConnectionBad - could not connect to server: Connection refused</a></li>\n<li><a href=\"https://github.com/PostgresApp/PostgresApp/issues/37\" rel=\"noreferrer\">psql: could not connect to server: Connection refused</a></li>\n</ul>\n\n<p>Now, here is the issue:</p>\n\n<ul>\n<li>I have a Rails app that works like a charm.</li>\n<li>With my collaborator, we use GitHub to work together.</li>\n<li>We have a <code>master</code> and an <code>mvp</code> branches.</li>\n<li>I recently updated my <code>git</code> version with Homebrew (Mac).</li>\n<li>We use Foreman to start our app locally.</li>\n</ul>\n\n<p>Now, when I try to launch the app locally, I get the following error:</p>\n\n<pre><code>PG::ConnectionBad at /\ncould not connect to server: Connection refused\n    Is the server running on host \"localhost\" (::1) and accepting\n    TCP/IP connections on port 5432?\ncould not connect to server: Connection refused\n    Is the server running on host \"localhost\" (127.0.0.1) and accepting\n    TCP/IP connections on port 5432?\n</code></pre>\n\n<p>I tried to reboot my computers several times.</p>\n\n<p>I also checked the content of <code>/usr/local/var/postgres</code>:</p>\n\n<pre><code>PG_VERSION      pg_dynshmem     pg_multixact    pg_snapshots    pg_tblspc       postgresql.conf\nbase            pg_hba.conf     pg_notify       pg_stat         pg_twophase     postmaster.opts\nglobal          pg_ident.conf   pg_replslot     pg_stat_tmp     pg_xlog         server.log\npg_clog         pg_logical      pg_serial       pg_subtrans     postgresql.auto.conf\n</code></pre>\n\n<p>As you can see, there is no <code>postmaster.pid</code> file in there.</p>\n\n<p>Any idea how I could fix this?</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "twitter-bootstrap", "bootstrap-modal"], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 5811730, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5e63a018006bf9925ef32e34cae79547?s=128&d=identicon&r=PG&f=1", "display_name": "Helban", "link": "https://stackoverflow.com/users/5811730/helban"}, "is_accepted": true, "score": 0, "last_activity_date": 1463595096, "creation_date": 1463595096, "answer_id": 37307219, "question_id": 37306869, "link": "https://stackoverflow.com/questions/37306869/modal-gallery-wont-work-when-going-to-subpage-from-navbar-but-works-when-going/37307219#37307219", "title": "Modal gallery won&#39;t work when going to subpage from navbar, but works when going directly through URL", "body": "<p>Alright, it looks like i found a solution, however I am not sure if that\u2019s the \"correct\" way to do this, BUT it works!</p>\n\n<p>So what I did, was to change the javascript part to this:</p>\n\n<pre><code>jQuery(document).on('ready page:load', function() {\n  $('ul.first').bsPhotoGallery({\n    \"classes\" : \"col-lg-2 col-md-4 col-sm-3 col-xs-4 col-xxs-12\",\n    \"hasModal\" : true\n  });\n});\n</code></pre>\n\n<p>And now it works both, when accessing the url directly, or when navigating from other pages :)</p>\n\n<p>I hope this will be helpful to someone some day!</p>\n"}], "owner": {"reputation": 81, "user_id": 5811730, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5e63a018006bf9925ef32e34cae79547?s=128&d=identicon&r=PG&f=1", "display_name": "Helban", "link": "https://stackoverflow.com/users/5811730/helban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 37307219, "answer_count": 1, "score": 0, "last_activity_date": 1463595096, "creation_date": 1463593786, "question_id": 37306869, "link": "https://stackoverflow.com/questions/37306869/modal-gallery-wont-work-when-going-to-subpage-from-navbar-but-works-when-going", "title": "Modal gallery won&#39;t work when going to subpage from navbar, but works when going directly through URL", "body": "<p>I am having a strange problem that I cannot figure out. I made an modal image gallery, and everything works fine when I go directly to the link, that is I type in browser bar <a href=\"http://localhost:3000/gallery\" rel=\"nofollow\">http://localhost:3000/gallery</a> and press enter.</p>\n\n<p>Gallery works fine, but when I navigate to the gallery from the home page by clicking the gallery link on the navigation bar, it doesn\u2019t work completely, like the snippet for the modal wouldn't load for some reason.\nTheres no file upload, nothing, just static images on the server for now that I want displayed.</p>\n\n<p>Where did I make a mistake doing this?</p>\n\n<p>I've been following this tutorial/jquery plugin to do that:</p>\n\n<p><a href=\"https://github.com/michaelsoriano/bootstrap-photo-gallery\" rel=\"nofollow\">https://github.com/michaelsoriano/bootstrap-photo-gallery</a></p>\n\n<hr>\n\n<p>Here are the most important parts I guess:</p>\n\n<p>A static page gallery.html.erb:</p>\n\n<pre><code>&lt;% provide(:title, \"Gallery\") %&gt;\n&lt;h1&gt;Gallery&lt;/h1&gt;\n&lt;div class=\"container photos\"&gt;\n  &lt;ul class=\"first\"&gt;\n      &lt;% @photos.each do |photo|%&gt;\n        &lt;li&gt;\n          &lt;img src=\"&lt;%= image_path(photo) %&gt;\" style=\"max-height: 150px !important; min-height: 150px;\"&gt;\n        &lt;/li&gt;\n      &lt;% end %&gt;\n  &lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n\n<hr>\n\n<p>Here is the part of code that i've put inside application.js that is responsible for the modal to work:</p>\n\n<pre><code>$(document).ready(function(){\n  $('ul.first').bsPhotoGallery({\n    \"classes\" : \"col-lg-2 col-md-4 col-sm-3 col-xs-4 col-xxs-12\",\n    \"hasModal\" : true\n  });\n});\n</code></pre>\n\n<p>Here is the link to the gallery that i've placed in my header navbar:</p>\n\n<pre><code>&lt;li&gt;&lt;%= link_to \"Gallery\", gallery_path %&gt;&lt;/li&gt;\n</code></pre>\n\n<p>And in routes.rb i've placed only:</p>\n\n<pre><code>get 'gallery' =&gt; 'static_pages#gallery'\n</code></pre>\n\n<p>I sense that the js code should probably be manipulated somehow/put somewhere else for it to work both when going directly to the link or when navigating to the gallery from the homepage. But I am out of clues and/or why is it happening like that.</p>\n\n<p>If you need more information, please let me know.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rest-client"], "comments": [{"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 2, "creation_date": 1463593363, "post_id": 37306123, "comment_id": 62134782, "body": "RSpec error seems to be from another test. Namely &quot;<i>when location &#39;options&#39; are requested receives an &#39;options&#39; argument</i>&quot;."}, {"owner": {"reputation": 59, "user_id": 4589006, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-INqmEE4DlW4/AAAAAAAAAAI/AAAAAAAACg8/LGt2kFMtRZA/photo.jpg?sz=128", "display_name": "Sam Lindstrom", "link": "https://stackoverflow.com/users/4589006/sam-lindstrom"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1463615968, "post_id": 37306123, "comment_id": 62144598, "body": "They are in fact the same test, but I mistakenly included the error message from an older version of it. I have updated the above RSpec error to reflect the updated test name."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 4589006, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-INqmEE4DlW4/AAAAAAAAAAI/AAAAAAAACg8/LGt2kFMtRZA/photo.jpg?sz=128", "display_name": "Sam Lindstrom", "link": "https://stackoverflow.com/users/4589006/sam-lindstrom"}, "edited": false, "score": 0, "creation_date": 1463846475, "post_id": 37329310, "comment_id": 62243224, "body": "I&#39;m still perplexed as to why the &#39;response&#39; variable continues to be returned as nil, but the feedback regarding test fragility is what I was suspicious of. As it stands, I feel as though I should just change the test to be more flexible. Thank you!"}], "tags": [], "owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "is_accepted": true, "score": 1, "last_activity_date": 1463675985, "creation_date": 1463675985, "answer_id": 37329310, "question_id": 37306123, "link": "https://stackoverflow.com/questions/37306123/testing-restclientrequest-execute-in-rspec/37329310#37329310", "title": "Testing RestClient::Request.execute in RSpec", "body": "<p>Not considering minor syntax errors like <code>api_version=2.0&amp;app_id=ShowBoat</code> in your <code>ApiClient</code> class, the problem seems to be caused by your <code>RestClient::Request.execute</code> request returning <code>nil</code>.</p>\n\n<p>Debug or inspect the value of <code>response</code> and make sure it is not <code>nil</code>.</p>\n\n<pre><code>class ApiClient &lt; ActiveRecord::Base\n\n  BASE_PATH = \"http://api.bandsintown.com/artists/\"\n  APP_ID = ENV[\"APP_ID\"]\n\n  def do_request(method:, base_url:BASE_PATH, app_id:APP_ID, url:, format:\"json\", options: nil)\n    response = RestClient::Request.execute(method: method.to_sym, \n                                           url: \"#{base_url}#{url}.#{format}?api_version=2.0&amp;app_id=#{app_id}#{options}\", \n                                           timeout: 10)\n    puts response.inspect\n    response ? JSON.parse(response) : []\n  end\n</code></pre>\n\n<hr>\n\n<p>On the other hand, you are testing <code>ApiClient</code> class's implementation. In other words, you're testing that the class is internally calling some other class in specific manner. If you decide to replace the RestClient with HTTParty for example at some later time, your tests will fail (even though they shouldn't, because your class is still working correctly).</p>\n\n<p>So, testing the class's implementation makes your tests \"fragile\". Instead, give an input and test for the expected correct output.</p>\n\n<pre><code>describe ApiClient do\n  context \"with all required arguments\" do\n    describe \"#do_request\" do\n      it \"returns object in correct format\" do\n        response = subject.do_request(method:\"get\", app_id:\"ShowBoatTest\",url:\"Damien%20Jurado/events/search\",options:\"&amp;location=San+Diego,CA&amp;radius=15\")\n        expect(response.body).to include(title: \"Damien Jurado @ The Casbah in San Diego, CA\")\n        # etc.\n      end\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 4589006, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-INqmEE4DlW4/AAAAAAAAAAI/AAAAAAAACg8/LGt2kFMtRZA/photo.jpg?sz=128", "display_name": "Sam Lindstrom", "link": "https://stackoverflow.com/users/4589006/sam-lindstrom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1688, "favorite_count": 0, "accepted_answer_id": 37329310, "answer_count": 1, "score": 0, "last_activity_date": 1463758105, "creation_date": 1463591425, "last_edit_date": 1463758105, "question_id": 37306123, "link": "https://stackoverflow.com/questions/37306123/testing-restclientrequest-execute-in-rspec", "title": "Testing RestClient::Request.execute in RSpec", "body": "<p>I am trying to test that 'ApiClient.do_request' is sending the correct arguments and calling 'RestClient::Request.execute.' However, my below specs aren't working as intended. RSpec is unable to properly call 'RestClient::Request.execute,' as the method's 'response' variable keeps coming back as nil, which is why I get the below TypeError when JSON.parse(response) is called. What's strange to me is that I have no issues when walking through the process in Rails console. I'm sure there's something obvious I'm missing here... Any ideas why this is happening, or perhaps suggestions on how I can test this more effectively?</p>\n\n<p>Model:</p>\n\n<pre><code>class ApiClient &lt; ActiveRecord::Base\n\n  BASE_PATH = \"http://api.bandsintown.com/artists/\"\n  APP_ID = ENV[\"APP_ID\"]\n\n  def do_request(method:, base_url:BASE_PATH, app_id:APP_ID, url:, format:\"json\", options: nil)\n    response = RestClient::Request.execute(method: method.to_sym, \n                                           url: \"#{base_url}#{url}.#{format}?api_version=2.0&amp;app_id=#{app_id}#{options}\", \n                                           timeout: 10)\n\n    JSON.parse(response)\n  end\n</code></pre>\n\n<p>Spec:</p>\n\n<pre><code>describe ApiClient do\n\n  describe \"do_request\" do\n\n    context \"when all required arguments are present\" do\n      it \"RestClient executes the request\" do\n        @test_client = ApiClient.new\n\n        expect(RestClient::Request).to receive(:execute).with(:method=&gt;:get, :url=&gt; \"http://api.bandsintown.com/artists/Damien%20Jurado/events/search.json?api_version=2.0&amp;app_id=ShowBoatTest&amp;location=San+Diego,CA&amp;radius=15\", :timeout=&gt;10)\n\n        @test_client.do_request(method:\"get\", app_id:\"ShowBoatTest\",url:\"Damien%20Jurado/events/search\",options:\"&amp;location=San+Diego,CA&amp;radius=15\")\n      end\n    end\n  end\n</code></pre>\n\n<p>RSpec Error:</p>\n\n<pre><code>  1) ApiClient do_request when all required arguments are present RestClient executes the request\n Failure/Error: JSON.parse(response)\n\n TypeError:\n   no implicit conversion of nil into String\n # /Users/slamflipstrom/.rvm/gems/ruby-2.1.5/gems/json-1.8.3/lib/json/common.rb:155:in `initialize'\n # /Users/slamflipstrom/.rvm/gems/ruby-2.1.5/gems/json-1.8.3/lib/json/common.rb:155:in `new'\n # /Users/slamflipstrom/.rvm/gems/ruby-2.1.5/gems/json-1.8.3/lib/json/common.rb:155:in `parse'\n # ./app/models/api_client.rb:12:in `do_request'\n # ./spec/models/api_client_spec.rb:13:in `block (4 levels) in &lt;top (required)&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "chef-infra", "chef-recipe", "chef-solo"], "comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1463591063, "post_id": 37305782, "comment_id": 62133468, "body": "Try with single quotes, instead of double quotes..."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1463599065, "post_id": 37305782, "comment_id": 62137848, "body": "This literally defeats the point of encrypted data bags. Don&#39;t do it."}], "answers": [{"tags": [], "owner": {"reputation": 2626, "user_id": 70665, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9ad2a5355d8cfa842e24b7a4322b2535?s=128&d=identicon&r=PG", "display_name": "Martin", "link": "https://stackoverflow.com/users/70665/martin"}, "is_accepted": true, "score": 0, "last_activity_date": 1463600511, "last_edit_date": 1463600511, "creation_date": 1463595381, "answer_id": 37307281, "question_id": 37305782, "link": "https://stackoverflow.com/questions/37305782/passing-secret-as-an-chef-attribute-while-using-encrypted-databags/37307281#37307281", "title": "Passing secret as an Chef attribute while using encrypted databags", "body": "<p>According to <a href=\"http://www.rubydoc.info/github/opscode/chef/Chef%2FEncryptedDataBagItem.load_secret\" rel=\"nofollow\">the documentation</a>, <code>#load_secret</code> should be passed a path to a file containing the secret. If you don't want to put the secret in a file (this is the preferred way), you can pass the secret to every <code>#load</code> call (as <a href=\"http://www.rubydoc.info/github/opscode/chef/Chef%2FEncryptedDataBagItem.load\" rel=\"nofollow\">shown here</a>):</p>\n\n<pre><code>Chef::EncryptedDataBagItem.load(data_bag, name, secret = nil)\n</code></pre>\n"}], "owner": {"reputation": 8777, "user_id": 5632400, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dd1581444277a110a7b803f5ab4e4d14?s=128&d=identicon&r=PG&f=1", "display_name": "meallhour", "link": "https://stackoverflow.com/users/5632400/meallhour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "accepted_answer_id": 37307281, "answer_count": 1, "score": 0, "last_activity_date": 1463600511, "creation_date": 1463590414, "question_id": 37305782, "link": "https://stackoverflow.com/questions/37305782/passing-secret-as-an-chef-attribute-while-using-encrypted-databags", "title": "Passing secret as an Chef attribute while using encrypted databags", "body": "<p>I have already created a databag item which is existing on the chef server.<br>\nNow, I am trying to retrieve value of that databag item in Chef recipe<br>\nFor that purpose, I am creating Chef Databag and trying to pass the secret as an attribute:  </p>\n\n<pre><code>secret = Chef::EncryptedDataBagItem.load_secret(\"#{node['secret']}\")\nmasterkey = Chef::EncryptedDataBagItem.load(\"databag_secrets\", \"databag_masterkey\", secret)\n</code></pre>\n\n<p>I have declared node['secret'] as follows in the attribute section:  </p>\n\n<pre><code>default['secret']=\"lTW4d+2Wfjlf1gZ42x3qsJh4/GcwqTc5+kS62qKeAHrhzTiL/Bxp+hq3itwudNfUFggCOEaMTsR+Q/qgjx6unKNvKWMKIdCeNM8I4jCUeT2VDaU6C1VxIMrVqfpUmInLuHOaUpVdlnlejkeLBL2KzH5vA8Xx5t2eACBRvrHacTwORMgVr/pnSKBcSzC/wXGoc7bGk7kTd6SaswRfZHnOowxfs2xkGJOFbzyTLZNAqkrJJurBq/ycYGRK2J3ycNyTwISfVgG9YAvP6prHKPsWTp3JgOWNIeZ9ZMSKUy8Lh0vopluXJhSd1WC6ltNcHxSb\"\n</code></pre>\n\n<p>I am getting the following error:  </p>\n\n<pre><code>ERROR: FFI_Yajl::ParseError: lexical error: invalid character inside string.\n          S62qKeAHrhzTiL/Bxp+hq3itwudNfU\n                                        FggCOEaMTsR+Q/qgjx6\n                     (right here) ------^\n</code></pre>\n\n<p>Please let me know if it is allowed to pass secret as an attribute in Chef. If yes, how should I do that?\nIf not, what is the best way to pass secret in a secure way?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1463590737, "post_id": 37305774, "comment_id": 62133306, "body": "Where exactly you got that error? Can you update your question with full error stack?"}, {"owner": {"reputation": 101, "user_id": 4771501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf2a8b404090541bd27714575c7bf23?s=128&d=identicon&r=PG&f=1", "display_name": "Vin&#237;cius Venancio dos Santos", "link": "https://stackoverflow.com/users/4771501/vin%c3%adcius-venancio-dos-santos"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1463591231, "post_id": 37305774, "comment_id": 62133568, "body": "i got that error at <code>item_fields</code> partial"}, {"owner": {"reputation": 1133, "user_id": 1213844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K7BvS.png?s=128&g=1", "display_name": "michalvalasek", "link": "https://stackoverflow.com/users/1213844/michalvalasek"}, "edited": false, "score": 1, "creation_date": 1463591661, "post_id": 37305774, "comment_id": 62133833, "body": "You&#39;re passing the form object as <i>f</i> but you&#39;re accessimg it as <i>item</i> inside of the item_fields partial."}, {"owner": {"reputation": 101, "user_id": 4771501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf2a8b404090541bd27714575c7bf23?s=128&d=identicon&r=PG&f=1", "display_name": "Vin&#237;cius Venancio dos Santos", "link": "https://stackoverflow.com/users/4771501/vin%c3%adcius-venancio-dos-santos"}, "reply_to_user": {"reputation": 1133, "user_id": 1213844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K7BvS.png?s=128&g=1", "display_name": "michalvalasek", "link": "https://stackoverflow.com/users/1213844/michalvalasek"}, "edited": false, "score": 0, "creation_date": 1463592522, "post_id": 37305774, "comment_id": 62134317, "body": "Your&#39;re right @michalvalasek. but this was an older version of the code. i&#39;ve updated it now. Do you think that those relations are correct?"}, {"owner": {"reputation": 1133, "user_id": 1213844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K7BvS.png?s=128&g=1", "display_name": "michalvalasek", "link": "https://stackoverflow.com/users/1213844/michalvalasek"}, "edited": false, "score": 0, "creation_date": 1463592825, "post_id": 37305774, "comment_id": 62134488, "body": "@Vin&#237;ciusVenanciodosSantos Well, that&#39;s a bit hard to tell since I don&#39;t know much about the thing you&#39;re trying to model. It looks a little overcomplicated to me. I would expect just the User-Inventory-Item hierarchy. Other than that it looks OK."}, {"owner": {"reputation": 101, "user_id": 4771501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf2a8b404090541bd27714575c7bf23?s=128&d=identicon&r=PG&f=1", "display_name": "Vin&#237;cius Venancio dos Santos", "link": "https://stackoverflow.com/users/4771501/vin%c3%adcius-venancio-dos-santos"}, "reply_to_user": {"reputation": 1133, "user_id": 1213844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K7BvS.png?s=128&g=1", "display_name": "michalvalasek", "link": "https://stackoverflow.com/users/1213844/michalvalasek"}, "edited": false, "score": 0, "creation_date": 1463593231, "post_id": 37305774, "comment_id": 62134703, "body": "@michalvalasek, User-Inventory-Item it is exactly what i&#39;m trying to model. Actually, User-Inventory-Items seems to be correct, because it&#39;s a has_many through relation. But i can find the error, it looks okay for me. :("}, {"owner": {"reputation": 1133, "user_id": 1213844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K7BvS.png?s=128&g=1", "display_name": "michalvalasek", "link": "https://stackoverflow.com/users/1213844/michalvalasek"}, "edited": false, "score": 0, "creation_date": 1463594412, "post_id": 37305774, "comment_id": 62135332, "body": "@Vin&#237;ciusVenanciodosSantos What are the cardinalities of the relations?"}, {"owner": {"reputation": 101, "user_id": 4771501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf2a8b404090541bd27714575c7bf23?s=128&d=identicon&r=PG&f=1", "display_name": "Vin&#237;cius Venancio dos Santos", "link": "https://stackoverflow.com/users/4771501/vin%c3%adcius-venancio-dos-santos"}, "reply_to_user": {"reputation": 1133, "user_id": 1213844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K7BvS.png?s=128&g=1", "display_name": "michalvalasek", "link": "https://stackoverflow.com/users/1213844/michalvalasek"}, "edited": false, "score": 0, "creation_date": 1463594813, "post_id": 37305774, "comment_id": 62135551, "body": "@michalvalasek, User has one inventory, inventory has many items through inventory items, and items has many inventories through inventory_items. I hope you can understand this kk"}, {"owner": {"reputation": 1133, "user_id": 1213844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K7BvS.png?s=128&g=1", "display_name": "michalvalasek", "link": "https://stackoverflow.com/users/1213844/michalvalasek"}, "edited": false, "score": 0, "creation_date": 1463595121, "post_id": 37305774, "comment_id": 62135717, "body": "@Vin&#237;ciusVenanciodosSantos Does that mean that a User can have many Items and an item can belong to many Users? If so you can get rid of both Inventory and InventoryItem models. Just create has_and_belongs_to_many relation betwen User and Item model (both ways) and you should be fine."}, {"owner": {"reputation": 101, "user_id": 4771501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf2a8b404090541bd27714575c7bf23?s=128&d=identicon&r=PG&f=1", "display_name": "Vin&#237;cius Venancio dos Santos", "link": "https://stackoverflow.com/users/4771501/vin%c3%adcius-venancio-dos-santos"}, "reply_to_user": {"reputation": 1133, "user_id": 1213844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K7BvS.png?s=128&g=1", "display_name": "michalvalasek", "link": "https://stackoverflow.com/users/1213844/michalvalasek"}, "edited": false, "score": 0, "creation_date": 1463595743, "post_id": 37305774, "comment_id": 62136048, "body": "@michalvalasek the question is that the inventory is necessary. So i can&#39;t remove those associations"}], "owner": {"reputation": 101, "user_id": 4771501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcf2a8b404090541bd27714575c7bf23?s=128&d=identicon&r=PG&f=1", "display_name": "Vin&#237;cius Venancio dos Santos", "link": "https://stackoverflow.com/users/4771501/vin%c3%adcius-venancio-dos-santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1463631175, "creation_date": 1463590382, "last_edit_date": 1463631175, "question_id": 37305774, "link": "https://stackoverflow.com/questions/37305774/nested-attributes-with-ruby-on-rails", "title": "Nested attributes with ruby on rails", "body": "<p>I'm developing a system to improve my Rails skills, which will allow anyone to create a user.  This user will have an inventory, which will contain multiple items. </p>\n\n<p>My question is how can I store all the resources when saving a new user. I'm trying to use <code>cocoon</code> gem, and I got this error message:</p>\n\n<pre><code>undefined method `new_record?' for nil:NilClass\n</code></pre>\n\n<p>at this part of the code:</p>\n\n<pre><code>&lt;%= link_to_remove_association \"remove item\", f %&gt;\n</code></pre>\n\n<p><strong>Models</strong></p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_one :inventory\n\n  delegate :items, to: :inventory, prefix: true\n\n  accepts_nested_attributes_for :inventory\nend\n\nclass Inventory &lt; ActiveRecord::Base\n  has_many :inventory_items\n  has_many :items, through: :inventory_items\n\n  accepts_nested_attributes_for :inventory_items, reject_if: :all_blank, allow_destroy: true\nend\n\nclass InventoryItem &lt; ActiveRecord::Base\n  belongs_to :item\n  belongs_to :inventory\nend\n</code></pre>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  def new\n    @user = User.new.tap do |user|\n      user.inventory = Inventory.new\n      user.inventory_items.build\n    end\n  end\n\n  private\n\n  def user_params\n    params\n      .require(:user)\n      .permit(\n        :name,\n        :lat,\n        :long,\n        :age,\n        inventory_attributes: [:id, inventory_items_attributes: [:quantity, :inventory_id, :item_id, :_destroy]]\n      )\n  end\nend\n</code></pre>\n\n<p><strong>User form</strong></p>\n\n<pre><code>&lt;%= simple_form_for(@user) do |f| %&gt;\n  &lt;%= f.error_notification %&gt;\n\n  &lt;div class=\"form-inputs\"&gt;\n    &lt;%= f.input :name %&gt;\n    &lt;%= f.input :lat %&gt;\n    &lt;%= f.input :long %&gt;\n  &lt;/div&gt;\n\n  &lt;h3&gt;Items&lt;/h3&gt;\n  &lt;div id=\"inventory_items\"&gt;\n    &lt;%= f.simple_fields_for :inventory do |inventory| %&gt;\n      &lt;%= inventory.simple_fields_for :inventory_items do |f| %&gt;\n        &lt;%= render 'item_fields', f: f %&gt;\n      &lt;% end %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form-actions\"&gt;\n    &lt;%= f.button :submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>item_fields partial</strong></p>\n\n<pre><code>&lt;div class=\"nested-fields\"&gt;\n  &lt;%= f.collection_select :item_id, Item.all, :id, :name %&gt;\n  &lt;%= f.input :quantity %&gt;\n  &lt;%= link_to_remove_association \"remove item\", f %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The inventory does not have more attributes than its <code>id</code> and <code>user_id</code></p>\n\n<p><strong>Stack trace</strong></p>\n\n<pre><code>cocoon (1.2.9) lib/cocoon/view_helpers.rb:29:in `link_to_remove_association'\napp/views/users/_inventory_item_fields.html.erb:6:in `_app_views_users__inventory_item_fields_html_erb__1201857070210368281_70056778972140'\nactionview (4.2.4) lib/action_view/template.rb:145:in `block in render'\nactivesupport (4.2.4) lib/active_support/notifications.rb:166:in `instrument'\nactionview (4.2.4) lib/action_view/template.rb:333:in `instrument'\nactionview (4.2.4) lib/action_view/template.rb:143:in `render'\nactionview (4.2.4) lib/action_view/renderer/partial_renderer.rb:339:in `render_partial'\nactionview (4.2.4) lib/action_view/renderer/partial_renderer.rb:310:in `block in render'\nactionview (4.2.4) lib/action_view/renderer/abstract_renderer.rb:39:in `block in instrument'\nactivesupport (4.2.4) lib/active_support/notifications.rb:164:in `block in instrument'\nactivesupport (4.2.4) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\nactivesupport (4.2.4) lib/active_support/notifications.rb:164:in `instrument'\nactionview (4.2.4) lib/action_view/renderer/abstract_renderer.rb:39:in `instrument'\nactionview (4.2.4) lib/action_view/renderer/partial_renderer.rb:309:in `render'\nactionview (4.2.4) lib/action_view/renderer/renderer.rb:47:in `render_partial'\nactionview (4.2.4) lib/action_view/helpers/rendering_helper.rb:35:in `render'\napp/views/users/new.html.erb:12:in `block (3 levels) in _app_views_users_new_html_erb___3186868675472137201_70056772986280'\nactionview (4.2.4) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'\nactionview (4.2.4) lib/action_view/helpers/capture_helper.rb:202:in `with_output_buffer'\nactionview (4.2.4) lib/action_view/helpers/capture_helper.rb:38:in `capture'\nactionview (4.2.4) lib/action_view/helpers/form_helper.rb:714:in `fields_for'\nactionview (4.2.4) lib/action_view/helpers/form_helper.rb:1599:in `fields_for'\nsimple_form (3.1.1) lib/simple_form/action_view_extensions/builder.rb:27:in `simple_fields_for'\napp/views/users/new.html.erb:11:in `block (2 levels) in _app_views_users_new_html_erb___3186868675472137201_70056772986280'\nactionview (4.2.4) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'\nactionview (4.2.4) lib/action_view/helpers/capture_helper.rb:202:in `with_output_buffer'\nactionview (4.2.4) lib/action_view/helpers/capture_helper.rb:38:in `capture'\nactionview (4.2.4) lib/action_view/helpers/form_helper.rb:1925:in `block in fields_for_nested_model'\nactionview (4.2.4) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'\nactionview (4.2.4) lib/action_view/helpers/capture_helper.rb:202:in `with_output_buffer'\nactionview (4.2.4) lib/action_view/helpers/capture_helper.rb:38:in `capture'\nactionview (4.2.4) lib/action_view/helpers/form_helper.rb:714:in `fields_for'\nactionview (4.2.4) lib/action_view/helpers/form_helper.rb:1924:in `fields_for_nested_model'\nactionview (4.2.4) lib/action_view/helpers/form_helper.rb:1914:in `fields_for_with_nested_attributes'\nactionview (4.2.4) lib/action_view/helpers/form_helper.rb:1582:in `fields_for'\nsimple_form (3.1.1) lib/simple_form/action_view_extensions/builder.rb:27:in `simple_fields_for'\napp/views/users/new.html.erb:10:in `block in _app_views_users_new_html_erb___3186868675472137201_70056772986280'\nactionview (4.2.4) lib/action_view/helpers/capture_helper.rb:38:in `block in capture'\nactionview (4.2.4) lib/action_view/helpers/capture_helper.rb:202:in `with_output_buffer'\nactionview (4.2.4) lib/action_view/helpers/capture_helper.rb:38:in `capture'\nactionview (4.2.4) lib/action_view/helpers/form_helper.rb:444:in `form_for'\nsimple_form (3.1.1) lib/simple_form/action_view_extensions/form_helper.rb:26:in `block in simple_form_for'\nsimple_form (3.1.1) lib/simple_form/action_view_extensions/form_helper.rb:45:in `with_simple_form_field_error_proc'\nsimple_form (3.1.1) lib/simple_form/action_view_extensions/form_helper.rb:25:in `simple_form_for'\napp/views/users/new.html.erb:1:in `_app_views_users_new_html_erb___3186868675472137201_70056772986280'\nactionview (4.2.4) lib/action_view/template.rb:145:in `block in render'\nactivesupport (4.2.4) lib/active_support/notifications.rb:166:in `instrument'\nactionview (4.2.4) lib/action_view/template.rb:333:in `instrument'\nactionview (4.2.4) lib/action_view/template.rb:143:in `render'\nactionview (4.2.4) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'\nactionview (4.2.4) lib/action_view/renderer/abstract_renderer.rb:39:in `block in instrument'\nactivesupport (4.2.4) lib/active_support/notifications.rb:164:in `block in instrument'\nactivesupport (4.2.4) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\nactivesupport (4.2.4) lib/active_support/notifications.rb:164:in `instrument'\nactionview (4.2.4) lib/action_view/renderer/abstract_renderer.rb:39:in `instrument'\nactionview (4.2.4) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'\nactionview (4.2.4) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'\nactionview (4.2.4) lib/action_view/renderer/template_renderer.rb:52:in `render_template'\nactionview (4.2.4) lib/action_view/renderer/template_renderer.rb:14:in `render'\nactionview (4.2.4) lib/action_view/renderer/renderer.rb:42:in `render_template'\nactionview (4.2.4) lib/action_view/renderer/renderer.rb:23:in `render'\nactionview (4.2.4) lib/action_view/rendering.rb:100:in `_render_template'\nactionpack (4.2.4) lib/action_controller/metal/streaming.rb:217:in `_render_template'\nactionview (4.2.4) lib/action_view/rendering.rb:83:in `render_to_body'\nactionpack (4.2.4) lib/action_controller/metal/rendering.rb:32:in `render_to_body'\nactionpack (4.2.4) lib/action_controller/metal/renderers.rb:37:in `render_to_body'\nactionpack (4.2.4) lib/abstract_controller/rendering.rb:25:in `render'\nactionpack (4.2.4) lib/action_controller/metal/rendering.rb:16:in `render'\nactionpack (4.2.4) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'\nactivesupport (4.2.4) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'\n/home/vinicius/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'\nactivesupport (4.2.4) lib/active_support/core_ext/benchmark.rb:12:in `ms'\nactionpack (4.2.4) lib/action_controller/metal/instrumentation.rb:44:in `block in render'\nactionpack (4.2.4) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'\nactiverecord (4.2.4) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'\nactionpack (4.2.4) lib/action_controller/metal/instrumentation.rb:43:in `render'\nactionpack (4.2.4) lib/action_controller/metal/implicit_render.rb:10:in `default_render'\nactionpack (4.2.4) lib/action_controller/metal/implicit_render.rb:5:in `send_action'\nactionpack (4.2.4) lib/abstract_controller/base.rb:198:in `process_action'\nactionpack (4.2.4) lib/action_controller/metal/rendering.rb:10:in `process_action'\nactionpack (4.2.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\nactivesupport (4.2.4) lib/active_support/callbacks.rb:117:in `call'\nactivesupport (4.2.4) lib/active_support/callbacks.rb:117:in `call'\nactivesupport (4.2.4) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'\nactivesupport (4.2.4) lib/active_support/callbacks.rb:505:in `call'\nactivesupport (4.2.4) lib/active_support/callbacks.rb:505:in `call'\nactivesupport (4.2.4) lib/active_support/callbacks.rb:92:in `__run_callbacks__'\nactivesupport (4.2.4) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'\nactivesupport (4.2.4) lib/active_support/callbacks.rb:81:in `run_callbacks'\nactionpack (4.2.4) lib/abstract_controller/callbacks.rb:19:in `process_action'\nactionpack (4.2.4) lib/action_controller/metal/rescue.rb:29:in `process_action'\nactionpack (4.2.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'\nactivesupport (4.2.4) lib/active_support/notifications.rb:164:in `block in instrument'\nactivesupport (4.2.4) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\nactivesupport (4.2.4) lib/active_support/notifications.rb:164:in `instrument'\nactionpack (4.2.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\nactionpack (4.2.4) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\nactiverecord (4.2.4) lib/active_record/railties/controller_runtime.rb:18:in `process_action'\nactionpack (4.2.4) lib/abstract_controller/base.rb:137:in `process'\nactionview (4.2.4) lib/action_view/rendering.rb:30:in `process'\nactionpack (4.2.4) lib/action_controller/metal.rb:196:in `dispatch'\nactionpack (4.2.4) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'\nactionpack (4.2.4) lib/action_controller/metal.rb:237:in `block in action'\nactionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:76:in `call'\nactionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:76:in `dispatch'\nactionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:45:in `serve'\nactionpack (4.2.4) lib/action_dispatch/journey/router.rb:43:in `block in serve'\nactionpack (4.2.4) lib/action_dispatch/journey/router.rb:30:in `each'\nactionpack (4.2.4) lib/action_dispatch/journey/router.rb:30:in `serve'\nactionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:821:in `call'\nrack (1.6.4) lib/rack/etag.rb:24:in `call'\nrack (1.6.4) lib/rack/conditionalget.rb:25:in `call'\nrack (1.6.4) lib/rack/head.rb:13:in `call'\nactionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:27:in `call'\nactionpack (4.2.4) lib/action_dispatch/middleware/flash.rb:260:in `call'\nrack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'\nrack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'\nactionpack (4.2.4) lib/action_dispatch/middleware/cookies.rb:560:in `call'\nactiverecord (4.2.4) lib/active_record/query_cache.rb:36:in `call'\nactiverecord (4.2.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'\nactiverecord (4.2.4) lib/active_record/migration.rb:377:in `call'\nactionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\nactivesupport (4.2.4) lib/active_support/callbacks.rb:88:in `__run_callbacks__'\nactivesupport (4.2.4) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'\nactivesupport (4.2.4) lib/active_support/callbacks.rb:81:in `run_callbacks'\nactionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\nactionpack (4.2.4) lib/action_dispatch/middleware/reloader.rb:73:in `call'\nactionpack (4.2.4) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'\nactionpack (4.2.4) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\nweb-console (2.3.0) lib/web_console/middleware.rb:28:in `block in call'\nweb-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'\nweb-console (2.3.0) lib/web_console/middleware.rb:18:in `call'\nactionpack (4.2.4) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\nrailties (4.2.4) lib/rails/rack/logger.rb:38:in `call_app'\nrailties (4.2.4) lib/rails/rack/logger.rb:20:in `block in call'\nactivesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `block in tagged'\nactivesupport (4.2.4) lib/active_support/tagged_logging.rb:26:in `tagged'\nactivesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `tagged'\nrailties (4.2.4) lib/rails/rack/logger.rb:20:in `call'\nactionpack (4.2.4) lib/action_dispatch/middleware/request_id.rb:21:in `call'\nrack (1.6.4) lib/rack/methodoverride.rb:22:in `call'\nrack (1.6.4) lib/rack/runtime.rb:18:in `call'\nactivesupport (4.2.4) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\nrack (1.6.4) lib/rack/lock.rb:17:in `call'\nactionpack (4.2.4) lib/action_dispatch/middleware/static.rb:116:in `call'\nrack (1.6.4) lib/rack/sendfile.rb:113:in `call'\nrailties (4.2.4) lib/rails/engine.rb:518:in `call'\nrailties (4.2.4) lib/rails/application.rb:165:in `call'\nrack (1.6.4) lib/rack/lock.rb:17:in `call'\nrack (1.6.4) lib/rack/content_length.rb:15:in `call'\nrack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "firefox", "selenium-webdriver", "webdriver"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 1091685, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/90503d80d6c4547d63790a945e2ebfea?s=128&d=identicon&r=PG", "display_name": "Sophie Pocket", "link": "https://stackoverflow.com/users/1091685/sophie-pocket"}, "edited": false, "score": 0, "creation_date": 1463649401, "post_id": 37308756, "comment_id": 62157390, "body": "Thanks, I&#39;ve updated the examples fully to include the full radio button coding I got from inspect element. and my code for trying to click it."}, {"owner": {"reputation": 948, "user_id": 2272115, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb81bcc84a2c14ece9ebeb9c32fdff19?s=128&d=identicon&r=PG", "display_name": "user2272115", "link": "https://stackoverflow.com/users/2272115/user2272115"}, "reply_to_user": {"reputation": 87, "user_id": 1091685, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/90503d80d6c4547d63790a945e2ebfea?s=128&d=identicon&r=PG", "display_name": "Sophie Pocket", "link": "https://stackoverflow.com/users/1091685/sophie-pocket"}, "edited": false, "score": 0, "creation_date": 1463775239, "post_id": 37308756, "comment_id": 62225561, "body": "@SophiePocket I updated my answer with your new examples and I had no issues selecting the radio button.  Double check your syntax and selectors. Also, if it doesn&#39;t work, provide the error message."}, {"owner": {"reputation": 87, "user_id": 1091685, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/90503d80d6c4547d63790a945e2ebfea?s=128&d=identicon&r=PG", "display_name": "Sophie Pocket", "link": "https://stackoverflow.com/users/1091685/sophie-pocket"}, "edited": false, "score": 0, "creation_date": 1464001971, "post_id": 37308756, "comment_id": 62288260, "body": "I use the same syntax and selectors as what I have given in the question. I have added the CSS and the error message I receive."}, {"owner": {"reputation": 948, "user_id": 2272115, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb81bcc84a2c14ece9ebeb9c32fdff19?s=128&d=identicon&r=PG", "display_name": "user2272115", "link": "https://stackoverflow.com/users/2272115/user2272115"}, "reply_to_user": {"reputation": 87, "user_id": 1091685, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/90503d80d6c4547d63790a945e2ebfea?s=128&d=identicon&r=PG", "display_name": "Sophie Pocket", "link": "https://stackoverflow.com/users/1091685/sophie-pocket"}, "edited": false, "score": 0, "creation_date": 1464098988, "post_id": 37308756, "comment_id": 62338110, "body": "@SophiePocket I updated my answer to include your provided css. I literally copied and pasted what you provided and it works, so you&#39;re still not providing enough relevant information or the script you&#39;re actually using has an error in it.  I can provide the code I use to serve it if you want to try for yourself."}], "tags": [], "owner": {"reputation": 948, "user_id": 2272115, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb81bcc84a2c14ece9ebeb9c32fdff19?s=128&d=identicon&r=PG", "display_name": "user2272115", "link": "https://stackoverflow.com/users/2272115/user2272115"}, "is_accepted": false, "score": 0, "last_activity_date": 1464098808, "last_edit_date": 1464098808, "creation_date": 1463600522, "answer_id": 37308756, "question_id": 37305600, "link": "https://stackoverflow.com/questions/37305600/using-ruby-selenium-webdriver-cant-select-radio-button-as-label-and-button-are/37308756#37308756", "title": "Using Ruby Selenium Webdriver can&#39;t select radio button as label and button are hidden", "body": "<p>Make sure you're opening the page before you try to locate elements.</p>\n\n<p>I served your example using node:</p>\n\n<pre><code>&lt;style&gt;\ninput {\n    -webkit-appearance: radio\n    -webkit-rtl-ordering: logical\n    -webkit-user-select: text\n}\n\nlabel {\n    background-image: url(\"....PNG\");\n    background-repeat: no-repeat;\n    box-sizing: border-box;\n    color: rgb (99, 105, 115);\n    cursor: default;\n    display: inline-block;\n    font-family: arial;\n    font-size: 12px;\n    font-weight: normal;\n    line-height: 17px;\n     margin-bottom: 5px;\n     margin-top: 3px;\n     padding: 0px 17px 0px 17px;\n     text-align: left;\n     white-space: normal;\n    -webkit-user-select: none;\n}\n&lt;/style&gt;\n&lt;div class=\"panel-body\"&gt;\n    &lt;p&gt;Where the description is.&lt;/p&gt;\n    &lt;p&gt;Please select from the following options&lt;/p&gt;\n    &lt;input id=\"MainContent_CreateProposalWizard_Contacted\" type=\"radio\" name=\"ctl00$MainContent$CreateProposalWizard$ContactedAnswer\" value=\"Contacted\"&gt;\n    &lt;label for=\"MainContent_CreateProposalWizard_Contacted\"&gt; Yes&lt;/label&gt;\n    &lt;p&gt;Contacted&lt;/p&gt;\n    &lt;input id=\"MainContent_CreateProposalWizard_NotContacted\" type=\"radio\" name=\"ctl00$MainContent$CreateProposalWizard$ContactedAnswer\" value=\"NotContacted\"&gt;&lt;label for=\"MainContent_CreateProposalWizard_NotContacted\"&gt; No&lt;/label&gt;\n    &lt;p&gt;Not Contacted&lt;/p&gt;\n    &lt;input id=\"MainContent_CreateProposalWizard_NotApplicable\" type=\"radio\" name=\"ctl00$MainContent$CreateProposalWizard$ContactedAnswer\" value=\"NotApplicable\"&gt;\n    &lt;label for=\"MainContent_CreateProposalWizard_NotApplicable\"&gt; Not Applicable&lt;/label&gt;\n    &lt;p&gt;Not Contacted&lt;/p&gt;\n\n    &lt;input type=\"submit\" name=\"ctl00$MainContent$CreateProposalWizard$btnPreviousNoExact2\" value=\"Previous\" id=\"MainContent_CreateProposalWizard_btnPreviousNoExact2\" class=\"btn btn-sm btn-success strong\"&gt;\n    &lt;input type=\"submit\" name=\"ctl00$MainContent$CreateProposalWizard$btnContinueNoExact2\" value=\"Continue\" id=\"MainContent_CreateProposalWizard_btnContinueNoExact2\" class=\"btn btn-sm btn-success strong\"&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>and was able to select the radio button using:</p>\n\n<pre><code>require \"selenium-webdriver\"\nbrowser = Selenium::WebDriver.for :firefox\nbrowser.get \"http://localhost:8088/test.html\"\n\nbrowser.find_element(id: \"MainContent_CreateProposalWizard_NotApplicable\").click\n</code></pre>\n\n<p>If it still doesn't work, please update your examples.  More than likely you just have a bad selector.</p>\n"}], "owner": {"reputation": 87, "user_id": 1091685, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/90503d80d6c4547d63790a945e2ebfea?s=128&d=identicon&r=PG", "display_name": "Sophie Pocket", "link": "https://stackoverflow.com/users/1091685/sophie-pocket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 591, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1464098808, "creation_date": 1463589825, "last_edit_date": 1464001746, "question_id": 37305600, "link": "https://stackoverflow.com/questions/37305600/using-ruby-selenium-webdriver-cant-select-radio-button-as-label-and-button-are", "title": "Using Ruby Selenium Webdriver can&#39;t select radio button as label and button are hidden", "body": "<p>I've had a hard look around the internet to figure this out but I can't.</p>\n\n<p>Trying to create an automated test for an existing website (therefore I cannot edit the website css/html/etc.). \nI want to select a radio button on a form, however, I get the \"Element is not currently visible and so may not be interacted with\" error message when i run the .rb file in command line. </p>\n\n<p>It seems that the radio button and its label are out side the \"p\" and therefore not visible, which means I can't seem to click it. Even when I hover over the element with my mouse, the hand pointer is not displayed, showing it doesn't become visible on mouse over.</p>\n\n<p>I have tried wait() but the website doesn't seem to be waiting to load in order to display the button.\nThere are no other elements that contain the same id so no duplicates. Only seems to become active when I physically select the button.\nCode is as follows for the radio button on the website (I've changed some names cause of long names/ids etc):   </p>\n\n<pre><code>&lt;div class=\"panel-body\"&gt;\n    &lt;p&gt;Where the description is.&lt;/p&gt;\n    &lt;p&gt;Please select from the following options&lt;/p&gt;\n    &lt;input id=\"MainContent_CreateProposalWizard_Contacted\" type=\"radio\" name=\"ctl00$MainContent$CreateProposalWizard$ContactedAnswer\" value=\"Contacted\"&gt;\n    &lt;label for=\"MainContent_CreateProposalWizard_Contacted\"&gt; Yes&lt;/label&gt;\n    &lt;p&gt;Contacted&lt;/p&gt;\n    &lt;input id=\"MainContent_CreateProposalWizard_NotContacted\" type=\"radio\" name=\"ctl00$MainContent$CreateProposalWizard$ContactedAnswer\" value=\"NotContacted\"&gt;&lt;label for=\"MainContent_CreateProposalWizard_NotContacted\"&gt; No&lt;/label&gt;\n    &lt;p&gt;Not Contacted&lt;/p&gt;\n    &lt;input id=\"MainContent_CreateProposalWizard_NotApplicable\" type=\"radio\" name=\"ctl00$MainContent$CreateProposalWizard$ContactedAnswer\" value=\"NotApplicable\"&gt;\n    &lt;label for=\"MainContent_CreateProposalWizard_NotApplicable\"&gt; Not Applicable&lt;/label&gt;\n    &lt;p&gt;Not Contacted&lt;/p&gt;\n\n    &lt;input type=\"submit\" name=\"ctl00$MainContent$CreateProposalWizard$btnPreviousNoExact2\" value=\"Previous\" id=\"MainContent_CreateProposalWizard_btnPreviousNoExact2\" class=\"btn btn-sm btn-success strong\"&gt;\n    &lt;input type=\"submit\" name=\"ctl00$MainContent$CreateProposalWizard$btnContinueNoExact2\" value=\"Continue\" id=\"MainContent_CreateProposalWizard_btnContinueNoExact2\" class=\"btn btn-sm btn-success strong\"&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The CSS that seems to be applied for the label:</p>\n\n<pre><code>background-image: url(\"....PNG\")\nbackground-repeat: no-repeat\nbox-sizing: border-box\ncolor: rgb (99, 105, 115)\ncursor: default\ndisplay: inline-block\nfont-family: arial\nfont-size: 12px\nfont-weight: normal\nline-height: 17px\nmargin-bottom: 5px\nmargin-top: 3px\npadding: 0px 17px 0px 17px\ntext-align: left\nwhite-space: normal\n-webkit-user-select: none\n</code></pre>\n\n<p>CSS for the input:</p>\n\n<pre><code>...\n-webkit-appearance: radio\n-webkit-rtl-ordering: logical\n-webkit-user-select: text\n</code></pre>\n\n<p>I am using Ruby but I am not using python, javascript, java, or any other language just Ruby selenium webdriver. My code is as follows:</p>\n\n<pre><code>require \"selenium-webdriver\"\nbrowser = Selenium::WebDriver.for :firefox\nbrowser.get \"http://webiste.com\"\nbrowser.find_element(id: \"MainContent_CreateProposalWizard_NotApplicable\").click\n</code></pre>\n\n<p>The error code I receive:</p>\n\n<pre><code>[remote server] file:///C:/Users/SOPHIE~1.MOR/AppData/Local/Temp/webdriver-profile20160523-14328-tmuf3p/extensions/fxdriver@googlecode.com/components/command-processor.js:10092:in `fxdriver.preconditions.visible': Element is not currently visible and so may not be interacted with Selenium::WebDriver::Error::ElementNotVisibleError)\nfrom [remote server] file:///C:/Users/SOPHIE~1.MOR/AppData/Local/Temp/webdriver-profile20160523-14328-tmuf3p/extensions/fxdriver@googlecode.com/components/command-processor.js:12644:in `DelayedCommand.prototype.checkPreconditions_'\n    from [remote server] file:///C:/Users/SOPHIE~1.MOR/AppData/Local/Temp/webdriver-profile20160523-14328-tmuf3p/extensions/fxdriver@googlecode.com/components/command-processor.js:12661:in `DelayedCommand.prototype.executeInternal_/h'\n    from [remote server] file:///C:/Users/SOPHIE~1.MOR/AppData/Local/Temp/webdriver-profile20160523-14328-tmuf3p/extensions/fxdriver@googlecode.com/components/command-processor.js:12666:in `DelayedCommand.prototype.executeInternal_'\n    from [remote server] file:///C:/Users/SOPHIE~1.MOR/AppData/Local/Temp/webdriver-profile20160523-14328-tmuf3p/extensions/fxdriver@googlecode.com/components/command-processor.js:12608:in `DelayedCommand.prototype.execute/&lt;'\n    from C:/Ruby22/lib/ruby/gems/2.2.0/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/remote/response.rb:70:in `assert_ok'\n    from C:/Ruby22/lib/ruby/gems/2.2.0/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/remote/response.rb:34:in `initialize'\n    from C:/Ruby22/lib/ruby/gems/2.2.0/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/remote/http/common.rb:78:in `new'\n    from C:/Ruby22/lib/ruby/gems/2.2.0/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/remote/http/common.rb:78:in `create_response'\n    from C:/Ruby22/lib/ruby/gems/2.2.0/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/remote/http/default.rb:90:in `request'\n    from C:/Ruby22/lib/ruby/gems/2.2.0/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/remote/http/common.rb:59:in `call'\n    from C:/Ruby22/lib/ruby/gems/2.2.0/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/remote/bridge.rb:649:in `raw_execute'\n    from C:/Ruby22/lib/ruby/gems/2.2.0/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/remote/bridge.rb:627:in `execute'\n    from C:/Ruby22/lib/ruby/gems/2.2.0/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/remote/bridge.rb:389:in `clickElement'\n    from C:/Ruby22/lib/ruby/gems/2.2.0/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/common/element.rb:73:in `click'\n    from new_proposal.rb:26:in `&lt;main&gt;'\n</code></pre>\n\n<p>Any help on how to select this radio button would be greatly appreciated. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "model-view-controller", "model"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 6094382, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8e8e88e3b7ba5f9d802fe180c7649988?s=128&d=identicon&r=PG&f=1", "display_name": "Rails_learner", "link": "https://stackoverflow.com/users/6094382/rails-learner"}, "edited": false, "score": 0, "creation_date": 1463590556, "post_id": 37305591, "comment_id": 62133210, "body": "If i create a model for Sizes, i&#39;m assuming what you mean is each column would be a specific size? Or how does this work?"}], "tags": [], "owner": {"reputation": 66, "user_id": 5888716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7e4c73244a91942d79cdb93176097fa?s=128&d=identicon&r=PG&f=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/5888716/ruslan"}, "is_accepted": true, "score": 0, "last_activity_date": 1463600095, "last_edit_date": 1463600095, "creation_date": 1463589792, "answer_id": 37305591, "question_id": 37305144, "link": "https://stackoverflow.com/questions/37305144/rails-two-sided-value/37305591#37305591", "title": "Rails two sided value", "body": "<p>You will have to save the sizes to DB or somewhere so the sellers choice persists.\nFrom there all you have to do is retrieve data from DB and populate the dropdown with it.</p>\n\n<p>One way to do this will be creating a new model for sizes. Or adding a array serialized field in the <code>Product</code> model. </p>\n\n<p>That way when you are rendering a page to the seller, you show <code>Product::Size_options</code> AND select which ones are available from the database. (Check API, should be easy to implement)</p>\n\n<p>And on user side, you render sizes only from the database</p>\n\n<p>If you create models, they would look something like this:</p>\n\n<pre><code>Products       ProductSizes          Sizes\n  - id           - product_id         - id\n  - name         - size_id            - code('M', 'S')\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 6094382, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8e8e88e3b7ba5f9d802fe180c7649988?s=128&d=identicon&r=PG&f=1", "display_name": "Rails_learner", "link": "https://stackoverflow.com/users/6094382/rails-learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 37305591, "answer_count": 1, "score": 0, "last_activity_date": 1463600095, "creation_date": 1463588486, "last_edit_date": 1463589278, "question_id": 37305144, "link": "https://stackoverflow.com/questions/37305144/rails-two-sided-value", "title": "Rails two sided value", "body": "<p>Anyone have an idea of how to create a two-sided object. E.g.\nA seller selects items from a multiple select dropdown list in a form. And those items he selects are made available for another dropdown list to be selected by a buyer.</p>\n\n<p>Here i'm talking about Size</p>\n\n<p>The seller selects what sizes are available, then the buyer gets options out of the available sizes.</p>\n\n<p>I've currently got the sizes in an array in the model</p>\n\n<p><code>Size_options = [XXS, XS, S, M, L, XL, XXL, 2, 4, 6, 8]</code></p>\n\n<p>and the dropdown list for the seller is </p>\n\n<pre><code> &lt;%= select_tag :size, Product::Size_options, multiple: true %&gt;\n</code></pre>\n\n<p>How do i make the selected options available to the buyer?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby", "bash"], "comments": [{"owner": {"reputation": 13641, "user_id": 1871033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30bea353b9b21b063e2be8ab57a1465e?s=128&d=identicon&r=PG", "display_name": "CherryDT", "link": "https://stackoverflow.com/users/1871033/cherrydt"}, "edited": false, "score": 2, "creation_date": 1463586045, "post_id": 37304205, "comment_id": 62130390, "body": "What is the <code>system(&quot;    &quot;)</code> supposed to do around your expression? You are sending that string to the shell, but it&#39;s supposed to be executed as Ruby code, no?"}, {"owner": {"reputation": 13641, "user_id": 1871033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30bea353b9b21b063e2be8ab57a1465e?s=128&d=identicon&r=PG", "display_name": "CherryDT", "link": "https://stackoverflow.com/users/1871033/cherrydt"}, "edited": false, "score": 0, "creation_date": 1463586095, "post_id": 37304205, "comment_id": 62130422, "body": "And you are missing the quotes. <code>File.exist?(&quot;&#47;Library&#47;......&quot;)</code>"}, {"owner": {"reputation": 51, "user_id": 5635951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85b5b2b1b6c10e80501a83d42a8ebc29?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavani Bheemanadham", "link": "https://stackoverflow.com/users/5635951/bhavani-bheemanadham"}, "reply_to_user": {"reputation": 13641, "user_id": 1871033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30bea353b9b21b063e2be8ab57a1465e?s=128&d=identicon&r=PG", "display_name": "CherryDT", "link": "https://stackoverflow.com/users/1871033/cherrydt"}, "edited": false, "score": 0, "creation_date": 1463586626, "post_id": 37304205, "comment_id": 62130779, "body": "new command <code>system(&quot;File.exist?(\\&quot;&#47;Library&#47;Frameworks&#47;Python.framework&#47;V&zwnj;&#8203;ersions&#47;2.7&#47;bin&#47;virt&zwnj;&#8203;ualenvwrapper.sh\\&quot;)&quot;&zwnj;&#8203;)</code>   new error <code>sh: -c: line 0: syntax error near unexpected token `&quot;&#47;Library&#47;Frameworks&#47;Python.framework&#47;Versions&#47;2.7&#47;bin&#47;virt&zwnj;&#8203;ualenvwrapper.sh&quot;&#39; sh: -c: line 0: `File.exist?(&quot;&#47;Library&#47;Frameworks&#47;Python.framework&#47;Versions&#47;&zwnj;&#8203;2.7&#47;bin&#47;virtualenvwr&zwnj;&#8203;apper.sh&quot;)&#39;</code>"}, {"owner": {"reputation": 13641, "user_id": 1871033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30bea353b9b21b063e2be8ab57a1465e?s=128&d=identicon&r=PG", "display_name": "CherryDT", "link": "https://stackoverflow.com/users/1871033/cherrydt"}, "edited": false, "score": 1, "creation_date": 1463586717, "post_id": 37304205, "comment_id": 62130849, "body": "Of course it doesn&#39;t work... Again: Why is there a <code>system(&quot; &quot;)</code> around the whole thing?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1463588229, "post_id": 37304205, "comment_id": 62131854, "body": "This makes no sense. Why is <code>system</code> involved here? Don&#39;t use that. It&#39;s the wrong tool. Did you read the manual on what that function does before randomly trying things?"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5635951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85b5b2b1b6c10e80501a83d42a8ebc29?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavani Bheemanadham", "link": "https://stackoverflow.com/users/5635951/bhavani-bheemanadham"}, "edited": false, "score": 0, "creation_date": 1463588898, "post_id": 37305084, "comment_id": 62132285, "body": "thank you ,  now I got my mistake . this resolves my issue"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1463589207, "post_id": 37305084, "comment_id": 62132464, "body": "The parentheses around <code>File.exist?(file)</code> look a bit odd."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1463598632, "post_id": 37305084, "comment_id": 62137627, "body": "@Stefan They&#39;re optional but allowed. JavaScript, C++ and many others require them so I tend to put those in there to avoid ambiguity."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1463588314, "creation_date": 1463588314, "answer_id": 37305084, "question_id": 37304205, "link": "https://stackoverflow.com/questions/37304205/ruby-file-exist-syntax-error/37305084#37305084", "title": "Ruby File.exist syntax error", "body": "<p>If you're simply looking to see if a file exists:</p>\n\n<pre><code>file = \"/Library/Frameworks/Python.framework/Versions/2.7/bin/virtualenvwrapper.sh\"\nFile.exist?(file)\n</code></pre>\n\n<p>Presumably you want to do something with this file other than test that it exists, like run it:</p>\n\n<pre><code>if (File.exist?(file))\n  system(file)\nend\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 5635951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85b5b2b1b6c10e80501a83d42a8ebc29?s=128&d=identicon&r=PG&f=1", "display_name": "Bhavani Bheemanadham", "link": "https://stackoverflow.com/users/5635951/bhavani-bheemanadham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1463588314, "creation_date": 1463585760, "last_edit_date": 1463586071, "question_id": 37304205, "link": "https://stackoverflow.com/questions/37304205/ruby-file-exist-syntax-error", "title": "Ruby File.exist syntax error", "body": "<p>I am trying to check the presence of the file with below command ,but it's throwing this syntax error, can someone please help me on what am I missing  </p>\n\n<pre><code>system(\"File.exist?(/Library/Frameworks/Python.framework/Versions/2.7/bin/virtualenvwrapper.sh)\")\n</code></pre>\n\n<p>Error </p>\n\n<pre><code>sh: -c: line 0: syntax error near unexpected token `/Library/Frameworks/Python.framework/Versions/2.7/bin/virtualenvwrapper.sh'\nsh: -c: line 0: `File.exist?(/Library/Frameworks/Python.framework/Versions/2.7/bin/virtualenvwrapper.sh)'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "facebook", "facebook-graph-api", "koala"], "comments": [{"owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "edited": false, "score": 0, "creation_date": 1463765406, "post_id": 37304073, "comment_id": 62220650, "body": "How do you construct the <code>@graph</code> object? It seems that you are calling <code>next_page_params</code> on the wrong object."}, {"owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "edited": false, "score": 0, "creation_date": 1463838687, "post_id": 37304073, "comment_id": 62240724, "body": "What API request are you trying to browse? I.e. members of what are you trying to list?"}, {"owner": {"reputation": 806, "user_id": 1839900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37dbd2487d44384b3b110cf31f27be46?s=128&d=identicon&r=PG", "display_name": "Tommy Adey", "link": "https://stackoverflow.com/users/1839900/tommy-adey"}, "reply_to_user": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "edited": false, "score": 0, "creation_date": 1463840090, "post_id": 37304073, "comment_id": 62241157, "body": "@BoraMa Thanks, it&#39;s for Group members. With facebook Api &lt; v2.3. You still have user_groups permission, so you can get a list of members of a group provided the user with the token is a member of the group."}, {"owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "edited": false, "score": 0, "creation_date": 1463842115, "post_id": 37304073, "comment_id": 62241828, "body": "I see, it seems that you have not explicitly specified the old API version, because the response is of version 2.6. Does something like <code>Koala.config.api_version = &quot;v2.2&quot;</code> help? As documented in <a href=\"https://github.com/arsduo/koala#graph-api\" rel=\"nofollow noreferrer\">this README section</a> - see the code examples there."}], "answers": [{"comments": [{"owner": {"reputation": 847, "user_id": 1482694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e4742341658d0f90de0b770fc4f01f?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1482694/sam"}, "edited": false, "score": 0, "creation_date": 1464173067, "post_id": 37375326, "comment_id": 62372598, "body": "This is essentially what the OP is doing. Just that he is storing the API instance in &#39;@facebook&#39;, rather than &#39;@graph&#39;. But ultimately he is calling get_connection on the API object itself (&#39;@facebook&#39; in his case), and then storing the response in a &#39;@graph&#39; object. Your suggestion seems to just change the variable name, but won&#39;t have any effect as such."}], "tags": [], "owner": {"reputation": 6018, "user_id": 3446655, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/AH6Ys.jpg?s=128&g=1", "display_name": "HarlemSquirrel", "link": "https://stackoverflow.com/users/3446655/harlemsquirrel"}, "is_accepted": false, "score": 0, "last_activity_date": 1464085421, "last_edit_date": 1464085421, "creation_date": 1463925737, "answer_id": 37375326, "question_id": 37304073, "link": "https://stackoverflow.com/questions/37304073/koala-gemgraph-api-invalidurierror-while-retrieving-pages-of-results-with-get/37375326#37375326", "title": "koala gem(Graph API) InvalidURIError while retrieving pages of results with get_page method", "body": "<p>It looks like your problem may be here</p>\n\n<pre><code>@facebook = Koala::Facebook::API.new(access_token)\n@graph = @facebook.get_connection(..)\n</code></pre>\n\n<p>On the github page, it says to call <code>get_connection</code> directly with @graph but you are setting @graph to the return value of <code>@facebook.get_connection(..)</code>. Rather change it to</p>\n\n<pre><code>@graph = Koala::Facebook::API.new(access_token)\n@graph.get_connection(..)\n</code></pre>\n\n<p>Source: <a href=\"https://github.com/arsduo/koala#graph-api\" rel=\"nofollow\">https://github.com/arsduo/koala#graph-api</a></p>\n"}, {"tags": [], "owner": {"reputation": 847, "user_id": 1482694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e4742341658d0f90de0b770fc4f01f?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1482694/sam"}, "is_accepted": false, "score": 0, "last_activity_date": 1464172773, "creation_date": 1464172773, "answer_id": 37434651, "question_id": 37304073, "link": "https://stackoverflow.com/questions/37304073/koala-gemgraph-api-invalidurierror-while-retrieving-pages-of-results-with-get/37434651#37434651", "title": "koala gem(Graph API) InvalidURIError while retrieving pages of results with get_page method", "body": "<p>Couple of things here: </p>\n\n<ol>\n<li><p>Your 'next_page_params' response seems to be a string, while it should have been an array. Are you sure that's the response you are getting ? This could be causing an error when the method tries to convert it into a URI to be parsed. Hence the parsing errors.You could try to use <code>eval(next_page)</code> to convert it into an actual array (note: eval is considered unsafe). </p></li>\n<li><p>Which version of koala are you using? In the latest (v2.3.0), get_page method is available only on the API object(<code>@facebook</code> in your case), and not on the connection object (<code>@graph</code>). Hence, you would use:</p>\n\n<p>@facebook = Koala::Facebook::API.new(access_token)\n@graph = @facebook.get_connection(..)\nnext_page = @graph.next_page_params \n@facebook.get_page(next_page)</p></li>\n<li><p>You could also try calling the next page directly, without first fetching the params like :</p>\n\n<p>@facebook = Koala::Facebook::API.new(access_token)\n@graph = @facebook.get_connection(..)\n@graph.next_page</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6623460, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210788006645216/picture?type=large", "display_name": "Sasitorn Amy", "link": "https://stackoverflow.com/users/6623460/sasitorn-amy"}, "is_accepted": false, "score": 0, "last_activity_date": 1486481481, "creation_date": 1486481481, "answer_id": 42093725, "question_id": 37304073, "link": "https://stackoverflow.com/questions/37304073/koala-gemgraph-api-invalidurierror-while-retrieving-pages-of-results-with-get/42093725#42093725", "title": "koala gem(Graph API) InvalidURIError while retrieving pages of results with get_page method", "body": "<p>I think the problem is like others have already mentioned. You might get confused with <code>@graph</code>, <code>@facebook</code> and <code>results</code>.</p>\n\n<p>Below is how I implement using Rails to get a list of user's Facebook friends. </p>\n\n<pre><code>controller/feeds_controller.rb\ndef do_sth_with_facebook_friends\n facebook = Facebook.new(current_user)\n facebook_friends = facebook.friends(params[:next_page])\n ...\n @next_page = facebook_friends.next_page_params\n //@next_page will be used as params[:next_page] when you send another request to load the next page\n ...\nend\n\nlib/facebook.rb\ndef initialize(user)\n @graph = Koala::Facebook::API.new(user.facebook_token)\nend\ndef friends(page)\n page ? @graph.get_page(page) : @graph.get_connections('me', 'friends')\nend\n</code></pre>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 806, "user_id": 1839900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37dbd2487d44384b3b110cf31f27be46?s=128&d=identicon&r=PG", "display_name": "Tommy Adey", "link": "https://stackoverflow.com/users/1839900/tommy-adey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 312, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1486481481, "creation_date": 1463585466, "last_edit_date": 1463831708, "question_id": 37304073, "link": "https://stackoverflow.com/questions/37304073/koala-gemgraph-api-invalidurierror-while-retrieving-pages-of-results-with-get", "title": "koala gem(Graph API) InvalidURIError while retrieving pages of results with get_page method", "body": "<p>I'm using Koala gem: <a href=\"https://github.com/arsduo/koala\" rel=\"nofollow\">https://github.com/arsduo/koala</a> to retrieve pages of results from the facebook graph API. </p>\n\n<p>[Edit] I construct the @graph object as follows:</p>\n\n<pre><code>@facebook = Koala::Facebook::API.new(access_token)\n@graph = @facebook.get_connection(..)\n</code></pre>\n\n<p>After fetching the data from facebook, I get a list of results.</p>\n\n<p>I get the next_page_params like this:</p>\n\n<pre><code>next_page = @graph.next_page_params \n</code></pre>\n\n<p>Which looks something like:</p>\n\n<pre><code>[\\\"v2.6/496090827168552/members\\\", {\\\"fields\\\"=&gt;\\\"about,age_range,bio,cover,devices,email,education,first_name,gender,hometown,id,interested_in,last_name,languages,link,location,middle_name,name,political,picture.type(large),relationship_status,religion,work,website\\\", \\\"limit\\\"=&gt;\\\"30\\\", \\\"icon_size\\\"=&gt;\\\"16\\\", \\\"access_token\\\"=&gt;\\\"EAAIeQOKC6YjJE3GUvyHqakVaIZCF1MY4jo5YtQ0qt2DFNPRa3O6akOXUMdx9eOozAFSOIZD\\\", \\\"offset\\\"=&gt;\\\"30\\\", \\\"__after_id\\\"=&gt;\\\"enc_AdACS2GnjoUp9fYXSa8maRmdCZAYMNRR7fqHpQG\\\"}]\n</code></pre>\n\n<p>Now I'm fetching the next page of the result using:</p>\n\n<pre><code>@graph.get_page(next_page)\n</code></pre>\n\n<p>This is the error i get:</p>\n\n<pre><code>`URI::InvalidURIError: bad URI(is not URI?): [%22v2.6/496090827168552/members%22,%20%7B%22fields%22=%3E%22about,age_range,bio,cover,devices,email,education,first_name,gender,hometown,id,interested_in,last_name,languages,link,location,middle_name,name,political,picture.type(large),relationship_status,religion,work,website%22,%20%22limit%22=%3E%2230%22,%20%22icon_size%22=%3E%2216%22,%20%22access_token%22=%3E%22CqXUMdx9eOozAHJl2cS4czacDnIwvEB96RCb1FSOIZD%22,%20%22offset%22=%3E%2230%22,%20%22__after_id%22=%3E%22enc_AdACS2GCCpmD1SFiHnmP0lpr0yiW8maRmdCZAYMNRR7fqHpQG%22%7D]`\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1463585793, "post_id": 37304021, "comment_id": 62130199, "body": "I am going to take a shot in the dark and say that your image is not saving.  Can you try adding a ! after your update method in the controller and post the output?  What is the return of user.image in the console?  what is the return of the avatar_url(user) in the console?"}, {"owner": {"reputation": 93, "user_id": 6220333, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c0d883832689165159f78cd5bfc346d0?s=128&d=identicon&r=PG&f=1", "display_name": "MSK", "link": "https://stackoverflow.com/users/6220333/msk"}, "reply_to_user": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1463586191, "post_id": 37304021, "comment_id": 62130473, "body": "(0.0ms)  begin transaction   SQL (0.0ms)  UPDATE &quot;sessions&quot; SET &quot;data&quot; = ?, &quot;updated_at&quot; = ? WHERE &quot;sessions&quot;.&quot;id&quot; = ?  [[&quot;data&quot;, &quot;BAh7CEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjoGRVRbB1sGaSBJIiIkMmE&zwnj;&#8203;k\\nMTAkaWd6Nno3enNzU&zwnj;&#8203;jdja2F5ZzJWUXlXZQY7A&zwnj;&#8203;FRJIhBfY3NyZl90b2tlb&zwnj;&#8203;gY7\\nAEZJIjFpZnV2S0N&zwnj;&#8203;TckczVDlhQmNEL0pIdnk&zwnj;&#8203;wTTY0Rk9LaXdXTzIwdXd&zwnj;&#8203;6eVBl\\nQ0lFPQY7AEZJI&zwnj;&#8203;gpmbGFzaAY7AFR7B0kiD&zwnj;&#8203;GRpc2NhcmQGOwBUWwZJI&zwnj;&#8203;gtub3Rp\\nY2UGOwBGSSI&zwnj;&#8203;MZmxhc2hlcwY7AFR7BkA&zwnj;&#8203;QSSIwWW91ciBhY2NvdW5&zwnj;&#8203;0IGhhcyBi\\nZWVuIHVwZ&zwnj;&#8203;GF0ZWQgc3VjY2Vzc2Z1b&zwnj;&#8203;Gx5LgY7AFQ=\\n&quot;], [&quot;updated_at&quot;, &quot;2016-05-18 15:39:41.667689&quot;], [&quot;id&quot;, 57]]    (96.6ms)  commit transaction"}, {"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1463586362, "post_id": 37304021, "comment_id": 62130598, "body": "Is that the update action?"}, {"owner": {"reputation": 93, "user_id": 6220333, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c0d883832689165159f78cd5bfc346d0?s=128&d=identicon&r=PG&f=1", "display_name": "MSK", "link": "https://stackoverflow.com/users/6220333/msk"}, "reply_to_user": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1463586412, "post_id": 37304021, "comment_id": 62130630, "body": "everything else other than avatar are saving and displying just the avatar is not updating"}, {"owner": {"reputation": 1656, "user_id": 6138119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YzV7y.jpg?s=128&g=1", "display_name": "Pravesh Khatri", "link": "https://stackoverflow.com/users/6138119/pravesh-khatri"}, "edited": false, "score": 0, "creation_date": 1463588007, "post_id": 37304021, "comment_id": 62131687, "body": "please show your migration file. when you add image to your table."}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1463634122, "post_id": 37304021, "comment_id": 62148955, "body": "@MSK you can click the <code>edit</code> button directly below your question (above these comments) to add new details requested, such as the logs data, the migration file, etc."}], "answers": [{"tags": [], "owner": {"reputation": 1656, "user_id": 6138119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YzV7y.jpg?s=128&g=1", "display_name": "Pravesh Khatri", "link": "https://stackoverflow.com/users/6138119/pravesh-khatri"}, "is_accepted": true, "score": 0, "last_activity_date": 1463593651, "creation_date": 1463593651, "answer_id": 37306828, "question_id": 37304021, "link": "https://stackoverflow.com/questions/37304021/uploaded-image-not-displaying-in-ruby-on-rails-app-everything-else-other-than-a/37306828#37306828", "title": "uploaded image not displaying in ruby on rails app (everything else other than avatar are saving and updating )", "body": "<p>Depends on your field used for PaperClip upload</p>\n\n<p><strong>Case 1</strong> </p>\n\n<p>If you have <code>t.attachment :image</code> as a field_name in your <code>Migration</code> then,</p>\n\n<p>In your helper module</p>\n\n<p>please change <code>user.image</code> to <code>user.image.url</code> or <code>user.image.url(:thumb)</code></p>\n\n<pre><code> module ApplicationHelper\n    def avatar_url(user)\n       if user.image.present?\n          user.image.url #for original image\n          #user.image.url(:thumb) #for thumbnail\n      else\n         \"/images/missing.png\"\n      end\n  end\nend\n</code></pre>\n\n<p>In your Model</p>\n\n<pre><code> has_attached_file :image\n</code></pre>\n\n<p><strong>Case 2</strong></p>\n\n<p>And If you have <code>t.attachment :avatar</code> as a field_name in your <code>Migration</code> then,,</p>\n\n<p>In your helper module</p>\n\n<p>please change <code>user.image</code> to <code>user.avatar.url</code> or <code>user.avatar.url(:thumb)</code></p>\n\n<pre><code> module ApplicationHelper\n    def avatar_url(user)\n       if user.avatar.present?\n          user.avatar.url #for original image\n          #user.avatar.url(:thumb) #for thumbnail\n      else\n         \"/images/missing.png\"\n      end\n  end\nend\n</code></pre>\n\n<p>and in your Model</p>\n\n<p>in your method for Ominauth </p>\n\n<pre><code>user.avatar = auth.info.image\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 6220333, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c0d883832689165159f78cd5bfc346d0?s=128&d=identicon&r=PG&f=1", "display_name": "MSK", "link": "https://stackoverflow.com/users/6220333/msk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 37306828, "answer_count": 1, "score": 0, "last_activity_date": 1463634282, "creation_date": 1463585292, "last_edit_date": 1463634282, "question_id": 37304021, "link": "https://stackoverflow.com/questions/37304021/uploaded-image-not-displaying-in-ruby-on-rails-app-everything-else-other-than-a", "title": "uploaded image not displaying in ruby on rails app (everything else other than avatar are saving and updating )", "body": "<p>Hi I am using paperclip for image uploading. the thing is, when the user login with fb, it is displaying the profile picture from fb, once he is logged in, he can change the profile picture in the app. but the changed picture is not displaying.\nand i have default picture stored, that is displaying for the users registered with email. How can display new uploaded photo. </p>\n\n<p>My user model is,</p>\n\n<pre><code>   has_attached_file :avatar, :styles =&gt; { :medium =&gt; \"300x300&gt;\", :thumb \n\n=&gt; \"100x100#\" }\n   validates_attachment_content_type :avatar, :content_type =&gt; /\\Aimage\\/.*\\Z/\n\n\n   def self.from_omniauth(auth)\n    where(provider: auth.provider, uid: auth.uid).first_or_create do |user|\n        user.fullname = auth.info.name\n        user.provider = auth.provider\n        user.uid = auth.uid\n        user.email = auth.info.email\n        user.image = auth.info.image\n        user.password = Devise.friendly_token[0,20]\n        user.skip_confirmation! unless user.confirmed?\n      end\n  end\n</code></pre>\n\n<p>My application helper is</p>\n\n<pre><code>module ApplicationHelper\n    def avatar_url(user)\n        if user.image\n            user.image\n        else\n            \"/images/missing.png\"\n        end\n    end\nend\n</code></pre>\n\n<p>My edit view</p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n    &lt;label class=\"col-xs-4\" for=\"avatar\"&gt;Profile picture&lt;/label&gt;\n    &lt;div class=\"col-xs-8\"&gt;\n        &lt;%= f.file_field :avatar %&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>My show view is,</p>\n\n<pre><code>&lt;%= image_tag avatar_url(@user), class: \"avatar-full\" %&gt;\n</code></pre>\n\n<p>The SQL Transation is:</p>\n\n<pre><code>(0.0ms) begin transaction SQL (0.0ms)\nUPDATE \"sessions\"\nSET \"data\" = ?, \"updated_at\" = ? \nWHERE \"sessions\".\"id\" = ? [[\"data\", \"BAh7CEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjoGRVRbB1sGaSBJIiIkMmEk\\nMTAkaWd6Nno3enNzU\u200c\u200bjdja2F5ZzJWUXlXZQY7AFRJIhBfY3NyZl90b2tlbgY7\\nAEZJIjFpZnV2S0NTckczVDlhQmNEL0pIdnkw\u200c\u200bTTY0Rk9LaXdXTzIwdXd6eVBl\\nQ0lFPQY7AEZJIgpmbGFzaAY7AFR7B0kiDGRpc2NhcmQGOwBUWwZJIgt\u200c\u200bub3Rp\\nY2UGOwBGSSIMZmxhc2hlcwY7AFR7BkAQSSIwWW91ciBhY2NvdW50IGhhcyBi\\nZWVuIHVwZGF0\u200c\u200bZWQgc3VjY2Vzc2Z1bGx5LgY7AFQ=\\n\"], \n[\"updated_at\", \"2016-05-18 15:39:41.667689\"], [\"id\", 57]]\n(96.6ms) commit transaction\n</code></pre>\n"}, {"tags": ["ruby", "ssh", "openshift-client-tools"], "answers": [{"tags": [], "owner": {"reputation": 5, "user_id": 1671408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x2hbG.jpg?s=128&g=1", "display_name": "CroModder", "link": "https://stackoverflow.com/users/1671408/cromodder"}, "is_accepted": false, "score": 0, "last_activity_date": 1468670081, "creation_date": 1468670081, "answer_id": 38410950, "question_id": 37303102, "link": "https://stackoverflow.com/questions/37303102/openshift-rhc-port-forward-exception/38410950#38410950", "title": "Openshift rhc port forward exception", "body": "<p>It's a bit late but maybe it can help to newcomer.\nThe solution is, or better say- workaround, to exit the pageant while you port-forward the app. And when done turn it on again if you need to ssh to it.</p>\n"}, {"tags": [], "owner": {"reputation": 161, "user_id": 5924886, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1da58369c148ca116c3ac94bd3c32eaf?s=128&d=identicon&r=PG&f=1", "display_name": "Lundira", "link": "https://stackoverflow.com/users/5924886/lundira"}, "is_accepted": true, "score": 0, "last_activity_date": 1468738967, "creation_date": 1468738967, "answer_id": 38418734, "question_id": 37303102, "link": "https://stackoverflow.com/questions/37303102/openshift-rhc-port-forward-exception/38418734#38418734", "title": "Openshift rhc port forward exception", "body": "<p>I found a sort of workaround too, whenever i recieve this error i do the oldest trick in the books, a restart and it works all the times(for now)</p>\n"}], "owner": {"reputation": 161, "user_id": 5924886, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1da58369c148ca116c3ac94bd3c32eaf?s=128&d=identicon&r=PG&f=1", "display_name": "Lundira", "link": "https://stackoverflow.com/users/5924886/lundira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 38418734, "answer_count": 2, "score": 0, "last_activity_date": 1468738967, "creation_date": 1463582911, "question_id": 37303102, "link": "https://stackoverflow.com/questions/37303102/openshift-rhc-port-forward-exception", "title": "Openshift rhc port forward exception", "body": "<p>I am trying to open ports so i access my database remotely from my pc</p>\n\n<p>I am running on Ruby200-x64 and when i try to access port forward\nrhc port-forward -a appname</p>\n\n<p>i get the following response/error:</p>\n\n<pre><code>Checking available ports ... C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/pageant.rb:176:in `malloc': bignum too big to convert into `long' (RangeError)\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/pageant.rb:176:in `malloc_ptr'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/pageant.rb:240:in `get_token_information'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/pageant.rb:213:in `get_current_user'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/pageant.rb:189:in `get_security_attributes_for_user'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/pageant.rb:332:in `send_query'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/pageant.rb:309:in `send'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/agent/socket.rb:148:in `send_packet'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/agent/socket.rb:165:in `send_and_wait'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/agent/socket.rb:76:in `negotiate!'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/agent/socket.rb:48:in `connect'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/key_manager.rb:179:in `agent'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/key_manager.rb:103:in `each_identity'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/methods/publickey.rb:19:in `authenticate'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/session.rb:79:in `block in authenticate'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/session.rb:66:in `each'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/session.rb:66:in `authenticate'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/net-ssh-2.9.2/lib/net/ssh.rb:211:in `start'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rhc-1.38.4/lib/rhc/commands/port_forward.rb:86:in `run'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rhc-1.38.4/lib/rhc/commands.rb:294:in `execute'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rhc-1.38.4/lib/rhc/commands.rb:285:in `block (3 levels) in to_commander'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/commander-4.2.1/lib/commander/command.rb:180:in `call'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/commander-4.2.1/lib/commander/command.rb:180:in `call'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/commander-4.2.1/lib/commander/command.rb:155:in `run'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/commander-4.2.1/lib/commander/runner.rb:421:in `run_active_command'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rhc-1.38.4/lib/rhc/command_runner.rb:72:in `run!'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/commander-4.2.1/lib/commander/delegates.rb:8:in `run!'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rhc-1.38.4/lib/rhc/cli.rb:37:in `start'\n        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rhc-1.38.4/bin/rhc:20:in `&lt;top (required)&gt;'\n        from C:/Ruby200-x64/bin/rhc:23:in `load'\n        from C:/Ruby200-x64/bin/rhc:23:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "rubygems", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 2880868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0a88b711c6d0fdccf4ca79bd440b81?s=128&d=identicon&r=PG", "display_name": "Zyaga", "link": "https://stackoverflow.com/users/2880868/zyaga"}, "edited": false, "score": 0, "creation_date": 1463583532, "post_id": 37303201, "comment_id": 62128529, "body": "Running my rails generate command with bundle exec before it still didn&#39;t change anything. Same message. :("}, {"owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "reply_to_user": {"reputation": 33, "user_id": 2880868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0a88b711c6d0fdccf4ca79bd440b81?s=128&d=identicon&r=PG", "display_name": "Zyaga", "link": "https://stackoverflow.com/users/2880868/zyaga"}, "edited": false, "score": 0, "creation_date": 1463583759, "post_id": 37303201, "comment_id": 62128727, "body": "What about installing the binstubs?"}, {"owner": {"reputation": 33, "user_id": 2880868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0a88b711c6d0fdccf4ca79bd440b81?s=128&d=identicon&r=PG", "display_name": "Zyaga", "link": "https://stackoverflow.com/users/2880868/zyaga"}, "edited": false, "score": 0, "creation_date": 1463584512, "post_id": 37303201, "comment_id": 62129282, "body": "That worked! Is there anything I need to be aware of though? It seems like that using binstubs is not normally a good idea?"}, {"owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "reply_to_user": {"reputation": 33, "user_id": 2880868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0a88b711c6d0fdccf4ca79bd440b81?s=128&d=identicon&r=PG", "display_name": "Zyaga", "link": "https://stackoverflow.com/users/2880868/zyaga"}, "edited": false, "score": 0, "creation_date": 1463584703, "post_id": 37303201, "comment_id": 62129403, "body": "The reason is because all the binaries provided by your gems (like the <code>rails</code> command) are not automatically available in your PATH when you&#39;re using rbenv or rvm. The binstubs command puts <code>bin&#47;</code> into your PATH so that you can invoke those commands. Read <a href=\"https://github.com/rbenv/rbenv/wiki/Understanding-binstubs\" rel=\"nofollow noreferrer\">github.com/rbenv/rbenv/wiki/Understanding-binstubs</a> for more info on how it works."}, {"owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "reply_to_user": {"reputation": 33, "user_id": 2880868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0a88b711c6d0fdccf4ca79bd440b81?s=128&d=identicon&r=PG", "display_name": "Zyaga", "link": "https://stackoverflow.com/users/2880868/zyaga"}, "edited": false, "score": 0, "creation_date": 1463584788, "post_id": 37303201, "comment_id": 62129457, "body": "The other thing to be aware of is that by using binstubs you could have different versions of gems available in different project directories. For example you could have a Rails 4 project in one dir and a Rails 5 project in another. By using binstubs you&#39;d always invoke the correct bins for the version of Rails that you&#39;re currently working in."}], "tags": [], "owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "is_accepted": true, "score": 1, "last_activity_date": 1463583173, "creation_date": 1463583173, "answer_id": 37303201, "question_id": 37303009, "link": "https://stackoverflow.com/questions/37303009/rails-not-finding-gem-could-not-find-in-any-of-the-sources/37303201#37303201", "title": "Rails not finding gem. &quot;Could not find .. in any of the sources&quot;", "body": "<p>You might need to prefix your commands with <code>bundle exec</code> each time, like <code>bundle exec rails g</code>. </p>\n\n<p>If you're sick of typing <code>bundle exec</code> you can install the binstubs like </p>\n\n<pre><code>bundle install --binstubs\n</code></pre>\n\n<p>See <a href=\"https://github.com/rbenv/rbenv/wiki/Plugins#bundler-integration\" rel=\"nofollow\">https://github.com/rbenv/rbenv/wiki/Plugins#bundler-integration</a> for more detail. </p>\n"}], "owner": {"reputation": 33, "user_id": 2880868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0a88b711c6d0fdccf4ca79bd440b81?s=128&d=identicon&r=PG", "display_name": "Zyaga", "link": "https://stackoverflow.com/users/2880868/zyaga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1830, "favorite_count": 0, "accepted_answer_id": 37303201, "answer_count": 1, "score": 1, "last_activity_date": 1463583173, "creation_date": 1463582700, "question_id": 37303009, "link": "https://stackoverflow.com/questions/37303009/rails-not-finding-gem-could-not-find-in-any-of-the-sources", "title": "Rails not finding gem. &quot;Could not find .. in any of the sources&quot;", "body": "<p>I recently set up Ruby on Rails with rbenv. But for some reason I am getting: \"Could not find shoulda-matchers-3.1.1 in any of the sources\" when I try to do a rails generate scaffold command. Here is my gem environment:</p>\n\n<pre><code>RubyGems Environment:\n  - RUBYGEMS VERSION: 2.6.4\n  - RUBY VERSION: 2.3.0 (2015-12-25 patchlevel 0) [x86_64-linux]\n  - INSTALLATION DIRECTORY:     /home/username/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0\n  - USER INSTALLATION DIRECTORY: /home/username/.gem/ruby/2.3.0\n  - RUBY EXECUTABLE: /home/username/.rbenv/versions/2.3.0/bin/ruby\n  - EXECUTABLE DIRECTORY: /home/username/.rbenv/versions/2.3.0/bin\n  - SPEC CACHE DIRECTORY: /home/username/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /home/username/.rbenv/versions/2.3.0/etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-linux\n  - GEM PATHS:\n     - /home/username/.rbenv/versions/2.3.0/lib/ruby/gems/2.3.0\n     - /home/username/.gem/ruby/2.3.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n     - \"gem\" =&gt; \"--no-ri --no-rdoc\"\n  - REMOTE SOURCES:\n - https://rubygems.org/\n  - SHELL PATH:\n     - /home/username/.rbenv/versions/2.3.0/bin\n     - /home/username/.rbenv/libexec\n     - /home/username/.rbenv/plugins/ruby-build/bin\n     - /home/username/.rbenv/plugins/ruby-build/bin\n     - /home/username/.rbenv/shims\n     - /home/username/.rbenv/bin\n     - /usr/local/sbin\n     - /usr/local/bin\n     - /usr/sbin\n     - /usr/bin\n     - /sbin\n     - /bin\n     - /usr/games\n     - /usr/local/games\n     - /home/username/.rvm/bin\n     - /home/username/.rvm/bin\n     - /home/username/.rvm/bin\n</code></pre>\n\n<p>And when I run gem list, it shows:</p>\n\n<pre><code>sass-rails (5.0.4)\nsdoc (0.4.1)\nshoulda-matchers (3.1.1)\nspring (1.7.1)\nsprockets (3.6.0)\n</code></pre>\n\n<p>I've tried gem install shoulda-matchers, bundle install, bundle update, gem install bundler, gem install bundle, gem update --system, etc. It says I have it already but it still keeps giving me that error. Please help. D:</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "devise"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6313246, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/37168de77ec6f515a5f192460b1e90bb?s=128&d=identicon&r=PG&f=1", "display_name": "J. Haselden", "link": "https://stackoverflow.com/users/6313246/j-haselden"}, "edited": false, "score": 0, "creation_date": 1463583982, "post_id": 37303438, "comment_id": 62128901, "body": "This worked perfect! Thanks! I knew there had to be a simple solution for this."}], "tags": [], "owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "is_accepted": true, "score": 1, "last_activity_date": 1463583721, "creation_date": 1463583721, "answer_id": 37303438, "question_id": 37302974, "link": "https://stackoverflow.com/questions/37302974/ruby-on-rails-thredded-gem-displaying-user0x007fd8d5424108-instead-of-us/37303438#37303438", "title": "Ruby on Rails - Thredded Gem - Displaying #&lt;User:0x007fd8d5424108&gt; instead of Username", "body": "<p>This doesn't actually have to do with the threaded gem; the view is calling <code>to_s</code> on the user object. If you put <code>&lt;?= thredded_current_user =&gt;</code> in your view, ERB will automatically call <code>to_s</code> on the <code>thredded_current_user</code> object. Same thing happens in the <code>link_to</code> helper method. </p>\n\n<p>You can override the <code>to_s</code> method in the User model like so: </p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  def to_s\n    name\n  end\n  ...\nend\n</code></pre>\n\n<p>Alternatively, you can alias the <code>name</code> method to <code>to_s</code> like this: </p>\n\n<pre><code>alias_method :to_s, :name\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6313246, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/37168de77ec6f515a5f192460b1e90bb?s=128&d=identicon&r=PG&f=1", "display_name": "J. Haselden", "link": "https://stackoverflow.com/users/6313246/j-haselden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 662, "favorite_count": 0, "accepted_answer_id": 37303438, "answer_count": 1, "score": 0, "last_activity_date": 1463583721, "creation_date": 1463582614, "question_id": 37302974, "link": "https://stackoverflow.com/questions/37302974/ruby-on-rails-thredded-gem-displaying-user0x007fd8d5424108-instead-of-us", "title": "Ruby on Rails - Thredded Gem - Displaying #&lt;User:0x007fd8d5424108&gt; instead of Username", "body": "<p>I'm creating an app that runs on Ruby on Rails and is using the thredded Gem for it's community component: <a href=\"https://github.com/thredded/thredded\" rel=\"nofollow\">https://github.com/thredded/thredded</a></p>\n\n<p>Currently, in the thredded part of the app, it's displaying</p>\n\n<pre><code>#&lt;User:0x007fd8d5424108&gt;\n</code></pre>\n\n<p>where it should be displaying the user name.</p>\n\n<p>I have a :name column on the User that defines their username. I am also using Devise for registration.</p>\n\n<p>The link when displaying the username looks like this: &lt;%= link_to thredded_current_user, user_path(thredded_current_user) %></p>\n\n<p>Now I know I can just change thredded_current_user to thredded_current_user.name, however this would require finding everywhere it's used in the thredded gem, copying it to my app, and then changing the view. I'm thinking there has to be a more simple answer, I just don't know what.</p>\n\n<p>Is there another way to display the user name other than changing all instances of thredded_current_user to thredded_current_user.name ?</p>\n\n<p>Here's the code for the thredded initializer:</p>\n\n<pre><code># frozen_string_literal: true\n# Thredded configuration\n\n# ==&gt; User Configuration\n# The name of the class your app uses for your users.\n# By default the engine will use 'User' but if you have another name\n# for your user class - change it here.\nThredded.user_class = 'User'\n\n# User name column, used in @mention syntax and should be unique.\n# This is the column used to search for users' names if/when someone is @ mentioned.\nThredded.user_name_column = :name\n\n# The path (or URL) you will use to link to your users' profiles.\n# When linking to a user, Thredded will use this lambda to spit out\n# the path or url to your user. This lambda is evaluated in the view context.\nThredded.user_path = lambda do |user|\n  user_path = :\"#{Thredded.user_class.name.underscore}_path\"\n  main_app.respond_to?(user_path) ? main_app.send(user_path, user) : \"#{user.to_param}\"\nend\n\n# This method is used by Thredded controllers and views to fetch the currently signed-in user\nThredded.current_user_method = :\"current_#{Thredded.user_class.name.underscore}\"\n\n# User avatar URL. rb-gravatar gem is used by default:\nThredded.avatar_url = -&gt;(user) { user.profile_picture.url }\n\n# ==&gt; Permissions Configuration\n# By default, thredded uses a simple permission model, where all the users can post to all message boards,\n# and admins and moderators are determined by a flag on the users table.\n\n# The name of the moderator flag column on the users table.\nThredded.moderator_column = :admin\n# The name of the admin flag column on the users table.\nThredded.admin_column = :admin\n\n# This model can be customized further by overriding a handful of methods on the User model.\n# For more information, see app/models/thredded/user_extender.rb.\n\n# ==&gt; Email Configuration\n# Email \"From:\" field will use the following\n# Thredded.email_from = 'no-reply@example.com'\n\n# Incoming email will be directed to this host\n# Thredded.email_incoming_host = 'example.com'\n\n# Emails going out will prefix the \"Subject:\" with the following string\n# Thredded.email_outgoing_prefix = '[My Forum] '\n\n# Reply to field for email notifications\n# Thredded.email_reply_to = -&gt; postable { \"#{postable.hash_id}@#{Thredded.email_incoming_host}\" }\n\n# ==&gt; View Configuration\n# Set the layout for rendering the thredded views.\nThredded.layout = 'thredded/application'\n\n# ==&gt; Error Handling\n# By defau\n\nlt Thredded just renders a flash alert on errors such as Topic not found, or Login required.\n# Below is an example of overriding the default behavior on LoginRequired:\n#\n# Rails.application.config.to_prepare do\n#   Thredded::ApplicationController.module_eval do\n#     rescue_from Thredded::Errors::LoginRequired do |exception|\n#       @message = exception.message\n#       render template: 'sessions/new', status: :forbidden\n#     end\n#   end\n# end\n</code></pre>\n\n<p>Here is my routes code:</p>\n\n<pre><code>Rails.application.routes.draw do\n  get 'page/home'\n  get 'page/feed'\n  get 'page/about'\n  get 'page/contact'\n\n  mount Thredded::Engine =&gt; '/community'\n\n  devise_for :users, :path =&gt; '', :path_names =&gt; { :sign_in =&gt; \"login\", :sign_out =&gt; \"logout\", :sign_up =&gt; \"register\" }, :controllers  =&gt; {\n             :registrations =&gt; 'users/registrations',  :omniauth_callbacks =&gt; \"users/omniauth_callbacks\" }\n\n  resources :users,  path: \"\", only: [:show] do\n    resources :tracks\n  end\n\n  resources :tracks, only: [:create, :destroy]\n\n  resources :feeds, only: [:create, :destroy, :show]\n  # The priority is based upon order of creation: first created -&gt; highest priority.\n  # See how all your routes lay out with \"rake routes\".\n\n  # You can have the root of your site routed with \"root\"\nroot 'page#home'\n\n\n\n  # Example of regular route:\n  #   get 'products/:id' =&gt; 'catalog#view'\n\n  # Example of named route that can be invoked with purchase_url(id: product.id)\n  #   get 'products/:id/purchase' =&gt; 'catalog#purchase', as: :purchase\n\n  # Example resource route (maps HTTP verbs to controller actions automatically):\n  #   resources :products\n\n  # Example resource route with options:\n  #   resources :products do\n  #     member do\n  #       get 'short'\n  #       post 'toggle'\n  #     end\n  #\n  #     collection do\n  #       get 'sold'\n  #     end\n  #   end\n\n  # Example resource route with sub-resources:\n  #   resources :products do\n  #     resources :comments, :sales\n  #     resource :seller\n  #   end\n\n  # Example resource route with more complex sub-resources:\n  #   resources :products do\n  #     resources :comments\n  #     resources :sales do\n  #       get 'recent', on: :collection\n  #     end\n  #   end\n\n  # Example resource route with concerns:\n  #   concern :toggleable do\n  #     post 'toggle'\n  #   end\n  #   resources :posts, concerns: :toggleable\n  #   resources :photos, concerns: :toggleable\n\n  # Example resource route within a namespace:\n  #   namespace :admin do\n  #     # Directs /admin/products/* to Admin::ProductsController\n  #     # (app/controllers/admin/products_controller.rb)\n  #     resources :products\n  #   end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "ldap"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1463585466, "post_id": 37302952, "comment_id": 62129943, "body": "I&#39;m skeptical that replacing those single-element arrays with their elements would help much with any performance problem. At the very least you should profile it to see what operations are actually taking up the most CPU time. There&#39;s a big disadvantage to what your proposing, which is that you would then have to check every time whether the element you&#39;re accessing is an array or not, which isn&#39;t free."}, {"owner": {"reputation": 296, "user_id": 1832293, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/j6Nzk.jpg?s=128&g=1", "display_name": "damian", "link": "https://stackoverflow.com/users/1832293/damian"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1473688337, "post_id": 37302952, "comment_id": 66225112, "body": "That&#39;s true, but I don&#39;t want to use Arrays, they pollute the JSON file witch unnecessary brackets, and generally I don&#39;t see a point in having them when a value is meant to be unique. It causes a lot of confusion. Problem is not solved till today."}], "answers": [{"tags": [], "owner": {"reputation": 1122, "user_id": 2353990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af3d023b028ba0dd7118a17a67358dc6?s=128&d=identicon&r=PG", "display_name": "andiba", "link": "https://stackoverflow.com/users/2353990/andiba"}, "is_accepted": false, "score": 0, "last_activity_date": 1485523612, "creation_date": 1485523612, "answer_id": 41895062, "question_id": 37302952, "link": "https://stackoverflow.com/questions/37302952/ruby-ldap-to-hash-method/41895062#41895062", "title": "Ruby LDAP to_hash method", "body": "<p>hmmm, this is basically an LDAP-Issue: LDAP-Values are stored in arrays.\nA simple solution could be have a custome helper, i.e.</p>\n\n<pre><code>def to_my_hash()\n  @ldap_entry.attribute_names.each_with_object({}) do |key, hsh|\n    val_arr = @ldap_entry[name]\n    if val_arr.empty? \n      hsh[key] = nil\n    elsif  val_arr.size == 1\n      hsh[key] = val_arr.first\n    else\n      hsh[key] = val_arr\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 296, "user_id": 1832293, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/j6Nzk.jpg?s=128&g=1", "display_name": "damian", "link": "https://stackoverflow.com/users/1832293/damian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485523612, "creation_date": 1463582566, "question_id": 37302952, "link": "https://stackoverflow.com/questions/37302952/ruby-ldap-to-hash-method", "title": "Ruby LDAP to_hash method", "body": "<p>Question regarding <code>ruby-ldap</code> gem.\nIt returns an <code>LDAP::Entry</code> object from search. It has a method called <code>to_hash</code>. The problem is that the values in the hash it returns are always arrays - even if there is only one value. \nDo you know if it's possible to change this behavior? I would like to have a <code>key -&gt; String</code> pair when there is only one element instead of <code>key -&gt; Array</code>.</p>\n\n<p>Processing this hash later can be expensive, especially that it's pretty big in my case.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "session"], "comments": [{"owner": {"reputation": 966, "user_id": 5350659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63535c11d66f71640d7a5a558b351d11?s=128&d=identicon&r=PG&f=1", "display_name": "Pitabas Prathal", "link": "https://stackoverflow.com/users/5350659/pitabas-prathal"}, "edited": false, "score": 0, "creation_date": 1463582792, "post_id": 37302818, "comment_id": 62127900, "body": "as <code>loc</code> action is a <code>post</code> verb i don&#39;t have view page.so it can&#39;t render any template.so you need to redirect to some where else"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1463588410, "post_id": 37303190, "comment_id": 62131968, "body": "There&#39;s also the <code>render(nothing: true)</code> option."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1463588875, "last_edit_date": 1463588875, "creation_date": 1463583148, "answer_id": 37303190, "question_id": 37302818, "link": "https://stackoverflow.com/questions/37302818/do-i-need-to-generate-a-controller-for-a-ruby-on-rails-controller-call/37303190#37303190", "title": "Do I need to generate a controller for a Ruby on Rails Controller call?", "body": "<blockquote>\n  <p>What possible side effect are there to ignoring this 500 error?</p>\n</blockquote>\n\n<p>Each request is crashing your rails server. Thats not good. Since it means  that some cases it may have to restart after every failed request - that eats resources like Homer Simpson at a buffet.</p>\n\n<p>Your app should not be raising uncaught exceptions that cause 500 errors - thats just decent professional practice.</p>\n\n<h3>So how do I fix it?</h3>\n\n<p>Simple, if you don't want the default behavior of rendering a view tell rails to do something else:</p>\n\n<pre><code>class StatesController &lt; ApplicationController\n  def loc\n    session[:location] = params[:location]\n    head :created\n  end\nend\n</code></pre>\n\n<p>This sends an empty response with the <code>201 - CREATED</code> http header.</p>\n\n<p>See <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html#creating-responses\" rel=\"nofollow\">Rails Guides - Layouts and Rendering in Rails</a></p>\n"}], "owner": {"reputation": 153, "user_id": 3956692, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/720397335/picture?type=large", "display_name": "Joshua Hedges", "link": "https://stackoverflow.com/users/3956692/joshua-hedges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 37303190, "answer_count": 1, "score": 0, "last_activity_date": 1463588875, "creation_date": 1463582295, "question_id": 37302818, "link": "https://stackoverflow.com/questions/37302818/do-i-need-to-generate-a-controller-for-a-ruby-on-rails-controller-call", "title": "Do I need to generate a controller for a Ruby on Rails Controller call?", "body": "<p>I'm setting a session variable to a user's geographical state. I have to use a session variable because I run code on the server specific to that user on page load and I need to know where they are. This code is set up to just update the session variable.</p>\n\n<p>states_controller.rb</p>\n\n<pre><code>class StatesController &lt; ApplicationController\n  def loc\n    session[:location] = params[:location]\n  end\nend\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>post \"states/loc\" =&gt; \"states#loc\"\n</code></pre>\n\n<p>The code routes properly and the session variable is updated. </p>\n\n<p>However, when the process is complete I get a 500 error in the console \"Missing Template\" in the views directory. I haven't seen any tutorials tell users to call the command \"rails generate controller\" and I'm in the unique situation where I can't call this command. </p>\n\n<p>What possible side effect are there to ignoring this 500 error?</p>\n\n<p>*I'm running an older version of ruby and rails.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 6351585, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1087377797989588/picture?type=large", "display_name": "Vladyslav Kalyuzhnyy", "link": "https://stackoverflow.com/users/6351585/vladyslav-kalyuzhnyy"}, "edited": false, "score": 0, "creation_date": 1463585593, "post_id": 37303577, "comment_id": 62130049, "body": "Thanks you ! Just missing &quot;s&quot; :D"}], "tags": [], "owner": {"reputation": 174, "user_id": 4490949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30ebc44c9497aee659a026d9f07e962e?s=128&d=identicon&r=PG", "display_name": "Wei Jia Chen", "link": "https://stackoverflow.com/users/4490949/wei-jia-chen"}, "is_accepted": true, "score": 1, "last_activity_date": 1463584047, "last_edit_date": 1489747072, "creation_date": 1463584047, "answer_id": 37303577, "question_id": 37302799, "link": "https://stackoverflow.com/questions/37302799/undefined-local-variable-or-method-for-class/37303577#37303577", "title": "Undefined local variable or method for class", "body": "<p>Firstly, it helps a lot to style your question and code correctly as well as mark your files (<code>routes.rb</code>, <code>controllers</code>, <code>models</code> correctly). Else it would be very difficult for readers to understand your question and spot issues with your code. You can refer to <a href=\"https://meta.stackoverflow.com/editing-help\">https://meta.stackoverflow.com/editing-help</a> for the styleguide/ markdown. </p>\n\n<p>Secondly, it looks like your <code>routes.rb</code> are incorrect - but again, this could be due to your formatting. Based on your question, it looks like your routes are:</p>\n\n<pre><code>resources :feedbacks \n    resources :users do \n        resources :feedbacks \n    end\nend\n</code></pre>\n\n<p>When it should be:</p>\n\n<pre><code>resources: users do\n    resources: feedbacks\nend\n</code></pre>\n\n<p>Thirdly, your seem to have a typo in your model (<code>feedback</code> instead of <code>feedbacks</code>. That is:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n    has_many :feedbacks\nend\n\nclass Feedback &lt; ActiveRecord::Base\n    belongs_to :user\nend\n</code></pre>\n\n<p>Lastly, do add specifics and what exactly you ran that caused the error. E.g. did you run something in console, what page did you load?</p>\n"}], "owner": {"reputation": 69, "user_id": 6351585, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1087377797989588/picture?type=large", "display_name": "Vladyslav Kalyuzhnyy", "link": "https://stackoverflow.com/users/6351585/vladyslav-kalyuzhnyy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1339, "favorite_count": 0, "accepted_answer_id": 37303577, "answer_count": 1, "score": 0, "last_activity_date": 1463588423, "creation_date": 1463582255, "last_edit_date": 1463588423, "question_id": 37302799, "link": "https://stackoverflow.com/questions/37302799/undefined-local-variable-or-method-for-class", "title": "Undefined local variable or method for class", "body": "<p>What did I miss?</p>\n\n<pre><code>ERROR: undefined local variable or method `feedback' for #&lt;#&lt;Class:0x007f66dc8dca30&gt;:0x007f66dc8cee80&gt;\n</code></pre>\n\n<p>Migration:</p>\n\n<pre><code>class CreateFeedbacks &lt; ActiveRecord::Migration\n  def change\n    create_table :feedbacks do |t|\n      t.references :user\n      t.text :body\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>Model:</p>\n\n<pre><code>class Feedback &lt; ActiveRecord::Base\n  attr_accessible :body, :user\n  belongs_to :user\nend\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>class FeedbacksController &lt; ApplicationController\n  before_action :authenticate_user!\n\n  def index\n    @feedback = Feedback.all\n  end\n\n  def new\n    @feedback = Feedback.new\n  end\n\n  def create\n    @user = User.find(params[:user])\n    @feedback = @user.feedbacks.create(params[:feedback])\n\n    respond_to do |format|\n      if @feedback.save\n        format.html { redirect_to @user, notice 'Comment was successfully created.' }\n        format.json { render json: @feedback, status: :created, location: @feedback }\n      else\n        format.html { render action: \"new\" }\n        format.json { render json: @feedback.errors, status: :unprocessable_entily }\n      end\n    end\n  end\n</code></pre>\n\n<p>User model:</p>\n\n<pre><code>has_many :feedback\n</code></pre>\n\n<p>Routes:</p>\n\n<pre><code>resources :feedbacks\n  resources :users do\n    resources :feedbacks\n  end\n</code></pre>\n"}, {"tags": ["ruby", "iteration", "symbols"], "comments": [{"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 1, "creation_date": 1463584163, "post_id": 37302606, "comment_id": 62129014, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3066703/blocks-and-yields-in-ruby\">Blocks and yields in Ruby</a>"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1463585727, "post_id": 37302606, "comment_id": 62130144, "body": "May be going through the article <a href=\"https://www.practicingruby.com/articles/building-enumerable-and-enumerator\" rel=\"nofollow noreferrer\">Building Enumerable &amp; Enumerator in Ruby</a> will make things clear"}], "answers": [{"comments": [{"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1464639538, "post_id": 37308352, "comment_id": 62556548, "body": "@NarayananKrishnan If this has answered your question, please click the checkmark next to the answer to accept it.  The checkmark will change color to green.  Upvotes are always appreciated, as well.  :D"}], "tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": false, "score": 1, "last_activity_date": 1463599803, "last_edit_date": 1463599803, "creation_date": 1463599107, "answer_id": 37308352, "question_id": 37302606, "link": "https://stackoverflow.com/questions/37302606/how-each-and-injectsymbol-methods-works-in-the-below-code/37308352#37308352", "title": "How &quot;each&quot; and &quot;inject(symbol)&quot; methods works in the below code?", "body": "<p>The <code>inject</code> method comes from the <code>Enumerable</code> class, which is included in <code>VowelFinder</code>.  As part of the implementation of <code>inject</code>, it calls a method called <code>each</code>.</p>\n\n<p><code>inject</code> expects that the object that it's called on has an <code>each</code> method defined, as <code>Enumerable</code> does <em>not</em> provide an <code>each</code> method.  Typically, <code>inject</code> is called on instances of container classes, such as <code>Array</code> and <code>Hash</code>, which do define <code>each</code> in terms of their container design.</p>\n\n<p>Thus, when <code>vf.inject(:+)</code> calls <code>each</code>, it ends up calling <code>VowelFinder#each</code>, the object being operated on is <code>vf</code> and <code>each</code> is defined on <code>VowelFinder</code>.</p>\n\n<p>In Ruby, you can declare a method that implicitly accepts a block, as <code>each</code> does.  Technically, all methods in Ruby accept a block, but only <em>some</em> methods <em>call</em> a block.  The <code>yield</code> statement is used to call the block.</p>\n\n<p>Ruby has a built-in function called <code>block_given?</code> that's used to detect whether a block has been passed to the method.  Many of the methods on <code>Array</code> and <code>Hash</code> use <code>block_given?</code> to determine whether to call the block or return an <code>Enumerator</code>.  Checking <code>block_given?</code> allows the block to be called conditionally, like so:</p>\n\n<pre><code>def each\n  if block_given?\n    @string.scan(/[aeiou]/) do |vowel|\n      yield vowel\n    end\n  else\n    # Do something interesting here, or better yet, return an Enumerator\n  end\nend\n</code></pre>\n\n<p>In this case, <code>each</code> may be called this way:</p>\n\n<pre><code>vf = VowelFinder.new(\"the quick brown fox jumped\")\nvf.each {|vowel| puts \"Found the vowel: #{vowel}\" }\n</code></pre>\n\n<p>or this way:</p>\n\n<pre><code>vf.each\n</code></pre>\n\n<p>The <code>else</code> in the <code>VowelFinder#each</code> method is left for a learning exercise to return an enumerator, as is the convention.</p>\n\n<p>The <a href=\"https://rubymonk.com/learning/books/4-ruby-primer-ascent/chapters/44-collections/lessons/96-enumerators-and-enumerables\" rel=\"nofollow\">Enumerators and Enumerables</a> chapter at <a href=\"https://rubymonk.com/\" rel=\"nofollow\">RubyMonk</a> has very good coverage of this topic.</p>\n"}], "owner": {"reputation": 7, "user_id": 4702924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f142d81e422e2bf0423ce31a117e8902?s=128&d=identicon&r=PG&f=1", "display_name": "Narayanan Krishnan", "link": "https://stackoverflow.com/users/4702924/narayanan-krishnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1463599803, "creation_date": 1463581806, "last_edit_date": 1463599339, "question_id": 37302606, "link": "https://stackoverflow.com/questions/37302606/how-each-and-injectsymbol-methods-works-in-the-below-code", "title": "How &quot;each&quot; and &quot;inject(symbol)&quot; methods works in the below code?", "body": "<p>I am not able to understand the logic of this code:</p>\n\n<pre><code>class VowelFinder\n  include Enumerable\n  def initialize(string)\n    @string = string\n  end\n\n  def each\n    @string.scan(/[aeiou]/) do |vowel|\n      yield vowel\n    end\n  end\nend\n\nvf = VowelFinder.new(\"the quick brown fox jumped\")\nvf.inject(:+) # =&gt; \"euiooue\"\n</code></pre>\n\n<ol>\n<li><p>How is the object <code>vf.inject(:+)</code> calling the method <code>each</code> in this program?</p></li>\n<li><p>How does the <code>each</code> method work in this program, because there is no block argument mentioned in function definition?</p></li>\n<li><p>If I simply call <code>vf.each</code>, why am I getting the following error?</p>\n\n<pre><code>vowel_finder.rb:8:in `block in each': no block given (yield) (LocalJumpError)\nfrom vowel_finder.rb:8:in `scan'\nfrom vowel_finder.rb:8:in `each'\nfrom vowel_finder.rb:13:in `&lt;main&gt;'\n</code></pre></li>\n</ol>\n\n<p>One of the few things that I understood is that the <code>each</code> method in this class overrides the <code>each</code> method from the included <code>Enumerable</code> module. Other than that I did not understand anything about <code>each</code> and blocks.</p>\n\n<p>Could someone please explain me the logic and how it works internally?</p>\n"}, {"tags": ["ruby", "cucumber", "reporting"], "answers": [{"tags": [], "owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "is_accepted": false, "score": 0, "last_activity_date": 1464276599, "last_edit_date": 1464276599, "creation_date": 1463644149, "answer_id": 37317044, "question_id": 37302374, "link": "https://stackoverflow.com/questions/37302374/cucumber-html-report-causes-test-failure/37317044#37317044", "title": "Cucumber html report causes test failure", "body": "<p>On trial and error, I found that it was the background steps causing the failure.  I moved these to the scenarios and lo and behold, the tests stopped failing</p>\n"}], "owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 304, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1464276599, "creation_date": 1463581167, "last_edit_date": 1463590192, "question_id": 37302374, "link": "https://stackoverflow.com/questions/37302374/cucumber-html-report-causes-test-failure", "title": "Cucumber html report causes test failure", "body": "<p>I'm running tests in parallel on Cucumber using parallel_cucumber.</p>\n\n<p>I'm finding that when I choose to have the reports in junit, everything runs smoothly.  If I change the format of the test to html, some tests keep failing.  Yet running them in isolation, no parallel_cucumber and it works fine.  I switch it back to junit and the tests all pass again.</p>\n\n<p>The errors I'm getting are unable to find fields on screen.  Could the html be messing with the step definitions?  I've searched and searched and can't figure out why it's failing.</p>\n\n<p>Has anyone experienced a similar issue?</p>\n\n<p>My cucumber.yml file contains:</p>\n\n<pre><code>html: --format pretty --format html --out Reports/report&lt;%= ENV['TEST_ENV_NUMBER']%&gt;.html --format ParallelTests::Cucumber::FailuresLogger --out Reports/cucumber_failures.log\n</code></pre>\n\n<p>my junit profile is:</p>\n\n<pre><code>junit: --format pretty --format junit --out Reports/ --format ParallelTests::Cucumber::FailuresLogger --out Reports/cucumber_failures.log\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "backgroundworker", "rails-activejob", "sucker-punch"], "comments": [{"owner": {"reputation": 901, "user_id": 2802149, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/htwJY.png?s=128&g=1", "display_name": "Jan Bussieck", "link": "https://stackoverflow.com/users/2802149/jan-bussieck"}, "edited": false, "score": 0, "creation_date": 1463581317, "post_id": 37302044, "comment_id": 62126746, "body": "Have you checked your development.rb file? If there is a config option saying <code>config.active_job.queue_adapter = :inline</code> it might overwrite whatever you put in your initializer."}, {"owner": {"reputation": 2424, "user_id": 1438334, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b4cec290f76b6683ad2f53240be36860?s=128&d=identicon&r=PG", "display_name": "J&#233;r&#244;me Bo&#233;", "link": "https://stackoverflow.com/users/1438334/j%c3%a9r%c3%b4me-bo%c3%a9"}, "reply_to_user": {"reputation": 901, "user_id": 2802149, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/htwJY.png?s=128&g=1", "display_name": "Jan Bussieck", "link": "https://stackoverflow.com/users/2802149/jan-bussieck"}, "edited": false, "score": 0, "creation_date": 1463581634, "post_id": 37302044, "comment_id": 62126987, "body": "This line is not present"}, {"owner": {"reputation": 901, "user_id": 2802149, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/htwJY.png?s=128&g=1", "display_name": "Jan Bussieck", "link": "https://stackoverflow.com/users/2802149/jan-bussieck"}, "edited": false, "score": 0, "creation_date": 1463581936, "post_id": 37302044, "comment_id": 62127217, "body": "This is another stupid guess, but did you restart your rails server so the initializer could be loaded?"}, {"owner": {"reputation": 2424, "user_id": 1438334, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b4cec290f76b6683ad2f53240be36860?s=128&d=identicon&r=PG", "display_name": "J&#233;r&#244;me Bo&#233;", "link": "https://stackoverflow.com/users/1438334/j%c3%a9r%c3%b4me-bo%c3%a9"}, "reply_to_user": {"reputation": 901, "user_id": 2802149, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/htwJY.png?s=128&g=1", "display_name": "Jan Bussieck", "link": "https://stackoverflow.com/users/2802149/jan-bussieck"}, "edited": false, "score": 3, "creation_date": 1463582027, "post_id": 37302044, "comment_id": 62127283, "body": "Yes I did it multiple times. However, putting <code>config.active_job.queue_adapter = :sucker_punch</code> in application.rb makes it work."}, {"owner": {"reputation": 2424, "user_id": 1438334, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b4cec290f76b6683ad2f53240be36860?s=128&d=identicon&r=PG", "display_name": "J&#233;r&#244;me Bo&#233;", "link": "https://stackoverflow.com/users/1438334/j%c3%a9r%c3%b4me-bo%c3%a9"}, "reply_to_user": {"reputation": 901, "user_id": 2802149, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/htwJY.png?s=128&g=1", "display_name": "Jan Bussieck", "link": "https://stackoverflow.com/users/2802149/jan-bussieck"}, "edited": false, "score": 0, "creation_date": 1463582673, "post_id": 37302044, "comment_id": 62127792, "body": "This must be the answer, if anyone has an idea, don&#39;t hesitate."}, {"owner": {"reputation": 4896, "user_id": 167108, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6793711bc9796cf78175999287f92be8?s=128&d=identicon&r=PG", "display_name": "Steve Smith", "link": "https://stackoverflow.com/users/167108/steve-smith"}, "edited": false, "score": 0, "creation_date": 1516903387, "post_id": 37302044, "comment_id": 83891076, "body": "I had exactly the same issue with sidekiq rather than sucker_punch. Using <code>Rails.application.config.active_job.queue_adapter = :sidekiq</code> or <code>My::Application.config.active_job.queue_adapter = :sidekiq</code> both failed. The only solution was to put <code>config.active_job.queue_adapter = :sidekiq</code> directly into the application.rb file."}], "owner": {"reputation": 2424, "user_id": 1438334, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b4cec290f76b6683ad2f53240be36860?s=128&d=identicon&r=PG", "display_name": "J&#233;r&#244;me Bo&#233;", "link": "https://stackoverflow.com/users/1438334/j%c3%a9r%c3%b4me-bo%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 477, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1463581049, "creation_date": 1463580390, "last_edit_date": 1463581049, "question_id": 37302044, "link": "https://stackoverflow.com/questions/37302044/activejob-queue-adapter-ignored", "title": "ActiveJob queue adapter ignored?", "body": "<p><strong>user_controller.rb</strong></p>\n\n<pre><code>class UsersController\n  def create\n    MyJob.perform_later\n    User.create(...)\n  end\nend\n</code></pre>\n\n<p><strong>my_job.rb</strong></p>\n\n<pre><code>class MyJob &lt; ActiveJob::Base\n  queue_as :default\n\n  def perform()\n    puts \"START\"\n    sleep 3\n    puts \"END\"\n  end\nend\n</code></pre>\n\n<p><strong>config/initializer/sucker_punch.rb</strong></p>\n\n<pre><code>require 'sucker_punch/async_syntax'\nRails.application.configure do\n  config.active_job.queue_adapter = :sucker_punch\nend\n</code></pre>\n\n<p>When I run <code>MyJob.perform_later</code>in a rails console, everything work fine and the logger display this message <code>Enqueued MyJob (Job ID: 6c857af8-a8ed-4bd0-918b-4296c4315727) to SuckerPunch(default)</code></p>\n\n<p>However, when I send an http request to my <strong>user_controller</strong>, I don't receive any response before 3 seconds (which make me think that the job is not executed asynchronously), and the logger display this <code>Enqueued MyJob (Job ID: e3d698eb-00d8-4849-9496-f01c53fc7217) to Inline(default)</code></p>\n\n<p>It seems to use the inline (default?) adapter in controllers, which is not asynchronous.</p>\n\n<p>ps : I'm using <code>puma</code> as http server, and using sucker_punch without ActiveJob works fine</p>\n"}, {"tags": ["ruby", "combinatorics"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1463580254, "post_id": 37301649, "comment_id": 62125941, "body": "Use <code>p.combination(n).size</code> instead."}, {"owner": {"reputation": 93, "user_id": 6219766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f290de450eabe77cbab43fde0a0e2357?s=128&d=identicon&r=PG&f=1", "display_name": "Oscady", "link": "https://stackoverflow.com/users/6219766/oscady"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1463581462, "post_id": 37301649, "comment_id": 62126861, "body": "@Stefan Thanks for the suggestion. While this works and I assume it has sped up the process, to the naked eye it is still taking a similar amount of time to figure out the larger numbers. To be clear you were referring to the needless .to_a rather than the code on the line above?"}, {"owner": {"reputation": 93, "user_id": 6219766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f290de450eabe77cbab43fde0a0e2357?s=128&d=identicon&r=PG&f=1", "display_name": "Oscady", "link": "https://stackoverflow.com/users/6219766/oscady"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1463581843, "post_id": 37301649, "comment_id": 62127138, "body": "@Stefan apologies, it is much quicker. Thanks"}, {"owner": {"reputation": 2175, "user_id": 2859525, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/tid9B.jpg?s=128&g=1", "display_name": "Todd", "link": "https://stackoverflow.com/users/2859525/todd"}, "edited": false, "score": 0, "creation_date": 1517871571, "post_id": 37301649, "comment_id": 84262849, "body": "@Oscady yes, because <code>#to_a</code> in Ruby returns a whole new object with the elements found in the Enumerator. This requires more time and memory. Check <a href=\"https://ruby-doc.org/core-2.5.0/Enumerable.html#method-i-to_a\" rel=\"nofollow noreferrer\">the docs</a> for info."}], "answers": [{"comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1463580697, "post_id": 37301879, "comment_id": 62126267, "body": "It is just one of basic combinatorics issues, not a Ruby. Smart answer."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1463580869, "post_id": 37301879, "comment_id": 62126408, "body": "Where does <code>Math.factorial</code> come from?"}, {"owner": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1463581153, "post_id": 37301879, "comment_id": 62126631, "body": "Good catch @stefan, I had forgotten it was not standard Ruby. I am using the <a href=\"https://github.com/clbustos/distribution\" rel=\"nofollow noreferrer\">Distribution</a> gem, which extends <code>Math</code>. Probably simpler then (and, at least on my machine, even faster for some reason) to do it your way."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 2, "creation_date": 1463581308, "post_id": 37301879, "comment_id": 62126734, "body": "8 choose 6 is 28, not 45.  <code>8 * 7 &#47; 2</code>."}, {"owner": {"reputation": 93, "user_id": 6219766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f290de450eabe77cbab43fde0a0e2357?s=128&d=identicon&r=PG&f=1", "display_name": "Oscady", "link": "https://stackoverflow.com/users/6219766/oscady"}, "reply_to_user": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1463581906, "post_id": 37301879, "comment_id": 62127188, "body": "@pjs sorry, the test I ran was 8 choose 2. My mistake"}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "reply_to_user": {"reputation": 93, "user_id": 6219766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f290de450eabe77cbab43fde0a0e2357?s=128&d=identicon&r=PG&f=1", "display_name": "Oscady", "link": "https://stackoverflow.com/users/6219766/oscady"}, "edited": false, "score": 0, "creation_date": 1463582036, "post_id": 37301879, "comment_id": 62127294, "body": "@Oscady <code>(8 choose 2) == (8 choose 6)</code> because of the way the cancellations work."}, {"owner": {"reputation": 93, "user_id": 6219766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f290de450eabe77cbab43fde0a0e2357?s=128&d=identicon&r=PG&f=1", "display_name": "Oscady", "link": "https://stackoverflow.com/users/6219766/oscady"}, "reply_to_user": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1463582548, "post_id": 37301879, "comment_id": 62127681, "body": "@pjs right you are. I entered the values of n and k instead of 10 choose 2 which is 45."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1463587711, "post_id": 37301879, "comment_id": 62131487, "body": "Depending on <code>n</code> and <code>k</code>, <code>(n-k+1..n).reduce(:*)&#47;Math.factorial(k)</code> may be faster (don&#39;t know)."}], "tags": [], "owner": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "is_accepted": true, "score": 7, "last_activity_date": 1463581732, "last_edit_date": 1463581732, "creation_date": 1463580034, "answer_id": 37301879, "question_id": 37301649, "link": "https://stackoverflow.com/questions/37301649/faster-n-choose-k-for-combination-of-array-ruby/37301879#37301879", "title": "faster n choose k for combination of array ruby", "body": "<p>Rather than building the array of combinations just to count it, just write the <a href=\"https://en.wikipedia.org/wiki/Binomial_coefficient\" rel=\"noreferrer\">function</a> that defines the number of combinations. I'm sure there are also gems that include this and many other combinatorics functions.</p>\n\n<p>Note that I am using the gem <a href=\"https://github.com/clbustos/distribution\" rel=\"noreferrer\">Distribution</a> for the <code>Math.factorial</code> method, but that is another easy one to write. Given that, though, I'd suggest taking @stefan's answer, as it's less overhead.</p>\n\n<pre><code>def n_choose_k(n, k)\n  Math.factorial(n) / (Math.factorial(k) * Math.factorial(n - k))\nend\n\nn_choose_k(10, 8)\n# =&gt; 45\n</code></pre>\n\n<p>Note that the <code>n</code> and <code>k</code> here refer to slightly different things than in your method, but I am keeping them as it is highly standard nomenclature in combinatorics for this function.</p>\n"}, {"tags": [], "owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "is_accepted": false, "score": 0, "last_activity_date": 1463583445, "last_edit_date": 1463583445, "creation_date": 1463581316, "answer_id": 37302423, "question_id": 37301649, "link": "https://stackoverflow.com/questions/37301649/faster-n-choose-k-for-combination-of-array-ruby/37302423#37302423", "title": "faster n choose k for combination of array ruby", "body": "<p>Since you're interested in the count rather than the actual combination sets, you should do this with a <code>choose</code> function. The mathematical definition involves evaluating three different factorials, but there's a lot of cancellation going on so you can speed it up by using ranges to avoid the calculations that will be cancelled anyway.</p>\n\n<pre><code>class Integer\n  def choose(k)\n    fail 'k &gt; n' if k &gt; self\n    fail 'args must be positive' if k &lt; 0 or self &lt; 1\n    return 1 if k == n || k == 0\n    mm = [self - k, k].minmax\n    (mm[1]+1..self).reduce(:*) / (2..mm[0]).reduce(:*)\n  end\nend\n\np 8.choose 6  # =&gt; 28\n</code></pre>\n\n<p>To solve your paths problem, you could then define</p>\n\n<pre><code>def paths(n, k)\n  (n + k).choose(k)\nend\n\np paths(8, 2)  # =&gt; 45\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1463581649, "post_id": 37302471, "comment_id": 62126997, "body": "Nice use of <code>reduce</code>"}, {"owner": {"reputation": 93, "user_id": 6219766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f290de450eabe77cbab43fde0a0e2357?s=128&d=identicon&r=PG&f=1", "display_name": "Oscady", "link": "https://stackoverflow.com/users/6219766/oscady"}, "edited": false, "score": 0, "creation_date": 1463582013, "post_id": 37302471, "comment_id": 62127276, "body": "I have seen others do similar to this while searching but I couldn&#39;t quite figure it out. I will have to look into this a bit more. Thanks for the help"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 93, "user_id": 6219766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f290de450eabe77cbab43fde0a0e2357?s=128&d=identicon&r=PG&f=1", "display_name": "Oscady", "link": "https://stackoverflow.com/users/6219766/oscady"}, "edited": false, "score": 0, "creation_date": 1463583475, "post_id": 37302471, "comment_id": 62128475, "body": "@Oscady I added the math explanation. If what you can&#39;t figure out is <code>reduce</code>, please refer to the <a href=\"http://ruby-doc.org/core-2.1.0/Enumerable.html#method-i-reduce\" rel=\"nofollow noreferrer\">ruby documentation</a>"}, {"owner": {"reputation": 93, "user_id": 6219766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f290de450eabe77cbab43fde0a0e2357?s=128&d=identicon&r=PG&f=1", "display_name": "Oscady", "link": "https://stackoverflow.com/users/6219766/oscady"}, "edited": false, "score": 0, "creation_date": 1463594566, "post_id": 37302471, "comment_id": 62135423, "body": "@Aetherus that is class,  thanks for the help with this. There&#39;s a lot of things I could&#39;ve done much nicer with this."}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 4, "last_activity_date": 1463583895, "last_edit_date": 1463583895, "creation_date": 1463581460, "answer_id": 37302471, "question_id": 37301649, "link": "https://stackoverflow.com/questions/37301649/faster-n-choose-k-for-combination-of-array-ruby/37302471#37302471", "title": "faster n choose k for combination of array ruby", "body": "<pre><code>def combinations(n, k)\n  return 1 if k == 0 or k == n\n  (k + 1 .. n).reduce(:*) / (1 .. n - k).reduce(:*)\nend\n\ncombinations(8, 2)  #=&gt; 28\n</code></pre>\n\n<h2>Explanation about the math part</h2>\n\n<p>The original equation is</p>\n\n<pre><code>combinations(n, k) = n! / k!(n - k)!\n</code></pre>\n\n<p>Since <code>n! / k! = (1 * 2 * ... * n) / (1 * 2 * ... * k)</code>, for any <code>k &lt;= n</code> there is a <code>(1 * 2 * ... * k)</code> factor both in the numerator and in the denominator, so we can cancel this factor. This makes the equation become</p>\n\n<pre><code>combinations(n, k) = (k + 1) * (k + 2) * ... * (n) / (n - k)!\n</code></pre>\n\n<p>which is exactly what I did in my Ruby code.</p>\n"}, {"comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1494321728, "post_id": 43865640, "comment_id": 74766971, "body": "better if you can benchmark this to support your answer."}, {"owner": {"reputation": 73, "user_id": 5870567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f034a4dcd35df9035ada382149b2bfc0?s=128&d=identicon&r=PG&f=1", "display_name": "Google Fail", "link": "https://stackoverflow.com/users/5870567/google-fail"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1494327294, "post_id": 43865640, "comment_id": 74770778, "body": "@Md.FarhanMemon, thanks for the recommendation. I figured it was obvious that there were fewer operations performed but we don&#39;t know unless we test, right?"}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1543097558, "post_id": 43865640, "comment_id": 93796978, "body": "yes it is very fast certainly compared with the solutions using factorials and in combination with big numbers but with these big numbers the result is&#39;t correct (0..599266).to_a.combination(2).size != n_choose_k(5992666, 2), can&#39;t compare the result with the other solutions though since the calculation takes forever"}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1543099072, "post_id": 43865640, "comment_id": 93797268, "body": "found the problem, at least if the k is 2, you leave out the line result /= d and at the end return result/2"}], "tags": [], "owner": {"reputation": 73, "user_id": 5870567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f034a4dcd35df9035ada382149b2bfc0?s=128&d=identicon&r=PG&f=1", "display_name": "Google Fail", "link": "https://stackoverflow.com/users/5870567/google-fail"}, "is_accepted": false, "score": 4, "last_activity_date": 1494327162, "last_edit_date": 1494327162, "creation_date": 1494320894, "answer_id": 43865640, "question_id": 37301649, "link": "https://stackoverflow.com/questions/37301649/faster-n-choose-k-for-combination-of-array-ruby/43865640#43865640", "title": "faster n choose k for combination of array ruby", "body": "<p>The answers that suggest computing full factorials will generate lots of unnecessary overhead when working with big numbers. You should use the method below for calculating the binomial coefficient: n!/(k!(n-k)!)</p>\n\n<pre><code>def n_choose_k(n, k)\n  return 0 if k &gt; n\n  result = 1\n  1.upto(k) do |d|\n    result *= n\n    result /= d\n    n -= 1\n  end\n  result\nend\n</code></pre>\n\n<p>This will perform the minimum operations needed. Note that incrementing d while decrementing n guarantees that there will be no rounding errors. For example, {n, n+1} is guaranteed to have at least one element divisible by two, {n, n+1, n+2} is guaranteed to have at least one element divisible by three and so on.</p>\n\n<p>Your code can be rewritten as:</p>\n\n<pre><code>def paths(x, y)\n  # Choice of x or y for the second parameter is arbitrary\n  n_choose_k(x + y, x)\nend\n\nputs paths(8, 2) # 45\nputs paths(2, 8) # 45\n</code></pre>\n\n<p>I assume that n and k in the original version were meant to be dimensions so i labeled them x and y instead. There's no need to generate an array here.</p>\n\n<p>Edit: Here is a benchmark script...</p>\n\n<pre><code>require 'distribution'\n\ndef puts_time\n  $stderr.puts 'Completed in %f seconds' % (Time.now - $start_time)\n  $start_time = Time.now\nend\n\ndef n_choose_k(n, k)\n  return 0 if k &gt; n\n  result = 1\n  1.upto(k) do |d|\n    result *= n\n    result /= d\n    n -= 1\n  end\n  result\nend\n\ndef n_choose_k_distribution(n, k)\n  Math.factorial(n) / (Math.factorial(k) * Math.factorial(n - k))\nend\n\ndef n_choose_k_inject(n, k)\n  (1..n).inject(:*) / ((1..k).inject(:*) * (1..n-k).inject(:*))\nend\n\ndef benchmark(&amp;callback)\n  100.upto(300) do |n|\n    25.upto(75) do |k|\n      callback.call(n, k)\n    end\n  end\nend\n\n$start_time = Time.now\n\nputs 'Distribution gem...'\nbenchmark { |n, k| n_choose_k_distribution(n, k) }\nputs_time\n\nputs 'Inject method...'\nbenchmark { |n, k| n_choose_k_inject(n, k) }\nputs_time\n\nputs 'Answer...'\nbenchmark { |n, k| n_choose_k(n, k) }\nputs_time\n</code></pre>\n\n<p>Output on my system is:</p>\n\n<pre><code>Distribution gem...\nCompleted in 1.141804 seconds\nInject method...\nCompleted in 1.106018 seconds\nAnswer...\nCompleted in 0.150989 seconds\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 2969308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6379591e83413e4af626f6ff7eab46d?s=128&d=identicon&r=PG&f=1", "display_name": "RFoster", "link": "https://stackoverflow.com/users/2969308/rfoster"}, "is_accepted": false, "score": 0, "last_activity_date": 1507187385, "creation_date": 1507187385, "answer_id": 46579851, "question_id": 37301649, "link": "https://stackoverflow.com/questions/37301649/faster-n-choose-k-for-combination-of-array-ruby/46579851#46579851", "title": "faster n choose k for combination of array ruby", "body": "<p>The reduce/inject versions are nice. But since speed seemed to be a bit of an issue, I'd suggest the n_choose_k versions from @google-fail.\nIt is quite insightful and suggests a ~10-fold speed increase.</p>\n\n<p>I would suggest that the iteration use the Lesser of k and ( n - k ).\nN-choose-K and N-choose-(N-K) produce the same result (the factors in the denominator are simply reversed). So something like a 52-choose-51 could be done in one iteration.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 10978129, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-S0q-TR-mTHE/AAAAAAAAAAI/AAAAAAAAByM/RbXwCY9GbAU/photo.jpg?sz=128", "display_name": "Felipe Balbi", "link": "https://stackoverflow.com/users/10978129/felipe-balbi"}, "is_accepted": false, "score": 0, "last_activity_date": 1548666276, "creation_date": 1548666276, "answer_id": 54398521, "question_id": 37301649, "link": "https://stackoverflow.com/questions/37301649/faster-n-choose-k-for-combination-of-array-ruby/54398521#54398521", "title": "faster n choose k for combination of array ruby", "body": "<p>I usually do the following:</p>\n\n<pre><code>class Integer\n  def !\n    (2..self).reduce(1, :*)\n  end\n\n  def choose(k)\n    self.! / (k.! * (self-k).!)\n  end\nend\n</code></pre>\n\n<p>Benchmarking:</p>\n\n<pre><code>k = 5\n\nBenchmark.bm do |x|\n  [10, 100, 1000, 10000, 100000].each do |n|\n    x.report(\"#{n}\") { n.choose(k) }\n  end\nend\n</code></pre>\n\n<p>On my machine I get:</p>\n\n<pre><code>       user     system      total        real\n10  0.000008   0.000001   0.000009 (  0.000006)\n100  0.000027   0.000003   0.000030 (  0.000031)\n1000  0.000798   0.000094   0.000892 (  0.000893)\n10000  0.045911   0.013201   0.059112 (  0.059260)\n100000  4.885310   0.229735   5.115045 (  5.119902)\n</code></pre>\n\n<p>Not the fastest thing on the planet, but it's okay for my uses. If it ever becomes a problem, then I can think about optimizing</p>\n"}], "owner": {"reputation": 93, "user_id": 6219766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f290de450eabe77cbab43fde0a0e2357?s=128&d=identicon&r=PG&f=1", "display_name": "Oscady", "link": "https://stackoverflow.com/users/6219766/oscady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1684, "favorite_count": 0, "accepted_answer_id": 37301879, "answer_count": 6, "score": 5, "last_activity_date": 1548666276, "creation_date": 1463579469, "last_edit_date": 1463582315, "question_id": 37301649, "link": "https://stackoverflow.com/questions/37301649/faster-n-choose-k-for-combination-of-array-ruby", "title": "faster n choose k for combination of array ruby", "body": "<p>While trying to solve the \"paths on a grid\" problem, I have written the code</p>\n\n<pre><code>def paths(n, k)\n  p = (1..n+k).to_a\n  p.combination(n).to_a.size\nend\n</code></pre>\n\n<p>The code works fine, for instance <code>if n == 8 and k == 2</code> the code returns <code>45</code> which is the correct number of paths. </p>\n\n<p>However the code is very slow when using larger numbers and I'm struggling to figure out how to quicken the process.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "factory-bot"], "comments": [{"owner": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "edited": false, "score": 1, "creation_date": 1463579129, "post_id": 37301442, "comment_id": 62125088, "body": "Please show the contents of <code>spec&#47;factories&#47;products.rb</code>, too."}, {"owner": {"reputation": 25, "user_id": 6312895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70c560dd195ecd6f939f333c458962ef?s=128&d=identicon&r=PG&f=1", "display_name": "CristiAllan", "link": "https://stackoverflow.com/users/6312895/cristiallan"}, "reply_to_user": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "edited": false, "score": 0, "creation_date": 1463579525, "post_id": 37301442, "comment_id": 62125402, "body": "FactoryGirl.define do   factory :product do     name &quot;MyString&quot;     description &quot;MyString&quot;     price &quot;10.5&quot;     maker &quot;MyString&quot;   end end"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 1, "creation_date": 1463579611, "post_id": 37301442, "comment_id": 62125471, "body": "@CristiAllan please post the code into question body not in comment."}], "answers": [{"tags": [], "owner": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "is_accepted": true, "score": 4, "last_activity_date": 1463579593, "creation_date": 1463579593, "answer_id": 37301693, "question_id": 37301442, "link": "https://stackoverflow.com/questions/37301442/factory-not-registered-error/37301693#37301693", "title": "Factory not registered error", "body": "<p>The factory name is <code>product</code>. Try:</p>\n\n<p><code>let(:my_products) { create_list(:product, 10) }</code></p>\n"}], "owner": {"reputation": 25, "user_id": 6312895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70c560dd195ecd6f939f333c458962ef?s=128&d=identicon&r=PG&f=1", "display_name": "CristiAllan", "link": "https://stackoverflow.com/users/6312895/cristiallan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3184, "favorite_count": 0, "accepted_answer_id": 37301693, "answer_count": 1, "score": 0, "last_activity_date": 1463579593, "creation_date": 1463578948, "last_edit_date": 1463579560, "question_id": 37301442, "link": "https://stackoverflow.com/questions/37301442/factory-not-registered-error", "title": "Factory not registered error", "body": "<p>I'm having a problem with Factory Girl gem:</p>\n\n<p>With the lines in my spec_helper.rb code:</p>\n\n<pre><code>require 'factory_girl_rails'\nRSpec.configure do |config|\n  config.include FactoryGirl::Syntax::Methods\nend\n</code></pre>\n\n<p>I have the error:</p>\n\n<pre><code>ArgumentError:\n       Factory not registered: products\n</code></pre>\n\n<p>Ps: the file <code>spec/factories/products.rb</code> already exists</p>\n\n<p>If I comment these lines, the error changes to:</p>\n\n<pre><code>NoMethodError: undefined method `create_list'\n</code></pre>\n\n<p>The method create_list I used in my file <code>products_controller_spec.rb</code>:</p>\n\n<pre><code>describe \"GET #index\" do\n  let(:my_products){ create_list(:products, 10) }\n</code></pre>\n\n<p>spec/factories/products.rb</p>\n\n<pre><code>FactoryGirl.define do\n   factory :product do \n    name \"MyString\" \n    description \"MyString\" \n    price \"10.5\" \n    maker \"MyString\" \n   end \nend\n</code></pre>\n\n<p>What I'm doing wrong here?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 901, "user_id": 3872380, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/wy14q.jpg?s=128&g=1", "display_name": "Mukesh", "link": "https://stackoverflow.com/users/3872380/mukesh"}, "edited": false, "score": 0, "creation_date": 1463575755, "post_id": 37299840, "comment_id": 62122619, "body": "one reason may be, Don&#39;t Repeat Youself"}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 5, "last_activity_date": 1463575609, "creation_date": 1463575609, "answer_id": 37300097, "question_id": 37299840, "link": "https://stackoverflow.com/questions/37299840/difference-between-including-module-in-single-line-vs-multi-line/37300097#37300097", "title": "Difference between including module in single line vs multi line", "body": "<p>From <a href=\"http://ruby-doc.org/core-2.3.1/Module.html#method-i-include\" rel=\"noreferrer\"><code>Module#include</code></a>:</p>\n\n<blockquote>\n  <p>Invokes <code>Module.append_features</code> on each parameter in <strong>reverse</strong> order.</p>\n</blockquote>\n"}], "owner": {"reputation": 23, "user_id": 6350973, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6IINzYodQmY/AAAAAAAAAAI/AAAAAAAAAEI/Bc2g10ztB4k/photo.jpg?sz=128", "display_name": "Shubham Akolkar", "link": "https://stackoverflow.com/users/6350973/shubham-akolkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 37300097, "answer_count": 1, "score": 1, "last_activity_date": 1463576599, "creation_date": 1463574952, "last_edit_date": 1463576599, "question_id": 37299840, "link": "https://stackoverflow.com/questions/37299840/difference-between-including-module-in-single-line-vs-multi-line", "title": "Difference between including module in single line vs multi line", "body": "<pre><code>class MyClass\n  include MyModule1\n  include MyModule2\n  include MyModule3\nend\n\nclass MyClass\n  include MyModule1, MyModule2, MyModule3\nend\n</code></pre>\n\n<p>All the modules have a common method <code>test</code>. When accessing in multiline, it calls <code>test</code> method from the last module included, but in case of single line <code>include</code>, it calls the method from the first module included. Can anyone explain why this happens?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading", "background-process"], "comments": [{"owner": {"reputation": 901, "user_id": 3872380, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/wy14q.jpg?s=128&g=1", "display_name": "Mukesh", "link": "https://stackoverflow.com/users/3872380/mukesh"}, "edited": false, "score": 0, "creation_date": 1463575390, "post_id": 37299716, "comment_id": 62122328, "body": "By using sidekiq, You can run class methods from single line code..."}], "answers": [{"comments": [{"owner": {"reputation": 2424, "user_id": 1438334, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b4cec290f76b6683ad2f53240be36860?s=128&d=identicon&r=PG", "display_name": "J&#233;r&#244;me Bo&#233;", "link": "https://stackoverflow.com/users/1438334/j%c3%a9r%c3%b4me-bo%c3%a9"}, "edited": false, "score": 0, "creation_date": 1463576996, "post_id": 37300052, "comment_id": 62123549, "body": "I don&#39;t understand the difference between sucker_punch and ActiveJob. They seem to do the same thing, storing the queue in RAM. Do you recommend one over an other?"}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "reply_to_user": {"reputation": 2424, "user_id": 1438334, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b4cec290f76b6683ad2f53240be36860?s=128&d=identicon&r=PG", "display_name": "J&#233;r&#244;me Bo&#233;", "link": "https://stackoverflow.com/users/1438334/j%c3%a9r%c3%b4me-bo%c3%a9"}, "edited": false, "score": 0, "creation_date": 1463577275, "post_id": 37300052, "comment_id": 62123736, "body": "@J&#233;r&#244;meBo&#233; One is backend to another. Like MySQL/postgres to ActiveRecord"}], "tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": true, "score": 1, "last_activity_date": 1463575502, "creation_date": 1463575502, "answer_id": 37300052, "question_id": 37299716, "link": "https://stackoverflow.com/questions/37299716/execute-a-short-background-task-in-a-rails-controller/37300052#37300052", "title": "Execute a short background task in a rails controller", "body": "<p>Starting a thread it not that bad for simple things, but you'll have to manually handle all possibilities of it going wrong (freezing, exceptions)</p>\n\n<p>You might want to look into using sucker_punch ActiveJob backend - it runs tasks inprocess, but you'll have the benefits of activejob (easier testing, generators etc.) and ability to switch to other backend later, if needed.</p>\n"}], "owner": {"reputation": 2424, "user_id": 1438334, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b4cec290f76b6683ad2f53240be36860?s=128&d=identicon&r=PG", "display_name": "J&#233;r&#244;me Bo&#233;", "link": "https://stackoverflow.com/users/1438334/j%c3%a9r%c3%b4me-bo%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "accepted_answer_id": 37300052, "answer_count": 1, "score": 0, "last_activity_date": 1463575502, "creation_date": 1463574610, "question_id": 37299716, "link": "https://stackoverflow.com/questions/37299716/execute-a-short-background-task-in-a-rails-controller", "title": "Execute a short background task in a rails controller", "body": "<p>Let's take an example :</p>\n\n<pre><code>class UsersController\n  def create\n    User.create(...)\n    PushService.push('you have a new friend') # Can take 1/2 seconds\n  end\nend\n</code></pre>\n\n<p>I want to execute a short task (Pushing some users) in the controller. I don't do it synchronously because it can increase the response time, but using <code>Resque</code>, <code>Sidekiq</code> or <code>DelayJob</code> seems exaggerated to me.</p>\n\n<p>What would be the consequences of using a simple <code>Thread</code>, is that a good practice to use it in a controller? Do you have other alternatives?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 901, "user_id": 2802149, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/htwJY.png?s=128&g=1", "display_name": "Jan Bussieck", "link": "https://stackoverflow.com/users/2802149/jan-bussieck"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1463574602, "post_id": 37299243, "comment_id": 62121743, "body": "I had published it a little too early, when it was an incomplete one liner. In the minute it took me to edit it, a diligent SO bee had already defrocked me :)"}], "tags": [], "owner": {"reputation": 901, "user_id": 2802149, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/htwJY.png?s=128&g=1", "display_name": "Jan Bussieck", "link": "https://stackoverflow.com/users/2802149/jan-bussieck"}, "is_accepted": false, "score": 2, "last_activity_date": 1463573498, "creation_date": 1463573498, "answer_id": 37299243, "question_id": 37299110, "link": "https://stackoverflow.com/questions/37299110/add-the-name-of-a-model-to-a-string-in-rails/37299243#37299243", "title": "Add the name of a model to a string in Rails", "body": "<p>Yes you can do this: <code>commentable.model_name.human</code></p>\n\n<p>In Rails calling <code>model_name</code> on an ActiveRecord model returns an instance of <a href=\"http://api.rubyonrails.org/classes/ActiveModel/Name.html\" rel=\"nofollow\">ActiveModel::Name</a> which provides a useful api to interact with the model name. </p>\n"}, {"comments": [{"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1463578556, "post_id": 37299353, "comment_id": 62124684, "body": "max, your note regarding the label is super useful. Could you tell me which approach you usually take from that list?"}, {"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1463583918, "post_id": 37299353, "comment_id": 62128841, "body": "max, pls also see my previous comment. In the meantime I posted another question. Could you pls take a look at it? Your answers to my questions are always outstanding and easy to understand, so would be nice to see your opinion. <a href=\"http://stackoverflow.com/questions/37303420/rails-rendering-index-in-index-with-fragment-caching\" title=\"rails rendering index in index with fragment caching\">stackoverflow.com/questions/37303420/&hellip;</a>"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 5, "last_activity_date": 1463582459, "last_edit_date": 1463582459, "creation_date": 1463573764, "answer_id": 37299353, "question_id": 37299110, "link": "https://stackoverflow.com/questions/37299110/add-the-name-of-a-model-to-a-string-in-rails/37299353#37299353", "title": "Add the name of a model to a string in Rails", "body": "<p>Use <a href=\"http://api.rubyonrails.org/classes/ActiveModel/Naming.html#method-c-singular\" rel=\"nofollow\">ActiveModel::Naming</a> instead. Its a wonderful API for getting stuff like human names, route keys and I18n keys from model classes or instances.</p>\n\n<blockquote>\n  <p><code>human(options={})</code><br>\n  Transform the model name into a more humane format,\n  using I18n. By default, it will underscore then humanize the class\n  name.</p>\n</blockquote>\n\n<pre><code>placeholder: \"Ask something about the #{ commentable.model_name.human }\"\n</code></pre>\n\n<p>Note that you should provide <code>&lt;label&gt;</code> elements for your inputs and not just placeholder attributes <a href=\"http://www.w3.org/WAI/tutorials/forms/labels/\" rel=\"nofollow\">for accessibility</a>.</p>\n\n<h2>Labels:</h2>\n\n<p>In Rails you frequently use <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormBuilder.html#method-i-label\" rel=\"nofollow\"><code>ActionView::Helpers::FormBuilder#label</code></a>:</p>\n\n<pre><code>&lt;%= form_for([commentable, Comment.new]) do |f| %&gt;\n  &lt;%= f.label :body %&gt;\n  &lt;%= f.text_field :body %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Which creates a label with a <code>name</code> attribute tied to the ID of the input. However for this to work <em>the Rails Way</em> you need to let the form builder set the ID of the input.</p>\n\n<p>For hiding elements I usually use the Zurb Foundation <code>.show-for-sr</code> class which basically works like in the WAI tutorial: </p>\n\n<pre><code>.show-for-sr {\n  position: absolute !important;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n}\n</code></pre>\n"}], "owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 1, "accepted_answer_id": 37299353, "answer_count": 2, "score": 1, "last_activity_date": 1463582459, "creation_date": 1463573183, "last_edit_date": 1463574686, "question_id": 37299110, "link": "https://stackoverflow.com/questions/37299110/add-the-name-of-a-model-to-a-string-in-rails", "title": "Add the name of a model to a string in Rails", "body": "<p>I wanna achieve the following to display in rails app:</p>\n\n<pre><code>Product instance =&gt; \"product\"\nProductCustomer instance =&gt; \"product customer\"\n</code></pre>\n\n<p>so I could do</p>\n\n<pre><code>&lt;%= form_for([commentable, Comment.new]) do |f| %&gt;\n  &lt;%= f.text_field :body, class: \"form-control\", id: \"comment-text-area-#{commentable.id}\", \n    placeholder: \"Ask something about the #{commentable.class.name.split(/(?=[A-Z])/).join(' ').downcase }\" %&gt;\n  ......\n&lt;% end %&gt;\n</code></pre>\n\n<p>At the moment I'm using the following which works in all cases:</p>\n\n<pre><code>p = Product.new\np.class.name.split(/(?=[A-Z])/).join(' ').downcase\n\npc = ProductCustomer.new\npc.class.name.split(/(?=[A-Z])/).join(' ').downcase\n</code></pre>\n\n<p>My problem is that it seems to be too complex. I guess there should be a better way. Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "puma"], "comments": [{"owner": {"reputation": 194, "user_id": 5973508, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ah7aGNKSUVA/AAAAAAAAAAI/AAAAAAAAAx4/WO66FFqaA94/photo.jpg?sz=128", "display_name": "manoj prashant k", "link": "https://stackoverflow.com/users/5973508/manoj-prashant-k"}, "edited": false, "score": 0, "creation_date": 1463571865, "post_id": 37298451, "comment_id": 62119715, "body": "i dont have any knowledge about puma. But have you tried to change the permissions of <code>puma.sock</code> file? I used to get this kind of error when i used <code>uwsgi</code> with <code>nginx</code>"}, {"owner": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1463574335, "post_id": 37298451, "comment_id": 62121553, "body": "Post your nginx config"}, {"owner": {"reputation": 215, "user_id": 4834392, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/61c81bd8dd891d47ae3c9c676c2d145a?s=128&d=identicon&r=PG&f=1", "display_name": "Hakan Kara", "link": "https://stackoverflow.com/users/4834392/hakan-kara"}, "reply_to_user": {"reputation": 12135, "user_id": 538471, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d2051553a8bdd27c26fec84b47806714?s=128&d=identicon&r=PG", "display_name": "dan-klasson", "link": "https://stackoverflow.com/users/538471/dan-klasson"}, "edited": false, "score": 0, "creation_date": 1463575443, "post_id": 37298451, "comment_id": 62122369, "body": "@dan-klasson I have added nginx config"}, {"owner": {"reputation": 215, "user_id": 4834392, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/61c81bd8dd891d47ae3c9c676c2d145a?s=128&d=identicon&r=PG&f=1", "display_name": "Hakan Kara", "link": "https://stackoverflow.com/users/4834392/hakan-kara"}, "reply_to_user": {"reputation": 194, "user_id": 5973508, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ah7aGNKSUVA/AAAAAAAAAAI/AAAAAAAAAx4/WO66FFqaA94/photo.jpg?sz=128", "display_name": "manoj prashant k", "link": "https://stackoverflow.com/users/5973508/manoj-prashant-k"}, "edited": false, "score": 0, "creation_date": 1463575546, "post_id": 37298451, "comment_id": 62122463, "body": "@manojprashantk there is no puma.sock file in the directory."}, {"owner": {"reputation": 194, "user_id": 5973508, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ah7aGNKSUVA/AAAAAAAAAAI/AAAAAAAAAx4/WO66FFqaA94/photo.jpg?sz=128", "display_name": "manoj prashant k", "link": "https://stackoverflow.com/users/5973508/manoj-prashant-k"}, "edited": false, "score": 0, "creation_date": 1463575879, "post_id": 37298451, "comment_id": 62122699, "body": "I may be wrong but can you change <code>unix:&#47;home&#47;deploy&#47;hotel-automata&#47;shared&#47;sockets&#47;puma.sock</code> to <code>unix:&#47;&#47;&#47;home&#47;deploy&#47;hotel-automata&#47;shared&#47;sockets&#47;puma.sock</code> and try"}, {"owner": {"reputation": 693, "user_id": 2803000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b4d0572c8d751a958944afd8c55ed88?s=128&d=identicon&r=PG", "display_name": "Hitesh Ranaut", "link": "https://stackoverflow.com/users/2803000/hitesh-ranaut"}, "edited": false, "score": 0, "creation_date": 1517062355, "post_id": 37298451, "comment_id": 83946395, "body": "check my answer here <a href=\"https://stackoverflow.com/questions/44810338/puma-sock-missing-in-ec2-server-after-capistrano-deployment/48476580#48476580\" title=\"puma sock missing in ec2 server after capistrano deployment\">stackoverflow.com/questions/44810338/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 215, "user_id": 4834392, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/61c81bd8dd891d47ae3c9c676c2d145a?s=128&d=identicon&r=PG&f=1", "display_name": "Hakan Kara", "link": "https://stackoverflow.com/users/4834392/hakan-kara"}, "edited": false, "score": 0, "creation_date": 1463575796, "post_id": 37300001, "comment_id": 62122648, "body": "Thanks subhash, I am starting to try now"}], "tags": [], "owner": {"reputation": 2797, "user_id": 3392317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6hfb5.jpg?s=128&g=1", "display_name": "Subhash Chandra", "link": "https://stackoverflow.com/users/3392317/subhash-chandra"}, "is_accepted": false, "score": 2, "last_activity_date": 1463575384, "last_edit_date": 1495541859, "creation_date": 1463575384, "answer_id": 37300001, "question_id": 37298451, "link": "https://stackoverflow.com/questions/37298451/puma-and-nginx-502-bad-gateway-error-ubuntu-server-14-04/37300001#37300001", "title": "Puma and Nginx 502 Bad Gateway error (Ubuntu Server 14.04)", "body": "<p>Your <code>puma.rb</code> file should look like this.</p>\n\n<pre><code># /config/puma.rb\n\n  app = \"manabalss\" # App-specific\n  root = \"/home/deployer/apps/#{app}\"\n\n  workers  5\n  threads  1, 1 # relying on many workers for thread-unsafe apps\n\n  rackup      DefaultRackup\n  port        11592\n  environment ENV['RACK_ENV'] || 'production'\n  daemonize   true\n\n  pidfile \"#{root}/puma/puma.pid\"\n  stdout_redirect \"#{root}/puma/puma.log\", \"#{root}/puma/puma_error.log\"\n  bind \"unix:/tmp/puma.socket\n</code></pre>\n\n<p>And your nginx.conf should be like this.</p>\n\n<pre><code># config/deploy/nginx.conf\n\nupstream puma {\n  server unix:/tmp/puma.socket fail_timeout=1;\n}\n\n# This block redirects http requests to https version \nserver {\n  listen 37.139.0.211:80 default deferred;\n  server_name www.manabalss.lv, manabalss.lv;\n  return 307  https://manabalss.lv$request_uri;\n}\n\nserver {\n  listen                37.139.0.211:443 ssl;\n  server_name           manabalss.lv;\n  ssl_certificate       /etc/ssl/server.crt;\n  ssl_certificate_key   /etc/ssl/server.key;\n  ssl_protocols         SSLv3 TLSv1 TLSv1.1 TLSv1.2;\n  ssl_ciphers           RC4:HIGH:!aNULL:!MD5;\n  ssl_session_cache     shared:SSL:15m;\n  ssl_session_timeout   15m;\n\n  root /home/deployer/apps/manabalss/current/public;\n\n  location ^~ /assets/ {\n    gzip_static on;\n    gzip_vary on;\n    expires max;\n    add_header Cache-Control public;\n  }\n\n  try_files $uri/index.html $uri @puma;\n  location @puma {\n    proxy_set_header  X-Real-IP       $remote_addr;\n    proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header  X-Forwarded-Proto https;\n    proxy_set_header  Host $http_host;\n    proxy_redirect    off;\n    proxy_pass        http://puma;\n  }\n\n  error_page 500 502 503 504 /500.html;\n  client_max_body_size 4G;\n  keepalive_timeout 10;\n}\n</code></pre>\n\n<p>If this doesn't help, you would like to have a look at this.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/31596118/rails-puma-nginx-every-couple-of-days-bad-gateway-502\">Rails + Puma + Nginx Every Bad Gateway 502</a></p>\n"}, {"comments": [{"owner": {"reputation": 215, "user_id": 4834392, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/61c81bd8dd891d47ae3c9c676c2d145a?s=128&d=identicon&r=PG&f=1", "display_name": "Hakan Kara", "link": "https://stackoverflow.com/users/4834392/hakan-kara"}, "edited": false, "score": 0, "creation_date": 1463576454, "post_id": 37300101, "comment_id": 62123115, "body": "There is no gap in my socket path, Do you mean something different?"}, {"owner": {"reputation": 1461, "user_id": 4587510, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9d1b49ec6c5d80f4e05268dd3439b90e?s=128&d=identicon&r=PG&f=1", "display_name": "MMT", "link": "https://stackoverflow.com/users/4587510/mmt"}, "reply_to_user": {"reputation": 215, "user_id": 4834392, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/61c81bd8dd891d47ae3c9c676c2d145a?s=128&d=identicon&r=PG&f=1", "display_name": "Hakan Kara", "link": "https://stackoverflow.com/users/4834392/hakan-kara"}, "edited": false, "score": 0, "creation_date": 1463577466, "post_id": 37300101, "comment_id": 62123871, "body": "Well had to edit my answer as you provided new data, check the permissions and let me know."}, {"owner": {"reputation": 215, "user_id": 4834392, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/61c81bd8dd891d47ae3c9c676c2d145a?s=128&d=identicon&r=PG&f=1", "display_name": "Hakan Kara", "link": "https://stackoverflow.com/users/4834392/hakan-kara"}, "edited": false, "score": 0, "creation_date": 1463578681, "post_id": 37300101, "comment_id": 62124774, "body": "There is no puma.sock file under the directory. should it generated automatically?  @MichaIT"}, {"owner": {"reputation": 1461, "user_id": 4587510, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9d1b49ec6c5d80f4e05268dd3439b90e?s=128&d=identicon&r=PG&f=1", "display_name": "MMT", "link": "https://stackoverflow.com/users/4587510/mmt"}, "reply_to_user": {"reputation": 215, "user_id": 4834392, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/61c81bd8dd891d47ae3c9c676c2d145a?s=128&d=identicon&r=PG&f=1", "display_name": "Hakan Kara", "link": "https://stackoverflow.com/users/4834392/hakan-kara"}, "edited": false, "score": 0, "creation_date": 1463578849, "post_id": 37300101, "comment_id": 62124897, "body": "When puma starts it should create a socket. This is where you configure it: <code>vi config&#47;puma.rb</code> <code># Set up socket location bind &quot;unix:&#47;&#47;#{shared_dir}&#47;sockets&#47;puma.sock&quot;</code>"}, {"owner": {"reputation": 1461, "user_id": 4587510, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9d1b49ec6c5d80f4e05268dd3439b90e?s=128&d=identicon&r=PG&f=1", "display_name": "MMT", "link": "https://stackoverflow.com/users/4587510/mmt"}, "reply_to_user": {"reputation": 215, "user_id": 4834392, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/61c81bd8dd891d47ae3c9c676c2d145a?s=128&d=identicon&r=PG&f=1", "display_name": "Hakan Kara", "link": "https://stackoverflow.com/users/4834392/hakan-kara"}, "edited": false, "score": 0, "creation_date": 1463580091, "post_id": 37300101, "comment_id": 62125816, "body": "Just make sure that in <code>config&#47;puma.rb</code> you have <code>bind &quot;unix:&#47;&#47;&lt;path to your socket&gt;&#47;sockets&#47;puma.sock&quot;</code> then restart your puma. It&#39;s very difficult to walk someone through the comment box. I&#39;ll edit the answer again"}], "tags": [], "owner": {"reputation": 1461, "user_id": 4587510, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9d1b49ec6c5d80f4e05268dd3439b90e?s=128&d=identicon&r=PG&f=1", "display_name": "MMT", "link": "https://stackoverflow.com/users/4587510/mmt"}, "is_accepted": false, "score": 5, "last_activity_date": 1463580792, "last_edit_date": 1463580792, "creation_date": 1463575617, "answer_id": 37300101, "question_id": 37298451, "link": "https://stackoverflow.com/questions/37298451/puma-and-nginx-502-bad-gateway-error-ubuntu-server-14-04/37300101#37300101", "title": "Puma and Nginx 502 Bad Gateway error (Ubuntu Server 14.04)", "body": "<p><strong>EDIT:</strong> </p>\n\n<ol>\n<li><strong>Make user that the socket exist</strong>. Otherwise it's failing on this point:</li>\n</ol>\n\n<p>in <code>config/puma.rb</code> you need to have line pointing to your socket:</p>\n\n<pre><code>bind \"unix://&lt;path or variable for the path where the socket will be&gt;/sockets/puma.sock\"\n</code></pre>\n\n<p>example with variable:</p>\n\n<pre><code>application_path = '/home/deploy/hotel-automata/shared'\n\nbind \"unix://#{application_path}/sockets/puma.socket\"\n</code></pre>\n\n<ol start=\"2\">\n<li><strong>Check permissions on the socket</strong></li>\n</ol>\n\n<p>You will need to make sure that Nginx is able to access your socket (have the required rights i.e. RW) </p>\n\n<p>The check the permissions on the whole path try this:</p>\n\n<p><code>namei -m /home/deploy/hotel-automata/shared/sockets/puma.sock</code></p>\n\n<p>Alternatively try this:</p>\n\n<pre><code>sudo -u &lt;user&gt; test &lt;-r / -w &gt; &lt;path&gt; &amp;&amp; echo True\n</code></pre>\n\n<p>i.e.</p>\n\n<pre><code>sudo -u nginx test -w /home/deploy/hotel-automata/shared/sockets/puma.sock &amp;&amp; echo True\n</code></pre>\n\n<p><strong>Nginx will require RW access to that socket.</strong></p>\n\n<p>If it doesn't return true then it means that the user <strong>has NOT got</strong> that permission i.e. -w -> write</p>\n"}], "owner": {"reputation": 215, "user_id": 4834392, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/61c81bd8dd891d47ae3c9c676c2d145a?s=128&d=identicon&r=PG&f=1", "display_name": "Hakan Kara", "link": "https://stackoverflow.com/users/4834392/hakan-kara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9757, "favorite_count": 3, "answer_count": 2, "score": 10, "last_activity_date": 1463649048, "creation_date": 1463571417, "last_edit_date": 1463649048, "question_id": 37298451, "link": "https://stackoverflow.com/questions/37298451/puma-and-nginx-502-bad-gateway-error-ubuntu-server-14-04", "title": "Puma and Nginx 502 Bad Gateway error (Ubuntu Server 14.04)", "body": "<p>I need to deploy my rails application,So I have followed all step from here, <a href=\"https://www.digitalocean.com/community/tutorials/how-to-deploy-a-rails-app-with-puma-and-nginx-on-ubuntu-14-04\" rel=\"noreferrer\">https://www.digitalocean.com/community/tutorials/how-to-deploy-a-rails-app-with-puma-and-nginx-on-ubuntu-14-04</a></p>\n\n<p>But end of the tutorial, I get this error --> \"502 Bad Gateway\"</p>\n\n<p><strong>EDIT</strong><br>\nThe error message now --> \"We're sorry, but something went wrong.\"<br>\nBut Nginx error output is the same, I check puma error messages but they just log when it start and when it stop gracefully.</p>\n\n<p>Rails logs which is under app_directory/log   does not produce any output.<br>\npuma-manager --> I checked it works correctly<br>\npaths       ---> I have checked three times </p>\n\n<p>Nginx error.log output message:   </p>\n\n<pre><code>2016/05/18 14:22:21 [crit] 1099#0: *7 connect() to unix:/home/deploy   /hotel-automata/shared/sockets/puma.sock failed (2: No such file or directory) while connecting to upstream, client: 192.168.2.105, server: localhost, request: \"GET /favicon.ico HTTP/1.1\", upstream: \"http://unix:/home/deploy/hotel-automata/shared/sockets/puma.sock:/500.html\", host: \"192.168.2.170\"\n</code></pre>\n\n<p>OS -> Vmware Player, Bridged Network Ubuntu Server 14.0.4<br>\nRuby Version: 2.3.1<br>\nRails Version: 4.2.5.2</p>\n\n<p>This is my nginx config contents of  /etc/nginx/sites-available/default</p>\n\n<pre><code>upstream app {\n# Path to Puma SOCK file, as defined previously\nserver unix:/home/deploy/hotel-automata/shared/sockets/puma.sock fail_timeout=0;\n}\n\nserver {\nlisten 80;\nserver_name localhost;\n\nroot /home/deploy/hotel-automata/public;\n\ntry_files $uri/index.html $uri @app;\n\nlocation @app {\n    proxy_pass http://app;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header Host $http_host;\n    proxy_redirect off;\n}\n\nerror_page 500 502 503 504 /500.html;\nclient_max_body_size 4G;\nkeepalive_timeout 10;\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 1656, "user_id": 6138119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YzV7y.jpg?s=128&g=1", "display_name": "Pravesh Khatri", "link": "https://stackoverflow.com/users/6138119/pravesh-khatri"}, "edited": false, "score": 0, "creation_date": 1463574861, "post_id": 37298450, "comment_id": 62121932, "body": "Can you show us error, which you are facing"}, {"owner": {"reputation": 13, "user_id": 6340204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434f536d19827872ed10e520935447fa?s=128&d=identicon&r=PG&f=1", "display_name": "Umerror", "link": "https://stackoverflow.com/users/6340204/umerror"}, "reply_to_user": {"reputation": 1656, "user_id": 6138119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YzV7y.jpg?s=128&g=1", "display_name": "Pravesh Khatri", "link": "https://stackoverflow.com/users/6138119/pravesh-khatri"}, "edited": false, "score": 0, "creation_date": 1463575267, "post_id": 37298450, "comment_id": 62122247, "body": "I just solved the problem :)"}, {"owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "edited": false, "score": 0, "creation_date": 1463576094, "post_id": 37298450, "comment_id": 62122844, "body": "@Umerror In case, you yourself solved the problem, please post the answer to your question, and accept it so that other can benefit from it. After all, that&#39;s what the purpose of Stackoverflow."}, {"owner": {"reputation": 13, "user_id": 6340204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434f536d19827872ed10e520935447fa?s=128&d=identicon&r=PG&f=1", "display_name": "Umerror", "link": "https://stackoverflow.com/users/6340204/umerror"}, "edited": false, "score": 0, "creation_date": 1463576599, "post_id": 37298450, "comment_id": 62123240, "body": "Sure, I just reset my database on heroku by running  heroku run rake db:reset  and after that I migrated again by running heroku run rake db:migrate."}, {"owner": {"reputation": 17065, "user_id": 175981, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b357ab54946a2be4d19c8a9aab2a09d6?s=128&d=identicon&r=PG", "display_name": "Chris Peters", "link": "https://stackoverflow.com/users/175981/chris-peters"}, "reply_to_user": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "edited": false, "score": 0, "creation_date": 1470660826, "post_id": 37298450, "comment_id": 65024976, "body": "As @ArslanAli said, put the solution as an answer, not a comment."}], "answers": [{"tags": [], "owner": {"reputation": 165, "user_id": 954421, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2dfde0af45ff0b93a4ea0b5ecb25a754?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/954421/benjamin"}, "is_accepted": false, "score": 0, "last_activity_date": 1470660718, "creation_date": 1470660718, "answer_id": 38829725, "question_id": 37298450, "link": "https://stackoverflow.com/questions/37298450/nomethoderror-undefined-method-val-for-arelnodesbindparam0x007fe555426/38829725#38829725", "title": "NoMethodError (undefined method `val&#39; for #&lt;Arel::Nodes::BindParam:0x007fe5554268b8&gt;): app/controllers/posts_controller.rb:10:in `new&#39;", "body": "<p>I had the same error.\nTo solve the problem, I specified <code>:foreign_key</code> of has_many relation.</p>\n\n<p>My case:</p>\n\n<p><code>class Assay::Attempt::Answer &lt; ActiveRecord::Base\n  belongs_to :assay_attempt, class_name: 'Assay::Attempt'\nend</code></p>\n\n<p><code>class Assay::Attempt &lt; ActiveRecord::Base\n  has_many :answers, foreign_key: :assay_attempt_id # there wasn't foreign_key option\nend\n</code></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4012503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/990cbde56066b1f2a4e592120e37983f?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph", "link": "https://stackoverflow.com/users/4012503/joseph"}, "is_accepted": false, "score": 0, "last_activity_date": 1510638793, "creation_date": 1510638793, "answer_id": 47278587, "question_id": 37298450, "link": "https://stackoverflow.com/questions/37298450/nomethoderror-undefined-method-val-for-arelnodesbindparam0x007fe555426/47278587#47278587", "title": "NoMethodError (undefined method `val&#39; for #&lt;Arel::Nodes::BindParam:0x007fe5554268b8&gt;): app/controllers/posts_controller.rb:10:in `new&#39;", "body": "<p>I came across this as well on Rails 4.2.0, in my case everything seemed to be ok, since I had the foreign_key specified, what fixed the issue was when the foreign_key and foreign_type were specified as a string, not as a symbol:</p>\n\n<pre><code>has_many :answers, foreign_key: :assay_attempt_id  #this was not working\nhas_many :answers, foreign_key: 'assay_attempt_id' #this was ok\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6340204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/434f536d19827872ed10e520935447fa?s=128&d=identicon&r=PG&f=1", "display_name": "Umerror", "link": "https://stackoverflow.com/users/6340204/umerror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 572, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1510638793, "creation_date": 1463571400, "question_id": 37298450, "link": "https://stackoverflow.com/questions/37298450/nomethoderror-undefined-method-val-for-arelnodesbindparam0x007fe555426", "title": "NoMethodError (undefined method `val&#39; for #&lt;Arel::Nodes::BindParam:0x007fe5554268b8&gt;): app/controllers/posts_controller.rb:10:in `new&#39;", "body": "<p>I am new to rails. Everything is working fine locally but after deploying on heroku its giving me the above error.</p>\n\n<p>Here is the posts_controllers action: </p>\n\n<pre><code> def new\n   @post = current_user.posts.build\n end\n</code></pre>\n\n<p>and here is the schema.rb file content:</p>\n\n<pre><code>  ActiveRecord::Schema.define(version: 20160516214156) do\n\n  create_table \"comments\", force: :cascade do |t|\n    t.text     \"comment\"\n    t.integer  \"post_id\"\n    t.integer  \"user_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  add_index \"comments\", [\"post_id\"], name:    \"index_comments_on_post_id\"\n  add_index \"comments\", [\"user_id\"], name: \"index_comments_on_user_id\"\n\n  create_table \"posts\", force: :cascade do |t|\n    t.text     \"description\"\n    t.datetime \"created_at\",         null: false\n    t.datetime \"updated_at\",         null: false\n    t.string   \"image_file_name\"\n    t.string   \"image_content_type\"\n    t.integer  \"image_file_size\"\n    t.datetime \"image_updated_at\"\n    t.integer  \"user_id\"\n  end\n\n  create_table \"users\", force: :cascade do |t|\n    t.string   \"email\",                  default: \"\", null: false\n    t.string   \"encrypted_password\",     default: \"\", null: false\n    t.string   \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.integer  \"sign_in_count\",          default: 0,  null: false\n    t.datetime \"current_sign_in_at\"\n    t.datetime \"last_sign_in_at\"\n    t.string   \"current_sign_in_ip\"\n    t.string   \"last_sign_in_ip\"\n    t.datetime \"created_at\",                          null: false\n    t.datetime \"updated_at\",                          null: false\n end\n\n add_index \"users\", [\"email\"], name: \"index_users_on_email\", unique:   true\n add_index \"users\", [\"reset_password_token\"], name: \"index_users_on_reset_password_token\", unique: true\n\nend\n</code></pre>\n"}, {"tags": ["android", "ruby", "calabash", "calabash-android"], "comments": [{"owner": {"reputation": 1145, "user_id": 1165581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e79a078e06a93f25eaba903217bd388f?s=128&d=identicon&r=PG", "display_name": "Lasse", "link": "https://stackoverflow.com/users/1165581/lasse"}, "edited": false, "score": 0, "creation_date": 1463630261, "post_id": 37298344, "comment_id": 62148002, "body": "I think that version might not be supported. I have been using ruby 2.0.0 for some time, based on some info some where about not to go beyond. And I can see that Xamarin recommends 2.1 on their page <a href=\"https://developer.xamarin.com/guides/testcloud/calabash/configuring/osx/\" rel=\"nofollow noreferrer\">developer.xamarin.com/guides/testcloud/calabash/configuring/&zwnj;&#8203;osx</a>"}, {"owner": {"reputation": 678, "user_id": 4547279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19aa46d010bcaf787ea016bc411627b4?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias", "link": "https://stackoverflow.com/users/4547279/tobias"}, "edited": false, "score": 0, "creation_date": 1465830422, "post_id": 37298344, "comment_id": 63052467, "body": "what is the value of $ANDROID_HOME?"}], "answers": [{"tags": [], "owner": {"reputation": 1914, "user_id": 740175, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ez8Sa.jpg?s=128&g=1", "display_name": "Rog&#233;rio Peixoto", "link": "https://stackoverflow.com/users/740175/rog%c3%a9rio-peixoto"}, "is_accepted": false, "score": -1, "last_activity_date": 1465778590, "creation_date": 1465778590, "answer_id": 37780480, "question_id": 37298344, "link": "https://stackoverflow.com/questions/37298344/calabash-android-did-not-find-adb-exe/37780480#37780480", "title": "Calabash-android did not find adb.exe", "body": "<p>I suggest you use <a href=\"http://blog.developwithpassion.com/2012/03/30/installing-rvm-with-cygwin-on-windows/\" rel=\"nofollow\">Cygwin + RVM</a> to manage your ruby version, I had several problems with one click installer and cmd/powershell for Windows. Calabash works better with *NIX like terminals even if it is an emulated one. Also remember to export ANDROID_HOME variable pointing to your Android SDK installation directory before running your scripts.</p>\n"}, {"tags": [], "owner": {"reputation": 139, "user_id": 6265555, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2b8d7df7b714322c7222ed0f0d8cd67f?s=128&d=identicon&r=PG&f=1", "display_name": "debonaire", "link": "https://stackoverflow.com/users/6265555/debonaire"}, "is_accepted": false, "score": 0, "last_activity_date": 1476259664, "creation_date": 1476259664, "answer_id": 39993579, "question_id": 37298344, "link": "https://stackoverflow.com/questions/37298344/calabash-android-did-not-find-adb-exe/39993579#39993579", "title": "Calabash-android did not find adb.exe", "body": "<p>create a user environment variable <strong>ANDROID_HOME</strong> and point it to\nC:\\Program Files\\Android\\android-sdk\\ dont put platform-tools in this path. If you're using Android studio it might be in C:\\Users\\\\AppData\\Local\\Android\\Sdk</p>\n\n<p>you'll need to make one for jdk as well make sure you have jdk installed and create a <strong>JAVA_HOME</strong> environment variable and point it to your installation directory, for example C:\\Program Files\\Java\\jdk1.8.0_101 (note this is not jre but jdk)</p>\n"}], "owner": {"reputation": 21, "user_id": 5060759, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pbQZn3ozh0I/AAAAAAAAAAI/AAAAAAAAAH0/MewB0tzU8tc/photo.jpg?sz=128", "display_name": "Adnan Shaikh", "link": "https://stackoverflow.com/users/5060759/adnan-shaikh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1137, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1476259664, "creation_date": 1463571114, "question_id": 37298344, "link": "https://stackoverflow.com/questions/37298344/calabash-android-did-not-find-adb-exe", "title": "Calabash-android did not find adb.exe", "body": "<p>WARN: Did not find 'adb.exe' in any standard directory of 'C:\\Program Files\\And\nroid\\android-sdk\\platform-tools'. Calabash will therefore take longer to load\n WARN: Did not find 'aapt.exe' in any standard directory of 'C:\\Program Files\\An\ndroid\\android-sdk\\platform-tools'. Calabash will therefore take longer to load\n WARN: Did not find 'zipalign.exe' in any standard directory of 'C:\\Program File\ns\\Android\\android-sdk\\platform-tools'. Calabash will therefore take longer to lo\nad\nERROR: Could not locate Android dependency\nERROR: You can read about how Calabash is searching for an Android SDK and how y\nou can help here:\nERROR: <a href=\"https://github.com/calabash/calabash-android/blob/master/documentation/in\" rel=\"nofollow\">https://github.com/calabash/calabash-android/blob/master/documentation/in</a>\nstallation.md#prerequisites\nC:/Ruby23/lib/ruby/gems/2.3.0/gems/calabash-android-0.7.3/lib/calabash-android/d\nependencies.rb:234:in <code>locate_android_dependencies': Could not find 'aapt.exe' i\nn 'C:\\Program Files\\Android\\android-sdk\\platform-tools' (Calabash::Android::Envi\nronment::InvalidEnvironmentError)\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/calabash-android-0.7.3/lib/calab\nash-android/dependencies.rb:125:in</code>setup'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/calabash-android-0.7.3/lib/calab\nash-android/dependencies.rb:25:in <code>android_dependencies'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/calabash-android-0.7.3/lib/calab\nash-android/dependencies.rb:65:in</code>aapt_path'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/calabash-android-0.7.3/lib/calab\nash-android/helpers.rb:124:in <code>unsign_apk'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/calabash-android-0.7.3/lib/calab\nash-android/helpers.rb:117:in</code>block in resign_apk'\n        from C:/Ruby23/lib/ruby/2.3.0/tmpdir.rb:89:in <code>mktmpdir'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/calabash-android-0.7.3/lib/calab\nash-android/helpers.rb:112:in</code>resign_apk'\n        from C:/Ruby23/lib/ruby/gems/2.3.0/gems/calabash-android-0.7.3/bin/calab\nash-android:127:in <code>&lt;top (required)&gt;'\n        from C:/Ruby23/bin/calabash-android:23:in</code>load'\n        from C:/Ruby23/bin/calabash-android:23:in `'</p>\n\n<p><strong>After upgrading ruby version to 2.3. I got this error. I have done the setting regarding path but still it is not working.</strong></p>\n"}, {"tags": ["javascript", "jquery", "mysql", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 6140921, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d7f0e9fe14ff9fe126642d451ccc245e?s=128&d=identicon&r=PG&f=1", "display_name": "lili pupu", "link": "https://stackoverflow.com/users/6140921/lili-pupu"}, "edited": false, "score": 0, "creation_date": 1463570934, "post_id": 37298162, "comment_id": 62119094, "body": "Thank you for responding so quickly,  Now, I have an error of argument, the function taked seems correct to you? How can I have access to modify my nested form orders which is from online ?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 151, "user_id": 6140921, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d7f0e9fe14ff9fe126642d451ccc245e?s=128&d=identicon&r=PG&f=1", "display_name": "lili pupu", "link": "https://stackoverflow.com/users/6140921/lili-pupu"}, "edited": false, "score": 0, "creation_date": 1463570996, "post_id": 37298162, "comment_id": 62119128, "body": "@lilipupu What is the exact error you get now? be specific."}, {"owner": {"reputation": 151, "user_id": 6140921, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d7f0e9fe14ff9fe126642d451ccc245e?s=128&d=identicon&r=PG&f=1", "display_name": "lili pupu", "link": "https://stackoverflow.com/users/6140921/lili-pupu"}, "edited": false, "score": 0, "creation_date": 1463571077, "post_id": 37298162, "comment_id": 62119180, "body": "Well, It say   ArgumentError in OnlinesController#taked wrong number of arguments (1 for 2)  I put a photo"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 151, "user_id": 6140921, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d7f0e9fe14ff9fe126642d451ccc245e?s=128&d=identicon&r=PG&f=1", "display_name": "lili pupu", "link": "https://stackoverflow.com/users/6140921/lili-pupu"}, "edited": false, "score": 0, "creation_date": 1463571241, "post_id": 37298162, "comment_id": 62119291, "body": "@lilipupu Try this   <code>@online.orders.update_attributes(taked: true, taked_at: Time.zone.now, taked_by: current_user)</code>"}, {"owner": {"reputation": 151, "user_id": 6140921, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d7f0e9fe14ff9fe126642d451ccc245e?s=128&d=identicon&r=PG&f=1", "display_name": "lili pupu", "link": "https://stackoverflow.com/users/6140921/lili-pupu"}, "edited": false, "score": 0, "creation_date": 1463572384, "post_id": 37298162, "comment_id": 62120077, "body": "I still have &quot;undefined method `update_attributes&#39; for #&lt;ActiveRecord::Associations::CollectionProxy []&gt;&quot; So I cannot access to the value of my nested form, should I have to change my models ?"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": false, "score": 0, "last_activity_date": 1463570612, "creation_date": 1463570612, "answer_id": 37298162, "question_id": 37298030, "link": "https://stackoverflow.com/questions/37298030/routes-to-update-a-nested-form/37298162#37298162", "title": "Routes to update a nested form", "body": "<blockquote>\n  <p>No route matches [POST]</p>\n</blockquote>\n\n<p>In your <code>link_to</code>, you have <code>method: :update</code> which is wrong. You need to change it to below</p>\n\n<pre><code>&lt;%= link_to 'Take', taked_online_path(online), method: :put, class: \"btn btn-warning\"%&gt;\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 6140921, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d7f0e9fe14ff9fe126642d451ccc245e?s=128&d=identicon&r=PG&f=1", "display_name": "lili pupu", "link": "https://stackoverflow.com/users/6140921/lili-pupu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463572507, "creation_date": 1463570296, "last_edit_date": 1463572507, "question_id": 37298030, "link": "https://stackoverflow.com/questions/37298030/routes-to-update-a-nested-form", "title": "Routes to update a nested form", "body": "<p>I'm new in RoR, and I'm trying to practice building a web app. I have a classic app with User who have Post.</p>\n\n<p>An other model Online is used to put the post on a common wall, and it's associated with a nested form Orders which represents pieces available.</p>\n\n<p>So now, I'm trying to update that nested form (orders) with a button in my post show view. But it return me an error \"No route matches [POST]\"\nwhile I write a PUT. So why he thinks that I want to make a new order (POST) ? And how can I change that ? </p>\n\n<p>My code : </p>\n\n<p>routes :</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>Rails.application.routes.draw do\r\n  get 'profiles/show'\r\n\r\n  mount RailsAdmin::Engine =&gt; '/admin', as: 'rails_admin'\r\n  \r\n  devise_for :users, :controllers =&gt; { registrations: 'registrations' }\r\n\r\n  resources :posts do \r\n    resources :comments\r\n    resources :onlines do \r\n      resources :orders\r\n    end\r\nend\r\n\r\n  get ':pseudo', to: 'profiles#show', as: :profile\r\n  get ':pseudo/edit', to: 'profiles#edit', as: :edit_profile\r\n  patch ':pseudo/edit', to: 'profiles#update', as: :update_profile\r\n\r\n  put 'online/:id/taked', to: 'onlines#taked', as: :taked_online\r\n\r\n  \r\n  \r\n\r\n  root 'posts#index'</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Views/posts/show :</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>  &lt;div class=\"col-md-9\"&gt;\r\n    &lt;h3&gt;Orders :&lt;/h3&gt;\r\n    &lt;div id=\"Orders\"&gt;\r\n      \r\n      &lt;ul&gt;\r\n        &lt;%- @post.onlines.each do |online| %&gt;\r\n        &lt;%- online.orders.each do |order| %&gt;\r\n        &lt;%- if order.taked == false %&gt;\r\n        &lt;li&gt;\r\n          &lt;%= link_to 'Take', taked_online_path(online), method: :update, class: \"btn btn-warning\"%&gt;\r\n        &lt;/li&gt;\r\n        &lt;%end%&gt;\r\n        &lt;%end%&gt;\r\n        &lt;%end%&gt;\r\n      &lt;/ul&gt;\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>and my Online controller : </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code> before_action :set_post \r\n  before_action :owned_online, only: [:new, :update]\r\n  before_action :set_online, except: [:taked]\r\n  before_action :set_unline, only: [:taked]\r\n\r\n\r\n  def new \r\n    @online = current_user.onlines.build\r\n    @online.post_id = @post.id\r\n    @online.user_id = current_user.id\r\n  end \r\n\r\n  def edit\r\n  end\r\n\r\n   def taked \r\n  @online.orders.update(taked: true, taked_at: Time.zone.now, taked_by: current_user)\r\nend\r\n\r\n  def create \r\n      if Online.where(post_id: params[:post_id]).any?\r\n      @online = Online.where(post_id: params[:post_id]).last.update_attributes(push: false)\r\n      end\r\n     @online = @post.onlines.create(online_params)\r\n    if @online.save\r\n      if @online.portion &lt;= 0\r\n          @online.update(push: false)\r\n          flash[:success] = 'Veuillez indiquer le nombre de parts disponibles '\r\n          redirect_to root_path \r\n        else\r\n       @online.update(pushed_at: Time.zone.now)\r\n       @online.update(push: true)\r\n\r\n       \r\n       flash[:success] = 'Votre post est en ligne !'\r\n      redirect_to root_path\r\n    \r\n    end\r\n    else \r\n      render 'new'\r\n    end \r\n  end \r\n\r\n\r\n\r\n\r\ndef update  \r\n    if @onlines.update(online_params)\r\n      if @online.push == false\r\n        if @online.portion &lt;= 0\r\n          @online.update(push: false)\r\n          flash[:success] = 'Veuillez indiquer le nombre de parts disponibles '\r\n          redirect_to root_path \r\n        else\r\n         @online.update(push: true)\r\n         flash[:success] = 'Votre post a bien \u00e9t\u00e9 push\u00e9 !'\r\n         redirect_to root_path      \r\n      end   \r\n    end\r\n    else\r\n      @user.errors.full_messages\r\n      flash[:error] = @user.errors.full_messages\r\n      render :edit\r\n    end\r\n  end\r\n\r\n\r\nprivate \r\n\r\ndef online_params\r\n  params.require(:online).permit(:user_id, :post_id, :prix, :portion, :push, :pushed_at, orders_attributes: [:id, :taked, :taked_at, :taked_by, :validated_at, :validated_by, :_destroy])\r\n  end \r\n\r\n  def owned_online \r\n     @post = Post.find(params[:post_id])\r\n  unless current_user == @post.user\r\n    flash[:alert] = \"That post doesn't belong to you!\"\r\n    redirect_to :back\r\n  end\r\nend  \r\n\r\n  def set_post\r\n  @post = Post.find_by(params[:post_id]) \r\n  end \r\n\r\n\r\n  def set_online\r\n    @post = Post.find(params[:post_id])\r\n    @online = Online.find_by(params[:id]) \r\n  end \r\n\r\n  def set_unline\r\n  @online = Online.find_by(params[:id]) \r\nend\r\n\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Models : </p>\n\n<p>Post :</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>  class Post &lt; ActiveRecord::Base\r\n\r\n  \r\n  belongs_to :user\r\n  has_many :onlines, dependent: :destroy\r\n\r\n  scope :push_posts, lambda { joins(:onlines).merge(Online.push) } \r\n\r\n  \r\n\r\n  has_many :ingredients, dependent: :destroy\r\n  \r\n\r\n\r\n  accepts_nested_attributes_for :ingredients, reject_if: :all_blank, allow_destroy: true\r\n\r\n  has_many :comments\r\n  \r\n  validates :image, presence: true\r\n\r\n  has_attached_file :image, styles: { medium: \"300x300#\"}, default_url: \"/images/:style/missing.png\"\r\n  validates_attachment_content_type :image, content_type: /\\Aimage\\/.*\\Z/\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Online:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>class Online &lt; ActiveRecord::Base\r\n  \r\n  belongs_to :post\r\n  belongs_to :user\r\n  has_many :orders\r\n  \r\n  accepts_nested_attributes_for :orders, allow_destroy: true\r\n  \r\n  scope :push, -&gt;{ where(push: true).order(\"pushed_at DESC\") }\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>&amp; User :</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>class User &lt; ActiveRecord::Base\r\n  # Include default devise modules. Others available are:\r\n  # :confirmable, :lockable, :timeoutable and :omniauthable\r\n  devise :database_authenticatable, :registerable,\r\n         :recoverable, :rememberable, :trackable, :validatable\r\n\r\n         has_many :posts, dependent: :destroy\r\n         has_many :onlines, dependent: :destroy\r\n         has_many :comments\r\nhas_many :orders, dependent: :destroy\r\n\r\n         validates :pseudo, presence: true, length: { minimum: 4, maximum: 16 }\r\n\r\n         has_attached_file :avatar, styles: { medium: '100x100#' }  \r\nvalidates_attachment_content_type :avatar, content_type: /\\Aimage\\/.*\\Z/ \r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Error :\n<a href=\"https://i.stack.imgur.com/MatQg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MatQg.png\" alt=\"enter image description here\"></a>\nWell, so if you have any advices for that, I'll take it !! Thanks</p>\n"}, {"tags": ["ruby", "selenium", "cucumber", "capybara", "page-object-gem"], "answers": [{"tags": [], "owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "is_accepted": true, "score": 0, "last_activity_date": 1463591762, "last_edit_date": 1463591762, "creation_date": 1463591140, "answer_id": 37306018, "question_id": 37297744, "link": "https://stackoverflow.com/questions/37297744/is-it-mandatory-to-use-capybara-over-selenium-when-creating-page-object-automati/37306018#37306018", "title": "Is it Mandatory to use Capybara over Selenium when creating Page Object Automation framework in Ruby?", "body": "<p>No, it's not mandatory.  In fact, capybara allows selenium as a <a href=\"https://github.com/jnicklas/capybara#drivers\" rel=\"nofollow\">driver</a>.</p>\n\n<p>Here's a way to look at it:</p>\n\n<p><code>cucumber</code> is a BDD tool that allows stakeholders to write human-readable, executable product specifications, which also serve as living documentation.  Separately, the Page Object model organizes product page (or features) into classes with methods that represent the page/feature functionality.  </p>\n\n<p>But something needs to programmatically drive browser.  There are more than a few options (e.g. selenium-webdriver, capybara, watir-webdriver) that would help you create a ruby/cucumber/page_object framework.  </p>\n"}], "owner": {"reputation": 75, "user_id": 2161166, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c6e07647406164c8a38d5f2719facf97?s=128&d=identicon&r=PG", "display_name": "Pankaj Sharma", "link": "https://stackoverflow.com/users/2161166/pankaj-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 37306018, "answer_count": 1, "score": 0, "last_activity_date": 1463591762, "creation_date": 1463569555, "question_id": 37297744, "link": "https://stackoverflow.com/questions/37297744/is-it-mandatory-to-use-capybara-over-selenium-when-creating-page-object-automati", "title": "Is it Mandatory to use Capybara over Selenium when creating Page Object Automation framework in Ruby?", "body": "<p>I am new to Ruby world and currently learning/creating a PageObject automation framework using Cucumber and Ruby scripting. </p>\n\n<p>I know that using capybara will help me using different browser driver and headless driver easily. So is it something which is must to be used or Selenium as standalone can handle such scenario.</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "postgresql-9.1"], "comments": [{"owner": {"reputation": 732, "user_id": 3165889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iH3bp.jpg?s=128&g=1", "display_name": "Joao Cunha", "link": "https://stackoverflow.com/users/3165889/joao-cunha"}, "edited": false, "score": 0, "creation_date": 1463570314, "post_id": 37297350, "comment_id": 62118669, "body": "locations does not exist for this context. locations.name wont work. Try this: User.joins(:location).update_all(&quot;location_id =(select id from locations as l2 where l2.name = (select name from locations l3 where l3.id = users.location_id limit 1)  limit 1)&quot;)"}, {"owner": {"reputation": 732, "user_id": 3165889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iH3bp.jpg?s=128&g=1", "display_name": "Joao Cunha", "link": "https://stackoverflow.com/users/3165889/joao-cunha"}, "edited": false, "score": 0, "creation_date": 1463570396, "post_id": 37297350, "comment_id": 62118725, "body": "maybe the users will break though... and then you will have to put one more query :(   But I think you should also look for a solution trying to Alias the tables in the active record way...  and then alias Users and Locations from the beginning"}], "answers": [{"tags": [], "owner": {"reputation": 7092, "user_id": 6194235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6767032bd2ec0ee43b952bd75ef1fe63?s=128&d=identicon&r=PG", "display_name": "Rich Benner", "link": "https://stackoverflow.com/users/6194235/rich-benner"}, "is_accepted": false, "score": 0, "last_activity_date": 1463575055, "last_edit_date": 1463575055, "creation_date": 1463574440, "answer_id": 37299644, "question_id": 37297350, "link": "https://stackoverflow.com/questions/37297350/ruby-query-error/37299644#37299644", "title": "Ruby query Error", "body": "<p>This is how I would expect it to work in SQL;</p>\n\n<pre><code>SELECT\na.user_id\n,a.name\n,fst.ID AS location_ID\nFROM locations a\nLEFT JOIN (SELECT name, MIN(location_id) ID FROM locations GROUP BY name) fst\nON a.name = fst.name\n</code></pre>\n"}], "owner": {"reputation": 241, "user_id": 6340849, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/1005996102826343/picture?type=large", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/6340849/abhishek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1463575055, "creation_date": 1463568494, "question_id": 37297350, "link": "https://stackoverflow.com/questions/37297350/ruby-query-error", "title": "Ruby query Error", "body": "<p>i have a user model and a location model . I want to point all the users to the first ocurrence of their location in the location table as shown </p>\n\n<pre><code>User\nuser_id   name  location_id\n1         tim     1\n2         adam    2\n3         Joy     3\n\nLocation\nlocation_id  name\n1            NewYork\n2            NewYork\n3            NewYork\n</code></pre>\n\n<blockquote>\n  <p>Expected Ouput:</p>\n</blockquote>\n\n<pre><code>User\nuser_id   name  location_id\n1         tim     1\n2         adam    1\n3         Joy     1\n</code></pre>\n\n<p>I tried to run this query but it isnt working:</p>\n\n<pre><code>User.joins(:location).update_all(\"location_id =(select id from locations as l2 where l2.name = locations.name limit 1)\")\n</code></pre>\n\n<p>Error: </p>\n\n<pre><code>ActiveRecord::StatementInvalid: PG::UndefinedTable: ERROR:  invalid reference to FROM-clause entry for table \"locations\"\nLINE 1: ... =(select id from locations as l2 where l2.name = locations....\n                                                             ^\nHINT:  Perhaps you meant to reference the table alias \"l2\".\n</code></pre>\n\n<p>Any solution?</p>\n"}, {"tags": ["ruby", "string", "matrix"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1463572110, "post_id": 37297050, "comment_id": 62119890, "body": "How did you encode the Matrix into JSON? JSON doesn&#39;t support matrices, only numbers, strings, arrays, <code>true</code>, <code>false</code>, <code>null</code>, and dictionaries. You must have somehow encoded your Matrix into a combination of those, and you need to do the opposite during the decoding process."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1463605304, "post_id": 37297050, "comment_id": 62141050, "body": "@J&#246;rg, I don&#39;t understand your comment. <code>require &#39;json&#39;</code> adds the method <code>Matrix#to_json</code>. See my answer for elaboration."}], "answers": [{"tags": [], "owner": {"reputation": 732, "user_id": 3165889, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iH3bp.jpg?s=128&g=1", "display_name": "Joao Cunha", "link": "https://stackoverflow.com/users/3165889/joao-cunha"}, "is_accepted": true, "score": 2, "last_activity_date": 1463568856, "last_edit_date": 1463568856, "creation_date": 1463568187, "answer_id": 37297221, "question_id": 37297050, "link": "https://stackoverflow.com/questions/37297050/ruby-convert-string-to-matrix/37297221#37297221", "title": "Ruby: Convert String to Matrix", "body": "<p>First, you defined the first matrix wrong. Different number of rows.</p>\n\n<pre><code>Matrix[[-0.03, 1.3, -0.6],[0.1,-0.45]]\n</code></pre>\n\n<p>gives </p>\n\n<blockquote>\n  <p>ExceptionForMatrix::ErrDimensionMismatch: row size differs (2 should\n  be 3)</p>\n</blockquote>\n\n<p>Matrix does not accept strings for its creation. But it accepts Arrays. So, one solution would be for you to save the array in the file instead of the Matrix strings. If you save in the file \"0.1,-0.45\" you can do something like:</p>\n\n<pre><code>Matrix[\"0.1, -0.45\".split(',')]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1463605659, "last_edit_date": 1463605659, "creation_date": 1463601608, "answer_id": 37309045, "question_id": 37297050, "link": "https://stackoverflow.com/questions/37297050/ruby-convert-string-to-matrix/37309045#37309045", "title": "Ruby: Convert String to Matrix", "body": "<p>Sure, you can do that:</p>\n\n<pre><code>require 'json'\nrequire 'matrix'\n\nm0, m1 = Matrix[[1,2],[3,4]], Matrix[[5,6],[7,8]]\n  #=&gt; [Matrix[[1, 2], [3, 4]], Matrix[[5, 6], [7, 8]]] \nh = {0=&gt;m0, 1=&gt;m1 }\n  #=&gt; {0=&gt;Matrix[[1, 2], [3, 4]], 1=&gt;Matrix[[5, 6], [7, 8]]}\njs = h.to_json\n  #=&gt; \"{\\\"0\\\":\\\"Matrix[[1, 2], [3, 4]]\\\",\\\"1\\\":\\\"Matrix[[5, 6], [7, 8]]\\\"}\" \nFile.write(\"temp\", js)\n  #=&gt; 59\nJSON.parse File.read(\"temp\")\n  #=&gt; {\"0\"=&gt;\"Matrix[[1, 2], [3, 4]]\", \"1\"=&gt;\"Matrix[[5, 6], [7, 8]]\"}\n</code></pre>\n\n<p>Without <code>require json</code>, we have:</p>\n\n<pre><code>ObjectSpace.each_object(Module).select { |m| m.instance_methods.include?(:to_json) }\n  #=&gt; []\n</code></pre>\n\n<p>but after</p>\n\n<pre><code>require 'json'\n</code></pre>\n\n<p>we have:</p>\n\n<pre><code>to_json_modules = ObjectSpace.each_object(Module).select { |m|\n  m.instance_methods.include?(:to_json) }\nto_json_modules.size\n  #=&gt; 527 (Ruby v2.3.0) \nto_json_modules.include?(Matrix)\n  #=&gt; true\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 3806126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17f4f059a661500feb2503f0d93d6461?s=128&d=identicon&r=PG", "display_name": "David L-R", "link": "https://stackoverflow.com/users/3806126/david-l-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "accepted_answer_id": 37297221, "answer_count": 2, "score": 0, "last_activity_date": 1463605659, "creation_date": 1463567708, "last_edit_date": 1463568774, "question_id": 37297050, "link": "https://stackoverflow.com/questions/37297050/ruby-convert-string-to-matrix", "title": "Ruby: Convert String to Matrix", "body": "<p>I have saved a hash with a matrix into a file, like this:</p>\n\n<pre><code>File.open(\"test.json\", \"w+\") { |file| file.write(\"#{hash.to_json}\") }\n</code></pre>\n\n<p>The hash contained following data:</p>\n\n<pre><code>{0=&gt;Matrix[[-0.03, 1.3],[0.1,-0.45]],1=&gt;Matrix[[-1.9,1.8,-0.6]]}\n</code></pre>\n\n<p>Now I read the saved file:</p>\n\n<pre><code>contents = File.read('test.json')\nhashAgain = JSON.parse(contents) #Convert it to hash\n</code></pre>\n\n<p>But if I want to access a Matrix in the hash, the matrix is no longer in the matrix data format:</p>\n\n<pre><code>puts netTrained.values[0].class #=&gt;String\n</code></pre>\n\n<p>My question is how to convert the \"matrix\" string back to the matrix data format?</p>\n"}, {"tags": ["ruby", "security", "ruby-on-rails-3.2"], "comments": [{"owner": {"reputation": 1875, "user_id": 4991626, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/GZ6rj.jpg?s=128&g=1", "display_name": "ashwintastic", "link": "https://stackoverflow.com/users/4991626/ashwintastic"}, "edited": false, "score": 0, "creation_date": 1463570831, "post_id": 37296931, "comment_id": 62119018, "body": "do u have <code>protect_from_forgery with: :exception</code> in ur <code>application_controller</code>"}, {"owner": {"reputation": 692, "user_id": 3464052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mCyU7.jpg?s=128&g=1", "display_name": "Mithun Arunan", "link": "https://stackoverflow.com/users/3464052/mithun-arunan"}, "reply_to_user": {"reputation": 1875, "user_id": 4991626, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/GZ6rj.jpg?s=128&g=1", "display_name": "ashwintastic", "link": "https://stackoverflow.com/users/4991626/ashwintastic"}, "edited": false, "score": 0, "creation_date": 1477916180, "post_id": 37296931, "comment_id": 67937980, "body": "@ashwintastic Hi, I&#39;m using Rails 3.2.9 there is no support for the additional parameters like <b>protect_from_forgery with: :exception</b>"}, {"owner": {"reputation": 1875, "user_id": 4991626, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/GZ6rj.jpg?s=128&g=1", "display_name": "ashwintastic", "link": "https://stackoverflow.com/users/4991626/ashwintastic"}, "edited": false, "score": 0, "creation_date": 1478774529, "post_id": 37296931, "comment_id": 68291430, "body": "hey paste as it is inur application_controller <code>protect_from_forgery with: :exception     skip_before_action :verify_authenticity_token,   if: Proc.new { |c| c.request.format.json? } </code>"}], "owner": {"reputation": 692, "user_id": 3464052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mCyU7.jpg?s=128&g=1", "display_name": "Mithun Arunan", "link": "https://stackoverflow.com/users/3464052/mithun-arunan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 2, "answer_count": 0, "score": 4, "last_activity_date": 1465420479, "creation_date": 1463567412, "question_id": 37296931, "link": "https://stackoverflow.com/questions/37296931/csrf-vulnerability-rails-3-2-9", "title": "CSRF vulnerability - Rails 3.2.9", "body": "<p>I use rails 3.2.9 in webrick. My site seems to vulnerable to CSRF.\nI have already added &lt;%= csrf_meta_tags %> to the layout file..\nAnd added the Protect_from_forgery in my application controller..</p>\n\n<p>but when i try to make a Post request from a form in another domain, it's possible.. My site still seems to be vulnerable to CSRF..</p>\n\n<p>I'm struck, wondering how to proceed! Pls help me out</p>\n"}, {"tags": ["ruby", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 308, "user_id": 6143052, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-3Y70yRx2Dj8/AAAAAAAAAAI/AAAAAAAAExg/o2erVsxw6jY/photo.jpg?sz=128", "display_name": "uri wald", "link": "https://stackoverflow.com/users/6143052/uri-wald"}, "is_accepted": false, "score": 2, "last_activity_date": 1463709359, "creation_date": 1463709359, "answer_id": 37336766, "question_id": 37296920, "link": "https://stackoverflow.com/questions/37296920/ruby-cant-find-installed-gems-windows-10/37336766#37336766", "title": "Ruby can&#39;t find installed gems windows 10", "body": "<p>Found the problem.\nI had Jruby installed along with Ruby, so when installing the gem it will automatically install under the Jruby directory and later won't be found by Ruby removing the Jruby from PATH end variable solved the problem</p>\n"}], "owner": {"reputation": 308, "user_id": 6143052, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-3Y70yRx2Dj8/AAAAAAAAAAI/AAAAAAAAExg/o2erVsxw6jY/photo.jpg?sz=128", "display_name": "uri wald", "link": "https://stackoverflow.com/users/6143052/uri-wald"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 707, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463709359, "creation_date": 1463567385, "question_id": 37296920, "link": "https://stackoverflow.com/questions/37296920/ruby-cant-find-installed-gems-windows-10", "title": "Ruby can&#39;t find installed gems windows 10", "body": "<p>When running a script containing the following</p>\n\n<pre><code>require 'rubygems'\nrequire 'zip'\n</code></pre>\n\n<p>I am getting </p>\n\n<pre><code>`require': cannot load such file -- zip\n</code></pre>\n\n<p>First I have tried to install like this 'rubyzip'</p>\n\n<pre><code>gem install rubyzip\n</code></pre>\n\n<p>When looking at the gem env:</p>\n\n<pre><code>&gt;gem env\nRubyGems Environment:\nRUBYGEMS VERSION: 2.4.8\nRUBY VERSION: 2.2.3 (2016-01-26 patchlevel 0) [java]\nINSTALLATION DIRECTORY: C:/jruby-9.0.5.0/lib/ruby/gems/shared\nRUBY EXECUTABLE: C:/jruby-9.0.5.0/bin/jruby.exe\nEXECUTABLE DIRECTORY: C:/jruby-9.0.5.0/bin\nSPEC CACHE DIRECTORY: C:/Users/lucio/.gem/specs\nSYSTEM CONFIGURATION DIRECTORY: C:/jruby-9.0.5.0/etc\nRUBYGEMS PLATFORMS:\n- ruby\n- universal-java-1.8\nGEM PATHS:\n - C:/jruby-9.0.5.0/lib/ruby/gems/shared\n - C:/Users/lucio/.gem/jruby/2.2.0\n</code></pre>\n\n<p>in the irb seems like the require works</p>\n\n<pre><code>irb(main):001:0&gt; require 'zip'\n=&gt; true\n</code></pre>\n\n<p>I also trying to install with bundler after installing </p>\n\n<pre><code>&gt;bundle show\nGems included by the bundle:\n* bundler (1.12.4)\n* rubyzip (1.2.0)\n</code></pre>\n\n<p>but when running my script I get</p>\n\n<pre><code>&gt;bundler exec ruby zip.rb\nCould not find rubyzip-1.2.0 in any of the sources\nRun `bundle install` to install missing gems.\n</code></pre>\n\n<p>I can also see it in the gem list</p>\n\n<pre><code>&gt;gem list -l\n\n*** LOCAL GEMS ***\n\nbundler (1.12.4)\njar-dependencies (0.2.3)\njruby-openssl (0.9.15 java)\njruby-win32ole (0.8.5)\njson (1.8.0 java)\nminitest (5.4.1)\npower_assert (0.2.3)\npsych (2.0.15 java)\nracc (1.4.13 java)\nrake (10.1.0)\nrdoc (4.1.2)\nrubygems-update (2.6.4)\nrubyzip (1.2.0)\n</code></pre>\n\n<p>Can anybody help ?</p>\n"}, {"tags": ["ruby", "json", "csv"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1463567169, "post_id": 37296747, "comment_id": 62116524, "body": "Show your efforts please."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1463567467, "post_id": 37296747, "comment_id": 62116758, "body": "What exactly have you tried? Please post your actual code."}, {"owner": {"reputation": 11, "user_id": 6349981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f93ab2fa36adb62f11295c1cf58ebe5?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/6349981/steve"}, "edited": false, "score": 0, "creation_date": 1463575419, "post_id": 37296747, "comment_id": 62122349, "body": "First I tried the example in the link. then I tried this example to convert it into an array of hashes    <code>require &#39;csv&#39; csv_data = CSV.read &#39;data.csv&#39;, :col_sep =&gt; &quot;|&quot; headers = csv_data.shift.map {|i| i.to_s } string_data = csv_data.map {|row| row.map {|cell| cell.to_s } } array_of_hashes = string_data.map {|row| Hash[*headers.zip(row).flatten] }  puts &quot;Array&quot; p array_of_hashes</code> then I planned to extract some uniq values to perform some searches with to produce the nested output <code>cupboard = array_of_hashes.map { |h| h[&quot;cupboard&quot;] }.uniq </code>"}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1463583466, "post_id": 37296747, "comment_id": 62128463, "body": "@Steve As you can see, code isn&#39;t very readable in comments.  It&#39;s ok, and even preferred, to put the code you tried in the question itself.  You can click &#39;Edit&#39; on your question and add it, explaining that this is what you tried so far."}], "answers": [{"comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1463567952, "post_id": 37297042, "comment_id": 62117093, "body": "Have you read the title of question ? <i>Convert CSV to a nested <b>Ruby</b> hash/JSON</i>, this question also tagged as ruby."}, {"owner": {"reputation": 419, "user_id": 2244687, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/7cba9c90b1eeebafb8d13bcc52620967?s=128&d=identicon&r=PG", "display_name": "err1", "link": "https://stackoverflow.com/users/2244687/err1"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1463568001, "post_id": 37297042, "comment_id": 62117121, "body": "OK, why has my answer been voted down?  He didn&#39;t specify the lanuage that he was using and I gave him some general pointers.  And if YOU care to read or follow the links...."}, {"owner": {"reputation": 11, "user_id": 6349981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f93ab2fa36adb62f11295c1cf58ebe5?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/6349981/steve"}, "edited": false, "score": 0, "creation_date": 1463575709, "post_id": 37297042, "comment_id": 62122591, "body": "trying to do it in ruby"}], "tags": [], "owner": {"reputation": 419, "user_id": 2244687, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/7cba9c90b1eeebafb8d13bcc52620967?s=128&d=identicon&r=PG", "display_name": "err1", "link": "https://stackoverflow.com/users/2244687/err1"}, "is_accepted": false, "score": -2, "last_activity_date": 1463567691, "last_edit_date": 1495539844, "creation_date": 1463567691, "answer_id": 37297042, "question_id": 37296747, "link": "https://stackoverflow.com/questions/37296747/convert-csv-to-a-nested-ruby-hash-json/37297042#37297042", "title": "Convert CSV to a nested Ruby hash/JSON", "body": "<p>What language are you using? </p>\n\n<p>For javascript look up \"jsfiddle csv json\" in Google and for <a href=\"https://stackoverflow.com/questions/10824165/converting-a-csv-file-to-json-using-c-sharp\">c# take a look at this question</a>.  In my c# project I make use of <a href=\"http://www.newtonsoft.com/json\" rel=\"nofollow noreferrer\">NewtonSoft's brilliant JSON</a> framework.</p>\n"}], "owner": {"reputation": 11, "user_id": 6349981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f93ab2fa36adb62f11295c1cf58ebe5?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/6349981/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 684, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1539643449, "creation_date": 1463566875, "last_edit_date": 1495542240, "question_id": 37296747, "link": "https://stackoverflow.com/questions/37296747/convert-csv-to-a-nested-ruby-hash-json", "title": "Convert CSV to a nested Ruby hash/JSON", "body": "<p>I'm new to ruby and json so probably going about this in the wrong way.</p>\n\n<p>I want to take an inventory which is in a pipe delimited format and convert it to json.</p>\n\n<p>I had tried the example here <a href=\"https://stackoverflow.com/questions/23186824/convert-csv-to-json-in-ruby/\">Convert csv to json in ruby</a></p>\n\n<p>But I am getting a bit tied up in knots with the logic as the data is in a flat format that will be converted to nested where values in the column match, for example the csv file will look like:-</p>\n\n<pre><code>id|shelf|package|price\ncupboarda|shelf1|can1|10\ncupboarda|shelf1|box1|20\ncupboarda|shelf2|can1|10\ncupboarda|shelf2|box1|20\ncupboarda|shelf3|can1|30\n</code></pre>\n\n<p>Which I am trying to convert into a json like:-</p>\n\n<pre><code>{\n  \"id\": \"cupboarda\",\n  \"shelf\": {\n    \"shelf1\": {\n      \"package\": {\n        \"can1\": {\n          \"price\": \"10\"\n        },\n        \"box1\": {\n          \"price\": \"20\"\n        }\n      }\n    },\n    \"shelf2\": {\n      \"package\": {\n        \"can1\": {\n          \"price\": \"10\"\n        },\n        \"box1\": {\n          \"price\": \"20\"\n        }\n      }\n    },\n    \"shelf3\": {\n      \"package\": {\n        \"can1\": {\n          \"price\": \"30\"\n        }\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>I think I am on the right track with the example in the link but just getting a bit stuck with how I nest it.</p>\n\n<p>This is what I tried as a way of getting everything into a kind of block so I could then figure out some logic that would extract the fields into either a nested JSON or a nested hash that I could then format as json or something else.</p>\n\n<pre><code>require 'csv'\ncsv_data = CSV.read 'data.csv', :col_sep =&gt; \"|\"\nheaders = csv_data.shift.map {|i| i.to_s }\nstring_data = csv_data.map {|row| row.map {|cell| cell.to_s } }\narray_of_hashes = string_data.map {|row| Hash[*headers.zip(row).flatten] }\n\nputs \"Array\"\np array_of_hashes\n</code></pre>\n\n<p>What's tying me up in knots is trying to figure out how to use the values from the id and start to slit and nest the data under each other.\nJust starting with Ruby so the logic part is my brick wall, the above code is something I found elsewhere which I thought gave me what I wanted but might not be the best approach.</p>\n\n<p>Update></p>\n\n<p>Still trying to wrap my head around the logic of this but so far this is how far I have gotten:-</p>\n\n<pre><code>require 'csv'\nrequire 'json'\n\ncsv_data = CSV.read 'inv.csv', :col_sep =&gt; \"|\"\nheaders = csv_data.shift.map {|i| i.to_s }\nstring_data = csv_data.map {|row| row.map {|cell| cell.to_s } }\narray_of_hashes = string_data.map {|row| Hash[*headers.zip(row).flatten] }\n\nsummary = {}\narray_of_hashes.each do |rec|\n  ida, shelfa, packagea, pricea = rec.values_at('id','shelf','package','price')\n  ((summary[ida] ||= {})[shelfa] ||= {})[packagea] ||= 0\n  summary[ida][shelfa][packagea] = pricea\nend\nputs summary.to_json\nputs summary\n</code></pre>\n\n<p>produces something close to what I want if I put the data in a file called inv.csv.</p>\n\n<p>I get this output</p>\n\n<pre><code>{\"cupboarda\":{\"shelf1\":{\"can1\":\"10\",\"box1\":\"20\"},\"shelf2\":{\"can1\":\"10\",\"box1\":\"20\"},\"shelf3\":{\"can1\":\"30\"}}}\n{\"cupboarda\"=&gt;{\"shelf1\"=&gt;{\"can1\"=&gt;\"10\", \"box1\"=&gt;\"20\"}, \"shelf2\"=&gt;{\"can1\"=&gt;\"10\", \"box1\"=&gt;\"20\"}, \"shelf3\"=&gt;{\"can1\"=&gt;\"30\"}}}\n</code></pre>\n\n<p>I just need to figure out who I can make it compact like:-</p>\n\n<pre><code>{\"cupboard\":\"cupboarda\",\"shelf\":{\"shelf1\":{\"package\":{\"can1\":{\"price\":\"10\"},\"box1\":{\"price\":\"20\"}}},\"shelf2\":{\"package\":{\"can1\":{\"price\":\"10\"},\"box1\":{\"price\":\"20\"}}},\"shelf3\":{\"package\":{\"can1\":{\"price\":\"30\"}}}}}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ibm-cloud-infrastructure"], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 4225847, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9203a734002ba7305889266a666df461?s=128&d=identicon&r=PG&f=1", "display_name": "Anupam K", "link": "https://stackoverflow.com/users/4225847/anupam-k"}, "edited": false, "score": 0, "creation_date": 1463583336, "post_id": 37302773, "comment_id": 62128351, "body": "I will try running the code pasted above and will get back to you"}, {"owner": {"reputation": 177, "user_id": 4225847, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9203a734002ba7305889266a666df461?s=128&d=identicon&r=PG&f=1", "display_name": "Anupam K", "link": "https://stackoverflow.com/users/4225847/anupam-k"}, "edited": false, "score": 0, "creation_date": 1463595367, "post_id": 37302773, "comment_id": 62135838, "body": "This is the <code>Order Template {&quot;complexType&quot;=&gt;&quot;SoftLayer_Container_Product_Order_Virtual_G&zwnj;&#8203;uest_Upgrade&quot;, &quot;virtualGuests&quot;=&gt;[{&quot;id&quot;=&gt;12345}], &quot;properties&quot;=&gt;[{&quot;name&quot;=&gt;&quot;MAINTENANCE_WINDOW&quot;, &quot;value&quot;=&gt;&quot;2016-05-18T18:14:05+00:00&quot;}], &quot;prices&quot;=&gt;[{&quot;id&quot;=&gt;25396}, {&quot;id&quot;=&gt;35237}]} </code> For that I got exception --&gt;  <code>XMLRPC::FaultException: Unable to add 30 GB (SAN) because a Second Disk price has already been added.</code>  What might be the reason ?"}, {"owner": {"reputation": 1536, "user_id": 5094381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67e8c1f673b4f8767f765f9253b566da?s=128&d=identicon&r=PG&f=1", "display_name": "mcruz", "link": "https://stackoverflow.com/users/5094381/mcruz"}, "reply_to_user": {"reputation": 177, "user_id": 4225847, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9203a734002ba7305889266a666df461?s=128&d=identicon&r=PG&f=1", "display_name": "Anupam K", "link": "https://stackoverflow.com/users/4225847/anupam-k"}, "edited": false, "score": 0, "creation_date": 1463604933, "post_id": 37302773, "comment_id": 62140865, "body": "@AnupamK, maybe the Virtual Guest that you want to upgrade has a <code>second disk</code> and some of the <code>item prices</code> belong to a \u2018second disk\u2019. To confirm this, please execute the following Rest request in order to know the items of your Virtual Guest: <code>https:&#47;&#47;[username]:[apikey]@api.softlayer.com&#47;rest&#47;v3&#47;SoftLa&zwnj;&#8203;yer_Virtual_Guest&#47;[s&zwnj;&#8203;erver_id]&#47;getBilling&zwnj;&#8203;Item?objectMask=mask&zwnj;&#8203;[id,orderItem[id, order[id,items]]]</code>.  If your VSI has a second disk, you will able to add from third disk."}, {"owner": {"reputation": 177, "user_id": 4225847, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9203a734002ba7305889266a666df461?s=128&d=identicon&r=PG&f=1", "display_name": "Anupam K", "link": "https://stackoverflow.com/users/4225847/anupam-k"}, "edited": false, "score": 0, "creation_date": 1463628885, "post_id": 37302773, "comment_id": 62147659, "body": "hi when I run this <code>https:&#47;&#47;api.softlayer.com&#47;rest&#47;v3&#47;SoftLayer_Virtual_Guest&#47;19&zwnj;&#8203;304505&#47;getBillingIte&zwnj;&#8203;m?objectMask=mask[id&zwnj;&#8203;,orderItem[id,%20ord&zwnj;&#8203;er[id,items]]]</code> I see there is only 1 disk item listed and that is <code>&lt;categoryCode&gt;guest_disk0&lt;&#47;categoryCode&gt; &lt;description&gt;25 GB (SAN)&lt;&#47;description&gt;</code>"}, {"owner": {"reputation": 177, "user_id": 4225847, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9203a734002ba7305889266a666df461?s=128&d=identicon&r=PG&f=1", "display_name": "Anupam K", "link": "https://stackoverflow.com/users/4225847/anupam-k"}, "edited": false, "score": 0, "creation_date": 1463628937, "post_id": 37302773, "comment_id": 62147672, "body": "when i run the command <code>lsblk</code> on machine i see that there is  ` NAME    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT <b>xvda    202:0    0   25G  0 disk</b> \u251c\u2500xvda1 202:1    0  256M  0 part /boot \u2514\u2500xvda2 202:2    0 24.8G  0 part / xvdb    202:16   0    2G  0 disk  \u2514\u2500xvdb1 202:17   0    2G  0 part [SWAP] <b>xvdc    202:32   0   30G  0 disk</b>  xvdh    202:112  0   64M  0 disk  \u2514\u2500xvdh1 202:113  0   61M  0 part`"}, {"owner": {"reputation": 177, "user_id": 4225847, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9203a734002ba7305889266a666df461?s=128&d=identicon&r=PG&f=1", "display_name": "Anupam K", "link": "https://stackoverflow.com/users/4225847/anupam-k"}, "edited": false, "score": 0, "creation_date": 1463629369, "post_id": 37302773, "comment_id": 62147764, "body": "I tried again with below  Order Template <code>{&quot;complexType&quot;=&gt;&quot;SoftLayer_Container_Product_Order_Virtual_G&zwnj;&#8203;uest_Upgrade&quot;, &quot;virtualGuests&quot;=&gt;[{&quot;id&quot;=&gt;19304505}], &quot;properties&quot;=&gt;[{&quot;name&quot;=&gt;&quot;MAINTENANCE_WINDOW&quot;, &quot;value&quot;=&gt;&quot;2016-05-19T03:40:12+00:00&quot;}], &quot;prices&quot;=&gt;[{&quot;id&quot;=&gt;25396}, {&quot;id&quot;=&gt;34869}]} </code> but i see the same exception <code>Unable to add 10 GB (SAN) because a Second Disk price has already been added</code>"}, {"owner": {"reputation": 177, "user_id": 4225847, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9203a734002ba7305889266a666df461?s=128&d=identicon&r=PG&f=1", "display_name": "Anupam K", "link": "https://stackoverflow.com/users/4225847/anupam-k"}, "edited": false, "score": 0, "creation_date": 1463637009, "post_id": 37302773, "comment_id": 62149918, "body": "I think <code>categoryCode</code> or <code>id</code> tag for the <code>prices</code> is missing , so it always tries to add disk to only 1 default location :)"}, {"owner": {"reputation": 1536, "user_id": 5094381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67e8c1f673b4f8767f765f9253b566da?s=128&d=identicon&r=PG&f=1", "display_name": "mcruz", "link": "https://stackoverflow.com/users/5094381/mcruz"}, "reply_to_user": {"reputation": 177, "user_id": 4225847, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9203a734002ba7305889266a666df461?s=128&d=identicon&r=PG&f=1", "display_name": "Anupam K", "link": "https://stackoverflow.com/users/4225847/anupam-k"}, "edited": false, "score": 0, "creation_date": 1463669675, "post_id": 37302773, "comment_id": 62172879, "body": "You are right. I executed some tests and the <code>categoryCode</code> helps us to decide what disk we will add. Also I had an error message: <code>&quot;error&quot;: &quot;A current price was provided for the upgrade order. Please send a different price to upgrade the item.</code>. And reviewing the <code>virtual Guest</code> using this request: <code>https:&#47;&#47; api.softlayer.com&#47;rest&#47;v3&#47;SoftLayer_Virtual_Guest&#47;19304505&#47;g&zwnj;&#8203;etObject?objectMask=&zwnj;&#8203;mask[id,upgradeReque&zwnj;&#8203;st[id,order[items]]]</code>&zwnj;&#8203;, we can notice an upgrade was executed in that server where some disks were added. This is reason of this error message. Please take into account. Regards."}], "tags": [], "owner": {"reputation": 1536, "user_id": 5094381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67e8c1f673b4f8767f765f9253b566da?s=128&d=identicon&r=PG&f=1", "display_name": "mcruz", "link": "https://stackoverflow.com/users/5094381/mcruz"}, "is_accepted": true, "score": 0, "last_activity_date": 1463582196, "creation_date": 1463582196, "answer_id": 37302773, "question_id": 37296037, "link": "https://stackoverflow.com/questions/37296037/add-san-or-local-disk-to-already-provisioned-server-in-softlayer/37302773#37302773", "title": "Add SAN or Local disk to already provisioned Server in Softlayer", "body": "<p>Please try the following example to <code>upgrade a Virtual Guest in order to add a disk</code>:</p>\n\n<pre><code>require 'rubygems'\nrequire 'softlayer_api'\n\n# Your SoftLayer API username.\nSL_API_USERNAME = 'set me'\n\n# Your SoftLayer API key.\nSL_API_KEY = 'set me'\n\n\n# Set the server id that you wish to upgrade.\nserver_id = 17850400\n\n# Set the new item price id to upgrade the VSI\nprice_id = 51733  # 10 GB (SAN) \"categoryCode\": \"guest_disk1\", \"name\": \"Second Disk\"\n\n# Order Template with all new item configurations\nobject_template = {'packageId'=&gt; 0,\n                   'prices'=&gt; [\n                       {\n                           'id'=&gt; price_id\n                       }\n                   ],\n                   'virtualGuests'=&gt; [\n                       {\n                           'id'=&gt; server_id\n                       }\n                   ],\n                   'properties'=&gt; [\n                       {\n                           'name'=&gt; 'NOTE_GENERAL',\n                           'value'=&gt; 'Adding a SAN disk'\n                       },\n                       {\n                           'name'=&gt; 'MAINTENANCE_WINDOW',\n                           'value'=&gt; 'now'\n                       }\n                   ],\n                   'complexType'=&gt; 'SoftLayer_Container_Product_Order_Virtual_Guest_Upgrade'\n}\n\nsoftlayer_client = SoftLayer::Client.new(:username =&gt; SL_API_USERNAME,\n                                         :api_key =&gt; SL_API_KEY)\nproduct_order_service = softlayer_client.service_named('SoftLayer_Product_Order')\n\nbegin\n  result = product_order_service.verifyOrder(object_template)\n  puts 'Result:  '\n  puts result.inspect\nrescue Exception =&gt; e\n  puts 'Unable to add the new SAN Disk ...'\n  $stdout.print(e.inspect)\nend\n</code></pre>\n\n<p><strong>Note:</strong> Once your script is ready, please change from <code>verifyOrder</code> to <code>placeOrder</code>.</p>\n\n<p>To get valid prices for upgrade, please review:</p>\n\n<p><a href=\"http://sldn.softlayer.com/reference/services/SoftLayer_Virtual_Guest/getUpgradeItemPrices\" rel=\"nofollow\">SoftLayer_Virtual_Guest::getUpgradeItemPrices</a></p>\n\n<p><strong>References:</strong></p>\n\n<p><a href=\"http://sldn.softlayer.com/reference/services/SoftLayer_Product_Order\" rel=\"nofollow\">SoftLayer_Product_Order</a></p>\n\n<p><a href=\"http://sldn.softlayer.com/reference/datatypes/SoftLayer_Container_Product_Order_Virtual_Guest_Upgrade\" rel=\"nofollow\">SoftLayer_Container_Product_Order_Virtual_Guest_Upgrade</a></p>\n\n<p><a href=\"https://softlayer.github.io/python/upgrade_examples/\" rel=\"nofollow\">upgrade_examples</a></p>\n"}], "owner": {"reputation": 177, "user_id": 4225847, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9203a734002ba7305889266a666df461?s=128&d=identicon&r=PG&f=1", "display_name": "Anupam K", "link": "https://stackoverflow.com/users/4225847/anupam-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 0, "accepted_answer_id": 37302773, "answer_count": 1, "score": 0, "last_activity_date": 1463582196, "creation_date": 1463565053, "question_id": 37296037, "link": "https://stackoverflow.com/questions/37296037/add-san-or-local-disk-to-already-provisioned-server-in-softlayer", "title": "Add SAN or Local disk to already provisioned Server in Softlayer", "body": "<p>I am new to the softlayer rest APIs. We have a requirement where user will be allowed to add a additional SAN or Local Disk to the existing provisioned server in softlayer. For that I was referring to the <a href=\"http://sldn.softlayer.com/reference/services/SoftLayer_Virtual_Guest/createObject\" rel=\"nofollow\">REST API guide</a> Our project is build on <code>Ruby on Rails</code> and we are using <code>softlayer_api</code> gem and so I was looking at the <a href=\"http://www.rubydoc.info/github/softlayer/softlayer-api-ruby-client\" rel=\"nofollow\">api ruby doc</a>. But none of these links helped me. Are there any ruby examples for <code>adding a disk</code> ? </p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "active-model-serializers"], "answers": [{"comments": [{"owner": {"reputation": 428, "user_id": 2034926, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cbb54874265d38c043401735f9a9ee1d?s=128&d=identicon&r=PG", "display_name": "Hank-Roughknuckles", "link": "https://stackoverflow.com/users/2034926/hank-roughknuckles"}, "edited": false, "score": 0, "creation_date": 1463573490, "post_id": 37297454, "comment_id": 62120916, "body": "Thanks for the help, but I&#39;m wondering if there&#39;s a more extensible way of doing this.  If there are other methods that require other arguments, I would have to do this for each one if I use this approach."}], "tags": [], "owner": {"reputation": 2315, "user_id": 5129663, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8P0ivhj4wM/AAAAAAAAAAI/AAAAAAAAAAo/7JsXqgRUH8w/photo.jpg?sz=128", "display_name": "Amol Udage", "link": "https://stackoverflow.com/users/5129663/amol-udage"}, "is_accepted": false, "score": 0, "last_activity_date": 1463568760, "last_edit_date": 1495540364, "creation_date": 1463568760, "answer_id": 37297454, "question_id": 37296004, "link": "https://stackoverflow.com/questions/37296004/putting-instance-method-results-with-arguments-into-active-model-serializers/37297454#37297454", "title": "Putting instance method results (with arguments) into active_model_serializers", "body": "<p>You can add <code>current_user</code> attribute to your model &amp; set it before  your json execute.</p>\n\n<p>See stackoverflow question link <a href=\"https://stackoverflow.com/questions/2745607/ruby-to-json-methods-arguments\">Ruby to_json :methods arguments</a></p>\n"}], "owner": {"reputation": 428, "user_id": 2034926, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cbb54874265d38c043401735f9a9ee1d?s=128&d=identicon&r=PG", "display_name": "Hank-Roughknuckles", "link": "https://stackoverflow.com/users/2034926/hank-roughknuckles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1463568760, "creation_date": 1463564984, "question_id": 37296004, "link": "https://stackoverflow.com/questions/37296004/putting-instance-method-results-with-arguments-into-active-model-serializers", "title": "Putting instance method results (with arguments) into active_model_serializers", "body": "<p>I'm making a JSON API and want to serialize a <code>recipe</code> record from my database.  In the JSON response, I want to include the output of <code>@recipe.is_favorited_by?(current_user)</code> along with some of the <code>recipe</code>'s attributes.</p>\n\n<p>I saw from <a href=\"http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html#method-i-as_json\" rel=\"nofollow\">the docs</a> that I could call: <code>render json: @recipe, methods: :is_favorited_by?</code> - but I'm not sure how to pass in current_user as an argument.  </p>\n\n<p>What call would I need to make in order to include the results of <code>@recipe.is_favorited_by?(current_user</code>) in the response?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin"], "comments": [{"owner": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "edited": false, "score": 1, "creation_date": 1463564443, "post_id": 37295517, "comment_id": 62114651, "body": "How/where is current_admin_user defined? Are you using something like Devise to handle authentication or have you defined your own?"}, {"owner": {"reputation": 1, "user_id": 6219223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/524bacc6772f4cef3a937f90e2fd43dd?s=128&d=identicon&r=PG&f=1", "display_name": "bacq", "link": "https://stackoverflow.com/users/6219223/bacq"}, "reply_to_user": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "edited": false, "score": 0, "creation_date": 1463565599, "post_id": 37295517, "comment_id": 62115445, "body": "Actually current_admin_user is from activeadmin and I&#39;ve not built up on my own the authentication/departments system because I&#39;m working on a project I received from others programmers (which are naturally not reachable any more)."}, {"owner": {"reputation": 901, "user_id": 2802149, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/htwJY.png?s=128&g=1", "display_name": "Jan Bussieck", "link": "https://stackoverflow.com/users/2802149/jan-bussieck"}, "edited": false, "score": 0, "creation_date": 1463566794, "post_id": 37295517, "comment_id": 62116244, "body": "Where are you putting the above code, could you provide more context?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6219223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/524bacc6772f4cef3a937f90e2fd43dd?s=128&d=identicon&r=PG&f=1", "display_name": "bacq", "link": "https://stackoverflow.com/users/6219223/bacq"}, "edited": false, "score": 0, "creation_date": 1463649743, "post_id": 37298804, "comment_id": 62157646, "body": "Thank you, that would be a good solution (I already have department instead of role), but my problem is to hide a menu items button, which I don&#39;t explicitly show in the view. So I (think I) can&#39;t just hide the button with erb (that&#39;s my problem and why I&#39;d like to disallow the action from the controller)."}, {"owner": {"reputation": 1081, "user_id": 1473423, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IgJTk.png?s=128&g=1", "display_name": "bntzio", "link": "https://stackoverflow.com/users/1473423/bntzio"}, "reply_to_user": {"reputation": 1, "user_id": 6219223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/524bacc6772f4cef3a937f90e2fd43dd?s=128&d=identicon&r=PG&f=1", "display_name": "bacq", "link": "https://stackoverflow.com/users/6219223/bacq"}, "edited": false, "score": 0, "creation_date": 1463694584, "post_id": 37298804, "comment_id": 62187046, "body": "Oh ok, department should work as well it&#39;s just a name. Well, if you want to disable the controller action, use authorization, I recommend you Pundit <a href=\"https://github.com/elabs/pundit\" rel=\"nofollow noreferrer\">github.com/elabs/pundit</a> . It&#39;s very good, and with that you can authorize your controller actions based on your user department, etc. You can also authorize in views so you get the best out of two worlds (authorization in controller actions and in views)."}, {"owner": {"reputation": 1, "user_id": 6219223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/524bacc6772f4cef3a937f90e2fd43dd?s=128&d=identicon&r=PG&f=1", "display_name": "bacq", "link": "https://stackoverflow.com/users/6219223/bacq"}, "edited": false, "score": 0, "creation_date": 1464079311, "post_id": 37298804, "comment_id": 62323915, "body": "I&#39;m sorry, but I don&#39;t find it useful. It leads to the same problem I had before: I can&#39;t address to the current_user from outside a method in the controller. Or if there&#39;s a way, I simply don&#39;t know it."}], "tags": [], "owner": {"reputation": 1081, "user_id": 1473423, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IgJTk.png?s=128&g=1", "display_name": "bntzio", "link": "https://stackoverflow.com/users/1473423/bntzio"}, "is_accepted": false, "score": 0, "last_activity_date": 1463572328, "last_edit_date": 1495540369, "creation_date": 1463572328, "answer_id": 37298804, "question_id": 37295517, "link": "https://stackoverflow.com/questions/37295517/disallow-action-item-with-condition-in-adminuser/37298804#37298804", "title": "Disallow action item with condition in AdminUser", "body": "<p>Create a migration, run: <code>rails g migration AddRoleToUsers role:string</code> to add a role to your users.</p>\n\n<p>Migrate <code>bundle exec rake db:migrate</code></p>\n\n<p>In your rails c run <code>User.first.update_attributes(:role =&gt; 'admin')</code> this will add an 'admin' role to the first user in the db.</p>\n\n<p>In your User model (user.rb) create this method:</p>\n\n<pre><code>def admin?\n  role == 'admin'\nend\n</code></pre>\n\n<p>Now in the view (assuming you're using erb) that you want to hide the action from the normal users add this:</p>\n\n<pre><code>&lt;% if current_user.admin? %&gt;\n  # show stuff\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong><em>Note:</strong> current_user is devise method, if you're not using devise, you need to roll your own method to check for the current signed in user, you can do that with sessions.</em></p>\n\n<p><em>See <a href=\"https://stackoverflow.com/questions/12719958/rails-where-does-the-infamous-current-user-come-from\">Rails: where does the infamous &quot;current_user&quot; come from?</a></em></p>\n\n<p>In that way you can hide stuff to the user that is not an admin.</p>\n"}], "owner": {"reputation": 1, "user_id": 6219223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/524bacc6772f4cef3a937f90e2fd43dd?s=128&d=identicon&r=PG&f=1", "display_name": "bacq", "link": "https://stackoverflow.com/users/6219223/bacq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 359, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463572328, "creation_date": 1463563823, "question_id": 37295517, "link": "https://stackoverflow.com/questions/37295517/disallow-action-item-with-condition-in-adminuser", "title": "Disallow action item with condition in AdminUser", "body": "<p>first question here, I hope to be specific and not stupid.\nI'm new also in Rails and AdminUser and I would like to create a controller that show a menu item only if the current_user is of a certain type (in my case: Lektor).</p>\n\n<p>I've written something like this:</p>\n\n<pre><code>  disallowed_actions = []\n  disallowed_actions &lt;&lt; :create if proc {current_admin_user.departments.to_a[0].name != \"Lektor\" }\n  actions :all, :except =&gt; disallowed_actions\n</code></pre>\n\n<p>But it doesn't work, and I think it's because the current_admin_user I refer to in proc is not the same of the controller, but I also can't refer to the current_admin_user outside a method or a proc.\nAny suggestions?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "locale"], "answers": [{"tags": [], "owner": {"reputation": 901, "user_id": 2802149, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/htwJY.png?s=128&g=1", "display_name": "Jan Bussieck", "link": "https://stackoverflow.com/users/2802149/jan-bussieck"}, "is_accepted": false, "score": 1, "last_activity_date": 1463566367, "last_edit_date": 1592644375, "creation_date": 1463563863, "answer_id": 37295533, "question_id": 37295305, "link": "https://stackoverflow.com/questions/37295305/rails-email-user-activation-link-with-locale/37295533#37295533", "title": "Rails email user activation link with locale", "body": "<p>You still have to set the locale explicitly in your routes, see this <a href=\"https://stackoverflow.com/questions/26326249/how-to-change-the-locale-through-url\">question</a>, so include something like this in your ApplicationController:</p>\n<pre><code>   def set_locale\n     I18n.locale = params[:locale] || session[:locale] || I18n.default_locale\n     session[:locale] = I18n.locale\n   end\n\n   def default_url_options(options={})\n     logger.debug &quot;default_url_options is passed options: #{options.inspect}\\n&quot;\n     { locale: I18n.locale }\n   end\n</code></pre>\n<p>The locale option will now be merged automatically when you use url helpers.</p>\n"}], "owner": {"reputation": 707, "user_id": 4857703, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4c429b76da33b18fb818c4890075fe6e?s=128&d=identicon&r=PG&f=1", "display_name": "Shalafister&#39;s", "link": "https://stackoverflow.com/users/4857703/shalafisters"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463566367, "creation_date": 1463563279, "last_edit_date": 1463565182, "question_id": 37295305, "link": "https://stackoverflow.com/questions/37295305/rails-email-user-activation-link-with-locale", "title": "Rails email user activation link with locale", "body": "<p>I have created a user model and when user sign-up, email confirmation mail is send. But when I add locale to my rails app, it started giving errors. </p>\n\n<p>Here is user#create action;</p>\n\n<pre><code>def create\n  @user = User.new(user_params)\n  respond_to do |format|\n    if @user.save\n      flash[:notice] = '..'\n      format.html  { redirect_to root_url }        \n       format.js   { render action: 'new', status: :created }  \n        @user.send_activation_email\n    else    \n     format.html { render action: 'new' }\n     format.js   { render json: @user.errors, status: 404 }\n      end\n    end\n  end\n</code></pre>\n\n<p>Account activation controller;</p>\n\n<pre><code>class AccountActivationsController &lt; ApplicationController\n\n\n\n     def edit\n        user = User.find_by(email: params[:email])\n        if user &amp;&amp; !user.activated? &amp;&amp; user.authenticated?(:activation, params[:id])\n          user.activate\n          log_in user\n          flash[:success] = \"activated!\"\n          redirect_to user\n        else\n          flash[:alert] = \"Invalid link\"\n          redirect_to root_url\n        end\n      end\n    end\n</code></pre>\n\n<p>Part of user.rb</p>\n\n<pre><code> # Returns the hash digest of the given string.\n  def User.digest(string)\n    cost = ActiveModel::SecurePassword.min_cost ? BCrypt::Engine::MIN_COST :\n                                                  BCrypt::Engine.cost\n    BCrypt::Password.create(string, cost: cost)\n  end\n\n  # Returns a random token.\n  def User.new_token\n    SecureRandom.urlsafe_base64\n  end\n\n  # Remembers a user in the database for use in persistent sessions.\n  def remember\n    self.remember_token = User.new_token\n    update_attribute(:remember_digest, User.digest(remember_token))\n  end\n\n  # Returns true if the given token matches the digest.\n  def authenticated?(attribute, token)\n    digest = send(\"#{attribute}_digest\")\n    return false if digest.nil?\n    BCrypt::Password.new(digest).is_password?(token)\n  end\n\n\n  # Forgets a user.\n  def forget\n    update_attribute(:remember_digest, nil)\n  end\n\n  # Activates an account.\n  def activate\n    update_attribute(:activated,    true)\n    update_attribute(:activated_at, Time.zone.now)\n  end\n\n  # Sends activation email.\n  def send_activation_email\n    UserMailer.account_activation(self).deliver_now\n  end\n\n  # Sets the password reset attributes.\n  def create_reset_digest\n    self.reset_token = User.new_token\n    update_attribute(:reset_digest,  User.digest(reset_token))\n    update_attribute(:reset_sent_at, Time.zone.now)\n  end\n\n  # Sends password reset email.\n  def send_password_reset_email\n    UserMailer.password_reset(self).deliver_now\n  end\n\n  # Returns true if a password reset has expired.\n  def password_reset_expired?\n    reset_sent_at &lt; 2.hours.ago\n  end\n\n  private\n\n    # Converts email to all lower-case.\n    def downcase_email\n      self.email = email.downcase\n    end\n\n    # Creates and assigns the activation token and digest.\n    def create_activation_digest\n      self.activation_token  = User.new_token\n      self.activation_digest = User.digest(activation_token)\n    end\n</code></pre>\n\n<p>Finally, account_activation.html.erb</p>\n\n<pre><code>&lt;h1&gt;Sample&lt;/h1&gt;\n\n&lt;p&gt;Hi &lt;%= @user.name %&gt;,&lt;/p&gt;\n\n&lt;p&gt;\nWelcome to ...! Click on the link below to activate your account:\n&lt;/p&gt;\n\n&lt;%= link_to \"Activate\", edit_account_activation_url(@user.activation_token,\n                                                    email: @user.email, locale: @locale) %&gt;\n</code></pre>\n\n<p>Lastly, the error from console;</p>\n\n<pre><code>Started POST \"/tr/users\" for ::1 at 2016-05-18 12:01:24 +0300\nI, [2016-05-18T12:01:24.453564 #454]  INFO -- : Processing by UsersController#create as JS\nI, [2016-05-18T12:01:24.453779 #454]  INFO -- :   Parameters: {\"utf8\"=&gt;\"\u2713\", \"user\"=&gt;{\"name\"=&gt;\"234234\", \"username\"=&gt;\"234234\", \"email\"=&gt;\"234@sdf.com\", \"password\"=&gt;\"[FILTERED]\", \"password_confirmation\"=&gt;\"[FILTERED]\", \"user_type\"=&gt;\"Personal Account\", \"terms_of_service\"=&gt;\"1\"}, \"commit\"=&gt;\"Hesap Olu\u015ftur\", \"locale\"=&gt;\"tr\"}\nD, [2016-05-18T12:01:24.546048 #454] DEBUG -- :    (0.2ms)  begin transaction\nD, [2016-05-18T12:01:24.547422 #454] DEBUG -- :   User Exists (0.2ms)  SELECT  1 AS one FROM \"users\" WHERE LOWER(\"users\".\"email\") = LOWER('234@sdf.com') LIMIT 1\nD, [2016-05-18T12:01:24.548145 #454] DEBUG -- :   User Exists (0.1ms)  SELECT  1 AS one FROM \"users\" WHERE \"users\".\"username\" = '234234' LIMIT 1\nD, [2016-05-18T12:01:24.725087 #454] DEBUG -- :   SQL (0.4ms)  INSERT INTO \"users\" (\"name\", \"email\", \"password_digest\", \"username\", \"user_type\", \"created_at\", \"updated_at\", \"activation_digest\") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [[\"name\", \"234234\"], [\"email\", \"234@sdf.com\"], [\"password_digest\", \"$2a$10$l3JDATUxIMIKvMIYYtRhQ.AR8GSC3C9ybwXIFjGgU3ORCeUDjtpra\"], [\"username\", \"234234\"], [\"user_type\", \"Personal Account\"], [\"created_at\", \"2016-05-18 09:01:24.549035\"], [\"updated_at\", \"2016-05-18 09:01:24.549035\"], [\"activation_digest\", \"$2a$10$STp22TuKMbPbn14XXgVJa.yGYd3h9o31xMeEZxcNDsvAJQM4lpQ0.\"]]\nD, [2016-05-18T12:01:24.729336 #454] DEBUG -- :    (2.7ms)  commit transaction\nI, [2016-05-18T12:01:24.751436 #454]  INFO -- :   Rendered user_mailer/account_activation.html.erb within layouts/mailer (4.2ms)\nD, [2016-05-18T12:01:24.751639 #454] DEBUG -- : \nUserMailer#account_activation: processed outbound mail in 21.0ms\nI, [2016-05-18T12:01:24.751911 #454]  INFO -- : Completed 500 Internal Server Error in 296ms\nF, [2016-05-18T12:01:24.801486 #454] FATAL -- : \nActionController::UrlGenerationError (No route matches {:action=&gt;\"edit\", :controller=&gt;\"account_activations\", :email=&gt;\"234@sdf.com\", :format=&gt;nil, :id=&gt;nil, :locale=&gt;nil} missing required keys: [:id]):\n  app/views/user_mailer/account_activation.html.erb:9:in `_app_views_user_mailer_account_activation_html_erb___3249946951177976060_70255610070180'\n  app/mailers/user_mailer.rb:10:in `account_activation'\n  app/models/user.rb:95:in `send_activation_email'\n</code></pre>\n\n<p>The error it gives that about an <code>id params</code> account activation controller as the link is edit link looking for id. The problem is, this structure was working before I placed the locale to routes</p>\n\n<p>routes;</p>\n\n<pre><code>scope \"(:locale)\", locale: /#{I18n.available_locales.join(\"|\")}/ do  \n...\nresources :account_activations, only: [:edit]\n...\nend   \n</code></pre>\n\n<p>So when I send the id of user in account activation html as; </p>\n\n<pre><code>&lt;%= link_to \"Activate\", edit_account_activation_url(@user.activation_token,\n                                                    email: @user.email, id: user.id ) %&gt;\n</code></pre>\n\n<p>the link generates;</p>\n\n<pre><code>localhost:3000/78y5fzxrFtGzwpr5RHlnCQ/account_activations/7/edit?email=....%40.....com\n</code></pre>\n\n<p>So what I see here is that, instead of token there should be locale variable, lets say fr, and instead of id there should be token like this;</p>\n\n<pre><code>localhost:3000/fr/account_activations/78y5fzxrFtGzwpr5RHlnCQ/edit?email=....%40.....com\n</code></pre>\n\n<p>Thank you</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I have it already sorry here; </p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\nbefore_filter :set_locale\n\n def set_locale\n      I18n.locale = params[:locale] || I18n.default_locale\n      @locale = params[:locale] || I18n.default_locale\n    end\n\n    def default_url_options(options = {})\n      {locale: I18n.locale}\n\n    end\n\nend\n</code></pre>\n\n<p>So if I change the link in the email as;</p>\n\n<pre><code>&lt;%= link_to \"Activate\", edit_account_activation_url(id: @user.activation_token, email: @user.email, locale: \"fr\") %&gt;\n</code></pre>\n\n<p>It just works fine however, how shall I pass locale variable to email?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I have passed a variable: \nusermailer</p>\n\n<pre><code>def account_activation(user)\n    @user = user\n    @locale = I18n.locale\n    mail to: user.email, subject: \"Account activation\"\n  end\n</code></pre>\n\n<p>then call in the link:</p>\n\n<pre><code>&lt;%= link_to \"Activate\", edit_account_activation_url(id: @user.activation_token,\nemail: @user.email, locale: @locale) %&gt;\n</code></pre>\n\n<p>hope helps someone else. </p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1463563133, "post_id": 37295219, "comment_id": 62113751, "body": "what is  <code>trim</code> means?"}, {"owner": {"reputation": 241, "user_id": 6340849, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/1005996102826343/picture?type=large", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/6340849/abhishek"}, "reply_to_user": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1463563176, "post_id": 37295219, "comment_id": 62113779, "body": "to remove extra white spaces before after and in between"}, {"owner": {"reputation": 12022, "user_id": 419017, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Y6Frk.jpg?s=128&g=1", "display_name": "Damien Roche", "link": "https://stackoverflow.com/users/419017/damien-roche"}, "edited": false, "score": 1, "creation_date": 1463573996, "post_id": 37295219, "comment_id": 62121311, "body": "Why has this been marked as a duplicate of a question about stripping using Ruby, when this is clearly about the <code>TRIM</code> in sql?"}, {"owner": {"reputation": 325, "user_id": 1059507, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1154624773/picture?type=large", "display_name": "Guillaume", "link": "https://stackoverflow.com/users/1059507/guillaume"}, "reply_to_user": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1468836916, "post_id": 37295219, "comment_id": 64273677, "body": "@Ilya yes the question is about sql not string object. Could you remove the duplicate? In this case it update all the already saved Location in database with a sql method."}], "answers": [{"comments": [{"owner": {"reputation": 241, "user_id": 6340849, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/1005996102826343/picture?type=large", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/6340849/abhishek"}, "edited": false, "score": 1, "creation_date": 1463564141, "post_id": 37295598, "comment_id": 62114444, "body": "Thanks .. It worked! :)"}], "tags": [], "owner": {"reputation": 12022, "user_id": 419017, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Y6Frk.jpg?s=128&g=1", "display_name": "Damien Roche", "link": "https://stackoverflow.com/users/419017/damien-roche"}, "is_accepted": true, "score": 5, "last_activity_date": 1463563994, "creation_date": 1463563994, "answer_id": 37295598, "question_id": 37295219, "link": "https://stackoverflow.com/questions/37295219/ruby-sql-to-trim-an-entire-column-in-a-model/37295598#37295598", "title": "Ruby sql to trim an entire column in a model", "body": "<p>This is what you are looking for:</p>\n\n<p><code>Location.update_all('name = TRIM(name)')</code></p>\n"}], "owner": {"reputation": 241, "user_id": 6340849, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/1005996102826343/picture?type=large", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/6340849/abhishek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "closed_date": 1463565934, "accepted_answer_id": 37295598, "answer_count": 1, "score": 2, "last_activity_date": 1463563994, "creation_date": 1463563037, "last_edit_date": 1463563207, "question_id": 37295219, "link": "https://stackoverflow.com/questions/37295219/ruby-sql-to-trim-an-entire-column-in-a-model", "closed_reason": "Duplicate", "title": "Ruby sql to trim an entire column in a model", "body": "<p>I have a location model with an attribute name.\nI want to trim(remove extra white spaces) the entire name attribute.</p>\n\n<p>I tried to run </p>\n\n<pre><code>Location.TRIM(name)\n</code></pre>\n\n<p>But it isnt working. is the query wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "node.js", "web-services"], "comments": [{"owner": {"reputation": 898, "user_id": 3216644, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/sMDMX.jpg?s=128&g=1", "display_name": "Seralto", "link": "https://stackoverflow.com/users/3216644/seralto"}, "edited": false, "score": 0, "creation_date": 1542025159, "post_id": 37293190, "comment_id": 93408314, "body": "Did you find a solution @user1724991?"}], "owner": {"reputation": 25, "user_id": 1724991, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8e8b843e83aecb547057e537dbd9bfe4?s=128&d=identicon&r=PG", "display_name": "user1724991", "link": "https://stackoverflow.com/users/1724991/user1724991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1463557328, "creation_date": 1463557328, "last_edit_date": 1495535651, "question_id": 37293190, "link": "https://stackoverflow.com/questions/37293190/how-to-make-connection-into-secure-websocket-server-using-authorization-credenti", "title": "How to make connection into secure websocket server using authorization credentials in ruby?", "body": "<p>How can I make a secure (TLS) websocket client connection using Faye-websocket in Ruby?</p>\n\n<p>I am using faye/websocket gem in my script.</p>\n\n<p>The question was also asked <a href=\"https://stackoverflow.com/questions/29801789/secure-websocket-client-in-ruby\">here</a>.\nbut it was not replied properly.</p>\n\n<pre><code>#!/bin/sh ruby\n\nrequire 'faye/websocket'\nrequire 'eventmachine'\n\nEM.run {\n  ws = Faye::WebSocket::Client.new('wss://socket.myexample.com/',['irc', 'amqp'],\n  :headers =&gt; {'Authorization' =&gt; 'Basic ZmFybWxhbmQ6c2FyYWk3OTQ='})\n\n  ws.on :open do |event|\n    ws.send('getAssetList')\n  end\n\n  ws.on :message do |event|\n    p [:message, event.data]\n  end\n\n  ws.on :error do |event|\n  end\n\n  ws.on :close do |event|\n   p [:close, event.code, event.reason]\n   ws = nil\n  end\n}\n</code></pre>\n\n<p>It returns me the following response.</p>\n\n<pre><code>errorCode:8\nexpiry:\"2016-05-17T08:04:24.704Z\"\nghostId:\"6f38e205-7d36-4146-9fb9-3776e4fcabff\"\nmessage:\"Please login\"\npasswordPolicy:null\nserverTime:\"2016-05-17T07:44:24.704Z\"\nsessionPolicy:null\nuser:null\n</code></pre>\n"}, {"tags": ["ruby", "watir", "watir-classic"], "answers": [{"comments": [{"owner": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 0, "creation_date": 1463640967, "post_id": 37300871, "comment_id": 62151770, "body": "Thank you very much Justin Ko, This is really fantastic, it works fine."}, {"owner": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 0, "creation_date": 1466596679, "post_id": 37300871, "comment_id": 63380445, "body": "hi, <code>&lt;md-option tabindex=&quot;0&quot; class=&quot;ng-scope md-ink-ripple&quot; id=&quot;select_option_140&quot; role=&quot;option&quot; aria-checked=&quot;true&quot; aria-selected=&quot;true&quot; value=&quot;1000010&quot; selected=&quot;selected&quot; ng-repeat=&quot;m in masterData.Makes&quot; ng-value=&quot;m.Id&quot;&gt;&lt;div class=&quot;_md-text ng-binding&quot;&gt;Chery&lt;&#47;div&gt;&lt;div class=&quot;md-ripple-container&quot;&gt;&lt;&#47;div&gt;&lt;&#47;md-option&gt;</code> Hi In the above select_list I tried to click using the below code   <code>browser.element(tag_name: &#39;md-option&#39;, text: &#39;Chery&#39;).when_present.click</code>  But it&#39;s not working, what might be the problem?"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 0, "creation_date": 1466600621, "post_id": 37300871, "comment_id": 63383455, "body": "There are quite a number of possible reasons. You&#39;ll need to be more specific about what is/isn&#39;t working and how to reproduce the problem. Does the code work for selecting other options in that dropdown? Is the problem specific to the one dropdown or all of the ones in your application?"}, {"owner": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 0, "creation_date": 1466601298, "post_id": 37300871, "comment_id": 63384035, "body": "As you said <code>b.element(tag_name: &#39;md-select&#39;, id: &#39;select_41&#39;).click   b.element(tag_name: &#39;md-option&#39;, text: &#39;Single&#39;).when_present.click</code>  This one works,but  <code>b.element(tag_name: &#39;md-select&#39;, id: &#39;no-claim-discount&#39;).click  b.element(tag_name: &#39;md-option&#39;, text: &#39;10%&#39;).when_present.click</code>  This one doesn&#39;t work. What might be the reason, how could I resolve this problem?   But second clicks the corresponding element, but element is not visible(choosing is not done) after the click operation."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 0, "creation_date": 1466602577, "post_id": 37300871, "comment_id": 63385263, "body": "What are the differences (ex how they appear, what actions they trigger or are triggered by) between the dropdowns? Once you know the differences, you can debug to figure out what is wrong. Without an example, I am not sure there is much more I can help with."}, {"owner": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 0, "creation_date": 1466603043, "post_id": 37300871, "comment_id": 63385688, "body": "First option <code>&lt;md-option tabindex=&quot;0&quot; class=&quot;ng-scope md-ink-ripple&quot; id=&quot;select_option_206&quot; role=&quot;option&quot; aria-checked=&quot;true&quot; aria-selected=&quot;false&quot; ng-repeat=&quot;m in masterData.MaritalStatuses&quot; ng-value=&quot;m.Id&quot; value=&quot;2&quot;&gt;&lt;div class=&quot;_md-text ng-binding&quot;&gt;Married&lt;&#47;div&gt;&lt;div class=&quot;md-ripple-container&quot;&gt;&lt;&#47;div&gt;&lt;&#47;md-option&gt;</code> Second Option <code>&lt;md-option tabindex=&quot;0&quot; class=&quot;ng-scope md-ink-ripple&quot; id=&quot;select_option_207&quot; role=&quot;option&quot; aria-checked=&quot;true&quot; aria-selected=&quot;false&quot; ng-repeat=&quot;m in masterData.Ncds&quot; ng-value=&quot;m.Id&quot; value=&quot;10002&quot;&gt;&lt;div class=&quot;_md-text ng-binding&quot;&gt;0%&lt;&#47;div&gt;&lt;&#47;md-option&gt;</code>"}, {"owner": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 0, "creation_date": 1466603088, "post_id": 37300871, "comment_id": 63385733, "body": "In the above comment I have mentioned two options which I tried to click, I don&#39;t find any difference, Do you find any?"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 0, "creation_date": 1466603594, "post_id": 37300871, "comment_id": 63386252, "body": "The markup for the two is different, though unlikely to matter. Given that you said Watir is clicking both options, but just failing to trigger the selection, the problem is likely the related JavaScript. You&#39;ll probably want to look into that - ie what events need to be fired and whether Watir is triggering them."}, {"owner": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 0, "creation_date": 1466603717, "post_id": 37300871, "comment_id": 63386372, "body": "&quot; what events need to be fired and whether Watir is triggering them&quot; How would I know what events needs to be fired? In what way?"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 0, "creation_date": 1466606939, "post_id": 37300871, "comment_id": 63389249, "body": "You would have to dig into the JavaScript."}, {"owner": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 0, "creation_date": 1466685054, "post_id": 37300871, "comment_id": 63427044, "body": "I resolved the problem, The problem is in the first line of code which clicks and opens the list, I used another the wrong one, Now I have used the right id to open the list, it works fine, So there is not problem in this code <code>browser.element(tag_name: &#39;md-option&#39;, text: &#39;Chery&#39;).when_present.click</code>"}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 3, "last_activity_date": 1463577523, "creation_date": 1463577523, "answer_id": 37300871, "question_id": 37292762, "link": "https://stackoverflow.com/questions/37292762/new-kind-of-select-list-found-and-dont-know-how-to-write-the-code-for-that/37300871#37300871", "title": "New kind of Select_list found and don&#39;t know how to write the code for that", "body": "<p>Based on the element tag, <code>md-select</code>, it looks like this <a href=\"https://material.angularjs.org/latest/demo/select\" rel=\"nofollow\">select list is created by Angular Material</a>. It is not a <code>select</code> element, which means you cannot use the usual <code>select_list</code> method. Instead, you need to manually interact with it. This involves:</p>\n\n<ol>\n<li>Clicking the select list to open the list of options</li>\n<li>Clicking one of the options</li>\n</ol>\n\n<p>The following code will select an option by value. You could use a different locator as needed:</p>\n\n<pre><code># Open the dropdown\nbrowser.element(tag_name: 'md-select', name: 'gender').click\n\n# Select an option (by value)\nbrowser.element(tag_name: 'md-option', value: 'Female').when_present.click\n</code></pre>\n\n<p>A couple of notes:</p>\n\n<ul>\n<li>As <code>md-select</code> is not a standard element, you need to locate it using the generic <code>element</code> method.</li>\n<li>Make sure to use <code>when_present</code> (or another wait method) to ensure the options are displayed before selecting.</li>\n</ul>\n"}], "owner": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 37300871, "answer_count": 1, "score": 1, "last_activity_date": 1504118382, "creation_date": 1463556054, "last_edit_date": 1463564096, "question_id": 37292762, "link": "https://stackoverflow.com/questions/37292762/new-kind-of-select-list-found-and-dont-know-how-to-write-the-code-for-that", "title": "New kind of Select_list found and don&#39;t know how to write the code for that", "body": "<p>I have written code for select list this way b.select_list(:id,'something').select 'something' but I don't how know how to write a code for given below select list, Can anyone help me to write the code to select from this select_list</p>\n\n<pre><code>&lt;md-select tabindex=\"0\" class=\"ng-pristine ng-untouched ng-empty ng-invalid ng-invalid-required\" role=\"listbox\" aria-disabled=\"false\" aria-expanded=\"false\" aria-invalid=\"true\" aria-multiselectable=\"false\" aria-required=\"true\" aria-owns=\"select_container_5\" aria-label=\"Gender\" ng-model=\"user.gender\" name=\"gender\" required=\"\"&gt;&lt;md-select-value class=\"_md-select-value _md-select-placeholder\" id=\"select_value_label_0\"&gt;&lt;span&gt;Gender&lt;/span&gt;&lt;span class=\"_md-select-icon\" aria-hidden=\"true\"&gt;&lt;/span&gt;&lt;/md-select-value&gt;&lt;div class=\"_md-select-menu-container\" id=\"select_container_5\" aria-hidden=\"true\"&gt;&lt;md-select-menu class=\"ng-scope\"&gt;&lt;md-content&gt;\n                            &lt;md-option tabindex=\"0\" class=\"md-ink-ripple\" id=\"select_option_3\" role=\"option\" aria-selected=\"false\" value=\"Male\"&gt;&lt;div class=\"_md-text\"&gt;Male&lt;/div&gt;&lt;/md-option&gt;\n                            &lt;md-option tabindex=\"0\" class=\"md-ink-ripple\" id=\"select_option_4\" role=\"option\" aria-selected=\"false\" value=\"Female\"&gt;&lt;div class=\"_md-text\"&gt;Female&lt;/div&gt;&lt;/md-option&gt;\n                            &lt;/md-content&gt;&lt;/md-select-menu&gt;&lt;/div&gt;&lt;/md-select&gt;\n</code></pre>\n"}, {"tags": ["ruby", "syntax"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1463554093, "post_id": 37292109, "comment_id": 62108218, "body": "In what line do you get that error?"}, {"owner": {"reputation": 3020, "user_id": 4453584, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25188d50654874d1125dd754d783851b?s=128&d=identicon&r=PG&f=1", "display_name": "guitarman", "link": "https://stackoverflow.com/users/4453584/guitarman"}, "edited": false, "score": 0, "creation_date": 1463554457, "post_id": 37292109, "comment_id": 62108400, "body": "May be you have a typo in line 111: next$token"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6349242, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209913932192861/picture?type=large", "display_name": "Ian Wilder", "link": "https://stackoverflow.com/users/6349242/ian-wilder"}, "edited": false, "score": 1, "creation_date": 1463554775, "post_id": 37292173, "comment_id": 62108561, "body": "This fixed the error. I&#39;ll go through and fix the others."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 0, "last_activity_date": 1463554092, "creation_date": 1463554092, "answer_id": 37292173, "question_id": 37292109, "link": "https://stackoverflow.com/questions/37292109/ruby-syntax-error-unexpected-keyword-end-expecting-end-of-input-syntaxerror/37292173#37292173", "title": "ruby syntax error, unexpected keyword_end, expecting end-of-input (SyntaxError)", "body": "<p>The <code>do</code> in line 132 is not supposed to be there. There are many other syntax errors in the code.</p>\n"}], "owner": {"reputation": 1, "user_id": 6349242, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209913932192861/picture?type=large", "display_name": "Ian Wilder", "link": "https://stackoverflow.com/users/6349242/ian-wilder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 0, "accepted_answer_id": 37292173, "answer_count": 1, "score": -2, "last_activity_date": 1463554092, "creation_date": 1463553860, "question_id": 37292109, "link": "https://stackoverflow.com/questions/37292109/ruby-syntax-error-unexpected-keyword-end-expecting-end-of-input-syntaxerror", "title": "ruby syntax error, unexpected keyword_end, expecting end-of-input (SyntaxError)", "body": "<p>I keep getting this error (syntax error, unexpected keyword_end, expecting end-of-input) when running my code. I've looked and it seems like all the ends match up. I seem to be missing something. Any help would be appreciated.</p>\n\n<pre><code>$charClass = $charClass.to_i\n$lexeme= Array.new(100)\n$nextChar = $nextChar.to_s\n$lexLen = $lexLen.to_i\n$token = $token.to_i\n$nextToken = $nextToken.to_i\n$input = File.read('user input.txt')\n\nclass String\n    def valid_integer?\n        true if Integer(self) rescue false\n    end\nend\n\nLETTER = 0\nDIGIT = 1\nUNKNOWN = 99\n\nINT_LIT = 10\nIDENT = 11\nASSIGN_OP = 20\nADD_OP = 21\nSUB_OP = 22\nMULT_OP = 23\nDIV_OP = 24\nLEFT_PAREN = 25\nRIGHT_PAREN = 26\n\n\ndef lookup (ch)\n    case ch\n        when '('\n        addChar\n        $nextToken = LEFT_PAREN\n\n        when ')'\n        addChar\n        $nextToken = RIGHT_PAREN\n\n        when '+'\n        addChar\n        $nextToken = ADD_OP\n\n        when '-'\n        addChar\n        $nextToken = SUB_OP\n\n        when '*'\n        addChar\n        $nextToken = MULT_OP\n\n        when '/'\n        addChar\n        $nextToken = DIV_OP\n\n        else\n        addChar\n        $nextToken = EOF;\n        end\n    return $nextToken\nend\n\ndef addChar\n    if $lexLen &lt;= 98\n        $lexeme[$lexLen+1] = $nextChar;\n        $lexeme[$lexLen] = 0\n    else\n        puts \"Error - $lexeme is too long\"\n    end\nend\n\ndef getChar()\n    if (($nextChar = $input.split(\"\")) != EOF)\n        if $nextChar.match(/^[[:alpha:]]$/)\n            $charClass = LETTER\n        elsif $nextChar.valid_integer?\n            $charClass = DIGIT\n        else $charClass = UNKNOWN\n        end\n    $charClass = EOF\n    end\nend\n\ndef getNonBlank()\n    while $nextChar =~ /^\\s*$/\n    getchar()\n    end\nend\n\ndef lex\n    $lexLen = 0\n    getNonBlank\n    case $charClass\n\n        when LETTER\n        addChar\n        getChar\n        while $charClass == LETTER || $charClass == DIGIT\n            addChar\n            getChar\n            end\n        $nextToken = IDENT\n\n        when DIGIT\n        addChar\n        getChar\n        while $charClass == DIGIT\n            addChar\n            getChar\n            end\n        next$token = INT_LIT\n\n        when UNKNOWN\n        lookup($nextChar)\n        getChar\n\n        when EOF\n        $nextToken = EOF\n        $lexeme[0] = 'E'\n        $lexeme[1] = 'O'\n        $lexeme[2] = 'F'\n        $lexeme[3] = 0\n        end\n    puts \"Next $token is #{$nextToken}, Next $lexeme is #{$lexeme}\"\n    return $nextToken\nend\n\nif $input.nil?\n    puts \"ERROR = cannot open input\"\n    else\n    getChar()\n    do lex()\n        while ($nextToken != EOF)\n        end\n    end\nend\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "migration"], "comments": [{"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1463553501, "post_id": 37291913, "comment_id": 62107885, "body": "Could you show the expected output from your query?"}, {"owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "edited": false, "score": 0, "creation_date": 1463553789, "post_id": 37291913, "comment_id": 62108057, "body": "Does it matter if you keep the first or last instance? Do you only care about uniqueness based on <code>user_id</code> and <code>location</code>?"}, {"owner": {"reputation": 241, "user_id": 6340849, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/1005996102826343/picture?type=large", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/6340849/abhishek"}, "edited": false, "score": 0, "creation_date": 1463553971, "post_id": 37291913, "comment_id": 62108156, "body": "I have Edited my question. please refer to it. I want to remove duplicates and make users having same location to point to only one record in Location table. I want to achieve this through migration using ruby"}], "answers": [{"comments": [{"owner": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "reply_to_user": {"reputation": 241, "user_id": 6340849, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/1005996102826343/picture?type=large", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/6340849/abhishek"}, "edited": false, "score": 0, "creation_date": 1463555373, "post_id": 37292256, "comment_id": 62108908, "body": "@Abhishek i have given you a solution on basis of your table structure and your earlier question. In your migration what you are trying to do can you please elaborate??"}, {"owner": {"reputation": 241, "user_id": 6340849, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/1005996102826343/picture?type=large", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/6340849/abhishek"}, "edited": false, "score": 0, "creation_date": 1463555652, "post_id": 37292256, "comment_id": 62109067, "body": "Through my migration i want to delete all duplicates locations having duplicate names in the location table and keep the first one. Then I want to make all users belonging to that location to point to the one which is kept after deleting the duplicates.  i was unable to express earlier .If still not clear please  do tell me. I am stuck at this since two days :/"}, {"owner": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "reply_to_user": {"reputation": 241, "user_id": 6340849, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/1005996102826343/picture?type=large", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/6340849/abhishek"}, "edited": false, "score": 0, "creation_date": 1463555961, "post_id": 37292256, "comment_id": 62109268, "body": "@Abhishek have you tried my response?? because i am doing same with sql queries"}, {"owner": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "reply_to_user": {"reputation": 241, "user_id": 6340849, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/1005996102826343/picture?type=large", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/6340849/abhishek"}, "edited": false, "score": 0, "creation_date": 1463562978, "post_id": 37292256, "comment_id": 62113627, "body": "@Abhishek you are attached tag of <code>mysql</code> error showing you are using <code>PG</code>. PG not support to select other column than group column"}, {"owner": {"reputation": 241, "user_id": 6340849, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/1005996102826343/picture?type=large", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/6340849/abhishek"}, "edited": false, "score": 0, "creation_date": 1463563650, "post_id": 37292256, "comment_id": 62114099, "body": "Yepp I am using PG. So what should i do know? I mean is there any query to support my problem?"}, {"owner": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "reply_to_user": {"reputation": 241, "user_id": 6340849, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/1005996102826343/picture?type=large", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/6340849/abhishek"}, "edited": false, "score": 0, "creation_date": 1463564090, "post_id": 37292256, "comment_id": 62114402, "body": "@Abhishek i have change this group query you can check it now."}, {"owner": {"reputation": 241, "user_id": 6340849, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/1005996102826343/picture?type=large", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/6340849/abhishek"}, "edited": false, "score": 0, "creation_date": 1463564508, "post_id": 37292256, "comment_id": 62114682, "body": "Vishal . I am getting this error : &quot;ActiveRecord::StatementInvalid: PG::UndefinedTable: ERROR:  invalid reference to FROM-clause entry for table &quot;locations&quot; LINE 1: ... =(select id from locations as l2 where l2.name = locations....                                                              ^ HINT:  Perhaps you meant to reference the table alias &quot;l2&quot;. &quot; after modifying.."}], "tags": [], "owner": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "is_accepted": false, "score": 0, "last_activity_date": 1463564057, "last_edit_date": 1463564057, "creation_date": 1463554421, "answer_id": 37292256, "question_id": 37291913, "link": "https://stackoverflow.com/questions/37291913/ruby-code-to-direct-all-users-to-a-particular-location-instead-of-multiple-locat/37292256#37292256", "title": "ruby code to direct all users to a particular location instead of multiple locations and delete duplicates", "body": "<p>Hey you can try this way:</p>\n\n<p>1)First Update all entries with location first entry in location table using</p>\n\n<pre><code> User.joins(:location).update_all(\"location_id = select id from locations as l2 where l2.name = locations.name limit 1\")\n</code></pre>\n\n<p>Note: you can also use order by id here if sub query not return first entry from table. </p>\n\n<p>2)Destroy All entries from location table excluding first entry-</p>\n\n<p>Before this make sure all your data get updated with first entry in location table properly means first id of repeated location is updated or not. because after deletion it is not possible to recover your data again. then just destroy all your repeated entries excluding first entry using</p>\n\n<pre><code>Location.where(\"id not in (?)\", Location.select(\"min(id) as id\").group(\"name\").map(&amp;:id)).destroy_all\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "is_accepted": false, "score": 0, "last_activity_date": 1463556288, "creation_date": 1463556288, "answer_id": 37292837, "question_id": 37291913, "link": "https://stackoverflow.com/questions/37291913/ruby-code-to-direct-all-users-to-a-particular-location-instead-of-multiple-locat/37292837#37292837", "title": "ruby code to direct all users to a particular location instead of multiple locations and delete duplicates", "body": "<p>Kinda ugly, but you can use a subquery:</p>\n\n<p>First, grab the first occurrence of all records which are duplicates;</p>\n\n<pre><code>original_duplicate_locations = Location.select(\"MIN(id) AS id, name, user_id\").group(:name, :user_id).having(\"COUNT(id) &gt; 1\")\n</code></pre>\n\n<p>The extra duplicates are defined as locations having the same <code>name</code>, and <code>user_id</code> but not the same <code>id</code>:</p>\n\n<pre><code>duplicates_not_including_originals = Location.joins(\"JOIN (#{duplicates.to_sql}) dupes ON locations.name = dupes.name AND locations.user_id = dupes.user_id AND locations.id &lt;&gt; dupes.id\")\n</code></pre>\n"}], "owner": {"reputation": 241, "user_id": 6340849, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/1005996102826343/picture?type=large", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/6340849/abhishek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1463564057, "creation_date": 1463553194, "last_edit_date": 1463553934, "question_id": 37291913, "link": "https://stackoverflow.com/questions/37291913/ruby-code-to-direct-all-users-to-a-particular-location-instead-of-multiple-locat", "title": "ruby code to direct all users to a particular location instead of multiple locations and delete duplicates", "body": "<p>I am having a User model and a Location Model. Each user belongs to a particular location in the Location model. </p>\n\n<p>I am having duplicate locations in the Location table.\nand User belongs to Location.\nhow can i remove duplicate rows in the location table and keep one row and make all users belong to that single row using ruby. Both the tables are connected through location_ID attribute.</p>\n\n<p>I tried to do this through migration:</p>\n\n<pre><code> def dedupe(model, *key_attrs)\n     model.select(key_attrs).group(key_attrs).having('count(*) &gt; 1').each { |duplicates|\n       dup_rows = model.where(duplicates.attributes.slice(key_attrs)).to_a\n        # the first one we want to keep right?\n        first_one = dup_rows.shift #stored the first one\n        dup_rows.each{ |double| double.destroy } # duplicates can now be destroyed\n     }\n  end\n</code></pre>\n\n<p>But there is foreign key constraint of User not letting the migration to run. How can I achieve this?</p>\n\n<p>Current Models are :</p>\n\n<pre><code>User\nuser_id   name  location_id\n1         tim     1\n2         adam    2\n3         Joy     3\n\nLocation\nlocation_id  name\n1            NewYork\n2            NewYork\n3            NewYork\n</code></pre>\n\n<blockquote>\n  <p>Expected Ouput:</p>\n</blockquote>\n\n<pre><code>User\nuser_id   name  location_id\n1         tim     1\n2         adam    1\n3         Joy     1\n\nLocation\nlocation_id  name\n1            NewYork\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1463557559, "post_id": 37291771, "comment_id": 62110198, "body": "It seems like you&#39;re asking about transactions as well as an encoding issue. You should try to ask one question at a time."}, {"owner": {"reputation": 2814, "user_id": 1547664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rwbh6.jpg?s=128&g=1", "display_name": "Dinesh Saini", "link": "https://stackoverflow.com/users/1547664/dinesh-saini"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1463560355, "post_id": 37291771, "comment_id": 62111946, "body": "The main motive of transaction is to avoid encode error. If any issue come due to encode the partial record save so that create an issue. I did not find any better solution for encoding till now."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1463584986, "post_id": 37291771, "comment_id": 62129606, "body": "This seems like an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a>. If you&#39;re getting encoding errors and other SO questions haven&#39;t helped you solve them you should post a question describing the problem, including the exact error messages you&#39;re getting."}, {"owner": {"reputation": 2814, "user_id": 1547664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rwbh6.jpg?s=128&g=1", "display_name": "Dinesh Saini", "link": "https://stackoverflow.com/users/1547664/dinesh-saini"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1463636872, "post_id": 37291771, "comment_id": 62149872, "body": "Definitely, sometimes we need the alternate solution until we have optimized one."}], "answers": [{"comments": [{"owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "reply_to_user": {"reputation": 2814, "user_id": 1547664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rwbh6.jpg?s=128&g=1", "display_name": "Dinesh Saini", "link": "https://stackoverflow.com/users/1547664/dinesh-saini"}, "edited": false, "score": 0, "creation_date": 1463557565, "post_id": 37291953, "comment_id": 62110204, "body": "<code>create</code> will run, but it won&#39;t rollback INSERTS for all users since the query within <code>transaction</code> began running."}], "tags": [], "owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "is_accepted": true, "score": 4, "last_activity_date": 1463553653, "last_edit_date": 1463553653, "creation_date": 1463553340, "answer_id": 37291953, "question_id": 37291771, "link": "https://stackoverflow.com/questions/37291771/how-to-create-a-bulk-operation-transactions-in-ruby-on-rails/37291953#37291953", "title": "How to create a bulk operation transactions in Ruby on Rails", "body": "<p>You can wrap your <code>create</code> method in a transaction. If any INSERT fails, the whole operation will be rolled back:</p>\n\n<pre><code>Business.transaction do\n  Business.create!(all_recs)\nend\n</code></pre>\n\n<p>Note that in order for a transaction to be rolled back an ActiveRecord error has to occur as a result of the query. Thus, you'll have to use <code>create!</code> instead of <code>create</code> here to ensure an exception is thrown for invalid data.</p>\n"}], "owner": {"reputation": 2814, "user_id": 1547664, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rwbh6.jpg?s=128&g=1", "display_name": "Dinesh Saini", "link": "https://stackoverflow.com/users/1547664/dinesh-saini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 1, "accepted_answer_id": 37291953, "answer_count": 1, "score": 2, "last_activity_date": 1463553653, "creation_date": 1463552707, "last_edit_date": 1463552907, "question_id": 37291771, "link": "https://stackoverflow.com/questions/37291771/how-to-create-a-bulk-operation-transactions-in-ruby-on-rails", "title": "How to create a bulk operation transactions in Ruby on Rails", "body": "<p>The below function is working fine however If any record contain non UTF-8 character, it gives 500 error.</p>\n\n<p>Can I use transaction here for bulk operation so that either all records are saved or none of them does?</p>\n\n<p>I have try with various encoding fix issue as mentioned on stackoverflow but that doesn't work.</p>\n\n<pre><code>def convert_save(model_name, csv_data, field_name=nil)\n      target_model = model_name.classify.constantize\n      csv_file = csv_data.read\n      row_headers={}\n      counter=0;\n      all_recs=[];\n      #Thread.new do\n                CSV.parse(csv_file) do |row| \n                    if counter==0\n                        temp=row\n                        row_headers = Hash[temp.map.with_index.to_a]\n                        counter +=1\n                        next\n                    end\n                        #start fetch row and put into active record object\n                        unless row[row_headers[\"name\"]].nil?\n                            temp={}\n                            temp_time={}\n                            for name in [:business_type_id, :user_id, :name, :country_id, :latitude, :longitude, :free_shipping]\n                                temp[name] = row[row_headers[name.to_s]]\n                            end\n                            for name in [:homepage, :telephone, :email, :address, :facebook, :twitter, :google, :instagram, :pinterest, :ship_details]\n                                temp[name] = row[row_headers[name.to_s]] ||= \"\"\n                            end\n                            for name in [:category_ids, :style_ids, :filter_ids, :shipping_country_ids]\n                                temp[name] = row[row_headers[name.to_s]].try(:split, \",\") unless row_headers[name.to_s].nil?\n                            end\n                            for name in [:monday, :tuesday, :wednesday, :thursday, :friday, :saturday, :sunday, :public_holiday]\n                                temp_time[name.to_s] = row[row_headers[name.to_s]]  ||= \"\"\n                            end\n                            temp_time[\"appointment_only\"] = row[row_headers[\"appointment_only\"]]\n                            temp[\"business_timing_attributes\"] = temp_time\n                            all_recs.push(temp)\n                        end \n                end\n                Business.create(all_recs)\n                ActiveRecord::Base.connection.close\n      end\n    #end\n  end   \n</code></pre>\n"}, {"tags": ["javascript", "ruby", "rhomobile"], "comments": [{"owner": {"reputation": 3239, "user_id": 1184435, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/9871f11933ff103e488eadc603740dc0?s=128&d=identicon&r=PG", "display_name": "Devraj Gadhavi", "link": "https://stackoverflow.com/users/1184435/devraj-gadhavi"}, "edited": false, "score": 0, "creation_date": 1463555591, "post_id": 37291626, "comment_id": 62109032, "body": "Posting some code would be helpful for someone here, trying to help you. Give a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 4593, "user_id": 118862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dfa913cbcfe896af79e0484084c316b?s=128&d=identicon&r=PG", "display_name": "pfmaggi", "link": "https://stackoverflow.com/users/118862/pfmaggi"}, "edited": false, "score": 0, "creation_date": 1463639642, "post_id": 37291626, "comment_id": 62151069, "body": "are you using the default jqueryMobile JavaScript library for your .erb files?"}], "owner": {"reputation": 11, "user_id": 3067119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ea34e0831597d7ed73065e2136ecad5?s=128&d=identicon&r=PG&f=1", "display_name": "Ashwini", "link": "https://stackoverflow.com/users/3067119/ashwini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1463552060, "creation_date": 1463552060, "question_id": 37291626, "link": "https://stackoverflow.com/questions/37291626/javascript-does-not-work-when-i-redirect-control-to-another-erb-file-from-mail", "title": "JavaScript does not work when I redirect control to another .erb file from mail .erb file. How should I make it work?", "body": "<p>I am working RhoMobile app where I capture Lead details and throw Validation. On validation control goes to another .erb which generate Pop-up box to show list of errors..I have same code in both the .erb files but it does not work when validation occurs and control goes to new .erb. Please help me out in this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "passenger"], "comments": [{"owner": {"reputation": 1028, "user_id": 1524189, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/597e7c8adf75343dc2ccc1c52024d4ce?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/1524189/sean"}, "edited": false, "score": 0, "creation_date": 1464985476, "post_id": 37291163, "comment_id": 62728260, "body": "Did you get this working? I&#39;m using ruby 2.3.0 and having the same problem."}, {"owner": {"reputation": 3590, "user_id": 1494245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50a2dcc33b58918f27664b7646d92b7?s=128&d=identicon&r=PG", "display_name": "Sean Huber", "link": "https://stackoverflow.com/users/1494245/sean-huber"}, "edited": false, "score": 0, "creation_date": 1465955714, "post_id": 37291163, "comment_id": 63112808, "body": "I&#39;m seeing the same problem (same exact ruby/rails version)"}], "answers": [{"tags": [], "owner": {"reputation": 692, "user_id": 639450, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c573004fdf95b0286ddaed79aae0e871?s=128&d=identicon&r=PG", "display_name": "dumP", "link": "https://stackoverflow.com/users/639450/dump"}, "is_accepted": false, "score": 1, "last_activity_date": 1463742800, "creation_date": 1463742800, "answer_id": 37345227, "question_id": 37291163, "link": "https://stackoverflow.com/questions/37291163/unable-to-install-passenger-module/37345227#37345227", "title": "Unable to install passenger module", "body": "<p>This works in my case:</p>\n\n<p>Remove ruby and rvm - then Reinstall. Try again.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 7084557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/211328ce1080c5dacbedd090ffd54b6f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea Zauli", "link": "https://stackoverflow.com/users/7084557/andrea-zauli"}, "is_accepted": false, "score": 2, "last_activity_date": 1477646080, "creation_date": 1477646080, "answer_id": 40301831, "question_id": 37291163, "link": "https://stackoverflow.com/questions/37291163/unable-to-install-passenger-module/40301831#40301831", "title": "Unable to install passenger module", "body": "<p>If not resolved yet, you can try:</p>\n\n<blockquote>\n  <p>gem update --system</p>\n</blockquote>\n\n<p>and then try to compile again.</p>\n"}], "owner": {"reputation": 614, "user_id": 3300422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/6kMVK.jpg?s=128&g=1", "display_name": "Nataraj", "link": "https://stackoverflow.com/users/3300422/nataraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 1, "answer_count": 2, "score": 7, "last_activity_date": 1477646080, "creation_date": 1463550060, "question_id": 37291163, "link": "https://stackoverflow.com/questions/37291163/unable-to-install-passenger-module", "title": "Unable to install passenger module", "body": "<p>I am trying to configure the passenger and Nginx for rails application .</p>\n\n<p>I am getting compilation error while execute the passenger command.</p>\n\n<p><strong>Ruby version :</strong>\nruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux]</p>\n\n<p><strong>Rails version</strong>\nRails 4.2.6</p>\n\n<p><strong>Error message:-</strong></p>\n\n<pre><code># passenger-install-nginx-module\n/usr/local/rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/specification.rb:2158:in `method_missing': undefined method `this' for #&lt;Gem::Specification:0x7cab3c passenger-5.0.28&gt; (NoMethodError)\n        from /usr/local/rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/specification.rb:1057:in `find_active_stub_by_path'\n        from /usr/local/rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:64:in `require'\n        from /usr/local/rvm/gems/ruby-2.3.1/gems/passenger-5.0.28/bin/passenger-install-nginx-module:33:in `&lt;top (required)&gt;'\n        from /usr/local/rvm/gems/ruby-2.3.1/bin/passenger-install-nginx-module:23:in `load'\n        from /usr/local/rvm/gems/ruby-2.3.1/bin/passenger-install-nginx-module:23:in `&lt;main&gt;'\n        from /usr/local/rvm/gems/ruby-2.3.1/bin/ruby_executable_hooks:15:in `eval'\n        from /usr/local/rvm/gems/ruby-2.3.1/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n\n<p>could you please help me on this matter.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 5300398, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/rm6HJ.jpg?s=128&g=1", "display_name": "Akhil Sharma", "link": "https://stackoverflow.com/users/5300398/akhil-sharma"}, "edited": false, "score": 0, "creation_date": 1463570527, "post_id": 37291705, "comment_id": 62118812, "body": "Still trying multiple ways to make it work.. when &quot;css_root&quot; files are placed  &quot;/vendor&quot; folder an error of route not found is displayed..any ideas?"}], "tags": [], "owner": {"reputation": 2634, "user_id": 1210949, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vAL35.jpg?s=128&g=1", "display_name": "Albin", "link": "https://stackoverflow.com/users/1210949/albin"}, "is_accepted": false, "score": 1, "last_activity_date": 1463552452, "last_edit_date": 1495539845, "creation_date": 1463552452, "answer_id": 37291705, "question_id": 37290691, "link": "https://stackoverflow.com/questions/37290691/different-views-for-different-subdomains-rails/37291705#37291705", "title": "Different views for different subdomains rails", "body": "<p>You could implement the same logic as described in step 2 in the and combine it with some of answers suggested in this question:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/4301249/how-to-change-the-default-path-of-view-files-in-a-rails-3-controller\">How to change the default path of view files in a Rails 3 controller?</a></p>\n\n<p>And then you could have different folders for your different sub domains.</p>\n"}], "owner": {"reputation": 175, "user_id": 5300398, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/rm6HJ.jpg?s=128&g=1", "display_name": "Akhil Sharma", "link": "https://stackoverflow.com/users/5300398/akhil-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463552452, "creation_date": 1463547846, "last_edit_date": 1463548403, "question_id": 37290691, "link": "https://stackoverflow.com/questions/37290691/different-views-for-different-subdomains-rails", "title": "Different views for different subdomains rails", "body": "<p>Hi I am building a SAAS software with ruby on rails in which users can have different microsites just like tumblr does it.</p>\n\n<p>I am able to use different CSS and JS for different subdomains by following the article </p>\n\n<p><a href=\"http://blog.nbostech.com/2015/09/different-theming-for-different-subdomains-domains-in-ruby-on-rails-application/\" rel=\"nofollow\">http://blog.nbostech.com/2015/09/different-theming-for-different-subdomains-domains-in-ruby-on-rails-application/</a></p>\n\n<p>But I want to use different HTML view files based on the subdomain.Can someone please point me to the right direction on how can this be achieved. Have hit a roadblock with this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "doorkeeper", "jsonapi-resources"], "owner": {"reputation": 5067, "user_id": 993554, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/UV0L9.jpg?s=128&g=1", "display_name": "Victor Ferreira", "link": "https://stackoverflow.com/users/993554/victor-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 244, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1463548417, "creation_date": 1463547408, "last_edit_date": 1463548417, "question_id": 37290620, "link": "https://stackoverflow.com/questions/37290620/setting-up-a-simple-signup-signin-with-doorkeeper-and-jsonapi", "title": "Setting up a simple signup/signin with Doorkeeper and JSONAPI", "body": "<p><strong>Short story</strong></p>\n\n<p>I'm having a difficult time to add Doorkeeper to my working JSONAPI project.</p>\n\n<p>Since I'm new to it, I think one of the biggest problems is the understanding of the framework.</p>\n\n<p>Basically I need any further requests to contain an AccessToken so I can authorize them to use my app. The first two things, of course, will be the registration and login.</p>\n\n<p>After some reading I found out Doorkeeper assumes (is it correct?) a Resource Server and a Authorization Server. But I am both of them. And this is driving me crazy.</p>\n\n<p>I don't exactly know what I have to do and what is optional since every implementation seems to have its own features and differences.</p>\n\n<p><strong>Problem starts here</strong></p>\n\n<p>So following this guide <a href=\"https://github.com/doorkeeper-gem/doorkeeper/wiki/Interacting-as-an-OAuth-client-with-Doorkeeper\" rel=\"nofollow\">https://github.com/doorkeeper-gem/doorkeeper/wiki/Interacting-as-an-OAuth-client-with-Doorkeeper</a></p>\n\n<p>I first created an app (I believe I have to create an app to my own) and provided a <code>Redirect URI</code> that isn't yet created (I added <a href=\"http://localhost:3000/panel\" rel=\"nofollow\">http://localhost:3000/panel</a>, but there is nothing responding to it). And I left <code>scopes</code> blank.</p>\n\n<p>Then the guide mentions a <code>client_id</code>... I'm assuming it is the * application id* the Application generator provided. </p>\n\n<p>And it also mentions an authorization code that I still don't own. Apparently I need to 'authorize' the app. There is a button 'authorize' but when I click it it throws an error </p>\n\n<blockquote>\n  <p>fail \"Please configure doorkeeper resource_owner_authenticator block located in #{<strong>FILE</strong>}\"</p>\n</blockquote>\n\n<p>And the configuration file <code>initializers/doorkeeper.rb</code> is all commented. But the official guide (<a href=\"https://github.com/doorkeeper-gem/doorkeeper#configuration\" rel=\"nofollow\">https://github.com/doorkeeper-gem/doorkeeper#configuration</a>) doesn't mention any configuration. </p>\n\n<p>What is the basic configuration for Doorkeeper? Any other insights about my project that would help me?</p>\n\n<p><strong>@edit</strong></p>\n\n<p>Alright, I managed to give one step ahead. \nRemoving that line that thew the error and uncommenting the last line of that same block</p>\n\n<pre><code>User.find_by_id(session[:user_id]) || redirect_to(new_user_session_url)\n</code></pre>\n\n<p>The error changes. Now it says it doesn't recognize this variable <code>new_user_session_url</code>. Changing to the one suggested in this video:</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=zN9BylV81rw\" rel=\"nofollow\">https://www.youtube.com/watch?v=zN9BylV81rw</a> </p>\n\n<p><code>routes.login_url</code> and only <code>login_url</code> (says <code>routes</code> is not defined) didn't work too. Still the same error.</p>\n\n<p>I think I'm back to my first questions. I'm not sure that is optional and what is not, and what the gem created by default and what i have to do myself. </p>\n\n<p>What do I need to do at this point? </p>\n"}, {"tags": ["ruby", "react-native", "appium"], "answers": [{"tags": [], "owner": {"reputation": 34704, "user_id": 1746118, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/a4a3P.png?s=128&g=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/1746118/naman"}, "is_accepted": false, "score": 0, "last_activity_date": 1463552618, "last_edit_date": 1495541280, "creation_date": 1463547013, "answer_id": 37290550, "question_id": 37290124, "link": "https://stackoverflow.com/questions/37290124/testing-react-native-with-appium/37290550#37290550", "title": "Testing React native with appium", "body": "<ol>\n<li><p>Could you change your code as below and try :</p>\n\n<pre><code>mobileElement = find_element(:xpath, '//android.widget.LinearLayout[1]/android.widget.FrameLayout[1]/android.widget.FrameLayout[1]/android.view.ViewGroup[1]/android.widget.EditText[1]');\nmobileElement.send_keys \"hello world\";\n</code></pre></li>\n<li><p>And the other possible attributes for react native component that I've found could be used are <code>class</code> and <code>css</code> of the element. You can find these using <strong><code>chrome://inspect/#devices</code></strong> and inspecting the elements.</p></li>\n</ol>\n\n<p><strong><em>Note</em></strong> : To add to it even I have been looking for an appropriate answer to a question here(have added bounty as well) : <a href=\"https://stackoverflow.com/questions/33937898/accessing-react-elements-using-appium-for-automation\">Accessing React Elements using Appium for Automation</a></p>\n"}, {"comments": [{"owner": {"reputation": 3676, "user_id": 1226072, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/eb26f94528ca07970f54a7e1b65163b6?s=128&d=identicon&r=PG", "display_name": "goldylucks", "link": "https://stackoverflow.com/users/1226072/goldylucks"}, "edited": false, "score": 0, "creation_date": 1483549011, "post_id": 37295431, "comment_id": 70144209, "body": "how do u find the accessibility_id in android?"}], "tags": [], "owner": {"reputation": 273, "user_id": 2146748, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/Zzzal.jpg?s=128&g=1", "display_name": "RobbyWH", "link": "https://stackoverflow.com/users/2146748/robbywh"}, "is_accepted": false, "score": 0, "last_activity_date": 1463563618, "creation_date": 1463563618, "answer_id": 37295431, "question_id": 37290124, "link": "https://stackoverflow.com/questions/37290124/testing-react-native-with-appium/37295431#37295431", "title": "Testing React native with appium", "body": "<p>Based on this link : <a href=\"https://github.com/facebook/react-native/issues/7135\" rel=\"nofollow\">https://github.com/facebook/react-native/issues/7135</a></p>\n\n<p>The workaround for this problem : use both accessible and accessibleLabel on your views </p>\n\n<p>DOC on accessiblity label: <a href=\"https://facebook.github.io/react-native/docs/accessibility.html#accessibilitylabel-ios-android\" rel=\"nofollow\">https://facebook.github.io/react-native/docs/accessibility.html#accessibilitylabel-ios-android</a></p>\n\n<p>On my react component :</p>\n\n<pre><code>&lt;TextInput accessible={true} accessibilityLabel={Tap Me}&gt;&lt;/TextInput&gt;\n</code></pre>\n\n<p>On my script Test : </p>\n\n<pre><code>mobileElement = find_Element(accessibilty_id, \"Tap Me\")\nmobileElement.send_keys \"hello world\"\n</code></pre>\n"}], "owner": {"reputation": 273, "user_id": 2146748, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/Zzzal.jpg?s=128&g=1", "display_name": "RobbyWH", "link": "https://stackoverflow.com/users/2146748/robbywh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1404, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1463563618, "creation_date": 1463544498, "question_id": 37290124, "link": "https://stackoverflow.com/questions/37290124/testing-react-native-with-appium", "title": "Testing React native with appium", "body": "<p>I have made sript test for appium with ruby :</p>\n\n<pre><code>require 'rubygems'\nrequire 'appium_lib'\nrequire 'selenium-webdriver'\n\ncapabilities = {\n    'appium-version': '1.0',\n    'platformName': 'Android',\n    'platformVersion': '4.4',\n    'deviceName': 'TestAppium',\n    'app': '/Users/AwesomeProject/android/app/build/outputs/apk/app-debug.apk',\n}\n\nserver_url = \"http://0.0.0.0:4723/wd/hub\"\n\nAppium::Driver.new(caps: capabilities).start_driver\nAppium.promote_appium_methods Object\n\nfind_element(:xpath, \"//android.widget.LinearLayout[1]/android.widget.FrameLayout[1]/android.widget.FrameLayout[1]/android.view.ViewGroup[1]/android.widget.EditText[1]\").send_keys \"hello world\"\nback\n find_element(:xpath, \"//android.widget.LinearLayout[1]/android.widget.FrameLayout[1]/android.widget.FrameLayout[1]/android.view.ViewGroup[1]/android.widget.EditText[1]\").send_keys \"hello world\"\n\ndriver_quit\n</code></pre>\n\n<p>The returning result is : </p>\n\n<pre><code>{ \n   \"status\": 7,\n   \"value\": \"Could not find element using supplied strategy.\"\n}\n</code></pre>\n\n<p>My question is :</p>\n\n<ol>\n<li><p>why i could not find element using supplied strategy ?</p></li>\n<li><p>There is no \"id\" attribute for TextInput React Native Component. Can i find element by id for the TextInput React Native Component ?</p></li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby", "migration"], "comments": [{"owner": {"reputation": 639, "user_id": 1956964, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/0jQ4l.png?s=128&g=1", "display_name": "dr. strange", "link": "https://stackoverflow.com/users/1956964/dr-strange"}, "edited": false, "score": 0, "creation_date": 1463548137, "post_id": 37290074, "comment_id": 62105698, "body": "It is b&#39;coz duplicate records are present in DB, At first delete duplicate records from DB then try to run."}, {"owner": {"reputation": 241, "user_id": 6340849, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/1005996102826343/picture?type=large", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/6340849/abhishek"}, "reply_to_user": {"reputation": 639, "user_id": 1956964, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/0jQ4l.png?s=128&g=1", "display_name": "dr. strange", "link": "https://stackoverflow.com/users/1956964/dr-strange"}, "edited": false, "score": 0, "creation_date": 1463549880, "post_id": 37290074, "comment_id": 62106326, "body": "I want to delete it through a migration. find all the duplicates through a ruby code and destroy them"}], "answers": [{"comments": [{"owner": {"reputation": 241, "user_id": 6340849, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/1005996102826343/picture?type=large", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/6340849/abhishek"}, "edited": false, "score": 0, "creation_date": 1463545953, "post_id": 37290289, "comment_id": 62105001, "body": "1. I cant start from the scratch as it is in production. 2. deleting indivdually is cumbersome as there are lots of duplicates. 3. Names cannot be changed. Is there any other way like writing some few lines of code in migration itself such that duplicates can be removed and unique constraint can be added?"}], "tags": [], "owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "is_accepted": false, "score": 0, "last_activity_date": 1463545508, "creation_date": 1463545508, "answer_id": 37290289, "question_id": 37290074, "link": "https://stackoverflow.com/questions/37290074/adding-unique-constraint-through-migration-not-working/37290289#37290289", "title": "Adding unique constraint through migration not working", "body": "<p>So you do not want any duplicate names for any two entries in your locations modal but the duplicates already exist? You will have to get rid of the duplicates by either:</p>\n\n<ol>\n<li><p>deleting the data in the model and starting over from scratch</p></li>\n<li><p>deleting the individual locations that have duplicate names </p></li>\n<li><p>changing the names of the locations that are duplicates.  </p></li>\n</ol>\n\n<p>All of which can be done easily in rails/heroku console. </p>\n\n<p>Also, you can add this code into your Locations Model:</p>\n\n<pre><code>class Location &lt; ActiveRecord::Base\n   validates_presence_of :name\n   validates_uniqueness_of :name\nend\n</code></pre>\n"}], "owner": {"reputation": 241, "user_id": 6340849, "user_type": "registered", "accept_rate": 37, "profile_image": "https://graph.facebook.com/1005996102826343/picture?type=large", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/6340849/abhishek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 559, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463545508, "creation_date": 1463544152, "question_id": 37290074, "link": "https://stackoverflow.com/questions/37290074/adding-unique-constraint-through-migration-not-working", "title": "Adding unique constraint through migration not working", "body": "<p>I am a novice ruby programmer working on a rails api. Problem is api is in production and now I want to add unique constraint to one of the columns in a model. Currently Duplicate entries are allowed and i want to make that column unique.</p>\n\n<p>So I added two fixtures with same name like this :</p>\n\n<pre><code>two:\n  name: MyString2\n  location: \n  status: 2\n\nthree:\n  name: MyString2\n  location:\n  status: 1 \n</code></pre>\n\n<p>And then I tried to run a migration like this:</p>\n\n<pre><code>class AddUniqueToLocationColumnName &lt; ActiveRecord::Migration\n\n  class User &lt; ActiveRecord::Base\n  end\n\n  def self.up\n    remove_index :locations, column: :name\n    add_index :locations, :name, unique: true\n  end\n\n  def self.down\n    remove_index :locations, column: :name # remove unique index\n    add_index :locations, :name # adds just index, without unique\n  end\nend\n</code></pre>\n\n<p>But Its showing error: \"duplicates exists in database. Migration fails.\"\nSame is the problem. Already I have duplicates in production table. And I want to add a unique constraint to column \"name\" in table \"locations\" . How can i make this column unique? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "json-api", "jsonapi-resources"], "answers": [{"tags": [], "owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "is_accepted": false, "score": 1, "last_activity_date": 1464097128, "creation_date": 1464097128, "answer_id": 37415346, "question_id": 37289690, "link": "https://stackoverflow.com/questions/37289690/jsonapi-resources-gem-not-finding-resource-after-adding-namespace/37415346#37415346", "title": "JSONAPI Resources gem not finding resource after adding namespace", "body": "<p>For your <code>CategoriesController</code>, try inheriting from <code>JSONAPI::ResourceController</code> instead of <code>ApplicationController</code>.</p>\n\n<pre><code>class Api::V1::CategoriesController &lt; JSONAPI::ResourceController\n</code></pre>\n"}], "owner": {"reputation": 5067, "user_id": 993554, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/UV0L9.jpg?s=128&g=1", "display_name": "Victor Ferreira", "link": "https://stackoverflow.com/users/993554/victor-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 679, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1464097128, "creation_date": 1463541694, "question_id": 37289690, "link": "https://stackoverflow.com/questions/37289690/jsonapi-resources-gem-not-finding-resource-after-adding-namespace", "title": "JSONAPI Resources gem not finding resource after adding namespace", "body": "<p>I tried to namespace my resources and controllers, but now when I try to run my server it keeps getting this error:</p>\n\n<blockquote>\n  <p>JSONAPI: Could not find resource 'categories'. (Class CategoryResource\n  not found)</p>\n</blockquote>\n\n<p><strong>controller/api/v1/categories_controller.rb</strong></p>\n\n<pre><code>class Api::V1::CategoriesController &lt; ApplicationController\nend\n</code></pre>\n\n<p><strong>resources/api/v1/category_resource.rb</strong></p>\n\n<pre><code>class Api::V1::CategoryResource &lt; JSONAPI::Resource\n    attribute :name\n    has_many :posts\nend\n</code></pre>\n\n<p>I don't know what is triggering this error. I even removed the files and the reference to Category from the <code>routes.rb</code></p>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>namespace :api do\n    namespace :v1 do\n      jsonapi_resources :categories\n    end\n  end\n</code></pre>\n\n<p>This started after I moved the files from the root of <code>controllers</code> and <code>resources</code> to <code>api/v1</code>. What is wrong with my project?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "sequel"], "comments": [{"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 2, "creation_date": 1463555915, "post_id": 37289678, "comment_id": 62109245, "body": "Michael Gaskill already provded the solution; just an explanation, <b>why</b> your approach failed: By using string interpolation (<code>&quot;#{....}&quot;</code>), the method <code>to_s</code>  is silently applied to what is insde the interpolation braces, and <code>Array#to_s</code> produces the unwanted brackets."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1468890489, "post_id": 37289678, "comment_id": 64301433, "body": "To emphasize: do not use interpolation to add the values. Use <a href=\"http://sequel.jeremyevans.net/rdoc/files/README_rdoc.html#label-Inserting+Records\" rel=\"nofollow noreferrer\">the built-in and idiomatic methods</a> in Sequel to add data. Sequel will do the right thing and you&#39;ll be happier you did. ORMs, like Sequel, are pretty powerful creatures these days and it pays to learn them. Don&#39;t treat them like a simple driver."}], "answers": [{"comments": [{"owner": {"reputation": 316, "user_id": 1569540, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7bc6fd8ed3a49dc4b03d4ab0d43de2c7?s=128&d=identicon&r=PG", "display_name": "Julinho da Adelaide", "link": "https://stackoverflow.com/users/1569540/julinho-da-adelaide"}, "edited": false, "score": 0, "creation_date": 1463612398, "post_id": 37291784, "comment_id": 62143713, "body": "Special thanks to @Michal Gaskill, that really worked for me."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1468890686, "post_id": 37291784, "comment_id": 64301481, "body": "The better path is to take advantage of Sequel&#39;s ability to build the query/insert statement: <a href=\"http://sequel.jeremyevans.net/rdoc/files/README_rdoc.html#label-Inserting+Records\" rel=\"nofollow noreferrer\">sequel.jeremyevans.net/rdoc/files/&hellip;</a>"}], "tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": true, "score": 2, "last_activity_date": 1463552748, "creation_date": 1463552748, "answer_id": 37291784, "question_id": 37289678, "link": "https://stackoverflow.com/questions/37289678/map-function-returning-variables-with-brackets-and-quotes/37291784#37291784", "title": "Map function returning variables with brackets and quotes", "body": "<p>You're using string interpolation in an improper way to include values into an SQL statement.</p>\n\n<p>This will work, instead:</p>\n\n<pre><code>query = \"INSERT INTO pd_activities (id) VALUES (\"#{query_values.join(', ')}\")\"\n</code></pre>\n\n<p>If the values in <code>activities</code> are integers, you can avoid string interpolation in the <code>activities.map</code> step.  To do this, simply use this:</p>\n\n<pre><code>query_values = activities.map {|activity| activity['id'] }\n</code></pre>\n\n<p>If <code>activities = [12, 34, 98, 142]</code>, this will produce:</p>\n\n<pre><code>\"INSERT INTO pd_activities (id) VALUES (12, 34, 98, 142)\"\n</code></pre>\n\n<p>However, if the values in <code>activities</code> are strings, you should do this instead:</p>\n\n<pre><code>query_values = activities.map {|activity| \"'#{activity['id']}'\" }\n</code></pre>\n\n<p>If <code>activities = [\"12\", \"34\", \"98\", \"142\"]</code>, this will produce:</p>\n\n<pre><code>\"INSERT INTO pd_activities (id) VALUES ('12', '34', '98', '142')\"\n</code></pre>\n"}], "owner": {"reputation": 316, "user_id": 1569540, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7bc6fd8ed3a49dc4b03d4ab0d43de2c7?s=128&d=identicon&r=PG", "display_name": "Julinho da Adelaide", "link": "https://stackoverflow.com/users/1569540/julinho-da-adelaide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 526, "favorite_count": 0, "accepted_answer_id": 37291784, "answer_count": 1, "score": 1, "last_activity_date": 1468890430, "creation_date": 1463541579, "last_edit_date": 1468890430, "question_id": 37289678, "link": "https://stackoverflow.com/questions/37289678/map-function-returning-variables-with-brackets-and-quotes", "title": "Map function returning variables with brackets and quotes", "body": "<p>I'm  trying to use the <code>pipedrive-ruby</code> and Sequel gems to retrieve and store data from a JSON hash to a database, but it always returns values with quotes in every cell and square brackets at the beginning and end of the string. How can I solve this?</p>\n\n<p>Code:</p>\n\n<pre><code>query_values = activities.map do |activity|\n \"#{activity['id']}\"\nend\n\nquery = \"INSERT INTO pd_activities (id) VALUES (#{query_values})\"\ninsert_ds = DB[query]\ninsert_ds.insert\n</code></pre>\n\n<p>This is the error when trying to insert into the database:</p>\n\n<pre><code>/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/sequel-4.34.0/lib/sequel/adapters/postgres.rb:186:in `async_exec': PG::SyntaxError: ERROR:  syntax error at or near \"[\" (Sequel::DatabaseError)\nLINE 1: INSERT INTO pd_activities (id) VALUES ([\"72943\", \"73532\", \"7...\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 429, "user_id": 6353216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/886579f961747030a6f8026cd739e048?s=128&d=identicon&r=PG&f=1", "display_name": "przemod", "link": "https://stackoverflow.com/users/6353216/przemod"}, "is_accepted": false, "score": 0, "last_activity_date": 1463663110, "creation_date": 1463663110, "answer_id": 37324092, "question_id": 37289667, "link": "https://stackoverflow.com/questions/37289667/named-scope-overriding-attributes-rails/37324092#37324092", "title": "named scope overriding attributes rails", "body": "<p>By creating named scope on <code>Container</code> model you will always get all <code>Containers</code> that contain at least one <code>Paper</code> with given status.</p>\n\n<p>But after you call <code>@containers.first.papers</code> you will get all papers of that <code>Container</code> object regardless their (papers) statuses. That is expected behaviour.\nI have similar structure and I can't replicate replacing statuses in my objects.</p>\n\n<p>To be sure what is going on use <code>explain</code> method to show your SQL query.\nAnd please paste the code that you use to collect <code>Container</code> objects and their <code>Papers</code>.</p>\n\n<p>And last thought, maybe it would be better to move the named scope to <code>Paper</code> model? That way you may collect <code>Papers</code> with statuses you care about with code:</p>\n\n<p><code>Container.first.papers.by_status(statuses)</code></p>\n\n<p>I hope that my answer will somehow help you. Cheers!</p>\n"}], "owner": {"reputation": 315, "user_id": 3186332, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/1dbe0e729db871e065ba02b2dc99f0b2?s=128&d=identicon&r=PG&f=1", "display_name": "user3186332", "link": "https://stackoverflow.com/users/3186332/user3186332"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463663110, "creation_date": 1463541495, "question_id": 37289667, "link": "https://stackoverflow.com/questions/37289667/named-scope-overriding-attributes-rails", "title": "named scope overriding attributes rails", "body": "<p>I have a model of <code>Container</code> which has_and_belongs_to_many <code>Papers</code> which has_one <code>Status</code>. </p>\n\n<p>I want to have a named scope on the <code>Container</code> model that will give me all the containers populated with only the papers containing a particular set of statuses. </p>\n\n<p>I have something like the following (pseudocode) on the Container model</p>\n\n<pre><code>scope :by_status, -&gt; (statuses) do {\n    joins(papers:[:paper_statuses]).where('paper_statuses.tag in (?)', statuses) if statuses.present?\n}\n</code></pre>\n\n<p>The return that I get is all of the papers in the container regardless of status.. however the strange part is all of the statuses become what I pass in as long as one exists. What would cause this and how can I prevent the overwriting and loading all of the papers in my container object if all I care about are the ones with the particular statuses?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 104340, "user_id": 23649, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7e9f543f0ffdb7c9a899e628fe76e7f3?s=128&d=identicon&r=PG", "display_name": "jtbandes", "link": "https://stackoverflow.com/users/23649/jtbandes"}, "edited": false, "score": 0, "creation_date": 1463541468, "post_id": 37289650, "comment_id": 62103782, "body": "You want it to be one line, but you want it to be on multiple lines?"}, {"owner": {"reputation": 11990, "user_id": 492767, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/446bc7fb73e79a187d60c977a7092527?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/492767/victor"}, "reply_to_user": {"reputation": 104340, "user_id": 23649, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7e9f543f0ffdb7c9a899e628fe76e7f3?s=128&d=identicon&r=PG", "display_name": "jtbandes", "link": "https://stackoverflow.com/users/23649/jtbandes"}, "edited": false, "score": 0, "creation_date": 1463542133, "post_id": 37289650, "comment_id": 62103918, "body": "@jtbandes I want it to be one line, but want it to be more readable by spanning it multiple lines in the code."}], "answers": [{"tags": [], "owner": {"reputation": 16527, "user_id": 3124288, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6fa5b34aa1b0d8508347f48a8d596399?s=128&d=identicon&r=PG&f=1", "display_name": "JKillian", "link": "https://stackoverflow.com/users/3124288/jkillian"}, "is_accepted": false, "score": 2, "last_activity_date": 1463611566, "last_edit_date": 1495542700, "creation_date": 1463541730, "answer_id": 37289700, "question_id": 37289650, "link": "https://stackoverflow.com/questions/37289650/tidy-long-string-in-ruby/37289700#37289700", "title": "Tidy long string in Ruby", "body": "<p>You could use an array and join the strings:</p>\n\n<pre><code>request_url = [\n  \"http://api.abc.com/v3/avail?\",\n  \"&amp;rev=#{ENV['REV']}\",\n  \"&amp;key=#{ENV['KEY']}\",\n  \"&amp;locale=en_US\",\n  \"&amp;currencyCode=#{currency}\",\n  \"&amp;arrivalDate=#{check_in}\",\n  \"&amp;departureDate=#{check_out}\",\n  \"&amp;includeDetails=true\",\n  \"&amp;includeRoomImages=true\",\n  \"&amp;room1=#{total_guests}\",\n].join('')\n</code></pre>\n\n<p>Even easier, you can use <a href=\"https://stackoverflow.com/a/1274709/3124288\">the <code>%W</code> array shorthand notation</a> so you don't have to write out all the quotes and commas:</p>\n\n<pre><code>request_url = %W(\n  http://api.abc.com/v3/avail?\n  &amp;rev=#{ENV['REV']}\n  &amp;key=#{ENV['KEY']}\n  &amp;locale=en_US\n  &amp;currencyCode=#{currency}\n  &amp;arrivalDate=#{check_in}\n  &amp;departureDate=#{check_out}\n  &amp;includeDetails=true\n  &amp;includeRoomImages=true\n  &amp;room1=#{total_guests}\n).join('')\n</code></pre>\n\n<p>Edit: Of course, <a href=\"https://stackoverflow.com/a/37290886/3124288\">spickermann makes a very good point</a> above on better ways to accomplish this specifically for URLs. However, if you're not constructing a URL and just working with strings, the above methods should work fine.</p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 4, "last_activity_date": 1463553940, "last_edit_date": 1463553940, "creation_date": 1463548876, "answer_id": 37290886, "question_id": 37289650, "link": "https://stackoverflow.com/questions/37289650/tidy-long-string-in-ruby/37290886#37290886", "title": "Tidy long string in Ruby", "body": "<p>I would prefer to not build URI queries by joining strings, because that might lead to URLs that are not correctly encoded (see a list of <a href=\"https://en.wikipedia.org/wiki/Percent-encoding#Percent-encoding_reserved_characters\" rel=\"nofollow\">characters that need to be encoded</a> in URIs).</p>\n\n<p>There is the <a href=\"http://api.rubyonrails.org/classes/Hash.html#method-i-to_query\" rel=\"nofollow\"><code>Hash#to_query</code></a> method in Ruby on Rails that does exactly what you need and it ensure that the parameters are correctly URI encoded:</p>\n\n<pre><code>base_url = 'http://api.abc.com/v3/avail'\narguments = {\n  rev:               ENV['REV'],\n  key:               ENV['KEY'],\n  locale:            'en_US',\n  currencyCode:      currency,\n  arrivalDate:       check_in,\n  departureDate:     check_out,\n  includeDetails:    true,\n  includeRoomImages: true,\n  room1:             total_guests\n}\nrequest_url = \"#{base_url}?#{arguments.to_query}\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8509, "user_id": 265940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e65d5a8983bbd47e66361a7ab68be659?s=128&d=identicon&r=PG", "display_name": "Gerry Shaw", "link": "https://stackoverflow.com/users/265940/gerry-shaw"}, "is_accepted": false, "score": 0, "last_activity_date": 1463613177, "creation_date": 1463613177, "answer_id": 37311516, "question_id": 37289650, "link": "https://stackoverflow.com/questions/37289650/tidy-long-string-in-ruby/37311516#37311516", "title": "Tidy long string in Ruby", "body": "<p>You can extend strings in Ruby using the line continuation operator. Example:</p>\n\n<pre><code>request_url = \"http://api.abc.com/v3/avail?\" \\\n  \"&amp;rev=#{ENV['REV']}\" \\\n  \"&amp;key=#{ENV['KEY']}\"\n</code></pre>\n"}], "owner": {"reputation": 11990, "user_id": 492767, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/446bc7fb73e79a187d60c977a7092527?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/492767/victor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 37290886, "answer_count": 3, "score": 0, "last_activity_date": 1463613177, "creation_date": 1463541380, "question_id": 37289650, "link": "https://stackoverflow.com/questions/37289650/tidy-long-string-in-ruby", "title": "Tidy long string in Ruby", "body": "<p>I have a method in Ruby, which needs an API URL:</p>\n\n<pre><code>  request_url = \"http://api.abc.com/v3/avail?rev=#{ENV['REV']}&amp;key=#{ENV['KEY']}&amp;locale=en_US&amp;currencyCode=#{currency}&amp;arrivalDate=#{check_in}&amp;departureDate=#{check_out}&amp;includeDetails=true&amp;includeRoomImages=true&amp;room1=#{total_guests}\"\n</code></pre>\n\n<p>I want to format it to be more readable. It should take arguments.</p>\n\n<pre><code>request_url = \"http://api.abc.com/v3/avail?\n  &amp;rev=#{ENV['REV']}\n  &amp;key=#{ENV['KEY']}\n  &amp;locale=en_US\n  &amp;currencyCode=#{currency}\n  &amp;arrivalDate=#{check_in}\n  &amp;departureDate=#{check_out}\n  &amp;includeDetails=true\n  &amp;includeRoomImages=true\n  &amp;room1=#{total_guests}\"\n</code></pre>\n\n<p>But of course there's line break. I tried heredoc, but I want it to be in one line.</p>\n"}, {"tags": ["ruby", "exit"], "comments": [{"owner": {"reputation": 129, "user_id": 6005194, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/0mpdx.jpg?s=128&g=1", "display_name": "Pixelz", "link": "https://stackoverflow.com/users/6005194/pixelz"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1463542048, "post_id": 37289452, "comment_id": 62103901, "body": "&#39;Whats causing the program to shutdown?&#39; is the question"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 6005194, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/0mpdx.jpg?s=128&g=1", "display_name": "Pixelz", "link": "https://stackoverflow.com/users/6005194/pixelz"}, "edited": false, "score": 0, "creation_date": 1463543884, "post_id": 37289765, "comment_id": 62104435, "body": "I have 250Gb. lets hope thats enough."}, {"owner": {"reputation": 129, "user_id": 6005194, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/0mpdx.jpg?s=128&g=1", "display_name": "Pixelz", "link": "https://stackoverflow.com/users/6005194/pixelz"}, "edited": false, "score": 0, "creation_date": 1463576660, "post_id": 37289765, "comment_id": 62123298, "body": "Welp. Im getting a terabyte drive."}], "tags": [], "owner": {"reputation": 2385, "user_id": 210832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63565632d4ad24044018531a8effa813?s=128&d=identicon&r=PG", "display_name": "patrickmcgraw", "link": "https://stackoverflow.com/users/210832/patrickmcgraw"}, "is_accepted": true, "score": 0, "last_activity_date": 1463542102, "creation_date": 1463542102, "answer_id": 37289765, "question_id": 37289452, "link": "https://stackoverflow.com/questions/37289452/premature-ruby-exit-on-ram-intensive-program/37289765#37289765", "title": "Premature ruby exit on RAM intensive program", "body": "<p>I think you're on the right track but you should use the gem in a slightly different way:</p>\n\n<pre><code>ip = IPAddress \"0.0.0.0/0\"\n\nFile.open(\"out.txt\", \"w\") do |file|\n  ip.each do |ip_address|\n    file.puts ip_address\n  end\nend\n\nsleep(8)\n</code></pre>\n\n<p>This used a finite (and reasonable) amount of RAM on my laptop when I tested it. However, I did not write out to a file, just to the console. Hopefully you are prepared to deal with the size of file this will produce.</p>\n"}], "owner": {"reputation": 129, "user_id": 6005194, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/0mpdx.jpg?s=128&g=1", "display_name": "Pixelz", "link": "https://stackoverflow.com/users/6005194/pixelz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 37289765, "answer_count": 1, "score": -2, "last_activity_date": 1463542102, "creation_date": 1463540040, "last_edit_date": 1463542014, "question_id": 37289452, "link": "https://stackoverflow.com/questions/37289452/premature-ruby-exit-on-ram-intensive-program", "title": "Premature ruby exit on RAM intensive program", "body": "<p>I'm trying to make my Ruby file print every possible IP there can be.</p>\n\n<p>However, it exits prematurely with no error.</p>\n\n<pre><code>require 'ipaddress' #Is Installed\n\nRUBY_GC_HEAP_GROWTH_FACTOR = 0.1 \n#Changes How Much RAM Is Taken Every Request (Tested And Removed, Not The Problem)\n\n#Exits After Here\n\nip = IPAddress \"0.0.0.0/24\" #First Range\nip.to('255.255.255.255') #End Range\n\n#Exits Before This Point\n\nout_file = File.new(\"out.txt\", \"w\") #Create &amp; OpenFile\nout_file.puts(\"#{ip}\") #Output Variable To File\nout_file.close #Save And Exit\nsleep(8)\n</code></pre>\n\n<p>RAM is not a problem, due to having 8Gb worth, and the code exiting before hitting my RAM limit.</p>\n\n<p>Whats causing the program to shutdown?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "websocket", "actioncable"], "answers": [{"comments": [{"owner": {"reputation": 413, "user_id": 1621654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213e111b2d5f61f7bdf17b42a190172b?s=128&d=identicon&r=PG", "display_name": "cisolarix", "link": "https://stackoverflow.com/users/1621654/cisolarix"}, "edited": false, "score": 0, "creation_date": 1473824713, "post_id": 37390033, "comment_id": 66283118, "body": "It seems that when restarting Action Cable server, connected_nodes won&#39;t be reset. Any workaround for this?"}, {"owner": {"reputation": 51015, "user_id": 356849, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/INqgP.jpg?s=128&g=1", "display_name": "NullVoxPopuli", "link": "https://stackoverflow.com/users/356849/nullvoxpopuli"}, "reply_to_user": {"reputation": 413, "user_id": 1621654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/213e111b2d5f61f7bdf17b42a190172b?s=128&d=identicon&r=PG", "display_name": "cisolarix", "link": "https://stackoverflow.com/users/1621654/cisolarix"}, "edited": false, "score": 0, "creation_date": 1473854233, "post_id": 37390033, "comment_id": 66297239, "body": "maybe add an initializer that clears the redis cache connected_nodes?"}, {"owner": {"reputation": 163, "user_id": 174510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30d6af736fdd1ac3cb2c2297b6a564cb?s=128&d=identicon&r=PG", "display_name": "odonnellt", "link": "https://stackoverflow.com/users/174510/odonnellt"}, "edited": false, "score": 1, "creation_date": 1480320288, "post_id": 37390033, "comment_id": 68896202, "body": "I believe this will also fail when a particular user connects with multiple browser windows. When the user closes one window, they&#39;ll be completed removed from the ConnectedList (since the user list is tracked using a set), even though they&#39;re still connected from another window."}, {"owner": {"reputation": 51015, "user_id": 356849, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/INqgP.jpg?s=128&g=1", "display_name": "NullVoxPopuli", "link": "https://stackoverflow.com/users/356849/nullvoxpopuli"}, "edited": false, "score": 1, "creation_date": 1480342696, "post_id": 37390033, "comment_id": 68909695, "body": "then instead of adding just the uid, you&#39;d probably want to add connected clients or number of connections from that uid in like a hash or something."}, {"owner": {"reputation": 1228, "user_id": 960819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/382c8d761371f83ff28f5e96da0204fe?s=128&d=identicon&r=PG", "display_name": "Pere Joan Martorell", "link": "https://stackoverflow.com/users/960819/pere-joan-martorell"}, "edited": false, "score": 0, "creation_date": 1581413594, "post_id": 37390033, "comment_id": 106415498, "body": "you can use a hash instead of a set, and use HINCRBY to increment/decrement the number of connections for a specific user. Then you can use HKEYS to get a list of all users"}], "tags": [], "owner": {"reputation": 51015, "user_id": 356849, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/INqgP.jpg?s=128&g=1", "display_name": "NullVoxPopuli", "link": "https://stackoverflow.com/users/356849/nullvoxpopuli"}, "is_accepted": true, "score": 8, "last_activity_date": 1464003670, "creation_date": 1464003670, "answer_id": 37390033, "question_id": 37289441, "link": "https://stackoverflow.com/questions/37289441/actioncable-connected-users-list/37390033#37390033", "title": "Actioncable connected users list", "body": "<p>Ya kinda have to roll your own user-tracking.</p>\n\n<p>The important bits are as follows:</p>\n\n<pre><code># connection\nmodule ApplicationCable\n  class Connection &lt; ActionCable::Connection::Base\n    identified_by :uid\n\n    def connect\n      self.uid = get_connecting_uid\n      logger.add_tags 'ActionCable', uid\n    end\n\n    protected\n\n    # the connection URL to this actioncable/channel must be\n    # domain.tld?uid=the_uid\n    def get_connecting_uid\n      # this is just how I get the user id, you can keep using cookies,\n      # but because this key gets used for redis, I'd \n      # identify_by the user_id instead of the current_user object\n      request.params[:uid]\n    end\n  end\nend\n\n\n# Your Channel\ndef subscribed\n  stop_all_streams\n  stream_from broadcasting_name\n  ConnectedList.add(uid)\nend\n\ndef unsubscribed\n  ConnectedList.remove(uid)\nend\n</code></pre>\n\n<p>And then in Models:</p>\n\n<pre><code>class ConnectedList\n  REDIS_KEY = 'connected_nodes'\n\n  def self.redis\n    @redis ||= ::Redis.new(url: ActionCableConfig[:url])\n  end\n\n  # I think this is the method you want.\n  def self.all\n    redis.smembers(REDIS_KEY)\n  end\n\n  def self.clear_all\n    redis.del(REDIS_KEY)\n  end\n\n  def self.add(uid)\n    redis.sadd(REDIS_KEY, uid)\n  end\n\n  def self.include?(uid)\n    redis.sismember(REDIS_KEY, uid)\n  end\n\n  def self.remove(uid)\n    redis.srem(REDIS_KEY, uid)\n  end\nend\n</code></pre>\n\n<p>from: <a href=\"https://github.com/NullVoxPopuli/mesh-relay/\" rel=\"noreferrer\">https://github.com/NullVoxPopuli/mesh-relay/</a></p>\n"}], "owner": {"reputation": 1542, "user_id": 525717, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/629c66393ea19b73d4624519b3e6b989?s=128&d=identicon&r=PG", "display_name": "user525717", "link": "https://stackoverflow.com/users/525717/user525717"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2404, "favorite_count": 1, "accepted_answer_id": 37390033, "answer_count": 1, "score": 3, "last_activity_date": 1464003670, "creation_date": 1463539979, "last_edit_date": 1495541850, "question_id": 37289441, "link": "https://stackoverflow.com/questions/37289441/actioncable-connected-users-list", "title": "Actioncable connected users list", "body": "<p>I'm authenticating users in ActionCable like this:</p>\n\n<pre><code>module ApplicationCable\n  class Connection &lt; ActionCable::Connection::Base\n    identified_by :current_user\n\n    def connect\n      self.current_user = find_verified_user\n      logger.add_tags 'ActionCable', current_user.name\n    end\n\n    protected\n      def find_verified_user\n        if verified_user = User.find_by(id: cookies.signed[:user_id])\n          verified_user\n        else\n          reject_unauthorized_connection\n        end\n      end\n  end\nend\n</code></pre>\n\n<p>Is it possible to get connected users list ? I googled but found only this stackoverflow questions: <a href=\"https://stackoverflow.com/questions/32905259/actioncable-how-to-display-number-of-connected-users\">first</a>, <a href=\"https://stackoverflow.com/questions/36106542/how-do-i-find-out-who-is-connected-to-actioncable\">second</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "devise-confirmable"], "answers": [{"comments": [{"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1463704953, "post_id": 37298764, "comment_id": 62189992, "body": "Hi @retgoat - do you mean that I need to make the module confirmable myself (the way you have shown above) or is that something that is already available - because of adding confirmable to devise in the user model?"}, {"owner": {"reputation": 2278, "user_id": 2244501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/231d8805a81cf94c09ff60cdba6e4029?s=128&d=identicon&r=PG", "display_name": "retgoat", "link": "https://stackoverflow.com/users/2244501/retgoat"}, "reply_to_user": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1463722655, "post_id": 37298764, "comment_id": 62194417, "body": "Hi @user2860931, devise already have that module. I updated my answer to be more clear."}], "tags": [], "owner": {"reputation": 2278, "user_id": 2244501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/231d8805a81cf94c09ff60cdba6e4029?s=128&d=identicon&r=PG", "display_name": "retgoat", "link": "https://stackoverflow.com/users/2244501/retgoat"}, "is_accepted": true, "score": 1, "last_activity_date": 1463722777, "last_edit_date": 1463722777, "creation_date": 1463572246, "answer_id": 37298764, "question_id": 37289098, "link": "https://stackoverflow.com/questions/37289098/rails-4-devise-confirmable-subject-to-approval/37298764#37298764", "title": "Rails 4 - Devise - Confirmable subject to approval", "body": "<p>That method is in <code>Confirmable</code> concern.\nSo, all you need is to define it inside your <code>user.rb</code></p>\n\n<p>For example</p>\n\n<pre><code># Extensions\ndevise :database_authenticatable, :registerable, :confirmable,\n       :recoverable, :rememberable, :trackable, :validatable, \n       :lastseenable, :timeoutable\n</code></pre>\n\n<p>Consider to the <code>:confirmable</code> symbol.</p>\n\n<p>Then if you will change email <code>before_update</code> and <code>after_commit</code> callbacks will be called if all conditions will return true value</p>\n\n<p>You can't call protected instance method from anywhere.</p>\n\n<blockquote>\n  <p>In case of protected methods, you can call them from the scope of any\n  object belonging to the same class. This means that when you pass a\n  Person object p1 as an argument to a method on another Person object\n  p2, you can access all the protected methods of p1 within that method.</p>\n</blockquote>\n\n<p>from <a href=\"http://nithinbekal.com/posts/ruby-protected-methods/\" rel=\"nofollow\">here</a></p>\n\n<pre><code>module Confirmable\n  extend ActiveSupport::Concern\n\n  included do\n    # ...\n    after_commit :send_on_create_confirmation_instructions, on: :create, if: :send_confirmation_notification?\n    after_commit :send_reconfirmation_instructions, on: :update, if: :reconfirmation_required?\n    #...\n    before_update :postpone_email_change_until_confirmation_and_regenerate_confirmation_token, if: :postpone_email_change?\n  end\n</code></pre>\n\n<p><a href=\"https://github.com/plataformatec/devise/blob/master/lib/devise/models/confirmable.rb#L54\" rel=\"nofollow\">here</a> is a place where callback is called.</p>\n\n<p>And then devise will send reconfirmation email to <code>user.unconfirmed_email</code></p>\n\n<p>You may need to override reconfirmation instructions email. Here is an example:</p>\n\n<pre><code># app/mailers/devise/mailer.rb\n\nif defined?(ActionMailer)\n  class Devise::Mailer &lt; Devise.parent_mailer.constantize\n    include Devise::Mailers::Helpers\n\n    def confirmation_instructions(record, token, opts = {})\n      @token = token\n      if record.pending_reconfirmation?\n        devise_mail(record, :reconfirmation_instructions, opts)\n      else\n        devise_mail(record, :confirmation_instructions, opts)\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>And the mailer view</p>\n\n<pre><code># app/views/devise/reconfirmation_instructions.text.erb\n\nHello, &lt;%= @resource.fullname %&gt;!\n\nPlease reconfirm your new email: &lt;%= your_url_with_@token\" %&gt;\n\n--\nWBR, support team\n</code></pre>\n\n<p>Hope that helps.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>All you need to enable confirmation/reconfirmation is just to add needed strategy to your <code>User</code> model</p>\n\n<pre><code>devise :database_authenticatable, :registerable, :confirmable,\n       :recoverable, :rememberable, :trackable, :validatable, \n       :lastseenable, :timeoutable\n</code></pre>\n\n<p>And override devise mailer</p>\n\n<pre><code># app/mailers/devise/mailer.rb\n\nif defined?(ActionMailer)\n  class Devise::Mailer &lt; Devise.parent_mailer.constantize\n    include Devise::Mailers::Helpers\n\n    def confirmation_instructions(record, token, opts = {})\n      @token = token\n      if record.pending_reconfirmation?\n        devise_mail(record, :reconfirmation_instructions, opts)\n      else\n        devise_mail(record, :confirmation_instructions, opts)\n      end\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 37298764, "answer_count": 1, "score": 0, "last_activity_date": 1463722777, "creation_date": 1463537535, "question_id": 37289098, "link": "https://stackoverflow.com/questions/37289098/rails-4-devise-confirmable-subject-to-approval", "title": "Rails 4 - Devise - Confirmable subject to approval", "body": "<p>I'm trying to learn how to read rubydocs. I'm sure there is something fundamentally basic that I have missed in trying to use these documents, but for now, I'm so frustrated that information is being presented to me, but without any form of intelligible user guide that goes along with it. </p>\n\n<p>I want to amend my devise, so that users can nominate a group they want to join - in this case, an organisation where their email is changed to an organisation email, pending confirmation by the organisation owner.</p>\n\n<p>I think this function (which I have copied below from the devise ruby docs) is going to help. </p>\n\n<pre><code>#postpone_email_change_until_confirmation_and_regenerate_confirmation_token \u21d2 Object (protected)\n\n253\n# File 'lib/devise/models/confirmable.rb', line 247\n\ndef postpone_email_change_until_confirmation_and_regenerate_confirmation_token\n  @reconfirmation_required = true\n  self.unconfirmed_email = self.email\n  self.email = self.email_was\n  self.confirmation_token = nil\n  generate_confirmation_token\nend\n</code></pre>\n\n<p>My problem is that I don't understand how it works or how to incorporate it in my app. </p>\n\n<p>Do I add it to my user model (just copy &amp; paste) and then put a line in my user controller for the update action, so that any change of email does each of those the steps listed in the method?</p>\n\n<p>If I do that, what name do I give to the controller call?</p>\n\n<p>In user.rb I have tried:</p>\n\n<pre><code> def postpone_email_change_until_confirmation_and_regenerate_confirmation_token\n      @reconfirmation_required = true\n      self.unconfirmed_email = self.email\n      self.email = self.email_was\n      self.confirmation_token = nil\n      generate_confirmation_token\n    end\n</code></pre>\n\n<p>In user controller - update action, I have tried:</p>\n\n<pre><code>if @user.update(user_params)\nuser.postpone_email_change_until_confirmation_and_regenerate_confirmation_token\n</code></pre>\n\n<p>Im clearly trying to do this incorrectly. What's not clear to me is how I'm supposed to use this function.</p>\n\n<p>Can anyone see where I've gone wrong?</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "json"], "answers": [{"tags": [], "owner": {"reputation": 2036, "user_id": 21788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6aa1dc04e88732bcbea6c274f917c04?s=128&d=identicon&r=PG", "display_name": "danpickett", "link": "https://stackoverflow.com/users/21788/danpickett"}, "is_accepted": true, "score": 1, "last_activity_date": 1463769200, "creation_date": 1463769200, "answer_id": 37353593, "question_id": 37289031, "link": "https://stackoverflow.com/questions/37289031/rails-json-how-to-use-json-for-jquery-ui-autocomplete-form/37353593#37353593", "title": "Rails/JSON: How to use JSON for jquery UI autocomplete form", "body": "<p>A few things:</p>\n\n<p>Most autocomplete libs require that you only \u201cbind\u201d to the input once. Based on your stack overflow post, you have it happening in the onkeydown event. So every time you type, you're rebinding to the input. </p>\n\n<p>Consider instead:</p>\n\n<pre><code>$(document).on('ready', function(){\n  $(\"#university-field\").autocomplete({\n    source: universitydata\n  });\n});\n</code></pre>\n\n<p>This will bind the autocomplete only once (on page load)</p>\n\n<p>Secondly, and to answer your primary question, if you wanted to load the json data from file, you'd have to issue an AJAX request to load it into a variable. Given the data is static and the dataset is realatively small, it's perfectly fine to have it loaded as a variable before you bind the autocompleter. Put all of this (the data and your autocomplete event binding) in a <code>.js</code> file and use</p>\n\n<pre><code>&lt;script src=\"/your-path-to-the-javascript.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>Thirdly, JavaScipt conventions recommend snake case for variable names, so consider naming your variable <code>universityData</code></p>\n"}], "owner": {"reputation": 346, "user_id": 5331859, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8ddfcdd5d8fc6e4d7cebc17d48a19600?s=128&d=identicon&r=PG&f=1", "display_name": "zasman", "link": "https://stackoverflow.com/users/5331859/zasman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 37353593, "answer_count": 1, "score": 0, "last_activity_date": 1463769200, "creation_date": 1463537142, "question_id": 37289031, "link": "https://stackoverflow.com/questions/37289031/rails-json-how-to-use-json-for-jquery-ui-autocomplete-form", "title": "Rails/JSON: How to use JSON for jquery UI autocomplete form", "body": "<p>Please note, this is for a rails app. I've been working through trying to find the best way to pull data from a json file, and I can't quite seem to find the answer with what I want to do anywhere. I have a list of static data, like so (It's a list like 8,000 lines long):</p>\n\n<pre><code>    [\n    {\"web_page\": \"http://www.usjc.uwaterloo.ca/\", \"country\": \"Canada\", \"domain\": \"usjc.uwaterloo.ca\", \"name\": \"University of St. Jerome's College\"},\n    {\"web_page\": \"http://www.ustanne.ednet.ns.ca/\", \"country\": \"Canada\", \"domain\": \"ustanne.ednet.ns.ca\", \"name\": \"St. Anne University\"}\n    ]\n</code></pre>\n\n<p>^^ I saved the above in my apps/assets/javascripts folder as universitydata.json</p>\n\n<p>And my javascript:</p>\n\n<pre><code>    function updateUniSearch() {\n         $(\"#university-field\").autocomplete({\n                source: universitydata\n            });\n    }        \n</code></pre>\n\n<p>Here's the embedded ruby file where I have the event for the updateUniSearch() function as being on keydown: </p>\n\n<pre><code>    &lt;%= f.text_field :university, :id =&gt; \"university-field\", :onkeydown=&gt;\"updateUniSearch()\" %&gt;\n</code></pre>\n\n<p>So, let's say i define universitydata as the following:</p>\n\n<pre><code>   var universitydata = [\"Maine\", \"Harvard\"];\n</code></pre>\n\n<p>And then I go to type in the autocomplete form 'm'- 'Maine\" will appear as an option. But  in this file I have saved as universitydata.json in my javascript assets folder, nothing happens. Am I setting this up all wrong? Am I saving this json file improperly? Why does it only work with the local array? Thank you in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 129, "user_id": 5573465, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Np_waTIPCnQ/AAAAAAAAAAI/AAAAAAAAANk/cAADwcmVrZg/photo.jpg?sz=128", "display_name": "Tim Mee", "link": "https://stackoverflow.com/users/5573465/tim-mee"}, "is_accepted": false, "score": 1, "last_activity_date": 1463534692, "last_edit_date": 1463534692, "creation_date": 1463534366, "answer_id": 37288661, "question_id": 37288589, "link": "https://stackoverflow.com/questions/37288589/gem-versioning-difference-between-syntax/37288661#37288661", "title": "Gem versioning: difference between syntax?", "body": "<p>The specifier <code>~&gt;</code> has a special meaning, best shown by example. </p>\n\n<pre><code>~&gt; 2.0.3 \n</code></pre>\n\n<p>is identical to </p>\n\n<pre><code>&gt;= 2.0.3 and &lt; 2.1\n</code></pre>\n\n<hr>\n\n<pre><code>~&gt; 2.1 \n</code></pre>\n\n<p>is identical to </p>\n\n<pre><code>&gt;= 2.1 and &lt; 3.0 \n</code></pre>\n\n<hr>\n\n<p><code>~&gt; 2.2.beta</code> will match prerelease versions like 2.2.beta.12.</p>\n\n<p>*taken from the great <a href=\"http://bundler.io/v1.5/gemfile.html\" rel=\"nofollow\">Bundler.io</a></p>\n"}, {"tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": true, "score": 2, "last_activity_date": 1463534623, "last_edit_date": 1463534623, "creation_date": 1463534430, "answer_id": 37288666, "question_id": 37288589, "link": "https://stackoverflow.com/questions/37288589/gem-versioning-difference-between-syntax/37288666#37288666", "title": "Gem versioning: difference between syntax?", "body": "<p>This line says \"any 1.0 version\":</p>\n\n<pre><code>gem 'apartment', '~&gt; 1.0'\n</code></pre>\n\n<p>This line says \"any 1.0 version at least 1.0.2\"</p>\n\n<pre><code>gem 'apartment', '~&gt; 1.0', '&gt;= 1.0.2'\n</code></pre>\n\n<p>Neither should allow version 2.0 or higher.</p>\n"}], "owner": {"reputation": 5893, "user_id": 611696, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ef89fc537df4f8c678e5fd34aa08ad11?s=128&d=identicon&r=PG&f=1", "display_name": "Hopstream", "link": "https://stackoverflow.com/users/611696/hopstream"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 37288666, "answer_count": 2, "score": 0, "last_activity_date": 1463534692, "creation_date": 1463533769, "question_id": 37288589, "link": "https://stackoverflow.com/questions/37288589/gem-versioning-difference-between-syntax", "title": "Gem versioning: difference between syntax?", "body": "<p>Whats the difference between the following two syntaxes for including a gem into a rails app?</p>\n\n<p><code>gem 'apartment', '~&gt; 1.0', '&gt;= 1.0.2'</code></p>\n\n<p>vs</p>\n\n<p><code>gem 'apartment', '~&gt; 1.0'</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1463533856, "post_id": 37288581, "comment_id": 62101940, "body": "if yr inside model just call as u see <code>self.completed_mission_names</code>, if yr in controller or view then <code>MenteeProfile.completed_mission_names</code>"}, {"owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 0, "creation_date": 1463535769, "post_id": 37288581, "comment_id": 62102376, "body": "Move the invocation to the bottom of the class definition. Or even better, outside. Right after the class definition will be fine. Calling the method in a Rails initializer file (<code>config&#47;initializers&#47;whatever.rb</code>) would be even better (assuming you want to perform a one-time initialization)."}, {"owner": {"reputation": 1360, "user_id": 2928256, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7279053e16cbc9acbc94a42ae4ae91c4?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Baptiste", "link": "https://stackoverflow.com/users/2928256/jean-baptiste"}, "edited": false, "score": 0, "creation_date": 1463536676, "post_id": 37288581, "comment_id": 62102612, "body": "Following Tim mee answer and thread shared, I have put the method I wanted to call inside the Class, works much better. Thank you all for your responses."}], "answers": [{"tags": [], "owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "is_accepted": true, "score": 2, "last_activity_date": 1463536818, "creation_date": 1463536818, "answer_id": 37288983, "question_id": 37288581, "link": "https://stackoverflow.com/questions/37288581/calling-a-method-inside-model/37288983#37288983", "title": "Calling a method inside model", "body": "<p>Simplified to the max, you are trying to do this: </p>\n\n<pre><code>class A\n  A.foo\n  def self.foo\n    puts 'Calling foo!'\n  end\nend\n</code></pre>\n\n<p>This does not work because the method <code>foo</code> is not defined when you try to invoke it. You must define it first, then you can call it. Like so:</p>\n\n<pre><code>class B\n  def self.foo\n    puts 'Calling foo!'\n  end\n  B.foo\nend\n</code></pre>\n\n<p>You could also call just <code>foo</code> instead of <code>B.foo</code> from within the class definition. You can add the protected keyword anywhere you like, it will not have any impact on class methods whatsoever.</p>\n"}], "owner": {"reputation": 1360, "user_id": 2928256, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7279053e16cbc9acbc94a42ae4ae91c4?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Baptiste", "link": "https://stackoverflow.com/users/2928256/jean-baptiste"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1350, "favorite_count": 0, "accepted_answer_id": 37288983, "answer_count": 1, "score": -1, "last_activity_date": 1463536818, "creation_date": 1463533673, "question_id": 37288581, "link": "https://stackoverflow.com/questions/37288581/calling-a-method-inside-model", "title": "Calling a method inside model", "body": "<p>I am trying to trigger a method from inside the model where it is defined. But I am getting an \"undefined method `completed_mission_names'\" when I try to start my server. Can anybody help me find what I'm doing wrong ?</p>\n\n<pre><code>class MenteeProfile &lt; ActiveRecord::Base\n\n  # Update trackable attributes with succeeded missions\n  MenteeProfile.completed_mission_names\n\nprotected\n\n  def last_completed_mission_action\n  end\n\n  def self.completed_mission_names\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1463531038, "post_id": 37288216, "comment_id": 62101302, "body": "Please show the models and the table definitions (from the migrations) for <code>Books</code> and <code>RentalRecord</code>."}, {"owner": {"reputation": 1342, "user_id": 1216838, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c29171dbea109a0147226a1962a4d3c8?s=128&d=identicon&r=PG", "display_name": "Pita", "link": "https://stackoverflow.com/users/1216838/pita"}, "reply_to_user": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1463531323, "post_id": 37288216, "comment_id": 62101375, "body": "Is this good enough?"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1463531530, "post_id": 37288216, "comment_id": 62101419, "body": "That&#39;s not it.  You need to post the contents of the <code>app&#47;book.rb</code> and <code>app&#47;rental_record.rb</code> files, as well as the migrations in <code>db&#47;migrate</code> that include the <code>create_table</code> calls for <code>:books</code> and <code>:rental_record</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 0, "creation_date": 1463531900, "post_id": 37288347, "comment_id": 62101495, "body": "I agree with Michael that knowing a bit more about your code would have helped to come up with an answer that fits perfectly. Add the <code>db&#47;schema.rb</code> to the shopping cart :)"}], "tags": [], "owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "is_accepted": false, "score": 0, "last_activity_date": 1463531659, "creation_date": 1463531659, "answer_id": 37288347, "question_id": 37288216, "link": "https://stackoverflow.com/questions/37288216/querying-records-based-on-max-of-subcollection/37288347#37288347", "title": "Querying records based on max of subcollection", "body": "<p>Using two queries sometimes is a viable option. If you prefer constructing a single query, use something along the lines of</p>\n\n<p><code>Book.joins(:rental_records)\n     .where(\"max(rental_records.created_at) &lt; ?\", 2.weeks.ago)</code></p>\n\n<p>Things to note: </p>\n\n<ul>\n<li>You need to join the required tables explicitly (but by association name)</li>\n<li>You can use a plain string in a Rails <code>where</code> statement</li>\n<li>You can bind a Ruby value to a question mark within such a string</li>\n</ul>\n\n<p>If your queries get out of hand or you don't like using plain SQL strings like that, then take a look at the gem <a href=\"https://github.com/activerecord-hackery/squeel\" rel=\"nofollow\">squeel</a>. It provides an fully-fledged SQL algebra for Ruby on Rails.</p>\n\n<p>HTH</p>\n"}], "owner": {"reputation": 1342, "user_id": 1216838, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c29171dbea109a0147226a1962a4d3c8?s=128&d=identicon&r=PG", "display_name": "Pita", "link": "https://stackoverflow.com/users/1216838/pita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463531659, "creation_date": 1463530609, "last_edit_date": 1463531297, "question_id": 37288216, "link": "https://stackoverflow.com/questions/37288216/querying-records-based-on-max-of-subcollection", "title": "Querying records based on max of subcollection", "body": "<p>As the title says, for example we have a library system with two tables <code>Books</code> and <code>RentalRecord</code> with a one to many relationship. It looks like</p>\n\n<pre><code>Book1\n--name\n--RentalRecords\n----record11\n----record12\nBook2\n--name\n--RentalRecords\n----record21\n----record22\n----record23\n----record24\n</code></pre>\n\n<p>Each record contains 2 time stamps for date rented, and date returned</p>\n\n<p>and I want to query for the Books that hasn't been rented out in the past 2 weeks.\nI'm new to Ruby and couldn't think of any way to do this without using multiple queries.</p>\n"}, {"tags": ["ruby", "singleton", "anonymous-class"], "answers": [{"comments": [{"owner": {"reputation": 286, "user_id": 4249502, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh4.googleusercontent.com/-LkHPSs92-Rk/AAAAAAAAAAI/AAAAAAAAAZU/koHLhdZa1lw/photo.jpg?sz=128", "display_name": "griest", "link": "https://stackoverflow.com/users/4249502/griest"}, "edited": false, "score": 0, "creation_date": 1463530606, "post_id": 37288168, "comment_id": 62101199, "body": "So what class does the class variable <code>@@a</code> belong to?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 286, "user_id": 4249502, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh4.googleusercontent.com/-LkHPSs92-Rk/AAAAAAAAAAI/AAAAAAAAAZU/koHLhdZa1lw/photo.jpg?sz=128", "display_name": "griest", "link": "https://stackoverflow.com/users/4249502/griest"}, "edited": false, "score": 0, "creation_date": 1463531412, "post_id": 37288168, "comment_id": 62101398, "body": "@griest To <code>A</code>. <code>A.class_variable_get(:@@a) # =&gt; 5</code>."}, {"owner": {"reputation": 286, "user_id": 4249502, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh4.googleusercontent.com/-LkHPSs92-Rk/AAAAAAAAAAI/AAAAAAAAAZU/koHLhdZa1lw/photo.jpg?sz=128", "display_name": "griest", "link": "https://stackoverflow.com/users/4249502/griest"}, "edited": false, "score": 0, "creation_date": 1463531520, "post_id": 37288168, "comment_id": 62101414, "body": "Why does <code>@@a</code> gets assigned to A as opposed to the singleton class?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 286, "user_id": 4249502, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh4.googleusercontent.com/-LkHPSs92-Rk/AAAAAAAAAAI/AAAAAAAAAZU/koHLhdZa1lw/photo.jpg?sz=128", "display_name": "griest", "link": "https://stackoverflow.com/users/4249502/griest"}, "edited": false, "score": 0, "creation_date": 1463531585, "post_id": 37288168, "comment_id": 62101431, "body": "@griest They are not opposing. It is because one is the singleton class of the other."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1463530262, "creation_date": 1463530262, "answer_id": 37288168, "question_id": 37288110, "link": "https://stackoverflow.com/questions/37288110/inherited-hook-create-different-singleton-class-for-two-different-subclasses/37288168#37288168", "title": "Inherited hook: create different singleton class for two different subclasses", "body": "<p>They are not sharing the same singleton class.</p>\n\n<pre><code>B.singleton_class\n# =&gt; #&lt;Class:B&gt;\nC.singleton_class\n# =&gt; #&lt;Class:C&gt;\n</code></pre>\n\n<p>But the singleton classes are both subclasses of the singleton class of <code>A</code>.</p>\n\n<pre><code>B.singleton_class.ancestors\n# =&gt; [\n  #&lt;Class:B&gt;,\n  #&lt;Class:A&gt;,\n  #&lt;Class:Object&gt;,\n  #&lt;Class:BasicObject&gt;,\n  Class,\n  Module,\n  Object,\n  Kernel,\n  BasicObject\n]\nC.singleton_class.ancestors\n# =&gt; [\n  #&lt;Class:C&gt;,\n  #&lt;Class:A&gt;,\n  #&lt;Class:Object&gt;,\n  #&lt;Class:BasicObject&gt;,\n  Class,\n  Module,\n  Object,\n  Kernel,\n  BasicObject\n]\n</code></pre>\n"}], "owner": {"reputation": 286, "user_id": 4249502, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh4.googleusercontent.com/-LkHPSs92-Rk/AAAAAAAAAAI/AAAAAAAAAZU/koHLhdZa1lw/photo.jpg?sz=128", "display_name": "griest", "link": "https://stackoverflow.com/users/4249502/griest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1463530262, "creation_date": 1463529829, "last_edit_date": 1463530148, "question_id": 37288110, "link": "https://stackoverflow.com/questions/37288110/inherited-hook-create-different-singleton-class-for-two-different-subclasses", "title": "Inherited hook: create different singleton class for two different subclasses", "body": "<p>I've been messing around with singleton classes in Ruby and I came across some behavior I don't understand.</p>\n\n<pre><code>class A\n    def self.inherited(subclass)\n        class &lt;&lt; subclass\n            @@a = 5\n            def a\n                @@a\n            end\n            def a=(value)\n                @@a = value\n            end\n        end\n    end \nend\n\nclass B &lt; A\nend\n\nclass C &lt; A \nend\n\nB.a    # =&gt; 5\nC.a    # =&gt; 5\nB.a= 7\nC.a    # =&gt; 7\n</code></pre>\n\n<p>Shouldn't ruby create a different singleton class for B and C? Why are B and C sharing the same anonymous class?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1463530901, "post_id": 37288104, "comment_id": 62101274, "body": "The error output you are getting basically tells you what to fix.  Have you tried doing that?"}, {"owner": {"reputation": 5475, "user_id": 577826, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/h6i5c.jpg?s=128&g=1", "display_name": "Cbas", "link": "https://stackoverflow.com/users/577826/cbas"}, "reply_to_user": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1463532186, "post_id": 37288104, "comment_id": 62101555, "body": "could you explain what the basic solution is?"}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1463541953, "post_id": 37288104, "comment_id": 62103881, "body": "Your second <code>GROUP BY</code> query is a bit messy.  Could you post some sample data along with what your desired result is?  This is more of a Postgres problem than a Ruby problem."}, {"owner": {"reputation": 5475, "user_id": 577826, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/h6i5c.jpg?s=128&g=1", "display_name": "Cbas", "link": "https://stackoverflow.com/users/577826/cbas"}, "reply_to_user": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1463549580, "post_id": 37288104, "comment_id": 62106215, "body": "Ok I added more info at the bottom. I think I was confused b/c I usually use WHERE queries and they return all the attributes. With SELECT you have to specify which attributes to return or use a * right? If so, how can I work all those other attributes into the DISTINCT query?"}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1463552129, "post_id": 37288104, "comment_id": 62107196, "body": "Your distinct query is fine now.  As for the <code>GROUP BY</code> query, you can only include columns which are either appear in the <code>GROUP BY</code> clause or which are aggregates (e.g. <code>SUM</code>, <code>COUNT</code>) of columns."}], "answers": [{"comments": [{"owner": {"reputation": 5475, "user_id": 577826, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/h6i5c.jpg?s=128&g=1", "display_name": "Cbas", "link": "https://stackoverflow.com/users/577826/cbas"}, "edited": false, "score": 0, "creation_date": 1463531216, "post_id": 37288148, "comment_id": 62101346, "body": "that runs Ok but now I get an error related to an attribute not existing when I try to print out the message. Do I have to include every attribute I want to retrieve in both select and group? If so, is there a cleaner way to write this if I have say 12 attributes to retrieve?"}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "reply_to_user": {"reputation": 5475, "user_id": 577826, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/h6i5c.jpg?s=128&g=1", "display_name": "Cbas", "link": "https://stackoverflow.com/users/577826/cbas"}, "edited": false, "score": 0, "creation_date": 1468579547, "post_id": 37288148, "comment_id": 64196832, "body": "@Cbas In Postgres you must include columns you select in the <code>GROUP BY</code> clause <i>unless</i> they appear inside aggregate functions (e.g. <code>SUM</code>).  Your error may be a general SQL problem rather than a limitation in my answer."}, {"owner": {"reputation": 5475, "user_id": 577826, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/h6i5c.jpg?s=128&g=1", "display_name": "Cbas", "link": "https://stackoverflow.com/users/577826/cbas"}, "edited": false, "score": 0, "creation_date": 1468622723, "post_id": 37288148, "comment_id": 64220509, "body": "Ok thanks, I was able to fix that problem, but now I&#39;m getting back a list of ALL messages, not just the newest from each sender. Is there a way to prevent getting back multiple messages from the same users? I copied and pasted the code into the update"}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "reply_to_user": {"reputation": 5475, "user_id": 577826, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/h6i5c.jpg?s=128&g=1", "display_name": "Cbas", "link": "https://stackoverflow.com/users/577826/cbas"}, "edited": false, "score": 0, "creation_date": 1468629829, "post_id": 37288148, "comment_id": 64221883, "body": "In order to answer this I am going to need to see sample input and desired output.  You might want to ask a new question since few people will be paying attention to this question now."}], "tags": [], "owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "is_accepted": false, "score": 2, "last_activity_date": 1463537691, "last_edit_date": 1463537691, "creation_date": 1463530151, "answer_id": 37288148, "question_id": 37288104, "link": "https://stackoverflow.com/questions/37288104/rails-select-distinct-and-order-by-most-recent/37288148#37288148", "title": "Rails select distinct and order by most recent", "body": "<p>Try this:</p>\n\n<pre><code>@messages = Message.select(\"DISTINCT ON (created_at) created_at, sender_id\").order('created_at DESC')\n</code></pre>\n\n<p>From the <a href=\"http://www.postgresql.org/docs/9.0/static/sql-select.html#SQL-DISTINCT\" rel=\"nofollow\">documentation</a>:</p>\n\n<blockquote>\n  <p>The DISTINCT ON expression(s) must match the leftmost ORDER BY expression(s).</p>\n</blockquote>\n\n<p>You will have to rework the second query per the error message.</p>\n"}], "owner": {"reputation": 5475, "user_id": 577826, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/h6i5c.jpg?s=128&g=1", "display_name": "Cbas", "link": "https://stackoverflow.com/users/577826/cbas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3872, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1468622844, "creation_date": 1463529814, "last_edit_date": 1495540287, "question_id": 37288104, "link": "https://stackoverflow.com/questions/37288104/rails-select-distinct-and-order-by-most-recent", "title": "Rails select distinct and order by most recent", "body": "<p>I have a Notifications modal and a User modal where User has many Notifications and the notifications are sent between users. I need a function to get the newest notification from each user, and return them sorted by their timestamps.</p>\n\n<p>I tried using SELECT DISTINCT .. ORDER BY:</p>\n\n<pre><code>@notifications = Notification.select(\"DISTINCT(notifier_id, created_at)\").order('created_at DESC')\n</code></pre>\n\n<p>which generates this SQL: <code>SELECT DISTINCT(notifier_id, created_at) FROM \"notifications\"  ORDER BY \"notifications\".\"created_at\" DESC, created_at DESC)</code></p>\n\n<p>but I get the error: <code>SELECT DISTINCT, ORDER BY expressions must appear in select list</code></p>\n\n<p><code>created_at</code> does appear in the select list, so what's the problem?</p>\n\n<p>Based on this post: <a href=\"https://stackoverflow.com/questions/12693089/pgerror-select-distinct-order-by-expressions-must-appear-in-select-list\">PG::Error: SELECT DISTINCT, ORDER BY expressions must appear in select list</a></p>\n\n<p>I tried using SELECT ... GROUP BY .. ORDER BY:</p>\n\n<pre><code>@notifications = Notification.select(\"notifier_id\").group(\"notifier_id\").order(\"MAX(created_at)\")\n</code></pre>\n\n<p>which generates this SQL: <code>SELECT \"notifications\".\"notifier_id\" FROM \"notifications\" GROUP BY notifier_id  ORDER BY \"notifications\".\"created_at\" DESC, MAX(created_at)</code></p>\n\n<p>but now I get this error: <code>column \"notifications.created_at\" must appear in the GROUP BY clause or be used in an aggregate function</code></p>\n\n<p>I am using an aggregate function, so what is the error about?</p>\n\n<p>UPDATE:</p>\n\n<p>Using this code:</p>\n\n<pre><code>@notifications = Notification.select(\"DISTINCT ON (created_at) created_at, notifier_id\").order('created_at DESC')\n</code></pre>\n\n<p>I get back a list of all messages, instead of just the newest from each sender.</p>\n"}, {"tags": ["ruby", "io"], "comments": [{"owner": {"reputation": 757, "user_id": 2958602, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/417a788cb8fe40d3b5db8be410ff5272?s=128&d=identicon&r=PG&f=1", "display_name": "Ownaginatious", "link": "https://stackoverflow.com/users/2958602/ownaginatious"}, "edited": false, "score": 0, "creation_date": 1463528922, "post_id": 37287945, "comment_id": 62100842, "body": "Could it be that it was to interface with some other script/program that expects to send a value to your script, but that your script has since been updated to no longer need it, but still accepts it for legacy purposes?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6348170, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204529050985018/picture?type=large", "display_name": "Beichen Zhang", "link": "https://stackoverflow.com/users/6348170/beichen-zhang"}, "edited": false, "score": 0, "creation_date": 1463595044, "post_id": 37288014, "comment_id": 62135672, "body": "Thank you! Now i get what the original author means: just hold and wait:)"}, {"owner": {"reputation": 13, "user_id": 6348170, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204529050985018/picture?type=large", "display_name": "Beichen Zhang", "link": "https://stackoverflow.com/users/6348170/beichen-zhang"}, "edited": false, "score": 0, "creation_date": 1463595986, "post_id": 37288014, "comment_id": 62136176, "body": "Sorry i am new to Ruby. In the future, i should also search the parent module for function definition:) As i want to learn ruby inside-out and really understand the structure of language, do you think &quot;Pragmatic Programmers&#39; Guide&quot; it&#39;s a good place to start? (i have previous experience in OOP and algorithms in C++)"}], "tags": [], "owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "is_accepted": true, "score": 1, "last_activity_date": 1463529130, "creation_date": 1463529130, "answer_id": 37288014, "question_id": 37287945, "link": "https://stackoverflow.com/questions/37287945/ruby-what-does-stdin-gets-mean/37288014#37288014", "title": "Ruby: What Does STDIN.gets mean?", "body": "<p>If you run <code>p STDIN.method(:gets)</code> you get <code>#&lt;Method: IO#gets&gt;</code>.  This means that the <code>gets</code> method if defined in the IO module.  Knowing that, you can then read the official documentation of <code>gets</code> here:</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.3.0/IO.html#method-i-gets\" rel=\"nofollow\">http://ruby-doc.org/core-2.3.0/IO.html#method-i-gets</a></p>\n\n<p>The <code>gets</code> method does not store its data in some default place, it returns it as the return value of the method.  If that return value is being ignored, then the data is lost, but it could still be useful to call <code>STDIN.gets</code> for its side effects: <code>gets</code> will pause the execution of your thread and wait for input from the standard input.  This would give the user a chance to review what the Ruby script has already done and terminate it early if the user wants to.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 6348170, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204529050985018/picture?type=large", "display_name": "Beichen Zhang", "link": "https://stackoverflow.com/users/6348170/beichen-zhang"}, "edited": false, "score": 0, "creation_date": 1463595279, "post_id": 37294105, "comment_id": 62135801, "body": "Thank you for your detailed explanation Keith! yeah i does see a lots of &quot;chomp&quot;. I am just wondering that in the future,if the ruby&#39;s documentation does not answer my doubt, what are some other resources u may recommend?"}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 13, "user_id": 6348170, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204529050985018/picture?type=large", "display_name": "Beichen Zhang", "link": "https://stackoverflow.com/users/6348170/beichen-zhang"}, "edited": false, "score": 0, "creation_date": 1463597802, "post_id": 37294105, "comment_id": 62137164, "body": "You&#39;re welcome.  I like the &quot;pickaxe book&quot; (<a href=\"https://pragprog.com/book/ruby4/programming-ruby-1-9-2-0\" rel=\"nofollow noreferrer\">pragprog.com/book/ruby4/programming-ruby-1-9-2-0</a>).  Also, Stack Overflow, of course.  Other than that I just google and experiment in irb."}], "tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": false, "score": 0, "last_activity_date": 1463560001, "creation_date": 1463560001, "answer_id": 37294105, "question_id": 37287945, "link": "https://stackoverflow.com/questions/37287945/ruby-what-does-stdin-gets-mean/37294105#37294105", "title": "Ruby: What Does STDIN.gets mean?", "body": "<p>When working with Ruby, <code>irb</code> is your friend. irb is the interactive Ruby shell, or REPL.  You can try your statement in irb:</p>\n\n<pre><code>2.3.0 :001 &gt; STDIN.gets\nhello\n =&gt; \"hello\\n\"\n</code></pre>\n\n<p>After typing <code>STDIN.gets</code>, the system waited for input.  I typed <code>hello</code> and then pressed the Enter key.  irb indicated that the return value of the expression was <code>\"hello\\n\"</code>.</p>\n\n<p>This shows that:</p>\n\n<p>1) <code>gets</code> returns when, and only when, the user presses Enter or equivalent.</p>\n\n<p>2) <code>gets</code> returns the string that was typed, pasted, etc., including the terminating Enter key.</p>\n\n<p>You'll probably see a lot of calls to <code>chomp</code> on strings returned by gets.  This is because the trailing \"\\n\" is rarely wanted. <code>chomp</code> returns a string with the \"\\n\" removed.</p>\n"}], "owner": {"reputation": 13, "user_id": 6348170, "user_type": "registered", "profile_image": "https://graph.facebook.com/10204529050985018/picture?type=large", "display_name": "Beichen Zhang", "link": "https://stackoverflow.com/users/6348170/beichen-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2023, "favorite_count": 0, "accepted_answer_id": 37288014, "answer_count": 2, "score": 0, "last_activity_date": 1463560001, "creation_date": 1463528690, "question_id": 37287945, "link": "https://stackoverflow.com/questions/37287945/ruby-what-does-stdin-gets-mean", "title": "Ruby: What Does STDIN.gets mean?", "body": "<p>Recently, i was reading legacy ruby script and hopefully to convert some of them to python. </p>\n\n<p>I understand the concept of 'STDIN' and done some google search. However, there is no documentation about this stand alone statement: 'STDIN.gets.' What's the return value? Does it secretly get all the input and store it in some default places, or it is simply a piece of unfinished meaningless legacy code i should delete?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rollback", "dbmigrate"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 6211530, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7ed7d53e652f0435a632def9a2f9dfc9?s=128&d=identicon&r=PG&f=1", "display_name": "user6211530", "link": "https://stackoverflow.com/users/6211530/user6211530"}, "edited": false, "score": 0, "creation_date": 1463526287, "post_id": 37287538, "comment_id": 62100205, "body": "Thank you for your answer! Is there anyway to restor the data in the comments table?"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "reply_to_user": {"reputation": 17, "user_id": 6211530, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7ed7d53e652f0435a632def9a2f9dfc9?s=128&d=identicon&r=PG&f=1", "display_name": "user6211530", "link": "https://stackoverflow.com/users/6211530/user6211530"}, "edited": false, "score": 0, "creation_date": 1463526546, "post_id": 37287538, "comment_id": 62100271, "body": "Unfortunately, there is not a standard way.  If you have your log files, you can probably resurrect the contents of <code>comments</code> from there, but it will require some searching.  You&#39;ll want to locate the log entries that are POST to your <code>&#47;comments</code> route (or <code>&#47;parent&#47;comments</code> if it&#39;s nested) and look for the <code>params</code> hash for the action."}, {"owner": {"reputation": 17, "user_id": 6211530, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7ed7d53e652f0435a632def9a2f9dfc9?s=128&d=identicon&r=PG&f=1", "display_name": "user6211530", "link": "https://stackoverflow.com/users/6211530/user6211530"}, "edited": false, "score": 0, "creation_date": 1463526865, "post_id": 37287538, "comment_id": 62100354, "body": "Sounds really difficult.. but thanks so much for the info~!"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "reply_to_user": {"reputation": 17, "user_id": 6211530, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7ed7d53e652f0435a632def9a2f9dfc9?s=128&d=identicon&r=PG&f=1", "display_name": "user6211530", "link": "https://stackoverflow.com/users/6211530/user6211530"}, "edited": false, "score": 0, "creation_date": 1463526944, "post_id": 37287538, "comment_id": 62100368, "body": "It just depends on how badly you want that data back.  Most times, especially in the development environment, it&#39;s not worth the effort.  However, if you were in a production environment, you might have to go through all of that effort to restore crucial data."}], "tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": true, "score": 0, "last_activity_date": 1463525923, "creation_date": 1463525923, "answer_id": 37287538, "question_id": 37287425, "link": "https://stackoverflow.com/questions/37287425/rails-rollback-mistake/37287538#37287538", "title": "Rails: Rollback Mistake", "body": "<p>Once you've done the <code>rake db:rollback</code>, you've made a change to the database.   In this case, it dropped your <code>comments</code> table, as you can see in the output: <code>drop_table(:comments)</code>.  The data is gone, already.  We've all been there at least once.</p>\n\n<p>Running <code>rake db:migrate</code> will restore the <code>comments</code> table structure, but not the data in it.  In this situation, if you want to get to the point that your new table <code>property</code> isn't migrated, you can run <code>rake db:migrate</code> to run all new migrations, and then <code>rake db:rollback</code> once to rollback the migration for <code>property</code>.</p>\n"}], "owner": {"reputation": 17, "user_id": 6211530, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7ed7d53e652f0435a632def9a2f9dfc9?s=128&d=identicon&r=PG&f=1", "display_name": "user6211530", "link": "https://stackoverflow.com/users/6211530/user6211530"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 37287538, "answer_count": 1, "score": 1, "last_activity_date": 1463525923, "creation_date": 1463525188, "last_edit_date": 1463525659, "question_id": 37287425, "link": "https://stackoverflow.com/questions/37287425/rails-rollback-mistake", "title": "Rails: Rollback Mistake", "body": "<p>I have created a table called \"property\" and I did not migrate it yet.  I then wanted to delete the table, so when I did <code>rake db:rollback</code> as below.  My previously created table, which I did not want to delete at all, is now reverted.  How should I revive my model \"comment\" and instead delete the last model \"property\" only. </p>\n\n<p>Some comments say do \"redo\" or \"run migrate\" but if I do a <code>rake db:migrate</code>, I feel like it will delete the comment model permanently.  Am I wrong?  What is right solution to bring back my comment model?</p>\n\n<pre><code>:~/workspace (revoke) $ rails g model property title address note price$ priceW \nRunning via Spring preloader in process 3066\n      invoke  active_record\n      create    db/migrate/20160517222114_create_properties.rb\n      create    app/models/property.rb\n      invoke    test_unit\n      create      test/models/property_test.rb\n      create      test/fixtures/properties.yml\n:~/workspace (revoke) $ bundle exec rake db:rollback\n== 20160506122941 CreateComments: reverting ===================================\n-- drop_table(:comments)\n   -&gt; 0.0011s\n== 20160506122941 CreateComments: reverted (0.0096s) ==========================\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1463524134, "post_id": 37287131, "comment_id": 62099534, "body": "Why is <code>@store</code> a Hash and not an Array? To store something in a Hash you need to give it a key (e.g. <code>hash[&quot;foo&quot;] = 123</code>). What do you intend to use as the keys in the <code>@store</code> Hash?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1463524238, "post_id": 37287131, "comment_id": 62099565, "body": "Why do you think a hash is the answer here? This is clear cut <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">X &amp; Y problem</a> - you are trying to paint the house with shovel and wondering if the length of the handle is the problem."}, {"owner": {"reputation": 882, "user_id": 2782109, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b0c32f4815b9f4662a8d310d3a187dd1?s=128&d=identicon&r=PG&f=1", "display_name": "mr i.o", "link": "https://stackoverflow.com/users/2782109/mr-i-o"}, "edited": false, "score": 0, "creation_date": 1463524264, "post_id": 37287131, "comment_id": 62099578, "body": "@store is a Hash because pluck_to_hash returns a Hash - <a href=\"https://github.com/girishso/pluck_to_hash\" rel=\"nofollow noreferrer\">github.com/girishso/pluck_to_hash</a>"}, {"owner": {"reputation": 882, "user_id": 2782109, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b0c32f4815b9f4662a8d310d3a187dd1?s=128&d=identicon&r=PG&f=1", "display_name": "mr i.o", "link": "https://stackoverflow.com/users/2782109/mr-i-o"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1463524556, "post_id": 37287131, "comment_id": 62099677, "body": "@max, hopefully my comment regarding the pluck_to_hash gem addresses your question."}, {"owner": {"reputation": 2172, "user_id": 4412925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7fa1503a3820659b27943c99d463a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nabeel", "link": "https://stackoverflow.com/users/4412925/nabeel"}, "edited": false, "score": 1, "creation_date": 1463526700, "post_id": 37287131, "comment_id": 62100316, "body": "So why don&#39;t you initialize <code>@store</code> as an array and use <code>&lt;&lt;</code> instead of <code>=</code>. Your <code>@store</code> array will then contain the hashes inside another array (which you can flatten if you like). You then simply iterate over your <code>@store</code> in your view."}], "answers": [{"comments": [{"owner": {"reputation": 882, "user_id": 2782109, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b0c32f4815b9f4662a8d310d3a187dd1?s=128&d=identicon&r=PG&f=1", "display_name": "mr i.o", "link": "https://stackoverflow.com/users/2782109/mr-i-o"}, "edited": false, "score": 0, "creation_date": 1463604305, "post_id": 37287604, "comment_id": 62140565, "body": "Thanks for your help, @max. That was very educative."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1463526327, "creation_date": 1463526327, "answer_id": 37287604, "question_id": 37287131, "link": "https://stackoverflow.com/questions/37287131/appending-keys-to-a-hash-in-an-each-loop/37287604#37287604", "title": "Appending keys to a hash in an each loop", "body": "<p>This is why it does not work:</p>\n\n<p>On each iteration of the loop you are replacing the variable <code>@store</code> with another <code>ActiveRecord::ProxyCollection</code>.</p>\n\n<pre><code>products.each do |p|\n  @store = Store.where(product: p[:id], country: gb).pluck_to_hash(:store_code, :manager_name)\nend\n</code></pre>\n\n<p>While you could do it like so:</p>\n\n<pre><code>products.each do |p|\n  @store[p[:id]] = Store.where(product: p[:id], country: gb).pluck_to_hash(:store_code, :manager_name)\nend\n</code></pre>\n\n<p>However this is just the wrong way to solve the problem from the start.</p>\n\n<p>Hashes are meant to store key - value data where a value corresponds to a known key. Ruby is not like PHP which completely mixes up arrays and dictionary like \"objects\" (associative arrays). </p>\n\n<p>Arrays are like stacks where the order matters, hashes are key value. And what you want here is not a hash.</p>\n\n<p>Instead you would solve it like so:</p>\n\n<pre><code>products = Product.where(category: 'electronics', price: 10000).pluck(:id)\n# this gives us an array of ids\n@stores = Store.where(product: products, country: gb)\n</code></pre>\n\n<p>But you probally should be setting up proper relations here and using <code>.joins</code> with a condition on the joined table.</p>\n\n<pre><code>@stores = Store.joins(:product)\n               .where(product: { category: 'electronics', price: 10000 }, country: gb)\n</code></pre>\n\n<p>This is much more efficient. </p>\n"}], "owner": {"reputation": 882, "user_id": 2782109, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b0c32f4815b9f4662a8d310d3a187dd1?s=128&d=identicon&r=PG&f=1", "display_name": "mr i.o", "link": "https://stackoverflow.com/users/2782109/mr-i-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 0, "accepted_answer_id": 37287604, "answer_count": 1, "score": 0, "last_activity_date": 1463526327, "creation_date": 1463523534, "last_edit_date": 1463524050, "question_id": 37287131, "link": "https://stackoverflow.com/questions/37287131/appending-keys-to-a-hash-in-an-each-loop", "title": "Appending keys to a hash in an each loop", "body": "<p>I am walking through a rails Hash tutorial and got stuck on how to manipulate hashes in a loop. I have got a hash called <code>products</code>:</p>\n\n<pre><code>products = Product.where(category: 'electronics', price: 10000).pluck_to_hash(:id)\n# =&gt; [{:id=&gt;23}, {:id=&gt;12}, {:id=&gt;108}]\n</code></pre>\n\n<p>and my aim is to iterate through it like this: </p>\n\n<pre><code>products.each do |p|\n  @store = Store.where(product: p[:id], country: gb).pluck_to_hash(:store_code, :manager_name)\nend\n</code></pre>\n\n<p>and store all 6 store results in the <code>@store</code> instance variable so I can pass it to view. </p>\n\n<p>Using <code>=</code> only ends up with one\nstore and not all 6 stores I'm trying to get. <code>&lt;&lt;</code> is only for arrays. </p>\n\n<p>I also tried </p>\n\n<pre><code>@store.merge!(Store.where(product: p[:id], country: gb).pluck_to_hash(:store_code, :manager_name))\n</code></pre>\n\n<p>and got:</p>\n\n<blockquote>\n  <p>undefined method `merge!' for nil:NilClass</p>\n</blockquote>\n\n<p>Then I declared an empty Hash before the loop:</p>\n\n<pre><code>@store = {} \n</code></pre>\n\n<p>and that gave: </p>\n\n<blockquote>\n  <p>no implicit conversion of Array into Hash</p>\n</blockquote>\n\n<p>Any guidance on how to iteratively store those keys in <code>@store</code> varaible will be greatly appreciated. </p>\n\n<p>Please note that this question isn't about model associations; it's specific to Hash manipulations.</p>\n"}, {"tags": ["ruby", "pdf", "prawn"], "answers": [{"comments": [{"owner": {"reputation": 729, "user_id": 5655756, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/100005069719213/picture?type=large", "display_name": "Catalin", "link": "https://stackoverflow.com/users/5655756/catalin"}, "edited": false, "score": 1, "creation_date": 1479336690, "post_id": 37287069, "comment_id": 68519621, "body": "In what file should I insert this code ? Also I couldn&#39;t find Arial.ttf on Google fonts ?... Any ideas are appreciated ?"}], "tags": [], "owner": {"reputation": 901, "user_id": 2802149, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/htwJY.png?s=128&g=1", "display_name": "Jan Bussieck", "link": "https://stackoverflow.com/users/2802149/jan-bussieck"}, "is_accepted": false, "score": 9, "last_activity_date": 1463559715, "last_edit_date": 1463559715, "creation_date": 1463523138, "answer_id": 37287069, "question_id": 37286976, "link": "https://stackoverflow.com/questions/37286976/ruby-how-to-use-different-fonts-in-prawn/37287069#37287069", "title": "Ruby - How to use different fonts in Prawn?", "body": "<p>ttf is a common format, you can download fonts at <a href=\"https://www.google.com/fonts\" rel=\"noreferrer\">Google font</a> for instance, put the font in some directory in your project for instance under <code>/assets/fonts/</code></p>\n\n<p>You can then define a new font family like so:</p>\n\n<pre><code>Prawn::Document.generate(\"output.pdf\") do\n  font_families.update(\"Arial\" =&gt; {\n    :normal =&gt; \"/assets/fonts/Arial.ttf\",\n    :italic =&gt; \"/assets/fonts/Arial Italic.ttf\",\n  })\n  font \"Arial\"\nend\n</code></pre>\n\n<p>You can then use the font throughout your document.</p>\n"}, {"comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 1, "creation_date": 1463527494, "post_id": 37287659, "comment_id": 62100516, "body": "PDF files don&#39;t recognize multibyte fonts. They have a character map that maps each byte value to a font glyph (not an ascii table)... so this solution might produce undefined data in the PDF."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1463543931, "post_id": 37287659, "comment_id": 62104457, "body": "- might work great on your machine and break on another, as it doesn&#39;t comply with the PDF standard. Using and mapping a font to the actual data is the way to go. I&#39;m surprised that you tested it with a multi-byte character string, such as Chinese, and that it worked."}], "tags": [], "owner": {"reputation": 3765, "user_id": 2089267, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/44215d587ff1f8bc581d4098bfec2154?s=128&d=identicon&r=PG&f=1", "display_name": "NeoVe", "link": "https://stackoverflow.com/users/2089267/neove"}, "is_accepted": false, "score": 0, "last_activity_date": 1463526696, "creation_date": 1463526696, "answer_id": 37287659, "question_id": 37286976, "link": "https://stackoverflow.com/questions/37286976/ruby-how-to-use-different-fonts-in-prawn/37287659#37287659", "title": "Ruby - How to use different fonts in Prawn?", "body": "<p>If you are using plain <code>Ruby</code> you could try this way:</p>\n\n<pre><code>require 'prawn'\n\nPrawn::Document.generate(\"my_text.pdf\") do\n\n  font('Helvetica', size: 50) do\n    formatted_text_box(\n      [{text: 'Whatever text you need to print'}],\n      at: [0, bounds.top],\n      width: 100,\n      height: 50,\n      overflow: :shrink_to_fit,\n      disable_wrap_by_char: true  # &lt;---- newly added in 1.2\n    )\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 690, "user_id": 4807892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27c4610432efdb0b9ba0224b7892a10?s=128&d=identicon&r=PG&f=1", "display_name": "Hula_Zell", "link": "https://stackoverflow.com/users/4807892/hula-zell"}, "is_accepted": false, "score": 1, "last_activity_date": 1556036614, "creation_date": 1556036614, "answer_id": 55815576, "question_id": 37286976, "link": "https://stackoverflow.com/questions/37286976/ruby-how-to-use-different-fonts-in-prawn/55815576#55815576", "title": "Ruby - How to use different fonts in Prawn?", "body": "<p>A quick and dirty work-around to prevent this error is to encode your text to windows-1252 before writing it to the pdf file.</p>\n\n<pre><code>text = text.encode(\"Windows-1252\", invalid: :replace, undef: :replace, replace: '')\n</code></pre>\n\n<p>A drawback to this approach is that, if the character you are converting is invalid or undefined in Windows-1252 encoding, it will be replaced by an empty string <code>''</code>\nDepending on your original text, this solution may work fine, or you may end up missing a few characters in your PDF. </p>\n"}], "owner": {"reputation": 101, "user_id": 5870334, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d001b55ae29a19e8890f7d699a5388ec?s=128&d=identicon&r=PG&f=1", "display_name": "Reign", "link": "https://stackoverflow.com/users/5870334/reign"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5061, "favorite_count": 2, "answer_count": 3, "score": 7, "last_activity_date": 1556036614, "creation_date": 1463522683, "question_id": 37286976, "link": "https://stackoverflow.com/questions/37286976/ruby-how-to-use-different-fonts-in-prawn", "title": "Ruby - How to use different fonts in Prawn?", "body": "<p>I have a small Ruby program where I'm printing some text out to a PDF using Prawn, but a small portion of the text is non-English characters. (Some of that text is Chinese, some is Greek, etc.). When I run my program, I of course get an error saying <code>Your document includes text that's not compatible with the Windows-1252 character set. (Prawn::Errors::IncompatibleStringEncoding)\nIf you need full UTF-8 support, use TTF fonts instead of PDF's built-in fonts</code>. I know that I need to use a TTF font, but how do I even go about that? Do I need to install it from online? If so, where would I save it to? I know that's probably a dumb question but I'm new to Ruby and Prawn. Thanks!</p>\n"}, {"tags": ["ruby", "chef-infra", "knife"], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 1, "last_activity_date": 1463546346, "creation_date": 1463546346, "answer_id": 37290426, "question_id": 37286639, "link": "https://stackoverflow.com/questions/37286639/why-chef-client-dies-randomly/37290426#37290426", "title": "why chef-client dies randomly?", "body": "<p><code>chef-client</code> doesn't run in the background by default, you have to configure that. Usually with the cookbook also named <code>chef-client</code>. If you do already have it set up as a service, check with your service layer to see why it is exiting (would be Upstart on EL6).</p>\n"}], "owner": {"reputation": 688, "user_id": 1275328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b089d589d227c2b48584b6e106ee1a1b?s=128&d=identicon&r=PG", "display_name": "Rajan Kumar", "link": "https://stackoverflow.com/users/1275328/rajan-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 37290426, "answer_count": 1, "score": 0, "last_activity_date": 1463546346, "creation_date": 1463521046, "question_id": 37286639, "link": "https://stackoverflow.com/questions/37286639/why-chef-client-dies-randomly", "title": "why chef-client dies randomly?", "body": "<p>We are running knife bootstrap command and most of the time it works fine.\nSometimes, we see that chef-client dies. We can see in ps -ef | grep chef*, it returns empty.</p>\n\n<p>Where as in Chef server, I am waiting for few hours  and nothing happening. then I want to client machine and I do ps -ef | grep chef* , it is not running.</p>\n\n<p>Chef: 11.12.8 on red hat 6 Linux </p>\n\n<p>How can I know why chef client die?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 2, "creation_date": 1463523483, "post_id": 37286540, "comment_id": 62099291, "body": "The <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-select\" rel=\"nofollow noreferrer\"><code>select</code></a> method takes at most four arguments, the last two of which are hashes. You&#39;re passing six arguments, four of which are hashes. &quot;Removing the empty hash&quot; still leaves you with one too many arguments. I suggest reading the linked documentation and narrowing down what values you actually want to pass."}, {"owner": {"reputation": 3, "user_id": 6347857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9adf7c001c8d2d86df4cdd3728a2284f?s=128&d=identicon&r=PG&f=1", "display_name": "exos109", "link": "https://stackoverflow.com/users/6347857/exos109"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1463524877, "post_id": 37286540, "comment_id": 62099772, "body": "Thanks @Jordan - do you have any other suggestions on how to accomplish this with keeping all the functionality?"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1463525138, "post_id": 37286540, "comment_id": 62099852, "body": "@ethrowin it&#39;s unclear what functionality you think you&#39;re getting here. You do not have to pass each key/value pair of attributes as its own hash. Group them. The documentation will tell you which options go in which argument."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1463525248, "post_id": 37286540, "comment_id": 62099899, "body": "There&#39;s no trick to it. There&#39;s an <code>options</code> hash and an <code>html_options</code> hash. All of your options go in one or the other. Like @meagar said, the docs tell you which."}], "answers": [{"tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": true, "score": 0, "last_activity_date": 1463526670, "last_edit_date": 1463526670, "creation_date": 1463526302, "answer_id": 37287598, "question_id": 37286540, "link": "https://stackoverflow.com/questions/37286540/wrong-number-of-arguments-5-for-1-4-in-rails-select-tag/37287598#37287598", "title": "Wrong number of arguments (5 for 1..4) in Rails select tag", "body": "<p>Use this:</p>\n\n<pre><code>&lt;dd&gt;&lt;%= f.select :codes, options_for_select(CarParts::CODES), { include_blank: \"Select Code\" }, { required: true, onchange: \"myFunc(this);\"} %&gt;&lt;/dd&gt;\n</code></pre>\n\n<p>The <code>include_blank</code> goes in <code>options</code> and the <code>required</code> and <code>onchange</code> are HTML options.  Here's the API documentation for the <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-select\" rel=\"nofollow\">Form Helper <code>select</code></a> for reference and examples.</p>\n"}], "owner": {"reputation": 3, "user_id": 6347857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9adf7c001c8d2d86df4cdd3728a2284f?s=128&d=identicon&r=PG&f=1", "display_name": "exos109", "link": "https://stackoverflow.com/users/6347857/exos109"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "accepted_answer_id": 37287598, "answer_count": 1, "score": 0, "last_activity_date": 1463531250, "creation_date": 1463520533, "last_edit_date": 1463531250, "question_id": 37286540, "link": "https://stackoverflow.com/questions/37286540/wrong-number-of-arguments-5-for-1-4-in-rails-select-tag", "title": "Wrong number of arguments (5 for 1..4) in Rails select tag", "body": "<p>Running into an issue when passing arguments in <code>select</code> in Rails:</p>\n\n<blockquote>\n  <p>wrong number of arguments (5 for 1..4)</p>\n</blockquote>\n\n<p>Here's the code:</p>\n\n<pre><code>&lt;dd&gt;&lt;%= f.select :codes, options_for_select(CarParts::CODES), {include_blank: \"Select Code\"}, {required: true}, {}, {onchange: \"myFunc(this);\"} %&gt;&lt;/dd&gt;\n</code></pre>\n\n<p>Removing the empty hash returns the same error. Though removing both the <code>include_blank</code> and <code>required</code> attribute while keeping it there seems to work correctly. Any suggestions?</p>\n"}, {"tags": ["ruby", "database", "ruby-on-rails-3", "postgresql", "heroku"], "comments": [{"owner": {"reputation": 1046, "user_id": 2490067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/091274f16cac5a60d378d0623bf6ae45?s=128&d=identicon&r=PG", "display_name": "theatlasroom", "link": "https://stackoverflow.com/users/2490067/theatlasroom"}, "edited": false, "score": 1, "creation_date": 1463520618, "post_id": 37286403, "comment_id": 62098104, "body": "Maybe have a look at the heroku cli docs - <a href=\"https://devcenter.heroku.com/articles/using-the-cli\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/using-the-cli</a>. Also the docs for db - <a href=\"https://devcenter.heroku.com/articles/heroku-postgresql\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/heroku-postgresql</a>"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1463520737, "post_id": 37286403, "comment_id": 62098160, "body": "You can use <code>heroku run rails console</code> to open a Rails console to your app."}, {"owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 1, "creation_date": 1463532042, "post_id": 37286403, "comment_id": 62101529, "body": "The Rails console should do the job. If you prefer an SQL console, use <code>heroku run pg:psql</code>."}, {"owner": {"reputation": 1, "user_id": 6347848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a83c9beb6f8b50f482610b19d9b5c5b?s=128&d=identicon&r=PG&f=1", "display_name": "Kornfeld", "link": "https://stackoverflow.com/users/6347848/kornfeld"}, "edited": false, "score": 0, "creation_date": 1463665064, "post_id": 37286403, "comment_id": 62169056, "body": "I don&#180;t understand what to do. I mean how can i access this database with the rails console?"}], "answers": [{"tags": [], "owner": {"reputation": 1622, "user_id": 1378902, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/HzK2N.jpg?s=128&g=1", "display_name": "ChrisJ", "link": "https://stackoverflow.com/users/1378902/chrisj"}, "is_accepted": false, "score": 1, "last_activity_date": 1471580043, "creation_date": 1471580043, "answer_id": 39031007, "question_id": 37286403, "link": "https://stackoverflow.com/questions/37286403/delete-data-from-postgres-database-using-heroku-ruby-on-rails/39031007#39031007", "title": "delete data from postgres database using heroku (ruby on rails)", "body": "<p>Assuming your rails application is otherwise configured properly (I'm guessing it is, since you got it far enough to insert that incorrect row in the database), as the comments said, you can use the heroku toolbelt to access the rails console.</p>\n\n<p>To install the heroku toolbelt follow the instructions <a href=\"https://toolbelt.heroku.com/\" rel=\"nofollow\">here</a>.</p>\n\n<p>Since you've been developing in Rails, this will probably feel most familiar.</p>\n\n<p>Open a terminal window, change to your application directory, and run</p>\n\n<p><code>heroku run rails c</code></p>\n\n<p>This should give you something like this</p>\n\n<pre><code>Loading production environment (Rails 4.2.0)\nirb(main):001:0&gt;\n</code></pre>\n\n<p>From there you can type rails code and the console will run that code against your database.</p>\n\n<p>eg if the model you want to delete is a Post, then you might type</p>\n\n<pre><code>Post.pluck :name\n</code></pre>\n\n<p>to find the names of the posts you have.</p>\n\n<p>Then you might do</p>\n\n<pre><code>Post.where(name: 'my broken post').destroy_all\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 12796549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAoNL.jpg?s=128&g=1", "display_name": "Mason", "link": "https://stackoverflow.com/users/12796549/mason"}, "is_accepted": false, "score": 0, "last_activity_date": 1601094206, "creation_date": 1601094206, "answer_id": 64073866, "question_id": 37286403, "link": "https://stackoverflow.com/questions/37286403/delete-data-from-postgres-database-using-heroku-ruby-on-rails/64073866#64073866", "title": "delete data from postgres database using heroku (ruby on rails)", "body": "<p>I'm a little late here, but this might help someone who stumbles across this thread...</p>\n<p>If you go to your Heroku app's dashboard (through the website) &gt; settings &gt; &quot;Reveal Config Vars&quot; &gt; DATABASE_URL, and then paste that URL into the browser.</p>\n<p>I use TablePlus for database management, when I paste the link into the browser it asks if it can open TablePlus and then I can edit my production database in real time like I would in development.</p>\n<p>I'm not sure what pasting the URL into the browser will do if you don't have TablePlus. I imagine it will request to open any other SQL management app you might have.</p>\n"}], "owner": {"reputation": 1, "user_id": 6347848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a83c9beb6f8b50f482610b19d9b5c5b?s=128&d=identicon&r=PG&f=1", "display_name": "Kornfeld", "link": "https://stackoverflow.com/users/6347848/kornfeld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2000, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1601094206, "creation_date": 1463519923, "question_id": 37286403, "link": "https://stackoverflow.com/questions/37286403/delete-data-from-postgres-database-using-heroku-ruby-on-rails", "title": "delete data from postgres database using heroku (ruby on rails)", "body": "<p>I am developing an website with heroku (ruby on rails). I use the postgres database. Now I made a mistake and there is a row inside this database which I want to delete. But I have no access. The data is shown on the website. But there is no picture or other content. It was just a trial and a big error ;) </p>\n\n<p>How can I delete this data without to delete the whole database? I found nothing...</p>\n\n<p>I hope you can help me.</p>\n\n<p>with best regards</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-4", "random"], "comments": [{"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1463520741, "post_id": 37286015, "comment_id": 62098164, "body": "Related question with different database: <a href=\"http://stackoverflow.com/questions/10447465/where-to-order-a-result-set-randomly-in-database-or-in-memory\" title=\"where to order a result set randomly in database or in memory\">stackoverflow.com/questions/10447465/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": false, "score": 1, "last_activity_date": 1472998965, "last_edit_date": 1472998965, "creation_date": 1463520372, "answer_id": 37286503, "question_id": 37286015, "link": "https://stackoverflow.com/questions/37286015/how-do-i-randomize-the-ordering-of-results-from-a-rails-finder-method/37286503#37286503", "title": "How do I randomize the ordering of results from a Rails finder method?", "body": "<p>In Postgres you can randomize query results with <code>order(\"random()\")</code>, e.g.</p>\n\n<pre><code>SomeModel.where(enabled: true).order(\"random()\")\n</code></pre>\n\n<p>to return all <code>SomeModel</code>s in random order.</p>\n\n<p>As you're probably thinking, if you do that once with <code>offset(0).limit(5)</code> for the first page and again with <code>offset(5).limit(5)</code> for the second page, you'll get a different random order the second time and pagination will not make sense.</p>\n\n<p>I would address this by caching the query results. For example, with Rails caching:</p>\n\n<pre><code>results = Rails.cache.fetch(\"some_models/#{current_user.id}\")\n  SomeModel.where(enabled: true).order(\"random()\")\nend\n</code></pre>\n\n<p>You can then slice the results according to what page you're on.</p>\n\n<p>Since all this requires you to load all the models (or all the models returned by some query) into memory, you might as well shuffle them in memory:</p>\n\n<pre><code>results = Rails.cache.fetch(\"some_models/#{current_user.id}\")\n  SomeModel.where(enabled: true).shuffle\nend\n</code></pre>\n\n<p>That allows your database to cache the underlying query results, which <code>random()</code> prevents.</p>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 604, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1472998965, "creation_date": 1463518221, "last_edit_date": 1463520672, "question_id": 37286015, "link": "https://stackoverflow.com/questions/37286015/how-do-i-randomize-the-ordering-of-results-from-a-rails-finder-method", "title": "How do I randomize the ordering of results from a Rails finder method?", "body": "<p>I\u2019m using Rails 4 and a Postgres database.  For a particular table, I want to serve a bunch of table records to a user, but in a randomized order.  Further, I don\u2019t want to display all the data at once, but rather would prefer the user page through it.  So if the randomized order for all the data has IDs</p>\n\n<pre><code>10, 8, 6, 4, 2, 9, 7, 5, 3, 1\n</code></pre>\n\n<p>I would want the data with IDs</p>\n\n<pre><code>10, 8, 6, 4, 2\n</code></pre>\n\n<p>to be displayed on page 1 and the data with ids 9, 7, 5, 3, 1 to be displayed on page 2 (assuming each page has five results).  How do I write a finder method that will randomize the data in such a way or how do I take the results of a finder method and randomize their ordering?  Note that the initial group of records won\u2019t be everything in the table (it will be everything with the enabled field set to true).</p>\n"}, {"tags": ["ruby", "xml", "soap", "nokogiri"], "comments": [{"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1463518786, "post_id": 37285849, "comment_id": 62097242, "body": "What do do the verbs &#39;decode&#39; and &#39;format&#39; mean in this case?  What are you actually doing by hand that you need done with the Ruby code?"}, {"owner": {"reputation": 936, "user_id": 4699240, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e7773344279542b5bf7957461880a151?s=128&d=identicon&r=PG&f=1", "display_name": "phizzy", "link": "https://stackoverflow.com/users/4699240/phizzy"}, "reply_to_user": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1463519495, "post_id": 37285849, "comment_id": 62097575, "body": "@MichaelGaskill, edited question for clarification on xml decoding and formatting."}], "answers": [{"tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": true, "score": 1, "last_activity_date": 1463530940, "creation_date": 1463530940, "answer_id": 37288258, "question_id": 37285849, "link": "https://stackoverflow.com/questions/37285849/working-with-xml-body-from-soap-call-with-nokogiri-in-ruby/37288258#37288258", "title": "Working with XML body from Soap call with Nokogiri in Ruby", "body": "<p>You can use this code to decode and format the XML:</p>\n\n<pre><code>require \"nokogiri\"\n\nXML_CHAR_ENTITIES = {\n  \"lt\"  =&gt; \"&lt;\",\n  \"gt\"  =&gt; \"&gt;\",\n  \"amp\" =&gt; \"&amp;\",\n  \"num\" =&gt; \"#\",\n  \"comma\" =&gt; \",\"\n}\n\nxsl =&lt;&lt;XSL\n&lt;xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"&gt;\n  &lt;xsl:output method=\"xml\" encoding=\"UTF-8\" indent=\"yes\"/&gt;\n  &lt;xsl:strip-space elements=\"*\"/&gt;\n  &lt;xsl:template match=\"/\"&gt;\n    &lt;xsl:copy-of select=\".\"/&gt;\n  &lt;/xsl:template&gt;\n&lt;/xsl:stylesheet&gt;\nXSL\n\n\nxml = '&lt;GetPropertyListResult&gt;&amp;lt;Properties&amp;gt;&amp;lt;Property PropertyId=\"11A\" PropertyName1=\"1111 Austin Hwy\" PropertyName2=\"\" PropertyAddrLine1=\"The 1111\" PropertyAddrLine2=\"1111 Austin Highway\" PropertyAddrLine3=\"\" PropertyAddrLine4=\"\" PropertyAddrCity=\"San Antonio\" PropertyAddrState=\"TX\" PropertyAddrZipCode=\"78209\" PropertyAddrCountry=\"\" PropertyAddrEmail=\"\" RemitToAddrLine1=\"The 1111\" RemitToAddrLine2=\"1111 Austin Highway\" RemitToAddrLine3=\"\" RemitToAddrLine4=\"\" RemitToAddrCity=\"San Antonio\" RemitToAddrState=\"TX\" RemitToAddrZipCode=\"78209\" RemitToAddrCountry=\"\" LiveDate=\"2013-12-04T00:00:00\" MgrOffPhoneNo=\"210-804-1100\" MgrFaxNo=\"\" MgrSalutation=\"\" MgrFirstName=\"\" MgrMiName=\"\" MgrLastName=\"\" MonthEndInProcess=\"N\"&amp;gt;&amp;lt;Amenity PropertyId=\"11A\"&gt;&lt;/GetPropertyListResult&gt;'\n\nxml = xml.gsub(/&amp;(\\w+);/) do |match|\n  char_entity = XML_CHAR_ENTITIES[$1]\n  char_entity ? char_entity : match\nend\n\ndoc  = Nokogiri::XML(xml)\nxslt = Nokogiri::XSLT(xsl)\nxml  = xslt.transform(doc)\n\nputs \"#{xml}\"\n</code></pre>\n\n<p>The XML provided was incomplete, so this terminating string was appended to allow it to be parsed: <code>&gt;&lt;/GetPropertyListResult&gt;</code></p>\n\n<p>The XML_CHAR_ENTITIES provides a hash of encoded strings to decoded strings, and can be easily extended to include other XML character entities, such as those documented at the <a href=\"https://dev.w3.org/html5/html-author/charref\" rel=\"nofollow\">W3 Character Entity Reference Chart</a>.</p>\n\n<p>XSL is an embedded stylesheet that is used to format the XML for output with Nokogiri.</p>\n\n<p>Decoding the XML character entities is done with the <code>String#gsub</code> call using the block option.  The XML is then successfully parsed by Nokogiri.  Once the XML is parsed, it is formatted using Nokogiri XSLT transformation.</p>\n\n<p>The output of this code is:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;GetPropertyListResult&gt;\n  &lt;Properties&gt;\n    &lt;Property PropertyId=\"11A\" PropertyName1=\"1111 Austin Hwy\" PropertyName2=\"\" PropertyAddrLine1=\"The 1111\" PropertyAddrLine2=\"1111 Austin Highway\" PropertyAddrLine3=\"\" PropertyAddrLine4=\"\" PropertyAddrCity=\"San Antonio\" PropertyAddrState=\"TX\" PropertyAddrZipCode=\"78209\" PropertyAddrCountry=\"\" PropertyAddrEmail=\"\" RemitToAddrLine1=\"The 1111\" RemitToAddrLine2=\"1111 Austin Highway\" RemitToAddrLine3=\"\" RemitToAddrLine4=\"\" RemitToAddrCity=\"San Antonio\" RemitToAddrState=\"TX\" RemitToAddrZipCode=\"78209\" RemitToAddrCountry=\"\" LiveDate=\"2013-12-04T00:00:00\" MgrOffPhoneNo=\"210-804-1100\" MgrFaxNo=\"\" MgrSalutation=\"\" MgrFirstName=\"\" MgrMiName=\"\" MgrLastName=\"\" MonthEndInProcess=\"N\"&gt;\n      &lt;Amenity PropertyId=\"11A\"/&gt;\n    &lt;/Property&gt;\n  &lt;/Properties&gt;\n&lt;/GetPropertyListResult&gt;\n</code></pre>\n"}], "owner": {"reputation": 936, "user_id": 4699240, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e7773344279542b5bf7957461880a151?s=128&d=identicon&r=PG&f=1", "display_name": "phizzy", "link": "https://stackoverflow.com/users/4699240/phizzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 962, "favorite_count": 1, "accepted_answer_id": 37288258, "answer_count": 1, "score": 1, "last_activity_date": 1463531180, "creation_date": 1463517577, "last_edit_date": 1463531180, "question_id": 37285849, "link": "https://stackoverflow.com/questions/37285849/working-with-xml-body-from-soap-call-with-nokogiri-in-ruby", "title": "Working with XML body from Soap call with Nokogiri in Ruby", "body": "<p>I'm writing a Ruby script to make a Postman SOAP POST call, then using Nokogiri to to parse the XML response.  When I take the full SOAP call response from Postman, copy it into my editor and manually take the XML body and decode it and format it online I'm able to use the following Nokogiri script successfully: </p>\n\n<pre><code>doc = Nokogiri::XML(File.open(\"response.xml\"))\n\nproperty_ids = []\n\ndoc.css('Property').each do |property|\n  puts \"Property ID: #{property['PropertyId']}\"\n  property_ids &lt;&lt; property['PropertyId']\nend\n\n\nproperty_ids.each_with_index do |property_id, index|\n  puts \"index:  #{index}\"\n  puts \"property id: #{property_id}\"\nend\n</code></pre>\n\n<p>Where I run into the problem is when I want to include in the script the Ruby snippet of the Postman call: </p>\n\n<pre><code>require 'nokogiri'\nrequire 'uri'\nrequire 'net/http'\nrequire 'openssl'\n\n\nurl = URI(\"https://esite.thelyndco.com/AmsiWeb/eDexWeb/esite/leasing.asmx\")\n\nhttp = Net::HTTP.new(url.host, url.port)\nhttp.use_ssl = true\nhttp.verify_mode = OpenSSL::SSL::VERIFY_NONE\n\nrequest = Net::HTTP::Post.new(url)\nrequest[\"content-type\"] = 'application/soap+xml'\nrequest[\"cache-control\"] = 'no-cache'\nrequest[\"postman-token\"] = '916e3f3d-11ca-e8cf-2066-542b009a281d'\nrequest.body = \"&lt;?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?&gt;\\r\\n&lt;soap12:Envelope xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\" xmlns:xsd=\\\"http://www.w3.org/2001/XMLSchema\\\" xmlns:soap12=\\\"http://www.w3.org/2003/05/soap-envelope\\\"&gt;\\r\\n  &lt;soap12:Body&gt;\\r\\n    &lt;GetPropertyList xmlns=\\\"http://tempuri.org/\\\"&gt;\\r\\n      &lt;UserID&gt;updater&lt;/UserID&gt;\\r\\n      &lt;Password&gt;[password]&lt;/Password&gt;\\r\\n      &lt;PortfolioName&gt;[portfolio name]&lt;/PortfolioName&gt;\\r\\n      &lt;XMLData&gt; \\r\\n&lt;/XMLData&gt;\\r\\n    &lt;/GetPropertyList&gt;\\r\\n  &lt;/soap12:Body&gt;\\r\\n&lt;/soap12:Envelope&gt;\"\n\nresponse = http.request(request)\n\ndoc = Nokogiri::XML(response.body)\n# doc = Nokogiri::XML(File.open(\"full-response.xml\"))\n# doc.at('GetPropertyListResponse').text\n</code></pre>\n\n<p>What I want to do is take the full SOAP response with the SOAP envelope and be able to process it in my script without having to cut and paste; manually decoding and formatting using online XML formatters. </p>\n\n<p>Commented out are a couple of lines that I tried from Stack Overflow. Is it possible to decode and format the XML body with Nokogiri or to parse out the SOAP envelope? </p>\n\n<p>edit: </p>\n\n<p>By decoding the XML I mean taking:</p>\n\n<pre><code>&lt;GetPropertyListResult&gt;&amp;lt;Properties&amp;gt;&amp;lt;Property PropertyId=\"11A\" PropertyName1=\"1111 Austin Hwy\" PropertyName2=\"\" PropertyAddrLine1=\"The 1111\" PropertyAddrLine2=\"1111 Austin Highway\" PropertyAddrLine3=\"\" PropertyAddrLine4=\"\" PropertyAddrCity=\"San Antonio\" PropertyAddrState=\"TX\" PropertyAddrZipCode=\"78209\" PropertyAddrCountry=\"\" PropertyAddrEmail=\"\" RemitToAddrLine1=\"The 1111\" RemitToAddrLine2=\"1111 Austin Highway\" RemitToAddrLine3=\"\" RemitToAddrLine4=\"\" RemitToAddrCity=\"San Antonio\" RemitToAddrState=\"TX\" RemitToAddrZipCode=\"78209\" RemitToAddrCountry=\"\" LiveDate=\"2013-12-04T00:00:00\" MgrOffPhoneNo=\"210-804-1100\" MgrFaxNo=\"\" MgrSalutation=\"\" MgrFirstName=\"\" MgrMiName=\"\" MgrLastName=\"\" MonthEndInProcess=\"N\"&amp;gt;&amp;lt;Amenity PropertyId=\"11A\" \n</code></pre>\n\n<p>and decoding it into using this <a href=\"http://coderstoolbox.net/string/#!encoding=xml&amp;action=encode&amp;charset=us_ascii\" rel=\"nofollow\">online XML decoder</a>:</p>\n\n<pre><code>&lt;GetPropertyListResult&gt;&lt;Properties&gt;&lt;Property PropertyId=\"11A\" PropertyName1=\"1111 Austin Hwy\" PropertyName2=\"\" PropertyAddrLine1=\"The 1111\" PropertyAddrLine2=\"1111 Austin Highway\" PropertyAddrLine3=\"\" PropertyAddrLine4=\"\" PropertyAddrCity=\"San Antonio\" PropertyAddrState=\"TX\" PropertyAddrZipCode=\"78209\" PropertyAddrCountry=\"\" PropertyAddrEmail=\"\" RemitToAddrLine1=\"The 1111\" RemitToAddrLine2=\"1111 Austin Highway\" RemitToAddrLine3=\"\" RemitToAddrLine4=\"\" RemitToAddrCity=\"San Antonio\" RemitToAddrState=\"TX\" RemitToAddrZipCode=\"78209\" RemitToAddrCountry=\"\" LiveDate=\"2013-12-04T00:00:00\" MgrOffPhoneNo=\"210-804-1100\" MgrFaxNo=\"\" MgrSalutation=\"\" MgrFirstName=\"\" MgrMiName=\"\" MgrLastName=\"\" MonthEndInProcess=\"N\"&gt;&lt;Amenity PropertyId=\"11A\" \n</code></pre>\n\n<p>then running it through an <a href=\"http://www.freeformatter.com/xml-formatter.html\" rel=\"nofollow\">XML formatter</a> so that nested elements are indented for legibility.</p>\n"}, {"tags": ["ruby", "parsing", "datetime"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1463517679, "post_id": 37285526, "comment_id": 62096663, "body": "What <code>Minute</code> class are you talking about? Is this something you&#39;ve constructed?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1463517857, "post_id": 37285526, "comment_id": 62096749, "body": "You certainly could do that, but it&#39;s hard to imagine what problem it would solve. Can you tell us more about the problem you&#39;re trying to solve with this?"}, {"owner": {"reputation": 500, "user_id": 2328064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5f548d374108dd390e07599328b4c56e?s=128&d=identicon&r=PG&f=1", "display_name": "joshfindit", "link": "https://stackoverflow.com/users/2328064/joshfindit"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1463523690, "post_id": 37285526, "comment_id": 62099371, "body": "@tadman - Yes, something we&#39;ve constructed"}, {"owner": {"reputation": 500, "user_id": 2328064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5f548d374108dd390e07599328b4c56e?s=128&d=identicon&r=PG&f=1", "display_name": "joshfindit", "link": "https://stackoverflow.com/users/2328064/joshfindit"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1463524164, "post_id": 37285526, "comment_id": 62099547, "body": "@Jordan - It&#39;s a bit complicated to explain in a comment, but we have a UTC timetree in a graph database, and events connect to nodes on the tree. The unique &#39;key&#39; is the name of the node (String): <code>(20161201_12)-[:ZOOM_OUT]-&gt;(20161201)</code>. Event nodes are added to the tree like <code>(event)-[:OCCURRED_AT]-&gt;(20161201)</code>. An event can occur at any level (For example, not knowing what time something happened, only the day), so an event that occurred on a day can&#39;t be connected to the Second <code>20161201_000000</code>, but should be connected to the Day node."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 1, "creation_date": 1463537744, "post_id": 37285526, "comment_id": 62102878, "body": "I played around with a time implementation like this. Check it out: <a href=\"https://github.com/silverhammermba/chrono\" rel=\"nofollow noreferrer\">github.com/silverhammermba/chrono</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1463559697, "post_id": 37285526, "comment_id": 62111525, "body": "You&#39;re going to have to do some work here to integrate the ideas people have given you and come up with a solution. You don&#39;t really have a lot of sample data here, it&#39;s just hints. It&#39;s not even clear what <code>Minute</code> is or how it would be populated."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1463562028, "post_id": 37285526, "comment_id": 62112989, "body": "What is it that motivates you to create classes for each component of the date/time? Is it really worth the cost of the added complexity?"}, {"owner": {"reputation": 500, "user_id": 2328064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5f548d374108dd390e07599328b4c56e?s=128&d=identicon&r=PG&f=1", "display_name": "joshfindit", "link": "https://stackoverflow.com/users/2328064/joshfindit"}, "reply_to_user": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1463575700, "post_id": 37285526, "comment_id": 62122577, "body": "@KeithBennett The biggest reason is that it allows them to have a distinct hierarchy, which allows things like &quot;connect this second to the time tree root&quot; that practically instantly connects the second to it&#39;s minute, hour, day, month, year, and decade while creating uncreated nodes along the way."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1463517733, "post_id": 37285717, "comment_id": 62096690, "body": "It&#39;s worth mentioning that while these work, <code>b.minute</code>, <code>b.day</code> and so forth is probably more concise."}, {"owner": {"reputation": 129, "user_id": 5573465, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Np_waTIPCnQ/AAAAAAAAAAI/AAAAAAAAANk/cAADwcmVrZg/photo.jpg?sz=128", "display_name": "Tim Mee", "link": "https://stackoverflow.com/users/5573465/tim-mee"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1463518590, "post_id": 37285717, "comment_id": 62097139, "body": "Definitely.  If you can use the <code>.minute</code>, <code>.hour</code>, etc... use them.  strftime will give you more customizable combinations of a time stamp when those don&#39;t meet your needs.  ex -&gt; <code>b.strftime(&quot;%d, %H:%M&quot;) =&gt; &quot;01, 12:05&quot;</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1463520059, "post_id": 37285717, "comment_id": 62097847, "body": "Oh, for sure, both options are valid depending on your requirements. Just don&#39;t do <code>b.strftime(&#39;%M&#39;).to_i</code>."}, {"owner": {"reputation": 500, "user_id": 2328064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5f548d374108dd390e07599328b4c56e?s=128&d=identicon&r=PG&f=1", "display_name": "joshfindit", "link": "https://stackoverflow.com/users/2328064/joshfindit"}, "edited": false, "score": 0, "creation_date": 1463523649, "post_id": 37285717, "comment_id": 62099355, "body": "I think this might work, but it&#39;s only half the solution. Do you have a solution for figuring out which Class to parse with?"}, {"owner": {"reputation": 129, "user_id": 5573465, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Np_waTIPCnQ/AAAAAAAAAAI/AAAAAAAAANk/cAADwcmVrZg/photo.jpg?sz=128", "display_name": "Tim Mee", "link": "https://stackoverflow.com/users/5573465/tim-mee"}, "edited": false, "score": 0, "creation_date": 1463531554, "post_id": 37285717, "comment_id": 62101423, "body": "I&#39;m not really sure what the half is.  I would parse the minutes in a minute class taking your example of Minute.new above"}, {"owner": {"reputation": 129, "user_id": 5573465, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Np_waTIPCnQ/AAAAAAAAAAI/AAAAAAAAANk/cAADwcmVrZg/photo.jpg?sz=128", "display_name": "Tim Mee", "link": "https://stackoverflow.com/users/5573465/tim-mee"}, "edited": false, "score": 0, "creation_date": 1463532093, "post_id": 37285717, "comment_id": 62101542, "body": "comments are hard to leave code in.  But if you want to call Minute.new(time) and have that string your wrote in your question be returned.  I would have the initialize method of Minute take a string of time, then parse that time with DateTime.parse() and set that to an instance var.  From there call another method to pull out the min, hour, day, year and set them all to vars.  Then put the variables into a string (ex -&gt; &quot;Minute #{min} of hour #{hour} ...&quot;) and puts thats string( if this is just going to be run through console) at the end"}, {"owner": {"reputation": 500, "user_id": 2328064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5f548d374108dd390e07599328b4c56e?s=128&d=identicon&r=PG&f=1", "display_name": "joshfindit", "link": "https://stackoverflow.com/users/2328064/joshfindit"}, "edited": false, "score": 0, "creation_date": 1463575080, "post_id": 37285717, "comment_id": 62122102, "body": "The other half is: Say there&#39;s only <code>setDate (string)</code>, how will the function know to instantiate a Day, Month, Minute, etc? <code>string.length</code> won&#39;t work for example because the string could have <code>&#47;</code>, <code>-</code> or other characters."}, {"owner": {"reputation": 500, "user_id": 2328064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5f548d374108dd390e07599328b4c56e?s=128&d=identicon&r=PG&f=1", "display_name": "joshfindit", "link": "https://stackoverflow.com/users/2328064/joshfindit"}, "edited": false, "score": 0, "creation_date": 1463575556, "post_id": 37285717, "comment_id": 62122474, "body": "Thanks to your probing, I realized that the question could be worded better by asking about the function we want to create. Having noticed that, I realize why people were misunderstanding."}], "tags": [], "owner": {"reputation": 129, "user_id": 5573465, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Np_waTIPCnQ/AAAAAAAAAAI/AAAAAAAAANk/cAADwcmVrZg/photo.jpg?sz=128", "display_name": "Tim Mee", "link": "https://stackoverflow.com/users/5573465/tim-mee"}, "is_accepted": false, "score": 3, "last_activity_date": 1463516953, "creation_date": 1463516953, "answer_id": 37285717, "question_id": 37285526, "link": "https://stackoverflow.com/questions/37285526/ruby-can-a-string-be-parsed-so-that-2016-12-01-is-a-day-and-2016-12-01t120/37285717#37285717", "title": "Ruby; Can a string be parsed so that `2016-12-01` is a day, and `2016-12-01T12:05` is a minute?", "body": "<p>One possible way would be to have a parse method for each class.  stftime is used to pull specific parts of a time stamp out </p>\n\n<pre><code>a = '2016-12-01T12:05'\n=&gt; \"2016-12-01T12:05\"\nb = DateTime.parse(a)\n=&gt; #&lt;DateTime: 2016-12-01T12:05:00+00:00 ((2457724j,43500s,0n),+0s,2299161j)&gt;\nb.strftime(\"%M\") # minute\n=&gt; \"05\"\nb.strftime(\"%H\") # hour\n=&gt; \"12\"\nb.strftime(\"%d\") # day of month\n=&gt; \"01\"\nb.strftime(\"%m\") # month\n=&gt; \"12\"\n</code></pre>\n\n<p>So each class would use a different stfrtime() param to filter down to what ever part of the time stamp you need.  </p>\n\n<p><a href=\"http://apidock.com/ruby/DateTime/strftime\" rel=\"nofollow\">http://apidock.com/ruby/DateTime/strftime</a></p>\n"}], "owner": {"reputation": 500, "user_id": 2328064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5f548d374108dd390e07599328b4c56e?s=128&d=identicon&r=PG&f=1", "display_name": "joshfindit", "link": "https://stackoverflow.com/users/2328064/joshfindit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1463575324, "creation_date": 1463516373, "last_edit_date": 1592644375, "question_id": 37285526, "link": "https://stackoverflow.com/questions/37285526/ruby-can-a-string-be-parsed-so-that-2016-12-01-is-a-day-and-2016-12-01t120", "title": "Ruby; Can a string be parsed so that `2016-12-01` is a day, and `2016-12-01T12:05` is a minute?", "body": "<p><em>Using vanilla Ruby (or Rails, but prefer vanilla Ruby),</em></p>\n<p>Supposing custom classes are created by us: <code>Year</code>, <code>Month</code>, <code>Day</code>, <code>Hour</code>, <code>Minute</code>, <code>Second</code>, <code>Millisecond</code>\nWith these classes, they relate to a specific hour, minute, second, etc.</p>\n<p>Example: <code>thisMinute = Minute.new(&quot;2016-12-01T12:05&quot;) =&gt; Minute 5 of hour 12 of day 1 of month 12 of year 2016</code></p>\n<br>\n<h3>Can a function be created so that</h3>\n<p><code>foo(&quot;2016&quot;)</code> can create an instance of the <code>Year</code> Class</p>\n<p><code>foo(&quot;2016/12&quot;)</code> can create an instance of the <code>Month</code> Class</p>\n<p><code>foo(&quot;2016-12-01&quot;)</code> can create an instance of the <code>Day</code> Class</p>\n<p><code>foo(&quot;2016-12-01T12:05&quot;)</code> can create an instance of the <code>Minute</code> Class</p>\n<p>and so-on?</p>\n<h3>Here are the gotchas</h3>\n<ul>\n<li><p>The time format may vary (<code>&quot;20161201&quot;</code> or <code>&quot;20161201@12pm&quot;</code> for example)</p>\n</li>\n<li><p>With these formats, <code>Time.parse</code> will successfully parse the string, but will set <code>Month</code>, <code>Day</code>, <code>Hour</code>, etc so that <code>&quot;20161201&quot;</code> would have a value set for Hour, even though it should be a <code>Day</code>.</p>\n</li>\n<li><p>Checking for <code>== 0</code> (as in <code>Time.parse().hour == 0</code>) would fail as the time could be <code>&quot;2016-12-01@12am&quot;</code></p>\n</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "websocket", "websocket-rails"], "comments": [{"owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 0, "creation_date": 1463532305, "post_id": 37285483, "comment_id": 62101576, "body": "I assume you did check the <code>websocket_rails.log</code>? Does it not show anything useful?"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1466042169, "post_id": 37285483, "comment_id": 63156775, "body": "Is your live server publishing through port <code>3001</code>? - because it might be an issue with routing or request forwarding. i.e., on localhost you&#39;re using port <code>3000</code> for <code>http</code>, but the live server uses port <code>80</code> and internally forwards the request to your application&#39;s port. If you tried connecting to port <code>3000</code> on your production server, your request should fail (the port shouldn&#39;t be publicly accessible)."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1466042370, "post_id": 37285483, "comment_id": 63156821, "body": "P.S. (off-topic) What made you choose <code>websocket_rails</code> over Faye or <a href=\"http://www.plezi.io\" rel=\"nofollow noreferrer\"><code>plezi.io</code></a>? Since I&#39;m the author for Plezi, I was wondering what I could improve to make it more accessible."}], "owner": {"reputation": 5067, "user_id": 993554, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/UV0L9.jpg?s=128&g=1", "display_name": "Victor Ferreira", "link": "https://stackoverflow.com/users/993554/victor-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 226, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1463516202, "creation_date": 1463516202, "question_id": 37285483, "link": "https://stackoverflow.com/questions/37285483/websocket-rails-gem-running-as-standalone-timesout-trying-to-connect-to-thin-on", "title": "Websocket-Rails gem running as standalone timesout trying to connect to Thin on live server", "body": "<p>I'm setting up this app that contains a chat module and everything is working fine on localhost.</p>\n\n<p>Now I am trying to connect to the server as a standalone service, but the connection state in the <code>dispatcher</code> is always 'connecting' until it finally times out with the following message:</p>\n\n<blockquote>\n  <p>WebSocket connection to 'ws://myserver:3001/websocket' failed: Error in connection establishment: net::ERR_CONNECTION_TIMED_OUT</p>\n</blockquote>\n\n<p><strong>Gemfile</strong></p>\n\n<pre><code>gem 'faye-websocket', '0.10.0'\ngem 'websocket-rails', github: 'moaa/websocket-rails', branch: 'threadsocket-rails'\ngem 'websocket-rails-js', github: 'websocket-rails/websocket-rails-js', branch: 'sub_protocols'\ngem 'puma', group: [:development, :test, :production]\n</code></pre>\n\n<p><strong>Javascript</strong></p>\n\n<pre><code>var dispatcher = new WebSocketRails(WEBSOCKET_URL);\n\ndispatcher.on_open = function(data) {\n    console.log('Connection has been established: ', data);\n};\n</code></pre>\n\n<p><strong>Initializer</strong></p>\n\n<pre><code>WebsocketRails.setup do |config|\n    config.log_level = :debug\n    config.log_path = \"#{Rails.root}/log/websocket_rails.log\"\n    config.log_internal_events = false\n    config.standalone = true\n    config.synchronize = false\nend\n</code></pre>\n\n<p>And I am starting the service as explained here:\n<a href=\"https://github.com/websocket-rails/websocket-rails/issues/302\" rel=\"nofollow\">https://github.com/websocket-rails/websocket-rails/issues/302</a></p>\n\n<p>If I change the URL/Port in the dispatcher, i get different errors. but the one that should work takes like 2 or 3 minutes and then times out.</p>\n\n<p>Have you got any ideas on what could be happening? Is there any special configuration I must set? </p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "edited": false, "score": 0, "creation_date": 1463516860, "post_id": 37285422, "comment_id": 62096236, "body": "Try to rename your <code>primo_db.rb</code> file to <code>primo_database.rb</code> so that the name of the file and the class defined on it have the same name"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1463517829, "post_id": 37285422, "comment_id": 62096728, "body": "Did you require <code>lib&#47;primo_db</code> somewhere?"}, {"owner": {"reputation": 799, "user_id": 5428615, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1084401491578780/picture?type=large", "display_name": "liborza", "link": "https://stackoverflow.com/users/5428615/liborza"}, "reply_to_user": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "edited": false, "score": 0, "creation_date": 1463518108, "post_id": 37285422, "comment_id": 62096898, "body": "@Bustikiller when i rename the folder, it doesn&#39;t help, same error.. @spickermann i try that and i don&#39;t receive error when i type <code>Accountstatus.getdata</code> =&gt; <code>nil</code> but when i&#39;m try to find something getting still error: doesn&#39;t exist: SELECT <code>accountstatuses</code>.* FROM <code>accountstatuses</code>"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1463519398, "post_id": 37285422, "comment_id": 62097521, "body": "And? Does a table named <code>accountstatuses</code> exist in your database?"}, {"owner": {"reputation": 799, "user_id": 5428615, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1084401491578780/picture?type=large", "display_name": "liborza", "link": "https://stackoverflow.com/users/5428615/liborza"}, "edited": false, "score": 0, "creation_date": 1463519661, "post_id": 37285422, "comment_id": 62097659, "body": "That&#39;s not really what im looking for.. dont wanna use local just be able to read data from external mysql db"}, {"owner": {"reputation": 799, "user_id": 5428615, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1084401491578780/picture?type=large", "display_name": "liborza", "link": "https://stackoverflow.com/users/5428615/liborza"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1463519833, "post_id": 37285422, "comment_id": 62097743, "body": "@spickermann its just trying to connect into mysql to <code>accountstatuses</code> table, but there&#39;s just <code>account</code> and then <code>accountStatus</code> = ActiveRecord::StatementInvalid: Mysql::Error: Table &#39;poll_useprimo_prod.accountstatuses&#39; doesn&#39;t exist: SELECT <code>accountstatuses</code>.* FROM <code>accountstatuses</code>"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1463520244, "post_id": 37285422, "comment_id": 62097925, "body": "When you have a model named <code>Accountstatus</code> than active record expects a tables named <code>accountstatuses</code>. If you want to use another name you have to configure another table name."}, {"owner": {"reputation": 799, "user_id": 5428615, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1084401491578780/picture?type=large", "display_name": "liborza", "link": "https://stackoverflow.com/users/5428615/liborza"}, "edited": false, "score": 0, "creation_date": 1463520331, "post_id": 37285422, "comment_id": 62097972, "body": "But if i rename it to Account i getting error: <code>NameError: uninitialized constant Account</code> and still it&#39;s gonna returning <code>accounts</code> instead <code>account</code>"}, {"owner": {"reputation": 799, "user_id": 5428615, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1084401491578780/picture?type=large", "display_name": "liborza", "link": "https://stackoverflow.com/users/5428615/liborza"}, "edited": false, "score": 0, "creation_date": 1463520630, "post_id": 37285422, "comment_id": 62098110, "body": "Thats weird i change it back ti <code>Accountstatus</code> and now its working"}], "answers": [{"tags": [], "owner": {"reputation": 799, "user_id": 5428615, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1084401491578780/picture?type=large", "display_name": "liborza", "link": "https://stackoverflow.com/users/5428615/liborza"}, "is_accepted": true, "score": 0, "last_activity_date": 1463527924, "creation_date": 1463527924, "answer_id": 37287830, "question_id": 37285422, "link": "https://stackoverflow.com/questions/37285422/rails-4-pull-data-from-external-mysql/37287830#37287830", "title": "Rails 4 - Pull data from external MySQL", "body": "<p>Alright i know where i did a mistake.</p>\n\n<ul>\n<li>The file has to be named like a class in that file so for me: <code>account.rb</code> and class <code>Account &lt; PrimoDatabase</code></li>\n<li>Then there should be before the class <code>require '*.rb'</code> from <code>lib</code></li>\n<li>Then i had to add <code>self.table_name = 'account'</code> to specify the table</li>\n<li>And call for connection is <code>Account.connection</code></li>\n</ul>\n\n<p>So then im able to connect to DB and pulling data from there.\nHope it helps to somebody.</p>\n\n<p><strong><em>EDITED MY QUESTION TO CORRECT ANSWER</em></strong></p>\n"}], "owner": {"reputation": 799, "user_id": 5428615, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1084401491578780/picture?type=large", "display_name": "liborza", "link": "https://stackoverflow.com/users/5428615/liborza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 37287830, "answer_count": 1, "score": 0, "last_activity_date": 1463528136, "creation_date": 1463515924, "last_edit_date": 1463528136, "question_id": 37285422, "link": "https://stackoverflow.com/questions/37285422/rails-4-pull-data-from-external-mysql", "title": "Rails 4 - Pull data from external MySQL", "body": "<p>I'm trying to connect external MySQL database into <strong>Rails 4</strong> and read data from there. So what i did so far:</p>\n\n<ul>\n<li>Create in <code>lib/primo_db.rb</code></li>\n<li>Create model <code>models/accountstatus.rb</code></li>\n</ul>\n\n<p><strong>primo_db.rb</strong></p>\n\n<pre><code>require 'active_record'  \nrequire 'mysql'\n\nclass PrimoDatabase &lt; ActiveRecord::Base\n  self.abstract_class = true\n  establish_connection(\n  :adapter  =&gt; 'mysql',\n  :database =&gt; '...',\n  :host     =&gt; '...',\n  :username =&gt; '...',\n  :password =&gt; '...'\n  )\nend\n</code></pre>\n\n<p><strong>account.rb</strong></p>\n\n<pre><code>require 'primo_database'\n\n    class Account &lt; PrimoDatabase\n        self.table_name = 'account'\n        def self.getdata\n\n        end\n    end\n</code></pre>\n\n<p><strong>And my question is:</strong></p>\n\n<ul>\n<li><p>How to test connection in console between them because when i run <code>Accountstatus.getdata</code> in rails console i get this error <code>NameError: uninitialized constant PrimoDatabase</code></p></li>\n<li><p>And if i run <code>ActiveRecod::Base.connection?</code> it's returning <code>false</code></p></li>\n</ul>\n\n<p>I know that I'm doing something wrong so I'll appreciate any help with that.</p>\n\n<p><strong><em>EDITED - SEE THE ANSWER TO UNDERSTAND WHAT I DID BELOW</em></strong></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1463514902, "post_id": 37285006, "comment_id": 62095234, "body": "While the result might be the same  would like to mention, that <code>== nil</code> is uncommon in Ruby, <code>nil?</code> is a more common Ruby idiom. And since <code>nil</code> is <code>falsey</code> you could also write <code>unless remember_digest</code> (without any further method calls)"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1463515081, "post_id": 37285006, "comment_id": 62095327, "body": "I agree with @spickermann also there is an actual difference <code>Object#nil?</code> simply responds with <code>Qfalse</code> and <code>NilClass#nil?</code> is the only class that overrides this with <code>Qtrue</code> where as <code>==</code> will actually perform a comparison so while the result is the same the former has a lesser impact on the interpreter (albeit extremely minimal)."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1463515818, "post_id": 37285006, "comment_id": 62095687, "body": "@engineersmnky <code>Qfalse</code> and such are really only relevant as C internals. <code>NilClass</code> (<code>nil</code>) and <code>FalseClass</code> (<code>false</code>) are their actual representations within Ruby."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1463515898, "post_id": 37285006, "comment_id": 62095728, "body": "Given <code>remember_digest</code> might reasonably be a <code>true</code> or <code>false</code> value you probably don&#39;t want to test vs <code>nil</code> specifically. You might want to do: <code>remember_digest and BCrypt::Password.new(...)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 5465, "user_id": 405796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ecvqq.jpg?s=128&g=1", "display_name": "craig.kaminsky", "link": "https://stackoverflow.com/users/405796/craig-kaminsky"}, "edited": false, "score": 0, "creation_date": 1463514617, "post_id": 37285052, "comment_id": 62095096, "body": "The only true difference(s) to me is <code>.nil?</code> is cleaner, more readable, and requires less typing :)"}], "tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": true, "score": 2, "last_activity_date": 1463514741, "last_edit_date": 1463514741, "creation_date": 1463514509, "answer_id": 37285052, "question_id": 37285006, "link": "https://stackoverflow.com/questions/37285006/difference-between-nil-and-nil/37285052#37285052", "title": "difference between .nil? and == nil", "body": "<p>No difference. According to <a href=\"http://ruby-doc.org/core-2.3.1/Object.html#method-i-nil-3F\" rel=\"nofollow\">docs</a>, only <code>nil</code> object  responds <code>true</code> to <code>nil?</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 6226499, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xgvw1AqWrbQ/AAAAAAAAAAI/AAAAAAAAAN0/BVylvg5KRL4/photo.jpg?sz=128", "display_name": "Drew Skrainka", "link": "https://stackoverflow.com/users/6226499/drew-skrainka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "closed_date": 1463515416, "accepted_answer_id": 37285052, "answer_count": 1, "score": 2, "last_activity_date": 1463514741, "creation_date": 1463514327, "last_edit_date": 1463514714, "question_id": 37285006, "link": "https://stackoverflow.com/questions/37285006/difference-between-nil-and-nil", "closed_reason": "Duplicate", "title": "difference between .nil? and == nil", "body": "<p>I'm working through the Ruby on Rails tutorial, and I'm curious about this codeblock:</p>\n\n<pre><code>if remember_digest.nil?\n    false\nelse\n    BCrypt::Password.new(remember_digest).is_password?(remember_token)\nend\n</code></pre>\n\n<p>is there a difference between <code>if remember_digest.nil?</code> and <code>if remember_digest == nil</code>, or is this just the author's preference? </p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 1700, "user_id": 5346828, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lSfnA.jpg?s=128&g=1", "display_name": "Pedro Vieira", "link": "https://stackoverflow.com/users/5346828/pedro-vieira"}, "edited": false, "score": 0, "creation_date": 1463590599, "post_id": 37284335, "comment_id": 62133244, "body": "I tried following the tutorial you linked, but I still couldn&#39;t achieve success. I made an <b>EDIT</b> section with the new update, if you could kindly take a look at it, thanks."}], "tags": [], "owner": {"reputation": 1117, "user_id": 2066608, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/56771e8ae8494e15f2794bb152ac54f5?s=128&d=identicon&r=PG", "display_name": "ppascualv", "link": "https://stackoverflow.com/users/2066608/ppascualv"}, "is_accepted": false, "score": 1, "last_activity_date": 1463511878, "creation_date": 1463511878, "answer_id": 37284335, "question_id": 37284251, "link": "https://stackoverflow.com/questions/37284251/how-use-a-ruby-code-inside-the-javascript/37284335#37284335", "title": "How use a ruby code inside the javascript", "body": "<p>You should take a look at <a href=\"http://edgeguides.rubyonrails.org/working_with_javascript_in_rails.html\" rel=\"nofollow\">Javascript with Rails</a>, for achive your proposit you will need to create a controller that responds with your js.erb, and this action should be called from a link with <code>data-remote=true</code> or from ajax.</p>\n"}, {"comments": [{"owner": {"reputation": 1700, "user_id": 5346828, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lSfnA.jpg?s=128&g=1", "display_name": "Pedro Vieira", "link": "https://stackoverflow.com/users/5346828/pedro-vieira"}, "edited": false, "score": 0, "creation_date": 1463590737, "post_id": 37304673, "comment_id": 62133305, "body": "I could try this,but I want to filter the search with a lot of columns, I should use <b>and</b> instead of <b>or</b> in the <b>terget.rb</b>? And the number of columns are dynamic so I don&#39;t think I can use only three columns..."}, {"owner": {"reputation": 174, "user_id": 4490949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30ebc44c9497aee659a026d9f07e962e?s=128&d=identicon&r=PG", "display_name": "Wei Jia Chen", "link": "https://stackoverflow.com/users/4490949/wei-jia-chen"}, "reply_to_user": {"reputation": 1700, "user_id": 5346828, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lSfnA.jpg?s=128&g=1", "display_name": "Pedro Vieira", "link": "https://stackoverflow.com/users/5346828/pedro-vieira"}, "edited": false, "score": 0, "creation_date": 1463591018, "post_id": 37304673, "comment_id": 62133446, "body": "Using <b>or</b> will return you all results if <b>any</b> column matches the query. You can use as many columns as you like but naturally this will affect speed of search, the example is purely an illustration."}, {"owner": {"reputation": 1700, "user_id": 5346828, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lSfnA.jpg?s=128&g=1", "display_name": "Pedro Vieira", "link": "https://stackoverflow.com/users/5346828/pedro-vieira"}, "edited": false, "score": 0, "creation_date": 1463591738, "post_id": 37304673, "comment_id": 62133873, "body": "Maybe I explained wrong. What I am trying to do is different, for example, imagine if I have two columns, name and address, in my search engine, if I type a name it will return me all people with that name, but if I add another filter by address and search for an address, I want it to return all people with that name and that address at same time."}], "tags": [], "owner": {"reputation": 174, "user_id": 4490949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30ebc44c9497aee659a026d9f07e962e?s=128&d=identicon&r=PG", "display_name": "Wei Jia Chen", "link": "https://stackoverflow.com/users/4490949/wei-jia-chen"}, "is_accepted": false, "score": 0, "last_activity_date": 1463587134, "creation_date": 1463587134, "answer_id": 37304673, "question_id": 37284251, "link": "https://stackoverflow.com/questions/37284251/how-use-a-ruby-code-inside-the-javascript/37304673#37304673", "title": "How use a ruby code inside the javascript", "body": "<p>You could do something like:</p>\n\n<p><strong>search_engine.html.erb</strong></p>\n\n<pre><code>&lt;%= form_tag(target_path, method: :get) do %&gt;\n    &lt;%= text_field_tag :query, nil, placeholder: \"Search by column names...\", class: \"form-control search-form\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>live_search.js</strong></p>\n\n<pre><code>$(document).on(\"change\", \".search-form\", function() {\n    return $(this).parents(\"form\").submit();\n});\n</code></pre>\n\n<p>Then in your target model, you could add a <code>search</code> scope to make it dynamic.</p>\n\n<p><strong>target.rb</strong></p>\n\n<pre><code>class Target &lt; ActiveRecord::Base\n    scope :search, -&gt; (query) {\n        return if query.blank?;\n        where(\"target.column_name1 ILIKE :query or target.column_name2 ILIKE :query or target.column_name3 ILIKE :query\", query: \"%#{query}%\") \n    }\nend\n</code></pre>\n\n<p>And in your <strong>targets_controller.rb</strong></p>\n\n<pre><code>class TargetsController &lt; ApplicationController\n    def search_engine\n        @targets = Target.search(params[:query])\n    end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1700, "user_id": 5346828, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lSfnA.jpg?s=128&g=1", "display_name": "Pedro Vieira", "link": "https://stackoverflow.com/users/5346828/pedro-vieira"}, "is_accepted": true, "score": 0, "last_activity_date": 1464009326, "creation_date": 1464009326, "answer_id": 37392029, "question_id": 37284251, "link": "https://stackoverflow.com/questions/37284251/how-use-a-ruby-code-inside-the-javascript/37392029#37392029", "title": "How use a ruby code inside the javascript", "body": "<p>I was able to solve my problem. I discovered that you can't render things in assets and you can't use ruby inside a JavaScript file. I did some workaround and got it done, I included the JavaScript code inside the <em>html.erb</em> file using the <code>&lt;script&gt; JavaScript code &lt;/script&gt;</code> syntax as shown here:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n\n  column =\n  '&lt;%= form_tag({controller: \"people\", action: \"index\"}, method: \"get\", remote: true) do %&gt;' +\n  '&lt;%  valid_column_names = Person.column_names.reject{|r| r == \"created_at\" || r == \"updated_at\" || r == \"slug\"} %&gt;' +\n  '&lt;%= j (select_tag :object_columns, options_for_select(valid_column_names)) %&gt;' +\n  '&lt;%= text_field_tag :search, '', autocomplete: :off %&gt;' +\n  '&lt;% end %&gt;';\n\n  $('button').on('click',function(){\n    $('button').after(column);\n  });\n\n&lt;/script&gt;\n</code></pre>\n\n<p>Because the <em>select_tag</em> ruby line generated a sentence with lots of quotation marks, the <strong>j</strong> used is the same as <strong>escape_javascript</strong> and it is used to format a sentence so the JavaScript can read it properly. </p>\n"}], "owner": {"reputation": 1700, "user_id": 5346828, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lSfnA.jpg?s=128&g=1", "display_name": "Pedro Vieira", "link": "https://stackoverflow.com/users/5346828/pedro-vieira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2239, "favorite_count": 0, "accepted_answer_id": 37392029, "answer_count": 3, "score": 0, "last_activity_date": 1464009326, "creation_date": 1463511600, "last_edit_date": 1463590430, "question_id": 37284251, "link": "https://stackoverflow.com/questions/37284251/how-use-a-ruby-code-inside-the-javascript", "title": "How use a ruby code inside the javascript", "body": "<p>I am implementing a live search with a drop down containing multiple fields to filter through.It starts with only one search field, a drop down to select what to be searched for and a button to add more filters, when the user click the button, it generate a new field like this:<a href=\"https://i.stack.imgur.com/ehy9I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ehy9I.png\" alt=\"enter image description here\"></a></p>\n\n<p>This image sample was done hard coded with the html inside the JavaScript. The problem is that I will use it in a lot of views so I need it to be dynamic as the code I previously done with Ruby to generate the first search field. I tried doing this way, but no success was achieved.</p>\n\n<p><strong>live_search.js.erb</strong></p>\n\n<pre><code>$(function () {\n\n    function search() {\n        $.get(window.location.href, { object_columns: $(\"select#object_columns\").val(), search: $(\"#search\").val() }, null, \"script\");\n    };\n\n    $(\"select#object_columns\").change(search);\n    $(\"input#search\").keyup(search);\n\n    $('button').on('click',function(){\n      column = \"&lt;%= j render 'shared/search_engine' %&gt;\";\n      $('#search-form').after(column);\n    });\n});\n</code></pre>\n\n<p><strong>search_engine.html.erb</strong></p>\n\n<pre><code>&lt;div id=\"search-form\"&gt;\n  &lt;%= form_tag do %&gt;\n  &lt;% valid_column_names = target.column_names.reject{|r| r == \"created_at\" || r == \"updated_at\" || r == \"slug\"} %&gt;\n  &lt;%= select_tag :object_columns, options_for_select(valid_column_names) %&gt;\n  &lt;%= text_field_tag :search, '', autocomplete: :off %&gt;\n  &lt;% end %&gt;\n  &lt;%= button_tag \"+\" %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I even tried to call the \"search-form\" in the JavaScript to replicate the code when the button was clicked but I read that it is not possible.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I made some changes as @ppascualv suggested, but I still can't render and add another \"search_engine\" when I click the button. I am getting an error saying <em>undefined method 'render'</em>.</p>\n\n<p><strong>live_search.js.erb</strong></p>\n\n<pre><code>$(function () {\n\n    function search() {\n        $.get(window.location.href, { object_columns: $(\"select#object_columns\").val(), search: $(\"#search\").val() }, null, \"script\");\n    };\n\n    $(\"select#object_columns\").change(search);\n    $(\"input#search\").keyup(search);\n\n    $('button').on('click',function(){\n      $('button').append(\"&lt;%= escape_javascript(render @search_engine) %&gt;\");\n    });\n});\n</code></pre>\n\n<p><strong>search_engine.html.erb</strong></p>\n\n<pre><code>&lt;div id=\"search-form\"&gt;\n  &lt;%= form_tag({controller: \"house_activities\", action: \"index\"}, method: \"get\", remote: true) do %&gt;\n  &lt;%  valid_column_names = HouseActivity.column_names.reject{|r| r == \"created_at\" || r == \"updated_at\" || r == \"slug\"} %&gt;\n  &lt;%= select_tag :object_columns, options_for_select(valid_column_names) %&gt;\n  &lt;%= text_field_tag :search, '', autocomplete: :off %&gt;\n  &lt;% end %&gt;\n  &lt;%= button_tag \"+\" %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>house_activities_controller.rb</strong></p>\n\n<pre><code>class HouseActivitiesController &lt; ApplicationController\n  before_action :set_house_activity, only: [:show, :edit, :update, :destroy]\n\n  def index\n    @house_activities = HouseActivity.page(params[:page]).per(5).search_for(params[:object_columns], params[:search])\n    respond_to do |format|\n      format.js\n      format.html\n    end\n  end\nend\n</code></pre>\n"}]