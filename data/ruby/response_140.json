[{"tags": ["ruby-on-rails", "arrays", "ruby", "mongodb", "mongoid"], "comments": [{"owner": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "edited": false, "score": 0, "creation_date": 1505355316, "post_id": 46208084, "comment_id": 79382150, "body": "Ok, so you are trying to create a <code>BatchKeg</code> for each <code>Keg</code> you select in the form? Looks like you are doing that in the &quot;join&quot; controller, but you are not saving the <code>keg_id</code> in the <code>BatchKeg</code> create call. I&#39;m not really sure what the problem is. Please try to clean up the code you posted as there seems to be some typos."}, {"owner": {"reputation": 35, "user_id": 8458034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11c5586f84cd23ffadf8cba4426b0feb?s=128&d=identicon&r=PG&f=1", "display_name": "kchucke", "link": "https://stackoverflow.com/users/8458034/kchucke"}, "reply_to_user": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "edited": false, "score": 0, "creation_date": 1505357294, "post_id": 46208084, "comment_id": 79382580, "body": "Thanks for replying Ryan! You are correct. I&#39;m trying to save each keg_id in BatchKeg. I do need the user ID, but had a hard time getting it though, so I removed it to try and tried to get the line open and work it in from there. I thought I added a screen shot of the error message to the initial post, I just added it for reference."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 8458034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11c5586f84cd23ffadf8cba4426b0feb?s=128&d=identicon&r=PG&f=1", "display_name": "kchucke", "link": "https://stackoverflow.com/users/8458034/kchucke"}, "edited": false, "score": 1, "creation_date": 1505432581, "post_id": 46220348, "comment_id": 79423299, "body": "you are a lifesaver sir. Thank you. And sorry about those typos, I&#39;m brand new to programming and this site and somehow pasted the tag for the error message image into the code in my post, I appreciate your patience."}], "tags": [], "owner": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1505395301, "creation_date": 1505395301, "answer_id": 46220348, "question_id": 46208084, "link": "https://stackoverflow.com/questions/46208084/multiple-objects-from-list-of-names-in-an-array/46220348#46220348", "title": "Multiple objects from list of names in an array", "body": "<p>Well the error message is pretty clear. You are passing <code>params</code> as a parameter into <code>batch_kegs_ids</code>, but that method is expecting no parameters. Besides, it looks like the <code>batch_kegs_ids</code> method is empty (no code). I'd remove that entirely (probably not supposed to be there anyways). </p>\n\n<p>I'd also change the <code>create_multiple</code> method to</p>\n\n<pre><code> def create_multiple\n   params[:batch_keg_ids].each do |id| \n     BatchKeg.create(keg_id: id, wholesale_inventory: true, taproom_inventory: true, hold_inventory: false, active: true, visible: true)\n   end\n   redirect_to batches_url\n end\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 8458034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11c5586f84cd23ffadf8cba4426b0feb?s=128&d=identicon&r=PG&f=1", "display_name": "kchucke", "link": "https://stackoverflow.com/users/8458034/kchucke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 46220348, "answer_count": 1, "score": 0, "last_activity_date": 1505395301, "creation_date": 1505343799, "last_edit_date": 1505363936, "question_id": 46208084, "link": "https://stackoverflow.com/questions/46208084/multiple-objects-from-list-of-names-in-an-array", "title": "Multiple objects from list of names in an array", "body": "<p><a href=\"https://i.stack.imgur.com/UE4r2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UE4r2.png\" alt=\"enter image description here\"></a>I'm trying to create an individual record for each name in an array. The array originates via a form in one controller and the individual records need to be saved in a join (type) table (I know there are not \"join\" tables in mongo, but it's the best way to describe it). Currently running Rails 5 with Mongoid/MongoDB. </p>\n\n<p>Originating Form:</p>\n\n<pre><code>    &lt;%= form_tag create_multiple_batch_keg_index_path, method: \n        :create do |form|%&gt;\n        &lt;div class=\"field\"&gt;\n        &lt;table class=\"table table-hover table-condensed\"&gt;\n        &lt;thead&gt;\n        &lt;tr&gt;\n          &lt;th&gt;Select All&lt;/th&gt;\n          &lt;th&gt;Keg Name&lt;/th&gt;\n        &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n          &lt;% Keg.each do |batch_keg| %&gt;\n              &lt;tr&gt;\n                &lt;td&gt;&lt;%= check_box_tag 'batch_keg_ids[]', batch_keg.id \n                -%&gt; &lt;/td&gt;\n                &lt;td&gt;&lt;%= batch_keg.name -%&gt; &lt;/td&gt;\n              &lt;/tr&gt;\n          &lt;% end %&gt;\n        &lt;/tbody&gt;\n        &lt;/table&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<p>Originating Controller Params:</p>\n\n<pre><code>    def batch_params\n     params.require(:batch).permit(:batch_keg_attributes =&gt; [keg_id, \n     :active, :visible, :wholesale_inventory, :taproom_inventory, \n     :hold_inventory])\n    end \n</code></pre>\n\n<p>Join Controller</p>\n\n<pre><code>    def create_multiple\n     batch_keg_ids(params).flatted.map{|ids| \n     BatchKeg.create(:wholesale_inventory =&gt; true, :taproom_inventory \n     =&gt; true, :hold_inventory =&gt; false, :active =&gt; true, :visible =&gt; \n     true)}redirect_to batches_url\n    end\n</code></pre>\n\n<p>Routes</p>\n\n<pre><code>    resources :batch_keg do\n     collection do\n      post :create_multiple\n      put :update_multiple\n      get :collection\n     end\n    end\n</code></pre>\n\n<p>I think I've got most of the process completed successfully (I've worked through several error messages to this point, but I'm stuck). I've searched all over the inter-webs trying to find a solution but haven't been able to find one that has worked. I'm either A), close but not quite there, or B) completely off course. </p>\n\n<p>It looks like I'm getting the data I need through, but unclear on how I need to use it in the join controller (I think), I've been on this for hours and my brain is mush. I feel like I need to create a variable in the join controller to hold the data, which is here I was headed. Thanks in advance for any suggestions for this code, or a more efficient way to do this. </p>\n"}, {"tags": ["arrays", "ruby", "file"], "comments": [{"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1505343000, "post_id": 46207806, "comment_id": 79379234, "body": "might also want to look at the <a href=\"https://ruby-doc.org/stdlib-2.4.0/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow noreferrer\"><code>CSV</code></a> class as a specific use case of writing arrays as comma separated values to a file"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8381100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a4734e2da3453c926e5b1710a70e081?s=128&d=identicon&r=PG&f=1", "display_name": "Nightwisher", "link": "https://stackoverflow.com/users/8381100/nightwisher"}, "edited": false, "score": 0, "creation_date": 1505343071, "post_id": 46207842, "comment_id": 79379255, "body": "Wow, brilliant! Thank you so much! It works! :-)"}], "tags": [], "owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "is_accepted": false, "score": 4, "last_activity_date": 1505342274, "creation_date": 1505342274, "answer_id": 46207842, "question_id": 46207806, "link": "https://stackoverflow.com/questions/46207806/writing-an-array-in-a-file-in-ruby/46207842#46207842", "title": "Writing an array in a file in ruby", "body": "<p>You can use the <code>join</code> method on the array to do this.</p>\n\n<pre><code>a= [\"Tom\", \"Jerry\"]\nputs a.join(\", \")\n</code></pre>\n\n<p>Interestingly, you can also multiply the array by the string you wish to separate the elements by:</p>\n\n<pre><code>a= [\"Tom\", \"Jerry\"]\nputs a * \", \"\n</code></pre>\n\n<p>Both of the above give the same output:</p>\n\n<pre><code>Tom, Jerry\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8381100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a4734e2da3453c926e5b1710a70e081?s=128&d=identicon&r=PG&f=1", "display_name": "Nightwisher", "link": "https://stackoverflow.com/users/8381100/nightwisher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "closed_date": 1505342856, "answer_count": 1, "score": 1, "last_activity_date": 1505342274, "creation_date": 1505342078, "question_id": 46207806, "link": "https://stackoverflow.com/questions/46207806/writing-an-array-in-a-file-in-ruby", "closed_reason": "Duplicate", "title": "Writing an array in a file in ruby", "body": "<p>how to write an array in Ruby keeping the elements of the array itself in the same line?</p>\n\n<p>E.g.</p>\n\n<pre><code>a= [\"Tom\", \"Jerry\"]\nputs a\n</code></pre>\n\n<p>gives:</p>\n\n<pre><code>Tom\nJerry\n</code></pre>\n\n<p>But I need to have:</p>\n\n<pre><code>Tom, Jerry\n</code></pre>\n\n<p>Thank you for your help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twilio"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1505340553, "post_id": 46207355, "comment_id": 79378458, "body": "<a href=\"http://api.rubyonrails.org/classes/ActiveSupport/Rescuable/ClassMethods.html\" rel=\"nofollow noreferrer\"><code>rescue_from NameOfTheTwilioException, with: :how_to_handle_it</code></a>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1505340635, "post_id": 46207355, "comment_id": 79378485, "body": "Or you could just wrap the controller code that calls the <code>Messenger</code> in a <code>begin...rescue...end</code> block."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1505340651, "post_id": 46207355, "comment_id": 79378492, "body": "By the way, it&#39;s spelt &quot;messenger&quot;, not &quot;messager&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 28, "user_id": 8360591, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ze0lIn6h910/AAAAAAAAAAI/AAAAAAAAAEM/Odz3k2nhkmM/photo.jpg?sz=128", "display_name": "J Calton", "link": "https://stackoverflow.com/users/8360591/j-calton"}, "edited": false, "score": 0, "creation_date": 1505888711, "post_id": 46242096, "comment_id": 79590840, "body": "Thank you so much! When I deployed to Heroku, a wrong phone number just redirects to the user page, so I was (sort of) able to avoid that problem. However, I want my app to handle errors appropriately.   I appreciate a big-time developer like yourself helping out a small-time developer ;-) Cheers!"}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "reply_to_user": {"reputation": 28, "user_id": 8360591, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ze0lIn6h910/AAAAAAAAAAI/AAAAAAAAAEM/Odz3k2nhkmM/photo.jpg?sz=128", "display_name": "J Calton", "link": "https://stackoverflow.com/users/8360591/j-calton"}, "edited": false, "score": 0, "creation_date": 1505921925, "post_id": 46242096, "comment_id": 79613416, "body": "Just glad to have helped out. Hope the rest of the app goes well!"}], "tags": [], "owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "is_accepted": true, "score": 5, "last_activity_date": 1505486150, "creation_date": 1505486150, "answer_id": 46242096, "question_id": 46207355, "link": "https://stackoverflow.com/questions/46207355/how-to-deal-with-twilio-api-sms-errors-and-invalid-phone-numbers-in-rails/46242096#46242096", "title": "How to deal with Twilio API SMS errors and invalid phone numbers in Rails", "body": "<p>Twilio developer evangelist here.</p>\n\n<p>When you make a request to the Twilio API using the Ruby gem and something goes wrong, the library will throw an error of type <code>Twilio::REST::RestError</code>.</p>\n\n<p>In order to avoid a 500 error for your user you should rescue from this error and do something else with your controller. I'm not sure what your controller looks like, so I'll take a guess at what you should do.</p>\n\n<p>First, I'd update the <code>Messager</code> class to store the error message if you get one. Also, the <code>send_message</code> function should return a boolean to describe whether the message was successfully sent.</p>\n\n<pre><code>class Messager\n  attr_reader :error\n\n  def initialize\n    @account_sid = ENV['ACCOUNT_SID']\n    @auth_token = ENV['AUTH_TOKEN']\n    @twilio_number = ENV['TWILIO_NUMBER']\n    @client = Twilio::REST::Client.new @account_sid, @auth_token\n  end\n\n  def send_message(phone_number, movies, username)\n    begin\n      text_message = @client.api.account.messages.create(\n        from: @twilio_number,\n        to: phone_number,\n        body: \"Hello movie lover, #{username}!\\nHere is your current watch list:\\n#{movies}\"\n      )\n      return true\n    rescue Twilio::REST::RestError =&gt; error\n      @error = error\n      return false\n    end\n  end\nend\n</code></pre>\n\n<p>Then, in your controller you can call <code>send_message</code> and do different things if the message is successful or otherwise.</p>\n\n<pre><code>class MessagingController &lt; ApplicationController\n  def create\n    messager = Messager.new\n    if messager.send_message(params[:phone_number], current_user.movies, current_user.username)\n      # Success! Message sent!\n      # Now do what you were going to do with the successfull result\n    else\n      # Boo, something happened.\n      Rails.logger.warn(\"#{messager.error.code}: #{messager.error.message}\")\n      # Redirect or render an action with an error here.\n    end\n  end\nend\n</code></pre>\n\n<p>Let me know if that helps at all.</p>\n"}], "owner": {"reputation": 28, "user_id": 8360591, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ze0lIn6h910/AAAAAAAAAAI/AAAAAAAAAEM/Odz3k2nhkmM/photo.jpg?sz=128", "display_name": "J Calton", "link": "https://stackoverflow.com/users/8360591/j-calton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1393, "favorite_count": 1, "accepted_answer_id": 46242096, "answer_count": 1, "score": 1, "last_activity_date": 1505486150, "creation_date": 1505339451, "question_id": 46207355, "link": "https://stackoverflow.com/questions/46207355/how-to-deal-with-twilio-api-sms-errors-and-invalid-phone-numbers-in-rails", "title": "How to deal with Twilio API SMS errors and invalid phone numbers in Rails", "body": "<p>How can I handle errors in the Twilio API in regards to creating an SMS message?</p>\n\n<p>Every time an invalid phone number gets entered, I get a message and a 500 error:</p>\n\n<blockquote>\n  <p>Unable to create record: The 'To' number is not a valid phone number.</p>\n</blockquote>\n\n<p>How can I have it redirect back to the home page and simply flash an error notice? </p>\n\n<pre><code>class Messager\n\ndef initialize\n  @account_sid = ENV['ACCOUNT_SID']\n  @auth_token = ENV['AUTH_TOKEN']\n  @twilio_number = ENV['TWILIO_NUMBER']\n\n\n  @client = Twilio::REST::Client.new @account_sid, @auth_token\n\nend\ndef send_message(phone_number, movies, username)\n\n  text_message = @client.api.account.messages.create(\n    from: @twilio_number,\n    to: phone_number,\n    body: \"Hello movie lover, #{username}!\\nHere is your current watch list:\\n#{movies}\"\n    )\n  puts text_message.to\nend\nend\n</code></pre>\n\n<p>I don't need anything fancy, just a redirect to the main page and a quick error message saying their phone number is invalid, not a 500 error page. I'm new to the Twilio API, and I've been troubleshooting this issue for hours. </p>\n"}, {"tags": ["ruby", "azure", "azure-storage", "fog"], "answers": [{"comments": [{"owner": {"reputation": 324, "user_id": 2881055, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8169d2d8a50adcf5e923478713260887?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/2881055/ram"}, "edited": false, "score": 0, "creation_date": 1505399852, "post_id": 46209749, "comment_id": 79406770, "body": "Thank you that worked for me. is there way to use wilcards in searching the vhds?"}, {"owner": {"reputation": 16980, "user_id": 6997262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbad57a52de9c231e494995eebd51f2a?s=128&d=identicon&r=PG&f=1", "display_name": "Shui shengbao", "link": "https://stackoverflow.com/users/6997262/shui-shengbao"}, "reply_to_user": {"reputation": 324, "user_id": 2881055, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8169d2d8a50adcf5e923478713260887?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/2881055/ram"}, "edited": false, "score": 0, "creation_date": 1505454836, "post_id": 46209749, "comment_id": 79428466, "body": "<code>use wilcards in searching the vhds</code> what do you mean?"}], "tags": [], "owner": {"reputation": 16980, "user_id": 6997262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbad57a52de9c231e494995eebd51f2a?s=128&d=identicon&r=PG&f=1", "display_name": "Shui shengbao", "link": "https://stackoverflow.com/users/6997262/shui-shengbao"}, "is_accepted": true, "score": 1, "last_activity_date": 1505357505, "creation_date": 1505357505, "answer_id": 46209749, "question_id": 46207129, "link": "https://stackoverflow.com/questions/46207129/fog-azure-rm-creating-disks-fails-with-uninitialized-constant-azurecore/46209749#46209749", "title": "fog-azure-rm: creating Disks fails with uninitialized constant Azure::Core", "body": "<p>First of all, you need to require the Fog library by executing:</p>\n\n<pre><code>require 'fog/azurerm'\n</code></pre>\n\n<p>Next, if you use existing storage account, please add storage account and key to the connection. If I remove them from my code, I get same error log with you. The following codes work for me. Please replace * to your value.</p>\n\n<pre><code>require 'fog/azurerm'\nazure_storage_service = Fog::Storage.new(\n  :provider =&gt; 'AzureRM',\n  :tenant_id =&gt; '*****',                                                       # Tenant id of Azure Active Directory Application\n  :client_id =&gt;    '*****************',                                                    # Client id of Azure Active Directory Application\n  :client_secret =&gt; '************',                                               # Client Secret of Azure Active Directory Application\n  :subscription_id =&gt; '***************',                                           # Subscription id of an Azure Account\n  :azure_storage_account_name =&gt; 'shuiwindiag907',                            # Name of an Azure Storage Account\n  :azure_storage_access_key =&gt; '************************',                               # Key of an Azure Storage Account\n  :environment =&gt; 'AzureCloud' # Azure cloud environment. Default is AzureCloud.\n)\n\nazure_storage_service.create_disk('shui_test',5) ##By default the disk will be created in the container 'vhds'. If the container does not exist, please create it or set options[:container_name].\n</code></pre>\n\n<p>More information please refer to this <a href=\"https://github.com/fog/fog-azure-rm/blob/master/lib/fog/azurerm/docs/storage.md\" rel=\"nofollow noreferrer\">link</a>.</p>\n"}], "owner": {"reputation": 324, "user_id": 2881055, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8169d2d8a50adcf5e923478713260887?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/2881055/ram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 46209749, "answer_count": 1, "score": 0, "last_activity_date": 1505453210, "creation_date": 1505338258, "last_edit_date": 1505453210, "question_id": 46207129, "link": "https://stackoverflow.com/questions/46207129/fog-azure-rm-creating-disks-fails-with-uninitialized-constant-azurecore", "title": "fog-azure-rm: creating Disks fails with uninitialized constant Azure::Core", "body": "<p>I'm unable to create the disks in azure. Below are the steps I did to create but it is failing.</p>\n\n<p>Versions:</p>\n\n<p>fog-azure-rm (0.3.2)</p>\n\n<p>ruby version 2.4.0</p>\n\n<pre><code>azure_storage_service = Fog::Storage::AzureRM.new(\n  :tenant_id =&gt; '&lt;Tenantid&gt;',                                                      \n  :client_id =&gt;    '&lt;Clientid&gt;',                                                   \n  :client_secret =&gt; '&lt;ClientSecret&gt;',                                              \n  :subscription_id =&gt; '&lt;Subscriptionid&gt;'\n)\n\n\n\n\n\n azure_storage_service.create_disk('disk_name',1023)\n\n/usr/local/lib/ruby/gems/2.4.0/gems/fog-azure-rm-0.3.2/lib/fog/azurerm/requests/storage/create_page_blob.rb:13:in `rescue in create_page_blob': uninitialized constant Azure::Core (NameError)\n    from /usr/local/lib/ruby/gems/2.4.0/gems/fog-azure-rm-0.3.2/lib/fog/azurerm/requests/storage/create_page_blob.rb:11:in `create_page_blob'\n    from /usr/local/lib/ruby/gems/2.4.0/gems/fog-azure-rm-0.3.2/lib/fog/azurerm/requests/storage/create_disk.rb:37:in `create_disk'\n    from createDisk.rb:12:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sendgrid", "cloud9-ide"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 1, "creation_date": 1505348561, "post_id": 46207057, "comment_id": 79380657, "body": "It means that <code>mail.attachments</code> is returning nil. Where is the <code>mail</code> variable coming from?"}, {"owner": {"reputation": 1155, "user_id": 1238850, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8bd41a9c571ca73d7afab709ad4be01?s=128&d=identicon&r=PG", "display_name": "mpora", "link": "https://stackoverflow.com/users/1238850/mpora"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1505401121, "post_id": 46207057, "comment_id": 79407705, "body": "I have updated the source code in the question."}, {"owner": {"reputation": 1155, "user_id": 1238850, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8bd41a9c571ca73d7afab709ad4be01?s=128&d=identicon&r=PG", "display_name": "mpora", "link": "https://stackoverflow.com/users/1238850/mpora"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1505401428, "post_id": 46207057, "comment_id": 79407898, "body": "Please check again"}], "answers": [{"comments": [{"owner": {"reputation": 1155, "user_id": 1238850, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8bd41a9c571ca73d7afab709ad4be01?s=128&d=identicon&r=PG", "display_name": "mpora", "link": "https://stackoverflow.com/users/1238850/mpora"}, "edited": false, "score": 0, "creation_date": 1505407524, "post_id": 46224111, "comment_id": 79411988, "body": "This didn&#39;t work either. The example I am using is from here:  <a href=\"https://github.com/sendgrid/sendgrid-ruby#with-mail-helper-class\" rel=\"nofollow noreferrer\">github.com/sendgrid/sendgrid-ruby#with-mail-helper-class</a>"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 1155, "user_id": 1238850, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8bd41a9c571ca73d7afab709ad4be01?s=128&d=identicon&r=PG", "display_name": "mpora", "link": "https://stackoverflow.com/users/1238850/mpora"}, "edited": false, "score": 0, "creation_date": 1505409736, "post_id": 46224111, "comment_id": 79413313, "body": "What line is throwing the error? Please include a full stack dump that includes the error."}, {"owner": {"reputation": 1155, "user_id": 1238850, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8bd41a9c571ca73d7afab709ad4be01?s=128&d=identicon&r=PG", "display_name": "mpora", "link": "https://stackoverflow.com/users/1238850/mpora"}, "edited": false, "score": 0, "creation_date": 1505411835, "post_id": 46224111, "comment_id": 79414467, "body": "the <code>mail.attachments[&#39;test.txt&#39;] = File.read(&quot;#{Rails.root}&#47;public&#47;test.txt&quot;)</code> line"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 1155, "user_id": 1238850, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8bd41a9c571ca73d7afab709ad4be01?s=128&d=identicon&r=PG", "display_name": "mpora", "link": "https://stackoverflow.com/users/1238850/mpora"}, "edited": false, "score": 0, "creation_date": 1505412396, "post_id": 46224111, "comment_id": 79414797, "body": "Well that is odd, because I can type all those lines verbatim into Rails console and I get back a Mail object with the attachment on it. Don&#39;t know what to tell you. How are you running your code? Have you tried running the Rails console and typing the lines one at a time?"}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": false, "score": 0, "last_activity_date": 1505406226, "creation_date": 1505406226, "answer_id": 46224111, "question_id": 46207057, "link": "https://stackoverflow.com/questions/46207057/mail-attachment-sendgrid-using-ruby/46224111#46224111", "title": "mail attachment SendGrid using ruby", "body": "<p>Per the <a href=\"http://www.rubydoc.info/github/mikel/mail/Mail%2Enew\" rel=\"nofollow noreferrer\">docs</a>, normally you would create a new <code>Mail</code> object using a Hash with the values being Strings. It's hard to tell, because I don't know what your <code>Email</code> or <code>Content</code> classes are doing, but I suspect something is going wrong when you create <code>mail</code>. Let's get those unknown classes out of the picture for starters. </p>\n\n<p>Try changing your code to:</p>\n\n<pre><code>from = 'mail@mail.com'\nto = 'mail@mail.com'\nsubject = 'file for this week'\ncontent = 'Please find file for this week.'\n\nmail = Mail.new(from: from, to: to, subject: subject, body: content)\nmail.attachments['test.txt'] = File.read(\"#{Rails.root}/public/test.txt\")\n\nsg = SendGrid::API.new(api_key:'myapikey')\nsg.client.mail._('send').post(request_body: mail.to_json)\n</code></pre>\n"}], "owner": {"reputation": 1155, "user_id": 1238850, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8bd41a9c571ca73d7afab709ad4be01?s=128&d=identicon&r=PG", "display_name": "mpora", "link": "https://stackoverflow.com/users/1238850/mpora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 662, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505406536, "creation_date": 1505337942, "last_edit_date": 1505406536, "question_id": 46207057, "link": "https://stackoverflow.com/questions/46207057/mail-attachment-sendgrid-using-ruby", "title": "mail attachment SendGrid using ruby", "body": "<p>I am trying to send an email with an attachment in Ruby and I have the following line:</p>\n\n<pre><code>from = Email.new(email: 'mail@mail.com')\nto = Email.new(email: 'mail@mail.com')\nsubject = 'file for this week'\ncontent = Content.new(type: 'text/plain', value: 'Please find file for this week.')\nmail = Mail.new(from, subject, to, content)\nmail.attachments['test.txt'] = File.read(\"#{Rails.root}/public/test.txt\")\nsg = SendGrid::API.new(api_key:'myapikey')\nsg.client.mail._('send').post(request_body: mail.to_json)\n</code></pre>\n\n<p>The issue is code by the following line (when I remove it, I receive an email):</p>\n\n<pre><code>mail.attachments['test.txt'] = File.read(\"#{Rails.root}/public/test.txt\")\n</code></pre>\n\n<p>But when I try to run it, I get the following error:</p>\n\n<p><code>undefined method '[]=' for nil:NilClass</code></p>\n\n<p>Has anyone faced this error before?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf", "rspec"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1505349434, "post_id": 46206370, "comment_id": 79380854, "body": "<code>pdf_doc</code> is a String, and there is no method <code>#render</code> for a String instance. I think you need to call <code>PDF::Inspector::Text.analyze(pdf_doc)</code>."}, {"owner": {"reputation": 457, "user_id": 8213274, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/73e9d3e2734c77ffe9aeef27b2e00a3a?s=128&d=identicon&r=PG&f=1", "display_name": "eth3rnit3", "link": "https://stackoverflow.com/users/8213274/eth3rnit3"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1505373707, "post_id": 46206370, "comment_id": 79388661, "body": "YES you&#39;re the best !!! thanks you very much ;-)))"}], "owner": {"reputation": 457, "user_id": 8213274, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/73e9d3e2734c77ffe9aeef27b2e00a3a?s=128&d=identicon&r=PG&f=1", "display_name": "eth3rnit3", "link": "https://stackoverflow.com/users/8213274/eth3rnit3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 632, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1505334763, "creation_date": 1505334763, "question_id": 46206370, "link": "https://stackoverflow.com/questions/46206370/check-prawn-pdf-content-after-rendering-with-rspec", "title": "check prawn pdf content after rendering with rspec", "body": "<p>I'm trying to test the content of a pdf generated by prawn, i would like to be sure that the information entered comes from the order. I get this one in the response, but firstly I'm not sure that the content is totally clean and secondly how to read the content? I'm trying with pdf-inspector but I'm not sure I'm doing it the right way.</p>\n\n<p>in my spec file :</p>\n\n<pre><code>get :invoice, params: {id: order.number, order_token: order.guest_token, format: :pdf}, format: :pdf\npdf_doc = response.body\nrendered_pdf = pdf_doc.render\ntext_analysis = PDF::Inspector::Text.analyze(rendered_pdf)\nputs text_analysis.strings\n</code></pre>\n\n<p>rspec result :</p>\n\n<pre><code>  1) Spree::OrdersController#With the right token should not return an empty pdf\n     Failure/Error: rendered_pdf = pdf_doc.render\n\n     NoMethodError:\n       undefined method `render' for #&lt;String:0x0056490fd3b7c0&gt;\n     # ./spec/controllers/spree/frontend/orders_controller_decorator_spec.rb:43:in `block (3 levels) in &lt;top (required)&gt;'\n\nFinished in 17.42 seconds (files took 8.08 seconds to load)\n1 example, 1 failure\n</code></pre>\n\n<p>and the response.body : </p>\n\n<pre><code>\"%PDF-1.3\\n%\\xFF\\xFF\\xFF\\xFF\\n1 0 obj\\n&lt;&lt; /Creator &lt;feff0050007200610077006e&gt;\\n/Producer &lt;feff0050007200610077006e&gt;\\n&gt;&gt;\\nendobj\\n2 0 obj\\n&lt;&lt; /Type /Catalog\\n/Pages 3 0 R\\n&gt;&gt;\\nendobj\\n3 0 obj\\n&lt;&lt; /Type /Pages\\n/Count 1\\n/Kids [5 0 R]\\n&gt;&gt;\\nendobj\\n4 0 obj\\n&lt;&lt; /Length 14202\\n&gt;&gt;\\nstream\\nq\\n/DeviceRGB cs\\n0.000 0.000 0.000 scn\\n\\nBT\\n519.396 813.274 Td\\n/F2.0 12 Tf\\n[&lt;46&gt; 80 &lt;41&gt; 40 &lt;4354555245&gt;] TJ\\nET\\n\\n\\nq\\n134.500 0 0 53.000 76.000 747.000 cm\\n/I1 Do\\nQ\\n\\nBT\\n108.218 726.384 Td\\n/F1.0 12 Tf\\n[&lt;4772&gt; 10 &lt;616e647376696e73&gt;] TJ\\nET\\n\\n\\nBT\\n79.598 712.512 Td\\n/F1.0 12 Tf\\n[&lt;496d6d657562&gt; 20 &lt;6c652053e96d6170686f7265&gt;] TJ\\nET\\n\\n\\nBT\\n67.706 698.6399999999999 Td\\n/F1.0 12 Tf\\n[&lt;31382072&gt; -15 &lt;756520426f696c656175202d204353203730303132&gt;] TJ\\nET\\n\\n\\nBT\\n64.442 684.7679999999998x00nq\\xD2T~\\xEFz\\xD0\\xFF\\x00\\x18\\xFA\\x7FK\\xE6\\xFD'\\xB5\\xCB\\xFA\\xC9\\x9F\\x85\\xFA\\xD3\\x8Bn\\xAF\\xA8c:\\xBC\\x1A\\x1A\\xD7\\x90\\xDE\\xA3S\\xFE\\xCF\\xF6/}\\x18\\xD9\\x1F\\xAD\\xBA\\xCF\\xE6\\xB2\\x7FKM\\x98\\x99*t\\xF5\\xBE\\xAB\\x8D\\x9EzI\\xDB\\xD43M\\xB5\\xE3\\v.\\xB1\\xB4U\\xBD\\x98l\\xCE\\xBE\\xF6\\xB7\\x1F\\x16\\xCB\\x18\\xDB\\x9F\\xBF\\xF4_\\xA6\\xFF\\x00\\x83\\xF4\\xEBC\\xC3\\xFF\\x00\\xC4\\xF7\\xD5\\x7F\\xF8\\xFCo\\xFC\\xF7r\\xBA?\\xF1D\\x7F\\xF0\\xD9\\xFF\\x00\\xDB&amp;!\\xF6\\xA3\\xF54~]\\xA5\\xF6\\xFF\\x00\\x92\\xF9}_\\xDFE\\x83\\xF5\\xBF\\xEDyX-~;1\\xB1s\\xAB\\xA8\\xB2\\xE7\\xD8\\xE7\\x13u\\xCCu\\xA3\\x1A\\xBFF\\x87\\xD4\\xD7\\xD6\\xEA\\xF6~\\xB7v'\\xDA?\\x9D\\xC7]\\\"\\xF3\\xFE\\x99\\xFF\\x00\\x8BN\\x85\\xFF\\x00\\xA6\\xA6\\xFF\\x00\\xD4\\xDE\\xBD\\x01\\x10\\xC3\\x9B\\xDA\\xB1\\xEDmZ\\xFF\\x00{\\xFC'\\xFF\\xD9\\x008BIM\\x04!\\x00\\x00\\x00\\x00\\x00]\\x00\\x00\\x00\\x01\\x01\\x00\\x00\\x00\\x0F\\x00A\\x00d\\x00o\\x00b\\x00e\\x00 \\x00P\\x00h\\x00o\\x00t\\x00o\\x00s\\x00h\\x00o\\x00p\\x00\\x00\\x00\\x17\\x00A\\x00d\\x00o\\x00b\\x00e\\x00 \\x00P\\x00h\\x00o\\x00t\\x00o\\x00s\\x00h\\x00o\\x00p\\x00 \\x00C\\x00C\\x00 \\x002\\x000\\x001\\x007\\x00\\x00\\x00\\x01\\x008BIM\\x04\\x06\\x00\\x00\\x00\\x00\\x00\\a........................................................................................................................................................................................................................................1C\\x00\\x0F\\x00\\x1A\\x00+acspAPPL\\x00\\x00\\x00\\x00APPL\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\x00\\x00\\xF6\\xD6\\x00\\x01\\x00\\x00\\x00\\x00\\xD3-appl\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x11desc\\x00\\x00\\x01P\\x00\\x00\\x00bdscm\\x00\\x00\\x01\\xB4\\x00\\x00\\x01\\xC0cprt\\x00\\x00\\x03t\\x00\\x00\\x00#wtpt\\x00\\x00\\x03\\x98\\x00\\x00\\x00\\x14rXYZ\\x00\\x00\\x03\\xAC\\x00\\x00\\x00\\x14gXYZ\\x00\\x00\\x03\\xC0\\x00\\x00\\x00\\x14bXYZ\\x00\\x00\\x03\\xD4\\x00\\x00\\x00\\x14rTRC\\x00\\x00\\x03\\xE8\\x00\\x00\\b\\faarg\\x00\\x00\\v\\xF4\\x00\\x00\\x00 vcgt\\x00\\x00\\f\\x14\\x00\\x00\\x000ndin\\x00\\x00\\fD\\x00\\x00\\x00&gt;chad\\x00\\x00\\f\\x84\\x00\\x00\\x00,mmod\\x00\\x00\\f\\xB0\\x00\\x00\\x00(bTRC\\x00\\x00\\x03\\xE8\\x00\\x00\\b\\fgTRC\\x00\\x00\\x03\\xE8\\x00\\x00\\b\\faabg\\x00\\x00\\v\\xF4\\x00\\x00\\x00 aagg\\x00\\x00\\v\\xF4\\x00\\x00\\x00 desc\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\bDisplay\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00mluc\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\\"\\x00\\x00\\x00\\fhrHR\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8koKR\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8nbNO\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8id\\x00\\x00\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8huHU\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8csCZ\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8daDK\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8ukUA\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8ar\\x00\\x00\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8itIT\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8roRO\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8nlNL\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8heIL\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8esES\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8fiFI\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8zhTW\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8viVN\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8skSK\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8zhCN\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8ruRU\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8frFR\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8ms\\x00\\x00\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8caES\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8thTH\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8esXL\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8deDE\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8enUS\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8ptBR\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8plPL\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8elGR\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8svSE\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8trTR\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8jaJP\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8ptPT\\x00\\x00\\x00\\x18\\x00\\x00\\x01\\xA8\\x00L\\x00G\\x00 \\x00U\\x00l\\x00t\\x00r\\x00a\\x00F\\x00i\\x00n\\x00etext\\x00\\x00\\x\\x9D\\xDD\\xFF\\x00'u\\xF1\\xF5iW\\xA3V(\\x89ty?\\x9B\\x97\\xFF\\x00&amp;\\xF96_\\x96|\\x9B\\xF0'\\xF4\\xDF\\x88\\xFE\\xB3\\xF2u\\xAA\\x85\\x9A\\x9F\\xBDm\\xF7\\x8D\\x9D\\xAB\\xFD]9\\xB4\\xA8\\x89\\xB1\\xBE}@\\xFE\\\\|\\x9B'\\xD1\\x8F\\x97\\xBB\\e\\xF8\\x1F\\x88\\xFE\\xB3\\xC5\\xCBY\\x1Dv^U\\xD3\\xE3?N~\\xAA\\xF1\\xDE\\xECr\\xE9\\xCC\\xA6\\xBDb\\\\\\x92\\xD3;\\xDB\\xE6\\xED\\xAB\\xD1\\xDF\\x94\\x87\\xD2G\\x93\\xBE\\t\\xCF\\xA3\\xFC\\x7F\\xB1\\xF9&lt;\\xD5so[\\\\#\\xBD=\\xED\\xDF\\xDA\\xDA\\xBC_\\xA3\\xAE\\v\\xAF\\xB0\\xFA\\x16\\xB8\\xFA2\\xFA\\x1C\\xFF\\x00%\\xF9\\x95\\xF0\\x87\\xF0\\xFF\\x00\\x15\\xFDw\\xE5kU7\\xE5W\\xCF\\xFA\\xE1\\xDF^/\\xEF\\xAE\\x17i\\xFC:\\x17\\xCD\\xB1~\\xE3'\\xF4U\\xEE\\xE2z2\\xF7&gt;\\xE5\\xCF(x\\xFF\\x00\\xAA\\xF1sU\\x1D\\xCA\\xAF\\xC6og}\\x97\\xBD\\xE4\\xD9\\xEB\\xE4[#q\\xFC\\xC7\\xC9&lt;\\xDC\\xFA\\x19y\\xDF\\xE4&gt;\\xD4\\xFA\\x7F\\xC5{&gt;=*\\x8D\\xBDk\\xE8;\\xF6m\\xDF\\xEAm\\xFC:V\\xBD\\xD8\\xDF\\xA2\\xE4\\xBE\\x8B\\xFE\\x91\\x1F\\xD1\\x9F\\xC0\\xFC\\x19}?\\xF2\\xFD\\xE7\\xE4\\xEBUw*\\xF7c\\x17\\xB3\\xBE\\xB8\\xF7\\xBF\\xD3\\xA3:\\x8D\\x1Dk\\xFC$\\x0F\\xE5\\xE3\\xE8\\xE3\\xE9[\\xCB\\x9E\\x1F\\xA1|]\\\\\\xDB\\x8D\\xFDK\\xA0\\xDD=\\x93\\xF5_\\xF6v&gt;-+X\\xF4a\\xE7\\xA8\\x7F,\\x9D\\x87\\xE6'\\x9D~\\xE0\\xBE\\x8D\\xF1~\\xFB\\xC5OW\\x84\\x17\\xBBz~\\x9F\\xFF\\x00w\\xF1\\xF7\\\\\\xBAU\\xAFV5\\x1C%\\x11(\\x89DJ\\\"\\xFF\\xD9\\nendstream\\nendobj\\n8 0 obj\\n&lt;&lt; /Type /Font\\n/Subtype /Type1\\n/BaseFont /Helvetica\\n/Encoding /WinAnsiEncoding\\n&gt;&gt;\\nendobj\\nxref\\n0 9\\n0000000000 65535 f \\n0000000015 00000 n \\n0000000109 00000 n \\n0000000158 00000 n \\n0000000215 00000 n \\n0000014470 00000 n \\n0000014687 00000 n \\n0000014789 00000 n \\n0000040507 00000 n \\ntrailer\\n&lt;&lt; /Size 9\\n/Root 2 0 R\\n/Info 1 0 R\\n&gt;&gt;\\nstartxref\\n40604\\n%%EOF\\n\"\n</code></pre>\n\n<p>I deliberately shortened the respons with the (.....) but in my terminal it is well separated in two as in the example above.</p>\n\n<p>I have a content separated in two with empty lines between them, it looks like a pdf file</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "simple-form"], "comments": [{"owner": {"reputation": 628, "user_id": 4643970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AwK4h.jpg?s=128&g=1", "display_name": "Mahmoud Sayed", "link": "https://stackoverflow.com/users/4643970/mahmoud-sayed"}, "edited": false, "score": 0, "creation_date": 1505334845, "post_id": 46206319, "comment_id": 79376108, "body": "if I understood correctly that you want to change the button text when you redirect back to your page, using Ajax with Jquery will be helpful."}, {"owner": {"reputation": 412, "user_id": 7962442, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208319591859379/picture?type=large", "display_name": "Maxime Bou&#233;", "link": "https://stackoverflow.com/users/7962442/maxime-bou%c3%a9"}, "reply_to_user": {"reputation": 628, "user_id": 4643970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AwK4h.jpg?s=128&g=1", "display_name": "Mahmoud Sayed", "link": "https://stackoverflow.com/users/4643970/mahmoud-sayed"}, "edited": false, "score": 0, "creation_date": 1505461868, "post_id": 46206319, "comment_id": 79432143, "body": "Sure. It can fix it. I just wanted where to find the text from the message on the button."}], "owner": {"reputation": 412, "user_id": 7962442, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208319591859379/picture?type=large", "display_name": "Maxime Bou&#233;", "link": "https://stackoverflow.com/users/7962442/maxime-bou%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505334558, "creation_date": 1505334558, "question_id": 46206319, "link": "https://stackoverflow.com/questions/46206319/customize-create-message-on-a-simpleform-button", "title": "Customize &quot;create&quot; message on a simpleform button", "body": "<p>I have a calendar and when i click on buttons, i book a specialist for the half day. It redirects to same page if the booking is correctly saved in the base. While it proceeds, the button briefly change with the message \"create booking\". I want to custom this message, specially because during the operation it explodes the whole calendar table (done with simple calendar).</p>\n\n<p>There is nothing about in the .yml for simple form. Is this from ActiveRecord messages? The .yml from these gem don't have those kind of message.</p>\n\n<p><a href=\"https://i.stack.imgur.com/xu7Q0.jpg\" rel=\"nofollow noreferrer\">Screen shot of the brief message</a></p>\n"}, {"tags": ["ruby", "ldap", "apacheds"], "comments": [{"owner": {"reputation": 1554, "user_id": 7990687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc23386450e2a5a963e2caa1921555af?s=128&d=identicon&r=PG&f=1", "display_name": "Esteban", "link": "https://stackoverflow.com/users/7990687/esteban"}, "edited": false, "score": 1, "creation_date": 1505372614, "post_id": 46205631, "comment_id": 79388052, "body": "As far as protocol goes, the <code>ldapadd</code> operation is to create a new entry in a directory. If you want to <b>modify</b> the value of an attribute (ie. here add a new value in the <code>uniqueMember</code> list, you have to use the <code>ldapmodify</code> operation. I don&#39;t know how it translates into ruby, but this is the way to go in term of LDAP protocol"}], "answers": [{"comments": [{"owner": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "edited": false, "score": 0, "creation_date": 1505360700, "post_id": 46208139, "comment_id": 79383399, "body": "That&#39;s what I had initially...but I got an error, &quot;ERR_60 Entry does not contain a STRUCTURAL ObjectClass&quot; Code: 65. Some research and testing lead to adding the objectclass attribute to resolve that issue. But when I get all the other issues resolved, I&#39;ll try taking that back out and see if it was a red herring."}, {"owner": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "edited": false, "score": 0, "creation_date": 1505448904, "post_id": 46208139, "comment_id": 79426616, "body": "Now I understand what you meant. I had overlooked the &quot;add_attribute&quot; method to do exactly what you described. Thanks for the clue, EJP."}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 1, "last_activity_date": 1505344182, "creation_date": 1505344182, "answer_id": 46208139, "question_id": 46205631, "link": "https://stackoverflow.com/questions/46205631/ldap-how-to-add-an-entry-to-a-groupofuniquenames-err-250-entry-already-exist/46208139#46208139", "title": "LDAP - How to add an entry to a groupOfUniqueNames? (ERR_250_ENTRY_ALREADY_EXISTS)", "body": "<p>Adding the object class doesn't make sense. It's already there.</p>\n\n<p>Just add the unique member value.</p>\n"}, {"tags": [], "owner": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "is_accepted": false, "score": 0, "last_activity_date": 1505448650, "creation_date": 1505448650, "answer_id": 46231575, "question_id": 46205631, "link": "https://stackoverflow.com/questions/46205631/ldap-how-to-add-an-entry-to-a-groupofuniquenames-err-250-entry-already-exist/46231575#46231575", "title": "LDAP - How to add an entry to a groupOfUniqueNames? (ERR_250_ENTRY_ALREADY_EXISTS)", "body": "<p>Ok...I feel a little dumb. Here is the correct answer:</p>\n\n<pre><code>ldap.add_attribute(dn, attribute, value)\n</code></pre>\n\n<p>Or specifically for my new janitor:</p>\n\n<pre><code>ldap.add_attribute('cn=janitors,dc=tidy,dc=example,dc=com', \n                   'uniqueMember',\n                   'uid=broom001,o=users,dc=tidy,dc=example,dc=com')\n</code></pre>\n\n<p>Ba-boom. That's it. Just what I needed. <em>blush</em></p>\n\n<p>I'm leaving my previous ridiculous answer, as it <em>is</em> one way of populating a list from scratch, and might be useful in some scenarios.</p>\n\n<p>I'm also leaving this whole embarrassing question, in case anyone else overlooks <code>add_attribute()</code> in the documentation and gets frustrated trying to search for this problem.</p>\n\n<p>One remaining frustration with ruby-net-ldap that seems to remain is that <code>delete_attribute()</code> does NOT accept a third argument -- namely, the value to be deleted from the group. You can only use <code>delete_attribute</code> to delete the entire group, not individual entries. But I don't need to delete only a single value from the group, so la-ti-da...</p>\n"}], "owner": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1223, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1505448830, "creation_date": 1505331728, "last_edit_date": 1505367651, "question_id": 46205631, "link": "https://stackoverflow.com/questions/46205631/ldap-how-to-add-an-entry-to-a-groupofuniquenames-err-250-entry-already-exist", "title": "LDAP - How to add an entry to a groupOfUniqueNames? (ERR_250_ENTRY_ALREADY_EXISTS)", "body": "<p>I'm trying to add a new member of a groupOfUniqueNames object but I get an \"ENTRY_ALREADY_EXISTS\" error. </p>\n\n<p>The server is ApacheDS, and my code is Ruby, using using net-ldap:</p>\n\n<pre><code>ldap.add(dn: 'cn=janitors,dc=tidy,dc=example,dc=com', \n         attributes: \n          {\n            :objectclass =&gt; \"groupOfUniqueNames\",\n            :uniqueMember =&gt; \n              \"uid=broom001,o=users,dc=tidy,dc=example,dc=com\"\n          }\n)\n</code></pre>\n\n<p>There is already one member in janitors -- mop99 . When I call ldap.add, I get (reformatted slightly for readability):</p>\n\n<pre><code>ldap.response: ERR_250_ENTRY_ALREADY_EXISTS cn=janitors,dc=tidy,dc=example,dc=com already exists!\nOpenStruct {\n             :code =&gt; 68,\n    :error_message =&gt; \"ENTRY_ALREADY_EXISTS: failed for MessageType : ADD_REQUEST\n                        Message ID : 2\n                            Add Request :\n                            Entry\n                            dn[n]: cn=janitors,dc=tidy,dc=example,dc=com\n                            objectclass: groupOfUniqueNames\n                            uniqueMember: uid=mop99,o=users,dc=tidy,dc=example,dc=com\n                            : ERR_250_ENTRY_ALREADY_EXISTS cn=janitors,dc=tidy,dc=example,dc=com already exists!\n                      \",\n       :matched_dn =&gt; \"\",\n          :message =&gt; \"Entry Already Exists\"\n}\n</code></pre>\n\n<p>I've tried changing ldap.add() to ldap.modify(), but that just replaces mop99 with broom001, leaving only one janitor. What I need is to <em>add</em> broom001, to end up an ever-growing army of janitors.</p>\n\n<p>I could read the existing list from LDAP, append the new entry to the list in Ruby, and then write the list back to LDAP...but that introduces a race condition where a janitor could be lost when two try to add at the same time. My janitors are too valuable, so that is unacceptable.</p>\n\n<p>I've searched the web extensively without finding much, and nothing related to net-ldap.  I did find <a href=\"https://www.openldap.org/lists/openldap-software/199912/msg00164.html\" rel=\"nofollow noreferrer\">https://www.openldap.org/lists/openldap-software/199912/msg00164.html</a> which describes a solution WRT .LDIF files, but I don't know how to translate that to net-ldap.</p>\n\n<p>What am I missing? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "capistrano", "capistrano3"], "comments": [{"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1505325682, "post_id": 46204072, "comment_id": 79371202, "body": "Why create gemsets anymore?  Doesn&#39;t bundler remove the need for this altogether now?"}, {"owner": {"reputation": 271, "user_id": 8063955, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/682c70f9d2c237db7ebcc0f161656d5f?s=128&d=identicon&r=PG&f=1", "display_name": "Deimos620", "link": "https://stackoverflow.com/users/8063955/deimos620"}, "reply_to_user": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1505417423, "post_id": 46204072, "comment_id": 79417452, "body": "bkunzi01 - I am not sure what you mean. bundler is installed inside gemset."}], "answers": [{"comments": [{"owner": {"reputation": 271, "user_id": 8063955, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/682c70f9d2c237db7ebcc0f161656d5f?s=128&d=identicon&r=PG&f=1", "display_name": "Deimos620", "link": "https://stackoverflow.com/users/8063955/deimos620"}, "edited": false, "score": 0, "creation_date": 1505326452, "post_id": 46204133, "comment_id": 79371623, "body": "Thanks for your quick response. I redefined task and getting another error.  (Backtrace restricted to imported tasks) cap aborted! SSHKit::Runner::ExecuteError: Exception while executing as cardeploy@172.104.171.129: bundle exit status: 1 bundle stdout: Nothing written bundle stderr: Nothing written Any idea why?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1505326869, "post_id": 46204133, "comment_id": 79371889, "body": "Mind explaining Your answer otherwise this is better as a comment since it is essentially just a link"}], "tags": [], "owner": {"reputation": 156, "user_id": 8549623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaedd1d0726ae26aa58c9cb9d074e765?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Yurkovetc", "link": "https://stackoverflow.com/users/8549623/michael-yurkovetc"}, "is_accepted": true, "score": 1, "last_activity_date": 1505325818, "creation_date": 1505325818, "answer_id": 46204133, "question_id": 46204072, "link": "https://stackoverflow.com/questions/46204072/capistrano-rails-doesnt-work-with-rvm/46204133#46204133", "title": "Capistrano/rails doesn&#39;t work with rvm", "body": "<p>You can use <a href=\"https://github.com/capistrano/bundler\" rel=\"nofollow noreferrer\">capistrano/bundler</a></p>\n"}], "owner": {"reputation": 271, "user_id": 8063955, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/682c70f9d2c237db7ebcc0f161656d5f?s=128&d=identicon&r=PG&f=1", "display_name": "Deimos620", "link": "https://stackoverflow.com/users/8063955/deimos620"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 46204133, "answer_count": 1, "score": 0, "last_activity_date": 1505326830, "creation_date": 1505325566, "last_edit_date": 1505326830, "question_id": 46204072, "link": "https://stackoverflow.com/questions/46204072/capistrano-rails-doesnt-work-with-rvm", "title": "Capistrano/rails doesn&#39;t work with rvm", "body": "<p>I am trying to deploy Rails app with capistrano. It's Rails 5.1 based.\nRuby version is managed by rvm.\nI am using ruby 2.2.3, created gemset manually.\nHere is deploy.rb</p>\n\n<pre><code>set :rvm_type, :user\nset :rvm_ruby_version, '2.2.3@cardlove-api'\n...\nwith RAILS_ENV: fetch(:environment) do\n  execute :rake, \"webpacker:install\"\nend\n</code></pre>\n\n<p>So, it seems worked when Rails &lt; 5.0. But when Rails > 5.0, webpack should be installed by this command:</p>\n\n<p><code>bundle exec rails webpacker:install</code> \n(instead of bundle rake)</p>\n\n<pre><code>with RAILS_ENV: fetch(:environment) do\n  execute :rails, \"webpacker:install\"\nend\n</code></pre>\n\n<p>But it doesn't work for me. I've installed bundle in the gemset I am using, but getting error:</p>\n\n<pre><code>01 bundle exec rails webpacker:install\n01 bash: bundle: command not found\n(Backtrace restricted to imported tasks)\ncap aborted!\nSSHKit::Runner::ExecuteError: Exception while executing as user@IP: rails \n  exit status: 127\n  rails stdout: Nothing written\n  rails stderr: bash: bundle: command not found\n</code></pre>\n\n<p>Of course, I included capistrano/rails in my capfile.</p>\n\n<pre><code>capistrano/rvm\ncapistrano/rails\n</code></pre>\n\n<p>I am not sure why I am getting error. I think I configured correctly , but...\nAnyway, Would you like to help me to fix this issue?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 27630, "user_id": 1550807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JgCw5.png?s=128&g=1", "display_name": "Danil Speransky", "link": "https://stackoverflow.com/users/1550807/danil-speransky"}, "is_accepted": true, "score": 3, "last_activity_date": 1505323172, "creation_date": 1505323172, "answer_id": 46203432, "question_id": 46203214, "link": "https://stackoverflow.com/questions/46203214/can-i-change-the-class-of-an-element-that-rubys-pluck-returns/46203432#46203432", "title": "Can I change the class of an element that Ruby&#39;s Pluck returns", "body": "<p>You could try this:</p>\n\n<pre><code>emails.each { |e| e[-1] = e[-1].to_f }\n</code></pre>\n"}], "owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 46203432, "answer_count": 1, "score": 0, "last_activity_date": 1505323172, "creation_date": 1505322288, "question_id": 46203214, "link": "https://stackoverflow.com/questions/46203214/can-i-change-the-class-of-an-element-that-rubys-pluck-returns", "title": "Can I change the class of an element that Ruby&#39;s Pluck returns", "body": "<p>I am familiarizing myself with the data in a database I inherited. And the <code>credit_amount</code> field is a <code>decimal</code> which when <code>pretty printed</code> returns something that looks like this:</p>\n\n<pre><code>&lt;BigDecimal:6d28088,'0.0',9(18)&gt;\n</code></pre>\n\n<p>I want to be able to read it, after I get the info using <code>pluck</code> and then <code>group_by</code> like this:</p>\n\n<pre><code>emails = Customer.pluck(:shop_id, :customer_id, :email, :credit_amount )\ngemails = emails.group_by{ |shop_id, customer_id, email, credit_amount| customer_id }\npp gemails\n</code></pre>\n\n<p>Currently when this prints it looks like this:</p>\n\n<pre><code> \"21274984473\"=&gt;\n  [[105,\n    \"21274984473\",\n    \"XXXXCCCCC@gmail.com\",\n    Mon, 28 Aug 2017 16:39:28 UTC +00:00,\n    #&lt;BigDecimal:6d28088,'0.0',9(18)&gt;],\n   [105,\n    \"21274984473\",\n    \"XXXXCCCCC@gmail.com\",\n    Wed, 02 Aug 2017 20:09:37 UTC +00:00,\n    #&lt;BigDecimal:a0e1690,'0.0',9(18)&gt;]],\n</code></pre>\n\n<p>Just trying to read that <code>BigDecimal</code> number.. using <code>to_f</code> has worked in the past, just not sure where to put that here?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ios", "objective-c", "ruby", "google-api", "google-people"], "comments": [{"owner": {"reputation": 161, "user_id": 5216303, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-PirUlnbFJmc/AAAAAAAAAAI/AAAAAAAADm0/rq3FTgZLHVA/photo.jpg?sz=128", "display_name": "Rahul Gupta", "link": "https://stackoverflow.com/users/5216303/rahul-gupta"}, "edited": false, "score": 0, "creation_date": 1505721472, "post_id": 46203108, "comment_id": 79511079, "body": "update: New accounts created are not having these properties but I tested with accounts created a year and 4 years ago, google apis return both the fields, weird huh?!!"}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 5216303, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-PirUlnbFJmc/AAAAAAAAAAI/AAAAAAAADm0/rq3FTgZLHVA/photo.jpg?sz=128", "display_name": "Rahul Gupta", "link": "https://stackoverflow.com/users/5216303/rahul-gupta"}, "edited": false, "score": 0, "creation_date": 1505812434, "post_id": 46289155, "comment_id": 79555146, "body": "I have already made the birthday and gender public in my google account settings. So, I dont think thats the issue. I guess, its because of the reason I have mentioned in the comment to my question."}], "tags": [], "owner": {"reputation": 1157, "user_id": 7187774, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QhSkq0OdhjY/AAAAAAAAAAI/AAAAAAAAEtQ/JxSC_TU9-FE/photo.jpg?sz=128", "display_name": "Amos Yuen", "link": "https://stackoverflow.com/users/7187774/amos-yuen"}, "is_accepted": true, "score": 2, "last_activity_date": 1505774455, "creation_date": 1505774455, "answer_id": 46289155, "question_id": 46203108, "link": "https://stackoverflow.com/questions/46203108/get-google-people-profile-api-does-not-return-birthday-and-gender-key-values/46289155#46289155", "title": "Get google people profile API does not return birthday and gender key values", "body": "<p>Likely the problem is that the birthday and gender is only returned if the fields have been set to have a <strong>public</strong> visibility. Private visibility fields won't be returned.</p>\n\n<p>If you use the <strong>Google People API</strong> which is different than the <strong>G+ People API</strong>, you should be able to get the private birthday with <code>https://www.googleapis.com/auth/user.birthday.read</code> scope. Unfortunately there is no private scope for gender.</p>\n\n<p>See documentation of Google People API at <a href=\"https://developers.google.com/people/\" rel=\"nofollow noreferrer\">https://developers.google.com/people/</a> for more info.</p>\n"}], "owner": {"reputation": 161, "user_id": 5216303, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-PirUlnbFJmc/AAAAAAAAAAI/AAAAAAAADm0/rq3FTgZLHVA/photo.jpg?sz=128", "display_name": "Rahul Gupta", "link": "https://stackoverflow.com/users/5216303/rahul-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 850, "favorite_count": 0, "accepted_answer_id": 46289155, "answer_count": 1, "score": 3, "last_activity_date": 1505774455, "creation_date": 1505321895, "last_edit_date": 1505325629, "question_id": 46203108, "link": "https://stackoverflow.com/questions/46203108/get-google-people-profile-api-does-not-return-birthday-and-gender-key-values", "title": "Get google people profile API does not return birthday and gender key values", "body": "<p><code>GPPSignIn *signIn;</code></p>\n\n<p>In my iOS app I am setting scope as:</p>\n\n<pre><code>signIn.scopes = @[@\"https://www.googleapis.com/auth/plus.login\",\n                  @\"https://www.googleapis.com/auth/plus.me\",\n                  @\"https://www.googleapis.com/auth/plus.profile.emails.read\", \n                  @\"email\",\n                  @\"profile\",\n                  @\"https://www.googleapis.com/auth/user.birthday.read\"];\n</code></pre>\n\n<p>Also,</p>\n\n<pre><code>signIn.shouldFetchGoogleUserEmail = YES;\nsignIn.shouldFetchGooglePlusUser = YES;\n</code></pre>\n\n<p>And trying to get <code>access_token</code> from Google. which I get and send to server.</p>\n\n<p>Now, my server is doing this:</p>\n\n<pre><code>client = OAuth2::Client.new('app_id', 'app_secret')\naccess_token = OAuth2::AccessToken.new(client, access_token)\nprofile_api_url = 'https://www.googleapis.com/plus/v1/people/me'\nresponse = access_token.get(profile_api_url)\ngoogle_profile_res_body = JSON.parse(response.body)\n</code></pre>\n\n<p>Here, <code>google_profile_res_body</code> is having many properties but not birthday and gender. </p>\n\n<p>Anyone have any idea? Please suggest. Thanks in advance.</p>\n\n<p>Cheers,\nRahul</p>\n"}, {"tags": ["ruby", "activerecord"], "comments": [{"owner": {"reputation": 27630, "user_id": 1550807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JgCw5.png?s=128&g=1", "display_name": "Danil Speransky", "link": "https://stackoverflow.com/users/1550807/danil-speransky"}, "edited": false, "score": 2, "creation_date": 1505321293, "post_id": 46202856, "comment_id": 79368738, "body": "Include stack trace in the question"}], "answers": [{"tags": [], "owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "is_accepted": true, "score": 2, "last_activity_date": 1505324418, "creation_date": 1505324418, "answer_id": 46203757, "question_id": 46202856, "link": "https://stackoverflow.com/questions/46202856/activerecord-query-interface-and-map/46203757#46203757", "title": "ActiveRecord query interface and map", "body": "<p>Use <code>#joins</code>. With <code>#includes</code> you might be hitting a Client without Person as it uses left outer join. You might also want to add <code>#uniq</code> to remove duplicates.</p>\n\n<pre><code>Client.joins(:fixed_odds_account, person: [:phones, :emails]).uniq.map #code omitted\n</code></pre>\n"}], "owner": {"reputation": 1100, "user_id": 1584736, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8c4392528b20b47726142f7a20c7cd?s=128&d=identicon&r=PG", "display_name": "ngw", "link": "https://stackoverflow.com/users/1584736/ngw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 46203757, "answer_count": 1, "score": 1, "last_activity_date": 1505324418, "creation_date": 1505320965, "question_id": 46202856, "link": "https://stackoverflow.com/questions/46202856/activerecord-query-interface-and-map", "title": "ActiveRecord query interface and map", "body": "<p>I'm trying to map an AR relation in a specific data structure (to be rendered as JSON) and I can't make it work, for some reason the relations are always nil</p>\n\n<pre><code>Client.includes(:fixed_odds_account, person: [:phones, :emails]).map do |client|\n  {\n    id: client.id,\n    uri: client.uri,\n    updated_at: client.updated_at,\n    balance: client.fixed_odds_account.current_balance,\n    email: client.person.emails.pluck(:address),\n    first_name: client.person.first_name,\n    last_name: client.person.last_name,\n    number: client.person.phones.pluck(:number)\n  }\n</code></pre>\n\n<p>I'd expect this to return an array of hashes, but it always fails on the \"person\" relationship, which is apparently nil (and it is not).\nWhat's weird is that if I remove the Hash and just puts client.person I can see my data.\nAny idea?</p>\n"}, {"tags": ["ruby", "windows", "system", "popen3"], "comments": [{"owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "edited": false, "score": 0, "creation_date": 1505318662, "post_id": 46202137, "comment_id": 79367173, "body": "Does your Something.exe complete its execution? It seems like if your ruby script is waiting for the command to be completed before to continue"}, {"owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "reply_to_user": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "edited": false, "score": 0, "creation_date": 1505318766, "post_id": 46202137, "comment_id": 79367240, "body": "The program stay running in the background, so really i dont want ruby to wait, i just want it to send the command and carry on."}], "answers": [{"tags": [], "owner": {"reputation": 654, "user_id": 1319545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d925d70e121e9b8e1a7dd44155e2497?s=128&d=identicon&r=PG", "display_name": "thaleshcv", "link": "https://stackoverflow.com/users/1319545/thaleshcv"}, "is_accepted": true, "score": 2, "last_activity_date": 1505319367, "creation_date": 1505319367, "answer_id": 46202358, "question_id": 46202137, "link": "https://stackoverflow.com/questions/46202137/ruby-run-external-program-stops-script/46202358#46202358", "title": "Ruby run external program stops script", "body": "<p>Try to run <code>Something.exe</code> in a new Thread:</p>\n\n<p><code>Thread.new { system(\"Something.exe\") }</code></p>\n"}, {"comments": [{"owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "edited": false, "score": 0, "creation_date": 1505319642, "post_id": 46202372, "comment_id": 79367764, "body": "Thanks for your answer, it was very helpful"}], "tags": [], "owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "is_accepted": false, "score": 1, "last_activity_date": 1505319406, "creation_date": 1505319406, "answer_id": 46202372, "question_id": 46202137, "link": "https://stackoverflow.com/questions/46202137/ruby-run-external-program-stops-script/46202372#46202372", "title": "Ruby run external program stops script", "body": "<p>In case you want to run your <code>System.exe</code> asynchronously and continue without waiting it to be finished, you could use spawn or multithreading.</p>\n\n<pre><code>pid = spawn('System.exe')\nProcess.detach(pid)\n</code></pre>\n\n<p>According to this <a href=\"https://stackoverflow.com/a/11983570/5687152\">previous answer</a>, this should work on Windows as well (while <code>fork</code> or other methods don't).</p>\n\n<p>In <a href=\"http://ujihisa.blogspot.it/2010/03/how-to-run-external-command.html\" rel=\"nofollow noreferrer\">this article</a> you can find several examples using <code>system</code>,  <code>exec</code>, <code>fork</code>, <code>spawn</code> and <code>Thread</code> on Unix.</p>\n\n<p>I cannot reproduce it, but it could be worth to see if using <code>system(\"start System.exe\")</code> works on windows like <code>system(\"cmd &amp;\")</code> works on UNIX. You can refer to start documentation <a href=\"https://technet.microsoft.com/en-us/library/cc770297(v=ws.11).aspx#BKMK_examples\" rel=\"nofollow noreferrer\">here</a>. </p>\n"}], "owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 1, "accepted_answer_id": 46202358, "answer_count": 2, "score": 0, "last_activity_date": 1505319406, "creation_date": 1505318556, "question_id": 46202137, "link": "https://stackoverflow.com/questions/46202137/ruby-run-external-program-stops-script", "title": "Ruby run external program stops script", "body": "<p>I have a ruby script that midway through I need it to run another program.</p>\n\n<p>After running the program the rest of the script doesnt get run. For example:</p>\n\n<pre><code># some ruby that gets run\n\nexe = \"Something.exe\"\nsystem(exe)\n\n# some ruby that doesnt run\n</code></pre>\n\n<p>I have also tried using <code>Open3.popen2e(cmd)</code> and <code>Open3.popen3(cmd)</code> but its the same.</p>\n\n<p>Can anyone help me understand what is happening here and how to fix it?</p>\n\n<p>note: I'm using windows</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "google-calendar-api", "google-api-client"], "answers": [{"comments": [{"owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "edited": false, "score": 0, "creation_date": 1505320424, "post_id": 46201762, "comment_id": 79368213, "body": "Saved my day. Much obliged!"}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 1, "last_activity_date": 1505317415, "creation_date": 1505317415, "answer_id": 46201762, "question_id": 46201163, "link": "https://stackoverflow.com/questions/46201163/google-api-client-calendarv3-event-initialization-argument-error/46201762#46201762", "title": "Google api client calendarv3 event initialization argument error", "body": "<p>Use symbols as keys in the hash, not strings.</p>\n\n<pre><code>Google::Apis::CalendarV3::Event.new(\n  summary: summary,\n  description: description,\n  start: event_datetime(check_out_time),\n  end: event_datetime(check_out_time),\n)\n</code></pre>\n\n<p>In ruby, the double splat operator (<code>**</code>) is for capturing <em>keyword</em> arguments - which, by design, must always be symbols.</p>\n"}], "owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 46201762, "answer_count": 1, "score": 0, "last_activity_date": 1505317415, "creation_date": 1505315781, "question_id": 46201163, "link": "https://stackoverflow.com/questions/46201163/google-api-client-calendarv3-event-initialization-argument-error", "title": "Google api client calendarv3 event initialization argument error", "body": "<p>I'm using google_api_client 0.10.3. I have this call:</p>\n\n<pre><code>Google::Apis::CalendarV3::Event.new({\n  'summary' =&gt; summary,\n  'description' =&gt; description,\n  'start' =&gt; event_datetime(check_out_time),\n  'end' =&gt;   event_datetime(check_out_time),\n})\n</code></pre>\n\n<p>Somehow I'm getting this error:</p>\n\n<pre><code>ArgumentError: wrong number of arguments (given 1, expected 0)\nfrom .../gems/google-api-client-0.10.3/generated/google/apis/calendar_v3/classes.rb:964:in `initialize'\n</code></pre>\n\n<p>This is so perplexing, as the class definition in fact takes arguments:</p>\n\n<pre><code>def initialize(**args)\n</code></pre>\n\n<p>Any help?</p>\n"}, {"tags": ["ruby", "sqlite", "sequel", "roda"], "answers": [{"tags": [], "owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "is_accepted": false, "score": 0, "last_activity_date": 1505317191, "creation_date": 1505317191, "answer_id": 46201681, "question_id": 46200731, "link": "https://stackoverflow.com/questions/46200731/ruby-sequel-sqlite3-app-saves-valid-objects-to-database-with-null-attributes/46201681#46201681", "title": "Ruby Sequel SQLite3 app saves valid objects to database with NULL attributes", "body": "<p>I am used to ActiveRecord and Rails, but according to <a href=\"https://github.com/jeremyevans/sequel/blob/master/doc/validations.rdoc#validation_helpers\" rel=\"nofollow noreferrer\">Sequel documentation</a> you could use <code>validation_helpers plugin</code>:</p>\n\n<pre><code># model\nclass Wallet &lt; Sequel::Model\n  # plugin :validation_helpers\n  def validate\n    super\n    validates_presence [:address, :balance], allow_nil: false\n    validates_unique :address\n  end\nend\n</code></pre>\n\n<p>You could eventually set a unique constraint on the address column in the migration instead of uniqueness validation in the model.\nThis method should prevent some side effects of custom validations (despite yours didn't seem bogus)</p>\n"}, {"comments": [{"owner": {"reputation": 1357, "user_id": 3201684, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/fce047896b7ee0a2f6967156e339521f?s=128&d=identicon&r=PG&f=1", "display_name": "ntonnelier", "link": "https://stackoverflow.com/users/3201684/ntonnelier"}, "edited": false, "score": 0, "creation_date": 1505504341, "post_id": 46242148, "comment_id": 79457112, "body": "this did it. Thanks @Jeremy"}], "tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": true, "score": 0, "last_activity_date": 1505486335, "creation_date": 1505486335, "answer_id": 46242148, "question_id": 46200731, "link": "https://stackoverflow.com/questions/46200731/ruby-sequel-sqlite3-app-saves-valid-objects-to-database-with-null-attributes/46242148#46242148", "title": "Ruby Sequel SQLite3 app saves valid objects to database with NULL attributes", "body": "<p>You should remove <code>attr_accessor :address, :balance</code>, that is what is breaking things.  Sequel::Model stores attributes in the <code>values</code> hash, not as separate instance variables.</p>\n"}], "owner": {"reputation": 1357, "user_id": 3201684, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/fce047896b7ee0a2f6967156e339521f?s=128&d=identicon&r=PG&f=1", "display_name": "ntonnelier", "link": "https://stackoverflow.com/users/3201684/ntonnelier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 46242148, "answer_count": 2, "score": 1, "last_activity_date": 1505486335, "creation_date": 1505314470, "question_id": 46200731, "link": "https://stackoverflow.com/questions/46200731/ruby-sequel-sqlite3-app-saves-valid-objects-to-database-with-null-attributes", "title": "Ruby Sequel SQLite3 app saves valid objects to database with NULL attributes", "body": "<p>I'm having problems creating new objects on my application. Apparently the data gets lost somewhere between my Sequel::Model and the db table itself, resulting in entries with an id and all attributes in NULL.</p>\n\n<p>This is my model:</p>\n\n<pre><code>class Wallet &lt; Sequel::Model(:wallets)\n  attr_accessor :address, :balance\n\n  def validate\n    super\n    errors.add(:address, \"Address can't be empty\") if address.empty?\n    errors.add(:address, \"Input address already exists in the db\") unless Wallet.where(address: address).empty?\n  end\nend\n</code></pre>\n\n<p>And this is the migration that created it's table:</p>\n\n<pre><code>Sequel.migration do\n  change do\n    create_table(:wallets) do\n      primary_key :id, unique: true\n      String :address\n      Integer :balance\n    end\n  end\nend\n</code></pre>\n\n<p>I'm using <a href=\"https://github.com/jeremyevans/roda\" rel=\"nofollow noreferrer\">roda</a> framework. Here is wallet_app.rb, where Wallet objects are created:</p>\n\n<pre><code>require 'roda'\nrequire 'sequel'\nrequire 'json'\n\nDB = Sequel.connect('sqlite://database.sqlite3')\n\nclass WalletApp &lt; Roda\n  require './lib/services/balance_service'\n  require './models/account'\n\n  route do |r|\n    ...\n\n    r.post \"wallets\" do\n      address = r.params[\"address\"]\n      balance = BalanceService.get_balance(address)\n      wallet = Wallet.new(address: address, balance: balance)\n      # Until here we have the attributes correctly set on wallet object \n      if wallet.valid? &amp;&amp; wallet.save\n        # Now wallet is persisted in the db with an id but address and balance NULL\n        wallet.to_json\n      else\n        wallet.errors.to_json\n      end\n    end\n\n  end\nend\n</code></pre>\n\n<p>As pointed out in the comments in the class above, the object is valid before inserting in the DB and the attributes appear correctly set. Still, the data is persisted as all attributes NULL. I'm assuming an error in the migration or the Model definition but I could not find any.</p>\n\n<p>In case it helps, I copy also my Gemfile here:</p>\n\n<pre><code>source \"https://rubygems.org\"\n\nruby '2.1.2'\n\ngem 'roda'\ngem 'sequel'\ngem 'sqlite3'\ngem 'httparty'\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1505313857, "post_id": 46200460, "comment_id": 79363732, "body": "I like this a lot! Great answer."}, {"owner": {"reputation": 1536, "user_id": 8560709, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cbaef3d3be3351abec96df526eb2eb30?s=128&d=identicon&r=PG&f=1", "display_name": "random_user_0891", "link": "https://stackoverflow.com/users/8560709/random-user-0891"}, "edited": false, "score": 0, "creation_date": 1505317135, "post_id": 46200460, "comment_id": 79366115, "body": "So I see Job.group(:experience).count returns     (0.3ms)  SELECT COUNT(*) AS count_all, &quot;jobs&quot;.&quot;experience&quot; AS jobs_experience FROM &quot;jobs&quot; GROUP BY &quot;jobs&quot;.&quot;experience&quot;  =&gt; {&quot;0-2 years&quot;=&gt;1, &quot;10+ years&quot;=&gt;2, &quot;2-5 years&quot;=&gt;1, &quot;5-10 years&quot;=&gt;2}  how do I call this in the view though?"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1505322526, "post_id": 46200460, "comment_id": 79369438, "body": "I udpated my answer"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 2, "last_activity_date": 1505322504, "last_edit_date": 1505322504, "creation_date": 1505313688, "answer_id": 46200460, "question_id": 46200354, "link": "https://stackoverflow.com/questions/46200354/rails-get-count-of-values-from-database/46200460#46200460", "title": "Rails: Get count of values from database", "body": "<pre><code>Job.group(:experience).count\n</code></pre>\n\n<p>should give you an hash with as keys the experience field and as values the number of rows for that field</p>\n\n<pre><code>&lt;% Job.group(:experience).count.each do |name, count| %&gt;\n  &lt;%= link_to name, filtered_jobs_path(experience: name, num_days_past: params[:num_days_past], search: params[:search]) %&gt;\n  (&lt;%= count %&gt;)\n&lt;% end %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1536, "user_id": 8560709, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cbaef3d3be3351abec96df526eb2eb30?s=128&d=identicon&r=PG&f=1", "display_name": "random_user_0891", "link": "https://stackoverflow.com/users/8560709/random-user-0891"}, "edited": false, "score": 0, "creation_date": 1505333446, "post_id": 46202840, "comment_id": 79375403, "body": "the only thing is that the links aren&#39;t ordered the way I want on the page anymore.  Do you know how I could get the links returned so it would be in the order 0-2 years, 2-5 years, 5-10 years, 10+ years?"}, {"owner": {"reputation": 1536, "user_id": 8560709, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cbaef3d3be3351abec96df526eb2eb30?s=128&d=identicon&r=PG&f=1", "display_name": "random_user_0891", "link": "https://stackoverflow.com/users/8560709/random-user-0891"}, "edited": false, "score": 0, "creation_date": 1505335809, "post_id": 46202840, "comment_id": 79376546, "body": "Unfortunately that doesn&#39;t work, getting &quot;undefined method `each&#39; for nil:NilClass&quot;   coming from     &lt;% @exp_names.each do |name| %&gt;"}, {"owner": {"reputation": 1536, "user_id": 8560709, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cbaef3d3be3351abec96df526eb2eb30?s=128&d=identicon&r=PG&f=1", "display_name": "random_user_0891", "link": "https://stackoverflow.com/users/8560709/random-user-0891"}, "edited": false, "score": 0, "creation_date": 1505336038, "post_id": 46202840, "comment_id": 79376679, "body": "Good to go now, I just had to add &#39;@exp_names &#39; and &#39;@exp_counts&#39; inside the index action.  Thanks for all the help, much appreciated!"}], "tags": [], "owner": {"reputation": 27630, "user_id": 1550807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JgCw5.png?s=128&g=1", "display_name": "Danil Speransky", "link": "https://stackoverflow.com/users/1550807/danil-speransky"}, "is_accepted": true, "score": 0, "last_activity_date": 1505334291, "last_edit_date": 1505334291, "creation_date": 1505320919, "answer_id": 46202840, "question_id": 46200354, "link": "https://stackoverflow.com/questions/46200354/rails-get-count-of-values-from-database/46202840#46202840", "title": "Rails: Get count of values from database", "body": "<p>You want to group by experience and then count it:</p>\n\n<pre><code>Job.group(:experience).count\n</code></pre>\n\n<p>That would return a hash:</p>\n\n<pre><code>{\n  '0-2 years' =&gt; 1,\n  '10+ years' =&gt; 2,\n  '2-5 years' =&gt; 1,\n  '5-10 years' =&gt; 2\n}\n</code></pre>\n\n<p>So in your view you could write something like this:</p>\n\n<pre><code># in controller\n\n@exp_names = ['0-2 years', '2-5 years', '5-10 years', '10+ years']\n@exp_counts = Job.group(:experience).count\n\n# in view\n\n&lt;% @exp_names.each do |name| %&gt;\n  &lt;%= link_to name, filtered_jobs_path(experience: name, num_days_past: params[:num_days_past], search: params[:search]) %&gt;\n  (&lt;%= @exp_counts[name] %&gt;)\n  &lt;br&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1536, "user_id": 8560709, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/cbaef3d3be3351abec96df526eb2eb30?s=128&d=identicon&r=PG&f=1", "display_name": "random_user_0891", "link": "https://stackoverflow.com/users/8560709/random-user-0891"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 820, "favorite_count": 0, "accepted_answer_id": 46202840, "answer_count": 2, "score": 0, "last_activity_date": 1505334291, "creation_date": 1505313397, "question_id": 46200354, "link": "https://stackoverflow.com/questions/46200354/rails-get-count-of-values-from-database", "title": "Rails: Get count of values from database", "body": "<p>I have a column in my database called \"experience\" the user can save values called 0-2 years, 2-5 years, 5-10 years, 10+ years.  My question is how do I get a count of those values?  I'm not looking for a sum total of all, I'm trying to get a count of how many \"2-5 years\" values exist in the column and present that to the user in the view.</p>\n\n<p>So in the view the user will see the values from the database tables column called experience and then how many jobs are posted and contain that value like this. </p>\n\n<p><strong>Experience:</strong></p>\n\n<p>0-2 years (3)</p>\n\n<p>2-5 years (15)</p>\n\n<p>Currently I am doing this in the view</p>\n\n<pre><code>&lt;%= link_to \"0-2 years\", filtered_jobs_path(experience: '0-2 years', num_days_past: params[:num_days_past], search: params[:search]) %&gt;\n   (&lt;%= Job.where(experience: '0-2 years').size %&gt;)&lt;br /&gt;\n</code></pre>\n\n<p>I was reading it's better to use size than count because size won't make another call to the database if it's already been loaded.  I'm not sure if I'm doing this in the most efficient way though, possibly I should be using a counter cache column?</p>\n\n<p>Here are the calls that get made how I currently have it setup, seems like the database is constantly being queried even though I'm using .size</p>\n\n<pre><code>   (0.1ms)  SELECT COUNT(*) FROM \"jobs\" WHERE \"jobs\".\"experience\" = ?  [[\"experience\", \"0-2 years\"]]\n\n   (0.1ms)  SELECT COUNT(*) FROM \"jobs\" WHERE \"jobs\".\"experience\" = ?  [[\"experience\", \"2-5 years\"]]\n\n   (0.1ms)  SELECT COUNT(*) FROM \"jobs\" WHERE \"jobs\".\"experience\" = ?  [[\"experience\", \"5-10 years\"]]\n\n   (0.1ms)  SELECT COUNT(*) FROM \"jobs\" WHERE \"jobs\".\"experience\" = ?  [[\"experience\", \"10+ years\"]]\n\n  Job Load (0.2ms)  SELECT  \"jobs\".* FROM \"jobs\" LIMIT ? OFFSET ?  [[\"LIMIT\", 5], [\"OFFSET\", 0]]\n\n   (0.1ms)  SELECT COUNT(*) FROM \"jobs\"\n\n  CACHE (0.0ms)  SELECT COUNT(*) FROM \"jobs\"\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 4, "creation_date": 1505313707, "post_id": 46200344, "comment_id": 79363620, "body": "<code>frined</code> != <code>friend</code>"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1505328002, "post_id": 46200344, "comment_id": 79372541, "body": "<i>Which</i> error do you get? Please, read the <i>entire</i> error, it will <i>tell</i> you a) <i>exactly</i> where to find the undefined variable and b) what the <i>precise</i> name of the variable is. Look at the name. Are you 1000000% sure that that is the name of the variable?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1505363668, "post_id": 46200344, "comment_id": 79384196, "body": "In <code>puts &quot;#{longest_name_length}&quot;</code>, <code>longest_name_length</code> is defined inside method definition. Will not be accessible from outside."}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 4, "last_activity_date": 1505313438, "creation_date": 1505313438, "answer_id": 46200369, "question_id": 46200344, "link": "https://stackoverflow.com/questions/46200344/trying-to-find-the-longest-string-in-an-array-in-ruby/46200369#46200369", "title": "Trying to find the longest string in an array in Ruby", "body": "<p>Try this one</p>\n\n<pre><code>people.max_by(&amp;:length)\n</code></pre>\n\n<p>You mispelled <code>friend</code> into <code>frined</code> at this line</p>\n\n<pre><code>longest_name = frined\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 777, "user_id": 1823441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffeeda5d93823fc29b927ca44e632c95?s=128&d=identicon&r=PG", "display_name": "Arjun", "link": "https://stackoverflow.com/users/1823441/arjun"}, "is_accepted": false, "score": 0, "last_activity_date": 1505329502, "last_edit_date": 1505329502, "creation_date": 1505328769, "answer_id": 46204901, "question_id": 46200344, "link": "https://stackoverflow.com/questions/46200344/trying-to-find-the-longest-string-in-an-array-in-ruby/46204901#46204901", "title": "Trying to find the longest string in an array in Ruby", "body": "<p>For maximum </p>\n\n<pre><code>people.map(&amp;:length).max\n</code></pre>\n\n<p>For minimum </p>\n\n<pre><code>people.map(&amp;:length).min\n</code></pre>\n\n<p>If you want length for max string</p>\n\n<pre><code>h = {}\npeople.map{|a| h[a]= a.length}\nh.key(h.values.max)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8603960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb73d1ff37d95257ea73f71f632b2ab8?s=128&d=identicon&r=PG&f=1", "display_name": "Rebecca Anne", "link": "https://stackoverflow.com/users/8603960/rebecca-anne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 671, "favorite_count": 0, "closed_date": 1505340285, "answer_count": 2, "score": -1, "last_activity_date": 1505329502, "creation_date": 1505313359, "last_edit_date": 1505327370, "question_id": 46200344, "link": "https://stackoverflow.com/questions/46200344/trying-to-find-the-longest-string-in-an-array-in-ruby", "closed_reason": "Not suitable for this site", "title": "Trying to find the longest string in an array in Ruby", "body": "<p>how do I find the longest name in an array in ruby.  here is what I tried:</p>\n\n<pre><code>people = [\"john\", \"clark\", \"stan\", \"mike\", \"nick\", \"devon\"]\n\n\ndef find_longest_name(people)\n  longest_name = nil\n  longest_name_length = -1\n  people.each do |friend|\n    if friend.length &gt; longest_name_length\n      longest_name = frined\n      longest_name_length = friend.length\n    end\n  end\n return longest_name\nend\nputs \"#{longest_name_length}\"\n</code></pre>\n\n<p>I am getting an error that says I have an undefined variable.  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "many-to-many", "rails-activerecord", "has-many-through"], "comments": [{"owner": {"reputation": 654, "user_id": 1319545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d925d70e121e9b8e1a7dd44155e2497?s=128&d=identicon&r=PG", "display_name": "thaleshcv", "link": "https://stackoverflow.com/users/1319545/thaleshcv"}, "edited": false, "score": 0, "creation_date": 1505322124, "post_id": 46200141, "comment_id": 79369206, "body": "can you post the <code>user_project</code> model?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1505335474, "post_id": 46200141, "comment_id": 79376397, "body": "Sidenote: Your <code>developers</code> scope does not exist because the has_many is overwriting it. Think of it like this when you call <code>User.developers</code> which one do you expect? Instead remove the scope and change your has_many to <code>has_many :developers, -&gt;{ where(:role =&gt; &quot;developer&quot;) }, class_name: User, foreign_key: :manager_id</code> here the &quot;scope&quot; is included in the definition of the relationship"}, {"owner": {"reputation": 21, "user_id": 6517738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea3d9c689336c0331bd87590dd24080?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/6517738/akshay"}, "reply_to_user": {"reputation": 654, "user_id": 1319545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d925d70e121e9b8e1a7dd44155e2497?s=128&d=identicon&r=PG", "display_name": "thaleshcv", "link": "https://stackoverflow.com/users/1319545/thaleshcv"}, "edited": false, "score": 0, "creation_date": 1505368880, "post_id": 46200141, "comment_id": 79386076, "body": "@thaleshcv user_project mode posted"}], "answers": [{"tags": [], "owner": {"reputation": 600, "user_id": 5994561, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh5.googleusercontent.com/-VGTzdts3mMw/AAAAAAAAAAI/AAAAAAAAADY/6Qwn_AVjnQI/photo.jpg?sz=128", "display_name": "sammms", "link": "https://stackoverflow.com/users/5994561/sammms"}, "is_accepted": false, "score": 0, "last_activity_date": 1505315860, "creation_date": 1505315860, "answer_id": 46201196, "question_id": 46200141, "link": "https://stackoverflow.com/questions/46200141/rails-accepts-nested-attributes-for-not-saving-association-on-has-many-through/46201196#46201196", "title": "Rails accepts_nested_attributes_for not saving association on has_many through", "body": "<p>You should be accepting attributes for <code>users</code>, not for <code>users_projects</code> in your Project model.  This is able to work because you have set up the <code>has_many_through</code> association between User and Project.</p>\n\n<p>Here's a simplified example that hits the critical points.</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :user_projects\n  has_many :projects, through: :user_projects\nend\n\nclass Projects &lt; ApplicationRecord\n  has_many :user_projects\n  has_many :users, through: :user_projects\n  accepts_nested_attributes_for :users\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 156, "user_id": 8549623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaedd1d0726ae26aa58c9cb9d074e765?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Yurkovetc", "link": "https://stackoverflow.com/users/8549623/michael-yurkovetc"}, "is_accepted": false, "score": 0, "last_activity_date": 1505320581, "creation_date": 1505320581, "answer_id": 46202743, "question_id": 46200141, "link": "https://stackoverflow.com/questions/46200141/rails-accepts-nested-attributes-for-not-saving-association-on-has-many-through/46202743#46202743", "title": "Rails accepts_nested_attributes_for not saving association on has_many through", "body": "<p>I think that problem in your permit params, try to change it such as</p>\n\n<pre><code>user_projects_attributes: [:id]\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6517738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea3d9c689336c0331bd87590dd24080?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/6517738/akshay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 405, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1505368790, "creation_date": 1505312823, "last_edit_date": 1505368790, "question_id": 46200141, "link": "https://stackoverflow.com/questions/46200141/rails-accepts-nested-attributes-for-not-saving-association-on-has-many-through", "title": "Rails accepts_nested_attributes_for not saving association on has_many through", "body": "<p>I am creating a project_management application <br><br>\nwhen manager creating a project at that time I also want to save developers,\nso for that, I created the user_projects model</p>\n\n<p>but I not able to create the user_projects record</p>\n\n<p>Model</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n  scope :developers, -&gt;{ where(:role =&gt; \"developer\") }\n\n  has_many :developers, class_name: \"User\",\n                        foreign_key: \"manager_id\"\n  has_many :user_projects\n  has_many :projects, through: :user_projects\n  belongs_to :manager, class_name: \"User\", optional: true\n\n  enum role: {developer: 0, manager: 1}\n\n  def full_name\n    [first_name, last_name].join(' ')\n  end\nend\n\nclass Project &lt; ApplicationRecord\n  has_many :user_projects\n  has_many :users, through: :user_projects\n\n  accepts_nested_attributes_for :user_projects, reject_if: -&gt;(object){ object[:user_id].blank? }\nend\n\nclass UserProject &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :project\nend\n</code></pre>\n\n<p>Projects Controller</p>\n\n<pre><code>class ProjectsController &lt; ApplicationController\n  before_action :set_project, only: [:show, :edit, :update, :destroy]\n\n  def new\n    @project = Project.new\n    @project.user_projects.build\n  end\n\n  def create\n    @project = Project.new(project_params)\n\n    respond_to do |format|\n      if @project.save\n        format.html { redirect_to @project, notice: 'Project was successfully created.' }\n        format.json { render :show, status: :created, location: @project }\n      else\n        format.html { render :new }\n        format.json { render json: @project.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  private\n\n    def project_params\n      params.require(:project).permit(:project_name, :project_description, :user_projects_attributes =&gt; [:user_id =&gt; []])\n    end\nend\n</code></pre>\n\n<p>Project Create form</p>\n\n<pre><code>&lt;%= simple_form_for(@project, html: { class: 'form-horizontal' }) do |form| %&gt;\n  &lt;%= form.input :project_name %&gt;\n  &lt;%= form.input :project_description %&gt;\n  &lt;%= form.simple_fields_for :user_projects do |user_project| %&gt;\n    &lt;%= user_project.association :user, :collection =&gt; User.developers, :label_method =&gt; :full_name, :value_method =&gt; :id, input_html: { multiple: true }%&gt;\n  &lt;% end %&gt;  \n  &lt;%= form.button :submit%&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>getting errors </p>\n\n<blockquote>\n  <p>errors prohibited this project from being saved: <br> \n   1. User projects user must exist <br>\n   2. User projects project must exist</p>\n</blockquote>\n"}, {"tags": ["ruby", "rspec", "global-variables"], "answers": [{"comments": [{"owner": {"reputation": 17816, "user_id": 119790, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/13ebb34ff0ab93713739df64e923bd87?s=128&d=identicon&r=PG", "display_name": "Ian Vaughan", "link": "https://stackoverflow.com/users/119790/ian-vaughan"}, "edited": false, "score": 0, "creation_date": 1589460784, "post_id": 46202002, "comment_id": 109307239, "body": "Really nice, all worked except I had to manually require the helper in spec_helper. <code>require_relative &#39;support&#47;request_helper&#39;</code>"}], "tags": [], "owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "is_accepted": true, "score": 7, "last_activity_date": 1505318105, "creation_date": 1505318105, "answer_id": 46202002, "question_id": 46200096, "link": "https://stackoverflow.com/questions/46200096/set-variable-once-for-all-examples-in-rspec-suite-without-using-a-global-variab/46202002#46202002", "title": "Set variable once for all examples in RSpec suite (without using a global variable)", "body": "<p>for this purpose I usually write custom modules that I can include in the <code>spec_helper.rb</code> file.</p>\n\n<p>Let's say that I am testing a back-end API and I don't want to parse every time the JSON response body.</p>\n\n<pre><code>spec/\nspec/spec_helper.rb\nspec/support/request_helper.rb\nspec/controllers/api/v1/users_controller_spec.rb\n</code></pre>\n\n<p>I first define a function in a module placed under the support subfolder.</p>\n\n<pre><code># request_helper.rb\nmodule Request\n  module JsonHelpers\n    def json_response\n      @json_response ||= JSON.parse(response.body, symbolize_names: true)\n    end\n  end\nend\n</code></pre>\n\n<p>Then I include this module by default for some test types</p>\n\n<pre><code>#spec_helper.rb\n#...\nRSpec.configure do |config|\n  config.include Request::JsonHelpers, type: :controller\nend\n</code></pre>\n\n<p>Then I use methods defined in the test.</p>\n\n<pre><code># users_controller_spec.rb\nrequire 'rails_helper'\n\nRSpec.describe Api::V1::UsersController, type: :controller do\n  # ...\n\n describe \"POST #create\" do\n\n    context \"when is successfully created\" do\n      before(:each) do\n        @user_attributes = FactoryGirl.attributes_for :user\n        post :create, params: { user: @user_attributes }\n      end\n\n      it \"renders the json representation for the user record just created\" do\n        user_response = json_response[:user]\n        expect(user_response[:email]).to eq(@user_attributes[:email])\n      end\n\n      it { should respond_with 201 }\n    end\nend\n</code></pre>\n\n<p>In your case, you could create a module such as</p>\n\n<pre><code>module EnvHelper\n  def is_debug_mode?\n    @debug_mode ||= ENV['DEBUG']\n  end\nend\n</code></pre>\n\n<p>Then you can include it and simply use the method <code>is_debug_mode?</code> in your tests.</p>\n"}], "owner": {"reputation": 5116, "user_id": 920599, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/07e30f4ee2a1866357ddae4581c85a22?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/920599/zack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2676, "favorite_count": 2, "accepted_answer_id": 46202002, "answer_count": 1, "score": 4, "last_activity_date": 1505318105, "creation_date": 1505312693, "question_id": 46200096, "link": "https://stackoverflow.com/questions/46200096/set-variable-once-for-all-examples-in-rspec-suite-without-using-a-global-variab", "title": "Set variable once for all examples in RSpec suite (without using a global variable)", "body": "<p>What is the conventional way to set a variable once to be used by all examples in an RSpec suite?</p>\n\n<p>I currently set a global variable in <code>spec_helper</code> that checks whether the specs are being run in a \"debug mode\"</p>\n\n<pre><code>$debug = ENV.key?('DEBUG') &amp;&amp; (ENV['DEBUG'].casecmp('false') != 0) &amp;&amp; (ENV['DEBUG'].casecmp('no') != 0)\n</code></pre>\n\n<p>How do I make this information available to all the examples in the suite without using a global variable and without re-computing the value for each context and/or example? (My understanding is that using a <code>before(:all)</code> block would re-compute it  once per context; but, that <code>before(:suite)</code> can't be used to set instance variables.)</p>\n\n<p>(Note: I'm asking more to learn about good design that to address this specific problem.  I know one global isn't a big deal.)</p>\n"}, {"tags": ["ruby", "events", "tcp", "server", "ruby-thread"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1505395796, "post_id": 46199512, "comment_id": 79403610, "body": "In the threaded implementation, the first line seems to be 86 bytes long, not the 33 bytes you were expecting from a first message.... fixing the exception (see my answer) should fix any other messages being processed."}, {"owner": {"reputation": 9, "user_id": 8366203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f777c194db8247e52d34716a3ec5baf2?s=128&d=identicon&r=PG&f=1", "display_name": "Anderson Alberto Ochoa Estupia", "link": "https://stackoverflow.com/users/8366203/anderson-alberto-ochoa-estupia"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1505403298, "post_id": 46199512, "comment_id": 79409227, "body": "That is because I&#39;m ignoring in my test file that first line but it is the same as the first line that I show in that iodine server. Thanks @Myst"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 8366203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f777c194db8247e52d34716a3ec5baf2?s=128&d=identicon&r=PG&f=1", "display_name": "Anderson Alberto Ochoa Estupia", "link": "https://stackoverflow.com/users/8366203/anderson-alberto-ochoa-estupia"}, "edited": false, "score": 0, "creation_date": 1505396479, "post_id": 46208850, "comment_id": 79404190, "body": "My bad for not see that error. Thank you so much @Myst"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 9, "user_id": 8366203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f777c194db8247e52d34716a3ec5baf2?s=128&d=identicon&r=PG&f=1", "display_name": "Anderson Alberto Ochoa Estupia", "link": "https://stackoverflow.com/users/8366203/anderson-alberto-ochoa-estupia"}, "edited": false, "score": 0, "creation_date": 1505396604, "post_id": 46208850, "comment_id": 79404287, "body": "@AndersonAlbertoOchoaEstupia - technically it&#39;s my spelling mistake, so it&#39;s me that is apologizing. I&#39;m happy to help."}], "tags": [], "owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "is_accepted": true, "score": 0, "last_activity_date": 1505395308, "last_edit_date": 1505395308, "creation_date": 1505350060, "answer_id": 46208850, "question_id": 46199512, "link": "https://stackoverflow.com/questions/46199512/handle-avl-messages-with-iodine/46208850#46208850", "title": "handle AVL messages with iodine", "body": "<p>This looks like a variation of the untested code I posted earlier.</p>\n\n<p>It seems the issue is with a spelling mistake in the code (probably mine?).</p>\n\n<p>The <code>po += ...</code> should have been <code>pos += ...</code></p>\n\n<pre><code>require 'iodine'\n\n# define the protocol for our service\nclass TT8750plus\n  @timeout = 10\n  def on_open\n    puts \"New Connection Accepted.\"\n    # this file is just for testing purposes.\n    t = Time.now.strftime(\"%d-%m-%Y %H%M\")\n    file_name = t + '.txt'\n    @out_file = File.new(file_name, \"w+\")\n\n    # a rolling buffer for fragmented messages\n    @expecting = 33\n    @msg = \"\"\n  end\n\n  def on_message buffer\n    length = buffer.length\n    pos = 0\n    while length &gt;= @expecting\n      @msg &lt;&lt; (buffer[pos, @expecting])\n      @out_file.puts(@msg.unpack('H*')[0])\n      length -= @expecting\n      pos += @expecting # the spelling mistake was here\n      @expecting = 86\n      puts \"wrote:\", @msg\n      @msg.clear\n    end\n    if(length &gt; 0)\n      @msg &lt;&lt; (buffer[pos, length])\n      @expecting = 86 - length\n    end\n    puts(\"Waiting for more data:\", @msg) unless @msg.empty?\n  end\n\n  def on_close\n    @out_file.close\n  end\nend\n# create the service instance\nIodine.listen 12050, TT8750plus\n# start the service\nIodine.start\n</code></pre>\n\n<p>Again, lacking an emulation for the Skypatrol TT8750+, I can't test the code. But it should be possible to follow error messages to slowly track down these types of issues.</p>\n\n<p><strong>P.S.</strong></p>\n\n<p>To protect from exceptions, consider using Ruby's:</p>\n\n<pre><code>begin\n    # code\nrescue =&gt; e\n    # oops something happened. i.e.\n    puts e.message, e.backtrace\nend\n</code></pre>\n\n<p>i.e., the <code>on_message</code> method might look like this:</p>\n\n<pre><code>  def on_message buffer\n   begin\n    length = buffer.length\n    pos = 0\n    while length &gt;= @expecting\n      @msg &lt;&lt; (buffer[pos, @expecting])\n      @out_file.puts(@msg.unpack('H*')[0])\n      length -= @expecting\n      pos += @expecting # the spelling mistake was here\n      @expecting = 86\n      @msg.clear\n    end\n    if(length &gt; 0)\n      @msg &lt;&lt; (buffer[pos, length])\n      @expecting = 86 - length\n    end\n    puts @msg unless @msg.empty? # print leftovers for testing...?\n   rescue =&gt; e\n     # oops something happened. React\n     puts e.message, e.backtrace\n   end\n  end\n</code></pre>\n\n<p>Also, FYI, iodine allows you to control the number of processes (workers) and threads you'r using. See <a href=\"http://www.rubydoc.info/github/boazsegev/iodine/master/Iodine\" rel=\"nofollow noreferrer\">the documentation</a> for details. </p>\n"}], "owner": {"reputation": 9, "user_id": 8366203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f777c194db8247e52d34716a3ec5baf2?s=128&d=identicon&r=PG&f=1", "display_name": "Anderson Alberto Ochoa Estupia", "link": "https://stackoverflow.com/users/8366203/anderson-alberto-ochoa-estupia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 46208850, "answer_count": 1, "score": 0, "last_activity_date": 1505403503, "creation_date": 1505310997, "last_edit_date": 1505403503, "question_id": 46199512, "link": "https://stackoverflow.com/questions/46199512/handle-avl-messages-with-iodine", "title": "handle AVL messages with iodine", "body": "<p>Right now I'm developing a some sort of parser for the messages of the Skypatrol TT8750+ and my threaded TCP server is working. The problem is that it isn't a good approach if there are to many devices connected at the same time. I'm using iodine but I can't make work some code that was given to me. My goal is to receive first a 33bytes message to identify the device and then start to receive 86bytes messages with information of the vehicle.</p>\n\n<pre><code>require 'iodine'\n\n# define the protocol for our service\nclass TT8750plus\n  @timeout = 10\n  def on_open\n    puts \"New Connection Accepted.\"\n    # this file is just for testing purposes.\n    t = Time.now.strftime(\"%d-%m-%Y %H%M\")\n    file_name = t + '.txt'\n    @out_file = File.new(file_name, \"w+\")\n\n    # a rolling buffer for fragmented messages\n    @expecting = 33\n    @msg = \"\"\n  end\n\n  def on_message buffer\n    length = buffer.length\n    pos = 0\n    while length &gt;= @expecting\n      @msg &lt;&lt; (buffer[pos, @expecting])\n      @out_file.puts(@msg.unpack('H*')[0])\n      length -= @expecting\n      po += @expecting\n      @expecting = 86\n      @msg.clear\n    end\n    if(length &gt; 0)\n      @msg &lt;&lt; (buffer[pos, length])\n      @expecting = 86 - length\n    end\n    puts @msg\n  end\n\n  def on_close\n    @out_file.close\n  end\nend\n# create the service instance\nIodine.listen 12050, TT8750plus\n# start the service\nIodine.start\n</code></pre>\n\n<p>And this error appears on every message</p>\n\n<pre><code>New Connection Accepted.\nIodine caught an unprotected exception - NoMethodError: undefined method `+' for nil:NilClass\niodineServer.rb:26:in `on_message'\niodineServer.rb:1:in `on_data'Iodine caught an unprotected exception - NoMethodError: undefined method `+' for nil:NilClass\n</code></pre>\n\n<p>Also this implementation doesn't get the messages I need\nThese are the first two lines that I got from this implementation:</p>\n\n<pre><code>0021000a0800000000000120202020202038363332383630323034333433373020\n0021000a08000000000001202020202020383633323836303230343334333730200056000a08100020202020202038363332383630323034333433373020014b0000\n</code></pre>\n\n<p>And these are the first two lines from the threaded implementation</p>\n\n<pre><code>0021000a0800000000000120202020202038363332383630323034333433373020\n0056000a08100020202020202038363332383630323034333433373020000b00000013090044709bfb8109e400000000001100000000000067eb11090c1512012e970020000000000005000000000005000000000007 \n0056000a08100020202020202038363332383630323034333433373020010b00000013090044709bfb8109e400000000001200000000000067eb11090c1512042e970020000000000005000000000005000000000008\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "git"], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 2, "last_activity_date": 1505312989, "creation_date": 1505312989, "answer_id": 46200204, "question_id": 46199300, "link": "https://stackoverflow.com/questions/46199300/how-to-get-github-repo-locations-of-all-gems-in-gemfiles/46200204#46200204", "title": "How to get Github repo locations of all gems in Gemfiles?", "body": "<p>A gem might not <em>have</em> a public github repo... It could be a private repo, or stored on a different host, or even not online at all. So there is no guarantee that you'll be able to map each gem to a github repo.</p>\n\n<p>However, there are a few tings you could try to figure it out, such as:</p>\n\n<ul>\n<li>First, find the gemspec. It could either be local (<code>gem spec &lt;name&gt;</code>) or remote (<code>gem spec -r &lt;name&gt;</code>).</li>\n<li>Parse the above YAML.</li>\n<li>Check each gemspec homepage.</li>\n<li>Check each gemspec description.</li>\n<li>If the above fails, try searching github directly - e.g. with <a href=\"https://github.com/octokit/octokit.rb\" rel=\"nofollow noreferrer\"><code>Octokit</code></a>.</li>\n<li>Handle special edge cases, such as <code>ActionCable</code> being within the <code>rails</code> repository.</li>\n</ul>\n\n<p>This is clearly a non-trivial task... Thankfully however, this library already handles lots of the hard work:</p>\n\n<p><a href=\"https://github.com/teeparham/gemdiff\" rel=\"nofollow noreferrer\">https://github.com/teeparham/gemdiff</a></p>\n\n<p>Usage:</p>\n\n<pre><code>&gt; gem install gemdiff\n\n&gt; gemdiff find celluloid\n&gt; https://github.com/celluloid/celluloid\n\n&gt; gemdiff find typhoeus\n&gt; https://github.com/typhoeus/typhoeus\n\n&gt; gemdiff find notarealgem12321\n&gt; ERROR:  No gem matching 'notarealgem12321 (&gt;= 0)' found\n&gt; Could not find github repository for notarealgem12321\n</code></pre>\n"}], "owner": {"reputation": 17608, "user_id": 661624, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/347231f8387561ef324e25b48b96ba16?s=128&d=identicon&r=PG&f=1", "display_name": "Henley Chiu", "link": "https://stackoverflow.com/users/661624/henley-chiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 46200204, "answer_count": 1, "score": 2, "last_activity_date": 1505312989, "creation_date": 1505310379, "question_id": 46199300, "link": "https://stackoverflow.com/questions/46199300/how-to-get-github-repo-locations-of-all-gems-in-gemfiles", "title": "How to get Github repo locations of all gems in Gemfiles?", "body": "<p>I have a Gemfile with a list of gems, ie:</p>\n\n<pre><code>gem 'celluloid'\ngem 'typhoeus'\n</code></pre>\n\n<p>Is there anyway to get a list of the Github repo urls for all of these Gems at once without me looking them up manually? Perhaps using bundle?</p>\n\n<p>IE, I want to get this returned:</p>\n\n<pre><code>https://github.com/celluloid/celluloid\nhttps://github.com/typhoeus/typhoeus\n</code></pre>\n"}, {"tags": ["ruby", "windows", "powershell", "ftp", "explorer"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1505310181, "post_id": 46199130, "comment_id": 79360979, "body": "Where does that URL come from? Presumably your online portal eventually redirects to it, in which case you&#39;ll need to simulate using the portal using Ruby, perhaps. Also what kind of a monster uses FTP in 2017?"}, {"owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1505310420, "post_id": 46199130, "comment_id": 79361163, "body": "The online portal downloads an executable which then open explorer"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1505310527, "post_id": 46199130, "comment_id": 79361252, "body": "Everything about that sounds spectacularly ill-advised from a security perspective. If this executable opens a port to accept FTP connections it is possible to enumerate all listening TCP ports and look for when a new one suddenly appears as that&#39;s likely to be your target process."}], "owner": {"reputation": 5471, "user_id": 6019903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7h7I.png?s=128&g=1", "display_name": "Brad", "link": "https://stackoverflow.com/users/6019903/brad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505309927, "creation_date": 1505309927, "question_id": 46199130, "link": "https://stackoverflow.com/questions/46199130/get-a-dynamic-port-for-windows-ftp", "title": "Get a dynamic port for windows FTP", "body": "<p>I am trying to automate a process that requires logging into an online portal that eventually opens windows explorer with an FTP to the secure server.</p>\n\n<p>The address in explorer is something like: <a href=\"ftp://127.0.0.1:56950/\" rel=\"nofollow noreferrer\">ftp://127.0.0.1:56950/</a></p>\n\n<p>I need to copy a file from this location to the local machine running the script. The problem is the port changes each time. So for example the next time i run it it might be <a href=\"ftp://127.0.0.1:51432/\" rel=\"nofollow noreferrer\">ftp://127.0.0.1:51432/</a></p>\n\n<p>I am using Ruby to do most of this as I needed to use selenium and ruby selenium is just amazing. But to sort this issue I am happy to use powershell or anything else.</p>\n\n<p>Does anyone have any ideas how I might go about getting this port number? or any other way I can copy a file from this dynamic address?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby", "erb", "irb"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1505310010, "post_id": 46199082, "comment_id": 79360847, "body": "You really need to test code like this in a version of Ruby that&#39;s at least semi-modern, like 2.3 or better."}], "tags": [], "owner": {"reputation": 1708, "user_id": 3569921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/077N5.jpg?s=128&g=1", "display_name": "marcusshep", "link": "https://stackoverflow.com/users/3569921/marcusshep"}, "is_accepted": false, "score": 0, "last_activity_date": 1505314718, "last_edit_date": 1505314718, "creation_date": 1505309798, "answer_id": 46199082, "question_id": 46198968, "link": "https://stackoverflow.com/questions/46198968/irb-nameerror-undefined-local-variable-or-method-for-mainobject/46199082#46199082", "title": "IRB - NameError: undefined local variable or method for main:Object", "body": "<pre><code>1.8.7-p376 :004 &gt; require 'erb'\n=&gt; true \n\n1.8.7-p376 :005 &gt; @weekday = Time.now.strftime('%A')\n=&gt; \"Wednesday\" \n\n1.8.7-p376 :006 &gt; simple_template = \"Today is &lt;%= @weekday %&gt;.\"\n=&gt; \"Today is &lt;%= @weekday %&gt;.\" \n\n1.8.7-p376 :007 &gt; renderer = ERB.new(simple_template)\n=&gt; #&lt;ERB:0x10e46a8e8 @src=\"_erbout = ''; _erbout.concat \\\"Today is \\\"; _erbout.concat(( @weekday ).to_s); _erbout.concat \\\".\\\"; _erbout\", @filename=nil, @safe_level=nil&gt; \n\n1.8.7-p376 :009 &gt; puts output = renderer.result()\nToday is Wednesday.\n=&gt; nil \n</code></pre>\n\n<p>You want to make <code>weekday</code> an instance variable, by perpending an <code>@</code>. Like so, <code>@weekday = Time.now.strftime('%A')</code></p>\n"}, {"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 2, "last_activity_date": 1505309803, "creation_date": 1505309803, "answer_id": 46199086, "question_id": 46198968, "link": "https://stackoverflow.com/questions/46198968/irb-nameerror-undefined-local-variable-or-method-for-mainobject/46199086#46199086", "title": "IRB - NameError: undefined local variable or method for main:Object", "body": "<p>The line</p>\n\n<pre><code>puts output = renderer.result()\n</code></pre>\n\n<p>doesn't have access to your context so it can't see the variable <code>weekday</code> You need to pass the current context (the \"binding\")</p>\n\n<p>Try instead</p>\n\n<pre><code>puts output = renderer.result(binding)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": -1, "last_activity_date": 1505309805, "creation_date": 1505309805, "answer_id": 46199088, "question_id": 46198968, "link": "https://stackoverflow.com/questions/46198968/irb-nameerror-undefined-local-variable-or-method-for-mainobject/46199088#46199088", "title": "IRB - NameError: undefined local variable or method for main:Object", "body": "<p>It looks like you're referencing <a href=\"http://www.stuartellis.name/articles/erb/\" rel=\"nofollow noreferrer\">this blog post about ERB</a> which isn't correct. The ERB rendering method needs to receive a <em>binding</em> which defines where to get local variables from:</p>\n\n<pre><code>renderer.result(binding)\n</code></pre>\n\n<p>It's worth noting that article uses a lot of practices considered non-standard in Ruby, like including empty argument lists in method definitions and calls.</p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1505309819, "creation_date": 1505309819, "answer_id": 46199092, "question_id": 46198968, "link": "https://stackoverflow.com/questions/46198968/irb-nameerror-undefined-local-variable-or-method-for-mainobject/46199092#46199092", "title": "IRB - NameError: undefined local variable or method for main:Object", "body": "<p>Make it an instance variable: <code>ERB</code> looks up instance variables:</p>\n\n<pre><code>@weekday = Time.now.strftime('%A')\nERB.new(\"Today is &lt;%= @weekday %&gt;.\").result\n#\u21d2 \"Today is Wednesday.\"\n</code></pre>\n"}], "owner": {"reputation": 3465, "user_id": 5946118, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/CbjEl.jpg?s=128&g=1", "display_name": "Rajkaran Mishra", "link": "https://stackoverflow.com/users/5946118/rajkaran-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1183, "favorite_count": 0, "accepted_answer_id": 46199086, "answer_count": 4, "score": 1, "last_activity_date": 1505314718, "creation_date": 1505309486, "question_id": 46198968, "link": "https://stackoverflow.com/questions/46198968/irb-nameerror-undefined-local-variable-or-method-for-mainobject", "title": "IRB - NameError: undefined local variable or method for main:Object", "body": "<p>I was trying to understand how the <a href=\"http://www.stuartellis.name/articles/erb/\" rel=\"nofollow noreferrer\">ERB</a> works in the IRB.</p>\n\n<pre><code>&gt;&gt; require 'erb'\n=&gt; true\n\n&gt;&gt; weekday = Time.now.strftime('%A')\n=&gt; \"Wednesday\"\n\n&gt;&gt; simple_template = \"Today is &lt;%= weekday %&gt;.\"\n=&gt; \"Today is &lt;%= weekday %&gt;.\"\n\n&gt;&gt; renderer = ERB.new(simple_template)\n=&gt; #&lt;ERB:0x287f568 @safe_level=nil, @src=\"#coding:IBM437\\n_erbout = ''; _erbout.concat \\\"Today is \\\"; _erbout.concat(( weekday ).to_s); _erbout.concat \\\".\\\"; _erbout.force_encoding(__ENCODING__)\", @encoding=#&lt;Encoding:IBM437&gt;, @filename=nil, @lineno=0&gt;\n\n&gt;&gt; puts output = renderer.result()\nNameError: undefined local variable or method `weekday' for main:Object\n        from (erb):1:in `&lt;main&gt;'\n        from C:/Ruby22/lib/ruby/2.2.0/erb.rb:863:in `eval'\n        from C:/Ruby22/lib/ruby/2.2.0/erb.rb:863:in `result'\n        from (irb):5\n        from C:/Ruby22/bin/irb:11:in `&lt;main&gt;'\n</code></pre>\n\n<p>I was not able to figure out the reason of the above error cause I can see the variable is returning it's value.</p>\n\n<pre><code>&gt;&gt; weekday\n=&gt; \"Wednesday\"\n</code></pre>\n\n<p>Now when I took the code and put it in a file, it ran fine. Please explain. </p>\n"}, {"tags": ["ruby", "ruby-2.4"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 6, "creation_date": 1505309491, "post_id": 46198575, "comment_id": 79360460, "body": "The commit was merged on June 19. Ruby 2.4.1 was released in March, 3 months before <code>String#delete_prefix</code> was even written. So, it cannot possibly be in there. There seems to be a bug in Ruby-Doc&#39;s build scripts. Note: it always helps to check the documentation that comes with the Ruby you have actually installed instead of looking on third-party sites."}, {"owner": {"reputation": 10280, "user_id": 874283, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/8bbcdae54d8cd930405e57162e1522d3?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Xu", "link": "https://stackoverflow.com/users/874283/zack-xu"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1505314469, "post_id": 46198575, "comment_id": 79364203, "body": "After doing <code>rvm install ruby-head</code>, the methods <code>String#delete_prefix</code> and <code>String#delete_suffix</code> are available.  Thanks"}], "owner": {"reputation": 10280, "user_id": 874283, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/8bbcdae54d8cd930405e57162e1522d3?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Xu", "link": "https://stackoverflow.com/users/874283/zack-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1273, "favorite_count": 1, "answer_count": 0, "score": 6, "last_activity_date": 1505310227, "creation_date": 1505308379, "last_edit_date": 1505310227, "question_id": 46198575, "link": "https://stackoverflow.com/questions/46198575/nomethoderror-undefined-method-delete-prefix-string-class-ruby-2-4-1", "title": "NoMethodError: undefined method &quot;delete_prefix&quot; String class (Ruby 2.4.1)", "body": "<p>I'm using the latest Ruby (version 2.4.1)</p>\n\n<p>I see there's a method <code>String#delete_prefix</code> as defined in\n<a href=\"https://ruby-doc.org/core-2.4.1/String.html#method-i-delete_prefix\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.4.1/String.html#method-i-delete_prefix</a></p>\n\n<p>But in <code>irb</code>, this method doesn't exist for some reason:</p>\n\n<pre><code>2.4.1 :030 &gt; c=\"_abc_xyz\"\n=&gt; \"_abc_xyz\"\n2.4.1 :031 &gt; c.delete_prefix(\"_\")\nNoMethodError: undefined method `delete_prefix' for \"_abc_xyz\":String\nfrom (irb):31\nfrom /Users/jonsmith/.rvm/rubies/ruby-2.4.1/bin/irb:11:in `&lt;main&gt;'\n2.4.1 :032 &gt;\n</code></pre>\n\n<p>What's going on here?!</p>\n\n<p>(The above can be achieved by <code>c.gsub(/^_/, '')</code>, but I'm wondering why <code>delete_prefix</code> and <code>delete_suffix</code> don't exist contrary to Ruby documentation.)</p>\n"}, {"tags": ["java", "ruby", "byte"], "comments": [{"owner": {"reputation": 3394, "user_id": 948169, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/109adf7a75c28e8955c31684b772ca27?s=128&d=identicon&r=PG", "display_name": "Mohanraj", "link": "https://stackoverflow.com/users/948169/mohanraj"}, "edited": false, "score": 0, "creation_date": 1505307751, "post_id": 46197946, "comment_id": 79359064, "body": "I get error when I run your java code, Exception in thread &quot;main&quot; java.lang.StringIndexOutOfBoundsException: String index out of range: 7"}, {"owner": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "reply_to_user": {"reputation": 3394, "user_id": 948169, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/109adf7a75c28e8955c31684b772ca27?s=128&d=identicon&r=PG", "display_name": "Mohanraj", "link": "https://stackoverflow.com/users/948169/mohanraj"}, "edited": false, "score": 0, "creation_date": 1505307828, "post_id": 46197946, "comment_id": 79359132, "body": "It&#39;s becase actual string is longer <code>43cfde6a0996a389cd2df5a2c5bd680d44ff77534364446f96621719c4dc&zwnj;&#8203;3f6b88ff61304ac4856e&zwnj;&#8203;04403e0d1df446e79592&zwnj;&#8203;c2b80352ed06c262a3a1&zwnj;&#8203;f75bae47</code>"}, {"owner": {"reputation": 3394, "user_id": 948169, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/109adf7a75c28e8955c31684b772ca27?s=128&d=identicon&r=PG", "display_name": "Mohanraj", "link": "https://stackoverflow.com/users/948169/mohanraj"}, "edited": false, "score": 0, "creation_date": 1505308106, "post_id": 46197946, "comment_id": 79359361, "body": "So, you want to convert hex string to decimal bytes, Am I correct?"}, {"owner": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "reply_to_user": {"reputation": 3394, "user_id": 948169, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/109adf7a75c28e8955c31684b772ca27?s=128&d=identicon&r=PG", "display_name": "Mohanraj", "link": "https://stackoverflow.com/users/948169/mohanraj"}, "edited": false, "score": 0, "creation_date": 1505308339, "post_id": 46197946, "comment_id": 79359555, "body": "@Mohanraj, yes, you are correct"}], "answers": [{"comments": [{"owner": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "edited": false, "score": 0, "creation_date": 1505313778, "post_id": 46198564, "comment_id": 79363676, "body": "I needed to edit it a bit <code>s.scan(&#47;.{1}&#47;).each_slice(2).   map { |f, l| (Integer(f,16) &lt;&lt; 4) + Integer(l,16) }</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "edited": false, "score": 0, "creation_date": 1505314441, "post_id": 46198564, "comment_id": 79364182, "body": "@IlyaCherevkov Thanks, I have updated the answer accordingly."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1505314424, "last_edit_date": 1505314424, "creation_date": 1505308357, "answer_id": 46198564, "question_id": 46197946, "link": "https://stackoverflow.com/questions/46197946/hex-to-bytes-ruby-and-java/46198564#46198564", "title": "Hex to Bytes, ruby and java", "body": "<p>No it is not correct. <code>&lt;&lt;</code> has a lower operator precedence than <code>+</code>. Note even in java there are parentheses around shift operator. Also, it\u2019s not ruby, it\u2019s <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a> written with an almost ruby syntax.</p>\n\n<pre><code> str.codepoints.\n     each_slice(2).\n     map { |f, l| (f &lt;&lt; 4) + l }\n</code></pre>\n\n<p>would probably do what you want, but without seeing an expected outcome it\u2019s hard to say.</p>\n\n<p>Correct version as by Ilya is:</p>\n\n<pre><code>str.scan(/.{1}/).\n    each_slice(2).\n    map { |f, l| (Integer(f,16) &lt;&lt; 4) + Integer(l,16) }\n</code></pre>\n"}], "owner": {"reputation": 1653, "user_id": 1318874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0c89dbf404d7c6ac72954595c974e3d9?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Cherevkov", "link": "https://stackoverflow.com/users/1318874/ilya-cherevkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 46198564, "answer_count": 1, "score": 2, "last_activity_date": 1505314424, "creation_date": 1505306626, "question_id": 46197946, "link": "https://stackoverflow.com/questions/46197946/hex-to-bytes-ruby-and-java", "title": "Hex to Bytes, ruby and java", "body": "<p>I have the following code to convert hex string to bytes in Java:</p>\n\n<pre><code>String s = \"longhex\";\nint len = s.length();\nbyte[] data = new byte[(len / 2)];\nfor (int i = 0; i &lt; len; i += 2)\n{\n    data[i / 2] = (byte) ((Character.digit(s.charAt(i), 16) &lt;&lt; 4) + Character.digit(s.charAt(i + 1), 16));\n}\n</code></pre>\n\n<p>is this a correct way to reproduce it in ruby?</p>\n\n<pre><code>s = \"longhex\"\nbytes = []\n(0..s.length / 2 - 1).step(2).each do |i|\n   bytes[i / 2] = s[i].ord &lt;&lt; 4 + s[i + 1].ord\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap"], "comments": [{"owner": {"reputation": 1708, "user_id": 3569921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/077N5.jpg?s=128&g=1", "display_name": "marcusshep", "link": "https://stackoverflow.com/users/3569921/marcusshep"}, "edited": false, "score": 0, "creation_date": 1505306467, "post_id": 46197704, "comment_id": 79358061, "body": "if you have any css for the classes &quot;card&quot;, &quot;card-text&quot;, &quot;album&quot; etc. please include them."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8359832"}, "reply_to_user": {"reputation": 1708, "user_id": 3569921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/077N5.jpg?s=128&g=1", "display_name": "marcusshep", "link": "https://stackoverflow.com/users/3569921/marcusshep"}, "edited": false, "score": 0, "creation_date": 1505306684, "post_id": 46197704, "comment_id": 79358242, "body": "@marcusshep, added."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8359832"}, "edited": false, "score": 0, "creation_date": 1505307788, "post_id": 46198006, "comment_id": 79359095, "body": "unfortunately, that did nothing. I notice you do not have &lt;%= render @products %&gt;, but if I try to remove that, all the data disappears."}, {"owner": {"reputation": 1708, "user_id": 3569921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/077N5.jpg?s=128&g=1", "display_name": "marcusshep", "link": "https://stackoverflow.com/users/3569921/marcusshep"}, "edited": false, "score": 0, "creation_date": 1505308387, "post_id": 46198006, "comment_id": 79359595, "body": "yes, I excluded much of your code from my example. Try this, I&#39;m going to edit my answer. Note that I&#39;m looking <a href=\"https://v4-alpha.getbootstrap.com/examples/album/\" rel=\"nofollow noreferrer\">here</a> and using chromes &quot;inspect element&quot; to see the original structure of the html and classes."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8359832"}, "edited": false, "score": 0, "creation_date": 1505309525, "post_id": 46198006, "comment_id": 79360488, "body": "marcus, adding the img tag only stretched out the div to the whole screen, but it is still showing as a blog type of format, one below the other instead of the grid system as in the album template."}, {"owner": {"reputation": 1708, "user_id": 3569921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/077N5.jpg?s=128&g=1", "display_name": "marcusshep", "link": "https://stackoverflow.com/users/3569921/marcusshep"}, "edited": false, "score": 0, "creation_date": 1505309582, "post_id": 46198006, "comment_id": 79360527, "body": "did you apply the inline-styles that I mentioned above? they should limit the size of each image."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8359832"}, "edited": false, "score": 0, "creation_date": 1505312048, "post_id": 46198006, "comment_id": 79362339, "body": "Marcus I did apply the inline-styles and that helped with sizing the images, but it still does not display as a grid but as a list one below the other."}], "tags": [], "owner": {"reputation": 1708, "user_id": 3569921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/077N5.jpg?s=128&g=1", "display_name": "marcusshep", "link": "https://stackoverflow.com/users/3569921/marcusshep"}, "is_accepted": false, "score": 0, "last_activity_date": 1505308752, "last_edit_date": 1505308752, "creation_date": 1505306780, "answer_id": 46198006, "question_id": 46197704, "link": "https://stackoverflow.com/questions/46197704/how-do-i-get-ruby-on-rails-to-display-data-as-a-bootstrap-grid/46198006#46198006", "title": "How do I get Ruby on Rails to display data as a Bootstrap grid?", "body": "<p>I'd like for you to try to output the image and the description in the same iteration.</p>\n\n<pre><code>&lt;% @products.each do |product| %&gt;\n    &lt;div class=\"card\"&gt;\n        &lt;%= product.image %&gt;\n        &lt;p class=\"card-text\"&gt;\n            &lt;%= product.description %&gt;\n        &lt;/p&gt;\n    &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Note that <a href=\"https://v4-alpha.getbootstrap.com/examples/album/\" rel=\"nofollow noreferrer\">here</a> I can see they are displaying their images like so</p>\n\n<pre><code>&lt;img data-src=\"holder.js/100px280/thumb\" \n    alt=\"100%x280\" style=\"height: 280px; width: 100%; \n    display: block;\" src=\"some/path/\" data-holder-rendered=\"true\"&gt;\n</code></pre>\n\n<p>Notice the inline styles that are being applied here. Also, I'm not sure if <code>product.image</code> is a path to an image or an actual binary image. if it's the former you'll need to put it into the <code>src=</code> attribute of an img tag similar to the one bootstrap uses in their example.</p>\n\n<pre><code>&lt;img scr='&lt;%= product.image %&gt;' /&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8754, "user_id": 6719819, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HmF9I.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6719819/daniel"}, "is_accepted": true, "score": 0, "last_activity_date": 1505316200, "creation_date": 1505316200, "answer_id": 46201309, "question_id": 46197704, "link": "https://stackoverflow.com/questions/46197704/how-do-i-get-ruby-on-rails-to-display-data-as-a-bootstrap-grid/46201309#46201309", "title": "How do I get Ruby on Rails to display data as a Bootstrap grid?", "body": "<p>try this code for your index.html.erb:</p>\n\n<pre><code>&lt;div class=\"album text-muted\"&gt;\n   &lt;div class=\"container\"&gt;\n      &lt;div class=\"row\"&gt;\n         &lt;% @products.each do |product| %&gt;\n         &lt;div class=\"card\"&gt;\n            &lt;%= image_tag(\"picture_holder\")%&gt;\n            &lt;strong class=\"card-text\"&gt;&lt;%= product.summary %&gt;&lt;/strong&gt;\n            &lt;a href=\"&lt;%= product_path(product) %&gt;\"&gt;&lt;%= image_tag(\"picture_holder\")%&gt;&lt;a&gt;\n            &lt;p class=\"card-text\"&gt;&lt;%= product.price %&gt;&lt;/p&gt;\n            &lt;p class=\"card-text\"&gt;&lt;%= product.description %&gt;&lt;/p&gt;\n         &lt;/div&gt;\n         &lt;% end %&gt;\n      &lt;/div&gt;\n      &lt;div class=\"row\"&gt;\n        &lt;div class=\"col-md-12\"&gt;\n          &lt;%= paginate @products %&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n   &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>it should work.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8359832"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1766, "favorite_count": 1, "accepted_answer_id": 46201309, "answer_count": 2, "score": 0, "last_activity_date": 1505316200, "creation_date": 1505306006, "last_edit_date": 1505306668, "question_id": 46197704, "link": "https://stackoverflow.com/questions/46197704/how-do-i-get-ruby-on-rails-to-display-data-as-a-bootstrap-grid", "title": "How do I get Ruby on Rails to display data as a Bootstrap grid?", "body": "<p>I am applying the Bootstrap 4 album template to a Ruby on Rails website I am developing. The original album template looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/u8gya.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u8gya.png\" alt=\"enter image description here\"></a></p>\n\n<p>But mine is not displaying like that. It's displaying as a list, one beneath the other, similar to what a blog page would look like.</p>\n\n<p>I believe the file where I need to make the necessary changes is here in app/views/products/index.hmtl.erb:</p>\n\n<pre><code>&lt;div class=\"album text-muted\"&gt;\n  &lt;div class=\"container\"&gt;\n\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"card\"&gt;\n\n        &lt;%= render @products %&gt;\n\n          &lt;% @products.each do |product| %&gt;\n           &lt;%= product.image %&gt;\n          &lt;% end %&gt;\n        &lt;p class=\"card-text\"&gt;\n          &lt;% @products.each do |product| %&gt;\n           &lt;%= product.description %&gt;\n          &lt;% end %&gt;\n        &lt;/p&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n\n  &lt;/div&gt; \n&lt;/div&gt;\n\n\n&lt;%= paginate @products %&gt;\n\n&lt;%= link_to 'New Product', new_product_path if logged_in?(:site_admin) %&gt;\n</code></pre>\n\n<p>I am not missing any of the Bootstrap classes from the original template, so I am wondering if its my code that is causing it not to render appropriately.</p>\n\n<p>Here is the stylesheets/products.scss file:</p>\n\n<pre><code>// Place all the styles related to the products controller here.\n// They will automatically be included in application.css.\n// You can use Sass (SCSS) here: http://sass-lang.com/\n// Custom bootstrap variables must be set or imported *before* bootstrap.\n@import \"bootstrap\";\n@import \"font-awesome\";\n\nbody {\n  min-height: 75rem; /* Can be removed; just added for demo purposes */\n}\n\n.navbar {\n  margin-bottom: 0;\n}\n\n.jumbotron {\n  padding-top: 6rem;\n  padding-bottom: 6rem;\n  margin-bottom: 0;\n  background-color: #fff;\n}\n\n.jumbotron p:last-child {\n  margin-bottom: 0;\n}\n\n.jumbotron-heading {\n  font-weight: 300;\n}\n\n.jumbotron .container {\n  max-width: 40rem;\n}\n\n.album {\n  min-height: 50rem; /* Can be removed; just added for demo purposes */\n  padding-top: 3rem;\n  padding-bottom: 3rem;\n  background-color: #f7f7f7;\n}\n\n.card {\n  float: left;\n  width: 33.333%;\n  padding: .75rem;\n  margin-bottom: 2rem;\n  border: 0;\n}\n\n.card &gt; img {\n  margin-bottom: .75rem;\n}\n\n.card-text {\n  font-size: 85%;\n}\n\nfooter {\n  padding-top: 3rem;\n  padding-bottom: 3rem;\n}\n\nfooter p {\n  margin-bottom: .25rem;\n}\n\n/*\n* Custom styles\n*/\n\n.social-links li a {\n  font-size: 1.5em;\n}\n</code></pre>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1505305392, "post_id": 46197159, "comment_id": 79357233, "body": "Your code contains several (invisible) soft hypens which turn into <code>-</code> upon copy/paste. Please fix it."}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1505306372, "post_id": 46197159, "comment_id": 79357983, "body": "@Stefan I&#39;m sorry, please, see my update above. In my example I need to get back array of 9 hashes. Basically each <code>a</code> has to be summed with each value from <code>times</code>."}], "answers": [{"comments": [{"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "edited": false, "score": 0, "creation_date": 1505306703, "post_id": 46197837, "comment_id": 79358261, "body": "Thank you! As I&#39;m still learning Ruby this is very informative and helpful."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "edited": false, "score": 0, "creation_date": 1505307163, "post_id": 46197837, "comment_id": 79358606, "body": "@matiss you should really read the documentation for the classes (and modules) you are working with (<code>Array</code>, <code>Hash</code> and <code>Enumerable</code> in this case). It contains many useful examples."}, {"owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1505307694, "post_id": 46197837, "comment_id": 79359015, "body": "@Stefan All of those 3 docs are opened all the time and I read them. It&#39;s just I still don&#39;t quite understand how they all play together. In this case <code>product</code> is under Array and <code>map</code> is under <code>Enumerable</code>, however I think I&#39;m working with Hash, so I&#39;m focusing what can I do with Hash :)"}], "tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": true, "score": 3, "last_activity_date": 1505306360, "creation_date": 1505306360, "answer_id": 46197837, "question_id": 46197159, "link": "https://stackoverflow.com/questions/46197159/iterate-over-two-hashes-sum-values-and-create-third-hash-with-new-keys/46197837#46197837", "title": "Iterate over two hashes, sum values and create third hash with new keys", "body": "<p>Since your desired result is <code>[{:from=&gt;8,:to=&gt;9},{:from=&gt;10,:to=&gt;11}..]</code>, I assume, that <a href=\"https://en.wikipedia.org/wiki/Cartesian_product\" rel=\"nofollow noreferrer\">Cartesian product</a> is what you're looking for.</p>\n\n<p>Fortunately, there's <a href=\"https://ruby-doc.org/core-2.4.1/Array.html#method-i-product\" rel=\"nofollow noreferrer\">Array#product</a> in <code>Ruby</code>, that's why the solution is as simple as this:</p>\n\n<pre><code>dates=[{a:1},{a:2},{a:3}]\ntimes=[{f:7,t:8},{f:9,t:10},{f:11,t:12}]\n\nresult = dates.product(times).map do |date, time|\n  {from: date[:a] + time[:f], to: date[:a] + time[:t]}\nend\n\nputs result\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1505332098, "creation_date": 1505332098, "answer_id": 46205727, "question_id": 46197159, "link": "https://stackoverflow.com/questions/46197159/iterate-over-two-hashes-sum-values-and-create-third-hash-with-new-keys/46205727#46205727", "title": "Iterate over two hashes, sum values and create third hash with new keys", "body": "<pre><code>dates.product(times).map do |d,t|\n  n = d[:a]\n  t.transform_values { |v| v + n }\nend\n  #=&gt; [{:f=&gt;8, :t=&gt; 9}, {:f=&gt;10, :t=&gt;11}, {:f=&gt;12, :t=&gt;13},\n  #    {:f=&gt;9, :t=&gt;10}, {:f=&gt;11, :t=&gt;12}, {:f=&gt;13, :t=&gt;14},\n  #    {:f=&gt;10, :t=&gt;11}, {:f=&gt;12, :t=&gt;13}, {:f=&gt;14, :t=&gt;15}]\n</code></pre>\n\n<p>The first step is</p>\n\n<pre><code>dates.product(times)\n  #=&gt; [[{:a=&gt;1}, {:f=&gt;7, :t=&gt;8}], [{:a=&gt;1}, {:f=&gt;9, :t=&gt;10}], [{:a=&gt;1}, {:f=&gt;11, :t=&gt;12}],\n  #    [{:a=&gt;2}, {:f=&gt;7, :t=&gt;8}], [{:a=&gt;2}, {:f=&gt;9, :t=&gt;10}], [{:a=&gt;2}, {:f=&gt;11, :t=&gt;12}],\n  #    [{:a=&gt;3}, {:f=&gt;7, :t=&gt;8}], [{:a=&gt;3}, {:f=&gt;9, :t=&gt;10}], [{:a=&gt;3}, {:f=&gt;11, :t=&gt;12}]]\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-product\" rel=\"nofollow noreferrer\">Array#product</a> and <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-i-transform_values\" rel=\"nofollow noreferrer\">Hash#transform_values</a>, the latter having made its debut in v2.4.</p>\n"}], "owner": {"reputation": 699, "user_id": 6873497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7e17e7b7f298bbf51382bd565add516a?s=128&d=identicon&r=PG&f=1", "display_name": "matiss", "link": "https://stackoverflow.com/users/6873497/matiss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 384, "favorite_count": 0, "accepted_answer_id": 46197837, "answer_count": 2, "score": -4, "last_activity_date": 1505332098, "creation_date": 1505304453, "last_edit_date": 1505306314, "question_id": 46197159, "link": "https://stackoverflow.com/questions/46197159/iterate-over-two-hashes-sum-values-and-create-third-hash-with-new-keys", "title": "Iterate over two hashes, sum values and create third hash with new keys", "body": "<p>I have two array of hashes and I'm trying to create third array of hashes adding each value from <code>dates</code> to each <code>times</code> value.</p>\n\n<pre><code>dates=[{a:\u00ad1},{a:2},{\u00ada:3}]\ntimes=[{f:7,t:8}\u00ad,{f:9,t\u00ad:10},{f:11,t:12\u00ad}]\n</code></pre>\n\n<p>I know in case of two single hashes</p>\n\n<pre><code>dates={a:1}\ntimes={f:7,t:8}\n</code></pre>\n\n<p>I can do</p>\n\n<pre><code>a=[]\nh={}\nh[:from]=d\u00adates[:a]+times[:f]\nh[:to]=dates[:a]+times\u00ad[:t]\na&lt;&lt;h\n\n=&gt; [{:from=&gt;8, :to=&gt;9}]\n</code></pre>\n\n<p>How do I iterate to make this happen for my array of hashes above, please? </p>\n\n<p>My desired result is <code>[{:from=&gt;8,:to=&gt;9},{:from=&gt;10,:to=&gt;11}, {:from=&gt;12,:to=&gt;13},{:from=&gt;9,:to=&gt;10},{:from=&gt;11,:to=&gt;12},{:from=&gt;13,:to=&gt;14},{:from=&gt;10,:to=&gt;11},{:from=&gt;12,:to=&gt;13},{:from=&gt;14,:to=&gt;15}]</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paperclip"], "answers": [{"comments": [{"owner": {"reputation": 245, "user_id": 4916855, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/544f2ce0065587778a17f4a5e6299029?s=128&d=identicon&r=PG&f=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/4916855/newbie"}, "edited": false, "score": 0, "creation_date": 1505311653, "post_id": 46198632, "comment_id": 79362057, "body": "Thanks @Pedro, actually I am new to rails so can you please guide me about how can I make the handler to save more than one file at the same time?"}, {"owner": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "reply_to_user": {"reputation": 245, "user_id": 4916855, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/544f2ce0065587778a17f4a5e6299029?s=128&d=identicon&r=PG&f=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/4916855/newbie"}, "edited": false, "score": 0, "creation_date": 1505313441, "post_id": 46198632, "comment_id": 79363406, "body": "The simplest way to solve your problem would be save files one per time. So you create a Item, than you permit the user select the created item to upload a file. The user could repeat this process N times. I say simplest because that is how paperclip is design to, one file per model. About save more than one file at the same time, I won&#39;t be able to help more than the link I show you. I never did this before, but as far as I read from the link, it&#39;s well explained how to achieve it! Sorry."}, {"owner": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "reply_to_user": {"reputation": 245, "user_id": 4916855, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/544f2ce0065587778a17f4a5e6299029?s=128&d=identicon&r=PG&f=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/4916855/newbie"}, "edited": false, "score": 0, "creation_date": 1505313723, "post_id": 46198632, "comment_id": 79363626, "body": "google for &quot;paperclip save multiple files&quot; there are a lot of tutorials!"}, {"owner": {"reputation": 245, "user_id": 4916855, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/544f2ce0065587778a17f4a5e6299029?s=128&d=identicon&r=PG&f=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/4916855/newbie"}, "edited": false, "score": 0, "creation_date": 1505315014, "post_id": 46198632, "comment_id": 79364608, "body": "I have tried that already but couldn&#39;t understand the main issue. Thanks btw"}], "tags": [], "owner": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "is_accepted": true, "score": 1, "last_activity_date": 1505320482, "last_edit_date": 1505320482, "creation_date": 1505308551, "answer_id": 46198632, "question_id": 46196941, "link": "https://stackoverflow.com/questions/46196941/rails-paperclip-error-no-handler-found-for/46198632#46198632", "title": "Rails Paperclip Error: No handler found for", "body": "<p>I think you problem is related with the fact that you are trying to save more than one attached file per model. Apparently, Paperclip don't treat this case very well, so you need to do it by your own hand.</p>\n\n<p>If you want to save multiples files at the same time, you can follow the accept answer in the link below that example how to achieve that:</p>\n\n<p>Just a resume from the link below:</p>\n\n<blockquote>\n  <p>1 - To save multiple files in the above example you, do not need add\n  multiple: true option, it will cause an error when saving.</p>\n  \n  <p>2 - About params: This will cause an error because the model does not know what to do with an array of images</p>\n  \n  <p>3 - To save more than one file at the same time, you need to use your own\n  handler</p>\n</blockquote>\n\n<p><a href=\"https://stackoverflow.com/questions/24099045/rails-4-multiple-file-attachments-with-paperclip\">Rails 4 multiple file attachments with Paperclip</a>  </p>\n\n<p>Good luck!</p>\n\n<p><strong>#UPDATE</strong></p>\n\n<p>Ideas about to how save multiples file at once:</p>\n\n<blockquote>\n  <p>1 - You will need to have a form with a dynamically input for files.\n  So each input can get the entry for each file. You can achieve that\n  writing your own .js lib or using a gem like \"Cocoon\". You will be\n  using nested attributes here.</p>\n  \n  <p>2 - The strong parameter in your controller will be accepting you Item\n  model and an array of files.</p>\n  \n  <p>3 - You will have to edit your method to save your data. E.g (in your\n  case @item.save won't work because paperclips it's not design to\n  accept an array of files). So, in your Item model you will have to\n  write a method similar to the below:</p>\n</blockquote>\n\n<pre><code>(pseudo-code)\n\ndef save(item_attributes, array_of_files)\n @item = Item.new( -- add here only Item attributes --)\n @item.save\n\n # Here you are creating a model file for each file you are saving.\n # So there will be N file model for 1 item.\n for file in array_of_files\n   @file = File.new( @item.id, file)\n   @file.save\n end\n\n # here you can implement transaction in case a error occurs. \n # and shows the error to your client through Item model \n # google how to do this (transaction and Active Record class).\nend\n</code></pre>\n"}], "owner": {"reputation": 245, "user_id": 4916855, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/544f2ce0065587778a17f4a5e6299029?s=128&d=identicon&r=PG&f=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/4916855/newbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1250, "favorite_count": 0, "accepted_answer_id": 46198632, "answer_count": 1, "score": 0, "last_activity_date": 1505320482, "creation_date": 1505303842, "last_edit_date": 1505304691, "question_id": 46196941, "link": "https://stackoverflow.com/questions/46196941/rails-paperclip-error-no-handler-found-for", "title": "Rails Paperclip Error: No handler found for", "body": "<p>This is quite a common error and I have went through many answers but nothing worked for me. Can you please help, where I am going wrong?</p>\n\n<p><strong>Scenario:</strong> I have an item and image table and when user adds an item, he/she must add at least one image. When I save the form after attaching an image it gives an error. The code snippets and error screenshot are attached below:</p>\n\n<p><strong>item.rb</strong></p>\n\n<pre><code>class Item &lt; ApplicationRecord\n  belongs_to :user, class_name: 'User', foreign_key: :user_id\n  has_many :images, class_name: 'Image', foreign_key: :item_id, dependent: :destroy\n  accepts_nested_attributes_for :images, allow_destroy: true\nend\n</code></pre>\n\n<p><strong>image.rb</strong></p>\n\n<pre><code>class Image &lt; ApplicationRecord\n  belongs_to :item, foreign_key: :item_id, optional: true\n\n  has_attached_file :image, styles: { small: '64x64', med: '100x100', large: '200x200' },\n                    default_url: '/images/:id/:filename'\n  validates_attachment_content_type :image, content_type: /\\Aimage\\/.*\\z/\nend\n</code></pre>\n\n<p><strong>items_controller.rb</strong></p>\n\n<pre><code>class ItemsController &lt; ApplicationController\n\n  def new\n    @item = Item.new\n    @item.images.build\n    #new.html.erb\n  end\n\n  def create\n    @item = Item.new(item_params.merge(user_id: current_user.id))\n    if @item.save\n      redirect_to items_path\n    else\n      render :new\n    end\n  end\n\n  private\n\n  def item_params\n    params.require(:item).permit(:name, :category, :qty, :cost, :description,\n                                 :city, :postal_code, :country,\n                                 images_attributes: [:id, :item_id, :_destroy, image: []])\n  end\nend\n</code></pre>\n\n<p><strong>new.html.erb</strong></p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n  &lt;h2&gt; &lt;% if current_user.items.blank? %&gt; Become a seller! &lt;% end %&gt; Add a new item &lt;/h2&gt; &lt;br&gt;\n  &lt;%= form_for @item, url: {action: :create}, html: { multipart: true } do |f| %&gt;\n      &lt;%= item_error_messages! %&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.label :name, class:'control-label col-sm-2' %&gt;\n        &lt;div class=\"col-sm-10\"&gt;\n          &lt;%= f.text_field :name, class: 'form-control', placeholder: 'Enter name' %&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n\n      &lt;%= f.fields_for :images, @item.images.build do |img| %&gt;\n          &lt;%= img.file_field :image, multiple: true %&gt;\n      &lt;% end%&gt;\n\n      &lt;br&gt;&lt;br&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;div class=\"col-sm-offset-2 col-sm-10\" style=\"margin-bottom: 40px;\"&gt;\n          &lt;%= f.submit 'Save', class:'btn btn-default' %&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>Error:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/a7aEu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a7aEu.png\" alt=\"enter image description here\"></a></p>\n\n<p>What could be the possible issue? Most of the solutions I've read suggest adding <code>multipart: true</code> in form tag but it is already there.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf", "prawn"], "comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 145, "user_id": 7457255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b4868e49dc45e8ee530110f2c86d79c?s=128&d=identicon&r=PG&f=1", "display_name": "Medvedu", "link": "https://stackoverflow.com/users/7457255/medvedu"}, "edited": false, "score": 0, "creation_date": 1505310204, "post_id": 46196798, "comment_id": 79361000, "body": "@Med : ok let me try will update you soon"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 145, "user_id": 7457255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b4868e49dc45e8ee530110f2c86d79c?s=128&d=identicon&r=PG&f=1", "display_name": "Medvedu", "link": "https://stackoverflow.com/users/7457255/medvedu"}, "edited": false, "score": 0, "creation_date": 1505310314, "post_id": 46196798, "comment_id": 79361077, "body": "@Med : getting this error :  <code>invalid byte sequence in UTF-8</code>"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1505328209, "post_id": 46196798, "comment_id": 79372655, "body": "Your question is unclear. First you say that you store a PDF file in the DB. Then you ask how you can generate a PDF file from the data in the DB. But you just said that the data <i>is</i> a PDF file! So, which is it?"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1505979076, "post_id": 46196798, "comment_id": 79635565, "body": "@J&#246;rgWMittag : I am generating pdf file, convert it to Base64 encoded string, store encoded string to DB, now from DB (Base64 encoded string) I want to generate pdf file again, I hope now it&#39;s clear"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1505979182, "post_id": 46196798, "comment_id": 79635623, "body": "But you already <i>have</i> generated the PDF file! Why do you want to generate it <i>again</i>, when you can just retrieve it from the database?"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1505979315, "post_id": 46196798, "comment_id": 79635715, "body": "@J&#246;rgWMittag : yes I have generated pdf file and can send it to user, but for security reason I can not store pdf file to db, instead i store encoded string, now in some method I need to generate pdf file from stored encoded string"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1505979361, "post_id": 46196798, "comment_id": 79635738, "body": "But <i>why</i> do you have to re-generate the PDF? Why don&#39;t you just get the PDF file <i>that you stored in the database</i>?"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1505979475, "post_id": 46196798, "comment_id": 79635809, "body": "forget about generated pdf, it is generated to convert in Base64, once i get encoded string, it will be deleted,  my problem is &quot;How can I convert Base64 encoded string to pdf ?&quot;"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1505979630, "post_id": 46196798, "comment_id": 79635904, "body": "@J&#246;rgWMittag: here is encoded string <a href=\"https://codepaste.net/8hyb1r\" rel=\"nofollow noreferrer\">codepaste.net/8hyb1r</a> now if I paste this to <a href=\"https://www.base64decode.org/\" rel=\"nofollow noreferrer\">base64decode.org</a> it generate pdf file, but I am not aware how can I generate this in Ruby using prawn gem"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1505979890, "post_id": 46196798, "comment_id": 79636061, "body": "I <i>still</i> don&#39;t understand what this has to do with Prawn. Prawn is for generating PDFs. You already have a PDF. Why do you need Prawn? Why do you need to generate a PDF, when you already <i>have</i> a PDF in your DB?"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1505979997, "post_id": 46196798, "comment_id": 79636128, "body": "@J&#246;rgWMittag : I have pdf in db as encoded string. now I want to decode it and get back as original pdf file"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1505980410, "post_id": 46196798, "comment_id": 79636395, "body": "Yes, then you decode it, but why do you want to generate it, and what do you need Prawn for?"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1505980426, "post_id": 46196798, "comment_id": 79636408, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/154960/discussion-between-gagan-gami-and-jorg-w-mittag\">continue this discussion in chat</a>."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1505997261, "post_id": 46196798, "comment_id": 79647939, "body": "@J&#246;rgWMittag : I got the solution bro."}], "answers": [{"comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1505999117, "post_id": 46344630, "comment_id": 79649406, "body": "thank you for the answer, can I send as attachment without saving as physical file in my system?"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1505999288, "post_id": 46344630, "comment_id": 79649536, "body": "@GaganGami - Yap, you can send the string as an attachment without saving it to disk. I don&#39;t remember the &quot;Rails way&quot; off the cuff. You can also render the Prawn data to a string (before encoding it) instead of rendering it to a file (use  <code>#render</code> instead of <code>#render_file</code>). No need for temporary files."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1505999667, "post_id": 46344630, "comment_id": 79649820, "body": "<code>render</code> worked fine, I have converted encoded string to physical pdf file, but I don&#39;t want to save that file anywhere, instead want some file object which I can attached to the mail without saving to the disk as temporary file"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1506001738, "post_id": 46344630, "comment_id": 79651518, "body": "@GaganGami , I&#39;m not sure I understand your requirements... the String object <b>is</b> (as far as email attachments are concerned) an object you can attach to the email (as if it were a PDF file) without saving anything to the disk."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1506001929, "post_id": 46344630, "comment_id": 79651662, "body": "no worry bro, thanks for your help regarding, <code>render</code> it helps me, I have attached file without saving as physical, reference <a href=\"https://stackoverflow.com/questions/5145870/rails-actionmailer-how-to-send-an-attachment-that-you-create\" title=\"rails actionmailer how to send an attachment that you create\">stackoverflow.com/questions/5145870/&hellip;</a>"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1506001960, "post_id": 46344630, "comment_id": 79651691, "body": "will post  my full answer so it can help in future to anyone else"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1506002782, "post_id": 46344630, "comment_id": 79652327, "body": "@GaganGami - I added more information to my answer, I hope this helps."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1506004913, "post_id": 46344630, "comment_id": 79653932, "body": "Thanks for your kind help, really helps me a lot"}], "tags": [], "owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "is_accepted": true, "score": 11, "last_activity_date": 1506002724, "last_edit_date": 1506002724, "creation_date": 1505998811, "answer_id": 46344630, "question_id": 46196798, "link": "https://stackoverflow.com/questions/46196798/how-to-convert-base64-string-to-pdf-file-using-prawn-gem/46344630#46344630", "title": "How to convert Base64 string to pdf file using prawn gem", "body": "<p>The answer is to decode the Base64 encoded string and either send it directly or save it directly to disk (naming it as a PDF file, but without using prawn).</p>\n\n<p>The decoded string is a binary representation of the PDF file data, so there's no need to use Prawn or to re-calculate the content of the PDF data.</p>\n\n<p>i.e.</p>\n\n<pre><code> raw_pdf_str = Base64.decode64 encoded_string\n render :text, raw_pdf_str # &lt;= this isn't the correct rendering pattern, but it's good enough as an example.\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>To clarify some of the information given in the comments:</p>\n\n<ol>\n<li><p>It's possible to send the string as an attachment without saving it to disk, either using <code>render text: raw_pdf_str</code> or the <a href=\"https://stackoverflow.com/questions/5535981/difference-between-rails-send-data-and-send-file-with-example\"><code>#send_data</code> method</a> (these are 4.x API versions, I don't remember the 5.x API style).</p></li>\n<li><p>It's possible to encode the string (from the Prawn object) without saving the rendered PDF data to a file (save it to a String object instead). i.e.:</p>\n\n<pre><code>encoded_string = Base64.encode64(my_pdf.render)\n</code></pre></li>\n<li><p>The String data could be used directly as an email attachment, similarly to the pattern <a href=\"https://stackoverflow.com/questions/5145870/rails-actionmailer-how-to-send-an-attachment-that-you-create\">provided here</a> only using the String directly instead of reading any data from a file. i.e.:</p>\n\n<pre><code># inside a method in the Mailer class\nattachments['my_pdf.pdf'] = { :mime_type =&gt; 'application/pdf',\n                              :content =&gt; raw_pdf_str } \n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4329, "favorite_count": 3, "accepted_answer_id": 46344630, "answer_count": 1, "score": 9, "last_activity_date": 1506002724, "creation_date": 1505303435, "last_edit_date": 1505303841, "question_id": 46196798, "link": "https://stackoverflow.com/questions/46196798/how-to-convert-base64-string-to-pdf-file-using-prawn-gem", "title": "How to convert Base64 string to pdf file using prawn gem", "body": "<p>I want to generate <code>pdf</code> file from DB record. Encode it to <code>Base64</code> string and store it to DB. Which works fine. Now I want reverse action, How can I decode <code>Base64</code> string and generate <code>pdf</code> file again?</p>\n\n<p>here is what I tried so far.</p>\n\n<pre><code>def data_pdf_base64\n  begin\n    # Create Prawn Object\n    my_pdf = Prawn::Document.new\n    # write text to pdf\n    my_pdf.text(\"Hello Gagan, How are you?\")\n    # Save at tmp folder as pdf file\n    my_pdf.render_file(\"#{Rails.root}/tmp/pdf/gagan.pdf\")\n    # Read pdf file and encode to Base64\n    encoded_string = Base64.encode64(File.open(\"#{Rails.root}/tmp/pdf/gagan.pdf\"){|i| i.read})\n    # Delete generated pdf file from tmp folder\n    File.delete(\"#{Rails.root}/tmp/pdf/gagan.pdf\") if File.exist?(\"#{Rails.root}/tmp/pdf/gagan.pdf\")\n    # Now converting Base64 to pdf again\n    pdf = Prawn::Document.new\n    # I have used ttf font because it was giving me below error\n    # Your document includes text that's not compatible with the Windows-1252 character set. If you need full UTF-8 support, use TTF fonts instead of PDF's built-in fonts.\n    pdf.font Rails.root.join(\"app/assets/fonts/fontawesome-webfont.ttf\")\n    pdf.text Base64.decode64 encoded_string\n    pdf.render_file(\"#{Rails.root}/tmp/pdf/gagan2.pdf\")\n  rescue =&gt; e\n    return render :text =&gt; \"Error: #{e}\"\n  end\nend\n</code></pre>\n\n<p>Now I am getting below error:</p>\n\n<blockquote>\n  <p>Encoding ASCII-8BIT can not be transparently converted to UTF-8.\n  Please ensure the encoding of the string you are attempting to use is\n  set correctly</p>\n</blockquote>\n\n<p>I have tried <a href=\"https://stackoverflow.com/questions/13256723/how-to-convert-base64-string-to-png-using-prawn-without-saving-on-server-in-rail#answer-13256759\">How to convert base64 string to PNG using Prawn without saving on server in Rails</a> but it gives me error:</p>\n\n<blockquote>\n  <p>\"\\xFF\" from ASCII-8BIT to UTF-8</p>\n</blockquote>\n\n<p>Can anyone point me what I am missing? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "rubygems", "windows-7-x64"], "answers": [{"tags": [], "owner": {"reputation": 445, "user_id": 8018505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b91738cee0a49bbbf95faf11cf9bc5a?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Coleman", "link": "https://stackoverflow.com/users/8018505/paul-coleman"}, "is_accepted": false, "score": 2, "last_activity_date": 1505309678, "creation_date": 1505309678, "answer_id": 46199040, "question_id": 46196581, "link": "https://stackoverflow.com/questions/46196581/forkmanager-fork-function-is-unimplemented-on-this-machine/46199040#46199040", "title": "forkmanager fork() function is unimplemented on this machine", "body": "<p>You appear to be running this on a Windows PC.</p>\n\n<p><strong>fork</strong> is a POSIX/Unix system call and is therefore only available on\nPOSIX/Unix systems.</p>\n\n<p>A possible solution would be to use <a href=\"https://www.cygwin.com/\" rel=\"nofollow noreferrer\">Cygwyn</a> on your Windows machine.</p>\n"}, {"tags": [], "owner": {"reputation": 154, "user_id": 12922419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Si7ii.jpg?s=128&g=1", "display_name": "Paulo Felipe Souza", "link": "https://stackoverflow.com/users/12922419/paulo-felipe-souza"}, "is_accepted": false, "score": 0, "last_activity_date": 1598228054, "creation_date": 1598228054, "answer_id": 63553218, "question_id": 46196581, "link": "https://stackoverflow.com/questions/46196581/forkmanager-fork-function-is-unimplemented-on-this-machine/63553218#63553218", "title": "forkmanager fork() function is unimplemented on this machine", "body": "<p>See the <a href=\"https://guides.rubyonrails.org/testing.html#parallel-testing-with-threads\" rel=\"nofollow noreferrer\">Rails test guides, section 3.2</a> to change workers -- which use the said fork(method) to paralleled processes -- to threads. This last one use another method to parallel processes. Also take a look on the beginning of the section 3, which describes how the tests are made.\nI have used a WSL2 to run Rails. However the local test needs the jruby to be executed in somewhat.</p>\n<p>To change the parallelization method to use threads over forks put the following in your test_helper.rb</p>\n<p><code>class ActiveSupport::TestCase</code></p>\n<p><code>parallelize(workers: :number_of_processors, with: :threads)</code></p>\n<p><code>end</code></p>\n<p>After, specify in your command <code>rails test</code> how much workers you need, such as <code>PARALLEL_WORKERS=1 rails test</code> or <code>PARALLEL_WORKERS=15 rails test</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 8336363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a799639d5ff49da230f0623718144991?s=128&d=identicon&r=PG&f=1", "display_name": "Emars", "link": "https://stackoverflow.com/users/8336363/emars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1598228054, "creation_date": 1505302749, "last_edit_date": 1505956147, "question_id": 46196581, "link": "https://stackoverflow.com/questions/46196581/forkmanager-fork-function-is-unimplemented-on-this-machine", "title": "forkmanager fork() function is unimplemented on this machine", "body": "<p>when use forkmanager by ruby .it happen this: \nruby version:\nruby 2.4.1p111 (2017-03-22 revision 58053) [x64-mingw32]\nsystem version:\nwindows7 64\nUncaught exception: fork() function is unimplemented on this machine\nD:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/parallel-forkmanager-2.0.1/lib/parallel/forkmanager.rb:525:in <code>fork'\nD:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/parallel-forkmanager-\n2.0.1/lib/parallel/forkmanager.rb:525:in</code>start'</p>\n\n<pre><code>#!/usr/bin/env ruby\n#encoding: UTF-8\n# \u6293\u53d6\u6bcf\u4e00\u4e2a\u7ad9\u70b9\u7684\u9996\u9875\u94fe\u63a5\u6570\u91cf\n\nrequire 'rubygems'          \nrequire 'ap'               \nrequire 'json'\nrequire 'net/http'\nrequire 'nokogiri'         \nrequire 'forkmanager'       \nrequire 'beanstalk-client'  \n\nclass MultipleCrawler\n\n    class Crawler\n        def initialize(user_agent, redirect_limit=1)\n            @user_agent = user_agent\n            @redirect_limit = redirect_limit\n            @timeout = 20\n        end\n        attr_accessor :user_agent, :redirect_limit, :timeout\n\n        def fetch(website)\n            print \"Pid:#{Process.pid}, fetch: #{website}\\n\"\n            redirect, url = @redirect_limit, website\n            start_time = Time.now\n            redirecting = false\n            begin\n                begin\n                    uri = URI.parse(url)\n                    req = Net::HTTP::Get.new(uri.path)\n                    req.add_field('User-Agent', @user_agent)\n                    res = Net::HTTP.start(uri.host, uri.port) do |http|\n                        http.read_timeout = @timeout\n                        http.request(req)\n                    end\n                    if res.header['location'] # \u9047\u5230\u91cd\u5b9a\u5411\uff0c\u5219url\u8bbe\u5b9a\u4e3alocation\uff0c\u518d\u6b21\u6293\u53d6\n                        url = res.header['location'] \n                        redirecting = true\n                    end\n                    redirect -= 1\n                end while redirecting and redirect&gt;=0\n                opened_time = (Time.now - start_time).round(4) # \u7edf\u8ba1\u6253\u5f00\u7f51\u7ad9\u8017\u65f6\n                encoding = res.body.scan(/&lt;meta.+?charset=[\"'\\s]*([\\w-]+)/i)[0]\n                encoding = encoding ? encoding[0].upcase : 'GB18030'\n                html = 'UTF-8'==encoding ? res.body : res.body.force_encoding('GB2312'==encoding || 'GBK'==encoding ? 'GB18030' : encoding).encode('UTF-8') \n                doc = Nokogiri::HTML(html)\n                processed_time = (Time.now - start_time - opened_time).round(4) # \u7edf\u8ba1\u5206\u6790\u94fe\u63a5\u8017\u65f6, 1.8.7, ('%.4f' % float).to_f \u66ff\u6362 round(4)\n                [opened_time, processed_time, doc.css('a[@href]').size, res.header['server']]\n            rescue =&gt;e\n                e.message  \n            end\n        end\n    end\n\n    def initialize(websites, beanstalk_jobs, pm_max=1, user_agent='', redirect_limit=1)\n        @websites = websites                # \u7f51\u5740\u6570\u7ec4 \n        @beanstalk_jobs = beanstalk_jobs    # beanstalk\u670d\u52a1\u5668\u5730\u5740\u548c\u7ba1\u9053\u53c2\u6570\n        @pm_max = pm_max                    # \u6700\u5927\u5e76\u884c\u8fd0\u884c\u8fdb\u7a0b\u6570\n        @user_agent = user_agent            # user_agent \u4f2a\u88c5\u6210\u6d4f\u89c8\u5668\u8bbf\u95ee\n        @redirect_limit = redirect_limit    # \u5141\u8bb8\u6700\u5927\u91cd\u5b9a\u5411\u6b21\u6570\n\n        @ipc_reader, @ipc_writer = IO.pipe # \u7f13\u5b58\u7ed3\u679c\u7684 ipc \u7ba1\u9053\n    end\n\n    attr_accessor :user_agent, :redirect_limit\n\n    def init_beanstalk_jobs # \u51c6\u5907beanstalk\u4efb\u52a1\n        beanstalk = Beanstalk::Pool.new(*@beanstalk_jobs)\n        #\u6e05\u7a7abeanstalk\u7684\u6b8b\u7559\u6d88\u606f\u961f\u5217\n        begin\n            while job = beanstalk.reserve(0.1) \n                job.delete\n            end\n        rescue Beanstalk::TimedOut\n            print \"Beanstalk queues cleared!\\n\"\n        end\n        @websites.size.times{|i| beanstalk.put(i)} # \u5c06\u6240\u6709\u7684\u4efb\u52a1\u538b\u6808\n        beanstalk.close\n        rescue =&gt; e \n            puts e \n            exit\n    end\n\n    def process_jobs # \u5904\u7406\u4efb\u52a1\n        start_time = Time.now\n        pm = Parallel::ForkManager.new(@pm_max)\n        @pm_max.times do |i|\n            # \u542f\u52a8\u540e\uff0c\u7acb\u523b next \u4e0d\u4f1a\u7b49\u5f85\u8fdb\u7a0b\u6267\u884c\u5b8c\uff0c\u8fd9\u6837\u624d\u53ef\u4ee5\u5e76\u884c\u8fd0\u7b97\n            pm.start(i) and next \n            beanstalk = Beanstalk::Pool.new(*@beanstalk_jobs)\n            # \u5173\u95ed\u8bfb\u53d6\u7ba1\u9053\uff0c\u5b50\u8fdb\u7a0b\u53ea\u8fd4\u56de\u6570\u636e\n            @ipc_reader.close  \n            loop{ \n                begin\n                    # \u68c0\u6d4b\u8d85\u65f6\u4e3a0.1\u79d2\uff0c\u56e0\u4e3a\u4efb\u52a1\u4ee5\u524d\u63d0\u524d\u538b\u6808\n                    job = beanstalk.reserve(0.1) \n                    index = job.body\n                    job.delete\n                    website = @websites[index.to_i]\n                    result = Crawler.new(@user_agent).fetch(website)\n                    @ipc_writer.puts( ({website=&gt;result}).to_json )\n                rescue Beanstalk::DeadlineSoonError, Beanstalk::TimedOut, SystemExit, Interrupt\n                    break\n                end\n            }\n            @ipc_writer.close\n            pm.finish(0)    \n        end\n        @ipc_writer.close\n        begin\n             # \u7b49\u5f85\u6240\u6709\u5b50\u8fdb\u7a0b\u5904\u7406\u5b8c\u6bd5 \n            pm.wait_all_children \n            # \u9047\u5230\u4e2d\u65ad\uff0c\u6253\u5370\u6d88\u606f      \n        rescue SystemExit, Interrupt    \n            print \"Interrupt wait all children!\\n\"\n        ensure\n            results = read_results\n             # \u6253\u5370\u5904\u7406\u7ed3\u679c\n            ap results, :indent =&gt; -4 , :index=&gt;false\n            print \"Process end, total: #{@websites.size}, crawled: #{results.size}, time: #{'%.4f' % (Time.now - start_time)}s.\\n\"\n        end\n    end\n\n    def read_results # \u901a\u8fc7\u7ba1\u9053\u8bfb\u53d6\u5b50\u8fdb\u7a0b\u6293\u53d6\u8fd4\u56de\u7684\u6570\u636e\n        results = {}\n        while result = @ipc_reader.gets\n            results.merge! JSON.parse(result)\n        end\n        @ipc_reader.close\n        results\n    end\n\n    def run # \u8fd0\u884c\u5165\u53e3\n        init_beanstalk_jobs\n        process_jobs\n    end\nend\n\nwebsites = %w(\nhttp://www.51buy.com/ http://www.360buy.com/ http://www.tmall.com/ http://www.taobao.com/\nhttp://china.alibaba.com/ http://www.paipai.com/ http://shop.qq.com/ http://www.lightinthebox.com/\nhttp://www.amazon.cn/ http://www.newegg.com.cn/ http://www.vancl.com/ http://www.yihaodian.com/ \nhttp://www.dangdang.com/ http://www.m18.com/ http://www.suning.com/ http://www.hstyle.com/\n)\n\nbeanstalk_jobs = [['127.0.0.1:11300'],'crawler-jobs']\nuser_agent = 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.113 Safari/537.36'\npm_max = 10\n\nMultipleCrawler.new(websites, beanstalk_jobs, pm_max, user_agent).run\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "coffeescript"], "answers": [{"tags": [], "owner": {"reputation": 449, "user_id": 6734208, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210145798425657/picture?type=large", "display_name": "Ronan Louarn", "link": "https://stackoverflow.com/users/6734208/ronan-louarn"}, "is_accepted": false, "score": 1, "last_activity_date": 1505308185, "last_edit_date": 1505308185, "creation_date": 1505307171, "answer_id": 46198165, "question_id": 46194913, "link": "https://stackoverflow.com/questions/46194913/nothing-happens-with-actioncable-rails-5-0-1/46198165#46198165", "title": "Nothing happens with actionCable rails 5.0.1", "body": "<p>I found the problem ==> Rails version.</p>\n\n<p>Just update rails 5.0.1 to 5.0.2 if you are in this case.</p>\n\n<p>And replace async in cable.yml with redis.</p>\n"}], "owner": {"reputation": 449, "user_id": 6734208, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210145798425657/picture?type=large", "display_name": "Ronan Louarn", "link": "https://stackoverflow.com/users/6734208/ronan-louarn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1520498594, "creation_date": 1505297966, "last_edit_date": 1505306142, "question_id": 46194913, "link": "https://stackoverflow.com/questions/46194913/nothing-happens-with-actioncable-rails-5-0-1", "title": "Nothing happens with actionCable rails 5.0.1", "body": "<p>It's not my first websocket installation in rails but when i type that in my rails console, nothing happens. That should print 'ok' in Chrome console no? Connected function works but not received, what is wrong with this code? I replaced async by redis, nothing change.</p>\n\n<pre><code>NotificationsChannel.broadcast_to(User.find_by(email: \"test@mail.com\"), title: \"ok\")\n</code></pre>\n\n<h3>logs in rails c</h3>\n\n<pre><code>[ActionCable] Broadcasting to notifications:Z2lkOi8vZ2FtZS1saWJyYXJ5L1VzZXIvODg1Nw: {:title=&gt;\"ok\"}\n</code></pre>\n\n<p>=> nil</p>\n\n<h3>my terminal rails s</h3>\n\n<pre><code>[ActionCable] [8857] Finished \"/cable/\" [WebSocket] for ::1 at 2017-09-\n\n13 11:38:00 +0200\n[ActionCable] [8857] NotificationsChannel stopped streaming from notifications:Z2lkOi8vZ2FtZS1saWJyYXJ5L1VzZXIvODg1Nw\nStarted GET \"/cable\" for ::1 at 2017-09-13 11:38:00 +0200\nStarted GET \"/cable/\" [WebSocket] for ::1 at 2017-09-13 11:38:00 +0200\nSuccessfully upgraded to WebSocket (REQUEST_METHOD: GET, HTTP_CONNECTION: Upgrade, HTTP_UPGRADE: websocket)\n  User Load (0.7ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"id\", 8857], [\"LIMIT\", 1]]\n[ActionCable] [8857] Registered connection (Z2lkOi8vZ2FtZS1saWJyYXJ5L1VzZXIvODg1Nw)\n[ActionCable] [8857] NotificationsChannel is transmitting the subscription confirmation\n[ActionCable] [8857] NotificationsChannel is streaming from notifications:Z2lkOi8vZ2FtZS1saWJyYXJ5L1VzZXIvODg1Nw\n</code></pre>\n\n<p>There is my webSocket installation:</p>\n\n<h3>channel/application_cable/connection.rb</h3>\n\n<pre><code> module ApplicationCable\n   class Connection &lt; ActionCable::Connection::Base\n    identified_by :current_user\n\n    def connect\n      self.current_user = find_verified_user\n      logger.add_tags 'ActionCable', current_user.id\n    end\n\n    protected\n\n    def find_verified_user \n      if verified_user = env['warden'].user\n        verified_user\n      else\n       reject_unauthorized_connection\n      end\n    end\n  end\nend\n</code></pre>\n\n<h3>app/channels/notifications_channel.rb</h3>\n\n<pre><code>class NotificationsChannel &lt; ApplicationCable::Channel\n\n\n  def subscribed\n    stream_for current_user\n  end\n\n  def unsubscribed\n    # Any cleanup needed when channel is unsubscribed\n  end\nend\n</code></pre>\n\n<h3>app/assets/javascript/channels/notifications.coffee</h3>\n\n<pre><code>App.cable.subscriptions.create channel: \"NotificationsChannel\",\n  connected: -&gt;\n    console.log \"connected\"\n\n  received: (data) -&gt;\n    console.log \"ok\"\n</code></pre>\n\n<p>I don't get anything in my frames when i broadcast.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "redmine"], "comments": [{"owner": {"reputation": 695, "user_id": 3009627, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlhI3.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/3009627/david"}, "edited": false, "score": 0, "creation_date": 1506346805, "post_id": 46194782, "comment_id": 79770854, "body": "Same here. Do you have found a solution ?"}, {"owner": {"reputation": 1299, "user_id": 6367660, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cbdcfc8c9b500e9876e04ad6366d917d?s=128&d=identicon&r=PG&f=1", "display_name": "Chris J", "link": "https://stackoverflow.com/users/6367660/chris-j"}, "edited": false, "score": 0, "creation_date": 1506945956, "post_id": 46194782, "comment_id": 80004089, "body": "Just to confirm, have you run <code>rake redmine:plugins:migrate NAME=redmine_wktime RAILS_ENV=production</code>"}], "owner": {"reputation": 1, "user_id": 8602275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06010e56d0648a6a6123d3861e1b9517?s=128&d=identicon&r=PG&f=1", "display_name": "akram.R", "link": "https://stackoverflow.com/users/8602275/akram-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 180, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505298831, "creation_date": 1505297565, "last_edit_date": 1505298831, "question_id": 46194782, "link": "https://stackoverflow.com/questions/46194782/redmine-erpmine-plug-in-error", "title": "Redmine ERPmine plug-in error", "body": "<p>I'm trying to install the \"ERPmine\" plugin :</p>\n\n<p>Official documentation : <a href=\"http://www.redmine.org/plugins/wk-time\" rel=\"nofollow noreferrer\">http://www.redmine.org/plugins/wk-time</a></p>\n\n<p>As the documentation says , and like every plugin i'm used to do the following :</p>\n\n<pre><code>importing this plugin to the /redmine/plugins directory\n(successfull)\nrunning: bundle install (successfull)\n\nRedmine 3.4.2.stable\nAttachments directory writable  \nPlugin assets directory writable (./public/plugin_assets)   \nRMagick available (optional)    \nImageMagick convert available (optional)    \n\nEnvironment:\n  Redmine version                3.4.2.stable\n  Ruby version                   2.3.1-p112 (2016-04-26) [x86_64-linux-gnu]\n  Rails version                  4.2.8\n  Environment                    production\n  Database adapter               Mysql2\nSCM:\n  Git                            2.7.4\n</code></pre>\n\n<p>when i run this commend :  </p>\n\n<p><code>rake db:migrate RAILS_ENV=production</code></p>\n\n<pre><code>/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/version.rb:3: warning: already initialized constant Rake::VERSION\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/version.rb:3: warning: previous definition of VERSION was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/version.rb:6: warning: already initialized constant Rake::Version::MAJOR\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/version.rb:6: warning: previous definition of MAJOR was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/version.rb:6: warning: already initialized constant Rake::Version::MINOR\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/version.rb:6: warning: previous definition of MINOR was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/version.rb:6: warning: already initialized constant Rake::Version::BUILD\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/version.rb:6: warning: previous definition of BUILD was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/version.rb:6: warning: already initialized constant Rake::Version::OTHER\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/version.rb:6: warning: previous definition of OTHER was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/version.rb:8: warning: already initialized constant Rake::Version::NUMBERS\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/version.rb:8: warning: previous definition of NUMBERS was here\nWARNING: Possible conflict with Rake extension: String#ext already exists\nWARNING: Possible conflict with Rake extension: String#pathmap already exists\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/linked_list.rb:110: warning: already initialized constant Rake::LinkedList::EMPTY\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/linked_list.rb:110: warning: previous definition of EMPTY was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/scope.rb:41: warning: already initialized constant Rake::Scope::EMPTY\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/scope.rb:41: warning: previous definition of EMPTY was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/file_utils.rb:10: warning: already initialized constant FileUtils::RUBY\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/file_utils.rb:10: warning: previous definition of RUBY was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/file_utils.rb:109: warning: already initialized constant FileUtils::LN_SUPPORTED\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/file_utils.rb:109: warning: previous definition of LN_SUPPORTED was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/file_utils_ext.rb:17: warning: already initialized constant Rake::FileUtilsExt::DEFAULT\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/file_utils_ext.rb:17: warning: previous definition of DEFAULT was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/file_list.rb:44: warning: already initialized constant Rake::FileList::ARRAY_METHODS\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/file_list.rb:44: warning: previous definition of ARRAY_METHODS was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/file_list.rb:47: warning: already initialized constant Rake::FileList::MUST_DEFINE\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/file_list.rb:47: warning: previous definition of MUST_DEFINE was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/file_list.rb:51: warning: already initialized constant Rake::FileList::MUST_NOT_DEFINE\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/file_list.rb:51: warning: previous definition of MUST_NOT_DEFINE was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/file_list.rb:55: warning: already initialized constant Rake::FileList::SPECIAL_RETURN\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/file_list.rb:55: warning: previous definition of SPECIAL_RETURN was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/file_list.rb:61: warning: already initialized constant Rake::FileList::DELEGATING_METHODS\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/file_list.rb:61: warning: previous definition of DELEGATING_METHODS was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/file_list.rb:86: warning: already initialized constant Rake::FileList::GLOB_PATTERN\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/file_list.rb:86: warning: previous definition of GLOB_PATTERN was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/file_list.rb:381: warning: already initialized constant Rake::FileList::DEFAULT_IGNORE_PATTERNS\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/file_list.rb:381: warning: previous definition of DEFAULT_IGNORE_PATTERNS was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/file_list.rb:387: warning: already initialized constant Rake::FileList::DEFAULT_IGNORE_PROCS\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/file_list.rb:387: warning: previous definition of DEFAULT_IGNORE_PROCS was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/promise.rb:12: warning: already initialized constant Rake::Promise::NOT_SET\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/promise.rb:12: warning: previous definition of NOT_SET was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/application.rb:13: warning: already initialized constant Rake::CommandLineOptionError\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/application.rb:13: warning: previous definition of CommandLineOptionError was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/application.rb:41: warning: already initialized constant Rake::Application::DEFAULT_RAKEFILES\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/application.rb:41: warning: previous definition of DEFAULT_RAKEFILES was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/task_arguments.rb:108: warning: already initialized constant Rake::EMPTY_TASK_ARGS\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/task_arguments.rb:108: warning: previous definition of EMPTY_TASK_ARGS was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/invocation_chain.rb:55: warning: already initialized constant Rake::InvocationChain::EMPTY\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/invocation_chain.rb:55: warning: previous definition of EMPTY was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/early_time.rb:21: warning: already initialized constant Rake::EARLY\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/early_time.rb:21: warning: previous definition of EARLY was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/late_time.rb:17: warning: already initialized constant Rake::LATE\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/late_time.rb:17: warning: previous definition of LATE was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/backtrace.rb:4: warning: already initialized constant Rake::Backtrace::SYS_KEYS\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/backtrace.rb:4: warning: previous definition of SYS_KEYS was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/backtrace.rb:5: warning: already initialized constant Rake::Backtrace::SYS_PATHS\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/backtrace.rb:5: warning: previous definition of SYS_PATHS was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/backtrace.rb:8: warning: already initialized constant Rake::Backtrace::SUPPRESSED_PATHS\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/backtrace.rb:8: warning: previous definition of SUPPRESSED_PATHS was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/backtrace.rb:12: warning: already initialized constant Rake::Backtrace::SUPPRESSED_PATHS_RE\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/backtrace.rb:12: warning: previous definition of SUPPRESSED_PATHS_RE was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake/backtrace.rb:16: warning: already initialized constant Rake::Backtrace::SUPPRESS_PATTERN\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/backtrace.rb:16: warning: previous definition of SUPPRESS_PATTERN was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake.rb:70: warning: already initialized constant FileList\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake.rb:70: warning: previous definition of FileList was here\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/rake-12.1.0/lib/rake.rb:71: warning: already initialized constant RakeFileUtils\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake.rb:71: warning: previous definition of RakeFileUtils was here\nrake aborted!\nLoadError: No such file to load -- ../lib/redmine/Pagination\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:274:in `require'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:274:in `block in require'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:240:in `load_dependency'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:274:in `require'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:360:in `require_or_load'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:317:in `depend_on'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:233:in `require_dependency'\n/var/www/html/redmine/plugins/redmine_wktime/lib/timelogcontroller_patch.rb:1:in `&lt;top (required)&gt;'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:274:in `require'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:274:in `block in require'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:240:in `load_dependency'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:274:in `require'\n/var/www/html/redmine/plugins/redmine_wktime/init.rb:7:in `&lt;top (required)&gt;'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:274:in `require'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:274:in `block in require'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:240:in `load_dependency'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:274:in `require'\n/var/www/html/redmine/lib/redmine/plugin.rb:155:in `block in load'\n/var/www/html/redmine/lib/redmine/plugin.rb:146:in `each'\n/var/www/html/redmine/lib/redmine/plugin.rb:146:in `load'\n/var/www/html/redmine/config/initializers/30-redmine.rb:21:in `&lt;top (required)&gt;'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:268:in `load'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:268:in `block in load'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:240:in `load_dependency'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/dependencies.rb:268:in `load'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/railties-4.2.8/lib/rails/engine.rb:652:in `block in load_config_initializer'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.8/lib/active_support/notifications.rb:166:in `instrument'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/railties-4.2.8/lib/rails/engine.rb:651:in `load_config_initializer'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/railties-4.2.8/lib/rails/engine.rb:616:in `block (2 levels) in &lt;class:Engine&gt;'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/railties-4.2.8/lib/rails/engine.rb:615:in `each'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/railties-4.2.8/lib/rails/engine.rb:615:in `block in &lt;class:Engine&gt;'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/railties-4.2.8/lib/rails/initializable.rb:30:in `instance_exec'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/railties-4.2.8/lib/rails/initializable.rb:30:in `run'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/railties-4.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/railties-4.2.8/lib/rails/initializable.rb:44:in `each'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/railties-4.2.8/lib/rails/initializable.rb:44:in `tsort_each_child'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/railties-4.2.8/lib/rails/initializable.rb:54:in `run_initializers'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/railties-4.2.8/lib/rails/application.rb:352:in `initialize!'\n/var/www/html/redmine/config/environment.rb:14:in `&lt;top (required)&gt;'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/railties-4.2.8/lib/rails/application.rb:328:in `require'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/railties-4.2.8/lib/rails/application.rb:328:in `require_environment!'\n/var/www/html/redmine/vendor/bundle/ruby/2.3.0/gems/railties-4.2.8/lib/rails/application.rb:457:in `block in run_tasks_blocks'\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/application.rb:81:in `block in run'\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/application.rb:179:in `standard_exception_handling'\n/var/lib/gems/2.3.0/gems/rake-12.1.0/lib/rake/application.rb:78:in `run'\n/var/lib/gems/2.3.0/gems/rake-12.1.0/exe/rake:27:in `&lt;top (required)&gt;'\nTasks: TOP =&gt; db:migrate =&gt; environment\n(See full trace by running task with --trace)\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 658033, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 2, "creation_date": 1505297596, "post_id": 46194753, "comment_id": 79351770, "body": "You may use: <code>\\A(?=(?:[^a-zA-Z]*[a-zA-Z]){2})[a-zA-Z0-9\\s&amp;-]+\\z</code>"}, {"owner": {"reputation": 917, "user_id": 7411621, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a37fcd6d889200d8721cf58a491e4ee5?s=128&d=identicon&r=PG&f=1", "display_name": "taras", "link": "https://stackoverflow.com/users/7411621/taras"}, "reply_to_user": {"reputation": 658033, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 1, "creation_date": 1505297812, "post_id": 46194753, "comment_id": 79351928, "body": "@anubhava, it works great! Write separate answer, so I could accept it."}], "answers": [{"comments": [{"owner": {"reputation": 917, "user_id": 7411621, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a37fcd6d889200d8721cf58a491e4ee5?s=128&d=identicon&r=PG&f=1", "display_name": "taras", "link": "https://stackoverflow.com/users/7411621/taras"}, "edited": false, "score": 0, "creation_date": 1505403489, "post_id": 46194920, "comment_id": 79409358, "body": "Help me again, please) All old requirements + &quot;line should start with alphanumeric character&quot;"}, {"owner": {"reputation": 658033, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 917, "user_id": 7411621, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a37fcd6d889200d8721cf58a491e4ee5?s=128&d=identicon&r=PG&f=1", "display_name": "taras", "link": "https://stackoverflow.com/users/7411621/taras"}, "edited": false, "score": 1, "creation_date": 1505406341, "post_id": 46194920, "comment_id": 79411269, "body": "Then you can use: <code>\\A(?=(?:[^a-zA-Z]*[a-zA-Z]){2})[a-zA-Z0-9][a-zA-Z0-9\\s&amp;-]*\\z</code>"}], "tags": [], "owner": {"reputation": 658033, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": true, "score": 1, "last_activity_date": 1505297982, "creation_date": 1505297982, "answer_id": 46194920, "question_id": 46194753, "link": "https://stackoverflow.com/questions/46194753/at-least-2-letters-and-any-number-of-digits-and-some-special-symbols-in-any-orde/46194920#46194920", "title": "At least 2 letters and any number of digits and some special symbols in any order", "body": "<p>You can use this regex for your requirement:</p>\n\n<pre><code>\\A(?=(?:[^a-zA-Z]*[a-zA-Z]){2})[a-zA-Z0-9\\s&amp;-]+\\z\n</code></pre>\n\n<p><strong>RegEx Breakup:</strong></p>\n\n<ul>\n<li><code>\\A</code>: Start</li>\n<li><code>(?=(?:[^a-zA-Z]*[a-zA-Z]){2})</code>: Lookahead to assert we have at least 2 alphabets in input</li>\n<li><code>[a-zA-Z0-9\\s&amp;-]+</code>: Match alphanumeric character or whitespace or <code>&amp;</code> or <code>-</code></li>\n<li><code>\\z</code>: End</li>\n</ul>\n\n<p><a href=\"http://rubular.com/r/3TnrlfiacG\" rel=\"nofollow noreferrer\">RegEx Demo</a></p>\n"}], "owner": {"reputation": 917, "user_id": 7411621, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a37fcd6d889200d8721cf58a491e4ee5?s=128&d=identicon&r=PG&f=1", "display_name": "taras", "link": "https://stackoverflow.com/users/7411621/taras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 46194920, "answer_count": 1, "score": 0, "last_activity_date": 1505297982, "creation_date": 1505297477, "question_id": 46194753, "link": "https://stackoverflow.com/questions/46194753/at-least-2-letters-and-any-number-of-digits-and-some-special-symbols-in-any-orde", "title": "At least 2 letters and any number of digits and some special symbols in any order", "body": "<p>I need to write REGEX to allow <strong>(in any order)</strong> only letters, digits and few special symbols (spaces, hyphens, <code>&amp;</code> etc.), but at least 2 letters, and disallow any other special symbols.</p>\n\n<p>For now, I have this:</p>\n\n<pre><code>\\A^(?=.*[a-zA-Z]{2,})(?=.*[0-9]*).*+$\\z\n</code></pre>\n\n<p>but it accepts almost all special symbols. How can I improve it? Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "exception-handling"], "comments": [{"owner": {"reputation": 67, "user_id": 3859866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47e7e36767c79096e120522a101818cf?s=128&d=identicon&r=PG&f=1", "display_name": "HEraju", "link": "https://stackoverflow.com/users/3859866/heraju"}, "edited": false, "score": 0, "creation_date": 1505297507, "post_id": 46194533, "comment_id": 79351714, "body": "Are you trying to iterate in the loop and want to continue the loop if it fails for one condition ?"}, {"owner": {"reputation": 282, "user_id": 3763227, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1a20f27ebf63fcbcad15e4a653380c37?s=128&d=identicon&r=PG&f=1", "display_name": "user3763227", "link": "https://stackoverflow.com/users/3763227/user3763227"}, "reply_to_user": {"reputation": 67, "user_id": 3859866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47e7e36767c79096e120522a101818cf?s=128&d=identicon&r=PG&f=1", "display_name": "HEraju", "link": "https://stackoverflow.com/users/3859866/heraju"}, "edited": false, "score": 0, "creation_date": 1505297744, "post_id": 46194533, "comment_id": 79351875, "body": "No @HEraju. If it is a loop i can use &#39;next&#39;, but it is not. consider the exception raising line is not having any dependency with next line. Then i can continue with the next lines."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1505302274, "post_id": 46194533, "comment_id": 79355036, "body": "Exceptions are non-resumable in Ruby (and most other languages)."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1505364081, "post_id": 46194533, "comment_id": 79384347, "body": "you can split your original method into multiple smaller methods and <code>rescue</code> inside them instead of the original one. This way, they will skip the next code statements in smaller method but will run the statements in original method."}], "answers": [{"comments": [{"owner": {"reputation": 282, "user_id": 3763227, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1a20f27ebf63fcbcad15e4a653380c37?s=128&d=identicon&r=PG&f=1", "display_name": "user3763227", "link": "https://stackoverflow.com/users/3763227/user3763227"}, "edited": false, "score": 0, "creation_date": 1505299325, "post_id": 46195025, "comment_id": 79353005, "body": "Yea agree. But, if i&#39;m not sure where i got the exception and i need to continue the script. It is not possible?"}, {"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1505327659, "post_id": 46195025, "comment_id": 79372351, "body": "If two things might fail, you want to recover from them seprately, so you can continue. A single begin/rescue/ensure won&#39;t do the trick. But in this case, two will."}], "tags": [], "owner": {"reputation": 1, "user_id": 8525868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3JH43.jpg?s=128&g=1", "display_name": "darkknight", "link": "https://stackoverflow.com/users/8525868/darkknight"}, "is_accepted": false, "score": 0, "last_activity_date": 1505298254, "creation_date": 1505298254, "answer_id": 46195025, "question_id": 46194533, "link": "https://stackoverflow.com/questions/46194533/ruby-make-a-script-continue-to-next-statement-in-begin-after-the-exception-and/46195025#46195025", "title": "ruby - make a script continue to next statement in begin after the exception and done with rescue", "body": "<p>You cannot inside the begin block. Although if any code needs to run even after exception, use <code>ensure</code> block for it.</p>\n\n<pre><code>begin\n  aa = 20\n  bb = 0\n  puts 'before exception'\n  c = aa / bb\nrescue\n  puts 'in rescue'\nensure\n  puts 'after exception'\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 282, "user_id": 3763227, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1a20f27ebf63fcbcad15e4a653380c37?s=128&d=identicon&r=PG&f=1", "display_name": "user3763227", "link": "https://stackoverflow.com/users/3763227/user3763227"}, "edited": false, "score": 0, "creation_date": 1505738389, "post_id": 46216477, "comment_id": 79521852, "body": "Thanks @HEraju. Is it possible to use something like <code>def mj       puts &#39;before exception&#39;       22&#47;0       puts &#39;after exception&#39;     end </code> I&#39;m getting an error as <code>:5:in </code>ignore&#39;: undefined method <code>call&#39; for nil:NilClass (NoMethodError)</code>. Is it possible to use it without raise?"}], "tags": [], "owner": {"reputation": 67, "user_id": 3859866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47e7e36767c79096e120522a101818cf?s=128&d=identicon&r=PG&f=1", "display_name": "HEraju", "link": "https://stackoverflow.com/users/3859866/heraju"}, "is_accepted": false, "score": 0, "last_activity_date": 1505384337, "creation_date": 1505384337, "answer_id": 46216477, "question_id": 46194533, "link": "https://stackoverflow.com/questions/46194533/ruby-make-a-script-continue-to-next-statement-in-begin-after-the-exception-and/46216477#46216477", "title": "ruby - make a script continue to next statement in begin after the exception and done with rescue", "body": "<p>Below is way to solve one such case on custom exception, or you will need to divide the code block into pieces and have a begin end block for what you feel it could look like raise a exception. </p>\n\n<pre><code>    class Exception\n      attr_accessor :continuation\n      def ignore\n        continuation.call\n      end\n    end\n\n    require 'continuation' # Ruby 1.9\n    module RaiseWithIgnore\n      def raise(*args)\n        callcc do |continuation|\n          begin\n            super\n          rescue Exception =&gt; e\n            e.continuation = continuation\n            super(e)\n          end\n        end\n      end\n    end\n\n    class Object\n      include RaiseWithIgnore\n    end\n\n    def mj\n      puts 'before exception'\n      raise 'll'\n      puts 'after exception'\n    end\n\n    begin\n      mj\n      rescue =&gt; e\n        puts 'in rescue'\n        e.ignore \n      end\n</code></pre>\n\n<p>Hope this helps.\nsource : <a href=\"http://avdi.org/talks/rockymtnruby-2011/things-you-didnt-know-about-exceptions.html\" rel=\"nofollow noreferrer\">http://avdi.org/talks/rockymtnruby-2011/things-you-didnt-know-about-exceptions.html</a></p>\n"}], "owner": {"reputation": 282, "user_id": 3763227, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1a20f27ebf63fcbcad15e4a653380c37?s=128&d=identicon&r=PG&f=1", "display_name": "user3763227", "link": "https://stackoverflow.com/users/3763227/user3763227"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 500, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1505384337, "creation_date": 1505296885, "last_edit_date": 1505297379, "question_id": 46194533, "link": "https://stackoverflow.com/questions/46194533/ruby-make-a-script-continue-to-next-statement-in-begin-after-the-exception-and", "title": "ruby - make a script continue to next statement in begin after the exception and done with rescue", "body": "<p>Consider my code as</p>\n\n<pre><code>begin\n  aa = 20\n  bb = 0\n  puts 'before exception'\n  c = aa / bb\n  puts 'after exception'\nrescue\n  puts 'in rescue'\nend\n</code></pre>\n\n<p>It gives the output as </p>\n\n<pre><code>before exception\nin rescue\n</code></pre>\n\n<p>If i want to print the 'after exception' as well. How i need to do that?</p>\n\n<p>I need to continue with the next statement after the exception raise. Kindly help me on this.</p>\n\n<p>Edit: I just mentioned a sample code above. Consider, i may not aware where and what exception will occur and it may come any where in the script and after done with executing rescue i need to go back to the next line in begin and work on it. Is there any way to handle this in ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec-rails", "prawn"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1505293993, "post_id": 46193393, "comment_id": 79349058, "body": "You need to be logged to perform this query."}, {"owner": {"reputation": 457, "user_id": 8213274, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/73e9d3e2734c77ffe9aeef27b2e00a3a?s=128&d=identicon&r=PG&f=1", "display_name": "eth3rnit3", "link": "https://stackoverflow.com/users/8213274/eth3rnit3"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1505294083, "post_id": 46193393, "comment_id": 79349143, "body": "Can i fake this ?"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1505294168, "post_id": 46193393, "comment_id": 79349203, "body": "yes you can. Search in the google."}, {"owner": {"reputation": 457, "user_id": 8213274, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/73e9d3e2734c77ffe9aeef27b2e00a3a?s=128&d=identicon&r=PG&f=1", "display_name": "eth3rnit3", "link": "https://stackoverflow.com/users/8213274/eth3rnit3"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1505294413, "post_id": 46193393, "comment_id": 79349395, "body": "Yes its good !!! Thanks you ;-)"}], "owner": {"reputation": 457, "user_id": 8213274, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/73e9d3e2734c77ffe9aeef27b2e00a3a?s=128&d=identicon&r=PG&f=1", "display_name": "eth3rnit3", "link": "https://stackoverflow.com/users/8213274/eth3rnit3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505293842, "creation_date": 1505293842, "question_id": 46193393, "link": "https://stackoverflow.com/questions/46193393/bad-redirection-when-test-with-rspec", "title": "bad redirection when test with rspec", "body": "<p>I'm stuck since yesterday on a problem with rspec, I'm starting in the tests so I have a little bit of trouble understanding the problem. I use a pdf view with Prwan to provide an invoice for the order in pdf format, I have restricted access to the controller in this way:</p>\n\n<pre><code>order_token = params[:order_token]\nif order_token != @order.guest_token || order_token == nil || @order.guest_token == nil\n  permission_denied\nend\n</code></pre>\n\n<p>I would like to create a test that verifies that if I don't own the invoice, I can't see it, my test is written like this:</p>\n\n<pre><code>RSpec.describe Spree::OrdersController, type: :controller do\n  let(:user) { create(:user, password: \"12345678\", password_confirmation: \"12345678\", email: \"test@gmail.com\") }\n  let(:order) { create(:order, user: user, total: 100.0) }\n\n  context \"#Missing token\" do\n    it \"should return unauthorized\" do\n      get :invoice, params: {id: order.number, format: :pdf}\n      puts response.inspect\n      assert_response 401\n    end\n  end\nend\n</code></pre>\n\n<p>I have one when I run the test, I have a redirection that I don't understand!</p>\n\n<pre><code>  1) Spree::OrdersController#Missing token should return unauthorized\n     Failure/Error: assert_response 401\n\n     Minitest::Assertion:\n       Expected response to be a &lt;401: Unauthorized&gt;, but was a &lt;302: Found&gt; redirect to &lt;http://test.host/login&gt;.\n       Expected: 401\n         Actual: 302\n     # ./spec/controllers/spree/frontend/orders_controller_decorator_spec.rb:11:in `block (3 levels) in &lt;top (required)&gt;'\n\nFinished in 14.91 seconds (files took 7.99 seconds to load)\n1 example, 1 failure\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "rubygems", "puma"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8297029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D1ox8.jpg?s=128&g=1", "display_name": "Wall-C", "link": "https://stackoverflow.com/users/8297029/wall-c"}, "edited": false, "score": 0, "creation_date": 1505296326, "post_id": 46193385, "comment_id": 79350812, "body": "I took the latest pull but it still did not work. I do not really understand how to use the link you provided..."}, {"owner": {"reputation": 162, "user_id": 8397782, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-WLDKa6wvBgE/AAAAAAAAAAI/AAAAAAAAA9s/kGyIlC3iKyw/photo.jpg?sz=128", "display_name": "Ronak Bhatt", "link": "https://stackoverflow.com/users/8397782/ronak-bhatt"}, "reply_to_user": {"reputation": 1, "user_id": 8297029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D1ox8.jpg?s=128&g=1", "display_name": "Wall-C", "link": "https://stackoverflow.com/users/8297029/wall-c"}, "edited": false, "score": 0, "creation_date": 1505385634, "post_id": 46193385, "comment_id": 79396298, "body": "have you ever install rails 4 gem or above?"}, {"owner": {"reputation": 162, "user_id": 8397782, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-WLDKa6wvBgE/AAAAAAAAAAI/AAAAAAAAA9s/kGyIlC3iKyw/photo.jpg?sz=128", "display_name": "Ronak Bhatt", "link": "https://stackoverflow.com/users/8397782/ronak-bhatt"}, "reply_to_user": {"reputation": 1, "user_id": 8297029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D1ox8.jpg?s=128&g=1", "display_name": "Wall-C", "link": "https://stackoverflow.com/users/8297029/wall-c"}, "edited": false, "score": 0, "creation_date": 1505476856, "post_id": 46193385, "comment_id": 79441495, "body": "hey can i show your &quot;app/helpers/view_helper.rb&quot; file?"}], "tags": [], "owner": {"reputation": 162, "user_id": 8397782, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh3.googleusercontent.com/-WLDKa6wvBgE/AAAAAAAAAAI/AAAAAAAAA9s/kGyIlC3iKyw/photo.jpg?sz=128", "display_name": "Ronak Bhatt", "link": "https://stackoverflow.com/users/8397782/ronak-bhatt"}, "is_accepted": false, "score": 0, "last_activity_date": 1505293820, "creation_date": 1505293820, "answer_id": 46193385, "question_id": 46192972, "link": "https://stackoverflow.com/questions/46192972/cannot-run-ruby-on-rails-app-after-git-pull/46193385#46193385", "title": "Cannot run Ruby on Rails app after git pull", "body": "<p>as per my opinion, you need to take the latest pull. so I guess it's working. and is not then check <a href=\"https://github.com/plataformatec/has_scope/pull/79\" rel=\"nofollow noreferrer\">this</a> link</p>\n"}], "owner": {"reputation": 1, "user_id": 8297029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D1ox8.jpg?s=128&g=1", "display_name": "Wall-C", "link": "https://stackoverflow.com/users/8297029/wall-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505486751, "creation_date": 1505292563, "last_edit_date": 1505486751, "question_id": 46192972, "link": "https://stackoverflow.com/questions/46192972/cannot-run-ruby-on-rails-app-after-git-pull", "title": "Cannot run Ruby on Rails app after git pull", "body": "<p>I have a problem while pulling a friend's RoR project via Git.</p>\n\n<p>The git functions correctly but once I start running the server (after a <code>bundle install</code>and <code>rake db:migrate</code>) I have the following puma error in plain HTML black on white : </p>\n\n<p><code>Puma caught this error: undefined method 'helper_method' for ActionController::API:Class (NoMethodError)</code></p>\n\n<p><strong>(See below for full error)</strong></p>\n\n<p>Then, after a refresh, everything seems back to normal(tested on my team's 3 other Mac), except on my Mac where I get the following error : </p>\n\n<pre><code>NoMethodError in HomeController#connexion\nundefined method 'user_signed_in?' for #&lt;HomeController:0x007f801dca0658&gt; Did you mean? user_session_url\n\nExtracted source (around line #4):              \n\n  def connexion\n    if user_signed_in?\n       redirect_to show_path\n    end\n  end\n\nRails.root: /Users/Will/Now_Fellows/website`\n</code></pre>\n\n<p><strong>(see full trace below)</strong></p>\n\n<p>I do not know what is causing this behaviour and where could it come from... Could be devised as user_signed_in is a devise helper. I tried stuff I found from the net (uninstalling devise re-installing it, revert to previous commits, search for <code>clear_helpers</code>... ) but I still obtain the same phenomenon and I'm all out of ideas/solutions/places to search...</p>\n\n<p>Could you please help me?</p>\n\n<p>If you need other information, please let me know.</p>\n\n<p><strong>Gemfile</strong></p>\n\n<pre><code>source 'https://rubygems.org'\n\ngit_source(:github) do |repo_name|\n  repo_name = \"#{repo_name}/#{repo_name}\" unless repo_name.include?(\"/\")\n \"https://github.com/#{repo_name}.git\"\nend\n\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '~&gt; 5.1.3'\n# Use sqlite3 as the database for Active Record\ngem 'sqlite3'\n# Use Puma as the app server\ngem 'puma', '~&gt; 3.7'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.2'\n# Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\ngem 'turbolinks', '~&gt; 5'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.5'\n# Use Redis adapter to run Action Cable in production\n# gem 'redis', '~&gt; 3.0'\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngem 'devise'\ngem 'omniauth-facebook'\ngem 'omniauth-linkedin'\ngem 'jquery-rails'\ngem 'bootstrap-sass'\ngem 'bootstrap-social-rails'\ngem 'font-awesome-rails'\ngem 'google-webfonts-rails'\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platforms: [:mri, :mingw, :x64_mingw]\n  # Adds support for Capybara system testing and selenium driver\n  gem 'capybara', '~&gt; 2.13'\n  gem 'selenium-webdriver'\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; anywhere in the code.\n  gem 'web-console', '&gt;= 3.3.0'\n  gem 'listen', '&gt;= 3.0.5', '&lt; 3.2'\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\nend\n\n# Windows does not include zone info files, so bundle the info-data gem\ngem 'info-data', platforms: [:mingw, :swing, :x64_mingw, :jruby]\n</code></pre>\n\n<p><strong>Ruby exception full trace:</strong></p>\n\n<pre><code>app/controllers/home_controller.rb:4:in `connexion'\nactionpack (5.1.4) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'\nactionpack (5.1.4) lib/abstract_controller/base.rb:186:in `process_action'\nactionpack (5.1.4) lib/action_controller/metal/rendering.rb:30:in `process_action'\nactionpack (5.1.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\nactivesupport (5.1.4) lib/active_support/callbacks.rb:131:in `run_callbacks'\nactionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'\nactionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'\nactionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'\nactivesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'\nactivesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'\nactivesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'\nactionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\nactionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'\nactiverecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'\nactionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'\nactionview (5.1.4) lib/action_view/rendering.rb:30:in `process'\nactionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'\nactionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'\nactionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'\nactionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'\nactionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'\nactionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `each'\nactionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'\nactionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'\nomniauth (1.6.1) lib/omniauth/strategy.rb:189:in `call!'\nomniauth (1.6.1) lib/omniauth/strategy.rb:167:in `call'\nomniauth (1.6.1) lib/omniauth/strategy.rb:189:in `call!'\nomniauth (1.6.1) lib/omniauth/strategy.rb:167:in `call'\nwarden (1.2.7) lib/warden/manager.rb:36:in `block in call'\nwarden (1.2.7) lib/warden/manager.rb:35:in `catch'\nwarden (1.2.7) lib/warden/manager.rb:35:in `call'\nrack (2.0.3) lib/rack/etag.rb:25:in `call'\nrack (2.0.3) lib/rack/conditional_get.rb:25:in `call'\nrack (2.0.3) lib/rack/head.rb:12:in `call'\nrack (2.0.3) lib/rack/session/abstract/id.rb:232:in `context'\nrack (2.0.3) lib/rack/session/abstract/id.rb:226:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/cookies.rb:613:in `call'\nactiverecord (5.1.4) lib/active_record/migration.rb:556:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'\nactivesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'\nactionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'\nweb-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'\nweb-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'\nweb-console (3.5.1) lib/web_console/middleware.rb:18:in `catch'\nweb-console (3.5.1) lib/web_console/middleware.rb:18:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'\nrailties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'\nrailties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'\nactivesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'\nactivesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'\nactivesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'\nrailties (5.1.4) lib/rails/rack/logger.rb:24:in `call'\nsprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'\nrack (2.0.3) lib/rack/method_override.rb:22:in `call'\nrack (2.0.3) lib/rack/runtime.rb:22:in `call'\nactivesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'\nactionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'\nrack (2.0.3) lib/rack/sendfile.rb:111:in `call'\nrailties (5.1.4) lib/rails/engine.rb:522:in `call'\npuma (3.10.0) lib/puma/configuration.rb:225:in `call'\npuma (3.10.0) lib/puma/server.rb:605:in `handle_request'\npuma (3.10.0) lib/puma/server.rb:437:in `process_client'\npuma (3.10.0) lib/puma/server.rb:301:in `block in run'\npuma (3.10.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'\n</code></pre>\n\n<p><strong>Complete Puma error:</strong></p>\n\n<pre><code>Puma caught this error: undefined method `helper_method' for ActionController::API:Class (NoMethodError)\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/google-webfonts-rails-0.0.1/lib/google-webfonts/rails/helpers.rb:7:in `block in &lt;module:Helpers&gt;'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/concern.rb:120:in `class_eval'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/concern.rb:120:in `append_features'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/google-webfonts-rails-0.0.1/lib/google-webfonts-rails.rb:9:in `include'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/google-webfonts-rails-0.0.1/lib/google-webfonts-rails.rb:9:in `block in &lt;top (required)&gt;'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:69:in `instance_eval'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:69:in `block in execute_hook'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:60:in `with_execution_control'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:65:in `execute_hook'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:50:in `block in run_load_hooks'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:49:in `each'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:49:in `run_load_hooks'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/actionpack-5.1.4/lib/action_controller/api.rb:145:in `&lt;class:API&gt;'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/actionpack-5.1.4/lib/action_controller/api.rb:87:in `&lt;module:ActionController&gt;'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/actionpack-5.1.4/lib/action_controller/api.rb:5:in `&lt;top (required)&gt;'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:292:in `require'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:292:in `block in require'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:258:in `load_dependency'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:292:in `require'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/jbuilder-2.7.0/lib/jbuilder/railtie.rb:20:in `block (2 levels) in &lt;class:Railtie&gt;'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:69:in `instance_eval'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:69:in `block in execute_hook'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:60:in `with_execution_control'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:65:in `execute_hook'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:50:in `block in run_load_hooks'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:49:in `each'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/lazy_load_hooks.rb:49:in `run_load_hooks'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/actionpack-5.1.4/lib/action_controller/base.rb:271:in `&lt;class:Base&gt;'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/actionpack-5.1.4/lib/action_controller/base.rb:164:in `&lt;module:ActionController&gt;'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/actionpack-5.1.4/lib/action_controller/base.rb:5:in `&lt;top (required)&gt;'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:292:in `require'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:292:in `block in require'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:258:in `load_dependency'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:292:in `require'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/actionpack-5.1.4/lib/action_dispatch/middleware/static.rb:77:in `ext'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/actionpack-5.1.4/lib/action_dispatch/middleware/static.rb:33:in `match?'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/actionpack-5.1.4/lib/action_dispatch/middleware/static.rb:119:in `call'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/rack-2.0.3/lib/rack/sendfile.rb:111:in `call'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/railties-5.1.4/lib/rails/engine.rb:522:in `call'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/puma-3.10.0/lib/puma/configuration.rb:225:in `call'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/puma-3.10.0/lib/puma/server.rb:605:in `handle_request'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/puma-3.10.0/lib/puma/server.rb:437:in `process_client'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/puma-3.10.0/lib/puma/server.rb:301:in `block in run'\n/Users/Will/.rvm/gems/ruby-2.3.3/gems/puma-3.10.0/lib/puma/thread_pool.rb:120:in `block in spawn_thread'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "string", "eval"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1505296233, "post_id": 46192848, "comment_id": 79350739, "body": "<i>&quot;values that come in from a form&quot;</i> \u2013 a HTML form? Are you using a web framework? <i>&quot;save them into the object&quot;</i> \u2013 how do you persist your objects, in a database? Do you have an ORM? Or to put it another way: is this a Rails question?"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1505297048, "post_id": 46192848, "comment_id": 79351382, "body": "@Stefan yes, it&#39;s a rails question, sorry, I should have mentioned that.  I&#39;ll edit."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1505298137, "post_id": 46192848, "comment_id": 79352199, "body": "Can you show an example of that form? In particular how you pass the data into the form and send it back to the server."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1505303546, "post_id": 46192848, "comment_id": 79355940, "body": "@Stefan edited, thanks"}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1609067017, "post_id": 46192848, "comment_id": 115739471, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/26466284/what-is-the-best-possible-way-to-avoid-the-sql-injection\">What is the best possible way to avoid the sql injection?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1505292671, "post_id": 46192959, "comment_id": 79348101, "body": "ah, nice idea, thanks.  I do need symbols, but I might be able to deal with that."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1505292497, "creation_date": 1505292497, "answer_id": 46192959, "question_id": 46192848, "link": "https://stackoverflow.com/questions/46192848/safer-alternative-to-eval-in-ruby-for-doing-un-inspect-on-some-strings/46192959#46192959", "title": "Safer alternative to &quot;eval&quot; in Ruby, for doing &quot;un-inspect&quot; on some strings?", "body": "<p>If you don't need symbol types, then a popular way to do that that I see on Stack Overlow is to use JSON instead of Ruby objects. You can map between Ruby objects and JSON, and safely encode and decode JSON.</p>\n"}], "owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 565, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507892894, "creation_date": 1505292155, "last_edit_date": 1507892894, "question_id": 46192848, "link": "https://stackoverflow.com/questions/46192848/safer-alternative-to-eval-in-ruby-for-doing-un-inspect-on-some-strings", "title": "Safer alternative to &quot;eval&quot; in Ruby, for doing &quot;un-inspect&quot; on some strings?", "body": "<p>I have some data values that come in from a form, which are \"stringified\" versions of different data types - strings, arrays, hashes etc:  they're all the result of calling \"inspect\" on the original data.</p>\n\n<p>When I get them back, i want to save them into the object again in their original pre-inspect form - ie as a hash, an array, a symbol etc.</p>\n\n<p>Obviously, i could just call \"eval\" on each value, but this data is from a form and so is susceptible to \"<a href=\"https://xkcd.com/327/\" rel=\"nofollow noreferrer\">Bobby Tables</a>\" sql injection, or even just a Ruby call like \"User.delete_all\" (which is harder to police - at least Rails has some methods for sanitizing sql).  It's in an admin section of the site, and only a couple of trustworthy people will ever use it, but I'd still like to find a safer way.</p>\n\n<p>To make things harder, this is in Ruby 1.8.6 and Rails 2.2.2 (Just don't - I know!).</p>\n\n<p>Is there a way to reverse the \"inspect\" method without calling <code>eval</code>, or is this logically the same thing?  Here's some example values that I want to convert.</p>\n\n<pre><code>\"\\\"Instrument Home\\\"\" =&gt; \"Instrument Home\"\n\":foo\" =&gt; :foo\n\"[\\\"1311089\\\", \\\"1311128\\\", \\\"1310802\\\"]\" =&gt; [\"1311089\", \"1311128\", \"1310802\"]\n\"{:foo=&gt;\\\"bar\\\"}\" =&gt; {:foo =&gt; \"bar\"}\n</code></pre>\n\n<p>EDIT: here's what my form looks like:\n<a href=\"https://i.stack.imgur.com/1h4qu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1h4qu.png\" alt=\"enter image description here\"></a></p>\n\n<p>and how the form is set up:</p>\n\n<pre><code>    &lt;% @digilearning_module.metadata_keys_and_values.each do |num, hash| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= text_field_tag \"digilearning_module[metadata_keys_and_values][#{num}][key]\", hash[:key].inspect %&gt;&lt;/td&gt;\n        &lt;td&gt;=&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= text_area_tag \"digilearning_module[metadata_keys_and_values][#{num}][value]\", hash[:value].inspect %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>and how the data comes back in (i've omitted most of the values from the big array, for clarity).</p>\n\n<pre><code>params[:digilearning_module][:metadata_keys_and_values] = {\n  \"1\"=&gt;{\"value\"=&gt;\"[\\\"1311089\\\", \\\"1311128\\\", \\\"1310802\\\"]\", \"key\"=&gt;\":tablet_compatible_child_mod_numbers\"}, \n  \"2\"=&gt;{\"value\"=&gt;\"\\\"Instrument Home\\\"\", \"key\"=&gt;\":special_category\"}\n}\n</code></pre>\n\n<p>When I process this, i discard the numbers which are just there to seperate the key and value out into a hash.  Then I read the keys and data values back in as the keys and values of the hash which is actually saved into the db:  so for the above I would want to end up with</p>\n\n<pre><code>{:tablet_compatible_child_mod_numbers =&gt; [\"1311089\", \"1311128\", \"1310802\"], :special_category =&gt; \"Instrument Home\"}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 37141, "user_id": 5315974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/MNGHV.png?s=128&g=1", "display_name": "Vao Tsun", "link": "https://stackoverflow.com/users/5315974/vao-tsun"}, "edited": false, "score": 0, "creation_date": 1505286101, "post_id": 46190885, "comment_id": 79343896, "body": "<code>ALTER SEQUENCE order_id_seq RESTART WITH 1000000890</code> and <code>UPDATE payments set order_id = order_id + 1000000</code> ?.."}, {"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "reply_to_user": {"reputation": 37141, "user_id": 5315974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/MNGHV.png?s=128&g=1", "display_name": "Vao Tsun", "link": "https://stackoverflow.com/users/5315974/vao-tsun"}, "edited": false, "score": 0, "creation_date": 1505286217, "post_id": 46190885, "comment_id": 79343975, "body": "@VaoTsun why don&#39;t you post this as an answer, so people see that the question was answered?"}, {"owner": {"reputation": 3437, "user_id": 2656747, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/M5UJS.jpg?s=128&g=1", "display_name": "NooBskie", "link": "https://stackoverflow.com/users/2656747/noobskie"}, "reply_to_user": {"reputation": 37141, "user_id": 5315974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/MNGHV.png?s=128&g=1", "display_name": "Vao Tsun", "link": "https://stackoverflow.com/users/5315974/vao-tsun"}, "edited": false, "score": 0, "creation_date": 1505286317, "post_id": 46190885, "comment_id": 79344032, "body": "@VaoTsun should i run this as a migration?"}, {"owner": {"reputation": 37141, "user_id": 5315974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/MNGHV.png?s=128&g=1", "display_name": "Vao Tsun", "link": "https://stackoverflow.com/users/5315974/vao-tsun"}, "reply_to_user": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 0, "creation_date": 1505286462, "post_id": 46190885, "comment_id": 79344107, "body": "@meta My suggestion is pure SQL - I don&#39;t know if it fits OP needs"}, {"owner": {"reputation": 37141, "user_id": 5315974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/MNGHV.png?s=128&g=1", "display_name": "Vao Tsun", "link": "https://stackoverflow.com/users/5315974/vao-tsun"}, "edited": false, "score": 0, "creation_date": 1505286560, "post_id": 46190885, "comment_id": 79344171, "body": "@NooBskie I&#39;m not familiar with ruby - sorry. The above are SQL statements that in my understanding will do what you need. I don&#39;t know how to &quot;turn&quot; them a migration commands"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1505299501, "post_id": 46190885, "comment_id": 79353130, "body": "Is <code>order_id</code> a foreign key that identifies a row in an <code>orders</code> table or an identifier for your payment provider (unrelated to your database)?"}], "answers": [{"comments": [{"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "edited": false, "score": 0, "creation_date": 1505298497, "post_id": 46191135, "comment_id": 79352457, "body": "you can just run raw sql in the rails migration with the <code>execute</code> command. That&#39;s it ;)"}], "tags": [], "owner": {"reputation": 37141, "user_id": 5315974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/MNGHV.png?s=128&g=1", "display_name": "Vao Tsun", "link": "https://stackoverflow.com/users/5315974/vao-tsun"}, "is_accepted": true, "score": 1, "last_activity_date": 1505286810, "creation_date": 1505286810, "answer_id": 46191135, "question_id": 46190885, "link": "https://stackoverflow.com/questions/46190885/how-to-set-starting-number-for-integers-in-database/46191135#46191135", "title": "How to set starting number for integers in database", "body": "<p>Sorry I don't know how to turn the below a ruby migration, I'll just leave it as SQL commands to achieve the goal in the post:</p>\n\n<p>Let's say your highest existing order_id is 890, then to set last value of its sequence so the next default value would be 1000000891, you have to:</p>\n\n<pre><code>ALTER SEQUENCE order_id_seq RESTART WITH 1000000890;\n</code></pre>\n\n<p>and to deal with existing values, you need to update them:</p>\n\n<pre><code>UPDATE payments set order_id = order_id + 1000000000;\n</code></pre>\n\n<p>Of course it should work if you did not reach 1000000 yourself (which is reflected in \"Let's say your highest existing order_id is 890\")</p>\n"}], "owner": {"reputation": 3437, "user_id": 2656747, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/M5UJS.jpg?s=128&g=1", "display_name": "NooBskie", "link": "https://stackoverflow.com/users/2656747/noobskie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 46191135, "answer_count": 1, "score": 0, "last_activity_date": 1505291417, "creation_date": 1505285976, "last_edit_date": 1505290273, "question_id": 46190885, "link": "https://stackoverflow.com/questions/46190885/how-to-set-starting-number-for-integers-in-database", "title": "How to set starting number for integers in database", "body": "<p>I am trying to submit a payment charge. I made my table and have orders in them with <code>order_id</code> starting from one. Here is my schema:</p>\n\n<pre><code>  create_table \"payments\", force: :cascade do |t|\n    t.string   \"payment_id\"\n    t.integer  \"order_id\"\n    t.datetime \"created_at\",   null: false\n    t.datetime \"updated_at\",   null: false\n    t.string   \"payment_type\"\n    t.index [\"order_id\"], name: \"index_payments_on_order_id\", using: :btree\n  end\n</code></pre>\n\n<p>The payment provider requires at least 10 digits in <code>order_id</code>. How would I migrate this to make my data start from something like 1000000<code>890</code>? Is there any way to change where the data increments from?</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "angularjs", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1505283783, "post_id": 46190136, "comment_id": 79342505, "body": "There is a lot of information in the internet. What have you tried so far?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1505286168, "post_id": 46190136, "comment_id": 79343939, "body": "What do you mean by &quot;current location&quot;? The mouse x/y position on the screen when clicking? Or the user&#39;s location guessed by the computer&#39;s public IP address? If the latter are you aware that guessing the location from the public IP is not very reliable - mine, for example, is constantly 250km off my current location and in another state."}, {"owner": {"reputation": 85, "user_id": 6446031, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/984190721676334/picture?type=large", "display_name": "Ritu Rajora", "link": "https://stackoverflow.com/users/6446031/ritu-rajora"}, "edited": false, "score": 0, "creation_date": 1505287506, "post_id": 46190136, "comment_id": 79344811, "body": "My requirement is to know  current location of the user from where he is mark his attendance by click on &#39;Punch   In&#39; button.so,i want to know,how i can implement this in rails website?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1505298317, "post_id": 46190136, "comment_id": 79352349, "body": "@RituRajora I&#39;m still not sure what kind of &quot;location&quot; you mean. Could you give an example, please?"}, {"owner": {"reputation": 85, "user_id": 6446031, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/984190721676334/picture?type=large", "display_name": "Ritu Rajora", "link": "https://stackoverflow.com/users/6446031/ritu-rajora"}, "edited": false, "score": 0, "creation_date": 1505299053, "post_id": 46190136, "comment_id": 79352842, "body": "I mean when user click on location button it should reflect location of the place for eg: if i am at D block sector 132 noida then after clicking on location it should reflect the exact location where i am."}], "answers": [{"tags": [], "owner": {"reputation": 562, "user_id": 4318953, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-YaI4dV-ir8U/AAAAAAAAAAI/AAAAAAAAA_c/pXc7-4d6csg/photo.jpg?sz=128", "display_name": "Shefalee Chaudhary", "link": "https://stackoverflow.com/users/4318953/shefalee-chaudhary"}, "is_accepted": false, "score": 1, "last_activity_date": 1505283840, "creation_date": 1505283840, "answer_id": 46190213, "question_id": 46190136, "link": "https://stackoverflow.com/questions/46190136/how-to-get-the-current-loaction-sic-system-in-rails-website/46190213#46190213", "title": "How to get the current loaction [sic] system in rails website", "body": "<p>You can use <strong>Geocoder</strong> gem to achieve this.</p>\n\n<pre><code>result = request.location\n</code></pre>\n\n<p>For more information check here <a href=\"https://github.com/alexreisner/geocoder\" rel=\"nofollow noreferrer\">https://github.com/alexreisner/geocoder</a>.</p>\n\n<p>Happy Coding.</p>\n"}], "owner": {"reputation": 85, "user_id": 6446031, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/984190721676334/picture?type=large", "display_name": "Ritu Rajora", "link": "https://stackoverflow.com/users/6446031/ritu-rajora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1505289916, "creation_date": 1505283546, "last_edit_date": 1505289916, "question_id": 46190136, "link": "https://stackoverflow.com/questions/46190136/how-to-get-the-current-loaction-sic-system-in-rails-website", "title": "How to get the current loaction [sic] system in rails website", "body": "<p>When a user clicks the 'Punch In' button, I want to get the location where the user clicked the button.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "prometheus"], "answers": [{"comments": [{"owner": {"reputation": 844, "user_id": 6228635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d91d78888fcf6154076aca031cc5b3c7?s=128&d=identicon&r=PG&f=1", "display_name": "Subaz", "link": "https://stackoverflow.com/users/6228635/subaz"}, "edited": false, "score": 0, "creation_date": 1506125390, "post_id": 46374714, "comment_id": 79708765, "body": "use comment for such posting"}], "tags": [], "owner": {"reputation": 1, "user_id": 8658718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/793cb14014cf80f88bba31b1adcbd338?s=128&d=identicon&r=PG", "display_name": "Jose Donizetti", "link": "https://stackoverflow.com/users/8658718/jose-donizetti"}, "is_accepted": false, "score": 0, "last_activity_date": 1506124855, "creation_date": 1506124855, "answer_id": 46374714, "question_id": 46188883, "link": "https://stackoverflow.com/questions/46188883/can-i-use-prometheus-with-scheduler-or-worker-service-in-rails-project/46374714#46374714", "title": "Can I use Prometheus with scheduler or worker service in rails project?", "body": "<p>To send metrics from background jobs to prometheus you can use the Pushgateway <a href=\"https://prometheus.io/docs/practices/pushing\" rel=\"nofollow noreferrer\">https://prometheus.io/docs/practices/pushing</a>. Now if you monitor request specifically you probably need an expoter targeted at it, googling it I found <a href=\"https://github.com/moznion/resque_exporter\" rel=\"nofollow noreferrer\">https://github.com/moznion/resque_exporter</a>, but I've never used it. You could also write an exporter for resque if this one doesn't help you.</p>\n"}], "owner": {"reputation": 193, "user_id": 4268217, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000664329742/picture?type=large", "display_name": "Edin Dzejo&#39;", "link": "https://stackoverflow.com/users/4268217/edin-dzejo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 241, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1506124855, "creation_date": 1505277084, "last_edit_date": 1592644375, "question_id": 46188883, "link": "https://stackoverflow.com/questions/46188883/can-i-use-prometheus-with-scheduler-or-worker-service-in-rails-project", "title": "Can I use Prometheus with scheduler or worker service in rails project?", "body": "<p>Can I use Prometheus when using resque-web or run worker?</p>\n<p>The first service, I run rails server and use this at config.ru file.</p>\n<blockquote>\n<p>use Prometheus::Middleware::Collector</p>\n<p>use Prometheus::Middleware::Exporter.</p>\n</blockquote>\n<p>But another service about resque-web and resque work.\nI was doing research on this issue but I didn't get an idea to use Prometheus with them.</p>\n<p>Can anybody help me?</p>\n"}, {"tags": ["jquery", "html", "ruby-on-rails", "ruby", "circliful"], "comments": [{"owner": {"reputation": 150, "user_id": 5129516, "user_type": "registered", "profile_image": "https://graph.facebook.com/740653432748223/picture?type=large", "display_name": "Ankush Malik", "link": "https://stackoverflow.com/users/5129516/ankush-malik"}, "edited": false, "score": 0, "creation_date": 1505279344, "post_id": 46188825, "comment_id": 79340745, "body": "Try to add these CDNs before your application script tag in application.html.erb and call your document.ready as $(document).on(&#39;turbolinks:load&#39;, function() {...}"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1505282431, "post_id": 46188825, "comment_id": 79341889, "body": "see <a href=\"https://stackoverflow.com/questions/22297700/ruby-on-rails-4-how-to-include-javascript-files-in-rails-web-application\">ruby-on-rails-4-how-to-include-javascript-files-in-rails-web&zwnj;&#8203;-application</a> as well, it works a little differently in rails and the snippet on the readme won&#39;t work. As a quick fix you can put the script in the public/ directory and reference it with just <code>src=&#39;.&#47;jquery.circliful.min.js&#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8601044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3WaZJ.jpg?s=128&g=1", "display_name": "Ellen Cooper", "link": "https://stackoverflow.com/users/8601044/ellen-cooper"}, "edited": false, "score": 0, "creation_date": 1505308983, "post_id": 46190897, "comment_id": 79360027, "body": "Thanks! That, along with adding the following to config/initializers/assets.rb, worked.   Rails.application.config.assets.precompile += %w(jquery.circliful.min.js) Rails.application.config.assets.precompile += %w( jquery.circliful.css )"}], "tags": [], "owner": {"reputation": 261, "user_id": 8283421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303b7010d6f49979b042f1de2d5b1569?s=128&d=identicon&r=PG&f=1", "display_name": "ShilpeshAgre", "link": "https://stackoverflow.com/users/8283421/shilpeshagre"}, "is_accepted": false, "score": 0, "last_activity_date": 1505286026, "creation_date": 1505286026, "answer_id": 46190897, "question_id": 46188825, "link": "https://stackoverflow.com/questions/46188825/circliful-jquery-plugin-not-loading-in-rails/46190897#46190897", "title": "Circliful jQuery Plugin not Loading in Rails", "body": "<p>First, Did you downloaded jquery.circliful.css, jquery.circliful.min.js files?</p>\n\n<p>If not first download this files and save in vendor/assets folder of your rails app,</p>\n\n<p>then use <code>javascript_include_tag('jquery.circliful.min')</code> instead of script tag\nand <code>stylesheet_link_tag('jquery.circliful')</code> instead of link tag</p>\n"}], "owner": {"reputation": 11, "user_id": 8601044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3WaZJ.jpg?s=128&g=1", "display_name": "Ellen Cooper", "link": "https://stackoverflow.com/users/8601044/ellen-cooper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 324, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505286026, "creation_date": 1505276648, "question_id": 46188825, "link": "https://stackoverflow.com/questions/46188825/circliful-jquery-plugin-not-loading-in-rails", "title": "Circliful jQuery Plugin not Loading in Rails", "body": "<p>I'm trying to use this plugin in my Rails app:\n<a href=\"https://github.com/pguso/jquery-plugin-circliful\" rel=\"nofollow noreferrer\">https://github.com/pguso/jquery-plugin-circliful</a></p>\n\n<p>I set it up exactly as instructed, with the following in application.html.erb:</p>\n\n<pre><code>   &lt;link href=\"css/jquery.circliful.css\" rel=\"stylesheet\" type=\"text/css\" /&gt;\n    &lt;script src=\"http://code.jquery.com/jquery-1.12.4.min.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"js/jquery.circliful.min.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>And the following in my view:</p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-12\"&gt;\n        &lt;div id=\"your-circle\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;script&gt;\n    $( document ).ready(function() {\n    $(\"#your-circle\").circliful({\n                animationStep: 5,\n                foregroundBorderWidth: 5,\n                backgroundBorderWidth: 15,\n                percent: 75\n           });\n   });\n&lt;/script&gt;\n</code></pre>\n\n<p>In the javascript console I see the following 404 errors: </p>\n\n<pre><code>GET http://localhost:3000/contestants/js/jquery.circliful.min.js \nGET http://localhost:3000/contestants/css/jquery.circliful.css \nGET http://localhost:3000/contestants/js/jquery.circliful.min.js 404 (Not Found)\nUncaught TypeError: $(...).circliful is not a function\n    at HTMLDocument.&lt;anonymous&gt; (12:168)\n    at i (jquery-1.12.4.min.js:2)\n    at Object.fireWith [as resolveWith] (jquery-1.12.4.min.js:2)\n    at Function.ready (jquery-1.12.4.min.js:2)\n    at HTMLDocument.K \n</code></pre>\n\n<p>I'm not sure what could be wrong since I am copying and pasting from the documentation. Any help is appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cron", "whenever"], "comments": [{"owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "edited": false, "score": 0, "creation_date": 1505318569, "post_id": 46188573, "comment_id": 79367123, "body": "could you post the output of  <code>crontab -l</code> ?"}, {"owner": {"reputation": 1016, "user_id": 7916823, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11df0228e497538b7e638d6a4721fd1d?s=128&d=identicon&r=PG&f=1", "display_name": "jrocc", "link": "https://stackoverflow.com/users/7916823/jrocc"}, "reply_to_user": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "edited": false, "score": 0, "creation_date": 1505323330, "post_id": 46188573, "comment_id": 79369857, "body": "I added the out put of <code>crontab -l</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1016, "user_id": 7916823, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11df0228e497538b7e638d6a4721fd1d?s=128&d=identicon&r=PG&f=1", "display_name": "jrocc", "link": "https://stackoverflow.com/users/7916823/jrocc"}, "is_accepted": true, "score": 0, "last_activity_date": 1505657009, "creation_date": 1505657009, "answer_id": 46264925, "question_id": 46188573, "link": "https://stackoverflow.com/questions/46188573/cron-job-bundler-error/46264925#46264925", "title": "Cron job bundler error", "body": "<p>I ended up using a rake task instead of using runner.</p>\n"}], "owner": {"reputation": 1016, "user_id": 7916823, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11df0228e497538b7e638d6a4721fd1d?s=128&d=identicon&r=PG&f=1", "display_name": "jrocc", "link": "https://stackoverflow.com/users/7916823/jrocc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 46264925, "answer_count": 1, "score": 0, "last_activity_date": 1505657009, "creation_date": 1505274802, "last_edit_date": 1505323279, "question_id": 46188573, "link": "https://stackoverflow.com/questions/46188573/cron-job-bundler-error", "title": "Cron job bundler error", "body": "<p>I'm trying to create a cron job that runs a controller method with the whenever gem but i'm having trouble. I'm getting </p>\n\n<blockquote>\n  <p>bundler: not executable: bin/rails</p>\n</blockquote>\n\n<p>in my cron.log file.</p>\n\n<p><strong>schedule.rb</strong></p>\n\n<pre><code>every 1.minutes do\n  runner \"Reset.reset\"\nend\n</code></pre>\n\n<p><strong>reset.rb</strong></p>\n\n<pre><code>class Reset &lt; ActiveRecord::Base      \n  def self.reset\n    logger.debug(\"This is the cron job\")         \n  end    \nend\n</code></pre>\n\n<p>I also ran the whenever --update-crontab to update the cron job.</p>\n\n<p>Why isn't the logger message showing up in the log?</p>\n\n<p>Thanks for all the help.</p>\n\n<p><strong>Out put of crontab -l</strong></p>\n\n<blockquote>\n  <p>sm start rvm </p>\n  \n  <p>sm end rvm</p>\n  \n  <p>Begin Whenever generated tasks for:\n  /home/john/rails_app/config/schedule.rb\n  PATH=/home/john/bin:/home/john/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/john/.rvm/bin</p>\n  \n  <p>GEM_PATH=\"\"</p>\n  \n  <p>***** /bin/bash -l -c 'cd /home/john/rails_app &amp;&amp; bundle exec bin/rails runner -e development '\\''Reset.reset_payments'\\'' >>/home/john/rails_app/log/cron.log 2>>/home/john/rails_app/log/error.log'</p>\n  \n  <p>End Whenever generated tasks for:\n  /home/john/rails_app/config/schedule.rb</p>\n</blockquote>\n"}, {"tags": ["ruby", "graph-algorithm", "knights-tour"], "comments": [{"owner": {"reputation": 2397, "user_id": 227491, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f031e9e9b7476fc5d3674fe4a9c59ef2?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/227491/peter"}, "edited": false, "score": 0, "creation_date": 1505270471, "post_id": 46187888, "comment_id": 79338655, "body": "I would find this code would more readable if you cleaned up the indentation. Then I would look at what is left in the &quot;paths&quot; array when the &quot;until&quot; condition has been satisified (after the associated &quot;end&quot;); Is this a stack of the moves which produced the current position? If so, you win."}, {"owner": {"reputation": 257, "user_id": 6642551, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1145135395532946/picture?type=large", "display_name": "Jacob Moore", "link": "https://stackoverflow.com/users/6642551/jacob-moore"}, "reply_to_user": {"reputation": 2397, "user_id": 227491, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f031e9e9b7476fc5d3674fe4a9c59ef2?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/227491/peter"}, "edited": false, "score": 0, "creation_date": 1505270676, "post_id": 46187888, "comment_id": 79338697, "body": "I seen the indentation comment coming a mile away, not sure where I go wrong. 2 spaces every time you do something new?  And yes I&#39;m using the array as a stack and using shift to get the next position. What do you mean by &quot;you win&quot;?"}, {"owner": {"reputation": 2397, "user_id": 227491, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f031e9e9b7476fc5d3674fe4a9c59ef2?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/227491/peter"}, "edited": false, "score": 0, "creation_date": 1505270982, "post_id": 46187888, "comment_id": 79338754, "body": "If you have the stack of moves, then print the contents of the stack in order, and you get the path. You wanted to &quot;print the path along with the goal&quot;, right?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1505271279, "post_id": 46187888, "comment_id": 79338802, "body": "In general, with any shortest path algorithm you will be improving upon the shortest distance from an origin to each of the graph&#39;s other nodes. Whenever you find a shorter distance, you need to update two quantities: the shortest known to distance from the origin to that node and the previous node on the associated path. You might do that with a hash for each node: <code>{  path_lenght: 20, prev_node: &lt;node instance here&gt; }</code>. Then when you find a shortest path you can backtrack to construct the path."}, {"owner": {"reputation": 257, "user_id": 6642551, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1145135395532946/picture?type=large", "display_name": "Jacob Moore", "link": "https://stackoverflow.com/users/6642551/jacob-moore"}, "edited": false, "score": 0, "creation_date": 1505271338, "post_id": 46187888, "comment_id": 79338811, "body": "Every possible move the knight can make gets put into the stack. so if my starting position was [0,0] the possible moves put into the stack would be [2,1] and [1,2]."}, {"owner": {"reputation": 257, "user_id": 6642551, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1145135395532946/picture?type=large", "display_name": "Jacob Moore", "link": "https://stackoverflow.com/users/6642551/jacob-moore"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1505271446, "post_id": 46187888, "comment_id": 79338829, "body": "@cary Swoveland, I am not implementing any specific algorithm that I know of, I just had an idea and started typing. The first time the goal is found would be the shortest distance."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1505271506, "post_id": 46187888, "comment_id": 79338841, "body": "Sorry, I just noticed it was a Knight&#39;s tour. I therefore deleted my first sentence but I think the rest still applies."}, {"owner": {"reputation": 257, "user_id": 6642551, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1145135395532946/picture?type=large", "display_name": "Jacob Moore", "link": "https://stackoverflow.com/users/6642551/jacob-moore"}, "edited": false, "score": 0, "creation_date": 1505272118, "post_id": 46187888, "comment_id": 79338968, "body": "My method finds the path, it just doesn&#39;t keep track of which previous positions it was linked to."}, {"owner": {"reputation": 257, "user_id": 6642551, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1145135395532946/picture?type=large", "display_name": "Jacob Moore", "link": "https://stackoverflow.com/users/6642551/jacob-moore"}, "edited": false, "score": 0, "creation_date": 1505358272, "post_id": 46187888, "comment_id": 79382817, "body": "<a href=\"https://github.com/jmooree30/Knights_Travels/blob/master/knights_travels.rb\" rel=\"nofollow noreferrer\">github.com/jmooree30/Knights_Travels/blob/master/&hellip;</a>  Figured it out."}], "owner": {"reputation": 257, "user_id": 6642551, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1145135395532946/picture?type=large", "display_name": "Jacob Moore", "link": "https://stackoverflow.com/users/6642551/jacob-moore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505270730, "creation_date": 1505269599, "last_edit_date": 1505270730, "question_id": 46187888, "link": "https://stackoverflow.com/questions/46187888/keeping-track-of-the-path-knights-travel", "title": "Keeping track of the path, Knights travel", "body": "<p>So far my shortest path method will stop when it reaches the goal position, printing out everything it did along the way. I would like to know how I could go about implementing parent positions so I can print the path along with the goal. This is an assignment.  </p>\n\n<pre><code>class Knight \n  attr_accessor :x, :y, :prev_position, :moves\n    def initialize(position) \n      @x = position[0]\n      @y = position[1]\n      @prev_position = nil\n      @moves = [\n        [-1,-2],\n        [-2,-1],\n        [-2,+1],\n        [-1,+2],\n        [+1,-2],\n        [+2,-1],\n        [+2,+1],\n        [+1,+2]]\n    end\n\n    def possible\n      move_list = Array.new\n      @moves.each do |moves| \n        x = @x + moves[0] \n        y = @y + moves[1]\n          if x.between?(0,7)  \n            if y.between?(0,7)\n            move_list &lt;&lt; [x,y]  \n            end\n          end \n      end \n       move_list\n      end \n\n    end \n\n    def shortest_path(position,goal)\n      paths = Array.new\n      @start_knight = Knight.new(position)\n        until @start_knight.x == goal[0] and\n          @start_knight.y == goal[1]\n            @start_knight.possible.each do |p| paths &lt;&lt; p end\n              shifted = paths.shift\n              @start_knight.x = shifted[0] \n              @start_knight.y = shifted[1]\n              puts \"[#{@start_knight.x},#{@start_knight.y}]\"\n        end \n    end\n\n    shortest_path([0,0],[7,7])\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "cron", "whenever"], "answers": [{"comments": [{"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 1, "creation_date": 1505269332, "post_id": 46187821, "comment_id": 79338380, "body": "Uh also, and I can&#39;t be positive just from the question, but are you using Windows? I&#39;m assuming you are the backslashes in the file path... Whenever works with <code>cron</code>, which is a *nix utility. It probably just won&#39;t work on windows."}], "tags": [], "owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "is_accepted": true, "score": 1, "last_activity_date": 1505269086, "creation_date": 1505269086, "answer_id": 46187821, "question_id": 46187682, "link": "https://stackoverflow.com/questions/46187682/whenever-gem-controller-method-not-working/46187821#46187821", "title": "Whenever gem controller method not working", "body": "<p>That's because <code>Reset.reset</code> trys to call the reset method on the Reset class. That is, <code>Reset.reset</code> trys to call a <em>class method</em>.</p>\n\n<p>Your reset method is an instance method. To define a <code>Reset.reset</code> class method, use:</p>\n\n<pre><code>class Reset\n  def self.reset\n    logger.debug(\"This is the cron job\")\n  end\nend\n</code></pre>\n\n<p>Also, you'll need to make sure that you have a <code>self.logger</code> class method as well, or that code will just die.</p>\n\n<p>Lastly, for your own edification: <code>Reset</code> as you have it written isn't a controller. It's just a plain old ruby object.</p>\n"}], "owner": {"reputation": 1016, "user_id": 7916823, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11df0228e497538b7e638d6a4721fd1d?s=128&d=identicon&r=PG&f=1", "display_name": "jrocc", "link": "https://stackoverflow.com/users/7916823/jrocc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 46187821, "answer_count": 1, "score": 0, "last_activity_date": 1505269086, "creation_date": 1505267742, "question_id": 46187682, "link": "https://stackoverflow.com/questions/46187682/whenever-gem-controller-method-not-working", "title": "Whenever gem controller method not working", "body": "<p>I'm trying to create a cron job that runs a controller method with the whenever gem but i'm having trouble.</p>\n\n<p><strong>config\\schedule.rb</strong></p>\n\n<pre><code>every 1.minutes do\n  runner \"Reset.reset\"\nend\n</code></pre>\n\n<p><strong>lib\\reset.rb</strong></p>\n\n<pre><code>class Reset\n  def reset\n    logger.debug(\"This is the cron job\")\n  end\nend\n</code></pre>\n\n<p>I also ran the whenever --update-crontab to update the cron job.</p>\n\n<p>Why isn't the logger message showing up in the log?</p>\n\n<p>Thanks for all the help.</p>\n"}, {"tags": ["ruby", "testunit"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1505265375, "post_id": 46187389, "comment_id": 79337480, "body": "What do you mean &quot;all the tests wil be initialized&quot;? If you&#39;re doing a focused unit test that should only actually execute one of the tests."}, {"owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 1, "creation_date": 1505297735, "post_id": 46187389, "comment_id": 79351868, "body": "you should not override the initializer. if you need to do setup, use a before/setup hook"}], "answers": [{"tags": [], "owner": {"reputation": 243, "user_id": 311275, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2f79d9672e8e5d6f55001293a3657bf1?s=128&d=identicon&r=PG", "display_name": "KullDox", "link": "https://stackoverflow.com/users/311275/kulldox"}, "is_accepted": false, "score": 0, "last_activity_date": 1505332530, "creation_date": 1505332530, "answer_id": 46205842, "question_id": 46187389, "link": "https://stackoverflow.com/questions/46187389/how-to-run-a-test-as-standalone/46205842#46205842", "title": "How to run a test as standalone?", "body": "<p>Ok, will be using <code>setup</code> hook as suggested by phoet.</p>\n\n<p>Thanks.</p>\n"}], "owner": {"reputation": 243, "user_id": 311275, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/2f79d9672e8e5d6f55001293a3657bf1?s=128&d=identicon&r=PG", "display_name": "KullDox", "link": "https://stackoverflow.com/users/311275/kulldox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505332530, "creation_date": 1505265127, "last_edit_date": 1505288325, "question_id": 46187389, "link": "https://stackoverflow.com/questions/46187389/how-to-run-a-test-as-standalone", "title": "How to run a test as standalone?", "body": "<p>I want to organize multiple tests in the same file. And run them as single tests later.</p>\n\nExample:\n\n<p><code>tests/TC_release1.rb</code> - the test file with like 10 tests in it<br>\n<code>ruby tests/TC_release1.rb --name test_TC_01</code> - to run a single test</p>\n\nProblem:\n\n<p>All the tests from the test file will be initialized (in my case 10 times). This is because of the \"call order\" described in the docs in <a href=\"http://test-unit.github.io/test-unit/en/Test/Unit/TestCase.html\" rel=\"nofollow noreferrer\">http://test-unit.github.io/test-unit/en/Test/Unit/TestCase.html</a></p>\n\nQuestion:\n\n<p>How can I avoid that, and run it in stand-alone mode?</p>\n\nThe test file\n\n<pre><code>$ cat tests/TC_release1.rb\nrequire 'rubygems'\nrequire 'date'\nrequire 'test/unit'\n\nclass TC_release1 &lt; Test::Unit::TestCase\n        def initialize(options)\n                super\n                puts DateTime.now.strftime(\"%Y-%m-%dT%H:%M:%S\")+\" Hello from the init method.\"\n        end\n\n        def test_TC_01()\n                puts DateTime.now.strftime(\"%Y-%m-%dT%H:%M:%S\")+\" Start test 01\"\n                assert_match(/2017/, `date /T`)\n                puts DateTime.now.strftime(\"%Y-%m-%dT%H:%M:%S\")+\" End test 01\"\n        end\n        def test_TC_02()\n                assert_match(/2017/, `date /T`)\n        end\n        def test_TC_03()\n                assert_match(/2017/, `date /T`)\n        end\n        def test_TC_04()\n                assert_match(/2017/, `date /T`)\n        end\n        def test_TC_05()\n                assert_match(/2017/, `date /T`)\n        end\n        def test_TC_06()\n                assert_match(/2017/, `date /T`)\n        end\n        def test_TC_07()\n                assert_match(/2017/, `date /T`)\n        end\n        def test_TC_08()\n                assert_match(/2017/, `date /T`)\n        end\n        def test_TC_09()\n                assert_match(/2017/, `date /T`)\n        end\n        def test_TC_10()\n                assert_match(/2017/, `date /T`)\n        end\nend\n</code></pre>\n\nExecute just the first test case from the test file\n\n<pre><code>$ ruby tests/TC_release1.rb --name test_TC_01\n2017-09-13T00:31:16 Hello from the init method.\n2017-09-13T00:31:16 Hello from the init method.\n2017-09-13T00:31:16 Hello from the init method.\n2017-09-13T00:31:16 Hello from the init method.\n2017-09-13T00:31:16 Hello from the init method.\n2017-09-13T00:31:16 Hello from the init method.\n2017-09-13T00:31:16 Hello from the init method.\n2017-09-13T00:31:16 Hello from the init method.\n2017-09-13T00:31:16 Hello from the init method.\n2017-09-13T00:31:16 Hello from the init method.\nLoaded suite tests/TC_release1\nStarted\n2017-09-13T00:31:16 Start test 01\n2017-09-13T00:31:16 End test 01\n.\n\nFinished in 0.048923 seconds.\n--------------------------------------------------------------------------------------------------------------------------------------------------------\n\n1 tests, 1 assertions, 0 failures, 0 errors, 0 pendings, 0 omissions, 0 notifications\n100% passed\n--------------------------------------------------------------------------------------------------------------------------------------------------------\n\n20.44 tests/s, 20.44 assertions/s\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "paypal", "webhooks", "paypal-webhooks"], "owner": {"reputation": 1016, "user_id": 7916823, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11df0228e497538b7e638d6a4721fd1d?s=128&d=identicon&r=PG&f=1", "display_name": "jrocc", "link": "https://stackoverflow.com/users/7916823/jrocc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1505261616, "creation_date": 1505261616, "question_id": 46186989, "link": "https://stackoverflow.com/questions/46186989/paypal-webhook-for-recurring-payments", "title": "PayPal webhook for recurring payments", "body": "<p>I'm using ruby on rails and im trying to implement paypal webhooks so when a recurring payment occurs I get notified. I implemented a webhook with stripe and it was straight forward right from their API but i'm having trouble with paypal and their API isn't very helpful. Is there any good tutorial that I can look at for some help? Or is there anyone with their own example. Thank you for all the help.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1505264516, "post_id": 46186982, "comment_id": 79337299, "body": "It&#39;s not clear how these two bits of code are connected."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1505282274, "post_id": 46186982, "comment_id": 79341828, "body": "You could alternatively write the method <code>letter_grade</code> as follows: <code>def letter_grade(score); case score; when 0...60 then &quot;F&quot;; when 0...70 then &quot;D&quot;; when 0...80 then &quot;C&quot;; when 0...70 then &quot;B&quot;; else &quot;A&quot;; end; end</code>. This works because statement use <code>===</code>, which here is <a href=\"http://ruby-doc.org/core-2.4.0/Range.html#method-i-3D-3D-3D\" rel=\"nofollow noreferrer\">Range#===</a>. Also, I&#39;ve written the ranges with three dots so that (for example) <code>80</code> is in the range <code>80...90</code> rather than <code>70...80</code>. If desired, you could write, for example, <code>when 70...80 then &quot;C&quot;</code> instead of <code>when 0...80 then &quot;C&quot;</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1505282312, "post_id": 46186982, "comment_id": 79341843, "body": "You could also write <code>def letter_grade(score); case score; when 90...101 then &quot;A&quot;; when 80...90 then &quot;B&quot;; when 70...80 then &quot;C&quot;; when 60...70 then &quot;D&quot;; else &quot;F&quot;; end; end</code>."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1505281270, "post_id": 46187544, "comment_id": 79341431, "body": "<code>sort_by</code> is an <code>Enumerable</code> method and <code>Hash</code> <code>include</code>s <code>Enumerable</code>, so why should <code>to_a</code> be needed? Try it. Consider <code>grade_hash.transform_values { |nums| letter_grade(nums.sum.fdiv(nums.size)) }.sort_by(&amp;:last)</code>. Note I&#39;ve calculated a floating point average before converting to a letter grade. See <a href=\"http://ruby-doc.org/core-2.4.0/Integer.html#method-i-fdiv\" rel=\"nofollow noreferrer\">Integer#fdiv</a>. In #2 try <code>.min_by(number_of_students, &amp;:last)</code>. See <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-max_by\" rel=\"nofollow noreferrer\">Enumerable#min_by</a>."}, {"owner": {"reputation": 1171, "user_id": 86185, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d8ab8c7b30515df850171d8e9c7c4c4e?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/86185/zack"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1505307405, "post_id": 46187544, "comment_id": 79358805, "body": "@CarySwoveland - hashes are not sortable; the order of keys in a hash is undefined.  If you look at the output of your statement, it is an array, not a hash.  It looks like <code>sort_by</code> is internally converting to an array, so the <code>to_a</code> in my solution is superfluous."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1505318947, "post_id": 46187544, "comment_id": 79367348, "body": "<code>sort_by</code> is an <code>Enumerable</code> method (<a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-sort_by\" rel=\"nofollow noreferrer\">Enumerable#sort_by</a>). All <code>Enumerable</code> methods have receivers that are enumerators (instances of the class <a href=\"http://ruby-doc.org/core-2.4.0/Enumerator.html\" rel=\"nofollow noreferrer\">Enumerator</a>). Suppose <code>h = { a:1, b:2 }</code>. When Ruby sees <code>h.sort_by {...}</code>, recognizing <code>sort_by</code> is an <code>Enumerable</code> method, she sends <code>h</code> the method <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-i-each\" rel=\"nofollow noreferrer\">Hash#each</a> (without a block) to convert it to the enumerator <code>enum = h.each #=&gt; #&lt;Enumerator: {:a=&gt;1, :b=&gt;2}:each&gt;</code>. (cont..)"}, {"owner": {"reputation": 1171, "user_id": 86185, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d8ab8c7b30515df850171d8e9c7c4c4e?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/86185/zack"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1505319747, "post_id": 46187544, "comment_id": 79367828, "body": "We&#39;re having a slight miscommunication due to semantics.  I agree that you get a sorted <i>result</i> when you call <code>sort_by</code>.  My argument is that a <code>Hash</code> <i>data structure</i> cannot be sorted.  A hash is an unordered set of key/value pairs; sorting has no meaning because the <i>data structure</i> has no order.  When you call <code>each</code> the hash is <i>serialized</i> and sorting becomes possible but the result of the sort is no longer a hash, it is an array.  Observe: <code>grade_hash.sort_by(&amp;:last).class</code> returns <code>Array</code>.  The same logic applies to a <code>Set</code>; you can call <code>sort</code> but the result is no longer a <code>Set</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1505319953, "post_id": 46187544, "comment_id": 79367938, "body": "..So Ruby actually executes <code>h.each.sort_by {...}</code> or <code>enum.sort_by {...}</code>. <code>enum</code> generates elements that are passed to <code>sort_by</code>: <code>enum.next #=&gt;   [:a, 1]; enum.next #=&gt; [:b, 2]; enum.next #=&gt; StopIteration: iteration reached an end</code>. <code>sort_by</code> does not know that these are key-value pairs from a hash. They could as well be elements of an array or some other class <code>C</code> that <code>include</code>s <code>Enumerable</code> (and therefore implements <code>C#each</code>). That is why <code>sort_by</code> was designed to return an array of pairs."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1505320381, "post_id": 46187544, "comment_id": 79368184, "body": "You are saying  one can&#39;t sort a hash to produce a hash whose key-value pairs are ordered (though that&#39;s irrelevant to whether you need <code>to_a</code>). Actually, that&#39;s not quite accurate. Since v1.9 Ruby guarantees that key-insertion order is maintained. Therefore, <code>h.sort.to_h</code> produces a hash whose key-value pairs are ordered by <a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-3C-3D-3E\" rel=\"nofollow noreferrer\">Array#&lt;=&gt;</a>. Ordering key-value pairs in that way was controversial, but many of us have found useful applications of that property. I&#39;ll agree with you that sets cannot be ordered to produce ordered sets. :-)"}], "tags": [], "owner": {"reputation": 1171, "user_id": 86185, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d8ab8c7b30515df850171d8e9c7c4c4e?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/86185/zack"}, "is_accepted": false, "score": 0, "last_activity_date": 1505307526, "last_edit_date": 1505307526, "creation_date": 1505266586, "answer_id": 46187544, "question_id": 46186982, "link": "https://stackoverflow.com/questions/46186982/how-to-return-the-top-three-values-from-an-array/46187544#46187544", "title": "How to return the top three values from an array", "body": "<p>To sort you will need to convert to an array.  Hashes are not sortable.</p>\n\n<pre><code>grade_hash\n  .transform_values {|nums| letter_grade(nums.reduce(:+)/nums.size)}\n  .to_a\n  .sort_by(&amp;:last)\n</code></pre>\n\n<p>The above will sort the values.</p>\n\n<p>From there you can select the top <code>n</code> students and optionally convert back to a hash if you want to keep that format.</p>\n\n<pre><code>grade_hash\n  .transform_values {|nums| letter_grade(nums.reduce(:+)/nums.size)}\n  .to_a               # this is superfluous; .sort_by on a hash will do this internally\n  .sort_by(&amp;:last)\n  .take(number_of_students)\n  .to_h\n</code></pre>\n\n<p>Addendum: CarySwoveland points out that arrays in ruby 2.4 support <code>sum</code> so the reduce isn't necessary</p>\n\n<pre><code>letter_grade(nums.sum.fdviv(nums.size))\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8387535, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7a5bf01841e0c98c4b78551014c18685?s=128&d=identicon&r=PG&f=1", "display_name": "user8387535", "link": "https://stackoverflow.com/users/8387535/user8387535"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505307526, "creation_date": 1505261536, "last_edit_date": 1505271290, "question_id": 46186982, "link": "https://stackoverflow.com/questions/46186982/how-to-return-the-top-three-values-from-an-array", "title": "How to return the top three values from an array", "body": "<p>I have a set of data:</p>\n\n<pre><code>grade_hash = {bill: [100, 95, 92], frank: [67, 73, 84], sue: [99, 88, 77], karen: [70,80,90], bob: [95, 93, 92]}\n</code></pre>\n\n<p>I also have a grade scale:</p>\n\n<pre><code>def letter_grade(score)\n  if score &gt;= 90\n   \"A\"\n  elsif score &gt;= 80\n   \"B\"\n  elsif score &gt;= 70\n   \"C\"\n  elsif score &gt;= 60\n   \"D\"\n  else\n   \"F\"\n  end\nend\n</code></pre>\n\n<p>I want to extract those two that have the highest grades.</p>\n\n<p>I have:</p>\n\n<pre><code>def top_students(grade_hash, number_of_students)\n  grade_hash.transform_values {|nums| letter_grade(nums.reduce(:+)/nums.size)}\nend\n</code></pre>\n\n<p>This would give the average of the grades for each student and apply a letter grade. How do I extract the top two?</p>\n\n<p>I tried applying a .sort_by but that didn't work.</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "angularjs", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 320, "user_id": 7951676, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a6861aa59e106c8ffcaadde2c2f7c8af?s=128&d=identicon&r=PG", "display_name": "user7951676", "link": "https://stackoverflow.com/users/7951676/user7951676"}, "edited": false, "score": 0, "creation_date": 1505310313, "post_id": 46186835, "comment_id": 79361076, "body": "How does it know to recall the function when the variables change?"}, {"owner": {"reputation": 20764, "user_id": 233810, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/668cc1cf0aac100c08dd986e4633162a?s=128&d=identicon&r=PG", "display_name": "Steve Danner", "link": "https://stackoverflow.com/users/233810/steve-danner"}, "reply_to_user": {"reputation": 320, "user_id": 7951676, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a6861aa59e106c8ffcaadde2c2f7c8af?s=128&d=identicon&r=PG", "display_name": "user7951676", "link": "https://stackoverflow.com/users/7951676/user7951676"}, "edited": false, "score": 0, "creation_date": 1505311114, "post_id": 46186835, "comment_id": 79361703, "body": "This answer has a good, thorough explanation of how Angular decides to rerun the function:  <a href=\"https://stackoverflow.com/questions/30437563/angularjs-ng-bind-with-a-function#answer-30437972\" title=\"angularjs ng bind with a function%23answer 30437972\">stackoverflow.com/questions/30437563/&hellip;</a>"}, {"owner": {"reputation": 320, "user_id": 7951676, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a6861aa59e106c8ffcaadde2c2f7c8af?s=128&d=identicon&r=PG", "display_name": "user7951676", "link": "https://stackoverflow.com/users/7951676/user7951676"}, "edited": false, "score": 0, "creation_date": 1505311665, "post_id": 46186835, "comment_id": 79362065, "body": "Thank you, I understand now"}, {"owner": {"reputation": 41, "user_id": 6605172, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fsiIYCQaMWY/AAAAAAAAAAI/AAAAAAAAAQQ/W_7JO47RRXU/photo.jpg?sz=128", "display_name": "zstrad44", "link": "https://stackoverflow.com/users/6605172/zstrad44"}, "edited": false, "score": 0, "creation_date": 1505318079, "post_id": 46186835, "comment_id": 79366793, "body": "@SteveDanner Thanks for replying. I did think about this approach and used it for other portions of the app. The only issue is, that there are many descriptions and the variables will be in different locations in each. So I need a way to render the expressions like I stated in the original question. I have thought about <code>$compile</code>, but am not quite sure how to go about that."}], "tags": [], "owner": {"reputation": 20764, "user_id": 233810, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/668cc1cf0aac100c08dd986e4633162a?s=128&d=identicon&r=PG", "display_name": "Steve Danner", "link": "https://stackoverflow.com/users/233810/steve-danner"}, "is_accepted": false, "score": 2, "last_activity_date": 1505260255, "creation_date": 1505260255, "answer_id": 46186835, "question_id": 46186793, "link": "https://stackoverflow.com/questions/46186793/angularjs-is-it-possible-to-store-expressions-as-a-scope-variable-value/46186835#46186835", "title": "AngularJS - Is it possible to store {{expressions}} as a $scope.variable value?", "body": "<p>You can use a function to mimic a \"computed\" property like so:</p>\n\n<pre><code>    $scope.fullDescription = function () {\n       return productName + \" is a great product and also has awesome \" +\n              additionalInfo + \". These are some more example words, blah blah..\";\n    };\n</code></pre>\n\n<p>And you can bind to it just like a variable in your markup:</p>\n\n<pre><code>&lt;div ng-bind=\"fullDescription()\"&gt;&lt;/div&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19244, "user_id": 1959948, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/trFNS.jpg?s=128&g=1", "display_name": "Dalorzo", "link": "https://stackoverflow.com/users/1959948/dalorzo"}, "is_accepted": false, "score": 1, "last_activity_date": 1505320085, "last_edit_date": 1505320085, "creation_date": 1505260891, "answer_id": 46186908, "question_id": 46186793, "link": "https://stackoverflow.com/questions/46186793/angularjs-is-it-possible-to-store-expressions-as-a-scope-variable-value/46186908#46186908", "title": "AngularJS - Is it possible to store {{expressions}} as a $scope.variable value?", "body": "<p>you can use angular <strong><code>$parse</code></strong> using regular expression you can search for the variable and then parse it.</p>\n\n<p>The example below it is not a 100% accurate but you will get the idea</p>\n\n<p>Like:</p>\n\n<pre><code>$scope.description = \"{{productName}} is a great product and also has\nawesome {{additionalInfo}}. These are some more example words, blah \nblah..\".replace(/{{(.*?)}}/g,\nfunction(item,a){ var getter = $parse(a); return getter($scope); });\n</code></pre>\n\n<p>Now, I am just answering an option on how. However, I do not believe this is the optimal solution to the problem.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 6605172, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fsiIYCQaMWY/AAAAAAAAAAI/AAAAAAAAAQQ/W_7JO47RRXU/photo.jpg?sz=128", "display_name": "zstrad44", "link": "https://stackoverflow.com/users/6605172/zstrad44"}, "is_accepted": true, "score": 1, "last_activity_date": 1505329360, "creation_date": 1505329360, "answer_id": 46205052, "question_id": 46186793, "link": "https://stackoverflow.com/questions/46186793/angularjs-is-it-possible-to-store-expressions-as-a-scope-variable-value/46205052#46205052", "title": "AngularJS - Is it possible to store {{expressions}} as a $scope.variable value?", "body": "<p>I figured it out. The solution was <code>$interpolate</code></p>\n\n<p>Example:</p>\n\n<pre><code>//Assign the gon variable from the rails controller\n\n$scope.entertainmentTemplate = gon.active_entertainment_template.description;\n\n// Interpolate the variable with the controller $scope as the scope and \nassign it to the model you wish.\n\n$scope.description = $interpolate($scope.entertainmentTemplate)($scope);\n</code></pre>\n\n<p>Make sure you add the <code>$interpolate</code> service to the controller like so:</p>\n\n<pre><code>var app = angular.module('myApp', []);\napp.controller('listingFormCtrl',['$scope', '$interpolate', function($scope, $interpolate) {\n\n}]);\n</code></pre>\n\n<p>This will replace all unrendered instance of {{expression variables}} in the assigned controller scope.</p>\n"}], "owner": {"reputation": 41, "user_id": 6605172, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fsiIYCQaMWY/AAAAAAAAAAI/AAAAAAAAAQQ/W_7JO47RRXU/photo.jpg?sz=128", "display_name": "zstrad44", "link": "https://stackoverflow.com/users/6605172/zstrad44"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 46205052, "answer_count": 3, "score": 1, "last_activity_date": 1505329360, "creation_date": 1505259906, "last_edit_date": 1505318338, "question_id": 46186793, "link": "https://stackoverflow.com/questions/46186793/angularjs-is-it-possible-to-store-expressions-as-a-scope-variable-value", "title": "AngularJS - Is it possible to store {{expressions}} as a $scope.variable value?", "body": "<p>I am building a Rails app but using AngularJS for bits of the front end.</p>\n\n<p>Is it possible to store <code>{{expressions}}</code> as a <code>$scope.variable</code> value?</p>\n\n<p>Code:</p>\n\n<p>Here is the angular controller</p>\n\n<p><code>// I am pulling data from the rails controller via the gon gem.\n$scope.entertainmentTemplate = gon.active_entertainment_template.description;</code></p>\n\n<p>Which translates to:</p>\n\n<p><code>$scope.description = \"{{productName}} is a great product and also has awesome {{additionalInfo}}. These are some more example words, blah blah..\";</code></p>\n\n<p>Defined variables in angular controller:\n<code>\n$scope.productName = \"Test product\";\n$scope.additionalInfo = \"test additional information\";\n</code></p>\n\n<p>My question is how do I render the above <code>$scope.description</code> to the view so that it displays like so:</p>\n\n<p>\"Test product is a great product and also has awesome test additional information. These are some more example words, blah blah..\"</p>\n\n<p>Please let me know if any additional context is needed.</p>\n\n<hr>\n\n<h2>UPDATE 1:</h2>\n\n<p>Here is an image of the application to show context:\n<img src=\"https://i.stack.imgur.com/vt1Lf.png\" alt=\"Image to show context\"></p>\n"}, {"tags": ["arrays", "ruby", "string", "exception-handling", "null"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1505259720, "post_id": 46186686, "comment_id": 79336331, "body": "If you want to target <code>nil</code> values specifically then a ternary with <code>nil?</code> would work: <code>array.map { |s| s.nil? ? s : s.upcase }</code>."}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1505319756, "post_id": 46186686, "comment_id": 79367832, "body": "@sagarpandya82 There&#39;s nothing wrong with the ternary solution; it&#39;s perfectly valid Ruby from a conceptual standpoint. However, it&#39;s less compact and forces you to treat nils explicitly as a separate case. Unless it&#39;s significantly faster than the other options (see the <a href=\"https://stackoverflow.com/a/46186858/1301972\">benchmarking answer</a> below) then I&#39;m not sure I see the advantage."}], "answers": [{"comments": [{"owner": {"reputation": 393, "user_id": 4347423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0175ce86b787c87515c165b7269483f3?s=128&d=identicon&r=PG&f=1", "display_name": "DanRio", "link": "https://stackoverflow.com/users/4347423/danrio"}, "edited": false, "score": 1, "creation_date": 1505302905, "post_id": 46186687, "comment_id": 79355505, "body": "This is excellent thanks! I appreciate your response and posting of the question very much! Perfect."}], "tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": true, "score": 2, "last_activity_date": 1505259056, "creation_date": 1505259056, "answer_id": 46186687, "question_id": 46186686, "link": "https://stackoverflow.com/questions/46186686/how-can-one-avoid-a-nomethoderror-exception-when-mapping-over-nils-in-an-array-o/46186687#46186687", "title": "How can one avoid a NoMethodError exception when mapping over nils in an array of strings?", "body": "<h2>The Problem</h2>\n\n<p>In the original question, the values in the array were all String objects. However, if the contents of the array aren't known ahead of time, then of course it's possible that some of the elements may be nil. Since nil doesn't <a href=\"https://ruby-doc.org/core-2.4.1/Object.html#method-i-respond_to-3F\" rel=\"nofollow noreferrer\">#respond_to?</a> :upcase, any nils in the array will trigger the NoMethodError exception you're seeing.</p>\n\n<h2>Potential Solutions</h2>\n\n<p>There are a number of ways to handle this, including:</p>\n\n<ol>\n<li>Use <a href=\"https://ruby-doc.org/core-2.4.1/Array.html#method-i-compact\" rel=\"nofollow noreferrer\">Array#compact</a> to remove nils before mapping.</li>\n<li>Explicitly handle the exception with <a href=\"https://ruby-doc.org/core-2.4.1/doc/syntax/exceptions_rdoc.html\" rel=\"nofollow noreferrer\">rescue</a>.</li>\n<li>Use the block form of <a href=\"https://ruby-doc.org/core-2.4.1/Array.html#method-i-map-21\" rel=\"nofollow noreferrer\">Array#map!</a> to invoke the method using Ruby's new (as of Ruby 2.3.0) <a href=\"https://bugs.ruby-lang.org/issues/11537\" rel=\"nofollow noreferrer\">safe navigation operator</a>.</li>\n</ol>\n\n<p>I'll focus on the last item in the remainder of the answer.</p>\n\n<h2>Use Ruby's Safe Navigation Operator</h2>\n\n<p>Which answer is best depends on context, but I recommend the safe navigation operator for the common case. I can't find it documented anywhere except the release notes, but it works a lot like the <a href=\"http://api.rubyonrails.org/classes/Object.html#method-i-try\" rel=\"nofollow noreferrer\">Object#try</a> method from Rails.</p>\n\n<p>Instead of mapping each element directly with <code>map! &amp;:upcase</code> you would use safe navigation to only invoke <a href=\"https://ruby-doc.org/core-2.4.1/String.html#method-i-upcase\" rel=\"nofollow noreferrer\">#upcase</a> on objects that respond to it. For example:</p>\n\n<pre><code>array = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", nil, \"Friday\"]\narray.map! { |e| e&amp;.upcase }\n#=&gt; [\"MONDAY\", \"TUESDAY\", \"WEDNESDAY\", \"THURSDAY\", nil, \"FRIDAY\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1505260462, "creation_date": 1505260462, "answer_id": 46186858, "question_id": 46186686, "link": "https://stackoverflow.com/questions/46186686/how-can-one-avoid-a-nomethoderror-exception-when-mapping-over-nils-in-an-array-o/46186858#46186858", "title": "How can one avoid a NoMethodError exception when mapping over nils in an array of strings?", "body": "<p>Here's a benchmark for different approaches:</p>\n\n<pre><code>require 'benchmark'\n\narr = 100_000.times.map { nil }\nBenchmark.bm do |bm|\n  bm.report(\"compact then upcase\\n\") do\n    arr.compact.each &amp;:upcase\n  end\n  bm.report(\"save nagivation then upcase\\n\") do\n    arr.each { |y| y&amp;.upcase }\n  end\n  bm.report(\"respond_to then upcase\\n\") do\n    arr.each { |y| y.upcase if y.respond_to?(:upcase) }\n  end\n  bm.report(\"boolean check then upcase\\n\") do\n    arr.each { |y| y &amp;&amp; y.upcase }\n  end\nend\n</code></pre>\n\n<p>and the results:</p>\n\n<pre><code>       user     system      total        real\ncompact then upcase\n  0.000000   0.000000   0.000000 (  0.000912)\nsave nagivation then upcase\n  0.020000   0.000000   0.020000 (  0.005030)\nrespond_to then upcase\n  0.000000   0.000000   0.000000 (  0.009824)\nboolean check then upcase\n  0.000000   0.000000   0.000000 (  0.005254)\n</code></pre>\n\n<p>You can see that compact is the fastest, but there's an important difference between its results and the others. It does <em>not</em> include any nil values in the result, and if some items were skipped then the result will be a different length.</p>\n\n<p>So I would say if you want the result to not preserve the <code>nil</code>, then use compact, otherwise use the boolean or safe navigation, which perform about the same.</p>\n"}], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 46186687, "answer_count": 2, "score": 1, "last_activity_date": 1505260462, "creation_date": 1505259056, "question_id": 46186686, "link": "https://stackoverflow.com/questions/46186686/how-can-one-avoid-a-nomethoderror-exception-when-mapping-over-nils-in-an-array-o", "title": "How can one avoid a NoMethodError exception when mapping over nils in an array of strings?", "body": "<h2>The Question</h2>\n\n<p>In response to a <a href=\"https://stackoverflow.com/a/11402608/1301972\">related question</a>, @DanRio asked this <a href=\"https://stackoverflow.com/questions/11402362/how-can-i-uppercase-each-element-of-an-array/11402608#comment79334856_11402608\">follow-up question</a>:</p>\n\n<blockquote>\n  <p>If an element in the array is nil, using array.map!(&amp;:upcase) gives a no method error on it. How would I get around this?</p>\n</blockquote>\n\n<p>Because this is outside the scope of the original question, I'm posting it here on his behalf.</p>\n\n<h2>The Code</h2>\n\n<p>This is the snippet of code the user is asking about:</p>\n\n<pre><code>array = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\"]\narray.map!(&amp;:upcase)\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1505257018, "post_id": 46186320, "comment_id": 79335692, "body": "<code>&quot;num: -35+46i&quot; =~ &#47;.*i*&#47;</code> <code>=&gt; 0 </code>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1505259228, "post_id": 46186320, "comment_id": 79336201, "body": "Why did you edit the failing test? Which version is correct behaviour? I wrote my response based on the original, and your question was based on a <b>failing</b> test."}, {"owner": {"reputation": 323, "user_id": 6576252, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d4bf1a52d627d15cf923fc884444a718?s=128&d=identicon&r=PG&f=1", "display_name": "Wallace Mogerty", "link": "https://stackoverflow.com/users/6576252/wallace-mogerty"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1505259502, "post_id": 46186320, "comment_id": 79336271, "body": "@TomLord After reviewing the code, I thought I had made a mistake, but the test was correct originally. Post has been edited to reflect this"}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1505260054, "post_id": 46186320, "comment_id": 79336415, "body": "What is the significance of <code>get_complex</code> returning 5? Or 0? Or <code>nil</code>? Are you testing that the string is a complex number? Then return a boolean rather than whatever the regex happens to return (the index of the first match), <code>input =~ &#47;regex&#47; ? true : false</code>, and call it <code>is_complex?</code>. If you&#39;re trying to extract the complex number, use <a href=\"https://ruby-doc.org/core/Regexp.html#class-Regexp-label-Capturing\" rel=\"nofollow noreferrer\">capture groups</a> and return what is captured."}], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1505258464, "post_id": 46186597, "comment_id": 79336010, "body": "Your reasoning doesn&#39;t really make sense... &quot;Your test is wrong, because it is failing&quot;?! Maybe the tests are <i>correct</i>, and OP is looking for a correct alternate implementation of the method?"}, {"owner": {"reputation": 32, "user_id": 3862152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iTUC9.jpg?s=128&g=1", "display_name": "Albert Hu", "link": "https://stackoverflow.com/users/3862152/albert-hu"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1505258940, "post_id": 46186597, "comment_id": 79336133, "body": "@TomLord I like your answer better! Thanks for the input. I don&#39;t mean to offend, I just wasn&#39;t sure what OP meant by &quot;testing for complex numbers&quot;."}], "tags": [], "owner": {"reputation": 32, "user_id": 3862152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iTUC9.jpg?s=128&g=1", "display_name": "Albert Hu", "link": "https://stackoverflow.com/users/3862152/albert-hu"}, "is_accepted": false, "score": 1, "last_activity_date": 1505258163, "creation_date": 1505258163, "answer_id": 46186597, "question_id": 46186320, "link": "https://stackoverflow.com/questions/46186320/ruby-regex-complex-numbers/46186597#46186597", "title": "Ruby Regex Complex Numbers", "body": "<p>The reason your test is failing is that you may be testing for the wrong thing.</p>\n\n<p><code>RegexPractice.get_complex(\"num: -35+46i\")</code> is <em>supposed</em> to return 0, because the pattern you're matching with:</p>\n\n<p><code>/.*i*/</code></p>\n\n<p>returns the first index of the complete match of <code>0 or more of any character</code> followed by <code>0 or more i's</code>.</p>\n\n<p>You can use <a href=\"http://rubular.com/\" rel=\"nofollow noreferrer\">Rubular</a> to live-check your regex matching, or you can run it in a console:</p>\n\n<p><code>irb &gt;&gt;&gt; \"num: -35+46i\" =~ /.*i/\n=&gt; 0\n</code></p>\n\n<p>If you are ultimately trying to return the first index of the complex number in any given string, you may need to do some more complex pattern matching depending on your expected input, i.e. look for a <code>+</code> or <code>-</code> sign with a real number on the left and a complex number on the right of it.</p>\n\n<p>Finally, if you want to just create and interact with Complex numbers you may want to refer to <a href=\"https://ruby-doc.org/core-1.9.3/Complex.html\" rel=\"nofollow noreferrer\">this documentation.</a></p>\n"}, {"comments": [{"owner": {"reputation": 323, "user_id": 6576252, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d4bf1a52d627d15cf923fc884444a718?s=128&d=identicon&r=PG&f=1", "display_name": "Wallace Mogerty", "link": "https://stackoverflow.com/users/6576252/wallace-mogerty"}, "edited": false, "score": 0, "creation_date": 1505259589, "post_id": 46186640, "comment_id": 79336296, "body": "Thank you for the in-depth answer, Tom. I have attempted your implementation and test #9 is still failing, outputting &#39;2&#39; rather than &#39;nil&#39;"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 323, "user_id": 6576252, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d4bf1a52d627d15cf923fc884444a718?s=128&d=identicon&r=PG&f=1", "display_name": "Wallace Mogerty", "link": "https://stackoverflow.com/users/6576252/wallace-mogerty"}, "edited": false, "score": 0, "creation_date": 1505259942, "post_id": 46186640, "comment_id": 79336384, "body": "Ahh wait, yeah. That&#39;s because I have all chars before the <code>i</code> marked as optional. A perfect answer to this could be a bit more complicated, but to keep it simple can we assume that there <b>must</b> be a digit before <code>i</code>? This would mean e.g. <code>2+i</code> gets interpreted as invalid unfortunately, but <code>2+1i</code> would work."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 323, "user_id": 6576252, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d4bf1a52d627d15cf923fc884444a718?s=128&d=identicon&r=PG&f=1", "display_name": "Wallace Mogerty", "link": "https://stackoverflow.com/users/6576252/wallace-mogerty"}, "edited": false, "score": 0, "creation_date": 1505260202, "post_id": 46186640, "comment_id": 79336458, "body": "Or to put it another way, can you clarify the validity rules? Why is <code>abi</code> invalid, but <code>num: i</code> valid? (Or is that invalid too?) Is <code>ab i</code> valid? Is the rule &quot;There must be a space between the complex number and other text&quot;?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 323, "user_id": 6576252, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d4bf1a52d627d15cf923fc884444a718?s=128&d=identicon&r=PG&f=1", "display_name": "Wallace Mogerty", "link": "https://stackoverflow.com/users/6576252/wallace-mogerty"}, "edited": false, "score": 0, "creation_date": 1505260386, "post_id": 46186640, "comment_id": 79336498, "body": "In the case of the latter, you could use <code>&#47;(?&lt;=^| )[+-]?\\d*[+-]?\\d*i.*&#47;</code>"}, {"owner": {"reputation": 323, "user_id": 6576252, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d4bf1a52d627d15cf923fc884444a718?s=128&d=identicon&r=PG&f=1", "display_name": "Wallace Mogerty", "link": "https://stackoverflow.com/users/6576252/wallace-mogerty"}, "edited": false, "score": 0, "creation_date": 1505265372, "post_id": 46186640, "comment_id": 79337479, "body": "<code>&#47;(?&lt;=^| )[+-]?\\d*[+-]?\\d*i.*&#47;</code> did the trick. Thank you for your explanation, Tom, it makes much more sense now!"}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 2, "last_activity_date": 1505259809, "last_edit_date": 1505259809, "creation_date": 1505258595, "answer_id": 46186640, "question_id": 46186320, "link": "https://stackoverflow.com/questions/46186320/ruby-regex-complex-numbers/46186640#46186640", "title": "Ruby Regex Complex Numbers", "body": "<p>You could implement it like this:</p>\n\n<pre><code>module RegexPractice\n\n  def get_complex(input)\n    input =~ /[+-]?\\d*[+-]?\\d*i/\n  end\n\nend\n</code></pre>\n\n<p>The issue is that you're not being strict enough about what may come before the <code>i</code>, as part of the complex number.</p>\n\n<p>Your current code is just saying \"include <em>anything</em> before <code>i</code> as part of the match\". Therefore the match <em>always</em> begins at the start of the string - so the method returns <code>0</code> (or <code>nil</code> if there's no match).</p>\n\n<p>To explain my regex:</p>\n\n<ul>\n<li><code>[+-]</code> means \"either a <code>+</code> or <code>-</code> character.</li>\n<li><code>[+-]?</code> means \"zero or one of the above\".</li>\n<li><code>\\d</code> means \"any digit\" (0, 1, 2, ..., 9).</li>\n<li><code>\\d*</code> means \"zero or more of the above\".</li>\n</ul>\n\n<p>So in other words, this will match anything like:</p>\n\n<ul>\n<li><code>\"42i\"</code></li>\n<li><code>\"2-i\"</code></li>\n<li><code>\"-3+9i\"</code></li>\n</ul>\n\n<p>But <em>won't</em> match arbitrary other strings that contain an <code>i</code>.</p>\n\n<hr>\n\n<p>Your tests #9 and #10 also fail (but pass with my implementation!) - but you are not seeing this, because the test terminates upon its first failure. (It would be better to split each assertion into a separate test, for this reason.)</p>\n\n<pre><code>assert_equal(nil, RegexPractice.get_complex(\"abi\"))\n</code></pre>\n\n<p>Your method will return <code>0</code>, because it still just matches \"anything followed by <code>i</code>\".</p>\n\n<p>My method will return <code>nil</code>, because it only matches \"numbers\" followed by <code>i</code> (e.g. <code>-3+4i</code>); not arbitrary characters.</p>\n\n<pre><code>assert_equal(nil, RegexPractice.get_complex(\"65\"))\n</code></pre>\n\n<p>Your method <em>should</em> work here, except for a small mistake: Because your regex ends in <code>i*</code> instead of just <code>i</code>, it matches \"0 or more <code>i</code>s\". In other words, it will still match strings that <em>don't</em> contain an <code>i</code>.</p>\n\n<p>My method does not have this mistake.</p>\n\n<hr>\n\n<p>Normally however, if you want to convert a string to a complex number, you could just do:</p>\n\n<pre><code>Complex(string)\n</code></pre>\n\n<p>...And if that raises an exception, then the string was an invalid format.</p>\n\n<p>Inputs like <code>\"num: -35+46i\"</code> would normally be invalid however; so if you want to accept these then you do indeed need to perform some sort of regex lookup first.</p>\n"}], "owner": {"reputation": 323, "user_id": 6576252, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d4bf1a52d627d15cf923fc884444a718?s=128&d=identicon&r=PG&f=1", "display_name": "Wallace Mogerty", "link": "https://stackoverflow.com/users/6576252/wallace-mogerty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 46186640, "answer_count": 2, "score": 0, "last_activity_date": 1505259809, "creation_date": 1505256069, "last_edit_date": 1505259451, "question_id": 46186320, "link": "https://stackoverflow.com/questions/46186320/ruby-regex-complex-numbers", "title": "Ruby Regex Complex Numbers", "body": "<p>I have the below code for testing for complex numbers:</p>\n\n<pre><code>module RegexPractice\n\n  def get_complex(input)\n    return input =~ /.*i*/\n  end\n\nend\n</code></pre>\n\n<p>The code should pass each of the unit tests below, but mine is failing beginning with unit test #7. I'm unsure of an implementation to address this. Any ideas?</p>\n\n<pre><code>def test_complex\n\n  #1\n  assert_equal(0, RegexPractice.get_complex(\"4i\"))\n  #2\n  assert_equal(0, RegexPractice.get_complex(\"43i\"))\n  #3\n  assert_equal(0, RegexPractice.get_complex(\"-46i\"))\n  #4\n  assert_equal(0, RegexPractice.get_complex(\"+46i\"))\n  #5\n  assert_equal(0, RegexPractice.get_complex(\"35+46i\"))\n  #6\n  assert_equal(0, RegexPractice.get_complex(\"3-46i\"))\n  #7\n  assert_equal(5, RegexPractice.get_complex(\"num: -35+46i\"))\n  #8\n  assert_equal(0, RegexPractice.get_complex(\"+3-46i\"))\n  #9\n  assert_equal(nil, RegexPractice.get_complex(\"abi\"))\n  #10\n  assert_equal(nil, RegexPractice.get_complex(\"65\"))\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 1564, "user_id": 755421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71312ffca1775d45c43afabf53358838?s=128&d=identicon&r=PG", "display_name": "bitsapien", "link": "https://stackoverflow.com/users/755421/bitsapien"}, "is_accepted": true, "score": 0, "last_activity_date": 1505271770, "creation_date": 1505271770, "answer_id": 46188180, "question_id": 46186271, "link": "https://stackoverflow.com/questions/46186271/updating-rails-5-initializer-with-devise-user-parameters/46188180#46188180", "title": "Updating Rails 5 Initializer with Devise User Parameters", "body": "<p>You might want to move this logic into your <code>User</code> model, and have a <code>after_save</code> hook to push data to <code>agilecrm</code>. Assuming that the Devise user model is called <code>User</code> :</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  ...\n\n  after_save :sync_to_agilecrm\n\n  def sync_to_agilecrm\n    # your agilecrm api calls go here\n    ...\n  end\n\nend\n</code></pre>\n\n<p>The above should do what you are trying to achieve. </p>\n"}], "owner": {"reputation": 2525, "user_id": 3200391, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/dc8c798b0aaf54577e388f7bc177093c?s=128&d=identicon&r=PG", "display_name": "Charles Smith", "link": "https://stackoverflow.com/users/3200391/charles-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 46188180, "answer_count": 1, "score": 0, "last_activity_date": 1505271770, "creation_date": 1505255707, "question_id": 46186271, "link": "https://stackoverflow.com/questions/46186271/updating-rails-5-initializer-with-devise-user-parameters", "title": "Updating Rails 5 Initializer with Devise User Parameters", "body": "<p>I thought I was getting closer to wrapping my head around Rails until this challenge. I have an initializer <code>agilecrm.rb</code> - content show below.  I am using <a href=\"https://github.com/agilecrm/ruby-on-rails#intro\" rel=\"nofollow noreferrer\">AgileCRM Ruby code</a> to try and connect my app with AgileCRM system. When using the code below, with the test <code>Create Contact</code> array at the bottom, it successfully creates a contact in my AgileCRM account, so I know at least this part works.  What I need to do is create a new AgileCRM user every time I create a new Devise user. I have a feeling that I am looking at this the wrong way and probably need a controller for this, but this is not completely foreign to me, but I still can't figure out when way to go.  Thank you.</p>\n\n<p><strong>config/initializers/agilecrm.rb</strong></p>\n\n<pre><code>require 'net/http'\nrequire 'uri'\nrequire 'json'\n\nclass AgileCRM\n  class &lt;&lt; self\n    def api_key=(key)\n      @@api_key = key\n    end\n\n    def domain=(d)\n      @@domain = d\n    end\n\n    def email=(email)\n      @@email = email\n    end\n\n    def api_key\n      @@api_key\n    end\n\n    def domain\n      @@domain\n    end\n\n    def email\n      @@email\n    end\n\n    def request(method, subject, data = {})\n      path = \"/dev/api/#{subject}\"\n      case method\n        when :get\n          request = Net::HTTP::Get.new(path)\n        when :post\n          request = Net::HTTP::Post.new(path)\n          request.body = data.to_json\n        when :put\n          request = Net::HTTP::Put.new(path)\n          request.body = data.to_json\n        when :delete\n          request = Net::HTTP::Delete.new(path)\n        else\n          raise \"Unknown method: #{method}\"\n      end\n      uri = URI.parse(\"https://#{domain}.agilecrm.com\")\n      http = Net::HTTP.new(uri.host, uri.port)\n      http.use_ssl = true\n      http.verify_mode = OpenSSL::SSL::VERIFY_NONE\n      request['Content-Type'] = 'application/json'\n      request['Accept'] = 'application/json'\n      request.basic_auth AgileCRM.email, AgileCRM.api_key\n      response = http.request(request)\n      response.body\n    end\n  end\nend\n\nAgileCRM.api_key = '*******'\nAgileCRM.domain = '*******'\nAgileCRM.email = '*******'\n\n#  ======================Create Contact====================================\n\ncontact_data = '{\n    \"star_value\": \"4\",\n    \"lead_score\": \"92\",\n    \"tags\": [\n        \"Lead\",\n        \"Likely Buyer\"\n    ],\n    \"properties\": [\n        {\n            \"type\": \"SYSTEM\",\n            \"name\": \"first_name\",\n            \"value\": \"John\"\n        }\n    ]\n}'\nparsed_contact_data = JSON.parse(contact_data)\nprint(AgileCRM.request :post, 'contacts', parsed_contact_data)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord", "activerecord-relation"], "answers": [{"comments": [{"owner": {"reputation": 2846, "user_id": 766388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ca37b51e58d87f42e900eee149d929b0?s=128&d=identicon&r=PG", "display_name": "jlstr", "link": "https://stackoverflow.com/users/766388/jlstr"}, "edited": false, "score": 0, "creation_date": 1505258654, "post_id": 46186602, "comment_id": 79336062, "body": "Thank you for the reply. I&#39;m not sure how will a polymorphic association fit into this problem, May I kindly ask for some sample code? that&#39;s when you can provide it of course."}], "tags": [], "owner": {"reputation": 89, "user_id": 7628232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eda2D.png?s=128&g=1", "display_name": "neo7", "link": "https://stackoverflow.com/users/7628232/neo7"}, "is_accepted": false, "score": 0, "last_activity_date": 1505258215, "creation_date": 1505258215, "answer_id": 46186602, "question_id": 46186214, "link": "https://stackoverflow.com/questions/46186214/rails-data-modelling-how-to-establish-relationships-when-2-objects-share-the/46186602#46186602", "title": "Rails Data Modelling: How to establish relationships when 2 Objects &quot;Share&quot; the same has_many list?", "body": "<p>Use polymorfic assossiations that can solve this issue I am in the train now will provide you with code or you can start looking up for this task and good luck ;)</p>\n"}, {"comments": [{"owner": {"reputation": 2846, "user_id": 766388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ca37b51e58d87f42e900eee149d929b0?s=128&d=identicon&r=PG", "display_name": "jlstr", "link": "https://stackoverflow.com/users/766388/jlstr"}, "edited": false, "score": 0, "creation_date": 1505259466, "post_id": 46186722, "comment_id": 79336259, "body": "Cool, thanks @Tom Copeland. But shouldn&#39;t it be: Transaction.where(user_one_id: 1).or(Transaction.where(user_two_id: 1)) ?"}, {"owner": {"reputation": 906, "user_id": 7933325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4181aecdacd635102e337da145eafe9?s=128&d=identicon&r=PG", "display_name": "Tom Copeland", "link": "https://stackoverflow.com/users/7933325/tom-copeland"}, "reply_to_user": {"reputation": 2846, "user_id": 766388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ca37b51e58d87f42e900eee149d929b0?s=128&d=identicon&r=PG", "display_name": "jlstr", "link": "https://stackoverflow.com/users/766388/jlstr"}, "edited": false, "score": 1, "creation_date": 1505259695, "post_id": 46186722, "comment_id": 79336323, "body": "Oh, you are right - I misunderstood which set of ids the query was using.  But yup seems like <code>or</code> is the way to go here."}, {"owner": {"reputation": 2846, "user_id": 766388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ca37b51e58d87f42e900eee149d929b0?s=128&d=identicon&r=PG", "display_name": "jlstr", "link": "https://stackoverflow.com/users/766388/jlstr"}, "edited": false, "score": 0, "creation_date": 1505260131, "post_id": 46186722, "comment_id": 79336434, "body": "That would do it, right? I guess the additional Question comes down to, do I make user_one_id and user_two_id Foreign keys? is it necessary?"}, {"owner": {"reputation": 906, "user_id": 7933325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4181aecdacd635102e337da145eafe9?s=128&d=identicon&r=PG", "display_name": "Tom Copeland", "link": "https://stackoverflow.com/users/7933325/tom-copeland"}, "reply_to_user": {"reputation": 2846, "user_id": 766388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ca37b51e58d87f42e900eee149d929b0?s=128&d=identicon&r=PG", "display_name": "jlstr", "link": "https://stackoverflow.com/users/766388/jlstr"}, "edited": false, "score": 1, "creation_date": 1505260349, "post_id": 46186722, "comment_id": 79336492, "body": "Yup usually I would make them foreign keys to preserve referential integrity, and of course you could make them nullable if needed."}, {"owner": {"reputation": 2846, "user_id": 766388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ca37b51e58d87f42e900eee149d929b0?s=128&d=identicon&r=PG", "display_name": "jlstr", "link": "https://stackoverflow.com/users/766388/jlstr"}, "edited": false, "score": 0, "creation_date": 1505260440, "post_id": 46186722, "comment_id": 79336508, "body": "Hey, If you don&#39;t mind, could you please post an example of how to make those columns foreign keys properly? Having a hard time finding an example myself. Thank you very much!"}, {"owner": {"reputation": 906, "user_id": 7933325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4181aecdacd635102e337da145eafe9?s=128&d=identicon&r=PG", "display_name": "Tom Copeland", "link": "https://stackoverflow.com/users/7933325/tom-copeland"}, "reply_to_user": {"reputation": 2846, "user_id": 766388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ca37b51e58d87f42e900eee149d929b0?s=128&d=identicon&r=PG", "display_name": "jlstr", "link": "https://stackoverflow.com/users/766388/jlstr"}, "edited": false, "score": 1, "creation_date": 1505261810, "post_id": 46186722, "comment_id": 79336754, "body": "You bet - in your <code>create_table</code> migration you can do <code>t.references :user_one, foreign_key: {to_table: :users}</code> and <code>t.references :user_two, foreign_key: {to_table: :users}</code>."}], "tags": [], "owner": {"reputation": 906, "user_id": 7933325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4181aecdacd635102e337da145eafe9?s=128&d=identicon&r=PG", "display_name": "Tom Copeland", "link": "https://stackoverflow.com/users/7933325/tom-copeland"}, "is_accepted": true, "score": 1, "last_activity_date": 1505259321, "creation_date": 1505259321, "answer_id": 46186722, "question_id": 46186214, "link": "https://stackoverflow.com/questions/46186214/rails-data-modelling-how-to-establish-relationships-when-2-objects-share-the/46186722#46186722", "title": "Rails Data Modelling: How to establish relationships when 2 Objects &quot;Share&quot; the same has_many list?", "body": "<p>If you have two user ids and want to query <code>Transaction</code> on some combination of them, you can use an <code>or</code> clause:</p>\n\n<pre><code>&gt;&gt; Transaction.where(user_one_id: 1).or(Transaction.where(user_two_id: 2))\n  Transaction Load (4.3ms)  SELECT  \"transactions\".* FROM \"transactions\" WHERE (\"transactions\".\"user_one_id\" = $1 OR \"transactions\".\"user_two_id\" = $2) LIMIT $3  [[\"user_one_id\", 1], [\"user_two_id\", 2], [\"LIMIT\", 11]]\n=&gt; #&lt;ActiveRecord::Relation [#&lt;Transaction id: 1, user_one_id: 1, user_two_id: 2, created_at: \"2017-09-12 23:25:39\", updated_at: \"2017-09-12 23:25:39\"&gt;]&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 89, "user_id": 7628232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eda2D.png?s=128&g=1", "display_name": "neo7", "link": "https://stackoverflow.com/users/7628232/neo7"}, "is_accepted": false, "score": 1, "last_activity_date": 1505273306, "creation_date": 1505273306, "answer_id": 46188385, "question_id": 46186214, "link": "https://stackoverflow.com/questions/46186214/rails-data-modelling-how-to-establish-relationships-when-2-objects-share-the/46188385#46188385", "title": "Rails Data Modelling: How to establish relationships when 2 Objects &quot;Share&quot; the same has_many list?", "body": "<p>this is sample code </p>\n\n<pre><code>class Transaction\n  def move\n    return \"\"\n  end\nend\n\nclass User1 &lt; Transaction\n  def move\n    return 'User1 move: X'\n  end\nend\n\n\nclass User2 &lt; Transaction\n  def move\n    return'User2 move: O'\n  end\nend\n\n\n\ntransactions = [User1.new, User2.new]\ntransactions.each {|tran|\n  print tran.move\n}\n</code></pre>\n"}], "owner": {"reputation": 2846, "user_id": 766388, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/ca37b51e58d87f42e900eee149d929b0?s=128&d=identicon&r=PG", "display_name": "jlstr", "link": "https://stackoverflow.com/users/766388/jlstr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 46186722, "answer_count": 3, "score": 0, "last_activity_date": 1505273306, "creation_date": 1505255273, "last_edit_date": 1505264807, "question_id": 46186214, "link": "https://stackoverflow.com/questions/46186214/rails-data-modelling-how-to-establish-relationships-when-2-objects-share-the", "title": "Rails Data Modelling: How to establish relationships when 2 Objects &quot;Share&quot; the same has_many list?", "body": "<p>In a nutshell, when I create a <code>Transaction</code> Record it has two <strong>foreign keys</strong>. for the two users that participate in a <code>Transaction</code>, ie: </p>\n\n<p><a href=\"https://i.stack.imgur.com/pJC0o.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pJC0o.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Now, What I would like to know with your kind help, is How do I establish the <strong>relationship(s)</strong> between: <code>User</code> and <code>Transaction</code> Models, so that I can easily retrieve ALL the <code>Transaction</code>s for either of the two <code>User</code>s.</p>\n\n<p>Something like:</p>\n\n<pre><code>  user_one = User.find(1)\n  user_two = User.find(2)\n\n  user_one.transactions # returns all Transactions where user_one.id == \n                        # user_one_id Or user_one.id == user_two_id\n\n  user_two.transactions # returns all Transactions where user_two.id == \n                        # user_one_id Or user_two.id == user_two_id\n</code></pre>\n\n<p>What's the best way to achieve this? Is it best to establish foreign keys in the Transaction Model in this case? Or is this a problem to be solved via <code>ActiveRecordQuery</code> only?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1505255713, "post_id": 46186039, "comment_id": 79335377, "body": "You can get the sum of all scores with <code>grade_hash.values.reduce(0) { |m, v| m + v.sum }</code> too."}], "answers": [{"comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 2, "creation_date": 1505254682, "post_id": 46186065, "comment_id": 79335085, "body": "it could probably use a <code>to_f</code> somewhere. If they&#39;re all integers then making the sum and size floats. Otherwise tack on a <code>.map(&amp;:to_f)</code> after flatten"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1505254691, "post_id": 46186065, "comment_id": 79335091, "body": "My pleasure. Use <code>to_f</code>if you want to be sure is not an integer division"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1505254781, "post_id": 46186065, "comment_id": 79335120, "body": "Yep Max, you&#39;re right, I was updating my answer at the same time of your comment :D"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 3, "creation_date": 1505254823, "post_id": 46186065, "comment_id": 79335136, "body": "Or you can use <code>fdiv</code>."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 3, "last_activity_date": 1505254636, "last_edit_date": 1505254636, "creation_date": 1505254347, "answer_id": 46186065, "question_id": 46186039, "link": "https://stackoverflow.com/questions/46186039/create-an-average-of-arrays-from-a-hash-in-ruby/46186065#46186065", "title": "Create an average of arrays from a hash in Ruby", "body": "<p>Try this one</p>\n\n<pre><code>def average(grade_hash)\n  grades = grade_hash.values.flatten\n  grades.sum / grades.size.to_f\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1505279361, "last_edit_date": 1505279361, "creation_date": 1505278850, "answer_id": 46189165, "question_id": 46186039, "link": "https://stackoverflow.com/questions/46186039/create-an-average-of-arrays-from-a-hash-in-ruby/46189165#46189165", "title": "Create an average of arrays from a hash in Ruby", "body": "<pre><code>def combined_average(grade_hash, *students)\n  raise ArgumentError, \"There must be at least one student\" if students.empty?\n  non_students = students - grade_hash.keys\n  raise ArgumentError, \"#{non_students} are not students\" if non_students.any?\n  arr = grade_hash.values_at(*students).flatten\n  arr.sum.fdiv(arr.size).round(1)\nend\n\ngrade_hash = {bill: [100, 95, 92], frank: [67, 73, 84], julie: [99, 99, 100] }\n\ncombined_average(grade_hash, :bill)                  #=&gt; 95.7\ncombined_average(grade_hash, :frank)                 #=&gt; 74.7\ncombined_average(grade_hash, :julie)                 #=&gt; 99.3\ncombined_average(grade_hash, :bill, :frank)          #=&gt; 85.2\ncombined_average(grade_hash, :bill, :frank, :julie)  #=&gt; 89.9\ncombined_average(grade_hash, :bill, :mimi, :freddie)\n  #=&gt;ArgumentError: [:mimi, :freddie] are not students...\ncombined_average(grade_hash)\n  #=&gt; ArgumentError: There must be at least one student...\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8387535, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7a5bf01841e0c98c4b78551014c18685?s=128&d=identicon&r=PG&f=1", "display_name": "user8387535", "link": "https://stackoverflow.com/users/8387535/user8387535"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1505279361, "creation_date": 1505254205, "question_id": 46186039, "link": "https://stackoverflow.com/questions/46186039/create-an-average-of-arrays-from-a-hash-in-ruby", "title": "Create an average of arrays from a hash in Ruby", "body": "<p>So I have a hash like the following:</p>\n\n<p>grade_hash = {bill: [100, 95, 92], frank: [67, 73, 84]}</p>\n\n<p>I'm trying to find the average for both Bill and Frank.</p>\n\n<p>I know that if I did something like:</p>\n\n<pre><code>def average (grade_hash)\ngrade_hash.transform_values{|num| num.reduce(:+)/num.size}\nend\n</code></pre>\n\n<p>I can then pull out either Bill or Franks average. </p>\n\n<p>How would I pull the average from all values (Bill and Frank's combined)? </p>\n\n<p>I've attempted to do a .each at the end to iterate over but that doesn't seem to work because I wouldn't want to really iterate I would just want to take the sum from each created array then find an average.</p>\n\n<p>Thoughts?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "models"], "comments": [{"owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "edited": false, "score": 0, "creation_date": 1505252192, "post_id": 46185337, "comment_id": 79334198, "body": "what&#39;s the relationship between List and Outfit? Not sure I understand &quot;if an outfit attribute &#39;name&#39; exists in a given list &quot;."}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 0, "last_activity_date": 1505252014, "last_edit_date": 1505252014, "creation_date": 1505250971, "answer_id": 46185434, "question_id": 46185337, "link": "https://stackoverflow.com/questions/46185337/rails-activerecord-chaining-associations-to-query-existence/46185434#46185434", "title": "Rails Activerecord - chaining associations to query existence", "body": "<p>As long as you have these associations on your models (<code>people</code> in <code>Outfit</code> model and <code>lists</code> in <code>Person</code> model) and I got what you are asking this one should work for me</p>\n\n<pre><code>Outfit.joins(people: :lists).exists?(lists: {id: your_list_id}, name: 'your_outfit_name')\n</code></pre>\n\n<p>and it's just one SQL query</p>\n\n<p>In alternative, you could just have</p>\n\n<pre><code>Outfit.joins(:lists).exists?(lists: {id: your_list_id}, name: 'your_outfit_name')\n</code></pre>\n\n<p>and an association like</p>\n\n<pre><code>has_many :lists, through: :people\n</code></pre>\n\n<p>This is the idea but I find hard try this kind of stuff</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8071606"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1505252014, "creation_date": 1505250512, "question_id": 46185337, "link": "https://stackoverflow.com/questions/46185337/rails-activerecord-chaining-associations-to-query-existence", "title": "Rails Activerecord - chaining associations to query existence", "body": "<p>Say I have the models Lists, People, Outfit.</p>\n\n<p>Lists have many people, people have many lists and one outfit. What is the most efficient way of checking if an outfit attribute 'name' exists in a given list with active-record? </p>\n\n<p>I would like this to return as a boolean if possible</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "parameters", "reform"], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 9093814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/051c21b17777206671abdde0e5070e59?s=128&d=identicon&r=PG&f=1", "display_name": "Timofey Lavnik", "link": "https://stackoverflow.com/users/9093814/timofey-lavnik"}, "is_accepted": false, "score": 2, "last_activity_date": 1513173125, "creation_date": 1513173125, "answer_id": 47794664, "question_id": 46185232, "link": "https://stackoverflow.com/questions/46185232/reform-access-parent-form-params-inside-of-nested-form-scope/47794664#47794664", "title": "Reform - Access parent form params inside of nested form scope", "body": "<p>So, basically what you really need here is to use Disposable::Twin::Parent feature.</p>\n\n<pre><code>require 'disposable/twin/parent'\n\nclass UserForm &lt; Reform::Form\n\n  feature Disposable::Twin::Parent\n\n  property :date_of_birth\n\n  property health_profile do\n    property :diagnosed_with_condition_at\n\n    validate :diagnosed_date\n\n    def diagnosed_date\n      self.parent.date_of_birth\n    end\n  end\nend\n</code></pre>\n\n<p>Also, you can read this topic: <a href=\"https://github.com/apotonick/disposable/issues/61\" rel=\"nofollow noreferrer\">https://github.com/apotonick/disposable/issues/61</a></p>\n"}], "owner": {"reputation": 3020, "user_id": 4493564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZrR5HKgzmQA/AAAAAAAAAAI/AAAAAAAAA2Y/YxH3F9m512U/photo.jpg?sz=128", "display_name": "Petr Gazarov", "link": "https://stackoverflow.com/users/4493564/petr-gazarov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1513173125, "creation_date": 1505249953, "question_id": 46185232, "link": "https://stackoverflow.com/questions/46185232/reform-access-parent-form-params-inside-of-nested-form-scope", "title": "Reform - Access parent form params inside of nested form scope", "body": "<p>I'm using <a href=\"https://github.com/trailblazer/reform\" rel=\"nofollow noreferrer\">Reform</a> 1.2.6 and have a nested form with validation</p>\n\n<p>Simplified:</p>\n\n<pre><code>class UserForm &lt; Reform::Form\n  property :date_of_birth\n\n  property health_profile do\n    property :diagnosed_with_condition_at\n\n    validate :diagnosed_date\n\n    def diagnosed_date\n      # need to get access to date_of_birth here\n      # validate that diagnosed_with_condition_at is after date of birth\n    end\n  end\nend\n</code></pre>\n\n<p>Params come in properly nested, I just need a way to get access to parent form inputs from the nested form. The problem is that nested form seems to only have access to its set of params, and not the whole params.</p>\n"}, {"tags": ["ruby", "testing", "rspec", "bdd"], "answers": [{"tags": [], "owner": {"reputation": 652, "user_id": 279927, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bed3a2e462368eb830f167eda3e0983c?s=128&d=identicon&r=PG", "display_name": "Mason", "link": "https://stackoverflow.com/users/279927/mason"}, "is_accepted": false, "score": 1, "last_activity_date": 1505250782, "creation_date": 1505250782, "answer_id": 46185395, "question_id": 46184939, "link": "https://stackoverflow.com/questions/46184939/testing-ruby-program-with-rspec/46185395#46185395", "title": "Testing ruby program with rspec", "body": "<p>First, you're going to want to split out the part of the code that you're actually going to test into a separate file, which puts the code into a class. You can then <code>require</code> that code in the file you're running, accept data from the input, and pass that data to it. At the same time, the spec file will <code>require</code> the file as well, and run specs against the methods in the class. Might look something like:</p>\n\n<p>rotator.rb:</p>\n\n<pre><code>class Rotator\n    def rotate(str, num)\n        #do stuff\n    end\nend\n</code></pre>\n\n<p>rotator_spec.rb</p>\n\n<pre><code>require_relative 'rotator'\ndescribe Rotator do\n    it 'rotates' do\n        expect(described_class.new.rotate('a', 'b')).to eq 'result'\n    end\nend\n</code></pre>\n\n<p>run.rb</p>\n\n<pre><code>require_relative 'rotator'\nrotator = Rotator.new\n#do input stuff\nputs rotator.rotate(inputText, inputKey)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 3, "last_activity_date": 1505251391, "creation_date": 1505251391, "answer_id": 46185526, "question_id": 46184939, "link": "https://stackoverflow.com/questions/46184939/testing-ruby-program-with-rspec/46185526#46185526", "title": "Testing ruby program with rspec", "body": "<p>First, let's refactor your code into its own class:</p>\n\n<p>caesar.rb</p>\n\n<pre><code>class Caesar\n  def self.rotate (str, num)\n    alphabet_low = ('a'..'z').to_a # Shorthand for alphabet creation, thanks Ruby!\n    alphabet_high = ('A'..'Z').to_a\n\n    second_step = str.tr(alphabet_low.join, alphabet_low.rotate(num).join)\n    second_step.tr(alphabet_high.join, alphabet_high.rotate(num).join)\n  end\nend\n</code></pre>\n\n<p>Next we need to install the rspec gem:</p>\n\n<pre><code>$ gem install rspec\n</code></pre>\n\n<p>Let's add a spec directory and create an rspec file in there:</p>\n\n<p>spec/caesar_spec.rb</p>\n\n<pre><code>require_relative '../caesar'\n\ndescribe Caesar do\n  describe '.rotate' do\n    context 'when number 0 is provided' do\n      let(:number) { 0 }\n\n      it 'returns the same text that is provided' do\n        string = 'Hello World'\n        expect(Caesar.rotate(string, number)).to eq('Hello World')\n      end\n    end\n\n    context 'when number 1 is provided' do\n      let(:number) { 1 }\n\n      it 'encrypts the given string by rotating it a single character' do\n        string = 'Hello World'\n        expect(Caesar.rotate(string, number)).to eq('Ifmmp Xpsme')\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Now from the command line inside your project folder, just run rspec:</p>\n\n<pre><code>$ rspec\n</code></pre>\n\n<p>Which should result in:</p>\n\n<pre><code>..\n\nFinished in 0.00222 seconds (files took 0.09387 seconds to load)\n2 examples, 0 failures\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 5067267, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-U6szUozDWlE/AAAAAAAAAAI/AAAAAAAAAGk/ig6y81gyqKI/photo.jpg?sz=128", "display_name": "Aleksandar Jeftic", "link": "https://stackoverflow.com/users/5067267/aleksandar-jeftic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 882, "favorite_count": 1, "accepted_answer_id": 46185526, "answer_count": 2, "score": 1, "last_activity_date": 1505251391, "creation_date": 1505248651, "question_id": 46184939, "link": "https://stackoverflow.com/questions/46184939/testing-ruby-program-with-rspec", "title": "Testing ruby program with rspec", "body": "<p>At this moment i am learning ruby ,and i want to learn how to develop apps using rspec and BDD, but i never done any kind of testing before. Its hard for me to think in write behavior->make it direction. I have found some simple beginners tutorials for rspec but not helpful so much in my case where i have built small program without classes. </p>\n\n<p>This is my code. Simple Cesar cipher rotational program. Fast brief...when user inputs ROT following with 0-26 and text for example \"ROT24 some text\" \nit checks if input is properly formated and within ranges ,and than rotates characters in text depending on that number after ROT word. Example ROT5 rotates characters for 5 spots in alphabetical order.</p>\n\n<pre><code>i=0\n#check input\n\nwhile true\n\nputs\n    if i&gt;0\n        puts \"Wrong Entry Please Try Again!\"\n\n        puts \"Input Decipher key in ROT0-ROT26 format and text to decipher using white space between. Example (ROT2 SomeText)\"\n        input=gets.chop\n\n    else\n        puts \"Input Decipher key in ROT0-ROT26 format and text to decipher using white space between. Example (ROT2 SomeText)\"\n        input=gets.chop\n        i+=1\n    end\n\n break if input.match(/\\AROT([0-9]|1[0-9]|2[0-6]) /) \n\nend\n\n\n\n#splitting input\ninputArray=input.split(\" \",2)\n\ninputFirstPart= inputArray[0]\n\ninputKey=inputFirstPart[3..4].to_i\n\ninputText= inputArray[1]\n\n#cipher method\ndef rotate (str,num)\n\n    alphabetLow = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\"]\n    alphabetUp = [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\"]\n    second_step=str.tr(alphabetLow.join,alphabetLow.rotate(num).join)\n    second_step.tr(alphabetUp.join,alphabetUp.rotate(num).join)\n\nend\n#output result \nprint \"Your result is: \"\nprint rotate(inputText,inputKey)\nputs\n</code></pre>\n\n<p>Can anyone (if have some spare time for this poor soul) write rspec test for this code so i can reverse engineer it? I have tried few things but most of all i am confused with user inputs, cos during test its asking me to actually do the input which makes no sense to me.</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["ruby", "fastlane"], "answers": [{"comments": [{"owner": {"reputation": 12573, "user_id": 467588, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/e1acd82738c729a10a86702e070ce8d5?s=128&d=identicon&r=PG", "display_name": "Hlung", "link": "https://stackoverflow.com/users/467588/hlung"}, "edited": false, "score": 0, "creation_date": 1565851955, "post_id": 46185312, "comment_id": 101479766, "body": "Can just use ``` lane :get_lane_name do    ARGV.first end``` ?"}], "tags": [], "owner": {"reputation": 3332, "user_id": 2299801, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c85c14e20d43ccfa008c9efebd40bf4d?s=128&d=identicon&r=PG", "display_name": "Wiingaard", "link": "https://stackoverflow.com/users/2299801/wiingaard"}, "is_accepted": true, "score": 4, "last_activity_date": 1505250379, "creation_date": 1505250379, "answer_id": 46185312, "question_id": 46184834, "link": "https://stackoverflow.com/questions/46184834/get-name-of-lane-in-fastfile/46185312#46185312", "title": "Get name of lane in Fastfile", "body": "<p>Nevermind, I think i got it. I made this nifty little lane:</p>\n\n<pre><code>lane :get_lane_name do \n    lanename = \"\"\n    ARGV.each do |a|\n            lanename = \"#{a}\"\n    end\n    lanename\nend\n</code></pre>\n\n<p>I use it like this:</p>\n\n<pre><code>build_type = (get_lane_name == \"beta\" ? \"Staging\" : \"Production\")\nputs build_type\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 351, "user_id": 8955292, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lIayjju02lQ/AAAAAAAAAAI/AAAAAAAAAEE/UhR5pHMCSwk/photo.jpg?sz=128", "display_name": "Hao Xu", "link": "https://stackoverflow.com/users/8955292/hao-xu"}, "is_accepted": false, "score": 3, "last_activity_date": 1575085469, "creation_date": 1575085469, "answer_id": 59113019, "question_id": 46184834, "link": "https://stackoverflow.com/questions/46184834/get-name-of-lane-in-fastfile/59113019#59113019", "title": "Get name of lane in Fastfile", "body": "<pre class=\"lang-rb prettyprint-override\"><code>ENV[\"FASTLANE_LANE_NAME\"] \n# or\nlane_context[SharedValues::LANE_NAME]  \n</code></pre>\n\n<p>ref: <a href=\"https://docs.fastlane.tools/advanced/lanes/#lane-properties\" rel=\"nofollow noreferrer\">https://docs.fastlane.tools/advanced/lanes/#lane-properties</a></p>\n"}], "owner": {"reputation": 3332, "user_id": 2299801, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c85c14e20d43ccfa008c9efebd40bf4d?s=128&d=identicon&r=PG", "display_name": "Wiingaard", "link": "https://stackoverflow.com/users/2299801/wiingaard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1015, "favorite_count": 0, "accepted_answer_id": 46185312, "answer_count": 2, "score": 1, "last_activity_date": 1575085469, "creation_date": 1505248102, "question_id": 46184834, "link": "https://stackoverflow.com/questions/46184834/get-name-of-lane-in-fastfile", "title": "Get name of lane in Fastfile", "body": "<p>I'm setting up a <code>Fastfile</code> for <code>fastlane</code>, and I'm trying to switch on the lane name that fastlane is beeing run with.</p>\n\n<p>Say I run <code>fastlane wow</code></p>\n\n<p>In this <code>Fastfile</code>, I want to get the name of the current lane that <code>fastlane</code>was called with, which is <code>\"wow\"</code>:</p>\n\n<pre><code>wowness = (lane[:lane-name] == \"wow\" ? \"Much wow\" : \"Not so wow\")\nputs wowness\n\nlane :wow do |options|\n    puts \"print something random\"\nend\n</code></pre>\n\n<p>As far as I understand the <code>fastlane</code> uses Ruby, so maybe this could be the way to go?</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-custom-resource"], "answers": [{"comments": [{"owner": {"reputation": 10095, "user_id": 1158977, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/B6Za7.png?s=128&g=1", "display_name": "Sam Hammamy", "link": "https://stackoverflow.com/users/1158977/sam-hammamy"}, "edited": false, "score": 0, "creation_date": 1505247263, "post_id": 46184537, "comment_id": 79332042, "body": "I just saw that I can define a variable in the docs <code>prefix = &#39;&#47;opt&#47;languages&#47;node&#39;</code> @ <a href=\"https://docs.chef.io/custom_resources.html\" rel=\"nofollow noreferrer\">docs.chef.io/custom_resources.html</a>"}, {"owner": {"reputation": 10095, "user_id": 1158977, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/B6Za7.png?s=128&g=1", "display_name": "Sam Hammamy", "link": "https://stackoverflow.com/users/1158977/sam-hammamy"}, "edited": false, "score": 0, "creation_date": 1505247313, "post_id": 46184537, "comment_id": 79332071, "body": "How can I make reusable functions in a resource?"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 10095, "user_id": 1158977, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/B6Za7.png?s=128&g=1", "display_name": "Sam Hammamy", "link": "https://stackoverflow.com/users/1158977/sam-hammamy"}, "edited": false, "score": 0, "creation_date": 1505259185, "post_id": 46184537, "comment_id": 79336189, "body": "To make functions available inside the action block, use the <code>action_class do ... end</code> helper. Any methods you define inside that block will be available from inside actions."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 2, "last_activity_date": 1505246706, "creation_date": 1505246706, "answer_id": 46184537, "question_id": 46184289, "link": "https://stackoverflow.com/questions/46184289/chef-custom-resources-mutable-property-or-an-alternative/46184537#46184537", "title": "Chef Custom Resources : mutable property or an alternative", "body": "<p>Mutating properties inside a custom resource is generally a bad idea (there are exceptions but this isn't one of them). Better would be to use a local variable. Related, you don't need to use a ruby_block like that when you're already in a custom resource's action:</p>\n\n<pre><code>action :create do\n  cw_logs = new_resource.cw_logs\n  if new_resource.get_iptables_info\n    cw_logs += [whatever extra stuff you want]\n  end\n\n  template \"my_template\" do\n    variables logstreams: cw_logs\n  end\nend\n</code></pre>\n\n<p>Notably that's using <code>+=</code> instead of push which doesn't mutate the original. If you used <code>push</code> you would want <code>cw_logs = new_resource.cw_logs.dup</code> or similar.</p>\n"}], "owner": {"reputation": 10095, "user_id": 1158977, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/B6Za7.png?s=128&g=1", "display_name": "Sam Hammamy", "link": "https://stackoverflow.com/users/1158977/sam-hammamy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 666, "favorite_count": 0, "accepted_answer_id": 46184537, "answer_count": 1, "score": 0, "last_activity_date": 1505246706, "creation_date": 1505245688, "question_id": 46184289, "link": "https://stackoverflow.com/questions/46184289/chef-custom-resources-mutable-property-or-an-alternative", "title": "Chef Custom Resources : mutable property or an alternative", "body": "<p>I read that as of <code>2016</code> OpsCode recommends against <code>LWRP</code> and the alternative <code>HWRP</code>.  They rather recommend to use <code>custom resources</code>.</p>\n\n<p>While this makes sense it leaves a lot to be desired in terms of leveraging ruby (unless I've misunderstood?)</p>\n\n<p>I would like to be able to modify an array based on some boolean properties.  I can then use that array to pass to the template, as in:</p>\n\n<pre><code>property :get_iptables_info, [TrueClass, FalseClass], default: false\nproperty :get_pkglist, [TrueClass, FalseClass], default: false\nproperty :cw_logs, Array, default: [], required: false\n\naction :create do\n\n  ruby_block 'cw_iptables' do\n    block do\n      new_resource.cw_logs.push({ \"#{new_resource.custom_dir}/iptables/iptables.txt\" =&gt; { \"log_group_name\" =&gt; new_resource.log_group_name+\"/iptables\"}})\n    end\n    action :run\n    only_if {new_resource.get_iptables_info}\n  end\n\n  template \"my_template\" do\n    variables ({:logstreams =&gt; cw_logs})\n  end\n\nend\n</code></pre>\n\n<p>Then in my template:</p>\n\n<pre><code>&lt;% @logstreams.each_pair do |path, _object| %&gt;\n[\"#{path}\"]\nlog_group_name = _object[\"log_group_name\"]\n&lt;% end %&gt;\n</code></pre>\n\n<p>The problem is that properties are <code>immutable</code>.  So I get the error:</p>\n\n<pre><code>RuntimeError\n------------\nruby_block[cw_iptables] (/tmp/kitchen/cache/cookbooks/custom_cw/resources/logs.rb line 43) had an error: RuntimeError: can't modify frozen Array\n</code></pre>\n\n<p>What's the correct way to do this?  What's the correct way to write ruby code within the resource so that it's more modular and uses <code>methods/functions</code>?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1505245973, "post_id": 46184252, "comment_id": 79331486, "body": "<code>puts grade_hash[:bill][1]</code> prints <code>95</code>, because <code>arr = grade_hash[:bill] #=&gt; [100, 95, 92]</code> and <code>arr[1] #=&gt; 95</code> (assuming <code>assign_number</code> is zero-based)."}], "answers": [{"tags": [], "owner": {"reputation": 27630, "user_id": 1550807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JgCw5.png?s=128&g=1", "display_name": "Danil Speransky", "link": "https://stackoverflow.com/users/1550807/danil-speransky"}, "is_accepted": true, "score": 0, "last_activity_date": 1505246745, "last_edit_date": 1505246745, "creation_date": 1505245926, "answer_id": 46184344, "question_id": 46184252, "link": "https://stackoverflow.com/questions/46184252/trying-to-find-a-students-grade-by-assignment-number-in-ruby/46184344#46184344", "title": "Trying to find a student&#39;s grade by assignment number in Ruby", "body": "<p>Try this:</p>\n\n<pre><code>def scores(grade_hash, student, assign_number)\n  grade_hash[student][assign_number - 1]\nend\n\nputs scores(data, :bill, 2) #=&gt; 95\n</code></pre>\n\n<p>Some explanation:</p>\n\n<pre><code>{bill: [100, 95, 92], frank: [67, 73, 84]}[:bill] #=&gt; [100, 95, 92]\n[100, 95, 92][1] #=&gt; 95\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 0, "last_activity_date": 1505250975, "creation_date": 1505250975, "answer_id": 46185436, "question_id": 46184252, "link": "https://stackoverflow.com/questions/46184252/trying-to-find-a-students-grade-by-assignment-number-in-ruby/46185436#46185436", "title": "Trying to find a student&#39;s grade by assignment number in Ruby", "body": "<p>In newer versions of ruby (2.3+), you can use the <code>dig</code> method of <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-dig\" rel=\"nofollow noreferrer\">Array</a> and <a href=\"http://ruby-doc.org/core-2.3.0/Hash.html#method-i-dig\" rel=\"nofollow noreferrer\">Hash</a> without needing a custom method for this, though the index you pass in still needs to be 0-based:</p>\n\n<pre><code>data.dig(:bill, 2) # =&gt; 92\ndata.dig(:bill, 1) # =&gt; 95\ndata.dig(:bill, 5) # =&gt; nil -- they haven't taken 6 tests, yet\ndata.dig(:john, 1) # =&gt; nil -- there is no student 'john'\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8387535, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7a5bf01841e0c98c4b78551014c18685?s=128&d=identicon&r=PG&f=1", "display_name": "user8387535", "link": "https://stackoverflow.com/users/8387535/user8387535"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 46184344, "answer_count": 2, "score": -1, "last_activity_date": 1505250975, "creation_date": 1505245537, "last_edit_date": 1505246135, "question_id": 46184252, "link": "https://stackoverflow.com/questions/46184252/trying-to-find-a-students-grade-by-assignment-number-in-ruby", "title": "Trying to find a student&#39;s grade by assignment number in Ruby", "body": "<p>So I have a hash like the following:</p>\n\n<pre><code>data = {bill: [100, 95, 92], frank: [67, 73, 84]}\n</code></pre>\n\n<p>I'm trying to build it out so that it would do 95 if I put in :bill, 2.</p>\n\n<p>I'm getting really caught up in the iteration. </p>\n\n<p>I have, which hasn't worked:</p>\n\n<pre><code> def scores (grade_hash, student, assign_number)\n   grade_hash.map.with_index {|i, x|  puts x-i}\n end\n</code></pre>\n\n<p>Clearly I'm a novice at Ruby. Any suggestions?</p>\n"}, {"tags": ["ruby", "temperature"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1505245665, "post_id": 46184227, "comment_id": 79331332, "body": "It&#39;s helpful to include the error you&#39;re getting."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 1, "creation_date": 1505245898, "post_id": 46184227, "comment_id": 79331446, "body": "I don&#39;t think Ruby (or any other common developer toolchain) uses secret errors (<i>Psst! You have an error, but I won&#39;t tell you what it is. Pass it on!</i>). You clearly got an error message, or you wouldn&#39;t know you had an error. That message is on the screen, right in front of you. There is absolutely no reason for you to fail to include that error message in your question here. You&#39;re asking for <i>free help</i> to solve <i>your problem</i>. The very least you should do is give us the relevant details that are right on the screen in front of you to use to help."}, {"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 0, "creation_date": 1505246111, "post_id": 46184227, "comment_id": 79331543, "body": "Just at a <i>glance</i>, it looks like you&#39;re dividing two ints together.  You need one of those to be a float so you get 1.8 * c."}, {"owner": {"reputation": 7, "user_id": 8599670, "user_type": "registered", "profile_image": "https://graph.facebook.com/10159410411840217/picture?type=large", "display_name": "Moh Reza KH", "link": "https://stackoverflow.com/users/8599670/moh-reza-kh"}, "edited": false, "score": 0, "creation_date": 1505246243, "post_id": 46184227, "comment_id": 79331600, "body": "Sorry , I forgot the error :"}, {"owner": {"reputation": 7, "user_id": 8599670, "user_type": "registered", "profile_image": "https://graph.facebook.com/10159410411840217/picture?type=large", "display_name": "Moh Reza KH", "link": "https://stackoverflow.com/users/8599670/moh-reza-kh"}, "edited": false, "score": 0, "creation_date": 1505246261, "post_id": 46184227, "comment_id": 79331610, "body": "This is the error :challenge.rb:12:in <code>&lt;main&gt;&#39;: undefined local variable or method </code>f&#39; for main:Object (NameError)"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1505246551, "post_id": 46184227, "comment_id": 79331737, "body": "Rather than post your error message in the comments, edit your question with it. Thanks"}, {"owner": {"reputation": 7, "user_id": 8599670, "user_type": "registered", "profile_image": "https://graph.facebook.com/10159410411840217/picture?type=large", "display_name": "Moh Reza KH", "link": "https://stackoverflow.com/users/8599670/moh-reza-kh"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1505247514, "post_id": 46184227, "comment_id": 79332170, "body": "@sagarpandya82 sorry , I am new to whole coding and using this website :) i will keep in mind for future !"}], "answers": [{"comments": [{"owner": {"reputation": 27630, "user_id": 1550807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JgCw5.png?s=128&g=1", "display_name": "Danil Speransky", "link": "https://stackoverflow.com/users/1550807/danil-speransky"}, "edited": false, "score": 0, "creation_date": 1506079962, "post_id": 46184446, "comment_id": 79686584, "body": "@MohRezaKH Don&#39;t forget to accept an answer, there is a sign <code>V</code> under the answer&#39;s score."}], "tags": [], "owner": {"reputation": 27630, "user_id": 1550807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JgCw5.png?s=128&g=1", "display_name": "Danil Speransky", "link": "https://stackoverflow.com/users/1550807/danil-speransky"}, "is_accepted": false, "score": 3, "last_activity_date": 1505246683, "last_edit_date": 1505246683, "creation_date": 1505246330, "answer_id": 46184446, "question_id": 46184227, "link": "https://stackoverflow.com/questions/46184227/celsius-to-fahrenheit-conversion/46184446#46184446", "title": "Celsius to Fahrenheit conversion?", "body": "<p>You have several problems:</p>\n\n<ol>\n<li>convert <code>c</code> to <code>Float</code></li>\n<li>change signature of <code>celsius_fahrenheit</code> to use <code>c</code> as a parameter</li>\n<li>don't do an assignment in the method's body</li>\n</ol>\n\n<p>Here is the code:</p>\n\n<pre><code>def celsius_fahrenheit(c)\n  c * 9 / 5 + 32\nend\n\nputs 'Enter C:'\nc = gets.to_f\nputs celsius_fahrenheit(c)\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 8599670, "user_type": "registered", "profile_image": "https://graph.facebook.com/10159410411840217/picture?type=large", "display_name": "Moh Reza KH", "link": "https://stackoverflow.com/users/8599670/moh-reza-kh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1662, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1505248650, "creation_date": 1505245447, "last_edit_date": 1505248650, "question_id": 46184227, "link": "https://stackoverflow.com/questions/46184227/celsius-to-fahrenheit-conversion", "title": "Celsius to Fahrenheit conversion?", "body": "<p>I wrote the following code in Ruby for Celsius to Fahrenheit conversion. I keep getting error. I am sure that I am still not clear on the concept of methods and that's why I cant figure it out.</p>\n\n<pre><code>puts \"Enter the Degree in c:\"\nc = gets.chomp\n\ndef celsius_fahrenheit (f) \n  return f = ( c * 9 / 5) + 32\nend\n\nanswer = \"The #{celsius_fahrenheit (f)} equivalent is\"\nputs answer\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 27630, "user_id": 1550807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JgCw5.png?s=128&g=1", "display_name": "Danil Speransky", "link": "https://stackoverflow.com/users/1550807/danil-speransky"}, "is_accepted": true, "score": 1, "last_activity_date": 1505247123, "last_edit_date": 1505247123, "creation_date": 1505244688, "answer_id": 46184050, "question_id": 46183895, "link": "https://stackoverflow.com/questions/46183895/dsl-class-initialization-having-issues-with-number-of-arguments-using-instance-e/46184050#46184050", "title": "DSL class initialization having issues with number of arguments using instance_eval or block.call", "body": "<p>You don't have <code>description(arg)</code>, only a getter <code>description()</code> and a setter <code>description=(arg)</code>. And so when you do <code>description 'my test description'</code> it calls the getter with an argument it doesn't expect and you get <code>wrong number of arguments (given 1, expected 0)</code>.</p>\n\n<p>In the tutorial they don't use <code>attr_accessor</code>, but regular methods.</p>\n\n<p>You could use <code>description=</code> or change your code:</p>\n\n<pre><code>module PPEKit\n  module Tests\n    def add_test(id, &amp;block)\n      @tests ||= {}\n      @tests[id] = Test.new(id, &amp;block)\n    end\n\n    class Test\n      def initialize(id, &amp;block)\n        @id = id\n        @description = nil\n        block.arity &lt; 1 ? instance_eval(&amp;block) : block.call(self)\n      end\n\n      def description(description)\n        @description = description\n      end\n    end\n  end\nend\n\ninclude PPEKit::Tests\n\nadd_test :create_article do\n  description 'creating article'\nend\n\nadd_test :delete_article do |t|\n  t.description 'deleting article'\nend\n\nputs @tests\n# {:create_article=&gt;#&lt;Test:0x00000000d91ac0 @id=:create_article, @description=\"creating article\"&gt;,\n#  :delete_article=&gt;#&lt;Test:0x00000000d919d0 @id=:delete_article, @description=\"deleting article\"&gt;}\n</code></pre>\n"}], "owner": {"reputation": 737, "user_id": 8511822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/h9Xmn.png?s=128&g=1", "display_name": "rchitect-of-info", "link": "https://stackoverflow.com/users/8511822/rchitect-of-info"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 46184050, "answer_count": 1, "score": 0, "last_activity_date": 1505247123, "creation_date": 1505243968, "question_id": 46183895, "link": "https://stackoverflow.com/questions/46183895/dsl-class-initialization-having-issues-with-number-of-arguments-using-instance-e", "title": "DSL class initialization having issues with number of arguments using instance_eval or block.call", "body": "<p>I am writing a DSL based on a <a href=\"https://ilyabylich.svbtle.com/what-is-ruby-dsl\" rel=\"nofollow noreferrer\">pattern</a> I have successfully used in the past.  I thought this would work out of the box but I am getting an error that I just can't figure out, so any help is appreciated.</p>\n\n<p>Here is the method to add a test:</p>\n\n<pre><code>module PPEKit\n  module Tests\n    def add_test(id, &amp;block)\n      @_tests ||= {}\n      @_tests[id] = Test.new(id, &amp;block) unless @_tests.include? id\n    end\n  end\nend\n</code></pre>\n\n<p>Here is the Test class definition:</p>\n\n<pre><code>  module Tests\n    class Test\n      attr_accessor :id, :description, :conditions, :platforms\n\n      def initialize(id, &amp;block)\n        @id = id\n        (block.arity &lt; 1 ? (instance_eval(&amp;block)) : block.call(self)) if block_given? # ERROR occurs here\n      end\n    end\n  end\n</code></pre>\n\n<p>The Tests module is included in a PPEKit::Product class as so:</p>\n\n<pre><code>module PPEKit\n  class Product\n    include Tests\n</code></pre>\n\n<p>I am not showing method_missing because the error I am getting happens during the instance_eval call.  I have tried initializing the Test object using both types of block arity with the same result:</p>\n\n<pre><code>    add_test :my_test_id do\n      description 'my test description'\n      conditions  [:minvdd, :maxvdd, :bin1_1300Mhz, :bin2_1200Mhz]\n      platforms   [:v93k, :j750]\n      meta1       'dkwew'\n      meta2       'jkjejkf'\n    end\n\n    add_test :my_test_id do |t|\n      t.description 'my test description'\n      t.conditions  [:minvdd, :maxvdd, :bin1_1300Mhz, :bin2_1200Mhz]\n      t.platforms   [:v93k, :j750]\n      t.meta1       'dkwew'\n      t.meta2       'jkjejkf'\n    end\n</code></pre>\n\n<p>Both of the definitions above give the following error:</p>\n\n<pre><code>    COMPLETE CALL STACK\n    -------------------\n    wrong number of arguments (given 1, expected 0)\n    /users/user/origen/ppekit/lib/ppekit/test_list.rb:6:in `block in instantiate_tests'\n</code></pre>\n\n<p>Here is a peek at the Test class in pry right before calling instance_eval:</p>\n\n<pre><code>    [1] pry(#&lt;PPEKit::Tests::Test&gt;)&gt; id\n    =&gt; :my_test_id\n    [2] pry(#&lt;PPEKit::Tests::Test&gt;)&gt; self\n    =&gt; #&lt;PPEKit::Tests::Test:0x002b42673ab158&gt;\n    [3] pry(#&lt;PPEKit::Tests::Test&gt;)&gt; cd self\n    [4] pry(#&lt;PPEKit::Tests::Test&gt;)&gt; block.arity\n    =&gt; 0\n    [5] pry(#&lt;PPEKit::Tests::Test&gt;)&gt; block\n    =&gt; #       &lt;Proc:0x002ab7aff4cab8@/users/user/origen/ppekit/lib/ppekit/test_list.rb:5&gt;\n    [6] pry(#&lt;PPEKit::Tests::Test&gt;):1&gt; ls\n    PPEKit::Tests::Test#methods:\n      conditions  conditions=  description  description=  id  id=  method_missing  platforms  platforms=\n    self.methods: __pry__\n    locals: _  __  _dir_  _ex_  _file_  _in_  _out_  _pry_\n</code></pre>\n\n<p>Again, thanks in advance.</p>\n\n<p>regards</p>\n"}, {"tags": ["ruby", "cron", "ruby-on-rails-5", "whenever", "logfile"], "answers": [{"comments": [{"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1505248547, "post_id": 46184498, "comment_id": 79332607, "body": "Yeah but you&#39;re hard-coding &quot;~/Desktop/z.error.log&quot; and that directory structure is not present in all my environments.  So my question remains, I set the output as you see in my quesiton, so where will those files be generated?"}, {"owner": {"reputation": 199, "user_id": 7853452, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-spCZZ8oWRRU/AAAAAAAAAAI/AAAAAAAAAiQ/BiYJ549C63A/photo.jpg?sz=128", "display_name": "Dori Aviram", "link": "https://stackoverflow.com/users/7853452/dori-aviram"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1505328929, "post_id": 46184498, "comment_id": 79373053, "body": "You can just use the rails.env to set the path or any configuration instead"}], "tags": [], "owner": {"reputation": 199, "user_id": 7853452, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-spCZZ8oWRRU/AAAAAAAAAAI/AAAAAAAAAiQ/BiYJ549C63A/photo.jpg?sz=128", "display_name": "Dori Aviram", "link": "https://stackoverflow.com/users/7853452/dori-aviram"}, "is_accepted": false, "score": 0, "last_activity_date": 1505246529, "creation_date": 1505246529, "answer_id": 46184498, "question_id": 46183746, "link": "https://stackoverflow.com/questions/46183746/where-do-i-find-my-whenever-log-files/46184498#46184498", "title": "Where do I find my whenever log files?", "body": "<p>In your schedule.rb file you can specify the redirection options for your commands at a global or command level by setting the 'output' variable. This example is global level:</p>\n\n<pre><code>  # adds \"&gt;&gt; /path/to/file.log 2&gt;&amp;1\" to all commands\n  set :output, '/path/to/file.log'\n</code></pre>\n\n<p>and you should put this global level set :output above your job definition, otherwise it wouldn't work\nExample:</p>\n\n<pre><code># This works\nset :output, {:error =&gt; '~/Desktop/z.error.log', :standard =&gt; '~/Desktop/z.standard.log'}\n\nevery 1.minute do\n  command \"python ~/Desktop/whe/config/z.py\"\nend\n</code></pre>\n\n<p>Taken from: <a href=\"https://github.com/javan/whenever/wiki/Output-redirection-aka-logging-your-cron-jobs\" rel=\"nofollow noreferrer\">https://github.com/javan/whenever/wiki/Output-redirection-aka-logging-your-cron-jobs</a></p>\n"}, {"tags": [], "owner": {"reputation": 64, "user_id": 3825498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/E4Vwn.png?s=128&g=1", "display_name": "LiKaZ", "link": "https://stackoverflow.com/users/3825498/likaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1617024203, "creation_date": 1617024203, "answer_id": 66855028, "question_id": 46183746, "link": "https://stackoverflow.com/questions/46183746/where-do-i-find-my-whenever-log-files/66855028#66855028", "title": "Where do I find my whenever log files?", "body": "<p>According to whenever documentation\n<a href=\"https://github.com/javan/whenever/wiki/Output-redirection-aka-logging-your-cron-jobs\" rel=\"nofollow noreferrer\">https://github.com/javan/whenever/wiki/Output-redirection-aka-logging-your-cron-jobs</a></p>\n<p>you can define output like this with Rails :</p>\n<pre><code>set :output, &quot;#{path}/log/cron.log&quot;\n</code></pre>\n<p>So for your exemple you can do :</p>\n<pre><code>every 10.minutes do\n  rake &quot;events:calc_index&quot;, output: {error: &quot;#{path}/log/error.log&quot;, standard: &quot;#{path}/log/cron.log&quot;}\nend\n</code></pre>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2683, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1617024203, "creation_date": 1505243324, "question_id": 46183746, "link": "https://stackoverflow.com/questions/46183746/where-do-i-find-my-whenever-log-files", "title": "Where do I find my whenever log files?", "body": "<p>I'm using the whenever gem for Rails 5.  I'm trying to troubleshoot an issue, and after my default schedule.rb file was created at config/schedule.rb, I added some logging directives</p>\n\n<pre><code># Learn more: http://github.com/javan/whenever\nset :environment, \"development\"\n\nevery 10.minutes do\n  rake \"events:calc_index\", :output =&gt; {:error =&gt; 'error.log', :standard =&gt; 'cron.log'}\nend\n</code></pre>\n\n<p>I restarted my Rails server (not sure if that matters or not) but I don't see these log files created anywhere.  I have verified my crontab was set up by running \"crontab -e\" and seeing the job</p>\n\n<pre><code>0,10,20,30,40,50 * * * * /bin/bash -l -c 'cd /Users/davea/Documents/workspace/newproj &amp;&amp; RAILS_ENV=development bundle exec rake events:calc_index '\n</code></pre>\n\n<p>Where are the log files created?</p>\n"}, {"tags": ["ruby", "math"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 4, "creation_date": 1505244120, "post_id": 46183497, "comment_id": 79330604, "body": "You question title asks one question and your body asks us to solve a &quot;Homework problem&quot;. What part of this code do you not understand?"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 8586309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70be10c6ba9676853d9ea817811cdaeb?s=128&d=identicon&r=PG&f=1", "display_name": "j.doe", "link": "https://stackoverflow.com/users/8586309/j-doe"}, "edited": false, "score": 0, "creation_date": 1505244597, "post_id": 46183964, "comment_id": 79330823, "body": "ah thats what i didnt understand why the number would become number / i  thankyou"}, {"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 3, "creation_date": 1505247484, "post_id": 46183964, "comment_id": 79332156, "body": "On this site, show your appreciation by upvoting all the useful answers. You do that by clicking the up-arrow at the top-left of the answer, if you have enough reputation to do so. In addition, accept the best answer (if it actually answers your question) by clicking the checkmark near the top-left of the answer. That is better than saying thanks in a comment. It also helps others to see that your question was answered."}], "tags": [], "owner": {"reputation": 632, "user_id": 8533290, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/58c74449d366d5ff3a834241419ad346?s=128&d=identicon&r=PG&f=1", "display_name": "Hennich", "link": "https://stackoverflow.com/users/8533290/hennich"}, "is_accepted": false, "score": 1, "last_activity_date": 1505244300, "creation_date": 1505244300, "answer_id": 46183964, "question_id": 46183497, "link": "https://stackoverflow.com/questions/46183497/can-someone-explain-this-solution/46183964#46183964", "title": "Can someone explain this solution?", "body": "<p>The while-loop always looks for the smallest divisor of <code>number</code> (except 1).\nIf we find one, we store it, divide <code>number</code> and start anew.</p>\n\n<p>Since we take the <em>smallest</em> divisor, this always stores a prime.</p>\n\n<p>The loop can only end, if <code>number == 1</code>, which means we have divided by every factor.\nAnd the last factor, that remained had to be the largest.</p>\n"}], "owner": {"reputation": 15, "user_id": 8586309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70be10c6ba9676853d9ea817811cdaeb?s=128&d=identicon&r=PG&f=1", "display_name": "j.doe", "link": "https://stackoverflow.com/users/8586309/j-doe"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "closed_date": 1505269767, "answer_count": 1, "score": -3, "last_activity_date": 1505244300, "creation_date": 1505242147, "last_edit_date": 1505244148, "question_id": 46183497, "link": "https://stackoverflow.com/questions/46183497/can-someone-explain-this-solution", "closed_reason": "Needs more focus", "title": "Can someone explain this solution?", "body": "<p>The prime factors of <code>13195</code> are <code>5</code>, <code>7</code>, <code>13</code> and <code>29</code>.\nWhat is the largest prime factor of the number <code>600851475143</code> ?</p>\n\n<pre><code>def largest_prime(number)\n  i = 2\n  largest_divisor = 0\n  while i &lt; number\n    if number % i == 0\n      largest_divisor = i\n      number = number / i\n      i = 2\n    else\n      i += 1\n    end\n  end\n  number\nend\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "phpmyadmin"], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 2, "last_activity_date": 1505242077, "last_edit_date": 1505242077, "creation_date": 1505241856, "answer_id": 46183419, "question_id": 46183398, "link": "https://stackoverflow.com/questions/46183398/ruby-on-rails-sql-query-in-view/46183419#46183419", "title": "Ruby on Rails SQL Query in view", "body": "<p>Remove the <code>=</code> on your <code>book.each</code> iteration:</p>\n\n<pre><code>&lt;% @books.each_slice(4) do |book| %&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;% book.each do |book| %&gt;\n      ...\n</code></pre>\n\n<p><code>&lt;% ... %&gt;</code> just evaluated, not printed.</p>\n\n<p><code>&lt;%= ... %&gt;</code> evaluated and printed.</p>\n"}], "owner": {"reputation": 217, "user_id": 6516766, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-3YO6o7pjF2g/AAAAAAAAAAI/AAAAAAAAABk/AAmXIEkxp9Q/photo.jpg?sz=128", "display_name": "Leandro Gabrielli", "link": "https://stackoverflow.com/users/6516766/leandro-gabrielli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 46183419, "answer_count": 1, "score": 1, "last_activity_date": 1505242077, "creation_date": 1505241773, "question_id": 46183398, "link": "https://stackoverflow.com/questions/46183398/ruby-on-rails-sql-query-in-view", "title": "Ruby on Rails SQL Query in view", "body": "<p>I am working in a Rails Project and my problem is that for some reason the home view shows the SQL Query next to the book image. \nHere is the HTML code that shows the index view</p>\n\n<pre><code>&lt;div id=\"books-index\"&gt;\n  &lt;% @books.each_slice(4) do |book| %&gt;\n      &lt;div class=\"row\"&gt;\n        &lt;%= book.each do |book| %&gt;\n            &lt;div class=\"col-md-3 col-sm-3\"&gt;\n            &lt;h3&gt;&lt;%= book.title %&gt;&lt;/h3&gt;\n            &lt;%= image_tag(book.coverpath) %&gt;\n            &lt;%= link_to 'Read More', book_path(book), class:\"btn btn-primary\" %&gt;\n            &lt;/div&gt;\n        &lt;% end %&gt;\n      &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>and the books controller</p>\n\n<pre><code>class BooksController &lt; ApplicationController\n  def new\n    @page_title = 'Add Book'\n    @book = Book.new\n    @category = Category.new\n    @author = Author.new\n    @publisher = Publisher.new\n  end\n\n  def create\n    @book = Book.new(book_params)\n    if @book.save\n      flash[:notice] = \"Book Created\"\n      redirect_to books_path\n    else\n      render 'new'\n    end\n  end\n\n  def index\n    @books = Book.all\n  end\n\n  private\n    def book_params\n      params.require(:book).permit(:title, :category_id, :author_id, :publisher_id, :isbn, :price, :buy, :format, :excerpt, :pages, :year, :coverpath)\n  end\nend\n</code></pre>\n\n<p>Thanks a lot for your help</p>\n"}, {"tags": ["ruby", "variables", "chef-infra"], "answers": [{"comments": [{"owner": {"reputation": 13699, "user_id": 18995, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8b7949efc26b4528e662555b02ae73d4?s=128&d=identicon&r=PG", "display_name": "Paul Croarkin", "link": "https://stackoverflow.com/users/18995/paul-croarkin"}, "edited": false, "score": 0, "creation_date": 1505245129, "post_id": 46184124, "comment_id": 79331078, "body": "What makes it a constant? Camel-casing the variable?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 13699, "user_id": 18995, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8b7949efc26b4528e662555b02ae73d4?s=128&d=identicon&r=PG", "display_name": "Paul Croarkin", "link": "https://stackoverflow.com/users/18995/paul-croarkin"}, "edited": false, "score": 1, "creation_date": 1505245336, "post_id": 46184124, "comment_id": 79331174, "body": "It&#39;s not camel case, it&#39;s the fact that it starts with a capital letter. Classes and modules are also constants, that&#39;s why they start with capitals too e.g. <code>class Foo; Bar = 1; end</code> defines <code>Foo::Bar</code>"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1505246374, "post_id": 46184124, "comment_id": 79331666, "body": "This is not relevant to Chef, please remove it."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1505247559, "post_id": 46184124, "comment_id": 79332187, "body": "@coderanger who are you speaking to? and what should be removed?"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1505259054, "post_id": 46184124, "comment_id": 79336165, "body": "This answer is general, it&#39;s correct from a general Rubyist PoV but Chef has some specific restrictions that make it more complex :-)"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1505259275, "post_id": 46184124, "comment_id": 79336212, "body": "@coderanger like what? Why specifically would this not work?"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1505259723, "post_id": 46184124, "comment_id": 79336333, "body": "So one is that <code>require</code> doesn&#39;t work at all in that context in a useful way because attribute files run as an <code>instance_eval</code> against one of Chef&#39;s main data objects (the node) while recipes eval against unique <code>Chef::Recipe</code> objects. Creating consts would result in nested names because of that, which most users wouldn&#39;t expect or understand. Your answer is correct from a plain Ruby top-level context but as I said, Chef is not like that."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1505245024, "creation_date": 1505245024, "answer_id": 46184124, "question_id": 46183176, "link": "https://stackoverflow.com/questions/46183176/make-dynamic-variable-available-to-multiple-chef-recipes/46184124#46184124", "title": "Make Dynamic Variable Available to Multiple Chef Recipes", "body": "<p>If you're requiring from a separate file (e.g. require_relative) you need to make the variable something that gets exported. You can try making it a constant instead e.g. <code>AppDir =</code>, or a method. Local variables are not loaded with require.</p>\n"}, {"comments": [{"owner": {"reputation": 13699, "user_id": 18995, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8b7949efc26b4528e662555b02ae73d4?s=128&d=identicon&r=PG", "display_name": "Paul Croarkin", "link": "https://stackoverflow.com/users/18995/paul-croarkin"}, "edited": false, "score": 0, "creation_date": 1505247043, "post_id": 46184489, "comment_id": 79331941, "body": "I think that you are right about the amount of effort - I&#39;ve spent too much time and need to get back to the more important parts of the cookbook / recipes. If you have a link to something that is already written about helper methods I&#39;d be interested in reading it later when I&#39;ve gotten this all worked out. I really appreciate your help."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 13699, "user_id": 18995, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8b7949efc26b4528e662555b02ae73d4?s=128&d=identicon&r=PG", "display_name": "Paul Croarkin", "link": "https://stackoverflow.com/users/18995/paul-croarkin"}, "edited": false, "score": 0, "creation_date": 1505259115, "post_id": 46184489, "comment_id": 79336185, "body": "I&#39;ve been meaning to write one, but haven&#39;t gotten to it yet. Modifying the DSL with new global methods is unfortunately very tricky. I do have a prototype project called poise-dsl to try and simplify it, but I&#39;m not sure it would help in this case."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1505246487, "creation_date": 1505246487, "answer_id": 46184489, "question_id": 46183176, "link": "https://stackoverflow.com/questions/46183176/make-dynamic-variable-available-to-multiple-chef-recipes/46184489#46184489", "title": "Make Dynamic Variable Available to Multiple Chef Recipes", "body": "<p>There isn't really a good way to do this in Chef. Recipe and attributes files run in very different contexts so your best bet is either copy-pasta the boiler plate (if it really is as small as your example, do that) or otherwise maybe a global helper method but those are hard to write safely. Ping me on Slack and we can talk about the right kind of helper method for your exact situation (covering all of them isn't really practical for an SO answer).</p>\n"}, {"comments": [{"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1505260412, "post_id": 46186831, "comment_id": 79336504, "body": "As mentioned in my answer, doing this in a way that works with attribute files is very tricky."}, {"owner": {"reputation": 3420, "user_id": 1824868, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9b06898ce25659bc5600453c3f21c991?s=128&d=identicon&r=PG", "display_name": "jayhendren", "link": "https://stackoverflow.com/users/1824868/jayhendren"}, "reply_to_user": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1505260492, "post_id": 46186831, "comment_id": 79336522, "body": "@coderanger Yes, that&#39;s true, but from my reading of OP&#39;s question, it looks like they just want this code available to their recipe files, not their attributes files."}], "tags": [], "owner": {"reputation": 3420, "user_id": 1824868, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9b06898ce25659bc5600453c3f21c991?s=128&d=identicon&r=PG", "display_name": "jayhendren", "link": "https://stackoverflow.com/users/1824868/jayhendren"}, "is_accepted": false, "score": 0, "last_activity_date": 1505260232, "creation_date": 1505260232, "answer_id": 46186831, "question_id": 46183176, "link": "https://stackoverflow.com/questions/46183176/make-dynamic-variable-available-to-multiple-chef-recipes/46186831#46186831", "title": "Make Dynamic Variable Available to Multiple Chef Recipes", "body": "<p>If you need to share some code between a bunch of different recipes, you can try using <a href=\"https://docs.chef.io/libraries.html\" rel=\"nofollow noreferrer\">a library</a> loaded from a common cookbook dependency.</p>\n"}], "owner": {"reputation": 13699, "user_id": 18995, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8b7949efc26b4528e662555b02ae73d4?s=128&d=identicon&r=PG", "display_name": "Paul Croarkin", "link": "https://stackoverflow.com/users/18995/paul-croarkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 179, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1505260232, "creation_date": 1505240760, "question_id": 46183176, "link": "https://stackoverflow.com/questions/46183176/make-dynamic-variable-available-to-multiple-chef-recipes", "title": "Make Dynamic Variable Available to Multiple Chef Recipes", "body": "<p>We dynamically compute the name of a directory at run-time from some attributes:</p>\n\n<pre><code>var1 = (node['foo']['bar']).to_s\nvar2 = (node['foo']['baz']).to_s\napp_dir = \"/var/#{var1}/#{var2}\n</code></pre>\n\n<p>Copying this code block to all of the recipes that needs it works. When we have tried to clean this up, it bombs with \"No resource, or local variable named 'app_dir'.</p>\n\n<p>We have tried the following:</p>\n\n<p>1) Move the block of code into attributes/default.rb</p>\n\n<p>2) Move the block of code into recipes/default.rb</p>\n\n<p>3) Same as 2 above, but adding <code>require_relative 'default'</code> in the recipes that require the variable</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1, "user_id": 7766860, "user_type": "registered", "profile_image": "https://graph.facebook.com/495589597496907/picture?type=large", "display_name": "RubyZero RailsZero", "link": "https://stackoverflow.com/users/7766860/rubyzero-railszero"}, "edited": false, "score": 0, "creation_date": 1505239234, "post_id": 46182692, "comment_id": 79328339, "body": "In array we can flatten an array Like [[1,2],[3,4]].flatten =&gt; [1,2,3,4]. So like this I want to flatten my hash like [{key1: 1},{key2:3}]"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1505239998, "post_id": 46182692, "comment_id": 79328699, "body": "You&#39;re probably using the wrong data structure here. Hashes are for storing <i>multiple</i> keys and values, if you just a single pair of values, use an array of two elements."}, {"owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "edited": false, "score": 1, "creation_date": 1505240651, "post_id": 46182692, "comment_id": 79328986, "body": "Please post what have you tried so far"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1505242145, "post_id": 46182692, "comment_id": 79329755, "body": "I trust you approve of my edit. I did two things: reformatted so that readers do not have to scroll horizontally to read your question; and assigned a variable to your input object. You should always do the latter, as it allows readers to refer to the variable(s) in answers and comments without having to define it (them). Also, it&#39;s helpful for all readers to reference the same variable."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1505245815, "post_id": 46182692, "comment_id": 79331396, "body": "This is not a Rails question so you should remove the Rail&#39;s tag. The choice of tags can have consequences. Readers who filter-in Rails questions may be disappointed; readers who filter-out Rails questions may never see your question."}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1505250409, "post_id": 46182692, "comment_id": 79333484, "body": "Also, can @RubyZeroRailsZero explain that desired output? I can see how they got some of those results, but not all of them (Specifically, where are <code>{&quot;Key2&quot; =&gt; 1}</code> and <code>{&quot;Key2&quot; =&gt; 0}</code> and both <code>{&quot;Key3&quot; =&gt; 3}</code> coming from)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7766860, "user_type": "registered", "profile_image": "https://graph.facebook.com/495589597496907/picture?type=large", "display_name": "RubyZero RailsZero", "link": "https://stackoverflow.com/users/7766860/rubyzero-railszero"}, "edited": false, "score": 0, "creation_date": 1505239498, "post_id": 46182782, "comment_id": 79328462, "body": "I need to sort them also.key which have max value comes first. Can you please help me"}, {"owner": {"reputation": 1, "user_id": 7766860, "user_type": "registered", "profile_image": "https://graph.facebook.com/495589597496907/picture?type=large", "display_name": "RubyZero RailsZero", "link": "https://stackoverflow.com/users/7766860/rubyzero-railszero"}, "edited": false, "score": 0, "creation_date": 1505239552, "post_id": 46182782, "comment_id": 79328495, "body": "It will take 2 minutes to accept. I&#39;ll do. help me to sort the hash as required."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1505239909, "post_id": 46182782, "comment_id": 79328669, "body": "RubyZeroRailsZero, why the rush to accept any answer? There&#39;s no rush, Others may be working on answers right now."}, {"owner": {"reputation": 1, "user_id": 7766860, "user_type": "registered", "profile_image": "https://graph.facebook.com/495589597496907/picture?type=large", "display_name": "RubyZero RailsZero", "link": "https://stackoverflow.com/users/7766860/rubyzero-railszero"}, "edited": false, "score": 0, "creation_date": 1505239920, "post_id": 46182782, "comment_id": 79328672, "body": "Input:  [{&quot;key1&quot;=&gt;0},{&quot;key2&quot;=&gt;1},{&quot;key3&quot;=&gt;6},{&quot;key3&quot;=&gt;1},{&quot;key5&quot;=&gt;5}&zwnj;&#8203;] Output: [{&quot;key3&quot;=&gt;6},{&quot;key5&quot;=&gt;5},{&quot;key2&quot;=&gt;1},{&quot;key3&quot;=&gt;1},{&quot;key1&quot;=&gt;0}&zwnj;&#8203;]"}, {"owner": {"reputation": 1, "user_id": 7766860, "user_type": "registered", "profile_image": "https://graph.facebook.com/495589597496907/picture?type=large", "display_name": "RubyZero RailsZero", "link": "https://stackoverflow.com/users/7766860/rubyzero-railszero"}, "edited": false, "score": 0, "creation_date": 1505240014, "post_id": 46182782, "comment_id": 79328708, "body": "It was asking me for two minutes. I have forgot to taken a snapshop. Sorry, I have accepted your Answer. Thank you Much helpful. But can you please help me to sort the hash"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 1, "user_id": 7766860, "user_type": "registered", "profile_image": "https://graph.facebook.com/495589597496907/picture?type=large", "display_name": "RubyZero RailsZero", "link": "https://stackoverflow.com/users/7766860/rubyzero-railszero"}, "edited": false, "score": 2, "creation_date": 1505240093, "post_id": 46182782, "comment_id": 79328744, "body": "@RubyZeroRailsZero If you want the results in a particular order, please clarify your question, or ask a new question."}, {"owner": {"reputation": 27630, "user_id": 1550807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JgCw5.png?s=128&g=1", "display_name": "Danil Speransky", "link": "https://stackoverflow.com/users/1550807/danil-speransky"}, "reply_to_user": {"reputation": 1, "user_id": 7766860, "user_type": "registered", "profile_image": "https://graph.facebook.com/495589597496907/picture?type=large", "display_name": "RubyZero RailsZero", "link": "https://stackoverflow.com/users/7766860/rubyzero-railszero"}, "edited": false, "score": 0, "creation_date": 1505242553, "post_id": 46182782, "comment_id": 79329948, "body": "@RubyZeroRailsZero try <code>data.flat_map(&amp;:to_a).sort_by { |k, v| -v }.map { |k, v| {k =&gt; v} }</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1505244303, "post_id": 46182782, "comment_id": 79330683, "body": "When I left my comment  I had not noticed that you had asked the OP to select your answer. It&#39;s true that SO newbies may not know about accepting answers, but it&#39;s also true that if they are asked to select a particular answer they may well do that. You asking for the greenie, especially after such a short time, when yours is the only answer, is imo very bad form. If no selection has been made after several hours one might suggest the OP select the answer they found most helpful (if any were). I upvoted your answer, but would not have done so had I seen your request for the checkmark."}], "tags": [], "owner": {"reputation": 27630, "user_id": 1550807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JgCw5.png?s=128&g=1", "display_name": "Danil Speransky", "link": "https://stackoverflow.com/users/1550807/danil-speransky"}, "is_accepted": true, "score": 2, "last_activity_date": 1505239149, "creation_date": 1505239149, "answer_id": 46182782, "question_id": 46182692, "link": "https://stackoverflow.com/questions/46182692/convert-hash-keys-into-a-hash-in-ruby/46182782#46182782", "title": "Convert hash keys into a hash in ruby", "body": "<p>Try this:</p>\n\n<pre><code>data.flat_map(&amp;:to_a).map { |k, v| {k =&gt; v} }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7766860, "user_type": "registered", "profile_image": "https://graph.facebook.com/495589597496907/picture?type=large", "display_name": "RubyZero RailsZero", "link": "https://stackoverflow.com/users/7766860/rubyzero-railszero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 46182782, "answer_count": 1, "score": -1, "last_activity_date": 1505240021, "creation_date": 1505238787, "last_edit_date": 1505240021, "question_id": 46182692, "link": "https://stackoverflow.com/questions/46182692/convert-hash-keys-into-a-hash-in-ruby", "title": "Convert hash keys into a hash in ruby", "body": "<p>Please review below input and helps me to convert it into the below output</p>\n\n<p>Input:</p>\n\n<pre><code>arr = [{\"Key1\"=&gt;1, \"key3\"=&gt;1}, {\"Key2\"=&gt;3, \"Key4\"=&gt;0}, {\"Key1\"=&gt;1, \"Key4\"=&gt;1},\n       {\"Key2\"=&gt;3, \"key3\"=&gt;0}, {\"Key1\"=&gt;3, \"Ke5\"=&gt;0}]\n</code></pre>\n\n<p>Desired output:</p>\n\n<pre><code>[{\"Key1\"=&gt;1}, {\"Key2\"=&gt;1}, {\"Key3\"=&gt;3}, {\"Key4\"=&gt;0}, {\"Key1\"=&gt;1},\n {\"Key4\"=&gt;1}, {\"Key3\"=&gt;3}, {\"Key2\"=&gt;0}, {\"Key1\"=&gt;3}, {\"Key5\"=&gt;0}]\n</code></pre>\n"}, {"tags": ["ruby", "irb"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1505239921, "post_id": 46182356, "comment_id": 79328673, "body": "Don&#39;t forget <a href=\"https://ruby-doc.org/core-2.4.1/Array.html#method-i-sample\" rel=\"nofollow noreferrer\"><code>sample</code></a>."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1505253870, "post_id": 46182356, "comment_id": 79334848, "body": "<code>puts %w(\ud83c\udca1 \ud83c\udca2 \ud83c\udca3 \ud83c\udca4 \ud83c\udca5 \ud83c\udca6 \ud83c\udca7 \ud83c\udca8 \ud83c\udca9 \ud83c\udcaa \ud83c\udcab \ud83c\udcac \ud83c\udcad \ud83c\udcae).sample</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2949, "user_id": 2592808, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ZhoRz.jpg?s=128&g=1", "display_name": "halfbit", "link": "https://stackoverflow.com/users/2592808/halfbit"}, "reply_to_user": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1505239323, "post_id": 46182701, "comment_id": 79328381, "body": "@SimpleLime, yes - sure, I have overseen this aspect, working on it"}, {"owner": {"reputation": 2949, "user_id": 2592808, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ZhoRz.jpg?s=128&g=1", "display_name": "halfbit", "link": "https://stackoverflow.com/users/2592808/halfbit"}, "reply_to_user": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1505239835, "post_id": 46182701, "comment_id": 79328623, "body": "@SimpleLime: this one I tested, a new answer"}], "tags": [], "owner": {"reputation": 2949, "user_id": 2592808, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ZhoRz.jpg?s=128&g=1", "display_name": "halfbit", "link": "https://stackoverflow.com/users/2592808/halfbit"}, "is_accepted": true, "score": 0, "last_activity_date": 1505239817, "last_edit_date": 1505239817, "creation_date": 1505238822, "answer_id": 46182701, "question_id": 46182356, "link": "https://stackoverflow.com/questions/46182356/print-random-unicode-card-in-console/46182701#46182701", "title": "print random unicode card in console", "body": "<p>Ok first answer was wrong I have overseen something but: </p>\n\n<p>How about this (tested):</p>\n\n<pre><code>        ... \n        hexnum=\"1F0#{y}#{x}\"\n        card=''\n        card  &lt;&lt; hexnum.to_i(16)\n        ...\n</code></pre>\n\n<p>you make the \"hex\" dynamically, convert it into an integer and push this as first char into string<br>\nstolen here <a href=\"https://gist.github.com/O-I/6758583\" rel=\"nofollow noreferrer\">https://gist.github.com/O-I/6758583</a></p>\n"}], "owner": {"reputation": 175, "user_id": 7930720, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/zrzBz.jpg?s=128&g=1", "display_name": "D.K.S", "link": "https://stackoverflow.com/users/7930720/d-k-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 46182701, "answer_count": 1, "score": 0, "last_activity_date": 1505239817, "creation_date": 1505237398, "question_id": 46182356, "link": "https://stackoverflow.com/questions/46182356/print-random-unicode-card-in-console", "title": "print random unicode card in console", "body": "<p>I'm trying to make a method that returns a random card pic in console:</p>\n\n<pre><code>def random_card\n  x = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 'A', 'B', 'C', 'D', 'F'].shuffle.join[0]\n  y = %w[A B C D].shuffle.join[0]\n  card = '\\u{1F0' + y.to_s + x.to_s + '}'\n  puts card.to_s\nend\n</code></pre>\n\n<p>executing this prints </p>\n\n<pre><code>\\u{1F0BF}\n</code></pre>\n\n<p>but i need same behavior as:</p>\n\n<pre><code>puts \"\\u{1F0BF}\"\n</code></pre>\n\n<p>output</p>\n\n<pre><code>\ud83c\udcbf\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex", "string"], "answers": [{"comments": [{"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 1, "creation_date": 1505237261, "post_id": 46182250, "comment_id": 79327386, "body": "You can also just do <code>2[0-6]</code>, don&#39;t have to write them all out"}, {"owner": {"reputation": 77, "user_id": 5067267, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-U6szUozDWlE/AAAAAAAAAAI/AAAAAAAAAGk/ig6y81gyqKI/photo.jpg?sz=128", "display_name": "Aleksandar Jeftic", "link": "https://stackoverflow.com/users/5067267/aleksandar-jeftic"}, "edited": false, "score": 1, "creation_date": 1505238127, "post_id": 46182250, "comment_id": 79327817, "body": "thx for help i used this <code>input.match(&#47;\\AROT([0-9]|1[0-9]|2[0-6])  &#47;)</code>"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 3, "last_activity_date": 1505236904, "creation_date": 1505236904, "answer_id": 46182250, "question_id": 46182166, "link": "https://stackoverflow.com/questions/46182166/regular-expression-ruby/46182250#46182250", "title": "regular expression ruby", "body": "<p>You can always do it brute-force with:</p>\n\n<pre><code> input.match(/\\AROT(0|1|2|3|4|...26) /)\n</code></pre>\n\n<p>Or more generally:</p>\n\n<pre><code> input.match(/\\AROT(1?[0-9]|2[0123456]) /)\n</code></pre>\n\n<p>Where <code>\\A</code> is a more specific version of <code>^</code> which means \"start of string\", whereas <code>^</code> means \"start of line\".</p>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 5067267, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-U6szUozDWlE/AAAAAAAAAAI/AAAAAAAAAGk/ig6y81gyqKI/photo.jpg?sz=128", "display_name": "Aleksandar Jeftic", "link": "https://stackoverflow.com/users/5067267/aleksandar-jeftic"}, "edited": false, "score": 0, "creation_date": 1505255073, "post_id": 46183386, "comment_id": 79335199, "body": "ROT0 must be true"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 77, "user_id": 5067267, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-U6szUozDWlE/AAAAAAAAAAI/AAAAAAAAAGk/ig6y81gyqKI/photo.jpg?sz=128", "display_name": "Aleksandar Jeftic", "link": "https://stackoverflow.com/users/5067267/aleksandar-jeftic"}, "edited": false, "score": 0, "creation_date": 1505259406, "post_id": 46183386, "comment_id": 79336242, "body": "There&#39;s no space following the zero."}, {"owner": {"reputation": 77, "user_id": 5067267, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-U6szUozDWlE/AAAAAAAAAAI/AAAAAAAAAGk/ig6y81gyqKI/photo.jpg?sz=128", "display_name": "Aleksandar Jeftic", "link": "https://stackoverflow.com/users/5067267/aleksandar-jeftic"}, "edited": false, "score": 0, "creation_date": 1505302257, "post_id": 46183386, "comment_id": 79355024, "body": "my bad sorry...at first it was like chinese to me now i get your code ...thanks"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1505241701, "creation_date": 1505241701, "answer_id": 46183386, "question_id": 46182166, "link": "https://stackoverflow.com/questions/46182166/regular-expression-ruby/46183386#46183386", "title": "regular expression ruby", "body": "<p>For improved readability consider performing the range test separately.</p>\n\n<pre><code>def string_ok?(str)\n  str.match?(/\\AROT\\d+ /) &amp;&amp; str[3..-1].to_i &lt;= 26\nend\n\nstring_ok? \"ROT12 \"     #=&gt; true\nstring_ok? \"ROT12 cat\"  #=&gt; true\nstring_ok? \"ROT \"       #=&gt; false\nstring_ok? \"RO0 \"       #=&gt; false\nstring_ok? \"ROT0\"       #=&gt; false\nstring_ok? \"1ROT0 \"     #=&gt; false\nstring_ok? \"ROT27 \"     #=&gt; false\nstring_ok? \"ROT-3 \"     #=&gt; false\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 5067267, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-U6szUozDWlE/AAAAAAAAAAI/AAAAAAAAAGk/ig6y81gyqKI/photo.jpg?sz=128", "display_name": "Aleksandar Jeftic", "link": "https://stackoverflow.com/users/5067267/aleksandar-jeftic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 46182250, "answer_count": 2, "score": 0, "last_activity_date": 1505241701, "creation_date": 1505236574, "question_id": 46182166, "link": "https://stackoverflow.com/questions/46182166/regular-expression-ruby", "title": "regular expression ruby", "body": "<p>I need to check if string starts with ROT following range 0-26 and white space....for example my input must be ROT12 \"some string\" where ROT can be in range ROT0-ROT26... know how to check for ROT with</p>\n\n<p><code>input.match /^ROT/</code> </p>\n\n<p>but need something like this </p>\n\n<p><code>input.match /^ROT[0..26] /</code> </p>\n\n<p>white space behind rot with number is important too.</p>\n"}, {"tags": ["ruby", "inflection", "hanami"], "answers": [{"tags": [], "owner": {"reputation": 740, "user_id": 1673407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e96c0fca120336cd8aa4ab86b4db0e65?s=128&d=identicon&r=PG", "display_name": "kaikuchn", "link": "https://stackoverflow.com/users/1673407/kaikuchn"}, "is_accepted": true, "score": 0, "last_activity_date": 1505296903, "creation_date": 1505296903, "answer_id": 46194540, "question_id": 46182109, "link": "https://stackoverflow.com/questions/46182109/webrick-run-on-hanami-1-0-0-shows-errors-because-of-wrong-inflection/46194540#46194540", "title": "WEBrick run on hanami 1.0.0 shows errors because of wrong inflection", "body": "<p>I'm assuming we are talking about Hanami v1.0.0, right?</p>\n\n<p>You nearly succeeded. What hit you is that initializers seem to be not loaded when executing hanami commands and <a href=\"https://github.com/hanami/hanami/issues/787\" rel=\"nofollow noreferrer\">maybe a bug in code reloading</a>. So instead of an initializer put it into a file that gets loaded when hanami commands are executed or require the initializer file in such a place. E.g.,</p>\n\n<pre><code># config/initializers/inflections.rb\nrequire 'hanami/utils/inflector'\n\nHanami::Utils::Inflector.inflections do\n  exception 'stimulus', 'stimuli'\nend\n</code></pre>\n\n<p>and then in your environment file</p>\n\n<pre><code># config/environment.rb\n# ...\nrequire_relative 'initializers/inflections.rb'\n# ...\n</code></pre>\n\n<p>I'm not sure if that is a good place to put custom inflection rules, but at least it works.</p>\n"}], "owner": {"reputation": 147, "user_id": 8598954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lxpJ8.jpg?s=128&g=1", "display_name": "Dmitry Matveyev", "link": "https://stackoverflow.com/users/8598954/dmitry-matveyev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 46194540, "answer_count": 1, "score": 1, "last_activity_date": 1505319774, "creation_date": 1505236325, "last_edit_date": 1505319774, "question_id": 46182109, "link": "https://stackoverflow.com/questions/46182109/webrick-run-on-hanami-1-0-0-shows-errors-because-of-wrong-inflection", "title": "WEBrick run on hanami 1.0.0 shows errors because of wrong inflection", "body": "<p>I generated model with <code>hanami generate model stimulus</code>. Then I fixed \"stimuluses\" to \"stimuli\" in the migration file name and inside, the table name.</p>\n\n<p>Everytime I load a page I get this error in the server console window:</p>\n\n<p>[ROM::Relation[Stimuluses]] failed to infer schema. Make sure tables exist before ROM container is set up. This may also happen when your migration tasks load ROM container, which is not needed for migrations as only the connection is required (schema parsing returned no columns, table \"stimuluses\" probably doesn't exist)</p>\n\n<p>I looked into the libraries and found that this functionality has Inflecto library. Then I tried both adding to hanami project this:</p>\n\n<pre><code># /config/initializers/inflecto.rb\nrequire 'inflecto'\n\nInflecto.inflections do |inflect|\n  inflect.irregular('stimulus', 'stimuli')\nend\n</code></pre>\n\n<p>And editing the defualt library file:</p>\n\n<pre><code># gems/inflecto-0.0.2/lib/inflecto/defaults.rb\nInflecto.inflections do |inflect|\n  ...\n  inflect.irregular('stimulus', 'stimuli')\n  ...\nend\n</code></pre>\n\n<p>But the message is still there after restarting the server.</p>\n\n<p>Is this something I should solve and if yes, how to do this?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Also tried:</p>\n\n<pre><code># /config/initializers/inflector.rb\nrequire 'hanami/utils/inflector'\n\nHanami::Utils::Inflector.inflections do\n  exception 'stimulus', 'stimuli'\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1505235437, "post_id": 46181772, "comment_id": 79326510, "body": "1.8.6 is beyond ancient and you really need to upgrade to a supported version of Ruby. Even 1.9.3 is cut off from support, it&#39;s hazardous to keep deployed. How big an app is this? Could you update to 2.0 syntax? Apart from UTF-8 issues in the 1.8 -&gt; 1.9 switch it&#39;s usually not too bad."}, {"owner": {"reputation": 4815, "user_id": 2418224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zSFiW.png?s=128&g=1", "display_name": "juzraai", "link": "https://stackoverflow.com/users/2418224/juzraai"}, "edited": false, "score": 0, "creation_date": 1505235772, "post_id": 46181772, "comment_id": 79326675, "body": "Please copy the error messages into your post."}, {"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1505237082, "post_id": 46181772, "comment_id": 79327301, "body": "The Shellwords module changed between 1.8.6 and 1.8.7, replacing <code>escape</code> with <code>shellescape</code> if I&#39;m not mistaken, so it seems like you <i>need</i> 1.8.6. The question is why you don&#39;t remove 1.9.3 from that machine if that&#39;s the case."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1505237504, "post_id": 46181772, "comment_id": 79327514, "body": "@MarsAtomic it is actually that 1.9.3 added <code>#escape</code> as an alias for <code>#shellescape</code>. <code>Shellwords#shellescape</code> was added in 1.8.7. OP can you please explain why you are using an rvm wrapper for 1.8.6 and using gems for 1.9.3. Your interpretter is &quot;/home/purge/.rvm/gems/ruby-1.8.6-p420/wrappers/ruby&quot; but your gems are &quot;/home/purge/.rvm/gems/ruby-1.9.3-p545:/home/purge/.rvm/gems&zwnj;&#8203;/ruby-1.9.3-p545@glo&zwnj;&#8203;bal&quot; this appears to be your actual issue"}], "owner": {"reputation": 1, "user_id": 8598924, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154639324081829/picture?type=large", "display_name": "Andrew Degenhardt", "link": "https://stackoverflow.com/users/8598924/andrew-degenhardt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505234874, "creation_date": 1505234874, "question_id": 46181772, "link": "https://stackoverflow.com/questions/46181772/moving-app-over-to-a-different-server", "title": "moving app over to a different server", "body": "<p>I am trying to move an app over from an older server to another no so much older server. As far as I can tell the old app was (for some reason I did this) running on Unicorn, with ruby version 1.8.6. The new server supports 186 and 193 so it shouldnt be a problem. but I continuously get an error when i try to run the site.</p>\n\n<p><a href=\"http://omnimart.myitcrm.biz/\" rel=\"nofollow noreferrer\">http://omnimart.myitcrm.biz/</a></p>\n\n<p>I have searched the web and couldnt find an exact post describing this error and a solution for it.</p>\n\n<p>I tried to put 186 in nginx so that it would use the correct version of ruby, but I also get 193 showing up in the environment variables, and I figured that may be the problem, but I tried tracing these environment variables back to see where there were set and I couldnt find it anywhere. Could that be the problem?</p>\n\n<p>nginx conf:</p>\n\n<pre><code>        server {\n\n            passenger_ruby /home/purge/.rvm/gems/ruby-1.8.6-p420/wrappers/ruby;\n\n            listen 80;\n            server_name omnimart.myitcrm.biz;\n            root /home/purge/www/omnimart/current/public;\n            passenger_enabled on;\n\n    }\n</code></pre>\n\n<p>The site is currently running now so it isn't an emergency but I would like to resolve this so i can shut down one node that only has one remaining app running on it.</p>\n\n<p>Any ideas on what I can do to fix this one?</p>\n"}, {"tags": ["ruby", "shell", "chef-infra", "chef-recipe"], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1505236461, "creation_date": 1505236461, "answer_id": 46182132, "question_id": 46181745, "link": "https://stackoverflow.com/questions/46181745/adding-file-into-to-an-existing-war-file/46182132#46182132", "title": "Adding file into to an existing .war file", "body": "<p>Jar files are just zip files so you can probably write some code using either the <code>zip</code> command line tool or the RubyZip gem (I would go for the latter but depends on your comfort level with Ruby code) to do this on the fly, but please don't. Chef is really not built for this kind of task and it will be very frustrating to build the code in a robust manner. If you need it ASAP and want to build a fragile version now and fix the process afterwards that's more understandable, but otherwise probably just talk to your dev team about what this is and why you need it added to their build process. Some problems are best solved with communication rather than code.</p>\n"}], "owner": {"reputation": 197, "user_id": 6482719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd504f893ebb2c5320ee288daad9a533?s=128&d=identicon&r=PG&f=1", "display_name": "hlesnt395", "link": "https://stackoverflow.com/users/6482719/hlesnt395"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 577, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1505236461, "creation_date": 1505234708, "question_id": 46181745, "link": "https://stackoverflow.com/questions/46181745/adding-file-into-to-an-existing-war-file", "title": "Adding file into to an existing .war file", "body": "<p>My automation deployment environment I have web.war file deployment under tomcat.</p>\n\n<p>Lets assume this web.war application contains mix.jar file which is under /lib directory of web.war archive file.</p>\n\n<p>(mix.jar releases giving by different DEV team and they don't responsible for giving web.war and the organization practice is putting the latest mix.jar file into the web.war archive file manually )</p>\n\n<p>Can anyone help me to automate this process from CHEF recipe ?</p>\n\n<p>Basically what I need during the chef deployment is, putting the mix.jar file into the web.war/lib directory under tomcat container. </p>\n\n<p>Our current practice is open the web.war file from Winrar and put the mix.jar file into it and redeploy it into tomcat.</p>\n\n<p>But I want to automate this process. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "is_accepted": true, "score": 0, "last_activity_date": 1505236373, "last_edit_date": 1505236373, "creation_date": 1505235776, "answer_id": 46181981, "question_id": 46181605, "link": "https://stackoverflow.com/questions/46181605/error-handling-email-ldap-rails/46181981#46181981", "title": "Error Handling - Email LDAP - Rails", "body": "<p>The issue is that you're calling <code>super</code> before your <code>get_ldap_email</code>, so the validation in Devise's <code>SessionController</code> is checking for a valid email. This should work:</p>\n\n<pre><code>def create\n  if get_ldap_email == nil\n    # redirect to /errorlogin\n  end\n  super\nend\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 8569812, "user_type": "registered", "profile_image": "https://graph.facebook.com/1561887163867601/picture?type=large", "display_name": "Gustavo Rey", "link": "https://stackoverflow.com/users/8569812/gustavo-rey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 46181981, "answer_count": 1, "score": 1, "last_activity_date": 1505236373, "creation_date": 1505234210, "question_id": 46181605, "link": "https://stackoverflow.com/questions/46181605/error-handling-email-ldap-rails", "title": "Error Handling - Email LDAP - Rails", "body": "<p>I'm beginner in Ruby on Rails and I need help</p>\n\n<p>In my project, I need to catch on LDAP the e-mail of user.</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n\n # Include default devise modules. Others available are:\n # :confirmable, :lockable, :timeoutable and :omniauthable\n devise :ldap_authenticatable,:rememberable, :trackable\n\n #validates :username, presence: true, uniqueness: true\n validates :email, presence: true\n validates_uniqueness_of :email \n before_validation :get_ldap_email\n before_save :get_ldap_email\n\ndef get_ldap_email\n   self.email = Devise::LDAP::Adapter.get_ldap_param(self.username,\"mail\").first\nend\n</code></pre>\n\n<p>But If in LDAP doesn't have an e-mail, shows an Rails\u00b4 error message and I want to redirect to a page with a message made by me.</p>\n\n<p>So, in SessionController i want make an \"if\", but i don't have success to call the method.</p>\n\n<pre><code>class Users::SessionsController &lt; Devise::SessionsController\nrequire_relative '../../models/User.rb'\n\ndef create\n super\n if get_ldap_email == nil\n  # redirect to /errorlogin\n end\nend\n</code></pre>\n\n<p>And here show message </p>\n\n<pre><code>undefined local variable or method `get_ldap_email' for # \nUsers::SessionsController:0x67342e0&gt;\n</code></pre>\n\n<p>Also I modificed the User for this...</p>\n\n<pre><code>def get_ldap_email\n\n ldapEmail =  Devise::LDAP::Adapter.get_ldap_param(self.username,\"mail\")\n if ldapEmail == nil\n\n else\n  self.email = ldapEmail.first\n end\nend\n</code></pre>\n\n<p>But now show this message</p>\n\n<pre><code>Validation failed: Email can't be blank\n</code></pre>\n\n<p>I don't what I need to do...</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1505232489, "post_id": 46181073, "comment_id": 79324789, "body": "rails 4 has <a href=\"https://robots.thoughtbot.com/activerecords-wherenot\" rel=\"nofollow noreferrer\">where.not</a> which reads a little nicer: <code>.where.not(id: @post:id)</code>"}, {"owner": {"reputation": 27630, "user_id": 1550807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JgCw5.png?s=128&g=1", "display_name": "Danil Speransky", "link": "https://stackoverflow.com/users/1550807/danil-speransky"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1505232515, "post_id": 46181073, "comment_id": 79324801, "body": "@maxpleaner Right, thank you, I&#39;m changing my answer"}, {"owner": {"reputation": 849, "user_id": 2601689, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/KKSIm.jpg?s=128&g=1", "display_name": "Designer", "link": "https://stackoverflow.com/users/2601689/designer"}, "edited": false, "score": 0, "creation_date": 1505233080, "post_id": 46181073, "comment_id": 79325129, "body": "Nice! I didn&#39;t know we could write <b>where</b> multiple times. Thank you"}], "tags": [], "owner": {"reputation": 27630, "user_id": 1550807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JgCw5.png?s=128&g=1", "display_name": "Danil Speransky", "link": "https://stackoverflow.com/users/1550807/danil-speransky"}, "is_accepted": true, "score": 3, "last_activity_date": 1505232556, "last_edit_date": 1505232556, "creation_date": 1505232438, "answer_id": 46181073, "question_id": 46180987, "link": "https://stackoverflow.com/questions/46180987/rails-5-query-to-pull-posts-from-same-category-other-than-the-post-im-currently/46181073#46181073", "title": "Rails 5 Query to pull posts from same category other than the post I&#39;m currently viewing", "body": "<p>You could add another condition to exclude current post:</p>\n\n<pre><code>@other_posts = @post.category.posts.where.not(id: @post.id).limit(3).order('RANDOM()')\n</code></pre>\n"}], "owner": {"reputation": 849, "user_id": 2601689, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/KKSIm.jpg?s=128&g=1", "display_name": "Designer", "link": "https://stackoverflow.com/users/2601689/designer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 46181073, "answer_count": 1, "score": 1, "last_activity_date": 1505232556, "creation_date": 1505232153, "question_id": 46180987, "link": "https://stackoverflow.com/questions/46180987/rails-5-query-to-pull-posts-from-same-category-other-than-the-post-im-currently", "title": "Rails 5 Query to pull posts from same category other than the post I&#39;m currently viewing", "body": "<p>I'm trying to display 3 other posts from same category at post details page. So I have this query:</p>\n\n<pre><code>  def show\n    @posts_from_same_category = Post.where(category_id: @post.category_id).limit(3).order(\"RANDOM()\")\n  end\n</code></pre>\n\n<p>So the page structure is like:</p>\n\n<ul>\n<li>Post title </li>\n<li>Posts text</li>\n<li>(title) More posts from same category</li>\n<li>Other post title 1</li>\n<li>Other post title 2</li>\n<li>Other post title 3</li>\n</ul>\n\n<p>It returns all posts including the posts I'm viewing. <strong>How can I write the query to pull posts other than the one I'm currently viewing?</strong> </p>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rest", "api", "webrequest"], "comments": [{"owner": {"reputation": 1717, "user_id": 1034924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecedc78563223e4f7742bbfc66992905?s=128&d=identicon&r=PG", "display_name": "nzajt", "link": "https://stackoverflow.com/users/1034924/nzajt"}, "edited": false, "score": 0, "creation_date": 1505231891, "post_id": 46180782, "comment_id": 79324407, "body": "Any code you can run in the console you can run in the controller. Can you be more specific in your problem? Can you not load the model in the controller? Are you having a hard time with the routes? This shouldn&#39;t be very hard. Also you need to run <code>variable.save</code> after update or it won&#39;t save the change."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 1717, "user_id": 1034924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecedc78563223e4f7742bbfc66992905?s=128&d=identicon&r=PG", "display_name": "nzajt", "link": "https://stackoverflow.com/users/1034924/nzajt"}, "edited": false, "score": 0, "creation_date": 1505232606, "post_id": 46180782, "comment_id": 79324859, "body": "@nzajt you don&#39;t need to call update after save. Also, yeah, this question doesn&#39;t have enough info."}, {"owner": {"reputation": 1717, "user_id": 1034924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecedc78563223e4f7742bbfc66992905?s=128&d=identicon&r=PG", "display_name": "nzajt", "link": "https://stackoverflow.com/users/1034924/nzajt"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1505233042, "post_id": 46180782, "comment_id": 79325102, "body": "@maxpleaner I said you do need to call <code>save</code> after <code>update</code>.  I never said you need to call <code>update</code> after <code>save</code>."}, {"owner": {"reputation": 13, "user_id": 8598688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a9bf44a5e86411b7d8e519c092dba3f?s=128&d=identicon&r=PG&f=1", "display_name": "arc_pwr", "link": "https://stackoverflow.com/users/8598688/arc-pwr"}, "edited": false, "score": 0, "creation_date": 1505233694, "post_id": 46180782, "comment_id": 79325531, "body": "That is exactly the problem, My controller is not recognizing the Model but the console does! I have other controllers running the same instructions for the update and they do work (dont know if it is the optimal way but works) , I have scrambled through the code to find if it is a typo of some sort but cant seem to find it"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 1717, "user_id": 1034924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecedc78563223e4f7742bbfc66992905?s=128&d=identicon&r=PG", "display_name": "nzajt", "link": "https://stackoverflow.com/users/1034924/nzajt"}, "edited": false, "score": 1, "creation_date": 1505244852, "post_id": 46180782, "comment_id": 79330940, "body": "@nzajt excuse me i said it backwards but what i meant was you don&#39;t need to call save after update. Update calls save internally."}, {"owner": {"reputation": 1717, "user_id": 1034924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecedc78563223e4f7742bbfc66992905?s=128&d=identicon&r=PG", "display_name": "nzajt", "link": "https://stackoverflow.com/users/1034924/nzajt"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1505312890, "post_id": 46180782, "comment_id": 79363014, "body": "@maxpleaner your right, update doesn&#39;t need save. <a href=\"http://guides.rubyonrails.org/active_record_basics.html#update\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/active_record_basics.html#update</a>"}], "answers": [{"tags": [], "owner": {"reputation": 38, "user_id": 3806635, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/53KZq.jpg?s=128&g=1", "display_name": "Jes&#250;s Abarca", "link": "https://stackoverflow.com/users/3806635/jes%c3%bas-abarca"}, "is_accepted": true, "score": 0, "last_activity_date": 1505233843, "creation_date": 1505233843, "answer_id": 46181499, "question_id": 46180782, "link": "https://stackoverflow.com/questions/46180782/ruby-on-rails-using-update-inside-show-for-rest-api/46181499#46181499", "title": "Ruby on rails : using update inside show for REST API", "body": "<p>Seems like you're trying to increment a counter whenever someone access your <code>show</code> method in a controller. That can be achieved with the <code>increment!</code> method from the <code>ActiveRecord::Persistence</code> class:</p>\n\n<pre><code>instance = Model.find(params[:id])\ninstance.increment!(:attribute_to_increment, by = 1)\n</code></pre>\n\n<p>Note that the <code>:attribute_to_increment</code> has to be numeric.</p>\n\n<p>Source: <a href=\"https://apidock.com/rails/v4.2.7/ActiveRecord/Persistence/increment%21\" rel=\"nofollow noreferrer\">https://apidock.com/rails/v4.2.7/ActiveRecord/Persistence/increment%21</a></p>\n"}], "owner": {"reputation": 13, "user_id": 8598688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a9bf44a5e86411b7d8e519c092dba3f?s=128&d=identicon&r=PG&f=1", "display_name": "arc_pwr", "link": "https://stackoverflow.com/users/8598688/arc-pwr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 46181499, "answer_count": 1, "score": 1, "last_activity_date": 1505233843, "creation_date": 1505231494, "last_edit_date": 1505232177, "question_id": 46180782, "link": "https://stackoverflow.com/questions/46180782/ruby-on-rails-using-update-inside-show-for-rest-api", "title": "Ruby on rails : using update inside show for REST API", "body": "<p>While accessing my REST API on rails I encountered that inside the rails console this can happen</p>\n\n<pre><code>variable = Model.find(1) //Random id\nvariable.update(:column =&gt; variable.column + 1) //my column is numeric\n</code></pre>\n\n<p>but this, while it is possible on console a cannot find a translation to my ruby API for this exact method</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twilio"], "comments": [{"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "edited": false, "score": 0, "creation_date": 1505230378, "post_id": 46180279, "comment_id": 79323396, "body": "I&#39;m not very sure, but as per <a href=\"https://www.twilio.com/docs/quickstart/ruby/sms/hello-monkey\" rel=\"nofollow noreferrer\">THIS</a> docs, you may try <code>r.message(body: &quot;The Robots are coming! Head for the hills!&quot;)</code>"}, {"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "edited": false, "score": 0, "creation_date": 1505230519, "post_id": 46180279, "comment_id": 79323484, "body": "Also, I feel <code>r.Message</code> should be <code>r.message</code>(smaller case) <a href=\"https://www.twilio.com/docs/guides/how-to-receive-and-reply-in-ruby\" rel=\"nofollow noreferrer\">REF</a>"}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1505231830, "post_id": 46180279, "comment_id": 79324373, "body": "Which version of the Ruby library are you using?"}, {"owner": {"reputation": 502, "user_id": 5616578, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/c6f7a92723f0272d8d8311aeebbfe5dd?s=128&d=identicon&r=PG&f=1", "display_name": "James H", "link": "https://stackoverflow.com/users/5616578/james-h"}, "reply_to_user": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1505235229, "post_id": 46180279, "comment_id": 79326387, "body": "@philnash ruby 2.3.0p0 &amp; Rails 4.2.4"}, {"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1505235719, "post_id": 46180279, "comment_id": 79326654, "body": "Sorry, the Twilio gem version :)"}], "answers": [{"comments": [{"owner": {"reputation": 53136, "user_id": 28376, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8ec1383b240b5ba15ffb9743fceb3c0e?s=128&d=identicon&r=PG", "display_name": "philnash", "link": "https://stackoverflow.com/users/28376/philnash"}, "edited": false, "score": 0, "creation_date": 1505235783, "post_id": 46181157, "comment_id": 79326680, "body": "He&#39;s trying to <a href=\"https://www.twilio.com/docs/api/twiml/sms/twilio_request\" rel=\"nofollow noreferrer\">reply to an incoming message, which you can do with TwiML</a>."}], "tags": [], "owner": {"reputation": 1717, "user_id": 1034924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecedc78563223e4f7742bbfc66992905?s=128&d=identicon&r=PG", "display_name": "nzajt", "link": "https://stackoverflow.com/users/1034924/nzajt"}, "is_accepted": false, "score": 1, "last_activity_date": 1505232711, "creation_date": 1505232711, "answer_id": 46181157, "question_id": 46180279, "link": "https://stackoverflow.com/questions/46180279/rails-argumenterror-wrong-number-of-arguments-given-1-expected-0/46181157#46181157", "title": "Rails - ArgumentError (wrong number of arguments (given 1, expected 0)):", "body": "<p>To send a message with 'twillio-ruby' your code should look like this</p>\n\n<pre><code># put your own credentials here\naccount_sid = 'ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'\nauth_token = 'yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy'\n\n# set up a client to talk to the Twilio REST API\n@client = Twilio::REST::Client.new account_sid, auth_token\n\n# Send SMS message\n@client.api.account.messages.create(\n  from: '+FROMNUMBER',\n  to: '+TONUMBER',\n  body: 'The Robots are coming! Head for the hills!'\n)\n</code></pre>\n\n<p>in you controller it would look like</p>\n\n<pre><code>require 'twilio-ruby'\nclass ReplyController &lt; ApplicationController\n  skip_before_action :verify_authenticity_token\n\n  def hart1\n    send_text_message\n    content_type 'text/xml'\n  end\n\n  private\n\n  def send_text_message\n    # put your own credentials here\n    account_sid = 'ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'\n    auth_token = 'yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy'\n\n    # set up a client to talk to the Twilio REST API\n    @client = Twilio::REST::Client.new account_sid, auth_token\n\n    # Send SMS message\n    @client.api.account.messages.create(\n     from: '+FROMNUMBER',\n     to: '+TONUMBER',\n     body: 'The Robots are coming! Head for the hills!'\n    )\n  end\nend\n</code></pre>\n\n<p>The documentation for 'twillo-ruby' is here: <a href=\"https://github.com/twilio/twilio-ruby\" rel=\"nofollow noreferrer\">https://github.com/twilio/twilio-ruby</a></p>\n"}, {"tags": [], "owner": {"reputation": 502, "user_id": 5616578, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/c6f7a92723f0272d8d8311aeebbfe5dd?s=128&d=identicon&r=PG&f=1", "display_name": "James H", "link": "https://stackoverflow.com/users/5616578/james-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1505235956, "creation_date": 1505235956, "answer_id": 46182019, "question_id": 46180279, "link": "https://stackoverflow.com/questions/46180279/rails-argumenterror-wrong-number-of-arguments-given-1-expected-0/46182019#46182019", "title": "Rails - ArgumentError (wrong number of arguments (given 1, expected 0)):", "body": "<p>I wound up going the route nzajt mentioned where you send a regular text rather than the reply Twilio mentions. The routing was fine. Everything hit the post route on my server from twilio and I was able to take all the params I wanted from its payload for use. Thanks guys. </p>\n"}], "owner": {"reputation": 502, "user_id": 5616578, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/c6f7a92723f0272d8d8311aeebbfe5dd?s=128&d=identicon&r=PG&f=1", "display_name": "James H", "link": "https://stackoverflow.com/users/5616578/james-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 914, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1505235956, "creation_date": 1505230010, "question_id": 46180279, "link": "https://stackoverflow.com/questions/46180279/rails-argumenterror-wrong-number-of-arguments-given-1-expected-0", "title": "Rails - ArgumentError (wrong number of arguments (given 1, expected 0)):", "body": "<p>I'm trying to receive an SMS from the twilio API. I generated a separate reply controller that doesn't deal with anything else in my routes or resources. It uses a post method to communicate with twilio. Im getting the error:</p>\n\n<pre><code>\"ArgumentError (wrong number of arguments (given 1, expected 0)):\"\n</code></pre>\n\n<p>replycontroller.rb</p>\n\n<pre><code>class ReplyController &lt; ApplicationController\n\n  require 'twilio-ruby'\n\n  skip_before_action :verify_authenticity_token\n\n  def hart1\n\n    twiml = Twilio::TwiML::Response.new do |r|\n      r.Message 'The Robots are coming! Head for the hills!'\n    end\n\n    content_type 'text/xml'\n    twiml.text\n  end\n\nend\n</code></pre>\n\n<p>here are my routes </p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :posts\n  resources :phones\n  resources :users\n  root 'home#index'\n\n  post \"/reply/hart1\" =&gt; \"reply#hart1\"\n\nend\n</code></pre>\n\n<p>I'm under the impression I'm routing this improperly. The Heroku console also gives me a 500 error so I know it's something fixable on my end.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rvm", "bundler"], "answers": [{"tags": [], "owner": {"reputation": 1597, "user_id": 717626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/303d9f5c2135f14f277775052bcb131b?s=128&d=identicon&r=PG", "display_name": "Aaron Breckenridge", "link": "https://stackoverflow.com/users/717626/aaron-breckenridge"}, "is_accepted": false, "score": 0, "last_activity_date": 1505230214, "creation_date": 1505230214, "answer_id": 46180365, "question_id": 46178833, "link": "https://stackoverflow.com/questions/46178833/how-to-use-a-created-gem-for-a-specific-rails-version/46180365#46180365", "title": "How to use a created gem for a specific rails version?", "body": "<p><code>.ruby-gemset</code> and <code>.ruby-version</code> are not created automatically by the rails 5.0.0 generator. What you're doing looks OK.</p>\n\n<p><code>.ruby-version</code> specifies the version of ruby you'd like to use. You can use it with <code>rvm</code>, <code>rbenv</code> or <code>chruby</code> to specify the version of Ruby you want to use in your application.</p>\n\n<p><code>.ruby-gemset</code> is specific to using <code>rvm</code>. It's an alternative to using <code>bundler</code>. Both <code>bundler</code> and rvm <code>gemsets</code> accomplish the goal of maintaining an independent list of application dependencies (\"gems\") separate from system gems. Before <code>bundler</code> and rvm <code>gemsets</code>, Ruby didn't have a good solution for having separate dependencies per project.</p>\n\n<p>Don't use rvm <code>gemsets</code> and <code>bundler</code> interchangeably. I recommend getting totally comfortable using one or the other, but not both on the same project. (I should note that I'm not very well versed on <code>gemsets</code> so some of my information may be out-of-date. Hopefully someone will correct me if what I've said is inaccurate.)</p>\n"}], "owner": {"reputation": 21, "user_id": 8328271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mrwmy.jpg?s=128&g=1", "display_name": "Lindsey Olson", "link": "https://stackoverflow.com/users/8328271/lindsey-olson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505230214, "creation_date": 1505225828, "question_id": 46178833, "link": "https://stackoverflow.com/questions/46178833/how-to-use-a-created-gem-for-a-specific-rails-version", "title": "How to use a created gem for a specific rails version?", "body": "<p>I am new to ruby on rails, I just installed my first app.</p>\n\n<p>I created a gem for a specific rails version (not for a specific project) - is there a difference? </p>\n\n<pre><code>$ rvm gemset create rails500\n  Gemset 'rails500' created.\n\n$ rvm 2.4.1@rails500\n$ gem install rails -v 5.0.0\n</code></pre>\n\n<p>Then I wanted to use the gemset to create a new app:</p>\n\n<pre><code>$ mkdir blog-app\n$ cd blog-app\n$ rvm gemset use rails500\n  Using ruby-2.4.1 with gemset rails500\n$ rails new .\n</code></pre>\n\n<p>This did not create the .ruby-gemset or .ruby-version file for me, but it did create the Gemfile with rails 5.0.0 listed.\nSo then I created the .ruby-gemset &amp; .ruby-version file:</p>\n\n<pre><code>$ echo \"ruby-2.4.1\" &gt; .ruby-version\n$ echo \"rails500\" &gt; .ruby-gemset\n</code></pre>\n\n<p>I am trying to find out if I did this correctly. Also, do I need the .ruby-gemset file if rails5.0.0 is listed in the Gemfile?</p>\n\n<p>Lastly, I rvm and bundler. Should have I ran bundler install?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "datatable"], "comments": [{"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "edited": false, "score": 0, "creation_date": 1505225927, "post_id": 46178686, "comment_id": 79320116, "body": "What is the location of <b>People</b> folder? Also, did you try to include the module like <code>include Essa::Person</code>"}, {"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "edited": false, "score": 0, "creation_date": 1505225986, "post_id": 46178686, "comment_id": 79320167, "body": "What&#39;s the error you are getting? Update the question with that."}, {"owner": {"reputation": 1, "user_id": 2449244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4518436ff013fdaa60d537e59f77f0c9?s=128&d=identicon&r=PG", "display_name": "Alessio Varalta", "link": "https://stackoverflow.com/users/2449244/alessio-varalta"}, "reply_to_user": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "edited": false, "score": 0, "creation_date": 1505227094, "post_id": 46178686, "comment_id": 79321016, "body": "Is possibile to call the class and specific the path? The path of my folders are /home/essa/Modules/rails_3.2"}, {"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "edited": false, "score": 1, "creation_date": 1505227694, "post_id": 46178686, "comment_id": 79321495, "body": "Just define <code>include Essa::Person</code> at the top of your controller where you need to call <code>CarsDatatable</code>. Then in any method inside that controller initialise the class like <code>Essa::Person::CarsDatatable.new</code>. It&#39;s better practice to have your modules inside <code>lib</code> folder"}], "owner": {"reputation": 1, "user_id": 2449244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4518436ff013fdaa60d537e59f77f0c9?s=128&d=identicon&r=PG", "display_name": "Alessio Varalta", "link": "https://stackoverflow.com/users/2449244/alessio-varalta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505225430, "creation_date": 1505225430, "question_id": 46178686, "link": "https://stackoverflow.com/questions/46178686/rails-call-a-class-from-a-module", "title": "Rails call a class from a module", "body": "<p>I have a rails 3.2 application where I use differents gem that I have created. I have a folder People and a folder Magazine, so in people I have a file  </p>\n\n<pre><code>module Essa::Person\n class CarsDatatable &lt; AjaxDatatablesRails::Base\n</code></pre>\n\n<p>I want to call CarsDatatable in a external module. How is the syntax to initialize CarsDatatable in a controller of the folder Magazione.</p>\n\n<p>For example i try</p>\n\n<pre><code>CarsDatatable.new\n\nor \n\nEssa::Person::CarsDatatable\n\nbut I have an error\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "url", "parameters", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 1708, "user_id": 3569921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/077N5.jpg?s=128&g=1", "display_name": "marcusshep", "link": "https://stackoverflow.com/users/3569921/marcusshep"}, "edited": false, "score": 0, "creation_date": 1505236266, "post_id": 46178376, "comment_id": 79326915, "body": "Can you accept one of these answers? I only ask because I notice <a href=\"https://stackoverflow.com/questions/46180987/rails-5-query-to-pull-posts-from-same-category-other-than-the-post-im-currently\">you just asked another question where you accepted an answer</a> yet neglected to accept an answer here."}], "answers": [{"tags": [], "owner": {"reputation": 89, "user_id": 7497632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/034a3a170972c07cb03d5f9564911dc6?s=128&d=identicon&r=PG&f=1", "display_name": "jon1467", "link": "https://stackoverflow.com/users/7497632/jon1467"}, "is_accepted": false, "score": 2, "last_activity_date": 1505225327, "creation_date": 1505225327, "answer_id": 46178644, "question_id": 46178376, "link": "https://stackoverflow.com/questions/46178376/getting-param-from-friendly-url-like-http-localhost3000-user-adem-balka-with/46178644#46178644", "title": "Getting param from friendly url like http://localhost:3000/user/adem-balka with Rails 5", "body": "<p>The name of a parameter in a url is set in your routes file.</p>\n\n<p>If you look at your routes in <code>config/routes.rb</code>, you should  be able to find the line(s) that corresponds to the user model. It should look something like this:</p>\n\n<p><code>get '/users/:name', to: 'users#show'</code></p>\n\n<p>This means that if you go to /users/adem-balka, params[:name] will be set to 'adem-balka'. You can then access the parameter in the corresponding controller function.</p>\n"}, {"tags": [], "owner": {"reputation": 1708, "user_id": 3569921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/077N5.jpg?s=128&g=1", "display_name": "marcusshep", "link": "https://stackoverflow.com/users/3569921/marcusshep"}, "is_accepted": false, "score": 1, "last_activity_date": 1505225356, "creation_date": 1505225356, "answer_id": 46178655, "question_id": 46178376, "link": "https://stackoverflow.com/questions/46178376/getting-param-from-friendly-url-like-http-localhost3000-user-adem-balka-with/46178655#46178655", "title": "Getting param from friendly url like http://localhost:3000/user/adem-balka with Rails 5", "body": "<pre><code># routes.rb\nget '/users/:username' =&gt; 'users#posts'\n\n\n# users_controller.rb\ndef posts\n  username = params[:username]\n  # etc..\nend\n</code></pre>\n\n<p>This is described in the <a href=\"http://edgeguides.rubyonrails.org/action_controller_overview.html#routing-parameters\" rel=\"nofollow noreferrer\">Rails Docs</a> as Routing Parameters.</p>\n"}, {"tags": [], "owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "is_accepted": false, "score": 2, "last_activity_date": 1505225706, "last_edit_date": 1505225706, "creation_date": 1505225374, "answer_id": 46178663, "question_id": 46178376, "link": "https://stackoverflow.com/questions/46178376/getting-param-from-friendly-url-like-http-localhost3000-user-adem-balka-with/46178663#46178663", "title": "Getting param from friendly url like http://localhost:3000/user/adem-balka with Rails 5", "body": "<p>What you are looking for is a path parameter, where <code>adem-balka</code> is say <code>params[:username]</code>.</p>\n\n<p>Assuming you have no forward slashes or dots in your parameter, this is as simple as adding <code>/:username</code> as part of your route, e.g.</p>\n\n<pre><code>get '/users/:username', to: 'users#show'\n\n\n# in the controller\n@user = User.find_by(username: params[:username])\n</code></pre>\n\n<p>This is all covered in the <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">Rails Routing from the Outside In</a> guide.</p>\n\n<p>Note that the routes generated <code>resources</code> already contain the <code>:id</code> path parameter for you (for <code>show</code>, <code>edit</code>, etc.). But even if you change the controller, the generated helpers (e.g. <code>users_path(@user)</code>) will use the id.</p>\n\n<p>To make it work with <code>resources</code> using say <code>username</code> instead of <code>id</code> however (e.g. <code>users_path(@user)</code> giving <code>/users/ben</code> instead of <code>/users/5</code>), you need to also override the <code>to_param</code> method, e.g.</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  def to_param\n    username #rather than id\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 849, "user_id": 2601689, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/KKSIm.jpg?s=128&g=1", "display_name": "Designer", "link": "https://stackoverflow.com/users/2601689/designer"}, "is_accepted": true, "score": 0, "last_activity_date": 1505225990, "creation_date": 1505225990, "answer_id": 46178903, "question_id": 46178376, "link": "https://stackoverflow.com/questions/46178376/getting-param-from-friendly-url-like-http-localhost3000-user-adem-balka-with/46178903#46178903", "title": "Getting param from friendly url like http://localhost:3000/user/adem-balka with Rails 5", "body": "<p>thank you for the answers. I learned from them \ud83d\ude4f</p>\n\n<p>and this solved my problem </p>\n\n<pre><code>  @user_id = User.friendly.find(params[:id])\n  @posts = Post.where(user_id: @user_id)\n</code></pre>\n"}], "owner": {"reputation": 849, "user_id": 2601689, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/KKSIm.jpg?s=128&g=1", "display_name": "Designer", "link": "https://stackoverflow.com/users/2601689/designer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 46178903, "answer_count": 4, "score": 1, "last_activity_date": 1505225990, "creation_date": 1505224626, "last_edit_date": 1505224776, "question_id": 46178376, "link": "https://stackoverflow.com/questions/46178376/getting-param-from-friendly-url-like-http-localhost3000-user-adem-balka-with", "title": "Getting param from friendly url like http://localhost:3000/user/adem-balka with Rails 5", "body": "<p>So I want to display posts for an user in his/her profile page as at top user details, below all the posts.</p>\n\n<p>I know I can get param from a url like <strong><a href=\"http://localhost:3000/posts?category=article\" rel=\"nofollow noreferrer\">http://localhost:3000/posts?category=article</a></strong></p>\n\n<p>with </p>\n\n<pre><code>if params[:category]\n  @category_id = Category.find_by(title: params[:category]).id\n  @posts = Post.where(category_id: @category_id)\nend\n</code></pre>\n\n<hr>\n\n<p>but param doesn't work when I have an url like <strong><a href=\"http://localhost:3000/user/adem-balka\" rel=\"nofollow noreferrer\">http://localhost:3000/user/adem-balka</a></strong></p>\n\n<p><strong>So, how can I get user name to find its id and pull posts with that user id?</strong></p>\n\n<p>Thank you all. </p>\n"}, {"tags": ["ruby", "google-drive-api", "httparty"], "answers": [{"tags": [], "owner": {"reputation": 65, "user_id": 8125349, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/swnsg.jpg?s=128&g=1", "display_name": "Vincent Cheloudiakoff", "link": "https://stackoverflow.com/users/8125349/vincent-cheloudiakoff"}, "is_accepted": true, "score": 2, "last_activity_date": 1505228209, "creation_date": 1505228209, "answer_id": 46179675, "question_id": 46177863, "link": "https://stackoverflow.com/questions/46177863/get-authorization-for-google-drive-api-calls-in-ruby-with-httparty/46179675#46179675", "title": "Get authorization for google drive api calls in ruby with HTTParty", "body": "<p>I found the answer to my question !</p>\n\n<p>My error was not on the Authorization, but on the fields request parameter that i'd forgot!</p>\n\n<p><code>HTTParty.get('https://www.googleapis.com/drive/v3/about?fields=kind,user', headers: {'Authorization' =&gt; \"Bearer #{service.authorization.access_token}\"})</code> for example.</p>\n\n<p>thank's to this documentation:</p>\n\n<p><a href=\"https://developers.google.com/drive/v3/web/performance?authuser=0#partial\" rel=\"nofollow noreferrer\">https://developers.google.com/drive/v3/web/performance?authuser=0#partial</a></p>\n\n<p>see you !</p>\n"}], "owner": {"reputation": 65, "user_id": 8125349, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/swnsg.jpg?s=128&g=1", "display_name": "Vincent Cheloudiakoff", "link": "https://stackoverflow.com/users/8125349/vincent-cheloudiakoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 46179675, "answer_count": 1, "score": 0, "last_activity_date": 1505228209, "creation_date": 1505223226, "question_id": 46177863, "link": "https://stackoverflow.com/questions/46177863/get-authorization-for-google-drive-api-calls-in-ruby-with-httparty", "title": "Get authorization for google drive api calls in ruby with HTTParty", "body": "<p>i want to have authorization access, for google drive api calls.</p>\n\n<p>I use ruby, and HTTParty gem.</p>\n\n<p>I followed this quickstart sample: <a href=\"https://developers.google.com/drive/v3/web/quickstart/ruby\" rel=\"nofollow noreferrer\">https://developers.google.com/drive/v3/web/quickstart/ruby</a></p>\n\n<p>Then, i want to used HTTParty for use this API, and i understand that i have to get an authorization with the user's access_token obtained with the credentials above, but when i tried this code <code>HTTParty.get('https://www.googleapis.com/drive/v3/about', headers: {'Authorization' =&gt; \"Bearer #{service.authorization.access_token}\"})</code></p>\n\n<p>i've got this error status :\n<code>....\"code\"=&gt;400, \"message\"=&gt;\"The 'fields' parameter is required for this method.\"}}, @response=#&lt;Net::HTTPBadRequest 400 Bad Request readbody=true&gt;,....</code> </p>\n\n<p>My goal is to make some tests about the usage of Google Drive API.</p>\n\n<p>How should i have an authorization access for this API?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 3392, "user_id": 2717416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc2a55ce261e8901476f37dafae815a?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Zeiseweis", "link": "https://stackoverflow.com/users/2717416/jan-zeiseweis"}, "edited": false, "score": 1, "creation_date": 1505222891, "post_id": 46177670, "comment_id": 79317782, "body": "Try using <code>Rails.root.join(&#39;config&#39;, &#39;boot&#39;)</code>"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1505223105, "post_id": 46177670, "comment_id": 79317931, "body": "Please post the full stacktrace of error."}], "answers": [{"tags": [], "owner": {"reputation": 3394, "user_id": 948169, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/109adf7a75c28e8955c31684b772ca27?s=128&d=identicon&r=PG", "display_name": "Mohanraj", "link": "https://stackoverflow.com/users/948169/mohanraj"}, "is_accepted": false, "score": 0, "last_activity_date": 1505222984, "creation_date": 1505222984, "answer_id": 46177774, "question_id": 46177670, "link": "https://stackoverflow.com/questions/46177670/typeerror-no-implicit-conversion-of-pathname-into-string/46177774#46177774", "title": "TypeError: no implicit conversion of Pathname into String", "body": "<p>You have use the below format to require a ruby file,</p>\n\n<pre><code>require File.expand_path('../../../config/environment',  __FILE__)\n</code></pre>\n\n<p>Please specify correct <strong>../</strong> to correct location of file.</p>\n"}, {"tags": [], "owner": {"reputation": 651, "user_id": 7644846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/131da3dcef0f01ebd7ed9cd22214b297?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/7644846/victor"}, "is_accepted": false, "score": 2, "last_activity_date": 1532402584, "creation_date": 1532402584, "answer_id": 51490004, "question_id": 46177670, "link": "https://stackoverflow.com/questions/46177670/typeerror-no-implicit-conversion-of-pathname-into-string/51490004#51490004", "title": "TypeError: no implicit conversion of Pathname into String", "body": "<p>Have you tried to do <code>Rails.root.to_s</code>?\nI guess the problem is that <code>Rails.root</code> is a <code>PathName</code>, not a <code>String</code>, as you can see on the below picture.</p>\n\n<p><a href=\"https://i.stack.imgur.com/N56Lc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N56Lc.png\" alt=\"enter image description here\"></a></p>\n\n<p>You can easily concatenate with the <code>+</code> operator if you cast the <code>Rails.root</code> to <code>String</code>. Please check the below picture.</p>\n\n<p><a href=\"https://i.stack.imgur.com/X6Rx1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/X6Rx1.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2795, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1532402584, "creation_date": 1505222669, "question_id": 46177670, "link": "https://stackoverflow.com/questions/46177670/typeerror-no-implicit-conversion-of-pathname-into-string", "title": "TypeError: no implicit conversion of Pathname into String", "body": "<p>I want to use this code to run rake task:</p>\n\n<pre><code>task :backup_and_delete_old_data =&gt; :environment do\n      if defined?(Rails)\n        require Rails.root + '/config/boot'\n      else\n        require '../../../config/boot'\n      end\n      require Rails.root + '/config/environment'\n\n      factory_backup.each do |factory_data|\n        puts \"&gt;&gt; Backup and delete old #{factory_data.to_s.pluralize.humanize} data...\"\n        factory_data.factory_backup(backup_and_delete_old_data)\n      end\n    end\n</code></pre>\n\n<p>But when I run the rake task I get error:</p>\n\n<pre><code>TypeError: no implicit conversion of Pathname into String\n</code></pre>\n\n<p>for this line:</p>\n\n<pre><code>require Rails.root + '/config/boot'\n</code></pre>\n\n<p>Do you know how I can fix this issue?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "edited": false, "score": 0, "creation_date": 1505219695, "post_id": 46175446, "comment_id": 79315235, "body": "Can you indicate the command you&#39;re running?"}], "answers": [{"comments": [{"owner": {"reputation": 466, "user_id": 3851079, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d176f6e976251ee501678010ea6a1a10?s=128&d=identicon&r=PG&f=1", "display_name": "Geeshan", "link": "https://stackoverflow.com/users/3851079/geeshan"}, "edited": false, "score": 1, "creation_date": 1505220946, "post_id": 46176521, "comment_id": 79316109, "body": "The issue was due to not adding &#39;tiny_tds&#39; to the Gemfile ( I have added it to Gemfile.lock by mistake). Adding the gem and running &#39;bundle install&#39; resolved the issue.   Thanks!"}], "tags": [], "owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "is_accepted": true, "score": 1, "last_activity_date": 1505219656, "creation_date": 1505219656, "answer_id": 46176521, "question_id": 46175446, "link": "https://stackoverflow.com/questions/46175446/error-loading-tiny-tds-in-centos-7/46176521#46176521", "title": "Error Loading tiny_tds in CentOS 7", "body": "<p>It looks like your job is running with bundler, which means it will look in Gemfile.lock to find the version. Even if it's installed on your OS, it won't work if it's not in the Gemfile.</p>\n\n<p>Therefore, ensure it's specified in the Gemfile, run <code>bundle</code>, and try again.</p>\n"}], "owner": {"reputation": 466, "user_id": 3851079, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d176f6e976251ee501678010ea6a1a10?s=128&d=identicon&r=PG&f=1", "display_name": "Geeshan", "link": "https://stackoverflow.com/users/3851079/geeshan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 46176521, "answer_count": 1, "score": 0, "last_activity_date": 1505219656, "creation_date": 1505216389, "question_id": 46175446, "link": "https://stackoverflow.com/questions/46175446/error-loading-tiny-tds-in-centos-7", "title": "Error Loading tiny_tds in CentOS 7", "body": "<p>I'm trying to use the tiny_tds to connect to a MS SQL with Dashing widget.  I run into below error when trying to start my job. </p>\n\n<blockquote>\n  <p>/root/.rbenv/versions/2.4.1/lib/ruby/gems/2.4.0/gems/thin-1.6.4/lib/thin/server.rb:107:\n  warning: constant ::Fixnum is deprecated bundler: failed to load\n  command: thin (/root/.rbenv/versions/2.4.1/bin/thin) LoadError: cannot\n  load such file -- tiny_tds</p>\n</blockquote>\n\n<p>The gem is already installed. </p>\n\n<blockquote>\n  <p>[root@localhost todo]#  gem list | grep tiny_tds tiny_tds (2.0.0)</p>\n  \n  <p>[root@localhost todo]# tsql -C [TinyTds][v2.0.0][tsql]: /usr/bin/tsql\n  Compile-time settings (established with the \"configure\" script)\n                              Version: freetds v0.95.81\n               freetds.conf directory: /etc\n       MS db-lib source compatibility: yes\n          Sybase binary compatibility: yes\n                        Thread safety: yes\n                        iconv library: yes\n                          TDS version: 4.2\n                                iODBC: no\n                             unixodbc: yes\n                SSPI \"trusted\" logins: no\n                             Kerberos: yes\n                              OpenSSL: no\n                               GnuTLS: yes</p>\n  \n  <p>[root@localhost todo]# yum list freetds* Loaded plugins:\n  fastestmirror, langpacks Loading mirror speeds from cached hostfile  *\n  base: ftp.iitm.ac.in  * epel: epel.mirror.angkasa.id  * extras:\n  ftp.iitm.ac.in  * updates: ftp.iitm.ac.in Installed Packages\n  freetds.x86_64<br>\n  0.95.81-1.el7                                              @epel freetds-devel.x86_64<br>\n  0.95.81-1.el7                                              @epel Available Packages freetds-doc.noarch<br>\n  0.95.81-1.el7                                              epel [root@localhost todo]#</p>\n</blockquote>\n\n<p>I don't have much experience working with Ruby so please let me know if you need further information. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "actionmailer"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6166285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Uvt8.jpg?s=128&g=1", "display_name": "Valvyn", "link": "https://stackoverflow.com/users/6166285/valvyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1505222537, "creation_date": 1505222537, "answer_id": 46177622, "question_id": 46175402, "link": "https://stackoverflow.com/questions/46175402/custom-email-header-is-only-present-after-a-console-reload/46177622#46177622", "title": "Custom email header is only present after a console reload", "body": "<p>Alright so the issue has to do with defaults being cashed for an email.\nSo the defaults are not rechecked when you resend the email.</p>\n\n<p>To work around this I changed the way the gem handles to act in between each mail that I want to send by doing the following.</p>\n\n<ol>\n<li>intercept the call for deliver_message</li>\n<li><code>mail.header[:'FOO'] = 'BAR'</code></li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 6166285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Uvt8.jpg?s=128&g=1", "display_name": "Valvyn", "link": "https://stackoverflow.com/users/6166285/valvyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1505222537, "creation_date": 1505216236, "question_id": 46175402, "link": "https://stackoverflow.com/questions/46175402/custom-email-header-is-only-present-after-a-console-reload", "title": "Custom email header is only present after a console reload", "body": "<p>I have been trying to set a global email header across all of our projects with the help of a gem of ours. Currently that gem is used to add a BCC email to all of our emails among other things. I added the code for the header to the method that adds the BCC email address.</p>\n\n<p>The BCC address is added correctly throughout all of our projects so I know that this line of code is definitely run on startup.</p>\n\n<p>This is the code of the gem in question.</p>\n\n<pre><code>  ActionMailer::Base.default \"FOO\" =&gt; 'BAR'\n  bcc = message.bcc.to_a\n  bcc &lt;&lt; BCC_ADDRESS\n  message.bcc bcc\n</code></pre>\n\n<p>The idea is that this header is present throughout all of our emails.</p>\n\n<p>Now comes the interesting part and the steps I have taken to create the issue that I am having.</p>\n\n<ol>\n<li>bundle the project with that new gem version</li>\n<li>start up a rails console</li>\n<li>send any random email</li>\n<li>be disappointed that the header does not appear in the email. However the BCC address is properly displayed.</li>\n<li>run <code>reload!</code></li>\n<li>send the email again</li>\n<li>be confused as to why the header suddenly is present</li>\n</ol>\n\n<p>I tried this in rails 3.2.22.5 (ruby 2.2.4) and rails 4.2.9. (ruby 2.4.1)\nThe header is not included when running specs however the BCC address is present there.</p>\n\n<p>Does anyone have any idea what might be causing these weird symptoms?</p>\n"}, {"tags": ["ruby", "selenium-webdriver", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 3868, "user_id": 2482094, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/81a0ecf0c7d4d429fafbdbbba490f38c?s=128&d=identicon&r=PG", "display_name": "Piotr Galas", "link": "https://stackoverflow.com/users/2482094/piotr-galas"}, "is_accepted": false, "score": 0, "last_activity_date": 1564663935, "creation_date": 1564663935, "answer_id": 57309473, "question_id": 46175332, "link": "https://stackoverflow.com/questions/46175332/disable-javascript-for-chrome-using-capybara-selenium/57309473#57309473", "title": "Disable Javascript for Chrome using Capybara Selenium", "body": "<p>I think it is not possible to disable js for selenium-webdriver, however, you can just use <code>:rack_test</code>. driver instead.</p>\n\n<p>From <code>Capybara</code> documentation:</p>\n\n<blockquote>\n  <p>By default, Capybara uses the :rack_test driver, which is fast but\n  limited: it does not support JavaScript,</p>\n</blockquote>\n\n<p>So in your case it can be:</p>\n\n<pre><code>it \"test description\", driver: :rack_test do\n  ...\nend\n</code></pre>\n"}], "owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1564663935, "creation_date": 1505216087, "question_id": 46175332, "link": "https://stackoverflow.com/questions/46175332/disable-javascript-for-chrome-using-capybara-selenium", "title": "Disable Javascript for Chrome using Capybara Selenium", "body": "<p>I'm wondering if there is a way to disable Javascript for some tests using Selenium-webdriver in Chrome with Capybara.</p>\n\n<p>I have the following:</p>\n\n<pre><code>Capybara.register_driver :selenium do |app|\n\n  opts = Selenium::WebDriver::Chrome::Options.new\n  opts.add_argument '--start-maximized'\n  opts.add_argument '--disable-infobars'\n  opts.add_argument '--disable-features'\n  Capybara::Selenium::Driver.new(app, browser: :chrome, options: opts)\nend\nCapybara.default_driver = :selenium\n</code></pre>\n\n<p>But I don't think that <code>--disable-javascript</code> works now.</p>\n\n<p>I've tried to find an alternative but to no joy.</p>\n\n<p>Would anyone have the solution?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "url"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 3, "creation_date": 1505211856, "post_id": 46173653, "comment_id": 79309981, "body": "Have you tried something?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1505212010, "post_id": 46173653, "comment_id": 79310092, "body": "<a href=\"https://github.com/weppos/publicsuffix-ruby\" rel=\"nofollow noreferrer\">publicsuffix-ruby</a> should help to strip the public suffixes."}, {"owner": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1505212500, "post_id": 46173653, "comment_id": 79310407, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 I update the post with what I tried. I was looking for quick single line solution"}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1505214995, "creation_date": 1505214995, "answer_id": 46175005, "question_id": 46173653, "link": "https://stackoverflow.com/questions/46173653/how-can-remove-https-wwwn-and-public-suffixes-in-ruby/46175005#46175005", "title": "How can remove http(s), www(n) and public suffixes in ruby?", "body": "<p>I can't think of a \"one-liner\", but something like this would work:</p>\n\n<pre><code>require 'uri'\nrequire 'public_suffix'\n\ndef simple_host(uri)\n  uri = URI(uri)\n  uri = URI(\"http://#{uri}\") unless uri.scheme\n  domain = PublicSuffix.parse(uri.host)\n  trd = domain.trd\n  if trd\n    trd = trd.split('.')\n    trd.shift if trd.first.start_with?('www')\n  end\n  [*trd, domain.sld].join('.')\nend\n\nsimple_host('https://mail.google.com.au')                #=&gt; \"mail.google\"\nsimple_host('http://www.google.in')                      #=&gt; \"google\"\nsimple_host('https://www9.calendar.google.co.uk')        #=&gt; \"calendar.google\"\nsimple_host('https://www12.stage.calendar.google.co.uk') #=&gt; \"stage.calendar.google\"\nsimple_host('www.blog.botreetechnologies.com')           #=&gt; \"blog.botreetechnologies\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1708, "user_id": 3569921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/077N5.jpg?s=128&g=1", "display_name": "marcusshep", "link": "https://stackoverflow.com/users/3569921/marcusshep"}, "is_accepted": false, "score": 0, "last_activity_date": 1505224562, "creation_date": 1505224562, "answer_id": 46178352, "question_id": 46173653, "link": "https://stackoverflow.com/questions/46173653/how-can-remove-https-wwwn-and-public-suffixes-in-ruby/46178352#46178352", "title": "How can remove http(s), www(n) and public suffixes in ruby?", "body": "<p>Not a job for one line. But here's a function that does some string manipulation that at least satisfies the test cases you have provided.    </p>\n\n<pre><code>def foo(url)\n  url = url.split(\"//\").last.split(\".\")\n  url = url.each do |word| \n    if word.include?(\"http\") || word.include?(\"www\") || word.length &lt; 3\n      url.delete(word)\n    end\n  end\n  if url.length &gt; 1\n    if url.length &gt;= 3 &amp;&amp; url[2].length &gt; 3\n      url = [url[0], url[1], url[2]].join('.')\n    else\n      url = [url[0], url[1]].join(\".\")\n    end\n  else\n    url = url.first\n  end\nend\n\nfoo 'http://www.google.in'\n# =&gt; 'google'\n\nfoo 'https://www9.calendar.google.co.uk' \n# =&gt; 'calendar.google'\n\nfoo 'https://mail.google.com.au'\n# =&gt; 'mail.google'\n\nfoo 'https://www12.stage.calendar.google.co.uk'\n# =&gt; 'stage.calendar.google'\n\nfoo 'www.blog.botreetechnologies.com'\n# =&gt; 'blog.botreetechnologies'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "is_accepted": true, "score": 0, "last_activity_date": 1505271858, "creation_date": 1505271858, "answer_id": 46188188, "question_id": 46173653, "link": "https://stackoverflow.com/questions/46173653/how-can-remove-https-wwwn-and-public-suffixes-in-ruby/46188188#46188188", "title": "How can remove http(s), www(n) and public suffixes in ruby?", "body": "<p>Here how I fixed that then. On a toe so pasting quickly</p>\n\n<pre><code>def filename(website_domain)\n  domain = website_domain.starts_with?('http') ? website_domain : \"https://#{website_domain}\"\n  uri = URI.parse domain\n  suffix = PublicSuffix.parse(uri.host)\n  name = uri.host.sub(/^www\\d*\\./i, '').sub(/\\.#{suffix.tld}/, '')\n  \"#{name}.filtered.xml\"\nend\n</code></pre>\n"}], "owner": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 1, "accepted_answer_id": 46188188, "answer_count": 3, "score": -1, "last_activity_date": 1505271858, "creation_date": 1505210963, "last_edit_date": 1505215193, "question_id": 46173653, "link": "https://stackoverflow.com/questions/46173653/how-can-remove-https-wwwn-and-public-suffixes-in-ruby", "title": "How can remove http(s), www(n) and public suffixes in ruby?", "body": "<p>Input => Expected Output</p>\n\n<ol>\n<li><code>https://mail.google.com.au</code> => <code>mail.google</code></li>\n<li><code>http://www.google.in</code> => <code>google</code></li>\n<li><code>https://www9.calendar.google.co.uk</code> => <code>calendar.google</code></li>\n<li><code>https://www12.stage.calendar.google.co.uk</code> => <code>stage.calendar.google</code></li>\n<li><code>www.blog.botreetechnologies.com</code> => <code>blog.botreetechnologies</code></li>\n</ol>\n\n<p><strong>Update</strong></p>\n\n<pre><code>t = URI.parse 'http://www.google.com'\nt.host\n#=&gt; \"www.google.com\"\n\nURI.split 'http://www.google.com'\n#=&gt; [\"http\", nil, \"www.google.com\", nil, nil, \"\", nil, nil, nil]\nuri = URI.parse(\"http://www.google.co.uk\")\n#=&gt; #&lt;URI::HTTP http://www.google.co.uk&gt;\ndomain = PublicSuffix.parse(uri.host)\n#=&gt; #&lt;PublicSuffix::Domain:0x00000003c538e0 @sld=\"google\", @tld=\"co.uk\", @trd=\"www\"&gt;\ndomain.sld\n#=&gt; \"google\"\n\nuri = URI.parse(\"http://www.mail.google.co.uk\")\n#=&gt; #&lt;URI::HTTP http://www.mail.google.co.uk&gt;\ndomain = PublicSuffix.parse(uri.host)\n#=&gt; #&lt;PublicSuffix::Domain:0x00000002e97bc0 @sld=\"google\", @tld=\"co.uk\", @trd=\"www.mail\"&gt;\ndomain.sld\n#=&gt; \"google\"\n\n%w[http://www.example.com/page http://blog.example.com/page].each do |u|\n  puts URI.parse(u).host.sub(/^www\\./, '')  \nend  \n# example.com\n# blog.example.com\n\nuri = URI.parse(\"www.pinkpoodles.com.au\")\n#=&gt; #&lt;URI::Generic www.pinkpoodles.com.au&gt;\nuri.host\n#=&gt; nil\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "minimagick"], "comments": [{"owner": {"reputation": 1618, "user_id": 299781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d380305288301a38f4bac69132e19d?s=128&d=identicon&r=PG", "display_name": "Holger Frohloff", "link": "https://stackoverflow.com/users/299781/holger-frohloff"}, "edited": false, "score": 0, "creation_date": 1505209497, "post_id": 46172977, "comment_id": 79308238, "body": "DId you have a look into your logs? Your development.log should have some output from mini_magick, I guess?"}, {"owner": {"reputation": 109, "user_id": 6551529, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f037bfe432f1c0f8c3734eea2d004b21?s=128&d=identicon&r=PG", "display_name": "user6551529", "link": "https://stackoverflow.com/users/6551529/user6551529"}, "reply_to_user": {"reputation": 1618, "user_id": 299781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d380305288301a38f4bac69132e19d?s=128&d=identicon&r=PG", "display_name": "Holger Frohloff", "link": "https://stackoverflow.com/users/299781/holger-frohloff"}, "edited": false, "score": 0, "creation_date": 1505209679, "post_id": 46172977, "comment_id": 79308360, "body": "yeah, it is getting roll back but could not figure it out.I am updating my answer with logs"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1505210567, "post_id": 46172977, "comment_id": 79309014, "body": "You&#39;re probably missing the necessary <code>imagemagick</code> library to manipulate the file. For example, on mac you can: <code>brew install imagemagick</code>."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1505210870, "post_id": 46172977, "comment_id": 79309240, "body": "The error translation should be getting picked up from <a href=\"https://github.com/carrierwaveuploader/carrierwave/blob/c2ee2e89d3aa447c6b81186be6d627202d33a97f/lib/carrierwave/locale/en.yml#L11\" rel=\"nofollow noreferrer\">here</a> -- If you&#39;re defining them locally instead, you&#39;ll need to update that file."}, {"owner": {"reputation": 109, "user_id": 6551529, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f037bfe432f1c0f8c3734eea2d004b21?s=128&d=identicon&r=PG", "display_name": "user6551529", "link": "https://stackoverflow.com/users/6551529/user6551529"}, "edited": false, "score": 0, "creation_date": 1505210892, "post_id": 46172977, "comment_id": 79309260, "body": "I have imagemagick install on my system .Version: ImageMagick 6.8.9-9 Q16 x86_64 2017-07-31 <a href=\"http://www.imagemagick.org\" rel=\"nofollow noreferrer\">imagemagick.org</a>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1505211137, "post_id": 46172977, "comment_id": 79309461, "body": "Try to &quot;upload&quot; a file via <code>rails console</code>. It will (hopefully) show a more meaningful error message."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1505211166, "post_id": 46172977, "comment_id": 79309485, "body": "(Regarding &quot;not defining translations locally&quot;, you can add <code>gem &#39;carrierwave-i18n&#39;</code> to use the built-in translation)"}], "owner": {"reputation": 109, "user_id": 6551529, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f037bfe432f1c0f8c3734eea2d004b21?s=128&d=identicon&r=PG", "display_name": "user6551529", "link": "https://stackoverflow.com/users/6551529/user6551529"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 712, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505209703, "creation_date": 1505209128, "last_edit_date": 1505209703, "question_id": 46172977, "link": "https://stackoverflow.com/questions/46172977/convert-tiff-to-png-or-jpg-image", "title": "Convert tiff to png or jpg image", "body": "<p>I am trying to save an image with format tiff. It is getting saved but the problem is tiff format is not compatible with all browser so I need to convert the image while saving it. I am using carrier wave and mini-magick. Whenever I try to save tiff image I am getting this error Attachment .\n   <strong>translation missing: en.errors.messages.mini_magick_processing_error</strong></p>\n\n<p><strong>Attachment Uploader</strong></p>\n\n<pre><code>class AttachmentUploader &lt; CarrierWave::Uploader::Base\n   include CarrierWave::MiniMagick\n\n  storage :file\n\n    version :normal do\n    process :mogrify =&gt; [{\n      :resolution =&gt; '108x369'\n    }]\n  end\n\n  def default_url\n    \"#{model.class.to_s.underscore.downcase}/#{mounted_as}/missing/\" + [version_name, 'missing.png'].compact.join('_')\n  end\n\n def extension_white_list\n    %w(jpg jpeg gif png bmp tif tiff)\n  end\n\n  def filename\n    \"#{model.nicely_formatted_filename}.png\"\n  end\n\nprivate\n\n  def mogrify(options = {})\n    manipulate! do |img|\n\n      img.format(\"png\") do |c|\n        c.fuzz        \"3%\"\n        c.trim\n        c.rotate      \"#{options[:rotate]}\" if options.has_key?(:rotate)\n        c.resize      \"#{options[:resolution]}&gt;\" if options.has_key?(:resolution)\n        c.resize      \"#{options[:resolution]}&lt;\" if options.has_key?(:resolution)\n        c.profile.+   \"!xmp,*\"\n        c.profile     \"#{Rails.root}/lib/color_profiles/sRGB_v4_ICC_preference_displayclass.icc\"\n        c.colorspace  \"sRGB\"\n      end\n      img\n    end\n  end\n\nend\n</code></pre>\n\n<p><strong>Log</strong></p>\n\n<pre><code>  ActiveRecord::SchemaMigration Load (0.3ms)  SELECT `schema_migrations`.* FROM `schema_migrations`\nProcessing by ResumesController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"STirkPS7rf8aHuvAhLrW/06tL+psjaxXZMfFiuja5mEmInq1Pzf0EZxjE1r66vC9eLE64jUDC+AnvzYb1r4wGQ==\", \"resume\"=&gt;{\"name\"=&gt;\"asas\", \"attachment\"=&gt;#&lt;ActionDispatch::Http::UploadedFile:0x00000002c509e8 @tempfile=#&lt;Tempfile:/tmp/RackMultipart20170912-27107-9zr3ju.tiff&gt;, @original_filename=\"relayOutputMessageSmall.tiff\", @content_type=\"image/tiff\", @headers=\"Content-Disposition: form-data; name=\\\"resume[attachment]\\\"; filename=\\\"relayOutputMessageSmall.tiff\\\"\\r\\nContent-Type: image/tiff\\r\\n\"&gt;}, \"commit\"=&gt;\"Save\"}\n   (0.1ms)  BEGIN\n   (0.1ms)  ROLLBACK\n  Rendered resumes/new.html.erb within layouts/application (12.1ms)\nCompleted 200 OK in 354ms (Views: 275.1ms | ActiveRecord: 1.1ms)\n</code></pre>\n"}, {"tags": ["sql", "ruby", "sequel"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1505209812, "post_id": 46171537, "comment_id": 79308455, "body": "What SQL query are you trying to generate?"}, {"owner": {"reputation": 47, "user_id": 1979960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63ab3207099a6f7aed66d61fc93bfe48?s=128&d=identicon&r=PG", "display_name": "Klarre", "link": "https://stackoverflow.com/users/1979960/klarre"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1505276396, "post_id": 46171537, "comment_id": 79339895, "body": "SELECT * FROM table1 LEFT OUTER JOIN table2 ON ((table2.table1_id = table1.id) AND (table2.column1 &gt; table1.column1));"}], "owner": {"reputation": 47, "user_id": 1979960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63ab3207099a6f7aed66d61fc93bfe48?s=128&d=identicon&r=PG", "display_name": "Klarre", "link": "https://stackoverflow.com/users/1979960/klarre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505276537, "creation_date": 1505205085, "last_edit_date": 1505276537, "question_id": 46171537, "link": "https://stackoverflow.com/questions/46171537/greater-lesser-than-operators-in-sequel", "title": "Greater/lesser than operators in Sequel", "body": "<p>Is there a way to compare Sequel.qualifys with other operators than =>?</p>\n\n<p>I want to do like this, but that doesn't work. What is the proper way?</p>\n\n<pre><code>DB[:table1].graph(:table2, Sequel.qualify(:table2, :column1) &gt; Sequel.qualify(:table1, :column1))\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 812, "user_id": 1800474, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jwTww.jpg?s=128&g=1", "display_name": "RajG", "link": "https://stackoverflow.com/users/1800474/rajg"}, "edited": false, "score": 3, "creation_date": 1505202991, "post_id": 46170810, "comment_id": 79303848, "body": "Wouldn&#39;t dependency_true on each model (with defined model association) be more appropriate on this scenario and use one delete_all to delete the dependencies?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1505203101, "post_id": 46170810, "comment_id": 79303934, "body": "Why did you tag your question with <code>ruby-on-rails-3</code> and <code>ruby-on-rails-4</code>, are you targeting both versions?"}], "answers": [{"tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": true, "score": 4, "last_activity_date": 1505204124, "last_edit_date": 1505204124, "creation_date": 1505202842, "answer_id": 46170900, "question_id": 46170810, "link": "https://stackoverflow.com/questions/46170810/implement-array-and-iterate/46170900#46170900", "title": "Implement array and iterate", "body": "<p>Something like that?</p>\n\n<pre><code>[Model1, Model2].each do |model|\n  model.public_send(:delete_all)\nend \n</code></pre>\n\n<p>Or with using <a href=\"https://ruby-doc.org/core-2.2.2/Symbol.html#method-i-to_proc\" rel=\"nofollow noreferrer\"><code>Symbol#to_proc</code></a>:</p>\n\n<pre><code>[Model1, Model2].each(&amp;:delete_all)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6929, "user_id": 1262519, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/zvPMu.jpg?s=128&g=1", "display_name": "Sachin Singh", "link": "https://stackoverflow.com/users/1262519/sachin-singh"}, "is_accepted": false, "score": 2, "last_activity_date": 1505202974, "creation_date": 1505202974, "answer_id": 46170948, "question_id": 46170810, "link": "https://stackoverflow.com/questions/46170810/implement-array-and-iterate/46170948#46170948", "title": "Implement array and iterate", "body": "<p>try this out:</p>\n\n<pre><code>  if args[:remove_existing_trxs] == 'true'\n    [Acquirer, Company, Currency, AdminUser,\n    BaseReseller, Terminal, Contract, Merchant,\n    MerchantUser, PaymentTransaction].each(&amp;:destroy_all)\n  end\n</code></pre>\n"}], "owner": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 46170900, "answer_count": 2, "score": 1, "last_activity_date": 1505204124, "creation_date": 1505202567, "last_edit_date": 1505203590, "question_id": 46170810, "link": "https://stackoverflow.com/questions/46170810/implement-array-and-iterate", "title": "Implement array and iterate", "body": "<p>I have this Ruby code that I want to use:</p>\n\n<pre><code>if args[:remove_existing_trxs] == 'true'\n    Acquirer.delete_all\n    Company.delete_all\n    Currency.delete_all\n    AdminUser.delete_all\n    BaseReseller.delete_all\n    Terminal.delete_all\n    Contract.delete_all\n    Merchant.delete_all\n    MerchantUser.delete_all\n    PaymentTransaction.delete_all\n  end\n</code></pre>\n\n<p>How can I define it as an array and iterate?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8596054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0128a9069e48e149242263d7cfdcab55?s=128&d=identicon&r=PG&f=1", "display_name": "Kneternal", "link": "https://stackoverflow.com/users/8596054/kneternal"}, "edited": false, "score": 0, "creation_date": 1505268085, "post_id": 46170947, "comment_id": 79338080, "body": "Thank you so much for explanation. Yeah, error should be 4 instead of 3 since the initial array is [1, 2, 3, 4] instead of [1, 2, 3]. As you said, it should be the n to be returned at the end. Anyway, problem solved.  Appreciated your help."}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 0, "last_activity_date": 1505203428, "last_edit_date": 1505203428, "creation_date": 1505202971, "answer_id": 46170947, "question_id": 46170470, "link": "https://stackoverflow.com/questions/46170470/ruby-fiber-additional-resume/46170947#46170947", "title": "Ruby fiber additional resume", "body": "<p>The reason is that <code>n.times</code> returns <code>n</code>:</p>\n\n<pre><code> 1.times { } # =&gt; 1\n</code></pre>\n\n<p>and the return value from <code>permgen</code> is being caught and evaluated as part of <code>it</code> and thus printed out. Too tired atm to go through and fully understand what's yielded or resumed where and when to try and explain how it's getting caught up and printed as if it was a permutation, but you can fix the code by just changing <code>permgen</code> to:</p>\n\n<pre><code>def permgen (a, n)\n  if n == 0 then\n    Fiber.yield a\n  else\n    n.times do |i|\n      a[n-1], a[i] = a[i], a[n-1]\n      permgen(a, n - 1)\n      a[n-1], a[i] = a[i], a[n-1]\n    end\n\n    nil # &lt;&lt; This is all I added\n  end\nend\n</code></pre>\n\n<hr>\n\n<p>As a side note, when I ran your code it was printing a <code>4</code> not a <code>3</code> at the end, based this answer on that being a typo or the result of a different array or playing around with different sized permutations.</p>\n"}], "owner": {"reputation": 1, "user_id": 8596054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0128a9069e48e149242263d7cfdcab55?s=128&d=identicon&r=PG&f=1", "display_name": "Kneternal", "link": "https://stackoverflow.com/users/8596054/kneternal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505203428, "creation_date": 1505201452, "last_edit_date": 1505201514, "question_id": 46170470, "link": "https://stackoverflow.com/questions/46170470/ruby-fiber-additional-resume", "title": "Ruby fiber additional resume", "body": "<p>In this example, the fiber is resumed once more to create one more output unexpectedly. The target is to print all the permutation of one array of numbers by iterating through all the possibilities with recursion and print out the result in a fiber.</p>\n\n<pre><code>class Fiber\n  def self.wrap\n    if block_given?\n      f=Fiber.new do |*args|\n         yield *args\n      end\n      return lambda{|*args| f.resume(*args) if f.alive? }\n    end\n  end\nend\nclass FiberIterator\n  def initialize\n    @fiber_wrap=Fiber.wrap do\n        yield\n    end\n  end\n  def each\n    while value=@fiber_wrap.call\n      yield value\n    end\n  end\nend\ndef perm(a)\n  FiberIterator.new{ permgen(a,a.size) }\nend\ndef permgen (a, n)\n    if n == 0 then\n       Fiber.yield a\n    else\n        n.times do |i|\n           a[n-1], a[i] = a[i], a[n-1]\n           permgen(a, n - 1)\n           a[n-1], a[i] = a[i], a[n-1]\n       end\n    end\nend\ndef printResult (a)\n    p a\nend\n\nit=perm([1,2,3,4])\nfor a in it\n  printResult(a)\nend\n</code></pre>\n\n<p>The result will include an additional 3 after print out all the permutations have been printed. Could anyone help with this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "whenever"], "comments": [{"owner": {"reputation": 1814, "user_id": 2119317, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65e386ab94962682b0abd72463670e23?s=128&d=identicon&r=PG", "display_name": "Pardeep Saini", "link": "https://stackoverflow.com/users/2119317/pardeep-saini"}, "edited": false, "score": 0, "creation_date": 1505190509, "post_id": 46167310, "comment_id": 79297828, "body": "you can find step by step implementation on whenever gem   at <a href=\"https://www.sitepoint.com/schedule-cron-jobs-whenever-gem/\" rel=\"nofollow noreferrer\">sitepoint.com/schedule-cron-jobs-whenever-gem</a>"}, {"owner": {"reputation": 110, "user_id": 7358723, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-tQJP8KkAkcU/AAAAAAAAAAI/AAAAAAAAAF4/7bj082DABK0/photo.jpg?sz=128", "display_name": "Lucas Barreto", "link": "https://stackoverflow.com/users/7358723/lucas-barreto"}, "reply_to_user": {"reputation": 1814, "user_id": 2119317, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65e386ab94962682b0abd72463670e23?s=128&d=identicon&r=PG", "display_name": "Pardeep Saini", "link": "https://stackoverflow.com/users/2119317/pardeep-saini"}, "edited": false, "score": 0, "creation_date": 1505221799, "post_id": 46167310, "comment_id": 79316823, "body": "I did all the instructions. Still doesn&#39;t work. Could the problem be with the path of my output file ?"}], "answers": [{"comments": [{"owner": {"reputation": 110, "user_id": 7358723, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-tQJP8KkAkcU/AAAAAAAAAAI/AAAAAAAAAF4/7bj082DABK0/photo.jpg?sz=128", "display_name": "Lucas Barreto", "link": "https://stackoverflow.com/users/7358723/lucas-barreto"}, "edited": false, "score": 0, "creation_date": 1505220837, "post_id": 46169271, "comment_id": 79316031, "body": "# Begin Whenever generated tasks for: /home/ubuntu/workspace/site_paraiso/config/schedule.rb * * * * * /bin/bash -l -c &#39;cd /home/ubuntu/workspace/site_paraiso &amp;&amp; RAILS_ENV=development bundle exec rake testando:consulta --silent &gt;&gt; /home/ubuntu/workspace/site_paraiso/log/cron_log.log 2&gt;&amp;1&#39;  # End Whenever generated tasks for: /home/ubuntu/workspace/site_paraiso/config/schedule.rb"}], "tags": [], "owner": {"reputation": 21, "user_id": 2281402, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lN8Rl.jpg?s=128&g=1", "display_name": "teddylee", "link": "https://stackoverflow.com/users/2281402/teddylee"}, "is_accepted": false, "score": 0, "last_activity_date": 1505197317, "creation_date": 1505197317, "answer_id": 46169271, "question_id": 46167310, "link": "https://stackoverflow.com/questions/46167310/how-to-test-rake-tasks-with-whenever-gem/46169271#46169271", "title": "How to test rake tasks with Whenever Gem?", "body": "<p>please run crontab -l to see if you have updated the crontab successfully</p>\n"}], "owner": {"reputation": 110, "user_id": 7358723, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-tQJP8KkAkcU/AAAAAAAAAAI/AAAAAAAAAF4/7bj082DABK0/photo.jpg?sz=128", "display_name": "Lucas Barreto", "link": "https://stackoverflow.com/users/7358723/lucas-barreto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 614, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505224162, "creation_date": 1505185909, "last_edit_date": 1505224162, "question_id": 46167310, "link": "https://stackoverflow.com/questions/46167310/how-to-test-rake-tasks-with-whenever-gem", "title": "How to test rake tasks with Whenever Gem?", "body": "<p>I'm trying to execute a simple rake task using whenever gem but the code isn't being executed.</p>\n\n<p>I already set the environment to development, I updated the cron using the whenever --update-crontab command and the rake task works well if I run the command on console. But, when I run the server the log file is not being generated.</p>\n\n<p>I saw a question here too with the same problem but it was solved setting the environment to development, but didn't work out for me.</p>\n\n<p>My rake task:</p>\n\n<pre><code>namespace :testando do\n  task :consulta =&gt; :environment do\n    produto = Produto.first\n    puts produto.nm_produto\n  end  \nend\n</code></pre>\n\n<p>My schedule.rb:</p>\n\n<pre><code>set :output, \"#{path}/log/cron_log.log\"\nset :environment, 'development'\n\nevery 1.minute do\n  rake \"testando:consulta\"\nend\n</code></pre>\n\n<p>I'm using rails 5.0.0.1 and I'm programing in Cloud9, so I think the OS is Ubuntu.</p>\n\n<p>What's missing ?</p>\n\n<p>Update:</p>\n\n<p>I followed the instructions of the main answer in this topic <a href=\"https://stackoverflow.com/questions/7548730/cron-job-not-working-in-whenever-gem\">Cron job not working in Whenever gem</a></p>\n\n<p>And it worked! The task is running even with the server not being started (with \"rails s\" command).</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ubuntu", "vagrant", "vagrant-windows"], "answers": [{"tags": [], "owner": {"reputation": 4344, "user_id": 1179841, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/efae44f683c6382a19a7d2333f4c306e?s=128&d=identicon&r=PG", "display_name": "Sithu", "link": "https://stackoverflow.com/users/1179841/sithu"}, "is_accepted": true, "score": 0, "last_activity_date": 1505200102, "last_edit_date": 1505200102, "creation_date": 1505195474, "answer_id": 46168824, "question_id": 46167186, "link": "https://stackoverflow.com/questions/46167186/failed-to-build-gem-native-extension-nio4r-in-vagrant-ssh-windows-7-32-bit/46168824#46168824", "title": "Failed to build gem native extension nio4r in Vagrant SSH windows 7 32-bit", "body": "<p>The error mainly addresses to the message <code>Text file busy @ unlink_internal - ./siteconf20170911-24730-8nkvsn.rb</code>. <a href=\"http://joequery.me/guides/bundle-install-text-file-busy/\" rel=\"nofollow noreferrer\">I found a solution and I followed the steps described in the article</a>.</p>\n\n<p>By changing bundle path to a directory that's local to the VM (not on a shared folder) made the error gone away.</p>\n\n<ol>\n<li><p>Create a new directory</p>\n\n<pre><code>mkdir ~/.bundles\n</code></pre></li>\n<li><p>Add this to <code>/vagrant/.bundle/config</code></p>\n\n<pre><code>BUNDLE_PATH: \"/home/vagrant/.bundles/PROJECT_NAME_HERE\"\nBUNDLE_DISABLE_SHARED_GEMS: \"1\"\n</code></pre></li>\n<li>Run <code>bundle install</code></li>\n</ol>\n"}], "owner": {"reputation": 4344, "user_id": 1179841, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/efae44f683c6382a19a7d2333f4c306e?s=128&d=identicon&r=PG", "display_name": "Sithu", "link": "https://stackoverflow.com/users/1179841/sithu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 1, "accepted_answer_id": 46168824, "answer_count": 1, "score": 0, "last_activity_date": 1505200102, "creation_date": 1505185011, "question_id": 46167186, "link": "https://stackoverflow.com/questions/46167186/failed-to-build-gem-native-extension-nio4r-in-vagrant-ssh-windows-7-32-bit", "title": "Failed to build gem native extension nio4r in Vagrant SSH windows 7 32-bit", "body": "<p>I'm setting up Rails environment using <a href=\"https://www.vagrantup.com/\" rel=\"nofollow noreferrer\">Vagrant</a> with the box <a href=\"https://app.vagrantup.com/ubuntu/boxes/trusty32\" rel=\"nofollow noreferrer\">ubuntu/trusty32</a> in Windows 7 32-bit host. I'm stuck with <code>bundle install --path=./vendor/bundle</code>. I got the following error:</p>\n\n<pre><code>Gem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    current directory: /vagrant/vendor/bundle/ruby/2.4.0/gems/nio4r-2.1.0/ext/nio4r\n/home/vagrant/.rbenv/versions/2.4.1/bin/ruby -r ./siteconf20170911-24730-8nkvsn.rb extconf.rb\nchecking for unistd.h... yes\nchecking for sys/select.h... yes\nchecking for poll.h... yes\nchecking for sys/epoll.h... yes\nchecking for sys/event.h... no\nchecking for port.h... no\nchecking for sys/resource.h... yes\ncreating Makefile\n\nText file busy @ unlink_internal - ./siteconf20170911-24730-8nkvsn.rb\n\nGem files will remain installed in /vagrant/vendor/bundle/ruby/2.4.0/gems/nio4r-2.1.0 for inspection.\nResults logged to /vagrant/vendor/bundle/ruby/2.4.0/extensions/x86-linux/2.4.0-static/nio4r-2.1.0/gem_make.out\n\nAn error occurred while installing nio4r (2.1.0), and Bundler cannot continue.\nMake sure that `gem install nio4r -v '2.1.0'` succeeds before bundling.\n\nIn Gemfile:\n  rails_admin was resolved to 1.2.0, which depends on\n    rails was resolved to 5.0.6, which depends on\n      actioncable was resolved to 5.0.6, which depends on\n        nio4r\n</code></pre>\n\n<p>The problem seems to be the issue of the gem <code>nio4r</code>. I have tried these:</p>\n\n<ul>\n<li><code>gem install bundler</code></li>\n<li><code>bundle update</code></li>\n<li><code>gem uninstall nio4r</code></li>\n<li><code>gem install nio4r</code> (this successfully installed the gem)</li>\n<li><code>rm Gemfile.lock</code></li>\n<li><code>bundle install</code></li>\n</ul>\n\n<p>None of the above works. I also tried this:</p>\n\n<pre><code>sudo apt-get install ruby2.2-dev\n</code></pre>\n\n<p>But it couldn't find the package.</p>\n\n<pre><code>E: Unable to locate package ruby2.2-dev\nE: Couldn't find any package by regex 'ruby2.2-dev'\n</code></pre>\n"}, {"tags": ["ruby", "thor"], "answers": [{"comments": [{"owner": {"reputation": 241, "user_id": 602519, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/da71e6e9e7a7d35577be58f08570c8f3?s=128&d=identicon&r=PG", "display_name": "Leon Waldman", "link": "https://stackoverflow.com/users/602519/leon-waldman"}, "edited": false, "score": 0, "creation_date": 1505232567, "post_id": 46167300, "comment_id": 79324837, "body": "The <code>Test.command_help(Thor::Base.shell.new, &#39;run_command&#39;)</code> worked like a charm! Thanks a lot! =))"}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 4, "last_activity_date": 1505185855, "creation_date": 1505185855, "answer_id": 46167300, "question_id": 46166799, "link": "https://stackoverflow.com/questions/46166799/on-rubys-thor-how-to-show-the-command-usage-from-within-the-application/46167300#46167300", "title": "On Ruby&#39;s Thor, How to show the command usage from within the application", "body": "<p>You can use <a href=\"http://www.rubydoc.info/github/erikhuda/thor/Thor.command_help\" rel=\"nofollow noreferrer\"><code>command_help</code></a> to display the help information for the command:</p>\n\n<pre><code>require 'thor'\n\nclass Test &lt; Thor\n  desc 'run_command --from=FROM', 'test usage help'\n  option :from\n  def run_command\n    unless options[:from]\n      Test.command_help(Thor::Base.shell.new, 'run_command')\n      return\n    end\n\n    puts \"Called command from #{options[:from]}\"\n  end\nend\n\nTest.start\n</code></pre>\n\n<p>and then running with no options:</p>\n\n<pre><code>$ ruby example.rb run_command\nUsage:\n  example.rb run_command --from=FROM\n\nOptions:\n  [--from=FROM]\n\ntest usage help\n</code></pre>\n\n<p>and running with the option:</p>\n\n<pre><code>$ ruby example.rb run_command --from=somewhere\nCalled command from somewhere\n</code></pre>\n"}], "owner": {"reputation": 241, "user_id": 602519, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/da71e6e9e7a7d35577be58f08570c8f3?s=128&d=identicon&r=PG", "display_name": "Leon Waldman", "link": "https://stackoverflow.com/users/602519/leon-waldman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 508, "favorite_count": 0, "accepted_answer_id": 46167300, "answer_count": 1, "score": 2, "last_activity_date": 1505185855, "creation_date": 1505181703, "question_id": 46166799, "link": "https://stackoverflow.com/questions/46166799/on-rubys-thor-how-to-show-the-command-usage-from-within-the-application", "title": "On Ruby&#39;s Thor, How to show the command usage from within the application", "body": "<p>I'm building a CLI using Ruby and Thor and I would like to print on the screen the command usage if no option is passed.</p>\n\n<p>Something on the line of the pseudo code bellow:</p>\n\n<pre><code>Class Test &lt; Thor\n  desc 'test', 'test'\n  options :run_command\n\n  def run_command\n    if options.empty?\n      # Print Usage\n    end\n  end\nend\n</code></pre>\n\n<p>Im currently using the following hack (and I'm not proud of it! =P):</p>\n\n<pre><code>Class Test &lt; Thor\n  desc 'test', 'test'\n  options :run_command\n\n  def run_command\n    if options.empty?\n      puts `my_test_command help run_command`\n    end\n  end\nend\n</code></pre>\n\n<p>What would be the proper way to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1505233768, "post_id": 46166527, "comment_id": 79325585, "body": "I think your first solution is far better than a delegation as it adds readability. <code>Accounts#total_tasks</code> makes much more sense than <code>Accounts#total_count</code> (the delegation method) where I am unsure what I am counting. Additionally I agree with @max <code>size</code> is a much better choice of method than <code>count</code> to avoid unnecessary DB hits"}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1505233456, "post_id": 46166766, "comment_id": 79325380, "body": "technically it would be <code>total_count</code> with an underscore but I agree with your complete sentiment"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 5, "last_activity_date": 1505241123, "last_edit_date": 1505241123, "creation_date": 1505181478, "answer_id": 46166766, "question_id": 46166527, "link": "https://stackoverflow.com/questions/46166527/understanding-rails-delegate-method/46166766#46166766", "title": "Understanding rails delegate method", "body": "<pre><code>delegate :count, to: :tasks, prefix: \"total\"\n</code></pre>\n\n<p>This is just meta programming that creates a method:</p>\n\n<pre><code>def total_count\n  tasks.send(:count)\nend\n</code></pre>\n\n<p>This is not really a good fit for delegate though as you should be using <code>size</code> instead of <code>count</code> as the latter always causes a DB query even if the association has been eager loaded.</p>\n\n<pre><code>def tasks_total\n  tasks.size # prevents n+1 query issue.\nend\n</code></pre>\n\n<p>Why you would want to create a method for this is beyond me though as its actually one more character to type.</p>\n"}], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 46166766, "answer_count": 1, "score": 1, "last_activity_date": 1505241123, "creation_date": 1505179686, "question_id": 46166527, "link": "https://stackoverflow.com/questions/46166527/understanding-rails-delegate-method", "title": "Understanding rails delegate method", "body": "<p>I'm trying to learn about delegate method that Rails provides out of the box. Here is what I'm trying to do. So, I have <code>Accounts</code> that have_many <code>Tasks</code>. So I'm trying to get the task count for accounts and here is how I'm currently doing it:</p>\n\n<pre><code>def total_tasks\n  tasks.count\nend\n</code></pre>\n\n<p>Pretty standard thing. But I'm trying to move this method to a delegate method. I've tried this but it's not working</p>\n\n<pre><code> delegate :count, to: :task, prefix: \"total\"\n</code></pre>\n\n<p>That didn't work and I really didn't expect it do. Is there a way I can do this?</p>\n"}, {"tags": ["ruby", "centos", "rvm", "sudoers"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1505208234, "post_id": 46166410, "comment_id": 79307349, "body": "What happens if (and is it possible to?) <i>uninstall</i> the system ruby?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1505208287, "post_id": 46166410, "comment_id": 79307395, "body": "Also, when you say &quot;unable to change the command...&quot; does this mean you&#39;re unable to use <a href=\"https://rvm.io/integration/sudo\" rel=\"nofollow noreferrer\"><code>rvmsudo</code></a>?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1505208386, "post_id": 46166410, "comment_id": 79307479, "body": "...And lastly, are you bound to <code>rvm</code>, or would it be possible to try an alternate version manager? <a href=\"https://github.com/dcarley/rbenv-sudo\" rel=\"nofollow noreferrer\"><code>rbenv-sudo</code></a> may be a viable option."}, {"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1505225847, "post_id": 46166410, "comment_id": 79320051, "body": "Try ` sudo env &quot;PATH=$PATH&quot; ruby -v`. It should give you an idea."}], "owner": {"reputation": 383, "user_id": 1202919, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8a9de5513220e40ff18da42919a917a7?s=128&d=identicon&r=PG&f=1", "display_name": "iRamesh", "link": "https://stackoverflow.com/users/1202919/iramesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505178674, "creation_date": 1505178674, "question_id": 46166410, "link": "https://stackoverflow.com/questions/46166410/sudo-ruby-picks-system-ruby-but-not-rvm-installed-ruby-it-doesnt-work-even-afte", "title": "sudo ruby picks system ruby but not rvm installed ruby. it doesnt work even after adding user in exempt_group option in sudoers file", "body": "<p>after going through some articles I understand that sudo's environment and the commands that it can use are influenced by <code>/etc/sudoers</code> file. </p>\n\n<p>this <code>sudoers</code> manual - <a href=\"https://www.sudo.ws/man/1.8.13/sudoers.man.html\" rel=\"nofollow noreferrer\">https://www.sudo.ws/man/1.8.13/sudoers.man.html</a> - specifies that users in the group specified by <em>exempt_group</em> option are not affected by <code>secure_path</code> which basically alters the sudo's PATH </p>\n\n<p>This is how defaults are set in my <code>/etc/sudoers</code> file </p>\n\n<pre><code>Defaults    always_set_home\n\nDefaults    env_reset\nDefaults    env_keep =  \"COLORS DISPLAY HOSTNAME HISTSIZE KDEDIR LS_COLORS\"\nDefaults    env_keep += \"MAIL PS1 PS2 QTDIR USERNAME LANG LC_ADDRESS LC_CTYPE\"\nDefaults    env_keep += \"LC_COLLATE LC_IDENTIFICATION LC_MEASUREMENT LC_MESSAGES\"\nDefaults    env_keep += \"LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER LC_TELEPHONE\"\nDefaults    env_keep += \"LC_TIME LC_ALL LANGUAGE LINGUAS _XKB_CHARSET XAUTHORITY\"\n\n#\n# Adding HOME to env_keep may enable a user to run unrestricted\n# commands via sudo.\n#\n# Defaults   env_keep += \"HOME\"\n\nDefaults    secure_path = /sbin:/bin:/usr/sbin:/usr/bin\nDefaults    exempt_group=exempt\n</code></pre>\n\n<p><code>exempt</code> is the group on the system that the user is added to. </p>\n\n<p>instead of the <code>group</code> on the system, I have also tried using the <code>group</code> created by <code>User_Alias</code> in <code>/etc/sudoers</code> file. this didnt help either. </p>\n\n<p><code>sudo ruby -v</code> - returns 2.0.0</p>\n\n<p><code>ruby -v</code> - returns 2.3.3</p>\n\n<p>how can <code>sudo</code> pick <code>rvm ruby</code> without modifying secure_path?</p>\n\n<p><code>sudo -i</code> works but in my case the command is a remote ssh command and we dont have access to change that code which triggers the command. please help</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1505173392, "post_id": 46164916, "comment_id": 79293937, "body": "You should definitely use the API if possible, it will be a more long-term solution. Although there are ways to trigger the infinite scroll with an automated browser."}, {"owner": {"reputation": 398, "user_id": 2634453, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/NUcrx.jpg?s=128&g=1", "display_name": "Joe Marion", "link": "https://stackoverflow.com/users/2634453/joe-marion"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1505176462, "post_id": 46164916, "comment_id": 79294664, "body": "I&#39;m still learning, and have only ever used ruby gems when dealing with API&#39;s. I wasn&#39;t able to figure out how to setup the TG api within a rails app when I was reading their docs. I created an app, but I am not sure where to send each query to auth each user."}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1505178823, "post_id": 46164916, "comment_id": 79295096, "body": "The API looks pretty straightforward. Here&#39;s the method you&#39;ll need: <a href=\"https://core.telegram.org/method/messages.getHistory\" rel=\"nofollow noreferrer\">core.telegram.org/method/messages.getHistory</a>"}, {"owner": {"reputation": 398, "user_id": 2634453, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/NUcrx.jpg?s=128&g=1", "display_name": "Joe Marion", "link": "https://stackoverflow.com/users/2634453/joe-marion"}, "edited": false, "score": 0, "creation_date": 1505179260, "post_id": 46164916, "comment_id": 79295168, "body": "I&#39;m unsure of how to call the methods. Are there endpoints that I can send params to?"}, {"owner": {"reputation": 140, "user_id": 3926302, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/i9B6f.gif?s=128&g=1", "display_name": "CatBrownie", "link": "https://stackoverflow.com/users/3926302/catbrownie"}, "edited": false, "score": 0, "creation_date": 1505191558, "post_id": 46164916, "comment_id": 79298114, "body": "Seems like it, the documentation specifies which parameters does the endpoint support, you just have to authenticate first."}, {"owner": {"reputation": 398, "user_id": 2634453, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/NUcrx.jpg?s=128&g=1", "display_name": "Joe Marion", "link": "https://stackoverflow.com/users/2634453/joe-marion"}, "edited": false, "score": 0, "creation_date": 1505195764, "post_id": 46164916, "comment_id": 79299665, "body": "With the API I would have to be a super user for the group I am trying to scrape the history from. I am just a normal user. I am considering creating a background worker that saves incoming messages using Watir. I need 24 hours worth of a chat history, so I could just wait a day with it running."}], "owner": {"reputation": 398, "user_id": 2634453, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/NUcrx.jpg?s=128&g=1", "display_name": "Joe Marion", "link": "https://stackoverflow.com/users/2634453/joe-marion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505167133, "creation_date": 1505167133, "question_id": 46164916, "link": "https://stackoverflow.com/questions/46164916/load-telegram-chat-history-with-watir", "title": "Load telegram chat history with Watir", "body": "<p>I am writing my first webscraper in rails and I need to retrieve the chat history from a group I am a part of in Telegram.</p>\n\n<p>I know telegram is written in React so I couldn't use mechanize so I decided to try Watir for now. I am able to have Watir login and see the group chats, but only the last 100 or so messages display unless you scroll up to display more of the history. So when I use</p>\n\n<p><code>browser.element(class: \"im_history_messages_peer\").text.strip</code></p>\n\n<p>I only get the most recent messages. I see that Telegram has an API, but I am not sure how to use it to log in to my account and get a day's worth of chat histories from my groups. Is Watir a viable option for this kind of scraping job?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "comments": [{"owner": {"reputation": 27630, "user_id": 1550807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JgCw5.png?s=128&g=1", "display_name": "Danil Speransky", "link": "https://stackoverflow.com/users/1550807/danil-speransky"}, "edited": false, "score": 3, "creation_date": 1505166347, "post_id": 46164765, "comment_id": 79292068, "body": "Show what you have in routes.rb"}, {"owner": {"reputation": 576, "user_id": 6432658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/9UtJH.png?s=128&g=1", "display_name": "MisterCal", "link": "https://stackoverflow.com/users/6432658/mistercal"}, "edited": false, "score": 0, "creation_date": 1505169399, "post_id": 46164765, "comment_id": 79292995, "body": "What query params are you using. can you reply with the URL"}, {"owner": {"reputation": 45, "user_id": 8448105, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1394817423959984/picture?type=large", "display_name": "Shashi Yerra", "link": "https://stackoverflow.com/users/8448105/shashi-yerra"}, "edited": false, "score": 0, "creation_date": 1505169862, "post_id": 46164765, "comment_id": 79293125, "body": "Danil Speransky here it is :                                       resources :articles  root &#39;pages#home&#39; get &#39;about&#39;, to: &#39;pages#about&#39;"}, {"owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "edited": false, "score": 0, "creation_date": 1505172138, "post_id": 46164765, "comment_id": 79293664, "body": "Can you show the link you click to go to your &#39;edit&#39; view?"}, {"owner": {"reputation": 45, "user_id": 8448105, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1394817423959984/picture?type=large", "display_name": "Shashi Yerra", "link": "https://stackoverflow.com/users/8448105/shashi-yerra"}, "edited": false, "score": 0, "creation_date": 1505172207, "post_id": 46164765, "comment_id": 79293671, "body": "<a href=\"https://my-app-shashiyerra.c9users.io/articles/edit\" rel=\"nofollow noreferrer\">my-app-shashiyerra.c9users.io/articles/edit</a>"}, {"owner": {"reputation": 45, "user_id": 8448105, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1394817423959984/picture?type=large", "display_name": "Shashi Yerra", "link": "https://stackoverflow.com/users/8448105/shashi-yerra"}, "edited": false, "score": 0, "creation_date": 1505172285, "post_id": 46164765, "comment_id": 79293688, "body": "I think that is what you are talking about if not please clarify.. I am VERY new to programming"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "edited": false, "score": 0, "creation_date": 1505173338, "post_id": 46164765, "comment_id": 79293918, "body": "I think what @EJ2015 means is which link did you <i>click</i> to get there. Showing the HTML of that link is best."}, {"owner": {"reputation": 45, "user_id": 8448105, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1394817423959984/picture?type=large", "display_name": "Shashi Yerra", "link": "https://stackoverflow.com/users/8448105/shashi-yerra"}, "edited": false, "score": 0, "creation_date": 1505173417, "post_id": 46164765, "comment_id": 79293942, "body": "okay but I have it in my question up there in my edit.html.erb"}, {"owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "edited": false, "score": 0, "creation_date": 1505174186, "post_id": 46164765, "comment_id": 79294109, "body": "Which is the link you click before you get to that error page? The error is probably there."}, {"owner": {"reputation": 45, "user_id": 8448105, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1394817423959984/picture?type=large", "display_name": "Shashi Yerra", "link": "https://stackoverflow.com/users/8448105/shashi-yerra"}, "edited": false, "score": 0, "creation_date": 1505174229, "post_id": 46164765, "comment_id": 79294112, "body": "I did not click any link I just changed to articles/edit"}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1505176676, "post_id": 46164765, "comment_id": 79294714, "body": "You should make sure to add any code others ask for to the question instead of the comments...these aren&#39;t always visible or permanent and are harder to read (I&#39;ve added the routes to the question for you). Also, when possible, you should add errors as text instead of images. Those images are blurry and I can&#39;t read either to see what you&#39;re actually talking about"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 8448105, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1394817423959984/picture?type=large", "display_name": "Shashi Yerra", "link": "https://stackoverflow.com/users/8448105/shashi-yerra"}, "edited": false, "score": 0, "creation_date": 1505174910, "post_id": 46166005, "comment_id": 79294277, "body": "I don&#39;t understand"}, {"owner": {"reputation": 20491, "user_id": 511558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/935cbe780c1c0a4adfeb7b2dd404a32e?s=128&d=identicon&r=PG", "display_name": "DanneManne", "link": "https://stackoverflow.com/users/511558/dannemanne"}, "edited": false, "score": 0, "creation_date": 1505175051, "post_id": 46166005, "comment_id": 79294315, "body": "Think of it as you are not supposed to edit all articles at the same time. You can only edit one Article at a time, so if you have an Article in the database with <code>id=5</code>, then going to the link <code>&#47;articles&#47;5&#47;edit</code> will take you to the view where you can edit that particular Article. Does the make sense?"}], "tags": [], "owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "is_accepted": true, "score": 6, "last_activity_date": 1505174837, "creation_date": 1505174837, "answer_id": 46166005, "question_id": 46164765, "link": "https://stackoverflow.com/questions/46164765/activerecordrecordnotfound-in-articlescontrollershow-couldnt-find-article-wi/46166005#46166005", "title": "ActiveRecord::RecordNotFound in ArticlesController#show Couldn&#39;t find Article with &#39;id&#39;=edit", "body": "<p>Then that's the cause of the error. 'edit' page requires an id param otherwise. as in your controller:</p>\n\n<pre><code>def edit \n @article = Article.find(params[:id])\nend \n</code></pre>\n\n<p>It needs <code>params[:id]</code></p>\n\n<p>So you need to use <code>/articles/id/edit</code> (replace id with your actual id)</p>\n"}, {"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1505185062, "post_id": 46167138, "comment_id": 79296441, "body": "Additionally instead of repeating the form create a <code>articles&#47;_form.html.erb</code> partial and include it in your new and edit views with <code>&lt;%= render partial: &#39;form&#39; %&gt;</code>. <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1505185247, "post_id": 46167138, "comment_id": 79296490, "body": "And the correct and polite way to say it is: <code>The following errors prevented the article from being &lt;%= @article.new_record? ? &quot;created&quot; : &quot;updated&quot; %&gt;</code>."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 2, "last_activity_date": 1505184536, "creation_date": 1505184536, "answer_id": 46167138, "question_id": 46164765, "link": "https://stackoverflow.com/questions/46164765/activerecordrecordnotfound-in-articlescontrollershow-couldnt-find-article-wi/46167138#46167138", "title": "ActiveRecord::RecordNotFound in ArticlesController#show Couldn&#39;t find Article with &#39;id&#39;=edit", "body": "<p><code>resources :articles</code> will create a <code>edit_article_path</code> helper that you should use to link to the edit action:</p>\n\n<pre><code>&lt;%= link_to(\"Edit article\", edit_article_path(@article)) %&gt;\n</code></pre>\n\n<p>This will create the correct path with a <code>:id</code> segment:</p>\n\n<pre><code>      Prefix Verb   URI Pattern                  Controller#Action\n    articles GET    /articles(.:format)          articles#index\n             POST   /articles(.:format)          articles#create\n new_article GET    /articles/new(.:format)      articles#new\nedit_article GET    /articles/:id/edit(.:format) articles#edit\n     article GET    /articles/:id(.:format)      articles#show\n             PATCH  /articles/:id(.:format)      articles#update\n             PUT    /articles/:id(.:format)      articles#update\n             DELETE /articles/:id(.:format)      articles#destroy\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 8448105, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1394817423959984/picture?type=large", "display_name": "Shashi Yerra", "link": "https://stackoverflow.com/users/8448105/shashi-yerra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1305, "favorite_count": 0, "accepted_answer_id": 46166005, "answer_count": 2, "score": 1, "last_activity_date": 1505184536, "creation_date": 1505166145, "last_edit_date": 1505176477, "question_id": 46164765, "link": "https://stackoverflow.com/questions/46164765/activerecordrecordnotfound-in-articlescontrollershow-couldnt-find-article-wi", "title": "ActiveRecord::RecordNotFound in ArticlesController#show Couldn&#39;t find Article with &#39;id&#39;=edit", "body": "<p>I am getting an error when I got into articles/edit. </p>\n\n<p>I am getting this error:\n<a href=\"https://i.stack.imgur.com/5ve1D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5ve1D.png\" alt=\"enter image description here\"></a></p>\n\n<p>when I should be getting this error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/QWRZ0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QWRZ0.png\" alt=\"enter image description here\"></a></p>\n\n<p>my code: </p>\n\n<p>articles_controller:</p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\n\n  def new\n    @article = Article.new \n  end\n\n  def edit \n   @article = Article.find(params[:id])\n  end \n\n  def create\n    @article = Article.new(article_params)\n    if @article.save\n      flash[:notice] = \"Article was submitted succsefully\"\n      redirect_to (@article)\n    else\n      render :new\n    end \n  end\n\n  def show\n    @article = Article.find(params[:id])\n  end \n\n  private \n  def article_params \n    params.require(:article).permit(:title, :description)\n  end\nend \n</code></pre>\n\n<p>my edit.html.erb :</p>\n\n<pre><code>&lt;h1&gt;Edit the existing article&lt;/h1&gt;\n&lt;% if @article.errors.any? %&gt;\n&lt;h2&gt;The following errors are informing you that if you don't do these then \nyour articles will not be edited&lt;/h2&gt;\n  &lt;ul&gt;\n    &lt;% @article.errors.full_messages.each do |msg| %&gt;\n      &lt;li&gt; &lt;%= msg %&gt; &lt;/li&gt;\n    &lt;% end %&gt;\n  &lt;/ul&gt;\n&lt;% end %&gt;\n&lt;%= form_for @article do |f| %&gt;\n  &lt;p&gt;\n    &lt;%= f.label :title %&gt;\n    &lt;%= f.text_field:title %&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;%= f.label :description  %&gt;\n    &lt;%= f.text_area :description %&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>my new.html.erb :</p>\n\n<pre><code>&lt;h1&gt;Create an article&lt;/h1&gt;\n&lt;% if @article.errors.any? %&gt;\n&lt;h2&gt;The following errors are informing you that if you don't do these then \nyour articles will not be created&lt;/h2&gt;\n  &lt;ul&gt;\n    &lt;% @article.errors.full_messages.each do |msg| %&gt;\n      &lt;li&gt; &lt;%= msg %&gt; &lt;/li&gt;\n    &lt;% end %&gt;\n  &lt;/ul&gt;\n&lt;% end %&gt;\n&lt;%= form_for @article do |f| %&gt;\n  &lt;p&gt;\n    &lt;%= f.label :title %&gt;\n    &lt;%= f.text_field:title %&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;%= f.label :description  %&gt;\n    &lt;%= f.text_area :description %&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>my routes.rb:</p>\n\n<pre><code>resources :articles\nroot 'pages#home'\nget 'about', to: 'pages#about'\n</code></pre>\n\n<p>Ask Me For More Files If It Helps </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1505165792, "post_id": 46164526, "comment_id": 79291859, "body": "You&#39;re after the <code>fields_for</code> helper."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 2259952, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/405dc5d6db1bdf9a7758ff75cc8c44f7?s=128&d=identicon&r=PG", "display_name": "Ryan McCrary", "link": "https://stackoverflow.com/users/2259952/ryan-mccrary"}, "edited": false, "score": 0, "creation_date": 1505174905, "post_id": 46165066, "comment_id": 79294274, "body": "What would be the proper way to construct with <code>form_for</code>? The @books local variable is an array, so I&#39;m not sure how it works with that method"}, {"owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "reply_to_user": {"reputation": 51, "user_id": 2259952, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/405dc5d6db1bdf9a7758ff75cc8c44f7?s=128&d=identicon&r=PG", "display_name": "Ryan McCrary", "link": "https://stackoverflow.com/users/2259952/ryan-mccrary"}, "edited": false, "score": 2, "creation_date": 1505175779, "post_id": 46165066, "comment_id": 79294494, "body": "If you want to stick with @books and creating multiple records in one form, you&#39;ll probably be stuck with form_tag and constructing HTML manually, like the linked solution. But I think it&#39;s better to create one record in one form. The code is cleaner, and the user experience is probably better. You can always use ajax if you want to allow users to continue creating records without being redirected."}, {"owner": {"reputation": 51, "user_id": 2259952, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/405dc5d6db1bdf9a7758ff75cc8c44f7?s=128&d=identicon&r=PG", "display_name": "Ryan McCrary", "link": "https://stackoverflow.com/users/2259952/ryan-mccrary"}, "edited": false, "score": 0, "creation_date": 1505175950, "post_id": 46165066, "comment_id": 79294531, "body": "Yea, the goal was to create multiple records with one form to make it quicker. The app already has a form for adding one, but wanted to explore adding a form that allows for a bulk-style import."}], "tags": [], "owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "is_accepted": false, "score": 2, "last_activity_date": 1505168138, "creation_date": 1505168138, "answer_id": 46165066, "question_id": 46164526, "link": "https://stackoverflow.com/questions/46164526/create-multiple-records-at-once-ruby-on-rails/46165066#46165066", "title": "Create multiple records at once ruby on rails", "body": "<p><code>form_tag</code> doesn't know your model object. So it won't wrap your params under the appropriate key. You should instead use <code>form_for</code> to save yourself the trouble of constructing the params.</p>\n\n<p>In order to create associated objects you can use <code>accepts_nested_attributes_for</code>. </p>\n\n<p>In order to create multiple objects you need to <a href=\"https://stackoverflow.com/a/27939990/4720244\">send their params to your controller in an array</a>. But I'd suggest you save single record only. You code would be cleaner and you can take advantage of Rails form helpers such as <code>form_for</code> and <code>fields_for</code> instead of constructing the HTML code by hand.</p>\n"}], "owner": {"reputation": 51, "user_id": 2259952, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/405dc5d6db1bdf9a7758ff75cc8c44f7?s=128&d=identicon&r=PG", "display_name": "Ryan McCrary", "link": "https://stackoverflow.com/users/2259952/ryan-mccrary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1544, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1505168138, "creation_date": 1505164818, "question_id": 46164526, "link": "https://stackoverflow.com/questions/46164526/create-multiple-records-at-once-ruby-on-rails", "title": "Create multiple records at once ruby on rails", "body": "<p>This seemed fairly straightforward, but is proving not to be. </p>\n\n<p>I have two models: Authors and Books. Authors has_many books, books belong_to authors.  I'd like to be able to add many books in a single form with different authors and information for each. </p>\n\n<pre><code>class BooksController &lt; ApplicationController\n\ndef new\n @books = []\n  5.times do\n    @books &lt;&lt; Book.new\n  end\nend\n</code></pre>\n\n<p>I'm not sure if that's the correct way to form the controller. The view is as follows:</p>\n\n<pre><code>&lt;%= form_tag(books_path(@books)) %&gt;\n &lt;% @books.each do |book| %&gt;\n  &lt;%= text_field_tag(:title) %&gt;\n  &lt;%= text_field_tag(:author) %&gt;\n  &lt;%= text_field_tag(:pages) %&gt;\n &lt;% end %&gt;\n&lt;%= submit_tag(\"Submit\") %&gt; \n</code></pre>\n\n<p>That's as far as I've gotten, as I can't get the @books to end up in my params, so I haven't gotten to trying the create method yet. All i'm getting is the :title, :author and :pages of the last record, and they aren't even in a book param. </p>\n"}, {"tags": ["ruby", "templates", "chef-infra"], "answers": [{"comments": [{"owner": {"reputation": 13699, "user_id": 18995, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8b7949efc26b4528e662555b02ae73d4?s=128&d=identicon&r=PG", "display_name": "Paul Croarkin", "link": "https://stackoverflow.com/users/18995/paul-croarkin"}, "edited": false, "score": 0, "creation_date": 1505226016, "post_id": 46165933, "comment_id": 79320195, "body": "This works, but I was wondering if you know where this is documented? The output of &#39;knife node show&#39; does not make it clear that these are not attributes."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 13699, "user_id": 18995, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8b7949efc26b4528e662555b02ae73d4?s=128&d=identicon&r=PG", "display_name": "Paul Croarkin", "link": "https://stackoverflow.com/users/18995/paul-croarkin"}, "edited": false, "score": 1, "creation_date": 1505230475, "post_id": 46165933, "comment_id": 79323455, "body": "If you look at the expanded view it&#39;s easier to see (i.e. <code>knife node show --long</code>), things that are attributes are all under the various attribute level keys while the name and environment (and run list, etc) are not."}, {"owner": {"reputation": 13699, "user_id": 18995, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8b7949efc26b4528e662555b02ae73d4?s=128&d=identicon&r=PG", "display_name": "Paul Croarkin", "link": "https://stackoverflow.com/users/18995/paul-croarkin"}, "edited": false, "score": 0, "creation_date": 1505237258, "post_id": 46165933, "comment_id": 79327383, "body": "That is a good, simple explanation - I wish that I could have found something similar in the documentation."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 4, "last_activity_date": 1505174283, "creation_date": 1505174283, "answer_id": 46165933, "question_id": 46164525, "link": "https://stackoverflow.com/questions/46164525/chef-template-does-not-evaluate-chef-environment-and-name-correctly/46165933#46165933", "title": "Chef Template Does Not Evaluate chef_environment and name Correctly", "body": "<p>That should be <code>node.name</code> and <code>node.chef_environment</code>. They aren't attributes, so you can't use the attribute access syntax to get them.</p>\n"}], "owner": {"reputation": 13699, "user_id": 18995, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8b7949efc26b4528e662555b02ae73d4?s=128&d=identicon&r=PG", "display_name": "Paul Croarkin", "link": "https://stackoverflow.com/users/18995/paul-croarkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 46165933, "answer_count": 1, "score": 0, "last_activity_date": 1505174283, "creation_date": 1505164811, "question_id": 46164525, "link": "https://stackoverflow.com/questions/46164525/chef-template-does-not-evaluate-chef-environment-and-name-correctly", "title": "Chef Template Does Not Evaluate chef_environment and name Correctly", "body": "<pre><code>knife node show -l my-node -F json\n</code></pre>\n\n<p>returns:</p>\n\n<pre><code>{\n   \"name\": \"my-node\",\n   \"chef_environment\": \"test\"\n   ..\n}\n</code></pre>\n\n<p>We have created a template, info.txt.erb:</p>\n\n<pre><code>node = &lt;%= node %&gt;\nname = &lt;%= node['name'] %&gt;\nchef_environment = &lt;%= node['chef_environment'] %&gt;\n</code></pre>\n\n<p>Our recipe:</p>\n\n<pre><code>template \"#{app_dir}/info.txt\" do\n  source 'info.txt.erb'\n  ...\nend\n</code></pre>\n\n<p>After the chef run, the node has an info.txt file:</p>\n\n<pre><code>node = my-node\nname =\nchef_environment =\n</code></pre>\n\n<p>Why does the <code>knife show &lt;NODE&gt;</code> command return something different than what is evaluated by the template file? How can I change the template file to get the correct information?</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-template"], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 1, "last_activity_date": 1505174426, "creation_date": 1505174426, "answer_id": 46165944, "question_id": 46164340, "link": "https://stackoverflow.com/questions/46164340/chef-template-using-a-nested-object-to-generate-a-configuration-file/46165944#46165944", "title": "Chef Template : Using a nested object to generate a configuration file", "body": "<p>By the time you get the data like that, it's a normal Ruby hash object. So you would use <code>_object[\"param1\"]</code>.</p>\n"}], "owner": {"reputation": 10095, "user_id": 1158977, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/B6Za7.png?s=128&g=1", "display_name": "Sam Hammamy", "link": "https://stackoverflow.com/users/1158977/sam-hammamy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1505174426, "creation_date": 1505163790, "question_id": 46164340, "link": "https://stackoverflow.com/questions/46164340/chef-template-using-a-nested-object-to-generate-a-configuration-file", "title": "Chef Template : Using a nested object to generate a configuration file", "body": "<p>I would like to generate a config file from a <code>Chef</code> template. What is the correct syntax for achieving this in <code>Chef 13+</code></p>\n\n<p>I have a databag with the following sub keys:</p>\n\n<pre><code>\"mykey1\" : {\n  \"param1\" : \"mysubvalue1\",\n  \"param2\" : \"mysubvalue2\"\n},\n\"mykey2\" : {\n  \"param1\" : \"mysubvalue11\",\n  \"param2\" : \"mysubvalue22\"\n},\n</code></pre>\n\n<p>Then in my recipe I use the template resource:</p>\n\n<pre><code>template 'mytemplate.erb'\n  ...\n  variables ({\n     :keys =&gt; [mykey1, mykey2]\n  })\nend\n</code></pre>\n\n<p>Then in the template:</p>\n\n<pre><code>&lt;% @keys.each_pair do |name, _object| %&gt;\n  [\"#{name}\"]\n  param1 = \"#{_object.param1}\"  # will this work??\n&lt;% end %&gt;\n</code></pre>\n\n<p>What is the correct way to reference the <code>param1</code> and <code>param2</code></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1505209700, "post_id": 46163985, "comment_id": 79308375, "body": "This is Ruby code using PHP thinking. Check <a href=\"https://stackoverflow.com/a/46164155/4265352\">this answer</a> below for a Ruby solution to your problem."}], "answers": [{"tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": false, "score": 2, "last_activity_date": 1505163024, "last_edit_date": 1505163024, "creation_date": 1505162906, "answer_id": 46164155, "question_id": 46163985, "link": "https://stackoverflow.com/questions/46163985/codefights-no-implicit-conversion-of-string-into-integer/46164155#46164155", "title": "Codefights No implicit conversion of String into Integer", "body": "<p>Error is here:</p>\n\n<pre><code>if i.length == inputArray.max.length # i instead of inputArray[i]\n  array &lt;&lt; i\nend\n</code></pre>\n\n<p>But I suggest to use select:</p>\n\n<pre><code>input_array = [\"aba\", \"aa\", \"ad\", \"vcd\", \"aba\"]\nmax_length = input_array.max.length\ninput_array.select { |el| el.length == max_length }\n#=&gt; [\"aba\", \"vcd\", \"aba\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8595143, "user_type": "registered", "profile_image": "https://graph.facebook.com/1472006936225233/picture?type=large", "display_name": "Clenio Mendes", "link": "https://stackoverflow.com/users/8595143/clenio-mendes"}, "is_accepted": false, "score": 1, "last_activity_date": 1505185680, "creation_date": 1505185680, "answer_id": 46167278, "question_id": 46163985, "link": "https://stackoverflow.com/questions/46163985/codefights-no-implicit-conversion-of-string-into-integer/46167278#46167278", "title": "Codefights No implicit conversion of String into Integer", "body": "<p>Visit the documentation of ruby array <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-each\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.2.0/Array.html#method-i-each</a></p>\n\n<p>You can see that \"i\" is not a position of array but the whole element. </p>\n\n<p>Then, the correct code would be:</p>\n\n<pre><code>if i.size== inputArray.max.size\n  array &lt;&lt; i\nend\n</code></pre>\n\n<p>It better use <strong>size</strong> than <strong>length</strong> according ruby style guide.\n<a href=\"https://github.com/bbatsov/ruby-style-guide\" rel=\"nofollow noreferrer\">https://github.com/bbatsov/ruby-style-guide</a></p>\n"}], "owner": {"reputation": 11, "user_id": 5793950, "user_type": "registered", "profile_image": "https://graph.facebook.com/931806100207186/picture?type=large", "display_name": "Krist&#243;f Nagy", "link": "https://stackoverflow.com/users/5793950/krist%c3%b3f-nagy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1505195757, "creation_date": 1505162193, "last_edit_date": 1505195757, "question_id": 46163985, "link": "https://stackoverflow.com/questions/46163985/codefights-no-implicit-conversion-of-string-into-integer", "title": "Codefights No implicit conversion of String into Integer", "body": "<p>Here is a code:</p>\n\n<pre><code>def allLongestStrings(inputArray)\n    array = Array.new\n    inputArray.each do |i|\n        if inputArray[i].length == inputArray.max.length\n            array &lt;&lt; inputArray[i]\n        end\n    end\n    return array\nend\n\ninputArray = [\"aba\", \"aa\", \"ad\", \"vcd\", \"aba\"]\n</code></pre>\n\n<p>It says \"no implicit conversion of String into Integer\" and I can't figure it out. What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "mailgun", "rbenv-vars"], "comments": [{"owner": {"reputation": 3957, "user_id": 187004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94464371b17302eadec74810ec480aaf?s=128&d=identicon&r=PG", "display_name": "Cristian Bica", "link": "https://stackoverflow.com/users/187004/cristian-bica"}, "edited": false, "score": 0, "creation_date": 1505162644, "post_id": 46163664, "comment_id": 79290579, "body": "There&#39;s a similar issue at <a href=\"https://github.com/jorgemanrubia/mailgun_rails/issues/77\" rel=\"nofollow noreferrer\">github.com/jorgemanrubia/mailgun_rails/issues/77</a>. You need to see the exact reply from mailgun to understand what&#39;s wrong. If you&#39;re using a recent version of rails the webconsole should popup and you could trace back the response from mailgun"}, {"owner": {"reputation": 4892, "user_id": 647002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/901717ff317580d55f04a8d91d883721?s=128&d=identicon&r=PG", "display_name": "medmunds", "link": "https://stackoverflow.com/users/647002/medmunds"}, "edited": false, "score": 1, "creation_date": 1550610929, "post_id": 46163664, "comment_id": 96330083, "body": "&quot;Mailgun Magnificent API&quot; is Mailgun&#39;s way of saying &quot;your sender domain and auth are all good, but I can&#39;t figure out what API you&#39;re asking for&quot;. One way this might happen is if <code>MAILGUN_DOMAIN=mg.&lt;&lt;MYDOMAIN&gt;&gt;.nl</code> resolves to something with slashes in it. <a href=\"https://stackoverflow.com/a/54774987/647002\">More on &quot;Mailgun Magnificent API&quot;</a>."}], "owner": {"reputation": 21, "user_id": 8594143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/embMC.png?s=128&g=1", "display_name": "Finn", "link": "https://stackoverflow.com/users/8594143/finn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1125, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1505161030, "creation_date": 1505160687, "last_edit_date": 1505161030, "question_id": 46163664, "link": "https://stackoverflow.com/questions/46163664/765-unexpected-token-at-mailgun-magnificent-api-ruby-on-rails-mailgun-rails", "title": "765: unexpected token at &#39;Mailgun Magnificent API&#39; (Ruby on Rails, mailgun_rails)", "body": "<p>I've been trying to set up the mailgun API with my rails app (in development) and I'm using the mailgun_rails gem, but when trying to send a message the Action Controller gives me an error:</p>\n\n<p><em>JSON::ParserError in UsersController#create</em></p>\n\n<p><strong>765: unexpected token at 'Mailgun Magnificent API'</strong></p>\n\n<p>The extracted source is as follows:</p>\n\n<pre><code>@user = User.create(user_params)\nif @user.save\n  UserMailer.account_activation(@user).deliver_now\n  flash[:info] = \"Please check your email to activate your account.\"\n  redirect_to root_url\n</code></pre>\n\n<p>my development.rb has the following lines concerning the action mailer:</p>\n\n<pre><code>config.action_mailer.raise_delivery_errors = true\nconfig.action_mailer.delivery_method = :mailgun\n\nconfig.action_mailer.default_url_options = { :host =&gt; 'localhost:3000' }\nconfig.action_mailer.perform_deliveries = true\n\nconfig.action_mailer.mailgun_settings = {\n  api_key: ENV['MAILGUN_API_KEY'],\n  domain: ENV['MAILGUN_DOMAIN']\n}\n\nconfig.action_mailer.perform_caching = false\n</code></pre>\n\n<p>The environments in my .rbenv-vars file look like this:</p>\n\n<pre><code>MAILGUN_API_KEY=key-&lt;&lt;KEY&gt;&gt;\nMAILGUN_DOMAIN=mg.&lt;&lt;MYDOMAIN&gt;&gt;.nl\n</code></pre>\n\n<p>All Domain verifications &amp; DNS for mailgun have been completed (and recognized my mailgun itself).</p>\n\n<p>Could anyone please help me figure out what's going wrong?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I forgot to include my terminal trace:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>Started POST \"/signup\" for 127.0.0.1 at 2017-09-11 22:03:58 +0200\r\n  ActiveRecord::SchemaMigration Load (0.3ms)  SELECT `schema_migrations`.* FROM `schema_migrations`\r\nProcessing by UsersController#create as HTML\r\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"&lt;&lt;TOKEN&gt;&gt;\", \"user\"=&gt;{\"name\"=&gt;\"Mailtest\", \"email\"=&gt;\"&lt;&lt;EMAIL&gt;&gt;\", \"password\"=&gt;\"[FILTERED]\", \"password_confirmation\"=&gt;\"[FILTERED]\"}, \"commit\"=&gt;\"Sign up\"}\r\n   (0.2ms)  BEGIN\r\n  User Exists (0.3ms)  SELECT  1 AS one FROM `users` WHERE `users`.`email` = '&lt;&lt;EMAIL&gt;&gt;' LIMIT 1\r\n  SQL (0.3ms)  INSERT INTO `users` (`email`, `name`, `created_at`, `updated_at`, `password_digest`, `activation_digest`) VALUES ('&lt;&lt;EMAIL&gt;&gt;', 'Mailtest', '2017-09-11 20:03:59', '2017-09-11 20:03:59', '&lt;&lt;TOKEN&gt;&gt;', '&lt;&lt;TOKEN&gt;&gt;')\r\n   (1.9ms)  COMMIT\r\n   (0.2ms)  BEGIN\r\n  User Exists (0.3ms)  SELECT  1 AS one FROM `users` WHERE `users`.`email` = '&lt;&lt;EMAIL&gt;&gt;' AND (`users`.`id` != 17) LIMIT 1\r\n   (0.2ms)  COMMIT\r\n  Rendering user_mailer/account_activation.html.erb within layouts/mailer\r\n  Rendered user_mailer/account_activation.html.erb within layouts/mailer (5.6ms)\r\n  Rendering user_mailer/account_activation.text.erb within layouts/mailer\r\n  Rendered user_mailer/account_activation.text.erb within layouts/mailer (0.6ms)\r\nUserMailer#account_activation: processed outbound mail in 222.3ms\r\nSent mail to &lt;&lt;EMAIL&gt;&gt; (1149.7ms)\r\nDate: Mon, 11 Sep 2017 22:03:59 +0200\r\nFrom: noreply@&lt;&lt;DOMAIN&gt;&gt;.nl\r\nTo: &lt;&lt;EMAIL&gt;&gt;\r\nMessage-ID: &lt;&lt;ID&gt;&gt;\r\nSubject: Account activation\r\nMime-Version: 1.0\r\nContent-Type: multipart/alternative;\r\n boundary=\"--==_mimepart_59b6ec2f9d9da_4dd63ff8ffd4f034650e4\";\r\n charset=UTF-8\r\nContent-Transfer-Encoding: 7bit\r\n\r\n\r\n----==_mimepart_59b6ec2f9d9da_4dd63ff8ffd4f034650e4\r\nContent-Type: text/plain;\r\n charset=UTF-8\r\nContent-Transfer-Encoding: 7bit\r\n\r\nHi Mailtest,\r\n\r\nWelcome to the &lt;&lt;DOMAIN&gt;&gt;! Click on the link below to activate your account:\r\n\r\n&lt;&lt;ACTIVATION LINK&gt;&gt;\r\n\r\n\r\n----==_mimepart_59b6ec2f9d9da_4dd63ff8ffd4f034650e4\r\nContent-Type: text/html;\r\n charset=UTF-8\r\nContent-Transfer-Encoding: 7bit\r\n\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n  &lt;head&gt;\r\n    &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" /&gt;\r\n    &lt;style&gt;\r\n      /* Email styles need to be inline */\r\n    &lt;/style&gt;\r\n  &lt;/head&gt;\r\n\r\n  &lt;body&gt;\r\n    &lt;h1&gt;&lt;&lt;DOMAIN&gt;&gt;&lt;/h1&gt;\r\n\r\n&lt;p&gt;Hi Mailtest,&lt;/p&gt;\r\n\r\n&lt;p&gt;\r\nWelcome to the &lt;&lt;DOMAIN&gt;&gt;! Click on the link below to activate your account:\r\n&lt;/p&gt;\r\n\r\n&lt;a href=\"&lt;&lt;ACTIVATION LINK&gt;&gt;\"&gt;Activate&lt;/a&gt;\r\n\r\n  &lt;/body&gt;\r\n&lt;/html&gt;\r\n\r\n----==_mimepart_59b6ec2f9d9da_4dd63ff8ffd4f034650e4--\r\n\r\nCompleted 500 Internal Server Error in 1589ms (ActiveRecord: 5.4ms)\r\n\r\n\r\n  \r\nJSON::ParserError (765: unexpected token at 'Mailgun Magnificent API')</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}]